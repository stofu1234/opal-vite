Opal.modules.native=function(e){var z=e.hash_put,q=e.module,D=e.defs,A=e.slice,ee=e.truthy,W=e.send,R=e.Kernel,Z=e.extract_kwargs,p=e.ensure_kwargs,H=e.hash_get,$e=e.range,K=e.to_a,Y=e.def,te=e.return_ivar,F=e.alias,x=e.klass,P=e.rb_minus,B=e.return_val,U=e.send2,N=e.find_super,T=e.eqeqeq,g=e.rb_ge,w=e.return_self,j=e.gvars,E=e.top,v=[],o=e.$r(v),d=e.nil,k=e.$$$;return e.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(h,l){var c=q(h,"Native"),X=[c].concat(l),y=e.$r(X);return D(c,"$is_a?",function(a,$){var n=this;try{return a instanceof n.$try_convert($)}catch{return!1}}),D(c,"$try_convert",function(a,$){var n=this;return $==null&&($=d),n["$native?"](a)?a:a["$respond_to?"]("to_n")?a.$to_n():$},-2),D(c,"$convert",function(a){var $=this;if($["$native?"](a))return a;if(a["$respond_to?"]("to_n"))return a.$to_n();$.$raise(y("ArgumentError"),""+a.$inspect()+" isn't native")}),D(c,"$call",function i(a,$,n){var t=i.$$p||d,r,s,u=this;i.$$p=null,r=A(arguments,2),s=r;var f=a[$];if(f instanceof Function){for(var m=new Array(s.length),S=0,C=s.length;S<C;S++){var M=s[S],J=u.$try_convert(M);m[S]=J===d?M:J}return t!==d&&m.push(t),u.$Native(f.apply(a,m))}else return u.$Native(f)},-3),D(c,"$proc",function i(){var a=i.$$p||d,$=this;return i.$$p=null,ee(a)||$.$raise(y("LocalJumpError"),"no block given"),W(R,"proc",[],function n(t){var r,s,u=n.$$s==null?this:n.$$s,f=d;if(r=A(arguments),s=r,W(s,"map!",[],function S(C){var M=S.$$s==null?this:S.$$s;return C==null&&(C=d),M.$Native(C)},{$$s:u}),f=u.$Native(this),this===e.global)return a.apply(u,s);var m=a.$$s;a.$$s=null;try{return a.apply(f,s)}finally{a.$$s=m}},{$$arity:-1,$$s:$})}),function(i,a){var $=q(i,"Helpers"),n=[$].concat(a),t=e.$r(n);return Y($,"$alias_native",function r(s,u,f){var m,S,C,M;r.$$p;var J=this;return r.$$p=null,m=A(arguments,1),S=Z(m),S=p(S),m.length>0&&(C=m.shift()),C==null&&(C=s),M=H(S,"as"),M==null&&(M=d),ee(C["$end_with?"]("="))?W(J,"define_method",[s],function O(ae){var le=O.$$s==null?this:O.$$s;return le.native==null&&(le.native=d),ae==null&&(ae=d),le.native[C["$[]"]($e(0,-2,!1))]=t("Native").$convert(ae),ae},{$$s:J}):ee(M)?W(J,"define_method",[s],function O(ae){var le=O.$$p||d,ce,de,he=O.$$s==null?this:O.$$s,ve=d;return he.native==null&&(he.native=d),O.$$p=null,ce=A(arguments),de=ce,ve=W(t("Native"),"call",[he.native,C].concat(K(de)),le.$to_proc()),ee(ve)?M.$new(ve.$to_n()):d},{$$arity:-1,$$s:J}):W(J,"define_method",[s],function O(ae){var le=O.$$p||d,ce,de,he=O.$$s==null?this:O.$$s;return he.native==null&&(he.native=d),O.$$p=null,ce=A(arguments),de=ce,W(t("Native"),"call",[he.native,C].concat(K(de)),le.$to_proc())},{$$arity:-1,$$s:J})},-2),Y($,"$native_reader",function(s){var u,f,m=this;return u=A(arguments),f=u,W(f,"each",[],function S(C){var M=S.$$s==null?this:S.$$s;return C==null&&(C=d),W(M,"define_method",[C],function J(){var O=J.$$s==null?this:J.$$s;return O.native==null&&(O.native=d),O.$Native(O.native[C])},{$$s:M})},{$$s:m})},-1),Y($,"$native_writer",function(s){var u,f,m=this;return u=A(arguments),f=u,W(f,"each",[],function S(C){var M=S.$$s==null?this:S.$$s;return C==null&&(C=d),W(M,"define_method",[""+C+"="],function J(O){var ae=J.$$s==null?this:J.$$s;return ae.native==null&&(ae.native=d),O==null&&(O=d),ae.$Native(ae.native[C]=O)},{$$s:M})},{$$s:m})},-1),Y($,"$native_accessor",function(s){var u,f,m=this;return u=A(arguments),f=u,W(m,"native_reader",K(f)),W(m,"native_writer",K(f))},-1)}(X[0],X),function(i,a){var $=q(i,"Wrapper"),n=[$].concat(a),t=e.$r(n);return Y($,"$initialize",function(s){var u=this;return ee(R["$native?"](s))||R.$raise(t("ArgumentError"),""+s.$inspect()+" isn't native"),u.native=s}),Y($,"$to_n",te("native")),D($,"$included",function(s){return s.$extend(t("Helpers"))})}(X[0],X),D(c,"$included",function(a){var $=this;return $.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),a.$include(y("Wrapper"))})}(v[0],v),function(h,l){var c=q(h,"Kernel"),X=[c].concat(l),y=e.$r(X);return Y(c,"$native?",function(a){return a==null||!a.$$class}),Y(c,"$Native",function i(a){i.$$p;var $=this;return i.$$p=null,ee(a==null)?d:ee($["$native?"](a))?k(y("Native"),"Object").$new(a):ee(a["$is_a?"](y("Array")))?W(a,"map",[],function n(t){var r=n.$$s==null?this:n.$$s;return t==null&&(t=d),r.$Native(t)},{$$s:$}):ee(a["$is_a?"](y("Proc")))?W($,"proc",[],function n(t){var r=n.$$p||d,s,u,f=n.$$s==null?this:n.$$s;return n.$$p=null,s=A(arguments),u=s,f.$Native(W(a,"call",K(u),r.$to_proc()))},{$$arity:-1,$$s:$}):a}),F(c,"_Array","Array"),Y(c,"$Array",function i(a,$){var n=i.$$p||d,t,r,s=this;return i.$$p=null,t=A(arguments,1),r=t,ee(s["$native?"](a))?W(k(y("Native"),"Array"),"new",[a].concat(K(r)),n.$to_proc()).$to_a():s.$_Array(a)},-2)}(v[0],v),function(h,l){var c=x(h,l,"Object"),X=c.$$prototype;return X.native=d,c.$include(k(k("Native"),"Wrapper")),Y(c,"$==",function(i){var a=this;return a.native===k("Native").$try_convert(i)}),Y(c,"$has_key?",function(i){var a=this;return e.hasOwnProperty.call(a.native,i)}),Y(c,"$each",function y(i){var a,$,n=y.$$p||d,t=this;if(y.$$p=null,a=A(arguments),$=a,n!==d){for(var r in t.native)e.yieldX(n,[r,t.native[r]]);return t}else return W(t,"method_missing",["each"].concat(K($)))},-1),Y(c,"$[]",function(i){var a=this,$=a.native[i];return $ instanceof Function?$:k("Native").$call(a.native,i)}),Y(c,"$[]=",function(i,a){var $=this,n=d;return n=k("Native").$try_convert(a),ee(n===d)?$.native[i]=a:$.native[i]=n}),Y(c,"$merge!",function(i){var a=this;i=k("Native").$convert(i);for(var $ in i)a.native[$]=i[$];return a}),Y(c,"$respond_to?",function(i,a){var $=this;return a==null&&(a=!1),R.$instance_method("respond_to?").$bind($).$call(i,a)},-2),Y(c,"$respond_to_missing?",function(i,a){var $=this;return e.hasOwnProperty.call($.native,i)},-2),Y(c,"$method_missing",function y(i,a){var $=y.$$p||d,n,t,r,s=this;return y.$$p=null,n=A(arguments,1),t=n,i.charAt(i.length-1)==="="?(r=[i.$slice(0,P(i.$length(),1)),t["$[]"](0)],W(s,"[]=",r),r[r.length-1]):W(k("Native"),"call",[s.native,i].concat(K(t)),$.$to_proc())},-2),Y(c,"$nil?",B(!1)),Y(c,"$is_a?",function(i){var a=this;return e.is_a(a,i)}),Y(c,"$instance_of?",function(i){var a=this;return a.$$class===i}),Y(c,"$class",function(){var i=this;return i.$$class}),Y(c,"$to_a",function y(i){var a=y.$$p||d,$=this;return y.$$p=null,i==null&&(i=new Map),W(k(k("Native"),"Array"),"new",[$.native,i],a.$to_proc()).$to_a()},-1),Y(c,"$inspect",function(){var i=this;return"#<Native:"+String(i.native)+">"}),F(c,"include?","has_key?"),F(c,"key?","has_key?"),F(c,"kind_of?","is_a?"),F(c,"member?","has_key?")}(o("Native"),o("BasicObject")),function(h,l,c){var X=x(h,l,"Array"),y=[X].concat(c),i=e.$r(y),a=X.$$prototype;return a.named=a.native=a.get=a.block=a.set=a.length=d,X.$include(k(i("Native"),"Wrapper")),X.$include(i("Enumerable")),Y(X,"$initialize",function $(n,t){var r=$.$$p||d,s=this,u=d;return $.$$p=null,t==null&&(t=new Map),U(s,N(s,"initialize",$,!1,!0),"initialize",[n],null),s.get=ee(u=t["$[]"]("get"))?u:t["$[]"]("access"),s.named=t["$[]"]("named"),s.set=ee(u=t["$[]"]("set"))?u:t["$[]"]("access"),s.length=ee(u=t["$[]"]("length"))?u:"length",s.block=r,ee(s.$length()==null)?s.$raise(i("ArgumentError"),"no length found on the array-like object"):d},-2),Y(X,"$each",function $(){var n=$.$$p||d,t=this;if($.$$p=null,!ee(n))return t.$enum_for("each");for(var r=0,s=t.$length();r<s;r++)e.yield1(n,t["$[]"](r));return t}),Y(X,"$[]",function(n){var t=this,r=d,s=d;return r=T(i("String"),s=n)||T(i("Symbol"),s)?ee(t.named)?t.native[t.named](n):t.native[n]:T(i("Integer"),s)?ee(t.get)?t.native[t.get](n):t.native[n]:d,ee(r)?ee(t.block)?t.block.$call(r):t.$Native(r):d}),Y(X,"$[]=",function(n,t){var r=this;return ee(r.set)?r.native[r.set](n,i("Native").$convert(t)):r.native[n]=i("Native").$convert(t)}),Y(X,"$last",function(n){var t=this,r=d,s=d;if(n==null&&(n=d),ee(n)){for(r=P(t.$length(),1),s=[];ee(g(r,0));)s["$<<"](t["$[]"](r)),r=P(r,1);return s}else return t["$[]"](P(t.$length(),1))},-1),Y(X,"$length",function(){var n=this;return n.native[n.length]}),Y(X,"$inspect",function(){var n=this;return n.$to_a().$inspect()}),F(X,"to_ary","to_a")}(o("Native"),null,v),function(h,l){var c=x(h,l,"Numeric");return Y(c,"$to_n",function(){var y=this;return y.valueOf()})}(v[0],null),function(h,l){var c=x(h,l,"Proc");return Y(c,"$to_n",w)}(v[0],null),function(h,l){var c=x(h,l,"String");return Y(c,"$to_n",function(){var y=this;return y.valueOf()})}(v[0],null),function(h,l){var c=x(h,l,"Regexp");return Y(c,"$to_n",function(){var y=this;return y.valueOf()})}(v[0],null),function(h,l){var c=x(h,l,"MatchData");return Y(c,"$to_n",te("matches"))}(v[0],null),function(h,l,c){var X=x(h,l,"Struct"),y=[X].concat(c),i=e.$r(y);return Y(X,"$to_n",function(){var $=this,n=d;return n={},W($,"each_pair",[],function(r,s){return r==null&&(r=d),s==null&&(s=d),n[r]=i("Native").$try_convert(s,s)}),n})}(v[0],null,v),function(h,l,c){var X=x(h,l,"Array"),y=[X].concat(c),i=e.$r(y);return Y(X,"$to_n",function(){for(var $=this,n=[],t=0,r=$.length;t<r;t++){var s=$[t];n.push(i("Native").$try_convert(s,s))}return n})}(v[0],null,v),function(h,l){var c=x(h,l,"Boolean");return Y(c,"$to_n",function(){var y=this;return y.valueOf()})}(v[0],null),function(h,l){var c=x(h,l,"Time");return Y(c,"$to_n",w)}(v[0],null),function(h,l){var c=x(h,l,"NilClass");return Y(c,"$to_n",function(){return null})}(v[0],null),ee(o("Hash")["$method_defined?"]("_initialize"))||function(h,l,c){var X=x(h,l,"Hash"),y=[X].concat(c),i=e.$r(y);F(X,"_initialize","initialize");function a($,n,t){t&&(t.constructor===void 0||t.constructor===Object||t instanceof Map)?z($,n,i("Hash").$new(t)):t&&t.$$is_array?(t=t.map(function(r){return r&&(r.constructor===void 0||r.constructor===Object||t instanceof Map)?i("Hash").$new(r):X.$Native(r)}),z($,n,t)):z($,n,X.$Native(t))}return Y(X,"$initialize",function $(n){var t=$.$$p||d,r=this;if($.$$p=null,n!=null)if(n.constructor===void 0||n.constructor===Object){var s,u;for(s in n)u=n[s],a(r,s,u);return r}else n instanceof Map&&e.hash_each(n,!1,function(f,m){return a(r,f,m),[!1,!1]});return W(r,"_initialize",[n],t.$to_proc())},-1),Y(X,"$to_n",function(){var n=this,t={};return e.hash_each(n,!1,function(r,s){return t[i("Native").$try_convert(r,r)]=i("Native").$try_convert(s,s),[!1,!1]}),t})}(v[0],null,v),function(h,l){var c=x(h,l,"Module");return Y(c,"$native_module",function(){var y=this;return e.global[y.$name()]=y})}(v[0],null),function(h,l,c){var X=x(h,l,"Class"),y=[X].concat(c),i=e.$r(y);return Y(X,"$native_alias",function($,n){var t=this,r=t.prototype[e.jsid(n)];r||t.$raise(i("NameError").$new("undefined method `"+n+"' for class `"+t.$inspect()+"'",n)),t.prototype[$]=r}),Y(X,"$native_class",function(){var $=this;return $.$native_module(),$.new=$.$new})}(v[0],null,v),j.$=j.global=E.$Native(e.global)};(function(e){var z;if(typeof globalThis<"u"?e=globalThis:typeof global<"u"?e=global:typeof window<"u"&&(e=window),e.console==null&&(e.console={}),typeof e.console=="object"?z=e.console:z={},"log"in z||(z.log=function(){}),"warn"in z||(z.warn=z.log),typeof e.Opal<"u")return z.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),e.Opal;var q,D,A,ee,W,R,Z,p=e.Opal={};p.global=e,p.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var H=Function.prototype.call,$e=Function.prototype.bind,K=Object.hasOwn||H.bind(Object.prototype.hasOwnProperty),Y=Object.setPrototypeOf,te=H.bind(Array.prototype.slice),F=H.bind(Array.prototype.splice),x=4,P=x;function B(){return P+=2,P}p.uid=B,p.id=function(_){return _.$$is_number?_*2+1:(_.$$id==null&&g(_,"$$id",B()),_.$$id)};var U=p.gvars={};p.exit=function(_){U.DEBUG&&z.log("Exited with status "+_)},p.exceptions=[],p.pop_exception=function(_){var b=p.exceptions.pop();b===_||(b?U["!"]=b:U["!"]=q)};function N(_,b){if(_||(_=p.Exception||Error),Z&&Z.$raise)arguments.length>2?Z.$raise(_.$new.apply(_,te(arguments,1))):Z.$raise(_,b);else throw _.$new?_.$new(b):new _(b)}var T={value:void 0,enumerable:!1,configurable:!0,writable:!0};function g(_,b,G){typeof _=="string"?_[b]=G:(T.value=G,Object.defineProperty(_,b,T))}p.prop=g,p.defineProperty=p.prop,p.slice=te;var w=p.truthy=function(_){return _!==!1&&q!==_&&_!==void 0&&_!==null&&(!(_ instanceof Boolean)||_.valueOf()===!0)};p.falsy=function(_){return!w(_)},p.type_error=function(_,b,G,re){_=_.$$class,re&&G?(re=re.$$class,N(p.TypeError,"can't convert "+_+" into "+b+" ("+_+"#"+G+" gives "+re+")")):N(p.TypeError,"no implicit conversion of "+_+" into "+b)},p.coerce_to=function(_,b,G,re){var ue;return G==="to_int"&&b===p.Integer&&_.$$is_number?_<0?Math.ceil(_):Math.floor(_):G==="to_str"&&b===p.String&&_.$$is_string||p.is_a(_,b)?_:_["$respond_to?"].$$pristine&&_.$method_missing.$$pristine?(ue=_[de(G)],(ue==null||ue.$$stub)&&p.type_error(_,b),ue.apply(_,re)):(_["$respond_to?"](G)||p.type_error(_,b),re==null&&(re=[]),p.send(_,G,re))},p.respond_to=function(_,b,G){if(_==null||!_.$$class)return!1;G=!!G;var re=_[b];if(_["$respond_to?"].$$pristine){if(typeof re=="function"&&!re.$$stub)return!0;if(!_["$respond_to_missing?"].$$pristine)return p.send(_,_["$respond_to_missing?"],[b.substr(1),G])}else return p.send(_,_["$respond_to?"],[b.substr(1),G])},p.trace_class=!1,p.tracers_for_class=[];function j(_){var b,G,re;for(b=0,G=p.tracers_for_class.length;b<G;b++)re=p.tracers_for_class[b],re.trace_object=_,re.block.$call(re)}function E(_,b){if(_.$$autoload[b].loaded){if(_.$$autoload[b].loaded&&!_.$$autoload[b].required&&_.$$autoload[b].exception)throw _.$$autoload[b].exception}else{_.$$autoload[b].loaded=!0;try{p.Kernel.$require(_.$$autoload[b].path)}catch(G){throw _.$$autoload[b].exception=G,G}if(_.$$autoload[b].required=!0,_.$$const[b]!=null)return _.$$autoload[b].success=!0,_.$$const[b]}}function v(_,b){if(_){if(_.$$const[b]!=null)return _.$$const[b];if(_.$$autoload&&_.$$autoload[b])return E(_,b)}}function o(_,b){var G,re,ue;if(_.length!==0)for(G=0,re=_.length;G<re;G++){if(ue=_[G].$$const[b],ue!=null)return ue;if(_[G].$$autoload&&_[G].$$autoload[b])return E(_[G],b)}}function d(_,b){var G,re,ue;if(_!=null)for(ue=J(_),G=0,re=ue.length;G<re;G++){if(ue[G].$$const&&K(ue[G].$$const,b))return ue[G].$$const[b];if(ue[G].$$autoload&&ue[G].$$autoload[b])return E(ue[G],b)}}function k(_,b){if(_==null||_.$$is_module)return d(A,b)}function h(_,b){return(_||A).$const_missing(b)}p.const_get_local=function(_,b,G){var re;if(_!=null)return _==="::"&&(_=A),!_.$$is_module&&!_.$$is_class&&N(p.TypeError,_.toString()+" is not a class/module"),re=v(_,b),re!=null||G?re:h(_,b)},p.const_get_qualified=function(_,b,G){var re,ue,_e,ge=p.const_cache_version;if(b==null)return re=v(A,_),re??p.const_get_qualified(A,_,G);if(_!=null)return _==="::"&&(_=A),!_.$$is_module&&!_.$$is_class&&N(p.TypeError,_.toString()+" is not a class/module"),(ue=_.$$const_cache)==null&&(g(_,"$$const_cache",Object.create(null)),ue=_.$$const_cache),_e=ue[b],_e==null||_e[0]!==ge?((re=v(_,b))!=null||(re=d(_,b))!=null,ue[b]=[ge,re]):re=_e[1],re!=null||G?re:h(_,b)},p.const_cache_version=1,p.const_get_relative=function(_,b,G){var re=_[0],ue,_e=p.const_cache_version,ge,pe;return(ge=_.$$const_cache)==null&&(g(_,"$$const_cache",Object.create(null)),ge=_.$$const_cache),pe=ge[b],pe==null||pe[0]!==_e?((ue=v(re,b))!=null||(ue=o(_,b))!=null||(ue=d(re,b))!=null||(ue=k(re,b))!=null,ge[b]=[_e,ue]):ue=pe[1],ue!=null||G?ue:h(re,b)};function l(_,b,G){var re=!0;return(_==null||_==="::")&&(_=A),G.$$is_a_module&&((G.$$name==null||G.$$name===q)&&(G.$$name=b),G.$$base_module==null&&(G.$$base_module=_)),_.$$const=_.$$const||Object.create(null),(b in _.$$const||"$$autoload"in _&&b in _.$$autoload)&&(re=!1),_.$$const[b]=G,_.$$=_.$$const,p.const_cache_version++,_===A&&(p[b]=G),g(_,b,G),re&&_.$const_added&&!_.$const_added.$$pristine&&_.$const_added(b),G}p.const_set=l,p.constants=function(_,b){b==null&&(b=!0);var G,re=[_],ue,_e,ge={},pe;for(b&&(re=re.concat(J(_))),b&&_.$$is_module&&(re=re.concat([p.Object]).concat(J(p.Object))),ue=0,_e=re.length;ue<_e&&(G=re[ue],!(_!==A&&G==A));ue++){for(pe in G.$$const)ge[pe]=!0;if(G.$$autoload)for(pe in G.$$autoload)ge[pe]=!0}return Object.keys(ge)},p.const_remove=function(_,b){if(p.const_cache_version++,_.$$const[b]!=null){var G=_.$$const[b];return delete _.$$const[b],G}if(_.$$autoload&&_.$$autoload[b])return delete _.$$autoload[b],q;N(p.NameError,"constant "+_+"::"+_.$name()+" not defined")},p.const_get_relative_factory=function(_){return function(b,G){return p.$$(_,b,G)}},p.$$=p.const_get_relative,p.$$$=p.const_get_qualified,p.$r=p.const_get_relative_factory;function c(_){return _==null?!1:_.$$bridge?_:_.$$super?c(_.$$super):!1}function X(_,b,G){var re,ue;if((ue=c(b))?re=function(){var ye=new($e.apply(ue.$$constructor,he(null,arguments)));return Y(ye,re.$$prototype),ye}:re=function(){},_&&_!==q&&g(re,"displayName","::"+_),g(re,"$$name",_),g(re,"$$constructor",re),g(re,"$$prototype",re.prototype),g(re,"$$const",{}),g(re,"$$is_class",!0),g(re,"$$is_a_module",!0),g(re,"$$super",b),g(re,"$$cvars",{}),g(re,"$$own_included_modules",[]),g(re,"$$own_prepended_modules",[]),g(re,"$$ancestors",[]),g(re,"$$ancestors_cache_version",null),g(re,"$$subclasses",[]),g(re,"$$cloned_from",[]),g(re.$$prototype,"$$class",re),p.Class&&Y(re,p.Class.prototype),b!=null){if(Y(re.$$prototype,b.$$prototype),G!==!0)if(typeof WeakRef<"u"){var _e,ge,pe=[];for(_e=0;_e<b.$$subclasses.length;_e++)ge=b.$$subclasses[_e],ge.deref()!==void 0&&pe.push(ge);pe.push(new WeakRef(re)),b.$$subclasses=pe}else b.$$subclasses.push(re);b.$$meta&&p.build_class_singleton_class(re)}return re}p.allocate_class=X;function y(_,b){var G=v(_,b);if(G)return G.$$is_class||N(p.TypeError,b+" is not a class"),G}function i(_,b){_.$$super!==b&&N(p.TypeError,"superclass mismatch for class "+_.$$name)}p.klass=function(_,b,G){var re;_==null||_=="::"?_=A:!_.$$is_class&&!_.$$is_module&&(_=_.$$class),b!=null&&(!b.hasOwnProperty||b.hasOwnProperty&&!b.hasOwnProperty("$$is_class"))&&(b.constructor&&b.constructor.name=="Function"?(re=b,b=A):N(p.TypeError,"superclass must be a Class ("+(b.constructor&&(b.constructor.name||b.constructor.$$name)||typeof b)+" given)"));var ue=y(_,G);return ue!=null?b&&i(ue,b):(b==null&&(b=A),ue=X(G,b),l(_,G,ue),b.$inherited&&b.$inherited(ue),re&&p.bridge(re,ue)),p.trace_class&&j(ue),ue};function a(_){var b=function(){},G=b;return _&&g(b,"displayName",_+".constructor"),g(G,"$$name",_),g(G,"$$prototype",b.prototype),g(G,"$$const",{}),g(G,"$$is_module",!0),g(G,"$$is_a_module",!0),g(G,"$$cvars",{}),g(G,"$$iclasses",[]),g(G,"$$own_included_modules",[]),g(G,"$$own_prepended_modules",[]),g(G,"$$ancestors",[G]),g(G,"$$ancestors_cache_version",null),g(G,"$$cloned_from",[]),Y(G,p.Module.prototype),G}p.allocate_module=a;function $(_,b){var G=v(_,b);return G==null&&_===A&&(G=d(A,b)),G&&!G.$$is_module&&G!==A&&N(p.TypeError,b+" is not a module"),G}p.module=function(_,b){var G;return _==null||_=="::"?_=A:!_.$$is_class&&!_.$$is_module&&(_=_.$$class),G=$(_,b),G==null&&(G=a(b),l(_,b,G)),p.trace_class&&j(G),G},p.get_singleton_class=function(_){return _.$$is_number&&N(p.TypeError,"can't define singleton"),_.$$meta?_.$$meta:_.hasOwnProperty("$$is_class")?p.build_class_singleton_class(_):_.hasOwnProperty("$$is_module")?p.build_module_singleton_class(_):p.build_object_singleton_class(_)};function n(_,b){_.hasOwnProperty("$$meta")?_.$$meta=b:g(_,"$$meta",b),_.$$frozen?_.$$meta.$freeze():Y(_,b.$$prototype)}p.build_class_singleton_class=function(_){if(_.$$meta)return _.$$meta;var b=_===D?W:p.get_singleton_class(_.$$super),G=X(null,b,!0);return g(G,"$$is_singleton",!0),g(G,"$$singleton_of",_),n(_,G),g(_,"$$class",p.Class),G},p.build_module_singleton_class=function(_){if(_.$$meta)return _.$$meta;var b=X(null,p.Module,!0);return g(b,"$$is_singleton",!0),g(b,"$$singleton_of",_),n(_,b),g(_,"$$class",p.Module),b},p.build_object_singleton_class=function(_){var b=_.$$class,G=X(q,b,!0);return g(G,"$$is_singleton",!0),g(G,"$$singleton_of",_),delete G.$$prototype.$$class,n(_,G),G},p.is_method=function(_){return _[0]==="$"&&_[1]!=="$"},p.instance_methods=function(_){for(var b=Object.create(null),G=[],re=J(_),ue=0,_e=re.length;ue<_e;ue++){var ge=re[ue],pe=ge.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ze=ye.length;we<ze;we++){var Ee=ye[we];if(!b[Ee]){if(p.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);G.push(qe)}}b[Ee]=!0}}}return G},p.own_instance_methods=function(_){var b=[],G=_.$$prototype;G.hasOwnProperty("$$dummy")&&(G=G.$$define_methods_on);for(var re=Object.getOwnPropertyNames(G),ue=0,_e=re.length;ue<_e;ue++){var ge=re[ue];if(p.is_method(ge)){var pe=G[ge];if(!pe.$$stub){var ye=ge.slice(1);b.push(ye)}}}return b},p.methods=function(_){return p.instance_methods(_.$$meta||_.$$class)},p.own_methods=function(_){return _.$$meta?p.own_instance_methods(_.$$meta):[]},p.receiver_methods=function(_){var b=p.get_singleton_class(_),G=p.own_instance_methods(b),re=p.own_instance_methods(b.$$super);return G.concat(re)},p.class_variables=function(_){var b=J(_),G,re=b.length,ue={};for(G=re-1;G>=0;G--){var _e=b[G];for(var ge in _e.$$cvars)ue[ge]=_e.$$cvars[ge]}return ue},p.class_variable_set=function(_,b,G){var re=J(_),ue,_e=re.length;for(ue=_e-2;ue>=0;ue--){var ge=re[ue];if(K(ge.$$cvars,b))return ge.$$cvars[b]=G,G}return _.$$cvars[b]=G,G},p.class_variable_get=function(_,b,G){if(K(_.$$cvars,b))return _.$$cvars[b];var re=J(_),ue,_e=re.length;for(ue=0;ue<_e;ue++){var ge=re[ue];if(K(ge.$$cvars,b))return ge.$$cvars[b]}return G||N(p.NameError,"uninitialized class variable "+b+" in "+_.$name()),q};function t(_){return _.hasOwnProperty("$$iclass")&&_.hasOwnProperty("$$root")}function r(_){for(var b=[],G,re=Object.getPrototypeOf(_.$$prototype);re&&!re.hasOwnProperty("$$class");)G=C(re),G&&b.push(G),re=Object.getPrototypeOf(re);return b}function s(_){var b=[],G,re=Object.getPrototypeOf(_.$$prototype);if(_.$$prototype.hasOwnProperty("$$dummy"))for(;re&&re!==_.$$prototype.$$define_methods_on;)G=C(re),G&&b.push(G),re=Object.getPrototypeOf(re);return b}p.append_features=function(_,b){var G=J(_),re=[];G.indexOf(b)!==-1&&N(p.ArgumentError,"cyclic include detected");for(var ue=0,_e=G.length;ue<_e;ue++){var ge=G[ue],pe=f(ge);g(pe,"$$included",!0),re.push(pe)}var ye=J(b),we=S(re),ze,Ee;if(ye.indexOf(_)===-1)ze=b.$$prototype,Ee=Object.getPrototypeOf(b.$$prototype);else{for(var xe=b.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===_&&t(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var ke=Object.getPrototypeOf(qe);ke.hasOwnProperty("$$iclass")&&!t(ke);)ke=Object.getPrototypeOf(ke);ze=xe,Ee=ke}else ze=b.$$prototype,Ee=Object.getPrototypeOf(b.$$prototype)}Y(ze,we.first),Y(we.last,Ee),b.$$own_included_modules=r(b),p.const_cache_version++},p.prepend_features=function(_,b){var G=J(_),re=[];G.indexOf(b)!==-1&&N(p.ArgumentError,"cyclic prepend detected");for(var ue=0,_e=G.length;ue<_e;ue++){var ge=G[ue],pe=f(ge);g(pe,"$$prepended",!0),re.push(pe)}var ye=S(re),we=b.$$prototype,ze=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=m(b),u(b),g(we,"$$dummy",!0),g(we,"$$define_methods_on",Ee),Y(we,Ee),Y(Ee,ze));var ke=J(b);if(ke.indexOf(_)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else N(p.RuntimeError,"Prepending a module multiple times is not supported");Y(xe,ye.first),Y(ye.last,qe),b.$$own_prepended_modules=s(b),p.const_cache_version++};function u(_){for(var b=_.$$prototype,G=Object.getOwnPropertyNames(b),re=0;re<G.length;re++){var ue=G[re];p.is_method(ue)&&delete b[ue]}}function f(_){var b=m(_);return _.$$is_module&&_.$$iclasses.push(b),b}function m(_){var b={},G=_.$$prototype;G.hasOwnProperty("$$dummy")&&(G=G.$$define_methods_on);var re=Object.getOwnPropertyNames(G),ue=re.length,_e;for(_e=0;_e<ue;_e++){var ge=re[_e];g(b,ge,G[ge])}return g(b,"$$iclass",!0),g(b,"$$module",_),b}function S(_){var b=_.length,G=_[0];if(g(G,"$$root",!0),b===1)return{first:G,last:G};for(var re=G,ue=1;ue<b;ue++){var _e=_[ue];Y(re,_e),re=_e}return{first:_[0],last:_[b-1]}}p.bridge=function(_,b){_.hasOwnProperty("$$bridge")&&N(p.ArgumentError,"already bridged"),g(_,"$$bridge",b),Y(_.prototype,(b.$$super||p.Object).$$prototype),g(b,"$$prototype",_.prototype),g(b.$$prototype,"$$class",b),g(b,"$$constructor",_),g(b,"$$bridge",!0)};function C(_){if(!_.hasOwnProperty("$$dummy")){if(_.hasOwnProperty("$$iclass"))return _.$$module;if(_.hasOwnProperty("$$class"))return _.$$class}}function M(_){return _.$$own_prepended_modules.concat([_]).concat(_.$$own_included_modules)}function J(_){if(!_)return[];if(_.$$ancestors_cache_version===p.const_cache_version)return _.$$ancestors;var b=[],G,re,ue;for(G=0,re=M(_),ue=re.length;G<ue;G++)b.push(re[G]);if(_.$$super)for(G=0,re=J(_.$$super),ue=re.length;G<ue;G++)b.push(re[G]);return _.$$ancestors_cache_version=p.const_cache_version,_.$$ancestors=b,b}p.ancestors=J,p.included_modules=function(_){for(var b=[],G=null,re=Object.getPrototypeOf(_.$$prototype);re&&Object.getPrototypeOf(re);re=Object.getPrototypeOf(re))G=C(re),G&&G.$$is_module&&re.$$iclass&&re.$$included&&b.push(G);return b},p.add_stubs=function(_){var b=p.BasicObject.$$prototype,G,re;_=_.split(",");for(var ue=0,_e=_.length;ue<_e;ue++)G=de(_[ue]),re=b[G],(re==null||re.$$stub)&&p.add_stub_for(b,G)},p.add_stub_for=function(_,b){g(_,b,p.stub_for(b))},p.stub_for=function(_){function b(){return this.$method_missing.$$p=b.$$p,b.$$p=null,this.$method_missing.apply(this,he(_.slice(1),arguments))}return b.$$stub=!0,b},p.ac=function(_,b,G,re){var ue="";G.$$is_a_module?ue+=G.$$name+".":ue+=G.$$class.$$name+"#",ue+=re,N(p.ArgumentError,"["+ue+"] wrong number of arguments (given "+_+", expected "+b+")")},p.block_ac=function(_,b,G){var re="`block in "+G+"'";N(p.ArgumentError,re+": wrong number of arguments (given "+_+", expected "+b+")")};function O(_){return _.hasOwnProperty("$$meta")&&_.$$meta!==null?J(_.$$meta):J(_.$$class)}p.find_super=function(_,b,G,re,ue){var _e=de(b),ge,pe,ye,we,ze=-1,Ee;for(ge=O(_),we=G.$$owner,Ee=0;Ee<ge.length;Ee++)if(pe=ge[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ze=Ee;break}for(Ee=ze+1;Ee<ge.length;Ee++){pe=ge[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(_e)){ye=xe[_e];break}}return!re&&ye&&ye.$$stub&&_.$method_missing.$$pristine&&N(p.NoMethodError,"super: no superclass method `"+b+"' for "+_,b),ye.$$stub&&!ue?null:ye},p.find_block_super=function(_,b,G,re,ue){var _e=b;return G||N(p.RuntimeError,"super called outside of method"),ue&&G.$$define_meth&&N(p.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),G.$$def&&(_e=G.$$jsid),p.find_super(_,_e,G,re)},p.find_super_dispatcher=p.find_super,p.find_iter_super_dispatcher=p.find_block_super;function ae(_,b,G){try{_(b)}catch(re){if(re===G)return G.$v;throw re}}p.yield1=function(_,b){typeof _!="function"&&N(p.LocalJumpError,"no block given");var G=_.$$has_top_level_mlhs_arg,re=_.$$has_trailing_comma_in_args,ue=_.$$is_lambda&&_.$$ret;return(_.length>1||(G||re)&&_.length===1)&&(b=p.to_ary(b)),(_.length>1||re&&_.length===1)&&b.$$is_array?ue?ae(_.apply.bind(_,null),b,_.$$ret):_.apply(null,b):ue?ae(_,b,_.$$ret):_(b)},p.yieldX=function(_,b){return typeof _!="function"&&N(p.LocalJumpError,"no block given"),_.length>1&&b.length===1&&b[0].$$is_array&&(b=b[0]),_.$$is_lambda&&_.$$ret?ae(_.apply.bind(_,null),b,_.$$ret):_.apply(null,b)},p.rescue=function(_,b){for(var G=0;G<b.length;G++){var re=b[G];if(re.$$is_array){var ue=p.rescue(_,re);if(ue)return ue}else if(re===p.JS.Error||re["$==="](_))return re}return null},p.is_a=function(_,b){if(b!=null&&_.$$meta===b||_.$$class===b)return!0;if(_.$$is_number&&b.$$is_number_class)return b.$$is_integer_class?_%1===0:!0;var G=J(_.$$is_class?p.get_singleton_class(_):_.$$meta||_.$$class);return G.indexOf(b)!==-1},p.to_hash=function(_){if(_.$$is_hash)return _;if(_["$respond_to?"]("to_hash",!0)){var b=_.$to_hash();if(b.$$is_hash)return b;N(p.TypeError,"Can't convert "+_.$$class+" to Hash ("+_.$$class+"#to_hash gives "+b.$$class+")")}else N(p.TypeError,"no implicit conversion of "+_.$$class+" into Hash")},p.to_ary=function(_){if(_.$$is_array)return _;if(_["$respond_to?"]("to_ary",!0)){var b=_.$to_ary();if(b===q)return[_];if(b.$$is_array)return b;N(p.TypeError,"Can't convert "+_.$$class+" to Array ("+_.$$class+"#to_ary gives "+b.$$class+")")}else return[_]},p.to_a=function(_){if(_.$$is_array)return _.slice();if(_["$respond_to?"]("to_a",!0)){var b=_.$to_a();if(b===q)return[_];if(b.$$is_array)return b;N(p.TypeError,"Can't convert "+_.$$class+" to Array ("+_.$$class+"#to_a gives "+b.$$class+")")}else return[_]},p.extract_kwargs=function(_){var b=_[_.length-1];if(b!=null&&p.respond_to(b,"$to_hash",!0))return F(_,_.length-1),b},p.kwrestargs=function(_,b){var G=new Map;return p.hash_each(_,!1,function(re,ue){return b[re]||p.hash_put(G,re,ue),[!1,!1]}),G};function le(_,b){typeof b=="number"?_.$$arity=b:typeof b=="object"&&Object.assign(_,b)}var ce=new Map;function de(_){var b=ce.get(_);return b||(b="$"+_,ce.set(_,b)),b}p.jsid=de;function he(_,b){return b.$$is_array||(b=te(b)),[_].concat(b)}p.send=function(_,b,G,re,ue){var _e;return typeof b=="function"?(_e=b,b=null):typeof b=="string"?_e=_[de(b)]:N(p.NameError,"Passed method should be a string or a function"),p.send2(_,_e,b,G,re,ue)},p.send2=function(_,b,G,re,ue,_e){return b==null&&G!=null&&_.$method_missing&&(b=_.$method_missing,re=he(G,re)),le(ue,_e),typeof ue=="function"&&(b.$$p=ue),b.apply(_,re)},p.refined_send=function(_,b,G,re,ue,_e){var ge,pe,ye,we,ze,Ee,xe,qe,ke,Ae;for(we=O(b),ge=0;ge<we.length;ge++)for(ze=p.id(we[ge]),pe=0;pe<_.length;pe++)for(Ee=_[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ze]>"u")&&(ke=qe[ze],typeof ke.$$prototype[de(G)]<"u")))return Ae=ke.$$prototype[de(G)],p.send2(b,Ae,G,re,ue,_e);return p.send(b,G,re,ue,_e)},p.lambda=function(_,b){return _.$$is_lambda=!0,le(_,b),_},p.def=function(_,b,G,re){return le(G,re),_===p.top?p.defn(p.Object,b,G):!_.$$eval&&_.$$is_a_module?p.defn(_,b,G):p.defs(_,b,G)},p.defn=function(_,b,G){I(_),G.displayName=b,G.$$owner=_;var re=b.substr(1),ue=_.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),g(ue,b,G),_.$$is_module){_.$$module_function&&p.defs(_,b,G);for(var _e=0,ge=_.$$iclasses,pe=ge.length;_e<pe;_e++){var ye=ge[_e];g(ye,b,G)}}var we=_.$$singleton_of;return _.$method_added&&!_.$method_added.$$stub&&!we?_.$method_added(re):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(re),re},p.defs=function(_,b,G,re){return le(G,re),(_.$$is_string||_.$$is_number)&&N(p.TypeError,"can't define singleton"),p.defn(p.get_singleton_class(_),b,G)};function ve(_,b){if(_.$$is_module)for(var G=0,re=_.$$iclasses,ue=re.length;G<ue;G++){var _e=re[G];delete _e[b]}}p.rdef=function(_,b){K(_.$$prototype,b)||N(p.NameError,"method '"+b.substr(1)+"' not defined in "+_.$name()),delete _.$$prototype[b],ve(_,b),_.$$is_singleton?_.$$prototype.$singleton_method_removed&&!_.$$prototype.$singleton_method_removed.$$stub&&_.$$prototype.$singleton_method_removed(b.substr(1)):_.$method_removed&&!_.$method_removed.$$stub&&_.$method_removed(b.substr(1))},p.udef=function(_,b){(!_.$$prototype[b]||_.$$prototype[b].$$stub)&&N(p.NameError,"method '"+b.substr(1)+"' not defined in "+_.$name()),p.add_stub_for(_.$$prototype,b),ve(_,b),_.$$is_singleton?_.$$prototype.$singleton_method_undefined&&!_.$$prototype.$singleton_method_undefined.$$stub&&_.$$prototype.$singleton_method_undefined(b.substr(1)):_.$method_undefined&&!_.$method_undefined.$$stub&&_.$method_undefined(b.substr(1))};function me(_){return typeof _=="function"&&!_.$$stub}p.alias=function(_,b,G){var re=de(b),ue=de(G),_e,ge;if(typeof _.$$prototype>"u"&&(_=p.Object),_e=_.$$prototype[ue],_.$$eval)return p.alias(p.get_singleton_class(_),b,G);if(!me(_e)){for(var pe=_.$$super;typeof _e!="function"&&pe;)_e=pe[ue],pe=pe.$$super;!me(_e)&&_.$$is_module&&(_e=p.Object.$$prototype[ue]),me(_e)||N(p.NameError,"undefined method `"+G+"' for class `"+_.$name()+"'")}return _e.$$alias_of&&(_e=_e.$$alias_of),ge=p.wrap_method_body(_e),ge.displayName=b,ge.$$alias_of=_e,ge.$$alias_name=b,p.defn(_,re,ge),_},p.wrap_method_body=function(_){var b=function(){var G=b.$$p;return b.$$p=null,p.send(this,_,arguments,G)};try{Object.defineProperty(b,"length",{value:_.length})}catch{}return b.$$arity=_.$$arity==null?_.length:_.$$arity,b.$$parameters=_.$$parameters,b.$$source_location=_.$$source_location,b},p.alias_gvar=function(_,b){return Object.defineProperty(U,_,{configurable:!0,enumerable:!0,get:function(){return U[b]},set:function(G){U[b]=G}}),q},p.alias_native=function(_,b,G){var re=de(b),ue=_.$$prototype[G];return(typeof ue!="function"||ue.$$stub)&&N(p.NameError,"undefined native method `"+G+"' for class `"+_.$name()+"'"),p.defn(_,re,ue),_},p.hash_init=function(_){z.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},p.hash_clone=function(_,b){return b.$$none=_.$$none,b.$$proc=_.$$proc,p.hash_each(_,b,function(G,re){return p.hash_put(b,G,re),[!1,b]})},p.hash_put=function(_,b,G){var re=typeof b;if(re==="string"||re==="symbol"||re==="number"||re==="boolean"||re==="bigint")_.set(b,G);else if(b.$$is_string)_.set(b.valueOf(),G);else{_.$$keys||(_.$$keys=new Map);var ue=b.$$is_string?b.valueOf():_.$$by_identity?p.id(b):b.$hash(),_e=_.$$keys;if(!_e.has(ue)){_e.set(ue,[b]),_.set(b,G);return}for(var ge=_e.get(ue),pe,ye=0;ye<ge.length;ye++)if(pe=ge[ye],b===pe||b["$eql?"](pe)){_.set(pe,G);return}ge.push(b),_.set(b,G)}},p.hash_get=function(_,b){var G=typeof b;if(G==="string"||G==="symbol"||G==="number"||G==="boolean"||G==="bigint")return _.get(b);if(_.$$keys){var re=b.$$is_string?b.valueOf():_.$$by_identity?p.id(b):b.$hash(),ue=_.$$keys.get(re),_e;if(ue!==void 0){for(var ge=0;ge<ue.length;ge++)if(_e=ue[ge],b===_e||b["$eql?"](_e))return _.get(_e)}else if(b.$$is_string)return _.get(re)}else if(b.$$is_string)return _.get(b.valueOf())};function be(_,b){var G=_.get(b);if(G!==void 0)return _.delete(b),G}p.hash_delete=function(_,b){var G=typeof b;if(G==="string"||G==="symbol"||G==="number"||G==="boolean"||G==="bigint")return be(_,b);if(_.$$keys){var re=b.$$is_string?b.valueOf():_.$$by_identity?p.id(b):b.$hash(),ue=_.$$keys.get(re),_e;if(ue!==void 0){for(var ge=0;ge<ue.length;ge++)if(_e=ue[ge],b===_e||b["$eql?"](_e))return ue.splice(ge,1),ue.length===0&&_.$$keys.delete(re),be(_,_e)}else if(b.$$is_string)return be(_,re)}else if(b.$$is_string)return be(_,b.valueOf())},p.hash_rehash=function(_){var b=_.$$keys;return b&&b.clear(),p.hash_each(_,!1,function(G,re){var ue=typeof G;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var _e=G.$$is_string?G.valueOf():_.$$by_identity?p.id(G):G.$hash();if(b||(_.$$keys=b=new Map),!b.has(_e))return b.set(_e,[G]),[!1,!1];for(var ge=b.get(_e),pe=ge.length===1?ge:te(ge),ye,we=0;we<pe.length;we++)ye=pe[we],(G===ye||G["$eql?"](ye))&&(ge.splice(ge.indexOf(ye),1),_.delete(ye));return ge.push(G),[!1,!1]}),_},p.hash=function(){var _=arguments.length,b,G,re,ue,_e,ge;if(_===1&&arguments[0].$$is_hash)return arguments[0];if(G=new Map,_===1)if(b=arguments[0],arguments[0].$$is_array){for(ue=b.length,re=0;re<ue;re++)b[re].length!==2&&N(p.ArgumentError,"value not of length 2: "+b[re].$inspect()),_e=b[re][0],ge=b[re][1],p.hash_put(G,_e,ge);return G}else{b=arguments[0];for(_e in b)K(b,_e)&&(ge=b[_e],p.hash_put(G,_e,ge));return G}for(_%2!==0&&N(p.ArgumentError,"odd number of arguments for Hash"),re=0;re<_;re+=2)_e=arguments[re],ge=arguments[re+1],p.hash_put(G,_e,ge);return G},p.hash2=function(_,b){z.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var G=new Map,re=0,ue=_.length;re<ue;re++)G.set(_[re],b[_[re]]);return G},p.hash_each=function(_,b,G){for(var re,ue=0,_e,ge=Array.from(_.entries()),pe=ge.length;ue<pe;ue++)if(_e=ge[ue],re=G(_e[0],_e[1]),re[0])return re[1];return re?re[1]:b},p.range=function(_,b,G){var re=new p.Range;return re.begin=_,re.end=b,re.excl=G,re};var ie=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];p.ivar=function(_){return ie.indexOf(_)!==-1&&(_+="$"),_};function I(_){_.$$frozen&&N(p.FrozenError,"can't modify frozen "+_.$class()+": "+_,new Map([["receiver",_]]))}p.deny_frozen_access=I,p.freeze=function(_){return g(_,"$$frozen",!0),_.hasOwnProperty("$$id")||g(_,"$$id",B()),_.hasOwnProperty("$$meta")?_.$$meta.$freeze():g(_,"$$meta",null),_.hasOwnProperty("$$comparable")||g(_,"$$comparable",null),Object.seal(_),_};function L(_,b){var G=Object.getOwnPropertyNames(_),re=G.length,ue,_e,ge;for(ue=0;ue<re;ue++)_e=G[ue],_e[0]!=="$"&&(ge=Object.getOwnPropertyDescriptor(_,_e),ge&&ge.enumerable&&b(_e,ge))}p.each_ivar=L,p.freeze_props=function(_){var b={get:null,set:function(G){I(_)},enumerable:!0};L(_,function(G,re){re.writable&&(b.get=se(re.value),Object.defineProperty(_,G,b))})},p.escape_regexp=function(_){return _.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},p.global_regexp=function(_){return _.global?_:(_.$$g==null?_.$$g=new RegExp(_.source,(_.multiline?"gm":"g")+(_.ignoreCase?"i":"")):_.$$g.lastIndex=null,_.$$g)},p.global_multiline_regexp=function(_){var b,G;return _.global&&_.multiline?_:(G="gm"+(_.ignoreCase?"i":""),_.multiline?(_.$$g==null&&(_.$$g=new RegExp(_.source,G)),b=_.$$g):(_.$$gm==null&&(_.$$gm=new RegExp(_.source,G)),b=_.$$gm),b.lastIndex=null,b)},p.regexp=function(_,b){for(var G,re=typeof b<"u"&&b&&b.indexOf("i")>=0,ue=0,_e=_.length;ue<_e;ue++)G=_[ue],G instanceof RegExp&&(G.ignoreCase!==re&&p.Kernel.$warn("ignore case doesn't match for "+G.source.$inspect(),new Map([["uplevel",1]])),G=G.source),G===""&&(G="(?:"+G+")"),_[ue]=G;return b?new RegExp(_.join(""),b):new RegExp(_.join(""))},p.modules={},p.loaded_features=["corelib/runtime"],p.current_dir=".",p.require_table={"corelib/runtime":!0},p.normalize=function(_){var b,G,re=[],ue="/";p.current_dir!=="."&&(_=p.current_dir.replace(/\/*$/,"/")+_),_=_.replace(/^\.\//,""),_=_.replace(/\.(rb|opal|js)$/,""),b=_.split(ue);for(var _e=0,ge=b.length;_e<ge;_e++)G=b[_e],G!==""&&(G===".."?re.pop():re.push(G));return re.join(ue)},p.loaded=function(_){var b,G,re;for(b=0,G=_.length;b<G;b++)re=p.normalize(_[b]),!p.require_table[re]&&(p.loaded_features.push(re),p.require_table[re]=!0)},p.load_normalized=function(_){p.loaded([_]);var b=p.modules[_];if(b){var G=b(p);if(typeof Promise<"u"&&G instanceof Promise)return G.then(se(!0))}else{var re=p.config.missing_require_severity,ue="cannot load such file -- "+_;re==="error"?N(p.LoadError,ue):re==="warning"&&z.warn("WARNING: LoadError: "+ue)}return!0},p.load=function(_){return _=p.normalize(_),p.load_normalized(_)},p.require=function(_){return _=p.normalize(_),p.require_table[_]?!1:p.load_normalized(_)},p.encodings=Object.create(null),p.set_encoding=function(_,b,G){typeof G>"u"&&(G="encoding"),(typeof _=="string"||_.$$frozen===!0)&&N(p.FrozenError,"can't modify frozen String");var re=p.find_encoding(b);return re===_[G]||(_[G]=re),_},p.find_encoding=function(_){var b=p.encodings,G=b[_]||b[_.toUpperCase()];return G||N(p.ArgumentError,"unknown encoding name - "+_),G},p.enc=function(_,b){var G=new String(_);return G=p.set_encoding(G,b),G.internal_encoding=G.encoding,G},p.binary=function(_){var b=new String(_);return p.set_encoding(b,"binary","internal_encoding")},p.last_promise=null,p.promise_unhandled_exception=!1,p.queue=function(_){if(p.last_promise)return p.last_promise=p.last_promise.then(function(){if(!p.promise_unhandled_exception)return _(p)}).catch(function(G){p.respond_to(G,"$full_message")&&(G=G.$full_message()),z.error(G),p.promise_unhandled_exception=!0,p.exit(1)}),p.last_promise;var b=_(p);return typeof Promise=="function"&&typeof b=="object"&&b instanceof Promise&&(p.last_promise=b),b};function V(_,b){return typeof _=="number"&&typeof b=="number"}p.rb_plus=function(_,b){return V(_,b)?_+b:_["$+"](b)},p.rb_minus=function(_,b){return V(_,b)?_-b:_["$-"](b)},p.rb_times=function(_,b){return V(_,b)?_*b:_["$*"](b)},p.rb_divide=function(_,b){return V(_,b)?_/b:_["$/"](b)},p.rb_lt=function(_,b){return V(_,b)?_<b:_["$<"](b)},p.rb_gt=function(_,b){return V(_,b)?_>b:_["$>"](b)},p.rb_le=function(_,b){return V(_,b)?_<=b:_["$<="](b)},p.rb_ge=function(_,b){return V(_,b)?_>=b:_["$>="](b)};function Q(_,b){return typeof _=="number"&&typeof b=="number"||typeof _=="string"&&typeof b=="string"}function ne(_,b){return Q(_,b)?_===b:w(_["$=="](b))}p.eqeq=ne,p.eqeqeq=function(_,b){return Q(_,b)?_===b:w(_["$==="](b))},p.neqeq=function(_,b){return Q(_,b)?_!==b:w(_["$!="](b))},p.not=function(_){return _==null||_===!1||q===_?!0:_===!0||_["$!"].$$pristine?!1:w(_["$!"]())};function se(_){return function(){return _}}p.return_val=se,p.return_self=function(){return this},p.return_ivar=function(_){return function(){return this[_]==null?q:this[_]}},p.assign_ivar=function(_){return function(b){return I(this),this[_]=b}},p.assign_ivar_val=function(_,b){return function(){return I(this),this[_]=b}},p.ensure_kwargs=function(_){if(_==null)return new Map;if(_.$$is_hash)return _;N(p.ArgumentError,"expected kwargs")},p.get_kwarg=function(_,b){var G=p.hash_get(_,b);return G===void 0&&N(p.ArgumentError,"missing keyword: "+b),G},p.large_array_unpack=function(_){var b=_.split(","),G=b.length,re;for(re=0;re<G;re++)switch(b[re][0]){case void 0:b[re]=q;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":b[re]=+b[re]}return b},p.opal32_init=se(1332765036);function oe(_,b){return _<<b|_>>>32-b}p.opal32_add=function(_,b){return _^=b,_=oe(_,1),_},p.BasicObject=D=X("BasicObject",null),p.Object=A=X("Object",p.BasicObject),p.Module=ee=X("Module",p.Object),p.Class=W=X("Class",p.Module),p.Opal=R=a("Opal"),p.Kernel=Z=a("Kernel"),Y(p.BasicObject,p.Class.$$prototype),Y(p.Object,p.Class.$$prototype),Y(p.Module,p.Class.$$prototype),Y(p.Class,p.Class.$$prototype),D.$$const.BasicObject=D,l(A,"BasicObject",D),l(A,"Object",A),l(A,"Module",ee),l(A,"Class",W),l(A,"Opal",R),l(A,"Kernel",Z),D.$$class=W,A.$$class=W,ee.$$class=W,W.$$class=W,R.$$class=ee,Z.$$class=ee,g(A.$$prototype,"toString",function(){var _=this.$to_s();return _.$$is_string&&typeof _=="object"?_.valueOf():_}),g(A.$$prototype,"$require",p.require),p.top=new A,p.top.$to_s=p.top.$inspect=se("main"),p.top.$define_method=fe;function fe(){var _=fe.$$p;return fe.$$p=null,p.send(A,"define_method",arguments,_)}p.NilClass=X("NilClass",p.Object),l(A,"NilClass",p.NilClass),q=p.nil=new p.NilClass,q.$$id=x,q.call=q.apply=function(){N(p.LocalJumpError,"no block given")},q.$$frozen=!0,q.$$comparable=!1,Object.seal(q),p.thrower=function(_){var b={$thrower_type:_,$throw:function(G,re){throw G==null&&(G=q),this.is_orphan&&!re&&N(p.LocalJumpError,"unexpected "+_,G,_.$to_sym()),this.$v=G,this},is_orphan:!1};return b},Object.defineProperty(U,"@",{enumerable:!0,configurable:!0,get:function(){return w(U["!"])?U["!"].$backtrace():q},set:function(_){w(U["!"])?U["!"].$set_backtrace(_):N(p.ArgumentError,"$! not set")}}),p.t_eval_return=p.thrower("return"),TypeError.$$super=Error,p.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(e){var z=e.type_error,q=e.coerce_to,D=e.module,A=e.defs,ee=e.slice,W=e.eqeqeq,R=e.Kernel,Z=e.truthy,p=e.Opal,H=e.nil,$e=e.$$$;return e.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(K){var Y=D(K,"Opal");A(Y,"$bridge",function(x,P){return e.bridge(x,P)}),A(Y,"$coerce_to!",function(x,P,B,U){var N,T,g=H;return N=ee(arguments,3),T=N,g=q(x,P,B,T),W(P,g)||R.$raise(z(x,P,B,g)),g},-4),A(Y,"$coerce_to?",function(x,P,B,U){var N,T,g=H;return N=ee(arguments,3),T=N,!Z(x["$respond_to?"](B))||(g=q(x,P,B,T),Z(g["$nil?"]()))?H:(W(P,g)||R.$raise(z(x,P,B,g)),g)},-4),A(Y,"$try_convert",function(x,P,B){return W(P,x)?x:Z(x["$respond_to?"](B))?x.$__send__(B):H}),A(Y,"$compare",function(x,P){var B=H;return B=x["$<=>"](P),Z(B===H)&&R.$raise($e("ArgumentError"),"comparison of "+x.$class()+" with "+P.$class()+" failed"),B}),A(Y,"$destructure",function(x){if(x.length==1)return x[0];if(x.$$is_array)return x;for(var P=new Array(x.length),B=0,U=P.length;B<U;B++)P[B]=x[B];return P}),A(Y,"$respond_to?",function(x,P,B){return B==null&&(B=!1),x==null||!x.$$class?!1:x["$respond_to?"](P,B)},-3),A(Y,"$instance_variable_name!",function(x){return x=p["$coerce_to!"](x,$e("String"),"to_str"),Z(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(x))||R.$raise($e("NameError").$new("'"+x+"' is not allowed as an instance variable name",x)),x}),A(Y,"$class_variable_name!",function(x){return x=p["$coerce_to!"](x,$e("String"),"to_str"),Z(x.length<3||x.slice(0,2)!=="@@")&&R.$raise($e("NameError").$new("`"+x+"' is not allowed as a class variable name",x)),x}),A(Y,"$const_name?",function(x){return typeof x!="string"&&(x=p["$coerce_to!"](x,$e("String"),"to_str")),x[0]===x[0].toUpperCase()}),A(Y,"$const_name!",function(x){var P=this;return Z($e("::","String","skip_raise")?"constant":H)&&(x=p["$coerce_to!"](x,$e("String"),"to_str")),(!x||x[0]!=x[0].toUpperCase())&&P.$raise($e("NameError"),"wrong constant name "+x),x}),A(Y,"$pristine",function(x,P){var B,U;B=ee(arguments,1),U=B;for(var N,T,g=U.length-1;g>=0;g--)N=U[g],T=x.$$prototype[e.jsid(N)],T&&!T.$$stub&&(T.$$pristine=!0);return H},-2);var te=[];return A(Y,"$inspect",function(x){var P=H,B=!1;return function(){try{try{return x===null?"null":x===void 0?"undefined":typeof x.$$class>"u"?Object.prototype.toString.apply(x):typeof x.$inspect!="function"||x.$inspect.$$stub||te.indexOf(x.$__id__())!==-1?"#<"+x.$$class+":0x"+x.$__id__().$to_s(16)+">":(te.push(x.$__id__()),B=!0,x.$inspect())}catch(U){if(e.rescue(U,[$e("Exception")])){P=U;try{return"#<"+x.$$class+":0x"+x.$__id__().$to_s(16)+">"}finally{e.pop_exception(U)}}else throw U}}finally{B&&te.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(e){var z=e.truthy,q=e.coerce_to,D=e.const_set,A=e.Object,ee=e.return_ivar,W=e.assign_ivar,R=e.ivar,Z=e.deny_frozen_access,p=e.freeze,H=e.prop,$e=e.jsid,K=e.each_ivar,Y=e.klass,te=e.Opal,F=e.Kernel,x=e.defs,P=e.send,B=e.def,U=e.eqeqeq,N=e.Module,T=e.rb_lt,g=e.rb_gt,w=e.slice,j=e.to_a,E=e.return_val,v=e.eqeq,o=e.not,d=e.rb_le,k=e.range,h=e.send2,l=e.find_super,c=e.alias,X=[],y=e.nil,i=e.$$$;return e.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(a,$,n){var t=Y(a,$,"Module"),r=[t].concat(n),s=e.$r(r);function u(C){if(C.$$is_string)return C;var M=te.$try_convert(C,i("String"),"to_str");if(M.$$is_string)return M;M===y?F.$raise(i("TypeError"),""+C+" is not a symbol nor a string"):F.$raise(i("TypeError"),"can't convert "+C.$class()+" to String ("+C.$class()+"#to_str gives "+M.$class())}x(t,"$allocate",function(){var M=this,J=e.allocate_module(y,function(){});return M!==e.Module&&Object.setPrototypeOf(J,M.$$prototype),J}),B(t,"$initialize",function C(){var M=C.$$p||y,J=this;return C.$$p=null,M!==y?P(J,"module_eval",[],M.$to_proc()):y}),B(t,"$===",function(M){var J=this;return z(M==null)?!1:e.is_a(M,J)}),B(t,"$<",function(M){var J=this;U(N,M)||F.$raise(i("TypeError"),"compared with non class/module");var O=J,ae,le,ce;if(O===M)return!1;for(le=0,ae=e.ancestors(J),ce=ae.length;le<ce;le++)if(ae[le]===M)return!0;for(le=0,ae=e.ancestors(M),ce=ae.length;le<ce;le++)if(ae[le]===J)return!1;return y}),B(t,"$<=",function(M){var J=this,O=y;return z(O=J["$equal?"](M))?O:T(J,M)}),B(t,"$>",function(M){var J=this;return U(N,M)||F.$raise(i("TypeError"),"compared with non class/module"),T(M,J)}),B(t,"$>=",function(M){var J=this,O=y;return z(O=J["$equal?"](M))?O:g(J,M)}),B(t,"$<=>",function(M){var J=this,O=y;return J===M?0:!U(N,M)||(O=T(J,M),z(O["$nil?"]()))?y:z(O)?-1:1}),B(t,"$alias_method",function(M,J){var O=this;return Z(O),M=q(M,i("String"),"to_str"),J=q(J,i("String"),"to_str"),e.alias(O,M,J),O}),B(t,"$alias_native",function(M,J){var O=this;return J==null&&(J=M),Z(O),e.alias_native(O,M,J),O},-2),B(t,"$ancestors",function(){var M=this;return e.ancestors(M)}),B(t,"$append_features",function(M){var J=this;return Z(M),e.append_features(J,M),J}),B(t,"$attr_accessor",function(M){var J,O,ae=this;return J=w(arguments),O=J,P(ae,"attr_reader",j(O)),P(ae,"attr_writer",j(O))},-1),B(t,"$attr",function(M){var J,O,ae=this;return J=w(arguments),O=J,O.length==2&&(O[1]===!0||O[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),O[1]?ae.$attr_accessor(O[0]):ae.$attr_reader(O[0]),y):P(ae,"attr_reader",j(O))},-1),B(t,"$attr_reader",function(M){var J,O,ae=this;J=w(arguments),O=J,Z(ae);for(var le=ae.$$prototype,ce=O.length-1;ce>=0;ce--){var de=O[ce],he=$e(de),ve=R(de),me=ee(ve);e.prop(le,ve,y),me.$$parameters=[],me.$$arity=0,e.defn(ae,he,me)}return y},-1),B(t,"$attr_writer",function(M){var J,O,ae=this;J=w(arguments),O=J,Z(ae);for(var le=ae.$$prototype,ce=O.length-1;ce>=0;ce--){var de=O[ce],he=$e(de+"="),ve=R(de),me=W(ve);me.$$parameters=[["req"]],me.$$arity=1,e.prop(le,ve,y),e.defn(ae,he,me)}return y},-1),B(t,"$autoload",function(M,J){var O=this;return Z(O),s("Opal")["$const_name?"](M)||F.$raise(i("NameError"),"autoload must be constant name: "+M),J==""&&F.$raise(i("ArgumentError"),"empty file name"),O.$$const.hasOwnProperty(M)||(O.$$autoload||(O.$$autoload={}),e.const_cache_version++,O.$$autoload[M]={path:J,loaded:!1,required:!1,success:!1,exception:!1},O.$const_added&&!O.$const_added.$$pristine&&O.$const_added(M)),y}),B(t,"$autoload?",function(M){var J=this;if(J.$$autoload&&J.$$autoload[M]&&!J.$$autoload[M].required&&!J.$$autoload[M].success)return J.$$autoload[M].path;for(var O=J.$ancestors(),ae=0,le=O.length;ae<le;ae++)if(O[ae].$$autoload&&O[ae].$$autoload[M]&&!O[ae].$$autoload[M].required&&!O[ae].$$autoload[M].success)return O[ae].$$autoload[M].path;return y}),B(t,"$class_variables",function(){var M=this;return Object.keys(e.class_variables(M))}),B(t,"$class_variable_get",function(M){var J=this;return M=te["$class_variable_name!"](M),e.class_variable_get(J,M,!1)}),B(t,"$class_variable_set",function(M,J){var O=this;return Z(O),M=te["$class_variable_name!"](M),e.class_variable_set(O,M,J)}),B(t,"$class_variable_defined?",function(M){var J=this;return M=te["$class_variable_name!"](M),e.class_variables(J).hasOwnProperty(M)}),B(t,"$const_added",E(y)),te.$pristine(t,"const_added"),B(t,"$remove_class_variable",function(M){var J=this;if(Z(J),M=te["$class_variable_name!"](M),e.hasOwnProperty.call(J.$$cvars,M)){var O=J.$$cvars[M];return delete J.$$cvars[M],O}else F.$raise(i("NameError"),"cannot remove "+M+" for "+J)}),B(t,"$constants",function(M){var J=this;return M==null&&(M=!0),e.constants(J,M)},-1),x(t,"$constants",function(M){var J=this;if(M==null){var O=(J.$$nesting||[]).concat(A),ae,le={},ce,de;for(ce=0,de=O.length;ce<de;ce++)for(ae in O[ce].$$const)le[ae]=!0;return Object.keys(le)}else return e.constants(J,M)},-1),x(t,"$nesting",function(){var M=this;return M.$$nesting||[]}),B(t,"$const_defined?",function(M,J){var O=this;J==null&&(J=!0),M=s("Opal")["$const_name!"](M),z(M["$=~"](i(te,"CONST_NAME_REGEXP")))||F.$raise(i("NameError").$new("wrong constant name "+M,M));var ae,le=[O],ce,de;for(J&&(le=le.concat(e.ancestors(O)),O.$$is_module&&(le=le.concat([A]).concat(e.ancestors(A)))),ce=0,de=le.length;ce<de;ce++)if(ae=le[ce],ae.$$const[M]!=null||ae.$$autoload&&ae.$$autoload[M]&&!ae.$$autoload[M].required&&!ae.$$autoload[M].success)return!0;return!1},-2),B(t,"$const_get",function(M,J){var O=this;return J==null&&(J=!0),M=s("Opal")["$const_name!"](M),M.indexOf("::")===0&&M!=="::"&&(M=M.slice(2)),z(M.indexOf("::")!=-1&&M!="::")?P(M.$split("::"),"inject",[O],function(le,ce){return le==null&&(le=y),ce==null&&(ce=y),le.$const_get(ce)}):(z(M["$=~"](i(te,"CONST_NAME_REGEXP")))||F.$raise(i("NameError").$new("wrong constant name "+M,M)),J?e.$$([O],M):e.const_get_local(O,M))},-2),B(t,"$const_missing",function(M){var J=this,O=y;return O=v(J,A)?M:""+J+"::"+M,F.$raise(i("NameError").$new("uninitialized constant "+O,M))}),B(t,"$const_set",function(M,J){var O=this;return Z(O),M=te["$const_name!"](M),(z(M["$!~"](i(te,"CONST_NAME_REGEXP")))||z(M["$start_with?"]("::")))&&F.$raise(i("NameError").$new("wrong constant name "+M,M)),D(O,M,J),J}),B(t,"$public_constant",E(y)),B(t,"$define_method",function C(M,J){var O=C.$$p||y,ae=this,le=y,ce=y,de=y;return C.$$p=null,Z(ae),J===void 0&&O===y&&F.$raise(i("ArgumentError"),"tried to create a Proc object without a block"),M=u(M),z(J!==void 0)&&(O=U(i("Proc"),le=J)?J:U(i("Method"),le)?J.$to_proc().$$unbound:U(i("UnboundMethod"),le)?e.wrap_method_body(J.$$method):F.$raise(i("TypeError"),"wrong argument type "+J.$class()+" (expected Proc/Method/UnboundMethod)"),z(!J.$$is_proc)&&(ce=J.$owner(),z(ce.$$is_class)&&o(d(ae,ce))&&(de=z(ce.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+ce,F.$raise(i("TypeError"),de)))),typeof Proxy<"u"&&(O.$$proxy_target=O,O=new Proxy(O,{apply:function(he,ve,me){var be=he.$$jsid,ie=he.$$is_lambda;he.$$jsid=M,he.$$is_lambda=!0;try{return he.apply(ve,me)}catch(I){if(I===he.$$brk||I===he.$$ret)return I.$v;throw I}finally{he.$$jsid=be,he.$$is_lambda=ie}}})),O.$$jsid=M,O.$$s=null,O.$$def=O,O.$$define_meth=!0,e.defn(ae,$e(M),O)},-2),B(t,"$freeze",function(){var M=this;return z(M["$frozen?"]())?M:(M.hasOwnProperty("$$base_module")||H(M,"$$base_module",null),p(M))}),B(t,"$remove_method",function(M){var J,O,ae=this;J=w(arguments),O=J;for(var le=0;le<O.length;le++){var ce=u(O[le]);Z(ae),e.rdef(ae,"$"+ce)}return ae},-1),B(t,"$singleton_class?",function(){var M=this;return!!M.$$is_singleton}),B(t,"$include",function(M){var J,O,ae=this;J=w(arguments),O=J;for(var le=O.length-1;le>=0;le--){var ce=O[le];ce.$$is_module||F.$raise(i("TypeError"),"wrong argument type "+ce.$class()+" (expected Module)"),ce.$append_features(ae),ce.$included(ae)}return ae},-1),B(t,"$included_modules",function(){var M=this;return e.included_modules(M)}),B(t,"$include?",function(M){var J=this;M.$$is_module||F.$raise(i("TypeError"),"wrong argument type "+M.$class()+" (expected Module)");var O,ae,le,ce=e.ancestors(J);for(O=0,ae=ce.length;O<ae;O++)if(le=ce[O],le===M&&le!==J)return!0;return!1}),B(t,"$instance_method",function(M){var J=this,O=J.$$prototype[$e(M)];return(!O||O.$$stub)&&F.$raise(i("NameError").$new("undefined method `"+M+"' for class `"+J.$name()+"'",M)),i("UnboundMethod").$new(J,O.$$owner||J,O,M)}),B(t,"$instance_methods",function(M){var J=this;return M==null&&(M=!0),z(M)?e.instance_methods(J):e.own_instance_methods(J)},-1),B(t,"$included",E(y)),B(t,"$extended",E(y)),B(t,"$extend_object",function(M){return Z(M),y}),B(t,"$method_added",function(M){return w(arguments),y},-1),B(t,"$method_removed",function(M){return w(arguments),y},-1),B(t,"$method_undefined",function(M){return w(arguments),y},-1),B(t,"$module_eval",function C(M){var J=C.$$p||y,O,ae,le,ce=this,de=y,he=y,ve=y,me=y,be=y,ie=y;C.$$p=null,O=w(arguments),ae=O,z(J["$nil?"]())&&z(!!e.compile)?(z(k(1,3,!1)["$cover?"](ae.$size()))||F.$raise(i("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(j(ae)),de=le[0]==null?y:le[0],he=le[1]==null?y:le[1],le[2]==null||le[2],ve=new Map([["file",z(me=he)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),ie=te.$compile(de,be),J=P(F,"proc",[],function V(){var Q=V.$$s==null?this:V.$$s;return new Function("Opal,self","return "+ie)(e,Q)},{$$s:ce})):z(ae["$any?"]())&&F.$raise(i("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var I=J.$$s,L;return J.$$s=null,L=J.apply(ce,[ce]),J.$$s=I,L},-1),B(t,"$module_exec",function C(M){var J=C.$$p||y,O,ae,le=this;C.$$p=null,O=w(arguments),ae=O,J===y&&F.$raise(i("LocalJumpError"),"no block given");var ce=J.$$s,de;return J.$$s=null,de=J.apply(le,ae),J.$$s=ce,de},-1),B(t,"$method_defined?",function(M){var J=this,O=J.$$prototype[$e(M)];return!!O&&!O.$$stub}),B(t,"$module_function",function(M){var J,O,ae=this;if(J=w(arguments),O=J,Z(ae),O.length===0)return ae.$$module_function=!0,y;for(var le=0,ce=O.length;le<ce;le++){var de=O[le],he=$e(de),ve=ae.$$prototype[he];e.defs(ae,he,ve)}return O.length===1?O[0]:O},-1),B(t,"$name",function(){var M=this;if(M.$$full_name)return M.$$full_name;for(var J=[],O=M;O;){if(O.$$name===y||O.$$name==null)return y;if(J.unshift(O.$$name),O=O.$$base_module,O===A)break}return J.length===0?y:M.$$full_name=J.join("::")}),B(t,"$prepend",function(M){var J,O,ae=this;J=w(arguments),O=J,O.length===0&&F.$raise(i("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=O.length-1;le>=0;le--){var ce=O[le];ce.$$is_module||F.$raise(i("TypeError"),"wrong argument type "+ce.$class()+" (expected Module)"),ce.$prepend_features(ae),ce.$prepended(ae)}return ae},-1),B(t,"$prepend_features",function(M){var J=this;return Z(M),J.$$is_module||F.$raise(i("TypeError"),"wrong argument type "+J.$class()+" (expected Module)"),e.prepend_features(J,M),J}),B(t,"$prepended",E(y)),B(t,"$remove_const",function(M){var J=this;return Z(J),e.const_remove(J,M)}),B(t,"$to_s",function(){var M=this,J=y;return z(J=e.Module.$name.call(M))?J:"#<"+(M.$$is_module?"Module":"Class")+":0x"+M.$__id__().$to_s(16)+">"}),B(t,"$undef_method",function(M){var J,O,ae=this;J=w(arguments),O=J;for(var le=0;le<O.length;le++){var ce=u(O[le]);Z(ae),e.udef(ae,"$"+ce)}return ae},-1),B(t,"$instance_variables",function(){var M=this,J=y;J=(e.Module.$$nesting=r,M.$constants());var O=[];return K(M,function(ae){ae!=="constructor"&&!J["$include?"](ae)&&O.push("@"+ae)}),O});function f(C,M){var J,O=e.own_instance_methods(C);for(J=0;J<O.length;J++){var ae=O[J],le=$e(ae),ce=C.$$prototype[le],de=e.wrap_method_body(ce);de.$$jsid=ae,e.defn(M,le,de)}}function m(C,M){for(var J=C.$$own_included_modules,O=J.length-1;O>=0;O--)e.append_features(J[O],M)}function S(C,M){for(var J=C.$$own_prepended_modules,O=J.length-1;O>=0;O--)e.prepend_features(J[O],M)}return B(t,"$initialize_copy",function(M){var J=this;return f(M,J),m(M,J),S(M,J),J.$$cloned_from=M.$$cloned_from.concat(M),J.$copy_class_variables(M),J.$copy_constants(M)}),B(t,"$initialize_dup",function C(M){var J=C.$$p||y,O=this;return C.$$p=null,h(O,l(O,"initialize_dup",C,!1,!0),"initialize_dup",[M],J),O.$copy_singleton_methods(M)}),B(t,"$copy_class_variables",function(M){var J=this;for(var O in M.$$cvars)J.$$cvars[O]=M.$$cvars[O]}),B(t,"$copy_constants",function(M){var J=this,O,ae=M.$$const;for(O in ae)D(J,O,ae[O])}),B(t,"$refine",function C(M){var J=C.$$p||y,O,ae=this,le=y,ce=y,de=y;return C.$$p=null,O=[ae,y,y],le=O[0],ce=O[1],de=O[2],de=e.id(M),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?ce=ae.$$refine_modules[de]=i("Refinement").$new():ce=ae.$$refine_modules[de],ce.refinement_module=le,ce.refined_class=M,P(ce,"class_exec",[],J.$to_proc()),ce}),B(t,"$refinements",function(){var M=this,J=M.$$refine_modules,O=new Map;if(typeof J>"u")return O;for(var ae in J)O["$[]="](J[ae].refined_class,J[ae]);return O}),B(t,"$using",function(M){return F.$raise("Module#using is not permitted in methods")}),c(t,"class_eval","module_eval"),c(t,"class_exec","module_exec"),c(t,"inspect","to_s")}("::",null,X),function(a,$){var n=Y(a,$,"Refinement"),t=n.$$prototype;return t.refinement_module=t.refined_class=y,n.$attr_reader("refined_class"),B(n,"$inspect",function r(){var s=r.$$p||y,u=this;return r.$$p=null,z(u.refinement_module)?"#<refinement:"+u.refined_class.$inspect()+"@"+u.refinement_module.$inspect()+">":h(u,l(u,"inspect",r,!1,!0),"inspect",[],s)})}("::",N)};Opal.modules["corelib/class"]=function(e){var z=e.klass,q=e.send,D=e.defs,A=e.def,ee=e.ensure_kwargs,W=e.hash_get,R=e.eqeq,Z=e.truthy,p=e.rb_plus,H=e.return_val,$e=e.slice,K=e.send2,Y=e.find_super,te=e.Kernel,F=e.alias,x=e.top,P=[],B=e.nil,U=e.$$$;return e.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),x.$require("corelib/module"),function(N,T,g){var w=z(N,T,"Class"),j=[w].concat(g),E=e.$r(j);return D(w,"$new",function v(o){var d=v.$$p||B;if(v.$$p=null,o==null&&(o=E("Object")),!o.$$is_class)throw e.TypeError.$new("superclass must be a Class");var k=e.allocate_class(B,o);return o.$inherited(k),d!==B&&q(k,"class_eval",[],d.$to_proc()),k},-1),A(w,"$allocate",function(){var o=this,d=new o.$$constructor;return d.$$id=e.uid(),d}),A(w,"$clone",function(o){var d,k=this,h=B;return o=ee(o),d=W(o,"freeze"),d==null&&(d=B),Z(d["$nil?"]())||R(d,!0)||R(d,!1)||k.$raise(E("ArgumentError"),"unexpected value for freeze: "+d.$class()),h=e.allocate_class(B,k.$$super),h.$copy_instance_variables(k),h.$copy_singleton_methods(k),h.$initialize_clone(k,new Map([["freeze",d]])),(R(d,!0)||Z(d["$nil?"]())&&Z(k["$frozen?"]()))&&h.$freeze(),h},-1),A(w,"$dup",function(){var o=this,d=B;return d=e.allocate_class(B,o.$$super),d.$copy_instance_variables(o),d.$initialize_dup(o),d}),A(w,"$descendants",function(){var o=this;return p(o.$subclasses(),q(o.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),A(w,"$inherited",H(B)),A(w,"$new",function v(o){var d=v.$$p||B,k,h,l=this;v.$$p=null,k=$e(arguments),h=k;var c=l.$allocate();return e.send(c,c.$initialize,h,d),c},-1),A(w,"$subclasses",function(){var o=this;if(typeof WeakRef<"u"){var d,k,h=[];for(d=0;d<o.$$subclasses.length;d++)k=o.$$subclasses[d].deref(),k!==void 0&&h.push(k);return h}else return o.$$subclasses}),A(w,"$superclass",function(){var o=this;return o.$$super||B}),A(w,"$to_s",function v(){v.$$p;var o=this;v.$$p=null;var d=o.$$singleton_of;return d&&d.$$is_a_module?"#<Class:"+d.$name()+">":d?"#<Class:#<"+d.$$class.$name()+":0x"+e.id(d).$to_s(16)+">>":K(o,Y(o,"to_s",v,!1,!0),"to_s",[],null)}),A(w,"$attached_object",function(){var o=this;if(o.$$singleton_of!=null)return o.$$singleton_of;te.$raise(U("TypeError"),"`"+o+"' is not a singleton class")}),F(w,"inspect","to_s")}("::",null,P)};Opal.modules["corelib/basic_object"]=function(e){var z=e.klass,q=e.slice,D=e.def,A=e.alias,ee=e.return_val,W=e.Opal,R=e.truthy,Z=e.range,p=e.Kernel,H=e.to_a,$e=e.send,K=e.eqeq,Y=e.rb_ge,te=e.nil,F=e.$$$;return e.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(x,P){var B=z(x,P,"BasicObject");return D(B,"$initialize",function(N){return q(arguments),te},-1),D(B,"$==",function(N){var T=this;return T===N}),D(B,"$eql?",function(N){var T=this;return T["$=="](N)}),A(B,"equal?","=="),D(B,"$__id__",function(){var N=this;return N.$$id!=null||e.prop(N,"$$id",e.uid()),N.$$id}),D(B,"$__send__",function U(N,T){var g=U.$$p||te,w,j,E=this;U.$$p=null,w=q(arguments,1),j=w,N.$$is_string||E.$raise(F("TypeError"),""+E.$inspect()+" is not a symbol nor a string");var v=E[e.jsid(N)];return v?(g!==te&&(v.$$p=g),v.apply(E,j)):(g!==te&&(E.$method_missing.$$p=g),E.$method_missing.apply(E,[N].concat(j)))},-2),D(B,"$!",ee(!1)),W.$pristine("!"),D(B,"$!=",function(N){var T=this;return T["$=="](N)["$!"]()}),D(B,"$instance_eval",function U(N){var T=U.$$p||te,g,w,j,E=this,v=te,o=te,d=te,k=te,h=te,l=te;if(U.$$p=null,g=q(arguments),w=g,R(T["$nil?"]())&&R(!!e.compile))R(Z(1,3,!1)["$cover?"](w.$size()))||p.$raise(F("ArgumentError"),"wrong number of arguments (0 for 1..3)"),j=[].concat(H(w)),v=j[0]==null?te:j[0],o=j[1]==null?te:j[1],j[2]==null||j[2],d=new Map([["file",R(k=o)?k:"(eval)"],["eval",!0]]),h=new Map([["arity_check",!1]]).$merge(d),l=W.$compile(v,h),T=$e(p,"proc",[],function y(){var i=y.$$s==null?this:y.$$s;return new Function("Opal,self","return "+l)(e,i)},{$$s:E});else{if(R(T["$nil?"]())&&R(Y(w.$length(),1))&&K(w.$first()["$[]"](0),"@"))return E.$instance_variable_get(w.$first());R(w["$any?"]())&&p.$raise(F("ArgumentError"),"wrong number of arguments ("+w.$size()+" for 0)")}var c=T.$$s,X;if(T.$$s=null,E.$$is_a_module){E.$$eval=!0;try{X=T.call(E,E)}finally{E.$$eval=!1}}else X=T.call(E,E);return T.$$s=c,X},-1),D(B,"$instance_exec",function U(N){var T=U.$$p||te,g,w,j=this;U.$$p=null,g=q(arguments),w=g,R(T)||p.$raise(F("ArgumentError"),"no block given");var E=T.$$s,v;if(T.$$s=null,j.$$is_a_module){j.$$eval=!0;try{v=T.apply(j,w)}finally{j.$$eval=!1}}else v=T.apply(j,w);return T.$$s=E,v},-1),D(B,"$singleton_method_added",function(N){return q(arguments),te},-1),D(B,"$singleton_method_removed",function(N){return q(arguments),te},-1),D(B,"$singleton_method_undefined",function(N){return q(arguments),te},-1),D(B,"$method_missing",function U(N,T){U.$$p;var g,w,j=this,E=te;return U.$$p=null,g=q(arguments,1),w=g,E=W.$inspect(j),p.$raise(F("NoMethodError").$new("undefined method `"+N+"' for "+E,N,w),te,p.$caller(1))},-2),W.$pristine(B,"method_missing"),D(B,"$respond_to_missing?",function(N,T){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(e){var z=e.truthy,q=e.coerce_to,D=e.respond_to,A=e.Opal,ee=e.deny_frozen_access,W=e.freeze,R=e.freeze_props,Z=e.jsid,p=e.each_ivar,H=e.module,$e=e.return_val,K=e.def,Y=e.Kernel,te=e.gvars,F=e.slice,x=e.send,P=e.to_a,B=e.ensure_kwargs,U=e.hash_get,N=e.eqeq,T=e.rb_plus,g=e.extract_kwargs,w=e.eqeqeq,j=e.return_self,E=e.rb_le,v=e.rb_lt,o=e.Object,d=e.alias,k=e.klass,h=[],l=e.nil,c=e.$$$;return e.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(X,y){var i=H(X,"Kernel"),a=[i].concat(y),$=e.$r(a);K(i,"$=~",$e(!1)),K(i,"$!~",function(r){var s=this;return s["$=~"](r)["$!"]()}),K(i,"$===",function(r){var s=this,u=l;return z(u=s.$object_id()["$=="](r.$object_id()))?u:s["$=="](r)}),K(i,"$<=>",function(r){var s=this;s.$$comparable=!0;var u=s["$=="](r);return u&&u!==l?0:l}),K(i,"$method",function(r){var s=this,u=s[Z(r)];return(!u||u.$$stub)&&Y.$raise(c("NameError").$new("undefined method `"+r+"' for class `"+s.$class()+"'",r)),c("Method").$new(s,u.$$owner||s.$class(),u,r)}),K(i,"$methods",function(r){var s=this;return r==null&&(r=!0),z(r)?e.methods(s):e.own_methods(s)},-1),K(i,"$public_methods",function(r){var s=this;return r==null&&(r=!0),z(r)?e.methods(s):e.receiver_methods(s)},-1),K(i,"$Array",function(r){var s;return r===l?[]:r.$$is_array?r:(s=A["$coerce_to?"](r,c("Array"),"to_ary"),s!==l||(s=A["$coerce_to?"](r,c("Array"),"to_a"),s!==l)?s:[r])}),K(i,"$at_exit",function t(){var r=t.$$p||l,s=l;return te.__at_exit__==null&&(te.__at_exit__=l),t.$$p=null,te.__at_exit__=z(s=te.__at_exit__)?s:[],te.__at_exit__["$<<"](r),r}),K(i,"$caller",function(r,s){r==null&&(r=1),s==null&&(s=l);var u,f;u=new Error().$backtrace(),f=[];for(var m=r+1,S=u.length;m<S;m++)u[m].match(/runtime\.js/)||f.push(u[m]);return s!=l&&(f=f.slice(0,s)),f},-1),K(i,"$caller_locations",function(r){var s,u,f=this;return s=F(arguments),u=s,x(x(f,"caller",P(u)),"map",[],function(S){return S==null&&(S=l),c(c(c("Thread"),"Backtrace"),"Location").$new(S)})},-1),K(i,"$class",function(){var r=this;return r.$$class}),K(i,"$copy_instance_variables",function(r){var s=this,u=Object.keys(r),f,m,S;for(f=0,m=u.length;f<m;f++)S=u[f],S.charAt(0)!=="$"&&r.hasOwnProperty(S)&&(s[S]=r[S])}),K(i,"$copy_singleton_methods",function(r){var s=this,u,f,m,S;if(r.hasOwnProperty("$$meta")&&r.$$meta!==null){var C=e.get_singleton_class(r),M=e.get_singleton_class(s);for(m=Object.getOwnPropertyNames(C.$$prototype),u=0,S=m.length;u<S;u++)f=m[u],e.is_method(f)&&(M.$$prototype[f]=C.$$prototype[f]);M.$$const=Object.assign({},C.$$const),Object.setPrototypeOf(M.$$prototype,Object.getPrototypeOf(C.$$prototype))}for(u=0,m=Object.getOwnPropertyNames(r),S=m.length;u<S;u++)f=m[u],f.charAt(0)==="$"&&f.charAt(1)!=="$"&&r.hasOwnProperty(f)&&(s[f]=r[f])}),K(i,"$clone",function(r){var s,u=this,f=l;return r=B(r),s=U(r,"freeze"),s==null&&(s=l),z(s["$nil?"]())||N(s,!0)||N(s,!1)||u.$raise($("ArgumentError"),"unexpected value for freeze: "+s.$class()),f=u.$class().$allocate(),f.$copy_instance_variables(u),f.$copy_singleton_methods(u),f.$initialize_clone(u,new Map([["freeze",s]])),(N(s,!0)||z(s["$nil?"]())&&z(u["$frozen?"]()))&&f.$freeze(),f},-1),K(i,"$initialize_clone",function(r,s){var u=this;return s=B(s),U(s,"freeze"),u.$initialize_copy(r),u},-2),K(i,"$define_singleton_method",function t(r,s){var u=t.$$p||l,f=this;return t.$$p=null,x(f.$singleton_class(),"define_method",[r,s],u.$to_proc())},-2),K(i,"$dup",function(){var r=this,s=l;return s=r.$class().$allocate(),s.$copy_instance_variables(r),s.$initialize_dup(r),s}),K(i,"$initialize_dup",function(r){var s=this;return s.$initialize_copy(r)}),K(i,"$enum_for",function t(r,s){var u=t.$$p||l,f,m,S,C=this;return t.$$p=null,f=F(arguments),f.length>0&&(m=f.shift()),m==null&&(m="each"),S=f,x(c("Enumerator"),"for",[C,m].concat(P(S)),u.$to_proc())},-1),K(i,"$equal?",function(r){var s=this;return s===r}),K(i,"$exit",function(r){var s=l,u=l;for(te.__at_exit__==null&&(te.__at_exit__=l),r==null&&(r=!0),te.__at_exit__=z(s=te.__at_exit__)?s:[];!z(te.__at_exit__["$empty?"]());)u=te.__at_exit__.$pop(),u.$call();return r.$$is_boolean?r=r?0:1:r=q(r,c("Integer"),"to_int"),e.exit(r),l},-1),K(i,"$extend",function(r){var s,u,f=this;s=F(arguments),u=s,u.length==0&&f.$raise(c("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),ee(f);for(var m=f.$singleton_class(),S=u.length-1;S>=0;S--){var C=u[S];C.$$is_module||Y.$raise(c("TypeError"),"wrong argument type "+C.$class()+" (expected Module)"),C.$append_features(m),C.$extend_object(f),C.$extended(f)}return f},-1),K(i,"$freeze",function(){var r=this;return z(r["$frozen?"]())?r:typeof r=="object"?(R(r),W(r)):r}),K(i,"$frozen?",function(){var r=this;switch(typeof r){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return r.$$frozen||!1;default:return!1}}),K(i,"$gets",function(r){var s,u;return te.stdin==null&&(te.stdin=l),s=F(arguments),u=s,x(te.stdin,"gets",P(u))},-1),K(i,"$hash",function(){var r=this;return r.$__id__()}),K(i,"$initialize_copy",$e(l));var n=[];return K(i,"$inspect",function(){var r=this,s=l,u=l,f=l,m=l;return function(){try{try{return s="",u=r.$__id__(),z(n["$include?"](u))?s=" ...":(n["$<<"](u),f=!0,x(r.$instance_variables(),"each",[],function S(C){var M=S.$$s==null?this:S.$$s,J=l,O=l;return C==null&&(C=l),J=M.$instance_variable_get(C),O=$("Opal").$inspect(J),s=T(s," "+C+"="+O)},{$$s:r})),"#<"+r.$class()+":0x"+u.$to_s(16)+s+">"}catch(S){if(e.rescue(S,[$("StandardError")])){m=S;try{return"#<"+r.$class()+":0x"+u.$to_s(16)+">"}finally{e.pop_exception(S)}}else throw S}}finally{z(f)&&n.$pop()}}()}),K(i,"$instance_of?",function(r){var s=this;return!r.$$is_class&&!r.$$is_module&&Y.$raise(c("TypeError"),"class or module required"),s.$$class===r}),K(i,"$instance_variable_defined?",function(r){var s=this;return r=A["$instance_variable_name!"](r),e.hasOwnProperty.call(s,r.substr(1))}),K(i,"$instance_variable_get",function(r){var s=this;r=A["$instance_variable_name!"](r);var u=s[e.ivar(r.substr(1))];return u??l}),K(i,"$instance_variable_set",function(r,s){var u=this;return ee(u),r=A["$instance_variable_name!"](r),u[e.ivar(r.substr(1))]=s}),K(i,"$remove_instance_variable",function(r){var s=this;r=A["$instance_variable_name!"](r);var u=e.ivar(r.substr(1)),f;return s.hasOwnProperty(u)?(f=s[u],delete s[u],f):Y.$raise(c("NameError"),"instance variable "+r+" not defined")}),K(i,"$instance_variables",function(){var r=this,s=[];return p(r,function(u){u.substr(-1)==="$"&&(u=u.slice(0,u.length-1)),s.push("@"+u)}),s}),K(i,"$Integer",function(r,s,u){var f,m,S,C;f=F(arguments,1),m=g(f),m=B(m),f.length>0&&(S=f.shift()),C=U(m,"exception"),C==null&&(C=!0);var M,J,O;if(C=z(C),!r.$$is_string){if(S!==void 0)if(C)Y.$raise(c("ArgumentError"),"base specified for non string value");else return l;if(r===l)if(C)Y.$raise(c("TypeError"),"can't convert nil into Integer");else return l;if(r.$$is_number){if(r===1/0||r===-1/0||isNaN(r))if(C)Y.$raise(c("FloatDomainError"),r);else return l;return Math.floor(r)}if(r["$respond_to?"]("to_int")&&(M=r.$to_int(),e.is_a(M,c("Integer")))||r["$respond_to?"]("to_i")&&(M=r.$to_i(),e.is_a(M,c("Integer"))))return M;if(C)Y.$raise(c("TypeError"),"can't convert "+r.$class()+" into Integer");else return l}if(r==="0")return 0;if(S===void 0)S=0;else if(S=q(S,c("Integer"),"to_int"),S===1||S<0||S>36)if(C)Y.$raise(c("ArgumentError"),"invalid radix "+S);else return l;if(J=r.toLowerCase(),J=J.replace(/(\d)_(?=\d)/g,"$1"),J=J.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,le,ce){switch(ce){case"0b":if(S===0||S===2)return S=2,le;case"0":case"0o":if(S===0||S===8)return S=8,le;case"0d":if(S===0||S===10)return S=10,le;case"0x":if(S===0||S===16)return S=16,le}if(C)Y.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return l}),S=S===0?10:S,O="0-"+(S<=10?S-1:"9a-"+String.fromCharCode(97+(S-11))),!new RegExp("^\\s*[+-]?["+O+"]+\\s*$").test(J))if(C)Y.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return l;if(M=parseInt(J,S),isNaN(M))if(C)Y.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return l;return M},-2),K(i,"$Float",function(r,s){var u;s=B(s),u=U(s,"exception"),u==null&&(u=!0);var f;if(u=z(u),r===l)if(u)Y.$raise(c("TypeError"),"can't convert nil into Float");else return l;if(r.$$is_string){if(f=r.toString(),f=f.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(f))return Y.$Integer(f);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(f))if(u)Y.$raise(c("ArgumentError"),'invalid value for Float(): "'+r+'"');else return l;return parseFloat(f)}return u?A["$coerce_to!"](r,c("Float"),"to_f"):q(r,c("Float"),"to_f")},-2),K(i,"$Hash",function(r){return z(r["$nil?"]())||N(r,[])?new Map:w(c("Hash"),r)?r:A["$coerce_to!"](r,c("Hash"),"to_hash")}),K(i,"$is_a?",function(r){var s=this;return!r.$$is_class&&!r.$$is_module&&Y.$raise(c("TypeError"),"class or module required"),e.is_a(s,r)}),K(i,"$itself",j),K(i,"$lambda",function t(){var r=t.$$p||l;return t.$$p=null,e.lambda(r)}),K(i,"$load",function(r){return r=A["$coerce_to!"](r,c("String"),"to_str"),e.load(r)}),K(i,"$loop",function t(){var r=t.$$p||l,s=this,u=l;if(t.$$p=null,r===l)return x(s,"enum_for",["loop"],function(){return c(c("Float"),"INFINITY")});for(;z(!0);)try{e.yieldX(r,[])}catch(f){if(e.rescue(f,[c("StopIteration")])){u=f;try{return u.$result()}finally{e.pop_exception(f)}}else throw f}return s}),K(i,"$nil?",$e(!1)),K(i,"$printf",function(r){var s,u,f=this,m=l;return te.stdout==null&&(te.stdout=l),s=F(arguments),u=s,z(u["$empty?"]())||(m=z(u[0].$$is_string)?te.stdout:u.$shift(),m.$write(x(f,"format",P(u)))),l},-1),K(i,"$proc",function t(){var r=t.$$p||l;return t.$$p=null,z(r)||Y.$raise(c("ArgumentError"),"tried to create Proc object without a block"),r.$$is_lambda=!1,r}),K(i,"$puts",function(r){var s,u;return te.stdout==null&&(te.stdout=l),s=F(arguments),u=s,x(te.stdout,"puts",P(u))},-1),K(i,"$p",function(r){var s,u;return s=F(arguments),u=s,x(u,"each",[],function(m){return te.stdout==null&&(te.stdout=l),m==null&&(m=l),te.stdout.$puts(m.$inspect())}),z(E(u.$length(),1))?u["$[]"](0):u},-1),K(i,"$print",function(r){var s,u;return te.stdout==null&&(te.stdout=l),s=F(arguments),u=s,x(te.stdout,"print",P(u))},-1),K(i,"$readline",function(r){var s,u;return te.stdin==null&&(te.stdin=l),s=F(arguments),u=s,x(te.stdin,"readline",P(u))},-1),K(i,"$warn",function(r,s){var u,f,m,S,C,M,J=this,O=l;return te.VERBOSE==null&&(te.VERBOSE=l),te.stderr==null&&(te.stderr=l),u=F(arguments),f=g(u),f=B(f),m=u,S=U(f,"uplevel"),S==null&&(S=l),z(S)&&(S=A["$coerce_to!"](S,c("Integer"),"to_str"),z(v(S,0))&&Y.$raise(c("ArgumentError"),"negative level ("+S+")"),O=(C=(M=J.$caller(T(S,1),1).$first(),M===l||M==null?l:M.$split(":in `")),C===l||C==null?l:C.$first()),z(O)&&(O=""+O+": "),m=x(m,"map",[],function(le){return le==null&&(le=l),""+O+"warning: "+le})),z(te.VERBOSE["$nil?"]())||z(m["$empty?"]())?l:x(te.stderr,"puts",P(m))},-1),K(i,"$raise",function(r,s,u){throw te["!"]==null&&(te["!"]=l),s==null&&(s=l),u==null&&(u=l),r==null&&te["!"]!==l?te["!"]:(r==null?r=c("RuntimeError").$new(""):D(r,"$to_str")?r=c("RuntimeError").$new(r.$to_str()):r.$$is_class&&D(r,"$exception")?r=r.$exception(s):r.$$is_exception||(r=c("TypeError").$new("exception class/object expected")),u!==l&&r.$set_backtrace(u),te["!"]!==l&&e.exceptions.push(te["!"]),te["!"]=r,r)},-1),K(i,"$rand",function(r){return r===void 0?c(c("Random"),"DEFAULT").$rand():(r.$$is_number&&(r<0&&(r=Math.abs(r)),r%1!==0&&(r=r.$to_i()),r===0&&(r=void 0)),c(c("Random"),"DEFAULT").$rand(r))},-1),K(i,"$respond_to?",function(r,s){var u=this;s==null&&(s=!1);var f=u[Z(r)];return typeof f=="function"&&!f.$$stub?!0:u["$respond_to_missing?"].$$pristine===!0?!1:u["$respond_to_missing?"](r,s)},-2),K(i,"$respond_to_missing?",function(r,s){return!1},-2),A.$pristine(i,"respond_to?","respond_to_missing?"),K(i,"$require",function(r){return typeof r!="string"&&e.String&&e.Array&&(r=A["$coerce_to!"](r,c("String"),"to_str")),e.require(r)}),K(i,"$require_relative",function(r){return A["$try_convert!"](r,c("String"),"to_str"),r=c("File").$expand_path(c("File").$join(e.current_file,"..",r)),e.require(r)}),K(i,"$require_tree",function(r,s){var u;s=B(s),u=U(s,"autoload"),u==null&&(u=!1);var f=[];r=c("File").$expand_path(r),r=e.normalize(r),r==="."&&(r="");for(var m in e.modules)m["$start_with?"](r)&&(u?f.push([m,!0]):f.push([m,e.require(m)]));return f},-2),K(i,"$singleton_class",function(){var r=this;return e.get_singleton_class(r)}),K(i,"$sleep",function(r){r==null&&(r=l),r===l&&Y.$raise(c("TypeError"),"can't convert NilClass into time interval"),r.$$is_number||Y.$raise(c("TypeError"),"can't convert "+r.$class()+" into time interval"),r<0&&Y.$raise(c("ArgumentError"),"time interval must be positive");for(var s=e.global.performance?function(){return performance.now()}:function(){return new Date},u=s();s()-u<=r*1e3;);return Math.round(r)},-1),K(i,"$srand",function(r){return r==null&&(r=$("Random").$new_seed()),c("Random").$srand(r)},-1),K(i,"$String",function(r){var s=l;return z(s=A["$coerce_to?"](r,c("String"),"to_str"))?s:A["$coerce_to!"](r,c("String"),"to_s")}),K(i,"$tap",function t(){var r=t.$$p||l,s=this;return t.$$p=null,e.yield1(r,s),s}),K(i,"$to_proc",j),K(i,"$to_s",function(){var r=this;return"#<"+r.$class()+":0x"+r.$__id__().$to_s(16)+">"}),K(i,"$catch",function t(r){var s=t.$$p||l,u=l,f=l;t.$$p=null,r==null&&(r=l);try{return r=z(u=r)?u:o.$new(),e.yield1(s,r)}catch(m){if(e.rescue(m,[c("UncaughtThrowError")])){f=m;try{return N(f.$tag(),r)?f.$value():Y.$raise()}finally{e.pop_exception(m)}}else throw m}},-1),K(i,"$throw",function(r,s){return s==null&&(s=l),Y.$raise(c("UncaughtThrowError").$new(r,s))},-2),K(i,"$open",function t(r){var s=t.$$p||l,u,f;return t.$$p=null,u=F(arguments),f=u,x(c("File"),"open",P(f),s.$to_proc())},-1),K(i,"$yield_self",function t(){var r=t.$$p||l,s=this;return t.$$p=null,r===l?x(s,"enum_for",["yield_self"],$e(1)):e.yield1(r,s)}),d(i,"fail","raise"),d(i,"kind_of?","is_a?"),d(i,"object_id","__id__"),d(i,"public_send","__send__"),d(i,"send","__send__"),d(i,"then","yield_self"),d(i,"to_enum","enum_for")}("::",h),function(X,y){var i=k(X,y,"Object");return delete o.$$prototype.$require,i.$include(Y)}("::",null)};Opal.modules["corelib/main"]=function(e){var z=e.return_val,q=e.def,D=e.Object,A=e.slice,ee=e.Kernel,W=e.top;return e.nil,e.add_stubs("include,raise"),function(R,Z){return q(R,"$to_s",z("main")),q(R,"$include",function(H){return D.$include(H)}),q(R,"$autoload",function(H){var $e,K;return $e=A(arguments),K=$e,e.Object.$autoload.apply(e.Object,K)},-1),q(R,"$using",function(H){return ee.$raise("main.using is permitted only at toplevel")})}(e.get_singleton_class(W))};Opal.modules["corelib/error/errno"]=function(e){var z=e.module,q=e.truthy,D=e.rb_plus,A=e.send2,ee=e.find_super,W=e.def,R=e.klass,Z=e.nil,p=e.$$$;return e.add_stubs("+,errno,class,attr_reader"),function(H,$e){var K=z(H,"Errno"),Y=Z,te=Z;Y=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],te=Z;var F;for(F=0;F<Y.length;F++)(function(){var x=Y[F][0],P=Y[F][1],B=Y[F][2];te=e.klass(K,e.SystemCallError,x),te.errno=B,function(U,N){return W(U,"$new",function T(g){T.$$p;var w=this,j=Z;return T.$$p=null,g==null&&(g=Z),j=P,q(g)&&(j=D(j," - "+g)),A(w,ee(w,"new",T,!1,!0),"new",[j],null)},-1)}(e.get_singleton_class(te))})()}("::"),function(H,$e,K){var Y=R(H,$e,"SystemCallError");return W(Y,"$errno",function(){var F=this;return F.$class().$errno()}),function(te,F){return te.$attr_reader("errno")}(e.get_singleton_class(Y))}("::",p("StandardError"))};Opal.modules["corelib/error"]=function(e){var z=e.klass,q=e.slice,D=e.gvars,A=e.defs,ee=e.send,W=e.to_a,R=e.def,Z=e.send2,p=e.find_super,H=e.truthy,$e=e.Kernel,K=e.not,Y=e.rb_plus,te=e.eqeq,F=e.Object,x=e.ensure_kwargs,P=e.hash_get,B=e.module,U=[],N=e.nil,T=e.$$$;return e.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(g,w,j){var E=z(g,w,"Exception"),v=[E].concat(j),o=e.$r(v),d=E.$$prototype;d.message=N,e.prop(E.$$prototype,"$$is_exception",!0);var k;Error.stackTraceLimit=100,A(E,"$new",function(c){var X,y,i=this;D["!"]==null&&(D["!"]=N),X=q(arguments),y=X;var a=y.length>0?y[0]:N,$=new i.$$constructor(a);return $.name=i.$$name,$.message=a,$.cause=D["!"],e.send($,$.$initialize,y),e.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace($,k),$},-1),k=E.$new,A(E,"$exception",function(c){var X,y,i=this;return X=q(arguments),y=X,ee(i,"new",W(y))},-1),R(E,"$initialize",function(c){var X,y,i=this;return X=q(arguments),y=X,i.message=y.length>0?y[0]:N},-1),R(E,"$copy_instance_variables",function l(c){var X=l.$$p||N,y=this;l.$$p=null,Z(y,p(y,"copy_instance_variables",l,!1,!0),"copy_instance_variables",[c],X),y.message=c.message,y.cause=c.cause,y.stack=c.stack});function h(l){for(var c=[],X,y=0;y<l.length;y++){var i=l[y];!i||!i.$$is_string||((X=i.match(/^    at (.*?) \((.*?)\)$/))?c.push(X[2]+":in `"+X[1]+"'"):(X=i.match(/^    at (.*?)$/))?c.push(X[1]+":in `undefined'"):(X=i.match(/^  from (.*?)$/))?c.push(X[1]):(X=i.match(/^(.*?)@(.*?)$/))&&c.push(X[2]+":in `"+X[1]+"'"))}return c}return R(E,"$backtrace",function(){var c=this;if(c.backtrace)return c.backtrace;var X=c.stack;return typeof X<"u"&&X.$$is_string?c.backtrace=h(X.split(`
`)):X?c.backtrace=h(X):[]}),R(E,"$backtrace_locations",function(){var c,X=this;return X.backtrace_locations||(X.backtrace_locations=(c=X.$backtrace(),c===N||c==null?N:ee(c,"map",[],function(i){return i==null&&(i=N),T(T(T("Thread"),"Backtrace"),"Location").$new(i)}))),X.backtrace_locations}),R(E,"$cause",function(){var c=this;return c.cause||N}),R(E,"$exception",function(c){var X=this;if(c==null&&(c=N),c===N||X===c)return X;var y=X.$clone();return y.message=c,X.backtrace&&(y.backtrace=X.backtrace.$dup()),y.stack=X.stack,y.cause=X.cause,y},-1),R(E,"$message",function(){var c=this;return c.$to_s()}),R(E,"$full_message",function(c){var X,y=this,i=N,a=N,$=N,n=N,t=N,r=N,s=N,u=N,f=N;return D.stderr==null&&(D.stderr=N),c==null&&(c=N),H(o("Hash","skip_raise")?"constant":N)?(c=new Map([["highlight",D.stderr["$tty?"]()],["order","top"]]).$merge(H(i=c)?i:new Map),X=[c["$[]"]("highlight"),c["$[]"]("order")],a=X[0],$=X[1],H([!0,!1]["$include?"](a))||$e.$raise(T("ArgumentError"),"expected true or false as highlight: "+a),H(["top","bottom"]["$include?"]($))||$e.$raise(T("ArgumentError"),"expected :top or :bottom as order: "+$),H(a)?(n="\x1B[1;4m",t="\x1B[1m",r="\x1B[m"):n=t=r="",s=y.$backtrace().$dup(),(K(s)||H(s["$empty?"]()))&&(s=y.$caller()),u=s.$shift(),f=""+u+": ",f=Y(f,""+t+y.$to_s()+" ("+n+y.$class()+r+t+")"+r+`
`),f=Y(f,ee(s,"map",[],function(S){return S==null&&(S=N),"	from "+S+`
`}).$join()),H(y.$cause())&&(f=Y(f,y.$cause().$full_message(new Map([["highlight",a]])))),te($,"bottom")&&(f=f.$split(`
`).$reverse().$join(`
`),f=Y(""+t+"Traceback"+r+` (most recent call last):
`,f)),f):""+y.message+`
`+y.stack},-1),R(E,"$inspect",function(){var c=this,X=N;return X=c.$to_s(),H(X["$empty?"]())?c.$class().$to_s():"#<"+c.$class().$to_s()+": "+c.$to_s()+">"}),R(E,"$set_backtrace",function(c){var X=this,y=!0,i,a;if(c===N)X.backtrace=N,X.stack="";else if(c.$$is_string)X.backtrace=[c],X.stack="  from "+c;else{if(c.$$is_array){for(i=0,a=c.length;i<a;i++)if(!c[i].$$is_string){y=!1;break}}else y=!1;y===!1&&$e.$raise(T("TypeError"),"backtrace must be Array of String"),X.backtrace=c,X.stack=ee(c,"map",[],function(n){return n==null&&(n=N),Y("  from ",n)}).join(`
`)}return c}),R(E,"$to_s",function(){var c=this,X=N,y=N;return H(X=H(y=c.message)?c.message.$to_s():y)?X:c.$class().$to_s()})}("::",Error,U),z("::",T("Exception"),"ScriptError"),z("::",T("ScriptError"),"SyntaxError"),z("::",T("ScriptError"),"LoadError"),z("::",T("ScriptError"),"NotImplementedError"),z("::",T("Exception"),"SystemExit"),z("::",T("Exception"),"NoMemoryError"),z("::",T("Exception"),"SignalException"),z("::",T("SignalException"),"Interrupt"),z("::",T("Exception"),"SecurityError"),z("::",T("Exception"),"SystemStackError"),z("::",T("Exception"),"StandardError"),z("::",T("StandardError"),"EncodingError"),z("::",T("StandardError"),"ZeroDivisionError"),z("::",T("StandardError"),"NameError"),z("::",T("NameError"),"NoMethodError"),z("::",T("StandardError"),"RuntimeError"),z("::",T("RuntimeError"),"FrozenError"),z("::",T("StandardError"),"LocalJumpError"),z("::",T("StandardError"),"TypeError"),z("::",T("StandardError"),"ArgumentError"),z("::",T("ArgumentError"),"UncaughtThrowError"),z("::",T("StandardError"),"IndexError"),z("::",T("IndexError"),"StopIteration"),z("::",T("StopIteration"),"ClosedQueueError"),z("::",T("IndexError"),"KeyError"),z("::",T("StandardError"),"RangeError"),z("::",T("RangeError"),"FloatDomainError"),z("::",T("StandardError"),"IOError"),z("::",T("IOError"),"EOFError"),z("::",T("StandardError"),"SystemCallError"),z("::",T("StandardError"),"RegexpError"),z("::",T("StandardError"),"ThreadError"),z("::",T("StandardError"),"FiberError"),F.$autoload("Errno","corelib/error/errno"),function(g,w){var j=z(g,w,"FrozenError");return j.$attr_reader("receiver"),R(j,"$initialize",function E(v,o){var d;E.$$p;var k=this;return E.$$p=null,o=x(o),d=P(o,"receiver"),d==null&&(d=N),Z(k,p(k,"initialize",E,!1,!0),"initialize",[v],null),k.receiver=d},-2)}("::",T("RuntimeError")),function(g,w){var j=z(g,w,"UncaughtThrowError"),E=j.$$prototype;return E.tag=N,j.$attr_reader("tag","value"),R(j,"$initialize",function v(o,d){v.$$p;var k=this;return v.$$p=null,d==null&&(d=N),k.tag=o,k.value=d,Z(k,p(k,"initialize",v,!1,!0),"initialize",["uncaught throw "+k.tag.$inspect()],null)},-2)}("::",T("ArgumentError")),function(g,w){var j=z(g,w,"NameError");return j.$attr_reader("name"),R(j,"$initialize",function E(v,o){E.$$p;var d=this;return E.$$p=null,o==null&&(o=N),Z(d,p(d,"initialize",E,!1,!0),"initialize",[v],null),d.name=o},-2)}("::",null),function(g,w){var j=z(g,w,"NoMethodError");return j.$attr_reader("args"),R(j,"$initialize",function E(v,o,d){E.$$p;var k=this;return E.$$p=null,o==null&&(o=N),d==null&&(d=[]),Z(k,p(k,"initialize",E,!1,!0),"initialize",[v,o],null),k.args=d},-2)}("::",null),function(g,w){var j=z(g,w,"StopIteration");return j.$attr_reader("result")}("::",null),function(g,w){var j=z(g,w,"KeyError"),E=j.$$prototype;return E.receiver=E.key=N,R(j,"$initialize",function v(o,d){var k,h;v.$$p;var l=this;return v.$$p=null,d=x(d),k=P(d,"receiver"),k==null&&(k=N),h=P(d,"key"),h==null&&(h=N),Z(l,p(l,"initialize",v,!1,!0),"initialize",[o],null),l.receiver=k,l.key=h},-2),R(j,"$receiver",function(){var o=this,d=N;return H(d=o.receiver)?d:$e.$raise(T("ArgumentError"),"no receiver is available")}),R(j,"$key",function(){var o=this,d=N;return H(d=o.key)?d:$e.$raise(T("ArgumentError"),"no key is available")})}("::",null),function(g,w){var j=z(g,w,"LocalJumpError");return j.$attr_reader("exit_value","reason"),R(j,"$initialize",function E(v,o,d){E.$$p;var k=this;return E.$$p=null,o==null&&(o=N),d==null&&(d="noreason"),Z(k,p(k,"initialize",E,!1,!0),"initialize",[v],null),k.exit_value=o,k.reason=d},-2)}("::",null),function(g,w){var j=B(g,"JS"),E=[j].concat(w);return z(E[0],null,"Error"),N}("::",U)};Opal.modules["corelib/constants"]=function(e){var z=e.const_set;e.nil;var q=e.$$$;return z("::","RUBY_PLATFORM","opal"),z("::","RUBY_ENGINE","opal"),z("::","RUBY_VERSION","3.2.0"),z("::","RUBY_ENGINE_VERSION","1.8.2"),z("::","RUBY_RELEASE_DATE","2023-11-23"),z("::","RUBY_PATCHLEVEL",0),z("::","RUBY_REVISION","0"),z("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),z("::","RUBY_DESCRIPTION","opal "+q("RUBY_ENGINE_VERSION")+" ("+q("RUBY_RELEASE_DATE")+" revision "+q("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(e){var z=e.Object;return e.nil,e.add_stubs("require"),z.$require("corelib/runtime"),z.$require("corelib/helpers"),z.$require("corelib/module"),z.$require("corelib/class"),z.$require("corelib/basic_object"),z.$require("corelib/kernel"),z.$require("corelib/main"),z.$require("corelib/error"),z.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(e){var z=e.klass,q=e.Kernel,D=e.def,A=e.return_val,ee=e.ensure_kwargs,W=e.hash_get,R=e.NilClass,Z=e.slice,p=e.truthy,H=e.rb_gt,$e=e.alias,K=e.nil,Y=e.$$$;return e.add_stubs("raise,name,new,>,length,Rational,to_i"),function(te,F,x){var P=z(te,F,"NilClass");return P.$$prototype.$$meta=P,function(B,U){return D(B,"$allocate",function(){var T=this;return q.$raise(Y("TypeError"),"allocator undefined for "+T.$name())}),e.udef(B,"$new"),K}(e.get_singleton_class(P)),D(P,"$!",A(!0)),D(P,"$&",A(!1)),D(P,"$|",function(U){return U!==!1&&U!==K}),D(P,"$^",function(U){return U!==!1&&U!==K}),D(P,"$==",function(U){return U===K}),D(P,"$dup",A(K)),D(P,"$clone",function(U){return U=ee(U),W(U,"freeze"),K},-1),D(P,"$inspect",A("nil")),D(P,"$nil?",A(!0)),D(P,"$singleton_class",function(){return R}),D(P,"$to_a",function(){return[]}),D(P,"$to_h",function(){return new Map}),D(P,"$to_i",A(0)),D(P,"$to_s",A("")),D(P,"$to_c",function(){return Y("Complex").$new(0,0)}),D(P,"$rationalize",function(U){var N,T;return N=Z(arguments),T=N,p(H(T.$length(),1))&&q.$raise(Y("ArgumentError")),q.$Rational(0,1)},-1),D(P,"$to_r",function(){return q.$Rational(0,1)}),D(P,"$instance_variables",function(){return[]}),$e(P,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(e){var z=e.klass,q=e.Kernel,D=e.def,A=e.return_self,ee=e.ensure_kwargs,W=e.hash_get,R=e.slice,Z=e.truthy,p=e.send2,H=e.find_super,$e=e.to_a,K=e.alias,Y=e.nil,te=e.$$$;return e.add_stubs("raise,name,==,to_s,__id__"),function(F,x,P){var B=z(F,x,"Boolean");e.prop(B.$$prototype,"$$is_boolean",!0);for(var U=["$$class","$$meta"],N=0;N<U.length;N++)Object.defineProperty(B.$$prototype,U[N],{configurable:!0,enumerable:!1,get:function(){return this==!0?e.TrueClass:this==!1?e.FalseClass:e.Boolean}});return Object.defineProperty(B.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:Y}}),function(T,g){return D(T,"$allocate",function(){var j=this;return q.$raise(te("TypeError"),"allocator undefined for "+j.$name())}),e.udef(T,"$new"),Y}(e.get_singleton_class(B)),D(B,"$__id__",function(){var g=this;return g.valueOf()?2:0}),D(B,"$!",function(){var g=this;return g!=!0}),D(B,"$&",function(g){var w=this;return w==!0?g!==!1&&g!==Y:!1}),D(B,"$|",function(g){var w=this;return w==!0?!0:g!==!1&&g!==Y}),D(B,"$^",function(g){var w=this;return w==!0?g===!1||g===Y:g!==!1&&g!==Y}),D(B,"$==",function(g){var w=this;return w==!0===g.valueOf()}),D(B,"$singleton_class",function(){var g=this;return g.$$meta}),D(B,"$to_s",function(){var g=this;return g==!0?"true":"false"}),D(B,"$dup",A),D(B,"$clone",function(g){var w=this;return g=ee(g),W(g,"freeze"),w},-1),D(B,"$method_missing",function T(g,w){var j=T.$$p||Y,E,v,o=this;T.$$p=null,E=R(arguments,1),v=E;var d=o.$$class.$$prototype[e.jsid(g)];return Z(typeof d<"u"&&!d.$$stub)||p(o,H(o,"method_missing",T,!1,!0),"method_missing",[g].concat($e(v)),j),e.send(o,d,v,j)},-2),D(B,"$respond_to_missing?",function(g,w){var j=this,E=j.$$class.$$prototype[e.jsid(g)];return typeof E<"u"&&!E.$$stub},-2),K(B,"eql?","=="),K(B,"equal?","=="),K(B,"inspect","to_s"),K(B,"object_id","__id__")}("::",Boolean),z("::",te("Boolean"),"TrueClass"),z("::",te("Boolean"),"FalseClass"),Y};Opal.modules["corelib/comparable"]=function(e){var z=e.truthy,q=e.module,D=e.rb_gt,A=e.rb_lt,ee=e.eqeqeq,W=e.Kernel,R=e.def,Z=e.nil,p=e.$$$;return e.add_stubs(">,<,===,raise,class,<=>,equal?"),function(H){var $e=q(H,"Comparable"),K=Z;function Y(x){return e.is_a(x,e.Integer)?x:D(x,0)?1:A(x,0)?-1:0}function te(x,P){var B;ee(Z,K=P)||ee(!0,K)||ee(!1,K)||ee(p("Integer"),K)||ee(p("Float"),K)?B=P.$inspect():B=P.$$class,W.$raise(p("ArgumentError"),"comparison of "+x.$class()+" with "+B+" failed")}function F(x,P){var B=x["$<=>"](P);return z(B)||te(x,P),Y(B)}return R($e,"$==",function(P){var B=this,U=Z;return z(B["$equal?"](P))?!0:B["$<=>"]==e.Kernel["$<=>"]?!1:B.$$comparable?(B.$$comparable=!1,!1):z(U=B["$<=>"](P))?Y(U)==0:!1}),R($e,"$>",function(P){var B=this;return F(B,P)>0}),R($e,"$>=",function(P){var B=this;return F(B,P)>=0}),R($e,"$<",function(P){var B=this;return F(B,P)<0}),R($e,"$<=",function(P){var B=this;return F(B,P)<=0}),R($e,"$between?",function(P,B){var U=this;return!(z(A(U,P))||z(D(U,B)))}),R($e,"$clamp",function(P,B){var U=this;B==null&&(B=Z);var N,T;if(B===Z&&(e.is_a(P,e.Range)||W.$raise(p("TypeError"),"wrong argument type "+P.$class()+" (expected Range)"),T=P.excl,B=P.end,P=P.begin,B!==Z&&T&&W.$raise(p("ArgumentError"),"cannot clamp with an exclusive range")),P!==Z&&B!==Z&&F(P,B)>0&&W.$raise(p("ArgumentError"),"min argument must be smaller than max argument"),P!==Z){if(N=F(U,P),N==0)return U;if(N<0)return P}return B!==Z&&(N=F(U,B),N>0)?B:U},-2)}("::")};Opal.modules["corelib/regexp"]=function(e){var z=e.coerce_to,q=e.prop,D=e.freeze,A=e.klass,ee=e.const_set,W=e.send2,R=e.find_super,Z=e.def,p=e.truthy,H=e.gvars,$e=e.slice,K=e.Kernel,Y=e.Opal,te=e.alias,F=e.send,x=e.regexp,P=e.rb_plus,B=e.ensure_kwargs,U=e.hash_get,N=e.rb_ge,T=e.to_a,g=e.eqeqeq,w=e.rb_minus,j=e.return_ivar,E=[],v=e.nil,o=e.$$$;return e.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),A("::",o("StandardError"),"RegexpError"),function(d,k,h){var l=A(d,k,"Regexp"),c=[l].concat(h),X=e.$r(c);return ee(l,"IGNORECASE",1),ee(l,"EXTENDED",2),ee(l,"MULTILINE",4),e.prop(l.$$prototype,"$$is_regexp",!0),function(y,i){var a=[y].concat(i),$=e.$r(a);return Z(y,"$allocate",function n(){var t=n.$$p||v,r=this,s=v;return n.$$p=null,s=W(r,R(r,"allocate",n,!1,!0),"allocate",[],t),s.uninitialized=!0,s}),Z(y,"$escape",function(t){return t=z(t,o("String"),"to_str"),e.escape_regexp(t)}),Z(y,"$last_match",function(t){return H["~"]==null&&(H["~"]=v),t==null&&(t=v),p(t["$nil?"]())?H["~"]:p(H["~"])?H["~"]["$[]"](t):v},-1),Z(y,"$union",function(t){var r,s,u=this;r=$e(arguments),s=r;var f,m,S,C,M;if(s.length==0)return/(?!)/;if(s.length==1&&s[0].$$is_regexp)return s[0];f=s[0].$$is_array,s.length>1&&f&&K.$raise(o("TypeError"),"no implicit conversion of Array into String"),f&&(s=s[0]),C=void 0,m=[];for(var J=0;J<s.length;J++)S=s[J],S.$$is_string?m.push(u.$escape(S)):S.$$is_regexp?(M=S.$options(),C!=null&&C!=M&&K.$raise(o("TypeError"),"All expressions must use the same options"),C=M,m.push("("+S.source+")")):m.push(u.$escape(S.$to_str()));return u.$new(m.$join("|"),C)},-1),Z(y,"$new",function(t,r){if(t.$$is_regexp)return new RegExp(t);if(t=Y["$coerce_to!"](t,o("String"),"to_str"),t.charAt(t.length-1)==="\\"&&t.charAt(t.length-2)!=="\\"&&K.$raise(o("RegexpError"),"too short escape sequence: /"+t+"/"),t=t.replace("\\A","^").replace("\\z","$"),r===void 0||r["$!"]())return new RegExp(t);if(r.$$is_number){var s="";$("IGNORECASE")&r&&(s+="i"),$("MULTILINE")&r&&(s+="m"),r=s}else r="i";return new RegExp(t,r)},-2),te(y,"compile","new"),te(y,"quote","escape")}(e.get_singleton_class(l),c),Z(l,"$==",function(i){var a=this;return i instanceof RegExp&&a.toString()===i.toString()}),Z(l,"$===",function(i){var a=this;return a.$match(Y["$coerce_to?"](i,o("String"),"to_str"))!==v}),Z(l,"$=~",function(i){var a=this,$=v;return H["~"]==null&&(H["~"]=v),p($=a.$match(i))?H["~"].$begin(0):$}),Z(l,"$freeze",function(){var i=this;return p(i["$frozen?"]())?i:(i.hasOwnProperty("$$g")||q(i,"$$g",null),i.hasOwnProperty("$$gm")||q(i,"$$gm",null),D(i))}),Z(l,"$inspect",function(){var i=this,a=/^\/(.*)\/([^\/]*)$/,$=i.toString(),n=a.exec($);if(n){for(var t=n[1],r=n[2],s=t.split(""),u=s.length,f=!1,m="",S=0;S<u;S++){var C=s[S];!f&&C=="/"&&(m=m.concat("\\")),m=m.concat(C),C=="\\"?f?f=!1:f=!0:f=!1}return"/"+m+"/"+r}else return $}),Z(l,"$match",function y(i,a){var $=y.$$p||v,n=this;if(H["~"]==null&&(H["~"]=v),y.$$p=null,n.uninitialized&&K.$raise(o("TypeError"),"uninitialized Regexp"),a===void 0){if(i===v)return H["~"]=v;var t=n.exec(z(i,o("String"),"to_str"));return t?(H["~"]=o("MatchData").$new(n,t),$===v?H["~"]:e.yield1($,H["~"])):H["~"]=v}if(a=z(a,o("Integer"),"to_int"),i===v||(i=z(i,o("String"),"to_str"),a<0&&(a+=i.length,a<0)))return H["~"]=v;for(var r,s=e.global_regexp(n);;){if(r=s.exec(i),r===null)return H["~"]=v;if(r.index>=a)return H["~"]=o("MatchData").$new(s,r),$===v?H["~"]:e.yield1($,H["~"]);s.lastIndex=r.index+1}},-2),Z(l,"$match?",function(i,a){var $=this;if($.uninitialized&&K.$raise(o("TypeError"),"uninitialized Regexp"),a===void 0)return i===v?!1:$.test(z(i,o("String"),"to_str"));if(a=z(a,o("Integer"),"to_int"),i===v||(i=z(i,o("String"),"to_str"),a<0&&(a+=i.length,a<0)))return!1;var n,t=e.global_regexp($);return n=t.exec(i),!(n===null||n.index<a)},-2),Z(l,"$names",function(){var i=this;return F(i.$source().$scan(x(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),Z(l,"$named_captures",function(){var i=this;return F(F(F(i.$source().$scan(x(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function($){return $==null&&($=v),F($,"map",[],function(t){return t==null&&(t=v),P(t.$last(),1)})})}),Z(l,"$~",function(){var i=this;return H._==null&&(H._=v),i["$=~"](H._)}),Z(l,"$source",function(){var i=this;return i.source}),Z(l,"$options",function(){var i=this;i.uninitialized&&K.$raise(o("TypeError"),"uninitialized Regexp");var a=0;return i.multiline&&(a|=X("MULTILINE")),i.ignoreCase&&(a|=X("IGNORECASE")),a}),Z(l,"$casefold?",function(){var i=this;return i.ignoreCase}),te(l,"eql?","=="),te(l,"to_s","source")}("::",RegExp,E),function(d,k,h){var l=A(d,k,"MatchData"),c=[l].concat(h),X=e.$r(c),y=l.$$prototype;return y.matches=v,l.$attr_reader("post_match","pre_match","regexp","string"),Z(l,"$initialize",function(a,$,n){var t,r=this;n=B(n),t=U(n,"no_matchdata"),t==null&&(t=!1),p(t)||(H["~"]=r),r.regexp=a,r.begin=$.index,r.string=$.input,r.pre_match=$.input.slice(0,$.index),r.post_match=$.input.slice($.index+$[0].length),r.matches=[];for(var s=0,u=$.length;s<u;s++){var f=$[s];f==null?r.matches.push(v):r.matches.push(f)}},-3),Z(l,"$match",function(a){var $=this,n=v;return p(n=$["$[]"](a))?n:p(a["$is_a?"](X("Integer")))&&p(N(a,$.$length()))?K.$raise(o("IndexError"),"index "+a+" out of matches"):v}),Z(l,"$match_length",function(a){var $,n=this;return $=n.$match(a),$===v||$==null?v:$.$length()}),Z(l,"$[]",function(a){var $,n,t=this;return $=$e(arguments),n=$,n[0].$$is_string?(t.$regexp().$names()["$include?"](n["$[]"](0))["$!"]()&&K.$raise(o("IndexError"),"undefined group name reference: "+n["$[]"](0)),t.$named_captures()["$[]"](n["$[]"](0))):F(t.matches,"[]",T(n))},-1),Z(l,"$offset",function(a){var $=this;return a!==0&&K.$raise(o("ArgumentError"),"MatchData#offset only supports 0th element"),[$.begin,$.begin+$.matches[a].length]}),Z(l,"$==",function(a){var $=this,n=v,t=v,r=v,s=v;return g(o("MatchData"),a)?p(n=p(t=p(r=p(s=$.string==a.string)?$.regexp.toString()==a.regexp.toString():s)?$.pre_match==a.pre_match:r)?$.post_match==a.post_match:t)?$.begin==a.begin:n:!1}),Z(l,"$begin",function(a){var $=this;return a!==0&&K.$raise(o("ArgumentError"),"MatchData#begin only supports 0th element"),$.begin}),Z(l,"$end",function(a){var $=this;return a!==0&&K.$raise(o("ArgumentError"),"MatchData#end only supports 0th element"),$.begin+$.matches[a].length}),Z(l,"$captures",function(){var a=this;return a.matches.slice(1)}),Z(l,"$named_captures",function(){var a=this,$=v;return $=a.$captures(),F(a.$regexp().$named_captures(),"transform_values",[],function(t){return t==null&&(t=v),$["$[]"](w(t.$last(),1))})}),Z(l,"$names",function(){var a=this;return a.$regexp().$names()}),Z(l,"$inspect",function(){var a=this,$="#<MatchData "+a.matches[0].$inspect();if(a.$regexp().$names()["$empty?"]())for(var n=1,t=a.matches.length;n<t;n++)$+=" "+n+":"+a.matches[n].$inspect();else F(a.$named_captures(),"each",[],function(s,u){return s==null&&(s=v),u==null&&(u=v),$+=" "+s+":"+u.$inspect()});return $+">"}),Z(l,"$length",function(){var a=this;return a.matches.length}),Z(l,"$to_a",j("matches")),Z(l,"$to_s",function(){var a=this;return a.matches[0]}),Z(l,"$values_at",function(a){var $,n,t=this;$=$e(arguments),n=$;var r,s,u,f=[];for(r=0;r<n.length;r++){if(n[r].$$is_range&&(s=n[r].$to_a(),s.unshift(r,1),Array.prototype.splice.apply(n,s)),u=Y["$coerce_to!"](n[r],o("Integer"),"to_int"),u<0&&(u+=t.matches.length,u<0)){f.push(v);continue}f.push(t.matches[u])}return f},-1),te(l,"eql?","=="),te(l,"size","length")}(E[0],null,E)};Opal.modules["corelib/string"]=function(e){var z=e.coerce_to,q=e.respond_to,D=e.global_multiline_regexp,A=e.prop,ee=e.opal32_init,W=e.opal32_add,R=e.klass,Z=e.send2,p=e.find_super,H=e.def,$e=e.Opal,K=e.defs,Y=e.slice,te=e.send,F=e.to_a,x=e.extract_kwargs,P=e.ensure_kwargs,B=e.hash_get,U=e.eqeqeq,N=e.Kernel,T=e.truthy,g=e.gvars,w=e.rb_divide,j=e.rb_plus,E=e.eqeq,v=e.alias,o=e.const_set,d=e.top,k=[],h=e.$r(k),l=e.nil,c=e.$$$;return e.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),d.$require("corelib/comparable"),d.$require("corelib/regexp"),function(X,y,i){var a=R(X,y,"String"),$=[a].concat(i),n=e.$r($);a.$include(c("Comparable")),e.prop(a.$$prototype,"$$is_string",!0);var t=new Map;(function(){H(a,"$__id__",function s(){var u=s.$$p||l,f=this;if(s.$$p=null,typeof f=="object")return Z(f,p(f,"__id__",s,!1,!0),"__id__",[],u);if(t.has(f))return t.get(f);var m=e.uid();return t.set(f,m),m}),H(a,"$hash",function(){var u=this,f=ee(),m,S=u.length;for(f=W(f,5),f=W(f,S),m=0;m<S;m++)f=W(f,u.charCodeAt(m));return f})})(),K(a,"$try_convert",function(u){return $e["$coerce_to?"](u,c("String"),"to_str")}),K(a,"$new",function(u){var f,m,S=this;f=Y(arguments),m=f;var C=m[0]||"",M=m[m.length-1];return C=z(C,c("String"),"to_str"),M&&M.$$is_hash&&M.has("encoding")&&(C=C.$force_encoding(M.get("encoding").value)),C=new S.$$constructor(C),C.$initialize.$$pristine||te(C,"initialize",F(m)),C},-1),H(a,"$initialize",function(u,f){var m,S;return m=Y(arguments),S=x(m),S=P(S),m.length>0&&m.shift(),B(S,"encoding"),B(S,"capacity"),l},-1),H(a,"$%",function(u){var f=this;return U(c("Array"),u)?te(f,"format",[f].concat(F(u))):f.$format(f,u)}),H(a,"$*",function(u){var f=this;if(u=z(u,c("Integer"),"to_int"),u<0&&N.$raise(c("ArgumentError"),"negative argument"),u===0)return"";var m="",S=f.toString();for(S.length*u>=1<<28&&N.$raise(c("RangeError"),"multiply count must not overflow maximum string size");(u&1)===1&&(m+=S),u>>>=1,u!==0;)S+=S;return m}),H(a,"$+",function(u){var f=this;if(u=z(u,c("String"),"to_str"),u==""&&f.$$class===e.String)return f;if(f==""&&u.$$class===e.String)return u;var m=f+u;return f.encoding===m.encoding&&u.encoding===m.encoding||f.encoding.name==="UTF-8"||u.encoding.name==="UTF-8"?m:e.enc(m,f.encoding)}),H(a,"$<=>",function(u){var f=this;if(T(u["$respond_to?"]("to_str")))return u=u.$to_str().$to_s(),f>u?1:f<u?-1:0;var m=u["$<=>"](f);return m===l?l:m>0?-1:m<0?1:0}),H(a,"$==",function(u){var f=this;return u.$$is_string?f.toString()===u.toString():q(u,"$to_str")?u["$=="](f):!1}),H(a,"$=~",function(u){var f=this;return u.$$is_string&&N.$raise(c("TypeError"),"type mismatch: String given"),u["$=~"](f)}),H(a,"$[]",function(u,f){var m=this,S=m.length,C,M;if(u.$$is_range)return C=u.excl,M=u,f=u.end===l?-1:z(u.end,c("Integer"),"to_int"),u=u.begin===l?0:z(u.begin,c("Integer"),"to_int"),Math.abs(u)>S?l:(u<0&&(u+=S),f<0&&(f+=S),(!C||M.end===l)&&(f+=1),f=f-u,f<0&&(f=0),m.substr(u,f));if(u.$$is_string)return f!=null&&N.$raise(c("TypeError")),m.indexOf(u)!==-1?u:l;if(u.$$is_regexp){var J=m.match(u);return J===null?(g["~"]=l,l):(g["~"]=c("MatchData").$new(u,J),f==null?J[0]:(f=z(f,c("Integer"),"to_int"),f<0&&-f<J.length?J[f+=J.length]:f>=0&&f<J.length?J[f]:l))}return u=z(u,c("Integer"),"to_int"),u<0&&(u+=S),f==null?u>=S||u<0?l:m.substr(u,1):(f=z(f,c("Integer"),"to_int"),f<0||u>S||u<0?l:m.substr(u,f))},-2),H(a,"$b",function(){var u=this;return new String(u).$force_encoding("binary")}),H(a,"$capitalize",function(){var u=this;return u.charAt(0).toUpperCase()+u.substr(1).toLowerCase()}),H(a,"$casecmp",function(u){var f=this;if(!T(u["$respond_to?"]("to_str")))return l;u=z(u,c("String"),"to_str").$to_s();var m=/^[\x00-\x7F]*$/;return m.test(f)&&m.test(u)&&(f=f.toLowerCase(),u=u.toLowerCase()),f["$<=>"](u)}),H(a,"$casecmp?",function(u){var f=this,m=f.$casecmp(u);return m===l?l:m===0}),H(a,"$center",function(u,f){var m=this;if(f==null&&(f=" "),u=z(u,c("Integer"),"to_int"),f=z(f,c("String"),"to_str").$to_s(),T(f["$empty?"]())&&N.$raise(c("ArgumentError"),"zero width padding"),T(u<=m.length))return m;var S=m.$ljust(w(j(u,m.length),2).$ceil(),f),C=m.$rjust(w(j(u,m.length),2).$floor(),f);return C+S.slice(m.length)},-2),H(a,"$chomp",function(u){var f=this;if(g["/"]==null&&(g["/"]=l),u==null&&(u=g["/"]),T(u===l||f.length===0))return f;u=$e["$coerce_to!"](u,c("String"),"to_str").$to_s();var m;if(u===`
`)m=f.replace(/\r?\n?$/,"");else if(u==="")m=f.replace(/(\r?\n)+$/,"");else if(f.length>=u.length){var S=f.substr(f.length-u.length,u.length);S===u&&(m=f.substr(0,f.length-u.length))}return m??f},-1),H(a,"$chop",function(){var u=this,f=u.length,m;return f<=1?m="":u.charAt(f-1)===`
`&&u.charAt(f-2)==="\r"?m=u.substr(0,f-2):m=u.substr(0,f-1),m}),H(a,"$chr",function(){var u=this;return u.charAt(0)}),H(a,"$clone",function(u){var f,m=this,S=l;return u=P(u),f=B(u,"freeze"),f==null&&(f=l),T(f["$nil?"]())||E(f,!0)||E(f,!1)||m.$raise(n("ArgumentError"),"unexpected value for freeze: "+f.$class()),S=new String(m),S.$copy_singleton_methods(m),S.$initialize_clone(m,new Map([["freeze",f]])),E(f,!0)?S.$$frozen||(S.$$frozen=!0):T(f["$nil?"]())&&m.$$frozen&&(S.$$frozen=!0),S},-1),H(a,"$dup",function(){var u=this,f=l;return f=new String(u),f.$initialize_dup(u),f}),H(a,"$count",function(u){var f,m,S=this;f=Y(arguments),m=f,m.length===0&&N.$raise(c("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var C=r(m);return C===null?0:S.length-S.replace(new RegExp(C,"g"),"").length},-1),H(a,"$delete",function(u){var f,m,S=this;f=Y(arguments),m=f,m.length===0&&N.$raise(c("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var C=r(m);return C===null?S:S.replace(new RegExp(C,"g"),"")},-1),H(a,"$delete_prefix",function(u){var f=this;return u.$$is_string||(u=z(u,c("String"),"to_str")),f.slice(0,u.length)===u?f.slice(u.length):f}),H(a,"$delete_suffix",function(u){var f=this;return u.$$is_string||(u=z(u,c("String"),"to_str")),f.slice(f.length-u.length)===u?f.slice(0,f.length-u.length):f}),H(a,"$downcase",function(){var u=this;return u.toLowerCase()}),H(a,"$each_line",function s(u,f){var m=s.$$p||l,S,C,M,J,O=this;if(g["/"]==null&&(g["/"]=l),s.$$p=null,S=Y(arguments),C=x(S),C=P(C),S.length>0&&(M=S.shift()),M==null&&(M=g["/"]),J=B(C,"chomp"),J==null&&(J=!1),m===l)return O.$enum_for("each_line",M,new Map([["chomp",J]]));if(M===l)return e.yield1(m,O),O;M=z(M,c("String"),"to_str");var ae,le,ce,de,he,ve,me,be;if(M.length===0){for(ae=O.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,ce=ae.length;le<ce;le+=2)(ae[le]||ae[le+1])&&(be=(ae[le]||"")+(ae[le+1]||""),J&&(be=be.$chomp(`
`)),e.yield1(m,be));return O}for(he=O.$chomp(M),ve=O.length!=he.length,me=he.split(M),le=0,de=me.length;le<de;le++)be=me[le],(le<de-1||ve)&&(be+=M),J&&(be=be.$chomp(M)),e.yield1(m,be);return O},-1),H(a,"$empty?",function(){var u=this;return u.length===0}),H(a,"$end_with?",function(u){var f,m,S=this;f=Y(arguments),m=f;for(var C=0,M=m.length;C<M;C++){var J=z(m[C],c("String"),"to_str").$to_s();if(S.length>=J.length&&S.substr(S.length-J.length,J.length)==J)return!0}return!1},-1),H(a,"$gsub",function s(u,f){var m=s.$$p||l,S=this;if(s.$$p=null,f===void 0&&m===l)return S.$enum_for("gsub",u);var C="",M=l,J=0,O,ae;u.$$is_regexp?u=D(u):(u=z(u,c("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(O=u.exec(S),O===null){g["~"]=l,C+=S.slice(J);break}M=c("MatchData").$new(u,O),f===void 0?(le=u.lastIndex,ae=m(O[0]),u.lastIndex=le):f.$$is_hash?ae=f["$[]"](O[0]).$to_s():(f.$$is_string||(f=z(f,c("String"),"to_str")),ae=f.replace(/([\\]+)([0-9+&`'])/g,function(ce,de,he){if(de.length%2===0)return ce;switch(he){case"+":for(var ve=O.length-1;ve>0;ve--)if(O[ve]!==void 0)return de.slice(1)+O[ve];return"";case"&":return de.slice(1)+O[0];case"`":return de.slice(1)+S.slice(0,O.index);case"'":return de.slice(1)+S.slice(O.index+O[0].length);default:return de.slice(1)+(O[he]||"")}}).replace(/\\\\/g,"\\")),u.lastIndex===O.index?(C+=S.slice(J,O.index)+ae+(S[O.index]||""),u.lastIndex+=1):C+=S.slice(J,O.index)+ae,J=u.lastIndex}return g["~"]=M,C},-2),H(a,"$hex",function(){var u=this;return u.$to_i(16)}),H(a,"$include?",function(u){var f=this;return u.$$is_string||(u=z(u,c("String"),"to_str")),f.indexOf(u)!==-1}),H(a,"$index",function(u,f){var m=this,S,C,M;if(f===void 0)f=0;else if(f=z(f,c("Integer"),"to_int"),f<0&&(f+=m.length,f<0))return l;if(u.$$is_regexp)for(M=D(u);;){if(C=M.exec(m),C===null){g["~"]=l,S=-1;break}if(C.index>=f){g["~"]=c("MatchData").$new(M,C),S=C.index;break}M.lastIndex=C.index+1}else u=z(u,c("String"),"to_str"),u.length===0&&f>m.length?S=-1:S=m.indexOf(u,f);return S===-1?l:S},-2),H(a,"$inspect",function(){var u=this,f=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,m={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},S=u.replace(f,function(C){return m[C]?m[C]:(C=C.charCodeAt(0),C<=255&&(u.encoding["$binary?"]()||u.internal_encoding["$binary?"]())?"\\x"+("00"+C.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+C.toString(16).toUpperCase()).slice(-4))});return'"'+S.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),H(a,"$intern",function(){var u=this;return u.toString()}),H(a,"$length",function(){var u=this;return u.length}),v(a,"size","length"),H(a,"$lines",function s(u,f){var m=s.$$p||l,S,C,M,J,O=this,ae=l;return g["/"]==null&&(g["/"]=l),s.$$p=null,S=Y(arguments),C=x(S),C=P(C),S.length>0&&(M=S.shift()),M==null&&(M=g["/"]),J=B(C,"chomp"),J==null&&(J=!1),ae=te(O,"each_line",[M,new Map([["chomp",J]])],m.$to_proc()),T(m)?O:ae.$to_a()},-1),H(a,"$ljust",function(u,f){var m=this;if(f==null&&(f=" "),u=z(u,c("Integer"),"to_int"),f=z(f,c("String"),"to_str").$to_s(),T(f["$empty?"]())&&N.$raise(c("ArgumentError"),"zero width padding"),T(u<=m.length))return m;var S=-1,C="";for(u-=m.length;++S<u;)C+=f;return m+C.slice(0,u)},-2),H(a,"$lstrip",function(){var u=this;return u.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),H(a,"$ascii_only?",function(){var u=this;return u.encoding.ascii?/^[\x00-\x7F]*$/.test(u):!1}),H(a,"$match",function s(u,f){var m=s.$$p||l,S=this;return s.$$p=null,(U(n("String"),u)||T(u["$respond_to?"]("to_str")))&&(u=c("Regexp").$new(u.$to_str())),U(c("Regexp"),u)||N.$raise(c("TypeError"),"wrong argument type "+u.$class()+" (expected Regexp)"),te(u,"match",[S,f],m.$to_proc())},-2),H(a,"$match?",function(u,f){var m=this;return(U(n("String"),u)||T(u["$respond_to?"]("to_str")))&&(u=c("Regexp").$new(u.$to_str())),U(c("Regexp"),u)||N.$raise(c("TypeError"),"wrong argument type "+u.$class()+" (expected Regexp)"),u["$match?"](m,f)},-2),H(a,"$next",function(){var u=this,f=u.length;if(f===0)return"";for(var m=u,S=u.search(/[a-zA-Z0-9]/),C=!1,M;f--;){if(M=u.charCodeAt(f),M>=48&&M<=57||M>=65&&M<=90||M>=97&&M<=122)switch(M){case 57:C=!0,M=48;break;case 90:C=!0,M=65;break;case 122:C=!0,M=97;break;default:C=!1,M+=1}else S===-1?M===255?(C=!0,M=0):(C=!1,M+=1):C=!0;if(m=m.slice(0,f)+String.fromCharCode(M)+m.slice(f+1),C&&(f===0||f===S)){switch(M){case 65:break;case 97:break;default:M+=1}f===0?m=String.fromCharCode(M)+m:m=m.slice(0,f)+String.fromCharCode(M)+m.slice(f),C=!1}if(!C)break}return m}),H(a,"$oct",function(){var u=this,f,m=u,S=8;return/^\s*_/.test(m)?0:(m=m.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(C,M,J,O){switch(O.charAt(0)){case"+":case"-":return C;case"0":if(O.charAt(1)==="x"&&J==="0x")return C}switch(J){case"0b":S=2;break;case"0":case"0o":S=8;break;case"0d":S=10;break;case"0x":S=16;break}return M+O}),f=parseInt(m.replace(/_(?!_)/g,""),S),isNaN(f)?0:f)}),H(a,"$ord",function(){var u=this;return typeof u.codePointAt=="function"?u.codePointAt(0):u.charCodeAt(0)}),H(a,"$partition",function(u){var f=this,m,S;return u.$$is_regexp?(S=u.exec(f),S===null?m=-1:(c("MatchData").$new(u,S),u=S[0],m=S.index)):(u=z(u,c("String"),"to_str"),m=f.indexOf(u)),m===-1?[f,"",""]:[f.slice(0,m),f.slice(m,m+u.length),f.slice(m+u.length)]}),H(a,"$reverse",function(){var u=this;return u.split("").reverse().join("")}),H(a,"$rindex",function(u,f){var m=this,S,C,M,J;if(f===void 0)f=m.length;else if(f=z(f,c("Integer"),"to_int"),f<0&&(f+=m.length,f<0))return l;if(u.$$is_regexp){for(C=null,M=D(u);J=M.exec(m),!(J===null||J.index>f);)C=J,M.lastIndex=C.index+1;C===null?(g["~"]=l,S=-1):(c("MatchData").$new(M,C),S=C.index)}else u=z(u,c("String"),"to_str"),S=m.lastIndexOf(u,f);return S===-1?l:S},-2),H(a,"$rjust",function(u,f){var m=this;if(f==null&&(f=" "),u=z(u,c("Integer"),"to_int"),f=z(f,c("String"),"to_str").$to_s(),T(f["$empty?"]())&&N.$raise(c("ArgumentError"),"zero width padding"),T(u<=m.length))return m;var S=Math.floor(u-m.length),C=Math.floor(S/f.length),M=Array(C+1).join(f),J=S-M.length;return M+f.slice(0,J)+m},-2),H(a,"$rpartition",function(u){var f=this,m,S,C,M;if(u.$$is_regexp){for(S=null,C=D(u);M=C.exec(f),M!==null;)S=M,C.lastIndex=S.index+1;S===null?m=-1:(c("MatchData").$new(C,S),u=S[0],m=S.index)}else u=z(u,c("String"),"to_str"),m=f.lastIndexOf(u);return m===-1?["","",f]:[f.slice(0,m),f.slice(m,m+u.length),f.slice(m+u.length)]}),H(a,"$rstrip",function(){var u=this;return u.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),H(a,"$scan",function s(u,f){var m=s.$$p||l,S,C=this;s.$$p=null,f=P(f),S=B(f,"no_matchdata"),S==null&&(S=!1);var M=[],J=l,O;for(u.$$is_regexp?u=D(u):(u=z(u,c("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(O=u.exec(C))!=null;)J=c("MatchData").$new(u,O,new Map([["no_matchdata",S]])),m===l?O.length==1?M.push(O[0]):M.push(J.$captures()):O.length==1?e.yield1(m,O[0]):e.yield1(m,J.$captures()),u.lastIndex===O.index&&(u.lastIndex+=1);return S||(g["~"]=J),m!==l?C:M},-2),H(a,"$singleton_class",function(){var u=this;return e.get_singleton_class(u)}),H(a,"$split",function(u,f){var m=this,S=l;if(g[";"]==null&&(g[";"]=l),m.length===0)return[];if(f===void 0)f=0;else if(f=$e["$coerce_to!"](f,c("Integer"),"to_int"),f===1)return[m];(u===void 0||u===l)&&(u=T(S=g[";"])?S:" ");var C=[],M=m.toString(),J=0,O,ae=0,le=0,ce,de;if(u.$$is_regexp?u=D(u):(u=z(u,c("String"),"to_str").$to_s(),u===" "&&(u=/\s+/gm,M=M.replace(/^\s+/,""))),C=M.split(u),C.length===1&&C[0]===M)return[C[0]];for(;(ce=C.indexOf(void 0))!==-1;)C.splice(ce,1);if(f===0){for(;C[C.length-1]==="";)C.pop();return C}if(u.$$is_regexp||(u=e.escape_regexp(u),u=new RegExp(u,"gm")),O=u.exec(M),f<0){if(O!==null&&O[0]===""&&u.source.indexOf("(?=")===-1)for(ce=0,de=O.length;ce<de;ce++)C.push("");return C}if(O!==null&&O[0]==="")return le=(O.length-1)*(f-1)+f,C.splice(le-1,C.length-1,C.slice(le-1).join("")),C;if(f>=C.length)return C;for(;O!==null&&(ae++,J=u.lastIndex,le+=O.length,ae+1!==f);)O=u.exec(M);return C.splice(le,C.length-1,M.slice(J)),C},-1),H(a,"$squeeze",function(u){var f,m,S=this;if(f=Y(arguments),m=f,m.length===0)return S.replace(/(.)\1+/g,"$1");var C=r(m);return C===null?S:S.replace(new RegExp("("+C+")\\1+","g"),"$1")},-1),H(a,"$start_with?",function(u){var f,m,S=this;f=Y(arguments),m=f;for(var C=0,M=m.length;C<M;C++)if(m[C].$$is_regexp){var J=m[C],O=J.exec(S);if(O!=null&&O.index===0)return g["~"]=c("MatchData").$new(J,O),!0;g["~"]=l}else{var ae=z(m[C],c("String"),"to_str").$to_s();if(S.length>=ae.length&&S.startsWith(ae))return!0}return!1},-1),H(a,"$strip",function(){var u=this;return u.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),H(a,"$sub",function s(u,f){var m=s.$$p||l,S=this;s.$$p=null,u.$$is_regexp||(u=z(u,c("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var C,M=u.exec(S);return M===null?(g["~"]=l,C=S.toString()):(c("MatchData").$new(u,M),f===void 0?(m===l&&N.$raise(c("ArgumentError"),"wrong number of arguments (1 for 2)"),C=S.slice(0,M.index)+m(M[0])+S.slice(M.index+M[0].length)):f.$$is_hash?C=S.slice(0,M.index)+f["$[]"](M[0]).$to_s()+S.slice(M.index+M[0].length):(f=z(f,c("String"),"to_str"),f=f.replace(/([\\]+)([0-9+&`'])/g,function(J,O,ae){if(O.length%2===0)return J;switch(ae){case"+":for(var le=M.length-1;le>0;le--)if(M[le]!==void 0)return O.slice(1)+M[le];return"";case"&":return O.slice(1)+M[0];case"`":return O.slice(1)+S.slice(0,M.index);case"'":return O.slice(1)+S.slice(M.index+M[0].length);default:return O.slice(1)+(M[ae]||"")}}).replace(/\\\\/g,"\\"),C=S.slice(0,M.index)+f+S.slice(M.index+M[0].length))),C},-2),H(a,"$sum",function(u){var f=this;u==null&&(u=16),u=z(u,c("Integer"),"to_int");for(var m=0,S=f.length,C=0;C<S;C++)m+=f.charCodeAt(C);return u<=0?m:m&Math.pow(2,u)-1},-1),H(a,"$swapcase",function(){var u=this,f=u.replace(/([a-z]+)|([A-Z]+)/g,function(m,S,C){return S?m.toUpperCase():m.toLowerCase()});return f}),H(a,"$to_f",function(){var u=this;if(u.charAt(0)==="_")return 0;var f=parseFloat(u.replace(/_/g,""));return isNaN(f)||f==1/0||f==-1/0?0:f}),H(a,"$to_i",function(u){var f=this;u==null&&(u=10);var m,S=f.toLowerCase(),C=z(u,c("Integer"),"to_int");return(C===1||C<0||C>36)&&N.$raise(c("ArgumentError"),"invalid radix "+C),/^\s*_/.test(S)?0:(S=S.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(M,J,O,ae){switch(ae.charAt(0)){case"+":case"-":return M;case"0":if(ae.charAt(1)==="x"&&O==="0x"&&(C===0||C===16))return M}switch(O){case"0b":if(C===0||C===2)return C=2,J+ae;break;case"0":case"0o":if(C===0||C===8)return C=8,J+ae;break;case"0d":if(C===0||C===10)return C=10,J+ae;break;case"0x":if(C===0||C===16)return C=16,J+ae;break}return M}),m=parseInt(S.replace(/_(?!_)/g,""),C),isNaN(m)?0:m)},-1),H(a,"$to_proc",function s(){s.$$p;var u=this,f=l,m=l,S=l;return s.$$p=null,f=u.valueOf(),m=e.jsid(f),S=te(N,"proc",[],function C(M){var J=C.$$p||l,O,ae;C.$$p=null,O=Y(arguments),ae=O,ae.length===0&&N.$raise(c("ArgumentError"),"no receiver given");var le=ae[0];le==null&&(le=l);var ce=le[m];return ce?ae=ae.slice(1):(ce=le.$method_missing,ae[0]=f),typeof J=="function"&&(ce.$$p=J),ae.length===0?ce.call(le):ce.apply(le,ae)},-1),S.$$source_location=l,S}),H(a,"$to_s",function(){var u=this;return u.toString()}),H(a,"$tr",function(u,f){var m=this;if(u=z(u,c("String"),"to_str").$to_s(),f=z(f,c("String"),"to_str").$to_s(),u.length==0||u===f)return m;var S,C,M,J,O,ae,le,ce={},de=u.split(""),he=de.length,ve=f.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],he-=1);var I=[],L=null;for(C=!1,S=0;S<he;S++)if(J=de[S],L==null)L=J,I.push(J);else if(J==="-")L==="-"?(I.push("-"),I.push("-")):S==he-1?I.push("-"):C=!0;else if(C){for(O=L.charCodeAt(0),ae=J.charCodeAt(0),O>ae&&N.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),M=O+1;M<ae;M++)I.push(String.fromCharCode(M));I.push(J),C=null,L=null}else I.push(J);if(de=I,he=de.length,be)for(S=0;S<he;S++)ce[de[S]]=!0;else{if(me>0){var V=[],Q=null;for(C=!1,S=0;S<me;S++)if(J=ve[S],Q==null)Q=J,V.push(J);else if(J==="-")Q==="-"?(V.push("-"),V.push("-")):S==me-1?V.push("-"):C=!0;else if(C){for(O=Q.charCodeAt(0),ae=J.charCodeAt(0),O>ae&&N.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),M=O+1;M<ae;M++)V.push(String.fromCharCode(M));V.push(J),C=null,Q=null}else V.push(J);ve=V,me=ve.length}var ne=he-me;if(ne>0){var se=me>0?ve[me-1]:"";for(S=0;S<ne;S++)ve.push(se)}for(S=0;S<he;S++)ce[de[S]]=ve[S]}var oe="";for(S=0,le=m.length;S<le;S++){J=m.charAt(S);var fe=ce[J];be?oe+=fe==null?ie:J:oe+=fe??J}return oe}),H(a,"$tr_s",function(u,f){var m=this;if(u=z(u,c("String"),"to_str").$to_s(),f=z(f,c("String"),"to_str").$to_s(),u.length==0)return m;var S,C,M,J,O,ae,le,ce={},de=u.split(""),he=de.length,ve=f.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],he-=1);var I=[],L=null;for(C=!1,S=0;S<he;S++)if(J=de[S],L==null)L=J,I.push(J);else if(J==="-")L==="-"?(I.push("-"),I.push("-")):S==he-1?I.push("-"):C=!0;else if(C){for(O=L.charCodeAt(0),ae=J.charCodeAt(0),O>ae&&N.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),M=O+1;M<ae;M++)I.push(String.fromCharCode(M));I.push(J),C=null,L=null}else I.push(J);if(de=I,he=de.length,be)for(S=0;S<he;S++)ce[de[S]]=!0;else{if(me>0){var V=[],Q=null;for(C=!1,S=0;S<me;S++)if(J=ve[S],L==null)L=J,V.push(J);else if(J==="-")Q==="-"?(V.push("-"),V.push("-")):S==me-1?V.push("-"):C=!0;else if(C){for(O=L.charCodeAt(0),ae=J.charCodeAt(0),O>ae&&N.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),M=O+1;M<ae;M++)V.push(String.fromCharCode(M));V.push(J),C=null,L=null}else V.push(J);ve=V,me=ve.length}var ne=he-me;if(ne>0){var se=me>0?ve[me-1]:"";for(S=0;S<ne;S++)ve.push(se)}for(S=0;S<he;S++)ce[de[S]]=ve[S]}var oe="",fe=null;for(S=0,le=m.length;S<le;S++){J=m.charAt(S);var _=ce[J];be?_==null?fe==null&&(oe+=ie,fe=!0):(oe+=J,fe=null):_!=null?(fe==null||fe!==_)&&(oe+=_,fe=_):(oe+=J,fe=null)}return oe}),H(a,"$upcase",function(){var u=this;return u.toUpperCase()}),H(a,"$upto",function s(u,f){var m=s.$$p||l,S=this;if(s.$$p=null,f==null&&(f=!1),m===l)return S.$enum_for("upto",u,f);var C,M,J=S.toString();if(u=z(u,c("String"),"to_str"),J.length===1&&u.length===1)for(C=J.charCodeAt(0),M=u.charCodeAt(0);C<=M&&!(f&&C===M);)m(String.fromCharCode(C)),C+=1;else if(parseInt(J,10).toString()===J&&parseInt(u,10).toString()===u)for(C=parseInt(J,10),M=parseInt(u,10);C<=M&&!(f&&C===M);)m(C.toString()),C+=1;else for(;J.length<=u.length&&J<=u&&!(f&&J===u);)m(J),J=J.$succ();return S},-2);function r(s){function u(ce){var de="",he,ve=ce.length,me,be,ie,I,L;for(he=0;he<ve;he++)if(me=ce.charAt(he),me==="-"&&he>0&&he<ve-1&&!be){for(ie=ce.charCodeAt(he-1),I=ce.charCodeAt(he+1),ie>I&&N.$raise(c("ArgumentError"),'invalid range "'+ie+"-"+I+'" in string transliteration'),L=ie+1;L<I+1;L++)de+=String.fromCharCode(L);be=!0,he++}else be=me==="\\",de+=me;return de}function f(ce,de){if(ce.length===0)return de;var he="",ve,me=ce.length,be;for(ve=0;ve<me;ve++)be=ce.charAt(ve),de.indexOf(be)!==-1&&(he+=be);return he}var m,S,C,M,J,O,ae="",le="";for(m=0,S=s.length;m<S;m++)C=z(s[m],c("String"),"to_str"),M=C.charAt(0)==="^"&&C.length>1,C=u(M?C.slice(1):C),M?le=f(le,C):ae=f(ae,C);if(ae.length>0&&le.length>0){for(O="",m=0,S=ae.length;m<S;m++)J=ae.charAt(m),le.indexOf(J)===-1&&(O+=J);ae=O,le=""}return ae.length>0?"["+c("Regexp").$escape(ae)+"]":le.length>0?"[^"+c("Regexp").$escape(le)+"]":null}return H(a,"$instance_variables",function(){return[]}),K(a,"$_load",function(u){var f,m,S=this;return f=Y(arguments),m=f,te(S,"new",F(m))},-1),H(a,"$unicode_normalize",function(u){var f=this;return u==null&&(u="nfc"),T(["nfc","nfd","nfkc","nfkd"]["$include?"](u))||N.$raise(c("ArgumentError"),"Invalid normalization form "+u),f.normalize(u.$upcase())},-1),H(a,"$unicode_normalized?",function(u){var f=this;return u==null&&(u="nfc"),f.$unicode_normalize(u)["$=="](f)},-1),H(a,"$unpack",function(u){return N.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),H(a,"$unpack1",function(u){return N.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),H(a,"$freeze",function(){var u=this;return typeof u=="string"||A(u,"$$frozen",!0),u}),H(a,"$-@",function(){var u=this;return typeof u=="string"||u.$$frozen?u:u.encoding.name=="UTF-8"&&u.internal_encoding.name=="UTF-8"?u.toString():u.$dup().$freeze()}),H(a,"$frozen?",function(){var u=this;return typeof u=="string"||u.$$frozen===!0}),v(a,"+@","dup"),v(a,"===","=="),v(a,"byteslice","[]"),v(a,"eql?","=="),v(a,"equal?","==="),v(a,"object_id","__id__"),v(a,"slice","[]"),v(a,"succ","next"),v(a,"to_str","to_s"),v(a,"to_sym","intern"),$e.$pristine(a,"initialize")}("::",String,k),o(k[0],"Symbol",h("String"))};Opal.modules["corelib/enumerable"]=function(e){var z=e.truthy,q=e.coerce_to,D=e.yield1,A=e.yieldX,ee=e.deny_frozen_access,W=e.module,R=e.send,Z=e.slice,p=e.to_a,H=e.Opal,$e=e.thrower,K=e.def,Y=e.Kernel,te=e.return_val,F=e.rb_gt,x=e.rb_times,P=e.rb_lt,B=e.eqeq,U=e.rb_plus,N=e.rb_minus,T=e.rb_divide,g=e.rb_le,w=e.lambda,j=e.not,E=e.alias,v=[],o=e.nil,d=e.$$$;return e.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(k,h){var l=W(k,"Enumerable"),c=[l].concat(h),X=e.$r(c);function y(i){return i.length===0&&(i=[o]),i.length>1&&(i=[i]),i}return K(l,"$all?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,z(a!==void 0)?R(t,"each",[],function r(s){var u,f,m=o;if(u=Z(arguments),f=u,m=y(f),z(R(a,"public_send",["==="].concat(p(m)))))return o;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):n!==o?R(t,"each",[],function r(s){var u,f;if(u=Z(arguments),f=u,z(e.yieldX(n,p(f))))return o;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):R(t,"each",[],function r(s){var u,f;if(u=Z(arguments),f=u,z(H.$destructure(f)))return o;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),K(l,"$any?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,z(a!==void 0)?R(t,"each",[],function r(s){var u,f,m=o;if(u=Z(arguments),f=u,m=y(f),z(R(a,"public_send",["==="].concat(p(m)))))$.$throw(!0,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):n!==o?R(t,"each",[],function r(s){var u,f;if(u=Z(arguments),f=u,z(e.yieldX(n,p(f))))$.$throw(!0,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):R(t,"each",[],function r(s){var u,f;if(u=Z(arguments),f=u,z(H.$destructure(f)))$.$throw(!0,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),!1}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),K(l,"$chunk",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o?R($,"to_enum",["chunk"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:$}):R(d("Enumerator"),"new",[],function n(t){var r=n.$$s==null?this:n.$$s;t==null&&(t=o);var s=o,u=[];function f(){u.length>0&&t.$yield(s,u)}r.$each.$$p=function(m){var S=D(a,m);S===o?(f(),u=[],s=o):(s===o||s===S?u.push(m):(f(),u=[m]),s=S)},r.$each(),f()},{$$s:$})}),K(l,"$chunk_while",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o&&Y.$raise(d("ArgumentError"),"no block given"),R($,"slice_when",[],function(t,r){return t==null&&(t=o),r==null&&(r=o),e.yieldX(a,[t,r])["$!"]()})}),K(l,"$collect",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return R($,"enum_for",["collect"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$});var n=[];return $.$each.$$p=function(){var t=A(a,arguments);n.push(t)},$.$each(),n}),K(l,"$collect_concat",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o?R($,"enum_for",["collect_concat"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:$}):R($,"map",[],a.$to_proc()).$flatten(1)}),K(l,"$compact",function(){var a=this;return a.$to_a().$compact()}),K(l,"$count",function i(a){var $=i.$$p||o,n=this,t=o;return i.$$p=null,t=0,a!=null&&$!==o&&n.$warn("warning: given block not used"),z(a!=null)?$=R(Y,"proc",[],function(s){var u,f;return u=Z(arguments),f=u,H.$destructure(f)["$=="](a)},-1):z($["$nil?"]())&&($=R(Y,"proc",[],te(!0))),R(n,"each",[],function(s){var u,f;return u=Z(arguments),f=u,z(A($,f))?t++:o},-1),t},-1),K(l,"$cycle",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),$===o)return R(n,"enum_for",["cycle",a],function u(){var f=u.$$s==null?this:u.$$s;return z(a["$nil?"]())?z(f["$respond_to?"]("size"))?d(d("Float"),"INFINITY"):o:(a=H["$coerce_to!"](a,d("Integer"),"to_int"),z(F(a,0))?x(f.$enumerator_size(),a):0)},{$$s:n});if(!z(a["$nil?"]())&&(a=H["$coerce_to!"](a,d("Integer"),"to_int"),z(a<=0)))return o;var t=[],r,s;if(n.$each.$$p=function(){var u=H.$destructure(arguments);D($,u),t.push(u)},n.$each(),t.length===0)return o;if(a===o)for(;;)for(r=0,s=t.length;r<s;r++)D($,t[r]);else for(;a>1;){for(r=0,s=t.length;r<s;r++)D($,t[r]);a--}},-1),K(l,"$detect",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,n===o?t.$enum_for("detect",a):(R(t,"each",[],function r(s){var u,f,m=o;if(u=Z(arguments),f=u,m=H.$destructure(f),z(e.yield1(n,m)))$.$throw(m,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),a!==void 0?typeof a=="function"?a():a:o)}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),K(l,"$drop",function(a){var $=this;a=q(a,d("Integer"),"to_int"),z(a<0)&&Y.$raise(d("ArgumentError"),"attempt to drop negative size");var n=[],t=0;return $.$each.$$p=function(){a<=t&&n.push(H.$destructure(arguments)),t++},$.$each(),n}),K(l,"$drop_while",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return $.$enum_for("drop_while");var n=[],t=!0;return $.$each.$$p=function(){var r=H.$destructure(arguments);if(t){var s=D(a,r);z(s)||(t=!1,n.push(r))}else n.push(r)},$.$each(),n}),K(l,"$each_cons",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,z(arguments.length!=1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),a=H.$try_convert(a,d("Integer"),"to_int"),z(a<=0)&&Y.$raise(d("ArgumentError"),"invalid size"),$===o)return R(n,"enum_for",["each_cons",a],function r(){var s=r.$$s==null?this:r.$$s,u=o;return u=s.$enumerator_size(),z(u["$nil?"]())?o:B(u,0)||z(P(u,a))?0:U(N(u,a),1)},{$$s:n});var t=[];return n.$each.$$p=function(){var r=H.$destructure(arguments);t.push(r),t.length>a&&t.shift(),t.length==a&&D($,t.slice(0,a))},n.$each(),n}),K(l,"$each_entry",function i(a){var $=i.$$p||o,n,t,r=this;return i.$$p=null,n=Z(arguments),t=n,$===o?R(r,"to_enum",["each_entry"].concat(p(t)),function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var s=H.$destructure(arguments);D($,s)},r.$each.apply(r,t),r)},-1),K(l,"$each_slice",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a=q(a,d("Integer"),"to_int"),z(a<=0)&&Y.$raise(d("ArgumentError"),"invalid slice size"),$===o)return R(n,"enum_for",["each_slice",a],function r(){var s=r.$$s==null?this:r.$$s;return z(s["$respond_to?"]("size"))?T(s.$size(),a).$ceil():o},{$$s:n});var t=[];return n.$each.$$p=function(){var r=H.$destructure(arguments);t.push(r),t.length===a&&(D($,t),t=[])},n.$each(),t.length>0&&D($,t),n}),K(l,"$each_with_index",function i(a){var $=i.$$p||o,n,t,r=this;if(i.$$p=null,n=Z(arguments),t=n,$===o)return R(r,"enum_for",["each_with_index"].concat(p(t)),function u(){var f=u.$$s==null?this:u.$$s;return f.$enumerator_size()},{$$s:r});var s=0;return r.$each.$$p=function(){var u=H.$destructure(arguments);$(u,s),s++},r.$each.apply(r,t),r},-1),K(l,"$each_with_object",function i(a){var $=i.$$p||o,n=this;return i.$$p=null,$===o?R(n,"enum_for",["each_with_object",a],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:n}):(n.$each.$$p=function(){var t=H.$destructure(arguments);$(t,a)},n.$each(),a)}),K(l,"$entries",function(a){var $,n,t=this;$=Z(arguments),n=$;var r=[];return t.$each.$$p=function(){r.push(H.$destructure(arguments))},t.$each.apply(t,n),r},-1),K(l,"$filter_map",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o?R($,"enum_for",["filter_map"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:$}):R(R($,"map",[],a.$to_proc()),"select",[],"itself".$to_proc())}),K(l,"$find_all",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return R($,"enum_for",["find_all"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$});var n=[];return $.$each.$$p=function(){var t=H.$destructure(arguments),r=D(a,t);z(r)&&n.push(t)},$.$each(),n}),K(l,"$find_index",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this,r=o;return i.$$p=null,z(a===void 0&&n===o)?t.$enum_for("find_index"):(a!=null&&n!==o&&t.$warn("warning: given block not used"),r=0,z(a!=null)?R(t,"each",[],function s(u){var f,m;return f=Z(arguments),m=f,B(H.$destructure(m),a)&&$.$throw(r,s.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}):R(t,"each",[],function s(u){var f,m;return f=Z(arguments),m=f,z(e.yieldX(n,p(m)))&&$.$throw(r,s.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}),o)}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),K(l,"$first",function(a){try{var $=$e("return"),n=this,t=o,r=o;return z(a===void 0)?R(n,"each",[],function s(u){u==null&&(u=o),$.$throw(u,s.$$is_lambda)},{$$ret:$}):(t=[],a=q(a,d("Integer"),"to_int"),z(a<0)&&Y.$raise(d("ArgumentError"),"attempt to take negative size"),z(a==0)?[]:(r=0,R(n,"each",[],function s(u){var f,m;if(f=Z(arguments),m=f,t.push(H.$destructure(m)),z(a<=++r))$.$throw(t,s.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),t))}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),K(l,"$grep",function i(a){var $=i.$$p||o,n=this,t=o;return i.$$p=null,t=[],R(n,"each",[],function(s){var u,f,m=o;return u=Z(arguments),f=u,m=y(f),z(R(a,"__send__",["==="].concat(p(m))))?($!==o?(z(F(f.$length(),1))&&(f=[f]),f=e.yieldX($,p(f))):z(g(f.$length(),1))&&(f=f["$[]"](0)),t.$push(f)):o},-1),t}),K(l,"$grep_v",function i(a){var $=i.$$p||o,n=this,t=o;return i.$$p=null,t=[],R(n,"each",[],function(s){var u,f,m=o;return u=Z(arguments),f=u,m=y(f),z(R(a,"__send__",["==="].concat(p(m))))?o:($!==o?(z(F(f.$length(),1))&&(f=[f]),f=e.yieldX($,p(f))):z(g(f.$length(),1))&&(f=f["$[]"](0)),t.$push(f))},-1),t}),K(l,"$group_by",function i(){var a=i.$$p||o,$,n=this,t=o,r=o;return i.$$p=null,a===o?R(n,"enum_for",["group_by"],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:n}):(t=new Map,n.$each.$$p=function(){var s=H.$destructure(arguments),u=D(a,s);(z(r=t["$[]"](u))?r:($=[u,[]],R(t,"[]=",$),$[$.length-1]))["$<<"](s)},n.$each(),t)}),K(l,"$include?",function(a){try{var $=$e("return"),n=this;return R(n,"each",[],function t(r){var s,u;if(s=Z(arguments),u=s,B(H.$destructure(u),a))$.$throw(!0,t.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),!1}catch(t){if(t===$)return t.$v;throw t}finally{$.is_orphan=!0}}),K(l,"$inject",function i(a,$){var n=i.$$p||o,t=this;i.$$p=null;var r=a;return n!==o&&$===void 0?t.$each.$$p=function(){var s=H.$destructure(arguments);if(r===void 0){r=s;return}s=A(n,[r,s]),r=s}:($===void 0&&(d("Symbol")["$==="](a)||Y.$raise(d("TypeError"),""+a.$inspect()+" is not a Symbol"),$=a,r=void 0),t.$each.$$p=function(){var s=H.$destructure(arguments);if(r===void 0){r=s;return}r=r.$__send__($,s)}),t.$each(),r??o},-1),K(l,"$lazy",function(){var a=this;return R(d(d("Enumerator"),"Lazy"),"new",[a,a.$enumerator_size()],function(n,t){var r,s;return n==null&&(n=o),r=Z(arguments,1),s=r,R(n,"yield",p(s))},-2)}),K(l,"$enumerator_size",function(){var a=this;return z(a["$respond_to?"]("size"))?a.$size():o}),K(l,"$max",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a===void 0||a===o){var t,r;return n.$each.$$p=function(){var s=H.$destructure(arguments);if(t===void 0){t=s;return}$!==o?r=A($,[s,t]):r=s["$<=>"](t),r===o&&Y.$raise(d("ArgumentError"),"comparison failed"),r>0&&(t=s)},n.$each(),t===void 0?o:t}return a=q(a,d("Integer"),"to_int"),R(n,"sort",[],$.$to_proc()).$reverse().$first(a)},-1),K(l,"$max_by",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),!z($))return R(n,"enum_for",["max_by",a],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:n});if(!z(a["$nil?"]()))return R(n,"sort_by",[],$.$to_proc()).$reverse().$take(a);var t,r;return n.$each.$$p=function(){var s=H.$destructure(arguments),u=D($,s);if(t===void 0){t=s,r=u;return}u["$<=>"](r)>0&&(t=s,r=u)},n.$each(),t===void 0?o:t},-1),K(l,"$min",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),!z(a["$nil?"]()))return $!==o?R(n,"sort",[],function(s,u){return s==null&&(s=o),u==null&&(u=o),e.yieldX($,[s,u])}).$take(a):n.$sort().$take(a);var t;return $!==o?n.$each.$$p=function(){var r=H.$destructure(arguments);if(t===void 0){t=r;return}var s=$(r,t);s===o&&Y.$raise(d("ArgumentError"),"comparison failed"),s<0&&(t=r)}:n.$each.$$p=function(){var r=H.$destructure(arguments);if(t===void 0){t=r;return}H.$compare(r,t)<0&&(t=r)},n.$each(),t===void 0?o:t},-1),K(l,"$min_by",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),!z($))return R(n,"enum_for",["min_by",a],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:n});if(!z(a["$nil?"]()))return R(n,"sort_by",[],$.$to_proc()).$take(a);var t,r;return n.$each.$$p=function(){var s=H.$destructure(arguments),u=D($,s);if(t===void 0){t=s,r=u;return}u["$<=>"](r)<0&&(t=s,r=u)},n.$each(),t===void 0?o:t},-1),K(l,"$minmax",function i(){var a=i.$$p||o,$=this,n=o;i.$$p=null,a=z(n=a)?n:R(Y,"proc",[],function(f,m){return f==null&&(f=o),m==null&&(m=o),f["$<=>"](m)});var t=o,r=o,s=!0;return $.$each.$$p=function(){var u=H.$destructure(arguments);if(s)t=r=u,s=!1;else{var f=a.$call(t,u);f===o?Y.$raise(d("ArgumentError"),"comparison failed"):f>0&&(t=u);var m=a.$call(r,u);m===o?Y.$raise(d("ArgumentError"),"comparison failed"):m<0&&(r=u)}},$.$each(),[t,r]}),K(l,"$minmax_by",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,!z(a))return R($,"enum_for",["minmax_by"],function u(){var f=u.$$s==null?this:u.$$s;return f.$enumerator_size()},{$$s:$});var n=o,t=o,r,s;return $.$each.$$p=function(){var u=H.$destructure(arguments),f=D(a,u);(r===void 0||f["$<=>"](r)<0)&&(n=u,r=f),(s===void 0||f["$<=>"](s)>0)&&(t=u,s=f)},$.$each(),[n,t]}),K(l,"$none?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,z(a!==void 0)?R(t,"each",[],function r(s){var u,f,m=o;if(u=Z(arguments),f=u,m=y(f),z(R(a,"public_send",["==="].concat(p(m)))))$.$throw(!1,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):n!==o?R(t,"each",[],function r(s){var u,f;if(u=Z(arguments),f=u,z(e.yieldX(n,p(f))))$.$throw(!1,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):R(t,"each",[],function r(s){var u,f,m=o;if(u=Z(arguments),f=u,m=H.$destructure(f),z(m))$.$throw(!1,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),K(l,"$one?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this,r=o;return i.$$p=null,r=0,z(a!==void 0)?R(t,"each",[],function s(u){var f,m,S=o;if(f=Z(arguments),m=f,S=y(m),z(R(a,"public_send",["==="].concat(p(S)))))if(r=U(r,1),z(F(r,1)))$.$throw(!1,s.$$is_lambda);else return o;else return o},{$$arity:-1,$$ret:$}):n!==o?R(t,"each",[],function s(u){var f,m;if(f=Z(arguments),m=f,!z(e.yieldX(n,p(m))))return o;if(r=U(r,1),z(F(r,1)))$.$throw(!1,s.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):R(t,"each",[],function s(u){var f,m;if(f=Z(arguments),m=f,!z(H.$destructure(m)))return o;if(r=U(r,1),z(F(r,1)))$.$throw(!1,s.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),r["$=="](1)}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),K(l,"$partition",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return R($,"enum_for",["partition"],function r(){var s=r.$$s==null?this:r.$$s;return s.$enumerator_size()},{$$s:$});var n=[],t=[];return $.$each.$$p=function(){var r=H.$destructure(arguments),s=D(a,r);z(s)?n.push(r):t.push(r)},$.$each(),[n,t]}),K(l,"$reject",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return R($,"enum_for",["reject"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$});var n=[];return $.$each.$$p=function(){var t=H.$destructure(arguments),r=D(a,t);z(r)||n.push(t)},$.$each(),n}),K(l,"$reverse_each",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return R($,"enum_for",["reverse_each"],function r(){var s=r.$$s==null?this:r.$$s;return s.$enumerator_size()},{$$s:$});var n=[];$.$each.$$p=function(){n.push(arguments)},$.$each();for(var t=n.length-1;t>=0;t--)A(a,n[t]);return n}),K(l,"$slice_before",function i(a){var $=i.$$p||o,n=this;return i.$$p=null,z(a===void 0&&$===o)&&Y.$raise(d("ArgumentError"),"both pattern and block are given"),z(a!==void 0&&$!==o||arguments.length>1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),R(d("Enumerator"),"new",[],function t(r){var s=t.$$s==null?this:t.$$s;r==null&&(r=o);var u=[];$!==o?a===void 0?s.$each.$$p=function(){var f=H.$destructure(arguments),m=D($,f);z(m)&&u.length>0&&(r["$<<"](u),u=[]),u.push(f)}:s.$each.$$p=function(){var f=H.$destructure(arguments),m=$(f,a.$dup());z(m)&&u.length>0&&(r["$<<"](u),u=[]),u.push(f)}:s.$each.$$p=function(){var f=H.$destructure(arguments),m=a["$==="](f);z(m)&&u.length>0&&(r["$<<"](u),u=[]),u.push(f)},s.$each(),u.length>0&&r["$<<"](u)},{$$s:n})},-1),K(l,"$slice_after",function i(a){var $=i.$$p||o,n=this;return i.$$p=null,z(a===void 0&&$===o)&&Y.$raise(d("ArgumentError"),"both pattern and block are given"),z(a!==void 0&&$!==o||arguments.length>1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),z(a!==void 0)&&($=R(Y,"proc",[],function(r){return r==null&&(r=o),a["$==="](r)})),R(d("Enumerator"),"new",[],function t(r){var s=t.$$s==null?this:t.$$s;r==null&&(r=o);var u;s.$each.$$p=function(){var f=H.$destructure(arguments),m=D($,f);u==null&&(u=[]),z(m)?(u.push(f),r.$yield(u),u=null):u.push(f)},s.$each(),u!=null&&r.$yield(u)},{$$s:n})},-1),K(l,"$slice_when",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o&&Y.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1)"),R(d("Enumerator"),"new",[],function n(t){var r=n.$$s==null?this:n.$$s;t==null&&(t=o);var s=o,u=o;r.$each_cons.$$p=function(){var f=H.$destructure(arguments),m=f[0],S=f[1],C=A(a,[m,S]);u=S,s===o&&(s=[]),z(C)?(s.push(m),t.$yield(s),s=[]):s.push(m)},r.$each_cons(2),s!==o&&(s.push(u),t.$yield(s))},{$$s:$})}),K(l,"$sort",function i(){var a=i.$$p||o,$=this,n=o;return i.$$p=null,n=$.$to_a(),a===o&&(a=w(function(r,s){return r==null&&(r=o),s==null&&(s=o),r["$<=>"](s)})),R(n,"sort",[],a.$to_proc())}),K(l,"$sort_by",function i(){var a=i.$$p||o,$=this,n=o;return i.$$p=null,a===o?R($,"enum_for",["sort_by"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$}):(n=R($,"map",[],function(){var r=o;return r=H.$destructure(arguments),[e.yield1(a,r),r]}),R(n,"sort!",[],function(r,s){return r==null&&(r=o),s==null&&(s=o),r[0]["$<=>"](s[0])}),R(n,"map!",[],function(r){return r==null&&(r=o),r[1]}))}),K(l,"$sum",function i(a){var $=i.$$p||o,n=this,t=o,r=o;return i.$$p=null,a==null&&(a=0),t=a,r=0,R(n,"each",[],function(u){var f,m,S=o,C=o,M=o;return f=Z(arguments),m=f,S=$!==o?e.yieldX($,p(m)):H.$destructure(m),j([d(d("Float"),"INFINITY"),d(d("Float"),"INFINITY")["$-@"]()]["$include?"](S))&&z(S["$respond_to?"]("-"))?(C=N(S,r),M=U(t,C),r=N(N(M,t),C),t=M):t=U(t,S)},-1),t},-1),K(l,"$take",function(a){var $=this;return $.$first(a)}),K(l,"$take_while",function i(){try{var a=$e("return"),$=i.$$p||o,n=this,t=o;return i.$$p=null,z($)?(t=[],R(n,"each",[],function r(s){var u,f,m=o;return u=Z(arguments),f=u,m=H.$destructure(f),z(e.yield1($,m))||a.$throw(t,r.$$is_lambda),t.push(m)},{$$arity:-1,$$ret:a})):n.$enum_for("take_while")}catch(r){if(r===a)return r.$v;throw r}finally{a.is_orphan=!0}}),K(l,"$uniq",function i(){var a=i.$$p||o,$=this,n=o;return i.$$p=null,n=new Map,R($,"each",[],function(r){var s,u,f,m=o,S=o;return s=Z(arguments),u=s,m=H.$destructure(u),S=a!==o?e.yield1(a,m):m,z(n["$key?"](S))?o:(f=[S,m],R(n,"[]=",f),f[f.length-1])},-1),n.$values()}),K(l,"$tally",function(a){var $=this,n=o;return a&&a!==o&&ee(a),n=R(R($,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),z(a)?(R(n,"each",[],function(r,s){var u;return r==null&&(r=o),s==null&&(s=o),u=[r,U(a.$fetch(r,0),s)],R(a,"[]=",u),u[u.length-1]}),a):n},-1),K(l,"$to_h",function i(a){var $=i.$$p||o,n,t,r=this;if(i.$$p=null,n=Z(arguments),t=n,$!==o)return R(R(r,"map",[],$.$to_proc()),"to_h",p(t));var s=new Map;return r.$each.$$p=function(){var u=H.$destructure(arguments),f=H["$coerce_to?"](u,d("Array"),"to_ary"),m,S;f.$$is_array||Y.$raise(d("TypeError"),"wrong element type "+u.$class()+" (expected array)"),f.length!==2&&Y.$raise(d("ArgumentError"),"element has wrong array length (expected 2, was "+f.$length()+")"),m=f[0],S=f[1],e.hash_put(s,m,S)},r.$each.apply(r,t),s},-1),K(l,"$to_set",function i(a,$){var n=i.$$p||o,t,r,s,u=this;return i.$$p=null,t=Z(arguments),t.length>0&&(r=t.shift()),r==null&&(r=X("Set")),s=t,R(r,"new",[u].concat(p(s)),n.$to_proc())},-1),K(l,"$zip",function i(a){i.$$p;var $,n,t=this;return i.$$p=null,$=Z(arguments),n=$,R(t.$to_a(),"zip",p(n))},-1),E(l,"find","detect"),E(l,"filter","find_all"),E(l,"flat_map","collect_concat"),E(l,"map","collect"),E(l,"member?","include?"),E(l,"reduce","inject"),E(l,"select","find_all"),E(l,"to_a","entries")}("::",v)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(e){var z=e.klass,q=e.truthy,D=e.to_a,A=e.eqeq,ee=e.Kernel,W=e.def,R=e.rb_gt,Z=e.rb_lt,p=e.rb_le,H=e.rb_ge,$e=e.rb_plus,K=e.rb_minus,Y=e.eqeqeq,te=e.not,F=e.rb_times,x=e.rb_divide,P=e.alias,B=[],U=e.nil,N=e.$$$;return e.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(T,g,w){var j=z(T,g,"Enumerator"),E=[j].concat(w);return function(v,o,d){var k=z(v,o,"ArithmeticSequence"),h=[k].concat(d),l=e.$r(h),c=k.$$prototype;c.step_arg2=c.receiver_num=c.step_arg1=c.step=c.range=c.topfx=c.bypfx=c.creation_method=c.skipped_arg=U,e.prop(k.$$prototype,"$$is_arithmetic_seq",!0);var X=1/0;return W(k,"$initialize",function(i,a,$){var n,t=this,r=U;return $==null&&($="step"),t.creation_method=$,q(i["$is_a?"](N("Array")))?(n=[].concat(D(i)),t.step_arg1=n[0]==null?U:n[0],t.step_arg2=n[1]==null?U:n[1],t.topfx=n[2]==null?U:n[2],t.bypfx=n[3]==null?U:n[3],t.receiver_num=a,t.step=1,t.range=q(t.step_arg2)?(t.step=t.step_arg2,e.Range.$new(t.receiver_num,t.step_arg1,!1)):q(t.step_arg1)?e.Range.$new(t.receiver_num,t.step_arg1,!1):e.Range.$new(t.receiver_num,U,!1)):(q(a)||(t.skipped_arg=!0),n=[i,q(r=a)?r:1],t.range=n[0],t.step=n[1]),t.object=t,A(t.step,0)&&ee.$raise(l("ArgumentError"),"step can't be 0"),q(t.step["$respond_to?"]("to_int"))?U:ee.$raise(l("ArgumentError"),"no implicit conversion of "+t.step.$class()+" into Integer")},-2),k.$attr_reader("step"),W(k,"$begin",function(){var i=this;return i.range.$begin()}),W(k,"$end",function(){var i=this;return i.range.$end()}),W(k,"$exclude_end?",function(){var i=this;return i.range["$exclude_end?"]()}),W(k,"$_lesser_than_end?",function(i){var a=this,$=U,n=U;return $=q(n=a.$end())?n:X,q(R(a.$step(),0))?q(a["$exclude_end?"]())?Z(i,$):p(i,$):q(a["$exclude_end?"]())?R(i,$):H(i,$)}),W(k,"$_greater_than_begin?",function(i){var a=this,$=U,n=U;return $=q(n=a.$begin())?n:X["$-@"](),q(R(a.$step(),0))?R(i,$):Z(i,$)}),W(k,"$first",function(i){var a=this,$=U,n=U,t=U;if($=q(n=a.$begin())?n:X["$-@"](),!q(i))return q(a["$_lesser_than_end?"]($))?$:U;for(t=[];q(q(n=a["$_lesser_than_end?"]($))?R(i,0):n);)t["$<<"]($),$=$e($,a.$step()),i=K(i,1);return t},-1),W(k,"$each",function y(){var i=y.$$p||U,a=this,$=U,n=U;if(y.$$p=null,i===U)return a;for(Y(U,$=a.$begin())&&ee.$raise(l("TypeError"),"nil can't be coerced into Integer"),n=q($=a.$begin())?$:X["$-@"]();q(a["$_lesser_than_end?"](n));)e.yield1(i,n),n=$e(n,a.$step());return a}),W(k,"$last",function(i){var a=this,$=U,n=U,t=U;if(Y(X,$=a.$end())||Y(X["$-@"](),$)?ee.$raise(N("FloatDomainError"),a.$end()):Y(U,$)&&ee.$raise(N("RangeError"),"cannot get the last element of endless arithmetic sequence"),n=K(a.$end(),K(a.$end(),a.$begin())["$%"](a.$step())),q(a["$_lesser_than_end?"](n))||(n=K(n,a.$step())),!q(i))return q(a["$_greater_than_begin?"](n))?n:U;for(t=[];q(q($=a["$_greater_than_begin?"](n))?R(i,0):$);)t["$<<"](n),n=K(n,a.$step()),i=K(i,1);return t.$reverse()},-1),W(k,"$size",function(){var i=this,a=U,$=U;return a=q(R(i.$step(),0))?1:-1,te(i["$_lesser_than_end?"](i.$begin()))?0:q([X["$-@"](),X]["$include?"](i.$step()))?1:q([F(X["$-@"](),a),U]["$include?"](i.$begin()))||q([F(X,a),U]["$include?"](i.$end()))?X:($=K(i.$end(),K(i.$end(),i.$begin())["$%"](i.$step())),q(i["$_lesser_than_end?"]($))||($=K($,i.$step())),$e(x(K($,i.$begin()),i.$step()).$abs().$to_i(),1))}),W(k,"$==",function(i){var a=this,$=U,n=U,t=U,r=U;return q($=q(n=q(t=q(r=a.$class()["$=="](i.$class()))?a.$begin()["$=="](i.$begin()):r)?a.$end()["$=="](i.$end()):t)?a.$step()["$=="](i.$step()):n)?a["$exclude_end?"]()["$=="](i["$exclude_end?"]()):$}),W(k,"$hash",function(){var i=this;return[l("ArithmeticSequence"),i.$begin(),i.$end(),i.$step(),i["$exclude_end?"]()].$hash()}),W(k,"$inspect",function(){var i=this,a=U;return q(i.receiver_num)?(a=q(i.step_arg2)?"("+i.topfx+i.step_arg1.$inspect()+", "+i.bypfx+i.step_arg2.$inspect()+")":q(i.step_arg1)?"("+i.topfx+i.step_arg1.$inspect()+")":U,"("+i.receiver_num.$inspect()+"."+i.creation_method+a+")"):(a=q(i.skipped_arg)?U:"("+i.step+")","(("+i.range.$inspect()+")."+i.creation_method+a+")")}),P(k,"===","=="),P(k,"eql?","==")}(j,j,E)}("::",null,B)};Opal.modules["corelib/enumerator/chain"]=function(e){var z=e.deny_frozen_access,q=e.klass,D=e.slice,A=e.def,ee=e.send,W=e.to_a,R=e.truthy,Z=e.rb_plus,p=e.thrower,H=e.nil,$e=e.$$$;return e.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(K,Y){var te=q(K,Y,"Enumerator");return function(F,x){var P=q(F,x,"Chain"),B=P.$$prototype;return B.enums=B.iterated=H,A(P,"$initialize",function(N){var T,g,w=this;return T=D(arguments),g=T,z(w),w.enums=g,w.iterated=[],w.object=w},-1),A(P,"$each",function U(N){var T=U.$$p||H,g,w,j=this;return U.$$p=null,g=D(arguments),w=g,T===H?ee(j,"to_enum",["each"].concat(W(w)),function E(){var v=E.$$s==null?this:E.$$s;return v.$size()},{$$s:j}):(ee(j.enums,"each",[],function E(v){var o=E.$$s==null?this:E.$$s;return o.iterated==null&&(o.iterated=H),v==null&&(v=H),o.iterated["$<<"](v),ee(v,"each",W(w),T.$to_proc())},{$$s:j}),j)},-1),A(P,"$size",function(N){try{var T=p("return"),g,w,j=this,E=H;return g=D(arguments),w=g,E=0,ee(j.enums,"each",[],function v(o){var d=H;return o==null&&(o=H),d=ee(o,"size",W(w)),R([H,$e($e("Float"),"INFINITY")]["$include?"](d))&&T.$throw(d,v.$$is_lambda),E=Z(E,d)},{$$ret:T}),E}catch(v){if(v===T)return v.$v;throw v}finally{T.is_orphan=!0}},-1),A(P,"$rewind",function(){var N=this;return ee(N.iterated,"reverse_each",[],function(g){return g==null&&(g=H),R(g["$respond_to?"]("rewind"))?g.$rewind():H}),N.iterated=[],N}),A(P,"$inspect",function(){var N=this;return"#<Enumerator::Chain: "+N.enums.$inspect()+">"})}(te,te)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(e){var z=e.deny_frozen_access,q=e.klass,D=e.truthy,A=e.Kernel,ee=e.def,W=e.slice,R=e.send,Z=[],p=e.nil,H=e.$$$;return e.add_stubs("include,raise,new,to_proc"),function($e,K,Y){var te=q($e,K,"Enumerator"),F=[te].concat(Y);return function(x,P,B){var U=q(x,P,"Generator"),N=[U].concat(B),T=e.$r(N),g=U.$$prototype;return g.block=p,U.$include(H("Enumerable")),ee(U,"$initialize",function w(){var j=w.$$p||p,E=this;return w.$$p=null,z(E),D(j)||A.$raise(H("LocalJumpError"),"no block given"),E.block=j}),ee(U,"$each",function w(j){var E=w.$$p||p,v,o,d=this,k=p;w.$$p=null,v=W(arguments),o=v,k=R(T("Yielder"),"new",[],E.$to_proc());try{o.unshift(k),e.yieldX(d.block,o)}catch(h){if(h&&h.$thrower_type=="breaker")return h.$v;throw h}return d},-1)}(F[0],null,F)}(Z[0],null,Z)};Opal.modules["corelib/enumerator/lazy"]=function(e){var z=e.truthy,q=e.coerce_to,D=e.yield1,A=e.yieldX,ee=e.deny_frozen_access,W=e.klass,R=e.slice,Z=e.send2,p=e.find_super,H=e.to_a,$e=e.defs,K=e.Kernel,Y=e.send,te=e.def,F=e.return_self,x=e.Opal,P=e.rb_lt,B=e.eqeqeq,U=e.rb_plus,N=e.alias,T=[],g=e.nil,w=e.$$$;return e.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(j,E,v){var o=W(j,E,"Enumerator"),d=[o].concat(v);return function(k,h,l){var c=W(k,h,"Lazy"),X=[c].concat(l),y=e.$r(X),i=c.$$prototype;return i.enumerator=g,W(c,w("Exception"),"StopLazyError"),$e(c,"$for",function a($,n){var t,r,s=a.$$p||g,u=this,f=g;return a.$$p=null,t=R(arguments,1),r=t,f=Z(u,p(u,"for",a,!1,!0),"for",[$].concat(H(r)),s),f.enumerator=$,f},-2),te(c,"$initialize",function a($,n){var t=a.$$p||g,r=this;return a.$$p=null,n==null&&(n=g),ee(r),t===g&&K.$raise(w("ArgumentError"),"tried to call lazy new without a block"),r.enumerator=$,Z(r,p(r,"initialize",a,!1,!0),"initialize",[n],function(u,f){var m,S;u==null&&(u=g),m=R(arguments,1),S=m;try{return Y($,"each",H(S),function(M){var J,O;J=R(arguments),O=J,O.unshift(u),A(t,O)},-1)}catch(C){if(e.rescue(C,[y("StopLazyError")]))try{return g}finally{e.pop_exception(C)}else throw C}},-2)},-2),te(c,"$lazy",F),te(c,"$collect",function a(){var $=a.$$p||g,n=this;return a.$$p=null,z($)||K.$raise(w("ArgumentError"),"tried to call lazy map without a block"),Y(y("Lazy"),"new",[n,n.$enumerator_size()],function(r,s){var u,f;r==null&&(r=g),u=R(arguments,1),f=u;var m=A($,f);r.$yield(m)},-2)}),te(c,"$collect_concat",function a(){var $=a.$$p||g,n=this;return a.$$p=null,z($)||K.$raise(w("ArgumentError"),"tried to call lazy map without a block"),Y(y("Lazy"),"new",[n,g],function(r,s){var u,f;r==null&&(r=g),u=R(arguments,1),f=u;var m=A($,f);if(m["$respond_to?"]("force")&&m["$respond_to?"]("each"))Y(m,"each",[],function(M){return M==null&&(M=g),r.$yield(M)});else{var S=x.$try_convert(m,w("Array"),"to_ary");S===g?r.$yield(m):Y(m,"each",[],function(M){return M==null&&(M=g),r.$yield(M)})}},-2)}),te(c,"$drop",function($){var n=this,t=g,r=g,s=g;return $=q($,w("Integer"),"to_int"),z(P($,0))&&K.$raise(w("ArgumentError"),"attempt to drop negative size"),t=n.$enumerator_size(),r=B(w("Integer"),t)&&z(P($,t))?$:t,s=0,Y(y("Lazy"),"new",[n,r],function(f,m){var S,C;return f==null&&(f=g),S=R(arguments,1),C=S,z(P(s,$))?s=U(s,1):Y(f,"yield",H(C))},-2)}),te(c,"$drop_while",function a(){var $=a.$$p||g,n=this,t=g;return a.$$p=null,z($)||K.$raise(w("ArgumentError"),"tried to call lazy drop_while without a block"),t=!0,Y(y("Lazy"),"new",[n,g],function(s,u){var f,m;if(s==null&&(s=g),f=R(arguments,1),m=f,z(t)){var S=A($,m);z(S)||(t=!1,Y(s,"yield",H(m)))}else return Y(s,"yield",H(m))},-2)}),te(c,"$enum_for",function a($,n){var t=a.$$p||g,r,s,u,f=this;return a.$$p=null,r=R(arguments),r.length>0&&(s=r.shift()),s==null&&(s="each"),u=r,Y(f.$class(),"for",[f,s].concat(H(u)),t.$to_proc())},-1),te(c,"$find_all",function a(){var $=a.$$p||g,n=this;return a.$$p=null,z($)||K.$raise(w("ArgumentError"),"tried to call lazy select without a block"),Y(y("Lazy"),"new",[n,g],function(r,s){var u,f;r==null&&(r=g),u=R(arguments,1),f=u;var m=A($,f);z(m)&&Y(r,"yield",H(f))},-2)}),te(c,"$grep",function a($){var n=a.$$p||g,t=this;return a.$$p=null,z(n)?Y(y("Lazy"),"new",[t,g],function(s,u){var f,m;s==null&&(s=g),f=R(arguments,1),m=f;var S=x.$destructure(m),C=$["$==="](S);z(C)&&(C=D(n,S),s.$yield(D(n,S)))},-2):Y(y("Lazy"),"new",[t,g],function(s,u){var f,m;s==null&&(s=g),f=R(arguments,1),m=f;var S=x.$destructure(m),C=$["$==="](S);z(C)&&s.$yield(S)},-2)}),te(c,"$reject",function a(){var $=a.$$p||g,n=this;return a.$$p=null,z($)||K.$raise(w("ArgumentError"),"tried to call lazy reject without a block"),Y(y("Lazy"),"new",[n,g],function(r,s){var u,f;r==null&&(r=g),u=R(arguments,1),f=u;var m=A($,f);z(m)||Y(r,"yield",H(f))},-2)}),te(c,"$take",function($){var n=this,t=g,r=g,s=g;return $=q($,w("Integer"),"to_int"),z(P($,0))&&K.$raise(w("ArgumentError"),"attempt to take negative size"),t=n.$enumerator_size(),r=B(w("Integer"),t)&&z(P($,t))?$:t,s=0,Y(y("Lazy"),"new",[n,r],function(f,m){var S,C;return f==null&&(f=g),S=R(arguments,1),C=S,z(P(s,$))?(Y(f,"yield",H(C)),s=U(s,1)):K.$raise(y("StopLazyError"))},-2)}),te(c,"$take_while",function a(){var $=a.$$p||g,n=this;return a.$$p=null,z($)||K.$raise(w("ArgumentError"),"tried to call lazy take_while without a block"),Y(y("Lazy"),"new",[n,g],function(r,s){var u,f;r==null&&(r=g),u=R(arguments,1),f=u;var m=A($,f);z(m)?Y(r,"yield",H(f)):K.$raise(y("StopLazyError"))},-2)}),te(c,"$inspect",function(){var $=this;return"#<"+$.$class()+": "+$.enumerator.$inspect()+">"}),N(c,"force","to_a"),N(c,"filter","find_all"),N(c,"flat_map","collect_concat"),N(c,"map","collect"),N(c,"select","find_all"),N(c,"to_enum","enum_for")}(o,o,d)}("::",null,T)};Opal.modules["corelib/enumerator/yielder"]=function(e){var z=e.klass,q=e.def,D=e.slice,A=e.send,ee=e.to_a,W=[],R=e.nil;return e.add_stubs("yield,proc"),function(Z,p,H){var $e=z(Z,p,"Enumerator"),K=[$e].concat(H);return function(Y,te){var F=z(Y,te,"Yielder"),x=F.$$prototype;return x.block=R,q(F,"$initialize",function P(){var B=P.$$p||R,U=this;return P.$$p=null,U.block=B,U}),q(F,"$yield",function(B){var U,N,T=this;U=D(arguments),N=U;var g=e.yieldX(T.block,N);if(g&&g.$thrower_type=="break")throw g;return g},-1),q(F,"$<<",function(B){var U=this;return U.$yield(B),U}),q(F,"$to_proc",function(){var B=this;return A(B,"proc",[],function U(N){var T,g,w=U.$$s==null?this:U.$$s;return T=D(arguments),g=T,A(w,"yield",ee(g))},{$$arity:-1,$$s:B})})}(K[0],null)}(W[0],null,W)};Opal.modules["corelib/enumerator"]=function(e){var z=e.slice,q=e.coerce_to,D=e.deny_frozen_access,A=e.klass,ee=e.defs,W=e.truthy,R=e.send,Z=e.not,p=e.def,H=e.rb_plus,$e=e.to_a,K=e.Opal,Y=e.send2,te=e.find_super,F=e.rb_ge,x=e.Kernel,P=e.rb_le,B=e.alias,U=e.top,N=[],T=e.nil,g=e.$$$;return e.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),U.$require("corelib/enumerable"),function(w,j,E){var v=A(w,j,"Enumerator"),o=[v].concat(E),d=e.$r(o),k=v.$$prototype;return k.size=k.args=k.object=k.method=k.values=k.cursor=T,v.$include(g("Enumerable")),v.$$prototype.$$is_enumerator=!0,ee(v,"$for",function h(l,c,X){var y=h.$$p||T,i,a,$,n=this;h.$$p=null,i=z(arguments,1),i.length>0&&(a=i.shift()),a==null&&(a="each"),$=i;var t=n.$allocate();return t.object=l,t.size=y,t.method=a,t.args=$,t.cursor=0,t},-2),p(v,"$initialize",function h(l){var c=h.$$p||T,X=this;return h.$$p=null,z(arguments),D(X),X.cursor=0,W(c)?(X.object=R(d("Generator"),"new",[],c.$to_proc()),X.method="each",X.args=[],X.size=arguments[0]||T,W(X.size)&&Z(X.size["$respond_to?"]("call"))?X.size=q(X.size,g("Integer"),"to_int"):T):(X.object=arguments[0],X.method=arguments[1]||"each",X.args=z(arguments,2),X.size=T)},-1),p(v,"$each",function h(l){var c=h.$$p||T,X,y,i=this;return h.$$p=null,X=z(arguments),y=X,W(c["$nil?"]())&&W(y["$empty?"]())?i:(y=H(i.args,y),W(c["$nil?"]())?R(i.$class(),"new",[i.object,i.method].concat($e(y))):R(i.object,"__send__",[i.method].concat($e(y)),c.$to_proc()))},-1),p(v,"$size",function(){var l=this;return W(l.size["$respond_to?"]("call"))?R(l.size,"call",$e(l.args)):l.size}),p(v,"$with_index",function h(l){var c=h.$$p||T,X=this;if(h.$$p=null,l==null&&(l=0),l=W(l)?q(l,g("Integer"),"to_int"):0,!W(c))return R(X,"enum_for",["with_index",l],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:X});var y=l;return X.$each.$$p=function(){var i=K.$destructure(arguments),a=c(i,y);return y++,a},X.$each()},-1),p(v,"$each_with_index",function h(){var l=h.$$p||T,c=this;return h.$$p=null,l===T?R(c,"enum_for",["each_with_index"],function X(){var y=X.$$s==null?this:X.$$s;return y.$size()},{$$s:c}):(Y(c,te(c,"each_with_index",h,!1,!0),"each_with_index",[],l),c.object)}),p(v,"$rewind",function(){var l=this;return l.cursor=0,l}),p(v,"$peek_values",function(){var l=this,c=T;return l.values=W(c=l.values)?c:R(l,"map",[],function(y){var i,a;return i=z(arguments),a=i,a},-1),W(F(l.cursor,l.values.$length()))&&x.$raise(g("StopIteration"),"iteration reached an end"),l.values["$[]"](l.cursor)}),p(v,"$peek",function(){var l=this,c=T;return c=l.$peek_values(),W(P(c.$length(),1))?c["$[]"](0):c}),p(v,"$next_values",function(){var l=this,c=T;return c=l.$peek_values(),l.cursor=H(l.cursor,1),c}),p(v,"$next",function(){var l=this,c=T;return c=l.$next_values(),W(P(c.$length(),1))?c["$[]"](0):c}),p(v,"$feed",function(l){var c=this;return c.$raise(d("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),p(v,"$+",function(l){var c=this;return g(g("Enumerator"),"Chain").$new(c,l)}),p(v,"$inspect",function(){var l=this,c=T;return c="#<"+l.$class()+": "+l.object.$inspect()+":"+l.method,W(l.args["$any?"]())&&(c=H(c,"("+l.args.$inspect()["$[]"](g("Range").$new(1,-2))+")")),H(c,">")}),B(v,"with_object","each_with_object"),v.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),v.$autoload("Chain","corelib/enumerator/chain"),v.$autoload("Generator","corelib/enumerator/generator"),v.$autoload("Lazy","corelib/enumerator/lazy"),v.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,N)};Opal.modules["corelib/numeric"]=function(e){var z=e.klass,q=e.truthy,D=e.Kernel,A=e.def,ee=e.to_ary,W=e.return_self,R=e.rb_minus,Z=e.rb_times,p=e.rb_lt,H=e.eqeq,$e=e.rb_divide,K=e.return_val,Y=e.Opal,te=e.slice,F=e.extract_kwargs,x=e.ensure_kwargs,P=e.hash_get,B=e.not,U=e.send,N=e.rb_ge,T=e.rb_le,g=e.rb_plus,w=e.rb_gt,j=e.alias,E=e.top,v=e.nil,o=e.$$$;return e.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),E.$require("corelib/comparable"),function(d,k){var h=z(d,k,"Numeric");return h.$include(o("Comparable")),A(h,"$coerce",function(c){var X=this;return q(c["$instance_of?"](X.$class()))?[c,X]:[D.$Float(c),D.$Float(X)]}),A(h,"$__coerced__",function(c,X){var y,i,a=this,$=v,n=v;if(q(X["$respond_to?"]("coerce")))return i=X.$coerce(a),y=ee(i),$=y[0]==null?v:y[0],n=y[1]==null?v:y[1],$.$__send__(c,n);switch(c.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return D.$raise(o("TypeError"),""+X.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return D.$raise(o("ArgumentError"),"comparison of "+a.$class()+" with "+X.$class()+" failed");default:return v}}),A(h,"$<=>",function(c){var X=this;return q(X["$equal?"](c))?0:v}),A(h,"$+@",W),A(h,"$-@",function(){var c=this;return R(0,c)}),A(h,"$%",function(c){var X=this;return R(X,Z(c,X.$div(c)))}),A(h,"$abs",function(){var c=this;return q(p(c,0))?c["$-@"]():c}),A(h,"$abs2",function(){var c=this;return Z(c,c)}),A(h,"$angle",function(){var c=this;return q(p(c,0))?o(o("Math"),"PI"):0}),A(h,"$ceil",function(c){var X=this;return c==null&&(c=0),X.$to_f().$ceil(c)},-1),A(h,"$conj",W),A(h,"$denominator",function(){var c=this;return c.$to_r().$denominator()}),A(h,"$div",function(c){var X=this;return H(c,0)&&D.$raise(o("ZeroDivisionError"),"divided by o"),$e(X,c).$floor()}),A(h,"$divmod",function(c){var X=this;return[X.$div(c),X["$%"](c)]}),A(h,"$fdiv",function(c){var X=this;return $e(X.$to_f(),c)}),A(h,"$floor",function(c){var X=this;return c==null&&(c=0),X.$to_f().$floor(c)},-1),A(h,"$i",function(){var c=this;return D.$Complex(0,c)}),A(h,"$imag",K(0)),A(h,"$integer?",K(!1)),A(h,"$nonzero?",function(){var c=this;return q(c["$zero?"]())?v:c}),A(h,"$numerator",function(){var c=this;return c.$to_r().$numerator()}),A(h,"$polar",function(){var c=this;return[c.$abs(),c.$arg()]}),A(h,"$quo",function(c){var X=this;return $e(Y["$coerce_to!"](X,o("Rational"),"to_r"),c)}),A(h,"$real",W),A(h,"$real?",K(!0)),A(h,"$rect",function(){var c=this;return[c,0]}),A(h,"$round",function(c){var X=this;return X.$to_f().$round(c)},-1),A(h,"$step",function l(c,X,y){var i=l.$$p||v,a,$,n,t,r,s,u=this,f=v;l.$$p=null,a=te(arguments),$=F(a),$=x($),a.length>0&&(n=a.shift()),a.length>0&&(t=a.shift()),r=P($,"to"),s=P($,"by"),n!==void 0&&r!==void 0&&D.$raise(o("ArgumentError"),"to is given twice"),t!==void 0&&s!==void 0&&D.$raise(o("ArgumentError"),"step is given twice"),r!==void 0&&(n=r),s!==void 0&&(t=s),n===void 0&&(n=v);function m(){t===v&&D.$raise(o("TypeError"),"step must be numeric"),t!=null&&t["$=="](0)&&D.$raise(o("ArgumentError"),"step can't be 0"),(t===v||t==null)&&(t=1);var he=t["$<=>"](0);he===v&&D.$raise(o("ArgumentError"),"0 can't be coerced into "+t.$class()),(n===v||n==null)&&(n=he>0?o(o("Float"),"INFINITY"):o(o("Float"),"INFINITY")["$-@"]()),Y.$compare(u,n)}function S(){if(t>0&&u>n||t<0&&u<n)return 0;if(t===1/0||t===-1/0)return 1;var he=Math.abs,ve=Math.floor,me=(he(u)+he(n)+he(n-u))/he(t)*o(o("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((n-u)/t+me)+1)}function C(){if(m(),t===0)return 1/0;if(t%1!==0)return S();if(t>0&&u>n||t<0&&u<n)return 0;var he=Math.ceil,ve=Math.abs,me=ve(u-n)+1,be=ve(t);return he(me/be)}if(i===v)return(B(n)||q(n["$is_a?"](o("Numeric"))))&&(B(t)||q(t["$is_a?"](o("Numeric"))))?o(o("Enumerator"),"ArithmeticSequence").$new([n,t,q(r)?"to: ":v,q(s)?"by: ":v],u):U(u,"enum_for",["step",n,t],C.$to_proc());m();var M=t["$negative?"](),J=t["$=="](0)||n===1/0&&!M||n===-1/0&&M;if(u.$$is_number&&t.$$is_number&&n.$$is_number)if(u%1===0&&(J||n%1===0)&&t%1===0){var O=u;if(J)for(;;O+=t)i(O);else if(M)for(;O>=n;O+=t)i(O);else for(;O<=n;O+=t)i(O);return u}else{var ae=u.$to_f().valueOf();t=t.$to_f().valueOf(),n=n.$to_f().valueOf();var le=S();if(!isFinite(t))le!==0&&i(ae);else if(t===0)for(;;)i(ae);else for(var ce=0;ce<le;ce++){var de=ce*t+u;(t>=0?n<de:n>de)&&(de=n),i(de)}return u}for(f=u;q(M?N(f,n):T(f,n));)e.yield1(i,f),f=g(f,t)},-1),A(h,"$to_c",function(){var c=this;return D.$Complex(c,0)}),A(h,"$to_int",function(){var c=this;return c.$to_i()}),A(h,"$truncate",function(c){var X=this;return c==null&&(c=0),X.$to_f().$truncate(c)},-1),A(h,"$zero?",function(){var c=this;return c["$=="](0)}),A(h,"$positive?",function(){var c=this;return w(c,0)}),A(h,"$negative?",function(){var c=this;return p(c,0)}),A(h,"$dup",W),A(h,"$clone",function(c){var X=this;return c=x(c),P(c,"freeze"),X},-1),A(h,"$finite?",K(!0)),A(h,"$infinite?",K(v)),j(h,"arg","angle"),j(h,"conjugate","conj"),j(h,"imaginary","imag"),j(h,"magnitude","abs"),j(h,"modulo","%"),j(h,"phase","arg"),j(h,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(e){var z=e.truthy,q=e.falsy,D=e.yield1,A=e.hash_get,ee=e.hash_put,W=e.hash_delete,R=e.coerce_to,Z=e.respond_to,p=e.deny_frozen_access,H=e.freeze,$e=e.opal32_init,K=e.opal32_add,Y=e.klass,te=e.slice,F=e.defs,x=e.Kernel,P=e.def,B=e.Opal,U=e.eqeqeq,N=e.send2,T=e.find_super,g=e.send,w=e.rb_gt,j=e.rb_times,E=e.eqeq,v=e.rb_minus,o=e.to_a,d=e.to_ary,k=e.gvars,h=e.rb_ge,l=e.assign_ivar,c=e.rb_lt,X=e.return_self,y=e.neqeq,i=e.alias,a=e.top,$=[],n=e.nil,t=e.$$$;return e.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),a.$require("corelib/enumerable"),a.$require("corelib/numeric"),function(r,s,u){var f=Y(r,s,"Array"),m=[f].concat(u),S=e.$r(m);f.$include(t("Enumerable")),e.prop(f.$$prototype,"$$is_array",!0);function C(ie){for(var I=ie[0],L=1,V=ie.length;L<V;L++)ie[L-1]=ie[L];return ie.pop(),I}function M(ie,I){return I.$$name===e.Array?ie:I.$allocate().$replace(ie.$to_a())}function J(ie,I,L){for(var V,Q=null,ne=new Array(ie.length),se=0,oe=0;se<ie.length;se++){if(!Q)try{V=D(L,ie[se])}catch(fe){Q=fe}(Q||I(V))&&(ne[oe]=ie[se],oe+=1)}if(oe!==se&&(ie.splice.apply(ie,[0,ne.length].concat(ne)),ie.splice(oe,ne.length)),Q)throw Q}function O(ie){return ie.$$is_array||(ie=R(ie,t("Array"),"to_ary")),ie.$to_a()}function ae(ie,I){var L=I.length;if(L>6&&L<32767)ie.push.apply(ie,I);else for(var V=0;V<L;V++)ie.push(I[V])}F(f,"$[]",function(I){var L,V,Q=this;return L=te(arguments),V=L,M(V,Q)},-1),P(f,"$initialize",function ie(I,L){var V=ie.$$p||n,Q=this;if(ie.$$p=null,I==null&&(I=n),L==null&&(L=n),p(Q),L!==n&&V!==n&&x.$warn("warning: block supersedes default value argument"),I>t(t("Integer"),"MAX")&&x.$raise(t("ArgumentError"),"array size too big"),arguments.length>2&&x.$raise(t("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return Q.length>0&&Q.splice(0,Q.length),Q;if(arguments.length===1){if(I.$$is_array)return Q.$replace(I.$to_a()),Q;if(I["$respond_to?"]("to_ary"))return Q.$replace(I.$to_ary()),Q}I=R(I,t("Integer"),"to_int"),I<0&&x.$raise(t("ArgumentError"),"negative array size"),Q.splice(0,Q.length);var ne,se;if(V===n)for(ne=0;ne<I;ne++)Q.push(L);else for(ne=0,se;ne<I;ne++)se=V(ne),Q[ne]=se;return Q},-1),F(f,"$try_convert",function(I){return B["$coerce_to?"](I,t("Array"),"to_ary")}),P(f,"$&",function(I){var L=this;if(I=O(I),L.length===0||I.length===0)return[];var V=[],Q=new Map,ne,se,oe;for(ne=0,se=I.length;ne<se;ne++)ee(Q,I[ne],!0);for(ne=0,se=L.length;ne<se;ne++)oe=L[ne],W(Q,oe)!==void 0&&V.push(oe);return V}),P(f,"$|",function(I){var L=this;I=O(I);var V=new Map,Q,ne;for(Q=0,ne=L.length;Q<ne;Q++)ee(V,L[Q],!0);for(Q=0,ne=I.length;Q<ne;Q++)ee(V,I[Q],!0);return V.$keys()}),P(f,"$*",function(I){var L=this;if(z(I["$respond_to?"]("to_str")))return L.$join(I.$to_str());I=R(I,t("Integer"),"to_int"),z(I<0)&&x.$raise(t("ArgumentError"),"negative argument");for(var V=[],Q=L.$to_a(),ne=0;ne<I;ne++)V=V.concat(Q);return V}),P(f,"$+",function(I){var L=this;return I=O(I),L.concat(I)}),P(f,"$-",function(I){var L=this;if(I=O(I),z(L.length===0))return[];if(z(I.length===0))return L.slice();var V=[],Q=new Map,ne,se,oe;for(ne=0,se=I.length;ne<se;ne++)ee(Q,I[ne],!0);for(ne=0,se=L.length;ne<se;ne++)oe=L[ne],A(Q,oe)===void 0&&V.push(oe);return V}),P(f,"$<<",function(I){var L=this;return p(L),L.push(I),L}),P(f,"$<=>",function(I){var L=this;if(U(t("Array"),I))I=I.$to_a();else if(z(I["$respond_to?"]("to_ary")))I=I.$to_ary().$to_a();else return n;if(L===I)return 0;for(var V=Math.min(L.length,I.length),Q=0;Q<V;Q++){var ne=L[Q]["$<=>"](I[Q]);if(ne!==0)return ne}return L.length["$<=>"](I.length)}),P(f,"$==",function(I){var L=this,V={};function Q(ne,se){var oe,fe,_,b;if(ne===se)return!0;if(!se.$$is_array)return Z(se,"$to_ary")?se["$=="](ne):!1;if(ne.$$constructor!==Array&&(ne=ne.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),ne.length!==se.length)return!1;for(V[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(_=ne[oe],b=se[oe],_.$$is_array){if(b.$$is_array&&b.length!==_.length||!V.hasOwnProperty(_.$object_id())&&!Q(_,b))return!1}else if(!_["$=="](b))return!1;return!0}return Q(L,I)});function le(ie,I){var L=ie.length,V,Q,ne,se;return V=I.excl,Q=I.begin===n?0:R(I.begin,e.Integer,"to_int"),ne=I.end===n?-1:R(I.end,e.Integer,"to_int"),Q<0&&(Q+=L,Q<0)||(I.excl_rev&&I.begin!==n&&(Q+=1),Q>L)?n:ne<0&&(ne+=L,ne<0)?[]:((!V||I.end===n)&&(ne+=1),se=ie.slice(Q,ne),se)}function ce(ie,I){var L,V=[],Q=0,ne;for(I.step<0?(ne={begin:I.range.end,end:I.range.begin,excl:!1,excl_rev:I.range.excl},L=le(ie,ne).$reverse()):L=le(ie,I.range);Q<L.length;)V.push(L[Q]),Q+=Math.abs(I.step);return V}function de(ie,I,L){var V=ie.length,Q;return I=R(I,e.Integer,"to_int"),I<0&&(I+=V,I<0)?n:L===void 0?I>=V||I<0?n:ie[I]:(L=R(L,e.Integer,"to_int"),L<0||I>V||I<0?n:(Q=ie.slice(I,I+L),Q))}P(f,"$[]",function(I,L){var V=this;return I.$$is_range?le(V,I):I.$$is_arithmetic_seq?ce(V,I):de(V,I,L)},-2),P(f,"$[]=",function(I,L,V){var Q=this,ne=n,se=n;p(Q),ne=n;var oe,fe=Q.length;if(I.$$is_range){L.$$is_array?ne=L.$to_a():L["$respond_to?"]("to_ary")?ne=L.$to_ary().$to_a():ne=[L];var _=I.excl,b=I.begin===n?0:R(I.begin,e.Integer,"to_int"),G=I.end===n?-1:R(I.end,e.Integer,"to_int");if(b<0&&(b+=fe,b<0&&x.$raise(t("RangeError"),""+I.$inspect()+" out of range")),G<0&&(G+=fe),(!_||I.end===n)&&(G+=1),b>fe)for(oe=fe;oe<b;oe++)Q[oe]=n;return G<0?Q.splice.apply(Q,[b,0].concat(ne)):Q.splice.apply(Q,[b,G-b].concat(ne)),L}else{V===void 0?se=1:(se=L,L=V,L.$$is_array?ne=L.$to_a():L["$respond_to?"]("to_ary")?ne=L.$to_ary().$to_a():ne=[L]);var re;if(I=R(I,t("Integer"),"to_int"),se=R(se,t("Integer"),"to_int"),I<0&&(re=I,I+=fe,I<0&&x.$raise(t("IndexError"),"index "+re+" too small for array; minimum "+-Q.length)),se<0&&x.$raise(t("IndexError"),"negative length ("+se+")"),I>fe)for(oe=fe;oe<I;oe++)Q[oe]=n;return V===void 0?Q[I]=L:Q.splice.apply(Q,[I,se].concat(ne)),L}},-3),P(f,"$any?",function ie(I){var L=ie.$$p||n,V=this;return ie.$$p=null,V.length===0?!1:N(V,T(V,"any?",ie,!1,!0),"any?",[I],L)},-1),P(f,"$assoc",function(I){for(var L=this,V=0,Q=L.length,ne;V<Q;V++)if(ne=L[V],ne.length&&ne[0]["$=="](I))return ne;return n}),P(f,"$at",function(I){var L=this;return I=R(I,t("Integer"),"to_int"),I<0&&(I+=L.length),I<0||I>=L.length?n:L[I]}),P(f,"$bsearch_index",function ie(){var I=ie.$$p||n,L=this;if(ie.$$p=null,I===n)return L.$enum_for("bsearch_index");for(var V=0,Q=L.length,ne,se,oe,fe=!1,_=n;V<Q;){if(ne=V+Math.floor((Q-V)/2),se=L[ne],oe=D(I,se),oe===!0)_=ne,fe=!0;else if(oe===!1||oe===n)fe=!1;else if(oe.$$is_number){if(oe===0)return ne;fe=oe<0}else x.$raise(t("TypeError"),"wrong argument type "+oe.$class()+" (must be numeric, true, false or nil)");fe?Q=ne:V=ne+1}return _}),P(f,"$bsearch",function ie(){var I=ie.$$p||n,L=this,V=n;return ie.$$p=null,I===n?L.$enum_for("bsearch"):(V=g(L,"bsearch_index",[],I.$to_proc()),V!=null&&V.$$is_number?L[V]:V)}),P(f,"$cycle",function ie(I){var L=ie.$$p||n,V=this;if(ie.$$p=null,I==null&&(I=n),L===n)return g(V,"enum_for",["cycle",I],function se(){var oe=se.$$s==null?this:se.$$s;return z(I["$nil?"]())?t(t("Float"),"INFINITY"):(I=B["$coerce_to!"](I,t("Integer"),"to_int"),z(w(I,0))?j(oe.$enumerator_size(),I):0)},{$$s:V});if(z(V["$empty?"]())||E(I,0))return n;var Q,ne;if(I===n)for(;;)for(Q=0,ne=V.length;Q<ne;Q++)D(L,V[Q]);else{if(I=B["$coerce_to!"](I,t("Integer"),"to_int"),I<=0)return V;for(;I>0;){for(Q=0,ne=V.length;Q<ne;Q++)D(L,V[Q]);I--}}return V},-1),P(f,"$clear",function(){var I=this;return p(I),I.splice(0,I.length),I}),P(f,"$count",function ie(I){var L=ie.$$p||n,V=this;return ie.$$p=null,z(I!==void 0)||z(L)?N(V,T(V,"count",ie,!1,!0),"count",[I],L):V.$size()},-1),P(f,"$initialize_copy",function(I){var L=this;return L.$replace(I)}),P(f,"$collect",function ie(){var I=ie.$$p||n,L=this;if(ie.$$p=null,I===n)return g(L,"enum_for",["collect"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:L});for(var V=[],Q=0;Q<L.length;Q++){var ne=D(I,L[Q]);V[Q]=ne}return V}),P(f,"$collect!",function ie(){var I=ie.$$p||n,L=this;if(ie.$$p=null,I===n)return g(L,"enum_for",["collect!"],function ne(){var se=ne.$$s==null?this:ne.$$s;return se.$size()},{$$s:L});p(L);for(var V=0;V<L.length;V++){var Q=D(I,L[V]);L[V]=Q}return L});function he(ie,I){return ie===I||I===0?1:I>0&&ie>I?he(ie-1,I-1)+he(ie-1,I):0}P(f,"$combination",function ie(I){var L=ie.$$p||n,V=this,Q=n;if(ie.$$p=null,Q=B["$coerce_to!"](I,t("Integer"),"to_int"),L===n)return g(V,"enum_for",["combination",Q],function re(){var ue=re.$$s==null?this:re.$$s;return he(ue.length,Q)},{$$s:V});var ne,se,oe,fe,_,b,G;if(Q===0)e.yield1(L,[]);else if(Q===1)for(ne=0,se=V.length;ne<se;ne++)e.yield1(L,[V[ne]]);else if(Q===V.length)e.yield1(L,V.slice());else if(Q>=0&&Q<V.length){for(oe=[],ne=0;ne<=Q+1;ne++)oe.push(0);for(fe=[],_=0,b=!1,oe[0]=-1;!b;){for(fe[_]=V[oe[_+1]];_<Q-1;)_++,G=oe[_+1]=oe[_]+1,fe[_]=V[G];e.yield1(L,fe.slice()),_++;do b=_===0,oe[_]++,_--;while(oe[_+1]+Q===V.length+_+1)}}return V}),P(f,"$repeated_combination",function ie(I){var L=ie.$$p||n,V=this,Q=n;if(ie.$$p=null,Q=B["$coerce_to!"](I,t("Integer"),"to_int"),L===n)return g(V,"enum_for",["repeated_combination",Q],function se(){var oe=se.$$s==null?this:se.$$s;return he(oe.length+Q-1,Q)},{$$s:V});function ne(se,oe,fe,_){if(fe.length==se){var b=fe.slice();e.yield1(L,b);return}for(var G=oe;G<_.length;G++)fe.push(_[G]),ne(se,G,fe,_),fe.pop()}return Q>=0&&ne(Q,0,[],V),V}),P(f,"$compact",function(){for(var I=this,L=[],V=0,Q=I.length,ne;V<Q;V++)(ne=I[V])!==n&&L.push(ne);return L}),P(f,"$compact!",function(){var I=this;p(I);for(var L=I.length,V=0,Q=I.length;V<Q;V++)I[V]===n&&(I.splice(V,1),Q--,V--);return I.length===L?n:I}),P(f,"$concat",function(I){var L,V,Q=this;return L=te(arguments),V=L,p(Q),V=g(V,"map",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;return se==null&&(se=n),se=O(se),z(se["$equal?"](oe))&&(se=se.$dup()),se},{$$s:Q}),g(V,"each",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;se==null&&(se=n);for(var fe=0,_=se.length;fe<_;fe++)oe.push(se[fe])},{$$s:Q}),Q},-1),P(f,"$delete",function ie(I){var L=ie.$$p||n,V=this;ie.$$p=null;for(var Q=V.length,ne=0,se=Q;ne<se;ne++)V[ne]["$=="](I)&&(p(V),V.splice(ne,1),se--,ne--);return V.length===Q?L!==n?e.yieldX(L,[]):n:I}),P(f,"$delete_at",function(I){var L=this;if(p(L),I=R(I,t("Integer"),"to_int"),I<0&&(I+=L.length),I<0||I>=L.length)return n;var V=L[I];return L.splice(I,1),V}),P(f,"$delete_if",function ie(){var I=ie.$$p||n,L=this;return ie.$$p=null,I===n?g(L,"enum_for",["delete_if"],function V(){var Q=V.$$s==null?this:V.$$s;return Q.$size()},{$$s:L}):(p(L),J(L,q,I),L)}),P(f,"$difference",function(I){var L,V,Q=this;return L=te(arguments),V=L,g(V,"reduce",[Q.$to_a().$dup()],function(se,oe){return se==null&&(se=n),oe==null&&(oe=n),v(se,oe)})},-1),P(f,"$dig",function(I,L){var V,Q,ne=this,se=n;return V=te(arguments,1),Q=V,se=ne["$[]"](I),se===n||Q.length===0?se:(z(se["$respond_to?"]("dig"))||x.$raise(t("TypeError"),""+se.$class()+" does not have #dig method"),g(se,"dig",o(Q)))},-2),P(f,"$drop",function(I){var L=this;return I=R(I,t("Integer"),"to_int"),I<0&&x.$raise(t("ArgumentError")),L.slice(I)}),P(f,"$dup",function ie(){var I=ie.$$p||n,L=this;return ie.$$p=null,L.$$class===e.Array&&L.$$class.$allocate.$$pristine&&L.$copy_instance_variables.$$pristine&&L.$initialize_dup.$$pristine?L.slice(0):N(L,T(L,"dup",ie,!1,!0),"dup",[],I)}),P(f,"$each",function ie(){var I=ie.$$p||n,L=this;if(ie.$$p=null,I===n)return g(L,"enum_for",["each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:L});for(var V=0;V<L.length;V++)D(I,L[V]);return L}),P(f,"$each_index",function ie(){var I=ie.$$p||n,L=this;if(ie.$$p=null,I===n)return g(L,"enum_for",["each_index"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:L});for(var V=0;V<L.length;V++)D(I,V);return L}),P(f,"$empty?",function(){var I=this;return I.length===0}),P(f,"$eql?",function(I){var L=this,V={};function Q(ne,se){var oe,fe,_,b;if(!se.$$is_array||(se=se.$to_a(),ne.length!==se.length))return!1;for(V[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(_=ne[oe],b=se[oe],_.$$is_array){if(b.$$is_array&&b.length!==_.length||!V.hasOwnProperty(_.$object_id())&&!Q(_,b))return!1}else if(!_["$eql?"](b))return!1;return!0}return Q(L,I)}),P(f,"$fetch",function ie(I,L){var V=ie.$$p||n,Q=this;ie.$$p=null;var ne=I;if(I=R(I,t("Integer"),"to_int"),I<0&&(I+=Q.length),I>=0&&I<Q.length)return Q[I];if(V!==n&&L!=null&&Q.$warn("warning: block supersedes default value argument"),V!==n)return V(ne);if(L!=null)return L;Q.length===0?x.$raise(t("IndexError"),"index "+ne+" outside of array bounds: 0...0"):x.$raise(t("IndexError"),"index "+ne+" outside of array bounds: -"+Q.length+"..."+Q.length)},-2),P(f,"$fill",function ie(I){var L=ie.$$p||n,V,Q,ne,se,oe=this,fe=n,_=n,b=n,G=n,re=n;ie.$$p=null,V=te(arguments),Q=V,p(oe);var ue,_e;if(z(L)?(z(Q.length>2)&&x.$raise(t("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 0..2)"),se=Q,ne=d(se),fe=ne[0]==null?n:ne[0],_=ne[1]==null?n:ne[1]):(z(Q.length==0)?x.$raise(t("ArgumentError"),"wrong number of arguments (0 for 1..3)"):z(Q.length>3)&&x.$raise(t("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 1..3)"),se=Q,ne=d(se),b=ne[0]==null?n:ne[0],fe=ne[1]==null?n:ne[1],_=ne[2]==null?n:ne[2]),U(t("Range"),fe)){if(z(_)&&x.$raise(t("TypeError"),"length invalid with range"),G=fe.begin===n?0:R(fe.begin,t("Integer"),"to_int"),z(G<0)&&(G+=this.length),z(G<0)&&x.$raise(t("RangeError"),""+fe.$inspect()+" out of range"),re=fe.end===n?-1:R(fe.end,t("Integer"),"to_int"),z(re<0)&&(re+=this.length),z(fe["$exclude_end?"]())||(re+=1),z(re<=G))return oe}else if(z(fe))if(G=R(fe,t("Integer"),"to_int"),z(G<0)&&(G+=this.length),z(G<0)&&(G=0),z(_)){if(re=R(_,t("Integer"),"to_int"),z(re==0))return oe;re+=G}else re=this.length;else G=0,re=this.length;if(z(G>this.length))for(ue=this.length;ue<re;ue++)oe[ue]=n;if(z(re>this.length)&&(this.length=re),z(L))for(this.length;G<re;G++)_e=L(G),oe[G]=_e;else for(this.length;G<re;G++)oe[G]=b;return oe},-1),P(f,"$first",function(I){var L=this;return I==null?L.length===0?n:L[0]:(I=R(I,t("Integer"),"to_int"),I<0&&x.$raise(t("ArgumentError"),"negative array size"),L.slice(0,I))},-1),P(f,"$flatten",function(I){var L=this;function V(Q,ne){var se=[],oe,fe,_,b;for(Q=Q.$to_a(),oe=0,fe=Q.length;oe<fe;oe++){if(_=Q[oe],!Z(_,"$to_ary",!0)){se.push(_);continue}if(b=_.$to_ary(),b===n){se.push(_);continue}switch(b.$$is_array||x.$raise(t("TypeError")),b===L&&x.$raise(t("ArgumentError")),ne){case void 0:se=se.concat(V(b));break;case 0:se.push(b);break;default:ae(se,V(b,ne-1))}}return se}return I!==void 0&&(I=R(I,t("Integer"),"to_int")),V(L,I)},-1),P(f,"$flatten!",function(I){var L=this;p(L);var V=L.$flatten(I);if(L.length==V.length){for(var Q=0,ne=L.length;Q<ne&&L[Q]===V[Q];Q++);if(Q==ne)return n}return L.$replace(V),L},-1),P(f,"$freeze",function(){var I=this;return z(I["$frozen?"]())?I:H(I)});var ve;P(f,"$hash",function(){var I=this,L=ve===void 0,V=$e(),Q=I.$object_id(),ne,se,oe;if(V=K(V,10),V=K(V,I.length),L)ve=Object.create(null);else if(ve[Q])return K(V,16843009);try{for(oe in ve)if(ne=ve[oe],I["$eql?"](ne))return K(V,16843009);for(ve[Q]=I,se=0;se<I.length;se++)ne=I[se],V=K(V,ne.$hash());return V}finally{L&&(ve=void 0)}}),P(f,"$include?",function(I){for(var L=this,V=0,Q=L.length;V<Q;V++)if(L[V]["$=="](I))return!0;return!1}),P(f,"$index",function ie(I){var L=ie.$$p||n,V=this;ie.$$p=null;var Q,ne,se;if(I!=null&&L!==n&&V.$warn("warning: given block not used"),I!=null){for(Q=0,ne=V.length;Q<ne;Q++)if(V[Q]["$=="](I))return Q}else if(L!==n){for(Q=0;Q<V.length;Q++)if(se=L(V[Q]),se!==!1&&se!==n)return Q}else return V.$enum_for("index");return n},-1),P(f,"$insert",function(I,L){var V,Q,ne=this;if(V=te(arguments,1),Q=V,p(ne),I=R(I,t("Integer"),"to_int"),Q.length>0){if(I<0&&(I+=ne.length+1,I<0&&x.$raise(t("IndexError"),""+I+" is out of bounds")),I>ne.length)for(var se=ne.length;se<I;se++)ne.push(n);ne.splice.apply(ne,[I,0].concat(Q))}return ne},-2);var me=[];P(f,"$inspect",function(){var I=this,L=[],V=I.$__id__(),Q=!0;return function(){try{if(me.indexOf(V)!==-1)return Q=!1,"[...]";me.push(V);for(var ne=0,se=I.length;ne<se;ne++){var oe=I["$[]"](ne);L.push(S("Opal").$inspect(oe))}return"["+L.join(", ")+"]"}finally{Q&&me.pop()}}()}),P(f,"$intersection",function(I){var L,V,Q=this,ne=n,se=n;return L=te(arguments),V=L,V.length===0?Q.$to_a().$dup():(V=V.map(O),Q.length===0?[]:(V=g(V,"sort_by",[],"length".$to_proc()),z(Q.length<V[0].length)?g(V,"reduce",[Q],"&".$to_proc()):(ne=V.pop(),se=g(V,"reduce",[ne],"&".$to_proc()),Q["$&"](se))))},-1),P(f,"$intersect?",function(I){var L=this,V,Q,ne=new Map,se,oe;for(L.length<I.length?(V=L,Q=I):(V=I,Q=L),se=0,oe=V.length;se<oe;se++)ee(ne,V[se],!0);for(se=0,oe=Q.length;se<oe;se++)if(A(ne,Q[se]))return!0;return!1}),P(f,"$join",function(I){var L=this;if(k[","]==null&&(k[","]=n),I==null&&(I=n),z(L.length===0))return"";z(I===n)&&(I=k[","]);var V=[],Q,ne,se,oe;for(Q=0,ne=L.length;Q<ne;Q++){if(se=L[Q],Z(se,"$to_str")&&(oe=se.$to_str(),oe!==n)){V.push(oe.$to_s());continue}if(Z(se,"$to_ary")&&(oe=se.$to_ary(),oe===L&&x.$raise(t("ArgumentError")),oe!==n)){V.push(oe.$join(I));continue}if(Z(se,"$to_s")&&(oe=se.$to_s(),oe!==n)){V.push(oe);continue}x.$raise(t("NoMethodError").$new(""+S("Opal").$inspect(L.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return I===n?V.join(""):V.join(B["$coerce_to!"](I,t("String"),"to_str").$to_s())},-1),P(f,"$keep_if",function ie(){var I=ie.$$p||n,L=this;return ie.$$p=null,I===n?g(L,"enum_for",["keep_if"],function V(){var Q=V.$$s==null?this:V.$$s;return Q.$size()},{$$s:L}):(p(L),J(L,z,I),L)}),P(f,"$last",function(I){var L=this;return I==null?L.length===0?n:L[L.length-1]:(I=R(I,t("Integer"),"to_int"),I<0&&x.$raise(t("ArgumentError"),"negative array size"),I>L.length&&(I=L.length),L.slice(L.length-I,L.length))},-1),P(f,"$length",function(){var I=this;return I.length}),P(f,"$max",function ie(I){var L=ie.$$p||n,V=this;return ie.$$p=null,g(V.$each(),"max",[I],L.$to_proc())},-1),P(f,"$min",function ie(){var I=ie.$$p||n,L=this;return ie.$$p=null,g(L.$each(),"min",[],I.$to_proc())});function be(ie,I){for(var L=I>=0?1:0;I;)L*=ie,ie--,I--;return L}return P(f,"$permutation",function ie(I){var L=ie.$$p||n,V=this,Q=n,ne=n;if(ie.$$p=null,L===n)return g(V,"enum_for",["permutation",I],function b(){var G=b.$$s==null?this:b.$$s;return be(G.length,I===void 0?G.length:I)},{$$s:V});var se,oe,fe;if(I===void 0?I=V.length:I=R(I,t("Integer"),"to_int"),!(I<0||V.length<I))if(I===0)e.yield1(L,[]);else if(I===1)for(var _=0;_<V.length;_++)e.yield1(L,[V[_]]);else Q=S("Array").$new(I),ne=S("Array").$new(V.length,!1),se=function(b,G,re,ue,_e){V=this;for(var ge=0;ge<V.length;ge++)if(ue["$[]"](ge)["$!"]())if(G[re]=ge,re<b-1)ue[ge]=!0,se.call(V,b,G,re+1,ue,_e),ue[ge]=!1;else{fe=[];for(var pe=0;pe<G.length;pe++)fe.push(V[G[pe]]);D(_e,fe)}},L!==n?(oe=V.slice(),se.call(oe,I,Q,0,ne,L)):se.call(V,I,Q,0,ne,L);return V},-1),P(f,"$repeated_permutation",function ie(I){var L=ie.$$p||n,V=this,Q=n;if(ie.$$p=null,Q=B["$coerce_to!"](I,t("Integer"),"to_int"),L===n)return g(V,"enum_for",["repeated_permutation",Q],function se(){var oe=se.$$s==null?this:se.$$s;return z(h(Q,0))?oe.$size()["$**"](Q):0},{$$s:V});function ne(se,oe,fe){if(oe.length==se){var _=oe.slice();e.yield1(L,_);return}for(var b=0;b<fe.length;b++)oe.push(fe[b]),ne(se,oe,fe),oe.pop()}return ne(Q,[],V.slice()),V}),P(f,"$pop",function(I){var L=this;return p(L),z(I===void 0)?z(L.length===0)?n:L.pop():(I=R(I,t("Integer"),"to_int"),z(I<0)&&x.$raise(t("ArgumentError"),"negative array size"),z(L.length===0)?[]:z(I===1)?[L.pop()]:z(I>L.length)?L.splice(0,L.length):L.splice(L.length-I,L.length))},-1),P(f,"$product",function ie(I){var L=ie.$$p||n,V,Q,ne=this;ie.$$p=null,V=te(arguments),Q=V;var se=L!==n?null:[],oe=Q.length+1,fe=new Array(oe),_=new Array(oe),b=new Array(oe),G,re,ue,_e,ge=1;for(b[0]=ne,G=1;G<oe;G++)b[G]=R(Q[G-1],t("Array"),"to_ary");for(G=0;G<oe;G++){if(_e=b[G].length,_e===0)return se||ne;ge*=_e,ge>2147483647&&x.$raise(t("RangeError"),"too big to product"),_[G]=_e,fe[G]=0}e:for(;;){for(ue=[],G=0;G<oe;G++)ue.push(b[G][fe[G]]);for(se?se.push(ue):e.yield1(L,ue),re=oe-1,fe[re]++;fe[re]===_[re];){if(fe[re]=0,--re<0)break e;fe[re]++}}return se||ne},-1),P(f,"$push",function(I){var L,V,Q=this;return L=te(arguments),V=L,p(Q),ae(Q,V),Q},-1),P(f,"$rassoc",function(I){for(var L=this,V=0,Q=L.length,ne;V<Q;V++)if(ne=L[V],ne.length&&ne[1]!==void 0&&ne[1]["$=="](I))return ne;return n}),P(f,"$reject",function ie(){var I=ie.$$p||n,L=this;if(ie.$$p=null,I===n)return g(L,"enum_for",["reject"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:L});for(var V=[],Q=0,ne;Q<L.length;Q++)ne=I(L[Q]),(ne===!1||ne===n)&&V.push(L[Q]);return V}),P(f,"$reject!",function ie(){var I=ie.$$p||n,L=this,V=n;return ie.$$p=null,I===n?g(L,"enum_for",["reject!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:L}):(p(L),V=L.$length(),g(L,"delete_if",[],I.$to_proc()),E(L.$length(),V)?n:L)}),P(f,"$replace",function(I){var L=this;return p(L),I=O(I),L.length>0&&L.splice(0,L.length),ae(L,I),L}),P(f,"$reverse",function(){var I=this;return I.slice(0).reverse()}),P(f,"$reverse!",function(){var I=this;return p(I),I.reverse()}),P(f,"$reverse_each",function ie(){var I=ie.$$p||n,L=this;if(ie.$$p=null,I===n)return g(L,"enum_for",["reverse_each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:L});for(var V=L.length-1;V>=0;V--)D(I,L[V]);return L}),P(f,"$rindex",function ie(I){var L=ie.$$p||n,V=this;ie.$$p=null;var Q,ne;if(I!=null&&L!==n&&V.$warn("warning: given block not used"),I!=null){for(Q=V.length-1;Q>=0&&!(Q>=V.length);Q--)if(V[Q]["$=="](I))return Q}else if(L!==n){for(Q=V.length-1;Q>=0&&!(Q>=V.length);Q--)if(ne=L(V[Q]),ne!==!1&&ne!==n)return Q}else if(I==null)return V.$enum_for("rindex");return n},-1),P(f,"$rotate",function(I){var L=this;I==null&&(I=1);var V,Q,ne,se;return I=R(I,t("Integer"),"to_int"),L.length===1?L.slice():L.length===0?[]:(V=L.slice(),Q=I%V.length,ne=V.slice(Q),se=V.slice(0,Q),ne.concat(se))},-1),P(f,"$rotate!",function(I){var L=this,V=n;return I==null&&(I=1),p(L),L.length===0||L.length===1?L:(I=R(I,t("Integer"),"to_int"),V=L.$rotate(I),L.$replace(V))},-1),function(ie,I){var L=Y(ie,I,"SampleRandom"),V=L.$$prototype;return V.rng=n,P(L,"$initialize",l("rng")),P(L,"$rand",function(ne){var se=this,oe=n;return oe=R(se.rng.$rand(ne),t("Integer"),"to_int"),z(oe<0)&&x.$raise(t("RangeError"),"random value must be >= 0"),z(oe<ne)||x.$raise(t("RangeError"),"random value must be less than Array size"),oe})}(f,null),P(f,"$sample",function(I,L){var V=this,Q=n,ne=n;if(z(I===void 0))return V.$at(x.$rand(V.length));if(z(L===void 0)?z(Q=B["$coerce_to?"](I,t("Hash"),"to_hash"))?(L=Q,I=n):(L=n,I=R(I,t("Integer"),"to_int")):(I=R(I,t("Integer"),"to_int"),L=R(L,t("Hash"),"to_hash")),z(I)&&z(I<0)&&x.$raise(t("ArgumentError"),"count must be greater than 0"),z(L)&&(ne=L["$[]"]("random")),ne=z(ne)&&z(ne["$respond_to?"]("rand"))?S("SampleRandom").$new(ne):x,!z(I))return V[ne.$rand(V.length)];var se,oe,fe,_,b,G,re,ue;switch(I>V.length&&(I=V.length),I){case 0:return[];case 1:return[V[ne.$rand(V.length)]];case 2:return _=ne.$rand(V.length),b=ne.$rand(V.length-1),_<=b&&b++,[V[_],V[b]];default:if(V.length/I>3){for(se=!1,oe=0,fe=S("Array").$new(I),_=1,fe[0]=ne.$rand(V.length);_<I;){for(G=ne.$rand(V.length),b=0;b<_;){for(;G===fe[b];){if(oe++,oe>100){se=!0;break}G=ne.$rand(V.length)}if(se)break;b++}if(se)break;fe[_]=G,_++}if(!se){for(_=0;_<I;)fe[_]=V[fe[_]],_++;return fe}}fe=V.slice();for(var _e=0;_e<I;_e++)re=ne.$rand(V.length-_e)+_e,ue=fe[_e],fe[_e]=fe[re],fe[re]=ue;return I===V.length?fe:fe["$[]"](0,I)}},-1),P(f,"$select",function ie(){var I=ie.$$p||n,L=this;if(ie.$$p=null,I===n)return g(L,"enum_for",["select"],function oe(){var fe=oe.$$s==null?this:oe.$$s;return fe.$size()},{$$s:L});for(var V=[],Q=0,ne,se;Q<L.length;Q++)ne=L[Q],se=D(I,ne),z(se)&&V.push(ne);return V}),P(f,"$select!",function ie(){var I=ie.$$p||n,L=this;if(ie.$$p=null,I===n)return g(L,"enum_for",["select!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:L});p(L);var V=L.length;return g(L,"keep_if",[],I.$to_proc()),L.length===V?n:L}),P(f,"$shift",function(I){var L=this;return p(L),z(I===void 0)?z(L.length===0)?n:C(L):(I=R(I,t("Integer"),"to_int"),z(I<0)&&x.$raise(t("ArgumentError"),"negative array size"),z(L.length===0)?[]:L.splice(0,I))},-1),P(f,"$shuffle",function(I){var L=this;return L.$dup().$to_a()["$shuffle!"](I)},-1),P(f,"$shuffle!",function(I){var L=this;p(L);var V,Q=L.length,ne,se;for(I!==void 0&&(I=B["$coerce_to?"](I,t("Hash"),"to_hash"),I!==n&&(I=I["$[]"]("random"),I!==n&&I["$respond_to?"]("rand")&&(V=I)));Q;)V?(ne=V.$rand(Q).$to_int(),ne<0&&x.$raise(t("RangeError"),"random number too small "+ne),ne>=Q&&x.$raise(t("RangeError"),"random number too big "+ne)):ne=L.$rand(Q),se=L[--Q],L[Q]=L[ne],L[ne]=se;return L},-1),P(f,"$slice!",function(I,L){var V=this,Q=n,ne=n,se=n,oe=n,fe=n;if(p(V),Q=n,z(L===void 0))if(U(t("Range"),I)){ne=I,Q=V["$[]"](ne),se=ne.begin===n?0:R(ne.begin,t("Integer"),"to_int"),oe=ne.end===n?-1:R(ne.end,t("Integer"),"to_int"),se<0&&(se+=V.length),oe<0?oe+=V.length:oe>=V.length&&(oe=V.length-1,ne.excl&&(oe+=1));var _=oe-se;ne.excl&&ne.end!==n?oe-=1:_+=1,se<V.length&&se>=0&&oe<V.length&&oe>=0&&_>0&&V.splice(se,_)}else{if(fe=R(I,t("Integer"),"to_int"),fe<0&&(fe+=V.length),fe<0||fe>=V.length)return n;Q=V[fe],fe===0?V.shift():V.splice(fe,1)}else{if(fe=R(I,t("Integer"),"to_int"),L=R(L,t("Integer"),"to_int"),L<0)return n;Q=V["$[]"](fe,L),fe<0&&(fe+=V.length),fe+L>V.length&&(L=V.length-fe),fe<V.length&&fe>=0&&V.splice(fe,L)}return Q},-2),P(f,"$sort",function ie(){var I=ie.$$p||n,L=this;return ie.$$p=null,z(L.length>1)?(I===n&&(I=function(V,Q){return V["$<=>"](Q)}),L.slice().sort(function(V,Q){var ne=I(V,Q);return ne===n&&x.$raise(t("ArgumentError"),"comparison of "+V.$inspect()+" with "+Q.$inspect()+" failed"),w(ne,0)?1:c(ne,0)?-1:0})):L}),P(f,"$sort!",function ie(){var I=ie.$$p||n,L=this;ie.$$p=null,p(L);var V;I!==n?V=g(L.slice(),"sort",[],I.$to_proc()):V=L.slice().$sort(),L.length=0;for(var Q=0,ne=V.length;Q<ne;Q++)L.push(V[Q]);return L}),P(f,"$sort_by!",function ie(){var I=ie.$$p||n,L=this;return ie.$$p=null,I===n?g(L,"enum_for",["sort_by!"],function V(){var Q=V.$$s==null?this:V.$$s;return Q.$size()},{$$s:L}):(p(L),L.$replace(g(L,"sort_by",[],I.$to_proc())))}),P(f,"$take",function(I){var L=this;return I<0&&x.$raise(t("ArgumentError")),L.slice(0,I)}),P(f,"$take_while",function ie(){var I=ie.$$p||n,L=this;ie.$$p=null;for(var V=[],Q=0,ne,se;Q<L.length;Q++){if(ne=L[Q],se=I(ne),se===!1||se===n)return V;V.push(ne)}return V}),P(f,"$to_a",function(){var I=this;return I.$$class===e.Array?I:e.Array.$new(I)}),P(f,"$to_ary",X),P(f,"$to_h",function ie(){var I=ie.$$p||n,L=this,V=n;ie.$$p=null,V=L,I!==n&&(V=g(V,"map",[],I.$to_proc()));var Q,ne=V.length,se,oe,fe,_=new Map;for(Q=0;Q<ne;Q++)se=B["$coerce_to?"](V[Q],t("Array"),"to_ary"),se.$$is_array||x.$raise(t("TypeError"),"wrong element type "+V[Q].$class()+" at "+Q+" (expected array)"),se.length!==2&&x.$raise(t("ArgumentError"),"element has wrong array length at "+Q+" (expected 2, was "+se.$length()+")"),oe=se[0],fe=se[1],ee(_,oe,fe);return _}),P(f,"$transpose",function(){var I=this,L=n,V=n;return z(I["$empty?"]())?[]:(L=[],V=n,g(I,"each",[],function(ne){var se=n;return ne==null&&(ne=n),ne=O(ne),V=z(se=V)?se:ne.length,y(ne.length,V)&&x.$raise(t("IndexError"),"element size differs ("+ne.length+" should be "+V+")"),g(ne.length,"times",[],function(fe){var _,b=n;return fe==null&&(fe=n),b=z(se=L["$[]"](fe))?se:(_=[fe,[]],g(L,"[]=",_),_[_.length-1]),b["$<<"](ne.$at(fe))})}),L)}),P(f,"$union",function(I){var L,V,Q=this;return L=te(arguments),V=L,g(V,"reduce",[Q.$uniq()],function(se,oe){return se==null&&(se=n),oe==null&&(oe=n),se["$|"](oe)})},-1),P(f,"$uniq",function ie(){var I=ie.$$p||n,L=this;ie.$$p=null;var V=new Map,Q,ne,se,oe;if(I===n)for(Q=0,ne=L.length;Q<ne;Q++)se=L[Q],A(V,se)===void 0&&ee(V,se,se);else for(Q=0;Q<L.length;Q++)se=L[Q],oe=D(I,se),A(V,oe)===void 0&&ee(V,oe,se);return V.$values()}),P(f,"$uniq!",function ie(){var I=ie.$$p||n,L=this;ie.$$p=null,p(L);var V=new Map,Q,ne,se,oe=[];for(Q=0;Q<L.length;Q++)ne=L[Q],se=I===n?ne:D(I,ne),A(V,se)===void 0?ee(V,se,ne):oe.push(Q);for(Q=oe.length-1;Q>=0;Q--)L.splice(oe[Q],1);return oe.length===0?n:L}),P(f,"$unshift",function(I){var L,V,Q=this;L=te(arguments),V=L,p(Q);var ne=Q.length,se=V.length;if(se==0)return Q;for(var oe=ne-se,fe=0;fe<se;fe++)Q.push(Q[oe+fe]);for(var _=ne-1;_-se>=0;)Q[_]=Q[_-se],_--;for(var b=0;b<se;b++)Q[b]=V[b];return Q},-1),P(f,"$values_at",function(I){var L,V,Q=this,ne=n;return L=te(arguments),V=L,ne=[],g(V,"each",[],function se(oe){var fe=se.$$s==null?this:se.$$s,_=n,b=n,G=n;return oe==null&&(oe=n),z(oe["$is_a?"](t("Range")))?(_=oe.$end()===n?-1:R(oe.$end(),t("Integer"),"to_int"),b=oe.$begin()===n?0:R(oe.$begin(),t("Integer"),"to_int"),b<0?(b=b+fe.length,n):(_<0&&(_=_+fe.length),oe["$exclude_end?"]()&&oe.$end()!==n&&_--,_<b?n:g(b,"upto",[_],function re(ue){var _e=re.$$s==null?this:re.$$s;return ue==null&&(ue=n),ne["$<<"](_e.$at(ue))},{$$s:fe}))):(G=R(oe,t("Integer"),"to_int"),ne["$<<"](fe.$at(G)))},{$$s:Q}),ne},-1),P(f,"$zip",function ie(I){var L=ie.$$p||n,V,Q,ne=this,se=n;ie.$$p=null,V=te(arguments),Q=V;var oe=[],fe=ne.length,_,b,G,re,ue;for(re=0,ue=Q.length;re<ue;re++)if(b=Q[re],!b.$$is_array){if(b.$$is_range||b.$$is_enumerator){Q[re]=b.$take(fe);continue}Q[re]=(z(se=B["$coerce_to?"](b,t("Array"),"to_ary"))?se:B["$coerce_to!"](b,t("Enumerator"),"to_enum","each")).$to_a()}for(G=0;G<fe;G++){for(_=[ne[G]],re=0,ue=Q.length;re<ue;re++)b=Q[re][G],b==null&&(b=n),_[re+1]=b;oe[G]=_}if(L!==n){for(G=0;G<fe;G++)e.yield1(L,oe[G]);return n}return oe},-1),F(f,"$inherited",function(I){I.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),P(f,"$instance_variables",function ie(){var I=ie.$$p||n,L=this;return ie.$$p=null,g(N(L,T(L,"instance_variables",ie,!1,!0),"instance_variables",[],I),"reject",[],function(Q){var ne=n;return Q==null&&(Q=n),z(ne=/^@\d+$/.test(Q))?ne:Q["$=="]("@length")})}),P(f,"$pack",function(I){return te(arguments),x.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),i(f,"append","push"),i(f,"filter","select"),i(f,"filter!","select!"),i(f,"map","collect"),i(f,"map!","collect!"),i(f,"prepend","unshift"),i(f,"size","length"),i(f,"slice","[]"),i(f,"to_s","inspect"),B.$pristine(f.$singleton_class(),"allocate"),B.$pristine(f,"copy_instance_variables","initialize_dup")}("::",Array,$)};Opal.modules["corelib/hash"]=function(e){var z=e.yield1,q=e.hash_clone,D=e.hash_delete,A=e.hash_each,ee=e.hash_get,W=e.hash_put,R=e.deny_frozen_access,Z=e.freeze,p=e.opal32_init,H=e.opal32_add,$e=e.klass,K=e.slice,Y=e.Opal,te=e.Kernel,F=e.defs,x=e.def,P=e.send,B=e.rb_ge,U=e.rb_gt,N=e.truthy,T=e.to_a,g=e.return_self,w=e.not,j=e.alias,E=e.top,v=[],o=e.nil,d=e.$$$;return e.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),E.$require("corelib/enumerable"),function(k,h,l){var c=$e(k,h,"Hash"),X=[c].concat(l),y=e.$r(X);c.$include(d("Enumerable")),c.$$prototype.$$is_hash=!0,F(c,"$[]",function(n){var t,r,s=this;t=K(arguments),r=t;var u,f=r.length,m,S;if(f===1){if(u=Y["$coerce_to?"](r["$[]"](0),d("Hash"),"to_hash"),u!==o)return s.$allocate()["$merge!"](u);for(r=Y["$coerce_to?"](r["$[]"](0),d("Array"),"to_ary"),r===o&&te.$raise(d("ArgumentError"),"odd number of arguments for Hash"),f=r.length,u=s.$allocate(),S=0;S<f;S++)m=r[S],m.$$is_array||te.$raise(d("ArgumentError"),"invalid element "+m.$inspect()+" for Hash"),m.length===1?u.$store(m[0],o):m.length===2?u.$store(m[0],m[1]):te.$raise(d("ArgumentError"),"invalid number of elements ("+m.length+" for "+m.$inspect()+"), must be 1..2");return u}for(f%2!==0&&te.$raise(d("ArgumentError"),"odd number of arguments for Hash"),u=s.$allocate(),S=0;S<f;S+=2)u.$store(r[S],r[S+1]);return u},-1),F(c,"$allocate",function(){var n=this,t=new n.$$constructor;return t.$$none=o,t.$$proc=o,t}),F(c,"$try_convert",function(n){return Y["$coerce_to?"](n,d("Hash"),"to_hash")}),x(c,"$initialize",function $(n){var t=$.$$p||o,r=this;return $.$$p=null,R(r),n!==void 0&&t!==o&&te.$raise(d("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=n===void 0?o:n,r.$$proc=t,r},-1),x(c,"$==",function(n){var t=this;return t===n?!0:!n.$$is_hash||t.size!==n.size?!1:A(t,!0,function(r,s){var u=ee(n,r);return u===void 0||!s["$eql?"](u)?[!0,!1]:[!1,!0]})}),x(c,"$>=",function(n){var t=this,r=o;return n=Y["$coerce_to!"](n,d("Hash"),"to_hash"),t.size<n.size?!1:(r=!0,P(n,"each",[],function s(u,f){var m=s.$$s==null?this:s.$$s,S=o;if(u==null&&(u=o),f==null&&(f=o),S=m.$fetch(u,null),S==null||S!==f){r=!1;return}},{$$s:t}),r)}),x(c,"$>",function(n){var t=this;return n=Y["$coerce_to!"](n,d("Hash"),"to_hash"),t.size<=n.size?!1:B(t,n)}),x(c,"$<",function(n){var t=this;return n=Y["$coerce_to!"](n,d("Hash"),"to_hash"),U(n,t)}),x(c,"$<=",function(n){var t=this;return n=Y["$coerce_to!"](n,d("Hash"),"to_hash"),B(n,t)}),x(c,"$[]",function(n){var t=this,r=ee(t,n);return r!==void 0?r:t.$default(n)}),x(c,"$[]=",function(n,t){var r=this;return R(r),W(r,n,t),t}),x(c,"$assoc",function(n){var t=this;return A(t,o,function(r,s){return r["$=="](n)?[!0,[r,s]]:[!1,o]})}),x(c,"$clear",function(){var n=this;return R(n),n.clear(),n.$$keys&&n.$$keys.clear(),n}),x(c,"$clone",function(){var n=this,t=n.$class().$new();return q(n,t),n["$frozen?"]()?t.$freeze():t}),x(c,"$compact",function(){var n=this,t=new Map;return A(n,t,function(r,s){return s!==o&&W(t,r,s),[!1,t]})}),x(c,"$compact!",function(){var n=this;R(n);var t=o;return A(n,t,function(r,s){return s===o&&(D(n,r),t=n),[!1,t]})}),x(c,"$compare_by_identity",function(){var n=this;return R(n),n.$$by_identity||(n.$$by_identity=!0,n.size!==0&&e.hash_rehash(n)),n}),x(c,"$compare_by_identity?",function(){var n=this;return n.$$by_identity===!0}),x(c,"$default",function(n){var t=this;return n!==void 0&&t.$$proc!==o&&t.$$proc!==void 0?t.$$proc.$call(t,n):t.$$none===void 0?o:t.$$none},-1),x(c,"$default=",function(n){var t=this;return R(t),t.$$proc=o,t.$$none=n,n}),x(c,"$default_proc",function(){var n=this;return n.$$proc!==void 0?n.$$proc:o}),x(c,"$default_proc=",function(n){var t=this;R(t);var r=n;return r!==o&&(r=Y["$coerce_to!"](r,d("Proc"),"to_proc"),r["$lambda?"]()&&r.$arity().$abs()!==2&&te.$raise(d("TypeError"),"default_proc takes two arguments")),t.$$none=o,t.$$proc=r,n}),x(c,"$delete",function $(n){var t=$.$$p||o,r=this;$.$$p=null,R(r);var s=D(r,n);return s!==void 0?s:t!==o?e.yield1(t,n):o}),x(c,"$delete_if",function $(){var n=$.$$p||o,t=this;return $.$$p=null,N(n)?(R(t),A(t,t,function(r,s){var u=n(r,s);return u!==!1&&u!==o&&D(t,r),[!1,t]})):P(t,"enum_for",["delete_if"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),x(c,"$dig",function(n,t){var r,s,u=this,f=o;return r=K(arguments,1),s=r,f=u["$[]"](n),f===o||s.length===0?f:(N(f["$respond_to?"]("dig"))||te.$raise(d("TypeError"),""+f.$class()+" does not have #dig method"),P(f,"dig",T(s)))},-2),x(c,"$dup",function(){var n=this;return q(n,n.$class().$new())}),x(c,"$each",function $(){var n=$.$$p||o,t=this;return $.$$p=null,N(n)?A(t,t,function(r,s){return z(n,[r,s]),[!1,t]}):P(t,"enum_for",["each"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),x(c,"$each_key",function $(){var n=$.$$p||o,t=this;return $.$$p=null,N(n)?A(t,t,function(r,s){return n(r),[!1,t]}):P(t,"enum_for",["each_key"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),x(c,"$each_value",function $(){var n=$.$$p||o,t=this;return $.$$p=null,N(n)?A(t,t,function(r,s){return n(s),[!1,t]}):P(t,"enum_for",["each_value"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),x(c,"$empty?",function(){var n=this;return n.size===0}),x(c,"$except",function(n){var t,r,s=this;return t=K(arguments),r=t,P(s.$dup(),"except!",T(r))},-1),x(c,"$except!",function(n){var t,r,s=this;return t=K(arguments),r=t,P(r,"each",[],function u(f){var m=u.$$s==null?this:u.$$s;return f==null&&(f=o),m.$delete(f)},{$$s:s}),s},-1),x(c,"$fetch",function $(n,t){var r=$.$$p||o,s=this;$.$$p=null;var u=ee(s,n);return u!==void 0?u:r!==o?r(n):t!==void 0?t:te.$raise(d("KeyError").$new("key not found: "+n.$inspect(),new Map([["key",n],["receiver",s]])))},-2),x(c,"$fetch_values",function $(n){var t=$.$$p||o,r,s,u=this;return $.$$p=null,r=K(arguments),s=r,P(s,"map",[],function f(m){var S=f.$$s==null?this:f.$$s;return m==null&&(m=o),P(S,"fetch",[m],t.$to_proc())},{$$s:u})},-1),x(c,"$flatten",function(n){var t=this;n==null&&(n=1),n=Y["$coerce_to!"](n,d("Integer"),"to_int");var r=[];return A(t,r,function(s,u){return r.push(s),u.$$is_array?n===1?(r.push(u),[!1,r]):(r=r.concat(u.$flatten(n-2)),[!1,r]):(r.push(u),[!1,r])})},-1),x(c,"$freeze",function(){var n=this;return N(n["$frozen?"]())?n:Z(n)}),x(c,"$has_key?",function(n){var t=this;return ee(t,n)!==void 0}),x(c,"$has_value?",function(n){var t=this;return A(t,!1,function(r,s){return s["$=="](n)?[!0,!0]:[!1,!1]})});var i;x(c,"$hash",function(){var n=this,t=i===void 0,r=n.$object_id(),s=p(),u,f,m,S=n.size,C=new Int32Array(S);if(s=H(s,4),s=H(s,S),t)i=Object.create(null);else if(i[r])return H(s,16843009);try{for(u in i)if(f=i[u],n["$eql?"](f))return H(s,16843009);for(i[r]=n,m=0,A(n,!1,function(M,J){return C[m]=[1883326802,M,J].$hash(),m++,[!1,!1]}),C=C.sort(),m=0;m<C.length;m++)s=H(s,C[m]);return s}finally{t&&(i=void 0)}}),x(c,"$index",function(n){var t=this;return A(t,o,function(r,s){return s["$=="](n)?[!0,r]:[!1,o]})}),x(c,"$indexes",function(n){var t,r,s=this;t=K(arguments),r=t;for(var u=[],f=0,m=r.length,S,C;f<m;f++){if(S=r[f],C=ee(s,S),C===void 0){u.push(s.$default());continue}u.push(C)}return u},-1);var a;return x(c,"$inspect",function(){var n=this,t=a===void 0,r=n.$object_id(),s=[];return function(){try{if(t&&(a={}),a.hasOwnProperty(r))return"{...}";return a[r]=!0,A(n,!1,function(u,f){return f=y("Opal").$inspect(f),u=y("Opal").$inspect(u),s.push(u+"=>"+f),[!1,!1]}),"{"+s.join(", ")+"}";return o}finally{t&&(a=void 0)}}()}),x(c,"$invert",function(){var n=this,t=new Map;return A(n,t,function(r,s){return W(t,s,r),[!1,t]})}),x(c,"$keep_if",function $(){var n=$.$$p||o,t=this;return $.$$p=null,N(n)?(R(t),A(t,t,function(r,s){var u=n(r,s);return(u===!1||u===o)&&D(t,r),[!1,t]})):P(t,"enum_for",["keep_if"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),x(c,"$keys",function(){var n=this;return Array.from(n.keys())}),x(c,"$length",function(){var n=this;return n.size}),x(c,"$merge",function $(n){var t=$.$$p||o,r,s,u=this;return $.$$p=null,r=K(arguments),s=r,P(u.$dup(),"merge!",T(s),t.$to_proc())},-1),x(c,"$merge!",function $(n){var t=$.$$p||o,r,s,u=this;$.$$p=null,r=K(arguments),s=r,R(u);var f,m;for(f=0;f<s.length;++f)m=Y["$coerce_to!"](s[f],d("Hash"),"to_hash"),t===o?A(m,!1,function(S,C){return W(u,S,C),[!1,!1]}):A(m,!1,function(S,C){var M=ee(u,S);return M===void 0?(W(u,S,C),[!1,!1]):(W(u,S,t(S,M,C)),[!1,!1])});return u},-1),x(c,"$rassoc",function(n){var t=this;return A(t,o,function(r,s){return s["$=="](n)?[!0,[r,s]]:[!1,o]})}),x(c,"$rehash",function(){var n=this;return R(n),e.hash_rehash(n)}),x(c,"$reject",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!N(n))return P(t,"enum_for",["reject"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});var r=new Map;return A(t,r,function(s,u){var f=n(s,u);return(f===!1||f===o)&&W(r,s,u),[!1,r]})}),x(c,"$reject!",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!N(n))return P(t,"enum_for",["reject!"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});R(t);var r=o;return A(t,r,function(s,u){var f=n(s,u);return f!==!1&&f!==o&&(D(t,s),r=t),[!1,r]})}),x(c,"$replace",function(n){var t=this;return R(t),n=Y["$coerce_to!"](n,d("Hash"),"to_hash"),t.$clear(),A(n,!1,function(r,s){return W(t,r,s),[!1,!1]}),N(n.$default_proc())?t["$default_proc="](n.$default_proc()):t["$default="](n.$default()),t}),x(c,"$select",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!N(n))return P(t,"enum_for",["select"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});var r=new Map;return A(t,r,function(s,u){var f=n(s,u);return f!==!1&&f!==o&&W(r,s,u),[!1,r]})}),x(c,"$select!",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!N(n))return P(t,"enum_for",["select!"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});R(t);var r=o;return A(t,r,function(s,u){var f=n(s,u);return(f===!1||f===o)&&(D(t,s),r=t),[!1,r]})}),x(c,"$shift",function(){var n=this;return R(n),A(n,o,function(t,r){return[!0,[t,D(n,t)]]})}),x(c,"$slice",function(n){var t,r,s=this;t=K(arguments),r=t;for(var u=new Map,f=0,m=r.length;f<m;f++){var S=r[f],C=ee(s,S);C!==void 0&&W(u,S,C)}return u},-1),x(c,"$to_a",function(){var n=this,t=[];return A(n,t,function(r,s){return t.push([r,s]),[!1,t]})}),x(c,"$to_h",function $(){var n=$.$$p||o,t=this;if($.$$p=null,n!==o)return P(t,"map",[],n.$to_proc()).$to_h();if(t.$$class===e.Hash)return t;var r=new Map;return q(t,r),r}),x(c,"$to_hash",g),x(c,"$to_proc",function(){var n=this;return P(n,"proc",[],function t(r){var s=t.$$s==null?this:t.$$s;return r==null&&te.$raise(d("ArgumentError"),"no key given"),s["$[]"](r)},{$$arity:-1,$$s:n})}),x(c,"$transform_keys",function $(n){var t=$.$$p||o,r=this;if($.$$p=null,n==null&&(n=o),w(t)&&w(n))return P(r,"enum_for",["transform_keys"],function u(){var f=u.$$s==null?this:u.$$s;return f.$size()},{$$s:r});var s=new Map;return A(r,s,function(u,f){var m;return n!==o&&(m=ee(n,u)),m===void 0&&t&&t!==o&&(m=t(u)),m===void 0&&(m=u),W(s,m,f),[!1,s]})},-1),x(c,"$transform_keys!",function $(n){var t=$.$$p||o,r=this;if($.$$p=null,n==null&&(n=o),w(t)&&w(n))return P(r,"enum_for",["transform_keys!"],function u(){var f=u.$$s==null?this:u.$$s;return f.$size()},{$$s:r});R(r);var s=new Map;return A(r,r,function(u,f){var m;return n!==o&&(m=ee(n,u)),m===void 0&&t&&t!==o&&(m=t(u)),m===void 0?[!1,r]:(ee(s,u)||D(r,u),W(r,m,f),W(s,m,!0),[!1,r])})},-1),x(c,"$transform_values",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!N(n))return P(t,"enum_for",["transform_values"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});var r=new Map;return A(t,r,function(s,u){return W(r,s,n(u)),[!1,r]})}),x(c,"$transform_values!",function $(){var n=$.$$p||o,t=this;return $.$$p=null,N(n)?(R(t),A(t,t,function(r,s){return W(t,r,n(s)),[!1,t]})):P(t,"enum_for",["transform_values!"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),x(c,"$values",function(){var n=this;return Array.from(n.values())}),j(c,"each_pair","each"),j(c,"eql?","=="),j(c,"filter","select"),j(c,"filter!","select!"),j(c,"include?","has_key?"),j(c,"indices","indexes"),j(c,"key","index"),j(c,"key?","has_key?"),j(c,"member?","has_key?"),j(c,"size","length"),j(c,"store","[]="),j(c,"to_s","inspect"),j(c,"update","merge!"),j(c,"value?","has_value?"),j(c,"values_at","indexes")}("::",Map,v)};Opal.modules["corelib/number"]=function(e){var z=e.klass,q=e.Opal,D=e.Kernel,A=e.def,ee=e.eqeqeq,W=e.truthy,R=e.rb_gt,Z=e.not,p=e.rb_lt,H=e.alias,$e=e.send2,K=e.find_super,Y=e.send,te=e.rb_plus,F=e.rb_minus,x=e.eqeq,P=e.return_self,B=e.rb_divide,U=e.to_ary,N=e.rb_times,T=e.rb_le,g=e.rb_ge,w=e.return_val,j=e.const_set,E=e.top,v=[],o=e.nil,d=e.$$$;return e.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),E.$require("corelib/numeric"),function(k,h,l){var c=z(k,h,"Number");q.$bridge(Number,c),e.prop(c.$$prototype,"$$is_number",!0),c.$$is_number_class=!0;var X=new Map;(function(t,r){return A(t,"$allocate",function(){var u=this;return D.$raise(d("TypeError"),"allocator undefined for "+u.$name())}),e.udef(t,"$new"),o})(e.get_singleton_class(c)),A(c,"$coerce",function(r){var s=this;if(r===o)D.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float");else{if(r.$$is_string)return[D.$Float(r),s];if(r["$respond_to?"]("to_f"))return[q["$coerce_to!"](r,d("Float"),"to_f"),s];if(r.$$is_number)return[r,s];D.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float")}}),A(c,"$__id__",function(){var r=this;if(r|r===0)return r*2+1;if(X.has(r))return X.get(r);var s=e.uid();return X.set(r,s),s}),A(c,"$hash",function(){var r=this;return r|r===0?r.$__id__():r.toString().$hash()}),A(c,"$+",function(r){var s=this;return r.$$is_number?s+r:s.$__coerced__("+",r)}),A(c,"$-",function(r){var s=this;return r.$$is_number?s-r:s.$__coerced__("-",r)}),A(c,"$*",function(r){var s=this;return r.$$is_number?s*r:s.$__coerced__("*",r)}),A(c,"$/",function(r){var s=this;return r.$$is_number?s/r:s.$__coerced__("/",r)}),A(c,"$%",function(r){var s=this;if(r.$$is_number){if(r==-1/0)return r;if(r==0)D.$raise(d("ZeroDivisionError"),"divided by 0");else return r<0||s<0?(s%r+r)%r:s%r}else return s.$__coerced__("%",r)}),A(c,"$&",function(r){var s=this;return r.$$is_number?s&r:s.$__coerced__("&",r)}),A(c,"$|",function(r){var s=this;return r.$$is_number?s|r:s.$__coerced__("|",r)}),A(c,"$^",function(r){var s=this;return r.$$is_number?s^r:s.$__coerced__("^",r)}),A(c,"$<",function(r){var s=this;return r.$$is_number?s<r:s.$__coerced__("<",r)}),A(c,"$<=",function(r){var s=this;return r.$$is_number?s<=r:s.$__coerced__("<=",r)}),A(c,"$>",function(r){var s=this;return r.$$is_number?s>r:s.$__coerced__(">",r)}),A(c,"$>=",function(r){var s=this;return r.$$is_number?s>=r:s.$__coerced__(">=",r)});var y=function(t,r){return r.$$is_number?isNaN(t)||isNaN(r)?o:t>r?1:t<r?-1:0:t.$__coerced__("<=>",r)};A(c,"$<=>",function(r){var s=this;try{return y(s,r)}catch(u){if(e.rescue(u,[d("ArgumentError")]))try{return o}finally{e.pop_exception(u)}else throw u}}),A(c,"$<<",function(r){var s=this;return r=q["$coerce_to!"](r,d("Integer"),"to_int"),r>0?s<<r:s>>-r}),A(c,"$>>",function(r){var s=this;return r=q["$coerce_to!"](r,d("Integer"),"to_int"),r>0?s>>r:s<<-r}),A(c,"$[]",function(r){var s=this;return r=q["$coerce_to!"](r,d("Integer"),"to_int"),r<0?0:r>=32?s<0?1:0:s>>r&1}),A(c,"$+@",function(){var r=this;return+r}),A(c,"$-@",function(){var r=this;return-r}),A(c,"$~",function(){var r=this;return~r}),A(c,"$**",function(r){var s=this;return ee(d("Integer"),r)?Z(d("Integer")["$==="](s))||W(R(r,0))?Math.pow(s,r):d("Rational").$new(s,1)["$**"](r):W(p(s,0))&&(ee(d("Float"),r)||ee(d("Rational"),r))?d("Complex").$new(s,0)["$**"](r.$to_f()):W(r.$$is_number!=null)?Math.pow(s,r):s.$__coerced__("**",r)}),A(c,"$==",function(r){var s=this;return r.$$is_number?s.valueOf()===r.valueOf():r["$respond_to?"]("==")?r["$=="](s):!1}),H(c,"===","=="),A(c,"$abs",function(){var r=this;return Math.abs(r)}),A(c,"$abs2",function(){var r=this;return Math.abs(r*r)}),A(c,"$allbits?",function(r){var s=this;return r=q["$coerce_to!"](r,d("Integer"),"to_int"),(s&r)==r}),A(c,"$anybits?",function(r){var s=this;return r=q["$coerce_to!"](r,d("Integer"),"to_int"),(s&r)!==0}),A(c,"$angle",function(){var r=this;return W(r["$nan?"]())?r:r==0?1/r>0?0:Math.PI:r<0?Math.PI:0}),A(c,"$bit_length",function(){var r=this;if(ee(d("Integer"),r)||D.$raise(d("NoMethodError").$new("undefined method `bit_length` for "+r+":Float","bit_length")),r===0||r===-1)return 0;for(var s=0,u=r<0?~r:r;u!=0;)s+=1,u>>>=1;return s}),A(c,"$ceil",function(r){var s=this;r==null&&(r=0);var u=s.$to_f();if(u%1===0&&r>=0)return u;var f=Math.pow(10,r),m=Math.ceil(u*f)/f;return u%1===0&&(m=Math.round(m)),m},-1),A(c,"$chr",function(r){var s=this;return e.enc(String.fromCharCode(s),r||"BINARY")},-1),A(c,"$denominator",function t(){var r=t.$$p||o,s=this;return t.$$p=null,W(s["$nan?"]())||W(s["$infinite?"]())?1:$e(s,K(s,"denominator",t,!1,!0),"denominator",[],r)}),A(c,"$downto",function t(r){var s=t.$$p||o,u=this;if(t.$$p=null,s===o)return Y(u,"enum_for",["downto",r],function m(){var S=m.$$s==null?this:m.$$s;return ee(d("Numeric"),r)||D.$raise(d("ArgumentError"),"comparison of "+S.$class()+" with "+r.$class()+" failed"),W(R(r,S))?0:te(F(S,r),1)},{$$s:u});r.$$is_number||D.$raise(d("ArgumentError"),"comparison of "+u.$class()+" with "+r.$class()+" failed");for(var f=u;f>=r;f--)s(f);return u}),A(c,"$equal?",function(r){var s=this,u=o;return W(u=s["$=="](r))?u:isNaN(s)&&isNaN(r)}),A(c,"$even?",function(){var r=this;return r%2===0}),A(c,"$floor",function(r){var s=this;r==null&&(r=0);var u=s.$to_f();if(u%1===0&&r>=0)return u;var f=Math.pow(10,r),m=Math.floor(u*f)/f;return u%1===0&&(m=Math.round(m)),m},-1),A(c,"$gcd",function(r){var s=this;ee(d("Integer"),r)||D.$raise(d("TypeError"),"not an integer");for(var u=Math.abs(s),f=Math.abs(r);u>0;){var m=u;u=f%u,f=m}return f}),A(c,"$gcdlcm",function(r){var s=this;return[s.$gcd(r),s.$lcm(r)]}),A(c,"$integer?",function(){var r=this;return r%1===0}),A(c,"$is_a?",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,x(r,d("Integer"))&&ee(d("Integer"),u)||x(r,d("Integer"))&&ee(d("Integer"),u)||x(r,d("Float"))&&ee(d("Float"),u)?!0:$e(u,K(u,"is_a?",t,!1,!0),"is_a?",[r],s)}),A(c,"$instance_of?",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,x(r,d("Integer"))&&ee(d("Integer"),u)||x(r,d("Integer"))&&ee(d("Integer"),u)||x(r,d("Float"))&&ee(d("Float"),u)?!0:$e(u,K(u,"instance_of?",t,!1,!0),"instance_of?",[r],s)}),A(c,"$lcm",function(r){var s=this;return ee(d("Integer"),r)||D.$raise(d("TypeError"),"not an integer"),s==0||r==0?0:Math.abs(s*r/s.$gcd(r))}),A(c,"$next",function(){var r=this;return r+1}),A(c,"$nobits?",function(r){var s=this;return r=q["$coerce_to!"](r,d("Integer"),"to_int"),(s&r)==0}),A(c,"$nonzero?",function(){var r=this;return r==0?o:r}),A(c,"$numerator",function t(){var r=t.$$p||o,s=this;return t.$$p=null,W(s["$nan?"]())||W(s["$infinite?"]())?s:$e(s,K(s,"numerator",t,!1,!0),"numerator",[],r)}),A(c,"$odd?",function(){var r=this;return r%2!==0}),A(c,"$ord",P),A(c,"$pow",function(r,s){var u=this;return u==0&&D.$raise(d("ZeroDivisionError"),"divided by 0"),s===void 0?u["$**"](r):(d("Integer")["$==="](r)||D.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),r<0&&D.$raise(d("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),d("Integer")["$==="](s)||D.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),s===0&&D.$raise(d("ZeroDivisionError"),"divided by 0"),u["$**"](r)["$%"](s))},-2),A(c,"$pred",function(){var r=this;return r-1}),A(c,"$quo",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,ee(d("Integer"),u)?$e(u,K(u,"quo",t,!1,!0),"quo",[r],s):B(u,r)}),A(c,"$rationalize",function(r){var s,u,f=this,m=o,S=o;return arguments.length>1&&D.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),ee(d("Integer"),f)?d("Rational").$new(f,1):W(f["$infinite?"]())?D.$raise(d("FloatDomainError"),"Infinity"):W(f["$nan?"]())?D.$raise(d("FloatDomainError"),"NaN"):W(r==null)?(u=d("Math").$frexp(f),s=U(u),m=s[0]==null?o:s[0],S=s[1]==null?o:s[1],m=d("Math").$ldexp(m,d(d("Float"),"MANT_DIG")).$to_i(),S=F(S,d(d("Float"),"MANT_DIG")),d("Rational").$new(N(2,m),1["$<<"](F(1,S))).$rationalize(d("Rational").$new(1,1["$<<"](F(1,S))))):f.$to_r().$rationalize(r)},-1),A(c,"$remainder",function(r){var s=this;return F(s,N(r,B(s,r).$truncate()))}),A(c,"$round",function(r){var s,u,f=this,m=o;if(ee(d("Integer"),f)){if(W(r==null)||(ee(d("Float"),r)&&W(r["$infinite?"]())&&D.$raise(d("RangeError"),"Infinity"),r=q["$coerce_to!"](r,d("Integer"),"to_int"),W(p(r,d(d("Integer"),"MIN")))&&D.$raise(d("RangeError"),"out of bounds"),W(r>=0)))return f;if(r=r["$-@"](),.415241*r-.125>f.$size())return 0;var S=Math.pow(10,r),C=Math.floor((Math.abs(f)+S/2)/S)*S;return f<0?-C:C}else{if(W(f["$nan?"]())&&W(r==null)&&D.$raise(d("FloatDomainError"),"NaN"),r=q["$coerce_to!"](r||0,d("Integer"),"to_int"),W(T(r,0)))W(f["$nan?"]())?D.$raise(d("RangeError"),"NaN"):W(f["$infinite?"]())&&D.$raise(d("FloatDomainError"),"Infinity");else{if(x(r,0))return Math.round(f);if(W(f["$nan?"]())||W(f["$infinite?"]()))return f}return u=d("Math").$frexp(f),s=U(u),s[0]==null||s[0],m=s[1]==null?o:s[1],W(g(r,F(te(d(d("Float"),"DIG"),2),W(R(m,0))?B(m,4):F(B(m,3),1))))?f:W(p(r,(W(R(m,0))?te(B(m,3),1):B(m,4))["$-@"]()))?0:Math.round(f*Math.pow(10,r))/Math.pow(10,r)}},-1),A(c,"$times",function t(){var r=t.$$p||o,s=this;if(t.$$p=null,!W(r))return Y(s,"enum_for",["times"],function f(){var m=f.$$s==null?this:f.$$s;return m},{$$s:s});for(var u=0;u<s;u++)r(u);return s}),A(c,"$to_f",P),A(c,"$to_i",function(){var r=this;return r<0?Math.ceil(r):Math.floor(r)}),A(c,"$to_r",function(){var r,s,u=this,f=o,m=o;return ee(d("Integer"),u)?d("Rational").$new(u,1):(s=d("Math").$frexp(u),r=U(s),f=r[0]==null?o:r[0],m=r[1]==null?o:r[1],f=d("Math").$ldexp(f,d(d("Float"),"MANT_DIG")).$to_i(),m=F(m,d(d("Float"),"MANT_DIG")),N(f,d(d("Float"),"RADIX")["$**"](m)).$to_r())}),A(c,"$to_s",function(r){var s=this;return r==null&&(r=10),r=q["$coerce_to!"](r,d("Integer"),"to_int"),(W(p(r,2))||W(R(r,36)))&&D.$raise(d("ArgumentError"),"invalid radix "+r),x(s,0)&&W(1/s===-1/0)?"-0.0":s.toString(r)},-1),A(c,"$truncate",function(r){var s=this;r==null&&(r=0);var u=s.$to_f();if(u%1===0&&r>=0)return u;var f=Math.pow(10,r),m=parseInt(u*f,10)/f;return u%1===0&&(m=Math.round(m)),m},-1),A(c,"$digits",function(r){var s=this;r==null&&(r=10),W(p(s,0))&&D.$raise(d(d("Math"),"DomainError"),"out of domain"),r=q["$coerce_to!"](r,d("Integer"),"to_int"),W(p(r,2))&&D.$raise(d("ArgumentError"),"invalid radix "+r),s!=parseInt(s)&&D.$raise(d("NoMethodError"),"undefined method `digits' for "+s.$inspect());var u=s,f=[];if(s==0)return[0];for(;u!=0;)f.push(u%r),u=parseInt(u/r,10);return f},-1),A(c,"$divmod",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,W(u["$nan?"]())||W(r["$nan?"]())?D.$raise(d("FloatDomainError"),"NaN"):W(u["$infinite?"]())?D.$raise(d("FloatDomainError"),"Infinity"):$e(u,K(u,"divmod",t,!1,!0),"divmod",[r],s)}),A(c,"$upto",function t(r){var s=t.$$p||o,u=this;if(t.$$p=null,s===o)return Y(u,"enum_for",["upto",r],function m(){var S=m.$$s==null?this:m.$$s;return ee(d("Numeric"),r)||D.$raise(d("ArgumentError"),"comparison of "+S.$class()+" with "+r.$class()+" failed"),W(p(r,S))?0:te(F(r,S),1)},{$$s:u});r.$$is_number||D.$raise(d("ArgumentError"),"comparison of "+u.$class()+" with "+r.$class()+" failed");for(var f=u;f<=r;f++)s(f);return u}),A(c,"$zero?",function(){var r=this;return r==0}),A(c,"$size",w(4)),A(c,"$nan?",function(){var r=this;return isNaN(r)}),A(c,"$finite?",function(){var r=this;return r!=1/0&&r!=-1/0&&!isNaN(r)}),A(c,"$infinite?",function(){var r=this;return r==1/0?1:r==-1/0?-1:o}),A(c,"$positive?",function(){var r=this;return r!=0&&(r==1/0||1/r>0)}),A(c,"$negative?",function(){var r=this;return r==-1/0||1/r<0});function i(t){var r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}function a(t){return new DataView(t.buffer).getFloat64(0,!0)}function $(t){for(var r=i(t),s=0;s<r.length;s++)if(r[s]===255)r[s]=0;else{r[s]++;break}return a(r)}function n(t){for(var r=i(t),s=0;s<r.length;s++)if(r[s]===0)r[s]=255;else{r[s]--;break}return a(r)}return A(c,"$next_float",function(){var r=this;return x(r,d(d("Float"),"INFINITY"))?d(d("Float"),"INFINITY"):W(r["$nan?"]())?d(d("Float"),"NAN"):W(g(r,0))?$(Math.abs(r)):n(r)}),A(c,"$prev_float",function(){var r=this;return x(r,d(d("Float"),"INFINITY")["$-@"]())?d(d("Float"),"INFINITY")["$-@"]():W(r["$nan?"]())?d(d("Float"),"NAN"):W(R(r,0))?n(r):-$(Math.abs(r))}),H(c,"arg","angle"),H(c,"eql?","=="),H(c,"fdiv","/"),H(c,"inspect","to_s"),H(c,"kind_of?","is_a?"),H(c,"magnitude","abs"),H(c,"modulo","%"),H(c,"object_id","__id__"),H(c,"phase","angle"),H(c,"succ","next"),H(c,"to_int","to_i")}("::",d("Numeric")),j("::","Fixnum",d("Number")),function(k,h,l){var c=z(k,h,"Integer"),X=[c].concat(l);return c.$$is_number_class=!0,c.$$is_integer_class=!0,function(y,i){var a=[y].concat(i),$=e.$r(a);return A(y,"$allocate",function(){var t=this;return D.$raise(d("TypeError"),"allocator undefined for "+t.$name())}),e.udef(y,"$new"),A(y,"$sqrt",function(t){return t=q["$coerce_to!"](t,d("Integer"),"to_int"),t<0&&D.$raise(d(d("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(t),10)}),A(y,"$try_convert",function(t){var r=this;return $("Opal")["$coerce_to?"](t,r,"to_int")})}(e.get_singleton_class(c),X),j(c,"MAX",Math.pow(2,30)-1),j(c,"MIN",-Math.pow(2,30))}("::",d("Numeric"),v),function(k,h,l){var c=z(k,h,"Float");return c.$$is_number_class=!0,function(X,y){return A(X,"$allocate",function(){var a=this;return D.$raise(d("TypeError"),"allocator undefined for "+a.$name())}),e.udef(X,"$new"),A(X,"$===",function(a){return!!a.$$is_number})}(e.get_singleton_class(c)),j(c,"INFINITY",1/0),j(c,"MAX",Number.MAX_VALUE),j(c,"MIN",Number.MIN_VALUE),j(c,"NAN",NaN),j(c,"DIG",15),j(c,"MANT_DIG",53),j(c,"RADIX",2),j(c,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",d("Numeric"))};Opal.modules["corelib/range"]=function(e){var z=e.klass,q=e.truthy,D=e.Kernel,A=e.def,ee=e.not,W=e.send2,R=e.find_super,Z=e.lambda,p=e.send,H=e.rb_ge,$e=e.rb_gt,K=e.eqeq,Y=e.rb_le,te=e.rb_lt,F=e.eqeqeq,x=e.return_ivar,P=e.rb_minus,B=e.Opal,U=e.rb_divide,N=e.rb_plus,T=e.rb_times,g=e.thrower,w=e.alias,j=e.top,E=[],v=e.nil,o=e.$$$;return e.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),j.$require("corelib/enumerable"),function(d,k,h){var l=z(d,k,"Range"),c=[l].concat(h),X=e.$r(c),y=l.$$prototype;y.begin=y.end=y.excl=v,l.$include(o("Enumerable")),l.$$prototype.$$is_range=!0,l.$attr_reader("begin","end"),A(l,"$initialize",function($,n,t){var r=this;return t==null&&(t=!1),q(r.begin)&&D.$raise(o("NameError"),"'initialize' called twice"),q($["$<=>"](n))||q($["$nil?"]())||q(n["$nil?"]())||D.$raise(o("ArgumentError"),"bad value for range"),r.begin=$,r.end=n,r.excl=t},-3),A(l,"$===",function($){var n=this;return q($.$$is_range)?!1:n["$cover?"]($)});function i(a){return a.begin===v||a.end===v||a.begin===-1/0||a.end===1/0||a.begin===1/0||a.end===-1/0}return A(l,"$count",function a(){var $=a.$$p||v,n=this;return a.$$p=null,ee($!==v)&&q(i(n))?o(o("Float"),"INFINITY"):W(n,R(n,"count",a,!1,!0),"count",[],$)}),A(l,"$to_a",function a(){var $=a.$$p||v,n=this;return a.$$p=null,q(i(n))&&D.$raise(o("TypeError"),"cannot convert endless range to an array"),W(n,R(n,"to_a",a,!1,!0),"to_a",[],$)}),A(l,"$cover?",function($){var n=this,t=v,r=v,s=v,u=v,f=v,m=v,S=v,C=v;return t=Z(function(J,O){var ae=v;return J==null&&(J=v),O==null&&(O=v),q(ae=J["$<=>"](O))?ae:1}),q($.$$is_range)?(r=$.$begin(),s=$.$end(),u=$["$exclude_end?"](),q(n.begin)&&q(r["$nil?"]())||q(n.end)&&q(s["$nil?"]())||q(r)&&q(s)&&q(p(t.$call(r,s),"then",[],function(J){return J==null&&(J=v),q(u)?H(J,0):$e(J,0)}))||q(r)&&ee(n["$cover?"](r))?!1:(f=t.$call(n.end,s),K(n.excl,u)?H(f,0):q(n.excl)?$e(f,0):q(H(f,0))?!0:(m=$.$max(),q(S=m["$nil?"]()["$!"]())?Y(t.$call(m,n.end),0):S))):q(n.begin)&&q($e(t.$call(n.begin,$),0))?!1:q(n.end["$nil?"]())?!0:(C=t.$call($,n.end),q(n.excl)?te(C,0):Y(C,0))}),A(l,"$each",function a(){var $=a.$$p||v,n=this,t=v,r=v,s=v;if(a.$$p=null,$===v)return p(n,"enum_for",["each"],function m(){var S=m.$$s==null?this:m.$$s;return S.$size()},{$$s:n});var u,f;if(n.begin.$$is_number&&n.end.$$is_number){for((n.begin%1!==0||n.end%1!==0)&&D.$raise(o("TypeError"),"can't iterate from Float"),u=n.begin,f=n.end+(q(n.excl)?0:1);u<f;u++)$(u);return n}if(n.begin.$$is_string&&n.end.$$is_string)return p(n.begin,"upto",[n.end,n.excl],$.$to_proc()),n;for(t=n.begin,r=n.end,q(t["$respond_to?"]("succ"))||D.$raise(o("TypeError"),"can't iterate from "+t.$class());q(q(s=n.end["$nil?"]())?s:te(t["$<=>"](r),0));)e.yield1($,t),t=t.$succ();return ee(n.excl)&&K(t,r)&&e.yield1($,t),n}),A(l,"$eql?",function($){var n=this,t=v,r=v;return F(o("Range"),$)?q(t=q(r=n.excl["$==="]($["$exclude_end?"]()))?n.begin["$eql?"]($.$begin()):r)?n.end["$eql?"]($.$end()):t:!1}),A(l,"$exclude_end?",x("excl")),A(l,"$first",function a($){var n=a.$$p||v,t=this;return a.$$p=null,q(t.begin["$nil?"]())&&D.$raise(o("RangeError"),"cannot get the minimum of beginless range"),q($==null)?t.begin:W(t,R(t,"first",a,!1,!0),"first",[$],n)},-1),A(l,"$include?",function a($){var n=a.$$p||v,t=this,r=v,s=v;if(a.$$p=null,q(t.begin.$$is_number||t.end.$$is_number)||q(t.begin["$is_a?"](o("Time")))||q(t.end["$is_a?"](o("Time")))||q(o("Integer").$try_convert(t.begin))||q(o("Integer").$try_convert(t.end)))return t["$cover?"]($);if(q(t.begin.$$is_string||t.end.$$is_string)){if(q(t.begin.$$is_string&&t.end.$$is_string))return p(t.begin.$upto(t.end,t.excl),"any?",[],function(f){return f==null&&(f=v),f["$=="]($)});if(q(t.begin["$nil?"]()))return r=$["$<=>"](t.end),q(s=r["$nil?"]()["$!"]())?q(t.excl)?te(r,0):Y(r,0):s;if(q(t.end["$nil?"]()))return r=t.begin["$<=>"]($),q(s=r["$nil?"]()["$!"]())?Y(r,0):s}return W(t,R(t,"include?",a,!1,!0),"include?",[$],n)}),A(l,"$last",function($){var n=this;return q(n.end["$nil?"]())&&D.$raise(o("RangeError"),"cannot get the maximum of endless range"),q($==null)?n.end:n.$to_a().$last($)},-1),A(l,"$max",function a(){var $=a.$$p||v,n=this;return a.$$p=null,q(n.end["$nil?"]())?D.$raise(o("RangeError"),"cannot get the maximum of endless range"):$!==v?W(n,R(n,"max",a,!1,!0),"max",[],$):ee(n.begin["$nil?"]())&&(q($e(n.begin,n.end))||q(n.excl)&&K(n.begin,n.end))?v:n.excl?n.end-1:n.end}),A(l,"$min",function a(){var $=a.$$p||v,n=this;return a.$$p=null,q(n.begin["$nil?"]())?D.$raise(o("RangeError"),"cannot get the minimum of beginless range"):$!==v?W(n,R(n,"min",a,!1,!0),"min",[],$):ee(n.end["$nil?"]())&&(q($e(n.begin,n.end))||q(n.excl)&&K(n.begin,n.end))?v:n.begin}),A(l,"$size",function(){var $=this.begin,n=this.end;if(o("Numeric")["$==="]($)){if(o("Numeric")["$==="](n)){var t=P(n,$);return t<0?0:(this.excl||(t+=1),o("Float")["$==="]($)||o("Float")["$==="](n)?Math.floor(t):t)}else if(n===v)return 1/0}else if($===v&&o("Numeric")["$==="](n))return 1/0;return v}),A(l,"$step",function a($){var n=a.$$p||v,t=this,r=v,s=v;a.$$p=null;function u(){$==null?$=1:$.$$is_number||($=B["$coerce_to!"]($,o("Integer"),"to_int")),$<0?D.$raise(o("ArgumentError"),"step can't be negative"):$===0&&D.$raise(o("ArgumentError"),"step can't be 0")}function f(){if(!t.begin["$respond_to?"]("succ")||t.begin.$$is_string&&t.end.$$is_string)return v;if($%1===0)return U(t.$size(),$).$ceil();var m=t.begin,S=t.end,C=Math.abs,M=Math.floor,J=(C(m)+C(S)+C(S-m))/C($)*o(o("Float"),"EPSILON"),O;return J>.5&&(J=.5),t.excl?(O=M((S-m)/$-J),O*$+m<S&&O++):O=M((S-m)/$+J)+1,O}return n===v?(q(t.begin["$is_a?"](X("Numeric")))||q(t.begin["$nil?"]()))&&(q(t.end["$is_a?"](X("Numeric")))||q(t.end["$nil?"]()))&&ee(q(r=t.begin["$nil?"]())?t.end["$nil?"]():r)?o(o("Enumerator"),"ArithmeticSequence").$new(t,$,"step"):p(t,"enum_for",["step",$],function(){return u(),f()}):(u(),q(t.begin.$$is_number&&t.end.$$is_number)?(s=0,function(){try{var m=g("break");return p(t,"loop",[],function S(){var C=S.$$s==null?this:S.$$s,M=v;return C.begin==null&&(C.begin=v),C.excl==null&&(C.excl=v),C.end==null&&(C.end=v),M=N(C.begin,T(s,$)),q(C.excl)?q(H(M,C.end))&&m.$throw(v,S.$$is_lambda):q($e(M,C.end))&&m.$throw(v,S.$$is_lambda),e.yield1(n,M),s=N(s,1)},{$$s:t})}catch(S){if(S===m)return S.$v;throw S}finally{m.is_orphan=!0}}()):(t.begin.$$is_string&&t.end.$$is_string&&$%1!==0&&D.$raise(o("TypeError"),"no implicit conversion to float from string"),p(t,"each_with_index",[],function(S,C){return S==null&&(S=v),C==null&&(C=v),K(C["$%"]($),0)?e.yield1(n,S):v})),t)},-1),A(l,"$%",function($){var n=this;return q(n.begin["$is_a?"](X("Numeric")))&&q(n.end["$is_a?"](X("Numeric")))?o(o("Enumerator"),"ArithmeticSequence").$new(n,$,"%"):n.$step($)}),A(l,"$bsearch",function a(){var $=a.$$p||v,n=this;return a.$$p=null,$===v?n.$enum_for("bsearch"):(q(i(n)&&(n.begin.$$is_number||n.end.$$is_number))&&D.$raise(o("NotImplementedError"),"Can't #bsearch an infinite range"),q(n.begin.$$is_number&&n.end.$$is_number)||D.$raise(o("TypeError"),"can't do binary search for "+n.begin.$class()),p(n.$to_a(),"bsearch",[],$.$to_proc()))}),A(l,"$to_s",function(){var $=this,n=v;return""+(q(n=$.begin)?n:"")+(q($.excl)?"...":"..")+(q(n=$.end)?n:"")}),A(l,"$inspect",function(){var $=this,n=v;return""+(q(n=$.begin)?$.begin.$inspect():n)+(q($.excl)?"...":"..")+(q(n=$.end)?$.end.$inspect():n)}),A(l,"$marshal_load",function($){var n=this;return n.begin=$["$[]"]("begin"),n.end=$["$[]"]("end"),n.excl=$["$[]"]("excl")}),A(l,"$hash",function(){var $=this;return[o("Range"),$.begin,$.end,$.excl].$hash()}),w(l,"==","eql?"),w(l,"member?","include?")}("::",null,E)};Opal.modules["corelib/proc"]=function(e){var z=e.slice,q=e.each_ivar,D=e.klass,A=e.truthy,ee=e.Kernel,W=e.defs,R=e.def,Z=e.send,p=e.to_a,H=e.return_self,$e=e.ensure_kwargs,K=e.hash_get,Y=e.Opal,te=e.alias,F=e.nil,x=e.$$$;return e.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(P,B){var U=D(P,B,"Proc");e.prop(U.$$prototype,"$$is_proc",!0),e.prop(U.$$prototype,"$$is_lambda",!1),W(U,"$new",function g(){var w=g.$$p||F;return g.$$p=null,A(w)||ee.$raise(x("ArgumentError"),"tried to create a Proc object without a block"),w});function N(g,w){if(g.$$ret)try{return g.apply(null,w)}catch(j){if(j===g.$$ret)return j.$v;throw j}else return g.apply(null,w)}function T(g,w){if(g.$$brk)try{return e.yieldX(g,w)}catch(j){if(j===g.$$brk)return j.$v;throw j}else return e.yieldX(g,w)}return R(U,"$call",function g(w){var j=g.$$p||F,E,v,o=this;return g.$$p=null,E=z(arguments),v=E,j!==F&&(o.$$p=j),o.$$is_lambda?N(o,v):T(o,v)},-1),R(U,"$>>",function g(w){g.$$p;var j=this;return g.$$p=null,Z(ee,"proc",[],function E(v){var o=E.$$p||F,d,k,h=E.$$s==null?this:E.$$s,l=F;return E.$$p=null,d=z(arguments),k=d,l=Z(h,"call",p(k),o.$to_proc()),w.$call(l)},{$$arity:-1,$$s:j})}),R(U,"$<<",function g(w){g.$$p;var j=this;return g.$$p=null,Z(ee,"proc",[],function E(v){var o=E.$$p||F,d,k,h=E.$$s==null?this:E.$$s,l=F;return E.$$p=null,d=z(arguments),k=d,l=Z(w,"call",p(k),o.$to_proc()),h.$call(l)},{$$arity:-1,$$s:j})}),R(U,"$to_proc",H),R(U,"$lambda?",function(){var w=this;return!!w.$$is_lambda}),R(U,"$arity",function(){var w=this;return w.$$is_curried?-1:w.$$arity!=null?w.$$arity:w.length}),R(U,"$source_location",function(){var w=this,j=F;return w.$$is_curried?F:A(j=w.$$source_location)?j:F}),R(U,"$binding",function(){var w=this;return w.$$is_curried&&ee.$raise(x("ArgumentError"),"Can't create Binding"),A(x("::","Binding","skip_raise")?"constant":F)?x("Binding").$new(F,[],w.$$s,w.$source_location()):F}),R(U,"$parameters",function(w){var j,E=this;if(w=$e(w),j=K(w,"lambda"),E.$$is_curried)return[["rest"]];if(E.$$parameters){if(j??E.$$is_lambda)return E.$$parameters;var v=[],o,d;for(o=0,d=E.$$parameters.length;o<d;o++){var k=E.$$parameters[o];k[0]==="req"&&(k=["opt",k[1]]),v.push(k)}return v}else return[]},-1),R(U,"$curry",function(w){var j=this;w===void 0?w=j.length:(w=Y["$coerce_to!"](w,x("Integer"),"to_int"),j.$$is_lambda&&w!==j.length&&ee.$raise(x("ArgumentError"),"wrong number of arguments ("+w+" for "+j.length+")"));function E(){var v=z(arguments),o=v.length,d;return o>w&&j.$$is_lambda&&!j.$$is_curried&&ee.$raise(x("ArgumentError"),"wrong number of arguments ("+o+" for "+w+")"),o>=w?j.$call.apply(j,v):(d=function(){return E.apply(null,v.concat(z(arguments)))},d.$$is_lambda=j.$$is_lambda,d.$$is_curried=!0,d)}return E.$$is_lambda=j.$$is_lambda,E.$$is_curried=!0,E},-1),R(U,"$dup",function(){var w=this,j=w.$$original_proc||w,E=function(){return j.apply(this,arguments)};return q(w,function(v){E[v]=w[v]}),E}),te(U,"===","call"),te(U,"clone","dup"),te(U,"yield","call"),te(U,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(e){var z=e.klass,q=e.def,D=e.truthy,A=e.slice,ee=e.alias,W=e.Kernel,R=e.send,Z=e.to_a,p=e.nil,H=e.$$$;return e.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function($e,K){var Y=z($e,K,"Method"),te=Y.$$prototype;return te.method=te.receiver=te.owner=te.name=p,Y.$attr_reader("owner","receiver","name"),q(Y,"$initialize",function(x,P,B,U){var N=this;return N.receiver=x,N.owner=P,N.name=U,N.method=B}),q(Y,"$arity",function(){var x=this;return x.method.$arity()}),q(Y,"$parameters",function(){var x=this;return x.method.$$parameters}),q(Y,"$source_location",function(){var x=this,P=p;return D(P=x.method.$$source_location)?P:["(eval)",0]}),q(Y,"$comments",function(){var x=this,P=p;return D(P=x.method.$$comments)?P:[]}),q(Y,"$call",function F(x){var P=F.$$p||p,B,U,N=this;return F.$$p=null,B=A(arguments),U=B,N.method.$$p=P,N.method.apply(N.receiver,U)},-1),q(Y,"$curry",function(x){var P=this;return P.method.$curry(x)},-1),q(Y,"$>>",function(x){var P=this;return P.method["$>>"](x)}),q(Y,"$<<",function(x){var P=this;return P.method["$<<"](x)}),q(Y,"$unbind",function(){var x=this;return H("UnboundMethod").$new(x.receiver.$class(),x.owner,x.method,x.name)}),q(Y,"$to_proc",function(){var x=this,P=x.$call.bind(x);return P.$$unbound=x.method,P.$$is_lambda=!0,P.$$arity=x.method.$$arity==null?x.method.length:x.method.$$arity,P.$$parameters=x.method.$$parameters,P}),q(Y,"$inspect",function(){var x=this;return"#<"+x.$class()+": "+x.receiver.$class()+"#"+x.name+" (defined in "+x.owner+" in "+x.$source_location().$join(":")+")>"}),ee(Y,"[]","call"),ee(Y,"===","call")}("::",null),function($e,K){var Y=z($e,K,"UnboundMethod"),te=Y.$$prototype;return te.method=te.owner=te.name=te.source=p,Y.$attr_reader("source","owner","name"),q(Y,"$initialize",function(x,P,B,U){var N=this;return N.source=x,N.owner=P,N.method=B,N.name=U,N.$$method=B}),q(Y,"$arity",function(){var x=this;return x.method.$arity()}),q(Y,"$parameters",function(){var x=this;return x.method.$$parameters}),q(Y,"$source_location",function(){var x=this,P=p;return D(P=x.method.$$source_location)?P:["(eval)",0]}),q(Y,"$comments",function(){var x=this,P=p;return D(P=x.method.$$comments)?P:[]}),q(Y,"$bind",function(x){var P=this;if(P.owner.$$is_module||e.is_a(x,P.owner))return H("Method").$new(x,P.owner,P.method,P.name);W.$raise(H("TypeError"),"can't bind singleton method to a different class (expected "+x+".kind_of?("+P.owner+" to be true)")}),q(Y,"$bind_call",function F(x,P){var B=F.$$p||p,U,N,T=this;return F.$$p=null,U=A(arguments,1),N=U,R(T.$bind(x),"call",Z(N),B.$to_proc())},-2),q(Y,"$inspect",function(){var x=this;return"#<"+x.$class()+": "+x.source+"#"+x.name+" (defined in "+x.owner+" in "+x.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(e){var z=e.gvars,q=e.const_set,D=e.Object,A=e.nil;return e.add_stubs("new"),z["&"]=z["~"]=z["`"]=z["'"]=A,z.LOADED_FEATURES=z['"']=e.loaded_features,z.LOAD_PATH=z[":"]=[],z["/"]=`
`,z[","]=A,q("::","ARGV",[]),q("::","ARGF",D.$new()),q("::","ENV",new Map),z.VERBOSE=!1,z.DEBUG=!1,z.SAFE=0};Opal.modules["corelib/io"]=function(e){var z=e.klass,q=e.const_set,D=e.not,A=e.truthy,ee=e.def,W=e.return_ivar,R=e.return_val,Z=e.slice,p=e.Kernel,H=e.gvars,$e=e.send,K=e.to_a,Y=e.rb_plus,te=e.neqeq,F=e.range,x=e.eqeq,P=e.to_ary,B=e.rb_gt,U=e.assign_ivar_val,N=e.alias,T,g=e.nil,w=e.$$$;e.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(E,v){var o=z(E,v,"IO"),d=o.$$prototype;return d.read_buffer=d.closed=g,q(o,"SEEK_SET",0),q(o,"SEEK_CUR",1),q(o,"SEEK_END",2),q(o,"SEEK_DATA",3),q(o,"SEEK_HOLE",4),q(o,"READABLE",1),q(o,"WRITABLE",4),o.$attr_reader("eof"),o.$attr_accessor("read_proc","sync","tty","write_proc"),ee(o,"$initialize",function(h,l){var c=this;return l==null&&(l="r"),c.fd=h,c.flags=l,c.eof=!1,A(l["$include?"]("r"))&&D(l["$match?"](/[wa+]/))?c.closed="write":A(l["$match?"](/[wa]/))&&D(l["$match?"](/[r+]/))?c.closed="read":g},-2),ee(o,"$fileno",W("fd")),ee(o,"$tty?",function(){var h=this;return h.tty==!0}),ee(o,"$write",function(h){var l=this;return l.write_proc(h),h.$size()}),ee(o,"$flush",R(g)),ee(o,"$<<",function(h){var l=this;return l.$write(h),l}),ee(o,"$print",function(h){var l,c,X=this;H[","]==null&&(H[","]=g),l=Z(arguments),c=l;for(var y=0,i=c.length;y<i;y++)c[y]=p.$String(c[y]);return X.$write(c.join(H[","])),g},-1),ee(o,"$puts",function(h){var l,c,X=this;l=Z(arguments),c=l;var y;if(c.length===0)return X.$write(`
`),g;for(var i=0,a=c.length;i<a;i++)if(c[i].$$is_array){var $=c[i].$flatten();$.length>0&&$e(X,"puts",K($))}else c[i].$$is_string?y=c[i].valueOf():y=p.$String(c[i]),y.endsWith(`
`)||(y+=`
`),X.$write(y);return g},-1),ee(o,"$getc",function(){var h=this,l=g,c=g,X=g;h.read_buffer=A(l=h.read_buffer)?l:"",c="";do if(h.read_buffer=Y(h.read_buffer,c),te(h.read_buffer,""))return X=h.read_buffer["$[]"](0),h.read_buffer=h.read_buffer["$[]"](F(1,-1,!1)),X;while(A(c=h.$sysread_noraise(1)));return g}),ee(o,"$getbyte",function(){var h,l=this;return h=l.$getc(),h===g||h==null?g:h.$ord()}),ee(o,"$readbyte",function(){var h=this;return h.$readchar().$ord()}),ee(o,"$readchar",function(){var h=this,l=g;return A(l=h.$getc())?l:p.$raise(w("EOFError"),"end of file reached")}),ee(o,"$readline",function(h){var l,c,X=this,y=g;return l=Z(arguments),c=l,A(y=$e(X,"gets",K(c)))?y:p.$raise(w("EOFError"),"end of file reached")},-1),ee(o,"$gets",function(h,l,c){var X,y,i=this,a=g,$=g,n=g,t=g,r=g,s=g;H["/"]==null&&(H["/"]=g),h==null&&(h=!1),l==null&&(l=g),c==null&&(c=new Map),A(h.$$is_number)&&D(l)&&(X=[!1,h,l],h=X[0],l=X[1],c=X[2]),A(h.$$is_hash)&&D(l)&&x(c,new Map)?(X=[!1,g,h],h=X[0],l=X[1],c=X[2]):A(l.$$is_hash)&&x(c,new Map)&&(X=[h,g,l],h=X[0],l=X[1],c=X[2]),a=h,x(h,!1)&&(h=H["/"]),x(h,"")&&(h=/\r?\n\r?\n/),h=A($=h)?$:"",x(a,"")||(h=h.$to_str()),n=x(a,"")?2:h.$length(),x(h," ")&&(h=/ /),i.read_buffer=A($=i.read_buffer)?$:"",t="",r=g;do if(i.read_buffer=Y(i.read_buffer,t),te(h,"")&&A(A(h.$$is_regexp)?i.read_buffer["$match?"](h):i.read_buffer["$include?"](h))){s=i.read_buffer,y=i.read_buffer.$split(h,2),X=P(y),r=X[0]==null?g:X[0],i.read_buffer=X[1]==null?g:X[1],te(r,s)&&(r=Y(r,s["$[]"](r.$length(),n)));break}while(A(t=i.$sysread_noraise(x(h,"")?65536:1)));return A(r)||(X=[A($=i.read_buffer)?$:"",""],r=X[0],i.read_buffer=X[1],x(r,"")&&(r=g)),A(r)&&(A(l)&&(r=r["$[]"](e.Range.$new(0,l,!0)),i.read_buffer=Y(r["$[]"](e.Range.$new(l,-1,!1)),i.read_buffer)),A(c["$[]"]("chomp"))&&(r=r.$sub(/\r?\n$/,"")),x(a,"")&&(r=r.$sub(/^[\r\n]+/,""))),x(a,!1)&&(H._=r),r},-1),ee(o,"$sysread",function(h){var l=this,c=g;return A(c=l.read_proc(h))?c:(l.eof=!0,p.$raise(w("EOFError"),"end of file reached"))}),ee(o,"$sysread_noraise",function(h){var l=this;try{return l.$sysread(h)}catch(c){if(e.rescue(c,[w("EOFError")]))try{return g}finally{e.pop_exception(c)}else throw c}}),ee(o,"$readpartial",function(h){var l,c=this,X=g,y=g,i=g;return c.read_buffer=A(X=c.read_buffer)?X:"",y=c.$sysread(h),l=[Y(c.read_buffer,A(X=y)?X:""),""],i=l[0],c.read_buffer=l[1],x(i,"")&&(i=g),i}),ee(o,"$read",function(h){var l,c=this,X=g,y=g,i=g;h==null&&(h=g),c.read_buffer=A(X=c.read_buffer)?X:"",y="",i=g;do if(c.read_buffer=Y(c.read_buffer,y),A(h)&&A(B(c.read_buffer.$length(),h)))return l=[c.read_buffer["$[]"](e.Range.$new(0,h,!0)),c.read_buffer["$[]"](e.Range.$new(h,-1,!1))],i=l[0],c.read_buffer=l[1],i;while(A(y=c.$sysread_noraise(A(X=h)?X:65536)));return l=[c.read_buffer,""],i=l[0],c.read_buffer=l[1],i},-1),ee(o,"$readlines",function(h){var l=this;return H["/"]==null&&(H["/"]=g),h==null&&(h=H["/"]),l.$each_line(h).$to_a()},-1),ee(o,"$each",function k(h,l){var c=k.$$p||g,X,y,i,a=this,$=g;if(H["/"]==null&&(H["/"]=g),k.$$p=null,X=Z(arguments),X.length>0&&(y=X.shift()),y==null&&(y=H["/"]),i=X,c===g)return $e(a,"enum_for",["each",y].concat(K(i)));for(;A($=$e(a,"gets",[y].concat(K(i))));)e.yield1(c,$);return a},-1),ee(o,"$each_byte",function k(){var h=k.$$p||g,l=this,c=g;if(k.$$p=null,h===g)return l.$enum_for("each_byte");for(;A(c=l.$getbyte());)e.yield1(h,c);return l}),ee(o,"$each_char",function k(){var h=k.$$p||g,l=this,c=g;if(k.$$p=null,h===g)return l.$enum_for("each_char");for(;A(c=l.$getc());)e.yield1(h,c);return l}),ee(o,"$close",U("closed","both")),ee(o,"$close_read",function(){var h=this;return x(h.closed,"write")?h.closed="both":h.closed="read"}),ee(o,"$close_write",function(){var h=this;return x(h.closed,"read")?h.closed="both":h.closed="write"}),ee(o,"$closed?",function(){var h=this;return h.closed["$=="]("both")}),ee(o,"$closed_read?",function(){var h=this,l=g;return A(l=h.closed["$=="]("read"))?l:h.closed["$=="]("both")}),ee(o,"$closed_write?",function(){var h=this,l=g;return A(l=h.closed["$=="]("write"))?l:h.closed["$=="]("both")}),ee(o,"$check_writable",function(){var h=this;return A(h["$closed_write?"]())?p.$raise(w("IOError"),"not opened for writing"):g}),ee(o,"$check_readable",function(){var h=this;return A(h["$closed_read?"]())?p.$raise(w("IOError"),"not opened for reading"):g}),N(o,"each_line","each"),N(o,"eof?","eof")}("::",null),q("::","STDIN",H.stdin=w("IO").$new(0,"r")),q("::","STDOUT",H.stdout=w("IO").$new(1,"w")),q("::","STDERR",H.stderr=w("IO").$new(2,"w"));var j=e.global.console;return w("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(E){process.stdout.write(E)}:function(E){j.log(E)}),w("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(E){process.stderr.write(E)}:function(E){j.warn(E)}),T=[function(E){var v=prompt();return v!==null?v+`
`:g}],$e(w("STDIN"),"read_proc=",T),T[T.length-1]};Opal.modules["opal/regexp_anchors"]=function(e){var z=e.module,q=e.const_set,D=[];e.nil;var A=e.$$$;return e.add_stubs("new"),function(ee,W){var R=z(ee,"Opal"),Z=[R].concat(W),p=e.$r(Z);return q(R,"REGEXP_START","^"),q(R,"REGEXP_END","$"),q(R,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),q(R,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),q(R,"INLINE_IDENTIFIER_REGEXP",p("Regexp").$new("[^"+A(R,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+A(R,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),q(R,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),q(R,"CONST_NAME_REGEXP",p("Regexp").$new(""+A(R,"REGEXP_START")+"(::)?[A-Z][^"+A(R,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+A(R,"REGEXP_END")))}(D[0],D)};Opal.modules["opal/mini"]=function(e){var z=e.Object;return e.nil,e.add_stubs("require"),z.$require("opal/base"),z.$require("corelib/nil"),z.$require("corelib/boolean"),z.$require("corelib/string"),z.$require("corelib/comparable"),z.$require("corelib/enumerable"),z.$require("corelib/enumerator"),z.$require("corelib/array"),z.$require("corelib/hash"),z.$require("corelib/number"),z.$require("corelib/range"),z.$require("corelib/proc"),z.$require("corelib/method"),z.$require("corelib/regexp"),z.$require("corelib/variables"),z.$require("corelib/io"),z.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(e){var z=e.coerce_to,q=e.module,D=e.slice,A=e.truthy,ee=e.eqeq,W=e.Opal,R=e.Kernel,Z=e.gvars,p=e.def,H=e.alias,$e=e.nil,K=e.$$$;return e.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(Y){var te=q(Y,"Kernel");return p(te,"$format",function(x,P){var B,U,N=$e;Z.DEBUG==null&&(Z.DEBUG=$e),B=D(arguments,1),U=B,ee(U.$length(),1)&&A(U["$[]"](0)["$respond_to?"]("to_ary"))&&(N=W["$coerce_to?"](U["$[]"](0),K("Array"),"to_ary"),A(N["$nil?"]())||(U=N.$to_a()));var T="",g=0,w,j,E=x.length,v,o,d,k,h,l,c,X,y,i,a,$,n,t=1,r=0,s,u=0,f=1,m=2,S=4,C=8,M=16,J=32,O=64,ae=128;function le(){s&J&&R.$raise(K("ArgumentError"),"flag after width"),s&ae&&R.$raise(K("ArgumentError"),"flag after precision")}function ce(){s&J&&R.$raise(K("ArgumentError"),"width given twice"),s&ae&&R.$raise(K("ArgumentError"),"width after precision")}function de(I){return I>=U.length&&R.$raise(K("ArgumentError"),"too few arguments"),U[I]}function he(){switch(r){case-1:R.$raise(K("ArgumentError"),"unnumbered("+t+") mixed with numbered");case-2:R.$raise(K("ArgumentError"),"unnumbered("+t+") mixed with named")}return r=t++,de(r-1)}function ve(I){return r>0&&R.$raise(K("ArgumentError"),"numbered("+I+") after unnumbered("+r+")"),r===-2&&R.$raise(K("ArgumentError"),"numbered("+I+") after named"),I<1&&R.$raise(K("ArgumentError"),"invalid index - "+I+"$"),r=-1,de(I-1)}function me(){return n===void 0?he():n}function be(I){for(var L,V="";;j++){if(j===E&&R.$raise(K("ArgumentError"),"malformed format string - %*[0-9]"),x.charCodeAt(j)<48||x.charCodeAt(j)>57)return j--,L=parseInt(V,10)||0,L>2147483647&&R.$raise(K("ArgumentError"),""+I+" too big"),L;V+=x.charAt(j)}}function ie(I){var L,V=be(I);return x.charAt(j+1)==="$"?(j++,L=ve(V)):L=he(),L.$to_int()}for(j=x.indexOf("%");j!==-1;j=x.indexOf("%",j)){switch(o=void 0,s=u,k=-1,h=-1,n=void 0,w=j,j++,x.charAt(j)){case"%":g=j;case"":case`
`:case"\0":j++;continue}e:for(;j<E;j++)switch(x.charAt(j)){case" ":le(),s|=M;continue e;case"#":le(),s|=f;continue e;case"+":le(),s|=S;continue e;case"-":le(),s|=m;continue e;case"0":le(),s|=C;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(l=be("width"),x.charAt(j+1)==="$"){if(j+2===E){o="%",j++;break e}n!==void 0&&R.$raise(K("ArgumentError"),"value given twice - %"+l+"$"),n=ve(l),j++}else ce(),s|=J,k=l;continue e;case"<":case"{":for(X=x.charAt(j)==="<"?">":"}",c="",j++;;j++){if(j===E&&R.$raise(K("ArgumentError"),"malformed name - unmatched parenthesis"),x.charAt(j)===X){if(r>0&&R.$raise(K("ArgumentError"),"named "+c+" after unnumbered("+r+")"),r===-1&&R.$raise(K("ArgumentError"),"named "+c+" after numbered"),r=-2,(U[0]===void 0||!U[0].$$is_hash)&&R.$raise(K("ArgumentError"),"one hash required"),n=U[0].$fetch(c),X===">")continue e;if(o=n.toString(),h!==-1&&(o=o.slice(0,h)),s&m)for(;o.length<k;)o=o+" ";else for(;o.length<k;)o=" "+o;break e}c+=x.charAt(j)}case"*":j++,ce(),s|=J,k=ie("width"),k<0&&(s|=m,k=-k);continue e;case".":if(s&ae&&R.$raise(K("ArgumentError"),"precision given twice"),s|=O|ae,h=0,j++,x.charAt(j)==="*"){j++,h=ie("precision"),h<0&&(s&=~O);continue e}h=be("precision");continue e;case"d":case"i":case"u":if(v=R.$Integer(me()),v>=0){for(o=v.toString();o.length<h;)o="0"+o;if(s&m)for((s&S||s&M)&&(o=(s&S?"+":" ")+o);o.length<k;)o=o+" ";else if(s&C&&h===-1){for(;o.length<k-(s&S||s&M?1:0);)o="0"+o;(s&S||s&M)&&(o=(s&S?"+":" ")+o)}else for((s&S||s&M)&&(o=(s&S?"+":" ")+o);o.length<k;)o=" "+o}else{for(o=(-v).toString();o.length<h;)o="0"+o;if(s&m)for(o="-"+o;o.length<k;)o=o+" ";else if(s&C&&h===-1){for(;o.length<k-1;)o="0"+o;o="-"+o}else for(o="-"+o;o.length<k;)o=" "+o}break e;case"b":case"B":case"o":case"x":case"X":switch(x.charAt(j)){case"b":case"B":y=2,i="0b",a=/^1+/,$="1";break;case"o":y=8,i="0",a=/^3?7+/,$="7";break;case"x":case"X":y=16,i="0x",a=/^f+/,$="f";break}if(v=R.$Integer(me()),v>=0){for(o=v.toString(y);o.length<h;)o="0"+o;if(s&m)for((s&S||s&M)&&(o=(s&S?"+":" ")+o),s&f&&v!==0&&(o=i+o);o.length<k;)o=o+" ";else if(s&C&&h===-1){for(;o.length<k-(s&S||s&M?1:0)-(s&f&&v!==0?i.length:0);)o="0"+o;s&f&&v!==0&&(o=i+o),(s&S||s&M)&&(o=(s&S?"+":" ")+o)}else for(s&f&&v!==0&&(o=i+o),(s&S||s&M)&&(o=(s&S?"+":" ")+o);o.length<k;)o=" "+o}else if(s&S||s&M){for(o=(-v).toString(y);o.length<h;)o="0"+o;if(s&m)for(s&f&&(o=i+o),o="-"+o;o.length<k;)o=o+" ";else if(s&C&&h===-1){for(;o.length<k-1-(s&f?2:0);)o="0"+o;s&f&&(o=i+o),o="-"+o}else for(s&f&&(o=i+o),o="-"+o;o.length<k;)o=" "+o}else{for(o=(v>>>0).toString(y).replace(a,$);o.length<h-2;)o=$+o;if(s&m)for(o=".."+o,s&f&&(o=i+o);o.length<k;)o=o+" ";else if(s&C&&h===-1){for(;o.length<k-2-(s&f?i.length:0);)o=$+o;o=".."+o,s&f&&(o=i+o)}else for(o=".."+o,s&f&&(o=i+o);o.length<k;)o=" "+o}x.charAt(j)===x.charAt(j).toUpperCase()&&(o=o.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(v=R.$Float(me()),v>=0||isNaN(v)){if(v===1/0)o="Inf";else switch(x.charAt(j)){case"f":o=v.toFixed(h===-1?6:h);break;case"e":case"E":o=v.toExponential(h===-1?6:h);break;case"g":case"G":o=v.toExponential(),d=parseInt(o.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(o=v.toPrecision(h===-1?s&f?6:void 0:h));break}if(s&m)for((s&S||s&M)&&(o=(s&S?"+":" ")+o);o.length<k;)o=o+" ";else if(s&C&&v!==1/0&&!isNaN(v)){for(;o.length<k-(s&S||s&M?1:0);)o="0"+o;(s&S||s&M)&&(o=(s&S?"+":" ")+o)}else for((s&S||s&M)&&(o=(s&S?"+":" ")+o);o.length<k;)o=" "+o}else{if(v===-1/0)o="Inf";else switch(x.charAt(j)){case"f":o=(-v).toFixed(h===-1?6:h);break;case"e":case"E":o=(-v).toExponential(h===-1?6:h);break;case"g":case"G":o=(-v).toExponential(),d=parseInt(o.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(o=(-v).toPrecision(h===-1?s&f?6:void 0:h));break}if(s&m)for(o="-"+o;o.length<k;)o=o+" ";else if(s&C&&v!==-1/0){for(;o.length<k-1;)o="0"+o;o="-"+o}else for(o="-"+o;o.length<k;)o=" "+o}x.charAt(j)===x.charAt(j).toUpperCase()&&v!==1/0&&v!==-1/0&&!isNaN(v)&&(o=o.toUpperCase()),o=o.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":R.$raise(K("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(v=me(),v["$respond_to?"]("to_ary")&&(v=v.$to_ary()[0]),v["$respond_to?"]("to_str")?o=v.$to_str():o=String.fromCharCode(z(v,K("Integer"),"to_int")),o.length!==1&&R.$raise(K("ArgumentError"),"%c requires a character"),s&m)for(;o.length<k;)o=o+" ";else for(;o.length<k;)o=" "+o;break e;case"p":if(o=me().$inspect(),h!==-1&&(o=o.slice(0,h)),s&m)for(;o.length<k;)o=o+" ";else for(;o.length<k;)o=" "+o;break e;case"s":if(o=me().$to_s(),h!==-1&&(o=o.slice(0,h)),s&m)for(;o.length<k;)o=o+" ";else for(;o.length<k;)o=" "+o;break e;default:R.$raise(K("ArgumentError"),"malformed format string - %"+x.charAt(j))}o===void 0&&R.$raise(K("ArgumentError"),"malformed format string - %"),T+=x.slice(g,w)+o,g=j+1}return Z.DEBUG&&r>=0&&t<U.length&&R.$raise(K("ArgumentError"),"too many arguments for format string"),T+x.slice(g)},-2),H(te,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(e){var z=e.klass,q=e.rb_plus,D=e.truthy,A=e.send,ee=e.defs,W=e.eqeq,R=e.def,Z=e.return_ivar,p=e.return_val,H=e.slice,$e=e.Kernel,K=e.Opal,Y=e.rb_lt,te,F=e.top,x=[],P=e.$r(x),B=e.nil,U=e.$$$;return e.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),F.$require("corelib/string"),function(N,T,g){var w=z(N,T,"Encoding"),j=[w].concat(g),E=w.$$prototype;return E.name=E.dummy=B,ee(w,"$register",function v(o,d){var k=v.$$p||B,h=this,l=B,c=B,X=B,y=B,i=B,a=B;return v.$$p=null,d==null&&(d=new Map),l=q([o],D(c=d["$[]"]("aliases"))?c:[]),X=D(c=d["$[]"]("ascii"))&&c,y=D(c=d["$[]"]("dummy"))&&c,D(d["$[]"]("inherits"))?(i=d["$[]"]("inherits").$clone(),i.$initialize(o,l,X,y)):i=h.$new(o,l,X,y),k!==B&&A(i,"instance_eval",[],k.$to_proc()),a=e.encodings,A(l,"each",[],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=B),t.$const_set(n.$tr("-","_"),i),a[n]=i},{$$s:h})},-2),ee(w,"$find",function(o){var d=this;return W(o,"default_external")?d.$default_external():e.find_encoding(o)}),w.$singleton_class().$attr_accessor("default_external"),w.$attr_reader("name","names"),R(w,"$initialize",function(o,d,k,h){var l=this;return l.name=o,l.names=d,l.ascii=k,l.dummy=h}),R(w,"$ascii_compatible?",Z("ascii")),R(w,"$dummy?",Z("dummy")),R(w,"$binary?",p(!1)),R(w,"$to_s",Z("name")),R(w,"$inspect",function(){var o=this;return"#<Encoding:"+o.name+(D(o.dummy)?" (dummy)":B)+">"}),R(w,"$charsize",function(o){for(var d=0,k=0,h=o.length;k<h;k++){var l=o.charCodeAt(k);l>=55296&&l<=56319||d++}return d}),R(w,"$each_char",function v(o){var d=v.$$p||B;v.$$p=null;for(var k="",h=0,l=o.length;h<l;h++){var c=o.charCodeAt(h),X=o.charAt(h);if(c>=56320&&c<=57343){k=X;continue}else c>=55296&&c<=56319&&(X=k+X);o.encoding.name!="UTF-8"&&(X=new String(X),X.encoding=o.encoding),e.yield1(d,X)}}),R(w,"$each_byte",function(o){return H(arguments),$e.$raise(U("NotImplementedError"))},-1),R(w,"$bytesize",function(o){return H(arguments),$e.$raise(U("NotImplementedError"))},-1),z("::",U("StandardError"),"EncodingError"),z("::",U("EncodingError"),"CompatibilityError"),z(j[0],U("EncodingError"),"UndefinedConversionError"),B}("::",null,x),A(U("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function N(){var T=N.$$s==null?this:N.$$s;return R(T,"$each_byte",function g(w){var j=g.$$p||B;g.$$p=null;for(var E=1/0,v,o=w.length,d=null,k=0;k<o;++k){if(v=w.charCodeAt(k),v>55295&&v<57344){if(!d){if(v>56319){(E-=3)>-1&&(e.yield1(j,239),e.yield1(j,191),e.yield1(j,189));continue}else if(k+1===o){(E-=3)>-1&&(e.yield1(j,239),e.yield1(j,191),e.yield1(j,189));continue}d=v;continue}if(v<56320){(E-=3)>-1&&(e.yield1(j,239),e.yield1(j,191),e.yield1(j,189)),d=v;continue}v=(d-55296<<10|v-56320)+65536}else d&&(E-=3)>-1&&(e.yield1(j,239),e.yield1(j,191),e.yield1(j,189));if(d=null,v<128){if((E-=1)<0)break;e.yield1(j,v)}else if(v<2048){if((E-=2)<0)break;e.yield1(j,v>>6|192),e.yield1(j,v&63|128)}else if(v<65536){if((E-=3)<0)break;e.yield1(j,v>>12|224),e.yield1(j,v>>6&63|128),e.yield1(j,v&63|128)}else if(v<1114112){if((E-=4)<0)break;e.yield1(j,v>>18|240),e.yield1(j,v>>12&63|128),e.yield1(j,v>>6&63|128),e.yield1(j,v&63|128)}}}),R(T,"$bytesize",function(w){return w.$bytes().$length()})},{$$s:F}),A(U("Encoding"),"register",["UTF-16LE"],function N(){var T=N.$$s==null?this:N.$$s;return R(T,"$each_byte",function g(w){var j=g.$$p||B;g.$$p=null;for(var E=0,v=w.length;E<v;E++){var o=w.charCodeAt(E);e.yield1(j,o&255),e.yield1(j,o>>8)}}),R(T,"$bytesize",function(w){return w.length*2})},{$$s:F}),A(U("Encoding"),"register",["UTF-16BE",new Map([["inherits",U(U("Encoding"),"UTF_16LE")]])],function N(){var T=N.$$s==null?this:N.$$s;return R(T,"$each_byte",function g(w){var j=g.$$p||B;g.$$p=null;for(var E=0,v=w.length;E<v;E++){var o=w.charCodeAt(E);e.yield1(j,o>>8),e.yield1(j,o&255)}})},{$$s:F}),A(U("Encoding"),"register",["UTF-32LE"],function N(){var T=N.$$s==null?this:N.$$s;return R(T,"$each_byte",function g(w){var j=g.$$p||B;g.$$p=null;for(var E=0,v=w.length;E<v;E++){var o=w.charCodeAt(E);e.yield1(j,o&255),e.yield1(j,o>>8),e.yield1(j,0),e.yield1(j,0)}}),R(T,"$bytesize",function(w){return w.length*4})},{$$s:F}),A(U("Encoding"),"register",["UTF-32BE",new Map([["inherits",U(U("Encoding"),"UTF_32LE")]])],function N(){var T=N.$$s==null?this:N.$$s;return R(T,"$each_byte",function g(w){var j=g.$$p||B;g.$$p=null;for(var E=0,v=w.length;E<v;E++){var o=w.charCodeAt(E);e.yield1(j,0),e.yield1(j,0),e.yield1(j,o>>8),e.yield1(j,o&255)}})},{$$s:F}),A(U("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function N(){var T=N.$$s==null?this:N.$$s;return R(T,"$each_char",function g(w){var j=g.$$p||B;g.$$p=null;for(var E=0,v=w.length;E<v;E++){var o=new String(w.charAt(E));o.encoding=w.encoding,e.yield1(j,o)}}),R(T,"$charsize",function(w){return w.length}),R(T,"$each_byte",function g(w){var j=g.$$p||B;g.$$p=null;for(var E=0,v=w.length;E<v;E++){var o=w.charCodeAt(E);e.yield1(j,o&255)}}),R(T,"$bytesize",function(w){return w.length}),R(T,"$binary?",p(!0))},{$$s:F}),U("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",U(U("Encoding"),"ASCII_8BIT")]])),U("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",U(U("Encoding"),"ASCII_8BIT")]])),function(N,T){var g=z(N,T,"String"),w=g.$$prototype;return w.internal_encoding=w.bytes=w.encoding=B,g.$attr_reader("encoding"),g.$attr_reader("internal_encoding"),e.prop(String.prototype,"bytes",B),e.prop(String.prototype,"encoding",U(U("Encoding"),"UTF_8")),e.prop(String.prototype,"internal_encoding",U(U("Encoding"),"UTF_8")),R(g,"$b",function(){var E=this;return E.$dup().$force_encoding("binary")}),R(g,"$bytesize",function(){var E=this;return E.internal_encoding.$bytesize(E)}),R(g,"$each_byte",function j(){var E=j.$$p||B,v=this;return j.$$p=null,E===B?A(v,"enum_for",["each_byte"],function o(){var d=o.$$s==null?this:o.$$s;return d.$bytesize()},{$$s:v}):(A(v.internal_encoding,"each_byte",[v],E.$to_proc()),v)}),R(g,"$bytes",function(){var E=this,v=B;return typeof E=="string"?new String(E).$each_byte().$to_a():(E.bytes=D(v=E.bytes)?v:E.$each_byte().$to_a(),E.bytes.$dup())}),R(g,"$each_char",function j(){var E=j.$$p||B,v=this;return j.$$p=null,E===B?A(v,"enum_for",["each_char"],function o(){var d=o.$$s==null?this:o.$$s;return d.$length()},{$$s:v}):(A(v.encoding,"each_char",[v],E.$to_proc()),v)}),R(g,"$chars",function j(){var E=j.$$p||B,v=this;return j.$$p=null,D(E)?A(v,"each_char",[],E.$to_proc()):v.$each_char().$to_a()}),R(g,"$each_codepoint",function j(){var E=j.$$p||B,v=this;if(j.$$p=null,E===B)return v.$enum_for("each_codepoint");for(var o=0,d=v.length;o<d;o++)e.yield1(E,v.codePointAt(o));return v}),R(g,"$codepoints",function j(){var E=j.$$p||B,v=this;return j.$$p=null,E!==B?A(v,"each_codepoint",[],E.$to_proc()):v.$each_codepoint().$to_a()}),R(g,"$encode",function(E){var v=this;return e.enc(v,E)}),R(g,"$force_encoding",function(E){var v=this,o=v;return E===o.encoding||(E=K["$coerce_to!"](E,U("String"),"to_s"),E=U("Encoding").$find(E),E===o.encoding)||(o=e.set_encoding(o,E)),o}),R(g,"$getbyte",function(E){var v=this,o=B;return o=v.$bytes(),E=K["$coerce_to!"](E,U("Integer"),"to_int"),D(Y(o.$length(),E))?B:o["$[]"](E)}),R(g,"$initialize_copy",function(E){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),R(g,"$valid_encoding?",p(!0))}("::",null),te=[U(P("Encoding"),"UTF_8")],A(U("Encoding"),"default_external=",te),te[te.length-1]};Opal.modules["corelib/math"]=function(e){var z=e.type_error,q=e.module,D=e.const_set,A=e.Class,ee=e.slice,W=e.Kernel,R=e.defs,Z=e.truthy,p=e.send,H=e.def,$e=e.rb_minus,K=e.eqeqeq,Y=e.rb_divide,te=[],F=e.nil,x=e.$$$;return e.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(P,B){var U=q(P,"Math"),N=[U].concat(B),T=e.$r(N);return D(U,"E",Math.E),D(U,"PI",Math.PI),D(U,"DomainError",A.$new(x("StandardError"))),R(U,"$checked",function(w,j){var E,v;if(E=ee(arguments,1),v=E,isNaN(v[0])||v.length==2&&isNaN(v[1]))return NaN;var o=Math[w].apply(null,v);return isNaN(o)&&W.$raise(T("DomainError"),'Numerical argument is out of domain - "'+w+'"'),o},-2),R(U,"$float!",function(w){try{return W.$Float(w)}catch(j){if(e.rescue(j,[x("ArgumentError")]))try{return W.$raise(z(w,x("Float")))}finally{e.pop_exception(j)}else throw j}}),R(U,"$integer!",function(w){try{return W.$Integer(w)}catch(j){if(e.rescue(j,[x("ArgumentError")]))try{return W.$raise(z(w,x("Integer")))}finally{e.pop_exception(j)}else throw j}}),U.$module_function(),Z(typeof Math.erf<"u")||e.prop(Math,"erf",function(g){var w=.254829592,j=-.284496736,E=1.421413741,v=-1.453152027,o=1.061405429,d=.3275911,k=1;g<0&&(k=-1),g=Math.abs(g);var h=1/(1+d*g),l=1-((((o*h+v)*h+E)*h+j)*h+w)*h*Math.exp(-g*g);return k*l}),Z(typeof Math.erfc<"u")||e.prop(Math,"erfc",function(g){var w=Math.abs(g),j=1/(.5*w+1),E=j*.17087277+-.82215223,v=j*E+1.48851587,o=j*v+-1.13520398,d=j*o+.27886807,k=j*d+-.18628806,h=j*k+.09678418,l=j*h+.37409196,c=j*l+1.00002368,X=j*c,y=-w*w-1.26551223+X,i=j*Math.exp(y);return g<0?2-i:i}),p(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function g(w){var j=g.$$s==null?this:g.$$s;return w==null&&(w=F),p(j,"define_method",[w],function(v){return v==null&&(v=F),x("Math").$checked(w,x("Math")["$float!"](v))})},{$$s:U}),H(U,"$atan2",function(w,j){return x("Math").$checked("atan2",x("Math")["$float!"](w),x("Math")["$float!"](j))}),H(U,"$hypot",function(w,j){return x("Math").$checked("hypot",x("Math")["$float!"](w),x("Math")["$float!"](j))}),H(U,"$frexp",function(w){if(w=T("Math")["$float!"](w),isNaN(w))return[NaN,0];var j=Math.floor(Math.log(Math.abs(w))/Math.log(2))+1,E=w/Math.pow(2,j);return[E,j]}),H(U,"$gamma",function(w){w=T("Math")["$float!"](w);var j,E,v,o,d,k,h,l,c,X=4.7421875,y=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(w))return NaN;if(w===0&&1/w<0)return-1/0;if((w===-1||w===-1/0)&&W.$raise(T("DomainError"),'Numerical argument is out of domain - "gamma"'),T("Integer")["$==="](w)){if(w<=0)return isFinite(w)?1/0:NaN;if(w>171)return 1/0;for(o=w-2,d=w-1;o>1;)d*=o,o--;return d==0&&(d=1),d}if(w<.5)return Math.PI/(Math.sin(Math.PI*w)*x("Math").$gamma($e(1,w)));if(w>=171.35)return 1/0;if(w>85)return k=w*w,h=k*w,l=h*w,c=l*w,Math.sqrt(2*Math.PI/w)*Math.pow(w/Math.E,w)*(1+1/(12*w)+1/(288*k)-139/(51840*h)-571/(2488320*l)+163879/(209018880*c)+5246819/(75246796800*c*w));for(w-=1,v=y[0],j=1;j<y.length;++j)v+=y[j]/(w+j);return E=w+X+.5,Math.sqrt(2*Math.PI)*Math.pow(E,w+.5)*Math.exp(-E)*v}),H(U,"$ldexp",function(w,j){return w=T("Math")["$float!"](w),j=T("Math")["$integer!"](j),isNaN(j)&&W.$raise(x("RangeError"),"float NaN out of range of integer"),w*Math.pow(2,j)}),H(U,"$lgamma",function(w){return w==-1?[1/0,1]:[Math.log(Math.abs(x("Math").$gamma(w))),x("Math").$gamma(w)<0?-1:1]}),H(U,"$log",function(w,j){return K(x("String"),w)&&W.$raise(z(w,x("Float"))),Z(j==null)?x("Math").$checked("log",x("Math")["$float!"](w)):(K(x("String"),j)&&W.$raise(z(j,x("Float"))),Y(x("Math").$checked("log",x("Math")["$float!"](w)),x("Math").$checked("log",x("Math")["$float!"](j))))},-2),H(U,"$log10",function(w){return K(x("String"),w)&&W.$raise(z(w,x("Float"))),x("Math").$checked("log10",x("Math")["$float!"](w))}),H(U,"$log2",function(w){return K(x("String"),w)&&W.$raise(z(w,x("Float"))),x("Math").$checked("log2",x("Math")["$float!"](w))}),H(U,"$tan",function(w){return w=x("Math")["$float!"](w),Z(w["$infinite?"]())?x(x("Float"),"NAN"):x("Math").$checked("tan",x("Math")["$float!"](w))})}("::",te)};Opal.modules["corelib/complex/base"]=function(e){var z=e.module,q=e.truthy,D=e.def,A=e.klass,ee=[],W=e.nil;return e.add_stubs("new,from_string"),function(R,Z){var p=z(R,"Kernel"),H=[p].concat(Z),$e=e.$r(H);return D(p,"$Complex",function(Y,te){return te==null&&(te=W),q(te)?$e("Complex").$new(Y,te):$e("Complex").$new(Y,0)},-2)}("::",ee),function(R,Z,p){var H=A(R,Z,"String"),$e=[H].concat(p),K=e.$r($e);return D(H,"$to_c",function(){var te=this;return K("Complex").$from_string(te)})}("::",null,ee)};Opal.modules["corelib/complex"]=function(e){var z=e.klass,q=e.truthy,D=e.eqeqeq,A=e.Kernel,ee=e.defs,W=e.rb_times,R=e.def,Z=e.rb_plus,p=e.rb_minus,H=e.rb_divide,$e=e.eqeq,K=e.to_ary,Y=e.rb_gt,te=e.neqeq,F=e.return_val,x=e.const_set,P=e.alias,B=e.top,U=[],N=e.nil,T=e.$$$;return e.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),B.$require("corelib/numeric"),B.$require("corelib/complex/base"),function(g,w,j){var E=z(g,w,"Complex"),v=[E].concat(j),o=e.$r(v),d=E.$$prototype;return d.real=d.imag=N,ee(E,"$rect",function(h,l){var c=this;return l==null&&(l=0),D(T("Numeric"),h)&&q(h["$real?"]())&&D(T("Numeric"),l)&&q(l["$real?"]())||A.$raise(T("TypeError"),"not a real"),c.$new(h,l)},-2),ee(E,"$polar",function(h,l){var c=this;return l==null&&(l=0),D(T("Numeric"),h)&&q(h["$real?"]())&&D(T("Numeric"),l)&&q(l["$real?"]())||A.$raise(T("TypeError"),"not a real"),c.$new(W(h,T("Math").$cos(l)),W(h,T("Math").$sin(l)))},-2),E.$attr_reader("real","imag"),R(E,"$initialize",function(h,l){var c=this;return l==null&&(l=0),c.real=h,c.imag=l,c.$freeze()},-2),R(E,"$coerce",function(h){var l=this;return D(T("Complex"),h)?[h,l]:D(T("Numeric"),h)&&q(h["$real?"]())?[T("Complex").$new(h,0),l]:A.$raise(T("TypeError"),""+h.$class()+" can't be coerced into Complex")}),R(E,"$==",function(h){var l=this,c=N;return D(T("Complex"),h)?q(c=l.real["$=="](h.$real()))?l.imag["$=="](h.$imag()):c:D(T("Numeric"),h)&&q(h["$real?"]())?q(c=l.real["$=="](h))?l.imag["$=="](0):c:h["$=="](l)}),R(E,"$-@",function(){var h=this;return A.$Complex(h.real["$-@"](),h.imag["$-@"]())}),R(E,"$+",function(h){var l=this;return D(T("Complex"),h)?A.$Complex(Z(l.real,h.$real()),Z(l.imag,h.$imag())):D(T("Numeric"),h)&&q(h["$real?"]())?A.$Complex(Z(l.real,h),l.imag):l.$__coerced__("+",h)}),R(E,"$-",function(h){var l=this;return D(T("Complex"),h)?A.$Complex(p(l.real,h.$real()),p(l.imag,h.$imag())):D(T("Numeric"),h)&&q(h["$real?"]())?A.$Complex(p(l.real,h),l.imag):l.$__coerced__("-",h)}),R(E,"$*",function(h){var l=this;return D(T("Complex"),h)?A.$Complex(p(W(l.real,h.$real()),W(l.imag,h.$imag())),Z(W(l.real,h.$imag()),W(l.imag,h.$real()))):D(T("Numeric"),h)&&q(h["$real?"]())?A.$Complex(W(l.real,h),W(l.imag,h)):l.$__coerced__("*",h)}),R(E,"$/",function(h){var l=this;return D(T("Complex"),h)?D(T("Number"),l.real)&&q(l.real["$nan?"]())||D(T("Number"),l.imag)&&q(l.imag["$nan?"]())||D(T("Number"),h.$real())&&q(h.$real()["$nan?"]())||D(T("Number"),h.$imag())&&q(h.$imag()["$nan?"]())?T("Complex").$new(T(T("Float"),"NAN"),T(T("Float"),"NAN")):H(W(l,h.$conj()),h.$abs2()):D(T("Numeric"),h)&&q(h["$real?"]())?A.$Complex(l.real.$quo(h),l.imag.$quo(h)):l.$__coerced__("/",h)}),R(E,"$**",function(h){var l,c,X=this,y=N,i=N,a=N,$=N,n=N,t=N,r=N,s=N,u=N,f=N,m=N;if($e(h,0))return T("Complex").$new(1,0);if(D(T("Complex"),h))return c=X.$polar(),l=K(c),y=l[0]==null?N:l[0],i=l[1]==null?N:l[1],a=h.$real(),$=h.$imag(),n=T("Math").$exp(p(W(a,T("Math").$log(y)),W($,i))),t=Z(W(i,a),W($,T("Math").$log(y))),T("Complex").$polar(n,t);if(D(T("Integer"),h))if(q(Y(h,0))){for(r=X,s=r,u=p(h,1);te(u,0);){for(c=u.$divmod(2),l=K(c),f=l[0]==null?N:l[0],m=l[1]==null?N:l[1];$e(m,0);)r=A.$Complex(p(W(r.$real(),r.$real()),W(r.$imag(),r.$imag())),W(W(2,r.$real()),r.$imag())),u=f,c=u.$divmod(2),l=K(c),f=l[0]==null?N:l[0],m=l[1]==null?N:l[1];s=W(s,r),u=p(u,1)}return s}else return H(T("Rational").$new(1,1),X)["$**"](h["$-@"]());else return D(T("Float"),h)||D(T("Rational"),h)?(c=X.$polar(),l=K(c),y=l[0]==null?N:l[0],i=l[1]==null?N:l[1],T("Complex").$polar(y["$**"](h),W(i,h))):X.$__coerced__("**",h)}),R(E,"$abs",function(){var h=this;return T("Math").$hypot(h.real,h.imag)}),R(E,"$abs2",function(){var h=this;return Z(W(h.real,h.real),W(h.imag,h.imag))}),R(E,"$angle",function(){var h=this;return T("Math").$atan2(h.imag,h.real)}),R(E,"$conj",function(){var h=this;return A.$Complex(h.real,h.imag["$-@"]())}),R(E,"$denominator",function(){var h=this;return h.real.$denominator().$lcm(h.imag.$denominator())}),R(E,"$eql?",function(h){var l=this,c=N,X=N;return q(c=q(X=o("Complex")["$==="](h))?l.real.$class()["$=="](l.imag.$class()):X)?l["$=="](h):c}),R(E,"$fdiv",function(h){var l=this;return D(T("Numeric"),h)||A.$raise(T("TypeError"),""+h.$class()+" can't be coerced into Complex"),H(l,h)}),R(E,"$finite?",function(){var h=this,l=N;return q(l=h.real["$finite?"]())?h.imag["$finite?"]():l}),R(E,"$hash",function(){var h=this;return[T("Complex"),h.real,h.imag].$hash()}),R(E,"$infinite?",function(){var h=this,l=N;return q(l=h.real["$infinite?"]())?l:h.imag["$infinite?"]()}),R(E,"$inspect",function(){var h=this;return"("+h+")"}),R(E,"$numerator",function(){var h=this,l=N;return l=h.$denominator(),A.$Complex(W(h.real.$numerator(),H(l,h.real.$denominator())),W(h.imag.$numerator(),H(l,h.imag.$denominator())))}),R(E,"$polar",function(){var h=this;return[h.$abs(),h.$arg()]}),R(E,"$rationalize",function(h){var l=this;return arguments.length>1&&A.$raise(T("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),te(l.imag,0)&&A.$raise(T("RangeError"),"can't convert "+l+" into Rational"),l.$real().$rationalize(h)},-1),R(E,"$real?",F(!1)),R(E,"$rect",function(){var h=this;return[h.real,h.imag]}),R(E,"$to_f",function(){var h=this;return $e(h.imag,0)||A.$raise(T("RangeError"),"can't convert "+h+" into Float"),h.real.$to_f()}),R(E,"$to_i",function(){var h=this;return $e(h.imag,0)||A.$raise(T("RangeError"),"can't convert "+h+" into Integer"),h.real.$to_i()}),R(E,"$to_r",function(){var h=this;return $e(h.imag,0)||A.$raise(T("RangeError"),"can't convert "+h+" into Rational"),h.real.$to_r()}),R(E,"$to_s",function(){var h=this,l=N;return l=h.real.$inspect(),l=Z(l,D(T("Number"),h.imag)&&q(h.imag["$nan?"]())||q(h.imag["$positive?"]())||q(h.imag["$zero?"]())?"+":"-"),l=Z(l,h.imag.$abs().$inspect()),D(T("Number"),h.imag)&&(q(h.imag["$nan?"]())||q(h.imag["$infinite?"]()))&&(l=Z(l,"*")),Z(l,"i")}),x(v[0],"I",E.$new(0,1)),ee(E,"$from_string",function(h){var l=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;h.match(l);var c,X;function y(){return l.test(h)}function i(){var $=h.match(l),n=$[0];return h=h.slice(n.length),n.replace(/_/g,"")}function a(){if(y()){var $=parseFloat(i());if(h[0]==="/")if(h=h.slice(1),y()){var n=parseFloat(i());return A.$Rational($,n)}else return h="/"+h,$;else return $}else return null}return c=a(),c?(X=a(),X?A.$Complex(c,X):h[0]==="i"?A.$Complex(0,c):A.$Complex(c,0)):h[0]==="i"?A.$Complex(0,1):h[0]==="-"&&h[1]==="i"?A.$Complex(0,-1):h[0]==="+"&&h[1]==="i"?A.$Complex(0,1):A.$Complex(0,0)}),function(k,h){return P(k,"rectangular","rect")}(e.get_singleton_class(E)),P(E,"arg","angle"),P(E,"conjugate","conj"),P(E,"divide","/"),P(E,"imaginary","imag"),P(E,"magnitude","abs"),P(E,"phase","arg"),P(E,"quo","/"),P(E,"rectangular","rect"),e.udef(E,"$negative?"),e.udef(E,"$positive?"),e.udef(E,"$step"),N}("::",T("Numeric"),U)};Opal.modules["corelib/rational/base"]=function(e){var z=e.module,q=e.def,D=e.klass;e.nil;var A=e.$$$;return e.add_stubs("convert,from_string"),function(ee){var W=z(ee,"Kernel");return q(W,"$Rational",function(Z,p){return p==null&&(p=1),A("Rational").$convert(Z,p)},-2)}("::"),function(ee,W){var R=D(ee,W,"String");return q(R,"$to_r",function(){var p=this;return A("Rational").$from_string(p)})}("::",null)};Opal.modules["corelib/rational"]=function(e){var z=e.klass,q=e.eqeq,D=e.Kernel,A=e.truthy,ee=e.rb_lt,W=e.rb_divide,R=e.defs,Z=e.eqeqeq,p=e.not,H=e.Opal,$e=e.def,K=e.return_ivar,Y=e.rb_minus,te=e.rb_times,F=e.rb_plus,x=e.rb_gt,P=e.rb_le,B=e.return_self,U=e.alias,N=e.top,T=e.nil,g=e.$$$;return e.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),N.$require("corelib/numeric"),N.$require("corelib/rational/base"),function(w,j){var E=z(w,j,"Rational"),v=E.$$prototype;return v.num=v.den=T,R(E,"$reduce",function(d,k){var h=this,l=T;if(d=d.$to_i(),k=k.$to_i(),q(k,0))D.$raise(g("ZeroDivisionError"),"divided by 0");else if(A(ee(k,0)))d=d["$-@"](),k=k["$-@"]();else if(q(k,1))return h.$new(d,k);return l=d.$gcd(k),h.$new(W(d,l),W(k,l))}),R(E,"$convert",function(d,k){var h=this;return(A(d["$nil?"]())||A(k["$nil?"]()))&&D.$raise(g("TypeError"),"cannot convert nil into Rational"),Z(g("Integer"),d)&&Z(g("Integer"),k)?h.$reduce(d,k):((Z(g("Float"),d)||Z(g("String"),d)||Z(g("Complex"),d))&&(d=d.$to_r()),(Z(g("Float"),k)||Z(g("String"),k)||Z(g("Complex"),k))&&(k=k.$to_r()),A(k["$equal?"](1))&&p(g("Integer")["$==="](d))?H["$coerce_to!"](d,g("Rational"),"to_r"):Z(g("Numeric"),d)&&Z(g("Numeric"),k)?W(d,k):h.$reduce(d,k))}),$e(E,"$initialize",function(d,k){var h=this;return h.num=d,h.den=k,h.$freeze()}),$e(E,"$numerator",K("num")),$e(E,"$denominator",K("den")),$e(E,"$coerce",function(d){var k=this,h=T;return Z(g("Rational"),h=d)?[d,k]:Z(g("Integer"),h)?[d.$to_r(),k]:Z(g("Float"),h)?[d,k.$to_f()]:T}),$e(E,"$==",function(d){var k=this,h=T,l=T;return Z(g("Rational"),h=d)?A(l=k.num["$=="](d.$numerator()))?k.den["$=="](d.$denominator()):l:Z(g("Integer"),h)?A(l=k.num["$=="](d))?k.den["$=="](1):l:Z(g("Float"),h)?k.$to_f()["$=="](d):d["$=="](k)}),$e(E,"$<=>",function(d){var k=this,h=T;return Z(g("Rational"),h=d)?Y(te(k.num,d.$denominator()),te(k.den,d.$numerator()))["$<=>"](0):Z(g("Integer"),h)?Y(k.num,te(k.den,d))["$<=>"](0):Z(g("Float"),h)?k.$to_f()["$<=>"](d):k.$__coerced__("<=>",d)}),$e(E,"$+",function(d){var k=this,h=T,l=T,c=T;return Z(g("Rational"),h=d)?(l=F(te(k.num,d.$denominator()),te(k.den,d.$numerator())),c=te(k.den,d.$denominator()),D.$Rational(l,c)):Z(g("Integer"),h)?D.$Rational(F(k.num,te(d,k.den)),k.den):Z(g("Float"),h)?F(k.$to_f(),d):k.$__coerced__("+",d)}),$e(E,"$-",function(d){var k=this,h=T,l=T,c=T;return Z(g("Rational"),h=d)?(l=Y(te(k.num,d.$denominator()),te(k.den,d.$numerator())),c=te(k.den,d.$denominator()),D.$Rational(l,c)):Z(g("Integer"),h)?D.$Rational(Y(k.num,te(d,k.den)),k.den):Z(g("Float"),h)?Y(k.$to_f(),d):k.$__coerced__("-",d)}),$e(E,"$*",function(d){var k=this,h=T,l=T,c=T;return Z(g("Rational"),h=d)?(l=te(k.num,d.$numerator()),c=te(k.den,d.$denominator()),D.$Rational(l,c)):Z(g("Integer"),h)?D.$Rational(te(k.num,d),k.den):Z(g("Float"),h)?te(k.$to_f(),d):k.$__coerced__("*",d)}),$e(E,"$/",function(d){var k=this,h=T,l=T,c=T;return Z(g("Rational"),h=d)?(l=te(k.num,d.$denominator()),c=te(k.den,d.$numerator()),D.$Rational(l,c)):Z(g("Integer"),h)?q(d,0)?W(k.$to_f(),0):D.$Rational(k.num,te(k.den,d)):Z(g("Float"),h)?W(k.$to_f(),d):k.$__coerced__("/",d)}),$e(E,"$**",function(d){var k=this,h=T;return Z(g("Integer"),h=d)?q(k,0)&&A(ee(d,0))?g(g("Float"),"INFINITY"):A(x(d,0))?D.$Rational(k.num["$**"](d),k.den["$**"](d)):A(ee(d,0))?D.$Rational(k.den["$**"](d["$-@"]()),k.num["$**"](d["$-@"]())):D.$Rational(1,1):Z(g("Float"),h)?k.$to_f()["$**"](d):Z(g("Rational"),h)?q(d,0)?D.$Rational(1,1):q(d.$denominator(),1)?A(ee(d,0))?D.$Rational(k.den["$**"](d.$numerator().$abs()),k.num["$**"](d.$numerator().$abs())):D.$Rational(k.num["$**"](d.$numerator()),k.den["$**"](d.$numerator())):q(k,0)&&A(ee(d,0))?D.$raise(g("ZeroDivisionError"),"divided by 0"):k.$to_f()["$**"](d):k.$__coerced__("**",d)}),$e(E,"$abs",function(){var d=this;return D.$Rational(d.num.$abs(),d.den.$abs())}),$e(E,"$ceil",function(d){var k=this;return d==null&&(d=0),q(d,0)?W(k.num["$-@"](),k.den)["$-@"]().$ceil():k.$with_precision("ceil",d)},-1),$e(E,"$floor",function(d){var k=this;return d==null&&(d=0),q(d,0)?W(k.num["$-@"](),k.den)["$-@"]().$floor():k.$with_precision("floor",d)},-1),$e(E,"$hash",function(){var d=this;return[g("Rational"),d.num,d.den].$hash()}),$e(E,"$inspect",function(){var d=this;return"("+d+")"}),$e(E,"$rationalize",function(d){var k=this;if(arguments.length>1&&D.$raise(g("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),d==null)return k;for(var h=d.$abs(),l=Y(k,h),c=F(k,h),X=0,y=1,i=1,a=0,$,n,t,r,s;t=l.$ceil(),!P(t,c);)r=t-1,$=r*y+X,n=r*a+i,s=W(1,Y(c,r)),c=W(1,Y(l,r)),l=s,X=y,i=a,y=$,a=n;return D.$Rational(t*y+X,t*a+i)},-1),$e(E,"$round",function(d){var k=this,h=T,l=T,c=T;return d==null&&(d=0),q(d,0)?q(k.num,0)?0:q(k.den,1)?k.num:(h=F(te(k.num.$abs(),2),k.den),l=te(k.den,2),c=W(h,l).$truncate(),A(ee(k.num,0))?c["$-@"]():c):k.$with_precision("round",d)},-1),$e(E,"$to_f",function(){var d=this;return W(d.num,d.den)}),$e(E,"$to_i",function(){var d=this;return d.$truncate()}),$e(E,"$to_r",B),$e(E,"$to_s",function(){var d=this;return""+d.num+"/"+d.den}),$e(E,"$truncate",function(d){var k=this;return d==null&&(d=0),q(d,0)?A(ee(k.num,0))?k.$ceil():k.$floor():k.$with_precision("truncate",d)},-1),$e(E,"$with_precision",function(d,k){var h=this,l=T,c=T;return Z(g("Integer"),k)||D.$raise(g("TypeError"),"not an Integer"),l=10["$**"](k),c=te(h,l),A(ee(k,1))?W(c.$send(d),l).$to_i():D.$Rational(c.$send(d),l)}),R(E,"$from_string",function(d){var k=d.trimLeft(),h=/^[+-]?[\d_]+(\.[\d_]+)?/;k.match(h);var l,c;function X(){return h.test(k)}function y(){var i=k.match(h),a=i[0];return k=k.slice(a.length),a.replace(/_/g,"")}return X()?(l=parseFloat(y()),k[0]==="/"?(k=k.slice(1),X()?(c=parseFloat(y()),D.$Rational(l,c)):D.$Rational(l,1)):D.$Rational(l,1)):D.$Rational(0,1)}),U(E,"divide","/"),U(E,"quo","/")}("::",g("Numeric"))};Opal.modules["corelib/time"]=function(e){var z=e.slice,q=e.deny_frozen_access,D=e.klass,A=e.Kernel,ee=e.Opal,W=e.defs,R=e.eqeqeq,Z=e.def,p=e.truthy,H=e.rb_gt,$e=e.rb_lt,K=e.send,Y=e.rb_plus,te=e.rb_divide,F=e.rb_minus,x=e.range,P=e.neqeq,B=e.rb_le,U=e.eqeq,N=e.alias,T=e.top,g=[],w=e.nil,j=e.$$$;return e.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),T.$require("corelib/comparable"),function(E,v,o){var d=D(E,v,"Time"),k=[d].concat(o),h=e.$r(k);d.$include(j("Comparable"));var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],X=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],y=["January","February","March","April","May","June","July","August","September","October","November","December"];W(d,"$at",function($,n){var t;return j("Time")["$==="]($)?(n!==void 0&&A.$raise(j("TypeError"),"can't convert Time into an exact number"),t=new Date($.getTime()),t.timezone=$.timezone,t):($.$$is_number||($=ee["$coerce_to!"]($,j("Integer"),"to_int")),n===void 0?new Date($*1e3):(n.$$is_number||(n=ee["$coerce_to!"](n,j("Integer"),"to_int")),new Date($*1e3+n/1e3)))},-2);function i(a,$,n,t,r,s){if(a.$$is_string?a=parseInt(a,10):a=ee["$coerce_to!"](a,j("Integer"),"to_int"),$===w)$=1;else if(!$.$$is_number)if($["$respond_to?"]("to_str"))switch($=$.$to_str(),$.toLowerCase()){case"jan":$=1;break;case"feb":$=2;break;case"mar":$=3;break;case"apr":$=4;break;case"may":$=5;break;case"jun":$=6;break;case"jul":$=7;break;case"aug":$=8;break;case"sep":$=9;break;case"oct":$=10;break;case"nov":$=11;break;case"dec":$=12;break;default:$=$.$to_i()}else $=ee["$coerce_to!"]($,j("Integer"),"to_int");return($<1||$>12)&&A.$raise(j("ArgumentError"),"month out of range: "+$),$=$-1,n===w?n=1:n.$$is_string?n=parseInt(n,10):n=ee["$coerce_to!"](n,j("Integer"),"to_int"),(n<1||n>31)&&A.$raise(j("ArgumentError"),"day out of range: "+n),t===w?t=0:t.$$is_string?t=parseInt(t,10):t=ee["$coerce_to!"](t,j("Integer"),"to_int"),(t<0||t>24)&&A.$raise(j("ArgumentError"),"hour out of range: "+t),r===w?r=0:r.$$is_string?r=parseInt(r,10):r=ee["$coerce_to!"](r,j("Integer"),"to_int"),(r<0||r>59)&&A.$raise(j("ArgumentError"),"min out of range: "+r),s===w?s=0:s.$$is_number||(s.$$is_string?s=parseInt(s,10):s=ee["$coerce_to!"](s,j("Integer"),"to_int")),(s<0||s>60)&&A.$raise(j("ArgumentError"),"sec out of range: "+s),[a,$,n,t,r,s]}return W(d,"$new",function($,n,t,r,s,u,f){var m=this;n==null&&(n=w),t==null&&(t=w),r==null&&(r=w),s==null&&(s=w),u==null&&(u=w),f==null&&(f=w);var S,C,M,J;return $===void 0?new Date:(S=i($,n,t,r,s,u),$=S[0],n=S[1],t=S[2],r=S[3],s=S[4],u=S[5],f===w?(C=new Date($,n,t,r,s,0,u*1e3),$<100&&C.setFullYear($),C):(M=m.$_parse_offset(f),J=new Date(Date.UTC($,n,t,r,s,0,u*1e3)),$<100&&J.setUTCFullYear($),C=new Date(J.getTime()-M*36e5),C.timezone=M,C))},-1),W(d,"$_parse_offset",function($){var n;if($.$$is_string)if($=="UTC")n=0;else if(/^[+-]\d\d:[0-5]\d$/.test($)){var t,r,s;t=$[0],r=+($[1]+$[2]),s=+($[4]+$[5]),n=(t=="-"?-1:1)*(r+s/60)}else A.$raise(j("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+$);else $.$$is_number?n=$/3600:A.$raise(j("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return n}),W(d,"$local",function($,n,t,r,s,u,f,m,S,C){n==null&&(n=w),t==null&&(t=w),r==null&&(r=w),s==null&&(s=w),u==null&&(u=w),f==null&&(f=w),m==null&&(m=w),S==null&&(S=w),C==null&&(C=w);var M,J;return arguments.length===10&&(M=z(arguments),$=M[5],n=M[4],t=M[3],r=M[2],s=M[1],u=M[0]),M=i($,n,t,r,s,u),$=M[0],n=M[1],t=M[2],r=M[3],s=M[4],u=M[5],J=new Date($,n,t,r,s,0,u*1e3),$<100&&J.setFullYear($),J},-2),W(d,"$gm",function($,n,t,r,s,u,f,m,S,C){n==null&&(n=w),t==null&&(t=w),r==null&&(r=w),s==null&&(s=w),u==null&&(u=w),f==null&&(f=w),m==null&&(m=w),S==null&&(S=w),C==null&&(C=w);var M,J;return arguments.length===10&&(M=z(arguments),$=M[5],n=M[4],t=M[3],r=M[2],s=M[1],u=M[0]),M=i($,n,t,r,s,u),$=M[0],n=M[1],t=M[2],r=M[3],s=M[4],u=M[5],J=new Date(Date.UTC($,n,t,r,s,0,u*1e3)),$<100&&J.setUTCFullYear($),J.timezone=0,J},-2),W(d,"$now",function(){var $=this;return $.$new()}),Z(d,"$+",function($){var n=this;R(j("Time"),$)&&A.$raise(j("TypeError"),"time + time?"),$.$$is_number||($=ee["$coerce_to!"]($,j("Integer"),"to_int"));var t=new Date(n.getTime()+$*1e3);return t.timezone=n.timezone,t}),Z(d,"$-",function($){var n=this;if(R(j("Time"),$))return(n.getTime()-$.getTime())/1e3;$.$$is_number||($=ee["$coerce_to!"]($,j("Integer"),"to_int"));var t=new Date(n.getTime()-$*1e3);return t.timezone=n.timezone,t}),Z(d,"$<=>",function($){var n=this,t=w;return R(j("Time"),$)?n.$to_f()["$<=>"]($.$to_f()):(t=$["$<=>"](n),p(t["$nil?"]())?w:p(H(t,0))?-1:p($e(t,0))?1:0)}),Z(d,"$==",function($){var n=this,t=w;return p(t=j("Time")["$==="]($))?n.$to_f()===$.$to_f():t}),Z(d,"$asctime",function(){var $=this;return $.$strftime("%a %b %e %H:%M:%S %Y")}),K([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function a($,n,t,r){var s=a.$$s==null?this:a.$$s;return $==null&&($=w),n==null&&(n=w),t==null&&(t=w),r==null&&(r=0),K(s,"define_method",[$],function u(){var f=u.$$s==null?this:u.$$s;return r+(f.timezone!=null?new Date(f.getTime()+f.timezone*36e5)[t]():f[n]())},{$$s:s})},{$$arity:-4,$$s:d}),Z(d,"$yday",function(){var $=this,n=w,t=w,r=w;return n=h("Time").$new($.$year()).$to_i(),t=h("Time").$new($.$year(),$.$month(),$.$day()).$to_i(),r=86400,Y(te(F(t,n),r).$round(),1)}),Z(d,"$isdst",function(){var $=this,n=new Date($.getFullYear(),0,1),t=new Date($.getFullYear(),6,1);return $.getTimezoneOffset()<Math.max(n.getTimezoneOffset(),t.getTimezoneOffset())}),Z(d,"$dup",function(){var $=this,n=w;return n=new Date($.getTime()),n.$copy_instance_variables($),n.$initialize_dup($),n}),Z(d,"$eql?",function($){var n=this,t=w;return p(t=$["$is_a?"](j("Time")))?n["$<=>"]($)["$zero?"]():t}),K([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function a($,n){var t=a.$$s==null?this:a.$$s;return $==null&&($=w),n==null&&(n=w),K(t,"define_method",[$],function r(){var s=r.$$s==null?this:r.$$s;return s.$wday()===n},{$$s:t})},{$$s:d}),Z(d,"$hash",function(){var $=this;return[j("Time"),$.getTime()].$hash()}),Z(d,"$inspect",function(){var $=this;return p($["$utc?"]())?$.$strftime("%Y-%m-%d %H:%M:%S UTC"):$.$strftime("%Y-%m-%d %H:%M:%S %z")}),Z(d,"$succ",function(){var $=this,n=new Date($.getTime()+1e3);return n.timezone=$.timezone,n}),Z(d,"$usec",function(){var $=this;return $.getMilliseconds()*1e3}),Z(d,"$zone",function(){var $=this;if($.timezone===0)return"UTC";if($.timezone!=null)return w;var n=$.toString(),t;return n.indexOf("(")==-1?t=n.match(/[A-Z]{3,4}/)[0]:t=n.match(/\((.+)\)(?:\s|$)/)[1],t=="GMT"&&/(GMT\W*\d{4})/.test(n)?RegExp.$1:t}),Z(d,"$getgm",function(){var $=this,n=new Date($.getTime());return n.timezone=0,n}),Z(d,"$gmtime",function(){var $=this;return $.timezone!==0&&(q($),$.timezone=0),$}),Z(d,"$gmt?",function(){var $=this;return $.timezone===0}),Z(d,"$gmt_offset",function(){var $=this;return $.timezone!=null?$.timezone*60:-$.getTimezoneOffset()*60}),Z(d,"$strftime",function($){var n=this;return $.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(t,r,s,u,f){var m="",S,C,M,J=r.indexOf("0")!==-1,O=r.indexOf("-")===-1,ae=r.indexOf("_")!==-1,le=r.indexOf("^")!==-1,ce=r.indexOf("#")!==-1,de=(r.match(":")||[]).length;switch(s=parseInt(s,10),J&&ae&&(r.indexOf("0")<r.indexOf("_")?J=!1:ae=!1),f){case"Y":m+=n.$year();break;case"C":J=!ae,m+=Math.round(n.$year()/100);break;case"y":J=!ae,m+=n.$year()%100;break;case"m":J=!ae,m+=n.$mon();break;case"B":m+=y[n.$mon()-1];break;case"b":case"h":ae=!J,m+=X[n.$mon()-1];break;case"d":J=!ae,m+=n.$day();break;case"e":ae=!J,m+=n.$day();break;case"j":J=!ae,s=isNaN(s)?3:s,m+=n.$yday();break;case"H":J=!ae,m+=n.$hour();break;case"k":ae=!J,m+=n.$hour();break;case"I":J=!ae,m+=n.$hour()%12||12;break;case"l":ae=!J,m+=n.$hour()%12||12;break;case"P":m+=n.$hour()>=12?"pm":"am";break;case"p":m+=n.$hour()>=12?"PM":"AM";break;case"M":J=!ae,m+=n.$min();break;case"S":J=!ae,m+=n.$sec();break;case"L":J=!ae,s=isNaN(s)?3:s,m+=n.getMilliseconds();break;case"N":s=isNaN(s)?9:s,m+=n.getMilliseconds().toString().$rjust(3,"0"),m=m.$ljust(s,"0");break;case"z":var he=n.timezone==null?n.getTimezoneOffset():-n.timezone*60,ve=Math.floor(Math.abs(he)/60),me=Math.abs(he)%60;m+=he<0?"+":"-",m+=ve<10?"0":"",m+=ve,de>0&&(m+=":"),m+=me<10?"0":"",m+=me,de>1&&(m+=":00");break;case"Z":m+=n.$zone();break;case"A":m+=l[n.$wday()];break;case"a":m+=c[n.$wday()];break;case"u":m+=n.$wday()+1;break;case"w":m+=n.$wday();break;case"V":m+=n.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":m+=n.$cweek_cyear()["$[]"](1);break;case"g":m+=n.$cweek_cyear()["$[]"](1)["$[]"](x(-2,-1,!1));break;case"s":m+=n.$to_i();break;case"n":m+=`
`;break;case"t":m+="	";break;case"%":m+="%";break;case"c":m+=n.$strftime("%a %b %e %T %Y");break;case"D":case"x":m+=n.$strftime("%m/%d/%y");break;case"F":m+=n.$strftime("%Y-%m-%d");break;case"v":m+=n.$strftime("%e-%^b-%4Y");break;case"r":m+=n.$strftime("%I:%M:%S %p");break;case"R":m+=n.$strftime("%H:%M");break;case"T":case"X":m+=n.$strftime("%H:%M:%S");break;case"J":if(S=n.$to_date().$jd(),S<2405160){m+=n.$strftime("%Y-%m-%d");break}else S<2419614?(C="M",M=1867):S<2424875?(C="T",M=1911):S<2447535?(C="S",M=1925):S<2458605?(C="H",M=1988):(C="R",M=2018);m+=n.$format("%c%02d",C,F(n.$year(),M)),m+=n.$strftime("-%m-%d");break;default:return t}return le&&(m=m.toUpperCase()),ce&&(m=m.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),O&&(J||ae)&&(m=m.$rjust(isNaN(s)?2:s,ae?" ":"0")),m})}),Z(d,"$to_a",function(){var $=this;return[$.$sec(),$.$min(),$.$hour(),$.$day(),$.$month(),$.$year(),$.$wday(),$.$yday(),$.$isdst(),$.$zone()]}),Z(d,"$to_f",function(){var $=this;return $.getTime()/1e3}),Z(d,"$to_i",function(){var $=this;return parseInt($.getTime()/1e3,10)}),Z(d,"$cweek_cyear",function(){var $=this,n=w,t=w,r=w,s=w,u=w,f=w,m=w;return n=j("Time").$new($.$year(),1,1),t=n.$wday(),r=$.$year(),p(B(t,4))&&P(t,0)?s=F(t,1):(s=F(F(t,7),1),U(s,-8)&&(s=-1)),u=te(Y($.$yday(),s),7).$ceil(),p(B(u,0))?j("Time").$new(F($.$year(),1),12,31).$cweek_cyear():(U(u,53)&&(f=j("Time").$new($.$year(),12,31),m=f.$wday(),p(B(m,3))&&P(m,0)&&(u=1,r=Y(r,1))),[u,r])}),function(a,$){return N(a,"mktime","local"),N(a,"utc","gm")}(e.get_singleton_class(d)),N(d,"ctime","asctime"),N(d,"dst?","isdst"),N(d,"getutc","getgm"),N(d,"gmtoff","gmt_offset"),N(d,"mday","day"),N(d,"month","mon"),N(d,"to_s","inspect"),N(d,"tv_sec","to_i"),N(d,"tv_usec","usec"),N(d,"utc","gmtime"),N(d,"utc?","gmt?"),N(d,"utc_offset","gmt_offset")}("::",Date,g)};Opal.modules["corelib/struct"]=function(e){var z=e.klass,q=e.slice,D=e.extract_kwargs,A=e.ensure_kwargs,ee=e.hash_get,W=e.truthy,R=e.neqeq,Z=e.eqeq,p=e.Opal,H=e.send,$e=e.Class,K=e.to_a,Y=e.def,te=e.defs,F=e.Kernel,x=e.rb_gt,P=e.rb_minus,B=e.eqeqeq,U=e.rb_lt,N=e.rb_ge,T=e.rb_plus,g=e.alias,w=e.top,j=[],E=e.nil,v=e.$$$;return e.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),w.$require("corelib/enumerable"),function(o,d,k){var h=z(o,d,"Struct"),l=[h].concat(k),c=e.$r(l);h.$include(v("Enumerable")),te(h,"$new",function y(i,a,$){var n=y.$$p||E,t,r,s,u,f=this,m=E;if(y.$$p=null,t=q(arguments,1),r=D(t),r=A(r),s=t,u=ee(r,"keyword_init"),u==null&&(u=!1),W(i))if(Z(i.$class(),v("String"))&&R(i["$[]"](0).$upcase(),i["$[]"](0)))s.$unshift(i),i=E;else try{i=p["$const_name!"](i)}catch(S){if(e.rescue(S,[v("TypeError"),v("NameError")]))try{s.$unshift(i),i=E}finally{e.pop_exception(S)}else throw S}return H(s,"map",[],function(C){return C==null&&(C=E),p["$coerce_to!"](C,v("String"),"to_str")}),m=H($e,"new",[f],function S(){var C=S.$$s==null?this:S.$$s;return H(s,"each",[],function M(J){var O=M.$$s==null?this:M.$$s;return J==null&&(J=E),O.$define_struct_attribute(J)},{$$s:C}),function(M,J){return Y(M,"$new",function(ae){var le,ce,de=this,he=E;return le=q(arguments),ce=le,he=de.$allocate(),he.$$data={},H(he,"initialize",K(ce)),he},-1),M.$alias_method("[]","new")}(e.get_singleton_class(C))},{$$s:f}),W(n)&&H(m,"module_eval",[],n.$to_proc()),m.$$keyword_init=u,W(i)&&v("Struct").$const_set(i,m),m},-2),te(h,"$define_struct_attribute",function(i){var a=this;return Z(a,v("Struct"))&&F.$raise(v("ArgumentError"),"you cannot define attributes to the Struct class"),a.$members()["$<<"](i),H(a,"define_method",[i],function $(){var n=$.$$s==null?this:$.$$s;return n.$$data[i]},{$$s:a}),H(a,"define_method",[""+i+"="],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=E),t.$$data[i]=n},{$$s:a})}),te(h,"$members",function(){var i=this,a=E;return i.members==null&&(i.members=E),Z(i,v("Struct"))&&F.$raise(v("ArgumentError"),"the Struct class has no members"),i.members=W(a=i.members)?a:[]}),te(h,"$inherited",function(i){var a=this,$=E;return a.members==null&&(a.members=E),$=a.members,H(i,"instance_eval",[],function n(){var t=n.$$s==null?this:n.$$s;return t.members=$},{$$s:a})}),Y(h,"$initialize",function(i){var a,$,n=this,t=E,r=E,s=E;return a=q(arguments),$=a,W(n.$class().$$keyword_init)?(t=W(r=$.$last())?r:new Map,(W(x($.$length(),1))||W($.length===1&&!t.$$is_hash))&&F.$raise(v("ArgumentError"),"wrong number of arguments (given "+$.$length()+", expected 0)"),s=P(t.$keys(),n.$class().$members()),W(s["$any?"]())&&F.$raise(v("ArgumentError"),"unknown keywords: "+s.$join(", ")),H(n.$class().$members(),"each",[],function u(f){var m,S=u.$$s==null?this:u.$$s;return f==null&&(f=E),m=[f,t["$[]"](f)],H(S,"[]=",m),m[m.length-1]},{$$s:n})):(W(x($.$length(),n.$class().$members().$length()))&&F.$raise(v("ArgumentError"),"struct size differs"),H(n.$class().$members(),"each_with_index",[],function u(f,m){var S,C=u.$$s==null?this:u.$$s;return f==null&&(f=E),m==null&&(m=E),S=[f,$["$[]"](m)],H(C,"[]=",S),S[S.length-1]},{$$s:n}))},-1),Y(h,"$initialize_copy",function(i){var a=this;a.$$data={};var $=Object.keys(i.$$data),n,t,r;for(n=0,t=$.length;n<t;n++)r=$[n],a.$$data[r]=i.$$data[r]}),te(h,"$keyword_init?",function(){var i=this;return i.$$keyword_init}),Y(h,"$members",function(){var i=this;return i.$class().$members()}),Y(h,"$hash",function(){var i=this;return[i.$class(),i.$to_a()].$hash()}),Y(h,"$[]",function(i){var a=this;return B(v("Integer"),i)?(W(U(i,a.$class().$members().$size()["$-@"]()))&&F.$raise(v("IndexError"),"offset "+i+" too small for struct(size:"+a.$class().$members().$size()+")"),W(N(i,a.$class().$members().$size()))&&F.$raise(v("IndexError"),"offset "+i+" too large for struct(size:"+a.$class().$members().$size()+")"),i=a.$class().$members()["$[]"](i)):B(v("String"),i)?a.$$data.hasOwnProperty(i)||F.$raise(v("NameError").$new("no member '"+i+"' in struct",i)):F.$raise(v("TypeError"),"no implicit conversion of "+i.$class()+" into Integer"),i=p["$coerce_to!"](i,v("String"),"to_str"),a.$$data[i]}),Y(h,"$[]=",function(i,a){var $=this;return B(v("Integer"),i)?(W(U(i,$.$class().$members().$size()["$-@"]()))&&F.$raise(v("IndexError"),"offset "+i+" too small for struct(size:"+$.$class().$members().$size()+")"),W(N(i,$.$class().$members().$size()))&&F.$raise(v("IndexError"),"offset "+i+" too large for struct(size:"+$.$class().$members().$size()+")"),i=$.$class().$members()["$[]"](i)):B(v("String"),i)?W($.$class().$members()["$include?"](i.$to_sym()))||F.$raise(v("NameError").$new("no member '"+i+"' in struct",i)):F.$raise(v("TypeError"),"no implicit conversion of "+i.$class()+" into Integer"),i=p["$coerce_to!"](i,v("String"),"to_str"),$.$$data[i]=a}),Y(h,"$==",function(i){var a=this;if(!W(i["$instance_of?"](a.$class())))return!1;var $={},n={};function t(r,s){var u,f,m;$[r.$__id__()]=!0,n[s.$__id__()]=!0;for(u in r.$$data)if(f=r.$$data[u],m=s.$$data[u],v("Struct")["$==="](f)){if((!$.hasOwnProperty(f.$__id__())||!n.hasOwnProperty(m.$__id__()))&&!t(f,m))return!1}else if(!f["$=="](m))return!1;return!0}return t(a,i)}),Y(h,"$eql?",function(i){var a=this;if(!W(i["$instance_of?"](a.$class())))return!1;var $={},n={};function t(r,s){var u,f,m;$[r.$__id__()]=!0,n[s.$__id__()]=!0;for(u in r.$$data)if(f=r.$$data[u],m=s.$$data[u],v("Struct")["$==="](f)){if((!$.hasOwnProperty(f.$__id__())||!n.hasOwnProperty(m.$__id__()))&&!t(f,m))return!1}else if(!f["$eql?"](m))return!1;return!0}return t(a,i)}),Y(h,"$each",function y(){var i=y.$$p||E,a=this;return y.$$p=null,i===E?H(a,"enum_for",["each"],function $(){var n=$.$$s==null?this:$.$$s;return n.$size()},{$$s:a}):(H(a.$class().$members(),"each",[],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=E),e.yield1(i,t["$[]"](n))},{$$s:a}),a)}),Y(h,"$each_pair",function y(){var i=y.$$p||E,a=this;return y.$$p=null,i===E?H(a,"enum_for",["each_pair"],function $(){var n=$.$$s==null?this:$.$$s;return n.$size()},{$$s:a}):(H(a.$class().$members(),"each",[],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=E),e.yield1(i,[n,t["$[]"](n)])},{$$s:a}),a)}),Y(h,"$length",function(){var i=this;return i.$class().$members().$length()}),Y(h,"$to_a",function(){var i=this;return H(i.$class().$members(),"map",[],function a($){var n=a.$$s==null?this:a.$$s;return $==null&&($=E),n["$[]"]($)},{$$s:i})});var X=[];return Y(h,"$inspect",function(){var i=this,a=E,$=E;return function(){try{return a="#<struct ",W(X["$include?"](i.$__id__()))?T(a,":...>"):(X["$<<"](i.$__id__()),$=!0,B(v("Struct"),i)&&W(i.$class().$name())&&(a=T(a,""+i.$class()+" ")),a=T(a,H(i.$each_pair(),"map",[],function(t,r){return t==null&&(t=E),r==null&&(r=E),""+t+"="+c("Opal").$inspect(r)}).$join(", ")),a=T(a,">"),a)}finally{W($)&&X.pop()}}()}),Y(h,"$to_h",function y(i){var a=y.$$p||E,$,n,t=this;return y.$$p=null,$=q(arguments),n=$,a!==E?H(H(t,"map",[],a.$to_proc()),"to_h",K(n)):H(t.$class().$members(),"each_with_object",[new Map],function r(s,u){var f,m=r.$$s==null?this:r.$$s;return s==null&&(s=E),u==null&&(u=E),f=[s,m["$[]"](s)],H(u,"[]=",f),f[f.length-1]},{$$s:t})},-1),Y(h,"$values_at",function(i){var a,$,n=this;a=q(arguments),$=a,$=H($,"map",[],function(f){return f==null&&(f=E),f.$$is_range?f.$to_a():f}).$flatten();for(var t=[],r=0,s=$.length;r<s;r++)$[r].$$is_number||F.$raise(v("TypeError"),"no implicit conversion of "+$[r].$class()+" into Integer"),t.push(n["$[]"]($[r]));return t},-1),Y(h,"$dig",function(i,a){var $,n,t=this,r=E;return $=q(arguments,1),n=$,r=W(i.$$is_string&&t.$$data.hasOwnProperty(i))&&t.$$data[i]||E,r===E||n.length===0?r:(W(r["$respond_to?"]("dig"))||F.$raise(v("TypeError"),""+r.$class()+" does not have #dig method"),H(r,"dig",K(n)))},-2),g(h,"size","length"),g(h,"to_s","inspect"),g(h,"values","to_a")}("::",null,j)};Opal.modules["corelib/set"]=function(e){var z=e.freeze,q=e.klass,D=e.slice,A=e.defs,ee=e.truthy,W=e.eqeqeq,R=e.Kernel,Z=e.send,p=e.def,H=e.eqeq,$e=e.rb_lt,K=e.rb_le,Y=e.alias,te=[],F=e.nil,x=e.$$$;return e.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(P,B,U){var N=q(P,B,"Set"),T=[N].concat(U),g=e.$r(T),w=F,j=N.$$prototype;j.hash=F,N.$include(x("Enumerable")),A(N,"$[]",function(o){var d,k,h=this;return d=D(arguments),k=d,h.$new(k)},-1),p(N,"$initialize",function v(o){var d=v.$$p||F,k=this;return v.$$p=null,o==null&&(o=F),k.hash=new Map,ee(o["$nil?"]())?F:(W(x("Enumerable"),o)||R.$raise(x("ArgumentError"),"value must be enumerable"),ee(d)?Z(o,"each",[],function h(l){var c=h.$$s==null?this:h.$$s;return l==null&&(l=F),c.$add(e.yield1(d,l))},{$$s:k}):k.$merge(o))},-1),p(N,"$dup",function(){var o=this,d=F;return d=o.$class().$new(),d.$merge(o)}),p(N,"$-",function(o){var d=this;return ee(o["$respond_to?"]("each"))||R.$raise(x("ArgumentError"),"value must be enumerable"),d.$dup().$subtract(o)}),p(N,"$inspect",function(){var o=this;return"#<Set: {"+o.$to_a().$join(",")+"}>"}),p(N,"$==",function(o){var d=this;return ee(d["$equal?"](o))?!0:ee(o["$instance_of?"](d.$class()))?d.hash["$=="](o.$instance_variable_get("@hash")):ee(o["$is_a?"](x("Set")))&&H(d.$size(),o.$size())?Z(o,"all?",[],function k(h){var l=k.$$s==null?this:k.$$s;return l.hash==null&&(l.hash=F),h==null&&(h=F),l.hash["$include?"](h)},{$$s:d}):!1}),p(N,"$add",function(o){var d=this;return d.hash["$[]="](o,!0),d}),p(N,"$classify",function v(){var o=v.$$p||F,d=this,k=F;return v.$$p=null,o===F?d.$enum_for("classify"):(k=Z(x("Hash"),"new",[],function h(l,c){var X,y=h.$$s==null?this:h.$$s;return l==null&&(l=F),c==null&&(c=F),X=[c,y.$class().$new()],Z(l,"[]=",X),X[X.length-1]},{$$s:d}),Z(d,"each",[],function(l){return l==null&&(l=F),k["$[]"](e.yield1(o,l)).$add(l)}),k)}),p(N,"$collect!",function v(){var o=v.$$p||F,d=this,k=F;return v.$$p=null,o===F?d.$enum_for("collect!"):(k=d.$class().$new(),Z(d,"each",[],function(l){return l==null&&(l=F),k["$<<"](e.yield1(o,l))}),d.$replace(k))}),p(N,"$compare_by_identity",function(){var o=this;return ee(o.hash["$respond_to?"]("compare_by_identity"))?(o.hash.$compare_by_identity(),o):o.$raise(g("NotImplementedError"),""+o.$class().$name()+"#compare_by_identity is not implemented")}),p(N,"$compare_by_identity?",function(){var o=this,d=F;return ee(d=o.hash["$respond_to?"]("compare_by_identity?"))?o.hash["$compare_by_identity?"]():d}),p(N,"$delete",function(o){var d=this;return d.hash.$delete(o),d}),p(N,"$delete?",function(o){var d=this;return ee(d["$include?"](o))?(d.$delete(o),d):F}),p(N,"$delete_if",function v(){var o=v.$$p||F,d=this;return v.$$p=null,o===F?d.$enum_for("delete_if"):(Z(Z(d,"select",[],function(h){return h==null&&(h=F),e.yield1(o,h)}),"each",[],function k(h){var l=k.$$s==null?this:k.$$s;return l.hash==null&&(l.hash=F),h==null&&(h=F),l.hash.$delete(h)},{$$s:d}),d)}),p(N,"$freeze",function(){var o=this;return ee(o["$frozen?"]())?o:(o.hash.$freeze(),z(o))}),p(N,"$keep_if",function v(){var o=v.$$p||F,d=this;return v.$$p=null,o===F?d.$enum_for("keep_if"):(Z(Z(d,"reject",[],function(h){return h==null&&(h=F),e.yield1(o,h)}),"each",[],function k(h){var l=k.$$s==null?this:k.$$s;return l.hash==null&&(l.hash=F),h==null&&(h=F),l.hash.$delete(h)},{$$s:d}),d)}),p(N,"$reject!",function v(){var o=v.$$p||F,d=this,k=F;return v.$$p=null,o===F?d.$enum_for("reject!"):(k=d.$size(),Z(d,"delete_if",[],o.$to_proc()),H(d.$size(),k)?F:d)}),p(N,"$select!",function v(){var o=v.$$p||F,d=this,k=F;return v.$$p=null,o===F?d.$enum_for("select!"):(k=d.$size(),Z(d,"keep_if",[],o.$to_proc()),H(d.$size(),k)?F:d)}),p(N,"$add?",function(o){var d=this;return ee(d["$include?"](o))?F:d.$add(o)}),p(N,"$each",function v(){var o=v.$$p||F,d=this;return v.$$p=null,o===F?d.$enum_for("each"):(Z(d.hash,"each_key",[],o.$to_proc()),d)}),p(N,"$empty?",function(){var o=this;return o.hash["$empty?"]()}),p(N,"$eql?",function(o){var d=this;return d.hash["$eql?"](Z(o,"instance_eval",[],function k(){var h=k.$$s==null?this:k.$$s;return h.hash==null&&(h.hash=F),h.hash},{$$s:d}))}),p(N,"$clear",function(){var o=this;return o.hash.$clear(),o}),p(N,"$include?",function(o){var d=this;return d.hash["$include?"](o)}),p(N,"$merge",function(o){var d=this;return Z(o,"each",[],function k(h){var l=k.$$s==null?this:k.$$s;return h==null&&(h=F),l.$add(h)},{$$s:d}),d}),p(N,"$replace",function(o){var d=this;return d.$clear(),d.$merge(o),d}),p(N,"$size",function(){var o=this;return o.hash.$size()}),p(N,"$subtract",function(o){var d=this;return Z(o,"each",[],function k(h){var l=k.$$s==null?this:k.$$s;return h==null&&(h=F),l.$delete(h)},{$$s:d}),d}),p(N,"$|",function(o){var d=this;return ee(o["$respond_to?"]("each"))||R.$raise(x("ArgumentError"),"value must be enumerable"),d.$dup().$merge(o)});function E(v){ee(w=v["$is_a?"](x("Set")))||R.$raise(x("ArgumentError"),"value must be a set")}return p(N,"$superset?",function(o){var d=this;return E(o),ee($e(d.$size(),o.$size()))?!1:Z(o,"all?",[],function k(h){var l=k.$$s==null?this:k.$$s;return h==null&&(h=F),l["$include?"](h)},{$$s:d})}),p(N,"$proper_superset?",function(o){var d=this;return E(o),ee(K(d.$size(),o.$size()))?!1:Z(o,"all?",[],function k(h){var l=k.$$s==null?this:k.$$s;return h==null&&(h=F),l["$include?"](h)},{$$s:d})}),p(N,"$subset?",function(o){var d=this;return E(o),ee($e(o.$size(),d.$size()))?!1:Z(d,"all?",[],function(h){return h==null&&(h=F),o["$include?"](h)})}),p(N,"$proper_subset?",function(o){var d=this;return E(o),ee(K(o.$size(),d.$size()))?!1:Z(d,"all?",[],function(h){return h==null&&(h=F),o["$include?"](h)})}),p(N,"$intersect?",function(o){var d=this;return E(o),ee($e(d.$size(),o.$size()))?Z(d,"any?",[],function(h){return h==null&&(h=F),o["$include?"](h)}):Z(o,"any?",[],function k(h){var l=k.$$s==null?this:k.$$s;return h==null&&(h=F),l["$include?"](h)},{$$s:d})}),p(N,"$disjoint?",function(o){var d=this;return d["$intersect?"](o)["$!"]()}),p(N,"$to_a",function(){var o=this;return o.hash.$keys()}),Y(N,"+","|"),Y(N,"<","proper_subset?"),Y(N,"<<","add"),Y(N,"<=","subset?"),Y(N,">","proper_superset?"),Y(N,">=","superset?"),Y(N,"difference","-"),Y(N,"filter!","select!"),Y(N,"length","size"),Y(N,"map!","collect!"),Y(N,"member?","include?"),Y(N,"union","|")}("::",null,te)};Opal.modules["corelib/dir"]=function(e){var z=e.klass,q=e.def,D=e.truthy,A=e.alias,ee=e.nil,W=e.$$$;return e.add_stubs("[],pwd"),function(R,Z,p){var H=z(R,Z,"Dir");return function($e,K){return q($e,"$chdir",function Y(te){var F=Y.$$p||ee,x=ee;return Y.$$p=null,function(){try{return x=e.current_dir,e.current_dir=te,e.yieldX(F,[])}finally{e.current_dir=x}}()}),q($e,"$pwd",function(){return e.current_dir||"."}),q($e,"$home",function(){var te=ee;return D(te=W("ENV")["$[]"]("HOME"))?te:"."}),A($e,"getwd","pwd")}(e.get_singleton_class(H))}("::",null)};Opal.modules["corelib/file"]=function(e){var z=e.truthy,q=e.klass,D=e.const_set,A=e.Opal,ee=e.regexp,W=e.rb_plus,R=e.def,Z=e.Kernel,p=e.eqeq,H=e.rb_lt,$e=e.rb_minus,K=e.range,Y=e.send,te=e.slice,F=e.alias,x=[],P=e.nil,B=e.$$$;return e.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(U,N,T){var g=q(U,N,"File"),w=[g].concat(T),j=P;return D(w[0],"Separator",D(w[0],"SEPARATOR","/")),D(w[0],"ALT_SEPARATOR",P),D(w[0],"PATH_SEPARATOR",":"),D(w[0],"FNM_SYSCASE",0),j=/^[a-zA-Z]:(?:\\|\/)/,function(E,v){var o=[E].concat(v),d=e.$r(o);R(E,"$absolute_path",function(c,X){var y=P,i=P,a=P,$=P,n=P,t=P,r=P,s=P,u=P,f=P;X==null&&(X=P),y=d("SEPARATOR"),i=h(),a=[],c=z(c["$respond_to?"]("to_path"))?c.$to_path():c,c=A["$coerce_to!"](c,B("String"),"to_str"),X=z($=X)?$:B("Dir").$pwd(),n=c.substr(0,y.length)===y||j.test(c),t=X.substr(0,y.length)===y||j.test(X),z(n)?(r=c.$split(ee(["[",i,"]"])),s=j.test(c)?"":c.$sub(ee(["^([",i,"]+).*$"]),"\\1"),u=!0):(r=W(X.$split(ee(["[",i,"]"])),c.$split(ee(["[",i,"]"]))),s=j.test(X)?"":X.$sub(ee(["^([",i,"]+).*$"]),"\\1"),u=t);for(var m,S=0,C=r.length;S<C;S++)m=r[S],!(m===P||m===""&&(a.length===0||u)||m==="."&&(a.length===0||u))&&(m===".."?a.pop():a.push(m));return!u&&r[0]!=="."&&a.$unshift("."),f=a.$join(y),z(u)&&(f=W(s,f)),f},-2),R(E,"$expand_path",function(c,X){var y=this,i=P,a=P,$=P,n=P,t=P;return X==null&&(X=P),i=d("SEPARATOR"),a=h(),z(c[0]==="~"||X&&X[0]==="~")&&($=d("Dir").$home(),z($)||Z.$raise(B("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),n=j.test($)?"":$.$sub(ee(["^([",a,"]+).*$"]),"\\1"),z($["$start_with?"](n))||Z.$raise(B("ArgumentError"),"non-absolute home"),$=W($,i),t=ee(["^\\~(?:",i,"|$)"]),c=c.$sub(t,$),z(X)&&(X=X.$sub(t,$))),y.$absolute_path(c,X)},-2);function k(l){return z(l["$respond_to?"]("to_path"))&&(l=l.$to_path()),l=A["$coerce_to!"](l,B("String"),"to_str"),l}function h(){return d("ALT_SEPARATOR")===P?e.escape_regexp(d("SEPARATOR")):e.escape_regexp(W(d("SEPARATOR"),d("ALT_SEPARATOR")))}return R(E,"$dirname",function(c,X){var y=this,i=P;if(X==null&&(X=1),p(X,0))return c;z(H(X,0))&&Z.$raise(B("ArgumentError"),"level can't be negative"),i=h(),c=k(c);var a=c.match(new RegExp("^["+i+"]")),$;return c=c.replace(new RegExp("["+i+"]+$"),""),c=c.replace(new RegExp("[^"+i+"]+$"),""),c=c.replace(new RegExp("["+i+"]+$"),""),c===""?$=a?"/":".":$=c,X==1?$:y.$dirname($,$e(X,1))},-2),R(E,"$basename",function(c,X){var y=P;return X==null&&(X=P),y=h(),c=k(c),c.length==0||(X!==P?X=A["$coerce_to!"](X,B("String"),"to_str"):X=null,c=c.replace(new RegExp("(.)["+y+"]*$"),"$1"),c=c.replace(new RegExp("^(?:.*["+y+"])?([^"+y+"]+)$"),"$1"),X===".*"?c=c.replace(/\.[^\.]+$/,""):X!==null&&(X=e.escape_regexp(X),c=c.replace(new RegExp(""+X+"$"),""))),c},-2),R(E,"$extname",function(c){var X=this,y=P,i=P;return c=k(c),y=X.$basename(c),z(y["$empty?"]())||(i=y["$[]"](K(1,-1,!1)).$rindex("."),z(i["$nil?"]())||p(W(i,1),$e(y.$length(),1)))?"":y["$[]"](e.Range.$new(W(i,1),-1,!1))}),R(E,"$exist?",function(c){return e.modules[c]!=null}),R(E,"$directory?",function(c){var X=P;X=[];for(var y in e.modules)X.push(y);return c=c.$gsub(ee(["(^.",d("SEPARATOR"),"+|",d("SEPARATOR"),"+$)"])),Y(X,"find",[],function(a){return a==null&&(a=P),a["$=~"](ee(["^",c]))})}),R(E,"$join",function(c){var X,y,i=P;return X=te(arguments),y=X,z(y["$empty?"]())?"":(i="",y=Y(y.$flatten().$each_with_index(),"map",[],function($,n){return $==null&&($=P),n==null&&(n=P),p(n,0)&&z($["$empty?"]())||p(y.$length(),W(n,1))&&z($["$empty?"]())?d("SEPARATOR"):$}),y=Y(y,"reject",[],"empty?".$to_proc()),Y(y,"each_with_index",[],function($,n){var t=P;return $==null&&($=P),n==null&&(n=P),t=y["$[]"](W(n,1)),z(t["$nil?"]())?i=""+i+$:(z($["$end_with?"](d("SEPARATOR")))&&z(t["$start_with?"](d("SEPARATOR")))&&($=$.$sub(ee([d("SEPARATOR"),"+$"]),"")),i=z($["$end_with?"](d("SEPARATOR")))||z(t["$start_with?"](d("SEPARATOR")))?""+i+$:""+i+$+d("SEPARATOR"))}),i)},-1),R(E,"$split",function(c){return c.$split(d("SEPARATOR"))}),F(E,"realpath","expand_path"),F(E,"exists?","exist?")}(e.get_singleton_class(g),w)}("::",B("IO"),x)};Opal.modules["corelib/process/base"]=function(e){var z=e.klass,q=e.slice,D=e.defs,A=e.return_val,ee=e.nil;return function(W,R){var Z=z(W,R,"Signal");return D(Z,"$trap",function(H){return q(arguments),ee},-1)}("::",null),function(W,R){var Z=z(W,R,"GC");return D(Z,"$start",A(ee))}("::",null)};Opal.modules["corelib/process"]=function(e){var z=e.module,q=e.defs,D=e.truthy,A=e.return_val,ee=e.Kernel,W=e.nil,R=e.$$$;return e.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(Z){var p=z(Z,"Process"),H=W;if(p.__clocks__=[],q(p,"$__register_clock__",function(Y,te){var F=this;return F.__clocks__==null&&(F.__clocks__=W),F.$const_set(Y,F.__clocks__.$size()),F.__clocks__["$<<"](te)}),p.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),H=!1,e.global.performance)H=function(){return performance.now()};else if(e.global.process&&process.hrtime){var $e=process.hrtime();H=function(){var K=process.hrtime($e),Y=K[1]/1e3|0;return K[0]*1e3+Y/1e3}}return D(H)&&p.$__register_clock__("CLOCK_MONOTONIC",H),q(p,"$pid",A(0)),q(p,"$times",function(){var Y=W;return Y=R("Time").$now().$to_f(),R(R("Benchmark"),"Tms").$new(Y,Y,Y,Y,Y)}),q(p,"$clock_gettime",function(Y,te){var F=this,x=W;F.__clocks__==null&&(F.__clocks__=W),te==null&&(te="float_second"),D(x=F.__clocks__["$[]"](Y))||ee.$raise(R(R("Errno"),"EINVAL"),"clock_gettime("+Y+") "+F.__clocks__["$[]"](Y));var P=x();switch(te){case"float_second":return P/1e3;case"float_millisecond":return P/1;case"float_microsecond":return P*1e3;case"second":return P/1e3|0;case"millisecond":return P/1|0;case"microsecond":return P*1e3|0;case"nanosecond":return P*1e6|0;default:ee.$raise(R("ArgumentError"),"unexpected unit: "+te)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(e){var z=e.klass,q=e.module,D=e.def,A=e.range,ee=e.send,W=e.rb_divide,R=e.Kernel,Z=e.Opal,p=[],H=e.nil,$e=e.$$$;return e.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(K,Y,te){var F=z(K,Y,"Random"),x=[F].concat(te);return function(P,B){var U=q(P,"Formatter"),N=[U].concat(B),T=e.$r(N);return D(U,"$hex",function(w){var j=this;w==null&&(w=H),w=$e("Random").$_verify_count(w);for(var E=j.$bytes(w),v="",o=0;o<w;o++)v+=E.charCodeAt(o).toString(16).padStart(2,"0");return v.$encode("US-ASCII")},-1),D(U,"$random_bytes",function(w){var j=this;return w==null&&(w=H),j.$bytes(w)},-1),D(U,"$base64",function(w){var j=this;return w==null&&(w=H),$e("Base64").$strict_encode64(j.$random_bytes(w)).$encode("US-ASCII")},-1),D(U,"$urlsafe_base64",function(w,j){var E=this;return w==null&&(w=H),j==null&&(j=!1),$e("Base64").$urlsafe_encode64(E.$random_bytes(w),j).$encode("US-ASCII")},-1),D(U,"$uuid",function(){var w=this,j=H;return j=w.$hex(16).$split(""),j["$[]="](12,"4"),j["$[]="](16,(parseInt(j["$[]"](16),16)&3|8).toString(16)),j=[j["$[]"](A(0,8,!0)),j["$[]"](A(8,12,!0)),j["$[]"](A(12,16,!0)),j["$[]"](A(16,20,!0)),j["$[]"](A(20,32,!0))],j=ee(j,"map",[],"join".$to_proc()),j.$join("-")}),D(U,"$random_float",function(){var w=this,j=H,E=H;return j=w.$bytes(4),E=0,ee(4,"times",[],function(o){return o==null&&(o=H),E=E["$<<"](8),E=E["$|"](j["$[]"](o).$ord())}),W(E.$abs(),2147483647)}),D(U,"$random_number",function(w){var j=this;function E(){return j.$random_float()}function v(d){return Math.floor(E()*d)}function o(){var d=w.begin,k=w.end;if(d===H||k===H)return H;var h=k-d;return h<0?H:h===0?d:(k%1===0&&d%1===0&&!w.excl&&h++,v(h)+d)}return w==null?E():w.$$is_range?o():w.$$is_number?(w<=0&&R.$raise($e("ArgumentError"),"invalid argument - "+w),w%1===0?v(w):E()*w):(w=Z["$coerce_to!"](w,$e("Integer"),"to_int"),w<=0&&R.$raise($e("ArgumentError"),"invalid argument - "+w),v(w))},-1),D(U,"$alphanumeric",function(w){var j=this,E=H;return w==null&&(w=H),w=T("Random").$_verify_count(w),E=ee([A("0","9",!1),A("a","z",!1),A("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),ee($e("Array"),"new",[w],function v(o){var d=v.$$s==null?this:v.$$s;return E["$[]"](d.$random_number(E.$length()))},{$$s:j}).$join()},-1)}(F,x),F.$include($e($e("Random"),"Formatter")),F.$extend($e($e("Random"),"Formatter"))}("::",null,p)};Opal.modules["corelib/random/mersenne_twister"]=function(e){var z=e.klass,q=e.const_set,D=e.send,A=e.nil,ee=e.$$$,W=A;return e.add_stubs("generator="),W=function(){var R=624,Z=397,p=2567483615,H=2147483648,$e=2147483647,K=function(N,T){return N&H|T&$e},Y=function(N,T){return K(N,T)>>>1^(T&1?p:0)};function te(N){var T={left:0,next:R,state:new Array(R)};return F(T,N),T}function F(N,T){var g;for(N.state[0]=T>>>0,g=1;g<R;g++)N.state[g]=1812433253*(N.state[g-1]^N.state[g-1]>>30>>>0)+g,N.state[g]&=4294967295;N.left=1,N.next=R}function x(N){var T=0,g=N.state,w;for(N.left=R,N.next=0,w=R-Z+1;--w;T++)g[T]=g[T+Z]^Y(g[T+0],g[T+1]);for(w=Z;--w;T++)g[T]=g[T+(Z-R)]^Y(g[T+0],g[T+1]);g[T]=g[T+(Z-R)]^Y(g[T+0],g[0])}function P(N){var T;return--N.left<=0&&x(N),T=N.state[N.next++],T^=T>>>11,T^=T<<7&2636928640,T^=T<<15&4022730752,T^=T>>>18,T>>>0}function B(N,T){return N>>>=5,T>>>=6,(N*67108864+T)*(1/9007199254740992)}function U(N){var T=P(N),g=P(N);return B(T,g)}return{genrand_real:U,init:te}}(),function(R,Z){var p=z(R,Z,"Random"),H,$e=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return q(p,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*$e)},reseed:function(K){return W.init(K)},rand:function(K){return W.genrand_real(K)}}),H=[ee(p,"MERSENNE_TWISTER_GENERATOR")],D(p,"generator=",H),H[H.length-1]}("::",null)};Opal.modules["corelib/random"]=function(e){var z=e.truthy,q=e.klass,D=e.Kernel,A=e.defs,ee=e.Opal,W=e.def,R=e.eqeqeq,Z=e.send,p=e.top,H=e.nil,$e=e.$$$;return e.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),p.$require("corelib/random/formatter"),function(K,Y){var te=q(K,Y,"Random");return te.$attr_reader("seed","state"),A(te,"$_verify_count",function(x){return z(x)||(x=16),typeof x!="number"&&(x=x.$to_int()),x<0&&D.$raise($e("ArgumentError"),"negative string size (or size too big)"),x=Math.floor(x),x}),W(te,"$initialize",function(x){var P=this;return x==null&&(x=$e("Random").$new_seed()),x=ee["$coerce_to!"](x,$e("Integer"),"to_int"),P.state=x,P.$reseed(x)},-1),W(te,"$reseed",function(x){var P=this;return P.seed=x,P.$rng=e.$$rand.reseed(x)}),A(te,"$new_seed",function(){return e.$$rand.new_seed()}),A(te,"$rand",function(x){var P=this;return $e(P,"DEFAULT").$rand(x)},-1),A(te,"$srand",function(x){var P=this,B=H;return x==null&&(x=$e("Random").$new_seed()),x=ee["$coerce_to!"](x,$e("Integer"),"to_int"),B=$e(P,"DEFAULT").$seed(),$e(P,"DEFAULT").$reseed(x),B},-1),A(te,"$urandom",function(x){return $e("SecureRandom").$bytes(x)}),W(te,"$==",function(x){var P=this,B=H;return R($e("Random"),x)?z(B=P.$seed()["$=="](x.$seed()))?P.$state()["$=="](x.$state()):B:!1}),W(te,"$bytes",function(x){var P=this;return x=$e("Random").$_verify_count(x),Z($e("Array"),"new",[x],function B(){var U=B.$$s==null?this:B.$$s;return U.$rand(255).$chr()},{$$s:P}).$join().$encode("ASCII-8BIT")}),A(te,"$bytes",function(x){var P=this;return $e(P,"DEFAULT").$bytes(x)}),W(te,"$rand",function(x){var P=this;return P.$random_number(x)},-1),W(te,"$random_float",function(){var x=this;return x.state++,e.$$rand.rand(x.$rng)}),A(te,"$random_float",function(){var x=this;return $e(x,"DEFAULT").$random_float()}),A(te,"$generator=",function(x){var P=this;return e.$$rand=x,z(P["$const_defined?"]("DEFAULT"))?$e(P,"DEFAULT").$reseed():P.$const_set("DEFAULT",P.$new(P.$new_seed()))})}("::",null),p.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(e){var z=e.Kernel,q=e.klass,D=e.send,A=e.slice,ee=e.module,W=e.def,R=e.return_val,Z=e.alias,p=e.defs,H=e.top,$e=[],K=e.nil,Y=e.$$$;e.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var te={};function F(P){switch(e.config.unsupported_features_severity){case"error":z.$raise(Y("NotImplementedError"),P);break;case"warning":x(P);break}}function x(P){te[P]||(te[P]=!0,H.$warn(P))}return function(P,B){var U=q(P,B,"String"),N="String#%s not supported. Mutable String methods are not supported in Opal.";return D(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function T(g){var w=T.$$s==null?this:T.$$s;return g==null&&(g=K),D(w,"define_method",[g],function(E){return A(arguments),z.$raise(Y("NotImplementedError"),N["$%"](g))},-1)},{$$s:U})}("::",null),function(P){var B=ee(P,"Kernel"),U="Object tainting is not supported by Opal";return W(B,"$taint",function(){var T=this;return F(U),T}),W(B,"$untaint",function(){var T=this;return F(U),T}),W(B,"$tainted?",function(){return F(U),!1})}("::"),function(P,B){var U=q(P,B,"Module");return W(U,"$public",function(T){var g,w,j=this;return g=A(arguments),w=g,w.length===0?(j.$$module_function=!1,K):w.length===1?w[0]:w},-1),W(U,"$private_class_method",function(T){var g,w;return g=A(arguments),w=g,w.length===1?w[0]:w},-1),W(U,"$private_method_defined?",R(!1)),W(U,"$private_constant",function(T){return A(arguments),K},-1),Z(U,"nesting","public"),Z(U,"private","public"),Z(U,"protected","public"),Z(U,"protected_method_defined?","private_method_defined?"),Z(U,"public_class_method","private_class_method"),Z(U,"public_instance_method","instance_method"),Z(U,"public_instance_methods","instance_methods"),Z(U,"public_method_defined?","method_defined?")}("::",null),function(P){var B=ee(P,"Kernel");return W(B,"$private_methods",function(N){return A(arguments),[]},-1),Z(B,"protected_methods","private_methods"),Z(B,"private_instance_methods","private_methods"),Z(B,"protected_instance_methods","private_methods")}("::"),function(P,B){var U=ee(P,"Kernel"),N=[U].concat(B),T=e.$r(N);return W(U,"$eval",function(w){return A(arguments),z.$raise(Y("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+T("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",$e),p(H,"$public",function(B){var U,N;return U=A(arguments),N=U,N.length===1?N[0]:N},-1),p(H,"$private",function(B){var U,N;return U=A(arguments),N=U,N.length===1?N[0]:N},-1)};Opal.modules["corelib/binding"]=function(e){var z=e.klass,q=e.truthy,D=e.def,A=e.slice,ee=e.send,W=e.to_a,R=e.Kernel,Z=e.return_ivar,p=e.eqeq;e.thrower;var H=e.module,$e=e.const_set,K=e.top,Y=[],te=e.nil,F=e.$$$;return e.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(x,P){var B=z(x,P,"Binding"),U=B.$$prototype;return U.jseval=U.scope_variables=te,D(B,"$initialize",function(T,g,w,j){var E,v=this;return g==null&&(g=[]),j==null&&(j=te),E=[T,g,w,j],v.jseval=E[0],v.scope_variables=E[1],v.receiver=E[2],v.source_location=E[3],q(typeof w!==void 0)?te:w=v.$js_eval("self")},-2),D(B,"$js_eval",function(T){var g,w,j=this;return g=A(arguments),w=g,q(j.jseval)?ee(j.jseval,"call",W(w)):R.$raise("Evaluation on a Proc#binding is not supported")},-1),D(B,"$local_variable_get",function(T){var g=this;try{return g.$js_eval(T)}catch(w){if(e.rescue(w,[F("Exception")]))try{return R.$raise(F("NameError"),"local variable `"+T+"' is not defined for "+g.$inspect())}finally{e.pop_exception(w)}else throw w}}),D(B,"$local_variable_set",function(T,g){var w=this;return e.Binding.tmp_value=g,w.$js_eval(""+T+" = Opal.Binding.tmp_value"),delete e.Binding.tmp_value,g}),D(B,"$local_variables",Z("scope_variables")),D(B,"$local_variable_defined?",function(T){var g=this;return g.scope_variables["$include?"](T)}),D(B,"$eval",function(T,g,w){try{var j=this;return g==null&&(g=te),w==null&&(w=te),p(T,"self")?j.$receiver():R.$eval(T,j,g,w)}catch(E){if(E===e.t_eval_return)return E.$v;throw E}},-2),B.$attr_reader("receiver","source_location")}("::",null),function(x){var P=H(x,"Kernel");return D(P,"$binding",function(){return R.$raise("Opal doesn't support dynamic calls to binding")})}("::"),$e(Y[0],"TOPLEVEL_BINDING",F("Binding").$new(function(x){return new Function("self","return "+x)(K)},[],K,["<main>",0]))};Opal.modules["corelib/irb"]=function(e){var z=e.module,q=e.truthy,D=e.Kernel,A=e.defs,ee=e.gvars,W=e.lambda,R=e.hash_rehash,Z=e.send,p=e.rb_plus,H=e.const_set,$e=e.klass,K=e.def,Y=e.Opal,te=e.range,F=e.eqeq,x=e.thrower,P=[],B=e.nil,U=e.$$$;e.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(N,T){var g=z(N,"Opal"),w=[g].concat(T);return function(j,E){var v=z(j,"IRB"),o=[v].concat(E),d=e.$r(o);return A(v,"$ensure_loaded",function(h){var l=B,c=B;if(q(e.loaded_features["$include?"](h)))return B;l=q(d("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":d("RUBY_ENGINE_VERSION"),c="https://cdn.opalrb.com/opal/"+l+"/"+h+".js";var X;if(typeof XMLHttpRequest<"u"){var y=new XMLHttpRequest;y.open("GET",c,!1),y.send(""),X=y.responseText}else D.$raise("You need to provision "+h+" yourself in this environment");return new Function("Opal",X)(e),e.require(h),q(e.loaded_features["$include?"](h))?B:D.$raise("Could not load "+h+" for some reason")}),v.$singleton_class().$attr_accessor("output"),A(v,"$prepare_console",function k(){var h=k.$$p||B,l,c=this,X=B,y=B;return ee.stdout==null&&(ee.stdout=B),ee.stderr==null&&(ee.stderr=B),ee.stdin==null&&(ee.stdin=B),k.$$p=null,function(){try{return c["$output="](""),X=R(new Map([[ee.stdout,W(function(a){return a==null&&(a=B),ee.stdout=a})],[ee.stderr,W(function(a){return a==null&&(a=B),ee.stderr=a})]])),q(c["$browser?"]())&&(Z(X,"each",[],function i(a,$){var n=i.$$s==null?this:i.$$s,t=B;return a==null&&(a=B),$==null&&($=B),t=a.$dup(),t["$write_proc="](Z(n,"proc",[],function r(s){var u=r.$$s==null?this:r.$$s;return s==null&&(s=B),u["$output="](p(u.$output(),s)),u["$output="](u.$output().$split(`
`).$last(30).$join(`
`)),q(s["$end_with?"](`
`))&&u["$output="](p(u.$output(),`
`)),a.$write_proc().$call(s)},{$$s:n})),t["$tty="](!1),$.$call(t)},{$$s:c}),y=ee.stdin.$read_proc(),ee.stdin["$read_proc="](function(i){var a=prompt(c.$output());return a!==null?a+`
`:B})),e.yieldX(h,[])}finally{Z(X,"each",[],function(a,$){return a==null&&(a=B),$==null&&($=B),$.$call(a)}),l=[y],Z(ee.stdin,"read_proc=",l),l[l.length-1],l=[""],Z(c,"output=",l),l[l.length-1]}}()}),A(v,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),H(o[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(k,h){var l=$e(k,h,"Silencer"),c=l.$$prototype;return c.collector=c.stderr=B,K(l,"$initialize",function(){var y=this;return ee.stderr==null&&(ee.stderr=B),y.stderr=ee.stderr}),K(l,"$silence",function X(){var y=X.$$p||B,i=this;return X.$$p=null,function(){try{return i.collector=U("StringIO").$new(),ee.stderr=i.collector,e.yieldX(y,[])}finally{ee.stderr=i.stderr}}()}),K(l,"$warnings",function(){var y=this;return y.collector.$string()})}(o[0],null)}(w[0],w)}(P[0],P),function(N,T,g){var w=$e(N,T,"Binding"),j=[w].concat(g),E=e.$r(j);return K(w,"$irb",function(){try{var o=x("return"),d=this,k=B;return U(Y,"IRB").$ensure_loaded("opal-replutils"),k=U(U(Y,"IRB"),"Silencer").$new(),Z(U(Y,"IRB"),"prepare_console",[],function h(){var l=h.$$s==null?this:h.$$s;return function(){try{var c=x("break");return Z(l,"loop",[],function X(){var y=X.$$s==null?this:X.$$s,i=B,a=B,$=B,n=B,t=B;y.$print(">> "),i=y.$gets(),q(i)||c.$throw(B,X.$$is_lambda),a="",q(U(Y,"IRB")["$browser?"]())&&y.$puts(i),q(i["$start_with?"]("ls "))?(a=i["$[]"](te(3,-1,!1)),$="ls"):F(i,`ls
`)?(a="self",$="ls"):q(i["$start_with?"]("show "))?(a=i["$[]"](te(5,-1,!1)),$="show"):(a=i,$="inspect"),n=B;do{try{Z(k,"silence",[],function(){return n=e.compile(a,{irb:!0})})}catch(r){if(e.rescue(r,[E("SyntaxError")])){t=r;try{if(q(U(U(Y,"IRB"),"LINEBREAKS")["$include?"](t.$message()))){y.$print(".. "),i=y.$gets(),q(i)||o.$throw(B,X.$$is_lambda),q(U(Y,"IRB")["$browser?"]())&&y.$puts(i),a=p(a,i);continue}else q(k.$warnings()["$empty?"]())?y.$warn(t.$full_message()):y.$warn(k.$warnings())}finally{e.pop_exception(r)}}else throw r}break}while(!0);return F($,"show")&&(y.$puts(n),o.$throw(B,X.$$is_lambda)),y.$puts(U("REPLUtils").$eval_and_print(n,$,!1,y))},{$$s:l,$$ret:o})}catch(X){if(X===c)return X.$v;throw X}finally{c.is_orphan=!0}}()},{$$s:d})}catch(h){if(h===o)return h.$v;throw h}finally{o.is_orphan=!0}})}("::",null,P),e.irb=function(N){U("Binding").$new(N).$irb()},e.load_parser=function(){e.Opal.IRB.$ensure_loaded("opal-parser")},typeof e.eval>"u"&&(e.eval=function(N){return e.load_parser(),e.eval(N)}),typeof e.compile>"u"&&(e.compile=function(N,T){return e.load_parser(),e.compile(N,T)})};Opal.modules.opal=function(e){var z=e.Object;return e.nil,e.add_stubs("require,autoload"),z.$require("opal/base"),z.$require("opal/mini"),z.$require("corelib/kernel/format"),z.$require("corelib/string/encoding"),z.$autoload("Math","corelib/math"),z.$require("corelib/complex/base"),z.$autoload("Complex","corelib/complex"),z.$require("corelib/rational/base"),z.$autoload("Rational","corelib/rational"),z.$require("corelib/time"),z.$autoload("Struct","corelib/struct"),z.$autoload("Set","corelib/set"),z.$autoload("Dir","corelib/dir"),z.$autoload("File","corelib/file"),z.$require("corelib/process/base"),z.$autoload("Process","corelib/process"),z.$autoload("Random","corelib/random"),z.$require("corelib/unsupported"),z.$require("corelib/binding"),z.$require("corelib/irb")};Opal.modules["js/proxy"]=function(e){var z=e.module,q=e.truthy,D=e.def,A=e.klass,ee=e.const_set,W=e.slice,R=e.range,Z=e.send,p=e.to_a,H=e.gvars,$e=e.top,K=[],Y=e.nil;return e.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),$e.$require("opal"),$e.$require("native"),function(te,F){var x=z(te,"JS"),P=[x].concat(F),B=e.$r(P);return function(U,N){var T=z(U,"Helpers"),g=[T].concat(N),w=e.$r(g);return D(T,"$wrap_result",function(E){return q(E&&typeof E.then=="function")?w("Promise").$new(E):q(typeof E=="object"&&E!==null)?w("Proxy").$new(E):E}),D(T,"$native_methods",function(){var E=this,v=Y;return E.native_methods==null&&(E.native_methods=Y),E.native_methods=function(){if(q(v=E.native_methods))return v;{let o=E.$to_n();const d=new Set;for(;o!==null;){for(const k of Reflect.ownKeys(o)){const h=k.toString(),l=E.$to_rb_name(h);typeof k!="symbol"&&h!==l&&d.add(l),d.add(h)}o=Object.getPrototypeOf(o)}return Array.from(d)}}()})}(P[0],P),function(U,N,T){var g=A(U,N,"Proxy"),w=[g].concat(T),j=e.$r(w);return g.$include(j("Enumerable")),g.$include(j("Helpers")),g.$attr_accessor("native"),ee(w[0],"IRREGULARS",["html","url","uri"]),D(g,"$initialize",function(v){var o=this;return o.native=o.$Native(v)}),D(g,"$method_missing",function E(v,o){var d=E.$$p||Y,k,h,l,c=this,X=Y,y=Y,i=Y,a=Y,$=Y,n=Y;return E.$$p=null,k=W(arguments,1),h=k,X=c.$to_js_name(v),q(c["$existing_property?"](X))||q(X["$end_with?"]("="))||c.$raise(j("NoMethodError"),"undefined method `"+v+"` for "+c),q(X["$end_with?"]("="))?(y=X["$[]"](R(0,-2,!1)),l=[y,h.$first()],Z(c.$native(),"[]=",l),l[l.length-1]):(i=c.$native()["$[]"](X),q(typeof i=="function")?(a=h.$dup(),q(d)&&($=function(){let t=Array.prototype.slice.call(arguments);return Z(d,"call",[c.$class().$new(this)].concat(p(t)))},a["$<<"]($)),n=i.apply(c.$to_n(),a.$to_n()),c.$wrap_result(n)):q(typeof i=="object"&&i!==null)?c.$wrap_result(i):i)},-2),D(g,"$to_str",function(){var v=this;return v.$to_n().toString()}),D(g,"$respond_to_missing?",function(v,o){return!0},-2),D(g,"$each",function E(){var v=E.$$p||Y,o=this,d=Y;return E.$$p=null,q(o["$respond_to?"]("length"))?(d=o.$length(),Z(e.Range.$new(0,d,!0),"each",[],function k(h){var l=k.$$s==null?this:k.$$s;return h==null&&(h=Y),e.yield1(v,l["$[]"](h))},{$$s:o})):o.$enum_for("each")}),D(g,"$[]",function(v){var o=this,d=Y;return d=o.$native()["$[]"](v),o.$wrap_result(d)}),D(g,"$[]=",function(v,o){var d=this;return d.$native()["$[]="](v,o),d.$wrap_result(d.$native())}),D(g,"$to_n",function(){var v=this;return v.$native().$to_n()}),D(g,"$length",function(){var v=this;return v.$native().$length()}),g.$private(),D(g,"$to_js_name",function(v){return Z(v.$to_s().$split("_").$map(),"with_index",[],function(d,k){return d==null&&(d=Y),k==null&&(k=Y),q(j("IRREGULARS")["$include?"](d.$gsub("=","").$downcase()))?d.$upcase():q(k["$zero?"]())?d:d.$capitalize()}).$join()}),D(g,"$to_rb_name",function(v){return Z(v.$to_s(),"gsub",[/([A-Z]+)/],function(){var d;return"_"+((d=H["~"])===Y?Y:d["$[]"](1)).$downcase()}).$sub(/^_/,"")}),D(g,"$existing_property?",function(v){var o=this;return v in o.$to_n()})}(P[0],null,P),function(U,N,T){var g=A(U,N,"Promise"),w=[g].concat(T),j=e.$r(w);return g.$include(j("Helpers")),D(g,"$then",function E(){var v=E.$$p||Y,o,d=this,k=Y;return E.$$p=null,k=function(h){var l=v.$call(d.$wrap_result(h));return l&&typeof l.then=="function"?l:l&&typeof l.to_n=="function"?l.to_n():l},o=[d.$to_n().then(k)],Z(d,"native=",o),o[o.length-1]}),D(g,"$catch",function E(){var v=E.$$p||Y,o,d=this,k=Y;return E.$$p=null,k=function(h){var l=v.$call(d.$wrap_result(h));return l&&typeof l.then=="function"?l:l&&typeof l.to_n=="function"?l.to_n():l},o=[d.$to_n().catch(k)],Z(d,"native=",o),o[o.length-1]})}(P[0],B("Proxy"),P)}(K[0],K)};Opal.modules["opal_stimulus/stimulus_controller"]=function(e){var z=e.klass,q=e.const_set,D=e.Opal,A=e.defs,ee=e.truthy,W=e.send,R=e.gvars,Z=e.return_val,p=e.thrower,H=e.rb_plus,$e=e.eqeqeq,K=e.def,Y=e.top,te=[],F=e.nil,x=e.$$$;return e.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),Y.$require("opal"),Y.$require("native"),Y.$require("js/proxy"),function(P,B,U){var N=z(P,B,"StimulusController"),T=[N].concat(U),g=e.$r(T),w=N.$$prototype;return w.window=w.document=F,q(T[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),q(T[0],"DEFAULT_GETTERS",["element"]),A(N,"$inherited",function(E){return D.$bridge(E.$stimulus_controller(),E)}),A(N,"$stimulus_controller",function(){var E=this;return E.stimulus_controller==null&&(E.stimulus_controller=F),ee(E.stimulus_controller)||(E.stimulus_controller=class extends Controller{}),E.stimulus_controller}),A(N,"$stimulus_name",function(){var E=this;return E.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),A(N,"$method_added",function(E){var v=this;if(ee(g("DEFAULT_GETTERS")["$include?"](E)))return F;v.$stimulus_controller().prototype[E]=function(...o){try{var d=o.map(function(k){return k&&typeof k=="object"&&!k.$$class?e.JS.Proxy.$new(k):k});return this["$"+E].apply(this,d)}catch(k){console.error("Uncaught",k)}}}),A(N,"$to_ruby_name",function(E){return W(E.$to_s(),"gsub",[/([A-Z]+)/],function(){var o;return"_"+((o=R["~"])===F?F:o["$[]"](1)).$downcase()}).$sub(/^_/,"")}),A(N,"$register_all!",function(){try{var E=p("return"),v=this;return W(v.$subclasses(),"each",[],function o(d){return d==null&&(d=F),W(d,"define_method",["dummy"],Z(F)),ee(application.controllers["$include?"](d.$stimulus_name()))&&E.$throw(F,o.$$is_lambda),application.register(d.$stimulus_name(),d.$stimulus_controller())},{$$ret:E})}catch(o){if(o===E)return o.$v;throw o}finally{E.is_orphan=!0}}),A(N,"$targets=",function(E){var v=this;return E==null&&(E=[]),v.$stimulus_controller().targets=E,W(E,"each",[],function o(d){var k=o.$$s==null?this:o.$$s,h=F,l=F,c=F,X=F,y=F,i=F;d==null&&(d=F),h=d.$to_s(),l=k.$to_ruby_name(d),W(k,"define_method",[H(l,"_target")],function(){return x(g("JS"),"Proxy").$new(this[H(h,"Target")])}),W(k,"define_method",[H(l,"_targets")],function(){return W(this[H(h,"Targets")],"map",[],function(n){return n==null&&(n=F),x(g("JS"),"Proxy").$new(n)})}),W(k,"define_method",[H(H("has_",l),"_target")],function(){return this[H(H("has",h.$capitalize()),"Target")]}),c=H(l,"_target_connected"),X=H(h,"TargetConnected"),k.$stimulus_controller().prototype[X]=function(){if(this["$respond_to?"]&&this["$respond_to?"](c))return this["$"+c]()},y=H(l,"_target_disconnected"),i=H(h,"TargetDisconnected"),k.$stimulus_controller().prototype[i]=function(){if(this["$respond_to?"]&&this["$respond_to?"](y))return this["$"+y]()}},{$$s:v})},-1),A(N,"$outlets=",function(E){var v=this;return E==null&&(E=[]),v.$stimulus_controller().outlets=E,W(E,"each",[],function o(d){var k=o.$$s==null?this:o.$$s,h=F,l=F,c=F,X=F,y=F,i=F;d==null&&(d=F),h=d.$to_s(),l=k.$to_ruby_name(d),W(k,"define_method",[H(l,"_outlet")],function(){return this[H(h,"Outlet")]}),W(k,"define_method",[H(l,"_outlets")],function(){return this[H(h,"Outlets")]}),W(k,"define_method",[H(H("has_",l),"_outlet")],function(){return this[H(H("has",h.$capitalize()),"Outlet")]}),c=H(l,"_outlet_connected"),X=H(h,"OutletConnected"),k.$stimulus_controller().prototype[X]=function(){if(this["$respond_to?"]&&this["$respond_to?"](c))return this["$"+c]()},y=H(l,"_outlet_disconnected"),i=H(h,"OutletDisconnected"),k.$stimulus_controller().prototype[i]=function(){if(this["$respond_to?"]&&this["$respond_to?"](y))return this["$"+y]()}},{$$s:v})},-1),A(N,"$values=",function(E){var v=this,o=F;return E==null&&(E=new Map),o=new Map,W(E,"each",[],function d(k,h){var l=d.$$s==null?this:d.$$s,c=F,X=F,y=F,i=F;k==null&&(k=F),h==null&&(h=F),k=l.$to_ruby_name(k),c=$e("string",X=h)?String:$e("number",X)?Number:$e("boolean",X)?Boolean:$e("array",X)?Array:$e("object",X)?Object:l.$raise(g("ArgumentError"),"Unsupported value type: "+h+", please use :string, :number, :boolean, :array, or :object"),o["$[]="](k,c),l.$stimulus_controller().values=o.$to_n(),W(l,"define_method",[H(k,"_value")],function a(){var $=a.$$s==null?this:a.$$s;return $.$Native(this[H(k,"Value")])},{$$s:l}),W(l,"define_method",[H(k,"_value=")],function a($){var n=a.$$s==null?this:a.$$s;return $==null&&($=F),n.$Native(this[H(k,"Value")]=$)},{$$s:l}),W(l,"define_method",["has_"+k],function(){return this[H(H("has",k.$to_s().$capitalize()),"Value")]}),y=""+k+"_value_changed",i=""+k+"ValueChanged",l.$stimulus_controller().prototype[i]=function(a,$){if(h["$=="]("object")&&(a=JSON.stringify(a),$=JSON.stringify($)),this["$respond_to?"]&&this["$respond_to?"](y))return this["$"+y](a,$)}},{$$s:v})},-1),A(N,"$classes=",function(E){var v=this;return E==null&&(E=[]),v.$stimulus_controller().classes=E,W(E,"each",[],function o(d){var k=o.$$s==null?this:o.$$s,h=F,l=F;return d==null&&(d=F),h=d.$to_s(),l=k.$to_ruby_name(d),W(k,"define_method",[""+l+"_class"],function(){return this[H(h,"Class")]}),W(k,"define_method",[""+l+"_classes"],function(){return this[H(h,"Classes")]}),W(k,"define_method",["has_"+l+"_class"],function(){return this[H(H("has",h.$capitalize()),"Class")]})},{$$s:v})},-1),K(N,"$element",function(){return x(g("JS"),"Proxy").$new(this.element)}),K(N,"$window",function(){var E=this,v=F;return R.$==null&&(R.$=F),E.window=ee(v=E.window)?v:x(g("JS"),"Proxy").$new(R.$.$window())}),K(N,"$document",function(){var E=this,v=F;return R.$==null&&(R.$=F),E.document=ee(v=E.document)?v:x(g("JS"),"Proxy").$new(R.$.$document())})}(te[0],Controller,te)};Opal.modules["opal_vite/concerns/v1/stimulus_helpers"]=function(e){var z=e.module,q=e.def,D=e.truthy,A=e.eqeq,ee=e.send,W=e.slice,R=e.ensure_kwargs,Z=e.get_kwarg,p=e.hash_get,H=e.rb_plus,$e=e.range,K=e.const_set,Y=[],te=e.$r(Y),F=e.nil,x=e.$$$;return e.add_stubs("camelize,has_target?,target_set_value,target_set_html,set_target_style,get_target_style,==,show_target,hide_target,call,body_style,to_n,storage_get,is_a?,parse_int,event_data,to_native_element,Native,map,to_a,js_timestamp,is_nan?,parse_float,to_s,empty?,respond_to?,fetch_json_promise,fetch_json_safe,js_then,js_catch,console_error,private,include?,+,upcase,[],downcase,split,join,to_proc,first"),function(P,B){var U=z(P,"OpalVite"),N=[U].concat(B);return function(T,g){var w=z(T,"Concerns"),j=[w].concat(g);return function(E,v){var o=z(E,"V1"),d=[o].concat(v);return function(k,h){var l=z(k,"StimulusHelpers"),c=[l].concat(h),X=e.$r(c);return q(l,"$has_target?",function(i){var a=this,$=F;return $="has"+a.$camelize(i)+"Target",this[$]}),q(l,"$get_target",function(i){var a=this,$=F;return D(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$]):F}),q(l,"$get_targets",function(i){var a=this,$=F;return $=""+a.$camelize(i,!1)+"Targets",Array.from(this[$]||[])}),q(l,"$target_value",function(i){var a=this,$=F;return D(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].value):F}),q(l,"$target_set_value",function(i,a){var $=this,n=F;return D($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].value=a):F}),q(l,"$target_html",function(i){var a=this,$=F;return D(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].innerHTML):F}),q(l,"$target_set_html",function(i,a){var $=this,n=F;return D($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].innerHTML=a):F}),q(l,"$target_text",function(i){var a=this,$=F;return D(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].textContent):F}),q(l,"$target_set_text",function(i,a){var $=this,n=F;return D($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].textContent=a):F}),q(l,"$target_data",function(i,a){var $=this,n=F;return D($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].getAttribute("data-"+a)):F}),q(l,"$target_set_data",function(i,a,$){var n=this,t=F;return D(n["$has_target?"](i))?(t=""+n.$camelize(i,!1)+"Target",this[t].setAttribute("data-"+a,$)):F}),q(l,"$target_clear",function(i){var a=this;return a.$target_set_value(i,"")}),q(l,"$target_clear_html",function(i){var a=this;return a.$target_set_html(i,"")}),q(l,"$set_target_style",function(i,a,$){var n=this,t=F;return D(n["$has_target?"](i))?(t=""+n.$camelize(i,!1)+"Target",this[t].style[a]=$):F}),q(l,"$get_target_style",function(i,a){var $=this,n=F;return D($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].style[a]):F}),q(l,"$show_target",function(i){var a=this;return a.$set_target_style(i,"display","")}),q(l,"$hide_target",function(i){var a=this;return a.$set_target_style(i,"display","none")}),q(l,"$toggle_target_visibility",function(i){var a=this,$=F;return $=a.$get_target_style(i,"display"),A($,"none")?a.$show_target(i):a.$hide_target(i)}),q(l,"$add_target_class",function(i,a){var $=this,n=F;return D($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.add(a)):F}),q(l,"$remove_target_class",function(i,a){var $=this,n=F;return D($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.remove(a)):F}),q(l,"$toggle_target_class",function(i,a){var $=this,n=F;return D($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.toggle(a)):F}),q(l,"$has_target_class?",function(i,a){var $=this,n=F;return D($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.contains(a)):!1}),q(l,"$js_timestamp",function(){return Date.now()}),q(l,"$js_iso_date",function(){return new Date().toISOString()}),q(l,"$js_date",function(i){return i==null&&(i=F),D(i)?new Date(i):new Date},-1),q(l,"$js_regexp",function(i,a){return a==null&&(a=""),new RegExp(i,a)},-2),q(l,"$js_regexp_test",function(i,a,$){return $==null&&($=""),new RegExp(i,$).test(a)},-3),q(l,"$set_timeout",function y(i){var a=y.$$p||F;return y.$$p=null,setTimeout(function(){a.$call()},i)}),q(l,"$set_interval",function y(i){var a=y.$$p||F;return y.$$p=null,setInterval(function(){a.$call()},i)}),q(l,"$clear_timeout",function(i){return clearTimeout(i)}),q(l,"$clear_interval",function(i){return clearInterval(i)}),q(l,"$body_style",function(i,a){return document.body.style[i]=a}),q(l,"$lock_body_scroll",function(){var i=this;return i.$body_style("overflow","hidden")}),q(l,"$unlock_body_scroll",function(){var i=this;return i.$body_style("overflow","")}),q(l,"$js_array",function(){return[]}),q(l,"$js_array_push",function(i,a){return i.push(a.$to_n())}),q(l,"$js_array_length",function(i){return i.length}),q(l,"$js_array_at",function(i,a){return i[a]}),q(l,"$storage_get",function(i){return localStorage.getItem(i)}),q(l,"$storage_set",function(i,a){return localStorage.setItem(i,a)}),q(l,"$storage_remove",function(i){return localStorage.removeItem(i)}),q(l,"$storage_get_json",function(i,a){var $=this,n=F;return a==null&&(a=F),n=$.$storage_get(i),D(n===null)?a:JSON.parse(n)},-2),q(l,"$storage_set_json",function(i,a){return localStorage.setItem(i,JSON.stringify(a.$to_n()))}),q(l,"$dispatch_window_event",function(i,a){var $=F;a==null&&(a=new Map),$=D(a["$is_a?"](X("Hash")))?a.$to_n():a;const n=new CustomEvent(i,{detail:$});window.dispatchEvent(n)},-2),q(l,"$dispatch_event",function(i,a){var $=F;a==null&&(a=new Map),$=D(a["$is_a?"](X("Hash")))?a.$to_n():a;const n=new CustomEvent(i,{detail:$});this.element.dispatchEvent(n)},-2),q(l,"$on_window_event",function y(i){var a=y.$$p||F;return y.$$p=null,window.addEventListener(i,a)}),q(l,"$off_window_event",function(i,a){return window.removeEventListener(i,a)}),q(l,"$on_document_event",function y(i){var a=y.$$p||F;return y.$$p=null,document.addEventListener(i,a)}),q(l,"$on_dom_ready",function y(){var i=y.$$p||F;return y.$$p=null,document.addEventListener("DOMContentLoaded",i)}),q(l,"$on_element_event",function y(i,a){var $=y.$$p||F;return y.$$p=null,i.addEventListener(a,$)}),q(l,"$off_element_event",function(i,a,$){return i.removeEventListener(a,$)}),q(l,"$on_controller_event",function y(i){var a=y.$$p||F;y.$$p=null;const $=a;this.element.addEventListener(i,function(n){$(n)})}),q(l,"$event_target",function(){return event.currentTarget}),q(l,"$event_data",function(i){return event.currentTarget.getAttribute("data-"+i)}),q(l,"$event_data_int",function(i){var a=this;return a.$parse_int(a.$event_data(i))}),q(l,"$prevent_default",function(){return event.preventDefault()}),q(l,"$event_key",function(){return event.key}),q(l,"$to_native_element",function(i){return D(typeof i.$to_n=="function")?i.$to_n():i}),q(l,"$add_class",function(i,a){var $=this,n=F;return n=$.$to_native_element(i),n.classList.add(a)}),q(l,"$remove_class",function(i,a){var $=this,n=F;return n=$.$to_native_element(i),n.classList.remove(a)}),q(l,"$toggle_class",function(i,a){var $=this,n=F;return n=$.$to_native_element(i),n.classList.toggle(a)}),q(l,"$has_class?",function(i,a){var $=this,n=F;return n=$.$to_native_element(i),n.classList.contains(a)}),q(l,"$set_attr",function(i,a,$){var n=this,t=F;return t=n.$to_native_element(i),t.setAttribute(a,$)}),q(l,"$get_attr",function(i,a){var $=this,n=F;return n=$.$to_native_element(i),n.getAttribute(a)}),q(l,"$remove_attr",function(i,a){var $=this,n=F;return n=$.$to_native_element(i),n.removeAttribute(a)}),q(l,"$set_style",function(i,a,$){var n=this,t=F;return t=n.$to_native_element(i),t.style[a]=$}),q(l,"$set_html",function(i,a){var $=this,n=F;return n=$.$to_native_element(i),n.innerHTML=a}),q(l,"$set_text",function(i,a){var $=this,n=F;return n=$.$to_native_element(i),n.textContent=a}),q(l,"$get_value",function(i){var a=this,$=F;return $=a.$to_native_element(i),$.value}),q(l,"$set_value",function(i,a){var $=this,n=F;return n=$.$to_native_element(i),n.value=a}),q(l,"$focus",function(i){var a=this,$=F;return $=a.$to_native_element(i),$.focus()}),q(l,"$has_attr?",function(i,a){var $=this,n=F;return n=$.$to_native_element(i),n.hasAttribute(a)}),q(l,"$create_element",function(i){return document.createElement(i)}),q(l,"$append_child",function(i,a){var $=this,n=F,t=F;return n=$.$to_native_element(i),t=$.$to_native_element(a),n.appendChild(t)}),q(l,"$remove_element",function(i){var a=this,$=F;return $=a.$to_native_element(i),$.remove()}),q(l,"$next_sibling",function(i){var a=this,$=F;return $=a.$to_native_element(i),$.nextElementSibling}),q(l,"$prev_sibling",function(i){var a=this,$=F;return $=a.$to_native_element(i),$.previousElementSibling}),q(l,"$parent",function(i){var a=this,$=F;return $=a.$to_native_element(i),$.parentElement}),q(l,"$query",function(i){var a=this,$=F;return $=document.querySelector(i),D($===null)?F:a.$Native($)}),q(l,"$query_all",function(i){var a=this,$=F;return $=Array.from(document.querySelectorAll(i)),ee(a.$Native($).$to_a(),"map",[],function n(t){var r=n.$$s==null?this:n.$$s;return t==null&&(t=F),r.$Native(t)},{$$s:a})}),q(l,"$query_element",function(i){var a=this,$=F;return $=this.element.querySelector(i),D($===null)?F:a.$Native($)}),q(l,"$query_all_element",function(i){var a=this,$=F;return $=Array.from(this.element.querySelectorAll(i)),ee(a.$Native($).$to_a(),"map",[],function n(t){var r=n.$$s==null?this:n.$$s;return t==null&&(t=F),r.$Native(t)},{$$s:a})}),q(l,"$doc_root",function(){return document.documentElement}),q(l,"$set_root_attr",function(i,a){return document.documentElement.setAttribute(i,a)}),q(l,"$get_root_attr",function(i){return document.documentElement.getAttribute(i)}),q(l,"$clone_template",function(i){var a=this,$=F;return $=""+a.$camelize(i,!1)+"Target",this[$].content.cloneNode(!0)}),q(l,"$template_first_child",function(i){return i.firstElementChild}),q(l,"$element_add_class",function(i){return this.element.classList.add(i)}),q(l,"$element_remove_class",function(i){return this.element.classList.remove(i)}),q(l,"$element_toggle_class",function(i){return this.element.classList.toggle(i)}),q(l,"$generate_id",function(){var i=this;return i.$js_timestamp()}),q(l,"$target_focus",function(i){var a=this,$=F;return D(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].focus()):F}),q(l,"$target_blur",function(i){var a=this,$=F;return D(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].blur()):F}),q(l,"$parse_int",function(i,a){return a==null&&(a=10),parseInt(i,a)},-2),q(l,"$parse_float",function(i){return parseFloat(i)}),q(l,"$is_nan?",function(i){return Number.isNaN(i)}),q(l,"$parse_int_or",function(i,a){var $=this,n=F;return a==null&&(a=0),n=$.$parse_int(i),D($["$is_nan?"](n))?a:n},-2),q(l,"$parse_float_or",function(i,a){var $=this,n=F;return a==null&&(a=0),n=$.$parse_float(i),D($["$is_nan?"](n))?a:n},-2),q(l,"$js_prop",function(i){return this[i.$to_s()]}),q(l,"$js_set_prop",function(i,a){return this[i.$to_s()]=a}),q(l,"$js_has_prop?",function(i){return!!this[i.$to_s()]}),q(l,"$js_call",function(i,a){var $,n,t=F;return $=W(arguments,1),n=$,D(n["$empty?"]())?this[i.$to_s()]():(t=ee(n,"map",[],function(s){return s==null&&(s=F),D(s["$respond_to?"]("to_n"))?s.$to_n():s}),this[i.$to_s()].apply(this,t))},-2),q(l,"$js_call_on",function(i,a,$){var n,t,r=F;return n=W(arguments,2),t=n,D(t["$empty?"]())?i[a.$to_s()]():(r=ee(t,"map",[],function(u){return u==null&&(u=F),D(u["$respond_to?"]("to_n"))?u.$to_n():u}),i[a.$to_s()].apply(i,r))},-3),q(l,"$js_get",function(i,a){return i[a.$to_s()]}),q(l,"$js_set",function(i,a,$){return i[a.$to_s()]=$}),q(l,"$json_parse",function(i){return JSON.parse(i)}),q(l,"$json_stringify",function(i){var a=F;return a=D(i["$respond_to?"]("to_n"))?i.$to_n():i,JSON.stringify(a)}),q(l,"$console_log",function(i){var a,$;return a=W(arguments),$=a,console.log.apply(console,$)},-1),q(l,"$console_warn",function(i){var a,$;return a=W(arguments),$=a,console.warn.apply(console,$)},-1),q(l,"$console_error",function(i){var a,$;return a=W(arguments),$=a,console.error.apply(console,$)},-1),q(l,"$js_string_char_at",function(i,a){return i.charAt(a)}),q(l,"$js_substring",function(i,a,$){return $==null&&($=F),D($)?i.substring(a,$):i.substring(a)},-3),q(l,"$js_split",function(i,a){return i.split(a)}),q(l,"$js_trim",function(i){return i.trim()}),q(l,"$js_includes?",function(i,a){return i.includes(a)}),q(l,"$js_equals?",function(i,a){return i===a}),q(l,"$js_loose_equals?",function(i,a){return i==a}),q(l,"$js_random",function(){return Math.random()}),q(l,"$js_min",function(i,a){return Math.min(i,a)}),q(l,"$js_max",function(i,a){return Math.max(i,a)}),q(l,"$js_abs",function(i){return Math.abs(i)}),q(l,"$js_round",function(i){return Math.round(i)}),q(l,"$js_ceil",function(i){return Math.ceil(i)}),q(l,"$js_to_fixed",function(i,a){return i.toFixed(a)}),q(l,"$random_int",function(i){return Math.floor(Math.random()*i)}),q(l,"$js_floor",function(i){return Math.floor(i)}),q(l,"$js_global_exists?",function(i){return typeof window[i]<"u"}),q(l,"$js_global",function(i){return window[i]}),q(l,"$js_new",function(i,a){var $,n,t=F;return $=W(arguments,1),n=$,D(n["$empty?"]())?new i:(t=ee(n,"map",[],function(s){return s==null&&(s=F),s!=null&&typeof s.$to_n=="function"?s.$to_n():s}),Reflect.construct(i,t))},-2),q(l,"$js_define_method",function y(i){var a=y.$$p||F;return y.$$p=null,this[i.$to_s()]=a}),q(l,"$js_define_method_on",function y(i,a){var $=y.$$p||F;return y.$$p=null,i[a.$to_s()]=$}),q(l,"$js_length",function(i){return i.length}),q(l,"$js_map",function y(i){var a=y.$$p||F;return y.$$p=null,i.map(a)}),q(l,"$js_filter",function y(i){var a=y.$$p||F;return y.$$p=null,i.filter(a)}),q(l,"$js_reduce",function y(i,a){var $=y.$$p||F;return y.$$p=null,i.reduce($,a)}),q(l,"$js_each",function y(i){var a=y.$$p||F;return y.$$p=null,i.forEach(a)}),q(l,"$js_slice",function(i,a,$){return $==null&&($=F),D($)?i.slice(a,$):i.slice(a)},-3),q(l,"$js_object",function(){return{}}),q(l,"$js_keys",function(i){return Object.keys(i)}),q(l,"$js_values",function(i){return Object.values(i)}),q(l,"$js_entries",function(i){return Object.entries(i)}),q(l,"$js_unique_count",function(i){return new Set(i).size}),q(l,"$js_fetch",function(i){return fetch(i)}),q(l,"$fetch_json",function y(i){var a=y.$$p||F;y.$$p=null,fetch(i).then($=>$.json()).then($=>a.$call($)).catch($=>console.error("Fetch error:",$))}),q(l,"$fetch_json_promise",function(i){return fetch(i).then(a=>a.json())}),q(l,"$fetch_json_safe",function(i){return fetch(i).then(function(a){if(!a.ok)throw new Error("Network response was not ok: "+a.status);return a.json()})}),q(l,"$fetch_all_json",function(i){var a=this,$=F;return $=ee(i,"map",[],function n(t){var r=n.$$s==null?this:n.$$s;return t==null&&(t=F),r.$fetch_json_promise(t)},{$$s:a}),Promise.all($)}),q(l,"$fetch_json_with_handlers",function(i,a){var $,n,t=this,r=F;return a=R(a),$=Z(a,"on_success"),n=p(a,"on_error"),n==null&&(n=F),r=t.$fetch_json_safe(i),r=ee(t,"js_then",[r],function(u){return u==null&&(u=F),$.$call(u)}),D(n)?ee(t,"js_catch",[r],function(u){return u==null&&(u=F),n.$call(u)}):ee(t,"js_catch",[r],function s(u){var f=s.$$s==null?this:s.$$s;return u==null&&(u=F),f.$console_error("Fetch error:",u)},{$$s:t})}),q(l,"$promise_all",function(i){return Promise.all(i)}),q(l,"$promise_race",function(i){return Promise.race(i)}),q(l,"$promise_resolve",function(i){var a=F;return a=D(i["$respond_to?"]("to_n"))?i.$to_n():i,Promise.resolve(a)}),q(l,"$promise_reject",function(i){return Promise.reject(i)}),q(l,"$js_then",function y(i){var a=y.$$p||F;return y.$$p=null,i.then(a)}),q(l,"$js_catch",function y(i){var a=y.$$p||F;return y.$$p=null,i.catch(a)}),q(l,"$js_finally",function y(i){var a=y.$$p||F;return y.$$p=null,i.finally(a)}),l.$private(),q(l,"$camelize",function(i,a){var $=F,n=F;return a==null&&(a=!0),$=i.$to_s(),D($["$include?"]("_"))?(n=$.$split("_"),D(a)?ee(n,"map",[],"capitalize".$to_proc()).$join():H([n.$first()],ee(n["$[]"]($e(1,-1,!1)),"map",[],"capitalize".$to_proc())).$join()):D(a)?H($["$[]"](0).$upcase(),$["$[]"]($e(1,-1,!1)).$to_s()):H($["$[]"](0).$downcase(),$["$[]"]($e(1,-1,!1)).$to_s())},-2)}(d[0],d)}(j[0],j)}(N[0],N)}(Y[0],Y),K(Y[0],"StimulusHelpers",x(x(x(te("OpalVite"),"Concerns"),"V1"),"StimulusHelpers"))};Opal.modules["opal_vite/concerns/v1/js_proxy_ex"]=function(e){var z=e.module,q=e.truthy,D=e.def,A=e.send,ee=e.klass,W=e.assign_ivar,R=e.return_ivar,Z=e.slice,p=e.range,H=e.eqeq,$e=e.lambda,K=e.to_a,Y=e.eqeqeq,te=e.rb_plus,F=e.defs,x=e.const_set,P=[],B=e.$r(P),U=e.nil,N=e.$$$;return e.add_stubs("new,to_n,nil?,respond_to?,times,<<,to_s,snake_to_camel,wrap_result,end_with?,[],!,==,call,map,===,length,enum_for,private,upcase,split,+,join,to_proc,test,js_array_to_ruby"),function(T,g){var w=z(T,"OpalVite"),j=[w].concat(g);return function(E,v){var o=z(E,"Concerns"),d=[o].concat(v);return function(k,h){var l=z(k,"V1"),c=[l].concat(h);return function(X,y){var i=z(X,"JsProxyEx"),a=[i].concat(y),$=e.$r(a);return D(i,"$local_storage",function(){var t=this,r=U;return t.local_storage==null&&(t.local_storage=U),t.local_storage=q(r=t.local_storage)?r:$("JsObject").$new(localStorage)}),D(i,"$session_storage",function(){var t=this,r=U;return t.session_storage==null&&(t.session_storage=U),t.session_storage=q(r=t.session_storage)?r:$("JsObject").$new(sessionStorage)}),D(i,"$js_json",function(){var t=this,r=U;return t.js_json==null&&(t.js_json=U),t.js_json=q(r=t.js_json)?r:$("JsonWrapper").$new()}),D(i,"$js_date",function(){return $("DateWrapper")}),D(i,"$js_console",function(){var t=this,r=U;return t.js_console==null&&(t.js_console=U),t.js_console=q(r=t.js_console)?r:$("JsObject").$new(console)}),D(i,"$new_event",function(t,r){return r==null&&(r=new Map),$("JsObject").$new(new Event(t,r.$to_n()))},-2),D(i,"$new_custom_event",function(t,r){return r==null&&(r=new Map),$("JsObject").$new(new CustomEvent(t,{detail:r.$to_n()}))},-2),D(i,"$new_url",function(t){return $("JsObject").$new(new URL(t))}),D(i,"$new_regexp",function(t,r){return r==null&&(r=""),$("RegExpWrapper").$new(t,r)},-2),D(i,"$new_date",function(t){return t==null&&(t=U),q(t)?$("JsObject").$new(new Date(t)):$("JsObject").$new(new Date)},-1),D(i,"$date_now",function(){return Date.now()}),D(i,"$wrap_js",function(t){var r=U;return q(t["$nil?"]())?U:(r=q(t["$respond_to?"]("to_n"))?t.$to_n():t,$("JsObject").$new(r))}),D(i,"$js_array_to_ruby",function(t){var r=U,s=U;return r=[],s=t.length,A(s,"times",[],function(f){var m=U;return f==null&&(f=U),m=t[f],r["$<<"]($("JsObject").$new(m))}),r}),D(i,"$new_js_array",function(){return $("JsObject").$new([])}),function(n,t,r){var s=ee(n,t,"JsObject"),u=[s].concat(r),f=e.$r(u),m=s.$$prototype;return m.native=U,D(s,"$initialize",W("native")),D(s,"$to_n",R("native")),D(s,"$[]",function(C){var M=this,J=U,O=U,ae=U;return J=C.$to_s(),O=M.$snake_to_camel(J),ae=M.native[O],M.$wrap_result(ae)}),D(s,"$[]=",function(C,M){var J=this,O=U,ae=U,le=U;return O=C.$to_s(),ae=J.$snake_to_camel(O),le=q(M["$respond_to?"]("to_n"))?M.$to_n():M,J.native[ae]=le}),D(s,"$method_missing",function S(C,M){var J=S.$$p||U,O,ae,le=this,ce=U,de=U,he=U,ve=U,me=U,be=U,ie=U,I=U,L=U,V=U;return S.$$p=null,O=Z(arguments,1),ae=O,ce=C.$to_s(),q(ce["$end_with?"]("="))?(de=ce["$[]"](p(0,-2,!1)),he=le.$snake_to_camel(de),ve=ae["$[]"](0),me=q(ve["$respond_to?"]("to_n"))?ve.$to_n():ve,le.native[he]=me,ve):q(ce["$end_with?"]("?"))?(de=ce["$[]"](p(0,-2,!1)),he=le.$snake_to_camel(de),le.native[he]["$!"]()["$!"]()):(he=le.$snake_to_camel(ce),be=typeof le.native[he]=="function",q(be)?H(he,"addEventListener")&&q(J)?(ie=$e(function(ne){return ne==null&&(ne=U),J.$call(f("JsObject").$new(ne))}),le.native.addEventListener(ae["$[]"](0),ie),U):(I=A(ae,"map",[],function(ne){return ne==null&&(ne=U),q(ne["$respond_to?"]("to_n"))?ne.$to_n():ne}),q(J)&&(ie=$e(function Q(ne){var se,oe,fe=Q.$$s==null?this:Q.$$s,_=U;return se=Z(arguments),oe=se,_=A(oe,"map",[],function b(G){var re=b.$$s==null?this:b.$$s;return G==null&&(G=U),re.$wrap_result(G)},{$$s:fe}),A(J,"call",K(_))},{$$arity:-1,$$s:le}),I["$<<"](ie)),L=Y(0,V=I.$length())?le.native[he]():Y(1,V)?le.native[he](I["$[]"](0)):Y(2,V)?le.native[he](I["$[]"](0),I["$[]"](1)):Y(3,V)?le.native[he](I["$[]"](0),I["$[]"](1),I["$[]"](2)):le.native[he].apply(le.native,I),le.$wrap_result(L)):(L=le.native[he],le.$wrap_result(L)))},-2),D(s,"$respond_to_missing?",function(C,M){return!0},-2),D(s,"$each",function S(){var C=S.$$p||U,M=this,J=U;return S.$$p=null,q(C)?(J=M.native.length,q(J)&&A(J,"times",[],function O(ae){var le=O.$$s==null?this:O.$$s,ce=U;return le.native==null&&(le.native=U),ae==null&&(ae=U),ce=le.native[ae],C.$call(le.$wrap_result(ce))},{$$s:M}),M):M.$enum_for("each")}),D(s,"$length",function(){var C=this;return C.native.length}),D(s,"$size",function(){var C=this;return C.$length()}),D(s,"$nil?",function(){var C=this;return C.native==null}),D(s,"$exists?",function(){var C=this;return C["$nil?"]()["$!"]()}),D(s,"$to_s",function(){var C=this;return String(C.native)}),D(s,"$inspect",function(){var C=this;return"#<JsObject: "+C.$to_s()+">"}),s.$private(),D(s,"$snake_to_camel",function(C){var M=U;return H(C,C.$upcase())||(M=C.$split("_"),H(M.$length(),1))?C:te(M["$[]"](0),A(M["$[]"](p(1,-1,!1)),"map",[],"capitalize".$to_proc()).$join())}),D(s,"$wrap_result",function(C){return q(C==null)?U:q(typeof C=="number")||q(typeof C=="string")||q(typeof C=="boolean")?C:f("JsObject").$new(C)})}(a[0],null,a),function(n,t,r){var s=ee(n,t,"JsonWrapper"),u=[s].concat(r),f=e.$r(u);return D(s,"$parse",function(S){var C=U;return C=JSON.parse(S),f("JsObject").$new(C)}),D(s,"$stringify",function(S){var C=U;return C=q(S["$respond_to?"]("to_n"))?S.$to_n():S,JSON.stringify(C)})}(a[0],null,a),function(n,t,r){var s=ee(n,t,"RegExpWrapper"),u=[s].concat(r),f=e.$r(u),m=s.$$prototype;return m.native=U,D(s,"$initialize",function(C,M){var J=this;return M==null&&(M=""),J.native=new RegExp(C,M)},-2),D(s,"$to_n",R("native")),D(s,"$test",function(C){var M=this;return M.native.test(C)}),D(s,"$match",function(C){var M=this,J=U;return J=C.match(M.native),q(J===null)?U:f("JsObject").$new(J)}),D(s,"$=~",function(C){var M=this;return M.$test(C)})}(a[0],null,a),function(n,t){var r=z(n,"DateWrapper"),s=[r].concat(t),u=e.$r(s);return F(r,"$now",function(){return Date.now()}),F(r,"$new",function(m){return m==null&&(m=U),q(m)?u("JsObject").$new(new Date(m)):u("JsObject").$new(new Date)},-1),F(r,"$parse",function(m){return Date.parse(m)})}(a[0],a),D(i,"$has_target?",function(t){var r=this,s=U,u=U;return s=r.$snake_to_camel(t.$to_s()),u="has"+s["$[]"](0).$upcase()+s["$[]"](p(1,-1,!1))+"Target",this[u]}),D(i,"$target",function(t){var r=this,s=U,u=U,f=U;return s=r.$snake_to_camel(t.$to_s()),u=""+s+"Target",f=this[u],$("JsObject").$new(f)}),D(i,"$targets",function(t){var r=this,s=U,u=U,f=U;return s=r.$snake_to_camel(t.$to_s()),u=""+s+"Targets",f=this[u],r.$js_array_to_ruby(f)}),D(i,"$set_target_text",function(t,r){var s=this,u=U,f=U,m=U;u=s.$snake_to_camel(t.$to_s()),f="has"+u["$[]"](0).$upcase()+u["$[]"](p(1,-1,!1))+"Target",m=""+u+"Target",this[f]&&(this[m].textContent=r)}),D(i,"$set_target_class",function(t,r){var s=this,u=U,f=U,m=U;u=s.$snake_to_camel(t.$to_s()),f="has"+u["$[]"](0).$upcase()+u["$[]"](p(1,-1,!1))+"Target",m=""+u+"Target",this[f]&&(this[m].className=r)}),D(i,"$set_target_disabled",function(t,r){var s=this,u=U,f=U,m=U;u=s.$snake_to_camel(t.$to_s()),f="has"+u["$[]"](0).$upcase()+u["$[]"](p(1,-1,!1))+"Target",m=""+u+"Target",this[f]&&(this[m].disabled=r)}),i.$private(),D(i,"$snake_to_camel",function(t){var r=U;return H(t,t.$upcase())||(r=t.$to_s().$split("_"),H(r.$length(),1))?t:te(r["$[]"](0),A(r["$[]"](p(1,-1,!1)),"map",[],"capitalize".$to_proc()).$join())})}(c[0],c)}(d[0],d)}(j[0],j)}(P[0],P),x(P[0],"JsProxyEx",N(N(N(B("OpalVite"),"Concerns"),"V1"),"JsProxyEx"))};Opal.modules["opal_vite/concerns/v1/toastable"]=function(e){var z=e.module,q=e.def,D=e.const_set,A=[],ee=e.$r(A);e.nil;var W=e.$$$;return e.add_stubs("dispatch_toast"),function(R,Z){var p=z(R,"OpalVite"),H=[p].concat(Z);return function($e,K){var Y=z($e,"Concerns"),te=[Y].concat(K);return function(F,x){var P=z(F,"V1"),B=[P].concat(x);return function(U){var N=z(U,"Toastable");return q(N,"$dispatch_toast",function(g,w){w==null&&(w="info");const j=new CustomEvent("show-toast",{detail:{message:g,type:w}});window.dispatchEvent(j)},-2),q(N,"$show_success",function(g){var w=this;return w.$dispatch_toast(g,"success")}),q(N,"$show_error",function(g){var w=this;return w.$dispatch_toast(g,"error")}),q(N,"$show_warning",function(g){var w=this;return w.$dispatch_toast(g,"warning")}),q(N,"$show_info",function(g){var w=this;return w.$dispatch_toast(g,"info")})}(B[0])}(te[0],te)}(H[0],H)}(A[0],A),D(A[0],"Toastable",W(W(W(ee("OpalVite"),"Concerns"),"V1"),"Toastable"))};Opal.modules["opal_vite/concerns/v1/dom_helpers"]=function(e){var z=e.module,q=e.truthy,D=e.def,A=e.send,ee=e.const_set,W=[],R=e.$r(W),Z=e.nil,p=e.$$$;return e.add_stubs("window,to_n,query_selector,element,nil?,query_selector_all,map,to_a,Native,add,class_list,remove,toggle,contains,set_timeout,!,element_exists?,set_style"),function(H,$e){var K=z(H,"OpalVite"),Y=[K].concat($e);return function(te,F){var x=z(te,"Concerns"),P=[x].concat(F);return function(B,U){var N=z(B,"V1"),T=[N].concat(U);return function(g){var w=z(g,"DomHelpers");return D(w,"$dispatch_custom_event",function(E,v,o){var d=this,k=Z;v==null&&(v=new Map),o==null&&(o=Z),o=q(k=o)?k:d.$window();const h=new CustomEvent(E,{detail:v.$to_n()});o.$to_n().dispatchEvent(h)},-2),D(w,"$create_event",function(E,v){return v==null&&(v=new Map([["bubbles",!0]])),new Event(E,v.$to_n())},-2),D(w,"$query",function(E){var v=this,o=Z;return o=v.$element().$query_selector(E),q(o["$nil?"]())?Z:o}),D(w,"$query_all",function(E){var v=this,o=Z;return o=v.$element().$query_selector_all(E),A(v.$Native(Array.from(o.$to_n())).$to_a(),"map",[],function d(k){var h=d.$$s==null?this:d.$$s;return k==null&&(k=Z),h.$Native(k)},{$$s:v})}),D(w,"$add_class",function(E,v){return E.$class_list().$add(v)}),D(w,"$remove_class",function(E,v){return E.$class_list().$remove(v)}),D(w,"$toggle_class",function(E,v){return E.$class_list().$toggle(v)}),D(w,"$has_class?",function(E,v){return E.$class_list().$contains(v)}),D(w,"$set_timeout",function j(E){var v=j.$$p||Z,o=this;return j.$$p=null,o.$window().$set_timeout(v,E)}),D(w,"$element_exists?",function(E){var v=Z;return q(v=E["$nil?"]()["$!"]())?E.$to_n():v}),D(w,"$set_style",function(E,v,o){var d=this;return q(d["$element_exists?"](E))?E.$to_n().style[v]=o:Z}),D(w,"$get_style",function(E,v){var o=this;return q(o["$element_exists?"](E))?E.$to_n().style[v]:Z}),D(w,"$show_element",function(E){var v=this;return v.$set_style(E,"display","block")}),D(w,"$hide_element",function(E){var v=this;return v.$set_style(E,"display","none")})}(T[0])}(P[0],P)}(Y[0],Y)}(W[0],W),ee(W[0],"DomHelpers",p(p(p(R("OpalVite"),"Concerns"),"V1"),"DomHelpers"))};Opal.modules["opal_vite/concerns/v1/storable"]=function(e){var z=e.module,q=e.truthy,D=e.def,A=e.const_set,ee=[],W=e.$r(ee),R=e.nil,Z=e.$$$;return e.add_stubs("to_n"),function(p,H){var $e=z(p,"OpalVite"),K=[$e].concat(H);return function(Y,te){var F=z(Y,"Concerns"),x=[F].concat(te);return function(P,B){var U=z(P,"V1"),N=[U].concat(B);return function(T,g){var w=z(T,"Storable"),j=[w].concat(g),E=e.$r(j);return D(w,"$storage_get",function(o){var d=R;if(d=localStorage.getItem(o),!q(d))return R;try{return JSON.parse(d)}catch(k){if(e.rescue(k,[E("StandardError")]))try{return R}finally{e.pop_exception(k)}else throw k}}),D(w,"$storage_set",function(o,d){var k=R;return k=JSON.stringify(d.$to_n()),localStorage.setItem(o,k)}),D(w,"$storage_remove",function(o){return localStorage.removeItem(o)})}(N[0],N)}(x[0],x)}(K[0],K)}(ee[0],ee),A(ee[0],"Storable",Z(Z(Z(W("OpalVite"),"Concerns"),"V1"),"Storable"))};Opal.modules["controllers/pwa_controller"]=function(e){var z=e.klass,q=e.const_set,D=e.send2,A=e.find_super,ee=e.def,W=e.truthy,R=e.send,Z=e.rb_plus,p=e.top,H=[],$e=e.$r(H),K=e.nil;return e.add_stubs("require,include,targets=,puts,setup_install_listeners,check_install_status,check_service_worker,load_notes,update_cache_count,js_prop,js_call_on,js_get,js_then,console_log,js_set_prop,has_target?,hide_target,prevent_default,target_value,js_timestamp,js_iso_date,unshift,save_notes,render_notes,target_set_value,event_data_int,reject!,==,[],js_global,update_last_update_time,js_map,private,js_define_method,set_target_style,target_set_text,set_install_status_class,on_window_event,js_call,get_target,js_set,set_sw_status_class,on_element_event,storage_get_json,js_each,<<,each,storage_set_json,empty?,target_set_html,join,map,to_s,+,js_length"),p.$require("opal_stimulus/stimulus_controller"),function(Y,te,F){var x=z(Y,te,"PwaController"),P=[x].concat(F),B=e.$r(P),U=x.$$prototype;return U.notes=K,x.$include(B("StimulusHelpers")),x["$targets="](["installPrompt","swStatus","installStatus","lastUpdate","noteInput","notesList","cacheCount"]),q(P[0],"NOTES_KEY","pwa-notes"),ee(x,"$initialize",function N(){var T=N.$$p||K,g=this;return N.$$p=null,D(g,A(g,"initialize",N,!1,!0),"initialize",[],T),g.notes=[]}),ee(x,"$connect",function(){var T=this;return T.$puts("PwaController connected!"),T.$setup_install_listeners(),T.$check_install_status(),T.$check_service_worker(),T.$load_notes(),T.$update_cache_count()}),ee(x,"$install",function(){var T=this,g=K,w=K;return g=T.$js_prop("deferredPrompt"),W(g)?(T.$js_call_on(g,"prompt"),w=T.$js_get(g,"userChoice"),R(T,"js_then",[w],function j(E){var v=j.$$s==null?this:j.$$s,o=K;return E==null&&(E=K),o=v.$js_get(E,"outcome"),W(o==="accepted")?v.$console_log("User accepted the install prompt"):v.$console_log("User dismissed the install prompt")},{$$s:T}),T.$js_set_prop("deferredPrompt",K),W(T["$has_target?"]("installPrompt"))?T.$hide_target("installPrompt"):K):(alert("Installation prompt not available. Try using browser menu to install."),K)}),ee(x,"$dismiss_install_prompt",function(){var T=this;return W(T["$has_target?"]("installPrompt"))?T.$hide_target("installPrompt"):K}),ee(x,"$add_note",function(T){var g=this,w=K,j=K;return T.$prevent_default(),!W(g["$has_target?"]("noteInput"))||(w=g.$target_value("noteInput"),w=w.trim(),W(w===""))?K:(j=new Map([["id",g.$js_timestamp()],["text",w],["createdAt",g.$js_iso_date()],["synced",navigator.onLine]]),g.notes.$unshift(j),g.$save_notes(),g.$render_notes(),g.$target_set_value("noteInput",""))}),ee(x,"$delete_note",function(T){var g=this,w=K;return w=g.$event_data_int("note-id"),R(g.notes,"reject!",[],function(E){return E==null&&(E=K),E["$[]"]("id")["$=="](w)}),g.$save_notes(),g.$render_notes()}),ee(x,"$update_cache",function(){var T=this,g=K,w=K,j=K;return W("serviceWorker"in g)?(g=T.$js_global("navigator"),w=T.$js_get(g,"serviceWorker"),j=T.$js_call_on(w,"getRegistration"),R(T,"js_then",[j],function E(v){var o=E.$$s==null?this:E.$$s,d=K;return v==null&&(v=K),W(v)?(d=o.$js_call_on(v,"update"),R(o,"js_then",[d],function k(){var h=k.$$s==null?this:k.$$s;return h.$update_last_update_time(),alert("Cache updated! Refresh to see changes.")},{$$s:o})):K},{$$s:T})):K}),ee(x,"$clear_cache",function(){var T=this,g=K,w=K;return W("caches"in window)?(g=T.$js_global("caches"),w=T.$js_call_on(g,"keys"),R(T,"js_then",[w],function j(E){var v=j.$$s==null?this:j.$$s,o=K,d=K;return E==null&&(E=K),o=R(v,"js_map",[E],function k(h){var l=k.$$s==null?this:k.$$s;return h==null&&(h=K),l.$js_call_on(g,"delete",h)},{$$s:v}),d=v.$js_call_on(v.$js_global("Promise"),"all",o),R(v,"js_then",[d],function k(){var h=k.$$s==null?this:k.$$s;return h.$update_cache_count(),alert("Cache cleared! Refresh to rebuild cache.")},{$$s:v})},{$$s:T})):K}),x.$private(),ee(x,"$setup_install_listeners",function(){var T=this;return R(T,"js_define_method",["handleBeforeInstallPrompt"],function g(w){var j=g.$$s==null?this:g.$$s;return w==null&&(w=K),w.preventDefault(),j.$js_set_prop("deferredPrompt",w),W(j["$has_target?"]("installPrompt"))?j.$set_target_style("installPrompt","display","block"):K},{$$s:T}),R(T,"js_define_method",["handleAppInstalled"],function g(){var w=g.$$s==null?this:g.$$s;return W(w["$has_target?"]("installPrompt"))&&w.$hide_target("installPrompt"),W(w["$has_target?"]("installStatus"))?(w.$target_set_text("installStatus","Installed "),w.$set_install_status_class("status-value success")):K},{$$s:T}),R(T,"on_window_event",["beforeinstallprompt"],function g(w){var j=g.$$s==null?this:g.$$s;return w==null&&(w=K),j.$js_call("handleBeforeInstallPrompt",w)},{$$s:T}),R(T,"on_window_event",["appinstalled"],function g(){var w=g.$$s==null?this:g.$$s;return w.$js_call("handleAppInstalled")},{$$s:T})}),ee(x,"$set_install_status_class",function(T){var g=this,w=K;return W(g["$has_target?"]("installStatus"))?(w=g.$get_target("installStatus"),g.$js_set(w,"className",T)):K}),ee(x,"$check_install_status",function(){var T=this,g=K;return g=window.matchMedia("(display-mode: standalone)").matches,W(g)?(T.$target_set_text("installStatus","Installed "),T.$set_install_status_class("status-value success")):(T.$target_set_text("installStatus","Not installed"),T.$set_install_status_class("status-value"))}),ee(x,"$check_service_worker",function(){var T=this,g=K,w=K,j=K;return W(T["$has_target?"]("swStatus"))?W("serviceWorker"in g)?(R(T,"js_define_method",["handleSwUpdate"],function E(){var v=E.$$s==null?this:E.$$s;return v.$update_last_update_time()},{$$s:T}),g=T.$js_global("navigator"),w=T.$js_get(g,"serviceWorker"),j=T.$js_call_on(w,"getRegistration"),R(T,"js_then",[j],function E(v){var o=E.$$s==null?this:E.$$s;return v==null&&(v=K),W(v)?(o.$target_set_text("swStatus","Active "),o.$set_sw_status_class("status-value success"),R(o,"on_element_event",[v,"updatefound"],function d(){var k=d.$$s==null?this:d.$$s,h=K;return h=k.$js_get(v,"installing"),R(k,"on_element_event",[h,"statechange"],function l(){var c=l.$$s==null?this:l.$$s,X=K;return X=c.$js_get(h,"state"),W(X==="activated")?c.$js_call("handleSwUpdate"):K},{$$s:k})},{$$s:o})):(o.$target_set_text("swStatus","Not registered"),o.$set_sw_status_class("status-value warning"))},{$$s:T})):(T.$target_set_text("swStatus","Not supported"),T.$set_sw_status_class("status-value error"),K):K}),ee(x,"$set_sw_status_class",function(T){var g=this,w=K;return W(g["$has_target?"]("swStatus"))?(w=g.$get_target("swStatus"),g.$js_set(w,"className",T)):K}),ee(x,"$load_notes",function(){var T=this,g=K,w=K;if(g=T.$storage_get_json(B("NOTES_KEY")),!W(g))return K;try{return T.notes=[],R(T,"js_each",[g],function j(E){var v=j.$$s==null?this:j.$$s;return v.notes==null&&(v.notes=K),E==null&&(E=K),v.notes["$<<"](new Map([["id",v.$js_get(E,"id")],["text",v.$js_get(E,"text")],["createdAt",v.$js_get(E,"createdAt")],["synced",v.$js_get(E,"synced")]]))},{$$s:T}),T.$render_notes()}catch(j){if(e.rescue(j,[B("StandardError")])){w=j;try{return T.$puts("Error loading notes: "+w)}finally{e.pop_exception(j)}}else throw j}}),ee(x,"$save_notes",function(){var T=this,g=K,w=K;try{return g=[],R(T.notes,"each",[],function(E){E==null&&(E=K),g.push({id:E["$[]"]("id"),text:E["$[]"]("text"),createdAt:E["$[]"]("createdAt"),synced:E["$[]"]("synced")})}),T.$storage_set_json(B("NOTES_KEY"),g)}catch(j){if(e.rescue(j,[B("StandardError")])){w=j;try{return T.$puts("Error saving notes: "+w)}finally{e.pop_exception(j)}}else throw j}}),ee(x,"$render_notes",function(){var T=this,g=K;return W(T["$has_target?"]("notesList"))?W(T.notes["$empty?"]())?(T.$target_set_html("notesList",'<p class="empty-state">No notes yet. Add one above!</p>'),K):(g=R(T.notes,"map",[],function(j){var E=K,v=K;return j==null&&(j=K),E=new Date(j["$[]"]("createdAt")).toLocaleString(),v=W(j["$[]"]("synced"))?"":"",'<div class="note-item"><div class="note-content">'+('<p class="note-text">'+j["$[]"]("text")+"</p>")+('<small class="note-meta">'+v+" "+E+"</small>")+"</div>"+('<button class="btn-delete" data-action="click->pwa#delete_note" data-note-id="'+j["$[]"]("id")+'"></button>')+"</div>"}).$join(),T.$target_set_html("notesList",g)):K}),ee(x,"$update_last_update_time",function(){var T=this;return T.$target_set_text("lastUpdate",new Date().toLocaleTimeString())}),ee(x,"$update_cache_count",function(){var T=this,g=K,w=K;return W(T["$has_target?"]("cacheCount"))?W("caches"in window)?(R(T,"js_define_method",["updateCacheCountValue"],function j(E){var v=j.$$s==null?this:j.$$s;return E==null&&(E=K),v.$target_set_text("cacheCount",E.$to_s())},{$$s:T}),g=T.$js_global("caches"),w=T.$js_call_on(g,"keys"),R(T,"js_then",[w],function j(E){var v=j.$$s==null?this:j.$$s,o=K,d=K;return E==null&&(E=K),v.$js_set_prop("totalEntries",0),o=R(v,"js_map",[E],function k(h){var l=k.$$s==null?this:k.$$s,c=K;return h==null&&(h=K),c=l.$js_call_on(g,"open",h),R(l,"js_then",[c],function X(y){var i=X.$$s==null?this:X.$$s,a=K;return y==null&&(y=K),a=i.$js_call_on(y,"keys"),R(i,"js_then",[a],function $(n){var t=$.$$s==null?this:$.$$s,r=K,s=K;return n==null&&(n=K),r=W(s=t.$js_prop("totalEntries"))?s:0,t.$js_set_prop("totalEntries",Z(r,t.$js_length(n)))},{$$s:i})},{$$s:l})},{$$s:v}),d=v.$js_call_on(v.$js_global("Promise"),"all",o),R(v,"js_then",[d],function k(){var h=k.$$s==null?this:k.$$s;return h.$js_call("updateCacheCountValue",h.$js_prop("totalEntries"))},{$$s:v})},{$$s:T})):(T.$target_set_text("cacheCount","N/A"),K):K})}(H[0],$e("StimulusController"),H)};Opal.modules["controllers/offline_detector_controller"]=function(e){var z=e.klass,q=e.def,D=e.send,A=e.truthy,ee=e.top,W=[],R=e.$r(W),Z=e.nil;return e.add_stubs("require,include,targets=,update_status,setup_event_listeners,private,js_define_method,on_window_event,js_call,has_target?,get_target,js_get,js_set,target_set_text"),ee.$require("opal_stimulus/stimulus_controller"),function(p,H,$e){var K=z(p,H,"OfflineDetectorController"),Y=[K].concat($e),te=e.$r(Y);return K.$include(te("StimulusHelpers")),K["$targets="](["banner","statusText","onlineStatus"]),q(K,"$connect",function(){var x=this;return x.$update_status(),x.$setup_event_listeners()}),K.$private(),q(K,"$setup_event_listeners",function(){var x=this;return D(x,"js_define_method",["handleOnlineStatus"],function P(){var B=P.$$s==null?this:P.$$s;return B.$update_status()},{$$s:x}),D(x,"on_window_event",["online"],function P(){var B=P.$$s==null?this:P.$$s;return B.$js_call("handleOnlineStatus")},{$$s:x}),D(x,"on_window_event",["offline"],function P(){var B=P.$$s==null?this:P.$$s;return B.$js_call("handleOnlineStatus")},{$$s:x})}),q(K,"$update_status",function(){var x=this,P=Z,B=Z,U=Z,N=Z,T=Z,g=Z,w=Z,j=Z;return P=navigator.onLine,B=A(P)?"online":"offline",A(x["$has_target?"]("banner"))&&(U=x.$get_target("banner"),N=x.$js_get(U,"dataset"),x.$js_set(N,"status",B)),T=A(P)?" You are online":" You are offline",x.$target_set_text("statusText",T),g=A(P)?"Online":"Offline",w=A(P)?"status-value success":"status-value warning",x.$target_set_text("onlineStatus",g),A(x["$has_target?"]("onlineStatus"))?(j=x.$get_target("onlineStatus"),x.$js_set(j,"className",w)):Z})}(W[0],R("StimulusController"),W)};Opal.queue(function(e){var z=e.top,q=[],D=e.$r(q);return e.nil,e.add_stubs("require,puts,register_all!"),z.$require("native"),z.$require("opal_stimulus/stimulus_controller"),z.$require("opal_vite/concerns/v1/stimulus_helpers"),z.$require("opal_vite/concerns/v1/js_proxy_ex"),z.$require("opal_vite/concerns/v1/toastable"),z.$require("opal_vite/concerns/v1/dom_helpers"),z.$require("opal_vite/concerns/v1/storable"),z.$require("controllers/pwa_controller"),z.$require("controllers/offline_detector_controller"),z.$puts("PWA Example - Opal + Stimulus"),z.$puts("Ruby version: "+D("RUBY_VERSION")),D("StimulusController")["$register_all!"](),z.$puts("All controllers registered!")});
