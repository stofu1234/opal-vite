Opal.modules.native=function(n){var k=n.hash_put,b=n.module,P=n.defs,I=n.slice,O=n.truthy,V=n.send,C=n.Kernel,Z=n.extract_kwargs,p=n.ensure_kwargs,H=n.hash_get,ie=n.range,L=n.to_a,Y=n.def,te=n.return_ivar,W=n.alias,z=n.klass,y=n.rb_minus,K=n.return_val,B=n.send2,j=n.find_super,R=n.eqeqeq,g=n.rb_ge,q=n.return_self,M=n.gvars,x=n.top,m=[],u=n.$r(m),d=n.nil,A=n.$$$;return n.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(h,_){var l=b(h,"Native"),E=[l].concat(_),G=n.$r(E);return P(l,"$is_a?",function(s,$){var t=this;try{return s instanceof t.$try_convert($)}catch{return!1}}),P(l,"$try_convert",function(s,$){var t=this;return $==null&&($=d),t["$native?"](s)?s:s["$respond_to?"]("to_n")?s.$to_n():$},-2),P(l,"$convert",function(s){var $=this;if($["$native?"](s))return s;if(s["$respond_to?"]("to_n"))return s.$to_n();$.$raise(G("ArgumentError"),""+s.$inspect()+" isn't native")}),P(l,"$call",function c(s,$,t){var e=c.$$p||d,r,i,a=this;c.$$p=null,r=I(arguments,2),i=r;var o=s[$];if(o instanceof Function){for(var v=new Array(i.length),S=0,F=i.length;S<F;S++){var T=i[S],J=a.$try_convert(T);v[S]=J===d?T:J}return e!==d&&v.push(e),a.$Native(o.apply(s,v))}else return a.$Native(o)},-3),P(l,"$proc",function c(){var s=c.$$p||d,$=this;return c.$$p=null,O(s)||$.$raise(G("LocalJumpError"),"no block given"),V(C,"proc",[],function t(e){var r,i,a=t.$$s==null?this:t.$$s,o=d;if(r=I(arguments),i=r,V(i,"map!",[],function S(F){var T=S.$$s==null?this:S.$$s;return F==null&&(F=d),T.$Native(F)},{$$s:a}),o=a.$Native(this),this===n.global)return s.apply(a,i);var v=s.$$s;s.$$s=null;try{return s.apply(o,i)}finally{s.$$s=v}},{$$arity:-1,$$s:$})}),function(c,s){var $=b(c,"Helpers"),t=[$].concat(s),e=n.$r(t);return Y($,"$alias_native",function r(i,a,o){var v,S,F,T;r.$$p;var J=this;return r.$$p=null,v=I(arguments,1),S=Z(v),S=p(S),v.length>0&&(F=v.shift()),F==null&&(F=i),T=H(S,"as"),T==null&&(T=d),O(F["$end_with?"]("="))?V(J,"define_method",[i],function ee(ae){var le=ee.$$s==null?this:ee.$$s;return le.native==null&&(le.native=d),ae==null&&(ae=d),le.native[F["$[]"](ie(0,-2,!1))]=e("Native").$convert(ae),ae},{$$s:J}):O(T)?V(J,"define_method",[i],function ee(ae){var le=ee.$$p||d,ce,de,he=ee.$$s==null?this:ee.$$s,ve=d;return he.native==null&&(he.native=d),ee.$$p=null,ce=I(arguments),de=ce,ve=V(e("Native"),"call",[he.native,F].concat(L(de)),le.$to_proc()),O(ve)?T.$new(ve.$to_n()):d},{$$arity:-1,$$s:J}):V(J,"define_method",[i],function ee(ae){var le=ee.$$p||d,ce,de,he=ee.$$s==null?this:ee.$$s;return he.native==null&&(he.native=d),ee.$$p=null,ce=I(arguments),de=ce,V(e("Native"),"call",[he.native,F].concat(L(de)),le.$to_proc())},{$$arity:-1,$$s:J})},-2),Y($,"$native_reader",function(i){var a,o,v=this;return a=I(arguments),o=a,V(o,"each",[],function S(F){var T=S.$$s==null?this:S.$$s;return F==null&&(F=d),V(T,"define_method",[F],function J(){var ee=J.$$s==null?this:J.$$s;return ee.native==null&&(ee.native=d),ee.$Native(ee.native[F])},{$$s:T})},{$$s:v})},-1),Y($,"$native_writer",function(i){var a,o,v=this;return a=I(arguments),o=a,V(o,"each",[],function S(F){var T=S.$$s==null?this:S.$$s;return F==null&&(F=d),V(T,"define_method",[""+F+"="],function J(ee){var ae=J.$$s==null?this:J.$$s;return ae.native==null&&(ae.native=d),ee==null&&(ee=d),ae.$Native(ae.native[F]=ee)},{$$s:T})},{$$s:v})},-1),Y($,"$native_accessor",function(i){var a,o,v=this;return a=I(arguments),o=a,V(v,"native_reader",L(o)),V(v,"native_writer",L(o))},-1)}(E[0],E),function(c,s){var $=b(c,"Wrapper"),t=[$].concat(s),e=n.$r(t);return Y($,"$initialize",function(i){var a=this;return O(C["$native?"](i))||C.$raise(e("ArgumentError"),""+i.$inspect()+" isn't native"),a.native=i}),Y($,"$to_n",te("native")),P($,"$included",function(i){return i.$extend(e("Helpers"))})}(E[0],E),P(l,"$included",function(s){var $=this;return $.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),s.$include(G("Wrapper"))})}(m[0],m),function(h,_){var l=b(h,"Kernel"),E=[l].concat(_),G=n.$r(E);return Y(l,"$native?",function(s){return s==null||!s.$$class}),Y(l,"$Native",function c(s){c.$$p;var $=this;return c.$$p=null,O(s==null)?d:O($["$native?"](s))?A(G("Native"),"Object").$new(s):O(s["$is_a?"](G("Array")))?V(s,"map",[],function t(e){var r=t.$$s==null?this:t.$$s;return e==null&&(e=d),r.$Native(e)},{$$s:$}):O(s["$is_a?"](G("Proc")))?V($,"proc",[],function t(e){var r=t.$$p||d,i,a,o=t.$$s==null?this:t.$$s;return t.$$p=null,i=I(arguments),a=i,o.$Native(V(s,"call",L(a),r.$to_proc()))},{$$arity:-1,$$s:$}):s}),W(l,"_Array","Array"),Y(l,"$Array",function c(s,$){var t=c.$$p||d,e,r,i=this;return c.$$p=null,e=I(arguments,1),r=e,O(i["$native?"](s))?V(A(G("Native"),"Array"),"new",[s].concat(L(r)),t.$to_proc()).$to_a():i.$_Array(s)},-2)}(m[0],m),function(h,_){var l=z(h,_,"Object"),E=l.$$prototype;return E.native=d,l.$include(A(A("Native"),"Wrapper")),Y(l,"$==",function(c){var s=this;return s.native===A("Native").$try_convert(c)}),Y(l,"$has_key?",function(c){var s=this;return n.hasOwnProperty.call(s.native,c)}),Y(l,"$each",function G(c){var s,$,t=G.$$p||d,e=this;if(G.$$p=null,s=I(arguments),$=s,t!==d){for(var r in e.native)n.yieldX(t,[r,e.native[r]]);return e}else return V(e,"method_missing",["each"].concat(L($)))},-1),Y(l,"$[]",function(c){var s=this,$=s.native[c];return $ instanceof Function?$:A("Native").$call(s.native,c)}),Y(l,"$[]=",function(c,s){var $=this,t=d;return t=A("Native").$try_convert(s),O(t===d)?$.native[c]=s:$.native[c]=t}),Y(l,"$merge!",function(c){var s=this;c=A("Native").$convert(c);for(var $ in c)s.native[$]=c[$];return s}),Y(l,"$respond_to?",function(c,s){var $=this;return s==null&&(s=!1),C.$instance_method("respond_to?").$bind($).$call(c,s)},-2),Y(l,"$respond_to_missing?",function(c,s){var $=this;return n.hasOwnProperty.call($.native,c)},-2),Y(l,"$method_missing",function G(c,s){var $=G.$$p||d,t,e,r,i=this;return G.$$p=null,t=I(arguments,1),e=t,c.charAt(c.length-1)==="="?(r=[c.$slice(0,y(c.$length(),1)),e["$[]"](0)],V(i,"[]=",r),r[r.length-1]):V(A("Native"),"call",[i.native,c].concat(L(e)),$.$to_proc())},-2),Y(l,"$nil?",K(!1)),Y(l,"$is_a?",function(c){var s=this;return n.is_a(s,c)}),Y(l,"$instance_of?",function(c){var s=this;return s.$$class===c}),Y(l,"$class",function(){var c=this;return c.$$class}),Y(l,"$to_a",function G(c){var s=G.$$p||d,$=this;return G.$$p=null,c==null&&(c=new Map),V(A(A("Native"),"Array"),"new",[$.native,c],s.$to_proc()).$to_a()},-1),Y(l,"$inspect",function(){var c=this;return"#<Native:"+String(c.native)+">"}),W(l,"include?","has_key?"),W(l,"key?","has_key?"),W(l,"kind_of?","is_a?"),W(l,"member?","has_key?")}(u("Native"),u("BasicObject")),function(h,_,l){var E=z(h,_,"Array"),G=[E].concat(l),c=n.$r(G),s=E.$$prototype;return s.named=s.native=s.get=s.block=s.set=s.length=d,E.$include(A(c("Native"),"Wrapper")),E.$include(c("Enumerable")),Y(E,"$initialize",function $(t,e){var r=$.$$p||d,i=this,a=d;return $.$$p=null,e==null&&(e=new Map),B(i,j(i,"initialize",$,!1,!0),"initialize",[t],null),i.get=O(a=e["$[]"]("get"))?a:e["$[]"]("access"),i.named=e["$[]"]("named"),i.set=O(a=e["$[]"]("set"))?a:e["$[]"]("access"),i.length=O(a=e["$[]"]("length"))?a:"length",i.block=r,O(i.$length()==null)?i.$raise(c("ArgumentError"),"no length found on the array-like object"):d},-2),Y(E,"$each",function $(){var t=$.$$p||d,e=this;if($.$$p=null,!O(t))return e.$enum_for("each");for(var r=0,i=e.$length();r<i;r++)n.yield1(t,e["$[]"](r));return e}),Y(E,"$[]",function(t){var e=this,r=d,i=d;return r=R(c("String"),i=t)||R(c("Symbol"),i)?O(e.named)?e.native[e.named](t):e.native[t]:R(c("Integer"),i)?O(e.get)?e.native[e.get](t):e.native[t]:d,O(r)?O(e.block)?e.block.$call(r):e.$Native(r):d}),Y(E,"$[]=",function(t,e){var r=this;return O(r.set)?r.native[r.set](t,c("Native").$convert(e)):r.native[t]=c("Native").$convert(e)}),Y(E,"$last",function(t){var e=this,r=d,i=d;if(t==null&&(t=d),O(t)){for(r=y(e.$length(),1),i=[];O(g(r,0));)i["$<<"](e["$[]"](r)),r=y(r,1);return i}else return e["$[]"](y(e.$length(),1))},-1),Y(E,"$length",function(){var t=this;return t.native[t.length]}),Y(E,"$inspect",function(){var t=this;return t.$to_a().$inspect()}),W(E,"to_ary","to_a")}(u("Native"),null,m),function(h,_){var l=z(h,_,"Numeric");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(m[0],null),function(h,_){var l=z(h,_,"Proc");return Y(l,"$to_n",q)}(m[0],null),function(h,_){var l=z(h,_,"String");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(m[0],null),function(h,_){var l=z(h,_,"Regexp");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(m[0],null),function(h,_){var l=z(h,_,"MatchData");return Y(l,"$to_n",te("matches"))}(m[0],null),function(h,_,l){var E=z(h,_,"Struct"),G=[E].concat(l),c=n.$r(G);return Y(E,"$to_n",function(){var $=this,t=d;return t={},V($,"each_pair",[],function(r,i){return r==null&&(r=d),i==null&&(i=d),t[r]=c("Native").$try_convert(i,i)}),t})}(m[0],null,m),function(h,_,l){var E=z(h,_,"Array"),G=[E].concat(l),c=n.$r(G);return Y(E,"$to_n",function(){for(var $=this,t=[],e=0,r=$.length;e<r;e++){var i=$[e];t.push(c("Native").$try_convert(i,i))}return t})}(m[0],null,m),function(h,_){var l=z(h,_,"Boolean");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(m[0],null),function(h,_){var l=z(h,_,"Time");return Y(l,"$to_n",q)}(m[0],null),function(h,_){var l=z(h,_,"NilClass");return Y(l,"$to_n",function(){return null})}(m[0],null),O(u("Hash")["$method_defined?"]("_initialize"))||function(h,_,l){var E=z(h,_,"Hash"),G=[E].concat(l),c=n.$r(G);W(E,"_initialize","initialize");function s($,t,e){e&&(e.constructor===void 0||e.constructor===Object||e instanceof Map)?k($,t,c("Hash").$new(e)):e&&e.$$is_array?(e=e.map(function(r){return r&&(r.constructor===void 0||r.constructor===Object||e instanceof Map)?c("Hash").$new(r):E.$Native(r)}),k($,t,e)):k($,t,E.$Native(e))}return Y(E,"$initialize",function $(t){var e=$.$$p||d,r=this;if($.$$p=null,t!=null)if(t.constructor===void 0||t.constructor===Object){var i,a;for(i in t)a=t[i],s(r,i,a);return r}else t instanceof Map&&n.hash_each(t,!1,function(o,v){return s(r,o,v),[!1,!1]});return V(r,"_initialize",[t],e.$to_proc())},-1),Y(E,"$to_n",function(){var t=this,e={};return n.hash_each(t,!1,function(r,i){return e[c("Native").$try_convert(r,r)]=c("Native").$try_convert(i,i),[!1,!1]}),e})}(m[0],null,m),function(h,_){var l=z(h,_,"Module");return Y(l,"$native_module",function(){var G=this;return n.global[G.$name()]=G})}(m[0],null),function(h,_,l){var E=z(h,_,"Class"),G=[E].concat(l),c=n.$r(G);return Y(E,"$native_alias",function($,t){var e=this,r=e.prototype[n.jsid(t)];r||e.$raise(c("NameError").$new("undefined method `"+t+"' for class `"+e.$inspect()+"'",t)),e.prototype[$]=r}),Y(E,"$native_class",function(){var $=this;return $.$native_module(),$.new=$.$new})}(m[0],null,m),M.$=M.global=x.$Native(n.global)};(function(n){var k;if(typeof globalThis<"u"?n=globalThis:typeof global<"u"?n=global:typeof window<"u"&&(n=window),n.console==null&&(n.console={}),typeof n.console=="object"?k=n.console:k={},"log"in k||(k.log=function(){}),"warn"in k||(k.warn=k.log),typeof n.Opal<"u")return k.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),n.Opal;var b,P,I,O,V,C,Z,p=n.Opal={};p.global=n,p.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var H=Function.prototype.call,ie=Function.prototype.bind,L=Object.hasOwn||H.bind(Object.prototype.hasOwnProperty),Y=Object.setPrototypeOf,te=H.bind(Array.prototype.slice),W=H.bind(Array.prototype.splice),z=4,y=z;function K(){return y+=2,y}p.uid=K,p.id=function(f){return f.$$is_number?f*2+1:(f.$$id==null&&g(f,"$$id",K()),f.$$id)};var B=p.gvars={};p.exit=function(f){B.DEBUG&&k.log("Exited with status "+f)},p.exceptions=[],p.pop_exception=function(f){var w=p.exceptions.pop();w===f||(w?B["!"]=w:B["!"]=b)};function j(f,w){if(f||(f=p.Exception||Error),Z&&Z.$raise)arguments.length>2?Z.$raise(f.$new.apply(f,te(arguments,1))):Z.$raise(f,w);else throw f.$new?f.$new(w):new f(w)}var R={value:void 0,enumerable:!1,configurable:!0,writable:!0};function g(f,w,U){typeof f=="string"?f[w]=U:(R.value=U,Object.defineProperty(f,w,R))}p.prop=g,p.defineProperty=p.prop,p.slice=te;var q=p.truthy=function(f){return f!==!1&&b!==f&&f!==void 0&&f!==null&&(!(f instanceof Boolean)||f.valueOf()===!0)};p.falsy=function(f){return!q(f)},p.type_error=function(f,w,U,re){f=f.$$class,re&&U?(re=re.$$class,j(p.TypeError,"can't convert "+f+" into "+w+" ("+f+"#"+U+" gives "+re+")")):j(p.TypeError,"no implicit conversion of "+f+" into "+w)},p.coerce_to=function(f,w,U,re){var ue;return U==="to_int"&&w===p.Integer&&f.$$is_number?f<0?Math.ceil(f):Math.floor(f):U==="to_str"&&w===p.String&&f.$$is_string||p.is_a(f,w)?f:f["$respond_to?"].$$pristine&&f.$method_missing.$$pristine?(ue=f[de(U)],(ue==null||ue.$$stub)&&p.type_error(f,w),ue.apply(f,re)):(f["$respond_to?"](U)||p.type_error(f,w),re==null&&(re=[]),p.send(f,U,re))},p.respond_to=function(f,w,U){if(f==null||!f.$$class)return!1;U=!!U;var re=f[w];if(f["$respond_to?"].$$pristine){if(typeof re=="function"&&!re.$$stub)return!0;if(!f["$respond_to_missing?"].$$pristine)return p.send(f,f["$respond_to_missing?"],[w.substr(1),U])}else return p.send(f,f["$respond_to?"],[w.substr(1),U])},p.trace_class=!1,p.tracers_for_class=[];function M(f){var w,U,re;for(w=0,U=p.tracers_for_class.length;w<U;w++)re=p.tracers_for_class[w],re.trace_object=f,re.block.$call(re)}function x(f,w){if(f.$$autoload[w].loaded){if(f.$$autoload[w].loaded&&!f.$$autoload[w].required&&f.$$autoload[w].exception)throw f.$$autoload[w].exception}else{f.$$autoload[w].loaded=!0;try{p.Kernel.$require(f.$$autoload[w].path)}catch(U){throw f.$$autoload[w].exception=U,U}if(f.$$autoload[w].required=!0,f.$$const[w]!=null)return f.$$autoload[w].success=!0,f.$$const[w]}}function m(f,w){if(f){if(f.$$const[w]!=null)return f.$$const[w];if(f.$$autoload&&f.$$autoload[w])return x(f,w)}}function u(f,w){var U,re,ue;if(f.length!==0)for(U=0,re=f.length;U<re;U++){if(ue=f[U].$$const[w],ue!=null)return ue;if(f[U].$$autoload&&f[U].$$autoload[w])return x(f[U],w)}}function d(f,w){var U,re,ue;if(f!=null)for(ue=J(f),U=0,re=ue.length;U<re;U++){if(ue[U].$$const&&L(ue[U].$$const,w))return ue[U].$$const[w];if(ue[U].$$autoload&&ue[U].$$autoload[w])return x(ue[U],w)}}function A(f,w){if(f==null||f.$$is_module)return d(I,w)}function h(f,w){return(f||I).$const_missing(w)}p.const_get_local=function(f,w,U){var re;if(f!=null)return f==="::"&&(f=I),!f.$$is_module&&!f.$$is_class&&j(p.TypeError,f.toString()+" is not a class/module"),re=m(f,w),re!=null||U?re:h(f,w)},p.const_get_qualified=function(f,w,U){var re,ue,_e,ge=p.const_cache_version;if(w==null)return re=m(I,f),re??p.const_get_qualified(I,f,U);if(f!=null)return f==="::"&&(f=I),!f.$$is_module&&!f.$$is_class&&j(p.TypeError,f.toString()+" is not a class/module"),(ue=f.$$const_cache)==null&&(g(f,"$$const_cache",Object.create(null)),ue=f.$$const_cache),_e=ue[w],_e==null||_e[0]!==ge?((re=m(f,w))!=null||(re=d(f,w))!=null,ue[w]=[ge,re]):re=_e[1],re!=null||U?re:h(f,w)},p.const_cache_version=1,p.const_get_relative=function(f,w,U){var re=f[0],ue,_e=p.const_cache_version,ge,pe;return(ge=f.$$const_cache)==null&&(g(f,"$$const_cache",Object.create(null)),ge=f.$$const_cache),pe=ge[w],pe==null||pe[0]!==_e?((ue=m(re,w))!=null||(ue=u(f,w))!=null||(ue=d(re,w))!=null||(ue=A(re,w))!=null,ge[w]=[_e,ue]):ue=pe[1],ue!=null||U?ue:h(re,w)};function _(f,w,U){var re=!0;return(f==null||f==="::")&&(f=I),U.$$is_a_module&&((U.$$name==null||U.$$name===b)&&(U.$$name=w),U.$$base_module==null&&(U.$$base_module=f)),f.$$const=f.$$const||Object.create(null),(w in f.$$const||"$$autoload"in f&&w in f.$$autoload)&&(re=!1),f.$$const[w]=U,f.$$=f.$$const,p.const_cache_version++,f===I&&(p[w]=U),g(f,w,U),re&&f.$const_added&&!f.$const_added.$$pristine&&f.$const_added(w),U}p.const_set=_,p.constants=function(f,w){w==null&&(w=!0);var U,re=[f],ue,_e,ge={},pe;for(w&&(re=re.concat(J(f))),w&&f.$$is_module&&(re=re.concat([p.Object]).concat(J(p.Object))),ue=0,_e=re.length;ue<_e&&(U=re[ue],!(f!==I&&U==I));ue++){for(pe in U.$$const)ge[pe]=!0;if(U.$$autoload)for(pe in U.$$autoload)ge[pe]=!0}return Object.keys(ge)},p.const_remove=function(f,w){if(p.const_cache_version++,f.$$const[w]!=null){var U=f.$$const[w];return delete f.$$const[w],U}if(f.$$autoload&&f.$$autoload[w])return delete f.$$autoload[w],b;j(p.NameError,"constant "+f+"::"+f.$name()+" not defined")},p.const_get_relative_factory=function(f){return function(w,U){return p.$$(f,w,U)}},p.$$=p.const_get_relative,p.$$$=p.const_get_qualified,p.$r=p.const_get_relative_factory;function l(f){return f==null?!1:f.$$bridge?f:f.$$super?l(f.$$super):!1}function E(f,w,U){var re,ue;if((ue=l(w))?re=function(){var ye=new(ie.apply(ue.$$constructor,he(null,arguments)));return Y(ye,re.$$prototype),ye}:re=function(){},f&&f!==b&&g(re,"displayName","::"+f),g(re,"$$name",f),g(re,"$$constructor",re),g(re,"$$prototype",re.prototype),g(re,"$$const",{}),g(re,"$$is_class",!0),g(re,"$$is_a_module",!0),g(re,"$$super",w),g(re,"$$cvars",{}),g(re,"$$own_included_modules",[]),g(re,"$$own_prepended_modules",[]),g(re,"$$ancestors",[]),g(re,"$$ancestors_cache_version",null),g(re,"$$subclasses",[]),g(re,"$$cloned_from",[]),g(re.$$prototype,"$$class",re),p.Class&&Y(re,p.Class.prototype),w!=null){if(Y(re.$$prototype,w.$$prototype),U!==!0)if(typeof WeakRef<"u"){var _e,ge,pe=[];for(_e=0;_e<w.$$subclasses.length;_e++)ge=w.$$subclasses[_e],ge.deref()!==void 0&&pe.push(ge);pe.push(new WeakRef(re)),w.$$subclasses=pe}else w.$$subclasses.push(re);w.$$meta&&p.build_class_singleton_class(re)}return re}p.allocate_class=E;function G(f,w){var U=m(f,w);if(U)return U.$$is_class||j(p.TypeError,w+" is not a class"),U}function c(f,w){f.$$super!==w&&j(p.TypeError,"superclass mismatch for class "+f.$$name)}p.klass=function(f,w,U){var re;f==null||f=="::"?f=I:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),w!=null&&(!w.hasOwnProperty||w.hasOwnProperty&&!w.hasOwnProperty("$$is_class"))&&(w.constructor&&w.constructor.name=="Function"?(re=w,w=I):j(p.TypeError,"superclass must be a Class ("+(w.constructor&&(w.constructor.name||w.constructor.$$name)||typeof w)+" given)"));var ue=G(f,U);return ue!=null?w&&c(ue,w):(w==null&&(w=I),ue=E(U,w),_(f,U,ue),w.$inherited&&w.$inherited(ue),re&&p.bridge(re,ue)),p.trace_class&&M(ue),ue};function s(f){var w=function(){},U=w;return f&&g(w,"displayName",f+".constructor"),g(U,"$$name",f),g(U,"$$prototype",w.prototype),g(U,"$$const",{}),g(U,"$$is_module",!0),g(U,"$$is_a_module",!0),g(U,"$$cvars",{}),g(U,"$$iclasses",[]),g(U,"$$own_included_modules",[]),g(U,"$$own_prepended_modules",[]),g(U,"$$ancestors",[U]),g(U,"$$ancestors_cache_version",null),g(U,"$$cloned_from",[]),Y(U,p.Module.prototype),U}p.allocate_module=s;function $(f,w){var U=m(f,w);return U==null&&f===I&&(U=d(I,w)),U&&!U.$$is_module&&U!==I&&j(p.TypeError,w+" is not a module"),U}p.module=function(f,w){var U;return f==null||f=="::"?f=I:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),U=$(f,w),U==null&&(U=s(w),_(f,w,U)),p.trace_class&&M(U),U},p.get_singleton_class=function(f){return f.$$is_number&&j(p.TypeError,"can't define singleton"),f.$$meta?f.$$meta:f.hasOwnProperty("$$is_class")?p.build_class_singleton_class(f):f.hasOwnProperty("$$is_module")?p.build_module_singleton_class(f):p.build_object_singleton_class(f)};function t(f,w){f.hasOwnProperty("$$meta")?f.$$meta=w:g(f,"$$meta",w),f.$$frozen?f.$$meta.$freeze():Y(f,w.$$prototype)}p.build_class_singleton_class=function(f){if(f.$$meta)return f.$$meta;var w=f===P?V:p.get_singleton_class(f.$$super),U=E(null,w,!0);return g(U,"$$is_singleton",!0),g(U,"$$singleton_of",f),t(f,U),g(f,"$$class",p.Class),U},p.build_module_singleton_class=function(f){if(f.$$meta)return f.$$meta;var w=E(null,p.Module,!0);return g(w,"$$is_singleton",!0),g(w,"$$singleton_of",f),t(f,w),g(f,"$$class",p.Module),w},p.build_object_singleton_class=function(f){var w=f.$$class,U=E(b,w,!0);return g(U,"$$is_singleton",!0),g(U,"$$singleton_of",f),delete U.$$prototype.$$class,t(f,U),U},p.is_method=function(f){return f[0]==="$"&&f[1]!=="$"},p.instance_methods=function(f){for(var w=Object.create(null),U=[],re=J(f),ue=0,_e=re.length;ue<_e;ue++){var ge=re[ue],pe=ge.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ze=ye.length;we<ze;we++){var Ee=ye[we];if(!w[Ee]){if(p.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);U.push(qe)}}w[Ee]=!0}}}return U},p.own_instance_methods=function(f){var w=[],U=f.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);for(var re=Object.getOwnPropertyNames(U),ue=0,_e=re.length;ue<_e;ue++){var ge=re[ue];if(p.is_method(ge)){var pe=U[ge];if(!pe.$$stub){var ye=ge.slice(1);w.push(ye)}}}return w},p.methods=function(f){return p.instance_methods(f.$$meta||f.$$class)},p.own_methods=function(f){return f.$$meta?p.own_instance_methods(f.$$meta):[]},p.receiver_methods=function(f){var w=p.get_singleton_class(f),U=p.own_instance_methods(w),re=p.own_instance_methods(w.$$super);return U.concat(re)},p.class_variables=function(f){var w=J(f),U,re=w.length,ue={};for(U=re-1;U>=0;U--){var _e=w[U];for(var ge in _e.$$cvars)ue[ge]=_e.$$cvars[ge]}return ue},p.class_variable_set=function(f,w,U){var re=J(f),ue,_e=re.length;for(ue=_e-2;ue>=0;ue--){var ge=re[ue];if(L(ge.$$cvars,w))return ge.$$cvars[w]=U,U}return f.$$cvars[w]=U,U},p.class_variable_get=function(f,w,U){if(L(f.$$cvars,w))return f.$$cvars[w];var re=J(f),ue,_e=re.length;for(ue=0;ue<_e;ue++){var ge=re[ue];if(L(ge.$$cvars,w))return ge.$$cvars[w]}return U||j(p.NameError,"uninitialized class variable "+w+" in "+f.$name()),b};function e(f){return f.hasOwnProperty("$$iclass")&&f.hasOwnProperty("$$root")}function r(f){for(var w=[],U,re=Object.getPrototypeOf(f.$$prototype);re&&!re.hasOwnProperty("$$class");)U=F(re),U&&w.push(U),re=Object.getPrototypeOf(re);return w}function i(f){var w=[],U,re=Object.getPrototypeOf(f.$$prototype);if(f.$$prototype.hasOwnProperty("$$dummy"))for(;re&&re!==f.$$prototype.$$define_methods_on;)U=F(re),U&&w.push(U),re=Object.getPrototypeOf(re);return w}p.append_features=function(f,w){var U=J(f),re=[];U.indexOf(w)!==-1&&j(p.ArgumentError,"cyclic include detected");for(var ue=0,_e=U.length;ue<_e;ue++){var ge=U[ue],pe=o(ge);g(pe,"$$included",!0),re.push(pe)}var ye=J(w),we=S(re),ze,Ee;if(ye.indexOf(f)===-1)ze=w.$$prototype,Ee=Object.getPrototypeOf(w.$$prototype);else{for(var xe=w.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===f&&e(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var ke=Object.getPrototypeOf(qe);ke.hasOwnProperty("$$iclass")&&!e(ke);)ke=Object.getPrototypeOf(ke);ze=xe,Ee=ke}else ze=w.$$prototype,Ee=Object.getPrototypeOf(w.$$prototype)}Y(ze,we.first),Y(we.last,Ee),w.$$own_included_modules=r(w),p.const_cache_version++},p.prepend_features=function(f,w){var U=J(f),re=[];U.indexOf(w)!==-1&&j(p.ArgumentError,"cyclic prepend detected");for(var ue=0,_e=U.length;ue<_e;ue++){var ge=U[ue],pe=o(ge);g(pe,"$$prepended",!0),re.push(pe)}var ye=S(re),we=w.$$prototype,ze=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=v(w),a(w),g(we,"$$dummy",!0),g(we,"$$define_methods_on",Ee),Y(we,Ee),Y(Ee,ze));var ke=J(w);if(ke.indexOf(f)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else j(p.RuntimeError,"Prepending a module multiple times is not supported");Y(xe,ye.first),Y(ye.last,qe),w.$$own_prepended_modules=i(w),p.const_cache_version++};function a(f){for(var w=f.$$prototype,U=Object.getOwnPropertyNames(w),re=0;re<U.length;re++){var ue=U[re];p.is_method(ue)&&delete w[ue]}}function o(f){var w=v(f);return f.$$is_module&&f.$$iclasses.push(w),w}function v(f){var w={},U=f.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);var re=Object.getOwnPropertyNames(U),ue=re.length,_e;for(_e=0;_e<ue;_e++){var ge=re[_e];g(w,ge,U[ge])}return g(w,"$$iclass",!0),g(w,"$$module",f),w}function S(f){var w=f.length,U=f[0];if(g(U,"$$root",!0),w===1)return{first:U,last:U};for(var re=U,ue=1;ue<w;ue++){var _e=f[ue];Y(re,_e),re=_e}return{first:f[0],last:f[w-1]}}p.bridge=function(f,w){f.hasOwnProperty("$$bridge")&&j(p.ArgumentError,"already bridged"),g(f,"$$bridge",w),Y(f.prototype,(w.$$super||p.Object).$$prototype),g(w,"$$prototype",f.prototype),g(w.$$prototype,"$$class",w),g(w,"$$constructor",f),g(w,"$$bridge",!0)};function F(f){if(!f.hasOwnProperty("$$dummy")){if(f.hasOwnProperty("$$iclass"))return f.$$module;if(f.hasOwnProperty("$$class"))return f.$$class}}function T(f){return f.$$own_prepended_modules.concat([f]).concat(f.$$own_included_modules)}function J(f){if(!f)return[];if(f.$$ancestors_cache_version===p.const_cache_version)return f.$$ancestors;var w=[],U,re,ue;for(U=0,re=T(f),ue=re.length;U<ue;U++)w.push(re[U]);if(f.$$super)for(U=0,re=J(f.$$super),ue=re.length;U<ue;U++)w.push(re[U]);return f.$$ancestors_cache_version=p.const_cache_version,f.$$ancestors=w,w}p.ancestors=J,p.included_modules=function(f){for(var w=[],U=null,re=Object.getPrototypeOf(f.$$prototype);re&&Object.getPrototypeOf(re);re=Object.getPrototypeOf(re))U=F(re),U&&U.$$is_module&&re.$$iclass&&re.$$included&&w.push(U);return w},p.add_stubs=function(f){var w=p.BasicObject.$$prototype,U,re;f=f.split(",");for(var ue=0,_e=f.length;ue<_e;ue++)U=de(f[ue]),re=w[U],(re==null||re.$$stub)&&p.add_stub_for(w,U)},p.add_stub_for=function(f,w){g(f,w,p.stub_for(w))},p.stub_for=function(f){function w(){return this.$method_missing.$$p=w.$$p,w.$$p=null,this.$method_missing.apply(this,he(f.slice(1),arguments))}return w.$$stub=!0,w},p.ac=function(f,w,U,re){var ue="";U.$$is_a_module?ue+=U.$$name+".":ue+=U.$$class.$$name+"#",ue+=re,j(p.ArgumentError,"["+ue+"] wrong number of arguments (given "+f+", expected "+w+")")},p.block_ac=function(f,w,U){var re="`block in "+U+"'";j(p.ArgumentError,re+": wrong number of arguments (given "+f+", expected "+w+")")};function ee(f){return f.hasOwnProperty("$$meta")&&f.$$meta!==null?J(f.$$meta):J(f.$$class)}p.find_super=function(f,w,U,re,ue){var _e=de(w),ge,pe,ye,we,ze=-1,Ee;for(ge=ee(f),we=U.$$owner,Ee=0;Ee<ge.length;Ee++)if(pe=ge[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ze=Ee;break}for(Ee=ze+1;Ee<ge.length;Ee++){pe=ge[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(_e)){ye=xe[_e];break}}return!re&&ye&&ye.$$stub&&f.$method_missing.$$pristine&&j(p.NoMethodError,"super: no superclass method `"+w+"' for "+f,w),ye.$$stub&&!ue?null:ye},p.find_block_super=function(f,w,U,re,ue){var _e=w;return U||j(p.RuntimeError,"super called outside of method"),ue&&U.$$define_meth&&j(p.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),U.$$def&&(_e=U.$$jsid),p.find_super(f,_e,U,re)},p.find_super_dispatcher=p.find_super,p.find_iter_super_dispatcher=p.find_block_super;function ae(f,w,U){try{f(w)}catch(re){if(re===U)return U.$v;throw re}}p.yield1=function(f,w){typeof f!="function"&&j(p.LocalJumpError,"no block given");var U=f.$$has_top_level_mlhs_arg,re=f.$$has_trailing_comma_in_args,ue=f.$$is_lambda&&f.$$ret;return(f.length>1||(U||re)&&f.length===1)&&(w=p.to_ary(w)),(f.length>1||re&&f.length===1)&&w.$$is_array?ue?ae(f.apply.bind(f,null),w,f.$$ret):f.apply(null,w):ue?ae(f,w,f.$$ret):f(w)},p.yieldX=function(f,w){return typeof f!="function"&&j(p.LocalJumpError,"no block given"),f.length>1&&w.length===1&&w[0].$$is_array&&(w=w[0]),f.$$is_lambda&&f.$$ret?ae(f.apply.bind(f,null),w,f.$$ret):f.apply(null,w)},p.rescue=function(f,w){for(var U=0;U<w.length;U++){var re=w[U];if(re.$$is_array){var ue=p.rescue(f,re);if(ue)return ue}else if(re===p.JS.Error||re["$==="](f))return re}return null},p.is_a=function(f,w){if(w!=null&&f.$$meta===w||f.$$class===w)return!0;if(f.$$is_number&&w.$$is_number_class)return w.$$is_integer_class?f%1===0:!0;var U=J(f.$$is_class?p.get_singleton_class(f):f.$$meta||f.$$class);return U.indexOf(w)!==-1},p.to_hash=function(f){if(f.$$is_hash)return f;if(f["$respond_to?"]("to_hash",!0)){var w=f.$to_hash();if(w.$$is_hash)return w;j(p.TypeError,"Can't convert "+f.$$class+" to Hash ("+f.$$class+"#to_hash gives "+w.$$class+")")}else j(p.TypeError,"no implicit conversion of "+f.$$class+" into Hash")},p.to_ary=function(f){if(f.$$is_array)return f;if(f["$respond_to?"]("to_ary",!0)){var w=f.$to_ary();if(w===b)return[f];if(w.$$is_array)return w;j(p.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_ary gives "+w.$$class+")")}else return[f]},p.to_a=function(f){if(f.$$is_array)return f.slice();if(f["$respond_to?"]("to_a",!0)){var w=f.$to_a();if(w===b)return[f];if(w.$$is_array)return w;j(p.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_a gives "+w.$$class+")")}else return[f]},p.extract_kwargs=function(f){var w=f[f.length-1];if(w!=null&&p.respond_to(w,"$to_hash",!0))return W(f,f.length-1),w},p.kwrestargs=function(f,w){var U=new Map;return p.hash_each(f,!1,function(re,ue){return w[re]||p.hash_put(U,re,ue),[!1,!1]}),U};function le(f,w){typeof w=="number"?f.$$arity=w:typeof w=="object"&&Object.assign(f,w)}var ce=new Map;function de(f){var w=ce.get(f);return w||(w="$"+f,ce.set(f,w)),w}p.jsid=de;function he(f,w){return w.$$is_array||(w=te(w)),[f].concat(w)}p.send=function(f,w,U,re,ue){var _e;return typeof w=="function"?(_e=w,w=null):typeof w=="string"?_e=f[de(w)]:j(p.NameError,"Passed method should be a string or a function"),p.send2(f,_e,w,U,re,ue)},p.send2=function(f,w,U,re,ue,_e){return w==null&&U!=null&&f.$method_missing&&(w=f.$method_missing,re=he(U,re)),le(ue,_e),typeof ue=="function"&&(w.$$p=ue),w.apply(f,re)},p.refined_send=function(f,w,U,re,ue,_e){var ge,pe,ye,we,ze,Ee,xe,qe,ke,Ae;for(we=ee(w),ge=0;ge<we.length;ge++)for(ze=p.id(we[ge]),pe=0;pe<f.length;pe++)for(Ee=f[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ze]>"u")&&(ke=qe[ze],typeof ke.$$prototype[de(U)]<"u")))return Ae=ke.$$prototype[de(U)],p.send2(w,Ae,U,re,ue,_e);return p.send(w,U,re,ue,_e)},p.lambda=function(f,w){return f.$$is_lambda=!0,le(f,w),f},p.def=function(f,w,U,re){return le(U,re),f===p.top?p.defn(p.Object,w,U):!f.$$eval&&f.$$is_a_module?p.defn(f,w,U):p.defs(f,w,U)},p.defn=function(f,w,U){N(f),U.displayName=w,U.$$owner=f;var re=w.substr(1),ue=f.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),g(ue,w,U),f.$$is_module){f.$$module_function&&p.defs(f,w,U);for(var _e=0,ge=f.$$iclasses,pe=ge.length;_e<pe;_e++){var ye=ge[_e];g(ye,w,U)}}var we=f.$$singleton_of;return f.$method_added&&!f.$method_added.$$stub&&!we?f.$method_added(re):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(re),re},p.defs=function(f,w,U,re){return le(U,re),(f.$$is_string||f.$$is_number)&&j(p.TypeError,"can't define singleton"),p.defn(p.get_singleton_class(f),w,U)};function ve(f,w){if(f.$$is_module)for(var U=0,re=f.$$iclasses,ue=re.length;U<ue;U++){var _e=re[U];delete _e[w]}}p.rdef=function(f,w){L(f.$$prototype,w)||j(p.NameError,"method '"+w.substr(1)+"' not defined in "+f.$name()),delete f.$$prototype[w],ve(f,w),f.$$is_singleton?f.$$prototype.$singleton_method_removed&&!f.$$prototype.$singleton_method_removed.$$stub&&f.$$prototype.$singleton_method_removed(w.substr(1)):f.$method_removed&&!f.$method_removed.$$stub&&f.$method_removed(w.substr(1))},p.udef=function(f,w){(!f.$$prototype[w]||f.$$prototype[w].$$stub)&&j(p.NameError,"method '"+w.substr(1)+"' not defined in "+f.$name()),p.add_stub_for(f.$$prototype,w),ve(f,w),f.$$is_singleton?f.$$prototype.$singleton_method_undefined&&!f.$$prototype.$singleton_method_undefined.$$stub&&f.$$prototype.$singleton_method_undefined(w.substr(1)):f.$method_undefined&&!f.$method_undefined.$$stub&&f.$method_undefined(w.substr(1))};function me(f){return typeof f=="function"&&!f.$$stub}p.alias=function(f,w,U){var re=de(w),ue=de(U),_e,ge;if(typeof f.$$prototype>"u"&&(f=p.Object),_e=f.$$prototype[ue],f.$$eval)return p.alias(p.get_singleton_class(f),w,U);if(!me(_e)){for(var pe=f.$$super;typeof _e!="function"&&pe;)_e=pe[ue],pe=pe.$$super;!me(_e)&&f.$$is_module&&(_e=p.Object.$$prototype[ue]),me(_e)||j(p.NameError,"undefined method `"+U+"' for class `"+f.$name()+"'")}return _e.$$alias_of&&(_e=_e.$$alias_of),ge=p.wrap_method_body(_e),ge.displayName=w,ge.$$alias_of=_e,ge.$$alias_name=w,p.defn(f,re,ge),f},p.wrap_method_body=function(f){var w=function(){var U=w.$$p;return w.$$p=null,p.send(this,f,arguments,U)};try{Object.defineProperty(w,"length",{value:f.length})}catch{}return w.$$arity=f.$$arity==null?f.length:f.$$arity,w.$$parameters=f.$$parameters,w.$$source_location=f.$$source_location,w},p.alias_gvar=function(f,w){return Object.defineProperty(B,f,{configurable:!0,enumerable:!0,get:function(){return B[w]},set:function(U){B[w]=U}}),b},p.alias_native=function(f,w,U){var re=de(w),ue=f.$$prototype[U];return(typeof ue!="function"||ue.$$stub)&&j(p.NameError,"undefined native method `"+U+"' for class `"+f.$name()+"'"),p.defn(f,re,ue),f},p.hash_init=function(f){k.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},p.hash_clone=function(f,w){return w.$$none=f.$$none,w.$$proc=f.$$proc,p.hash_each(f,w,function(U,re){return p.hash_put(w,U,re),[!1,w]})},p.hash_put=function(f,w,U){var re=typeof w;if(re==="string"||re==="symbol"||re==="number"||re==="boolean"||re==="bigint")f.set(w,U);else if(w.$$is_string)f.set(w.valueOf(),U);else{f.$$keys||(f.$$keys=new Map);var ue=w.$$is_string?w.valueOf():f.$$by_identity?p.id(w):w.$hash(),_e=f.$$keys;if(!_e.has(ue)){_e.set(ue,[w]),f.set(w,U);return}for(var ge=_e.get(ue),pe,ye=0;ye<ge.length;ye++)if(pe=ge[ye],w===pe||w["$eql?"](pe)){f.set(pe,U);return}ge.push(w),f.set(w,U)}},p.hash_get=function(f,w){var U=typeof w;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return f.get(w);if(f.$$keys){var re=w.$$is_string?w.valueOf():f.$$by_identity?p.id(w):w.$hash(),ue=f.$$keys.get(re),_e;if(ue!==void 0){for(var ge=0;ge<ue.length;ge++)if(_e=ue[ge],w===_e||w["$eql?"](_e))return f.get(_e)}else if(w.$$is_string)return f.get(re)}else if(w.$$is_string)return f.get(w.valueOf())};function be(f,w){var U=f.get(w);if(U!==void 0)return f.delete(w),U}p.hash_delete=function(f,w){var U=typeof w;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return be(f,w);if(f.$$keys){var re=w.$$is_string?w.valueOf():f.$$by_identity?p.id(w):w.$hash(),ue=f.$$keys.get(re),_e;if(ue!==void 0){for(var ge=0;ge<ue.length;ge++)if(_e=ue[ge],w===_e||w["$eql?"](_e))return ue.splice(ge,1),ue.length===0&&f.$$keys.delete(re),be(f,_e)}else if(w.$$is_string)return be(f,re)}else if(w.$$is_string)return be(f,w.valueOf())},p.hash_rehash=function(f){var w=f.$$keys;return w&&w.clear(),p.hash_each(f,!1,function(U,re){var ue=typeof U;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var _e=U.$$is_string?U.valueOf():f.$$by_identity?p.id(U):U.$hash();if(w||(f.$$keys=w=new Map),!w.has(_e))return w.set(_e,[U]),[!1,!1];for(var ge=w.get(_e),pe=ge.length===1?ge:te(ge),ye,we=0;we<pe.length;we++)ye=pe[we],(U===ye||U["$eql?"](ye))&&(ge.splice(ge.indexOf(ye),1),f.delete(ye));return ge.push(U),[!1,!1]}),f},p.hash=function(){var f=arguments.length,w,U,re,ue,_e,ge;if(f===1&&arguments[0].$$is_hash)return arguments[0];if(U=new Map,f===1)if(w=arguments[0],arguments[0].$$is_array){for(ue=w.length,re=0;re<ue;re++)w[re].length!==2&&j(p.ArgumentError,"value not of length 2: "+w[re].$inspect()),_e=w[re][0],ge=w[re][1],p.hash_put(U,_e,ge);return U}else{w=arguments[0];for(_e in w)L(w,_e)&&(ge=w[_e],p.hash_put(U,_e,ge));return U}for(f%2!==0&&j(p.ArgumentError,"odd number of arguments for Hash"),re=0;re<f;re+=2)_e=arguments[re],ge=arguments[re+1],p.hash_put(U,_e,ge);return U},p.hash2=function(f,w){k.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var U=new Map,re=0,ue=f.length;re<ue;re++)U.set(f[re],w[f[re]]);return U},p.hash_each=function(f,w,U){for(var re,ue=0,_e,ge=Array.from(f.entries()),pe=ge.length;ue<pe;ue++)if(_e=ge[ue],re=U(_e[0],_e[1]),re[0])return re[1];return re?re[1]:w},p.range=function(f,w,U){var re=new p.Range;return re.begin=f,re.end=w,re.excl=U,re};var $e=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];p.ivar=function(f){return $e.indexOf(f)!==-1&&(f+="$"),f};function N(f){f.$$frozen&&j(p.FrozenError,"can't modify frozen "+f.$class()+": "+f,new Map([["receiver",f]]))}p.deny_frozen_access=N,p.freeze=function(f){return g(f,"$$frozen",!0),f.hasOwnProperty("$$id")||g(f,"$$id",K()),f.hasOwnProperty("$$meta")?f.$$meta.$freeze():g(f,"$$meta",null),f.hasOwnProperty("$$comparable")||g(f,"$$comparable",null),Object.seal(f),f};function D(f,w){var U=Object.getOwnPropertyNames(f),re=U.length,ue,_e,ge;for(ue=0;ue<re;ue++)_e=U[ue],_e[0]!=="$"&&(ge=Object.getOwnPropertyDescriptor(f,_e),ge&&ge.enumerable&&w(_e,ge))}p.each_ivar=D,p.freeze_props=function(f){var w={get:null,set:function(U){N(f)},enumerable:!0};D(f,function(U,re){re.writable&&(w.get=se(re.value),Object.defineProperty(f,U,w))})},p.escape_regexp=function(f){return f.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},p.global_regexp=function(f){return f.global?f:(f.$$g==null?f.$$g=new RegExp(f.source,(f.multiline?"gm":"g")+(f.ignoreCase?"i":"")):f.$$g.lastIndex=null,f.$$g)},p.global_multiline_regexp=function(f){var w,U;return f.global&&f.multiline?f:(U="gm"+(f.ignoreCase?"i":""),f.multiline?(f.$$g==null&&(f.$$g=new RegExp(f.source,U)),w=f.$$g):(f.$$gm==null&&(f.$$gm=new RegExp(f.source,U)),w=f.$$gm),w.lastIndex=null,w)},p.regexp=function(f,w){for(var U,re=typeof w<"u"&&w&&w.indexOf("i")>=0,ue=0,_e=f.length;ue<_e;ue++)U=f[ue],U instanceof RegExp&&(U.ignoreCase!==re&&p.Kernel.$warn("ignore case doesn't match for "+U.source.$inspect(),new Map([["uplevel",1]])),U=U.source),U===""&&(U="(?:"+U+")"),f[ue]=U;return w?new RegExp(f.join(""),w):new RegExp(f.join(""))},p.modules={},p.loaded_features=["corelib/runtime"],p.current_dir=".",p.require_table={"corelib/runtime":!0},p.normalize=function(f){var w,U,re=[],ue="/";p.current_dir!=="."&&(f=p.current_dir.replace(/\/*$/,"/")+f),f=f.replace(/^\.\//,""),f=f.replace(/\.(rb|opal|js)$/,""),w=f.split(ue);for(var _e=0,ge=w.length;_e<ge;_e++)U=w[_e],U!==""&&(U===".."?re.pop():re.push(U));return re.join(ue)},p.loaded=function(f){var w,U,re;for(w=0,U=f.length;w<U;w++)re=p.normalize(f[w]),!p.require_table[re]&&(p.loaded_features.push(re),p.require_table[re]=!0)},p.load_normalized=function(f){p.loaded([f]);var w=p.modules[f];if(w){var U=w(p);if(typeof Promise<"u"&&U instanceof Promise)return U.then(se(!0))}else{var re=p.config.missing_require_severity,ue="cannot load such file -- "+f;re==="error"?j(p.LoadError,ue):re==="warning"&&k.warn("WARNING: LoadError: "+ue)}return!0},p.load=function(f){return f=p.normalize(f),p.load_normalized(f)},p.require=function(f){return f=p.normalize(f),p.require_table[f]?!1:p.load_normalized(f)},p.encodings=Object.create(null),p.set_encoding=function(f,w,U){typeof U>"u"&&(U="encoding"),(typeof f=="string"||f.$$frozen===!0)&&j(p.FrozenError,"can't modify frozen String");var re=p.find_encoding(w);return re===f[U]||(f[U]=re),f},p.find_encoding=function(f){var w=p.encodings,U=w[f]||w[f.toUpperCase()];return U||j(p.ArgumentError,"unknown encoding name - "+f),U},p.enc=function(f,w){var U=new String(f);return U=p.set_encoding(U,w),U.internal_encoding=U.encoding,U},p.binary=function(f){var w=new String(f);return p.set_encoding(w,"binary","internal_encoding")},p.last_promise=null,p.promise_unhandled_exception=!1,p.queue=function(f){if(p.last_promise)return p.last_promise=p.last_promise.then(function(){if(!p.promise_unhandled_exception)return f(p)}).catch(function(U){p.respond_to(U,"$full_message")&&(U=U.$full_message()),k.error(U),p.promise_unhandled_exception=!0,p.exit(1)}),p.last_promise;var w=f(p);return typeof Promise=="function"&&typeof w=="object"&&w instanceof Promise&&(p.last_promise=w),w};function X(f,w){return typeof f=="number"&&typeof w=="number"}p.rb_plus=function(f,w){return X(f,w)?f+w:f["$+"](w)},p.rb_minus=function(f,w){return X(f,w)?f-w:f["$-"](w)},p.rb_times=function(f,w){return X(f,w)?f*w:f["$*"](w)},p.rb_divide=function(f,w){return X(f,w)?f/w:f["$/"](w)},p.rb_lt=function(f,w){return X(f,w)?f<w:f["$<"](w)},p.rb_gt=function(f,w){return X(f,w)?f>w:f["$>"](w)},p.rb_le=function(f,w){return X(f,w)?f<=w:f["$<="](w)},p.rb_ge=function(f,w){return X(f,w)?f>=w:f["$>="](w)};function Q(f,w){return typeof f=="number"&&typeof w=="number"||typeof f=="string"&&typeof w=="string"}function ne(f,w){return Q(f,w)?f===w:q(f["$=="](w))}p.eqeq=ne,p.eqeqeq=function(f,w){return Q(f,w)?f===w:q(f["$==="](w))},p.neqeq=function(f,w){return Q(f,w)?f!==w:q(f["$!="](w))},p.not=function(f){return f==null||f===!1||b===f?!0:f===!0||f["$!"].$$pristine?!1:q(f["$!"]())};function se(f){return function(){return f}}p.return_val=se,p.return_self=function(){return this},p.return_ivar=function(f){return function(){return this[f]==null?b:this[f]}},p.assign_ivar=function(f){return function(w){return N(this),this[f]=w}},p.assign_ivar_val=function(f,w){return function(){return N(this),this[f]=w}},p.ensure_kwargs=function(f){if(f==null)return new Map;if(f.$$is_hash)return f;j(p.ArgumentError,"expected kwargs")},p.get_kwarg=function(f,w){var U=p.hash_get(f,w);return U===void 0&&j(p.ArgumentError,"missing keyword: "+w),U},p.large_array_unpack=function(f){var w=f.split(","),U=w.length,re;for(re=0;re<U;re++)switch(w[re][0]){case void 0:w[re]=b;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":w[re]=+w[re]}return w},p.opal32_init=se(1332765036);function oe(f,w){return f<<w|f>>>32-w}p.opal32_add=function(f,w){return f^=w,f=oe(f,1),f},p.BasicObject=P=E("BasicObject",null),p.Object=I=E("Object",p.BasicObject),p.Module=O=E("Module",p.Object),p.Class=V=E("Class",p.Module),p.Opal=C=s("Opal"),p.Kernel=Z=s("Kernel"),Y(p.BasicObject,p.Class.$$prototype),Y(p.Object,p.Class.$$prototype),Y(p.Module,p.Class.$$prototype),Y(p.Class,p.Class.$$prototype),P.$$const.BasicObject=P,_(I,"BasicObject",P),_(I,"Object",I),_(I,"Module",O),_(I,"Class",V),_(I,"Opal",C),_(I,"Kernel",Z),P.$$class=V,I.$$class=V,O.$$class=V,V.$$class=V,C.$$class=O,Z.$$class=O,g(I.$$prototype,"toString",function(){var f=this.$to_s();return f.$$is_string&&typeof f=="object"?f.valueOf():f}),g(I.$$prototype,"$require",p.require),p.top=new I,p.top.$to_s=p.top.$inspect=se("main"),p.top.$define_method=fe;function fe(){var f=fe.$$p;return fe.$$p=null,p.send(I,"define_method",arguments,f)}p.NilClass=E("NilClass",p.Object),_(I,"NilClass",p.NilClass),b=p.nil=new p.NilClass,b.$$id=z,b.call=b.apply=function(){j(p.LocalJumpError,"no block given")},b.$$frozen=!0,b.$$comparable=!1,Object.seal(b),p.thrower=function(f){var w={$thrower_type:f,$throw:function(U,re){throw U==null&&(U=b),this.is_orphan&&!re&&j(p.LocalJumpError,"unexpected "+f,U,f.$to_sym()),this.$v=U,this},is_orphan:!1};return w},Object.defineProperty(B,"@",{enumerable:!0,configurable:!0,get:function(){return q(B["!"])?B["!"].$backtrace():b},set:function(f){q(B["!"])?B["!"].$set_backtrace(f):j(p.ArgumentError,"$! not set")}}),p.t_eval_return=p.thrower("return"),TypeError.$$super=Error,p.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(n){var k=n.type_error,b=n.coerce_to,P=n.module,I=n.defs,O=n.slice,V=n.eqeqeq,C=n.Kernel,Z=n.truthy,p=n.Opal,H=n.nil,ie=n.$$$;return n.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(L){var Y=P(L,"Opal");I(Y,"$bridge",function(z,y){return n.bridge(z,y)}),I(Y,"$coerce_to!",function(z,y,K,B){var j,R,g=H;return j=O(arguments,3),R=j,g=b(z,y,K,R),V(y,g)||C.$raise(k(z,y,K,g)),g},-4),I(Y,"$coerce_to?",function(z,y,K,B){var j,R,g=H;return j=O(arguments,3),R=j,!Z(z["$respond_to?"](K))||(g=b(z,y,K,R),Z(g["$nil?"]()))?H:(V(y,g)||C.$raise(k(z,y,K,g)),g)},-4),I(Y,"$try_convert",function(z,y,K){return V(y,z)?z:Z(z["$respond_to?"](K))?z.$__send__(K):H}),I(Y,"$compare",function(z,y){var K=H;return K=z["$<=>"](y),Z(K===H)&&C.$raise(ie("ArgumentError"),"comparison of "+z.$class()+" with "+y.$class()+" failed"),K}),I(Y,"$destructure",function(z){if(z.length==1)return z[0];if(z.$$is_array)return z;for(var y=new Array(z.length),K=0,B=y.length;K<B;K++)y[K]=z[K];return y}),I(Y,"$respond_to?",function(z,y,K){return K==null&&(K=!1),z==null||!z.$$class?!1:z["$respond_to?"](y,K)},-3),I(Y,"$instance_variable_name!",function(z){return z=p["$coerce_to!"](z,ie("String"),"to_str"),Z(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(z))||C.$raise(ie("NameError").$new("'"+z+"' is not allowed as an instance variable name",z)),z}),I(Y,"$class_variable_name!",function(z){return z=p["$coerce_to!"](z,ie("String"),"to_str"),Z(z.length<3||z.slice(0,2)!=="@@")&&C.$raise(ie("NameError").$new("`"+z+"' is not allowed as a class variable name",z)),z}),I(Y,"$const_name?",function(z){return typeof z!="string"&&(z=p["$coerce_to!"](z,ie("String"),"to_str")),z[0]===z[0].toUpperCase()}),I(Y,"$const_name!",function(z){var y=this;return Z(ie("::","String","skip_raise")?"constant":H)&&(z=p["$coerce_to!"](z,ie("String"),"to_str")),(!z||z[0]!=z[0].toUpperCase())&&y.$raise(ie("NameError"),"wrong constant name "+z),z}),I(Y,"$pristine",function(z,y){var K,B;K=O(arguments,1),B=K;for(var j,R,g=B.length-1;g>=0;g--)j=B[g],R=z.$$prototype[n.jsid(j)],R&&!R.$$stub&&(R.$$pristine=!0);return H},-2);var te=[];return I(Y,"$inspect",function(z){var y=H,K=!1;return function(){try{try{return z===null?"null":z===void 0?"undefined":typeof z.$$class>"u"?Object.prototype.toString.apply(z):typeof z.$inspect!="function"||z.$inspect.$$stub||te.indexOf(z.$__id__())!==-1?"#<"+z.$$class+":0x"+z.$__id__().$to_s(16)+">":(te.push(z.$__id__()),K=!0,z.$inspect())}catch(B){if(n.rescue(B,[ie("Exception")])){y=B;try{return"#<"+z.$$class+":0x"+z.$__id__().$to_s(16)+">"}finally{n.pop_exception(B)}}else throw B}}finally{K&&te.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(n){var k=n.truthy,b=n.coerce_to,P=n.const_set,I=n.Object,O=n.return_ivar,V=n.assign_ivar,C=n.ivar,Z=n.deny_frozen_access,p=n.freeze,H=n.prop,ie=n.jsid,L=n.each_ivar,Y=n.klass,te=n.Opal,W=n.Kernel,z=n.defs,y=n.send,K=n.def,B=n.eqeqeq,j=n.Module,R=n.rb_lt,g=n.rb_gt,q=n.slice,M=n.to_a,x=n.return_val,m=n.eqeq,u=n.not,d=n.rb_le,A=n.range,h=n.send2,_=n.find_super,l=n.alias,E=[],G=n.nil,c=n.$$$;return n.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(s,$,t){var e=Y(s,$,"Module"),r=[e].concat(t),i=n.$r(r);function a(F){if(F.$$is_string)return F;var T=te.$try_convert(F,c("String"),"to_str");if(T.$$is_string)return T;T===G?W.$raise(c("TypeError"),""+F+" is not a symbol nor a string"):W.$raise(c("TypeError"),"can't convert "+F.$class()+" to String ("+F.$class()+"#to_str gives "+T.$class())}z(e,"$allocate",function(){var T=this,J=n.allocate_module(G,function(){});return T!==n.Module&&Object.setPrototypeOf(J,T.$$prototype),J}),K(e,"$initialize",function F(){var T=F.$$p||G,J=this;return F.$$p=null,T!==G?y(J,"module_eval",[],T.$to_proc()):G}),K(e,"$===",function(T){var J=this;return k(T==null)?!1:n.is_a(T,J)}),K(e,"$<",function(T){var J=this;B(j,T)||W.$raise(c("TypeError"),"compared with non class/module");var ee=J,ae,le,ce;if(ee===T)return!1;for(le=0,ae=n.ancestors(J),ce=ae.length;le<ce;le++)if(ae[le]===T)return!0;for(le=0,ae=n.ancestors(T),ce=ae.length;le<ce;le++)if(ae[le]===J)return!1;return G}),K(e,"$<=",function(T){var J=this,ee=G;return k(ee=J["$equal?"](T))?ee:R(J,T)}),K(e,"$>",function(T){var J=this;return B(j,T)||W.$raise(c("TypeError"),"compared with non class/module"),R(T,J)}),K(e,"$>=",function(T){var J=this,ee=G;return k(ee=J["$equal?"](T))?ee:g(J,T)}),K(e,"$<=>",function(T){var J=this,ee=G;return J===T?0:!B(j,T)||(ee=R(J,T),k(ee["$nil?"]()))?G:k(ee)?-1:1}),K(e,"$alias_method",function(T,J){var ee=this;return Z(ee),T=b(T,c("String"),"to_str"),J=b(J,c("String"),"to_str"),n.alias(ee,T,J),ee}),K(e,"$alias_native",function(T,J){var ee=this;return J==null&&(J=T),Z(ee),n.alias_native(ee,T,J),ee},-2),K(e,"$ancestors",function(){var T=this;return n.ancestors(T)}),K(e,"$append_features",function(T){var J=this;return Z(T),n.append_features(J,T),J}),K(e,"$attr_accessor",function(T){var J,ee,ae=this;return J=q(arguments),ee=J,y(ae,"attr_reader",M(ee)),y(ae,"attr_writer",M(ee))},-1),K(e,"$attr",function(T){var J,ee,ae=this;return J=q(arguments),ee=J,ee.length==2&&(ee[1]===!0||ee[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),ee[1]?ae.$attr_accessor(ee[0]):ae.$attr_reader(ee[0]),G):y(ae,"attr_reader",M(ee))},-1),K(e,"$attr_reader",function(T){var J,ee,ae=this;J=q(arguments),ee=J,Z(ae);for(var le=ae.$$prototype,ce=ee.length-1;ce>=0;ce--){var de=ee[ce],he=ie(de),ve=C(de),me=O(ve);n.prop(le,ve,G),me.$$parameters=[],me.$$arity=0,n.defn(ae,he,me)}return G},-1),K(e,"$attr_writer",function(T){var J,ee,ae=this;J=q(arguments),ee=J,Z(ae);for(var le=ae.$$prototype,ce=ee.length-1;ce>=0;ce--){var de=ee[ce],he=ie(de+"="),ve=C(de),me=V(ve);me.$$parameters=[["req"]],me.$$arity=1,n.prop(le,ve,G),n.defn(ae,he,me)}return G},-1),K(e,"$autoload",function(T,J){var ee=this;return Z(ee),i("Opal")["$const_name?"](T)||W.$raise(c("NameError"),"autoload must be constant name: "+T),J==""&&W.$raise(c("ArgumentError"),"empty file name"),ee.$$const.hasOwnProperty(T)||(ee.$$autoload||(ee.$$autoload={}),n.const_cache_version++,ee.$$autoload[T]={path:J,loaded:!1,required:!1,success:!1,exception:!1},ee.$const_added&&!ee.$const_added.$$pristine&&ee.$const_added(T)),G}),K(e,"$autoload?",function(T){var J=this;if(J.$$autoload&&J.$$autoload[T]&&!J.$$autoload[T].required&&!J.$$autoload[T].success)return J.$$autoload[T].path;for(var ee=J.$ancestors(),ae=0,le=ee.length;ae<le;ae++)if(ee[ae].$$autoload&&ee[ae].$$autoload[T]&&!ee[ae].$$autoload[T].required&&!ee[ae].$$autoload[T].success)return ee[ae].$$autoload[T].path;return G}),K(e,"$class_variables",function(){var T=this;return Object.keys(n.class_variables(T))}),K(e,"$class_variable_get",function(T){var J=this;return T=te["$class_variable_name!"](T),n.class_variable_get(J,T,!1)}),K(e,"$class_variable_set",function(T,J){var ee=this;return Z(ee),T=te["$class_variable_name!"](T),n.class_variable_set(ee,T,J)}),K(e,"$class_variable_defined?",function(T){var J=this;return T=te["$class_variable_name!"](T),n.class_variables(J).hasOwnProperty(T)}),K(e,"$const_added",x(G)),te.$pristine(e,"const_added"),K(e,"$remove_class_variable",function(T){var J=this;if(Z(J),T=te["$class_variable_name!"](T),n.hasOwnProperty.call(J.$$cvars,T)){var ee=J.$$cvars[T];return delete J.$$cvars[T],ee}else W.$raise(c("NameError"),"cannot remove "+T+" for "+J)}),K(e,"$constants",function(T){var J=this;return T==null&&(T=!0),n.constants(J,T)},-1),z(e,"$constants",function(T){var J=this;if(T==null){var ee=(J.$$nesting||[]).concat(I),ae,le={},ce,de;for(ce=0,de=ee.length;ce<de;ce++)for(ae in ee[ce].$$const)le[ae]=!0;return Object.keys(le)}else return n.constants(J,T)},-1),z(e,"$nesting",function(){var T=this;return T.$$nesting||[]}),K(e,"$const_defined?",function(T,J){var ee=this;J==null&&(J=!0),T=i("Opal")["$const_name!"](T),k(T["$=~"](c(te,"CONST_NAME_REGEXP")))||W.$raise(c("NameError").$new("wrong constant name "+T,T));var ae,le=[ee],ce,de;for(J&&(le=le.concat(n.ancestors(ee)),ee.$$is_module&&(le=le.concat([I]).concat(n.ancestors(I)))),ce=0,de=le.length;ce<de;ce++)if(ae=le[ce],ae.$$const[T]!=null||ae.$$autoload&&ae.$$autoload[T]&&!ae.$$autoload[T].required&&!ae.$$autoload[T].success)return!0;return!1},-2),K(e,"$const_get",function(T,J){var ee=this;return J==null&&(J=!0),T=i("Opal")["$const_name!"](T),T.indexOf("::")===0&&T!=="::"&&(T=T.slice(2)),k(T.indexOf("::")!=-1&&T!="::")?y(T.$split("::"),"inject",[ee],function(le,ce){return le==null&&(le=G),ce==null&&(ce=G),le.$const_get(ce)}):(k(T["$=~"](c(te,"CONST_NAME_REGEXP")))||W.$raise(c("NameError").$new("wrong constant name "+T,T)),J?n.$$([ee],T):n.const_get_local(ee,T))},-2),K(e,"$const_missing",function(T){var J=this,ee=G;return ee=m(J,I)?T:""+J+"::"+T,W.$raise(c("NameError").$new("uninitialized constant "+ee,T))}),K(e,"$const_set",function(T,J){var ee=this;return Z(ee),T=te["$const_name!"](T),(k(T["$!~"](c(te,"CONST_NAME_REGEXP")))||k(T["$start_with?"]("::")))&&W.$raise(c("NameError").$new("wrong constant name "+T,T)),P(ee,T,J),J}),K(e,"$public_constant",x(G)),K(e,"$define_method",function F(T,J){var ee=F.$$p||G,ae=this,le=G,ce=G,de=G;return F.$$p=null,Z(ae),J===void 0&&ee===G&&W.$raise(c("ArgumentError"),"tried to create a Proc object without a block"),T=a(T),k(J!==void 0)&&(ee=B(c("Proc"),le=J)?J:B(c("Method"),le)?J.$to_proc().$$unbound:B(c("UnboundMethod"),le)?n.wrap_method_body(J.$$method):W.$raise(c("TypeError"),"wrong argument type "+J.$class()+" (expected Proc/Method/UnboundMethod)"),k(!J.$$is_proc)&&(ce=J.$owner(),k(ce.$$is_class)&&u(d(ae,ce))&&(de=k(ce.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+ce,W.$raise(c("TypeError"),de)))),typeof Proxy<"u"&&(ee.$$proxy_target=ee,ee=new Proxy(ee,{apply:function(he,ve,me){var be=he.$$jsid,$e=he.$$is_lambda;he.$$jsid=T,he.$$is_lambda=!0;try{return he.apply(ve,me)}catch(N){if(N===he.$$brk||N===he.$$ret)return N.$v;throw N}finally{he.$$jsid=be,he.$$is_lambda=$e}}})),ee.$$jsid=T,ee.$$s=null,ee.$$def=ee,ee.$$define_meth=!0,n.defn(ae,ie(T),ee)},-2),K(e,"$freeze",function(){var T=this;return k(T["$frozen?"]())?T:(T.hasOwnProperty("$$base_module")||H(T,"$$base_module",null),p(T))}),K(e,"$remove_method",function(T){var J,ee,ae=this;J=q(arguments),ee=J;for(var le=0;le<ee.length;le++){var ce=a(ee[le]);Z(ae),n.rdef(ae,"$"+ce)}return ae},-1),K(e,"$singleton_class?",function(){var T=this;return!!T.$$is_singleton}),K(e,"$include",function(T){var J,ee,ae=this;J=q(arguments),ee=J;for(var le=ee.length-1;le>=0;le--){var ce=ee[le];ce.$$is_module||W.$raise(c("TypeError"),"wrong argument type "+ce.$class()+" (expected Module)"),ce.$append_features(ae),ce.$included(ae)}return ae},-1),K(e,"$included_modules",function(){var T=this;return n.included_modules(T)}),K(e,"$include?",function(T){var J=this;T.$$is_module||W.$raise(c("TypeError"),"wrong argument type "+T.$class()+" (expected Module)");var ee,ae,le,ce=n.ancestors(J);for(ee=0,ae=ce.length;ee<ae;ee++)if(le=ce[ee],le===T&&le!==J)return!0;return!1}),K(e,"$instance_method",function(T){var J=this,ee=J.$$prototype[ie(T)];return(!ee||ee.$$stub)&&W.$raise(c("NameError").$new("undefined method `"+T+"' for class `"+J.$name()+"'",T)),c("UnboundMethod").$new(J,ee.$$owner||J,ee,T)}),K(e,"$instance_methods",function(T){var J=this;return T==null&&(T=!0),k(T)?n.instance_methods(J):n.own_instance_methods(J)},-1),K(e,"$included",x(G)),K(e,"$extended",x(G)),K(e,"$extend_object",function(T){return Z(T),G}),K(e,"$method_added",function(T){return q(arguments),G},-1),K(e,"$method_removed",function(T){return q(arguments),G},-1),K(e,"$method_undefined",function(T){return q(arguments),G},-1),K(e,"$module_eval",function F(T){var J=F.$$p||G,ee,ae,le,ce=this,de=G,he=G,ve=G,me=G,be=G,$e=G;F.$$p=null,ee=q(arguments),ae=ee,k(J["$nil?"]())&&k(!!n.compile)?(k(A(1,3,!1)["$cover?"](ae.$size()))||W.$raise(c("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(M(ae)),de=le[0]==null?G:le[0],he=le[1]==null?G:le[1],le[2]==null||le[2],ve=new Map([["file",k(me=he)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),$e=te.$compile(de,be),J=y(W,"proc",[],function X(){var Q=X.$$s==null?this:X.$$s;return new Function("Opal,self","return "+$e)(n,Q)},{$$s:ce})):k(ae["$any?"]())&&W.$raise(c("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var N=J.$$s,D;return J.$$s=null,D=J.apply(ce,[ce]),J.$$s=N,D},-1),K(e,"$module_exec",function F(T){var J=F.$$p||G,ee,ae,le=this;F.$$p=null,ee=q(arguments),ae=ee,J===G&&W.$raise(c("LocalJumpError"),"no block given");var ce=J.$$s,de;return J.$$s=null,de=J.apply(le,ae),J.$$s=ce,de},-1),K(e,"$method_defined?",function(T){var J=this,ee=J.$$prototype[ie(T)];return!!ee&&!ee.$$stub}),K(e,"$module_function",function(T){var J,ee,ae=this;if(J=q(arguments),ee=J,Z(ae),ee.length===0)return ae.$$module_function=!0,G;for(var le=0,ce=ee.length;le<ce;le++){var de=ee[le],he=ie(de),ve=ae.$$prototype[he];n.defs(ae,he,ve)}return ee.length===1?ee[0]:ee},-1),K(e,"$name",function(){var T=this;if(T.$$full_name)return T.$$full_name;for(var J=[],ee=T;ee;){if(ee.$$name===G||ee.$$name==null)return G;if(J.unshift(ee.$$name),ee=ee.$$base_module,ee===I)break}return J.length===0?G:T.$$full_name=J.join("::")}),K(e,"$prepend",function(T){var J,ee,ae=this;J=q(arguments),ee=J,ee.length===0&&W.$raise(c("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=ee.length-1;le>=0;le--){var ce=ee[le];ce.$$is_module||W.$raise(c("TypeError"),"wrong argument type "+ce.$class()+" (expected Module)"),ce.$prepend_features(ae),ce.$prepended(ae)}return ae},-1),K(e,"$prepend_features",function(T){var J=this;return Z(T),J.$$is_module||W.$raise(c("TypeError"),"wrong argument type "+J.$class()+" (expected Module)"),n.prepend_features(J,T),J}),K(e,"$prepended",x(G)),K(e,"$remove_const",function(T){var J=this;return Z(J),n.const_remove(J,T)}),K(e,"$to_s",function(){var T=this,J=G;return k(J=n.Module.$name.call(T))?J:"#<"+(T.$$is_module?"Module":"Class")+":0x"+T.$__id__().$to_s(16)+">"}),K(e,"$undef_method",function(T){var J,ee,ae=this;J=q(arguments),ee=J;for(var le=0;le<ee.length;le++){var ce=a(ee[le]);Z(ae),n.udef(ae,"$"+ce)}return ae},-1),K(e,"$instance_variables",function(){var T=this,J=G;J=(n.Module.$$nesting=r,T.$constants());var ee=[];return L(T,function(ae){ae!=="constructor"&&!J["$include?"](ae)&&ee.push("@"+ae)}),ee});function o(F,T){var J,ee=n.own_instance_methods(F);for(J=0;J<ee.length;J++){var ae=ee[J],le=ie(ae),ce=F.$$prototype[le],de=n.wrap_method_body(ce);de.$$jsid=ae,n.defn(T,le,de)}}function v(F,T){for(var J=F.$$own_included_modules,ee=J.length-1;ee>=0;ee--)n.append_features(J[ee],T)}function S(F,T){for(var J=F.$$own_prepended_modules,ee=J.length-1;ee>=0;ee--)n.prepend_features(J[ee],T)}return K(e,"$initialize_copy",function(T){var J=this;return o(T,J),v(T,J),S(T,J),J.$$cloned_from=T.$$cloned_from.concat(T),J.$copy_class_variables(T),J.$copy_constants(T)}),K(e,"$initialize_dup",function F(T){var J=F.$$p||G,ee=this;return F.$$p=null,h(ee,_(ee,"initialize_dup",F,!1,!0),"initialize_dup",[T],J),ee.$copy_singleton_methods(T)}),K(e,"$copy_class_variables",function(T){var J=this;for(var ee in T.$$cvars)J.$$cvars[ee]=T.$$cvars[ee]}),K(e,"$copy_constants",function(T){var J=this,ee,ae=T.$$const;for(ee in ae)P(J,ee,ae[ee])}),K(e,"$refine",function F(T){var J=F.$$p||G,ee,ae=this,le=G,ce=G,de=G;return F.$$p=null,ee=[ae,G,G],le=ee[0],ce=ee[1],de=ee[2],de=n.id(T),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?ce=ae.$$refine_modules[de]=c("Refinement").$new():ce=ae.$$refine_modules[de],ce.refinement_module=le,ce.refined_class=T,y(ce,"class_exec",[],J.$to_proc()),ce}),K(e,"$refinements",function(){var T=this,J=T.$$refine_modules,ee=new Map;if(typeof J>"u")return ee;for(var ae in J)ee["$[]="](J[ae].refined_class,J[ae]);return ee}),K(e,"$using",function(T){return W.$raise("Module#using is not permitted in methods")}),l(e,"class_eval","module_eval"),l(e,"class_exec","module_exec"),l(e,"inspect","to_s")}("::",null,E),function(s,$){var t=Y(s,$,"Refinement"),e=t.$$prototype;return e.refinement_module=e.refined_class=G,t.$attr_reader("refined_class"),K(t,"$inspect",function r(){var i=r.$$p||G,a=this;return r.$$p=null,k(a.refinement_module)?"#<refinement:"+a.refined_class.$inspect()+"@"+a.refinement_module.$inspect()+">":h(a,_(a,"inspect",r,!1,!0),"inspect",[],i)})}("::",j)};Opal.modules["corelib/class"]=function(n){var k=n.klass,b=n.send,P=n.defs,I=n.def,O=n.ensure_kwargs,V=n.hash_get,C=n.eqeq,Z=n.truthy,p=n.rb_plus,H=n.return_val,ie=n.slice,L=n.send2,Y=n.find_super,te=n.Kernel,W=n.alias,z=n.top,y=[],K=n.nil,B=n.$$$;return n.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),z.$require("corelib/module"),function(j,R,g){var q=k(j,R,"Class"),M=[q].concat(g),x=n.$r(M);return P(q,"$new",function m(u){var d=m.$$p||K;if(m.$$p=null,u==null&&(u=x("Object")),!u.$$is_class)throw n.TypeError.$new("superclass must be a Class");var A=n.allocate_class(K,u);return u.$inherited(A),d!==K&&b(A,"class_eval",[],d.$to_proc()),A},-1),I(q,"$allocate",function(){var u=this,d=new u.$$constructor;return d.$$id=n.uid(),d}),I(q,"$clone",function(u){var d,A=this,h=K;return u=O(u),d=V(u,"freeze"),d==null&&(d=K),Z(d["$nil?"]())||C(d,!0)||C(d,!1)||A.$raise(x("ArgumentError"),"unexpected value for freeze: "+d.$class()),h=n.allocate_class(K,A.$$super),h.$copy_instance_variables(A),h.$copy_singleton_methods(A),h.$initialize_clone(A,new Map([["freeze",d]])),(C(d,!0)||Z(d["$nil?"]())&&Z(A["$frozen?"]()))&&h.$freeze(),h},-1),I(q,"$dup",function(){var u=this,d=K;return d=n.allocate_class(K,u.$$super),d.$copy_instance_variables(u),d.$initialize_dup(u),d}),I(q,"$descendants",function(){var u=this;return p(u.$subclasses(),b(u.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),I(q,"$inherited",H(K)),I(q,"$new",function m(u){var d=m.$$p||K,A,h,_=this;m.$$p=null,A=ie(arguments),h=A;var l=_.$allocate();return n.send(l,l.$initialize,h,d),l},-1),I(q,"$subclasses",function(){var u=this;if(typeof WeakRef<"u"){var d,A,h=[];for(d=0;d<u.$$subclasses.length;d++)A=u.$$subclasses[d].deref(),A!==void 0&&h.push(A);return h}else return u.$$subclasses}),I(q,"$superclass",function(){var u=this;return u.$$super||K}),I(q,"$to_s",function m(){m.$$p;var u=this;m.$$p=null;var d=u.$$singleton_of;return d&&d.$$is_a_module?"#<Class:"+d.$name()+">":d?"#<Class:#<"+d.$$class.$name()+":0x"+n.id(d).$to_s(16)+">>":L(u,Y(u,"to_s",m,!1,!0),"to_s",[],null)}),I(q,"$attached_object",function(){var u=this;if(u.$$singleton_of!=null)return u.$$singleton_of;te.$raise(B("TypeError"),"`"+u+"' is not a singleton class")}),W(q,"inspect","to_s")}("::",null,y)};Opal.modules["corelib/basic_object"]=function(n){var k=n.klass,b=n.slice,P=n.def,I=n.alias,O=n.return_val,V=n.Opal,C=n.truthy,Z=n.range,p=n.Kernel,H=n.to_a,ie=n.send,L=n.eqeq,Y=n.rb_ge,te=n.nil,W=n.$$$;return n.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(z,y){var K=k(z,y,"BasicObject");return P(K,"$initialize",function(j){return b(arguments),te},-1),P(K,"$==",function(j){var R=this;return R===j}),P(K,"$eql?",function(j){var R=this;return R["$=="](j)}),I(K,"equal?","=="),P(K,"$__id__",function(){var j=this;return j.$$id!=null||n.prop(j,"$$id",n.uid()),j.$$id}),P(K,"$__send__",function B(j,R){var g=B.$$p||te,q,M,x=this;B.$$p=null,q=b(arguments,1),M=q,j.$$is_string||x.$raise(W("TypeError"),""+x.$inspect()+" is not a symbol nor a string");var m=x[n.jsid(j)];return m?(g!==te&&(m.$$p=g),m.apply(x,M)):(g!==te&&(x.$method_missing.$$p=g),x.$method_missing.apply(x,[j].concat(M)))},-2),P(K,"$!",O(!1)),V.$pristine("!"),P(K,"$!=",function(j){var R=this;return R["$=="](j)["$!"]()}),P(K,"$instance_eval",function B(j){var R=B.$$p||te,g,q,M,x=this,m=te,u=te,d=te,A=te,h=te,_=te;if(B.$$p=null,g=b(arguments),q=g,C(R["$nil?"]())&&C(!!n.compile))C(Z(1,3,!1)["$cover?"](q.$size()))||p.$raise(W("ArgumentError"),"wrong number of arguments (0 for 1..3)"),M=[].concat(H(q)),m=M[0]==null?te:M[0],u=M[1]==null?te:M[1],M[2]==null||M[2],d=new Map([["file",C(A=u)?A:"(eval)"],["eval",!0]]),h=new Map([["arity_check",!1]]).$merge(d),_=V.$compile(m,h),R=ie(p,"proc",[],function G(){var c=G.$$s==null?this:G.$$s;return new Function("Opal,self","return "+_)(n,c)},{$$s:x});else{if(C(R["$nil?"]())&&C(Y(q.$length(),1))&&L(q.$first()["$[]"](0),"@"))return x.$instance_variable_get(q.$first());C(q["$any?"]())&&p.$raise(W("ArgumentError"),"wrong number of arguments ("+q.$size()+" for 0)")}var l=R.$$s,E;if(R.$$s=null,x.$$is_a_module){x.$$eval=!0;try{E=R.call(x,x)}finally{x.$$eval=!1}}else E=R.call(x,x);return R.$$s=l,E},-1),P(K,"$instance_exec",function B(j){var R=B.$$p||te,g,q,M=this;B.$$p=null,g=b(arguments),q=g,C(R)||p.$raise(W("ArgumentError"),"no block given");var x=R.$$s,m;if(R.$$s=null,M.$$is_a_module){M.$$eval=!0;try{m=R.apply(M,q)}finally{M.$$eval=!1}}else m=R.apply(M,q);return R.$$s=x,m},-1),P(K,"$singleton_method_added",function(j){return b(arguments),te},-1),P(K,"$singleton_method_removed",function(j){return b(arguments),te},-1),P(K,"$singleton_method_undefined",function(j){return b(arguments),te},-1),P(K,"$method_missing",function B(j,R){B.$$p;var g,q,M=this,x=te;return B.$$p=null,g=b(arguments,1),q=g,x=V.$inspect(M),p.$raise(W("NoMethodError").$new("undefined method `"+j+"' for "+x,j,q),te,p.$caller(1))},-2),V.$pristine(K,"method_missing"),P(K,"$respond_to_missing?",function(j,R){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(n){var k=n.truthy,b=n.coerce_to,P=n.respond_to,I=n.Opal,O=n.deny_frozen_access,V=n.freeze,C=n.freeze_props,Z=n.jsid,p=n.each_ivar,H=n.module,ie=n.return_val,L=n.def,Y=n.Kernel,te=n.gvars,W=n.slice,z=n.send,y=n.to_a,K=n.ensure_kwargs,B=n.hash_get,j=n.eqeq,R=n.rb_plus,g=n.extract_kwargs,q=n.eqeqeq,M=n.return_self,x=n.rb_le,m=n.rb_lt,u=n.Object,d=n.alias,A=n.klass,h=[],_=n.nil,l=n.$$$;return n.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(E,G){var c=H(E,"Kernel"),s=[c].concat(G),$=n.$r(s);L(c,"$=~",ie(!1)),L(c,"$!~",function(r){var i=this;return i["$=~"](r)["$!"]()}),L(c,"$===",function(r){var i=this,a=_;return k(a=i.$object_id()["$=="](r.$object_id()))?a:i["$=="](r)}),L(c,"$<=>",function(r){var i=this;i.$$comparable=!0;var a=i["$=="](r);return a&&a!==_?0:_}),L(c,"$method",function(r){var i=this,a=i[Z(r)];return(!a||a.$$stub)&&Y.$raise(l("NameError").$new("undefined method `"+r+"' for class `"+i.$class()+"'",r)),l("Method").$new(i,a.$$owner||i.$class(),a,r)}),L(c,"$methods",function(r){var i=this;return r==null&&(r=!0),k(r)?n.methods(i):n.own_methods(i)},-1),L(c,"$public_methods",function(r){var i=this;return r==null&&(r=!0),k(r)?n.methods(i):n.receiver_methods(i)},-1),L(c,"$Array",function(r){var i;return r===_?[]:r.$$is_array?r:(i=I["$coerce_to?"](r,l("Array"),"to_ary"),i!==_||(i=I["$coerce_to?"](r,l("Array"),"to_a"),i!==_)?i:[r])}),L(c,"$at_exit",function e(){var r=e.$$p||_,i=_;return te.__at_exit__==null&&(te.__at_exit__=_),e.$$p=null,te.__at_exit__=k(i=te.__at_exit__)?i:[],te.__at_exit__["$<<"](r),r}),L(c,"$caller",function(r,i){r==null&&(r=1),i==null&&(i=_);var a,o;a=new Error().$backtrace(),o=[];for(var v=r+1,S=a.length;v<S;v++)a[v].match(/runtime\.js/)||o.push(a[v]);return i!=_&&(o=o.slice(0,i)),o},-1),L(c,"$caller_locations",function(r){var i,a,o=this;return i=W(arguments),a=i,z(z(o,"caller",y(a)),"map",[],function(S){return S==null&&(S=_),l(l(l("Thread"),"Backtrace"),"Location").$new(S)})},-1),L(c,"$class",function(){var r=this;return r.$$class}),L(c,"$copy_instance_variables",function(r){var i=this,a=Object.keys(r),o,v,S;for(o=0,v=a.length;o<v;o++)S=a[o],S.charAt(0)!=="$"&&r.hasOwnProperty(S)&&(i[S]=r[S])}),L(c,"$copy_singleton_methods",function(r){var i=this,a,o,v,S;if(r.hasOwnProperty("$$meta")&&r.$$meta!==null){var F=n.get_singleton_class(r),T=n.get_singleton_class(i);for(v=Object.getOwnPropertyNames(F.$$prototype),a=0,S=v.length;a<S;a++)o=v[a],n.is_method(o)&&(T.$$prototype[o]=F.$$prototype[o]);T.$$const=Object.assign({},F.$$const),Object.setPrototypeOf(T.$$prototype,Object.getPrototypeOf(F.$$prototype))}for(a=0,v=Object.getOwnPropertyNames(r),S=v.length;a<S;a++)o=v[a],o.charAt(0)==="$"&&o.charAt(1)!=="$"&&r.hasOwnProperty(o)&&(i[o]=r[o])}),L(c,"$clone",function(r){var i,a=this,o=_;return r=K(r),i=B(r,"freeze"),i==null&&(i=_),k(i["$nil?"]())||j(i,!0)||j(i,!1)||a.$raise($("ArgumentError"),"unexpected value for freeze: "+i.$class()),o=a.$class().$allocate(),o.$copy_instance_variables(a),o.$copy_singleton_methods(a),o.$initialize_clone(a,new Map([["freeze",i]])),(j(i,!0)||k(i["$nil?"]())&&k(a["$frozen?"]()))&&o.$freeze(),o},-1),L(c,"$initialize_clone",function(r,i){var a=this;return i=K(i),B(i,"freeze"),a.$initialize_copy(r),a},-2),L(c,"$define_singleton_method",function e(r,i){var a=e.$$p||_,o=this;return e.$$p=null,z(o.$singleton_class(),"define_method",[r,i],a.$to_proc())},-2),L(c,"$dup",function(){var r=this,i=_;return i=r.$class().$allocate(),i.$copy_instance_variables(r),i.$initialize_dup(r),i}),L(c,"$initialize_dup",function(r){var i=this;return i.$initialize_copy(r)}),L(c,"$enum_for",function e(r,i){var a=e.$$p||_,o,v,S,F=this;return e.$$p=null,o=W(arguments),o.length>0&&(v=o.shift()),v==null&&(v="each"),S=o,z(l("Enumerator"),"for",[F,v].concat(y(S)),a.$to_proc())},-1),L(c,"$equal?",function(r){var i=this;return i===r}),L(c,"$exit",function(r){var i=_,a=_;for(te.__at_exit__==null&&(te.__at_exit__=_),r==null&&(r=!0),te.__at_exit__=k(i=te.__at_exit__)?i:[];!k(te.__at_exit__["$empty?"]());)a=te.__at_exit__.$pop(),a.$call();return r.$$is_boolean?r=r?0:1:r=b(r,l("Integer"),"to_int"),n.exit(r),_},-1),L(c,"$extend",function(r){var i,a,o=this;i=W(arguments),a=i,a.length==0&&o.$raise(l("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),O(o);for(var v=o.$singleton_class(),S=a.length-1;S>=0;S--){var F=a[S];F.$$is_module||Y.$raise(l("TypeError"),"wrong argument type "+F.$class()+" (expected Module)"),F.$append_features(v),F.$extend_object(o),F.$extended(o)}return o},-1),L(c,"$freeze",function(){var r=this;return k(r["$frozen?"]())?r:typeof r=="object"?(C(r),V(r)):r}),L(c,"$frozen?",function(){var r=this;switch(typeof r){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return r.$$frozen||!1;default:return!1}}),L(c,"$gets",function(r){var i,a;return te.stdin==null&&(te.stdin=_),i=W(arguments),a=i,z(te.stdin,"gets",y(a))},-1),L(c,"$hash",function(){var r=this;return r.$__id__()}),L(c,"$initialize_copy",ie(_));var t=[];return L(c,"$inspect",function(){var r=this,i=_,a=_,o=_,v=_;return function(){try{try{return i="",a=r.$__id__(),k(t["$include?"](a))?i=" ...":(t["$<<"](a),o=!0,z(r.$instance_variables(),"each",[],function S(F){var T=S.$$s==null?this:S.$$s,J=_,ee=_;return F==null&&(F=_),J=T.$instance_variable_get(F),ee=$("Opal").$inspect(J),i=R(i," "+F+"="+ee)},{$$s:r})),"#<"+r.$class()+":0x"+a.$to_s(16)+i+">"}catch(S){if(n.rescue(S,[$("StandardError")])){v=S;try{return"#<"+r.$class()+":0x"+a.$to_s(16)+">"}finally{n.pop_exception(S)}}else throw S}}finally{k(o)&&t.$pop()}}()}),L(c,"$instance_of?",function(r){var i=this;return!r.$$is_class&&!r.$$is_module&&Y.$raise(l("TypeError"),"class or module required"),i.$$class===r}),L(c,"$instance_variable_defined?",function(r){var i=this;return r=I["$instance_variable_name!"](r),n.hasOwnProperty.call(i,r.substr(1))}),L(c,"$instance_variable_get",function(r){var i=this;r=I["$instance_variable_name!"](r);var a=i[n.ivar(r.substr(1))];return a??_}),L(c,"$instance_variable_set",function(r,i){var a=this;return O(a),r=I["$instance_variable_name!"](r),a[n.ivar(r.substr(1))]=i}),L(c,"$remove_instance_variable",function(r){var i=this;r=I["$instance_variable_name!"](r);var a=n.ivar(r.substr(1)),o;return i.hasOwnProperty(a)?(o=i[a],delete i[a],o):Y.$raise(l("NameError"),"instance variable "+r+" not defined")}),L(c,"$instance_variables",function(){var r=this,i=[];return p(r,function(a){a.substr(-1)==="$"&&(a=a.slice(0,a.length-1)),i.push("@"+a)}),i}),L(c,"$Integer",function(r,i,a){var o,v,S,F;o=W(arguments,1),v=g(o),v=K(v),o.length>0&&(S=o.shift()),F=B(v,"exception"),F==null&&(F=!0);var T,J,ee;if(F=k(F),!r.$$is_string){if(S!==void 0)if(F)Y.$raise(l("ArgumentError"),"base specified for non string value");else return _;if(r===_)if(F)Y.$raise(l("TypeError"),"can't convert nil into Integer");else return _;if(r.$$is_number){if(r===1/0||r===-1/0||isNaN(r))if(F)Y.$raise(l("FloatDomainError"),r);else return _;return Math.floor(r)}if(r["$respond_to?"]("to_int")&&(T=r.$to_int(),n.is_a(T,l("Integer")))||r["$respond_to?"]("to_i")&&(T=r.$to_i(),n.is_a(T,l("Integer"))))return T;if(F)Y.$raise(l("TypeError"),"can't convert "+r.$class()+" into Integer");else return _}if(r==="0")return 0;if(S===void 0)S=0;else if(S=b(S,l("Integer"),"to_int"),S===1||S<0||S>36)if(F)Y.$raise(l("ArgumentError"),"invalid radix "+S);else return _;if(J=r.toLowerCase(),J=J.replace(/(\d)_(?=\d)/g,"$1"),J=J.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,le,ce){switch(ce){case"0b":if(S===0||S===2)return S=2,le;case"0":case"0o":if(S===0||S===8)return S=8,le;case"0d":if(S===0||S===10)return S=10,le;case"0x":if(S===0||S===16)return S=16,le}if(F)Y.$raise(l("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return _}),S=S===0?10:S,ee="0-"+(S<=10?S-1:"9a-"+String.fromCharCode(97+(S-11))),!new RegExp("^\\s*[+-]?["+ee+"]+\\s*$").test(J))if(F)Y.$raise(l("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return _;if(T=parseInt(J,S),isNaN(T))if(F)Y.$raise(l("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return _;return T},-2),L(c,"$Float",function(r,i){var a;i=K(i),a=B(i,"exception"),a==null&&(a=!0);var o;if(a=k(a),r===_)if(a)Y.$raise(l("TypeError"),"can't convert nil into Float");else return _;if(r.$$is_string){if(o=r.toString(),o=o.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(o))return Y.$Integer(o);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(o))if(a)Y.$raise(l("ArgumentError"),'invalid value for Float(): "'+r+'"');else return _;return parseFloat(o)}return a?I["$coerce_to!"](r,l("Float"),"to_f"):b(r,l("Float"),"to_f")},-2),L(c,"$Hash",function(r){return k(r["$nil?"]())||j(r,[])?new Map:q(l("Hash"),r)?r:I["$coerce_to!"](r,l("Hash"),"to_hash")}),L(c,"$is_a?",function(r){var i=this;return!r.$$is_class&&!r.$$is_module&&Y.$raise(l("TypeError"),"class or module required"),n.is_a(i,r)}),L(c,"$itself",M),L(c,"$lambda",function e(){var r=e.$$p||_;return e.$$p=null,n.lambda(r)}),L(c,"$load",function(r){return r=I["$coerce_to!"](r,l("String"),"to_str"),n.load(r)}),L(c,"$loop",function e(){var r=e.$$p||_,i=this,a=_;if(e.$$p=null,r===_)return z(i,"enum_for",["loop"],function(){return l(l("Float"),"INFINITY")});for(;k(!0);)try{n.yieldX(r,[])}catch(o){if(n.rescue(o,[l("StopIteration")])){a=o;try{return a.$result()}finally{n.pop_exception(o)}}else throw o}return i}),L(c,"$nil?",ie(!1)),L(c,"$printf",function(r){var i,a,o=this,v=_;return te.stdout==null&&(te.stdout=_),i=W(arguments),a=i,k(a["$empty?"]())||(v=k(a[0].$$is_string)?te.stdout:a.$shift(),v.$write(z(o,"format",y(a)))),_},-1),L(c,"$proc",function e(){var r=e.$$p||_;return e.$$p=null,k(r)||Y.$raise(l("ArgumentError"),"tried to create Proc object without a block"),r.$$is_lambda=!1,r}),L(c,"$puts",function(r){var i,a;return te.stdout==null&&(te.stdout=_),i=W(arguments),a=i,z(te.stdout,"puts",y(a))},-1),L(c,"$p",function(r){var i,a;return i=W(arguments),a=i,z(a,"each",[],function(v){return te.stdout==null&&(te.stdout=_),v==null&&(v=_),te.stdout.$puts(v.$inspect())}),k(x(a.$length(),1))?a["$[]"](0):a},-1),L(c,"$print",function(r){var i,a;return te.stdout==null&&(te.stdout=_),i=W(arguments),a=i,z(te.stdout,"print",y(a))},-1),L(c,"$readline",function(r){var i,a;return te.stdin==null&&(te.stdin=_),i=W(arguments),a=i,z(te.stdin,"readline",y(a))},-1),L(c,"$warn",function(r,i){var a,o,v,S,F,T,J=this,ee=_;return te.VERBOSE==null&&(te.VERBOSE=_),te.stderr==null&&(te.stderr=_),a=W(arguments),o=g(a),o=K(o),v=a,S=B(o,"uplevel"),S==null&&(S=_),k(S)&&(S=I["$coerce_to!"](S,l("Integer"),"to_str"),k(m(S,0))&&Y.$raise(l("ArgumentError"),"negative level ("+S+")"),ee=(F=(T=J.$caller(R(S,1),1).$first(),T===_||T==null?_:T.$split(":in `")),F===_||F==null?_:F.$first()),k(ee)&&(ee=""+ee+": "),v=z(v,"map",[],function(le){return le==null&&(le=_),""+ee+"warning: "+le})),k(te.VERBOSE["$nil?"]())||k(v["$empty?"]())?_:z(te.stderr,"puts",y(v))},-1),L(c,"$raise",function(r,i,a){throw te["!"]==null&&(te["!"]=_),i==null&&(i=_),a==null&&(a=_),r==null&&te["!"]!==_?te["!"]:(r==null?r=l("RuntimeError").$new(""):P(r,"$to_str")?r=l("RuntimeError").$new(r.$to_str()):r.$$is_class&&P(r,"$exception")?r=r.$exception(i):r.$$is_exception||(r=l("TypeError").$new("exception class/object expected")),a!==_&&r.$set_backtrace(a),te["!"]!==_&&n.exceptions.push(te["!"]),te["!"]=r,r)},-1),L(c,"$rand",function(r){return r===void 0?l(l("Random"),"DEFAULT").$rand():(r.$$is_number&&(r<0&&(r=Math.abs(r)),r%1!==0&&(r=r.$to_i()),r===0&&(r=void 0)),l(l("Random"),"DEFAULT").$rand(r))},-1),L(c,"$respond_to?",function(r,i){var a=this;i==null&&(i=!1);var o=a[Z(r)];return typeof o=="function"&&!o.$$stub?!0:a["$respond_to_missing?"].$$pristine===!0?!1:a["$respond_to_missing?"](r,i)},-2),L(c,"$respond_to_missing?",function(r,i){return!1},-2),I.$pristine(c,"respond_to?","respond_to_missing?"),L(c,"$require",function(r){return typeof r!="string"&&n.String&&n.Array&&(r=I["$coerce_to!"](r,l("String"),"to_str")),n.require(r)}),L(c,"$require_relative",function(r){return I["$try_convert!"](r,l("String"),"to_str"),r=l("File").$expand_path(l("File").$join(n.current_file,"..",r)),n.require(r)}),L(c,"$require_tree",function(r,i){var a;i=K(i),a=B(i,"autoload"),a==null&&(a=!1);var o=[];r=l("File").$expand_path(r),r=n.normalize(r),r==="."&&(r="");for(var v in n.modules)v["$start_with?"](r)&&(a?o.push([v,!0]):o.push([v,n.require(v)]));return o},-2),L(c,"$singleton_class",function(){var r=this;return n.get_singleton_class(r)}),L(c,"$sleep",function(r){r==null&&(r=_),r===_&&Y.$raise(l("TypeError"),"can't convert NilClass into time interval"),r.$$is_number||Y.$raise(l("TypeError"),"can't convert "+r.$class()+" into time interval"),r<0&&Y.$raise(l("ArgumentError"),"time interval must be positive");for(var i=n.global.performance?function(){return performance.now()}:function(){return new Date},a=i();i()-a<=r*1e3;);return Math.round(r)},-1),L(c,"$srand",function(r){return r==null&&(r=$("Random").$new_seed()),l("Random").$srand(r)},-1),L(c,"$String",function(r){var i=_;return k(i=I["$coerce_to?"](r,l("String"),"to_str"))?i:I["$coerce_to!"](r,l("String"),"to_s")}),L(c,"$tap",function e(){var r=e.$$p||_,i=this;return e.$$p=null,n.yield1(r,i),i}),L(c,"$to_proc",M),L(c,"$to_s",function(){var r=this;return"#<"+r.$class()+":0x"+r.$__id__().$to_s(16)+">"}),L(c,"$catch",function e(r){var i=e.$$p||_,a=_,o=_;e.$$p=null,r==null&&(r=_);try{return r=k(a=r)?a:u.$new(),n.yield1(i,r)}catch(v){if(n.rescue(v,[l("UncaughtThrowError")])){o=v;try{return j(o.$tag(),r)?o.$value():Y.$raise()}finally{n.pop_exception(v)}}else throw v}},-1),L(c,"$throw",function(r,i){return i==null&&(i=_),Y.$raise(l("UncaughtThrowError").$new(r,i))},-2),L(c,"$open",function e(r){var i=e.$$p||_,a,o;return e.$$p=null,a=W(arguments),o=a,z(l("File"),"open",y(o),i.$to_proc())},-1),L(c,"$yield_self",function e(){var r=e.$$p||_,i=this;return e.$$p=null,r===_?z(i,"enum_for",["yield_self"],ie(1)):n.yield1(r,i)}),d(c,"fail","raise"),d(c,"kind_of?","is_a?"),d(c,"object_id","__id__"),d(c,"public_send","__send__"),d(c,"send","__send__"),d(c,"then","yield_self"),d(c,"to_enum","enum_for")}("::",h),function(E,G){var c=A(E,G,"Object");return delete u.$$prototype.$require,c.$include(Y)}("::",null)};Opal.modules["corelib/main"]=function(n){var k=n.return_val,b=n.def,P=n.Object,I=n.slice,O=n.Kernel,V=n.top;return n.nil,n.add_stubs("include,raise"),function(C,Z){return b(C,"$to_s",k("main")),b(C,"$include",function(H){return P.$include(H)}),b(C,"$autoload",function(H){var ie,L;return ie=I(arguments),L=ie,n.Object.$autoload.apply(n.Object,L)},-1),b(C,"$using",function(H){return O.$raise("main.using is permitted only at toplevel")})}(n.get_singleton_class(V))};Opal.modules["corelib/error/errno"]=function(n){var k=n.module,b=n.truthy,P=n.rb_plus,I=n.send2,O=n.find_super,V=n.def,C=n.klass,Z=n.nil,p=n.$$$;return n.add_stubs("+,errno,class,attr_reader"),function(H,ie){var L=k(H,"Errno"),Y=Z,te=Z;Y=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],te=Z;var W;for(W=0;W<Y.length;W++)(function(){var z=Y[W][0],y=Y[W][1],K=Y[W][2];te=n.klass(L,n.SystemCallError,z),te.errno=K,function(B,j){return V(B,"$new",function R(g){R.$$p;var q=this,M=Z;return R.$$p=null,g==null&&(g=Z),M=y,b(g)&&(M=P(M," - "+g)),I(q,O(q,"new",R,!1,!0),"new",[M],null)},-1)}(n.get_singleton_class(te))})()}("::"),function(H,ie,L){var Y=C(H,ie,"SystemCallError");return V(Y,"$errno",function(){var W=this;return W.$class().$errno()}),function(te,W){return te.$attr_reader("errno")}(n.get_singleton_class(Y))}("::",p("StandardError"))};Opal.modules["corelib/error"]=function(n){var k=n.klass,b=n.slice,P=n.gvars,I=n.defs,O=n.send,V=n.to_a,C=n.def,Z=n.send2,p=n.find_super,H=n.truthy,ie=n.Kernel,L=n.not,Y=n.rb_plus,te=n.eqeq,W=n.Object,z=n.ensure_kwargs,y=n.hash_get,K=n.module,B=[],j=n.nil,R=n.$$$;return n.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(g,q,M){var x=k(g,q,"Exception"),m=[x].concat(M),u=n.$r(m),d=x.$$prototype;d.message=j,n.prop(x.$$prototype,"$$is_exception",!0);var A;Error.stackTraceLimit=100,I(x,"$new",function(l){var E,G,c=this;P["!"]==null&&(P["!"]=j),E=b(arguments),G=E;var s=G.length>0?G[0]:j,$=new c.$$constructor(s);return $.name=c.$$name,$.message=s,$.cause=P["!"],n.send($,$.$initialize,G),n.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace($,A),$},-1),A=x.$new,I(x,"$exception",function(l){var E,G,c=this;return E=b(arguments),G=E,O(c,"new",V(G))},-1),C(x,"$initialize",function(l){var E,G,c=this;return E=b(arguments),G=E,c.message=G.length>0?G[0]:j},-1),C(x,"$copy_instance_variables",function _(l){var E=_.$$p||j,G=this;_.$$p=null,Z(G,p(G,"copy_instance_variables",_,!1,!0),"copy_instance_variables",[l],E),G.message=l.message,G.cause=l.cause,G.stack=l.stack});function h(_){for(var l=[],E,G=0;G<_.length;G++){var c=_[G];!c||!c.$$is_string||((E=c.match(/^    at (.*?) \((.*?)\)$/))?l.push(E[2]+":in `"+E[1]+"'"):(E=c.match(/^    at (.*?)$/))?l.push(E[1]+":in `undefined'"):(E=c.match(/^  from (.*?)$/))?l.push(E[1]):(E=c.match(/^(.*?)@(.*?)$/))&&l.push(E[2]+":in `"+E[1]+"'"))}return l}return C(x,"$backtrace",function(){var l=this;if(l.backtrace)return l.backtrace;var E=l.stack;return typeof E<"u"&&E.$$is_string?l.backtrace=h(E.split(`
`)):E?l.backtrace=h(E):[]}),C(x,"$backtrace_locations",function(){var l,E=this;return E.backtrace_locations||(E.backtrace_locations=(l=E.$backtrace(),l===j||l==null?j:O(l,"map",[],function(c){return c==null&&(c=j),R(R(R("Thread"),"Backtrace"),"Location").$new(c)}))),E.backtrace_locations}),C(x,"$cause",function(){var l=this;return l.cause||j}),C(x,"$exception",function(l){var E=this;if(l==null&&(l=j),l===j||E===l)return E;var G=E.$clone();return G.message=l,E.backtrace&&(G.backtrace=E.backtrace.$dup()),G.stack=E.stack,G.cause=E.cause,G},-1),C(x,"$message",function(){var l=this;return l.$to_s()}),C(x,"$full_message",function(l){var E,G=this,c=j,s=j,$=j,t=j,e=j,r=j,i=j,a=j,o=j;return P.stderr==null&&(P.stderr=j),l==null&&(l=j),H(u("Hash","skip_raise")?"constant":j)?(l=new Map([["highlight",P.stderr["$tty?"]()],["order","top"]]).$merge(H(c=l)?c:new Map),E=[l["$[]"]("highlight"),l["$[]"]("order")],s=E[0],$=E[1],H([!0,!1]["$include?"](s))||ie.$raise(R("ArgumentError"),"expected true or false as highlight: "+s),H(["top","bottom"]["$include?"]($))||ie.$raise(R("ArgumentError"),"expected :top or :bottom as order: "+$),H(s)?(t="\x1B[1;4m",e="\x1B[1m",r="\x1B[m"):t=e=r="",i=G.$backtrace().$dup(),(L(i)||H(i["$empty?"]()))&&(i=G.$caller()),a=i.$shift(),o=""+a+": ",o=Y(o,""+e+G.$to_s()+" ("+t+G.$class()+r+e+")"+r+`
`),o=Y(o,O(i,"map",[],function(S){return S==null&&(S=j),"	from "+S+`
`}).$join()),H(G.$cause())&&(o=Y(o,G.$cause().$full_message(new Map([["highlight",s]])))),te($,"bottom")&&(o=o.$split(`
`).$reverse().$join(`
`),o=Y(""+e+"Traceback"+r+` (most recent call last):
`,o)),o):""+G.message+`
`+G.stack},-1),C(x,"$inspect",function(){var l=this,E=j;return E=l.$to_s(),H(E["$empty?"]())?l.$class().$to_s():"#<"+l.$class().$to_s()+": "+l.$to_s()+">"}),C(x,"$set_backtrace",function(l){var E=this,G=!0,c,s;if(l===j)E.backtrace=j,E.stack="";else if(l.$$is_string)E.backtrace=[l],E.stack="  from "+l;else{if(l.$$is_array){for(c=0,s=l.length;c<s;c++)if(!l[c].$$is_string){G=!1;break}}else G=!1;G===!1&&ie.$raise(R("TypeError"),"backtrace must be Array of String"),E.backtrace=l,E.stack=O(l,"map",[],function(t){return t==null&&(t=j),Y("  from ",t)}).join(`
`)}return l}),C(x,"$to_s",function(){var l=this,E=j,G=j;return H(E=H(G=l.message)?l.message.$to_s():G)?E:l.$class().$to_s()})}("::",Error,B),k("::",R("Exception"),"ScriptError"),k("::",R("ScriptError"),"SyntaxError"),k("::",R("ScriptError"),"LoadError"),k("::",R("ScriptError"),"NotImplementedError"),k("::",R("Exception"),"SystemExit"),k("::",R("Exception"),"NoMemoryError"),k("::",R("Exception"),"SignalException"),k("::",R("SignalException"),"Interrupt"),k("::",R("Exception"),"SecurityError"),k("::",R("Exception"),"SystemStackError"),k("::",R("Exception"),"StandardError"),k("::",R("StandardError"),"EncodingError"),k("::",R("StandardError"),"ZeroDivisionError"),k("::",R("StandardError"),"NameError"),k("::",R("NameError"),"NoMethodError"),k("::",R("StandardError"),"RuntimeError"),k("::",R("RuntimeError"),"FrozenError"),k("::",R("StandardError"),"LocalJumpError"),k("::",R("StandardError"),"TypeError"),k("::",R("StandardError"),"ArgumentError"),k("::",R("ArgumentError"),"UncaughtThrowError"),k("::",R("StandardError"),"IndexError"),k("::",R("IndexError"),"StopIteration"),k("::",R("StopIteration"),"ClosedQueueError"),k("::",R("IndexError"),"KeyError"),k("::",R("StandardError"),"RangeError"),k("::",R("RangeError"),"FloatDomainError"),k("::",R("StandardError"),"IOError"),k("::",R("IOError"),"EOFError"),k("::",R("StandardError"),"SystemCallError"),k("::",R("StandardError"),"RegexpError"),k("::",R("StandardError"),"ThreadError"),k("::",R("StandardError"),"FiberError"),W.$autoload("Errno","corelib/error/errno"),function(g,q){var M=k(g,q,"FrozenError");return M.$attr_reader("receiver"),C(M,"$initialize",function x(m,u){var d;x.$$p;var A=this;return x.$$p=null,u=z(u),d=y(u,"receiver"),d==null&&(d=j),Z(A,p(A,"initialize",x,!1,!0),"initialize",[m],null),A.receiver=d},-2)}("::",R("RuntimeError")),function(g,q){var M=k(g,q,"UncaughtThrowError"),x=M.$$prototype;return x.tag=j,M.$attr_reader("tag","value"),C(M,"$initialize",function m(u,d){m.$$p;var A=this;return m.$$p=null,d==null&&(d=j),A.tag=u,A.value=d,Z(A,p(A,"initialize",m,!1,!0),"initialize",["uncaught throw "+A.tag.$inspect()],null)},-2)}("::",R("ArgumentError")),function(g,q){var M=k(g,q,"NameError");return M.$attr_reader("name"),C(M,"$initialize",function x(m,u){x.$$p;var d=this;return x.$$p=null,u==null&&(u=j),Z(d,p(d,"initialize",x,!1,!0),"initialize",[m],null),d.name=u},-2)}("::",null),function(g,q){var M=k(g,q,"NoMethodError");return M.$attr_reader("args"),C(M,"$initialize",function x(m,u,d){x.$$p;var A=this;return x.$$p=null,u==null&&(u=j),d==null&&(d=[]),Z(A,p(A,"initialize",x,!1,!0),"initialize",[m,u],null),A.args=d},-2)}("::",null),function(g,q){var M=k(g,q,"StopIteration");return M.$attr_reader("result")}("::",null),function(g,q){var M=k(g,q,"KeyError"),x=M.$$prototype;return x.receiver=x.key=j,C(M,"$initialize",function m(u,d){var A,h;m.$$p;var _=this;return m.$$p=null,d=z(d),A=y(d,"receiver"),A==null&&(A=j),h=y(d,"key"),h==null&&(h=j),Z(_,p(_,"initialize",m,!1,!0),"initialize",[u],null),_.receiver=A,_.key=h},-2),C(M,"$receiver",function(){var u=this,d=j;return H(d=u.receiver)?d:ie.$raise(R("ArgumentError"),"no receiver is available")}),C(M,"$key",function(){var u=this,d=j;return H(d=u.key)?d:ie.$raise(R("ArgumentError"),"no key is available")})}("::",null),function(g,q){var M=k(g,q,"LocalJumpError");return M.$attr_reader("exit_value","reason"),C(M,"$initialize",function x(m,u,d){x.$$p;var A=this;return x.$$p=null,u==null&&(u=j),d==null&&(d="noreason"),Z(A,p(A,"initialize",x,!1,!0),"initialize",[m],null),A.exit_value=u,A.reason=d},-2)}("::",null),function(g,q){var M=K(g,"JS"),x=[M].concat(q);return k(x[0],null,"Error"),j}("::",B)};Opal.modules["corelib/constants"]=function(n){var k=n.const_set;n.nil;var b=n.$$$;return k("::","RUBY_PLATFORM","opal"),k("::","RUBY_ENGINE","opal"),k("::","RUBY_VERSION","3.2.0"),k("::","RUBY_ENGINE_VERSION","1.8.2"),k("::","RUBY_RELEASE_DATE","2023-11-23"),k("::","RUBY_PATCHLEVEL",0),k("::","RUBY_REVISION","0"),k("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),k("::","RUBY_DESCRIPTION","opal "+b("RUBY_ENGINE_VERSION")+" ("+b("RUBY_RELEASE_DATE")+" revision "+b("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(n){var k=n.Object;return n.nil,n.add_stubs("require"),k.$require("corelib/runtime"),k.$require("corelib/helpers"),k.$require("corelib/module"),k.$require("corelib/class"),k.$require("corelib/basic_object"),k.$require("corelib/kernel"),k.$require("corelib/main"),k.$require("corelib/error"),k.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(n){var k=n.klass,b=n.Kernel,P=n.def,I=n.return_val,O=n.ensure_kwargs,V=n.hash_get,C=n.NilClass,Z=n.slice,p=n.truthy,H=n.rb_gt,ie=n.alias,L=n.nil,Y=n.$$$;return n.add_stubs("raise,name,new,>,length,Rational,to_i"),function(te,W,z){var y=k(te,W,"NilClass");return y.$$prototype.$$meta=y,function(K,B){return P(K,"$allocate",function(){var R=this;return b.$raise(Y("TypeError"),"allocator undefined for "+R.$name())}),n.udef(K,"$new"),L}(n.get_singleton_class(y)),P(y,"$!",I(!0)),P(y,"$&",I(!1)),P(y,"$|",function(B){return B!==!1&&B!==L}),P(y,"$^",function(B){return B!==!1&&B!==L}),P(y,"$==",function(B){return B===L}),P(y,"$dup",I(L)),P(y,"$clone",function(B){return B=O(B),V(B,"freeze"),L},-1),P(y,"$inspect",I("nil")),P(y,"$nil?",I(!0)),P(y,"$singleton_class",function(){return C}),P(y,"$to_a",function(){return[]}),P(y,"$to_h",function(){return new Map}),P(y,"$to_i",I(0)),P(y,"$to_s",I("")),P(y,"$to_c",function(){return Y("Complex").$new(0,0)}),P(y,"$rationalize",function(B){var j,R;return j=Z(arguments),R=j,p(H(R.$length(),1))&&b.$raise(Y("ArgumentError")),b.$Rational(0,1)},-1),P(y,"$to_r",function(){return b.$Rational(0,1)}),P(y,"$instance_variables",function(){return[]}),ie(y,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(n){var k=n.klass,b=n.Kernel,P=n.def,I=n.return_self,O=n.ensure_kwargs,V=n.hash_get,C=n.slice,Z=n.truthy,p=n.send2,H=n.find_super,ie=n.to_a,L=n.alias,Y=n.nil,te=n.$$$;return n.add_stubs("raise,name,==,to_s,__id__"),function(W,z,y){var K=k(W,z,"Boolean");n.prop(K.$$prototype,"$$is_boolean",!0);for(var B=["$$class","$$meta"],j=0;j<B.length;j++)Object.defineProperty(K.$$prototype,B[j],{configurable:!0,enumerable:!1,get:function(){return this==!0?n.TrueClass:this==!1?n.FalseClass:n.Boolean}});return Object.defineProperty(K.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:Y}}),function(R,g){return P(R,"$allocate",function(){var M=this;return b.$raise(te("TypeError"),"allocator undefined for "+M.$name())}),n.udef(R,"$new"),Y}(n.get_singleton_class(K)),P(K,"$__id__",function(){var g=this;return g.valueOf()?2:0}),P(K,"$!",function(){var g=this;return g!=!0}),P(K,"$&",function(g){var q=this;return q==!0?g!==!1&&g!==Y:!1}),P(K,"$|",function(g){var q=this;return q==!0?!0:g!==!1&&g!==Y}),P(K,"$^",function(g){var q=this;return q==!0?g===!1||g===Y:g!==!1&&g!==Y}),P(K,"$==",function(g){var q=this;return q==!0===g.valueOf()}),P(K,"$singleton_class",function(){var g=this;return g.$$meta}),P(K,"$to_s",function(){var g=this;return g==!0?"true":"false"}),P(K,"$dup",I),P(K,"$clone",function(g){var q=this;return g=O(g),V(g,"freeze"),q},-1),P(K,"$method_missing",function R(g,q){var M=R.$$p||Y,x,m,u=this;R.$$p=null,x=C(arguments,1),m=x;var d=u.$$class.$$prototype[n.jsid(g)];return Z(typeof d<"u"&&!d.$$stub)||p(u,H(u,"method_missing",R,!1,!0),"method_missing",[g].concat(ie(m)),M),n.send(u,d,m,M)},-2),P(K,"$respond_to_missing?",function(g,q){var M=this,x=M.$$class.$$prototype[n.jsid(g)];return typeof x<"u"&&!x.$$stub},-2),L(K,"eql?","=="),L(K,"equal?","=="),L(K,"inspect","to_s"),L(K,"object_id","__id__")}("::",Boolean),k("::",te("Boolean"),"TrueClass"),k("::",te("Boolean"),"FalseClass"),Y};Opal.modules["corelib/comparable"]=function(n){var k=n.truthy,b=n.module,P=n.rb_gt,I=n.rb_lt,O=n.eqeqeq,V=n.Kernel,C=n.def,Z=n.nil,p=n.$$$;return n.add_stubs(">,<,===,raise,class,<=>,equal?"),function(H){var ie=b(H,"Comparable"),L=Z;function Y(z){return n.is_a(z,n.Integer)?z:P(z,0)?1:I(z,0)?-1:0}function te(z,y){var K;O(Z,L=y)||O(!0,L)||O(!1,L)||O(p("Integer"),L)||O(p("Float"),L)?K=y.$inspect():K=y.$$class,V.$raise(p("ArgumentError"),"comparison of "+z.$class()+" with "+K+" failed")}function W(z,y){var K=z["$<=>"](y);return k(K)||te(z,y),Y(K)}return C(ie,"$==",function(y){var K=this,B=Z;return k(K["$equal?"](y))?!0:K["$<=>"]==n.Kernel["$<=>"]?!1:K.$$comparable?(K.$$comparable=!1,!1):k(B=K["$<=>"](y))?Y(B)==0:!1}),C(ie,"$>",function(y){var K=this;return W(K,y)>0}),C(ie,"$>=",function(y){var K=this;return W(K,y)>=0}),C(ie,"$<",function(y){var K=this;return W(K,y)<0}),C(ie,"$<=",function(y){var K=this;return W(K,y)<=0}),C(ie,"$between?",function(y,K){var B=this;return!(k(I(B,y))||k(P(B,K)))}),C(ie,"$clamp",function(y,K){var B=this;K==null&&(K=Z);var j,R;if(K===Z&&(n.is_a(y,n.Range)||V.$raise(p("TypeError"),"wrong argument type "+y.$class()+" (expected Range)"),R=y.excl,K=y.end,y=y.begin,K!==Z&&R&&V.$raise(p("ArgumentError"),"cannot clamp with an exclusive range")),y!==Z&&K!==Z&&W(y,K)>0&&V.$raise(p("ArgumentError"),"min argument must be smaller than max argument"),y!==Z){if(j=W(B,y),j==0)return B;if(j<0)return y}return K!==Z&&(j=W(B,K),j>0)?K:B},-2)}("::")};Opal.modules["corelib/regexp"]=function(n){var k=n.coerce_to,b=n.prop,P=n.freeze,I=n.klass,O=n.const_set,V=n.send2,C=n.find_super,Z=n.def,p=n.truthy,H=n.gvars,ie=n.slice,L=n.Kernel,Y=n.Opal,te=n.alias,W=n.send,z=n.regexp,y=n.rb_plus,K=n.ensure_kwargs,B=n.hash_get,j=n.rb_ge,R=n.to_a,g=n.eqeqeq,q=n.rb_minus,M=n.return_ivar,x=[],m=n.nil,u=n.$$$;return n.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),I("::",u("StandardError"),"RegexpError"),function(d,A,h){var _=I(d,A,"Regexp"),l=[_].concat(h),E=n.$r(l);return O(_,"IGNORECASE",1),O(_,"EXTENDED",2),O(_,"MULTILINE",4),n.prop(_.$$prototype,"$$is_regexp",!0),function(G,c){var s=[G].concat(c),$=n.$r(s);return Z(G,"$allocate",function t(){var e=t.$$p||m,r=this,i=m;return t.$$p=null,i=V(r,C(r,"allocate",t,!1,!0),"allocate",[],e),i.uninitialized=!0,i}),Z(G,"$escape",function(e){return e=k(e,u("String"),"to_str"),n.escape_regexp(e)}),Z(G,"$last_match",function(e){return H["~"]==null&&(H["~"]=m),e==null&&(e=m),p(e["$nil?"]())?H["~"]:p(H["~"])?H["~"]["$[]"](e):m},-1),Z(G,"$union",function(e){var r,i,a=this;r=ie(arguments),i=r;var o,v,S,F,T;if(i.length==0)return/(?!)/;if(i.length==1&&i[0].$$is_regexp)return i[0];o=i[0].$$is_array,i.length>1&&o&&L.$raise(u("TypeError"),"no implicit conversion of Array into String"),o&&(i=i[0]),F=void 0,v=[];for(var J=0;J<i.length;J++)S=i[J],S.$$is_string?v.push(a.$escape(S)):S.$$is_regexp?(T=S.$options(),F!=null&&F!=T&&L.$raise(u("TypeError"),"All expressions must use the same options"),F=T,v.push("("+S.source+")")):v.push(a.$escape(S.$to_str()));return a.$new(v.$join("|"),F)},-1),Z(G,"$new",function(e,r){if(e.$$is_regexp)return new RegExp(e);if(e=Y["$coerce_to!"](e,u("String"),"to_str"),e.charAt(e.length-1)==="\\"&&e.charAt(e.length-2)!=="\\"&&L.$raise(u("RegexpError"),"too short escape sequence: /"+e+"/"),e=e.replace("\\A","^").replace("\\z","$"),r===void 0||r["$!"]())return new RegExp(e);if(r.$$is_number){var i="";$("IGNORECASE")&r&&(i+="i"),$("MULTILINE")&r&&(i+="m"),r=i}else r="i";return new RegExp(e,r)},-2),te(G,"compile","new"),te(G,"quote","escape")}(n.get_singleton_class(_),l),Z(_,"$==",function(c){var s=this;return c instanceof RegExp&&s.toString()===c.toString()}),Z(_,"$===",function(c){var s=this;return s.$match(Y["$coerce_to?"](c,u("String"),"to_str"))!==m}),Z(_,"$=~",function(c){var s=this,$=m;return H["~"]==null&&(H["~"]=m),p($=s.$match(c))?H["~"].$begin(0):$}),Z(_,"$freeze",function(){var c=this;return p(c["$frozen?"]())?c:(c.hasOwnProperty("$$g")||b(c,"$$g",null),c.hasOwnProperty("$$gm")||b(c,"$$gm",null),P(c))}),Z(_,"$inspect",function(){var c=this,s=/^\/(.*)\/([^\/]*)$/,$=c.toString(),t=s.exec($);if(t){for(var e=t[1],r=t[2],i=e.split(""),a=i.length,o=!1,v="",S=0;S<a;S++){var F=i[S];!o&&F=="/"&&(v=v.concat("\\")),v=v.concat(F),F=="\\"?o?o=!1:o=!0:o=!1}return"/"+v+"/"+r}else return $}),Z(_,"$match",function G(c,s){var $=G.$$p||m,t=this;if(H["~"]==null&&(H["~"]=m),G.$$p=null,t.uninitialized&&L.$raise(u("TypeError"),"uninitialized Regexp"),s===void 0){if(c===m)return H["~"]=m;var e=t.exec(k(c,u("String"),"to_str"));return e?(H["~"]=u("MatchData").$new(t,e),$===m?H["~"]:n.yield1($,H["~"])):H["~"]=m}if(s=k(s,u("Integer"),"to_int"),c===m||(c=k(c,u("String"),"to_str"),s<0&&(s+=c.length,s<0)))return H["~"]=m;for(var r,i=n.global_regexp(t);;){if(r=i.exec(c),r===null)return H["~"]=m;if(r.index>=s)return H["~"]=u("MatchData").$new(i,r),$===m?H["~"]:n.yield1($,H["~"]);i.lastIndex=r.index+1}},-2),Z(_,"$match?",function(c,s){var $=this;if($.uninitialized&&L.$raise(u("TypeError"),"uninitialized Regexp"),s===void 0)return c===m?!1:$.test(k(c,u("String"),"to_str"));if(s=k(s,u("Integer"),"to_int"),c===m||(c=k(c,u("String"),"to_str"),s<0&&(s+=c.length,s<0)))return!1;var t,e=n.global_regexp($);return t=e.exec(c),!(t===null||t.index<s)},-2),Z(_,"$names",function(){var c=this;return W(c.$source().$scan(z(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),Z(_,"$named_captures",function(){var c=this;return W(W(W(c.$source().$scan(z(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function($){return $==null&&($=m),W($,"map",[],function(e){return e==null&&(e=m),y(e.$last(),1)})})}),Z(_,"$~",function(){var c=this;return H._==null&&(H._=m),c["$=~"](H._)}),Z(_,"$source",function(){var c=this;return c.source}),Z(_,"$options",function(){var c=this;c.uninitialized&&L.$raise(u("TypeError"),"uninitialized Regexp");var s=0;return c.multiline&&(s|=E("MULTILINE")),c.ignoreCase&&(s|=E("IGNORECASE")),s}),Z(_,"$casefold?",function(){var c=this;return c.ignoreCase}),te(_,"eql?","=="),te(_,"to_s","source")}("::",RegExp,x),function(d,A,h){var _=I(d,A,"MatchData"),l=[_].concat(h),E=n.$r(l),G=_.$$prototype;return G.matches=m,_.$attr_reader("post_match","pre_match","regexp","string"),Z(_,"$initialize",function(s,$,t){var e,r=this;t=K(t),e=B(t,"no_matchdata"),e==null&&(e=!1),p(e)||(H["~"]=r),r.regexp=s,r.begin=$.index,r.string=$.input,r.pre_match=$.input.slice(0,$.index),r.post_match=$.input.slice($.index+$[0].length),r.matches=[];for(var i=0,a=$.length;i<a;i++){var o=$[i];o==null?r.matches.push(m):r.matches.push(o)}},-3),Z(_,"$match",function(s){var $=this,t=m;return p(t=$["$[]"](s))?t:p(s["$is_a?"](E("Integer")))&&p(j(s,$.$length()))?L.$raise(u("IndexError"),"index "+s+" out of matches"):m}),Z(_,"$match_length",function(s){var $,t=this;return $=t.$match(s),$===m||$==null?m:$.$length()}),Z(_,"$[]",function(s){var $,t,e=this;return $=ie(arguments),t=$,t[0].$$is_string?(e.$regexp().$names()["$include?"](t["$[]"](0))["$!"]()&&L.$raise(u("IndexError"),"undefined group name reference: "+t["$[]"](0)),e.$named_captures()["$[]"](t["$[]"](0))):W(e.matches,"[]",R(t))},-1),Z(_,"$offset",function(s){var $=this;return s!==0&&L.$raise(u("ArgumentError"),"MatchData#offset only supports 0th element"),[$.begin,$.begin+$.matches[s].length]}),Z(_,"$==",function(s){var $=this,t=m,e=m,r=m,i=m;return g(u("MatchData"),s)?p(t=p(e=p(r=p(i=$.string==s.string)?$.regexp.toString()==s.regexp.toString():i)?$.pre_match==s.pre_match:r)?$.post_match==s.post_match:e)?$.begin==s.begin:t:!1}),Z(_,"$begin",function(s){var $=this;return s!==0&&L.$raise(u("ArgumentError"),"MatchData#begin only supports 0th element"),$.begin}),Z(_,"$end",function(s){var $=this;return s!==0&&L.$raise(u("ArgumentError"),"MatchData#end only supports 0th element"),$.begin+$.matches[s].length}),Z(_,"$captures",function(){var s=this;return s.matches.slice(1)}),Z(_,"$named_captures",function(){var s=this,$=m;return $=s.$captures(),W(s.$regexp().$named_captures(),"transform_values",[],function(e){return e==null&&(e=m),$["$[]"](q(e.$last(),1))})}),Z(_,"$names",function(){var s=this;return s.$regexp().$names()}),Z(_,"$inspect",function(){var s=this,$="#<MatchData "+s.matches[0].$inspect();if(s.$regexp().$names()["$empty?"]())for(var t=1,e=s.matches.length;t<e;t++)$+=" "+t+":"+s.matches[t].$inspect();else W(s.$named_captures(),"each",[],function(i,a){return i==null&&(i=m),a==null&&(a=m),$+=" "+i+":"+a.$inspect()});return $+">"}),Z(_,"$length",function(){var s=this;return s.matches.length}),Z(_,"$to_a",M("matches")),Z(_,"$to_s",function(){var s=this;return s.matches[0]}),Z(_,"$values_at",function(s){var $,t,e=this;$=ie(arguments),t=$;var r,i,a,o=[];for(r=0;r<t.length;r++){if(t[r].$$is_range&&(i=t[r].$to_a(),i.unshift(r,1),Array.prototype.splice.apply(t,i)),a=Y["$coerce_to!"](t[r],u("Integer"),"to_int"),a<0&&(a+=e.matches.length,a<0)){o.push(m);continue}o.push(e.matches[a])}return o},-1),te(_,"eql?","=="),te(_,"size","length")}(x[0],null,x)};Opal.modules["corelib/string"]=function(n){var k=n.coerce_to,b=n.respond_to,P=n.global_multiline_regexp,I=n.prop,O=n.opal32_init,V=n.opal32_add,C=n.klass,Z=n.send2,p=n.find_super,H=n.def,ie=n.Opal,L=n.defs,Y=n.slice,te=n.send,W=n.to_a,z=n.extract_kwargs,y=n.ensure_kwargs,K=n.hash_get,B=n.eqeqeq,j=n.Kernel,R=n.truthy,g=n.gvars,q=n.rb_divide,M=n.rb_plus,x=n.eqeq,m=n.alias,u=n.const_set,d=n.top,A=[],h=n.$r(A),_=n.nil,l=n.$$$;return n.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),d.$require("corelib/comparable"),d.$require("corelib/regexp"),function(E,G,c){var s=C(E,G,"String"),$=[s].concat(c),t=n.$r($);s.$include(l("Comparable")),n.prop(s.$$prototype,"$$is_string",!0);var e=new Map;(function(){H(s,"$__id__",function i(){var a=i.$$p||_,o=this;if(i.$$p=null,typeof o=="object")return Z(o,p(o,"__id__",i,!1,!0),"__id__",[],a);if(e.has(o))return e.get(o);var v=n.uid();return e.set(o,v),v}),H(s,"$hash",function(){var a=this,o=O(),v,S=a.length;for(o=V(o,5),o=V(o,S),v=0;v<S;v++)o=V(o,a.charCodeAt(v));return o})})(),L(s,"$try_convert",function(a){return ie["$coerce_to?"](a,l("String"),"to_str")}),L(s,"$new",function(a){var o,v,S=this;o=Y(arguments),v=o;var F=v[0]||"",T=v[v.length-1];return F=k(F,l("String"),"to_str"),T&&T.$$is_hash&&T.has("encoding")&&(F=F.$force_encoding(T.get("encoding").value)),F=new S.$$constructor(F),F.$initialize.$$pristine||te(F,"initialize",W(v)),F},-1),H(s,"$initialize",function(a,o){var v,S;return v=Y(arguments),S=z(v),S=y(S),v.length>0&&v.shift(),K(S,"encoding"),K(S,"capacity"),_},-1),H(s,"$%",function(a){var o=this;return B(l("Array"),a)?te(o,"format",[o].concat(W(a))):o.$format(o,a)}),H(s,"$*",function(a){var o=this;if(a=k(a,l("Integer"),"to_int"),a<0&&j.$raise(l("ArgumentError"),"negative argument"),a===0)return"";var v="",S=o.toString();for(S.length*a>=1<<28&&j.$raise(l("RangeError"),"multiply count must not overflow maximum string size");(a&1)===1&&(v+=S),a>>>=1,a!==0;)S+=S;return v}),H(s,"$+",function(a){var o=this;if(a=k(a,l("String"),"to_str"),a==""&&o.$$class===n.String)return o;if(o==""&&a.$$class===n.String)return a;var v=o+a;return o.encoding===v.encoding&&a.encoding===v.encoding||o.encoding.name==="UTF-8"||a.encoding.name==="UTF-8"?v:n.enc(v,o.encoding)}),H(s,"$<=>",function(a){var o=this;if(R(a["$respond_to?"]("to_str")))return a=a.$to_str().$to_s(),o>a?1:o<a?-1:0;var v=a["$<=>"](o);return v===_?_:v>0?-1:v<0?1:0}),H(s,"$==",function(a){var o=this;return a.$$is_string?o.toString()===a.toString():b(a,"$to_str")?a["$=="](o):!1}),H(s,"$=~",function(a){var o=this;return a.$$is_string&&j.$raise(l("TypeError"),"type mismatch: String given"),a["$=~"](o)}),H(s,"$[]",function(a,o){var v=this,S=v.length,F,T;if(a.$$is_range)return F=a.excl,T=a,o=a.end===_?-1:k(a.end,l("Integer"),"to_int"),a=a.begin===_?0:k(a.begin,l("Integer"),"to_int"),Math.abs(a)>S?_:(a<0&&(a+=S),o<0&&(o+=S),(!F||T.end===_)&&(o+=1),o=o-a,o<0&&(o=0),v.substr(a,o));if(a.$$is_string)return o!=null&&j.$raise(l("TypeError")),v.indexOf(a)!==-1?a:_;if(a.$$is_regexp){var J=v.match(a);return J===null?(g["~"]=_,_):(g["~"]=l("MatchData").$new(a,J),o==null?J[0]:(o=k(o,l("Integer"),"to_int"),o<0&&-o<J.length?J[o+=J.length]:o>=0&&o<J.length?J[o]:_))}return a=k(a,l("Integer"),"to_int"),a<0&&(a+=S),o==null?a>=S||a<0?_:v.substr(a,1):(o=k(o,l("Integer"),"to_int"),o<0||a>S||a<0?_:v.substr(a,o))},-2),H(s,"$b",function(){var a=this;return new String(a).$force_encoding("binary")}),H(s,"$capitalize",function(){var a=this;return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}),H(s,"$casecmp",function(a){var o=this;if(!R(a["$respond_to?"]("to_str")))return _;a=k(a,l("String"),"to_str").$to_s();var v=/^[\x00-\x7F]*$/;return v.test(o)&&v.test(a)&&(o=o.toLowerCase(),a=a.toLowerCase()),o["$<=>"](a)}),H(s,"$casecmp?",function(a){var o=this,v=o.$casecmp(a);return v===_?_:v===0}),H(s,"$center",function(a,o){var v=this;if(o==null&&(o=" "),a=k(a,l("Integer"),"to_int"),o=k(o,l("String"),"to_str").$to_s(),R(o["$empty?"]())&&j.$raise(l("ArgumentError"),"zero width padding"),R(a<=v.length))return v;var S=v.$ljust(q(M(a,v.length),2).$ceil(),o),F=v.$rjust(q(M(a,v.length),2).$floor(),o);return F+S.slice(v.length)},-2),H(s,"$chomp",function(a){var o=this;if(g["/"]==null&&(g["/"]=_),a==null&&(a=g["/"]),R(a===_||o.length===0))return o;a=ie["$coerce_to!"](a,l("String"),"to_str").$to_s();var v;if(a===`
`)v=o.replace(/\r?\n?$/,"");else if(a==="")v=o.replace(/(\r?\n)+$/,"");else if(o.length>=a.length){var S=o.substr(o.length-a.length,a.length);S===a&&(v=o.substr(0,o.length-a.length))}return v??o},-1),H(s,"$chop",function(){var a=this,o=a.length,v;return o<=1?v="":a.charAt(o-1)===`
`&&a.charAt(o-2)==="\r"?v=a.substr(0,o-2):v=a.substr(0,o-1),v}),H(s,"$chr",function(){var a=this;return a.charAt(0)}),H(s,"$clone",function(a){var o,v=this,S=_;return a=y(a),o=K(a,"freeze"),o==null&&(o=_),R(o["$nil?"]())||x(o,!0)||x(o,!1)||v.$raise(t("ArgumentError"),"unexpected value for freeze: "+o.$class()),S=new String(v),S.$copy_singleton_methods(v),S.$initialize_clone(v,new Map([["freeze",o]])),x(o,!0)?S.$$frozen||(S.$$frozen=!0):R(o["$nil?"]())&&v.$$frozen&&(S.$$frozen=!0),S},-1),H(s,"$dup",function(){var a=this,o=_;return o=new String(a),o.$initialize_dup(a),o}),H(s,"$count",function(a){var o,v,S=this;o=Y(arguments),v=o,v.length===0&&j.$raise(l("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var F=r(v);return F===null?0:S.length-S.replace(new RegExp(F,"g"),"").length},-1),H(s,"$delete",function(a){var o,v,S=this;o=Y(arguments),v=o,v.length===0&&j.$raise(l("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var F=r(v);return F===null?S:S.replace(new RegExp(F,"g"),"")},-1),H(s,"$delete_prefix",function(a){var o=this;return a.$$is_string||(a=k(a,l("String"),"to_str")),o.slice(0,a.length)===a?o.slice(a.length):o}),H(s,"$delete_suffix",function(a){var o=this;return a.$$is_string||(a=k(a,l("String"),"to_str")),o.slice(o.length-a.length)===a?o.slice(0,o.length-a.length):o}),H(s,"$downcase",function(){var a=this;return a.toLowerCase()}),H(s,"$each_line",function i(a,o){var v=i.$$p||_,S,F,T,J,ee=this;if(g["/"]==null&&(g["/"]=_),i.$$p=null,S=Y(arguments),F=z(S),F=y(F),S.length>0&&(T=S.shift()),T==null&&(T=g["/"]),J=K(F,"chomp"),J==null&&(J=!1),v===_)return ee.$enum_for("each_line",T,new Map([["chomp",J]]));if(T===_)return n.yield1(v,ee),ee;T=k(T,l("String"),"to_str");var ae,le,ce,de,he,ve,me,be;if(T.length===0){for(ae=ee.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,ce=ae.length;le<ce;le+=2)(ae[le]||ae[le+1])&&(be=(ae[le]||"")+(ae[le+1]||""),J&&(be=be.$chomp(`
`)),n.yield1(v,be));return ee}for(he=ee.$chomp(T),ve=ee.length!=he.length,me=he.split(T),le=0,de=me.length;le<de;le++)be=me[le],(le<de-1||ve)&&(be+=T),J&&(be=be.$chomp(T)),n.yield1(v,be);return ee},-1),H(s,"$empty?",function(){var a=this;return a.length===0}),H(s,"$end_with?",function(a){var o,v,S=this;o=Y(arguments),v=o;for(var F=0,T=v.length;F<T;F++){var J=k(v[F],l("String"),"to_str").$to_s();if(S.length>=J.length&&S.substr(S.length-J.length,J.length)==J)return!0}return!1},-1),H(s,"$gsub",function i(a,o){var v=i.$$p||_,S=this;if(i.$$p=null,o===void 0&&v===_)return S.$enum_for("gsub",a);var F="",T=_,J=0,ee,ae;a.$$is_regexp?a=P(a):(a=k(a,l("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(ee=a.exec(S),ee===null){g["~"]=_,F+=S.slice(J);break}T=l("MatchData").$new(a,ee),o===void 0?(le=a.lastIndex,ae=v(ee[0]),a.lastIndex=le):o.$$is_hash?ae=o["$[]"](ee[0]).$to_s():(o.$$is_string||(o=k(o,l("String"),"to_str")),ae=o.replace(/([\\]+)([0-9+&`'])/g,function(ce,de,he){if(de.length%2===0)return ce;switch(he){case"+":for(var ve=ee.length-1;ve>0;ve--)if(ee[ve]!==void 0)return de.slice(1)+ee[ve];return"";case"&":return de.slice(1)+ee[0];case"`":return de.slice(1)+S.slice(0,ee.index);case"'":return de.slice(1)+S.slice(ee.index+ee[0].length);default:return de.slice(1)+(ee[he]||"")}}).replace(/\\\\/g,"\\")),a.lastIndex===ee.index?(F+=S.slice(J,ee.index)+ae+(S[ee.index]||""),a.lastIndex+=1):F+=S.slice(J,ee.index)+ae,J=a.lastIndex}return g["~"]=T,F},-2),H(s,"$hex",function(){var a=this;return a.$to_i(16)}),H(s,"$include?",function(a){var o=this;return a.$$is_string||(a=k(a,l("String"),"to_str")),o.indexOf(a)!==-1}),H(s,"$index",function(a,o){var v=this,S,F,T;if(o===void 0)o=0;else if(o=k(o,l("Integer"),"to_int"),o<0&&(o+=v.length,o<0))return _;if(a.$$is_regexp)for(T=P(a);;){if(F=T.exec(v),F===null){g["~"]=_,S=-1;break}if(F.index>=o){g["~"]=l("MatchData").$new(T,F),S=F.index;break}T.lastIndex=F.index+1}else a=k(a,l("String"),"to_str"),a.length===0&&o>v.length?S=-1:S=v.indexOf(a,o);return S===-1?_:S},-2),H(s,"$inspect",function(){var a=this,o=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,v={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},S=a.replace(o,function(F){return v[F]?v[F]:(F=F.charCodeAt(0),F<=255&&(a.encoding["$binary?"]()||a.internal_encoding["$binary?"]())?"\\x"+("00"+F.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+F.toString(16).toUpperCase()).slice(-4))});return'"'+S.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),H(s,"$intern",function(){var a=this;return a.toString()}),H(s,"$length",function(){var a=this;return a.length}),m(s,"size","length"),H(s,"$lines",function i(a,o){var v=i.$$p||_,S,F,T,J,ee=this,ae=_;return g["/"]==null&&(g["/"]=_),i.$$p=null,S=Y(arguments),F=z(S),F=y(F),S.length>0&&(T=S.shift()),T==null&&(T=g["/"]),J=K(F,"chomp"),J==null&&(J=!1),ae=te(ee,"each_line",[T,new Map([["chomp",J]])],v.$to_proc()),R(v)?ee:ae.$to_a()},-1),H(s,"$ljust",function(a,o){var v=this;if(o==null&&(o=" "),a=k(a,l("Integer"),"to_int"),o=k(o,l("String"),"to_str").$to_s(),R(o["$empty?"]())&&j.$raise(l("ArgumentError"),"zero width padding"),R(a<=v.length))return v;var S=-1,F="";for(a-=v.length;++S<a;)F+=o;return v+F.slice(0,a)},-2),H(s,"$lstrip",function(){var a=this;return a.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),H(s,"$ascii_only?",function(){var a=this;return a.encoding.ascii?/^[\x00-\x7F]*$/.test(a):!1}),H(s,"$match",function i(a,o){var v=i.$$p||_,S=this;return i.$$p=null,(B(t("String"),a)||R(a["$respond_to?"]("to_str")))&&(a=l("Regexp").$new(a.$to_str())),B(l("Regexp"),a)||j.$raise(l("TypeError"),"wrong argument type "+a.$class()+" (expected Regexp)"),te(a,"match",[S,o],v.$to_proc())},-2),H(s,"$match?",function(a,o){var v=this;return(B(t("String"),a)||R(a["$respond_to?"]("to_str")))&&(a=l("Regexp").$new(a.$to_str())),B(l("Regexp"),a)||j.$raise(l("TypeError"),"wrong argument type "+a.$class()+" (expected Regexp)"),a["$match?"](v,o)},-2),H(s,"$next",function(){var a=this,o=a.length;if(o===0)return"";for(var v=a,S=a.search(/[a-zA-Z0-9]/),F=!1,T;o--;){if(T=a.charCodeAt(o),T>=48&&T<=57||T>=65&&T<=90||T>=97&&T<=122)switch(T){case 57:F=!0,T=48;break;case 90:F=!0,T=65;break;case 122:F=!0,T=97;break;default:F=!1,T+=1}else S===-1?T===255?(F=!0,T=0):(F=!1,T+=1):F=!0;if(v=v.slice(0,o)+String.fromCharCode(T)+v.slice(o+1),F&&(o===0||o===S)){switch(T){case 65:break;case 97:break;default:T+=1}o===0?v=String.fromCharCode(T)+v:v=v.slice(0,o)+String.fromCharCode(T)+v.slice(o),F=!1}if(!F)break}return v}),H(s,"$oct",function(){var a=this,o,v=a,S=8;return/^\s*_/.test(v)?0:(v=v.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(F,T,J,ee){switch(ee.charAt(0)){case"+":case"-":return F;case"0":if(ee.charAt(1)==="x"&&J==="0x")return F}switch(J){case"0b":S=2;break;case"0":case"0o":S=8;break;case"0d":S=10;break;case"0x":S=16;break}return T+ee}),o=parseInt(v.replace(/_(?!_)/g,""),S),isNaN(o)?0:o)}),H(s,"$ord",function(){var a=this;return typeof a.codePointAt=="function"?a.codePointAt(0):a.charCodeAt(0)}),H(s,"$partition",function(a){var o=this,v,S;return a.$$is_regexp?(S=a.exec(o),S===null?v=-1:(l("MatchData").$new(a,S),a=S[0],v=S.index)):(a=k(a,l("String"),"to_str"),v=o.indexOf(a)),v===-1?[o,"",""]:[o.slice(0,v),o.slice(v,v+a.length),o.slice(v+a.length)]}),H(s,"$reverse",function(){var a=this;return a.split("").reverse().join("")}),H(s,"$rindex",function(a,o){var v=this,S,F,T,J;if(o===void 0)o=v.length;else if(o=k(o,l("Integer"),"to_int"),o<0&&(o+=v.length,o<0))return _;if(a.$$is_regexp){for(F=null,T=P(a);J=T.exec(v),!(J===null||J.index>o);)F=J,T.lastIndex=F.index+1;F===null?(g["~"]=_,S=-1):(l("MatchData").$new(T,F),S=F.index)}else a=k(a,l("String"),"to_str"),S=v.lastIndexOf(a,o);return S===-1?_:S},-2),H(s,"$rjust",function(a,o){var v=this;if(o==null&&(o=" "),a=k(a,l("Integer"),"to_int"),o=k(o,l("String"),"to_str").$to_s(),R(o["$empty?"]())&&j.$raise(l("ArgumentError"),"zero width padding"),R(a<=v.length))return v;var S=Math.floor(a-v.length),F=Math.floor(S/o.length),T=Array(F+1).join(o),J=S-T.length;return T+o.slice(0,J)+v},-2),H(s,"$rpartition",function(a){var o=this,v,S,F,T;if(a.$$is_regexp){for(S=null,F=P(a);T=F.exec(o),T!==null;)S=T,F.lastIndex=S.index+1;S===null?v=-1:(l("MatchData").$new(F,S),a=S[0],v=S.index)}else a=k(a,l("String"),"to_str"),v=o.lastIndexOf(a);return v===-1?["","",o]:[o.slice(0,v),o.slice(v,v+a.length),o.slice(v+a.length)]}),H(s,"$rstrip",function(){var a=this;return a.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),H(s,"$scan",function i(a,o){var v=i.$$p||_,S,F=this;i.$$p=null,o=y(o),S=K(o,"no_matchdata"),S==null&&(S=!1);var T=[],J=_,ee;for(a.$$is_regexp?a=P(a):(a=k(a,l("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(ee=a.exec(F))!=null;)J=l("MatchData").$new(a,ee,new Map([["no_matchdata",S]])),v===_?ee.length==1?T.push(ee[0]):T.push(J.$captures()):ee.length==1?n.yield1(v,ee[0]):n.yield1(v,J.$captures()),a.lastIndex===ee.index&&(a.lastIndex+=1);return S||(g["~"]=J),v!==_?F:T},-2),H(s,"$singleton_class",function(){var a=this;return n.get_singleton_class(a)}),H(s,"$split",function(a,o){var v=this,S=_;if(g[";"]==null&&(g[";"]=_),v.length===0)return[];if(o===void 0)o=0;else if(o=ie["$coerce_to!"](o,l("Integer"),"to_int"),o===1)return[v];(a===void 0||a===_)&&(a=R(S=g[";"])?S:" ");var F=[],T=v.toString(),J=0,ee,ae=0,le=0,ce,de;if(a.$$is_regexp?a=P(a):(a=k(a,l("String"),"to_str").$to_s(),a===" "&&(a=/\s+/gm,T=T.replace(/^\s+/,""))),F=T.split(a),F.length===1&&F[0]===T)return[F[0]];for(;(ce=F.indexOf(void 0))!==-1;)F.splice(ce,1);if(o===0){for(;F[F.length-1]==="";)F.pop();return F}if(a.$$is_regexp||(a=n.escape_regexp(a),a=new RegExp(a,"gm")),ee=a.exec(T),o<0){if(ee!==null&&ee[0]===""&&a.source.indexOf("(?=")===-1)for(ce=0,de=ee.length;ce<de;ce++)F.push("");return F}if(ee!==null&&ee[0]==="")return le=(ee.length-1)*(o-1)+o,F.splice(le-1,F.length-1,F.slice(le-1).join("")),F;if(o>=F.length)return F;for(;ee!==null&&(ae++,J=a.lastIndex,le+=ee.length,ae+1!==o);)ee=a.exec(T);return F.splice(le,F.length-1,T.slice(J)),F},-1),H(s,"$squeeze",function(a){var o,v,S=this;if(o=Y(arguments),v=o,v.length===0)return S.replace(/(.)\1+/g,"$1");var F=r(v);return F===null?S:S.replace(new RegExp("("+F+")\\1+","g"),"$1")},-1),H(s,"$start_with?",function(a){var o,v,S=this;o=Y(arguments),v=o;for(var F=0,T=v.length;F<T;F++)if(v[F].$$is_regexp){var J=v[F],ee=J.exec(S);if(ee!=null&&ee.index===0)return g["~"]=l("MatchData").$new(J,ee),!0;g["~"]=_}else{var ae=k(v[F],l("String"),"to_str").$to_s();if(S.length>=ae.length&&S.startsWith(ae))return!0}return!1},-1),H(s,"$strip",function(){var a=this;return a.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),H(s,"$sub",function i(a,o){var v=i.$$p||_,S=this;i.$$p=null,a.$$is_regexp||(a=k(a,l("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var F,T=a.exec(S);return T===null?(g["~"]=_,F=S.toString()):(l("MatchData").$new(a,T),o===void 0?(v===_&&j.$raise(l("ArgumentError"),"wrong number of arguments (1 for 2)"),F=S.slice(0,T.index)+v(T[0])+S.slice(T.index+T[0].length)):o.$$is_hash?F=S.slice(0,T.index)+o["$[]"](T[0]).$to_s()+S.slice(T.index+T[0].length):(o=k(o,l("String"),"to_str"),o=o.replace(/([\\]+)([0-9+&`'])/g,function(J,ee,ae){if(ee.length%2===0)return J;switch(ae){case"+":for(var le=T.length-1;le>0;le--)if(T[le]!==void 0)return ee.slice(1)+T[le];return"";case"&":return ee.slice(1)+T[0];case"`":return ee.slice(1)+S.slice(0,T.index);case"'":return ee.slice(1)+S.slice(T.index+T[0].length);default:return ee.slice(1)+(T[ae]||"")}}).replace(/\\\\/g,"\\"),F=S.slice(0,T.index)+o+S.slice(T.index+T[0].length))),F},-2),H(s,"$sum",function(a){var o=this;a==null&&(a=16),a=k(a,l("Integer"),"to_int");for(var v=0,S=o.length,F=0;F<S;F++)v+=o.charCodeAt(F);return a<=0?v:v&Math.pow(2,a)-1},-1),H(s,"$swapcase",function(){var a=this,o=a.replace(/([a-z]+)|([A-Z]+)/g,function(v,S,F){return S?v.toUpperCase():v.toLowerCase()});return o}),H(s,"$to_f",function(){var a=this;if(a.charAt(0)==="_")return 0;var o=parseFloat(a.replace(/_/g,""));return isNaN(o)||o==1/0||o==-1/0?0:o}),H(s,"$to_i",function(a){var o=this;a==null&&(a=10);var v,S=o.toLowerCase(),F=k(a,l("Integer"),"to_int");return(F===1||F<0||F>36)&&j.$raise(l("ArgumentError"),"invalid radix "+F),/^\s*_/.test(S)?0:(S=S.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(T,J,ee,ae){switch(ae.charAt(0)){case"+":case"-":return T;case"0":if(ae.charAt(1)==="x"&&ee==="0x"&&(F===0||F===16))return T}switch(ee){case"0b":if(F===0||F===2)return F=2,J+ae;break;case"0":case"0o":if(F===0||F===8)return F=8,J+ae;break;case"0d":if(F===0||F===10)return F=10,J+ae;break;case"0x":if(F===0||F===16)return F=16,J+ae;break}return T}),v=parseInt(S.replace(/_(?!_)/g,""),F),isNaN(v)?0:v)},-1),H(s,"$to_proc",function i(){i.$$p;var a=this,o=_,v=_,S=_;return i.$$p=null,o=a.valueOf(),v=n.jsid(o),S=te(j,"proc",[],function F(T){var J=F.$$p||_,ee,ae;F.$$p=null,ee=Y(arguments),ae=ee,ae.length===0&&j.$raise(l("ArgumentError"),"no receiver given");var le=ae[0];le==null&&(le=_);var ce=le[v];return ce?ae=ae.slice(1):(ce=le.$method_missing,ae[0]=o),typeof J=="function"&&(ce.$$p=J),ae.length===0?ce.call(le):ce.apply(le,ae)},-1),S.$$source_location=_,S}),H(s,"$to_s",function(){var a=this;return a.toString()}),H(s,"$tr",function(a,o){var v=this;if(a=k(a,l("String"),"to_str").$to_s(),o=k(o,l("String"),"to_str").$to_s(),a.length==0||a===o)return v;var S,F,T,J,ee,ae,le,ce={},de=a.split(""),he=de.length,ve=o.split(""),me=ve.length,be=!1,$e=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),$e=ve[me-1],he-=1);var N=[],D=null;for(F=!1,S=0;S<he;S++)if(J=de[S],D==null)D=J,N.push(J);else if(J==="-")D==="-"?(N.push("-"),N.push("-")):S==he-1?N.push("-"):F=!0;else if(F){for(ee=D.charCodeAt(0),ae=J.charCodeAt(0),ee>ae&&j.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(ee)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=ee+1;T<ae;T++)N.push(String.fromCharCode(T));N.push(J),F=null,D=null}else N.push(J);if(de=N,he=de.length,be)for(S=0;S<he;S++)ce[de[S]]=!0;else{if(me>0){var X=[],Q=null;for(F=!1,S=0;S<me;S++)if(J=ve[S],Q==null)Q=J,X.push(J);else if(J==="-")Q==="-"?(X.push("-"),X.push("-")):S==me-1?X.push("-"):F=!0;else if(F){for(ee=Q.charCodeAt(0),ae=J.charCodeAt(0),ee>ae&&j.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(ee)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=ee+1;T<ae;T++)X.push(String.fromCharCode(T));X.push(J),F=null,Q=null}else X.push(J);ve=X,me=ve.length}var ne=he-me;if(ne>0){var se=me>0?ve[me-1]:"";for(S=0;S<ne;S++)ve.push(se)}for(S=0;S<he;S++)ce[de[S]]=ve[S]}var oe="";for(S=0,le=v.length;S<le;S++){J=v.charAt(S);var fe=ce[J];be?oe+=fe==null?$e:J:oe+=fe??J}return oe}),H(s,"$tr_s",function(a,o){var v=this;if(a=k(a,l("String"),"to_str").$to_s(),o=k(o,l("String"),"to_str").$to_s(),a.length==0)return v;var S,F,T,J,ee,ae,le,ce={},de=a.split(""),he=de.length,ve=o.split(""),me=ve.length,be=!1,$e=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),$e=ve[me-1],he-=1);var N=[],D=null;for(F=!1,S=0;S<he;S++)if(J=de[S],D==null)D=J,N.push(J);else if(J==="-")D==="-"?(N.push("-"),N.push("-")):S==he-1?N.push("-"):F=!0;else if(F){for(ee=D.charCodeAt(0),ae=J.charCodeAt(0),ee>ae&&j.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(ee)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=ee+1;T<ae;T++)N.push(String.fromCharCode(T));N.push(J),F=null,D=null}else N.push(J);if(de=N,he=de.length,be)for(S=0;S<he;S++)ce[de[S]]=!0;else{if(me>0){var X=[],Q=null;for(F=!1,S=0;S<me;S++)if(J=ve[S],D==null)D=J,X.push(J);else if(J==="-")Q==="-"?(X.push("-"),X.push("-")):S==me-1?X.push("-"):F=!0;else if(F){for(ee=D.charCodeAt(0),ae=J.charCodeAt(0),ee>ae&&j.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(ee)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=ee+1;T<ae;T++)X.push(String.fromCharCode(T));X.push(J),F=null,D=null}else X.push(J);ve=X,me=ve.length}var ne=he-me;if(ne>0){var se=me>0?ve[me-1]:"";for(S=0;S<ne;S++)ve.push(se)}for(S=0;S<he;S++)ce[de[S]]=ve[S]}var oe="",fe=null;for(S=0,le=v.length;S<le;S++){J=v.charAt(S);var f=ce[J];be?f==null?fe==null&&(oe+=$e,fe=!0):(oe+=J,fe=null):f!=null?(fe==null||fe!==f)&&(oe+=f,fe=f):(oe+=J,fe=null)}return oe}),H(s,"$upcase",function(){var a=this;return a.toUpperCase()}),H(s,"$upto",function i(a,o){var v=i.$$p||_,S=this;if(i.$$p=null,o==null&&(o=!1),v===_)return S.$enum_for("upto",a,o);var F,T,J=S.toString();if(a=k(a,l("String"),"to_str"),J.length===1&&a.length===1)for(F=J.charCodeAt(0),T=a.charCodeAt(0);F<=T&&!(o&&F===T);)v(String.fromCharCode(F)),F+=1;else if(parseInt(J,10).toString()===J&&parseInt(a,10).toString()===a)for(F=parseInt(J,10),T=parseInt(a,10);F<=T&&!(o&&F===T);)v(F.toString()),F+=1;else for(;J.length<=a.length&&J<=a&&!(o&&J===a);)v(J),J=J.$succ();return S},-2);function r(i){function a(ce){var de="",he,ve=ce.length,me,be,$e,N,D;for(he=0;he<ve;he++)if(me=ce.charAt(he),me==="-"&&he>0&&he<ve-1&&!be){for($e=ce.charCodeAt(he-1),N=ce.charCodeAt(he+1),$e>N&&j.$raise(l("ArgumentError"),'invalid range "'+$e+"-"+N+'" in string transliteration'),D=$e+1;D<N+1;D++)de+=String.fromCharCode(D);be=!0,he++}else be=me==="\\",de+=me;return de}function o(ce,de){if(ce.length===0)return de;var he="",ve,me=ce.length,be;for(ve=0;ve<me;ve++)be=ce.charAt(ve),de.indexOf(be)!==-1&&(he+=be);return he}var v,S,F,T,J,ee,ae="",le="";for(v=0,S=i.length;v<S;v++)F=k(i[v],l("String"),"to_str"),T=F.charAt(0)==="^"&&F.length>1,F=a(T?F.slice(1):F),T?le=o(le,F):ae=o(ae,F);if(ae.length>0&&le.length>0){for(ee="",v=0,S=ae.length;v<S;v++)J=ae.charAt(v),le.indexOf(J)===-1&&(ee+=J);ae=ee,le=""}return ae.length>0?"["+l("Regexp").$escape(ae)+"]":le.length>0?"[^"+l("Regexp").$escape(le)+"]":null}return H(s,"$instance_variables",function(){return[]}),L(s,"$_load",function(a){var o,v,S=this;return o=Y(arguments),v=o,te(S,"new",W(v))},-1),H(s,"$unicode_normalize",function(a){var o=this;return a==null&&(a="nfc"),R(["nfc","nfd","nfkc","nfkd"]["$include?"](a))||j.$raise(l("ArgumentError"),"Invalid normalization form "+a),o.normalize(a.$upcase())},-1),H(s,"$unicode_normalized?",function(a){var o=this;return a==null&&(a="nfc"),o.$unicode_normalize(a)["$=="](o)},-1),H(s,"$unpack",function(a){return j.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),H(s,"$unpack1",function(a){return j.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),H(s,"$freeze",function(){var a=this;return typeof a=="string"||I(a,"$$frozen",!0),a}),H(s,"$-@",function(){var a=this;return typeof a=="string"||a.$$frozen?a:a.encoding.name=="UTF-8"&&a.internal_encoding.name=="UTF-8"?a.toString():a.$dup().$freeze()}),H(s,"$frozen?",function(){var a=this;return typeof a=="string"||a.$$frozen===!0}),m(s,"+@","dup"),m(s,"===","=="),m(s,"byteslice","[]"),m(s,"eql?","=="),m(s,"equal?","==="),m(s,"object_id","__id__"),m(s,"slice","[]"),m(s,"succ","next"),m(s,"to_str","to_s"),m(s,"to_sym","intern"),ie.$pristine(s,"initialize")}("::",String,A),u(A[0],"Symbol",h("String"))};Opal.modules["corelib/enumerable"]=function(n){var k=n.truthy,b=n.coerce_to,P=n.yield1,I=n.yieldX,O=n.deny_frozen_access,V=n.module,C=n.send,Z=n.slice,p=n.to_a,H=n.Opal,ie=n.thrower,L=n.def,Y=n.Kernel,te=n.return_val,W=n.rb_gt,z=n.rb_times,y=n.rb_lt,K=n.eqeq,B=n.rb_plus,j=n.rb_minus,R=n.rb_divide,g=n.rb_le,q=n.lambda,M=n.not,x=n.alias,m=[],u=n.nil,d=n.$$$;return n.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(A,h){var _=V(A,"Enumerable"),l=[_].concat(h),E=n.$r(l);function G(c){return c.length===0&&(c=[u]),c.length>1&&(c=[c]),c}return L(_,"$all?",function c(s){try{var $=ie("return"),t=c.$$p||u,e=this;return c.$$p=null,k(s!==void 0)?C(e,"each",[],function r(i){var a,o,v=u;if(a=Z(arguments),o=a,v=G(o),k(C(s,"public_send",["==="].concat(p(v)))))return u;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):t!==u?C(e,"each",[],function r(i){var a,o;if(a=Z(arguments),o=a,k(n.yieldX(t,p(o))))return u;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):C(e,"each",[],function r(i){var a,o;if(a=Z(arguments),o=a,k(H.$destructure(o)))return u;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),L(_,"$any?",function c(s){try{var $=ie("return"),t=c.$$p||u,e=this;return c.$$p=null,k(s!==void 0)?C(e,"each",[],function r(i){var a,o,v=u;if(a=Z(arguments),o=a,v=G(o),k(C(s,"public_send",["==="].concat(p(v)))))$.$throw(!0,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):t!==u?C(e,"each",[],function r(i){var a,o;if(a=Z(arguments),o=a,k(n.yieldX(t,p(o))))$.$throw(!0,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):C(e,"each",[],function r(i){var a,o;if(a=Z(arguments),o=a,k(H.$destructure(o)))$.$throw(!0,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),!1}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),L(_,"$chunk",function c(){var s=c.$$p||u,$=this;return c.$$p=null,s===u?C($,"to_enum",["chunk"],function t(){var e=t.$$s==null?this:t.$$s;return e.$enumerator_size()},{$$s:$}):C(d("Enumerator"),"new",[],function t(e){var r=t.$$s==null?this:t.$$s;e==null&&(e=u);var i=u,a=[];function o(){a.length>0&&e.$yield(i,a)}r.$each.$$p=function(v){var S=P(s,v);S===u?(o(),a=[],i=u):(i===u||i===S?a.push(v):(o(),a=[v]),i=S)},r.$each(),o()},{$$s:$})}),L(_,"$chunk_while",function c(){var s=c.$$p||u,$=this;return c.$$p=null,s===u&&Y.$raise(d("ArgumentError"),"no block given"),C($,"slice_when",[],function(e,r){return e==null&&(e=u),r==null&&(r=u),n.yieldX(s,[e,r])["$!"]()})}),L(_,"$collect",function c(){var s=c.$$p||u,$=this;if(c.$$p=null,s===u)return C($,"enum_for",["collect"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$});var t=[];return $.$each.$$p=function(){var e=I(s,arguments);t.push(e)},$.$each(),t}),L(_,"$collect_concat",function c(){var s=c.$$p||u,$=this;return c.$$p=null,s===u?C($,"enum_for",["collect_concat"],function t(){var e=t.$$s==null?this:t.$$s;return e.$enumerator_size()},{$$s:$}):C($,"map",[],s.$to_proc()).$flatten(1)}),L(_,"$compact",function(){var s=this;return s.$to_a().$compact()}),L(_,"$count",function c(s){var $=c.$$p||u,t=this,e=u;return c.$$p=null,e=0,s!=null&&$!==u&&t.$warn("warning: given block not used"),k(s!=null)?$=C(Y,"proc",[],function(i){var a,o;return a=Z(arguments),o=a,H.$destructure(o)["$=="](s)},-1):k($["$nil?"]())&&($=C(Y,"proc",[],te(!0))),C(t,"each",[],function(i){var a,o;return a=Z(arguments),o=a,k(I($,o))?e++:u},-1),e},-1),L(_,"$cycle",function c(s){var $=c.$$p||u,t=this;if(c.$$p=null,s==null&&(s=u),$===u)return C(t,"enum_for",["cycle",s],function a(){var o=a.$$s==null?this:a.$$s;return k(s["$nil?"]())?k(o["$respond_to?"]("size"))?d(d("Float"),"INFINITY"):u:(s=H["$coerce_to!"](s,d("Integer"),"to_int"),k(W(s,0))?z(o.$enumerator_size(),s):0)},{$$s:t});if(!k(s["$nil?"]())&&(s=H["$coerce_to!"](s,d("Integer"),"to_int"),k(s<=0)))return u;var e=[],r,i;if(t.$each.$$p=function(){var a=H.$destructure(arguments);P($,a),e.push(a)},t.$each(),e.length===0)return u;if(s===u)for(;;)for(r=0,i=e.length;r<i;r++)P($,e[r]);else for(;s>1;){for(r=0,i=e.length;r<i;r++)P($,e[r]);s--}},-1),L(_,"$detect",function c(s){try{var $=ie("return"),t=c.$$p||u,e=this;return c.$$p=null,t===u?e.$enum_for("detect",s):(C(e,"each",[],function r(i){var a,o,v=u;if(a=Z(arguments),o=a,v=H.$destructure(o),k(n.yield1(t,v)))$.$throw(v,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),s!==void 0?typeof s=="function"?s():s:u)}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),L(_,"$drop",function(s){var $=this;s=b(s,d("Integer"),"to_int"),k(s<0)&&Y.$raise(d("ArgumentError"),"attempt to drop negative size");var t=[],e=0;return $.$each.$$p=function(){s<=e&&t.push(H.$destructure(arguments)),e++},$.$each(),t}),L(_,"$drop_while",function c(){var s=c.$$p||u,$=this;if(c.$$p=null,s===u)return $.$enum_for("drop_while");var t=[],e=!0;return $.$each.$$p=function(){var r=H.$destructure(arguments);if(e){var i=P(s,r);k(i)||(e=!1,t.push(r))}else t.push(r)},$.$each(),t}),L(_,"$each_cons",function c(s){var $=c.$$p||u,t=this;if(c.$$p=null,k(arguments.length!=1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),s=H.$try_convert(s,d("Integer"),"to_int"),k(s<=0)&&Y.$raise(d("ArgumentError"),"invalid size"),$===u)return C(t,"enum_for",["each_cons",s],function r(){var i=r.$$s==null?this:r.$$s,a=u;return a=i.$enumerator_size(),k(a["$nil?"]())?u:K(a,0)||k(y(a,s))?0:B(j(a,s),1)},{$$s:t});var e=[];return t.$each.$$p=function(){var r=H.$destructure(arguments);e.push(r),e.length>s&&e.shift(),e.length==s&&P($,e.slice(0,s))},t.$each(),t}),L(_,"$each_entry",function c(s){var $=c.$$p||u,t,e,r=this;return c.$$p=null,t=Z(arguments),e=t,$===u?C(r,"to_enum",["each_entry"].concat(p(e)),function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var i=H.$destructure(arguments);P($,i)},r.$each.apply(r,e),r)},-1),L(_,"$each_slice",function c(s){var $=c.$$p||u,t=this;if(c.$$p=null,s=b(s,d("Integer"),"to_int"),k(s<=0)&&Y.$raise(d("ArgumentError"),"invalid slice size"),$===u)return C(t,"enum_for",["each_slice",s],function r(){var i=r.$$s==null?this:r.$$s;return k(i["$respond_to?"]("size"))?R(i.$size(),s).$ceil():u},{$$s:t});var e=[];return t.$each.$$p=function(){var r=H.$destructure(arguments);e.push(r),e.length===s&&(P($,e),e=[])},t.$each(),e.length>0&&P($,e),t}),L(_,"$each_with_index",function c(s){var $=c.$$p||u,t,e,r=this;if(c.$$p=null,t=Z(arguments),e=t,$===u)return C(r,"enum_for",["each_with_index"].concat(p(e)),function a(){var o=a.$$s==null?this:a.$$s;return o.$enumerator_size()},{$$s:r});var i=0;return r.$each.$$p=function(){var a=H.$destructure(arguments);$(a,i),i++},r.$each.apply(r,e),r},-1),L(_,"$each_with_object",function c(s){var $=c.$$p||u,t=this;return c.$$p=null,$===u?C(t,"enum_for",["each_with_object",s],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:t}):(t.$each.$$p=function(){var e=H.$destructure(arguments);$(e,s)},t.$each(),s)}),L(_,"$entries",function(s){var $,t,e=this;$=Z(arguments),t=$;var r=[];return e.$each.$$p=function(){r.push(H.$destructure(arguments))},e.$each.apply(e,t),r},-1),L(_,"$filter_map",function c(){var s=c.$$p||u,$=this;return c.$$p=null,s===u?C($,"enum_for",["filter_map"],function t(){var e=t.$$s==null?this:t.$$s;return e.$enumerator_size()},{$$s:$}):C(C($,"map",[],s.$to_proc()),"select",[],"itself".$to_proc())}),L(_,"$find_all",function c(){var s=c.$$p||u,$=this;if(c.$$p=null,s===u)return C($,"enum_for",["find_all"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$});var t=[];return $.$each.$$p=function(){var e=H.$destructure(arguments),r=P(s,e);k(r)&&t.push(e)},$.$each(),t}),L(_,"$find_index",function c(s){try{var $=ie("return"),t=c.$$p||u,e=this,r=u;return c.$$p=null,k(s===void 0&&t===u)?e.$enum_for("find_index"):(s!=null&&t!==u&&e.$warn("warning: given block not used"),r=0,k(s!=null)?C(e,"each",[],function i(a){var o,v;return o=Z(arguments),v=o,K(H.$destructure(v),s)&&$.$throw(r,i.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}):C(e,"each",[],function i(a){var o,v;return o=Z(arguments),v=o,k(n.yieldX(t,p(v)))&&$.$throw(r,i.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}),u)}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),L(_,"$first",function(s){try{var $=ie("return"),t=this,e=u,r=u;return k(s===void 0)?C(t,"each",[],function i(a){a==null&&(a=u),$.$throw(a,i.$$is_lambda)},{$$ret:$}):(e=[],s=b(s,d("Integer"),"to_int"),k(s<0)&&Y.$raise(d("ArgumentError"),"attempt to take negative size"),k(s==0)?[]:(r=0,C(t,"each",[],function i(a){var o,v;if(o=Z(arguments),v=o,e.push(H.$destructure(v)),k(s<=++r))$.$throw(e,i.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),e))}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),L(_,"$grep",function c(s){var $=c.$$p||u,t=this,e=u;return c.$$p=null,e=[],C(t,"each",[],function(i){var a,o,v=u;return a=Z(arguments),o=a,v=G(o),k(C(s,"__send__",["==="].concat(p(v))))?($!==u?(k(W(o.$length(),1))&&(o=[o]),o=n.yieldX($,p(o))):k(g(o.$length(),1))&&(o=o["$[]"](0)),e.$push(o)):u},-1),e}),L(_,"$grep_v",function c(s){var $=c.$$p||u,t=this,e=u;return c.$$p=null,e=[],C(t,"each",[],function(i){var a,o,v=u;return a=Z(arguments),o=a,v=G(o),k(C(s,"__send__",["==="].concat(p(v))))?u:($!==u?(k(W(o.$length(),1))&&(o=[o]),o=n.yieldX($,p(o))):k(g(o.$length(),1))&&(o=o["$[]"](0)),e.$push(o))},-1),e}),L(_,"$group_by",function c(){var s=c.$$p||u,$,t=this,e=u,r=u;return c.$$p=null,s===u?C(t,"enum_for",["group_by"],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:t}):(e=new Map,t.$each.$$p=function(){var i=H.$destructure(arguments),a=P(s,i);(k(r=e["$[]"](a))?r:($=[a,[]],C(e,"[]=",$),$[$.length-1]))["$<<"](i)},t.$each(),e)}),L(_,"$include?",function(s){try{var $=ie("return"),t=this;return C(t,"each",[],function e(r){var i,a;if(i=Z(arguments),a=i,K(H.$destructure(a),s))$.$throw(!0,e.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),!1}catch(e){if(e===$)return e.$v;throw e}finally{$.is_orphan=!0}}),L(_,"$inject",function c(s,$){var t=c.$$p||u,e=this;c.$$p=null;var r=s;return t!==u&&$===void 0?e.$each.$$p=function(){var i=H.$destructure(arguments);if(r===void 0){r=i;return}i=I(t,[r,i]),r=i}:($===void 0&&(d("Symbol")["$==="](s)||Y.$raise(d("TypeError"),""+s.$inspect()+" is not a Symbol"),$=s,r=void 0),e.$each.$$p=function(){var i=H.$destructure(arguments);if(r===void 0){r=i;return}r=r.$__send__($,i)}),e.$each(),r??u},-1),L(_,"$lazy",function(){var s=this;return C(d(d("Enumerator"),"Lazy"),"new",[s,s.$enumerator_size()],function(t,e){var r,i;return t==null&&(t=u),r=Z(arguments,1),i=r,C(t,"yield",p(i))},-2)}),L(_,"$enumerator_size",function(){var s=this;return k(s["$respond_to?"]("size"))?s.$size():u}),L(_,"$max",function c(s){var $=c.$$p||u,t=this;if(c.$$p=null,s===void 0||s===u){var e,r;return t.$each.$$p=function(){var i=H.$destructure(arguments);if(e===void 0){e=i;return}$!==u?r=I($,[i,e]):r=i["$<=>"](e),r===u&&Y.$raise(d("ArgumentError"),"comparison failed"),r>0&&(e=i)},t.$each(),e===void 0?u:e}return s=b(s,d("Integer"),"to_int"),C(t,"sort",[],$.$to_proc()).$reverse().$first(s)},-1),L(_,"$max_by",function c(s){var $=c.$$p||u,t=this;if(c.$$p=null,s==null&&(s=u),!k($))return C(t,"enum_for",["max_by",s],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:t});if(!k(s["$nil?"]()))return C(t,"sort_by",[],$.$to_proc()).$reverse().$take(s);var e,r;return t.$each.$$p=function(){var i=H.$destructure(arguments),a=P($,i);if(e===void 0){e=i,r=a;return}a["$<=>"](r)>0&&(e=i,r=a)},t.$each(),e===void 0?u:e},-1),L(_,"$min",function c(s){var $=c.$$p||u,t=this;if(c.$$p=null,s==null&&(s=u),!k(s["$nil?"]()))return $!==u?C(t,"sort",[],function(i,a){return i==null&&(i=u),a==null&&(a=u),n.yieldX($,[i,a])}).$take(s):t.$sort().$take(s);var e;return $!==u?t.$each.$$p=function(){var r=H.$destructure(arguments);if(e===void 0){e=r;return}var i=$(r,e);i===u&&Y.$raise(d("ArgumentError"),"comparison failed"),i<0&&(e=r)}:t.$each.$$p=function(){var r=H.$destructure(arguments);if(e===void 0){e=r;return}H.$compare(r,e)<0&&(e=r)},t.$each(),e===void 0?u:e},-1),L(_,"$min_by",function c(s){var $=c.$$p||u,t=this;if(c.$$p=null,s==null&&(s=u),!k($))return C(t,"enum_for",["min_by",s],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:t});if(!k(s["$nil?"]()))return C(t,"sort_by",[],$.$to_proc()).$take(s);var e,r;return t.$each.$$p=function(){var i=H.$destructure(arguments),a=P($,i);if(e===void 0){e=i,r=a;return}a["$<=>"](r)<0&&(e=i,r=a)},t.$each(),e===void 0?u:e},-1),L(_,"$minmax",function c(){var s=c.$$p||u,$=this,t=u;c.$$p=null,s=k(t=s)?t:C(Y,"proc",[],function(o,v){return o==null&&(o=u),v==null&&(v=u),o["$<=>"](v)});var e=u,r=u,i=!0;return $.$each.$$p=function(){var a=H.$destructure(arguments);if(i)e=r=a,i=!1;else{var o=s.$call(e,a);o===u?Y.$raise(d("ArgumentError"),"comparison failed"):o>0&&(e=a);var v=s.$call(r,a);v===u?Y.$raise(d("ArgumentError"),"comparison failed"):v<0&&(r=a)}},$.$each(),[e,r]}),L(_,"$minmax_by",function c(){var s=c.$$p||u,$=this;if(c.$$p=null,!k(s))return C($,"enum_for",["minmax_by"],function a(){var o=a.$$s==null?this:a.$$s;return o.$enumerator_size()},{$$s:$});var t=u,e=u,r,i;return $.$each.$$p=function(){var a=H.$destructure(arguments),o=P(s,a);(r===void 0||o["$<=>"](r)<0)&&(t=a,r=o),(i===void 0||o["$<=>"](i)>0)&&(e=a,i=o)},$.$each(),[t,e]}),L(_,"$none?",function c(s){try{var $=ie("return"),t=c.$$p||u,e=this;return c.$$p=null,k(s!==void 0)?C(e,"each",[],function r(i){var a,o,v=u;if(a=Z(arguments),o=a,v=G(o),k(C(s,"public_send",["==="].concat(p(v)))))$.$throw(!1,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):t!==u?C(e,"each",[],function r(i){var a,o;if(a=Z(arguments),o=a,k(n.yieldX(t,p(o))))$.$throw(!1,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):C(e,"each",[],function r(i){var a,o,v=u;if(a=Z(arguments),o=a,v=H.$destructure(o),k(v))$.$throw(!1,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),L(_,"$one?",function c(s){try{var $=ie("return"),t=c.$$p||u,e=this,r=u;return c.$$p=null,r=0,k(s!==void 0)?C(e,"each",[],function i(a){var o,v,S=u;if(o=Z(arguments),v=o,S=G(v),k(C(s,"public_send",["==="].concat(p(S)))))if(r=B(r,1),k(W(r,1)))$.$throw(!1,i.$$is_lambda);else return u;else return u},{$$arity:-1,$$ret:$}):t!==u?C(e,"each",[],function i(a){var o,v;if(o=Z(arguments),v=o,!k(n.yieldX(t,p(v))))return u;if(r=B(r,1),k(W(r,1)))$.$throw(!1,i.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):C(e,"each",[],function i(a){var o,v;if(o=Z(arguments),v=o,!k(H.$destructure(v)))return u;if(r=B(r,1),k(W(r,1)))$.$throw(!1,i.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),r["$=="](1)}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),L(_,"$partition",function c(){var s=c.$$p||u,$=this;if(c.$$p=null,s===u)return C($,"enum_for",["partition"],function r(){var i=r.$$s==null?this:r.$$s;return i.$enumerator_size()},{$$s:$});var t=[],e=[];return $.$each.$$p=function(){var r=H.$destructure(arguments),i=P(s,r);k(i)?t.push(r):e.push(r)},$.$each(),[t,e]}),L(_,"$reject",function c(){var s=c.$$p||u,$=this;if(c.$$p=null,s===u)return C($,"enum_for",["reject"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$});var t=[];return $.$each.$$p=function(){var e=H.$destructure(arguments),r=P(s,e);k(r)||t.push(e)},$.$each(),t}),L(_,"$reverse_each",function c(){var s=c.$$p||u,$=this;if(c.$$p=null,s===u)return C($,"enum_for",["reverse_each"],function r(){var i=r.$$s==null?this:r.$$s;return i.$enumerator_size()},{$$s:$});var t=[];$.$each.$$p=function(){t.push(arguments)},$.$each();for(var e=t.length-1;e>=0;e--)I(s,t[e]);return t}),L(_,"$slice_before",function c(s){var $=c.$$p||u,t=this;return c.$$p=null,k(s===void 0&&$===u)&&Y.$raise(d("ArgumentError"),"both pattern and block are given"),k(s!==void 0&&$!==u||arguments.length>1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),C(d("Enumerator"),"new",[],function e(r){var i=e.$$s==null?this:e.$$s;r==null&&(r=u);var a=[];$!==u?s===void 0?i.$each.$$p=function(){var o=H.$destructure(arguments),v=P($,o);k(v)&&a.length>0&&(r["$<<"](a),a=[]),a.push(o)}:i.$each.$$p=function(){var o=H.$destructure(arguments),v=$(o,s.$dup());k(v)&&a.length>0&&(r["$<<"](a),a=[]),a.push(o)}:i.$each.$$p=function(){var o=H.$destructure(arguments),v=s["$==="](o);k(v)&&a.length>0&&(r["$<<"](a),a=[]),a.push(o)},i.$each(),a.length>0&&r["$<<"](a)},{$$s:t})},-1),L(_,"$slice_after",function c(s){var $=c.$$p||u,t=this;return c.$$p=null,k(s===void 0&&$===u)&&Y.$raise(d("ArgumentError"),"both pattern and block are given"),k(s!==void 0&&$!==u||arguments.length>1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),k(s!==void 0)&&($=C(Y,"proc",[],function(r){return r==null&&(r=u),s["$==="](r)})),C(d("Enumerator"),"new",[],function e(r){var i=e.$$s==null?this:e.$$s;r==null&&(r=u);var a;i.$each.$$p=function(){var o=H.$destructure(arguments),v=P($,o);a==null&&(a=[]),k(v)?(a.push(o),r.$yield(a),a=null):a.push(o)},i.$each(),a!=null&&r.$yield(a)},{$$s:t})},-1),L(_,"$slice_when",function c(){var s=c.$$p||u,$=this;return c.$$p=null,s===u&&Y.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1)"),C(d("Enumerator"),"new",[],function t(e){var r=t.$$s==null?this:t.$$s;e==null&&(e=u);var i=u,a=u;r.$each_cons.$$p=function(){var o=H.$destructure(arguments),v=o[0],S=o[1],F=I(s,[v,S]);a=S,i===u&&(i=[]),k(F)?(i.push(v),e.$yield(i),i=[]):i.push(v)},r.$each_cons(2),i!==u&&(i.push(a),e.$yield(i))},{$$s:$})}),L(_,"$sort",function c(){var s=c.$$p||u,$=this,t=u;return c.$$p=null,t=$.$to_a(),s===u&&(s=q(function(r,i){return r==null&&(r=u),i==null&&(i=u),r["$<=>"](i)})),C(t,"sort",[],s.$to_proc())}),L(_,"$sort_by",function c(){var s=c.$$p||u,$=this,t=u;return c.$$p=null,s===u?C($,"enum_for",["sort_by"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$}):(t=C($,"map",[],function(){var r=u;return r=H.$destructure(arguments),[n.yield1(s,r),r]}),C(t,"sort!",[],function(r,i){return r==null&&(r=u),i==null&&(i=u),r[0]["$<=>"](i[0])}),C(t,"map!",[],function(r){return r==null&&(r=u),r[1]}))}),L(_,"$sum",function c(s){var $=c.$$p||u,t=this,e=u,r=u;return c.$$p=null,s==null&&(s=0),e=s,r=0,C(t,"each",[],function(a){var o,v,S=u,F=u,T=u;return o=Z(arguments),v=o,S=$!==u?n.yieldX($,p(v)):H.$destructure(v),M([d(d("Float"),"INFINITY"),d(d("Float"),"INFINITY")["$-@"]()]["$include?"](S))&&k(S["$respond_to?"]("-"))?(F=j(S,r),T=B(e,F),r=j(j(T,e),F),e=T):e=B(e,S)},-1),e},-1),L(_,"$take",function(s){var $=this;return $.$first(s)}),L(_,"$take_while",function c(){try{var s=ie("return"),$=c.$$p||u,t=this,e=u;return c.$$p=null,k($)?(e=[],C(t,"each",[],function r(i){var a,o,v=u;return a=Z(arguments),o=a,v=H.$destructure(o),k(n.yield1($,v))||s.$throw(e,r.$$is_lambda),e.push(v)},{$$arity:-1,$$ret:s})):t.$enum_for("take_while")}catch(r){if(r===s)return r.$v;throw r}finally{s.is_orphan=!0}}),L(_,"$uniq",function c(){var s=c.$$p||u,$=this,t=u;return c.$$p=null,t=new Map,C($,"each",[],function(r){var i,a,o,v=u,S=u;return i=Z(arguments),a=i,v=H.$destructure(a),S=s!==u?n.yield1(s,v):v,k(t["$key?"](S))?u:(o=[S,v],C(t,"[]=",o),o[o.length-1])},-1),t.$values()}),L(_,"$tally",function(s){var $=this,t=u;return s&&s!==u&&O(s),t=C(C($,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),k(s)?(C(t,"each",[],function(r,i){var a;return r==null&&(r=u),i==null&&(i=u),a=[r,B(s.$fetch(r,0),i)],C(s,"[]=",a),a[a.length-1]}),s):t},-1),L(_,"$to_h",function c(s){var $=c.$$p||u,t,e,r=this;if(c.$$p=null,t=Z(arguments),e=t,$!==u)return C(C(r,"map",[],$.$to_proc()),"to_h",p(e));var i=new Map;return r.$each.$$p=function(){var a=H.$destructure(arguments),o=H["$coerce_to?"](a,d("Array"),"to_ary"),v,S;o.$$is_array||Y.$raise(d("TypeError"),"wrong element type "+a.$class()+" (expected array)"),o.length!==2&&Y.$raise(d("ArgumentError"),"element has wrong array length (expected 2, was "+o.$length()+")"),v=o[0],S=o[1],n.hash_put(i,v,S)},r.$each.apply(r,e),i},-1),L(_,"$to_set",function c(s,$){var t=c.$$p||u,e,r,i,a=this;return c.$$p=null,e=Z(arguments),e.length>0&&(r=e.shift()),r==null&&(r=E("Set")),i=e,C(r,"new",[a].concat(p(i)),t.$to_proc())},-1),L(_,"$zip",function c(s){c.$$p;var $,t,e=this;return c.$$p=null,$=Z(arguments),t=$,C(e.$to_a(),"zip",p(t))},-1),x(_,"find","detect"),x(_,"filter","find_all"),x(_,"flat_map","collect_concat"),x(_,"map","collect"),x(_,"member?","include?"),x(_,"reduce","inject"),x(_,"select","find_all"),x(_,"to_a","entries")}("::",m)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(n){var k=n.klass,b=n.truthy,P=n.to_a,I=n.eqeq,O=n.Kernel,V=n.def,C=n.rb_gt,Z=n.rb_lt,p=n.rb_le,H=n.rb_ge,ie=n.rb_plus,L=n.rb_minus,Y=n.eqeqeq,te=n.not,W=n.rb_times,z=n.rb_divide,y=n.alias,K=[],B=n.nil,j=n.$$$;return n.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(R,g,q){var M=k(R,g,"Enumerator"),x=[M].concat(q);return function(m,u,d){var A=k(m,u,"ArithmeticSequence"),h=[A].concat(d),_=n.$r(h),l=A.$$prototype;l.step_arg2=l.receiver_num=l.step_arg1=l.step=l.range=l.topfx=l.bypfx=l.creation_method=l.skipped_arg=B,n.prop(A.$$prototype,"$$is_arithmetic_seq",!0);var E=1/0;return V(A,"$initialize",function(c,s,$){var t,e=this,r=B;return $==null&&($="step"),e.creation_method=$,b(c["$is_a?"](j("Array")))?(t=[].concat(P(c)),e.step_arg1=t[0]==null?B:t[0],e.step_arg2=t[1]==null?B:t[1],e.topfx=t[2]==null?B:t[2],e.bypfx=t[3]==null?B:t[3],e.receiver_num=s,e.step=1,e.range=b(e.step_arg2)?(e.step=e.step_arg2,n.Range.$new(e.receiver_num,e.step_arg1,!1)):b(e.step_arg1)?n.Range.$new(e.receiver_num,e.step_arg1,!1):n.Range.$new(e.receiver_num,B,!1)):(b(s)||(e.skipped_arg=!0),t=[c,b(r=s)?r:1],e.range=t[0],e.step=t[1]),e.object=e,I(e.step,0)&&O.$raise(_("ArgumentError"),"step can't be 0"),b(e.step["$respond_to?"]("to_int"))?B:O.$raise(_("ArgumentError"),"no implicit conversion of "+e.step.$class()+" into Integer")},-2),A.$attr_reader("step"),V(A,"$begin",function(){var c=this;return c.range.$begin()}),V(A,"$end",function(){var c=this;return c.range.$end()}),V(A,"$exclude_end?",function(){var c=this;return c.range["$exclude_end?"]()}),V(A,"$_lesser_than_end?",function(c){var s=this,$=B,t=B;return $=b(t=s.$end())?t:E,b(C(s.$step(),0))?b(s["$exclude_end?"]())?Z(c,$):p(c,$):b(s["$exclude_end?"]())?C(c,$):H(c,$)}),V(A,"$_greater_than_begin?",function(c){var s=this,$=B,t=B;return $=b(t=s.$begin())?t:E["$-@"](),b(C(s.$step(),0))?C(c,$):Z(c,$)}),V(A,"$first",function(c){var s=this,$=B,t=B,e=B;if($=b(t=s.$begin())?t:E["$-@"](),!b(c))return b(s["$_lesser_than_end?"]($))?$:B;for(e=[];b(b(t=s["$_lesser_than_end?"]($))?C(c,0):t);)e["$<<"]($),$=ie($,s.$step()),c=L(c,1);return e},-1),V(A,"$each",function G(){var c=G.$$p||B,s=this,$=B,t=B;if(G.$$p=null,c===B)return s;for(Y(B,$=s.$begin())&&O.$raise(_("TypeError"),"nil can't be coerced into Integer"),t=b($=s.$begin())?$:E["$-@"]();b(s["$_lesser_than_end?"](t));)n.yield1(c,t),t=ie(t,s.$step());return s}),V(A,"$last",function(c){var s=this,$=B,t=B,e=B;if(Y(E,$=s.$end())||Y(E["$-@"](),$)?O.$raise(j("FloatDomainError"),s.$end()):Y(B,$)&&O.$raise(j("RangeError"),"cannot get the last element of endless arithmetic sequence"),t=L(s.$end(),L(s.$end(),s.$begin())["$%"](s.$step())),b(s["$_lesser_than_end?"](t))||(t=L(t,s.$step())),!b(c))return b(s["$_greater_than_begin?"](t))?t:B;for(e=[];b(b($=s["$_greater_than_begin?"](t))?C(c,0):$);)e["$<<"](t),t=L(t,s.$step()),c=L(c,1);return e.$reverse()},-1),V(A,"$size",function(){var c=this,s=B,$=B;return s=b(C(c.$step(),0))?1:-1,te(c["$_lesser_than_end?"](c.$begin()))?0:b([E["$-@"](),E]["$include?"](c.$step()))?1:b([W(E["$-@"](),s),B]["$include?"](c.$begin()))||b([W(E,s),B]["$include?"](c.$end()))?E:($=L(c.$end(),L(c.$end(),c.$begin())["$%"](c.$step())),b(c["$_lesser_than_end?"]($))||($=L($,c.$step())),ie(z(L($,c.$begin()),c.$step()).$abs().$to_i(),1))}),V(A,"$==",function(c){var s=this,$=B,t=B,e=B,r=B;return b($=b(t=b(e=b(r=s.$class()["$=="](c.$class()))?s.$begin()["$=="](c.$begin()):r)?s.$end()["$=="](c.$end()):e)?s.$step()["$=="](c.$step()):t)?s["$exclude_end?"]()["$=="](c["$exclude_end?"]()):$}),V(A,"$hash",function(){var c=this;return[_("ArithmeticSequence"),c.$begin(),c.$end(),c.$step(),c["$exclude_end?"]()].$hash()}),V(A,"$inspect",function(){var c=this,s=B;return b(c.receiver_num)?(s=b(c.step_arg2)?"("+c.topfx+c.step_arg1.$inspect()+", "+c.bypfx+c.step_arg2.$inspect()+")":b(c.step_arg1)?"("+c.topfx+c.step_arg1.$inspect()+")":B,"("+c.receiver_num.$inspect()+"."+c.creation_method+s+")"):(s=b(c.skipped_arg)?B:"("+c.step+")","(("+c.range.$inspect()+")."+c.creation_method+s+")")}),y(A,"===","=="),y(A,"eql?","==")}(M,M,x)}("::",null,K)};Opal.modules["corelib/enumerator/chain"]=function(n){var k=n.deny_frozen_access,b=n.klass,P=n.slice,I=n.def,O=n.send,V=n.to_a,C=n.truthy,Z=n.rb_plus,p=n.thrower,H=n.nil,ie=n.$$$;return n.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(L,Y){var te=b(L,Y,"Enumerator");return function(W,z){var y=b(W,z,"Chain"),K=y.$$prototype;return K.enums=K.iterated=H,I(y,"$initialize",function(j){var R,g,q=this;return R=P(arguments),g=R,k(q),q.enums=g,q.iterated=[],q.object=q},-1),I(y,"$each",function B(j){var R=B.$$p||H,g,q,M=this;return B.$$p=null,g=P(arguments),q=g,R===H?O(M,"to_enum",["each"].concat(V(q)),function x(){var m=x.$$s==null?this:x.$$s;return m.$size()},{$$s:M}):(O(M.enums,"each",[],function x(m){var u=x.$$s==null?this:x.$$s;return u.iterated==null&&(u.iterated=H),m==null&&(m=H),u.iterated["$<<"](m),O(m,"each",V(q),R.$to_proc())},{$$s:M}),M)},-1),I(y,"$size",function(j){try{var R=p("return"),g,q,M=this,x=H;return g=P(arguments),q=g,x=0,O(M.enums,"each",[],function m(u){var d=H;return u==null&&(u=H),d=O(u,"size",V(q)),C([H,ie(ie("Float"),"INFINITY")]["$include?"](d))&&R.$throw(d,m.$$is_lambda),x=Z(x,d)},{$$ret:R}),x}catch(m){if(m===R)return m.$v;throw m}finally{R.is_orphan=!0}},-1),I(y,"$rewind",function(){var j=this;return O(j.iterated,"reverse_each",[],function(g){return g==null&&(g=H),C(g["$respond_to?"]("rewind"))?g.$rewind():H}),j.iterated=[],j}),I(y,"$inspect",function(){var j=this;return"#<Enumerator::Chain: "+j.enums.$inspect()+">"})}(te,te)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(n){var k=n.deny_frozen_access,b=n.klass,P=n.truthy,I=n.Kernel,O=n.def,V=n.slice,C=n.send,Z=[],p=n.nil,H=n.$$$;return n.add_stubs("include,raise,new,to_proc"),function(ie,L,Y){var te=b(ie,L,"Enumerator"),W=[te].concat(Y);return function(z,y,K){var B=b(z,y,"Generator"),j=[B].concat(K),R=n.$r(j),g=B.$$prototype;return g.block=p,B.$include(H("Enumerable")),O(B,"$initialize",function q(){var M=q.$$p||p,x=this;return q.$$p=null,k(x),P(M)||I.$raise(H("LocalJumpError"),"no block given"),x.block=M}),O(B,"$each",function q(M){var x=q.$$p||p,m,u,d=this,A=p;q.$$p=null,m=V(arguments),u=m,A=C(R("Yielder"),"new",[],x.$to_proc());try{u.unshift(A),n.yieldX(d.block,u)}catch(h){if(h&&h.$thrower_type=="breaker")return h.$v;throw h}return d},-1)}(W[0],null,W)}(Z[0],null,Z)};Opal.modules["corelib/enumerator/lazy"]=function(n){var k=n.truthy,b=n.coerce_to,P=n.yield1,I=n.yieldX,O=n.deny_frozen_access,V=n.klass,C=n.slice,Z=n.send2,p=n.find_super,H=n.to_a,ie=n.defs,L=n.Kernel,Y=n.send,te=n.def,W=n.return_self,z=n.Opal,y=n.rb_lt,K=n.eqeqeq,B=n.rb_plus,j=n.alias,R=[],g=n.nil,q=n.$$$;return n.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(M,x,m){var u=V(M,x,"Enumerator"),d=[u].concat(m);return function(A,h,_){var l=V(A,h,"Lazy"),E=[l].concat(_),G=n.$r(E),c=l.$$prototype;return c.enumerator=g,V(l,q("Exception"),"StopLazyError"),ie(l,"$for",function s($,t){var e,r,i=s.$$p||g,a=this,o=g;return s.$$p=null,e=C(arguments,1),r=e,o=Z(a,p(a,"for",s,!1,!0),"for",[$].concat(H(r)),i),o.enumerator=$,o},-2),te(l,"$initialize",function s($,t){var e=s.$$p||g,r=this;return s.$$p=null,t==null&&(t=g),O(r),e===g&&L.$raise(q("ArgumentError"),"tried to call lazy new without a block"),r.enumerator=$,Z(r,p(r,"initialize",s,!1,!0),"initialize",[t],function(a,o){var v,S;a==null&&(a=g),v=C(arguments,1),S=v;try{return Y($,"each",H(S),function(T){var J,ee;J=C(arguments),ee=J,ee.unshift(a),I(e,ee)},-1)}catch(F){if(n.rescue(F,[G("StopLazyError")]))try{return g}finally{n.pop_exception(F)}else throw F}},-2)},-2),te(l,"$lazy",W),te(l,"$collect",function s(){var $=s.$$p||g,t=this;return s.$$p=null,k($)||L.$raise(q("ArgumentError"),"tried to call lazy map without a block"),Y(G("Lazy"),"new",[t,t.$enumerator_size()],function(r,i){var a,o;r==null&&(r=g),a=C(arguments,1),o=a;var v=I($,o);r.$yield(v)},-2)}),te(l,"$collect_concat",function s(){var $=s.$$p||g,t=this;return s.$$p=null,k($)||L.$raise(q("ArgumentError"),"tried to call lazy map without a block"),Y(G("Lazy"),"new",[t,g],function(r,i){var a,o;r==null&&(r=g),a=C(arguments,1),o=a;var v=I($,o);if(v["$respond_to?"]("force")&&v["$respond_to?"]("each"))Y(v,"each",[],function(T){return T==null&&(T=g),r.$yield(T)});else{var S=z.$try_convert(v,q("Array"),"to_ary");S===g?r.$yield(v):Y(v,"each",[],function(T){return T==null&&(T=g),r.$yield(T)})}},-2)}),te(l,"$drop",function($){var t=this,e=g,r=g,i=g;return $=b($,q("Integer"),"to_int"),k(y($,0))&&L.$raise(q("ArgumentError"),"attempt to drop negative size"),e=t.$enumerator_size(),r=K(q("Integer"),e)&&k(y($,e))?$:e,i=0,Y(G("Lazy"),"new",[t,r],function(o,v){var S,F;return o==null&&(o=g),S=C(arguments,1),F=S,k(y(i,$))?i=B(i,1):Y(o,"yield",H(F))},-2)}),te(l,"$drop_while",function s(){var $=s.$$p||g,t=this,e=g;return s.$$p=null,k($)||L.$raise(q("ArgumentError"),"tried to call lazy drop_while without a block"),e=!0,Y(G("Lazy"),"new",[t,g],function(i,a){var o,v;if(i==null&&(i=g),o=C(arguments,1),v=o,k(e)){var S=I($,v);k(S)||(e=!1,Y(i,"yield",H(v)))}else return Y(i,"yield",H(v))},-2)}),te(l,"$enum_for",function s($,t){var e=s.$$p||g,r,i,a,o=this;return s.$$p=null,r=C(arguments),r.length>0&&(i=r.shift()),i==null&&(i="each"),a=r,Y(o.$class(),"for",[o,i].concat(H(a)),e.$to_proc())},-1),te(l,"$find_all",function s(){var $=s.$$p||g,t=this;return s.$$p=null,k($)||L.$raise(q("ArgumentError"),"tried to call lazy select without a block"),Y(G("Lazy"),"new",[t,g],function(r,i){var a,o;r==null&&(r=g),a=C(arguments,1),o=a;var v=I($,o);k(v)&&Y(r,"yield",H(o))},-2)}),te(l,"$grep",function s($){var t=s.$$p||g,e=this;return s.$$p=null,k(t)?Y(G("Lazy"),"new",[e,g],function(i,a){var o,v;i==null&&(i=g),o=C(arguments,1),v=o;var S=z.$destructure(v),F=$["$==="](S);k(F)&&(F=P(t,S),i.$yield(P(t,S)))},-2):Y(G("Lazy"),"new",[e,g],function(i,a){var o,v;i==null&&(i=g),o=C(arguments,1),v=o;var S=z.$destructure(v),F=$["$==="](S);k(F)&&i.$yield(S)},-2)}),te(l,"$reject",function s(){var $=s.$$p||g,t=this;return s.$$p=null,k($)||L.$raise(q("ArgumentError"),"tried to call lazy reject without a block"),Y(G("Lazy"),"new",[t,g],function(r,i){var a,o;r==null&&(r=g),a=C(arguments,1),o=a;var v=I($,o);k(v)||Y(r,"yield",H(o))},-2)}),te(l,"$take",function($){var t=this,e=g,r=g,i=g;return $=b($,q("Integer"),"to_int"),k(y($,0))&&L.$raise(q("ArgumentError"),"attempt to take negative size"),e=t.$enumerator_size(),r=K(q("Integer"),e)&&k(y($,e))?$:e,i=0,Y(G("Lazy"),"new",[t,r],function(o,v){var S,F;return o==null&&(o=g),S=C(arguments,1),F=S,k(y(i,$))?(Y(o,"yield",H(F)),i=B(i,1)):L.$raise(G("StopLazyError"))},-2)}),te(l,"$take_while",function s(){var $=s.$$p||g,t=this;return s.$$p=null,k($)||L.$raise(q("ArgumentError"),"tried to call lazy take_while without a block"),Y(G("Lazy"),"new",[t,g],function(r,i){var a,o;r==null&&(r=g),a=C(arguments,1),o=a;var v=I($,o);k(v)?Y(r,"yield",H(o)):L.$raise(G("StopLazyError"))},-2)}),te(l,"$inspect",function(){var $=this;return"#<"+$.$class()+": "+$.enumerator.$inspect()+">"}),j(l,"force","to_a"),j(l,"filter","find_all"),j(l,"flat_map","collect_concat"),j(l,"map","collect"),j(l,"select","find_all"),j(l,"to_enum","enum_for")}(u,u,d)}("::",null,R)};Opal.modules["corelib/enumerator/yielder"]=function(n){var k=n.klass,b=n.def,P=n.slice,I=n.send,O=n.to_a,V=[],C=n.nil;return n.add_stubs("yield,proc"),function(Z,p,H){var ie=k(Z,p,"Enumerator"),L=[ie].concat(H);return function(Y,te){var W=k(Y,te,"Yielder"),z=W.$$prototype;return z.block=C,b(W,"$initialize",function y(){var K=y.$$p||C,B=this;return y.$$p=null,B.block=K,B}),b(W,"$yield",function(K){var B,j,R=this;B=P(arguments),j=B;var g=n.yieldX(R.block,j);if(g&&g.$thrower_type=="break")throw g;return g},-1),b(W,"$<<",function(K){var B=this;return B.$yield(K),B}),b(W,"$to_proc",function(){var K=this;return I(K,"proc",[],function B(j){var R,g,q=B.$$s==null?this:B.$$s;return R=P(arguments),g=R,I(q,"yield",O(g))},{$$arity:-1,$$s:K})})}(L[0],null)}(V[0],null,V)};Opal.modules["corelib/enumerator"]=function(n){var k=n.slice,b=n.coerce_to,P=n.deny_frozen_access,I=n.klass,O=n.defs,V=n.truthy,C=n.send,Z=n.not,p=n.def,H=n.rb_plus,ie=n.to_a,L=n.Opal,Y=n.send2,te=n.find_super,W=n.rb_ge,z=n.Kernel,y=n.rb_le,K=n.alias,B=n.top,j=[],R=n.nil,g=n.$$$;return n.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),B.$require("corelib/enumerable"),function(q,M,x){var m=I(q,M,"Enumerator"),u=[m].concat(x),d=n.$r(u),A=m.$$prototype;return A.size=A.args=A.object=A.method=A.values=A.cursor=R,m.$include(g("Enumerable")),m.$$prototype.$$is_enumerator=!0,O(m,"$for",function h(_,l,E){var G=h.$$p||R,c,s,$,t=this;h.$$p=null,c=k(arguments,1),c.length>0&&(s=c.shift()),s==null&&(s="each"),$=c;var e=t.$allocate();return e.object=_,e.size=G,e.method=s,e.args=$,e.cursor=0,e},-2),p(m,"$initialize",function h(_){var l=h.$$p||R,E=this;return h.$$p=null,k(arguments),P(E),E.cursor=0,V(l)?(E.object=C(d("Generator"),"new",[],l.$to_proc()),E.method="each",E.args=[],E.size=arguments[0]||R,V(E.size)&&Z(E.size["$respond_to?"]("call"))?E.size=b(E.size,g("Integer"),"to_int"):R):(E.object=arguments[0],E.method=arguments[1]||"each",E.args=k(arguments,2),E.size=R)},-1),p(m,"$each",function h(_){var l=h.$$p||R,E,G,c=this;return h.$$p=null,E=k(arguments),G=E,V(l["$nil?"]())&&V(G["$empty?"]())?c:(G=H(c.args,G),V(l["$nil?"]())?C(c.$class(),"new",[c.object,c.method].concat(ie(G))):C(c.object,"__send__",[c.method].concat(ie(G)),l.$to_proc()))},-1),p(m,"$size",function(){var _=this;return V(_.size["$respond_to?"]("call"))?C(_.size,"call",ie(_.args)):_.size}),p(m,"$with_index",function h(_){var l=h.$$p||R,E=this;if(h.$$p=null,_==null&&(_=0),_=V(_)?b(_,g("Integer"),"to_int"):0,!V(l))return C(E,"enum_for",["with_index",_],function c(){var s=c.$$s==null?this:c.$$s;return s.$size()},{$$s:E});var G=_;return E.$each.$$p=function(){var c=L.$destructure(arguments),s=l(c,G);return G++,s},E.$each()},-1),p(m,"$each_with_index",function h(){var _=h.$$p||R,l=this;return h.$$p=null,_===R?C(l,"enum_for",["each_with_index"],function E(){var G=E.$$s==null?this:E.$$s;return G.$size()},{$$s:l}):(Y(l,te(l,"each_with_index",h,!1,!0),"each_with_index",[],_),l.object)}),p(m,"$rewind",function(){var _=this;return _.cursor=0,_}),p(m,"$peek_values",function(){var _=this,l=R;return _.values=V(l=_.values)?l:C(_,"map",[],function(G){var c,s;return c=k(arguments),s=c,s},-1),V(W(_.cursor,_.values.$length()))&&z.$raise(g("StopIteration"),"iteration reached an end"),_.values["$[]"](_.cursor)}),p(m,"$peek",function(){var _=this,l=R;return l=_.$peek_values(),V(y(l.$length(),1))?l["$[]"](0):l}),p(m,"$next_values",function(){var _=this,l=R;return l=_.$peek_values(),_.cursor=H(_.cursor,1),l}),p(m,"$next",function(){var _=this,l=R;return l=_.$next_values(),V(y(l.$length(),1))?l["$[]"](0):l}),p(m,"$feed",function(_){var l=this;return l.$raise(d("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),p(m,"$+",function(_){var l=this;return g(g("Enumerator"),"Chain").$new(l,_)}),p(m,"$inspect",function(){var _=this,l=R;return l="#<"+_.$class()+": "+_.object.$inspect()+":"+_.method,V(_.args["$any?"]())&&(l=H(l,"("+_.args.$inspect()["$[]"](g("Range").$new(1,-2))+")")),H(l,">")}),K(m,"with_object","each_with_object"),m.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),m.$autoload("Chain","corelib/enumerator/chain"),m.$autoload("Generator","corelib/enumerator/generator"),m.$autoload("Lazy","corelib/enumerator/lazy"),m.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,j)};Opal.modules["corelib/numeric"]=function(n){var k=n.klass,b=n.truthy,P=n.Kernel,I=n.def,O=n.to_ary,V=n.return_self,C=n.rb_minus,Z=n.rb_times,p=n.rb_lt,H=n.eqeq,ie=n.rb_divide,L=n.return_val,Y=n.Opal,te=n.slice,W=n.extract_kwargs,z=n.ensure_kwargs,y=n.hash_get,K=n.not,B=n.send,j=n.rb_ge,R=n.rb_le,g=n.rb_plus,q=n.rb_gt,M=n.alias,x=n.top,m=n.nil,u=n.$$$;return n.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),x.$require("corelib/comparable"),function(d,A){var h=k(d,A,"Numeric");return h.$include(u("Comparable")),I(h,"$coerce",function(l){var E=this;return b(l["$instance_of?"](E.$class()))?[l,E]:[P.$Float(l),P.$Float(E)]}),I(h,"$__coerced__",function(l,E){var G,c,s=this,$=m,t=m;if(b(E["$respond_to?"]("coerce")))return c=E.$coerce(s),G=O(c),$=G[0]==null?m:G[0],t=G[1]==null?m:G[1],$.$__send__(l,t);switch(l.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return P.$raise(u("TypeError"),""+E.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return P.$raise(u("ArgumentError"),"comparison of "+s.$class()+" with "+E.$class()+" failed");default:return m}}),I(h,"$<=>",function(l){var E=this;return b(E["$equal?"](l))?0:m}),I(h,"$+@",V),I(h,"$-@",function(){var l=this;return C(0,l)}),I(h,"$%",function(l){var E=this;return C(E,Z(l,E.$div(l)))}),I(h,"$abs",function(){var l=this;return b(p(l,0))?l["$-@"]():l}),I(h,"$abs2",function(){var l=this;return Z(l,l)}),I(h,"$angle",function(){var l=this;return b(p(l,0))?u(u("Math"),"PI"):0}),I(h,"$ceil",function(l){var E=this;return l==null&&(l=0),E.$to_f().$ceil(l)},-1),I(h,"$conj",V),I(h,"$denominator",function(){var l=this;return l.$to_r().$denominator()}),I(h,"$div",function(l){var E=this;return H(l,0)&&P.$raise(u("ZeroDivisionError"),"divided by o"),ie(E,l).$floor()}),I(h,"$divmod",function(l){var E=this;return[E.$div(l),E["$%"](l)]}),I(h,"$fdiv",function(l){var E=this;return ie(E.$to_f(),l)}),I(h,"$floor",function(l){var E=this;return l==null&&(l=0),E.$to_f().$floor(l)},-1),I(h,"$i",function(){var l=this;return P.$Complex(0,l)}),I(h,"$imag",L(0)),I(h,"$integer?",L(!1)),I(h,"$nonzero?",function(){var l=this;return b(l["$zero?"]())?m:l}),I(h,"$numerator",function(){var l=this;return l.$to_r().$numerator()}),I(h,"$polar",function(){var l=this;return[l.$abs(),l.$arg()]}),I(h,"$quo",function(l){var E=this;return ie(Y["$coerce_to!"](E,u("Rational"),"to_r"),l)}),I(h,"$real",V),I(h,"$real?",L(!0)),I(h,"$rect",function(){var l=this;return[l,0]}),I(h,"$round",function(l){var E=this;return E.$to_f().$round(l)},-1),I(h,"$step",function _(l,E,G){var c=_.$$p||m,s,$,t,e,r,i,a=this,o=m;_.$$p=null,s=te(arguments),$=W(s),$=z($),s.length>0&&(t=s.shift()),s.length>0&&(e=s.shift()),r=y($,"to"),i=y($,"by"),t!==void 0&&r!==void 0&&P.$raise(u("ArgumentError"),"to is given twice"),e!==void 0&&i!==void 0&&P.$raise(u("ArgumentError"),"step is given twice"),r!==void 0&&(t=r),i!==void 0&&(e=i),t===void 0&&(t=m);function v(){e===m&&P.$raise(u("TypeError"),"step must be numeric"),e!=null&&e["$=="](0)&&P.$raise(u("ArgumentError"),"step can't be 0"),(e===m||e==null)&&(e=1);var he=e["$<=>"](0);he===m&&P.$raise(u("ArgumentError"),"0 can't be coerced into "+e.$class()),(t===m||t==null)&&(t=he>0?u(u("Float"),"INFINITY"):u(u("Float"),"INFINITY")["$-@"]()),Y.$compare(a,t)}function S(){if(e>0&&a>t||e<0&&a<t)return 0;if(e===1/0||e===-1/0)return 1;var he=Math.abs,ve=Math.floor,me=(he(a)+he(t)+he(t-a))/he(e)*u(u("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((t-a)/e+me)+1)}function F(){if(v(),e===0)return 1/0;if(e%1!==0)return S();if(e>0&&a>t||e<0&&a<t)return 0;var he=Math.ceil,ve=Math.abs,me=ve(a-t)+1,be=ve(e);return he(me/be)}if(c===m)return(K(t)||b(t["$is_a?"](u("Numeric"))))&&(K(e)||b(e["$is_a?"](u("Numeric"))))?u(u("Enumerator"),"ArithmeticSequence").$new([t,e,b(r)?"to: ":m,b(i)?"by: ":m],a):B(a,"enum_for",["step",t,e],F.$to_proc());v();var T=e["$negative?"](),J=e["$=="](0)||t===1/0&&!T||t===-1/0&&T;if(a.$$is_number&&e.$$is_number&&t.$$is_number)if(a%1===0&&(J||t%1===0)&&e%1===0){var ee=a;if(J)for(;;ee+=e)c(ee);else if(T)for(;ee>=t;ee+=e)c(ee);else for(;ee<=t;ee+=e)c(ee);return a}else{var ae=a.$to_f().valueOf();e=e.$to_f().valueOf(),t=t.$to_f().valueOf();var le=S();if(!isFinite(e))le!==0&&c(ae);else if(e===0)for(;;)c(ae);else for(var ce=0;ce<le;ce++){var de=ce*e+a;(e>=0?t<de:t>de)&&(de=t),c(de)}return a}for(o=a;b(T?j(o,t):R(o,t));)n.yield1(c,o),o=g(o,e)},-1),I(h,"$to_c",function(){var l=this;return P.$Complex(l,0)}),I(h,"$to_int",function(){var l=this;return l.$to_i()}),I(h,"$truncate",function(l){var E=this;return l==null&&(l=0),E.$to_f().$truncate(l)},-1),I(h,"$zero?",function(){var l=this;return l["$=="](0)}),I(h,"$positive?",function(){var l=this;return q(l,0)}),I(h,"$negative?",function(){var l=this;return p(l,0)}),I(h,"$dup",V),I(h,"$clone",function(l){var E=this;return l=z(l),y(l,"freeze"),E},-1),I(h,"$finite?",L(!0)),I(h,"$infinite?",L(m)),M(h,"arg","angle"),M(h,"conjugate","conj"),M(h,"imaginary","imag"),M(h,"magnitude","abs"),M(h,"modulo","%"),M(h,"phase","arg"),M(h,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(n){var k=n.truthy,b=n.falsy,P=n.yield1,I=n.hash_get,O=n.hash_put,V=n.hash_delete,C=n.coerce_to,Z=n.respond_to,p=n.deny_frozen_access,H=n.freeze,ie=n.opal32_init,L=n.opal32_add,Y=n.klass,te=n.slice,W=n.defs,z=n.Kernel,y=n.def,K=n.Opal,B=n.eqeqeq,j=n.send2,R=n.find_super,g=n.send,q=n.rb_gt,M=n.rb_times,x=n.eqeq,m=n.rb_minus,u=n.to_a,d=n.to_ary,A=n.gvars,h=n.rb_ge,_=n.assign_ivar,l=n.rb_lt,E=n.return_self,G=n.neqeq,c=n.alias,s=n.top,$=[],t=n.nil,e=n.$$$;return n.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),s.$require("corelib/enumerable"),s.$require("corelib/numeric"),function(r,i,a){var o=Y(r,i,"Array"),v=[o].concat(a),S=n.$r(v);o.$include(e("Enumerable")),n.prop(o.$$prototype,"$$is_array",!0);function F($e){for(var N=$e[0],D=1,X=$e.length;D<X;D++)$e[D-1]=$e[D];return $e.pop(),N}function T($e,N){return N.$$name===n.Array?$e:N.$allocate().$replace($e.$to_a())}function J($e,N,D){for(var X,Q=null,ne=new Array($e.length),se=0,oe=0;se<$e.length;se++){if(!Q)try{X=P(D,$e[se])}catch(fe){Q=fe}(Q||N(X))&&(ne[oe]=$e[se],oe+=1)}if(oe!==se&&($e.splice.apply($e,[0,ne.length].concat(ne)),$e.splice(oe,ne.length)),Q)throw Q}function ee($e){return $e.$$is_array||($e=C($e,e("Array"),"to_ary")),$e.$to_a()}function ae($e,N){var D=N.length;if(D>6&&D<32767)$e.push.apply($e,N);else for(var X=0;X<D;X++)$e.push(N[X])}W(o,"$[]",function(N){var D,X,Q=this;return D=te(arguments),X=D,T(X,Q)},-1),y(o,"$initialize",function $e(N,D){var X=$e.$$p||t,Q=this;if($e.$$p=null,N==null&&(N=t),D==null&&(D=t),p(Q),D!==t&&X!==t&&z.$warn("warning: block supersedes default value argument"),N>e(e("Integer"),"MAX")&&z.$raise(e("ArgumentError"),"array size too big"),arguments.length>2&&z.$raise(e("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return Q.length>0&&Q.splice(0,Q.length),Q;if(arguments.length===1){if(N.$$is_array)return Q.$replace(N.$to_a()),Q;if(N["$respond_to?"]("to_ary"))return Q.$replace(N.$to_ary()),Q}N=C(N,e("Integer"),"to_int"),N<0&&z.$raise(e("ArgumentError"),"negative array size"),Q.splice(0,Q.length);var ne,se;if(X===t)for(ne=0;ne<N;ne++)Q.push(D);else for(ne=0,se;ne<N;ne++)se=X(ne),Q[ne]=se;return Q},-1),W(o,"$try_convert",function(N){return K["$coerce_to?"](N,e("Array"),"to_ary")}),y(o,"$&",function(N){var D=this;if(N=ee(N),D.length===0||N.length===0)return[];var X=[],Q=new Map,ne,se,oe;for(ne=0,se=N.length;ne<se;ne++)O(Q,N[ne],!0);for(ne=0,se=D.length;ne<se;ne++)oe=D[ne],V(Q,oe)!==void 0&&X.push(oe);return X}),y(o,"$|",function(N){var D=this;N=ee(N);var X=new Map,Q,ne;for(Q=0,ne=D.length;Q<ne;Q++)O(X,D[Q],!0);for(Q=0,ne=N.length;Q<ne;Q++)O(X,N[Q],!0);return X.$keys()}),y(o,"$*",function(N){var D=this;if(k(N["$respond_to?"]("to_str")))return D.$join(N.$to_str());N=C(N,e("Integer"),"to_int"),k(N<0)&&z.$raise(e("ArgumentError"),"negative argument");for(var X=[],Q=D.$to_a(),ne=0;ne<N;ne++)X=X.concat(Q);return X}),y(o,"$+",function(N){var D=this;return N=ee(N),D.concat(N)}),y(o,"$-",function(N){var D=this;if(N=ee(N),k(D.length===0))return[];if(k(N.length===0))return D.slice();var X=[],Q=new Map,ne,se,oe;for(ne=0,se=N.length;ne<se;ne++)O(Q,N[ne],!0);for(ne=0,se=D.length;ne<se;ne++)oe=D[ne],I(Q,oe)===void 0&&X.push(oe);return X}),y(o,"$<<",function(N){var D=this;return p(D),D.push(N),D}),y(o,"$<=>",function(N){var D=this;if(B(e("Array"),N))N=N.$to_a();else if(k(N["$respond_to?"]("to_ary")))N=N.$to_ary().$to_a();else return t;if(D===N)return 0;for(var X=Math.min(D.length,N.length),Q=0;Q<X;Q++){var ne=D[Q]["$<=>"](N[Q]);if(ne!==0)return ne}return D.length["$<=>"](N.length)}),y(o,"$==",function(N){var D=this,X={};function Q(ne,se){var oe,fe,f,w;if(ne===se)return!0;if(!se.$$is_array)return Z(se,"$to_ary")?se["$=="](ne):!1;if(ne.$$constructor!==Array&&(ne=ne.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),ne.length!==se.length)return!1;for(X[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(f=ne[oe],w=se[oe],f.$$is_array){if(w.$$is_array&&w.length!==f.length||!X.hasOwnProperty(f.$object_id())&&!Q(f,w))return!1}else if(!f["$=="](w))return!1;return!0}return Q(D,N)});function le($e,N){var D=$e.length,X,Q,ne,se;return X=N.excl,Q=N.begin===t?0:C(N.begin,n.Integer,"to_int"),ne=N.end===t?-1:C(N.end,n.Integer,"to_int"),Q<0&&(Q+=D,Q<0)||(N.excl_rev&&N.begin!==t&&(Q+=1),Q>D)?t:ne<0&&(ne+=D,ne<0)?[]:((!X||N.end===t)&&(ne+=1),se=$e.slice(Q,ne),se)}function ce($e,N){var D,X=[],Q=0,ne;for(N.step<0?(ne={begin:N.range.end,end:N.range.begin,excl:!1,excl_rev:N.range.excl},D=le($e,ne).$reverse()):D=le($e,N.range);Q<D.length;)X.push(D[Q]),Q+=Math.abs(N.step);return X}function de($e,N,D){var X=$e.length,Q;return N=C(N,n.Integer,"to_int"),N<0&&(N+=X,N<0)?t:D===void 0?N>=X||N<0?t:$e[N]:(D=C(D,n.Integer,"to_int"),D<0||N>X||N<0?t:(Q=$e.slice(N,N+D),Q))}y(o,"$[]",function(N,D){var X=this;return N.$$is_range?le(X,N):N.$$is_arithmetic_seq?ce(X,N):de(X,N,D)},-2),y(o,"$[]=",function(N,D,X){var Q=this,ne=t,se=t;p(Q),ne=t;var oe,fe=Q.length;if(N.$$is_range){D.$$is_array?ne=D.$to_a():D["$respond_to?"]("to_ary")?ne=D.$to_ary().$to_a():ne=[D];var f=N.excl,w=N.begin===t?0:C(N.begin,n.Integer,"to_int"),U=N.end===t?-1:C(N.end,n.Integer,"to_int");if(w<0&&(w+=fe,w<0&&z.$raise(e("RangeError"),""+N.$inspect()+" out of range")),U<0&&(U+=fe),(!f||N.end===t)&&(U+=1),w>fe)for(oe=fe;oe<w;oe++)Q[oe]=t;return U<0?Q.splice.apply(Q,[w,0].concat(ne)):Q.splice.apply(Q,[w,U-w].concat(ne)),D}else{X===void 0?se=1:(se=D,D=X,D.$$is_array?ne=D.$to_a():D["$respond_to?"]("to_ary")?ne=D.$to_ary().$to_a():ne=[D]);var re;if(N=C(N,e("Integer"),"to_int"),se=C(se,e("Integer"),"to_int"),N<0&&(re=N,N+=fe,N<0&&z.$raise(e("IndexError"),"index "+re+" too small for array; minimum "+-Q.length)),se<0&&z.$raise(e("IndexError"),"negative length ("+se+")"),N>fe)for(oe=fe;oe<N;oe++)Q[oe]=t;return X===void 0?Q[N]=D:Q.splice.apply(Q,[N,se].concat(ne)),D}},-3),y(o,"$any?",function $e(N){var D=$e.$$p||t,X=this;return $e.$$p=null,X.length===0?!1:j(X,R(X,"any?",$e,!1,!0),"any?",[N],D)},-1),y(o,"$assoc",function(N){for(var D=this,X=0,Q=D.length,ne;X<Q;X++)if(ne=D[X],ne.length&&ne[0]["$=="](N))return ne;return t}),y(o,"$at",function(N){var D=this;return N=C(N,e("Integer"),"to_int"),N<0&&(N+=D.length),N<0||N>=D.length?t:D[N]}),y(o,"$bsearch_index",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return D.$enum_for("bsearch_index");for(var X=0,Q=D.length,ne,se,oe,fe=!1,f=t;X<Q;){if(ne=X+Math.floor((Q-X)/2),se=D[ne],oe=P(N,se),oe===!0)f=ne,fe=!0;else if(oe===!1||oe===t)fe=!1;else if(oe.$$is_number){if(oe===0)return ne;fe=oe<0}else z.$raise(e("TypeError"),"wrong argument type "+oe.$class()+" (must be numeric, true, false or nil)");fe?Q=ne:X=ne+1}return f}),y(o,"$bsearch",function $e(){var N=$e.$$p||t,D=this,X=t;return $e.$$p=null,N===t?D.$enum_for("bsearch"):(X=g(D,"bsearch_index",[],N.$to_proc()),X!=null&&X.$$is_number?D[X]:X)}),y(o,"$cycle",function $e(N){var D=$e.$$p||t,X=this;if($e.$$p=null,N==null&&(N=t),D===t)return g(X,"enum_for",["cycle",N],function se(){var oe=se.$$s==null?this:se.$$s;return k(N["$nil?"]())?e(e("Float"),"INFINITY"):(N=K["$coerce_to!"](N,e("Integer"),"to_int"),k(q(N,0))?M(oe.$enumerator_size(),N):0)},{$$s:X});if(k(X["$empty?"]())||x(N,0))return t;var Q,ne;if(N===t)for(;;)for(Q=0,ne=X.length;Q<ne;Q++)P(D,X[Q]);else{if(N=K["$coerce_to!"](N,e("Integer"),"to_int"),N<=0)return X;for(;N>0;){for(Q=0,ne=X.length;Q<ne;Q++)P(D,X[Q]);N--}}return X},-1),y(o,"$clear",function(){var N=this;return p(N),N.splice(0,N.length),N}),y(o,"$count",function $e(N){var D=$e.$$p||t,X=this;return $e.$$p=null,k(N!==void 0)||k(D)?j(X,R(X,"count",$e,!1,!0),"count",[N],D):X.$size()},-1),y(o,"$initialize_copy",function(N){var D=this;return D.$replace(N)}),y(o,"$collect",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["collect"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:D});for(var X=[],Q=0;Q<D.length;Q++){var ne=P(N,D[Q]);X[Q]=ne}return X}),y(o,"$collect!",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["collect!"],function ne(){var se=ne.$$s==null?this:ne.$$s;return se.$size()},{$$s:D});p(D);for(var X=0;X<D.length;X++){var Q=P(N,D[X]);D[X]=Q}return D});function he($e,N){return $e===N||N===0?1:N>0&&$e>N?he($e-1,N-1)+he($e-1,N):0}y(o,"$combination",function $e(N){var D=$e.$$p||t,X=this,Q=t;if($e.$$p=null,Q=K["$coerce_to!"](N,e("Integer"),"to_int"),D===t)return g(X,"enum_for",["combination",Q],function re(){var ue=re.$$s==null?this:re.$$s;return he(ue.length,Q)},{$$s:X});var ne,se,oe,fe,f,w,U;if(Q===0)n.yield1(D,[]);else if(Q===1)for(ne=0,se=X.length;ne<se;ne++)n.yield1(D,[X[ne]]);else if(Q===X.length)n.yield1(D,X.slice());else if(Q>=0&&Q<X.length){for(oe=[],ne=0;ne<=Q+1;ne++)oe.push(0);for(fe=[],f=0,w=!1,oe[0]=-1;!w;){for(fe[f]=X[oe[f+1]];f<Q-1;)f++,U=oe[f+1]=oe[f]+1,fe[f]=X[U];n.yield1(D,fe.slice()),f++;do w=f===0,oe[f]++,f--;while(oe[f+1]+Q===X.length+f+1)}}return X}),y(o,"$repeated_combination",function $e(N){var D=$e.$$p||t,X=this,Q=t;if($e.$$p=null,Q=K["$coerce_to!"](N,e("Integer"),"to_int"),D===t)return g(X,"enum_for",["repeated_combination",Q],function se(){var oe=se.$$s==null?this:se.$$s;return he(oe.length+Q-1,Q)},{$$s:X});function ne(se,oe,fe,f){if(fe.length==se){var w=fe.slice();n.yield1(D,w);return}for(var U=oe;U<f.length;U++)fe.push(f[U]),ne(se,U,fe,f),fe.pop()}return Q>=0&&ne(Q,0,[],X),X}),y(o,"$compact",function(){for(var N=this,D=[],X=0,Q=N.length,ne;X<Q;X++)(ne=N[X])!==t&&D.push(ne);return D}),y(o,"$compact!",function(){var N=this;p(N);for(var D=N.length,X=0,Q=N.length;X<Q;X++)N[X]===t&&(N.splice(X,1),Q--,X--);return N.length===D?t:N}),y(o,"$concat",function(N){var D,X,Q=this;return D=te(arguments),X=D,p(Q),X=g(X,"map",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;return se==null&&(se=t),se=ee(se),k(se["$equal?"](oe))&&(se=se.$dup()),se},{$$s:Q}),g(X,"each",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;se==null&&(se=t);for(var fe=0,f=se.length;fe<f;fe++)oe.push(se[fe])},{$$s:Q}),Q},-1),y(o,"$delete",function $e(N){var D=$e.$$p||t,X=this;$e.$$p=null;for(var Q=X.length,ne=0,se=Q;ne<se;ne++)X[ne]["$=="](N)&&(p(X),X.splice(ne,1),se--,ne--);return X.length===Q?D!==t?n.yieldX(D,[]):t:N}),y(o,"$delete_at",function(N){var D=this;if(p(D),N=C(N,e("Integer"),"to_int"),N<0&&(N+=D.length),N<0||N>=D.length)return t;var X=D[N];return D.splice(N,1),X}),y(o,"$delete_if",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,N===t?g(D,"enum_for",["delete_if"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:D}):(p(D),J(D,b,N),D)}),y(o,"$difference",function(N){var D,X,Q=this;return D=te(arguments),X=D,g(X,"reduce",[Q.$to_a().$dup()],function(se,oe){return se==null&&(se=t),oe==null&&(oe=t),m(se,oe)})},-1),y(o,"$dig",function(N,D){var X,Q,ne=this,se=t;return X=te(arguments,1),Q=X,se=ne["$[]"](N),se===t||Q.length===0?se:(k(se["$respond_to?"]("dig"))||z.$raise(e("TypeError"),""+se.$class()+" does not have #dig method"),g(se,"dig",u(Q)))},-2),y(o,"$drop",function(N){var D=this;return N=C(N,e("Integer"),"to_int"),N<0&&z.$raise(e("ArgumentError")),D.slice(N)}),y(o,"$dup",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,D.$$class===n.Array&&D.$$class.$allocate.$$pristine&&D.$copy_instance_variables.$$pristine&&D.$initialize_dup.$$pristine?D.slice(0):j(D,R(D,"dup",$e,!1,!0),"dup",[],N)}),y(o,"$each",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:D});for(var X=0;X<D.length;X++)P(N,D[X]);return D}),y(o,"$each_index",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["each_index"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:D});for(var X=0;X<D.length;X++)P(N,X);return D}),y(o,"$empty?",function(){var N=this;return N.length===0}),y(o,"$eql?",function(N){var D=this,X={};function Q(ne,se){var oe,fe,f,w;if(!se.$$is_array||(se=se.$to_a(),ne.length!==se.length))return!1;for(X[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(f=ne[oe],w=se[oe],f.$$is_array){if(w.$$is_array&&w.length!==f.length||!X.hasOwnProperty(f.$object_id())&&!Q(f,w))return!1}else if(!f["$eql?"](w))return!1;return!0}return Q(D,N)}),y(o,"$fetch",function $e(N,D){var X=$e.$$p||t,Q=this;$e.$$p=null;var ne=N;if(N=C(N,e("Integer"),"to_int"),N<0&&(N+=Q.length),N>=0&&N<Q.length)return Q[N];if(X!==t&&D!=null&&Q.$warn("warning: block supersedes default value argument"),X!==t)return X(ne);if(D!=null)return D;Q.length===0?z.$raise(e("IndexError"),"index "+ne+" outside of array bounds: 0...0"):z.$raise(e("IndexError"),"index "+ne+" outside of array bounds: -"+Q.length+"..."+Q.length)},-2),y(o,"$fill",function $e(N){var D=$e.$$p||t,X,Q,ne,se,oe=this,fe=t,f=t,w=t,U=t,re=t;$e.$$p=null,X=te(arguments),Q=X,p(oe);var ue,_e;if(k(D)?(k(Q.length>2)&&z.$raise(e("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 0..2)"),se=Q,ne=d(se),fe=ne[0]==null?t:ne[0],f=ne[1]==null?t:ne[1]):(k(Q.length==0)?z.$raise(e("ArgumentError"),"wrong number of arguments (0 for 1..3)"):k(Q.length>3)&&z.$raise(e("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 1..3)"),se=Q,ne=d(se),w=ne[0]==null?t:ne[0],fe=ne[1]==null?t:ne[1],f=ne[2]==null?t:ne[2]),B(e("Range"),fe)){if(k(f)&&z.$raise(e("TypeError"),"length invalid with range"),U=fe.begin===t?0:C(fe.begin,e("Integer"),"to_int"),k(U<0)&&(U+=this.length),k(U<0)&&z.$raise(e("RangeError"),""+fe.$inspect()+" out of range"),re=fe.end===t?-1:C(fe.end,e("Integer"),"to_int"),k(re<0)&&(re+=this.length),k(fe["$exclude_end?"]())||(re+=1),k(re<=U))return oe}else if(k(fe))if(U=C(fe,e("Integer"),"to_int"),k(U<0)&&(U+=this.length),k(U<0)&&(U=0),k(f)){if(re=C(f,e("Integer"),"to_int"),k(re==0))return oe;re+=U}else re=this.length;else U=0,re=this.length;if(k(U>this.length))for(ue=this.length;ue<re;ue++)oe[ue]=t;if(k(re>this.length)&&(this.length=re),k(D))for(this.length;U<re;U++)_e=D(U),oe[U]=_e;else for(this.length;U<re;U++)oe[U]=w;return oe},-1),y(o,"$first",function(N){var D=this;return N==null?D.length===0?t:D[0]:(N=C(N,e("Integer"),"to_int"),N<0&&z.$raise(e("ArgumentError"),"negative array size"),D.slice(0,N))},-1),y(o,"$flatten",function(N){var D=this;function X(Q,ne){var se=[],oe,fe,f,w;for(Q=Q.$to_a(),oe=0,fe=Q.length;oe<fe;oe++){if(f=Q[oe],!Z(f,"$to_ary",!0)){se.push(f);continue}if(w=f.$to_ary(),w===t){se.push(f);continue}switch(w.$$is_array||z.$raise(e("TypeError")),w===D&&z.$raise(e("ArgumentError")),ne){case void 0:se=se.concat(X(w));break;case 0:se.push(w);break;default:ae(se,X(w,ne-1))}}return se}return N!==void 0&&(N=C(N,e("Integer"),"to_int")),X(D,N)},-1),y(o,"$flatten!",function(N){var D=this;p(D);var X=D.$flatten(N);if(D.length==X.length){for(var Q=0,ne=D.length;Q<ne&&D[Q]===X[Q];Q++);if(Q==ne)return t}return D.$replace(X),D},-1),y(o,"$freeze",function(){var N=this;return k(N["$frozen?"]())?N:H(N)});var ve;y(o,"$hash",function(){var N=this,D=ve===void 0,X=ie(),Q=N.$object_id(),ne,se,oe;if(X=L(X,10),X=L(X,N.length),D)ve=Object.create(null);else if(ve[Q])return L(X,16843009);try{for(oe in ve)if(ne=ve[oe],N["$eql?"](ne))return L(X,16843009);for(ve[Q]=N,se=0;se<N.length;se++)ne=N[se],X=L(X,ne.$hash());return X}finally{D&&(ve=void 0)}}),y(o,"$include?",function(N){for(var D=this,X=0,Q=D.length;X<Q;X++)if(D[X]["$=="](N))return!0;return!1}),y(o,"$index",function $e(N){var D=$e.$$p||t,X=this;$e.$$p=null;var Q,ne,se;if(N!=null&&D!==t&&X.$warn("warning: given block not used"),N!=null){for(Q=0,ne=X.length;Q<ne;Q++)if(X[Q]["$=="](N))return Q}else if(D!==t){for(Q=0;Q<X.length;Q++)if(se=D(X[Q]),se!==!1&&se!==t)return Q}else return X.$enum_for("index");return t},-1),y(o,"$insert",function(N,D){var X,Q,ne=this;if(X=te(arguments,1),Q=X,p(ne),N=C(N,e("Integer"),"to_int"),Q.length>0){if(N<0&&(N+=ne.length+1,N<0&&z.$raise(e("IndexError"),""+N+" is out of bounds")),N>ne.length)for(var se=ne.length;se<N;se++)ne.push(t);ne.splice.apply(ne,[N,0].concat(Q))}return ne},-2);var me=[];y(o,"$inspect",function(){var N=this,D=[],X=N.$__id__(),Q=!0;return function(){try{if(me.indexOf(X)!==-1)return Q=!1,"[...]";me.push(X);for(var ne=0,se=N.length;ne<se;ne++){var oe=N["$[]"](ne);D.push(S("Opal").$inspect(oe))}return"["+D.join(", ")+"]"}finally{Q&&me.pop()}}()}),y(o,"$intersection",function(N){var D,X,Q=this,ne=t,se=t;return D=te(arguments),X=D,X.length===0?Q.$to_a().$dup():(X=X.map(ee),Q.length===0?[]:(X=g(X,"sort_by",[],"length".$to_proc()),k(Q.length<X[0].length)?g(X,"reduce",[Q],"&".$to_proc()):(ne=X.pop(),se=g(X,"reduce",[ne],"&".$to_proc()),Q["$&"](se))))},-1),y(o,"$intersect?",function(N){var D=this,X,Q,ne=new Map,se,oe;for(D.length<N.length?(X=D,Q=N):(X=N,Q=D),se=0,oe=X.length;se<oe;se++)O(ne,X[se],!0);for(se=0,oe=Q.length;se<oe;se++)if(I(ne,Q[se]))return!0;return!1}),y(o,"$join",function(N){var D=this;if(A[","]==null&&(A[","]=t),N==null&&(N=t),k(D.length===0))return"";k(N===t)&&(N=A[","]);var X=[],Q,ne,se,oe;for(Q=0,ne=D.length;Q<ne;Q++){if(se=D[Q],Z(se,"$to_str")&&(oe=se.$to_str(),oe!==t)){X.push(oe.$to_s());continue}if(Z(se,"$to_ary")&&(oe=se.$to_ary(),oe===D&&z.$raise(e("ArgumentError")),oe!==t)){X.push(oe.$join(N));continue}if(Z(se,"$to_s")&&(oe=se.$to_s(),oe!==t)){X.push(oe);continue}z.$raise(e("NoMethodError").$new(""+S("Opal").$inspect(D.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return N===t?X.join(""):X.join(K["$coerce_to!"](N,e("String"),"to_str").$to_s())},-1),y(o,"$keep_if",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,N===t?g(D,"enum_for",["keep_if"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:D}):(p(D),J(D,k,N),D)}),y(o,"$last",function(N){var D=this;return N==null?D.length===0?t:D[D.length-1]:(N=C(N,e("Integer"),"to_int"),N<0&&z.$raise(e("ArgumentError"),"negative array size"),N>D.length&&(N=D.length),D.slice(D.length-N,D.length))},-1),y(o,"$length",function(){var N=this;return N.length}),y(o,"$max",function $e(N){var D=$e.$$p||t,X=this;return $e.$$p=null,g(X.$each(),"max",[N],D.$to_proc())},-1),y(o,"$min",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,g(D.$each(),"min",[],N.$to_proc())});function be($e,N){for(var D=N>=0?1:0;N;)D*=$e,$e--,N--;return D}return y(o,"$permutation",function $e(N){var D=$e.$$p||t,X=this,Q=t,ne=t;if($e.$$p=null,D===t)return g(X,"enum_for",["permutation",N],function w(){var U=w.$$s==null?this:w.$$s;return be(U.length,N===void 0?U.length:N)},{$$s:X});var se,oe,fe;if(N===void 0?N=X.length:N=C(N,e("Integer"),"to_int"),!(N<0||X.length<N))if(N===0)n.yield1(D,[]);else if(N===1)for(var f=0;f<X.length;f++)n.yield1(D,[X[f]]);else Q=S("Array").$new(N),ne=S("Array").$new(X.length,!1),se=function(w,U,re,ue,_e){X=this;for(var ge=0;ge<X.length;ge++)if(ue["$[]"](ge)["$!"]())if(U[re]=ge,re<w-1)ue[ge]=!0,se.call(X,w,U,re+1,ue,_e),ue[ge]=!1;else{fe=[];for(var pe=0;pe<U.length;pe++)fe.push(X[U[pe]]);P(_e,fe)}},D!==t?(oe=X.slice(),se.call(oe,N,Q,0,ne,D)):se.call(X,N,Q,0,ne,D);return X},-1),y(o,"$repeated_permutation",function $e(N){var D=$e.$$p||t,X=this,Q=t;if($e.$$p=null,Q=K["$coerce_to!"](N,e("Integer"),"to_int"),D===t)return g(X,"enum_for",["repeated_permutation",Q],function se(){var oe=se.$$s==null?this:se.$$s;return k(h(Q,0))?oe.$size()["$**"](Q):0},{$$s:X});function ne(se,oe,fe){if(oe.length==se){var f=oe.slice();n.yield1(D,f);return}for(var w=0;w<fe.length;w++)oe.push(fe[w]),ne(se,oe,fe),oe.pop()}return ne(Q,[],X.slice()),X}),y(o,"$pop",function(N){var D=this;return p(D),k(N===void 0)?k(D.length===0)?t:D.pop():(N=C(N,e("Integer"),"to_int"),k(N<0)&&z.$raise(e("ArgumentError"),"negative array size"),k(D.length===0)?[]:k(N===1)?[D.pop()]:k(N>D.length)?D.splice(0,D.length):D.splice(D.length-N,D.length))},-1),y(o,"$product",function $e(N){var D=$e.$$p||t,X,Q,ne=this;$e.$$p=null,X=te(arguments),Q=X;var se=D!==t?null:[],oe=Q.length+1,fe=new Array(oe),f=new Array(oe),w=new Array(oe),U,re,ue,_e,ge=1;for(w[0]=ne,U=1;U<oe;U++)w[U]=C(Q[U-1],e("Array"),"to_ary");for(U=0;U<oe;U++){if(_e=w[U].length,_e===0)return se||ne;ge*=_e,ge>2147483647&&z.$raise(e("RangeError"),"too big to product"),f[U]=_e,fe[U]=0}e:for(;;){for(ue=[],U=0;U<oe;U++)ue.push(w[U][fe[U]]);for(se?se.push(ue):n.yield1(D,ue),re=oe-1,fe[re]++;fe[re]===f[re];){if(fe[re]=0,--re<0)break e;fe[re]++}}return se||ne},-1),y(o,"$push",function(N){var D,X,Q=this;return D=te(arguments),X=D,p(Q),ae(Q,X),Q},-1),y(o,"$rassoc",function(N){for(var D=this,X=0,Q=D.length,ne;X<Q;X++)if(ne=D[X],ne.length&&ne[1]!==void 0&&ne[1]["$=="](N))return ne;return t}),y(o,"$reject",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["reject"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:D});for(var X=[],Q=0,ne;Q<D.length;Q++)ne=N(D[Q]),(ne===!1||ne===t)&&X.push(D[Q]);return X}),y(o,"$reject!",function $e(){var N=$e.$$p||t,D=this,X=t;return $e.$$p=null,N===t?g(D,"enum_for",["reject!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:D}):(p(D),X=D.$length(),g(D,"delete_if",[],N.$to_proc()),x(D.$length(),X)?t:D)}),y(o,"$replace",function(N){var D=this;return p(D),N=ee(N),D.length>0&&D.splice(0,D.length),ae(D,N),D}),y(o,"$reverse",function(){var N=this;return N.slice(0).reverse()}),y(o,"$reverse!",function(){var N=this;return p(N),N.reverse()}),y(o,"$reverse_each",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["reverse_each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:D});for(var X=D.length-1;X>=0;X--)P(N,D[X]);return D}),y(o,"$rindex",function $e(N){var D=$e.$$p||t,X=this;$e.$$p=null;var Q,ne;if(N!=null&&D!==t&&X.$warn("warning: given block not used"),N!=null){for(Q=X.length-1;Q>=0&&!(Q>=X.length);Q--)if(X[Q]["$=="](N))return Q}else if(D!==t){for(Q=X.length-1;Q>=0&&!(Q>=X.length);Q--)if(ne=D(X[Q]),ne!==!1&&ne!==t)return Q}else if(N==null)return X.$enum_for("rindex");return t},-1),y(o,"$rotate",function(N){var D=this;N==null&&(N=1);var X,Q,ne,se;return N=C(N,e("Integer"),"to_int"),D.length===1?D.slice():D.length===0?[]:(X=D.slice(),Q=N%X.length,ne=X.slice(Q),se=X.slice(0,Q),ne.concat(se))},-1),y(o,"$rotate!",function(N){var D=this,X=t;return N==null&&(N=1),p(D),D.length===0||D.length===1?D:(N=C(N,e("Integer"),"to_int"),X=D.$rotate(N),D.$replace(X))},-1),function($e,N){var D=Y($e,N,"SampleRandom"),X=D.$$prototype;return X.rng=t,y(D,"$initialize",_("rng")),y(D,"$rand",function(ne){var se=this,oe=t;return oe=C(se.rng.$rand(ne),e("Integer"),"to_int"),k(oe<0)&&z.$raise(e("RangeError"),"random value must be >= 0"),k(oe<ne)||z.$raise(e("RangeError"),"random value must be less than Array size"),oe})}(o,null),y(o,"$sample",function(N,D){var X=this,Q=t,ne=t;if(k(N===void 0))return X.$at(z.$rand(X.length));if(k(D===void 0)?k(Q=K["$coerce_to?"](N,e("Hash"),"to_hash"))?(D=Q,N=t):(D=t,N=C(N,e("Integer"),"to_int")):(N=C(N,e("Integer"),"to_int"),D=C(D,e("Hash"),"to_hash")),k(N)&&k(N<0)&&z.$raise(e("ArgumentError"),"count must be greater than 0"),k(D)&&(ne=D["$[]"]("random")),ne=k(ne)&&k(ne["$respond_to?"]("rand"))?S("SampleRandom").$new(ne):z,!k(N))return X[ne.$rand(X.length)];var se,oe,fe,f,w,U,re,ue;switch(N>X.length&&(N=X.length),N){case 0:return[];case 1:return[X[ne.$rand(X.length)]];case 2:return f=ne.$rand(X.length),w=ne.$rand(X.length-1),f<=w&&w++,[X[f],X[w]];default:if(X.length/N>3){for(se=!1,oe=0,fe=S("Array").$new(N),f=1,fe[0]=ne.$rand(X.length);f<N;){for(U=ne.$rand(X.length),w=0;w<f;){for(;U===fe[w];){if(oe++,oe>100){se=!0;break}U=ne.$rand(X.length)}if(se)break;w++}if(se)break;fe[f]=U,f++}if(!se){for(f=0;f<N;)fe[f]=X[fe[f]],f++;return fe}}fe=X.slice();for(var _e=0;_e<N;_e++)re=ne.$rand(X.length-_e)+_e,ue=fe[_e],fe[_e]=fe[re],fe[re]=ue;return N===X.length?fe:fe["$[]"](0,N)}},-1),y(o,"$select",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["select"],function oe(){var fe=oe.$$s==null?this:oe.$$s;return fe.$size()},{$$s:D});for(var X=[],Q=0,ne,se;Q<D.length;Q++)ne=D[Q],se=P(N,ne),k(se)&&X.push(ne);return X}),y(o,"$select!",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["select!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:D});p(D);var X=D.length;return g(D,"keep_if",[],N.$to_proc()),D.length===X?t:D}),y(o,"$shift",function(N){var D=this;return p(D),k(N===void 0)?k(D.length===0)?t:F(D):(N=C(N,e("Integer"),"to_int"),k(N<0)&&z.$raise(e("ArgumentError"),"negative array size"),k(D.length===0)?[]:D.splice(0,N))},-1),y(o,"$shuffle",function(N){var D=this;return D.$dup().$to_a()["$shuffle!"](N)},-1),y(o,"$shuffle!",function(N){var D=this;p(D);var X,Q=D.length,ne,se;for(N!==void 0&&(N=K["$coerce_to?"](N,e("Hash"),"to_hash"),N!==t&&(N=N["$[]"]("random"),N!==t&&N["$respond_to?"]("rand")&&(X=N)));Q;)X?(ne=X.$rand(Q).$to_int(),ne<0&&z.$raise(e("RangeError"),"random number too small "+ne),ne>=Q&&z.$raise(e("RangeError"),"random number too big "+ne)):ne=D.$rand(Q),se=D[--Q],D[Q]=D[ne],D[ne]=se;return D},-1),y(o,"$slice!",function(N,D){var X=this,Q=t,ne=t,se=t,oe=t,fe=t;if(p(X),Q=t,k(D===void 0))if(B(e("Range"),N)){ne=N,Q=X["$[]"](ne),se=ne.begin===t?0:C(ne.begin,e("Integer"),"to_int"),oe=ne.end===t?-1:C(ne.end,e("Integer"),"to_int"),se<0&&(se+=X.length),oe<0?oe+=X.length:oe>=X.length&&(oe=X.length-1,ne.excl&&(oe+=1));var f=oe-se;ne.excl&&ne.end!==t?oe-=1:f+=1,se<X.length&&se>=0&&oe<X.length&&oe>=0&&f>0&&X.splice(se,f)}else{if(fe=C(N,e("Integer"),"to_int"),fe<0&&(fe+=X.length),fe<0||fe>=X.length)return t;Q=X[fe],fe===0?X.shift():X.splice(fe,1)}else{if(fe=C(N,e("Integer"),"to_int"),D=C(D,e("Integer"),"to_int"),D<0)return t;Q=X["$[]"](fe,D),fe<0&&(fe+=X.length),fe+D>X.length&&(D=X.length-fe),fe<X.length&&fe>=0&&X.splice(fe,D)}return Q},-2),y(o,"$sort",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,k(D.length>1)?(N===t&&(N=function(X,Q){return X["$<=>"](Q)}),D.slice().sort(function(X,Q){var ne=N(X,Q);return ne===t&&z.$raise(e("ArgumentError"),"comparison of "+X.$inspect()+" with "+Q.$inspect()+" failed"),q(ne,0)?1:l(ne,0)?-1:0})):D}),y(o,"$sort!",function $e(){var N=$e.$$p||t,D=this;$e.$$p=null,p(D);var X;N!==t?X=g(D.slice(),"sort",[],N.$to_proc()):X=D.slice().$sort(),D.length=0;for(var Q=0,ne=X.length;Q<ne;Q++)D.push(X[Q]);return D}),y(o,"$sort_by!",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,N===t?g(D,"enum_for",["sort_by!"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:D}):(p(D),D.$replace(g(D,"sort_by",[],N.$to_proc())))}),y(o,"$take",function(N){var D=this;return N<0&&z.$raise(e("ArgumentError")),D.slice(0,N)}),y(o,"$take_while",function $e(){var N=$e.$$p||t,D=this;$e.$$p=null;for(var X=[],Q=0,ne,se;Q<D.length;Q++){if(ne=D[Q],se=N(ne),se===!1||se===t)return X;X.push(ne)}return X}),y(o,"$to_a",function(){var N=this;return N.$$class===n.Array?N:n.Array.$new(N)}),y(o,"$to_ary",E),y(o,"$to_h",function $e(){var N=$e.$$p||t,D=this,X=t;$e.$$p=null,X=D,N!==t&&(X=g(X,"map",[],N.$to_proc()));var Q,ne=X.length,se,oe,fe,f=new Map;for(Q=0;Q<ne;Q++)se=K["$coerce_to?"](X[Q],e("Array"),"to_ary"),se.$$is_array||z.$raise(e("TypeError"),"wrong element type "+X[Q].$class()+" at "+Q+" (expected array)"),se.length!==2&&z.$raise(e("ArgumentError"),"element has wrong array length at "+Q+" (expected 2, was "+se.$length()+")"),oe=se[0],fe=se[1],O(f,oe,fe);return f}),y(o,"$transpose",function(){var N=this,D=t,X=t;return k(N["$empty?"]())?[]:(D=[],X=t,g(N,"each",[],function(ne){var se=t;return ne==null&&(ne=t),ne=ee(ne),X=k(se=X)?se:ne.length,G(ne.length,X)&&z.$raise(e("IndexError"),"element size differs ("+ne.length+" should be "+X+")"),g(ne.length,"times",[],function(fe){var f,w=t;return fe==null&&(fe=t),w=k(se=D["$[]"](fe))?se:(f=[fe,[]],g(D,"[]=",f),f[f.length-1]),w["$<<"](ne.$at(fe))})}),D)}),y(o,"$union",function(N){var D,X,Q=this;return D=te(arguments),X=D,g(X,"reduce",[Q.$uniq()],function(se,oe){return se==null&&(se=t),oe==null&&(oe=t),se["$|"](oe)})},-1),y(o,"$uniq",function $e(){var N=$e.$$p||t,D=this;$e.$$p=null;var X=new Map,Q,ne,se,oe;if(N===t)for(Q=0,ne=D.length;Q<ne;Q++)se=D[Q],I(X,se)===void 0&&O(X,se,se);else for(Q=0;Q<D.length;Q++)se=D[Q],oe=P(N,se),I(X,oe)===void 0&&O(X,oe,se);return X.$values()}),y(o,"$uniq!",function $e(){var N=$e.$$p||t,D=this;$e.$$p=null,p(D);var X=new Map,Q,ne,se,oe=[];for(Q=0;Q<D.length;Q++)ne=D[Q],se=N===t?ne:P(N,ne),I(X,se)===void 0?O(X,se,ne):oe.push(Q);for(Q=oe.length-1;Q>=0;Q--)D.splice(oe[Q],1);return oe.length===0?t:D}),y(o,"$unshift",function(N){var D,X,Q=this;D=te(arguments),X=D,p(Q);var ne=Q.length,se=X.length;if(se==0)return Q;for(var oe=ne-se,fe=0;fe<se;fe++)Q.push(Q[oe+fe]);for(var f=ne-1;f-se>=0;)Q[f]=Q[f-se],f--;for(var w=0;w<se;w++)Q[w]=X[w];return Q},-1),y(o,"$values_at",function(N){var D,X,Q=this,ne=t;return D=te(arguments),X=D,ne=[],g(X,"each",[],function se(oe){var fe=se.$$s==null?this:se.$$s,f=t,w=t,U=t;return oe==null&&(oe=t),k(oe["$is_a?"](e("Range")))?(f=oe.$end()===t?-1:C(oe.$end(),e("Integer"),"to_int"),w=oe.$begin()===t?0:C(oe.$begin(),e("Integer"),"to_int"),w<0?(w=w+fe.length,t):(f<0&&(f=f+fe.length),oe["$exclude_end?"]()&&oe.$end()!==t&&f--,f<w?t:g(w,"upto",[f],function re(ue){var _e=re.$$s==null?this:re.$$s;return ue==null&&(ue=t),ne["$<<"](_e.$at(ue))},{$$s:fe}))):(U=C(oe,e("Integer"),"to_int"),ne["$<<"](fe.$at(U)))},{$$s:Q}),ne},-1),y(o,"$zip",function $e(N){var D=$e.$$p||t,X,Q,ne=this,se=t;$e.$$p=null,X=te(arguments),Q=X;var oe=[],fe=ne.length,f,w,U,re,ue;for(re=0,ue=Q.length;re<ue;re++)if(w=Q[re],!w.$$is_array){if(w.$$is_range||w.$$is_enumerator){Q[re]=w.$take(fe);continue}Q[re]=(k(se=K["$coerce_to?"](w,e("Array"),"to_ary"))?se:K["$coerce_to!"](w,e("Enumerator"),"to_enum","each")).$to_a()}for(U=0;U<fe;U++){for(f=[ne[U]],re=0,ue=Q.length;re<ue;re++)w=Q[re][U],w==null&&(w=t),f[re+1]=w;oe[U]=f}if(D!==t){for(U=0;U<fe;U++)n.yield1(D,oe[U]);return t}return oe},-1),W(o,"$inherited",function(N){N.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),y(o,"$instance_variables",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,g(j(D,R(D,"instance_variables",$e,!1,!0),"instance_variables",[],N),"reject",[],function(Q){var ne=t;return Q==null&&(Q=t),k(ne=/^@\d+$/.test(Q))?ne:Q["$=="]("@length")})}),y(o,"$pack",function(N){return te(arguments),z.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),c(o,"append","push"),c(o,"filter","select"),c(o,"filter!","select!"),c(o,"map","collect"),c(o,"map!","collect!"),c(o,"prepend","unshift"),c(o,"size","length"),c(o,"slice","[]"),c(o,"to_s","inspect"),K.$pristine(o.$singleton_class(),"allocate"),K.$pristine(o,"copy_instance_variables","initialize_dup")}("::",Array,$)};Opal.modules["corelib/hash"]=function(n){var k=n.yield1,b=n.hash_clone,P=n.hash_delete,I=n.hash_each,O=n.hash_get,V=n.hash_put,C=n.deny_frozen_access,Z=n.freeze,p=n.opal32_init,H=n.opal32_add,ie=n.klass,L=n.slice,Y=n.Opal,te=n.Kernel,W=n.defs,z=n.def,y=n.send,K=n.rb_ge,B=n.rb_gt,j=n.truthy,R=n.to_a,g=n.return_self,q=n.not,M=n.alias,x=n.top,m=[],u=n.nil,d=n.$$$;return n.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),x.$require("corelib/enumerable"),function(A,h,_){var l=ie(A,h,"Hash"),E=[l].concat(_),G=n.$r(E);l.$include(d("Enumerable")),l.$$prototype.$$is_hash=!0,W(l,"$[]",function(t){var e,r,i=this;e=L(arguments),r=e;var a,o=r.length,v,S;if(o===1){if(a=Y["$coerce_to?"](r["$[]"](0),d("Hash"),"to_hash"),a!==u)return i.$allocate()["$merge!"](a);for(r=Y["$coerce_to?"](r["$[]"](0),d("Array"),"to_ary"),r===u&&te.$raise(d("ArgumentError"),"odd number of arguments for Hash"),o=r.length,a=i.$allocate(),S=0;S<o;S++)v=r[S],v.$$is_array||te.$raise(d("ArgumentError"),"invalid element "+v.$inspect()+" for Hash"),v.length===1?a.$store(v[0],u):v.length===2?a.$store(v[0],v[1]):te.$raise(d("ArgumentError"),"invalid number of elements ("+v.length+" for "+v.$inspect()+"), must be 1..2");return a}for(o%2!==0&&te.$raise(d("ArgumentError"),"odd number of arguments for Hash"),a=i.$allocate(),S=0;S<o;S+=2)a.$store(r[S],r[S+1]);return a},-1),W(l,"$allocate",function(){var t=this,e=new t.$$constructor;return e.$$none=u,e.$$proc=u,e}),W(l,"$try_convert",function(t){return Y["$coerce_to?"](t,d("Hash"),"to_hash")}),z(l,"$initialize",function $(t){var e=$.$$p||u,r=this;return $.$$p=null,C(r),t!==void 0&&e!==u&&te.$raise(d("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=t===void 0?u:t,r.$$proc=e,r},-1),z(l,"$==",function(t){var e=this;return e===t?!0:!t.$$is_hash||e.size!==t.size?!1:I(e,!0,function(r,i){var a=O(t,r);return a===void 0||!i["$eql?"](a)?[!0,!1]:[!1,!0]})}),z(l,"$>=",function(t){var e=this,r=u;return t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),e.size<t.size?!1:(r=!0,y(t,"each",[],function i(a,o){var v=i.$$s==null?this:i.$$s,S=u;if(a==null&&(a=u),o==null&&(o=u),S=v.$fetch(a,null),S==null||S!==o){r=!1;return}},{$$s:e}),r)}),z(l,"$>",function(t){var e=this;return t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),e.size<=t.size?!1:K(e,t)}),z(l,"$<",function(t){var e=this;return t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),B(t,e)}),z(l,"$<=",function(t){var e=this;return t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),K(t,e)}),z(l,"$[]",function(t){var e=this,r=O(e,t);return r!==void 0?r:e.$default(t)}),z(l,"$[]=",function(t,e){var r=this;return C(r),V(r,t,e),e}),z(l,"$assoc",function(t){var e=this;return I(e,u,function(r,i){return r["$=="](t)?[!0,[r,i]]:[!1,u]})}),z(l,"$clear",function(){var t=this;return C(t),t.clear(),t.$$keys&&t.$$keys.clear(),t}),z(l,"$clone",function(){var t=this,e=t.$class().$new();return b(t,e),t["$frozen?"]()?e.$freeze():e}),z(l,"$compact",function(){var t=this,e=new Map;return I(t,e,function(r,i){return i!==u&&V(e,r,i),[!1,e]})}),z(l,"$compact!",function(){var t=this;C(t);var e=u;return I(t,e,function(r,i){return i===u&&(P(t,r),e=t),[!1,e]})}),z(l,"$compare_by_identity",function(){var t=this;return C(t),t.$$by_identity||(t.$$by_identity=!0,t.size!==0&&n.hash_rehash(t)),t}),z(l,"$compare_by_identity?",function(){var t=this;return t.$$by_identity===!0}),z(l,"$default",function(t){var e=this;return t!==void 0&&e.$$proc!==u&&e.$$proc!==void 0?e.$$proc.$call(e,t):e.$$none===void 0?u:e.$$none},-1),z(l,"$default=",function(t){var e=this;return C(e),e.$$proc=u,e.$$none=t,t}),z(l,"$default_proc",function(){var t=this;return t.$$proc!==void 0?t.$$proc:u}),z(l,"$default_proc=",function(t){var e=this;C(e);var r=t;return r!==u&&(r=Y["$coerce_to!"](r,d("Proc"),"to_proc"),r["$lambda?"]()&&r.$arity().$abs()!==2&&te.$raise(d("TypeError"),"default_proc takes two arguments")),e.$$none=u,e.$$proc=r,t}),z(l,"$delete",function $(t){var e=$.$$p||u,r=this;$.$$p=null,C(r);var i=P(r,t);return i!==void 0?i:e!==u?n.yield1(e,t):u}),z(l,"$delete_if",function $(){var t=$.$$p||u,e=this;return $.$$p=null,j(t)?(C(e),I(e,e,function(r,i){var a=t(r,i);return a!==!1&&a!==u&&P(e,r),[!1,e]})):y(e,"enum_for",["delete_if"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),z(l,"$dig",function(t,e){var r,i,a=this,o=u;return r=L(arguments,1),i=r,o=a["$[]"](t),o===u||i.length===0?o:(j(o["$respond_to?"]("dig"))||te.$raise(d("TypeError"),""+o.$class()+" does not have #dig method"),y(o,"dig",R(i)))},-2),z(l,"$dup",function(){var t=this;return b(t,t.$class().$new())}),z(l,"$each",function $(){var t=$.$$p||u,e=this;return $.$$p=null,j(t)?I(e,e,function(r,i){return k(t,[r,i]),[!1,e]}):y(e,"enum_for",["each"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),z(l,"$each_key",function $(){var t=$.$$p||u,e=this;return $.$$p=null,j(t)?I(e,e,function(r,i){return t(r),[!1,e]}):y(e,"enum_for",["each_key"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),z(l,"$each_value",function $(){var t=$.$$p||u,e=this;return $.$$p=null,j(t)?I(e,e,function(r,i){return t(i),[!1,e]}):y(e,"enum_for",["each_value"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),z(l,"$empty?",function(){var t=this;return t.size===0}),z(l,"$except",function(t){var e,r,i=this;return e=L(arguments),r=e,y(i.$dup(),"except!",R(r))},-1),z(l,"$except!",function(t){var e,r,i=this;return e=L(arguments),r=e,y(r,"each",[],function a(o){var v=a.$$s==null?this:a.$$s;return o==null&&(o=u),v.$delete(o)},{$$s:i}),i},-1),z(l,"$fetch",function $(t,e){var r=$.$$p||u,i=this;$.$$p=null;var a=O(i,t);return a!==void 0?a:r!==u?r(t):e!==void 0?e:te.$raise(d("KeyError").$new("key not found: "+t.$inspect(),new Map([["key",t],["receiver",i]])))},-2),z(l,"$fetch_values",function $(t){var e=$.$$p||u,r,i,a=this;return $.$$p=null,r=L(arguments),i=r,y(i,"map",[],function o(v){var S=o.$$s==null?this:o.$$s;return v==null&&(v=u),y(S,"fetch",[v],e.$to_proc())},{$$s:a})},-1),z(l,"$flatten",function(t){var e=this;t==null&&(t=1),t=Y["$coerce_to!"](t,d("Integer"),"to_int");var r=[];return I(e,r,function(i,a){return r.push(i),a.$$is_array?t===1?(r.push(a),[!1,r]):(r=r.concat(a.$flatten(t-2)),[!1,r]):(r.push(a),[!1,r])})},-1),z(l,"$freeze",function(){var t=this;return j(t["$frozen?"]())?t:Z(t)}),z(l,"$has_key?",function(t){var e=this;return O(e,t)!==void 0}),z(l,"$has_value?",function(t){var e=this;return I(e,!1,function(r,i){return i["$=="](t)?[!0,!0]:[!1,!1]})});var c;z(l,"$hash",function(){var t=this,e=c===void 0,r=t.$object_id(),i=p(),a,o,v,S=t.size,F=new Int32Array(S);if(i=H(i,4),i=H(i,S),e)c=Object.create(null);else if(c[r])return H(i,16843009);try{for(a in c)if(o=c[a],t["$eql?"](o))return H(i,16843009);for(c[r]=t,v=0,I(t,!1,function(T,J){return F[v]=[1883326802,T,J].$hash(),v++,[!1,!1]}),F=F.sort(),v=0;v<F.length;v++)i=H(i,F[v]);return i}finally{e&&(c=void 0)}}),z(l,"$index",function(t){var e=this;return I(e,u,function(r,i){return i["$=="](t)?[!0,r]:[!1,u]})}),z(l,"$indexes",function(t){var e,r,i=this;e=L(arguments),r=e;for(var a=[],o=0,v=r.length,S,F;o<v;o++){if(S=r[o],F=O(i,S),F===void 0){a.push(i.$default());continue}a.push(F)}return a},-1);var s;return z(l,"$inspect",function(){var t=this,e=s===void 0,r=t.$object_id(),i=[];return function(){try{if(e&&(s={}),s.hasOwnProperty(r))return"{...}";return s[r]=!0,I(t,!1,function(a,o){return o=G("Opal").$inspect(o),a=G("Opal").$inspect(a),i.push(a+"=>"+o),[!1,!1]}),"{"+i.join(", ")+"}";return u}finally{e&&(s=void 0)}}()}),z(l,"$invert",function(){var t=this,e=new Map;return I(t,e,function(r,i){return V(e,i,r),[!1,e]})}),z(l,"$keep_if",function $(){var t=$.$$p||u,e=this;return $.$$p=null,j(t)?(C(e),I(e,e,function(r,i){var a=t(r,i);return(a===!1||a===u)&&P(e,r),[!1,e]})):y(e,"enum_for",["keep_if"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),z(l,"$keys",function(){var t=this;return Array.from(t.keys())}),z(l,"$length",function(){var t=this;return t.size}),z(l,"$merge",function $(t){var e=$.$$p||u,r,i,a=this;return $.$$p=null,r=L(arguments),i=r,y(a.$dup(),"merge!",R(i),e.$to_proc())},-1),z(l,"$merge!",function $(t){var e=$.$$p||u,r,i,a=this;$.$$p=null,r=L(arguments),i=r,C(a);var o,v;for(o=0;o<i.length;++o)v=Y["$coerce_to!"](i[o],d("Hash"),"to_hash"),e===u?I(v,!1,function(S,F){return V(a,S,F),[!1,!1]}):I(v,!1,function(S,F){var T=O(a,S);return T===void 0?(V(a,S,F),[!1,!1]):(V(a,S,e(S,T,F)),[!1,!1])});return a},-1),z(l,"$rassoc",function(t){var e=this;return I(e,u,function(r,i){return i["$=="](t)?[!0,[r,i]]:[!1,u]})}),z(l,"$rehash",function(){var t=this;return C(t),n.hash_rehash(t)}),z(l,"$reject",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!j(t))return y(e,"enum_for",["reject"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var r=new Map;return I(e,r,function(i,a){var o=t(i,a);return(o===!1||o===u)&&V(r,i,a),[!1,r]})}),z(l,"$reject!",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!j(t))return y(e,"enum_for",["reject!"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});C(e);var r=u;return I(e,r,function(i,a){var o=t(i,a);return o!==!1&&o!==u&&(P(e,i),r=e),[!1,r]})}),z(l,"$replace",function(t){var e=this;return C(e),t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),e.$clear(),I(t,!1,function(r,i){return V(e,r,i),[!1,!1]}),j(t.$default_proc())?e["$default_proc="](t.$default_proc()):e["$default="](t.$default()),e}),z(l,"$select",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!j(t))return y(e,"enum_for",["select"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var r=new Map;return I(e,r,function(i,a){var o=t(i,a);return o!==!1&&o!==u&&V(r,i,a),[!1,r]})}),z(l,"$select!",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!j(t))return y(e,"enum_for",["select!"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});C(e);var r=u;return I(e,r,function(i,a){var o=t(i,a);return(o===!1||o===u)&&(P(e,i),r=e),[!1,r]})}),z(l,"$shift",function(){var t=this;return C(t),I(t,u,function(e,r){return[!0,[e,P(t,e)]]})}),z(l,"$slice",function(t){var e,r,i=this;e=L(arguments),r=e;for(var a=new Map,o=0,v=r.length;o<v;o++){var S=r[o],F=O(i,S);F!==void 0&&V(a,S,F)}return a},-1),z(l,"$to_a",function(){var t=this,e=[];return I(t,e,function(r,i){return e.push([r,i]),[!1,e]})}),z(l,"$to_h",function $(){var t=$.$$p||u,e=this;if($.$$p=null,t!==u)return y(e,"map",[],t.$to_proc()).$to_h();if(e.$$class===n.Hash)return e;var r=new Map;return b(e,r),r}),z(l,"$to_hash",g),z(l,"$to_proc",function(){var t=this;return y(t,"proc",[],function e(r){var i=e.$$s==null?this:e.$$s;return r==null&&te.$raise(d("ArgumentError"),"no key given"),i["$[]"](r)},{$$arity:-1,$$s:t})}),z(l,"$transform_keys",function $(t){var e=$.$$p||u,r=this;if($.$$p=null,t==null&&(t=u),q(e)&&q(t))return y(r,"enum_for",["transform_keys"],function a(){var o=a.$$s==null?this:a.$$s;return o.$size()},{$$s:r});var i=new Map;return I(r,i,function(a,o){var v;return t!==u&&(v=O(t,a)),v===void 0&&e&&e!==u&&(v=e(a)),v===void 0&&(v=a),V(i,v,o),[!1,i]})},-1),z(l,"$transform_keys!",function $(t){var e=$.$$p||u,r=this;if($.$$p=null,t==null&&(t=u),q(e)&&q(t))return y(r,"enum_for",["transform_keys!"],function a(){var o=a.$$s==null?this:a.$$s;return o.$size()},{$$s:r});C(r);var i=new Map;return I(r,r,function(a,o){var v;return t!==u&&(v=O(t,a)),v===void 0&&e&&e!==u&&(v=e(a)),v===void 0?[!1,r]:(O(i,a)||P(r,a),V(r,v,o),V(i,v,!0),[!1,r])})},-1),z(l,"$transform_values",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!j(t))return y(e,"enum_for",["transform_values"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var r=new Map;return I(e,r,function(i,a){return V(r,i,t(a)),[!1,r]})}),z(l,"$transform_values!",function $(){var t=$.$$p||u,e=this;return $.$$p=null,j(t)?(C(e),I(e,e,function(r,i){return V(e,r,t(i)),[!1,e]})):y(e,"enum_for",["transform_values!"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),z(l,"$values",function(){var t=this;return Array.from(t.values())}),M(l,"each_pair","each"),M(l,"eql?","=="),M(l,"filter","select"),M(l,"filter!","select!"),M(l,"include?","has_key?"),M(l,"indices","indexes"),M(l,"key","index"),M(l,"key?","has_key?"),M(l,"member?","has_key?"),M(l,"size","length"),M(l,"store","[]="),M(l,"to_s","inspect"),M(l,"update","merge!"),M(l,"value?","has_value?"),M(l,"values_at","indexes")}("::",Map,m)};Opal.modules["corelib/number"]=function(n){var k=n.klass,b=n.Opal,P=n.Kernel,I=n.def,O=n.eqeqeq,V=n.truthy,C=n.rb_gt,Z=n.not,p=n.rb_lt,H=n.alias,ie=n.send2,L=n.find_super,Y=n.send,te=n.rb_plus,W=n.rb_minus,z=n.eqeq,y=n.return_self,K=n.rb_divide,B=n.to_ary,j=n.rb_times,R=n.rb_le,g=n.rb_ge,q=n.return_val,M=n.const_set,x=n.top,m=[],u=n.nil,d=n.$$$;return n.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),x.$require("corelib/numeric"),function(A,h,_){var l=k(A,h,"Number");b.$bridge(Number,l),n.prop(l.$$prototype,"$$is_number",!0),l.$$is_number_class=!0;var E=new Map;(function(e,r){return I(e,"$allocate",function(){var a=this;return P.$raise(d("TypeError"),"allocator undefined for "+a.$name())}),n.udef(e,"$new"),u})(n.get_singleton_class(l)),I(l,"$coerce",function(r){var i=this;if(r===u)P.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float");else{if(r.$$is_string)return[P.$Float(r),i];if(r["$respond_to?"]("to_f"))return[b["$coerce_to!"](r,d("Float"),"to_f"),i];if(r.$$is_number)return[r,i];P.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float")}}),I(l,"$__id__",function(){var r=this;if(r|r===0)return r*2+1;if(E.has(r))return E.get(r);var i=n.uid();return E.set(r,i),i}),I(l,"$hash",function(){var r=this;return r|r===0?r.$__id__():r.toString().$hash()}),I(l,"$+",function(r){var i=this;return r.$$is_number?i+r:i.$__coerced__("+",r)}),I(l,"$-",function(r){var i=this;return r.$$is_number?i-r:i.$__coerced__("-",r)}),I(l,"$*",function(r){var i=this;return r.$$is_number?i*r:i.$__coerced__("*",r)}),I(l,"$/",function(r){var i=this;return r.$$is_number?i/r:i.$__coerced__("/",r)}),I(l,"$%",function(r){var i=this;if(r.$$is_number){if(r==-1/0)return r;if(r==0)P.$raise(d("ZeroDivisionError"),"divided by 0");else return r<0||i<0?(i%r+r)%r:i%r}else return i.$__coerced__("%",r)}),I(l,"$&",function(r){var i=this;return r.$$is_number?i&r:i.$__coerced__("&",r)}),I(l,"$|",function(r){var i=this;return r.$$is_number?i|r:i.$__coerced__("|",r)}),I(l,"$^",function(r){var i=this;return r.$$is_number?i^r:i.$__coerced__("^",r)}),I(l,"$<",function(r){var i=this;return r.$$is_number?i<r:i.$__coerced__("<",r)}),I(l,"$<=",function(r){var i=this;return r.$$is_number?i<=r:i.$__coerced__("<=",r)}),I(l,"$>",function(r){var i=this;return r.$$is_number?i>r:i.$__coerced__(">",r)}),I(l,"$>=",function(r){var i=this;return r.$$is_number?i>=r:i.$__coerced__(">=",r)});var G=function(e,r){return r.$$is_number?isNaN(e)||isNaN(r)?u:e>r?1:e<r?-1:0:e.$__coerced__("<=>",r)};I(l,"$<=>",function(r){var i=this;try{return G(i,r)}catch(a){if(n.rescue(a,[d("ArgumentError")]))try{return u}finally{n.pop_exception(a)}else throw a}}),I(l,"$<<",function(r){var i=this;return r=b["$coerce_to!"](r,d("Integer"),"to_int"),r>0?i<<r:i>>-r}),I(l,"$>>",function(r){var i=this;return r=b["$coerce_to!"](r,d("Integer"),"to_int"),r>0?i>>r:i<<-r}),I(l,"$[]",function(r){var i=this;return r=b["$coerce_to!"](r,d("Integer"),"to_int"),r<0?0:r>=32?i<0?1:0:i>>r&1}),I(l,"$+@",function(){var r=this;return+r}),I(l,"$-@",function(){var r=this;return-r}),I(l,"$~",function(){var r=this;return~r}),I(l,"$**",function(r){var i=this;return O(d("Integer"),r)?Z(d("Integer")["$==="](i))||V(C(r,0))?Math.pow(i,r):d("Rational").$new(i,1)["$**"](r):V(p(i,0))&&(O(d("Float"),r)||O(d("Rational"),r))?d("Complex").$new(i,0)["$**"](r.$to_f()):V(r.$$is_number!=null)?Math.pow(i,r):i.$__coerced__("**",r)}),I(l,"$==",function(r){var i=this;return r.$$is_number?i.valueOf()===r.valueOf():r["$respond_to?"]("==")?r["$=="](i):!1}),H(l,"===","=="),I(l,"$abs",function(){var r=this;return Math.abs(r)}),I(l,"$abs2",function(){var r=this;return Math.abs(r*r)}),I(l,"$allbits?",function(r){var i=this;return r=b["$coerce_to!"](r,d("Integer"),"to_int"),(i&r)==r}),I(l,"$anybits?",function(r){var i=this;return r=b["$coerce_to!"](r,d("Integer"),"to_int"),(i&r)!==0}),I(l,"$angle",function(){var r=this;return V(r["$nan?"]())?r:r==0?1/r>0?0:Math.PI:r<0?Math.PI:0}),I(l,"$bit_length",function(){var r=this;if(O(d("Integer"),r)||P.$raise(d("NoMethodError").$new("undefined method `bit_length` for "+r+":Float","bit_length")),r===0||r===-1)return 0;for(var i=0,a=r<0?~r:r;a!=0;)i+=1,a>>>=1;return i}),I(l,"$ceil",function(r){var i=this;r==null&&(r=0);var a=i.$to_f();if(a%1===0&&r>=0)return a;var o=Math.pow(10,r),v=Math.ceil(a*o)/o;return a%1===0&&(v=Math.round(v)),v},-1),I(l,"$chr",function(r){var i=this;return n.enc(String.fromCharCode(i),r||"BINARY")},-1),I(l,"$denominator",function e(){var r=e.$$p||u,i=this;return e.$$p=null,V(i["$nan?"]())||V(i["$infinite?"]())?1:ie(i,L(i,"denominator",e,!1,!0),"denominator",[],r)}),I(l,"$downto",function e(r){var i=e.$$p||u,a=this;if(e.$$p=null,i===u)return Y(a,"enum_for",["downto",r],function v(){var S=v.$$s==null?this:v.$$s;return O(d("Numeric"),r)||P.$raise(d("ArgumentError"),"comparison of "+S.$class()+" with "+r.$class()+" failed"),V(C(r,S))?0:te(W(S,r),1)},{$$s:a});r.$$is_number||P.$raise(d("ArgumentError"),"comparison of "+a.$class()+" with "+r.$class()+" failed");for(var o=a;o>=r;o--)i(o);return a}),I(l,"$equal?",function(r){var i=this,a=u;return V(a=i["$=="](r))?a:isNaN(i)&&isNaN(r)}),I(l,"$even?",function(){var r=this;return r%2===0}),I(l,"$floor",function(r){var i=this;r==null&&(r=0);var a=i.$to_f();if(a%1===0&&r>=0)return a;var o=Math.pow(10,r),v=Math.floor(a*o)/o;return a%1===0&&(v=Math.round(v)),v},-1),I(l,"$gcd",function(r){var i=this;O(d("Integer"),r)||P.$raise(d("TypeError"),"not an integer");for(var a=Math.abs(i),o=Math.abs(r);a>0;){var v=a;a=o%a,o=v}return o}),I(l,"$gcdlcm",function(r){var i=this;return[i.$gcd(r),i.$lcm(r)]}),I(l,"$integer?",function(){var r=this;return r%1===0}),I(l,"$is_a?",function e(r){var i=e.$$p||u,a=this;return e.$$p=null,z(r,d("Integer"))&&O(d("Integer"),a)||z(r,d("Integer"))&&O(d("Integer"),a)||z(r,d("Float"))&&O(d("Float"),a)?!0:ie(a,L(a,"is_a?",e,!1,!0),"is_a?",[r],i)}),I(l,"$instance_of?",function e(r){var i=e.$$p||u,a=this;return e.$$p=null,z(r,d("Integer"))&&O(d("Integer"),a)||z(r,d("Integer"))&&O(d("Integer"),a)||z(r,d("Float"))&&O(d("Float"),a)?!0:ie(a,L(a,"instance_of?",e,!1,!0),"instance_of?",[r],i)}),I(l,"$lcm",function(r){var i=this;return O(d("Integer"),r)||P.$raise(d("TypeError"),"not an integer"),i==0||r==0?0:Math.abs(i*r/i.$gcd(r))}),I(l,"$next",function(){var r=this;return r+1}),I(l,"$nobits?",function(r){var i=this;return r=b["$coerce_to!"](r,d("Integer"),"to_int"),(i&r)==0}),I(l,"$nonzero?",function(){var r=this;return r==0?u:r}),I(l,"$numerator",function e(){var r=e.$$p||u,i=this;return e.$$p=null,V(i["$nan?"]())||V(i["$infinite?"]())?i:ie(i,L(i,"numerator",e,!1,!0),"numerator",[],r)}),I(l,"$odd?",function(){var r=this;return r%2!==0}),I(l,"$ord",y),I(l,"$pow",function(r,i){var a=this;return a==0&&P.$raise(d("ZeroDivisionError"),"divided by 0"),i===void 0?a["$**"](r):(d("Integer")["$==="](r)||P.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),r<0&&P.$raise(d("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),d("Integer")["$==="](i)||P.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),i===0&&P.$raise(d("ZeroDivisionError"),"divided by 0"),a["$**"](r)["$%"](i))},-2),I(l,"$pred",function(){var r=this;return r-1}),I(l,"$quo",function e(r){var i=e.$$p||u,a=this;return e.$$p=null,O(d("Integer"),a)?ie(a,L(a,"quo",e,!1,!0),"quo",[r],i):K(a,r)}),I(l,"$rationalize",function(r){var i,a,o=this,v=u,S=u;return arguments.length>1&&P.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),O(d("Integer"),o)?d("Rational").$new(o,1):V(o["$infinite?"]())?P.$raise(d("FloatDomainError"),"Infinity"):V(o["$nan?"]())?P.$raise(d("FloatDomainError"),"NaN"):V(r==null)?(a=d("Math").$frexp(o),i=B(a),v=i[0]==null?u:i[0],S=i[1]==null?u:i[1],v=d("Math").$ldexp(v,d(d("Float"),"MANT_DIG")).$to_i(),S=W(S,d(d("Float"),"MANT_DIG")),d("Rational").$new(j(2,v),1["$<<"](W(1,S))).$rationalize(d("Rational").$new(1,1["$<<"](W(1,S))))):o.$to_r().$rationalize(r)},-1),I(l,"$remainder",function(r){var i=this;return W(i,j(r,K(i,r).$truncate()))}),I(l,"$round",function(r){var i,a,o=this,v=u;if(O(d("Integer"),o)){if(V(r==null)||(O(d("Float"),r)&&V(r["$infinite?"]())&&P.$raise(d("RangeError"),"Infinity"),r=b["$coerce_to!"](r,d("Integer"),"to_int"),V(p(r,d(d("Integer"),"MIN")))&&P.$raise(d("RangeError"),"out of bounds"),V(r>=0)))return o;if(r=r["$-@"](),.415241*r-.125>o.$size())return 0;var S=Math.pow(10,r),F=Math.floor((Math.abs(o)+S/2)/S)*S;return o<0?-F:F}else{if(V(o["$nan?"]())&&V(r==null)&&P.$raise(d("FloatDomainError"),"NaN"),r=b["$coerce_to!"](r||0,d("Integer"),"to_int"),V(R(r,0)))V(o["$nan?"]())?P.$raise(d("RangeError"),"NaN"):V(o["$infinite?"]())&&P.$raise(d("FloatDomainError"),"Infinity");else{if(z(r,0))return Math.round(o);if(V(o["$nan?"]())||V(o["$infinite?"]()))return o}return a=d("Math").$frexp(o),i=B(a),i[0]==null||i[0],v=i[1]==null?u:i[1],V(g(r,W(te(d(d("Float"),"DIG"),2),V(C(v,0))?K(v,4):W(K(v,3),1))))?o:V(p(r,(V(C(v,0))?te(K(v,3),1):K(v,4))["$-@"]()))?0:Math.round(o*Math.pow(10,r))/Math.pow(10,r)}},-1),I(l,"$times",function e(){var r=e.$$p||u,i=this;if(e.$$p=null,!V(r))return Y(i,"enum_for",["times"],function o(){var v=o.$$s==null?this:o.$$s;return v},{$$s:i});for(var a=0;a<i;a++)r(a);return i}),I(l,"$to_f",y),I(l,"$to_i",function(){var r=this;return r<0?Math.ceil(r):Math.floor(r)}),I(l,"$to_r",function(){var r,i,a=this,o=u,v=u;return O(d("Integer"),a)?d("Rational").$new(a,1):(i=d("Math").$frexp(a),r=B(i),o=r[0]==null?u:r[0],v=r[1]==null?u:r[1],o=d("Math").$ldexp(o,d(d("Float"),"MANT_DIG")).$to_i(),v=W(v,d(d("Float"),"MANT_DIG")),j(o,d(d("Float"),"RADIX")["$**"](v)).$to_r())}),I(l,"$to_s",function(r){var i=this;return r==null&&(r=10),r=b["$coerce_to!"](r,d("Integer"),"to_int"),(V(p(r,2))||V(C(r,36)))&&P.$raise(d("ArgumentError"),"invalid radix "+r),z(i,0)&&V(1/i===-1/0)?"-0.0":i.toString(r)},-1),I(l,"$truncate",function(r){var i=this;r==null&&(r=0);var a=i.$to_f();if(a%1===0&&r>=0)return a;var o=Math.pow(10,r),v=parseInt(a*o,10)/o;return a%1===0&&(v=Math.round(v)),v},-1),I(l,"$digits",function(r){var i=this;r==null&&(r=10),V(p(i,0))&&P.$raise(d(d("Math"),"DomainError"),"out of domain"),r=b["$coerce_to!"](r,d("Integer"),"to_int"),V(p(r,2))&&P.$raise(d("ArgumentError"),"invalid radix "+r),i!=parseInt(i)&&P.$raise(d("NoMethodError"),"undefined method `digits' for "+i.$inspect());var a=i,o=[];if(i==0)return[0];for(;a!=0;)o.push(a%r),a=parseInt(a/r,10);return o},-1),I(l,"$divmod",function e(r){var i=e.$$p||u,a=this;return e.$$p=null,V(a["$nan?"]())||V(r["$nan?"]())?P.$raise(d("FloatDomainError"),"NaN"):V(a["$infinite?"]())?P.$raise(d("FloatDomainError"),"Infinity"):ie(a,L(a,"divmod",e,!1,!0),"divmod",[r],i)}),I(l,"$upto",function e(r){var i=e.$$p||u,a=this;if(e.$$p=null,i===u)return Y(a,"enum_for",["upto",r],function v(){var S=v.$$s==null?this:v.$$s;return O(d("Numeric"),r)||P.$raise(d("ArgumentError"),"comparison of "+S.$class()+" with "+r.$class()+" failed"),V(p(r,S))?0:te(W(r,S),1)},{$$s:a});r.$$is_number||P.$raise(d("ArgumentError"),"comparison of "+a.$class()+" with "+r.$class()+" failed");for(var o=a;o<=r;o++)i(o);return a}),I(l,"$zero?",function(){var r=this;return r==0}),I(l,"$size",q(4)),I(l,"$nan?",function(){var r=this;return isNaN(r)}),I(l,"$finite?",function(){var r=this;return r!=1/0&&r!=-1/0&&!isNaN(r)}),I(l,"$infinite?",function(){var r=this;return r==1/0?1:r==-1/0?-1:u}),I(l,"$positive?",function(){var r=this;return r!=0&&(r==1/0||1/r>0)}),I(l,"$negative?",function(){var r=this;return r==-1/0||1/r<0});function c(e){var r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),r}function s(e){return new DataView(e.buffer).getFloat64(0,!0)}function $(e){for(var r=c(e),i=0;i<r.length;i++)if(r[i]===255)r[i]=0;else{r[i]++;break}return s(r)}function t(e){for(var r=c(e),i=0;i<r.length;i++)if(r[i]===0)r[i]=255;else{r[i]--;break}return s(r)}return I(l,"$next_float",function(){var r=this;return z(r,d(d("Float"),"INFINITY"))?d(d("Float"),"INFINITY"):V(r["$nan?"]())?d(d("Float"),"NAN"):V(g(r,0))?$(Math.abs(r)):t(r)}),I(l,"$prev_float",function(){var r=this;return z(r,d(d("Float"),"INFINITY")["$-@"]())?d(d("Float"),"INFINITY")["$-@"]():V(r["$nan?"]())?d(d("Float"),"NAN"):V(C(r,0))?t(r):-$(Math.abs(r))}),H(l,"arg","angle"),H(l,"eql?","=="),H(l,"fdiv","/"),H(l,"inspect","to_s"),H(l,"kind_of?","is_a?"),H(l,"magnitude","abs"),H(l,"modulo","%"),H(l,"object_id","__id__"),H(l,"phase","angle"),H(l,"succ","next"),H(l,"to_int","to_i")}("::",d("Numeric")),M("::","Fixnum",d("Number")),function(A,h,_){var l=k(A,h,"Integer"),E=[l].concat(_);return l.$$is_number_class=!0,l.$$is_integer_class=!0,function(G,c){var s=[G].concat(c),$=n.$r(s);return I(G,"$allocate",function(){var e=this;return P.$raise(d("TypeError"),"allocator undefined for "+e.$name())}),n.udef(G,"$new"),I(G,"$sqrt",function(e){return e=b["$coerce_to!"](e,d("Integer"),"to_int"),e<0&&P.$raise(d(d("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(e),10)}),I(G,"$try_convert",function(e){var r=this;return $("Opal")["$coerce_to?"](e,r,"to_int")})}(n.get_singleton_class(l),E),M(l,"MAX",Math.pow(2,30)-1),M(l,"MIN",-Math.pow(2,30))}("::",d("Numeric"),m),function(A,h,_){var l=k(A,h,"Float");return l.$$is_number_class=!0,function(E,G){return I(E,"$allocate",function(){var s=this;return P.$raise(d("TypeError"),"allocator undefined for "+s.$name())}),n.udef(E,"$new"),I(E,"$===",function(s){return!!s.$$is_number})}(n.get_singleton_class(l)),M(l,"INFINITY",1/0),M(l,"MAX",Number.MAX_VALUE),M(l,"MIN",Number.MIN_VALUE),M(l,"NAN",NaN),M(l,"DIG",15),M(l,"MANT_DIG",53),M(l,"RADIX",2),M(l,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",d("Numeric"))};Opal.modules["corelib/range"]=function(n){var k=n.klass,b=n.truthy,P=n.Kernel,I=n.def,O=n.not,V=n.send2,C=n.find_super,Z=n.lambda,p=n.send,H=n.rb_ge,ie=n.rb_gt,L=n.eqeq,Y=n.rb_le,te=n.rb_lt,W=n.eqeqeq,z=n.return_ivar,y=n.rb_minus,K=n.Opal,B=n.rb_divide,j=n.rb_plus,R=n.rb_times,g=n.thrower,q=n.alias,M=n.top,x=[],m=n.nil,u=n.$$$;return n.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),M.$require("corelib/enumerable"),function(d,A,h){var _=k(d,A,"Range"),l=[_].concat(h),E=n.$r(l),G=_.$$prototype;G.begin=G.end=G.excl=m,_.$include(u("Enumerable")),_.$$prototype.$$is_range=!0,_.$attr_reader("begin","end"),I(_,"$initialize",function($,t,e){var r=this;return e==null&&(e=!1),b(r.begin)&&P.$raise(u("NameError"),"'initialize' called twice"),b($["$<=>"](t))||b($["$nil?"]())||b(t["$nil?"]())||P.$raise(u("ArgumentError"),"bad value for range"),r.begin=$,r.end=t,r.excl=e},-3),I(_,"$===",function($){var t=this;return b($.$$is_range)?!1:t["$cover?"]($)});function c(s){return s.begin===m||s.end===m||s.begin===-1/0||s.end===1/0||s.begin===1/0||s.end===-1/0}return I(_,"$count",function s(){var $=s.$$p||m,t=this;return s.$$p=null,O($!==m)&&b(c(t))?u(u("Float"),"INFINITY"):V(t,C(t,"count",s,!1,!0),"count",[],$)}),I(_,"$to_a",function s(){var $=s.$$p||m,t=this;return s.$$p=null,b(c(t))&&P.$raise(u("TypeError"),"cannot convert endless range to an array"),V(t,C(t,"to_a",s,!1,!0),"to_a",[],$)}),I(_,"$cover?",function($){var t=this,e=m,r=m,i=m,a=m,o=m,v=m,S=m,F=m;return e=Z(function(J,ee){var ae=m;return J==null&&(J=m),ee==null&&(ee=m),b(ae=J["$<=>"](ee))?ae:1}),b($.$$is_range)?(r=$.$begin(),i=$.$end(),a=$["$exclude_end?"](),b(t.begin)&&b(r["$nil?"]())||b(t.end)&&b(i["$nil?"]())||b(r)&&b(i)&&b(p(e.$call(r,i),"then",[],function(J){return J==null&&(J=m),b(a)?H(J,0):ie(J,0)}))||b(r)&&O(t["$cover?"](r))?!1:(o=e.$call(t.end,i),L(t.excl,a)?H(o,0):b(t.excl)?ie(o,0):b(H(o,0))?!0:(v=$.$max(),b(S=v["$nil?"]()["$!"]())?Y(e.$call(v,t.end),0):S))):b(t.begin)&&b(ie(e.$call(t.begin,$),0))?!1:b(t.end["$nil?"]())?!0:(F=e.$call($,t.end),b(t.excl)?te(F,0):Y(F,0))}),I(_,"$each",function s(){var $=s.$$p||m,t=this,e=m,r=m,i=m;if(s.$$p=null,$===m)return p(t,"enum_for",["each"],function v(){var S=v.$$s==null?this:v.$$s;return S.$size()},{$$s:t});var a,o;if(t.begin.$$is_number&&t.end.$$is_number){for((t.begin%1!==0||t.end%1!==0)&&P.$raise(u("TypeError"),"can't iterate from Float"),a=t.begin,o=t.end+(b(t.excl)?0:1);a<o;a++)$(a);return t}if(t.begin.$$is_string&&t.end.$$is_string)return p(t.begin,"upto",[t.end,t.excl],$.$to_proc()),t;for(e=t.begin,r=t.end,b(e["$respond_to?"]("succ"))||P.$raise(u("TypeError"),"can't iterate from "+e.$class());b(b(i=t.end["$nil?"]())?i:te(e["$<=>"](r),0));)n.yield1($,e),e=e.$succ();return O(t.excl)&&L(e,r)&&n.yield1($,e),t}),I(_,"$eql?",function($){var t=this,e=m,r=m;return W(u("Range"),$)?b(e=b(r=t.excl["$==="]($["$exclude_end?"]()))?t.begin["$eql?"]($.$begin()):r)?t.end["$eql?"]($.$end()):e:!1}),I(_,"$exclude_end?",z("excl")),I(_,"$first",function s($){var t=s.$$p||m,e=this;return s.$$p=null,b(e.begin["$nil?"]())&&P.$raise(u("RangeError"),"cannot get the minimum of beginless range"),b($==null)?e.begin:V(e,C(e,"first",s,!1,!0),"first",[$],t)},-1),I(_,"$include?",function s($){var t=s.$$p||m,e=this,r=m,i=m;if(s.$$p=null,b(e.begin.$$is_number||e.end.$$is_number)||b(e.begin["$is_a?"](u("Time")))||b(e.end["$is_a?"](u("Time")))||b(u("Integer").$try_convert(e.begin))||b(u("Integer").$try_convert(e.end)))return e["$cover?"]($);if(b(e.begin.$$is_string||e.end.$$is_string)){if(b(e.begin.$$is_string&&e.end.$$is_string))return p(e.begin.$upto(e.end,e.excl),"any?",[],function(o){return o==null&&(o=m),o["$=="]($)});if(b(e.begin["$nil?"]()))return r=$["$<=>"](e.end),b(i=r["$nil?"]()["$!"]())?b(e.excl)?te(r,0):Y(r,0):i;if(b(e.end["$nil?"]()))return r=e.begin["$<=>"]($),b(i=r["$nil?"]()["$!"]())?Y(r,0):i}return V(e,C(e,"include?",s,!1,!0),"include?",[$],t)}),I(_,"$last",function($){var t=this;return b(t.end["$nil?"]())&&P.$raise(u("RangeError"),"cannot get the maximum of endless range"),b($==null)?t.end:t.$to_a().$last($)},-1),I(_,"$max",function s(){var $=s.$$p||m,t=this;return s.$$p=null,b(t.end["$nil?"]())?P.$raise(u("RangeError"),"cannot get the maximum of endless range"):$!==m?V(t,C(t,"max",s,!1,!0),"max",[],$):O(t.begin["$nil?"]())&&(b(ie(t.begin,t.end))||b(t.excl)&&L(t.begin,t.end))?m:t.excl?t.end-1:t.end}),I(_,"$min",function s(){var $=s.$$p||m,t=this;return s.$$p=null,b(t.begin["$nil?"]())?P.$raise(u("RangeError"),"cannot get the minimum of beginless range"):$!==m?V(t,C(t,"min",s,!1,!0),"min",[],$):O(t.end["$nil?"]())&&(b(ie(t.begin,t.end))||b(t.excl)&&L(t.begin,t.end))?m:t.begin}),I(_,"$size",function(){var $=this.begin,t=this.end;if(u("Numeric")["$==="]($)){if(u("Numeric")["$==="](t)){var e=y(t,$);return e<0?0:(this.excl||(e+=1),u("Float")["$==="]($)||u("Float")["$==="](t)?Math.floor(e):e)}else if(t===m)return 1/0}else if($===m&&u("Numeric")["$==="](t))return 1/0;return m}),I(_,"$step",function s($){var t=s.$$p||m,e=this,r=m,i=m;s.$$p=null;function a(){$==null?$=1:$.$$is_number||($=K["$coerce_to!"]($,u("Integer"),"to_int")),$<0?P.$raise(u("ArgumentError"),"step can't be negative"):$===0&&P.$raise(u("ArgumentError"),"step can't be 0")}function o(){if(!e.begin["$respond_to?"]("succ")||e.begin.$$is_string&&e.end.$$is_string)return m;if($%1===0)return B(e.$size(),$).$ceil();var v=e.begin,S=e.end,F=Math.abs,T=Math.floor,J=(F(v)+F(S)+F(S-v))/F($)*u(u("Float"),"EPSILON"),ee;return J>.5&&(J=.5),e.excl?(ee=T((S-v)/$-J),ee*$+v<S&&ee++):ee=T((S-v)/$+J)+1,ee}return t===m?(b(e.begin["$is_a?"](E("Numeric")))||b(e.begin["$nil?"]()))&&(b(e.end["$is_a?"](E("Numeric")))||b(e.end["$nil?"]()))&&O(b(r=e.begin["$nil?"]())?e.end["$nil?"]():r)?u(u("Enumerator"),"ArithmeticSequence").$new(e,$,"step"):p(e,"enum_for",["step",$],function(){return a(),o()}):(a(),b(e.begin.$$is_number&&e.end.$$is_number)?(i=0,function(){try{var v=g("break");return p(e,"loop",[],function S(){var F=S.$$s==null?this:S.$$s,T=m;return F.begin==null&&(F.begin=m),F.excl==null&&(F.excl=m),F.end==null&&(F.end=m),T=j(F.begin,R(i,$)),b(F.excl)?b(H(T,F.end))&&v.$throw(m,S.$$is_lambda):b(ie(T,F.end))&&v.$throw(m,S.$$is_lambda),n.yield1(t,T),i=j(i,1)},{$$s:e})}catch(S){if(S===v)return S.$v;throw S}finally{v.is_orphan=!0}}()):(e.begin.$$is_string&&e.end.$$is_string&&$%1!==0&&P.$raise(u("TypeError"),"no implicit conversion to float from string"),p(e,"each_with_index",[],function(S,F){return S==null&&(S=m),F==null&&(F=m),L(F["$%"]($),0)?n.yield1(t,S):m})),e)},-1),I(_,"$%",function($){var t=this;return b(t.begin["$is_a?"](E("Numeric")))&&b(t.end["$is_a?"](E("Numeric")))?u(u("Enumerator"),"ArithmeticSequence").$new(t,$,"%"):t.$step($)}),I(_,"$bsearch",function s(){var $=s.$$p||m,t=this;return s.$$p=null,$===m?t.$enum_for("bsearch"):(b(c(t)&&(t.begin.$$is_number||t.end.$$is_number))&&P.$raise(u("NotImplementedError"),"Can't #bsearch an infinite range"),b(t.begin.$$is_number&&t.end.$$is_number)||P.$raise(u("TypeError"),"can't do binary search for "+t.begin.$class()),p(t.$to_a(),"bsearch",[],$.$to_proc()))}),I(_,"$to_s",function(){var $=this,t=m;return""+(b(t=$.begin)?t:"")+(b($.excl)?"...":"..")+(b(t=$.end)?t:"")}),I(_,"$inspect",function(){var $=this,t=m;return""+(b(t=$.begin)?$.begin.$inspect():t)+(b($.excl)?"...":"..")+(b(t=$.end)?$.end.$inspect():t)}),I(_,"$marshal_load",function($){var t=this;return t.begin=$["$[]"]("begin"),t.end=$["$[]"]("end"),t.excl=$["$[]"]("excl")}),I(_,"$hash",function(){var $=this;return[u("Range"),$.begin,$.end,$.excl].$hash()}),q(_,"==","eql?"),q(_,"member?","include?")}("::",null,x)};Opal.modules["corelib/proc"]=function(n){var k=n.slice,b=n.each_ivar,P=n.klass,I=n.truthy,O=n.Kernel,V=n.defs,C=n.def,Z=n.send,p=n.to_a,H=n.return_self,ie=n.ensure_kwargs,L=n.hash_get,Y=n.Opal,te=n.alias,W=n.nil,z=n.$$$;return n.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(y,K){var B=P(y,K,"Proc");n.prop(B.$$prototype,"$$is_proc",!0),n.prop(B.$$prototype,"$$is_lambda",!1),V(B,"$new",function g(){var q=g.$$p||W;return g.$$p=null,I(q)||O.$raise(z("ArgumentError"),"tried to create a Proc object without a block"),q});function j(g,q){if(g.$$ret)try{return g.apply(null,q)}catch(M){if(M===g.$$ret)return M.$v;throw M}else return g.apply(null,q)}function R(g,q){if(g.$$brk)try{return n.yieldX(g,q)}catch(M){if(M===g.$$brk)return M.$v;throw M}else return n.yieldX(g,q)}return C(B,"$call",function g(q){var M=g.$$p||W,x,m,u=this;return g.$$p=null,x=k(arguments),m=x,M!==W&&(u.$$p=M),u.$$is_lambda?j(u,m):R(u,m)},-1),C(B,"$>>",function g(q){g.$$p;var M=this;return g.$$p=null,Z(O,"proc",[],function x(m){var u=x.$$p||W,d,A,h=x.$$s==null?this:x.$$s,_=W;return x.$$p=null,d=k(arguments),A=d,_=Z(h,"call",p(A),u.$to_proc()),q.$call(_)},{$$arity:-1,$$s:M})}),C(B,"$<<",function g(q){g.$$p;var M=this;return g.$$p=null,Z(O,"proc",[],function x(m){var u=x.$$p||W,d,A,h=x.$$s==null?this:x.$$s,_=W;return x.$$p=null,d=k(arguments),A=d,_=Z(q,"call",p(A),u.$to_proc()),h.$call(_)},{$$arity:-1,$$s:M})}),C(B,"$to_proc",H),C(B,"$lambda?",function(){var q=this;return!!q.$$is_lambda}),C(B,"$arity",function(){var q=this;return q.$$is_curried?-1:q.$$arity!=null?q.$$arity:q.length}),C(B,"$source_location",function(){var q=this,M=W;return q.$$is_curried?W:I(M=q.$$source_location)?M:W}),C(B,"$binding",function(){var q=this;return q.$$is_curried&&O.$raise(z("ArgumentError"),"Can't create Binding"),I(z("::","Binding","skip_raise")?"constant":W)?z("Binding").$new(W,[],q.$$s,q.$source_location()):W}),C(B,"$parameters",function(q){var M,x=this;if(q=ie(q),M=L(q,"lambda"),x.$$is_curried)return[["rest"]];if(x.$$parameters){if(M??x.$$is_lambda)return x.$$parameters;var m=[],u,d;for(u=0,d=x.$$parameters.length;u<d;u++){var A=x.$$parameters[u];A[0]==="req"&&(A=["opt",A[1]]),m.push(A)}return m}else return[]},-1),C(B,"$curry",function(q){var M=this;q===void 0?q=M.length:(q=Y["$coerce_to!"](q,z("Integer"),"to_int"),M.$$is_lambda&&q!==M.length&&O.$raise(z("ArgumentError"),"wrong number of arguments ("+q+" for "+M.length+")"));function x(){var m=k(arguments),u=m.length,d;return u>q&&M.$$is_lambda&&!M.$$is_curried&&O.$raise(z("ArgumentError"),"wrong number of arguments ("+u+" for "+q+")"),u>=q?M.$call.apply(M,m):(d=function(){return x.apply(null,m.concat(k(arguments)))},d.$$is_lambda=M.$$is_lambda,d.$$is_curried=!0,d)}return x.$$is_lambda=M.$$is_lambda,x.$$is_curried=!0,x},-1),C(B,"$dup",function(){var q=this,M=q.$$original_proc||q,x=function(){return M.apply(this,arguments)};return b(q,function(m){x[m]=q[m]}),x}),te(B,"===","call"),te(B,"clone","dup"),te(B,"yield","call"),te(B,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(n){var k=n.klass,b=n.def,P=n.truthy,I=n.slice,O=n.alias,V=n.Kernel,C=n.send,Z=n.to_a,p=n.nil,H=n.$$$;return n.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function(ie,L){var Y=k(ie,L,"Method"),te=Y.$$prototype;return te.method=te.receiver=te.owner=te.name=p,Y.$attr_reader("owner","receiver","name"),b(Y,"$initialize",function(z,y,K,B){var j=this;return j.receiver=z,j.owner=y,j.name=B,j.method=K}),b(Y,"$arity",function(){var z=this;return z.method.$arity()}),b(Y,"$parameters",function(){var z=this;return z.method.$$parameters}),b(Y,"$source_location",function(){var z=this,y=p;return P(y=z.method.$$source_location)?y:["(eval)",0]}),b(Y,"$comments",function(){var z=this,y=p;return P(y=z.method.$$comments)?y:[]}),b(Y,"$call",function W(z){var y=W.$$p||p,K,B,j=this;return W.$$p=null,K=I(arguments),B=K,j.method.$$p=y,j.method.apply(j.receiver,B)},-1),b(Y,"$curry",function(z){var y=this;return y.method.$curry(z)},-1),b(Y,"$>>",function(z){var y=this;return y.method["$>>"](z)}),b(Y,"$<<",function(z){var y=this;return y.method["$<<"](z)}),b(Y,"$unbind",function(){var z=this;return H("UnboundMethod").$new(z.receiver.$class(),z.owner,z.method,z.name)}),b(Y,"$to_proc",function(){var z=this,y=z.$call.bind(z);return y.$$unbound=z.method,y.$$is_lambda=!0,y.$$arity=z.method.$$arity==null?z.method.length:z.method.$$arity,y.$$parameters=z.method.$$parameters,y}),b(Y,"$inspect",function(){var z=this;return"#<"+z.$class()+": "+z.receiver.$class()+"#"+z.name+" (defined in "+z.owner+" in "+z.$source_location().$join(":")+")>"}),O(Y,"[]","call"),O(Y,"===","call")}("::",null),function(ie,L){var Y=k(ie,L,"UnboundMethod"),te=Y.$$prototype;return te.method=te.owner=te.name=te.source=p,Y.$attr_reader("source","owner","name"),b(Y,"$initialize",function(z,y,K,B){var j=this;return j.source=z,j.owner=y,j.method=K,j.name=B,j.$$method=K}),b(Y,"$arity",function(){var z=this;return z.method.$arity()}),b(Y,"$parameters",function(){var z=this;return z.method.$$parameters}),b(Y,"$source_location",function(){var z=this,y=p;return P(y=z.method.$$source_location)?y:["(eval)",0]}),b(Y,"$comments",function(){var z=this,y=p;return P(y=z.method.$$comments)?y:[]}),b(Y,"$bind",function(z){var y=this;if(y.owner.$$is_module||n.is_a(z,y.owner))return H("Method").$new(z,y.owner,y.method,y.name);V.$raise(H("TypeError"),"can't bind singleton method to a different class (expected "+z+".kind_of?("+y.owner+" to be true)")}),b(Y,"$bind_call",function W(z,y){var K=W.$$p||p,B,j,R=this;return W.$$p=null,B=I(arguments,1),j=B,C(R.$bind(z),"call",Z(j),K.$to_proc())},-2),b(Y,"$inspect",function(){var z=this;return"#<"+z.$class()+": "+z.source+"#"+z.name+" (defined in "+z.owner+" in "+z.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(n){var k=n.gvars,b=n.const_set,P=n.Object,I=n.nil;return n.add_stubs("new"),k["&"]=k["~"]=k["`"]=k["'"]=I,k.LOADED_FEATURES=k['"']=n.loaded_features,k.LOAD_PATH=k[":"]=[],k["/"]=`
`,k[","]=I,b("::","ARGV",[]),b("::","ARGF",P.$new()),b("::","ENV",new Map),k.VERBOSE=!1,k.DEBUG=!1,k.SAFE=0};Opal.modules["corelib/io"]=function(n){var k=n.klass,b=n.const_set,P=n.not,I=n.truthy,O=n.def,V=n.return_ivar,C=n.return_val,Z=n.slice,p=n.Kernel,H=n.gvars,ie=n.send,L=n.to_a,Y=n.rb_plus,te=n.neqeq,W=n.range,z=n.eqeq,y=n.to_ary,K=n.rb_gt,B=n.assign_ivar_val,j=n.alias,R,g=n.nil,q=n.$$$;n.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(x,m){var u=k(x,m,"IO"),d=u.$$prototype;return d.read_buffer=d.closed=g,b(u,"SEEK_SET",0),b(u,"SEEK_CUR",1),b(u,"SEEK_END",2),b(u,"SEEK_DATA",3),b(u,"SEEK_HOLE",4),b(u,"READABLE",1),b(u,"WRITABLE",4),u.$attr_reader("eof"),u.$attr_accessor("read_proc","sync","tty","write_proc"),O(u,"$initialize",function(h,_){var l=this;return _==null&&(_="r"),l.fd=h,l.flags=_,l.eof=!1,I(_["$include?"]("r"))&&P(_["$match?"](/[wa+]/))?l.closed="write":I(_["$match?"](/[wa]/))&&P(_["$match?"](/[r+]/))?l.closed="read":g},-2),O(u,"$fileno",V("fd")),O(u,"$tty?",function(){var h=this;return h.tty==!0}),O(u,"$write",function(h){var _=this;return _.write_proc(h),h.$size()}),O(u,"$flush",C(g)),O(u,"$<<",function(h){var _=this;return _.$write(h),_}),O(u,"$print",function(h){var _,l,E=this;H[","]==null&&(H[","]=g),_=Z(arguments),l=_;for(var G=0,c=l.length;G<c;G++)l[G]=p.$String(l[G]);return E.$write(l.join(H[","])),g},-1),O(u,"$puts",function(h){var _,l,E=this;_=Z(arguments),l=_;var G;if(l.length===0)return E.$write(`
`),g;for(var c=0,s=l.length;c<s;c++)if(l[c].$$is_array){var $=l[c].$flatten();$.length>0&&ie(E,"puts",L($))}else l[c].$$is_string?G=l[c].valueOf():G=p.$String(l[c]),G.endsWith(`
`)||(G+=`
`),E.$write(G);return g},-1),O(u,"$getc",function(){var h=this,_=g,l=g,E=g;h.read_buffer=I(_=h.read_buffer)?_:"",l="";do if(h.read_buffer=Y(h.read_buffer,l),te(h.read_buffer,""))return E=h.read_buffer["$[]"](0),h.read_buffer=h.read_buffer["$[]"](W(1,-1,!1)),E;while(I(l=h.$sysread_noraise(1)));return g}),O(u,"$getbyte",function(){var h,_=this;return h=_.$getc(),h===g||h==null?g:h.$ord()}),O(u,"$readbyte",function(){var h=this;return h.$readchar().$ord()}),O(u,"$readchar",function(){var h=this,_=g;return I(_=h.$getc())?_:p.$raise(q("EOFError"),"end of file reached")}),O(u,"$readline",function(h){var _,l,E=this,G=g;return _=Z(arguments),l=_,I(G=ie(E,"gets",L(l)))?G:p.$raise(q("EOFError"),"end of file reached")},-1),O(u,"$gets",function(h,_,l){var E,G,c=this,s=g,$=g,t=g,e=g,r=g,i=g;H["/"]==null&&(H["/"]=g),h==null&&(h=!1),_==null&&(_=g),l==null&&(l=new Map),I(h.$$is_number)&&P(_)&&(E=[!1,h,_],h=E[0],_=E[1],l=E[2]),I(h.$$is_hash)&&P(_)&&z(l,new Map)?(E=[!1,g,h],h=E[0],_=E[1],l=E[2]):I(_.$$is_hash)&&z(l,new Map)&&(E=[h,g,_],h=E[0],_=E[1],l=E[2]),s=h,z(h,!1)&&(h=H["/"]),z(h,"")&&(h=/\r?\n\r?\n/),h=I($=h)?$:"",z(s,"")||(h=h.$to_str()),t=z(s,"")?2:h.$length(),z(h," ")&&(h=/ /),c.read_buffer=I($=c.read_buffer)?$:"",e="",r=g;do if(c.read_buffer=Y(c.read_buffer,e),te(h,"")&&I(I(h.$$is_regexp)?c.read_buffer["$match?"](h):c.read_buffer["$include?"](h))){i=c.read_buffer,G=c.read_buffer.$split(h,2),E=y(G),r=E[0]==null?g:E[0],c.read_buffer=E[1]==null?g:E[1],te(r,i)&&(r=Y(r,i["$[]"](r.$length(),t)));break}while(I(e=c.$sysread_noraise(z(h,"")?65536:1)));return I(r)||(E=[I($=c.read_buffer)?$:"",""],r=E[0],c.read_buffer=E[1],z(r,"")&&(r=g)),I(r)&&(I(_)&&(r=r["$[]"](n.Range.$new(0,_,!0)),c.read_buffer=Y(r["$[]"](n.Range.$new(_,-1,!1)),c.read_buffer)),I(l["$[]"]("chomp"))&&(r=r.$sub(/\r?\n$/,"")),z(s,"")&&(r=r.$sub(/^[\r\n]+/,""))),z(s,!1)&&(H._=r),r},-1),O(u,"$sysread",function(h){var _=this,l=g;return I(l=_.read_proc(h))?l:(_.eof=!0,p.$raise(q("EOFError"),"end of file reached"))}),O(u,"$sysread_noraise",function(h){var _=this;try{return _.$sysread(h)}catch(l){if(n.rescue(l,[q("EOFError")]))try{return g}finally{n.pop_exception(l)}else throw l}}),O(u,"$readpartial",function(h){var _,l=this,E=g,G=g,c=g;return l.read_buffer=I(E=l.read_buffer)?E:"",G=l.$sysread(h),_=[Y(l.read_buffer,I(E=G)?E:""),""],c=_[0],l.read_buffer=_[1],z(c,"")&&(c=g),c}),O(u,"$read",function(h){var _,l=this,E=g,G=g,c=g;h==null&&(h=g),l.read_buffer=I(E=l.read_buffer)?E:"",G="",c=g;do if(l.read_buffer=Y(l.read_buffer,G),I(h)&&I(K(l.read_buffer.$length(),h)))return _=[l.read_buffer["$[]"](n.Range.$new(0,h,!0)),l.read_buffer["$[]"](n.Range.$new(h,-1,!1))],c=_[0],l.read_buffer=_[1],c;while(I(G=l.$sysread_noraise(I(E=h)?E:65536)));return _=[l.read_buffer,""],c=_[0],l.read_buffer=_[1],c},-1),O(u,"$readlines",function(h){var _=this;return H["/"]==null&&(H["/"]=g),h==null&&(h=H["/"]),_.$each_line(h).$to_a()},-1),O(u,"$each",function A(h,_){var l=A.$$p||g,E,G,c,s=this,$=g;if(H["/"]==null&&(H["/"]=g),A.$$p=null,E=Z(arguments),E.length>0&&(G=E.shift()),G==null&&(G=H["/"]),c=E,l===g)return ie(s,"enum_for",["each",G].concat(L(c)));for(;I($=ie(s,"gets",[G].concat(L(c))));)n.yield1(l,$);return s},-1),O(u,"$each_byte",function A(){var h=A.$$p||g,_=this,l=g;if(A.$$p=null,h===g)return _.$enum_for("each_byte");for(;I(l=_.$getbyte());)n.yield1(h,l);return _}),O(u,"$each_char",function A(){var h=A.$$p||g,_=this,l=g;if(A.$$p=null,h===g)return _.$enum_for("each_char");for(;I(l=_.$getc());)n.yield1(h,l);return _}),O(u,"$close",B("closed","both")),O(u,"$close_read",function(){var h=this;return z(h.closed,"write")?h.closed="both":h.closed="read"}),O(u,"$close_write",function(){var h=this;return z(h.closed,"read")?h.closed="both":h.closed="write"}),O(u,"$closed?",function(){var h=this;return h.closed["$=="]("both")}),O(u,"$closed_read?",function(){var h=this,_=g;return I(_=h.closed["$=="]("read"))?_:h.closed["$=="]("both")}),O(u,"$closed_write?",function(){var h=this,_=g;return I(_=h.closed["$=="]("write"))?_:h.closed["$=="]("both")}),O(u,"$check_writable",function(){var h=this;return I(h["$closed_write?"]())?p.$raise(q("IOError"),"not opened for writing"):g}),O(u,"$check_readable",function(){var h=this;return I(h["$closed_read?"]())?p.$raise(q("IOError"),"not opened for reading"):g}),j(u,"each_line","each"),j(u,"eof?","eof")}("::",null),b("::","STDIN",H.stdin=q("IO").$new(0,"r")),b("::","STDOUT",H.stdout=q("IO").$new(1,"w")),b("::","STDERR",H.stderr=q("IO").$new(2,"w"));var M=n.global.console;return q("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(x){process.stdout.write(x)}:function(x){M.log(x)}),q("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(x){process.stderr.write(x)}:function(x){M.warn(x)}),R=[function(x){var m=prompt();return m!==null?m+`
`:g}],ie(q("STDIN"),"read_proc=",R),R[R.length-1]};Opal.modules["opal/regexp_anchors"]=function(n){var k=n.module,b=n.const_set,P=[];n.nil;var I=n.$$$;return n.add_stubs("new"),function(O,V){var C=k(O,"Opal"),Z=[C].concat(V),p=n.$r(Z);return b(C,"REGEXP_START","^"),b(C,"REGEXP_END","$"),b(C,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),b(C,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),b(C,"INLINE_IDENTIFIER_REGEXP",p("Regexp").$new("[^"+I(C,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+I(C,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),b(C,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),b(C,"CONST_NAME_REGEXP",p("Regexp").$new(""+I(C,"REGEXP_START")+"(::)?[A-Z][^"+I(C,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+I(C,"REGEXP_END")))}(P[0],P)};Opal.modules["opal/mini"]=function(n){var k=n.Object;return n.nil,n.add_stubs("require"),k.$require("opal/base"),k.$require("corelib/nil"),k.$require("corelib/boolean"),k.$require("corelib/string"),k.$require("corelib/comparable"),k.$require("corelib/enumerable"),k.$require("corelib/enumerator"),k.$require("corelib/array"),k.$require("corelib/hash"),k.$require("corelib/number"),k.$require("corelib/range"),k.$require("corelib/proc"),k.$require("corelib/method"),k.$require("corelib/regexp"),k.$require("corelib/variables"),k.$require("corelib/io"),k.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(n){var k=n.coerce_to,b=n.module,P=n.slice,I=n.truthy,O=n.eqeq,V=n.Opal,C=n.Kernel,Z=n.gvars,p=n.def,H=n.alias,ie=n.nil,L=n.$$$;return n.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(Y){var te=b(Y,"Kernel");return p(te,"$format",function(z,y){var K,B,j=ie;Z.DEBUG==null&&(Z.DEBUG=ie),K=P(arguments,1),B=K,O(B.$length(),1)&&I(B["$[]"](0)["$respond_to?"]("to_ary"))&&(j=V["$coerce_to?"](B["$[]"](0),L("Array"),"to_ary"),I(j["$nil?"]())||(B=j.$to_a()));var R="",g=0,q,M,x=z.length,m,u,d,A,h,_,l,E,G,c,s,$,t,e=1,r=0,i,a=0,o=1,v=2,S=4,F=8,T=16,J=32,ee=64,ae=128;function le(){i&J&&C.$raise(L("ArgumentError"),"flag after width"),i&ae&&C.$raise(L("ArgumentError"),"flag after precision")}function ce(){i&J&&C.$raise(L("ArgumentError"),"width given twice"),i&ae&&C.$raise(L("ArgumentError"),"width after precision")}function de(N){return N>=B.length&&C.$raise(L("ArgumentError"),"too few arguments"),B[N]}function he(){switch(r){case-1:C.$raise(L("ArgumentError"),"unnumbered("+e+") mixed with numbered");case-2:C.$raise(L("ArgumentError"),"unnumbered("+e+") mixed with named")}return r=e++,de(r-1)}function ve(N){return r>0&&C.$raise(L("ArgumentError"),"numbered("+N+") after unnumbered("+r+")"),r===-2&&C.$raise(L("ArgumentError"),"numbered("+N+") after named"),N<1&&C.$raise(L("ArgumentError"),"invalid index - "+N+"$"),r=-1,de(N-1)}function me(){return t===void 0?he():t}function be(N){for(var D,X="";;M++){if(M===x&&C.$raise(L("ArgumentError"),"malformed format string - %*[0-9]"),z.charCodeAt(M)<48||z.charCodeAt(M)>57)return M--,D=parseInt(X,10)||0,D>2147483647&&C.$raise(L("ArgumentError"),""+N+" too big"),D;X+=z.charAt(M)}}function $e(N){var D,X=be(N);return z.charAt(M+1)==="$"?(M++,D=ve(X)):D=he(),D.$to_int()}for(M=z.indexOf("%");M!==-1;M=z.indexOf("%",M)){switch(u=void 0,i=a,A=-1,h=-1,t=void 0,q=M,M++,z.charAt(M)){case"%":g=M;case"":case`
`:case"\0":M++;continue}e:for(;M<x;M++)switch(z.charAt(M)){case" ":le(),i|=T;continue e;case"#":le(),i|=o;continue e;case"+":le(),i|=S;continue e;case"-":le(),i|=v;continue e;case"0":le(),i|=F;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(_=be("width"),z.charAt(M+1)==="$"){if(M+2===x){u="%",M++;break e}t!==void 0&&C.$raise(L("ArgumentError"),"value given twice - %"+_+"$"),t=ve(_),M++}else ce(),i|=J,A=_;continue e;case"<":case"{":for(E=z.charAt(M)==="<"?">":"}",l="",M++;;M++){if(M===x&&C.$raise(L("ArgumentError"),"malformed name - unmatched parenthesis"),z.charAt(M)===E){if(r>0&&C.$raise(L("ArgumentError"),"named "+l+" after unnumbered("+r+")"),r===-1&&C.$raise(L("ArgumentError"),"named "+l+" after numbered"),r=-2,(B[0]===void 0||!B[0].$$is_hash)&&C.$raise(L("ArgumentError"),"one hash required"),t=B[0].$fetch(l),E===">")continue e;if(u=t.toString(),h!==-1&&(u=u.slice(0,h)),i&v)for(;u.length<A;)u=u+" ";else for(;u.length<A;)u=" "+u;break e}l+=z.charAt(M)}case"*":M++,ce(),i|=J,A=$e("width"),A<0&&(i|=v,A=-A);continue e;case".":if(i&ae&&C.$raise(L("ArgumentError"),"precision given twice"),i|=ee|ae,h=0,M++,z.charAt(M)==="*"){M++,h=$e("precision"),h<0&&(i&=~ee);continue e}h=be("precision");continue e;case"d":case"i":case"u":if(m=C.$Integer(me()),m>=0){for(u=m.toString();u.length<h;)u="0"+u;if(i&v)for((i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<A;)u=u+" ";else if(i&F&&h===-1){for(;u.length<A-(i&S||i&T?1:0);)u="0"+u;(i&S||i&T)&&(u=(i&S?"+":" ")+u)}else for((i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<A;)u=" "+u}else{for(u=(-m).toString();u.length<h;)u="0"+u;if(i&v)for(u="-"+u;u.length<A;)u=u+" ";else if(i&F&&h===-1){for(;u.length<A-1;)u="0"+u;u="-"+u}else for(u="-"+u;u.length<A;)u=" "+u}break e;case"b":case"B":case"o":case"x":case"X":switch(z.charAt(M)){case"b":case"B":G=2,c="0b",s=/^1+/,$="1";break;case"o":G=8,c="0",s=/^3?7+/,$="7";break;case"x":case"X":G=16,c="0x",s=/^f+/,$="f";break}if(m=C.$Integer(me()),m>=0){for(u=m.toString(G);u.length<h;)u="0"+u;if(i&v)for((i&S||i&T)&&(u=(i&S?"+":" ")+u),i&o&&m!==0&&(u=c+u);u.length<A;)u=u+" ";else if(i&F&&h===-1){for(;u.length<A-(i&S||i&T?1:0)-(i&o&&m!==0?c.length:0);)u="0"+u;i&o&&m!==0&&(u=c+u),(i&S||i&T)&&(u=(i&S?"+":" ")+u)}else for(i&o&&m!==0&&(u=c+u),(i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<A;)u=" "+u}else if(i&S||i&T){for(u=(-m).toString(G);u.length<h;)u="0"+u;if(i&v)for(i&o&&(u=c+u),u="-"+u;u.length<A;)u=u+" ";else if(i&F&&h===-1){for(;u.length<A-1-(i&o?2:0);)u="0"+u;i&o&&(u=c+u),u="-"+u}else for(i&o&&(u=c+u),u="-"+u;u.length<A;)u=" "+u}else{for(u=(m>>>0).toString(G).replace(s,$);u.length<h-2;)u=$+u;if(i&v)for(u=".."+u,i&o&&(u=c+u);u.length<A;)u=u+" ";else if(i&F&&h===-1){for(;u.length<A-2-(i&o?c.length:0);)u=$+u;u=".."+u,i&o&&(u=c+u)}else for(u=".."+u,i&o&&(u=c+u);u.length<A;)u=" "+u}z.charAt(M)===z.charAt(M).toUpperCase()&&(u=u.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(m=C.$Float(me()),m>=0||isNaN(m)){if(m===1/0)u="Inf";else switch(z.charAt(M)){case"f":u=m.toFixed(h===-1?6:h);break;case"e":case"E":u=m.toExponential(h===-1?6:h);break;case"g":case"G":u=m.toExponential(),d=parseInt(u.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(u=m.toPrecision(h===-1?i&o?6:void 0:h));break}if(i&v)for((i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<A;)u=u+" ";else if(i&F&&m!==1/0&&!isNaN(m)){for(;u.length<A-(i&S||i&T?1:0);)u="0"+u;(i&S||i&T)&&(u=(i&S?"+":" ")+u)}else for((i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<A;)u=" "+u}else{if(m===-1/0)u="Inf";else switch(z.charAt(M)){case"f":u=(-m).toFixed(h===-1?6:h);break;case"e":case"E":u=(-m).toExponential(h===-1?6:h);break;case"g":case"G":u=(-m).toExponential(),d=parseInt(u.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(u=(-m).toPrecision(h===-1?i&o?6:void 0:h));break}if(i&v)for(u="-"+u;u.length<A;)u=u+" ";else if(i&F&&m!==-1/0){for(;u.length<A-1;)u="0"+u;u="-"+u}else for(u="-"+u;u.length<A;)u=" "+u}z.charAt(M)===z.charAt(M).toUpperCase()&&m!==1/0&&m!==-1/0&&!isNaN(m)&&(u=u.toUpperCase()),u=u.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":C.$raise(L("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(m=me(),m["$respond_to?"]("to_ary")&&(m=m.$to_ary()[0]),m["$respond_to?"]("to_str")?u=m.$to_str():u=String.fromCharCode(k(m,L("Integer"),"to_int")),u.length!==1&&C.$raise(L("ArgumentError"),"%c requires a character"),i&v)for(;u.length<A;)u=u+" ";else for(;u.length<A;)u=" "+u;break e;case"p":if(u=me().$inspect(),h!==-1&&(u=u.slice(0,h)),i&v)for(;u.length<A;)u=u+" ";else for(;u.length<A;)u=" "+u;break e;case"s":if(u=me().$to_s(),h!==-1&&(u=u.slice(0,h)),i&v)for(;u.length<A;)u=u+" ";else for(;u.length<A;)u=" "+u;break e;default:C.$raise(L("ArgumentError"),"malformed format string - %"+z.charAt(M))}u===void 0&&C.$raise(L("ArgumentError"),"malformed format string - %"),R+=z.slice(g,q)+u,g=M+1}return Z.DEBUG&&r>=0&&e<B.length&&C.$raise(L("ArgumentError"),"too many arguments for format string"),R+z.slice(g)},-2),H(te,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(n){var k=n.klass,b=n.rb_plus,P=n.truthy,I=n.send,O=n.defs,V=n.eqeq,C=n.def,Z=n.return_ivar,p=n.return_val,H=n.slice,ie=n.Kernel,L=n.Opal,Y=n.rb_lt,te,W=n.top,z=[],y=n.$r(z),K=n.nil,B=n.$$$;return n.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),W.$require("corelib/string"),function(j,R,g){var q=k(j,R,"Encoding"),M=[q].concat(g),x=q.$$prototype;return x.name=x.dummy=K,O(q,"$register",function m(u,d){var A=m.$$p||K,h=this,_=K,l=K,E=K,G=K,c=K,s=K;return m.$$p=null,d==null&&(d=new Map),_=b([u],P(l=d["$[]"]("aliases"))?l:[]),E=P(l=d["$[]"]("ascii"))&&l,G=P(l=d["$[]"]("dummy"))&&l,P(d["$[]"]("inherits"))?(c=d["$[]"]("inherits").$clone(),c.$initialize(u,_,E,G)):c=h.$new(u,_,E,G),A!==K&&I(c,"instance_eval",[],A.$to_proc()),s=n.encodings,I(_,"each",[],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=K),e.$const_set(t.$tr("-","_"),c),s[t]=c},{$$s:h})},-2),O(q,"$find",function(u){var d=this;return V(u,"default_external")?d.$default_external():n.find_encoding(u)}),q.$singleton_class().$attr_accessor("default_external"),q.$attr_reader("name","names"),C(q,"$initialize",function(u,d,A,h){var _=this;return _.name=u,_.names=d,_.ascii=A,_.dummy=h}),C(q,"$ascii_compatible?",Z("ascii")),C(q,"$dummy?",Z("dummy")),C(q,"$binary?",p(!1)),C(q,"$to_s",Z("name")),C(q,"$inspect",function(){var u=this;return"#<Encoding:"+u.name+(P(u.dummy)?" (dummy)":K)+">"}),C(q,"$charsize",function(u){for(var d=0,A=0,h=u.length;A<h;A++){var _=u.charCodeAt(A);_>=55296&&_<=56319||d++}return d}),C(q,"$each_char",function m(u){var d=m.$$p||K;m.$$p=null;for(var A="",h=0,_=u.length;h<_;h++){var l=u.charCodeAt(h),E=u.charAt(h);if(l>=56320&&l<=57343){A=E;continue}else l>=55296&&l<=56319&&(E=A+E);u.encoding.name!="UTF-8"&&(E=new String(E),E.encoding=u.encoding),n.yield1(d,E)}}),C(q,"$each_byte",function(u){return H(arguments),ie.$raise(B("NotImplementedError"))},-1),C(q,"$bytesize",function(u){return H(arguments),ie.$raise(B("NotImplementedError"))},-1),k("::",B("StandardError"),"EncodingError"),k("::",B("EncodingError"),"CompatibilityError"),k(M[0],B("EncodingError"),"UndefinedConversionError"),K}("::",null,z),I(B("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function j(){var R=j.$$s==null?this:j.$$s;return C(R,"$each_byte",function g(q){var M=g.$$p||K;g.$$p=null;for(var x=1/0,m,u=q.length,d=null,A=0;A<u;++A){if(m=q.charCodeAt(A),m>55295&&m<57344){if(!d){if(m>56319){(x-=3)>-1&&(n.yield1(M,239),n.yield1(M,191),n.yield1(M,189));continue}else if(A+1===u){(x-=3)>-1&&(n.yield1(M,239),n.yield1(M,191),n.yield1(M,189));continue}d=m;continue}if(m<56320){(x-=3)>-1&&(n.yield1(M,239),n.yield1(M,191),n.yield1(M,189)),d=m;continue}m=(d-55296<<10|m-56320)+65536}else d&&(x-=3)>-1&&(n.yield1(M,239),n.yield1(M,191),n.yield1(M,189));if(d=null,m<128){if((x-=1)<0)break;n.yield1(M,m)}else if(m<2048){if((x-=2)<0)break;n.yield1(M,m>>6|192),n.yield1(M,m&63|128)}else if(m<65536){if((x-=3)<0)break;n.yield1(M,m>>12|224),n.yield1(M,m>>6&63|128),n.yield1(M,m&63|128)}else if(m<1114112){if((x-=4)<0)break;n.yield1(M,m>>18|240),n.yield1(M,m>>12&63|128),n.yield1(M,m>>6&63|128),n.yield1(M,m&63|128)}}}),C(R,"$bytesize",function(q){return q.$bytes().$length()})},{$$s:W}),I(B("Encoding"),"register",["UTF-16LE"],function j(){var R=j.$$s==null?this:j.$$s;return C(R,"$each_byte",function g(q){var M=g.$$p||K;g.$$p=null;for(var x=0,m=q.length;x<m;x++){var u=q.charCodeAt(x);n.yield1(M,u&255),n.yield1(M,u>>8)}}),C(R,"$bytesize",function(q){return q.length*2})},{$$s:W}),I(B("Encoding"),"register",["UTF-16BE",new Map([["inherits",B(B("Encoding"),"UTF_16LE")]])],function j(){var R=j.$$s==null?this:j.$$s;return C(R,"$each_byte",function g(q){var M=g.$$p||K;g.$$p=null;for(var x=0,m=q.length;x<m;x++){var u=q.charCodeAt(x);n.yield1(M,u>>8),n.yield1(M,u&255)}})},{$$s:W}),I(B("Encoding"),"register",["UTF-32LE"],function j(){var R=j.$$s==null?this:j.$$s;return C(R,"$each_byte",function g(q){var M=g.$$p||K;g.$$p=null;for(var x=0,m=q.length;x<m;x++){var u=q.charCodeAt(x);n.yield1(M,u&255),n.yield1(M,u>>8),n.yield1(M,0),n.yield1(M,0)}}),C(R,"$bytesize",function(q){return q.length*4})},{$$s:W}),I(B("Encoding"),"register",["UTF-32BE",new Map([["inherits",B(B("Encoding"),"UTF_32LE")]])],function j(){var R=j.$$s==null?this:j.$$s;return C(R,"$each_byte",function g(q){var M=g.$$p||K;g.$$p=null;for(var x=0,m=q.length;x<m;x++){var u=q.charCodeAt(x);n.yield1(M,0),n.yield1(M,0),n.yield1(M,u>>8),n.yield1(M,u&255)}})},{$$s:W}),I(B("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function j(){var R=j.$$s==null?this:j.$$s;return C(R,"$each_char",function g(q){var M=g.$$p||K;g.$$p=null;for(var x=0,m=q.length;x<m;x++){var u=new String(q.charAt(x));u.encoding=q.encoding,n.yield1(M,u)}}),C(R,"$charsize",function(q){return q.length}),C(R,"$each_byte",function g(q){var M=g.$$p||K;g.$$p=null;for(var x=0,m=q.length;x<m;x++){var u=q.charCodeAt(x);n.yield1(M,u&255)}}),C(R,"$bytesize",function(q){return q.length}),C(R,"$binary?",p(!0))},{$$s:W}),B("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",B(B("Encoding"),"ASCII_8BIT")]])),B("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",B(B("Encoding"),"ASCII_8BIT")]])),function(j,R){var g=k(j,R,"String"),q=g.$$prototype;return q.internal_encoding=q.bytes=q.encoding=K,g.$attr_reader("encoding"),g.$attr_reader("internal_encoding"),n.prop(String.prototype,"bytes",K),n.prop(String.prototype,"encoding",B(B("Encoding"),"UTF_8")),n.prop(String.prototype,"internal_encoding",B(B("Encoding"),"UTF_8")),C(g,"$b",function(){var x=this;return x.$dup().$force_encoding("binary")}),C(g,"$bytesize",function(){var x=this;return x.internal_encoding.$bytesize(x)}),C(g,"$each_byte",function M(){var x=M.$$p||K,m=this;return M.$$p=null,x===K?I(m,"enum_for",["each_byte"],function u(){var d=u.$$s==null?this:u.$$s;return d.$bytesize()},{$$s:m}):(I(m.internal_encoding,"each_byte",[m],x.$to_proc()),m)}),C(g,"$bytes",function(){var x=this,m=K;return typeof x=="string"?new String(x).$each_byte().$to_a():(x.bytes=P(m=x.bytes)?m:x.$each_byte().$to_a(),x.bytes.$dup())}),C(g,"$each_char",function M(){var x=M.$$p||K,m=this;return M.$$p=null,x===K?I(m,"enum_for",["each_char"],function u(){var d=u.$$s==null?this:u.$$s;return d.$length()},{$$s:m}):(I(m.encoding,"each_char",[m],x.$to_proc()),m)}),C(g,"$chars",function M(){var x=M.$$p||K,m=this;return M.$$p=null,P(x)?I(m,"each_char",[],x.$to_proc()):m.$each_char().$to_a()}),C(g,"$each_codepoint",function M(){var x=M.$$p||K,m=this;if(M.$$p=null,x===K)return m.$enum_for("each_codepoint");for(var u=0,d=m.length;u<d;u++)n.yield1(x,m.codePointAt(u));return m}),C(g,"$codepoints",function M(){var x=M.$$p||K,m=this;return M.$$p=null,x!==K?I(m,"each_codepoint",[],x.$to_proc()):m.$each_codepoint().$to_a()}),C(g,"$encode",function(x){var m=this;return n.enc(m,x)}),C(g,"$force_encoding",function(x){var m=this,u=m;return x===u.encoding||(x=L["$coerce_to!"](x,B("String"),"to_s"),x=B("Encoding").$find(x),x===u.encoding)||(u=n.set_encoding(u,x)),u}),C(g,"$getbyte",function(x){var m=this,u=K;return u=m.$bytes(),x=L["$coerce_to!"](x,B("Integer"),"to_int"),P(Y(u.$length(),x))?K:u["$[]"](x)}),C(g,"$initialize_copy",function(x){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),C(g,"$valid_encoding?",p(!0))}("::",null),te=[B(y("Encoding"),"UTF_8")],I(B("Encoding"),"default_external=",te),te[te.length-1]};Opal.modules["corelib/math"]=function(n){var k=n.type_error,b=n.module,P=n.const_set,I=n.Class,O=n.slice,V=n.Kernel,C=n.defs,Z=n.truthy,p=n.send,H=n.def,ie=n.rb_minus,L=n.eqeqeq,Y=n.rb_divide,te=[],W=n.nil,z=n.$$$;return n.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(y,K){var B=b(y,"Math"),j=[B].concat(K),R=n.$r(j);return P(B,"E",Math.E),P(B,"PI",Math.PI),P(B,"DomainError",I.$new(z("StandardError"))),C(B,"$checked",function(q,M){var x,m;if(x=O(arguments,1),m=x,isNaN(m[0])||m.length==2&&isNaN(m[1]))return NaN;var u=Math[q].apply(null,m);return isNaN(u)&&V.$raise(R("DomainError"),'Numerical argument is out of domain - "'+q+'"'),u},-2),C(B,"$float!",function(q){try{return V.$Float(q)}catch(M){if(n.rescue(M,[z("ArgumentError")]))try{return V.$raise(k(q,z("Float")))}finally{n.pop_exception(M)}else throw M}}),C(B,"$integer!",function(q){try{return V.$Integer(q)}catch(M){if(n.rescue(M,[z("ArgumentError")]))try{return V.$raise(k(q,z("Integer")))}finally{n.pop_exception(M)}else throw M}}),B.$module_function(),Z(typeof Math.erf<"u")||n.prop(Math,"erf",function(g){var q=.254829592,M=-.284496736,x=1.421413741,m=-1.453152027,u=1.061405429,d=.3275911,A=1;g<0&&(A=-1),g=Math.abs(g);var h=1/(1+d*g),_=1-((((u*h+m)*h+x)*h+M)*h+q)*h*Math.exp(-g*g);return A*_}),Z(typeof Math.erfc<"u")||n.prop(Math,"erfc",function(g){var q=Math.abs(g),M=1/(.5*q+1),x=M*.17087277+-.82215223,m=M*x+1.48851587,u=M*m+-1.13520398,d=M*u+.27886807,A=M*d+-.18628806,h=M*A+.09678418,_=M*h+.37409196,l=M*_+1.00002368,E=M*l,G=-q*q-1.26551223+E,c=M*Math.exp(G);return g<0?2-c:c}),p(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function g(q){var M=g.$$s==null?this:g.$$s;return q==null&&(q=W),p(M,"define_method",[q],function(m){return m==null&&(m=W),z("Math").$checked(q,z("Math")["$float!"](m))})},{$$s:B}),H(B,"$atan2",function(q,M){return z("Math").$checked("atan2",z("Math")["$float!"](q),z("Math")["$float!"](M))}),H(B,"$hypot",function(q,M){return z("Math").$checked("hypot",z("Math")["$float!"](q),z("Math")["$float!"](M))}),H(B,"$frexp",function(q){if(q=R("Math")["$float!"](q),isNaN(q))return[NaN,0];var M=Math.floor(Math.log(Math.abs(q))/Math.log(2))+1,x=q/Math.pow(2,M);return[x,M]}),H(B,"$gamma",function(q){q=R("Math")["$float!"](q);var M,x,m,u,d,A,h,_,l,E=4.7421875,G=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(q))return NaN;if(q===0&&1/q<0)return-1/0;if((q===-1||q===-1/0)&&V.$raise(R("DomainError"),'Numerical argument is out of domain - "gamma"'),R("Integer")["$==="](q)){if(q<=0)return isFinite(q)?1/0:NaN;if(q>171)return 1/0;for(u=q-2,d=q-1;u>1;)d*=u,u--;return d==0&&(d=1),d}if(q<.5)return Math.PI/(Math.sin(Math.PI*q)*z("Math").$gamma(ie(1,q)));if(q>=171.35)return 1/0;if(q>85)return A=q*q,h=A*q,_=h*q,l=_*q,Math.sqrt(2*Math.PI/q)*Math.pow(q/Math.E,q)*(1+1/(12*q)+1/(288*A)-139/(51840*h)-571/(2488320*_)+163879/(209018880*l)+5246819/(75246796800*l*q));for(q-=1,m=G[0],M=1;M<G.length;++M)m+=G[M]/(q+M);return x=q+E+.5,Math.sqrt(2*Math.PI)*Math.pow(x,q+.5)*Math.exp(-x)*m}),H(B,"$ldexp",function(q,M){return q=R("Math")["$float!"](q),M=R("Math")["$integer!"](M),isNaN(M)&&V.$raise(z("RangeError"),"float NaN out of range of integer"),q*Math.pow(2,M)}),H(B,"$lgamma",function(q){return q==-1?[1/0,1]:[Math.log(Math.abs(z("Math").$gamma(q))),z("Math").$gamma(q)<0?-1:1]}),H(B,"$log",function(q,M){return L(z("String"),q)&&V.$raise(k(q,z("Float"))),Z(M==null)?z("Math").$checked("log",z("Math")["$float!"](q)):(L(z("String"),M)&&V.$raise(k(M,z("Float"))),Y(z("Math").$checked("log",z("Math")["$float!"](q)),z("Math").$checked("log",z("Math")["$float!"](M))))},-2),H(B,"$log10",function(q){return L(z("String"),q)&&V.$raise(k(q,z("Float"))),z("Math").$checked("log10",z("Math")["$float!"](q))}),H(B,"$log2",function(q){return L(z("String"),q)&&V.$raise(k(q,z("Float"))),z("Math").$checked("log2",z("Math")["$float!"](q))}),H(B,"$tan",function(q){return q=z("Math")["$float!"](q),Z(q["$infinite?"]())?z(z("Float"),"NAN"):z("Math").$checked("tan",z("Math")["$float!"](q))})}("::",te)};Opal.modules["corelib/complex/base"]=function(n){var k=n.module,b=n.truthy,P=n.def,I=n.klass,O=[],V=n.nil;return n.add_stubs("new,from_string"),function(C,Z){var p=k(C,"Kernel"),H=[p].concat(Z),ie=n.$r(H);return P(p,"$Complex",function(Y,te){return te==null&&(te=V),b(te)?ie("Complex").$new(Y,te):ie("Complex").$new(Y,0)},-2)}("::",O),function(C,Z,p){var H=I(C,Z,"String"),ie=[H].concat(p),L=n.$r(ie);return P(H,"$to_c",function(){var te=this;return L("Complex").$from_string(te)})}("::",null,O)};Opal.modules["corelib/complex"]=function(n){var k=n.klass,b=n.truthy,P=n.eqeqeq,I=n.Kernel,O=n.defs,V=n.rb_times,C=n.def,Z=n.rb_plus,p=n.rb_minus,H=n.rb_divide,ie=n.eqeq,L=n.to_ary,Y=n.rb_gt,te=n.neqeq,W=n.return_val,z=n.const_set,y=n.alias,K=n.top,B=[],j=n.nil,R=n.$$$;return n.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),K.$require("corelib/numeric"),K.$require("corelib/complex/base"),function(g,q,M){var x=k(g,q,"Complex"),m=[x].concat(M),u=n.$r(m),d=x.$$prototype;return d.real=d.imag=j,O(x,"$rect",function(h,_){var l=this;return _==null&&(_=0),P(R("Numeric"),h)&&b(h["$real?"]())&&P(R("Numeric"),_)&&b(_["$real?"]())||I.$raise(R("TypeError"),"not a real"),l.$new(h,_)},-2),O(x,"$polar",function(h,_){var l=this;return _==null&&(_=0),P(R("Numeric"),h)&&b(h["$real?"]())&&P(R("Numeric"),_)&&b(_["$real?"]())||I.$raise(R("TypeError"),"not a real"),l.$new(V(h,R("Math").$cos(_)),V(h,R("Math").$sin(_)))},-2),x.$attr_reader("real","imag"),C(x,"$initialize",function(h,_){var l=this;return _==null&&(_=0),l.real=h,l.imag=_,l.$freeze()},-2),C(x,"$coerce",function(h){var _=this;return P(R("Complex"),h)?[h,_]:P(R("Numeric"),h)&&b(h["$real?"]())?[R("Complex").$new(h,0),_]:I.$raise(R("TypeError"),""+h.$class()+" can't be coerced into Complex")}),C(x,"$==",function(h){var _=this,l=j;return P(R("Complex"),h)?b(l=_.real["$=="](h.$real()))?_.imag["$=="](h.$imag()):l:P(R("Numeric"),h)&&b(h["$real?"]())?b(l=_.real["$=="](h))?_.imag["$=="](0):l:h["$=="](_)}),C(x,"$-@",function(){var h=this;return I.$Complex(h.real["$-@"](),h.imag["$-@"]())}),C(x,"$+",function(h){var _=this;return P(R("Complex"),h)?I.$Complex(Z(_.real,h.$real()),Z(_.imag,h.$imag())):P(R("Numeric"),h)&&b(h["$real?"]())?I.$Complex(Z(_.real,h),_.imag):_.$__coerced__("+",h)}),C(x,"$-",function(h){var _=this;return P(R("Complex"),h)?I.$Complex(p(_.real,h.$real()),p(_.imag,h.$imag())):P(R("Numeric"),h)&&b(h["$real?"]())?I.$Complex(p(_.real,h),_.imag):_.$__coerced__("-",h)}),C(x,"$*",function(h){var _=this;return P(R("Complex"),h)?I.$Complex(p(V(_.real,h.$real()),V(_.imag,h.$imag())),Z(V(_.real,h.$imag()),V(_.imag,h.$real()))):P(R("Numeric"),h)&&b(h["$real?"]())?I.$Complex(V(_.real,h),V(_.imag,h)):_.$__coerced__("*",h)}),C(x,"$/",function(h){var _=this;return P(R("Complex"),h)?P(R("Number"),_.real)&&b(_.real["$nan?"]())||P(R("Number"),_.imag)&&b(_.imag["$nan?"]())||P(R("Number"),h.$real())&&b(h.$real()["$nan?"]())||P(R("Number"),h.$imag())&&b(h.$imag()["$nan?"]())?R("Complex").$new(R(R("Float"),"NAN"),R(R("Float"),"NAN")):H(V(_,h.$conj()),h.$abs2()):P(R("Numeric"),h)&&b(h["$real?"]())?I.$Complex(_.real.$quo(h),_.imag.$quo(h)):_.$__coerced__("/",h)}),C(x,"$**",function(h){var _,l,E=this,G=j,c=j,s=j,$=j,t=j,e=j,r=j,i=j,a=j,o=j,v=j;if(ie(h,0))return R("Complex").$new(1,0);if(P(R("Complex"),h))return l=E.$polar(),_=L(l),G=_[0]==null?j:_[0],c=_[1]==null?j:_[1],s=h.$real(),$=h.$imag(),t=R("Math").$exp(p(V(s,R("Math").$log(G)),V($,c))),e=Z(V(c,s),V($,R("Math").$log(G))),R("Complex").$polar(t,e);if(P(R("Integer"),h))if(b(Y(h,0))){for(r=E,i=r,a=p(h,1);te(a,0);){for(l=a.$divmod(2),_=L(l),o=_[0]==null?j:_[0],v=_[1]==null?j:_[1];ie(v,0);)r=I.$Complex(p(V(r.$real(),r.$real()),V(r.$imag(),r.$imag())),V(V(2,r.$real()),r.$imag())),a=o,l=a.$divmod(2),_=L(l),o=_[0]==null?j:_[0],v=_[1]==null?j:_[1];i=V(i,r),a=p(a,1)}return i}else return H(R("Rational").$new(1,1),E)["$**"](h["$-@"]());else return P(R("Float"),h)||P(R("Rational"),h)?(l=E.$polar(),_=L(l),G=_[0]==null?j:_[0],c=_[1]==null?j:_[1],R("Complex").$polar(G["$**"](h),V(c,h))):E.$__coerced__("**",h)}),C(x,"$abs",function(){var h=this;return R("Math").$hypot(h.real,h.imag)}),C(x,"$abs2",function(){var h=this;return Z(V(h.real,h.real),V(h.imag,h.imag))}),C(x,"$angle",function(){var h=this;return R("Math").$atan2(h.imag,h.real)}),C(x,"$conj",function(){var h=this;return I.$Complex(h.real,h.imag["$-@"]())}),C(x,"$denominator",function(){var h=this;return h.real.$denominator().$lcm(h.imag.$denominator())}),C(x,"$eql?",function(h){var _=this,l=j,E=j;return b(l=b(E=u("Complex")["$==="](h))?_.real.$class()["$=="](_.imag.$class()):E)?_["$=="](h):l}),C(x,"$fdiv",function(h){var _=this;return P(R("Numeric"),h)||I.$raise(R("TypeError"),""+h.$class()+" can't be coerced into Complex"),H(_,h)}),C(x,"$finite?",function(){var h=this,_=j;return b(_=h.real["$finite?"]())?h.imag["$finite?"]():_}),C(x,"$hash",function(){var h=this;return[R("Complex"),h.real,h.imag].$hash()}),C(x,"$infinite?",function(){var h=this,_=j;return b(_=h.real["$infinite?"]())?_:h.imag["$infinite?"]()}),C(x,"$inspect",function(){var h=this;return"("+h+")"}),C(x,"$numerator",function(){var h=this,_=j;return _=h.$denominator(),I.$Complex(V(h.real.$numerator(),H(_,h.real.$denominator())),V(h.imag.$numerator(),H(_,h.imag.$denominator())))}),C(x,"$polar",function(){var h=this;return[h.$abs(),h.$arg()]}),C(x,"$rationalize",function(h){var _=this;return arguments.length>1&&I.$raise(R("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),te(_.imag,0)&&I.$raise(R("RangeError"),"can't convert "+_+" into Rational"),_.$real().$rationalize(h)},-1),C(x,"$real?",W(!1)),C(x,"$rect",function(){var h=this;return[h.real,h.imag]}),C(x,"$to_f",function(){var h=this;return ie(h.imag,0)||I.$raise(R("RangeError"),"can't convert "+h+" into Float"),h.real.$to_f()}),C(x,"$to_i",function(){var h=this;return ie(h.imag,0)||I.$raise(R("RangeError"),"can't convert "+h+" into Integer"),h.real.$to_i()}),C(x,"$to_r",function(){var h=this;return ie(h.imag,0)||I.$raise(R("RangeError"),"can't convert "+h+" into Rational"),h.real.$to_r()}),C(x,"$to_s",function(){var h=this,_=j;return _=h.real.$inspect(),_=Z(_,P(R("Number"),h.imag)&&b(h.imag["$nan?"]())||b(h.imag["$positive?"]())||b(h.imag["$zero?"]())?"+":"-"),_=Z(_,h.imag.$abs().$inspect()),P(R("Number"),h.imag)&&(b(h.imag["$nan?"]())||b(h.imag["$infinite?"]()))&&(_=Z(_,"*")),Z(_,"i")}),z(m[0],"I",x.$new(0,1)),O(x,"$from_string",function(h){var _=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;h.match(_);var l,E;function G(){return _.test(h)}function c(){var $=h.match(_),t=$[0];return h=h.slice(t.length),t.replace(/_/g,"")}function s(){if(G()){var $=parseFloat(c());if(h[0]==="/")if(h=h.slice(1),G()){var t=parseFloat(c());return I.$Rational($,t)}else return h="/"+h,$;else return $}else return null}return l=s(),l?(E=s(),E?I.$Complex(l,E):h[0]==="i"?I.$Complex(0,l):I.$Complex(l,0)):h[0]==="i"?I.$Complex(0,1):h[0]==="-"&&h[1]==="i"?I.$Complex(0,-1):h[0]==="+"&&h[1]==="i"?I.$Complex(0,1):I.$Complex(0,0)}),function(A,h){return y(A,"rectangular","rect")}(n.get_singleton_class(x)),y(x,"arg","angle"),y(x,"conjugate","conj"),y(x,"divide","/"),y(x,"imaginary","imag"),y(x,"magnitude","abs"),y(x,"phase","arg"),y(x,"quo","/"),y(x,"rectangular","rect"),n.udef(x,"$negative?"),n.udef(x,"$positive?"),n.udef(x,"$step"),j}("::",R("Numeric"),B)};Opal.modules["corelib/rational/base"]=function(n){var k=n.module,b=n.def,P=n.klass;n.nil;var I=n.$$$;return n.add_stubs("convert,from_string"),function(O){var V=k(O,"Kernel");return b(V,"$Rational",function(Z,p){return p==null&&(p=1),I("Rational").$convert(Z,p)},-2)}("::"),function(O,V){var C=P(O,V,"String");return b(C,"$to_r",function(){var p=this;return I("Rational").$from_string(p)})}("::",null)};Opal.modules["corelib/rational"]=function(n){var k=n.klass,b=n.eqeq,P=n.Kernel,I=n.truthy,O=n.rb_lt,V=n.rb_divide,C=n.defs,Z=n.eqeqeq,p=n.not,H=n.Opal,ie=n.def,L=n.return_ivar,Y=n.rb_minus,te=n.rb_times,W=n.rb_plus,z=n.rb_gt,y=n.rb_le,K=n.return_self,B=n.alias,j=n.top,R=n.nil,g=n.$$$;return n.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),j.$require("corelib/numeric"),j.$require("corelib/rational/base"),function(q,M){var x=k(q,M,"Rational"),m=x.$$prototype;return m.num=m.den=R,C(x,"$reduce",function(d,A){var h=this,_=R;if(d=d.$to_i(),A=A.$to_i(),b(A,0))P.$raise(g("ZeroDivisionError"),"divided by 0");else if(I(O(A,0)))d=d["$-@"](),A=A["$-@"]();else if(b(A,1))return h.$new(d,A);return _=d.$gcd(A),h.$new(V(d,_),V(A,_))}),C(x,"$convert",function(d,A){var h=this;return(I(d["$nil?"]())||I(A["$nil?"]()))&&P.$raise(g("TypeError"),"cannot convert nil into Rational"),Z(g("Integer"),d)&&Z(g("Integer"),A)?h.$reduce(d,A):((Z(g("Float"),d)||Z(g("String"),d)||Z(g("Complex"),d))&&(d=d.$to_r()),(Z(g("Float"),A)||Z(g("String"),A)||Z(g("Complex"),A))&&(A=A.$to_r()),I(A["$equal?"](1))&&p(g("Integer")["$==="](d))?H["$coerce_to!"](d,g("Rational"),"to_r"):Z(g("Numeric"),d)&&Z(g("Numeric"),A)?V(d,A):h.$reduce(d,A))}),ie(x,"$initialize",function(d,A){var h=this;return h.num=d,h.den=A,h.$freeze()}),ie(x,"$numerator",L("num")),ie(x,"$denominator",L("den")),ie(x,"$coerce",function(d){var A=this,h=R;return Z(g("Rational"),h=d)?[d,A]:Z(g("Integer"),h)?[d.$to_r(),A]:Z(g("Float"),h)?[d,A.$to_f()]:R}),ie(x,"$==",function(d){var A=this,h=R,_=R;return Z(g("Rational"),h=d)?I(_=A.num["$=="](d.$numerator()))?A.den["$=="](d.$denominator()):_:Z(g("Integer"),h)?I(_=A.num["$=="](d))?A.den["$=="](1):_:Z(g("Float"),h)?A.$to_f()["$=="](d):d["$=="](A)}),ie(x,"$<=>",function(d){var A=this,h=R;return Z(g("Rational"),h=d)?Y(te(A.num,d.$denominator()),te(A.den,d.$numerator()))["$<=>"](0):Z(g("Integer"),h)?Y(A.num,te(A.den,d))["$<=>"](0):Z(g("Float"),h)?A.$to_f()["$<=>"](d):A.$__coerced__("<=>",d)}),ie(x,"$+",function(d){var A=this,h=R,_=R,l=R;return Z(g("Rational"),h=d)?(_=W(te(A.num,d.$denominator()),te(A.den,d.$numerator())),l=te(A.den,d.$denominator()),P.$Rational(_,l)):Z(g("Integer"),h)?P.$Rational(W(A.num,te(d,A.den)),A.den):Z(g("Float"),h)?W(A.$to_f(),d):A.$__coerced__("+",d)}),ie(x,"$-",function(d){var A=this,h=R,_=R,l=R;return Z(g("Rational"),h=d)?(_=Y(te(A.num,d.$denominator()),te(A.den,d.$numerator())),l=te(A.den,d.$denominator()),P.$Rational(_,l)):Z(g("Integer"),h)?P.$Rational(Y(A.num,te(d,A.den)),A.den):Z(g("Float"),h)?Y(A.$to_f(),d):A.$__coerced__("-",d)}),ie(x,"$*",function(d){var A=this,h=R,_=R,l=R;return Z(g("Rational"),h=d)?(_=te(A.num,d.$numerator()),l=te(A.den,d.$denominator()),P.$Rational(_,l)):Z(g("Integer"),h)?P.$Rational(te(A.num,d),A.den):Z(g("Float"),h)?te(A.$to_f(),d):A.$__coerced__("*",d)}),ie(x,"$/",function(d){var A=this,h=R,_=R,l=R;return Z(g("Rational"),h=d)?(_=te(A.num,d.$denominator()),l=te(A.den,d.$numerator()),P.$Rational(_,l)):Z(g("Integer"),h)?b(d,0)?V(A.$to_f(),0):P.$Rational(A.num,te(A.den,d)):Z(g("Float"),h)?V(A.$to_f(),d):A.$__coerced__("/",d)}),ie(x,"$**",function(d){var A=this,h=R;return Z(g("Integer"),h=d)?b(A,0)&&I(O(d,0))?g(g("Float"),"INFINITY"):I(z(d,0))?P.$Rational(A.num["$**"](d),A.den["$**"](d)):I(O(d,0))?P.$Rational(A.den["$**"](d["$-@"]()),A.num["$**"](d["$-@"]())):P.$Rational(1,1):Z(g("Float"),h)?A.$to_f()["$**"](d):Z(g("Rational"),h)?b(d,0)?P.$Rational(1,1):b(d.$denominator(),1)?I(O(d,0))?P.$Rational(A.den["$**"](d.$numerator().$abs()),A.num["$**"](d.$numerator().$abs())):P.$Rational(A.num["$**"](d.$numerator()),A.den["$**"](d.$numerator())):b(A,0)&&I(O(d,0))?P.$raise(g("ZeroDivisionError"),"divided by 0"):A.$to_f()["$**"](d):A.$__coerced__("**",d)}),ie(x,"$abs",function(){var d=this;return P.$Rational(d.num.$abs(),d.den.$abs())}),ie(x,"$ceil",function(d){var A=this;return d==null&&(d=0),b(d,0)?V(A.num["$-@"](),A.den)["$-@"]().$ceil():A.$with_precision("ceil",d)},-1),ie(x,"$floor",function(d){var A=this;return d==null&&(d=0),b(d,0)?V(A.num["$-@"](),A.den)["$-@"]().$floor():A.$with_precision("floor",d)},-1),ie(x,"$hash",function(){var d=this;return[g("Rational"),d.num,d.den].$hash()}),ie(x,"$inspect",function(){var d=this;return"("+d+")"}),ie(x,"$rationalize",function(d){var A=this;if(arguments.length>1&&P.$raise(g("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),d==null)return A;for(var h=d.$abs(),_=Y(A,h),l=W(A,h),E=0,G=1,c=1,s=0,$,t,e,r,i;e=_.$ceil(),!y(e,l);)r=e-1,$=r*G+E,t=r*s+c,i=V(1,Y(l,r)),l=V(1,Y(_,r)),_=i,E=G,c=s,G=$,s=t;return P.$Rational(e*G+E,e*s+c)},-1),ie(x,"$round",function(d){var A=this,h=R,_=R,l=R;return d==null&&(d=0),b(d,0)?b(A.num,0)?0:b(A.den,1)?A.num:(h=W(te(A.num.$abs(),2),A.den),_=te(A.den,2),l=V(h,_).$truncate(),I(O(A.num,0))?l["$-@"]():l):A.$with_precision("round",d)},-1),ie(x,"$to_f",function(){var d=this;return V(d.num,d.den)}),ie(x,"$to_i",function(){var d=this;return d.$truncate()}),ie(x,"$to_r",K),ie(x,"$to_s",function(){var d=this;return""+d.num+"/"+d.den}),ie(x,"$truncate",function(d){var A=this;return d==null&&(d=0),b(d,0)?I(O(A.num,0))?A.$ceil():A.$floor():A.$with_precision("truncate",d)},-1),ie(x,"$with_precision",function(d,A){var h=this,_=R,l=R;return Z(g("Integer"),A)||P.$raise(g("TypeError"),"not an Integer"),_=10["$**"](A),l=te(h,_),I(O(A,1))?V(l.$send(d),_).$to_i():P.$Rational(l.$send(d),_)}),C(x,"$from_string",function(d){var A=d.trimLeft(),h=/^[+-]?[\d_]+(\.[\d_]+)?/;A.match(h);var _,l;function E(){return h.test(A)}function G(){var c=A.match(h),s=c[0];return A=A.slice(s.length),s.replace(/_/g,"")}return E()?(_=parseFloat(G()),A[0]==="/"?(A=A.slice(1),E()?(l=parseFloat(G()),P.$Rational(_,l)):P.$Rational(_,1)):P.$Rational(_,1)):P.$Rational(0,1)}),B(x,"divide","/"),B(x,"quo","/")}("::",g("Numeric"))};Opal.modules["corelib/time"]=function(n){var k=n.slice,b=n.deny_frozen_access,P=n.klass,I=n.Kernel,O=n.Opal,V=n.defs,C=n.eqeqeq,Z=n.def,p=n.truthy,H=n.rb_gt,ie=n.rb_lt,L=n.send,Y=n.rb_plus,te=n.rb_divide,W=n.rb_minus,z=n.range,y=n.neqeq,K=n.rb_le,B=n.eqeq,j=n.alias,R=n.top,g=[],q=n.nil,M=n.$$$;return n.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),R.$require("corelib/comparable"),function(x,m,u){var d=P(x,m,"Time"),A=[d].concat(u),h=n.$r(A);d.$include(M("Comparable"));var _=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],G=["January","February","March","April","May","June","July","August","September","October","November","December"];V(d,"$at",function($,t){var e;return M("Time")["$==="]($)?(t!==void 0&&I.$raise(M("TypeError"),"can't convert Time into an exact number"),e=new Date($.getTime()),e.timezone=$.timezone,e):($.$$is_number||($=O["$coerce_to!"]($,M("Integer"),"to_int")),t===void 0?new Date($*1e3):(t.$$is_number||(t=O["$coerce_to!"](t,M("Integer"),"to_int")),new Date($*1e3+t/1e3)))},-2);function c(s,$,t,e,r,i){if(s.$$is_string?s=parseInt(s,10):s=O["$coerce_to!"](s,M("Integer"),"to_int"),$===q)$=1;else if(!$.$$is_number)if($["$respond_to?"]("to_str"))switch($=$.$to_str(),$.toLowerCase()){case"jan":$=1;break;case"feb":$=2;break;case"mar":$=3;break;case"apr":$=4;break;case"may":$=5;break;case"jun":$=6;break;case"jul":$=7;break;case"aug":$=8;break;case"sep":$=9;break;case"oct":$=10;break;case"nov":$=11;break;case"dec":$=12;break;default:$=$.$to_i()}else $=O["$coerce_to!"]($,M("Integer"),"to_int");return($<1||$>12)&&I.$raise(M("ArgumentError"),"month out of range: "+$),$=$-1,t===q?t=1:t.$$is_string?t=parseInt(t,10):t=O["$coerce_to!"](t,M("Integer"),"to_int"),(t<1||t>31)&&I.$raise(M("ArgumentError"),"day out of range: "+t),e===q?e=0:e.$$is_string?e=parseInt(e,10):e=O["$coerce_to!"](e,M("Integer"),"to_int"),(e<0||e>24)&&I.$raise(M("ArgumentError"),"hour out of range: "+e),r===q?r=0:r.$$is_string?r=parseInt(r,10):r=O["$coerce_to!"](r,M("Integer"),"to_int"),(r<0||r>59)&&I.$raise(M("ArgumentError"),"min out of range: "+r),i===q?i=0:i.$$is_number||(i.$$is_string?i=parseInt(i,10):i=O["$coerce_to!"](i,M("Integer"),"to_int")),(i<0||i>60)&&I.$raise(M("ArgumentError"),"sec out of range: "+i),[s,$,t,e,r,i]}return V(d,"$new",function($,t,e,r,i,a,o){var v=this;t==null&&(t=q),e==null&&(e=q),r==null&&(r=q),i==null&&(i=q),a==null&&(a=q),o==null&&(o=q);var S,F,T,J;return $===void 0?new Date:(S=c($,t,e,r,i,a),$=S[0],t=S[1],e=S[2],r=S[3],i=S[4],a=S[5],o===q?(F=new Date($,t,e,r,i,0,a*1e3),$<100&&F.setFullYear($),F):(T=v.$_parse_offset(o),J=new Date(Date.UTC($,t,e,r,i,0,a*1e3)),$<100&&J.setUTCFullYear($),F=new Date(J.getTime()-T*36e5),F.timezone=T,F))},-1),V(d,"$_parse_offset",function($){var t;if($.$$is_string)if($=="UTC")t=0;else if(/^[+-]\d\d:[0-5]\d$/.test($)){var e,r,i;e=$[0],r=+($[1]+$[2]),i=+($[4]+$[5]),t=(e=="-"?-1:1)*(r+i/60)}else I.$raise(M("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+$);else $.$$is_number?t=$/3600:I.$raise(M("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return t}),V(d,"$local",function($,t,e,r,i,a,o,v,S,F){t==null&&(t=q),e==null&&(e=q),r==null&&(r=q),i==null&&(i=q),a==null&&(a=q),o==null&&(o=q),v==null&&(v=q),S==null&&(S=q),F==null&&(F=q);var T,J;return arguments.length===10&&(T=k(arguments),$=T[5],t=T[4],e=T[3],r=T[2],i=T[1],a=T[0]),T=c($,t,e,r,i,a),$=T[0],t=T[1],e=T[2],r=T[3],i=T[4],a=T[5],J=new Date($,t,e,r,i,0,a*1e3),$<100&&J.setFullYear($),J},-2),V(d,"$gm",function($,t,e,r,i,a,o,v,S,F){t==null&&(t=q),e==null&&(e=q),r==null&&(r=q),i==null&&(i=q),a==null&&(a=q),o==null&&(o=q),v==null&&(v=q),S==null&&(S=q),F==null&&(F=q);var T,J;return arguments.length===10&&(T=k(arguments),$=T[5],t=T[4],e=T[3],r=T[2],i=T[1],a=T[0]),T=c($,t,e,r,i,a),$=T[0],t=T[1],e=T[2],r=T[3],i=T[4],a=T[5],J=new Date(Date.UTC($,t,e,r,i,0,a*1e3)),$<100&&J.setUTCFullYear($),J.timezone=0,J},-2),V(d,"$now",function(){var $=this;return $.$new()}),Z(d,"$+",function($){var t=this;C(M("Time"),$)&&I.$raise(M("TypeError"),"time + time?"),$.$$is_number||($=O["$coerce_to!"]($,M("Integer"),"to_int"));var e=new Date(t.getTime()+$*1e3);return e.timezone=t.timezone,e}),Z(d,"$-",function($){var t=this;if(C(M("Time"),$))return(t.getTime()-$.getTime())/1e3;$.$$is_number||($=O["$coerce_to!"]($,M("Integer"),"to_int"));var e=new Date(t.getTime()-$*1e3);return e.timezone=t.timezone,e}),Z(d,"$<=>",function($){var t=this,e=q;return C(M("Time"),$)?t.$to_f()["$<=>"]($.$to_f()):(e=$["$<=>"](t),p(e["$nil?"]())?q:p(H(e,0))?-1:p(ie(e,0))?1:0)}),Z(d,"$==",function($){var t=this,e=q;return p(e=M("Time")["$==="]($))?t.$to_f()===$.$to_f():e}),Z(d,"$asctime",function(){var $=this;return $.$strftime("%a %b %e %H:%M:%S %Y")}),L([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function s($,t,e,r){var i=s.$$s==null?this:s.$$s;return $==null&&($=q),t==null&&(t=q),e==null&&(e=q),r==null&&(r=0),L(i,"define_method",[$],function a(){var o=a.$$s==null?this:a.$$s;return r+(o.timezone!=null?new Date(o.getTime()+o.timezone*36e5)[e]():o[t]())},{$$s:i})},{$$arity:-4,$$s:d}),Z(d,"$yday",function(){var $=this,t=q,e=q,r=q;return t=h("Time").$new($.$year()).$to_i(),e=h("Time").$new($.$year(),$.$month(),$.$day()).$to_i(),r=86400,Y(te(W(e,t),r).$round(),1)}),Z(d,"$isdst",function(){var $=this,t=new Date($.getFullYear(),0,1),e=new Date($.getFullYear(),6,1);return $.getTimezoneOffset()<Math.max(t.getTimezoneOffset(),e.getTimezoneOffset())}),Z(d,"$dup",function(){var $=this,t=q;return t=new Date($.getTime()),t.$copy_instance_variables($),t.$initialize_dup($),t}),Z(d,"$eql?",function($){var t=this,e=q;return p(e=$["$is_a?"](M("Time")))?t["$<=>"]($)["$zero?"]():e}),L([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function s($,t){var e=s.$$s==null?this:s.$$s;return $==null&&($=q),t==null&&(t=q),L(e,"define_method",[$],function r(){var i=r.$$s==null?this:r.$$s;return i.$wday()===t},{$$s:e})},{$$s:d}),Z(d,"$hash",function(){var $=this;return[M("Time"),$.getTime()].$hash()}),Z(d,"$inspect",function(){var $=this;return p($["$utc?"]())?$.$strftime("%Y-%m-%d %H:%M:%S UTC"):$.$strftime("%Y-%m-%d %H:%M:%S %z")}),Z(d,"$succ",function(){var $=this,t=new Date($.getTime()+1e3);return t.timezone=$.timezone,t}),Z(d,"$usec",function(){var $=this;return $.getMilliseconds()*1e3}),Z(d,"$zone",function(){var $=this;if($.timezone===0)return"UTC";if($.timezone!=null)return q;var t=$.toString(),e;return t.indexOf("(")==-1?e=t.match(/[A-Z]{3,4}/)[0]:e=t.match(/\((.+)\)(?:\s|$)/)[1],e=="GMT"&&/(GMT\W*\d{4})/.test(t)?RegExp.$1:e}),Z(d,"$getgm",function(){var $=this,t=new Date($.getTime());return t.timezone=0,t}),Z(d,"$gmtime",function(){var $=this;return $.timezone!==0&&(b($),$.timezone=0),$}),Z(d,"$gmt?",function(){var $=this;return $.timezone===0}),Z(d,"$gmt_offset",function(){var $=this;return $.timezone!=null?$.timezone*60:-$.getTimezoneOffset()*60}),Z(d,"$strftime",function($){var t=this;return $.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,r,i,a,o){var v="",S,F,T,J=r.indexOf("0")!==-1,ee=r.indexOf("-")===-1,ae=r.indexOf("_")!==-1,le=r.indexOf("^")!==-1,ce=r.indexOf("#")!==-1,de=(r.match(":")||[]).length;switch(i=parseInt(i,10),J&&ae&&(r.indexOf("0")<r.indexOf("_")?J=!1:ae=!1),o){case"Y":v+=t.$year();break;case"C":J=!ae,v+=Math.round(t.$year()/100);break;case"y":J=!ae,v+=t.$year()%100;break;case"m":J=!ae,v+=t.$mon();break;case"B":v+=G[t.$mon()-1];break;case"b":case"h":ae=!J,v+=E[t.$mon()-1];break;case"d":J=!ae,v+=t.$day();break;case"e":ae=!J,v+=t.$day();break;case"j":J=!ae,i=isNaN(i)?3:i,v+=t.$yday();break;case"H":J=!ae,v+=t.$hour();break;case"k":ae=!J,v+=t.$hour();break;case"I":J=!ae,v+=t.$hour()%12||12;break;case"l":ae=!J,v+=t.$hour()%12||12;break;case"P":v+=t.$hour()>=12?"pm":"am";break;case"p":v+=t.$hour()>=12?"PM":"AM";break;case"M":J=!ae,v+=t.$min();break;case"S":J=!ae,v+=t.$sec();break;case"L":J=!ae,i=isNaN(i)?3:i,v+=t.getMilliseconds();break;case"N":i=isNaN(i)?9:i,v+=t.getMilliseconds().toString().$rjust(3,"0"),v=v.$ljust(i,"0");break;case"z":var he=t.timezone==null?t.getTimezoneOffset():-t.timezone*60,ve=Math.floor(Math.abs(he)/60),me=Math.abs(he)%60;v+=he<0?"+":"-",v+=ve<10?"0":"",v+=ve,de>0&&(v+=":"),v+=me<10?"0":"",v+=me,de>1&&(v+=":00");break;case"Z":v+=t.$zone();break;case"A":v+=_[t.$wday()];break;case"a":v+=l[t.$wday()];break;case"u":v+=t.$wday()+1;break;case"w":v+=t.$wday();break;case"V":v+=t.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":v+=t.$cweek_cyear()["$[]"](1);break;case"g":v+=t.$cweek_cyear()["$[]"](1)["$[]"](z(-2,-1,!1));break;case"s":v+=t.$to_i();break;case"n":v+=`
`;break;case"t":v+="	";break;case"%":v+="%";break;case"c":v+=t.$strftime("%a %b %e %T %Y");break;case"D":case"x":v+=t.$strftime("%m/%d/%y");break;case"F":v+=t.$strftime("%Y-%m-%d");break;case"v":v+=t.$strftime("%e-%^b-%4Y");break;case"r":v+=t.$strftime("%I:%M:%S %p");break;case"R":v+=t.$strftime("%H:%M");break;case"T":case"X":v+=t.$strftime("%H:%M:%S");break;case"J":if(S=t.$to_date().$jd(),S<2405160){v+=t.$strftime("%Y-%m-%d");break}else S<2419614?(F="M",T=1867):S<2424875?(F="T",T=1911):S<2447535?(F="S",T=1925):S<2458605?(F="H",T=1988):(F="R",T=2018);v+=t.$format("%c%02d",F,W(t.$year(),T)),v+=t.$strftime("-%m-%d");break;default:return e}return le&&(v=v.toUpperCase()),ce&&(v=v.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),ee&&(J||ae)&&(v=v.$rjust(isNaN(i)?2:i,ae?" ":"0")),v})}),Z(d,"$to_a",function(){var $=this;return[$.$sec(),$.$min(),$.$hour(),$.$day(),$.$month(),$.$year(),$.$wday(),$.$yday(),$.$isdst(),$.$zone()]}),Z(d,"$to_f",function(){var $=this;return $.getTime()/1e3}),Z(d,"$to_i",function(){var $=this;return parseInt($.getTime()/1e3,10)}),Z(d,"$cweek_cyear",function(){var $=this,t=q,e=q,r=q,i=q,a=q,o=q,v=q;return t=M("Time").$new($.$year(),1,1),e=t.$wday(),r=$.$year(),p(K(e,4))&&y(e,0)?i=W(e,1):(i=W(W(e,7),1),B(i,-8)&&(i=-1)),a=te(Y($.$yday(),i),7).$ceil(),p(K(a,0))?M("Time").$new(W($.$year(),1),12,31).$cweek_cyear():(B(a,53)&&(o=M("Time").$new($.$year(),12,31),v=o.$wday(),p(K(v,3))&&y(v,0)&&(a=1,r=Y(r,1))),[a,r])}),function(s,$){return j(s,"mktime","local"),j(s,"utc","gm")}(n.get_singleton_class(d)),j(d,"ctime","asctime"),j(d,"dst?","isdst"),j(d,"getutc","getgm"),j(d,"gmtoff","gmt_offset"),j(d,"mday","day"),j(d,"month","mon"),j(d,"to_s","inspect"),j(d,"tv_sec","to_i"),j(d,"tv_usec","usec"),j(d,"utc","gmtime"),j(d,"utc?","gmt?"),j(d,"utc_offset","gmt_offset")}("::",Date,g)};Opal.modules["corelib/struct"]=function(n){var k=n.klass,b=n.slice,P=n.extract_kwargs,I=n.ensure_kwargs,O=n.hash_get,V=n.truthy,C=n.neqeq,Z=n.eqeq,p=n.Opal,H=n.send,ie=n.Class,L=n.to_a,Y=n.def,te=n.defs,W=n.Kernel,z=n.rb_gt,y=n.rb_minus,K=n.eqeqeq,B=n.rb_lt,j=n.rb_ge,R=n.rb_plus,g=n.alias,q=n.top,M=[],x=n.nil,m=n.$$$;return n.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),q.$require("corelib/enumerable"),function(u,d,A){var h=k(u,d,"Struct"),_=[h].concat(A),l=n.$r(_);h.$include(m("Enumerable")),te(h,"$new",function G(c,s,$){var t=G.$$p||x,e,r,i,a,o=this,v=x;if(G.$$p=null,e=b(arguments,1),r=P(e),r=I(r),i=e,a=O(r,"keyword_init"),a==null&&(a=!1),V(c))if(Z(c.$class(),m("String"))&&C(c["$[]"](0).$upcase(),c["$[]"](0)))i.$unshift(c),c=x;else try{c=p["$const_name!"](c)}catch(S){if(n.rescue(S,[m("TypeError"),m("NameError")]))try{i.$unshift(c),c=x}finally{n.pop_exception(S)}else throw S}return H(i,"map",[],function(F){return F==null&&(F=x),p["$coerce_to!"](F,m("String"),"to_str")}),v=H(ie,"new",[o],function S(){var F=S.$$s==null?this:S.$$s;return H(i,"each",[],function T(J){var ee=T.$$s==null?this:T.$$s;return J==null&&(J=x),ee.$define_struct_attribute(J)},{$$s:F}),function(T,J){return Y(T,"$new",function(ae){var le,ce,de=this,he=x;return le=b(arguments),ce=le,he=de.$allocate(),he.$$data={},H(he,"initialize",L(ce)),he},-1),T.$alias_method("[]","new")}(n.get_singleton_class(F))},{$$s:o}),V(t)&&H(v,"module_eval",[],t.$to_proc()),v.$$keyword_init=a,V(c)&&m("Struct").$const_set(c,v),v},-2),te(h,"$define_struct_attribute",function(c){var s=this;return Z(s,m("Struct"))&&W.$raise(m("ArgumentError"),"you cannot define attributes to the Struct class"),s.$members()["$<<"](c),H(s,"define_method",[c],function $(){var t=$.$$s==null?this:$.$$s;return t.$$data[c]},{$$s:s}),H(s,"define_method",[""+c+"="],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=x),e.$$data[c]=t},{$$s:s})}),te(h,"$members",function(){var c=this,s=x;return c.members==null&&(c.members=x),Z(c,m("Struct"))&&W.$raise(m("ArgumentError"),"the Struct class has no members"),c.members=V(s=c.members)?s:[]}),te(h,"$inherited",function(c){var s=this,$=x;return s.members==null&&(s.members=x),$=s.members,H(c,"instance_eval",[],function t(){var e=t.$$s==null?this:t.$$s;return e.members=$},{$$s:s})}),Y(h,"$initialize",function(c){var s,$,t=this,e=x,r=x,i=x;return s=b(arguments),$=s,V(t.$class().$$keyword_init)?(e=V(r=$.$last())?r:new Map,(V(z($.$length(),1))||V($.length===1&&!e.$$is_hash))&&W.$raise(m("ArgumentError"),"wrong number of arguments (given "+$.$length()+", expected 0)"),i=y(e.$keys(),t.$class().$members()),V(i["$any?"]())&&W.$raise(m("ArgumentError"),"unknown keywords: "+i.$join(", ")),H(t.$class().$members(),"each",[],function a(o){var v,S=a.$$s==null?this:a.$$s;return o==null&&(o=x),v=[o,e["$[]"](o)],H(S,"[]=",v),v[v.length-1]},{$$s:t})):(V(z($.$length(),t.$class().$members().$length()))&&W.$raise(m("ArgumentError"),"struct size differs"),H(t.$class().$members(),"each_with_index",[],function a(o,v){var S,F=a.$$s==null?this:a.$$s;return o==null&&(o=x),v==null&&(v=x),S=[o,$["$[]"](v)],H(F,"[]=",S),S[S.length-1]},{$$s:t}))},-1),Y(h,"$initialize_copy",function(c){var s=this;s.$$data={};var $=Object.keys(c.$$data),t,e,r;for(t=0,e=$.length;t<e;t++)r=$[t],s.$$data[r]=c.$$data[r]}),te(h,"$keyword_init?",function(){var c=this;return c.$$keyword_init}),Y(h,"$members",function(){var c=this;return c.$class().$members()}),Y(h,"$hash",function(){var c=this;return[c.$class(),c.$to_a()].$hash()}),Y(h,"$[]",function(c){var s=this;return K(m("Integer"),c)?(V(B(c,s.$class().$members().$size()["$-@"]()))&&W.$raise(m("IndexError"),"offset "+c+" too small for struct(size:"+s.$class().$members().$size()+")"),V(j(c,s.$class().$members().$size()))&&W.$raise(m("IndexError"),"offset "+c+" too large for struct(size:"+s.$class().$members().$size()+")"),c=s.$class().$members()["$[]"](c)):K(m("String"),c)?s.$$data.hasOwnProperty(c)||W.$raise(m("NameError").$new("no member '"+c+"' in struct",c)):W.$raise(m("TypeError"),"no implicit conversion of "+c.$class()+" into Integer"),c=p["$coerce_to!"](c,m("String"),"to_str"),s.$$data[c]}),Y(h,"$[]=",function(c,s){var $=this;return K(m("Integer"),c)?(V(B(c,$.$class().$members().$size()["$-@"]()))&&W.$raise(m("IndexError"),"offset "+c+" too small for struct(size:"+$.$class().$members().$size()+")"),V(j(c,$.$class().$members().$size()))&&W.$raise(m("IndexError"),"offset "+c+" too large for struct(size:"+$.$class().$members().$size()+")"),c=$.$class().$members()["$[]"](c)):K(m("String"),c)?V($.$class().$members()["$include?"](c.$to_sym()))||W.$raise(m("NameError").$new("no member '"+c+"' in struct",c)):W.$raise(m("TypeError"),"no implicit conversion of "+c.$class()+" into Integer"),c=p["$coerce_to!"](c,m("String"),"to_str"),$.$$data[c]=s}),Y(h,"$==",function(c){var s=this;if(!V(c["$instance_of?"](s.$class())))return!1;var $={},t={};function e(r,i){var a,o,v;$[r.$__id__()]=!0,t[i.$__id__()]=!0;for(a in r.$$data)if(o=r.$$data[a],v=i.$$data[a],m("Struct")["$==="](o)){if((!$.hasOwnProperty(o.$__id__())||!t.hasOwnProperty(v.$__id__()))&&!e(o,v))return!1}else if(!o["$=="](v))return!1;return!0}return e(s,c)}),Y(h,"$eql?",function(c){var s=this;if(!V(c["$instance_of?"](s.$class())))return!1;var $={},t={};function e(r,i){var a,o,v;$[r.$__id__()]=!0,t[i.$__id__()]=!0;for(a in r.$$data)if(o=r.$$data[a],v=i.$$data[a],m("Struct")["$==="](o)){if((!$.hasOwnProperty(o.$__id__())||!t.hasOwnProperty(v.$__id__()))&&!e(o,v))return!1}else if(!o["$eql?"](v))return!1;return!0}return e(s,c)}),Y(h,"$each",function G(){var c=G.$$p||x,s=this;return G.$$p=null,c===x?H(s,"enum_for",["each"],function $(){var t=$.$$s==null?this:$.$$s;return t.$size()},{$$s:s}):(H(s.$class().$members(),"each",[],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=x),n.yield1(c,e["$[]"](t))},{$$s:s}),s)}),Y(h,"$each_pair",function G(){var c=G.$$p||x,s=this;return G.$$p=null,c===x?H(s,"enum_for",["each_pair"],function $(){var t=$.$$s==null?this:$.$$s;return t.$size()},{$$s:s}):(H(s.$class().$members(),"each",[],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=x),n.yield1(c,[t,e["$[]"](t)])},{$$s:s}),s)}),Y(h,"$length",function(){var c=this;return c.$class().$members().$length()}),Y(h,"$to_a",function(){var c=this;return H(c.$class().$members(),"map",[],function s($){var t=s.$$s==null?this:s.$$s;return $==null&&($=x),t["$[]"]($)},{$$s:c})});var E=[];return Y(h,"$inspect",function(){var c=this,s=x,$=x;return function(){try{return s="#<struct ",V(E["$include?"](c.$__id__()))?R(s,":...>"):(E["$<<"](c.$__id__()),$=!0,K(m("Struct"),c)&&V(c.$class().$name())&&(s=R(s,""+c.$class()+" ")),s=R(s,H(c.$each_pair(),"map",[],function(e,r){return e==null&&(e=x),r==null&&(r=x),""+e+"="+l("Opal").$inspect(r)}).$join(", ")),s=R(s,">"),s)}finally{V($)&&E.pop()}}()}),Y(h,"$to_h",function G(c){var s=G.$$p||x,$,t,e=this;return G.$$p=null,$=b(arguments),t=$,s!==x?H(H(e,"map",[],s.$to_proc()),"to_h",L(t)):H(e.$class().$members(),"each_with_object",[new Map],function r(i,a){var o,v=r.$$s==null?this:r.$$s;return i==null&&(i=x),a==null&&(a=x),o=[i,v["$[]"](i)],H(a,"[]=",o),o[o.length-1]},{$$s:e})},-1),Y(h,"$values_at",function(c){var s,$,t=this;s=b(arguments),$=s,$=H($,"map",[],function(o){return o==null&&(o=x),o.$$is_range?o.$to_a():o}).$flatten();for(var e=[],r=0,i=$.length;r<i;r++)$[r].$$is_number||W.$raise(m("TypeError"),"no implicit conversion of "+$[r].$class()+" into Integer"),e.push(t["$[]"]($[r]));return e},-1),Y(h,"$dig",function(c,s){var $,t,e=this,r=x;return $=b(arguments,1),t=$,r=V(c.$$is_string&&e.$$data.hasOwnProperty(c))&&e.$$data[c]||x,r===x||t.length===0?r:(V(r["$respond_to?"]("dig"))||W.$raise(m("TypeError"),""+r.$class()+" does not have #dig method"),H(r,"dig",L(t)))},-2),g(h,"size","length"),g(h,"to_s","inspect"),g(h,"values","to_a")}("::",null,M)};Opal.modules["corelib/set"]=function(n){var k=n.freeze,b=n.klass,P=n.slice,I=n.defs,O=n.truthy,V=n.eqeqeq,C=n.Kernel,Z=n.send,p=n.def,H=n.eqeq,ie=n.rb_lt,L=n.rb_le,Y=n.alias,te=[],W=n.nil,z=n.$$$;return n.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(y,K,B){var j=b(y,K,"Set"),R=[j].concat(B),g=n.$r(R),q=W,M=j.$$prototype;M.hash=W,j.$include(z("Enumerable")),I(j,"$[]",function(u){var d,A,h=this;return d=P(arguments),A=d,h.$new(A)},-1),p(j,"$initialize",function m(u){var d=m.$$p||W,A=this;return m.$$p=null,u==null&&(u=W),A.hash=new Map,O(u["$nil?"]())?W:(V(z("Enumerable"),u)||C.$raise(z("ArgumentError"),"value must be enumerable"),O(d)?Z(u,"each",[],function h(_){var l=h.$$s==null?this:h.$$s;return _==null&&(_=W),l.$add(n.yield1(d,_))},{$$s:A}):A.$merge(u))},-1),p(j,"$dup",function(){var u=this,d=W;return d=u.$class().$new(),d.$merge(u)}),p(j,"$-",function(u){var d=this;return O(u["$respond_to?"]("each"))||C.$raise(z("ArgumentError"),"value must be enumerable"),d.$dup().$subtract(u)}),p(j,"$inspect",function(){var u=this;return"#<Set: {"+u.$to_a().$join(",")+"}>"}),p(j,"$==",function(u){var d=this;return O(d["$equal?"](u))?!0:O(u["$instance_of?"](d.$class()))?d.hash["$=="](u.$instance_variable_get("@hash")):O(u["$is_a?"](z("Set")))&&H(d.$size(),u.$size())?Z(u,"all?",[],function A(h){var _=A.$$s==null?this:A.$$s;return _.hash==null&&(_.hash=W),h==null&&(h=W),_.hash["$include?"](h)},{$$s:d}):!1}),p(j,"$add",function(u){var d=this;return d.hash["$[]="](u,!0),d}),p(j,"$classify",function m(){var u=m.$$p||W,d=this,A=W;return m.$$p=null,u===W?d.$enum_for("classify"):(A=Z(z("Hash"),"new",[],function h(_,l){var E,G=h.$$s==null?this:h.$$s;return _==null&&(_=W),l==null&&(l=W),E=[l,G.$class().$new()],Z(_,"[]=",E),E[E.length-1]},{$$s:d}),Z(d,"each",[],function(_){return _==null&&(_=W),A["$[]"](n.yield1(u,_)).$add(_)}),A)}),p(j,"$collect!",function m(){var u=m.$$p||W,d=this,A=W;return m.$$p=null,u===W?d.$enum_for("collect!"):(A=d.$class().$new(),Z(d,"each",[],function(_){return _==null&&(_=W),A["$<<"](n.yield1(u,_))}),d.$replace(A))}),p(j,"$compare_by_identity",function(){var u=this;return O(u.hash["$respond_to?"]("compare_by_identity"))?(u.hash.$compare_by_identity(),u):u.$raise(g("NotImplementedError"),""+u.$class().$name()+"#compare_by_identity is not implemented")}),p(j,"$compare_by_identity?",function(){var u=this,d=W;return O(d=u.hash["$respond_to?"]("compare_by_identity?"))?u.hash["$compare_by_identity?"]():d}),p(j,"$delete",function(u){var d=this;return d.hash.$delete(u),d}),p(j,"$delete?",function(u){var d=this;return O(d["$include?"](u))?(d.$delete(u),d):W}),p(j,"$delete_if",function m(){var u=m.$$p||W,d=this;return m.$$p=null,u===W?d.$enum_for("delete_if"):(Z(Z(d,"select",[],function(h){return h==null&&(h=W),n.yield1(u,h)}),"each",[],function A(h){var _=A.$$s==null?this:A.$$s;return _.hash==null&&(_.hash=W),h==null&&(h=W),_.hash.$delete(h)},{$$s:d}),d)}),p(j,"$freeze",function(){var u=this;return O(u["$frozen?"]())?u:(u.hash.$freeze(),k(u))}),p(j,"$keep_if",function m(){var u=m.$$p||W,d=this;return m.$$p=null,u===W?d.$enum_for("keep_if"):(Z(Z(d,"reject",[],function(h){return h==null&&(h=W),n.yield1(u,h)}),"each",[],function A(h){var _=A.$$s==null?this:A.$$s;return _.hash==null&&(_.hash=W),h==null&&(h=W),_.hash.$delete(h)},{$$s:d}),d)}),p(j,"$reject!",function m(){var u=m.$$p||W,d=this,A=W;return m.$$p=null,u===W?d.$enum_for("reject!"):(A=d.$size(),Z(d,"delete_if",[],u.$to_proc()),H(d.$size(),A)?W:d)}),p(j,"$select!",function m(){var u=m.$$p||W,d=this,A=W;return m.$$p=null,u===W?d.$enum_for("select!"):(A=d.$size(),Z(d,"keep_if",[],u.$to_proc()),H(d.$size(),A)?W:d)}),p(j,"$add?",function(u){var d=this;return O(d["$include?"](u))?W:d.$add(u)}),p(j,"$each",function m(){var u=m.$$p||W,d=this;return m.$$p=null,u===W?d.$enum_for("each"):(Z(d.hash,"each_key",[],u.$to_proc()),d)}),p(j,"$empty?",function(){var u=this;return u.hash["$empty?"]()}),p(j,"$eql?",function(u){var d=this;return d.hash["$eql?"](Z(u,"instance_eval",[],function A(){var h=A.$$s==null?this:A.$$s;return h.hash==null&&(h.hash=W),h.hash},{$$s:d}))}),p(j,"$clear",function(){var u=this;return u.hash.$clear(),u}),p(j,"$include?",function(u){var d=this;return d.hash["$include?"](u)}),p(j,"$merge",function(u){var d=this;return Z(u,"each",[],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=W),_.$add(h)},{$$s:d}),d}),p(j,"$replace",function(u){var d=this;return d.$clear(),d.$merge(u),d}),p(j,"$size",function(){var u=this;return u.hash.$size()}),p(j,"$subtract",function(u){var d=this;return Z(u,"each",[],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=W),_.$delete(h)},{$$s:d}),d}),p(j,"$|",function(u){var d=this;return O(u["$respond_to?"]("each"))||C.$raise(z("ArgumentError"),"value must be enumerable"),d.$dup().$merge(u)});function x(m){O(q=m["$is_a?"](z("Set")))||C.$raise(z("ArgumentError"),"value must be a set")}return p(j,"$superset?",function(u){var d=this;return x(u),O(ie(d.$size(),u.$size()))?!1:Z(u,"all?",[],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=W),_["$include?"](h)},{$$s:d})}),p(j,"$proper_superset?",function(u){var d=this;return x(u),O(L(d.$size(),u.$size()))?!1:Z(u,"all?",[],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=W),_["$include?"](h)},{$$s:d})}),p(j,"$subset?",function(u){var d=this;return x(u),O(ie(u.$size(),d.$size()))?!1:Z(d,"all?",[],function(h){return h==null&&(h=W),u["$include?"](h)})}),p(j,"$proper_subset?",function(u){var d=this;return x(u),O(L(u.$size(),d.$size()))?!1:Z(d,"all?",[],function(h){return h==null&&(h=W),u["$include?"](h)})}),p(j,"$intersect?",function(u){var d=this;return x(u),O(ie(d.$size(),u.$size()))?Z(d,"any?",[],function(h){return h==null&&(h=W),u["$include?"](h)}):Z(u,"any?",[],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=W),_["$include?"](h)},{$$s:d})}),p(j,"$disjoint?",function(u){var d=this;return d["$intersect?"](u)["$!"]()}),p(j,"$to_a",function(){var u=this;return u.hash.$keys()}),Y(j,"+","|"),Y(j,"<","proper_subset?"),Y(j,"<<","add"),Y(j,"<=","subset?"),Y(j,">","proper_superset?"),Y(j,">=","superset?"),Y(j,"difference","-"),Y(j,"filter!","select!"),Y(j,"length","size"),Y(j,"map!","collect!"),Y(j,"member?","include?"),Y(j,"union","|")}("::",null,te)};Opal.modules["corelib/dir"]=function(n){var k=n.klass,b=n.def,P=n.truthy,I=n.alias,O=n.nil,V=n.$$$;return n.add_stubs("[],pwd"),function(C,Z,p){var H=k(C,Z,"Dir");return function(ie,L){return b(ie,"$chdir",function Y(te){var W=Y.$$p||O,z=O;return Y.$$p=null,function(){try{return z=n.current_dir,n.current_dir=te,n.yieldX(W,[])}finally{n.current_dir=z}}()}),b(ie,"$pwd",function(){return n.current_dir||"."}),b(ie,"$home",function(){var te=O;return P(te=V("ENV")["$[]"]("HOME"))?te:"."}),I(ie,"getwd","pwd")}(n.get_singleton_class(H))}("::",null)};Opal.modules["corelib/file"]=function(n){var k=n.truthy,b=n.klass,P=n.const_set,I=n.Opal,O=n.regexp,V=n.rb_plus,C=n.def,Z=n.Kernel,p=n.eqeq,H=n.rb_lt,ie=n.rb_minus,L=n.range,Y=n.send,te=n.slice,W=n.alias,z=[],y=n.nil,K=n.$$$;return n.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(B,j,R){var g=b(B,j,"File"),q=[g].concat(R),M=y;return P(q[0],"Separator",P(q[0],"SEPARATOR","/")),P(q[0],"ALT_SEPARATOR",y),P(q[0],"PATH_SEPARATOR",":"),P(q[0],"FNM_SYSCASE",0),M=/^[a-zA-Z]:(?:\\|\/)/,function(x,m){var u=[x].concat(m),d=n.$r(u);C(x,"$absolute_path",function(l,E){var G=y,c=y,s=y,$=y,t=y,e=y,r=y,i=y,a=y,o=y;E==null&&(E=y),G=d("SEPARATOR"),c=h(),s=[],l=k(l["$respond_to?"]("to_path"))?l.$to_path():l,l=I["$coerce_to!"](l,K("String"),"to_str"),E=k($=E)?$:K("Dir").$pwd(),t=l.substr(0,G.length)===G||M.test(l),e=E.substr(0,G.length)===G||M.test(E),k(t)?(r=l.$split(O(["[",c,"]"])),i=M.test(l)?"":l.$sub(O(["^([",c,"]+).*$"]),"\\1"),a=!0):(r=V(E.$split(O(["[",c,"]"])),l.$split(O(["[",c,"]"]))),i=M.test(E)?"":E.$sub(O(["^([",c,"]+).*$"]),"\\1"),a=e);for(var v,S=0,F=r.length;S<F;S++)v=r[S],!(v===y||v===""&&(s.length===0||a)||v==="."&&(s.length===0||a))&&(v===".."?s.pop():s.push(v));return!a&&r[0]!=="."&&s.$unshift("."),o=s.$join(G),k(a)&&(o=V(i,o)),o},-2),C(x,"$expand_path",function(l,E){var G=this,c=y,s=y,$=y,t=y,e=y;return E==null&&(E=y),c=d("SEPARATOR"),s=h(),k(l[0]==="~"||E&&E[0]==="~")&&($=d("Dir").$home(),k($)||Z.$raise(K("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),t=M.test($)?"":$.$sub(O(["^([",s,"]+).*$"]),"\\1"),k($["$start_with?"](t))||Z.$raise(K("ArgumentError"),"non-absolute home"),$=V($,c),e=O(["^\\~(?:",c,"|$)"]),l=l.$sub(e,$),k(E)&&(E=E.$sub(e,$))),G.$absolute_path(l,E)},-2);function A(_){return k(_["$respond_to?"]("to_path"))&&(_=_.$to_path()),_=I["$coerce_to!"](_,K("String"),"to_str"),_}function h(){return d("ALT_SEPARATOR")===y?n.escape_regexp(d("SEPARATOR")):n.escape_regexp(V(d("SEPARATOR"),d("ALT_SEPARATOR")))}return C(x,"$dirname",function(l,E){var G=this,c=y;if(E==null&&(E=1),p(E,0))return l;k(H(E,0))&&Z.$raise(K("ArgumentError"),"level can't be negative"),c=h(),l=A(l);var s=l.match(new RegExp("^["+c+"]")),$;return l=l.replace(new RegExp("["+c+"]+$"),""),l=l.replace(new RegExp("[^"+c+"]+$"),""),l=l.replace(new RegExp("["+c+"]+$"),""),l===""?$=s?"/":".":$=l,E==1?$:G.$dirname($,ie(E,1))},-2),C(x,"$basename",function(l,E){var G=y;return E==null&&(E=y),G=h(),l=A(l),l.length==0||(E!==y?E=I["$coerce_to!"](E,K("String"),"to_str"):E=null,l=l.replace(new RegExp("(.)["+G+"]*$"),"$1"),l=l.replace(new RegExp("^(?:.*["+G+"])?([^"+G+"]+)$"),"$1"),E===".*"?l=l.replace(/\.[^\.]+$/,""):E!==null&&(E=n.escape_regexp(E),l=l.replace(new RegExp(""+E+"$"),""))),l},-2),C(x,"$extname",function(l){var E=this,G=y,c=y;return l=A(l),G=E.$basename(l),k(G["$empty?"]())||(c=G["$[]"](L(1,-1,!1)).$rindex("."),k(c["$nil?"]())||p(V(c,1),ie(G.$length(),1)))?"":G["$[]"](n.Range.$new(V(c,1),-1,!1))}),C(x,"$exist?",function(l){return n.modules[l]!=null}),C(x,"$directory?",function(l){var E=y;E=[];for(var G in n.modules)E.push(G);return l=l.$gsub(O(["(^.",d("SEPARATOR"),"+|",d("SEPARATOR"),"+$)"])),Y(E,"find",[],function(s){return s==null&&(s=y),s["$=~"](O(["^",l]))})}),C(x,"$join",function(l){var E,G,c=y;return E=te(arguments),G=E,k(G["$empty?"]())?"":(c="",G=Y(G.$flatten().$each_with_index(),"map",[],function($,t){return $==null&&($=y),t==null&&(t=y),p(t,0)&&k($["$empty?"]())||p(G.$length(),V(t,1))&&k($["$empty?"]())?d("SEPARATOR"):$}),G=Y(G,"reject",[],"empty?".$to_proc()),Y(G,"each_with_index",[],function($,t){var e=y;return $==null&&($=y),t==null&&(t=y),e=G["$[]"](V(t,1)),k(e["$nil?"]())?c=""+c+$:(k($["$end_with?"](d("SEPARATOR")))&&k(e["$start_with?"](d("SEPARATOR")))&&($=$.$sub(O([d("SEPARATOR"),"+$"]),"")),c=k($["$end_with?"](d("SEPARATOR")))||k(e["$start_with?"](d("SEPARATOR")))?""+c+$:""+c+$+d("SEPARATOR"))}),c)},-1),C(x,"$split",function(l){return l.$split(d("SEPARATOR"))}),W(x,"realpath","expand_path"),W(x,"exists?","exist?")}(n.get_singleton_class(g),q)}("::",K("IO"),z)};Opal.modules["corelib/process/base"]=function(n){var k=n.klass,b=n.slice,P=n.defs,I=n.return_val,O=n.nil;return function(V,C){var Z=k(V,C,"Signal");return P(Z,"$trap",function(H){return b(arguments),O},-1)}("::",null),function(V,C){var Z=k(V,C,"GC");return P(Z,"$start",I(O))}("::",null)};Opal.modules["corelib/process"]=function(n){var k=n.module,b=n.defs,P=n.truthy,I=n.return_val,O=n.Kernel,V=n.nil,C=n.$$$;return n.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(Z){var p=k(Z,"Process"),H=V;if(p.__clocks__=[],b(p,"$__register_clock__",function(Y,te){var W=this;return W.__clocks__==null&&(W.__clocks__=V),W.$const_set(Y,W.__clocks__.$size()),W.__clocks__["$<<"](te)}),p.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),H=!1,n.global.performance)H=function(){return performance.now()};else if(n.global.process&&process.hrtime){var ie=process.hrtime();H=function(){var L=process.hrtime(ie),Y=L[1]/1e3|0;return L[0]*1e3+Y/1e3}}return P(H)&&p.$__register_clock__("CLOCK_MONOTONIC",H),b(p,"$pid",I(0)),b(p,"$times",function(){var Y=V;return Y=C("Time").$now().$to_f(),C(C("Benchmark"),"Tms").$new(Y,Y,Y,Y,Y)}),b(p,"$clock_gettime",function(Y,te){var W=this,z=V;W.__clocks__==null&&(W.__clocks__=V),te==null&&(te="float_second"),P(z=W.__clocks__["$[]"](Y))||O.$raise(C(C("Errno"),"EINVAL"),"clock_gettime("+Y+") "+W.__clocks__["$[]"](Y));var y=z();switch(te){case"float_second":return y/1e3;case"float_millisecond":return y/1;case"float_microsecond":return y*1e3;case"second":return y/1e3|0;case"millisecond":return y/1|0;case"microsecond":return y*1e3|0;case"nanosecond":return y*1e6|0;default:O.$raise(C("ArgumentError"),"unexpected unit: "+te)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(n){var k=n.klass,b=n.module,P=n.def,I=n.range,O=n.send,V=n.rb_divide,C=n.Kernel,Z=n.Opal,p=[],H=n.nil,ie=n.$$$;return n.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(L,Y,te){var W=k(L,Y,"Random"),z=[W].concat(te);return function(y,K){var B=b(y,"Formatter"),j=[B].concat(K),R=n.$r(j);return P(B,"$hex",function(q){var M=this;q==null&&(q=H),q=ie("Random").$_verify_count(q);for(var x=M.$bytes(q),m="",u=0;u<q;u++)m+=x.charCodeAt(u).toString(16).padStart(2,"0");return m.$encode("US-ASCII")},-1),P(B,"$random_bytes",function(q){var M=this;return q==null&&(q=H),M.$bytes(q)},-1),P(B,"$base64",function(q){var M=this;return q==null&&(q=H),ie("Base64").$strict_encode64(M.$random_bytes(q)).$encode("US-ASCII")},-1),P(B,"$urlsafe_base64",function(q,M){var x=this;return q==null&&(q=H),M==null&&(M=!1),ie("Base64").$urlsafe_encode64(x.$random_bytes(q),M).$encode("US-ASCII")},-1),P(B,"$uuid",function(){var q=this,M=H;return M=q.$hex(16).$split(""),M["$[]="](12,"4"),M["$[]="](16,(parseInt(M["$[]"](16),16)&3|8).toString(16)),M=[M["$[]"](I(0,8,!0)),M["$[]"](I(8,12,!0)),M["$[]"](I(12,16,!0)),M["$[]"](I(16,20,!0)),M["$[]"](I(20,32,!0))],M=O(M,"map",[],"join".$to_proc()),M.$join("-")}),P(B,"$random_float",function(){var q=this,M=H,x=H;return M=q.$bytes(4),x=0,O(4,"times",[],function(u){return u==null&&(u=H),x=x["$<<"](8),x=x["$|"](M["$[]"](u).$ord())}),V(x.$abs(),2147483647)}),P(B,"$random_number",function(q){var M=this;function x(){return M.$random_float()}function m(d){return Math.floor(x()*d)}function u(){var d=q.begin,A=q.end;if(d===H||A===H)return H;var h=A-d;return h<0?H:h===0?d:(A%1===0&&d%1===0&&!q.excl&&h++,m(h)+d)}return q==null?x():q.$$is_range?u():q.$$is_number?(q<=0&&C.$raise(ie("ArgumentError"),"invalid argument - "+q),q%1===0?m(q):x()*q):(q=Z["$coerce_to!"](q,ie("Integer"),"to_int"),q<=0&&C.$raise(ie("ArgumentError"),"invalid argument - "+q),m(q))},-1),P(B,"$alphanumeric",function(q){var M=this,x=H;return q==null&&(q=H),q=R("Random").$_verify_count(q),x=O([I("0","9",!1),I("a","z",!1),I("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),O(ie("Array"),"new",[q],function m(u){var d=m.$$s==null?this:m.$$s;return x["$[]"](d.$random_number(x.$length()))},{$$s:M}).$join()},-1)}(W,z),W.$include(ie(ie("Random"),"Formatter")),W.$extend(ie(ie("Random"),"Formatter"))}("::",null,p)};Opal.modules["corelib/random/mersenne_twister"]=function(n){var k=n.klass,b=n.const_set,P=n.send,I=n.nil,O=n.$$$,V=I;return n.add_stubs("generator="),V=function(){var C=624,Z=397,p=2567483615,H=2147483648,ie=2147483647,L=function(j,R){return j&H|R&ie},Y=function(j,R){return L(j,R)>>>1^(R&1?p:0)};function te(j){var R={left:0,next:C,state:new Array(C)};return W(R,j),R}function W(j,R){var g;for(j.state[0]=R>>>0,g=1;g<C;g++)j.state[g]=1812433253*(j.state[g-1]^j.state[g-1]>>30>>>0)+g,j.state[g]&=4294967295;j.left=1,j.next=C}function z(j){var R=0,g=j.state,q;for(j.left=C,j.next=0,q=C-Z+1;--q;R++)g[R]=g[R+Z]^Y(g[R+0],g[R+1]);for(q=Z;--q;R++)g[R]=g[R+(Z-C)]^Y(g[R+0],g[R+1]);g[R]=g[R+(Z-C)]^Y(g[R+0],g[0])}function y(j){var R;return--j.left<=0&&z(j),R=j.state[j.next++],R^=R>>>11,R^=R<<7&2636928640,R^=R<<15&4022730752,R^=R>>>18,R>>>0}function K(j,R){return j>>>=5,R>>>=6,(j*67108864+R)*(1/9007199254740992)}function B(j){var R=y(j),g=y(j);return K(R,g)}return{genrand_real:B,init:te}}(),function(C,Z){var p=k(C,Z,"Random"),H,ie=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return b(p,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*ie)},reseed:function(L){return V.init(L)},rand:function(L){return V.genrand_real(L)}}),H=[O(p,"MERSENNE_TWISTER_GENERATOR")],P(p,"generator=",H),H[H.length-1]}("::",null)};Opal.modules["corelib/random"]=function(n){var k=n.truthy,b=n.klass,P=n.Kernel,I=n.defs,O=n.Opal,V=n.def,C=n.eqeqeq,Z=n.send,p=n.top,H=n.nil,ie=n.$$$;return n.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),p.$require("corelib/random/formatter"),function(L,Y){var te=b(L,Y,"Random");return te.$attr_reader("seed","state"),I(te,"$_verify_count",function(z){return k(z)||(z=16),typeof z!="number"&&(z=z.$to_int()),z<0&&P.$raise(ie("ArgumentError"),"negative string size (or size too big)"),z=Math.floor(z),z}),V(te,"$initialize",function(z){var y=this;return z==null&&(z=ie("Random").$new_seed()),z=O["$coerce_to!"](z,ie("Integer"),"to_int"),y.state=z,y.$reseed(z)},-1),V(te,"$reseed",function(z){var y=this;return y.seed=z,y.$rng=n.$$rand.reseed(z)}),I(te,"$new_seed",function(){return n.$$rand.new_seed()}),I(te,"$rand",function(z){var y=this;return ie(y,"DEFAULT").$rand(z)},-1),I(te,"$srand",function(z){var y=this,K=H;return z==null&&(z=ie("Random").$new_seed()),z=O["$coerce_to!"](z,ie("Integer"),"to_int"),K=ie(y,"DEFAULT").$seed(),ie(y,"DEFAULT").$reseed(z),K},-1),I(te,"$urandom",function(z){return ie("SecureRandom").$bytes(z)}),V(te,"$==",function(z){var y=this,K=H;return C(ie("Random"),z)?k(K=y.$seed()["$=="](z.$seed()))?y.$state()["$=="](z.$state()):K:!1}),V(te,"$bytes",function(z){var y=this;return z=ie("Random").$_verify_count(z),Z(ie("Array"),"new",[z],function K(){var B=K.$$s==null?this:K.$$s;return B.$rand(255).$chr()},{$$s:y}).$join().$encode("ASCII-8BIT")}),I(te,"$bytes",function(z){var y=this;return ie(y,"DEFAULT").$bytes(z)}),V(te,"$rand",function(z){var y=this;return y.$random_number(z)},-1),V(te,"$random_float",function(){var z=this;return z.state++,n.$$rand.rand(z.$rng)}),I(te,"$random_float",function(){var z=this;return ie(z,"DEFAULT").$random_float()}),I(te,"$generator=",function(z){var y=this;return n.$$rand=z,k(y["$const_defined?"]("DEFAULT"))?ie(y,"DEFAULT").$reseed():y.$const_set("DEFAULT",y.$new(y.$new_seed()))})}("::",null),p.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(n){var k=n.Kernel,b=n.klass,P=n.send,I=n.slice,O=n.module,V=n.def,C=n.return_val,Z=n.alias,p=n.defs,H=n.top,ie=[],L=n.nil,Y=n.$$$;n.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var te={};function W(y){switch(n.config.unsupported_features_severity){case"error":k.$raise(Y("NotImplementedError"),y);break;case"warning":z(y);break}}function z(y){te[y]||(te[y]=!0,H.$warn(y))}return function(y,K){var B=b(y,K,"String"),j="String#%s not supported. Mutable String methods are not supported in Opal.";return P(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function R(g){var q=R.$$s==null?this:R.$$s;return g==null&&(g=L),P(q,"define_method",[g],function(x){return I(arguments),k.$raise(Y("NotImplementedError"),j["$%"](g))},-1)},{$$s:B})}("::",null),function(y){var K=O(y,"Kernel"),B="Object tainting is not supported by Opal";return V(K,"$taint",function(){var R=this;return W(B),R}),V(K,"$untaint",function(){var R=this;return W(B),R}),V(K,"$tainted?",function(){return W(B),!1})}("::"),function(y,K){var B=b(y,K,"Module");return V(B,"$public",function(R){var g,q,M=this;return g=I(arguments),q=g,q.length===0?(M.$$module_function=!1,L):q.length===1?q[0]:q},-1),V(B,"$private_class_method",function(R){var g,q;return g=I(arguments),q=g,q.length===1?q[0]:q},-1),V(B,"$private_method_defined?",C(!1)),V(B,"$private_constant",function(R){return I(arguments),L},-1),Z(B,"nesting","public"),Z(B,"private","public"),Z(B,"protected","public"),Z(B,"protected_method_defined?","private_method_defined?"),Z(B,"public_class_method","private_class_method"),Z(B,"public_instance_method","instance_method"),Z(B,"public_instance_methods","instance_methods"),Z(B,"public_method_defined?","method_defined?")}("::",null),function(y){var K=O(y,"Kernel");return V(K,"$private_methods",function(j){return I(arguments),[]},-1),Z(K,"protected_methods","private_methods"),Z(K,"private_instance_methods","private_methods"),Z(K,"protected_instance_methods","private_methods")}("::"),function(y,K){var B=O(y,"Kernel"),j=[B].concat(K),R=n.$r(j);return V(B,"$eval",function(q){return I(arguments),k.$raise(Y("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+R("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",ie),p(H,"$public",function(K){var B,j;return B=I(arguments),j=B,j.length===1?j[0]:j},-1),p(H,"$private",function(K){var B,j;return B=I(arguments),j=B,j.length===1?j[0]:j},-1)};Opal.modules["corelib/binding"]=function(n){var k=n.klass,b=n.truthy,P=n.def,I=n.slice,O=n.send,V=n.to_a,C=n.Kernel,Z=n.return_ivar,p=n.eqeq;n.thrower;var H=n.module,ie=n.const_set,L=n.top,Y=[],te=n.nil,W=n.$$$;return n.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(z,y){var K=k(z,y,"Binding"),B=K.$$prototype;return B.jseval=B.scope_variables=te,P(K,"$initialize",function(R,g,q,M){var x,m=this;return g==null&&(g=[]),M==null&&(M=te),x=[R,g,q,M],m.jseval=x[0],m.scope_variables=x[1],m.receiver=x[2],m.source_location=x[3],b(typeof q!==void 0)?te:q=m.$js_eval("self")},-2),P(K,"$js_eval",function(R){var g,q,M=this;return g=I(arguments),q=g,b(M.jseval)?O(M.jseval,"call",V(q)):C.$raise("Evaluation on a Proc#binding is not supported")},-1),P(K,"$local_variable_get",function(R){var g=this;try{return g.$js_eval(R)}catch(q){if(n.rescue(q,[W("Exception")]))try{return C.$raise(W("NameError"),"local variable `"+R+"' is not defined for "+g.$inspect())}finally{n.pop_exception(q)}else throw q}}),P(K,"$local_variable_set",function(R,g){var q=this;return n.Binding.tmp_value=g,q.$js_eval(""+R+" = Opal.Binding.tmp_value"),delete n.Binding.tmp_value,g}),P(K,"$local_variables",Z("scope_variables")),P(K,"$local_variable_defined?",function(R){var g=this;return g.scope_variables["$include?"](R)}),P(K,"$eval",function(R,g,q){try{var M=this;return g==null&&(g=te),q==null&&(q=te),p(R,"self")?M.$receiver():C.$eval(R,M,g,q)}catch(x){if(x===n.t_eval_return)return x.$v;throw x}},-2),K.$attr_reader("receiver","source_location")}("::",null),function(z){var y=H(z,"Kernel");return P(y,"$binding",function(){return C.$raise("Opal doesn't support dynamic calls to binding")})}("::"),ie(Y[0],"TOPLEVEL_BINDING",W("Binding").$new(function(z){return new Function("self","return "+z)(L)},[],L,["<main>",0]))};Opal.modules["corelib/irb"]=function(n){var k=n.module,b=n.truthy,P=n.Kernel,I=n.defs,O=n.gvars,V=n.lambda,C=n.hash_rehash,Z=n.send,p=n.rb_plus,H=n.const_set,ie=n.klass,L=n.def,Y=n.Opal,te=n.range,W=n.eqeq,z=n.thrower,y=[],K=n.nil,B=n.$$$;n.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(j,R){var g=k(j,"Opal"),q=[g].concat(R);return function(M,x){var m=k(M,"IRB"),u=[m].concat(x),d=n.$r(u);return I(m,"$ensure_loaded",function(h){var _=K,l=K;if(b(n.loaded_features["$include?"](h)))return K;_=b(d("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":d("RUBY_ENGINE_VERSION"),l="https://cdn.opalrb.com/opal/"+_+"/"+h+".js";var E;if(typeof XMLHttpRequest<"u"){var G=new XMLHttpRequest;G.open("GET",l,!1),G.send(""),E=G.responseText}else P.$raise("You need to provision "+h+" yourself in this environment");return new Function("Opal",E)(n),n.require(h),b(n.loaded_features["$include?"](h))?K:P.$raise("Could not load "+h+" for some reason")}),m.$singleton_class().$attr_accessor("output"),I(m,"$prepare_console",function A(){var h=A.$$p||K,_,l=this,E=K,G=K;return O.stdout==null&&(O.stdout=K),O.stderr==null&&(O.stderr=K),O.stdin==null&&(O.stdin=K),A.$$p=null,function(){try{return l["$output="](""),E=C(new Map([[O.stdout,V(function(s){return s==null&&(s=K),O.stdout=s})],[O.stderr,V(function(s){return s==null&&(s=K),O.stderr=s})]])),b(l["$browser?"]())&&(Z(E,"each",[],function c(s,$){var t=c.$$s==null?this:c.$$s,e=K;return s==null&&(s=K),$==null&&($=K),e=s.$dup(),e["$write_proc="](Z(t,"proc",[],function r(i){var a=r.$$s==null?this:r.$$s;return i==null&&(i=K),a["$output="](p(a.$output(),i)),a["$output="](a.$output().$split(`
`).$last(30).$join(`
`)),b(i["$end_with?"](`
`))&&a["$output="](p(a.$output(),`
`)),s.$write_proc().$call(i)},{$$s:t})),e["$tty="](!1),$.$call(e)},{$$s:l}),G=O.stdin.$read_proc(),O.stdin["$read_proc="](function(c){var s=prompt(l.$output());return s!==null?s+`
`:K})),n.yieldX(h,[])}finally{Z(E,"each",[],function(s,$){return s==null&&(s=K),$==null&&($=K),$.$call(s)}),_=[G],Z(O.stdin,"read_proc=",_),_[_.length-1],_=[""],Z(l,"output=",_),_[_.length-1]}}()}),I(m,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),H(u[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(A,h){var _=ie(A,h,"Silencer"),l=_.$$prototype;return l.collector=l.stderr=K,L(_,"$initialize",function(){var G=this;return O.stderr==null&&(O.stderr=K),G.stderr=O.stderr}),L(_,"$silence",function E(){var G=E.$$p||K,c=this;return E.$$p=null,function(){try{return c.collector=B("StringIO").$new(),O.stderr=c.collector,n.yieldX(G,[])}finally{O.stderr=c.stderr}}()}),L(_,"$warnings",function(){var G=this;return G.collector.$string()})}(u[0],null)}(q[0],q)}(y[0],y),function(j,R,g){var q=ie(j,R,"Binding"),M=[q].concat(g),x=n.$r(M);return L(q,"$irb",function(){try{var u=z("return"),d=this,A=K;return B(Y,"IRB").$ensure_loaded("opal-replutils"),A=B(B(Y,"IRB"),"Silencer").$new(),Z(B(Y,"IRB"),"prepare_console",[],function h(){var _=h.$$s==null?this:h.$$s;return function(){try{var l=z("break");return Z(_,"loop",[],function E(){var G=E.$$s==null?this:E.$$s,c=K,s=K,$=K,t=K,e=K;G.$print(">> "),c=G.$gets(),b(c)||l.$throw(K,E.$$is_lambda),s="",b(B(Y,"IRB")["$browser?"]())&&G.$puts(c),b(c["$start_with?"]("ls "))?(s=c["$[]"](te(3,-1,!1)),$="ls"):W(c,`ls
`)?(s="self",$="ls"):b(c["$start_with?"]("show "))?(s=c["$[]"](te(5,-1,!1)),$="show"):(s=c,$="inspect"),t=K;do{try{Z(A,"silence",[],function(){return t=n.compile(s,{irb:!0})})}catch(r){if(n.rescue(r,[x("SyntaxError")])){e=r;try{if(b(B(B(Y,"IRB"),"LINEBREAKS")["$include?"](e.$message()))){G.$print(".. "),c=G.$gets(),b(c)||u.$throw(K,E.$$is_lambda),b(B(Y,"IRB")["$browser?"]())&&G.$puts(c),s=p(s,c);continue}else b(A.$warnings()["$empty?"]())?G.$warn(e.$full_message()):G.$warn(A.$warnings())}finally{n.pop_exception(r)}}else throw r}break}while(!0);return W($,"show")&&(G.$puts(t),u.$throw(K,E.$$is_lambda)),G.$puts(B("REPLUtils").$eval_and_print(t,$,!1,G))},{$$s:_,$$ret:u})}catch(E){if(E===l)return E.$v;throw E}finally{l.is_orphan=!0}}()},{$$s:d})}catch(h){if(h===u)return h.$v;throw h}finally{u.is_orphan=!0}})}("::",null,y),n.irb=function(j){B("Binding").$new(j).$irb()},n.load_parser=function(){n.Opal.IRB.$ensure_loaded("opal-parser")},typeof n.eval>"u"&&(n.eval=function(j){return n.load_parser(),n.eval(j)}),typeof n.compile>"u"&&(n.compile=function(j,R){return n.load_parser(),n.compile(j,R)})};Opal.modules.opal=function(n){var k=n.Object;return n.nil,n.add_stubs("require,autoload"),k.$require("opal/base"),k.$require("opal/mini"),k.$require("corelib/kernel/format"),k.$require("corelib/string/encoding"),k.$autoload("Math","corelib/math"),k.$require("corelib/complex/base"),k.$autoload("Complex","corelib/complex"),k.$require("corelib/rational/base"),k.$autoload("Rational","corelib/rational"),k.$require("corelib/time"),k.$autoload("Struct","corelib/struct"),k.$autoload("Set","corelib/set"),k.$autoload("Dir","corelib/dir"),k.$autoload("File","corelib/file"),k.$require("corelib/process/base"),k.$autoload("Process","corelib/process"),k.$autoload("Random","corelib/random"),k.$require("corelib/unsupported"),k.$require("corelib/binding"),k.$require("corelib/irb")};Opal.modules["js/proxy"]=function(n){var k=n.module,b=n.truthy,P=n.def,I=n.klass,O=n.const_set,V=n.slice,C=n.range,Z=n.send,p=n.to_a,H=n.gvars,ie=n.top,L=[],Y=n.nil;return n.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),ie.$require("opal"),ie.$require("native"),function(te,W){var z=k(te,"JS"),y=[z].concat(W),K=n.$r(y);return function(B,j){var R=k(B,"Helpers"),g=[R].concat(j),q=n.$r(g);return P(R,"$wrap_result",function(x){return b(x&&typeof x.then=="function")?q("Promise").$new(x):b(typeof x=="object"&&x!==null)?q("Proxy").$new(x):x}),P(R,"$native_methods",function(){var x=this,m=Y;return x.native_methods==null&&(x.native_methods=Y),x.native_methods=function(){if(b(m=x.native_methods))return m;{let u=x.$to_n();const d=new Set;for(;u!==null;){for(const A of Reflect.ownKeys(u)){const h=A.toString(),_=x.$to_rb_name(h);typeof A!="symbol"&&h!==_&&d.add(_),d.add(h)}u=Object.getPrototypeOf(u)}return Array.from(d)}}()})}(y[0],y),function(B,j,R){var g=I(B,j,"Proxy"),q=[g].concat(R),M=n.$r(q);return g.$include(M("Enumerable")),g.$include(M("Helpers")),g.$attr_accessor("native"),O(q[0],"IRREGULARS",["html","url","uri"]),P(g,"$initialize",function(m){var u=this;return u.native=u.$Native(m)}),P(g,"$method_missing",function x(m,u){var d=x.$$p||Y,A,h,_,l=this,E=Y,G=Y,c=Y,s=Y,$=Y,t=Y;return x.$$p=null,A=V(arguments,1),h=A,E=l.$to_js_name(m),b(l["$existing_property?"](E))||b(E["$end_with?"]("="))||l.$raise(M("NoMethodError"),"undefined method `"+m+"` for "+l),b(E["$end_with?"]("="))?(G=E["$[]"](C(0,-2,!1)),_=[G,h.$first()],Z(l.$native(),"[]=",_),_[_.length-1]):(c=l.$native()["$[]"](E),b(typeof c=="function")?(s=h.$dup(),b(d)&&($=function(){let e=Array.prototype.slice.call(arguments);return Z(d,"call",[l.$class().$new(this)].concat(p(e)))},s["$<<"]($)),t=c.apply(l.$to_n(),s.$to_n()),l.$wrap_result(t)):b(typeof c=="object"&&c!==null)?l.$wrap_result(c):c)},-2),P(g,"$to_str",function(){var m=this;return m.$to_n().toString()}),P(g,"$respond_to_missing?",function(m,u){return!0},-2),P(g,"$each",function x(){var m=x.$$p||Y,u=this,d=Y;return x.$$p=null,b(u["$respond_to?"]("length"))?(d=u.$length(),Z(n.Range.$new(0,d,!0),"each",[],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=Y),n.yield1(m,_["$[]"](h))},{$$s:u})):u.$enum_for("each")}),P(g,"$[]",function(m){var u=this,d=Y;return d=u.$native()["$[]"](m),u.$wrap_result(d)}),P(g,"$[]=",function(m,u){var d=this;return d.$native()["$[]="](m,u),d.$wrap_result(d.$native())}),P(g,"$to_n",function(){var m=this;return m.$native().$to_n()}),P(g,"$length",function(){var m=this;return m.$native().$length()}),g.$private(),P(g,"$to_js_name",function(m){return Z(m.$to_s().$split("_").$map(),"with_index",[],function(d,A){return d==null&&(d=Y),A==null&&(A=Y),b(M("IRREGULARS")["$include?"](d.$gsub("=","").$downcase()))?d.$upcase():b(A["$zero?"]())?d:d.$capitalize()}).$join()}),P(g,"$to_rb_name",function(m){return Z(m.$to_s(),"gsub",[/([A-Z]+)/],function(){var d;return"_"+((d=H["~"])===Y?Y:d["$[]"](1)).$downcase()}).$sub(/^_/,"")}),P(g,"$existing_property?",function(m){var u=this;return m in u.$to_n()})}(y[0],null,y),function(B,j,R){var g=I(B,j,"Promise"),q=[g].concat(R),M=n.$r(q);return g.$include(M("Helpers")),P(g,"$then",function x(){var m=x.$$p||Y,u,d=this,A=Y;return x.$$p=null,A=function(h){var _=m.$call(d.$wrap_result(h));return _&&typeof _.then=="function"?_:_&&typeof _.to_n=="function"?_.to_n():_},u=[d.$to_n().then(A)],Z(d,"native=",u),u[u.length-1]}),P(g,"$catch",function x(){var m=x.$$p||Y,u,d=this,A=Y;return x.$$p=null,A=function(h){var _=m.$call(d.$wrap_result(h));return _&&typeof _.then=="function"?_:_&&typeof _.to_n=="function"?_.to_n():_},u=[d.$to_n().catch(A)],Z(d,"native=",u),u[u.length-1]})}(y[0],K("Proxy"),y)}(L[0],L)};Opal.modules["opal_stimulus/stimulus_controller"]=function(n){var k=n.klass,b=n.const_set,P=n.Opal,I=n.defs,O=n.truthy,V=n.send,C=n.gvars,Z=n.return_val,p=n.thrower,H=n.rb_plus,ie=n.eqeqeq,L=n.def,Y=n.top,te=[],W=n.nil,z=n.$$$;return n.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),Y.$require("opal"),Y.$require("native"),Y.$require("js/proxy"),function(y,K,B){var j=k(y,K,"StimulusController"),R=[j].concat(B),g=n.$r(R),q=j.$$prototype;return q.window=q.document=W,b(R[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),b(R[0],"DEFAULT_GETTERS",["element"]),I(j,"$inherited",function(x){return P.$bridge(x.$stimulus_controller(),x)}),I(j,"$stimulus_controller",function(){var x=this;return x.stimulus_controller==null&&(x.stimulus_controller=W),O(x.stimulus_controller)||(x.stimulus_controller=class extends Controller{}),x.stimulus_controller}),I(j,"$stimulus_name",function(){var x=this;return x.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),I(j,"$method_added",function(x){var m=this;if(O(g("DEFAULT_GETTERS")["$include?"](x)))return W;m.$stimulus_controller().prototype[x]=function(...u){try{var d=u.map(function(A){return A&&typeof A=="object"&&!A.$$class?n.JS.Proxy.$new(A):A});return this["$"+x].apply(this,d)}catch(A){console.error("Uncaught",A)}}}),I(j,"$to_ruby_name",function(x){return V(x.$to_s(),"gsub",[/([A-Z]+)/],function(){var u;return"_"+((u=C["~"])===W?W:u["$[]"](1)).$downcase()}).$sub(/^_/,"")}),I(j,"$register_all!",function(){try{var x=p("return"),m=this;return V(m.$subclasses(),"each",[],function u(d){return d==null&&(d=W),V(d,"define_method",["dummy"],Z(W)),O(application.controllers["$include?"](d.$stimulus_name()))&&x.$throw(W,u.$$is_lambda),application.register(d.$stimulus_name(),d.$stimulus_controller())},{$$ret:x})}catch(u){if(u===x)return u.$v;throw u}finally{x.is_orphan=!0}}),I(j,"$targets=",function(x){var m=this;return x==null&&(x=[]),m.$stimulus_controller().targets=x,V(x,"each",[],function u(d){var A=u.$$s==null?this:u.$$s,h=W,_=W,l=W,E=W,G=W,c=W;d==null&&(d=W),h=d.$to_s(),_=A.$to_ruby_name(d),V(A,"define_method",[H(_,"_target")],function(){return z(g("JS"),"Proxy").$new(this[H(h,"Target")])}),V(A,"define_method",[H(_,"_targets")],function(){return V(this[H(h,"Targets")],"map",[],function(t){return t==null&&(t=W),z(g("JS"),"Proxy").$new(t)})}),V(A,"define_method",[H(H("has_",_),"_target")],function(){return this[H(H("has",h.$capitalize()),"Target")]}),l=H(_,"_target_connected"),E=H(h,"TargetConnected"),A.$stimulus_controller().prototype[E]=function(){if(this["$respond_to?"]&&this["$respond_to?"](l))return this["$"+l]()},G=H(_,"_target_disconnected"),c=H(h,"TargetDisconnected"),A.$stimulus_controller().prototype[c]=function(){if(this["$respond_to?"]&&this["$respond_to?"](G))return this["$"+G]()}},{$$s:m})},-1),I(j,"$outlets=",function(x){var m=this;return x==null&&(x=[]),m.$stimulus_controller().outlets=x,V(x,"each",[],function u(d){var A=u.$$s==null?this:u.$$s,h=W,_=W,l=W,E=W,G=W,c=W;d==null&&(d=W),h=d.$to_s(),_=A.$to_ruby_name(d),V(A,"define_method",[H(_,"_outlet")],function(){return this[H(h,"Outlet")]}),V(A,"define_method",[H(_,"_outlets")],function(){return this[H(h,"Outlets")]}),V(A,"define_method",[H(H("has_",_),"_outlet")],function(){return this[H(H("has",h.$capitalize()),"Outlet")]}),l=H(_,"_outlet_connected"),E=H(h,"OutletConnected"),A.$stimulus_controller().prototype[E]=function(){if(this["$respond_to?"]&&this["$respond_to?"](l))return this["$"+l]()},G=H(_,"_outlet_disconnected"),c=H(h,"OutletDisconnected"),A.$stimulus_controller().prototype[c]=function(){if(this["$respond_to?"]&&this["$respond_to?"](G))return this["$"+G]()}},{$$s:m})},-1),I(j,"$values=",function(x){var m=this,u=W;return x==null&&(x=new Map),u=new Map,V(x,"each",[],function d(A,h){var _=d.$$s==null?this:d.$$s,l=W,E=W,G=W,c=W;A==null&&(A=W),h==null&&(h=W),A=_.$to_ruby_name(A),l=ie("string",E=h)?String:ie("number",E)?Number:ie("boolean",E)?Boolean:ie("array",E)?Array:ie("object",E)?Object:_.$raise(g("ArgumentError"),"Unsupported value type: "+h+", please use :string, :number, :boolean, :array, or :object"),u["$[]="](A,l),_.$stimulus_controller().values=u.$to_n(),V(_,"define_method",[H(A,"_value")],function s(){var $=s.$$s==null?this:s.$$s;return $.$Native(this[H(A,"Value")])},{$$s:_}),V(_,"define_method",[H(A,"_value=")],function s($){var t=s.$$s==null?this:s.$$s;return $==null&&($=W),t.$Native(this[H(A,"Value")]=$)},{$$s:_}),V(_,"define_method",["has_"+A],function(){return this[H(H("has",A.$to_s().$capitalize()),"Value")]}),G=""+A+"_value_changed",c=""+A+"ValueChanged",_.$stimulus_controller().prototype[c]=function(s,$){if(h["$=="]("object")&&(s=JSON.stringify(s),$=JSON.stringify($)),this["$respond_to?"]&&this["$respond_to?"](G))return this["$"+G](s,$)}},{$$s:m})},-1),I(j,"$classes=",function(x){var m=this;return x==null&&(x=[]),m.$stimulus_controller().classes=x,V(x,"each",[],function u(d){var A=u.$$s==null?this:u.$$s,h=W,_=W;return d==null&&(d=W),h=d.$to_s(),_=A.$to_ruby_name(d),V(A,"define_method",[""+_+"_class"],function(){return this[H(h,"Class")]}),V(A,"define_method",[""+_+"_classes"],function(){return this[H(h,"Classes")]}),V(A,"define_method",["has_"+_+"_class"],function(){return this[H(H("has",h.$capitalize()),"Class")]})},{$$s:m})},-1),L(j,"$element",function(){return z(g("JS"),"Proxy").$new(this.element)}),L(j,"$window",function(){var x=this,m=W;return C.$==null&&(C.$=W),x.window=O(m=x.window)?m:z(g("JS"),"Proxy").$new(C.$.$window())}),L(j,"$document",function(){var x=this,m=W;return C.$==null&&(C.$=W),x.document=O(m=x.document)?m:z(g("JS"),"Proxy").$new(C.$.$document())})}(te[0],Controller,te)};Opal.modules["opal_vite/concerns/v1/stimulus_helpers"]=function(n){var k=n.module,b=n.def,P=n.truthy,I=n.eqeq,O=n.send,V=n.slice,C=n.ensure_kwargs,Z=n.get_kwarg,p=n.hash_get,H=n.rb_plus,ie=n.rb_minus,L=n.to_a,Y=n.range,te=n.const_set,W=[],z=n.$r(W),y=n.nil,K=n.$$$;return n.add_stubs("camelize,has_target?,target_set_value,target_set_html,set_target_style,get_target_style,==,show_target,hide_target,call,body_style,to_n,storage_get,is_a?,parse_int,event_data,to_native_element,Native,map,to_a,js_timestamp,is_nan?,parse_float,to_s,empty?,respond_to?,fetch_json_promise,fetch_json_safe,js_then,js_catch,console_error,set_stimulus_value,+,stimulus_value,-,!,get_class,get_classes,has_outlet?,get_outlet,js_call_on,each,get_outlets,nil?,stimulus_dispatch,action_param,[],[]=,flatten,to_proc,blank?,private,include?,upcase,downcase,split,join,first"),function(B,j){var R=k(B,"OpalVite"),g=[R].concat(j);return function(q,M){var x=k(q,"Concerns"),m=[x].concat(M);return function(u,d){var A=k(u,"V1"),h=[A].concat(d);return function(_,l){var E=k(_,"StimulusHelpers"),G=[E].concat(l),c=n.$r(G);return b(E,"$has_target?",function($){var t=this,e=y;return e="has"+t.$camelize($)+"Target",this[e]}),b(E,"$get_target",function($){var t=this,e=y;return P(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e]):y}),b(E,"$get_targets",function($){var t=this,e=y;return e=""+t.$camelize($,!1)+"Targets",Array.from(this[e]||[])}),b(E,"$target_value",function($){var t=this,e=y;return P(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].value):y}),b(E,"$target_set_value",function($,t){var e=this,r=y;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].value=t):y}),b(E,"$target_html",function($){var t=this,e=y;return P(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].innerHTML):y}),b(E,"$target_set_html",function($,t){var e=this,r=y;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].innerHTML=t):y}),b(E,"$target_text",function($){var t=this,e=y;return P(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].textContent):y}),b(E,"$target_set_text",function($,t){var e=this,r=y;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].textContent=t):y}),b(E,"$target_data",function($,t){var e=this,r=y;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].getAttribute("data-"+t)):y}),b(E,"$target_set_data",function($,t,e){var r=this,i=y;return P(r["$has_target?"]($))?(i=""+r.$camelize($,!1)+"Target",this[i].setAttribute("data-"+t,e)):y}),b(E,"$target_clear",function($){var t=this;return t.$target_set_value($,"")}),b(E,"$target_clear_html",function($){var t=this;return t.$target_set_html($,"")}),b(E,"$set_target_style",function($,t,e){var r=this,i=y;return P(r["$has_target?"]($))?(i=""+r.$camelize($,!1)+"Target",this[i].style[t]=e):y}),b(E,"$get_target_style",function($,t){var e=this,r=y;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].style[t]):y}),b(E,"$show_target",function($){var t=this;return t.$set_target_style($,"display","")}),b(E,"$hide_target",function($){var t=this;return t.$set_target_style($,"display","none")}),b(E,"$toggle_target_visibility",function($){var t=this,e=y;return e=t.$get_target_style($,"display"),I(e,"none")?t.$show_target($):t.$hide_target($)}),b(E,"$add_target_class",function($,t){var e=this,r=y;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.add(t)):y}),b(E,"$remove_target_class",function($,t){var e=this,r=y;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.remove(t)):y}),b(E,"$toggle_target_class",function($,t){var e=this,r=y;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.toggle(t)):y}),b(E,"$has_target_class?",function($,t){var e=this,r=y;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.contains(t)):!1}),b(E,"$js_timestamp",function(){return Date.now()}),b(E,"$js_iso_date",function(){return new Date().toISOString()}),b(E,"$js_date",function($){return $==null&&($=y),P($)?new Date($):new Date},-1),b(E,"$js_regexp",function($,t){return t==null&&(t=""),new RegExp($,t)},-2),b(E,"$js_regexp_test",function($,t,e){return e==null&&(e=""),new RegExp($,e).test(t)},-3),b(E,"$set_timeout",function s($){var t=s.$$p||y;return s.$$p=null,setTimeout(function(){t.$call()},$)}),b(E,"$set_interval",function s($){var t=s.$$p||y;return s.$$p=null,setInterval(function(){t.$call()},$)}),b(E,"$clear_timeout",function($){return clearTimeout($)}),b(E,"$clear_interval",function($){return clearInterval($)}),b(E,"$body_style",function($,t){return document.body.style[$]=t}),b(E,"$lock_body_scroll",function(){var $=this;return $.$body_style("overflow","hidden")}),b(E,"$unlock_body_scroll",function(){var $=this;return $.$body_style("overflow","")}),b(E,"$js_array",function(){return[]}),b(E,"$js_array_push",function($,t){return $.push(t.$to_n())}),b(E,"$js_array_length",function($){return $.length}),b(E,"$js_array_at",function($,t){return $[t]}),b(E,"$storage_get",function($){return localStorage.getItem($)}),b(E,"$storage_set",function($,t){return localStorage.setItem($,t)}),b(E,"$storage_remove",function($){return localStorage.removeItem($)}),b(E,"$storage_get_json",function($,t){var e=this,r=y;return t==null&&(t=y),r=e.$storage_get($),P(r===null)?t:JSON.parse(r)},-2),b(E,"$storage_set_json",function($,t){return localStorage.setItem($,JSON.stringify(t.$to_n()))}),b(E,"$dispatch_window_event",function($,t){var e=y;t==null&&(t=new Map),e=P(t["$is_a?"](c("Hash")))?t.$to_n():t;const r=new CustomEvent($,{detail:e});window.dispatchEvent(r)},-2),b(E,"$dispatch_event",function($,t){var e=y;t==null&&(t=new Map),e=P(t["$is_a?"](c("Hash")))?t.$to_n():t;const r=new CustomEvent($,{detail:e});this.element.dispatchEvent(r)},-2),b(E,"$on_window_event",function s($){var t=s.$$p||y;return s.$$p=null,window.addEventListener($,t)}),b(E,"$off_window_event",function($,t){return window.removeEventListener($,t)}),b(E,"$on_document_event",function s($){var t=s.$$p||y;return s.$$p=null,document.addEventListener($,t)}),b(E,"$on_dom_ready",function s(){var $=s.$$p||y;return s.$$p=null,document.addEventListener("DOMContentLoaded",$)}),b(E,"$on_element_event",function s($,t){var e=s.$$p||y;return s.$$p=null,$.addEventListener(t,e)}),b(E,"$off_element_event",function($,t,e){return $.removeEventListener(t,e)}),b(E,"$on_controller_event",function s($){var t=s.$$p||y;return s.$$p=null,this.element.addEventListener($,t)}),b(E,"$event_target",function(){return event.currentTarget}),b(E,"$event_data",function($){return event.currentTarget.getAttribute("data-"+$)}),b(E,"$event_data_int",function($){var t=this;return t.$parse_int(t.$event_data($))}),b(E,"$prevent_default",function(){return event.preventDefault()}),b(E,"$event_key",function(){return event.key}),b(E,"$to_native_element",function($){return P(typeof $.$to_n=="function")?$.$to_n():$}),b(E,"$add_class",function($,t){var e=this,r=y;return r=e.$to_native_element($),r.classList.add(t)}),b(E,"$remove_class",function($,t){var e=this,r=y;return r=e.$to_native_element($),r.classList.remove(t)}),b(E,"$toggle_class",function($,t){var e=this,r=y;return r=e.$to_native_element($),r.classList.toggle(t)}),b(E,"$has_class?",function($,t){var e=this,r=y;return r=e.$to_native_element($),r.classList.contains(t)}),b(E,"$set_attr",function($,t,e){var r=this,i=y;return i=r.$to_native_element($),i.setAttribute(t,e)}),b(E,"$get_attr",function($,t){var e=this,r=y;return r=e.$to_native_element($),r.getAttribute(t)}),b(E,"$remove_attr",function($,t){var e=this,r=y;return r=e.$to_native_element($),r.removeAttribute(t)}),b(E,"$set_style",function($,t,e){var r=this,i=y;return i=r.$to_native_element($),i.style[t]=e}),b(E,"$set_html",function($,t){var e=this,r=y;return r=e.$to_native_element($),r.innerHTML=t}),b(E,"$set_text",function($,t){var e=this,r=y;return r=e.$to_native_element($),r.textContent=t}),b(E,"$get_value",function($){var t=this,e=y;return e=t.$to_native_element($),e.value}),b(E,"$set_value",function($,t){var e=this,r=y;return r=e.$to_native_element($),r.value=t}),b(E,"$focus",function($){var t=this,e=y;return e=t.$to_native_element($),e.focus()}),b(E,"$has_attr?",function($,t){var e=this,r=y;return r=e.$to_native_element($),r.hasAttribute(t)}),b(E,"$create_element",function($){return document.createElement($)}),b(E,"$append_child",function($,t){var e=this,r=y,i=y;return r=e.$to_native_element($),i=e.$to_native_element(t),r.appendChild(i)}),b(E,"$remove_element",function($){var t=this,e=y;return e=t.$to_native_element($),e.remove()}),b(E,"$next_sibling",function($){var t=this,e=y;return e=t.$to_native_element($),e.nextElementSibling}),b(E,"$prev_sibling",function($){var t=this,e=y;return e=t.$to_native_element($),e.previousElementSibling}),b(E,"$parent",function($){var t=this,e=y;return e=t.$to_native_element($),e.parentElement}),b(E,"$query",function($){var t=this,e=y;return e=document.querySelector($),P(e===null)?y:t.$Native(e)}),b(E,"$query_all",function($){var t=this,e=y;return e=Array.from(document.querySelectorAll($)),O(t.$Native(e).$to_a(),"map",[],function r(i){var a=r.$$s==null?this:r.$$s;return i==null&&(i=y),a.$Native(i)},{$$s:t})}),b(E,"$query_element",function($){var t=this,e=y;return e=this.element.querySelector($),P(e===null)?y:t.$Native(e)}),b(E,"$query_all_element",function($){var t=this,e=y;return e=Array.from(this.element.querySelectorAll($)),O(t.$Native(e).$to_a(),"map",[],function r(i){var a=r.$$s==null?this:r.$$s;return i==null&&(i=y),a.$Native(i)},{$$s:t})}),b(E,"$doc_root",function(){return document.documentElement}),b(E,"$set_root_attr",function($,t){return document.documentElement.setAttribute($,t)}),b(E,"$get_root_attr",function($){return document.documentElement.getAttribute($)}),b(E,"$clone_template",function($){var t=this,e=y;return e=""+t.$camelize($,!1)+"Target",this[e].content.cloneNode(!0)}),b(E,"$template_first_child",function($){return $.firstElementChild}),b(E,"$element_add_class",function($){return this.element.classList.add($)}),b(E,"$element_remove_class",function($){return this.element.classList.remove($)}),b(E,"$element_toggle_class",function($){return this.element.classList.toggle($)}),b(E,"$generate_id",function(){var $=this;return $.$js_timestamp()}),b(E,"$target_focus",function($){var t=this,e=y;return P(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].focus()):y}),b(E,"$target_blur",function($){var t=this,e=y;return P(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].blur()):y}),b(E,"$parse_int",function($,t){return t==null&&(t=10),parseInt($,t)},-2),b(E,"$parse_float",function($){return parseFloat($)}),b(E,"$is_nan?",function($){return Number.isNaN($)}),b(E,"$parse_int_or",function($,t){var e=this,r=y;return t==null&&(t=0),r=e.$parse_int($),P(e["$is_nan?"](r))?t:r},-2),b(E,"$parse_float_or",function($,t){var e=this,r=y;return t==null&&(t=0),r=e.$parse_float($),P(e["$is_nan?"](r))?t:r},-2),b(E,"$js_prop",function($){return this[$.$to_s()]}),b(E,"$js_set_prop",function($,t){return this[$.$to_s()]=t}),b(E,"$js_has_prop?",function($){return!!this[$.$to_s()]}),b(E,"$js_call",function($,t){var e,r,i=y;return e=V(arguments,1),r=e,P(r["$empty?"]())?this[$.$to_s()]():(i=O(r,"map",[],function(o){return o==null&&(o=y),P(o["$respond_to?"]("to_n"))?o.$to_n():o}),this[$.$to_s()].apply(this,i))},-2),b(E,"$js_call_on",function($,t,e){var r,i,a=y;return r=V(arguments,2),i=r,P(i["$empty?"]())?$[t.$to_s()]():(a=O(i,"map",[],function(v){return v==null&&(v=y),P(v["$respond_to?"]("to_n"))?v.$to_n():v}),$[t.$to_s()].apply($,a))},-3),b(E,"$js_get",function($,t){return $[t.$to_s()]}),b(E,"$js_set",function($,t,e){return $[t.$to_s()]=e}),b(E,"$json_parse",function($){return JSON.parse($)}),b(E,"$json_stringify",function($){var t=y;return t=P($["$respond_to?"]("to_n"))?$.$to_n():$,JSON.stringify(t)}),b(E,"$console_log",function($){var t,e;return t=V(arguments),e=t,console.log.apply(console,e)},-1),b(E,"$console_warn",function($){var t,e;return t=V(arguments),e=t,console.warn.apply(console,e)},-1),b(E,"$console_error",function($){var t,e;return t=V(arguments),e=t,console.error.apply(console,e)},-1),b(E,"$js_string_char_at",function($,t){return $.charAt(t)}),b(E,"$js_substring",function($,t,e){return e==null&&(e=y),P(e)?$.substring(t,e):$.substring(t)},-3),b(E,"$js_split",function($,t){return $.split(t)}),b(E,"$js_trim",function($){return $.trim()}),b(E,"$js_includes?",function($,t){return $.includes(t)}),b(E,"$js_equals?",function($,t){return $===t}),b(E,"$js_loose_equals?",function($,t){return $==t}),b(E,"$js_random",function(){return Math.random()}),b(E,"$js_min",function($,t){return Math.min($,t)}),b(E,"$js_max",function($,t){return Math.max($,t)}),b(E,"$js_abs",function($){return Math.abs($)}),b(E,"$js_round",function($){return Math.round($)}),b(E,"$js_ceil",function($){return Math.ceil($)}),b(E,"$js_to_fixed",function($,t){return $.toFixed(t)}),b(E,"$random_int",function($){return Math.floor(Math.random()*$)}),b(E,"$js_floor",function($){return Math.floor($)}),b(E,"$js_global_exists?",function($){return typeof window[$]<"u"}),b(E,"$js_global",function($){return window[$]}),b(E,"$js_new",function($,t){var e,r,i=y;return e=V(arguments,1),r=e,P(r["$empty?"]())?new $:(i=O(r,"map",[],function(o){return o==null&&(o=y),o!=null&&typeof o.$to_n=="function"?o.$to_n():o}),Reflect.construct($,i))},-2),b(E,"$js_define_method",function s($){var t=s.$$p||y;return s.$$p=null,this[$.$to_s()]=t}),b(E,"$js_define_method_on",function s($,t){var e=s.$$p||y;return s.$$p=null,$[t.$to_s()]=e}),b(E,"$js_length",function($){return $.length}),b(E,"$js_map",function s($){var t=s.$$p||y;return s.$$p=null,$.map(t)}),b(E,"$js_filter",function s($){var t=s.$$p||y;return s.$$p=null,$.filter(t)}),b(E,"$js_reduce",function s($,t){var e=s.$$p||y;return s.$$p=null,$.reduce(e,t)}),b(E,"$js_each",function s($){var t=s.$$p||y;return s.$$p=null,$.forEach(t)}),b(E,"$js_slice",function($,t,e){return e==null&&(e=y),P(e)?$.slice(t,e):$.slice(t)},-3),b(E,"$js_object",function(){return{}}),b(E,"$js_keys",function($){return Object.keys($)}),b(E,"$js_values",function($){return Object.values($)}),b(E,"$js_entries",function($){return Object.entries($)}),b(E,"$js_unique_count",function($){return new Set($).size}),b(E,"$js_fetch",function($){return fetch($)}),b(E,"$fetch_json",function s($){var t=s.$$p||y;s.$$p=null,fetch($).then(e=>e.json()).then(e=>t.$call(e)).catch(e=>console.error("Fetch error:",e))}),b(E,"$fetch_json_promise",function($){return fetch($).then(t=>t.json())}),b(E,"$fetch_json_safe",function($){return fetch($).then(function(t){if(!t.ok)throw new Error("Network response was not ok: "+t.status);return t.json()})}),b(E,"$fetch_all_json",function($){var t=this,e=y;return e=O($,"map",[],function r(i){var a=r.$$s==null?this:r.$$s;return i==null&&(i=y),a.$fetch_json_promise(i)},{$$s:t}),Promise.all(e)}),b(E,"$fetch_json_with_handlers",function($,t){var e,r,i=this,a=y;return t=C(t),e=Z(t,"on_success"),r=p(t,"on_error"),r==null&&(r=y),a=i.$fetch_json_safe($),a=O(i,"js_then",[a],function(v){return v==null&&(v=y),e.$call(v)}),P(r)?O(i,"js_catch",[a],function(v){return v==null&&(v=y),r.$call(v)}):O(i,"js_catch",[a],function o(v){var S=o.$$s==null?this:o.$$s;return v==null&&(v=y),S.$console_error("Fetch error:",v)},{$$s:i})}),b(E,"$promise_all",function($){return Promise.all($)}),b(E,"$promise_race",function($){return Promise.race($)}),b(E,"$promise_resolve",function($){var t=y;return t=P($["$respond_to?"]("to_n"))?$.$to_n():$,Promise.resolve(t)}),b(E,"$promise_reject",function($){return Promise.reject($)}),b(E,"$js_then",function s($){var t=s.$$p||y;return s.$$p=null,$.then(t)}),b(E,"$js_catch",function s($){var t=s.$$p||y;return s.$$p=null,$.catch(t)}),b(E,"$js_finally",function s($){var t=s.$$p||y;return s.$$p=null,$.finally(t)}),b(E,"$stimulus_value",function($){var t=this,e=y;return e=""+t.$camelize($,!1)+"Value",this[e]}),b(E,"$set_stimulus_value",function($,t){var e=this,r=y,i=y;return r=""+e.$camelize($,!1)+"Value",i=P(t["$respond_to?"]("to_n"))?t.$to_n():t,this[r]=i}),b(E,"$has_stimulus_value?",function($){var t=this,e=y;return e="has"+t.$camelize($)+"Value",this[e]}),b(E,"$increment_stimulus_value",function($,t){var e=this;return t==null&&(t=1),e.$set_stimulus_value($,H(e.$stimulus_value($),t))},-2),b(E,"$decrement_stimulus_value",function($,t){var e=this;return t==null&&(t=1),e.$set_stimulus_value($,ie(e.$stimulus_value($),t))},-2),b(E,"$toggle_stimulus_value",function($){var t=this;return t.$set_stimulus_value($,t.$stimulus_value($)["$!"]())}),b(E,"$get_class",function($){var t=this,e=y;return e=""+t.$camelize($,!1)+"Class",this[e]}),b(E,"$get_classes",function($){var t=this,e=y;return e=""+t.$camelize($,!1)+"Classes",Array.from(this[e]||[])}),b(E,"$has_class_definition?",function($){var t=this,e=y;return e="has"+t.$camelize($)+"Class",this[e]}),b(E,"$apply_class",function($,t){var e=this,r=y,i=y;return r=e.$to_native_element($),i=e.$get_class(t),P(i)?r.classList.add(i):y}),b(E,"$apply_classes",function($,t){var e=this,r=y,i=y;return r=e.$to_native_element($),i=e.$get_classes(t),P(i)?r.classList.add(...i):y}),b(E,"$remove_applied_class",function($,t){var e=this,r=y,i=y;return r=e.$to_native_element($),i=e.$get_class(t),P(i)?r.classList.remove(i):y}),b(E,"$remove_applied_classes",function($,t){var e=this,r=y,i=y;return r=e.$to_native_element($),i=e.$get_classes(t),P(i)?r.classList.remove(...i):y}),b(E,"$has_outlet?",function($){var t=this,e=y;return e="has"+t.$camelize($)+"Outlet",this[e]}),b(E,"$get_outlet",function($){var t=this,e=y;return e=""+t.$camelize($,!1)+"Outlet",this[e]}),b(E,"$get_outlets",function($){var t=this,e=y;return e=""+t.$camelize($,!1)+"Outlets",Array.from(this[e]||[])}),b(E,"$get_outlet_element",function($){var t=this,e=y;return e=""+t.$camelize($,!1)+"OutletElement",this[e]}),b(E,"$get_outlet_elements",function($){var t=this,e=y;return e=""+t.$camelize($,!1)+"OutletElements",Array.from(this[e]||[])}),b(E,"$call_outlet",function($,t,e){var r,i,a=this,o=y;return r=V(arguments,2),i=r,P(a["$has_outlet?"]($))?(o=a.$get_outlet($),O(a,"js_call_on",[o,t].concat(L(i)))):y},-3),b(E,"$call_all_outlets",function($,t,e){var r,i,a=this;return r=V(arguments,2),i=r,O(a.$get_outlets($),"each",[],function o(v){var S=o.$$s==null?this:o.$$s;return v==null&&(v=y),O(S,"js_call_on",[v,t].concat(L(i)))},{$$s:a})},-3),b(E,"$stimulus_dispatch",function($,t){var e,r,i,a,o,v=y,S=y;return t=C(t),e=p(t,"detail"),e==null&&(e=new Map),r=p(t,"target"),r==null&&(r=y),i=p(t,"prefix"),i==null&&(i=y),a=p(t,"bubbles"),a==null&&(a=!0),o=p(t,"cancelable"),o==null&&(o=!0),v=P(e["$respond_to?"]("to_n"))?e.$to_n():e,S={detail:v,bubbles:a,cancelable:o},P(r["$nil?"]())||(S.target=r),P(i["$nil?"]())||(S.prefix=i),this.dispatch($,S)},-2),b(E,"$stimulus_dispatch_confirm",function($,t){var e,r=this,i=y;return t=C(t),e=p(t,"detail"),e==null&&(e=new Map),i=r.$stimulus_dispatch($,new Map([["detail",e],["cancelable",!0]])),!i.defaultPrevented},-2),b(E,"$action_params",function(){return event.params||{}}),b(E,"$action_param",function($){return(event.params||{})[$.$to_s()]}),b(E,"$action_param_int",function($,t){var e=this,r=y,i=y;return t==null&&(t=0),r=e.$action_param($),i=e.$parse_int(r),P(e["$is_nan?"](i))?t:i},-2),b(E,"$action_param_bool",function($){var t=this,e=y;return e=t.$action_param($),!!e&&e!=="false"&&e!=="0"}),b(E,"$has_action_param?",function($){return(event.params||{}).hasOwnProperty($.$to_s())}),b(E,"$this_application",function(){return this.application}),b(E,"$this_identifier",function(){return this.identifier}),b(E,"$this_element",function(){return this.element}),b(E,"$get_controller",function($,t){var e=this,r=y;return r=e.$to_native_element($),this.application.getControllerForElementAndIdentifier(r,t)}),b(E,"$get_controllers",function($,t){var e=this,r=y;r=e.$to_native_element($),Array.from(r.querySelectorAll('[data-controller~="'+t+'"]')).map(i=>this.application.getControllerForElementAndIdentifier(i,t)).filter(i=>i!==null)}),b(E,"$this_scope",function(){return this.scope.element}),b(E,"$in_scope?",function($){var t=this,e=y;return e=t.$to_native_element($),this.element.contains(e)}),b(E,"$debounce",function s($){var t=s.$$p||y;s.$$p=null;var e;return function(...r){clearTimeout(e),e=setTimeout(()=>t.$call(),$)}}),b(E,"$throttle",function s($){var t=s.$$p||y;s.$$p=null;var e=0;return function(...r){var i=Date.now();i-e>=$&&(e=i,t.$call())}}),b(E,"$debounced",function s($,t){var e=s.$$p||y,r,i=this,a=y,o=y;return i._debounce_timers==null&&(i._debounce_timers=y),s.$$p=null,t==null&&(t="default"),i._debounce_timers=P(a=i._debounce_timers)?a:new Map,o="_debounce_"+t,clearTimeout(i._debounce_timers["$[]"](o)),r=[o,setTimeout(function(){e.$call()},$)],O(i._debounce_timers,"[]=",r),r[r.length-1]},-2),b(E,"$throttled",function s($,t){var e=s.$$p||y,r=this,i=y,a=y,o=y,v=y;return r._throttle_times==null&&(r._throttle_times=y),s.$$p=null,t==null&&(t="default"),r._throttle_times=P(i=r._throttle_times)?i:new Map,a="_throttle_"+t,o=Date.now(),v=P(i=r._throttle_times["$[]"](a))?i:0,P(o-v>=$)?(r._throttle_times["$[]="](a,o),e.$call()):y},-2),b(E,"$copy_to_clipboard",function s($){var t=s.$$p||y;s.$$p=null,navigator.clipboard.writeText($).then(function(){P(t)&&t.$call()})}),b(E,"$read_from_clipboard",function s(){var $=s.$$p||y;s.$$p=null,navigator.clipboard.readText().then(function(t){$.$call(t)})}),b(E,"$deep_clone",function($){return JSON.parse(JSON.stringify($.$to_n()))}),b(E,"$deep_merge",function($,t){function e(r,i){var a=Object.assign({},r);for(var o in i)i.hasOwnProperty(o)&&(i[o]&&typeof i[o]=="object"&&!Array.isArray(i[o])?a[o]=e(a[o]||{},i[o]):a[o]=i[o]);return a}return e($.$to_n(),t.$to_n())}),b(E,"$pick",function($,t){var e,r,i=y;return e=V(arguments,1),r=e,i=new Map,O(r.$flatten(),"each",[],function(o){var v,S=y,F=y;return o==null&&(o=y),S=o.$to_s(),F=$.$to_n(),P(F.hasOwnProperty(S))?(v=[S,F[S]],O(i,"[]=",v),v[v.length-1]):y}),i},-2),b(E,"$omit",function($,t){var e,r,i,a=y,o=y,v=y;return e=V(arguments,1),r=e,a=O(r.$flatten(),"map",[],"to_s".$to_proc()),o=new Map,v=$.$to_n(),Object.keys(v).forEach(function(S){a.includes(S)||(i=[S,v[S]],O(o,"[]=",i),i[i.length-1])}),o},-2),b(E,"$unique",function($){return[...new Set($.$to_n())]}),b(E,"$intersection",function($,t){var e=y;return e=new Set(t.$to_n()),$.$to_n().filter(r=>e.has(r))}),b(E,"$difference",function($,t){var e=y;return e=new Set(t.$to_n()),$.$to_n().filter(r=>!e.has(r))}),b(E,"$union",function($,t){return[...new Set([...$.$to_n(),...t.$to_n()])]}),b(E,"$valid_email?",function($){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($)}),b(E,"$valid_url?",function($){try{return new URL($),!0}catch{return!1}}),b(E,"$valid_phone?",function($){var t=y;t=$.replace(/[\s\-\(\)\.]/g,"");var e=/^[\+]?[0-9]{10,15}$/;return e.test(t)}),b(E,"$blank?",function($){return P($["$nil?"]())?!0:P(typeof $=="string")?$.trim()==="":P(Array.isArray($))?$.length===0:!1}),b(E,"$present?",function($){var t=this;return t["$blank?"]($)["$!"]()}),b(E,"$min_length?",function($,t){return P($["$nil?"]())?!1:$.length>=t}),b(E,"$max_length?",function($,t){return P($["$nil?"]())?!1:$.length<=t}),b(E,"$matches_pattern?",function($,t){return P($["$nil?"]())?!1:new RegExp(t).test($)}),b(E,"$console_styled",function($,t){return t==null&&(t="color: blue; font-weight: bold;"),console.log("%c"+$,t)},-2),b(E,"$console_group",function s($,t){var e=s.$$p||y,r;return s.$$p=null,t=C(t),r=p(t,"collapsed"),r==null&&(r=!1),P(r)?console.groupCollapsed($):console.group($),e.$call(),console.groupEnd()},-2),b(E,"$console_table",function($){return console.table($.$to_n())}),b(E,"$console_time",function($){var t=y;return t=new Date().toISOString(),console.log("["+t+"] "+$)}),E.$private(),b(E,"$camelize",function($,t){var e=y,r=y;return t==null&&(t=!0),e=$.$to_s(),P(e["$include?"]("_"))?(r=e.$split("_"),P(t)?O(r,"map",[],"capitalize".$to_proc()).$join():H([r.$first()],O(r["$[]"](Y(1,-1,!1)),"map",[],"capitalize".$to_proc())).$join()):P(t)?H(e["$[]"](0).$upcase(),e["$[]"](Y(1,-1,!1)).$to_s()):H(e["$[]"](0).$downcase(),e["$[]"](Y(1,-1,!1)).$to_s())},-2)}(h[0],h)}(m[0],m)}(g[0],g)}(W[0],W),te(W[0],"StimulusHelpers",K(K(K(z("OpalVite"),"Concerns"),"V1"),"StimulusHelpers"))};Opal.modules["opal_vite/concerns/v1/js_proxy_ex"]=function(n){var k=n.module,b=n.truthy,P=n.def,I=n.send,O=n.klass,V=n.assign_ivar,C=n.return_ivar,Z=n.slice,p=n.range,H=n.eqeq,ie=n.lambda,L=n.to_a,Y=n.eqeqeq,te=n.rb_plus,W=n.defs,z=n.const_set,y=[],K=n.$r(y),B=n.nil,j=n.$$$;return n.add_stubs("new,to_n,nil?,respond_to?,times,<<,to_s,snake_to_camel,wrap_result,end_with?,[],!,==,call,map,===,length,enum_for,private,upcase,split,+,join,to_proc,test,js_array_to_ruby"),function(R,g){var q=k(R,"OpalVite"),M=[q].concat(g);return function(x,m){var u=k(x,"Concerns"),d=[u].concat(m);return function(A,h){var _=k(A,"V1"),l=[_].concat(h);return function(E,G){var c=k(E,"JsProxyEx"),s=[c].concat(G),$=n.$r(s);return P(c,"$local_storage",function(){var e=this,r=B;return e.local_storage==null&&(e.local_storage=B),e.local_storage=b(r=e.local_storage)?r:$("JsObject").$new(localStorage)}),P(c,"$session_storage",function(){var e=this,r=B;return e.session_storage==null&&(e.session_storage=B),e.session_storage=b(r=e.session_storage)?r:$("JsObject").$new(sessionStorage)}),P(c,"$js_json",function(){var e=this,r=B;return e.js_json==null&&(e.js_json=B),e.js_json=b(r=e.js_json)?r:$("JsonWrapper").$new()}),P(c,"$js_date",function(){return $("DateWrapper")}),P(c,"$js_console",function(){var e=this,r=B;return e.js_console==null&&(e.js_console=B),e.js_console=b(r=e.js_console)?r:$("JsObject").$new(console)}),P(c,"$new_event",function(e,r){return r==null&&(r=new Map),$("JsObject").$new(new Event(e,r.$to_n()))},-2),P(c,"$new_custom_event",function(e,r){return r==null&&(r=new Map),$("JsObject").$new(new CustomEvent(e,{detail:r.$to_n()}))},-2),P(c,"$new_url",function(e){return $("JsObject").$new(new URL(e))}),P(c,"$new_regexp",function(e,r){return r==null&&(r=""),$("RegExpWrapper").$new(e,r)},-2),P(c,"$new_date",function(e){return e==null&&(e=B),b(e)?$("JsObject").$new(new Date(e)):$("JsObject").$new(new Date)},-1),P(c,"$date_now",function(){return Date.now()}),P(c,"$wrap_js",function(e){var r=B;return b(e["$nil?"]())?B:(r=b(e["$respond_to?"]("to_n"))?e.$to_n():e,$("JsObject").$new(r))}),P(c,"$js_array_to_ruby",function(e){var r=B,i=B;return r=[],i=e.length,I(i,"times",[],function(o){var v=B;return o==null&&(o=B),v=e[o],r["$<<"]($("JsObject").$new(v))}),r}),P(c,"$new_js_array",function(){return $("JsObject").$new([])}),function(t,e,r){var i=O(t,e,"JsObject"),a=[i].concat(r),o=n.$r(a),v=i.$$prototype;return v.native=B,P(i,"$initialize",V("native")),P(i,"$to_n",C("native")),P(i,"$[]",function(F){var T=this,J=B,ee=B,ae=B;return J=F.$to_s(),ee=T.$snake_to_camel(J),ae=T.native[ee],T.$wrap_result(ae)}),P(i,"$[]=",function(F,T){var J=this,ee=B,ae=B,le=B;return ee=F.$to_s(),ae=J.$snake_to_camel(ee),le=b(T["$respond_to?"]("to_n"))?T.$to_n():T,J.native[ae]=le}),P(i,"$method_missing",function S(F,T){var J=S.$$p||B,ee,ae,le=this,ce=B,de=B,he=B,ve=B,me=B,be=B,$e=B,N=B,D=B,X=B;return S.$$p=null,ee=Z(arguments,1),ae=ee,ce=F.$to_s(),b(ce["$end_with?"]("="))?(de=ce["$[]"](p(0,-2,!1)),he=le.$snake_to_camel(de),ve=ae["$[]"](0),me=b(ve["$respond_to?"]("to_n"))?ve.$to_n():ve,le.native[he]=me,ve):b(ce["$end_with?"]("?"))?(de=ce["$[]"](p(0,-2,!1)),he=le.$snake_to_camel(de),le.native[he]["$!"]()["$!"]()):(he=le.$snake_to_camel(ce),be=typeof le.native[he]=="function",b(be)?H(he,"addEventListener")&&b(J)?($e=ie(function(ne){return ne==null&&(ne=B),J.$call(o("JsObject").$new(ne))}),le.native.addEventListener(ae["$[]"](0),$e),B):(N=I(ae,"map",[],function(ne){return ne==null&&(ne=B),b(ne["$respond_to?"]("to_n"))?ne.$to_n():ne}),b(J)&&($e=ie(function Q(ne){var se,oe,fe=Q.$$s==null?this:Q.$$s,f=B;return se=Z(arguments),oe=se,f=I(oe,"map",[],function w(U){var re=w.$$s==null?this:w.$$s;return U==null&&(U=B),re.$wrap_result(U)},{$$s:fe}),I(J,"call",L(f))},{$$arity:-1,$$s:le}),N["$<<"]($e)),D=Y(0,X=N.$length())?le.native[he]():Y(1,X)?le.native[he](N["$[]"](0)):Y(2,X)?le.native[he](N["$[]"](0),N["$[]"](1)):Y(3,X)?le.native[he](N["$[]"](0),N["$[]"](1),N["$[]"](2)):le.native[he].apply(le.native,N),le.$wrap_result(D)):(D=le.native[he],le.$wrap_result(D)))},-2),P(i,"$respond_to_missing?",function(F,T){return!0},-2),P(i,"$each",function S(){var F=S.$$p||B,T=this,J=B;return S.$$p=null,b(F)?(J=T.native.length,b(J)&&I(J,"times",[],function ee(ae){var le=ee.$$s==null?this:ee.$$s,ce=B;return le.native==null&&(le.native=B),ae==null&&(ae=B),ce=le.native[ae],F.$call(le.$wrap_result(ce))},{$$s:T}),T):T.$enum_for("each")}),P(i,"$length",function(){var F=this;return F.native.length}),P(i,"$size",function(){var F=this;return F.$length()}),P(i,"$nil?",function(){var F=this;return F.native==null}),P(i,"$exists?",function(){var F=this;return F["$nil?"]()["$!"]()}),P(i,"$to_s",function(){var F=this;return String(F.native)}),P(i,"$inspect",function(){var F=this;return"#<JsObject: "+F.$to_s()+">"}),i.$private(),P(i,"$snake_to_camel",function(F){var T=B;return H(F,F.$upcase())||(T=F.$split("_"),H(T.$length(),1))?F:te(T["$[]"](0),I(T["$[]"](p(1,-1,!1)),"map",[],"capitalize".$to_proc()).$join())}),P(i,"$wrap_result",function(F){return b(F==null)?B:b(typeof F=="number")||b(typeof F=="string")||b(typeof F=="boolean")?F:o("JsObject").$new(F)})}(s[0],null,s),function(t,e,r){var i=O(t,e,"JsonWrapper"),a=[i].concat(r),o=n.$r(a);return P(i,"$parse",function(S){var F=B;return F=JSON.parse(S),o("JsObject").$new(F)}),P(i,"$stringify",function(S){var F=B;return F=b(S["$respond_to?"]("to_n"))?S.$to_n():S,JSON.stringify(F)})}(s[0],null,s),function(t,e,r){var i=O(t,e,"RegExpWrapper"),a=[i].concat(r),o=n.$r(a),v=i.$$prototype;return v.native=B,P(i,"$initialize",function(F,T){var J=this;return T==null&&(T=""),J.native=new RegExp(F,T)},-2),P(i,"$to_n",C("native")),P(i,"$test",function(F){var T=this;return T.native.test(F)}),P(i,"$match",function(F){var T=this,J=B;return J=F.match(T.native),b(J===null)?B:o("JsObject").$new(J)}),P(i,"$=~",function(F){var T=this;return T.$test(F)})}(s[0],null,s),function(t,e){var r=k(t,"DateWrapper"),i=[r].concat(e),a=n.$r(i);return W(r,"$now",function(){return Date.now()}),W(r,"$new",function(v){return v==null&&(v=B),b(v)?a("JsObject").$new(new Date(v)):a("JsObject").$new(new Date)},-1),W(r,"$parse",function(v){return Date.parse(v)})}(s[0],s),P(c,"$has_target?",function(e){var r=this,i=B,a=B;return i=r.$snake_to_camel(e.$to_s()),a="has"+i["$[]"](0).$upcase()+i["$[]"](p(1,-1,!1))+"Target",this[a]}),P(c,"$target",function(e){var r=this,i=B,a=B,o=B;return i=r.$snake_to_camel(e.$to_s()),a=""+i+"Target",o=this[a],$("JsObject").$new(o)}),P(c,"$targets",function(e){var r=this,i=B,a=B,o=B;return i=r.$snake_to_camel(e.$to_s()),a=""+i+"Targets",o=this[a],r.$js_array_to_ruby(o)}),P(c,"$set_target_text",function(e,r){var i=this,a=B,o=B,v=B;a=i.$snake_to_camel(e.$to_s()),o="has"+a["$[]"](0).$upcase()+a["$[]"](p(1,-1,!1))+"Target",v=""+a+"Target",this[o]&&(this[v].textContent=r)}),P(c,"$set_target_class",function(e,r){var i=this,a=B,o=B,v=B;a=i.$snake_to_camel(e.$to_s()),o="has"+a["$[]"](0).$upcase()+a["$[]"](p(1,-1,!1))+"Target",v=""+a+"Target",this[o]&&(this[v].className=r)}),P(c,"$set_target_disabled",function(e,r){var i=this,a=B,o=B,v=B;a=i.$snake_to_camel(e.$to_s()),o="has"+a["$[]"](0).$upcase()+a["$[]"](p(1,-1,!1))+"Target",v=""+a+"Target",this[o]&&(this[v].disabled=r)}),c.$private(),P(c,"$snake_to_camel",function(e){var r=B;return H(e,e.$upcase())||(r=e.$to_s().$split("_"),H(r.$length(),1))?e:te(r["$[]"](0),I(r["$[]"](p(1,-1,!1)),"map",[],"capitalize".$to_proc()).$join())})}(l[0],l)}(d[0],d)}(M[0],M)}(y[0],y),z(y[0],"JsProxyEx",j(j(j(K("OpalVite"),"Concerns"),"V1"),"JsProxyEx"))};Opal.modules["opal_vite/concerns/v1/toastable"]=function(n){var k=n.module,b=n.def,P=n.const_set,I=[],O=n.$r(I);n.nil;var V=n.$$$;return n.add_stubs("dispatch_toast"),function(C,Z){var p=k(C,"OpalVite"),H=[p].concat(Z);return function(ie,L){var Y=k(ie,"Concerns"),te=[Y].concat(L);return function(W,z){var y=k(W,"V1"),K=[y].concat(z);return function(B){var j=k(B,"Toastable");return b(j,"$dispatch_toast",function(g,q){q==null&&(q="info");const M=new CustomEvent("show-toast",{detail:{message:g,type:q}});window.dispatchEvent(M)},-2),b(j,"$show_success",function(g){var q=this;return q.$dispatch_toast(g,"success")}),b(j,"$show_error",function(g){var q=this;return q.$dispatch_toast(g,"error")}),b(j,"$show_warning",function(g){var q=this;return q.$dispatch_toast(g,"warning")}),b(j,"$show_info",function(g){var q=this;return q.$dispatch_toast(g,"info")})}(K[0])}(te[0],te)}(H[0],H)}(I[0],I),P(I[0],"Toastable",V(V(V(O("OpalVite"),"Concerns"),"V1"),"Toastable"))};Opal.modules["opal_vite/concerns/v1/dom_helpers"]=function(n){var k=n.module,b=n.truthy,P=n.def,I=n.send,O=n.const_set,V=[],C=n.$r(V),Z=n.nil,p=n.$$$;return n.add_stubs("window,to_n,query_selector,element,nil?,query_selector_all,map,to_a,Native,add,class_list,remove,toggle,contains,set_timeout,!,element_exists?,set_style"),function(H,ie){var L=k(H,"OpalVite"),Y=[L].concat(ie);return function(te,W){var z=k(te,"Concerns"),y=[z].concat(W);return function(K,B){var j=k(K,"V1"),R=[j].concat(B);return function(g){var q=k(g,"DomHelpers");return P(q,"$dispatch_custom_event",function(x,m,u){var d=this,A=Z;m==null&&(m=new Map),u==null&&(u=Z),u=b(A=u)?A:d.$window();const h=new CustomEvent(x,{detail:m.$to_n()});u.$to_n().dispatchEvent(h)},-2),P(q,"$create_event",function(x,m){return m==null&&(m=new Map([["bubbles",!0]])),new Event(x,m.$to_n())},-2),P(q,"$query",function(x){var m=this,u=Z;return u=m.$element().$query_selector(x),b(u["$nil?"]())?Z:u}),P(q,"$query_all",function(x){var m=this,u=Z;return u=m.$element().$query_selector_all(x),I(m.$Native(Array.from(u.$to_n())).$to_a(),"map",[],function d(A){var h=d.$$s==null?this:d.$$s;return A==null&&(A=Z),h.$Native(A)},{$$s:m})}),P(q,"$add_class",function(x,m){return x.$class_list().$add(m)}),P(q,"$remove_class",function(x,m){return x.$class_list().$remove(m)}),P(q,"$toggle_class",function(x,m){return x.$class_list().$toggle(m)}),P(q,"$has_class?",function(x,m){return x.$class_list().$contains(m)}),P(q,"$set_timeout",function M(x){var m=M.$$p||Z,u=this;return M.$$p=null,u.$window().$set_timeout(m,x)}),P(q,"$element_exists?",function(x){var m=Z;return b(m=x["$nil?"]()["$!"]())?x.$to_n():m}),P(q,"$set_style",function(x,m,u){var d=this;return b(d["$element_exists?"](x))?x.$to_n().style[m]=u:Z}),P(q,"$get_style",function(x,m){var u=this;return b(u["$element_exists?"](x))?x.$to_n().style[m]:Z}),P(q,"$show_element",function(x){var m=this;return m.$set_style(x,"display","block")}),P(q,"$hide_element",function(x){var m=this;return m.$set_style(x,"display","none")})}(R[0])}(y[0],y)}(Y[0],Y)}(V[0],V),O(V[0],"DomHelpers",p(p(p(C("OpalVite"),"Concerns"),"V1"),"DomHelpers"))};Opal.modules["opal_vite/concerns/v1/storable"]=function(n){var k=n.module,b=n.truthy,P=n.def,I=n.const_set,O=[],V=n.$r(O),C=n.nil,Z=n.$$$;return n.add_stubs("to_n"),function(p,H){var ie=k(p,"OpalVite"),L=[ie].concat(H);return function(Y,te){var W=k(Y,"Concerns"),z=[W].concat(te);return function(y,K){var B=k(y,"V1"),j=[B].concat(K);return function(R,g){var q=k(R,"Storable"),M=[q].concat(g),x=n.$r(M);return P(q,"$storage_get",function(u){var d=C;if(d=localStorage.getItem(u),!b(d))return C;try{return JSON.parse(d)}catch(A){if(n.rescue(A,[x("StandardError")]))try{return C}finally{n.pop_exception(A)}else throw A}}),P(q,"$storage_set",function(u,d){var A=C;return A=JSON.stringify(d.$to_n()),localStorage.setItem(u,A)}),P(q,"$storage_remove",function(u){return localStorage.removeItem(u)})}(j[0],j)}(z[0],z)}(L[0],L)}(O[0],O),I(O[0],"Storable",Z(Z(Z(V("OpalVite"),"Concerns"),"V1"),"Storable"))};Opal.modules["controllers/pwa_controller"]=function(n){var k=n.klass,b=n.const_set,P=n.send2,I=n.find_super,O=n.def,V=n.truthy,C=n.send,Z=n.rb_plus,p=n.top,H=[],ie=n.$r(H),L=n.nil;return n.add_stubs("require,include,targets=,puts,setup_install_listeners,check_install_status,check_service_worker,load_notes,update_cache_count,js_prop,js_call_on,js_get,js_then,console_log,js_set_prop,has_target?,hide_target,prevent_default,target_value,js_timestamp,js_iso_date,unshift,save_notes,render_notes,target_set_value,event_data_int,reject!,==,[],js_global,update_last_update_time,js_map,private,js_define_method,set_target_style,target_set_text,set_install_status_class,on_window_event,js_call,get_target,js_set,set_sw_status_class,on_element_event,storage_get_json,js_each,<<,each,storage_set_json,empty?,target_set_html,join,map,to_s,+,js_length"),p.$require("opal_stimulus/stimulus_controller"),function(Y,te,W){var z=k(Y,te,"PwaController"),y=[z].concat(W),K=n.$r(y),B=z.$$prototype;return B.notes=L,z.$include(K("StimulusHelpers")),z["$targets="](["installPrompt","swStatus","installStatus","lastUpdate","noteInput","notesList","cacheCount"]),b(y[0],"NOTES_KEY","pwa-notes"),O(z,"$initialize",function j(){var R=j.$$p||L,g=this;return j.$$p=null,P(g,I(g,"initialize",j,!1,!0),"initialize",[],R),g.notes=[]}),O(z,"$connect",function(){var R=this;return R.$puts("PwaController connected!"),R.$setup_install_listeners(),R.$check_install_status(),R.$check_service_worker(),R.$load_notes(),R.$update_cache_count()}),O(z,"$install",function(){var R=this,g=L,q=L;return g=R.$js_prop("deferredPrompt"),V(g)?(R.$js_call_on(g,"prompt"),q=R.$js_get(g,"userChoice"),C(R,"js_then",[q],function M(x){var m=M.$$s==null?this:M.$$s,u=L;return x==null&&(x=L),u=m.$js_get(x,"outcome"),V(u==="accepted")?m.$console_log("User accepted the install prompt"):m.$console_log("User dismissed the install prompt")},{$$s:R}),R.$js_set_prop("deferredPrompt",L),V(R["$has_target?"]("installPrompt"))?R.$hide_target("installPrompt"):L):(alert("Installation prompt not available. Try using browser menu to install."),L)}),O(z,"$dismiss_install_prompt",function(){var R=this;return V(R["$has_target?"]("installPrompt"))?R.$hide_target("installPrompt"):L}),O(z,"$add_note",function(R){var g=this,q=L,M=L;return R.$prevent_default(),!V(g["$has_target?"]("noteInput"))||(q=g.$target_value("noteInput"),q=q.trim(),V(q===""))?L:(M=new Map([["id",g.$js_timestamp()],["text",q],["createdAt",g.$js_iso_date()],["synced",navigator.onLine]]),g.notes.$unshift(M),g.$save_notes(),g.$render_notes(),g.$target_set_value("noteInput",""))}),O(z,"$delete_note",function(R){var g=this,q=L;return q=g.$event_data_int("note-id"),C(g.notes,"reject!",[],function(x){return x==null&&(x=L),x["$[]"]("id")["$=="](q)}),g.$save_notes(),g.$render_notes()}),O(z,"$update_cache",function(){var R=this,g=L,q=L,M=L;return V("serviceWorker"in g)?(g=R.$js_global("navigator"),q=R.$js_get(g,"serviceWorker"),M=R.$js_call_on(q,"getRegistration"),C(R,"js_then",[M],function x(m){var u=x.$$s==null?this:x.$$s,d=L;return m==null&&(m=L),V(m)?(d=u.$js_call_on(m,"update"),C(u,"js_then",[d],function A(){var h=A.$$s==null?this:A.$$s;return h.$update_last_update_time(),alert("Cache updated! Refresh to see changes.")},{$$s:u})):L},{$$s:R})):L}),O(z,"$clear_cache",function(){var R=this,g=L,q=L;return V("caches"in window)?(g=R.$js_global("caches"),q=R.$js_call_on(g,"keys"),C(R,"js_then",[q],function M(x){var m=M.$$s==null?this:M.$$s,u=L,d=L;return x==null&&(x=L),u=C(m,"js_map",[x],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=L),_.$js_call_on(g,"delete",h)},{$$s:m}),d=m.$js_call_on(m.$js_global("Promise"),"all",u),C(m,"js_then",[d],function A(){var h=A.$$s==null?this:A.$$s;return h.$update_cache_count(),alert("Cache cleared! Refresh to rebuild cache.")},{$$s:m})},{$$s:R})):L}),z.$private(),O(z,"$setup_install_listeners",function(){var R=this;return C(R,"js_define_method",["handleBeforeInstallPrompt"],function g(q){var M=g.$$s==null?this:g.$$s;return q==null&&(q=L),q.preventDefault(),M.$js_set_prop("deferredPrompt",q),V(M["$has_target?"]("installPrompt"))?M.$set_target_style("installPrompt","display","block"):L},{$$s:R}),C(R,"js_define_method",["handleAppInstalled"],function g(){var q=g.$$s==null?this:g.$$s;return V(q["$has_target?"]("installPrompt"))&&q.$hide_target("installPrompt"),V(q["$has_target?"]("installStatus"))?(q.$target_set_text("installStatus","Installed "),q.$set_install_status_class("status-value success")):L},{$$s:R}),C(R,"on_window_event",["beforeinstallprompt"],function g(q){var M=g.$$s==null?this:g.$$s;return q==null&&(q=L),M.$js_call("handleBeforeInstallPrompt",q)},{$$s:R}),C(R,"on_window_event",["appinstalled"],function g(){var q=g.$$s==null?this:g.$$s;return q.$js_call("handleAppInstalled")},{$$s:R})}),O(z,"$set_install_status_class",function(R){var g=this,q=L;return V(g["$has_target?"]("installStatus"))?(q=g.$get_target("installStatus"),g.$js_set(q,"className",R)):L}),O(z,"$check_install_status",function(){var R=this,g=L;return g=window.matchMedia("(display-mode: standalone)").matches,V(g)?(R.$target_set_text("installStatus","Installed "),R.$set_install_status_class("status-value success")):(R.$target_set_text("installStatus","Not installed"),R.$set_install_status_class("status-value"))}),O(z,"$check_service_worker",function(){var R=this,g=L,q=L,M=L;return V(R["$has_target?"]("swStatus"))?V("serviceWorker"in g)?(C(R,"js_define_method",["handleSwUpdate"],function x(){var m=x.$$s==null?this:x.$$s;return m.$update_last_update_time()},{$$s:R}),g=R.$js_global("navigator"),q=R.$js_get(g,"serviceWorker"),M=R.$js_call_on(q,"getRegistration"),C(R,"js_then",[M],function x(m){var u=x.$$s==null?this:x.$$s;return m==null&&(m=L),V(m)?(u.$target_set_text("swStatus","Active "),u.$set_sw_status_class("status-value success"),C(u,"on_element_event",[m,"updatefound"],function d(){var A=d.$$s==null?this:d.$$s,h=L;return h=A.$js_get(m,"installing"),C(A,"on_element_event",[h,"statechange"],function _(){var l=_.$$s==null?this:_.$$s,E=L;return E=l.$js_get(h,"state"),V(E==="activated")?l.$js_call("handleSwUpdate"):L},{$$s:A})},{$$s:u})):(u.$target_set_text("swStatus","Not registered"),u.$set_sw_status_class("status-value warning"))},{$$s:R})):(R.$target_set_text("swStatus","Not supported"),R.$set_sw_status_class("status-value error"),L):L}),O(z,"$set_sw_status_class",function(R){var g=this,q=L;return V(g["$has_target?"]("swStatus"))?(q=g.$get_target("swStatus"),g.$js_set(q,"className",R)):L}),O(z,"$load_notes",function(){var R=this,g=L,q=L;if(g=R.$storage_get_json(K("NOTES_KEY")),!V(g))return L;try{return R.notes=[],C(R,"js_each",[g],function M(x){var m=M.$$s==null?this:M.$$s;return m.notes==null&&(m.notes=L),x==null&&(x=L),m.notes["$<<"](new Map([["id",m.$js_get(x,"id")],["text",m.$js_get(x,"text")],["createdAt",m.$js_get(x,"createdAt")],["synced",m.$js_get(x,"synced")]]))},{$$s:R}),R.$render_notes()}catch(M){if(n.rescue(M,[K("StandardError")])){q=M;try{return R.$puts("Error loading notes: "+q)}finally{n.pop_exception(M)}}else throw M}}),O(z,"$save_notes",function(){var R=this,g=L,q=L;try{return g=[],C(R.notes,"each",[],function(x){x==null&&(x=L),g.push({id:x["$[]"]("id"),text:x["$[]"]("text"),createdAt:x["$[]"]("createdAt"),synced:x["$[]"]("synced")})}),R.$storage_set_json(K("NOTES_KEY"),g)}catch(M){if(n.rescue(M,[K("StandardError")])){q=M;try{return R.$puts("Error saving notes: "+q)}finally{n.pop_exception(M)}}else throw M}}),O(z,"$render_notes",function(){var R=this,g=L;return V(R["$has_target?"]("notesList"))?V(R.notes["$empty?"]())?(R.$target_set_html("notesList",'<p class="empty-state">No notes yet. Add one above!</p>'),L):(g=C(R.notes,"map",[],function(M){var x=L,m=L;return M==null&&(M=L),x=new Date(M["$[]"]("createdAt")).toLocaleString(),m=V(M["$[]"]("synced"))?"":"",'<div class="note-item"><div class="note-content">'+('<p class="note-text">'+M["$[]"]("text")+"</p>")+('<small class="note-meta">'+m+" "+x+"</small>")+"</div>"+('<button class="btn-delete" data-action="click->pwa#delete_note" data-note-id="'+M["$[]"]("id")+'"></button>')+"</div>"}).$join(),R.$target_set_html("notesList",g)):L}),O(z,"$update_last_update_time",function(){var R=this;return R.$target_set_text("lastUpdate",new Date().toLocaleTimeString())}),O(z,"$update_cache_count",function(){var R=this,g=L,q=L;return V(R["$has_target?"]("cacheCount"))?V("caches"in window)?(C(R,"js_define_method",["updateCacheCountValue"],function M(x){var m=M.$$s==null?this:M.$$s;return x==null&&(x=L),m.$target_set_text("cacheCount",x.$to_s())},{$$s:R}),g=R.$js_global("caches"),q=R.$js_call_on(g,"keys"),C(R,"js_then",[q],function M(x){var m=M.$$s==null?this:M.$$s,u=L,d=L;return x==null&&(x=L),m.$js_set_prop("totalEntries",0),u=C(m,"js_map",[x],function A(h){var _=A.$$s==null?this:A.$$s,l=L;return h==null&&(h=L),l=_.$js_call_on(g,"open",h),C(_,"js_then",[l],function E(G){var c=E.$$s==null?this:E.$$s,s=L;return G==null&&(G=L),s=c.$js_call_on(G,"keys"),C(c,"js_then",[s],function $(t){var e=$.$$s==null?this:$.$$s,r=L,i=L;return t==null&&(t=L),r=V(i=e.$js_prop("totalEntries"))?i:0,e.$js_set_prop("totalEntries",Z(r,e.$js_length(t)))},{$$s:c})},{$$s:_})},{$$s:m}),d=m.$js_call_on(m.$js_global("Promise"),"all",u),C(m,"js_then",[d],function A(){var h=A.$$s==null?this:A.$$s;return h.$js_call("updateCacheCountValue",h.$js_prop("totalEntries"))},{$$s:m})},{$$s:R})):(R.$target_set_text("cacheCount","N/A"),L):L})}(H[0],ie("StimulusController"),H)};Opal.modules["controllers/offline_detector_controller"]=function(n){var k=n.klass,b=n.def,P=n.send,I=n.truthy,O=n.top,V=[],C=n.$r(V),Z=n.nil;return n.add_stubs("require,include,targets=,update_status,setup_event_listeners,private,js_define_method,on_window_event,js_call,has_target?,get_target,js_get,js_set,target_set_text"),O.$require("opal_stimulus/stimulus_controller"),function(p,H,ie){var L=k(p,H,"OfflineDetectorController"),Y=[L].concat(ie),te=n.$r(Y);return L.$include(te("StimulusHelpers")),L["$targets="](["banner","statusText","onlineStatus"]),b(L,"$connect",function(){var z=this;return z.$update_status(),z.$setup_event_listeners()}),L.$private(),b(L,"$setup_event_listeners",function(){var z=this;return P(z,"js_define_method",["handleOnlineStatus"],function y(){var K=y.$$s==null?this:y.$$s;return K.$update_status()},{$$s:z}),P(z,"on_window_event",["online"],function y(){var K=y.$$s==null?this:y.$$s;return K.$js_call("handleOnlineStatus")},{$$s:z}),P(z,"on_window_event",["offline"],function y(){var K=y.$$s==null?this:y.$$s;return K.$js_call("handleOnlineStatus")},{$$s:z})}),b(L,"$update_status",function(){var z=this,y=Z,K=Z,B=Z,j=Z,R=Z,g=Z,q=Z,M=Z;return y=navigator.onLine,K=I(y)?"online":"offline",I(z["$has_target?"]("banner"))&&(B=z.$get_target("banner"),j=z.$js_get(B,"dataset"),z.$js_set(j,"status",K)),R=I(y)?" You are online":" You are offline",z.$target_set_text("statusText",R),g=I(y)?"Online":"Offline",q=I(y)?"status-value success":"status-value warning",z.$target_set_text("onlineStatus",g),I(z["$has_target?"]("onlineStatus"))?(M=z.$get_target("onlineStatus"),z.$js_set(M,"className",q)):Z})}(V[0],C("StimulusController"),V)};Opal.queue(function(n){var k=n.top,b=[],P=n.$r(b);return n.nil,n.add_stubs("require,puts,register_all!"),k.$require("native"),k.$require("opal_stimulus/stimulus_controller"),k.$require("opal_vite/concerns/v1/stimulus_helpers"),k.$require("opal_vite/concerns/v1/js_proxy_ex"),k.$require("opal_vite/concerns/v1/toastable"),k.$require("opal_vite/concerns/v1/dom_helpers"),k.$require("opal_vite/concerns/v1/storable"),k.$require("controllers/pwa_controller"),k.$require("controllers/offline_detector_controller"),k.$puts("PWA Example - Opal + Stimulus"),k.$puts("Ruby version: "+P("RUBY_VERSION")),P("StimulusController")["$register_all!"](),k.$puts("All controllers registered!")});
