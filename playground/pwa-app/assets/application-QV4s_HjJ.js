Opal.modules.native=function(n){var k=n.hash_put,y=n.module,P=n.defs,I=n.slice,ee=n.truthy,V=n.send,C=n.Kernel,Z=n.extract_kwargs,p=n.ensure_kwargs,B=n.hash_get,ie=n.range,L=n.to_a,Y=n.def,te=n.return_ivar,W=n.alias,z=n.klass,w=n.rb_minus,K=n.return_val,H=n.send2,j=n.find_super,R=n.eqeqeq,g=n.rb_ge,E=n.return_self,M=n.gvars,q=n.top,m=[],u=n.$r(m),d=n.nil,A=n.$$$;return n.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(h,_){var l=y(h,"Native"),x=[l].concat(_),G=n.$r(x);return P(l,"$is_a?",function(a,$){var t=this;try{return a instanceof t.$try_convert($)}catch{return!1}}),P(l,"$try_convert",function(a,$){var t=this;return $==null&&($=d),t["$native?"](a)?a:a["$respond_to?"]("to_n")?a.$to_n():$},-2),P(l,"$convert",function(a){var $=this;if($["$native?"](a))return a;if(a["$respond_to?"]("to_n"))return a.$to_n();$.$raise(G("ArgumentError"),""+a.$inspect()+" isn't native")}),P(l,"$call",function c(a,$,t){var e=c.$$p||d,r,i,s=this;c.$$p=null,r=I(arguments,2),i=r;var o=a[$];if(o instanceof Function){for(var v=new Array(i.length),S=0,F=i.length;S<F;S++){var T=i[S],J=s.$try_convert(T);v[S]=J===d?T:J}return e!==d&&v.push(e),s.$Native(o.apply(a,v))}else return s.$Native(o)},-3),P(l,"$proc",function c(){var a=c.$$p||d,$=this;return c.$$p=null,ee(a)||$.$raise(G("LocalJumpError"),"no block given"),V(C,"proc",[],function t(e){var r,i,s=t.$$s==null?this:t.$$s,o=d;if(r=I(arguments),i=r,V(i,"map!",[],function S(F){var T=S.$$s==null?this:S.$$s;return F==null&&(F=d),T.$Native(F)},{$$s:s}),o=s.$Native(this),this===n.global)return a.apply(s,i);var v=a.$$s;a.$$s=null;try{return a.apply(o,i)}finally{a.$$s=v}},{$$arity:-1,$$s:$})}),function(c,a){var $=y(c,"Helpers"),t=[$].concat(a),e=n.$r(t);return Y($,"$alias_native",function r(i,s,o){var v,S,F,T;r.$$p;var J=this;return r.$$p=null,v=I(arguments,1),S=Z(v),S=p(S),v.length>0&&(F=v.shift()),F==null&&(F=i),T=B(S,"as"),T==null&&(T=d),ee(F["$end_with?"]("="))?V(J,"define_method",[i],function O(ae){var le=O.$$s==null?this:O.$$s;return le.native==null&&(le.native=d),ae==null&&(ae=d),le.native[F["$[]"](ie(0,-2,!1))]=e("Native").$convert(ae),ae},{$$s:J}):ee(T)?V(J,"define_method",[i],function O(ae){var le=O.$$p||d,ce,de,he=O.$$s==null?this:O.$$s,ve=d;return he.native==null&&(he.native=d),O.$$p=null,ce=I(arguments),de=ce,ve=V(e("Native"),"call",[he.native,F].concat(L(de)),le.$to_proc()),ee(ve)?T.$new(ve.$to_n()):d},{$$arity:-1,$$s:J}):V(J,"define_method",[i],function O(ae){var le=O.$$p||d,ce,de,he=O.$$s==null?this:O.$$s;return he.native==null&&(he.native=d),O.$$p=null,ce=I(arguments),de=ce,V(e("Native"),"call",[he.native,F].concat(L(de)),le.$to_proc())},{$$arity:-1,$$s:J})},-2),Y($,"$native_reader",function(i){var s,o,v=this;return s=I(arguments),o=s,V(o,"each",[],function S(F){var T=S.$$s==null?this:S.$$s;return F==null&&(F=d),V(T,"define_method",[F],function J(){var O=J.$$s==null?this:J.$$s;return O.native==null&&(O.native=d),O.$Native(O.native[F])},{$$s:T})},{$$s:v})},-1),Y($,"$native_writer",function(i){var s,o,v=this;return s=I(arguments),o=s,V(o,"each",[],function S(F){var T=S.$$s==null?this:S.$$s;return F==null&&(F=d),V(T,"define_method",[""+F+"="],function J(O){var ae=J.$$s==null?this:J.$$s;return ae.native==null&&(ae.native=d),O==null&&(O=d),ae.$Native(ae.native[F]=O)},{$$s:T})},{$$s:v})},-1),Y($,"$native_accessor",function(i){var s,o,v=this;return s=I(arguments),o=s,V(v,"native_reader",L(o)),V(v,"native_writer",L(o))},-1)}(x[0],x),function(c,a){var $=y(c,"Wrapper"),t=[$].concat(a),e=n.$r(t);return Y($,"$initialize",function(i){var s=this;return ee(C["$native?"](i))||C.$raise(e("ArgumentError"),""+i.$inspect()+" isn't native"),s.native=i}),Y($,"$to_n",te("native")),P($,"$included",function(i){return i.$extend(e("Helpers"))})}(x[0],x),P(l,"$included",function(a){var $=this;return $.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),a.$include(G("Wrapper"))})}(m[0],m),function(h,_){var l=y(h,"Kernel"),x=[l].concat(_),G=n.$r(x);return Y(l,"$native?",function(a){return a==null||!a.$$class}),Y(l,"$Native",function c(a){c.$$p;var $=this;return c.$$p=null,ee(a==null)?d:ee($["$native?"](a))?A(G("Native"),"Object").$new(a):ee(a["$is_a?"](G("Array")))?V(a,"map",[],function t(e){var r=t.$$s==null?this:t.$$s;return e==null&&(e=d),r.$Native(e)},{$$s:$}):ee(a["$is_a?"](G("Proc")))?V($,"proc",[],function t(e){var r=t.$$p||d,i,s,o=t.$$s==null?this:t.$$s;return t.$$p=null,i=I(arguments),s=i,o.$Native(V(a,"call",L(s),r.$to_proc()))},{$$arity:-1,$$s:$}):a}),W(l,"_Array","Array"),Y(l,"$Array",function c(a,$){var t=c.$$p||d,e,r,i=this;return c.$$p=null,e=I(arguments,1),r=e,ee(i["$native?"](a))?V(A(G("Native"),"Array"),"new",[a].concat(L(r)),t.$to_proc()).$to_a():i.$_Array(a)},-2)}(m[0],m),function(h,_){var l=z(h,_,"Object"),x=l.$$prototype;return x.native=d,l.$include(A(A("Native"),"Wrapper")),Y(l,"$==",function(c){var a=this;return a.native===A("Native").$try_convert(c)}),Y(l,"$has_key?",function(c){var a=this;return n.hasOwnProperty.call(a.native,c)}),Y(l,"$each",function G(c){var a,$,t=G.$$p||d,e=this;if(G.$$p=null,a=I(arguments),$=a,t!==d){for(var r in e.native)n.yieldX(t,[r,e.native[r]]);return e}else return V(e,"method_missing",["each"].concat(L($)))},-1),Y(l,"$[]",function(c){var a=this,$=a.native[c];return $ instanceof Function?$:A("Native").$call(a.native,c)}),Y(l,"$[]=",function(c,a){var $=this,t=d;return t=A("Native").$try_convert(a),ee(t===d)?$.native[c]=a:$.native[c]=t}),Y(l,"$merge!",function(c){var a=this;c=A("Native").$convert(c);for(var $ in c)a.native[$]=c[$];return a}),Y(l,"$respond_to?",function(c,a){var $=this;return a==null&&(a=!1),C.$instance_method("respond_to?").$bind($).$call(c,a)},-2),Y(l,"$respond_to_missing?",function(c,a){var $=this;return n.hasOwnProperty.call($.native,c)},-2),Y(l,"$method_missing",function G(c,a){var $=G.$$p||d,t,e,r,i=this;return G.$$p=null,t=I(arguments,1),e=t,c.charAt(c.length-1)==="="?(r=[c.$slice(0,w(c.$length(),1)),e["$[]"](0)],V(i,"[]=",r),r[r.length-1]):V(A("Native"),"call",[i.native,c].concat(L(e)),$.$to_proc())},-2),Y(l,"$nil?",K(!1)),Y(l,"$is_a?",function(c){var a=this;return n.is_a(a,c)}),Y(l,"$instance_of?",function(c){var a=this;return a.$$class===c}),Y(l,"$class",function(){var c=this;return c.$$class}),Y(l,"$to_a",function G(c){var a=G.$$p||d,$=this;return G.$$p=null,c==null&&(c=new Map),V(A(A("Native"),"Array"),"new",[$.native,c],a.$to_proc()).$to_a()},-1),Y(l,"$inspect",function(){var c=this;return"#<Native:"+String(c.native)+">"}),W(l,"include?","has_key?"),W(l,"key?","has_key?"),W(l,"kind_of?","is_a?"),W(l,"member?","has_key?")}(u("Native"),u("BasicObject")),function(h,_,l){var x=z(h,_,"Array"),G=[x].concat(l),c=n.$r(G),a=x.$$prototype;return a.named=a.native=a.get=a.block=a.set=a.length=d,x.$include(A(c("Native"),"Wrapper")),x.$include(c("Enumerable")),Y(x,"$initialize",function $(t,e){var r=$.$$p||d,i=this,s=d;return $.$$p=null,e==null&&(e=new Map),H(i,j(i,"initialize",$,!1,!0),"initialize",[t],null),i.get=ee(s=e["$[]"]("get"))?s:e["$[]"]("access"),i.named=e["$[]"]("named"),i.set=ee(s=e["$[]"]("set"))?s:e["$[]"]("access"),i.length=ee(s=e["$[]"]("length"))?s:"length",i.block=r,ee(i.$length()==null)?i.$raise(c("ArgumentError"),"no length found on the array-like object"):d},-2),Y(x,"$each",function $(){var t=$.$$p||d,e=this;if($.$$p=null,!ee(t))return e.$enum_for("each");for(var r=0,i=e.$length();r<i;r++)n.yield1(t,e["$[]"](r));return e}),Y(x,"$[]",function(t){var e=this,r=d,i=d;return r=R(c("String"),i=t)||R(c("Symbol"),i)?ee(e.named)?e.native[e.named](t):e.native[t]:R(c("Integer"),i)?ee(e.get)?e.native[e.get](t):e.native[t]:d,ee(r)?ee(e.block)?e.block.$call(r):e.$Native(r):d}),Y(x,"$[]=",function(t,e){var r=this;return ee(r.set)?r.native[r.set](t,c("Native").$convert(e)):r.native[t]=c("Native").$convert(e)}),Y(x,"$last",function(t){var e=this,r=d,i=d;if(t==null&&(t=d),ee(t)){for(r=w(e.$length(),1),i=[];ee(g(r,0));)i["$<<"](e["$[]"](r)),r=w(r,1);return i}else return e["$[]"](w(e.$length(),1))},-1),Y(x,"$length",function(){var t=this;return t.native[t.length]}),Y(x,"$inspect",function(){var t=this;return t.$to_a().$inspect()}),W(x,"to_ary","to_a")}(u("Native"),null,m),function(h,_){var l=z(h,_,"Numeric");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(m[0],null),function(h,_){var l=z(h,_,"Proc");return Y(l,"$to_n",E)}(m[0],null),function(h,_){var l=z(h,_,"String");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(m[0],null),function(h,_){var l=z(h,_,"Regexp");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(m[0],null),function(h,_){var l=z(h,_,"MatchData");return Y(l,"$to_n",te("matches"))}(m[0],null),function(h,_,l){var x=z(h,_,"Struct"),G=[x].concat(l),c=n.$r(G);return Y(x,"$to_n",function(){var $=this,t=d;return t={},V($,"each_pair",[],function(r,i){return r==null&&(r=d),i==null&&(i=d),t[r]=c("Native").$try_convert(i,i)}),t})}(m[0],null,m),function(h,_,l){var x=z(h,_,"Array"),G=[x].concat(l),c=n.$r(G);return Y(x,"$to_n",function(){for(var $=this,t=[],e=0,r=$.length;e<r;e++){var i=$[e];t.push(c("Native").$try_convert(i,i))}return t})}(m[0],null,m),function(h,_){var l=z(h,_,"Boolean");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(m[0],null),function(h,_){var l=z(h,_,"Time");return Y(l,"$to_n",E)}(m[0],null),function(h,_){var l=z(h,_,"NilClass");return Y(l,"$to_n",function(){return null})}(m[0],null),ee(u("Hash")["$method_defined?"]("_initialize"))||function(h,_,l){var x=z(h,_,"Hash"),G=[x].concat(l),c=n.$r(G);W(x,"_initialize","initialize");function a($,t,e){e&&(e.constructor===void 0||e.constructor===Object||e instanceof Map)?k($,t,c("Hash").$new(e)):e&&e.$$is_array?(e=e.map(function(r){return r&&(r.constructor===void 0||r.constructor===Object||e instanceof Map)?c("Hash").$new(r):x.$Native(r)}),k($,t,e)):k($,t,x.$Native(e))}return Y(x,"$initialize",function $(t){var e=$.$$p||d,r=this;if($.$$p=null,t!=null)if(t.constructor===void 0||t.constructor===Object){var i,s;for(i in t)s=t[i],a(r,i,s);return r}else t instanceof Map&&n.hash_each(t,!1,function(o,v){return a(r,o,v),[!1,!1]});return V(r,"_initialize",[t],e.$to_proc())},-1),Y(x,"$to_n",function(){var t=this,e={};return n.hash_each(t,!1,function(r,i){return e[c("Native").$try_convert(r,r)]=c("Native").$try_convert(i,i),[!1,!1]}),e})}(m[0],null,m),function(h,_){var l=z(h,_,"Module");return Y(l,"$native_module",function(){var G=this;return n.global[G.$name()]=G})}(m[0],null),function(h,_,l){var x=z(h,_,"Class"),G=[x].concat(l),c=n.$r(G);return Y(x,"$native_alias",function($,t){var e=this,r=e.prototype[n.jsid(t)];r||e.$raise(c("NameError").$new("undefined method `"+t+"' for class `"+e.$inspect()+"'",t)),e.prototype[$]=r}),Y(x,"$native_class",function(){var $=this;return $.$native_module(),$.new=$.$new})}(m[0],null,m),M.$=M.global=q.$Native(n.global)};(function(n){var k;if(typeof globalThis<"u"?n=globalThis:typeof global<"u"?n=global:typeof window<"u"&&(n=window),n.console==null&&(n.console={}),typeof n.console=="object"?k=n.console:k={},"log"in k||(k.log=function(){}),"warn"in k||(k.warn=k.log),typeof n.Opal<"u")return k.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),n.Opal;var y,P,I,ee,V,C,Z,p=n.Opal={};p.global=n,p.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var B=Function.prototype.call,ie=Function.prototype.bind,L=Object.hasOwn||B.bind(Object.prototype.hasOwnProperty),Y=Object.setPrototypeOf,te=B.bind(Array.prototype.slice),W=B.bind(Array.prototype.splice),z=4,w=z;function K(){return w+=2,w}p.uid=K,p.id=function(f){return f.$$is_number?f*2+1:(f.$$id==null&&g(f,"$$id",K()),f.$$id)};var H=p.gvars={};p.exit=function(f){H.DEBUG&&k.log("Exited with status "+f)},p.exceptions=[],p.pop_exception=function(f){var b=p.exceptions.pop();b===f||(b?H["!"]=b:H["!"]=y)};function j(f,b){if(f||(f=p.Exception||Error),Z&&Z.$raise)arguments.length>2?Z.$raise(f.$new.apply(f,te(arguments,1))):Z.$raise(f,b);else throw f.$new?f.$new(b):new f(b)}var R={value:void 0,enumerable:!1,configurable:!0,writable:!0};function g(f,b,U){typeof f=="string"?f[b]=U:(R.value=U,Object.defineProperty(f,b,R))}p.prop=g,p.defineProperty=p.prop,p.slice=te;var E=p.truthy=function(f){return f!==!1&&y!==f&&f!==void 0&&f!==null&&(!(f instanceof Boolean)||f.valueOf()===!0)};p.falsy=function(f){return!E(f)},p.type_error=function(f,b,U,re){f=f.$$class,re&&U?(re=re.$$class,j(p.TypeError,"can't convert "+f+" into "+b+" ("+f+"#"+U+" gives "+re+")")):j(p.TypeError,"no implicit conversion of "+f+" into "+b)},p.coerce_to=function(f,b,U,re){var ue;return U==="to_int"&&b===p.Integer&&f.$$is_number?f<0?Math.ceil(f):Math.floor(f):U==="to_str"&&b===p.String&&f.$$is_string||p.is_a(f,b)?f:f["$respond_to?"].$$pristine&&f.$method_missing.$$pristine?(ue=f[de(U)],(ue==null||ue.$$stub)&&p.type_error(f,b),ue.apply(f,re)):(f["$respond_to?"](U)||p.type_error(f,b),re==null&&(re=[]),p.send(f,U,re))},p.respond_to=function(f,b,U){if(f==null||!f.$$class)return!1;U=!!U;var re=f[b];if(f["$respond_to?"].$$pristine){if(typeof re=="function"&&!re.$$stub)return!0;if(!f["$respond_to_missing?"].$$pristine)return p.send(f,f["$respond_to_missing?"],[b.substr(1),U])}else return p.send(f,f["$respond_to?"],[b.substr(1),U])},p.trace_class=!1,p.tracers_for_class=[];function M(f){var b,U,re;for(b=0,U=p.tracers_for_class.length;b<U;b++)re=p.tracers_for_class[b],re.trace_object=f,re.block.$call(re)}function q(f,b){if(f.$$autoload[b].loaded){if(f.$$autoload[b].loaded&&!f.$$autoload[b].required&&f.$$autoload[b].exception)throw f.$$autoload[b].exception}else{f.$$autoload[b].loaded=!0;try{p.Kernel.$require(f.$$autoload[b].path)}catch(U){throw f.$$autoload[b].exception=U,U}if(f.$$autoload[b].required=!0,f.$$const[b]!=null)return f.$$autoload[b].success=!0,f.$$const[b]}}function m(f,b){if(f){if(f.$$const[b]!=null)return f.$$const[b];if(f.$$autoload&&f.$$autoload[b])return q(f,b)}}function u(f,b){var U,re,ue;if(f.length!==0)for(U=0,re=f.length;U<re;U++){if(ue=f[U].$$const[b],ue!=null)return ue;if(f[U].$$autoload&&f[U].$$autoload[b])return q(f[U],b)}}function d(f,b){var U,re,ue;if(f!=null)for(ue=J(f),U=0,re=ue.length;U<re;U++){if(ue[U].$$const&&L(ue[U].$$const,b))return ue[U].$$const[b];if(ue[U].$$autoload&&ue[U].$$autoload[b])return q(ue[U],b)}}function A(f,b){if(f==null||f.$$is_module)return d(I,b)}function h(f,b){return(f||I).$const_missing(b)}p.const_get_local=function(f,b,U){var re;if(f!=null)return f==="::"&&(f=I),!f.$$is_module&&!f.$$is_class&&j(p.TypeError,f.toString()+" is not a class/module"),re=m(f,b),re!=null||U?re:h(f,b)},p.const_get_qualified=function(f,b,U){var re,ue,_e,ge=p.const_cache_version;if(b==null)return re=m(I,f),re??p.const_get_qualified(I,f,U);if(f!=null)return f==="::"&&(f=I),!f.$$is_module&&!f.$$is_class&&j(p.TypeError,f.toString()+" is not a class/module"),(ue=f.$$const_cache)==null&&(g(f,"$$const_cache",Object.create(null)),ue=f.$$const_cache),_e=ue[b],_e==null||_e[0]!==ge?((re=m(f,b))!=null||(re=d(f,b))!=null,ue[b]=[ge,re]):re=_e[1],re!=null||U?re:h(f,b)},p.const_cache_version=1,p.const_get_relative=function(f,b,U){var re=f[0],ue,_e=p.const_cache_version,ge,pe;return(ge=f.$$const_cache)==null&&(g(f,"$$const_cache",Object.create(null)),ge=f.$$const_cache),pe=ge[b],pe==null||pe[0]!==_e?((ue=m(re,b))!=null||(ue=u(f,b))!=null||(ue=d(re,b))!=null||(ue=A(re,b))!=null,ge[b]=[_e,ue]):ue=pe[1],ue!=null||U?ue:h(re,b)};function _(f,b,U){var re=!0;return(f==null||f==="::")&&(f=I),U.$$is_a_module&&((U.$$name==null||U.$$name===y)&&(U.$$name=b),U.$$base_module==null&&(U.$$base_module=f)),f.$$const=f.$$const||Object.create(null),(b in f.$$const||"$$autoload"in f&&b in f.$$autoload)&&(re=!1),f.$$const[b]=U,f.$$=f.$$const,p.const_cache_version++,f===I&&(p[b]=U),g(f,b,U),re&&f.$const_added&&!f.$const_added.$$pristine&&f.$const_added(b),U}p.const_set=_,p.constants=function(f,b){b==null&&(b=!0);var U,re=[f],ue,_e,ge={},pe;for(b&&(re=re.concat(J(f))),b&&f.$$is_module&&(re=re.concat([p.Object]).concat(J(p.Object))),ue=0,_e=re.length;ue<_e&&(U=re[ue],!(f!==I&&U==I));ue++){for(pe in U.$$const)ge[pe]=!0;if(U.$$autoload)for(pe in U.$$autoload)ge[pe]=!0}return Object.keys(ge)},p.const_remove=function(f,b){if(p.const_cache_version++,f.$$const[b]!=null){var U=f.$$const[b];return delete f.$$const[b],U}if(f.$$autoload&&f.$$autoload[b])return delete f.$$autoload[b],y;j(p.NameError,"constant "+f+"::"+f.$name()+" not defined")},p.const_get_relative_factory=function(f){return function(b,U){return p.$$(f,b,U)}},p.$$=p.const_get_relative,p.$$$=p.const_get_qualified,p.$r=p.const_get_relative_factory;function l(f){return f==null?!1:f.$$bridge?f:f.$$super?l(f.$$super):!1}function x(f,b,U){var re,ue;if((ue=l(b))?re=function(){var ye=new(ie.apply(ue.$$constructor,he(null,arguments)));return Y(ye,re.$$prototype),ye}:re=function(){},f&&f!==y&&g(re,"displayName","::"+f),g(re,"$$name",f),g(re,"$$constructor",re),g(re,"$$prototype",re.prototype),g(re,"$$const",{}),g(re,"$$is_class",!0),g(re,"$$is_a_module",!0),g(re,"$$super",b),g(re,"$$cvars",{}),g(re,"$$own_included_modules",[]),g(re,"$$own_prepended_modules",[]),g(re,"$$ancestors",[]),g(re,"$$ancestors_cache_version",null),g(re,"$$subclasses",[]),g(re,"$$cloned_from",[]),g(re.$$prototype,"$$class",re),p.Class&&Y(re,p.Class.prototype),b!=null){if(Y(re.$$prototype,b.$$prototype),U!==!0)if(typeof WeakRef<"u"){var _e,ge,pe=[];for(_e=0;_e<b.$$subclasses.length;_e++)ge=b.$$subclasses[_e],ge.deref()!==void 0&&pe.push(ge);pe.push(new WeakRef(re)),b.$$subclasses=pe}else b.$$subclasses.push(re);b.$$meta&&p.build_class_singleton_class(re)}return re}p.allocate_class=x;function G(f,b){var U=m(f,b);if(U)return U.$$is_class||j(p.TypeError,b+" is not a class"),U}function c(f,b){f.$$super!==b&&j(p.TypeError,"superclass mismatch for class "+f.$$name)}p.klass=function(f,b,U){var re;f==null||f=="::"?f=I:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),b!=null&&(!b.hasOwnProperty||b.hasOwnProperty&&!b.hasOwnProperty("$$is_class"))&&(b.constructor&&b.constructor.name=="Function"?(re=b,b=I):j(p.TypeError,"superclass must be a Class ("+(b.constructor&&(b.constructor.name||b.constructor.$$name)||typeof b)+" given)"));var ue=G(f,U);return ue!=null?b&&c(ue,b):(b==null&&(b=I),ue=x(U,b),_(f,U,ue),b.$inherited&&b.$inherited(ue),re&&p.bridge(re,ue)),p.trace_class&&M(ue),ue};function a(f){var b=function(){},U=b;return f&&g(b,"displayName",f+".constructor"),g(U,"$$name",f),g(U,"$$prototype",b.prototype),g(U,"$$const",{}),g(U,"$$is_module",!0),g(U,"$$is_a_module",!0),g(U,"$$cvars",{}),g(U,"$$iclasses",[]),g(U,"$$own_included_modules",[]),g(U,"$$own_prepended_modules",[]),g(U,"$$ancestors",[U]),g(U,"$$ancestors_cache_version",null),g(U,"$$cloned_from",[]),Y(U,p.Module.prototype),U}p.allocate_module=a;function $(f,b){var U=m(f,b);return U==null&&f===I&&(U=d(I,b)),U&&!U.$$is_module&&U!==I&&j(p.TypeError,b+" is not a module"),U}p.module=function(f,b){var U;return f==null||f=="::"?f=I:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),U=$(f,b),U==null&&(U=a(b),_(f,b,U)),p.trace_class&&M(U),U},p.get_singleton_class=function(f){return f.$$is_number&&j(p.TypeError,"can't define singleton"),f.$$meta?f.$$meta:f.hasOwnProperty("$$is_class")?p.build_class_singleton_class(f):f.hasOwnProperty("$$is_module")?p.build_module_singleton_class(f):p.build_object_singleton_class(f)};function t(f,b){f.hasOwnProperty("$$meta")?f.$$meta=b:g(f,"$$meta",b),f.$$frozen?f.$$meta.$freeze():Y(f,b.$$prototype)}p.build_class_singleton_class=function(f){if(f.$$meta)return f.$$meta;var b=f===P?V:p.get_singleton_class(f.$$super),U=x(null,b,!0);return g(U,"$$is_singleton",!0),g(U,"$$singleton_of",f),t(f,U),g(f,"$$class",p.Class),U},p.build_module_singleton_class=function(f){if(f.$$meta)return f.$$meta;var b=x(null,p.Module,!0);return g(b,"$$is_singleton",!0),g(b,"$$singleton_of",f),t(f,b),g(f,"$$class",p.Module),b},p.build_object_singleton_class=function(f){var b=f.$$class,U=x(y,b,!0);return g(U,"$$is_singleton",!0),g(U,"$$singleton_of",f),delete U.$$prototype.$$class,t(f,U),U},p.is_method=function(f){return f[0]==="$"&&f[1]!=="$"},p.instance_methods=function(f){for(var b=Object.create(null),U=[],re=J(f),ue=0,_e=re.length;ue<_e;ue++){var ge=re[ue],pe=ge.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ze=ye.length;we<ze;we++){var Ee=ye[we];if(!b[Ee]){if(p.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);U.push(qe)}}b[Ee]=!0}}}return U},p.own_instance_methods=function(f){var b=[],U=f.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);for(var re=Object.getOwnPropertyNames(U),ue=0,_e=re.length;ue<_e;ue++){var ge=re[ue];if(p.is_method(ge)){var pe=U[ge];if(!pe.$$stub){var ye=ge.slice(1);b.push(ye)}}}return b},p.methods=function(f){return p.instance_methods(f.$$meta||f.$$class)},p.own_methods=function(f){return f.$$meta?p.own_instance_methods(f.$$meta):[]},p.receiver_methods=function(f){var b=p.get_singleton_class(f),U=p.own_instance_methods(b),re=p.own_instance_methods(b.$$super);return U.concat(re)},p.class_variables=function(f){var b=J(f),U,re=b.length,ue={};for(U=re-1;U>=0;U--){var _e=b[U];for(var ge in _e.$$cvars)ue[ge]=_e.$$cvars[ge]}return ue},p.class_variable_set=function(f,b,U){var re=J(f),ue,_e=re.length;for(ue=_e-2;ue>=0;ue--){var ge=re[ue];if(L(ge.$$cvars,b))return ge.$$cvars[b]=U,U}return f.$$cvars[b]=U,U},p.class_variable_get=function(f,b,U){if(L(f.$$cvars,b))return f.$$cvars[b];var re=J(f),ue,_e=re.length;for(ue=0;ue<_e;ue++){var ge=re[ue];if(L(ge.$$cvars,b))return ge.$$cvars[b]}return U||j(p.NameError,"uninitialized class variable "+b+" in "+f.$name()),y};function e(f){return f.hasOwnProperty("$$iclass")&&f.hasOwnProperty("$$root")}function r(f){for(var b=[],U,re=Object.getPrototypeOf(f.$$prototype);re&&!re.hasOwnProperty("$$class");)U=F(re),U&&b.push(U),re=Object.getPrototypeOf(re);return b}function i(f){var b=[],U,re=Object.getPrototypeOf(f.$$prototype);if(f.$$prototype.hasOwnProperty("$$dummy"))for(;re&&re!==f.$$prototype.$$define_methods_on;)U=F(re),U&&b.push(U),re=Object.getPrototypeOf(re);return b}p.append_features=function(f,b){var U=J(f),re=[];U.indexOf(b)!==-1&&j(p.ArgumentError,"cyclic include detected");for(var ue=0,_e=U.length;ue<_e;ue++){var ge=U[ue],pe=o(ge);g(pe,"$$included",!0),re.push(pe)}var ye=J(b),we=S(re),ze,Ee;if(ye.indexOf(f)===-1)ze=b.$$prototype,Ee=Object.getPrototypeOf(b.$$prototype);else{for(var xe=b.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===f&&e(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var ke=Object.getPrototypeOf(qe);ke.hasOwnProperty("$$iclass")&&!e(ke);)ke=Object.getPrototypeOf(ke);ze=xe,Ee=ke}else ze=b.$$prototype,Ee=Object.getPrototypeOf(b.$$prototype)}Y(ze,we.first),Y(we.last,Ee),b.$$own_included_modules=r(b),p.const_cache_version++},p.prepend_features=function(f,b){var U=J(f),re=[];U.indexOf(b)!==-1&&j(p.ArgumentError,"cyclic prepend detected");for(var ue=0,_e=U.length;ue<_e;ue++){var ge=U[ue],pe=o(ge);g(pe,"$$prepended",!0),re.push(pe)}var ye=S(re),we=b.$$prototype,ze=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=v(b),s(b),g(we,"$$dummy",!0),g(we,"$$define_methods_on",Ee),Y(we,Ee),Y(Ee,ze));var ke=J(b);if(ke.indexOf(f)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else j(p.RuntimeError,"Prepending a module multiple times is not supported");Y(xe,ye.first),Y(ye.last,qe),b.$$own_prepended_modules=i(b),p.const_cache_version++};function s(f){for(var b=f.$$prototype,U=Object.getOwnPropertyNames(b),re=0;re<U.length;re++){var ue=U[re];p.is_method(ue)&&delete b[ue]}}function o(f){var b=v(f);return f.$$is_module&&f.$$iclasses.push(b),b}function v(f){var b={},U=f.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);var re=Object.getOwnPropertyNames(U),ue=re.length,_e;for(_e=0;_e<ue;_e++){var ge=re[_e];g(b,ge,U[ge])}return g(b,"$$iclass",!0),g(b,"$$module",f),b}function S(f){var b=f.length,U=f[0];if(g(U,"$$root",!0),b===1)return{first:U,last:U};for(var re=U,ue=1;ue<b;ue++){var _e=f[ue];Y(re,_e),re=_e}return{first:f[0],last:f[b-1]}}p.bridge=function(f,b){f.hasOwnProperty("$$bridge")&&j(p.ArgumentError,"already bridged"),g(f,"$$bridge",b),Y(f.prototype,(b.$$super||p.Object).$$prototype),g(b,"$$prototype",f.prototype),g(b.$$prototype,"$$class",b),g(b,"$$constructor",f),g(b,"$$bridge",!0)};function F(f){if(!f.hasOwnProperty("$$dummy")){if(f.hasOwnProperty("$$iclass"))return f.$$module;if(f.hasOwnProperty("$$class"))return f.$$class}}function T(f){return f.$$own_prepended_modules.concat([f]).concat(f.$$own_included_modules)}function J(f){if(!f)return[];if(f.$$ancestors_cache_version===p.const_cache_version)return f.$$ancestors;var b=[],U,re,ue;for(U=0,re=T(f),ue=re.length;U<ue;U++)b.push(re[U]);if(f.$$super)for(U=0,re=J(f.$$super),ue=re.length;U<ue;U++)b.push(re[U]);return f.$$ancestors_cache_version=p.const_cache_version,f.$$ancestors=b,b}p.ancestors=J,p.included_modules=function(f){for(var b=[],U=null,re=Object.getPrototypeOf(f.$$prototype);re&&Object.getPrototypeOf(re);re=Object.getPrototypeOf(re))U=F(re),U&&U.$$is_module&&re.$$iclass&&re.$$included&&b.push(U);return b},p.add_stubs=function(f){var b=p.BasicObject.$$prototype,U,re;f=f.split(",");for(var ue=0,_e=f.length;ue<_e;ue++)U=de(f[ue]),re=b[U],(re==null||re.$$stub)&&p.add_stub_for(b,U)},p.add_stub_for=function(f,b){g(f,b,p.stub_for(b))},p.stub_for=function(f){function b(){return this.$method_missing.$$p=b.$$p,b.$$p=null,this.$method_missing.apply(this,he(f.slice(1),arguments))}return b.$$stub=!0,b},p.ac=function(f,b,U,re){var ue="";U.$$is_a_module?ue+=U.$$name+".":ue+=U.$$class.$$name+"#",ue+=re,j(p.ArgumentError,"["+ue+"] wrong number of arguments (given "+f+", expected "+b+")")},p.block_ac=function(f,b,U){var re="`block in "+U+"'";j(p.ArgumentError,re+": wrong number of arguments (given "+f+", expected "+b+")")};function O(f){return f.hasOwnProperty("$$meta")&&f.$$meta!==null?J(f.$$meta):J(f.$$class)}p.find_super=function(f,b,U,re,ue){var _e=de(b),ge,pe,ye,we,ze=-1,Ee;for(ge=O(f),we=U.$$owner,Ee=0;Ee<ge.length;Ee++)if(pe=ge[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ze=Ee;break}for(Ee=ze+1;Ee<ge.length;Ee++){pe=ge[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(_e)){ye=xe[_e];break}}return!re&&ye&&ye.$$stub&&f.$method_missing.$$pristine&&j(p.NoMethodError,"super: no superclass method `"+b+"' for "+f,b),ye.$$stub&&!ue?null:ye},p.find_block_super=function(f,b,U,re,ue){var _e=b;return U||j(p.RuntimeError,"super called outside of method"),ue&&U.$$define_meth&&j(p.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),U.$$def&&(_e=U.$$jsid),p.find_super(f,_e,U,re)},p.find_super_dispatcher=p.find_super,p.find_iter_super_dispatcher=p.find_block_super;function ae(f,b,U){try{f(b)}catch(re){if(re===U)return U.$v;throw re}}p.yield1=function(f,b){typeof f!="function"&&j(p.LocalJumpError,"no block given");var U=f.$$has_top_level_mlhs_arg,re=f.$$has_trailing_comma_in_args,ue=f.$$is_lambda&&f.$$ret;return(f.length>1||(U||re)&&f.length===1)&&(b=p.to_ary(b)),(f.length>1||re&&f.length===1)&&b.$$is_array?ue?ae(f.apply.bind(f,null),b,f.$$ret):f.apply(null,b):ue?ae(f,b,f.$$ret):f(b)},p.yieldX=function(f,b){return typeof f!="function"&&j(p.LocalJumpError,"no block given"),f.length>1&&b.length===1&&b[0].$$is_array&&(b=b[0]),f.$$is_lambda&&f.$$ret?ae(f.apply.bind(f,null),b,f.$$ret):f.apply(null,b)},p.rescue=function(f,b){for(var U=0;U<b.length;U++){var re=b[U];if(re.$$is_array){var ue=p.rescue(f,re);if(ue)return ue}else if(re===p.JS.Error||re["$==="](f))return re}return null},p.is_a=function(f,b){if(b!=null&&f.$$meta===b||f.$$class===b)return!0;if(f.$$is_number&&b.$$is_number_class)return b.$$is_integer_class?f%1===0:!0;var U=J(f.$$is_class?p.get_singleton_class(f):f.$$meta||f.$$class);return U.indexOf(b)!==-1},p.to_hash=function(f){if(f.$$is_hash)return f;if(f["$respond_to?"]("to_hash",!0)){var b=f.$to_hash();if(b.$$is_hash)return b;j(p.TypeError,"Can't convert "+f.$$class+" to Hash ("+f.$$class+"#to_hash gives "+b.$$class+")")}else j(p.TypeError,"no implicit conversion of "+f.$$class+" into Hash")},p.to_ary=function(f){if(f.$$is_array)return f;if(f["$respond_to?"]("to_ary",!0)){var b=f.$to_ary();if(b===y)return[f];if(b.$$is_array)return b;j(p.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_ary gives "+b.$$class+")")}else return[f]},p.to_a=function(f){if(f.$$is_array)return f.slice();if(f["$respond_to?"]("to_a",!0)){var b=f.$to_a();if(b===y)return[f];if(b.$$is_array)return b;j(p.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_a gives "+b.$$class+")")}else return[f]},p.extract_kwargs=function(f){var b=f[f.length-1];if(b!=null&&p.respond_to(b,"$to_hash",!0))return W(f,f.length-1),b},p.kwrestargs=function(f,b){var U=new Map;return p.hash_each(f,!1,function(re,ue){return b[re]||p.hash_put(U,re,ue),[!1,!1]}),U};function le(f,b){typeof b=="number"?f.$$arity=b:typeof b=="object"&&Object.assign(f,b)}var ce=new Map;function de(f){var b=ce.get(f);return b||(b="$"+f,ce.set(f,b)),b}p.jsid=de;function he(f,b){return b.$$is_array||(b=te(b)),[f].concat(b)}p.send=function(f,b,U,re,ue){var _e;return typeof b=="function"?(_e=b,b=null):typeof b=="string"?_e=f[de(b)]:j(p.NameError,"Passed method should be a string or a function"),p.send2(f,_e,b,U,re,ue)},p.send2=function(f,b,U,re,ue,_e){return b==null&&U!=null&&f.$method_missing&&(b=f.$method_missing,re=he(U,re)),le(ue,_e),typeof ue=="function"&&(b.$$p=ue),b.apply(f,re)},p.refined_send=function(f,b,U,re,ue,_e){var ge,pe,ye,we,ze,Ee,xe,qe,ke,Ae;for(we=O(b),ge=0;ge<we.length;ge++)for(ze=p.id(we[ge]),pe=0;pe<f.length;pe++)for(Ee=f[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ze]>"u")&&(ke=qe[ze],typeof ke.$$prototype[de(U)]<"u")))return Ae=ke.$$prototype[de(U)],p.send2(b,Ae,U,re,ue,_e);return p.send(b,U,re,ue,_e)},p.lambda=function(f,b){return f.$$is_lambda=!0,le(f,b),f},p.def=function(f,b,U,re){return le(U,re),f===p.top?p.defn(p.Object,b,U):!f.$$eval&&f.$$is_a_module?p.defn(f,b,U):p.defs(f,b,U)},p.defn=function(f,b,U){N(f),U.displayName=b,U.$$owner=f;var re=b.substr(1),ue=f.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),g(ue,b,U),f.$$is_module){f.$$module_function&&p.defs(f,b,U);for(var _e=0,ge=f.$$iclasses,pe=ge.length;_e<pe;_e++){var ye=ge[_e];g(ye,b,U)}}var we=f.$$singleton_of;return f.$method_added&&!f.$method_added.$$stub&&!we?f.$method_added(re):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(re),re},p.defs=function(f,b,U,re){return le(U,re),(f.$$is_string||f.$$is_number)&&j(p.TypeError,"can't define singleton"),p.defn(p.get_singleton_class(f),b,U)};function ve(f,b){if(f.$$is_module)for(var U=0,re=f.$$iclasses,ue=re.length;U<ue;U++){var _e=re[U];delete _e[b]}}p.rdef=function(f,b){L(f.$$prototype,b)||j(p.NameError,"method '"+b.substr(1)+"' not defined in "+f.$name()),delete f.$$prototype[b],ve(f,b),f.$$is_singleton?f.$$prototype.$singleton_method_removed&&!f.$$prototype.$singleton_method_removed.$$stub&&f.$$prototype.$singleton_method_removed(b.substr(1)):f.$method_removed&&!f.$method_removed.$$stub&&f.$method_removed(b.substr(1))},p.udef=function(f,b){(!f.$$prototype[b]||f.$$prototype[b].$$stub)&&j(p.NameError,"method '"+b.substr(1)+"' not defined in "+f.$name()),p.add_stub_for(f.$$prototype,b),ve(f,b),f.$$is_singleton?f.$$prototype.$singleton_method_undefined&&!f.$$prototype.$singleton_method_undefined.$$stub&&f.$$prototype.$singleton_method_undefined(b.substr(1)):f.$method_undefined&&!f.$method_undefined.$$stub&&f.$method_undefined(b.substr(1))};function me(f){return typeof f=="function"&&!f.$$stub}p.alias=function(f,b,U){var re=de(b),ue=de(U),_e,ge;if(typeof f.$$prototype>"u"&&(f=p.Object),_e=f.$$prototype[ue],f.$$eval)return p.alias(p.get_singleton_class(f),b,U);if(!me(_e)){for(var pe=f.$$super;typeof _e!="function"&&pe;)_e=pe[ue],pe=pe.$$super;!me(_e)&&f.$$is_module&&(_e=p.Object.$$prototype[ue]),me(_e)||j(p.NameError,"undefined method `"+U+"' for class `"+f.$name()+"'")}return _e.$$alias_of&&(_e=_e.$$alias_of),ge=p.wrap_method_body(_e),ge.displayName=b,ge.$$alias_of=_e,ge.$$alias_name=b,p.defn(f,re,ge),f},p.wrap_method_body=function(f){var b=function(){var U=b.$$p;return b.$$p=null,p.send(this,f,arguments,U)};try{Object.defineProperty(b,"length",{value:f.length})}catch{}return b.$$arity=f.$$arity==null?f.length:f.$$arity,b.$$parameters=f.$$parameters,b.$$source_location=f.$$source_location,b},p.alias_gvar=function(f,b){return Object.defineProperty(H,f,{configurable:!0,enumerable:!0,get:function(){return H[b]},set:function(U){H[b]=U}}),y},p.alias_native=function(f,b,U){var re=de(b),ue=f.$$prototype[U];return(typeof ue!="function"||ue.$$stub)&&j(p.NameError,"undefined native method `"+U+"' for class `"+f.$name()+"'"),p.defn(f,re,ue),f},p.hash_init=function(f){k.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},p.hash_clone=function(f,b){return b.$$none=f.$$none,b.$$proc=f.$$proc,p.hash_each(f,b,function(U,re){return p.hash_put(b,U,re),[!1,b]})},p.hash_put=function(f,b,U){var re=typeof b;if(re==="string"||re==="symbol"||re==="number"||re==="boolean"||re==="bigint")f.set(b,U);else if(b.$$is_string)f.set(b.valueOf(),U);else{f.$$keys||(f.$$keys=new Map);var ue=b.$$is_string?b.valueOf():f.$$by_identity?p.id(b):b.$hash(),_e=f.$$keys;if(!_e.has(ue)){_e.set(ue,[b]),f.set(b,U);return}for(var ge=_e.get(ue),pe,ye=0;ye<ge.length;ye++)if(pe=ge[ye],b===pe||b["$eql?"](pe)){f.set(pe,U);return}ge.push(b),f.set(b,U)}},p.hash_get=function(f,b){var U=typeof b;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return f.get(b);if(f.$$keys){var re=b.$$is_string?b.valueOf():f.$$by_identity?p.id(b):b.$hash(),ue=f.$$keys.get(re),_e;if(ue!==void 0){for(var ge=0;ge<ue.length;ge++)if(_e=ue[ge],b===_e||b["$eql?"](_e))return f.get(_e)}else if(b.$$is_string)return f.get(re)}else if(b.$$is_string)return f.get(b.valueOf())};function be(f,b){var U=f.get(b);if(U!==void 0)return f.delete(b),U}p.hash_delete=function(f,b){var U=typeof b;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return be(f,b);if(f.$$keys){var re=b.$$is_string?b.valueOf():f.$$by_identity?p.id(b):b.$hash(),ue=f.$$keys.get(re),_e;if(ue!==void 0){for(var ge=0;ge<ue.length;ge++)if(_e=ue[ge],b===_e||b["$eql?"](_e))return ue.splice(ge,1),ue.length===0&&f.$$keys.delete(re),be(f,_e)}else if(b.$$is_string)return be(f,re)}else if(b.$$is_string)return be(f,b.valueOf())},p.hash_rehash=function(f){var b=f.$$keys;return b&&b.clear(),p.hash_each(f,!1,function(U,re){var ue=typeof U;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var _e=U.$$is_string?U.valueOf():f.$$by_identity?p.id(U):U.$hash();if(b||(f.$$keys=b=new Map),!b.has(_e))return b.set(_e,[U]),[!1,!1];for(var ge=b.get(_e),pe=ge.length===1?ge:te(ge),ye,we=0;we<pe.length;we++)ye=pe[we],(U===ye||U["$eql?"](ye))&&(ge.splice(ge.indexOf(ye),1),f.delete(ye));return ge.push(U),[!1,!1]}),f},p.hash=function(){var f=arguments.length,b,U,re,ue,_e,ge;if(f===1&&arguments[0].$$is_hash)return arguments[0];if(U=new Map,f===1)if(b=arguments[0],arguments[0].$$is_array){for(ue=b.length,re=0;re<ue;re++)b[re].length!==2&&j(p.ArgumentError,"value not of length 2: "+b[re].$inspect()),_e=b[re][0],ge=b[re][1],p.hash_put(U,_e,ge);return U}else{b=arguments[0];for(_e in b)L(b,_e)&&(ge=b[_e],p.hash_put(U,_e,ge));return U}for(f%2!==0&&j(p.ArgumentError,"odd number of arguments for Hash"),re=0;re<f;re+=2)_e=arguments[re],ge=arguments[re+1],p.hash_put(U,_e,ge);return U},p.hash2=function(f,b){k.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var U=new Map,re=0,ue=f.length;re<ue;re++)U.set(f[re],b[f[re]]);return U},p.hash_each=function(f,b,U){for(var re,ue=0,_e,ge=Array.from(f.entries()),pe=ge.length;ue<pe;ue++)if(_e=ge[ue],re=U(_e[0],_e[1]),re[0])return re[1];return re?re[1]:b},p.range=function(f,b,U){var re=new p.Range;return re.begin=f,re.end=b,re.excl=U,re};var $e=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];p.ivar=function(f){return $e.indexOf(f)!==-1&&(f+="$"),f};function N(f){f.$$frozen&&j(p.FrozenError,"can't modify frozen "+f.$class()+": "+f,new Map([["receiver",f]]))}p.deny_frozen_access=N,p.freeze=function(f){return g(f,"$$frozen",!0),f.hasOwnProperty("$$id")||g(f,"$$id",K()),f.hasOwnProperty("$$meta")?f.$$meta.$freeze():g(f,"$$meta",null),f.hasOwnProperty("$$comparable")||g(f,"$$comparable",null),Object.seal(f),f};function D(f,b){var U=Object.getOwnPropertyNames(f),re=U.length,ue,_e,ge;for(ue=0;ue<re;ue++)_e=U[ue],_e[0]!=="$"&&(ge=Object.getOwnPropertyDescriptor(f,_e),ge&&ge.enumerable&&b(_e,ge))}p.each_ivar=D,p.freeze_props=function(f){var b={get:null,set:function(U){N(f)},enumerable:!0};D(f,function(U,re){re.writable&&(b.get=se(re.value),Object.defineProperty(f,U,b))})},p.escape_regexp=function(f){return f.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},p.global_regexp=function(f){return f.global?f:(f.$$g==null?f.$$g=new RegExp(f.source,(f.multiline?"gm":"g")+(f.ignoreCase?"i":"")):f.$$g.lastIndex=null,f.$$g)},p.global_multiline_regexp=function(f){var b,U;return f.global&&f.multiline?f:(U="gm"+(f.ignoreCase?"i":""),f.multiline?(f.$$g==null&&(f.$$g=new RegExp(f.source,U)),b=f.$$g):(f.$$gm==null&&(f.$$gm=new RegExp(f.source,U)),b=f.$$gm),b.lastIndex=null,b)},p.regexp=function(f,b){for(var U,re=typeof b<"u"&&b&&b.indexOf("i")>=0,ue=0,_e=f.length;ue<_e;ue++)U=f[ue],U instanceof RegExp&&(U.ignoreCase!==re&&p.Kernel.$warn("ignore case doesn't match for "+U.source.$inspect(),new Map([["uplevel",1]])),U=U.source),U===""&&(U="(?:"+U+")"),f[ue]=U;return b?new RegExp(f.join(""),b):new RegExp(f.join(""))},p.modules={},p.loaded_features=["corelib/runtime"],p.current_dir=".",p.require_table={"corelib/runtime":!0},p.normalize=function(f){var b,U,re=[],ue="/";p.current_dir!=="."&&(f=p.current_dir.replace(/\/*$/,"/")+f),f=f.replace(/^\.\//,""),f=f.replace(/\.(rb|opal|js)$/,""),b=f.split(ue);for(var _e=0,ge=b.length;_e<ge;_e++)U=b[_e],U!==""&&(U===".."?re.pop():re.push(U));return re.join(ue)},p.loaded=function(f){var b,U,re;for(b=0,U=f.length;b<U;b++)re=p.normalize(f[b]),!p.require_table[re]&&(p.loaded_features.push(re),p.require_table[re]=!0)},p.load_normalized=function(f){p.loaded([f]);var b=p.modules[f];if(b){var U=b(p);if(typeof Promise<"u"&&U instanceof Promise)return U.then(se(!0))}else{var re=p.config.missing_require_severity,ue="cannot load such file -- "+f;re==="error"?j(p.LoadError,ue):re==="warning"&&k.warn("WARNING: LoadError: "+ue)}return!0},p.load=function(f){return f=p.normalize(f),p.load_normalized(f)},p.require=function(f){return f=p.normalize(f),p.require_table[f]?!1:p.load_normalized(f)},p.encodings=Object.create(null),p.set_encoding=function(f,b,U){typeof U>"u"&&(U="encoding"),(typeof f=="string"||f.$$frozen===!0)&&j(p.FrozenError,"can't modify frozen String");var re=p.find_encoding(b);return re===f[U]||(f[U]=re),f},p.find_encoding=function(f){var b=p.encodings,U=b[f]||b[f.toUpperCase()];return U||j(p.ArgumentError,"unknown encoding name - "+f),U},p.enc=function(f,b){var U=new String(f);return U=p.set_encoding(U,b),U.internal_encoding=U.encoding,U},p.binary=function(f){var b=new String(f);return p.set_encoding(b,"binary","internal_encoding")},p.last_promise=null,p.promise_unhandled_exception=!1,p.queue=function(f){if(p.last_promise)return p.last_promise=p.last_promise.then(function(){if(!p.promise_unhandled_exception)return f(p)}).catch(function(U){p.respond_to(U,"$full_message")&&(U=U.$full_message()),k.error(U),p.promise_unhandled_exception=!0,p.exit(1)}),p.last_promise;var b=f(p);return typeof Promise=="function"&&typeof b=="object"&&b instanceof Promise&&(p.last_promise=b),b};function X(f,b){return typeof f=="number"&&typeof b=="number"}p.rb_plus=function(f,b){return X(f,b)?f+b:f["$+"](b)},p.rb_minus=function(f,b){return X(f,b)?f-b:f["$-"](b)},p.rb_times=function(f,b){return X(f,b)?f*b:f["$*"](b)},p.rb_divide=function(f,b){return X(f,b)?f/b:f["$/"](b)},p.rb_lt=function(f,b){return X(f,b)?f<b:f["$<"](b)},p.rb_gt=function(f,b){return X(f,b)?f>b:f["$>"](b)},p.rb_le=function(f,b){return X(f,b)?f<=b:f["$<="](b)},p.rb_ge=function(f,b){return X(f,b)?f>=b:f["$>="](b)};function Q(f,b){return typeof f=="number"&&typeof b=="number"||typeof f=="string"&&typeof b=="string"}function ne(f,b){return Q(f,b)?f===b:E(f["$=="](b))}p.eqeq=ne,p.eqeqeq=function(f,b){return Q(f,b)?f===b:E(f["$==="](b))},p.neqeq=function(f,b){return Q(f,b)?f!==b:E(f["$!="](b))},p.not=function(f){return f==null||f===!1||y===f?!0:f===!0||f["$!"].$$pristine?!1:E(f["$!"]())};function se(f){return function(){return f}}p.return_val=se,p.return_self=function(){return this},p.return_ivar=function(f){return function(){return this[f]==null?y:this[f]}},p.assign_ivar=function(f){return function(b){return N(this),this[f]=b}},p.assign_ivar_val=function(f,b){return function(){return N(this),this[f]=b}},p.ensure_kwargs=function(f){if(f==null)return new Map;if(f.$$is_hash)return f;j(p.ArgumentError,"expected kwargs")},p.get_kwarg=function(f,b){var U=p.hash_get(f,b);return U===void 0&&j(p.ArgumentError,"missing keyword: "+b),U},p.large_array_unpack=function(f){var b=f.split(","),U=b.length,re;for(re=0;re<U;re++)switch(b[re][0]){case void 0:b[re]=y;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":b[re]=+b[re]}return b},p.opal32_init=se(1332765036);function oe(f,b){return f<<b|f>>>32-b}p.opal32_add=function(f,b){return f^=b,f=oe(f,1),f},p.BasicObject=P=x("BasicObject",null),p.Object=I=x("Object",p.BasicObject),p.Module=ee=x("Module",p.Object),p.Class=V=x("Class",p.Module),p.Opal=C=a("Opal"),p.Kernel=Z=a("Kernel"),Y(p.BasicObject,p.Class.$$prototype),Y(p.Object,p.Class.$$prototype),Y(p.Module,p.Class.$$prototype),Y(p.Class,p.Class.$$prototype),P.$$const.BasicObject=P,_(I,"BasicObject",P),_(I,"Object",I),_(I,"Module",ee),_(I,"Class",V),_(I,"Opal",C),_(I,"Kernel",Z),P.$$class=V,I.$$class=V,ee.$$class=V,V.$$class=V,C.$$class=ee,Z.$$class=ee,g(I.$$prototype,"toString",function(){var f=this.$to_s();return f.$$is_string&&typeof f=="object"?f.valueOf():f}),g(I.$$prototype,"$require",p.require),p.top=new I,p.top.$to_s=p.top.$inspect=se("main"),p.top.$define_method=fe;function fe(){var f=fe.$$p;return fe.$$p=null,p.send(I,"define_method",arguments,f)}p.NilClass=x("NilClass",p.Object),_(I,"NilClass",p.NilClass),y=p.nil=new p.NilClass,y.$$id=z,y.call=y.apply=function(){j(p.LocalJumpError,"no block given")},y.$$frozen=!0,y.$$comparable=!1,Object.seal(y),p.thrower=function(f){var b={$thrower_type:f,$throw:function(U,re){throw U==null&&(U=y),this.is_orphan&&!re&&j(p.LocalJumpError,"unexpected "+f,U,f.$to_sym()),this.$v=U,this},is_orphan:!1};return b},Object.defineProperty(H,"@",{enumerable:!0,configurable:!0,get:function(){return E(H["!"])?H["!"].$backtrace():y},set:function(f){E(H["!"])?H["!"].$set_backtrace(f):j(p.ArgumentError,"$! not set")}}),p.t_eval_return=p.thrower("return"),TypeError.$$super=Error,p.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(n){var k=n.type_error,y=n.coerce_to,P=n.module,I=n.defs,ee=n.slice,V=n.eqeqeq,C=n.Kernel,Z=n.truthy,p=n.Opal,B=n.nil,ie=n.$$$;return n.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(L){var Y=P(L,"Opal");I(Y,"$bridge",function(z,w){return n.bridge(z,w)}),I(Y,"$coerce_to!",function(z,w,K,H){var j,R,g=B;return j=ee(arguments,3),R=j,g=y(z,w,K,R),V(w,g)||C.$raise(k(z,w,K,g)),g},-4),I(Y,"$coerce_to?",function(z,w,K,H){var j,R,g=B;return j=ee(arguments,3),R=j,!Z(z["$respond_to?"](K))||(g=y(z,w,K,R),Z(g["$nil?"]()))?B:(V(w,g)||C.$raise(k(z,w,K,g)),g)},-4),I(Y,"$try_convert",function(z,w,K){return V(w,z)?z:Z(z["$respond_to?"](K))?z.$__send__(K):B}),I(Y,"$compare",function(z,w){var K=B;return K=z["$<=>"](w),Z(K===B)&&C.$raise(ie("ArgumentError"),"comparison of "+z.$class()+" with "+w.$class()+" failed"),K}),I(Y,"$destructure",function(z){if(z.length==1)return z[0];if(z.$$is_array)return z;for(var w=new Array(z.length),K=0,H=w.length;K<H;K++)w[K]=z[K];return w}),I(Y,"$respond_to?",function(z,w,K){return K==null&&(K=!1),z==null||!z.$$class?!1:z["$respond_to?"](w,K)},-3),I(Y,"$instance_variable_name!",function(z){return z=p["$coerce_to!"](z,ie("String"),"to_str"),Z(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(z))||C.$raise(ie("NameError").$new("'"+z+"' is not allowed as an instance variable name",z)),z}),I(Y,"$class_variable_name!",function(z){return z=p["$coerce_to!"](z,ie("String"),"to_str"),Z(z.length<3||z.slice(0,2)!=="@@")&&C.$raise(ie("NameError").$new("`"+z+"' is not allowed as a class variable name",z)),z}),I(Y,"$const_name?",function(z){return typeof z!="string"&&(z=p["$coerce_to!"](z,ie("String"),"to_str")),z[0]===z[0].toUpperCase()}),I(Y,"$const_name!",function(z){var w=this;return Z(ie("::","String","skip_raise")?"constant":B)&&(z=p["$coerce_to!"](z,ie("String"),"to_str")),(!z||z[0]!=z[0].toUpperCase())&&w.$raise(ie("NameError"),"wrong constant name "+z),z}),I(Y,"$pristine",function(z,w){var K,H;K=ee(arguments,1),H=K;for(var j,R,g=H.length-1;g>=0;g--)j=H[g],R=z.$$prototype[n.jsid(j)],R&&!R.$$stub&&(R.$$pristine=!0);return B},-2);var te=[];return I(Y,"$inspect",function(z){var w=B,K=!1;return function(){try{try{return z===null?"null":z===void 0?"undefined":typeof z.$$class>"u"?Object.prototype.toString.apply(z):typeof z.$inspect!="function"||z.$inspect.$$stub||te.indexOf(z.$__id__())!==-1?"#<"+z.$$class+":0x"+z.$__id__().$to_s(16)+">":(te.push(z.$__id__()),K=!0,z.$inspect())}catch(H){if(n.rescue(H,[ie("Exception")])){w=H;try{return"#<"+z.$$class+":0x"+z.$__id__().$to_s(16)+">"}finally{n.pop_exception(H)}}else throw H}}finally{K&&te.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(n){var k=n.truthy,y=n.coerce_to,P=n.const_set,I=n.Object,ee=n.return_ivar,V=n.assign_ivar,C=n.ivar,Z=n.deny_frozen_access,p=n.freeze,B=n.prop,ie=n.jsid,L=n.each_ivar,Y=n.klass,te=n.Opal,W=n.Kernel,z=n.defs,w=n.send,K=n.def,H=n.eqeqeq,j=n.Module,R=n.rb_lt,g=n.rb_gt,E=n.slice,M=n.to_a,q=n.return_val,m=n.eqeq,u=n.not,d=n.rb_le,A=n.range,h=n.send2,_=n.find_super,l=n.alias,x=[],G=n.nil,c=n.$$$;return n.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(a,$,t){var e=Y(a,$,"Module"),r=[e].concat(t),i=n.$r(r);function s(F){if(F.$$is_string)return F;var T=te.$try_convert(F,c("String"),"to_str");if(T.$$is_string)return T;T===G?W.$raise(c("TypeError"),""+F+" is not a symbol nor a string"):W.$raise(c("TypeError"),"can't convert "+F.$class()+" to String ("+F.$class()+"#to_str gives "+T.$class())}z(e,"$allocate",function(){var T=this,J=n.allocate_module(G,function(){});return T!==n.Module&&Object.setPrototypeOf(J,T.$$prototype),J}),K(e,"$initialize",function F(){var T=F.$$p||G,J=this;return F.$$p=null,T!==G?w(J,"module_eval",[],T.$to_proc()):G}),K(e,"$===",function(T){var J=this;return k(T==null)?!1:n.is_a(T,J)}),K(e,"$<",function(T){var J=this;H(j,T)||W.$raise(c("TypeError"),"compared with non class/module");var O=J,ae,le,ce;if(O===T)return!1;for(le=0,ae=n.ancestors(J),ce=ae.length;le<ce;le++)if(ae[le]===T)return!0;for(le=0,ae=n.ancestors(T),ce=ae.length;le<ce;le++)if(ae[le]===J)return!1;return G}),K(e,"$<=",function(T){var J=this,O=G;return k(O=J["$equal?"](T))?O:R(J,T)}),K(e,"$>",function(T){var J=this;return H(j,T)||W.$raise(c("TypeError"),"compared with non class/module"),R(T,J)}),K(e,"$>=",function(T){var J=this,O=G;return k(O=J["$equal?"](T))?O:g(J,T)}),K(e,"$<=>",function(T){var J=this,O=G;return J===T?0:!H(j,T)||(O=R(J,T),k(O["$nil?"]()))?G:k(O)?-1:1}),K(e,"$alias_method",function(T,J){var O=this;return Z(O),T=y(T,c("String"),"to_str"),J=y(J,c("String"),"to_str"),n.alias(O,T,J),O}),K(e,"$alias_native",function(T,J){var O=this;return J==null&&(J=T),Z(O),n.alias_native(O,T,J),O},-2),K(e,"$ancestors",function(){var T=this;return n.ancestors(T)}),K(e,"$append_features",function(T){var J=this;return Z(T),n.append_features(J,T),J}),K(e,"$attr_accessor",function(T){var J,O,ae=this;return J=E(arguments),O=J,w(ae,"attr_reader",M(O)),w(ae,"attr_writer",M(O))},-1),K(e,"$attr",function(T){var J,O,ae=this;return J=E(arguments),O=J,O.length==2&&(O[1]===!0||O[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),O[1]?ae.$attr_accessor(O[0]):ae.$attr_reader(O[0]),G):w(ae,"attr_reader",M(O))},-1),K(e,"$attr_reader",function(T){var J,O,ae=this;J=E(arguments),O=J,Z(ae);for(var le=ae.$$prototype,ce=O.length-1;ce>=0;ce--){var de=O[ce],he=ie(de),ve=C(de),me=ee(ve);n.prop(le,ve,G),me.$$parameters=[],me.$$arity=0,n.defn(ae,he,me)}return G},-1),K(e,"$attr_writer",function(T){var J,O,ae=this;J=E(arguments),O=J,Z(ae);for(var le=ae.$$prototype,ce=O.length-1;ce>=0;ce--){var de=O[ce],he=ie(de+"="),ve=C(de),me=V(ve);me.$$parameters=[["req"]],me.$$arity=1,n.prop(le,ve,G),n.defn(ae,he,me)}return G},-1),K(e,"$autoload",function(T,J){var O=this;return Z(O),i("Opal")["$const_name?"](T)||W.$raise(c("NameError"),"autoload must be constant name: "+T),J==""&&W.$raise(c("ArgumentError"),"empty file name"),O.$$const.hasOwnProperty(T)||(O.$$autoload||(O.$$autoload={}),n.const_cache_version++,O.$$autoload[T]={path:J,loaded:!1,required:!1,success:!1,exception:!1},O.$const_added&&!O.$const_added.$$pristine&&O.$const_added(T)),G}),K(e,"$autoload?",function(T){var J=this;if(J.$$autoload&&J.$$autoload[T]&&!J.$$autoload[T].required&&!J.$$autoload[T].success)return J.$$autoload[T].path;for(var O=J.$ancestors(),ae=0,le=O.length;ae<le;ae++)if(O[ae].$$autoload&&O[ae].$$autoload[T]&&!O[ae].$$autoload[T].required&&!O[ae].$$autoload[T].success)return O[ae].$$autoload[T].path;return G}),K(e,"$class_variables",function(){var T=this;return Object.keys(n.class_variables(T))}),K(e,"$class_variable_get",function(T){var J=this;return T=te["$class_variable_name!"](T),n.class_variable_get(J,T,!1)}),K(e,"$class_variable_set",function(T,J){var O=this;return Z(O),T=te["$class_variable_name!"](T),n.class_variable_set(O,T,J)}),K(e,"$class_variable_defined?",function(T){var J=this;return T=te["$class_variable_name!"](T),n.class_variables(J).hasOwnProperty(T)}),K(e,"$const_added",q(G)),te.$pristine(e,"const_added"),K(e,"$remove_class_variable",function(T){var J=this;if(Z(J),T=te["$class_variable_name!"](T),n.hasOwnProperty.call(J.$$cvars,T)){var O=J.$$cvars[T];return delete J.$$cvars[T],O}else W.$raise(c("NameError"),"cannot remove "+T+" for "+J)}),K(e,"$constants",function(T){var J=this;return T==null&&(T=!0),n.constants(J,T)},-1),z(e,"$constants",function(T){var J=this;if(T==null){var O=(J.$$nesting||[]).concat(I),ae,le={},ce,de;for(ce=0,de=O.length;ce<de;ce++)for(ae in O[ce].$$const)le[ae]=!0;return Object.keys(le)}else return n.constants(J,T)},-1),z(e,"$nesting",function(){var T=this;return T.$$nesting||[]}),K(e,"$const_defined?",function(T,J){var O=this;J==null&&(J=!0),T=i("Opal")["$const_name!"](T),k(T["$=~"](c(te,"CONST_NAME_REGEXP")))||W.$raise(c("NameError").$new("wrong constant name "+T,T));var ae,le=[O],ce,de;for(J&&(le=le.concat(n.ancestors(O)),O.$$is_module&&(le=le.concat([I]).concat(n.ancestors(I)))),ce=0,de=le.length;ce<de;ce++)if(ae=le[ce],ae.$$const[T]!=null||ae.$$autoload&&ae.$$autoload[T]&&!ae.$$autoload[T].required&&!ae.$$autoload[T].success)return!0;return!1},-2),K(e,"$const_get",function(T,J){var O=this;return J==null&&(J=!0),T=i("Opal")["$const_name!"](T),T.indexOf("::")===0&&T!=="::"&&(T=T.slice(2)),k(T.indexOf("::")!=-1&&T!="::")?w(T.$split("::"),"inject",[O],function(le,ce){return le==null&&(le=G),ce==null&&(ce=G),le.$const_get(ce)}):(k(T["$=~"](c(te,"CONST_NAME_REGEXP")))||W.$raise(c("NameError").$new("wrong constant name "+T,T)),J?n.$$([O],T):n.const_get_local(O,T))},-2),K(e,"$const_missing",function(T){var J=this,O=G;return O=m(J,I)?T:""+J+"::"+T,W.$raise(c("NameError").$new("uninitialized constant "+O,T))}),K(e,"$const_set",function(T,J){var O=this;return Z(O),T=te["$const_name!"](T),(k(T["$!~"](c(te,"CONST_NAME_REGEXP")))||k(T["$start_with?"]("::")))&&W.$raise(c("NameError").$new("wrong constant name "+T,T)),P(O,T,J),J}),K(e,"$public_constant",q(G)),K(e,"$define_method",function F(T,J){var O=F.$$p||G,ae=this,le=G,ce=G,de=G;return F.$$p=null,Z(ae),J===void 0&&O===G&&W.$raise(c("ArgumentError"),"tried to create a Proc object without a block"),T=s(T),k(J!==void 0)&&(O=H(c("Proc"),le=J)?J:H(c("Method"),le)?J.$to_proc().$$unbound:H(c("UnboundMethod"),le)?n.wrap_method_body(J.$$method):W.$raise(c("TypeError"),"wrong argument type "+J.$class()+" (expected Proc/Method/UnboundMethod)"),k(!J.$$is_proc)&&(ce=J.$owner(),k(ce.$$is_class)&&u(d(ae,ce))&&(de=k(ce.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+ce,W.$raise(c("TypeError"),de)))),typeof Proxy<"u"&&(O.$$proxy_target=O,O=new Proxy(O,{apply:function(he,ve,me){var be=he.$$jsid,$e=he.$$is_lambda;he.$$jsid=T,he.$$is_lambda=!0;try{return he.apply(ve,me)}catch(N){if(N===he.$$brk||N===he.$$ret)return N.$v;throw N}finally{he.$$jsid=be,he.$$is_lambda=$e}}})),O.$$jsid=T,O.$$s=null,O.$$def=O,O.$$define_meth=!0,n.defn(ae,ie(T),O)},-2),K(e,"$freeze",function(){var T=this;return k(T["$frozen?"]())?T:(T.hasOwnProperty("$$base_module")||B(T,"$$base_module",null),p(T))}),K(e,"$remove_method",function(T){var J,O,ae=this;J=E(arguments),O=J;for(var le=0;le<O.length;le++){var ce=s(O[le]);Z(ae),n.rdef(ae,"$"+ce)}return ae},-1),K(e,"$singleton_class?",function(){var T=this;return!!T.$$is_singleton}),K(e,"$include",function(T){var J,O,ae=this;J=E(arguments),O=J;for(var le=O.length-1;le>=0;le--){var ce=O[le];ce.$$is_module||W.$raise(c("TypeError"),"wrong argument type "+ce.$class()+" (expected Module)"),ce.$append_features(ae),ce.$included(ae)}return ae},-1),K(e,"$included_modules",function(){var T=this;return n.included_modules(T)}),K(e,"$include?",function(T){var J=this;T.$$is_module||W.$raise(c("TypeError"),"wrong argument type "+T.$class()+" (expected Module)");var O,ae,le,ce=n.ancestors(J);for(O=0,ae=ce.length;O<ae;O++)if(le=ce[O],le===T&&le!==J)return!0;return!1}),K(e,"$instance_method",function(T){var J=this,O=J.$$prototype[ie(T)];return(!O||O.$$stub)&&W.$raise(c("NameError").$new("undefined method `"+T+"' for class `"+J.$name()+"'",T)),c("UnboundMethod").$new(J,O.$$owner||J,O,T)}),K(e,"$instance_methods",function(T){var J=this;return T==null&&(T=!0),k(T)?n.instance_methods(J):n.own_instance_methods(J)},-1),K(e,"$included",q(G)),K(e,"$extended",q(G)),K(e,"$extend_object",function(T){return Z(T),G}),K(e,"$method_added",function(T){return E(arguments),G},-1),K(e,"$method_removed",function(T){return E(arguments),G},-1),K(e,"$method_undefined",function(T){return E(arguments),G},-1),K(e,"$module_eval",function F(T){var J=F.$$p||G,O,ae,le,ce=this,de=G,he=G,ve=G,me=G,be=G,$e=G;F.$$p=null,O=E(arguments),ae=O,k(J["$nil?"]())&&k(!!n.compile)?(k(A(1,3,!1)["$cover?"](ae.$size()))||W.$raise(c("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(M(ae)),de=le[0]==null?G:le[0],he=le[1]==null?G:le[1],le[2]==null||le[2],ve=new Map([["file",k(me=he)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),$e=te.$compile(de,be),J=w(W,"proc",[],function X(){var Q=X.$$s==null?this:X.$$s;return new Function("Opal,self","return "+$e)(n,Q)},{$$s:ce})):k(ae["$any?"]())&&W.$raise(c("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var N=J.$$s,D;return J.$$s=null,D=J.apply(ce,[ce]),J.$$s=N,D},-1),K(e,"$module_exec",function F(T){var J=F.$$p||G,O,ae,le=this;F.$$p=null,O=E(arguments),ae=O,J===G&&W.$raise(c("LocalJumpError"),"no block given");var ce=J.$$s,de;return J.$$s=null,de=J.apply(le,ae),J.$$s=ce,de},-1),K(e,"$method_defined?",function(T){var J=this,O=J.$$prototype[ie(T)];return!!O&&!O.$$stub}),K(e,"$module_function",function(T){var J,O,ae=this;if(J=E(arguments),O=J,Z(ae),O.length===0)return ae.$$module_function=!0,G;for(var le=0,ce=O.length;le<ce;le++){var de=O[le],he=ie(de),ve=ae.$$prototype[he];n.defs(ae,he,ve)}return O.length===1?O[0]:O},-1),K(e,"$name",function(){var T=this;if(T.$$full_name)return T.$$full_name;for(var J=[],O=T;O;){if(O.$$name===G||O.$$name==null)return G;if(J.unshift(O.$$name),O=O.$$base_module,O===I)break}return J.length===0?G:T.$$full_name=J.join("::")}),K(e,"$prepend",function(T){var J,O,ae=this;J=E(arguments),O=J,O.length===0&&W.$raise(c("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=O.length-1;le>=0;le--){var ce=O[le];ce.$$is_module||W.$raise(c("TypeError"),"wrong argument type "+ce.$class()+" (expected Module)"),ce.$prepend_features(ae),ce.$prepended(ae)}return ae},-1),K(e,"$prepend_features",function(T){var J=this;return Z(T),J.$$is_module||W.$raise(c("TypeError"),"wrong argument type "+J.$class()+" (expected Module)"),n.prepend_features(J,T),J}),K(e,"$prepended",q(G)),K(e,"$remove_const",function(T){var J=this;return Z(J),n.const_remove(J,T)}),K(e,"$to_s",function(){var T=this,J=G;return k(J=n.Module.$name.call(T))?J:"#<"+(T.$$is_module?"Module":"Class")+":0x"+T.$__id__().$to_s(16)+">"}),K(e,"$undef_method",function(T){var J,O,ae=this;J=E(arguments),O=J;for(var le=0;le<O.length;le++){var ce=s(O[le]);Z(ae),n.udef(ae,"$"+ce)}return ae},-1),K(e,"$instance_variables",function(){var T=this,J=G;J=(n.Module.$$nesting=r,T.$constants());var O=[];return L(T,function(ae){ae!=="constructor"&&!J["$include?"](ae)&&O.push("@"+ae)}),O});function o(F,T){var J,O=n.own_instance_methods(F);for(J=0;J<O.length;J++){var ae=O[J],le=ie(ae),ce=F.$$prototype[le],de=n.wrap_method_body(ce);de.$$jsid=ae,n.defn(T,le,de)}}function v(F,T){for(var J=F.$$own_included_modules,O=J.length-1;O>=0;O--)n.append_features(J[O],T)}function S(F,T){for(var J=F.$$own_prepended_modules,O=J.length-1;O>=0;O--)n.prepend_features(J[O],T)}return K(e,"$initialize_copy",function(T){var J=this;return o(T,J),v(T,J),S(T,J),J.$$cloned_from=T.$$cloned_from.concat(T),J.$copy_class_variables(T),J.$copy_constants(T)}),K(e,"$initialize_dup",function F(T){var J=F.$$p||G,O=this;return F.$$p=null,h(O,_(O,"initialize_dup",F,!1,!0),"initialize_dup",[T],J),O.$copy_singleton_methods(T)}),K(e,"$copy_class_variables",function(T){var J=this;for(var O in T.$$cvars)J.$$cvars[O]=T.$$cvars[O]}),K(e,"$copy_constants",function(T){var J=this,O,ae=T.$$const;for(O in ae)P(J,O,ae[O])}),K(e,"$refine",function F(T){var J=F.$$p||G,O,ae=this,le=G,ce=G,de=G;return F.$$p=null,O=[ae,G,G],le=O[0],ce=O[1],de=O[2],de=n.id(T),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?ce=ae.$$refine_modules[de]=c("Refinement").$new():ce=ae.$$refine_modules[de],ce.refinement_module=le,ce.refined_class=T,w(ce,"class_exec",[],J.$to_proc()),ce}),K(e,"$refinements",function(){var T=this,J=T.$$refine_modules,O=new Map;if(typeof J>"u")return O;for(var ae in J)O["$[]="](J[ae].refined_class,J[ae]);return O}),K(e,"$using",function(T){return W.$raise("Module#using is not permitted in methods")}),l(e,"class_eval","module_eval"),l(e,"class_exec","module_exec"),l(e,"inspect","to_s")}("::",null,x),function(a,$){var t=Y(a,$,"Refinement"),e=t.$$prototype;return e.refinement_module=e.refined_class=G,t.$attr_reader("refined_class"),K(t,"$inspect",function r(){var i=r.$$p||G,s=this;return r.$$p=null,k(s.refinement_module)?"#<refinement:"+s.refined_class.$inspect()+"@"+s.refinement_module.$inspect()+">":h(s,_(s,"inspect",r,!1,!0),"inspect",[],i)})}("::",j)};Opal.modules["corelib/class"]=function(n){var k=n.klass,y=n.send,P=n.defs,I=n.def,ee=n.ensure_kwargs,V=n.hash_get,C=n.eqeq,Z=n.truthy,p=n.rb_plus,B=n.return_val,ie=n.slice,L=n.send2,Y=n.find_super,te=n.Kernel,W=n.alias,z=n.top,w=[],K=n.nil,H=n.$$$;return n.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),z.$require("corelib/module"),function(j,R,g){var E=k(j,R,"Class"),M=[E].concat(g),q=n.$r(M);return P(E,"$new",function m(u){var d=m.$$p||K;if(m.$$p=null,u==null&&(u=q("Object")),!u.$$is_class)throw n.TypeError.$new("superclass must be a Class");var A=n.allocate_class(K,u);return u.$inherited(A),d!==K&&y(A,"class_eval",[],d.$to_proc()),A},-1),I(E,"$allocate",function(){var u=this,d=new u.$$constructor;return d.$$id=n.uid(),d}),I(E,"$clone",function(u){var d,A=this,h=K;return u=ee(u),d=V(u,"freeze"),d==null&&(d=K),Z(d["$nil?"]())||C(d,!0)||C(d,!1)||A.$raise(q("ArgumentError"),"unexpected value for freeze: "+d.$class()),h=n.allocate_class(K,A.$$super),h.$copy_instance_variables(A),h.$copy_singleton_methods(A),h.$initialize_clone(A,new Map([["freeze",d]])),(C(d,!0)||Z(d["$nil?"]())&&Z(A["$frozen?"]()))&&h.$freeze(),h},-1),I(E,"$dup",function(){var u=this,d=K;return d=n.allocate_class(K,u.$$super),d.$copy_instance_variables(u),d.$initialize_dup(u),d}),I(E,"$descendants",function(){var u=this;return p(u.$subclasses(),y(u.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),I(E,"$inherited",B(K)),I(E,"$new",function m(u){var d=m.$$p||K,A,h,_=this;m.$$p=null,A=ie(arguments),h=A;var l=_.$allocate();return n.send(l,l.$initialize,h,d),l},-1),I(E,"$subclasses",function(){var u=this;if(typeof WeakRef<"u"){var d,A,h=[];for(d=0;d<u.$$subclasses.length;d++)A=u.$$subclasses[d].deref(),A!==void 0&&h.push(A);return h}else return u.$$subclasses}),I(E,"$superclass",function(){var u=this;return u.$$super||K}),I(E,"$to_s",function m(){m.$$p;var u=this;m.$$p=null;var d=u.$$singleton_of;return d&&d.$$is_a_module?"#<Class:"+d.$name()+">":d?"#<Class:#<"+d.$$class.$name()+":0x"+n.id(d).$to_s(16)+">>":L(u,Y(u,"to_s",m,!1,!0),"to_s",[],null)}),I(E,"$attached_object",function(){var u=this;if(u.$$singleton_of!=null)return u.$$singleton_of;te.$raise(H("TypeError"),"`"+u+"' is not a singleton class")}),W(E,"inspect","to_s")}("::",null,w)};Opal.modules["corelib/basic_object"]=function(n){var k=n.klass,y=n.slice,P=n.def,I=n.alias,ee=n.return_val,V=n.Opal,C=n.truthy,Z=n.range,p=n.Kernel,B=n.to_a,ie=n.send,L=n.eqeq,Y=n.rb_ge,te=n.nil,W=n.$$$;return n.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(z,w){var K=k(z,w,"BasicObject");return P(K,"$initialize",function(j){return y(arguments),te},-1),P(K,"$==",function(j){var R=this;return R===j}),P(K,"$eql?",function(j){var R=this;return R["$=="](j)}),I(K,"equal?","=="),P(K,"$__id__",function(){var j=this;return j.$$id!=null||n.prop(j,"$$id",n.uid()),j.$$id}),P(K,"$__send__",function H(j,R){var g=H.$$p||te,E,M,q=this;H.$$p=null,E=y(arguments,1),M=E,j.$$is_string||q.$raise(W("TypeError"),""+q.$inspect()+" is not a symbol nor a string");var m=q[n.jsid(j)];return m?(g!==te&&(m.$$p=g),m.apply(q,M)):(g!==te&&(q.$method_missing.$$p=g),q.$method_missing.apply(q,[j].concat(M)))},-2),P(K,"$!",ee(!1)),V.$pristine("!"),P(K,"$!=",function(j){var R=this;return R["$=="](j)["$!"]()}),P(K,"$instance_eval",function H(j){var R=H.$$p||te,g,E,M,q=this,m=te,u=te,d=te,A=te,h=te,_=te;if(H.$$p=null,g=y(arguments),E=g,C(R["$nil?"]())&&C(!!n.compile))C(Z(1,3,!1)["$cover?"](E.$size()))||p.$raise(W("ArgumentError"),"wrong number of arguments (0 for 1..3)"),M=[].concat(B(E)),m=M[0]==null?te:M[0],u=M[1]==null?te:M[1],M[2]==null||M[2],d=new Map([["file",C(A=u)?A:"(eval)"],["eval",!0]]),h=new Map([["arity_check",!1]]).$merge(d),_=V.$compile(m,h),R=ie(p,"proc",[],function G(){var c=G.$$s==null?this:G.$$s;return new Function("Opal,self","return "+_)(n,c)},{$$s:q});else{if(C(R["$nil?"]())&&C(Y(E.$length(),1))&&L(E.$first()["$[]"](0),"@"))return q.$instance_variable_get(E.$first());C(E["$any?"]())&&p.$raise(W("ArgumentError"),"wrong number of arguments ("+E.$size()+" for 0)")}var l=R.$$s,x;if(R.$$s=null,q.$$is_a_module){q.$$eval=!0;try{x=R.call(q,q)}finally{q.$$eval=!1}}else x=R.call(q,q);return R.$$s=l,x},-1),P(K,"$instance_exec",function H(j){var R=H.$$p||te,g,E,M=this;H.$$p=null,g=y(arguments),E=g,C(R)||p.$raise(W("ArgumentError"),"no block given");var q=R.$$s,m;if(R.$$s=null,M.$$is_a_module){M.$$eval=!0;try{m=R.apply(M,E)}finally{M.$$eval=!1}}else m=R.apply(M,E);return R.$$s=q,m},-1),P(K,"$singleton_method_added",function(j){return y(arguments),te},-1),P(K,"$singleton_method_removed",function(j){return y(arguments),te},-1),P(K,"$singleton_method_undefined",function(j){return y(arguments),te},-1),P(K,"$method_missing",function H(j,R){H.$$p;var g,E,M=this,q=te;return H.$$p=null,g=y(arguments,1),E=g,q=V.$inspect(M),p.$raise(W("NoMethodError").$new("undefined method `"+j+"' for "+q,j,E),te,p.$caller(1))},-2),V.$pristine(K,"method_missing"),P(K,"$respond_to_missing?",function(j,R){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(n){var k=n.truthy,y=n.coerce_to,P=n.respond_to,I=n.Opal,ee=n.deny_frozen_access,V=n.freeze,C=n.freeze_props,Z=n.jsid,p=n.each_ivar,B=n.module,ie=n.return_val,L=n.def,Y=n.Kernel,te=n.gvars,W=n.slice,z=n.send,w=n.to_a,K=n.ensure_kwargs,H=n.hash_get,j=n.eqeq,R=n.rb_plus,g=n.extract_kwargs,E=n.eqeqeq,M=n.return_self,q=n.rb_le,m=n.rb_lt,u=n.Object,d=n.alias,A=n.klass,h=[],_=n.nil,l=n.$$$;return n.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(x,G){var c=B(x,"Kernel"),a=[c].concat(G),$=n.$r(a);L(c,"$=~",ie(!1)),L(c,"$!~",function(r){var i=this;return i["$=~"](r)["$!"]()}),L(c,"$===",function(r){var i=this,s=_;return k(s=i.$object_id()["$=="](r.$object_id()))?s:i["$=="](r)}),L(c,"$<=>",function(r){var i=this;i.$$comparable=!0;var s=i["$=="](r);return s&&s!==_?0:_}),L(c,"$method",function(r){var i=this,s=i[Z(r)];return(!s||s.$$stub)&&Y.$raise(l("NameError").$new("undefined method `"+r+"' for class `"+i.$class()+"'",r)),l("Method").$new(i,s.$$owner||i.$class(),s,r)}),L(c,"$methods",function(r){var i=this;return r==null&&(r=!0),k(r)?n.methods(i):n.own_methods(i)},-1),L(c,"$public_methods",function(r){var i=this;return r==null&&(r=!0),k(r)?n.methods(i):n.receiver_methods(i)},-1),L(c,"$Array",function(r){var i;return r===_?[]:r.$$is_array?r:(i=I["$coerce_to?"](r,l("Array"),"to_ary"),i!==_||(i=I["$coerce_to?"](r,l("Array"),"to_a"),i!==_)?i:[r])}),L(c,"$at_exit",function e(){var r=e.$$p||_,i=_;return te.__at_exit__==null&&(te.__at_exit__=_),e.$$p=null,te.__at_exit__=k(i=te.__at_exit__)?i:[],te.__at_exit__["$<<"](r),r}),L(c,"$caller",function(r,i){r==null&&(r=1),i==null&&(i=_);var s,o;s=new Error().$backtrace(),o=[];for(var v=r+1,S=s.length;v<S;v++)s[v].match(/runtime\.js/)||o.push(s[v]);return i!=_&&(o=o.slice(0,i)),o},-1),L(c,"$caller_locations",function(r){var i,s,o=this;return i=W(arguments),s=i,z(z(o,"caller",w(s)),"map",[],function(S){return S==null&&(S=_),l(l(l("Thread"),"Backtrace"),"Location").$new(S)})},-1),L(c,"$class",function(){var r=this;return r.$$class}),L(c,"$copy_instance_variables",function(r){var i=this,s=Object.keys(r),o,v,S;for(o=0,v=s.length;o<v;o++)S=s[o],S.charAt(0)!=="$"&&r.hasOwnProperty(S)&&(i[S]=r[S])}),L(c,"$copy_singleton_methods",function(r){var i=this,s,o,v,S;if(r.hasOwnProperty("$$meta")&&r.$$meta!==null){var F=n.get_singleton_class(r),T=n.get_singleton_class(i);for(v=Object.getOwnPropertyNames(F.$$prototype),s=0,S=v.length;s<S;s++)o=v[s],n.is_method(o)&&(T.$$prototype[o]=F.$$prototype[o]);T.$$const=Object.assign({},F.$$const),Object.setPrototypeOf(T.$$prototype,Object.getPrototypeOf(F.$$prototype))}for(s=0,v=Object.getOwnPropertyNames(r),S=v.length;s<S;s++)o=v[s],o.charAt(0)==="$"&&o.charAt(1)!=="$"&&r.hasOwnProperty(o)&&(i[o]=r[o])}),L(c,"$clone",function(r){var i,s=this,o=_;return r=K(r),i=H(r,"freeze"),i==null&&(i=_),k(i["$nil?"]())||j(i,!0)||j(i,!1)||s.$raise($("ArgumentError"),"unexpected value for freeze: "+i.$class()),o=s.$class().$allocate(),o.$copy_instance_variables(s),o.$copy_singleton_methods(s),o.$initialize_clone(s,new Map([["freeze",i]])),(j(i,!0)||k(i["$nil?"]())&&k(s["$frozen?"]()))&&o.$freeze(),o},-1),L(c,"$initialize_clone",function(r,i){var s=this;return i=K(i),H(i,"freeze"),s.$initialize_copy(r),s},-2),L(c,"$define_singleton_method",function e(r,i){var s=e.$$p||_,o=this;return e.$$p=null,z(o.$singleton_class(),"define_method",[r,i],s.$to_proc())},-2),L(c,"$dup",function(){var r=this,i=_;return i=r.$class().$allocate(),i.$copy_instance_variables(r),i.$initialize_dup(r),i}),L(c,"$initialize_dup",function(r){var i=this;return i.$initialize_copy(r)}),L(c,"$enum_for",function e(r,i){var s=e.$$p||_,o,v,S,F=this;return e.$$p=null,o=W(arguments),o.length>0&&(v=o.shift()),v==null&&(v="each"),S=o,z(l("Enumerator"),"for",[F,v].concat(w(S)),s.$to_proc())},-1),L(c,"$equal?",function(r){var i=this;return i===r}),L(c,"$exit",function(r){var i=_,s=_;for(te.__at_exit__==null&&(te.__at_exit__=_),r==null&&(r=!0),te.__at_exit__=k(i=te.__at_exit__)?i:[];!k(te.__at_exit__["$empty?"]());)s=te.__at_exit__.$pop(),s.$call();return r.$$is_boolean?r=r?0:1:r=y(r,l("Integer"),"to_int"),n.exit(r),_},-1),L(c,"$extend",function(r){var i,s,o=this;i=W(arguments),s=i,s.length==0&&o.$raise(l("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),ee(o);for(var v=o.$singleton_class(),S=s.length-1;S>=0;S--){var F=s[S];F.$$is_module||Y.$raise(l("TypeError"),"wrong argument type "+F.$class()+" (expected Module)"),F.$append_features(v),F.$extend_object(o),F.$extended(o)}return o},-1),L(c,"$freeze",function(){var r=this;return k(r["$frozen?"]())?r:typeof r=="object"?(C(r),V(r)):r}),L(c,"$frozen?",function(){var r=this;switch(typeof r){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return r.$$frozen||!1;default:return!1}}),L(c,"$gets",function(r){var i,s;return te.stdin==null&&(te.stdin=_),i=W(arguments),s=i,z(te.stdin,"gets",w(s))},-1),L(c,"$hash",function(){var r=this;return r.$__id__()}),L(c,"$initialize_copy",ie(_));var t=[];return L(c,"$inspect",function(){var r=this,i=_,s=_,o=_,v=_;return function(){try{try{return i="",s=r.$__id__(),k(t["$include?"](s))?i=" ...":(t["$<<"](s),o=!0,z(r.$instance_variables(),"each",[],function S(F){var T=S.$$s==null?this:S.$$s,J=_,O=_;return F==null&&(F=_),J=T.$instance_variable_get(F),O=$("Opal").$inspect(J),i=R(i," "+F+"="+O)},{$$s:r})),"#<"+r.$class()+":0x"+s.$to_s(16)+i+">"}catch(S){if(n.rescue(S,[$("StandardError")])){v=S;try{return"#<"+r.$class()+":0x"+s.$to_s(16)+">"}finally{n.pop_exception(S)}}else throw S}}finally{k(o)&&t.$pop()}}()}),L(c,"$instance_of?",function(r){var i=this;return!r.$$is_class&&!r.$$is_module&&Y.$raise(l("TypeError"),"class or module required"),i.$$class===r}),L(c,"$instance_variable_defined?",function(r){var i=this;return r=I["$instance_variable_name!"](r),n.hasOwnProperty.call(i,r.substr(1))}),L(c,"$instance_variable_get",function(r){var i=this;r=I["$instance_variable_name!"](r);var s=i[n.ivar(r.substr(1))];return s??_}),L(c,"$instance_variable_set",function(r,i){var s=this;return ee(s),r=I["$instance_variable_name!"](r),s[n.ivar(r.substr(1))]=i}),L(c,"$remove_instance_variable",function(r){var i=this;r=I["$instance_variable_name!"](r);var s=n.ivar(r.substr(1)),o;return i.hasOwnProperty(s)?(o=i[s],delete i[s],o):Y.$raise(l("NameError"),"instance variable "+r+" not defined")}),L(c,"$instance_variables",function(){var r=this,i=[];return p(r,function(s){s.substr(-1)==="$"&&(s=s.slice(0,s.length-1)),i.push("@"+s)}),i}),L(c,"$Integer",function(r,i,s){var o,v,S,F;o=W(arguments,1),v=g(o),v=K(v),o.length>0&&(S=o.shift()),F=H(v,"exception"),F==null&&(F=!0);var T,J,O;if(F=k(F),!r.$$is_string){if(S!==void 0)if(F)Y.$raise(l("ArgumentError"),"base specified for non string value");else return _;if(r===_)if(F)Y.$raise(l("TypeError"),"can't convert nil into Integer");else return _;if(r.$$is_number){if(r===1/0||r===-1/0||isNaN(r))if(F)Y.$raise(l("FloatDomainError"),r);else return _;return Math.floor(r)}if(r["$respond_to?"]("to_int")&&(T=r.$to_int(),n.is_a(T,l("Integer")))||r["$respond_to?"]("to_i")&&(T=r.$to_i(),n.is_a(T,l("Integer"))))return T;if(F)Y.$raise(l("TypeError"),"can't convert "+r.$class()+" into Integer");else return _}if(r==="0")return 0;if(S===void 0)S=0;else if(S=y(S,l("Integer"),"to_int"),S===1||S<0||S>36)if(F)Y.$raise(l("ArgumentError"),"invalid radix "+S);else return _;if(J=r.toLowerCase(),J=J.replace(/(\d)_(?=\d)/g,"$1"),J=J.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,le,ce){switch(ce){case"0b":if(S===0||S===2)return S=2,le;case"0":case"0o":if(S===0||S===8)return S=8,le;case"0d":if(S===0||S===10)return S=10,le;case"0x":if(S===0||S===16)return S=16,le}if(F)Y.$raise(l("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return _}),S=S===0?10:S,O="0-"+(S<=10?S-1:"9a-"+String.fromCharCode(97+(S-11))),!new RegExp("^\\s*[+-]?["+O+"]+\\s*$").test(J))if(F)Y.$raise(l("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return _;if(T=parseInt(J,S),isNaN(T))if(F)Y.$raise(l("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return _;return T},-2),L(c,"$Float",function(r,i){var s;i=K(i),s=H(i,"exception"),s==null&&(s=!0);var o;if(s=k(s),r===_)if(s)Y.$raise(l("TypeError"),"can't convert nil into Float");else return _;if(r.$$is_string){if(o=r.toString(),o=o.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(o))return Y.$Integer(o);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(o))if(s)Y.$raise(l("ArgumentError"),'invalid value for Float(): "'+r+'"');else return _;return parseFloat(o)}return s?I["$coerce_to!"](r,l("Float"),"to_f"):y(r,l("Float"),"to_f")},-2),L(c,"$Hash",function(r){return k(r["$nil?"]())||j(r,[])?new Map:E(l("Hash"),r)?r:I["$coerce_to!"](r,l("Hash"),"to_hash")}),L(c,"$is_a?",function(r){var i=this;return!r.$$is_class&&!r.$$is_module&&Y.$raise(l("TypeError"),"class or module required"),n.is_a(i,r)}),L(c,"$itself",M),L(c,"$lambda",function e(){var r=e.$$p||_;return e.$$p=null,n.lambda(r)}),L(c,"$load",function(r){return r=I["$coerce_to!"](r,l("String"),"to_str"),n.load(r)}),L(c,"$loop",function e(){var r=e.$$p||_,i=this,s=_;if(e.$$p=null,r===_)return z(i,"enum_for",["loop"],function(){return l(l("Float"),"INFINITY")});for(;k(!0);)try{n.yieldX(r,[])}catch(o){if(n.rescue(o,[l("StopIteration")])){s=o;try{return s.$result()}finally{n.pop_exception(o)}}else throw o}return i}),L(c,"$nil?",ie(!1)),L(c,"$printf",function(r){var i,s,o=this,v=_;return te.stdout==null&&(te.stdout=_),i=W(arguments),s=i,k(s["$empty?"]())||(v=k(s[0].$$is_string)?te.stdout:s.$shift(),v.$write(z(o,"format",w(s)))),_},-1),L(c,"$proc",function e(){var r=e.$$p||_;return e.$$p=null,k(r)||Y.$raise(l("ArgumentError"),"tried to create Proc object without a block"),r.$$is_lambda=!1,r}),L(c,"$puts",function(r){var i,s;return te.stdout==null&&(te.stdout=_),i=W(arguments),s=i,z(te.stdout,"puts",w(s))},-1),L(c,"$p",function(r){var i,s;return i=W(arguments),s=i,z(s,"each",[],function(v){return te.stdout==null&&(te.stdout=_),v==null&&(v=_),te.stdout.$puts(v.$inspect())}),k(q(s.$length(),1))?s["$[]"](0):s},-1),L(c,"$print",function(r){var i,s;return te.stdout==null&&(te.stdout=_),i=W(arguments),s=i,z(te.stdout,"print",w(s))},-1),L(c,"$readline",function(r){var i,s;return te.stdin==null&&(te.stdin=_),i=W(arguments),s=i,z(te.stdin,"readline",w(s))},-1),L(c,"$warn",function(r,i){var s,o,v,S,F,T,J=this,O=_;return te.VERBOSE==null&&(te.VERBOSE=_),te.stderr==null&&(te.stderr=_),s=W(arguments),o=g(s),o=K(o),v=s,S=H(o,"uplevel"),S==null&&(S=_),k(S)&&(S=I["$coerce_to!"](S,l("Integer"),"to_str"),k(m(S,0))&&Y.$raise(l("ArgumentError"),"negative level ("+S+")"),O=(F=(T=J.$caller(R(S,1),1).$first(),T===_||T==null?_:T.$split(":in `")),F===_||F==null?_:F.$first()),k(O)&&(O=""+O+": "),v=z(v,"map",[],function(le){return le==null&&(le=_),""+O+"warning: "+le})),k(te.VERBOSE["$nil?"]())||k(v["$empty?"]())?_:z(te.stderr,"puts",w(v))},-1),L(c,"$raise",function(r,i,s){throw te["!"]==null&&(te["!"]=_),i==null&&(i=_),s==null&&(s=_),r==null&&te["!"]!==_?te["!"]:(r==null?r=l("RuntimeError").$new(""):P(r,"$to_str")?r=l("RuntimeError").$new(r.$to_str()):r.$$is_class&&P(r,"$exception")?r=r.$exception(i):r.$$is_exception||(r=l("TypeError").$new("exception class/object expected")),s!==_&&r.$set_backtrace(s),te["!"]!==_&&n.exceptions.push(te["!"]),te["!"]=r,r)},-1),L(c,"$rand",function(r){return r===void 0?l(l("Random"),"DEFAULT").$rand():(r.$$is_number&&(r<0&&(r=Math.abs(r)),r%1!==0&&(r=r.$to_i()),r===0&&(r=void 0)),l(l("Random"),"DEFAULT").$rand(r))},-1),L(c,"$respond_to?",function(r,i){var s=this;i==null&&(i=!1);var o=s[Z(r)];return typeof o=="function"&&!o.$$stub?!0:s["$respond_to_missing?"].$$pristine===!0?!1:s["$respond_to_missing?"](r,i)},-2),L(c,"$respond_to_missing?",function(r,i){return!1},-2),I.$pristine(c,"respond_to?","respond_to_missing?"),L(c,"$require",function(r){return typeof r!="string"&&n.String&&n.Array&&(r=I["$coerce_to!"](r,l("String"),"to_str")),n.require(r)}),L(c,"$require_relative",function(r){return I["$try_convert!"](r,l("String"),"to_str"),r=l("File").$expand_path(l("File").$join(n.current_file,"..",r)),n.require(r)}),L(c,"$require_tree",function(r,i){var s;i=K(i),s=H(i,"autoload"),s==null&&(s=!1);var o=[];r=l("File").$expand_path(r),r=n.normalize(r),r==="."&&(r="");for(var v in n.modules)v["$start_with?"](r)&&(s?o.push([v,!0]):o.push([v,n.require(v)]));return o},-2),L(c,"$singleton_class",function(){var r=this;return n.get_singleton_class(r)}),L(c,"$sleep",function(r){r==null&&(r=_),r===_&&Y.$raise(l("TypeError"),"can't convert NilClass into time interval"),r.$$is_number||Y.$raise(l("TypeError"),"can't convert "+r.$class()+" into time interval"),r<0&&Y.$raise(l("ArgumentError"),"time interval must be positive");for(var i=n.global.performance?function(){return performance.now()}:function(){return new Date},s=i();i()-s<=r*1e3;);return Math.round(r)},-1),L(c,"$srand",function(r){return r==null&&(r=$("Random").$new_seed()),l("Random").$srand(r)},-1),L(c,"$String",function(r){var i=_;return k(i=I["$coerce_to?"](r,l("String"),"to_str"))?i:I["$coerce_to!"](r,l("String"),"to_s")}),L(c,"$tap",function e(){var r=e.$$p||_,i=this;return e.$$p=null,n.yield1(r,i),i}),L(c,"$to_proc",M),L(c,"$to_s",function(){var r=this;return"#<"+r.$class()+":0x"+r.$__id__().$to_s(16)+">"}),L(c,"$catch",function e(r){var i=e.$$p||_,s=_,o=_;e.$$p=null,r==null&&(r=_);try{return r=k(s=r)?s:u.$new(),n.yield1(i,r)}catch(v){if(n.rescue(v,[l("UncaughtThrowError")])){o=v;try{return j(o.$tag(),r)?o.$value():Y.$raise()}finally{n.pop_exception(v)}}else throw v}},-1),L(c,"$throw",function(r,i){return i==null&&(i=_),Y.$raise(l("UncaughtThrowError").$new(r,i))},-2),L(c,"$open",function e(r){var i=e.$$p||_,s,o;return e.$$p=null,s=W(arguments),o=s,z(l("File"),"open",w(o),i.$to_proc())},-1),L(c,"$yield_self",function e(){var r=e.$$p||_,i=this;return e.$$p=null,r===_?z(i,"enum_for",["yield_self"],ie(1)):n.yield1(r,i)}),d(c,"fail","raise"),d(c,"kind_of?","is_a?"),d(c,"object_id","__id__"),d(c,"public_send","__send__"),d(c,"send","__send__"),d(c,"then","yield_self"),d(c,"to_enum","enum_for")}("::",h),function(x,G){var c=A(x,G,"Object");return delete u.$$prototype.$require,c.$include(Y)}("::",null)};Opal.modules["corelib/main"]=function(n){var k=n.return_val,y=n.def,P=n.Object,I=n.slice,ee=n.Kernel,V=n.top;return n.nil,n.add_stubs("include,raise"),function(C,Z){return y(C,"$to_s",k("main")),y(C,"$include",function(B){return P.$include(B)}),y(C,"$autoload",function(B){var ie,L;return ie=I(arguments),L=ie,n.Object.$autoload.apply(n.Object,L)},-1),y(C,"$using",function(B){return ee.$raise("main.using is permitted only at toplevel")})}(n.get_singleton_class(V))};Opal.modules["corelib/error/errno"]=function(n){var k=n.module,y=n.truthy,P=n.rb_plus,I=n.send2,ee=n.find_super,V=n.def,C=n.klass,Z=n.nil,p=n.$$$;return n.add_stubs("+,errno,class,attr_reader"),function(B,ie){var L=k(B,"Errno"),Y=Z,te=Z;Y=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],te=Z;var W;for(W=0;W<Y.length;W++)(function(){var z=Y[W][0],w=Y[W][1],K=Y[W][2];te=n.klass(L,n.SystemCallError,z),te.errno=K,function(H,j){return V(H,"$new",function R(g){R.$$p;var E=this,M=Z;return R.$$p=null,g==null&&(g=Z),M=w,y(g)&&(M=P(M," - "+g)),I(E,ee(E,"new",R,!1,!0),"new",[M],null)},-1)}(n.get_singleton_class(te))})()}("::"),function(B,ie,L){var Y=C(B,ie,"SystemCallError");return V(Y,"$errno",function(){var W=this;return W.$class().$errno()}),function(te,W){return te.$attr_reader("errno")}(n.get_singleton_class(Y))}("::",p("StandardError"))};Opal.modules["corelib/error"]=function(n){var k=n.klass,y=n.slice,P=n.gvars,I=n.defs,ee=n.send,V=n.to_a,C=n.def,Z=n.send2,p=n.find_super,B=n.truthy,ie=n.Kernel,L=n.not,Y=n.rb_plus,te=n.eqeq,W=n.Object,z=n.ensure_kwargs,w=n.hash_get,K=n.module,H=[],j=n.nil,R=n.$$$;return n.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(g,E,M){var q=k(g,E,"Exception"),m=[q].concat(M),u=n.$r(m),d=q.$$prototype;d.message=j,n.prop(q.$$prototype,"$$is_exception",!0);var A;Error.stackTraceLimit=100,I(q,"$new",function(l){var x,G,c=this;P["!"]==null&&(P["!"]=j),x=y(arguments),G=x;var a=G.length>0?G[0]:j,$=new c.$$constructor(a);return $.name=c.$$name,$.message=a,$.cause=P["!"],n.send($,$.$initialize,G),n.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace($,A),$},-1),A=q.$new,I(q,"$exception",function(l){var x,G,c=this;return x=y(arguments),G=x,ee(c,"new",V(G))},-1),C(q,"$initialize",function(l){var x,G,c=this;return x=y(arguments),G=x,c.message=G.length>0?G[0]:j},-1),C(q,"$copy_instance_variables",function _(l){var x=_.$$p||j,G=this;_.$$p=null,Z(G,p(G,"copy_instance_variables",_,!1,!0),"copy_instance_variables",[l],x),G.message=l.message,G.cause=l.cause,G.stack=l.stack});function h(_){for(var l=[],x,G=0;G<_.length;G++){var c=_[G];!c||!c.$$is_string||((x=c.match(/^    at (.*?) \((.*?)\)$/))?l.push(x[2]+":in `"+x[1]+"'"):(x=c.match(/^    at (.*?)$/))?l.push(x[1]+":in `undefined'"):(x=c.match(/^  from (.*?)$/))?l.push(x[1]):(x=c.match(/^(.*?)@(.*?)$/))&&l.push(x[2]+":in `"+x[1]+"'"))}return l}return C(q,"$backtrace",function(){var l=this;if(l.backtrace)return l.backtrace;var x=l.stack;return typeof x<"u"&&x.$$is_string?l.backtrace=h(x.split(`
`)):x?l.backtrace=h(x):[]}),C(q,"$backtrace_locations",function(){var l,x=this;return x.backtrace_locations||(x.backtrace_locations=(l=x.$backtrace(),l===j||l==null?j:ee(l,"map",[],function(c){return c==null&&(c=j),R(R(R("Thread"),"Backtrace"),"Location").$new(c)}))),x.backtrace_locations}),C(q,"$cause",function(){var l=this;return l.cause||j}),C(q,"$exception",function(l){var x=this;if(l==null&&(l=j),l===j||x===l)return x;var G=x.$clone();return G.message=l,x.backtrace&&(G.backtrace=x.backtrace.$dup()),G.stack=x.stack,G.cause=x.cause,G},-1),C(q,"$message",function(){var l=this;return l.$to_s()}),C(q,"$full_message",function(l){var x,G=this,c=j,a=j,$=j,t=j,e=j,r=j,i=j,s=j,o=j;return P.stderr==null&&(P.stderr=j),l==null&&(l=j),B(u("Hash","skip_raise")?"constant":j)?(l=new Map([["highlight",P.stderr["$tty?"]()],["order","top"]]).$merge(B(c=l)?c:new Map),x=[l["$[]"]("highlight"),l["$[]"]("order")],a=x[0],$=x[1],B([!0,!1]["$include?"](a))||ie.$raise(R("ArgumentError"),"expected true or false as highlight: "+a),B(["top","bottom"]["$include?"]($))||ie.$raise(R("ArgumentError"),"expected :top or :bottom as order: "+$),B(a)?(t="\x1B[1;4m",e="\x1B[1m",r="\x1B[m"):t=e=r="",i=G.$backtrace().$dup(),(L(i)||B(i["$empty?"]()))&&(i=G.$caller()),s=i.$shift(),o=""+s+": ",o=Y(o,""+e+G.$to_s()+" ("+t+G.$class()+r+e+")"+r+`
`),o=Y(o,ee(i,"map",[],function(S){return S==null&&(S=j),"	from "+S+`
`}).$join()),B(G.$cause())&&(o=Y(o,G.$cause().$full_message(new Map([["highlight",a]])))),te($,"bottom")&&(o=o.$split(`
`).$reverse().$join(`
`),o=Y(""+e+"Traceback"+r+` (most recent call last):
`,o)),o):""+G.message+`
`+G.stack},-1),C(q,"$inspect",function(){var l=this,x=j;return x=l.$to_s(),B(x["$empty?"]())?l.$class().$to_s():"#<"+l.$class().$to_s()+": "+l.$to_s()+">"}),C(q,"$set_backtrace",function(l){var x=this,G=!0,c,a;if(l===j)x.backtrace=j,x.stack="";else if(l.$$is_string)x.backtrace=[l],x.stack="  from "+l;else{if(l.$$is_array){for(c=0,a=l.length;c<a;c++)if(!l[c].$$is_string){G=!1;break}}else G=!1;G===!1&&ie.$raise(R("TypeError"),"backtrace must be Array of String"),x.backtrace=l,x.stack=ee(l,"map",[],function(t){return t==null&&(t=j),Y("  from ",t)}).join(`
`)}return l}),C(q,"$to_s",function(){var l=this,x=j,G=j;return B(x=B(G=l.message)?l.message.$to_s():G)?x:l.$class().$to_s()})}("::",Error,H),k("::",R("Exception"),"ScriptError"),k("::",R("ScriptError"),"SyntaxError"),k("::",R("ScriptError"),"LoadError"),k("::",R("ScriptError"),"NotImplementedError"),k("::",R("Exception"),"SystemExit"),k("::",R("Exception"),"NoMemoryError"),k("::",R("Exception"),"SignalException"),k("::",R("SignalException"),"Interrupt"),k("::",R("Exception"),"SecurityError"),k("::",R("Exception"),"SystemStackError"),k("::",R("Exception"),"StandardError"),k("::",R("StandardError"),"EncodingError"),k("::",R("StandardError"),"ZeroDivisionError"),k("::",R("StandardError"),"NameError"),k("::",R("NameError"),"NoMethodError"),k("::",R("StandardError"),"RuntimeError"),k("::",R("RuntimeError"),"FrozenError"),k("::",R("StandardError"),"LocalJumpError"),k("::",R("StandardError"),"TypeError"),k("::",R("StandardError"),"ArgumentError"),k("::",R("ArgumentError"),"UncaughtThrowError"),k("::",R("StandardError"),"IndexError"),k("::",R("IndexError"),"StopIteration"),k("::",R("StopIteration"),"ClosedQueueError"),k("::",R("IndexError"),"KeyError"),k("::",R("StandardError"),"RangeError"),k("::",R("RangeError"),"FloatDomainError"),k("::",R("StandardError"),"IOError"),k("::",R("IOError"),"EOFError"),k("::",R("StandardError"),"SystemCallError"),k("::",R("StandardError"),"RegexpError"),k("::",R("StandardError"),"ThreadError"),k("::",R("StandardError"),"FiberError"),W.$autoload("Errno","corelib/error/errno"),function(g,E){var M=k(g,E,"FrozenError");return M.$attr_reader("receiver"),C(M,"$initialize",function q(m,u){var d;q.$$p;var A=this;return q.$$p=null,u=z(u),d=w(u,"receiver"),d==null&&(d=j),Z(A,p(A,"initialize",q,!1,!0),"initialize",[m],null),A.receiver=d},-2)}("::",R("RuntimeError")),function(g,E){var M=k(g,E,"UncaughtThrowError"),q=M.$$prototype;return q.tag=j,M.$attr_reader("tag","value"),C(M,"$initialize",function m(u,d){m.$$p;var A=this;return m.$$p=null,d==null&&(d=j),A.tag=u,A.value=d,Z(A,p(A,"initialize",m,!1,!0),"initialize",["uncaught throw "+A.tag.$inspect()],null)},-2)}("::",R("ArgumentError")),function(g,E){var M=k(g,E,"NameError");return M.$attr_reader("name"),C(M,"$initialize",function q(m,u){q.$$p;var d=this;return q.$$p=null,u==null&&(u=j),Z(d,p(d,"initialize",q,!1,!0),"initialize",[m],null),d.name=u},-2)}("::",null),function(g,E){var M=k(g,E,"NoMethodError");return M.$attr_reader("args"),C(M,"$initialize",function q(m,u,d){q.$$p;var A=this;return q.$$p=null,u==null&&(u=j),d==null&&(d=[]),Z(A,p(A,"initialize",q,!1,!0),"initialize",[m,u],null),A.args=d},-2)}("::",null),function(g,E){var M=k(g,E,"StopIteration");return M.$attr_reader("result")}("::",null),function(g,E){var M=k(g,E,"KeyError"),q=M.$$prototype;return q.receiver=q.key=j,C(M,"$initialize",function m(u,d){var A,h;m.$$p;var _=this;return m.$$p=null,d=z(d),A=w(d,"receiver"),A==null&&(A=j),h=w(d,"key"),h==null&&(h=j),Z(_,p(_,"initialize",m,!1,!0),"initialize",[u],null),_.receiver=A,_.key=h},-2),C(M,"$receiver",function(){var u=this,d=j;return B(d=u.receiver)?d:ie.$raise(R("ArgumentError"),"no receiver is available")}),C(M,"$key",function(){var u=this,d=j;return B(d=u.key)?d:ie.$raise(R("ArgumentError"),"no key is available")})}("::",null),function(g,E){var M=k(g,E,"LocalJumpError");return M.$attr_reader("exit_value","reason"),C(M,"$initialize",function q(m,u,d){q.$$p;var A=this;return q.$$p=null,u==null&&(u=j),d==null&&(d="noreason"),Z(A,p(A,"initialize",q,!1,!0),"initialize",[m],null),A.exit_value=u,A.reason=d},-2)}("::",null),function(g,E){var M=K(g,"JS"),q=[M].concat(E);return k(q[0],null,"Error"),j}("::",H)};Opal.modules["corelib/constants"]=function(n){var k=n.const_set;n.nil;var y=n.$$$;return k("::","RUBY_PLATFORM","opal"),k("::","RUBY_ENGINE","opal"),k("::","RUBY_VERSION","3.2.0"),k("::","RUBY_ENGINE_VERSION","1.8.2"),k("::","RUBY_RELEASE_DATE","2023-11-23"),k("::","RUBY_PATCHLEVEL",0),k("::","RUBY_REVISION","0"),k("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),k("::","RUBY_DESCRIPTION","opal "+y("RUBY_ENGINE_VERSION")+" ("+y("RUBY_RELEASE_DATE")+" revision "+y("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(n){var k=n.Object;return n.nil,n.add_stubs("require"),k.$require("corelib/runtime"),k.$require("corelib/helpers"),k.$require("corelib/module"),k.$require("corelib/class"),k.$require("corelib/basic_object"),k.$require("corelib/kernel"),k.$require("corelib/main"),k.$require("corelib/error"),k.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(n){var k=n.klass,y=n.Kernel,P=n.def,I=n.return_val,ee=n.ensure_kwargs,V=n.hash_get,C=n.NilClass,Z=n.slice,p=n.truthy,B=n.rb_gt,ie=n.alias,L=n.nil,Y=n.$$$;return n.add_stubs("raise,name,new,>,length,Rational,to_i"),function(te,W,z){var w=k(te,W,"NilClass");return w.$$prototype.$$meta=w,function(K,H){return P(K,"$allocate",function(){var R=this;return y.$raise(Y("TypeError"),"allocator undefined for "+R.$name())}),n.udef(K,"$new"),L}(n.get_singleton_class(w)),P(w,"$!",I(!0)),P(w,"$&",I(!1)),P(w,"$|",function(H){return H!==!1&&H!==L}),P(w,"$^",function(H){return H!==!1&&H!==L}),P(w,"$==",function(H){return H===L}),P(w,"$dup",I(L)),P(w,"$clone",function(H){return H=ee(H),V(H,"freeze"),L},-1),P(w,"$inspect",I("nil")),P(w,"$nil?",I(!0)),P(w,"$singleton_class",function(){return C}),P(w,"$to_a",function(){return[]}),P(w,"$to_h",function(){return new Map}),P(w,"$to_i",I(0)),P(w,"$to_s",I("")),P(w,"$to_c",function(){return Y("Complex").$new(0,0)}),P(w,"$rationalize",function(H){var j,R;return j=Z(arguments),R=j,p(B(R.$length(),1))&&y.$raise(Y("ArgumentError")),y.$Rational(0,1)},-1),P(w,"$to_r",function(){return y.$Rational(0,1)}),P(w,"$instance_variables",function(){return[]}),ie(w,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(n){var k=n.klass,y=n.Kernel,P=n.def,I=n.return_self,ee=n.ensure_kwargs,V=n.hash_get,C=n.slice,Z=n.truthy,p=n.send2,B=n.find_super,ie=n.to_a,L=n.alias,Y=n.nil,te=n.$$$;return n.add_stubs("raise,name,==,to_s,__id__"),function(W,z,w){var K=k(W,z,"Boolean");n.prop(K.$$prototype,"$$is_boolean",!0);for(var H=["$$class","$$meta"],j=0;j<H.length;j++)Object.defineProperty(K.$$prototype,H[j],{configurable:!0,enumerable:!1,get:function(){return this==!0?n.TrueClass:this==!1?n.FalseClass:n.Boolean}});return Object.defineProperty(K.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:Y}}),function(R,g){return P(R,"$allocate",function(){var M=this;return y.$raise(te("TypeError"),"allocator undefined for "+M.$name())}),n.udef(R,"$new"),Y}(n.get_singleton_class(K)),P(K,"$__id__",function(){var g=this;return g.valueOf()?2:0}),P(K,"$!",function(){var g=this;return g!=!0}),P(K,"$&",function(g){var E=this;return E==!0?g!==!1&&g!==Y:!1}),P(K,"$|",function(g){var E=this;return E==!0?!0:g!==!1&&g!==Y}),P(K,"$^",function(g){var E=this;return E==!0?g===!1||g===Y:g!==!1&&g!==Y}),P(K,"$==",function(g){var E=this;return E==!0===g.valueOf()}),P(K,"$singleton_class",function(){var g=this;return g.$$meta}),P(K,"$to_s",function(){var g=this;return g==!0?"true":"false"}),P(K,"$dup",I),P(K,"$clone",function(g){var E=this;return g=ee(g),V(g,"freeze"),E},-1),P(K,"$method_missing",function R(g,E){var M=R.$$p||Y,q,m,u=this;R.$$p=null,q=C(arguments,1),m=q;var d=u.$$class.$$prototype[n.jsid(g)];return Z(typeof d<"u"&&!d.$$stub)||p(u,B(u,"method_missing",R,!1,!0),"method_missing",[g].concat(ie(m)),M),n.send(u,d,m,M)},-2),P(K,"$respond_to_missing?",function(g,E){var M=this,q=M.$$class.$$prototype[n.jsid(g)];return typeof q<"u"&&!q.$$stub},-2),L(K,"eql?","=="),L(K,"equal?","=="),L(K,"inspect","to_s"),L(K,"object_id","__id__")}("::",Boolean),k("::",te("Boolean"),"TrueClass"),k("::",te("Boolean"),"FalseClass"),Y};Opal.modules["corelib/comparable"]=function(n){var k=n.truthy,y=n.module,P=n.rb_gt,I=n.rb_lt,ee=n.eqeqeq,V=n.Kernel,C=n.def,Z=n.nil,p=n.$$$;return n.add_stubs(">,<,===,raise,class,<=>,equal?"),function(B){var ie=y(B,"Comparable"),L=Z;function Y(z){return n.is_a(z,n.Integer)?z:P(z,0)?1:I(z,0)?-1:0}function te(z,w){var K;ee(Z,L=w)||ee(!0,L)||ee(!1,L)||ee(p("Integer"),L)||ee(p("Float"),L)?K=w.$inspect():K=w.$$class,V.$raise(p("ArgumentError"),"comparison of "+z.$class()+" with "+K+" failed")}function W(z,w){var K=z["$<=>"](w);return k(K)||te(z,w),Y(K)}return C(ie,"$==",function(w){var K=this,H=Z;return k(K["$equal?"](w))?!0:K["$<=>"]==n.Kernel["$<=>"]?!1:K.$$comparable?(K.$$comparable=!1,!1):k(H=K["$<=>"](w))?Y(H)==0:!1}),C(ie,"$>",function(w){var K=this;return W(K,w)>0}),C(ie,"$>=",function(w){var K=this;return W(K,w)>=0}),C(ie,"$<",function(w){var K=this;return W(K,w)<0}),C(ie,"$<=",function(w){var K=this;return W(K,w)<=0}),C(ie,"$between?",function(w,K){var H=this;return!(k(I(H,w))||k(P(H,K)))}),C(ie,"$clamp",function(w,K){var H=this;K==null&&(K=Z);var j,R;if(K===Z&&(n.is_a(w,n.Range)||V.$raise(p("TypeError"),"wrong argument type "+w.$class()+" (expected Range)"),R=w.excl,K=w.end,w=w.begin,K!==Z&&R&&V.$raise(p("ArgumentError"),"cannot clamp with an exclusive range")),w!==Z&&K!==Z&&W(w,K)>0&&V.$raise(p("ArgumentError"),"min argument must be smaller than max argument"),w!==Z){if(j=W(H,w),j==0)return H;if(j<0)return w}return K!==Z&&(j=W(H,K),j>0)?K:H},-2)}("::")};Opal.modules["corelib/regexp"]=function(n){var k=n.coerce_to,y=n.prop,P=n.freeze,I=n.klass,ee=n.const_set,V=n.send2,C=n.find_super,Z=n.def,p=n.truthy,B=n.gvars,ie=n.slice,L=n.Kernel,Y=n.Opal,te=n.alias,W=n.send,z=n.regexp,w=n.rb_plus,K=n.ensure_kwargs,H=n.hash_get,j=n.rb_ge,R=n.to_a,g=n.eqeqeq,E=n.rb_minus,M=n.return_ivar,q=[],m=n.nil,u=n.$$$;return n.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),I("::",u("StandardError"),"RegexpError"),function(d,A,h){var _=I(d,A,"Regexp"),l=[_].concat(h),x=n.$r(l);return ee(_,"IGNORECASE",1),ee(_,"EXTENDED",2),ee(_,"MULTILINE",4),n.prop(_.$$prototype,"$$is_regexp",!0),function(G,c){var a=[G].concat(c),$=n.$r(a);return Z(G,"$allocate",function t(){var e=t.$$p||m,r=this,i=m;return t.$$p=null,i=V(r,C(r,"allocate",t,!1,!0),"allocate",[],e),i.uninitialized=!0,i}),Z(G,"$escape",function(e){return e=k(e,u("String"),"to_str"),n.escape_regexp(e)}),Z(G,"$last_match",function(e){return B["~"]==null&&(B["~"]=m),e==null&&(e=m),p(e["$nil?"]())?B["~"]:p(B["~"])?B["~"]["$[]"](e):m},-1),Z(G,"$union",function(e){var r,i,s=this;r=ie(arguments),i=r;var o,v,S,F,T;if(i.length==0)return/(?!)/;if(i.length==1&&i[0].$$is_regexp)return i[0];o=i[0].$$is_array,i.length>1&&o&&L.$raise(u("TypeError"),"no implicit conversion of Array into String"),o&&(i=i[0]),F=void 0,v=[];for(var J=0;J<i.length;J++)S=i[J],S.$$is_string?v.push(s.$escape(S)):S.$$is_regexp?(T=S.$options(),F!=null&&F!=T&&L.$raise(u("TypeError"),"All expressions must use the same options"),F=T,v.push("("+S.source+")")):v.push(s.$escape(S.$to_str()));return s.$new(v.$join("|"),F)},-1),Z(G,"$new",function(e,r){if(e.$$is_regexp)return new RegExp(e);if(e=Y["$coerce_to!"](e,u("String"),"to_str"),e.charAt(e.length-1)==="\\"&&e.charAt(e.length-2)!=="\\"&&L.$raise(u("RegexpError"),"too short escape sequence: /"+e+"/"),e=e.replace("\\A","^").replace("\\z","$"),r===void 0||r["$!"]())return new RegExp(e);if(r.$$is_number){var i="";$("IGNORECASE")&r&&(i+="i"),$("MULTILINE")&r&&(i+="m"),r=i}else r="i";return new RegExp(e,r)},-2),te(G,"compile","new"),te(G,"quote","escape")}(n.get_singleton_class(_),l),Z(_,"$==",function(c){var a=this;return c instanceof RegExp&&a.toString()===c.toString()}),Z(_,"$===",function(c){var a=this;return a.$match(Y["$coerce_to?"](c,u("String"),"to_str"))!==m}),Z(_,"$=~",function(c){var a=this,$=m;return B["~"]==null&&(B["~"]=m),p($=a.$match(c))?B["~"].$begin(0):$}),Z(_,"$freeze",function(){var c=this;return p(c["$frozen?"]())?c:(c.hasOwnProperty("$$g")||y(c,"$$g",null),c.hasOwnProperty("$$gm")||y(c,"$$gm",null),P(c))}),Z(_,"$inspect",function(){var c=this,a=/^\/(.*)\/([^\/]*)$/,$=c.toString(),t=a.exec($);if(t){for(var e=t[1],r=t[2],i=e.split(""),s=i.length,o=!1,v="",S=0;S<s;S++){var F=i[S];!o&&F=="/"&&(v=v.concat("\\")),v=v.concat(F),F=="\\"?o?o=!1:o=!0:o=!1}return"/"+v+"/"+r}else return $}),Z(_,"$match",function G(c,a){var $=G.$$p||m,t=this;if(B["~"]==null&&(B["~"]=m),G.$$p=null,t.uninitialized&&L.$raise(u("TypeError"),"uninitialized Regexp"),a===void 0){if(c===m)return B["~"]=m;var e=t.exec(k(c,u("String"),"to_str"));return e?(B["~"]=u("MatchData").$new(t,e),$===m?B["~"]:n.yield1($,B["~"])):B["~"]=m}if(a=k(a,u("Integer"),"to_int"),c===m||(c=k(c,u("String"),"to_str"),a<0&&(a+=c.length,a<0)))return B["~"]=m;for(var r,i=n.global_regexp(t);;){if(r=i.exec(c),r===null)return B["~"]=m;if(r.index>=a)return B["~"]=u("MatchData").$new(i,r),$===m?B["~"]:n.yield1($,B["~"]);i.lastIndex=r.index+1}},-2),Z(_,"$match?",function(c,a){var $=this;if($.uninitialized&&L.$raise(u("TypeError"),"uninitialized Regexp"),a===void 0)return c===m?!1:$.test(k(c,u("String"),"to_str"));if(a=k(a,u("Integer"),"to_int"),c===m||(c=k(c,u("String"),"to_str"),a<0&&(a+=c.length,a<0)))return!1;var t,e=n.global_regexp($);return t=e.exec(c),!(t===null||t.index<a)},-2),Z(_,"$names",function(){var c=this;return W(c.$source().$scan(z(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),Z(_,"$named_captures",function(){var c=this;return W(W(W(c.$source().$scan(z(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function($){return $==null&&($=m),W($,"map",[],function(e){return e==null&&(e=m),w(e.$last(),1)})})}),Z(_,"$~",function(){var c=this;return B._==null&&(B._=m),c["$=~"](B._)}),Z(_,"$source",function(){var c=this;return c.source}),Z(_,"$options",function(){var c=this;c.uninitialized&&L.$raise(u("TypeError"),"uninitialized Regexp");var a=0;return c.multiline&&(a|=x("MULTILINE")),c.ignoreCase&&(a|=x("IGNORECASE")),a}),Z(_,"$casefold?",function(){var c=this;return c.ignoreCase}),te(_,"eql?","=="),te(_,"to_s","source")}("::",RegExp,q),function(d,A,h){var _=I(d,A,"MatchData"),l=[_].concat(h),x=n.$r(l),G=_.$$prototype;return G.matches=m,_.$attr_reader("post_match","pre_match","regexp","string"),Z(_,"$initialize",function(a,$,t){var e,r=this;t=K(t),e=H(t,"no_matchdata"),e==null&&(e=!1),p(e)||(B["~"]=r),r.regexp=a,r.begin=$.index,r.string=$.input,r.pre_match=$.input.slice(0,$.index),r.post_match=$.input.slice($.index+$[0].length),r.matches=[];for(var i=0,s=$.length;i<s;i++){var o=$[i];o==null?r.matches.push(m):r.matches.push(o)}},-3),Z(_,"$match",function(a){var $=this,t=m;return p(t=$["$[]"](a))?t:p(a["$is_a?"](x("Integer")))&&p(j(a,$.$length()))?L.$raise(u("IndexError"),"index "+a+" out of matches"):m}),Z(_,"$match_length",function(a){var $,t=this;return $=t.$match(a),$===m||$==null?m:$.$length()}),Z(_,"$[]",function(a){var $,t,e=this;return $=ie(arguments),t=$,t[0].$$is_string?(e.$regexp().$names()["$include?"](t["$[]"](0))["$!"]()&&L.$raise(u("IndexError"),"undefined group name reference: "+t["$[]"](0)),e.$named_captures()["$[]"](t["$[]"](0))):W(e.matches,"[]",R(t))},-1),Z(_,"$offset",function(a){var $=this;return a!==0&&L.$raise(u("ArgumentError"),"MatchData#offset only supports 0th element"),[$.begin,$.begin+$.matches[a].length]}),Z(_,"$==",function(a){var $=this,t=m,e=m,r=m,i=m;return g(u("MatchData"),a)?p(t=p(e=p(r=p(i=$.string==a.string)?$.regexp.toString()==a.regexp.toString():i)?$.pre_match==a.pre_match:r)?$.post_match==a.post_match:e)?$.begin==a.begin:t:!1}),Z(_,"$begin",function(a){var $=this;return a!==0&&L.$raise(u("ArgumentError"),"MatchData#begin only supports 0th element"),$.begin}),Z(_,"$end",function(a){var $=this;return a!==0&&L.$raise(u("ArgumentError"),"MatchData#end only supports 0th element"),$.begin+$.matches[a].length}),Z(_,"$captures",function(){var a=this;return a.matches.slice(1)}),Z(_,"$named_captures",function(){var a=this,$=m;return $=a.$captures(),W(a.$regexp().$named_captures(),"transform_values",[],function(e){return e==null&&(e=m),$["$[]"](E(e.$last(),1))})}),Z(_,"$names",function(){var a=this;return a.$regexp().$names()}),Z(_,"$inspect",function(){var a=this,$="#<MatchData "+a.matches[0].$inspect();if(a.$regexp().$names()["$empty?"]())for(var t=1,e=a.matches.length;t<e;t++)$+=" "+t+":"+a.matches[t].$inspect();else W(a.$named_captures(),"each",[],function(i,s){return i==null&&(i=m),s==null&&(s=m),$+=" "+i+":"+s.$inspect()});return $+">"}),Z(_,"$length",function(){var a=this;return a.matches.length}),Z(_,"$to_a",M("matches")),Z(_,"$to_s",function(){var a=this;return a.matches[0]}),Z(_,"$values_at",function(a){var $,t,e=this;$=ie(arguments),t=$;var r,i,s,o=[];for(r=0;r<t.length;r++){if(t[r].$$is_range&&(i=t[r].$to_a(),i.unshift(r,1),Array.prototype.splice.apply(t,i)),s=Y["$coerce_to!"](t[r],u("Integer"),"to_int"),s<0&&(s+=e.matches.length,s<0)){o.push(m);continue}o.push(e.matches[s])}return o},-1),te(_,"eql?","=="),te(_,"size","length")}(q[0],null,q)};Opal.modules["corelib/string"]=function(n){var k=n.coerce_to,y=n.respond_to,P=n.global_multiline_regexp,I=n.prop,ee=n.opal32_init,V=n.opal32_add,C=n.klass,Z=n.send2,p=n.find_super,B=n.def,ie=n.Opal,L=n.defs,Y=n.slice,te=n.send,W=n.to_a,z=n.extract_kwargs,w=n.ensure_kwargs,K=n.hash_get,H=n.eqeqeq,j=n.Kernel,R=n.truthy,g=n.gvars,E=n.rb_divide,M=n.rb_plus,q=n.eqeq,m=n.alias,u=n.const_set,d=n.top,A=[],h=n.$r(A),_=n.nil,l=n.$$$;return n.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),d.$require("corelib/comparable"),d.$require("corelib/regexp"),function(x,G,c){var a=C(x,G,"String"),$=[a].concat(c),t=n.$r($);a.$include(l("Comparable")),n.prop(a.$$prototype,"$$is_string",!0);var e=new Map;(function(){B(a,"$__id__",function i(){var s=i.$$p||_,o=this;if(i.$$p=null,typeof o=="object")return Z(o,p(o,"__id__",i,!1,!0),"__id__",[],s);if(e.has(o))return e.get(o);var v=n.uid();return e.set(o,v),v}),B(a,"$hash",function(){var s=this,o=ee(),v,S=s.length;for(o=V(o,5),o=V(o,S),v=0;v<S;v++)o=V(o,s.charCodeAt(v));return o})})(),L(a,"$try_convert",function(s){return ie["$coerce_to?"](s,l("String"),"to_str")}),L(a,"$new",function(s){var o,v,S=this;o=Y(arguments),v=o;var F=v[0]||"",T=v[v.length-1];return F=k(F,l("String"),"to_str"),T&&T.$$is_hash&&T.has("encoding")&&(F=F.$force_encoding(T.get("encoding").value)),F=new S.$$constructor(F),F.$initialize.$$pristine||te(F,"initialize",W(v)),F},-1),B(a,"$initialize",function(s,o){var v,S;return v=Y(arguments),S=z(v),S=w(S),v.length>0&&v.shift(),K(S,"encoding"),K(S,"capacity"),_},-1),B(a,"$%",function(s){var o=this;return H(l("Array"),s)?te(o,"format",[o].concat(W(s))):o.$format(o,s)}),B(a,"$*",function(s){var o=this;if(s=k(s,l("Integer"),"to_int"),s<0&&j.$raise(l("ArgumentError"),"negative argument"),s===0)return"";var v="",S=o.toString();for(S.length*s>=1<<28&&j.$raise(l("RangeError"),"multiply count must not overflow maximum string size");(s&1)===1&&(v+=S),s>>>=1,s!==0;)S+=S;return v}),B(a,"$+",function(s){var o=this;if(s=k(s,l("String"),"to_str"),s==""&&o.$$class===n.String)return o;if(o==""&&s.$$class===n.String)return s;var v=o+s;return o.encoding===v.encoding&&s.encoding===v.encoding||o.encoding.name==="UTF-8"||s.encoding.name==="UTF-8"?v:n.enc(v,o.encoding)}),B(a,"$<=>",function(s){var o=this;if(R(s["$respond_to?"]("to_str")))return s=s.$to_str().$to_s(),o>s?1:o<s?-1:0;var v=s["$<=>"](o);return v===_?_:v>0?-1:v<0?1:0}),B(a,"$==",function(s){var o=this;return s.$$is_string?o.toString()===s.toString():y(s,"$to_str")?s["$=="](o):!1}),B(a,"$=~",function(s){var o=this;return s.$$is_string&&j.$raise(l("TypeError"),"type mismatch: String given"),s["$=~"](o)}),B(a,"$[]",function(s,o){var v=this,S=v.length,F,T;if(s.$$is_range)return F=s.excl,T=s,o=s.end===_?-1:k(s.end,l("Integer"),"to_int"),s=s.begin===_?0:k(s.begin,l("Integer"),"to_int"),Math.abs(s)>S?_:(s<0&&(s+=S),o<0&&(o+=S),(!F||T.end===_)&&(o+=1),o=o-s,o<0&&(o=0),v.substr(s,o));if(s.$$is_string)return o!=null&&j.$raise(l("TypeError")),v.indexOf(s)!==-1?s:_;if(s.$$is_regexp){var J=v.match(s);return J===null?(g["~"]=_,_):(g["~"]=l("MatchData").$new(s,J),o==null?J[0]:(o=k(o,l("Integer"),"to_int"),o<0&&-o<J.length?J[o+=J.length]:o>=0&&o<J.length?J[o]:_))}return s=k(s,l("Integer"),"to_int"),s<0&&(s+=S),o==null?s>=S||s<0?_:v.substr(s,1):(o=k(o,l("Integer"),"to_int"),o<0||s>S||s<0?_:v.substr(s,o))},-2),B(a,"$b",function(){var s=this;return new String(s).$force_encoding("binary")}),B(a,"$capitalize",function(){var s=this;return s.charAt(0).toUpperCase()+s.substr(1).toLowerCase()}),B(a,"$casecmp",function(s){var o=this;if(!R(s["$respond_to?"]("to_str")))return _;s=k(s,l("String"),"to_str").$to_s();var v=/^[\x00-\x7F]*$/;return v.test(o)&&v.test(s)&&(o=o.toLowerCase(),s=s.toLowerCase()),o["$<=>"](s)}),B(a,"$casecmp?",function(s){var o=this,v=o.$casecmp(s);return v===_?_:v===0}),B(a,"$center",function(s,o){var v=this;if(o==null&&(o=" "),s=k(s,l("Integer"),"to_int"),o=k(o,l("String"),"to_str").$to_s(),R(o["$empty?"]())&&j.$raise(l("ArgumentError"),"zero width padding"),R(s<=v.length))return v;var S=v.$ljust(E(M(s,v.length),2).$ceil(),o),F=v.$rjust(E(M(s,v.length),2).$floor(),o);return F+S.slice(v.length)},-2),B(a,"$chomp",function(s){var o=this;if(g["/"]==null&&(g["/"]=_),s==null&&(s=g["/"]),R(s===_||o.length===0))return o;s=ie["$coerce_to!"](s,l("String"),"to_str").$to_s();var v;if(s===`
`)v=o.replace(/\r?\n?$/,"");else if(s==="")v=o.replace(/(\r?\n)+$/,"");else if(o.length>=s.length){var S=o.substr(o.length-s.length,s.length);S===s&&(v=o.substr(0,o.length-s.length))}return v??o},-1),B(a,"$chop",function(){var s=this,o=s.length,v;return o<=1?v="":s.charAt(o-1)===`
`&&s.charAt(o-2)==="\r"?v=s.substr(0,o-2):v=s.substr(0,o-1),v}),B(a,"$chr",function(){var s=this;return s.charAt(0)}),B(a,"$clone",function(s){var o,v=this,S=_;return s=w(s),o=K(s,"freeze"),o==null&&(o=_),R(o["$nil?"]())||q(o,!0)||q(o,!1)||v.$raise(t("ArgumentError"),"unexpected value for freeze: "+o.$class()),S=new String(v),S.$copy_singleton_methods(v),S.$initialize_clone(v,new Map([["freeze",o]])),q(o,!0)?S.$$frozen||(S.$$frozen=!0):R(o["$nil?"]())&&v.$$frozen&&(S.$$frozen=!0),S},-1),B(a,"$dup",function(){var s=this,o=_;return o=new String(s),o.$initialize_dup(s),o}),B(a,"$count",function(s){var o,v,S=this;o=Y(arguments),v=o,v.length===0&&j.$raise(l("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var F=r(v);return F===null?0:S.length-S.replace(new RegExp(F,"g"),"").length},-1),B(a,"$delete",function(s){var o,v,S=this;o=Y(arguments),v=o,v.length===0&&j.$raise(l("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var F=r(v);return F===null?S:S.replace(new RegExp(F,"g"),"")},-1),B(a,"$delete_prefix",function(s){var o=this;return s.$$is_string||(s=k(s,l("String"),"to_str")),o.slice(0,s.length)===s?o.slice(s.length):o}),B(a,"$delete_suffix",function(s){var o=this;return s.$$is_string||(s=k(s,l("String"),"to_str")),o.slice(o.length-s.length)===s?o.slice(0,o.length-s.length):o}),B(a,"$downcase",function(){var s=this;return s.toLowerCase()}),B(a,"$each_line",function i(s,o){var v=i.$$p||_,S,F,T,J,O=this;if(g["/"]==null&&(g["/"]=_),i.$$p=null,S=Y(arguments),F=z(S),F=w(F),S.length>0&&(T=S.shift()),T==null&&(T=g["/"]),J=K(F,"chomp"),J==null&&(J=!1),v===_)return O.$enum_for("each_line",T,new Map([["chomp",J]]));if(T===_)return n.yield1(v,O),O;T=k(T,l("String"),"to_str");var ae,le,ce,de,he,ve,me,be;if(T.length===0){for(ae=O.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,ce=ae.length;le<ce;le+=2)(ae[le]||ae[le+1])&&(be=(ae[le]||"")+(ae[le+1]||""),J&&(be=be.$chomp(`
`)),n.yield1(v,be));return O}for(he=O.$chomp(T),ve=O.length!=he.length,me=he.split(T),le=0,de=me.length;le<de;le++)be=me[le],(le<de-1||ve)&&(be+=T),J&&(be=be.$chomp(T)),n.yield1(v,be);return O},-1),B(a,"$empty?",function(){var s=this;return s.length===0}),B(a,"$end_with?",function(s){var o,v,S=this;o=Y(arguments),v=o;for(var F=0,T=v.length;F<T;F++){var J=k(v[F],l("String"),"to_str").$to_s();if(S.length>=J.length&&S.substr(S.length-J.length,J.length)==J)return!0}return!1},-1),B(a,"$gsub",function i(s,o){var v=i.$$p||_,S=this;if(i.$$p=null,o===void 0&&v===_)return S.$enum_for("gsub",s);var F="",T=_,J=0,O,ae;s.$$is_regexp?s=P(s):(s=k(s,l("String"),"to_str"),s=new RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(O=s.exec(S),O===null){g["~"]=_,F+=S.slice(J);break}T=l("MatchData").$new(s,O),o===void 0?(le=s.lastIndex,ae=v(O[0]),s.lastIndex=le):o.$$is_hash?ae=o["$[]"](O[0]).$to_s():(o.$$is_string||(o=k(o,l("String"),"to_str")),ae=o.replace(/([\\]+)([0-9+&`'])/g,function(ce,de,he){if(de.length%2===0)return ce;switch(he){case"+":for(var ve=O.length-1;ve>0;ve--)if(O[ve]!==void 0)return de.slice(1)+O[ve];return"";case"&":return de.slice(1)+O[0];case"`":return de.slice(1)+S.slice(0,O.index);case"'":return de.slice(1)+S.slice(O.index+O[0].length);default:return de.slice(1)+(O[he]||"")}}).replace(/\\\\/g,"\\")),s.lastIndex===O.index?(F+=S.slice(J,O.index)+ae+(S[O.index]||""),s.lastIndex+=1):F+=S.slice(J,O.index)+ae,J=s.lastIndex}return g["~"]=T,F},-2),B(a,"$hex",function(){var s=this;return s.$to_i(16)}),B(a,"$include?",function(s){var o=this;return s.$$is_string||(s=k(s,l("String"),"to_str")),o.indexOf(s)!==-1}),B(a,"$index",function(s,o){var v=this,S,F,T;if(o===void 0)o=0;else if(o=k(o,l("Integer"),"to_int"),o<0&&(o+=v.length,o<0))return _;if(s.$$is_regexp)for(T=P(s);;){if(F=T.exec(v),F===null){g["~"]=_,S=-1;break}if(F.index>=o){g["~"]=l("MatchData").$new(T,F),S=F.index;break}T.lastIndex=F.index+1}else s=k(s,l("String"),"to_str"),s.length===0&&o>v.length?S=-1:S=v.indexOf(s,o);return S===-1?_:S},-2),B(a,"$inspect",function(){var s=this,o=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,v={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},S=s.replace(o,function(F){return v[F]?v[F]:(F=F.charCodeAt(0),F<=255&&(s.encoding["$binary?"]()||s.internal_encoding["$binary?"]())?"\\x"+("00"+F.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+F.toString(16).toUpperCase()).slice(-4))});return'"'+S.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),B(a,"$intern",function(){var s=this;return s.toString()}),B(a,"$length",function(){var s=this;return s.length}),m(a,"size","length"),B(a,"$lines",function i(s,o){var v=i.$$p||_,S,F,T,J,O=this,ae=_;return g["/"]==null&&(g["/"]=_),i.$$p=null,S=Y(arguments),F=z(S),F=w(F),S.length>0&&(T=S.shift()),T==null&&(T=g["/"]),J=K(F,"chomp"),J==null&&(J=!1),ae=te(O,"each_line",[T,new Map([["chomp",J]])],v.$to_proc()),R(v)?O:ae.$to_a()},-1),B(a,"$ljust",function(s,o){var v=this;if(o==null&&(o=" "),s=k(s,l("Integer"),"to_int"),o=k(o,l("String"),"to_str").$to_s(),R(o["$empty?"]())&&j.$raise(l("ArgumentError"),"zero width padding"),R(s<=v.length))return v;var S=-1,F="";for(s-=v.length;++S<s;)F+=o;return v+F.slice(0,s)},-2),B(a,"$lstrip",function(){var s=this;return s.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),B(a,"$ascii_only?",function(){var s=this;return s.encoding.ascii?/^[\x00-\x7F]*$/.test(s):!1}),B(a,"$match",function i(s,o){var v=i.$$p||_,S=this;return i.$$p=null,(H(t("String"),s)||R(s["$respond_to?"]("to_str")))&&(s=l("Regexp").$new(s.$to_str())),H(l("Regexp"),s)||j.$raise(l("TypeError"),"wrong argument type "+s.$class()+" (expected Regexp)"),te(s,"match",[S,o],v.$to_proc())},-2),B(a,"$match?",function(s,o){var v=this;return(H(t("String"),s)||R(s["$respond_to?"]("to_str")))&&(s=l("Regexp").$new(s.$to_str())),H(l("Regexp"),s)||j.$raise(l("TypeError"),"wrong argument type "+s.$class()+" (expected Regexp)"),s["$match?"](v,o)},-2),B(a,"$next",function(){var s=this,o=s.length;if(o===0)return"";for(var v=s,S=s.search(/[a-zA-Z0-9]/),F=!1,T;o--;){if(T=s.charCodeAt(o),T>=48&&T<=57||T>=65&&T<=90||T>=97&&T<=122)switch(T){case 57:F=!0,T=48;break;case 90:F=!0,T=65;break;case 122:F=!0,T=97;break;default:F=!1,T+=1}else S===-1?T===255?(F=!0,T=0):(F=!1,T+=1):F=!0;if(v=v.slice(0,o)+String.fromCharCode(T)+v.slice(o+1),F&&(o===0||o===S)){switch(T){case 65:break;case 97:break;default:T+=1}o===0?v=String.fromCharCode(T)+v:v=v.slice(0,o)+String.fromCharCode(T)+v.slice(o),F=!1}if(!F)break}return v}),B(a,"$oct",function(){var s=this,o,v=s,S=8;return/^\s*_/.test(v)?0:(v=v.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(F,T,J,O){switch(O.charAt(0)){case"+":case"-":return F;case"0":if(O.charAt(1)==="x"&&J==="0x")return F}switch(J){case"0b":S=2;break;case"0":case"0o":S=8;break;case"0d":S=10;break;case"0x":S=16;break}return T+O}),o=parseInt(v.replace(/_(?!_)/g,""),S),isNaN(o)?0:o)}),B(a,"$ord",function(){var s=this;return typeof s.codePointAt=="function"?s.codePointAt(0):s.charCodeAt(0)}),B(a,"$partition",function(s){var o=this,v,S;return s.$$is_regexp?(S=s.exec(o),S===null?v=-1:(l("MatchData").$new(s,S),s=S[0],v=S.index)):(s=k(s,l("String"),"to_str"),v=o.indexOf(s)),v===-1?[o,"",""]:[o.slice(0,v),o.slice(v,v+s.length),o.slice(v+s.length)]}),B(a,"$reverse",function(){var s=this;return s.split("").reverse().join("")}),B(a,"$rindex",function(s,o){var v=this,S,F,T,J;if(o===void 0)o=v.length;else if(o=k(o,l("Integer"),"to_int"),o<0&&(o+=v.length,o<0))return _;if(s.$$is_regexp){for(F=null,T=P(s);J=T.exec(v),!(J===null||J.index>o);)F=J,T.lastIndex=F.index+1;F===null?(g["~"]=_,S=-1):(l("MatchData").$new(T,F),S=F.index)}else s=k(s,l("String"),"to_str"),S=v.lastIndexOf(s,o);return S===-1?_:S},-2),B(a,"$rjust",function(s,o){var v=this;if(o==null&&(o=" "),s=k(s,l("Integer"),"to_int"),o=k(o,l("String"),"to_str").$to_s(),R(o["$empty?"]())&&j.$raise(l("ArgumentError"),"zero width padding"),R(s<=v.length))return v;var S=Math.floor(s-v.length),F=Math.floor(S/o.length),T=Array(F+1).join(o),J=S-T.length;return T+o.slice(0,J)+v},-2),B(a,"$rpartition",function(s){var o=this,v,S,F,T;if(s.$$is_regexp){for(S=null,F=P(s);T=F.exec(o),T!==null;)S=T,F.lastIndex=S.index+1;S===null?v=-1:(l("MatchData").$new(F,S),s=S[0],v=S.index)}else s=k(s,l("String"),"to_str"),v=o.lastIndexOf(s);return v===-1?["","",o]:[o.slice(0,v),o.slice(v,v+s.length),o.slice(v+s.length)]}),B(a,"$rstrip",function(){var s=this;return s.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),B(a,"$scan",function i(s,o){var v=i.$$p||_,S,F=this;i.$$p=null,o=w(o),S=K(o,"no_matchdata"),S==null&&(S=!1);var T=[],J=_,O;for(s.$$is_regexp?s=P(s):(s=k(s,l("String"),"to_str"),s=new RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(O=s.exec(F))!=null;)J=l("MatchData").$new(s,O,new Map([["no_matchdata",S]])),v===_?O.length==1?T.push(O[0]):T.push(J.$captures()):O.length==1?n.yield1(v,O[0]):n.yield1(v,J.$captures()),s.lastIndex===O.index&&(s.lastIndex+=1);return S||(g["~"]=J),v!==_?F:T},-2),B(a,"$singleton_class",function(){var s=this;return n.get_singleton_class(s)}),B(a,"$split",function(s,o){var v=this,S=_;if(g[";"]==null&&(g[";"]=_),v.length===0)return[];if(o===void 0)o=0;else if(o=ie["$coerce_to!"](o,l("Integer"),"to_int"),o===1)return[v];(s===void 0||s===_)&&(s=R(S=g[";"])?S:" ");var F=[],T=v.toString(),J=0,O,ae=0,le=0,ce,de;if(s.$$is_regexp?s=P(s):(s=k(s,l("String"),"to_str").$to_s(),s===" "&&(s=/\s+/gm,T=T.replace(/^\s+/,""))),F=T.split(s),F.length===1&&F[0]===T)return[F[0]];for(;(ce=F.indexOf(void 0))!==-1;)F.splice(ce,1);if(o===0){for(;F[F.length-1]==="";)F.pop();return F}if(s.$$is_regexp||(s=n.escape_regexp(s),s=new RegExp(s,"gm")),O=s.exec(T),o<0){if(O!==null&&O[0]===""&&s.source.indexOf("(?=")===-1)for(ce=0,de=O.length;ce<de;ce++)F.push("");return F}if(O!==null&&O[0]==="")return le=(O.length-1)*(o-1)+o,F.splice(le-1,F.length-1,F.slice(le-1).join("")),F;if(o>=F.length)return F;for(;O!==null&&(ae++,J=s.lastIndex,le+=O.length,ae+1!==o);)O=s.exec(T);return F.splice(le,F.length-1,T.slice(J)),F},-1),B(a,"$squeeze",function(s){var o,v,S=this;if(o=Y(arguments),v=o,v.length===0)return S.replace(/(.)\1+/g,"$1");var F=r(v);return F===null?S:S.replace(new RegExp("("+F+")\\1+","g"),"$1")},-1),B(a,"$start_with?",function(s){var o,v,S=this;o=Y(arguments),v=o;for(var F=0,T=v.length;F<T;F++)if(v[F].$$is_regexp){var J=v[F],O=J.exec(S);if(O!=null&&O.index===0)return g["~"]=l("MatchData").$new(J,O),!0;g["~"]=_}else{var ae=k(v[F],l("String"),"to_str").$to_s();if(S.length>=ae.length&&S.startsWith(ae))return!0}return!1},-1),B(a,"$strip",function(){var s=this;return s.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),B(a,"$sub",function i(s,o){var v=i.$$p||_,S=this;i.$$p=null,s.$$is_regexp||(s=k(s,l("String"),"to_str"),s=new RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var F,T=s.exec(S);return T===null?(g["~"]=_,F=S.toString()):(l("MatchData").$new(s,T),o===void 0?(v===_&&j.$raise(l("ArgumentError"),"wrong number of arguments (1 for 2)"),F=S.slice(0,T.index)+v(T[0])+S.slice(T.index+T[0].length)):o.$$is_hash?F=S.slice(0,T.index)+o["$[]"](T[0]).$to_s()+S.slice(T.index+T[0].length):(o=k(o,l("String"),"to_str"),o=o.replace(/([\\]+)([0-9+&`'])/g,function(J,O,ae){if(O.length%2===0)return J;switch(ae){case"+":for(var le=T.length-1;le>0;le--)if(T[le]!==void 0)return O.slice(1)+T[le];return"";case"&":return O.slice(1)+T[0];case"`":return O.slice(1)+S.slice(0,T.index);case"'":return O.slice(1)+S.slice(T.index+T[0].length);default:return O.slice(1)+(T[ae]||"")}}).replace(/\\\\/g,"\\"),F=S.slice(0,T.index)+o+S.slice(T.index+T[0].length))),F},-2),B(a,"$sum",function(s){var o=this;s==null&&(s=16),s=k(s,l("Integer"),"to_int");for(var v=0,S=o.length,F=0;F<S;F++)v+=o.charCodeAt(F);return s<=0?v:v&Math.pow(2,s)-1},-1),B(a,"$swapcase",function(){var s=this,o=s.replace(/([a-z]+)|([A-Z]+)/g,function(v,S,F){return S?v.toUpperCase():v.toLowerCase()});return o}),B(a,"$to_f",function(){var s=this;if(s.charAt(0)==="_")return 0;var o=parseFloat(s.replace(/_/g,""));return isNaN(o)||o==1/0||o==-1/0?0:o}),B(a,"$to_i",function(s){var o=this;s==null&&(s=10);var v,S=o.toLowerCase(),F=k(s,l("Integer"),"to_int");return(F===1||F<0||F>36)&&j.$raise(l("ArgumentError"),"invalid radix "+F),/^\s*_/.test(S)?0:(S=S.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(T,J,O,ae){switch(ae.charAt(0)){case"+":case"-":return T;case"0":if(ae.charAt(1)==="x"&&O==="0x"&&(F===0||F===16))return T}switch(O){case"0b":if(F===0||F===2)return F=2,J+ae;break;case"0":case"0o":if(F===0||F===8)return F=8,J+ae;break;case"0d":if(F===0||F===10)return F=10,J+ae;break;case"0x":if(F===0||F===16)return F=16,J+ae;break}return T}),v=parseInt(S.replace(/_(?!_)/g,""),F),isNaN(v)?0:v)},-1),B(a,"$to_proc",function i(){i.$$p;var s=this,o=_,v=_,S=_;return i.$$p=null,o=s.valueOf(),v=n.jsid(o),S=te(j,"proc",[],function F(T){var J=F.$$p||_,O,ae;F.$$p=null,O=Y(arguments),ae=O,ae.length===0&&j.$raise(l("ArgumentError"),"no receiver given");var le=ae[0];le==null&&(le=_);var ce=le[v];return ce?ae=ae.slice(1):(ce=le.$method_missing,ae[0]=o),typeof J=="function"&&(ce.$$p=J),ae.length===0?ce.call(le):ce.apply(le,ae)},-1),S.$$source_location=_,S}),B(a,"$to_s",function(){var s=this;return s.toString()}),B(a,"$tr",function(s,o){var v=this;if(s=k(s,l("String"),"to_str").$to_s(),o=k(o,l("String"),"to_str").$to_s(),s.length==0||s===o)return v;var S,F,T,J,O,ae,le,ce={},de=s.split(""),he=de.length,ve=o.split(""),me=ve.length,be=!1,$e=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),$e=ve[me-1],he-=1);var N=[],D=null;for(F=!1,S=0;S<he;S++)if(J=de[S],D==null)D=J,N.push(J);else if(J==="-")D==="-"?(N.push("-"),N.push("-")):S==he-1?N.push("-"):F=!0;else if(F){for(O=D.charCodeAt(0),ae=J.charCodeAt(0),O>ae&&j.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=O+1;T<ae;T++)N.push(String.fromCharCode(T));N.push(J),F=null,D=null}else N.push(J);if(de=N,he=de.length,be)for(S=0;S<he;S++)ce[de[S]]=!0;else{if(me>0){var X=[],Q=null;for(F=!1,S=0;S<me;S++)if(J=ve[S],Q==null)Q=J,X.push(J);else if(J==="-")Q==="-"?(X.push("-"),X.push("-")):S==me-1?X.push("-"):F=!0;else if(F){for(O=Q.charCodeAt(0),ae=J.charCodeAt(0),O>ae&&j.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=O+1;T<ae;T++)X.push(String.fromCharCode(T));X.push(J),F=null,Q=null}else X.push(J);ve=X,me=ve.length}var ne=he-me;if(ne>0){var se=me>0?ve[me-1]:"";for(S=0;S<ne;S++)ve.push(se)}for(S=0;S<he;S++)ce[de[S]]=ve[S]}var oe="";for(S=0,le=v.length;S<le;S++){J=v.charAt(S);var fe=ce[J];be?oe+=fe==null?$e:J:oe+=fe??J}return oe}),B(a,"$tr_s",function(s,o){var v=this;if(s=k(s,l("String"),"to_str").$to_s(),o=k(o,l("String"),"to_str").$to_s(),s.length==0)return v;var S,F,T,J,O,ae,le,ce={},de=s.split(""),he=de.length,ve=o.split(""),me=ve.length,be=!1,$e=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),$e=ve[me-1],he-=1);var N=[],D=null;for(F=!1,S=0;S<he;S++)if(J=de[S],D==null)D=J,N.push(J);else if(J==="-")D==="-"?(N.push("-"),N.push("-")):S==he-1?N.push("-"):F=!0;else if(F){for(O=D.charCodeAt(0),ae=J.charCodeAt(0),O>ae&&j.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=O+1;T<ae;T++)N.push(String.fromCharCode(T));N.push(J),F=null,D=null}else N.push(J);if(de=N,he=de.length,be)for(S=0;S<he;S++)ce[de[S]]=!0;else{if(me>0){var X=[],Q=null;for(F=!1,S=0;S<me;S++)if(J=ve[S],D==null)D=J,X.push(J);else if(J==="-")Q==="-"?(X.push("-"),X.push("-")):S==me-1?X.push("-"):F=!0;else if(F){for(O=D.charCodeAt(0),ae=J.charCodeAt(0),O>ae&&j.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=O+1;T<ae;T++)X.push(String.fromCharCode(T));X.push(J),F=null,D=null}else X.push(J);ve=X,me=ve.length}var ne=he-me;if(ne>0){var se=me>0?ve[me-1]:"";for(S=0;S<ne;S++)ve.push(se)}for(S=0;S<he;S++)ce[de[S]]=ve[S]}var oe="",fe=null;for(S=0,le=v.length;S<le;S++){J=v.charAt(S);var f=ce[J];be?f==null?fe==null&&(oe+=$e,fe=!0):(oe+=J,fe=null):f!=null?(fe==null||fe!==f)&&(oe+=f,fe=f):(oe+=J,fe=null)}return oe}),B(a,"$upcase",function(){var s=this;return s.toUpperCase()}),B(a,"$upto",function i(s,o){var v=i.$$p||_,S=this;if(i.$$p=null,o==null&&(o=!1),v===_)return S.$enum_for("upto",s,o);var F,T,J=S.toString();if(s=k(s,l("String"),"to_str"),J.length===1&&s.length===1)for(F=J.charCodeAt(0),T=s.charCodeAt(0);F<=T&&!(o&&F===T);)v(String.fromCharCode(F)),F+=1;else if(parseInt(J,10).toString()===J&&parseInt(s,10).toString()===s)for(F=parseInt(J,10),T=parseInt(s,10);F<=T&&!(o&&F===T);)v(F.toString()),F+=1;else for(;J.length<=s.length&&J<=s&&!(o&&J===s);)v(J),J=J.$succ();return S},-2);function r(i){function s(ce){var de="",he,ve=ce.length,me,be,$e,N,D;for(he=0;he<ve;he++)if(me=ce.charAt(he),me==="-"&&he>0&&he<ve-1&&!be){for($e=ce.charCodeAt(he-1),N=ce.charCodeAt(he+1),$e>N&&j.$raise(l("ArgumentError"),'invalid range "'+$e+"-"+N+'" in string transliteration'),D=$e+1;D<N+1;D++)de+=String.fromCharCode(D);be=!0,he++}else be=me==="\\",de+=me;return de}function o(ce,de){if(ce.length===0)return de;var he="",ve,me=ce.length,be;for(ve=0;ve<me;ve++)be=ce.charAt(ve),de.indexOf(be)!==-1&&(he+=be);return he}var v,S,F,T,J,O,ae="",le="";for(v=0,S=i.length;v<S;v++)F=k(i[v],l("String"),"to_str"),T=F.charAt(0)==="^"&&F.length>1,F=s(T?F.slice(1):F),T?le=o(le,F):ae=o(ae,F);if(ae.length>0&&le.length>0){for(O="",v=0,S=ae.length;v<S;v++)J=ae.charAt(v),le.indexOf(J)===-1&&(O+=J);ae=O,le=""}return ae.length>0?"["+l("Regexp").$escape(ae)+"]":le.length>0?"[^"+l("Regexp").$escape(le)+"]":null}return B(a,"$instance_variables",function(){return[]}),L(a,"$_load",function(s){var o,v,S=this;return o=Y(arguments),v=o,te(S,"new",W(v))},-1),B(a,"$unicode_normalize",function(s){var o=this;return s==null&&(s="nfc"),R(["nfc","nfd","nfkc","nfkd"]["$include?"](s))||j.$raise(l("ArgumentError"),"Invalid normalization form "+s),o.normalize(s.$upcase())},-1),B(a,"$unicode_normalized?",function(s){var o=this;return s==null&&(s="nfc"),o.$unicode_normalize(s)["$=="](o)},-1),B(a,"$unpack",function(s){return j.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),B(a,"$unpack1",function(s){return j.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),B(a,"$freeze",function(){var s=this;return typeof s=="string"||I(s,"$$frozen",!0),s}),B(a,"$-@",function(){var s=this;return typeof s=="string"||s.$$frozen?s:s.encoding.name=="UTF-8"&&s.internal_encoding.name=="UTF-8"?s.toString():s.$dup().$freeze()}),B(a,"$frozen?",function(){var s=this;return typeof s=="string"||s.$$frozen===!0}),m(a,"+@","dup"),m(a,"===","=="),m(a,"byteslice","[]"),m(a,"eql?","=="),m(a,"equal?","==="),m(a,"object_id","__id__"),m(a,"slice","[]"),m(a,"succ","next"),m(a,"to_str","to_s"),m(a,"to_sym","intern"),ie.$pristine(a,"initialize")}("::",String,A),u(A[0],"Symbol",h("String"))};Opal.modules["corelib/enumerable"]=function(n){var k=n.truthy,y=n.coerce_to,P=n.yield1,I=n.yieldX,ee=n.deny_frozen_access,V=n.module,C=n.send,Z=n.slice,p=n.to_a,B=n.Opal,ie=n.thrower,L=n.def,Y=n.Kernel,te=n.return_val,W=n.rb_gt,z=n.rb_times,w=n.rb_lt,K=n.eqeq,H=n.rb_plus,j=n.rb_minus,R=n.rb_divide,g=n.rb_le,E=n.lambda,M=n.not,q=n.alias,m=[],u=n.nil,d=n.$$$;return n.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(A,h){var _=V(A,"Enumerable"),l=[_].concat(h),x=n.$r(l);function G(c){return c.length===0&&(c=[u]),c.length>1&&(c=[c]),c}return L(_,"$all?",function c(a){try{var $=ie("return"),t=c.$$p||u,e=this;return c.$$p=null,k(a!==void 0)?C(e,"each",[],function r(i){var s,o,v=u;if(s=Z(arguments),o=s,v=G(o),k(C(a,"public_send",["==="].concat(p(v)))))return u;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):t!==u?C(e,"each",[],function r(i){var s,o;if(s=Z(arguments),o=s,k(n.yieldX(t,p(o))))return u;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):C(e,"each",[],function r(i){var s,o;if(s=Z(arguments),o=s,k(B.$destructure(o)))return u;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),L(_,"$any?",function c(a){try{var $=ie("return"),t=c.$$p||u,e=this;return c.$$p=null,k(a!==void 0)?C(e,"each",[],function r(i){var s,o,v=u;if(s=Z(arguments),o=s,v=G(o),k(C(a,"public_send",["==="].concat(p(v)))))$.$throw(!0,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):t!==u?C(e,"each",[],function r(i){var s,o;if(s=Z(arguments),o=s,k(n.yieldX(t,p(o))))$.$throw(!0,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):C(e,"each",[],function r(i){var s,o;if(s=Z(arguments),o=s,k(B.$destructure(o)))$.$throw(!0,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),!1}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),L(_,"$chunk",function c(){var a=c.$$p||u,$=this;return c.$$p=null,a===u?C($,"to_enum",["chunk"],function t(){var e=t.$$s==null?this:t.$$s;return e.$enumerator_size()},{$$s:$}):C(d("Enumerator"),"new",[],function t(e){var r=t.$$s==null?this:t.$$s;e==null&&(e=u);var i=u,s=[];function o(){s.length>0&&e.$yield(i,s)}r.$each.$$p=function(v){var S=P(a,v);S===u?(o(),s=[],i=u):(i===u||i===S?s.push(v):(o(),s=[v]),i=S)},r.$each(),o()},{$$s:$})}),L(_,"$chunk_while",function c(){var a=c.$$p||u,$=this;return c.$$p=null,a===u&&Y.$raise(d("ArgumentError"),"no block given"),C($,"slice_when",[],function(e,r){return e==null&&(e=u),r==null&&(r=u),n.yieldX(a,[e,r])["$!"]()})}),L(_,"$collect",function c(){var a=c.$$p||u,$=this;if(c.$$p=null,a===u)return C($,"enum_for",["collect"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$});var t=[];return $.$each.$$p=function(){var e=I(a,arguments);t.push(e)},$.$each(),t}),L(_,"$collect_concat",function c(){var a=c.$$p||u,$=this;return c.$$p=null,a===u?C($,"enum_for",["collect_concat"],function t(){var e=t.$$s==null?this:t.$$s;return e.$enumerator_size()},{$$s:$}):C($,"map",[],a.$to_proc()).$flatten(1)}),L(_,"$compact",function(){var a=this;return a.$to_a().$compact()}),L(_,"$count",function c(a){var $=c.$$p||u,t=this,e=u;return c.$$p=null,e=0,a!=null&&$!==u&&t.$warn("warning: given block not used"),k(a!=null)?$=C(Y,"proc",[],function(i){var s,o;return s=Z(arguments),o=s,B.$destructure(o)["$=="](a)},-1):k($["$nil?"]())&&($=C(Y,"proc",[],te(!0))),C(t,"each",[],function(i){var s,o;return s=Z(arguments),o=s,k(I($,o))?e++:u},-1),e},-1),L(_,"$cycle",function c(a){var $=c.$$p||u,t=this;if(c.$$p=null,a==null&&(a=u),$===u)return C(t,"enum_for",["cycle",a],function s(){var o=s.$$s==null?this:s.$$s;return k(a["$nil?"]())?k(o["$respond_to?"]("size"))?d(d("Float"),"INFINITY"):u:(a=B["$coerce_to!"](a,d("Integer"),"to_int"),k(W(a,0))?z(o.$enumerator_size(),a):0)},{$$s:t});if(!k(a["$nil?"]())&&(a=B["$coerce_to!"](a,d("Integer"),"to_int"),k(a<=0)))return u;var e=[],r,i;if(t.$each.$$p=function(){var s=B.$destructure(arguments);P($,s),e.push(s)},t.$each(),e.length===0)return u;if(a===u)for(;;)for(r=0,i=e.length;r<i;r++)P($,e[r]);else for(;a>1;){for(r=0,i=e.length;r<i;r++)P($,e[r]);a--}},-1),L(_,"$detect",function c(a){try{var $=ie("return"),t=c.$$p||u,e=this;return c.$$p=null,t===u?e.$enum_for("detect",a):(C(e,"each",[],function r(i){var s,o,v=u;if(s=Z(arguments),o=s,v=B.$destructure(o),k(n.yield1(t,v)))$.$throw(v,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),a!==void 0?typeof a=="function"?a():a:u)}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),L(_,"$drop",function(a){var $=this;a=y(a,d("Integer"),"to_int"),k(a<0)&&Y.$raise(d("ArgumentError"),"attempt to drop negative size");var t=[],e=0;return $.$each.$$p=function(){a<=e&&t.push(B.$destructure(arguments)),e++},$.$each(),t}),L(_,"$drop_while",function c(){var a=c.$$p||u,$=this;if(c.$$p=null,a===u)return $.$enum_for("drop_while");var t=[],e=!0;return $.$each.$$p=function(){var r=B.$destructure(arguments);if(e){var i=P(a,r);k(i)||(e=!1,t.push(r))}else t.push(r)},$.$each(),t}),L(_,"$each_cons",function c(a){var $=c.$$p||u,t=this;if(c.$$p=null,k(arguments.length!=1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),a=B.$try_convert(a,d("Integer"),"to_int"),k(a<=0)&&Y.$raise(d("ArgumentError"),"invalid size"),$===u)return C(t,"enum_for",["each_cons",a],function r(){var i=r.$$s==null?this:r.$$s,s=u;return s=i.$enumerator_size(),k(s["$nil?"]())?u:K(s,0)||k(w(s,a))?0:H(j(s,a),1)},{$$s:t});var e=[];return t.$each.$$p=function(){var r=B.$destructure(arguments);e.push(r),e.length>a&&e.shift(),e.length==a&&P($,e.slice(0,a))},t.$each(),t}),L(_,"$each_entry",function c(a){var $=c.$$p||u,t,e,r=this;return c.$$p=null,t=Z(arguments),e=t,$===u?C(r,"to_enum",["each_entry"].concat(p(e)),function i(){var s=i.$$s==null?this:i.$$s;return s.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var i=B.$destructure(arguments);P($,i)},r.$each.apply(r,e),r)},-1),L(_,"$each_slice",function c(a){var $=c.$$p||u,t=this;if(c.$$p=null,a=y(a,d("Integer"),"to_int"),k(a<=0)&&Y.$raise(d("ArgumentError"),"invalid slice size"),$===u)return C(t,"enum_for",["each_slice",a],function r(){var i=r.$$s==null?this:r.$$s;return k(i["$respond_to?"]("size"))?R(i.$size(),a).$ceil():u},{$$s:t});var e=[];return t.$each.$$p=function(){var r=B.$destructure(arguments);e.push(r),e.length===a&&(P($,e),e=[])},t.$each(),e.length>0&&P($,e),t}),L(_,"$each_with_index",function c(a){var $=c.$$p||u,t,e,r=this;if(c.$$p=null,t=Z(arguments),e=t,$===u)return C(r,"enum_for",["each_with_index"].concat(p(e)),function s(){var o=s.$$s==null?this:s.$$s;return o.$enumerator_size()},{$$s:r});var i=0;return r.$each.$$p=function(){var s=B.$destructure(arguments);$(s,i),i++},r.$each.apply(r,e),r},-1),L(_,"$each_with_object",function c(a){var $=c.$$p||u,t=this;return c.$$p=null,$===u?C(t,"enum_for",["each_with_object",a],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:t}):(t.$each.$$p=function(){var e=B.$destructure(arguments);$(e,a)},t.$each(),a)}),L(_,"$entries",function(a){var $,t,e=this;$=Z(arguments),t=$;var r=[];return e.$each.$$p=function(){r.push(B.$destructure(arguments))},e.$each.apply(e,t),r},-1),L(_,"$filter_map",function c(){var a=c.$$p||u,$=this;return c.$$p=null,a===u?C($,"enum_for",["filter_map"],function t(){var e=t.$$s==null?this:t.$$s;return e.$enumerator_size()},{$$s:$}):C(C($,"map",[],a.$to_proc()),"select",[],"itself".$to_proc())}),L(_,"$find_all",function c(){var a=c.$$p||u,$=this;if(c.$$p=null,a===u)return C($,"enum_for",["find_all"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$});var t=[];return $.$each.$$p=function(){var e=B.$destructure(arguments),r=P(a,e);k(r)&&t.push(e)},$.$each(),t}),L(_,"$find_index",function c(a){try{var $=ie("return"),t=c.$$p||u,e=this,r=u;return c.$$p=null,k(a===void 0&&t===u)?e.$enum_for("find_index"):(a!=null&&t!==u&&e.$warn("warning: given block not used"),r=0,k(a!=null)?C(e,"each",[],function i(s){var o,v;return o=Z(arguments),v=o,K(B.$destructure(v),a)&&$.$throw(r,i.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}):C(e,"each",[],function i(s){var o,v;return o=Z(arguments),v=o,k(n.yieldX(t,p(v)))&&$.$throw(r,i.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}),u)}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),L(_,"$first",function(a){try{var $=ie("return"),t=this,e=u,r=u;return k(a===void 0)?C(t,"each",[],function i(s){s==null&&(s=u),$.$throw(s,i.$$is_lambda)},{$$ret:$}):(e=[],a=y(a,d("Integer"),"to_int"),k(a<0)&&Y.$raise(d("ArgumentError"),"attempt to take negative size"),k(a==0)?[]:(r=0,C(t,"each",[],function i(s){var o,v;if(o=Z(arguments),v=o,e.push(B.$destructure(v)),k(a<=++r))$.$throw(e,i.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),e))}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),L(_,"$grep",function c(a){var $=c.$$p||u,t=this,e=u;return c.$$p=null,e=[],C(t,"each",[],function(i){var s,o,v=u;return s=Z(arguments),o=s,v=G(o),k(C(a,"__send__",["==="].concat(p(v))))?($!==u?(k(W(o.$length(),1))&&(o=[o]),o=n.yieldX($,p(o))):k(g(o.$length(),1))&&(o=o["$[]"](0)),e.$push(o)):u},-1),e}),L(_,"$grep_v",function c(a){var $=c.$$p||u,t=this,e=u;return c.$$p=null,e=[],C(t,"each",[],function(i){var s,o,v=u;return s=Z(arguments),o=s,v=G(o),k(C(a,"__send__",["==="].concat(p(v))))?u:($!==u?(k(W(o.$length(),1))&&(o=[o]),o=n.yieldX($,p(o))):k(g(o.$length(),1))&&(o=o["$[]"](0)),e.$push(o))},-1),e}),L(_,"$group_by",function c(){var a=c.$$p||u,$,t=this,e=u,r=u;return c.$$p=null,a===u?C(t,"enum_for",["group_by"],function i(){var s=i.$$s==null?this:i.$$s;return s.$enumerator_size()},{$$s:t}):(e=new Map,t.$each.$$p=function(){var i=B.$destructure(arguments),s=P(a,i);(k(r=e["$[]"](s))?r:($=[s,[]],C(e,"[]=",$),$[$.length-1]))["$<<"](i)},t.$each(),e)}),L(_,"$include?",function(a){try{var $=ie("return"),t=this;return C(t,"each",[],function e(r){var i,s;if(i=Z(arguments),s=i,K(B.$destructure(s),a))$.$throw(!0,e.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),!1}catch(e){if(e===$)return e.$v;throw e}finally{$.is_orphan=!0}}),L(_,"$inject",function c(a,$){var t=c.$$p||u,e=this;c.$$p=null;var r=a;return t!==u&&$===void 0?e.$each.$$p=function(){var i=B.$destructure(arguments);if(r===void 0){r=i;return}i=I(t,[r,i]),r=i}:($===void 0&&(d("Symbol")["$==="](a)||Y.$raise(d("TypeError"),""+a.$inspect()+" is not a Symbol"),$=a,r=void 0),e.$each.$$p=function(){var i=B.$destructure(arguments);if(r===void 0){r=i;return}r=r.$__send__($,i)}),e.$each(),r??u},-1),L(_,"$lazy",function(){var a=this;return C(d(d("Enumerator"),"Lazy"),"new",[a,a.$enumerator_size()],function(t,e){var r,i;return t==null&&(t=u),r=Z(arguments,1),i=r,C(t,"yield",p(i))},-2)}),L(_,"$enumerator_size",function(){var a=this;return k(a["$respond_to?"]("size"))?a.$size():u}),L(_,"$max",function c(a){var $=c.$$p||u,t=this;if(c.$$p=null,a===void 0||a===u){var e,r;return t.$each.$$p=function(){var i=B.$destructure(arguments);if(e===void 0){e=i;return}$!==u?r=I($,[i,e]):r=i["$<=>"](e),r===u&&Y.$raise(d("ArgumentError"),"comparison failed"),r>0&&(e=i)},t.$each(),e===void 0?u:e}return a=y(a,d("Integer"),"to_int"),C(t,"sort",[],$.$to_proc()).$reverse().$first(a)},-1),L(_,"$max_by",function c(a){var $=c.$$p||u,t=this;if(c.$$p=null,a==null&&(a=u),!k($))return C(t,"enum_for",["max_by",a],function i(){var s=i.$$s==null?this:i.$$s;return s.$enumerator_size()},{$$s:t});if(!k(a["$nil?"]()))return C(t,"sort_by",[],$.$to_proc()).$reverse().$take(a);var e,r;return t.$each.$$p=function(){var i=B.$destructure(arguments),s=P($,i);if(e===void 0){e=i,r=s;return}s["$<=>"](r)>0&&(e=i,r=s)},t.$each(),e===void 0?u:e},-1),L(_,"$min",function c(a){var $=c.$$p||u,t=this;if(c.$$p=null,a==null&&(a=u),!k(a["$nil?"]()))return $!==u?C(t,"sort",[],function(i,s){return i==null&&(i=u),s==null&&(s=u),n.yieldX($,[i,s])}).$take(a):t.$sort().$take(a);var e;return $!==u?t.$each.$$p=function(){var r=B.$destructure(arguments);if(e===void 0){e=r;return}var i=$(r,e);i===u&&Y.$raise(d("ArgumentError"),"comparison failed"),i<0&&(e=r)}:t.$each.$$p=function(){var r=B.$destructure(arguments);if(e===void 0){e=r;return}B.$compare(r,e)<0&&(e=r)},t.$each(),e===void 0?u:e},-1),L(_,"$min_by",function c(a){var $=c.$$p||u,t=this;if(c.$$p=null,a==null&&(a=u),!k($))return C(t,"enum_for",["min_by",a],function i(){var s=i.$$s==null?this:i.$$s;return s.$enumerator_size()},{$$s:t});if(!k(a["$nil?"]()))return C(t,"sort_by",[],$.$to_proc()).$take(a);var e,r;return t.$each.$$p=function(){var i=B.$destructure(arguments),s=P($,i);if(e===void 0){e=i,r=s;return}s["$<=>"](r)<0&&(e=i,r=s)},t.$each(),e===void 0?u:e},-1),L(_,"$minmax",function c(){var a=c.$$p||u,$=this,t=u;c.$$p=null,a=k(t=a)?t:C(Y,"proc",[],function(o,v){return o==null&&(o=u),v==null&&(v=u),o["$<=>"](v)});var e=u,r=u,i=!0;return $.$each.$$p=function(){var s=B.$destructure(arguments);if(i)e=r=s,i=!1;else{var o=a.$call(e,s);o===u?Y.$raise(d("ArgumentError"),"comparison failed"):o>0&&(e=s);var v=a.$call(r,s);v===u?Y.$raise(d("ArgumentError"),"comparison failed"):v<0&&(r=s)}},$.$each(),[e,r]}),L(_,"$minmax_by",function c(){var a=c.$$p||u,$=this;if(c.$$p=null,!k(a))return C($,"enum_for",["minmax_by"],function s(){var o=s.$$s==null?this:s.$$s;return o.$enumerator_size()},{$$s:$});var t=u,e=u,r,i;return $.$each.$$p=function(){var s=B.$destructure(arguments),o=P(a,s);(r===void 0||o["$<=>"](r)<0)&&(t=s,r=o),(i===void 0||o["$<=>"](i)>0)&&(e=s,i=o)},$.$each(),[t,e]}),L(_,"$none?",function c(a){try{var $=ie("return"),t=c.$$p||u,e=this;return c.$$p=null,k(a!==void 0)?C(e,"each",[],function r(i){var s,o,v=u;if(s=Z(arguments),o=s,v=G(o),k(C(a,"public_send",["==="].concat(p(v)))))$.$throw(!1,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):t!==u?C(e,"each",[],function r(i){var s,o;if(s=Z(arguments),o=s,k(n.yieldX(t,p(o))))$.$throw(!1,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):C(e,"each",[],function r(i){var s,o,v=u;if(s=Z(arguments),o=s,v=B.$destructure(o),k(v))$.$throw(!1,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),L(_,"$one?",function c(a){try{var $=ie("return"),t=c.$$p||u,e=this,r=u;return c.$$p=null,r=0,k(a!==void 0)?C(e,"each",[],function i(s){var o,v,S=u;if(o=Z(arguments),v=o,S=G(v),k(C(a,"public_send",["==="].concat(p(S)))))if(r=H(r,1),k(W(r,1)))$.$throw(!1,i.$$is_lambda);else return u;else return u},{$$arity:-1,$$ret:$}):t!==u?C(e,"each",[],function i(s){var o,v;if(o=Z(arguments),v=o,!k(n.yieldX(t,p(v))))return u;if(r=H(r,1),k(W(r,1)))$.$throw(!1,i.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):C(e,"each",[],function i(s){var o,v;if(o=Z(arguments),v=o,!k(B.$destructure(v)))return u;if(r=H(r,1),k(W(r,1)))$.$throw(!1,i.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),r["$=="](1)}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),L(_,"$partition",function c(){var a=c.$$p||u,$=this;if(c.$$p=null,a===u)return C($,"enum_for",["partition"],function r(){var i=r.$$s==null?this:r.$$s;return i.$enumerator_size()},{$$s:$});var t=[],e=[];return $.$each.$$p=function(){var r=B.$destructure(arguments),i=P(a,r);k(i)?t.push(r):e.push(r)},$.$each(),[t,e]}),L(_,"$reject",function c(){var a=c.$$p||u,$=this;if(c.$$p=null,a===u)return C($,"enum_for",["reject"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$});var t=[];return $.$each.$$p=function(){var e=B.$destructure(arguments),r=P(a,e);k(r)||t.push(e)},$.$each(),t}),L(_,"$reverse_each",function c(){var a=c.$$p||u,$=this;if(c.$$p=null,a===u)return C($,"enum_for",["reverse_each"],function r(){var i=r.$$s==null?this:r.$$s;return i.$enumerator_size()},{$$s:$});var t=[];$.$each.$$p=function(){t.push(arguments)},$.$each();for(var e=t.length-1;e>=0;e--)I(a,t[e]);return t}),L(_,"$slice_before",function c(a){var $=c.$$p||u,t=this;return c.$$p=null,k(a===void 0&&$===u)&&Y.$raise(d("ArgumentError"),"both pattern and block are given"),k(a!==void 0&&$!==u||arguments.length>1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),C(d("Enumerator"),"new",[],function e(r){var i=e.$$s==null?this:e.$$s;r==null&&(r=u);var s=[];$!==u?a===void 0?i.$each.$$p=function(){var o=B.$destructure(arguments),v=P($,o);k(v)&&s.length>0&&(r["$<<"](s),s=[]),s.push(o)}:i.$each.$$p=function(){var o=B.$destructure(arguments),v=$(o,a.$dup());k(v)&&s.length>0&&(r["$<<"](s),s=[]),s.push(o)}:i.$each.$$p=function(){var o=B.$destructure(arguments),v=a["$==="](o);k(v)&&s.length>0&&(r["$<<"](s),s=[]),s.push(o)},i.$each(),s.length>0&&r["$<<"](s)},{$$s:t})},-1),L(_,"$slice_after",function c(a){var $=c.$$p||u,t=this;return c.$$p=null,k(a===void 0&&$===u)&&Y.$raise(d("ArgumentError"),"both pattern and block are given"),k(a!==void 0&&$!==u||arguments.length>1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),k(a!==void 0)&&($=C(Y,"proc",[],function(r){return r==null&&(r=u),a["$==="](r)})),C(d("Enumerator"),"new",[],function e(r){var i=e.$$s==null?this:e.$$s;r==null&&(r=u);var s;i.$each.$$p=function(){var o=B.$destructure(arguments),v=P($,o);s==null&&(s=[]),k(v)?(s.push(o),r.$yield(s),s=null):s.push(o)},i.$each(),s!=null&&r.$yield(s)},{$$s:t})},-1),L(_,"$slice_when",function c(){var a=c.$$p||u,$=this;return c.$$p=null,a===u&&Y.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1)"),C(d("Enumerator"),"new",[],function t(e){var r=t.$$s==null?this:t.$$s;e==null&&(e=u);var i=u,s=u;r.$each_cons.$$p=function(){var o=B.$destructure(arguments),v=o[0],S=o[1],F=I(a,[v,S]);s=S,i===u&&(i=[]),k(F)?(i.push(v),e.$yield(i),i=[]):i.push(v)},r.$each_cons(2),i!==u&&(i.push(s),e.$yield(i))},{$$s:$})}),L(_,"$sort",function c(){var a=c.$$p||u,$=this,t=u;return c.$$p=null,t=$.$to_a(),a===u&&(a=E(function(r,i){return r==null&&(r=u),i==null&&(i=u),r["$<=>"](i)})),C(t,"sort",[],a.$to_proc())}),L(_,"$sort_by",function c(){var a=c.$$p||u,$=this,t=u;return c.$$p=null,a===u?C($,"enum_for",["sort_by"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$}):(t=C($,"map",[],function(){var r=u;return r=B.$destructure(arguments),[n.yield1(a,r),r]}),C(t,"sort!",[],function(r,i){return r==null&&(r=u),i==null&&(i=u),r[0]["$<=>"](i[0])}),C(t,"map!",[],function(r){return r==null&&(r=u),r[1]}))}),L(_,"$sum",function c(a){var $=c.$$p||u,t=this,e=u,r=u;return c.$$p=null,a==null&&(a=0),e=a,r=0,C(t,"each",[],function(s){var o,v,S=u,F=u,T=u;return o=Z(arguments),v=o,S=$!==u?n.yieldX($,p(v)):B.$destructure(v),M([d(d("Float"),"INFINITY"),d(d("Float"),"INFINITY")["$-@"]()]["$include?"](S))&&k(S["$respond_to?"]("-"))?(F=j(S,r),T=H(e,F),r=j(j(T,e),F),e=T):e=H(e,S)},-1),e},-1),L(_,"$take",function(a){var $=this;return $.$first(a)}),L(_,"$take_while",function c(){try{var a=ie("return"),$=c.$$p||u,t=this,e=u;return c.$$p=null,k($)?(e=[],C(t,"each",[],function r(i){var s,o,v=u;return s=Z(arguments),o=s,v=B.$destructure(o),k(n.yield1($,v))||a.$throw(e,r.$$is_lambda),e.push(v)},{$$arity:-1,$$ret:a})):t.$enum_for("take_while")}catch(r){if(r===a)return r.$v;throw r}finally{a.is_orphan=!0}}),L(_,"$uniq",function c(){var a=c.$$p||u,$=this,t=u;return c.$$p=null,t=new Map,C($,"each",[],function(r){var i,s,o,v=u,S=u;return i=Z(arguments),s=i,v=B.$destructure(s),S=a!==u?n.yield1(a,v):v,k(t["$key?"](S))?u:(o=[S,v],C(t,"[]=",o),o[o.length-1])},-1),t.$values()}),L(_,"$tally",function(a){var $=this,t=u;return a&&a!==u&&ee(a),t=C(C($,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),k(a)?(C(t,"each",[],function(r,i){var s;return r==null&&(r=u),i==null&&(i=u),s=[r,H(a.$fetch(r,0),i)],C(a,"[]=",s),s[s.length-1]}),a):t},-1),L(_,"$to_h",function c(a){var $=c.$$p||u,t,e,r=this;if(c.$$p=null,t=Z(arguments),e=t,$!==u)return C(C(r,"map",[],$.$to_proc()),"to_h",p(e));var i=new Map;return r.$each.$$p=function(){var s=B.$destructure(arguments),o=B["$coerce_to?"](s,d("Array"),"to_ary"),v,S;o.$$is_array||Y.$raise(d("TypeError"),"wrong element type "+s.$class()+" (expected array)"),o.length!==2&&Y.$raise(d("ArgumentError"),"element has wrong array length (expected 2, was "+o.$length()+")"),v=o[0],S=o[1],n.hash_put(i,v,S)},r.$each.apply(r,e),i},-1),L(_,"$to_set",function c(a,$){var t=c.$$p||u,e,r,i,s=this;return c.$$p=null,e=Z(arguments),e.length>0&&(r=e.shift()),r==null&&(r=x("Set")),i=e,C(r,"new",[s].concat(p(i)),t.$to_proc())},-1),L(_,"$zip",function c(a){c.$$p;var $,t,e=this;return c.$$p=null,$=Z(arguments),t=$,C(e.$to_a(),"zip",p(t))},-1),q(_,"find","detect"),q(_,"filter","find_all"),q(_,"flat_map","collect_concat"),q(_,"map","collect"),q(_,"member?","include?"),q(_,"reduce","inject"),q(_,"select","find_all"),q(_,"to_a","entries")}("::",m)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(n){var k=n.klass,y=n.truthy,P=n.to_a,I=n.eqeq,ee=n.Kernel,V=n.def,C=n.rb_gt,Z=n.rb_lt,p=n.rb_le,B=n.rb_ge,ie=n.rb_plus,L=n.rb_minus,Y=n.eqeqeq,te=n.not,W=n.rb_times,z=n.rb_divide,w=n.alias,K=[],H=n.nil,j=n.$$$;return n.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(R,g,E){var M=k(R,g,"Enumerator"),q=[M].concat(E);return function(m,u,d){var A=k(m,u,"ArithmeticSequence"),h=[A].concat(d),_=n.$r(h),l=A.$$prototype;l.step_arg2=l.receiver_num=l.step_arg1=l.step=l.range=l.topfx=l.bypfx=l.creation_method=l.skipped_arg=H,n.prop(A.$$prototype,"$$is_arithmetic_seq",!0);var x=1/0;return V(A,"$initialize",function(c,a,$){var t,e=this,r=H;return $==null&&($="step"),e.creation_method=$,y(c["$is_a?"](j("Array")))?(t=[].concat(P(c)),e.step_arg1=t[0]==null?H:t[0],e.step_arg2=t[1]==null?H:t[1],e.topfx=t[2]==null?H:t[2],e.bypfx=t[3]==null?H:t[3],e.receiver_num=a,e.step=1,e.range=y(e.step_arg2)?(e.step=e.step_arg2,n.Range.$new(e.receiver_num,e.step_arg1,!1)):y(e.step_arg1)?n.Range.$new(e.receiver_num,e.step_arg1,!1):n.Range.$new(e.receiver_num,H,!1)):(y(a)||(e.skipped_arg=!0),t=[c,y(r=a)?r:1],e.range=t[0],e.step=t[1]),e.object=e,I(e.step,0)&&ee.$raise(_("ArgumentError"),"step can't be 0"),y(e.step["$respond_to?"]("to_int"))?H:ee.$raise(_("ArgumentError"),"no implicit conversion of "+e.step.$class()+" into Integer")},-2),A.$attr_reader("step"),V(A,"$begin",function(){var c=this;return c.range.$begin()}),V(A,"$end",function(){var c=this;return c.range.$end()}),V(A,"$exclude_end?",function(){var c=this;return c.range["$exclude_end?"]()}),V(A,"$_lesser_than_end?",function(c){var a=this,$=H,t=H;return $=y(t=a.$end())?t:x,y(C(a.$step(),0))?y(a["$exclude_end?"]())?Z(c,$):p(c,$):y(a["$exclude_end?"]())?C(c,$):B(c,$)}),V(A,"$_greater_than_begin?",function(c){var a=this,$=H,t=H;return $=y(t=a.$begin())?t:x["$-@"](),y(C(a.$step(),0))?C(c,$):Z(c,$)}),V(A,"$first",function(c){var a=this,$=H,t=H,e=H;if($=y(t=a.$begin())?t:x["$-@"](),!y(c))return y(a["$_lesser_than_end?"]($))?$:H;for(e=[];y(y(t=a["$_lesser_than_end?"]($))?C(c,0):t);)e["$<<"]($),$=ie($,a.$step()),c=L(c,1);return e},-1),V(A,"$each",function G(){var c=G.$$p||H,a=this,$=H,t=H;if(G.$$p=null,c===H)return a;for(Y(H,$=a.$begin())&&ee.$raise(_("TypeError"),"nil can't be coerced into Integer"),t=y($=a.$begin())?$:x["$-@"]();y(a["$_lesser_than_end?"](t));)n.yield1(c,t),t=ie(t,a.$step());return a}),V(A,"$last",function(c){var a=this,$=H,t=H,e=H;if(Y(x,$=a.$end())||Y(x["$-@"](),$)?ee.$raise(j("FloatDomainError"),a.$end()):Y(H,$)&&ee.$raise(j("RangeError"),"cannot get the last element of endless arithmetic sequence"),t=L(a.$end(),L(a.$end(),a.$begin())["$%"](a.$step())),y(a["$_lesser_than_end?"](t))||(t=L(t,a.$step())),!y(c))return y(a["$_greater_than_begin?"](t))?t:H;for(e=[];y(y($=a["$_greater_than_begin?"](t))?C(c,0):$);)e["$<<"](t),t=L(t,a.$step()),c=L(c,1);return e.$reverse()},-1),V(A,"$size",function(){var c=this,a=H,$=H;return a=y(C(c.$step(),0))?1:-1,te(c["$_lesser_than_end?"](c.$begin()))?0:y([x["$-@"](),x]["$include?"](c.$step()))?1:y([W(x["$-@"](),a),H]["$include?"](c.$begin()))||y([W(x,a),H]["$include?"](c.$end()))?x:($=L(c.$end(),L(c.$end(),c.$begin())["$%"](c.$step())),y(c["$_lesser_than_end?"]($))||($=L($,c.$step())),ie(z(L($,c.$begin()),c.$step()).$abs().$to_i(),1))}),V(A,"$==",function(c){var a=this,$=H,t=H,e=H,r=H;return y($=y(t=y(e=y(r=a.$class()["$=="](c.$class()))?a.$begin()["$=="](c.$begin()):r)?a.$end()["$=="](c.$end()):e)?a.$step()["$=="](c.$step()):t)?a["$exclude_end?"]()["$=="](c["$exclude_end?"]()):$}),V(A,"$hash",function(){var c=this;return[_("ArithmeticSequence"),c.$begin(),c.$end(),c.$step(),c["$exclude_end?"]()].$hash()}),V(A,"$inspect",function(){var c=this,a=H;return y(c.receiver_num)?(a=y(c.step_arg2)?"("+c.topfx+c.step_arg1.$inspect()+", "+c.bypfx+c.step_arg2.$inspect()+")":y(c.step_arg1)?"("+c.topfx+c.step_arg1.$inspect()+")":H,"("+c.receiver_num.$inspect()+"."+c.creation_method+a+")"):(a=y(c.skipped_arg)?H:"("+c.step+")","(("+c.range.$inspect()+")."+c.creation_method+a+")")}),w(A,"===","=="),w(A,"eql?","==")}(M,M,q)}("::",null,K)};Opal.modules["corelib/enumerator/chain"]=function(n){var k=n.deny_frozen_access,y=n.klass,P=n.slice,I=n.def,ee=n.send,V=n.to_a,C=n.truthy,Z=n.rb_plus,p=n.thrower,B=n.nil,ie=n.$$$;return n.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(L,Y){var te=y(L,Y,"Enumerator");return function(W,z){var w=y(W,z,"Chain"),K=w.$$prototype;return K.enums=K.iterated=B,I(w,"$initialize",function(j){var R,g,E=this;return R=P(arguments),g=R,k(E),E.enums=g,E.iterated=[],E.object=E},-1),I(w,"$each",function H(j){var R=H.$$p||B,g,E,M=this;return H.$$p=null,g=P(arguments),E=g,R===B?ee(M,"to_enum",["each"].concat(V(E)),function q(){var m=q.$$s==null?this:q.$$s;return m.$size()},{$$s:M}):(ee(M.enums,"each",[],function q(m){var u=q.$$s==null?this:q.$$s;return u.iterated==null&&(u.iterated=B),m==null&&(m=B),u.iterated["$<<"](m),ee(m,"each",V(E),R.$to_proc())},{$$s:M}),M)},-1),I(w,"$size",function(j){try{var R=p("return"),g,E,M=this,q=B;return g=P(arguments),E=g,q=0,ee(M.enums,"each",[],function m(u){var d=B;return u==null&&(u=B),d=ee(u,"size",V(E)),C([B,ie(ie("Float"),"INFINITY")]["$include?"](d))&&R.$throw(d,m.$$is_lambda),q=Z(q,d)},{$$ret:R}),q}catch(m){if(m===R)return m.$v;throw m}finally{R.is_orphan=!0}},-1),I(w,"$rewind",function(){var j=this;return ee(j.iterated,"reverse_each",[],function(g){return g==null&&(g=B),C(g["$respond_to?"]("rewind"))?g.$rewind():B}),j.iterated=[],j}),I(w,"$inspect",function(){var j=this;return"#<Enumerator::Chain: "+j.enums.$inspect()+">"})}(te,te)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(n){var k=n.deny_frozen_access,y=n.klass,P=n.truthy,I=n.Kernel,ee=n.def,V=n.slice,C=n.send,Z=[],p=n.nil,B=n.$$$;return n.add_stubs("include,raise,new,to_proc"),function(ie,L,Y){var te=y(ie,L,"Enumerator"),W=[te].concat(Y);return function(z,w,K){var H=y(z,w,"Generator"),j=[H].concat(K),R=n.$r(j),g=H.$$prototype;return g.block=p,H.$include(B("Enumerable")),ee(H,"$initialize",function E(){var M=E.$$p||p,q=this;return E.$$p=null,k(q),P(M)||I.$raise(B("LocalJumpError"),"no block given"),q.block=M}),ee(H,"$each",function E(M){var q=E.$$p||p,m,u,d=this,A=p;E.$$p=null,m=V(arguments),u=m,A=C(R("Yielder"),"new",[],q.$to_proc());try{u.unshift(A),n.yieldX(d.block,u)}catch(h){if(h&&h.$thrower_type=="breaker")return h.$v;throw h}return d},-1)}(W[0],null,W)}(Z[0],null,Z)};Opal.modules["corelib/enumerator/lazy"]=function(n){var k=n.truthy,y=n.coerce_to,P=n.yield1,I=n.yieldX,ee=n.deny_frozen_access,V=n.klass,C=n.slice,Z=n.send2,p=n.find_super,B=n.to_a,ie=n.defs,L=n.Kernel,Y=n.send,te=n.def,W=n.return_self,z=n.Opal,w=n.rb_lt,K=n.eqeqeq,H=n.rb_plus,j=n.alias,R=[],g=n.nil,E=n.$$$;return n.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(M,q,m){var u=V(M,q,"Enumerator"),d=[u].concat(m);return function(A,h,_){var l=V(A,h,"Lazy"),x=[l].concat(_),G=n.$r(x),c=l.$$prototype;return c.enumerator=g,V(l,E("Exception"),"StopLazyError"),ie(l,"$for",function a($,t){var e,r,i=a.$$p||g,s=this,o=g;return a.$$p=null,e=C(arguments,1),r=e,o=Z(s,p(s,"for",a,!1,!0),"for",[$].concat(B(r)),i),o.enumerator=$,o},-2),te(l,"$initialize",function a($,t){var e=a.$$p||g,r=this;return a.$$p=null,t==null&&(t=g),ee(r),e===g&&L.$raise(E("ArgumentError"),"tried to call lazy new without a block"),r.enumerator=$,Z(r,p(r,"initialize",a,!1,!0),"initialize",[t],function(s,o){var v,S;s==null&&(s=g),v=C(arguments,1),S=v;try{return Y($,"each",B(S),function(T){var J,O;J=C(arguments),O=J,O.unshift(s),I(e,O)},-1)}catch(F){if(n.rescue(F,[G("StopLazyError")]))try{return g}finally{n.pop_exception(F)}else throw F}},-2)},-2),te(l,"$lazy",W),te(l,"$collect",function a(){var $=a.$$p||g,t=this;return a.$$p=null,k($)||L.$raise(E("ArgumentError"),"tried to call lazy map without a block"),Y(G("Lazy"),"new",[t,t.$enumerator_size()],function(r,i){var s,o;r==null&&(r=g),s=C(arguments,1),o=s;var v=I($,o);r.$yield(v)},-2)}),te(l,"$collect_concat",function a(){var $=a.$$p||g,t=this;return a.$$p=null,k($)||L.$raise(E("ArgumentError"),"tried to call lazy map without a block"),Y(G("Lazy"),"new",[t,g],function(r,i){var s,o;r==null&&(r=g),s=C(arguments,1),o=s;var v=I($,o);if(v["$respond_to?"]("force")&&v["$respond_to?"]("each"))Y(v,"each",[],function(T){return T==null&&(T=g),r.$yield(T)});else{var S=z.$try_convert(v,E("Array"),"to_ary");S===g?r.$yield(v):Y(v,"each",[],function(T){return T==null&&(T=g),r.$yield(T)})}},-2)}),te(l,"$drop",function($){var t=this,e=g,r=g,i=g;return $=y($,E("Integer"),"to_int"),k(w($,0))&&L.$raise(E("ArgumentError"),"attempt to drop negative size"),e=t.$enumerator_size(),r=K(E("Integer"),e)&&k(w($,e))?$:e,i=0,Y(G("Lazy"),"new",[t,r],function(o,v){var S,F;return o==null&&(o=g),S=C(arguments,1),F=S,k(w(i,$))?i=H(i,1):Y(o,"yield",B(F))},-2)}),te(l,"$drop_while",function a(){var $=a.$$p||g,t=this,e=g;return a.$$p=null,k($)||L.$raise(E("ArgumentError"),"tried to call lazy drop_while without a block"),e=!0,Y(G("Lazy"),"new",[t,g],function(i,s){var o,v;if(i==null&&(i=g),o=C(arguments,1),v=o,k(e)){var S=I($,v);k(S)||(e=!1,Y(i,"yield",B(v)))}else return Y(i,"yield",B(v))},-2)}),te(l,"$enum_for",function a($,t){var e=a.$$p||g,r,i,s,o=this;return a.$$p=null,r=C(arguments),r.length>0&&(i=r.shift()),i==null&&(i="each"),s=r,Y(o.$class(),"for",[o,i].concat(B(s)),e.$to_proc())},-1),te(l,"$find_all",function a(){var $=a.$$p||g,t=this;return a.$$p=null,k($)||L.$raise(E("ArgumentError"),"tried to call lazy select without a block"),Y(G("Lazy"),"new",[t,g],function(r,i){var s,o;r==null&&(r=g),s=C(arguments,1),o=s;var v=I($,o);k(v)&&Y(r,"yield",B(o))},-2)}),te(l,"$grep",function a($){var t=a.$$p||g,e=this;return a.$$p=null,k(t)?Y(G("Lazy"),"new",[e,g],function(i,s){var o,v;i==null&&(i=g),o=C(arguments,1),v=o;var S=z.$destructure(v),F=$["$==="](S);k(F)&&(F=P(t,S),i.$yield(P(t,S)))},-2):Y(G("Lazy"),"new",[e,g],function(i,s){var o,v;i==null&&(i=g),o=C(arguments,1),v=o;var S=z.$destructure(v),F=$["$==="](S);k(F)&&i.$yield(S)},-2)}),te(l,"$reject",function a(){var $=a.$$p||g,t=this;return a.$$p=null,k($)||L.$raise(E("ArgumentError"),"tried to call lazy reject without a block"),Y(G("Lazy"),"new",[t,g],function(r,i){var s,o;r==null&&(r=g),s=C(arguments,1),o=s;var v=I($,o);k(v)||Y(r,"yield",B(o))},-2)}),te(l,"$take",function($){var t=this,e=g,r=g,i=g;return $=y($,E("Integer"),"to_int"),k(w($,0))&&L.$raise(E("ArgumentError"),"attempt to take negative size"),e=t.$enumerator_size(),r=K(E("Integer"),e)&&k(w($,e))?$:e,i=0,Y(G("Lazy"),"new",[t,r],function(o,v){var S,F;return o==null&&(o=g),S=C(arguments,1),F=S,k(w(i,$))?(Y(o,"yield",B(F)),i=H(i,1)):L.$raise(G("StopLazyError"))},-2)}),te(l,"$take_while",function a(){var $=a.$$p||g,t=this;return a.$$p=null,k($)||L.$raise(E("ArgumentError"),"tried to call lazy take_while without a block"),Y(G("Lazy"),"new",[t,g],function(r,i){var s,o;r==null&&(r=g),s=C(arguments,1),o=s;var v=I($,o);k(v)?Y(r,"yield",B(o)):L.$raise(G("StopLazyError"))},-2)}),te(l,"$inspect",function(){var $=this;return"#<"+$.$class()+": "+$.enumerator.$inspect()+">"}),j(l,"force","to_a"),j(l,"filter","find_all"),j(l,"flat_map","collect_concat"),j(l,"map","collect"),j(l,"select","find_all"),j(l,"to_enum","enum_for")}(u,u,d)}("::",null,R)};Opal.modules["corelib/enumerator/yielder"]=function(n){var k=n.klass,y=n.def,P=n.slice,I=n.send,ee=n.to_a,V=[],C=n.nil;return n.add_stubs("yield,proc"),function(Z,p,B){var ie=k(Z,p,"Enumerator"),L=[ie].concat(B);return function(Y,te){var W=k(Y,te,"Yielder"),z=W.$$prototype;return z.block=C,y(W,"$initialize",function w(){var K=w.$$p||C,H=this;return w.$$p=null,H.block=K,H}),y(W,"$yield",function(K){var H,j,R=this;H=P(arguments),j=H;var g=n.yieldX(R.block,j);if(g&&g.$thrower_type=="break")throw g;return g},-1),y(W,"$<<",function(K){var H=this;return H.$yield(K),H}),y(W,"$to_proc",function(){var K=this;return I(K,"proc",[],function H(j){var R,g,E=H.$$s==null?this:H.$$s;return R=P(arguments),g=R,I(E,"yield",ee(g))},{$$arity:-1,$$s:K})})}(L[0],null)}(V[0],null,V)};Opal.modules["corelib/enumerator"]=function(n){var k=n.slice,y=n.coerce_to,P=n.deny_frozen_access,I=n.klass,ee=n.defs,V=n.truthy,C=n.send,Z=n.not,p=n.def,B=n.rb_plus,ie=n.to_a,L=n.Opal,Y=n.send2,te=n.find_super,W=n.rb_ge,z=n.Kernel,w=n.rb_le,K=n.alias,H=n.top,j=[],R=n.nil,g=n.$$$;return n.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),H.$require("corelib/enumerable"),function(E,M,q){var m=I(E,M,"Enumerator"),u=[m].concat(q),d=n.$r(u),A=m.$$prototype;return A.size=A.args=A.object=A.method=A.values=A.cursor=R,m.$include(g("Enumerable")),m.$$prototype.$$is_enumerator=!0,ee(m,"$for",function h(_,l,x){var G=h.$$p||R,c,a,$,t=this;h.$$p=null,c=k(arguments,1),c.length>0&&(a=c.shift()),a==null&&(a="each"),$=c;var e=t.$allocate();return e.object=_,e.size=G,e.method=a,e.args=$,e.cursor=0,e},-2),p(m,"$initialize",function h(_){var l=h.$$p||R,x=this;return h.$$p=null,k(arguments),P(x),x.cursor=0,V(l)?(x.object=C(d("Generator"),"new",[],l.$to_proc()),x.method="each",x.args=[],x.size=arguments[0]||R,V(x.size)&&Z(x.size["$respond_to?"]("call"))?x.size=y(x.size,g("Integer"),"to_int"):R):(x.object=arguments[0],x.method=arguments[1]||"each",x.args=k(arguments,2),x.size=R)},-1),p(m,"$each",function h(_){var l=h.$$p||R,x,G,c=this;return h.$$p=null,x=k(arguments),G=x,V(l["$nil?"]())&&V(G["$empty?"]())?c:(G=B(c.args,G),V(l["$nil?"]())?C(c.$class(),"new",[c.object,c.method].concat(ie(G))):C(c.object,"__send__",[c.method].concat(ie(G)),l.$to_proc()))},-1),p(m,"$size",function(){var _=this;return V(_.size["$respond_to?"]("call"))?C(_.size,"call",ie(_.args)):_.size}),p(m,"$with_index",function h(_){var l=h.$$p||R,x=this;if(h.$$p=null,_==null&&(_=0),_=V(_)?y(_,g("Integer"),"to_int"):0,!V(l))return C(x,"enum_for",["with_index",_],function c(){var a=c.$$s==null?this:c.$$s;return a.$size()},{$$s:x});var G=_;return x.$each.$$p=function(){var c=L.$destructure(arguments),a=l(c,G);return G++,a},x.$each()},-1),p(m,"$each_with_index",function h(){var _=h.$$p||R,l=this;return h.$$p=null,_===R?C(l,"enum_for",["each_with_index"],function x(){var G=x.$$s==null?this:x.$$s;return G.$size()},{$$s:l}):(Y(l,te(l,"each_with_index",h,!1,!0),"each_with_index",[],_),l.object)}),p(m,"$rewind",function(){var _=this;return _.cursor=0,_}),p(m,"$peek_values",function(){var _=this,l=R;return _.values=V(l=_.values)?l:C(_,"map",[],function(G){var c,a;return c=k(arguments),a=c,a},-1),V(W(_.cursor,_.values.$length()))&&z.$raise(g("StopIteration"),"iteration reached an end"),_.values["$[]"](_.cursor)}),p(m,"$peek",function(){var _=this,l=R;return l=_.$peek_values(),V(w(l.$length(),1))?l["$[]"](0):l}),p(m,"$next_values",function(){var _=this,l=R;return l=_.$peek_values(),_.cursor=B(_.cursor,1),l}),p(m,"$next",function(){var _=this,l=R;return l=_.$next_values(),V(w(l.$length(),1))?l["$[]"](0):l}),p(m,"$feed",function(_){var l=this;return l.$raise(d("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),p(m,"$+",function(_){var l=this;return g(g("Enumerator"),"Chain").$new(l,_)}),p(m,"$inspect",function(){var _=this,l=R;return l="#<"+_.$class()+": "+_.object.$inspect()+":"+_.method,V(_.args["$any?"]())&&(l=B(l,"("+_.args.$inspect()["$[]"](g("Range").$new(1,-2))+")")),B(l,">")}),K(m,"with_object","each_with_object"),m.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),m.$autoload("Chain","corelib/enumerator/chain"),m.$autoload("Generator","corelib/enumerator/generator"),m.$autoload("Lazy","corelib/enumerator/lazy"),m.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,j)};Opal.modules["corelib/numeric"]=function(n){var k=n.klass,y=n.truthy,P=n.Kernel,I=n.def,ee=n.to_ary,V=n.return_self,C=n.rb_minus,Z=n.rb_times,p=n.rb_lt,B=n.eqeq,ie=n.rb_divide,L=n.return_val,Y=n.Opal,te=n.slice,W=n.extract_kwargs,z=n.ensure_kwargs,w=n.hash_get,K=n.not,H=n.send,j=n.rb_ge,R=n.rb_le,g=n.rb_plus,E=n.rb_gt,M=n.alias,q=n.top,m=n.nil,u=n.$$$;return n.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),q.$require("corelib/comparable"),function(d,A){var h=k(d,A,"Numeric");return h.$include(u("Comparable")),I(h,"$coerce",function(l){var x=this;return y(l["$instance_of?"](x.$class()))?[l,x]:[P.$Float(l),P.$Float(x)]}),I(h,"$__coerced__",function(l,x){var G,c,a=this,$=m,t=m;if(y(x["$respond_to?"]("coerce")))return c=x.$coerce(a),G=ee(c),$=G[0]==null?m:G[0],t=G[1]==null?m:G[1],$.$__send__(l,t);switch(l.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return P.$raise(u("TypeError"),""+x.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return P.$raise(u("ArgumentError"),"comparison of "+a.$class()+" with "+x.$class()+" failed");default:return m}}),I(h,"$<=>",function(l){var x=this;return y(x["$equal?"](l))?0:m}),I(h,"$+@",V),I(h,"$-@",function(){var l=this;return C(0,l)}),I(h,"$%",function(l){var x=this;return C(x,Z(l,x.$div(l)))}),I(h,"$abs",function(){var l=this;return y(p(l,0))?l["$-@"]():l}),I(h,"$abs2",function(){var l=this;return Z(l,l)}),I(h,"$angle",function(){var l=this;return y(p(l,0))?u(u("Math"),"PI"):0}),I(h,"$ceil",function(l){var x=this;return l==null&&(l=0),x.$to_f().$ceil(l)},-1),I(h,"$conj",V),I(h,"$denominator",function(){var l=this;return l.$to_r().$denominator()}),I(h,"$div",function(l){var x=this;return B(l,0)&&P.$raise(u("ZeroDivisionError"),"divided by o"),ie(x,l).$floor()}),I(h,"$divmod",function(l){var x=this;return[x.$div(l),x["$%"](l)]}),I(h,"$fdiv",function(l){var x=this;return ie(x.$to_f(),l)}),I(h,"$floor",function(l){var x=this;return l==null&&(l=0),x.$to_f().$floor(l)},-1),I(h,"$i",function(){var l=this;return P.$Complex(0,l)}),I(h,"$imag",L(0)),I(h,"$integer?",L(!1)),I(h,"$nonzero?",function(){var l=this;return y(l["$zero?"]())?m:l}),I(h,"$numerator",function(){var l=this;return l.$to_r().$numerator()}),I(h,"$polar",function(){var l=this;return[l.$abs(),l.$arg()]}),I(h,"$quo",function(l){var x=this;return ie(Y["$coerce_to!"](x,u("Rational"),"to_r"),l)}),I(h,"$real",V),I(h,"$real?",L(!0)),I(h,"$rect",function(){var l=this;return[l,0]}),I(h,"$round",function(l){var x=this;return x.$to_f().$round(l)},-1),I(h,"$step",function _(l,x,G){var c=_.$$p||m,a,$,t,e,r,i,s=this,o=m;_.$$p=null,a=te(arguments),$=W(a),$=z($),a.length>0&&(t=a.shift()),a.length>0&&(e=a.shift()),r=w($,"to"),i=w($,"by"),t!==void 0&&r!==void 0&&P.$raise(u("ArgumentError"),"to is given twice"),e!==void 0&&i!==void 0&&P.$raise(u("ArgumentError"),"step is given twice"),r!==void 0&&(t=r),i!==void 0&&(e=i),t===void 0&&(t=m);function v(){e===m&&P.$raise(u("TypeError"),"step must be numeric"),e!=null&&e["$=="](0)&&P.$raise(u("ArgumentError"),"step can't be 0"),(e===m||e==null)&&(e=1);var he=e["$<=>"](0);he===m&&P.$raise(u("ArgumentError"),"0 can't be coerced into "+e.$class()),(t===m||t==null)&&(t=he>0?u(u("Float"),"INFINITY"):u(u("Float"),"INFINITY")["$-@"]()),Y.$compare(s,t)}function S(){if(e>0&&s>t||e<0&&s<t)return 0;if(e===1/0||e===-1/0)return 1;var he=Math.abs,ve=Math.floor,me=(he(s)+he(t)+he(t-s))/he(e)*u(u("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((t-s)/e+me)+1)}function F(){if(v(),e===0)return 1/0;if(e%1!==0)return S();if(e>0&&s>t||e<0&&s<t)return 0;var he=Math.ceil,ve=Math.abs,me=ve(s-t)+1,be=ve(e);return he(me/be)}if(c===m)return(K(t)||y(t["$is_a?"](u("Numeric"))))&&(K(e)||y(e["$is_a?"](u("Numeric"))))?u(u("Enumerator"),"ArithmeticSequence").$new([t,e,y(r)?"to: ":m,y(i)?"by: ":m],s):H(s,"enum_for",["step",t,e],F.$to_proc());v();var T=e["$negative?"](),J=e["$=="](0)||t===1/0&&!T||t===-1/0&&T;if(s.$$is_number&&e.$$is_number&&t.$$is_number)if(s%1===0&&(J||t%1===0)&&e%1===0){var O=s;if(J)for(;;O+=e)c(O);else if(T)for(;O>=t;O+=e)c(O);else for(;O<=t;O+=e)c(O);return s}else{var ae=s.$to_f().valueOf();e=e.$to_f().valueOf(),t=t.$to_f().valueOf();var le=S();if(!isFinite(e))le!==0&&c(ae);else if(e===0)for(;;)c(ae);else for(var ce=0;ce<le;ce++){var de=ce*e+s;(e>=0?t<de:t>de)&&(de=t),c(de)}return s}for(o=s;y(T?j(o,t):R(o,t));)n.yield1(c,o),o=g(o,e)},-1),I(h,"$to_c",function(){var l=this;return P.$Complex(l,0)}),I(h,"$to_int",function(){var l=this;return l.$to_i()}),I(h,"$truncate",function(l){var x=this;return l==null&&(l=0),x.$to_f().$truncate(l)},-1),I(h,"$zero?",function(){var l=this;return l["$=="](0)}),I(h,"$positive?",function(){var l=this;return E(l,0)}),I(h,"$negative?",function(){var l=this;return p(l,0)}),I(h,"$dup",V),I(h,"$clone",function(l){var x=this;return l=z(l),w(l,"freeze"),x},-1),I(h,"$finite?",L(!0)),I(h,"$infinite?",L(m)),M(h,"arg","angle"),M(h,"conjugate","conj"),M(h,"imaginary","imag"),M(h,"magnitude","abs"),M(h,"modulo","%"),M(h,"phase","arg"),M(h,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(n){var k=n.truthy,y=n.falsy,P=n.yield1,I=n.hash_get,ee=n.hash_put,V=n.hash_delete,C=n.coerce_to,Z=n.respond_to,p=n.deny_frozen_access,B=n.freeze,ie=n.opal32_init,L=n.opal32_add,Y=n.klass,te=n.slice,W=n.defs,z=n.Kernel,w=n.def,K=n.Opal,H=n.eqeqeq,j=n.send2,R=n.find_super,g=n.send,E=n.rb_gt,M=n.rb_times,q=n.eqeq,m=n.rb_minus,u=n.to_a,d=n.to_ary,A=n.gvars,h=n.rb_ge,_=n.assign_ivar,l=n.rb_lt,x=n.return_self,G=n.neqeq,c=n.alias,a=n.top,$=[],t=n.nil,e=n.$$$;return n.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),a.$require("corelib/enumerable"),a.$require("corelib/numeric"),function(r,i,s){var o=Y(r,i,"Array"),v=[o].concat(s),S=n.$r(v);o.$include(e("Enumerable")),n.prop(o.$$prototype,"$$is_array",!0);function F($e){for(var N=$e[0],D=1,X=$e.length;D<X;D++)$e[D-1]=$e[D];return $e.pop(),N}function T($e,N){return N.$$name===n.Array?$e:N.$allocate().$replace($e.$to_a())}function J($e,N,D){for(var X,Q=null,ne=new Array($e.length),se=0,oe=0;se<$e.length;se++){if(!Q)try{X=P(D,$e[se])}catch(fe){Q=fe}(Q||N(X))&&(ne[oe]=$e[se],oe+=1)}if(oe!==se&&($e.splice.apply($e,[0,ne.length].concat(ne)),$e.splice(oe,ne.length)),Q)throw Q}function O($e){return $e.$$is_array||($e=C($e,e("Array"),"to_ary")),$e.$to_a()}function ae($e,N){var D=N.length;if(D>6&&D<32767)$e.push.apply($e,N);else for(var X=0;X<D;X++)$e.push(N[X])}W(o,"$[]",function(N){var D,X,Q=this;return D=te(arguments),X=D,T(X,Q)},-1),w(o,"$initialize",function $e(N,D){var X=$e.$$p||t,Q=this;if($e.$$p=null,N==null&&(N=t),D==null&&(D=t),p(Q),D!==t&&X!==t&&z.$warn("warning: block supersedes default value argument"),N>e(e("Integer"),"MAX")&&z.$raise(e("ArgumentError"),"array size too big"),arguments.length>2&&z.$raise(e("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return Q.length>0&&Q.splice(0,Q.length),Q;if(arguments.length===1){if(N.$$is_array)return Q.$replace(N.$to_a()),Q;if(N["$respond_to?"]("to_ary"))return Q.$replace(N.$to_ary()),Q}N=C(N,e("Integer"),"to_int"),N<0&&z.$raise(e("ArgumentError"),"negative array size"),Q.splice(0,Q.length);var ne,se;if(X===t)for(ne=0;ne<N;ne++)Q.push(D);else for(ne=0,se;ne<N;ne++)se=X(ne),Q[ne]=se;return Q},-1),W(o,"$try_convert",function(N){return K["$coerce_to?"](N,e("Array"),"to_ary")}),w(o,"$&",function(N){var D=this;if(N=O(N),D.length===0||N.length===0)return[];var X=[],Q=new Map,ne,se,oe;for(ne=0,se=N.length;ne<se;ne++)ee(Q,N[ne],!0);for(ne=0,se=D.length;ne<se;ne++)oe=D[ne],V(Q,oe)!==void 0&&X.push(oe);return X}),w(o,"$|",function(N){var D=this;N=O(N);var X=new Map,Q,ne;for(Q=0,ne=D.length;Q<ne;Q++)ee(X,D[Q],!0);for(Q=0,ne=N.length;Q<ne;Q++)ee(X,N[Q],!0);return X.$keys()}),w(o,"$*",function(N){var D=this;if(k(N["$respond_to?"]("to_str")))return D.$join(N.$to_str());N=C(N,e("Integer"),"to_int"),k(N<0)&&z.$raise(e("ArgumentError"),"negative argument");for(var X=[],Q=D.$to_a(),ne=0;ne<N;ne++)X=X.concat(Q);return X}),w(o,"$+",function(N){var D=this;return N=O(N),D.concat(N)}),w(o,"$-",function(N){var D=this;if(N=O(N),k(D.length===0))return[];if(k(N.length===0))return D.slice();var X=[],Q=new Map,ne,se,oe;for(ne=0,se=N.length;ne<se;ne++)ee(Q,N[ne],!0);for(ne=0,se=D.length;ne<se;ne++)oe=D[ne],I(Q,oe)===void 0&&X.push(oe);return X}),w(o,"$<<",function(N){var D=this;return p(D),D.push(N),D}),w(o,"$<=>",function(N){var D=this;if(H(e("Array"),N))N=N.$to_a();else if(k(N["$respond_to?"]("to_ary")))N=N.$to_ary().$to_a();else return t;if(D===N)return 0;for(var X=Math.min(D.length,N.length),Q=0;Q<X;Q++){var ne=D[Q]["$<=>"](N[Q]);if(ne!==0)return ne}return D.length["$<=>"](N.length)}),w(o,"$==",function(N){var D=this,X={};function Q(ne,se){var oe,fe,f,b;if(ne===se)return!0;if(!se.$$is_array)return Z(se,"$to_ary")?se["$=="](ne):!1;if(ne.$$constructor!==Array&&(ne=ne.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),ne.length!==se.length)return!1;for(X[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(f=ne[oe],b=se[oe],f.$$is_array){if(b.$$is_array&&b.length!==f.length||!X.hasOwnProperty(f.$object_id())&&!Q(f,b))return!1}else if(!f["$=="](b))return!1;return!0}return Q(D,N)});function le($e,N){var D=$e.length,X,Q,ne,se;return X=N.excl,Q=N.begin===t?0:C(N.begin,n.Integer,"to_int"),ne=N.end===t?-1:C(N.end,n.Integer,"to_int"),Q<0&&(Q+=D,Q<0)||(N.excl_rev&&N.begin!==t&&(Q+=1),Q>D)?t:ne<0&&(ne+=D,ne<0)?[]:((!X||N.end===t)&&(ne+=1),se=$e.slice(Q,ne),se)}function ce($e,N){var D,X=[],Q=0,ne;for(N.step<0?(ne={begin:N.range.end,end:N.range.begin,excl:!1,excl_rev:N.range.excl},D=le($e,ne).$reverse()):D=le($e,N.range);Q<D.length;)X.push(D[Q]),Q+=Math.abs(N.step);return X}function de($e,N,D){var X=$e.length,Q;return N=C(N,n.Integer,"to_int"),N<0&&(N+=X,N<0)?t:D===void 0?N>=X||N<0?t:$e[N]:(D=C(D,n.Integer,"to_int"),D<0||N>X||N<0?t:(Q=$e.slice(N,N+D),Q))}w(o,"$[]",function(N,D){var X=this;return N.$$is_range?le(X,N):N.$$is_arithmetic_seq?ce(X,N):de(X,N,D)},-2),w(o,"$[]=",function(N,D,X){var Q=this,ne=t,se=t;p(Q),ne=t;var oe,fe=Q.length;if(N.$$is_range){D.$$is_array?ne=D.$to_a():D["$respond_to?"]("to_ary")?ne=D.$to_ary().$to_a():ne=[D];var f=N.excl,b=N.begin===t?0:C(N.begin,n.Integer,"to_int"),U=N.end===t?-1:C(N.end,n.Integer,"to_int");if(b<0&&(b+=fe,b<0&&z.$raise(e("RangeError"),""+N.$inspect()+" out of range")),U<0&&(U+=fe),(!f||N.end===t)&&(U+=1),b>fe)for(oe=fe;oe<b;oe++)Q[oe]=t;return U<0?Q.splice.apply(Q,[b,0].concat(ne)):Q.splice.apply(Q,[b,U-b].concat(ne)),D}else{X===void 0?se=1:(se=D,D=X,D.$$is_array?ne=D.$to_a():D["$respond_to?"]("to_ary")?ne=D.$to_ary().$to_a():ne=[D]);var re;if(N=C(N,e("Integer"),"to_int"),se=C(se,e("Integer"),"to_int"),N<0&&(re=N,N+=fe,N<0&&z.$raise(e("IndexError"),"index "+re+" too small for array; minimum "+-Q.length)),se<0&&z.$raise(e("IndexError"),"negative length ("+se+")"),N>fe)for(oe=fe;oe<N;oe++)Q[oe]=t;return X===void 0?Q[N]=D:Q.splice.apply(Q,[N,se].concat(ne)),D}},-3),w(o,"$any?",function $e(N){var D=$e.$$p||t,X=this;return $e.$$p=null,X.length===0?!1:j(X,R(X,"any?",$e,!1,!0),"any?",[N],D)},-1),w(o,"$assoc",function(N){for(var D=this,X=0,Q=D.length,ne;X<Q;X++)if(ne=D[X],ne.length&&ne[0]["$=="](N))return ne;return t}),w(o,"$at",function(N){var D=this;return N=C(N,e("Integer"),"to_int"),N<0&&(N+=D.length),N<0||N>=D.length?t:D[N]}),w(o,"$bsearch_index",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return D.$enum_for("bsearch_index");for(var X=0,Q=D.length,ne,se,oe,fe=!1,f=t;X<Q;){if(ne=X+Math.floor((Q-X)/2),se=D[ne],oe=P(N,se),oe===!0)f=ne,fe=!0;else if(oe===!1||oe===t)fe=!1;else if(oe.$$is_number){if(oe===0)return ne;fe=oe<0}else z.$raise(e("TypeError"),"wrong argument type "+oe.$class()+" (must be numeric, true, false or nil)");fe?Q=ne:X=ne+1}return f}),w(o,"$bsearch",function $e(){var N=$e.$$p||t,D=this,X=t;return $e.$$p=null,N===t?D.$enum_for("bsearch"):(X=g(D,"bsearch_index",[],N.$to_proc()),X!=null&&X.$$is_number?D[X]:X)}),w(o,"$cycle",function $e(N){var D=$e.$$p||t,X=this;if($e.$$p=null,N==null&&(N=t),D===t)return g(X,"enum_for",["cycle",N],function se(){var oe=se.$$s==null?this:se.$$s;return k(N["$nil?"]())?e(e("Float"),"INFINITY"):(N=K["$coerce_to!"](N,e("Integer"),"to_int"),k(E(N,0))?M(oe.$enumerator_size(),N):0)},{$$s:X});if(k(X["$empty?"]())||q(N,0))return t;var Q,ne;if(N===t)for(;;)for(Q=0,ne=X.length;Q<ne;Q++)P(D,X[Q]);else{if(N=K["$coerce_to!"](N,e("Integer"),"to_int"),N<=0)return X;for(;N>0;){for(Q=0,ne=X.length;Q<ne;Q++)P(D,X[Q]);N--}}return X},-1),w(o,"$clear",function(){var N=this;return p(N),N.splice(0,N.length),N}),w(o,"$count",function $e(N){var D=$e.$$p||t,X=this;return $e.$$p=null,k(N!==void 0)||k(D)?j(X,R(X,"count",$e,!1,!0),"count",[N],D):X.$size()},-1),w(o,"$initialize_copy",function(N){var D=this;return D.$replace(N)}),w(o,"$collect",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["collect"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:D});for(var X=[],Q=0;Q<D.length;Q++){var ne=P(N,D[Q]);X[Q]=ne}return X}),w(o,"$collect!",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["collect!"],function ne(){var se=ne.$$s==null?this:ne.$$s;return se.$size()},{$$s:D});p(D);for(var X=0;X<D.length;X++){var Q=P(N,D[X]);D[X]=Q}return D});function he($e,N){return $e===N||N===0?1:N>0&&$e>N?he($e-1,N-1)+he($e-1,N):0}w(o,"$combination",function $e(N){var D=$e.$$p||t,X=this,Q=t;if($e.$$p=null,Q=K["$coerce_to!"](N,e("Integer"),"to_int"),D===t)return g(X,"enum_for",["combination",Q],function re(){var ue=re.$$s==null?this:re.$$s;return he(ue.length,Q)},{$$s:X});var ne,se,oe,fe,f,b,U;if(Q===0)n.yield1(D,[]);else if(Q===1)for(ne=0,se=X.length;ne<se;ne++)n.yield1(D,[X[ne]]);else if(Q===X.length)n.yield1(D,X.slice());else if(Q>=0&&Q<X.length){for(oe=[],ne=0;ne<=Q+1;ne++)oe.push(0);for(fe=[],f=0,b=!1,oe[0]=-1;!b;){for(fe[f]=X[oe[f+1]];f<Q-1;)f++,U=oe[f+1]=oe[f]+1,fe[f]=X[U];n.yield1(D,fe.slice()),f++;do b=f===0,oe[f]++,f--;while(oe[f+1]+Q===X.length+f+1)}}return X}),w(o,"$repeated_combination",function $e(N){var D=$e.$$p||t,X=this,Q=t;if($e.$$p=null,Q=K["$coerce_to!"](N,e("Integer"),"to_int"),D===t)return g(X,"enum_for",["repeated_combination",Q],function se(){var oe=se.$$s==null?this:se.$$s;return he(oe.length+Q-1,Q)},{$$s:X});function ne(se,oe,fe,f){if(fe.length==se){var b=fe.slice();n.yield1(D,b);return}for(var U=oe;U<f.length;U++)fe.push(f[U]),ne(se,U,fe,f),fe.pop()}return Q>=0&&ne(Q,0,[],X),X}),w(o,"$compact",function(){for(var N=this,D=[],X=0,Q=N.length,ne;X<Q;X++)(ne=N[X])!==t&&D.push(ne);return D}),w(o,"$compact!",function(){var N=this;p(N);for(var D=N.length,X=0,Q=N.length;X<Q;X++)N[X]===t&&(N.splice(X,1),Q--,X--);return N.length===D?t:N}),w(o,"$concat",function(N){var D,X,Q=this;return D=te(arguments),X=D,p(Q),X=g(X,"map",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;return se==null&&(se=t),se=O(se),k(se["$equal?"](oe))&&(se=se.$dup()),se},{$$s:Q}),g(X,"each",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;se==null&&(se=t);for(var fe=0,f=se.length;fe<f;fe++)oe.push(se[fe])},{$$s:Q}),Q},-1),w(o,"$delete",function $e(N){var D=$e.$$p||t,X=this;$e.$$p=null;for(var Q=X.length,ne=0,se=Q;ne<se;ne++)X[ne]["$=="](N)&&(p(X),X.splice(ne,1),se--,ne--);return X.length===Q?D!==t?n.yieldX(D,[]):t:N}),w(o,"$delete_at",function(N){var D=this;if(p(D),N=C(N,e("Integer"),"to_int"),N<0&&(N+=D.length),N<0||N>=D.length)return t;var X=D[N];return D.splice(N,1),X}),w(o,"$delete_if",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,N===t?g(D,"enum_for",["delete_if"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:D}):(p(D),J(D,y,N),D)}),w(o,"$difference",function(N){var D,X,Q=this;return D=te(arguments),X=D,g(X,"reduce",[Q.$to_a().$dup()],function(se,oe){return se==null&&(se=t),oe==null&&(oe=t),m(se,oe)})},-1),w(o,"$dig",function(N,D){var X,Q,ne=this,se=t;return X=te(arguments,1),Q=X,se=ne["$[]"](N),se===t||Q.length===0?se:(k(se["$respond_to?"]("dig"))||z.$raise(e("TypeError"),""+se.$class()+" does not have #dig method"),g(se,"dig",u(Q)))},-2),w(o,"$drop",function(N){var D=this;return N=C(N,e("Integer"),"to_int"),N<0&&z.$raise(e("ArgumentError")),D.slice(N)}),w(o,"$dup",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,D.$$class===n.Array&&D.$$class.$allocate.$$pristine&&D.$copy_instance_variables.$$pristine&&D.$initialize_dup.$$pristine?D.slice(0):j(D,R(D,"dup",$e,!1,!0),"dup",[],N)}),w(o,"$each",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:D});for(var X=0;X<D.length;X++)P(N,D[X]);return D}),w(o,"$each_index",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["each_index"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:D});for(var X=0;X<D.length;X++)P(N,X);return D}),w(o,"$empty?",function(){var N=this;return N.length===0}),w(o,"$eql?",function(N){var D=this,X={};function Q(ne,se){var oe,fe,f,b;if(!se.$$is_array||(se=se.$to_a(),ne.length!==se.length))return!1;for(X[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(f=ne[oe],b=se[oe],f.$$is_array){if(b.$$is_array&&b.length!==f.length||!X.hasOwnProperty(f.$object_id())&&!Q(f,b))return!1}else if(!f["$eql?"](b))return!1;return!0}return Q(D,N)}),w(o,"$fetch",function $e(N,D){var X=$e.$$p||t,Q=this;$e.$$p=null;var ne=N;if(N=C(N,e("Integer"),"to_int"),N<0&&(N+=Q.length),N>=0&&N<Q.length)return Q[N];if(X!==t&&D!=null&&Q.$warn("warning: block supersedes default value argument"),X!==t)return X(ne);if(D!=null)return D;Q.length===0?z.$raise(e("IndexError"),"index "+ne+" outside of array bounds: 0...0"):z.$raise(e("IndexError"),"index "+ne+" outside of array bounds: -"+Q.length+"..."+Q.length)},-2),w(o,"$fill",function $e(N){var D=$e.$$p||t,X,Q,ne,se,oe=this,fe=t,f=t,b=t,U=t,re=t;$e.$$p=null,X=te(arguments),Q=X,p(oe);var ue,_e;if(k(D)?(k(Q.length>2)&&z.$raise(e("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 0..2)"),se=Q,ne=d(se),fe=ne[0]==null?t:ne[0],f=ne[1]==null?t:ne[1]):(k(Q.length==0)?z.$raise(e("ArgumentError"),"wrong number of arguments (0 for 1..3)"):k(Q.length>3)&&z.$raise(e("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 1..3)"),se=Q,ne=d(se),b=ne[0]==null?t:ne[0],fe=ne[1]==null?t:ne[1],f=ne[2]==null?t:ne[2]),H(e("Range"),fe)){if(k(f)&&z.$raise(e("TypeError"),"length invalid with range"),U=fe.begin===t?0:C(fe.begin,e("Integer"),"to_int"),k(U<0)&&(U+=this.length),k(U<0)&&z.$raise(e("RangeError"),""+fe.$inspect()+" out of range"),re=fe.end===t?-1:C(fe.end,e("Integer"),"to_int"),k(re<0)&&(re+=this.length),k(fe["$exclude_end?"]())||(re+=1),k(re<=U))return oe}else if(k(fe))if(U=C(fe,e("Integer"),"to_int"),k(U<0)&&(U+=this.length),k(U<0)&&(U=0),k(f)){if(re=C(f,e("Integer"),"to_int"),k(re==0))return oe;re+=U}else re=this.length;else U=0,re=this.length;if(k(U>this.length))for(ue=this.length;ue<re;ue++)oe[ue]=t;if(k(re>this.length)&&(this.length=re),k(D))for(this.length;U<re;U++)_e=D(U),oe[U]=_e;else for(this.length;U<re;U++)oe[U]=b;return oe},-1),w(o,"$first",function(N){var D=this;return N==null?D.length===0?t:D[0]:(N=C(N,e("Integer"),"to_int"),N<0&&z.$raise(e("ArgumentError"),"negative array size"),D.slice(0,N))},-1),w(o,"$flatten",function(N){var D=this;function X(Q,ne){var se=[],oe,fe,f,b;for(Q=Q.$to_a(),oe=0,fe=Q.length;oe<fe;oe++){if(f=Q[oe],!Z(f,"$to_ary",!0)){se.push(f);continue}if(b=f.$to_ary(),b===t){se.push(f);continue}switch(b.$$is_array||z.$raise(e("TypeError")),b===D&&z.$raise(e("ArgumentError")),ne){case void 0:se=se.concat(X(b));break;case 0:se.push(b);break;default:ae(se,X(b,ne-1))}}return se}return N!==void 0&&(N=C(N,e("Integer"),"to_int")),X(D,N)},-1),w(o,"$flatten!",function(N){var D=this;p(D);var X=D.$flatten(N);if(D.length==X.length){for(var Q=0,ne=D.length;Q<ne&&D[Q]===X[Q];Q++);if(Q==ne)return t}return D.$replace(X),D},-1),w(o,"$freeze",function(){var N=this;return k(N["$frozen?"]())?N:B(N)});var ve;w(o,"$hash",function(){var N=this,D=ve===void 0,X=ie(),Q=N.$object_id(),ne,se,oe;if(X=L(X,10),X=L(X,N.length),D)ve=Object.create(null);else if(ve[Q])return L(X,16843009);try{for(oe in ve)if(ne=ve[oe],N["$eql?"](ne))return L(X,16843009);for(ve[Q]=N,se=0;se<N.length;se++)ne=N[se],X=L(X,ne.$hash());return X}finally{D&&(ve=void 0)}}),w(o,"$include?",function(N){for(var D=this,X=0,Q=D.length;X<Q;X++)if(D[X]["$=="](N))return!0;return!1}),w(o,"$index",function $e(N){var D=$e.$$p||t,X=this;$e.$$p=null;var Q,ne,se;if(N!=null&&D!==t&&X.$warn("warning: given block not used"),N!=null){for(Q=0,ne=X.length;Q<ne;Q++)if(X[Q]["$=="](N))return Q}else if(D!==t){for(Q=0;Q<X.length;Q++)if(se=D(X[Q]),se!==!1&&se!==t)return Q}else return X.$enum_for("index");return t},-1),w(o,"$insert",function(N,D){var X,Q,ne=this;if(X=te(arguments,1),Q=X,p(ne),N=C(N,e("Integer"),"to_int"),Q.length>0){if(N<0&&(N+=ne.length+1,N<0&&z.$raise(e("IndexError"),""+N+" is out of bounds")),N>ne.length)for(var se=ne.length;se<N;se++)ne.push(t);ne.splice.apply(ne,[N,0].concat(Q))}return ne},-2);var me=[];w(o,"$inspect",function(){var N=this,D=[],X=N.$__id__(),Q=!0;return function(){try{if(me.indexOf(X)!==-1)return Q=!1,"[...]";me.push(X);for(var ne=0,se=N.length;ne<se;ne++){var oe=N["$[]"](ne);D.push(S("Opal").$inspect(oe))}return"["+D.join(", ")+"]"}finally{Q&&me.pop()}}()}),w(o,"$intersection",function(N){var D,X,Q=this,ne=t,se=t;return D=te(arguments),X=D,X.length===0?Q.$to_a().$dup():(X=X.map(O),Q.length===0?[]:(X=g(X,"sort_by",[],"length".$to_proc()),k(Q.length<X[0].length)?g(X,"reduce",[Q],"&".$to_proc()):(ne=X.pop(),se=g(X,"reduce",[ne],"&".$to_proc()),Q["$&"](se))))},-1),w(o,"$intersect?",function(N){var D=this,X,Q,ne=new Map,se,oe;for(D.length<N.length?(X=D,Q=N):(X=N,Q=D),se=0,oe=X.length;se<oe;se++)ee(ne,X[se],!0);for(se=0,oe=Q.length;se<oe;se++)if(I(ne,Q[se]))return!0;return!1}),w(o,"$join",function(N){var D=this;if(A[","]==null&&(A[","]=t),N==null&&(N=t),k(D.length===0))return"";k(N===t)&&(N=A[","]);var X=[],Q,ne,se,oe;for(Q=0,ne=D.length;Q<ne;Q++){if(se=D[Q],Z(se,"$to_str")&&(oe=se.$to_str(),oe!==t)){X.push(oe.$to_s());continue}if(Z(se,"$to_ary")&&(oe=se.$to_ary(),oe===D&&z.$raise(e("ArgumentError")),oe!==t)){X.push(oe.$join(N));continue}if(Z(se,"$to_s")&&(oe=se.$to_s(),oe!==t)){X.push(oe);continue}z.$raise(e("NoMethodError").$new(""+S("Opal").$inspect(D.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return N===t?X.join(""):X.join(K["$coerce_to!"](N,e("String"),"to_str").$to_s())},-1),w(o,"$keep_if",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,N===t?g(D,"enum_for",["keep_if"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:D}):(p(D),J(D,k,N),D)}),w(o,"$last",function(N){var D=this;return N==null?D.length===0?t:D[D.length-1]:(N=C(N,e("Integer"),"to_int"),N<0&&z.$raise(e("ArgumentError"),"negative array size"),N>D.length&&(N=D.length),D.slice(D.length-N,D.length))},-1),w(o,"$length",function(){var N=this;return N.length}),w(o,"$max",function $e(N){var D=$e.$$p||t,X=this;return $e.$$p=null,g(X.$each(),"max",[N],D.$to_proc())},-1),w(o,"$min",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,g(D.$each(),"min",[],N.$to_proc())});function be($e,N){for(var D=N>=0?1:0;N;)D*=$e,$e--,N--;return D}return w(o,"$permutation",function $e(N){var D=$e.$$p||t,X=this,Q=t,ne=t;if($e.$$p=null,D===t)return g(X,"enum_for",["permutation",N],function b(){var U=b.$$s==null?this:b.$$s;return be(U.length,N===void 0?U.length:N)},{$$s:X});var se,oe,fe;if(N===void 0?N=X.length:N=C(N,e("Integer"),"to_int"),!(N<0||X.length<N))if(N===0)n.yield1(D,[]);else if(N===1)for(var f=0;f<X.length;f++)n.yield1(D,[X[f]]);else Q=S("Array").$new(N),ne=S("Array").$new(X.length,!1),se=function(b,U,re,ue,_e){X=this;for(var ge=0;ge<X.length;ge++)if(ue["$[]"](ge)["$!"]())if(U[re]=ge,re<b-1)ue[ge]=!0,se.call(X,b,U,re+1,ue,_e),ue[ge]=!1;else{fe=[];for(var pe=0;pe<U.length;pe++)fe.push(X[U[pe]]);P(_e,fe)}},D!==t?(oe=X.slice(),se.call(oe,N,Q,0,ne,D)):se.call(X,N,Q,0,ne,D);return X},-1),w(o,"$repeated_permutation",function $e(N){var D=$e.$$p||t,X=this,Q=t;if($e.$$p=null,Q=K["$coerce_to!"](N,e("Integer"),"to_int"),D===t)return g(X,"enum_for",["repeated_permutation",Q],function se(){var oe=se.$$s==null?this:se.$$s;return k(h(Q,0))?oe.$size()["$**"](Q):0},{$$s:X});function ne(se,oe,fe){if(oe.length==se){var f=oe.slice();n.yield1(D,f);return}for(var b=0;b<fe.length;b++)oe.push(fe[b]),ne(se,oe,fe),oe.pop()}return ne(Q,[],X.slice()),X}),w(o,"$pop",function(N){var D=this;return p(D),k(N===void 0)?k(D.length===0)?t:D.pop():(N=C(N,e("Integer"),"to_int"),k(N<0)&&z.$raise(e("ArgumentError"),"negative array size"),k(D.length===0)?[]:k(N===1)?[D.pop()]:k(N>D.length)?D.splice(0,D.length):D.splice(D.length-N,D.length))},-1),w(o,"$product",function $e(N){var D=$e.$$p||t,X,Q,ne=this;$e.$$p=null,X=te(arguments),Q=X;var se=D!==t?null:[],oe=Q.length+1,fe=new Array(oe),f=new Array(oe),b=new Array(oe),U,re,ue,_e,ge=1;for(b[0]=ne,U=1;U<oe;U++)b[U]=C(Q[U-1],e("Array"),"to_ary");for(U=0;U<oe;U++){if(_e=b[U].length,_e===0)return se||ne;ge*=_e,ge>2147483647&&z.$raise(e("RangeError"),"too big to product"),f[U]=_e,fe[U]=0}e:for(;;){for(ue=[],U=0;U<oe;U++)ue.push(b[U][fe[U]]);for(se?se.push(ue):n.yield1(D,ue),re=oe-1,fe[re]++;fe[re]===f[re];){if(fe[re]=0,--re<0)break e;fe[re]++}}return se||ne},-1),w(o,"$push",function(N){var D,X,Q=this;return D=te(arguments),X=D,p(Q),ae(Q,X),Q},-1),w(o,"$rassoc",function(N){for(var D=this,X=0,Q=D.length,ne;X<Q;X++)if(ne=D[X],ne.length&&ne[1]!==void 0&&ne[1]["$=="](N))return ne;return t}),w(o,"$reject",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["reject"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:D});for(var X=[],Q=0,ne;Q<D.length;Q++)ne=N(D[Q]),(ne===!1||ne===t)&&X.push(D[Q]);return X}),w(o,"$reject!",function $e(){var N=$e.$$p||t,D=this,X=t;return $e.$$p=null,N===t?g(D,"enum_for",["reject!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:D}):(p(D),X=D.$length(),g(D,"delete_if",[],N.$to_proc()),q(D.$length(),X)?t:D)}),w(o,"$replace",function(N){var D=this;return p(D),N=O(N),D.length>0&&D.splice(0,D.length),ae(D,N),D}),w(o,"$reverse",function(){var N=this;return N.slice(0).reverse()}),w(o,"$reverse!",function(){var N=this;return p(N),N.reverse()}),w(o,"$reverse_each",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["reverse_each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:D});for(var X=D.length-1;X>=0;X--)P(N,D[X]);return D}),w(o,"$rindex",function $e(N){var D=$e.$$p||t,X=this;$e.$$p=null;var Q,ne;if(N!=null&&D!==t&&X.$warn("warning: given block not used"),N!=null){for(Q=X.length-1;Q>=0&&!(Q>=X.length);Q--)if(X[Q]["$=="](N))return Q}else if(D!==t){for(Q=X.length-1;Q>=0&&!(Q>=X.length);Q--)if(ne=D(X[Q]),ne!==!1&&ne!==t)return Q}else if(N==null)return X.$enum_for("rindex");return t},-1),w(o,"$rotate",function(N){var D=this;N==null&&(N=1);var X,Q,ne,se;return N=C(N,e("Integer"),"to_int"),D.length===1?D.slice():D.length===0?[]:(X=D.slice(),Q=N%X.length,ne=X.slice(Q),se=X.slice(0,Q),ne.concat(se))},-1),w(o,"$rotate!",function(N){var D=this,X=t;return N==null&&(N=1),p(D),D.length===0||D.length===1?D:(N=C(N,e("Integer"),"to_int"),X=D.$rotate(N),D.$replace(X))},-1),function($e,N){var D=Y($e,N,"SampleRandom"),X=D.$$prototype;return X.rng=t,w(D,"$initialize",_("rng")),w(D,"$rand",function(ne){var se=this,oe=t;return oe=C(se.rng.$rand(ne),e("Integer"),"to_int"),k(oe<0)&&z.$raise(e("RangeError"),"random value must be >= 0"),k(oe<ne)||z.$raise(e("RangeError"),"random value must be less than Array size"),oe})}(o,null),w(o,"$sample",function(N,D){var X=this,Q=t,ne=t;if(k(N===void 0))return X.$at(z.$rand(X.length));if(k(D===void 0)?k(Q=K["$coerce_to?"](N,e("Hash"),"to_hash"))?(D=Q,N=t):(D=t,N=C(N,e("Integer"),"to_int")):(N=C(N,e("Integer"),"to_int"),D=C(D,e("Hash"),"to_hash")),k(N)&&k(N<0)&&z.$raise(e("ArgumentError"),"count must be greater than 0"),k(D)&&(ne=D["$[]"]("random")),ne=k(ne)&&k(ne["$respond_to?"]("rand"))?S("SampleRandom").$new(ne):z,!k(N))return X[ne.$rand(X.length)];var se,oe,fe,f,b,U,re,ue;switch(N>X.length&&(N=X.length),N){case 0:return[];case 1:return[X[ne.$rand(X.length)]];case 2:return f=ne.$rand(X.length),b=ne.$rand(X.length-1),f<=b&&b++,[X[f],X[b]];default:if(X.length/N>3){for(se=!1,oe=0,fe=S("Array").$new(N),f=1,fe[0]=ne.$rand(X.length);f<N;){for(U=ne.$rand(X.length),b=0;b<f;){for(;U===fe[b];){if(oe++,oe>100){se=!0;break}U=ne.$rand(X.length)}if(se)break;b++}if(se)break;fe[f]=U,f++}if(!se){for(f=0;f<N;)fe[f]=X[fe[f]],f++;return fe}}fe=X.slice();for(var _e=0;_e<N;_e++)re=ne.$rand(X.length-_e)+_e,ue=fe[_e],fe[_e]=fe[re],fe[re]=ue;return N===X.length?fe:fe["$[]"](0,N)}},-1),w(o,"$select",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["select"],function oe(){var fe=oe.$$s==null?this:oe.$$s;return fe.$size()},{$$s:D});for(var X=[],Q=0,ne,se;Q<D.length;Q++)ne=D[Q],se=P(N,ne),k(se)&&X.push(ne);return X}),w(o,"$select!",function $e(){var N=$e.$$p||t,D=this;if($e.$$p=null,N===t)return g(D,"enum_for",["select!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:D});p(D);var X=D.length;return g(D,"keep_if",[],N.$to_proc()),D.length===X?t:D}),w(o,"$shift",function(N){var D=this;return p(D),k(N===void 0)?k(D.length===0)?t:F(D):(N=C(N,e("Integer"),"to_int"),k(N<0)&&z.$raise(e("ArgumentError"),"negative array size"),k(D.length===0)?[]:D.splice(0,N))},-1),w(o,"$shuffle",function(N){var D=this;return D.$dup().$to_a()["$shuffle!"](N)},-1),w(o,"$shuffle!",function(N){var D=this;p(D);var X,Q=D.length,ne,se;for(N!==void 0&&(N=K["$coerce_to?"](N,e("Hash"),"to_hash"),N!==t&&(N=N["$[]"]("random"),N!==t&&N["$respond_to?"]("rand")&&(X=N)));Q;)X?(ne=X.$rand(Q).$to_int(),ne<0&&z.$raise(e("RangeError"),"random number too small "+ne),ne>=Q&&z.$raise(e("RangeError"),"random number too big "+ne)):ne=D.$rand(Q),se=D[--Q],D[Q]=D[ne],D[ne]=se;return D},-1),w(o,"$slice!",function(N,D){var X=this,Q=t,ne=t,se=t,oe=t,fe=t;if(p(X),Q=t,k(D===void 0))if(H(e("Range"),N)){ne=N,Q=X["$[]"](ne),se=ne.begin===t?0:C(ne.begin,e("Integer"),"to_int"),oe=ne.end===t?-1:C(ne.end,e("Integer"),"to_int"),se<0&&(se+=X.length),oe<0?oe+=X.length:oe>=X.length&&(oe=X.length-1,ne.excl&&(oe+=1));var f=oe-se;ne.excl&&ne.end!==t?oe-=1:f+=1,se<X.length&&se>=0&&oe<X.length&&oe>=0&&f>0&&X.splice(se,f)}else{if(fe=C(N,e("Integer"),"to_int"),fe<0&&(fe+=X.length),fe<0||fe>=X.length)return t;Q=X[fe],fe===0?X.shift():X.splice(fe,1)}else{if(fe=C(N,e("Integer"),"to_int"),D=C(D,e("Integer"),"to_int"),D<0)return t;Q=X["$[]"](fe,D),fe<0&&(fe+=X.length),fe+D>X.length&&(D=X.length-fe),fe<X.length&&fe>=0&&X.splice(fe,D)}return Q},-2),w(o,"$sort",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,k(D.length>1)?(N===t&&(N=function(X,Q){return X["$<=>"](Q)}),D.slice().sort(function(X,Q){var ne=N(X,Q);return ne===t&&z.$raise(e("ArgumentError"),"comparison of "+X.$inspect()+" with "+Q.$inspect()+" failed"),E(ne,0)?1:l(ne,0)?-1:0})):D}),w(o,"$sort!",function $e(){var N=$e.$$p||t,D=this;$e.$$p=null,p(D);var X;N!==t?X=g(D.slice(),"sort",[],N.$to_proc()):X=D.slice().$sort(),D.length=0;for(var Q=0,ne=X.length;Q<ne;Q++)D.push(X[Q]);return D}),w(o,"$sort_by!",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,N===t?g(D,"enum_for",["sort_by!"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:D}):(p(D),D.$replace(g(D,"sort_by",[],N.$to_proc())))}),w(o,"$take",function(N){var D=this;return N<0&&z.$raise(e("ArgumentError")),D.slice(0,N)}),w(o,"$take_while",function $e(){var N=$e.$$p||t,D=this;$e.$$p=null;for(var X=[],Q=0,ne,se;Q<D.length;Q++){if(ne=D[Q],se=N(ne),se===!1||se===t)return X;X.push(ne)}return X}),w(o,"$to_a",function(){var N=this;return N.$$class===n.Array?N:n.Array.$new(N)}),w(o,"$to_ary",x),w(o,"$to_h",function $e(){var N=$e.$$p||t,D=this,X=t;$e.$$p=null,X=D,N!==t&&(X=g(X,"map",[],N.$to_proc()));var Q,ne=X.length,se,oe,fe,f=new Map;for(Q=0;Q<ne;Q++)se=K["$coerce_to?"](X[Q],e("Array"),"to_ary"),se.$$is_array||z.$raise(e("TypeError"),"wrong element type "+X[Q].$class()+" at "+Q+" (expected array)"),se.length!==2&&z.$raise(e("ArgumentError"),"element has wrong array length at "+Q+" (expected 2, was "+se.$length()+")"),oe=se[0],fe=se[1],ee(f,oe,fe);return f}),w(o,"$transpose",function(){var N=this,D=t,X=t;return k(N["$empty?"]())?[]:(D=[],X=t,g(N,"each",[],function(ne){var se=t;return ne==null&&(ne=t),ne=O(ne),X=k(se=X)?se:ne.length,G(ne.length,X)&&z.$raise(e("IndexError"),"element size differs ("+ne.length+" should be "+X+")"),g(ne.length,"times",[],function(fe){var f,b=t;return fe==null&&(fe=t),b=k(se=D["$[]"](fe))?se:(f=[fe,[]],g(D,"[]=",f),f[f.length-1]),b["$<<"](ne.$at(fe))})}),D)}),w(o,"$union",function(N){var D,X,Q=this;return D=te(arguments),X=D,g(X,"reduce",[Q.$uniq()],function(se,oe){return se==null&&(se=t),oe==null&&(oe=t),se["$|"](oe)})},-1),w(o,"$uniq",function $e(){var N=$e.$$p||t,D=this;$e.$$p=null;var X=new Map,Q,ne,se,oe;if(N===t)for(Q=0,ne=D.length;Q<ne;Q++)se=D[Q],I(X,se)===void 0&&ee(X,se,se);else for(Q=0;Q<D.length;Q++)se=D[Q],oe=P(N,se),I(X,oe)===void 0&&ee(X,oe,se);return X.$values()}),w(o,"$uniq!",function $e(){var N=$e.$$p||t,D=this;$e.$$p=null,p(D);var X=new Map,Q,ne,se,oe=[];for(Q=0;Q<D.length;Q++)ne=D[Q],se=N===t?ne:P(N,ne),I(X,se)===void 0?ee(X,se,ne):oe.push(Q);for(Q=oe.length-1;Q>=0;Q--)D.splice(oe[Q],1);return oe.length===0?t:D}),w(o,"$unshift",function(N){var D,X,Q=this;D=te(arguments),X=D,p(Q);var ne=Q.length,se=X.length;if(se==0)return Q;for(var oe=ne-se,fe=0;fe<se;fe++)Q.push(Q[oe+fe]);for(var f=ne-1;f-se>=0;)Q[f]=Q[f-se],f--;for(var b=0;b<se;b++)Q[b]=X[b];return Q},-1),w(o,"$values_at",function(N){var D,X,Q=this,ne=t;return D=te(arguments),X=D,ne=[],g(X,"each",[],function se(oe){var fe=se.$$s==null?this:se.$$s,f=t,b=t,U=t;return oe==null&&(oe=t),k(oe["$is_a?"](e("Range")))?(f=oe.$end()===t?-1:C(oe.$end(),e("Integer"),"to_int"),b=oe.$begin()===t?0:C(oe.$begin(),e("Integer"),"to_int"),b<0?(b=b+fe.length,t):(f<0&&(f=f+fe.length),oe["$exclude_end?"]()&&oe.$end()!==t&&f--,f<b?t:g(b,"upto",[f],function re(ue){var _e=re.$$s==null?this:re.$$s;return ue==null&&(ue=t),ne["$<<"](_e.$at(ue))},{$$s:fe}))):(U=C(oe,e("Integer"),"to_int"),ne["$<<"](fe.$at(U)))},{$$s:Q}),ne},-1),w(o,"$zip",function $e(N){var D=$e.$$p||t,X,Q,ne=this,se=t;$e.$$p=null,X=te(arguments),Q=X;var oe=[],fe=ne.length,f,b,U,re,ue;for(re=0,ue=Q.length;re<ue;re++)if(b=Q[re],!b.$$is_array){if(b.$$is_range||b.$$is_enumerator){Q[re]=b.$take(fe);continue}Q[re]=(k(se=K["$coerce_to?"](b,e("Array"),"to_ary"))?se:K["$coerce_to!"](b,e("Enumerator"),"to_enum","each")).$to_a()}for(U=0;U<fe;U++){for(f=[ne[U]],re=0,ue=Q.length;re<ue;re++)b=Q[re][U],b==null&&(b=t),f[re+1]=b;oe[U]=f}if(D!==t){for(U=0;U<fe;U++)n.yield1(D,oe[U]);return t}return oe},-1),W(o,"$inherited",function(N){N.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),w(o,"$instance_variables",function $e(){var N=$e.$$p||t,D=this;return $e.$$p=null,g(j(D,R(D,"instance_variables",$e,!1,!0),"instance_variables",[],N),"reject",[],function(Q){var ne=t;return Q==null&&(Q=t),k(ne=/^@\d+$/.test(Q))?ne:Q["$=="]("@length")})}),w(o,"$pack",function(N){return te(arguments),z.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),c(o,"append","push"),c(o,"filter","select"),c(o,"filter!","select!"),c(o,"map","collect"),c(o,"map!","collect!"),c(o,"prepend","unshift"),c(o,"size","length"),c(o,"slice","[]"),c(o,"to_s","inspect"),K.$pristine(o.$singleton_class(),"allocate"),K.$pristine(o,"copy_instance_variables","initialize_dup")}("::",Array,$)};Opal.modules["corelib/hash"]=function(n){var k=n.yield1,y=n.hash_clone,P=n.hash_delete,I=n.hash_each,ee=n.hash_get,V=n.hash_put,C=n.deny_frozen_access,Z=n.freeze,p=n.opal32_init,B=n.opal32_add,ie=n.klass,L=n.slice,Y=n.Opal,te=n.Kernel,W=n.defs,z=n.def,w=n.send,K=n.rb_ge,H=n.rb_gt,j=n.truthy,R=n.to_a,g=n.return_self,E=n.not,M=n.alias,q=n.top,m=[],u=n.nil,d=n.$$$;return n.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),q.$require("corelib/enumerable"),function(A,h,_){var l=ie(A,h,"Hash"),x=[l].concat(_),G=n.$r(x);l.$include(d("Enumerable")),l.$$prototype.$$is_hash=!0,W(l,"$[]",function(t){var e,r,i=this;e=L(arguments),r=e;var s,o=r.length,v,S;if(o===1){if(s=Y["$coerce_to?"](r["$[]"](0),d("Hash"),"to_hash"),s!==u)return i.$allocate()["$merge!"](s);for(r=Y["$coerce_to?"](r["$[]"](0),d("Array"),"to_ary"),r===u&&te.$raise(d("ArgumentError"),"odd number of arguments for Hash"),o=r.length,s=i.$allocate(),S=0;S<o;S++)v=r[S],v.$$is_array||te.$raise(d("ArgumentError"),"invalid element "+v.$inspect()+" for Hash"),v.length===1?s.$store(v[0],u):v.length===2?s.$store(v[0],v[1]):te.$raise(d("ArgumentError"),"invalid number of elements ("+v.length+" for "+v.$inspect()+"), must be 1..2");return s}for(o%2!==0&&te.$raise(d("ArgumentError"),"odd number of arguments for Hash"),s=i.$allocate(),S=0;S<o;S+=2)s.$store(r[S],r[S+1]);return s},-1),W(l,"$allocate",function(){var t=this,e=new t.$$constructor;return e.$$none=u,e.$$proc=u,e}),W(l,"$try_convert",function(t){return Y["$coerce_to?"](t,d("Hash"),"to_hash")}),z(l,"$initialize",function $(t){var e=$.$$p||u,r=this;return $.$$p=null,C(r),t!==void 0&&e!==u&&te.$raise(d("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=t===void 0?u:t,r.$$proc=e,r},-1),z(l,"$==",function(t){var e=this;return e===t?!0:!t.$$is_hash||e.size!==t.size?!1:I(e,!0,function(r,i){var s=ee(t,r);return s===void 0||!i["$eql?"](s)?[!0,!1]:[!1,!0]})}),z(l,"$>=",function(t){var e=this,r=u;return t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),e.size<t.size?!1:(r=!0,w(t,"each",[],function i(s,o){var v=i.$$s==null?this:i.$$s,S=u;if(s==null&&(s=u),o==null&&(o=u),S=v.$fetch(s,null),S==null||S!==o){r=!1;return}},{$$s:e}),r)}),z(l,"$>",function(t){var e=this;return t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),e.size<=t.size?!1:K(e,t)}),z(l,"$<",function(t){var e=this;return t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),H(t,e)}),z(l,"$<=",function(t){var e=this;return t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),K(t,e)}),z(l,"$[]",function(t){var e=this,r=ee(e,t);return r!==void 0?r:e.$default(t)}),z(l,"$[]=",function(t,e){var r=this;return C(r),V(r,t,e),e}),z(l,"$assoc",function(t){var e=this;return I(e,u,function(r,i){return r["$=="](t)?[!0,[r,i]]:[!1,u]})}),z(l,"$clear",function(){var t=this;return C(t),t.clear(),t.$$keys&&t.$$keys.clear(),t}),z(l,"$clone",function(){var t=this,e=t.$class().$new();return y(t,e),t["$frozen?"]()?e.$freeze():e}),z(l,"$compact",function(){var t=this,e=new Map;return I(t,e,function(r,i){return i!==u&&V(e,r,i),[!1,e]})}),z(l,"$compact!",function(){var t=this;C(t);var e=u;return I(t,e,function(r,i){return i===u&&(P(t,r),e=t),[!1,e]})}),z(l,"$compare_by_identity",function(){var t=this;return C(t),t.$$by_identity||(t.$$by_identity=!0,t.size!==0&&n.hash_rehash(t)),t}),z(l,"$compare_by_identity?",function(){var t=this;return t.$$by_identity===!0}),z(l,"$default",function(t){var e=this;return t!==void 0&&e.$$proc!==u&&e.$$proc!==void 0?e.$$proc.$call(e,t):e.$$none===void 0?u:e.$$none},-1),z(l,"$default=",function(t){var e=this;return C(e),e.$$proc=u,e.$$none=t,t}),z(l,"$default_proc",function(){var t=this;return t.$$proc!==void 0?t.$$proc:u}),z(l,"$default_proc=",function(t){var e=this;C(e);var r=t;return r!==u&&(r=Y["$coerce_to!"](r,d("Proc"),"to_proc"),r["$lambda?"]()&&r.$arity().$abs()!==2&&te.$raise(d("TypeError"),"default_proc takes two arguments")),e.$$none=u,e.$$proc=r,t}),z(l,"$delete",function $(t){var e=$.$$p||u,r=this;$.$$p=null,C(r);var i=P(r,t);return i!==void 0?i:e!==u?n.yield1(e,t):u}),z(l,"$delete_if",function $(){var t=$.$$p||u,e=this;return $.$$p=null,j(t)?(C(e),I(e,e,function(r,i){var s=t(r,i);return s!==!1&&s!==u&&P(e,r),[!1,e]})):w(e,"enum_for",["delete_if"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),z(l,"$dig",function(t,e){var r,i,s=this,o=u;return r=L(arguments,1),i=r,o=s["$[]"](t),o===u||i.length===0?o:(j(o["$respond_to?"]("dig"))||te.$raise(d("TypeError"),""+o.$class()+" does not have #dig method"),w(o,"dig",R(i)))},-2),z(l,"$dup",function(){var t=this;return y(t,t.$class().$new())}),z(l,"$each",function $(){var t=$.$$p||u,e=this;return $.$$p=null,j(t)?I(e,e,function(r,i){return k(t,[r,i]),[!1,e]}):w(e,"enum_for",["each"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),z(l,"$each_key",function $(){var t=$.$$p||u,e=this;return $.$$p=null,j(t)?I(e,e,function(r,i){return t(r),[!1,e]}):w(e,"enum_for",["each_key"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),z(l,"$each_value",function $(){var t=$.$$p||u,e=this;return $.$$p=null,j(t)?I(e,e,function(r,i){return t(i),[!1,e]}):w(e,"enum_for",["each_value"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),z(l,"$empty?",function(){var t=this;return t.size===0}),z(l,"$except",function(t){var e,r,i=this;return e=L(arguments),r=e,w(i.$dup(),"except!",R(r))},-1),z(l,"$except!",function(t){var e,r,i=this;return e=L(arguments),r=e,w(r,"each",[],function s(o){var v=s.$$s==null?this:s.$$s;return o==null&&(o=u),v.$delete(o)},{$$s:i}),i},-1),z(l,"$fetch",function $(t,e){var r=$.$$p||u,i=this;$.$$p=null;var s=ee(i,t);return s!==void 0?s:r!==u?r(t):e!==void 0?e:te.$raise(d("KeyError").$new("key not found: "+t.$inspect(),new Map([["key",t],["receiver",i]])))},-2),z(l,"$fetch_values",function $(t){var e=$.$$p||u,r,i,s=this;return $.$$p=null,r=L(arguments),i=r,w(i,"map",[],function o(v){var S=o.$$s==null?this:o.$$s;return v==null&&(v=u),w(S,"fetch",[v],e.$to_proc())},{$$s:s})},-1),z(l,"$flatten",function(t){var e=this;t==null&&(t=1),t=Y["$coerce_to!"](t,d("Integer"),"to_int");var r=[];return I(e,r,function(i,s){return r.push(i),s.$$is_array?t===1?(r.push(s),[!1,r]):(r=r.concat(s.$flatten(t-2)),[!1,r]):(r.push(s),[!1,r])})},-1),z(l,"$freeze",function(){var t=this;return j(t["$frozen?"]())?t:Z(t)}),z(l,"$has_key?",function(t){var e=this;return ee(e,t)!==void 0}),z(l,"$has_value?",function(t){var e=this;return I(e,!1,function(r,i){return i["$=="](t)?[!0,!0]:[!1,!1]})});var c;z(l,"$hash",function(){var t=this,e=c===void 0,r=t.$object_id(),i=p(),s,o,v,S=t.size,F=new Int32Array(S);if(i=B(i,4),i=B(i,S),e)c=Object.create(null);else if(c[r])return B(i,16843009);try{for(s in c)if(o=c[s],t["$eql?"](o))return B(i,16843009);for(c[r]=t,v=0,I(t,!1,function(T,J){return F[v]=[1883326802,T,J].$hash(),v++,[!1,!1]}),F=F.sort(),v=0;v<F.length;v++)i=B(i,F[v]);return i}finally{e&&(c=void 0)}}),z(l,"$index",function(t){var e=this;return I(e,u,function(r,i){return i["$=="](t)?[!0,r]:[!1,u]})}),z(l,"$indexes",function(t){var e,r,i=this;e=L(arguments),r=e;for(var s=[],o=0,v=r.length,S,F;o<v;o++){if(S=r[o],F=ee(i,S),F===void 0){s.push(i.$default());continue}s.push(F)}return s},-1);var a;return z(l,"$inspect",function(){var t=this,e=a===void 0,r=t.$object_id(),i=[];return function(){try{if(e&&(a={}),a.hasOwnProperty(r))return"{...}";return a[r]=!0,I(t,!1,function(s,o){return o=G("Opal").$inspect(o),s=G("Opal").$inspect(s),i.push(s+"=>"+o),[!1,!1]}),"{"+i.join(", ")+"}";return u}finally{e&&(a=void 0)}}()}),z(l,"$invert",function(){var t=this,e=new Map;return I(t,e,function(r,i){return V(e,i,r),[!1,e]})}),z(l,"$keep_if",function $(){var t=$.$$p||u,e=this;return $.$$p=null,j(t)?(C(e),I(e,e,function(r,i){var s=t(r,i);return(s===!1||s===u)&&P(e,r),[!1,e]})):w(e,"enum_for",["keep_if"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),z(l,"$keys",function(){var t=this;return Array.from(t.keys())}),z(l,"$length",function(){var t=this;return t.size}),z(l,"$merge",function $(t){var e=$.$$p||u,r,i,s=this;return $.$$p=null,r=L(arguments),i=r,w(s.$dup(),"merge!",R(i),e.$to_proc())},-1),z(l,"$merge!",function $(t){var e=$.$$p||u,r,i,s=this;$.$$p=null,r=L(arguments),i=r,C(s);var o,v;for(o=0;o<i.length;++o)v=Y["$coerce_to!"](i[o],d("Hash"),"to_hash"),e===u?I(v,!1,function(S,F){return V(s,S,F),[!1,!1]}):I(v,!1,function(S,F){var T=ee(s,S);return T===void 0?(V(s,S,F),[!1,!1]):(V(s,S,e(S,T,F)),[!1,!1])});return s},-1),z(l,"$rassoc",function(t){var e=this;return I(e,u,function(r,i){return i["$=="](t)?[!0,[r,i]]:[!1,u]})}),z(l,"$rehash",function(){var t=this;return C(t),n.hash_rehash(t)}),z(l,"$reject",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!j(t))return w(e,"enum_for",["reject"],function i(){var s=i.$$s==null?this:i.$$s;return s.$size()},{$$s:e});var r=new Map;return I(e,r,function(i,s){var o=t(i,s);return(o===!1||o===u)&&V(r,i,s),[!1,r]})}),z(l,"$reject!",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!j(t))return w(e,"enum_for",["reject!"],function i(){var s=i.$$s==null?this:i.$$s;return s.$size()},{$$s:e});C(e);var r=u;return I(e,r,function(i,s){var o=t(i,s);return o!==!1&&o!==u&&(P(e,i),r=e),[!1,r]})}),z(l,"$replace",function(t){var e=this;return C(e),t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),e.$clear(),I(t,!1,function(r,i){return V(e,r,i),[!1,!1]}),j(t.$default_proc())?e["$default_proc="](t.$default_proc()):e["$default="](t.$default()),e}),z(l,"$select",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!j(t))return w(e,"enum_for",["select"],function i(){var s=i.$$s==null?this:i.$$s;return s.$size()},{$$s:e});var r=new Map;return I(e,r,function(i,s){var o=t(i,s);return o!==!1&&o!==u&&V(r,i,s),[!1,r]})}),z(l,"$select!",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!j(t))return w(e,"enum_for",["select!"],function i(){var s=i.$$s==null?this:i.$$s;return s.$size()},{$$s:e});C(e);var r=u;return I(e,r,function(i,s){var o=t(i,s);return(o===!1||o===u)&&(P(e,i),r=e),[!1,r]})}),z(l,"$shift",function(){var t=this;return C(t),I(t,u,function(e,r){return[!0,[e,P(t,e)]]})}),z(l,"$slice",function(t){var e,r,i=this;e=L(arguments),r=e;for(var s=new Map,o=0,v=r.length;o<v;o++){var S=r[o],F=ee(i,S);F!==void 0&&V(s,S,F)}return s},-1),z(l,"$to_a",function(){var t=this,e=[];return I(t,e,function(r,i){return e.push([r,i]),[!1,e]})}),z(l,"$to_h",function $(){var t=$.$$p||u,e=this;if($.$$p=null,t!==u)return w(e,"map",[],t.$to_proc()).$to_h();if(e.$$class===n.Hash)return e;var r=new Map;return y(e,r),r}),z(l,"$to_hash",g),z(l,"$to_proc",function(){var t=this;return w(t,"proc",[],function e(r){var i=e.$$s==null?this:e.$$s;return r==null&&te.$raise(d("ArgumentError"),"no key given"),i["$[]"](r)},{$$arity:-1,$$s:t})}),z(l,"$transform_keys",function $(t){var e=$.$$p||u,r=this;if($.$$p=null,t==null&&(t=u),E(e)&&E(t))return w(r,"enum_for",["transform_keys"],function s(){var o=s.$$s==null?this:s.$$s;return o.$size()},{$$s:r});var i=new Map;return I(r,i,function(s,o){var v;return t!==u&&(v=ee(t,s)),v===void 0&&e&&e!==u&&(v=e(s)),v===void 0&&(v=s),V(i,v,o),[!1,i]})},-1),z(l,"$transform_keys!",function $(t){var e=$.$$p||u,r=this;if($.$$p=null,t==null&&(t=u),E(e)&&E(t))return w(r,"enum_for",["transform_keys!"],function s(){var o=s.$$s==null?this:s.$$s;return o.$size()},{$$s:r});C(r);var i=new Map;return I(r,r,function(s,o){var v;return t!==u&&(v=ee(t,s)),v===void 0&&e&&e!==u&&(v=e(s)),v===void 0?[!1,r]:(ee(i,s)||P(r,s),V(r,v,o),V(i,v,!0),[!1,r])})},-1),z(l,"$transform_values",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!j(t))return w(e,"enum_for",["transform_values"],function i(){var s=i.$$s==null?this:i.$$s;return s.$size()},{$$s:e});var r=new Map;return I(e,r,function(i,s){return V(r,i,t(s)),[!1,r]})}),z(l,"$transform_values!",function $(){var t=$.$$p||u,e=this;return $.$$p=null,j(t)?(C(e),I(e,e,function(r,i){return V(e,r,t(i)),[!1,e]})):w(e,"enum_for",["transform_values!"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),z(l,"$values",function(){var t=this;return Array.from(t.values())}),M(l,"each_pair","each"),M(l,"eql?","=="),M(l,"filter","select"),M(l,"filter!","select!"),M(l,"include?","has_key?"),M(l,"indices","indexes"),M(l,"key","index"),M(l,"key?","has_key?"),M(l,"member?","has_key?"),M(l,"size","length"),M(l,"store","[]="),M(l,"to_s","inspect"),M(l,"update","merge!"),M(l,"value?","has_value?"),M(l,"values_at","indexes")}("::",Map,m)};Opal.modules["corelib/number"]=function(n){var k=n.klass,y=n.Opal,P=n.Kernel,I=n.def,ee=n.eqeqeq,V=n.truthy,C=n.rb_gt,Z=n.not,p=n.rb_lt,B=n.alias,ie=n.send2,L=n.find_super,Y=n.send,te=n.rb_plus,W=n.rb_minus,z=n.eqeq,w=n.return_self,K=n.rb_divide,H=n.to_ary,j=n.rb_times,R=n.rb_le,g=n.rb_ge,E=n.return_val,M=n.const_set,q=n.top,m=[],u=n.nil,d=n.$$$;return n.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),q.$require("corelib/numeric"),function(A,h,_){var l=k(A,h,"Number");y.$bridge(Number,l),n.prop(l.$$prototype,"$$is_number",!0),l.$$is_number_class=!0;var x=new Map;(function(e,r){return I(e,"$allocate",function(){var s=this;return P.$raise(d("TypeError"),"allocator undefined for "+s.$name())}),n.udef(e,"$new"),u})(n.get_singleton_class(l)),I(l,"$coerce",function(r){var i=this;if(r===u)P.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float");else{if(r.$$is_string)return[P.$Float(r),i];if(r["$respond_to?"]("to_f"))return[y["$coerce_to!"](r,d("Float"),"to_f"),i];if(r.$$is_number)return[r,i];P.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float")}}),I(l,"$__id__",function(){var r=this;if(r|r===0)return r*2+1;if(x.has(r))return x.get(r);var i=n.uid();return x.set(r,i),i}),I(l,"$hash",function(){var r=this;return r|r===0?r.$__id__():r.toString().$hash()}),I(l,"$+",function(r){var i=this;return r.$$is_number?i+r:i.$__coerced__("+",r)}),I(l,"$-",function(r){var i=this;return r.$$is_number?i-r:i.$__coerced__("-",r)}),I(l,"$*",function(r){var i=this;return r.$$is_number?i*r:i.$__coerced__("*",r)}),I(l,"$/",function(r){var i=this;return r.$$is_number?i/r:i.$__coerced__("/",r)}),I(l,"$%",function(r){var i=this;if(r.$$is_number){if(r==-1/0)return r;if(r==0)P.$raise(d("ZeroDivisionError"),"divided by 0");else return r<0||i<0?(i%r+r)%r:i%r}else return i.$__coerced__("%",r)}),I(l,"$&",function(r){var i=this;return r.$$is_number?i&r:i.$__coerced__("&",r)}),I(l,"$|",function(r){var i=this;return r.$$is_number?i|r:i.$__coerced__("|",r)}),I(l,"$^",function(r){var i=this;return r.$$is_number?i^r:i.$__coerced__("^",r)}),I(l,"$<",function(r){var i=this;return r.$$is_number?i<r:i.$__coerced__("<",r)}),I(l,"$<=",function(r){var i=this;return r.$$is_number?i<=r:i.$__coerced__("<=",r)}),I(l,"$>",function(r){var i=this;return r.$$is_number?i>r:i.$__coerced__(">",r)}),I(l,"$>=",function(r){var i=this;return r.$$is_number?i>=r:i.$__coerced__(">=",r)});var G=function(e,r){return r.$$is_number?isNaN(e)||isNaN(r)?u:e>r?1:e<r?-1:0:e.$__coerced__("<=>",r)};I(l,"$<=>",function(r){var i=this;try{return G(i,r)}catch(s){if(n.rescue(s,[d("ArgumentError")]))try{return u}finally{n.pop_exception(s)}else throw s}}),I(l,"$<<",function(r){var i=this;return r=y["$coerce_to!"](r,d("Integer"),"to_int"),r>0?i<<r:i>>-r}),I(l,"$>>",function(r){var i=this;return r=y["$coerce_to!"](r,d("Integer"),"to_int"),r>0?i>>r:i<<-r}),I(l,"$[]",function(r){var i=this;return r=y["$coerce_to!"](r,d("Integer"),"to_int"),r<0?0:r>=32?i<0?1:0:i>>r&1}),I(l,"$+@",function(){var r=this;return+r}),I(l,"$-@",function(){var r=this;return-r}),I(l,"$~",function(){var r=this;return~r}),I(l,"$**",function(r){var i=this;return ee(d("Integer"),r)?Z(d("Integer")["$==="](i))||V(C(r,0))?Math.pow(i,r):d("Rational").$new(i,1)["$**"](r):V(p(i,0))&&(ee(d("Float"),r)||ee(d("Rational"),r))?d("Complex").$new(i,0)["$**"](r.$to_f()):V(r.$$is_number!=null)?Math.pow(i,r):i.$__coerced__("**",r)}),I(l,"$==",function(r){var i=this;return r.$$is_number?i.valueOf()===r.valueOf():r["$respond_to?"]("==")?r["$=="](i):!1}),B(l,"===","=="),I(l,"$abs",function(){var r=this;return Math.abs(r)}),I(l,"$abs2",function(){var r=this;return Math.abs(r*r)}),I(l,"$allbits?",function(r){var i=this;return r=y["$coerce_to!"](r,d("Integer"),"to_int"),(i&r)==r}),I(l,"$anybits?",function(r){var i=this;return r=y["$coerce_to!"](r,d("Integer"),"to_int"),(i&r)!==0}),I(l,"$angle",function(){var r=this;return V(r["$nan?"]())?r:r==0?1/r>0?0:Math.PI:r<0?Math.PI:0}),I(l,"$bit_length",function(){var r=this;if(ee(d("Integer"),r)||P.$raise(d("NoMethodError").$new("undefined method `bit_length` for "+r+":Float","bit_length")),r===0||r===-1)return 0;for(var i=0,s=r<0?~r:r;s!=0;)i+=1,s>>>=1;return i}),I(l,"$ceil",function(r){var i=this;r==null&&(r=0);var s=i.$to_f();if(s%1===0&&r>=0)return s;var o=Math.pow(10,r),v=Math.ceil(s*o)/o;return s%1===0&&(v=Math.round(v)),v},-1),I(l,"$chr",function(r){var i=this;return n.enc(String.fromCharCode(i),r||"BINARY")},-1),I(l,"$denominator",function e(){var r=e.$$p||u,i=this;return e.$$p=null,V(i["$nan?"]())||V(i["$infinite?"]())?1:ie(i,L(i,"denominator",e,!1,!0),"denominator",[],r)}),I(l,"$downto",function e(r){var i=e.$$p||u,s=this;if(e.$$p=null,i===u)return Y(s,"enum_for",["downto",r],function v(){var S=v.$$s==null?this:v.$$s;return ee(d("Numeric"),r)||P.$raise(d("ArgumentError"),"comparison of "+S.$class()+" with "+r.$class()+" failed"),V(C(r,S))?0:te(W(S,r),1)},{$$s:s});r.$$is_number||P.$raise(d("ArgumentError"),"comparison of "+s.$class()+" with "+r.$class()+" failed");for(var o=s;o>=r;o--)i(o);return s}),I(l,"$equal?",function(r){var i=this,s=u;return V(s=i["$=="](r))?s:isNaN(i)&&isNaN(r)}),I(l,"$even?",function(){var r=this;return r%2===0}),I(l,"$floor",function(r){var i=this;r==null&&(r=0);var s=i.$to_f();if(s%1===0&&r>=0)return s;var o=Math.pow(10,r),v=Math.floor(s*o)/o;return s%1===0&&(v=Math.round(v)),v},-1),I(l,"$gcd",function(r){var i=this;ee(d("Integer"),r)||P.$raise(d("TypeError"),"not an integer");for(var s=Math.abs(i),o=Math.abs(r);s>0;){var v=s;s=o%s,o=v}return o}),I(l,"$gcdlcm",function(r){var i=this;return[i.$gcd(r),i.$lcm(r)]}),I(l,"$integer?",function(){var r=this;return r%1===0}),I(l,"$is_a?",function e(r){var i=e.$$p||u,s=this;return e.$$p=null,z(r,d("Integer"))&&ee(d("Integer"),s)||z(r,d("Integer"))&&ee(d("Integer"),s)||z(r,d("Float"))&&ee(d("Float"),s)?!0:ie(s,L(s,"is_a?",e,!1,!0),"is_a?",[r],i)}),I(l,"$instance_of?",function e(r){var i=e.$$p||u,s=this;return e.$$p=null,z(r,d("Integer"))&&ee(d("Integer"),s)||z(r,d("Integer"))&&ee(d("Integer"),s)||z(r,d("Float"))&&ee(d("Float"),s)?!0:ie(s,L(s,"instance_of?",e,!1,!0),"instance_of?",[r],i)}),I(l,"$lcm",function(r){var i=this;return ee(d("Integer"),r)||P.$raise(d("TypeError"),"not an integer"),i==0||r==0?0:Math.abs(i*r/i.$gcd(r))}),I(l,"$next",function(){var r=this;return r+1}),I(l,"$nobits?",function(r){var i=this;return r=y["$coerce_to!"](r,d("Integer"),"to_int"),(i&r)==0}),I(l,"$nonzero?",function(){var r=this;return r==0?u:r}),I(l,"$numerator",function e(){var r=e.$$p||u,i=this;return e.$$p=null,V(i["$nan?"]())||V(i["$infinite?"]())?i:ie(i,L(i,"numerator",e,!1,!0),"numerator",[],r)}),I(l,"$odd?",function(){var r=this;return r%2!==0}),I(l,"$ord",w),I(l,"$pow",function(r,i){var s=this;return s==0&&P.$raise(d("ZeroDivisionError"),"divided by 0"),i===void 0?s["$**"](r):(d("Integer")["$==="](r)||P.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),r<0&&P.$raise(d("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),d("Integer")["$==="](i)||P.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),i===0&&P.$raise(d("ZeroDivisionError"),"divided by 0"),s["$**"](r)["$%"](i))},-2),I(l,"$pred",function(){var r=this;return r-1}),I(l,"$quo",function e(r){var i=e.$$p||u,s=this;return e.$$p=null,ee(d("Integer"),s)?ie(s,L(s,"quo",e,!1,!0),"quo",[r],i):K(s,r)}),I(l,"$rationalize",function(r){var i,s,o=this,v=u,S=u;return arguments.length>1&&P.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),ee(d("Integer"),o)?d("Rational").$new(o,1):V(o["$infinite?"]())?P.$raise(d("FloatDomainError"),"Infinity"):V(o["$nan?"]())?P.$raise(d("FloatDomainError"),"NaN"):V(r==null)?(s=d("Math").$frexp(o),i=H(s),v=i[0]==null?u:i[0],S=i[1]==null?u:i[1],v=d("Math").$ldexp(v,d(d("Float"),"MANT_DIG")).$to_i(),S=W(S,d(d("Float"),"MANT_DIG")),d("Rational").$new(j(2,v),1["$<<"](W(1,S))).$rationalize(d("Rational").$new(1,1["$<<"](W(1,S))))):o.$to_r().$rationalize(r)},-1),I(l,"$remainder",function(r){var i=this;return W(i,j(r,K(i,r).$truncate()))}),I(l,"$round",function(r){var i,s,o=this,v=u;if(ee(d("Integer"),o)){if(V(r==null)||(ee(d("Float"),r)&&V(r["$infinite?"]())&&P.$raise(d("RangeError"),"Infinity"),r=y["$coerce_to!"](r,d("Integer"),"to_int"),V(p(r,d(d("Integer"),"MIN")))&&P.$raise(d("RangeError"),"out of bounds"),V(r>=0)))return o;if(r=r["$-@"](),.415241*r-.125>o.$size())return 0;var S=Math.pow(10,r),F=Math.floor((Math.abs(o)+S/2)/S)*S;return o<0?-F:F}else{if(V(o["$nan?"]())&&V(r==null)&&P.$raise(d("FloatDomainError"),"NaN"),r=y["$coerce_to!"](r||0,d("Integer"),"to_int"),V(R(r,0)))V(o["$nan?"]())?P.$raise(d("RangeError"),"NaN"):V(o["$infinite?"]())&&P.$raise(d("FloatDomainError"),"Infinity");else{if(z(r,0))return Math.round(o);if(V(o["$nan?"]())||V(o["$infinite?"]()))return o}return s=d("Math").$frexp(o),i=H(s),i[0]==null||i[0],v=i[1]==null?u:i[1],V(g(r,W(te(d(d("Float"),"DIG"),2),V(C(v,0))?K(v,4):W(K(v,3),1))))?o:V(p(r,(V(C(v,0))?te(K(v,3),1):K(v,4))["$-@"]()))?0:Math.round(o*Math.pow(10,r))/Math.pow(10,r)}},-1),I(l,"$times",function e(){var r=e.$$p||u,i=this;if(e.$$p=null,!V(r))return Y(i,"enum_for",["times"],function o(){var v=o.$$s==null?this:o.$$s;return v},{$$s:i});for(var s=0;s<i;s++)r(s);return i}),I(l,"$to_f",w),I(l,"$to_i",function(){var r=this;return r<0?Math.ceil(r):Math.floor(r)}),I(l,"$to_r",function(){var r,i,s=this,o=u,v=u;return ee(d("Integer"),s)?d("Rational").$new(s,1):(i=d("Math").$frexp(s),r=H(i),o=r[0]==null?u:r[0],v=r[1]==null?u:r[1],o=d("Math").$ldexp(o,d(d("Float"),"MANT_DIG")).$to_i(),v=W(v,d(d("Float"),"MANT_DIG")),j(o,d(d("Float"),"RADIX")["$**"](v)).$to_r())}),I(l,"$to_s",function(r){var i=this;return r==null&&(r=10),r=y["$coerce_to!"](r,d("Integer"),"to_int"),(V(p(r,2))||V(C(r,36)))&&P.$raise(d("ArgumentError"),"invalid radix "+r),z(i,0)&&V(1/i===-1/0)?"-0.0":i.toString(r)},-1),I(l,"$truncate",function(r){var i=this;r==null&&(r=0);var s=i.$to_f();if(s%1===0&&r>=0)return s;var o=Math.pow(10,r),v=parseInt(s*o,10)/o;return s%1===0&&(v=Math.round(v)),v},-1),I(l,"$digits",function(r){var i=this;r==null&&(r=10),V(p(i,0))&&P.$raise(d(d("Math"),"DomainError"),"out of domain"),r=y["$coerce_to!"](r,d("Integer"),"to_int"),V(p(r,2))&&P.$raise(d("ArgumentError"),"invalid radix "+r),i!=parseInt(i)&&P.$raise(d("NoMethodError"),"undefined method `digits' for "+i.$inspect());var s=i,o=[];if(i==0)return[0];for(;s!=0;)o.push(s%r),s=parseInt(s/r,10);return o},-1),I(l,"$divmod",function e(r){var i=e.$$p||u,s=this;return e.$$p=null,V(s["$nan?"]())||V(r["$nan?"]())?P.$raise(d("FloatDomainError"),"NaN"):V(s["$infinite?"]())?P.$raise(d("FloatDomainError"),"Infinity"):ie(s,L(s,"divmod",e,!1,!0),"divmod",[r],i)}),I(l,"$upto",function e(r){var i=e.$$p||u,s=this;if(e.$$p=null,i===u)return Y(s,"enum_for",["upto",r],function v(){var S=v.$$s==null?this:v.$$s;return ee(d("Numeric"),r)||P.$raise(d("ArgumentError"),"comparison of "+S.$class()+" with "+r.$class()+" failed"),V(p(r,S))?0:te(W(r,S),1)},{$$s:s});r.$$is_number||P.$raise(d("ArgumentError"),"comparison of "+s.$class()+" with "+r.$class()+" failed");for(var o=s;o<=r;o++)i(o);return s}),I(l,"$zero?",function(){var r=this;return r==0}),I(l,"$size",E(4)),I(l,"$nan?",function(){var r=this;return isNaN(r)}),I(l,"$finite?",function(){var r=this;return r!=1/0&&r!=-1/0&&!isNaN(r)}),I(l,"$infinite?",function(){var r=this;return r==1/0?1:r==-1/0?-1:u}),I(l,"$positive?",function(){var r=this;return r!=0&&(r==1/0||1/r>0)}),I(l,"$negative?",function(){var r=this;return r==-1/0||1/r<0});function c(e){var r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),r}function a(e){return new DataView(e.buffer).getFloat64(0,!0)}function $(e){for(var r=c(e),i=0;i<r.length;i++)if(r[i]===255)r[i]=0;else{r[i]++;break}return a(r)}function t(e){for(var r=c(e),i=0;i<r.length;i++)if(r[i]===0)r[i]=255;else{r[i]--;break}return a(r)}return I(l,"$next_float",function(){var r=this;return z(r,d(d("Float"),"INFINITY"))?d(d("Float"),"INFINITY"):V(r["$nan?"]())?d(d("Float"),"NAN"):V(g(r,0))?$(Math.abs(r)):t(r)}),I(l,"$prev_float",function(){var r=this;return z(r,d(d("Float"),"INFINITY")["$-@"]())?d(d("Float"),"INFINITY")["$-@"]():V(r["$nan?"]())?d(d("Float"),"NAN"):V(C(r,0))?t(r):-$(Math.abs(r))}),B(l,"arg","angle"),B(l,"eql?","=="),B(l,"fdiv","/"),B(l,"inspect","to_s"),B(l,"kind_of?","is_a?"),B(l,"magnitude","abs"),B(l,"modulo","%"),B(l,"object_id","__id__"),B(l,"phase","angle"),B(l,"succ","next"),B(l,"to_int","to_i")}("::",d("Numeric")),M("::","Fixnum",d("Number")),function(A,h,_){var l=k(A,h,"Integer"),x=[l].concat(_);return l.$$is_number_class=!0,l.$$is_integer_class=!0,function(G,c){var a=[G].concat(c),$=n.$r(a);return I(G,"$allocate",function(){var e=this;return P.$raise(d("TypeError"),"allocator undefined for "+e.$name())}),n.udef(G,"$new"),I(G,"$sqrt",function(e){return e=y["$coerce_to!"](e,d("Integer"),"to_int"),e<0&&P.$raise(d(d("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(e),10)}),I(G,"$try_convert",function(e){var r=this;return $("Opal")["$coerce_to?"](e,r,"to_int")})}(n.get_singleton_class(l),x),M(l,"MAX",Math.pow(2,30)-1),M(l,"MIN",-Math.pow(2,30))}("::",d("Numeric"),m),function(A,h,_){var l=k(A,h,"Float");return l.$$is_number_class=!0,function(x,G){return I(x,"$allocate",function(){var a=this;return P.$raise(d("TypeError"),"allocator undefined for "+a.$name())}),n.udef(x,"$new"),I(x,"$===",function(a){return!!a.$$is_number})}(n.get_singleton_class(l)),M(l,"INFINITY",1/0),M(l,"MAX",Number.MAX_VALUE),M(l,"MIN",Number.MIN_VALUE),M(l,"NAN",NaN),M(l,"DIG",15),M(l,"MANT_DIG",53),M(l,"RADIX",2),M(l,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",d("Numeric"))};Opal.modules["corelib/range"]=function(n){var k=n.klass,y=n.truthy,P=n.Kernel,I=n.def,ee=n.not,V=n.send2,C=n.find_super,Z=n.lambda,p=n.send,B=n.rb_ge,ie=n.rb_gt,L=n.eqeq,Y=n.rb_le,te=n.rb_lt,W=n.eqeqeq,z=n.return_ivar,w=n.rb_minus,K=n.Opal,H=n.rb_divide,j=n.rb_plus,R=n.rb_times,g=n.thrower,E=n.alias,M=n.top,q=[],m=n.nil,u=n.$$$;return n.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),M.$require("corelib/enumerable"),function(d,A,h){var _=k(d,A,"Range"),l=[_].concat(h),x=n.$r(l),G=_.$$prototype;G.begin=G.end=G.excl=m,_.$include(u("Enumerable")),_.$$prototype.$$is_range=!0,_.$attr_reader("begin","end"),I(_,"$initialize",function($,t,e){var r=this;return e==null&&(e=!1),y(r.begin)&&P.$raise(u("NameError"),"'initialize' called twice"),y($["$<=>"](t))||y($["$nil?"]())||y(t["$nil?"]())||P.$raise(u("ArgumentError"),"bad value for range"),r.begin=$,r.end=t,r.excl=e},-3),I(_,"$===",function($){var t=this;return y($.$$is_range)?!1:t["$cover?"]($)});function c(a){return a.begin===m||a.end===m||a.begin===-1/0||a.end===1/0||a.begin===1/0||a.end===-1/0}return I(_,"$count",function a(){var $=a.$$p||m,t=this;return a.$$p=null,ee($!==m)&&y(c(t))?u(u("Float"),"INFINITY"):V(t,C(t,"count",a,!1,!0),"count",[],$)}),I(_,"$to_a",function a(){var $=a.$$p||m,t=this;return a.$$p=null,y(c(t))&&P.$raise(u("TypeError"),"cannot convert endless range to an array"),V(t,C(t,"to_a",a,!1,!0),"to_a",[],$)}),I(_,"$cover?",function($){var t=this,e=m,r=m,i=m,s=m,o=m,v=m,S=m,F=m;return e=Z(function(J,O){var ae=m;return J==null&&(J=m),O==null&&(O=m),y(ae=J["$<=>"](O))?ae:1}),y($.$$is_range)?(r=$.$begin(),i=$.$end(),s=$["$exclude_end?"](),y(t.begin)&&y(r["$nil?"]())||y(t.end)&&y(i["$nil?"]())||y(r)&&y(i)&&y(p(e.$call(r,i),"then",[],function(J){return J==null&&(J=m),y(s)?B(J,0):ie(J,0)}))||y(r)&&ee(t["$cover?"](r))?!1:(o=e.$call(t.end,i),L(t.excl,s)?B(o,0):y(t.excl)?ie(o,0):y(B(o,0))?!0:(v=$.$max(),y(S=v["$nil?"]()["$!"]())?Y(e.$call(v,t.end),0):S))):y(t.begin)&&y(ie(e.$call(t.begin,$),0))?!1:y(t.end["$nil?"]())?!0:(F=e.$call($,t.end),y(t.excl)?te(F,0):Y(F,0))}),I(_,"$each",function a(){var $=a.$$p||m,t=this,e=m,r=m,i=m;if(a.$$p=null,$===m)return p(t,"enum_for",["each"],function v(){var S=v.$$s==null?this:v.$$s;return S.$size()},{$$s:t});var s,o;if(t.begin.$$is_number&&t.end.$$is_number){for((t.begin%1!==0||t.end%1!==0)&&P.$raise(u("TypeError"),"can't iterate from Float"),s=t.begin,o=t.end+(y(t.excl)?0:1);s<o;s++)$(s);return t}if(t.begin.$$is_string&&t.end.$$is_string)return p(t.begin,"upto",[t.end,t.excl],$.$to_proc()),t;for(e=t.begin,r=t.end,y(e["$respond_to?"]("succ"))||P.$raise(u("TypeError"),"can't iterate from "+e.$class());y(y(i=t.end["$nil?"]())?i:te(e["$<=>"](r),0));)n.yield1($,e),e=e.$succ();return ee(t.excl)&&L(e,r)&&n.yield1($,e),t}),I(_,"$eql?",function($){var t=this,e=m,r=m;return W(u("Range"),$)?y(e=y(r=t.excl["$==="]($["$exclude_end?"]()))?t.begin["$eql?"]($.$begin()):r)?t.end["$eql?"]($.$end()):e:!1}),I(_,"$exclude_end?",z("excl")),I(_,"$first",function a($){var t=a.$$p||m,e=this;return a.$$p=null,y(e.begin["$nil?"]())&&P.$raise(u("RangeError"),"cannot get the minimum of beginless range"),y($==null)?e.begin:V(e,C(e,"first",a,!1,!0),"first",[$],t)},-1),I(_,"$include?",function a($){var t=a.$$p||m,e=this,r=m,i=m;if(a.$$p=null,y(e.begin.$$is_number||e.end.$$is_number)||y(e.begin["$is_a?"](u("Time")))||y(e.end["$is_a?"](u("Time")))||y(u("Integer").$try_convert(e.begin))||y(u("Integer").$try_convert(e.end)))return e["$cover?"]($);if(y(e.begin.$$is_string||e.end.$$is_string)){if(y(e.begin.$$is_string&&e.end.$$is_string))return p(e.begin.$upto(e.end,e.excl),"any?",[],function(o){return o==null&&(o=m),o["$=="]($)});if(y(e.begin["$nil?"]()))return r=$["$<=>"](e.end),y(i=r["$nil?"]()["$!"]())?y(e.excl)?te(r,0):Y(r,0):i;if(y(e.end["$nil?"]()))return r=e.begin["$<=>"]($),y(i=r["$nil?"]()["$!"]())?Y(r,0):i}return V(e,C(e,"include?",a,!1,!0),"include?",[$],t)}),I(_,"$last",function($){var t=this;return y(t.end["$nil?"]())&&P.$raise(u("RangeError"),"cannot get the maximum of endless range"),y($==null)?t.end:t.$to_a().$last($)},-1),I(_,"$max",function a(){var $=a.$$p||m,t=this;return a.$$p=null,y(t.end["$nil?"]())?P.$raise(u("RangeError"),"cannot get the maximum of endless range"):$!==m?V(t,C(t,"max",a,!1,!0),"max",[],$):ee(t.begin["$nil?"]())&&(y(ie(t.begin,t.end))||y(t.excl)&&L(t.begin,t.end))?m:t.excl?t.end-1:t.end}),I(_,"$min",function a(){var $=a.$$p||m,t=this;return a.$$p=null,y(t.begin["$nil?"]())?P.$raise(u("RangeError"),"cannot get the minimum of beginless range"):$!==m?V(t,C(t,"min",a,!1,!0),"min",[],$):ee(t.end["$nil?"]())&&(y(ie(t.begin,t.end))||y(t.excl)&&L(t.begin,t.end))?m:t.begin}),I(_,"$size",function(){var $=this.begin,t=this.end;if(u("Numeric")["$==="]($)){if(u("Numeric")["$==="](t)){var e=w(t,$);return e<0?0:(this.excl||(e+=1),u("Float")["$==="]($)||u("Float")["$==="](t)?Math.floor(e):e)}else if(t===m)return 1/0}else if($===m&&u("Numeric")["$==="](t))return 1/0;return m}),I(_,"$step",function a($){var t=a.$$p||m,e=this,r=m,i=m;a.$$p=null;function s(){$==null?$=1:$.$$is_number||($=K["$coerce_to!"]($,u("Integer"),"to_int")),$<0?P.$raise(u("ArgumentError"),"step can't be negative"):$===0&&P.$raise(u("ArgumentError"),"step can't be 0")}function o(){if(!e.begin["$respond_to?"]("succ")||e.begin.$$is_string&&e.end.$$is_string)return m;if($%1===0)return H(e.$size(),$).$ceil();var v=e.begin,S=e.end,F=Math.abs,T=Math.floor,J=(F(v)+F(S)+F(S-v))/F($)*u(u("Float"),"EPSILON"),O;return J>.5&&(J=.5),e.excl?(O=T((S-v)/$-J),O*$+v<S&&O++):O=T((S-v)/$+J)+1,O}return t===m?(y(e.begin["$is_a?"](x("Numeric")))||y(e.begin["$nil?"]()))&&(y(e.end["$is_a?"](x("Numeric")))||y(e.end["$nil?"]()))&&ee(y(r=e.begin["$nil?"]())?e.end["$nil?"]():r)?u(u("Enumerator"),"ArithmeticSequence").$new(e,$,"step"):p(e,"enum_for",["step",$],function(){return s(),o()}):(s(),y(e.begin.$$is_number&&e.end.$$is_number)?(i=0,function(){try{var v=g("break");return p(e,"loop",[],function S(){var F=S.$$s==null?this:S.$$s,T=m;return F.begin==null&&(F.begin=m),F.excl==null&&(F.excl=m),F.end==null&&(F.end=m),T=j(F.begin,R(i,$)),y(F.excl)?y(B(T,F.end))&&v.$throw(m,S.$$is_lambda):y(ie(T,F.end))&&v.$throw(m,S.$$is_lambda),n.yield1(t,T),i=j(i,1)},{$$s:e})}catch(S){if(S===v)return S.$v;throw S}finally{v.is_orphan=!0}}()):(e.begin.$$is_string&&e.end.$$is_string&&$%1!==0&&P.$raise(u("TypeError"),"no implicit conversion to float from string"),p(e,"each_with_index",[],function(S,F){return S==null&&(S=m),F==null&&(F=m),L(F["$%"]($),0)?n.yield1(t,S):m})),e)},-1),I(_,"$%",function($){var t=this;return y(t.begin["$is_a?"](x("Numeric")))&&y(t.end["$is_a?"](x("Numeric")))?u(u("Enumerator"),"ArithmeticSequence").$new(t,$,"%"):t.$step($)}),I(_,"$bsearch",function a(){var $=a.$$p||m,t=this;return a.$$p=null,$===m?t.$enum_for("bsearch"):(y(c(t)&&(t.begin.$$is_number||t.end.$$is_number))&&P.$raise(u("NotImplementedError"),"Can't #bsearch an infinite range"),y(t.begin.$$is_number&&t.end.$$is_number)||P.$raise(u("TypeError"),"can't do binary search for "+t.begin.$class()),p(t.$to_a(),"bsearch",[],$.$to_proc()))}),I(_,"$to_s",function(){var $=this,t=m;return""+(y(t=$.begin)?t:"")+(y($.excl)?"...":"..")+(y(t=$.end)?t:"")}),I(_,"$inspect",function(){var $=this,t=m;return""+(y(t=$.begin)?$.begin.$inspect():t)+(y($.excl)?"...":"..")+(y(t=$.end)?$.end.$inspect():t)}),I(_,"$marshal_load",function($){var t=this;return t.begin=$["$[]"]("begin"),t.end=$["$[]"]("end"),t.excl=$["$[]"]("excl")}),I(_,"$hash",function(){var $=this;return[u("Range"),$.begin,$.end,$.excl].$hash()}),E(_,"==","eql?"),E(_,"member?","include?")}("::",null,q)};Opal.modules["corelib/proc"]=function(n){var k=n.slice,y=n.each_ivar,P=n.klass,I=n.truthy,ee=n.Kernel,V=n.defs,C=n.def,Z=n.send,p=n.to_a,B=n.return_self,ie=n.ensure_kwargs,L=n.hash_get,Y=n.Opal,te=n.alias,W=n.nil,z=n.$$$;return n.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(w,K){var H=P(w,K,"Proc");n.prop(H.$$prototype,"$$is_proc",!0),n.prop(H.$$prototype,"$$is_lambda",!1),V(H,"$new",function g(){var E=g.$$p||W;return g.$$p=null,I(E)||ee.$raise(z("ArgumentError"),"tried to create a Proc object without a block"),E});function j(g,E){if(g.$$ret)try{return g.apply(null,E)}catch(M){if(M===g.$$ret)return M.$v;throw M}else return g.apply(null,E)}function R(g,E){if(g.$$brk)try{return n.yieldX(g,E)}catch(M){if(M===g.$$brk)return M.$v;throw M}else return n.yieldX(g,E)}return C(H,"$call",function g(E){var M=g.$$p||W,q,m,u=this;return g.$$p=null,q=k(arguments),m=q,M!==W&&(u.$$p=M),u.$$is_lambda?j(u,m):R(u,m)},-1),C(H,"$>>",function g(E){g.$$p;var M=this;return g.$$p=null,Z(ee,"proc",[],function q(m){var u=q.$$p||W,d,A,h=q.$$s==null?this:q.$$s,_=W;return q.$$p=null,d=k(arguments),A=d,_=Z(h,"call",p(A),u.$to_proc()),E.$call(_)},{$$arity:-1,$$s:M})}),C(H,"$<<",function g(E){g.$$p;var M=this;return g.$$p=null,Z(ee,"proc",[],function q(m){var u=q.$$p||W,d,A,h=q.$$s==null?this:q.$$s,_=W;return q.$$p=null,d=k(arguments),A=d,_=Z(E,"call",p(A),u.$to_proc()),h.$call(_)},{$$arity:-1,$$s:M})}),C(H,"$to_proc",B),C(H,"$lambda?",function(){var E=this;return!!E.$$is_lambda}),C(H,"$arity",function(){var E=this;return E.$$is_curried?-1:E.$$arity!=null?E.$$arity:E.length}),C(H,"$source_location",function(){var E=this,M=W;return E.$$is_curried?W:I(M=E.$$source_location)?M:W}),C(H,"$binding",function(){var E=this;return E.$$is_curried&&ee.$raise(z("ArgumentError"),"Can't create Binding"),I(z("::","Binding","skip_raise")?"constant":W)?z("Binding").$new(W,[],E.$$s,E.$source_location()):W}),C(H,"$parameters",function(E){var M,q=this;if(E=ie(E),M=L(E,"lambda"),q.$$is_curried)return[["rest"]];if(q.$$parameters){if(M??q.$$is_lambda)return q.$$parameters;var m=[],u,d;for(u=0,d=q.$$parameters.length;u<d;u++){var A=q.$$parameters[u];A[0]==="req"&&(A=["opt",A[1]]),m.push(A)}return m}else return[]},-1),C(H,"$curry",function(E){var M=this;E===void 0?E=M.length:(E=Y["$coerce_to!"](E,z("Integer"),"to_int"),M.$$is_lambda&&E!==M.length&&ee.$raise(z("ArgumentError"),"wrong number of arguments ("+E+" for "+M.length+")"));function q(){var m=k(arguments),u=m.length,d;return u>E&&M.$$is_lambda&&!M.$$is_curried&&ee.$raise(z("ArgumentError"),"wrong number of arguments ("+u+" for "+E+")"),u>=E?M.$call.apply(M,m):(d=function(){return q.apply(null,m.concat(k(arguments)))},d.$$is_lambda=M.$$is_lambda,d.$$is_curried=!0,d)}return q.$$is_lambda=M.$$is_lambda,q.$$is_curried=!0,q},-1),C(H,"$dup",function(){var E=this,M=E.$$original_proc||E,q=function(){return M.apply(this,arguments)};return y(E,function(m){q[m]=E[m]}),q}),te(H,"===","call"),te(H,"clone","dup"),te(H,"yield","call"),te(H,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(n){var k=n.klass,y=n.def,P=n.truthy,I=n.slice,ee=n.alias,V=n.Kernel,C=n.send,Z=n.to_a,p=n.nil,B=n.$$$;return n.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function(ie,L){var Y=k(ie,L,"Method"),te=Y.$$prototype;return te.method=te.receiver=te.owner=te.name=p,Y.$attr_reader("owner","receiver","name"),y(Y,"$initialize",function(z,w,K,H){var j=this;return j.receiver=z,j.owner=w,j.name=H,j.method=K}),y(Y,"$arity",function(){var z=this;return z.method.$arity()}),y(Y,"$parameters",function(){var z=this;return z.method.$$parameters}),y(Y,"$source_location",function(){var z=this,w=p;return P(w=z.method.$$source_location)?w:["(eval)",0]}),y(Y,"$comments",function(){var z=this,w=p;return P(w=z.method.$$comments)?w:[]}),y(Y,"$call",function W(z){var w=W.$$p||p,K,H,j=this;return W.$$p=null,K=I(arguments),H=K,j.method.$$p=w,j.method.apply(j.receiver,H)},-1),y(Y,"$curry",function(z){var w=this;return w.method.$curry(z)},-1),y(Y,"$>>",function(z){var w=this;return w.method["$>>"](z)}),y(Y,"$<<",function(z){var w=this;return w.method["$<<"](z)}),y(Y,"$unbind",function(){var z=this;return B("UnboundMethod").$new(z.receiver.$class(),z.owner,z.method,z.name)}),y(Y,"$to_proc",function(){var z=this,w=z.$call.bind(z);return w.$$unbound=z.method,w.$$is_lambda=!0,w.$$arity=z.method.$$arity==null?z.method.length:z.method.$$arity,w.$$parameters=z.method.$$parameters,w}),y(Y,"$inspect",function(){var z=this;return"#<"+z.$class()+": "+z.receiver.$class()+"#"+z.name+" (defined in "+z.owner+" in "+z.$source_location().$join(":")+")>"}),ee(Y,"[]","call"),ee(Y,"===","call")}("::",null),function(ie,L){var Y=k(ie,L,"UnboundMethod"),te=Y.$$prototype;return te.method=te.owner=te.name=te.source=p,Y.$attr_reader("source","owner","name"),y(Y,"$initialize",function(z,w,K,H){var j=this;return j.source=z,j.owner=w,j.method=K,j.name=H,j.$$method=K}),y(Y,"$arity",function(){var z=this;return z.method.$arity()}),y(Y,"$parameters",function(){var z=this;return z.method.$$parameters}),y(Y,"$source_location",function(){var z=this,w=p;return P(w=z.method.$$source_location)?w:["(eval)",0]}),y(Y,"$comments",function(){var z=this,w=p;return P(w=z.method.$$comments)?w:[]}),y(Y,"$bind",function(z){var w=this;if(w.owner.$$is_module||n.is_a(z,w.owner))return B("Method").$new(z,w.owner,w.method,w.name);V.$raise(B("TypeError"),"can't bind singleton method to a different class (expected "+z+".kind_of?("+w.owner+" to be true)")}),y(Y,"$bind_call",function W(z,w){var K=W.$$p||p,H,j,R=this;return W.$$p=null,H=I(arguments,1),j=H,C(R.$bind(z),"call",Z(j),K.$to_proc())},-2),y(Y,"$inspect",function(){var z=this;return"#<"+z.$class()+": "+z.source+"#"+z.name+" (defined in "+z.owner+" in "+z.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(n){var k=n.gvars,y=n.const_set,P=n.Object,I=n.nil;return n.add_stubs("new"),k["&"]=k["~"]=k["`"]=k["'"]=I,k.LOADED_FEATURES=k['"']=n.loaded_features,k.LOAD_PATH=k[":"]=[],k["/"]=`
`,k[","]=I,y("::","ARGV",[]),y("::","ARGF",P.$new()),y("::","ENV",new Map),k.VERBOSE=!1,k.DEBUG=!1,k.SAFE=0};Opal.modules["corelib/io"]=function(n){var k=n.klass,y=n.const_set,P=n.not,I=n.truthy,ee=n.def,V=n.return_ivar,C=n.return_val,Z=n.slice,p=n.Kernel,B=n.gvars,ie=n.send,L=n.to_a,Y=n.rb_plus,te=n.neqeq,W=n.range,z=n.eqeq,w=n.to_ary,K=n.rb_gt,H=n.assign_ivar_val,j=n.alias,R,g=n.nil,E=n.$$$;n.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(q,m){var u=k(q,m,"IO"),d=u.$$prototype;return d.read_buffer=d.closed=g,y(u,"SEEK_SET",0),y(u,"SEEK_CUR",1),y(u,"SEEK_END",2),y(u,"SEEK_DATA",3),y(u,"SEEK_HOLE",4),y(u,"READABLE",1),y(u,"WRITABLE",4),u.$attr_reader("eof"),u.$attr_accessor("read_proc","sync","tty","write_proc"),ee(u,"$initialize",function(h,_){var l=this;return _==null&&(_="r"),l.fd=h,l.flags=_,l.eof=!1,I(_["$include?"]("r"))&&P(_["$match?"](/[wa+]/))?l.closed="write":I(_["$match?"](/[wa]/))&&P(_["$match?"](/[r+]/))?l.closed="read":g},-2),ee(u,"$fileno",V("fd")),ee(u,"$tty?",function(){var h=this;return h.tty==!0}),ee(u,"$write",function(h){var _=this;return _.write_proc(h),h.$size()}),ee(u,"$flush",C(g)),ee(u,"$<<",function(h){var _=this;return _.$write(h),_}),ee(u,"$print",function(h){var _,l,x=this;B[","]==null&&(B[","]=g),_=Z(arguments),l=_;for(var G=0,c=l.length;G<c;G++)l[G]=p.$String(l[G]);return x.$write(l.join(B[","])),g},-1),ee(u,"$puts",function(h){var _,l,x=this;_=Z(arguments),l=_;var G;if(l.length===0)return x.$write(`
`),g;for(var c=0,a=l.length;c<a;c++)if(l[c].$$is_array){var $=l[c].$flatten();$.length>0&&ie(x,"puts",L($))}else l[c].$$is_string?G=l[c].valueOf():G=p.$String(l[c]),G.endsWith(`
`)||(G+=`
`),x.$write(G);return g},-1),ee(u,"$getc",function(){var h=this,_=g,l=g,x=g;h.read_buffer=I(_=h.read_buffer)?_:"",l="";do if(h.read_buffer=Y(h.read_buffer,l),te(h.read_buffer,""))return x=h.read_buffer["$[]"](0),h.read_buffer=h.read_buffer["$[]"](W(1,-1,!1)),x;while(I(l=h.$sysread_noraise(1)));return g}),ee(u,"$getbyte",function(){var h,_=this;return h=_.$getc(),h===g||h==null?g:h.$ord()}),ee(u,"$readbyte",function(){var h=this;return h.$readchar().$ord()}),ee(u,"$readchar",function(){var h=this,_=g;return I(_=h.$getc())?_:p.$raise(E("EOFError"),"end of file reached")}),ee(u,"$readline",function(h){var _,l,x=this,G=g;return _=Z(arguments),l=_,I(G=ie(x,"gets",L(l)))?G:p.$raise(E("EOFError"),"end of file reached")},-1),ee(u,"$gets",function(h,_,l){var x,G,c=this,a=g,$=g,t=g,e=g,r=g,i=g;B["/"]==null&&(B["/"]=g),h==null&&(h=!1),_==null&&(_=g),l==null&&(l=new Map),I(h.$$is_number)&&P(_)&&(x=[!1,h,_],h=x[0],_=x[1],l=x[2]),I(h.$$is_hash)&&P(_)&&z(l,new Map)?(x=[!1,g,h],h=x[0],_=x[1],l=x[2]):I(_.$$is_hash)&&z(l,new Map)&&(x=[h,g,_],h=x[0],_=x[1],l=x[2]),a=h,z(h,!1)&&(h=B["/"]),z(h,"")&&(h=/\r?\n\r?\n/),h=I($=h)?$:"",z(a,"")||(h=h.$to_str()),t=z(a,"")?2:h.$length(),z(h," ")&&(h=/ /),c.read_buffer=I($=c.read_buffer)?$:"",e="",r=g;do if(c.read_buffer=Y(c.read_buffer,e),te(h,"")&&I(I(h.$$is_regexp)?c.read_buffer["$match?"](h):c.read_buffer["$include?"](h))){i=c.read_buffer,G=c.read_buffer.$split(h,2),x=w(G),r=x[0]==null?g:x[0],c.read_buffer=x[1]==null?g:x[1],te(r,i)&&(r=Y(r,i["$[]"](r.$length(),t)));break}while(I(e=c.$sysread_noraise(z(h,"")?65536:1)));return I(r)||(x=[I($=c.read_buffer)?$:"",""],r=x[0],c.read_buffer=x[1],z(r,"")&&(r=g)),I(r)&&(I(_)&&(r=r["$[]"](n.Range.$new(0,_,!0)),c.read_buffer=Y(r["$[]"](n.Range.$new(_,-1,!1)),c.read_buffer)),I(l["$[]"]("chomp"))&&(r=r.$sub(/\r?\n$/,"")),z(a,"")&&(r=r.$sub(/^[\r\n]+/,""))),z(a,!1)&&(B._=r),r},-1),ee(u,"$sysread",function(h){var _=this,l=g;return I(l=_.read_proc(h))?l:(_.eof=!0,p.$raise(E("EOFError"),"end of file reached"))}),ee(u,"$sysread_noraise",function(h){var _=this;try{return _.$sysread(h)}catch(l){if(n.rescue(l,[E("EOFError")]))try{return g}finally{n.pop_exception(l)}else throw l}}),ee(u,"$readpartial",function(h){var _,l=this,x=g,G=g,c=g;return l.read_buffer=I(x=l.read_buffer)?x:"",G=l.$sysread(h),_=[Y(l.read_buffer,I(x=G)?x:""),""],c=_[0],l.read_buffer=_[1],z(c,"")&&(c=g),c}),ee(u,"$read",function(h){var _,l=this,x=g,G=g,c=g;h==null&&(h=g),l.read_buffer=I(x=l.read_buffer)?x:"",G="",c=g;do if(l.read_buffer=Y(l.read_buffer,G),I(h)&&I(K(l.read_buffer.$length(),h)))return _=[l.read_buffer["$[]"](n.Range.$new(0,h,!0)),l.read_buffer["$[]"](n.Range.$new(h,-1,!1))],c=_[0],l.read_buffer=_[1],c;while(I(G=l.$sysread_noraise(I(x=h)?x:65536)));return _=[l.read_buffer,""],c=_[0],l.read_buffer=_[1],c},-1),ee(u,"$readlines",function(h){var _=this;return B["/"]==null&&(B["/"]=g),h==null&&(h=B["/"]),_.$each_line(h).$to_a()},-1),ee(u,"$each",function A(h,_){var l=A.$$p||g,x,G,c,a=this,$=g;if(B["/"]==null&&(B["/"]=g),A.$$p=null,x=Z(arguments),x.length>0&&(G=x.shift()),G==null&&(G=B["/"]),c=x,l===g)return ie(a,"enum_for",["each",G].concat(L(c)));for(;I($=ie(a,"gets",[G].concat(L(c))));)n.yield1(l,$);return a},-1),ee(u,"$each_byte",function A(){var h=A.$$p||g,_=this,l=g;if(A.$$p=null,h===g)return _.$enum_for("each_byte");for(;I(l=_.$getbyte());)n.yield1(h,l);return _}),ee(u,"$each_char",function A(){var h=A.$$p||g,_=this,l=g;if(A.$$p=null,h===g)return _.$enum_for("each_char");for(;I(l=_.$getc());)n.yield1(h,l);return _}),ee(u,"$close",H("closed","both")),ee(u,"$close_read",function(){var h=this;return z(h.closed,"write")?h.closed="both":h.closed="read"}),ee(u,"$close_write",function(){var h=this;return z(h.closed,"read")?h.closed="both":h.closed="write"}),ee(u,"$closed?",function(){var h=this;return h.closed["$=="]("both")}),ee(u,"$closed_read?",function(){var h=this,_=g;return I(_=h.closed["$=="]("read"))?_:h.closed["$=="]("both")}),ee(u,"$closed_write?",function(){var h=this,_=g;return I(_=h.closed["$=="]("write"))?_:h.closed["$=="]("both")}),ee(u,"$check_writable",function(){var h=this;return I(h["$closed_write?"]())?p.$raise(E("IOError"),"not opened for writing"):g}),ee(u,"$check_readable",function(){var h=this;return I(h["$closed_read?"]())?p.$raise(E("IOError"),"not opened for reading"):g}),j(u,"each_line","each"),j(u,"eof?","eof")}("::",null),y("::","STDIN",B.stdin=E("IO").$new(0,"r")),y("::","STDOUT",B.stdout=E("IO").$new(1,"w")),y("::","STDERR",B.stderr=E("IO").$new(2,"w"));var M=n.global.console;return E("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(q){process.stdout.write(q)}:function(q){M.log(q)}),E("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(q){process.stderr.write(q)}:function(q){M.warn(q)}),R=[function(q){var m=prompt();return m!==null?m+`
`:g}],ie(E("STDIN"),"read_proc=",R),R[R.length-1]};Opal.modules["opal/regexp_anchors"]=function(n){var k=n.module,y=n.const_set,P=[];n.nil;var I=n.$$$;return n.add_stubs("new"),function(ee,V){var C=k(ee,"Opal"),Z=[C].concat(V),p=n.$r(Z);return y(C,"REGEXP_START","^"),y(C,"REGEXP_END","$"),y(C,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),y(C,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),y(C,"INLINE_IDENTIFIER_REGEXP",p("Regexp").$new("[^"+I(C,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+I(C,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),y(C,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),y(C,"CONST_NAME_REGEXP",p("Regexp").$new(""+I(C,"REGEXP_START")+"(::)?[A-Z][^"+I(C,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+I(C,"REGEXP_END")))}(P[0],P)};Opal.modules["opal/mini"]=function(n){var k=n.Object;return n.nil,n.add_stubs("require"),k.$require("opal/base"),k.$require("corelib/nil"),k.$require("corelib/boolean"),k.$require("corelib/string"),k.$require("corelib/comparable"),k.$require("corelib/enumerable"),k.$require("corelib/enumerator"),k.$require("corelib/array"),k.$require("corelib/hash"),k.$require("corelib/number"),k.$require("corelib/range"),k.$require("corelib/proc"),k.$require("corelib/method"),k.$require("corelib/regexp"),k.$require("corelib/variables"),k.$require("corelib/io"),k.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(n){var k=n.coerce_to,y=n.module,P=n.slice,I=n.truthy,ee=n.eqeq,V=n.Opal,C=n.Kernel,Z=n.gvars,p=n.def,B=n.alias,ie=n.nil,L=n.$$$;return n.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(Y){var te=y(Y,"Kernel");return p(te,"$format",function(z,w){var K,H,j=ie;Z.DEBUG==null&&(Z.DEBUG=ie),K=P(arguments,1),H=K,ee(H.$length(),1)&&I(H["$[]"](0)["$respond_to?"]("to_ary"))&&(j=V["$coerce_to?"](H["$[]"](0),L("Array"),"to_ary"),I(j["$nil?"]())||(H=j.$to_a()));var R="",g=0,E,M,q=z.length,m,u,d,A,h,_,l,x,G,c,a,$,t,e=1,r=0,i,s=0,o=1,v=2,S=4,F=8,T=16,J=32,O=64,ae=128;function le(){i&J&&C.$raise(L("ArgumentError"),"flag after width"),i&ae&&C.$raise(L("ArgumentError"),"flag after precision")}function ce(){i&J&&C.$raise(L("ArgumentError"),"width given twice"),i&ae&&C.$raise(L("ArgumentError"),"width after precision")}function de(N){return N>=H.length&&C.$raise(L("ArgumentError"),"too few arguments"),H[N]}function he(){switch(r){case-1:C.$raise(L("ArgumentError"),"unnumbered("+e+") mixed with numbered");case-2:C.$raise(L("ArgumentError"),"unnumbered("+e+") mixed with named")}return r=e++,de(r-1)}function ve(N){return r>0&&C.$raise(L("ArgumentError"),"numbered("+N+") after unnumbered("+r+")"),r===-2&&C.$raise(L("ArgumentError"),"numbered("+N+") after named"),N<1&&C.$raise(L("ArgumentError"),"invalid index - "+N+"$"),r=-1,de(N-1)}function me(){return t===void 0?he():t}function be(N){for(var D,X="";;M++){if(M===q&&C.$raise(L("ArgumentError"),"malformed format string - %*[0-9]"),z.charCodeAt(M)<48||z.charCodeAt(M)>57)return M--,D=parseInt(X,10)||0,D>2147483647&&C.$raise(L("ArgumentError"),""+N+" too big"),D;X+=z.charAt(M)}}function $e(N){var D,X=be(N);return z.charAt(M+1)==="$"?(M++,D=ve(X)):D=he(),D.$to_int()}for(M=z.indexOf("%");M!==-1;M=z.indexOf("%",M)){switch(u=void 0,i=s,A=-1,h=-1,t=void 0,E=M,M++,z.charAt(M)){case"%":g=M;case"":case`
`:case"\0":M++;continue}e:for(;M<q;M++)switch(z.charAt(M)){case" ":le(),i|=T;continue e;case"#":le(),i|=o;continue e;case"+":le(),i|=S;continue e;case"-":le(),i|=v;continue e;case"0":le(),i|=F;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(_=be("width"),z.charAt(M+1)==="$"){if(M+2===q){u="%",M++;break e}t!==void 0&&C.$raise(L("ArgumentError"),"value given twice - %"+_+"$"),t=ve(_),M++}else ce(),i|=J,A=_;continue e;case"<":case"{":for(x=z.charAt(M)==="<"?">":"}",l="",M++;;M++){if(M===q&&C.$raise(L("ArgumentError"),"malformed name - unmatched parenthesis"),z.charAt(M)===x){if(r>0&&C.$raise(L("ArgumentError"),"named "+l+" after unnumbered("+r+")"),r===-1&&C.$raise(L("ArgumentError"),"named "+l+" after numbered"),r=-2,(H[0]===void 0||!H[0].$$is_hash)&&C.$raise(L("ArgumentError"),"one hash required"),t=H[0].$fetch(l),x===">")continue e;if(u=t.toString(),h!==-1&&(u=u.slice(0,h)),i&v)for(;u.length<A;)u=u+" ";else for(;u.length<A;)u=" "+u;break e}l+=z.charAt(M)}case"*":M++,ce(),i|=J,A=$e("width"),A<0&&(i|=v,A=-A);continue e;case".":if(i&ae&&C.$raise(L("ArgumentError"),"precision given twice"),i|=O|ae,h=0,M++,z.charAt(M)==="*"){M++,h=$e("precision"),h<0&&(i&=~O);continue e}h=be("precision");continue e;case"d":case"i":case"u":if(m=C.$Integer(me()),m>=0){for(u=m.toString();u.length<h;)u="0"+u;if(i&v)for((i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<A;)u=u+" ";else if(i&F&&h===-1){for(;u.length<A-(i&S||i&T?1:0);)u="0"+u;(i&S||i&T)&&(u=(i&S?"+":" ")+u)}else for((i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<A;)u=" "+u}else{for(u=(-m).toString();u.length<h;)u="0"+u;if(i&v)for(u="-"+u;u.length<A;)u=u+" ";else if(i&F&&h===-1){for(;u.length<A-1;)u="0"+u;u="-"+u}else for(u="-"+u;u.length<A;)u=" "+u}break e;case"b":case"B":case"o":case"x":case"X":switch(z.charAt(M)){case"b":case"B":G=2,c="0b",a=/^1+/,$="1";break;case"o":G=8,c="0",a=/^3?7+/,$="7";break;case"x":case"X":G=16,c="0x",a=/^f+/,$="f";break}if(m=C.$Integer(me()),m>=0){for(u=m.toString(G);u.length<h;)u="0"+u;if(i&v)for((i&S||i&T)&&(u=(i&S?"+":" ")+u),i&o&&m!==0&&(u=c+u);u.length<A;)u=u+" ";else if(i&F&&h===-1){for(;u.length<A-(i&S||i&T?1:0)-(i&o&&m!==0?c.length:0);)u="0"+u;i&o&&m!==0&&(u=c+u),(i&S||i&T)&&(u=(i&S?"+":" ")+u)}else for(i&o&&m!==0&&(u=c+u),(i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<A;)u=" "+u}else if(i&S||i&T){for(u=(-m).toString(G);u.length<h;)u="0"+u;if(i&v)for(i&o&&(u=c+u),u="-"+u;u.length<A;)u=u+" ";else if(i&F&&h===-1){for(;u.length<A-1-(i&o?2:0);)u="0"+u;i&o&&(u=c+u),u="-"+u}else for(i&o&&(u=c+u),u="-"+u;u.length<A;)u=" "+u}else{for(u=(m>>>0).toString(G).replace(a,$);u.length<h-2;)u=$+u;if(i&v)for(u=".."+u,i&o&&(u=c+u);u.length<A;)u=u+" ";else if(i&F&&h===-1){for(;u.length<A-2-(i&o?c.length:0);)u=$+u;u=".."+u,i&o&&(u=c+u)}else for(u=".."+u,i&o&&(u=c+u);u.length<A;)u=" "+u}z.charAt(M)===z.charAt(M).toUpperCase()&&(u=u.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(m=C.$Float(me()),m>=0||isNaN(m)){if(m===1/0)u="Inf";else switch(z.charAt(M)){case"f":u=m.toFixed(h===-1?6:h);break;case"e":case"E":u=m.toExponential(h===-1?6:h);break;case"g":case"G":u=m.toExponential(),d=parseInt(u.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(u=m.toPrecision(h===-1?i&o?6:void 0:h));break}if(i&v)for((i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<A;)u=u+" ";else if(i&F&&m!==1/0&&!isNaN(m)){for(;u.length<A-(i&S||i&T?1:0);)u="0"+u;(i&S||i&T)&&(u=(i&S?"+":" ")+u)}else for((i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<A;)u=" "+u}else{if(m===-1/0)u="Inf";else switch(z.charAt(M)){case"f":u=(-m).toFixed(h===-1?6:h);break;case"e":case"E":u=(-m).toExponential(h===-1?6:h);break;case"g":case"G":u=(-m).toExponential(),d=parseInt(u.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(u=(-m).toPrecision(h===-1?i&o?6:void 0:h));break}if(i&v)for(u="-"+u;u.length<A;)u=u+" ";else if(i&F&&m!==-1/0){for(;u.length<A-1;)u="0"+u;u="-"+u}else for(u="-"+u;u.length<A;)u=" "+u}z.charAt(M)===z.charAt(M).toUpperCase()&&m!==1/0&&m!==-1/0&&!isNaN(m)&&(u=u.toUpperCase()),u=u.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":C.$raise(L("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(m=me(),m["$respond_to?"]("to_ary")&&(m=m.$to_ary()[0]),m["$respond_to?"]("to_str")?u=m.$to_str():u=String.fromCharCode(k(m,L("Integer"),"to_int")),u.length!==1&&C.$raise(L("ArgumentError"),"%c requires a character"),i&v)for(;u.length<A;)u=u+" ";else for(;u.length<A;)u=" "+u;break e;case"p":if(u=me().$inspect(),h!==-1&&(u=u.slice(0,h)),i&v)for(;u.length<A;)u=u+" ";else for(;u.length<A;)u=" "+u;break e;case"s":if(u=me().$to_s(),h!==-1&&(u=u.slice(0,h)),i&v)for(;u.length<A;)u=u+" ";else for(;u.length<A;)u=" "+u;break e;default:C.$raise(L("ArgumentError"),"malformed format string - %"+z.charAt(M))}u===void 0&&C.$raise(L("ArgumentError"),"malformed format string - %"),R+=z.slice(g,E)+u,g=M+1}return Z.DEBUG&&r>=0&&e<H.length&&C.$raise(L("ArgumentError"),"too many arguments for format string"),R+z.slice(g)},-2),B(te,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(n){var k=n.klass,y=n.rb_plus,P=n.truthy,I=n.send,ee=n.defs,V=n.eqeq,C=n.def,Z=n.return_ivar,p=n.return_val,B=n.slice,ie=n.Kernel,L=n.Opal,Y=n.rb_lt,te,W=n.top,z=[],w=n.$r(z),K=n.nil,H=n.$$$;return n.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),W.$require("corelib/string"),function(j,R,g){var E=k(j,R,"Encoding"),M=[E].concat(g),q=E.$$prototype;return q.name=q.dummy=K,ee(E,"$register",function m(u,d){var A=m.$$p||K,h=this,_=K,l=K,x=K,G=K,c=K,a=K;return m.$$p=null,d==null&&(d=new Map),_=y([u],P(l=d["$[]"]("aliases"))?l:[]),x=P(l=d["$[]"]("ascii"))&&l,G=P(l=d["$[]"]("dummy"))&&l,P(d["$[]"]("inherits"))?(c=d["$[]"]("inherits").$clone(),c.$initialize(u,_,x,G)):c=h.$new(u,_,x,G),A!==K&&I(c,"instance_eval",[],A.$to_proc()),a=n.encodings,I(_,"each",[],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=K),e.$const_set(t.$tr("-","_"),c),a[t]=c},{$$s:h})},-2),ee(E,"$find",function(u){var d=this;return V(u,"default_external")?d.$default_external():n.find_encoding(u)}),E.$singleton_class().$attr_accessor("default_external"),E.$attr_reader("name","names"),C(E,"$initialize",function(u,d,A,h){var _=this;return _.name=u,_.names=d,_.ascii=A,_.dummy=h}),C(E,"$ascii_compatible?",Z("ascii")),C(E,"$dummy?",Z("dummy")),C(E,"$binary?",p(!1)),C(E,"$to_s",Z("name")),C(E,"$inspect",function(){var u=this;return"#<Encoding:"+u.name+(P(u.dummy)?" (dummy)":K)+">"}),C(E,"$charsize",function(u){for(var d=0,A=0,h=u.length;A<h;A++){var _=u.charCodeAt(A);_>=55296&&_<=56319||d++}return d}),C(E,"$each_char",function m(u){var d=m.$$p||K;m.$$p=null;for(var A="",h=0,_=u.length;h<_;h++){var l=u.charCodeAt(h),x=u.charAt(h);if(l>=56320&&l<=57343){A=x;continue}else l>=55296&&l<=56319&&(x=A+x);u.encoding.name!="UTF-8"&&(x=new String(x),x.encoding=u.encoding),n.yield1(d,x)}}),C(E,"$each_byte",function(u){return B(arguments),ie.$raise(H("NotImplementedError"))},-1),C(E,"$bytesize",function(u){return B(arguments),ie.$raise(H("NotImplementedError"))},-1),k("::",H("StandardError"),"EncodingError"),k("::",H("EncodingError"),"CompatibilityError"),k(M[0],H("EncodingError"),"UndefinedConversionError"),K}("::",null,z),I(H("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function j(){var R=j.$$s==null?this:j.$$s;return C(R,"$each_byte",function g(E){var M=g.$$p||K;g.$$p=null;for(var q=1/0,m,u=E.length,d=null,A=0;A<u;++A){if(m=E.charCodeAt(A),m>55295&&m<57344){if(!d){if(m>56319){(q-=3)>-1&&(n.yield1(M,239),n.yield1(M,191),n.yield1(M,189));continue}else if(A+1===u){(q-=3)>-1&&(n.yield1(M,239),n.yield1(M,191),n.yield1(M,189));continue}d=m;continue}if(m<56320){(q-=3)>-1&&(n.yield1(M,239),n.yield1(M,191),n.yield1(M,189)),d=m;continue}m=(d-55296<<10|m-56320)+65536}else d&&(q-=3)>-1&&(n.yield1(M,239),n.yield1(M,191),n.yield1(M,189));if(d=null,m<128){if((q-=1)<0)break;n.yield1(M,m)}else if(m<2048){if((q-=2)<0)break;n.yield1(M,m>>6|192),n.yield1(M,m&63|128)}else if(m<65536){if((q-=3)<0)break;n.yield1(M,m>>12|224),n.yield1(M,m>>6&63|128),n.yield1(M,m&63|128)}else if(m<1114112){if((q-=4)<0)break;n.yield1(M,m>>18|240),n.yield1(M,m>>12&63|128),n.yield1(M,m>>6&63|128),n.yield1(M,m&63|128)}}}),C(R,"$bytesize",function(E){return E.$bytes().$length()})},{$$s:W}),I(H("Encoding"),"register",["UTF-16LE"],function j(){var R=j.$$s==null?this:j.$$s;return C(R,"$each_byte",function g(E){var M=g.$$p||K;g.$$p=null;for(var q=0,m=E.length;q<m;q++){var u=E.charCodeAt(q);n.yield1(M,u&255),n.yield1(M,u>>8)}}),C(R,"$bytesize",function(E){return E.length*2})},{$$s:W}),I(H("Encoding"),"register",["UTF-16BE",new Map([["inherits",H(H("Encoding"),"UTF_16LE")]])],function j(){var R=j.$$s==null?this:j.$$s;return C(R,"$each_byte",function g(E){var M=g.$$p||K;g.$$p=null;for(var q=0,m=E.length;q<m;q++){var u=E.charCodeAt(q);n.yield1(M,u>>8),n.yield1(M,u&255)}})},{$$s:W}),I(H("Encoding"),"register",["UTF-32LE"],function j(){var R=j.$$s==null?this:j.$$s;return C(R,"$each_byte",function g(E){var M=g.$$p||K;g.$$p=null;for(var q=0,m=E.length;q<m;q++){var u=E.charCodeAt(q);n.yield1(M,u&255),n.yield1(M,u>>8),n.yield1(M,0),n.yield1(M,0)}}),C(R,"$bytesize",function(E){return E.length*4})},{$$s:W}),I(H("Encoding"),"register",["UTF-32BE",new Map([["inherits",H(H("Encoding"),"UTF_32LE")]])],function j(){var R=j.$$s==null?this:j.$$s;return C(R,"$each_byte",function g(E){var M=g.$$p||K;g.$$p=null;for(var q=0,m=E.length;q<m;q++){var u=E.charCodeAt(q);n.yield1(M,0),n.yield1(M,0),n.yield1(M,u>>8),n.yield1(M,u&255)}})},{$$s:W}),I(H("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function j(){var R=j.$$s==null?this:j.$$s;return C(R,"$each_char",function g(E){var M=g.$$p||K;g.$$p=null;for(var q=0,m=E.length;q<m;q++){var u=new String(E.charAt(q));u.encoding=E.encoding,n.yield1(M,u)}}),C(R,"$charsize",function(E){return E.length}),C(R,"$each_byte",function g(E){var M=g.$$p||K;g.$$p=null;for(var q=0,m=E.length;q<m;q++){var u=E.charCodeAt(q);n.yield1(M,u&255)}}),C(R,"$bytesize",function(E){return E.length}),C(R,"$binary?",p(!0))},{$$s:W}),H("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",H(H("Encoding"),"ASCII_8BIT")]])),H("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",H(H("Encoding"),"ASCII_8BIT")]])),function(j,R){var g=k(j,R,"String"),E=g.$$prototype;return E.internal_encoding=E.bytes=E.encoding=K,g.$attr_reader("encoding"),g.$attr_reader("internal_encoding"),n.prop(String.prototype,"bytes",K),n.prop(String.prototype,"encoding",H(H("Encoding"),"UTF_8")),n.prop(String.prototype,"internal_encoding",H(H("Encoding"),"UTF_8")),C(g,"$b",function(){var q=this;return q.$dup().$force_encoding("binary")}),C(g,"$bytesize",function(){var q=this;return q.internal_encoding.$bytesize(q)}),C(g,"$each_byte",function M(){var q=M.$$p||K,m=this;return M.$$p=null,q===K?I(m,"enum_for",["each_byte"],function u(){var d=u.$$s==null?this:u.$$s;return d.$bytesize()},{$$s:m}):(I(m.internal_encoding,"each_byte",[m],q.$to_proc()),m)}),C(g,"$bytes",function(){var q=this,m=K;return typeof q=="string"?new String(q).$each_byte().$to_a():(q.bytes=P(m=q.bytes)?m:q.$each_byte().$to_a(),q.bytes.$dup())}),C(g,"$each_char",function M(){var q=M.$$p||K,m=this;return M.$$p=null,q===K?I(m,"enum_for",["each_char"],function u(){var d=u.$$s==null?this:u.$$s;return d.$length()},{$$s:m}):(I(m.encoding,"each_char",[m],q.$to_proc()),m)}),C(g,"$chars",function M(){var q=M.$$p||K,m=this;return M.$$p=null,P(q)?I(m,"each_char",[],q.$to_proc()):m.$each_char().$to_a()}),C(g,"$each_codepoint",function M(){var q=M.$$p||K,m=this;if(M.$$p=null,q===K)return m.$enum_for("each_codepoint");for(var u=0,d=m.length;u<d;u++)n.yield1(q,m.codePointAt(u));return m}),C(g,"$codepoints",function M(){var q=M.$$p||K,m=this;return M.$$p=null,q!==K?I(m,"each_codepoint",[],q.$to_proc()):m.$each_codepoint().$to_a()}),C(g,"$encode",function(q){var m=this;return n.enc(m,q)}),C(g,"$force_encoding",function(q){var m=this,u=m;return q===u.encoding||(q=L["$coerce_to!"](q,H("String"),"to_s"),q=H("Encoding").$find(q),q===u.encoding)||(u=n.set_encoding(u,q)),u}),C(g,"$getbyte",function(q){var m=this,u=K;return u=m.$bytes(),q=L["$coerce_to!"](q,H("Integer"),"to_int"),P(Y(u.$length(),q))?K:u["$[]"](q)}),C(g,"$initialize_copy",function(q){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),C(g,"$valid_encoding?",p(!0))}("::",null),te=[H(w("Encoding"),"UTF_8")],I(H("Encoding"),"default_external=",te),te[te.length-1]};Opal.modules["corelib/math"]=function(n){var k=n.type_error,y=n.module,P=n.const_set,I=n.Class,ee=n.slice,V=n.Kernel,C=n.defs,Z=n.truthy,p=n.send,B=n.def,ie=n.rb_minus,L=n.eqeqeq,Y=n.rb_divide,te=[],W=n.nil,z=n.$$$;return n.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(w,K){var H=y(w,"Math"),j=[H].concat(K),R=n.$r(j);return P(H,"E",Math.E),P(H,"PI",Math.PI),P(H,"DomainError",I.$new(z("StandardError"))),C(H,"$checked",function(E,M){var q,m;if(q=ee(arguments,1),m=q,isNaN(m[0])||m.length==2&&isNaN(m[1]))return NaN;var u=Math[E].apply(null,m);return isNaN(u)&&V.$raise(R("DomainError"),'Numerical argument is out of domain - "'+E+'"'),u},-2),C(H,"$float!",function(E){try{return V.$Float(E)}catch(M){if(n.rescue(M,[z("ArgumentError")]))try{return V.$raise(k(E,z("Float")))}finally{n.pop_exception(M)}else throw M}}),C(H,"$integer!",function(E){try{return V.$Integer(E)}catch(M){if(n.rescue(M,[z("ArgumentError")]))try{return V.$raise(k(E,z("Integer")))}finally{n.pop_exception(M)}else throw M}}),H.$module_function(),Z(typeof Math.erf<"u")||n.prop(Math,"erf",function(g){var E=.254829592,M=-.284496736,q=1.421413741,m=-1.453152027,u=1.061405429,d=.3275911,A=1;g<0&&(A=-1),g=Math.abs(g);var h=1/(1+d*g),_=1-((((u*h+m)*h+q)*h+M)*h+E)*h*Math.exp(-g*g);return A*_}),Z(typeof Math.erfc<"u")||n.prop(Math,"erfc",function(g){var E=Math.abs(g),M=1/(.5*E+1),q=M*.17087277+-.82215223,m=M*q+1.48851587,u=M*m+-1.13520398,d=M*u+.27886807,A=M*d+-.18628806,h=M*A+.09678418,_=M*h+.37409196,l=M*_+1.00002368,x=M*l,G=-E*E-1.26551223+x,c=M*Math.exp(G);return g<0?2-c:c}),p(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function g(E){var M=g.$$s==null?this:g.$$s;return E==null&&(E=W),p(M,"define_method",[E],function(m){return m==null&&(m=W),z("Math").$checked(E,z("Math")["$float!"](m))})},{$$s:H}),B(H,"$atan2",function(E,M){return z("Math").$checked("atan2",z("Math")["$float!"](E),z("Math")["$float!"](M))}),B(H,"$hypot",function(E,M){return z("Math").$checked("hypot",z("Math")["$float!"](E),z("Math")["$float!"](M))}),B(H,"$frexp",function(E){if(E=R("Math")["$float!"](E),isNaN(E))return[NaN,0];var M=Math.floor(Math.log(Math.abs(E))/Math.log(2))+1,q=E/Math.pow(2,M);return[q,M]}),B(H,"$gamma",function(E){E=R("Math")["$float!"](E);var M,q,m,u,d,A,h,_,l,x=4.7421875,G=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(E))return NaN;if(E===0&&1/E<0)return-1/0;if((E===-1||E===-1/0)&&V.$raise(R("DomainError"),'Numerical argument is out of domain - "gamma"'),R("Integer")["$==="](E)){if(E<=0)return isFinite(E)?1/0:NaN;if(E>171)return 1/0;for(u=E-2,d=E-1;u>1;)d*=u,u--;return d==0&&(d=1),d}if(E<.5)return Math.PI/(Math.sin(Math.PI*E)*z("Math").$gamma(ie(1,E)));if(E>=171.35)return 1/0;if(E>85)return A=E*E,h=A*E,_=h*E,l=_*E,Math.sqrt(2*Math.PI/E)*Math.pow(E/Math.E,E)*(1+1/(12*E)+1/(288*A)-139/(51840*h)-571/(2488320*_)+163879/(209018880*l)+5246819/(75246796800*l*E));for(E-=1,m=G[0],M=1;M<G.length;++M)m+=G[M]/(E+M);return q=E+x+.5,Math.sqrt(2*Math.PI)*Math.pow(q,E+.5)*Math.exp(-q)*m}),B(H,"$ldexp",function(E,M){return E=R("Math")["$float!"](E),M=R("Math")["$integer!"](M),isNaN(M)&&V.$raise(z("RangeError"),"float NaN out of range of integer"),E*Math.pow(2,M)}),B(H,"$lgamma",function(E){return E==-1?[1/0,1]:[Math.log(Math.abs(z("Math").$gamma(E))),z("Math").$gamma(E)<0?-1:1]}),B(H,"$log",function(E,M){return L(z("String"),E)&&V.$raise(k(E,z("Float"))),Z(M==null)?z("Math").$checked("log",z("Math")["$float!"](E)):(L(z("String"),M)&&V.$raise(k(M,z("Float"))),Y(z("Math").$checked("log",z("Math")["$float!"](E)),z("Math").$checked("log",z("Math")["$float!"](M))))},-2),B(H,"$log10",function(E){return L(z("String"),E)&&V.$raise(k(E,z("Float"))),z("Math").$checked("log10",z("Math")["$float!"](E))}),B(H,"$log2",function(E){return L(z("String"),E)&&V.$raise(k(E,z("Float"))),z("Math").$checked("log2",z("Math")["$float!"](E))}),B(H,"$tan",function(E){return E=z("Math")["$float!"](E),Z(E["$infinite?"]())?z(z("Float"),"NAN"):z("Math").$checked("tan",z("Math")["$float!"](E))})}("::",te)};Opal.modules["corelib/complex/base"]=function(n){var k=n.module,y=n.truthy,P=n.def,I=n.klass,ee=[],V=n.nil;return n.add_stubs("new,from_string"),function(C,Z){var p=k(C,"Kernel"),B=[p].concat(Z),ie=n.$r(B);return P(p,"$Complex",function(Y,te){return te==null&&(te=V),y(te)?ie("Complex").$new(Y,te):ie("Complex").$new(Y,0)},-2)}("::",ee),function(C,Z,p){var B=I(C,Z,"String"),ie=[B].concat(p),L=n.$r(ie);return P(B,"$to_c",function(){var te=this;return L("Complex").$from_string(te)})}("::",null,ee)};Opal.modules["corelib/complex"]=function(n){var k=n.klass,y=n.truthy,P=n.eqeqeq,I=n.Kernel,ee=n.defs,V=n.rb_times,C=n.def,Z=n.rb_plus,p=n.rb_minus,B=n.rb_divide,ie=n.eqeq,L=n.to_ary,Y=n.rb_gt,te=n.neqeq,W=n.return_val,z=n.const_set,w=n.alias,K=n.top,H=[],j=n.nil,R=n.$$$;return n.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),K.$require("corelib/numeric"),K.$require("corelib/complex/base"),function(g,E,M){var q=k(g,E,"Complex"),m=[q].concat(M),u=n.$r(m),d=q.$$prototype;return d.real=d.imag=j,ee(q,"$rect",function(h,_){var l=this;return _==null&&(_=0),P(R("Numeric"),h)&&y(h["$real?"]())&&P(R("Numeric"),_)&&y(_["$real?"]())||I.$raise(R("TypeError"),"not a real"),l.$new(h,_)},-2),ee(q,"$polar",function(h,_){var l=this;return _==null&&(_=0),P(R("Numeric"),h)&&y(h["$real?"]())&&P(R("Numeric"),_)&&y(_["$real?"]())||I.$raise(R("TypeError"),"not a real"),l.$new(V(h,R("Math").$cos(_)),V(h,R("Math").$sin(_)))},-2),q.$attr_reader("real","imag"),C(q,"$initialize",function(h,_){var l=this;return _==null&&(_=0),l.real=h,l.imag=_,l.$freeze()},-2),C(q,"$coerce",function(h){var _=this;return P(R("Complex"),h)?[h,_]:P(R("Numeric"),h)&&y(h["$real?"]())?[R("Complex").$new(h,0),_]:I.$raise(R("TypeError"),""+h.$class()+" can't be coerced into Complex")}),C(q,"$==",function(h){var _=this,l=j;return P(R("Complex"),h)?y(l=_.real["$=="](h.$real()))?_.imag["$=="](h.$imag()):l:P(R("Numeric"),h)&&y(h["$real?"]())?y(l=_.real["$=="](h))?_.imag["$=="](0):l:h["$=="](_)}),C(q,"$-@",function(){var h=this;return I.$Complex(h.real["$-@"](),h.imag["$-@"]())}),C(q,"$+",function(h){var _=this;return P(R("Complex"),h)?I.$Complex(Z(_.real,h.$real()),Z(_.imag,h.$imag())):P(R("Numeric"),h)&&y(h["$real?"]())?I.$Complex(Z(_.real,h),_.imag):_.$__coerced__("+",h)}),C(q,"$-",function(h){var _=this;return P(R("Complex"),h)?I.$Complex(p(_.real,h.$real()),p(_.imag,h.$imag())):P(R("Numeric"),h)&&y(h["$real?"]())?I.$Complex(p(_.real,h),_.imag):_.$__coerced__("-",h)}),C(q,"$*",function(h){var _=this;return P(R("Complex"),h)?I.$Complex(p(V(_.real,h.$real()),V(_.imag,h.$imag())),Z(V(_.real,h.$imag()),V(_.imag,h.$real()))):P(R("Numeric"),h)&&y(h["$real?"]())?I.$Complex(V(_.real,h),V(_.imag,h)):_.$__coerced__("*",h)}),C(q,"$/",function(h){var _=this;return P(R("Complex"),h)?P(R("Number"),_.real)&&y(_.real["$nan?"]())||P(R("Number"),_.imag)&&y(_.imag["$nan?"]())||P(R("Number"),h.$real())&&y(h.$real()["$nan?"]())||P(R("Number"),h.$imag())&&y(h.$imag()["$nan?"]())?R("Complex").$new(R(R("Float"),"NAN"),R(R("Float"),"NAN")):B(V(_,h.$conj()),h.$abs2()):P(R("Numeric"),h)&&y(h["$real?"]())?I.$Complex(_.real.$quo(h),_.imag.$quo(h)):_.$__coerced__("/",h)}),C(q,"$**",function(h){var _,l,x=this,G=j,c=j,a=j,$=j,t=j,e=j,r=j,i=j,s=j,o=j,v=j;if(ie(h,0))return R("Complex").$new(1,0);if(P(R("Complex"),h))return l=x.$polar(),_=L(l),G=_[0]==null?j:_[0],c=_[1]==null?j:_[1],a=h.$real(),$=h.$imag(),t=R("Math").$exp(p(V(a,R("Math").$log(G)),V($,c))),e=Z(V(c,a),V($,R("Math").$log(G))),R("Complex").$polar(t,e);if(P(R("Integer"),h))if(y(Y(h,0))){for(r=x,i=r,s=p(h,1);te(s,0);){for(l=s.$divmod(2),_=L(l),o=_[0]==null?j:_[0],v=_[1]==null?j:_[1];ie(v,0);)r=I.$Complex(p(V(r.$real(),r.$real()),V(r.$imag(),r.$imag())),V(V(2,r.$real()),r.$imag())),s=o,l=s.$divmod(2),_=L(l),o=_[0]==null?j:_[0],v=_[1]==null?j:_[1];i=V(i,r),s=p(s,1)}return i}else return B(R("Rational").$new(1,1),x)["$**"](h["$-@"]());else return P(R("Float"),h)||P(R("Rational"),h)?(l=x.$polar(),_=L(l),G=_[0]==null?j:_[0],c=_[1]==null?j:_[1],R("Complex").$polar(G["$**"](h),V(c,h))):x.$__coerced__("**",h)}),C(q,"$abs",function(){var h=this;return R("Math").$hypot(h.real,h.imag)}),C(q,"$abs2",function(){var h=this;return Z(V(h.real,h.real),V(h.imag,h.imag))}),C(q,"$angle",function(){var h=this;return R("Math").$atan2(h.imag,h.real)}),C(q,"$conj",function(){var h=this;return I.$Complex(h.real,h.imag["$-@"]())}),C(q,"$denominator",function(){var h=this;return h.real.$denominator().$lcm(h.imag.$denominator())}),C(q,"$eql?",function(h){var _=this,l=j,x=j;return y(l=y(x=u("Complex")["$==="](h))?_.real.$class()["$=="](_.imag.$class()):x)?_["$=="](h):l}),C(q,"$fdiv",function(h){var _=this;return P(R("Numeric"),h)||I.$raise(R("TypeError"),""+h.$class()+" can't be coerced into Complex"),B(_,h)}),C(q,"$finite?",function(){var h=this,_=j;return y(_=h.real["$finite?"]())?h.imag["$finite?"]():_}),C(q,"$hash",function(){var h=this;return[R("Complex"),h.real,h.imag].$hash()}),C(q,"$infinite?",function(){var h=this,_=j;return y(_=h.real["$infinite?"]())?_:h.imag["$infinite?"]()}),C(q,"$inspect",function(){var h=this;return"("+h+")"}),C(q,"$numerator",function(){var h=this,_=j;return _=h.$denominator(),I.$Complex(V(h.real.$numerator(),B(_,h.real.$denominator())),V(h.imag.$numerator(),B(_,h.imag.$denominator())))}),C(q,"$polar",function(){var h=this;return[h.$abs(),h.$arg()]}),C(q,"$rationalize",function(h){var _=this;return arguments.length>1&&I.$raise(R("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),te(_.imag,0)&&I.$raise(R("RangeError"),"can't convert "+_+" into Rational"),_.$real().$rationalize(h)},-1),C(q,"$real?",W(!1)),C(q,"$rect",function(){var h=this;return[h.real,h.imag]}),C(q,"$to_f",function(){var h=this;return ie(h.imag,0)||I.$raise(R("RangeError"),"can't convert "+h+" into Float"),h.real.$to_f()}),C(q,"$to_i",function(){var h=this;return ie(h.imag,0)||I.$raise(R("RangeError"),"can't convert "+h+" into Integer"),h.real.$to_i()}),C(q,"$to_r",function(){var h=this;return ie(h.imag,0)||I.$raise(R("RangeError"),"can't convert "+h+" into Rational"),h.real.$to_r()}),C(q,"$to_s",function(){var h=this,_=j;return _=h.real.$inspect(),_=Z(_,P(R("Number"),h.imag)&&y(h.imag["$nan?"]())||y(h.imag["$positive?"]())||y(h.imag["$zero?"]())?"+":"-"),_=Z(_,h.imag.$abs().$inspect()),P(R("Number"),h.imag)&&(y(h.imag["$nan?"]())||y(h.imag["$infinite?"]()))&&(_=Z(_,"*")),Z(_,"i")}),z(m[0],"I",q.$new(0,1)),ee(q,"$from_string",function(h){var _=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;h.match(_);var l,x;function G(){return _.test(h)}function c(){var $=h.match(_),t=$[0];return h=h.slice(t.length),t.replace(/_/g,"")}function a(){if(G()){var $=parseFloat(c());if(h[0]==="/")if(h=h.slice(1),G()){var t=parseFloat(c());return I.$Rational($,t)}else return h="/"+h,$;else return $}else return null}return l=a(),l?(x=a(),x?I.$Complex(l,x):h[0]==="i"?I.$Complex(0,l):I.$Complex(l,0)):h[0]==="i"?I.$Complex(0,1):h[0]==="-"&&h[1]==="i"?I.$Complex(0,-1):h[0]==="+"&&h[1]==="i"?I.$Complex(0,1):I.$Complex(0,0)}),function(A,h){return w(A,"rectangular","rect")}(n.get_singleton_class(q)),w(q,"arg","angle"),w(q,"conjugate","conj"),w(q,"divide","/"),w(q,"imaginary","imag"),w(q,"magnitude","abs"),w(q,"phase","arg"),w(q,"quo","/"),w(q,"rectangular","rect"),n.udef(q,"$negative?"),n.udef(q,"$positive?"),n.udef(q,"$step"),j}("::",R("Numeric"),H)};Opal.modules["corelib/rational/base"]=function(n){var k=n.module,y=n.def,P=n.klass;n.nil;var I=n.$$$;return n.add_stubs("convert,from_string"),function(ee){var V=k(ee,"Kernel");return y(V,"$Rational",function(Z,p){return p==null&&(p=1),I("Rational").$convert(Z,p)},-2)}("::"),function(ee,V){var C=P(ee,V,"String");return y(C,"$to_r",function(){var p=this;return I("Rational").$from_string(p)})}("::",null)};Opal.modules["corelib/rational"]=function(n){var k=n.klass,y=n.eqeq,P=n.Kernel,I=n.truthy,ee=n.rb_lt,V=n.rb_divide,C=n.defs,Z=n.eqeqeq,p=n.not,B=n.Opal,ie=n.def,L=n.return_ivar,Y=n.rb_minus,te=n.rb_times,W=n.rb_plus,z=n.rb_gt,w=n.rb_le,K=n.return_self,H=n.alias,j=n.top,R=n.nil,g=n.$$$;return n.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),j.$require("corelib/numeric"),j.$require("corelib/rational/base"),function(E,M){var q=k(E,M,"Rational"),m=q.$$prototype;return m.num=m.den=R,C(q,"$reduce",function(d,A){var h=this,_=R;if(d=d.$to_i(),A=A.$to_i(),y(A,0))P.$raise(g("ZeroDivisionError"),"divided by 0");else if(I(ee(A,0)))d=d["$-@"](),A=A["$-@"]();else if(y(A,1))return h.$new(d,A);return _=d.$gcd(A),h.$new(V(d,_),V(A,_))}),C(q,"$convert",function(d,A){var h=this;return(I(d["$nil?"]())||I(A["$nil?"]()))&&P.$raise(g("TypeError"),"cannot convert nil into Rational"),Z(g("Integer"),d)&&Z(g("Integer"),A)?h.$reduce(d,A):((Z(g("Float"),d)||Z(g("String"),d)||Z(g("Complex"),d))&&(d=d.$to_r()),(Z(g("Float"),A)||Z(g("String"),A)||Z(g("Complex"),A))&&(A=A.$to_r()),I(A["$equal?"](1))&&p(g("Integer")["$==="](d))?B["$coerce_to!"](d,g("Rational"),"to_r"):Z(g("Numeric"),d)&&Z(g("Numeric"),A)?V(d,A):h.$reduce(d,A))}),ie(q,"$initialize",function(d,A){var h=this;return h.num=d,h.den=A,h.$freeze()}),ie(q,"$numerator",L("num")),ie(q,"$denominator",L("den")),ie(q,"$coerce",function(d){var A=this,h=R;return Z(g("Rational"),h=d)?[d,A]:Z(g("Integer"),h)?[d.$to_r(),A]:Z(g("Float"),h)?[d,A.$to_f()]:R}),ie(q,"$==",function(d){var A=this,h=R,_=R;return Z(g("Rational"),h=d)?I(_=A.num["$=="](d.$numerator()))?A.den["$=="](d.$denominator()):_:Z(g("Integer"),h)?I(_=A.num["$=="](d))?A.den["$=="](1):_:Z(g("Float"),h)?A.$to_f()["$=="](d):d["$=="](A)}),ie(q,"$<=>",function(d){var A=this,h=R;return Z(g("Rational"),h=d)?Y(te(A.num,d.$denominator()),te(A.den,d.$numerator()))["$<=>"](0):Z(g("Integer"),h)?Y(A.num,te(A.den,d))["$<=>"](0):Z(g("Float"),h)?A.$to_f()["$<=>"](d):A.$__coerced__("<=>",d)}),ie(q,"$+",function(d){var A=this,h=R,_=R,l=R;return Z(g("Rational"),h=d)?(_=W(te(A.num,d.$denominator()),te(A.den,d.$numerator())),l=te(A.den,d.$denominator()),P.$Rational(_,l)):Z(g("Integer"),h)?P.$Rational(W(A.num,te(d,A.den)),A.den):Z(g("Float"),h)?W(A.$to_f(),d):A.$__coerced__("+",d)}),ie(q,"$-",function(d){var A=this,h=R,_=R,l=R;return Z(g("Rational"),h=d)?(_=Y(te(A.num,d.$denominator()),te(A.den,d.$numerator())),l=te(A.den,d.$denominator()),P.$Rational(_,l)):Z(g("Integer"),h)?P.$Rational(Y(A.num,te(d,A.den)),A.den):Z(g("Float"),h)?Y(A.$to_f(),d):A.$__coerced__("-",d)}),ie(q,"$*",function(d){var A=this,h=R,_=R,l=R;return Z(g("Rational"),h=d)?(_=te(A.num,d.$numerator()),l=te(A.den,d.$denominator()),P.$Rational(_,l)):Z(g("Integer"),h)?P.$Rational(te(A.num,d),A.den):Z(g("Float"),h)?te(A.$to_f(),d):A.$__coerced__("*",d)}),ie(q,"$/",function(d){var A=this,h=R,_=R,l=R;return Z(g("Rational"),h=d)?(_=te(A.num,d.$denominator()),l=te(A.den,d.$numerator()),P.$Rational(_,l)):Z(g("Integer"),h)?y(d,0)?V(A.$to_f(),0):P.$Rational(A.num,te(A.den,d)):Z(g("Float"),h)?V(A.$to_f(),d):A.$__coerced__("/",d)}),ie(q,"$**",function(d){var A=this,h=R;return Z(g("Integer"),h=d)?y(A,0)&&I(ee(d,0))?g(g("Float"),"INFINITY"):I(z(d,0))?P.$Rational(A.num["$**"](d),A.den["$**"](d)):I(ee(d,0))?P.$Rational(A.den["$**"](d["$-@"]()),A.num["$**"](d["$-@"]())):P.$Rational(1,1):Z(g("Float"),h)?A.$to_f()["$**"](d):Z(g("Rational"),h)?y(d,0)?P.$Rational(1,1):y(d.$denominator(),1)?I(ee(d,0))?P.$Rational(A.den["$**"](d.$numerator().$abs()),A.num["$**"](d.$numerator().$abs())):P.$Rational(A.num["$**"](d.$numerator()),A.den["$**"](d.$numerator())):y(A,0)&&I(ee(d,0))?P.$raise(g("ZeroDivisionError"),"divided by 0"):A.$to_f()["$**"](d):A.$__coerced__("**",d)}),ie(q,"$abs",function(){var d=this;return P.$Rational(d.num.$abs(),d.den.$abs())}),ie(q,"$ceil",function(d){var A=this;return d==null&&(d=0),y(d,0)?V(A.num["$-@"](),A.den)["$-@"]().$ceil():A.$with_precision("ceil",d)},-1),ie(q,"$floor",function(d){var A=this;return d==null&&(d=0),y(d,0)?V(A.num["$-@"](),A.den)["$-@"]().$floor():A.$with_precision("floor",d)},-1),ie(q,"$hash",function(){var d=this;return[g("Rational"),d.num,d.den].$hash()}),ie(q,"$inspect",function(){var d=this;return"("+d+")"}),ie(q,"$rationalize",function(d){var A=this;if(arguments.length>1&&P.$raise(g("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),d==null)return A;for(var h=d.$abs(),_=Y(A,h),l=W(A,h),x=0,G=1,c=1,a=0,$,t,e,r,i;e=_.$ceil(),!w(e,l);)r=e-1,$=r*G+x,t=r*a+c,i=V(1,Y(l,r)),l=V(1,Y(_,r)),_=i,x=G,c=a,G=$,a=t;return P.$Rational(e*G+x,e*a+c)},-1),ie(q,"$round",function(d){var A=this,h=R,_=R,l=R;return d==null&&(d=0),y(d,0)?y(A.num,0)?0:y(A.den,1)?A.num:(h=W(te(A.num.$abs(),2),A.den),_=te(A.den,2),l=V(h,_).$truncate(),I(ee(A.num,0))?l["$-@"]():l):A.$with_precision("round",d)},-1),ie(q,"$to_f",function(){var d=this;return V(d.num,d.den)}),ie(q,"$to_i",function(){var d=this;return d.$truncate()}),ie(q,"$to_r",K),ie(q,"$to_s",function(){var d=this;return""+d.num+"/"+d.den}),ie(q,"$truncate",function(d){var A=this;return d==null&&(d=0),y(d,0)?I(ee(A.num,0))?A.$ceil():A.$floor():A.$with_precision("truncate",d)},-1),ie(q,"$with_precision",function(d,A){var h=this,_=R,l=R;return Z(g("Integer"),A)||P.$raise(g("TypeError"),"not an Integer"),_=10["$**"](A),l=te(h,_),I(ee(A,1))?V(l.$send(d),_).$to_i():P.$Rational(l.$send(d),_)}),C(q,"$from_string",function(d){var A=d.trimLeft(),h=/^[+-]?[\d_]+(\.[\d_]+)?/;A.match(h);var _,l;function x(){return h.test(A)}function G(){var c=A.match(h),a=c[0];return A=A.slice(a.length),a.replace(/_/g,"")}return x()?(_=parseFloat(G()),A[0]==="/"?(A=A.slice(1),x()?(l=parseFloat(G()),P.$Rational(_,l)):P.$Rational(_,1)):P.$Rational(_,1)):P.$Rational(0,1)}),H(q,"divide","/"),H(q,"quo","/")}("::",g("Numeric"))};Opal.modules["corelib/time"]=function(n){var k=n.slice,y=n.deny_frozen_access,P=n.klass,I=n.Kernel,ee=n.Opal,V=n.defs,C=n.eqeqeq,Z=n.def,p=n.truthy,B=n.rb_gt,ie=n.rb_lt,L=n.send,Y=n.rb_plus,te=n.rb_divide,W=n.rb_minus,z=n.range,w=n.neqeq,K=n.rb_le,H=n.eqeq,j=n.alias,R=n.top,g=[],E=n.nil,M=n.$$$;return n.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),R.$require("corelib/comparable"),function(q,m,u){var d=P(q,m,"Time"),A=[d].concat(u),h=n.$r(A);d.$include(M("Comparable"));var _=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],G=["January","February","March","April","May","June","July","August","September","October","November","December"];V(d,"$at",function($,t){var e;return M("Time")["$==="]($)?(t!==void 0&&I.$raise(M("TypeError"),"can't convert Time into an exact number"),e=new Date($.getTime()),e.timezone=$.timezone,e):($.$$is_number||($=ee["$coerce_to!"]($,M("Integer"),"to_int")),t===void 0?new Date($*1e3):(t.$$is_number||(t=ee["$coerce_to!"](t,M("Integer"),"to_int")),new Date($*1e3+t/1e3)))},-2);function c(a,$,t,e,r,i){if(a.$$is_string?a=parseInt(a,10):a=ee["$coerce_to!"](a,M("Integer"),"to_int"),$===E)$=1;else if(!$.$$is_number)if($["$respond_to?"]("to_str"))switch($=$.$to_str(),$.toLowerCase()){case"jan":$=1;break;case"feb":$=2;break;case"mar":$=3;break;case"apr":$=4;break;case"may":$=5;break;case"jun":$=6;break;case"jul":$=7;break;case"aug":$=8;break;case"sep":$=9;break;case"oct":$=10;break;case"nov":$=11;break;case"dec":$=12;break;default:$=$.$to_i()}else $=ee["$coerce_to!"]($,M("Integer"),"to_int");return($<1||$>12)&&I.$raise(M("ArgumentError"),"month out of range: "+$),$=$-1,t===E?t=1:t.$$is_string?t=parseInt(t,10):t=ee["$coerce_to!"](t,M("Integer"),"to_int"),(t<1||t>31)&&I.$raise(M("ArgumentError"),"day out of range: "+t),e===E?e=0:e.$$is_string?e=parseInt(e,10):e=ee["$coerce_to!"](e,M("Integer"),"to_int"),(e<0||e>24)&&I.$raise(M("ArgumentError"),"hour out of range: "+e),r===E?r=0:r.$$is_string?r=parseInt(r,10):r=ee["$coerce_to!"](r,M("Integer"),"to_int"),(r<0||r>59)&&I.$raise(M("ArgumentError"),"min out of range: "+r),i===E?i=0:i.$$is_number||(i.$$is_string?i=parseInt(i,10):i=ee["$coerce_to!"](i,M("Integer"),"to_int")),(i<0||i>60)&&I.$raise(M("ArgumentError"),"sec out of range: "+i),[a,$,t,e,r,i]}return V(d,"$new",function($,t,e,r,i,s,o){var v=this;t==null&&(t=E),e==null&&(e=E),r==null&&(r=E),i==null&&(i=E),s==null&&(s=E),o==null&&(o=E);var S,F,T,J;return $===void 0?new Date:(S=c($,t,e,r,i,s),$=S[0],t=S[1],e=S[2],r=S[3],i=S[4],s=S[5],o===E?(F=new Date($,t,e,r,i,0,s*1e3),$<100&&F.setFullYear($),F):(T=v.$_parse_offset(o),J=new Date(Date.UTC($,t,e,r,i,0,s*1e3)),$<100&&J.setUTCFullYear($),F=new Date(J.getTime()-T*36e5),F.timezone=T,F))},-1),V(d,"$_parse_offset",function($){var t;if($.$$is_string)if($=="UTC")t=0;else if(/^[+-]\d\d:[0-5]\d$/.test($)){var e,r,i;e=$[0],r=+($[1]+$[2]),i=+($[4]+$[5]),t=(e=="-"?-1:1)*(r+i/60)}else I.$raise(M("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+$);else $.$$is_number?t=$/3600:I.$raise(M("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return t}),V(d,"$local",function($,t,e,r,i,s,o,v,S,F){t==null&&(t=E),e==null&&(e=E),r==null&&(r=E),i==null&&(i=E),s==null&&(s=E),o==null&&(o=E),v==null&&(v=E),S==null&&(S=E),F==null&&(F=E);var T,J;return arguments.length===10&&(T=k(arguments),$=T[5],t=T[4],e=T[3],r=T[2],i=T[1],s=T[0]),T=c($,t,e,r,i,s),$=T[0],t=T[1],e=T[2],r=T[3],i=T[4],s=T[5],J=new Date($,t,e,r,i,0,s*1e3),$<100&&J.setFullYear($),J},-2),V(d,"$gm",function($,t,e,r,i,s,o,v,S,F){t==null&&(t=E),e==null&&(e=E),r==null&&(r=E),i==null&&(i=E),s==null&&(s=E),o==null&&(o=E),v==null&&(v=E),S==null&&(S=E),F==null&&(F=E);var T,J;return arguments.length===10&&(T=k(arguments),$=T[5],t=T[4],e=T[3],r=T[2],i=T[1],s=T[0]),T=c($,t,e,r,i,s),$=T[0],t=T[1],e=T[2],r=T[3],i=T[4],s=T[5],J=new Date(Date.UTC($,t,e,r,i,0,s*1e3)),$<100&&J.setUTCFullYear($),J.timezone=0,J},-2),V(d,"$now",function(){var $=this;return $.$new()}),Z(d,"$+",function($){var t=this;C(M("Time"),$)&&I.$raise(M("TypeError"),"time + time?"),$.$$is_number||($=ee["$coerce_to!"]($,M("Integer"),"to_int"));var e=new Date(t.getTime()+$*1e3);return e.timezone=t.timezone,e}),Z(d,"$-",function($){var t=this;if(C(M("Time"),$))return(t.getTime()-$.getTime())/1e3;$.$$is_number||($=ee["$coerce_to!"]($,M("Integer"),"to_int"));var e=new Date(t.getTime()-$*1e3);return e.timezone=t.timezone,e}),Z(d,"$<=>",function($){var t=this,e=E;return C(M("Time"),$)?t.$to_f()["$<=>"]($.$to_f()):(e=$["$<=>"](t),p(e["$nil?"]())?E:p(B(e,0))?-1:p(ie(e,0))?1:0)}),Z(d,"$==",function($){var t=this,e=E;return p(e=M("Time")["$==="]($))?t.$to_f()===$.$to_f():e}),Z(d,"$asctime",function(){var $=this;return $.$strftime("%a %b %e %H:%M:%S %Y")}),L([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function a($,t,e,r){var i=a.$$s==null?this:a.$$s;return $==null&&($=E),t==null&&(t=E),e==null&&(e=E),r==null&&(r=0),L(i,"define_method",[$],function s(){var o=s.$$s==null?this:s.$$s;return r+(o.timezone!=null?new Date(o.getTime()+o.timezone*36e5)[e]():o[t]())},{$$s:i})},{$$arity:-4,$$s:d}),Z(d,"$yday",function(){var $=this,t=E,e=E,r=E;return t=h("Time").$new($.$year()).$to_i(),e=h("Time").$new($.$year(),$.$month(),$.$day()).$to_i(),r=86400,Y(te(W(e,t),r).$round(),1)}),Z(d,"$isdst",function(){var $=this,t=new Date($.getFullYear(),0,1),e=new Date($.getFullYear(),6,1);return $.getTimezoneOffset()<Math.max(t.getTimezoneOffset(),e.getTimezoneOffset())}),Z(d,"$dup",function(){var $=this,t=E;return t=new Date($.getTime()),t.$copy_instance_variables($),t.$initialize_dup($),t}),Z(d,"$eql?",function($){var t=this,e=E;return p(e=$["$is_a?"](M("Time")))?t["$<=>"]($)["$zero?"]():e}),L([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function a($,t){var e=a.$$s==null?this:a.$$s;return $==null&&($=E),t==null&&(t=E),L(e,"define_method",[$],function r(){var i=r.$$s==null?this:r.$$s;return i.$wday()===t},{$$s:e})},{$$s:d}),Z(d,"$hash",function(){var $=this;return[M("Time"),$.getTime()].$hash()}),Z(d,"$inspect",function(){var $=this;return p($["$utc?"]())?$.$strftime("%Y-%m-%d %H:%M:%S UTC"):$.$strftime("%Y-%m-%d %H:%M:%S %z")}),Z(d,"$succ",function(){var $=this,t=new Date($.getTime()+1e3);return t.timezone=$.timezone,t}),Z(d,"$usec",function(){var $=this;return $.getMilliseconds()*1e3}),Z(d,"$zone",function(){var $=this;if($.timezone===0)return"UTC";if($.timezone!=null)return E;var t=$.toString(),e;return t.indexOf("(")==-1?e=t.match(/[A-Z]{3,4}/)[0]:e=t.match(/\((.+)\)(?:\s|$)/)[1],e=="GMT"&&/(GMT\W*\d{4})/.test(t)?RegExp.$1:e}),Z(d,"$getgm",function(){var $=this,t=new Date($.getTime());return t.timezone=0,t}),Z(d,"$gmtime",function(){var $=this;return $.timezone!==0&&(y($),$.timezone=0),$}),Z(d,"$gmt?",function(){var $=this;return $.timezone===0}),Z(d,"$gmt_offset",function(){var $=this;return $.timezone!=null?$.timezone*60:-$.getTimezoneOffset()*60}),Z(d,"$strftime",function($){var t=this;return $.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,r,i,s,o){var v="",S,F,T,J=r.indexOf("0")!==-1,O=r.indexOf("-")===-1,ae=r.indexOf("_")!==-1,le=r.indexOf("^")!==-1,ce=r.indexOf("#")!==-1,de=(r.match(":")||[]).length;switch(i=parseInt(i,10),J&&ae&&(r.indexOf("0")<r.indexOf("_")?J=!1:ae=!1),o){case"Y":v+=t.$year();break;case"C":J=!ae,v+=Math.round(t.$year()/100);break;case"y":J=!ae,v+=t.$year()%100;break;case"m":J=!ae,v+=t.$mon();break;case"B":v+=G[t.$mon()-1];break;case"b":case"h":ae=!J,v+=x[t.$mon()-1];break;case"d":J=!ae,v+=t.$day();break;case"e":ae=!J,v+=t.$day();break;case"j":J=!ae,i=isNaN(i)?3:i,v+=t.$yday();break;case"H":J=!ae,v+=t.$hour();break;case"k":ae=!J,v+=t.$hour();break;case"I":J=!ae,v+=t.$hour()%12||12;break;case"l":ae=!J,v+=t.$hour()%12||12;break;case"P":v+=t.$hour()>=12?"pm":"am";break;case"p":v+=t.$hour()>=12?"PM":"AM";break;case"M":J=!ae,v+=t.$min();break;case"S":J=!ae,v+=t.$sec();break;case"L":J=!ae,i=isNaN(i)?3:i,v+=t.getMilliseconds();break;case"N":i=isNaN(i)?9:i,v+=t.getMilliseconds().toString().$rjust(3,"0"),v=v.$ljust(i,"0");break;case"z":var he=t.timezone==null?t.getTimezoneOffset():-t.timezone*60,ve=Math.floor(Math.abs(he)/60),me=Math.abs(he)%60;v+=he<0?"+":"-",v+=ve<10?"0":"",v+=ve,de>0&&(v+=":"),v+=me<10?"0":"",v+=me,de>1&&(v+=":00");break;case"Z":v+=t.$zone();break;case"A":v+=_[t.$wday()];break;case"a":v+=l[t.$wday()];break;case"u":v+=t.$wday()+1;break;case"w":v+=t.$wday();break;case"V":v+=t.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":v+=t.$cweek_cyear()["$[]"](1);break;case"g":v+=t.$cweek_cyear()["$[]"](1)["$[]"](z(-2,-1,!1));break;case"s":v+=t.$to_i();break;case"n":v+=`
`;break;case"t":v+="	";break;case"%":v+="%";break;case"c":v+=t.$strftime("%a %b %e %T %Y");break;case"D":case"x":v+=t.$strftime("%m/%d/%y");break;case"F":v+=t.$strftime("%Y-%m-%d");break;case"v":v+=t.$strftime("%e-%^b-%4Y");break;case"r":v+=t.$strftime("%I:%M:%S %p");break;case"R":v+=t.$strftime("%H:%M");break;case"T":case"X":v+=t.$strftime("%H:%M:%S");break;case"J":if(S=t.$to_date().$jd(),S<2405160){v+=t.$strftime("%Y-%m-%d");break}else S<2419614?(F="M",T=1867):S<2424875?(F="T",T=1911):S<2447535?(F="S",T=1925):S<2458605?(F="H",T=1988):(F="R",T=2018);v+=t.$format("%c%02d",F,W(t.$year(),T)),v+=t.$strftime("-%m-%d");break;default:return e}return le&&(v=v.toUpperCase()),ce&&(v=v.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),O&&(J||ae)&&(v=v.$rjust(isNaN(i)?2:i,ae?" ":"0")),v})}),Z(d,"$to_a",function(){var $=this;return[$.$sec(),$.$min(),$.$hour(),$.$day(),$.$month(),$.$year(),$.$wday(),$.$yday(),$.$isdst(),$.$zone()]}),Z(d,"$to_f",function(){var $=this;return $.getTime()/1e3}),Z(d,"$to_i",function(){var $=this;return parseInt($.getTime()/1e3,10)}),Z(d,"$cweek_cyear",function(){var $=this,t=E,e=E,r=E,i=E,s=E,o=E,v=E;return t=M("Time").$new($.$year(),1,1),e=t.$wday(),r=$.$year(),p(K(e,4))&&w(e,0)?i=W(e,1):(i=W(W(e,7),1),H(i,-8)&&(i=-1)),s=te(Y($.$yday(),i),7).$ceil(),p(K(s,0))?M("Time").$new(W($.$year(),1),12,31).$cweek_cyear():(H(s,53)&&(o=M("Time").$new($.$year(),12,31),v=o.$wday(),p(K(v,3))&&w(v,0)&&(s=1,r=Y(r,1))),[s,r])}),function(a,$){return j(a,"mktime","local"),j(a,"utc","gm")}(n.get_singleton_class(d)),j(d,"ctime","asctime"),j(d,"dst?","isdst"),j(d,"getutc","getgm"),j(d,"gmtoff","gmt_offset"),j(d,"mday","day"),j(d,"month","mon"),j(d,"to_s","inspect"),j(d,"tv_sec","to_i"),j(d,"tv_usec","usec"),j(d,"utc","gmtime"),j(d,"utc?","gmt?"),j(d,"utc_offset","gmt_offset")}("::",Date,g)};Opal.modules["corelib/struct"]=function(n){var k=n.klass,y=n.slice,P=n.extract_kwargs,I=n.ensure_kwargs,ee=n.hash_get,V=n.truthy,C=n.neqeq,Z=n.eqeq,p=n.Opal,B=n.send,ie=n.Class,L=n.to_a,Y=n.def,te=n.defs,W=n.Kernel,z=n.rb_gt,w=n.rb_minus,K=n.eqeqeq,H=n.rb_lt,j=n.rb_ge,R=n.rb_plus,g=n.alias,E=n.top,M=[],q=n.nil,m=n.$$$;return n.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),E.$require("corelib/enumerable"),function(u,d,A){var h=k(u,d,"Struct"),_=[h].concat(A),l=n.$r(_);h.$include(m("Enumerable")),te(h,"$new",function G(c,a,$){var t=G.$$p||q,e,r,i,s,o=this,v=q;if(G.$$p=null,e=y(arguments,1),r=P(e),r=I(r),i=e,s=ee(r,"keyword_init"),s==null&&(s=!1),V(c))if(Z(c.$class(),m("String"))&&C(c["$[]"](0).$upcase(),c["$[]"](0)))i.$unshift(c),c=q;else try{c=p["$const_name!"](c)}catch(S){if(n.rescue(S,[m("TypeError"),m("NameError")]))try{i.$unshift(c),c=q}finally{n.pop_exception(S)}else throw S}return B(i,"map",[],function(F){return F==null&&(F=q),p["$coerce_to!"](F,m("String"),"to_str")}),v=B(ie,"new",[o],function S(){var F=S.$$s==null?this:S.$$s;return B(i,"each",[],function T(J){var O=T.$$s==null?this:T.$$s;return J==null&&(J=q),O.$define_struct_attribute(J)},{$$s:F}),function(T,J){return Y(T,"$new",function(ae){var le,ce,de=this,he=q;return le=y(arguments),ce=le,he=de.$allocate(),he.$$data={},B(he,"initialize",L(ce)),he},-1),T.$alias_method("[]","new")}(n.get_singleton_class(F))},{$$s:o}),V(t)&&B(v,"module_eval",[],t.$to_proc()),v.$$keyword_init=s,V(c)&&m("Struct").$const_set(c,v),v},-2),te(h,"$define_struct_attribute",function(c){var a=this;return Z(a,m("Struct"))&&W.$raise(m("ArgumentError"),"you cannot define attributes to the Struct class"),a.$members()["$<<"](c),B(a,"define_method",[c],function $(){var t=$.$$s==null?this:$.$$s;return t.$$data[c]},{$$s:a}),B(a,"define_method",[""+c+"="],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=q),e.$$data[c]=t},{$$s:a})}),te(h,"$members",function(){var c=this,a=q;return c.members==null&&(c.members=q),Z(c,m("Struct"))&&W.$raise(m("ArgumentError"),"the Struct class has no members"),c.members=V(a=c.members)?a:[]}),te(h,"$inherited",function(c){var a=this,$=q;return a.members==null&&(a.members=q),$=a.members,B(c,"instance_eval",[],function t(){var e=t.$$s==null?this:t.$$s;return e.members=$},{$$s:a})}),Y(h,"$initialize",function(c){var a,$,t=this,e=q,r=q,i=q;return a=y(arguments),$=a,V(t.$class().$$keyword_init)?(e=V(r=$.$last())?r:new Map,(V(z($.$length(),1))||V($.length===1&&!e.$$is_hash))&&W.$raise(m("ArgumentError"),"wrong number of arguments (given "+$.$length()+", expected 0)"),i=w(e.$keys(),t.$class().$members()),V(i["$any?"]())&&W.$raise(m("ArgumentError"),"unknown keywords: "+i.$join(", ")),B(t.$class().$members(),"each",[],function s(o){var v,S=s.$$s==null?this:s.$$s;return o==null&&(o=q),v=[o,e["$[]"](o)],B(S,"[]=",v),v[v.length-1]},{$$s:t})):(V(z($.$length(),t.$class().$members().$length()))&&W.$raise(m("ArgumentError"),"struct size differs"),B(t.$class().$members(),"each_with_index",[],function s(o,v){var S,F=s.$$s==null?this:s.$$s;return o==null&&(o=q),v==null&&(v=q),S=[o,$["$[]"](v)],B(F,"[]=",S),S[S.length-1]},{$$s:t}))},-1),Y(h,"$initialize_copy",function(c){var a=this;a.$$data={};var $=Object.keys(c.$$data),t,e,r;for(t=0,e=$.length;t<e;t++)r=$[t],a.$$data[r]=c.$$data[r]}),te(h,"$keyword_init?",function(){var c=this;return c.$$keyword_init}),Y(h,"$members",function(){var c=this;return c.$class().$members()}),Y(h,"$hash",function(){var c=this;return[c.$class(),c.$to_a()].$hash()}),Y(h,"$[]",function(c){var a=this;return K(m("Integer"),c)?(V(H(c,a.$class().$members().$size()["$-@"]()))&&W.$raise(m("IndexError"),"offset "+c+" too small for struct(size:"+a.$class().$members().$size()+")"),V(j(c,a.$class().$members().$size()))&&W.$raise(m("IndexError"),"offset "+c+" too large for struct(size:"+a.$class().$members().$size()+")"),c=a.$class().$members()["$[]"](c)):K(m("String"),c)?a.$$data.hasOwnProperty(c)||W.$raise(m("NameError").$new("no member '"+c+"' in struct",c)):W.$raise(m("TypeError"),"no implicit conversion of "+c.$class()+" into Integer"),c=p["$coerce_to!"](c,m("String"),"to_str"),a.$$data[c]}),Y(h,"$[]=",function(c,a){var $=this;return K(m("Integer"),c)?(V(H(c,$.$class().$members().$size()["$-@"]()))&&W.$raise(m("IndexError"),"offset "+c+" too small for struct(size:"+$.$class().$members().$size()+")"),V(j(c,$.$class().$members().$size()))&&W.$raise(m("IndexError"),"offset "+c+" too large for struct(size:"+$.$class().$members().$size()+")"),c=$.$class().$members()["$[]"](c)):K(m("String"),c)?V($.$class().$members()["$include?"](c.$to_sym()))||W.$raise(m("NameError").$new("no member '"+c+"' in struct",c)):W.$raise(m("TypeError"),"no implicit conversion of "+c.$class()+" into Integer"),c=p["$coerce_to!"](c,m("String"),"to_str"),$.$$data[c]=a}),Y(h,"$==",function(c){var a=this;if(!V(c["$instance_of?"](a.$class())))return!1;var $={},t={};function e(r,i){var s,o,v;$[r.$__id__()]=!0,t[i.$__id__()]=!0;for(s in r.$$data)if(o=r.$$data[s],v=i.$$data[s],m("Struct")["$==="](o)){if((!$.hasOwnProperty(o.$__id__())||!t.hasOwnProperty(v.$__id__()))&&!e(o,v))return!1}else if(!o["$=="](v))return!1;return!0}return e(a,c)}),Y(h,"$eql?",function(c){var a=this;if(!V(c["$instance_of?"](a.$class())))return!1;var $={},t={};function e(r,i){var s,o,v;$[r.$__id__()]=!0,t[i.$__id__()]=!0;for(s in r.$$data)if(o=r.$$data[s],v=i.$$data[s],m("Struct")["$==="](o)){if((!$.hasOwnProperty(o.$__id__())||!t.hasOwnProperty(v.$__id__()))&&!e(o,v))return!1}else if(!o["$eql?"](v))return!1;return!0}return e(a,c)}),Y(h,"$each",function G(){var c=G.$$p||q,a=this;return G.$$p=null,c===q?B(a,"enum_for",["each"],function $(){var t=$.$$s==null?this:$.$$s;return t.$size()},{$$s:a}):(B(a.$class().$members(),"each",[],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=q),n.yield1(c,e["$[]"](t))},{$$s:a}),a)}),Y(h,"$each_pair",function G(){var c=G.$$p||q,a=this;return G.$$p=null,c===q?B(a,"enum_for",["each_pair"],function $(){var t=$.$$s==null?this:$.$$s;return t.$size()},{$$s:a}):(B(a.$class().$members(),"each",[],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=q),n.yield1(c,[t,e["$[]"](t)])},{$$s:a}),a)}),Y(h,"$length",function(){var c=this;return c.$class().$members().$length()}),Y(h,"$to_a",function(){var c=this;return B(c.$class().$members(),"map",[],function a($){var t=a.$$s==null?this:a.$$s;return $==null&&($=q),t["$[]"]($)},{$$s:c})});var x=[];return Y(h,"$inspect",function(){var c=this,a=q,$=q;return function(){try{return a="#<struct ",V(x["$include?"](c.$__id__()))?R(a,":...>"):(x["$<<"](c.$__id__()),$=!0,K(m("Struct"),c)&&V(c.$class().$name())&&(a=R(a,""+c.$class()+" ")),a=R(a,B(c.$each_pair(),"map",[],function(e,r){return e==null&&(e=q),r==null&&(r=q),""+e+"="+l("Opal").$inspect(r)}).$join(", ")),a=R(a,">"),a)}finally{V($)&&x.pop()}}()}),Y(h,"$to_h",function G(c){var a=G.$$p||q,$,t,e=this;return G.$$p=null,$=y(arguments),t=$,a!==q?B(B(e,"map",[],a.$to_proc()),"to_h",L(t)):B(e.$class().$members(),"each_with_object",[new Map],function r(i,s){var o,v=r.$$s==null?this:r.$$s;return i==null&&(i=q),s==null&&(s=q),o=[i,v["$[]"](i)],B(s,"[]=",o),o[o.length-1]},{$$s:e})},-1),Y(h,"$values_at",function(c){var a,$,t=this;a=y(arguments),$=a,$=B($,"map",[],function(o){return o==null&&(o=q),o.$$is_range?o.$to_a():o}).$flatten();for(var e=[],r=0,i=$.length;r<i;r++)$[r].$$is_number||W.$raise(m("TypeError"),"no implicit conversion of "+$[r].$class()+" into Integer"),e.push(t["$[]"]($[r]));return e},-1),Y(h,"$dig",function(c,a){var $,t,e=this,r=q;return $=y(arguments,1),t=$,r=V(c.$$is_string&&e.$$data.hasOwnProperty(c))&&e.$$data[c]||q,r===q||t.length===0?r:(V(r["$respond_to?"]("dig"))||W.$raise(m("TypeError"),""+r.$class()+" does not have #dig method"),B(r,"dig",L(t)))},-2),g(h,"size","length"),g(h,"to_s","inspect"),g(h,"values","to_a")}("::",null,M)};Opal.modules["corelib/set"]=function(n){var k=n.freeze,y=n.klass,P=n.slice,I=n.defs,ee=n.truthy,V=n.eqeqeq,C=n.Kernel,Z=n.send,p=n.def,B=n.eqeq,ie=n.rb_lt,L=n.rb_le,Y=n.alias,te=[],W=n.nil,z=n.$$$;return n.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(w,K,H){var j=y(w,K,"Set"),R=[j].concat(H),g=n.$r(R),E=W,M=j.$$prototype;M.hash=W,j.$include(z("Enumerable")),I(j,"$[]",function(u){var d,A,h=this;return d=P(arguments),A=d,h.$new(A)},-1),p(j,"$initialize",function m(u){var d=m.$$p||W,A=this;return m.$$p=null,u==null&&(u=W),A.hash=new Map,ee(u["$nil?"]())?W:(V(z("Enumerable"),u)||C.$raise(z("ArgumentError"),"value must be enumerable"),ee(d)?Z(u,"each",[],function h(_){var l=h.$$s==null?this:h.$$s;return _==null&&(_=W),l.$add(n.yield1(d,_))},{$$s:A}):A.$merge(u))},-1),p(j,"$dup",function(){var u=this,d=W;return d=u.$class().$new(),d.$merge(u)}),p(j,"$-",function(u){var d=this;return ee(u["$respond_to?"]("each"))||C.$raise(z("ArgumentError"),"value must be enumerable"),d.$dup().$subtract(u)}),p(j,"$inspect",function(){var u=this;return"#<Set: {"+u.$to_a().$join(",")+"}>"}),p(j,"$==",function(u){var d=this;return ee(d["$equal?"](u))?!0:ee(u["$instance_of?"](d.$class()))?d.hash["$=="](u.$instance_variable_get("@hash")):ee(u["$is_a?"](z("Set")))&&B(d.$size(),u.$size())?Z(u,"all?",[],function A(h){var _=A.$$s==null?this:A.$$s;return _.hash==null&&(_.hash=W),h==null&&(h=W),_.hash["$include?"](h)},{$$s:d}):!1}),p(j,"$add",function(u){var d=this;return d.hash["$[]="](u,!0),d}),p(j,"$classify",function m(){var u=m.$$p||W,d=this,A=W;return m.$$p=null,u===W?d.$enum_for("classify"):(A=Z(z("Hash"),"new",[],function h(_,l){var x,G=h.$$s==null?this:h.$$s;return _==null&&(_=W),l==null&&(l=W),x=[l,G.$class().$new()],Z(_,"[]=",x),x[x.length-1]},{$$s:d}),Z(d,"each",[],function(_){return _==null&&(_=W),A["$[]"](n.yield1(u,_)).$add(_)}),A)}),p(j,"$collect!",function m(){var u=m.$$p||W,d=this,A=W;return m.$$p=null,u===W?d.$enum_for("collect!"):(A=d.$class().$new(),Z(d,"each",[],function(_){return _==null&&(_=W),A["$<<"](n.yield1(u,_))}),d.$replace(A))}),p(j,"$compare_by_identity",function(){var u=this;return ee(u.hash["$respond_to?"]("compare_by_identity"))?(u.hash.$compare_by_identity(),u):u.$raise(g("NotImplementedError"),""+u.$class().$name()+"#compare_by_identity is not implemented")}),p(j,"$compare_by_identity?",function(){var u=this,d=W;return ee(d=u.hash["$respond_to?"]("compare_by_identity?"))?u.hash["$compare_by_identity?"]():d}),p(j,"$delete",function(u){var d=this;return d.hash.$delete(u),d}),p(j,"$delete?",function(u){var d=this;return ee(d["$include?"](u))?(d.$delete(u),d):W}),p(j,"$delete_if",function m(){var u=m.$$p||W,d=this;return m.$$p=null,u===W?d.$enum_for("delete_if"):(Z(Z(d,"select",[],function(h){return h==null&&(h=W),n.yield1(u,h)}),"each",[],function A(h){var _=A.$$s==null?this:A.$$s;return _.hash==null&&(_.hash=W),h==null&&(h=W),_.hash.$delete(h)},{$$s:d}),d)}),p(j,"$freeze",function(){var u=this;return ee(u["$frozen?"]())?u:(u.hash.$freeze(),k(u))}),p(j,"$keep_if",function m(){var u=m.$$p||W,d=this;return m.$$p=null,u===W?d.$enum_for("keep_if"):(Z(Z(d,"reject",[],function(h){return h==null&&(h=W),n.yield1(u,h)}),"each",[],function A(h){var _=A.$$s==null?this:A.$$s;return _.hash==null&&(_.hash=W),h==null&&(h=W),_.hash.$delete(h)},{$$s:d}),d)}),p(j,"$reject!",function m(){var u=m.$$p||W,d=this,A=W;return m.$$p=null,u===W?d.$enum_for("reject!"):(A=d.$size(),Z(d,"delete_if",[],u.$to_proc()),B(d.$size(),A)?W:d)}),p(j,"$select!",function m(){var u=m.$$p||W,d=this,A=W;return m.$$p=null,u===W?d.$enum_for("select!"):(A=d.$size(),Z(d,"keep_if",[],u.$to_proc()),B(d.$size(),A)?W:d)}),p(j,"$add?",function(u){var d=this;return ee(d["$include?"](u))?W:d.$add(u)}),p(j,"$each",function m(){var u=m.$$p||W,d=this;return m.$$p=null,u===W?d.$enum_for("each"):(Z(d.hash,"each_key",[],u.$to_proc()),d)}),p(j,"$empty?",function(){var u=this;return u.hash["$empty?"]()}),p(j,"$eql?",function(u){var d=this;return d.hash["$eql?"](Z(u,"instance_eval",[],function A(){var h=A.$$s==null?this:A.$$s;return h.hash==null&&(h.hash=W),h.hash},{$$s:d}))}),p(j,"$clear",function(){var u=this;return u.hash.$clear(),u}),p(j,"$include?",function(u){var d=this;return d.hash["$include?"](u)}),p(j,"$merge",function(u){var d=this;return Z(u,"each",[],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=W),_.$add(h)},{$$s:d}),d}),p(j,"$replace",function(u){var d=this;return d.$clear(),d.$merge(u),d}),p(j,"$size",function(){var u=this;return u.hash.$size()}),p(j,"$subtract",function(u){var d=this;return Z(u,"each",[],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=W),_.$delete(h)},{$$s:d}),d}),p(j,"$|",function(u){var d=this;return ee(u["$respond_to?"]("each"))||C.$raise(z("ArgumentError"),"value must be enumerable"),d.$dup().$merge(u)});function q(m){ee(E=m["$is_a?"](z("Set")))||C.$raise(z("ArgumentError"),"value must be a set")}return p(j,"$superset?",function(u){var d=this;return q(u),ee(ie(d.$size(),u.$size()))?!1:Z(u,"all?",[],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=W),_["$include?"](h)},{$$s:d})}),p(j,"$proper_superset?",function(u){var d=this;return q(u),ee(L(d.$size(),u.$size()))?!1:Z(u,"all?",[],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=W),_["$include?"](h)},{$$s:d})}),p(j,"$subset?",function(u){var d=this;return q(u),ee(ie(u.$size(),d.$size()))?!1:Z(d,"all?",[],function(h){return h==null&&(h=W),u["$include?"](h)})}),p(j,"$proper_subset?",function(u){var d=this;return q(u),ee(L(u.$size(),d.$size()))?!1:Z(d,"all?",[],function(h){return h==null&&(h=W),u["$include?"](h)})}),p(j,"$intersect?",function(u){var d=this;return q(u),ee(ie(d.$size(),u.$size()))?Z(d,"any?",[],function(h){return h==null&&(h=W),u["$include?"](h)}):Z(u,"any?",[],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=W),_["$include?"](h)},{$$s:d})}),p(j,"$disjoint?",function(u){var d=this;return d["$intersect?"](u)["$!"]()}),p(j,"$to_a",function(){var u=this;return u.hash.$keys()}),Y(j,"+","|"),Y(j,"<","proper_subset?"),Y(j,"<<","add"),Y(j,"<=","subset?"),Y(j,">","proper_superset?"),Y(j,">=","superset?"),Y(j,"difference","-"),Y(j,"filter!","select!"),Y(j,"length","size"),Y(j,"map!","collect!"),Y(j,"member?","include?"),Y(j,"union","|")}("::",null,te)};Opal.modules["corelib/dir"]=function(n){var k=n.klass,y=n.def,P=n.truthy,I=n.alias,ee=n.nil,V=n.$$$;return n.add_stubs("[],pwd"),function(C,Z,p){var B=k(C,Z,"Dir");return function(ie,L){return y(ie,"$chdir",function Y(te){var W=Y.$$p||ee,z=ee;return Y.$$p=null,function(){try{return z=n.current_dir,n.current_dir=te,n.yieldX(W,[])}finally{n.current_dir=z}}()}),y(ie,"$pwd",function(){return n.current_dir||"."}),y(ie,"$home",function(){var te=ee;return P(te=V("ENV")["$[]"]("HOME"))?te:"."}),I(ie,"getwd","pwd")}(n.get_singleton_class(B))}("::",null)};Opal.modules["corelib/file"]=function(n){var k=n.truthy,y=n.klass,P=n.const_set,I=n.Opal,ee=n.regexp,V=n.rb_plus,C=n.def,Z=n.Kernel,p=n.eqeq,B=n.rb_lt,ie=n.rb_minus,L=n.range,Y=n.send,te=n.slice,W=n.alias,z=[],w=n.nil,K=n.$$$;return n.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(H,j,R){var g=y(H,j,"File"),E=[g].concat(R),M=w;return P(E[0],"Separator",P(E[0],"SEPARATOR","/")),P(E[0],"ALT_SEPARATOR",w),P(E[0],"PATH_SEPARATOR",":"),P(E[0],"FNM_SYSCASE",0),M=/^[a-zA-Z]:(?:\\|\/)/,function(q,m){var u=[q].concat(m),d=n.$r(u);C(q,"$absolute_path",function(l,x){var G=w,c=w,a=w,$=w,t=w,e=w,r=w,i=w,s=w,o=w;x==null&&(x=w),G=d("SEPARATOR"),c=h(),a=[],l=k(l["$respond_to?"]("to_path"))?l.$to_path():l,l=I["$coerce_to!"](l,K("String"),"to_str"),x=k($=x)?$:K("Dir").$pwd(),t=l.substr(0,G.length)===G||M.test(l),e=x.substr(0,G.length)===G||M.test(x),k(t)?(r=l.$split(ee(["[",c,"]"])),i=M.test(l)?"":l.$sub(ee(["^([",c,"]+).*$"]),"\\1"),s=!0):(r=V(x.$split(ee(["[",c,"]"])),l.$split(ee(["[",c,"]"]))),i=M.test(x)?"":x.$sub(ee(["^([",c,"]+).*$"]),"\\1"),s=e);for(var v,S=0,F=r.length;S<F;S++)v=r[S],!(v===w||v===""&&(a.length===0||s)||v==="."&&(a.length===0||s))&&(v===".."?a.pop():a.push(v));return!s&&r[0]!=="."&&a.$unshift("."),o=a.$join(G),k(s)&&(o=V(i,o)),o},-2),C(q,"$expand_path",function(l,x){var G=this,c=w,a=w,$=w,t=w,e=w;return x==null&&(x=w),c=d("SEPARATOR"),a=h(),k(l[0]==="~"||x&&x[0]==="~")&&($=d("Dir").$home(),k($)||Z.$raise(K("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),t=M.test($)?"":$.$sub(ee(["^([",a,"]+).*$"]),"\\1"),k($["$start_with?"](t))||Z.$raise(K("ArgumentError"),"non-absolute home"),$=V($,c),e=ee(["^\\~(?:",c,"|$)"]),l=l.$sub(e,$),k(x)&&(x=x.$sub(e,$))),G.$absolute_path(l,x)},-2);function A(_){return k(_["$respond_to?"]("to_path"))&&(_=_.$to_path()),_=I["$coerce_to!"](_,K("String"),"to_str"),_}function h(){return d("ALT_SEPARATOR")===w?n.escape_regexp(d("SEPARATOR")):n.escape_regexp(V(d("SEPARATOR"),d("ALT_SEPARATOR")))}return C(q,"$dirname",function(l,x){var G=this,c=w;if(x==null&&(x=1),p(x,0))return l;k(B(x,0))&&Z.$raise(K("ArgumentError"),"level can't be negative"),c=h(),l=A(l);var a=l.match(new RegExp("^["+c+"]")),$;return l=l.replace(new RegExp("["+c+"]+$"),""),l=l.replace(new RegExp("[^"+c+"]+$"),""),l=l.replace(new RegExp("["+c+"]+$"),""),l===""?$=a?"/":".":$=l,x==1?$:G.$dirname($,ie(x,1))},-2),C(q,"$basename",function(l,x){var G=w;return x==null&&(x=w),G=h(),l=A(l),l.length==0||(x!==w?x=I["$coerce_to!"](x,K("String"),"to_str"):x=null,l=l.replace(new RegExp("(.)["+G+"]*$"),"$1"),l=l.replace(new RegExp("^(?:.*["+G+"])?([^"+G+"]+)$"),"$1"),x===".*"?l=l.replace(/\.[^\.]+$/,""):x!==null&&(x=n.escape_regexp(x),l=l.replace(new RegExp(""+x+"$"),""))),l},-2),C(q,"$extname",function(l){var x=this,G=w,c=w;return l=A(l),G=x.$basename(l),k(G["$empty?"]())||(c=G["$[]"](L(1,-1,!1)).$rindex("."),k(c["$nil?"]())||p(V(c,1),ie(G.$length(),1)))?"":G["$[]"](n.Range.$new(V(c,1),-1,!1))}),C(q,"$exist?",function(l){return n.modules[l]!=null}),C(q,"$directory?",function(l){var x=w;x=[];for(var G in n.modules)x.push(G);return l=l.$gsub(ee(["(^.",d("SEPARATOR"),"+|",d("SEPARATOR"),"+$)"])),Y(x,"find",[],function(a){return a==null&&(a=w),a["$=~"](ee(["^",l]))})}),C(q,"$join",function(l){var x,G,c=w;return x=te(arguments),G=x,k(G["$empty?"]())?"":(c="",G=Y(G.$flatten().$each_with_index(),"map",[],function($,t){return $==null&&($=w),t==null&&(t=w),p(t,0)&&k($["$empty?"]())||p(G.$length(),V(t,1))&&k($["$empty?"]())?d("SEPARATOR"):$}),G=Y(G,"reject",[],"empty?".$to_proc()),Y(G,"each_with_index",[],function($,t){var e=w;return $==null&&($=w),t==null&&(t=w),e=G["$[]"](V(t,1)),k(e["$nil?"]())?c=""+c+$:(k($["$end_with?"](d("SEPARATOR")))&&k(e["$start_with?"](d("SEPARATOR")))&&($=$.$sub(ee([d("SEPARATOR"),"+$"]),"")),c=k($["$end_with?"](d("SEPARATOR")))||k(e["$start_with?"](d("SEPARATOR")))?""+c+$:""+c+$+d("SEPARATOR"))}),c)},-1),C(q,"$split",function(l){return l.$split(d("SEPARATOR"))}),W(q,"realpath","expand_path"),W(q,"exists?","exist?")}(n.get_singleton_class(g),E)}("::",K("IO"),z)};Opal.modules["corelib/process/base"]=function(n){var k=n.klass,y=n.slice,P=n.defs,I=n.return_val,ee=n.nil;return function(V,C){var Z=k(V,C,"Signal");return P(Z,"$trap",function(B){return y(arguments),ee},-1)}("::",null),function(V,C){var Z=k(V,C,"GC");return P(Z,"$start",I(ee))}("::",null)};Opal.modules["corelib/process"]=function(n){var k=n.module,y=n.defs,P=n.truthy,I=n.return_val,ee=n.Kernel,V=n.nil,C=n.$$$;return n.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(Z){var p=k(Z,"Process"),B=V;if(p.__clocks__=[],y(p,"$__register_clock__",function(Y,te){var W=this;return W.__clocks__==null&&(W.__clocks__=V),W.$const_set(Y,W.__clocks__.$size()),W.__clocks__["$<<"](te)}),p.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),B=!1,n.global.performance)B=function(){return performance.now()};else if(n.global.process&&process.hrtime){var ie=process.hrtime();B=function(){var L=process.hrtime(ie),Y=L[1]/1e3|0;return L[0]*1e3+Y/1e3}}return P(B)&&p.$__register_clock__("CLOCK_MONOTONIC",B),y(p,"$pid",I(0)),y(p,"$times",function(){var Y=V;return Y=C("Time").$now().$to_f(),C(C("Benchmark"),"Tms").$new(Y,Y,Y,Y,Y)}),y(p,"$clock_gettime",function(Y,te){var W=this,z=V;W.__clocks__==null&&(W.__clocks__=V),te==null&&(te="float_second"),P(z=W.__clocks__["$[]"](Y))||ee.$raise(C(C("Errno"),"EINVAL"),"clock_gettime("+Y+") "+W.__clocks__["$[]"](Y));var w=z();switch(te){case"float_second":return w/1e3;case"float_millisecond":return w/1;case"float_microsecond":return w*1e3;case"second":return w/1e3|0;case"millisecond":return w/1|0;case"microsecond":return w*1e3|0;case"nanosecond":return w*1e6|0;default:ee.$raise(C("ArgumentError"),"unexpected unit: "+te)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(n){var k=n.klass,y=n.module,P=n.def,I=n.range,ee=n.send,V=n.rb_divide,C=n.Kernel,Z=n.Opal,p=[],B=n.nil,ie=n.$$$;return n.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(L,Y,te){var W=k(L,Y,"Random"),z=[W].concat(te);return function(w,K){var H=y(w,"Formatter"),j=[H].concat(K),R=n.$r(j);return P(H,"$hex",function(E){var M=this;E==null&&(E=B),E=ie("Random").$_verify_count(E);for(var q=M.$bytes(E),m="",u=0;u<E;u++)m+=q.charCodeAt(u).toString(16).padStart(2,"0");return m.$encode("US-ASCII")},-1),P(H,"$random_bytes",function(E){var M=this;return E==null&&(E=B),M.$bytes(E)},-1),P(H,"$base64",function(E){var M=this;return E==null&&(E=B),ie("Base64").$strict_encode64(M.$random_bytes(E)).$encode("US-ASCII")},-1),P(H,"$urlsafe_base64",function(E,M){var q=this;return E==null&&(E=B),M==null&&(M=!1),ie("Base64").$urlsafe_encode64(q.$random_bytes(E),M).$encode("US-ASCII")},-1),P(H,"$uuid",function(){var E=this,M=B;return M=E.$hex(16).$split(""),M["$[]="](12,"4"),M["$[]="](16,(parseInt(M["$[]"](16),16)&3|8).toString(16)),M=[M["$[]"](I(0,8,!0)),M["$[]"](I(8,12,!0)),M["$[]"](I(12,16,!0)),M["$[]"](I(16,20,!0)),M["$[]"](I(20,32,!0))],M=ee(M,"map",[],"join".$to_proc()),M.$join("-")}),P(H,"$random_float",function(){var E=this,M=B,q=B;return M=E.$bytes(4),q=0,ee(4,"times",[],function(u){return u==null&&(u=B),q=q["$<<"](8),q=q["$|"](M["$[]"](u).$ord())}),V(q.$abs(),2147483647)}),P(H,"$random_number",function(E){var M=this;function q(){return M.$random_float()}function m(d){return Math.floor(q()*d)}function u(){var d=E.begin,A=E.end;if(d===B||A===B)return B;var h=A-d;return h<0?B:h===0?d:(A%1===0&&d%1===0&&!E.excl&&h++,m(h)+d)}return E==null?q():E.$$is_range?u():E.$$is_number?(E<=0&&C.$raise(ie("ArgumentError"),"invalid argument - "+E),E%1===0?m(E):q()*E):(E=Z["$coerce_to!"](E,ie("Integer"),"to_int"),E<=0&&C.$raise(ie("ArgumentError"),"invalid argument - "+E),m(E))},-1),P(H,"$alphanumeric",function(E){var M=this,q=B;return E==null&&(E=B),E=R("Random").$_verify_count(E),q=ee([I("0","9",!1),I("a","z",!1),I("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),ee(ie("Array"),"new",[E],function m(u){var d=m.$$s==null?this:m.$$s;return q["$[]"](d.$random_number(q.$length()))},{$$s:M}).$join()},-1)}(W,z),W.$include(ie(ie("Random"),"Formatter")),W.$extend(ie(ie("Random"),"Formatter"))}("::",null,p)};Opal.modules["corelib/random/mersenne_twister"]=function(n){var k=n.klass,y=n.const_set,P=n.send,I=n.nil,ee=n.$$$,V=I;return n.add_stubs("generator="),V=function(){var C=624,Z=397,p=2567483615,B=2147483648,ie=2147483647,L=function(j,R){return j&B|R&ie},Y=function(j,R){return L(j,R)>>>1^(R&1?p:0)};function te(j){var R={left:0,next:C,state:new Array(C)};return W(R,j),R}function W(j,R){var g;for(j.state[0]=R>>>0,g=1;g<C;g++)j.state[g]=1812433253*(j.state[g-1]^j.state[g-1]>>30>>>0)+g,j.state[g]&=4294967295;j.left=1,j.next=C}function z(j){var R=0,g=j.state,E;for(j.left=C,j.next=0,E=C-Z+1;--E;R++)g[R]=g[R+Z]^Y(g[R+0],g[R+1]);for(E=Z;--E;R++)g[R]=g[R+(Z-C)]^Y(g[R+0],g[R+1]);g[R]=g[R+(Z-C)]^Y(g[R+0],g[0])}function w(j){var R;return--j.left<=0&&z(j),R=j.state[j.next++],R^=R>>>11,R^=R<<7&2636928640,R^=R<<15&4022730752,R^=R>>>18,R>>>0}function K(j,R){return j>>>=5,R>>>=6,(j*67108864+R)*(1/9007199254740992)}function H(j){var R=w(j),g=w(j);return K(R,g)}return{genrand_real:H,init:te}}(),function(C,Z){var p=k(C,Z,"Random"),B,ie=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return y(p,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*ie)},reseed:function(L){return V.init(L)},rand:function(L){return V.genrand_real(L)}}),B=[ee(p,"MERSENNE_TWISTER_GENERATOR")],P(p,"generator=",B),B[B.length-1]}("::",null)};Opal.modules["corelib/random"]=function(n){var k=n.truthy,y=n.klass,P=n.Kernel,I=n.defs,ee=n.Opal,V=n.def,C=n.eqeqeq,Z=n.send,p=n.top,B=n.nil,ie=n.$$$;return n.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),p.$require("corelib/random/formatter"),function(L,Y){var te=y(L,Y,"Random");return te.$attr_reader("seed","state"),I(te,"$_verify_count",function(z){return k(z)||(z=16),typeof z!="number"&&(z=z.$to_int()),z<0&&P.$raise(ie("ArgumentError"),"negative string size (or size too big)"),z=Math.floor(z),z}),V(te,"$initialize",function(z){var w=this;return z==null&&(z=ie("Random").$new_seed()),z=ee["$coerce_to!"](z,ie("Integer"),"to_int"),w.state=z,w.$reseed(z)},-1),V(te,"$reseed",function(z){var w=this;return w.seed=z,w.$rng=n.$$rand.reseed(z)}),I(te,"$new_seed",function(){return n.$$rand.new_seed()}),I(te,"$rand",function(z){var w=this;return ie(w,"DEFAULT").$rand(z)},-1),I(te,"$srand",function(z){var w=this,K=B;return z==null&&(z=ie("Random").$new_seed()),z=ee["$coerce_to!"](z,ie("Integer"),"to_int"),K=ie(w,"DEFAULT").$seed(),ie(w,"DEFAULT").$reseed(z),K},-1),I(te,"$urandom",function(z){return ie("SecureRandom").$bytes(z)}),V(te,"$==",function(z){var w=this,K=B;return C(ie("Random"),z)?k(K=w.$seed()["$=="](z.$seed()))?w.$state()["$=="](z.$state()):K:!1}),V(te,"$bytes",function(z){var w=this;return z=ie("Random").$_verify_count(z),Z(ie("Array"),"new",[z],function K(){var H=K.$$s==null?this:K.$$s;return H.$rand(255).$chr()},{$$s:w}).$join().$encode("ASCII-8BIT")}),I(te,"$bytes",function(z){var w=this;return ie(w,"DEFAULT").$bytes(z)}),V(te,"$rand",function(z){var w=this;return w.$random_number(z)},-1),V(te,"$random_float",function(){var z=this;return z.state++,n.$$rand.rand(z.$rng)}),I(te,"$random_float",function(){var z=this;return ie(z,"DEFAULT").$random_float()}),I(te,"$generator=",function(z){var w=this;return n.$$rand=z,k(w["$const_defined?"]("DEFAULT"))?ie(w,"DEFAULT").$reseed():w.$const_set("DEFAULT",w.$new(w.$new_seed()))})}("::",null),p.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(n){var k=n.Kernel,y=n.klass,P=n.send,I=n.slice,ee=n.module,V=n.def,C=n.return_val,Z=n.alias,p=n.defs,B=n.top,ie=[],L=n.nil,Y=n.$$$;n.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var te={};function W(w){switch(n.config.unsupported_features_severity){case"error":k.$raise(Y("NotImplementedError"),w);break;case"warning":z(w);break}}function z(w){te[w]||(te[w]=!0,B.$warn(w))}return function(w,K){var H=y(w,K,"String"),j="String#%s not supported. Mutable String methods are not supported in Opal.";return P(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function R(g){var E=R.$$s==null?this:R.$$s;return g==null&&(g=L),P(E,"define_method",[g],function(q){return I(arguments),k.$raise(Y("NotImplementedError"),j["$%"](g))},-1)},{$$s:H})}("::",null),function(w){var K=ee(w,"Kernel"),H="Object tainting is not supported by Opal";return V(K,"$taint",function(){var R=this;return W(H),R}),V(K,"$untaint",function(){var R=this;return W(H),R}),V(K,"$tainted?",function(){return W(H),!1})}("::"),function(w,K){var H=y(w,K,"Module");return V(H,"$public",function(R){var g,E,M=this;return g=I(arguments),E=g,E.length===0?(M.$$module_function=!1,L):E.length===1?E[0]:E},-1),V(H,"$private_class_method",function(R){var g,E;return g=I(arguments),E=g,E.length===1?E[0]:E},-1),V(H,"$private_method_defined?",C(!1)),V(H,"$private_constant",function(R){return I(arguments),L},-1),Z(H,"nesting","public"),Z(H,"private","public"),Z(H,"protected","public"),Z(H,"protected_method_defined?","private_method_defined?"),Z(H,"public_class_method","private_class_method"),Z(H,"public_instance_method","instance_method"),Z(H,"public_instance_methods","instance_methods"),Z(H,"public_method_defined?","method_defined?")}("::",null),function(w){var K=ee(w,"Kernel");return V(K,"$private_methods",function(j){return I(arguments),[]},-1),Z(K,"protected_methods","private_methods"),Z(K,"private_instance_methods","private_methods"),Z(K,"protected_instance_methods","private_methods")}("::"),function(w,K){var H=ee(w,"Kernel"),j=[H].concat(K),R=n.$r(j);return V(H,"$eval",function(E){return I(arguments),k.$raise(Y("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+R("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",ie),p(B,"$public",function(K){var H,j;return H=I(arguments),j=H,j.length===1?j[0]:j},-1),p(B,"$private",function(K){var H,j;return H=I(arguments),j=H,j.length===1?j[0]:j},-1)};Opal.modules["corelib/binding"]=function(n){var k=n.klass,y=n.truthy,P=n.def,I=n.slice,ee=n.send,V=n.to_a,C=n.Kernel,Z=n.return_ivar,p=n.eqeq;n.thrower;var B=n.module,ie=n.const_set,L=n.top,Y=[],te=n.nil,W=n.$$$;return n.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(z,w){var K=k(z,w,"Binding"),H=K.$$prototype;return H.jseval=H.scope_variables=te,P(K,"$initialize",function(R,g,E,M){var q,m=this;return g==null&&(g=[]),M==null&&(M=te),q=[R,g,E,M],m.jseval=q[0],m.scope_variables=q[1],m.receiver=q[2],m.source_location=q[3],y(typeof E!==void 0)?te:E=m.$js_eval("self")},-2),P(K,"$js_eval",function(R){var g,E,M=this;return g=I(arguments),E=g,y(M.jseval)?ee(M.jseval,"call",V(E)):C.$raise("Evaluation on a Proc#binding is not supported")},-1),P(K,"$local_variable_get",function(R){var g=this;try{return g.$js_eval(R)}catch(E){if(n.rescue(E,[W("Exception")]))try{return C.$raise(W("NameError"),"local variable `"+R+"' is not defined for "+g.$inspect())}finally{n.pop_exception(E)}else throw E}}),P(K,"$local_variable_set",function(R,g){var E=this;return n.Binding.tmp_value=g,E.$js_eval(""+R+" = Opal.Binding.tmp_value"),delete n.Binding.tmp_value,g}),P(K,"$local_variables",Z("scope_variables")),P(K,"$local_variable_defined?",function(R){var g=this;return g.scope_variables["$include?"](R)}),P(K,"$eval",function(R,g,E){try{var M=this;return g==null&&(g=te),E==null&&(E=te),p(R,"self")?M.$receiver():C.$eval(R,M,g,E)}catch(q){if(q===n.t_eval_return)return q.$v;throw q}},-2),K.$attr_reader("receiver","source_location")}("::",null),function(z){var w=B(z,"Kernel");return P(w,"$binding",function(){return C.$raise("Opal doesn't support dynamic calls to binding")})}("::"),ie(Y[0],"TOPLEVEL_BINDING",W("Binding").$new(function(z){return new Function("self","return "+z)(L)},[],L,["<main>",0]))};Opal.modules["corelib/irb"]=function(n){var k=n.module,y=n.truthy,P=n.Kernel,I=n.defs,ee=n.gvars,V=n.lambda,C=n.hash_rehash,Z=n.send,p=n.rb_plus,B=n.const_set,ie=n.klass,L=n.def,Y=n.Opal,te=n.range,W=n.eqeq,z=n.thrower,w=[],K=n.nil,H=n.$$$;n.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(j,R){var g=k(j,"Opal"),E=[g].concat(R);return function(M,q){var m=k(M,"IRB"),u=[m].concat(q),d=n.$r(u);return I(m,"$ensure_loaded",function(h){var _=K,l=K;if(y(n.loaded_features["$include?"](h)))return K;_=y(d("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":d("RUBY_ENGINE_VERSION"),l="https://cdn.opalrb.com/opal/"+_+"/"+h+".js";var x;if(typeof XMLHttpRequest<"u"){var G=new XMLHttpRequest;G.open("GET",l,!1),G.send(""),x=G.responseText}else P.$raise("You need to provision "+h+" yourself in this environment");return new Function("Opal",x)(n),n.require(h),y(n.loaded_features["$include?"](h))?K:P.$raise("Could not load "+h+" for some reason")}),m.$singleton_class().$attr_accessor("output"),I(m,"$prepare_console",function A(){var h=A.$$p||K,_,l=this,x=K,G=K;return ee.stdout==null&&(ee.stdout=K),ee.stderr==null&&(ee.stderr=K),ee.stdin==null&&(ee.stdin=K),A.$$p=null,function(){try{return l["$output="](""),x=C(new Map([[ee.stdout,V(function(a){return a==null&&(a=K),ee.stdout=a})],[ee.stderr,V(function(a){return a==null&&(a=K),ee.stderr=a})]])),y(l["$browser?"]())&&(Z(x,"each",[],function c(a,$){var t=c.$$s==null?this:c.$$s,e=K;return a==null&&(a=K),$==null&&($=K),e=a.$dup(),e["$write_proc="](Z(t,"proc",[],function r(i){var s=r.$$s==null?this:r.$$s;return i==null&&(i=K),s["$output="](p(s.$output(),i)),s["$output="](s.$output().$split(`
`).$last(30).$join(`
`)),y(i["$end_with?"](`
`))&&s["$output="](p(s.$output(),`
`)),a.$write_proc().$call(i)},{$$s:t})),e["$tty="](!1),$.$call(e)},{$$s:l}),G=ee.stdin.$read_proc(),ee.stdin["$read_proc="](function(c){var a=prompt(l.$output());return a!==null?a+`
`:K})),n.yieldX(h,[])}finally{Z(x,"each",[],function(a,$){return a==null&&(a=K),$==null&&($=K),$.$call(a)}),_=[G],Z(ee.stdin,"read_proc=",_),_[_.length-1],_=[""],Z(l,"output=",_),_[_.length-1]}}()}),I(m,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),B(u[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(A,h){var _=ie(A,h,"Silencer"),l=_.$$prototype;return l.collector=l.stderr=K,L(_,"$initialize",function(){var G=this;return ee.stderr==null&&(ee.stderr=K),G.stderr=ee.stderr}),L(_,"$silence",function x(){var G=x.$$p||K,c=this;return x.$$p=null,function(){try{return c.collector=H("StringIO").$new(),ee.stderr=c.collector,n.yieldX(G,[])}finally{ee.stderr=c.stderr}}()}),L(_,"$warnings",function(){var G=this;return G.collector.$string()})}(u[0],null)}(E[0],E)}(w[0],w),function(j,R,g){var E=ie(j,R,"Binding"),M=[E].concat(g),q=n.$r(M);return L(E,"$irb",function(){try{var u=z("return"),d=this,A=K;return H(Y,"IRB").$ensure_loaded("opal-replutils"),A=H(H(Y,"IRB"),"Silencer").$new(),Z(H(Y,"IRB"),"prepare_console",[],function h(){var _=h.$$s==null?this:h.$$s;return function(){try{var l=z("break");return Z(_,"loop",[],function x(){var G=x.$$s==null?this:x.$$s,c=K,a=K,$=K,t=K,e=K;G.$print(">> "),c=G.$gets(),y(c)||l.$throw(K,x.$$is_lambda),a="",y(H(Y,"IRB")["$browser?"]())&&G.$puts(c),y(c["$start_with?"]("ls "))?(a=c["$[]"](te(3,-1,!1)),$="ls"):W(c,`ls
`)?(a="self",$="ls"):y(c["$start_with?"]("show "))?(a=c["$[]"](te(5,-1,!1)),$="show"):(a=c,$="inspect"),t=K;do{try{Z(A,"silence",[],function(){return t=n.compile(a,{irb:!0})})}catch(r){if(n.rescue(r,[q("SyntaxError")])){e=r;try{if(y(H(H(Y,"IRB"),"LINEBREAKS")["$include?"](e.$message()))){G.$print(".. "),c=G.$gets(),y(c)||u.$throw(K,x.$$is_lambda),y(H(Y,"IRB")["$browser?"]())&&G.$puts(c),a=p(a,c);continue}else y(A.$warnings()["$empty?"]())?G.$warn(e.$full_message()):G.$warn(A.$warnings())}finally{n.pop_exception(r)}}else throw r}break}while(!0);return W($,"show")&&(G.$puts(t),u.$throw(K,x.$$is_lambda)),G.$puts(H("REPLUtils").$eval_and_print(t,$,!1,G))},{$$s:_,$$ret:u})}catch(x){if(x===l)return x.$v;throw x}finally{l.is_orphan=!0}}()},{$$s:d})}catch(h){if(h===u)return h.$v;throw h}finally{u.is_orphan=!0}})}("::",null,w),n.irb=function(j){H("Binding").$new(j).$irb()},n.load_parser=function(){n.Opal.IRB.$ensure_loaded("opal-parser")},typeof n.eval>"u"&&(n.eval=function(j){return n.load_parser(),n.eval(j)}),typeof n.compile>"u"&&(n.compile=function(j,R){return n.load_parser(),n.compile(j,R)})};Opal.modules.opal=function(n){var k=n.Object;return n.nil,n.add_stubs("require,autoload"),k.$require("opal/base"),k.$require("opal/mini"),k.$require("corelib/kernel/format"),k.$require("corelib/string/encoding"),k.$autoload("Math","corelib/math"),k.$require("corelib/complex/base"),k.$autoload("Complex","corelib/complex"),k.$require("corelib/rational/base"),k.$autoload("Rational","corelib/rational"),k.$require("corelib/time"),k.$autoload("Struct","corelib/struct"),k.$autoload("Set","corelib/set"),k.$autoload("Dir","corelib/dir"),k.$autoload("File","corelib/file"),k.$require("corelib/process/base"),k.$autoload("Process","corelib/process"),k.$autoload("Random","corelib/random"),k.$require("corelib/unsupported"),k.$require("corelib/binding"),k.$require("corelib/irb")};Opal.modules["js/proxy"]=function(n){var k=n.module,y=n.truthy,P=n.def,I=n.klass,ee=n.const_set,V=n.slice,C=n.range,Z=n.send,p=n.to_a,B=n.gvars,ie=n.top,L=[],Y=n.nil;return n.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),ie.$require("opal"),ie.$require("native"),function(te,W){var z=k(te,"JS"),w=[z].concat(W),K=n.$r(w);return function(H,j){var R=k(H,"Helpers"),g=[R].concat(j),E=n.$r(g);return P(R,"$wrap_result",function(q){return y(q&&typeof q.then=="function")?E("Promise").$new(q):y(typeof q=="object"&&q!==null)?E("Proxy").$new(q):q}),P(R,"$native_methods",function(){var q=this,m=Y;return q.native_methods==null&&(q.native_methods=Y),q.native_methods=function(){if(y(m=q.native_methods))return m;{let u=q.$to_n();const d=new Set;for(;u!==null;){for(const A of Reflect.ownKeys(u)){const h=A.toString(),_=q.$to_rb_name(h);typeof A!="symbol"&&h!==_&&d.add(_),d.add(h)}u=Object.getPrototypeOf(u)}return Array.from(d)}}()})}(w[0],w),function(H,j,R){var g=I(H,j,"Proxy"),E=[g].concat(R),M=n.$r(E);return g.$include(M("Enumerable")),g.$include(M("Helpers")),g.$attr_accessor("native"),ee(E[0],"IRREGULARS",["html","url","uri"]),P(g,"$initialize",function(m){var u=this;return u.native=u.$Native(m)}),P(g,"$method_missing",function q(m,u){var d=q.$$p||Y,A,h,_,l=this,x=Y,G=Y,c=Y,a=Y,$=Y,t=Y;return q.$$p=null,A=V(arguments,1),h=A,x=l.$to_js_name(m),y(l["$existing_property?"](x))||y(x["$end_with?"]("="))||l.$raise(M("NoMethodError"),"undefined method `"+m+"` for "+l),y(x["$end_with?"]("="))?(G=x["$[]"](C(0,-2,!1)),_=[G,h.$first()],Z(l.$native(),"[]=",_),_[_.length-1]):(c=l.$native()["$[]"](x),y(typeof c=="function")?(a=h.$dup(),y(d)&&($=function(){let e=Array.prototype.slice.call(arguments);return Z(d,"call",[l.$class().$new(this)].concat(p(e)))},a["$<<"]($)),t=c.apply(l.$to_n(),a.$to_n()),l.$wrap_result(t)):y(typeof c=="object"&&c!==null)?l.$wrap_result(c):c)},-2),P(g,"$to_str",function(){var m=this;return m.$to_n().toString()}),P(g,"$respond_to_missing?",function(m,u){return!0},-2),P(g,"$each",function q(){var m=q.$$p||Y,u=this,d=Y;return q.$$p=null,y(u["$respond_to?"]("length"))?(d=u.$length(),Z(n.Range.$new(0,d,!0),"each",[],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=Y),n.yield1(m,_["$[]"](h))},{$$s:u})):u.$enum_for("each")}),P(g,"$[]",function(m){var u=this,d=Y;return d=u.$native()["$[]"](m),u.$wrap_result(d)}),P(g,"$[]=",function(m,u){var d=this;return d.$native()["$[]="](m,u),d.$wrap_result(d.$native())}),P(g,"$to_n",function(){var m=this;return m.$native().$to_n()}),P(g,"$length",function(){var m=this;return m.$native().$length()}),g.$private(),P(g,"$to_js_name",function(m){return Z(m.$to_s().$split("_").$map(),"with_index",[],function(d,A){return d==null&&(d=Y),A==null&&(A=Y),y(M("IRREGULARS")["$include?"](d.$gsub("=","").$downcase()))?d.$upcase():y(A["$zero?"]())?d:d.$capitalize()}).$join()}),P(g,"$to_rb_name",function(m){return Z(m.$to_s(),"gsub",[/([A-Z]+)/],function(){var d;return"_"+((d=B["~"])===Y?Y:d["$[]"](1)).$downcase()}).$sub(/^_/,"")}),P(g,"$existing_property?",function(m){var u=this;return m in u.$to_n()})}(w[0],null,w),function(H,j,R){var g=I(H,j,"Promise"),E=[g].concat(R),M=n.$r(E);return g.$include(M("Helpers")),P(g,"$then",function q(){var m=q.$$p||Y,u,d=this,A=Y;return q.$$p=null,A=function(h){var _=m.$call(d.$wrap_result(h));return _&&typeof _.then=="function"?_:_&&typeof _.to_n=="function"?_.to_n():_},u=[d.$to_n().then(A)],Z(d,"native=",u),u[u.length-1]}),P(g,"$catch",function q(){var m=q.$$p||Y,u,d=this,A=Y;return q.$$p=null,A=function(h){var _=m.$call(d.$wrap_result(h));return _&&typeof _.then=="function"?_:_&&typeof _.to_n=="function"?_.to_n():_},u=[d.$to_n().catch(A)],Z(d,"native=",u),u[u.length-1]})}(w[0],K("Proxy"),w)}(L[0],L)};Opal.modules["opal_stimulus/stimulus_controller"]=function(n){var k=n.klass,y=n.const_set,P=n.Opal,I=n.defs,ee=n.truthy,V=n.send,C=n.gvars,Z=n.return_val,p=n.thrower,B=n.rb_plus,ie=n.eqeqeq,L=n.def,Y=n.top,te=[],W=n.nil,z=n.$$$;return n.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),Y.$require("opal"),Y.$require("native"),Y.$require("js/proxy"),function(w,K,H){var j=k(w,K,"StimulusController"),R=[j].concat(H),g=n.$r(R),E=j.$$prototype;return E.window=E.document=W,y(R[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),y(R[0],"DEFAULT_GETTERS",["element"]),I(j,"$inherited",function(q){return P.$bridge(q.$stimulus_controller(),q)}),I(j,"$stimulus_controller",function(){var q=this;return q.stimulus_controller==null&&(q.stimulus_controller=W),ee(q.stimulus_controller)||(q.stimulus_controller=class extends Controller{}),q.stimulus_controller}),I(j,"$stimulus_name",function(){var q=this;return q.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),I(j,"$method_added",function(q){var m=this;if(ee(g("DEFAULT_GETTERS")["$include?"](q)))return W;m.$stimulus_controller().prototype[q]=function(...u){try{var d=u.map(function(A){return A&&typeof A=="object"&&!A.$$class?n.JS.Proxy.$new(A):A});return this["$"+q].apply(this,d)}catch(A){console.error("Uncaught",A)}}}),I(j,"$to_ruby_name",function(q){return V(q.$to_s(),"gsub",[/([A-Z]+)/],function(){var u;return"_"+((u=C["~"])===W?W:u["$[]"](1)).$downcase()}).$sub(/^_/,"")}),I(j,"$register_all!",function(){try{var q=p("return"),m=this;return V(m.$subclasses(),"each",[],function u(d){return d==null&&(d=W),V(d,"define_method",["dummy"],Z(W)),ee(application.controllers["$include?"](d.$stimulus_name()))&&q.$throw(W,u.$$is_lambda),application.register(d.$stimulus_name(),d.$stimulus_controller())},{$$ret:q})}catch(u){if(u===q)return u.$v;throw u}finally{q.is_orphan=!0}}),I(j,"$targets=",function(q){var m=this;return q==null&&(q=[]),m.$stimulus_controller().targets=q,V(q,"each",[],function u(d){var A=u.$$s==null?this:u.$$s,h=W,_=W,l=W,x=W,G=W,c=W;d==null&&(d=W),h=d.$to_s(),_=A.$to_ruby_name(d),V(A,"define_method",[B(_,"_target")],function(){return z(g("JS"),"Proxy").$new(this[B(h,"Target")])}),V(A,"define_method",[B(_,"_targets")],function(){return V(this[B(h,"Targets")],"map",[],function(t){return t==null&&(t=W),z(g("JS"),"Proxy").$new(t)})}),V(A,"define_method",[B(B("has_",_),"_target")],function(){return this[B(B("has",h.$capitalize()),"Target")]}),l=B(_,"_target_connected"),x=B(h,"TargetConnected"),A.$stimulus_controller().prototype[x]=function(){if(this["$respond_to?"]&&this["$respond_to?"](l))return this["$"+l]()},G=B(_,"_target_disconnected"),c=B(h,"TargetDisconnected"),A.$stimulus_controller().prototype[c]=function(){if(this["$respond_to?"]&&this["$respond_to?"](G))return this["$"+G]()}},{$$s:m})},-1),I(j,"$outlets=",function(q){var m=this;return q==null&&(q=[]),m.$stimulus_controller().outlets=q,V(q,"each",[],function u(d){var A=u.$$s==null?this:u.$$s,h=W,_=W,l=W,x=W,G=W,c=W;d==null&&(d=W),h=d.$to_s(),_=A.$to_ruby_name(d),V(A,"define_method",[B(_,"_outlet")],function(){return this[B(h,"Outlet")]}),V(A,"define_method",[B(_,"_outlets")],function(){return this[B(h,"Outlets")]}),V(A,"define_method",[B(B("has_",_),"_outlet")],function(){return this[B(B("has",h.$capitalize()),"Outlet")]}),l=B(_,"_outlet_connected"),x=B(h,"OutletConnected"),A.$stimulus_controller().prototype[x]=function(){if(this["$respond_to?"]&&this["$respond_to?"](l))return this["$"+l]()},G=B(_,"_outlet_disconnected"),c=B(h,"OutletDisconnected"),A.$stimulus_controller().prototype[c]=function(){if(this["$respond_to?"]&&this["$respond_to?"](G))return this["$"+G]()}},{$$s:m})},-1),I(j,"$values=",function(q){var m=this,u=W;return q==null&&(q=new Map),u=new Map,V(q,"each",[],function d(A,h){var _=d.$$s==null?this:d.$$s,l=W,x=W,G=W,c=W;A==null&&(A=W),h==null&&(h=W),A=_.$to_ruby_name(A),l=ie("string",x=h)?String:ie("number",x)?Number:ie("boolean",x)?Boolean:ie("array",x)?Array:ie("object",x)?Object:_.$raise(g("ArgumentError"),"Unsupported value type: "+h+", please use :string, :number, :boolean, :array, or :object"),u["$[]="](A,l),_.$stimulus_controller().values=u.$to_n(),V(_,"define_method",[B(A,"_value")],function a(){var $=a.$$s==null?this:a.$$s;return $.$Native(this[B(A,"Value")])},{$$s:_}),V(_,"define_method",[B(A,"_value=")],function a($){var t=a.$$s==null?this:a.$$s;return $==null&&($=W),t.$Native(this[B(A,"Value")]=$)},{$$s:_}),V(_,"define_method",["has_"+A],function(){return this[B(B("has",A.$to_s().$capitalize()),"Value")]}),G=""+A+"_value_changed",c=""+A+"ValueChanged",_.$stimulus_controller().prototype[c]=function(a,$){if(h["$=="]("object")&&(a=JSON.stringify(a),$=JSON.stringify($)),this["$respond_to?"]&&this["$respond_to?"](G))return this["$"+G](a,$)}},{$$s:m})},-1),I(j,"$classes=",function(q){var m=this;return q==null&&(q=[]),m.$stimulus_controller().classes=q,V(q,"each",[],function u(d){var A=u.$$s==null?this:u.$$s,h=W,_=W;return d==null&&(d=W),h=d.$to_s(),_=A.$to_ruby_name(d),V(A,"define_method",[""+_+"_class"],function(){return this[B(h,"Class")]}),V(A,"define_method",[""+_+"_classes"],function(){return this[B(h,"Classes")]}),V(A,"define_method",["has_"+_+"_class"],function(){return this[B(B("has",h.$capitalize()),"Class")]})},{$$s:m})},-1),L(j,"$element",function(){return z(g("JS"),"Proxy").$new(this.element)}),L(j,"$window",function(){var q=this,m=W;return C.$==null&&(C.$=W),q.window=ee(m=q.window)?m:z(g("JS"),"Proxy").$new(C.$.$window())}),L(j,"$document",function(){var q=this,m=W;return C.$==null&&(C.$=W),q.document=ee(m=q.document)?m:z(g("JS"),"Proxy").$new(C.$.$document())})}(te[0],Controller,te)};Opal.modules["opal_vite/concerns/v1/stimulus_helpers"]=function(n){var k=n.module,y=n.def,P=n.truthy,I=n.eqeq,ee=n.send,V=n.slice,C=n.ensure_kwargs,Z=n.get_kwarg,p=n.hash_get,B=n.rb_plus,ie=n.rb_minus,L=n.to_a,Y=n.range,te=n.const_set,W=[],z=n.$r(W),w=n.nil,K=n.$$$;return n.add_stubs("camelize,has_target?,target_set_value,target_set_html,set_target_style,get_target_style,==,show_target,hide_target,call,body_style,to_n,storage_get,is_a?,parse_int,event_data,to_native_element,Native,map,to_a,js_timestamp,is_nan?,parse_float,to_s,empty?,respond_to?,fetch_json_promise,fetch_json_safe,js_then,js_catch,console_error,set_stimulus_value,+,stimulus_value,-,!,get_class,get_classes,has_outlet?,get_outlet,js_call_on,each,get_outlets,nil?,stimulus_dispatch,action_param,private,include?,upcase,[],downcase,split,join,to_proc,first"),function(H,j){var R=k(H,"OpalVite"),g=[R].concat(j);return function(E,M){var q=k(E,"Concerns"),m=[q].concat(M);return function(u,d){var A=k(u,"V1"),h=[A].concat(d);return function(_,l){var x=k(_,"StimulusHelpers"),G=[x].concat(l),c=n.$r(G);return y(x,"$has_target?",function($){var t=this,e=w;return e="has"+t.$camelize($)+"Target",this[e]}),y(x,"$get_target",function($){var t=this,e=w;return P(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e]):w}),y(x,"$get_targets",function($){var t=this,e=w;return e=""+t.$camelize($,!1)+"Targets",Array.from(this[e]||[])}),y(x,"$target_value",function($){var t=this,e=w;return P(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].value):w}),y(x,"$target_set_value",function($,t){var e=this,r=w;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].value=t):w}),y(x,"$target_html",function($){var t=this,e=w;return P(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].innerHTML):w}),y(x,"$target_set_html",function($,t){var e=this,r=w;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].innerHTML=t):w}),y(x,"$target_text",function($){var t=this,e=w;return P(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].textContent):w}),y(x,"$target_set_text",function($,t){var e=this,r=w;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].textContent=t):w}),y(x,"$target_data",function($,t){var e=this,r=w;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].getAttribute("data-"+t)):w}),y(x,"$target_set_data",function($,t,e){var r=this,i=w;return P(r["$has_target?"]($))?(i=""+r.$camelize($,!1)+"Target",this[i].setAttribute("data-"+t,e)):w}),y(x,"$target_clear",function($){var t=this;return t.$target_set_value($,"")}),y(x,"$target_clear_html",function($){var t=this;return t.$target_set_html($,"")}),y(x,"$set_target_style",function($,t,e){var r=this,i=w;return P(r["$has_target?"]($))?(i=""+r.$camelize($,!1)+"Target",this[i].style[t]=e):w}),y(x,"$get_target_style",function($,t){var e=this,r=w;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].style[t]):w}),y(x,"$show_target",function($){var t=this;return t.$set_target_style($,"display","")}),y(x,"$hide_target",function($){var t=this;return t.$set_target_style($,"display","none")}),y(x,"$toggle_target_visibility",function($){var t=this,e=w;return e=t.$get_target_style($,"display"),I(e,"none")?t.$show_target($):t.$hide_target($)}),y(x,"$add_target_class",function($,t){var e=this,r=w;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.add(t)):w}),y(x,"$remove_target_class",function($,t){var e=this,r=w;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.remove(t)):w}),y(x,"$toggle_target_class",function($,t){var e=this,r=w;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.toggle(t)):w}),y(x,"$has_target_class?",function($,t){var e=this,r=w;return P(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.contains(t)):!1}),y(x,"$js_timestamp",function(){return Date.now()}),y(x,"$js_iso_date",function(){return new Date().toISOString()}),y(x,"$js_date",function($){return $==null&&($=w),P($)?new Date($):new Date},-1),y(x,"$js_regexp",function($,t){return t==null&&(t=""),new RegExp($,t)},-2),y(x,"$js_regexp_test",function($,t,e){return e==null&&(e=""),new RegExp($,e).test(t)},-3),y(x,"$set_timeout",function a($){var t=a.$$p||w;return a.$$p=null,setTimeout(function(){t.$call()},$)}),y(x,"$set_interval",function a($){var t=a.$$p||w;return a.$$p=null,setInterval(function(){t.$call()},$)}),y(x,"$clear_timeout",function($){return clearTimeout($)}),y(x,"$clear_interval",function($){return clearInterval($)}),y(x,"$body_style",function($,t){return document.body.style[$]=t}),y(x,"$lock_body_scroll",function(){var $=this;return $.$body_style("overflow","hidden")}),y(x,"$unlock_body_scroll",function(){var $=this;return $.$body_style("overflow","")}),y(x,"$js_array",function(){return[]}),y(x,"$js_array_push",function($,t){return $.push(t.$to_n())}),y(x,"$js_array_length",function($){return $.length}),y(x,"$js_array_at",function($,t){return $[t]}),y(x,"$storage_get",function($){return localStorage.getItem($)}),y(x,"$storage_set",function($,t){return localStorage.setItem($,t)}),y(x,"$storage_remove",function($){return localStorage.removeItem($)}),y(x,"$storage_get_json",function($,t){var e=this,r=w;return t==null&&(t=w),r=e.$storage_get($),P(r===null)?t:JSON.parse(r)},-2),y(x,"$storage_set_json",function($,t){return localStorage.setItem($,JSON.stringify(t.$to_n()))}),y(x,"$dispatch_window_event",function($,t){var e=w;t==null&&(t=new Map),e=P(t["$is_a?"](c("Hash")))?t.$to_n():t;const r=new CustomEvent($,{detail:e});window.dispatchEvent(r)},-2),y(x,"$dispatch_event",function($,t){var e=w;t==null&&(t=new Map),e=P(t["$is_a?"](c("Hash")))?t.$to_n():t;const r=new CustomEvent($,{detail:e});this.element.dispatchEvent(r)},-2),y(x,"$on_window_event",function a($){var t=a.$$p||w;return a.$$p=null,window.addEventListener($,t)}),y(x,"$off_window_event",function($,t){return window.removeEventListener($,t)}),y(x,"$on_document_event",function a($){var t=a.$$p||w;return a.$$p=null,document.addEventListener($,t)}),y(x,"$on_dom_ready",function a(){var $=a.$$p||w;return a.$$p=null,document.addEventListener("DOMContentLoaded",$)}),y(x,"$on_element_event",function a($,t){var e=a.$$p||w;return a.$$p=null,$.addEventListener(t,e)}),y(x,"$off_element_event",function($,t,e){return $.removeEventListener(t,e)}),y(x,"$on_controller_event",function a($){var t=a.$$p||w;return a.$$p=null,this.element.addEventListener($,t)}),y(x,"$event_target",function(){return event.currentTarget}),y(x,"$event_data",function($){return event.currentTarget.getAttribute("data-"+$)}),y(x,"$event_data_int",function($){var t=this;return t.$parse_int(t.$event_data($))}),y(x,"$prevent_default",function(){return event.preventDefault()}),y(x,"$event_key",function(){return event.key}),y(x,"$to_native_element",function($){return P(typeof $.$to_n=="function")?$.$to_n():$}),y(x,"$add_class",function($,t){var e=this,r=w;return r=e.$to_native_element($),r.classList.add(t)}),y(x,"$remove_class",function($,t){var e=this,r=w;return r=e.$to_native_element($),r.classList.remove(t)}),y(x,"$toggle_class",function($,t){var e=this,r=w;return r=e.$to_native_element($),r.classList.toggle(t)}),y(x,"$has_class?",function($,t){var e=this,r=w;return r=e.$to_native_element($),r.classList.contains(t)}),y(x,"$set_attr",function($,t,e){var r=this,i=w;return i=r.$to_native_element($),i.setAttribute(t,e)}),y(x,"$get_attr",function($,t){var e=this,r=w;return r=e.$to_native_element($),r.getAttribute(t)}),y(x,"$remove_attr",function($,t){var e=this,r=w;return r=e.$to_native_element($),r.removeAttribute(t)}),y(x,"$set_style",function($,t,e){var r=this,i=w;return i=r.$to_native_element($),i.style[t]=e}),y(x,"$set_html",function($,t){var e=this,r=w;return r=e.$to_native_element($),r.innerHTML=t}),y(x,"$set_text",function($,t){var e=this,r=w;return r=e.$to_native_element($),r.textContent=t}),y(x,"$get_value",function($){var t=this,e=w;return e=t.$to_native_element($),e.value}),y(x,"$set_value",function($,t){var e=this,r=w;return r=e.$to_native_element($),r.value=t}),y(x,"$focus",function($){var t=this,e=w;return e=t.$to_native_element($),e.focus()}),y(x,"$has_attr?",function($,t){var e=this,r=w;return r=e.$to_native_element($),r.hasAttribute(t)}),y(x,"$create_element",function($){return document.createElement($)}),y(x,"$append_child",function($,t){var e=this,r=w,i=w;return r=e.$to_native_element($),i=e.$to_native_element(t),r.appendChild(i)}),y(x,"$remove_element",function($){var t=this,e=w;return e=t.$to_native_element($),e.remove()}),y(x,"$next_sibling",function($){var t=this,e=w;return e=t.$to_native_element($),e.nextElementSibling}),y(x,"$prev_sibling",function($){var t=this,e=w;return e=t.$to_native_element($),e.previousElementSibling}),y(x,"$parent",function($){var t=this,e=w;return e=t.$to_native_element($),e.parentElement}),y(x,"$query",function($){var t=this,e=w;return e=document.querySelector($),P(e===null)?w:t.$Native(e)}),y(x,"$query_all",function($){var t=this,e=w;return e=Array.from(document.querySelectorAll($)),ee(t.$Native(e).$to_a(),"map",[],function r(i){var s=r.$$s==null?this:r.$$s;return i==null&&(i=w),s.$Native(i)},{$$s:t})}),y(x,"$query_element",function($){var t=this,e=w;return e=this.element.querySelector($),P(e===null)?w:t.$Native(e)}),y(x,"$query_all_element",function($){var t=this,e=w;return e=Array.from(this.element.querySelectorAll($)),ee(t.$Native(e).$to_a(),"map",[],function r(i){var s=r.$$s==null?this:r.$$s;return i==null&&(i=w),s.$Native(i)},{$$s:t})}),y(x,"$doc_root",function(){return document.documentElement}),y(x,"$set_root_attr",function($,t){return document.documentElement.setAttribute($,t)}),y(x,"$get_root_attr",function($){return document.documentElement.getAttribute($)}),y(x,"$clone_template",function($){var t=this,e=w;return e=""+t.$camelize($,!1)+"Target",this[e].content.cloneNode(!0)}),y(x,"$template_first_child",function($){return $.firstElementChild}),y(x,"$element_add_class",function($){return this.element.classList.add($)}),y(x,"$element_remove_class",function($){return this.element.classList.remove($)}),y(x,"$element_toggle_class",function($){return this.element.classList.toggle($)}),y(x,"$generate_id",function(){var $=this;return $.$js_timestamp()}),y(x,"$target_focus",function($){var t=this,e=w;return P(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].focus()):w}),y(x,"$target_blur",function($){var t=this,e=w;return P(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].blur()):w}),y(x,"$parse_int",function($,t){return t==null&&(t=10),parseInt($,t)},-2),y(x,"$parse_float",function($){return parseFloat($)}),y(x,"$is_nan?",function($){return Number.isNaN($)}),y(x,"$parse_int_or",function($,t){var e=this,r=w;return t==null&&(t=0),r=e.$parse_int($),P(e["$is_nan?"](r))?t:r},-2),y(x,"$parse_float_or",function($,t){var e=this,r=w;return t==null&&(t=0),r=e.$parse_float($),P(e["$is_nan?"](r))?t:r},-2),y(x,"$js_prop",function($){return this[$.$to_s()]}),y(x,"$js_set_prop",function($,t){return this[$.$to_s()]=t}),y(x,"$js_has_prop?",function($){return!!this[$.$to_s()]}),y(x,"$js_call",function($,t){var e,r,i=w;return e=V(arguments,1),r=e,P(r["$empty?"]())?this[$.$to_s()]():(i=ee(r,"map",[],function(o){return o==null&&(o=w),P(o["$respond_to?"]("to_n"))?o.$to_n():o}),this[$.$to_s()].apply(this,i))},-2),y(x,"$js_call_on",function($,t,e){var r,i,s=w;return r=V(arguments,2),i=r,P(i["$empty?"]())?$[t.$to_s()]():(s=ee(i,"map",[],function(v){return v==null&&(v=w),P(v["$respond_to?"]("to_n"))?v.$to_n():v}),$[t.$to_s()].apply($,s))},-3),y(x,"$js_get",function($,t){return $[t.$to_s()]}),y(x,"$js_set",function($,t,e){return $[t.$to_s()]=e}),y(x,"$json_parse",function($){return JSON.parse($)}),y(x,"$json_stringify",function($){var t=w;return t=P($["$respond_to?"]("to_n"))?$.$to_n():$,JSON.stringify(t)}),y(x,"$console_log",function($){var t,e;return t=V(arguments),e=t,console.log.apply(console,e)},-1),y(x,"$console_warn",function($){var t,e;return t=V(arguments),e=t,console.warn.apply(console,e)},-1),y(x,"$console_error",function($){var t,e;return t=V(arguments),e=t,console.error.apply(console,e)},-1),y(x,"$js_string_char_at",function($,t){return $.charAt(t)}),y(x,"$js_substring",function($,t,e){return e==null&&(e=w),P(e)?$.substring(t,e):$.substring(t)},-3),y(x,"$js_split",function($,t){return $.split(t)}),y(x,"$js_trim",function($){return $.trim()}),y(x,"$js_includes?",function($,t){return $.includes(t)}),y(x,"$js_equals?",function($,t){return $===t}),y(x,"$js_loose_equals?",function($,t){return $==t}),y(x,"$js_random",function(){return Math.random()}),y(x,"$js_min",function($,t){return Math.min($,t)}),y(x,"$js_max",function($,t){return Math.max($,t)}),y(x,"$js_abs",function($){return Math.abs($)}),y(x,"$js_round",function($){return Math.round($)}),y(x,"$js_ceil",function($){return Math.ceil($)}),y(x,"$js_to_fixed",function($,t){return $.toFixed(t)}),y(x,"$random_int",function($){return Math.floor(Math.random()*$)}),y(x,"$js_floor",function($){return Math.floor($)}),y(x,"$js_global_exists?",function($){return typeof window[$]<"u"}),y(x,"$js_global",function($){return window[$]}),y(x,"$js_new",function($,t){var e,r,i=w;return e=V(arguments,1),r=e,P(r["$empty?"]())?new $:(i=ee(r,"map",[],function(o){return o==null&&(o=w),o!=null&&typeof o.$to_n=="function"?o.$to_n():o}),Reflect.construct($,i))},-2),y(x,"$js_define_method",function a($){var t=a.$$p||w;return a.$$p=null,this[$.$to_s()]=t}),y(x,"$js_define_method_on",function a($,t){var e=a.$$p||w;return a.$$p=null,$[t.$to_s()]=e}),y(x,"$js_length",function($){return $.length}),y(x,"$js_map",function a($){var t=a.$$p||w;return a.$$p=null,$.map(t)}),y(x,"$js_filter",function a($){var t=a.$$p||w;return a.$$p=null,$.filter(t)}),y(x,"$js_reduce",function a($,t){var e=a.$$p||w;return a.$$p=null,$.reduce(e,t)}),y(x,"$js_each",function a($){var t=a.$$p||w;return a.$$p=null,$.forEach(t)}),y(x,"$js_slice",function($,t,e){return e==null&&(e=w),P(e)?$.slice(t,e):$.slice(t)},-3),y(x,"$js_object",function(){return{}}),y(x,"$js_keys",function($){return Object.keys($)}),y(x,"$js_values",function($){return Object.values($)}),y(x,"$js_entries",function($){return Object.entries($)}),y(x,"$js_unique_count",function($){return new Set($).size}),y(x,"$js_fetch",function($){return fetch($)}),y(x,"$fetch_json",function a($){var t=a.$$p||w;a.$$p=null,fetch($).then(e=>e.json()).then(e=>t.$call(e)).catch(e=>console.error("Fetch error:",e))}),y(x,"$fetch_json_promise",function($){return fetch($).then(t=>t.json())}),y(x,"$fetch_json_safe",function($){return fetch($).then(function(t){if(!t.ok)throw new Error("Network response was not ok: "+t.status);return t.json()})}),y(x,"$fetch_all_json",function($){var t=this,e=w;return e=ee($,"map",[],function r(i){var s=r.$$s==null?this:r.$$s;return i==null&&(i=w),s.$fetch_json_promise(i)},{$$s:t}),Promise.all(e)}),y(x,"$fetch_json_with_handlers",function($,t){var e,r,i=this,s=w;return t=C(t),e=Z(t,"on_success"),r=p(t,"on_error"),r==null&&(r=w),s=i.$fetch_json_safe($),s=ee(i,"js_then",[s],function(v){return v==null&&(v=w),e.$call(v)}),P(r)?ee(i,"js_catch",[s],function(v){return v==null&&(v=w),r.$call(v)}):ee(i,"js_catch",[s],function o(v){var S=o.$$s==null?this:o.$$s;return v==null&&(v=w),S.$console_error("Fetch error:",v)},{$$s:i})}),y(x,"$promise_all",function($){return Promise.all($)}),y(x,"$promise_race",function($){return Promise.race($)}),y(x,"$promise_resolve",function($){var t=w;return t=P($["$respond_to?"]("to_n"))?$.$to_n():$,Promise.resolve(t)}),y(x,"$promise_reject",function($){return Promise.reject($)}),y(x,"$js_then",function a($){var t=a.$$p||w;return a.$$p=null,$.then(t)}),y(x,"$js_catch",function a($){var t=a.$$p||w;return a.$$p=null,$.catch(t)}),y(x,"$js_finally",function a($){var t=a.$$p||w;return a.$$p=null,$.finally(t)}),y(x,"$stimulus_value",function($){var t=this,e=w;return e=""+t.$camelize($,!1)+"Value",this[e]}),y(x,"$set_stimulus_value",function($,t){var e=this,r=w,i=w;return r=""+e.$camelize($,!1)+"Value",i=P(t["$respond_to?"]("to_n"))?t.$to_n():t,this[r]=i}),y(x,"$has_stimulus_value?",function($){var t=this,e=w;return e="has"+t.$camelize($)+"Value",this[e]}),y(x,"$increment_stimulus_value",function($,t){var e=this;return t==null&&(t=1),e.$set_stimulus_value($,B(e.$stimulus_value($),t))},-2),y(x,"$decrement_stimulus_value",function($,t){var e=this;return t==null&&(t=1),e.$set_stimulus_value($,ie(e.$stimulus_value($),t))},-2),y(x,"$toggle_stimulus_value",function($){var t=this;return t.$set_stimulus_value($,t.$stimulus_value($)["$!"]())}),y(x,"$get_class",function($){var t=this,e=w;return e=""+t.$camelize($,!1)+"Class",this[e]}),y(x,"$get_classes",function($){var t=this,e=w;return e=""+t.$camelize($,!1)+"Classes",Array.from(this[e]||[])}),y(x,"$has_class_definition?",function($){var t=this,e=w;return e="has"+t.$camelize($)+"Class",this[e]}),y(x,"$apply_class",function($,t){var e=this,r=w,i=w;return r=e.$to_native_element($),i=e.$get_class(t),P(i)?r.classList.add(i):w}),y(x,"$apply_classes",function($,t){var e=this,r=w,i=w;return r=e.$to_native_element($),i=e.$get_classes(t),P(i)?r.classList.add(...i):w}),y(x,"$remove_applied_class",function($,t){var e=this,r=w,i=w;return r=e.$to_native_element($),i=e.$get_class(t),P(i)?r.classList.remove(i):w}),y(x,"$remove_applied_classes",function($,t){var e=this,r=w,i=w;return r=e.$to_native_element($),i=e.$get_classes(t),P(i)?r.classList.remove(...i):w}),y(x,"$has_outlet?",function($){var t=this,e=w;return e="has"+t.$camelize($)+"Outlet",this[e]}),y(x,"$get_outlet",function($){var t=this,e=w;return e=""+t.$camelize($,!1)+"Outlet",this[e]}),y(x,"$get_outlets",function($){var t=this,e=w;return e=""+t.$camelize($,!1)+"Outlets",Array.from(this[e]||[])}),y(x,"$get_outlet_element",function($){var t=this,e=w;return e=""+t.$camelize($,!1)+"OutletElement",this[e]}),y(x,"$get_outlet_elements",function($){var t=this,e=w;return e=""+t.$camelize($,!1)+"OutletElements",Array.from(this[e]||[])}),y(x,"$call_outlet",function($,t,e){var r,i,s=this,o=w;return r=V(arguments,2),i=r,P(s["$has_outlet?"]($))?(o=s.$get_outlet($),ee(s,"js_call_on",[o,t].concat(L(i)))):w},-3),y(x,"$call_all_outlets",function($,t,e){var r,i,s=this;return r=V(arguments,2),i=r,ee(s.$get_outlets($),"each",[],function o(v){var S=o.$$s==null?this:o.$$s;return v==null&&(v=w),ee(S,"js_call_on",[v,t].concat(L(i)))},{$$s:s})},-3),y(x,"$stimulus_dispatch",function($,t){var e,r,i,s,o,v=w,S=w;return t=C(t),e=p(t,"detail"),e==null&&(e=new Map),r=p(t,"target"),r==null&&(r=w),i=p(t,"prefix"),i==null&&(i=w),s=p(t,"bubbles"),s==null&&(s=!0),o=p(t,"cancelable"),o==null&&(o=!0),v=P(e["$respond_to?"]("to_n"))?e.$to_n():e,S={detail:v,bubbles:s,cancelable:o},P(r["$nil?"]())||(S.target=r),P(i["$nil?"]())||(S.prefix=i),this.dispatch($,S)},-2),y(x,"$stimulus_dispatch_confirm",function($,t){var e,r=this,i=w;return t=C(t),e=p(t,"detail"),e==null&&(e=new Map),i=r.$stimulus_dispatch($,new Map([["detail",e],["cancelable",!0]])),!i.defaultPrevented},-2),y(x,"$action_params",function(){return event.params||{}}),y(x,"$action_param",function($){return(event.params||{})[$.$to_s()]}),y(x,"$action_param_int",function($,t){var e=this,r=w,i=w;return t==null&&(t=0),r=e.$action_param($),i=e.$parse_int(r),P(e["$is_nan?"](i))?t:i},-2),y(x,"$action_param_bool",function($){var t=this,e=w;return e=t.$action_param($),!!e&&e!=="false"&&e!=="0"}),y(x,"$has_action_param?",function($){return(event.params||{}).hasOwnProperty($.$to_s())}),y(x,"$this_application",function(){return this.application}),y(x,"$this_identifier",function(){return this.identifier}),y(x,"$this_element",function(){return this.element}),y(x,"$get_controller",function($,t){var e=this,r=w;return r=e.$to_native_element($),this.application.getControllerForElementAndIdentifier(r,t)}),y(x,"$get_controllers",function($,t){var e=this,r=w;r=e.$to_native_element($),Array.from(r.querySelectorAll('[data-controller~="'+t+'"]')).map(i=>this.application.getControllerForElementAndIdentifier(i,t)).filter(i=>i!==null)}),y(x,"$this_scope",function(){return this.scope.element}),y(x,"$in_scope?",function($){var t=this,e=w;return e=t.$to_native_element($),this.element.contains(e)}),x.$private(),y(x,"$camelize",function($,t){var e=w,r=w;return t==null&&(t=!0),e=$.$to_s(),P(e["$include?"]("_"))?(r=e.$split("_"),P(t)?ee(r,"map",[],"capitalize".$to_proc()).$join():B([r.$first()],ee(r["$[]"](Y(1,-1,!1)),"map",[],"capitalize".$to_proc())).$join()):P(t)?B(e["$[]"](0).$upcase(),e["$[]"](Y(1,-1,!1)).$to_s()):B(e["$[]"](0).$downcase(),e["$[]"](Y(1,-1,!1)).$to_s())},-2)}(h[0],h)}(m[0],m)}(g[0],g)}(W[0],W),te(W[0],"StimulusHelpers",K(K(K(z("OpalVite"),"Concerns"),"V1"),"StimulusHelpers"))};Opal.modules["opal_vite/concerns/v1/js_proxy_ex"]=function(n){var k=n.module,y=n.truthy,P=n.def,I=n.send,ee=n.klass,V=n.assign_ivar,C=n.return_ivar,Z=n.slice,p=n.range,B=n.eqeq,ie=n.lambda,L=n.to_a,Y=n.eqeqeq,te=n.rb_plus,W=n.defs,z=n.const_set,w=[],K=n.$r(w),H=n.nil,j=n.$$$;return n.add_stubs("new,to_n,nil?,respond_to?,times,<<,to_s,snake_to_camel,wrap_result,end_with?,[],!,==,call,map,===,length,enum_for,private,upcase,split,+,join,to_proc,test,js_array_to_ruby"),function(R,g){var E=k(R,"OpalVite"),M=[E].concat(g);return function(q,m){var u=k(q,"Concerns"),d=[u].concat(m);return function(A,h){var _=k(A,"V1"),l=[_].concat(h);return function(x,G){var c=k(x,"JsProxyEx"),a=[c].concat(G),$=n.$r(a);return P(c,"$local_storage",function(){var e=this,r=H;return e.local_storage==null&&(e.local_storage=H),e.local_storage=y(r=e.local_storage)?r:$("JsObject").$new(localStorage)}),P(c,"$session_storage",function(){var e=this,r=H;return e.session_storage==null&&(e.session_storage=H),e.session_storage=y(r=e.session_storage)?r:$("JsObject").$new(sessionStorage)}),P(c,"$js_json",function(){var e=this,r=H;return e.js_json==null&&(e.js_json=H),e.js_json=y(r=e.js_json)?r:$("JsonWrapper").$new()}),P(c,"$js_date",function(){return $("DateWrapper")}),P(c,"$js_console",function(){var e=this,r=H;return e.js_console==null&&(e.js_console=H),e.js_console=y(r=e.js_console)?r:$("JsObject").$new(console)}),P(c,"$new_event",function(e,r){return r==null&&(r=new Map),$("JsObject").$new(new Event(e,r.$to_n()))},-2),P(c,"$new_custom_event",function(e,r){return r==null&&(r=new Map),$("JsObject").$new(new CustomEvent(e,{detail:r.$to_n()}))},-2),P(c,"$new_url",function(e){return $("JsObject").$new(new URL(e))}),P(c,"$new_regexp",function(e,r){return r==null&&(r=""),$("RegExpWrapper").$new(e,r)},-2),P(c,"$new_date",function(e){return e==null&&(e=H),y(e)?$("JsObject").$new(new Date(e)):$("JsObject").$new(new Date)},-1),P(c,"$date_now",function(){return Date.now()}),P(c,"$wrap_js",function(e){var r=H;return y(e["$nil?"]())?H:(r=y(e["$respond_to?"]("to_n"))?e.$to_n():e,$("JsObject").$new(r))}),P(c,"$js_array_to_ruby",function(e){var r=H,i=H;return r=[],i=e.length,I(i,"times",[],function(o){var v=H;return o==null&&(o=H),v=e[o],r["$<<"]($("JsObject").$new(v))}),r}),P(c,"$new_js_array",function(){return $("JsObject").$new([])}),function(t,e,r){var i=ee(t,e,"JsObject"),s=[i].concat(r),o=n.$r(s),v=i.$$prototype;return v.native=H,P(i,"$initialize",V("native")),P(i,"$to_n",C("native")),P(i,"$[]",function(F){var T=this,J=H,O=H,ae=H;return J=F.$to_s(),O=T.$snake_to_camel(J),ae=T.native[O],T.$wrap_result(ae)}),P(i,"$[]=",function(F,T){var J=this,O=H,ae=H,le=H;return O=F.$to_s(),ae=J.$snake_to_camel(O),le=y(T["$respond_to?"]("to_n"))?T.$to_n():T,J.native[ae]=le}),P(i,"$method_missing",function S(F,T){var J=S.$$p||H,O,ae,le=this,ce=H,de=H,he=H,ve=H,me=H,be=H,$e=H,N=H,D=H,X=H;return S.$$p=null,O=Z(arguments,1),ae=O,ce=F.$to_s(),y(ce["$end_with?"]("="))?(de=ce["$[]"](p(0,-2,!1)),he=le.$snake_to_camel(de),ve=ae["$[]"](0),me=y(ve["$respond_to?"]("to_n"))?ve.$to_n():ve,le.native[he]=me,ve):y(ce["$end_with?"]("?"))?(de=ce["$[]"](p(0,-2,!1)),he=le.$snake_to_camel(de),le.native[he]["$!"]()["$!"]()):(he=le.$snake_to_camel(ce),be=typeof le.native[he]=="function",y(be)?B(he,"addEventListener")&&y(J)?($e=ie(function(ne){return ne==null&&(ne=H),J.$call(o("JsObject").$new(ne))}),le.native.addEventListener(ae["$[]"](0),$e),H):(N=I(ae,"map",[],function(ne){return ne==null&&(ne=H),y(ne["$respond_to?"]("to_n"))?ne.$to_n():ne}),y(J)&&($e=ie(function Q(ne){var se,oe,fe=Q.$$s==null?this:Q.$$s,f=H;return se=Z(arguments),oe=se,f=I(oe,"map",[],function b(U){var re=b.$$s==null?this:b.$$s;return U==null&&(U=H),re.$wrap_result(U)},{$$s:fe}),I(J,"call",L(f))},{$$arity:-1,$$s:le}),N["$<<"]($e)),D=Y(0,X=N.$length())?le.native[he]():Y(1,X)?le.native[he](N["$[]"](0)):Y(2,X)?le.native[he](N["$[]"](0),N["$[]"](1)):Y(3,X)?le.native[he](N["$[]"](0),N["$[]"](1),N["$[]"](2)):le.native[he].apply(le.native,N),le.$wrap_result(D)):(D=le.native[he],le.$wrap_result(D)))},-2),P(i,"$respond_to_missing?",function(F,T){return!0},-2),P(i,"$each",function S(){var F=S.$$p||H,T=this,J=H;return S.$$p=null,y(F)?(J=T.native.length,y(J)&&I(J,"times",[],function O(ae){var le=O.$$s==null?this:O.$$s,ce=H;return le.native==null&&(le.native=H),ae==null&&(ae=H),ce=le.native[ae],F.$call(le.$wrap_result(ce))},{$$s:T}),T):T.$enum_for("each")}),P(i,"$length",function(){var F=this;return F.native.length}),P(i,"$size",function(){var F=this;return F.$length()}),P(i,"$nil?",function(){var F=this;return F.native==null}),P(i,"$exists?",function(){var F=this;return F["$nil?"]()["$!"]()}),P(i,"$to_s",function(){var F=this;return String(F.native)}),P(i,"$inspect",function(){var F=this;return"#<JsObject: "+F.$to_s()+">"}),i.$private(),P(i,"$snake_to_camel",function(F){var T=H;return B(F,F.$upcase())||(T=F.$split("_"),B(T.$length(),1))?F:te(T["$[]"](0),I(T["$[]"](p(1,-1,!1)),"map",[],"capitalize".$to_proc()).$join())}),P(i,"$wrap_result",function(F){return y(F==null)?H:y(typeof F=="number")||y(typeof F=="string")||y(typeof F=="boolean")?F:o("JsObject").$new(F)})}(a[0],null,a),function(t,e,r){var i=ee(t,e,"JsonWrapper"),s=[i].concat(r),o=n.$r(s);return P(i,"$parse",function(S){var F=H;return F=JSON.parse(S),o("JsObject").$new(F)}),P(i,"$stringify",function(S){var F=H;return F=y(S["$respond_to?"]("to_n"))?S.$to_n():S,JSON.stringify(F)})}(a[0],null,a),function(t,e,r){var i=ee(t,e,"RegExpWrapper"),s=[i].concat(r),o=n.$r(s),v=i.$$prototype;return v.native=H,P(i,"$initialize",function(F,T){var J=this;return T==null&&(T=""),J.native=new RegExp(F,T)},-2),P(i,"$to_n",C("native")),P(i,"$test",function(F){var T=this;return T.native.test(F)}),P(i,"$match",function(F){var T=this,J=H;return J=F.match(T.native),y(J===null)?H:o("JsObject").$new(J)}),P(i,"$=~",function(F){var T=this;return T.$test(F)})}(a[0],null,a),function(t,e){var r=k(t,"DateWrapper"),i=[r].concat(e),s=n.$r(i);return W(r,"$now",function(){return Date.now()}),W(r,"$new",function(v){return v==null&&(v=H),y(v)?s("JsObject").$new(new Date(v)):s("JsObject").$new(new Date)},-1),W(r,"$parse",function(v){return Date.parse(v)})}(a[0],a),P(c,"$has_target?",function(e){var r=this,i=H,s=H;return i=r.$snake_to_camel(e.$to_s()),s="has"+i["$[]"](0).$upcase()+i["$[]"](p(1,-1,!1))+"Target",this[s]}),P(c,"$target",function(e){var r=this,i=H,s=H,o=H;return i=r.$snake_to_camel(e.$to_s()),s=""+i+"Target",o=this[s],$("JsObject").$new(o)}),P(c,"$targets",function(e){var r=this,i=H,s=H,o=H;return i=r.$snake_to_camel(e.$to_s()),s=""+i+"Targets",o=this[s],r.$js_array_to_ruby(o)}),P(c,"$set_target_text",function(e,r){var i=this,s=H,o=H,v=H;s=i.$snake_to_camel(e.$to_s()),o="has"+s["$[]"](0).$upcase()+s["$[]"](p(1,-1,!1))+"Target",v=""+s+"Target",this[o]&&(this[v].textContent=r)}),P(c,"$set_target_class",function(e,r){var i=this,s=H,o=H,v=H;s=i.$snake_to_camel(e.$to_s()),o="has"+s["$[]"](0).$upcase()+s["$[]"](p(1,-1,!1))+"Target",v=""+s+"Target",this[o]&&(this[v].className=r)}),P(c,"$set_target_disabled",function(e,r){var i=this,s=H,o=H,v=H;s=i.$snake_to_camel(e.$to_s()),o="has"+s["$[]"](0).$upcase()+s["$[]"](p(1,-1,!1))+"Target",v=""+s+"Target",this[o]&&(this[v].disabled=r)}),c.$private(),P(c,"$snake_to_camel",function(e){var r=H;return B(e,e.$upcase())||(r=e.$to_s().$split("_"),B(r.$length(),1))?e:te(r["$[]"](0),I(r["$[]"](p(1,-1,!1)),"map",[],"capitalize".$to_proc()).$join())})}(l[0],l)}(d[0],d)}(M[0],M)}(w[0],w),z(w[0],"JsProxyEx",j(j(j(K("OpalVite"),"Concerns"),"V1"),"JsProxyEx"))};Opal.modules["opal_vite/concerns/v1/toastable"]=function(n){var k=n.module,y=n.def,P=n.const_set,I=[],ee=n.$r(I);n.nil;var V=n.$$$;return n.add_stubs("dispatch_toast"),function(C,Z){var p=k(C,"OpalVite"),B=[p].concat(Z);return function(ie,L){var Y=k(ie,"Concerns"),te=[Y].concat(L);return function(W,z){var w=k(W,"V1"),K=[w].concat(z);return function(H){var j=k(H,"Toastable");return y(j,"$dispatch_toast",function(g,E){E==null&&(E="info");const M=new CustomEvent("show-toast",{detail:{message:g,type:E}});window.dispatchEvent(M)},-2),y(j,"$show_success",function(g){var E=this;return E.$dispatch_toast(g,"success")}),y(j,"$show_error",function(g){var E=this;return E.$dispatch_toast(g,"error")}),y(j,"$show_warning",function(g){var E=this;return E.$dispatch_toast(g,"warning")}),y(j,"$show_info",function(g){var E=this;return E.$dispatch_toast(g,"info")})}(K[0])}(te[0],te)}(B[0],B)}(I[0],I),P(I[0],"Toastable",V(V(V(ee("OpalVite"),"Concerns"),"V1"),"Toastable"))};Opal.modules["opal_vite/concerns/v1/dom_helpers"]=function(n){var k=n.module,y=n.truthy,P=n.def,I=n.send,ee=n.const_set,V=[],C=n.$r(V),Z=n.nil,p=n.$$$;return n.add_stubs("window,to_n,query_selector,element,nil?,query_selector_all,map,to_a,Native,add,class_list,remove,toggle,contains,set_timeout,!,element_exists?,set_style"),function(B,ie){var L=k(B,"OpalVite"),Y=[L].concat(ie);return function(te,W){var z=k(te,"Concerns"),w=[z].concat(W);return function(K,H){var j=k(K,"V1"),R=[j].concat(H);return function(g){var E=k(g,"DomHelpers");return P(E,"$dispatch_custom_event",function(q,m,u){var d=this,A=Z;m==null&&(m=new Map),u==null&&(u=Z),u=y(A=u)?A:d.$window();const h=new CustomEvent(q,{detail:m.$to_n()});u.$to_n().dispatchEvent(h)},-2),P(E,"$create_event",function(q,m){return m==null&&(m=new Map([["bubbles",!0]])),new Event(q,m.$to_n())},-2),P(E,"$query",function(q){var m=this,u=Z;return u=m.$element().$query_selector(q),y(u["$nil?"]())?Z:u}),P(E,"$query_all",function(q){var m=this,u=Z;return u=m.$element().$query_selector_all(q),I(m.$Native(Array.from(u.$to_n())).$to_a(),"map",[],function d(A){var h=d.$$s==null?this:d.$$s;return A==null&&(A=Z),h.$Native(A)},{$$s:m})}),P(E,"$add_class",function(q,m){return q.$class_list().$add(m)}),P(E,"$remove_class",function(q,m){return q.$class_list().$remove(m)}),P(E,"$toggle_class",function(q,m){return q.$class_list().$toggle(m)}),P(E,"$has_class?",function(q,m){return q.$class_list().$contains(m)}),P(E,"$set_timeout",function M(q){var m=M.$$p||Z,u=this;return M.$$p=null,u.$window().$set_timeout(m,q)}),P(E,"$element_exists?",function(q){var m=Z;return y(m=q["$nil?"]()["$!"]())?q.$to_n():m}),P(E,"$set_style",function(q,m,u){var d=this;return y(d["$element_exists?"](q))?q.$to_n().style[m]=u:Z}),P(E,"$get_style",function(q,m){var u=this;return y(u["$element_exists?"](q))?q.$to_n().style[m]:Z}),P(E,"$show_element",function(q){var m=this;return m.$set_style(q,"display","block")}),P(E,"$hide_element",function(q){var m=this;return m.$set_style(q,"display","none")})}(R[0])}(w[0],w)}(Y[0],Y)}(V[0],V),ee(V[0],"DomHelpers",p(p(p(C("OpalVite"),"Concerns"),"V1"),"DomHelpers"))};Opal.modules["opal_vite/concerns/v1/storable"]=function(n){var k=n.module,y=n.truthy,P=n.def,I=n.const_set,ee=[],V=n.$r(ee),C=n.nil,Z=n.$$$;return n.add_stubs("to_n"),function(p,B){var ie=k(p,"OpalVite"),L=[ie].concat(B);return function(Y,te){var W=k(Y,"Concerns"),z=[W].concat(te);return function(w,K){var H=k(w,"V1"),j=[H].concat(K);return function(R,g){var E=k(R,"Storable"),M=[E].concat(g),q=n.$r(M);return P(E,"$storage_get",function(u){var d=C;if(d=localStorage.getItem(u),!y(d))return C;try{return JSON.parse(d)}catch(A){if(n.rescue(A,[q("StandardError")]))try{return C}finally{n.pop_exception(A)}else throw A}}),P(E,"$storage_set",function(u,d){var A=C;return A=JSON.stringify(d.$to_n()),localStorage.setItem(u,A)}),P(E,"$storage_remove",function(u){return localStorage.removeItem(u)})}(j[0],j)}(z[0],z)}(L[0],L)}(ee[0],ee),I(ee[0],"Storable",Z(Z(Z(V("OpalVite"),"Concerns"),"V1"),"Storable"))};Opal.modules["controllers/pwa_controller"]=function(n){var k=n.klass,y=n.const_set,P=n.send2,I=n.find_super,ee=n.def,V=n.truthy,C=n.send,Z=n.rb_plus,p=n.top,B=[],ie=n.$r(B),L=n.nil;return n.add_stubs("require,include,targets=,puts,setup_install_listeners,check_install_status,check_service_worker,load_notes,update_cache_count,js_prop,js_call_on,js_get,js_then,console_log,js_set_prop,has_target?,hide_target,prevent_default,target_value,js_timestamp,js_iso_date,unshift,save_notes,render_notes,target_set_value,event_data_int,reject!,==,[],js_global,update_last_update_time,js_map,private,js_define_method,set_target_style,target_set_text,set_install_status_class,on_window_event,js_call,get_target,js_set,set_sw_status_class,on_element_event,storage_get_json,js_each,<<,each,storage_set_json,empty?,target_set_html,join,map,to_s,+,js_length"),p.$require("opal_stimulus/stimulus_controller"),function(Y,te,W){var z=k(Y,te,"PwaController"),w=[z].concat(W),K=n.$r(w),H=z.$$prototype;return H.notes=L,z.$include(K("StimulusHelpers")),z["$targets="](["installPrompt","swStatus","installStatus","lastUpdate","noteInput","notesList","cacheCount"]),y(w[0],"NOTES_KEY","pwa-notes"),ee(z,"$initialize",function j(){var R=j.$$p||L,g=this;return j.$$p=null,P(g,I(g,"initialize",j,!1,!0),"initialize",[],R),g.notes=[]}),ee(z,"$connect",function(){var R=this;return R.$puts("PwaController connected!"),R.$setup_install_listeners(),R.$check_install_status(),R.$check_service_worker(),R.$load_notes(),R.$update_cache_count()}),ee(z,"$install",function(){var R=this,g=L,E=L;return g=R.$js_prop("deferredPrompt"),V(g)?(R.$js_call_on(g,"prompt"),E=R.$js_get(g,"userChoice"),C(R,"js_then",[E],function M(q){var m=M.$$s==null?this:M.$$s,u=L;return q==null&&(q=L),u=m.$js_get(q,"outcome"),V(u==="accepted")?m.$console_log("User accepted the install prompt"):m.$console_log("User dismissed the install prompt")},{$$s:R}),R.$js_set_prop("deferredPrompt",L),V(R["$has_target?"]("installPrompt"))?R.$hide_target("installPrompt"):L):(alert("Installation prompt not available. Try using browser menu to install."),L)}),ee(z,"$dismiss_install_prompt",function(){var R=this;return V(R["$has_target?"]("installPrompt"))?R.$hide_target("installPrompt"):L}),ee(z,"$add_note",function(R){var g=this,E=L,M=L;return R.$prevent_default(),!V(g["$has_target?"]("noteInput"))||(E=g.$target_value("noteInput"),E=E.trim(),V(E===""))?L:(M=new Map([["id",g.$js_timestamp()],["text",E],["createdAt",g.$js_iso_date()],["synced",navigator.onLine]]),g.notes.$unshift(M),g.$save_notes(),g.$render_notes(),g.$target_set_value("noteInput",""))}),ee(z,"$delete_note",function(R){var g=this,E=L;return E=g.$event_data_int("note-id"),C(g.notes,"reject!",[],function(q){return q==null&&(q=L),q["$[]"]("id")["$=="](E)}),g.$save_notes(),g.$render_notes()}),ee(z,"$update_cache",function(){var R=this,g=L,E=L,M=L;return V("serviceWorker"in g)?(g=R.$js_global("navigator"),E=R.$js_get(g,"serviceWorker"),M=R.$js_call_on(E,"getRegistration"),C(R,"js_then",[M],function q(m){var u=q.$$s==null?this:q.$$s,d=L;return m==null&&(m=L),V(m)?(d=u.$js_call_on(m,"update"),C(u,"js_then",[d],function A(){var h=A.$$s==null?this:A.$$s;return h.$update_last_update_time(),alert("Cache updated! Refresh to see changes.")},{$$s:u})):L},{$$s:R})):L}),ee(z,"$clear_cache",function(){var R=this,g=L,E=L;return V("caches"in window)?(g=R.$js_global("caches"),E=R.$js_call_on(g,"keys"),C(R,"js_then",[E],function M(q){var m=M.$$s==null?this:M.$$s,u=L,d=L;return q==null&&(q=L),u=C(m,"js_map",[q],function A(h){var _=A.$$s==null?this:A.$$s;return h==null&&(h=L),_.$js_call_on(g,"delete",h)},{$$s:m}),d=m.$js_call_on(m.$js_global("Promise"),"all",u),C(m,"js_then",[d],function A(){var h=A.$$s==null?this:A.$$s;return h.$update_cache_count(),alert("Cache cleared! Refresh to rebuild cache.")},{$$s:m})},{$$s:R})):L}),z.$private(),ee(z,"$setup_install_listeners",function(){var R=this;return C(R,"js_define_method",["handleBeforeInstallPrompt"],function g(E){var M=g.$$s==null?this:g.$$s;return E==null&&(E=L),E.preventDefault(),M.$js_set_prop("deferredPrompt",E),V(M["$has_target?"]("installPrompt"))?M.$set_target_style("installPrompt","display","block"):L},{$$s:R}),C(R,"js_define_method",["handleAppInstalled"],function g(){var E=g.$$s==null?this:g.$$s;return V(E["$has_target?"]("installPrompt"))&&E.$hide_target("installPrompt"),V(E["$has_target?"]("installStatus"))?(E.$target_set_text("installStatus","Installed "),E.$set_install_status_class("status-value success")):L},{$$s:R}),C(R,"on_window_event",["beforeinstallprompt"],function g(E){var M=g.$$s==null?this:g.$$s;return E==null&&(E=L),M.$js_call("handleBeforeInstallPrompt",E)},{$$s:R}),C(R,"on_window_event",["appinstalled"],function g(){var E=g.$$s==null?this:g.$$s;return E.$js_call("handleAppInstalled")},{$$s:R})}),ee(z,"$set_install_status_class",function(R){var g=this,E=L;return V(g["$has_target?"]("installStatus"))?(E=g.$get_target("installStatus"),g.$js_set(E,"className",R)):L}),ee(z,"$check_install_status",function(){var R=this,g=L;return g=window.matchMedia("(display-mode: standalone)").matches,V(g)?(R.$target_set_text("installStatus","Installed "),R.$set_install_status_class("status-value success")):(R.$target_set_text("installStatus","Not installed"),R.$set_install_status_class("status-value"))}),ee(z,"$check_service_worker",function(){var R=this,g=L,E=L,M=L;return V(R["$has_target?"]("swStatus"))?V("serviceWorker"in g)?(C(R,"js_define_method",["handleSwUpdate"],function q(){var m=q.$$s==null?this:q.$$s;return m.$update_last_update_time()},{$$s:R}),g=R.$js_global("navigator"),E=R.$js_get(g,"serviceWorker"),M=R.$js_call_on(E,"getRegistration"),C(R,"js_then",[M],function q(m){var u=q.$$s==null?this:q.$$s;return m==null&&(m=L),V(m)?(u.$target_set_text("swStatus","Active "),u.$set_sw_status_class("status-value success"),C(u,"on_element_event",[m,"updatefound"],function d(){var A=d.$$s==null?this:d.$$s,h=L;return h=A.$js_get(m,"installing"),C(A,"on_element_event",[h,"statechange"],function _(){var l=_.$$s==null?this:_.$$s,x=L;return x=l.$js_get(h,"state"),V(x==="activated")?l.$js_call("handleSwUpdate"):L},{$$s:A})},{$$s:u})):(u.$target_set_text("swStatus","Not registered"),u.$set_sw_status_class("status-value warning"))},{$$s:R})):(R.$target_set_text("swStatus","Not supported"),R.$set_sw_status_class("status-value error"),L):L}),ee(z,"$set_sw_status_class",function(R){var g=this,E=L;return V(g["$has_target?"]("swStatus"))?(E=g.$get_target("swStatus"),g.$js_set(E,"className",R)):L}),ee(z,"$load_notes",function(){var R=this,g=L,E=L;if(g=R.$storage_get_json(K("NOTES_KEY")),!V(g))return L;try{return R.notes=[],C(R,"js_each",[g],function M(q){var m=M.$$s==null?this:M.$$s;return m.notes==null&&(m.notes=L),q==null&&(q=L),m.notes["$<<"](new Map([["id",m.$js_get(q,"id")],["text",m.$js_get(q,"text")],["createdAt",m.$js_get(q,"createdAt")],["synced",m.$js_get(q,"synced")]]))},{$$s:R}),R.$render_notes()}catch(M){if(n.rescue(M,[K("StandardError")])){E=M;try{return R.$puts("Error loading notes: "+E)}finally{n.pop_exception(M)}}else throw M}}),ee(z,"$save_notes",function(){var R=this,g=L,E=L;try{return g=[],C(R.notes,"each",[],function(q){q==null&&(q=L),g.push({id:q["$[]"]("id"),text:q["$[]"]("text"),createdAt:q["$[]"]("createdAt"),synced:q["$[]"]("synced")})}),R.$storage_set_json(K("NOTES_KEY"),g)}catch(M){if(n.rescue(M,[K("StandardError")])){E=M;try{return R.$puts("Error saving notes: "+E)}finally{n.pop_exception(M)}}else throw M}}),ee(z,"$render_notes",function(){var R=this,g=L;return V(R["$has_target?"]("notesList"))?V(R.notes["$empty?"]())?(R.$target_set_html("notesList",'<p class="empty-state">No notes yet. Add one above!</p>'),L):(g=C(R.notes,"map",[],function(M){var q=L,m=L;return M==null&&(M=L),q=new Date(M["$[]"]("createdAt")).toLocaleString(),m=V(M["$[]"]("synced"))?"":"",'<div class="note-item"><div class="note-content">'+('<p class="note-text">'+M["$[]"]("text")+"</p>")+('<small class="note-meta">'+m+" "+q+"</small>")+"</div>"+('<button class="btn-delete" data-action="click->pwa#delete_note" data-note-id="'+M["$[]"]("id")+'"></button>')+"</div>"}).$join(),R.$target_set_html("notesList",g)):L}),ee(z,"$update_last_update_time",function(){var R=this;return R.$target_set_text("lastUpdate",new Date().toLocaleTimeString())}),ee(z,"$update_cache_count",function(){var R=this,g=L,E=L;return V(R["$has_target?"]("cacheCount"))?V("caches"in window)?(C(R,"js_define_method",["updateCacheCountValue"],function M(q){var m=M.$$s==null?this:M.$$s;return q==null&&(q=L),m.$target_set_text("cacheCount",q.$to_s())},{$$s:R}),g=R.$js_global("caches"),E=R.$js_call_on(g,"keys"),C(R,"js_then",[E],function M(q){var m=M.$$s==null?this:M.$$s,u=L,d=L;return q==null&&(q=L),m.$js_set_prop("totalEntries",0),u=C(m,"js_map",[q],function A(h){var _=A.$$s==null?this:A.$$s,l=L;return h==null&&(h=L),l=_.$js_call_on(g,"open",h),C(_,"js_then",[l],function x(G){var c=x.$$s==null?this:x.$$s,a=L;return G==null&&(G=L),a=c.$js_call_on(G,"keys"),C(c,"js_then",[a],function $(t){var e=$.$$s==null?this:$.$$s,r=L,i=L;return t==null&&(t=L),r=V(i=e.$js_prop("totalEntries"))?i:0,e.$js_set_prop("totalEntries",Z(r,e.$js_length(t)))},{$$s:c})},{$$s:_})},{$$s:m}),d=m.$js_call_on(m.$js_global("Promise"),"all",u),C(m,"js_then",[d],function A(){var h=A.$$s==null?this:A.$$s;return h.$js_call("updateCacheCountValue",h.$js_prop("totalEntries"))},{$$s:m})},{$$s:R})):(R.$target_set_text("cacheCount","N/A"),L):L})}(B[0],ie("StimulusController"),B)};Opal.modules["controllers/offline_detector_controller"]=function(n){var k=n.klass,y=n.def,P=n.send,I=n.truthy,ee=n.top,V=[],C=n.$r(V),Z=n.nil;return n.add_stubs("require,include,targets=,update_status,setup_event_listeners,private,js_define_method,on_window_event,js_call,has_target?,get_target,js_get,js_set,target_set_text"),ee.$require("opal_stimulus/stimulus_controller"),function(p,B,ie){var L=k(p,B,"OfflineDetectorController"),Y=[L].concat(ie),te=n.$r(Y);return L.$include(te("StimulusHelpers")),L["$targets="](["banner","statusText","onlineStatus"]),y(L,"$connect",function(){var z=this;return z.$update_status(),z.$setup_event_listeners()}),L.$private(),y(L,"$setup_event_listeners",function(){var z=this;return P(z,"js_define_method",["handleOnlineStatus"],function w(){var K=w.$$s==null?this:w.$$s;return K.$update_status()},{$$s:z}),P(z,"on_window_event",["online"],function w(){var K=w.$$s==null?this:w.$$s;return K.$js_call("handleOnlineStatus")},{$$s:z}),P(z,"on_window_event",["offline"],function w(){var K=w.$$s==null?this:w.$$s;return K.$js_call("handleOnlineStatus")},{$$s:z})}),y(L,"$update_status",function(){var z=this,w=Z,K=Z,H=Z,j=Z,R=Z,g=Z,E=Z,M=Z;return w=navigator.onLine,K=I(w)?"online":"offline",I(z["$has_target?"]("banner"))&&(H=z.$get_target("banner"),j=z.$js_get(H,"dataset"),z.$js_set(j,"status",K)),R=I(w)?" You are online":" You are offline",z.$target_set_text("statusText",R),g=I(w)?"Online":"Offline",E=I(w)?"status-value success":"status-value warning",z.$target_set_text("onlineStatus",g),I(z["$has_target?"]("onlineStatus"))?(M=z.$get_target("onlineStatus"),z.$js_set(M,"className",E)):Z})}(V[0],C("StimulusController"),V)};Opal.queue(function(n){var k=n.top,y=[],P=n.$r(y);return n.nil,n.add_stubs("require,puts,register_all!"),k.$require("native"),k.$require("opal_stimulus/stimulus_controller"),k.$require("opal_vite/concerns/v1/stimulus_helpers"),k.$require("opal_vite/concerns/v1/js_proxy_ex"),k.$require("opal_vite/concerns/v1/toastable"),k.$require("opal_vite/concerns/v1/dom_helpers"),k.$require("opal_vite/concerns/v1/storable"),k.$require("controllers/pwa_controller"),k.$require("controllers/offline_detector_controller"),k.$puts("PWA Example - Opal + Stimulus"),k.$puts("Ruby version: "+P("RUBY_VERSION")),P("StimulusController")["$register_all!"](),k.$puts("All controllers registered!")});
