Opal.modules.native=function(e){var q=e.hash_put,D=e.module,K=e.defs,z=e.slice,ee=e.truthy,V=e.send,R=e.Kernel,Z=e.extract_kwargs,m=e.ensure_kwargs,L=e.hash_get,ie=e.range,F=e.to_a,X=e.def,ne=e.return_ivar,W=e.alias,E=e.klass,C=e.rb_minus,P=e.return_val,B=e.send2,N=e.find_super,M=e.eqeqeq,g=e.rb_ge,y=e.return_self,A=e.gvars,w=e.top,p=[],s=e.$r(p),d=e.nil,x=e.$$$;return e.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(h,_){var o=D(h,"Native"),Y=[o].concat(_),H=e.$r(Y);return K(o,"$is_a?",function(l,a){var n=this;try{return l instanceof n.$try_convert(a)}catch{return!1}}),K(o,"$try_convert",function(l,a){var n=this;return a==null&&(a=d),n["$native?"](l)?l:l["$respond_to?"]("to_n")?l.$to_n():a},-2),K(o,"$convert",function(l){var a=this;if(a["$native?"](l))return l;if(l["$respond_to?"]("to_n"))return l.$to_n();a.$raise(H("ArgumentError"),""+l.$inspect()+" isn't native")}),K(o,"$call",function c(l,a,n){var t=c.$$p||d,r,$,i=this;c.$$p=null,r=z(arguments,2),$=r;var u=l[a];if(u instanceof Function){for(var v=new Array($.length),k=0,T=$.length;k<T;k++){var S=$[k],G=i.$try_convert(S);v[k]=G===d?S:G}return t!==d&&v.push(t),i.$Native(u.apply(l,v))}else return i.$Native(u)},-3),K(o,"$proc",function c(){var l=c.$$p||d,a=this;return c.$$p=null,ee(l)||a.$raise(H("LocalJumpError"),"no block given"),V(R,"proc",[],function n(t){var r,$,i=n.$$s==null?this:n.$$s,u=d;if(r=z(arguments),$=r,V($,"map!",[],function k(T){var S=k.$$s==null?this:k.$$s;return T==null&&(T=d),S.$Native(T)},{$$s:i}),u=i.$Native(this),this===e.global)return l.apply(i,$);var v=l.$$s;l.$$s=null;try{return l.apply(u,$)}finally{l.$$s=v}},{$$arity:-1,$$s:a})}),function(c,l){var a=D(c,"Helpers"),n=[a].concat(l),t=e.$r(n);return X(a,"$alias_native",function r($,i,u){var v,k,T,S;r.$$p;var G=this;return r.$$p=null,v=z(arguments,1),k=Z(v),k=m(k),v.length>0&&(T=v.shift()),T==null&&(T=$),S=L(k,"as"),S==null&&(S=d),ee(T["$end_with?"]("="))?V(G,"define_method",[$],function O(ae){var le=O.$$s==null?this:O.$$s;return le.native==null&&(le.native=d),ae==null&&(ae=d),le.native[T["$[]"](ie(0,-2,!1))]=t("Native").$convert(ae),ae},{$$s:G}):ee(S)?V(G,"define_method",[$],function O(ae){var le=O.$$p||d,ce,de,he=O.$$s==null?this:O.$$s,ve=d;return he.native==null&&(he.native=d),O.$$p=null,ce=z(arguments),de=ce,ve=V(t("Native"),"call",[he.native,T].concat(F(de)),le.$to_proc()),ee(ve)?S.$new(ve.$to_n()):d},{$$arity:-1,$$s:G}):V(G,"define_method",[$],function O(ae){var le=O.$$p||d,ce,de,he=O.$$s==null?this:O.$$s;return he.native==null&&(he.native=d),O.$$p=null,ce=z(arguments),de=ce,V(t("Native"),"call",[he.native,T].concat(F(de)),le.$to_proc())},{$$arity:-1,$$s:G})},-2),X(a,"$native_reader",function($){var i,u,v=this;return i=z(arguments),u=i,V(u,"each",[],function k(T){var S=k.$$s==null?this:k.$$s;return T==null&&(T=d),V(S,"define_method",[T],function G(){var O=G.$$s==null?this:G.$$s;return O.native==null&&(O.native=d),O.$Native(O.native[T])},{$$s:S})},{$$s:v})},-1),X(a,"$native_writer",function($){var i,u,v=this;return i=z(arguments),u=i,V(u,"each",[],function k(T){var S=k.$$s==null?this:k.$$s;return T==null&&(T=d),V(S,"define_method",[""+T+"="],function G(O){var ae=G.$$s==null?this:G.$$s;return ae.native==null&&(ae.native=d),O==null&&(O=d),ae.$Native(ae.native[T]=O)},{$$s:S})},{$$s:v})},-1),X(a,"$native_accessor",function($){var i,u,v=this;return i=z(arguments),u=i,V(v,"native_reader",F(u)),V(v,"native_writer",F(u))},-1)}(Y[0],Y),function(c,l){var a=D(c,"Wrapper"),n=[a].concat(l),t=e.$r(n);return X(a,"$initialize",function($){var i=this;return ee(R["$native?"]($))||R.$raise(t("ArgumentError"),""+$.$inspect()+" isn't native"),i.native=$}),X(a,"$to_n",ne("native")),K(a,"$included",function($){return $.$extend(t("Helpers"))})}(Y[0],Y),K(o,"$included",function(l){var a=this;return a.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),l.$include(H("Wrapper"))})}(p[0],p),function(h,_){var o=D(h,"Kernel"),Y=[o].concat(_),H=e.$r(Y);return X(o,"$native?",function(l){return l==null||!l.$$class}),X(o,"$Native",function c(l){c.$$p;var a=this;return c.$$p=null,ee(l==null)?d:ee(a["$native?"](l))?x(H("Native"),"Object").$new(l):ee(l["$is_a?"](H("Array")))?V(l,"map",[],function n(t){var r=n.$$s==null?this:n.$$s;return t==null&&(t=d),r.$Native(t)},{$$s:a}):ee(l["$is_a?"](H("Proc")))?V(a,"proc",[],function n(t){var r=n.$$p||d,$,i,u=n.$$s==null?this:n.$$s;return n.$$p=null,$=z(arguments),i=$,u.$Native(V(l,"call",F(i),r.$to_proc()))},{$$arity:-1,$$s:a}):l}),W(o,"_Array","Array"),X(o,"$Array",function c(l,a){var n=c.$$p||d,t,r,$=this;return c.$$p=null,t=z(arguments,1),r=t,ee($["$native?"](l))?V(x(H("Native"),"Array"),"new",[l].concat(F(r)),n.$to_proc()).$to_a():$.$_Array(l)},-2)}(p[0],p),function(h,_){var o=E(h,_,"Object"),Y=o.$$prototype;return Y.native=d,o.$include(x(x("Native"),"Wrapper")),X(o,"$==",function(c){var l=this;return l.native===x("Native").$try_convert(c)}),X(o,"$has_key?",function(c){var l=this;return e.hasOwnProperty.call(l.native,c)}),X(o,"$each",function H(c){var l,a,n=H.$$p||d,t=this;if(H.$$p=null,l=z(arguments),a=l,n!==d){for(var r in t.native)e.yieldX(n,[r,t.native[r]]);return t}else return V(t,"method_missing",["each"].concat(F(a)))},-1),X(o,"$[]",function(c){var l=this,a=l.native[c];return a instanceof Function?a:x("Native").$call(l.native,c)}),X(o,"$[]=",function(c,l){var a=this,n=d;return n=x("Native").$try_convert(l),ee(n===d)?a.native[c]=l:a.native[c]=n}),X(o,"$merge!",function(c){var l=this;c=x("Native").$convert(c);for(var a in c)l.native[a]=c[a];return l}),X(o,"$respond_to?",function(c,l){var a=this;return l==null&&(l=!1),R.$instance_method("respond_to?").$bind(a).$call(c,l)},-2),X(o,"$respond_to_missing?",function(c,l){var a=this;return e.hasOwnProperty.call(a.native,c)},-2),X(o,"$method_missing",function H(c,l){var a=H.$$p||d,n,t,r,$=this;return H.$$p=null,n=z(arguments,1),t=n,c.charAt(c.length-1)==="="?(r=[c.$slice(0,C(c.$length(),1)),t["$[]"](0)],V($,"[]=",r),r[r.length-1]):V(x("Native"),"call",[$.native,c].concat(F(t)),a.$to_proc())},-2),X(o,"$nil?",P(!1)),X(o,"$is_a?",function(c){var l=this;return e.is_a(l,c)}),X(o,"$instance_of?",function(c){var l=this;return l.$$class===c}),X(o,"$class",function(){var c=this;return c.$$class}),X(o,"$to_a",function H(c){var l=H.$$p||d,a=this;return H.$$p=null,c==null&&(c=new Map),V(x(x("Native"),"Array"),"new",[a.native,c],l.$to_proc()).$to_a()},-1),X(o,"$inspect",function(){var c=this;return"#<Native:"+String(c.native)+">"}),W(o,"include?","has_key?"),W(o,"key?","has_key?"),W(o,"kind_of?","is_a?"),W(o,"member?","has_key?")}(s("Native"),s("BasicObject")),function(h,_,o){var Y=E(h,_,"Array"),H=[Y].concat(o),c=e.$r(H),l=Y.$$prototype;return l.named=l.native=l.get=l.block=l.set=l.length=d,Y.$include(x(c("Native"),"Wrapper")),Y.$include(c("Enumerable")),X(Y,"$initialize",function a(n,t){var r=a.$$p||d,$=this,i=d;return a.$$p=null,t==null&&(t=new Map),B($,N($,"initialize",a,!1,!0),"initialize",[n],null),$.get=ee(i=t["$[]"]("get"))?i:t["$[]"]("access"),$.named=t["$[]"]("named"),$.set=ee(i=t["$[]"]("set"))?i:t["$[]"]("access"),$.length=ee(i=t["$[]"]("length"))?i:"length",$.block=r,ee($.$length()==null)?$.$raise(c("ArgumentError"),"no length found on the array-like object"):d},-2),X(Y,"$each",function a(){var n=a.$$p||d,t=this;if(a.$$p=null,!ee(n))return t.$enum_for("each");for(var r=0,$=t.$length();r<$;r++)e.yield1(n,t["$[]"](r));return t}),X(Y,"$[]",function(n){var t=this,r=d,$=d;return r=M(c("String"),$=n)||M(c("Symbol"),$)?ee(t.named)?t.native[t.named](n):t.native[n]:M(c("Integer"),$)?ee(t.get)?t.native[t.get](n):t.native[n]:d,ee(r)?ee(t.block)?t.block.$call(r):t.$Native(r):d}),X(Y,"$[]=",function(n,t){var r=this;return ee(r.set)?r.native[r.set](n,c("Native").$convert(t)):r.native[n]=c("Native").$convert(t)}),X(Y,"$last",function(n){var t=this,r=d,$=d;if(n==null&&(n=d),ee(n)){for(r=C(t.$length(),1),$=[];ee(g(r,0));)$["$<<"](t["$[]"](r)),r=C(r,1);return $}else return t["$[]"](C(t.$length(),1))},-1),X(Y,"$length",function(){var n=this;return n.native[n.length]}),X(Y,"$inspect",function(){var n=this;return n.$to_a().$inspect()}),W(Y,"to_ary","to_a")}(s("Native"),null,p),function(h,_){var o=E(h,_,"Numeric");return X(o,"$to_n",function(){var H=this;return H.valueOf()})}(p[0],null),function(h,_){var o=E(h,_,"Proc");return X(o,"$to_n",y)}(p[0],null),function(h,_){var o=E(h,_,"String");return X(o,"$to_n",function(){var H=this;return H.valueOf()})}(p[0],null),function(h,_){var o=E(h,_,"Regexp");return X(o,"$to_n",function(){var H=this;return H.valueOf()})}(p[0],null),function(h,_){var o=E(h,_,"MatchData");return X(o,"$to_n",ne("matches"))}(p[0],null),function(h,_,o){var Y=E(h,_,"Struct"),H=[Y].concat(o),c=e.$r(H);return X(Y,"$to_n",function(){var a=this,n=d;return n={},V(a,"each_pair",[],function(r,$){return r==null&&(r=d),$==null&&($=d),n[r]=c("Native").$try_convert($,$)}),n})}(p[0],null,p),function(h,_,o){var Y=E(h,_,"Array"),H=[Y].concat(o),c=e.$r(H);return X(Y,"$to_n",function(){for(var a=this,n=[],t=0,r=a.length;t<r;t++){var $=a[t];n.push(c("Native").$try_convert($,$))}return n})}(p[0],null,p),function(h,_){var o=E(h,_,"Boolean");return X(o,"$to_n",function(){var H=this;return H.valueOf()})}(p[0],null),function(h,_){var o=E(h,_,"Time");return X(o,"$to_n",y)}(p[0],null),function(h,_){var o=E(h,_,"NilClass");return X(o,"$to_n",function(){return null})}(p[0],null),ee(s("Hash")["$method_defined?"]("_initialize"))||function(h,_,o){var Y=E(h,_,"Hash"),H=[Y].concat(o),c=e.$r(H);W(Y,"_initialize","initialize");function l(a,n,t){t&&(t.constructor===void 0||t.constructor===Object||t instanceof Map)?q(a,n,c("Hash").$new(t)):t&&t.$$is_array?(t=t.map(function(r){return r&&(r.constructor===void 0||r.constructor===Object||t instanceof Map)?c("Hash").$new(r):Y.$Native(r)}),q(a,n,t)):q(a,n,Y.$Native(t))}return X(Y,"$initialize",function a(n){var t=a.$$p||d,r=this;if(a.$$p=null,n!=null)if(n.constructor===void 0||n.constructor===Object){var $,i;for($ in n)i=n[$],l(r,$,i);return r}else n instanceof Map&&e.hash_each(n,!1,function(u,v){return l(r,u,v),[!1,!1]});return V(r,"_initialize",[n],t.$to_proc())},-1),X(Y,"$to_n",function(){var n=this,t={};return e.hash_each(n,!1,function(r,$){return t[c("Native").$try_convert(r,r)]=c("Native").$try_convert($,$),[!1,!1]}),t})}(p[0],null,p),function(h,_){var o=E(h,_,"Module");return X(o,"$native_module",function(){var H=this;return e.global[H.$name()]=H})}(p[0],null),function(h,_,o){var Y=E(h,_,"Class"),H=[Y].concat(o),c=e.$r(H);return X(Y,"$native_alias",function(a,n){var t=this,r=t.prototype[e.jsid(n)];r||t.$raise(c("NameError").$new("undefined method `"+n+"' for class `"+t.$inspect()+"'",n)),t.prototype[a]=r}),X(Y,"$native_class",function(){var a=this;return a.$native_module(),a.new=a.$new})}(p[0],null,p),A.$=A.global=w.$Native(e.global)};(function(e){var q;if(typeof globalThis<"u"?e=globalThis:typeof global<"u"?e=global:typeof window<"u"&&(e=window),e.console==null&&(e.console={}),typeof e.console=="object"?q=e.console:q={},"log"in q||(q.log=function(){}),"warn"in q||(q.warn=q.log),typeof e.Opal<"u")return q.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),e.Opal;var D,K,z,ee,V,R,Z,m=e.Opal={};m.global=e,m.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var L=Function.prototype.call,ie=Function.prototype.bind,F=Object.hasOwn||L.bind(Object.prototype.hasOwnProperty),X=Object.setPrototypeOf,ne=L.bind(Array.prototype.slice),W=L.bind(Array.prototype.splice),E=4,C=E;function P(){return C+=2,C}m.uid=P,m.id=function(f){return f.$$is_number?f*2+1:(f.$$id==null&&g(f,"$$id",P()),f.$$id)};var B=m.gvars={};m.exit=function(f){B.DEBUG&&q.log("Exited with status "+f)},m.exceptions=[],m.pop_exception=function(f){var b=m.exceptions.pop();b===f||(b?B["!"]=b:B["!"]=D)};function N(f,b){if(f||(f=m.Exception||Error),Z&&Z.$raise)arguments.length>2?Z.$raise(f.$new.apply(f,ne(arguments,1))):Z.$raise(f,b);else throw f.$new?f.$new(b):new f(b)}var M={value:void 0,enumerable:!1,configurable:!0,writable:!0};function g(f,b,U){typeof f=="string"?f[b]=U:(M.value=U,Object.defineProperty(f,b,M))}m.prop=g,m.defineProperty=m.prop,m.slice=ne;var y=m.truthy=function(f){return f!==!1&&D!==f&&f!==void 0&&f!==null&&(!(f instanceof Boolean)||f.valueOf()===!0)};m.falsy=function(f){return!y(f)},m.type_error=function(f,b,U,re){f=f.$$class,re&&U?(re=re.$$class,N(m.TypeError,"can't convert "+f+" into "+b+" ("+f+"#"+U+" gives "+re+")")):N(m.TypeError,"no implicit conversion of "+f+" into "+b)},m.coerce_to=function(f,b,U,re){var ue;return U==="to_int"&&b===m.Integer&&f.$$is_number?f<0?Math.ceil(f):Math.floor(f):U==="to_str"&&b===m.String&&f.$$is_string||m.is_a(f,b)?f:f["$respond_to?"].$$pristine&&f.$method_missing.$$pristine?(ue=f[de(U)],(ue==null||ue.$$stub)&&m.type_error(f,b),ue.apply(f,re)):(f["$respond_to?"](U)||m.type_error(f,b),re==null&&(re=[]),m.send(f,U,re))},m.respond_to=function(f,b,U){if(f==null||!f.$$class)return!1;U=!!U;var re=f[b];if(f["$respond_to?"].$$pristine){if(typeof re=="function"&&!re.$$stub)return!0;if(!f["$respond_to_missing?"].$$pristine)return m.send(f,f["$respond_to_missing?"],[b.substr(1),U])}else return m.send(f,f["$respond_to?"],[b.substr(1),U])},m.trace_class=!1,m.tracers_for_class=[];function A(f){var b,U,re;for(b=0,U=m.tracers_for_class.length;b<U;b++)re=m.tracers_for_class[b],re.trace_object=f,re.block.$call(re)}function w(f,b){if(f.$$autoload[b].loaded){if(f.$$autoload[b].loaded&&!f.$$autoload[b].required&&f.$$autoload[b].exception)throw f.$$autoload[b].exception}else{f.$$autoload[b].loaded=!0;try{m.Kernel.$require(f.$$autoload[b].path)}catch(U){throw f.$$autoload[b].exception=U,U}if(f.$$autoload[b].required=!0,f.$$const[b]!=null)return f.$$autoload[b].success=!0,f.$$const[b]}}function p(f,b){if(f){if(f.$$const[b]!=null)return f.$$const[b];if(f.$$autoload&&f.$$autoload[b])return w(f,b)}}function s(f,b){var U,re,ue;if(f.length!==0)for(U=0,re=f.length;U<re;U++){if(ue=f[U].$$const[b],ue!=null)return ue;if(f[U].$$autoload&&f[U].$$autoload[b])return w(f[U],b)}}function d(f,b){var U,re,ue;if(f!=null)for(ue=G(f),U=0,re=ue.length;U<re;U++){if(ue[U].$$const&&F(ue[U].$$const,b))return ue[U].$$const[b];if(ue[U].$$autoload&&ue[U].$$autoload[b])return w(ue[U],b)}}function x(f,b){if(f==null||f.$$is_module)return d(z,b)}function h(f,b){return(f||z).$const_missing(b)}m.const_get_local=function(f,b,U){var re;if(f!=null)return f==="::"&&(f=z),!f.$$is_module&&!f.$$is_class&&N(m.TypeError,f.toString()+" is not a class/module"),re=p(f,b),re!=null||U?re:h(f,b)},m.const_get_qualified=function(f,b,U){var re,ue,_e,ge=m.const_cache_version;if(b==null)return re=p(z,f),re??m.const_get_qualified(z,f,U);if(f!=null)return f==="::"&&(f=z),!f.$$is_module&&!f.$$is_class&&N(m.TypeError,f.toString()+" is not a class/module"),(ue=f.$$const_cache)==null&&(g(f,"$$const_cache",Object.create(null)),ue=f.$$const_cache),_e=ue[b],_e==null||_e[0]!==ge?((re=p(f,b))!=null||(re=d(f,b))!=null,ue[b]=[ge,re]):re=_e[1],re!=null||U?re:h(f,b)},m.const_cache_version=1,m.const_get_relative=function(f,b,U){var re=f[0],ue,_e=m.const_cache_version,ge,pe;return(ge=f.$$const_cache)==null&&(g(f,"$$const_cache",Object.create(null)),ge=f.$$const_cache),pe=ge[b],pe==null||pe[0]!==_e?((ue=p(re,b))!=null||(ue=s(f,b))!=null||(ue=d(re,b))!=null||(ue=x(re,b))!=null,ge[b]=[_e,ue]):ue=pe[1],ue!=null||U?ue:h(re,b)};function _(f,b,U){var re=!0;return(f==null||f==="::")&&(f=z),U.$$is_a_module&&((U.$$name==null||U.$$name===D)&&(U.$$name=b),U.$$base_module==null&&(U.$$base_module=f)),f.$$const=f.$$const||Object.create(null),(b in f.$$const||"$$autoload"in f&&b in f.$$autoload)&&(re=!1),f.$$const[b]=U,f.$$=f.$$const,m.const_cache_version++,f===z&&(m[b]=U),g(f,b,U),re&&f.$const_added&&!f.$const_added.$$pristine&&f.$const_added(b),U}m.const_set=_,m.constants=function(f,b){b==null&&(b=!0);var U,re=[f],ue,_e,ge={},pe;for(b&&(re=re.concat(G(f))),b&&f.$$is_module&&(re=re.concat([m.Object]).concat(G(m.Object))),ue=0,_e=re.length;ue<_e&&(U=re[ue],!(f!==z&&U==z));ue++){for(pe in U.$$const)ge[pe]=!0;if(U.$$autoload)for(pe in U.$$autoload)ge[pe]=!0}return Object.keys(ge)},m.const_remove=function(f,b){if(m.const_cache_version++,f.$$const[b]!=null){var U=f.$$const[b];return delete f.$$const[b],U}if(f.$$autoload&&f.$$autoload[b])return delete f.$$autoload[b],D;N(m.NameError,"constant "+f+"::"+f.$name()+" not defined")},m.const_get_relative_factory=function(f){return function(b,U){return m.$$(f,b,U)}},m.$$=m.const_get_relative,m.$$$=m.const_get_qualified,m.$r=m.const_get_relative_factory;function o(f){return f==null?!1:f.$$bridge?f:f.$$super?o(f.$$super):!1}function Y(f,b,U){var re,ue;if((ue=o(b))?re=function(){var ye=new(ie.apply(ue.$$constructor,he(null,arguments)));return X(ye,re.$$prototype),ye}:re=function(){},f&&f!==D&&g(re,"displayName","::"+f),g(re,"$$name",f),g(re,"$$constructor",re),g(re,"$$prototype",re.prototype),g(re,"$$const",{}),g(re,"$$is_class",!0),g(re,"$$is_a_module",!0),g(re,"$$super",b),g(re,"$$cvars",{}),g(re,"$$own_included_modules",[]),g(re,"$$own_prepended_modules",[]),g(re,"$$ancestors",[]),g(re,"$$ancestors_cache_version",null),g(re,"$$subclasses",[]),g(re,"$$cloned_from",[]),g(re.$$prototype,"$$class",re),m.Class&&X(re,m.Class.prototype),b!=null){if(X(re.$$prototype,b.$$prototype),U!==!0)if(typeof WeakRef<"u"){var _e,ge,pe=[];for(_e=0;_e<b.$$subclasses.length;_e++)ge=b.$$subclasses[_e],ge.deref()!==void 0&&pe.push(ge);pe.push(new WeakRef(re)),b.$$subclasses=pe}else b.$$subclasses.push(re);b.$$meta&&m.build_class_singleton_class(re)}return re}m.allocate_class=Y;function H(f,b){var U=p(f,b);if(U)return U.$$is_class||N(m.TypeError,b+" is not a class"),U}function c(f,b){f.$$super!==b&&N(m.TypeError,"superclass mismatch for class "+f.$$name)}m.klass=function(f,b,U){var re;f==null||f=="::"?f=z:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),b!=null&&(!b.hasOwnProperty||b.hasOwnProperty&&!b.hasOwnProperty("$$is_class"))&&(b.constructor&&b.constructor.name=="Function"?(re=b,b=z):N(m.TypeError,"superclass must be a Class ("+(b.constructor&&(b.constructor.name||b.constructor.$$name)||typeof b)+" given)"));var ue=H(f,U);return ue!=null?b&&c(ue,b):(b==null&&(b=z),ue=Y(U,b),_(f,U,ue),b.$inherited&&b.$inherited(ue),re&&m.bridge(re,ue)),m.trace_class&&A(ue),ue};function l(f){var b=function(){},U=b;return f&&g(b,"displayName",f+".constructor"),g(U,"$$name",f),g(U,"$$prototype",b.prototype),g(U,"$$const",{}),g(U,"$$is_module",!0),g(U,"$$is_a_module",!0),g(U,"$$cvars",{}),g(U,"$$iclasses",[]),g(U,"$$own_included_modules",[]),g(U,"$$own_prepended_modules",[]),g(U,"$$ancestors",[U]),g(U,"$$ancestors_cache_version",null),g(U,"$$cloned_from",[]),X(U,m.Module.prototype),U}m.allocate_module=l;function a(f,b){var U=p(f,b);return U==null&&f===z&&(U=d(z,b)),U&&!U.$$is_module&&U!==z&&N(m.TypeError,b+" is not a module"),U}m.module=function(f,b){var U;return f==null||f=="::"?f=z:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),U=a(f,b),U==null&&(U=l(b),_(f,b,U)),m.trace_class&&A(U),U},m.get_singleton_class=function(f){return f.$$is_number&&N(m.TypeError,"can't define singleton"),f.$$meta?f.$$meta:f.hasOwnProperty("$$is_class")?m.build_class_singleton_class(f):f.hasOwnProperty("$$is_module")?m.build_module_singleton_class(f):m.build_object_singleton_class(f)};function n(f,b){f.hasOwnProperty("$$meta")?f.$$meta=b:g(f,"$$meta",b),f.$$frozen?f.$$meta.$freeze():X(f,b.$$prototype)}m.build_class_singleton_class=function(f){if(f.$$meta)return f.$$meta;var b=f===K?V:m.get_singleton_class(f.$$super),U=Y(null,b,!0);return g(U,"$$is_singleton",!0),g(U,"$$singleton_of",f),n(f,U),g(f,"$$class",m.Class),U},m.build_module_singleton_class=function(f){if(f.$$meta)return f.$$meta;var b=Y(null,m.Module,!0);return g(b,"$$is_singleton",!0),g(b,"$$singleton_of",f),n(f,b),g(f,"$$class",m.Module),b},m.build_object_singleton_class=function(f){var b=f.$$class,U=Y(D,b,!0);return g(U,"$$is_singleton",!0),g(U,"$$singleton_of",f),delete U.$$prototype.$$class,n(f,U),U},m.is_method=function(f){return f[0]==="$"&&f[1]!=="$"},m.instance_methods=function(f){for(var b=Object.create(null),U=[],re=G(f),ue=0,_e=re.length;ue<_e;ue++){var ge=re[ue],pe=ge.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ze=ye.length;we<ze;we++){var Ee=ye[we];if(!b[Ee]){if(m.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);U.push(qe)}}b[Ee]=!0}}}return U},m.own_instance_methods=function(f){var b=[],U=f.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);for(var re=Object.getOwnPropertyNames(U),ue=0,_e=re.length;ue<_e;ue++){var ge=re[ue];if(m.is_method(ge)){var pe=U[ge];if(!pe.$$stub){var ye=ge.slice(1);b.push(ye)}}}return b},m.methods=function(f){return m.instance_methods(f.$$meta||f.$$class)},m.own_methods=function(f){return f.$$meta?m.own_instance_methods(f.$$meta):[]},m.receiver_methods=function(f){var b=m.get_singleton_class(f),U=m.own_instance_methods(b),re=m.own_instance_methods(b.$$super);return U.concat(re)},m.class_variables=function(f){var b=G(f),U,re=b.length,ue={};for(U=re-1;U>=0;U--){var _e=b[U];for(var ge in _e.$$cvars)ue[ge]=_e.$$cvars[ge]}return ue},m.class_variable_set=function(f,b,U){var re=G(f),ue,_e=re.length;for(ue=_e-2;ue>=0;ue--){var ge=re[ue];if(F(ge.$$cvars,b))return ge.$$cvars[b]=U,U}return f.$$cvars[b]=U,U},m.class_variable_get=function(f,b,U){if(F(f.$$cvars,b))return f.$$cvars[b];var re=G(f),ue,_e=re.length;for(ue=0;ue<_e;ue++){var ge=re[ue];if(F(ge.$$cvars,b))return ge.$$cvars[b]}return U||N(m.NameError,"uninitialized class variable "+b+" in "+f.$name()),D};function t(f){return f.hasOwnProperty("$$iclass")&&f.hasOwnProperty("$$root")}function r(f){for(var b=[],U,re=Object.getPrototypeOf(f.$$prototype);re&&!re.hasOwnProperty("$$class");)U=T(re),U&&b.push(U),re=Object.getPrototypeOf(re);return b}function $(f){var b=[],U,re=Object.getPrototypeOf(f.$$prototype);if(f.$$prototype.hasOwnProperty("$$dummy"))for(;re&&re!==f.$$prototype.$$define_methods_on;)U=T(re),U&&b.push(U),re=Object.getPrototypeOf(re);return b}m.append_features=function(f,b){var U=G(f),re=[];U.indexOf(b)!==-1&&N(m.ArgumentError,"cyclic include detected");for(var ue=0,_e=U.length;ue<_e;ue++){var ge=U[ue],pe=u(ge);g(pe,"$$included",!0),re.push(pe)}var ye=G(b),we=k(re),ze,Ee;if(ye.indexOf(f)===-1)ze=b.$$prototype,Ee=Object.getPrototypeOf(b.$$prototype);else{for(var xe=b.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===f&&t(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var ke=Object.getPrototypeOf(qe);ke.hasOwnProperty("$$iclass")&&!t(ke);)ke=Object.getPrototypeOf(ke);ze=xe,Ee=ke}else ze=b.$$prototype,Ee=Object.getPrototypeOf(b.$$prototype)}X(ze,we.first),X(we.last,Ee),b.$$own_included_modules=r(b),m.const_cache_version++},m.prepend_features=function(f,b){var U=G(f),re=[];U.indexOf(b)!==-1&&N(m.ArgumentError,"cyclic prepend detected");for(var ue=0,_e=U.length;ue<_e;ue++){var ge=U[ue],pe=u(ge);g(pe,"$$prepended",!0),re.push(pe)}var ye=k(re),we=b.$$prototype,ze=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=v(b),i(b),g(we,"$$dummy",!0),g(we,"$$define_methods_on",Ee),X(we,Ee),X(Ee,ze));var ke=G(b);if(ke.indexOf(f)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else N(m.RuntimeError,"Prepending a module multiple times is not supported");X(xe,ye.first),X(ye.last,qe),b.$$own_prepended_modules=$(b),m.const_cache_version++};function i(f){for(var b=f.$$prototype,U=Object.getOwnPropertyNames(b),re=0;re<U.length;re++){var ue=U[re];m.is_method(ue)&&delete b[ue]}}function u(f){var b=v(f);return f.$$is_module&&f.$$iclasses.push(b),b}function v(f){var b={},U=f.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);var re=Object.getOwnPropertyNames(U),ue=re.length,_e;for(_e=0;_e<ue;_e++){var ge=re[_e];g(b,ge,U[ge])}return g(b,"$$iclass",!0),g(b,"$$module",f),b}function k(f){var b=f.length,U=f[0];if(g(U,"$$root",!0),b===1)return{first:U,last:U};for(var re=U,ue=1;ue<b;ue++){var _e=f[ue];X(re,_e),re=_e}return{first:f[0],last:f[b-1]}}m.bridge=function(f,b){f.hasOwnProperty("$$bridge")&&N(m.ArgumentError,"already bridged"),g(f,"$$bridge",b),X(f.prototype,(b.$$super||m.Object).$$prototype),g(b,"$$prototype",f.prototype),g(b.$$prototype,"$$class",b),g(b,"$$constructor",f),g(b,"$$bridge",!0)};function T(f){if(!f.hasOwnProperty("$$dummy")){if(f.hasOwnProperty("$$iclass"))return f.$$module;if(f.hasOwnProperty("$$class"))return f.$$class}}function S(f){return f.$$own_prepended_modules.concat([f]).concat(f.$$own_included_modules)}function G(f){if(!f)return[];if(f.$$ancestors_cache_version===m.const_cache_version)return f.$$ancestors;var b=[],U,re,ue;for(U=0,re=S(f),ue=re.length;U<ue;U++)b.push(re[U]);if(f.$$super)for(U=0,re=G(f.$$super),ue=re.length;U<ue;U++)b.push(re[U]);return f.$$ancestors_cache_version=m.const_cache_version,f.$$ancestors=b,b}m.ancestors=G,m.included_modules=function(f){for(var b=[],U=null,re=Object.getPrototypeOf(f.$$prototype);re&&Object.getPrototypeOf(re);re=Object.getPrototypeOf(re))U=T(re),U&&U.$$is_module&&re.$$iclass&&re.$$included&&b.push(U);return b},m.add_stubs=function(f){var b=m.BasicObject.$$prototype,U,re;f=f.split(",");for(var ue=0,_e=f.length;ue<_e;ue++)U=de(f[ue]),re=b[U],(re==null||re.$$stub)&&m.add_stub_for(b,U)},m.add_stub_for=function(f,b){g(f,b,m.stub_for(b))},m.stub_for=function(f){function b(){return this.$method_missing.$$p=b.$$p,b.$$p=null,this.$method_missing.apply(this,he(f.slice(1),arguments))}return b.$$stub=!0,b},m.ac=function(f,b,U,re){var ue="";U.$$is_a_module?ue+=U.$$name+".":ue+=U.$$class.$$name+"#",ue+=re,N(m.ArgumentError,"["+ue+"] wrong number of arguments (given "+f+", expected "+b+")")},m.block_ac=function(f,b,U){var re="`block in "+U+"'";N(m.ArgumentError,re+": wrong number of arguments (given "+f+", expected "+b+")")};function O(f){return f.hasOwnProperty("$$meta")&&f.$$meta!==null?G(f.$$meta):G(f.$$class)}m.find_super=function(f,b,U,re,ue){var _e=de(b),ge,pe,ye,we,ze=-1,Ee;for(ge=O(f),we=U.$$owner,Ee=0;Ee<ge.length;Ee++)if(pe=ge[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ze=Ee;break}for(Ee=ze+1;Ee<ge.length;Ee++){pe=ge[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(_e)){ye=xe[_e];break}}return!re&&ye&&ye.$$stub&&f.$method_missing.$$pristine&&N(m.NoMethodError,"super: no superclass method `"+b+"' for "+f,b),ye.$$stub&&!ue?null:ye},m.find_block_super=function(f,b,U,re,ue){var _e=b;return U||N(m.RuntimeError,"super called outside of method"),ue&&U.$$define_meth&&N(m.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),U.$$def&&(_e=U.$$jsid),m.find_super(f,_e,U,re)},m.find_super_dispatcher=m.find_super,m.find_iter_super_dispatcher=m.find_block_super;function ae(f,b,U){try{f(b)}catch(re){if(re===U)return U.$v;throw re}}m.yield1=function(f,b){typeof f!="function"&&N(m.LocalJumpError,"no block given");var U=f.$$has_top_level_mlhs_arg,re=f.$$has_trailing_comma_in_args,ue=f.$$is_lambda&&f.$$ret;return(f.length>1||(U||re)&&f.length===1)&&(b=m.to_ary(b)),(f.length>1||re&&f.length===1)&&b.$$is_array?ue?ae(f.apply.bind(f,null),b,f.$$ret):f.apply(null,b):ue?ae(f,b,f.$$ret):f(b)},m.yieldX=function(f,b){return typeof f!="function"&&N(m.LocalJumpError,"no block given"),f.length>1&&b.length===1&&b[0].$$is_array&&(b=b[0]),f.$$is_lambda&&f.$$ret?ae(f.apply.bind(f,null),b,f.$$ret):f.apply(null,b)},m.rescue=function(f,b){for(var U=0;U<b.length;U++){var re=b[U];if(re.$$is_array){var ue=m.rescue(f,re);if(ue)return ue}else if(re===m.JS.Error||re["$==="](f))return re}return null},m.is_a=function(f,b){if(b!=null&&f.$$meta===b||f.$$class===b)return!0;if(f.$$is_number&&b.$$is_number_class)return b.$$is_integer_class?f%1===0:!0;var U=G(f.$$is_class?m.get_singleton_class(f):f.$$meta||f.$$class);return U.indexOf(b)!==-1},m.to_hash=function(f){if(f.$$is_hash)return f;if(f["$respond_to?"]("to_hash",!0)){var b=f.$to_hash();if(b.$$is_hash)return b;N(m.TypeError,"Can't convert "+f.$$class+" to Hash ("+f.$$class+"#to_hash gives "+b.$$class+")")}else N(m.TypeError,"no implicit conversion of "+f.$$class+" into Hash")},m.to_ary=function(f){if(f.$$is_array)return f;if(f["$respond_to?"]("to_ary",!0)){var b=f.$to_ary();if(b===D)return[f];if(b.$$is_array)return b;N(m.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_ary gives "+b.$$class+")")}else return[f]},m.to_a=function(f){if(f.$$is_array)return f.slice();if(f["$respond_to?"]("to_a",!0)){var b=f.$to_a();if(b===D)return[f];if(b.$$is_array)return b;N(m.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_a gives "+b.$$class+")")}else return[f]},m.extract_kwargs=function(f){var b=f[f.length-1];if(b!=null&&m.respond_to(b,"$to_hash",!0))return W(f,f.length-1),b},m.kwrestargs=function(f,b){var U=new Map;return m.hash_each(f,!1,function(re,ue){return b[re]||m.hash_put(U,re,ue),[!1,!1]}),U};function le(f,b){typeof b=="number"?f.$$arity=b:typeof b=="object"&&Object.assign(f,b)}var ce=new Map;function de(f){var b=ce.get(f);return b||(b="$"+f,ce.set(f,b)),b}m.jsid=de;function he(f,b){return b.$$is_array||(b=ne(b)),[f].concat(b)}m.send=function(f,b,U,re,ue){var _e;return typeof b=="function"?(_e=b,b=null):typeof b=="string"?_e=f[de(b)]:N(m.NameError,"Passed method should be a string or a function"),m.send2(f,_e,b,U,re,ue)},m.send2=function(f,b,U,re,ue,_e){return b==null&&U!=null&&f.$method_missing&&(b=f.$method_missing,re=he(U,re)),le(ue,_e),typeof ue=="function"&&(b.$$p=ue),b.apply(f,re)},m.refined_send=function(f,b,U,re,ue,_e){var ge,pe,ye,we,ze,Ee,xe,qe,ke,Ae;for(we=O(b),ge=0;ge<we.length;ge++)for(ze=m.id(we[ge]),pe=0;pe<f.length;pe++)for(Ee=f[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ze]>"u")&&(ke=qe[ze],typeof ke.$$prototype[de(U)]<"u")))return Ae=ke.$$prototype[de(U)],m.send2(b,Ae,U,re,ue,_e);return m.send(b,U,re,ue,_e)},m.lambda=function(f,b){return f.$$is_lambda=!0,le(f,b),f},m.def=function(f,b,U,re){return le(U,re),f===m.top?m.defn(m.Object,b,U):!f.$$eval&&f.$$is_a_module?m.defn(f,b,U):m.defs(f,b,U)},m.defn=function(f,b,U){I(f),U.displayName=b,U.$$owner=f;var re=b.substr(1),ue=f.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),g(ue,b,U),f.$$is_module){f.$$module_function&&m.defs(f,b,U);for(var _e=0,ge=f.$$iclasses,pe=ge.length;_e<pe;_e++){var ye=ge[_e];g(ye,b,U)}}var we=f.$$singleton_of;return f.$method_added&&!f.$method_added.$$stub&&!we?f.$method_added(re):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(re),re},m.defs=function(f,b,U,re){return le(U,re),(f.$$is_string||f.$$is_number)&&N(m.TypeError,"can't define singleton"),m.defn(m.get_singleton_class(f),b,U)};function ve(f,b){if(f.$$is_module)for(var U=0,re=f.$$iclasses,ue=re.length;U<ue;U++){var _e=re[U];delete _e[b]}}m.rdef=function(f,b){F(f.$$prototype,b)||N(m.NameError,"method '"+b.substr(1)+"' not defined in "+f.$name()),delete f.$$prototype[b],ve(f,b),f.$$is_singleton?f.$$prototype.$singleton_method_removed&&!f.$$prototype.$singleton_method_removed.$$stub&&f.$$prototype.$singleton_method_removed(b.substr(1)):f.$method_removed&&!f.$method_removed.$$stub&&f.$method_removed(b.substr(1))},m.udef=function(f,b){(!f.$$prototype[b]||f.$$prototype[b].$$stub)&&N(m.NameError,"method '"+b.substr(1)+"' not defined in "+f.$name()),m.add_stub_for(f.$$prototype,b),ve(f,b),f.$$is_singleton?f.$$prototype.$singleton_method_undefined&&!f.$$prototype.$singleton_method_undefined.$$stub&&f.$$prototype.$singleton_method_undefined(b.substr(1)):f.$method_undefined&&!f.$method_undefined.$$stub&&f.$method_undefined(b.substr(1))};function me(f){return typeof f=="function"&&!f.$$stub}m.alias=function(f,b,U){var re=de(b),ue=de(U),_e,ge;if(typeof f.$$prototype>"u"&&(f=m.Object),_e=f.$$prototype[ue],f.$$eval)return m.alias(m.get_singleton_class(f),b,U);if(!me(_e)){for(var pe=f.$$super;typeof _e!="function"&&pe;)_e=pe[ue],pe=pe.$$super;!me(_e)&&f.$$is_module&&(_e=m.Object.$$prototype[ue]),me(_e)||N(m.NameError,"undefined method `"+U+"' for class `"+f.$name()+"'")}return _e.$$alias_of&&(_e=_e.$$alias_of),ge=m.wrap_method_body(_e),ge.displayName=b,ge.$$alias_of=_e,ge.$$alias_name=b,m.defn(f,re,ge),f},m.wrap_method_body=function(f){var b=function(){var U=b.$$p;return b.$$p=null,m.send(this,f,arguments,U)};try{Object.defineProperty(b,"length",{value:f.length})}catch{}return b.$$arity=f.$$arity==null?f.length:f.$$arity,b.$$parameters=f.$$parameters,b.$$source_location=f.$$source_location,b},m.alias_gvar=function(f,b){return Object.defineProperty(B,f,{configurable:!0,enumerable:!0,get:function(){return B[b]},set:function(U){B[b]=U}}),D},m.alias_native=function(f,b,U){var re=de(b),ue=f.$$prototype[U];return(typeof ue!="function"||ue.$$stub)&&N(m.NameError,"undefined native method `"+U+"' for class `"+f.$name()+"'"),m.defn(f,re,ue),f},m.hash_init=function(f){q.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},m.hash_clone=function(f,b){return b.$$none=f.$$none,b.$$proc=f.$$proc,m.hash_each(f,b,function(U,re){return m.hash_put(b,U,re),[!1,b]})},m.hash_put=function(f,b,U){var re=typeof b;if(re==="string"||re==="symbol"||re==="number"||re==="boolean"||re==="bigint")f.set(b,U);else if(b.$$is_string)f.set(b.valueOf(),U);else{f.$$keys||(f.$$keys=new Map);var ue=b.$$is_string?b.valueOf():f.$$by_identity?m.id(b):b.$hash(),_e=f.$$keys;if(!_e.has(ue)){_e.set(ue,[b]),f.set(b,U);return}for(var ge=_e.get(ue),pe,ye=0;ye<ge.length;ye++)if(pe=ge[ye],b===pe||b["$eql?"](pe)){f.set(pe,U);return}ge.push(b),f.set(b,U)}},m.hash_get=function(f,b){var U=typeof b;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return f.get(b);if(f.$$keys){var re=b.$$is_string?b.valueOf():f.$$by_identity?m.id(b):b.$hash(),ue=f.$$keys.get(re),_e;if(ue!==void 0){for(var ge=0;ge<ue.length;ge++)if(_e=ue[ge],b===_e||b["$eql?"](_e))return f.get(_e)}else if(b.$$is_string)return f.get(re)}else if(b.$$is_string)return f.get(b.valueOf())};function be(f,b){var U=f.get(b);if(U!==void 0)return f.delete(b),U}m.hash_delete=function(f,b){var U=typeof b;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return be(f,b);if(f.$$keys){var re=b.$$is_string?b.valueOf():f.$$by_identity?m.id(b):b.$hash(),ue=f.$$keys.get(re),_e;if(ue!==void 0){for(var ge=0;ge<ue.length;ge++)if(_e=ue[ge],b===_e||b["$eql?"](_e))return ue.splice(ge,1),ue.length===0&&f.$$keys.delete(re),be(f,_e)}else if(b.$$is_string)return be(f,re)}else if(b.$$is_string)return be(f,b.valueOf())},m.hash_rehash=function(f){var b=f.$$keys;return b&&b.clear(),m.hash_each(f,!1,function(U,re){var ue=typeof U;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var _e=U.$$is_string?U.valueOf():f.$$by_identity?m.id(U):U.$hash();if(b||(f.$$keys=b=new Map),!b.has(_e))return b.set(_e,[U]),[!1,!1];for(var ge=b.get(_e),pe=ge.length===1?ge:ne(ge),ye,we=0;we<pe.length;we++)ye=pe[we],(U===ye||U["$eql?"](ye))&&(ge.splice(ge.indexOf(ye),1),f.delete(ye));return ge.push(U),[!1,!1]}),f},m.hash=function(){var f=arguments.length,b,U,re,ue,_e,ge;if(f===1&&arguments[0].$$is_hash)return arguments[0];if(U=new Map,f===1)if(b=arguments[0],arguments[0].$$is_array){for(ue=b.length,re=0;re<ue;re++)b[re].length!==2&&N(m.ArgumentError,"value not of length 2: "+b[re].$inspect()),_e=b[re][0],ge=b[re][1],m.hash_put(U,_e,ge);return U}else{b=arguments[0];for(_e in b)F(b,_e)&&(ge=b[_e],m.hash_put(U,_e,ge));return U}for(f%2!==0&&N(m.ArgumentError,"odd number of arguments for Hash"),re=0;re<f;re+=2)_e=arguments[re],ge=arguments[re+1],m.hash_put(U,_e,ge);return U},m.hash2=function(f,b){q.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var U=new Map,re=0,ue=f.length;re<ue;re++)U.set(f[re],b[f[re]]);return U},m.hash_each=function(f,b,U){for(var re,ue=0,_e,ge=Array.from(f.entries()),pe=ge.length;ue<pe;ue++)if(_e=ge[ue],re=U(_e[0],_e[1]),re[0])return re[1];return re?re[1]:b},m.range=function(f,b,U){var re=new m.Range;return re.begin=f,re.end=b,re.excl=U,re};var $e=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];m.ivar=function(f){return $e.indexOf(f)!==-1&&(f+="$"),f};function I(f){f.$$frozen&&N(m.FrozenError,"can't modify frozen "+f.$class()+": "+f,new Map([["receiver",f]]))}m.deny_frozen_access=I,m.freeze=function(f){return g(f,"$$frozen",!0),f.hasOwnProperty("$$id")||g(f,"$$id",P()),f.hasOwnProperty("$$meta")?f.$$meta.$freeze():g(f,"$$meta",null),f.hasOwnProperty("$$comparable")||g(f,"$$comparable",null),Object.seal(f),f};function j(f,b){var U=Object.getOwnPropertyNames(f),re=U.length,ue,_e,ge;for(ue=0;ue<re;ue++)_e=U[ue],_e[0]!=="$"&&(ge=Object.getOwnPropertyDescriptor(f,_e),ge&&ge.enumerable&&b(_e,ge))}m.each_ivar=j,m.freeze_props=function(f){var b={get:null,set:function(U){I(f)},enumerable:!0};j(f,function(U,re){re.writable&&(b.get=se(re.value),Object.defineProperty(f,U,b))})},m.escape_regexp=function(f){return f.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},m.global_regexp=function(f){return f.global?f:(f.$$g==null?f.$$g=new RegExp(f.source,(f.multiline?"gm":"g")+(f.ignoreCase?"i":"")):f.$$g.lastIndex=null,f.$$g)},m.global_multiline_regexp=function(f){var b,U;return f.global&&f.multiline?f:(U="gm"+(f.ignoreCase?"i":""),f.multiline?(f.$$g==null&&(f.$$g=new RegExp(f.source,U)),b=f.$$g):(f.$$gm==null&&(f.$$gm=new RegExp(f.source,U)),b=f.$$gm),b.lastIndex=null,b)},m.regexp=function(f,b){for(var U,re=typeof b<"u"&&b&&b.indexOf("i")>=0,ue=0,_e=f.length;ue<_e;ue++)U=f[ue],U instanceof RegExp&&(U.ignoreCase!==re&&m.Kernel.$warn("ignore case doesn't match for "+U.source.$inspect(),new Map([["uplevel",1]])),U=U.source),U===""&&(U="(?:"+U+")"),f[ue]=U;return b?new RegExp(f.join(""),b):new RegExp(f.join(""))},m.modules={},m.loaded_features=["corelib/runtime"],m.current_dir=".",m.require_table={"corelib/runtime":!0},m.normalize=function(f){var b,U,re=[],ue="/";m.current_dir!=="."&&(f=m.current_dir.replace(/\/*$/,"/")+f),f=f.replace(/^\.\//,""),f=f.replace(/\.(rb|opal|js)$/,""),b=f.split(ue);for(var _e=0,ge=b.length;_e<ge;_e++)U=b[_e],U!==""&&(U===".."?re.pop():re.push(U));return re.join(ue)},m.loaded=function(f){var b,U,re;for(b=0,U=f.length;b<U;b++)re=m.normalize(f[b]),!m.require_table[re]&&(m.loaded_features.push(re),m.require_table[re]=!0)},m.load_normalized=function(f){m.loaded([f]);var b=m.modules[f];if(b){var U=b(m);if(typeof Promise<"u"&&U instanceof Promise)return U.then(se(!0))}else{var re=m.config.missing_require_severity,ue="cannot load such file -- "+f;re==="error"?N(m.LoadError,ue):re==="warning"&&q.warn("WARNING: LoadError: "+ue)}return!0},m.load=function(f){return f=m.normalize(f),m.load_normalized(f)},m.require=function(f){return f=m.normalize(f),m.require_table[f]?!1:m.load_normalized(f)},m.encodings=Object.create(null),m.set_encoding=function(f,b,U){typeof U>"u"&&(U="encoding"),(typeof f=="string"||f.$$frozen===!0)&&N(m.FrozenError,"can't modify frozen String");var re=m.find_encoding(b);return re===f[U]||(f[U]=re),f},m.find_encoding=function(f){var b=m.encodings,U=b[f]||b[f.toUpperCase()];return U||N(m.ArgumentError,"unknown encoding name - "+f),U},m.enc=function(f,b){var U=new String(f);return U=m.set_encoding(U,b),U.internal_encoding=U.encoding,U},m.binary=function(f){var b=new String(f);return m.set_encoding(b,"binary","internal_encoding")},m.last_promise=null,m.promise_unhandled_exception=!1,m.queue=function(f){if(m.last_promise)return m.last_promise=m.last_promise.then(function(){if(!m.promise_unhandled_exception)return f(m)}).catch(function(U){m.respond_to(U,"$full_message")&&(U=U.$full_message()),q.error(U),m.promise_unhandled_exception=!0,m.exit(1)}),m.last_promise;var b=f(m);return typeof Promise=="function"&&typeof b=="object"&&b instanceof Promise&&(m.last_promise=b),b};function J(f,b){return typeof f=="number"&&typeof b=="number"}m.rb_plus=function(f,b){return J(f,b)?f+b:f["$+"](b)},m.rb_minus=function(f,b){return J(f,b)?f-b:f["$-"](b)},m.rb_times=function(f,b){return J(f,b)?f*b:f["$*"](b)},m.rb_divide=function(f,b){return J(f,b)?f/b:f["$/"](b)},m.rb_lt=function(f,b){return J(f,b)?f<b:f["$<"](b)},m.rb_gt=function(f,b){return J(f,b)?f>b:f["$>"](b)},m.rb_le=function(f,b){return J(f,b)?f<=b:f["$<="](b)},m.rb_ge=function(f,b){return J(f,b)?f>=b:f["$>="](b)};function Q(f,b){return typeof f=="number"&&typeof b=="number"||typeof f=="string"&&typeof b=="string"}function te(f,b){return Q(f,b)?f===b:y(f["$=="](b))}m.eqeq=te,m.eqeqeq=function(f,b){return Q(f,b)?f===b:y(f["$==="](b))},m.neqeq=function(f,b){return Q(f,b)?f!==b:y(f["$!="](b))},m.not=function(f){return f==null||f===!1||D===f?!0:f===!0||f["$!"].$$pristine?!1:y(f["$!"]())};function se(f){return function(){return f}}m.return_val=se,m.return_self=function(){return this},m.return_ivar=function(f){return function(){return this[f]==null?D:this[f]}},m.assign_ivar=function(f){return function(b){return I(this),this[f]=b}},m.assign_ivar_val=function(f,b){return function(){return I(this),this[f]=b}},m.ensure_kwargs=function(f){if(f==null)return new Map;if(f.$$is_hash)return f;N(m.ArgumentError,"expected kwargs")},m.get_kwarg=function(f,b){var U=m.hash_get(f,b);return U===void 0&&N(m.ArgumentError,"missing keyword: "+b),U},m.large_array_unpack=function(f){var b=f.split(","),U=b.length,re;for(re=0;re<U;re++)switch(b[re][0]){case void 0:b[re]=D;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":b[re]=+b[re]}return b},m.opal32_init=se(1332765036);function oe(f,b){return f<<b|f>>>32-b}m.opal32_add=function(f,b){return f^=b,f=oe(f,1),f},m.BasicObject=K=Y("BasicObject",null),m.Object=z=Y("Object",m.BasicObject),m.Module=ee=Y("Module",m.Object),m.Class=V=Y("Class",m.Module),m.Opal=R=l("Opal"),m.Kernel=Z=l("Kernel"),X(m.BasicObject,m.Class.$$prototype),X(m.Object,m.Class.$$prototype),X(m.Module,m.Class.$$prototype),X(m.Class,m.Class.$$prototype),K.$$const.BasicObject=K,_(z,"BasicObject",K),_(z,"Object",z),_(z,"Module",ee),_(z,"Class",V),_(z,"Opal",R),_(z,"Kernel",Z),K.$$class=V,z.$$class=V,ee.$$class=V,V.$$class=V,R.$$class=ee,Z.$$class=ee,g(z.$$prototype,"toString",function(){var f=this.$to_s();return f.$$is_string&&typeof f=="object"?f.valueOf():f}),g(z.$$prototype,"$require",m.require),m.top=new z,m.top.$to_s=m.top.$inspect=se("main"),m.top.$define_method=fe;function fe(){var f=fe.$$p;return fe.$$p=null,m.send(z,"define_method",arguments,f)}m.NilClass=Y("NilClass",m.Object),_(z,"NilClass",m.NilClass),D=m.nil=new m.NilClass,D.$$id=E,D.call=D.apply=function(){N(m.LocalJumpError,"no block given")},D.$$frozen=!0,D.$$comparable=!1,Object.seal(D),m.thrower=function(f){var b={$thrower_type:f,$throw:function(U,re){throw U==null&&(U=D),this.is_orphan&&!re&&N(m.LocalJumpError,"unexpected "+f,U,f.$to_sym()),this.$v=U,this},is_orphan:!1};return b},Object.defineProperty(B,"@",{enumerable:!0,configurable:!0,get:function(){return y(B["!"])?B["!"].$backtrace():D},set:function(f){y(B["!"])?B["!"].$set_backtrace(f):N(m.ArgumentError,"$! not set")}}),m.t_eval_return=m.thrower("return"),TypeError.$$super=Error,m.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(e){var q=e.type_error,D=e.coerce_to,K=e.module,z=e.defs,ee=e.slice,V=e.eqeqeq,R=e.Kernel,Z=e.truthy,m=e.Opal,L=e.nil,ie=e.$$$;return e.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(F){var X=K(F,"Opal");z(X,"$bridge",function(E,C){return e.bridge(E,C)}),z(X,"$coerce_to!",function(E,C,P,B){var N,M,g=L;return N=ee(arguments,3),M=N,g=D(E,C,P,M),V(C,g)||R.$raise(q(E,C,P,g)),g},-4),z(X,"$coerce_to?",function(E,C,P,B){var N,M,g=L;return N=ee(arguments,3),M=N,!Z(E["$respond_to?"](P))||(g=D(E,C,P,M),Z(g["$nil?"]()))?L:(V(C,g)||R.$raise(q(E,C,P,g)),g)},-4),z(X,"$try_convert",function(E,C,P){return V(C,E)?E:Z(E["$respond_to?"](P))?E.$__send__(P):L}),z(X,"$compare",function(E,C){var P=L;return P=E["$<=>"](C),Z(P===L)&&R.$raise(ie("ArgumentError"),"comparison of "+E.$class()+" with "+C.$class()+" failed"),P}),z(X,"$destructure",function(E){if(E.length==1)return E[0];if(E.$$is_array)return E;for(var C=new Array(E.length),P=0,B=C.length;P<B;P++)C[P]=E[P];return C}),z(X,"$respond_to?",function(E,C,P){return P==null&&(P=!1),E==null||!E.$$class?!1:E["$respond_to?"](C,P)},-3),z(X,"$instance_variable_name!",function(E){return E=m["$coerce_to!"](E,ie("String"),"to_str"),Z(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(E))||R.$raise(ie("NameError").$new("'"+E+"' is not allowed as an instance variable name",E)),E}),z(X,"$class_variable_name!",function(E){return E=m["$coerce_to!"](E,ie("String"),"to_str"),Z(E.length<3||E.slice(0,2)!=="@@")&&R.$raise(ie("NameError").$new("`"+E+"' is not allowed as a class variable name",E)),E}),z(X,"$const_name?",function(E){return typeof E!="string"&&(E=m["$coerce_to!"](E,ie("String"),"to_str")),E[0]===E[0].toUpperCase()}),z(X,"$const_name!",function(E){var C=this;return Z(ie("::","String","skip_raise")?"constant":L)&&(E=m["$coerce_to!"](E,ie("String"),"to_str")),(!E||E[0]!=E[0].toUpperCase())&&C.$raise(ie("NameError"),"wrong constant name "+E),E}),z(X,"$pristine",function(E,C){var P,B;P=ee(arguments,1),B=P;for(var N,M,g=B.length-1;g>=0;g--)N=B[g],M=E.$$prototype[e.jsid(N)],M&&!M.$$stub&&(M.$$pristine=!0);return L},-2);var ne=[];return z(X,"$inspect",function(E){var C=L,P=!1;return function(){try{try{return E===null?"null":E===void 0?"undefined":typeof E.$$class>"u"?Object.prototype.toString.apply(E):typeof E.$inspect!="function"||E.$inspect.$$stub||ne.indexOf(E.$__id__())!==-1?"#<"+E.$$class+":0x"+E.$__id__().$to_s(16)+">":(ne.push(E.$__id__()),P=!0,E.$inspect())}catch(B){if(e.rescue(B,[ie("Exception")])){C=B;try{return"#<"+E.$$class+":0x"+E.$__id__().$to_s(16)+">"}finally{e.pop_exception(B)}}else throw B}}finally{P&&ne.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(e){var q=e.truthy,D=e.coerce_to,K=e.const_set,z=e.Object,ee=e.return_ivar,V=e.assign_ivar,R=e.ivar,Z=e.deny_frozen_access,m=e.freeze,L=e.prop,ie=e.jsid,F=e.each_ivar,X=e.klass,ne=e.Opal,W=e.Kernel,E=e.defs,C=e.send,P=e.def,B=e.eqeqeq,N=e.Module,M=e.rb_lt,g=e.rb_gt,y=e.slice,A=e.to_a,w=e.return_val,p=e.eqeq,s=e.not,d=e.rb_le,x=e.range,h=e.send2,_=e.find_super,o=e.alias,Y=[],H=e.nil,c=e.$$$;return e.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(l,a,n){var t=X(l,a,"Module"),r=[t].concat(n),$=e.$r(r);function i(T){if(T.$$is_string)return T;var S=ne.$try_convert(T,c("String"),"to_str");if(S.$$is_string)return S;S===H?W.$raise(c("TypeError"),""+T+" is not a symbol nor a string"):W.$raise(c("TypeError"),"can't convert "+T.$class()+" to String ("+T.$class()+"#to_str gives "+S.$class())}E(t,"$allocate",function(){var S=this,G=e.allocate_module(H,function(){});return S!==e.Module&&Object.setPrototypeOf(G,S.$$prototype),G}),P(t,"$initialize",function T(){var S=T.$$p||H,G=this;return T.$$p=null,S!==H?C(G,"module_eval",[],S.$to_proc()):H}),P(t,"$===",function(S){var G=this;return q(S==null)?!1:e.is_a(S,G)}),P(t,"$<",function(S){var G=this;B(N,S)||W.$raise(c("TypeError"),"compared with non class/module");var O=G,ae,le,ce;if(O===S)return!1;for(le=0,ae=e.ancestors(G),ce=ae.length;le<ce;le++)if(ae[le]===S)return!0;for(le=0,ae=e.ancestors(S),ce=ae.length;le<ce;le++)if(ae[le]===G)return!1;return H}),P(t,"$<=",function(S){var G=this,O=H;return q(O=G["$equal?"](S))?O:M(G,S)}),P(t,"$>",function(S){var G=this;return B(N,S)||W.$raise(c("TypeError"),"compared with non class/module"),M(S,G)}),P(t,"$>=",function(S){var G=this,O=H;return q(O=G["$equal?"](S))?O:g(G,S)}),P(t,"$<=>",function(S){var G=this,O=H;return G===S?0:!B(N,S)||(O=M(G,S),q(O["$nil?"]()))?H:q(O)?-1:1}),P(t,"$alias_method",function(S,G){var O=this;return Z(O),S=D(S,c("String"),"to_str"),G=D(G,c("String"),"to_str"),e.alias(O,S,G),O}),P(t,"$alias_native",function(S,G){var O=this;return G==null&&(G=S),Z(O),e.alias_native(O,S,G),O},-2),P(t,"$ancestors",function(){var S=this;return e.ancestors(S)}),P(t,"$append_features",function(S){var G=this;return Z(S),e.append_features(G,S),G}),P(t,"$attr_accessor",function(S){var G,O,ae=this;return G=y(arguments),O=G,C(ae,"attr_reader",A(O)),C(ae,"attr_writer",A(O))},-1),P(t,"$attr",function(S){var G,O,ae=this;return G=y(arguments),O=G,O.length==2&&(O[1]===!0||O[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),O[1]?ae.$attr_accessor(O[0]):ae.$attr_reader(O[0]),H):C(ae,"attr_reader",A(O))},-1),P(t,"$attr_reader",function(S){var G,O,ae=this;G=y(arguments),O=G,Z(ae);for(var le=ae.$$prototype,ce=O.length-1;ce>=0;ce--){var de=O[ce],he=ie(de),ve=R(de),me=ee(ve);e.prop(le,ve,H),me.$$parameters=[],me.$$arity=0,e.defn(ae,he,me)}return H},-1),P(t,"$attr_writer",function(S){var G,O,ae=this;G=y(arguments),O=G,Z(ae);for(var le=ae.$$prototype,ce=O.length-1;ce>=0;ce--){var de=O[ce],he=ie(de+"="),ve=R(de),me=V(ve);me.$$parameters=[["req"]],me.$$arity=1,e.prop(le,ve,H),e.defn(ae,he,me)}return H},-1),P(t,"$autoload",function(S,G){var O=this;return Z(O),$("Opal")["$const_name?"](S)||W.$raise(c("NameError"),"autoload must be constant name: "+S),G==""&&W.$raise(c("ArgumentError"),"empty file name"),O.$$const.hasOwnProperty(S)||(O.$$autoload||(O.$$autoload={}),e.const_cache_version++,O.$$autoload[S]={path:G,loaded:!1,required:!1,success:!1,exception:!1},O.$const_added&&!O.$const_added.$$pristine&&O.$const_added(S)),H}),P(t,"$autoload?",function(S){var G=this;if(G.$$autoload&&G.$$autoload[S]&&!G.$$autoload[S].required&&!G.$$autoload[S].success)return G.$$autoload[S].path;for(var O=G.$ancestors(),ae=0,le=O.length;ae<le;ae++)if(O[ae].$$autoload&&O[ae].$$autoload[S]&&!O[ae].$$autoload[S].required&&!O[ae].$$autoload[S].success)return O[ae].$$autoload[S].path;return H}),P(t,"$class_variables",function(){var S=this;return Object.keys(e.class_variables(S))}),P(t,"$class_variable_get",function(S){var G=this;return S=ne["$class_variable_name!"](S),e.class_variable_get(G,S,!1)}),P(t,"$class_variable_set",function(S,G){var O=this;return Z(O),S=ne["$class_variable_name!"](S),e.class_variable_set(O,S,G)}),P(t,"$class_variable_defined?",function(S){var G=this;return S=ne["$class_variable_name!"](S),e.class_variables(G).hasOwnProperty(S)}),P(t,"$const_added",w(H)),ne.$pristine(t,"const_added"),P(t,"$remove_class_variable",function(S){var G=this;if(Z(G),S=ne["$class_variable_name!"](S),e.hasOwnProperty.call(G.$$cvars,S)){var O=G.$$cvars[S];return delete G.$$cvars[S],O}else W.$raise(c("NameError"),"cannot remove "+S+" for "+G)}),P(t,"$constants",function(S){var G=this;return S==null&&(S=!0),e.constants(G,S)},-1),E(t,"$constants",function(S){var G=this;if(S==null){var O=(G.$$nesting||[]).concat(z),ae,le={},ce,de;for(ce=0,de=O.length;ce<de;ce++)for(ae in O[ce].$$const)le[ae]=!0;return Object.keys(le)}else return e.constants(G,S)},-1),E(t,"$nesting",function(){var S=this;return S.$$nesting||[]}),P(t,"$const_defined?",function(S,G){var O=this;G==null&&(G=!0),S=$("Opal")["$const_name!"](S),q(S["$=~"](c(ne,"CONST_NAME_REGEXP")))||W.$raise(c("NameError").$new("wrong constant name "+S,S));var ae,le=[O],ce,de;for(G&&(le=le.concat(e.ancestors(O)),O.$$is_module&&(le=le.concat([z]).concat(e.ancestors(z)))),ce=0,de=le.length;ce<de;ce++)if(ae=le[ce],ae.$$const[S]!=null||ae.$$autoload&&ae.$$autoload[S]&&!ae.$$autoload[S].required&&!ae.$$autoload[S].success)return!0;return!1},-2),P(t,"$const_get",function(S,G){var O=this;return G==null&&(G=!0),S=$("Opal")["$const_name!"](S),S.indexOf("::")===0&&S!=="::"&&(S=S.slice(2)),q(S.indexOf("::")!=-1&&S!="::")?C(S.$split("::"),"inject",[O],function(le,ce){return le==null&&(le=H),ce==null&&(ce=H),le.$const_get(ce)}):(q(S["$=~"](c(ne,"CONST_NAME_REGEXP")))||W.$raise(c("NameError").$new("wrong constant name "+S,S)),G?e.$$([O],S):e.const_get_local(O,S))},-2),P(t,"$const_missing",function(S){var G=this,O=H;return O=p(G,z)?S:""+G+"::"+S,W.$raise(c("NameError").$new("uninitialized constant "+O,S))}),P(t,"$const_set",function(S,G){var O=this;return Z(O),S=ne["$const_name!"](S),(q(S["$!~"](c(ne,"CONST_NAME_REGEXP")))||q(S["$start_with?"]("::")))&&W.$raise(c("NameError").$new("wrong constant name "+S,S)),K(O,S,G),G}),P(t,"$public_constant",w(H)),P(t,"$define_method",function T(S,G){var O=T.$$p||H,ae=this,le=H,ce=H,de=H;return T.$$p=null,Z(ae),G===void 0&&O===H&&W.$raise(c("ArgumentError"),"tried to create a Proc object without a block"),S=i(S),q(G!==void 0)&&(O=B(c("Proc"),le=G)?G:B(c("Method"),le)?G.$to_proc().$$unbound:B(c("UnboundMethod"),le)?e.wrap_method_body(G.$$method):W.$raise(c("TypeError"),"wrong argument type "+G.$class()+" (expected Proc/Method/UnboundMethod)"),q(!G.$$is_proc)&&(ce=G.$owner(),q(ce.$$is_class)&&s(d(ae,ce))&&(de=q(ce.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+ce,W.$raise(c("TypeError"),de)))),typeof Proxy<"u"&&(O.$$proxy_target=O,O=new Proxy(O,{apply:function(he,ve,me){var be=he.$$jsid,$e=he.$$is_lambda;he.$$jsid=S,he.$$is_lambda=!0;try{return he.apply(ve,me)}catch(I){if(I===he.$$brk||I===he.$$ret)return I.$v;throw I}finally{he.$$jsid=be,he.$$is_lambda=$e}}})),O.$$jsid=S,O.$$s=null,O.$$def=O,O.$$define_meth=!0,e.defn(ae,ie(S),O)},-2),P(t,"$freeze",function(){var S=this;return q(S["$frozen?"]())?S:(S.hasOwnProperty("$$base_module")||L(S,"$$base_module",null),m(S))}),P(t,"$remove_method",function(S){var G,O,ae=this;G=y(arguments),O=G;for(var le=0;le<O.length;le++){var ce=i(O[le]);Z(ae),e.rdef(ae,"$"+ce)}return ae},-1),P(t,"$singleton_class?",function(){var S=this;return!!S.$$is_singleton}),P(t,"$include",function(S){var G,O,ae=this;G=y(arguments),O=G;for(var le=O.length-1;le>=0;le--){var ce=O[le];ce.$$is_module||W.$raise(c("TypeError"),"wrong argument type "+ce.$class()+" (expected Module)"),ce.$append_features(ae),ce.$included(ae)}return ae},-1),P(t,"$included_modules",function(){var S=this;return e.included_modules(S)}),P(t,"$include?",function(S){var G=this;S.$$is_module||W.$raise(c("TypeError"),"wrong argument type "+S.$class()+" (expected Module)");var O,ae,le,ce=e.ancestors(G);for(O=0,ae=ce.length;O<ae;O++)if(le=ce[O],le===S&&le!==G)return!0;return!1}),P(t,"$instance_method",function(S){var G=this,O=G.$$prototype[ie(S)];return(!O||O.$$stub)&&W.$raise(c("NameError").$new("undefined method `"+S+"' for class `"+G.$name()+"'",S)),c("UnboundMethod").$new(G,O.$$owner||G,O,S)}),P(t,"$instance_methods",function(S){var G=this;return S==null&&(S=!0),q(S)?e.instance_methods(G):e.own_instance_methods(G)},-1),P(t,"$included",w(H)),P(t,"$extended",w(H)),P(t,"$extend_object",function(S){return Z(S),H}),P(t,"$method_added",function(S){return y(arguments),H},-1),P(t,"$method_removed",function(S){return y(arguments),H},-1),P(t,"$method_undefined",function(S){return y(arguments),H},-1),P(t,"$module_eval",function T(S){var G=T.$$p||H,O,ae,le,ce=this,de=H,he=H,ve=H,me=H,be=H,$e=H;T.$$p=null,O=y(arguments),ae=O,q(G["$nil?"]())&&q(!!e.compile)?(q(x(1,3,!1)["$cover?"](ae.$size()))||W.$raise(c("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(A(ae)),de=le[0]==null?H:le[0],he=le[1]==null?H:le[1],le[2]==null||le[2],ve=new Map([["file",q(me=he)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),$e=ne.$compile(de,be),G=C(W,"proc",[],function J(){var Q=J.$$s==null?this:J.$$s;return new Function("Opal,self","return "+$e)(e,Q)},{$$s:ce})):q(ae["$any?"]())&&W.$raise(c("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var I=G.$$s,j;return G.$$s=null,j=G.apply(ce,[ce]),G.$$s=I,j},-1),P(t,"$module_exec",function T(S){var G=T.$$p||H,O,ae,le=this;T.$$p=null,O=y(arguments),ae=O,G===H&&W.$raise(c("LocalJumpError"),"no block given");var ce=G.$$s,de;return G.$$s=null,de=G.apply(le,ae),G.$$s=ce,de},-1),P(t,"$method_defined?",function(S){var G=this,O=G.$$prototype[ie(S)];return!!O&&!O.$$stub}),P(t,"$module_function",function(S){var G,O,ae=this;if(G=y(arguments),O=G,Z(ae),O.length===0)return ae.$$module_function=!0,H;for(var le=0,ce=O.length;le<ce;le++){var de=O[le],he=ie(de),ve=ae.$$prototype[he];e.defs(ae,he,ve)}return O.length===1?O[0]:O},-1),P(t,"$name",function(){var S=this;if(S.$$full_name)return S.$$full_name;for(var G=[],O=S;O;){if(O.$$name===H||O.$$name==null)return H;if(G.unshift(O.$$name),O=O.$$base_module,O===z)break}return G.length===0?H:S.$$full_name=G.join("::")}),P(t,"$prepend",function(S){var G,O,ae=this;G=y(arguments),O=G,O.length===0&&W.$raise(c("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=O.length-1;le>=0;le--){var ce=O[le];ce.$$is_module||W.$raise(c("TypeError"),"wrong argument type "+ce.$class()+" (expected Module)"),ce.$prepend_features(ae),ce.$prepended(ae)}return ae},-1),P(t,"$prepend_features",function(S){var G=this;return Z(S),G.$$is_module||W.$raise(c("TypeError"),"wrong argument type "+G.$class()+" (expected Module)"),e.prepend_features(G,S),G}),P(t,"$prepended",w(H)),P(t,"$remove_const",function(S){var G=this;return Z(G),e.const_remove(G,S)}),P(t,"$to_s",function(){var S=this,G=H;return q(G=e.Module.$name.call(S))?G:"#<"+(S.$$is_module?"Module":"Class")+":0x"+S.$__id__().$to_s(16)+">"}),P(t,"$undef_method",function(S){var G,O,ae=this;G=y(arguments),O=G;for(var le=0;le<O.length;le++){var ce=i(O[le]);Z(ae),e.udef(ae,"$"+ce)}return ae},-1),P(t,"$instance_variables",function(){var S=this,G=H;G=(e.Module.$$nesting=r,S.$constants());var O=[];return F(S,function(ae){ae!=="constructor"&&!G["$include?"](ae)&&O.push("@"+ae)}),O});function u(T,S){var G,O=e.own_instance_methods(T);for(G=0;G<O.length;G++){var ae=O[G],le=ie(ae),ce=T.$$prototype[le],de=e.wrap_method_body(ce);de.$$jsid=ae,e.defn(S,le,de)}}function v(T,S){for(var G=T.$$own_included_modules,O=G.length-1;O>=0;O--)e.append_features(G[O],S)}function k(T,S){for(var G=T.$$own_prepended_modules,O=G.length-1;O>=0;O--)e.prepend_features(G[O],S)}return P(t,"$initialize_copy",function(S){var G=this;return u(S,G),v(S,G),k(S,G),G.$$cloned_from=S.$$cloned_from.concat(S),G.$copy_class_variables(S),G.$copy_constants(S)}),P(t,"$initialize_dup",function T(S){var G=T.$$p||H,O=this;return T.$$p=null,h(O,_(O,"initialize_dup",T,!1,!0),"initialize_dup",[S],G),O.$copy_singleton_methods(S)}),P(t,"$copy_class_variables",function(S){var G=this;for(var O in S.$$cvars)G.$$cvars[O]=S.$$cvars[O]}),P(t,"$copy_constants",function(S){var G=this,O,ae=S.$$const;for(O in ae)K(G,O,ae[O])}),P(t,"$refine",function T(S){var G=T.$$p||H,O,ae=this,le=H,ce=H,de=H;return T.$$p=null,O=[ae,H,H],le=O[0],ce=O[1],de=O[2],de=e.id(S),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?ce=ae.$$refine_modules[de]=c("Refinement").$new():ce=ae.$$refine_modules[de],ce.refinement_module=le,ce.refined_class=S,C(ce,"class_exec",[],G.$to_proc()),ce}),P(t,"$refinements",function(){var S=this,G=S.$$refine_modules,O=new Map;if(typeof G>"u")return O;for(var ae in G)O["$[]="](G[ae].refined_class,G[ae]);return O}),P(t,"$using",function(S){return W.$raise("Module#using is not permitted in methods")}),o(t,"class_eval","module_eval"),o(t,"class_exec","module_exec"),o(t,"inspect","to_s")}("::",null,Y),function(l,a){var n=X(l,a,"Refinement"),t=n.$$prototype;return t.refinement_module=t.refined_class=H,n.$attr_reader("refined_class"),P(n,"$inspect",function r(){var $=r.$$p||H,i=this;return r.$$p=null,q(i.refinement_module)?"#<refinement:"+i.refined_class.$inspect()+"@"+i.refinement_module.$inspect()+">":h(i,_(i,"inspect",r,!1,!0),"inspect",[],$)})}("::",N)};Opal.modules["corelib/class"]=function(e){var q=e.klass,D=e.send,K=e.defs,z=e.def,ee=e.ensure_kwargs,V=e.hash_get,R=e.eqeq,Z=e.truthy,m=e.rb_plus,L=e.return_val,ie=e.slice,F=e.send2,X=e.find_super,ne=e.Kernel,W=e.alias,E=e.top,C=[],P=e.nil,B=e.$$$;return e.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),E.$require("corelib/module"),function(N,M,g){var y=q(N,M,"Class"),A=[y].concat(g),w=e.$r(A);return K(y,"$new",function p(s){var d=p.$$p||P;if(p.$$p=null,s==null&&(s=w("Object")),!s.$$is_class)throw e.TypeError.$new("superclass must be a Class");var x=e.allocate_class(P,s);return s.$inherited(x),d!==P&&D(x,"class_eval",[],d.$to_proc()),x},-1),z(y,"$allocate",function(){var s=this,d=new s.$$constructor;return d.$$id=e.uid(),d}),z(y,"$clone",function(s){var d,x=this,h=P;return s=ee(s),d=V(s,"freeze"),d==null&&(d=P),Z(d["$nil?"]())||R(d,!0)||R(d,!1)||x.$raise(w("ArgumentError"),"unexpected value for freeze: "+d.$class()),h=e.allocate_class(P,x.$$super),h.$copy_instance_variables(x),h.$copy_singleton_methods(x),h.$initialize_clone(x,new Map([["freeze",d]])),(R(d,!0)||Z(d["$nil?"]())&&Z(x["$frozen?"]()))&&h.$freeze(),h},-1),z(y,"$dup",function(){var s=this,d=P;return d=e.allocate_class(P,s.$$super),d.$copy_instance_variables(s),d.$initialize_dup(s),d}),z(y,"$descendants",function(){var s=this;return m(s.$subclasses(),D(s.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),z(y,"$inherited",L(P)),z(y,"$new",function p(s){var d=p.$$p||P,x,h,_=this;p.$$p=null,x=ie(arguments),h=x;var o=_.$allocate();return e.send(o,o.$initialize,h,d),o},-1),z(y,"$subclasses",function(){var s=this;if(typeof WeakRef<"u"){var d,x,h=[];for(d=0;d<s.$$subclasses.length;d++)x=s.$$subclasses[d].deref(),x!==void 0&&h.push(x);return h}else return s.$$subclasses}),z(y,"$superclass",function(){var s=this;return s.$$super||P}),z(y,"$to_s",function p(){p.$$p;var s=this;p.$$p=null;var d=s.$$singleton_of;return d&&d.$$is_a_module?"#<Class:"+d.$name()+">":d?"#<Class:#<"+d.$$class.$name()+":0x"+e.id(d).$to_s(16)+">>":F(s,X(s,"to_s",p,!1,!0),"to_s",[],null)}),z(y,"$attached_object",function(){var s=this;if(s.$$singleton_of!=null)return s.$$singleton_of;ne.$raise(B("TypeError"),"`"+s+"' is not a singleton class")}),W(y,"inspect","to_s")}("::",null,C)};Opal.modules["corelib/basic_object"]=function(e){var q=e.klass,D=e.slice,K=e.def,z=e.alias,ee=e.return_val,V=e.Opal,R=e.truthy,Z=e.range,m=e.Kernel,L=e.to_a,ie=e.send,F=e.eqeq,X=e.rb_ge,ne=e.nil,W=e.$$$;return e.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(E,C){var P=q(E,C,"BasicObject");return K(P,"$initialize",function(N){return D(arguments),ne},-1),K(P,"$==",function(N){var M=this;return M===N}),K(P,"$eql?",function(N){var M=this;return M["$=="](N)}),z(P,"equal?","=="),K(P,"$__id__",function(){var N=this;return N.$$id!=null||e.prop(N,"$$id",e.uid()),N.$$id}),K(P,"$__send__",function B(N,M){var g=B.$$p||ne,y,A,w=this;B.$$p=null,y=D(arguments,1),A=y,N.$$is_string||w.$raise(W("TypeError"),""+w.$inspect()+" is not a symbol nor a string");var p=w[e.jsid(N)];return p?(g!==ne&&(p.$$p=g),p.apply(w,A)):(g!==ne&&(w.$method_missing.$$p=g),w.$method_missing.apply(w,[N].concat(A)))},-2),K(P,"$!",ee(!1)),V.$pristine("!"),K(P,"$!=",function(N){var M=this;return M["$=="](N)["$!"]()}),K(P,"$instance_eval",function B(N){var M=B.$$p||ne,g,y,A,w=this,p=ne,s=ne,d=ne,x=ne,h=ne,_=ne;if(B.$$p=null,g=D(arguments),y=g,R(M["$nil?"]())&&R(!!e.compile))R(Z(1,3,!1)["$cover?"](y.$size()))||m.$raise(W("ArgumentError"),"wrong number of arguments (0 for 1..3)"),A=[].concat(L(y)),p=A[0]==null?ne:A[0],s=A[1]==null?ne:A[1],A[2]==null||A[2],d=new Map([["file",R(x=s)?x:"(eval)"],["eval",!0]]),h=new Map([["arity_check",!1]]).$merge(d),_=V.$compile(p,h),M=ie(m,"proc",[],function H(){var c=H.$$s==null?this:H.$$s;return new Function("Opal,self","return "+_)(e,c)},{$$s:w});else{if(R(M["$nil?"]())&&R(X(y.$length(),1))&&F(y.$first()["$[]"](0),"@"))return w.$instance_variable_get(y.$first());R(y["$any?"]())&&m.$raise(W("ArgumentError"),"wrong number of arguments ("+y.$size()+" for 0)")}var o=M.$$s,Y;if(M.$$s=null,w.$$is_a_module){w.$$eval=!0;try{Y=M.call(w,w)}finally{w.$$eval=!1}}else Y=M.call(w,w);return M.$$s=o,Y},-1),K(P,"$instance_exec",function B(N){var M=B.$$p||ne,g,y,A=this;B.$$p=null,g=D(arguments),y=g,R(M)||m.$raise(W("ArgumentError"),"no block given");var w=M.$$s,p;if(M.$$s=null,A.$$is_a_module){A.$$eval=!0;try{p=M.apply(A,y)}finally{A.$$eval=!1}}else p=M.apply(A,y);return M.$$s=w,p},-1),K(P,"$singleton_method_added",function(N){return D(arguments),ne},-1),K(P,"$singleton_method_removed",function(N){return D(arguments),ne},-1),K(P,"$singleton_method_undefined",function(N){return D(arguments),ne},-1),K(P,"$method_missing",function B(N,M){B.$$p;var g,y,A=this,w=ne;return B.$$p=null,g=D(arguments,1),y=g,w=V.$inspect(A),m.$raise(W("NoMethodError").$new("undefined method `"+N+"' for "+w,N,y),ne,m.$caller(1))},-2),V.$pristine(P,"method_missing"),K(P,"$respond_to_missing?",function(N,M){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(e){var q=e.truthy,D=e.coerce_to,K=e.respond_to,z=e.Opal,ee=e.deny_frozen_access,V=e.freeze,R=e.freeze_props,Z=e.jsid,m=e.each_ivar,L=e.module,ie=e.return_val,F=e.def,X=e.Kernel,ne=e.gvars,W=e.slice,E=e.send,C=e.to_a,P=e.ensure_kwargs,B=e.hash_get,N=e.eqeq,M=e.rb_plus,g=e.extract_kwargs,y=e.eqeqeq,A=e.return_self,w=e.rb_le,p=e.rb_lt,s=e.Object,d=e.alias,x=e.klass,h=[],_=e.nil,o=e.$$$;return e.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(Y,H){var c=L(Y,"Kernel"),l=[c].concat(H),a=e.$r(l);F(c,"$=~",ie(!1)),F(c,"$!~",function(r){var $=this;return $["$=~"](r)["$!"]()}),F(c,"$===",function(r){var $=this,i=_;return q(i=$.$object_id()["$=="](r.$object_id()))?i:$["$=="](r)}),F(c,"$<=>",function(r){var $=this;$.$$comparable=!0;var i=$["$=="](r);return i&&i!==_?0:_}),F(c,"$method",function(r){var $=this,i=$[Z(r)];return(!i||i.$$stub)&&X.$raise(o("NameError").$new("undefined method `"+r+"' for class `"+$.$class()+"'",r)),o("Method").$new($,i.$$owner||$.$class(),i,r)}),F(c,"$methods",function(r){var $=this;return r==null&&(r=!0),q(r)?e.methods($):e.own_methods($)},-1),F(c,"$public_methods",function(r){var $=this;return r==null&&(r=!0),q(r)?e.methods($):e.receiver_methods($)},-1),F(c,"$Array",function(r){var $;return r===_?[]:r.$$is_array?r:($=z["$coerce_to?"](r,o("Array"),"to_ary"),$!==_||($=z["$coerce_to?"](r,o("Array"),"to_a"),$!==_)?$:[r])}),F(c,"$at_exit",function t(){var r=t.$$p||_,$=_;return ne.__at_exit__==null&&(ne.__at_exit__=_),t.$$p=null,ne.__at_exit__=q($=ne.__at_exit__)?$:[],ne.__at_exit__["$<<"](r),r}),F(c,"$caller",function(r,$){r==null&&(r=1),$==null&&($=_);var i,u;i=new Error().$backtrace(),u=[];for(var v=r+1,k=i.length;v<k;v++)i[v].match(/runtime\.js/)||u.push(i[v]);return $!=_&&(u=u.slice(0,$)),u},-1),F(c,"$caller_locations",function(r){var $,i,u=this;return $=W(arguments),i=$,E(E(u,"caller",C(i)),"map",[],function(k){return k==null&&(k=_),o(o(o("Thread"),"Backtrace"),"Location").$new(k)})},-1),F(c,"$class",function(){var r=this;return r.$$class}),F(c,"$copy_instance_variables",function(r){var $=this,i=Object.keys(r),u,v,k;for(u=0,v=i.length;u<v;u++)k=i[u],k.charAt(0)!=="$"&&r.hasOwnProperty(k)&&($[k]=r[k])}),F(c,"$copy_singleton_methods",function(r){var $=this,i,u,v,k;if(r.hasOwnProperty("$$meta")&&r.$$meta!==null){var T=e.get_singleton_class(r),S=e.get_singleton_class($);for(v=Object.getOwnPropertyNames(T.$$prototype),i=0,k=v.length;i<k;i++)u=v[i],e.is_method(u)&&(S.$$prototype[u]=T.$$prototype[u]);S.$$const=Object.assign({},T.$$const),Object.setPrototypeOf(S.$$prototype,Object.getPrototypeOf(T.$$prototype))}for(i=0,v=Object.getOwnPropertyNames(r),k=v.length;i<k;i++)u=v[i],u.charAt(0)==="$"&&u.charAt(1)!=="$"&&r.hasOwnProperty(u)&&($[u]=r[u])}),F(c,"$clone",function(r){var $,i=this,u=_;return r=P(r),$=B(r,"freeze"),$==null&&($=_),q($["$nil?"]())||N($,!0)||N($,!1)||i.$raise(a("ArgumentError"),"unexpected value for freeze: "+$.$class()),u=i.$class().$allocate(),u.$copy_instance_variables(i),u.$copy_singleton_methods(i),u.$initialize_clone(i,new Map([["freeze",$]])),(N($,!0)||q($["$nil?"]())&&q(i["$frozen?"]()))&&u.$freeze(),u},-1),F(c,"$initialize_clone",function(r,$){var i=this;return $=P($),B($,"freeze"),i.$initialize_copy(r),i},-2),F(c,"$define_singleton_method",function t(r,$){var i=t.$$p||_,u=this;return t.$$p=null,E(u.$singleton_class(),"define_method",[r,$],i.$to_proc())},-2),F(c,"$dup",function(){var r=this,$=_;return $=r.$class().$allocate(),$.$copy_instance_variables(r),$.$initialize_dup(r),$}),F(c,"$initialize_dup",function(r){var $=this;return $.$initialize_copy(r)}),F(c,"$enum_for",function t(r,$){var i=t.$$p||_,u,v,k,T=this;return t.$$p=null,u=W(arguments),u.length>0&&(v=u.shift()),v==null&&(v="each"),k=u,E(o("Enumerator"),"for",[T,v].concat(C(k)),i.$to_proc())},-1),F(c,"$equal?",function(r){var $=this;return $===r}),F(c,"$exit",function(r){var $=_,i=_;for(ne.__at_exit__==null&&(ne.__at_exit__=_),r==null&&(r=!0),ne.__at_exit__=q($=ne.__at_exit__)?$:[];!q(ne.__at_exit__["$empty?"]());)i=ne.__at_exit__.$pop(),i.$call();return r.$$is_boolean?r=r?0:1:r=D(r,o("Integer"),"to_int"),e.exit(r),_},-1),F(c,"$extend",function(r){var $,i,u=this;$=W(arguments),i=$,i.length==0&&u.$raise(o("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),ee(u);for(var v=u.$singleton_class(),k=i.length-1;k>=0;k--){var T=i[k];T.$$is_module||X.$raise(o("TypeError"),"wrong argument type "+T.$class()+" (expected Module)"),T.$append_features(v),T.$extend_object(u),T.$extended(u)}return u},-1),F(c,"$freeze",function(){var r=this;return q(r["$frozen?"]())?r:typeof r=="object"?(R(r),V(r)):r}),F(c,"$frozen?",function(){var r=this;switch(typeof r){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return r.$$frozen||!1;default:return!1}}),F(c,"$gets",function(r){var $,i;return ne.stdin==null&&(ne.stdin=_),$=W(arguments),i=$,E(ne.stdin,"gets",C(i))},-1),F(c,"$hash",function(){var r=this;return r.$__id__()}),F(c,"$initialize_copy",ie(_));var n=[];return F(c,"$inspect",function(){var r=this,$=_,i=_,u=_,v=_;return function(){try{try{return $="",i=r.$__id__(),q(n["$include?"](i))?$=" ...":(n["$<<"](i),u=!0,E(r.$instance_variables(),"each",[],function k(T){var S=k.$$s==null?this:k.$$s,G=_,O=_;return T==null&&(T=_),G=S.$instance_variable_get(T),O=a("Opal").$inspect(G),$=M($," "+T+"="+O)},{$$s:r})),"#<"+r.$class()+":0x"+i.$to_s(16)+$+">"}catch(k){if(e.rescue(k,[a("StandardError")])){v=k;try{return"#<"+r.$class()+":0x"+i.$to_s(16)+">"}finally{e.pop_exception(k)}}else throw k}}finally{q(u)&&n.$pop()}}()}),F(c,"$instance_of?",function(r){var $=this;return!r.$$is_class&&!r.$$is_module&&X.$raise(o("TypeError"),"class or module required"),$.$$class===r}),F(c,"$instance_variable_defined?",function(r){var $=this;return r=z["$instance_variable_name!"](r),e.hasOwnProperty.call($,r.substr(1))}),F(c,"$instance_variable_get",function(r){var $=this;r=z["$instance_variable_name!"](r);var i=$[e.ivar(r.substr(1))];return i??_}),F(c,"$instance_variable_set",function(r,$){var i=this;return ee(i),r=z["$instance_variable_name!"](r),i[e.ivar(r.substr(1))]=$}),F(c,"$remove_instance_variable",function(r){var $=this;r=z["$instance_variable_name!"](r);var i=e.ivar(r.substr(1)),u;return $.hasOwnProperty(i)?(u=$[i],delete $[i],u):X.$raise(o("NameError"),"instance variable "+r+" not defined")}),F(c,"$instance_variables",function(){var r=this,$=[];return m(r,function(i){i.substr(-1)==="$"&&(i=i.slice(0,i.length-1)),$.push("@"+i)}),$}),F(c,"$Integer",function(r,$,i){var u,v,k,T;u=W(arguments,1),v=g(u),v=P(v),u.length>0&&(k=u.shift()),T=B(v,"exception"),T==null&&(T=!0);var S,G,O;if(T=q(T),!r.$$is_string){if(k!==void 0)if(T)X.$raise(o("ArgumentError"),"base specified for non string value");else return _;if(r===_)if(T)X.$raise(o("TypeError"),"can't convert nil into Integer");else return _;if(r.$$is_number){if(r===1/0||r===-1/0||isNaN(r))if(T)X.$raise(o("FloatDomainError"),r);else return _;return Math.floor(r)}if(r["$respond_to?"]("to_int")&&(S=r.$to_int(),e.is_a(S,o("Integer")))||r["$respond_to?"]("to_i")&&(S=r.$to_i(),e.is_a(S,o("Integer"))))return S;if(T)X.$raise(o("TypeError"),"can't convert "+r.$class()+" into Integer");else return _}if(r==="0")return 0;if(k===void 0)k=0;else if(k=D(k,o("Integer"),"to_int"),k===1||k<0||k>36)if(T)X.$raise(o("ArgumentError"),"invalid radix "+k);else return _;if(G=r.toLowerCase(),G=G.replace(/(\d)_(?=\d)/g,"$1"),G=G.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,le,ce){switch(ce){case"0b":if(k===0||k===2)return k=2,le;case"0":case"0o":if(k===0||k===8)return k=8,le;case"0d":if(k===0||k===10)return k=10,le;case"0x":if(k===0||k===16)return k=16,le}if(T)X.$raise(o("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return _}),k=k===0?10:k,O="0-"+(k<=10?k-1:"9a-"+String.fromCharCode(97+(k-11))),!new RegExp("^\\s*[+-]?["+O+"]+\\s*$").test(G))if(T)X.$raise(o("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return _;if(S=parseInt(G,k),isNaN(S))if(T)X.$raise(o("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return _;return S},-2),F(c,"$Float",function(r,$){var i;$=P($),i=B($,"exception"),i==null&&(i=!0);var u;if(i=q(i),r===_)if(i)X.$raise(o("TypeError"),"can't convert nil into Float");else return _;if(r.$$is_string){if(u=r.toString(),u=u.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(u))return X.$Integer(u);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(u))if(i)X.$raise(o("ArgumentError"),'invalid value for Float(): "'+r+'"');else return _;return parseFloat(u)}return i?z["$coerce_to!"](r,o("Float"),"to_f"):D(r,o("Float"),"to_f")},-2),F(c,"$Hash",function(r){return q(r["$nil?"]())||N(r,[])?new Map:y(o("Hash"),r)?r:z["$coerce_to!"](r,o("Hash"),"to_hash")}),F(c,"$is_a?",function(r){var $=this;return!r.$$is_class&&!r.$$is_module&&X.$raise(o("TypeError"),"class or module required"),e.is_a($,r)}),F(c,"$itself",A),F(c,"$lambda",function t(){var r=t.$$p||_;return t.$$p=null,e.lambda(r)}),F(c,"$load",function(r){return r=z["$coerce_to!"](r,o("String"),"to_str"),e.load(r)}),F(c,"$loop",function t(){var r=t.$$p||_,$=this,i=_;if(t.$$p=null,r===_)return E($,"enum_for",["loop"],function(){return o(o("Float"),"INFINITY")});for(;q(!0);)try{e.yieldX(r,[])}catch(u){if(e.rescue(u,[o("StopIteration")])){i=u;try{return i.$result()}finally{e.pop_exception(u)}}else throw u}return $}),F(c,"$nil?",ie(!1)),F(c,"$printf",function(r){var $,i,u=this,v=_;return ne.stdout==null&&(ne.stdout=_),$=W(arguments),i=$,q(i["$empty?"]())||(v=q(i[0].$$is_string)?ne.stdout:i.$shift(),v.$write(E(u,"format",C(i)))),_},-1),F(c,"$proc",function t(){var r=t.$$p||_;return t.$$p=null,q(r)||X.$raise(o("ArgumentError"),"tried to create Proc object without a block"),r.$$is_lambda=!1,r}),F(c,"$puts",function(r){var $,i;return ne.stdout==null&&(ne.stdout=_),$=W(arguments),i=$,E(ne.stdout,"puts",C(i))},-1),F(c,"$p",function(r){var $,i;return $=W(arguments),i=$,E(i,"each",[],function(v){return ne.stdout==null&&(ne.stdout=_),v==null&&(v=_),ne.stdout.$puts(v.$inspect())}),q(w(i.$length(),1))?i["$[]"](0):i},-1),F(c,"$print",function(r){var $,i;return ne.stdout==null&&(ne.stdout=_),$=W(arguments),i=$,E(ne.stdout,"print",C(i))},-1),F(c,"$readline",function(r){var $,i;return ne.stdin==null&&(ne.stdin=_),$=W(arguments),i=$,E(ne.stdin,"readline",C(i))},-1),F(c,"$warn",function(r,$){var i,u,v,k,T,S,G=this,O=_;return ne.VERBOSE==null&&(ne.VERBOSE=_),ne.stderr==null&&(ne.stderr=_),i=W(arguments),u=g(i),u=P(u),v=i,k=B(u,"uplevel"),k==null&&(k=_),q(k)&&(k=z["$coerce_to!"](k,o("Integer"),"to_str"),q(p(k,0))&&X.$raise(o("ArgumentError"),"negative level ("+k+")"),O=(T=(S=G.$caller(M(k,1),1).$first(),S===_||S==null?_:S.$split(":in `")),T===_||T==null?_:T.$first()),q(O)&&(O=""+O+": "),v=E(v,"map",[],function(le){return le==null&&(le=_),""+O+"warning: "+le})),q(ne.VERBOSE["$nil?"]())||q(v["$empty?"]())?_:E(ne.stderr,"puts",C(v))},-1),F(c,"$raise",function(r,$,i){throw ne["!"]==null&&(ne["!"]=_),$==null&&($=_),i==null&&(i=_),r==null&&ne["!"]!==_?ne["!"]:(r==null?r=o("RuntimeError").$new(""):K(r,"$to_str")?r=o("RuntimeError").$new(r.$to_str()):r.$$is_class&&K(r,"$exception")?r=r.$exception($):r.$$is_exception||(r=o("TypeError").$new("exception class/object expected")),i!==_&&r.$set_backtrace(i),ne["!"]!==_&&e.exceptions.push(ne["!"]),ne["!"]=r,r)},-1),F(c,"$rand",function(r){return r===void 0?o(o("Random"),"DEFAULT").$rand():(r.$$is_number&&(r<0&&(r=Math.abs(r)),r%1!==0&&(r=r.$to_i()),r===0&&(r=void 0)),o(o("Random"),"DEFAULT").$rand(r))},-1),F(c,"$respond_to?",function(r,$){var i=this;$==null&&($=!1);var u=i[Z(r)];return typeof u=="function"&&!u.$$stub?!0:i["$respond_to_missing?"].$$pristine===!0?!1:i["$respond_to_missing?"](r,$)},-2),F(c,"$respond_to_missing?",function(r,$){return!1},-2),z.$pristine(c,"respond_to?","respond_to_missing?"),F(c,"$require",function(r){return typeof r!="string"&&e.String&&e.Array&&(r=z["$coerce_to!"](r,o("String"),"to_str")),e.require(r)}),F(c,"$require_relative",function(r){return z["$try_convert!"](r,o("String"),"to_str"),r=o("File").$expand_path(o("File").$join(e.current_file,"..",r)),e.require(r)}),F(c,"$require_tree",function(r,$){var i;$=P($),i=B($,"autoload"),i==null&&(i=!1);var u=[];r=o("File").$expand_path(r),r=e.normalize(r),r==="."&&(r="");for(var v in e.modules)v["$start_with?"](r)&&(i?u.push([v,!0]):u.push([v,e.require(v)]));return u},-2),F(c,"$singleton_class",function(){var r=this;return e.get_singleton_class(r)}),F(c,"$sleep",function(r){r==null&&(r=_),r===_&&X.$raise(o("TypeError"),"can't convert NilClass into time interval"),r.$$is_number||X.$raise(o("TypeError"),"can't convert "+r.$class()+" into time interval"),r<0&&X.$raise(o("ArgumentError"),"time interval must be positive");for(var $=e.global.performance?function(){return performance.now()}:function(){return new Date},i=$();$()-i<=r*1e3;);return Math.round(r)},-1),F(c,"$srand",function(r){return r==null&&(r=a("Random").$new_seed()),o("Random").$srand(r)},-1),F(c,"$String",function(r){var $=_;return q($=z["$coerce_to?"](r,o("String"),"to_str"))?$:z["$coerce_to!"](r,o("String"),"to_s")}),F(c,"$tap",function t(){var r=t.$$p||_,$=this;return t.$$p=null,e.yield1(r,$),$}),F(c,"$to_proc",A),F(c,"$to_s",function(){var r=this;return"#<"+r.$class()+":0x"+r.$__id__().$to_s(16)+">"}),F(c,"$catch",function t(r){var $=t.$$p||_,i=_,u=_;t.$$p=null,r==null&&(r=_);try{return r=q(i=r)?i:s.$new(),e.yield1($,r)}catch(v){if(e.rescue(v,[o("UncaughtThrowError")])){u=v;try{return N(u.$tag(),r)?u.$value():X.$raise()}finally{e.pop_exception(v)}}else throw v}},-1),F(c,"$throw",function(r,$){return $==null&&($=_),X.$raise(o("UncaughtThrowError").$new(r,$))},-2),F(c,"$open",function t(r){var $=t.$$p||_,i,u;return t.$$p=null,i=W(arguments),u=i,E(o("File"),"open",C(u),$.$to_proc())},-1),F(c,"$yield_self",function t(){var r=t.$$p||_,$=this;return t.$$p=null,r===_?E($,"enum_for",["yield_self"],ie(1)):e.yield1(r,$)}),d(c,"fail","raise"),d(c,"kind_of?","is_a?"),d(c,"object_id","__id__"),d(c,"public_send","__send__"),d(c,"send","__send__"),d(c,"then","yield_self"),d(c,"to_enum","enum_for")}("::",h),function(Y,H){var c=x(Y,H,"Object");return delete s.$$prototype.$require,c.$include(X)}("::",null)};Opal.modules["corelib/main"]=function(e){var q=e.return_val,D=e.def,K=e.Object,z=e.slice,ee=e.Kernel,V=e.top;return e.nil,e.add_stubs("include,raise"),function(R,Z){return D(R,"$to_s",q("main")),D(R,"$include",function(L){return K.$include(L)}),D(R,"$autoload",function(L){var ie,F;return ie=z(arguments),F=ie,e.Object.$autoload.apply(e.Object,F)},-1),D(R,"$using",function(L){return ee.$raise("main.using is permitted only at toplevel")})}(e.get_singleton_class(V))};Opal.modules["corelib/error/errno"]=function(e){var q=e.module,D=e.truthy,K=e.rb_plus,z=e.send2,ee=e.find_super,V=e.def,R=e.klass,Z=e.nil,m=e.$$$;return e.add_stubs("+,errno,class,attr_reader"),function(L,ie){var F=q(L,"Errno"),X=Z,ne=Z;X=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],ne=Z;var W;for(W=0;W<X.length;W++)(function(){var E=X[W][0],C=X[W][1],P=X[W][2];ne=e.klass(F,e.SystemCallError,E),ne.errno=P,function(B,N){return V(B,"$new",function M(g){M.$$p;var y=this,A=Z;return M.$$p=null,g==null&&(g=Z),A=C,D(g)&&(A=K(A," - "+g)),z(y,ee(y,"new",M,!1,!0),"new",[A],null)},-1)}(e.get_singleton_class(ne))})()}("::"),function(L,ie,F){var X=R(L,ie,"SystemCallError");return V(X,"$errno",function(){var W=this;return W.$class().$errno()}),function(ne,W){return ne.$attr_reader("errno")}(e.get_singleton_class(X))}("::",m("StandardError"))};Opal.modules["corelib/error"]=function(e){var q=e.klass,D=e.slice,K=e.gvars,z=e.defs,ee=e.send,V=e.to_a,R=e.def,Z=e.send2,m=e.find_super,L=e.truthy,ie=e.Kernel,F=e.not,X=e.rb_plus,ne=e.eqeq,W=e.Object,E=e.ensure_kwargs,C=e.hash_get,P=e.module,B=[],N=e.nil,M=e.$$$;return e.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(g,y,A){var w=q(g,y,"Exception"),p=[w].concat(A),s=e.$r(p),d=w.$$prototype;d.message=N,e.prop(w.$$prototype,"$$is_exception",!0);var x;Error.stackTraceLimit=100,z(w,"$new",function(o){var Y,H,c=this;K["!"]==null&&(K["!"]=N),Y=D(arguments),H=Y;var l=H.length>0?H[0]:N,a=new c.$$constructor(l);return a.name=c.$$name,a.message=l,a.cause=K["!"],e.send(a,a.$initialize,H),e.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace(a,x),a},-1),x=w.$new,z(w,"$exception",function(o){var Y,H,c=this;return Y=D(arguments),H=Y,ee(c,"new",V(H))},-1),R(w,"$initialize",function(o){var Y,H,c=this;return Y=D(arguments),H=Y,c.message=H.length>0?H[0]:N},-1),R(w,"$copy_instance_variables",function _(o){var Y=_.$$p||N,H=this;_.$$p=null,Z(H,m(H,"copy_instance_variables",_,!1,!0),"copy_instance_variables",[o],Y),H.message=o.message,H.cause=o.cause,H.stack=o.stack});function h(_){for(var o=[],Y,H=0;H<_.length;H++){var c=_[H];!c||!c.$$is_string||((Y=c.match(/^    at (.*?) \((.*?)\)$/))?o.push(Y[2]+":in `"+Y[1]+"'"):(Y=c.match(/^    at (.*?)$/))?o.push(Y[1]+":in `undefined'"):(Y=c.match(/^  from (.*?)$/))?o.push(Y[1]):(Y=c.match(/^(.*?)@(.*?)$/))&&o.push(Y[2]+":in `"+Y[1]+"'"))}return o}return R(w,"$backtrace",function(){var o=this;if(o.backtrace)return o.backtrace;var Y=o.stack;return typeof Y<"u"&&Y.$$is_string?o.backtrace=h(Y.split(`
`)):Y?o.backtrace=h(Y):[]}),R(w,"$backtrace_locations",function(){var o,Y=this;return Y.backtrace_locations||(Y.backtrace_locations=(o=Y.$backtrace(),o===N||o==null?N:ee(o,"map",[],function(c){return c==null&&(c=N),M(M(M("Thread"),"Backtrace"),"Location").$new(c)}))),Y.backtrace_locations}),R(w,"$cause",function(){var o=this;return o.cause||N}),R(w,"$exception",function(o){var Y=this;if(o==null&&(o=N),o===N||Y===o)return Y;var H=Y.$clone();return H.message=o,Y.backtrace&&(H.backtrace=Y.backtrace.$dup()),H.stack=Y.stack,H.cause=Y.cause,H},-1),R(w,"$message",function(){var o=this;return o.$to_s()}),R(w,"$full_message",function(o){var Y,H=this,c=N,l=N,a=N,n=N,t=N,r=N,$=N,i=N,u=N;return K.stderr==null&&(K.stderr=N),o==null&&(o=N),L(s("Hash","skip_raise")?"constant":N)?(o=new Map([["highlight",K.stderr["$tty?"]()],["order","top"]]).$merge(L(c=o)?c:new Map),Y=[o["$[]"]("highlight"),o["$[]"]("order")],l=Y[0],a=Y[1],L([!0,!1]["$include?"](l))||ie.$raise(M("ArgumentError"),"expected true or false as highlight: "+l),L(["top","bottom"]["$include?"](a))||ie.$raise(M("ArgumentError"),"expected :top or :bottom as order: "+a),L(l)?(n="\x1B[1;4m",t="\x1B[1m",r="\x1B[m"):n=t=r="",$=H.$backtrace().$dup(),(F($)||L($["$empty?"]()))&&($=H.$caller()),i=$.$shift(),u=""+i+": ",u=X(u,""+t+H.$to_s()+" ("+n+H.$class()+r+t+")"+r+`
`),u=X(u,ee($,"map",[],function(k){return k==null&&(k=N),"	from "+k+`
`}).$join()),L(H.$cause())&&(u=X(u,H.$cause().$full_message(new Map([["highlight",l]])))),ne(a,"bottom")&&(u=u.$split(`
`).$reverse().$join(`
`),u=X(""+t+"Traceback"+r+` (most recent call last):
`,u)),u):""+H.message+`
`+H.stack},-1),R(w,"$inspect",function(){var o=this,Y=N;return Y=o.$to_s(),L(Y["$empty?"]())?o.$class().$to_s():"#<"+o.$class().$to_s()+": "+o.$to_s()+">"}),R(w,"$set_backtrace",function(o){var Y=this,H=!0,c,l;if(o===N)Y.backtrace=N,Y.stack="";else if(o.$$is_string)Y.backtrace=[o],Y.stack="  from "+o;else{if(o.$$is_array){for(c=0,l=o.length;c<l;c++)if(!o[c].$$is_string){H=!1;break}}else H=!1;H===!1&&ie.$raise(M("TypeError"),"backtrace must be Array of String"),Y.backtrace=o,Y.stack=ee(o,"map",[],function(n){return n==null&&(n=N),X("  from ",n)}).join(`
`)}return o}),R(w,"$to_s",function(){var o=this,Y=N,H=N;return L(Y=L(H=o.message)?o.message.$to_s():H)?Y:o.$class().$to_s()})}("::",Error,B),q("::",M("Exception"),"ScriptError"),q("::",M("ScriptError"),"SyntaxError"),q("::",M("ScriptError"),"LoadError"),q("::",M("ScriptError"),"NotImplementedError"),q("::",M("Exception"),"SystemExit"),q("::",M("Exception"),"NoMemoryError"),q("::",M("Exception"),"SignalException"),q("::",M("SignalException"),"Interrupt"),q("::",M("Exception"),"SecurityError"),q("::",M("Exception"),"SystemStackError"),q("::",M("Exception"),"StandardError"),q("::",M("StandardError"),"EncodingError"),q("::",M("StandardError"),"ZeroDivisionError"),q("::",M("StandardError"),"NameError"),q("::",M("NameError"),"NoMethodError"),q("::",M("StandardError"),"RuntimeError"),q("::",M("RuntimeError"),"FrozenError"),q("::",M("StandardError"),"LocalJumpError"),q("::",M("StandardError"),"TypeError"),q("::",M("StandardError"),"ArgumentError"),q("::",M("ArgumentError"),"UncaughtThrowError"),q("::",M("StandardError"),"IndexError"),q("::",M("IndexError"),"StopIteration"),q("::",M("StopIteration"),"ClosedQueueError"),q("::",M("IndexError"),"KeyError"),q("::",M("StandardError"),"RangeError"),q("::",M("RangeError"),"FloatDomainError"),q("::",M("StandardError"),"IOError"),q("::",M("IOError"),"EOFError"),q("::",M("StandardError"),"SystemCallError"),q("::",M("StandardError"),"RegexpError"),q("::",M("StandardError"),"ThreadError"),q("::",M("StandardError"),"FiberError"),W.$autoload("Errno","corelib/error/errno"),function(g,y){var A=q(g,y,"FrozenError");return A.$attr_reader("receiver"),R(A,"$initialize",function w(p,s){var d;w.$$p;var x=this;return w.$$p=null,s=E(s),d=C(s,"receiver"),d==null&&(d=N),Z(x,m(x,"initialize",w,!1,!0),"initialize",[p],null),x.receiver=d},-2)}("::",M("RuntimeError")),function(g,y){var A=q(g,y,"UncaughtThrowError"),w=A.$$prototype;return w.tag=N,A.$attr_reader("tag","value"),R(A,"$initialize",function p(s,d){p.$$p;var x=this;return p.$$p=null,d==null&&(d=N),x.tag=s,x.value=d,Z(x,m(x,"initialize",p,!1,!0),"initialize",["uncaught throw "+x.tag.$inspect()],null)},-2)}("::",M("ArgumentError")),function(g,y){var A=q(g,y,"NameError");return A.$attr_reader("name"),R(A,"$initialize",function w(p,s){w.$$p;var d=this;return w.$$p=null,s==null&&(s=N),Z(d,m(d,"initialize",w,!1,!0),"initialize",[p],null),d.name=s},-2)}("::",null),function(g,y){var A=q(g,y,"NoMethodError");return A.$attr_reader("args"),R(A,"$initialize",function w(p,s,d){w.$$p;var x=this;return w.$$p=null,s==null&&(s=N),d==null&&(d=[]),Z(x,m(x,"initialize",w,!1,!0),"initialize",[p,s],null),x.args=d},-2)}("::",null),function(g,y){var A=q(g,y,"StopIteration");return A.$attr_reader("result")}("::",null),function(g,y){var A=q(g,y,"KeyError"),w=A.$$prototype;return w.receiver=w.key=N,R(A,"$initialize",function p(s,d){var x,h;p.$$p;var _=this;return p.$$p=null,d=E(d),x=C(d,"receiver"),x==null&&(x=N),h=C(d,"key"),h==null&&(h=N),Z(_,m(_,"initialize",p,!1,!0),"initialize",[s],null),_.receiver=x,_.key=h},-2),R(A,"$receiver",function(){var s=this,d=N;return L(d=s.receiver)?d:ie.$raise(M("ArgumentError"),"no receiver is available")}),R(A,"$key",function(){var s=this,d=N;return L(d=s.key)?d:ie.$raise(M("ArgumentError"),"no key is available")})}("::",null),function(g,y){var A=q(g,y,"LocalJumpError");return A.$attr_reader("exit_value","reason"),R(A,"$initialize",function w(p,s,d){w.$$p;var x=this;return w.$$p=null,s==null&&(s=N),d==null&&(d="noreason"),Z(x,m(x,"initialize",w,!1,!0),"initialize",[p],null),x.exit_value=s,x.reason=d},-2)}("::",null),function(g,y){var A=P(g,"JS"),w=[A].concat(y);return q(w[0],null,"Error"),N}("::",B)};Opal.modules["corelib/constants"]=function(e){var q=e.const_set;e.nil;var D=e.$$$;return q("::","RUBY_PLATFORM","opal"),q("::","RUBY_ENGINE","opal"),q("::","RUBY_VERSION","3.2.0"),q("::","RUBY_ENGINE_VERSION","1.8.2"),q("::","RUBY_RELEASE_DATE","2023-11-23"),q("::","RUBY_PATCHLEVEL",0),q("::","RUBY_REVISION","0"),q("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),q("::","RUBY_DESCRIPTION","opal "+D("RUBY_ENGINE_VERSION")+" ("+D("RUBY_RELEASE_DATE")+" revision "+D("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(e){var q=e.Object;return e.nil,e.add_stubs("require"),q.$require("corelib/runtime"),q.$require("corelib/helpers"),q.$require("corelib/module"),q.$require("corelib/class"),q.$require("corelib/basic_object"),q.$require("corelib/kernel"),q.$require("corelib/main"),q.$require("corelib/error"),q.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(e){var q=e.klass,D=e.Kernel,K=e.def,z=e.return_val,ee=e.ensure_kwargs,V=e.hash_get,R=e.NilClass,Z=e.slice,m=e.truthy,L=e.rb_gt,ie=e.alias,F=e.nil,X=e.$$$;return e.add_stubs("raise,name,new,>,length,Rational,to_i"),function(ne,W,E){var C=q(ne,W,"NilClass");return C.$$prototype.$$meta=C,function(P,B){return K(P,"$allocate",function(){var M=this;return D.$raise(X("TypeError"),"allocator undefined for "+M.$name())}),e.udef(P,"$new"),F}(e.get_singleton_class(C)),K(C,"$!",z(!0)),K(C,"$&",z(!1)),K(C,"$|",function(B){return B!==!1&&B!==F}),K(C,"$^",function(B){return B!==!1&&B!==F}),K(C,"$==",function(B){return B===F}),K(C,"$dup",z(F)),K(C,"$clone",function(B){return B=ee(B),V(B,"freeze"),F},-1),K(C,"$inspect",z("nil")),K(C,"$nil?",z(!0)),K(C,"$singleton_class",function(){return R}),K(C,"$to_a",function(){return[]}),K(C,"$to_h",function(){return new Map}),K(C,"$to_i",z(0)),K(C,"$to_s",z("")),K(C,"$to_c",function(){return X("Complex").$new(0,0)}),K(C,"$rationalize",function(B){var N,M;return N=Z(arguments),M=N,m(L(M.$length(),1))&&D.$raise(X("ArgumentError")),D.$Rational(0,1)},-1),K(C,"$to_r",function(){return D.$Rational(0,1)}),K(C,"$instance_variables",function(){return[]}),ie(C,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(e){var q=e.klass,D=e.Kernel,K=e.def,z=e.return_self,ee=e.ensure_kwargs,V=e.hash_get,R=e.slice,Z=e.truthy,m=e.send2,L=e.find_super,ie=e.to_a,F=e.alias,X=e.nil,ne=e.$$$;return e.add_stubs("raise,name,==,to_s,__id__"),function(W,E,C){var P=q(W,E,"Boolean");e.prop(P.$$prototype,"$$is_boolean",!0);for(var B=["$$class","$$meta"],N=0;N<B.length;N++)Object.defineProperty(P.$$prototype,B[N],{configurable:!0,enumerable:!1,get:function(){return this==!0?e.TrueClass:this==!1?e.FalseClass:e.Boolean}});return Object.defineProperty(P.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:X}}),function(M,g){return K(M,"$allocate",function(){var A=this;return D.$raise(ne("TypeError"),"allocator undefined for "+A.$name())}),e.udef(M,"$new"),X}(e.get_singleton_class(P)),K(P,"$__id__",function(){var g=this;return g.valueOf()?2:0}),K(P,"$!",function(){var g=this;return g!=!0}),K(P,"$&",function(g){var y=this;return y==!0?g!==!1&&g!==X:!1}),K(P,"$|",function(g){var y=this;return y==!0?!0:g!==!1&&g!==X}),K(P,"$^",function(g){var y=this;return y==!0?g===!1||g===X:g!==!1&&g!==X}),K(P,"$==",function(g){var y=this;return y==!0===g.valueOf()}),K(P,"$singleton_class",function(){var g=this;return g.$$meta}),K(P,"$to_s",function(){var g=this;return g==!0?"true":"false"}),K(P,"$dup",z),K(P,"$clone",function(g){var y=this;return g=ee(g),V(g,"freeze"),y},-1),K(P,"$method_missing",function M(g,y){var A=M.$$p||X,w,p,s=this;M.$$p=null,w=R(arguments,1),p=w;var d=s.$$class.$$prototype[e.jsid(g)];return Z(typeof d<"u"&&!d.$$stub)||m(s,L(s,"method_missing",M,!1,!0),"method_missing",[g].concat(ie(p)),A),e.send(s,d,p,A)},-2),K(P,"$respond_to_missing?",function(g,y){var A=this,w=A.$$class.$$prototype[e.jsid(g)];return typeof w<"u"&&!w.$$stub},-2),F(P,"eql?","=="),F(P,"equal?","=="),F(P,"inspect","to_s"),F(P,"object_id","__id__")}("::",Boolean),q("::",ne("Boolean"),"TrueClass"),q("::",ne("Boolean"),"FalseClass"),X};Opal.modules["corelib/comparable"]=function(e){var q=e.truthy,D=e.module,K=e.rb_gt,z=e.rb_lt,ee=e.eqeqeq,V=e.Kernel,R=e.def,Z=e.nil,m=e.$$$;return e.add_stubs(">,<,===,raise,class,<=>,equal?"),function(L){var ie=D(L,"Comparable"),F=Z;function X(E){return e.is_a(E,e.Integer)?E:K(E,0)?1:z(E,0)?-1:0}function ne(E,C){var P;ee(Z,F=C)||ee(!0,F)||ee(!1,F)||ee(m("Integer"),F)||ee(m("Float"),F)?P=C.$inspect():P=C.$$class,V.$raise(m("ArgumentError"),"comparison of "+E.$class()+" with "+P+" failed")}function W(E,C){var P=E["$<=>"](C);return q(P)||ne(E,C),X(P)}return R(ie,"$==",function(C){var P=this,B=Z;return q(P["$equal?"](C))?!0:P["$<=>"]==e.Kernel["$<=>"]?!1:P.$$comparable?(P.$$comparable=!1,!1):q(B=P["$<=>"](C))?X(B)==0:!1}),R(ie,"$>",function(C){var P=this;return W(P,C)>0}),R(ie,"$>=",function(C){var P=this;return W(P,C)>=0}),R(ie,"$<",function(C){var P=this;return W(P,C)<0}),R(ie,"$<=",function(C){var P=this;return W(P,C)<=0}),R(ie,"$between?",function(C,P){var B=this;return!(q(z(B,C))||q(K(B,P)))}),R(ie,"$clamp",function(C,P){var B=this;P==null&&(P=Z);var N,M;if(P===Z&&(e.is_a(C,e.Range)||V.$raise(m("TypeError"),"wrong argument type "+C.$class()+" (expected Range)"),M=C.excl,P=C.end,C=C.begin,P!==Z&&M&&V.$raise(m("ArgumentError"),"cannot clamp with an exclusive range")),C!==Z&&P!==Z&&W(C,P)>0&&V.$raise(m("ArgumentError"),"min argument must be smaller than max argument"),C!==Z){if(N=W(B,C),N==0)return B;if(N<0)return C}return P!==Z&&(N=W(B,P),N>0)?P:B},-2)}("::")};Opal.modules["corelib/regexp"]=function(e){var q=e.coerce_to,D=e.prop,K=e.freeze,z=e.klass,ee=e.const_set,V=e.send2,R=e.find_super,Z=e.def,m=e.truthy,L=e.gvars,ie=e.slice,F=e.Kernel,X=e.Opal,ne=e.alias,W=e.send,E=e.regexp,C=e.rb_plus,P=e.ensure_kwargs,B=e.hash_get,N=e.rb_ge,M=e.to_a,g=e.eqeqeq,y=e.rb_minus,A=e.return_ivar,w=[],p=e.nil,s=e.$$$;return e.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),z("::",s("StandardError"),"RegexpError"),function(d,x,h){var _=z(d,x,"Regexp"),o=[_].concat(h),Y=e.$r(o);return ee(_,"IGNORECASE",1),ee(_,"EXTENDED",2),ee(_,"MULTILINE",4),e.prop(_.$$prototype,"$$is_regexp",!0),function(H,c){var l=[H].concat(c),a=e.$r(l);return Z(H,"$allocate",function n(){var t=n.$$p||p,r=this,$=p;return n.$$p=null,$=V(r,R(r,"allocate",n,!1,!0),"allocate",[],t),$.uninitialized=!0,$}),Z(H,"$escape",function(t){return t=q(t,s("String"),"to_str"),e.escape_regexp(t)}),Z(H,"$last_match",function(t){return L["~"]==null&&(L["~"]=p),t==null&&(t=p),m(t["$nil?"]())?L["~"]:m(L["~"])?L["~"]["$[]"](t):p},-1),Z(H,"$union",function(t){var r,$,i=this;r=ie(arguments),$=r;var u,v,k,T,S;if($.length==0)return/(?!)/;if($.length==1&&$[0].$$is_regexp)return $[0];u=$[0].$$is_array,$.length>1&&u&&F.$raise(s("TypeError"),"no implicit conversion of Array into String"),u&&($=$[0]),T=void 0,v=[];for(var G=0;G<$.length;G++)k=$[G],k.$$is_string?v.push(i.$escape(k)):k.$$is_regexp?(S=k.$options(),T!=null&&T!=S&&F.$raise(s("TypeError"),"All expressions must use the same options"),T=S,v.push("("+k.source+")")):v.push(i.$escape(k.$to_str()));return i.$new(v.$join("|"),T)},-1),Z(H,"$new",function(t,r){if(t.$$is_regexp)return new RegExp(t);if(t=X["$coerce_to!"](t,s("String"),"to_str"),t.charAt(t.length-1)==="\\"&&t.charAt(t.length-2)!=="\\"&&F.$raise(s("RegexpError"),"too short escape sequence: /"+t+"/"),t=t.replace("\\A","^").replace("\\z","$"),r===void 0||r["$!"]())return new RegExp(t);if(r.$$is_number){var $="";a("IGNORECASE")&r&&($+="i"),a("MULTILINE")&r&&($+="m"),r=$}else r="i";return new RegExp(t,r)},-2),ne(H,"compile","new"),ne(H,"quote","escape")}(e.get_singleton_class(_),o),Z(_,"$==",function(c){var l=this;return c instanceof RegExp&&l.toString()===c.toString()}),Z(_,"$===",function(c){var l=this;return l.$match(X["$coerce_to?"](c,s("String"),"to_str"))!==p}),Z(_,"$=~",function(c){var l=this,a=p;return L["~"]==null&&(L["~"]=p),m(a=l.$match(c))?L["~"].$begin(0):a}),Z(_,"$freeze",function(){var c=this;return m(c["$frozen?"]())?c:(c.hasOwnProperty("$$g")||D(c,"$$g",null),c.hasOwnProperty("$$gm")||D(c,"$$gm",null),K(c))}),Z(_,"$inspect",function(){var c=this,l=/^\/(.*)\/([^\/]*)$/,a=c.toString(),n=l.exec(a);if(n){for(var t=n[1],r=n[2],$=t.split(""),i=$.length,u=!1,v="",k=0;k<i;k++){var T=$[k];!u&&T=="/"&&(v=v.concat("\\")),v=v.concat(T),T=="\\"?u?u=!1:u=!0:u=!1}return"/"+v+"/"+r}else return a}),Z(_,"$match",function H(c,l){var a=H.$$p||p,n=this;if(L["~"]==null&&(L["~"]=p),H.$$p=null,n.uninitialized&&F.$raise(s("TypeError"),"uninitialized Regexp"),l===void 0){if(c===p)return L["~"]=p;var t=n.exec(q(c,s("String"),"to_str"));return t?(L["~"]=s("MatchData").$new(n,t),a===p?L["~"]:e.yield1(a,L["~"])):L["~"]=p}if(l=q(l,s("Integer"),"to_int"),c===p||(c=q(c,s("String"),"to_str"),l<0&&(l+=c.length,l<0)))return L["~"]=p;for(var r,$=e.global_regexp(n);;){if(r=$.exec(c),r===null)return L["~"]=p;if(r.index>=l)return L["~"]=s("MatchData").$new($,r),a===p?L["~"]:e.yield1(a,L["~"]);$.lastIndex=r.index+1}},-2),Z(_,"$match?",function(c,l){var a=this;if(a.uninitialized&&F.$raise(s("TypeError"),"uninitialized Regexp"),l===void 0)return c===p?!1:a.test(q(c,s("String"),"to_str"));if(l=q(l,s("Integer"),"to_int"),c===p||(c=q(c,s("String"),"to_str"),l<0&&(l+=c.length,l<0)))return!1;var n,t=e.global_regexp(a);return n=t.exec(c),!(n===null||n.index<l)},-2),Z(_,"$names",function(){var c=this;return W(c.$source().$scan(E(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),Z(_,"$named_captures",function(){var c=this;return W(W(W(c.$source().$scan(E(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function(a){return a==null&&(a=p),W(a,"map",[],function(t){return t==null&&(t=p),C(t.$last(),1)})})}),Z(_,"$~",function(){var c=this;return L._==null&&(L._=p),c["$=~"](L._)}),Z(_,"$source",function(){var c=this;return c.source}),Z(_,"$options",function(){var c=this;c.uninitialized&&F.$raise(s("TypeError"),"uninitialized Regexp");var l=0;return c.multiline&&(l|=Y("MULTILINE")),c.ignoreCase&&(l|=Y("IGNORECASE")),l}),Z(_,"$casefold?",function(){var c=this;return c.ignoreCase}),ne(_,"eql?","=="),ne(_,"to_s","source")}("::",RegExp,w),function(d,x,h){var _=z(d,x,"MatchData"),o=[_].concat(h),Y=e.$r(o),H=_.$$prototype;return H.matches=p,_.$attr_reader("post_match","pre_match","regexp","string"),Z(_,"$initialize",function(l,a,n){var t,r=this;n=P(n),t=B(n,"no_matchdata"),t==null&&(t=!1),m(t)||(L["~"]=r),r.regexp=l,r.begin=a.index,r.string=a.input,r.pre_match=a.input.slice(0,a.index),r.post_match=a.input.slice(a.index+a[0].length),r.matches=[];for(var $=0,i=a.length;$<i;$++){var u=a[$];u==null?r.matches.push(p):r.matches.push(u)}},-3),Z(_,"$match",function(l){var a=this,n=p;return m(n=a["$[]"](l))?n:m(l["$is_a?"](Y("Integer")))&&m(N(l,a.$length()))?F.$raise(s("IndexError"),"index "+l+" out of matches"):p}),Z(_,"$match_length",function(l){var a,n=this;return a=n.$match(l),a===p||a==null?p:a.$length()}),Z(_,"$[]",function(l){var a,n,t=this;return a=ie(arguments),n=a,n[0].$$is_string?(t.$regexp().$names()["$include?"](n["$[]"](0))["$!"]()&&F.$raise(s("IndexError"),"undefined group name reference: "+n["$[]"](0)),t.$named_captures()["$[]"](n["$[]"](0))):W(t.matches,"[]",M(n))},-1),Z(_,"$offset",function(l){var a=this;return l!==0&&F.$raise(s("ArgumentError"),"MatchData#offset only supports 0th element"),[a.begin,a.begin+a.matches[l].length]}),Z(_,"$==",function(l){var a=this,n=p,t=p,r=p,$=p;return g(s("MatchData"),l)?m(n=m(t=m(r=m($=a.string==l.string)?a.regexp.toString()==l.regexp.toString():$)?a.pre_match==l.pre_match:r)?a.post_match==l.post_match:t)?a.begin==l.begin:n:!1}),Z(_,"$begin",function(l){var a=this;return l!==0&&F.$raise(s("ArgumentError"),"MatchData#begin only supports 0th element"),a.begin}),Z(_,"$end",function(l){var a=this;return l!==0&&F.$raise(s("ArgumentError"),"MatchData#end only supports 0th element"),a.begin+a.matches[l].length}),Z(_,"$captures",function(){var l=this;return l.matches.slice(1)}),Z(_,"$named_captures",function(){var l=this,a=p;return a=l.$captures(),W(l.$regexp().$named_captures(),"transform_values",[],function(t){return t==null&&(t=p),a["$[]"](y(t.$last(),1))})}),Z(_,"$names",function(){var l=this;return l.$regexp().$names()}),Z(_,"$inspect",function(){var l=this,a="#<MatchData "+l.matches[0].$inspect();if(l.$regexp().$names()["$empty?"]())for(var n=1,t=l.matches.length;n<t;n++)a+=" "+n+":"+l.matches[n].$inspect();else W(l.$named_captures(),"each",[],function($,i){return $==null&&($=p),i==null&&(i=p),a+=" "+$+":"+i.$inspect()});return a+">"}),Z(_,"$length",function(){var l=this;return l.matches.length}),Z(_,"$to_a",A("matches")),Z(_,"$to_s",function(){var l=this;return l.matches[0]}),Z(_,"$values_at",function(l){var a,n,t=this;a=ie(arguments),n=a;var r,$,i,u=[];for(r=0;r<n.length;r++){if(n[r].$$is_range&&($=n[r].$to_a(),$.unshift(r,1),Array.prototype.splice.apply(n,$)),i=X["$coerce_to!"](n[r],s("Integer"),"to_int"),i<0&&(i+=t.matches.length,i<0)){u.push(p);continue}u.push(t.matches[i])}return u},-1),ne(_,"eql?","=="),ne(_,"size","length")}(w[0],null,w)};Opal.modules["corelib/string"]=function(e){var q=e.coerce_to,D=e.respond_to,K=e.global_multiline_regexp,z=e.prop,ee=e.opal32_init,V=e.opal32_add,R=e.klass,Z=e.send2,m=e.find_super,L=e.def,ie=e.Opal,F=e.defs,X=e.slice,ne=e.send,W=e.to_a,E=e.extract_kwargs,C=e.ensure_kwargs,P=e.hash_get,B=e.eqeqeq,N=e.Kernel,M=e.truthy,g=e.gvars,y=e.rb_divide,A=e.rb_plus,w=e.eqeq,p=e.alias,s=e.const_set,d=e.top,x=[],h=e.$r(x),_=e.nil,o=e.$$$;return e.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),d.$require("corelib/comparable"),d.$require("corelib/regexp"),function(Y,H,c){var l=R(Y,H,"String"),a=[l].concat(c),n=e.$r(a);l.$include(o("Comparable")),e.prop(l.$$prototype,"$$is_string",!0);var t=new Map;(function(){L(l,"$__id__",function $(){var i=$.$$p||_,u=this;if($.$$p=null,typeof u=="object")return Z(u,m(u,"__id__",$,!1,!0),"__id__",[],i);if(t.has(u))return t.get(u);var v=e.uid();return t.set(u,v),v}),L(l,"$hash",function(){var i=this,u=ee(),v,k=i.length;for(u=V(u,5),u=V(u,k),v=0;v<k;v++)u=V(u,i.charCodeAt(v));return u})})(),F(l,"$try_convert",function(i){return ie["$coerce_to?"](i,o("String"),"to_str")}),F(l,"$new",function(i){var u,v,k=this;u=X(arguments),v=u;var T=v[0]||"",S=v[v.length-1];return T=q(T,o("String"),"to_str"),S&&S.$$is_hash&&S.has("encoding")&&(T=T.$force_encoding(S.get("encoding").value)),T=new k.$$constructor(T),T.$initialize.$$pristine||ne(T,"initialize",W(v)),T},-1),L(l,"$initialize",function(i,u){var v,k;return v=X(arguments),k=E(v),k=C(k),v.length>0&&v.shift(),P(k,"encoding"),P(k,"capacity"),_},-1),L(l,"$%",function(i){var u=this;return B(o("Array"),i)?ne(u,"format",[u].concat(W(i))):u.$format(u,i)}),L(l,"$*",function(i){var u=this;if(i=q(i,o("Integer"),"to_int"),i<0&&N.$raise(o("ArgumentError"),"negative argument"),i===0)return"";var v="",k=u.toString();for(k.length*i>=1<<28&&N.$raise(o("RangeError"),"multiply count must not overflow maximum string size");(i&1)===1&&(v+=k),i>>>=1,i!==0;)k+=k;return v}),L(l,"$+",function(i){var u=this;if(i=q(i,o("String"),"to_str"),i==""&&u.$$class===e.String)return u;if(u==""&&i.$$class===e.String)return i;var v=u+i;return u.encoding===v.encoding&&i.encoding===v.encoding||u.encoding.name==="UTF-8"||i.encoding.name==="UTF-8"?v:e.enc(v,u.encoding)}),L(l,"$<=>",function(i){var u=this;if(M(i["$respond_to?"]("to_str")))return i=i.$to_str().$to_s(),u>i?1:u<i?-1:0;var v=i["$<=>"](u);return v===_?_:v>0?-1:v<0?1:0}),L(l,"$==",function(i){var u=this;return i.$$is_string?u.toString()===i.toString():D(i,"$to_str")?i["$=="](u):!1}),L(l,"$=~",function(i){var u=this;return i.$$is_string&&N.$raise(o("TypeError"),"type mismatch: String given"),i["$=~"](u)}),L(l,"$[]",function(i,u){var v=this,k=v.length,T,S;if(i.$$is_range)return T=i.excl,S=i,u=i.end===_?-1:q(i.end,o("Integer"),"to_int"),i=i.begin===_?0:q(i.begin,o("Integer"),"to_int"),Math.abs(i)>k?_:(i<0&&(i+=k),u<0&&(u+=k),(!T||S.end===_)&&(u+=1),u=u-i,u<0&&(u=0),v.substr(i,u));if(i.$$is_string)return u!=null&&N.$raise(o("TypeError")),v.indexOf(i)!==-1?i:_;if(i.$$is_regexp){var G=v.match(i);return G===null?(g["~"]=_,_):(g["~"]=o("MatchData").$new(i,G),u==null?G[0]:(u=q(u,o("Integer"),"to_int"),u<0&&-u<G.length?G[u+=G.length]:u>=0&&u<G.length?G[u]:_))}return i=q(i,o("Integer"),"to_int"),i<0&&(i+=k),u==null?i>=k||i<0?_:v.substr(i,1):(u=q(u,o("Integer"),"to_int"),u<0||i>k||i<0?_:v.substr(i,u))},-2),L(l,"$b",function(){var i=this;return new String(i).$force_encoding("binary")}),L(l,"$capitalize",function(){var i=this;return i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()}),L(l,"$casecmp",function(i){var u=this;if(!M(i["$respond_to?"]("to_str")))return _;i=q(i,o("String"),"to_str").$to_s();var v=/^[\x00-\x7F]*$/;return v.test(u)&&v.test(i)&&(u=u.toLowerCase(),i=i.toLowerCase()),u["$<=>"](i)}),L(l,"$casecmp?",function(i){var u=this,v=u.$casecmp(i);return v===_?_:v===0}),L(l,"$center",function(i,u){var v=this;if(u==null&&(u=" "),i=q(i,o("Integer"),"to_int"),u=q(u,o("String"),"to_str").$to_s(),M(u["$empty?"]())&&N.$raise(o("ArgumentError"),"zero width padding"),M(i<=v.length))return v;var k=v.$ljust(y(A(i,v.length),2).$ceil(),u),T=v.$rjust(y(A(i,v.length),2).$floor(),u);return T+k.slice(v.length)},-2),L(l,"$chomp",function(i){var u=this;if(g["/"]==null&&(g["/"]=_),i==null&&(i=g["/"]),M(i===_||u.length===0))return u;i=ie["$coerce_to!"](i,o("String"),"to_str").$to_s();var v;if(i===`
`)v=u.replace(/\r?\n?$/,"");else if(i==="")v=u.replace(/(\r?\n)+$/,"");else if(u.length>=i.length){var k=u.substr(u.length-i.length,i.length);k===i&&(v=u.substr(0,u.length-i.length))}return v??u},-1),L(l,"$chop",function(){var i=this,u=i.length,v;return u<=1?v="":i.charAt(u-1)===`
`&&i.charAt(u-2)==="\r"?v=i.substr(0,u-2):v=i.substr(0,u-1),v}),L(l,"$chr",function(){var i=this;return i.charAt(0)}),L(l,"$clone",function(i){var u,v=this,k=_;return i=C(i),u=P(i,"freeze"),u==null&&(u=_),M(u["$nil?"]())||w(u,!0)||w(u,!1)||v.$raise(n("ArgumentError"),"unexpected value for freeze: "+u.$class()),k=new String(v),k.$copy_singleton_methods(v),k.$initialize_clone(v,new Map([["freeze",u]])),w(u,!0)?k.$$frozen||(k.$$frozen=!0):M(u["$nil?"]())&&v.$$frozen&&(k.$$frozen=!0),k},-1),L(l,"$dup",function(){var i=this,u=_;return u=new String(i),u.$initialize_dup(i),u}),L(l,"$count",function(i){var u,v,k=this;u=X(arguments),v=u,v.length===0&&N.$raise(o("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var T=r(v);return T===null?0:k.length-k.replace(new RegExp(T,"g"),"").length},-1),L(l,"$delete",function(i){var u,v,k=this;u=X(arguments),v=u,v.length===0&&N.$raise(o("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var T=r(v);return T===null?k:k.replace(new RegExp(T,"g"),"")},-1),L(l,"$delete_prefix",function(i){var u=this;return i.$$is_string||(i=q(i,o("String"),"to_str")),u.slice(0,i.length)===i?u.slice(i.length):u}),L(l,"$delete_suffix",function(i){var u=this;return i.$$is_string||(i=q(i,o("String"),"to_str")),u.slice(u.length-i.length)===i?u.slice(0,u.length-i.length):u}),L(l,"$downcase",function(){var i=this;return i.toLowerCase()}),L(l,"$each_line",function $(i,u){var v=$.$$p||_,k,T,S,G,O=this;if(g["/"]==null&&(g["/"]=_),$.$$p=null,k=X(arguments),T=E(k),T=C(T),k.length>0&&(S=k.shift()),S==null&&(S=g["/"]),G=P(T,"chomp"),G==null&&(G=!1),v===_)return O.$enum_for("each_line",S,new Map([["chomp",G]]));if(S===_)return e.yield1(v,O),O;S=q(S,o("String"),"to_str");var ae,le,ce,de,he,ve,me,be;if(S.length===0){for(ae=O.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,ce=ae.length;le<ce;le+=2)(ae[le]||ae[le+1])&&(be=(ae[le]||"")+(ae[le+1]||""),G&&(be=be.$chomp(`
`)),e.yield1(v,be));return O}for(he=O.$chomp(S),ve=O.length!=he.length,me=he.split(S),le=0,de=me.length;le<de;le++)be=me[le],(le<de-1||ve)&&(be+=S),G&&(be=be.$chomp(S)),e.yield1(v,be);return O},-1),L(l,"$empty?",function(){var i=this;return i.length===0}),L(l,"$end_with?",function(i){var u,v,k=this;u=X(arguments),v=u;for(var T=0,S=v.length;T<S;T++){var G=q(v[T],o("String"),"to_str").$to_s();if(k.length>=G.length&&k.substr(k.length-G.length,G.length)==G)return!0}return!1},-1),L(l,"$gsub",function $(i,u){var v=$.$$p||_,k=this;if($.$$p=null,u===void 0&&v===_)return k.$enum_for("gsub",i);var T="",S=_,G=0,O,ae;i.$$is_regexp?i=K(i):(i=q(i,o("String"),"to_str"),i=new RegExp(i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(O=i.exec(k),O===null){g["~"]=_,T+=k.slice(G);break}S=o("MatchData").$new(i,O),u===void 0?(le=i.lastIndex,ae=v(O[0]),i.lastIndex=le):u.$$is_hash?ae=u["$[]"](O[0]).$to_s():(u.$$is_string||(u=q(u,o("String"),"to_str")),ae=u.replace(/([\\]+)([0-9+&`'])/g,function(ce,de,he){if(de.length%2===0)return ce;switch(he){case"+":for(var ve=O.length-1;ve>0;ve--)if(O[ve]!==void 0)return de.slice(1)+O[ve];return"";case"&":return de.slice(1)+O[0];case"`":return de.slice(1)+k.slice(0,O.index);case"'":return de.slice(1)+k.slice(O.index+O[0].length);default:return de.slice(1)+(O[he]||"")}}).replace(/\\\\/g,"\\")),i.lastIndex===O.index?(T+=k.slice(G,O.index)+ae+(k[O.index]||""),i.lastIndex+=1):T+=k.slice(G,O.index)+ae,G=i.lastIndex}return g["~"]=S,T},-2),L(l,"$hex",function(){var i=this;return i.$to_i(16)}),L(l,"$include?",function(i){var u=this;return i.$$is_string||(i=q(i,o("String"),"to_str")),u.indexOf(i)!==-1}),L(l,"$index",function(i,u){var v=this,k,T,S;if(u===void 0)u=0;else if(u=q(u,o("Integer"),"to_int"),u<0&&(u+=v.length,u<0))return _;if(i.$$is_regexp)for(S=K(i);;){if(T=S.exec(v),T===null){g["~"]=_,k=-1;break}if(T.index>=u){g["~"]=o("MatchData").$new(S,T),k=T.index;break}S.lastIndex=T.index+1}else i=q(i,o("String"),"to_str"),i.length===0&&u>v.length?k=-1:k=v.indexOf(i,u);return k===-1?_:k},-2),L(l,"$inspect",function(){var i=this,u=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,v={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},k=i.replace(u,function(T){return v[T]?v[T]:(T=T.charCodeAt(0),T<=255&&(i.encoding["$binary?"]()||i.internal_encoding["$binary?"]())?"\\x"+("00"+T.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+T.toString(16).toUpperCase()).slice(-4))});return'"'+k.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),L(l,"$intern",function(){var i=this;return i.toString()}),L(l,"$length",function(){var i=this;return i.length}),p(l,"size","length"),L(l,"$lines",function $(i,u){var v=$.$$p||_,k,T,S,G,O=this,ae=_;return g["/"]==null&&(g["/"]=_),$.$$p=null,k=X(arguments),T=E(k),T=C(T),k.length>0&&(S=k.shift()),S==null&&(S=g["/"]),G=P(T,"chomp"),G==null&&(G=!1),ae=ne(O,"each_line",[S,new Map([["chomp",G]])],v.$to_proc()),M(v)?O:ae.$to_a()},-1),L(l,"$ljust",function(i,u){var v=this;if(u==null&&(u=" "),i=q(i,o("Integer"),"to_int"),u=q(u,o("String"),"to_str").$to_s(),M(u["$empty?"]())&&N.$raise(o("ArgumentError"),"zero width padding"),M(i<=v.length))return v;var k=-1,T="";for(i-=v.length;++k<i;)T+=u;return v+T.slice(0,i)},-2),L(l,"$lstrip",function(){var i=this;return i.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),L(l,"$ascii_only?",function(){var i=this;return i.encoding.ascii?/^[\x00-\x7F]*$/.test(i):!1}),L(l,"$match",function $(i,u){var v=$.$$p||_,k=this;return $.$$p=null,(B(n("String"),i)||M(i["$respond_to?"]("to_str")))&&(i=o("Regexp").$new(i.$to_str())),B(o("Regexp"),i)||N.$raise(o("TypeError"),"wrong argument type "+i.$class()+" (expected Regexp)"),ne(i,"match",[k,u],v.$to_proc())},-2),L(l,"$match?",function(i,u){var v=this;return(B(n("String"),i)||M(i["$respond_to?"]("to_str")))&&(i=o("Regexp").$new(i.$to_str())),B(o("Regexp"),i)||N.$raise(o("TypeError"),"wrong argument type "+i.$class()+" (expected Regexp)"),i["$match?"](v,u)},-2),L(l,"$next",function(){var i=this,u=i.length;if(u===0)return"";for(var v=i,k=i.search(/[a-zA-Z0-9]/),T=!1,S;u--;){if(S=i.charCodeAt(u),S>=48&&S<=57||S>=65&&S<=90||S>=97&&S<=122)switch(S){case 57:T=!0,S=48;break;case 90:T=!0,S=65;break;case 122:T=!0,S=97;break;default:T=!1,S+=1}else k===-1?S===255?(T=!0,S=0):(T=!1,S+=1):T=!0;if(v=v.slice(0,u)+String.fromCharCode(S)+v.slice(u+1),T&&(u===0||u===k)){switch(S){case 65:break;case 97:break;default:S+=1}u===0?v=String.fromCharCode(S)+v:v=v.slice(0,u)+String.fromCharCode(S)+v.slice(u),T=!1}if(!T)break}return v}),L(l,"$oct",function(){var i=this,u,v=i,k=8;return/^\s*_/.test(v)?0:(v=v.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(T,S,G,O){switch(O.charAt(0)){case"+":case"-":return T;case"0":if(O.charAt(1)==="x"&&G==="0x")return T}switch(G){case"0b":k=2;break;case"0":case"0o":k=8;break;case"0d":k=10;break;case"0x":k=16;break}return S+O}),u=parseInt(v.replace(/_(?!_)/g,""),k),isNaN(u)?0:u)}),L(l,"$ord",function(){var i=this;return typeof i.codePointAt=="function"?i.codePointAt(0):i.charCodeAt(0)}),L(l,"$partition",function(i){var u=this,v,k;return i.$$is_regexp?(k=i.exec(u),k===null?v=-1:(o("MatchData").$new(i,k),i=k[0],v=k.index)):(i=q(i,o("String"),"to_str"),v=u.indexOf(i)),v===-1?[u,"",""]:[u.slice(0,v),u.slice(v,v+i.length),u.slice(v+i.length)]}),L(l,"$reverse",function(){var i=this;return i.split("").reverse().join("")}),L(l,"$rindex",function(i,u){var v=this,k,T,S,G;if(u===void 0)u=v.length;else if(u=q(u,o("Integer"),"to_int"),u<0&&(u+=v.length,u<0))return _;if(i.$$is_regexp){for(T=null,S=K(i);G=S.exec(v),!(G===null||G.index>u);)T=G,S.lastIndex=T.index+1;T===null?(g["~"]=_,k=-1):(o("MatchData").$new(S,T),k=T.index)}else i=q(i,o("String"),"to_str"),k=v.lastIndexOf(i,u);return k===-1?_:k},-2),L(l,"$rjust",function(i,u){var v=this;if(u==null&&(u=" "),i=q(i,o("Integer"),"to_int"),u=q(u,o("String"),"to_str").$to_s(),M(u["$empty?"]())&&N.$raise(o("ArgumentError"),"zero width padding"),M(i<=v.length))return v;var k=Math.floor(i-v.length),T=Math.floor(k/u.length),S=Array(T+1).join(u),G=k-S.length;return S+u.slice(0,G)+v},-2),L(l,"$rpartition",function(i){var u=this,v,k,T,S;if(i.$$is_regexp){for(k=null,T=K(i);S=T.exec(u),S!==null;)k=S,T.lastIndex=k.index+1;k===null?v=-1:(o("MatchData").$new(T,k),i=k[0],v=k.index)}else i=q(i,o("String"),"to_str"),v=u.lastIndexOf(i);return v===-1?["","",u]:[u.slice(0,v),u.slice(v,v+i.length),u.slice(v+i.length)]}),L(l,"$rstrip",function(){var i=this;return i.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),L(l,"$scan",function $(i,u){var v=$.$$p||_,k,T=this;$.$$p=null,u=C(u),k=P(u,"no_matchdata"),k==null&&(k=!1);var S=[],G=_,O;for(i.$$is_regexp?i=K(i):(i=q(i,o("String"),"to_str"),i=new RegExp(i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(O=i.exec(T))!=null;)G=o("MatchData").$new(i,O,new Map([["no_matchdata",k]])),v===_?O.length==1?S.push(O[0]):S.push(G.$captures()):O.length==1?e.yield1(v,O[0]):e.yield1(v,G.$captures()),i.lastIndex===O.index&&(i.lastIndex+=1);return k||(g["~"]=G),v!==_?T:S},-2),L(l,"$singleton_class",function(){var i=this;return e.get_singleton_class(i)}),L(l,"$split",function(i,u){var v=this,k=_;if(g[";"]==null&&(g[";"]=_),v.length===0)return[];if(u===void 0)u=0;else if(u=ie["$coerce_to!"](u,o("Integer"),"to_int"),u===1)return[v];(i===void 0||i===_)&&(i=M(k=g[";"])?k:" ");var T=[],S=v.toString(),G=0,O,ae=0,le=0,ce,de;if(i.$$is_regexp?i=K(i):(i=q(i,o("String"),"to_str").$to_s(),i===" "&&(i=/\s+/gm,S=S.replace(/^\s+/,""))),T=S.split(i),T.length===1&&T[0]===S)return[T[0]];for(;(ce=T.indexOf(void 0))!==-1;)T.splice(ce,1);if(u===0){for(;T[T.length-1]==="";)T.pop();return T}if(i.$$is_regexp||(i=e.escape_regexp(i),i=new RegExp(i,"gm")),O=i.exec(S),u<0){if(O!==null&&O[0]===""&&i.source.indexOf("(?=")===-1)for(ce=0,de=O.length;ce<de;ce++)T.push("");return T}if(O!==null&&O[0]==="")return le=(O.length-1)*(u-1)+u,T.splice(le-1,T.length-1,T.slice(le-1).join("")),T;if(u>=T.length)return T;for(;O!==null&&(ae++,G=i.lastIndex,le+=O.length,ae+1!==u);)O=i.exec(S);return T.splice(le,T.length-1,S.slice(G)),T},-1),L(l,"$squeeze",function(i){var u,v,k=this;if(u=X(arguments),v=u,v.length===0)return k.replace(/(.)\1+/g,"$1");var T=r(v);return T===null?k:k.replace(new RegExp("("+T+")\\1+","g"),"$1")},-1),L(l,"$start_with?",function(i){var u,v,k=this;u=X(arguments),v=u;for(var T=0,S=v.length;T<S;T++)if(v[T].$$is_regexp){var G=v[T],O=G.exec(k);if(O!=null&&O.index===0)return g["~"]=o("MatchData").$new(G,O),!0;g["~"]=_}else{var ae=q(v[T],o("String"),"to_str").$to_s();if(k.length>=ae.length&&k.startsWith(ae))return!0}return!1},-1),L(l,"$strip",function(){var i=this;return i.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),L(l,"$sub",function $(i,u){var v=$.$$p||_,k=this;$.$$p=null,i.$$is_regexp||(i=q(i,o("String"),"to_str"),i=new RegExp(i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var T,S=i.exec(k);return S===null?(g["~"]=_,T=k.toString()):(o("MatchData").$new(i,S),u===void 0?(v===_&&N.$raise(o("ArgumentError"),"wrong number of arguments (1 for 2)"),T=k.slice(0,S.index)+v(S[0])+k.slice(S.index+S[0].length)):u.$$is_hash?T=k.slice(0,S.index)+u["$[]"](S[0]).$to_s()+k.slice(S.index+S[0].length):(u=q(u,o("String"),"to_str"),u=u.replace(/([\\]+)([0-9+&`'])/g,function(G,O,ae){if(O.length%2===0)return G;switch(ae){case"+":for(var le=S.length-1;le>0;le--)if(S[le]!==void 0)return O.slice(1)+S[le];return"";case"&":return O.slice(1)+S[0];case"`":return O.slice(1)+k.slice(0,S.index);case"'":return O.slice(1)+k.slice(S.index+S[0].length);default:return O.slice(1)+(S[ae]||"")}}).replace(/\\\\/g,"\\"),T=k.slice(0,S.index)+u+k.slice(S.index+S[0].length))),T},-2),L(l,"$sum",function(i){var u=this;i==null&&(i=16),i=q(i,o("Integer"),"to_int");for(var v=0,k=u.length,T=0;T<k;T++)v+=u.charCodeAt(T);return i<=0?v:v&Math.pow(2,i)-1},-1),L(l,"$swapcase",function(){var i=this,u=i.replace(/([a-z]+)|([A-Z]+)/g,function(v,k,T){return k?v.toUpperCase():v.toLowerCase()});return u}),L(l,"$to_f",function(){var i=this;if(i.charAt(0)==="_")return 0;var u=parseFloat(i.replace(/_/g,""));return isNaN(u)||u==1/0||u==-1/0?0:u}),L(l,"$to_i",function(i){var u=this;i==null&&(i=10);var v,k=u.toLowerCase(),T=q(i,o("Integer"),"to_int");return(T===1||T<0||T>36)&&N.$raise(o("ArgumentError"),"invalid radix "+T),/^\s*_/.test(k)?0:(k=k.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(S,G,O,ae){switch(ae.charAt(0)){case"+":case"-":return S;case"0":if(ae.charAt(1)==="x"&&O==="0x"&&(T===0||T===16))return S}switch(O){case"0b":if(T===0||T===2)return T=2,G+ae;break;case"0":case"0o":if(T===0||T===8)return T=8,G+ae;break;case"0d":if(T===0||T===10)return T=10,G+ae;break;case"0x":if(T===0||T===16)return T=16,G+ae;break}return S}),v=parseInt(k.replace(/_(?!_)/g,""),T),isNaN(v)?0:v)},-1),L(l,"$to_proc",function $(){$.$$p;var i=this,u=_,v=_,k=_;return $.$$p=null,u=i.valueOf(),v=e.jsid(u),k=ne(N,"proc",[],function T(S){var G=T.$$p||_,O,ae;T.$$p=null,O=X(arguments),ae=O,ae.length===0&&N.$raise(o("ArgumentError"),"no receiver given");var le=ae[0];le==null&&(le=_);var ce=le[v];return ce?ae=ae.slice(1):(ce=le.$method_missing,ae[0]=u),typeof G=="function"&&(ce.$$p=G),ae.length===0?ce.call(le):ce.apply(le,ae)},-1),k.$$source_location=_,k}),L(l,"$to_s",function(){var i=this;return i.toString()}),L(l,"$tr",function(i,u){var v=this;if(i=q(i,o("String"),"to_str").$to_s(),u=q(u,o("String"),"to_str").$to_s(),i.length==0||i===u)return v;var k,T,S,G,O,ae,le,ce={},de=i.split(""),he=de.length,ve=u.split(""),me=ve.length,be=!1,$e=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),$e=ve[me-1],he-=1);var I=[],j=null;for(T=!1,k=0;k<he;k++)if(G=de[k],j==null)j=G,I.push(G);else if(G==="-")j==="-"?(I.push("-"),I.push("-")):k==he-1?I.push("-"):T=!0;else if(T){for(O=j.charCodeAt(0),ae=G.charCodeAt(0),O>ae&&N.$raise(o("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),S=O+1;S<ae;S++)I.push(String.fromCharCode(S));I.push(G),T=null,j=null}else I.push(G);if(de=I,he=de.length,be)for(k=0;k<he;k++)ce[de[k]]=!0;else{if(me>0){var J=[],Q=null;for(T=!1,k=0;k<me;k++)if(G=ve[k],Q==null)Q=G,J.push(G);else if(G==="-")Q==="-"?(J.push("-"),J.push("-")):k==me-1?J.push("-"):T=!0;else if(T){for(O=Q.charCodeAt(0),ae=G.charCodeAt(0),O>ae&&N.$raise(o("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),S=O+1;S<ae;S++)J.push(String.fromCharCode(S));J.push(G),T=null,Q=null}else J.push(G);ve=J,me=ve.length}var te=he-me;if(te>0){var se=me>0?ve[me-1]:"";for(k=0;k<te;k++)ve.push(se)}for(k=0;k<he;k++)ce[de[k]]=ve[k]}var oe="";for(k=0,le=v.length;k<le;k++){G=v.charAt(k);var fe=ce[G];be?oe+=fe==null?$e:G:oe+=fe??G}return oe}),L(l,"$tr_s",function(i,u){var v=this;if(i=q(i,o("String"),"to_str").$to_s(),u=q(u,o("String"),"to_str").$to_s(),i.length==0)return v;var k,T,S,G,O,ae,le,ce={},de=i.split(""),he=de.length,ve=u.split(""),me=ve.length,be=!1,$e=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),$e=ve[me-1],he-=1);var I=[],j=null;for(T=!1,k=0;k<he;k++)if(G=de[k],j==null)j=G,I.push(G);else if(G==="-")j==="-"?(I.push("-"),I.push("-")):k==he-1?I.push("-"):T=!0;else if(T){for(O=j.charCodeAt(0),ae=G.charCodeAt(0),O>ae&&N.$raise(o("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),S=O+1;S<ae;S++)I.push(String.fromCharCode(S));I.push(G),T=null,j=null}else I.push(G);if(de=I,he=de.length,be)for(k=0;k<he;k++)ce[de[k]]=!0;else{if(me>0){var J=[],Q=null;for(T=!1,k=0;k<me;k++)if(G=ve[k],j==null)j=G,J.push(G);else if(G==="-")Q==="-"?(J.push("-"),J.push("-")):k==me-1?J.push("-"):T=!0;else if(T){for(O=j.charCodeAt(0),ae=G.charCodeAt(0),O>ae&&N.$raise(o("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),S=O+1;S<ae;S++)J.push(String.fromCharCode(S));J.push(G),T=null,j=null}else J.push(G);ve=J,me=ve.length}var te=he-me;if(te>0){var se=me>0?ve[me-1]:"";for(k=0;k<te;k++)ve.push(se)}for(k=0;k<he;k++)ce[de[k]]=ve[k]}var oe="",fe=null;for(k=0,le=v.length;k<le;k++){G=v.charAt(k);var f=ce[G];be?f==null?fe==null&&(oe+=$e,fe=!0):(oe+=G,fe=null):f!=null?(fe==null||fe!==f)&&(oe+=f,fe=f):(oe+=G,fe=null)}return oe}),L(l,"$upcase",function(){var i=this;return i.toUpperCase()}),L(l,"$upto",function $(i,u){var v=$.$$p||_,k=this;if($.$$p=null,u==null&&(u=!1),v===_)return k.$enum_for("upto",i,u);var T,S,G=k.toString();if(i=q(i,o("String"),"to_str"),G.length===1&&i.length===1)for(T=G.charCodeAt(0),S=i.charCodeAt(0);T<=S&&!(u&&T===S);)v(String.fromCharCode(T)),T+=1;else if(parseInt(G,10).toString()===G&&parseInt(i,10).toString()===i)for(T=parseInt(G,10),S=parseInt(i,10);T<=S&&!(u&&T===S);)v(T.toString()),T+=1;else for(;G.length<=i.length&&G<=i&&!(u&&G===i);)v(G),G=G.$succ();return k},-2);function r($){function i(ce){var de="",he,ve=ce.length,me,be,$e,I,j;for(he=0;he<ve;he++)if(me=ce.charAt(he),me==="-"&&he>0&&he<ve-1&&!be){for($e=ce.charCodeAt(he-1),I=ce.charCodeAt(he+1),$e>I&&N.$raise(o("ArgumentError"),'invalid range "'+$e+"-"+I+'" in string transliteration'),j=$e+1;j<I+1;j++)de+=String.fromCharCode(j);be=!0,he++}else be=me==="\\",de+=me;return de}function u(ce,de){if(ce.length===0)return de;var he="",ve,me=ce.length,be;for(ve=0;ve<me;ve++)be=ce.charAt(ve),de.indexOf(be)!==-1&&(he+=be);return he}var v,k,T,S,G,O,ae="",le="";for(v=0,k=$.length;v<k;v++)T=q($[v],o("String"),"to_str"),S=T.charAt(0)==="^"&&T.length>1,T=i(S?T.slice(1):T),S?le=u(le,T):ae=u(ae,T);if(ae.length>0&&le.length>0){for(O="",v=0,k=ae.length;v<k;v++)G=ae.charAt(v),le.indexOf(G)===-1&&(O+=G);ae=O,le=""}return ae.length>0?"["+o("Regexp").$escape(ae)+"]":le.length>0?"[^"+o("Regexp").$escape(le)+"]":null}return L(l,"$instance_variables",function(){return[]}),F(l,"$_load",function(i){var u,v,k=this;return u=X(arguments),v=u,ne(k,"new",W(v))},-1),L(l,"$unicode_normalize",function(i){var u=this;return i==null&&(i="nfc"),M(["nfc","nfd","nfkc","nfkd"]["$include?"](i))||N.$raise(o("ArgumentError"),"Invalid normalization form "+i),u.normalize(i.$upcase())},-1),L(l,"$unicode_normalized?",function(i){var u=this;return i==null&&(i="nfc"),u.$unicode_normalize(i)["$=="](u)},-1),L(l,"$unpack",function(i){return N.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),L(l,"$unpack1",function(i){return N.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),L(l,"$freeze",function(){var i=this;return typeof i=="string"||z(i,"$$frozen",!0),i}),L(l,"$-@",function(){var i=this;return typeof i=="string"||i.$$frozen?i:i.encoding.name=="UTF-8"&&i.internal_encoding.name=="UTF-8"?i.toString():i.$dup().$freeze()}),L(l,"$frozen?",function(){var i=this;return typeof i=="string"||i.$$frozen===!0}),p(l,"+@","dup"),p(l,"===","=="),p(l,"byteslice","[]"),p(l,"eql?","=="),p(l,"equal?","==="),p(l,"object_id","__id__"),p(l,"slice","[]"),p(l,"succ","next"),p(l,"to_str","to_s"),p(l,"to_sym","intern"),ie.$pristine(l,"initialize")}("::",String,x),s(x[0],"Symbol",h("String"))};Opal.modules["corelib/enumerable"]=function(e){var q=e.truthy,D=e.coerce_to,K=e.yield1,z=e.yieldX,ee=e.deny_frozen_access,V=e.module,R=e.send,Z=e.slice,m=e.to_a,L=e.Opal,ie=e.thrower,F=e.def,X=e.Kernel,ne=e.return_val,W=e.rb_gt,E=e.rb_times,C=e.rb_lt,P=e.eqeq,B=e.rb_plus,N=e.rb_minus,M=e.rb_divide,g=e.rb_le,y=e.lambda,A=e.not,w=e.alias,p=[],s=e.nil,d=e.$$$;return e.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(x,h){var _=V(x,"Enumerable"),o=[_].concat(h),Y=e.$r(o);function H(c){return c.length===0&&(c=[s]),c.length>1&&(c=[c]),c}return F(_,"$all?",function c(l){try{var a=ie("return"),n=c.$$p||s,t=this;return c.$$p=null,q(l!==void 0)?R(t,"each",[],function r($){var i,u,v=s;if(i=Z(arguments),u=i,v=H(u),q(R(l,"public_send",["==="].concat(m(v)))))return s;a.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:a}):n!==s?R(t,"each",[],function r($){var i,u;if(i=Z(arguments),u=i,q(e.yieldX(n,m(u))))return s;a.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:a}):R(t,"each",[],function r($){var i,u;if(i=Z(arguments),u=i,q(L.$destructure(u)))return s;a.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:a}),!0}catch(r){if(r===a)return r.$v;throw r}finally{a.is_orphan=!0}},-1),F(_,"$any?",function c(l){try{var a=ie("return"),n=c.$$p||s,t=this;return c.$$p=null,q(l!==void 0)?R(t,"each",[],function r($){var i,u,v=s;if(i=Z(arguments),u=i,v=H(u),q(R(l,"public_send",["==="].concat(m(v)))))a.$throw(!0,r.$$is_lambda);else return s},{$$arity:-1,$$ret:a}):n!==s?R(t,"each",[],function r($){var i,u;if(i=Z(arguments),u=i,q(e.yieldX(n,m(u))))a.$throw(!0,r.$$is_lambda);else return s},{$$arity:-1,$$ret:a}):R(t,"each",[],function r($){var i,u;if(i=Z(arguments),u=i,q(L.$destructure(u)))a.$throw(!0,r.$$is_lambda);else return s},{$$arity:-1,$$ret:a}),!1}catch(r){if(r===a)return r.$v;throw r}finally{a.is_orphan=!0}},-1),F(_,"$chunk",function c(){var l=c.$$p||s,a=this;return c.$$p=null,l===s?R(a,"to_enum",["chunk"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:a}):R(d("Enumerator"),"new",[],function n(t){var r=n.$$s==null?this:n.$$s;t==null&&(t=s);var $=s,i=[];function u(){i.length>0&&t.$yield($,i)}r.$each.$$p=function(v){var k=K(l,v);k===s?(u(),i=[],$=s):($===s||$===k?i.push(v):(u(),i=[v]),$=k)},r.$each(),u()},{$$s:a})}),F(_,"$chunk_while",function c(){var l=c.$$p||s,a=this;return c.$$p=null,l===s&&X.$raise(d("ArgumentError"),"no block given"),R(a,"slice_when",[],function(t,r){return t==null&&(t=s),r==null&&(r=s),e.yieldX(l,[t,r])["$!"]()})}),F(_,"$collect",function c(){var l=c.$$p||s,a=this;if(c.$$p=null,l===s)return R(a,"enum_for",["collect"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:a});var n=[];return a.$each.$$p=function(){var t=z(l,arguments);n.push(t)},a.$each(),n}),F(_,"$collect_concat",function c(){var l=c.$$p||s,a=this;return c.$$p=null,l===s?R(a,"enum_for",["collect_concat"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:a}):R(a,"map",[],l.$to_proc()).$flatten(1)}),F(_,"$compact",function(){var l=this;return l.$to_a().$compact()}),F(_,"$count",function c(l){var a=c.$$p||s,n=this,t=s;return c.$$p=null,t=0,l!=null&&a!==s&&n.$warn("warning: given block not used"),q(l!=null)?a=R(X,"proc",[],function($){var i,u;return i=Z(arguments),u=i,L.$destructure(u)["$=="](l)},-1):q(a["$nil?"]())&&(a=R(X,"proc",[],ne(!0))),R(n,"each",[],function($){var i,u;return i=Z(arguments),u=i,q(z(a,u))?t++:s},-1),t},-1),F(_,"$cycle",function c(l){var a=c.$$p||s,n=this;if(c.$$p=null,l==null&&(l=s),a===s)return R(n,"enum_for",["cycle",l],function i(){var u=i.$$s==null?this:i.$$s;return q(l["$nil?"]())?q(u["$respond_to?"]("size"))?d(d("Float"),"INFINITY"):s:(l=L["$coerce_to!"](l,d("Integer"),"to_int"),q(W(l,0))?E(u.$enumerator_size(),l):0)},{$$s:n});if(!q(l["$nil?"]())&&(l=L["$coerce_to!"](l,d("Integer"),"to_int"),q(l<=0)))return s;var t=[],r,$;if(n.$each.$$p=function(){var i=L.$destructure(arguments);K(a,i),t.push(i)},n.$each(),t.length===0)return s;if(l===s)for(;;)for(r=0,$=t.length;r<$;r++)K(a,t[r]);else for(;l>1;){for(r=0,$=t.length;r<$;r++)K(a,t[r]);l--}},-1),F(_,"$detect",function c(l){try{var a=ie("return"),n=c.$$p||s,t=this;return c.$$p=null,n===s?t.$enum_for("detect",l):(R(t,"each",[],function r($){var i,u,v=s;if(i=Z(arguments),u=i,v=L.$destructure(u),q(e.yield1(n,v)))a.$throw(v,r.$$is_lambda);else return s},{$$arity:-1,$$ret:a}),l!==void 0?typeof l=="function"?l():l:s)}catch(r){if(r===a)return r.$v;throw r}finally{a.is_orphan=!0}},-1),F(_,"$drop",function(l){var a=this;l=D(l,d("Integer"),"to_int"),q(l<0)&&X.$raise(d("ArgumentError"),"attempt to drop negative size");var n=[],t=0;return a.$each.$$p=function(){l<=t&&n.push(L.$destructure(arguments)),t++},a.$each(),n}),F(_,"$drop_while",function c(){var l=c.$$p||s,a=this;if(c.$$p=null,l===s)return a.$enum_for("drop_while");var n=[],t=!0;return a.$each.$$p=function(){var r=L.$destructure(arguments);if(t){var $=K(l,r);q($)||(t=!1,n.push(r))}else n.push(r)},a.$each(),n}),F(_,"$each_cons",function c(l){var a=c.$$p||s,n=this;if(c.$$p=null,q(arguments.length!=1)&&X.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),l=L.$try_convert(l,d("Integer"),"to_int"),q(l<=0)&&X.$raise(d("ArgumentError"),"invalid size"),a===s)return R(n,"enum_for",["each_cons",l],function r(){var $=r.$$s==null?this:r.$$s,i=s;return i=$.$enumerator_size(),q(i["$nil?"]())?s:P(i,0)||q(C(i,l))?0:B(N(i,l),1)},{$$s:n});var t=[];return n.$each.$$p=function(){var r=L.$destructure(arguments);t.push(r),t.length>l&&t.shift(),t.length==l&&K(a,t.slice(0,l))},n.$each(),n}),F(_,"$each_entry",function c(l){var a=c.$$p||s,n,t,r=this;return c.$$p=null,n=Z(arguments),t=n,a===s?R(r,"to_enum",["each_entry"].concat(m(t)),function $(){var i=$.$$s==null?this:$.$$s;return i.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var $=L.$destructure(arguments);K(a,$)},r.$each.apply(r,t),r)},-1),F(_,"$each_slice",function c(l){var a=c.$$p||s,n=this;if(c.$$p=null,l=D(l,d("Integer"),"to_int"),q(l<=0)&&X.$raise(d("ArgumentError"),"invalid slice size"),a===s)return R(n,"enum_for",["each_slice",l],function r(){var $=r.$$s==null?this:r.$$s;return q($["$respond_to?"]("size"))?M($.$size(),l).$ceil():s},{$$s:n});var t=[];return n.$each.$$p=function(){var r=L.$destructure(arguments);t.push(r),t.length===l&&(K(a,t),t=[])},n.$each(),t.length>0&&K(a,t),n}),F(_,"$each_with_index",function c(l){var a=c.$$p||s,n,t,r=this;if(c.$$p=null,n=Z(arguments),t=n,a===s)return R(r,"enum_for",["each_with_index"].concat(m(t)),function i(){var u=i.$$s==null?this:i.$$s;return u.$enumerator_size()},{$$s:r});var $=0;return r.$each.$$p=function(){var i=L.$destructure(arguments);a(i,$),$++},r.$each.apply(r,t),r},-1),F(_,"$each_with_object",function c(l){var a=c.$$p||s,n=this;return c.$$p=null,a===s?R(n,"enum_for",["each_with_object",l],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:n}):(n.$each.$$p=function(){var t=L.$destructure(arguments);a(t,l)},n.$each(),l)}),F(_,"$entries",function(l){var a,n,t=this;a=Z(arguments),n=a;var r=[];return t.$each.$$p=function(){r.push(L.$destructure(arguments))},t.$each.apply(t,n),r},-1),F(_,"$filter_map",function c(){var l=c.$$p||s,a=this;return c.$$p=null,l===s?R(a,"enum_for",["filter_map"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:a}):R(R(a,"map",[],l.$to_proc()),"select",[],"itself".$to_proc())}),F(_,"$find_all",function c(){var l=c.$$p||s,a=this;if(c.$$p=null,l===s)return R(a,"enum_for",["find_all"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:a});var n=[];return a.$each.$$p=function(){var t=L.$destructure(arguments),r=K(l,t);q(r)&&n.push(t)},a.$each(),n}),F(_,"$find_index",function c(l){try{var a=ie("return"),n=c.$$p||s,t=this,r=s;return c.$$p=null,q(l===void 0&&n===s)?t.$enum_for("find_index"):(l!=null&&n!==s&&t.$warn("warning: given block not used"),r=0,q(l!=null)?R(t,"each",[],function $(i){var u,v;return u=Z(arguments),v=u,P(L.$destructure(v),l)&&a.$throw(r,$.$$is_lambda),r+=1},{$$arity:-1,$$ret:a}):R(t,"each",[],function $(i){var u,v;return u=Z(arguments),v=u,q(e.yieldX(n,m(v)))&&a.$throw(r,$.$$is_lambda),r+=1},{$$arity:-1,$$ret:a}),s)}catch($){if($===a)return $.$v;throw $}finally{a.is_orphan=!0}},-1),F(_,"$first",function(l){try{var a=ie("return"),n=this,t=s,r=s;return q(l===void 0)?R(n,"each",[],function $(i){i==null&&(i=s),a.$throw(i,$.$$is_lambda)},{$$ret:a}):(t=[],l=D(l,d("Integer"),"to_int"),q(l<0)&&X.$raise(d("ArgumentError"),"attempt to take negative size"),q(l==0)?[]:(r=0,R(n,"each",[],function $(i){var u,v;if(u=Z(arguments),v=u,t.push(L.$destructure(v)),q(l<=++r))a.$throw(t,$.$$is_lambda);else return s},{$$arity:-1,$$ret:a}),t))}catch($){if($===a)return $.$v;throw $}finally{a.is_orphan=!0}},-1),F(_,"$grep",function c(l){var a=c.$$p||s,n=this,t=s;return c.$$p=null,t=[],R(n,"each",[],function($){var i,u,v=s;return i=Z(arguments),u=i,v=H(u),q(R(l,"__send__",["==="].concat(m(v))))?(a!==s?(q(W(u.$length(),1))&&(u=[u]),u=e.yieldX(a,m(u))):q(g(u.$length(),1))&&(u=u["$[]"](0)),t.$push(u)):s},-1),t}),F(_,"$grep_v",function c(l){var a=c.$$p||s,n=this,t=s;return c.$$p=null,t=[],R(n,"each",[],function($){var i,u,v=s;return i=Z(arguments),u=i,v=H(u),q(R(l,"__send__",["==="].concat(m(v))))?s:(a!==s?(q(W(u.$length(),1))&&(u=[u]),u=e.yieldX(a,m(u))):q(g(u.$length(),1))&&(u=u["$[]"](0)),t.$push(u))},-1),t}),F(_,"$group_by",function c(){var l=c.$$p||s,a,n=this,t=s,r=s;return c.$$p=null,l===s?R(n,"enum_for",["group_by"],function $(){var i=$.$$s==null?this:$.$$s;return i.$enumerator_size()},{$$s:n}):(t=new Map,n.$each.$$p=function(){var $=L.$destructure(arguments),i=K(l,$);(q(r=t["$[]"](i))?r:(a=[i,[]],R(t,"[]=",a),a[a.length-1]))["$<<"]($)},n.$each(),t)}),F(_,"$include?",function(l){try{var a=ie("return"),n=this;return R(n,"each",[],function t(r){var $,i;if($=Z(arguments),i=$,P(L.$destructure(i),l))a.$throw(!0,t.$$is_lambda);else return s},{$$arity:-1,$$ret:a}),!1}catch(t){if(t===a)return t.$v;throw t}finally{a.is_orphan=!0}}),F(_,"$inject",function c(l,a){var n=c.$$p||s,t=this;c.$$p=null;var r=l;return n!==s&&a===void 0?t.$each.$$p=function(){var $=L.$destructure(arguments);if(r===void 0){r=$;return}$=z(n,[r,$]),r=$}:(a===void 0&&(d("Symbol")["$==="](l)||X.$raise(d("TypeError"),""+l.$inspect()+" is not a Symbol"),a=l,r=void 0),t.$each.$$p=function(){var $=L.$destructure(arguments);if(r===void 0){r=$;return}r=r.$__send__(a,$)}),t.$each(),r??s},-1),F(_,"$lazy",function(){var l=this;return R(d(d("Enumerator"),"Lazy"),"new",[l,l.$enumerator_size()],function(n,t){var r,$;return n==null&&(n=s),r=Z(arguments,1),$=r,R(n,"yield",m($))},-2)}),F(_,"$enumerator_size",function(){var l=this;return q(l["$respond_to?"]("size"))?l.$size():s}),F(_,"$max",function c(l){var a=c.$$p||s,n=this;if(c.$$p=null,l===void 0||l===s){var t,r;return n.$each.$$p=function(){var $=L.$destructure(arguments);if(t===void 0){t=$;return}a!==s?r=z(a,[$,t]):r=$["$<=>"](t),r===s&&X.$raise(d("ArgumentError"),"comparison failed"),r>0&&(t=$)},n.$each(),t===void 0?s:t}return l=D(l,d("Integer"),"to_int"),R(n,"sort",[],a.$to_proc()).$reverse().$first(l)},-1),F(_,"$max_by",function c(l){var a=c.$$p||s,n=this;if(c.$$p=null,l==null&&(l=s),!q(a))return R(n,"enum_for",["max_by",l],function $(){var i=$.$$s==null?this:$.$$s;return i.$enumerator_size()},{$$s:n});if(!q(l["$nil?"]()))return R(n,"sort_by",[],a.$to_proc()).$reverse().$take(l);var t,r;return n.$each.$$p=function(){var $=L.$destructure(arguments),i=K(a,$);if(t===void 0){t=$,r=i;return}i["$<=>"](r)>0&&(t=$,r=i)},n.$each(),t===void 0?s:t},-1),F(_,"$min",function c(l){var a=c.$$p||s,n=this;if(c.$$p=null,l==null&&(l=s),!q(l["$nil?"]()))return a!==s?R(n,"sort",[],function($,i){return $==null&&($=s),i==null&&(i=s),e.yieldX(a,[$,i])}).$take(l):n.$sort().$take(l);var t;return a!==s?n.$each.$$p=function(){var r=L.$destructure(arguments);if(t===void 0){t=r;return}var $=a(r,t);$===s&&X.$raise(d("ArgumentError"),"comparison failed"),$<0&&(t=r)}:n.$each.$$p=function(){var r=L.$destructure(arguments);if(t===void 0){t=r;return}L.$compare(r,t)<0&&(t=r)},n.$each(),t===void 0?s:t},-1),F(_,"$min_by",function c(l){var a=c.$$p||s,n=this;if(c.$$p=null,l==null&&(l=s),!q(a))return R(n,"enum_for",["min_by",l],function $(){var i=$.$$s==null?this:$.$$s;return i.$enumerator_size()},{$$s:n});if(!q(l["$nil?"]()))return R(n,"sort_by",[],a.$to_proc()).$take(l);var t,r;return n.$each.$$p=function(){var $=L.$destructure(arguments),i=K(a,$);if(t===void 0){t=$,r=i;return}i["$<=>"](r)<0&&(t=$,r=i)},n.$each(),t===void 0?s:t},-1),F(_,"$minmax",function c(){var l=c.$$p||s,a=this,n=s;c.$$p=null,l=q(n=l)?n:R(X,"proc",[],function(u,v){return u==null&&(u=s),v==null&&(v=s),u["$<=>"](v)});var t=s,r=s,$=!0;return a.$each.$$p=function(){var i=L.$destructure(arguments);if($)t=r=i,$=!1;else{var u=l.$call(t,i);u===s?X.$raise(d("ArgumentError"),"comparison failed"):u>0&&(t=i);var v=l.$call(r,i);v===s?X.$raise(d("ArgumentError"),"comparison failed"):v<0&&(r=i)}},a.$each(),[t,r]}),F(_,"$minmax_by",function c(){var l=c.$$p||s,a=this;if(c.$$p=null,!q(l))return R(a,"enum_for",["minmax_by"],function i(){var u=i.$$s==null?this:i.$$s;return u.$enumerator_size()},{$$s:a});var n=s,t=s,r,$;return a.$each.$$p=function(){var i=L.$destructure(arguments),u=K(l,i);(r===void 0||u["$<=>"](r)<0)&&(n=i,r=u),($===void 0||u["$<=>"]($)>0)&&(t=i,$=u)},a.$each(),[n,t]}),F(_,"$none?",function c(l){try{var a=ie("return"),n=c.$$p||s,t=this;return c.$$p=null,q(l!==void 0)?R(t,"each",[],function r($){var i,u,v=s;if(i=Z(arguments),u=i,v=H(u),q(R(l,"public_send",["==="].concat(m(v)))))a.$throw(!1,r.$$is_lambda);else return s},{$$arity:-1,$$ret:a}):n!==s?R(t,"each",[],function r($){var i,u;if(i=Z(arguments),u=i,q(e.yieldX(n,m(u))))a.$throw(!1,r.$$is_lambda);else return s},{$$arity:-1,$$ret:a}):R(t,"each",[],function r($){var i,u,v=s;if(i=Z(arguments),u=i,v=L.$destructure(u),q(v))a.$throw(!1,r.$$is_lambda);else return s},{$$arity:-1,$$ret:a}),!0}catch(r){if(r===a)return r.$v;throw r}finally{a.is_orphan=!0}},-1),F(_,"$one?",function c(l){try{var a=ie("return"),n=c.$$p||s,t=this,r=s;return c.$$p=null,r=0,q(l!==void 0)?R(t,"each",[],function $(i){var u,v,k=s;if(u=Z(arguments),v=u,k=H(v),q(R(l,"public_send",["==="].concat(m(k)))))if(r=B(r,1),q(W(r,1)))a.$throw(!1,$.$$is_lambda);else return s;else return s},{$$arity:-1,$$ret:a}):n!==s?R(t,"each",[],function $(i){var u,v;if(u=Z(arguments),v=u,!q(e.yieldX(n,m(v))))return s;if(r=B(r,1),q(W(r,1)))a.$throw(!1,$.$$is_lambda);else return s},{$$arity:-1,$$ret:a}):R(t,"each",[],function $(i){var u,v;if(u=Z(arguments),v=u,!q(L.$destructure(v)))return s;if(r=B(r,1),q(W(r,1)))a.$throw(!1,$.$$is_lambda);else return s},{$$arity:-1,$$ret:a}),r["$=="](1)}catch($){if($===a)return $.$v;throw $}finally{a.is_orphan=!0}},-1),F(_,"$partition",function c(){var l=c.$$p||s,a=this;if(c.$$p=null,l===s)return R(a,"enum_for",["partition"],function r(){var $=r.$$s==null?this:r.$$s;return $.$enumerator_size()},{$$s:a});var n=[],t=[];return a.$each.$$p=function(){var r=L.$destructure(arguments),$=K(l,r);q($)?n.push(r):t.push(r)},a.$each(),[n,t]}),F(_,"$reject",function c(){var l=c.$$p||s,a=this;if(c.$$p=null,l===s)return R(a,"enum_for",["reject"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:a});var n=[];return a.$each.$$p=function(){var t=L.$destructure(arguments),r=K(l,t);q(r)||n.push(t)},a.$each(),n}),F(_,"$reverse_each",function c(){var l=c.$$p||s,a=this;if(c.$$p=null,l===s)return R(a,"enum_for",["reverse_each"],function r(){var $=r.$$s==null?this:r.$$s;return $.$enumerator_size()},{$$s:a});var n=[];a.$each.$$p=function(){n.push(arguments)},a.$each();for(var t=n.length-1;t>=0;t--)z(l,n[t]);return n}),F(_,"$slice_before",function c(l){var a=c.$$p||s,n=this;return c.$$p=null,q(l===void 0&&a===s)&&X.$raise(d("ArgumentError"),"both pattern and block are given"),q(l!==void 0&&a!==s||arguments.length>1)&&X.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),R(d("Enumerator"),"new",[],function t(r){var $=t.$$s==null?this:t.$$s;r==null&&(r=s);var i=[];a!==s?l===void 0?$.$each.$$p=function(){var u=L.$destructure(arguments),v=K(a,u);q(v)&&i.length>0&&(r["$<<"](i),i=[]),i.push(u)}:$.$each.$$p=function(){var u=L.$destructure(arguments),v=a(u,l.$dup());q(v)&&i.length>0&&(r["$<<"](i),i=[]),i.push(u)}:$.$each.$$p=function(){var u=L.$destructure(arguments),v=l["$==="](u);q(v)&&i.length>0&&(r["$<<"](i),i=[]),i.push(u)},$.$each(),i.length>0&&r["$<<"](i)},{$$s:n})},-1),F(_,"$slice_after",function c(l){var a=c.$$p||s,n=this;return c.$$p=null,q(l===void 0&&a===s)&&X.$raise(d("ArgumentError"),"both pattern and block are given"),q(l!==void 0&&a!==s||arguments.length>1)&&X.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),q(l!==void 0)&&(a=R(X,"proc",[],function(r){return r==null&&(r=s),l["$==="](r)})),R(d("Enumerator"),"new",[],function t(r){var $=t.$$s==null?this:t.$$s;r==null&&(r=s);var i;$.$each.$$p=function(){var u=L.$destructure(arguments),v=K(a,u);i==null&&(i=[]),q(v)?(i.push(u),r.$yield(i),i=null):i.push(u)},$.$each(),i!=null&&r.$yield(i)},{$$s:n})},-1),F(_,"$slice_when",function c(){var l=c.$$p||s,a=this;return c.$$p=null,l===s&&X.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1)"),R(d("Enumerator"),"new",[],function n(t){var r=n.$$s==null?this:n.$$s;t==null&&(t=s);var $=s,i=s;r.$each_cons.$$p=function(){var u=L.$destructure(arguments),v=u[0],k=u[1],T=z(l,[v,k]);i=k,$===s&&($=[]),q(T)?($.push(v),t.$yield($),$=[]):$.push(v)},r.$each_cons(2),$!==s&&($.push(i),t.$yield($))},{$$s:a})}),F(_,"$sort",function c(){var l=c.$$p||s,a=this,n=s;return c.$$p=null,n=a.$to_a(),l===s&&(l=y(function(r,$){return r==null&&(r=s),$==null&&($=s),r["$<=>"]($)})),R(n,"sort",[],l.$to_proc())}),F(_,"$sort_by",function c(){var l=c.$$p||s,a=this,n=s;return c.$$p=null,l===s?R(a,"enum_for",["sort_by"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:a}):(n=R(a,"map",[],function(){var r=s;return r=L.$destructure(arguments),[e.yield1(l,r),r]}),R(n,"sort!",[],function(r,$){return r==null&&(r=s),$==null&&($=s),r[0]["$<=>"]($[0])}),R(n,"map!",[],function(r){return r==null&&(r=s),r[1]}))}),F(_,"$sum",function c(l){var a=c.$$p||s,n=this,t=s,r=s;return c.$$p=null,l==null&&(l=0),t=l,r=0,R(n,"each",[],function(i){var u,v,k=s,T=s,S=s;return u=Z(arguments),v=u,k=a!==s?e.yieldX(a,m(v)):L.$destructure(v),A([d(d("Float"),"INFINITY"),d(d("Float"),"INFINITY")["$-@"]()]["$include?"](k))&&q(k["$respond_to?"]("-"))?(T=N(k,r),S=B(t,T),r=N(N(S,t),T),t=S):t=B(t,k)},-1),t},-1),F(_,"$take",function(l){var a=this;return a.$first(l)}),F(_,"$take_while",function c(){try{var l=ie("return"),a=c.$$p||s,n=this,t=s;return c.$$p=null,q(a)?(t=[],R(n,"each",[],function r($){var i,u,v=s;return i=Z(arguments),u=i,v=L.$destructure(u),q(e.yield1(a,v))||l.$throw(t,r.$$is_lambda),t.push(v)},{$$arity:-1,$$ret:l})):n.$enum_for("take_while")}catch(r){if(r===l)return r.$v;throw r}finally{l.is_orphan=!0}}),F(_,"$uniq",function c(){var l=c.$$p||s,a=this,n=s;return c.$$p=null,n=new Map,R(a,"each",[],function(r){var $,i,u,v=s,k=s;return $=Z(arguments),i=$,v=L.$destructure(i),k=l!==s?e.yield1(l,v):v,q(n["$key?"](k))?s:(u=[k,v],R(n,"[]=",u),u[u.length-1])},-1),n.$values()}),F(_,"$tally",function(l){var a=this,n=s;return l&&l!==s&&ee(l),n=R(R(a,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),q(l)?(R(n,"each",[],function(r,$){var i;return r==null&&(r=s),$==null&&($=s),i=[r,B(l.$fetch(r,0),$)],R(l,"[]=",i),i[i.length-1]}),l):n},-1),F(_,"$to_h",function c(l){var a=c.$$p||s,n,t,r=this;if(c.$$p=null,n=Z(arguments),t=n,a!==s)return R(R(r,"map",[],a.$to_proc()),"to_h",m(t));var $=new Map;return r.$each.$$p=function(){var i=L.$destructure(arguments),u=L["$coerce_to?"](i,d("Array"),"to_ary"),v,k;u.$$is_array||X.$raise(d("TypeError"),"wrong element type "+i.$class()+" (expected array)"),u.length!==2&&X.$raise(d("ArgumentError"),"element has wrong array length (expected 2, was "+u.$length()+")"),v=u[0],k=u[1],e.hash_put($,v,k)},r.$each.apply(r,t),$},-1),F(_,"$to_set",function c(l,a){var n=c.$$p||s,t,r,$,i=this;return c.$$p=null,t=Z(arguments),t.length>0&&(r=t.shift()),r==null&&(r=Y("Set")),$=t,R(r,"new",[i].concat(m($)),n.$to_proc())},-1),F(_,"$zip",function c(l){c.$$p;var a,n,t=this;return c.$$p=null,a=Z(arguments),n=a,R(t.$to_a(),"zip",m(n))},-1),w(_,"find","detect"),w(_,"filter","find_all"),w(_,"flat_map","collect_concat"),w(_,"map","collect"),w(_,"member?","include?"),w(_,"reduce","inject"),w(_,"select","find_all"),w(_,"to_a","entries")}("::",p)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(e){var q=e.klass,D=e.truthy,K=e.to_a,z=e.eqeq,ee=e.Kernel,V=e.def,R=e.rb_gt,Z=e.rb_lt,m=e.rb_le,L=e.rb_ge,ie=e.rb_plus,F=e.rb_minus,X=e.eqeqeq,ne=e.not,W=e.rb_times,E=e.rb_divide,C=e.alias,P=[],B=e.nil,N=e.$$$;return e.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(M,g,y){var A=q(M,g,"Enumerator"),w=[A].concat(y);return function(p,s,d){var x=q(p,s,"ArithmeticSequence"),h=[x].concat(d),_=e.$r(h),o=x.$$prototype;o.step_arg2=o.receiver_num=o.step_arg1=o.step=o.range=o.topfx=o.bypfx=o.creation_method=o.skipped_arg=B,e.prop(x.$$prototype,"$$is_arithmetic_seq",!0);var Y=1/0;return V(x,"$initialize",function(c,l,a){var n,t=this,r=B;return a==null&&(a="step"),t.creation_method=a,D(c["$is_a?"](N("Array")))?(n=[].concat(K(c)),t.step_arg1=n[0]==null?B:n[0],t.step_arg2=n[1]==null?B:n[1],t.topfx=n[2]==null?B:n[2],t.bypfx=n[3]==null?B:n[3],t.receiver_num=l,t.step=1,t.range=D(t.step_arg2)?(t.step=t.step_arg2,e.Range.$new(t.receiver_num,t.step_arg1,!1)):D(t.step_arg1)?e.Range.$new(t.receiver_num,t.step_arg1,!1):e.Range.$new(t.receiver_num,B,!1)):(D(l)||(t.skipped_arg=!0),n=[c,D(r=l)?r:1],t.range=n[0],t.step=n[1]),t.object=t,z(t.step,0)&&ee.$raise(_("ArgumentError"),"step can't be 0"),D(t.step["$respond_to?"]("to_int"))?B:ee.$raise(_("ArgumentError"),"no implicit conversion of "+t.step.$class()+" into Integer")},-2),x.$attr_reader("step"),V(x,"$begin",function(){var c=this;return c.range.$begin()}),V(x,"$end",function(){var c=this;return c.range.$end()}),V(x,"$exclude_end?",function(){var c=this;return c.range["$exclude_end?"]()}),V(x,"$_lesser_than_end?",function(c){var l=this,a=B,n=B;return a=D(n=l.$end())?n:Y,D(R(l.$step(),0))?D(l["$exclude_end?"]())?Z(c,a):m(c,a):D(l["$exclude_end?"]())?R(c,a):L(c,a)}),V(x,"$_greater_than_begin?",function(c){var l=this,a=B,n=B;return a=D(n=l.$begin())?n:Y["$-@"](),D(R(l.$step(),0))?R(c,a):Z(c,a)}),V(x,"$first",function(c){var l=this,a=B,n=B,t=B;if(a=D(n=l.$begin())?n:Y["$-@"](),!D(c))return D(l["$_lesser_than_end?"](a))?a:B;for(t=[];D(D(n=l["$_lesser_than_end?"](a))?R(c,0):n);)t["$<<"](a),a=ie(a,l.$step()),c=F(c,1);return t},-1),V(x,"$each",function H(){var c=H.$$p||B,l=this,a=B,n=B;if(H.$$p=null,c===B)return l;for(X(B,a=l.$begin())&&ee.$raise(_("TypeError"),"nil can't be coerced into Integer"),n=D(a=l.$begin())?a:Y["$-@"]();D(l["$_lesser_than_end?"](n));)e.yield1(c,n),n=ie(n,l.$step());return l}),V(x,"$last",function(c){var l=this,a=B,n=B,t=B;if(X(Y,a=l.$end())||X(Y["$-@"](),a)?ee.$raise(N("FloatDomainError"),l.$end()):X(B,a)&&ee.$raise(N("RangeError"),"cannot get the last element of endless arithmetic sequence"),n=F(l.$end(),F(l.$end(),l.$begin())["$%"](l.$step())),D(l["$_lesser_than_end?"](n))||(n=F(n,l.$step())),!D(c))return D(l["$_greater_than_begin?"](n))?n:B;for(t=[];D(D(a=l["$_greater_than_begin?"](n))?R(c,0):a);)t["$<<"](n),n=F(n,l.$step()),c=F(c,1);return t.$reverse()},-1),V(x,"$size",function(){var c=this,l=B,a=B;return l=D(R(c.$step(),0))?1:-1,ne(c["$_lesser_than_end?"](c.$begin()))?0:D([Y["$-@"](),Y]["$include?"](c.$step()))?1:D([W(Y["$-@"](),l),B]["$include?"](c.$begin()))||D([W(Y,l),B]["$include?"](c.$end()))?Y:(a=F(c.$end(),F(c.$end(),c.$begin())["$%"](c.$step())),D(c["$_lesser_than_end?"](a))||(a=F(a,c.$step())),ie(E(F(a,c.$begin()),c.$step()).$abs().$to_i(),1))}),V(x,"$==",function(c){var l=this,a=B,n=B,t=B,r=B;return D(a=D(n=D(t=D(r=l.$class()["$=="](c.$class()))?l.$begin()["$=="](c.$begin()):r)?l.$end()["$=="](c.$end()):t)?l.$step()["$=="](c.$step()):n)?l["$exclude_end?"]()["$=="](c["$exclude_end?"]()):a}),V(x,"$hash",function(){var c=this;return[_("ArithmeticSequence"),c.$begin(),c.$end(),c.$step(),c["$exclude_end?"]()].$hash()}),V(x,"$inspect",function(){var c=this,l=B;return D(c.receiver_num)?(l=D(c.step_arg2)?"("+c.topfx+c.step_arg1.$inspect()+", "+c.bypfx+c.step_arg2.$inspect()+")":D(c.step_arg1)?"("+c.topfx+c.step_arg1.$inspect()+")":B,"("+c.receiver_num.$inspect()+"."+c.creation_method+l+")"):(l=D(c.skipped_arg)?B:"("+c.step+")","(("+c.range.$inspect()+")."+c.creation_method+l+")")}),C(x,"===","=="),C(x,"eql?","==")}(A,A,w)}("::",null,P)};Opal.modules["corelib/enumerator/chain"]=function(e){var q=e.deny_frozen_access,D=e.klass,K=e.slice,z=e.def,ee=e.send,V=e.to_a,R=e.truthy,Z=e.rb_plus,m=e.thrower,L=e.nil,ie=e.$$$;return e.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(F,X){var ne=D(F,X,"Enumerator");return function(W,E){var C=D(W,E,"Chain"),P=C.$$prototype;return P.enums=P.iterated=L,z(C,"$initialize",function(N){var M,g,y=this;return M=K(arguments),g=M,q(y),y.enums=g,y.iterated=[],y.object=y},-1),z(C,"$each",function B(N){var M=B.$$p||L,g,y,A=this;return B.$$p=null,g=K(arguments),y=g,M===L?ee(A,"to_enum",["each"].concat(V(y)),function w(){var p=w.$$s==null?this:w.$$s;return p.$size()},{$$s:A}):(ee(A.enums,"each",[],function w(p){var s=w.$$s==null?this:w.$$s;return s.iterated==null&&(s.iterated=L),p==null&&(p=L),s.iterated["$<<"](p),ee(p,"each",V(y),M.$to_proc())},{$$s:A}),A)},-1),z(C,"$size",function(N){try{var M=m("return"),g,y,A=this,w=L;return g=K(arguments),y=g,w=0,ee(A.enums,"each",[],function p(s){var d=L;return s==null&&(s=L),d=ee(s,"size",V(y)),R([L,ie(ie("Float"),"INFINITY")]["$include?"](d))&&M.$throw(d,p.$$is_lambda),w=Z(w,d)},{$$ret:M}),w}catch(p){if(p===M)return p.$v;throw p}finally{M.is_orphan=!0}},-1),z(C,"$rewind",function(){var N=this;return ee(N.iterated,"reverse_each",[],function(g){return g==null&&(g=L),R(g["$respond_to?"]("rewind"))?g.$rewind():L}),N.iterated=[],N}),z(C,"$inspect",function(){var N=this;return"#<Enumerator::Chain: "+N.enums.$inspect()+">"})}(ne,ne)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(e){var q=e.deny_frozen_access,D=e.klass,K=e.truthy,z=e.Kernel,ee=e.def,V=e.slice,R=e.send,Z=[],m=e.nil,L=e.$$$;return e.add_stubs("include,raise,new,to_proc"),function(ie,F,X){var ne=D(ie,F,"Enumerator"),W=[ne].concat(X);return function(E,C,P){var B=D(E,C,"Generator"),N=[B].concat(P),M=e.$r(N),g=B.$$prototype;return g.block=m,B.$include(L("Enumerable")),ee(B,"$initialize",function y(){var A=y.$$p||m,w=this;return y.$$p=null,q(w),K(A)||z.$raise(L("LocalJumpError"),"no block given"),w.block=A}),ee(B,"$each",function y(A){var w=y.$$p||m,p,s,d=this,x=m;y.$$p=null,p=V(arguments),s=p,x=R(M("Yielder"),"new",[],w.$to_proc());try{s.unshift(x),e.yieldX(d.block,s)}catch(h){if(h&&h.$thrower_type=="breaker")return h.$v;throw h}return d},-1)}(W[0],null,W)}(Z[0],null,Z)};Opal.modules["corelib/enumerator/lazy"]=function(e){var q=e.truthy,D=e.coerce_to,K=e.yield1,z=e.yieldX,ee=e.deny_frozen_access,V=e.klass,R=e.slice,Z=e.send2,m=e.find_super,L=e.to_a,ie=e.defs,F=e.Kernel,X=e.send,ne=e.def,W=e.return_self,E=e.Opal,C=e.rb_lt,P=e.eqeqeq,B=e.rb_plus,N=e.alias,M=[],g=e.nil,y=e.$$$;return e.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(A,w,p){var s=V(A,w,"Enumerator"),d=[s].concat(p);return function(x,h,_){var o=V(x,h,"Lazy"),Y=[o].concat(_),H=e.$r(Y),c=o.$$prototype;return c.enumerator=g,V(o,y("Exception"),"StopLazyError"),ie(o,"$for",function l(a,n){var t,r,$=l.$$p||g,i=this,u=g;return l.$$p=null,t=R(arguments,1),r=t,u=Z(i,m(i,"for",l,!1,!0),"for",[a].concat(L(r)),$),u.enumerator=a,u},-2),ne(o,"$initialize",function l(a,n){var t=l.$$p||g,r=this;return l.$$p=null,n==null&&(n=g),ee(r),t===g&&F.$raise(y("ArgumentError"),"tried to call lazy new without a block"),r.enumerator=a,Z(r,m(r,"initialize",l,!1,!0),"initialize",[n],function(i,u){var v,k;i==null&&(i=g),v=R(arguments,1),k=v;try{return X(a,"each",L(k),function(S){var G,O;G=R(arguments),O=G,O.unshift(i),z(t,O)},-1)}catch(T){if(e.rescue(T,[H("StopLazyError")]))try{return g}finally{e.pop_exception(T)}else throw T}},-2)},-2),ne(o,"$lazy",W),ne(o,"$collect",function l(){var a=l.$$p||g,n=this;return l.$$p=null,q(a)||F.$raise(y("ArgumentError"),"tried to call lazy map without a block"),X(H("Lazy"),"new",[n,n.$enumerator_size()],function(r,$){var i,u;r==null&&(r=g),i=R(arguments,1),u=i;var v=z(a,u);r.$yield(v)},-2)}),ne(o,"$collect_concat",function l(){var a=l.$$p||g,n=this;return l.$$p=null,q(a)||F.$raise(y("ArgumentError"),"tried to call lazy map without a block"),X(H("Lazy"),"new",[n,g],function(r,$){var i,u;r==null&&(r=g),i=R(arguments,1),u=i;var v=z(a,u);if(v["$respond_to?"]("force")&&v["$respond_to?"]("each"))X(v,"each",[],function(S){return S==null&&(S=g),r.$yield(S)});else{var k=E.$try_convert(v,y("Array"),"to_ary");k===g?r.$yield(v):X(v,"each",[],function(S){return S==null&&(S=g),r.$yield(S)})}},-2)}),ne(o,"$drop",function(a){var n=this,t=g,r=g,$=g;return a=D(a,y("Integer"),"to_int"),q(C(a,0))&&F.$raise(y("ArgumentError"),"attempt to drop negative size"),t=n.$enumerator_size(),r=P(y("Integer"),t)&&q(C(a,t))?a:t,$=0,X(H("Lazy"),"new",[n,r],function(u,v){var k,T;return u==null&&(u=g),k=R(arguments,1),T=k,q(C($,a))?$=B($,1):X(u,"yield",L(T))},-2)}),ne(o,"$drop_while",function l(){var a=l.$$p||g,n=this,t=g;return l.$$p=null,q(a)||F.$raise(y("ArgumentError"),"tried to call lazy drop_while without a block"),t=!0,X(H("Lazy"),"new",[n,g],function($,i){var u,v;if($==null&&($=g),u=R(arguments,1),v=u,q(t)){var k=z(a,v);q(k)||(t=!1,X($,"yield",L(v)))}else return X($,"yield",L(v))},-2)}),ne(o,"$enum_for",function l(a,n){var t=l.$$p||g,r,$,i,u=this;return l.$$p=null,r=R(arguments),r.length>0&&($=r.shift()),$==null&&($="each"),i=r,X(u.$class(),"for",[u,$].concat(L(i)),t.$to_proc())},-1),ne(o,"$find_all",function l(){var a=l.$$p||g,n=this;return l.$$p=null,q(a)||F.$raise(y("ArgumentError"),"tried to call lazy select without a block"),X(H("Lazy"),"new",[n,g],function(r,$){var i,u;r==null&&(r=g),i=R(arguments,1),u=i;var v=z(a,u);q(v)&&X(r,"yield",L(u))},-2)}),ne(o,"$grep",function l(a){var n=l.$$p||g,t=this;return l.$$p=null,q(n)?X(H("Lazy"),"new",[t,g],function($,i){var u,v;$==null&&($=g),u=R(arguments,1),v=u;var k=E.$destructure(v),T=a["$==="](k);q(T)&&(T=K(n,k),$.$yield(K(n,k)))},-2):X(H("Lazy"),"new",[t,g],function($,i){var u,v;$==null&&($=g),u=R(arguments,1),v=u;var k=E.$destructure(v),T=a["$==="](k);q(T)&&$.$yield(k)},-2)}),ne(o,"$reject",function l(){var a=l.$$p||g,n=this;return l.$$p=null,q(a)||F.$raise(y("ArgumentError"),"tried to call lazy reject without a block"),X(H("Lazy"),"new",[n,g],function(r,$){var i,u;r==null&&(r=g),i=R(arguments,1),u=i;var v=z(a,u);q(v)||X(r,"yield",L(u))},-2)}),ne(o,"$take",function(a){var n=this,t=g,r=g,$=g;return a=D(a,y("Integer"),"to_int"),q(C(a,0))&&F.$raise(y("ArgumentError"),"attempt to take negative size"),t=n.$enumerator_size(),r=P(y("Integer"),t)&&q(C(a,t))?a:t,$=0,X(H("Lazy"),"new",[n,r],function(u,v){var k,T;return u==null&&(u=g),k=R(arguments,1),T=k,q(C($,a))?(X(u,"yield",L(T)),$=B($,1)):F.$raise(H("StopLazyError"))},-2)}),ne(o,"$take_while",function l(){var a=l.$$p||g,n=this;return l.$$p=null,q(a)||F.$raise(y("ArgumentError"),"tried to call lazy take_while without a block"),X(H("Lazy"),"new",[n,g],function(r,$){var i,u;r==null&&(r=g),i=R(arguments,1),u=i;var v=z(a,u);q(v)?X(r,"yield",L(u)):F.$raise(H("StopLazyError"))},-2)}),ne(o,"$inspect",function(){var a=this;return"#<"+a.$class()+": "+a.enumerator.$inspect()+">"}),N(o,"force","to_a"),N(o,"filter","find_all"),N(o,"flat_map","collect_concat"),N(o,"map","collect"),N(o,"select","find_all"),N(o,"to_enum","enum_for")}(s,s,d)}("::",null,M)};Opal.modules["corelib/enumerator/yielder"]=function(e){var q=e.klass,D=e.def,K=e.slice,z=e.send,ee=e.to_a,V=[],R=e.nil;return e.add_stubs("yield,proc"),function(Z,m,L){var ie=q(Z,m,"Enumerator"),F=[ie].concat(L);return function(X,ne){var W=q(X,ne,"Yielder"),E=W.$$prototype;return E.block=R,D(W,"$initialize",function C(){var P=C.$$p||R,B=this;return C.$$p=null,B.block=P,B}),D(W,"$yield",function(P){var B,N,M=this;B=K(arguments),N=B;var g=e.yieldX(M.block,N);if(g&&g.$thrower_type=="break")throw g;return g},-1),D(W,"$<<",function(P){var B=this;return B.$yield(P),B}),D(W,"$to_proc",function(){var P=this;return z(P,"proc",[],function B(N){var M,g,y=B.$$s==null?this:B.$$s;return M=K(arguments),g=M,z(y,"yield",ee(g))},{$$arity:-1,$$s:P})})}(F[0],null)}(V[0],null,V)};Opal.modules["corelib/enumerator"]=function(e){var q=e.slice,D=e.coerce_to,K=e.deny_frozen_access,z=e.klass,ee=e.defs,V=e.truthy,R=e.send,Z=e.not,m=e.def,L=e.rb_plus,ie=e.to_a,F=e.Opal,X=e.send2,ne=e.find_super,W=e.rb_ge,E=e.Kernel,C=e.rb_le,P=e.alias,B=e.top,N=[],M=e.nil,g=e.$$$;return e.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),B.$require("corelib/enumerable"),function(y,A,w){var p=z(y,A,"Enumerator"),s=[p].concat(w),d=e.$r(s),x=p.$$prototype;return x.size=x.args=x.object=x.method=x.values=x.cursor=M,p.$include(g("Enumerable")),p.$$prototype.$$is_enumerator=!0,ee(p,"$for",function h(_,o,Y){var H=h.$$p||M,c,l,a,n=this;h.$$p=null,c=q(arguments,1),c.length>0&&(l=c.shift()),l==null&&(l="each"),a=c;var t=n.$allocate();return t.object=_,t.size=H,t.method=l,t.args=a,t.cursor=0,t},-2),m(p,"$initialize",function h(_){var o=h.$$p||M,Y=this;return h.$$p=null,q(arguments),K(Y),Y.cursor=0,V(o)?(Y.object=R(d("Generator"),"new",[],o.$to_proc()),Y.method="each",Y.args=[],Y.size=arguments[0]||M,V(Y.size)&&Z(Y.size["$respond_to?"]("call"))?Y.size=D(Y.size,g("Integer"),"to_int"):M):(Y.object=arguments[0],Y.method=arguments[1]||"each",Y.args=q(arguments,2),Y.size=M)},-1),m(p,"$each",function h(_){var o=h.$$p||M,Y,H,c=this;return h.$$p=null,Y=q(arguments),H=Y,V(o["$nil?"]())&&V(H["$empty?"]())?c:(H=L(c.args,H),V(o["$nil?"]())?R(c.$class(),"new",[c.object,c.method].concat(ie(H))):R(c.object,"__send__",[c.method].concat(ie(H)),o.$to_proc()))},-1),m(p,"$size",function(){var _=this;return V(_.size["$respond_to?"]("call"))?R(_.size,"call",ie(_.args)):_.size}),m(p,"$with_index",function h(_){var o=h.$$p||M,Y=this;if(h.$$p=null,_==null&&(_=0),_=V(_)?D(_,g("Integer"),"to_int"):0,!V(o))return R(Y,"enum_for",["with_index",_],function c(){var l=c.$$s==null?this:c.$$s;return l.$size()},{$$s:Y});var H=_;return Y.$each.$$p=function(){var c=F.$destructure(arguments),l=o(c,H);return H++,l},Y.$each()},-1),m(p,"$each_with_index",function h(){var _=h.$$p||M,o=this;return h.$$p=null,_===M?R(o,"enum_for",["each_with_index"],function Y(){var H=Y.$$s==null?this:Y.$$s;return H.$size()},{$$s:o}):(X(o,ne(o,"each_with_index",h,!1,!0),"each_with_index",[],_),o.object)}),m(p,"$rewind",function(){var _=this;return _.cursor=0,_}),m(p,"$peek_values",function(){var _=this,o=M;return _.values=V(o=_.values)?o:R(_,"map",[],function(H){var c,l;return c=q(arguments),l=c,l},-1),V(W(_.cursor,_.values.$length()))&&E.$raise(g("StopIteration"),"iteration reached an end"),_.values["$[]"](_.cursor)}),m(p,"$peek",function(){var _=this,o=M;return o=_.$peek_values(),V(C(o.$length(),1))?o["$[]"](0):o}),m(p,"$next_values",function(){var _=this,o=M;return o=_.$peek_values(),_.cursor=L(_.cursor,1),o}),m(p,"$next",function(){var _=this,o=M;return o=_.$next_values(),V(C(o.$length(),1))?o["$[]"](0):o}),m(p,"$feed",function(_){var o=this;return o.$raise(d("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),m(p,"$+",function(_){var o=this;return g(g("Enumerator"),"Chain").$new(o,_)}),m(p,"$inspect",function(){var _=this,o=M;return o="#<"+_.$class()+": "+_.object.$inspect()+":"+_.method,V(_.args["$any?"]())&&(o=L(o,"("+_.args.$inspect()["$[]"](g("Range").$new(1,-2))+")")),L(o,">")}),P(p,"with_object","each_with_object"),p.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),p.$autoload("Chain","corelib/enumerator/chain"),p.$autoload("Generator","corelib/enumerator/generator"),p.$autoload("Lazy","corelib/enumerator/lazy"),p.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,N)};Opal.modules["corelib/numeric"]=function(e){var q=e.klass,D=e.truthy,K=e.Kernel,z=e.def,ee=e.to_ary,V=e.return_self,R=e.rb_minus,Z=e.rb_times,m=e.rb_lt,L=e.eqeq,ie=e.rb_divide,F=e.return_val,X=e.Opal,ne=e.slice,W=e.extract_kwargs,E=e.ensure_kwargs,C=e.hash_get,P=e.not,B=e.send,N=e.rb_ge,M=e.rb_le,g=e.rb_plus,y=e.rb_gt,A=e.alias,w=e.top,p=e.nil,s=e.$$$;return e.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),w.$require("corelib/comparable"),function(d,x){var h=q(d,x,"Numeric");return h.$include(s("Comparable")),z(h,"$coerce",function(o){var Y=this;return D(o["$instance_of?"](Y.$class()))?[o,Y]:[K.$Float(o),K.$Float(Y)]}),z(h,"$__coerced__",function(o,Y){var H,c,l=this,a=p,n=p;if(D(Y["$respond_to?"]("coerce")))return c=Y.$coerce(l),H=ee(c),a=H[0]==null?p:H[0],n=H[1]==null?p:H[1],a.$__send__(o,n);switch(o.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return K.$raise(s("TypeError"),""+Y.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return K.$raise(s("ArgumentError"),"comparison of "+l.$class()+" with "+Y.$class()+" failed");default:return p}}),z(h,"$<=>",function(o){var Y=this;return D(Y["$equal?"](o))?0:p}),z(h,"$+@",V),z(h,"$-@",function(){var o=this;return R(0,o)}),z(h,"$%",function(o){var Y=this;return R(Y,Z(o,Y.$div(o)))}),z(h,"$abs",function(){var o=this;return D(m(o,0))?o["$-@"]():o}),z(h,"$abs2",function(){var o=this;return Z(o,o)}),z(h,"$angle",function(){var o=this;return D(m(o,0))?s(s("Math"),"PI"):0}),z(h,"$ceil",function(o){var Y=this;return o==null&&(o=0),Y.$to_f().$ceil(o)},-1),z(h,"$conj",V),z(h,"$denominator",function(){var o=this;return o.$to_r().$denominator()}),z(h,"$div",function(o){var Y=this;return L(o,0)&&K.$raise(s("ZeroDivisionError"),"divided by o"),ie(Y,o).$floor()}),z(h,"$divmod",function(o){var Y=this;return[Y.$div(o),Y["$%"](o)]}),z(h,"$fdiv",function(o){var Y=this;return ie(Y.$to_f(),o)}),z(h,"$floor",function(o){var Y=this;return o==null&&(o=0),Y.$to_f().$floor(o)},-1),z(h,"$i",function(){var o=this;return K.$Complex(0,o)}),z(h,"$imag",F(0)),z(h,"$integer?",F(!1)),z(h,"$nonzero?",function(){var o=this;return D(o["$zero?"]())?p:o}),z(h,"$numerator",function(){var o=this;return o.$to_r().$numerator()}),z(h,"$polar",function(){var o=this;return[o.$abs(),o.$arg()]}),z(h,"$quo",function(o){var Y=this;return ie(X["$coerce_to!"](Y,s("Rational"),"to_r"),o)}),z(h,"$real",V),z(h,"$real?",F(!0)),z(h,"$rect",function(){var o=this;return[o,0]}),z(h,"$round",function(o){var Y=this;return Y.$to_f().$round(o)},-1),z(h,"$step",function _(o,Y,H){var c=_.$$p||p,l,a,n,t,r,$,i=this,u=p;_.$$p=null,l=ne(arguments),a=W(l),a=E(a),l.length>0&&(n=l.shift()),l.length>0&&(t=l.shift()),r=C(a,"to"),$=C(a,"by"),n!==void 0&&r!==void 0&&K.$raise(s("ArgumentError"),"to is given twice"),t!==void 0&&$!==void 0&&K.$raise(s("ArgumentError"),"step is given twice"),r!==void 0&&(n=r),$!==void 0&&(t=$),n===void 0&&(n=p);function v(){t===p&&K.$raise(s("TypeError"),"step must be numeric"),t!=null&&t["$=="](0)&&K.$raise(s("ArgumentError"),"step can't be 0"),(t===p||t==null)&&(t=1);var he=t["$<=>"](0);he===p&&K.$raise(s("ArgumentError"),"0 can't be coerced into "+t.$class()),(n===p||n==null)&&(n=he>0?s(s("Float"),"INFINITY"):s(s("Float"),"INFINITY")["$-@"]()),X.$compare(i,n)}function k(){if(t>0&&i>n||t<0&&i<n)return 0;if(t===1/0||t===-1/0)return 1;var he=Math.abs,ve=Math.floor,me=(he(i)+he(n)+he(n-i))/he(t)*s(s("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((n-i)/t+me)+1)}function T(){if(v(),t===0)return 1/0;if(t%1!==0)return k();if(t>0&&i>n||t<0&&i<n)return 0;var he=Math.ceil,ve=Math.abs,me=ve(i-n)+1,be=ve(t);return he(me/be)}if(c===p)return(P(n)||D(n["$is_a?"](s("Numeric"))))&&(P(t)||D(t["$is_a?"](s("Numeric"))))?s(s("Enumerator"),"ArithmeticSequence").$new([n,t,D(r)?"to: ":p,D($)?"by: ":p],i):B(i,"enum_for",["step",n,t],T.$to_proc());v();var S=t["$negative?"](),G=t["$=="](0)||n===1/0&&!S||n===-1/0&&S;if(i.$$is_number&&t.$$is_number&&n.$$is_number)if(i%1===0&&(G||n%1===0)&&t%1===0){var O=i;if(G)for(;;O+=t)c(O);else if(S)for(;O>=n;O+=t)c(O);else for(;O<=n;O+=t)c(O);return i}else{var ae=i.$to_f().valueOf();t=t.$to_f().valueOf(),n=n.$to_f().valueOf();var le=k();if(!isFinite(t))le!==0&&c(ae);else if(t===0)for(;;)c(ae);else for(var ce=0;ce<le;ce++){var de=ce*t+i;(t>=0?n<de:n>de)&&(de=n),c(de)}return i}for(u=i;D(S?N(u,n):M(u,n));)e.yield1(c,u),u=g(u,t)},-1),z(h,"$to_c",function(){var o=this;return K.$Complex(o,0)}),z(h,"$to_int",function(){var o=this;return o.$to_i()}),z(h,"$truncate",function(o){var Y=this;return o==null&&(o=0),Y.$to_f().$truncate(o)},-1),z(h,"$zero?",function(){var o=this;return o["$=="](0)}),z(h,"$positive?",function(){var o=this;return y(o,0)}),z(h,"$negative?",function(){var o=this;return m(o,0)}),z(h,"$dup",V),z(h,"$clone",function(o){var Y=this;return o=E(o),C(o,"freeze"),Y},-1),z(h,"$finite?",F(!0)),z(h,"$infinite?",F(p)),A(h,"arg","angle"),A(h,"conjugate","conj"),A(h,"imaginary","imag"),A(h,"magnitude","abs"),A(h,"modulo","%"),A(h,"phase","arg"),A(h,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(e){var q=e.truthy,D=e.falsy,K=e.yield1,z=e.hash_get,ee=e.hash_put,V=e.hash_delete,R=e.coerce_to,Z=e.respond_to,m=e.deny_frozen_access,L=e.freeze,ie=e.opal32_init,F=e.opal32_add,X=e.klass,ne=e.slice,W=e.defs,E=e.Kernel,C=e.def,P=e.Opal,B=e.eqeqeq,N=e.send2,M=e.find_super,g=e.send,y=e.rb_gt,A=e.rb_times,w=e.eqeq,p=e.rb_minus,s=e.to_a,d=e.to_ary,x=e.gvars,h=e.rb_ge,_=e.assign_ivar,o=e.rb_lt,Y=e.return_self,H=e.neqeq,c=e.alias,l=e.top,a=[],n=e.nil,t=e.$$$;return e.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),l.$require("corelib/enumerable"),l.$require("corelib/numeric"),function(r,$,i){var u=X(r,$,"Array"),v=[u].concat(i),k=e.$r(v);u.$include(t("Enumerable")),e.prop(u.$$prototype,"$$is_array",!0);function T($e){for(var I=$e[0],j=1,J=$e.length;j<J;j++)$e[j-1]=$e[j];return $e.pop(),I}function S($e,I){return I.$$name===e.Array?$e:I.$allocate().$replace($e.$to_a())}function G($e,I,j){for(var J,Q=null,te=new Array($e.length),se=0,oe=0;se<$e.length;se++){if(!Q)try{J=K(j,$e[se])}catch(fe){Q=fe}(Q||I(J))&&(te[oe]=$e[se],oe+=1)}if(oe!==se&&($e.splice.apply($e,[0,te.length].concat(te)),$e.splice(oe,te.length)),Q)throw Q}function O($e){return $e.$$is_array||($e=R($e,t("Array"),"to_ary")),$e.$to_a()}function ae($e,I){var j=I.length;if(j>6&&j<32767)$e.push.apply($e,I);else for(var J=0;J<j;J++)$e.push(I[J])}W(u,"$[]",function(I){var j,J,Q=this;return j=ne(arguments),J=j,S(J,Q)},-1),C(u,"$initialize",function $e(I,j){var J=$e.$$p||n,Q=this;if($e.$$p=null,I==null&&(I=n),j==null&&(j=n),m(Q),j!==n&&J!==n&&E.$warn("warning: block supersedes default value argument"),I>t(t("Integer"),"MAX")&&E.$raise(t("ArgumentError"),"array size too big"),arguments.length>2&&E.$raise(t("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return Q.length>0&&Q.splice(0,Q.length),Q;if(arguments.length===1){if(I.$$is_array)return Q.$replace(I.$to_a()),Q;if(I["$respond_to?"]("to_ary"))return Q.$replace(I.$to_ary()),Q}I=R(I,t("Integer"),"to_int"),I<0&&E.$raise(t("ArgumentError"),"negative array size"),Q.splice(0,Q.length);var te,se;if(J===n)for(te=0;te<I;te++)Q.push(j);else for(te=0,se;te<I;te++)se=J(te),Q[te]=se;return Q},-1),W(u,"$try_convert",function(I){return P["$coerce_to?"](I,t("Array"),"to_ary")}),C(u,"$&",function(I){var j=this;if(I=O(I),j.length===0||I.length===0)return[];var J=[],Q=new Map,te,se,oe;for(te=0,se=I.length;te<se;te++)ee(Q,I[te],!0);for(te=0,se=j.length;te<se;te++)oe=j[te],V(Q,oe)!==void 0&&J.push(oe);return J}),C(u,"$|",function(I){var j=this;I=O(I);var J=new Map,Q,te;for(Q=0,te=j.length;Q<te;Q++)ee(J,j[Q],!0);for(Q=0,te=I.length;Q<te;Q++)ee(J,I[Q],!0);return J.$keys()}),C(u,"$*",function(I){var j=this;if(q(I["$respond_to?"]("to_str")))return j.$join(I.$to_str());I=R(I,t("Integer"),"to_int"),q(I<0)&&E.$raise(t("ArgumentError"),"negative argument");for(var J=[],Q=j.$to_a(),te=0;te<I;te++)J=J.concat(Q);return J}),C(u,"$+",function(I){var j=this;return I=O(I),j.concat(I)}),C(u,"$-",function(I){var j=this;if(I=O(I),q(j.length===0))return[];if(q(I.length===0))return j.slice();var J=[],Q=new Map,te,se,oe;for(te=0,se=I.length;te<se;te++)ee(Q,I[te],!0);for(te=0,se=j.length;te<se;te++)oe=j[te],z(Q,oe)===void 0&&J.push(oe);return J}),C(u,"$<<",function(I){var j=this;return m(j),j.push(I),j}),C(u,"$<=>",function(I){var j=this;if(B(t("Array"),I))I=I.$to_a();else if(q(I["$respond_to?"]("to_ary")))I=I.$to_ary().$to_a();else return n;if(j===I)return 0;for(var J=Math.min(j.length,I.length),Q=0;Q<J;Q++){var te=j[Q]["$<=>"](I[Q]);if(te!==0)return te}return j.length["$<=>"](I.length)}),C(u,"$==",function(I){var j=this,J={};function Q(te,se){var oe,fe,f,b;if(te===se)return!0;if(!se.$$is_array)return Z(se,"$to_ary")?se["$=="](te):!1;if(te.$$constructor!==Array&&(te=te.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),te.length!==se.length)return!1;for(J[te.$object_id()]=!0,oe=0,fe=te.length;oe<fe;oe++)if(f=te[oe],b=se[oe],f.$$is_array){if(b.$$is_array&&b.length!==f.length||!J.hasOwnProperty(f.$object_id())&&!Q(f,b))return!1}else if(!f["$=="](b))return!1;return!0}return Q(j,I)});function le($e,I){var j=$e.length,J,Q,te,se;return J=I.excl,Q=I.begin===n?0:R(I.begin,e.Integer,"to_int"),te=I.end===n?-1:R(I.end,e.Integer,"to_int"),Q<0&&(Q+=j,Q<0)||(I.excl_rev&&I.begin!==n&&(Q+=1),Q>j)?n:te<0&&(te+=j,te<0)?[]:((!J||I.end===n)&&(te+=1),se=$e.slice(Q,te),se)}function ce($e,I){var j,J=[],Q=0,te;for(I.step<0?(te={begin:I.range.end,end:I.range.begin,excl:!1,excl_rev:I.range.excl},j=le($e,te).$reverse()):j=le($e,I.range);Q<j.length;)J.push(j[Q]),Q+=Math.abs(I.step);return J}function de($e,I,j){var J=$e.length,Q;return I=R(I,e.Integer,"to_int"),I<0&&(I+=J,I<0)?n:j===void 0?I>=J||I<0?n:$e[I]:(j=R(j,e.Integer,"to_int"),j<0||I>J||I<0?n:(Q=$e.slice(I,I+j),Q))}C(u,"$[]",function(I,j){var J=this;return I.$$is_range?le(J,I):I.$$is_arithmetic_seq?ce(J,I):de(J,I,j)},-2),C(u,"$[]=",function(I,j,J){var Q=this,te=n,se=n;m(Q),te=n;var oe,fe=Q.length;if(I.$$is_range){j.$$is_array?te=j.$to_a():j["$respond_to?"]("to_ary")?te=j.$to_ary().$to_a():te=[j];var f=I.excl,b=I.begin===n?0:R(I.begin,e.Integer,"to_int"),U=I.end===n?-1:R(I.end,e.Integer,"to_int");if(b<0&&(b+=fe,b<0&&E.$raise(t("RangeError"),""+I.$inspect()+" out of range")),U<0&&(U+=fe),(!f||I.end===n)&&(U+=1),b>fe)for(oe=fe;oe<b;oe++)Q[oe]=n;return U<0?Q.splice.apply(Q,[b,0].concat(te)):Q.splice.apply(Q,[b,U-b].concat(te)),j}else{J===void 0?se=1:(se=j,j=J,j.$$is_array?te=j.$to_a():j["$respond_to?"]("to_ary")?te=j.$to_ary().$to_a():te=[j]);var re;if(I=R(I,t("Integer"),"to_int"),se=R(se,t("Integer"),"to_int"),I<0&&(re=I,I+=fe,I<0&&E.$raise(t("IndexError"),"index "+re+" too small for array; minimum "+-Q.length)),se<0&&E.$raise(t("IndexError"),"negative length ("+se+")"),I>fe)for(oe=fe;oe<I;oe++)Q[oe]=n;return J===void 0?Q[I]=j:Q.splice.apply(Q,[I,se].concat(te)),j}},-3),C(u,"$any?",function $e(I){var j=$e.$$p||n,J=this;return $e.$$p=null,J.length===0?!1:N(J,M(J,"any?",$e,!1,!0),"any?",[I],j)},-1),C(u,"$assoc",function(I){for(var j=this,J=0,Q=j.length,te;J<Q;J++)if(te=j[J],te.length&&te[0]["$=="](I))return te;return n}),C(u,"$at",function(I){var j=this;return I=R(I,t("Integer"),"to_int"),I<0&&(I+=j.length),I<0||I>=j.length?n:j[I]}),C(u,"$bsearch_index",function $e(){var I=$e.$$p||n,j=this;if($e.$$p=null,I===n)return j.$enum_for("bsearch_index");for(var J=0,Q=j.length,te,se,oe,fe=!1,f=n;J<Q;){if(te=J+Math.floor((Q-J)/2),se=j[te],oe=K(I,se),oe===!0)f=te,fe=!0;else if(oe===!1||oe===n)fe=!1;else if(oe.$$is_number){if(oe===0)return te;fe=oe<0}else E.$raise(t("TypeError"),"wrong argument type "+oe.$class()+" (must be numeric, true, false or nil)");fe?Q=te:J=te+1}return f}),C(u,"$bsearch",function $e(){var I=$e.$$p||n,j=this,J=n;return $e.$$p=null,I===n?j.$enum_for("bsearch"):(J=g(j,"bsearch_index",[],I.$to_proc()),J!=null&&J.$$is_number?j[J]:J)}),C(u,"$cycle",function $e(I){var j=$e.$$p||n,J=this;if($e.$$p=null,I==null&&(I=n),j===n)return g(J,"enum_for",["cycle",I],function se(){var oe=se.$$s==null?this:se.$$s;return q(I["$nil?"]())?t(t("Float"),"INFINITY"):(I=P["$coerce_to!"](I,t("Integer"),"to_int"),q(y(I,0))?A(oe.$enumerator_size(),I):0)},{$$s:J});if(q(J["$empty?"]())||w(I,0))return n;var Q,te;if(I===n)for(;;)for(Q=0,te=J.length;Q<te;Q++)K(j,J[Q]);else{if(I=P["$coerce_to!"](I,t("Integer"),"to_int"),I<=0)return J;for(;I>0;){for(Q=0,te=J.length;Q<te;Q++)K(j,J[Q]);I--}}return J},-1),C(u,"$clear",function(){var I=this;return m(I),I.splice(0,I.length),I}),C(u,"$count",function $e(I){var j=$e.$$p||n,J=this;return $e.$$p=null,q(I!==void 0)||q(j)?N(J,M(J,"count",$e,!1,!0),"count",[I],j):J.$size()},-1),C(u,"$initialize_copy",function(I){var j=this;return j.$replace(I)}),C(u,"$collect",function $e(){var I=$e.$$p||n,j=this;if($e.$$p=null,I===n)return g(j,"enum_for",["collect"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:j});for(var J=[],Q=0;Q<j.length;Q++){var te=K(I,j[Q]);J[Q]=te}return J}),C(u,"$collect!",function $e(){var I=$e.$$p||n,j=this;if($e.$$p=null,I===n)return g(j,"enum_for",["collect!"],function te(){var se=te.$$s==null?this:te.$$s;return se.$size()},{$$s:j});m(j);for(var J=0;J<j.length;J++){var Q=K(I,j[J]);j[J]=Q}return j});function he($e,I){return $e===I||I===0?1:I>0&&$e>I?he($e-1,I-1)+he($e-1,I):0}C(u,"$combination",function $e(I){var j=$e.$$p||n,J=this,Q=n;if($e.$$p=null,Q=P["$coerce_to!"](I,t("Integer"),"to_int"),j===n)return g(J,"enum_for",["combination",Q],function re(){var ue=re.$$s==null?this:re.$$s;return he(ue.length,Q)},{$$s:J});var te,se,oe,fe,f,b,U;if(Q===0)e.yield1(j,[]);else if(Q===1)for(te=0,se=J.length;te<se;te++)e.yield1(j,[J[te]]);else if(Q===J.length)e.yield1(j,J.slice());else if(Q>=0&&Q<J.length){for(oe=[],te=0;te<=Q+1;te++)oe.push(0);for(fe=[],f=0,b=!1,oe[0]=-1;!b;){for(fe[f]=J[oe[f+1]];f<Q-1;)f++,U=oe[f+1]=oe[f]+1,fe[f]=J[U];e.yield1(j,fe.slice()),f++;do b=f===0,oe[f]++,f--;while(oe[f+1]+Q===J.length+f+1)}}return J}),C(u,"$repeated_combination",function $e(I){var j=$e.$$p||n,J=this,Q=n;if($e.$$p=null,Q=P["$coerce_to!"](I,t("Integer"),"to_int"),j===n)return g(J,"enum_for",["repeated_combination",Q],function se(){var oe=se.$$s==null?this:se.$$s;return he(oe.length+Q-1,Q)},{$$s:J});function te(se,oe,fe,f){if(fe.length==se){var b=fe.slice();e.yield1(j,b);return}for(var U=oe;U<f.length;U++)fe.push(f[U]),te(se,U,fe,f),fe.pop()}return Q>=0&&te(Q,0,[],J),J}),C(u,"$compact",function(){for(var I=this,j=[],J=0,Q=I.length,te;J<Q;J++)(te=I[J])!==n&&j.push(te);return j}),C(u,"$compact!",function(){var I=this;m(I);for(var j=I.length,J=0,Q=I.length;J<Q;J++)I[J]===n&&(I.splice(J,1),Q--,J--);return I.length===j?n:I}),C(u,"$concat",function(I){var j,J,Q=this;return j=ne(arguments),J=j,m(Q),J=g(J,"map",[],function te(se){var oe=te.$$s==null?this:te.$$s;return se==null&&(se=n),se=O(se),q(se["$equal?"](oe))&&(se=se.$dup()),se},{$$s:Q}),g(J,"each",[],function te(se){var oe=te.$$s==null?this:te.$$s;se==null&&(se=n);for(var fe=0,f=se.length;fe<f;fe++)oe.push(se[fe])},{$$s:Q}),Q},-1),C(u,"$delete",function $e(I){var j=$e.$$p||n,J=this;$e.$$p=null;for(var Q=J.length,te=0,se=Q;te<se;te++)J[te]["$=="](I)&&(m(J),J.splice(te,1),se--,te--);return J.length===Q?j!==n?e.yieldX(j,[]):n:I}),C(u,"$delete_at",function(I){var j=this;if(m(j),I=R(I,t("Integer"),"to_int"),I<0&&(I+=j.length),I<0||I>=j.length)return n;var J=j[I];return j.splice(I,1),J}),C(u,"$delete_if",function $e(){var I=$e.$$p||n,j=this;return $e.$$p=null,I===n?g(j,"enum_for",["delete_if"],function J(){var Q=J.$$s==null?this:J.$$s;return Q.$size()},{$$s:j}):(m(j),G(j,D,I),j)}),C(u,"$difference",function(I){var j,J,Q=this;return j=ne(arguments),J=j,g(J,"reduce",[Q.$to_a().$dup()],function(se,oe){return se==null&&(se=n),oe==null&&(oe=n),p(se,oe)})},-1),C(u,"$dig",function(I,j){var J,Q,te=this,se=n;return J=ne(arguments,1),Q=J,se=te["$[]"](I),se===n||Q.length===0?se:(q(se["$respond_to?"]("dig"))||E.$raise(t("TypeError"),""+se.$class()+" does not have #dig method"),g(se,"dig",s(Q)))},-2),C(u,"$drop",function(I){var j=this;return I=R(I,t("Integer"),"to_int"),I<0&&E.$raise(t("ArgumentError")),j.slice(I)}),C(u,"$dup",function $e(){var I=$e.$$p||n,j=this;return $e.$$p=null,j.$$class===e.Array&&j.$$class.$allocate.$$pristine&&j.$copy_instance_variables.$$pristine&&j.$initialize_dup.$$pristine?j.slice(0):N(j,M(j,"dup",$e,!1,!0),"dup",[],I)}),C(u,"$each",function $e(){var I=$e.$$p||n,j=this;if($e.$$p=null,I===n)return g(j,"enum_for",["each"],function Q(){var te=Q.$$s==null?this:Q.$$s;return te.$size()},{$$s:j});for(var J=0;J<j.length;J++)K(I,j[J]);return j}),C(u,"$each_index",function $e(){var I=$e.$$p||n,j=this;if($e.$$p=null,I===n)return g(j,"enum_for",["each_index"],function Q(){var te=Q.$$s==null?this:Q.$$s;return te.$size()},{$$s:j});for(var J=0;J<j.length;J++)K(I,J);return j}),C(u,"$empty?",function(){var I=this;return I.length===0}),C(u,"$eql?",function(I){var j=this,J={};function Q(te,se){var oe,fe,f,b;if(!se.$$is_array||(se=se.$to_a(),te.length!==se.length))return!1;for(J[te.$object_id()]=!0,oe=0,fe=te.length;oe<fe;oe++)if(f=te[oe],b=se[oe],f.$$is_array){if(b.$$is_array&&b.length!==f.length||!J.hasOwnProperty(f.$object_id())&&!Q(f,b))return!1}else if(!f["$eql?"](b))return!1;return!0}return Q(j,I)}),C(u,"$fetch",function $e(I,j){var J=$e.$$p||n,Q=this;$e.$$p=null;var te=I;if(I=R(I,t("Integer"),"to_int"),I<0&&(I+=Q.length),I>=0&&I<Q.length)return Q[I];if(J!==n&&j!=null&&Q.$warn("warning: block supersedes default value argument"),J!==n)return J(te);if(j!=null)return j;Q.length===0?E.$raise(t("IndexError"),"index "+te+" outside of array bounds: 0...0"):E.$raise(t("IndexError"),"index "+te+" outside of array bounds: -"+Q.length+"..."+Q.length)},-2),C(u,"$fill",function $e(I){var j=$e.$$p||n,J,Q,te,se,oe=this,fe=n,f=n,b=n,U=n,re=n;$e.$$p=null,J=ne(arguments),Q=J,m(oe);var ue,_e;if(q(j)?(q(Q.length>2)&&E.$raise(t("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 0..2)"),se=Q,te=d(se),fe=te[0]==null?n:te[0],f=te[1]==null?n:te[1]):(q(Q.length==0)?E.$raise(t("ArgumentError"),"wrong number of arguments (0 for 1..3)"):q(Q.length>3)&&E.$raise(t("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 1..3)"),se=Q,te=d(se),b=te[0]==null?n:te[0],fe=te[1]==null?n:te[1],f=te[2]==null?n:te[2]),B(t("Range"),fe)){if(q(f)&&E.$raise(t("TypeError"),"length invalid with range"),U=fe.begin===n?0:R(fe.begin,t("Integer"),"to_int"),q(U<0)&&(U+=this.length),q(U<0)&&E.$raise(t("RangeError"),""+fe.$inspect()+" out of range"),re=fe.end===n?-1:R(fe.end,t("Integer"),"to_int"),q(re<0)&&(re+=this.length),q(fe["$exclude_end?"]())||(re+=1),q(re<=U))return oe}else if(q(fe))if(U=R(fe,t("Integer"),"to_int"),q(U<0)&&(U+=this.length),q(U<0)&&(U=0),q(f)){if(re=R(f,t("Integer"),"to_int"),q(re==0))return oe;re+=U}else re=this.length;else U=0,re=this.length;if(q(U>this.length))for(ue=this.length;ue<re;ue++)oe[ue]=n;if(q(re>this.length)&&(this.length=re),q(j))for(this.length;U<re;U++)_e=j(U),oe[U]=_e;else for(this.length;U<re;U++)oe[U]=b;return oe},-1),C(u,"$first",function(I){var j=this;return I==null?j.length===0?n:j[0]:(I=R(I,t("Integer"),"to_int"),I<0&&E.$raise(t("ArgumentError"),"negative array size"),j.slice(0,I))},-1),C(u,"$flatten",function(I){var j=this;function J(Q,te){var se=[],oe,fe,f,b;for(Q=Q.$to_a(),oe=0,fe=Q.length;oe<fe;oe++){if(f=Q[oe],!Z(f,"$to_ary",!0)){se.push(f);continue}if(b=f.$to_ary(),b===n){se.push(f);continue}switch(b.$$is_array||E.$raise(t("TypeError")),b===j&&E.$raise(t("ArgumentError")),te){case void 0:se=se.concat(J(b));break;case 0:se.push(b);break;default:ae(se,J(b,te-1))}}return se}return I!==void 0&&(I=R(I,t("Integer"),"to_int")),J(j,I)},-1),C(u,"$flatten!",function(I){var j=this;m(j);var J=j.$flatten(I);if(j.length==J.length){for(var Q=0,te=j.length;Q<te&&j[Q]===J[Q];Q++);if(Q==te)return n}return j.$replace(J),j},-1),C(u,"$freeze",function(){var I=this;return q(I["$frozen?"]())?I:L(I)});var ve;C(u,"$hash",function(){var I=this,j=ve===void 0,J=ie(),Q=I.$object_id(),te,se,oe;if(J=F(J,10),J=F(J,I.length),j)ve=Object.create(null);else if(ve[Q])return F(J,16843009);try{for(oe in ve)if(te=ve[oe],I["$eql?"](te))return F(J,16843009);for(ve[Q]=I,se=0;se<I.length;se++)te=I[se],J=F(J,te.$hash());return J}finally{j&&(ve=void 0)}}),C(u,"$include?",function(I){for(var j=this,J=0,Q=j.length;J<Q;J++)if(j[J]["$=="](I))return!0;return!1}),C(u,"$index",function $e(I){var j=$e.$$p||n,J=this;$e.$$p=null;var Q,te,se;if(I!=null&&j!==n&&J.$warn("warning: given block not used"),I!=null){for(Q=0,te=J.length;Q<te;Q++)if(J[Q]["$=="](I))return Q}else if(j!==n){for(Q=0;Q<J.length;Q++)if(se=j(J[Q]),se!==!1&&se!==n)return Q}else return J.$enum_for("index");return n},-1),C(u,"$insert",function(I,j){var J,Q,te=this;if(J=ne(arguments,1),Q=J,m(te),I=R(I,t("Integer"),"to_int"),Q.length>0){if(I<0&&(I+=te.length+1,I<0&&E.$raise(t("IndexError"),""+I+" is out of bounds")),I>te.length)for(var se=te.length;se<I;se++)te.push(n);te.splice.apply(te,[I,0].concat(Q))}return te},-2);var me=[];C(u,"$inspect",function(){var I=this,j=[],J=I.$__id__(),Q=!0;return function(){try{if(me.indexOf(J)!==-1)return Q=!1,"[...]";me.push(J);for(var te=0,se=I.length;te<se;te++){var oe=I["$[]"](te);j.push(k("Opal").$inspect(oe))}return"["+j.join(", ")+"]"}finally{Q&&me.pop()}}()}),C(u,"$intersection",function(I){var j,J,Q=this,te=n,se=n;return j=ne(arguments),J=j,J.length===0?Q.$to_a().$dup():(J=J.map(O),Q.length===0?[]:(J=g(J,"sort_by",[],"length".$to_proc()),q(Q.length<J[0].length)?g(J,"reduce",[Q],"&".$to_proc()):(te=J.pop(),se=g(J,"reduce",[te],"&".$to_proc()),Q["$&"](se))))},-1),C(u,"$intersect?",function(I){var j=this,J,Q,te=new Map,se,oe;for(j.length<I.length?(J=j,Q=I):(J=I,Q=j),se=0,oe=J.length;se<oe;se++)ee(te,J[se],!0);for(se=0,oe=Q.length;se<oe;se++)if(z(te,Q[se]))return!0;return!1}),C(u,"$join",function(I){var j=this;if(x[","]==null&&(x[","]=n),I==null&&(I=n),q(j.length===0))return"";q(I===n)&&(I=x[","]);var J=[],Q,te,se,oe;for(Q=0,te=j.length;Q<te;Q++){if(se=j[Q],Z(se,"$to_str")&&(oe=se.$to_str(),oe!==n)){J.push(oe.$to_s());continue}if(Z(se,"$to_ary")&&(oe=se.$to_ary(),oe===j&&E.$raise(t("ArgumentError")),oe!==n)){J.push(oe.$join(I));continue}if(Z(se,"$to_s")&&(oe=se.$to_s(),oe!==n)){J.push(oe);continue}E.$raise(t("NoMethodError").$new(""+k("Opal").$inspect(j.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return I===n?J.join(""):J.join(P["$coerce_to!"](I,t("String"),"to_str").$to_s())},-1),C(u,"$keep_if",function $e(){var I=$e.$$p||n,j=this;return $e.$$p=null,I===n?g(j,"enum_for",["keep_if"],function J(){var Q=J.$$s==null?this:J.$$s;return Q.$size()},{$$s:j}):(m(j),G(j,q,I),j)}),C(u,"$last",function(I){var j=this;return I==null?j.length===0?n:j[j.length-1]:(I=R(I,t("Integer"),"to_int"),I<0&&E.$raise(t("ArgumentError"),"negative array size"),I>j.length&&(I=j.length),j.slice(j.length-I,j.length))},-1),C(u,"$length",function(){var I=this;return I.length}),C(u,"$max",function $e(I){var j=$e.$$p||n,J=this;return $e.$$p=null,g(J.$each(),"max",[I],j.$to_proc())},-1),C(u,"$min",function $e(){var I=$e.$$p||n,j=this;return $e.$$p=null,g(j.$each(),"min",[],I.$to_proc())});function be($e,I){for(var j=I>=0?1:0;I;)j*=$e,$e--,I--;return j}return C(u,"$permutation",function $e(I){var j=$e.$$p||n,J=this,Q=n,te=n;if($e.$$p=null,j===n)return g(J,"enum_for",["permutation",I],function b(){var U=b.$$s==null?this:b.$$s;return be(U.length,I===void 0?U.length:I)},{$$s:J});var se,oe,fe;if(I===void 0?I=J.length:I=R(I,t("Integer"),"to_int"),!(I<0||J.length<I))if(I===0)e.yield1(j,[]);else if(I===1)for(var f=0;f<J.length;f++)e.yield1(j,[J[f]]);else Q=k("Array").$new(I),te=k("Array").$new(J.length,!1),se=function(b,U,re,ue,_e){J=this;for(var ge=0;ge<J.length;ge++)if(ue["$[]"](ge)["$!"]())if(U[re]=ge,re<b-1)ue[ge]=!0,se.call(J,b,U,re+1,ue,_e),ue[ge]=!1;else{fe=[];for(var pe=0;pe<U.length;pe++)fe.push(J[U[pe]]);K(_e,fe)}},j!==n?(oe=J.slice(),se.call(oe,I,Q,0,te,j)):se.call(J,I,Q,0,te,j);return J},-1),C(u,"$repeated_permutation",function $e(I){var j=$e.$$p||n,J=this,Q=n;if($e.$$p=null,Q=P["$coerce_to!"](I,t("Integer"),"to_int"),j===n)return g(J,"enum_for",["repeated_permutation",Q],function se(){var oe=se.$$s==null?this:se.$$s;return q(h(Q,0))?oe.$size()["$**"](Q):0},{$$s:J});function te(se,oe,fe){if(oe.length==se){var f=oe.slice();e.yield1(j,f);return}for(var b=0;b<fe.length;b++)oe.push(fe[b]),te(se,oe,fe),oe.pop()}return te(Q,[],J.slice()),J}),C(u,"$pop",function(I){var j=this;return m(j),q(I===void 0)?q(j.length===0)?n:j.pop():(I=R(I,t("Integer"),"to_int"),q(I<0)&&E.$raise(t("ArgumentError"),"negative array size"),q(j.length===0)?[]:q(I===1)?[j.pop()]:q(I>j.length)?j.splice(0,j.length):j.splice(j.length-I,j.length))},-1),C(u,"$product",function $e(I){var j=$e.$$p||n,J,Q,te=this;$e.$$p=null,J=ne(arguments),Q=J;var se=j!==n?null:[],oe=Q.length+1,fe=new Array(oe),f=new Array(oe),b=new Array(oe),U,re,ue,_e,ge=1;for(b[0]=te,U=1;U<oe;U++)b[U]=R(Q[U-1],t("Array"),"to_ary");for(U=0;U<oe;U++){if(_e=b[U].length,_e===0)return se||te;ge*=_e,ge>2147483647&&E.$raise(t("RangeError"),"too big to product"),f[U]=_e,fe[U]=0}e:for(;;){for(ue=[],U=0;U<oe;U++)ue.push(b[U][fe[U]]);for(se?se.push(ue):e.yield1(j,ue),re=oe-1,fe[re]++;fe[re]===f[re];){if(fe[re]=0,--re<0)break e;fe[re]++}}return se||te},-1),C(u,"$push",function(I){var j,J,Q=this;return j=ne(arguments),J=j,m(Q),ae(Q,J),Q},-1),C(u,"$rassoc",function(I){for(var j=this,J=0,Q=j.length,te;J<Q;J++)if(te=j[J],te.length&&te[1]!==void 0&&te[1]["$=="](I))return te;return n}),C(u,"$reject",function $e(){var I=$e.$$p||n,j=this;if($e.$$p=null,I===n)return g(j,"enum_for",["reject"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:j});for(var J=[],Q=0,te;Q<j.length;Q++)te=I(j[Q]),(te===!1||te===n)&&J.push(j[Q]);return J}),C(u,"$reject!",function $e(){var I=$e.$$p||n,j=this,J=n;return $e.$$p=null,I===n?g(j,"enum_for",["reject!"],function Q(){var te=Q.$$s==null?this:Q.$$s;return te.$size()},{$$s:j}):(m(j),J=j.$length(),g(j,"delete_if",[],I.$to_proc()),w(j.$length(),J)?n:j)}),C(u,"$replace",function(I){var j=this;return m(j),I=O(I),j.length>0&&j.splice(0,j.length),ae(j,I),j}),C(u,"$reverse",function(){var I=this;return I.slice(0).reverse()}),C(u,"$reverse!",function(){var I=this;return m(I),I.reverse()}),C(u,"$reverse_each",function $e(){var I=$e.$$p||n,j=this;if($e.$$p=null,I===n)return g(j,"enum_for",["reverse_each"],function Q(){var te=Q.$$s==null?this:Q.$$s;return te.$size()},{$$s:j});for(var J=j.length-1;J>=0;J--)K(I,j[J]);return j}),C(u,"$rindex",function $e(I){var j=$e.$$p||n,J=this;$e.$$p=null;var Q,te;if(I!=null&&j!==n&&J.$warn("warning: given block not used"),I!=null){for(Q=J.length-1;Q>=0&&!(Q>=J.length);Q--)if(J[Q]["$=="](I))return Q}else if(j!==n){for(Q=J.length-1;Q>=0&&!(Q>=J.length);Q--)if(te=j(J[Q]),te!==!1&&te!==n)return Q}else if(I==null)return J.$enum_for("rindex");return n},-1),C(u,"$rotate",function(I){var j=this;I==null&&(I=1);var J,Q,te,se;return I=R(I,t("Integer"),"to_int"),j.length===1?j.slice():j.length===0?[]:(J=j.slice(),Q=I%J.length,te=J.slice(Q),se=J.slice(0,Q),te.concat(se))},-1),C(u,"$rotate!",function(I){var j=this,J=n;return I==null&&(I=1),m(j),j.length===0||j.length===1?j:(I=R(I,t("Integer"),"to_int"),J=j.$rotate(I),j.$replace(J))},-1),function($e,I){var j=X($e,I,"SampleRandom"),J=j.$$prototype;return J.rng=n,C(j,"$initialize",_("rng")),C(j,"$rand",function(te){var se=this,oe=n;return oe=R(se.rng.$rand(te),t("Integer"),"to_int"),q(oe<0)&&E.$raise(t("RangeError"),"random value must be >= 0"),q(oe<te)||E.$raise(t("RangeError"),"random value must be less than Array size"),oe})}(u,null),C(u,"$sample",function(I,j){var J=this,Q=n,te=n;if(q(I===void 0))return J.$at(E.$rand(J.length));if(q(j===void 0)?q(Q=P["$coerce_to?"](I,t("Hash"),"to_hash"))?(j=Q,I=n):(j=n,I=R(I,t("Integer"),"to_int")):(I=R(I,t("Integer"),"to_int"),j=R(j,t("Hash"),"to_hash")),q(I)&&q(I<0)&&E.$raise(t("ArgumentError"),"count must be greater than 0"),q(j)&&(te=j["$[]"]("random")),te=q(te)&&q(te["$respond_to?"]("rand"))?k("SampleRandom").$new(te):E,!q(I))return J[te.$rand(J.length)];var se,oe,fe,f,b,U,re,ue;switch(I>J.length&&(I=J.length),I){case 0:return[];case 1:return[J[te.$rand(J.length)]];case 2:return f=te.$rand(J.length),b=te.$rand(J.length-1),f<=b&&b++,[J[f],J[b]];default:if(J.length/I>3){for(se=!1,oe=0,fe=k("Array").$new(I),f=1,fe[0]=te.$rand(J.length);f<I;){for(U=te.$rand(J.length),b=0;b<f;){for(;U===fe[b];){if(oe++,oe>100){se=!0;break}U=te.$rand(J.length)}if(se)break;b++}if(se)break;fe[f]=U,f++}if(!se){for(f=0;f<I;)fe[f]=J[fe[f]],f++;return fe}}fe=J.slice();for(var _e=0;_e<I;_e++)re=te.$rand(J.length-_e)+_e,ue=fe[_e],fe[_e]=fe[re],fe[re]=ue;return I===J.length?fe:fe["$[]"](0,I)}},-1),C(u,"$select",function $e(){var I=$e.$$p||n,j=this;if($e.$$p=null,I===n)return g(j,"enum_for",["select"],function oe(){var fe=oe.$$s==null?this:oe.$$s;return fe.$size()},{$$s:j});for(var J=[],Q=0,te,se;Q<j.length;Q++)te=j[Q],se=K(I,te),q(se)&&J.push(te);return J}),C(u,"$select!",function $e(){var I=$e.$$p||n,j=this;if($e.$$p=null,I===n)return g(j,"enum_for",["select!"],function Q(){var te=Q.$$s==null?this:Q.$$s;return te.$size()},{$$s:j});m(j);var J=j.length;return g(j,"keep_if",[],I.$to_proc()),j.length===J?n:j}),C(u,"$shift",function(I){var j=this;return m(j),q(I===void 0)?q(j.length===0)?n:T(j):(I=R(I,t("Integer"),"to_int"),q(I<0)&&E.$raise(t("ArgumentError"),"negative array size"),q(j.length===0)?[]:j.splice(0,I))},-1),C(u,"$shuffle",function(I){var j=this;return j.$dup().$to_a()["$shuffle!"](I)},-1),C(u,"$shuffle!",function(I){var j=this;m(j);var J,Q=j.length,te,se;for(I!==void 0&&(I=P["$coerce_to?"](I,t("Hash"),"to_hash"),I!==n&&(I=I["$[]"]("random"),I!==n&&I["$respond_to?"]("rand")&&(J=I)));Q;)J?(te=J.$rand(Q).$to_int(),te<0&&E.$raise(t("RangeError"),"random number too small "+te),te>=Q&&E.$raise(t("RangeError"),"random number too big "+te)):te=j.$rand(Q),se=j[--Q],j[Q]=j[te],j[te]=se;return j},-1),C(u,"$slice!",function(I,j){var J=this,Q=n,te=n,se=n,oe=n,fe=n;if(m(J),Q=n,q(j===void 0))if(B(t("Range"),I)){te=I,Q=J["$[]"](te),se=te.begin===n?0:R(te.begin,t("Integer"),"to_int"),oe=te.end===n?-1:R(te.end,t("Integer"),"to_int"),se<0&&(se+=J.length),oe<0?oe+=J.length:oe>=J.length&&(oe=J.length-1,te.excl&&(oe+=1));var f=oe-se;te.excl&&te.end!==n?oe-=1:f+=1,se<J.length&&se>=0&&oe<J.length&&oe>=0&&f>0&&J.splice(se,f)}else{if(fe=R(I,t("Integer"),"to_int"),fe<0&&(fe+=J.length),fe<0||fe>=J.length)return n;Q=J[fe],fe===0?J.shift():J.splice(fe,1)}else{if(fe=R(I,t("Integer"),"to_int"),j=R(j,t("Integer"),"to_int"),j<0)return n;Q=J["$[]"](fe,j),fe<0&&(fe+=J.length),fe+j>J.length&&(j=J.length-fe),fe<J.length&&fe>=0&&J.splice(fe,j)}return Q},-2),C(u,"$sort",function $e(){var I=$e.$$p||n,j=this;return $e.$$p=null,q(j.length>1)?(I===n&&(I=function(J,Q){return J["$<=>"](Q)}),j.slice().sort(function(J,Q){var te=I(J,Q);return te===n&&E.$raise(t("ArgumentError"),"comparison of "+J.$inspect()+" with "+Q.$inspect()+" failed"),y(te,0)?1:o(te,0)?-1:0})):j}),C(u,"$sort!",function $e(){var I=$e.$$p||n,j=this;$e.$$p=null,m(j);var J;I!==n?J=g(j.slice(),"sort",[],I.$to_proc()):J=j.slice().$sort(),j.length=0;for(var Q=0,te=J.length;Q<te;Q++)j.push(J[Q]);return j}),C(u,"$sort_by!",function $e(){var I=$e.$$p||n,j=this;return $e.$$p=null,I===n?g(j,"enum_for",["sort_by!"],function J(){var Q=J.$$s==null?this:J.$$s;return Q.$size()},{$$s:j}):(m(j),j.$replace(g(j,"sort_by",[],I.$to_proc())))}),C(u,"$take",function(I){var j=this;return I<0&&E.$raise(t("ArgumentError")),j.slice(0,I)}),C(u,"$take_while",function $e(){var I=$e.$$p||n,j=this;$e.$$p=null;for(var J=[],Q=0,te,se;Q<j.length;Q++){if(te=j[Q],se=I(te),se===!1||se===n)return J;J.push(te)}return J}),C(u,"$to_a",function(){var I=this;return I.$$class===e.Array?I:e.Array.$new(I)}),C(u,"$to_ary",Y),C(u,"$to_h",function $e(){var I=$e.$$p||n,j=this,J=n;$e.$$p=null,J=j,I!==n&&(J=g(J,"map",[],I.$to_proc()));var Q,te=J.length,se,oe,fe,f=new Map;for(Q=0;Q<te;Q++)se=P["$coerce_to?"](J[Q],t("Array"),"to_ary"),se.$$is_array||E.$raise(t("TypeError"),"wrong element type "+J[Q].$class()+" at "+Q+" (expected array)"),se.length!==2&&E.$raise(t("ArgumentError"),"element has wrong array length at "+Q+" (expected 2, was "+se.$length()+")"),oe=se[0],fe=se[1],ee(f,oe,fe);return f}),C(u,"$transpose",function(){var I=this,j=n,J=n;return q(I["$empty?"]())?[]:(j=[],J=n,g(I,"each",[],function(te){var se=n;return te==null&&(te=n),te=O(te),J=q(se=J)?se:te.length,H(te.length,J)&&E.$raise(t("IndexError"),"element size differs ("+te.length+" should be "+J+")"),g(te.length,"times",[],function(fe){var f,b=n;return fe==null&&(fe=n),b=q(se=j["$[]"](fe))?se:(f=[fe,[]],g(j,"[]=",f),f[f.length-1]),b["$<<"](te.$at(fe))})}),j)}),C(u,"$union",function(I){var j,J,Q=this;return j=ne(arguments),J=j,g(J,"reduce",[Q.$uniq()],function(se,oe){return se==null&&(se=n),oe==null&&(oe=n),se["$|"](oe)})},-1),C(u,"$uniq",function $e(){var I=$e.$$p||n,j=this;$e.$$p=null;var J=new Map,Q,te,se,oe;if(I===n)for(Q=0,te=j.length;Q<te;Q++)se=j[Q],z(J,se)===void 0&&ee(J,se,se);else for(Q=0;Q<j.length;Q++)se=j[Q],oe=K(I,se),z(J,oe)===void 0&&ee(J,oe,se);return J.$values()}),C(u,"$uniq!",function $e(){var I=$e.$$p||n,j=this;$e.$$p=null,m(j);var J=new Map,Q,te,se,oe=[];for(Q=0;Q<j.length;Q++)te=j[Q],se=I===n?te:K(I,te),z(J,se)===void 0?ee(J,se,te):oe.push(Q);for(Q=oe.length-1;Q>=0;Q--)j.splice(oe[Q],1);return oe.length===0?n:j}),C(u,"$unshift",function(I){var j,J,Q=this;j=ne(arguments),J=j,m(Q);var te=Q.length,se=J.length;if(se==0)return Q;for(var oe=te-se,fe=0;fe<se;fe++)Q.push(Q[oe+fe]);for(var f=te-1;f-se>=0;)Q[f]=Q[f-se],f--;for(var b=0;b<se;b++)Q[b]=J[b];return Q},-1),C(u,"$values_at",function(I){var j,J,Q=this,te=n;return j=ne(arguments),J=j,te=[],g(J,"each",[],function se(oe){var fe=se.$$s==null?this:se.$$s,f=n,b=n,U=n;return oe==null&&(oe=n),q(oe["$is_a?"](t("Range")))?(f=oe.$end()===n?-1:R(oe.$end(),t("Integer"),"to_int"),b=oe.$begin()===n?0:R(oe.$begin(),t("Integer"),"to_int"),b<0?(b=b+fe.length,n):(f<0&&(f=f+fe.length),oe["$exclude_end?"]()&&oe.$end()!==n&&f--,f<b?n:g(b,"upto",[f],function re(ue){var _e=re.$$s==null?this:re.$$s;return ue==null&&(ue=n),te["$<<"](_e.$at(ue))},{$$s:fe}))):(U=R(oe,t("Integer"),"to_int"),te["$<<"](fe.$at(U)))},{$$s:Q}),te},-1),C(u,"$zip",function $e(I){var j=$e.$$p||n,J,Q,te=this,se=n;$e.$$p=null,J=ne(arguments),Q=J;var oe=[],fe=te.length,f,b,U,re,ue;for(re=0,ue=Q.length;re<ue;re++)if(b=Q[re],!b.$$is_array){if(b.$$is_range||b.$$is_enumerator){Q[re]=b.$take(fe);continue}Q[re]=(q(se=P["$coerce_to?"](b,t("Array"),"to_ary"))?se:P["$coerce_to!"](b,t("Enumerator"),"to_enum","each")).$to_a()}for(U=0;U<fe;U++){for(f=[te[U]],re=0,ue=Q.length;re<ue;re++)b=Q[re][U],b==null&&(b=n),f[re+1]=b;oe[U]=f}if(j!==n){for(U=0;U<fe;U++)e.yield1(j,oe[U]);return n}return oe},-1),W(u,"$inherited",function(I){I.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),C(u,"$instance_variables",function $e(){var I=$e.$$p||n,j=this;return $e.$$p=null,g(N(j,M(j,"instance_variables",$e,!1,!0),"instance_variables",[],I),"reject",[],function(Q){var te=n;return Q==null&&(Q=n),q(te=/^@\d+$/.test(Q))?te:Q["$=="]("@length")})}),C(u,"$pack",function(I){return ne(arguments),E.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),c(u,"append","push"),c(u,"filter","select"),c(u,"filter!","select!"),c(u,"map","collect"),c(u,"map!","collect!"),c(u,"prepend","unshift"),c(u,"size","length"),c(u,"slice","[]"),c(u,"to_s","inspect"),P.$pristine(u.$singleton_class(),"allocate"),P.$pristine(u,"copy_instance_variables","initialize_dup")}("::",Array,a)};Opal.modules["corelib/hash"]=function(e){var q=e.yield1,D=e.hash_clone,K=e.hash_delete,z=e.hash_each,ee=e.hash_get,V=e.hash_put,R=e.deny_frozen_access,Z=e.freeze,m=e.opal32_init,L=e.opal32_add,ie=e.klass,F=e.slice,X=e.Opal,ne=e.Kernel,W=e.defs,E=e.def,C=e.send,P=e.rb_ge,B=e.rb_gt,N=e.truthy,M=e.to_a,g=e.return_self,y=e.not,A=e.alias,w=e.top,p=[],s=e.nil,d=e.$$$;return e.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),w.$require("corelib/enumerable"),function(x,h,_){var o=ie(x,h,"Hash"),Y=[o].concat(_),H=e.$r(Y);o.$include(d("Enumerable")),o.$$prototype.$$is_hash=!0,W(o,"$[]",function(n){var t,r,$=this;t=F(arguments),r=t;var i,u=r.length,v,k;if(u===1){if(i=X["$coerce_to?"](r["$[]"](0),d("Hash"),"to_hash"),i!==s)return $.$allocate()["$merge!"](i);for(r=X["$coerce_to?"](r["$[]"](0),d("Array"),"to_ary"),r===s&&ne.$raise(d("ArgumentError"),"odd number of arguments for Hash"),u=r.length,i=$.$allocate(),k=0;k<u;k++)v=r[k],v.$$is_array||ne.$raise(d("ArgumentError"),"invalid element "+v.$inspect()+" for Hash"),v.length===1?i.$store(v[0],s):v.length===2?i.$store(v[0],v[1]):ne.$raise(d("ArgumentError"),"invalid number of elements ("+v.length+" for "+v.$inspect()+"), must be 1..2");return i}for(u%2!==0&&ne.$raise(d("ArgumentError"),"odd number of arguments for Hash"),i=$.$allocate(),k=0;k<u;k+=2)i.$store(r[k],r[k+1]);return i},-1),W(o,"$allocate",function(){var n=this,t=new n.$$constructor;return t.$$none=s,t.$$proc=s,t}),W(o,"$try_convert",function(n){return X["$coerce_to?"](n,d("Hash"),"to_hash")}),E(o,"$initialize",function a(n){var t=a.$$p||s,r=this;return a.$$p=null,R(r),n!==void 0&&t!==s&&ne.$raise(d("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=n===void 0?s:n,r.$$proc=t,r},-1),E(o,"$==",function(n){var t=this;return t===n?!0:!n.$$is_hash||t.size!==n.size?!1:z(t,!0,function(r,$){var i=ee(n,r);return i===void 0||!$["$eql?"](i)?[!0,!1]:[!1,!0]})}),E(o,"$>=",function(n){var t=this,r=s;return n=X["$coerce_to!"](n,d("Hash"),"to_hash"),t.size<n.size?!1:(r=!0,C(n,"each",[],function $(i,u){var v=$.$$s==null?this:$.$$s,k=s;if(i==null&&(i=s),u==null&&(u=s),k=v.$fetch(i,null),k==null||k!==u){r=!1;return}},{$$s:t}),r)}),E(o,"$>",function(n){var t=this;return n=X["$coerce_to!"](n,d("Hash"),"to_hash"),t.size<=n.size?!1:P(t,n)}),E(o,"$<",function(n){var t=this;return n=X["$coerce_to!"](n,d("Hash"),"to_hash"),B(n,t)}),E(o,"$<=",function(n){var t=this;return n=X["$coerce_to!"](n,d("Hash"),"to_hash"),P(n,t)}),E(o,"$[]",function(n){var t=this,r=ee(t,n);return r!==void 0?r:t.$default(n)}),E(o,"$[]=",function(n,t){var r=this;return R(r),V(r,n,t),t}),E(o,"$assoc",function(n){var t=this;return z(t,s,function(r,$){return r["$=="](n)?[!0,[r,$]]:[!1,s]})}),E(o,"$clear",function(){var n=this;return R(n),n.clear(),n.$$keys&&n.$$keys.clear(),n}),E(o,"$clone",function(){var n=this,t=n.$class().$new();return D(n,t),n["$frozen?"]()?t.$freeze():t}),E(o,"$compact",function(){var n=this,t=new Map;return z(n,t,function(r,$){return $!==s&&V(t,r,$),[!1,t]})}),E(o,"$compact!",function(){var n=this;R(n);var t=s;return z(n,t,function(r,$){return $===s&&(K(n,r),t=n),[!1,t]})}),E(o,"$compare_by_identity",function(){var n=this;return R(n),n.$$by_identity||(n.$$by_identity=!0,n.size!==0&&e.hash_rehash(n)),n}),E(o,"$compare_by_identity?",function(){var n=this;return n.$$by_identity===!0}),E(o,"$default",function(n){var t=this;return n!==void 0&&t.$$proc!==s&&t.$$proc!==void 0?t.$$proc.$call(t,n):t.$$none===void 0?s:t.$$none},-1),E(o,"$default=",function(n){var t=this;return R(t),t.$$proc=s,t.$$none=n,n}),E(o,"$default_proc",function(){var n=this;return n.$$proc!==void 0?n.$$proc:s}),E(o,"$default_proc=",function(n){var t=this;R(t);var r=n;return r!==s&&(r=X["$coerce_to!"](r,d("Proc"),"to_proc"),r["$lambda?"]()&&r.$arity().$abs()!==2&&ne.$raise(d("TypeError"),"default_proc takes two arguments")),t.$$none=s,t.$$proc=r,n}),E(o,"$delete",function a(n){var t=a.$$p||s,r=this;a.$$p=null,R(r);var $=K(r,n);return $!==void 0?$:t!==s?e.yield1(t,n):s}),E(o,"$delete_if",function a(){var n=a.$$p||s,t=this;return a.$$p=null,N(n)?(R(t),z(t,t,function(r,$){var i=n(r,$);return i!==!1&&i!==s&&K(t,r),[!1,t]})):C(t,"enum_for",["delete_if"],function r(){var $=r.$$s==null?this:r.$$s;return $.$size()},{$$s:t})}),E(o,"$dig",function(n,t){var r,$,i=this,u=s;return r=F(arguments,1),$=r,u=i["$[]"](n),u===s||$.length===0?u:(N(u["$respond_to?"]("dig"))||ne.$raise(d("TypeError"),""+u.$class()+" does not have #dig method"),C(u,"dig",M($)))},-2),E(o,"$dup",function(){var n=this;return D(n,n.$class().$new())}),E(o,"$each",function a(){var n=a.$$p||s,t=this;return a.$$p=null,N(n)?z(t,t,function(r,$){return q(n,[r,$]),[!1,t]}):C(t,"enum_for",["each"],function r(){var $=r.$$s==null?this:r.$$s;return $.$size()},{$$s:t})}),E(o,"$each_key",function a(){var n=a.$$p||s,t=this;return a.$$p=null,N(n)?z(t,t,function(r,$){return n(r),[!1,t]}):C(t,"enum_for",["each_key"],function r(){var $=r.$$s==null?this:r.$$s;return $.$size()},{$$s:t})}),E(o,"$each_value",function a(){var n=a.$$p||s,t=this;return a.$$p=null,N(n)?z(t,t,function(r,$){return n($),[!1,t]}):C(t,"enum_for",["each_value"],function r(){var $=r.$$s==null?this:r.$$s;return $.$size()},{$$s:t})}),E(o,"$empty?",function(){var n=this;return n.size===0}),E(o,"$except",function(n){var t,r,$=this;return t=F(arguments),r=t,C($.$dup(),"except!",M(r))},-1),E(o,"$except!",function(n){var t,r,$=this;return t=F(arguments),r=t,C(r,"each",[],function i(u){var v=i.$$s==null?this:i.$$s;return u==null&&(u=s),v.$delete(u)},{$$s:$}),$},-1),E(o,"$fetch",function a(n,t){var r=a.$$p||s,$=this;a.$$p=null;var i=ee($,n);return i!==void 0?i:r!==s?r(n):t!==void 0?t:ne.$raise(d("KeyError").$new("key not found: "+n.$inspect(),new Map([["key",n],["receiver",$]])))},-2),E(o,"$fetch_values",function a(n){var t=a.$$p||s,r,$,i=this;return a.$$p=null,r=F(arguments),$=r,C($,"map",[],function u(v){var k=u.$$s==null?this:u.$$s;return v==null&&(v=s),C(k,"fetch",[v],t.$to_proc())},{$$s:i})},-1),E(o,"$flatten",function(n){var t=this;n==null&&(n=1),n=X["$coerce_to!"](n,d("Integer"),"to_int");var r=[];return z(t,r,function($,i){return r.push($),i.$$is_array?n===1?(r.push(i),[!1,r]):(r=r.concat(i.$flatten(n-2)),[!1,r]):(r.push(i),[!1,r])})},-1),E(o,"$freeze",function(){var n=this;return N(n["$frozen?"]())?n:Z(n)}),E(o,"$has_key?",function(n){var t=this;return ee(t,n)!==void 0}),E(o,"$has_value?",function(n){var t=this;return z(t,!1,function(r,$){return $["$=="](n)?[!0,!0]:[!1,!1]})});var c;E(o,"$hash",function(){var n=this,t=c===void 0,r=n.$object_id(),$=m(),i,u,v,k=n.size,T=new Int32Array(k);if($=L($,4),$=L($,k),t)c=Object.create(null);else if(c[r])return L($,16843009);try{for(i in c)if(u=c[i],n["$eql?"](u))return L($,16843009);for(c[r]=n,v=0,z(n,!1,function(S,G){return T[v]=[1883326802,S,G].$hash(),v++,[!1,!1]}),T=T.sort(),v=0;v<T.length;v++)$=L($,T[v]);return $}finally{t&&(c=void 0)}}),E(o,"$index",function(n){var t=this;return z(t,s,function(r,$){return $["$=="](n)?[!0,r]:[!1,s]})}),E(o,"$indexes",function(n){var t,r,$=this;t=F(arguments),r=t;for(var i=[],u=0,v=r.length,k,T;u<v;u++){if(k=r[u],T=ee($,k),T===void 0){i.push($.$default());continue}i.push(T)}return i},-1);var l;return E(o,"$inspect",function(){var n=this,t=l===void 0,r=n.$object_id(),$=[];return function(){try{if(t&&(l={}),l.hasOwnProperty(r))return"{...}";return l[r]=!0,z(n,!1,function(i,u){return u=H("Opal").$inspect(u),i=H("Opal").$inspect(i),$.push(i+"=>"+u),[!1,!1]}),"{"+$.join(", ")+"}";return s}finally{t&&(l=void 0)}}()}),E(o,"$invert",function(){var n=this,t=new Map;return z(n,t,function(r,$){return V(t,$,r),[!1,t]})}),E(o,"$keep_if",function a(){var n=a.$$p||s,t=this;return a.$$p=null,N(n)?(R(t),z(t,t,function(r,$){var i=n(r,$);return(i===!1||i===s)&&K(t,r),[!1,t]})):C(t,"enum_for",["keep_if"],function r(){var $=r.$$s==null?this:r.$$s;return $.$size()},{$$s:t})}),E(o,"$keys",function(){var n=this;return Array.from(n.keys())}),E(o,"$length",function(){var n=this;return n.size}),E(o,"$merge",function a(n){var t=a.$$p||s,r,$,i=this;return a.$$p=null,r=F(arguments),$=r,C(i.$dup(),"merge!",M($),t.$to_proc())},-1),E(o,"$merge!",function a(n){var t=a.$$p||s,r,$,i=this;a.$$p=null,r=F(arguments),$=r,R(i);var u,v;for(u=0;u<$.length;++u)v=X["$coerce_to!"]($[u],d("Hash"),"to_hash"),t===s?z(v,!1,function(k,T){return V(i,k,T),[!1,!1]}):z(v,!1,function(k,T){var S=ee(i,k);return S===void 0?(V(i,k,T),[!1,!1]):(V(i,k,t(k,S,T)),[!1,!1])});return i},-1),E(o,"$rassoc",function(n){var t=this;return z(t,s,function(r,$){return $["$=="](n)?[!0,[r,$]]:[!1,s]})}),E(o,"$rehash",function(){var n=this;return R(n),e.hash_rehash(n)}),E(o,"$reject",function a(){var n=a.$$p||s,t=this;if(a.$$p=null,!N(n))return C(t,"enum_for",["reject"],function $(){var i=$.$$s==null?this:$.$$s;return i.$size()},{$$s:t});var r=new Map;return z(t,r,function($,i){var u=n($,i);return(u===!1||u===s)&&V(r,$,i),[!1,r]})}),E(o,"$reject!",function a(){var n=a.$$p||s,t=this;if(a.$$p=null,!N(n))return C(t,"enum_for",["reject!"],function $(){var i=$.$$s==null?this:$.$$s;return i.$size()},{$$s:t});R(t);var r=s;return z(t,r,function($,i){var u=n($,i);return u!==!1&&u!==s&&(K(t,$),r=t),[!1,r]})}),E(o,"$replace",function(n){var t=this;return R(t),n=X["$coerce_to!"](n,d("Hash"),"to_hash"),t.$clear(),z(n,!1,function(r,$){return V(t,r,$),[!1,!1]}),N(n.$default_proc())?t["$default_proc="](n.$default_proc()):t["$default="](n.$default()),t}),E(o,"$select",function a(){var n=a.$$p||s,t=this;if(a.$$p=null,!N(n))return C(t,"enum_for",["select"],function $(){var i=$.$$s==null?this:$.$$s;return i.$size()},{$$s:t});var r=new Map;return z(t,r,function($,i){var u=n($,i);return u!==!1&&u!==s&&V(r,$,i),[!1,r]})}),E(o,"$select!",function a(){var n=a.$$p||s,t=this;if(a.$$p=null,!N(n))return C(t,"enum_for",["select!"],function $(){var i=$.$$s==null?this:$.$$s;return i.$size()},{$$s:t});R(t);var r=s;return z(t,r,function($,i){var u=n($,i);return(u===!1||u===s)&&(K(t,$),r=t),[!1,r]})}),E(o,"$shift",function(){var n=this;return R(n),z(n,s,function(t,r){return[!0,[t,K(n,t)]]})}),E(o,"$slice",function(n){var t,r,$=this;t=F(arguments),r=t;for(var i=new Map,u=0,v=r.length;u<v;u++){var k=r[u],T=ee($,k);T!==void 0&&V(i,k,T)}return i},-1),E(o,"$to_a",function(){var n=this,t=[];return z(n,t,function(r,$){return t.push([r,$]),[!1,t]})}),E(o,"$to_h",function a(){var n=a.$$p||s,t=this;if(a.$$p=null,n!==s)return C(t,"map",[],n.$to_proc()).$to_h();if(t.$$class===e.Hash)return t;var r=new Map;return D(t,r),r}),E(o,"$to_hash",g),E(o,"$to_proc",function(){var n=this;return C(n,"proc",[],function t(r){var $=t.$$s==null?this:t.$$s;return r==null&&ne.$raise(d("ArgumentError"),"no key given"),$["$[]"](r)},{$$arity:-1,$$s:n})}),E(o,"$transform_keys",function a(n){var t=a.$$p||s,r=this;if(a.$$p=null,n==null&&(n=s),y(t)&&y(n))return C(r,"enum_for",["transform_keys"],function i(){var u=i.$$s==null?this:i.$$s;return u.$size()},{$$s:r});var $=new Map;return z(r,$,function(i,u){var v;return n!==s&&(v=ee(n,i)),v===void 0&&t&&t!==s&&(v=t(i)),v===void 0&&(v=i),V($,v,u),[!1,$]})},-1),E(o,"$transform_keys!",function a(n){var t=a.$$p||s,r=this;if(a.$$p=null,n==null&&(n=s),y(t)&&y(n))return C(r,"enum_for",["transform_keys!"],function i(){var u=i.$$s==null?this:i.$$s;return u.$size()},{$$s:r});R(r);var $=new Map;return z(r,r,function(i,u){var v;return n!==s&&(v=ee(n,i)),v===void 0&&t&&t!==s&&(v=t(i)),v===void 0?[!1,r]:(ee($,i)||K(r,i),V(r,v,u),V($,v,!0),[!1,r])})},-1),E(o,"$transform_values",function a(){var n=a.$$p||s,t=this;if(a.$$p=null,!N(n))return C(t,"enum_for",["transform_values"],function $(){var i=$.$$s==null?this:$.$$s;return i.$size()},{$$s:t});var r=new Map;return z(t,r,function($,i){return V(r,$,n(i)),[!1,r]})}),E(o,"$transform_values!",function a(){var n=a.$$p||s,t=this;return a.$$p=null,N(n)?(R(t),z(t,t,function(r,$){return V(t,r,n($)),[!1,t]})):C(t,"enum_for",["transform_values!"],function r(){var $=r.$$s==null?this:r.$$s;return $.$size()},{$$s:t})}),E(o,"$values",function(){var n=this;return Array.from(n.values())}),A(o,"each_pair","each"),A(o,"eql?","=="),A(o,"filter","select"),A(o,"filter!","select!"),A(o,"include?","has_key?"),A(o,"indices","indexes"),A(o,"key","index"),A(o,"key?","has_key?"),A(o,"member?","has_key?"),A(o,"size","length"),A(o,"store","[]="),A(o,"to_s","inspect"),A(o,"update","merge!"),A(o,"value?","has_value?"),A(o,"values_at","indexes")}("::",Map,p)};Opal.modules["corelib/number"]=function(e){var q=e.klass,D=e.Opal,K=e.Kernel,z=e.def,ee=e.eqeqeq,V=e.truthy,R=e.rb_gt,Z=e.not,m=e.rb_lt,L=e.alias,ie=e.send2,F=e.find_super,X=e.send,ne=e.rb_plus,W=e.rb_minus,E=e.eqeq,C=e.return_self,P=e.rb_divide,B=e.to_ary,N=e.rb_times,M=e.rb_le,g=e.rb_ge,y=e.return_val,A=e.const_set,w=e.top,p=[],s=e.nil,d=e.$$$;return e.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),w.$require("corelib/numeric"),function(x,h,_){var o=q(x,h,"Number");D.$bridge(Number,o),e.prop(o.$$prototype,"$$is_number",!0),o.$$is_number_class=!0;var Y=new Map;(function(t,r){return z(t,"$allocate",function(){var i=this;return K.$raise(d("TypeError"),"allocator undefined for "+i.$name())}),e.udef(t,"$new"),s})(e.get_singleton_class(o)),z(o,"$coerce",function(r){var $=this;if(r===s)K.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float");else{if(r.$$is_string)return[K.$Float(r),$];if(r["$respond_to?"]("to_f"))return[D["$coerce_to!"](r,d("Float"),"to_f"),$];if(r.$$is_number)return[r,$];K.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float")}}),z(o,"$__id__",function(){var r=this;if(r|r===0)return r*2+1;if(Y.has(r))return Y.get(r);var $=e.uid();return Y.set(r,$),$}),z(o,"$hash",function(){var r=this;return r|r===0?r.$__id__():r.toString().$hash()}),z(o,"$+",function(r){var $=this;return r.$$is_number?$+r:$.$__coerced__("+",r)}),z(o,"$-",function(r){var $=this;return r.$$is_number?$-r:$.$__coerced__("-",r)}),z(o,"$*",function(r){var $=this;return r.$$is_number?$*r:$.$__coerced__("*",r)}),z(o,"$/",function(r){var $=this;return r.$$is_number?$/r:$.$__coerced__("/",r)}),z(o,"$%",function(r){var $=this;if(r.$$is_number){if(r==-1/0)return r;if(r==0)K.$raise(d("ZeroDivisionError"),"divided by 0");else return r<0||$<0?($%r+r)%r:$%r}else return $.$__coerced__("%",r)}),z(o,"$&",function(r){var $=this;return r.$$is_number?$&r:$.$__coerced__("&",r)}),z(o,"$|",function(r){var $=this;return r.$$is_number?$|r:$.$__coerced__("|",r)}),z(o,"$^",function(r){var $=this;return r.$$is_number?$^r:$.$__coerced__("^",r)}),z(o,"$<",function(r){var $=this;return r.$$is_number?$<r:$.$__coerced__("<",r)}),z(o,"$<=",function(r){var $=this;return r.$$is_number?$<=r:$.$__coerced__("<=",r)}),z(o,"$>",function(r){var $=this;return r.$$is_number?$>r:$.$__coerced__(">",r)}),z(o,"$>=",function(r){var $=this;return r.$$is_number?$>=r:$.$__coerced__(">=",r)});var H=function(t,r){return r.$$is_number?isNaN(t)||isNaN(r)?s:t>r?1:t<r?-1:0:t.$__coerced__("<=>",r)};z(o,"$<=>",function(r){var $=this;try{return H($,r)}catch(i){if(e.rescue(i,[d("ArgumentError")]))try{return s}finally{e.pop_exception(i)}else throw i}}),z(o,"$<<",function(r){var $=this;return r=D["$coerce_to!"](r,d("Integer"),"to_int"),r>0?$<<r:$>>-r}),z(o,"$>>",function(r){var $=this;return r=D["$coerce_to!"](r,d("Integer"),"to_int"),r>0?$>>r:$<<-r}),z(o,"$[]",function(r){var $=this;return r=D["$coerce_to!"](r,d("Integer"),"to_int"),r<0?0:r>=32?$<0?1:0:$>>r&1}),z(o,"$+@",function(){var r=this;return+r}),z(o,"$-@",function(){var r=this;return-r}),z(o,"$~",function(){var r=this;return~r}),z(o,"$**",function(r){var $=this;return ee(d("Integer"),r)?Z(d("Integer")["$==="]($))||V(R(r,0))?Math.pow($,r):d("Rational").$new($,1)["$**"](r):V(m($,0))&&(ee(d("Float"),r)||ee(d("Rational"),r))?d("Complex").$new($,0)["$**"](r.$to_f()):V(r.$$is_number!=null)?Math.pow($,r):$.$__coerced__("**",r)}),z(o,"$==",function(r){var $=this;return r.$$is_number?$.valueOf()===r.valueOf():r["$respond_to?"]("==")?r["$=="]($):!1}),L(o,"===","=="),z(o,"$abs",function(){var r=this;return Math.abs(r)}),z(o,"$abs2",function(){var r=this;return Math.abs(r*r)}),z(o,"$allbits?",function(r){var $=this;return r=D["$coerce_to!"](r,d("Integer"),"to_int"),($&r)==r}),z(o,"$anybits?",function(r){var $=this;return r=D["$coerce_to!"](r,d("Integer"),"to_int"),($&r)!==0}),z(o,"$angle",function(){var r=this;return V(r["$nan?"]())?r:r==0?1/r>0?0:Math.PI:r<0?Math.PI:0}),z(o,"$bit_length",function(){var r=this;if(ee(d("Integer"),r)||K.$raise(d("NoMethodError").$new("undefined method `bit_length` for "+r+":Float","bit_length")),r===0||r===-1)return 0;for(var $=0,i=r<0?~r:r;i!=0;)$+=1,i>>>=1;return $}),z(o,"$ceil",function(r){var $=this;r==null&&(r=0);var i=$.$to_f();if(i%1===0&&r>=0)return i;var u=Math.pow(10,r),v=Math.ceil(i*u)/u;return i%1===0&&(v=Math.round(v)),v},-1),z(o,"$chr",function(r){var $=this;return e.enc(String.fromCharCode($),r||"BINARY")},-1),z(o,"$denominator",function t(){var r=t.$$p||s,$=this;return t.$$p=null,V($["$nan?"]())||V($["$infinite?"]())?1:ie($,F($,"denominator",t,!1,!0),"denominator",[],r)}),z(o,"$downto",function t(r){var $=t.$$p||s,i=this;if(t.$$p=null,$===s)return X(i,"enum_for",["downto",r],function v(){var k=v.$$s==null?this:v.$$s;return ee(d("Numeric"),r)||K.$raise(d("ArgumentError"),"comparison of "+k.$class()+" with "+r.$class()+" failed"),V(R(r,k))?0:ne(W(k,r),1)},{$$s:i});r.$$is_number||K.$raise(d("ArgumentError"),"comparison of "+i.$class()+" with "+r.$class()+" failed");for(var u=i;u>=r;u--)$(u);return i}),z(o,"$equal?",function(r){var $=this,i=s;return V(i=$["$=="](r))?i:isNaN($)&&isNaN(r)}),z(o,"$even?",function(){var r=this;return r%2===0}),z(o,"$floor",function(r){var $=this;r==null&&(r=0);var i=$.$to_f();if(i%1===0&&r>=0)return i;var u=Math.pow(10,r),v=Math.floor(i*u)/u;return i%1===0&&(v=Math.round(v)),v},-1),z(o,"$gcd",function(r){var $=this;ee(d("Integer"),r)||K.$raise(d("TypeError"),"not an integer");for(var i=Math.abs($),u=Math.abs(r);i>0;){var v=i;i=u%i,u=v}return u}),z(o,"$gcdlcm",function(r){var $=this;return[$.$gcd(r),$.$lcm(r)]}),z(o,"$integer?",function(){var r=this;return r%1===0}),z(o,"$is_a?",function t(r){var $=t.$$p||s,i=this;return t.$$p=null,E(r,d("Integer"))&&ee(d("Integer"),i)||E(r,d("Integer"))&&ee(d("Integer"),i)||E(r,d("Float"))&&ee(d("Float"),i)?!0:ie(i,F(i,"is_a?",t,!1,!0),"is_a?",[r],$)}),z(o,"$instance_of?",function t(r){var $=t.$$p||s,i=this;return t.$$p=null,E(r,d("Integer"))&&ee(d("Integer"),i)||E(r,d("Integer"))&&ee(d("Integer"),i)||E(r,d("Float"))&&ee(d("Float"),i)?!0:ie(i,F(i,"instance_of?",t,!1,!0),"instance_of?",[r],$)}),z(o,"$lcm",function(r){var $=this;return ee(d("Integer"),r)||K.$raise(d("TypeError"),"not an integer"),$==0||r==0?0:Math.abs($*r/$.$gcd(r))}),z(o,"$next",function(){var r=this;return r+1}),z(o,"$nobits?",function(r){var $=this;return r=D["$coerce_to!"](r,d("Integer"),"to_int"),($&r)==0}),z(o,"$nonzero?",function(){var r=this;return r==0?s:r}),z(o,"$numerator",function t(){var r=t.$$p||s,$=this;return t.$$p=null,V($["$nan?"]())||V($["$infinite?"]())?$:ie($,F($,"numerator",t,!1,!0),"numerator",[],r)}),z(o,"$odd?",function(){var r=this;return r%2!==0}),z(o,"$ord",C),z(o,"$pow",function(r,$){var i=this;return i==0&&K.$raise(d("ZeroDivisionError"),"divided by 0"),$===void 0?i["$**"](r):(d("Integer")["$==="](r)||K.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),r<0&&K.$raise(d("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),d("Integer")["$==="]($)||K.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),$===0&&K.$raise(d("ZeroDivisionError"),"divided by 0"),i["$**"](r)["$%"]($))},-2),z(o,"$pred",function(){var r=this;return r-1}),z(o,"$quo",function t(r){var $=t.$$p||s,i=this;return t.$$p=null,ee(d("Integer"),i)?ie(i,F(i,"quo",t,!1,!0),"quo",[r],$):P(i,r)}),z(o,"$rationalize",function(r){var $,i,u=this,v=s,k=s;return arguments.length>1&&K.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),ee(d("Integer"),u)?d("Rational").$new(u,1):V(u["$infinite?"]())?K.$raise(d("FloatDomainError"),"Infinity"):V(u["$nan?"]())?K.$raise(d("FloatDomainError"),"NaN"):V(r==null)?(i=d("Math").$frexp(u),$=B(i),v=$[0]==null?s:$[0],k=$[1]==null?s:$[1],v=d("Math").$ldexp(v,d(d("Float"),"MANT_DIG")).$to_i(),k=W(k,d(d("Float"),"MANT_DIG")),d("Rational").$new(N(2,v),1["$<<"](W(1,k))).$rationalize(d("Rational").$new(1,1["$<<"](W(1,k))))):u.$to_r().$rationalize(r)},-1),z(o,"$remainder",function(r){var $=this;return W($,N(r,P($,r).$truncate()))}),z(o,"$round",function(r){var $,i,u=this,v=s;if(ee(d("Integer"),u)){if(V(r==null)||(ee(d("Float"),r)&&V(r["$infinite?"]())&&K.$raise(d("RangeError"),"Infinity"),r=D["$coerce_to!"](r,d("Integer"),"to_int"),V(m(r,d(d("Integer"),"MIN")))&&K.$raise(d("RangeError"),"out of bounds"),V(r>=0)))return u;if(r=r["$-@"](),.415241*r-.125>u.$size())return 0;var k=Math.pow(10,r),T=Math.floor((Math.abs(u)+k/2)/k)*k;return u<0?-T:T}else{if(V(u["$nan?"]())&&V(r==null)&&K.$raise(d("FloatDomainError"),"NaN"),r=D["$coerce_to!"](r||0,d("Integer"),"to_int"),V(M(r,0)))V(u["$nan?"]())?K.$raise(d("RangeError"),"NaN"):V(u["$infinite?"]())&&K.$raise(d("FloatDomainError"),"Infinity");else{if(E(r,0))return Math.round(u);if(V(u["$nan?"]())||V(u["$infinite?"]()))return u}return i=d("Math").$frexp(u),$=B(i),$[0]==null||$[0],v=$[1]==null?s:$[1],V(g(r,W(ne(d(d("Float"),"DIG"),2),V(R(v,0))?P(v,4):W(P(v,3),1))))?u:V(m(r,(V(R(v,0))?ne(P(v,3),1):P(v,4))["$-@"]()))?0:Math.round(u*Math.pow(10,r))/Math.pow(10,r)}},-1),z(o,"$times",function t(){var r=t.$$p||s,$=this;if(t.$$p=null,!V(r))return X($,"enum_for",["times"],function u(){var v=u.$$s==null?this:u.$$s;return v},{$$s:$});for(var i=0;i<$;i++)r(i);return $}),z(o,"$to_f",C),z(o,"$to_i",function(){var r=this;return r<0?Math.ceil(r):Math.floor(r)}),z(o,"$to_r",function(){var r,$,i=this,u=s,v=s;return ee(d("Integer"),i)?d("Rational").$new(i,1):($=d("Math").$frexp(i),r=B($),u=r[0]==null?s:r[0],v=r[1]==null?s:r[1],u=d("Math").$ldexp(u,d(d("Float"),"MANT_DIG")).$to_i(),v=W(v,d(d("Float"),"MANT_DIG")),N(u,d(d("Float"),"RADIX")["$**"](v)).$to_r())}),z(o,"$to_s",function(r){var $=this;return r==null&&(r=10),r=D["$coerce_to!"](r,d("Integer"),"to_int"),(V(m(r,2))||V(R(r,36)))&&K.$raise(d("ArgumentError"),"invalid radix "+r),E($,0)&&V(1/$===-1/0)?"-0.0":$.toString(r)},-1),z(o,"$truncate",function(r){var $=this;r==null&&(r=0);var i=$.$to_f();if(i%1===0&&r>=0)return i;var u=Math.pow(10,r),v=parseInt(i*u,10)/u;return i%1===0&&(v=Math.round(v)),v},-1),z(o,"$digits",function(r){var $=this;r==null&&(r=10),V(m($,0))&&K.$raise(d(d("Math"),"DomainError"),"out of domain"),r=D["$coerce_to!"](r,d("Integer"),"to_int"),V(m(r,2))&&K.$raise(d("ArgumentError"),"invalid radix "+r),$!=parseInt($)&&K.$raise(d("NoMethodError"),"undefined method `digits' for "+$.$inspect());var i=$,u=[];if($==0)return[0];for(;i!=0;)u.push(i%r),i=parseInt(i/r,10);return u},-1),z(o,"$divmod",function t(r){var $=t.$$p||s,i=this;return t.$$p=null,V(i["$nan?"]())||V(r["$nan?"]())?K.$raise(d("FloatDomainError"),"NaN"):V(i["$infinite?"]())?K.$raise(d("FloatDomainError"),"Infinity"):ie(i,F(i,"divmod",t,!1,!0),"divmod",[r],$)}),z(o,"$upto",function t(r){var $=t.$$p||s,i=this;if(t.$$p=null,$===s)return X(i,"enum_for",["upto",r],function v(){var k=v.$$s==null?this:v.$$s;return ee(d("Numeric"),r)||K.$raise(d("ArgumentError"),"comparison of "+k.$class()+" with "+r.$class()+" failed"),V(m(r,k))?0:ne(W(r,k),1)},{$$s:i});r.$$is_number||K.$raise(d("ArgumentError"),"comparison of "+i.$class()+" with "+r.$class()+" failed");for(var u=i;u<=r;u++)$(u);return i}),z(o,"$zero?",function(){var r=this;return r==0}),z(o,"$size",y(4)),z(o,"$nan?",function(){var r=this;return isNaN(r)}),z(o,"$finite?",function(){var r=this;return r!=1/0&&r!=-1/0&&!isNaN(r)}),z(o,"$infinite?",function(){var r=this;return r==1/0?1:r==-1/0?-1:s}),z(o,"$positive?",function(){var r=this;return r!=0&&(r==1/0||1/r>0)}),z(o,"$negative?",function(){var r=this;return r==-1/0||1/r<0});function c(t){var r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}function l(t){return new DataView(t.buffer).getFloat64(0,!0)}function a(t){for(var r=c(t),$=0;$<r.length;$++)if(r[$]===255)r[$]=0;else{r[$]++;break}return l(r)}function n(t){for(var r=c(t),$=0;$<r.length;$++)if(r[$]===0)r[$]=255;else{r[$]--;break}return l(r)}return z(o,"$next_float",function(){var r=this;return E(r,d(d("Float"),"INFINITY"))?d(d("Float"),"INFINITY"):V(r["$nan?"]())?d(d("Float"),"NAN"):V(g(r,0))?a(Math.abs(r)):n(r)}),z(o,"$prev_float",function(){var r=this;return E(r,d(d("Float"),"INFINITY")["$-@"]())?d(d("Float"),"INFINITY")["$-@"]():V(r["$nan?"]())?d(d("Float"),"NAN"):V(R(r,0))?n(r):-a(Math.abs(r))}),L(o,"arg","angle"),L(o,"eql?","=="),L(o,"fdiv","/"),L(o,"inspect","to_s"),L(o,"kind_of?","is_a?"),L(o,"magnitude","abs"),L(o,"modulo","%"),L(o,"object_id","__id__"),L(o,"phase","angle"),L(o,"succ","next"),L(o,"to_int","to_i")}("::",d("Numeric")),A("::","Fixnum",d("Number")),function(x,h,_){var o=q(x,h,"Integer"),Y=[o].concat(_);return o.$$is_number_class=!0,o.$$is_integer_class=!0,function(H,c){var l=[H].concat(c),a=e.$r(l);return z(H,"$allocate",function(){var t=this;return K.$raise(d("TypeError"),"allocator undefined for "+t.$name())}),e.udef(H,"$new"),z(H,"$sqrt",function(t){return t=D["$coerce_to!"](t,d("Integer"),"to_int"),t<0&&K.$raise(d(d("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(t),10)}),z(H,"$try_convert",function(t){var r=this;return a("Opal")["$coerce_to?"](t,r,"to_int")})}(e.get_singleton_class(o),Y),A(o,"MAX",Math.pow(2,30)-1),A(o,"MIN",-Math.pow(2,30))}("::",d("Numeric"),p),function(x,h,_){var o=q(x,h,"Float");return o.$$is_number_class=!0,function(Y,H){return z(Y,"$allocate",function(){var l=this;return K.$raise(d("TypeError"),"allocator undefined for "+l.$name())}),e.udef(Y,"$new"),z(Y,"$===",function(l){return!!l.$$is_number})}(e.get_singleton_class(o)),A(o,"INFINITY",1/0),A(o,"MAX",Number.MAX_VALUE),A(o,"MIN",Number.MIN_VALUE),A(o,"NAN",NaN),A(o,"DIG",15),A(o,"MANT_DIG",53),A(o,"RADIX",2),A(o,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",d("Numeric"))};Opal.modules["corelib/range"]=function(e){var q=e.klass,D=e.truthy,K=e.Kernel,z=e.def,ee=e.not,V=e.send2,R=e.find_super,Z=e.lambda,m=e.send,L=e.rb_ge,ie=e.rb_gt,F=e.eqeq,X=e.rb_le,ne=e.rb_lt,W=e.eqeqeq,E=e.return_ivar,C=e.rb_minus,P=e.Opal,B=e.rb_divide,N=e.rb_plus,M=e.rb_times,g=e.thrower,y=e.alias,A=e.top,w=[],p=e.nil,s=e.$$$;return e.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),A.$require("corelib/enumerable"),function(d,x,h){var _=q(d,x,"Range"),o=[_].concat(h),Y=e.$r(o),H=_.$$prototype;H.begin=H.end=H.excl=p,_.$include(s("Enumerable")),_.$$prototype.$$is_range=!0,_.$attr_reader("begin","end"),z(_,"$initialize",function(a,n,t){var r=this;return t==null&&(t=!1),D(r.begin)&&K.$raise(s("NameError"),"'initialize' called twice"),D(a["$<=>"](n))||D(a["$nil?"]())||D(n["$nil?"]())||K.$raise(s("ArgumentError"),"bad value for range"),r.begin=a,r.end=n,r.excl=t},-3),z(_,"$===",function(a){var n=this;return D(a.$$is_range)?!1:n["$cover?"](a)});function c(l){return l.begin===p||l.end===p||l.begin===-1/0||l.end===1/0||l.begin===1/0||l.end===-1/0}return z(_,"$count",function l(){var a=l.$$p||p,n=this;return l.$$p=null,ee(a!==p)&&D(c(n))?s(s("Float"),"INFINITY"):V(n,R(n,"count",l,!1,!0),"count",[],a)}),z(_,"$to_a",function l(){var a=l.$$p||p,n=this;return l.$$p=null,D(c(n))&&K.$raise(s("TypeError"),"cannot convert endless range to an array"),V(n,R(n,"to_a",l,!1,!0),"to_a",[],a)}),z(_,"$cover?",function(a){var n=this,t=p,r=p,$=p,i=p,u=p,v=p,k=p,T=p;return t=Z(function(G,O){var ae=p;return G==null&&(G=p),O==null&&(O=p),D(ae=G["$<=>"](O))?ae:1}),D(a.$$is_range)?(r=a.$begin(),$=a.$end(),i=a["$exclude_end?"](),D(n.begin)&&D(r["$nil?"]())||D(n.end)&&D($["$nil?"]())||D(r)&&D($)&&D(m(t.$call(r,$),"then",[],function(G){return G==null&&(G=p),D(i)?L(G,0):ie(G,0)}))||D(r)&&ee(n["$cover?"](r))?!1:(u=t.$call(n.end,$),F(n.excl,i)?L(u,0):D(n.excl)?ie(u,0):D(L(u,0))?!0:(v=a.$max(),D(k=v["$nil?"]()["$!"]())?X(t.$call(v,n.end),0):k))):D(n.begin)&&D(ie(t.$call(n.begin,a),0))?!1:D(n.end["$nil?"]())?!0:(T=t.$call(a,n.end),D(n.excl)?ne(T,0):X(T,0))}),z(_,"$each",function l(){var a=l.$$p||p,n=this,t=p,r=p,$=p;if(l.$$p=null,a===p)return m(n,"enum_for",["each"],function v(){var k=v.$$s==null?this:v.$$s;return k.$size()},{$$s:n});var i,u;if(n.begin.$$is_number&&n.end.$$is_number){for((n.begin%1!==0||n.end%1!==0)&&K.$raise(s("TypeError"),"can't iterate from Float"),i=n.begin,u=n.end+(D(n.excl)?0:1);i<u;i++)a(i);return n}if(n.begin.$$is_string&&n.end.$$is_string)return m(n.begin,"upto",[n.end,n.excl],a.$to_proc()),n;for(t=n.begin,r=n.end,D(t["$respond_to?"]("succ"))||K.$raise(s("TypeError"),"can't iterate from "+t.$class());D(D($=n.end["$nil?"]())?$:ne(t["$<=>"](r),0));)e.yield1(a,t),t=t.$succ();return ee(n.excl)&&F(t,r)&&e.yield1(a,t),n}),z(_,"$eql?",function(a){var n=this,t=p,r=p;return W(s("Range"),a)?D(t=D(r=n.excl["$==="](a["$exclude_end?"]()))?n.begin["$eql?"](a.$begin()):r)?n.end["$eql?"](a.$end()):t:!1}),z(_,"$exclude_end?",E("excl")),z(_,"$first",function l(a){var n=l.$$p||p,t=this;return l.$$p=null,D(t.begin["$nil?"]())&&K.$raise(s("RangeError"),"cannot get the minimum of beginless range"),D(a==null)?t.begin:V(t,R(t,"first",l,!1,!0),"first",[a],n)},-1),z(_,"$include?",function l(a){var n=l.$$p||p,t=this,r=p,$=p;if(l.$$p=null,D(t.begin.$$is_number||t.end.$$is_number)||D(t.begin["$is_a?"](s("Time")))||D(t.end["$is_a?"](s("Time")))||D(s("Integer").$try_convert(t.begin))||D(s("Integer").$try_convert(t.end)))return t["$cover?"](a);if(D(t.begin.$$is_string||t.end.$$is_string)){if(D(t.begin.$$is_string&&t.end.$$is_string))return m(t.begin.$upto(t.end,t.excl),"any?",[],function(u){return u==null&&(u=p),u["$=="](a)});if(D(t.begin["$nil?"]()))return r=a["$<=>"](t.end),D($=r["$nil?"]()["$!"]())?D(t.excl)?ne(r,0):X(r,0):$;if(D(t.end["$nil?"]()))return r=t.begin["$<=>"](a),D($=r["$nil?"]()["$!"]())?X(r,0):$}return V(t,R(t,"include?",l,!1,!0),"include?",[a],n)}),z(_,"$last",function(a){var n=this;return D(n.end["$nil?"]())&&K.$raise(s("RangeError"),"cannot get the maximum of endless range"),D(a==null)?n.end:n.$to_a().$last(a)},-1),z(_,"$max",function l(){var a=l.$$p||p,n=this;return l.$$p=null,D(n.end["$nil?"]())?K.$raise(s("RangeError"),"cannot get the maximum of endless range"):a!==p?V(n,R(n,"max",l,!1,!0),"max",[],a):ee(n.begin["$nil?"]())&&(D(ie(n.begin,n.end))||D(n.excl)&&F(n.begin,n.end))?p:n.excl?n.end-1:n.end}),z(_,"$min",function l(){var a=l.$$p||p,n=this;return l.$$p=null,D(n.begin["$nil?"]())?K.$raise(s("RangeError"),"cannot get the minimum of beginless range"):a!==p?V(n,R(n,"min",l,!1,!0),"min",[],a):ee(n.end["$nil?"]())&&(D(ie(n.begin,n.end))||D(n.excl)&&F(n.begin,n.end))?p:n.begin}),z(_,"$size",function(){var a=this.begin,n=this.end;if(s("Numeric")["$==="](a)){if(s("Numeric")["$==="](n)){var t=C(n,a);return t<0?0:(this.excl||(t+=1),s("Float")["$==="](a)||s("Float")["$==="](n)?Math.floor(t):t)}else if(n===p)return 1/0}else if(a===p&&s("Numeric")["$==="](n))return 1/0;return p}),z(_,"$step",function l(a){var n=l.$$p||p,t=this,r=p,$=p;l.$$p=null;function i(){a==null?a=1:a.$$is_number||(a=P["$coerce_to!"](a,s("Integer"),"to_int")),a<0?K.$raise(s("ArgumentError"),"step can't be negative"):a===0&&K.$raise(s("ArgumentError"),"step can't be 0")}function u(){if(!t.begin["$respond_to?"]("succ")||t.begin.$$is_string&&t.end.$$is_string)return p;if(a%1===0)return B(t.$size(),a).$ceil();var v=t.begin,k=t.end,T=Math.abs,S=Math.floor,G=(T(v)+T(k)+T(k-v))/T(a)*s(s("Float"),"EPSILON"),O;return G>.5&&(G=.5),t.excl?(O=S((k-v)/a-G),O*a+v<k&&O++):O=S((k-v)/a+G)+1,O}return n===p?(D(t.begin["$is_a?"](Y("Numeric")))||D(t.begin["$nil?"]()))&&(D(t.end["$is_a?"](Y("Numeric")))||D(t.end["$nil?"]()))&&ee(D(r=t.begin["$nil?"]())?t.end["$nil?"]():r)?s(s("Enumerator"),"ArithmeticSequence").$new(t,a,"step"):m(t,"enum_for",["step",a],function(){return i(),u()}):(i(),D(t.begin.$$is_number&&t.end.$$is_number)?($=0,function(){try{var v=g("break");return m(t,"loop",[],function k(){var T=k.$$s==null?this:k.$$s,S=p;return T.begin==null&&(T.begin=p),T.excl==null&&(T.excl=p),T.end==null&&(T.end=p),S=N(T.begin,M($,a)),D(T.excl)?D(L(S,T.end))&&v.$throw(p,k.$$is_lambda):D(ie(S,T.end))&&v.$throw(p,k.$$is_lambda),e.yield1(n,S),$=N($,1)},{$$s:t})}catch(k){if(k===v)return k.$v;throw k}finally{v.is_orphan=!0}}()):(t.begin.$$is_string&&t.end.$$is_string&&a%1!==0&&K.$raise(s("TypeError"),"no implicit conversion to float from string"),m(t,"each_with_index",[],function(k,T){return k==null&&(k=p),T==null&&(T=p),F(T["$%"](a),0)?e.yield1(n,k):p})),t)},-1),z(_,"$%",function(a){var n=this;return D(n.begin["$is_a?"](Y("Numeric")))&&D(n.end["$is_a?"](Y("Numeric")))?s(s("Enumerator"),"ArithmeticSequence").$new(n,a,"%"):n.$step(a)}),z(_,"$bsearch",function l(){var a=l.$$p||p,n=this;return l.$$p=null,a===p?n.$enum_for("bsearch"):(D(c(n)&&(n.begin.$$is_number||n.end.$$is_number))&&K.$raise(s("NotImplementedError"),"Can't #bsearch an infinite range"),D(n.begin.$$is_number&&n.end.$$is_number)||K.$raise(s("TypeError"),"can't do binary search for "+n.begin.$class()),m(n.$to_a(),"bsearch",[],a.$to_proc()))}),z(_,"$to_s",function(){var a=this,n=p;return""+(D(n=a.begin)?n:"")+(D(a.excl)?"...":"..")+(D(n=a.end)?n:"")}),z(_,"$inspect",function(){var a=this,n=p;return""+(D(n=a.begin)?a.begin.$inspect():n)+(D(a.excl)?"...":"..")+(D(n=a.end)?a.end.$inspect():n)}),z(_,"$marshal_load",function(a){var n=this;return n.begin=a["$[]"]("begin"),n.end=a["$[]"]("end"),n.excl=a["$[]"]("excl")}),z(_,"$hash",function(){var a=this;return[s("Range"),a.begin,a.end,a.excl].$hash()}),y(_,"==","eql?"),y(_,"member?","include?")}("::",null,w)};Opal.modules["corelib/proc"]=function(e){var q=e.slice,D=e.each_ivar,K=e.klass,z=e.truthy,ee=e.Kernel,V=e.defs,R=e.def,Z=e.send,m=e.to_a,L=e.return_self,ie=e.ensure_kwargs,F=e.hash_get,X=e.Opal,ne=e.alias,W=e.nil,E=e.$$$;return e.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(C,P){var B=K(C,P,"Proc");e.prop(B.$$prototype,"$$is_proc",!0),e.prop(B.$$prototype,"$$is_lambda",!1),V(B,"$new",function g(){var y=g.$$p||W;return g.$$p=null,z(y)||ee.$raise(E("ArgumentError"),"tried to create a Proc object without a block"),y});function N(g,y){if(g.$$ret)try{return g.apply(null,y)}catch(A){if(A===g.$$ret)return A.$v;throw A}else return g.apply(null,y)}function M(g,y){if(g.$$brk)try{return e.yieldX(g,y)}catch(A){if(A===g.$$brk)return A.$v;throw A}else return e.yieldX(g,y)}return R(B,"$call",function g(y){var A=g.$$p||W,w,p,s=this;return g.$$p=null,w=q(arguments),p=w,A!==W&&(s.$$p=A),s.$$is_lambda?N(s,p):M(s,p)},-1),R(B,"$>>",function g(y){g.$$p;var A=this;return g.$$p=null,Z(ee,"proc",[],function w(p){var s=w.$$p||W,d,x,h=w.$$s==null?this:w.$$s,_=W;return w.$$p=null,d=q(arguments),x=d,_=Z(h,"call",m(x),s.$to_proc()),y.$call(_)},{$$arity:-1,$$s:A})}),R(B,"$<<",function g(y){g.$$p;var A=this;return g.$$p=null,Z(ee,"proc",[],function w(p){var s=w.$$p||W,d,x,h=w.$$s==null?this:w.$$s,_=W;return w.$$p=null,d=q(arguments),x=d,_=Z(y,"call",m(x),s.$to_proc()),h.$call(_)},{$$arity:-1,$$s:A})}),R(B,"$to_proc",L),R(B,"$lambda?",function(){var y=this;return!!y.$$is_lambda}),R(B,"$arity",function(){var y=this;return y.$$is_curried?-1:y.$$arity!=null?y.$$arity:y.length}),R(B,"$source_location",function(){var y=this,A=W;return y.$$is_curried?W:z(A=y.$$source_location)?A:W}),R(B,"$binding",function(){var y=this;return y.$$is_curried&&ee.$raise(E("ArgumentError"),"Can't create Binding"),z(E("::","Binding","skip_raise")?"constant":W)?E("Binding").$new(W,[],y.$$s,y.$source_location()):W}),R(B,"$parameters",function(y){var A,w=this;if(y=ie(y),A=F(y,"lambda"),w.$$is_curried)return[["rest"]];if(w.$$parameters){if(A??w.$$is_lambda)return w.$$parameters;var p=[],s,d;for(s=0,d=w.$$parameters.length;s<d;s++){var x=w.$$parameters[s];x[0]==="req"&&(x=["opt",x[1]]),p.push(x)}return p}else return[]},-1),R(B,"$curry",function(y){var A=this;y===void 0?y=A.length:(y=X["$coerce_to!"](y,E("Integer"),"to_int"),A.$$is_lambda&&y!==A.length&&ee.$raise(E("ArgumentError"),"wrong number of arguments ("+y+" for "+A.length+")"));function w(){var p=q(arguments),s=p.length,d;return s>y&&A.$$is_lambda&&!A.$$is_curried&&ee.$raise(E("ArgumentError"),"wrong number of arguments ("+s+" for "+y+")"),s>=y?A.$call.apply(A,p):(d=function(){return w.apply(null,p.concat(q(arguments)))},d.$$is_lambda=A.$$is_lambda,d.$$is_curried=!0,d)}return w.$$is_lambda=A.$$is_lambda,w.$$is_curried=!0,w},-1),R(B,"$dup",function(){var y=this,A=y.$$original_proc||y,w=function(){return A.apply(this,arguments)};return D(y,function(p){w[p]=y[p]}),w}),ne(B,"===","call"),ne(B,"clone","dup"),ne(B,"yield","call"),ne(B,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(e){var q=e.klass,D=e.def,K=e.truthy,z=e.slice,ee=e.alias,V=e.Kernel,R=e.send,Z=e.to_a,m=e.nil,L=e.$$$;return e.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function(ie,F){var X=q(ie,F,"Method"),ne=X.$$prototype;return ne.method=ne.receiver=ne.owner=ne.name=m,X.$attr_reader("owner","receiver","name"),D(X,"$initialize",function(E,C,P,B){var N=this;return N.receiver=E,N.owner=C,N.name=B,N.method=P}),D(X,"$arity",function(){var E=this;return E.method.$arity()}),D(X,"$parameters",function(){var E=this;return E.method.$$parameters}),D(X,"$source_location",function(){var E=this,C=m;return K(C=E.method.$$source_location)?C:["(eval)",0]}),D(X,"$comments",function(){var E=this,C=m;return K(C=E.method.$$comments)?C:[]}),D(X,"$call",function W(E){var C=W.$$p||m,P,B,N=this;return W.$$p=null,P=z(arguments),B=P,N.method.$$p=C,N.method.apply(N.receiver,B)},-1),D(X,"$curry",function(E){var C=this;return C.method.$curry(E)},-1),D(X,"$>>",function(E){var C=this;return C.method["$>>"](E)}),D(X,"$<<",function(E){var C=this;return C.method["$<<"](E)}),D(X,"$unbind",function(){var E=this;return L("UnboundMethod").$new(E.receiver.$class(),E.owner,E.method,E.name)}),D(X,"$to_proc",function(){var E=this,C=E.$call.bind(E);return C.$$unbound=E.method,C.$$is_lambda=!0,C.$$arity=E.method.$$arity==null?E.method.length:E.method.$$arity,C.$$parameters=E.method.$$parameters,C}),D(X,"$inspect",function(){var E=this;return"#<"+E.$class()+": "+E.receiver.$class()+"#"+E.name+" (defined in "+E.owner+" in "+E.$source_location().$join(":")+")>"}),ee(X,"[]","call"),ee(X,"===","call")}("::",null),function(ie,F){var X=q(ie,F,"UnboundMethod"),ne=X.$$prototype;return ne.method=ne.owner=ne.name=ne.source=m,X.$attr_reader("source","owner","name"),D(X,"$initialize",function(E,C,P,B){var N=this;return N.source=E,N.owner=C,N.method=P,N.name=B,N.$$method=P}),D(X,"$arity",function(){var E=this;return E.method.$arity()}),D(X,"$parameters",function(){var E=this;return E.method.$$parameters}),D(X,"$source_location",function(){var E=this,C=m;return K(C=E.method.$$source_location)?C:["(eval)",0]}),D(X,"$comments",function(){var E=this,C=m;return K(C=E.method.$$comments)?C:[]}),D(X,"$bind",function(E){var C=this;if(C.owner.$$is_module||e.is_a(E,C.owner))return L("Method").$new(E,C.owner,C.method,C.name);V.$raise(L("TypeError"),"can't bind singleton method to a different class (expected "+E+".kind_of?("+C.owner+" to be true)")}),D(X,"$bind_call",function W(E,C){var P=W.$$p||m,B,N,M=this;return W.$$p=null,B=z(arguments,1),N=B,R(M.$bind(E),"call",Z(N),P.$to_proc())},-2),D(X,"$inspect",function(){var E=this;return"#<"+E.$class()+": "+E.source+"#"+E.name+" (defined in "+E.owner+" in "+E.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(e){var q=e.gvars,D=e.const_set,K=e.Object,z=e.nil;return e.add_stubs("new"),q["&"]=q["~"]=q["`"]=q["'"]=z,q.LOADED_FEATURES=q['"']=e.loaded_features,q.LOAD_PATH=q[":"]=[],q["/"]=`
`,q[","]=z,D("::","ARGV",[]),D("::","ARGF",K.$new()),D("::","ENV",new Map),q.VERBOSE=!1,q.DEBUG=!1,q.SAFE=0};Opal.modules["corelib/io"]=function(e){var q=e.klass,D=e.const_set,K=e.not,z=e.truthy,ee=e.def,V=e.return_ivar,R=e.return_val,Z=e.slice,m=e.Kernel,L=e.gvars,ie=e.send,F=e.to_a,X=e.rb_plus,ne=e.neqeq,W=e.range,E=e.eqeq,C=e.to_ary,P=e.rb_gt,B=e.assign_ivar_val,N=e.alias,M,g=e.nil,y=e.$$$;e.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(w,p){var s=q(w,p,"IO"),d=s.$$prototype;return d.read_buffer=d.closed=g,D(s,"SEEK_SET",0),D(s,"SEEK_CUR",1),D(s,"SEEK_END",2),D(s,"SEEK_DATA",3),D(s,"SEEK_HOLE",4),D(s,"READABLE",1),D(s,"WRITABLE",4),s.$attr_reader("eof"),s.$attr_accessor("read_proc","sync","tty","write_proc"),ee(s,"$initialize",function(h,_){var o=this;return _==null&&(_="r"),o.fd=h,o.flags=_,o.eof=!1,z(_["$include?"]("r"))&&K(_["$match?"](/[wa+]/))?o.closed="write":z(_["$match?"](/[wa]/))&&K(_["$match?"](/[r+]/))?o.closed="read":g},-2),ee(s,"$fileno",V("fd")),ee(s,"$tty?",function(){var h=this;return h.tty==!0}),ee(s,"$write",function(h){var _=this;return _.write_proc(h),h.$size()}),ee(s,"$flush",R(g)),ee(s,"$<<",function(h){var _=this;return _.$write(h),_}),ee(s,"$print",function(h){var _,o,Y=this;L[","]==null&&(L[","]=g),_=Z(arguments),o=_;for(var H=0,c=o.length;H<c;H++)o[H]=m.$String(o[H]);return Y.$write(o.join(L[","])),g},-1),ee(s,"$puts",function(h){var _,o,Y=this;_=Z(arguments),o=_;var H;if(o.length===0)return Y.$write(`
`),g;for(var c=0,l=o.length;c<l;c++)if(o[c].$$is_array){var a=o[c].$flatten();a.length>0&&ie(Y,"puts",F(a))}else o[c].$$is_string?H=o[c].valueOf():H=m.$String(o[c]),H.endsWith(`
`)||(H+=`
`),Y.$write(H);return g},-1),ee(s,"$getc",function(){var h=this,_=g,o=g,Y=g;h.read_buffer=z(_=h.read_buffer)?_:"",o="";do if(h.read_buffer=X(h.read_buffer,o),ne(h.read_buffer,""))return Y=h.read_buffer["$[]"](0),h.read_buffer=h.read_buffer["$[]"](W(1,-1,!1)),Y;while(z(o=h.$sysread_noraise(1)));return g}),ee(s,"$getbyte",function(){var h,_=this;return h=_.$getc(),h===g||h==null?g:h.$ord()}),ee(s,"$readbyte",function(){var h=this;return h.$readchar().$ord()}),ee(s,"$readchar",function(){var h=this,_=g;return z(_=h.$getc())?_:m.$raise(y("EOFError"),"end of file reached")}),ee(s,"$readline",function(h){var _,o,Y=this,H=g;return _=Z(arguments),o=_,z(H=ie(Y,"gets",F(o)))?H:m.$raise(y("EOFError"),"end of file reached")},-1),ee(s,"$gets",function(h,_,o){var Y,H,c=this,l=g,a=g,n=g,t=g,r=g,$=g;L["/"]==null&&(L["/"]=g),h==null&&(h=!1),_==null&&(_=g),o==null&&(o=new Map),z(h.$$is_number)&&K(_)&&(Y=[!1,h,_],h=Y[0],_=Y[1],o=Y[2]),z(h.$$is_hash)&&K(_)&&E(o,new Map)?(Y=[!1,g,h],h=Y[0],_=Y[1],o=Y[2]):z(_.$$is_hash)&&E(o,new Map)&&(Y=[h,g,_],h=Y[0],_=Y[1],o=Y[2]),l=h,E(h,!1)&&(h=L["/"]),E(h,"")&&(h=/\r?\n\r?\n/),h=z(a=h)?a:"",E(l,"")||(h=h.$to_str()),n=E(l,"")?2:h.$length(),E(h," ")&&(h=/ /),c.read_buffer=z(a=c.read_buffer)?a:"",t="",r=g;do if(c.read_buffer=X(c.read_buffer,t),ne(h,"")&&z(z(h.$$is_regexp)?c.read_buffer["$match?"](h):c.read_buffer["$include?"](h))){$=c.read_buffer,H=c.read_buffer.$split(h,2),Y=C(H),r=Y[0]==null?g:Y[0],c.read_buffer=Y[1]==null?g:Y[1],ne(r,$)&&(r=X(r,$["$[]"](r.$length(),n)));break}while(z(t=c.$sysread_noraise(E(h,"")?65536:1)));return z(r)||(Y=[z(a=c.read_buffer)?a:"",""],r=Y[0],c.read_buffer=Y[1],E(r,"")&&(r=g)),z(r)&&(z(_)&&(r=r["$[]"](e.Range.$new(0,_,!0)),c.read_buffer=X(r["$[]"](e.Range.$new(_,-1,!1)),c.read_buffer)),z(o["$[]"]("chomp"))&&(r=r.$sub(/\r?\n$/,"")),E(l,"")&&(r=r.$sub(/^[\r\n]+/,""))),E(l,!1)&&(L._=r),r},-1),ee(s,"$sysread",function(h){var _=this,o=g;return z(o=_.read_proc(h))?o:(_.eof=!0,m.$raise(y("EOFError"),"end of file reached"))}),ee(s,"$sysread_noraise",function(h){var _=this;try{return _.$sysread(h)}catch(o){if(e.rescue(o,[y("EOFError")]))try{return g}finally{e.pop_exception(o)}else throw o}}),ee(s,"$readpartial",function(h){var _,o=this,Y=g,H=g,c=g;return o.read_buffer=z(Y=o.read_buffer)?Y:"",H=o.$sysread(h),_=[X(o.read_buffer,z(Y=H)?Y:""),""],c=_[0],o.read_buffer=_[1],E(c,"")&&(c=g),c}),ee(s,"$read",function(h){var _,o=this,Y=g,H=g,c=g;h==null&&(h=g),o.read_buffer=z(Y=o.read_buffer)?Y:"",H="",c=g;do if(o.read_buffer=X(o.read_buffer,H),z(h)&&z(P(o.read_buffer.$length(),h)))return _=[o.read_buffer["$[]"](e.Range.$new(0,h,!0)),o.read_buffer["$[]"](e.Range.$new(h,-1,!1))],c=_[0],o.read_buffer=_[1],c;while(z(H=o.$sysread_noraise(z(Y=h)?Y:65536)));return _=[o.read_buffer,""],c=_[0],o.read_buffer=_[1],c},-1),ee(s,"$readlines",function(h){var _=this;return L["/"]==null&&(L["/"]=g),h==null&&(h=L["/"]),_.$each_line(h).$to_a()},-1),ee(s,"$each",function x(h,_){var o=x.$$p||g,Y,H,c,l=this,a=g;if(L["/"]==null&&(L["/"]=g),x.$$p=null,Y=Z(arguments),Y.length>0&&(H=Y.shift()),H==null&&(H=L["/"]),c=Y,o===g)return ie(l,"enum_for",["each",H].concat(F(c)));for(;z(a=ie(l,"gets",[H].concat(F(c))));)e.yield1(o,a);return l},-1),ee(s,"$each_byte",function x(){var h=x.$$p||g,_=this,o=g;if(x.$$p=null,h===g)return _.$enum_for("each_byte");for(;z(o=_.$getbyte());)e.yield1(h,o);return _}),ee(s,"$each_char",function x(){var h=x.$$p||g,_=this,o=g;if(x.$$p=null,h===g)return _.$enum_for("each_char");for(;z(o=_.$getc());)e.yield1(h,o);return _}),ee(s,"$close",B("closed","both")),ee(s,"$close_read",function(){var h=this;return E(h.closed,"write")?h.closed="both":h.closed="read"}),ee(s,"$close_write",function(){var h=this;return E(h.closed,"read")?h.closed="both":h.closed="write"}),ee(s,"$closed?",function(){var h=this;return h.closed["$=="]("both")}),ee(s,"$closed_read?",function(){var h=this,_=g;return z(_=h.closed["$=="]("read"))?_:h.closed["$=="]("both")}),ee(s,"$closed_write?",function(){var h=this,_=g;return z(_=h.closed["$=="]("write"))?_:h.closed["$=="]("both")}),ee(s,"$check_writable",function(){var h=this;return z(h["$closed_write?"]())?m.$raise(y("IOError"),"not opened for writing"):g}),ee(s,"$check_readable",function(){var h=this;return z(h["$closed_read?"]())?m.$raise(y("IOError"),"not opened for reading"):g}),N(s,"each_line","each"),N(s,"eof?","eof")}("::",null),D("::","STDIN",L.stdin=y("IO").$new(0,"r")),D("::","STDOUT",L.stdout=y("IO").$new(1,"w")),D("::","STDERR",L.stderr=y("IO").$new(2,"w"));var A=e.global.console;return y("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(w){process.stdout.write(w)}:function(w){A.log(w)}),y("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(w){process.stderr.write(w)}:function(w){A.warn(w)}),M=[function(w){var p=prompt();return p!==null?p+`
`:g}],ie(y("STDIN"),"read_proc=",M),M[M.length-1]};Opal.modules["opal/regexp_anchors"]=function(e){var q=e.module,D=e.const_set,K=[];e.nil;var z=e.$$$;return e.add_stubs("new"),function(ee,V){var R=q(ee,"Opal"),Z=[R].concat(V),m=e.$r(Z);return D(R,"REGEXP_START","^"),D(R,"REGEXP_END","$"),D(R,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),D(R,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),D(R,"INLINE_IDENTIFIER_REGEXP",m("Regexp").$new("[^"+z(R,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+z(R,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),D(R,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),D(R,"CONST_NAME_REGEXP",m("Regexp").$new(""+z(R,"REGEXP_START")+"(::)?[A-Z][^"+z(R,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+z(R,"REGEXP_END")))}(K[0],K)};Opal.modules["opal/mini"]=function(e){var q=e.Object;return e.nil,e.add_stubs("require"),q.$require("opal/base"),q.$require("corelib/nil"),q.$require("corelib/boolean"),q.$require("corelib/string"),q.$require("corelib/comparable"),q.$require("corelib/enumerable"),q.$require("corelib/enumerator"),q.$require("corelib/array"),q.$require("corelib/hash"),q.$require("corelib/number"),q.$require("corelib/range"),q.$require("corelib/proc"),q.$require("corelib/method"),q.$require("corelib/regexp"),q.$require("corelib/variables"),q.$require("corelib/io"),q.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(e){var q=e.coerce_to,D=e.module,K=e.slice,z=e.truthy,ee=e.eqeq,V=e.Opal,R=e.Kernel,Z=e.gvars,m=e.def,L=e.alias,ie=e.nil,F=e.$$$;return e.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(X){var ne=D(X,"Kernel");return m(ne,"$format",function(E,C){var P,B,N=ie;Z.DEBUG==null&&(Z.DEBUG=ie),P=K(arguments,1),B=P,ee(B.$length(),1)&&z(B["$[]"](0)["$respond_to?"]("to_ary"))&&(N=V["$coerce_to?"](B["$[]"](0),F("Array"),"to_ary"),z(N["$nil?"]())||(B=N.$to_a()));var M="",g=0,y,A,w=E.length,p,s,d,x,h,_,o,Y,H,c,l,a,n,t=1,r=0,$,i=0,u=1,v=2,k=4,T=8,S=16,G=32,O=64,ae=128;function le(){$&G&&R.$raise(F("ArgumentError"),"flag after width"),$&ae&&R.$raise(F("ArgumentError"),"flag after precision")}function ce(){$&G&&R.$raise(F("ArgumentError"),"width given twice"),$&ae&&R.$raise(F("ArgumentError"),"width after precision")}function de(I){return I>=B.length&&R.$raise(F("ArgumentError"),"too few arguments"),B[I]}function he(){switch(r){case-1:R.$raise(F("ArgumentError"),"unnumbered("+t+") mixed with numbered");case-2:R.$raise(F("ArgumentError"),"unnumbered("+t+") mixed with named")}return r=t++,de(r-1)}function ve(I){return r>0&&R.$raise(F("ArgumentError"),"numbered("+I+") after unnumbered("+r+")"),r===-2&&R.$raise(F("ArgumentError"),"numbered("+I+") after named"),I<1&&R.$raise(F("ArgumentError"),"invalid index - "+I+"$"),r=-1,de(I-1)}function me(){return n===void 0?he():n}function be(I){for(var j,J="";;A++){if(A===w&&R.$raise(F("ArgumentError"),"malformed format string - %*[0-9]"),E.charCodeAt(A)<48||E.charCodeAt(A)>57)return A--,j=parseInt(J,10)||0,j>2147483647&&R.$raise(F("ArgumentError"),""+I+" too big"),j;J+=E.charAt(A)}}function $e(I){var j,J=be(I);return E.charAt(A+1)==="$"?(A++,j=ve(J)):j=he(),j.$to_int()}for(A=E.indexOf("%");A!==-1;A=E.indexOf("%",A)){switch(s=void 0,$=i,x=-1,h=-1,n=void 0,y=A,A++,E.charAt(A)){case"%":g=A;case"":case`
`:case"\0":A++;continue}e:for(;A<w;A++)switch(E.charAt(A)){case" ":le(),$|=S;continue e;case"#":le(),$|=u;continue e;case"+":le(),$|=k;continue e;case"-":le(),$|=v;continue e;case"0":le(),$|=T;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(_=be("width"),E.charAt(A+1)==="$"){if(A+2===w){s="%",A++;break e}n!==void 0&&R.$raise(F("ArgumentError"),"value given twice - %"+_+"$"),n=ve(_),A++}else ce(),$|=G,x=_;continue e;case"<":case"{":for(Y=E.charAt(A)==="<"?">":"}",o="",A++;;A++){if(A===w&&R.$raise(F("ArgumentError"),"malformed name - unmatched parenthesis"),E.charAt(A)===Y){if(r>0&&R.$raise(F("ArgumentError"),"named "+o+" after unnumbered("+r+")"),r===-1&&R.$raise(F("ArgumentError"),"named "+o+" after numbered"),r=-2,(B[0]===void 0||!B[0].$$is_hash)&&R.$raise(F("ArgumentError"),"one hash required"),n=B[0].$fetch(o),Y===">")continue e;if(s=n.toString(),h!==-1&&(s=s.slice(0,h)),$&v)for(;s.length<x;)s=s+" ";else for(;s.length<x;)s=" "+s;break e}o+=E.charAt(A)}case"*":A++,ce(),$|=G,x=$e("width"),x<0&&($|=v,x=-x);continue e;case".":if($&ae&&R.$raise(F("ArgumentError"),"precision given twice"),$|=O|ae,h=0,A++,E.charAt(A)==="*"){A++,h=$e("precision"),h<0&&($&=~O);continue e}h=be("precision");continue e;case"d":case"i":case"u":if(p=R.$Integer(me()),p>=0){for(s=p.toString();s.length<h;)s="0"+s;if($&v)for(($&k||$&S)&&(s=($&k?"+":" ")+s);s.length<x;)s=s+" ";else if($&T&&h===-1){for(;s.length<x-($&k||$&S?1:0);)s="0"+s;($&k||$&S)&&(s=($&k?"+":" ")+s)}else for(($&k||$&S)&&(s=($&k?"+":" ")+s);s.length<x;)s=" "+s}else{for(s=(-p).toString();s.length<h;)s="0"+s;if($&v)for(s="-"+s;s.length<x;)s=s+" ";else if($&T&&h===-1){for(;s.length<x-1;)s="0"+s;s="-"+s}else for(s="-"+s;s.length<x;)s=" "+s}break e;case"b":case"B":case"o":case"x":case"X":switch(E.charAt(A)){case"b":case"B":H=2,c="0b",l=/^1+/,a="1";break;case"o":H=8,c="0",l=/^3?7+/,a="7";break;case"x":case"X":H=16,c="0x",l=/^f+/,a="f";break}if(p=R.$Integer(me()),p>=0){for(s=p.toString(H);s.length<h;)s="0"+s;if($&v)for(($&k||$&S)&&(s=($&k?"+":" ")+s),$&u&&p!==0&&(s=c+s);s.length<x;)s=s+" ";else if($&T&&h===-1){for(;s.length<x-($&k||$&S?1:0)-($&u&&p!==0?c.length:0);)s="0"+s;$&u&&p!==0&&(s=c+s),($&k||$&S)&&(s=($&k?"+":" ")+s)}else for($&u&&p!==0&&(s=c+s),($&k||$&S)&&(s=($&k?"+":" ")+s);s.length<x;)s=" "+s}else if($&k||$&S){for(s=(-p).toString(H);s.length<h;)s="0"+s;if($&v)for($&u&&(s=c+s),s="-"+s;s.length<x;)s=s+" ";else if($&T&&h===-1){for(;s.length<x-1-($&u?2:0);)s="0"+s;$&u&&(s=c+s),s="-"+s}else for($&u&&(s=c+s),s="-"+s;s.length<x;)s=" "+s}else{for(s=(p>>>0).toString(H).replace(l,a);s.length<h-2;)s=a+s;if($&v)for(s=".."+s,$&u&&(s=c+s);s.length<x;)s=s+" ";else if($&T&&h===-1){for(;s.length<x-2-($&u?c.length:0);)s=a+s;s=".."+s,$&u&&(s=c+s)}else for(s=".."+s,$&u&&(s=c+s);s.length<x;)s=" "+s}E.charAt(A)===E.charAt(A).toUpperCase()&&(s=s.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(p=R.$Float(me()),p>=0||isNaN(p)){if(p===1/0)s="Inf";else switch(E.charAt(A)){case"f":s=p.toFixed(h===-1?6:h);break;case"e":case"E":s=p.toExponential(h===-1?6:h);break;case"g":case"G":s=p.toExponential(),d=parseInt(s.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(s=p.toPrecision(h===-1?$&u?6:void 0:h));break}if($&v)for(($&k||$&S)&&(s=($&k?"+":" ")+s);s.length<x;)s=s+" ";else if($&T&&p!==1/0&&!isNaN(p)){for(;s.length<x-($&k||$&S?1:0);)s="0"+s;($&k||$&S)&&(s=($&k?"+":" ")+s)}else for(($&k||$&S)&&(s=($&k?"+":" ")+s);s.length<x;)s=" "+s}else{if(p===-1/0)s="Inf";else switch(E.charAt(A)){case"f":s=(-p).toFixed(h===-1?6:h);break;case"e":case"E":s=(-p).toExponential(h===-1?6:h);break;case"g":case"G":s=(-p).toExponential(),d=parseInt(s.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(s=(-p).toPrecision(h===-1?$&u?6:void 0:h));break}if($&v)for(s="-"+s;s.length<x;)s=s+" ";else if($&T&&p!==-1/0){for(;s.length<x-1;)s="0"+s;s="-"+s}else for(s="-"+s;s.length<x;)s=" "+s}E.charAt(A)===E.charAt(A).toUpperCase()&&p!==1/0&&p!==-1/0&&!isNaN(p)&&(s=s.toUpperCase()),s=s.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":R.$raise(F("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(p=me(),p["$respond_to?"]("to_ary")&&(p=p.$to_ary()[0]),p["$respond_to?"]("to_str")?s=p.$to_str():s=String.fromCharCode(q(p,F("Integer"),"to_int")),s.length!==1&&R.$raise(F("ArgumentError"),"%c requires a character"),$&v)for(;s.length<x;)s=s+" ";else for(;s.length<x;)s=" "+s;break e;case"p":if(s=me().$inspect(),h!==-1&&(s=s.slice(0,h)),$&v)for(;s.length<x;)s=s+" ";else for(;s.length<x;)s=" "+s;break e;case"s":if(s=me().$to_s(),h!==-1&&(s=s.slice(0,h)),$&v)for(;s.length<x;)s=s+" ";else for(;s.length<x;)s=" "+s;break e;default:R.$raise(F("ArgumentError"),"malformed format string - %"+E.charAt(A))}s===void 0&&R.$raise(F("ArgumentError"),"malformed format string - %"),M+=E.slice(g,y)+s,g=A+1}return Z.DEBUG&&r>=0&&t<B.length&&R.$raise(F("ArgumentError"),"too many arguments for format string"),M+E.slice(g)},-2),L(ne,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(e){var q=e.klass,D=e.rb_plus,K=e.truthy,z=e.send,ee=e.defs,V=e.eqeq,R=e.def,Z=e.return_ivar,m=e.return_val,L=e.slice,ie=e.Kernel,F=e.Opal,X=e.rb_lt,ne,W=e.top,E=[],C=e.$r(E),P=e.nil,B=e.$$$;return e.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),W.$require("corelib/string"),function(N,M,g){var y=q(N,M,"Encoding"),A=[y].concat(g),w=y.$$prototype;return w.name=w.dummy=P,ee(y,"$register",function p(s,d){var x=p.$$p||P,h=this,_=P,o=P,Y=P,H=P,c=P,l=P;return p.$$p=null,d==null&&(d=new Map),_=D([s],K(o=d["$[]"]("aliases"))?o:[]),Y=K(o=d["$[]"]("ascii"))&&o,H=K(o=d["$[]"]("dummy"))&&o,K(d["$[]"]("inherits"))?(c=d["$[]"]("inherits").$clone(),c.$initialize(s,_,Y,H)):c=h.$new(s,_,Y,H),x!==P&&z(c,"instance_eval",[],x.$to_proc()),l=e.encodings,z(_,"each",[],function a(n){var t=a.$$s==null?this:a.$$s;return n==null&&(n=P),t.$const_set(n.$tr("-","_"),c),l[n]=c},{$$s:h})},-2),ee(y,"$find",function(s){var d=this;return V(s,"default_external")?d.$default_external():e.find_encoding(s)}),y.$singleton_class().$attr_accessor("default_external"),y.$attr_reader("name","names"),R(y,"$initialize",function(s,d,x,h){var _=this;return _.name=s,_.names=d,_.ascii=x,_.dummy=h}),R(y,"$ascii_compatible?",Z("ascii")),R(y,"$dummy?",Z("dummy")),R(y,"$binary?",m(!1)),R(y,"$to_s",Z("name")),R(y,"$inspect",function(){var s=this;return"#<Encoding:"+s.name+(K(s.dummy)?" (dummy)":P)+">"}),R(y,"$charsize",function(s){for(var d=0,x=0,h=s.length;x<h;x++){var _=s.charCodeAt(x);_>=55296&&_<=56319||d++}return d}),R(y,"$each_char",function p(s){var d=p.$$p||P;p.$$p=null;for(var x="",h=0,_=s.length;h<_;h++){var o=s.charCodeAt(h),Y=s.charAt(h);if(o>=56320&&o<=57343){x=Y;continue}else o>=55296&&o<=56319&&(Y=x+Y);s.encoding.name!="UTF-8"&&(Y=new String(Y),Y.encoding=s.encoding),e.yield1(d,Y)}}),R(y,"$each_byte",function(s){return L(arguments),ie.$raise(B("NotImplementedError"))},-1),R(y,"$bytesize",function(s){return L(arguments),ie.$raise(B("NotImplementedError"))},-1),q("::",B("StandardError"),"EncodingError"),q("::",B("EncodingError"),"CompatibilityError"),q(A[0],B("EncodingError"),"UndefinedConversionError"),P}("::",null,E),z(B("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function N(){var M=N.$$s==null?this:N.$$s;return R(M,"$each_byte",function g(y){var A=g.$$p||P;g.$$p=null;for(var w=1/0,p,s=y.length,d=null,x=0;x<s;++x){if(p=y.charCodeAt(x),p>55295&&p<57344){if(!d){if(p>56319){(w-=3)>-1&&(e.yield1(A,239),e.yield1(A,191),e.yield1(A,189));continue}else if(x+1===s){(w-=3)>-1&&(e.yield1(A,239),e.yield1(A,191),e.yield1(A,189));continue}d=p;continue}if(p<56320){(w-=3)>-1&&(e.yield1(A,239),e.yield1(A,191),e.yield1(A,189)),d=p;continue}p=(d-55296<<10|p-56320)+65536}else d&&(w-=3)>-1&&(e.yield1(A,239),e.yield1(A,191),e.yield1(A,189));if(d=null,p<128){if((w-=1)<0)break;e.yield1(A,p)}else if(p<2048){if((w-=2)<0)break;e.yield1(A,p>>6|192),e.yield1(A,p&63|128)}else if(p<65536){if((w-=3)<0)break;e.yield1(A,p>>12|224),e.yield1(A,p>>6&63|128),e.yield1(A,p&63|128)}else if(p<1114112){if((w-=4)<0)break;e.yield1(A,p>>18|240),e.yield1(A,p>>12&63|128),e.yield1(A,p>>6&63|128),e.yield1(A,p&63|128)}}}),R(M,"$bytesize",function(y){return y.$bytes().$length()})},{$$s:W}),z(B("Encoding"),"register",["UTF-16LE"],function N(){var M=N.$$s==null?this:N.$$s;return R(M,"$each_byte",function g(y){var A=g.$$p||P;g.$$p=null;for(var w=0,p=y.length;w<p;w++){var s=y.charCodeAt(w);e.yield1(A,s&255),e.yield1(A,s>>8)}}),R(M,"$bytesize",function(y){return y.length*2})},{$$s:W}),z(B("Encoding"),"register",["UTF-16BE",new Map([["inherits",B(B("Encoding"),"UTF_16LE")]])],function N(){var M=N.$$s==null?this:N.$$s;return R(M,"$each_byte",function g(y){var A=g.$$p||P;g.$$p=null;for(var w=0,p=y.length;w<p;w++){var s=y.charCodeAt(w);e.yield1(A,s>>8),e.yield1(A,s&255)}})},{$$s:W}),z(B("Encoding"),"register",["UTF-32LE"],function N(){var M=N.$$s==null?this:N.$$s;return R(M,"$each_byte",function g(y){var A=g.$$p||P;g.$$p=null;for(var w=0,p=y.length;w<p;w++){var s=y.charCodeAt(w);e.yield1(A,s&255),e.yield1(A,s>>8),e.yield1(A,0),e.yield1(A,0)}}),R(M,"$bytesize",function(y){return y.length*4})},{$$s:W}),z(B("Encoding"),"register",["UTF-32BE",new Map([["inherits",B(B("Encoding"),"UTF_32LE")]])],function N(){var M=N.$$s==null?this:N.$$s;return R(M,"$each_byte",function g(y){var A=g.$$p||P;g.$$p=null;for(var w=0,p=y.length;w<p;w++){var s=y.charCodeAt(w);e.yield1(A,0),e.yield1(A,0),e.yield1(A,s>>8),e.yield1(A,s&255)}})},{$$s:W}),z(B("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function N(){var M=N.$$s==null?this:N.$$s;return R(M,"$each_char",function g(y){var A=g.$$p||P;g.$$p=null;for(var w=0,p=y.length;w<p;w++){var s=new String(y.charAt(w));s.encoding=y.encoding,e.yield1(A,s)}}),R(M,"$charsize",function(y){return y.length}),R(M,"$each_byte",function g(y){var A=g.$$p||P;g.$$p=null;for(var w=0,p=y.length;w<p;w++){var s=y.charCodeAt(w);e.yield1(A,s&255)}}),R(M,"$bytesize",function(y){return y.length}),R(M,"$binary?",m(!0))},{$$s:W}),B("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",B(B("Encoding"),"ASCII_8BIT")]])),B("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",B(B("Encoding"),"ASCII_8BIT")]])),function(N,M){var g=q(N,M,"String"),y=g.$$prototype;return y.internal_encoding=y.bytes=y.encoding=P,g.$attr_reader("encoding"),g.$attr_reader("internal_encoding"),e.prop(String.prototype,"bytes",P),e.prop(String.prototype,"encoding",B(B("Encoding"),"UTF_8")),e.prop(String.prototype,"internal_encoding",B(B("Encoding"),"UTF_8")),R(g,"$b",function(){var w=this;return w.$dup().$force_encoding("binary")}),R(g,"$bytesize",function(){var w=this;return w.internal_encoding.$bytesize(w)}),R(g,"$each_byte",function A(){var w=A.$$p||P,p=this;return A.$$p=null,w===P?z(p,"enum_for",["each_byte"],function s(){var d=s.$$s==null?this:s.$$s;return d.$bytesize()},{$$s:p}):(z(p.internal_encoding,"each_byte",[p],w.$to_proc()),p)}),R(g,"$bytes",function(){var w=this,p=P;return typeof w=="string"?new String(w).$each_byte().$to_a():(w.bytes=K(p=w.bytes)?p:w.$each_byte().$to_a(),w.bytes.$dup())}),R(g,"$each_char",function A(){var w=A.$$p||P,p=this;return A.$$p=null,w===P?z(p,"enum_for",["each_char"],function s(){var d=s.$$s==null?this:s.$$s;return d.$length()},{$$s:p}):(z(p.encoding,"each_char",[p],w.$to_proc()),p)}),R(g,"$chars",function A(){var w=A.$$p||P,p=this;return A.$$p=null,K(w)?z(p,"each_char",[],w.$to_proc()):p.$each_char().$to_a()}),R(g,"$each_codepoint",function A(){var w=A.$$p||P,p=this;if(A.$$p=null,w===P)return p.$enum_for("each_codepoint");for(var s=0,d=p.length;s<d;s++)e.yield1(w,p.codePointAt(s));return p}),R(g,"$codepoints",function A(){var w=A.$$p||P,p=this;return A.$$p=null,w!==P?z(p,"each_codepoint",[],w.$to_proc()):p.$each_codepoint().$to_a()}),R(g,"$encode",function(w){var p=this;return e.enc(p,w)}),R(g,"$force_encoding",function(w){var p=this,s=p;return w===s.encoding||(w=F["$coerce_to!"](w,B("String"),"to_s"),w=B("Encoding").$find(w),w===s.encoding)||(s=e.set_encoding(s,w)),s}),R(g,"$getbyte",function(w){var p=this,s=P;return s=p.$bytes(),w=F["$coerce_to!"](w,B("Integer"),"to_int"),K(X(s.$length(),w))?P:s["$[]"](w)}),R(g,"$initialize_copy",function(w){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),R(g,"$valid_encoding?",m(!0))}("::",null),ne=[B(C("Encoding"),"UTF_8")],z(B("Encoding"),"default_external=",ne),ne[ne.length-1]};Opal.modules["corelib/math"]=function(e){var q=e.type_error,D=e.module,K=e.const_set,z=e.Class,ee=e.slice,V=e.Kernel,R=e.defs,Z=e.truthy,m=e.send,L=e.def,ie=e.rb_minus,F=e.eqeqeq,X=e.rb_divide,ne=[],W=e.nil,E=e.$$$;return e.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(C,P){var B=D(C,"Math"),N=[B].concat(P),M=e.$r(N);return K(B,"E",Math.E),K(B,"PI",Math.PI),K(B,"DomainError",z.$new(E("StandardError"))),R(B,"$checked",function(y,A){var w,p;if(w=ee(arguments,1),p=w,isNaN(p[0])||p.length==2&&isNaN(p[1]))return NaN;var s=Math[y].apply(null,p);return isNaN(s)&&V.$raise(M("DomainError"),'Numerical argument is out of domain - "'+y+'"'),s},-2),R(B,"$float!",function(y){try{return V.$Float(y)}catch(A){if(e.rescue(A,[E("ArgumentError")]))try{return V.$raise(q(y,E("Float")))}finally{e.pop_exception(A)}else throw A}}),R(B,"$integer!",function(y){try{return V.$Integer(y)}catch(A){if(e.rescue(A,[E("ArgumentError")]))try{return V.$raise(q(y,E("Integer")))}finally{e.pop_exception(A)}else throw A}}),B.$module_function(),Z(typeof Math.erf<"u")||e.prop(Math,"erf",function(g){var y=.254829592,A=-.284496736,w=1.421413741,p=-1.453152027,s=1.061405429,d=.3275911,x=1;g<0&&(x=-1),g=Math.abs(g);var h=1/(1+d*g),_=1-((((s*h+p)*h+w)*h+A)*h+y)*h*Math.exp(-g*g);return x*_}),Z(typeof Math.erfc<"u")||e.prop(Math,"erfc",function(g){var y=Math.abs(g),A=1/(.5*y+1),w=A*.17087277+-.82215223,p=A*w+1.48851587,s=A*p+-1.13520398,d=A*s+.27886807,x=A*d+-.18628806,h=A*x+.09678418,_=A*h+.37409196,o=A*_+1.00002368,Y=A*o,H=-y*y-1.26551223+Y,c=A*Math.exp(H);return g<0?2-c:c}),m(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function g(y){var A=g.$$s==null?this:g.$$s;return y==null&&(y=W),m(A,"define_method",[y],function(p){return p==null&&(p=W),E("Math").$checked(y,E("Math")["$float!"](p))})},{$$s:B}),L(B,"$atan2",function(y,A){return E("Math").$checked("atan2",E("Math")["$float!"](y),E("Math")["$float!"](A))}),L(B,"$hypot",function(y,A){return E("Math").$checked("hypot",E("Math")["$float!"](y),E("Math")["$float!"](A))}),L(B,"$frexp",function(y){if(y=M("Math")["$float!"](y),isNaN(y))return[NaN,0];var A=Math.floor(Math.log(Math.abs(y))/Math.log(2))+1,w=y/Math.pow(2,A);return[w,A]}),L(B,"$gamma",function(y){y=M("Math")["$float!"](y);var A,w,p,s,d,x,h,_,o,Y=4.7421875,H=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(y))return NaN;if(y===0&&1/y<0)return-1/0;if((y===-1||y===-1/0)&&V.$raise(M("DomainError"),'Numerical argument is out of domain - "gamma"'),M("Integer")["$==="](y)){if(y<=0)return isFinite(y)?1/0:NaN;if(y>171)return 1/0;for(s=y-2,d=y-1;s>1;)d*=s,s--;return d==0&&(d=1),d}if(y<.5)return Math.PI/(Math.sin(Math.PI*y)*E("Math").$gamma(ie(1,y)));if(y>=171.35)return 1/0;if(y>85)return x=y*y,h=x*y,_=h*y,o=_*y,Math.sqrt(2*Math.PI/y)*Math.pow(y/Math.E,y)*(1+1/(12*y)+1/(288*x)-139/(51840*h)-571/(2488320*_)+163879/(209018880*o)+5246819/(75246796800*o*y));for(y-=1,p=H[0],A=1;A<H.length;++A)p+=H[A]/(y+A);return w=y+Y+.5,Math.sqrt(2*Math.PI)*Math.pow(w,y+.5)*Math.exp(-w)*p}),L(B,"$ldexp",function(y,A){return y=M("Math")["$float!"](y),A=M("Math")["$integer!"](A),isNaN(A)&&V.$raise(E("RangeError"),"float NaN out of range of integer"),y*Math.pow(2,A)}),L(B,"$lgamma",function(y){return y==-1?[1/0,1]:[Math.log(Math.abs(E("Math").$gamma(y))),E("Math").$gamma(y)<0?-1:1]}),L(B,"$log",function(y,A){return F(E("String"),y)&&V.$raise(q(y,E("Float"))),Z(A==null)?E("Math").$checked("log",E("Math")["$float!"](y)):(F(E("String"),A)&&V.$raise(q(A,E("Float"))),X(E("Math").$checked("log",E("Math")["$float!"](y)),E("Math").$checked("log",E("Math")["$float!"](A))))},-2),L(B,"$log10",function(y){return F(E("String"),y)&&V.$raise(q(y,E("Float"))),E("Math").$checked("log10",E("Math")["$float!"](y))}),L(B,"$log2",function(y){return F(E("String"),y)&&V.$raise(q(y,E("Float"))),E("Math").$checked("log2",E("Math")["$float!"](y))}),L(B,"$tan",function(y){return y=E("Math")["$float!"](y),Z(y["$infinite?"]())?E(E("Float"),"NAN"):E("Math").$checked("tan",E("Math")["$float!"](y))})}("::",ne)};Opal.modules["corelib/complex/base"]=function(e){var q=e.module,D=e.truthy,K=e.def,z=e.klass,ee=[],V=e.nil;return e.add_stubs("new,from_string"),function(R,Z){var m=q(R,"Kernel"),L=[m].concat(Z),ie=e.$r(L);return K(m,"$Complex",function(X,ne){return ne==null&&(ne=V),D(ne)?ie("Complex").$new(X,ne):ie("Complex").$new(X,0)},-2)}("::",ee),function(R,Z,m){var L=z(R,Z,"String"),ie=[L].concat(m),F=e.$r(ie);return K(L,"$to_c",function(){var ne=this;return F("Complex").$from_string(ne)})}("::",null,ee)};Opal.modules["corelib/complex"]=function(e){var q=e.klass,D=e.truthy,K=e.eqeqeq,z=e.Kernel,ee=e.defs,V=e.rb_times,R=e.def,Z=e.rb_plus,m=e.rb_minus,L=e.rb_divide,ie=e.eqeq,F=e.to_ary,X=e.rb_gt,ne=e.neqeq,W=e.return_val,E=e.const_set,C=e.alias,P=e.top,B=[],N=e.nil,M=e.$$$;return e.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),P.$require("corelib/numeric"),P.$require("corelib/complex/base"),function(g,y,A){var w=q(g,y,"Complex"),p=[w].concat(A),s=e.$r(p),d=w.$$prototype;return d.real=d.imag=N,ee(w,"$rect",function(h,_){var o=this;return _==null&&(_=0),K(M("Numeric"),h)&&D(h["$real?"]())&&K(M("Numeric"),_)&&D(_["$real?"]())||z.$raise(M("TypeError"),"not a real"),o.$new(h,_)},-2),ee(w,"$polar",function(h,_){var o=this;return _==null&&(_=0),K(M("Numeric"),h)&&D(h["$real?"]())&&K(M("Numeric"),_)&&D(_["$real?"]())||z.$raise(M("TypeError"),"not a real"),o.$new(V(h,M("Math").$cos(_)),V(h,M("Math").$sin(_)))},-2),w.$attr_reader("real","imag"),R(w,"$initialize",function(h,_){var o=this;return _==null&&(_=0),o.real=h,o.imag=_,o.$freeze()},-2),R(w,"$coerce",function(h){var _=this;return K(M("Complex"),h)?[h,_]:K(M("Numeric"),h)&&D(h["$real?"]())?[M("Complex").$new(h,0),_]:z.$raise(M("TypeError"),""+h.$class()+" can't be coerced into Complex")}),R(w,"$==",function(h){var _=this,o=N;return K(M("Complex"),h)?D(o=_.real["$=="](h.$real()))?_.imag["$=="](h.$imag()):o:K(M("Numeric"),h)&&D(h["$real?"]())?D(o=_.real["$=="](h))?_.imag["$=="](0):o:h["$=="](_)}),R(w,"$-@",function(){var h=this;return z.$Complex(h.real["$-@"](),h.imag["$-@"]())}),R(w,"$+",function(h){var _=this;return K(M("Complex"),h)?z.$Complex(Z(_.real,h.$real()),Z(_.imag,h.$imag())):K(M("Numeric"),h)&&D(h["$real?"]())?z.$Complex(Z(_.real,h),_.imag):_.$__coerced__("+",h)}),R(w,"$-",function(h){var _=this;return K(M("Complex"),h)?z.$Complex(m(_.real,h.$real()),m(_.imag,h.$imag())):K(M("Numeric"),h)&&D(h["$real?"]())?z.$Complex(m(_.real,h),_.imag):_.$__coerced__("-",h)}),R(w,"$*",function(h){var _=this;return K(M("Complex"),h)?z.$Complex(m(V(_.real,h.$real()),V(_.imag,h.$imag())),Z(V(_.real,h.$imag()),V(_.imag,h.$real()))):K(M("Numeric"),h)&&D(h["$real?"]())?z.$Complex(V(_.real,h),V(_.imag,h)):_.$__coerced__("*",h)}),R(w,"$/",function(h){var _=this;return K(M("Complex"),h)?K(M("Number"),_.real)&&D(_.real["$nan?"]())||K(M("Number"),_.imag)&&D(_.imag["$nan?"]())||K(M("Number"),h.$real())&&D(h.$real()["$nan?"]())||K(M("Number"),h.$imag())&&D(h.$imag()["$nan?"]())?M("Complex").$new(M(M("Float"),"NAN"),M(M("Float"),"NAN")):L(V(_,h.$conj()),h.$abs2()):K(M("Numeric"),h)&&D(h["$real?"]())?z.$Complex(_.real.$quo(h),_.imag.$quo(h)):_.$__coerced__("/",h)}),R(w,"$**",function(h){var _,o,Y=this,H=N,c=N,l=N,a=N,n=N,t=N,r=N,$=N,i=N,u=N,v=N;if(ie(h,0))return M("Complex").$new(1,0);if(K(M("Complex"),h))return o=Y.$polar(),_=F(o),H=_[0]==null?N:_[0],c=_[1]==null?N:_[1],l=h.$real(),a=h.$imag(),n=M("Math").$exp(m(V(l,M("Math").$log(H)),V(a,c))),t=Z(V(c,l),V(a,M("Math").$log(H))),M("Complex").$polar(n,t);if(K(M("Integer"),h))if(D(X(h,0))){for(r=Y,$=r,i=m(h,1);ne(i,0);){for(o=i.$divmod(2),_=F(o),u=_[0]==null?N:_[0],v=_[1]==null?N:_[1];ie(v,0);)r=z.$Complex(m(V(r.$real(),r.$real()),V(r.$imag(),r.$imag())),V(V(2,r.$real()),r.$imag())),i=u,o=i.$divmod(2),_=F(o),u=_[0]==null?N:_[0],v=_[1]==null?N:_[1];$=V($,r),i=m(i,1)}return $}else return L(M("Rational").$new(1,1),Y)["$**"](h["$-@"]());else return K(M("Float"),h)||K(M("Rational"),h)?(o=Y.$polar(),_=F(o),H=_[0]==null?N:_[0],c=_[1]==null?N:_[1],M("Complex").$polar(H["$**"](h),V(c,h))):Y.$__coerced__("**",h)}),R(w,"$abs",function(){var h=this;return M("Math").$hypot(h.real,h.imag)}),R(w,"$abs2",function(){var h=this;return Z(V(h.real,h.real),V(h.imag,h.imag))}),R(w,"$angle",function(){var h=this;return M("Math").$atan2(h.imag,h.real)}),R(w,"$conj",function(){var h=this;return z.$Complex(h.real,h.imag["$-@"]())}),R(w,"$denominator",function(){var h=this;return h.real.$denominator().$lcm(h.imag.$denominator())}),R(w,"$eql?",function(h){var _=this,o=N,Y=N;return D(o=D(Y=s("Complex")["$==="](h))?_.real.$class()["$=="](_.imag.$class()):Y)?_["$=="](h):o}),R(w,"$fdiv",function(h){var _=this;return K(M("Numeric"),h)||z.$raise(M("TypeError"),""+h.$class()+" can't be coerced into Complex"),L(_,h)}),R(w,"$finite?",function(){var h=this,_=N;return D(_=h.real["$finite?"]())?h.imag["$finite?"]():_}),R(w,"$hash",function(){var h=this;return[M("Complex"),h.real,h.imag].$hash()}),R(w,"$infinite?",function(){var h=this,_=N;return D(_=h.real["$infinite?"]())?_:h.imag["$infinite?"]()}),R(w,"$inspect",function(){var h=this;return"("+h+")"}),R(w,"$numerator",function(){var h=this,_=N;return _=h.$denominator(),z.$Complex(V(h.real.$numerator(),L(_,h.real.$denominator())),V(h.imag.$numerator(),L(_,h.imag.$denominator())))}),R(w,"$polar",function(){var h=this;return[h.$abs(),h.$arg()]}),R(w,"$rationalize",function(h){var _=this;return arguments.length>1&&z.$raise(M("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),ne(_.imag,0)&&z.$raise(M("RangeError"),"can't convert "+_+" into Rational"),_.$real().$rationalize(h)},-1),R(w,"$real?",W(!1)),R(w,"$rect",function(){var h=this;return[h.real,h.imag]}),R(w,"$to_f",function(){var h=this;return ie(h.imag,0)||z.$raise(M("RangeError"),"can't convert "+h+" into Float"),h.real.$to_f()}),R(w,"$to_i",function(){var h=this;return ie(h.imag,0)||z.$raise(M("RangeError"),"can't convert "+h+" into Integer"),h.real.$to_i()}),R(w,"$to_r",function(){var h=this;return ie(h.imag,0)||z.$raise(M("RangeError"),"can't convert "+h+" into Rational"),h.real.$to_r()}),R(w,"$to_s",function(){var h=this,_=N;return _=h.real.$inspect(),_=Z(_,K(M("Number"),h.imag)&&D(h.imag["$nan?"]())||D(h.imag["$positive?"]())||D(h.imag["$zero?"]())?"+":"-"),_=Z(_,h.imag.$abs().$inspect()),K(M("Number"),h.imag)&&(D(h.imag["$nan?"]())||D(h.imag["$infinite?"]()))&&(_=Z(_,"*")),Z(_,"i")}),E(p[0],"I",w.$new(0,1)),ee(w,"$from_string",function(h){var _=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;h.match(_);var o,Y;function H(){return _.test(h)}function c(){var a=h.match(_),n=a[0];return h=h.slice(n.length),n.replace(/_/g,"")}function l(){if(H()){var a=parseFloat(c());if(h[0]==="/")if(h=h.slice(1),H()){var n=parseFloat(c());return z.$Rational(a,n)}else return h="/"+h,a;else return a}else return null}return o=l(),o?(Y=l(),Y?z.$Complex(o,Y):h[0]==="i"?z.$Complex(0,o):z.$Complex(o,0)):h[0]==="i"?z.$Complex(0,1):h[0]==="-"&&h[1]==="i"?z.$Complex(0,-1):h[0]==="+"&&h[1]==="i"?z.$Complex(0,1):z.$Complex(0,0)}),function(x,h){return C(x,"rectangular","rect")}(e.get_singleton_class(w)),C(w,"arg","angle"),C(w,"conjugate","conj"),C(w,"divide","/"),C(w,"imaginary","imag"),C(w,"magnitude","abs"),C(w,"phase","arg"),C(w,"quo","/"),C(w,"rectangular","rect"),e.udef(w,"$negative?"),e.udef(w,"$positive?"),e.udef(w,"$step"),N}("::",M("Numeric"),B)};Opal.modules["corelib/rational/base"]=function(e){var q=e.module,D=e.def,K=e.klass;e.nil;var z=e.$$$;return e.add_stubs("convert,from_string"),function(ee){var V=q(ee,"Kernel");return D(V,"$Rational",function(Z,m){return m==null&&(m=1),z("Rational").$convert(Z,m)},-2)}("::"),function(ee,V){var R=K(ee,V,"String");return D(R,"$to_r",function(){var m=this;return z("Rational").$from_string(m)})}("::",null)};Opal.modules["corelib/rational"]=function(e){var q=e.klass,D=e.eqeq,K=e.Kernel,z=e.truthy,ee=e.rb_lt,V=e.rb_divide,R=e.defs,Z=e.eqeqeq,m=e.not,L=e.Opal,ie=e.def,F=e.return_ivar,X=e.rb_minus,ne=e.rb_times,W=e.rb_plus,E=e.rb_gt,C=e.rb_le,P=e.return_self,B=e.alias,N=e.top,M=e.nil,g=e.$$$;return e.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),N.$require("corelib/numeric"),N.$require("corelib/rational/base"),function(y,A){var w=q(y,A,"Rational"),p=w.$$prototype;return p.num=p.den=M,R(w,"$reduce",function(d,x){var h=this,_=M;if(d=d.$to_i(),x=x.$to_i(),D(x,0))K.$raise(g("ZeroDivisionError"),"divided by 0");else if(z(ee(x,0)))d=d["$-@"](),x=x["$-@"]();else if(D(x,1))return h.$new(d,x);return _=d.$gcd(x),h.$new(V(d,_),V(x,_))}),R(w,"$convert",function(d,x){var h=this;return(z(d["$nil?"]())||z(x["$nil?"]()))&&K.$raise(g("TypeError"),"cannot convert nil into Rational"),Z(g("Integer"),d)&&Z(g("Integer"),x)?h.$reduce(d,x):((Z(g("Float"),d)||Z(g("String"),d)||Z(g("Complex"),d))&&(d=d.$to_r()),(Z(g("Float"),x)||Z(g("String"),x)||Z(g("Complex"),x))&&(x=x.$to_r()),z(x["$equal?"](1))&&m(g("Integer")["$==="](d))?L["$coerce_to!"](d,g("Rational"),"to_r"):Z(g("Numeric"),d)&&Z(g("Numeric"),x)?V(d,x):h.$reduce(d,x))}),ie(w,"$initialize",function(d,x){var h=this;return h.num=d,h.den=x,h.$freeze()}),ie(w,"$numerator",F("num")),ie(w,"$denominator",F("den")),ie(w,"$coerce",function(d){var x=this,h=M;return Z(g("Rational"),h=d)?[d,x]:Z(g("Integer"),h)?[d.$to_r(),x]:Z(g("Float"),h)?[d,x.$to_f()]:M}),ie(w,"$==",function(d){var x=this,h=M,_=M;return Z(g("Rational"),h=d)?z(_=x.num["$=="](d.$numerator()))?x.den["$=="](d.$denominator()):_:Z(g("Integer"),h)?z(_=x.num["$=="](d))?x.den["$=="](1):_:Z(g("Float"),h)?x.$to_f()["$=="](d):d["$=="](x)}),ie(w,"$<=>",function(d){var x=this,h=M;return Z(g("Rational"),h=d)?X(ne(x.num,d.$denominator()),ne(x.den,d.$numerator()))["$<=>"](0):Z(g("Integer"),h)?X(x.num,ne(x.den,d))["$<=>"](0):Z(g("Float"),h)?x.$to_f()["$<=>"](d):x.$__coerced__("<=>",d)}),ie(w,"$+",function(d){var x=this,h=M,_=M,o=M;return Z(g("Rational"),h=d)?(_=W(ne(x.num,d.$denominator()),ne(x.den,d.$numerator())),o=ne(x.den,d.$denominator()),K.$Rational(_,o)):Z(g("Integer"),h)?K.$Rational(W(x.num,ne(d,x.den)),x.den):Z(g("Float"),h)?W(x.$to_f(),d):x.$__coerced__("+",d)}),ie(w,"$-",function(d){var x=this,h=M,_=M,o=M;return Z(g("Rational"),h=d)?(_=X(ne(x.num,d.$denominator()),ne(x.den,d.$numerator())),o=ne(x.den,d.$denominator()),K.$Rational(_,o)):Z(g("Integer"),h)?K.$Rational(X(x.num,ne(d,x.den)),x.den):Z(g("Float"),h)?X(x.$to_f(),d):x.$__coerced__("-",d)}),ie(w,"$*",function(d){var x=this,h=M,_=M,o=M;return Z(g("Rational"),h=d)?(_=ne(x.num,d.$numerator()),o=ne(x.den,d.$denominator()),K.$Rational(_,o)):Z(g("Integer"),h)?K.$Rational(ne(x.num,d),x.den):Z(g("Float"),h)?ne(x.$to_f(),d):x.$__coerced__("*",d)}),ie(w,"$/",function(d){var x=this,h=M,_=M,o=M;return Z(g("Rational"),h=d)?(_=ne(x.num,d.$denominator()),o=ne(x.den,d.$numerator()),K.$Rational(_,o)):Z(g("Integer"),h)?D(d,0)?V(x.$to_f(),0):K.$Rational(x.num,ne(x.den,d)):Z(g("Float"),h)?V(x.$to_f(),d):x.$__coerced__("/",d)}),ie(w,"$**",function(d){var x=this,h=M;return Z(g("Integer"),h=d)?D(x,0)&&z(ee(d,0))?g(g("Float"),"INFINITY"):z(E(d,0))?K.$Rational(x.num["$**"](d),x.den["$**"](d)):z(ee(d,0))?K.$Rational(x.den["$**"](d["$-@"]()),x.num["$**"](d["$-@"]())):K.$Rational(1,1):Z(g("Float"),h)?x.$to_f()["$**"](d):Z(g("Rational"),h)?D(d,0)?K.$Rational(1,1):D(d.$denominator(),1)?z(ee(d,0))?K.$Rational(x.den["$**"](d.$numerator().$abs()),x.num["$**"](d.$numerator().$abs())):K.$Rational(x.num["$**"](d.$numerator()),x.den["$**"](d.$numerator())):D(x,0)&&z(ee(d,0))?K.$raise(g("ZeroDivisionError"),"divided by 0"):x.$to_f()["$**"](d):x.$__coerced__("**",d)}),ie(w,"$abs",function(){var d=this;return K.$Rational(d.num.$abs(),d.den.$abs())}),ie(w,"$ceil",function(d){var x=this;return d==null&&(d=0),D(d,0)?V(x.num["$-@"](),x.den)["$-@"]().$ceil():x.$with_precision("ceil",d)},-1),ie(w,"$floor",function(d){var x=this;return d==null&&(d=0),D(d,0)?V(x.num["$-@"](),x.den)["$-@"]().$floor():x.$with_precision("floor",d)},-1),ie(w,"$hash",function(){var d=this;return[g("Rational"),d.num,d.den].$hash()}),ie(w,"$inspect",function(){var d=this;return"("+d+")"}),ie(w,"$rationalize",function(d){var x=this;if(arguments.length>1&&K.$raise(g("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),d==null)return x;for(var h=d.$abs(),_=X(x,h),o=W(x,h),Y=0,H=1,c=1,l=0,a,n,t,r,$;t=_.$ceil(),!C(t,o);)r=t-1,a=r*H+Y,n=r*l+c,$=V(1,X(o,r)),o=V(1,X(_,r)),_=$,Y=H,c=l,H=a,l=n;return K.$Rational(t*H+Y,t*l+c)},-1),ie(w,"$round",function(d){var x=this,h=M,_=M,o=M;return d==null&&(d=0),D(d,0)?D(x.num,0)?0:D(x.den,1)?x.num:(h=W(ne(x.num.$abs(),2),x.den),_=ne(x.den,2),o=V(h,_).$truncate(),z(ee(x.num,0))?o["$-@"]():o):x.$with_precision("round",d)},-1),ie(w,"$to_f",function(){var d=this;return V(d.num,d.den)}),ie(w,"$to_i",function(){var d=this;return d.$truncate()}),ie(w,"$to_r",P),ie(w,"$to_s",function(){var d=this;return""+d.num+"/"+d.den}),ie(w,"$truncate",function(d){var x=this;return d==null&&(d=0),D(d,0)?z(ee(x.num,0))?x.$ceil():x.$floor():x.$with_precision("truncate",d)},-1),ie(w,"$with_precision",function(d,x){var h=this,_=M,o=M;return Z(g("Integer"),x)||K.$raise(g("TypeError"),"not an Integer"),_=10["$**"](x),o=ne(h,_),z(ee(x,1))?V(o.$send(d),_).$to_i():K.$Rational(o.$send(d),_)}),R(w,"$from_string",function(d){var x=d.trimLeft(),h=/^[+-]?[\d_]+(\.[\d_]+)?/;x.match(h);var _,o;function Y(){return h.test(x)}function H(){var c=x.match(h),l=c[0];return x=x.slice(l.length),l.replace(/_/g,"")}return Y()?(_=parseFloat(H()),x[0]==="/"?(x=x.slice(1),Y()?(o=parseFloat(H()),K.$Rational(_,o)):K.$Rational(_,1)):K.$Rational(_,1)):K.$Rational(0,1)}),B(w,"divide","/"),B(w,"quo","/")}("::",g("Numeric"))};Opal.modules["corelib/time"]=function(e){var q=e.slice,D=e.deny_frozen_access,K=e.klass,z=e.Kernel,ee=e.Opal,V=e.defs,R=e.eqeqeq,Z=e.def,m=e.truthy,L=e.rb_gt,ie=e.rb_lt,F=e.send,X=e.rb_plus,ne=e.rb_divide,W=e.rb_minus,E=e.range,C=e.neqeq,P=e.rb_le,B=e.eqeq,N=e.alias,M=e.top,g=[],y=e.nil,A=e.$$$;return e.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),M.$require("corelib/comparable"),function(w,p,s){var d=K(w,p,"Time"),x=[d].concat(s),h=e.$r(x);d.$include(A("Comparable"));var _=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],H=["January","February","March","April","May","June","July","August","September","October","November","December"];V(d,"$at",function(a,n){var t;return A("Time")["$==="](a)?(n!==void 0&&z.$raise(A("TypeError"),"can't convert Time into an exact number"),t=new Date(a.getTime()),t.timezone=a.timezone,t):(a.$$is_number||(a=ee["$coerce_to!"](a,A("Integer"),"to_int")),n===void 0?new Date(a*1e3):(n.$$is_number||(n=ee["$coerce_to!"](n,A("Integer"),"to_int")),new Date(a*1e3+n/1e3)))},-2);function c(l,a,n,t,r,$){if(l.$$is_string?l=parseInt(l,10):l=ee["$coerce_to!"](l,A("Integer"),"to_int"),a===y)a=1;else if(!a.$$is_number)if(a["$respond_to?"]("to_str"))switch(a=a.$to_str(),a.toLowerCase()){case"jan":a=1;break;case"feb":a=2;break;case"mar":a=3;break;case"apr":a=4;break;case"may":a=5;break;case"jun":a=6;break;case"jul":a=7;break;case"aug":a=8;break;case"sep":a=9;break;case"oct":a=10;break;case"nov":a=11;break;case"dec":a=12;break;default:a=a.$to_i()}else a=ee["$coerce_to!"](a,A("Integer"),"to_int");return(a<1||a>12)&&z.$raise(A("ArgumentError"),"month out of range: "+a),a=a-1,n===y?n=1:n.$$is_string?n=parseInt(n,10):n=ee["$coerce_to!"](n,A("Integer"),"to_int"),(n<1||n>31)&&z.$raise(A("ArgumentError"),"day out of range: "+n),t===y?t=0:t.$$is_string?t=parseInt(t,10):t=ee["$coerce_to!"](t,A("Integer"),"to_int"),(t<0||t>24)&&z.$raise(A("ArgumentError"),"hour out of range: "+t),r===y?r=0:r.$$is_string?r=parseInt(r,10):r=ee["$coerce_to!"](r,A("Integer"),"to_int"),(r<0||r>59)&&z.$raise(A("ArgumentError"),"min out of range: "+r),$===y?$=0:$.$$is_number||($.$$is_string?$=parseInt($,10):$=ee["$coerce_to!"]($,A("Integer"),"to_int")),($<0||$>60)&&z.$raise(A("ArgumentError"),"sec out of range: "+$),[l,a,n,t,r,$]}return V(d,"$new",function(a,n,t,r,$,i,u){var v=this;n==null&&(n=y),t==null&&(t=y),r==null&&(r=y),$==null&&($=y),i==null&&(i=y),u==null&&(u=y);var k,T,S,G;return a===void 0?new Date:(k=c(a,n,t,r,$,i),a=k[0],n=k[1],t=k[2],r=k[3],$=k[4],i=k[5],u===y?(T=new Date(a,n,t,r,$,0,i*1e3),a<100&&T.setFullYear(a),T):(S=v.$_parse_offset(u),G=new Date(Date.UTC(a,n,t,r,$,0,i*1e3)),a<100&&G.setUTCFullYear(a),T=new Date(G.getTime()-S*36e5),T.timezone=S,T))},-1),V(d,"$_parse_offset",function(a){var n;if(a.$$is_string)if(a=="UTC")n=0;else if(/^[+-]\d\d:[0-5]\d$/.test(a)){var t,r,$;t=a[0],r=+(a[1]+a[2]),$=+(a[4]+a[5]),n=(t=="-"?-1:1)*(r+$/60)}else z.$raise(A("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+a);else a.$$is_number?n=a/3600:z.$raise(A("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return n}),V(d,"$local",function(a,n,t,r,$,i,u,v,k,T){n==null&&(n=y),t==null&&(t=y),r==null&&(r=y),$==null&&($=y),i==null&&(i=y),u==null&&(u=y),v==null&&(v=y),k==null&&(k=y),T==null&&(T=y);var S,G;return arguments.length===10&&(S=q(arguments),a=S[5],n=S[4],t=S[3],r=S[2],$=S[1],i=S[0]),S=c(a,n,t,r,$,i),a=S[0],n=S[1],t=S[2],r=S[3],$=S[4],i=S[5],G=new Date(a,n,t,r,$,0,i*1e3),a<100&&G.setFullYear(a),G},-2),V(d,"$gm",function(a,n,t,r,$,i,u,v,k,T){n==null&&(n=y),t==null&&(t=y),r==null&&(r=y),$==null&&($=y),i==null&&(i=y),u==null&&(u=y),v==null&&(v=y),k==null&&(k=y),T==null&&(T=y);var S,G;return arguments.length===10&&(S=q(arguments),a=S[5],n=S[4],t=S[3],r=S[2],$=S[1],i=S[0]),S=c(a,n,t,r,$,i),a=S[0],n=S[1],t=S[2],r=S[3],$=S[4],i=S[5],G=new Date(Date.UTC(a,n,t,r,$,0,i*1e3)),a<100&&G.setUTCFullYear(a),G.timezone=0,G},-2),V(d,"$now",function(){var a=this;return a.$new()}),Z(d,"$+",function(a){var n=this;R(A("Time"),a)&&z.$raise(A("TypeError"),"time + time?"),a.$$is_number||(a=ee["$coerce_to!"](a,A("Integer"),"to_int"));var t=new Date(n.getTime()+a*1e3);return t.timezone=n.timezone,t}),Z(d,"$-",function(a){var n=this;if(R(A("Time"),a))return(n.getTime()-a.getTime())/1e3;a.$$is_number||(a=ee["$coerce_to!"](a,A("Integer"),"to_int"));var t=new Date(n.getTime()-a*1e3);return t.timezone=n.timezone,t}),Z(d,"$<=>",function(a){var n=this,t=y;return R(A("Time"),a)?n.$to_f()["$<=>"](a.$to_f()):(t=a["$<=>"](n),m(t["$nil?"]())?y:m(L(t,0))?-1:m(ie(t,0))?1:0)}),Z(d,"$==",function(a){var n=this,t=y;return m(t=A("Time")["$==="](a))?n.$to_f()===a.$to_f():t}),Z(d,"$asctime",function(){var a=this;return a.$strftime("%a %b %e %H:%M:%S %Y")}),F([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function l(a,n,t,r){var $=l.$$s==null?this:l.$$s;return a==null&&(a=y),n==null&&(n=y),t==null&&(t=y),r==null&&(r=0),F($,"define_method",[a],function i(){var u=i.$$s==null?this:i.$$s;return r+(u.timezone!=null?new Date(u.getTime()+u.timezone*36e5)[t]():u[n]())},{$$s:$})},{$$arity:-4,$$s:d}),Z(d,"$yday",function(){var a=this,n=y,t=y,r=y;return n=h("Time").$new(a.$year()).$to_i(),t=h("Time").$new(a.$year(),a.$month(),a.$day()).$to_i(),r=86400,X(ne(W(t,n),r).$round(),1)}),Z(d,"$isdst",function(){var a=this,n=new Date(a.getFullYear(),0,1),t=new Date(a.getFullYear(),6,1);return a.getTimezoneOffset()<Math.max(n.getTimezoneOffset(),t.getTimezoneOffset())}),Z(d,"$dup",function(){var a=this,n=y;return n=new Date(a.getTime()),n.$copy_instance_variables(a),n.$initialize_dup(a),n}),Z(d,"$eql?",function(a){var n=this,t=y;return m(t=a["$is_a?"](A("Time")))?n["$<=>"](a)["$zero?"]():t}),F([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function l(a,n){var t=l.$$s==null?this:l.$$s;return a==null&&(a=y),n==null&&(n=y),F(t,"define_method",[a],function r(){var $=r.$$s==null?this:r.$$s;return $.$wday()===n},{$$s:t})},{$$s:d}),Z(d,"$hash",function(){var a=this;return[A("Time"),a.getTime()].$hash()}),Z(d,"$inspect",function(){var a=this;return m(a["$utc?"]())?a.$strftime("%Y-%m-%d %H:%M:%S UTC"):a.$strftime("%Y-%m-%d %H:%M:%S %z")}),Z(d,"$succ",function(){var a=this,n=new Date(a.getTime()+1e3);return n.timezone=a.timezone,n}),Z(d,"$usec",function(){var a=this;return a.getMilliseconds()*1e3}),Z(d,"$zone",function(){var a=this;if(a.timezone===0)return"UTC";if(a.timezone!=null)return y;var n=a.toString(),t;return n.indexOf("(")==-1?t=n.match(/[A-Z]{3,4}/)[0]:t=n.match(/\((.+)\)(?:\s|$)/)[1],t=="GMT"&&/(GMT\W*\d{4})/.test(n)?RegExp.$1:t}),Z(d,"$getgm",function(){var a=this,n=new Date(a.getTime());return n.timezone=0,n}),Z(d,"$gmtime",function(){var a=this;return a.timezone!==0&&(D(a),a.timezone=0),a}),Z(d,"$gmt?",function(){var a=this;return a.timezone===0}),Z(d,"$gmt_offset",function(){var a=this;return a.timezone!=null?a.timezone*60:-a.getTimezoneOffset()*60}),Z(d,"$strftime",function(a){var n=this;return a.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(t,r,$,i,u){var v="",k,T,S,G=r.indexOf("0")!==-1,O=r.indexOf("-")===-1,ae=r.indexOf("_")!==-1,le=r.indexOf("^")!==-1,ce=r.indexOf("#")!==-1,de=(r.match(":")||[]).length;switch($=parseInt($,10),G&&ae&&(r.indexOf("0")<r.indexOf("_")?G=!1:ae=!1),u){case"Y":v+=n.$year();break;case"C":G=!ae,v+=Math.round(n.$year()/100);break;case"y":G=!ae,v+=n.$year()%100;break;case"m":G=!ae,v+=n.$mon();break;case"B":v+=H[n.$mon()-1];break;case"b":case"h":ae=!G,v+=Y[n.$mon()-1];break;case"d":G=!ae,v+=n.$day();break;case"e":ae=!G,v+=n.$day();break;case"j":G=!ae,$=isNaN($)?3:$,v+=n.$yday();break;case"H":G=!ae,v+=n.$hour();break;case"k":ae=!G,v+=n.$hour();break;case"I":G=!ae,v+=n.$hour()%12||12;break;case"l":ae=!G,v+=n.$hour()%12||12;break;case"P":v+=n.$hour()>=12?"pm":"am";break;case"p":v+=n.$hour()>=12?"PM":"AM";break;case"M":G=!ae,v+=n.$min();break;case"S":G=!ae,v+=n.$sec();break;case"L":G=!ae,$=isNaN($)?3:$,v+=n.getMilliseconds();break;case"N":$=isNaN($)?9:$,v+=n.getMilliseconds().toString().$rjust(3,"0"),v=v.$ljust($,"0");break;case"z":var he=n.timezone==null?n.getTimezoneOffset():-n.timezone*60,ve=Math.floor(Math.abs(he)/60),me=Math.abs(he)%60;v+=he<0?"+":"-",v+=ve<10?"0":"",v+=ve,de>0&&(v+=":"),v+=me<10?"0":"",v+=me,de>1&&(v+=":00");break;case"Z":v+=n.$zone();break;case"A":v+=_[n.$wday()];break;case"a":v+=o[n.$wday()];break;case"u":v+=n.$wday()+1;break;case"w":v+=n.$wday();break;case"V":v+=n.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":v+=n.$cweek_cyear()["$[]"](1);break;case"g":v+=n.$cweek_cyear()["$[]"](1)["$[]"](E(-2,-1,!1));break;case"s":v+=n.$to_i();break;case"n":v+=`
`;break;case"t":v+="	";break;case"%":v+="%";break;case"c":v+=n.$strftime("%a %b %e %T %Y");break;case"D":case"x":v+=n.$strftime("%m/%d/%y");break;case"F":v+=n.$strftime("%Y-%m-%d");break;case"v":v+=n.$strftime("%e-%^b-%4Y");break;case"r":v+=n.$strftime("%I:%M:%S %p");break;case"R":v+=n.$strftime("%H:%M");break;case"T":case"X":v+=n.$strftime("%H:%M:%S");break;case"J":if(k=n.$to_date().$jd(),k<2405160){v+=n.$strftime("%Y-%m-%d");break}else k<2419614?(T="M",S=1867):k<2424875?(T="T",S=1911):k<2447535?(T="S",S=1925):k<2458605?(T="H",S=1988):(T="R",S=2018);v+=n.$format("%c%02d",T,W(n.$year(),S)),v+=n.$strftime("-%m-%d");break;default:return t}return le&&(v=v.toUpperCase()),ce&&(v=v.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),O&&(G||ae)&&(v=v.$rjust(isNaN($)?2:$,ae?" ":"0")),v})}),Z(d,"$to_a",function(){var a=this;return[a.$sec(),a.$min(),a.$hour(),a.$day(),a.$month(),a.$year(),a.$wday(),a.$yday(),a.$isdst(),a.$zone()]}),Z(d,"$to_f",function(){var a=this;return a.getTime()/1e3}),Z(d,"$to_i",function(){var a=this;return parseInt(a.getTime()/1e3,10)}),Z(d,"$cweek_cyear",function(){var a=this,n=y,t=y,r=y,$=y,i=y,u=y,v=y;return n=A("Time").$new(a.$year(),1,1),t=n.$wday(),r=a.$year(),m(P(t,4))&&C(t,0)?$=W(t,1):($=W(W(t,7),1),B($,-8)&&($=-1)),i=ne(X(a.$yday(),$),7).$ceil(),m(P(i,0))?A("Time").$new(W(a.$year(),1),12,31).$cweek_cyear():(B(i,53)&&(u=A("Time").$new(a.$year(),12,31),v=u.$wday(),m(P(v,3))&&C(v,0)&&(i=1,r=X(r,1))),[i,r])}),function(l,a){return N(l,"mktime","local"),N(l,"utc","gm")}(e.get_singleton_class(d)),N(d,"ctime","asctime"),N(d,"dst?","isdst"),N(d,"getutc","getgm"),N(d,"gmtoff","gmt_offset"),N(d,"mday","day"),N(d,"month","mon"),N(d,"to_s","inspect"),N(d,"tv_sec","to_i"),N(d,"tv_usec","usec"),N(d,"utc","gmtime"),N(d,"utc?","gmt?"),N(d,"utc_offset","gmt_offset")}("::",Date,g)};Opal.modules["corelib/struct"]=function(e){var q=e.klass,D=e.slice,K=e.extract_kwargs,z=e.ensure_kwargs,ee=e.hash_get,V=e.truthy,R=e.neqeq,Z=e.eqeq,m=e.Opal,L=e.send,ie=e.Class,F=e.to_a,X=e.def,ne=e.defs,W=e.Kernel,E=e.rb_gt,C=e.rb_minus,P=e.eqeqeq,B=e.rb_lt,N=e.rb_ge,M=e.rb_plus,g=e.alias,y=e.top,A=[],w=e.nil,p=e.$$$;return e.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),y.$require("corelib/enumerable"),function(s,d,x){var h=q(s,d,"Struct"),_=[h].concat(x),o=e.$r(_);h.$include(p("Enumerable")),ne(h,"$new",function H(c,l,a){var n=H.$$p||w,t,r,$,i,u=this,v=w;if(H.$$p=null,t=D(arguments,1),r=K(t),r=z(r),$=t,i=ee(r,"keyword_init"),i==null&&(i=!1),V(c))if(Z(c.$class(),p("String"))&&R(c["$[]"](0).$upcase(),c["$[]"](0)))$.$unshift(c),c=w;else try{c=m["$const_name!"](c)}catch(k){if(e.rescue(k,[p("TypeError"),p("NameError")]))try{$.$unshift(c),c=w}finally{e.pop_exception(k)}else throw k}return L($,"map",[],function(T){return T==null&&(T=w),m["$coerce_to!"](T,p("String"),"to_str")}),v=L(ie,"new",[u],function k(){var T=k.$$s==null?this:k.$$s;return L($,"each",[],function S(G){var O=S.$$s==null?this:S.$$s;return G==null&&(G=w),O.$define_struct_attribute(G)},{$$s:T}),function(S,G){return X(S,"$new",function(ae){var le,ce,de=this,he=w;return le=D(arguments),ce=le,he=de.$allocate(),he.$$data={},L(he,"initialize",F(ce)),he},-1),S.$alias_method("[]","new")}(e.get_singleton_class(T))},{$$s:u}),V(n)&&L(v,"module_eval",[],n.$to_proc()),v.$$keyword_init=i,V(c)&&p("Struct").$const_set(c,v),v},-2),ne(h,"$define_struct_attribute",function(c){var l=this;return Z(l,p("Struct"))&&W.$raise(p("ArgumentError"),"you cannot define attributes to the Struct class"),l.$members()["$<<"](c),L(l,"define_method",[c],function a(){var n=a.$$s==null?this:a.$$s;return n.$$data[c]},{$$s:l}),L(l,"define_method",[""+c+"="],function a(n){var t=a.$$s==null?this:a.$$s;return n==null&&(n=w),t.$$data[c]=n},{$$s:l})}),ne(h,"$members",function(){var c=this,l=w;return c.members==null&&(c.members=w),Z(c,p("Struct"))&&W.$raise(p("ArgumentError"),"the Struct class has no members"),c.members=V(l=c.members)?l:[]}),ne(h,"$inherited",function(c){var l=this,a=w;return l.members==null&&(l.members=w),a=l.members,L(c,"instance_eval",[],function n(){var t=n.$$s==null?this:n.$$s;return t.members=a},{$$s:l})}),X(h,"$initialize",function(c){var l,a,n=this,t=w,r=w,$=w;return l=D(arguments),a=l,V(n.$class().$$keyword_init)?(t=V(r=a.$last())?r:new Map,(V(E(a.$length(),1))||V(a.length===1&&!t.$$is_hash))&&W.$raise(p("ArgumentError"),"wrong number of arguments (given "+a.$length()+", expected 0)"),$=C(t.$keys(),n.$class().$members()),V($["$any?"]())&&W.$raise(p("ArgumentError"),"unknown keywords: "+$.$join(", ")),L(n.$class().$members(),"each",[],function i(u){var v,k=i.$$s==null?this:i.$$s;return u==null&&(u=w),v=[u,t["$[]"](u)],L(k,"[]=",v),v[v.length-1]},{$$s:n})):(V(E(a.$length(),n.$class().$members().$length()))&&W.$raise(p("ArgumentError"),"struct size differs"),L(n.$class().$members(),"each_with_index",[],function i(u,v){var k,T=i.$$s==null?this:i.$$s;return u==null&&(u=w),v==null&&(v=w),k=[u,a["$[]"](v)],L(T,"[]=",k),k[k.length-1]},{$$s:n}))},-1),X(h,"$initialize_copy",function(c){var l=this;l.$$data={};var a=Object.keys(c.$$data),n,t,r;for(n=0,t=a.length;n<t;n++)r=a[n],l.$$data[r]=c.$$data[r]}),ne(h,"$keyword_init?",function(){var c=this;return c.$$keyword_init}),X(h,"$members",function(){var c=this;return c.$class().$members()}),X(h,"$hash",function(){var c=this;return[c.$class(),c.$to_a()].$hash()}),X(h,"$[]",function(c){var l=this;return P(p("Integer"),c)?(V(B(c,l.$class().$members().$size()["$-@"]()))&&W.$raise(p("IndexError"),"offset "+c+" too small for struct(size:"+l.$class().$members().$size()+")"),V(N(c,l.$class().$members().$size()))&&W.$raise(p("IndexError"),"offset "+c+" too large for struct(size:"+l.$class().$members().$size()+")"),c=l.$class().$members()["$[]"](c)):P(p("String"),c)?l.$$data.hasOwnProperty(c)||W.$raise(p("NameError").$new("no member '"+c+"' in struct",c)):W.$raise(p("TypeError"),"no implicit conversion of "+c.$class()+" into Integer"),c=m["$coerce_to!"](c,p("String"),"to_str"),l.$$data[c]}),X(h,"$[]=",function(c,l){var a=this;return P(p("Integer"),c)?(V(B(c,a.$class().$members().$size()["$-@"]()))&&W.$raise(p("IndexError"),"offset "+c+" too small for struct(size:"+a.$class().$members().$size()+")"),V(N(c,a.$class().$members().$size()))&&W.$raise(p("IndexError"),"offset "+c+" too large for struct(size:"+a.$class().$members().$size()+")"),c=a.$class().$members()["$[]"](c)):P(p("String"),c)?V(a.$class().$members()["$include?"](c.$to_sym()))||W.$raise(p("NameError").$new("no member '"+c+"' in struct",c)):W.$raise(p("TypeError"),"no implicit conversion of "+c.$class()+" into Integer"),c=m["$coerce_to!"](c,p("String"),"to_str"),a.$$data[c]=l}),X(h,"$==",function(c){var l=this;if(!V(c["$instance_of?"](l.$class())))return!1;var a={},n={};function t(r,$){var i,u,v;a[r.$__id__()]=!0,n[$.$__id__()]=!0;for(i in r.$$data)if(u=r.$$data[i],v=$.$$data[i],p("Struct")["$==="](u)){if((!a.hasOwnProperty(u.$__id__())||!n.hasOwnProperty(v.$__id__()))&&!t(u,v))return!1}else if(!u["$=="](v))return!1;return!0}return t(l,c)}),X(h,"$eql?",function(c){var l=this;if(!V(c["$instance_of?"](l.$class())))return!1;var a={},n={};function t(r,$){var i,u,v;a[r.$__id__()]=!0,n[$.$__id__()]=!0;for(i in r.$$data)if(u=r.$$data[i],v=$.$$data[i],p("Struct")["$==="](u)){if((!a.hasOwnProperty(u.$__id__())||!n.hasOwnProperty(v.$__id__()))&&!t(u,v))return!1}else if(!u["$eql?"](v))return!1;return!0}return t(l,c)}),X(h,"$each",function H(){var c=H.$$p||w,l=this;return H.$$p=null,c===w?L(l,"enum_for",["each"],function a(){var n=a.$$s==null?this:a.$$s;return n.$size()},{$$s:l}):(L(l.$class().$members(),"each",[],function a(n){var t=a.$$s==null?this:a.$$s;return n==null&&(n=w),e.yield1(c,t["$[]"](n))},{$$s:l}),l)}),X(h,"$each_pair",function H(){var c=H.$$p||w,l=this;return H.$$p=null,c===w?L(l,"enum_for",["each_pair"],function a(){var n=a.$$s==null?this:a.$$s;return n.$size()},{$$s:l}):(L(l.$class().$members(),"each",[],function a(n){var t=a.$$s==null?this:a.$$s;return n==null&&(n=w),e.yield1(c,[n,t["$[]"](n)])},{$$s:l}),l)}),X(h,"$length",function(){var c=this;return c.$class().$members().$length()}),X(h,"$to_a",function(){var c=this;return L(c.$class().$members(),"map",[],function l(a){var n=l.$$s==null?this:l.$$s;return a==null&&(a=w),n["$[]"](a)},{$$s:c})});var Y=[];return X(h,"$inspect",function(){var c=this,l=w,a=w;return function(){try{return l="#<struct ",V(Y["$include?"](c.$__id__()))?M(l,":...>"):(Y["$<<"](c.$__id__()),a=!0,P(p("Struct"),c)&&V(c.$class().$name())&&(l=M(l,""+c.$class()+" ")),l=M(l,L(c.$each_pair(),"map",[],function(t,r){return t==null&&(t=w),r==null&&(r=w),""+t+"="+o("Opal").$inspect(r)}).$join(", ")),l=M(l,">"),l)}finally{V(a)&&Y.pop()}}()}),X(h,"$to_h",function H(c){var l=H.$$p||w,a,n,t=this;return H.$$p=null,a=D(arguments),n=a,l!==w?L(L(t,"map",[],l.$to_proc()),"to_h",F(n)):L(t.$class().$members(),"each_with_object",[new Map],function r($,i){var u,v=r.$$s==null?this:r.$$s;return $==null&&($=w),i==null&&(i=w),u=[$,v["$[]"]($)],L(i,"[]=",u),u[u.length-1]},{$$s:t})},-1),X(h,"$values_at",function(c){var l,a,n=this;l=D(arguments),a=l,a=L(a,"map",[],function(u){return u==null&&(u=w),u.$$is_range?u.$to_a():u}).$flatten();for(var t=[],r=0,$=a.length;r<$;r++)a[r].$$is_number||W.$raise(p("TypeError"),"no implicit conversion of "+a[r].$class()+" into Integer"),t.push(n["$[]"](a[r]));return t},-1),X(h,"$dig",function(c,l){var a,n,t=this,r=w;return a=D(arguments,1),n=a,r=V(c.$$is_string&&t.$$data.hasOwnProperty(c))&&t.$$data[c]||w,r===w||n.length===0?r:(V(r["$respond_to?"]("dig"))||W.$raise(p("TypeError"),""+r.$class()+" does not have #dig method"),L(r,"dig",F(n)))},-2),g(h,"size","length"),g(h,"to_s","inspect"),g(h,"values","to_a")}("::",null,A)};Opal.modules["corelib/set"]=function(e){var q=e.freeze,D=e.klass,K=e.slice,z=e.defs,ee=e.truthy,V=e.eqeqeq,R=e.Kernel,Z=e.send,m=e.def,L=e.eqeq,ie=e.rb_lt,F=e.rb_le,X=e.alias,ne=[],W=e.nil,E=e.$$$;return e.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(C,P,B){var N=D(C,P,"Set"),M=[N].concat(B),g=e.$r(M),y=W,A=N.$$prototype;A.hash=W,N.$include(E("Enumerable")),z(N,"$[]",function(s){var d,x,h=this;return d=K(arguments),x=d,h.$new(x)},-1),m(N,"$initialize",function p(s){var d=p.$$p||W,x=this;return p.$$p=null,s==null&&(s=W),x.hash=new Map,ee(s["$nil?"]())?W:(V(E("Enumerable"),s)||R.$raise(E("ArgumentError"),"value must be enumerable"),ee(d)?Z(s,"each",[],function h(_){var o=h.$$s==null?this:h.$$s;return _==null&&(_=W),o.$add(e.yield1(d,_))},{$$s:x}):x.$merge(s))},-1),m(N,"$dup",function(){var s=this,d=W;return d=s.$class().$new(),d.$merge(s)}),m(N,"$-",function(s){var d=this;return ee(s["$respond_to?"]("each"))||R.$raise(E("ArgumentError"),"value must be enumerable"),d.$dup().$subtract(s)}),m(N,"$inspect",function(){var s=this;return"#<Set: {"+s.$to_a().$join(",")+"}>"}),m(N,"$==",function(s){var d=this;return ee(d["$equal?"](s))?!0:ee(s["$instance_of?"](d.$class()))?d.hash["$=="](s.$instance_variable_get("@hash")):ee(s["$is_a?"](E("Set")))&&L(d.$size(),s.$size())?Z(s,"all?",[],function x(h){var _=x.$$s==null?this:x.$$s;return _.hash==null&&(_.hash=W),h==null&&(h=W),_.hash["$include?"](h)},{$$s:d}):!1}),m(N,"$add",function(s){var d=this;return d.hash["$[]="](s,!0),d}),m(N,"$classify",function p(){var s=p.$$p||W,d=this,x=W;return p.$$p=null,s===W?d.$enum_for("classify"):(x=Z(E("Hash"),"new",[],function h(_,o){var Y,H=h.$$s==null?this:h.$$s;return _==null&&(_=W),o==null&&(o=W),Y=[o,H.$class().$new()],Z(_,"[]=",Y),Y[Y.length-1]},{$$s:d}),Z(d,"each",[],function(_){return _==null&&(_=W),x["$[]"](e.yield1(s,_)).$add(_)}),x)}),m(N,"$collect!",function p(){var s=p.$$p||W,d=this,x=W;return p.$$p=null,s===W?d.$enum_for("collect!"):(x=d.$class().$new(),Z(d,"each",[],function(_){return _==null&&(_=W),x["$<<"](e.yield1(s,_))}),d.$replace(x))}),m(N,"$compare_by_identity",function(){var s=this;return ee(s.hash["$respond_to?"]("compare_by_identity"))?(s.hash.$compare_by_identity(),s):s.$raise(g("NotImplementedError"),""+s.$class().$name()+"#compare_by_identity is not implemented")}),m(N,"$compare_by_identity?",function(){var s=this,d=W;return ee(d=s.hash["$respond_to?"]("compare_by_identity?"))?s.hash["$compare_by_identity?"]():d}),m(N,"$delete",function(s){var d=this;return d.hash.$delete(s),d}),m(N,"$delete?",function(s){var d=this;return ee(d["$include?"](s))?(d.$delete(s),d):W}),m(N,"$delete_if",function p(){var s=p.$$p||W,d=this;return p.$$p=null,s===W?d.$enum_for("delete_if"):(Z(Z(d,"select",[],function(h){return h==null&&(h=W),e.yield1(s,h)}),"each",[],function x(h){var _=x.$$s==null?this:x.$$s;return _.hash==null&&(_.hash=W),h==null&&(h=W),_.hash.$delete(h)},{$$s:d}),d)}),m(N,"$freeze",function(){var s=this;return ee(s["$frozen?"]())?s:(s.hash.$freeze(),q(s))}),m(N,"$keep_if",function p(){var s=p.$$p||W,d=this;return p.$$p=null,s===W?d.$enum_for("keep_if"):(Z(Z(d,"reject",[],function(h){return h==null&&(h=W),e.yield1(s,h)}),"each",[],function x(h){var _=x.$$s==null?this:x.$$s;return _.hash==null&&(_.hash=W),h==null&&(h=W),_.hash.$delete(h)},{$$s:d}),d)}),m(N,"$reject!",function p(){var s=p.$$p||W,d=this,x=W;return p.$$p=null,s===W?d.$enum_for("reject!"):(x=d.$size(),Z(d,"delete_if",[],s.$to_proc()),L(d.$size(),x)?W:d)}),m(N,"$select!",function p(){var s=p.$$p||W,d=this,x=W;return p.$$p=null,s===W?d.$enum_for("select!"):(x=d.$size(),Z(d,"keep_if",[],s.$to_proc()),L(d.$size(),x)?W:d)}),m(N,"$add?",function(s){var d=this;return ee(d["$include?"](s))?W:d.$add(s)}),m(N,"$each",function p(){var s=p.$$p||W,d=this;return p.$$p=null,s===W?d.$enum_for("each"):(Z(d.hash,"each_key",[],s.$to_proc()),d)}),m(N,"$empty?",function(){var s=this;return s.hash["$empty?"]()}),m(N,"$eql?",function(s){var d=this;return d.hash["$eql?"](Z(s,"instance_eval",[],function x(){var h=x.$$s==null?this:x.$$s;return h.hash==null&&(h.hash=W),h.hash},{$$s:d}))}),m(N,"$clear",function(){var s=this;return s.hash.$clear(),s}),m(N,"$include?",function(s){var d=this;return d.hash["$include?"](s)}),m(N,"$merge",function(s){var d=this;return Z(s,"each",[],function x(h){var _=x.$$s==null?this:x.$$s;return h==null&&(h=W),_.$add(h)},{$$s:d}),d}),m(N,"$replace",function(s){var d=this;return d.$clear(),d.$merge(s),d}),m(N,"$size",function(){var s=this;return s.hash.$size()}),m(N,"$subtract",function(s){var d=this;return Z(s,"each",[],function x(h){var _=x.$$s==null?this:x.$$s;return h==null&&(h=W),_.$delete(h)},{$$s:d}),d}),m(N,"$|",function(s){var d=this;return ee(s["$respond_to?"]("each"))||R.$raise(E("ArgumentError"),"value must be enumerable"),d.$dup().$merge(s)});function w(p){ee(y=p["$is_a?"](E("Set")))||R.$raise(E("ArgumentError"),"value must be a set")}return m(N,"$superset?",function(s){var d=this;return w(s),ee(ie(d.$size(),s.$size()))?!1:Z(s,"all?",[],function x(h){var _=x.$$s==null?this:x.$$s;return h==null&&(h=W),_["$include?"](h)},{$$s:d})}),m(N,"$proper_superset?",function(s){var d=this;return w(s),ee(F(d.$size(),s.$size()))?!1:Z(s,"all?",[],function x(h){var _=x.$$s==null?this:x.$$s;return h==null&&(h=W),_["$include?"](h)},{$$s:d})}),m(N,"$subset?",function(s){var d=this;return w(s),ee(ie(s.$size(),d.$size()))?!1:Z(d,"all?",[],function(h){return h==null&&(h=W),s["$include?"](h)})}),m(N,"$proper_subset?",function(s){var d=this;return w(s),ee(F(s.$size(),d.$size()))?!1:Z(d,"all?",[],function(h){return h==null&&(h=W),s["$include?"](h)})}),m(N,"$intersect?",function(s){var d=this;return w(s),ee(ie(d.$size(),s.$size()))?Z(d,"any?",[],function(h){return h==null&&(h=W),s["$include?"](h)}):Z(s,"any?",[],function x(h){var _=x.$$s==null?this:x.$$s;return h==null&&(h=W),_["$include?"](h)},{$$s:d})}),m(N,"$disjoint?",function(s){var d=this;return d["$intersect?"](s)["$!"]()}),m(N,"$to_a",function(){var s=this;return s.hash.$keys()}),X(N,"+","|"),X(N,"<","proper_subset?"),X(N,"<<","add"),X(N,"<=","subset?"),X(N,">","proper_superset?"),X(N,">=","superset?"),X(N,"difference","-"),X(N,"filter!","select!"),X(N,"length","size"),X(N,"map!","collect!"),X(N,"member?","include?"),X(N,"union","|")}("::",null,ne)};Opal.modules["corelib/dir"]=function(e){var q=e.klass,D=e.def,K=e.truthy,z=e.alias,ee=e.nil,V=e.$$$;return e.add_stubs("[],pwd"),function(R,Z,m){var L=q(R,Z,"Dir");return function(ie,F){return D(ie,"$chdir",function X(ne){var W=X.$$p||ee,E=ee;return X.$$p=null,function(){try{return E=e.current_dir,e.current_dir=ne,e.yieldX(W,[])}finally{e.current_dir=E}}()}),D(ie,"$pwd",function(){return e.current_dir||"."}),D(ie,"$home",function(){var ne=ee;return K(ne=V("ENV")["$[]"]("HOME"))?ne:"."}),z(ie,"getwd","pwd")}(e.get_singleton_class(L))}("::",null)};Opal.modules["corelib/file"]=function(e){var q=e.truthy,D=e.klass,K=e.const_set,z=e.Opal,ee=e.regexp,V=e.rb_plus,R=e.def,Z=e.Kernel,m=e.eqeq,L=e.rb_lt,ie=e.rb_minus,F=e.range,X=e.send,ne=e.slice,W=e.alias,E=[],C=e.nil,P=e.$$$;return e.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(B,N,M){var g=D(B,N,"File"),y=[g].concat(M),A=C;return K(y[0],"Separator",K(y[0],"SEPARATOR","/")),K(y[0],"ALT_SEPARATOR",C),K(y[0],"PATH_SEPARATOR",":"),K(y[0],"FNM_SYSCASE",0),A=/^[a-zA-Z]:(?:\\|\/)/,function(w,p){var s=[w].concat(p),d=e.$r(s);R(w,"$absolute_path",function(o,Y){var H=C,c=C,l=C,a=C,n=C,t=C,r=C,$=C,i=C,u=C;Y==null&&(Y=C),H=d("SEPARATOR"),c=h(),l=[],o=q(o["$respond_to?"]("to_path"))?o.$to_path():o,o=z["$coerce_to!"](o,P("String"),"to_str"),Y=q(a=Y)?a:P("Dir").$pwd(),n=o.substr(0,H.length)===H||A.test(o),t=Y.substr(0,H.length)===H||A.test(Y),q(n)?(r=o.$split(ee(["[",c,"]"])),$=A.test(o)?"":o.$sub(ee(["^([",c,"]+).*$"]),"\\1"),i=!0):(r=V(Y.$split(ee(["[",c,"]"])),o.$split(ee(["[",c,"]"]))),$=A.test(Y)?"":Y.$sub(ee(["^([",c,"]+).*$"]),"\\1"),i=t);for(var v,k=0,T=r.length;k<T;k++)v=r[k],!(v===C||v===""&&(l.length===0||i)||v==="."&&(l.length===0||i))&&(v===".."?l.pop():l.push(v));return!i&&r[0]!=="."&&l.$unshift("."),u=l.$join(H),q(i)&&(u=V($,u)),u},-2),R(w,"$expand_path",function(o,Y){var H=this,c=C,l=C,a=C,n=C,t=C;return Y==null&&(Y=C),c=d("SEPARATOR"),l=h(),q(o[0]==="~"||Y&&Y[0]==="~")&&(a=d("Dir").$home(),q(a)||Z.$raise(P("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),n=A.test(a)?"":a.$sub(ee(["^([",l,"]+).*$"]),"\\1"),q(a["$start_with?"](n))||Z.$raise(P("ArgumentError"),"non-absolute home"),a=V(a,c),t=ee(["^\\~(?:",c,"|$)"]),o=o.$sub(t,a),q(Y)&&(Y=Y.$sub(t,a))),H.$absolute_path(o,Y)},-2);function x(_){return q(_["$respond_to?"]("to_path"))&&(_=_.$to_path()),_=z["$coerce_to!"](_,P("String"),"to_str"),_}function h(){return d("ALT_SEPARATOR")===C?e.escape_regexp(d("SEPARATOR")):e.escape_regexp(V(d("SEPARATOR"),d("ALT_SEPARATOR")))}return R(w,"$dirname",function(o,Y){var H=this,c=C;if(Y==null&&(Y=1),m(Y,0))return o;q(L(Y,0))&&Z.$raise(P("ArgumentError"),"level can't be negative"),c=h(),o=x(o);var l=o.match(new RegExp("^["+c+"]")),a;return o=o.replace(new RegExp("["+c+"]+$"),""),o=o.replace(new RegExp("[^"+c+"]+$"),""),o=o.replace(new RegExp("["+c+"]+$"),""),o===""?a=l?"/":".":a=o,Y==1?a:H.$dirname(a,ie(Y,1))},-2),R(w,"$basename",function(o,Y){var H=C;return Y==null&&(Y=C),H=h(),o=x(o),o.length==0||(Y!==C?Y=z["$coerce_to!"](Y,P("String"),"to_str"):Y=null,o=o.replace(new RegExp("(.)["+H+"]*$"),"$1"),o=o.replace(new RegExp("^(?:.*["+H+"])?([^"+H+"]+)$"),"$1"),Y===".*"?o=o.replace(/\.[^\.]+$/,""):Y!==null&&(Y=e.escape_regexp(Y),o=o.replace(new RegExp(""+Y+"$"),""))),o},-2),R(w,"$extname",function(o){var Y=this,H=C,c=C;return o=x(o),H=Y.$basename(o),q(H["$empty?"]())||(c=H["$[]"](F(1,-1,!1)).$rindex("."),q(c["$nil?"]())||m(V(c,1),ie(H.$length(),1)))?"":H["$[]"](e.Range.$new(V(c,1),-1,!1))}),R(w,"$exist?",function(o){return e.modules[o]!=null}),R(w,"$directory?",function(o){var Y=C;Y=[];for(var H in e.modules)Y.push(H);return o=o.$gsub(ee(["(^.",d("SEPARATOR"),"+|",d("SEPARATOR"),"+$)"])),X(Y,"find",[],function(l){return l==null&&(l=C),l["$=~"](ee(["^",o]))})}),R(w,"$join",function(o){var Y,H,c=C;return Y=ne(arguments),H=Y,q(H["$empty?"]())?"":(c="",H=X(H.$flatten().$each_with_index(),"map",[],function(a,n){return a==null&&(a=C),n==null&&(n=C),m(n,0)&&q(a["$empty?"]())||m(H.$length(),V(n,1))&&q(a["$empty?"]())?d("SEPARATOR"):a}),H=X(H,"reject",[],"empty?".$to_proc()),X(H,"each_with_index",[],function(a,n){var t=C;return a==null&&(a=C),n==null&&(n=C),t=H["$[]"](V(n,1)),q(t["$nil?"]())?c=""+c+a:(q(a["$end_with?"](d("SEPARATOR")))&&q(t["$start_with?"](d("SEPARATOR")))&&(a=a.$sub(ee([d("SEPARATOR"),"+$"]),"")),c=q(a["$end_with?"](d("SEPARATOR")))||q(t["$start_with?"](d("SEPARATOR")))?""+c+a:""+c+a+d("SEPARATOR"))}),c)},-1),R(w,"$split",function(o){return o.$split(d("SEPARATOR"))}),W(w,"realpath","expand_path"),W(w,"exists?","exist?")}(e.get_singleton_class(g),y)}("::",P("IO"),E)};Opal.modules["corelib/process/base"]=function(e){var q=e.klass,D=e.slice,K=e.defs,z=e.return_val,ee=e.nil;return function(V,R){var Z=q(V,R,"Signal");return K(Z,"$trap",function(L){return D(arguments),ee},-1)}("::",null),function(V,R){var Z=q(V,R,"GC");return K(Z,"$start",z(ee))}("::",null)};Opal.modules["corelib/process"]=function(e){var q=e.module,D=e.defs,K=e.truthy,z=e.return_val,ee=e.Kernel,V=e.nil,R=e.$$$;return e.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(Z){var m=q(Z,"Process"),L=V;if(m.__clocks__=[],D(m,"$__register_clock__",function(X,ne){var W=this;return W.__clocks__==null&&(W.__clocks__=V),W.$const_set(X,W.__clocks__.$size()),W.__clocks__["$<<"](ne)}),m.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),L=!1,e.global.performance)L=function(){return performance.now()};else if(e.global.process&&process.hrtime){var ie=process.hrtime();L=function(){var F=process.hrtime(ie),X=F[1]/1e3|0;return F[0]*1e3+X/1e3}}return K(L)&&m.$__register_clock__("CLOCK_MONOTONIC",L),D(m,"$pid",z(0)),D(m,"$times",function(){var X=V;return X=R("Time").$now().$to_f(),R(R("Benchmark"),"Tms").$new(X,X,X,X,X)}),D(m,"$clock_gettime",function(X,ne){var W=this,E=V;W.__clocks__==null&&(W.__clocks__=V),ne==null&&(ne="float_second"),K(E=W.__clocks__["$[]"](X))||ee.$raise(R(R("Errno"),"EINVAL"),"clock_gettime("+X+") "+W.__clocks__["$[]"](X));var C=E();switch(ne){case"float_second":return C/1e3;case"float_millisecond":return C/1;case"float_microsecond":return C*1e3;case"second":return C/1e3|0;case"millisecond":return C/1|0;case"microsecond":return C*1e3|0;case"nanosecond":return C*1e6|0;default:ee.$raise(R("ArgumentError"),"unexpected unit: "+ne)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(e){var q=e.klass,D=e.module,K=e.def,z=e.range,ee=e.send,V=e.rb_divide,R=e.Kernel,Z=e.Opal,m=[],L=e.nil,ie=e.$$$;return e.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(F,X,ne){var W=q(F,X,"Random"),E=[W].concat(ne);return function(C,P){var B=D(C,"Formatter"),N=[B].concat(P),M=e.$r(N);return K(B,"$hex",function(y){var A=this;y==null&&(y=L),y=ie("Random").$_verify_count(y);for(var w=A.$bytes(y),p="",s=0;s<y;s++)p+=w.charCodeAt(s).toString(16).padStart(2,"0");return p.$encode("US-ASCII")},-1),K(B,"$random_bytes",function(y){var A=this;return y==null&&(y=L),A.$bytes(y)},-1),K(B,"$base64",function(y){var A=this;return y==null&&(y=L),ie("Base64").$strict_encode64(A.$random_bytes(y)).$encode("US-ASCII")},-1),K(B,"$urlsafe_base64",function(y,A){var w=this;return y==null&&(y=L),A==null&&(A=!1),ie("Base64").$urlsafe_encode64(w.$random_bytes(y),A).$encode("US-ASCII")},-1),K(B,"$uuid",function(){var y=this,A=L;return A=y.$hex(16).$split(""),A["$[]="](12,"4"),A["$[]="](16,(parseInt(A["$[]"](16),16)&3|8).toString(16)),A=[A["$[]"](z(0,8,!0)),A["$[]"](z(8,12,!0)),A["$[]"](z(12,16,!0)),A["$[]"](z(16,20,!0)),A["$[]"](z(20,32,!0))],A=ee(A,"map",[],"join".$to_proc()),A.$join("-")}),K(B,"$random_float",function(){var y=this,A=L,w=L;return A=y.$bytes(4),w=0,ee(4,"times",[],function(s){return s==null&&(s=L),w=w["$<<"](8),w=w["$|"](A["$[]"](s).$ord())}),V(w.$abs(),2147483647)}),K(B,"$random_number",function(y){var A=this;function w(){return A.$random_float()}function p(d){return Math.floor(w()*d)}function s(){var d=y.begin,x=y.end;if(d===L||x===L)return L;var h=x-d;return h<0?L:h===0?d:(x%1===0&&d%1===0&&!y.excl&&h++,p(h)+d)}return y==null?w():y.$$is_range?s():y.$$is_number?(y<=0&&R.$raise(ie("ArgumentError"),"invalid argument - "+y),y%1===0?p(y):w()*y):(y=Z["$coerce_to!"](y,ie("Integer"),"to_int"),y<=0&&R.$raise(ie("ArgumentError"),"invalid argument - "+y),p(y))},-1),K(B,"$alphanumeric",function(y){var A=this,w=L;return y==null&&(y=L),y=M("Random").$_verify_count(y),w=ee([z("0","9",!1),z("a","z",!1),z("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),ee(ie("Array"),"new",[y],function p(s){var d=p.$$s==null?this:p.$$s;return w["$[]"](d.$random_number(w.$length()))},{$$s:A}).$join()},-1)}(W,E),W.$include(ie(ie("Random"),"Formatter")),W.$extend(ie(ie("Random"),"Formatter"))}("::",null,m)};Opal.modules["corelib/random/mersenne_twister"]=function(e){var q=e.klass,D=e.const_set,K=e.send,z=e.nil,ee=e.$$$,V=z;return e.add_stubs("generator="),V=function(){var R=624,Z=397,m=2567483615,L=2147483648,ie=2147483647,F=function(N,M){return N&L|M&ie},X=function(N,M){return F(N,M)>>>1^(M&1?m:0)};function ne(N){var M={left:0,next:R,state:new Array(R)};return W(M,N),M}function W(N,M){var g;for(N.state[0]=M>>>0,g=1;g<R;g++)N.state[g]=1812433253*(N.state[g-1]^N.state[g-1]>>30>>>0)+g,N.state[g]&=4294967295;N.left=1,N.next=R}function E(N){var M=0,g=N.state,y;for(N.left=R,N.next=0,y=R-Z+1;--y;M++)g[M]=g[M+Z]^X(g[M+0],g[M+1]);for(y=Z;--y;M++)g[M]=g[M+(Z-R)]^X(g[M+0],g[M+1]);g[M]=g[M+(Z-R)]^X(g[M+0],g[0])}function C(N){var M;return--N.left<=0&&E(N),M=N.state[N.next++],M^=M>>>11,M^=M<<7&2636928640,M^=M<<15&4022730752,M^=M>>>18,M>>>0}function P(N,M){return N>>>=5,M>>>=6,(N*67108864+M)*(1/9007199254740992)}function B(N){var M=C(N),g=C(N);return P(M,g)}return{genrand_real:B,init:ne}}(),function(R,Z){var m=q(R,Z,"Random"),L,ie=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return D(m,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*ie)},reseed:function(F){return V.init(F)},rand:function(F){return V.genrand_real(F)}}),L=[ee(m,"MERSENNE_TWISTER_GENERATOR")],K(m,"generator=",L),L[L.length-1]}("::",null)};Opal.modules["corelib/random"]=function(e){var q=e.truthy,D=e.klass,K=e.Kernel,z=e.defs,ee=e.Opal,V=e.def,R=e.eqeqeq,Z=e.send,m=e.top,L=e.nil,ie=e.$$$;return e.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),m.$require("corelib/random/formatter"),function(F,X){var ne=D(F,X,"Random");return ne.$attr_reader("seed","state"),z(ne,"$_verify_count",function(E){return q(E)||(E=16),typeof E!="number"&&(E=E.$to_int()),E<0&&K.$raise(ie("ArgumentError"),"negative string size (or size too big)"),E=Math.floor(E),E}),V(ne,"$initialize",function(E){var C=this;return E==null&&(E=ie("Random").$new_seed()),E=ee["$coerce_to!"](E,ie("Integer"),"to_int"),C.state=E,C.$reseed(E)},-1),V(ne,"$reseed",function(E){var C=this;return C.seed=E,C.$rng=e.$$rand.reseed(E)}),z(ne,"$new_seed",function(){return e.$$rand.new_seed()}),z(ne,"$rand",function(E){var C=this;return ie(C,"DEFAULT").$rand(E)},-1),z(ne,"$srand",function(E){var C=this,P=L;return E==null&&(E=ie("Random").$new_seed()),E=ee["$coerce_to!"](E,ie("Integer"),"to_int"),P=ie(C,"DEFAULT").$seed(),ie(C,"DEFAULT").$reseed(E),P},-1),z(ne,"$urandom",function(E){return ie("SecureRandom").$bytes(E)}),V(ne,"$==",function(E){var C=this,P=L;return R(ie("Random"),E)?q(P=C.$seed()["$=="](E.$seed()))?C.$state()["$=="](E.$state()):P:!1}),V(ne,"$bytes",function(E){var C=this;return E=ie("Random").$_verify_count(E),Z(ie("Array"),"new",[E],function P(){var B=P.$$s==null?this:P.$$s;return B.$rand(255).$chr()},{$$s:C}).$join().$encode("ASCII-8BIT")}),z(ne,"$bytes",function(E){var C=this;return ie(C,"DEFAULT").$bytes(E)}),V(ne,"$rand",function(E){var C=this;return C.$random_number(E)},-1),V(ne,"$random_float",function(){var E=this;return E.state++,e.$$rand.rand(E.$rng)}),z(ne,"$random_float",function(){var E=this;return ie(E,"DEFAULT").$random_float()}),z(ne,"$generator=",function(E){var C=this;return e.$$rand=E,q(C["$const_defined?"]("DEFAULT"))?ie(C,"DEFAULT").$reseed():C.$const_set("DEFAULT",C.$new(C.$new_seed()))})}("::",null),m.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(e){var q=e.Kernel,D=e.klass,K=e.send,z=e.slice,ee=e.module,V=e.def,R=e.return_val,Z=e.alias,m=e.defs,L=e.top,ie=[],F=e.nil,X=e.$$$;e.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var ne={};function W(C){switch(e.config.unsupported_features_severity){case"error":q.$raise(X("NotImplementedError"),C);break;case"warning":E(C);break}}function E(C){ne[C]||(ne[C]=!0,L.$warn(C))}return function(C,P){var B=D(C,P,"String"),N="String#%s not supported. Mutable String methods are not supported in Opal.";return K(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function M(g){var y=M.$$s==null?this:M.$$s;return g==null&&(g=F),K(y,"define_method",[g],function(w){return z(arguments),q.$raise(X("NotImplementedError"),N["$%"](g))},-1)},{$$s:B})}("::",null),function(C){var P=ee(C,"Kernel"),B="Object tainting is not supported by Opal";return V(P,"$taint",function(){var M=this;return W(B),M}),V(P,"$untaint",function(){var M=this;return W(B),M}),V(P,"$tainted?",function(){return W(B),!1})}("::"),function(C,P){var B=D(C,P,"Module");return V(B,"$public",function(M){var g,y,A=this;return g=z(arguments),y=g,y.length===0?(A.$$module_function=!1,F):y.length===1?y[0]:y},-1),V(B,"$private_class_method",function(M){var g,y;return g=z(arguments),y=g,y.length===1?y[0]:y},-1),V(B,"$private_method_defined?",R(!1)),V(B,"$private_constant",function(M){return z(arguments),F},-1),Z(B,"nesting","public"),Z(B,"private","public"),Z(B,"protected","public"),Z(B,"protected_method_defined?","private_method_defined?"),Z(B,"public_class_method","private_class_method"),Z(B,"public_instance_method","instance_method"),Z(B,"public_instance_methods","instance_methods"),Z(B,"public_method_defined?","method_defined?")}("::",null),function(C){var P=ee(C,"Kernel");return V(P,"$private_methods",function(N){return z(arguments),[]},-1),Z(P,"protected_methods","private_methods"),Z(P,"private_instance_methods","private_methods"),Z(P,"protected_instance_methods","private_methods")}("::"),function(C,P){var B=ee(C,"Kernel"),N=[B].concat(P),M=e.$r(N);return V(B,"$eval",function(y){return z(arguments),q.$raise(X("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+M("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",ie),m(L,"$public",function(P){var B,N;return B=z(arguments),N=B,N.length===1?N[0]:N},-1),m(L,"$private",function(P){var B,N;return B=z(arguments),N=B,N.length===1?N[0]:N},-1)};Opal.modules["corelib/binding"]=function(e){var q=e.klass,D=e.truthy,K=e.def,z=e.slice,ee=e.send,V=e.to_a,R=e.Kernel,Z=e.return_ivar,m=e.eqeq;e.thrower;var L=e.module,ie=e.const_set,F=e.top,X=[],ne=e.nil,W=e.$$$;return e.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(E,C){var P=q(E,C,"Binding"),B=P.$$prototype;return B.jseval=B.scope_variables=ne,K(P,"$initialize",function(M,g,y,A){var w,p=this;return g==null&&(g=[]),A==null&&(A=ne),w=[M,g,y,A],p.jseval=w[0],p.scope_variables=w[1],p.receiver=w[2],p.source_location=w[3],D(typeof y!==void 0)?ne:y=p.$js_eval("self")},-2),K(P,"$js_eval",function(M){var g,y,A=this;return g=z(arguments),y=g,D(A.jseval)?ee(A.jseval,"call",V(y)):R.$raise("Evaluation on a Proc#binding is not supported")},-1),K(P,"$local_variable_get",function(M){var g=this;try{return g.$js_eval(M)}catch(y){if(e.rescue(y,[W("Exception")]))try{return R.$raise(W("NameError"),"local variable `"+M+"' is not defined for "+g.$inspect())}finally{e.pop_exception(y)}else throw y}}),K(P,"$local_variable_set",function(M,g){var y=this;return e.Binding.tmp_value=g,y.$js_eval(""+M+" = Opal.Binding.tmp_value"),delete e.Binding.tmp_value,g}),K(P,"$local_variables",Z("scope_variables")),K(P,"$local_variable_defined?",function(M){var g=this;return g.scope_variables["$include?"](M)}),K(P,"$eval",function(M,g,y){try{var A=this;return g==null&&(g=ne),y==null&&(y=ne),m(M,"self")?A.$receiver():R.$eval(M,A,g,y)}catch(w){if(w===e.t_eval_return)return w.$v;throw w}},-2),P.$attr_reader("receiver","source_location")}("::",null),function(E){var C=L(E,"Kernel");return K(C,"$binding",function(){return R.$raise("Opal doesn't support dynamic calls to binding")})}("::"),ie(X[0],"TOPLEVEL_BINDING",W("Binding").$new(function(E){return new Function("self","return "+E)(F)},[],F,["<main>",0]))};Opal.modules["corelib/irb"]=function(e){var q=e.module,D=e.truthy,K=e.Kernel,z=e.defs,ee=e.gvars,V=e.lambda,R=e.hash_rehash,Z=e.send,m=e.rb_plus,L=e.const_set,ie=e.klass,F=e.def,X=e.Opal,ne=e.range,W=e.eqeq,E=e.thrower,C=[],P=e.nil,B=e.$$$;e.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(N,M){var g=q(N,"Opal"),y=[g].concat(M);return function(A,w){var p=q(A,"IRB"),s=[p].concat(w),d=e.$r(s);return z(p,"$ensure_loaded",function(h){var _=P,o=P;if(D(e.loaded_features["$include?"](h)))return P;_=D(d("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":d("RUBY_ENGINE_VERSION"),o="https://cdn.opalrb.com/opal/"+_+"/"+h+".js";var Y;if(typeof XMLHttpRequest<"u"){var H=new XMLHttpRequest;H.open("GET",o,!1),H.send(""),Y=H.responseText}else K.$raise("You need to provision "+h+" yourself in this environment");return new Function("Opal",Y)(e),e.require(h),D(e.loaded_features["$include?"](h))?P:K.$raise("Could not load "+h+" for some reason")}),p.$singleton_class().$attr_accessor("output"),z(p,"$prepare_console",function x(){var h=x.$$p||P,_,o=this,Y=P,H=P;return ee.stdout==null&&(ee.stdout=P),ee.stderr==null&&(ee.stderr=P),ee.stdin==null&&(ee.stdin=P),x.$$p=null,function(){try{return o["$output="](""),Y=R(new Map([[ee.stdout,V(function(l){return l==null&&(l=P),ee.stdout=l})],[ee.stderr,V(function(l){return l==null&&(l=P),ee.stderr=l})]])),D(o["$browser?"]())&&(Z(Y,"each",[],function c(l,a){var n=c.$$s==null?this:c.$$s,t=P;return l==null&&(l=P),a==null&&(a=P),t=l.$dup(),t["$write_proc="](Z(n,"proc",[],function r($){var i=r.$$s==null?this:r.$$s;return $==null&&($=P),i["$output="](m(i.$output(),$)),i["$output="](i.$output().$split(`
`).$last(30).$join(`
`)),D($["$end_with?"](`
`))&&i["$output="](m(i.$output(),`
`)),l.$write_proc().$call($)},{$$s:n})),t["$tty="](!1),a.$call(t)},{$$s:o}),H=ee.stdin.$read_proc(),ee.stdin["$read_proc="](function(c){var l=prompt(o.$output());return l!==null?l+`
`:P})),e.yieldX(h,[])}finally{Z(Y,"each",[],function(l,a){return l==null&&(l=P),a==null&&(a=P),a.$call(l)}),_=[H],Z(ee.stdin,"read_proc=",_),_[_.length-1],_=[""],Z(o,"output=",_),_[_.length-1]}}()}),z(p,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),L(s[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(x,h){var _=ie(x,h,"Silencer"),o=_.$$prototype;return o.collector=o.stderr=P,F(_,"$initialize",function(){var H=this;return ee.stderr==null&&(ee.stderr=P),H.stderr=ee.stderr}),F(_,"$silence",function Y(){var H=Y.$$p||P,c=this;return Y.$$p=null,function(){try{return c.collector=B("StringIO").$new(),ee.stderr=c.collector,e.yieldX(H,[])}finally{ee.stderr=c.stderr}}()}),F(_,"$warnings",function(){var H=this;return H.collector.$string()})}(s[0],null)}(y[0],y)}(C[0],C),function(N,M,g){var y=ie(N,M,"Binding"),A=[y].concat(g),w=e.$r(A);return F(y,"$irb",function(){try{var s=E("return"),d=this,x=P;return B(X,"IRB").$ensure_loaded("opal-replutils"),x=B(B(X,"IRB"),"Silencer").$new(),Z(B(X,"IRB"),"prepare_console",[],function h(){var _=h.$$s==null?this:h.$$s;return function(){try{var o=E("break");return Z(_,"loop",[],function Y(){var H=Y.$$s==null?this:Y.$$s,c=P,l=P,a=P,n=P,t=P;H.$print(">> "),c=H.$gets(),D(c)||o.$throw(P,Y.$$is_lambda),l="",D(B(X,"IRB")["$browser?"]())&&H.$puts(c),D(c["$start_with?"]("ls "))?(l=c["$[]"](ne(3,-1,!1)),a="ls"):W(c,`ls
`)?(l="self",a="ls"):D(c["$start_with?"]("show "))?(l=c["$[]"](ne(5,-1,!1)),a="show"):(l=c,a="inspect"),n=P;do{try{Z(x,"silence",[],function(){return n=e.compile(l,{irb:!0})})}catch(r){if(e.rescue(r,[w("SyntaxError")])){t=r;try{if(D(B(B(X,"IRB"),"LINEBREAKS")["$include?"](t.$message()))){H.$print(".. "),c=H.$gets(),D(c)||s.$throw(P,Y.$$is_lambda),D(B(X,"IRB")["$browser?"]())&&H.$puts(c),l=m(l,c);continue}else D(x.$warnings()["$empty?"]())?H.$warn(t.$full_message()):H.$warn(x.$warnings())}finally{e.pop_exception(r)}}else throw r}break}while(!0);return W(a,"show")&&(H.$puts(n),s.$throw(P,Y.$$is_lambda)),H.$puts(B("REPLUtils").$eval_and_print(n,a,!1,H))},{$$s:_,$$ret:s})}catch(Y){if(Y===o)return Y.$v;throw Y}finally{o.is_orphan=!0}}()},{$$s:d})}catch(h){if(h===s)return h.$v;throw h}finally{s.is_orphan=!0}})}("::",null,C),e.irb=function(N){B("Binding").$new(N).$irb()},e.load_parser=function(){e.Opal.IRB.$ensure_loaded("opal-parser")},typeof e.eval>"u"&&(e.eval=function(N){return e.load_parser(),e.eval(N)}),typeof e.compile>"u"&&(e.compile=function(N,M){return e.load_parser(),e.compile(N,M)})};Opal.modules.opal=function(e){var q=e.Object;return e.nil,e.add_stubs("require,autoload"),q.$require("opal/base"),q.$require("opal/mini"),q.$require("corelib/kernel/format"),q.$require("corelib/string/encoding"),q.$autoload("Math","corelib/math"),q.$require("corelib/complex/base"),q.$autoload("Complex","corelib/complex"),q.$require("corelib/rational/base"),q.$autoload("Rational","corelib/rational"),q.$require("corelib/time"),q.$autoload("Struct","corelib/struct"),q.$autoload("Set","corelib/set"),q.$autoload("Dir","corelib/dir"),q.$autoload("File","corelib/file"),q.$require("corelib/process/base"),q.$autoload("Process","corelib/process"),q.$autoload("Random","corelib/random"),q.$require("corelib/unsupported"),q.$require("corelib/binding"),q.$require("corelib/irb")};Opal.modules["js/proxy"]=function(e){var q=e.module,D=e.truthy,K=e.def,z=e.klass,ee=e.const_set,V=e.slice,R=e.range,Z=e.send,m=e.to_a,L=e.gvars,ie=e.top,F=[],X=e.nil;return e.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),ie.$require("opal"),ie.$require("native"),function(ne,W){var E=q(ne,"JS"),C=[E].concat(W),P=e.$r(C);return function(B,N){var M=q(B,"Helpers"),g=[M].concat(N),y=e.$r(g);return K(M,"$wrap_result",function(w){return D(w&&typeof w.then=="function")?y("Promise").$new(w):D(typeof w=="object"&&w!==null)?y("Proxy").$new(w):w}),K(M,"$native_methods",function(){var w=this,p=X;return w.native_methods==null&&(w.native_methods=X),w.native_methods=function(){if(D(p=w.native_methods))return p;{let s=w.$to_n();const d=new Set;for(;s!==null;){for(const x of Reflect.ownKeys(s)){const h=x.toString(),_=w.$to_rb_name(h);typeof x!="symbol"&&h!==_&&d.add(_),d.add(h)}s=Object.getPrototypeOf(s)}return Array.from(d)}}()})}(C[0],C),function(B,N,M){var g=z(B,N,"Proxy"),y=[g].concat(M),A=e.$r(y);return g.$include(A("Enumerable")),g.$include(A("Helpers")),g.$attr_accessor("native"),ee(y[0],"IRREGULARS",["html","url","uri"]),K(g,"$initialize",function(p){var s=this;return s.native=s.$Native(p)}),K(g,"$method_missing",function w(p,s){var d=w.$$p||X,x,h,_,o=this,Y=X,H=X,c=X,l=X,a=X,n=X;return w.$$p=null,x=V(arguments,1),h=x,Y=o.$to_js_name(p),D(o["$existing_property?"](Y))||D(Y["$end_with?"]("="))||o.$raise(A("NoMethodError"),"undefined method `"+p+"` for "+o),D(Y["$end_with?"]("="))?(H=Y["$[]"](R(0,-2,!1)),_=[H,h.$first()],Z(o.$native(),"[]=",_),_[_.length-1]):(c=o.$native()["$[]"](Y),D(typeof c=="function")?(l=h.$dup(),D(d)&&(a=function(){let t=Array.prototype.slice.call(arguments);return Z(d,"call",[o.$class().$new(this)].concat(m(t)))},l["$<<"](a)),n=c.apply(o.$to_n(),l.$to_n()),o.$wrap_result(n)):D(typeof c=="object"&&c!==null)?o.$wrap_result(c):c)},-2),K(g,"$to_str",function(){var p=this;return p.$to_n().toString()}),K(g,"$respond_to_missing?",function(p,s){return!0},-2),K(g,"$each",function w(){var p=w.$$p||X,s=this,d=X;return w.$$p=null,D(s["$respond_to?"]("length"))?(d=s.$length(),Z(e.Range.$new(0,d,!0),"each",[],function x(h){var _=x.$$s==null?this:x.$$s;return h==null&&(h=X),e.yield1(p,_["$[]"](h))},{$$s:s})):s.$enum_for("each")}),K(g,"$[]",function(p){var s=this,d=X;return d=s.$native()["$[]"](p),s.$wrap_result(d)}),K(g,"$[]=",function(p,s){var d=this;return d.$native()["$[]="](p,s),d.$wrap_result(d.$native())}),K(g,"$to_n",function(){var p=this;return p.$native().$to_n()}),K(g,"$length",function(){var p=this;return p.$native().$length()}),g.$private(),K(g,"$to_js_name",function(p){return Z(p.$to_s().$split("_").$map(),"with_index",[],function(d,x){return d==null&&(d=X),x==null&&(x=X),D(A("IRREGULARS")["$include?"](d.$gsub("=","").$downcase()))?d.$upcase():D(x["$zero?"]())?d:d.$capitalize()}).$join()}),K(g,"$to_rb_name",function(p){return Z(p.$to_s(),"gsub",[/([A-Z]+)/],function(){var d;return"_"+((d=L["~"])===X?X:d["$[]"](1)).$downcase()}).$sub(/^_/,"")}),K(g,"$existing_property?",function(p){var s=this;return p in s.$to_n()})}(C[0],null,C),function(B,N,M){var g=z(B,N,"Promise"),y=[g].concat(M),A=e.$r(y);return g.$include(A("Helpers")),K(g,"$then",function w(){var p=w.$$p||X,s,d=this,x=X;return w.$$p=null,x=function(h){var _=p.$call(d.$wrap_result(h));return _&&typeof _.then=="function"?_:_&&typeof _.to_n=="function"?_.to_n():_},s=[d.$to_n().then(x)],Z(d,"native=",s),s[s.length-1]}),K(g,"$catch",function w(){var p=w.$$p||X,s,d=this,x=X;return w.$$p=null,x=function(h){var _=p.$call(d.$wrap_result(h));return _&&typeof _.then=="function"?_:_&&typeof _.to_n=="function"?_.to_n():_},s=[d.$to_n().catch(x)],Z(d,"native=",s),s[s.length-1]})}(C[0],P("Proxy"),C)}(F[0],F)};Opal.modules["opal_stimulus/stimulus_controller"]=function(e){var q=e.klass,D=e.const_set,K=e.Opal,z=e.defs,ee=e.truthy,V=e.send,R=e.gvars,Z=e.return_val,m=e.thrower,L=e.rb_plus,ie=e.eqeqeq,F=e.def,X=e.top,ne=[],W=e.nil,E=e.$$$;return e.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),X.$require("opal"),X.$require("native"),X.$require("js/proxy"),function(C,P,B){var N=q(C,P,"StimulusController"),M=[N].concat(B),g=e.$r(M),y=N.$$prototype;return y.window=y.document=W,D(M[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),D(M[0],"DEFAULT_GETTERS",["element"]),z(N,"$inherited",function(w){return K.$bridge(w.$stimulus_controller(),w)}),z(N,"$stimulus_controller",function(){var w=this;return w.stimulus_controller==null&&(w.stimulus_controller=W),ee(w.stimulus_controller)||(w.stimulus_controller=class extends Controller{}),w.stimulus_controller}),z(N,"$stimulus_name",function(){var w=this;return w.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),z(N,"$method_added",function(w){var p=this;if(ee(g("DEFAULT_GETTERS")["$include?"](w)))return W;p.$stimulus_controller().prototype[w]=function(...s){try{var d=s.map(function(x){return x&&typeof x=="object"&&!x.$$class?e.JS.Proxy.$new(x):x});return this["$"+w].apply(this,d)}catch(x){console.error("Uncaught",x)}}}),z(N,"$to_ruby_name",function(w){return V(w.$to_s(),"gsub",[/([A-Z]+)/],function(){var s;return"_"+((s=R["~"])===W?W:s["$[]"](1)).$downcase()}).$sub(/^_/,"")}),z(N,"$register_all!",function(){try{var w=m("return"),p=this;return V(p.$subclasses(),"each",[],function s(d){return d==null&&(d=W),V(d,"define_method",["dummy"],Z(W)),ee(application.controllers["$include?"](d.$stimulus_name()))&&w.$throw(W,s.$$is_lambda),application.register(d.$stimulus_name(),d.$stimulus_controller())},{$$ret:w})}catch(s){if(s===w)return s.$v;throw s}finally{w.is_orphan=!0}}),z(N,"$targets=",function(w){var p=this;return w==null&&(w=[]),p.$stimulus_controller().targets=w,V(w,"each",[],function s(d){var x=s.$$s==null?this:s.$$s,h=W,_=W,o=W,Y=W,H=W,c=W;d==null&&(d=W),h=d.$to_s(),_=x.$to_ruby_name(d),V(x,"define_method",[L(_,"_target")],function(){return E(g("JS"),"Proxy").$new(this[L(h,"Target")])}),V(x,"define_method",[L(_,"_targets")],function(){return V(this[L(h,"Targets")],"map",[],function(n){return n==null&&(n=W),E(g("JS"),"Proxy").$new(n)})}),V(x,"define_method",[L(L("has_",_),"_target")],function(){return this[L(L("has",h.$capitalize()),"Target")]}),o=L(_,"_target_connected"),Y=L(h,"TargetConnected"),x.$stimulus_controller().prototype[Y]=function(){if(this["$respond_to?"]&&this["$respond_to?"](o))return this["$"+o]()},H=L(_,"_target_disconnected"),c=L(h,"TargetDisconnected"),x.$stimulus_controller().prototype[c]=function(){if(this["$respond_to?"]&&this["$respond_to?"](H))return this["$"+H]()}},{$$s:p})},-1),z(N,"$outlets=",function(w){var p=this;return w==null&&(w=[]),p.$stimulus_controller().outlets=w,V(w,"each",[],function s(d){var x=s.$$s==null?this:s.$$s,h=W,_=W,o=W,Y=W,H=W,c=W;d==null&&(d=W),h=d.$to_s(),_=x.$to_ruby_name(d),V(x,"define_method",[L(_,"_outlet")],function(){return this[L(h,"Outlet")]}),V(x,"define_method",[L(_,"_outlets")],function(){return this[L(h,"Outlets")]}),V(x,"define_method",[L(L("has_",_),"_outlet")],function(){return this[L(L("has",h.$capitalize()),"Outlet")]}),o=L(_,"_outlet_connected"),Y=L(h,"OutletConnected"),x.$stimulus_controller().prototype[Y]=function(){if(this["$respond_to?"]&&this["$respond_to?"](o))return this["$"+o]()},H=L(_,"_outlet_disconnected"),c=L(h,"OutletDisconnected"),x.$stimulus_controller().prototype[c]=function(){if(this["$respond_to?"]&&this["$respond_to?"](H))return this["$"+H]()}},{$$s:p})},-1),z(N,"$values=",function(w){var p=this,s=W;return w==null&&(w=new Map),s=new Map,V(w,"each",[],function d(x,h){var _=d.$$s==null?this:d.$$s,o=W,Y=W,H=W,c=W;x==null&&(x=W),h==null&&(h=W),x=_.$to_ruby_name(x),o=ie("string",Y=h)?String:ie("number",Y)?Number:ie("boolean",Y)?Boolean:ie("array",Y)?Array:ie("object",Y)?Object:_.$raise(g("ArgumentError"),"Unsupported value type: "+h+", please use :string, :number, :boolean, :array, or :object"),s["$[]="](x,o),_.$stimulus_controller().values=s.$to_n(),V(_,"define_method",[L(x,"_value")],function l(){var a=l.$$s==null?this:l.$$s;return a.$Native(this[L(x,"Value")])},{$$s:_}),V(_,"define_method",[L(x,"_value=")],function l(a){var n=l.$$s==null?this:l.$$s;return a==null&&(a=W),n.$Native(this[L(x,"Value")]=a)},{$$s:_}),V(_,"define_method",["has_"+x],function(){return this[L(L("has",x.$to_s().$capitalize()),"Value")]}),H=""+x+"_value_changed",c=""+x+"ValueChanged",_.$stimulus_controller().prototype[c]=function(l,a){if(h["$=="]("object")&&(l=JSON.stringify(l),a=JSON.stringify(a)),this["$respond_to?"]&&this["$respond_to?"](H))return this["$"+H](l,a)}},{$$s:p})},-1),z(N,"$classes=",function(w){var p=this;return w==null&&(w=[]),p.$stimulus_controller().classes=w,V(w,"each",[],function s(d){var x=s.$$s==null?this:s.$$s,h=W,_=W;return d==null&&(d=W),h=d.$to_s(),_=x.$to_ruby_name(d),V(x,"define_method",[""+_+"_class"],function(){return this[L(h,"Class")]}),V(x,"define_method",[""+_+"_classes"],function(){return this[L(h,"Classes")]}),V(x,"define_method",["has_"+_+"_class"],function(){return this[L(L("has",h.$capitalize()),"Class")]})},{$$s:p})},-1),F(N,"$element",function(){return E(g("JS"),"Proxy").$new(this.element)}),F(N,"$window",function(){var w=this,p=W;return R.$==null&&(R.$=W),w.window=ee(p=w.window)?p:E(g("JS"),"Proxy").$new(R.$.$window())}),F(N,"$document",function(){var w=this,p=W;return R.$==null&&(R.$=W),w.document=ee(p=w.document)?p:E(g("JS"),"Proxy").$new(R.$.$document())})}(ne[0],Controller,ne)};Opal.modules["opal_vite/concerns/v1/js_proxy_ex"]=function(e){var q=e.module,D=e.truthy,K=e.def,z=e.send,ee=e.klass,V=e.assign_ivar,R=e.return_ivar,Z=e.slice,m=e.range,L=e.eqeq,ie=e.lambda,F=e.to_a,X=e.eqeqeq,ne=e.rb_plus,W=e.defs,E=e.const_set,C=[],P=e.$r(C),B=e.nil,N=e.$$$;return e.add_stubs("new,to_n,nil?,respond_to?,times,<<,to_s,snake_to_camel,wrap_result,end_with?,[],!,==,call,map,===,length,enum_for,private,upcase,split,+,join,to_proc,test,js_array_to_ruby"),function(M,g){var y=q(M,"OpalVite"),A=[y].concat(g);return function(w,p){var s=q(w,"Concerns"),d=[s].concat(p);return function(x,h){var _=q(x,"V1"),o=[_].concat(h);return function(Y,H){var c=q(Y,"JsProxyEx"),l=[c].concat(H),a=e.$r(l);return K(c,"$local_storage",function(){var t=this,r=B;return t.local_storage==null&&(t.local_storage=B),t.local_storage=D(r=t.local_storage)?r:a("JsObject").$new(localStorage)}),K(c,"$session_storage",function(){var t=this,r=B;return t.session_storage==null&&(t.session_storage=B),t.session_storage=D(r=t.session_storage)?r:a("JsObject").$new(sessionStorage)}),K(c,"$js_json",function(){var t=this,r=B;return t.js_json==null&&(t.js_json=B),t.js_json=D(r=t.js_json)?r:a("JsonWrapper").$new()}),K(c,"$js_date",function(){return a("DateWrapper")}),K(c,"$js_console",function(){var t=this,r=B;return t.js_console==null&&(t.js_console=B),t.js_console=D(r=t.js_console)?r:a("JsObject").$new(console)}),K(c,"$new_event",function(t,r){return r==null&&(r=new Map),a("JsObject").$new(new Event(t,r.$to_n()))},-2),K(c,"$new_custom_event",function(t,r){return r==null&&(r=new Map),a("JsObject").$new(new CustomEvent(t,{detail:r.$to_n()}))},-2),K(c,"$new_url",function(t){return a("JsObject").$new(new URL(t))}),K(c,"$new_regexp",function(t,r){return r==null&&(r=""),a("RegExpWrapper").$new(t,r)},-2),K(c,"$new_date",function(t){return t==null&&(t=B),D(t)?a("JsObject").$new(new Date(t)):a("JsObject").$new(new Date)},-1),K(c,"$date_now",function(){return Date.now()}),K(c,"$wrap_js",function(t){var r=B;return D(t["$nil?"]())?B:(r=D(t["$respond_to?"]("to_n"))?t.$to_n():t,a("JsObject").$new(r))}),K(c,"$js_array_to_ruby",function(t){var r=B,$=B;return r=[],$=t.length,z($,"times",[],function(u){var v=B;return u==null&&(u=B),v=t[u],r["$<<"](a("JsObject").$new(v))}),r}),K(c,"$new_js_array",function(){return a("JsObject").$new([])}),function(n,t,r){var $=ee(n,t,"JsObject"),i=[$].concat(r),u=e.$r(i),v=$.$$prototype;return v.native=B,K($,"$initialize",V("native")),K($,"$to_n",R("native")),K($,"$[]",function(T){var S=this,G=B,O=B,ae=B;return G=T.$to_s(),O=S.$snake_to_camel(G),ae=S.native[O],S.$wrap_result(ae)}),K($,"$[]=",function(T,S){var G=this,O=B,ae=B,le=B;return O=T.$to_s(),ae=G.$snake_to_camel(O),le=D(S["$respond_to?"]("to_n"))?S.$to_n():S,G.native[ae]=le}),K($,"$method_missing",function k(T,S){var G=k.$$p||B,O,ae,le=this,ce=B,de=B,he=B,ve=B,me=B,be=B,$e=B,I=B,j=B,J=B;return k.$$p=null,O=Z(arguments,1),ae=O,ce=T.$to_s(),D(ce["$end_with?"]("="))?(de=ce["$[]"](m(0,-2,!1)),he=le.$snake_to_camel(de),ve=ae["$[]"](0),me=D(ve["$respond_to?"]("to_n"))?ve.$to_n():ve,le.native[he]=me,ve):D(ce["$end_with?"]("?"))?(de=ce["$[]"](m(0,-2,!1)),he=le.$snake_to_camel(de),le.native[he]["$!"]()["$!"]()):(he=le.$snake_to_camel(ce),be=typeof le.native[he]=="function",D(be)?L(he,"addEventListener")&&D(G)?($e=ie(function(te){return te==null&&(te=B),G.$call(u("JsObject").$new(te))}),le.native.addEventListener(ae["$[]"](0),$e),B):(I=z(ae,"map",[],function(te){return te==null&&(te=B),D(te["$respond_to?"]("to_n"))?te.$to_n():te}),D(G)&&($e=ie(function Q(te){var se,oe,fe=Q.$$s==null?this:Q.$$s,f=B;return se=Z(arguments),oe=se,f=z(oe,"map",[],function b(U){var re=b.$$s==null?this:b.$$s;return U==null&&(U=B),re.$wrap_result(U)},{$$s:fe}),z(G,"call",F(f))},{$$arity:-1,$$s:le}),I["$<<"]($e)),j=X(0,J=I.$length())?le.native[he]():X(1,J)?le.native[he](I["$[]"](0)):X(2,J)?le.native[he](I["$[]"](0),I["$[]"](1)):X(3,J)?le.native[he](I["$[]"](0),I["$[]"](1),I["$[]"](2)):le.native[he].apply(le.native,I),le.$wrap_result(j)):(j=le.native[he],le.$wrap_result(j)))},-2),K($,"$respond_to_missing?",function(T,S){return!0},-2),K($,"$each",function k(){var T=k.$$p||B,S=this,G=B;return k.$$p=null,D(T)?(G=S.native.length,D(G)&&z(G,"times",[],function O(ae){var le=O.$$s==null?this:O.$$s,ce=B;return le.native==null&&(le.native=B),ae==null&&(ae=B),ce=le.native[ae],T.$call(le.$wrap_result(ce))},{$$s:S}),S):S.$enum_for("each")}),K($,"$length",function(){var T=this;return T.native.length}),K($,"$size",function(){var T=this;return T.$length()}),K($,"$nil?",function(){var T=this;return T.native==null}),K($,"$exists?",function(){var T=this;return T["$nil?"]()["$!"]()}),K($,"$to_s",function(){var T=this;return String(T.native)}),K($,"$inspect",function(){var T=this;return"#<JsObject: "+T.$to_s()+">"}),$.$private(),K($,"$snake_to_camel",function(T){var S=B;return L(T,T.$upcase())||(S=T.$split("_"),L(S.$length(),1))?T:ne(S["$[]"](0),z(S["$[]"](m(1,-1,!1)),"map",[],"capitalize".$to_proc()).$join())}),K($,"$wrap_result",function(T){return D(T==null)?B:D(typeof T=="number")||D(typeof T=="string")||D(typeof T=="boolean")?T:u("JsObject").$new(T)})}(l[0],null,l),function(n,t,r){var $=ee(n,t,"JsonWrapper"),i=[$].concat(r),u=e.$r(i);return K($,"$parse",function(k){var T=B;return T=JSON.parse(k),u("JsObject").$new(T)}),K($,"$stringify",function(k){var T=B;return T=D(k["$respond_to?"]("to_n"))?k.$to_n():k,JSON.stringify(T)})}(l[0],null,l),function(n,t,r){var $=ee(n,t,"RegExpWrapper"),i=[$].concat(r),u=e.$r(i),v=$.$$prototype;return v.native=B,K($,"$initialize",function(T,S){var G=this;return S==null&&(S=""),G.native=new RegExp(T,S)},-2),K($,"$to_n",R("native")),K($,"$test",function(T){var S=this;return S.native.test(T)}),K($,"$match",function(T){var S=this,G=B;return G=T.match(S.native),D(G===null)?B:u("JsObject").$new(G)}),K($,"$=~",function(T){var S=this;return S.$test(T)})}(l[0],null,l),function(n,t){var r=q(n,"DateWrapper"),$=[r].concat(t),i=e.$r($);return W(r,"$now",function(){return Date.now()}),W(r,"$new",function(v){return v==null&&(v=B),D(v)?i("JsObject").$new(new Date(v)):i("JsObject").$new(new Date)},-1),W(r,"$parse",function(v){return Date.parse(v)})}(l[0],l),K(c,"$has_target?",function(t){var r=this,$=B,i=B;return $=r.$snake_to_camel(t.$to_s()),i="has"+$["$[]"](0).$upcase()+$["$[]"](m(1,-1,!1))+"Target",this[i]}),K(c,"$target",function(t){var r=this,$=B,i=B,u=B;return $=r.$snake_to_camel(t.$to_s()),i=""+$+"Target",u=this[i],a("JsObject").$new(u)}),K(c,"$targets",function(t){var r=this,$=B,i=B,u=B;return $=r.$snake_to_camel(t.$to_s()),i=""+$+"Targets",u=this[i],r.$js_array_to_ruby(u)}),K(c,"$set_target_text",function(t,r){var $=this,i=B,u=B,v=B;i=$.$snake_to_camel(t.$to_s()),u="has"+i["$[]"](0).$upcase()+i["$[]"](m(1,-1,!1))+"Target",v=""+i+"Target",this[u]&&(this[v].textContent=r)}),K(c,"$set_target_class",function(t,r){var $=this,i=B,u=B,v=B;i=$.$snake_to_camel(t.$to_s()),u="has"+i["$[]"](0).$upcase()+i["$[]"](m(1,-1,!1))+"Target",v=""+i+"Target",this[u]&&(this[v].className=r)}),K(c,"$set_target_disabled",function(t,r){var $=this,i=B,u=B,v=B;i=$.$snake_to_camel(t.$to_s()),u="has"+i["$[]"](0).$upcase()+i["$[]"](m(1,-1,!1))+"Target",v=""+i+"Target",this[u]&&(this[v].disabled=r)}),c.$private(),K(c,"$snake_to_camel",function(t){var r=B;return L(t,t.$upcase())||(r=t.$to_s().$split("_"),L(r.$length(),1))?t:ne(r["$[]"](0),z(r["$[]"](m(1,-1,!1)),"map",[],"capitalize".$to_proc()).$join())})}(o[0],o)}(d[0],d)}(A[0],A)}(C[0],C),E(C[0],"JsProxyEx",N(N(N(P("OpalVite"),"Concerns"),"V1"),"JsProxyEx"))};Opal.modules["opal_vite/concerns/v1/toastable"]=function(e){var q=e.module,D=e.def,K=e.const_set,z=[],ee=e.$r(z);e.nil;var V=e.$$$;return e.add_stubs("dispatch_toast"),function(R,Z){var m=q(R,"OpalVite"),L=[m].concat(Z);return function(ie,F){var X=q(ie,"Concerns"),ne=[X].concat(F);return function(W,E){var C=q(W,"V1"),P=[C].concat(E);return function(B){var N=q(B,"Toastable");return D(N,"$dispatch_toast",function(g,y){y==null&&(y="info");const A=new CustomEvent("show-toast",{detail:{message:g,type:y}});window.dispatchEvent(A)},-2),D(N,"$show_success",function(g){var y=this;return y.$dispatch_toast(g,"success")}),D(N,"$show_error",function(g){var y=this;return y.$dispatch_toast(g,"error")}),D(N,"$show_warning",function(g){var y=this;return y.$dispatch_toast(g,"warning")}),D(N,"$show_info",function(g){var y=this;return y.$dispatch_toast(g,"info")})}(P[0])}(ne[0],ne)}(L[0],L)}(z[0],z),K(z[0],"Toastable",V(V(V(ee("OpalVite"),"Concerns"),"V1"),"Toastable"))};Opal.modules["opal_vite/concerns/v1/dom_helpers"]=function(e){var q=e.module,D=e.truthy,K=e.def,z=e.const_set,ee=[],V=e.$r(ee),R=e.nil,Z=e.$$$;return e.add_stubs("window,to_n,query_selector,element,query_selector_all,add,class_list,remove,toggle,contains,set_timeout,!,nil?,element_exists?,set_style"),function(m,L){var ie=q(m,"OpalVite"),F=[ie].concat(L);return function(X,ne){var W=q(X,"Concerns"),E=[W].concat(ne);return function(C,P){var B=q(C,"V1"),N=[B].concat(P);return function(M){var g=q(M,"DomHelpers");return K(g,"$dispatch_custom_event",function(A,w,p){var s=this,d=R;w==null&&(w=new Map),p==null&&(p=R),p=D(d=p)?d:s.$window();const x=new CustomEvent(A,{detail:w.$to_n()});p.$to_n().dispatchEvent(x)},-2),K(g,"$create_event",function(A,w){return w==null&&(w=new Map([["bubbles",!0]])),new Event(A,w.$to_n())},-2),K(g,"$query",function(A){var w=this;return w.$element().$query_selector(A)}),K(g,"$query_all",function(A){var w=this;return w.$element().$query_selector_all(A)}),K(g,"$add_class",function(A,w){return A.$class_list().$add(w)}),K(g,"$remove_class",function(A,w){return A.$class_list().$remove(w)}),K(g,"$toggle_class",function(A,w){return A.$class_list().$toggle(w)}),K(g,"$has_class?",function(A,w){return A.$class_list().$contains(w)}),K(g,"$set_timeout",function y(A){var w=y.$$p||R,p=this;return y.$$p=null,p.$window().$set_timeout(w,A)}),K(g,"$element_exists?",function(A){var w=R;return D(w=A["$nil?"]()["$!"]())?A.$to_n():w}),K(g,"$set_style",function(A,w,p){var s=this;return D(s["$element_exists?"](A))?A.$to_n().style[w]=p:R}),K(g,"$get_style",function(A,w){var p=this;return D(p["$element_exists?"](A))?A.$to_n().style[w]:R}),K(g,"$show_element",function(A){var w=this;return w.$set_style(A,"display","block")}),K(g,"$hide_element",function(A){var w=this;return w.$set_style(A,"display","none")})}(N[0])}(E[0],E)}(F[0],F)}(ee[0],ee),z(ee[0],"DomHelpers",Z(Z(Z(V("OpalVite"),"Concerns"),"V1"),"DomHelpers"))};Opal.modules["opal_vite/concerns/v1/storable"]=function(e){var q=e.module,D=e.truthy,K=e.def,z=e.const_set,ee=[],V=e.$r(ee),R=e.nil,Z=e.$$$;return e.add_stubs("to_n"),function(m,L){var ie=q(m,"OpalVite"),F=[ie].concat(L);return function(X,ne){var W=q(X,"Concerns"),E=[W].concat(ne);return function(C,P){var B=q(C,"V1"),N=[B].concat(P);return function(M,g){var y=q(M,"Storable"),A=[y].concat(g),w=e.$r(A);return K(y,"$storage_get",function(s){var d=R;if(d=localStorage.getItem(s),!D(d))return R;try{return JSON.parse(d)}catch(x){if(e.rescue(x,[w("StandardError")]))try{return R}finally{e.pop_exception(x)}else throw x}}),K(y,"$storage_set",function(s,d){var x=R;return x=JSON.stringify(d.$to_n()),localStorage.setItem(s,x)}),K(y,"$storage_remove",function(s){return localStorage.removeItem(s)})}(N[0],N)}(E[0],E)}(F[0],F)}(ee[0],ee),z(ee[0],"Storable",Z(Z(Z(V("OpalVite"),"Concerns"),"V1"),"Storable"))};Opal.modules["controllers/pwa_controller"]=function(e){var q=e.klass,D=e.const_set,K=e.send2,z=e.find_super,ee=e.def,V=e.truthy,R=e.send,Z=e.rb_plus,m=e.top,L=[],ie=e.$r(L),F=e.nil;return e.add_stubs("require,include,targets=,puts,setup_install_listeners,check_install_status,check_service_worker,load_notes,update_cache_count,js_prop,js_call_on,js_get,js_then,console_log,js_set_prop,has_target?,hide_target,prevent_default,target_value,js_timestamp,js_iso_date,unshift,save_notes,render_notes,target_set_value,event_data_int,reject!,==,[],js_global,update_last_update_time,js_map,private,js_define_method,set_target_style,target_set_text,set_install_status_class,on_window_event,js_call,get_target,js_set,set_sw_status_class,on_element_event,storage_get_json,js_each,<<,each,storage_set_json,empty?,target_set_html,join,map,to_s,+,js_length"),m.$require("opal_stimulus/stimulus_controller"),function(X,ne,W){var E=q(X,ne,"PwaController"),C=[E].concat(W),P=e.$r(C),B=E.$$prototype;return B.notes=F,E.$include(P("StimulusHelpers")),E["$targets="](["installPrompt","swStatus","installStatus","lastUpdate","noteInput","notesList","cacheCount"]),D(C[0],"NOTES_KEY","pwa-notes"),ee(E,"$initialize",function N(){var M=N.$$p||F,g=this;return N.$$p=null,K(g,z(g,"initialize",N,!1,!0),"initialize",[],M),g.notes=[]}),ee(E,"$connect",function(){var M=this;return M.$puts("PwaController connected!"),M.$setup_install_listeners(),M.$check_install_status(),M.$check_service_worker(),M.$load_notes(),M.$update_cache_count()}),ee(E,"$install",function(){var M=this,g=F,y=F;return g=M.$js_prop("deferredPrompt"),V(g)?(M.$js_call_on(g,"prompt"),y=M.$js_get(g,"userChoice"),R(M,"js_then",[y],function A(w){var p=A.$$s==null?this:A.$$s,s=F;return w==null&&(w=F),s=p.$js_get(w,"outcome"),V(s==="accepted")?p.$console_log("User accepted the install prompt"):p.$console_log("User dismissed the install prompt")},{$$s:M}),M.$js_set_prop("deferredPrompt",F),V(M["$has_target?"]("installPrompt"))?M.$hide_target("installPrompt"):F):(alert("Installation prompt not available. Try using browser menu to install."),F)}),ee(E,"$dismiss_install_prompt",function(){var M=this;return V(M["$has_target?"]("installPrompt"))?M.$hide_target("installPrompt"):F}),ee(E,"$add_note",function(M){var g=this,y=F,A=F;return M.$prevent_default(),!V(g["$has_target?"]("noteInput"))||(y=g.$target_value("noteInput"),y=y.trim(),V(y===""))?F:(A=new Map([["id",g.$js_timestamp()],["text",y],["createdAt",g.$js_iso_date()],["synced",navigator.onLine]]),g.notes.$unshift(A),g.$save_notes(),g.$render_notes(),g.$target_set_value("noteInput",""))}),ee(E,"$delete_note",function(M){var g=this,y=F;return y=g.$event_data_int("note-id"),R(g.notes,"reject!",[],function(w){return w==null&&(w=F),w["$[]"]("id")["$=="](y)}),g.$save_notes(),g.$render_notes()}),ee(E,"$update_cache",function(){var M=this,g=F,y=F,A=F;return V("serviceWorker"in g)?(g=M.$js_global("navigator"),y=M.$js_get(g,"serviceWorker"),A=M.$js_call_on(y,"getRegistration"),R(M,"js_then",[A],function w(p){var s=w.$$s==null?this:w.$$s,d=F;return p==null&&(p=F),V(p)?(d=s.$js_call_on(p,"update"),R(s,"js_then",[d],function x(){var h=x.$$s==null?this:x.$$s;return h.$update_last_update_time(),alert("Cache updated! Refresh to see changes.")},{$$s:s})):F},{$$s:M})):F}),ee(E,"$clear_cache",function(){var M=this,g=F,y=F;return V("caches"in window)?(g=M.$js_global("caches"),y=M.$js_call_on(g,"keys"),R(M,"js_then",[y],function A(w){var p=A.$$s==null?this:A.$$s,s=F,d=F;return w==null&&(w=F),s=R(p,"js_map",[w],function x(h){var _=x.$$s==null?this:x.$$s;return h==null&&(h=F),_.$js_call_on(g,"delete",h)},{$$s:p}),d=p.$js_call_on(p.$js_global("Promise"),"all",s),R(p,"js_then",[d],function x(){var h=x.$$s==null?this:x.$$s;return h.$update_cache_count(),alert("Cache cleared! Refresh to rebuild cache.")},{$$s:p})},{$$s:M})):F}),E.$private(),ee(E,"$setup_install_listeners",function(){var M=this;return R(M,"js_define_method",["handleBeforeInstallPrompt"],function g(y){var A=g.$$s==null?this:g.$$s;return y==null&&(y=F),y.preventDefault(),A.$js_set_prop("deferredPrompt",y),V(A["$has_target?"]("installPrompt"))?A.$set_target_style("installPrompt","display","block"):F},{$$s:M}),R(M,"js_define_method",["handleAppInstalled"],function g(){var y=g.$$s==null?this:g.$$s;return V(y["$has_target?"]("installPrompt"))&&y.$hide_target("installPrompt"),V(y["$has_target?"]("installStatus"))?(y.$target_set_text("installStatus","Installed "),y.$set_install_status_class("status-value success")):F},{$$s:M}),R(M,"on_window_event",["beforeinstallprompt"],function g(y){var A=g.$$s==null?this:g.$$s;return y==null&&(y=F),A.$js_call("handleBeforeInstallPrompt",y)},{$$s:M}),R(M,"on_window_event",["appinstalled"],function g(){var y=g.$$s==null?this:g.$$s;return y.$js_call("handleAppInstalled")},{$$s:M})}),ee(E,"$set_install_status_class",function(M){var g=this,y=F;return V(g["$has_target?"]("installStatus"))?(y=g.$get_target("installStatus"),g.$js_set(y,"className",M)):F}),ee(E,"$check_install_status",function(){var M=this,g=F;return g=window.matchMedia("(display-mode: standalone)").matches,V(g)?(M.$target_set_text("installStatus","Installed "),M.$set_install_status_class("status-value success")):(M.$target_set_text("installStatus","Not installed"),M.$set_install_status_class("status-value"))}),ee(E,"$check_service_worker",function(){var M=this,g=F,y=F,A=F;return V(M["$has_target?"]("swStatus"))?V("serviceWorker"in g)?(R(M,"js_define_method",["handleSwUpdate"],function w(){var p=w.$$s==null?this:w.$$s;return p.$update_last_update_time()},{$$s:M}),g=M.$js_global("navigator"),y=M.$js_get(g,"serviceWorker"),A=M.$js_call_on(y,"getRegistration"),R(M,"js_then",[A],function w(p){var s=w.$$s==null?this:w.$$s;return p==null&&(p=F),V(p)?(s.$target_set_text("swStatus","Active "),s.$set_sw_status_class("status-value success"),R(s,"on_element_event",[p,"updatefound"],function d(){var x=d.$$s==null?this:d.$$s,h=F;return h=x.$js_get(p,"installing"),R(x,"on_element_event",[h,"statechange"],function _(){var o=_.$$s==null?this:_.$$s,Y=F;return Y=o.$js_get(h,"state"),V(Y==="activated")?o.$js_call("handleSwUpdate"):F},{$$s:x})},{$$s:s})):(s.$target_set_text("swStatus","Not registered"),s.$set_sw_status_class("status-value warning"))},{$$s:M})):(M.$target_set_text("swStatus","Not supported"),M.$set_sw_status_class("status-value error"),F):F}),ee(E,"$set_sw_status_class",function(M){var g=this,y=F;return V(g["$has_target?"]("swStatus"))?(y=g.$get_target("swStatus"),g.$js_set(y,"className",M)):F}),ee(E,"$load_notes",function(){var M=this,g=F,y=F;if(g=M.$storage_get_json(P("NOTES_KEY")),!V(g))return F;try{return M.notes=[],R(M,"js_each",[g],function A(w){var p=A.$$s==null?this:A.$$s;return p.notes==null&&(p.notes=F),w==null&&(w=F),p.notes["$<<"](new Map([["id",p.$js_get(w,"id")],["text",p.$js_get(w,"text")],["createdAt",p.$js_get(w,"createdAt")],["synced",p.$js_get(w,"synced")]]))},{$$s:M}),M.$render_notes()}catch(A){if(e.rescue(A,[P("StandardError")])){y=A;try{return M.$puts("Error loading notes: "+y)}finally{e.pop_exception(A)}}else throw A}}),ee(E,"$save_notes",function(){var M=this,g=F,y=F;try{return g=[],R(M.notes,"each",[],function(w){w==null&&(w=F),g.push({id:w["$[]"]("id"),text:w["$[]"]("text"),createdAt:w["$[]"]("createdAt"),synced:w["$[]"]("synced")})}),M.$storage_set_json(P("NOTES_KEY"),g)}catch(A){if(e.rescue(A,[P("StandardError")])){y=A;try{return M.$puts("Error saving notes: "+y)}finally{e.pop_exception(A)}}else throw A}}),ee(E,"$render_notes",function(){var M=this,g=F;return V(M["$has_target?"]("notesList"))?V(M.notes["$empty?"]())?(M.$target_set_html("notesList",'<p class="empty-state">No notes yet. Add one above!</p>'),F):(g=R(M.notes,"map",[],function(A){var w=F,p=F;return A==null&&(A=F),w=new Date(A["$[]"]("createdAt")).toLocaleString(),p=V(A["$[]"]("synced"))?"":"",'<div class="note-item"><div class="note-content">'+('<p class="note-text">'+A["$[]"]("text")+"</p>")+('<small class="note-meta">'+p+" "+w+"</small>")+"</div>"+('<button class="btn-delete" data-action="click->pwa#delete_note" data-note-id="'+A["$[]"]("id")+'"></button>')+"</div>"}).$join(),M.$target_set_html("notesList",g)):F}),ee(E,"$update_last_update_time",function(){var M=this;return M.$target_set_text("lastUpdate",new Date().toLocaleTimeString())}),ee(E,"$update_cache_count",function(){var M=this,g=F,y=F;return V(M["$has_target?"]("cacheCount"))?V("caches"in window)?(R(M,"js_define_method",["updateCacheCountValue"],function A(w){var p=A.$$s==null?this:A.$$s;return w==null&&(w=F),p.$target_set_text("cacheCount",w.$to_s())},{$$s:M}),g=M.$js_global("caches"),y=M.$js_call_on(g,"keys"),R(M,"js_then",[y],function A(w){var p=A.$$s==null?this:A.$$s,s=F,d=F;return w==null&&(w=F),p.$js_set_prop("totalEntries",0),s=R(p,"js_map",[w],function x(h){var _=x.$$s==null?this:x.$$s,o=F;return h==null&&(h=F),o=_.$js_call_on(g,"open",h),R(_,"js_then",[o],function Y(H){var c=Y.$$s==null?this:Y.$$s,l=F;return H==null&&(H=F),l=c.$js_call_on(H,"keys"),R(c,"js_then",[l],function a(n){var t=a.$$s==null?this:a.$$s,r=F,$=F;return n==null&&(n=F),r=V($=t.$js_prop("totalEntries"))?$:0,t.$js_set_prop("totalEntries",Z(r,t.$js_length(n)))},{$$s:c})},{$$s:_})},{$$s:p}),d=p.$js_call_on(p.$js_global("Promise"),"all",s),R(p,"js_then",[d],function x(){var h=x.$$s==null?this:x.$$s;return h.$js_call("updateCacheCountValue",h.$js_prop("totalEntries"))},{$$s:p})},{$$s:M})):(M.$target_set_text("cacheCount","N/A"),F):F})}(L[0],ie("StimulusController"),L)};Opal.modules["controllers/offline_detector_controller"]=function(e){var q=e.klass,D=e.def,K=e.send,z=e.truthy,ee=e.top,V=[],R=e.$r(V),Z=e.nil;return e.add_stubs("require,include,targets=,update_status,setup_event_listeners,private,js_define_method,on_window_event,js_call,has_target?,get_target,js_get,js_set,set_target_text,set_target_class"),ee.$require("opal_stimulus/stimulus_controller"),function(m,L,ie){var F=q(m,L,"OfflineDetectorController"),X=[F].concat(ie),ne=e.$r(X);return F.$include(ne("StimulusHelpers")),F["$targets="](["banner","statusText","onlineStatus"]),D(F,"$connect",function(){var E=this;return E.$update_status(),E.$setup_event_listeners()}),F.$private(),D(F,"$setup_event_listeners",function(){var E=this;return K(E,"js_define_method",["handleOnlineStatus"],function C(){var P=C.$$s==null?this:C.$$s;return P.$update_status()},{$$s:E}),K(E,"on_window_event",["online"],function C(){var P=C.$$s==null?this:C.$$s;return P.$js_call("handleOnlineStatus")},{$$s:E}),K(E,"on_window_event",["offline"],function C(){var P=C.$$s==null?this:C.$$s;return P.$js_call("handleOnlineStatus")},{$$s:E})}),D(F,"$update_status",function(){var E=this,C=Z,P=Z,B=Z,N=Z,M=Z,g=Z,y=Z;return C=navigator.onLine,P=z(C)?"online":"offline",z(E["$has_target?"]("banner"))&&(B=E.$get_target("banner"),N=E.$js_get(B,"dataset"),E.$js_set(N,"status",P)),M=z(C)?" You are online":" You are offline",E.$set_target_text("status_text",M),g=z(C)?"Online":"Offline",y=z(C)?"status-value success":"status-value warning",E.$set_target_text("online_status",g),E.$set_target_class("online_status",y)})}(V[0],R("StimulusController"),V)};Opal.queue(function(e){var q=e.top,D=[],K=e.$r(D);return e.nil,e.add_stubs("require,puts,register_all!"),q.$require("native"),q.$require("opal_stimulus/stimulus_controller"),q.$require("opal_vite/concerns/v1/js_proxy_ex"),q.$require("opal_vite/concerns/v1/toastable"),q.$require("opal_vite/concerns/v1/dom_helpers"),q.$require("opal_vite/concerns/v1/storable"),q.$require("controllers/pwa_controller"),q.$require("controllers/offline_detector_controller"),q.$puts("PWA Example - Opal + Stimulus"),q.$puts("Ruby version: "+K("RUBY_VERSION")),K("StimulusController")["$register_all!"](),q.$puts("All controllers registered!")});
