Opal.modules.native=function(n){var z=n.hash_put,w=n.module,D=n.defs,x=n.slice,O=n.truthy,Z=n.send,T=n.Kernel,J=n.extract_kwargs,v=n.ensure_kwargs,L=n.hash_get,$e=n.range,W=n.to_a,Y=n.def,ee=n.return_ivar,B=n.alias,b=n.klass,h=n.rb_minus,S=n.return_val,j=n.send2,k=n.find_super,F=n.eqeqeq,p=n.rb_ge,A=n.return_self,P=n.gvars,I=n.top,q=[],u=n.$r(q),d=n.nil,M=n.$$$;return n.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(g,c){var l=w(g,"Native"),E=[l].concat(c),G=n.$r(E);return D(l,"$is_a?",function(s,$){var r=this;try{return s instanceof r.$try_convert($)}catch{return!1}}),D(l,"$try_convert",function(s,$){var r=this;return $==null&&($=d),r["$native?"](s)?s:s["$respond_to?"]("to_n")?s.$to_n():$},-2),D(l,"$convert",function(s){var $=this;if($["$native?"](s))return s;if(s["$respond_to?"]("to_n"))return s.$to_n();$.$raise(G("ArgumentError"),""+s.$inspect()+" isn't native")}),D(l,"$call",function _(s,$,r){var e=_.$$p||d,t,i,a=this;_.$$p=null,t=x(arguments,2),i=t;var o=s[$];if(o instanceof Function){for(var m=new Array(i.length),N=0,K=i.length;N<K;N++){var C=i[N],V=a.$try_convert(C);m[N]=V===d?C:V}return e!==d&&m.push(e),a.$Native(o.apply(s,m))}else return a.$Native(o)},-3),D(l,"$proc",function _(){var s=_.$$p||d,$=this;return _.$$p=null,O(s)||$.$raise(G("LocalJumpError"),"no block given"),Z(T,"proc",[],function r(e){var t,i,a=r.$$s==null?this:r.$$s,o=d;if(t=x(arguments),i=t,Z(i,"map!",[],function N(K){var C=N.$$s==null?this:N.$$s;return K==null&&(K=d),C.$Native(K)},{$$s:a}),o=a.$Native(this),this===n.global)return s.apply(a,i);var m=s.$$s;s.$$s=null;try{return s.apply(o,i)}finally{s.$$s=m}},{$$arity:-1,$$s:$})}),function(_,s){var $=w(_,"Helpers"),r=[$].concat(s),e=n.$r(r);return Y($,"$alias_native",function t(i,a,o){var m,N,K,C;t.$$p;var V=this;return t.$$p=null,m=x(arguments,1),N=J(m),N=v(N),m.length>0&&(K=m.shift()),K==null&&(K=i),C=L(N,"as"),C==null&&(C=d),O(K["$end_with?"]("="))?Z(V,"define_method",[i],function re(ae){var le=re.$$s==null?this:re.$$s;return le.native==null&&(le.native=d),ae==null&&(ae=d),le.native[K["$[]"]($e(0,-2,!1))]=e("Native").$convert(ae),ae},{$$s:V}):O(C)?Z(V,"define_method",[i],function re(ae){var le=re.$$p||d,_e,de,ge=re.$$s==null?this:re.$$s,ve=d;return ge.native==null&&(ge.native=d),re.$$p=null,_e=x(arguments),de=_e,ve=Z(e("Native"),"call",[ge.native,K].concat(W(de)),le.$to_proc()),O(ve)?C.$new(ve.$to_n()):d},{$$arity:-1,$$s:V}):Z(V,"define_method",[i],function re(ae){var le=re.$$p||d,_e,de,ge=re.$$s==null?this:re.$$s;return ge.native==null&&(ge.native=d),re.$$p=null,_e=x(arguments),de=_e,Z(e("Native"),"call",[ge.native,K].concat(W(de)),le.$to_proc())},{$$arity:-1,$$s:V})},-2),Y($,"$native_reader",function(i){var a,o,m=this;return a=x(arguments),o=a,Z(o,"each",[],function N(K){var C=N.$$s==null?this:N.$$s;return K==null&&(K=d),Z(C,"define_method",[K],function V(){var re=V.$$s==null?this:V.$$s;return re.native==null&&(re.native=d),re.$Native(re.native[K])},{$$s:C})},{$$s:m})},-1),Y($,"$native_writer",function(i){var a,o,m=this;return a=x(arguments),o=a,Z(o,"each",[],function N(K){var C=N.$$s==null?this:N.$$s;return K==null&&(K=d),Z(C,"define_method",[""+K+"="],function V(re){var ae=V.$$s==null?this:V.$$s;return ae.native==null&&(ae.native=d),re==null&&(re=d),ae.$Native(ae.native[K]=re)},{$$s:C})},{$$s:m})},-1),Y($,"$native_accessor",function(i){var a,o,m=this;return a=x(arguments),o=a,Z(m,"native_reader",W(o)),Z(m,"native_writer",W(o))},-1)}(E[0],E),function(_,s){var $=w(_,"Wrapper"),r=[$].concat(s),e=n.$r(r);return Y($,"$initialize",function(i){var a=this;return O(T["$native?"](i))||T.$raise(e("ArgumentError"),""+i.$inspect()+" isn't native"),a.native=i}),Y($,"$to_n",ee("native")),D($,"$included",function(i){return i.$extend(e("Helpers"))})}(E[0],E),D(l,"$included",function(s){var $=this;return $.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),s.$include(G("Wrapper"))})}(q[0],q),function(g,c){var l=w(g,"Kernel"),E=[l].concat(c),G=n.$r(E);return Y(l,"$native?",function(s){return s==null||!s.$$class}),Y(l,"$Native",function _(s){_.$$p;var $=this;return _.$$p=null,O(s==null)?d:O($["$native?"](s))?M(G("Native"),"Object").$new(s):O(s["$is_a?"](G("Array")))?Z(s,"map",[],function r(e){var t=r.$$s==null?this:r.$$s;return e==null&&(e=d),t.$Native(e)},{$$s:$}):O(s["$is_a?"](G("Proc")))?Z($,"proc",[],function r(e){var t=r.$$p||d,i,a,o=r.$$s==null?this:r.$$s;return r.$$p=null,i=x(arguments),a=i,o.$Native(Z(s,"call",W(a),t.$to_proc()))},{$$arity:-1,$$s:$}):s}),B(l,"_Array","Array"),Y(l,"$Array",function _(s,$){var r=_.$$p||d,e,t,i=this;return _.$$p=null,e=x(arguments,1),t=e,O(i["$native?"](s))?Z(M(G("Native"),"Array"),"new",[s].concat(W(t)),r.$to_proc()).$to_a():i.$_Array(s)},-2)}(q[0],q),function(g,c){var l=b(g,c,"Object"),E=l.$$prototype;return E.native=d,l.$include(M(M("Native"),"Wrapper")),Y(l,"$==",function(_){var s=this;return s.native===M("Native").$try_convert(_)}),Y(l,"$has_key?",function(_){var s=this;return n.hasOwnProperty.call(s.native,_)}),Y(l,"$each",function G(_){var s,$,r=G.$$p||d,e=this;if(G.$$p=null,s=x(arguments),$=s,r!==d){for(var t in e.native)n.yieldX(r,[t,e.native[t]]);return e}else return Z(e,"method_missing",["each"].concat(W($)))},-1),Y(l,"$[]",function(_){var s=this,$=s.native[_];return $ instanceof Function?$:M("Native").$call(s.native,_)}),Y(l,"$[]=",function(_,s){var $=this,r=d;return r=M("Native").$try_convert(s),O(r===d)?$.native[_]=s:$.native[_]=r}),Y(l,"$merge!",function(_){var s=this;_=M("Native").$convert(_);for(var $ in _)s.native[$]=_[$];return s}),Y(l,"$respond_to?",function(_,s){var $=this;return s==null&&(s=!1),T.$instance_method("respond_to?").$bind($).$call(_,s)},-2),Y(l,"$respond_to_missing?",function(_,s){var $=this;return n.hasOwnProperty.call($.native,_)},-2),Y(l,"$method_missing",function G(_,s){var $=G.$$p||d,r,e,t,i=this;return G.$$p=null,r=x(arguments,1),e=r,_.charAt(_.length-1)==="="?(t=[_.$slice(0,h(_.$length(),1)),e["$[]"](0)],Z(i,"[]=",t),t[t.length-1]):Z(M("Native"),"call",[i.native,_].concat(W(e)),$.$to_proc())},-2),Y(l,"$nil?",S(!1)),Y(l,"$is_a?",function(_){var s=this;return n.is_a(s,_)}),Y(l,"$instance_of?",function(_){var s=this;return s.$$class===_}),Y(l,"$class",function(){var _=this;return _.$$class}),Y(l,"$to_a",function G(_){var s=G.$$p||d,$=this;return G.$$p=null,_==null&&(_=new Map),Z(M(M("Native"),"Array"),"new",[$.native,_],s.$to_proc()).$to_a()},-1),Y(l,"$inspect",function(){var _=this;return"#<Native:"+String(_.native)+">"}),B(l,"include?","has_key?"),B(l,"key?","has_key?"),B(l,"kind_of?","is_a?"),B(l,"member?","has_key?")}(u("Native"),u("BasicObject")),function(g,c,l){var E=b(g,c,"Array"),G=[E].concat(l),_=n.$r(G),s=E.$$prototype;return s.named=s.native=s.get=s.block=s.set=s.length=d,E.$include(M(_("Native"),"Wrapper")),E.$include(_("Enumerable")),Y(E,"$initialize",function $(r,e){var t=$.$$p||d,i=this,a=d;return $.$$p=null,e==null&&(e=new Map),j(i,k(i,"initialize",$,!1,!0),"initialize",[r],null),i.get=O(a=e["$[]"]("get"))?a:e["$[]"]("access"),i.named=e["$[]"]("named"),i.set=O(a=e["$[]"]("set"))?a:e["$[]"]("access"),i.length=O(a=e["$[]"]("length"))?a:"length",i.block=t,O(i.$length()==null)?i.$raise(_("ArgumentError"),"no length found on the array-like object"):d},-2),Y(E,"$each",function $(){var r=$.$$p||d,e=this;if($.$$p=null,!O(r))return e.$enum_for("each");for(var t=0,i=e.$length();t<i;t++)n.yield1(r,e["$[]"](t));return e}),Y(E,"$[]",function(r){var e=this,t=d,i=d;return t=F(_("String"),i=r)||F(_("Symbol"),i)?O(e.named)?e.native[e.named](r):e.native[r]:F(_("Integer"),i)?O(e.get)?e.native[e.get](r):e.native[r]:d,O(t)?O(e.block)?e.block.$call(t):e.$Native(t):d}),Y(E,"$[]=",function(r,e){var t=this;return O(t.set)?t.native[t.set](r,_("Native").$convert(e)):t.native[r]=_("Native").$convert(e)}),Y(E,"$last",function(r){var e=this,t=d,i=d;if(r==null&&(r=d),O(r)){for(t=h(e.$length(),1),i=[];O(p(t,0));)i["$<<"](e["$[]"](t)),t=h(t,1);return i}else return e["$[]"](h(e.$length(),1))},-1),Y(E,"$length",function(){var r=this;return r.native[r.length]}),Y(E,"$inspect",function(){var r=this;return r.$to_a().$inspect()}),B(E,"to_ary","to_a")}(u("Native"),null,q),function(g,c){var l=b(g,c,"Numeric");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(q[0],null),function(g,c){var l=b(g,c,"Proc");return Y(l,"$to_n",A)}(q[0],null),function(g,c){var l=b(g,c,"String");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(q[0],null),function(g,c){var l=b(g,c,"Regexp");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(q[0],null),function(g,c){var l=b(g,c,"MatchData");return Y(l,"$to_n",ee("matches"))}(q[0],null),function(g,c,l){var E=b(g,c,"Struct"),G=[E].concat(l),_=n.$r(G);return Y(E,"$to_n",function(){var $=this,r=d;return r={},Z($,"each_pair",[],function(t,i){return t==null&&(t=d),i==null&&(i=d),r[t]=_("Native").$try_convert(i,i)}),r})}(q[0],null,q),function(g,c,l){var E=b(g,c,"Array"),G=[E].concat(l),_=n.$r(G);return Y(E,"$to_n",function(){for(var $=this,r=[],e=0,t=$.length;e<t;e++){var i=$[e];r.push(_("Native").$try_convert(i,i))}return r})}(q[0],null,q),function(g,c){var l=b(g,c,"Boolean");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(q[0],null),function(g,c){var l=b(g,c,"Time");return Y(l,"$to_n",A)}(q[0],null),function(g,c){var l=b(g,c,"NilClass");return Y(l,"$to_n",function(){return null})}(q[0],null),O(u("Hash")["$method_defined?"]("_initialize"))||function(g,c,l){var E=b(g,c,"Hash"),G=[E].concat(l),_=n.$r(G);B(E,"_initialize","initialize");function s($,r,e){e&&(e.constructor===void 0||e.constructor===Object||e instanceof Map)?z($,r,_("Hash").$new(e)):e&&e.$$is_array?(e=e.map(function(t){return t&&(t.constructor===void 0||t.constructor===Object||e instanceof Map)?_("Hash").$new(t):E.$Native(t)}),z($,r,e)):z($,r,E.$Native(e))}return Y(E,"$initialize",function $(r){var e=$.$$p||d,t=this;if($.$$p=null,r!=null)if(r.constructor===void 0||r.constructor===Object){var i,a;for(i in r)a=r[i],s(t,i,a);return t}else r instanceof Map&&n.hash_each(r,!1,function(o,m){return s(t,o,m),[!1,!1]});return Z(t,"_initialize",[r],e.$to_proc())},-1),Y(E,"$to_n",function(){var r=this,e={};return n.hash_each(r,!1,function(t,i){return e[_("Native").$try_convert(t,t)]=_("Native").$try_convert(i,i),[!1,!1]}),e})}(q[0],null,q),function(g,c){var l=b(g,c,"Module");return Y(l,"$native_module",function(){var G=this;return n.global[G.$name()]=G})}(q[0],null),function(g,c,l){var E=b(g,c,"Class"),G=[E].concat(l),_=n.$r(G);return Y(E,"$native_alias",function($,r){var e=this,t=e.prototype[n.jsid(r)];t||e.$raise(_("NameError").$new("undefined method `"+r+"' for class `"+e.$inspect()+"'",r)),e.prototype[$]=t}),Y(E,"$native_class",function(){var $=this;return $.$native_module(),$.new=$.$new})}(q[0],null,q),P.$=P.global=I.$Native(n.global)};(function(n){var z;if(typeof globalThis<"u"?n=globalThis:typeof global<"u"?n=global:typeof window<"u"&&(n=window),n.console==null&&(n.console={}),typeof n.console=="object"?z=n.console:z={},"log"in z||(z.log=function(){}),"warn"in z||(z.warn=z.log),typeof n.Opal<"u")return z.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),n.Opal;var w,D,x,O,Z,T,J,v=n.Opal={};v.global=n,v.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var L=Function.prototype.call,$e=Function.prototype.bind,W=Object.hasOwn||L.bind(Object.prototype.hasOwnProperty),Y=Object.setPrototypeOf,ee=L.bind(Array.prototype.slice),B=L.bind(Array.prototype.splice),b=4,h=b;function S(){return h+=2,h}v.uid=S,v.id=function(f){return f.$$is_number?f*2+1:(f.$$id==null&&p(f,"$$id",S()),f.$$id)};var j=v.gvars={};v.exit=function(f){j.DEBUG&&z.log("Exited with status "+f)},v.exceptions=[],v.pop_exception=function(f){var y=v.exceptions.pop();y===f||(y?j["!"]=y:j["!"]=w)};function k(f,y){if(f||(f=v.Exception||Error),J&&J.$raise)arguments.length>2?J.$raise(f.$new.apply(f,ee(arguments,1))):J.$raise(f,y);else throw f.$new?f.$new(y):new f(y)}var F={value:void 0,enumerable:!1,configurable:!0,writable:!0};function p(f,y,U){typeof f=="string"?f[y]=U:(F.value=U,Object.defineProperty(f,y,F))}v.prop=p,v.defineProperty=v.prop,v.slice=ee;var A=v.truthy=function(f){return f!==!1&&w!==f&&f!==void 0&&f!==null&&(!(f instanceof Boolean)||f.valueOf()===!0)};v.falsy=function(f){return!A(f)},v.type_error=function(f,y,U,te){f=f.$$class,te&&U?(te=te.$$class,k(v.TypeError,"can't convert "+f+" into "+y+" ("+f+"#"+U+" gives "+te+")")):k(v.TypeError,"no implicit conversion of "+f+" into "+y)},v.coerce_to=function(f,y,U,te){var ue;return U==="to_int"&&y===v.Integer&&f.$$is_number?f<0?Math.ceil(f):Math.floor(f):U==="to_str"&&y===v.String&&f.$$is_string||v.is_a(f,y)?f:f["$respond_to?"].$$pristine&&f.$method_missing.$$pristine?(ue=f[de(U)],(ue==null||ue.$$stub)&&v.type_error(f,y),ue.apply(f,te)):(f["$respond_to?"](U)||v.type_error(f,y),te==null&&(te=[]),v.send(f,U,te))},v.respond_to=function(f,y,U){if(f==null||!f.$$class)return!1;U=!!U;var te=f[y];if(f["$respond_to?"].$$pristine){if(typeof te=="function"&&!te.$$stub)return!0;if(!f["$respond_to_missing?"].$$pristine)return v.send(f,f["$respond_to_missing?"],[y.substr(1),U])}else return v.send(f,f["$respond_to?"],[y.substr(1),U])},v.trace_class=!1,v.tracers_for_class=[];function P(f){var y,U,te;for(y=0,U=v.tracers_for_class.length;y<U;y++)te=v.tracers_for_class[y],te.trace_object=f,te.block.$call(te)}function I(f,y){if(f.$$autoload[y].loaded){if(f.$$autoload[y].loaded&&!f.$$autoload[y].required&&f.$$autoload[y].exception)throw f.$$autoload[y].exception}else{f.$$autoload[y].loaded=!0;try{v.Kernel.$require(f.$$autoload[y].path)}catch(U){throw f.$$autoload[y].exception=U,U}if(f.$$autoload[y].required=!0,f.$$const[y]!=null)return f.$$autoload[y].success=!0,f.$$const[y]}}function q(f,y){if(f){if(f.$$const[y]!=null)return f.$$const[y];if(f.$$autoload&&f.$$autoload[y])return I(f,y)}}function u(f,y){var U,te,ue;if(f.length!==0)for(U=0,te=f.length;U<te;U++){if(ue=f[U].$$const[y],ue!=null)return ue;if(f[U].$$autoload&&f[U].$$autoload[y])return I(f[U],y)}}function d(f,y){var U,te,ue;if(f!=null)for(ue=V(f),U=0,te=ue.length;U<te;U++){if(ue[U].$$const&&W(ue[U].$$const,y))return ue[U].$$const[y];if(ue[U].$$autoload&&ue[U].$$autoload[y])return I(ue[U],y)}}function M(f,y){if(f==null||f.$$is_module)return d(x,y)}function g(f,y){return(f||x).$const_missing(y)}v.const_get_local=function(f,y,U){var te;if(f!=null)return f==="::"&&(f=x),!f.$$is_module&&!f.$$is_class&&k(v.TypeError,f.toString()+" is not a class/module"),te=q(f,y),te!=null||U?te:g(f,y)},v.const_get_qualified=function(f,y,U){var te,ue,ce,he=v.const_cache_version;if(y==null)return te=q(x,f),te??v.const_get_qualified(x,f,U);if(f!=null)return f==="::"&&(f=x),!f.$$is_module&&!f.$$is_class&&k(v.TypeError,f.toString()+" is not a class/module"),(ue=f.$$const_cache)==null&&(p(f,"$$const_cache",Object.create(null)),ue=f.$$const_cache),ce=ue[y],ce==null||ce[0]!==he?((te=q(f,y))!=null||(te=d(f,y))!=null,ue[y]=[he,te]):te=ce[1],te!=null||U?te:g(f,y)},v.const_cache_version=1,v.const_get_relative=function(f,y,U){var te=f[0],ue,ce=v.const_cache_version,he,pe;return(he=f.$$const_cache)==null&&(p(f,"$$const_cache",Object.create(null)),he=f.$$const_cache),pe=he[y],pe==null||pe[0]!==ce?((ue=q(te,y))!=null||(ue=u(f,y))!=null||(ue=d(te,y))!=null||(ue=M(te,y))!=null,he[y]=[ce,ue]):ue=pe[1],ue!=null||U?ue:g(te,y)};function c(f,y,U){var te=!0;return(f==null||f==="::")&&(f=x),U.$$is_a_module&&((U.$$name==null||U.$$name===w)&&(U.$$name=y),U.$$base_module==null&&(U.$$base_module=f)),f.$$const=f.$$const||Object.create(null),(y in f.$$const||"$$autoload"in f&&y in f.$$autoload)&&(te=!1),f.$$const[y]=U,f.$$=f.$$const,v.const_cache_version++,f===x&&(v[y]=U),p(f,y,U),te&&f.$const_added&&!f.$const_added.$$pristine&&f.$const_added(y),U}v.const_set=c,v.constants=function(f,y){y==null&&(y=!0);var U,te=[f],ue,ce,he={},pe;for(y&&(te=te.concat(V(f))),y&&f.$$is_module&&(te=te.concat([v.Object]).concat(V(v.Object))),ue=0,ce=te.length;ue<ce&&(U=te[ue],!(f!==x&&U==x));ue++){for(pe in U.$$const)he[pe]=!0;if(U.$$autoload)for(pe in U.$$autoload)he[pe]=!0}return Object.keys(he)},v.const_remove=function(f,y){if(v.const_cache_version++,f.$$const[y]!=null){var U=f.$$const[y];return delete f.$$const[y],U}if(f.$$autoload&&f.$$autoload[y])return delete f.$$autoload[y],w;k(v.NameError,"constant "+f+"::"+f.$name()+" not defined")},v.const_get_relative_factory=function(f){return function(y,U){return v.$$(f,y,U)}},v.$$=v.const_get_relative,v.$$$=v.const_get_qualified,v.$r=v.const_get_relative_factory;function l(f){return f==null?!1:f.$$bridge?f:f.$$super?l(f.$$super):!1}function E(f,y,U){var te,ue;if((ue=l(y))?te=function(){var ye=new($e.apply(ue.$$constructor,ge(null,arguments)));return Y(ye,te.$$prototype),ye}:te=function(){},f&&f!==w&&p(te,"displayName","::"+f),p(te,"$$name",f),p(te,"$$constructor",te),p(te,"$$prototype",te.prototype),p(te,"$$const",{}),p(te,"$$is_class",!0),p(te,"$$is_a_module",!0),p(te,"$$super",y),p(te,"$$cvars",{}),p(te,"$$own_included_modules",[]),p(te,"$$own_prepended_modules",[]),p(te,"$$ancestors",[]),p(te,"$$ancestors_cache_version",null),p(te,"$$subclasses",[]),p(te,"$$cloned_from",[]),p(te.$$prototype,"$$class",te),v.Class&&Y(te,v.Class.prototype),y!=null){if(Y(te.$$prototype,y.$$prototype),U!==!0)if(typeof WeakRef<"u"){var ce,he,pe=[];for(ce=0;ce<y.$$subclasses.length;ce++)he=y.$$subclasses[ce],he.deref()!==void 0&&pe.push(he);pe.push(new WeakRef(te)),y.$$subclasses=pe}else y.$$subclasses.push(te);y.$$meta&&v.build_class_singleton_class(te)}return te}v.allocate_class=E;function G(f,y){var U=q(f,y);if(U)return U.$$is_class||k(v.TypeError,y+" is not a class"),U}function _(f,y){f.$$super!==y&&k(v.TypeError,"superclass mismatch for class "+f.$$name)}v.klass=function(f,y,U){var te;f==null||f=="::"?f=x:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),y!=null&&(!y.hasOwnProperty||y.hasOwnProperty&&!y.hasOwnProperty("$$is_class"))&&(y.constructor&&y.constructor.name=="Function"?(te=y,y=x):k(v.TypeError,"superclass must be a Class ("+(y.constructor&&(y.constructor.name||y.constructor.$$name)||typeof y)+" given)"));var ue=G(f,U);return ue!=null?y&&_(ue,y):(y==null&&(y=x),ue=E(U,y),c(f,U,ue),y.$inherited&&y.$inherited(ue),te&&v.bridge(te,ue)),v.trace_class&&P(ue),ue};function s(f){var y=function(){},U=y;return f&&p(y,"displayName",f+".constructor"),p(U,"$$name",f),p(U,"$$prototype",y.prototype),p(U,"$$const",{}),p(U,"$$is_module",!0),p(U,"$$is_a_module",!0),p(U,"$$cvars",{}),p(U,"$$iclasses",[]),p(U,"$$own_included_modules",[]),p(U,"$$own_prepended_modules",[]),p(U,"$$ancestors",[U]),p(U,"$$ancestors_cache_version",null),p(U,"$$cloned_from",[]),Y(U,v.Module.prototype),U}v.allocate_module=s;function $(f,y){var U=q(f,y);return U==null&&f===x&&(U=d(x,y)),U&&!U.$$is_module&&U!==x&&k(v.TypeError,y+" is not a module"),U}v.module=function(f,y){var U;return f==null||f=="::"?f=x:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),U=$(f,y),U==null&&(U=s(y),c(f,y,U)),v.trace_class&&P(U),U},v.get_singleton_class=function(f){return f.$$is_number&&k(v.TypeError,"can't define singleton"),f.$$meta?f.$$meta:f.hasOwnProperty("$$is_class")?v.build_class_singleton_class(f):f.hasOwnProperty("$$is_module")?v.build_module_singleton_class(f):v.build_object_singleton_class(f)};function r(f,y){f.hasOwnProperty("$$meta")?f.$$meta=y:p(f,"$$meta",y),f.$$frozen?f.$$meta.$freeze():Y(f,y.$$prototype)}v.build_class_singleton_class=function(f){if(f.$$meta)return f.$$meta;var y=f===D?Z:v.get_singleton_class(f.$$super),U=E(null,y,!0);return p(U,"$$is_singleton",!0),p(U,"$$singleton_of",f),r(f,U),p(f,"$$class",v.Class),U},v.build_module_singleton_class=function(f){if(f.$$meta)return f.$$meta;var y=E(null,v.Module,!0);return p(y,"$$is_singleton",!0),p(y,"$$singleton_of",f),r(f,y),p(f,"$$class",v.Module),y},v.build_object_singleton_class=function(f){var y=f.$$class,U=E(w,y,!0);return p(U,"$$is_singleton",!0),p(U,"$$singleton_of",f),delete U.$$prototype.$$class,r(f,U),U},v.is_method=function(f){return f[0]==="$"&&f[1]!=="$"},v.instance_methods=function(f){for(var y=Object.create(null),U=[],te=V(f),ue=0,ce=te.length;ue<ce;ue++){var he=te[ue],pe=he.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ze=ye.length;we<ze;we++){var Ee=ye[we];if(!y[Ee]){if(v.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);U.push(qe)}}y[Ee]=!0}}}return U},v.own_instance_methods=function(f){var y=[],U=f.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);for(var te=Object.getOwnPropertyNames(U),ue=0,ce=te.length;ue<ce;ue++){var he=te[ue];if(v.is_method(he)){var pe=U[he];if(!pe.$$stub){var ye=he.slice(1);y.push(ye)}}}return y},v.methods=function(f){return v.instance_methods(f.$$meta||f.$$class)},v.own_methods=function(f){return f.$$meta?v.own_instance_methods(f.$$meta):[]},v.receiver_methods=function(f){var y=v.get_singleton_class(f),U=v.own_instance_methods(y),te=v.own_instance_methods(y.$$super);return U.concat(te)},v.class_variables=function(f){var y=V(f),U,te=y.length,ue={};for(U=te-1;U>=0;U--){var ce=y[U];for(var he in ce.$$cvars)ue[he]=ce.$$cvars[he]}return ue},v.class_variable_set=function(f,y,U){var te=V(f),ue,ce=te.length;for(ue=ce-2;ue>=0;ue--){var he=te[ue];if(W(he.$$cvars,y))return he.$$cvars[y]=U,U}return f.$$cvars[y]=U,U},v.class_variable_get=function(f,y,U){if(W(f.$$cvars,y))return f.$$cvars[y];var te=V(f),ue,ce=te.length;for(ue=0;ue<ce;ue++){var he=te[ue];if(W(he.$$cvars,y))return he.$$cvars[y]}return U||k(v.NameError,"uninitialized class variable "+y+" in "+f.$name()),w};function e(f){return f.hasOwnProperty("$$iclass")&&f.hasOwnProperty("$$root")}function t(f){for(var y=[],U,te=Object.getPrototypeOf(f.$$prototype);te&&!te.hasOwnProperty("$$class");)U=K(te),U&&y.push(U),te=Object.getPrototypeOf(te);return y}function i(f){var y=[],U,te=Object.getPrototypeOf(f.$$prototype);if(f.$$prototype.hasOwnProperty("$$dummy"))for(;te&&te!==f.$$prototype.$$define_methods_on;)U=K(te),U&&y.push(U),te=Object.getPrototypeOf(te);return y}v.append_features=function(f,y){var U=V(f),te=[];U.indexOf(y)!==-1&&k(v.ArgumentError,"cyclic include detected");for(var ue=0,ce=U.length;ue<ce;ue++){var he=U[ue],pe=o(he);p(pe,"$$included",!0),te.push(pe)}var ye=V(y),we=N(te),ze,Ee;if(ye.indexOf(f)===-1)ze=y.$$prototype,Ee=Object.getPrototypeOf(y.$$prototype);else{for(var xe=y.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===f&&e(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var ke=Object.getPrototypeOf(qe);ke.hasOwnProperty("$$iclass")&&!e(ke);)ke=Object.getPrototypeOf(ke);ze=xe,Ee=ke}else ze=y.$$prototype,Ee=Object.getPrototypeOf(y.$$prototype)}Y(ze,we.first),Y(we.last,Ee),y.$$own_included_modules=t(y),v.const_cache_version++},v.prepend_features=function(f,y){var U=V(f),te=[];U.indexOf(y)!==-1&&k(v.ArgumentError,"cyclic prepend detected");for(var ue=0,ce=U.length;ue<ce;ue++){var he=U[ue],pe=o(he);p(pe,"$$prepended",!0),te.push(pe)}var ye=N(te),we=y.$$prototype,ze=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=m(y),a(y),p(we,"$$dummy",!0),p(we,"$$define_methods_on",Ee),Y(we,Ee),Y(Ee,ze));var ke=V(y);if(ke.indexOf(f)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else k(v.RuntimeError,"Prepending a module multiple times is not supported");Y(xe,ye.first),Y(ye.last,qe),y.$$own_prepended_modules=i(y),v.const_cache_version++};function a(f){for(var y=f.$$prototype,U=Object.getOwnPropertyNames(y),te=0;te<U.length;te++){var ue=U[te];v.is_method(ue)&&delete y[ue]}}function o(f){var y=m(f);return f.$$is_module&&f.$$iclasses.push(y),y}function m(f){var y={},U=f.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);var te=Object.getOwnPropertyNames(U),ue=te.length,ce;for(ce=0;ce<ue;ce++){var he=te[ce];p(y,he,U[he])}return p(y,"$$iclass",!0),p(y,"$$module",f),y}function N(f){var y=f.length,U=f[0];if(p(U,"$$root",!0),y===1)return{first:U,last:U};for(var te=U,ue=1;ue<y;ue++){var ce=f[ue];Y(te,ce),te=ce}return{first:f[0],last:f[y-1]}}v.bridge=function(f,y){f.hasOwnProperty("$$bridge")&&k(v.ArgumentError,"already bridged"),p(f,"$$bridge",y),Y(f.prototype,(y.$$super||v.Object).$$prototype),p(y,"$$prototype",f.prototype),p(y.$$prototype,"$$class",y),p(y,"$$constructor",f),p(y,"$$bridge",!0)};function K(f){if(!f.hasOwnProperty("$$dummy")){if(f.hasOwnProperty("$$iclass"))return f.$$module;if(f.hasOwnProperty("$$class"))return f.$$class}}function C(f){return f.$$own_prepended_modules.concat([f]).concat(f.$$own_included_modules)}function V(f){if(!f)return[];if(f.$$ancestors_cache_version===v.const_cache_version)return f.$$ancestors;var y=[],U,te,ue;for(U=0,te=C(f),ue=te.length;U<ue;U++)y.push(te[U]);if(f.$$super)for(U=0,te=V(f.$$super),ue=te.length;U<ue;U++)y.push(te[U]);return f.$$ancestors_cache_version=v.const_cache_version,f.$$ancestors=y,y}v.ancestors=V,v.included_modules=function(f){for(var y=[],U=null,te=Object.getPrototypeOf(f.$$prototype);te&&Object.getPrototypeOf(te);te=Object.getPrototypeOf(te))U=K(te),U&&U.$$is_module&&te.$$iclass&&te.$$included&&y.push(U);return y},v.add_stubs=function(f){var y=v.BasicObject.$$prototype,U,te;f=f.split(",");for(var ue=0,ce=f.length;ue<ce;ue++)U=de(f[ue]),te=y[U],(te==null||te.$$stub)&&v.add_stub_for(y,U)},v.add_stub_for=function(f,y){p(f,y,v.stub_for(y))},v.stub_for=function(f){function y(){return this.$method_missing.$$p=y.$$p,y.$$p=null,this.$method_missing.apply(this,ge(f.slice(1),arguments))}return y.$$stub=!0,y},v.ac=function(f,y,U,te){var ue="";U.$$is_a_module?ue+=U.$$name+".":ue+=U.$$class.$$name+"#",ue+=te,k(v.ArgumentError,"["+ue+"] wrong number of arguments (given "+f+", expected "+y+")")},v.block_ac=function(f,y,U){var te="`block in "+U+"'";k(v.ArgumentError,te+": wrong number of arguments (given "+f+", expected "+y+")")};function re(f){return f.hasOwnProperty("$$meta")&&f.$$meta!==null?V(f.$$meta):V(f.$$class)}v.find_super=function(f,y,U,te,ue){var ce=de(y),he,pe,ye,we,ze=-1,Ee;for(he=re(f),we=U.$$owner,Ee=0;Ee<he.length;Ee++)if(pe=he[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ze=Ee;break}for(Ee=ze+1;Ee<he.length;Ee++){pe=he[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(ce)){ye=xe[ce];break}}return!te&&ye&&ye.$$stub&&f.$method_missing.$$pristine&&k(v.NoMethodError,"super: no superclass method `"+y+"' for "+f,y),ye.$$stub&&!ue?null:ye},v.find_block_super=function(f,y,U,te,ue){var ce=y;return U||k(v.RuntimeError,"super called outside of method"),ue&&U.$$define_meth&&k(v.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),U.$$def&&(ce=U.$$jsid),v.find_super(f,ce,U,te)},v.find_super_dispatcher=v.find_super,v.find_iter_super_dispatcher=v.find_block_super;function ae(f,y,U){try{f(y)}catch(te){if(te===U)return U.$v;throw te}}v.yield1=function(f,y){typeof f!="function"&&k(v.LocalJumpError,"no block given");var U=f.$$has_top_level_mlhs_arg,te=f.$$has_trailing_comma_in_args,ue=f.$$is_lambda&&f.$$ret;return(f.length>1||(U||te)&&f.length===1)&&(y=v.to_ary(y)),(f.length>1||te&&f.length===1)&&y.$$is_array?ue?ae(f.apply.bind(f,null),y,f.$$ret):f.apply(null,y):ue?ae(f,y,f.$$ret):f(y)},v.yieldX=function(f,y){return typeof f!="function"&&k(v.LocalJumpError,"no block given"),f.length>1&&y.length===1&&y[0].$$is_array&&(y=y[0]),f.$$is_lambda&&f.$$ret?ae(f.apply.bind(f,null),y,f.$$ret):f.apply(null,y)},v.rescue=function(f,y){for(var U=0;U<y.length;U++){var te=y[U];if(te.$$is_array){var ue=v.rescue(f,te);if(ue)return ue}else if(te===v.JS.Error||te["$==="](f))return te}return null},v.is_a=function(f,y){if(y!=null&&f.$$meta===y||f.$$class===y)return!0;if(f.$$is_number&&y.$$is_number_class)return y.$$is_integer_class?f%1===0:!0;var U=V(f.$$is_class?v.get_singleton_class(f):f.$$meta||f.$$class);return U.indexOf(y)!==-1},v.to_hash=function(f){if(f.$$is_hash)return f;if(f["$respond_to?"]("to_hash",!0)){var y=f.$to_hash();if(y.$$is_hash)return y;k(v.TypeError,"Can't convert "+f.$$class+" to Hash ("+f.$$class+"#to_hash gives "+y.$$class+")")}else k(v.TypeError,"no implicit conversion of "+f.$$class+" into Hash")},v.to_ary=function(f){if(f.$$is_array)return f;if(f["$respond_to?"]("to_ary",!0)){var y=f.$to_ary();if(y===w)return[f];if(y.$$is_array)return y;k(v.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_ary gives "+y.$$class+")")}else return[f]},v.to_a=function(f){if(f.$$is_array)return f.slice();if(f["$respond_to?"]("to_a",!0)){var y=f.$to_a();if(y===w)return[f];if(y.$$is_array)return y;k(v.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_a gives "+y.$$class+")")}else return[f]},v.extract_kwargs=function(f){var y=f[f.length-1];if(y!=null&&v.respond_to(y,"$to_hash",!0))return B(f,f.length-1),y},v.kwrestargs=function(f,y){var U=new Map;return v.hash_each(f,!1,function(te,ue){return y[te]||v.hash_put(U,te,ue),[!1,!1]}),U};function le(f,y){typeof y=="number"?f.$$arity=y:typeof y=="object"&&Object.assign(f,y)}var _e=new Map;function de(f){var y=_e.get(f);return y||(y="$"+f,_e.set(f,y)),y}v.jsid=de;function ge(f,y){return y.$$is_array||(y=ee(y)),[f].concat(y)}v.send=function(f,y,U,te,ue){var ce;return typeof y=="function"?(ce=y,y=null):typeof y=="string"?ce=f[de(y)]:k(v.NameError,"Passed method should be a string or a function"),v.send2(f,ce,y,U,te,ue)},v.send2=function(f,y,U,te,ue,ce){return y==null&&U!=null&&f.$method_missing&&(y=f.$method_missing,te=ge(U,te)),le(ue,ce),typeof ue=="function"&&(y.$$p=ue),y.apply(f,te)},v.refined_send=function(f,y,U,te,ue,ce){var he,pe,ye,we,ze,Ee,xe,qe,ke,Ae;for(we=re(y),he=0;he<we.length;he++)for(ze=v.id(we[he]),pe=0;pe<f.length;pe++)for(Ee=f[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ze]>"u")&&(ke=qe[ze],typeof ke.$$prototype[de(U)]<"u")))return Ae=ke.$$prototype[de(U)],v.send2(y,Ae,U,te,ue,ce);return v.send(y,U,te,ue,ce)},v.lambda=function(f,y){return f.$$is_lambda=!0,le(f,y),f},v.def=function(f,y,U,te){return le(U,te),f===v.top?v.defn(v.Object,y,U):!f.$$eval&&f.$$is_a_module?v.defn(f,y,U):v.defs(f,y,U)},v.defn=function(f,y,U){R(f),U.displayName=y,U.$$owner=f;var te=y.substr(1),ue=f.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),p(ue,y,U),f.$$is_module){f.$$module_function&&v.defs(f,y,U);for(var ce=0,he=f.$$iclasses,pe=he.length;ce<pe;ce++){var ye=he[ce];p(ye,y,U)}}var we=f.$$singleton_of;return f.$method_added&&!f.$method_added.$$stub&&!we?f.$method_added(te):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(te),te},v.defs=function(f,y,U,te){return le(U,te),(f.$$is_string||f.$$is_number)&&k(v.TypeError,"can't define singleton"),v.defn(v.get_singleton_class(f),y,U)};function ve(f,y){if(f.$$is_module)for(var U=0,te=f.$$iclasses,ue=te.length;U<ue;U++){var ce=te[U];delete ce[y]}}v.rdef=function(f,y){W(f.$$prototype,y)||k(v.NameError,"method '"+y.substr(1)+"' not defined in "+f.$name()),delete f.$$prototype[y],ve(f,y),f.$$is_singleton?f.$$prototype.$singleton_method_removed&&!f.$$prototype.$singleton_method_removed.$$stub&&f.$$prototype.$singleton_method_removed(y.substr(1)):f.$method_removed&&!f.$method_removed.$$stub&&f.$method_removed(y.substr(1))},v.udef=function(f,y){(!f.$$prototype[y]||f.$$prototype[y].$$stub)&&k(v.NameError,"method '"+y.substr(1)+"' not defined in "+f.$name()),v.add_stub_for(f.$$prototype,y),ve(f,y),f.$$is_singleton?f.$$prototype.$singleton_method_undefined&&!f.$$prototype.$singleton_method_undefined.$$stub&&f.$$prototype.$singleton_method_undefined(y.substr(1)):f.$method_undefined&&!f.$method_undefined.$$stub&&f.$method_undefined(y.substr(1))};function me(f){return typeof f=="function"&&!f.$$stub}v.alias=function(f,y,U){var te=de(y),ue=de(U),ce,he;if(typeof f.$$prototype>"u"&&(f=v.Object),ce=f.$$prototype[ue],f.$$eval)return v.alias(v.get_singleton_class(f),y,U);if(!me(ce)){for(var pe=f.$$super;typeof ce!="function"&&pe;)ce=pe[ue],pe=pe.$$super;!me(ce)&&f.$$is_module&&(ce=v.Object.$$prototype[ue]),me(ce)||k(v.NameError,"undefined method `"+U+"' for class `"+f.$name()+"'")}return ce.$$alias_of&&(ce=ce.$$alias_of),he=v.wrap_method_body(ce),he.displayName=y,he.$$alias_of=ce,he.$$alias_name=y,v.defn(f,te,he),f},v.wrap_method_body=function(f){var y=function(){var U=y.$$p;return y.$$p=null,v.send(this,f,arguments,U)};try{Object.defineProperty(y,"length",{value:f.length})}catch{}return y.$$arity=f.$$arity==null?f.length:f.$$arity,y.$$parameters=f.$$parameters,y.$$source_location=f.$$source_location,y},v.alias_gvar=function(f,y){return Object.defineProperty(j,f,{configurable:!0,enumerable:!0,get:function(){return j[y]},set:function(U){j[y]=U}}),w},v.alias_native=function(f,y,U){var te=de(y),ue=f.$$prototype[U];return(typeof ue!="function"||ue.$$stub)&&k(v.NameError,"undefined native method `"+U+"' for class `"+f.$name()+"'"),v.defn(f,te,ue),f},v.hash_init=function(f){z.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},v.hash_clone=function(f,y){return y.$$none=f.$$none,y.$$proc=f.$$proc,v.hash_each(f,y,function(U,te){return v.hash_put(y,U,te),[!1,y]})},v.hash_put=function(f,y,U){var te=typeof y;if(te==="string"||te==="symbol"||te==="number"||te==="boolean"||te==="bigint")f.set(y,U);else if(y.$$is_string)f.set(y.valueOf(),U);else{f.$$keys||(f.$$keys=new Map);var ue=y.$$is_string?y.valueOf():f.$$by_identity?v.id(y):y.$hash(),ce=f.$$keys;if(!ce.has(ue)){ce.set(ue,[y]),f.set(y,U);return}for(var he=ce.get(ue),pe,ye=0;ye<he.length;ye++)if(pe=he[ye],y===pe||y["$eql?"](pe)){f.set(pe,U);return}he.push(y),f.set(y,U)}},v.hash_get=function(f,y){var U=typeof y;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return f.get(y);if(f.$$keys){var te=y.$$is_string?y.valueOf():f.$$by_identity?v.id(y):y.$hash(),ue=f.$$keys.get(te),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],y===ce||y["$eql?"](ce))return f.get(ce)}else if(y.$$is_string)return f.get(te)}else if(y.$$is_string)return f.get(y.valueOf())};function be(f,y){var U=f.get(y);if(U!==void 0)return f.delete(y),U}v.hash_delete=function(f,y){var U=typeof y;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return be(f,y);if(f.$$keys){var te=y.$$is_string?y.valueOf():f.$$by_identity?v.id(y):y.$hash(),ue=f.$$keys.get(te),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],y===ce||y["$eql?"](ce))return ue.splice(he,1),ue.length===0&&f.$$keys.delete(te),be(f,ce)}else if(y.$$is_string)return be(f,te)}else if(y.$$is_string)return be(f,y.valueOf())},v.hash_rehash=function(f){var y=f.$$keys;return y&&y.clear(),v.hash_each(f,!1,function(U,te){var ue=typeof U;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var ce=U.$$is_string?U.valueOf():f.$$by_identity?v.id(U):U.$hash();if(y||(f.$$keys=y=new Map),!y.has(ce))return y.set(ce,[U]),[!1,!1];for(var he=y.get(ce),pe=he.length===1?he:ee(he),ye,we=0;we<pe.length;we++)ye=pe[we],(U===ye||U["$eql?"](ye))&&(he.splice(he.indexOf(ye),1),f.delete(ye));return he.push(U),[!1,!1]}),f},v.hash=function(){var f=arguments.length,y,U,te,ue,ce,he;if(f===1&&arguments[0].$$is_hash)return arguments[0];if(U=new Map,f===1)if(y=arguments[0],arguments[0].$$is_array){for(ue=y.length,te=0;te<ue;te++)y[te].length!==2&&k(v.ArgumentError,"value not of length 2: "+y[te].$inspect()),ce=y[te][0],he=y[te][1],v.hash_put(U,ce,he);return U}else{y=arguments[0];for(ce in y)W(y,ce)&&(he=y[ce],v.hash_put(U,ce,he));return U}for(f%2!==0&&k(v.ArgumentError,"odd number of arguments for Hash"),te=0;te<f;te+=2)ce=arguments[te],he=arguments[te+1],v.hash_put(U,ce,he);return U},v.hash2=function(f,y){z.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var U=new Map,te=0,ue=f.length;te<ue;te++)U.set(f[te],y[f[te]]);return U},v.hash_each=function(f,y,U){for(var te,ue=0,ce,he=Array.from(f.entries()),pe=he.length;ue<pe;ue++)if(ce=he[ue],te=U(ce[0],ce[1]),te[0])return te[1];return te?te[1]:y},v.range=function(f,y,U){var te=new v.Range;return te.begin=f,te.end=y,te.excl=U,te};var ie=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];v.ivar=function(f){return ie.indexOf(f)!==-1&&(f+="$"),f};function R(f){f.$$frozen&&k(v.FrozenError,"can't modify frozen "+f.$class()+": "+f,new Map([["receiver",f]]))}v.deny_frozen_access=R,v.freeze=function(f){return p(f,"$$frozen",!0),f.hasOwnProperty("$$id")||p(f,"$$id",S()),f.hasOwnProperty("$$meta")?f.$$meta.$freeze():p(f,"$$meta",null),f.hasOwnProperty("$$comparable")||p(f,"$$comparable",null),Object.seal(f),f};function H(f,y){var U=Object.getOwnPropertyNames(f),te=U.length,ue,ce,he;for(ue=0;ue<te;ue++)ce=U[ue],ce[0]!=="$"&&(he=Object.getOwnPropertyDescriptor(f,ce),he&&he.enumerable&&y(ce,he))}v.each_ivar=H,v.freeze_props=function(f){var y={get:null,set:function(U){R(f)},enumerable:!0};H(f,function(U,te){te.writable&&(y.get=se(te.value),Object.defineProperty(f,U,y))})},v.escape_regexp=function(f){return f.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},v.global_regexp=function(f){return f.global?f:(f.$$g==null?f.$$g=new RegExp(f.source,(f.multiline?"gm":"g")+(f.ignoreCase?"i":"")):f.$$g.lastIndex=null,f.$$g)},v.global_multiline_regexp=function(f){var y,U;return f.global&&f.multiline?f:(U="gm"+(f.ignoreCase?"i":""),f.multiline?(f.$$g==null&&(f.$$g=new RegExp(f.source,U)),y=f.$$g):(f.$$gm==null&&(f.$$gm=new RegExp(f.source,U)),y=f.$$gm),y.lastIndex=null,y)},v.regexp=function(f,y){for(var U,te=typeof y<"u"&&y&&y.indexOf("i")>=0,ue=0,ce=f.length;ue<ce;ue++)U=f[ue],U instanceof RegExp&&(U.ignoreCase!==te&&v.Kernel.$warn("ignore case doesn't match for "+U.source.$inspect(),new Map([["uplevel",1]])),U=U.source),U===""&&(U="(?:"+U+")"),f[ue]=U;return y?new RegExp(f.join(""),y):new RegExp(f.join(""))},v.modules={},v.loaded_features=["corelib/runtime"],v.current_dir=".",v.require_table={"corelib/runtime":!0},v.normalize=function(f){var y,U,te=[],ue="/";v.current_dir!=="."&&(f=v.current_dir.replace(/\/*$/,"/")+f),f=f.replace(/^\.\//,""),f=f.replace(/\.(rb|opal|js)$/,""),y=f.split(ue);for(var ce=0,he=y.length;ce<he;ce++)U=y[ce],U!==""&&(U===".."?te.pop():te.push(U));return te.join(ue)},v.loaded=function(f){var y,U,te;for(y=0,U=f.length;y<U;y++)te=v.normalize(f[y]),!v.require_table[te]&&(v.loaded_features.push(te),v.require_table[te]=!0)},v.load_normalized=function(f){v.loaded([f]);var y=v.modules[f];if(y){var U=y(v);if(typeof Promise<"u"&&U instanceof Promise)return U.then(se(!0))}else{var te=v.config.missing_require_severity,ue="cannot load such file -- "+f;te==="error"?k(v.LoadError,ue):te==="warning"&&z.warn("WARNING: LoadError: "+ue)}return!0},v.load=function(f){return f=v.normalize(f),v.load_normalized(f)},v.require=function(f){return f=v.normalize(f),v.require_table[f]?!1:v.load_normalized(f)},v.encodings=Object.create(null),v.set_encoding=function(f,y,U){typeof U>"u"&&(U="encoding"),(typeof f=="string"||f.$$frozen===!0)&&k(v.FrozenError,"can't modify frozen String");var te=v.find_encoding(y);return te===f[U]||(f[U]=te),f},v.find_encoding=function(f){var y=v.encodings,U=y[f]||y[f.toUpperCase()];return U||k(v.ArgumentError,"unknown encoding name - "+f),U},v.enc=function(f,y){var U=new String(f);return U=v.set_encoding(U,y),U.internal_encoding=U.encoding,U},v.binary=function(f){var y=new String(f);return v.set_encoding(y,"binary","internal_encoding")},v.last_promise=null,v.promise_unhandled_exception=!1,v.queue=function(f){if(v.last_promise)return v.last_promise=v.last_promise.then(function(){if(!v.promise_unhandled_exception)return f(v)}).catch(function(U){v.respond_to(U,"$full_message")&&(U=U.$full_message()),z.error(U),v.promise_unhandled_exception=!0,v.exit(1)}),v.last_promise;var y=f(v);return typeof Promise=="function"&&typeof y=="object"&&y instanceof Promise&&(v.last_promise=y),y};function X(f,y){return typeof f=="number"&&typeof y=="number"}v.rb_plus=function(f,y){return X(f,y)?f+y:f["$+"](y)},v.rb_minus=function(f,y){return X(f,y)?f-y:f["$-"](y)},v.rb_times=function(f,y){return X(f,y)?f*y:f["$*"](y)},v.rb_divide=function(f,y){return X(f,y)?f/y:f["$/"](y)},v.rb_lt=function(f,y){return X(f,y)?f<y:f["$<"](y)},v.rb_gt=function(f,y){return X(f,y)?f>y:f["$>"](y)},v.rb_le=function(f,y){return X(f,y)?f<=y:f["$<="](y)},v.rb_ge=function(f,y){return X(f,y)?f>=y:f["$>="](y)};function Q(f,y){return typeof f=="number"&&typeof y=="number"||typeof f=="string"&&typeof y=="string"}function ne(f,y){return Q(f,y)?f===y:A(f["$=="](y))}v.eqeq=ne,v.eqeqeq=function(f,y){return Q(f,y)?f===y:A(f["$==="](y))},v.neqeq=function(f,y){return Q(f,y)?f!==y:A(f["$!="](y))},v.not=function(f){return f==null||f===!1||w===f?!0:f===!0||f["$!"].$$pristine?!1:A(f["$!"]())};function se(f){return function(){return f}}v.return_val=se,v.return_self=function(){return this},v.return_ivar=function(f){return function(){return this[f]==null?w:this[f]}},v.assign_ivar=function(f){return function(y){return R(this),this[f]=y}},v.assign_ivar_val=function(f,y){return function(){return R(this),this[f]=y}},v.ensure_kwargs=function(f){if(f==null)return new Map;if(f.$$is_hash)return f;k(v.ArgumentError,"expected kwargs")},v.get_kwarg=function(f,y){var U=v.hash_get(f,y);return U===void 0&&k(v.ArgumentError,"missing keyword: "+y),U},v.large_array_unpack=function(f){var y=f.split(","),U=y.length,te;for(te=0;te<U;te++)switch(y[te][0]){case void 0:y[te]=w;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":y[te]=+y[te]}return y},v.opal32_init=se(1332765036);function oe(f,y){return f<<y|f>>>32-y}v.opal32_add=function(f,y){return f^=y,f=oe(f,1),f},v.BasicObject=D=E("BasicObject",null),v.Object=x=E("Object",v.BasicObject),v.Module=O=E("Module",v.Object),v.Class=Z=E("Class",v.Module),v.Opal=T=s("Opal"),v.Kernel=J=s("Kernel"),Y(v.BasicObject,v.Class.$$prototype),Y(v.Object,v.Class.$$prototype),Y(v.Module,v.Class.$$prototype),Y(v.Class,v.Class.$$prototype),D.$$const.BasicObject=D,c(x,"BasicObject",D),c(x,"Object",x),c(x,"Module",O),c(x,"Class",Z),c(x,"Opal",T),c(x,"Kernel",J),D.$$class=Z,x.$$class=Z,O.$$class=Z,Z.$$class=Z,T.$$class=O,J.$$class=O,p(x.$$prototype,"toString",function(){var f=this.$to_s();return f.$$is_string&&typeof f=="object"?f.valueOf():f}),p(x.$$prototype,"$require",v.require),v.top=new x,v.top.$to_s=v.top.$inspect=se("main"),v.top.$define_method=fe;function fe(){var f=fe.$$p;return fe.$$p=null,v.send(x,"define_method",arguments,f)}v.NilClass=E("NilClass",v.Object),c(x,"NilClass",v.NilClass),w=v.nil=new v.NilClass,w.$$id=b,w.call=w.apply=function(){k(v.LocalJumpError,"no block given")},w.$$frozen=!0,w.$$comparable=!1,Object.seal(w),v.thrower=function(f){var y={$thrower_type:f,$throw:function(U,te){throw U==null&&(U=w),this.is_orphan&&!te&&k(v.LocalJumpError,"unexpected "+f,U,f.$to_sym()),this.$v=U,this},is_orphan:!1};return y},Object.defineProperty(j,"@",{enumerable:!0,configurable:!0,get:function(){return A(j["!"])?j["!"].$backtrace():w},set:function(f){A(j["!"])?j["!"].$set_backtrace(f):k(v.ArgumentError,"$! not set")}}),v.t_eval_return=v.thrower("return"),TypeError.$$super=Error,v.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(n){var z=n.type_error,w=n.coerce_to,D=n.module,x=n.defs,O=n.slice,Z=n.eqeqeq,T=n.Kernel,J=n.truthy,v=n.Opal,L=n.nil,$e=n.$$$;return n.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(W){var Y=D(W,"Opal");x(Y,"$bridge",function(b,h){return n.bridge(b,h)}),x(Y,"$coerce_to!",function(b,h,S,j){var k,F,p=L;return k=O(arguments,3),F=k,p=w(b,h,S,F),Z(h,p)||T.$raise(z(b,h,S,p)),p},-4),x(Y,"$coerce_to?",function(b,h,S,j){var k,F,p=L;return k=O(arguments,3),F=k,!J(b["$respond_to?"](S))||(p=w(b,h,S,F),J(p["$nil?"]()))?L:(Z(h,p)||T.$raise(z(b,h,S,p)),p)},-4),x(Y,"$try_convert",function(b,h,S){return Z(h,b)?b:J(b["$respond_to?"](S))?b.$__send__(S):L}),x(Y,"$compare",function(b,h){var S=L;return S=b["$<=>"](h),J(S===L)&&T.$raise($e("ArgumentError"),"comparison of "+b.$class()+" with "+h.$class()+" failed"),S}),x(Y,"$destructure",function(b){if(b.length==1)return b[0];if(b.$$is_array)return b;for(var h=new Array(b.length),S=0,j=h.length;S<j;S++)h[S]=b[S];return h}),x(Y,"$respond_to?",function(b,h,S){return S==null&&(S=!1),b==null||!b.$$class?!1:b["$respond_to?"](h,S)},-3),x(Y,"$instance_variable_name!",function(b){return b=v["$coerce_to!"](b,$e("String"),"to_str"),J(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(b))||T.$raise($e("NameError").$new("'"+b+"' is not allowed as an instance variable name",b)),b}),x(Y,"$class_variable_name!",function(b){return b=v["$coerce_to!"](b,$e("String"),"to_str"),J(b.length<3||b.slice(0,2)!=="@@")&&T.$raise($e("NameError").$new("`"+b+"' is not allowed as a class variable name",b)),b}),x(Y,"$const_name?",function(b){return typeof b!="string"&&(b=v["$coerce_to!"](b,$e("String"),"to_str")),b[0]===b[0].toUpperCase()}),x(Y,"$const_name!",function(b){var h=this;return J($e("::","String","skip_raise")?"constant":L)&&(b=v["$coerce_to!"](b,$e("String"),"to_str")),(!b||b[0]!=b[0].toUpperCase())&&h.$raise($e("NameError"),"wrong constant name "+b),b}),x(Y,"$pristine",function(b,h){var S,j;S=O(arguments,1),j=S;for(var k,F,p=j.length-1;p>=0;p--)k=j[p],F=b.$$prototype[n.jsid(k)],F&&!F.$$stub&&(F.$$pristine=!0);return L},-2);var ee=[];return x(Y,"$inspect",function(b){var h=L,S=!1;return function(){try{try{return b===null?"null":b===void 0?"undefined":typeof b.$$class>"u"?Object.prototype.toString.apply(b):typeof b.$inspect!="function"||b.$inspect.$$stub||ee.indexOf(b.$__id__())!==-1?"#<"+b.$$class+":0x"+b.$__id__().$to_s(16)+">":(ee.push(b.$__id__()),S=!0,b.$inspect())}catch(j){if(n.rescue(j,[$e("Exception")])){h=j;try{return"#<"+b.$$class+":0x"+b.$__id__().$to_s(16)+">"}finally{n.pop_exception(j)}}else throw j}}finally{S&&ee.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(n){var z=n.truthy,w=n.coerce_to,D=n.const_set,x=n.Object,O=n.return_ivar,Z=n.assign_ivar,T=n.ivar,J=n.deny_frozen_access,v=n.freeze,L=n.prop,$e=n.jsid,W=n.each_ivar,Y=n.klass,ee=n.Opal,B=n.Kernel,b=n.defs,h=n.send,S=n.def,j=n.eqeqeq,k=n.Module,F=n.rb_lt,p=n.rb_gt,A=n.slice,P=n.to_a,I=n.return_val,q=n.eqeq,u=n.not,d=n.rb_le,M=n.range,g=n.send2,c=n.find_super,l=n.alias,E=[],G=n.nil,_=n.$$$;return n.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(s,$,r){var e=Y(s,$,"Module"),t=[e].concat(r),i=n.$r(t);function a(K){if(K.$$is_string)return K;var C=ee.$try_convert(K,_("String"),"to_str");if(C.$$is_string)return C;C===G?B.$raise(_("TypeError"),""+K+" is not a symbol nor a string"):B.$raise(_("TypeError"),"can't convert "+K.$class()+" to String ("+K.$class()+"#to_str gives "+C.$class())}b(e,"$allocate",function(){var C=this,V=n.allocate_module(G,function(){});return C!==n.Module&&Object.setPrototypeOf(V,C.$$prototype),V}),S(e,"$initialize",function K(){var C=K.$$p||G,V=this;return K.$$p=null,C!==G?h(V,"module_eval",[],C.$to_proc()):G}),S(e,"$===",function(C){var V=this;return z(C==null)?!1:n.is_a(C,V)}),S(e,"$<",function(C){var V=this;j(k,C)||B.$raise(_("TypeError"),"compared with non class/module");var re=V,ae,le,_e;if(re===C)return!1;for(le=0,ae=n.ancestors(V),_e=ae.length;le<_e;le++)if(ae[le]===C)return!0;for(le=0,ae=n.ancestors(C),_e=ae.length;le<_e;le++)if(ae[le]===V)return!1;return G}),S(e,"$<=",function(C){var V=this,re=G;return z(re=V["$equal?"](C))?re:F(V,C)}),S(e,"$>",function(C){var V=this;return j(k,C)||B.$raise(_("TypeError"),"compared with non class/module"),F(C,V)}),S(e,"$>=",function(C){var V=this,re=G;return z(re=V["$equal?"](C))?re:p(V,C)}),S(e,"$<=>",function(C){var V=this,re=G;return V===C?0:!j(k,C)||(re=F(V,C),z(re["$nil?"]()))?G:z(re)?-1:1}),S(e,"$alias_method",function(C,V){var re=this;return J(re),C=w(C,_("String"),"to_str"),V=w(V,_("String"),"to_str"),n.alias(re,C,V),re}),S(e,"$alias_native",function(C,V){var re=this;return V==null&&(V=C),J(re),n.alias_native(re,C,V),re},-2),S(e,"$ancestors",function(){var C=this;return n.ancestors(C)}),S(e,"$append_features",function(C){var V=this;return J(C),n.append_features(V,C),V}),S(e,"$attr_accessor",function(C){var V,re,ae=this;return V=A(arguments),re=V,h(ae,"attr_reader",P(re)),h(ae,"attr_writer",P(re))},-1),S(e,"$attr",function(C){var V,re,ae=this;return V=A(arguments),re=V,re.length==2&&(re[1]===!0||re[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),re[1]?ae.$attr_accessor(re[0]):ae.$attr_reader(re[0]),G):h(ae,"attr_reader",P(re))},-1),S(e,"$attr_reader",function(C){var V,re,ae=this;V=A(arguments),re=V,J(ae);for(var le=ae.$$prototype,_e=re.length-1;_e>=0;_e--){var de=re[_e],ge=$e(de),ve=T(de),me=O(ve);n.prop(le,ve,G),me.$$parameters=[],me.$$arity=0,n.defn(ae,ge,me)}return G},-1),S(e,"$attr_writer",function(C){var V,re,ae=this;V=A(arguments),re=V,J(ae);for(var le=ae.$$prototype,_e=re.length-1;_e>=0;_e--){var de=re[_e],ge=$e(de+"="),ve=T(de),me=Z(ve);me.$$parameters=[["req"]],me.$$arity=1,n.prop(le,ve,G),n.defn(ae,ge,me)}return G},-1),S(e,"$autoload",function(C,V){var re=this;return J(re),i("Opal")["$const_name?"](C)||B.$raise(_("NameError"),"autoload must be constant name: "+C),V==""&&B.$raise(_("ArgumentError"),"empty file name"),re.$$const.hasOwnProperty(C)||(re.$$autoload||(re.$$autoload={}),n.const_cache_version++,re.$$autoload[C]={path:V,loaded:!1,required:!1,success:!1,exception:!1},re.$const_added&&!re.$const_added.$$pristine&&re.$const_added(C)),G}),S(e,"$autoload?",function(C){var V=this;if(V.$$autoload&&V.$$autoload[C]&&!V.$$autoload[C].required&&!V.$$autoload[C].success)return V.$$autoload[C].path;for(var re=V.$ancestors(),ae=0,le=re.length;ae<le;ae++)if(re[ae].$$autoload&&re[ae].$$autoload[C]&&!re[ae].$$autoload[C].required&&!re[ae].$$autoload[C].success)return re[ae].$$autoload[C].path;return G}),S(e,"$class_variables",function(){var C=this;return Object.keys(n.class_variables(C))}),S(e,"$class_variable_get",function(C){var V=this;return C=ee["$class_variable_name!"](C),n.class_variable_get(V,C,!1)}),S(e,"$class_variable_set",function(C,V){var re=this;return J(re),C=ee["$class_variable_name!"](C),n.class_variable_set(re,C,V)}),S(e,"$class_variable_defined?",function(C){var V=this;return C=ee["$class_variable_name!"](C),n.class_variables(V).hasOwnProperty(C)}),S(e,"$const_added",I(G)),ee.$pristine(e,"const_added"),S(e,"$remove_class_variable",function(C){var V=this;if(J(V),C=ee["$class_variable_name!"](C),n.hasOwnProperty.call(V.$$cvars,C)){var re=V.$$cvars[C];return delete V.$$cvars[C],re}else B.$raise(_("NameError"),"cannot remove "+C+" for "+V)}),S(e,"$constants",function(C){var V=this;return C==null&&(C=!0),n.constants(V,C)},-1),b(e,"$constants",function(C){var V=this;if(C==null){var re=(V.$$nesting||[]).concat(x),ae,le={},_e,de;for(_e=0,de=re.length;_e<de;_e++)for(ae in re[_e].$$const)le[ae]=!0;return Object.keys(le)}else return n.constants(V,C)},-1),b(e,"$nesting",function(){var C=this;return C.$$nesting||[]}),S(e,"$const_defined?",function(C,V){var re=this;V==null&&(V=!0),C=i("Opal")["$const_name!"](C),z(C["$=~"](_(ee,"CONST_NAME_REGEXP")))||B.$raise(_("NameError").$new("wrong constant name "+C,C));var ae,le=[re],_e,de;for(V&&(le=le.concat(n.ancestors(re)),re.$$is_module&&(le=le.concat([x]).concat(n.ancestors(x)))),_e=0,de=le.length;_e<de;_e++)if(ae=le[_e],ae.$$const[C]!=null||ae.$$autoload&&ae.$$autoload[C]&&!ae.$$autoload[C].required&&!ae.$$autoload[C].success)return!0;return!1},-2),S(e,"$const_get",function(C,V){var re=this;return V==null&&(V=!0),C=i("Opal")["$const_name!"](C),C.indexOf("::")===0&&C!=="::"&&(C=C.slice(2)),z(C.indexOf("::")!=-1&&C!="::")?h(C.$split("::"),"inject",[re],function(le,_e){return le==null&&(le=G),_e==null&&(_e=G),le.$const_get(_e)}):(z(C["$=~"](_(ee,"CONST_NAME_REGEXP")))||B.$raise(_("NameError").$new("wrong constant name "+C,C)),V?n.$$([re],C):n.const_get_local(re,C))},-2),S(e,"$const_missing",function(C){var V=this,re=G;return re=q(V,x)?C:""+V+"::"+C,B.$raise(_("NameError").$new("uninitialized constant "+re,C))}),S(e,"$const_set",function(C,V){var re=this;return J(re),C=ee["$const_name!"](C),(z(C["$!~"](_(ee,"CONST_NAME_REGEXP")))||z(C["$start_with?"]("::")))&&B.$raise(_("NameError").$new("wrong constant name "+C,C)),D(re,C,V),V}),S(e,"$public_constant",I(G)),S(e,"$define_method",function K(C,V){var re=K.$$p||G,ae=this,le=G,_e=G,de=G;return K.$$p=null,J(ae),V===void 0&&re===G&&B.$raise(_("ArgumentError"),"tried to create a Proc object without a block"),C=a(C),z(V!==void 0)&&(re=j(_("Proc"),le=V)?V:j(_("Method"),le)?V.$to_proc().$$unbound:j(_("UnboundMethod"),le)?n.wrap_method_body(V.$$method):B.$raise(_("TypeError"),"wrong argument type "+V.$class()+" (expected Proc/Method/UnboundMethod)"),z(!V.$$is_proc)&&(_e=V.$owner(),z(_e.$$is_class)&&u(d(ae,_e))&&(de=z(_e.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+_e,B.$raise(_("TypeError"),de)))),typeof Proxy<"u"&&(re.$$proxy_target=re,re=new Proxy(re,{apply:function(ge,ve,me){var be=ge.$$jsid,ie=ge.$$is_lambda;ge.$$jsid=C,ge.$$is_lambda=!0;try{return ge.apply(ve,me)}catch(R){if(R===ge.$$brk||R===ge.$$ret)return R.$v;throw R}finally{ge.$$jsid=be,ge.$$is_lambda=ie}}})),re.$$jsid=C,re.$$s=null,re.$$def=re,re.$$define_meth=!0,n.defn(ae,$e(C),re)},-2),S(e,"$freeze",function(){var C=this;return z(C["$frozen?"]())?C:(C.hasOwnProperty("$$base_module")||L(C,"$$base_module",null),v(C))}),S(e,"$remove_method",function(C){var V,re,ae=this;V=A(arguments),re=V;for(var le=0;le<re.length;le++){var _e=a(re[le]);J(ae),n.rdef(ae,"$"+_e)}return ae},-1),S(e,"$singleton_class?",function(){var C=this;return!!C.$$is_singleton}),S(e,"$include",function(C){var V,re,ae=this;V=A(arguments),re=V;for(var le=re.length-1;le>=0;le--){var _e=re[le];_e.$$is_module||B.$raise(_("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$append_features(ae),_e.$included(ae)}return ae},-1),S(e,"$included_modules",function(){var C=this;return n.included_modules(C)}),S(e,"$include?",function(C){var V=this;C.$$is_module||B.$raise(_("TypeError"),"wrong argument type "+C.$class()+" (expected Module)");var re,ae,le,_e=n.ancestors(V);for(re=0,ae=_e.length;re<ae;re++)if(le=_e[re],le===C&&le!==V)return!0;return!1}),S(e,"$instance_method",function(C){var V=this,re=V.$$prototype[$e(C)];return(!re||re.$$stub)&&B.$raise(_("NameError").$new("undefined method `"+C+"' for class `"+V.$name()+"'",C)),_("UnboundMethod").$new(V,re.$$owner||V,re,C)}),S(e,"$instance_methods",function(C){var V=this;return C==null&&(C=!0),z(C)?n.instance_methods(V):n.own_instance_methods(V)},-1),S(e,"$included",I(G)),S(e,"$extended",I(G)),S(e,"$extend_object",function(C){return J(C),G}),S(e,"$method_added",function(C){return A(arguments),G},-1),S(e,"$method_removed",function(C){return A(arguments),G},-1),S(e,"$method_undefined",function(C){return A(arguments),G},-1),S(e,"$module_eval",function K(C){var V=K.$$p||G,re,ae,le,_e=this,de=G,ge=G,ve=G,me=G,be=G,ie=G;K.$$p=null,re=A(arguments),ae=re,z(V["$nil?"]())&&z(!!n.compile)?(z(M(1,3,!1)["$cover?"](ae.$size()))||B.$raise(_("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(P(ae)),de=le[0]==null?G:le[0],ge=le[1]==null?G:le[1],le[2]==null||le[2],ve=new Map([["file",z(me=ge)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),ie=ee.$compile(de,be),V=h(B,"proc",[],function X(){var Q=X.$$s==null?this:X.$$s;return new Function("Opal,self","return "+ie)(n,Q)},{$$s:_e})):z(ae["$any?"]())&&B.$raise(_("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var R=V.$$s,H;return V.$$s=null,H=V.apply(_e,[_e]),V.$$s=R,H},-1),S(e,"$module_exec",function K(C){var V=K.$$p||G,re,ae,le=this;K.$$p=null,re=A(arguments),ae=re,V===G&&B.$raise(_("LocalJumpError"),"no block given");var _e=V.$$s,de;return V.$$s=null,de=V.apply(le,ae),V.$$s=_e,de},-1),S(e,"$method_defined?",function(C){var V=this,re=V.$$prototype[$e(C)];return!!re&&!re.$$stub}),S(e,"$module_function",function(C){var V,re,ae=this;if(V=A(arguments),re=V,J(ae),re.length===0)return ae.$$module_function=!0,G;for(var le=0,_e=re.length;le<_e;le++){var de=re[le],ge=$e(de),ve=ae.$$prototype[ge];n.defs(ae,ge,ve)}return re.length===1?re[0]:re},-1),S(e,"$name",function(){var C=this;if(C.$$full_name)return C.$$full_name;for(var V=[],re=C;re;){if(re.$$name===G||re.$$name==null)return G;if(V.unshift(re.$$name),re=re.$$base_module,re===x)break}return V.length===0?G:C.$$full_name=V.join("::")}),S(e,"$prepend",function(C){var V,re,ae=this;V=A(arguments),re=V,re.length===0&&B.$raise(_("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=re.length-1;le>=0;le--){var _e=re[le];_e.$$is_module||B.$raise(_("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$prepend_features(ae),_e.$prepended(ae)}return ae},-1),S(e,"$prepend_features",function(C){var V=this;return J(C),V.$$is_module||B.$raise(_("TypeError"),"wrong argument type "+V.$class()+" (expected Module)"),n.prepend_features(V,C),V}),S(e,"$prepended",I(G)),S(e,"$remove_const",function(C){var V=this;return J(V),n.const_remove(V,C)}),S(e,"$to_s",function(){var C=this,V=G;return z(V=n.Module.$name.call(C))?V:"#<"+(C.$$is_module?"Module":"Class")+":0x"+C.$__id__().$to_s(16)+">"}),S(e,"$undef_method",function(C){var V,re,ae=this;V=A(arguments),re=V;for(var le=0;le<re.length;le++){var _e=a(re[le]);J(ae),n.udef(ae,"$"+_e)}return ae},-1),S(e,"$instance_variables",function(){var C=this,V=G;V=(n.Module.$$nesting=t,C.$constants());var re=[];return W(C,function(ae){ae!=="constructor"&&!V["$include?"](ae)&&re.push("@"+ae)}),re});function o(K,C){var V,re=n.own_instance_methods(K);for(V=0;V<re.length;V++){var ae=re[V],le=$e(ae),_e=K.$$prototype[le],de=n.wrap_method_body(_e);de.$$jsid=ae,n.defn(C,le,de)}}function m(K,C){for(var V=K.$$own_included_modules,re=V.length-1;re>=0;re--)n.append_features(V[re],C)}function N(K,C){for(var V=K.$$own_prepended_modules,re=V.length-1;re>=0;re--)n.prepend_features(V[re],C)}return S(e,"$initialize_copy",function(C){var V=this;return o(C,V),m(C,V),N(C,V),V.$$cloned_from=C.$$cloned_from.concat(C),V.$copy_class_variables(C),V.$copy_constants(C)}),S(e,"$initialize_dup",function K(C){var V=K.$$p||G,re=this;return K.$$p=null,g(re,c(re,"initialize_dup",K,!1,!0),"initialize_dup",[C],V),re.$copy_singleton_methods(C)}),S(e,"$copy_class_variables",function(C){var V=this;for(var re in C.$$cvars)V.$$cvars[re]=C.$$cvars[re]}),S(e,"$copy_constants",function(C){var V=this,re,ae=C.$$const;for(re in ae)D(V,re,ae[re])}),S(e,"$refine",function K(C){var V=K.$$p||G,re,ae=this,le=G,_e=G,de=G;return K.$$p=null,re=[ae,G,G],le=re[0],_e=re[1],de=re[2],de=n.id(C),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?_e=ae.$$refine_modules[de]=_("Refinement").$new():_e=ae.$$refine_modules[de],_e.refinement_module=le,_e.refined_class=C,h(_e,"class_exec",[],V.$to_proc()),_e}),S(e,"$refinements",function(){var C=this,V=C.$$refine_modules,re=new Map;if(typeof V>"u")return re;for(var ae in V)re["$[]="](V[ae].refined_class,V[ae]);return re}),S(e,"$using",function(C){return B.$raise("Module#using is not permitted in methods")}),l(e,"class_eval","module_eval"),l(e,"class_exec","module_exec"),l(e,"inspect","to_s")}("::",null,E),function(s,$){var r=Y(s,$,"Refinement"),e=r.$$prototype;return e.refinement_module=e.refined_class=G,r.$attr_reader("refined_class"),S(r,"$inspect",function t(){var i=t.$$p||G,a=this;return t.$$p=null,z(a.refinement_module)?"#<refinement:"+a.refined_class.$inspect()+"@"+a.refinement_module.$inspect()+">":g(a,c(a,"inspect",t,!1,!0),"inspect",[],i)})}("::",k)};Opal.modules["corelib/class"]=function(n){var z=n.klass,w=n.send,D=n.defs,x=n.def,O=n.ensure_kwargs,Z=n.hash_get,T=n.eqeq,J=n.truthy,v=n.rb_plus,L=n.return_val,$e=n.slice,W=n.send2,Y=n.find_super,ee=n.Kernel,B=n.alias,b=n.top,h=[],S=n.nil,j=n.$$$;return n.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),b.$require("corelib/module"),function(k,F,p){var A=z(k,F,"Class"),P=[A].concat(p),I=n.$r(P);return D(A,"$new",function q(u){var d=q.$$p||S;if(q.$$p=null,u==null&&(u=I("Object")),!u.$$is_class)throw n.TypeError.$new("superclass must be a Class");var M=n.allocate_class(S,u);return u.$inherited(M),d!==S&&w(M,"class_eval",[],d.$to_proc()),M},-1),x(A,"$allocate",function(){var u=this,d=new u.$$constructor;return d.$$id=n.uid(),d}),x(A,"$clone",function(u){var d,M=this,g=S;return u=O(u),d=Z(u,"freeze"),d==null&&(d=S),J(d["$nil?"]())||T(d,!0)||T(d,!1)||M.$raise(I("ArgumentError"),"unexpected value for freeze: "+d.$class()),g=n.allocate_class(S,M.$$super),g.$copy_instance_variables(M),g.$copy_singleton_methods(M),g.$initialize_clone(M,new Map([["freeze",d]])),(T(d,!0)||J(d["$nil?"]())&&J(M["$frozen?"]()))&&g.$freeze(),g},-1),x(A,"$dup",function(){var u=this,d=S;return d=n.allocate_class(S,u.$$super),d.$copy_instance_variables(u),d.$initialize_dup(u),d}),x(A,"$descendants",function(){var u=this;return v(u.$subclasses(),w(u.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),x(A,"$inherited",L(S)),x(A,"$new",function q(u){var d=q.$$p||S,M,g,c=this;q.$$p=null,M=$e(arguments),g=M;var l=c.$allocate();return n.send(l,l.$initialize,g,d),l},-1),x(A,"$subclasses",function(){var u=this;if(typeof WeakRef<"u"){var d,M,g=[];for(d=0;d<u.$$subclasses.length;d++)M=u.$$subclasses[d].deref(),M!==void 0&&g.push(M);return g}else return u.$$subclasses}),x(A,"$superclass",function(){var u=this;return u.$$super||S}),x(A,"$to_s",function q(){q.$$p;var u=this;q.$$p=null;var d=u.$$singleton_of;return d&&d.$$is_a_module?"#<Class:"+d.$name()+">":d?"#<Class:#<"+d.$$class.$name()+":0x"+n.id(d).$to_s(16)+">>":W(u,Y(u,"to_s",q,!1,!0),"to_s",[],null)}),x(A,"$attached_object",function(){var u=this;if(u.$$singleton_of!=null)return u.$$singleton_of;ee.$raise(j("TypeError"),"`"+u+"' is not a singleton class")}),B(A,"inspect","to_s")}("::",null,h)};Opal.modules["corelib/basic_object"]=function(n){var z=n.klass,w=n.slice,D=n.def,x=n.alias,O=n.return_val,Z=n.Opal,T=n.truthy,J=n.range,v=n.Kernel,L=n.to_a,$e=n.send,W=n.eqeq,Y=n.rb_ge,ee=n.nil,B=n.$$$;return n.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(b,h){var S=z(b,h,"BasicObject");return D(S,"$initialize",function(k){return w(arguments),ee},-1),D(S,"$==",function(k){var F=this;return F===k}),D(S,"$eql?",function(k){var F=this;return F["$=="](k)}),x(S,"equal?","=="),D(S,"$__id__",function(){var k=this;return k.$$id!=null||n.prop(k,"$$id",n.uid()),k.$$id}),D(S,"$__send__",function j(k,F){var p=j.$$p||ee,A,P,I=this;j.$$p=null,A=w(arguments,1),P=A,k.$$is_string||I.$raise(B("TypeError"),""+I.$inspect()+" is not a symbol nor a string");var q=I[n.jsid(k)];return q?(p!==ee&&(q.$$p=p),q.apply(I,P)):(p!==ee&&(I.$method_missing.$$p=p),I.$method_missing.apply(I,[k].concat(P)))},-2),D(S,"$!",O(!1)),Z.$pristine("!"),D(S,"$!=",function(k){var F=this;return F["$=="](k)["$!"]()}),D(S,"$instance_eval",function j(k){var F=j.$$p||ee,p,A,P,I=this,q=ee,u=ee,d=ee,M=ee,g=ee,c=ee;if(j.$$p=null,p=w(arguments),A=p,T(F["$nil?"]())&&T(!!n.compile))T(J(1,3,!1)["$cover?"](A.$size()))||v.$raise(B("ArgumentError"),"wrong number of arguments (0 for 1..3)"),P=[].concat(L(A)),q=P[0]==null?ee:P[0],u=P[1]==null?ee:P[1],P[2]==null||P[2],d=new Map([["file",T(M=u)?M:"(eval)"],["eval",!0]]),g=new Map([["arity_check",!1]]).$merge(d),c=Z.$compile(q,g),F=$e(v,"proc",[],function G(){var _=G.$$s==null?this:G.$$s;return new Function("Opal,self","return "+c)(n,_)},{$$s:I});else{if(T(F["$nil?"]())&&T(Y(A.$length(),1))&&W(A.$first()["$[]"](0),"@"))return I.$instance_variable_get(A.$first());T(A["$any?"]())&&v.$raise(B("ArgumentError"),"wrong number of arguments ("+A.$size()+" for 0)")}var l=F.$$s,E;if(F.$$s=null,I.$$is_a_module){I.$$eval=!0;try{E=F.call(I,I)}finally{I.$$eval=!1}}else E=F.call(I,I);return F.$$s=l,E},-1),D(S,"$instance_exec",function j(k){var F=j.$$p||ee,p,A,P=this;j.$$p=null,p=w(arguments),A=p,T(F)||v.$raise(B("ArgumentError"),"no block given");var I=F.$$s,q;if(F.$$s=null,P.$$is_a_module){P.$$eval=!0;try{q=F.apply(P,A)}finally{P.$$eval=!1}}else q=F.apply(P,A);return F.$$s=I,q},-1),D(S,"$singleton_method_added",function(k){return w(arguments),ee},-1),D(S,"$singleton_method_removed",function(k){return w(arguments),ee},-1),D(S,"$singleton_method_undefined",function(k){return w(arguments),ee},-1),D(S,"$method_missing",function j(k,F){j.$$p;var p,A,P=this,I=ee;return j.$$p=null,p=w(arguments,1),A=p,I=Z.$inspect(P),v.$raise(B("NoMethodError").$new("undefined method `"+k+"' for "+I,k,A),ee,v.$caller(1))},-2),Z.$pristine(S,"method_missing"),D(S,"$respond_to_missing?",function(k,F){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(n){var z=n.truthy,w=n.coerce_to,D=n.respond_to,x=n.Opal,O=n.deny_frozen_access,Z=n.freeze,T=n.freeze_props,J=n.jsid,v=n.each_ivar,L=n.module,$e=n.return_val,W=n.def,Y=n.Kernel,ee=n.gvars,B=n.slice,b=n.send,h=n.to_a,S=n.ensure_kwargs,j=n.hash_get,k=n.eqeq,F=n.rb_plus,p=n.extract_kwargs,A=n.eqeqeq,P=n.return_self,I=n.rb_le,q=n.rb_lt,u=n.Object,d=n.alias,M=n.klass,g=[],c=n.nil,l=n.$$$;return n.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(E,G){var _=L(E,"Kernel"),s=[_].concat(G),$=n.$r(s);W(_,"$=~",$e(!1)),W(_,"$!~",function(t){var i=this;return i["$=~"](t)["$!"]()}),W(_,"$===",function(t){var i=this,a=c;return z(a=i.$object_id()["$=="](t.$object_id()))?a:i["$=="](t)}),W(_,"$<=>",function(t){var i=this;i.$$comparable=!0;var a=i["$=="](t);return a&&a!==c?0:c}),W(_,"$method",function(t){var i=this,a=i[J(t)];return(!a||a.$$stub)&&Y.$raise(l("NameError").$new("undefined method `"+t+"' for class `"+i.$class()+"'",t)),l("Method").$new(i,a.$$owner||i.$class(),a,t)}),W(_,"$methods",function(t){var i=this;return t==null&&(t=!0),z(t)?n.methods(i):n.own_methods(i)},-1),W(_,"$public_methods",function(t){var i=this;return t==null&&(t=!0),z(t)?n.methods(i):n.receiver_methods(i)},-1),W(_,"$Array",function(t){var i;return t===c?[]:t.$$is_array?t:(i=x["$coerce_to?"](t,l("Array"),"to_ary"),i!==c||(i=x["$coerce_to?"](t,l("Array"),"to_a"),i!==c)?i:[t])}),W(_,"$at_exit",function e(){var t=e.$$p||c,i=c;return ee.__at_exit__==null&&(ee.__at_exit__=c),e.$$p=null,ee.__at_exit__=z(i=ee.__at_exit__)?i:[],ee.__at_exit__["$<<"](t),t}),W(_,"$caller",function(t,i){t==null&&(t=1),i==null&&(i=c);var a,o;a=new Error().$backtrace(),o=[];for(var m=t+1,N=a.length;m<N;m++)a[m].match(/runtime\.js/)||o.push(a[m]);return i!=c&&(o=o.slice(0,i)),o},-1),W(_,"$caller_locations",function(t){var i,a,o=this;return i=B(arguments),a=i,b(b(o,"caller",h(a)),"map",[],function(N){return N==null&&(N=c),l(l(l("Thread"),"Backtrace"),"Location").$new(N)})},-1),W(_,"$class",function(){var t=this;return t.$$class}),W(_,"$copy_instance_variables",function(t){var i=this,a=Object.keys(t),o,m,N;for(o=0,m=a.length;o<m;o++)N=a[o],N.charAt(0)!=="$"&&t.hasOwnProperty(N)&&(i[N]=t[N])}),W(_,"$copy_singleton_methods",function(t){var i=this,a,o,m,N;if(t.hasOwnProperty("$$meta")&&t.$$meta!==null){var K=n.get_singleton_class(t),C=n.get_singleton_class(i);for(m=Object.getOwnPropertyNames(K.$$prototype),a=0,N=m.length;a<N;a++)o=m[a],n.is_method(o)&&(C.$$prototype[o]=K.$$prototype[o]);C.$$const=Object.assign({},K.$$const),Object.setPrototypeOf(C.$$prototype,Object.getPrototypeOf(K.$$prototype))}for(a=0,m=Object.getOwnPropertyNames(t),N=m.length;a<N;a++)o=m[a],o.charAt(0)==="$"&&o.charAt(1)!=="$"&&t.hasOwnProperty(o)&&(i[o]=t[o])}),W(_,"$clone",function(t){var i,a=this,o=c;return t=S(t),i=j(t,"freeze"),i==null&&(i=c),z(i["$nil?"]())||k(i,!0)||k(i,!1)||a.$raise($("ArgumentError"),"unexpected value for freeze: "+i.$class()),o=a.$class().$allocate(),o.$copy_instance_variables(a),o.$copy_singleton_methods(a),o.$initialize_clone(a,new Map([["freeze",i]])),(k(i,!0)||z(i["$nil?"]())&&z(a["$frozen?"]()))&&o.$freeze(),o},-1),W(_,"$initialize_clone",function(t,i){var a=this;return i=S(i),j(i,"freeze"),a.$initialize_copy(t),a},-2),W(_,"$define_singleton_method",function e(t,i){var a=e.$$p||c,o=this;return e.$$p=null,b(o.$singleton_class(),"define_method",[t,i],a.$to_proc())},-2),W(_,"$dup",function(){var t=this,i=c;return i=t.$class().$allocate(),i.$copy_instance_variables(t),i.$initialize_dup(t),i}),W(_,"$initialize_dup",function(t){var i=this;return i.$initialize_copy(t)}),W(_,"$enum_for",function e(t,i){var a=e.$$p||c,o,m,N,K=this;return e.$$p=null,o=B(arguments),o.length>0&&(m=o.shift()),m==null&&(m="each"),N=o,b(l("Enumerator"),"for",[K,m].concat(h(N)),a.$to_proc())},-1),W(_,"$equal?",function(t){var i=this;return i===t}),W(_,"$exit",function(t){var i=c,a=c;for(ee.__at_exit__==null&&(ee.__at_exit__=c),t==null&&(t=!0),ee.__at_exit__=z(i=ee.__at_exit__)?i:[];!z(ee.__at_exit__["$empty?"]());)a=ee.__at_exit__.$pop(),a.$call();return t.$$is_boolean?t=t?0:1:t=w(t,l("Integer"),"to_int"),n.exit(t),c},-1),W(_,"$extend",function(t){var i,a,o=this;i=B(arguments),a=i,a.length==0&&o.$raise(l("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),O(o);for(var m=o.$singleton_class(),N=a.length-1;N>=0;N--){var K=a[N];K.$$is_module||Y.$raise(l("TypeError"),"wrong argument type "+K.$class()+" (expected Module)"),K.$append_features(m),K.$extend_object(o),K.$extended(o)}return o},-1),W(_,"$freeze",function(){var t=this;return z(t["$frozen?"]())?t:typeof t=="object"?(T(t),Z(t)):t}),W(_,"$frozen?",function(){var t=this;switch(typeof t){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return t.$$frozen||!1;default:return!1}}),W(_,"$gets",function(t){var i,a;return ee.stdin==null&&(ee.stdin=c),i=B(arguments),a=i,b(ee.stdin,"gets",h(a))},-1),W(_,"$hash",function(){var t=this;return t.$__id__()}),W(_,"$initialize_copy",$e(c));var r=[];return W(_,"$inspect",function(){var t=this,i=c,a=c,o=c,m=c;return function(){try{try{return i="",a=t.$__id__(),z(r["$include?"](a))?i=" ...":(r["$<<"](a),o=!0,b(t.$instance_variables(),"each",[],function N(K){var C=N.$$s==null?this:N.$$s,V=c,re=c;return K==null&&(K=c),V=C.$instance_variable_get(K),re=$("Opal").$inspect(V),i=F(i," "+K+"="+re)},{$$s:t})),"#<"+t.$class()+":0x"+a.$to_s(16)+i+">"}catch(N){if(n.rescue(N,[$("StandardError")])){m=N;try{return"#<"+t.$class()+":0x"+a.$to_s(16)+">"}finally{n.pop_exception(N)}}else throw N}}finally{z(o)&&r.$pop()}}()}),W(_,"$instance_of?",function(t){var i=this;return!t.$$is_class&&!t.$$is_module&&Y.$raise(l("TypeError"),"class or module required"),i.$$class===t}),W(_,"$instance_variable_defined?",function(t){var i=this;return t=x["$instance_variable_name!"](t),n.hasOwnProperty.call(i,t.substr(1))}),W(_,"$instance_variable_get",function(t){var i=this;t=x["$instance_variable_name!"](t);var a=i[n.ivar(t.substr(1))];return a??c}),W(_,"$instance_variable_set",function(t,i){var a=this;return O(a),t=x["$instance_variable_name!"](t),a[n.ivar(t.substr(1))]=i}),W(_,"$remove_instance_variable",function(t){var i=this;t=x["$instance_variable_name!"](t);var a=n.ivar(t.substr(1)),o;return i.hasOwnProperty(a)?(o=i[a],delete i[a],o):Y.$raise(l("NameError"),"instance variable "+t+" not defined")}),W(_,"$instance_variables",function(){var t=this,i=[];return v(t,function(a){a.substr(-1)==="$"&&(a=a.slice(0,a.length-1)),i.push("@"+a)}),i}),W(_,"$Integer",function(t,i,a){var o,m,N,K;o=B(arguments,1),m=p(o),m=S(m),o.length>0&&(N=o.shift()),K=j(m,"exception"),K==null&&(K=!0);var C,V,re;if(K=z(K),!t.$$is_string){if(N!==void 0)if(K)Y.$raise(l("ArgumentError"),"base specified for non string value");else return c;if(t===c)if(K)Y.$raise(l("TypeError"),"can't convert nil into Integer");else return c;if(t.$$is_number){if(t===1/0||t===-1/0||isNaN(t))if(K)Y.$raise(l("FloatDomainError"),t);else return c;return Math.floor(t)}if(t["$respond_to?"]("to_int")&&(C=t.$to_int(),n.is_a(C,l("Integer")))||t["$respond_to?"]("to_i")&&(C=t.$to_i(),n.is_a(C,l("Integer"))))return C;if(K)Y.$raise(l("TypeError"),"can't convert "+t.$class()+" into Integer");else return c}if(t==="0")return 0;if(N===void 0)N=0;else if(N=w(N,l("Integer"),"to_int"),N===1||N<0||N>36)if(K)Y.$raise(l("ArgumentError"),"invalid radix "+N);else return c;if(V=t.toLowerCase(),V=V.replace(/(\d)_(?=\d)/g,"$1"),V=V.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,le,_e){switch(_e){case"0b":if(N===0||N===2)return N=2,le;case"0":case"0o":if(N===0||N===8)return N=8,le;case"0d":if(N===0||N===10)return N=10,le;case"0x":if(N===0||N===16)return N=16,le}if(K)Y.$raise(l("ArgumentError"),'invalid value for Integer(): "'+t+'"');else return c}),N=N===0?10:N,re="0-"+(N<=10?N-1:"9a-"+String.fromCharCode(97+(N-11))),!new RegExp("^\\s*[+-]?["+re+"]+\\s*$").test(V))if(K)Y.$raise(l("ArgumentError"),'invalid value for Integer(): "'+t+'"');else return c;if(C=parseInt(V,N),isNaN(C))if(K)Y.$raise(l("ArgumentError"),'invalid value for Integer(): "'+t+'"');else return c;return C},-2),W(_,"$Float",function(t,i){var a;i=S(i),a=j(i,"exception"),a==null&&(a=!0);var o;if(a=z(a),t===c)if(a)Y.$raise(l("TypeError"),"can't convert nil into Float");else return c;if(t.$$is_string){if(o=t.toString(),o=o.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(o))return Y.$Integer(o);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(o))if(a)Y.$raise(l("ArgumentError"),'invalid value for Float(): "'+t+'"');else return c;return parseFloat(o)}return a?x["$coerce_to!"](t,l("Float"),"to_f"):w(t,l("Float"),"to_f")},-2),W(_,"$Hash",function(t){return z(t["$nil?"]())||k(t,[])?new Map:A(l("Hash"),t)?t:x["$coerce_to!"](t,l("Hash"),"to_hash")}),W(_,"$is_a?",function(t){var i=this;return!t.$$is_class&&!t.$$is_module&&Y.$raise(l("TypeError"),"class or module required"),n.is_a(i,t)}),W(_,"$itself",P),W(_,"$lambda",function e(){var t=e.$$p||c;return e.$$p=null,n.lambda(t)}),W(_,"$load",function(t){return t=x["$coerce_to!"](t,l("String"),"to_str"),n.load(t)}),W(_,"$loop",function e(){var t=e.$$p||c,i=this,a=c;if(e.$$p=null,t===c)return b(i,"enum_for",["loop"],function(){return l(l("Float"),"INFINITY")});for(;z(!0);)try{n.yieldX(t,[])}catch(o){if(n.rescue(o,[l("StopIteration")])){a=o;try{return a.$result()}finally{n.pop_exception(o)}}else throw o}return i}),W(_,"$nil?",$e(!1)),W(_,"$printf",function(t){var i,a,o=this,m=c;return ee.stdout==null&&(ee.stdout=c),i=B(arguments),a=i,z(a["$empty?"]())||(m=z(a[0].$$is_string)?ee.stdout:a.$shift(),m.$write(b(o,"format",h(a)))),c},-1),W(_,"$proc",function e(){var t=e.$$p||c;return e.$$p=null,z(t)||Y.$raise(l("ArgumentError"),"tried to create Proc object without a block"),t.$$is_lambda=!1,t}),W(_,"$puts",function(t){var i,a;return ee.stdout==null&&(ee.stdout=c),i=B(arguments),a=i,b(ee.stdout,"puts",h(a))},-1),W(_,"$p",function(t){var i,a;return i=B(arguments),a=i,b(a,"each",[],function(m){return ee.stdout==null&&(ee.stdout=c),m==null&&(m=c),ee.stdout.$puts(m.$inspect())}),z(I(a.$length(),1))?a["$[]"](0):a},-1),W(_,"$print",function(t){var i,a;return ee.stdout==null&&(ee.stdout=c),i=B(arguments),a=i,b(ee.stdout,"print",h(a))},-1),W(_,"$readline",function(t){var i,a;return ee.stdin==null&&(ee.stdin=c),i=B(arguments),a=i,b(ee.stdin,"readline",h(a))},-1),W(_,"$warn",function(t,i){var a,o,m,N,K,C,V=this,re=c;return ee.VERBOSE==null&&(ee.VERBOSE=c),ee.stderr==null&&(ee.stderr=c),a=B(arguments),o=p(a),o=S(o),m=a,N=j(o,"uplevel"),N==null&&(N=c),z(N)&&(N=x["$coerce_to!"](N,l("Integer"),"to_str"),z(q(N,0))&&Y.$raise(l("ArgumentError"),"negative level ("+N+")"),re=(K=(C=V.$caller(F(N,1),1).$first(),C===c||C==null?c:C.$split(":in `")),K===c||K==null?c:K.$first()),z(re)&&(re=""+re+": "),m=b(m,"map",[],function(le){return le==null&&(le=c),""+re+"warning: "+le})),z(ee.VERBOSE["$nil?"]())||z(m["$empty?"]())?c:b(ee.stderr,"puts",h(m))},-1),W(_,"$raise",function(t,i,a){throw ee["!"]==null&&(ee["!"]=c),i==null&&(i=c),a==null&&(a=c),t==null&&ee["!"]!==c?ee["!"]:(t==null?t=l("RuntimeError").$new(""):D(t,"$to_str")?t=l("RuntimeError").$new(t.$to_str()):t.$$is_class&&D(t,"$exception")?t=t.$exception(i):t.$$is_exception||(t=l("TypeError").$new("exception class/object expected")),a!==c&&t.$set_backtrace(a),ee["!"]!==c&&n.exceptions.push(ee["!"]),ee["!"]=t,t)},-1),W(_,"$rand",function(t){return t===void 0?l(l("Random"),"DEFAULT").$rand():(t.$$is_number&&(t<0&&(t=Math.abs(t)),t%1!==0&&(t=t.$to_i()),t===0&&(t=void 0)),l(l("Random"),"DEFAULT").$rand(t))},-1),W(_,"$respond_to?",function(t,i){var a=this;i==null&&(i=!1);var o=a[J(t)];return typeof o=="function"&&!o.$$stub?!0:a["$respond_to_missing?"].$$pristine===!0?!1:a["$respond_to_missing?"](t,i)},-2),W(_,"$respond_to_missing?",function(t,i){return!1},-2),x.$pristine(_,"respond_to?","respond_to_missing?"),W(_,"$require",function(t){return typeof t!="string"&&n.String&&n.Array&&(t=x["$coerce_to!"](t,l("String"),"to_str")),n.require(t)}),W(_,"$require_relative",function(t){return x["$try_convert!"](t,l("String"),"to_str"),t=l("File").$expand_path(l("File").$join(n.current_file,"..",t)),n.require(t)}),W(_,"$require_tree",function(t,i){var a;i=S(i),a=j(i,"autoload"),a==null&&(a=!1);var o=[];t=l("File").$expand_path(t),t=n.normalize(t),t==="."&&(t="");for(var m in n.modules)m["$start_with?"](t)&&(a?o.push([m,!0]):o.push([m,n.require(m)]));return o},-2),W(_,"$singleton_class",function(){var t=this;return n.get_singleton_class(t)}),W(_,"$sleep",function(t){t==null&&(t=c),t===c&&Y.$raise(l("TypeError"),"can't convert NilClass into time interval"),t.$$is_number||Y.$raise(l("TypeError"),"can't convert "+t.$class()+" into time interval"),t<0&&Y.$raise(l("ArgumentError"),"time interval must be positive");for(var i=n.global.performance?function(){return performance.now()}:function(){return new Date},a=i();i()-a<=t*1e3;);return Math.round(t)},-1),W(_,"$srand",function(t){return t==null&&(t=$("Random").$new_seed()),l("Random").$srand(t)},-1),W(_,"$String",function(t){var i=c;return z(i=x["$coerce_to?"](t,l("String"),"to_str"))?i:x["$coerce_to!"](t,l("String"),"to_s")}),W(_,"$tap",function e(){var t=e.$$p||c,i=this;return e.$$p=null,n.yield1(t,i),i}),W(_,"$to_proc",P),W(_,"$to_s",function(){var t=this;return"#<"+t.$class()+":0x"+t.$__id__().$to_s(16)+">"}),W(_,"$catch",function e(t){var i=e.$$p||c,a=c,o=c;e.$$p=null,t==null&&(t=c);try{return t=z(a=t)?a:u.$new(),n.yield1(i,t)}catch(m){if(n.rescue(m,[l("UncaughtThrowError")])){o=m;try{return k(o.$tag(),t)?o.$value():Y.$raise()}finally{n.pop_exception(m)}}else throw m}},-1),W(_,"$throw",function(t,i){return i==null&&(i=c),Y.$raise(l("UncaughtThrowError").$new(t,i))},-2),W(_,"$open",function e(t){var i=e.$$p||c,a,o;return e.$$p=null,a=B(arguments),o=a,b(l("File"),"open",h(o),i.$to_proc())},-1),W(_,"$yield_self",function e(){var t=e.$$p||c,i=this;return e.$$p=null,t===c?b(i,"enum_for",["yield_self"],$e(1)):n.yield1(t,i)}),d(_,"fail","raise"),d(_,"kind_of?","is_a?"),d(_,"object_id","__id__"),d(_,"public_send","__send__"),d(_,"send","__send__"),d(_,"then","yield_self"),d(_,"to_enum","enum_for")}("::",g),function(E,G){var _=M(E,G,"Object");return delete u.$$prototype.$require,_.$include(Y)}("::",null)};Opal.modules["corelib/main"]=function(n){var z=n.return_val,w=n.def,D=n.Object,x=n.slice,O=n.Kernel,Z=n.top;return n.nil,n.add_stubs("include,raise"),function(T,J){return w(T,"$to_s",z("main")),w(T,"$include",function(L){return D.$include(L)}),w(T,"$autoload",function(L){var $e,W;return $e=x(arguments),W=$e,n.Object.$autoload.apply(n.Object,W)},-1),w(T,"$using",function(L){return O.$raise("main.using is permitted only at toplevel")})}(n.get_singleton_class(Z))};Opal.modules["corelib/error/errno"]=function(n){var z=n.module,w=n.truthy,D=n.rb_plus,x=n.send2,O=n.find_super,Z=n.def,T=n.klass,J=n.nil,v=n.$$$;return n.add_stubs("+,errno,class,attr_reader"),function(L,$e){var W=z(L,"Errno"),Y=J,ee=J;Y=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],ee=J;var B;for(B=0;B<Y.length;B++)(function(){var b=Y[B][0],h=Y[B][1],S=Y[B][2];ee=n.klass(W,n.SystemCallError,b),ee.errno=S,function(j,k){return Z(j,"$new",function F(p){F.$$p;var A=this,P=J;return F.$$p=null,p==null&&(p=J),P=h,w(p)&&(P=D(P," - "+p)),x(A,O(A,"new",F,!1,!0),"new",[P],null)},-1)}(n.get_singleton_class(ee))})()}("::"),function(L,$e,W){var Y=T(L,$e,"SystemCallError");return Z(Y,"$errno",function(){var B=this;return B.$class().$errno()}),function(ee,B){return ee.$attr_reader("errno")}(n.get_singleton_class(Y))}("::",v("StandardError"))};Opal.modules["corelib/error"]=function(n){var z=n.klass,w=n.slice,D=n.gvars,x=n.defs,O=n.send,Z=n.to_a,T=n.def,J=n.send2,v=n.find_super,L=n.truthy,$e=n.Kernel,W=n.not,Y=n.rb_plus,ee=n.eqeq,B=n.Object,b=n.ensure_kwargs,h=n.hash_get,S=n.module,j=[],k=n.nil,F=n.$$$;return n.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(p,A,P){var I=z(p,A,"Exception"),q=[I].concat(P),u=n.$r(q),d=I.$$prototype;d.message=k,n.prop(I.$$prototype,"$$is_exception",!0);var M;Error.stackTraceLimit=100,x(I,"$new",function(l){var E,G,_=this;D["!"]==null&&(D["!"]=k),E=w(arguments),G=E;var s=G.length>0?G[0]:k,$=new _.$$constructor(s);return $.name=_.$$name,$.message=s,$.cause=D["!"],n.send($,$.$initialize,G),n.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace($,M),$},-1),M=I.$new,x(I,"$exception",function(l){var E,G,_=this;return E=w(arguments),G=E,O(_,"new",Z(G))},-1),T(I,"$initialize",function(l){var E,G,_=this;return E=w(arguments),G=E,_.message=G.length>0?G[0]:k},-1),T(I,"$copy_instance_variables",function c(l){var E=c.$$p||k,G=this;c.$$p=null,J(G,v(G,"copy_instance_variables",c,!1,!0),"copy_instance_variables",[l],E),G.message=l.message,G.cause=l.cause,G.stack=l.stack});function g(c){for(var l=[],E,G=0;G<c.length;G++){var _=c[G];!_||!_.$$is_string||((E=_.match(/^    at (.*?) \((.*?)\)$/))?l.push(E[2]+":in `"+E[1]+"'"):(E=_.match(/^    at (.*?)$/))?l.push(E[1]+":in `undefined'"):(E=_.match(/^  from (.*?)$/))?l.push(E[1]):(E=_.match(/^(.*?)@(.*?)$/))&&l.push(E[2]+":in `"+E[1]+"'"))}return l}return T(I,"$backtrace",function(){var l=this;if(l.backtrace)return l.backtrace;var E=l.stack;return typeof E<"u"&&E.$$is_string?l.backtrace=g(E.split(`
`)):E?l.backtrace=g(E):[]}),T(I,"$backtrace_locations",function(){var l,E=this;return E.backtrace_locations||(E.backtrace_locations=(l=E.$backtrace(),l===k||l==null?k:O(l,"map",[],function(_){return _==null&&(_=k),F(F(F("Thread"),"Backtrace"),"Location").$new(_)}))),E.backtrace_locations}),T(I,"$cause",function(){var l=this;return l.cause||k}),T(I,"$exception",function(l){var E=this;if(l==null&&(l=k),l===k||E===l)return E;var G=E.$clone();return G.message=l,E.backtrace&&(G.backtrace=E.backtrace.$dup()),G.stack=E.stack,G.cause=E.cause,G},-1),T(I,"$message",function(){var l=this;return l.$to_s()}),T(I,"$full_message",function(l){var E,G=this,_=k,s=k,$=k,r=k,e=k,t=k,i=k,a=k,o=k;return D.stderr==null&&(D.stderr=k),l==null&&(l=k),L(u("Hash","skip_raise")?"constant":k)?(l=new Map([["highlight",D.stderr["$tty?"]()],["order","top"]]).$merge(L(_=l)?_:new Map),E=[l["$[]"]("highlight"),l["$[]"]("order")],s=E[0],$=E[1],L([!0,!1]["$include?"](s))||$e.$raise(F("ArgumentError"),"expected true or false as highlight: "+s),L(["top","bottom"]["$include?"]($))||$e.$raise(F("ArgumentError"),"expected :top or :bottom as order: "+$),L(s)?(r="\x1B[1;4m",e="\x1B[1m",t="\x1B[m"):r=e=t="",i=G.$backtrace().$dup(),(W(i)||L(i["$empty?"]()))&&(i=G.$caller()),a=i.$shift(),o=""+a+": ",o=Y(o,""+e+G.$to_s()+" ("+r+G.$class()+t+e+")"+t+`
`),o=Y(o,O(i,"map",[],function(N){return N==null&&(N=k),"	from "+N+`
`}).$join()),L(G.$cause())&&(o=Y(o,G.$cause().$full_message(new Map([["highlight",s]])))),ee($,"bottom")&&(o=o.$split(`
`).$reverse().$join(`
`),o=Y(""+e+"Traceback"+t+` (most recent call last):
`,o)),o):""+G.message+`
`+G.stack},-1),T(I,"$inspect",function(){var l=this,E=k;return E=l.$to_s(),L(E["$empty?"]())?l.$class().$to_s():"#<"+l.$class().$to_s()+": "+l.$to_s()+">"}),T(I,"$set_backtrace",function(l){var E=this,G=!0,_,s;if(l===k)E.backtrace=k,E.stack="";else if(l.$$is_string)E.backtrace=[l],E.stack="  from "+l;else{if(l.$$is_array){for(_=0,s=l.length;_<s;_++)if(!l[_].$$is_string){G=!1;break}}else G=!1;G===!1&&$e.$raise(F("TypeError"),"backtrace must be Array of String"),E.backtrace=l,E.stack=O(l,"map",[],function(r){return r==null&&(r=k),Y("  from ",r)}).join(`
`)}return l}),T(I,"$to_s",function(){var l=this,E=k,G=k;return L(E=L(G=l.message)?l.message.$to_s():G)?E:l.$class().$to_s()})}("::",Error,j),z("::",F("Exception"),"ScriptError"),z("::",F("ScriptError"),"SyntaxError"),z("::",F("ScriptError"),"LoadError"),z("::",F("ScriptError"),"NotImplementedError"),z("::",F("Exception"),"SystemExit"),z("::",F("Exception"),"NoMemoryError"),z("::",F("Exception"),"SignalException"),z("::",F("SignalException"),"Interrupt"),z("::",F("Exception"),"SecurityError"),z("::",F("Exception"),"SystemStackError"),z("::",F("Exception"),"StandardError"),z("::",F("StandardError"),"EncodingError"),z("::",F("StandardError"),"ZeroDivisionError"),z("::",F("StandardError"),"NameError"),z("::",F("NameError"),"NoMethodError"),z("::",F("StandardError"),"RuntimeError"),z("::",F("RuntimeError"),"FrozenError"),z("::",F("StandardError"),"LocalJumpError"),z("::",F("StandardError"),"TypeError"),z("::",F("StandardError"),"ArgumentError"),z("::",F("ArgumentError"),"UncaughtThrowError"),z("::",F("StandardError"),"IndexError"),z("::",F("IndexError"),"StopIteration"),z("::",F("StopIteration"),"ClosedQueueError"),z("::",F("IndexError"),"KeyError"),z("::",F("StandardError"),"RangeError"),z("::",F("RangeError"),"FloatDomainError"),z("::",F("StandardError"),"IOError"),z("::",F("IOError"),"EOFError"),z("::",F("StandardError"),"SystemCallError"),z("::",F("StandardError"),"RegexpError"),z("::",F("StandardError"),"ThreadError"),z("::",F("StandardError"),"FiberError"),B.$autoload("Errno","corelib/error/errno"),function(p,A){var P=z(p,A,"FrozenError");return P.$attr_reader("receiver"),T(P,"$initialize",function I(q,u){var d;I.$$p;var M=this;return I.$$p=null,u=b(u),d=h(u,"receiver"),d==null&&(d=k),J(M,v(M,"initialize",I,!1,!0),"initialize",[q],null),M.receiver=d},-2)}("::",F("RuntimeError")),function(p,A){var P=z(p,A,"UncaughtThrowError"),I=P.$$prototype;return I.tag=k,P.$attr_reader("tag","value"),T(P,"$initialize",function q(u,d){q.$$p;var M=this;return q.$$p=null,d==null&&(d=k),M.tag=u,M.value=d,J(M,v(M,"initialize",q,!1,!0),"initialize",["uncaught throw "+M.tag.$inspect()],null)},-2)}("::",F("ArgumentError")),function(p,A){var P=z(p,A,"NameError");return P.$attr_reader("name"),T(P,"$initialize",function I(q,u){I.$$p;var d=this;return I.$$p=null,u==null&&(u=k),J(d,v(d,"initialize",I,!1,!0),"initialize",[q],null),d.name=u},-2)}("::",null),function(p,A){var P=z(p,A,"NoMethodError");return P.$attr_reader("args"),T(P,"$initialize",function I(q,u,d){I.$$p;var M=this;return I.$$p=null,u==null&&(u=k),d==null&&(d=[]),J(M,v(M,"initialize",I,!1,!0),"initialize",[q,u],null),M.args=d},-2)}("::",null),function(p,A){var P=z(p,A,"StopIteration");return P.$attr_reader("result")}("::",null),function(p,A){var P=z(p,A,"KeyError"),I=P.$$prototype;return I.receiver=I.key=k,T(P,"$initialize",function q(u,d){var M,g;q.$$p;var c=this;return q.$$p=null,d=b(d),M=h(d,"receiver"),M==null&&(M=k),g=h(d,"key"),g==null&&(g=k),J(c,v(c,"initialize",q,!1,!0),"initialize",[u],null),c.receiver=M,c.key=g},-2),T(P,"$receiver",function(){var u=this,d=k;return L(d=u.receiver)?d:$e.$raise(F("ArgumentError"),"no receiver is available")}),T(P,"$key",function(){var u=this,d=k;return L(d=u.key)?d:$e.$raise(F("ArgumentError"),"no key is available")})}("::",null),function(p,A){var P=z(p,A,"LocalJumpError");return P.$attr_reader("exit_value","reason"),T(P,"$initialize",function I(q,u,d){I.$$p;var M=this;return I.$$p=null,u==null&&(u=k),d==null&&(d="noreason"),J(M,v(M,"initialize",I,!1,!0),"initialize",[q],null),M.exit_value=u,M.reason=d},-2)}("::",null),function(p,A){var P=S(p,"JS"),I=[P].concat(A);return z(I[0],null,"Error"),k}("::",j)};Opal.modules["corelib/constants"]=function(n){var z=n.const_set;n.nil;var w=n.$$$;return z("::","RUBY_PLATFORM","opal"),z("::","RUBY_ENGINE","opal"),z("::","RUBY_VERSION","3.2.0"),z("::","RUBY_ENGINE_VERSION","1.8.2"),z("::","RUBY_RELEASE_DATE","2023-11-23"),z("::","RUBY_PATCHLEVEL",0),z("::","RUBY_REVISION","0"),z("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),z("::","RUBY_DESCRIPTION","opal "+w("RUBY_ENGINE_VERSION")+" ("+w("RUBY_RELEASE_DATE")+" revision "+w("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(n){var z=n.Object;return n.nil,n.add_stubs("require"),z.$require("corelib/runtime"),z.$require("corelib/helpers"),z.$require("corelib/module"),z.$require("corelib/class"),z.$require("corelib/basic_object"),z.$require("corelib/kernel"),z.$require("corelib/main"),z.$require("corelib/error"),z.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(n){var z=n.klass,w=n.Kernel,D=n.def,x=n.return_val,O=n.ensure_kwargs,Z=n.hash_get,T=n.NilClass,J=n.slice,v=n.truthy,L=n.rb_gt,$e=n.alias,W=n.nil,Y=n.$$$;return n.add_stubs("raise,name,new,>,length,Rational,to_i"),function(ee,B,b){var h=z(ee,B,"NilClass");return h.$$prototype.$$meta=h,function(S,j){return D(S,"$allocate",function(){var F=this;return w.$raise(Y("TypeError"),"allocator undefined for "+F.$name())}),n.udef(S,"$new"),W}(n.get_singleton_class(h)),D(h,"$!",x(!0)),D(h,"$&",x(!1)),D(h,"$|",function(j){return j!==!1&&j!==W}),D(h,"$^",function(j){return j!==!1&&j!==W}),D(h,"$==",function(j){return j===W}),D(h,"$dup",x(W)),D(h,"$clone",function(j){return j=O(j),Z(j,"freeze"),W},-1),D(h,"$inspect",x("nil")),D(h,"$nil?",x(!0)),D(h,"$singleton_class",function(){return T}),D(h,"$to_a",function(){return[]}),D(h,"$to_h",function(){return new Map}),D(h,"$to_i",x(0)),D(h,"$to_s",x("")),D(h,"$to_c",function(){return Y("Complex").$new(0,0)}),D(h,"$rationalize",function(j){var k,F;return k=J(arguments),F=k,v(L(F.$length(),1))&&w.$raise(Y("ArgumentError")),w.$Rational(0,1)},-1),D(h,"$to_r",function(){return w.$Rational(0,1)}),D(h,"$instance_variables",function(){return[]}),$e(h,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(n){var z=n.klass,w=n.Kernel,D=n.def,x=n.return_self,O=n.ensure_kwargs,Z=n.hash_get,T=n.slice,J=n.truthy,v=n.send2,L=n.find_super,$e=n.to_a,W=n.alias,Y=n.nil,ee=n.$$$;return n.add_stubs("raise,name,==,to_s,__id__"),function(B,b,h){var S=z(B,b,"Boolean");n.prop(S.$$prototype,"$$is_boolean",!0);for(var j=["$$class","$$meta"],k=0;k<j.length;k++)Object.defineProperty(S.$$prototype,j[k],{configurable:!0,enumerable:!1,get:function(){return this==!0?n.TrueClass:this==!1?n.FalseClass:n.Boolean}});return Object.defineProperty(S.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:Y}}),function(F,p){return D(F,"$allocate",function(){var P=this;return w.$raise(ee("TypeError"),"allocator undefined for "+P.$name())}),n.udef(F,"$new"),Y}(n.get_singleton_class(S)),D(S,"$__id__",function(){var p=this;return p.valueOf()?2:0}),D(S,"$!",function(){var p=this;return p!=!0}),D(S,"$&",function(p){var A=this;return A==!0?p!==!1&&p!==Y:!1}),D(S,"$|",function(p){var A=this;return A==!0?!0:p!==!1&&p!==Y}),D(S,"$^",function(p){var A=this;return A==!0?p===!1||p===Y:p!==!1&&p!==Y}),D(S,"$==",function(p){var A=this;return A==!0===p.valueOf()}),D(S,"$singleton_class",function(){var p=this;return p.$$meta}),D(S,"$to_s",function(){var p=this;return p==!0?"true":"false"}),D(S,"$dup",x),D(S,"$clone",function(p){var A=this;return p=O(p),Z(p,"freeze"),A},-1),D(S,"$method_missing",function F(p,A){var P=F.$$p||Y,I,q,u=this;F.$$p=null,I=T(arguments,1),q=I;var d=u.$$class.$$prototype[n.jsid(p)];return J(typeof d<"u"&&!d.$$stub)||v(u,L(u,"method_missing",F,!1,!0),"method_missing",[p].concat($e(q)),P),n.send(u,d,q,P)},-2),D(S,"$respond_to_missing?",function(p,A){var P=this,I=P.$$class.$$prototype[n.jsid(p)];return typeof I<"u"&&!I.$$stub},-2),W(S,"eql?","=="),W(S,"equal?","=="),W(S,"inspect","to_s"),W(S,"object_id","__id__")}("::",Boolean),z("::",ee("Boolean"),"TrueClass"),z("::",ee("Boolean"),"FalseClass"),Y};Opal.modules["corelib/comparable"]=function(n){var z=n.truthy,w=n.module,D=n.rb_gt,x=n.rb_lt,O=n.eqeqeq,Z=n.Kernel,T=n.def,J=n.nil,v=n.$$$;return n.add_stubs(">,<,===,raise,class,<=>,equal?"),function(L){var $e=w(L,"Comparable"),W=J;function Y(b){return n.is_a(b,n.Integer)?b:D(b,0)?1:x(b,0)?-1:0}function ee(b,h){var S;O(J,W=h)||O(!0,W)||O(!1,W)||O(v("Integer"),W)||O(v("Float"),W)?S=h.$inspect():S=h.$$class,Z.$raise(v("ArgumentError"),"comparison of "+b.$class()+" with "+S+" failed")}function B(b,h){var S=b["$<=>"](h);return z(S)||ee(b,h),Y(S)}return T($e,"$==",function(h){var S=this,j=J;return z(S["$equal?"](h))?!0:S["$<=>"]==n.Kernel["$<=>"]?!1:S.$$comparable?(S.$$comparable=!1,!1):z(j=S["$<=>"](h))?Y(j)==0:!1}),T($e,"$>",function(h){var S=this;return B(S,h)>0}),T($e,"$>=",function(h){var S=this;return B(S,h)>=0}),T($e,"$<",function(h){var S=this;return B(S,h)<0}),T($e,"$<=",function(h){var S=this;return B(S,h)<=0}),T($e,"$between?",function(h,S){var j=this;return!(z(x(j,h))||z(D(j,S)))}),T($e,"$clamp",function(h,S){var j=this;S==null&&(S=J);var k,F;if(S===J&&(n.is_a(h,n.Range)||Z.$raise(v("TypeError"),"wrong argument type "+h.$class()+" (expected Range)"),F=h.excl,S=h.end,h=h.begin,S!==J&&F&&Z.$raise(v("ArgumentError"),"cannot clamp with an exclusive range")),h!==J&&S!==J&&B(h,S)>0&&Z.$raise(v("ArgumentError"),"min argument must be smaller than max argument"),h!==J){if(k=B(j,h),k==0)return j;if(k<0)return h}return S!==J&&(k=B(j,S),k>0)?S:j},-2)}("::")};Opal.modules["corelib/regexp"]=function(n){var z=n.coerce_to,w=n.prop,D=n.freeze,x=n.klass,O=n.const_set,Z=n.send2,T=n.find_super,J=n.def,v=n.truthy,L=n.gvars,$e=n.slice,W=n.Kernel,Y=n.Opal,ee=n.alias,B=n.send,b=n.regexp,h=n.rb_plus,S=n.ensure_kwargs,j=n.hash_get,k=n.rb_ge,F=n.to_a,p=n.eqeqeq,A=n.rb_minus,P=n.return_ivar,I=[],q=n.nil,u=n.$$$;return n.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),x("::",u("StandardError"),"RegexpError"),function(d,M,g){var c=x(d,M,"Regexp"),l=[c].concat(g),E=n.$r(l);return O(c,"IGNORECASE",1),O(c,"EXTENDED",2),O(c,"MULTILINE",4),n.prop(c.$$prototype,"$$is_regexp",!0),function(G,_){var s=[G].concat(_),$=n.$r(s);return J(G,"$allocate",function r(){var e=r.$$p||q,t=this,i=q;return r.$$p=null,i=Z(t,T(t,"allocate",r,!1,!0),"allocate",[],e),i.uninitialized=!0,i}),J(G,"$escape",function(e){return e=z(e,u("String"),"to_str"),n.escape_regexp(e)}),J(G,"$last_match",function(e){return L["~"]==null&&(L["~"]=q),e==null&&(e=q),v(e["$nil?"]())?L["~"]:v(L["~"])?L["~"]["$[]"](e):q},-1),J(G,"$union",function(e){var t,i,a=this;t=$e(arguments),i=t;var o,m,N,K,C;if(i.length==0)return/(?!)/;if(i.length==1&&i[0].$$is_regexp)return i[0];o=i[0].$$is_array,i.length>1&&o&&W.$raise(u("TypeError"),"no implicit conversion of Array into String"),o&&(i=i[0]),K=void 0,m=[];for(var V=0;V<i.length;V++)N=i[V],N.$$is_string?m.push(a.$escape(N)):N.$$is_regexp?(C=N.$options(),K!=null&&K!=C&&W.$raise(u("TypeError"),"All expressions must use the same options"),K=C,m.push("("+N.source+")")):m.push(a.$escape(N.$to_str()));return a.$new(m.$join("|"),K)},-1),J(G,"$new",function(e,t){if(e.$$is_regexp)return new RegExp(e);if(e=Y["$coerce_to!"](e,u("String"),"to_str"),e.charAt(e.length-1)==="\\"&&e.charAt(e.length-2)!=="\\"&&W.$raise(u("RegexpError"),"too short escape sequence: /"+e+"/"),e=e.replace("\\A","^").replace("\\z","$"),t===void 0||t["$!"]())return new RegExp(e);if(t.$$is_number){var i="";$("IGNORECASE")&t&&(i+="i"),$("MULTILINE")&t&&(i+="m"),t=i}else t="i";return new RegExp(e,t)},-2),ee(G,"compile","new"),ee(G,"quote","escape")}(n.get_singleton_class(c),l),J(c,"$==",function(_){var s=this;return _ instanceof RegExp&&s.toString()===_.toString()}),J(c,"$===",function(_){var s=this;return s.$match(Y["$coerce_to?"](_,u("String"),"to_str"))!==q}),J(c,"$=~",function(_){var s=this,$=q;return L["~"]==null&&(L["~"]=q),v($=s.$match(_))?L["~"].$begin(0):$}),J(c,"$freeze",function(){var _=this;return v(_["$frozen?"]())?_:(_.hasOwnProperty("$$g")||w(_,"$$g",null),_.hasOwnProperty("$$gm")||w(_,"$$gm",null),D(_))}),J(c,"$inspect",function(){var _=this,s=/^\/(.*)\/([^\/]*)$/,$=_.toString(),r=s.exec($);if(r){for(var e=r[1],t=r[2],i=e.split(""),a=i.length,o=!1,m="",N=0;N<a;N++){var K=i[N];!o&&K=="/"&&(m=m.concat("\\")),m=m.concat(K),K=="\\"?o?o=!1:o=!0:o=!1}return"/"+m+"/"+t}else return $}),J(c,"$match",function G(_,s){var $=G.$$p||q,r=this;if(L["~"]==null&&(L["~"]=q),G.$$p=null,r.uninitialized&&W.$raise(u("TypeError"),"uninitialized Regexp"),s===void 0){if(_===q)return L["~"]=q;var e=r.exec(z(_,u("String"),"to_str"));return e?(L["~"]=u("MatchData").$new(r,e),$===q?L["~"]:n.yield1($,L["~"])):L["~"]=q}if(s=z(s,u("Integer"),"to_int"),_===q||(_=z(_,u("String"),"to_str"),s<0&&(s+=_.length,s<0)))return L["~"]=q;for(var t,i=n.global_regexp(r);;){if(t=i.exec(_),t===null)return L["~"]=q;if(t.index>=s)return L["~"]=u("MatchData").$new(i,t),$===q?L["~"]:n.yield1($,L["~"]);i.lastIndex=t.index+1}},-2),J(c,"$match?",function(_,s){var $=this;if($.uninitialized&&W.$raise(u("TypeError"),"uninitialized Regexp"),s===void 0)return _===q?!1:$.test(z(_,u("String"),"to_str"));if(s=z(s,u("Integer"),"to_int"),_===q||(_=z(_,u("String"),"to_str"),s<0&&(s+=_.length,s<0)))return!1;var r,e=n.global_regexp($);return r=e.exec(_),!(r===null||r.index<s)},-2),J(c,"$names",function(){var _=this;return B(_.$source().$scan(b(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),J(c,"$named_captures",function(){var _=this;return B(B(B(_.$source().$scan(b(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function($){return $==null&&($=q),B($,"map",[],function(e){return e==null&&(e=q),h(e.$last(),1)})})}),J(c,"$~",function(){var _=this;return L._==null&&(L._=q),_["$=~"](L._)}),J(c,"$source",function(){var _=this;return _.source}),J(c,"$options",function(){var _=this;_.uninitialized&&W.$raise(u("TypeError"),"uninitialized Regexp");var s=0;return _.multiline&&(s|=E("MULTILINE")),_.ignoreCase&&(s|=E("IGNORECASE")),s}),J(c,"$casefold?",function(){var _=this;return _.ignoreCase}),ee(c,"eql?","=="),ee(c,"to_s","source")}("::",RegExp,I),function(d,M,g){var c=x(d,M,"MatchData"),l=[c].concat(g),E=n.$r(l),G=c.$$prototype;return G.matches=q,c.$attr_reader("post_match","pre_match","regexp","string"),J(c,"$initialize",function(s,$,r){var e,t=this;r=S(r),e=j(r,"no_matchdata"),e==null&&(e=!1),v(e)||(L["~"]=t),t.regexp=s,t.begin=$.index,t.string=$.input,t.pre_match=$.input.slice(0,$.index),t.post_match=$.input.slice($.index+$[0].length),t.matches=[];for(var i=0,a=$.length;i<a;i++){var o=$[i];o==null?t.matches.push(q):t.matches.push(o)}},-3),J(c,"$match",function(s){var $=this,r=q;return v(r=$["$[]"](s))?r:v(s["$is_a?"](E("Integer")))&&v(k(s,$.$length()))?W.$raise(u("IndexError"),"index "+s+" out of matches"):q}),J(c,"$match_length",function(s){var $,r=this;return $=r.$match(s),$===q||$==null?q:$.$length()}),J(c,"$[]",function(s){var $,r,e=this;return $=$e(arguments),r=$,r[0].$$is_string?(e.$regexp().$names()["$include?"](r["$[]"](0))["$!"]()&&W.$raise(u("IndexError"),"undefined group name reference: "+r["$[]"](0)),e.$named_captures()["$[]"](r["$[]"](0))):B(e.matches,"[]",F(r))},-1),J(c,"$offset",function(s){var $=this;return s!==0&&W.$raise(u("ArgumentError"),"MatchData#offset only supports 0th element"),[$.begin,$.begin+$.matches[s].length]}),J(c,"$==",function(s){var $=this,r=q,e=q,t=q,i=q;return p(u("MatchData"),s)?v(r=v(e=v(t=v(i=$.string==s.string)?$.regexp.toString()==s.regexp.toString():i)?$.pre_match==s.pre_match:t)?$.post_match==s.post_match:e)?$.begin==s.begin:r:!1}),J(c,"$begin",function(s){var $=this;return s!==0&&W.$raise(u("ArgumentError"),"MatchData#begin only supports 0th element"),$.begin}),J(c,"$end",function(s){var $=this;return s!==0&&W.$raise(u("ArgumentError"),"MatchData#end only supports 0th element"),$.begin+$.matches[s].length}),J(c,"$captures",function(){var s=this;return s.matches.slice(1)}),J(c,"$named_captures",function(){var s=this,$=q;return $=s.$captures(),B(s.$regexp().$named_captures(),"transform_values",[],function(e){return e==null&&(e=q),$["$[]"](A(e.$last(),1))})}),J(c,"$names",function(){var s=this;return s.$regexp().$names()}),J(c,"$inspect",function(){var s=this,$="#<MatchData "+s.matches[0].$inspect();if(s.$regexp().$names()["$empty?"]())for(var r=1,e=s.matches.length;r<e;r++)$+=" "+r+":"+s.matches[r].$inspect();else B(s.$named_captures(),"each",[],function(i,a){return i==null&&(i=q),a==null&&(a=q),$+=" "+i+":"+a.$inspect()});return $+">"}),J(c,"$length",function(){var s=this;return s.matches.length}),J(c,"$to_a",P("matches")),J(c,"$to_s",function(){var s=this;return s.matches[0]}),J(c,"$values_at",function(s){var $,r,e=this;$=$e(arguments),r=$;var t,i,a,o=[];for(t=0;t<r.length;t++){if(r[t].$$is_range&&(i=r[t].$to_a(),i.unshift(t,1),Array.prototype.splice.apply(r,i)),a=Y["$coerce_to!"](r[t],u("Integer"),"to_int"),a<0&&(a+=e.matches.length,a<0)){o.push(q);continue}o.push(e.matches[a])}return o},-1),ee(c,"eql?","=="),ee(c,"size","length")}(I[0],null,I)};Opal.modules["corelib/string"]=function(n){var z=n.coerce_to,w=n.respond_to,D=n.global_multiline_regexp,x=n.prop,O=n.opal32_init,Z=n.opal32_add,T=n.klass,J=n.send2,v=n.find_super,L=n.def,$e=n.Opal,W=n.defs,Y=n.slice,ee=n.send,B=n.to_a,b=n.extract_kwargs,h=n.ensure_kwargs,S=n.hash_get,j=n.eqeqeq,k=n.Kernel,F=n.truthy,p=n.gvars,A=n.rb_divide,P=n.rb_plus,I=n.eqeq,q=n.alias,u=n.const_set,d=n.top,M=[],g=n.$r(M),c=n.nil,l=n.$$$;return n.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),d.$require("corelib/comparable"),d.$require("corelib/regexp"),function(E,G,_){var s=T(E,G,"String"),$=[s].concat(_),r=n.$r($);s.$include(l("Comparable")),n.prop(s.$$prototype,"$$is_string",!0);var e=new Map;(function(){L(s,"$__id__",function i(){var a=i.$$p||c,o=this;if(i.$$p=null,typeof o=="object")return J(o,v(o,"__id__",i,!1,!0),"__id__",[],a);if(e.has(o))return e.get(o);var m=n.uid();return e.set(o,m),m}),L(s,"$hash",function(){var a=this,o=O(),m,N=a.length;for(o=Z(o,5),o=Z(o,N),m=0;m<N;m++)o=Z(o,a.charCodeAt(m));return o})})(),W(s,"$try_convert",function(a){return $e["$coerce_to?"](a,l("String"),"to_str")}),W(s,"$new",function(a){var o,m,N=this;o=Y(arguments),m=o;var K=m[0]||"",C=m[m.length-1];return K=z(K,l("String"),"to_str"),C&&C.$$is_hash&&C.has("encoding")&&(K=K.$force_encoding(C.get("encoding").value)),K=new N.$$constructor(K),K.$initialize.$$pristine||ee(K,"initialize",B(m)),K},-1),L(s,"$initialize",function(a,o){var m,N;return m=Y(arguments),N=b(m),N=h(N),m.length>0&&m.shift(),S(N,"encoding"),S(N,"capacity"),c},-1),L(s,"$%",function(a){var o=this;return j(l("Array"),a)?ee(o,"format",[o].concat(B(a))):o.$format(o,a)}),L(s,"$*",function(a){var o=this;if(a=z(a,l("Integer"),"to_int"),a<0&&k.$raise(l("ArgumentError"),"negative argument"),a===0)return"";var m="",N=o.toString();for(N.length*a>=1<<28&&k.$raise(l("RangeError"),"multiply count must not overflow maximum string size");(a&1)===1&&(m+=N),a>>>=1,a!==0;)N+=N;return m}),L(s,"$+",function(a){var o=this;if(a=z(a,l("String"),"to_str"),a==""&&o.$$class===n.String)return o;if(o==""&&a.$$class===n.String)return a;var m=o+a;return o.encoding===m.encoding&&a.encoding===m.encoding||o.encoding.name==="UTF-8"||a.encoding.name==="UTF-8"?m:n.enc(m,o.encoding)}),L(s,"$<=>",function(a){var o=this;if(F(a["$respond_to?"]("to_str")))return a=a.$to_str().$to_s(),o>a?1:o<a?-1:0;var m=a["$<=>"](o);return m===c?c:m>0?-1:m<0?1:0}),L(s,"$==",function(a){var o=this;return a.$$is_string?o.toString()===a.toString():w(a,"$to_str")?a["$=="](o):!1}),L(s,"$=~",function(a){var o=this;return a.$$is_string&&k.$raise(l("TypeError"),"type mismatch: String given"),a["$=~"](o)}),L(s,"$[]",function(a,o){var m=this,N=m.length,K,C;if(a.$$is_range)return K=a.excl,C=a,o=a.end===c?-1:z(a.end,l("Integer"),"to_int"),a=a.begin===c?0:z(a.begin,l("Integer"),"to_int"),Math.abs(a)>N?c:(a<0&&(a+=N),o<0&&(o+=N),(!K||C.end===c)&&(o+=1),o=o-a,o<0&&(o=0),m.substr(a,o));if(a.$$is_string)return o!=null&&k.$raise(l("TypeError")),m.indexOf(a)!==-1?a:c;if(a.$$is_regexp){var V=m.match(a);return V===null?(p["~"]=c,c):(p["~"]=l("MatchData").$new(a,V),o==null?V[0]:(o=z(o,l("Integer"),"to_int"),o<0&&-o<V.length?V[o+=V.length]:o>=0&&o<V.length?V[o]:c))}return a=z(a,l("Integer"),"to_int"),a<0&&(a+=N),o==null?a>=N||a<0?c:m.substr(a,1):(o=z(o,l("Integer"),"to_int"),o<0||a>N||a<0?c:m.substr(a,o))},-2),L(s,"$b",function(){var a=this;return new String(a).$force_encoding("binary")}),L(s,"$capitalize",function(){var a=this;return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}),L(s,"$casecmp",function(a){var o=this;if(!F(a["$respond_to?"]("to_str")))return c;a=z(a,l("String"),"to_str").$to_s();var m=/^[\x00-\x7F]*$/;return m.test(o)&&m.test(a)&&(o=o.toLowerCase(),a=a.toLowerCase()),o["$<=>"](a)}),L(s,"$casecmp?",function(a){var o=this,m=o.$casecmp(a);return m===c?c:m===0}),L(s,"$center",function(a,o){var m=this;if(o==null&&(o=" "),a=z(a,l("Integer"),"to_int"),o=z(o,l("String"),"to_str").$to_s(),F(o["$empty?"]())&&k.$raise(l("ArgumentError"),"zero width padding"),F(a<=m.length))return m;var N=m.$ljust(A(P(a,m.length),2).$ceil(),o),K=m.$rjust(A(P(a,m.length),2).$floor(),o);return K+N.slice(m.length)},-2),L(s,"$chomp",function(a){var o=this;if(p["/"]==null&&(p["/"]=c),a==null&&(a=p["/"]),F(a===c||o.length===0))return o;a=$e["$coerce_to!"](a,l("String"),"to_str").$to_s();var m;if(a===`
`)m=o.replace(/\r?\n?$/,"");else if(a==="")m=o.replace(/(\r?\n)+$/,"");else if(o.length>=a.length){var N=o.substr(o.length-a.length,a.length);N===a&&(m=o.substr(0,o.length-a.length))}return m??o},-1),L(s,"$chop",function(){var a=this,o=a.length,m;return o<=1?m="":a.charAt(o-1)===`
`&&a.charAt(o-2)==="\r"?m=a.substr(0,o-2):m=a.substr(0,o-1),m}),L(s,"$chr",function(){var a=this;return a.charAt(0)}),L(s,"$clone",function(a){var o,m=this,N=c;return a=h(a),o=S(a,"freeze"),o==null&&(o=c),F(o["$nil?"]())||I(o,!0)||I(o,!1)||m.$raise(r("ArgumentError"),"unexpected value for freeze: "+o.$class()),N=new String(m),N.$copy_singleton_methods(m),N.$initialize_clone(m,new Map([["freeze",o]])),I(o,!0)?N.$$frozen||(N.$$frozen=!0):F(o["$nil?"]())&&m.$$frozen&&(N.$$frozen=!0),N},-1),L(s,"$dup",function(){var a=this,o=c;return o=new String(a),o.$initialize_dup(a),o}),L(s,"$count",function(a){var o,m,N=this;o=Y(arguments),m=o,m.length===0&&k.$raise(l("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var K=t(m);return K===null?0:N.length-N.replace(new RegExp(K,"g"),"").length},-1),L(s,"$delete",function(a){var o,m,N=this;o=Y(arguments),m=o,m.length===0&&k.$raise(l("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var K=t(m);return K===null?N:N.replace(new RegExp(K,"g"),"")},-1),L(s,"$delete_prefix",function(a){var o=this;return a.$$is_string||(a=z(a,l("String"),"to_str")),o.slice(0,a.length)===a?o.slice(a.length):o}),L(s,"$delete_suffix",function(a){var o=this;return a.$$is_string||(a=z(a,l("String"),"to_str")),o.slice(o.length-a.length)===a?o.slice(0,o.length-a.length):o}),L(s,"$downcase",function(){var a=this;return a.toLowerCase()}),L(s,"$each_line",function i(a,o){var m=i.$$p||c,N,K,C,V,re=this;if(p["/"]==null&&(p["/"]=c),i.$$p=null,N=Y(arguments),K=b(N),K=h(K),N.length>0&&(C=N.shift()),C==null&&(C=p["/"]),V=S(K,"chomp"),V==null&&(V=!1),m===c)return re.$enum_for("each_line",C,new Map([["chomp",V]]));if(C===c)return n.yield1(m,re),re;C=z(C,l("String"),"to_str");var ae,le,_e,de,ge,ve,me,be;if(C.length===0){for(ae=re.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,_e=ae.length;le<_e;le+=2)(ae[le]||ae[le+1])&&(be=(ae[le]||"")+(ae[le+1]||""),V&&(be=be.$chomp(`
`)),n.yield1(m,be));return re}for(ge=re.$chomp(C),ve=re.length!=ge.length,me=ge.split(C),le=0,de=me.length;le<de;le++)be=me[le],(le<de-1||ve)&&(be+=C),V&&(be=be.$chomp(C)),n.yield1(m,be);return re},-1),L(s,"$empty?",function(){var a=this;return a.length===0}),L(s,"$end_with?",function(a){var o,m,N=this;o=Y(arguments),m=o;for(var K=0,C=m.length;K<C;K++){var V=z(m[K],l("String"),"to_str").$to_s();if(N.length>=V.length&&N.substr(N.length-V.length,V.length)==V)return!0}return!1},-1),L(s,"$gsub",function i(a,o){var m=i.$$p||c,N=this;if(i.$$p=null,o===void 0&&m===c)return N.$enum_for("gsub",a);var K="",C=c,V=0,re,ae;a.$$is_regexp?a=D(a):(a=z(a,l("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(re=a.exec(N),re===null){p["~"]=c,K+=N.slice(V);break}C=l("MatchData").$new(a,re),o===void 0?(le=a.lastIndex,ae=m(re[0]),a.lastIndex=le):o.$$is_hash?ae=o["$[]"](re[0]).$to_s():(o.$$is_string||(o=z(o,l("String"),"to_str")),ae=o.replace(/([\\]+)([0-9+&`'])/g,function(_e,de,ge){if(de.length%2===0)return _e;switch(ge){case"+":for(var ve=re.length-1;ve>0;ve--)if(re[ve]!==void 0)return de.slice(1)+re[ve];return"";case"&":return de.slice(1)+re[0];case"`":return de.slice(1)+N.slice(0,re.index);case"'":return de.slice(1)+N.slice(re.index+re[0].length);default:return de.slice(1)+(re[ge]||"")}}).replace(/\\\\/g,"\\")),a.lastIndex===re.index?(K+=N.slice(V,re.index)+ae+(N[re.index]||""),a.lastIndex+=1):K+=N.slice(V,re.index)+ae,V=a.lastIndex}return p["~"]=C,K},-2),L(s,"$hex",function(){var a=this;return a.$to_i(16)}),L(s,"$include?",function(a){var o=this;return a.$$is_string||(a=z(a,l("String"),"to_str")),o.indexOf(a)!==-1}),L(s,"$index",function(a,o){var m=this,N,K,C;if(o===void 0)o=0;else if(o=z(o,l("Integer"),"to_int"),o<0&&(o+=m.length,o<0))return c;if(a.$$is_regexp)for(C=D(a);;){if(K=C.exec(m),K===null){p["~"]=c,N=-1;break}if(K.index>=o){p["~"]=l("MatchData").$new(C,K),N=K.index;break}C.lastIndex=K.index+1}else a=z(a,l("String"),"to_str"),a.length===0&&o>m.length?N=-1:N=m.indexOf(a,o);return N===-1?c:N},-2),L(s,"$inspect",function(){var a=this,o=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,m={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},N=a.replace(o,function(K){return m[K]?m[K]:(K=K.charCodeAt(0),K<=255&&(a.encoding["$binary?"]()||a.internal_encoding["$binary?"]())?"\\x"+("00"+K.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+K.toString(16).toUpperCase()).slice(-4))});return'"'+N.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),L(s,"$intern",function(){var a=this;return a.toString()}),L(s,"$length",function(){var a=this;return a.length}),q(s,"size","length"),L(s,"$lines",function i(a,o){var m=i.$$p||c,N,K,C,V,re=this,ae=c;return p["/"]==null&&(p["/"]=c),i.$$p=null,N=Y(arguments),K=b(N),K=h(K),N.length>0&&(C=N.shift()),C==null&&(C=p["/"]),V=S(K,"chomp"),V==null&&(V=!1),ae=ee(re,"each_line",[C,new Map([["chomp",V]])],m.$to_proc()),F(m)?re:ae.$to_a()},-1),L(s,"$ljust",function(a,o){var m=this;if(o==null&&(o=" "),a=z(a,l("Integer"),"to_int"),o=z(o,l("String"),"to_str").$to_s(),F(o["$empty?"]())&&k.$raise(l("ArgumentError"),"zero width padding"),F(a<=m.length))return m;var N=-1,K="";for(a-=m.length;++N<a;)K+=o;return m+K.slice(0,a)},-2),L(s,"$lstrip",function(){var a=this;return a.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),L(s,"$ascii_only?",function(){var a=this;return a.encoding.ascii?/^[\x00-\x7F]*$/.test(a):!1}),L(s,"$match",function i(a,o){var m=i.$$p||c,N=this;return i.$$p=null,(j(r("String"),a)||F(a["$respond_to?"]("to_str")))&&(a=l("Regexp").$new(a.$to_str())),j(l("Regexp"),a)||k.$raise(l("TypeError"),"wrong argument type "+a.$class()+" (expected Regexp)"),ee(a,"match",[N,o],m.$to_proc())},-2),L(s,"$match?",function(a,o){var m=this;return(j(r("String"),a)||F(a["$respond_to?"]("to_str")))&&(a=l("Regexp").$new(a.$to_str())),j(l("Regexp"),a)||k.$raise(l("TypeError"),"wrong argument type "+a.$class()+" (expected Regexp)"),a["$match?"](m,o)},-2),L(s,"$next",function(){var a=this,o=a.length;if(o===0)return"";for(var m=a,N=a.search(/[a-zA-Z0-9]/),K=!1,C;o--;){if(C=a.charCodeAt(o),C>=48&&C<=57||C>=65&&C<=90||C>=97&&C<=122)switch(C){case 57:K=!0,C=48;break;case 90:K=!0,C=65;break;case 122:K=!0,C=97;break;default:K=!1,C+=1}else N===-1?C===255?(K=!0,C=0):(K=!1,C+=1):K=!0;if(m=m.slice(0,o)+String.fromCharCode(C)+m.slice(o+1),K&&(o===0||o===N)){switch(C){case 65:break;case 97:break;default:C+=1}o===0?m=String.fromCharCode(C)+m:m=m.slice(0,o)+String.fromCharCode(C)+m.slice(o),K=!1}if(!K)break}return m}),L(s,"$oct",function(){var a=this,o,m=a,N=8;return/^\s*_/.test(m)?0:(m=m.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(K,C,V,re){switch(re.charAt(0)){case"+":case"-":return K;case"0":if(re.charAt(1)==="x"&&V==="0x")return K}switch(V){case"0b":N=2;break;case"0":case"0o":N=8;break;case"0d":N=10;break;case"0x":N=16;break}return C+re}),o=parseInt(m.replace(/_(?!_)/g,""),N),isNaN(o)?0:o)}),L(s,"$ord",function(){var a=this;return typeof a.codePointAt=="function"?a.codePointAt(0):a.charCodeAt(0)}),L(s,"$partition",function(a){var o=this,m,N;return a.$$is_regexp?(N=a.exec(o),N===null?m=-1:(l("MatchData").$new(a,N),a=N[0],m=N.index)):(a=z(a,l("String"),"to_str"),m=o.indexOf(a)),m===-1?[o,"",""]:[o.slice(0,m),o.slice(m,m+a.length),o.slice(m+a.length)]}),L(s,"$reverse",function(){var a=this;return a.split("").reverse().join("")}),L(s,"$rindex",function(a,o){var m=this,N,K,C,V;if(o===void 0)o=m.length;else if(o=z(o,l("Integer"),"to_int"),o<0&&(o+=m.length,o<0))return c;if(a.$$is_regexp){for(K=null,C=D(a);V=C.exec(m),!(V===null||V.index>o);)K=V,C.lastIndex=K.index+1;K===null?(p["~"]=c,N=-1):(l("MatchData").$new(C,K),N=K.index)}else a=z(a,l("String"),"to_str"),N=m.lastIndexOf(a,o);return N===-1?c:N},-2),L(s,"$rjust",function(a,o){var m=this;if(o==null&&(o=" "),a=z(a,l("Integer"),"to_int"),o=z(o,l("String"),"to_str").$to_s(),F(o["$empty?"]())&&k.$raise(l("ArgumentError"),"zero width padding"),F(a<=m.length))return m;var N=Math.floor(a-m.length),K=Math.floor(N/o.length),C=Array(K+1).join(o),V=N-C.length;return C+o.slice(0,V)+m},-2),L(s,"$rpartition",function(a){var o=this,m,N,K,C;if(a.$$is_regexp){for(N=null,K=D(a);C=K.exec(o),C!==null;)N=C,K.lastIndex=N.index+1;N===null?m=-1:(l("MatchData").$new(K,N),a=N[0],m=N.index)}else a=z(a,l("String"),"to_str"),m=o.lastIndexOf(a);return m===-1?["","",o]:[o.slice(0,m),o.slice(m,m+a.length),o.slice(m+a.length)]}),L(s,"$rstrip",function(){var a=this;return a.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),L(s,"$scan",function i(a,o){var m=i.$$p||c,N,K=this;i.$$p=null,o=h(o),N=S(o,"no_matchdata"),N==null&&(N=!1);var C=[],V=c,re;for(a.$$is_regexp?a=D(a):(a=z(a,l("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(re=a.exec(K))!=null;)V=l("MatchData").$new(a,re,new Map([["no_matchdata",N]])),m===c?re.length==1?C.push(re[0]):C.push(V.$captures()):re.length==1?n.yield1(m,re[0]):n.yield1(m,V.$captures()),a.lastIndex===re.index&&(a.lastIndex+=1);return N||(p["~"]=V),m!==c?K:C},-2),L(s,"$singleton_class",function(){var a=this;return n.get_singleton_class(a)}),L(s,"$split",function(a,o){var m=this,N=c;if(p[";"]==null&&(p[";"]=c),m.length===0)return[];if(o===void 0)o=0;else if(o=$e["$coerce_to!"](o,l("Integer"),"to_int"),o===1)return[m];(a===void 0||a===c)&&(a=F(N=p[";"])?N:" ");var K=[],C=m.toString(),V=0,re,ae=0,le=0,_e,de;if(a.$$is_regexp?a=D(a):(a=z(a,l("String"),"to_str").$to_s(),a===" "&&(a=/\s+/gm,C=C.replace(/^\s+/,""))),K=C.split(a),K.length===1&&K[0]===C)return[K[0]];for(;(_e=K.indexOf(void 0))!==-1;)K.splice(_e,1);if(o===0){for(;K[K.length-1]==="";)K.pop();return K}if(a.$$is_regexp||(a=n.escape_regexp(a),a=new RegExp(a,"gm")),re=a.exec(C),o<0){if(re!==null&&re[0]===""&&a.source.indexOf("(?=")===-1)for(_e=0,de=re.length;_e<de;_e++)K.push("");return K}if(re!==null&&re[0]==="")return le=(re.length-1)*(o-1)+o,K.splice(le-1,K.length-1,K.slice(le-1).join("")),K;if(o>=K.length)return K;for(;re!==null&&(ae++,V=a.lastIndex,le+=re.length,ae+1!==o);)re=a.exec(C);return K.splice(le,K.length-1,C.slice(V)),K},-1),L(s,"$squeeze",function(a){var o,m,N=this;if(o=Y(arguments),m=o,m.length===0)return N.replace(/(.)\1+/g,"$1");var K=t(m);return K===null?N:N.replace(new RegExp("("+K+")\\1+","g"),"$1")},-1),L(s,"$start_with?",function(a){var o,m,N=this;o=Y(arguments),m=o;for(var K=0,C=m.length;K<C;K++)if(m[K].$$is_regexp){var V=m[K],re=V.exec(N);if(re!=null&&re.index===0)return p["~"]=l("MatchData").$new(V,re),!0;p["~"]=c}else{var ae=z(m[K],l("String"),"to_str").$to_s();if(N.length>=ae.length&&N.startsWith(ae))return!0}return!1},-1),L(s,"$strip",function(){var a=this;return a.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),L(s,"$sub",function i(a,o){var m=i.$$p||c,N=this;i.$$p=null,a.$$is_regexp||(a=z(a,l("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var K,C=a.exec(N);return C===null?(p["~"]=c,K=N.toString()):(l("MatchData").$new(a,C),o===void 0?(m===c&&k.$raise(l("ArgumentError"),"wrong number of arguments (1 for 2)"),K=N.slice(0,C.index)+m(C[0])+N.slice(C.index+C[0].length)):o.$$is_hash?K=N.slice(0,C.index)+o["$[]"](C[0]).$to_s()+N.slice(C.index+C[0].length):(o=z(o,l("String"),"to_str"),o=o.replace(/([\\]+)([0-9+&`'])/g,function(V,re,ae){if(re.length%2===0)return V;switch(ae){case"+":for(var le=C.length-1;le>0;le--)if(C[le]!==void 0)return re.slice(1)+C[le];return"";case"&":return re.slice(1)+C[0];case"`":return re.slice(1)+N.slice(0,C.index);case"'":return re.slice(1)+N.slice(C.index+C[0].length);default:return re.slice(1)+(C[ae]||"")}}).replace(/\\\\/g,"\\"),K=N.slice(0,C.index)+o+N.slice(C.index+C[0].length))),K},-2),L(s,"$sum",function(a){var o=this;a==null&&(a=16),a=z(a,l("Integer"),"to_int");for(var m=0,N=o.length,K=0;K<N;K++)m+=o.charCodeAt(K);return a<=0?m:m&Math.pow(2,a)-1},-1),L(s,"$swapcase",function(){var a=this,o=a.replace(/([a-z]+)|([A-Z]+)/g,function(m,N,K){return N?m.toUpperCase():m.toLowerCase()});return o}),L(s,"$to_f",function(){var a=this;if(a.charAt(0)==="_")return 0;var o=parseFloat(a.replace(/_/g,""));return isNaN(o)||o==1/0||o==-1/0?0:o}),L(s,"$to_i",function(a){var o=this;a==null&&(a=10);var m,N=o.toLowerCase(),K=z(a,l("Integer"),"to_int");return(K===1||K<0||K>36)&&k.$raise(l("ArgumentError"),"invalid radix "+K),/^\s*_/.test(N)?0:(N=N.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(C,V,re,ae){switch(ae.charAt(0)){case"+":case"-":return C;case"0":if(ae.charAt(1)==="x"&&re==="0x"&&(K===0||K===16))return C}switch(re){case"0b":if(K===0||K===2)return K=2,V+ae;break;case"0":case"0o":if(K===0||K===8)return K=8,V+ae;break;case"0d":if(K===0||K===10)return K=10,V+ae;break;case"0x":if(K===0||K===16)return K=16,V+ae;break}return C}),m=parseInt(N.replace(/_(?!_)/g,""),K),isNaN(m)?0:m)},-1),L(s,"$to_proc",function i(){i.$$p;var a=this,o=c,m=c,N=c;return i.$$p=null,o=a.valueOf(),m=n.jsid(o),N=ee(k,"proc",[],function K(C){var V=K.$$p||c,re,ae;K.$$p=null,re=Y(arguments),ae=re,ae.length===0&&k.$raise(l("ArgumentError"),"no receiver given");var le=ae[0];le==null&&(le=c);var _e=le[m];return _e?ae=ae.slice(1):(_e=le.$method_missing,ae[0]=o),typeof V=="function"&&(_e.$$p=V),ae.length===0?_e.call(le):_e.apply(le,ae)},-1),N.$$source_location=c,N}),L(s,"$to_s",function(){var a=this;return a.toString()}),L(s,"$tr",function(a,o){var m=this;if(a=z(a,l("String"),"to_str").$to_s(),o=z(o,l("String"),"to_str").$to_s(),a.length==0||a===o)return m;var N,K,C,V,re,ae,le,_e={},de=a.split(""),ge=de.length,ve=o.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],ge-=1);var R=[],H=null;for(K=!1,N=0;N<ge;N++)if(V=de[N],H==null)H=V,R.push(V);else if(V==="-")H==="-"?(R.push("-"),R.push("-")):N==ge-1?R.push("-"):K=!0;else if(K){for(re=H.charCodeAt(0),ae=V.charCodeAt(0),re>ae&&k.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),C=re+1;C<ae;C++)R.push(String.fromCharCode(C));R.push(V),K=null,H=null}else R.push(V);if(de=R,ge=de.length,be)for(N=0;N<ge;N++)_e[de[N]]=!0;else{if(me>0){var X=[],Q=null;for(K=!1,N=0;N<me;N++)if(V=ve[N],Q==null)Q=V,X.push(V);else if(V==="-")Q==="-"?(X.push("-"),X.push("-")):N==me-1?X.push("-"):K=!0;else if(K){for(re=Q.charCodeAt(0),ae=V.charCodeAt(0),re>ae&&k.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),C=re+1;C<ae;C++)X.push(String.fromCharCode(C));X.push(V),K=null,Q=null}else X.push(V);ve=X,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(N=0;N<ne;N++)ve.push(se)}for(N=0;N<ge;N++)_e[de[N]]=ve[N]}var oe="";for(N=0,le=m.length;N<le;N++){V=m.charAt(N);var fe=_e[V];be?oe+=fe==null?ie:V:oe+=fe??V}return oe}),L(s,"$tr_s",function(a,o){var m=this;if(a=z(a,l("String"),"to_str").$to_s(),o=z(o,l("String"),"to_str").$to_s(),a.length==0)return m;var N,K,C,V,re,ae,le,_e={},de=a.split(""),ge=de.length,ve=o.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],ge-=1);var R=[],H=null;for(K=!1,N=0;N<ge;N++)if(V=de[N],H==null)H=V,R.push(V);else if(V==="-")H==="-"?(R.push("-"),R.push("-")):N==ge-1?R.push("-"):K=!0;else if(K){for(re=H.charCodeAt(0),ae=V.charCodeAt(0),re>ae&&k.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),C=re+1;C<ae;C++)R.push(String.fromCharCode(C));R.push(V),K=null,H=null}else R.push(V);if(de=R,ge=de.length,be)for(N=0;N<ge;N++)_e[de[N]]=!0;else{if(me>0){var X=[],Q=null;for(K=!1,N=0;N<me;N++)if(V=ve[N],H==null)H=V,X.push(V);else if(V==="-")Q==="-"?(X.push("-"),X.push("-")):N==me-1?X.push("-"):K=!0;else if(K){for(re=H.charCodeAt(0),ae=V.charCodeAt(0),re>ae&&k.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),C=re+1;C<ae;C++)X.push(String.fromCharCode(C));X.push(V),K=null,H=null}else X.push(V);ve=X,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(N=0;N<ne;N++)ve.push(se)}for(N=0;N<ge;N++)_e[de[N]]=ve[N]}var oe="",fe=null;for(N=0,le=m.length;N<le;N++){V=m.charAt(N);var f=_e[V];be?f==null?fe==null&&(oe+=ie,fe=!0):(oe+=V,fe=null):f!=null?(fe==null||fe!==f)&&(oe+=f,fe=f):(oe+=V,fe=null)}return oe}),L(s,"$upcase",function(){var a=this;return a.toUpperCase()}),L(s,"$upto",function i(a,o){var m=i.$$p||c,N=this;if(i.$$p=null,o==null&&(o=!1),m===c)return N.$enum_for("upto",a,o);var K,C,V=N.toString();if(a=z(a,l("String"),"to_str"),V.length===1&&a.length===1)for(K=V.charCodeAt(0),C=a.charCodeAt(0);K<=C&&!(o&&K===C);)m(String.fromCharCode(K)),K+=1;else if(parseInt(V,10).toString()===V&&parseInt(a,10).toString()===a)for(K=parseInt(V,10),C=parseInt(a,10);K<=C&&!(o&&K===C);)m(K.toString()),K+=1;else for(;V.length<=a.length&&V<=a&&!(o&&V===a);)m(V),V=V.$succ();return N},-2);function t(i){function a(_e){var de="",ge,ve=_e.length,me,be,ie,R,H;for(ge=0;ge<ve;ge++)if(me=_e.charAt(ge),me==="-"&&ge>0&&ge<ve-1&&!be){for(ie=_e.charCodeAt(ge-1),R=_e.charCodeAt(ge+1),ie>R&&k.$raise(l("ArgumentError"),'invalid range "'+ie+"-"+R+'" in string transliteration'),H=ie+1;H<R+1;H++)de+=String.fromCharCode(H);be=!0,ge++}else be=me==="\\",de+=me;return de}function o(_e,de){if(_e.length===0)return de;var ge="",ve,me=_e.length,be;for(ve=0;ve<me;ve++)be=_e.charAt(ve),de.indexOf(be)!==-1&&(ge+=be);return ge}var m,N,K,C,V,re,ae="",le="";for(m=0,N=i.length;m<N;m++)K=z(i[m],l("String"),"to_str"),C=K.charAt(0)==="^"&&K.length>1,K=a(C?K.slice(1):K),C?le=o(le,K):ae=o(ae,K);if(ae.length>0&&le.length>0){for(re="",m=0,N=ae.length;m<N;m++)V=ae.charAt(m),le.indexOf(V)===-1&&(re+=V);ae=re,le=""}return ae.length>0?"["+l("Regexp").$escape(ae)+"]":le.length>0?"[^"+l("Regexp").$escape(le)+"]":null}return L(s,"$instance_variables",function(){return[]}),W(s,"$_load",function(a){var o,m,N=this;return o=Y(arguments),m=o,ee(N,"new",B(m))},-1),L(s,"$unicode_normalize",function(a){var o=this;return a==null&&(a="nfc"),F(["nfc","nfd","nfkc","nfkd"]["$include?"](a))||k.$raise(l("ArgumentError"),"Invalid normalization form "+a),o.normalize(a.$upcase())},-1),L(s,"$unicode_normalized?",function(a){var o=this;return a==null&&(a="nfc"),o.$unicode_normalize(a)["$=="](o)},-1),L(s,"$unpack",function(a){return k.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),L(s,"$unpack1",function(a){return k.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),L(s,"$freeze",function(){var a=this;return typeof a=="string"||x(a,"$$frozen",!0),a}),L(s,"$-@",function(){var a=this;return typeof a=="string"||a.$$frozen?a:a.encoding.name=="UTF-8"&&a.internal_encoding.name=="UTF-8"?a.toString():a.$dup().$freeze()}),L(s,"$frozen?",function(){var a=this;return typeof a=="string"||a.$$frozen===!0}),q(s,"+@","dup"),q(s,"===","=="),q(s,"byteslice","[]"),q(s,"eql?","=="),q(s,"equal?","==="),q(s,"object_id","__id__"),q(s,"slice","[]"),q(s,"succ","next"),q(s,"to_str","to_s"),q(s,"to_sym","intern"),$e.$pristine(s,"initialize")}("::",String,M),u(M[0],"Symbol",g("String"))};Opal.modules["corelib/enumerable"]=function(n){var z=n.truthy,w=n.coerce_to,D=n.yield1,x=n.yieldX,O=n.deny_frozen_access,Z=n.module,T=n.send,J=n.slice,v=n.to_a,L=n.Opal,$e=n.thrower,W=n.def,Y=n.Kernel,ee=n.return_val,B=n.rb_gt,b=n.rb_times,h=n.rb_lt,S=n.eqeq,j=n.rb_plus,k=n.rb_minus,F=n.rb_divide,p=n.rb_le,A=n.lambda,P=n.not,I=n.alias,q=[],u=n.nil,d=n.$$$;return n.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(M,g){var c=Z(M,"Enumerable"),l=[c].concat(g),E=n.$r(l);function G(_){return _.length===0&&(_=[u]),_.length>1&&(_=[_]),_}return W(c,"$all?",function _(s){try{var $=$e("return"),r=_.$$p||u,e=this;return _.$$p=null,z(s!==void 0)?T(e,"each",[],function t(i){var a,o,m=u;if(a=J(arguments),o=a,m=G(o),z(T(s,"public_send",["==="].concat(v(m)))))return u;$.$throw(!1,t.$$is_lambda)},{$$arity:-1,$$ret:$}):r!==u?T(e,"each",[],function t(i){var a,o;if(a=J(arguments),o=a,z(n.yieldX(r,v(o))))return u;$.$throw(!1,t.$$is_lambda)},{$$arity:-1,$$ret:$}):T(e,"each",[],function t(i){var a,o;if(a=J(arguments),o=a,z(L.$destructure(o)))return u;$.$throw(!1,t.$$is_lambda)},{$$arity:-1,$$ret:$}),!0}catch(t){if(t===$)return t.$v;throw t}finally{$.is_orphan=!0}},-1),W(c,"$any?",function _(s){try{var $=$e("return"),r=_.$$p||u,e=this;return _.$$p=null,z(s!==void 0)?T(e,"each",[],function t(i){var a,o,m=u;if(a=J(arguments),o=a,m=G(o),z(T(s,"public_send",["==="].concat(v(m)))))$.$throw(!0,t.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):r!==u?T(e,"each",[],function t(i){var a,o;if(a=J(arguments),o=a,z(n.yieldX(r,v(o))))$.$throw(!0,t.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):T(e,"each",[],function t(i){var a,o;if(a=J(arguments),o=a,z(L.$destructure(o)))$.$throw(!0,t.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),!1}catch(t){if(t===$)return t.$v;throw t}finally{$.is_orphan=!0}},-1),W(c,"$chunk",function _(){var s=_.$$p||u,$=this;return _.$$p=null,s===u?T($,"to_enum",["chunk"],function r(){var e=r.$$s==null?this:r.$$s;return e.$enumerator_size()},{$$s:$}):T(d("Enumerator"),"new",[],function r(e){var t=r.$$s==null?this:r.$$s;e==null&&(e=u);var i=u,a=[];function o(){a.length>0&&e.$yield(i,a)}t.$each.$$p=function(m){var N=D(s,m);N===u?(o(),a=[],i=u):(i===u||i===N?a.push(m):(o(),a=[m]),i=N)},t.$each(),o()},{$$s:$})}),W(c,"$chunk_while",function _(){var s=_.$$p||u,$=this;return _.$$p=null,s===u&&Y.$raise(d("ArgumentError"),"no block given"),T($,"slice_when",[],function(e,t){return e==null&&(e=u),t==null&&(t=u),n.yieldX(s,[e,t])["$!"]()})}),W(c,"$collect",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,s===u)return T($,"enum_for",["collect"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:$});var r=[];return $.$each.$$p=function(){var e=x(s,arguments);r.push(e)},$.$each(),r}),W(c,"$collect_concat",function _(){var s=_.$$p||u,$=this;return _.$$p=null,s===u?T($,"enum_for",["collect_concat"],function r(){var e=r.$$s==null?this:r.$$s;return e.$enumerator_size()},{$$s:$}):T($,"map",[],s.$to_proc()).$flatten(1)}),W(c,"$compact",function(){var s=this;return s.$to_a().$compact()}),W(c,"$count",function _(s){var $=_.$$p||u,r=this,e=u;return _.$$p=null,e=0,s!=null&&$!==u&&r.$warn("warning: given block not used"),z(s!=null)?$=T(Y,"proc",[],function(i){var a,o;return a=J(arguments),o=a,L.$destructure(o)["$=="](s)},-1):z($["$nil?"]())&&($=T(Y,"proc",[],ee(!0))),T(r,"each",[],function(i){var a,o;return a=J(arguments),o=a,z(x($,o))?e++:u},-1),e},-1),W(c,"$cycle",function _(s){var $=_.$$p||u,r=this;if(_.$$p=null,s==null&&(s=u),$===u)return T(r,"enum_for",["cycle",s],function a(){var o=a.$$s==null?this:a.$$s;return z(s["$nil?"]())?z(o["$respond_to?"]("size"))?d(d("Float"),"INFINITY"):u:(s=L["$coerce_to!"](s,d("Integer"),"to_int"),z(B(s,0))?b(o.$enumerator_size(),s):0)},{$$s:r});if(!z(s["$nil?"]())&&(s=L["$coerce_to!"](s,d("Integer"),"to_int"),z(s<=0)))return u;var e=[],t,i;if(r.$each.$$p=function(){var a=L.$destructure(arguments);D($,a),e.push(a)},r.$each(),e.length===0)return u;if(s===u)for(;;)for(t=0,i=e.length;t<i;t++)D($,e[t]);else for(;s>1;){for(t=0,i=e.length;t<i;t++)D($,e[t]);s--}},-1),W(c,"$detect",function _(s){try{var $=$e("return"),r=_.$$p||u,e=this;return _.$$p=null,r===u?e.$enum_for("detect",s):(T(e,"each",[],function t(i){var a,o,m=u;if(a=J(arguments),o=a,m=L.$destructure(o),z(n.yield1(r,m)))$.$throw(m,t.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),s!==void 0?typeof s=="function"?s():s:u)}catch(t){if(t===$)return t.$v;throw t}finally{$.is_orphan=!0}},-1),W(c,"$drop",function(s){var $=this;s=w(s,d("Integer"),"to_int"),z(s<0)&&Y.$raise(d("ArgumentError"),"attempt to drop negative size");var r=[],e=0;return $.$each.$$p=function(){s<=e&&r.push(L.$destructure(arguments)),e++},$.$each(),r}),W(c,"$drop_while",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,s===u)return $.$enum_for("drop_while");var r=[],e=!0;return $.$each.$$p=function(){var t=L.$destructure(arguments);if(e){var i=D(s,t);z(i)||(e=!1,r.push(t))}else r.push(t)},$.$each(),r}),W(c,"$each_cons",function _(s){var $=_.$$p||u,r=this;if(_.$$p=null,z(arguments.length!=1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),s=L.$try_convert(s,d("Integer"),"to_int"),z(s<=0)&&Y.$raise(d("ArgumentError"),"invalid size"),$===u)return T(r,"enum_for",["each_cons",s],function t(){var i=t.$$s==null?this:t.$$s,a=u;return a=i.$enumerator_size(),z(a["$nil?"]())?u:S(a,0)||z(h(a,s))?0:j(k(a,s),1)},{$$s:r});var e=[];return r.$each.$$p=function(){var t=L.$destructure(arguments);e.push(t),e.length>s&&e.shift(),e.length==s&&D($,e.slice(0,s))},r.$each(),r}),W(c,"$each_entry",function _(s){var $=_.$$p||u,r,e,t=this;return _.$$p=null,r=J(arguments),e=r,$===u?T(t,"to_enum",["each_entry"].concat(v(e)),function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:t}):(t.$each.$$p=function(){var i=L.$destructure(arguments);D($,i)},t.$each.apply(t,e),t)},-1),W(c,"$each_slice",function _(s){var $=_.$$p||u,r=this;if(_.$$p=null,s=w(s,d("Integer"),"to_int"),z(s<=0)&&Y.$raise(d("ArgumentError"),"invalid slice size"),$===u)return T(r,"enum_for",["each_slice",s],function t(){var i=t.$$s==null?this:t.$$s;return z(i["$respond_to?"]("size"))?F(i.$size(),s).$ceil():u},{$$s:r});var e=[];return r.$each.$$p=function(){var t=L.$destructure(arguments);e.push(t),e.length===s&&(D($,e),e=[])},r.$each(),e.length>0&&D($,e),r}),W(c,"$each_with_index",function _(s){var $=_.$$p||u,r,e,t=this;if(_.$$p=null,r=J(arguments),e=r,$===u)return T(t,"enum_for",["each_with_index"].concat(v(e)),function a(){var o=a.$$s==null?this:a.$$s;return o.$enumerator_size()},{$$s:t});var i=0;return t.$each.$$p=function(){var a=L.$destructure(arguments);$(a,i),i++},t.$each.apply(t,e),t},-1),W(c,"$each_with_object",function _(s){var $=_.$$p||u,r=this;return _.$$p=null,$===u?T(r,"enum_for",["each_with_object",s],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var e=L.$destructure(arguments);$(e,s)},r.$each(),s)}),W(c,"$entries",function(s){var $,r,e=this;$=J(arguments),r=$;var t=[];return e.$each.$$p=function(){t.push(L.$destructure(arguments))},e.$each.apply(e,r),t},-1),W(c,"$filter_map",function _(){var s=_.$$p||u,$=this;return _.$$p=null,s===u?T($,"enum_for",["filter_map"],function r(){var e=r.$$s==null?this:r.$$s;return e.$enumerator_size()},{$$s:$}):T(T($,"map",[],s.$to_proc()),"select",[],"itself".$to_proc())}),W(c,"$find_all",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,s===u)return T($,"enum_for",["find_all"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:$});var r=[];return $.$each.$$p=function(){var e=L.$destructure(arguments),t=D(s,e);z(t)&&r.push(e)},$.$each(),r}),W(c,"$find_index",function _(s){try{var $=$e("return"),r=_.$$p||u,e=this,t=u;return _.$$p=null,z(s===void 0&&r===u)?e.$enum_for("find_index"):(s!=null&&r!==u&&e.$warn("warning: given block not used"),t=0,z(s!=null)?T(e,"each",[],function i(a){var o,m;return o=J(arguments),m=o,S(L.$destructure(m),s)&&$.$throw(t,i.$$is_lambda),t+=1},{$$arity:-1,$$ret:$}):T(e,"each",[],function i(a){var o,m;return o=J(arguments),m=o,z(n.yieldX(r,v(m)))&&$.$throw(t,i.$$is_lambda),t+=1},{$$arity:-1,$$ret:$}),u)}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),W(c,"$first",function(s){try{var $=$e("return"),r=this,e=u,t=u;return z(s===void 0)?T(r,"each",[],function i(a){a==null&&(a=u),$.$throw(a,i.$$is_lambda)},{$$ret:$}):(e=[],s=w(s,d("Integer"),"to_int"),z(s<0)&&Y.$raise(d("ArgumentError"),"attempt to take negative size"),z(s==0)?[]:(t=0,T(r,"each",[],function i(a){var o,m;if(o=J(arguments),m=o,e.push(L.$destructure(m)),z(s<=++t))$.$throw(e,i.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),e))}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),W(c,"$grep",function _(s){var $=_.$$p||u,r=this,e=u;return _.$$p=null,e=[],T(r,"each",[],function(i){var a,o,m=u;return a=J(arguments),o=a,m=G(o),z(T(s,"__send__",["==="].concat(v(m))))?($!==u?(z(B(o.$length(),1))&&(o=[o]),o=n.yieldX($,v(o))):z(p(o.$length(),1))&&(o=o["$[]"](0)),e.$push(o)):u},-1),e}),W(c,"$grep_v",function _(s){var $=_.$$p||u,r=this,e=u;return _.$$p=null,e=[],T(r,"each",[],function(i){var a,o,m=u;return a=J(arguments),o=a,m=G(o),z(T(s,"__send__",["==="].concat(v(m))))?u:($!==u?(z(B(o.$length(),1))&&(o=[o]),o=n.yieldX($,v(o))):z(p(o.$length(),1))&&(o=o["$[]"](0)),e.$push(o))},-1),e}),W(c,"$group_by",function _(){var s=_.$$p||u,$,r=this,e=u,t=u;return _.$$p=null,s===u?T(r,"enum_for",["group_by"],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:r}):(e=new Map,r.$each.$$p=function(){var i=L.$destructure(arguments),a=D(s,i);(z(t=e["$[]"](a))?t:($=[a,[]],T(e,"[]=",$),$[$.length-1]))["$<<"](i)},r.$each(),e)}),W(c,"$include?",function(s){try{var $=$e("return"),r=this;return T(r,"each",[],function e(t){var i,a;if(i=J(arguments),a=i,S(L.$destructure(a),s))$.$throw(!0,e.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),!1}catch(e){if(e===$)return e.$v;throw e}finally{$.is_orphan=!0}}),W(c,"$inject",function _(s,$){var r=_.$$p||u,e=this;_.$$p=null;var t=s;return r!==u&&$===void 0?e.$each.$$p=function(){var i=L.$destructure(arguments);if(t===void 0){t=i;return}i=x(r,[t,i]),t=i}:($===void 0&&(d("Symbol")["$==="](s)||Y.$raise(d("TypeError"),""+s.$inspect()+" is not a Symbol"),$=s,t=void 0),e.$each.$$p=function(){var i=L.$destructure(arguments);if(t===void 0){t=i;return}t=t.$__send__($,i)}),e.$each(),t??u},-1),W(c,"$lazy",function(){var s=this;return T(d(d("Enumerator"),"Lazy"),"new",[s,s.$enumerator_size()],function(r,e){var t,i;return r==null&&(r=u),t=J(arguments,1),i=t,T(r,"yield",v(i))},-2)}),W(c,"$enumerator_size",function(){var s=this;return z(s["$respond_to?"]("size"))?s.$size():u}),W(c,"$max",function _(s){var $=_.$$p||u,r=this;if(_.$$p=null,s===void 0||s===u){var e,t;return r.$each.$$p=function(){var i=L.$destructure(arguments);if(e===void 0){e=i;return}$!==u?t=x($,[i,e]):t=i["$<=>"](e),t===u&&Y.$raise(d("ArgumentError"),"comparison failed"),t>0&&(e=i)},r.$each(),e===void 0?u:e}return s=w(s,d("Integer"),"to_int"),T(r,"sort",[],$.$to_proc()).$reverse().$first(s)},-1),W(c,"$max_by",function _(s){var $=_.$$p||u,r=this;if(_.$$p=null,s==null&&(s=u),!z($))return T(r,"enum_for",["max_by",s],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:r});if(!z(s["$nil?"]()))return T(r,"sort_by",[],$.$to_proc()).$reverse().$take(s);var e,t;return r.$each.$$p=function(){var i=L.$destructure(arguments),a=D($,i);if(e===void 0){e=i,t=a;return}a["$<=>"](t)>0&&(e=i,t=a)},r.$each(),e===void 0?u:e},-1),W(c,"$min",function _(s){var $=_.$$p||u,r=this;if(_.$$p=null,s==null&&(s=u),!z(s["$nil?"]()))return $!==u?T(r,"sort",[],function(i,a){return i==null&&(i=u),a==null&&(a=u),n.yieldX($,[i,a])}).$take(s):r.$sort().$take(s);var e;return $!==u?r.$each.$$p=function(){var t=L.$destructure(arguments);if(e===void 0){e=t;return}var i=$(t,e);i===u&&Y.$raise(d("ArgumentError"),"comparison failed"),i<0&&(e=t)}:r.$each.$$p=function(){var t=L.$destructure(arguments);if(e===void 0){e=t;return}L.$compare(t,e)<0&&(e=t)},r.$each(),e===void 0?u:e},-1),W(c,"$min_by",function _(s){var $=_.$$p||u,r=this;if(_.$$p=null,s==null&&(s=u),!z($))return T(r,"enum_for",["min_by",s],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:r});if(!z(s["$nil?"]()))return T(r,"sort_by",[],$.$to_proc()).$take(s);var e,t;return r.$each.$$p=function(){var i=L.$destructure(arguments),a=D($,i);if(e===void 0){e=i,t=a;return}a["$<=>"](t)<0&&(e=i,t=a)},r.$each(),e===void 0?u:e},-1),W(c,"$minmax",function _(){var s=_.$$p||u,$=this,r=u;_.$$p=null,s=z(r=s)?r:T(Y,"proc",[],function(o,m){return o==null&&(o=u),m==null&&(m=u),o["$<=>"](m)});var e=u,t=u,i=!0;return $.$each.$$p=function(){var a=L.$destructure(arguments);if(i)e=t=a,i=!1;else{var o=s.$call(e,a);o===u?Y.$raise(d("ArgumentError"),"comparison failed"):o>0&&(e=a);var m=s.$call(t,a);m===u?Y.$raise(d("ArgumentError"),"comparison failed"):m<0&&(t=a)}},$.$each(),[e,t]}),W(c,"$minmax_by",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,!z(s))return T($,"enum_for",["minmax_by"],function a(){var o=a.$$s==null?this:a.$$s;return o.$enumerator_size()},{$$s:$});var r=u,e=u,t,i;return $.$each.$$p=function(){var a=L.$destructure(arguments),o=D(s,a);(t===void 0||o["$<=>"](t)<0)&&(r=a,t=o),(i===void 0||o["$<=>"](i)>0)&&(e=a,i=o)},$.$each(),[r,e]}),W(c,"$none?",function _(s){try{var $=$e("return"),r=_.$$p||u,e=this;return _.$$p=null,z(s!==void 0)?T(e,"each",[],function t(i){var a,o,m=u;if(a=J(arguments),o=a,m=G(o),z(T(s,"public_send",["==="].concat(v(m)))))$.$throw(!1,t.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):r!==u?T(e,"each",[],function t(i){var a,o;if(a=J(arguments),o=a,z(n.yieldX(r,v(o))))$.$throw(!1,t.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):T(e,"each",[],function t(i){var a,o,m=u;if(a=J(arguments),o=a,m=L.$destructure(o),z(m))$.$throw(!1,t.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),!0}catch(t){if(t===$)return t.$v;throw t}finally{$.is_orphan=!0}},-1),W(c,"$one?",function _(s){try{var $=$e("return"),r=_.$$p||u,e=this,t=u;return _.$$p=null,t=0,z(s!==void 0)?T(e,"each",[],function i(a){var o,m,N=u;if(o=J(arguments),m=o,N=G(m),z(T(s,"public_send",["==="].concat(v(N)))))if(t=j(t,1),z(B(t,1)))$.$throw(!1,i.$$is_lambda);else return u;else return u},{$$arity:-1,$$ret:$}):r!==u?T(e,"each",[],function i(a){var o,m;if(o=J(arguments),m=o,!z(n.yieldX(r,v(m))))return u;if(t=j(t,1),z(B(t,1)))$.$throw(!1,i.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):T(e,"each",[],function i(a){var o,m;if(o=J(arguments),m=o,!z(L.$destructure(m)))return u;if(t=j(t,1),z(B(t,1)))$.$throw(!1,i.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),t["$=="](1)}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),W(c,"$partition",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,s===u)return T($,"enum_for",["partition"],function t(){var i=t.$$s==null?this:t.$$s;return i.$enumerator_size()},{$$s:$});var r=[],e=[];return $.$each.$$p=function(){var t=L.$destructure(arguments),i=D(s,t);z(i)?r.push(t):e.push(t)},$.$each(),[r,e]}),W(c,"$reject",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,s===u)return T($,"enum_for",["reject"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:$});var r=[];return $.$each.$$p=function(){var e=L.$destructure(arguments),t=D(s,e);z(t)||r.push(e)},$.$each(),r}),W(c,"$reverse_each",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,s===u)return T($,"enum_for",["reverse_each"],function t(){var i=t.$$s==null?this:t.$$s;return i.$enumerator_size()},{$$s:$});var r=[];$.$each.$$p=function(){r.push(arguments)},$.$each();for(var e=r.length-1;e>=0;e--)x(s,r[e]);return r}),W(c,"$slice_before",function _(s){var $=_.$$p||u,r=this;return _.$$p=null,z(s===void 0&&$===u)&&Y.$raise(d("ArgumentError"),"both pattern and block are given"),z(s!==void 0&&$!==u||arguments.length>1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),T(d("Enumerator"),"new",[],function e(t){var i=e.$$s==null?this:e.$$s;t==null&&(t=u);var a=[];$!==u?s===void 0?i.$each.$$p=function(){var o=L.$destructure(arguments),m=D($,o);z(m)&&a.length>0&&(t["$<<"](a),a=[]),a.push(o)}:i.$each.$$p=function(){var o=L.$destructure(arguments),m=$(o,s.$dup());z(m)&&a.length>0&&(t["$<<"](a),a=[]),a.push(o)}:i.$each.$$p=function(){var o=L.$destructure(arguments),m=s["$==="](o);z(m)&&a.length>0&&(t["$<<"](a),a=[]),a.push(o)},i.$each(),a.length>0&&t["$<<"](a)},{$$s:r})},-1),W(c,"$slice_after",function _(s){var $=_.$$p||u,r=this;return _.$$p=null,z(s===void 0&&$===u)&&Y.$raise(d("ArgumentError"),"both pattern and block are given"),z(s!==void 0&&$!==u||arguments.length>1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),z(s!==void 0)&&($=T(Y,"proc",[],function(t){return t==null&&(t=u),s["$==="](t)})),T(d("Enumerator"),"new",[],function e(t){var i=e.$$s==null?this:e.$$s;t==null&&(t=u);var a;i.$each.$$p=function(){var o=L.$destructure(arguments),m=D($,o);a==null&&(a=[]),z(m)?(a.push(o),t.$yield(a),a=null):a.push(o)},i.$each(),a!=null&&t.$yield(a)},{$$s:r})},-1),W(c,"$slice_when",function _(){var s=_.$$p||u,$=this;return _.$$p=null,s===u&&Y.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1)"),T(d("Enumerator"),"new",[],function r(e){var t=r.$$s==null?this:r.$$s;e==null&&(e=u);var i=u,a=u;t.$each_cons.$$p=function(){var o=L.$destructure(arguments),m=o[0],N=o[1],K=x(s,[m,N]);a=N,i===u&&(i=[]),z(K)?(i.push(m),e.$yield(i),i=[]):i.push(m)},t.$each_cons(2),i!==u&&(i.push(a),e.$yield(i))},{$$s:$})}),W(c,"$sort",function _(){var s=_.$$p||u,$=this,r=u;return _.$$p=null,r=$.$to_a(),s===u&&(s=A(function(t,i){return t==null&&(t=u),i==null&&(i=u),t["$<=>"](i)})),T(r,"sort",[],s.$to_proc())}),W(c,"$sort_by",function _(){var s=_.$$p||u,$=this,r=u;return _.$$p=null,s===u?T($,"enum_for",["sort_by"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:$}):(r=T($,"map",[],function(){var t=u;return t=L.$destructure(arguments),[n.yield1(s,t),t]}),T(r,"sort!",[],function(t,i){return t==null&&(t=u),i==null&&(i=u),t[0]["$<=>"](i[0])}),T(r,"map!",[],function(t){return t==null&&(t=u),t[1]}))}),W(c,"$sum",function _(s){var $=_.$$p||u,r=this,e=u,t=u;return _.$$p=null,s==null&&(s=0),e=s,t=0,T(r,"each",[],function(a){var o,m,N=u,K=u,C=u;return o=J(arguments),m=o,N=$!==u?n.yieldX($,v(m)):L.$destructure(m),P([d(d("Float"),"INFINITY"),d(d("Float"),"INFINITY")["$-@"]()]["$include?"](N))&&z(N["$respond_to?"]("-"))?(K=k(N,t),C=j(e,K),t=k(k(C,e),K),e=C):e=j(e,N)},-1),e},-1),W(c,"$take",function(s){var $=this;return $.$first(s)}),W(c,"$take_while",function _(){try{var s=$e("return"),$=_.$$p||u,r=this,e=u;return _.$$p=null,z($)?(e=[],T(r,"each",[],function t(i){var a,o,m=u;return a=J(arguments),o=a,m=L.$destructure(o),z(n.yield1($,m))||s.$throw(e,t.$$is_lambda),e.push(m)},{$$arity:-1,$$ret:s})):r.$enum_for("take_while")}catch(t){if(t===s)return t.$v;throw t}finally{s.is_orphan=!0}}),W(c,"$uniq",function _(){var s=_.$$p||u,$=this,r=u;return _.$$p=null,r=new Map,T($,"each",[],function(t){var i,a,o,m=u,N=u;return i=J(arguments),a=i,m=L.$destructure(a),N=s!==u?n.yield1(s,m):m,z(r["$key?"](N))?u:(o=[N,m],T(r,"[]=",o),o[o.length-1])},-1),r.$values()}),W(c,"$tally",function(s){var $=this,r=u;return s&&s!==u&&O(s),r=T(T($,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),z(s)?(T(r,"each",[],function(t,i){var a;return t==null&&(t=u),i==null&&(i=u),a=[t,j(s.$fetch(t,0),i)],T(s,"[]=",a),a[a.length-1]}),s):r},-1),W(c,"$to_h",function _(s){var $=_.$$p||u,r,e,t=this;if(_.$$p=null,r=J(arguments),e=r,$!==u)return T(T(t,"map",[],$.$to_proc()),"to_h",v(e));var i=new Map;return t.$each.$$p=function(){var a=L.$destructure(arguments),o=L["$coerce_to?"](a,d("Array"),"to_ary"),m,N;o.$$is_array||Y.$raise(d("TypeError"),"wrong element type "+a.$class()+" (expected array)"),o.length!==2&&Y.$raise(d("ArgumentError"),"element has wrong array length (expected 2, was "+o.$length()+")"),m=o[0],N=o[1],n.hash_put(i,m,N)},t.$each.apply(t,e),i},-1),W(c,"$to_set",function _(s,$){var r=_.$$p||u,e,t,i,a=this;return _.$$p=null,e=J(arguments),e.length>0&&(t=e.shift()),t==null&&(t=E("Set")),i=e,T(t,"new",[a].concat(v(i)),r.$to_proc())},-1),W(c,"$zip",function _(s){_.$$p;var $,r,e=this;return _.$$p=null,$=J(arguments),r=$,T(e.$to_a(),"zip",v(r))},-1),I(c,"find","detect"),I(c,"filter","find_all"),I(c,"flat_map","collect_concat"),I(c,"map","collect"),I(c,"member?","include?"),I(c,"reduce","inject"),I(c,"select","find_all"),I(c,"to_a","entries")}("::",q)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(n){var z=n.klass,w=n.truthy,D=n.to_a,x=n.eqeq,O=n.Kernel,Z=n.def,T=n.rb_gt,J=n.rb_lt,v=n.rb_le,L=n.rb_ge,$e=n.rb_plus,W=n.rb_minus,Y=n.eqeqeq,ee=n.not,B=n.rb_times,b=n.rb_divide,h=n.alias,S=[],j=n.nil,k=n.$$$;return n.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(F,p,A){var P=z(F,p,"Enumerator"),I=[P].concat(A);return function(q,u,d){var M=z(q,u,"ArithmeticSequence"),g=[M].concat(d),c=n.$r(g),l=M.$$prototype;l.step_arg2=l.receiver_num=l.step_arg1=l.step=l.range=l.topfx=l.bypfx=l.creation_method=l.skipped_arg=j,n.prop(M.$$prototype,"$$is_arithmetic_seq",!0);var E=1/0;return Z(M,"$initialize",function(_,s,$){var r,e=this,t=j;return $==null&&($="step"),e.creation_method=$,w(_["$is_a?"](k("Array")))?(r=[].concat(D(_)),e.step_arg1=r[0]==null?j:r[0],e.step_arg2=r[1]==null?j:r[1],e.topfx=r[2]==null?j:r[2],e.bypfx=r[3]==null?j:r[3],e.receiver_num=s,e.step=1,e.range=w(e.step_arg2)?(e.step=e.step_arg2,n.Range.$new(e.receiver_num,e.step_arg1,!1)):w(e.step_arg1)?n.Range.$new(e.receiver_num,e.step_arg1,!1):n.Range.$new(e.receiver_num,j,!1)):(w(s)||(e.skipped_arg=!0),r=[_,w(t=s)?t:1],e.range=r[0],e.step=r[1]),e.object=e,x(e.step,0)&&O.$raise(c("ArgumentError"),"step can't be 0"),w(e.step["$respond_to?"]("to_int"))?j:O.$raise(c("ArgumentError"),"no implicit conversion of "+e.step.$class()+" into Integer")},-2),M.$attr_reader("step"),Z(M,"$begin",function(){var _=this;return _.range.$begin()}),Z(M,"$end",function(){var _=this;return _.range.$end()}),Z(M,"$exclude_end?",function(){var _=this;return _.range["$exclude_end?"]()}),Z(M,"$_lesser_than_end?",function(_){var s=this,$=j,r=j;return $=w(r=s.$end())?r:E,w(T(s.$step(),0))?w(s["$exclude_end?"]())?J(_,$):v(_,$):w(s["$exclude_end?"]())?T(_,$):L(_,$)}),Z(M,"$_greater_than_begin?",function(_){var s=this,$=j,r=j;return $=w(r=s.$begin())?r:E["$-@"](),w(T(s.$step(),0))?T(_,$):J(_,$)}),Z(M,"$first",function(_){var s=this,$=j,r=j,e=j;if($=w(r=s.$begin())?r:E["$-@"](),!w(_))return w(s["$_lesser_than_end?"]($))?$:j;for(e=[];w(w(r=s["$_lesser_than_end?"]($))?T(_,0):r);)e["$<<"]($),$=$e($,s.$step()),_=W(_,1);return e},-1),Z(M,"$each",function G(){var _=G.$$p||j,s=this,$=j,r=j;if(G.$$p=null,_===j)return s;for(Y(j,$=s.$begin())&&O.$raise(c("TypeError"),"nil can't be coerced into Integer"),r=w($=s.$begin())?$:E["$-@"]();w(s["$_lesser_than_end?"](r));)n.yield1(_,r),r=$e(r,s.$step());return s}),Z(M,"$last",function(_){var s=this,$=j,r=j,e=j;if(Y(E,$=s.$end())||Y(E["$-@"](),$)?O.$raise(k("FloatDomainError"),s.$end()):Y(j,$)&&O.$raise(k("RangeError"),"cannot get the last element of endless arithmetic sequence"),r=W(s.$end(),W(s.$end(),s.$begin())["$%"](s.$step())),w(s["$_lesser_than_end?"](r))||(r=W(r,s.$step())),!w(_))return w(s["$_greater_than_begin?"](r))?r:j;for(e=[];w(w($=s["$_greater_than_begin?"](r))?T(_,0):$);)e["$<<"](r),r=W(r,s.$step()),_=W(_,1);return e.$reverse()},-1),Z(M,"$size",function(){var _=this,s=j,$=j;return s=w(T(_.$step(),0))?1:-1,ee(_["$_lesser_than_end?"](_.$begin()))?0:w([E["$-@"](),E]["$include?"](_.$step()))?1:w([B(E["$-@"](),s),j]["$include?"](_.$begin()))||w([B(E,s),j]["$include?"](_.$end()))?E:($=W(_.$end(),W(_.$end(),_.$begin())["$%"](_.$step())),w(_["$_lesser_than_end?"]($))||($=W($,_.$step())),$e(b(W($,_.$begin()),_.$step()).$abs().$to_i(),1))}),Z(M,"$==",function(_){var s=this,$=j,r=j,e=j,t=j;return w($=w(r=w(e=w(t=s.$class()["$=="](_.$class()))?s.$begin()["$=="](_.$begin()):t)?s.$end()["$=="](_.$end()):e)?s.$step()["$=="](_.$step()):r)?s["$exclude_end?"]()["$=="](_["$exclude_end?"]()):$}),Z(M,"$hash",function(){var _=this;return[c("ArithmeticSequence"),_.$begin(),_.$end(),_.$step(),_["$exclude_end?"]()].$hash()}),Z(M,"$inspect",function(){var _=this,s=j;return w(_.receiver_num)?(s=w(_.step_arg2)?"("+_.topfx+_.step_arg1.$inspect()+", "+_.bypfx+_.step_arg2.$inspect()+")":w(_.step_arg1)?"("+_.topfx+_.step_arg1.$inspect()+")":j,"("+_.receiver_num.$inspect()+"."+_.creation_method+s+")"):(s=w(_.skipped_arg)?j:"("+_.step+")","(("+_.range.$inspect()+")."+_.creation_method+s+")")}),h(M,"===","=="),h(M,"eql?","==")}(P,P,I)}("::",null,S)};Opal.modules["corelib/enumerator/chain"]=function(n){var z=n.deny_frozen_access,w=n.klass,D=n.slice,x=n.def,O=n.send,Z=n.to_a,T=n.truthy,J=n.rb_plus,v=n.thrower,L=n.nil,$e=n.$$$;return n.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(W,Y){var ee=w(W,Y,"Enumerator");return function(B,b){var h=w(B,b,"Chain"),S=h.$$prototype;return S.enums=S.iterated=L,x(h,"$initialize",function(k){var F,p,A=this;return F=D(arguments),p=F,z(A),A.enums=p,A.iterated=[],A.object=A},-1),x(h,"$each",function j(k){var F=j.$$p||L,p,A,P=this;return j.$$p=null,p=D(arguments),A=p,F===L?O(P,"to_enum",["each"].concat(Z(A)),function I(){var q=I.$$s==null?this:I.$$s;return q.$size()},{$$s:P}):(O(P.enums,"each",[],function I(q){var u=I.$$s==null?this:I.$$s;return u.iterated==null&&(u.iterated=L),q==null&&(q=L),u.iterated["$<<"](q),O(q,"each",Z(A),F.$to_proc())},{$$s:P}),P)},-1),x(h,"$size",function(k){try{var F=v("return"),p,A,P=this,I=L;return p=D(arguments),A=p,I=0,O(P.enums,"each",[],function q(u){var d=L;return u==null&&(u=L),d=O(u,"size",Z(A)),T([L,$e($e("Float"),"INFINITY")]["$include?"](d))&&F.$throw(d,q.$$is_lambda),I=J(I,d)},{$$ret:F}),I}catch(q){if(q===F)return q.$v;throw q}finally{F.is_orphan=!0}},-1),x(h,"$rewind",function(){var k=this;return O(k.iterated,"reverse_each",[],function(p){return p==null&&(p=L),T(p["$respond_to?"]("rewind"))?p.$rewind():L}),k.iterated=[],k}),x(h,"$inspect",function(){var k=this;return"#<Enumerator::Chain: "+k.enums.$inspect()+">"})}(ee,ee)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(n){var z=n.deny_frozen_access,w=n.klass,D=n.truthy,x=n.Kernel,O=n.def,Z=n.slice,T=n.send,J=[],v=n.nil,L=n.$$$;return n.add_stubs("include,raise,new,to_proc"),function($e,W,Y){var ee=w($e,W,"Enumerator"),B=[ee].concat(Y);return function(b,h,S){var j=w(b,h,"Generator"),k=[j].concat(S),F=n.$r(k),p=j.$$prototype;return p.block=v,j.$include(L("Enumerable")),O(j,"$initialize",function A(){var P=A.$$p||v,I=this;return A.$$p=null,z(I),D(P)||x.$raise(L("LocalJumpError"),"no block given"),I.block=P}),O(j,"$each",function A(P){var I=A.$$p||v,q,u,d=this,M=v;A.$$p=null,q=Z(arguments),u=q,M=T(F("Yielder"),"new",[],I.$to_proc());try{u.unshift(M),n.yieldX(d.block,u)}catch(g){if(g&&g.$thrower_type=="breaker")return g.$v;throw g}return d},-1)}(B[0],null,B)}(J[0],null,J)};Opal.modules["corelib/enumerator/lazy"]=function(n){var z=n.truthy,w=n.coerce_to,D=n.yield1,x=n.yieldX,O=n.deny_frozen_access,Z=n.klass,T=n.slice,J=n.send2,v=n.find_super,L=n.to_a,$e=n.defs,W=n.Kernel,Y=n.send,ee=n.def,B=n.return_self,b=n.Opal,h=n.rb_lt,S=n.eqeqeq,j=n.rb_plus,k=n.alias,F=[],p=n.nil,A=n.$$$;return n.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(P,I,q){var u=Z(P,I,"Enumerator"),d=[u].concat(q);return function(M,g,c){var l=Z(M,g,"Lazy"),E=[l].concat(c),G=n.$r(E),_=l.$$prototype;return _.enumerator=p,Z(l,A("Exception"),"StopLazyError"),$e(l,"$for",function s($,r){var e,t,i=s.$$p||p,a=this,o=p;return s.$$p=null,e=T(arguments,1),t=e,o=J(a,v(a,"for",s,!1,!0),"for",[$].concat(L(t)),i),o.enumerator=$,o},-2),ee(l,"$initialize",function s($,r){var e=s.$$p||p,t=this;return s.$$p=null,r==null&&(r=p),O(t),e===p&&W.$raise(A("ArgumentError"),"tried to call lazy new without a block"),t.enumerator=$,J(t,v(t,"initialize",s,!1,!0),"initialize",[r],function(a,o){var m,N;a==null&&(a=p),m=T(arguments,1),N=m;try{return Y($,"each",L(N),function(C){var V,re;V=T(arguments),re=V,re.unshift(a),x(e,re)},-1)}catch(K){if(n.rescue(K,[G("StopLazyError")]))try{return p}finally{n.pop_exception(K)}else throw K}},-2)},-2),ee(l,"$lazy",B),ee(l,"$collect",function s(){var $=s.$$p||p,r=this;return s.$$p=null,z($)||W.$raise(A("ArgumentError"),"tried to call lazy map without a block"),Y(G("Lazy"),"new",[r,r.$enumerator_size()],function(t,i){var a,o;t==null&&(t=p),a=T(arguments,1),o=a;var m=x($,o);t.$yield(m)},-2)}),ee(l,"$collect_concat",function s(){var $=s.$$p||p,r=this;return s.$$p=null,z($)||W.$raise(A("ArgumentError"),"tried to call lazy map without a block"),Y(G("Lazy"),"new",[r,p],function(t,i){var a,o;t==null&&(t=p),a=T(arguments,1),o=a;var m=x($,o);if(m["$respond_to?"]("force")&&m["$respond_to?"]("each"))Y(m,"each",[],function(C){return C==null&&(C=p),t.$yield(C)});else{var N=b.$try_convert(m,A("Array"),"to_ary");N===p?t.$yield(m):Y(m,"each",[],function(C){return C==null&&(C=p),t.$yield(C)})}},-2)}),ee(l,"$drop",function($){var r=this,e=p,t=p,i=p;return $=w($,A("Integer"),"to_int"),z(h($,0))&&W.$raise(A("ArgumentError"),"attempt to drop negative size"),e=r.$enumerator_size(),t=S(A("Integer"),e)&&z(h($,e))?$:e,i=0,Y(G("Lazy"),"new",[r,t],function(o,m){var N,K;return o==null&&(o=p),N=T(arguments,1),K=N,z(h(i,$))?i=j(i,1):Y(o,"yield",L(K))},-2)}),ee(l,"$drop_while",function s(){var $=s.$$p||p,r=this,e=p;return s.$$p=null,z($)||W.$raise(A("ArgumentError"),"tried to call lazy drop_while without a block"),e=!0,Y(G("Lazy"),"new",[r,p],function(i,a){var o,m;if(i==null&&(i=p),o=T(arguments,1),m=o,z(e)){var N=x($,m);z(N)||(e=!1,Y(i,"yield",L(m)))}else return Y(i,"yield",L(m))},-2)}),ee(l,"$enum_for",function s($,r){var e=s.$$p||p,t,i,a,o=this;return s.$$p=null,t=T(arguments),t.length>0&&(i=t.shift()),i==null&&(i="each"),a=t,Y(o.$class(),"for",[o,i].concat(L(a)),e.$to_proc())},-1),ee(l,"$find_all",function s(){var $=s.$$p||p,r=this;return s.$$p=null,z($)||W.$raise(A("ArgumentError"),"tried to call lazy select without a block"),Y(G("Lazy"),"new",[r,p],function(t,i){var a,o;t==null&&(t=p),a=T(arguments,1),o=a;var m=x($,o);z(m)&&Y(t,"yield",L(o))},-2)}),ee(l,"$grep",function s($){var r=s.$$p||p,e=this;return s.$$p=null,z(r)?Y(G("Lazy"),"new",[e,p],function(i,a){var o,m;i==null&&(i=p),o=T(arguments,1),m=o;var N=b.$destructure(m),K=$["$==="](N);z(K)&&(K=D(r,N),i.$yield(D(r,N)))},-2):Y(G("Lazy"),"new",[e,p],function(i,a){var o,m;i==null&&(i=p),o=T(arguments,1),m=o;var N=b.$destructure(m),K=$["$==="](N);z(K)&&i.$yield(N)},-2)}),ee(l,"$reject",function s(){var $=s.$$p||p,r=this;return s.$$p=null,z($)||W.$raise(A("ArgumentError"),"tried to call lazy reject without a block"),Y(G("Lazy"),"new",[r,p],function(t,i){var a,o;t==null&&(t=p),a=T(arguments,1),o=a;var m=x($,o);z(m)||Y(t,"yield",L(o))},-2)}),ee(l,"$take",function($){var r=this,e=p,t=p,i=p;return $=w($,A("Integer"),"to_int"),z(h($,0))&&W.$raise(A("ArgumentError"),"attempt to take negative size"),e=r.$enumerator_size(),t=S(A("Integer"),e)&&z(h($,e))?$:e,i=0,Y(G("Lazy"),"new",[r,t],function(o,m){var N,K;return o==null&&(o=p),N=T(arguments,1),K=N,z(h(i,$))?(Y(o,"yield",L(K)),i=j(i,1)):W.$raise(G("StopLazyError"))},-2)}),ee(l,"$take_while",function s(){var $=s.$$p||p,r=this;return s.$$p=null,z($)||W.$raise(A("ArgumentError"),"tried to call lazy take_while without a block"),Y(G("Lazy"),"new",[r,p],function(t,i){var a,o;t==null&&(t=p),a=T(arguments,1),o=a;var m=x($,o);z(m)?Y(t,"yield",L(o)):W.$raise(G("StopLazyError"))},-2)}),ee(l,"$inspect",function(){var $=this;return"#<"+$.$class()+": "+$.enumerator.$inspect()+">"}),k(l,"force","to_a"),k(l,"filter","find_all"),k(l,"flat_map","collect_concat"),k(l,"map","collect"),k(l,"select","find_all"),k(l,"to_enum","enum_for")}(u,u,d)}("::",null,F)};Opal.modules["corelib/enumerator/yielder"]=function(n){var z=n.klass,w=n.def,D=n.slice,x=n.send,O=n.to_a,Z=[],T=n.nil;return n.add_stubs("yield,proc"),function(J,v,L){var $e=z(J,v,"Enumerator"),W=[$e].concat(L);return function(Y,ee){var B=z(Y,ee,"Yielder"),b=B.$$prototype;return b.block=T,w(B,"$initialize",function h(){var S=h.$$p||T,j=this;return h.$$p=null,j.block=S,j}),w(B,"$yield",function(S){var j,k,F=this;j=D(arguments),k=j;var p=n.yieldX(F.block,k);if(p&&p.$thrower_type=="break")throw p;return p},-1),w(B,"$<<",function(S){var j=this;return j.$yield(S),j}),w(B,"$to_proc",function(){var S=this;return x(S,"proc",[],function j(k){var F,p,A=j.$$s==null?this:j.$$s;return F=D(arguments),p=F,x(A,"yield",O(p))},{$$arity:-1,$$s:S})})}(W[0],null)}(Z[0],null,Z)};Opal.modules["corelib/enumerator"]=function(n){var z=n.slice,w=n.coerce_to,D=n.deny_frozen_access,x=n.klass,O=n.defs,Z=n.truthy,T=n.send,J=n.not,v=n.def,L=n.rb_plus,$e=n.to_a,W=n.Opal,Y=n.send2,ee=n.find_super,B=n.rb_ge,b=n.Kernel,h=n.rb_le,S=n.alias,j=n.top,k=[],F=n.nil,p=n.$$$;return n.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),j.$require("corelib/enumerable"),function(A,P,I){var q=x(A,P,"Enumerator"),u=[q].concat(I),d=n.$r(u),M=q.$$prototype;return M.size=M.args=M.object=M.method=M.values=M.cursor=F,q.$include(p("Enumerable")),q.$$prototype.$$is_enumerator=!0,O(q,"$for",function g(c,l,E){var G=g.$$p||F,_,s,$,r=this;g.$$p=null,_=z(arguments,1),_.length>0&&(s=_.shift()),s==null&&(s="each"),$=_;var e=r.$allocate();return e.object=c,e.size=G,e.method=s,e.args=$,e.cursor=0,e},-2),v(q,"$initialize",function g(c){var l=g.$$p||F,E=this;return g.$$p=null,z(arguments),D(E),E.cursor=0,Z(l)?(E.object=T(d("Generator"),"new",[],l.$to_proc()),E.method="each",E.args=[],E.size=arguments[0]||F,Z(E.size)&&J(E.size["$respond_to?"]("call"))?E.size=w(E.size,p("Integer"),"to_int"):F):(E.object=arguments[0],E.method=arguments[1]||"each",E.args=z(arguments,2),E.size=F)},-1),v(q,"$each",function g(c){var l=g.$$p||F,E,G,_=this;return g.$$p=null,E=z(arguments),G=E,Z(l["$nil?"]())&&Z(G["$empty?"]())?_:(G=L(_.args,G),Z(l["$nil?"]())?T(_.$class(),"new",[_.object,_.method].concat($e(G))):T(_.object,"__send__",[_.method].concat($e(G)),l.$to_proc()))},-1),v(q,"$size",function(){var c=this;return Z(c.size["$respond_to?"]("call"))?T(c.size,"call",$e(c.args)):c.size}),v(q,"$with_index",function g(c){var l=g.$$p||F,E=this;if(g.$$p=null,c==null&&(c=0),c=Z(c)?w(c,p("Integer"),"to_int"):0,!Z(l))return T(E,"enum_for",["with_index",c],function _(){var s=_.$$s==null?this:_.$$s;return s.$size()},{$$s:E});var G=c;return E.$each.$$p=function(){var _=W.$destructure(arguments),s=l(_,G);return G++,s},E.$each()},-1),v(q,"$each_with_index",function g(){var c=g.$$p||F,l=this;return g.$$p=null,c===F?T(l,"enum_for",["each_with_index"],function E(){var G=E.$$s==null?this:E.$$s;return G.$size()},{$$s:l}):(Y(l,ee(l,"each_with_index",g,!1,!0),"each_with_index",[],c),l.object)}),v(q,"$rewind",function(){var c=this;return c.cursor=0,c}),v(q,"$peek_values",function(){var c=this,l=F;return c.values=Z(l=c.values)?l:T(c,"map",[],function(G){var _,s;return _=z(arguments),s=_,s},-1),Z(B(c.cursor,c.values.$length()))&&b.$raise(p("StopIteration"),"iteration reached an end"),c.values["$[]"](c.cursor)}),v(q,"$peek",function(){var c=this,l=F;return l=c.$peek_values(),Z(h(l.$length(),1))?l["$[]"](0):l}),v(q,"$next_values",function(){var c=this,l=F;return l=c.$peek_values(),c.cursor=L(c.cursor,1),l}),v(q,"$next",function(){var c=this,l=F;return l=c.$next_values(),Z(h(l.$length(),1))?l["$[]"](0):l}),v(q,"$feed",function(c){var l=this;return l.$raise(d("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),v(q,"$+",function(c){var l=this;return p(p("Enumerator"),"Chain").$new(l,c)}),v(q,"$inspect",function(){var c=this,l=F;return l="#<"+c.$class()+": "+c.object.$inspect()+":"+c.method,Z(c.args["$any?"]())&&(l=L(l,"("+c.args.$inspect()["$[]"](p("Range").$new(1,-2))+")")),L(l,">")}),S(q,"with_object","each_with_object"),q.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),q.$autoload("Chain","corelib/enumerator/chain"),q.$autoload("Generator","corelib/enumerator/generator"),q.$autoload("Lazy","corelib/enumerator/lazy"),q.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,k)};Opal.modules["corelib/numeric"]=function(n){var z=n.klass,w=n.truthy,D=n.Kernel,x=n.def,O=n.to_ary,Z=n.return_self,T=n.rb_minus,J=n.rb_times,v=n.rb_lt,L=n.eqeq,$e=n.rb_divide,W=n.return_val,Y=n.Opal,ee=n.slice,B=n.extract_kwargs,b=n.ensure_kwargs,h=n.hash_get,S=n.not,j=n.send,k=n.rb_ge,F=n.rb_le,p=n.rb_plus,A=n.rb_gt,P=n.alias,I=n.top,q=n.nil,u=n.$$$;return n.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),I.$require("corelib/comparable"),function(d,M){var g=z(d,M,"Numeric");return g.$include(u("Comparable")),x(g,"$coerce",function(l){var E=this;return w(l["$instance_of?"](E.$class()))?[l,E]:[D.$Float(l),D.$Float(E)]}),x(g,"$__coerced__",function(l,E){var G,_,s=this,$=q,r=q;if(w(E["$respond_to?"]("coerce")))return _=E.$coerce(s),G=O(_),$=G[0]==null?q:G[0],r=G[1]==null?q:G[1],$.$__send__(l,r);switch(l.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return D.$raise(u("TypeError"),""+E.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return D.$raise(u("ArgumentError"),"comparison of "+s.$class()+" with "+E.$class()+" failed");default:return q}}),x(g,"$<=>",function(l){var E=this;return w(E["$equal?"](l))?0:q}),x(g,"$+@",Z),x(g,"$-@",function(){var l=this;return T(0,l)}),x(g,"$%",function(l){var E=this;return T(E,J(l,E.$div(l)))}),x(g,"$abs",function(){var l=this;return w(v(l,0))?l["$-@"]():l}),x(g,"$abs2",function(){var l=this;return J(l,l)}),x(g,"$angle",function(){var l=this;return w(v(l,0))?u(u("Math"),"PI"):0}),x(g,"$ceil",function(l){var E=this;return l==null&&(l=0),E.$to_f().$ceil(l)},-1),x(g,"$conj",Z),x(g,"$denominator",function(){var l=this;return l.$to_r().$denominator()}),x(g,"$div",function(l){var E=this;return L(l,0)&&D.$raise(u("ZeroDivisionError"),"divided by o"),$e(E,l).$floor()}),x(g,"$divmod",function(l){var E=this;return[E.$div(l),E["$%"](l)]}),x(g,"$fdiv",function(l){var E=this;return $e(E.$to_f(),l)}),x(g,"$floor",function(l){var E=this;return l==null&&(l=0),E.$to_f().$floor(l)},-1),x(g,"$i",function(){var l=this;return D.$Complex(0,l)}),x(g,"$imag",W(0)),x(g,"$integer?",W(!1)),x(g,"$nonzero?",function(){var l=this;return w(l["$zero?"]())?q:l}),x(g,"$numerator",function(){var l=this;return l.$to_r().$numerator()}),x(g,"$polar",function(){var l=this;return[l.$abs(),l.$arg()]}),x(g,"$quo",function(l){var E=this;return $e(Y["$coerce_to!"](E,u("Rational"),"to_r"),l)}),x(g,"$real",Z),x(g,"$real?",W(!0)),x(g,"$rect",function(){var l=this;return[l,0]}),x(g,"$round",function(l){var E=this;return E.$to_f().$round(l)},-1),x(g,"$step",function c(l,E,G){var _=c.$$p||q,s,$,r,e,t,i,a=this,o=q;c.$$p=null,s=ee(arguments),$=B(s),$=b($),s.length>0&&(r=s.shift()),s.length>0&&(e=s.shift()),t=h($,"to"),i=h($,"by"),r!==void 0&&t!==void 0&&D.$raise(u("ArgumentError"),"to is given twice"),e!==void 0&&i!==void 0&&D.$raise(u("ArgumentError"),"step is given twice"),t!==void 0&&(r=t),i!==void 0&&(e=i),r===void 0&&(r=q);function m(){e===q&&D.$raise(u("TypeError"),"step must be numeric"),e!=null&&e["$=="](0)&&D.$raise(u("ArgumentError"),"step can't be 0"),(e===q||e==null)&&(e=1);var ge=e["$<=>"](0);ge===q&&D.$raise(u("ArgumentError"),"0 can't be coerced into "+e.$class()),(r===q||r==null)&&(r=ge>0?u(u("Float"),"INFINITY"):u(u("Float"),"INFINITY")["$-@"]()),Y.$compare(a,r)}function N(){if(e>0&&a>r||e<0&&a<r)return 0;if(e===1/0||e===-1/0)return 1;var ge=Math.abs,ve=Math.floor,me=(ge(a)+ge(r)+ge(r-a))/ge(e)*u(u("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((r-a)/e+me)+1)}function K(){if(m(),e===0)return 1/0;if(e%1!==0)return N();if(e>0&&a>r||e<0&&a<r)return 0;var ge=Math.ceil,ve=Math.abs,me=ve(a-r)+1,be=ve(e);return ge(me/be)}if(_===q)return(S(r)||w(r["$is_a?"](u("Numeric"))))&&(S(e)||w(e["$is_a?"](u("Numeric"))))?u(u("Enumerator"),"ArithmeticSequence").$new([r,e,w(t)?"to: ":q,w(i)?"by: ":q],a):j(a,"enum_for",["step",r,e],K.$to_proc());m();var C=e["$negative?"](),V=e["$=="](0)||r===1/0&&!C||r===-1/0&&C;if(a.$$is_number&&e.$$is_number&&r.$$is_number)if(a%1===0&&(V||r%1===0)&&e%1===0){var re=a;if(V)for(;;re+=e)_(re);else if(C)for(;re>=r;re+=e)_(re);else for(;re<=r;re+=e)_(re);return a}else{var ae=a.$to_f().valueOf();e=e.$to_f().valueOf(),r=r.$to_f().valueOf();var le=N();if(!isFinite(e))le!==0&&_(ae);else if(e===0)for(;;)_(ae);else for(var _e=0;_e<le;_e++){var de=_e*e+a;(e>=0?r<de:r>de)&&(de=r),_(de)}return a}for(o=a;w(C?k(o,r):F(o,r));)n.yield1(_,o),o=p(o,e)},-1),x(g,"$to_c",function(){var l=this;return D.$Complex(l,0)}),x(g,"$to_int",function(){var l=this;return l.$to_i()}),x(g,"$truncate",function(l){var E=this;return l==null&&(l=0),E.$to_f().$truncate(l)},-1),x(g,"$zero?",function(){var l=this;return l["$=="](0)}),x(g,"$positive?",function(){var l=this;return A(l,0)}),x(g,"$negative?",function(){var l=this;return v(l,0)}),x(g,"$dup",Z),x(g,"$clone",function(l){var E=this;return l=b(l),h(l,"freeze"),E},-1),x(g,"$finite?",W(!0)),x(g,"$infinite?",W(q)),P(g,"arg","angle"),P(g,"conjugate","conj"),P(g,"imaginary","imag"),P(g,"magnitude","abs"),P(g,"modulo","%"),P(g,"phase","arg"),P(g,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(n){var z=n.truthy,w=n.falsy,D=n.yield1,x=n.hash_get,O=n.hash_put,Z=n.hash_delete,T=n.coerce_to,J=n.respond_to,v=n.deny_frozen_access,L=n.freeze,$e=n.opal32_init,W=n.opal32_add,Y=n.klass,ee=n.slice,B=n.defs,b=n.Kernel,h=n.def,S=n.Opal,j=n.eqeqeq,k=n.send2,F=n.find_super,p=n.send,A=n.rb_gt,P=n.rb_times,I=n.eqeq,q=n.rb_minus,u=n.to_a,d=n.to_ary,M=n.gvars,g=n.rb_ge,c=n.assign_ivar,l=n.rb_lt,E=n.return_self,G=n.neqeq,_=n.alias,s=n.top,$=[],r=n.nil,e=n.$$$;return n.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),s.$require("corelib/enumerable"),s.$require("corelib/numeric"),function(t,i,a){var o=Y(t,i,"Array"),m=[o].concat(a),N=n.$r(m);o.$include(e("Enumerable")),n.prop(o.$$prototype,"$$is_array",!0);function K(ie){for(var R=ie[0],H=1,X=ie.length;H<X;H++)ie[H-1]=ie[H];return ie.pop(),R}function C(ie,R){return R.$$name===n.Array?ie:R.$allocate().$replace(ie.$to_a())}function V(ie,R,H){for(var X,Q=null,ne=new Array(ie.length),se=0,oe=0;se<ie.length;se++){if(!Q)try{X=D(H,ie[se])}catch(fe){Q=fe}(Q||R(X))&&(ne[oe]=ie[se],oe+=1)}if(oe!==se&&(ie.splice.apply(ie,[0,ne.length].concat(ne)),ie.splice(oe,ne.length)),Q)throw Q}function re(ie){return ie.$$is_array||(ie=T(ie,e("Array"),"to_ary")),ie.$to_a()}function ae(ie,R){var H=R.length;if(H>6&&H<32767)ie.push.apply(ie,R);else for(var X=0;X<H;X++)ie.push(R[X])}B(o,"$[]",function(R){var H,X,Q=this;return H=ee(arguments),X=H,C(X,Q)},-1),h(o,"$initialize",function ie(R,H){var X=ie.$$p||r,Q=this;if(ie.$$p=null,R==null&&(R=r),H==null&&(H=r),v(Q),H!==r&&X!==r&&b.$warn("warning: block supersedes default value argument"),R>e(e("Integer"),"MAX")&&b.$raise(e("ArgumentError"),"array size too big"),arguments.length>2&&b.$raise(e("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return Q.length>0&&Q.splice(0,Q.length),Q;if(arguments.length===1){if(R.$$is_array)return Q.$replace(R.$to_a()),Q;if(R["$respond_to?"]("to_ary"))return Q.$replace(R.$to_ary()),Q}R=T(R,e("Integer"),"to_int"),R<0&&b.$raise(e("ArgumentError"),"negative array size"),Q.splice(0,Q.length);var ne,se;if(X===r)for(ne=0;ne<R;ne++)Q.push(H);else for(ne=0,se;ne<R;ne++)se=X(ne),Q[ne]=se;return Q},-1),B(o,"$try_convert",function(R){return S["$coerce_to?"](R,e("Array"),"to_ary")}),h(o,"$&",function(R){var H=this;if(R=re(R),H.length===0||R.length===0)return[];var X=[],Q=new Map,ne,se,oe;for(ne=0,se=R.length;ne<se;ne++)O(Q,R[ne],!0);for(ne=0,se=H.length;ne<se;ne++)oe=H[ne],Z(Q,oe)!==void 0&&X.push(oe);return X}),h(o,"$|",function(R){var H=this;R=re(R);var X=new Map,Q,ne;for(Q=0,ne=H.length;Q<ne;Q++)O(X,H[Q],!0);for(Q=0,ne=R.length;Q<ne;Q++)O(X,R[Q],!0);return X.$keys()}),h(o,"$*",function(R){var H=this;if(z(R["$respond_to?"]("to_str")))return H.$join(R.$to_str());R=T(R,e("Integer"),"to_int"),z(R<0)&&b.$raise(e("ArgumentError"),"negative argument");for(var X=[],Q=H.$to_a(),ne=0;ne<R;ne++)X=X.concat(Q);return X}),h(o,"$+",function(R){var H=this;return R=re(R),H.concat(R)}),h(o,"$-",function(R){var H=this;if(R=re(R),z(H.length===0))return[];if(z(R.length===0))return H.slice();var X=[],Q=new Map,ne,se,oe;for(ne=0,se=R.length;ne<se;ne++)O(Q,R[ne],!0);for(ne=0,se=H.length;ne<se;ne++)oe=H[ne],x(Q,oe)===void 0&&X.push(oe);return X}),h(o,"$<<",function(R){var H=this;return v(H),H.push(R),H}),h(o,"$<=>",function(R){var H=this;if(j(e("Array"),R))R=R.$to_a();else if(z(R["$respond_to?"]("to_ary")))R=R.$to_ary().$to_a();else return r;if(H===R)return 0;for(var X=Math.min(H.length,R.length),Q=0;Q<X;Q++){var ne=H[Q]["$<=>"](R[Q]);if(ne!==0)return ne}return H.length["$<=>"](R.length)}),h(o,"$==",function(R){var H=this,X={};function Q(ne,se){var oe,fe,f,y;if(ne===se)return!0;if(!se.$$is_array)return J(se,"$to_ary")?se["$=="](ne):!1;if(ne.$$constructor!==Array&&(ne=ne.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),ne.length!==se.length)return!1;for(X[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(f=ne[oe],y=se[oe],f.$$is_array){if(y.$$is_array&&y.length!==f.length||!X.hasOwnProperty(f.$object_id())&&!Q(f,y))return!1}else if(!f["$=="](y))return!1;return!0}return Q(H,R)});function le(ie,R){var H=ie.length,X,Q,ne,se;return X=R.excl,Q=R.begin===r?0:T(R.begin,n.Integer,"to_int"),ne=R.end===r?-1:T(R.end,n.Integer,"to_int"),Q<0&&(Q+=H,Q<0)||(R.excl_rev&&R.begin!==r&&(Q+=1),Q>H)?r:ne<0&&(ne+=H,ne<0)?[]:((!X||R.end===r)&&(ne+=1),se=ie.slice(Q,ne),se)}function _e(ie,R){var H,X=[],Q=0,ne;for(R.step<0?(ne={begin:R.range.end,end:R.range.begin,excl:!1,excl_rev:R.range.excl},H=le(ie,ne).$reverse()):H=le(ie,R.range);Q<H.length;)X.push(H[Q]),Q+=Math.abs(R.step);return X}function de(ie,R,H){var X=ie.length,Q;return R=T(R,n.Integer,"to_int"),R<0&&(R+=X,R<0)?r:H===void 0?R>=X||R<0?r:ie[R]:(H=T(H,n.Integer,"to_int"),H<0||R>X||R<0?r:(Q=ie.slice(R,R+H),Q))}h(o,"$[]",function(R,H){var X=this;return R.$$is_range?le(X,R):R.$$is_arithmetic_seq?_e(X,R):de(X,R,H)},-2),h(o,"$[]=",function(R,H,X){var Q=this,ne=r,se=r;v(Q),ne=r;var oe,fe=Q.length;if(R.$$is_range){H.$$is_array?ne=H.$to_a():H["$respond_to?"]("to_ary")?ne=H.$to_ary().$to_a():ne=[H];var f=R.excl,y=R.begin===r?0:T(R.begin,n.Integer,"to_int"),U=R.end===r?-1:T(R.end,n.Integer,"to_int");if(y<0&&(y+=fe,y<0&&b.$raise(e("RangeError"),""+R.$inspect()+" out of range")),U<0&&(U+=fe),(!f||R.end===r)&&(U+=1),y>fe)for(oe=fe;oe<y;oe++)Q[oe]=r;return U<0?Q.splice.apply(Q,[y,0].concat(ne)):Q.splice.apply(Q,[y,U-y].concat(ne)),H}else{X===void 0?se=1:(se=H,H=X,H.$$is_array?ne=H.$to_a():H["$respond_to?"]("to_ary")?ne=H.$to_ary().$to_a():ne=[H]);var te;if(R=T(R,e("Integer"),"to_int"),se=T(se,e("Integer"),"to_int"),R<0&&(te=R,R+=fe,R<0&&b.$raise(e("IndexError"),"index "+te+" too small for array; minimum "+-Q.length)),se<0&&b.$raise(e("IndexError"),"negative length ("+se+")"),R>fe)for(oe=fe;oe<R;oe++)Q[oe]=r;return X===void 0?Q[R]=H:Q.splice.apply(Q,[R,se].concat(ne)),H}},-3),h(o,"$any?",function ie(R){var H=ie.$$p||r,X=this;return ie.$$p=null,X.length===0?!1:k(X,F(X,"any?",ie,!1,!0),"any?",[R],H)},-1),h(o,"$assoc",function(R){for(var H=this,X=0,Q=H.length,ne;X<Q;X++)if(ne=H[X],ne.length&&ne[0]["$=="](R))return ne;return r}),h(o,"$at",function(R){var H=this;return R=T(R,e("Integer"),"to_int"),R<0&&(R+=H.length),R<0||R>=H.length?r:H[R]}),h(o,"$bsearch_index",function ie(){var R=ie.$$p||r,H=this;if(ie.$$p=null,R===r)return H.$enum_for("bsearch_index");for(var X=0,Q=H.length,ne,se,oe,fe=!1,f=r;X<Q;){if(ne=X+Math.floor((Q-X)/2),se=H[ne],oe=D(R,se),oe===!0)f=ne,fe=!0;else if(oe===!1||oe===r)fe=!1;else if(oe.$$is_number){if(oe===0)return ne;fe=oe<0}else b.$raise(e("TypeError"),"wrong argument type "+oe.$class()+" (must be numeric, true, false or nil)");fe?Q=ne:X=ne+1}return f}),h(o,"$bsearch",function ie(){var R=ie.$$p||r,H=this,X=r;return ie.$$p=null,R===r?H.$enum_for("bsearch"):(X=p(H,"bsearch_index",[],R.$to_proc()),X!=null&&X.$$is_number?H[X]:X)}),h(o,"$cycle",function ie(R){var H=ie.$$p||r,X=this;if(ie.$$p=null,R==null&&(R=r),H===r)return p(X,"enum_for",["cycle",R],function se(){var oe=se.$$s==null?this:se.$$s;return z(R["$nil?"]())?e(e("Float"),"INFINITY"):(R=S["$coerce_to!"](R,e("Integer"),"to_int"),z(A(R,0))?P(oe.$enumerator_size(),R):0)},{$$s:X});if(z(X["$empty?"]())||I(R,0))return r;var Q,ne;if(R===r)for(;;)for(Q=0,ne=X.length;Q<ne;Q++)D(H,X[Q]);else{if(R=S["$coerce_to!"](R,e("Integer"),"to_int"),R<=0)return X;for(;R>0;){for(Q=0,ne=X.length;Q<ne;Q++)D(H,X[Q]);R--}}return X},-1),h(o,"$clear",function(){var R=this;return v(R),R.splice(0,R.length),R}),h(o,"$count",function ie(R){var H=ie.$$p||r,X=this;return ie.$$p=null,z(R!==void 0)||z(H)?k(X,F(X,"count",ie,!1,!0),"count",[R],H):X.$size()},-1),h(o,"$initialize_copy",function(R){var H=this;return H.$replace(R)}),h(o,"$collect",function ie(){var R=ie.$$p||r,H=this;if(ie.$$p=null,R===r)return p(H,"enum_for",["collect"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:H});for(var X=[],Q=0;Q<H.length;Q++){var ne=D(R,H[Q]);X[Q]=ne}return X}),h(o,"$collect!",function ie(){var R=ie.$$p||r,H=this;if(ie.$$p=null,R===r)return p(H,"enum_for",["collect!"],function ne(){var se=ne.$$s==null?this:ne.$$s;return se.$size()},{$$s:H});v(H);for(var X=0;X<H.length;X++){var Q=D(R,H[X]);H[X]=Q}return H});function ge(ie,R){return ie===R||R===0?1:R>0&&ie>R?ge(ie-1,R-1)+ge(ie-1,R):0}h(o,"$combination",function ie(R){var H=ie.$$p||r,X=this,Q=r;if(ie.$$p=null,Q=S["$coerce_to!"](R,e("Integer"),"to_int"),H===r)return p(X,"enum_for",["combination",Q],function te(){var ue=te.$$s==null?this:te.$$s;return ge(ue.length,Q)},{$$s:X});var ne,se,oe,fe,f,y,U;if(Q===0)n.yield1(H,[]);else if(Q===1)for(ne=0,se=X.length;ne<se;ne++)n.yield1(H,[X[ne]]);else if(Q===X.length)n.yield1(H,X.slice());else if(Q>=0&&Q<X.length){for(oe=[],ne=0;ne<=Q+1;ne++)oe.push(0);for(fe=[],f=0,y=!1,oe[0]=-1;!y;){for(fe[f]=X[oe[f+1]];f<Q-1;)f++,U=oe[f+1]=oe[f]+1,fe[f]=X[U];n.yield1(H,fe.slice()),f++;do y=f===0,oe[f]++,f--;while(oe[f+1]+Q===X.length+f+1)}}return X}),h(o,"$repeated_combination",function ie(R){var H=ie.$$p||r,X=this,Q=r;if(ie.$$p=null,Q=S["$coerce_to!"](R,e("Integer"),"to_int"),H===r)return p(X,"enum_for",["repeated_combination",Q],function se(){var oe=se.$$s==null?this:se.$$s;return ge(oe.length+Q-1,Q)},{$$s:X});function ne(se,oe,fe,f){if(fe.length==se){var y=fe.slice();n.yield1(H,y);return}for(var U=oe;U<f.length;U++)fe.push(f[U]),ne(se,U,fe,f),fe.pop()}return Q>=0&&ne(Q,0,[],X),X}),h(o,"$compact",function(){for(var R=this,H=[],X=0,Q=R.length,ne;X<Q;X++)(ne=R[X])!==r&&H.push(ne);return H}),h(o,"$compact!",function(){var R=this;v(R);for(var H=R.length,X=0,Q=R.length;X<Q;X++)R[X]===r&&(R.splice(X,1),Q--,X--);return R.length===H?r:R}),h(o,"$concat",function(R){var H,X,Q=this;return H=ee(arguments),X=H,v(Q),X=p(X,"map",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;return se==null&&(se=r),se=re(se),z(se["$equal?"](oe))&&(se=se.$dup()),se},{$$s:Q}),p(X,"each",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;se==null&&(se=r);for(var fe=0,f=se.length;fe<f;fe++)oe.push(se[fe])},{$$s:Q}),Q},-1),h(o,"$delete",function ie(R){var H=ie.$$p||r,X=this;ie.$$p=null;for(var Q=X.length,ne=0,se=Q;ne<se;ne++)X[ne]["$=="](R)&&(v(X),X.splice(ne,1),se--,ne--);return X.length===Q?H!==r?n.yieldX(H,[]):r:R}),h(o,"$delete_at",function(R){var H=this;if(v(H),R=T(R,e("Integer"),"to_int"),R<0&&(R+=H.length),R<0||R>=H.length)return r;var X=H[R];return H.splice(R,1),X}),h(o,"$delete_if",function ie(){var R=ie.$$p||r,H=this;return ie.$$p=null,R===r?p(H,"enum_for",["delete_if"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:H}):(v(H),V(H,w,R),H)}),h(o,"$difference",function(R){var H,X,Q=this;return H=ee(arguments),X=H,p(X,"reduce",[Q.$to_a().$dup()],function(se,oe){return se==null&&(se=r),oe==null&&(oe=r),q(se,oe)})},-1),h(o,"$dig",function(R,H){var X,Q,ne=this,se=r;return X=ee(arguments,1),Q=X,se=ne["$[]"](R),se===r||Q.length===0?se:(z(se["$respond_to?"]("dig"))||b.$raise(e("TypeError"),""+se.$class()+" does not have #dig method"),p(se,"dig",u(Q)))},-2),h(o,"$drop",function(R){var H=this;return R=T(R,e("Integer"),"to_int"),R<0&&b.$raise(e("ArgumentError")),H.slice(R)}),h(o,"$dup",function ie(){var R=ie.$$p||r,H=this;return ie.$$p=null,H.$$class===n.Array&&H.$$class.$allocate.$$pristine&&H.$copy_instance_variables.$$pristine&&H.$initialize_dup.$$pristine?H.slice(0):k(H,F(H,"dup",ie,!1,!0),"dup",[],R)}),h(o,"$each",function ie(){var R=ie.$$p||r,H=this;if(ie.$$p=null,R===r)return p(H,"enum_for",["each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:H});for(var X=0;X<H.length;X++)D(R,H[X]);return H}),h(o,"$each_index",function ie(){var R=ie.$$p||r,H=this;if(ie.$$p=null,R===r)return p(H,"enum_for",["each_index"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:H});for(var X=0;X<H.length;X++)D(R,X);return H}),h(o,"$empty?",function(){var R=this;return R.length===0}),h(o,"$eql?",function(R){var H=this,X={};function Q(ne,se){var oe,fe,f,y;if(!se.$$is_array||(se=se.$to_a(),ne.length!==se.length))return!1;for(X[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(f=ne[oe],y=se[oe],f.$$is_array){if(y.$$is_array&&y.length!==f.length||!X.hasOwnProperty(f.$object_id())&&!Q(f,y))return!1}else if(!f["$eql?"](y))return!1;return!0}return Q(H,R)}),h(o,"$fetch",function ie(R,H){var X=ie.$$p||r,Q=this;ie.$$p=null;var ne=R;if(R=T(R,e("Integer"),"to_int"),R<0&&(R+=Q.length),R>=0&&R<Q.length)return Q[R];if(X!==r&&H!=null&&Q.$warn("warning: block supersedes default value argument"),X!==r)return X(ne);if(H!=null)return H;Q.length===0?b.$raise(e("IndexError"),"index "+ne+" outside of array bounds: 0...0"):b.$raise(e("IndexError"),"index "+ne+" outside of array bounds: -"+Q.length+"..."+Q.length)},-2),h(o,"$fill",function ie(R){var H=ie.$$p||r,X,Q,ne,se,oe=this,fe=r,f=r,y=r,U=r,te=r;ie.$$p=null,X=ee(arguments),Q=X,v(oe);var ue,ce;if(z(H)?(z(Q.length>2)&&b.$raise(e("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 0..2)"),se=Q,ne=d(se),fe=ne[0]==null?r:ne[0],f=ne[1]==null?r:ne[1]):(z(Q.length==0)?b.$raise(e("ArgumentError"),"wrong number of arguments (0 for 1..3)"):z(Q.length>3)&&b.$raise(e("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 1..3)"),se=Q,ne=d(se),y=ne[0]==null?r:ne[0],fe=ne[1]==null?r:ne[1],f=ne[2]==null?r:ne[2]),j(e("Range"),fe)){if(z(f)&&b.$raise(e("TypeError"),"length invalid with range"),U=fe.begin===r?0:T(fe.begin,e("Integer"),"to_int"),z(U<0)&&(U+=this.length),z(U<0)&&b.$raise(e("RangeError"),""+fe.$inspect()+" out of range"),te=fe.end===r?-1:T(fe.end,e("Integer"),"to_int"),z(te<0)&&(te+=this.length),z(fe["$exclude_end?"]())||(te+=1),z(te<=U))return oe}else if(z(fe))if(U=T(fe,e("Integer"),"to_int"),z(U<0)&&(U+=this.length),z(U<0)&&(U=0),z(f)){if(te=T(f,e("Integer"),"to_int"),z(te==0))return oe;te+=U}else te=this.length;else U=0,te=this.length;if(z(U>this.length))for(ue=this.length;ue<te;ue++)oe[ue]=r;if(z(te>this.length)&&(this.length=te),z(H))for(this.length;U<te;U++)ce=H(U),oe[U]=ce;else for(this.length;U<te;U++)oe[U]=y;return oe},-1),h(o,"$first",function(R){var H=this;return R==null?H.length===0?r:H[0]:(R=T(R,e("Integer"),"to_int"),R<0&&b.$raise(e("ArgumentError"),"negative array size"),H.slice(0,R))},-1),h(o,"$flatten",function(R){var H=this;function X(Q,ne){var se=[],oe,fe,f,y;for(Q=Q.$to_a(),oe=0,fe=Q.length;oe<fe;oe++){if(f=Q[oe],!J(f,"$to_ary",!0)){se.push(f);continue}if(y=f.$to_ary(),y===r){se.push(f);continue}switch(y.$$is_array||b.$raise(e("TypeError")),y===H&&b.$raise(e("ArgumentError")),ne){case void 0:se=se.concat(X(y));break;case 0:se.push(y);break;default:ae(se,X(y,ne-1))}}return se}return R!==void 0&&(R=T(R,e("Integer"),"to_int")),X(H,R)},-1),h(o,"$flatten!",function(R){var H=this;v(H);var X=H.$flatten(R);if(H.length==X.length){for(var Q=0,ne=H.length;Q<ne&&H[Q]===X[Q];Q++);if(Q==ne)return r}return H.$replace(X),H},-1),h(o,"$freeze",function(){var R=this;return z(R["$frozen?"]())?R:L(R)});var ve;h(o,"$hash",function(){var R=this,H=ve===void 0,X=$e(),Q=R.$object_id(),ne,se,oe;if(X=W(X,10),X=W(X,R.length),H)ve=Object.create(null);else if(ve[Q])return W(X,16843009);try{for(oe in ve)if(ne=ve[oe],R["$eql?"](ne))return W(X,16843009);for(ve[Q]=R,se=0;se<R.length;se++)ne=R[se],X=W(X,ne.$hash());return X}finally{H&&(ve=void 0)}}),h(o,"$include?",function(R){for(var H=this,X=0,Q=H.length;X<Q;X++)if(H[X]["$=="](R))return!0;return!1}),h(o,"$index",function ie(R){var H=ie.$$p||r,X=this;ie.$$p=null;var Q,ne,se;if(R!=null&&H!==r&&X.$warn("warning: given block not used"),R!=null){for(Q=0,ne=X.length;Q<ne;Q++)if(X[Q]["$=="](R))return Q}else if(H!==r){for(Q=0;Q<X.length;Q++)if(se=H(X[Q]),se!==!1&&se!==r)return Q}else return X.$enum_for("index");return r},-1),h(o,"$insert",function(R,H){var X,Q,ne=this;if(X=ee(arguments,1),Q=X,v(ne),R=T(R,e("Integer"),"to_int"),Q.length>0){if(R<0&&(R+=ne.length+1,R<0&&b.$raise(e("IndexError"),""+R+" is out of bounds")),R>ne.length)for(var se=ne.length;se<R;se++)ne.push(r);ne.splice.apply(ne,[R,0].concat(Q))}return ne},-2);var me=[];h(o,"$inspect",function(){var R=this,H=[],X=R.$__id__(),Q=!0;return function(){try{if(me.indexOf(X)!==-1)return Q=!1,"[...]";me.push(X);for(var ne=0,se=R.length;ne<se;ne++){var oe=R["$[]"](ne);H.push(N("Opal").$inspect(oe))}return"["+H.join(", ")+"]"}finally{Q&&me.pop()}}()}),h(o,"$intersection",function(R){var H,X,Q=this,ne=r,se=r;return H=ee(arguments),X=H,X.length===0?Q.$to_a().$dup():(X=X.map(re),Q.length===0?[]:(X=p(X,"sort_by",[],"length".$to_proc()),z(Q.length<X[0].length)?p(X,"reduce",[Q],"&".$to_proc()):(ne=X.pop(),se=p(X,"reduce",[ne],"&".$to_proc()),Q["$&"](se))))},-1),h(o,"$intersect?",function(R){var H=this,X,Q,ne=new Map,se,oe;for(H.length<R.length?(X=H,Q=R):(X=R,Q=H),se=0,oe=X.length;se<oe;se++)O(ne,X[se],!0);for(se=0,oe=Q.length;se<oe;se++)if(x(ne,Q[se]))return!0;return!1}),h(o,"$join",function(R){var H=this;if(M[","]==null&&(M[","]=r),R==null&&(R=r),z(H.length===0))return"";z(R===r)&&(R=M[","]);var X=[],Q,ne,se,oe;for(Q=0,ne=H.length;Q<ne;Q++){if(se=H[Q],J(se,"$to_str")&&(oe=se.$to_str(),oe!==r)){X.push(oe.$to_s());continue}if(J(se,"$to_ary")&&(oe=se.$to_ary(),oe===H&&b.$raise(e("ArgumentError")),oe!==r)){X.push(oe.$join(R));continue}if(J(se,"$to_s")&&(oe=se.$to_s(),oe!==r)){X.push(oe);continue}b.$raise(e("NoMethodError").$new(""+N("Opal").$inspect(H.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return R===r?X.join(""):X.join(S["$coerce_to!"](R,e("String"),"to_str").$to_s())},-1),h(o,"$keep_if",function ie(){var R=ie.$$p||r,H=this;return ie.$$p=null,R===r?p(H,"enum_for",["keep_if"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:H}):(v(H),V(H,z,R),H)}),h(o,"$last",function(R){var H=this;return R==null?H.length===0?r:H[H.length-1]:(R=T(R,e("Integer"),"to_int"),R<0&&b.$raise(e("ArgumentError"),"negative array size"),R>H.length&&(R=H.length),H.slice(H.length-R,H.length))},-1),h(o,"$length",function(){var R=this;return R.length}),h(o,"$max",function ie(R){var H=ie.$$p||r,X=this;return ie.$$p=null,p(X.$each(),"max",[R],H.$to_proc())},-1),h(o,"$min",function ie(){var R=ie.$$p||r,H=this;return ie.$$p=null,p(H.$each(),"min",[],R.$to_proc())});function be(ie,R){for(var H=R>=0?1:0;R;)H*=ie,ie--,R--;return H}return h(o,"$permutation",function ie(R){var H=ie.$$p||r,X=this,Q=r,ne=r;if(ie.$$p=null,H===r)return p(X,"enum_for",["permutation",R],function y(){var U=y.$$s==null?this:y.$$s;return be(U.length,R===void 0?U.length:R)},{$$s:X});var se,oe,fe;if(R===void 0?R=X.length:R=T(R,e("Integer"),"to_int"),!(R<0||X.length<R))if(R===0)n.yield1(H,[]);else if(R===1)for(var f=0;f<X.length;f++)n.yield1(H,[X[f]]);else Q=N("Array").$new(R),ne=N("Array").$new(X.length,!1),se=function(y,U,te,ue,ce){X=this;for(var he=0;he<X.length;he++)if(ue["$[]"](he)["$!"]())if(U[te]=he,te<y-1)ue[he]=!0,se.call(X,y,U,te+1,ue,ce),ue[he]=!1;else{fe=[];for(var pe=0;pe<U.length;pe++)fe.push(X[U[pe]]);D(ce,fe)}},H!==r?(oe=X.slice(),se.call(oe,R,Q,0,ne,H)):se.call(X,R,Q,0,ne,H);return X},-1),h(o,"$repeated_permutation",function ie(R){var H=ie.$$p||r,X=this,Q=r;if(ie.$$p=null,Q=S["$coerce_to!"](R,e("Integer"),"to_int"),H===r)return p(X,"enum_for",["repeated_permutation",Q],function se(){var oe=se.$$s==null?this:se.$$s;return z(g(Q,0))?oe.$size()["$**"](Q):0},{$$s:X});function ne(se,oe,fe){if(oe.length==se){var f=oe.slice();n.yield1(H,f);return}for(var y=0;y<fe.length;y++)oe.push(fe[y]),ne(se,oe,fe),oe.pop()}return ne(Q,[],X.slice()),X}),h(o,"$pop",function(R){var H=this;return v(H),z(R===void 0)?z(H.length===0)?r:H.pop():(R=T(R,e("Integer"),"to_int"),z(R<0)&&b.$raise(e("ArgumentError"),"negative array size"),z(H.length===0)?[]:z(R===1)?[H.pop()]:z(R>H.length)?H.splice(0,H.length):H.splice(H.length-R,H.length))},-1),h(o,"$product",function ie(R){var H=ie.$$p||r,X,Q,ne=this;ie.$$p=null,X=ee(arguments),Q=X;var se=H!==r?null:[],oe=Q.length+1,fe=new Array(oe),f=new Array(oe),y=new Array(oe),U,te,ue,ce,he=1;for(y[0]=ne,U=1;U<oe;U++)y[U]=T(Q[U-1],e("Array"),"to_ary");for(U=0;U<oe;U++){if(ce=y[U].length,ce===0)return se||ne;he*=ce,he>2147483647&&b.$raise(e("RangeError"),"too big to product"),f[U]=ce,fe[U]=0}e:for(;;){for(ue=[],U=0;U<oe;U++)ue.push(y[U][fe[U]]);for(se?se.push(ue):n.yield1(H,ue),te=oe-1,fe[te]++;fe[te]===f[te];){if(fe[te]=0,--te<0)break e;fe[te]++}}return se||ne},-1),h(o,"$push",function(R){var H,X,Q=this;return H=ee(arguments),X=H,v(Q),ae(Q,X),Q},-1),h(o,"$rassoc",function(R){for(var H=this,X=0,Q=H.length,ne;X<Q;X++)if(ne=H[X],ne.length&&ne[1]!==void 0&&ne[1]["$=="](R))return ne;return r}),h(o,"$reject",function ie(){var R=ie.$$p||r,H=this;if(ie.$$p=null,R===r)return p(H,"enum_for",["reject"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:H});for(var X=[],Q=0,ne;Q<H.length;Q++)ne=R(H[Q]),(ne===!1||ne===r)&&X.push(H[Q]);return X}),h(o,"$reject!",function ie(){var R=ie.$$p||r,H=this,X=r;return ie.$$p=null,R===r?p(H,"enum_for",["reject!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:H}):(v(H),X=H.$length(),p(H,"delete_if",[],R.$to_proc()),I(H.$length(),X)?r:H)}),h(o,"$replace",function(R){var H=this;return v(H),R=re(R),H.length>0&&H.splice(0,H.length),ae(H,R),H}),h(o,"$reverse",function(){var R=this;return R.slice(0).reverse()}),h(o,"$reverse!",function(){var R=this;return v(R),R.reverse()}),h(o,"$reverse_each",function ie(){var R=ie.$$p||r,H=this;if(ie.$$p=null,R===r)return p(H,"enum_for",["reverse_each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:H});for(var X=H.length-1;X>=0;X--)D(R,H[X]);return H}),h(o,"$rindex",function ie(R){var H=ie.$$p||r,X=this;ie.$$p=null;var Q,ne;if(R!=null&&H!==r&&X.$warn("warning: given block not used"),R!=null){for(Q=X.length-1;Q>=0&&!(Q>=X.length);Q--)if(X[Q]["$=="](R))return Q}else if(H!==r){for(Q=X.length-1;Q>=0&&!(Q>=X.length);Q--)if(ne=H(X[Q]),ne!==!1&&ne!==r)return Q}else if(R==null)return X.$enum_for("rindex");return r},-1),h(o,"$rotate",function(R){var H=this;R==null&&(R=1);var X,Q,ne,se;return R=T(R,e("Integer"),"to_int"),H.length===1?H.slice():H.length===0?[]:(X=H.slice(),Q=R%X.length,ne=X.slice(Q),se=X.slice(0,Q),ne.concat(se))},-1),h(o,"$rotate!",function(R){var H=this,X=r;return R==null&&(R=1),v(H),H.length===0||H.length===1?H:(R=T(R,e("Integer"),"to_int"),X=H.$rotate(R),H.$replace(X))},-1),function(ie,R){var H=Y(ie,R,"SampleRandom"),X=H.$$prototype;return X.rng=r,h(H,"$initialize",c("rng")),h(H,"$rand",function(ne){var se=this,oe=r;return oe=T(se.rng.$rand(ne),e("Integer"),"to_int"),z(oe<0)&&b.$raise(e("RangeError"),"random value must be >= 0"),z(oe<ne)||b.$raise(e("RangeError"),"random value must be less than Array size"),oe})}(o,null),h(o,"$sample",function(R,H){var X=this,Q=r,ne=r;if(z(R===void 0))return X.$at(b.$rand(X.length));if(z(H===void 0)?z(Q=S["$coerce_to?"](R,e("Hash"),"to_hash"))?(H=Q,R=r):(H=r,R=T(R,e("Integer"),"to_int")):(R=T(R,e("Integer"),"to_int"),H=T(H,e("Hash"),"to_hash")),z(R)&&z(R<0)&&b.$raise(e("ArgumentError"),"count must be greater than 0"),z(H)&&(ne=H["$[]"]("random")),ne=z(ne)&&z(ne["$respond_to?"]("rand"))?N("SampleRandom").$new(ne):b,!z(R))return X[ne.$rand(X.length)];var se,oe,fe,f,y,U,te,ue;switch(R>X.length&&(R=X.length),R){case 0:return[];case 1:return[X[ne.$rand(X.length)]];case 2:return f=ne.$rand(X.length),y=ne.$rand(X.length-1),f<=y&&y++,[X[f],X[y]];default:if(X.length/R>3){for(se=!1,oe=0,fe=N("Array").$new(R),f=1,fe[0]=ne.$rand(X.length);f<R;){for(U=ne.$rand(X.length),y=0;y<f;){for(;U===fe[y];){if(oe++,oe>100){se=!0;break}U=ne.$rand(X.length)}if(se)break;y++}if(se)break;fe[f]=U,f++}if(!se){for(f=0;f<R;)fe[f]=X[fe[f]],f++;return fe}}fe=X.slice();for(var ce=0;ce<R;ce++)te=ne.$rand(X.length-ce)+ce,ue=fe[ce],fe[ce]=fe[te],fe[te]=ue;return R===X.length?fe:fe["$[]"](0,R)}},-1),h(o,"$select",function ie(){var R=ie.$$p||r,H=this;if(ie.$$p=null,R===r)return p(H,"enum_for",["select"],function oe(){var fe=oe.$$s==null?this:oe.$$s;return fe.$size()},{$$s:H});for(var X=[],Q=0,ne,se;Q<H.length;Q++)ne=H[Q],se=D(R,ne),z(se)&&X.push(ne);return X}),h(o,"$select!",function ie(){var R=ie.$$p||r,H=this;if(ie.$$p=null,R===r)return p(H,"enum_for",["select!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:H});v(H);var X=H.length;return p(H,"keep_if",[],R.$to_proc()),H.length===X?r:H}),h(o,"$shift",function(R){var H=this;return v(H),z(R===void 0)?z(H.length===0)?r:K(H):(R=T(R,e("Integer"),"to_int"),z(R<0)&&b.$raise(e("ArgumentError"),"negative array size"),z(H.length===0)?[]:H.splice(0,R))},-1),h(o,"$shuffle",function(R){var H=this;return H.$dup().$to_a()["$shuffle!"](R)},-1),h(o,"$shuffle!",function(R){var H=this;v(H);var X,Q=H.length,ne,se;for(R!==void 0&&(R=S["$coerce_to?"](R,e("Hash"),"to_hash"),R!==r&&(R=R["$[]"]("random"),R!==r&&R["$respond_to?"]("rand")&&(X=R)));Q;)X?(ne=X.$rand(Q).$to_int(),ne<0&&b.$raise(e("RangeError"),"random number too small "+ne),ne>=Q&&b.$raise(e("RangeError"),"random number too big "+ne)):ne=H.$rand(Q),se=H[--Q],H[Q]=H[ne],H[ne]=se;return H},-1),h(o,"$slice!",function(R,H){var X=this,Q=r,ne=r,se=r,oe=r,fe=r;if(v(X),Q=r,z(H===void 0))if(j(e("Range"),R)){ne=R,Q=X["$[]"](ne),se=ne.begin===r?0:T(ne.begin,e("Integer"),"to_int"),oe=ne.end===r?-1:T(ne.end,e("Integer"),"to_int"),se<0&&(se+=X.length),oe<0?oe+=X.length:oe>=X.length&&(oe=X.length-1,ne.excl&&(oe+=1));var f=oe-se;ne.excl&&ne.end!==r?oe-=1:f+=1,se<X.length&&se>=0&&oe<X.length&&oe>=0&&f>0&&X.splice(se,f)}else{if(fe=T(R,e("Integer"),"to_int"),fe<0&&(fe+=X.length),fe<0||fe>=X.length)return r;Q=X[fe],fe===0?X.shift():X.splice(fe,1)}else{if(fe=T(R,e("Integer"),"to_int"),H=T(H,e("Integer"),"to_int"),H<0)return r;Q=X["$[]"](fe,H),fe<0&&(fe+=X.length),fe+H>X.length&&(H=X.length-fe),fe<X.length&&fe>=0&&X.splice(fe,H)}return Q},-2),h(o,"$sort",function ie(){var R=ie.$$p||r,H=this;return ie.$$p=null,z(H.length>1)?(R===r&&(R=function(X,Q){return X["$<=>"](Q)}),H.slice().sort(function(X,Q){var ne=R(X,Q);return ne===r&&b.$raise(e("ArgumentError"),"comparison of "+X.$inspect()+" with "+Q.$inspect()+" failed"),A(ne,0)?1:l(ne,0)?-1:0})):H}),h(o,"$sort!",function ie(){var R=ie.$$p||r,H=this;ie.$$p=null,v(H);var X;R!==r?X=p(H.slice(),"sort",[],R.$to_proc()):X=H.slice().$sort(),H.length=0;for(var Q=0,ne=X.length;Q<ne;Q++)H.push(X[Q]);return H}),h(o,"$sort_by!",function ie(){var R=ie.$$p||r,H=this;return ie.$$p=null,R===r?p(H,"enum_for",["sort_by!"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:H}):(v(H),H.$replace(p(H,"sort_by",[],R.$to_proc())))}),h(o,"$take",function(R){var H=this;return R<0&&b.$raise(e("ArgumentError")),H.slice(0,R)}),h(o,"$take_while",function ie(){var R=ie.$$p||r,H=this;ie.$$p=null;for(var X=[],Q=0,ne,se;Q<H.length;Q++){if(ne=H[Q],se=R(ne),se===!1||se===r)return X;X.push(ne)}return X}),h(o,"$to_a",function(){var R=this;return R.$$class===n.Array?R:n.Array.$new(R)}),h(o,"$to_ary",E),h(o,"$to_h",function ie(){var R=ie.$$p||r,H=this,X=r;ie.$$p=null,X=H,R!==r&&(X=p(X,"map",[],R.$to_proc()));var Q,ne=X.length,se,oe,fe,f=new Map;for(Q=0;Q<ne;Q++)se=S["$coerce_to?"](X[Q],e("Array"),"to_ary"),se.$$is_array||b.$raise(e("TypeError"),"wrong element type "+X[Q].$class()+" at "+Q+" (expected array)"),se.length!==2&&b.$raise(e("ArgumentError"),"element has wrong array length at "+Q+" (expected 2, was "+se.$length()+")"),oe=se[0],fe=se[1],O(f,oe,fe);return f}),h(o,"$transpose",function(){var R=this,H=r,X=r;return z(R["$empty?"]())?[]:(H=[],X=r,p(R,"each",[],function(ne){var se=r;return ne==null&&(ne=r),ne=re(ne),X=z(se=X)?se:ne.length,G(ne.length,X)&&b.$raise(e("IndexError"),"element size differs ("+ne.length+" should be "+X+")"),p(ne.length,"times",[],function(fe){var f,y=r;return fe==null&&(fe=r),y=z(se=H["$[]"](fe))?se:(f=[fe,[]],p(H,"[]=",f),f[f.length-1]),y["$<<"](ne.$at(fe))})}),H)}),h(o,"$union",function(R){var H,X,Q=this;return H=ee(arguments),X=H,p(X,"reduce",[Q.$uniq()],function(se,oe){return se==null&&(se=r),oe==null&&(oe=r),se["$|"](oe)})},-1),h(o,"$uniq",function ie(){var R=ie.$$p||r,H=this;ie.$$p=null;var X=new Map,Q,ne,se,oe;if(R===r)for(Q=0,ne=H.length;Q<ne;Q++)se=H[Q],x(X,se)===void 0&&O(X,se,se);else for(Q=0;Q<H.length;Q++)se=H[Q],oe=D(R,se),x(X,oe)===void 0&&O(X,oe,se);return X.$values()}),h(o,"$uniq!",function ie(){var R=ie.$$p||r,H=this;ie.$$p=null,v(H);var X=new Map,Q,ne,se,oe=[];for(Q=0;Q<H.length;Q++)ne=H[Q],se=R===r?ne:D(R,ne),x(X,se)===void 0?O(X,se,ne):oe.push(Q);for(Q=oe.length-1;Q>=0;Q--)H.splice(oe[Q],1);return oe.length===0?r:H}),h(o,"$unshift",function(R){var H,X,Q=this;H=ee(arguments),X=H,v(Q);var ne=Q.length,se=X.length;if(se==0)return Q;for(var oe=ne-se,fe=0;fe<se;fe++)Q.push(Q[oe+fe]);for(var f=ne-1;f-se>=0;)Q[f]=Q[f-se],f--;for(var y=0;y<se;y++)Q[y]=X[y];return Q},-1),h(o,"$values_at",function(R){var H,X,Q=this,ne=r;return H=ee(arguments),X=H,ne=[],p(X,"each",[],function se(oe){var fe=se.$$s==null?this:se.$$s,f=r,y=r,U=r;return oe==null&&(oe=r),z(oe["$is_a?"](e("Range")))?(f=oe.$end()===r?-1:T(oe.$end(),e("Integer"),"to_int"),y=oe.$begin()===r?0:T(oe.$begin(),e("Integer"),"to_int"),y<0?(y=y+fe.length,r):(f<0&&(f=f+fe.length),oe["$exclude_end?"]()&&oe.$end()!==r&&f--,f<y?r:p(y,"upto",[f],function te(ue){var ce=te.$$s==null?this:te.$$s;return ue==null&&(ue=r),ne["$<<"](ce.$at(ue))},{$$s:fe}))):(U=T(oe,e("Integer"),"to_int"),ne["$<<"](fe.$at(U)))},{$$s:Q}),ne},-1),h(o,"$zip",function ie(R){var H=ie.$$p||r,X,Q,ne=this,se=r;ie.$$p=null,X=ee(arguments),Q=X;var oe=[],fe=ne.length,f,y,U,te,ue;for(te=0,ue=Q.length;te<ue;te++)if(y=Q[te],!y.$$is_array){if(y.$$is_range||y.$$is_enumerator){Q[te]=y.$take(fe);continue}Q[te]=(z(se=S["$coerce_to?"](y,e("Array"),"to_ary"))?se:S["$coerce_to!"](y,e("Enumerator"),"to_enum","each")).$to_a()}for(U=0;U<fe;U++){for(f=[ne[U]],te=0,ue=Q.length;te<ue;te++)y=Q[te][U],y==null&&(y=r),f[te+1]=y;oe[U]=f}if(H!==r){for(U=0;U<fe;U++)n.yield1(H,oe[U]);return r}return oe},-1),B(o,"$inherited",function(R){R.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),h(o,"$instance_variables",function ie(){var R=ie.$$p||r,H=this;return ie.$$p=null,p(k(H,F(H,"instance_variables",ie,!1,!0),"instance_variables",[],R),"reject",[],function(Q){var ne=r;return Q==null&&(Q=r),z(ne=/^@\d+$/.test(Q))?ne:Q["$=="]("@length")})}),h(o,"$pack",function(R){return ee(arguments),b.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),_(o,"append","push"),_(o,"filter","select"),_(o,"filter!","select!"),_(o,"map","collect"),_(o,"map!","collect!"),_(o,"prepend","unshift"),_(o,"size","length"),_(o,"slice","[]"),_(o,"to_s","inspect"),S.$pristine(o.$singleton_class(),"allocate"),S.$pristine(o,"copy_instance_variables","initialize_dup")}("::",Array,$)};Opal.modules["corelib/hash"]=function(n){var z=n.yield1,w=n.hash_clone,D=n.hash_delete,x=n.hash_each,O=n.hash_get,Z=n.hash_put,T=n.deny_frozen_access,J=n.freeze,v=n.opal32_init,L=n.opal32_add,$e=n.klass,W=n.slice,Y=n.Opal,ee=n.Kernel,B=n.defs,b=n.def,h=n.send,S=n.rb_ge,j=n.rb_gt,k=n.truthy,F=n.to_a,p=n.return_self,A=n.not,P=n.alias,I=n.top,q=[],u=n.nil,d=n.$$$;return n.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),I.$require("corelib/enumerable"),function(M,g,c){var l=$e(M,g,"Hash"),E=[l].concat(c),G=n.$r(E);l.$include(d("Enumerable")),l.$$prototype.$$is_hash=!0,B(l,"$[]",function(r){var e,t,i=this;e=W(arguments),t=e;var a,o=t.length,m,N;if(o===1){if(a=Y["$coerce_to?"](t["$[]"](0),d("Hash"),"to_hash"),a!==u)return i.$allocate()["$merge!"](a);for(t=Y["$coerce_to?"](t["$[]"](0),d("Array"),"to_ary"),t===u&&ee.$raise(d("ArgumentError"),"odd number of arguments for Hash"),o=t.length,a=i.$allocate(),N=0;N<o;N++)m=t[N],m.$$is_array||ee.$raise(d("ArgumentError"),"invalid element "+m.$inspect()+" for Hash"),m.length===1?a.$store(m[0],u):m.length===2?a.$store(m[0],m[1]):ee.$raise(d("ArgumentError"),"invalid number of elements ("+m.length+" for "+m.$inspect()+"), must be 1..2");return a}for(o%2!==0&&ee.$raise(d("ArgumentError"),"odd number of arguments for Hash"),a=i.$allocate(),N=0;N<o;N+=2)a.$store(t[N],t[N+1]);return a},-1),B(l,"$allocate",function(){var r=this,e=new r.$$constructor;return e.$$none=u,e.$$proc=u,e}),B(l,"$try_convert",function(r){return Y["$coerce_to?"](r,d("Hash"),"to_hash")}),b(l,"$initialize",function $(r){var e=$.$$p||u,t=this;return $.$$p=null,T(t),r!==void 0&&e!==u&&ee.$raise(d("ArgumentError"),"wrong number of arguments (1 for 0)"),t.$$none=r===void 0?u:r,t.$$proc=e,t},-1),b(l,"$==",function(r){var e=this;return e===r?!0:!r.$$is_hash||e.size!==r.size?!1:x(e,!0,function(t,i){var a=O(r,t);return a===void 0||!i["$eql?"](a)?[!0,!1]:[!1,!0]})}),b(l,"$>=",function(r){var e=this,t=u;return r=Y["$coerce_to!"](r,d("Hash"),"to_hash"),e.size<r.size?!1:(t=!0,h(r,"each",[],function i(a,o){var m=i.$$s==null?this:i.$$s,N=u;if(a==null&&(a=u),o==null&&(o=u),N=m.$fetch(a,null),N==null||N!==o){t=!1;return}},{$$s:e}),t)}),b(l,"$>",function(r){var e=this;return r=Y["$coerce_to!"](r,d("Hash"),"to_hash"),e.size<=r.size?!1:S(e,r)}),b(l,"$<",function(r){var e=this;return r=Y["$coerce_to!"](r,d("Hash"),"to_hash"),j(r,e)}),b(l,"$<=",function(r){var e=this;return r=Y["$coerce_to!"](r,d("Hash"),"to_hash"),S(r,e)}),b(l,"$[]",function(r){var e=this,t=O(e,r);return t!==void 0?t:e.$default(r)}),b(l,"$[]=",function(r,e){var t=this;return T(t),Z(t,r,e),e}),b(l,"$assoc",function(r){var e=this;return x(e,u,function(t,i){return t["$=="](r)?[!0,[t,i]]:[!1,u]})}),b(l,"$clear",function(){var r=this;return T(r),r.clear(),r.$$keys&&r.$$keys.clear(),r}),b(l,"$clone",function(){var r=this,e=r.$class().$new();return w(r,e),r["$frozen?"]()?e.$freeze():e}),b(l,"$compact",function(){var r=this,e=new Map;return x(r,e,function(t,i){return i!==u&&Z(e,t,i),[!1,e]})}),b(l,"$compact!",function(){var r=this;T(r);var e=u;return x(r,e,function(t,i){return i===u&&(D(r,t),e=r),[!1,e]})}),b(l,"$compare_by_identity",function(){var r=this;return T(r),r.$$by_identity||(r.$$by_identity=!0,r.size!==0&&n.hash_rehash(r)),r}),b(l,"$compare_by_identity?",function(){var r=this;return r.$$by_identity===!0}),b(l,"$default",function(r){var e=this;return r!==void 0&&e.$$proc!==u&&e.$$proc!==void 0?e.$$proc.$call(e,r):e.$$none===void 0?u:e.$$none},-1),b(l,"$default=",function(r){var e=this;return T(e),e.$$proc=u,e.$$none=r,r}),b(l,"$default_proc",function(){var r=this;return r.$$proc!==void 0?r.$$proc:u}),b(l,"$default_proc=",function(r){var e=this;T(e);var t=r;return t!==u&&(t=Y["$coerce_to!"](t,d("Proc"),"to_proc"),t["$lambda?"]()&&t.$arity().$abs()!==2&&ee.$raise(d("TypeError"),"default_proc takes two arguments")),e.$$none=u,e.$$proc=t,r}),b(l,"$delete",function $(r){var e=$.$$p||u,t=this;$.$$p=null,T(t);var i=D(t,r);return i!==void 0?i:e!==u?n.yield1(e,r):u}),b(l,"$delete_if",function $(){var r=$.$$p||u,e=this;return $.$$p=null,k(r)?(T(e),x(e,e,function(t,i){var a=r(t,i);return a!==!1&&a!==u&&D(e,t),[!1,e]})):h(e,"enum_for",["delete_if"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),b(l,"$dig",function(r,e){var t,i,a=this,o=u;return t=W(arguments,1),i=t,o=a["$[]"](r),o===u||i.length===0?o:(k(o["$respond_to?"]("dig"))||ee.$raise(d("TypeError"),""+o.$class()+" does not have #dig method"),h(o,"dig",F(i)))},-2),b(l,"$dup",function(){var r=this;return w(r,r.$class().$new())}),b(l,"$each",function $(){var r=$.$$p||u,e=this;return $.$$p=null,k(r)?x(e,e,function(t,i){return z(r,[t,i]),[!1,e]}):h(e,"enum_for",["each"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),b(l,"$each_key",function $(){var r=$.$$p||u,e=this;return $.$$p=null,k(r)?x(e,e,function(t,i){return r(t),[!1,e]}):h(e,"enum_for",["each_key"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),b(l,"$each_value",function $(){var r=$.$$p||u,e=this;return $.$$p=null,k(r)?x(e,e,function(t,i){return r(i),[!1,e]}):h(e,"enum_for",["each_value"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),b(l,"$empty?",function(){var r=this;return r.size===0}),b(l,"$except",function(r){var e,t,i=this;return e=W(arguments),t=e,h(i.$dup(),"except!",F(t))},-1),b(l,"$except!",function(r){var e,t,i=this;return e=W(arguments),t=e,h(t,"each",[],function a(o){var m=a.$$s==null?this:a.$$s;return o==null&&(o=u),m.$delete(o)},{$$s:i}),i},-1),b(l,"$fetch",function $(r,e){var t=$.$$p||u,i=this;$.$$p=null;var a=O(i,r);return a!==void 0?a:t!==u?t(r):e!==void 0?e:ee.$raise(d("KeyError").$new("key not found: "+r.$inspect(),new Map([["key",r],["receiver",i]])))},-2),b(l,"$fetch_values",function $(r){var e=$.$$p||u,t,i,a=this;return $.$$p=null,t=W(arguments),i=t,h(i,"map",[],function o(m){var N=o.$$s==null?this:o.$$s;return m==null&&(m=u),h(N,"fetch",[m],e.$to_proc())},{$$s:a})},-1),b(l,"$flatten",function(r){var e=this;r==null&&(r=1),r=Y["$coerce_to!"](r,d("Integer"),"to_int");var t=[];return x(e,t,function(i,a){return t.push(i),a.$$is_array?r===1?(t.push(a),[!1,t]):(t=t.concat(a.$flatten(r-2)),[!1,t]):(t.push(a),[!1,t])})},-1),b(l,"$freeze",function(){var r=this;return k(r["$frozen?"]())?r:J(r)}),b(l,"$has_key?",function(r){var e=this;return O(e,r)!==void 0}),b(l,"$has_value?",function(r){var e=this;return x(e,!1,function(t,i){return i["$=="](r)?[!0,!0]:[!1,!1]})});var _;b(l,"$hash",function(){var r=this,e=_===void 0,t=r.$object_id(),i=v(),a,o,m,N=r.size,K=new Int32Array(N);if(i=L(i,4),i=L(i,N),e)_=Object.create(null);else if(_[t])return L(i,16843009);try{for(a in _)if(o=_[a],r["$eql?"](o))return L(i,16843009);for(_[t]=r,m=0,x(r,!1,function(C,V){return K[m]=[1883326802,C,V].$hash(),m++,[!1,!1]}),K=K.sort(),m=0;m<K.length;m++)i=L(i,K[m]);return i}finally{e&&(_=void 0)}}),b(l,"$index",function(r){var e=this;return x(e,u,function(t,i){return i["$=="](r)?[!0,t]:[!1,u]})}),b(l,"$indexes",function(r){var e,t,i=this;e=W(arguments),t=e;for(var a=[],o=0,m=t.length,N,K;o<m;o++){if(N=t[o],K=O(i,N),K===void 0){a.push(i.$default());continue}a.push(K)}return a},-1);var s;return b(l,"$inspect",function(){var r=this,e=s===void 0,t=r.$object_id(),i=[];return function(){try{if(e&&(s={}),s.hasOwnProperty(t))return"{...}";return s[t]=!0,x(r,!1,function(a,o){return o=G("Opal").$inspect(o),a=G("Opal").$inspect(a),i.push(a+"=>"+o),[!1,!1]}),"{"+i.join(", ")+"}";return u}finally{e&&(s=void 0)}}()}),b(l,"$invert",function(){var r=this,e=new Map;return x(r,e,function(t,i){return Z(e,i,t),[!1,e]})}),b(l,"$keep_if",function $(){var r=$.$$p||u,e=this;return $.$$p=null,k(r)?(T(e),x(e,e,function(t,i){var a=r(t,i);return(a===!1||a===u)&&D(e,t),[!1,e]})):h(e,"enum_for",["keep_if"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),b(l,"$keys",function(){var r=this;return Array.from(r.keys())}),b(l,"$length",function(){var r=this;return r.size}),b(l,"$merge",function $(r){var e=$.$$p||u,t,i,a=this;return $.$$p=null,t=W(arguments),i=t,h(a.$dup(),"merge!",F(i),e.$to_proc())},-1),b(l,"$merge!",function $(r){var e=$.$$p||u,t,i,a=this;$.$$p=null,t=W(arguments),i=t,T(a);var o,m;for(o=0;o<i.length;++o)m=Y["$coerce_to!"](i[o],d("Hash"),"to_hash"),e===u?x(m,!1,function(N,K){return Z(a,N,K),[!1,!1]}):x(m,!1,function(N,K){var C=O(a,N);return C===void 0?(Z(a,N,K),[!1,!1]):(Z(a,N,e(N,C,K)),[!1,!1])});return a},-1),b(l,"$rassoc",function(r){var e=this;return x(e,u,function(t,i){return i["$=="](r)?[!0,[t,i]]:[!1,u]})}),b(l,"$rehash",function(){var r=this;return T(r),n.hash_rehash(r)}),b(l,"$reject",function $(){var r=$.$$p||u,e=this;if($.$$p=null,!k(r))return h(e,"enum_for",["reject"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var t=new Map;return x(e,t,function(i,a){var o=r(i,a);return(o===!1||o===u)&&Z(t,i,a),[!1,t]})}),b(l,"$reject!",function $(){var r=$.$$p||u,e=this;if($.$$p=null,!k(r))return h(e,"enum_for",["reject!"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});T(e);var t=u;return x(e,t,function(i,a){var o=r(i,a);return o!==!1&&o!==u&&(D(e,i),t=e),[!1,t]})}),b(l,"$replace",function(r){var e=this;return T(e),r=Y["$coerce_to!"](r,d("Hash"),"to_hash"),e.$clear(),x(r,!1,function(t,i){return Z(e,t,i),[!1,!1]}),k(r.$default_proc())?e["$default_proc="](r.$default_proc()):e["$default="](r.$default()),e}),b(l,"$select",function $(){var r=$.$$p||u,e=this;if($.$$p=null,!k(r))return h(e,"enum_for",["select"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var t=new Map;return x(e,t,function(i,a){var o=r(i,a);return o!==!1&&o!==u&&Z(t,i,a),[!1,t]})}),b(l,"$select!",function $(){var r=$.$$p||u,e=this;if($.$$p=null,!k(r))return h(e,"enum_for",["select!"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});T(e);var t=u;return x(e,t,function(i,a){var o=r(i,a);return(o===!1||o===u)&&(D(e,i),t=e),[!1,t]})}),b(l,"$shift",function(){var r=this;return T(r),x(r,u,function(e,t){return[!0,[e,D(r,e)]]})}),b(l,"$slice",function(r){var e,t,i=this;e=W(arguments),t=e;for(var a=new Map,o=0,m=t.length;o<m;o++){var N=t[o],K=O(i,N);K!==void 0&&Z(a,N,K)}return a},-1),b(l,"$to_a",function(){var r=this,e=[];return x(r,e,function(t,i){return e.push([t,i]),[!1,e]})}),b(l,"$to_h",function $(){var r=$.$$p||u,e=this;if($.$$p=null,r!==u)return h(e,"map",[],r.$to_proc()).$to_h();if(e.$$class===n.Hash)return e;var t=new Map;return w(e,t),t}),b(l,"$to_hash",p),b(l,"$to_proc",function(){var r=this;return h(r,"proc",[],function e(t){var i=e.$$s==null?this:e.$$s;return t==null&&ee.$raise(d("ArgumentError"),"no key given"),i["$[]"](t)},{$$arity:-1,$$s:r})}),b(l,"$transform_keys",function $(r){var e=$.$$p||u,t=this;if($.$$p=null,r==null&&(r=u),A(e)&&A(r))return h(t,"enum_for",["transform_keys"],function a(){var o=a.$$s==null?this:a.$$s;return o.$size()},{$$s:t});var i=new Map;return x(t,i,function(a,o){var m;return r!==u&&(m=O(r,a)),m===void 0&&e&&e!==u&&(m=e(a)),m===void 0&&(m=a),Z(i,m,o),[!1,i]})},-1),b(l,"$transform_keys!",function $(r){var e=$.$$p||u,t=this;if($.$$p=null,r==null&&(r=u),A(e)&&A(r))return h(t,"enum_for",["transform_keys!"],function a(){var o=a.$$s==null?this:a.$$s;return o.$size()},{$$s:t});T(t);var i=new Map;return x(t,t,function(a,o){var m;return r!==u&&(m=O(r,a)),m===void 0&&e&&e!==u&&(m=e(a)),m===void 0?[!1,t]:(O(i,a)||D(t,a),Z(t,m,o),Z(i,m,!0),[!1,t])})},-1),b(l,"$transform_values",function $(){var r=$.$$p||u,e=this;if($.$$p=null,!k(r))return h(e,"enum_for",["transform_values"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var t=new Map;return x(e,t,function(i,a){return Z(t,i,r(a)),[!1,t]})}),b(l,"$transform_values!",function $(){var r=$.$$p||u,e=this;return $.$$p=null,k(r)?(T(e),x(e,e,function(t,i){return Z(e,t,r(i)),[!1,e]})):h(e,"enum_for",["transform_values!"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),b(l,"$values",function(){var r=this;return Array.from(r.values())}),P(l,"each_pair","each"),P(l,"eql?","=="),P(l,"filter","select"),P(l,"filter!","select!"),P(l,"include?","has_key?"),P(l,"indices","indexes"),P(l,"key","index"),P(l,"key?","has_key?"),P(l,"member?","has_key?"),P(l,"size","length"),P(l,"store","[]="),P(l,"to_s","inspect"),P(l,"update","merge!"),P(l,"value?","has_value?"),P(l,"values_at","indexes")}("::",Map,q)};Opal.modules["corelib/number"]=function(n){var z=n.klass,w=n.Opal,D=n.Kernel,x=n.def,O=n.eqeqeq,Z=n.truthy,T=n.rb_gt,J=n.not,v=n.rb_lt,L=n.alias,$e=n.send2,W=n.find_super,Y=n.send,ee=n.rb_plus,B=n.rb_minus,b=n.eqeq,h=n.return_self,S=n.rb_divide,j=n.to_ary,k=n.rb_times,F=n.rb_le,p=n.rb_ge,A=n.return_val,P=n.const_set,I=n.top,q=[],u=n.nil,d=n.$$$;return n.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),I.$require("corelib/numeric"),function(M,g,c){var l=z(M,g,"Number");w.$bridge(Number,l),n.prop(l.$$prototype,"$$is_number",!0),l.$$is_number_class=!0;var E=new Map;(function(e,t){return x(e,"$allocate",function(){var a=this;return D.$raise(d("TypeError"),"allocator undefined for "+a.$name())}),n.udef(e,"$new"),u})(n.get_singleton_class(l)),x(l,"$coerce",function(t){var i=this;if(t===u)D.$raise(d("TypeError"),"can't convert "+t.$class()+" into Float");else{if(t.$$is_string)return[D.$Float(t),i];if(t["$respond_to?"]("to_f"))return[w["$coerce_to!"](t,d("Float"),"to_f"),i];if(t.$$is_number)return[t,i];D.$raise(d("TypeError"),"can't convert "+t.$class()+" into Float")}}),x(l,"$__id__",function(){var t=this;if(t|t===0)return t*2+1;if(E.has(t))return E.get(t);var i=n.uid();return E.set(t,i),i}),x(l,"$hash",function(){var t=this;return t|t===0?t.$__id__():t.toString().$hash()}),x(l,"$+",function(t){var i=this;return t.$$is_number?i+t:i.$__coerced__("+",t)}),x(l,"$-",function(t){var i=this;return t.$$is_number?i-t:i.$__coerced__("-",t)}),x(l,"$*",function(t){var i=this;return t.$$is_number?i*t:i.$__coerced__("*",t)}),x(l,"$/",function(t){var i=this;return t.$$is_number?i/t:i.$__coerced__("/",t)}),x(l,"$%",function(t){var i=this;if(t.$$is_number){if(t==-1/0)return t;if(t==0)D.$raise(d("ZeroDivisionError"),"divided by 0");else return t<0||i<0?(i%t+t)%t:i%t}else return i.$__coerced__("%",t)}),x(l,"$&",function(t){var i=this;return t.$$is_number?i&t:i.$__coerced__("&",t)}),x(l,"$|",function(t){var i=this;return t.$$is_number?i|t:i.$__coerced__("|",t)}),x(l,"$^",function(t){var i=this;return t.$$is_number?i^t:i.$__coerced__("^",t)}),x(l,"$<",function(t){var i=this;return t.$$is_number?i<t:i.$__coerced__("<",t)}),x(l,"$<=",function(t){var i=this;return t.$$is_number?i<=t:i.$__coerced__("<=",t)}),x(l,"$>",function(t){var i=this;return t.$$is_number?i>t:i.$__coerced__(">",t)}),x(l,"$>=",function(t){var i=this;return t.$$is_number?i>=t:i.$__coerced__(">=",t)});var G=function(e,t){return t.$$is_number?isNaN(e)||isNaN(t)?u:e>t?1:e<t?-1:0:e.$__coerced__("<=>",t)};x(l,"$<=>",function(t){var i=this;try{return G(i,t)}catch(a){if(n.rescue(a,[d("ArgumentError")]))try{return u}finally{n.pop_exception(a)}else throw a}}),x(l,"$<<",function(t){var i=this;return t=w["$coerce_to!"](t,d("Integer"),"to_int"),t>0?i<<t:i>>-t}),x(l,"$>>",function(t){var i=this;return t=w["$coerce_to!"](t,d("Integer"),"to_int"),t>0?i>>t:i<<-t}),x(l,"$[]",function(t){var i=this;return t=w["$coerce_to!"](t,d("Integer"),"to_int"),t<0?0:t>=32?i<0?1:0:i>>t&1}),x(l,"$+@",function(){var t=this;return+t}),x(l,"$-@",function(){var t=this;return-t}),x(l,"$~",function(){var t=this;return~t}),x(l,"$**",function(t){var i=this;return O(d("Integer"),t)?J(d("Integer")["$==="](i))||Z(T(t,0))?Math.pow(i,t):d("Rational").$new(i,1)["$**"](t):Z(v(i,0))&&(O(d("Float"),t)||O(d("Rational"),t))?d("Complex").$new(i,0)["$**"](t.$to_f()):Z(t.$$is_number!=null)?Math.pow(i,t):i.$__coerced__("**",t)}),x(l,"$==",function(t){var i=this;return t.$$is_number?i.valueOf()===t.valueOf():t["$respond_to?"]("==")?t["$=="](i):!1}),L(l,"===","=="),x(l,"$abs",function(){var t=this;return Math.abs(t)}),x(l,"$abs2",function(){var t=this;return Math.abs(t*t)}),x(l,"$allbits?",function(t){var i=this;return t=w["$coerce_to!"](t,d("Integer"),"to_int"),(i&t)==t}),x(l,"$anybits?",function(t){var i=this;return t=w["$coerce_to!"](t,d("Integer"),"to_int"),(i&t)!==0}),x(l,"$angle",function(){var t=this;return Z(t["$nan?"]())?t:t==0?1/t>0?0:Math.PI:t<0?Math.PI:0}),x(l,"$bit_length",function(){var t=this;if(O(d("Integer"),t)||D.$raise(d("NoMethodError").$new("undefined method `bit_length` for "+t+":Float","bit_length")),t===0||t===-1)return 0;for(var i=0,a=t<0?~t:t;a!=0;)i+=1,a>>>=1;return i}),x(l,"$ceil",function(t){var i=this;t==null&&(t=0);var a=i.$to_f();if(a%1===0&&t>=0)return a;var o=Math.pow(10,t),m=Math.ceil(a*o)/o;return a%1===0&&(m=Math.round(m)),m},-1),x(l,"$chr",function(t){var i=this;return n.enc(String.fromCharCode(i),t||"BINARY")},-1),x(l,"$denominator",function e(){var t=e.$$p||u,i=this;return e.$$p=null,Z(i["$nan?"]())||Z(i["$infinite?"]())?1:$e(i,W(i,"denominator",e,!1,!0),"denominator",[],t)}),x(l,"$downto",function e(t){var i=e.$$p||u,a=this;if(e.$$p=null,i===u)return Y(a,"enum_for",["downto",t],function m(){var N=m.$$s==null?this:m.$$s;return O(d("Numeric"),t)||D.$raise(d("ArgumentError"),"comparison of "+N.$class()+" with "+t.$class()+" failed"),Z(T(t,N))?0:ee(B(N,t),1)},{$$s:a});t.$$is_number||D.$raise(d("ArgumentError"),"comparison of "+a.$class()+" with "+t.$class()+" failed");for(var o=a;o>=t;o--)i(o);return a}),x(l,"$equal?",function(t){var i=this,a=u;return Z(a=i["$=="](t))?a:isNaN(i)&&isNaN(t)}),x(l,"$even?",function(){var t=this;return t%2===0}),x(l,"$floor",function(t){var i=this;t==null&&(t=0);var a=i.$to_f();if(a%1===0&&t>=0)return a;var o=Math.pow(10,t),m=Math.floor(a*o)/o;return a%1===0&&(m=Math.round(m)),m},-1),x(l,"$gcd",function(t){var i=this;O(d("Integer"),t)||D.$raise(d("TypeError"),"not an integer");for(var a=Math.abs(i),o=Math.abs(t);a>0;){var m=a;a=o%a,o=m}return o}),x(l,"$gcdlcm",function(t){var i=this;return[i.$gcd(t),i.$lcm(t)]}),x(l,"$integer?",function(){var t=this;return t%1===0}),x(l,"$is_a?",function e(t){var i=e.$$p||u,a=this;return e.$$p=null,b(t,d("Integer"))&&O(d("Integer"),a)||b(t,d("Integer"))&&O(d("Integer"),a)||b(t,d("Float"))&&O(d("Float"),a)?!0:$e(a,W(a,"is_a?",e,!1,!0),"is_a?",[t],i)}),x(l,"$instance_of?",function e(t){var i=e.$$p||u,a=this;return e.$$p=null,b(t,d("Integer"))&&O(d("Integer"),a)||b(t,d("Integer"))&&O(d("Integer"),a)||b(t,d("Float"))&&O(d("Float"),a)?!0:$e(a,W(a,"instance_of?",e,!1,!0),"instance_of?",[t],i)}),x(l,"$lcm",function(t){var i=this;return O(d("Integer"),t)||D.$raise(d("TypeError"),"not an integer"),i==0||t==0?0:Math.abs(i*t/i.$gcd(t))}),x(l,"$next",function(){var t=this;return t+1}),x(l,"$nobits?",function(t){var i=this;return t=w["$coerce_to!"](t,d("Integer"),"to_int"),(i&t)==0}),x(l,"$nonzero?",function(){var t=this;return t==0?u:t}),x(l,"$numerator",function e(){var t=e.$$p||u,i=this;return e.$$p=null,Z(i["$nan?"]())||Z(i["$infinite?"]())?i:$e(i,W(i,"numerator",e,!1,!0),"numerator",[],t)}),x(l,"$odd?",function(){var t=this;return t%2!==0}),x(l,"$ord",h),x(l,"$pow",function(t,i){var a=this;return a==0&&D.$raise(d("ZeroDivisionError"),"divided by 0"),i===void 0?a["$**"](t):(d("Integer")["$==="](t)||D.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),t<0&&D.$raise(d("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),d("Integer")["$==="](i)||D.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),i===0&&D.$raise(d("ZeroDivisionError"),"divided by 0"),a["$**"](t)["$%"](i))},-2),x(l,"$pred",function(){var t=this;return t-1}),x(l,"$quo",function e(t){var i=e.$$p||u,a=this;return e.$$p=null,O(d("Integer"),a)?$e(a,W(a,"quo",e,!1,!0),"quo",[t],i):S(a,t)}),x(l,"$rationalize",function(t){var i,a,o=this,m=u,N=u;return arguments.length>1&&D.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),O(d("Integer"),o)?d("Rational").$new(o,1):Z(o["$infinite?"]())?D.$raise(d("FloatDomainError"),"Infinity"):Z(o["$nan?"]())?D.$raise(d("FloatDomainError"),"NaN"):Z(t==null)?(a=d("Math").$frexp(o),i=j(a),m=i[0]==null?u:i[0],N=i[1]==null?u:i[1],m=d("Math").$ldexp(m,d(d("Float"),"MANT_DIG")).$to_i(),N=B(N,d(d("Float"),"MANT_DIG")),d("Rational").$new(k(2,m),1["$<<"](B(1,N))).$rationalize(d("Rational").$new(1,1["$<<"](B(1,N))))):o.$to_r().$rationalize(t)},-1),x(l,"$remainder",function(t){var i=this;return B(i,k(t,S(i,t).$truncate()))}),x(l,"$round",function(t){var i,a,o=this,m=u;if(O(d("Integer"),o)){if(Z(t==null)||(O(d("Float"),t)&&Z(t["$infinite?"]())&&D.$raise(d("RangeError"),"Infinity"),t=w["$coerce_to!"](t,d("Integer"),"to_int"),Z(v(t,d(d("Integer"),"MIN")))&&D.$raise(d("RangeError"),"out of bounds"),Z(t>=0)))return o;if(t=t["$-@"](),.415241*t-.125>o.$size())return 0;var N=Math.pow(10,t),K=Math.floor((Math.abs(o)+N/2)/N)*N;return o<0?-K:K}else{if(Z(o["$nan?"]())&&Z(t==null)&&D.$raise(d("FloatDomainError"),"NaN"),t=w["$coerce_to!"](t||0,d("Integer"),"to_int"),Z(F(t,0)))Z(o["$nan?"]())?D.$raise(d("RangeError"),"NaN"):Z(o["$infinite?"]())&&D.$raise(d("FloatDomainError"),"Infinity");else{if(b(t,0))return Math.round(o);if(Z(o["$nan?"]())||Z(o["$infinite?"]()))return o}return a=d("Math").$frexp(o),i=j(a),i[0]==null||i[0],m=i[1]==null?u:i[1],Z(p(t,B(ee(d(d("Float"),"DIG"),2),Z(T(m,0))?S(m,4):B(S(m,3),1))))?o:Z(v(t,(Z(T(m,0))?ee(S(m,3),1):S(m,4))["$-@"]()))?0:Math.round(o*Math.pow(10,t))/Math.pow(10,t)}},-1),x(l,"$times",function e(){var t=e.$$p||u,i=this;if(e.$$p=null,!Z(t))return Y(i,"enum_for",["times"],function o(){var m=o.$$s==null?this:o.$$s;return m},{$$s:i});for(var a=0;a<i;a++)t(a);return i}),x(l,"$to_f",h),x(l,"$to_i",function(){var t=this;return t<0?Math.ceil(t):Math.floor(t)}),x(l,"$to_r",function(){var t,i,a=this,o=u,m=u;return O(d("Integer"),a)?d("Rational").$new(a,1):(i=d("Math").$frexp(a),t=j(i),o=t[0]==null?u:t[0],m=t[1]==null?u:t[1],o=d("Math").$ldexp(o,d(d("Float"),"MANT_DIG")).$to_i(),m=B(m,d(d("Float"),"MANT_DIG")),k(o,d(d("Float"),"RADIX")["$**"](m)).$to_r())}),x(l,"$to_s",function(t){var i=this;return t==null&&(t=10),t=w["$coerce_to!"](t,d("Integer"),"to_int"),(Z(v(t,2))||Z(T(t,36)))&&D.$raise(d("ArgumentError"),"invalid radix "+t),b(i,0)&&Z(1/i===-1/0)?"-0.0":i.toString(t)},-1),x(l,"$truncate",function(t){var i=this;t==null&&(t=0);var a=i.$to_f();if(a%1===0&&t>=0)return a;var o=Math.pow(10,t),m=parseInt(a*o,10)/o;return a%1===0&&(m=Math.round(m)),m},-1),x(l,"$digits",function(t){var i=this;t==null&&(t=10),Z(v(i,0))&&D.$raise(d(d("Math"),"DomainError"),"out of domain"),t=w["$coerce_to!"](t,d("Integer"),"to_int"),Z(v(t,2))&&D.$raise(d("ArgumentError"),"invalid radix "+t),i!=parseInt(i)&&D.$raise(d("NoMethodError"),"undefined method `digits' for "+i.$inspect());var a=i,o=[];if(i==0)return[0];for(;a!=0;)o.push(a%t),a=parseInt(a/t,10);return o},-1),x(l,"$divmod",function e(t){var i=e.$$p||u,a=this;return e.$$p=null,Z(a["$nan?"]())||Z(t["$nan?"]())?D.$raise(d("FloatDomainError"),"NaN"):Z(a["$infinite?"]())?D.$raise(d("FloatDomainError"),"Infinity"):$e(a,W(a,"divmod",e,!1,!0),"divmod",[t],i)}),x(l,"$upto",function e(t){var i=e.$$p||u,a=this;if(e.$$p=null,i===u)return Y(a,"enum_for",["upto",t],function m(){var N=m.$$s==null?this:m.$$s;return O(d("Numeric"),t)||D.$raise(d("ArgumentError"),"comparison of "+N.$class()+" with "+t.$class()+" failed"),Z(v(t,N))?0:ee(B(t,N),1)},{$$s:a});t.$$is_number||D.$raise(d("ArgumentError"),"comparison of "+a.$class()+" with "+t.$class()+" failed");for(var o=a;o<=t;o++)i(o);return a}),x(l,"$zero?",function(){var t=this;return t==0}),x(l,"$size",A(4)),x(l,"$nan?",function(){var t=this;return isNaN(t)}),x(l,"$finite?",function(){var t=this;return t!=1/0&&t!=-1/0&&!isNaN(t)}),x(l,"$infinite?",function(){var t=this;return t==1/0?1:t==-1/0?-1:u}),x(l,"$positive?",function(){var t=this;return t!=0&&(t==1/0||1/t>0)}),x(l,"$negative?",function(){var t=this;return t==-1/0||1/t<0});function _(e){var t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}function s(e){return new DataView(e.buffer).getFloat64(0,!0)}function $(e){for(var t=_(e),i=0;i<t.length;i++)if(t[i]===255)t[i]=0;else{t[i]++;break}return s(t)}function r(e){for(var t=_(e),i=0;i<t.length;i++)if(t[i]===0)t[i]=255;else{t[i]--;break}return s(t)}return x(l,"$next_float",function(){var t=this;return b(t,d(d("Float"),"INFINITY"))?d(d("Float"),"INFINITY"):Z(t["$nan?"]())?d(d("Float"),"NAN"):Z(p(t,0))?$(Math.abs(t)):r(t)}),x(l,"$prev_float",function(){var t=this;return b(t,d(d("Float"),"INFINITY")["$-@"]())?d(d("Float"),"INFINITY")["$-@"]():Z(t["$nan?"]())?d(d("Float"),"NAN"):Z(T(t,0))?r(t):-$(Math.abs(t))}),L(l,"arg","angle"),L(l,"eql?","=="),L(l,"fdiv","/"),L(l,"inspect","to_s"),L(l,"kind_of?","is_a?"),L(l,"magnitude","abs"),L(l,"modulo","%"),L(l,"object_id","__id__"),L(l,"phase","angle"),L(l,"succ","next"),L(l,"to_int","to_i")}("::",d("Numeric")),P("::","Fixnum",d("Number")),function(M,g,c){var l=z(M,g,"Integer"),E=[l].concat(c);return l.$$is_number_class=!0,l.$$is_integer_class=!0,function(G,_){var s=[G].concat(_),$=n.$r(s);return x(G,"$allocate",function(){var e=this;return D.$raise(d("TypeError"),"allocator undefined for "+e.$name())}),n.udef(G,"$new"),x(G,"$sqrt",function(e){return e=w["$coerce_to!"](e,d("Integer"),"to_int"),e<0&&D.$raise(d(d("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(e),10)}),x(G,"$try_convert",function(e){var t=this;return $("Opal")["$coerce_to?"](e,t,"to_int")})}(n.get_singleton_class(l),E),P(l,"MAX",Math.pow(2,30)-1),P(l,"MIN",-Math.pow(2,30))}("::",d("Numeric"),q),function(M,g,c){var l=z(M,g,"Float");return l.$$is_number_class=!0,function(E,G){return x(E,"$allocate",function(){var s=this;return D.$raise(d("TypeError"),"allocator undefined for "+s.$name())}),n.udef(E,"$new"),x(E,"$===",function(s){return!!s.$$is_number})}(n.get_singleton_class(l)),P(l,"INFINITY",1/0),P(l,"MAX",Number.MAX_VALUE),P(l,"MIN",Number.MIN_VALUE),P(l,"NAN",NaN),P(l,"DIG",15),P(l,"MANT_DIG",53),P(l,"RADIX",2),P(l,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",d("Numeric"))};Opal.modules["corelib/range"]=function(n){var z=n.klass,w=n.truthy,D=n.Kernel,x=n.def,O=n.not,Z=n.send2,T=n.find_super,J=n.lambda,v=n.send,L=n.rb_ge,$e=n.rb_gt,W=n.eqeq,Y=n.rb_le,ee=n.rb_lt,B=n.eqeqeq,b=n.return_ivar,h=n.rb_minus,S=n.Opal,j=n.rb_divide,k=n.rb_plus,F=n.rb_times,p=n.thrower,A=n.alias,P=n.top,I=[],q=n.nil,u=n.$$$;return n.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),P.$require("corelib/enumerable"),function(d,M,g){var c=z(d,M,"Range"),l=[c].concat(g),E=n.$r(l),G=c.$$prototype;G.begin=G.end=G.excl=q,c.$include(u("Enumerable")),c.$$prototype.$$is_range=!0,c.$attr_reader("begin","end"),x(c,"$initialize",function($,r,e){var t=this;return e==null&&(e=!1),w(t.begin)&&D.$raise(u("NameError"),"'initialize' called twice"),w($["$<=>"](r))||w($["$nil?"]())||w(r["$nil?"]())||D.$raise(u("ArgumentError"),"bad value for range"),t.begin=$,t.end=r,t.excl=e},-3),x(c,"$===",function($){var r=this;return w($.$$is_range)?!1:r["$cover?"]($)});function _(s){return s.begin===q||s.end===q||s.begin===-1/0||s.end===1/0||s.begin===1/0||s.end===-1/0}return x(c,"$count",function s(){var $=s.$$p||q,r=this;return s.$$p=null,O($!==q)&&w(_(r))?u(u("Float"),"INFINITY"):Z(r,T(r,"count",s,!1,!0),"count",[],$)}),x(c,"$to_a",function s(){var $=s.$$p||q,r=this;return s.$$p=null,w(_(r))&&D.$raise(u("TypeError"),"cannot convert endless range to an array"),Z(r,T(r,"to_a",s,!1,!0),"to_a",[],$)}),x(c,"$cover?",function($){var r=this,e=q,t=q,i=q,a=q,o=q,m=q,N=q,K=q;return e=J(function(V,re){var ae=q;return V==null&&(V=q),re==null&&(re=q),w(ae=V["$<=>"](re))?ae:1}),w($.$$is_range)?(t=$.$begin(),i=$.$end(),a=$["$exclude_end?"](),w(r.begin)&&w(t["$nil?"]())||w(r.end)&&w(i["$nil?"]())||w(t)&&w(i)&&w(v(e.$call(t,i),"then",[],function(V){return V==null&&(V=q),w(a)?L(V,0):$e(V,0)}))||w(t)&&O(r["$cover?"](t))?!1:(o=e.$call(r.end,i),W(r.excl,a)?L(o,0):w(r.excl)?$e(o,0):w(L(o,0))?!0:(m=$.$max(),w(N=m["$nil?"]()["$!"]())?Y(e.$call(m,r.end),0):N))):w(r.begin)&&w($e(e.$call(r.begin,$),0))?!1:w(r.end["$nil?"]())?!0:(K=e.$call($,r.end),w(r.excl)?ee(K,0):Y(K,0))}),x(c,"$each",function s(){var $=s.$$p||q,r=this,e=q,t=q,i=q;if(s.$$p=null,$===q)return v(r,"enum_for",["each"],function m(){var N=m.$$s==null?this:m.$$s;return N.$size()},{$$s:r});var a,o;if(r.begin.$$is_number&&r.end.$$is_number){for((r.begin%1!==0||r.end%1!==0)&&D.$raise(u("TypeError"),"can't iterate from Float"),a=r.begin,o=r.end+(w(r.excl)?0:1);a<o;a++)$(a);return r}if(r.begin.$$is_string&&r.end.$$is_string)return v(r.begin,"upto",[r.end,r.excl],$.$to_proc()),r;for(e=r.begin,t=r.end,w(e["$respond_to?"]("succ"))||D.$raise(u("TypeError"),"can't iterate from "+e.$class());w(w(i=r.end["$nil?"]())?i:ee(e["$<=>"](t),0));)n.yield1($,e),e=e.$succ();return O(r.excl)&&W(e,t)&&n.yield1($,e),r}),x(c,"$eql?",function($){var r=this,e=q,t=q;return B(u("Range"),$)?w(e=w(t=r.excl["$==="]($["$exclude_end?"]()))?r.begin["$eql?"]($.$begin()):t)?r.end["$eql?"]($.$end()):e:!1}),x(c,"$exclude_end?",b("excl")),x(c,"$first",function s($){var r=s.$$p||q,e=this;return s.$$p=null,w(e.begin["$nil?"]())&&D.$raise(u("RangeError"),"cannot get the minimum of beginless range"),w($==null)?e.begin:Z(e,T(e,"first",s,!1,!0),"first",[$],r)},-1),x(c,"$include?",function s($){var r=s.$$p||q,e=this,t=q,i=q;if(s.$$p=null,w(e.begin.$$is_number||e.end.$$is_number)||w(e.begin["$is_a?"](u("Time")))||w(e.end["$is_a?"](u("Time")))||w(u("Integer").$try_convert(e.begin))||w(u("Integer").$try_convert(e.end)))return e["$cover?"]($);if(w(e.begin.$$is_string||e.end.$$is_string)){if(w(e.begin.$$is_string&&e.end.$$is_string))return v(e.begin.$upto(e.end,e.excl),"any?",[],function(o){return o==null&&(o=q),o["$=="]($)});if(w(e.begin["$nil?"]()))return t=$["$<=>"](e.end),w(i=t["$nil?"]()["$!"]())?w(e.excl)?ee(t,0):Y(t,0):i;if(w(e.end["$nil?"]()))return t=e.begin["$<=>"]($),w(i=t["$nil?"]()["$!"]())?Y(t,0):i}return Z(e,T(e,"include?",s,!1,!0),"include?",[$],r)}),x(c,"$last",function($){var r=this;return w(r.end["$nil?"]())&&D.$raise(u("RangeError"),"cannot get the maximum of endless range"),w($==null)?r.end:r.$to_a().$last($)},-1),x(c,"$max",function s(){var $=s.$$p||q,r=this;return s.$$p=null,w(r.end["$nil?"]())?D.$raise(u("RangeError"),"cannot get the maximum of endless range"):$!==q?Z(r,T(r,"max",s,!1,!0),"max",[],$):O(r.begin["$nil?"]())&&(w($e(r.begin,r.end))||w(r.excl)&&W(r.begin,r.end))?q:r.excl?r.end-1:r.end}),x(c,"$min",function s(){var $=s.$$p||q,r=this;return s.$$p=null,w(r.begin["$nil?"]())?D.$raise(u("RangeError"),"cannot get the minimum of beginless range"):$!==q?Z(r,T(r,"min",s,!1,!0),"min",[],$):O(r.end["$nil?"]())&&(w($e(r.begin,r.end))||w(r.excl)&&W(r.begin,r.end))?q:r.begin}),x(c,"$size",function(){var $=this.begin,r=this.end;if(u("Numeric")["$==="]($)){if(u("Numeric")["$==="](r)){var e=h(r,$);return e<0?0:(this.excl||(e+=1),u("Float")["$==="]($)||u("Float")["$==="](r)?Math.floor(e):e)}else if(r===q)return 1/0}else if($===q&&u("Numeric")["$==="](r))return 1/0;return q}),x(c,"$step",function s($){var r=s.$$p||q,e=this,t=q,i=q;s.$$p=null;function a(){$==null?$=1:$.$$is_number||($=S["$coerce_to!"]($,u("Integer"),"to_int")),$<0?D.$raise(u("ArgumentError"),"step can't be negative"):$===0&&D.$raise(u("ArgumentError"),"step can't be 0")}function o(){if(!e.begin["$respond_to?"]("succ")||e.begin.$$is_string&&e.end.$$is_string)return q;if($%1===0)return j(e.$size(),$).$ceil();var m=e.begin,N=e.end,K=Math.abs,C=Math.floor,V=(K(m)+K(N)+K(N-m))/K($)*u(u("Float"),"EPSILON"),re;return V>.5&&(V=.5),e.excl?(re=C((N-m)/$-V),re*$+m<N&&re++):re=C((N-m)/$+V)+1,re}return r===q?(w(e.begin["$is_a?"](E("Numeric")))||w(e.begin["$nil?"]()))&&(w(e.end["$is_a?"](E("Numeric")))||w(e.end["$nil?"]()))&&O(w(t=e.begin["$nil?"]())?e.end["$nil?"]():t)?u(u("Enumerator"),"ArithmeticSequence").$new(e,$,"step"):v(e,"enum_for",["step",$],function(){return a(),o()}):(a(),w(e.begin.$$is_number&&e.end.$$is_number)?(i=0,function(){try{var m=p("break");return v(e,"loop",[],function N(){var K=N.$$s==null?this:N.$$s,C=q;return K.begin==null&&(K.begin=q),K.excl==null&&(K.excl=q),K.end==null&&(K.end=q),C=k(K.begin,F(i,$)),w(K.excl)?w(L(C,K.end))&&m.$throw(q,N.$$is_lambda):w($e(C,K.end))&&m.$throw(q,N.$$is_lambda),n.yield1(r,C),i=k(i,1)},{$$s:e})}catch(N){if(N===m)return N.$v;throw N}finally{m.is_orphan=!0}}()):(e.begin.$$is_string&&e.end.$$is_string&&$%1!==0&&D.$raise(u("TypeError"),"no implicit conversion to float from string"),v(e,"each_with_index",[],function(N,K){return N==null&&(N=q),K==null&&(K=q),W(K["$%"]($),0)?n.yield1(r,N):q})),e)},-1),x(c,"$%",function($){var r=this;return w(r.begin["$is_a?"](E("Numeric")))&&w(r.end["$is_a?"](E("Numeric")))?u(u("Enumerator"),"ArithmeticSequence").$new(r,$,"%"):r.$step($)}),x(c,"$bsearch",function s(){var $=s.$$p||q,r=this;return s.$$p=null,$===q?r.$enum_for("bsearch"):(w(_(r)&&(r.begin.$$is_number||r.end.$$is_number))&&D.$raise(u("NotImplementedError"),"Can't #bsearch an infinite range"),w(r.begin.$$is_number&&r.end.$$is_number)||D.$raise(u("TypeError"),"can't do binary search for "+r.begin.$class()),v(r.$to_a(),"bsearch",[],$.$to_proc()))}),x(c,"$to_s",function(){var $=this,r=q;return""+(w(r=$.begin)?r:"")+(w($.excl)?"...":"..")+(w(r=$.end)?r:"")}),x(c,"$inspect",function(){var $=this,r=q;return""+(w(r=$.begin)?$.begin.$inspect():r)+(w($.excl)?"...":"..")+(w(r=$.end)?$.end.$inspect():r)}),x(c,"$marshal_load",function($){var r=this;return r.begin=$["$[]"]("begin"),r.end=$["$[]"]("end"),r.excl=$["$[]"]("excl")}),x(c,"$hash",function(){var $=this;return[u("Range"),$.begin,$.end,$.excl].$hash()}),A(c,"==","eql?"),A(c,"member?","include?")}("::",null,I)};Opal.modules["corelib/proc"]=function(n){var z=n.slice,w=n.each_ivar,D=n.klass,x=n.truthy,O=n.Kernel,Z=n.defs,T=n.def,J=n.send,v=n.to_a,L=n.return_self,$e=n.ensure_kwargs,W=n.hash_get,Y=n.Opal,ee=n.alias,B=n.nil,b=n.$$$;return n.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(h,S){var j=D(h,S,"Proc");n.prop(j.$$prototype,"$$is_proc",!0),n.prop(j.$$prototype,"$$is_lambda",!1),Z(j,"$new",function p(){var A=p.$$p||B;return p.$$p=null,x(A)||O.$raise(b("ArgumentError"),"tried to create a Proc object without a block"),A});function k(p,A){if(p.$$ret)try{return p.apply(null,A)}catch(P){if(P===p.$$ret)return P.$v;throw P}else return p.apply(null,A)}function F(p,A){if(p.$$brk)try{return n.yieldX(p,A)}catch(P){if(P===p.$$brk)return P.$v;throw P}else return n.yieldX(p,A)}return T(j,"$call",function p(A){var P=p.$$p||B,I,q,u=this;return p.$$p=null,I=z(arguments),q=I,P!==B&&(u.$$p=P),u.$$is_lambda?k(u,q):F(u,q)},-1),T(j,"$>>",function p(A){p.$$p;var P=this;return p.$$p=null,J(O,"proc",[],function I(q){var u=I.$$p||B,d,M,g=I.$$s==null?this:I.$$s,c=B;return I.$$p=null,d=z(arguments),M=d,c=J(g,"call",v(M),u.$to_proc()),A.$call(c)},{$$arity:-1,$$s:P})}),T(j,"$<<",function p(A){p.$$p;var P=this;return p.$$p=null,J(O,"proc",[],function I(q){var u=I.$$p||B,d,M,g=I.$$s==null?this:I.$$s,c=B;return I.$$p=null,d=z(arguments),M=d,c=J(A,"call",v(M),u.$to_proc()),g.$call(c)},{$$arity:-1,$$s:P})}),T(j,"$to_proc",L),T(j,"$lambda?",function(){var A=this;return!!A.$$is_lambda}),T(j,"$arity",function(){var A=this;return A.$$is_curried?-1:A.$$arity!=null?A.$$arity:A.length}),T(j,"$source_location",function(){var A=this,P=B;return A.$$is_curried?B:x(P=A.$$source_location)?P:B}),T(j,"$binding",function(){var A=this;return A.$$is_curried&&O.$raise(b("ArgumentError"),"Can't create Binding"),x(b("::","Binding","skip_raise")?"constant":B)?b("Binding").$new(B,[],A.$$s,A.$source_location()):B}),T(j,"$parameters",function(A){var P,I=this;if(A=$e(A),P=W(A,"lambda"),I.$$is_curried)return[["rest"]];if(I.$$parameters){if(P??I.$$is_lambda)return I.$$parameters;var q=[],u,d;for(u=0,d=I.$$parameters.length;u<d;u++){var M=I.$$parameters[u];M[0]==="req"&&(M=["opt",M[1]]),q.push(M)}return q}else return[]},-1),T(j,"$curry",function(A){var P=this;A===void 0?A=P.length:(A=Y["$coerce_to!"](A,b("Integer"),"to_int"),P.$$is_lambda&&A!==P.length&&O.$raise(b("ArgumentError"),"wrong number of arguments ("+A+" for "+P.length+")"));function I(){var q=z(arguments),u=q.length,d;return u>A&&P.$$is_lambda&&!P.$$is_curried&&O.$raise(b("ArgumentError"),"wrong number of arguments ("+u+" for "+A+")"),u>=A?P.$call.apply(P,q):(d=function(){return I.apply(null,q.concat(z(arguments)))},d.$$is_lambda=P.$$is_lambda,d.$$is_curried=!0,d)}return I.$$is_lambda=P.$$is_lambda,I.$$is_curried=!0,I},-1),T(j,"$dup",function(){var A=this,P=A.$$original_proc||A,I=function(){return P.apply(this,arguments)};return w(A,function(q){I[q]=A[q]}),I}),ee(j,"===","call"),ee(j,"clone","dup"),ee(j,"yield","call"),ee(j,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(n){var z=n.klass,w=n.def,D=n.truthy,x=n.slice,O=n.alias,Z=n.Kernel,T=n.send,J=n.to_a,v=n.nil,L=n.$$$;return n.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function($e,W){var Y=z($e,W,"Method"),ee=Y.$$prototype;return ee.method=ee.receiver=ee.owner=ee.name=v,Y.$attr_reader("owner","receiver","name"),w(Y,"$initialize",function(b,h,S,j){var k=this;return k.receiver=b,k.owner=h,k.name=j,k.method=S}),w(Y,"$arity",function(){var b=this;return b.method.$arity()}),w(Y,"$parameters",function(){var b=this;return b.method.$$parameters}),w(Y,"$source_location",function(){var b=this,h=v;return D(h=b.method.$$source_location)?h:["(eval)",0]}),w(Y,"$comments",function(){var b=this,h=v;return D(h=b.method.$$comments)?h:[]}),w(Y,"$call",function B(b){var h=B.$$p||v,S,j,k=this;return B.$$p=null,S=x(arguments),j=S,k.method.$$p=h,k.method.apply(k.receiver,j)},-1),w(Y,"$curry",function(b){var h=this;return h.method.$curry(b)},-1),w(Y,"$>>",function(b){var h=this;return h.method["$>>"](b)}),w(Y,"$<<",function(b){var h=this;return h.method["$<<"](b)}),w(Y,"$unbind",function(){var b=this;return L("UnboundMethod").$new(b.receiver.$class(),b.owner,b.method,b.name)}),w(Y,"$to_proc",function(){var b=this,h=b.$call.bind(b);return h.$$unbound=b.method,h.$$is_lambda=!0,h.$$arity=b.method.$$arity==null?b.method.length:b.method.$$arity,h.$$parameters=b.method.$$parameters,h}),w(Y,"$inspect",function(){var b=this;return"#<"+b.$class()+": "+b.receiver.$class()+"#"+b.name+" (defined in "+b.owner+" in "+b.$source_location().$join(":")+")>"}),O(Y,"[]","call"),O(Y,"===","call")}("::",null),function($e,W){var Y=z($e,W,"UnboundMethod"),ee=Y.$$prototype;return ee.method=ee.owner=ee.name=ee.source=v,Y.$attr_reader("source","owner","name"),w(Y,"$initialize",function(b,h,S,j){var k=this;return k.source=b,k.owner=h,k.method=S,k.name=j,k.$$method=S}),w(Y,"$arity",function(){var b=this;return b.method.$arity()}),w(Y,"$parameters",function(){var b=this;return b.method.$$parameters}),w(Y,"$source_location",function(){var b=this,h=v;return D(h=b.method.$$source_location)?h:["(eval)",0]}),w(Y,"$comments",function(){var b=this,h=v;return D(h=b.method.$$comments)?h:[]}),w(Y,"$bind",function(b){var h=this;if(h.owner.$$is_module||n.is_a(b,h.owner))return L("Method").$new(b,h.owner,h.method,h.name);Z.$raise(L("TypeError"),"can't bind singleton method to a different class (expected "+b+".kind_of?("+h.owner+" to be true)")}),w(Y,"$bind_call",function B(b,h){var S=B.$$p||v,j,k,F=this;return B.$$p=null,j=x(arguments,1),k=j,T(F.$bind(b),"call",J(k),S.$to_proc())},-2),w(Y,"$inspect",function(){var b=this;return"#<"+b.$class()+": "+b.source+"#"+b.name+" (defined in "+b.owner+" in "+b.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(n){var z=n.gvars,w=n.const_set,D=n.Object,x=n.nil;return n.add_stubs("new"),z["&"]=z["~"]=z["`"]=z["'"]=x,z.LOADED_FEATURES=z['"']=n.loaded_features,z.LOAD_PATH=z[":"]=[],z["/"]=`
`,z[","]=x,w("::","ARGV",[]),w("::","ARGF",D.$new()),w("::","ENV",new Map),z.VERBOSE=!1,z.DEBUG=!1,z.SAFE=0};Opal.modules["corelib/io"]=function(n){var z=n.klass,w=n.const_set,D=n.not,x=n.truthy,O=n.def,Z=n.return_ivar,T=n.return_val,J=n.slice,v=n.Kernel,L=n.gvars,$e=n.send,W=n.to_a,Y=n.rb_plus,ee=n.neqeq,B=n.range,b=n.eqeq,h=n.to_ary,S=n.rb_gt,j=n.assign_ivar_val,k=n.alias,F,p=n.nil,A=n.$$$;n.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(I,q){var u=z(I,q,"IO"),d=u.$$prototype;return d.read_buffer=d.closed=p,w(u,"SEEK_SET",0),w(u,"SEEK_CUR",1),w(u,"SEEK_END",2),w(u,"SEEK_DATA",3),w(u,"SEEK_HOLE",4),w(u,"READABLE",1),w(u,"WRITABLE",4),u.$attr_reader("eof"),u.$attr_accessor("read_proc","sync","tty","write_proc"),O(u,"$initialize",function(g,c){var l=this;return c==null&&(c="r"),l.fd=g,l.flags=c,l.eof=!1,x(c["$include?"]("r"))&&D(c["$match?"](/[wa+]/))?l.closed="write":x(c["$match?"](/[wa]/))&&D(c["$match?"](/[r+]/))?l.closed="read":p},-2),O(u,"$fileno",Z("fd")),O(u,"$tty?",function(){var g=this;return g.tty==!0}),O(u,"$write",function(g){var c=this;return c.write_proc(g),g.$size()}),O(u,"$flush",T(p)),O(u,"$<<",function(g){var c=this;return c.$write(g),c}),O(u,"$print",function(g){var c,l,E=this;L[","]==null&&(L[","]=p),c=J(arguments),l=c;for(var G=0,_=l.length;G<_;G++)l[G]=v.$String(l[G]);return E.$write(l.join(L[","])),p},-1),O(u,"$puts",function(g){var c,l,E=this;c=J(arguments),l=c;var G;if(l.length===0)return E.$write(`
`),p;for(var _=0,s=l.length;_<s;_++)if(l[_].$$is_array){var $=l[_].$flatten();$.length>0&&$e(E,"puts",W($))}else l[_].$$is_string?G=l[_].valueOf():G=v.$String(l[_]),G.endsWith(`
`)||(G+=`
`),E.$write(G);return p},-1),O(u,"$getc",function(){var g=this,c=p,l=p,E=p;g.read_buffer=x(c=g.read_buffer)?c:"",l="";do if(g.read_buffer=Y(g.read_buffer,l),ee(g.read_buffer,""))return E=g.read_buffer["$[]"](0),g.read_buffer=g.read_buffer["$[]"](B(1,-1,!1)),E;while(x(l=g.$sysread_noraise(1)));return p}),O(u,"$getbyte",function(){var g,c=this;return g=c.$getc(),g===p||g==null?p:g.$ord()}),O(u,"$readbyte",function(){var g=this;return g.$readchar().$ord()}),O(u,"$readchar",function(){var g=this,c=p;return x(c=g.$getc())?c:v.$raise(A("EOFError"),"end of file reached")}),O(u,"$readline",function(g){var c,l,E=this,G=p;return c=J(arguments),l=c,x(G=$e(E,"gets",W(l)))?G:v.$raise(A("EOFError"),"end of file reached")},-1),O(u,"$gets",function(g,c,l){var E,G,_=this,s=p,$=p,r=p,e=p,t=p,i=p;L["/"]==null&&(L["/"]=p),g==null&&(g=!1),c==null&&(c=p),l==null&&(l=new Map),x(g.$$is_number)&&D(c)&&(E=[!1,g,c],g=E[0],c=E[1],l=E[2]),x(g.$$is_hash)&&D(c)&&b(l,new Map)?(E=[!1,p,g],g=E[0],c=E[1],l=E[2]):x(c.$$is_hash)&&b(l,new Map)&&(E=[g,p,c],g=E[0],c=E[1],l=E[2]),s=g,b(g,!1)&&(g=L["/"]),b(g,"")&&(g=/\r?\n\r?\n/),g=x($=g)?$:"",b(s,"")||(g=g.$to_str()),r=b(s,"")?2:g.$length(),b(g," ")&&(g=/ /),_.read_buffer=x($=_.read_buffer)?$:"",e="",t=p;do if(_.read_buffer=Y(_.read_buffer,e),ee(g,"")&&x(x(g.$$is_regexp)?_.read_buffer["$match?"](g):_.read_buffer["$include?"](g))){i=_.read_buffer,G=_.read_buffer.$split(g,2),E=h(G),t=E[0]==null?p:E[0],_.read_buffer=E[1]==null?p:E[1],ee(t,i)&&(t=Y(t,i["$[]"](t.$length(),r)));break}while(x(e=_.$sysread_noraise(b(g,"")?65536:1)));return x(t)||(E=[x($=_.read_buffer)?$:"",""],t=E[0],_.read_buffer=E[1],b(t,"")&&(t=p)),x(t)&&(x(c)&&(t=t["$[]"](n.Range.$new(0,c,!0)),_.read_buffer=Y(t["$[]"](n.Range.$new(c,-1,!1)),_.read_buffer)),x(l["$[]"]("chomp"))&&(t=t.$sub(/\r?\n$/,"")),b(s,"")&&(t=t.$sub(/^[\r\n]+/,""))),b(s,!1)&&(L._=t),t},-1),O(u,"$sysread",function(g){var c=this,l=p;return x(l=c.read_proc(g))?l:(c.eof=!0,v.$raise(A("EOFError"),"end of file reached"))}),O(u,"$sysread_noraise",function(g){var c=this;try{return c.$sysread(g)}catch(l){if(n.rescue(l,[A("EOFError")]))try{return p}finally{n.pop_exception(l)}else throw l}}),O(u,"$readpartial",function(g){var c,l=this,E=p,G=p,_=p;return l.read_buffer=x(E=l.read_buffer)?E:"",G=l.$sysread(g),c=[Y(l.read_buffer,x(E=G)?E:""),""],_=c[0],l.read_buffer=c[1],b(_,"")&&(_=p),_}),O(u,"$read",function(g){var c,l=this,E=p,G=p,_=p;g==null&&(g=p),l.read_buffer=x(E=l.read_buffer)?E:"",G="",_=p;do if(l.read_buffer=Y(l.read_buffer,G),x(g)&&x(S(l.read_buffer.$length(),g)))return c=[l.read_buffer["$[]"](n.Range.$new(0,g,!0)),l.read_buffer["$[]"](n.Range.$new(g,-1,!1))],_=c[0],l.read_buffer=c[1],_;while(x(G=l.$sysread_noraise(x(E=g)?E:65536)));return c=[l.read_buffer,""],_=c[0],l.read_buffer=c[1],_},-1),O(u,"$readlines",function(g){var c=this;return L["/"]==null&&(L["/"]=p),g==null&&(g=L["/"]),c.$each_line(g).$to_a()},-1),O(u,"$each",function M(g,c){var l=M.$$p||p,E,G,_,s=this,$=p;if(L["/"]==null&&(L["/"]=p),M.$$p=null,E=J(arguments),E.length>0&&(G=E.shift()),G==null&&(G=L["/"]),_=E,l===p)return $e(s,"enum_for",["each",G].concat(W(_)));for(;x($=$e(s,"gets",[G].concat(W(_))));)n.yield1(l,$);return s},-1),O(u,"$each_byte",function M(){var g=M.$$p||p,c=this,l=p;if(M.$$p=null,g===p)return c.$enum_for("each_byte");for(;x(l=c.$getbyte());)n.yield1(g,l);return c}),O(u,"$each_char",function M(){var g=M.$$p||p,c=this,l=p;if(M.$$p=null,g===p)return c.$enum_for("each_char");for(;x(l=c.$getc());)n.yield1(g,l);return c}),O(u,"$close",j("closed","both")),O(u,"$close_read",function(){var g=this;return b(g.closed,"write")?g.closed="both":g.closed="read"}),O(u,"$close_write",function(){var g=this;return b(g.closed,"read")?g.closed="both":g.closed="write"}),O(u,"$closed?",function(){var g=this;return g.closed["$=="]("both")}),O(u,"$closed_read?",function(){var g=this,c=p;return x(c=g.closed["$=="]("read"))?c:g.closed["$=="]("both")}),O(u,"$closed_write?",function(){var g=this,c=p;return x(c=g.closed["$=="]("write"))?c:g.closed["$=="]("both")}),O(u,"$check_writable",function(){var g=this;return x(g["$closed_write?"]())?v.$raise(A("IOError"),"not opened for writing"):p}),O(u,"$check_readable",function(){var g=this;return x(g["$closed_read?"]())?v.$raise(A("IOError"),"not opened for reading"):p}),k(u,"each_line","each"),k(u,"eof?","eof")}("::",null),w("::","STDIN",L.stdin=A("IO").$new(0,"r")),w("::","STDOUT",L.stdout=A("IO").$new(1,"w")),w("::","STDERR",L.stderr=A("IO").$new(2,"w"));var P=n.global.console;return A("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(I){process.stdout.write(I)}:function(I){P.log(I)}),A("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(I){process.stderr.write(I)}:function(I){P.warn(I)}),F=[function(I){var q=prompt();return q!==null?q+`
`:p}],$e(A("STDIN"),"read_proc=",F),F[F.length-1]};Opal.modules["opal/regexp_anchors"]=function(n){var z=n.module,w=n.const_set,D=[];n.nil;var x=n.$$$;return n.add_stubs("new"),function(O,Z){var T=z(O,"Opal"),J=[T].concat(Z),v=n.$r(J);return w(T,"REGEXP_START","^"),w(T,"REGEXP_END","$"),w(T,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),w(T,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),w(T,"INLINE_IDENTIFIER_REGEXP",v("Regexp").$new("[^"+x(T,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+x(T,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),w(T,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),w(T,"CONST_NAME_REGEXP",v("Regexp").$new(""+x(T,"REGEXP_START")+"(::)?[A-Z][^"+x(T,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+x(T,"REGEXP_END")))}(D[0],D)};Opal.modules["opal/mini"]=function(n){var z=n.Object;return n.nil,n.add_stubs("require"),z.$require("opal/base"),z.$require("corelib/nil"),z.$require("corelib/boolean"),z.$require("corelib/string"),z.$require("corelib/comparable"),z.$require("corelib/enumerable"),z.$require("corelib/enumerator"),z.$require("corelib/array"),z.$require("corelib/hash"),z.$require("corelib/number"),z.$require("corelib/range"),z.$require("corelib/proc"),z.$require("corelib/method"),z.$require("corelib/regexp"),z.$require("corelib/variables"),z.$require("corelib/io"),z.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(n){var z=n.coerce_to,w=n.module,D=n.slice,x=n.truthy,O=n.eqeq,Z=n.Opal,T=n.Kernel,J=n.gvars,v=n.def,L=n.alias,$e=n.nil,W=n.$$$;return n.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(Y){var ee=w(Y,"Kernel");return v(ee,"$format",function(b,h){var S,j,k=$e;J.DEBUG==null&&(J.DEBUG=$e),S=D(arguments,1),j=S,O(j.$length(),1)&&x(j["$[]"](0)["$respond_to?"]("to_ary"))&&(k=Z["$coerce_to?"](j["$[]"](0),W("Array"),"to_ary"),x(k["$nil?"]())||(j=k.$to_a()));var F="",p=0,A,P,I=b.length,q,u,d,M,g,c,l,E,G,_,s,$,r,e=1,t=0,i,a=0,o=1,m=2,N=4,K=8,C=16,V=32,re=64,ae=128;function le(){i&V&&T.$raise(W("ArgumentError"),"flag after width"),i&ae&&T.$raise(W("ArgumentError"),"flag after precision")}function _e(){i&V&&T.$raise(W("ArgumentError"),"width given twice"),i&ae&&T.$raise(W("ArgumentError"),"width after precision")}function de(R){return R>=j.length&&T.$raise(W("ArgumentError"),"too few arguments"),j[R]}function ge(){switch(t){case-1:T.$raise(W("ArgumentError"),"unnumbered("+e+") mixed with numbered");case-2:T.$raise(W("ArgumentError"),"unnumbered("+e+") mixed with named")}return t=e++,de(t-1)}function ve(R){return t>0&&T.$raise(W("ArgumentError"),"numbered("+R+") after unnumbered("+t+")"),t===-2&&T.$raise(W("ArgumentError"),"numbered("+R+") after named"),R<1&&T.$raise(W("ArgumentError"),"invalid index - "+R+"$"),t=-1,de(R-1)}function me(){return r===void 0?ge():r}function be(R){for(var H,X="";;P++){if(P===I&&T.$raise(W("ArgumentError"),"malformed format string - %*[0-9]"),b.charCodeAt(P)<48||b.charCodeAt(P)>57)return P--,H=parseInt(X,10)||0,H>2147483647&&T.$raise(W("ArgumentError"),""+R+" too big"),H;X+=b.charAt(P)}}function ie(R){var H,X=be(R);return b.charAt(P+1)==="$"?(P++,H=ve(X)):H=ge(),H.$to_int()}for(P=b.indexOf("%");P!==-1;P=b.indexOf("%",P)){switch(u=void 0,i=a,M=-1,g=-1,r=void 0,A=P,P++,b.charAt(P)){case"%":p=P;case"":case`
`:case"\0":P++;continue}e:for(;P<I;P++)switch(b.charAt(P)){case" ":le(),i|=C;continue e;case"#":le(),i|=o;continue e;case"+":le(),i|=N;continue e;case"-":le(),i|=m;continue e;case"0":le(),i|=K;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(c=be("width"),b.charAt(P+1)==="$"){if(P+2===I){u="%",P++;break e}r!==void 0&&T.$raise(W("ArgumentError"),"value given twice - %"+c+"$"),r=ve(c),P++}else _e(),i|=V,M=c;continue e;case"<":case"{":for(E=b.charAt(P)==="<"?">":"}",l="",P++;;P++){if(P===I&&T.$raise(W("ArgumentError"),"malformed name - unmatched parenthesis"),b.charAt(P)===E){if(t>0&&T.$raise(W("ArgumentError"),"named "+l+" after unnumbered("+t+")"),t===-1&&T.$raise(W("ArgumentError"),"named "+l+" after numbered"),t=-2,(j[0]===void 0||!j[0].$$is_hash)&&T.$raise(W("ArgumentError"),"one hash required"),r=j[0].$fetch(l),E===">")continue e;if(u=r.toString(),g!==-1&&(u=u.slice(0,g)),i&m)for(;u.length<M;)u=u+" ";else for(;u.length<M;)u=" "+u;break e}l+=b.charAt(P)}case"*":P++,_e(),i|=V,M=ie("width"),M<0&&(i|=m,M=-M);continue e;case".":if(i&ae&&T.$raise(W("ArgumentError"),"precision given twice"),i|=re|ae,g=0,P++,b.charAt(P)==="*"){P++,g=ie("precision"),g<0&&(i&=~re);continue e}g=be("precision");continue e;case"d":case"i":case"u":if(q=T.$Integer(me()),q>=0){for(u=q.toString();u.length<g;)u="0"+u;if(i&m)for((i&N||i&C)&&(u=(i&N?"+":" ")+u);u.length<M;)u=u+" ";else if(i&K&&g===-1){for(;u.length<M-(i&N||i&C?1:0);)u="0"+u;(i&N||i&C)&&(u=(i&N?"+":" ")+u)}else for((i&N||i&C)&&(u=(i&N?"+":" ")+u);u.length<M;)u=" "+u}else{for(u=(-q).toString();u.length<g;)u="0"+u;if(i&m)for(u="-"+u;u.length<M;)u=u+" ";else if(i&K&&g===-1){for(;u.length<M-1;)u="0"+u;u="-"+u}else for(u="-"+u;u.length<M;)u=" "+u}break e;case"b":case"B":case"o":case"x":case"X":switch(b.charAt(P)){case"b":case"B":G=2,_="0b",s=/^1+/,$="1";break;case"o":G=8,_="0",s=/^3?7+/,$="7";break;case"x":case"X":G=16,_="0x",s=/^f+/,$="f";break}if(q=T.$Integer(me()),q>=0){for(u=q.toString(G);u.length<g;)u="0"+u;if(i&m)for((i&N||i&C)&&(u=(i&N?"+":" ")+u),i&o&&q!==0&&(u=_+u);u.length<M;)u=u+" ";else if(i&K&&g===-1){for(;u.length<M-(i&N||i&C?1:0)-(i&o&&q!==0?_.length:0);)u="0"+u;i&o&&q!==0&&(u=_+u),(i&N||i&C)&&(u=(i&N?"+":" ")+u)}else for(i&o&&q!==0&&(u=_+u),(i&N||i&C)&&(u=(i&N?"+":" ")+u);u.length<M;)u=" "+u}else if(i&N||i&C){for(u=(-q).toString(G);u.length<g;)u="0"+u;if(i&m)for(i&o&&(u=_+u),u="-"+u;u.length<M;)u=u+" ";else if(i&K&&g===-1){for(;u.length<M-1-(i&o?2:0);)u="0"+u;i&o&&(u=_+u),u="-"+u}else for(i&o&&(u=_+u),u="-"+u;u.length<M;)u=" "+u}else{for(u=(q>>>0).toString(G).replace(s,$);u.length<g-2;)u=$+u;if(i&m)for(u=".."+u,i&o&&(u=_+u);u.length<M;)u=u+" ";else if(i&K&&g===-1){for(;u.length<M-2-(i&o?_.length:0);)u=$+u;u=".."+u,i&o&&(u=_+u)}else for(u=".."+u,i&o&&(u=_+u);u.length<M;)u=" "+u}b.charAt(P)===b.charAt(P).toUpperCase()&&(u=u.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(q=T.$Float(me()),q>=0||isNaN(q)){if(q===1/0)u="Inf";else switch(b.charAt(P)){case"f":u=q.toFixed(g===-1?6:g);break;case"e":case"E":u=q.toExponential(g===-1?6:g);break;case"g":case"G":u=q.toExponential(),d=parseInt(u.split("e")[1],10),d<-4||d>=(g===-1?6:g)||(u=q.toPrecision(g===-1?i&o?6:void 0:g));break}if(i&m)for((i&N||i&C)&&(u=(i&N?"+":" ")+u);u.length<M;)u=u+" ";else if(i&K&&q!==1/0&&!isNaN(q)){for(;u.length<M-(i&N||i&C?1:0);)u="0"+u;(i&N||i&C)&&(u=(i&N?"+":" ")+u)}else for((i&N||i&C)&&(u=(i&N?"+":" ")+u);u.length<M;)u=" "+u}else{if(q===-1/0)u="Inf";else switch(b.charAt(P)){case"f":u=(-q).toFixed(g===-1?6:g);break;case"e":case"E":u=(-q).toExponential(g===-1?6:g);break;case"g":case"G":u=(-q).toExponential(),d=parseInt(u.split("e")[1],10),d<-4||d>=(g===-1?6:g)||(u=(-q).toPrecision(g===-1?i&o?6:void 0:g));break}if(i&m)for(u="-"+u;u.length<M;)u=u+" ";else if(i&K&&q!==-1/0){for(;u.length<M-1;)u="0"+u;u="-"+u}else for(u="-"+u;u.length<M;)u=" "+u}b.charAt(P)===b.charAt(P).toUpperCase()&&q!==1/0&&q!==-1/0&&!isNaN(q)&&(u=u.toUpperCase()),u=u.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":T.$raise(W("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(q=me(),q["$respond_to?"]("to_ary")&&(q=q.$to_ary()[0]),q["$respond_to?"]("to_str")?u=q.$to_str():u=String.fromCharCode(z(q,W("Integer"),"to_int")),u.length!==1&&T.$raise(W("ArgumentError"),"%c requires a character"),i&m)for(;u.length<M;)u=u+" ";else for(;u.length<M;)u=" "+u;break e;case"p":if(u=me().$inspect(),g!==-1&&(u=u.slice(0,g)),i&m)for(;u.length<M;)u=u+" ";else for(;u.length<M;)u=" "+u;break e;case"s":if(u=me().$to_s(),g!==-1&&(u=u.slice(0,g)),i&m)for(;u.length<M;)u=u+" ";else for(;u.length<M;)u=" "+u;break e;default:T.$raise(W("ArgumentError"),"malformed format string - %"+b.charAt(P))}u===void 0&&T.$raise(W("ArgumentError"),"malformed format string - %"),F+=b.slice(p,A)+u,p=P+1}return J.DEBUG&&t>=0&&e<j.length&&T.$raise(W("ArgumentError"),"too many arguments for format string"),F+b.slice(p)},-2),L(ee,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(n){var z=n.klass,w=n.rb_plus,D=n.truthy,x=n.send,O=n.defs,Z=n.eqeq,T=n.def,J=n.return_ivar,v=n.return_val,L=n.slice,$e=n.Kernel,W=n.Opal,Y=n.rb_lt,ee,B=n.top,b=[],h=n.$r(b),S=n.nil,j=n.$$$;return n.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),B.$require("corelib/string"),function(k,F,p){var A=z(k,F,"Encoding"),P=[A].concat(p),I=A.$$prototype;return I.name=I.dummy=S,O(A,"$register",function q(u,d){var M=q.$$p||S,g=this,c=S,l=S,E=S,G=S,_=S,s=S;return q.$$p=null,d==null&&(d=new Map),c=w([u],D(l=d["$[]"]("aliases"))?l:[]),E=D(l=d["$[]"]("ascii"))&&l,G=D(l=d["$[]"]("dummy"))&&l,D(d["$[]"]("inherits"))?(_=d["$[]"]("inherits").$clone(),_.$initialize(u,c,E,G)):_=g.$new(u,c,E,G),M!==S&&x(_,"instance_eval",[],M.$to_proc()),s=n.encodings,x(c,"each",[],function $(r){var e=$.$$s==null?this:$.$$s;return r==null&&(r=S),e.$const_set(r.$tr("-","_"),_),s[r]=_},{$$s:g})},-2),O(A,"$find",function(u){var d=this;return Z(u,"default_external")?d.$default_external():n.find_encoding(u)}),A.$singleton_class().$attr_accessor("default_external"),A.$attr_reader("name","names"),T(A,"$initialize",function(u,d,M,g){var c=this;return c.name=u,c.names=d,c.ascii=M,c.dummy=g}),T(A,"$ascii_compatible?",J("ascii")),T(A,"$dummy?",J("dummy")),T(A,"$binary?",v(!1)),T(A,"$to_s",J("name")),T(A,"$inspect",function(){var u=this;return"#<Encoding:"+u.name+(D(u.dummy)?" (dummy)":S)+">"}),T(A,"$charsize",function(u){for(var d=0,M=0,g=u.length;M<g;M++){var c=u.charCodeAt(M);c>=55296&&c<=56319||d++}return d}),T(A,"$each_char",function q(u){var d=q.$$p||S;q.$$p=null;for(var M="",g=0,c=u.length;g<c;g++){var l=u.charCodeAt(g),E=u.charAt(g);if(l>=56320&&l<=57343){M=E;continue}else l>=55296&&l<=56319&&(E=M+E);u.encoding.name!="UTF-8"&&(E=new String(E),E.encoding=u.encoding),n.yield1(d,E)}}),T(A,"$each_byte",function(u){return L(arguments),$e.$raise(j("NotImplementedError"))},-1),T(A,"$bytesize",function(u){return L(arguments),$e.$raise(j("NotImplementedError"))},-1),z("::",j("StandardError"),"EncodingError"),z("::",j("EncodingError"),"CompatibilityError"),z(P[0],j("EncodingError"),"UndefinedConversionError"),S}("::",null,b),x(j("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function k(){var F=k.$$s==null?this:k.$$s;return T(F,"$each_byte",function p(A){var P=p.$$p||S;p.$$p=null;for(var I=1/0,q,u=A.length,d=null,M=0;M<u;++M){if(q=A.charCodeAt(M),q>55295&&q<57344){if(!d){if(q>56319){(I-=3)>-1&&(n.yield1(P,239),n.yield1(P,191),n.yield1(P,189));continue}else if(M+1===u){(I-=3)>-1&&(n.yield1(P,239),n.yield1(P,191),n.yield1(P,189));continue}d=q;continue}if(q<56320){(I-=3)>-1&&(n.yield1(P,239),n.yield1(P,191),n.yield1(P,189)),d=q;continue}q=(d-55296<<10|q-56320)+65536}else d&&(I-=3)>-1&&(n.yield1(P,239),n.yield1(P,191),n.yield1(P,189));if(d=null,q<128){if((I-=1)<0)break;n.yield1(P,q)}else if(q<2048){if((I-=2)<0)break;n.yield1(P,q>>6|192),n.yield1(P,q&63|128)}else if(q<65536){if((I-=3)<0)break;n.yield1(P,q>>12|224),n.yield1(P,q>>6&63|128),n.yield1(P,q&63|128)}else if(q<1114112){if((I-=4)<0)break;n.yield1(P,q>>18|240),n.yield1(P,q>>12&63|128),n.yield1(P,q>>6&63|128),n.yield1(P,q&63|128)}}}),T(F,"$bytesize",function(A){return A.$bytes().$length()})},{$$s:B}),x(j("Encoding"),"register",["UTF-16LE"],function k(){var F=k.$$s==null?this:k.$$s;return T(F,"$each_byte",function p(A){var P=p.$$p||S;p.$$p=null;for(var I=0,q=A.length;I<q;I++){var u=A.charCodeAt(I);n.yield1(P,u&255),n.yield1(P,u>>8)}}),T(F,"$bytesize",function(A){return A.length*2})},{$$s:B}),x(j("Encoding"),"register",["UTF-16BE",new Map([["inherits",j(j("Encoding"),"UTF_16LE")]])],function k(){var F=k.$$s==null?this:k.$$s;return T(F,"$each_byte",function p(A){var P=p.$$p||S;p.$$p=null;for(var I=0,q=A.length;I<q;I++){var u=A.charCodeAt(I);n.yield1(P,u>>8),n.yield1(P,u&255)}})},{$$s:B}),x(j("Encoding"),"register",["UTF-32LE"],function k(){var F=k.$$s==null?this:k.$$s;return T(F,"$each_byte",function p(A){var P=p.$$p||S;p.$$p=null;for(var I=0,q=A.length;I<q;I++){var u=A.charCodeAt(I);n.yield1(P,u&255),n.yield1(P,u>>8),n.yield1(P,0),n.yield1(P,0)}}),T(F,"$bytesize",function(A){return A.length*4})},{$$s:B}),x(j("Encoding"),"register",["UTF-32BE",new Map([["inherits",j(j("Encoding"),"UTF_32LE")]])],function k(){var F=k.$$s==null?this:k.$$s;return T(F,"$each_byte",function p(A){var P=p.$$p||S;p.$$p=null;for(var I=0,q=A.length;I<q;I++){var u=A.charCodeAt(I);n.yield1(P,0),n.yield1(P,0),n.yield1(P,u>>8),n.yield1(P,u&255)}})},{$$s:B}),x(j("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function k(){var F=k.$$s==null?this:k.$$s;return T(F,"$each_char",function p(A){var P=p.$$p||S;p.$$p=null;for(var I=0,q=A.length;I<q;I++){var u=new String(A.charAt(I));u.encoding=A.encoding,n.yield1(P,u)}}),T(F,"$charsize",function(A){return A.length}),T(F,"$each_byte",function p(A){var P=p.$$p||S;p.$$p=null;for(var I=0,q=A.length;I<q;I++){var u=A.charCodeAt(I);n.yield1(P,u&255)}}),T(F,"$bytesize",function(A){return A.length}),T(F,"$binary?",v(!0))},{$$s:B}),j("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",j(j("Encoding"),"ASCII_8BIT")]])),j("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",j(j("Encoding"),"ASCII_8BIT")]])),function(k,F){var p=z(k,F,"String"),A=p.$$prototype;return A.internal_encoding=A.bytes=A.encoding=S,p.$attr_reader("encoding"),p.$attr_reader("internal_encoding"),n.prop(String.prototype,"bytes",S),n.prop(String.prototype,"encoding",j(j("Encoding"),"UTF_8")),n.prop(String.prototype,"internal_encoding",j(j("Encoding"),"UTF_8")),T(p,"$b",function(){var I=this;return I.$dup().$force_encoding("binary")}),T(p,"$bytesize",function(){var I=this;return I.internal_encoding.$bytesize(I)}),T(p,"$each_byte",function P(){var I=P.$$p||S,q=this;return P.$$p=null,I===S?x(q,"enum_for",["each_byte"],function u(){var d=u.$$s==null?this:u.$$s;return d.$bytesize()},{$$s:q}):(x(q.internal_encoding,"each_byte",[q],I.$to_proc()),q)}),T(p,"$bytes",function(){var I=this,q=S;return typeof I=="string"?new String(I).$each_byte().$to_a():(I.bytes=D(q=I.bytes)?q:I.$each_byte().$to_a(),I.bytes.$dup())}),T(p,"$each_char",function P(){var I=P.$$p||S,q=this;return P.$$p=null,I===S?x(q,"enum_for",["each_char"],function u(){var d=u.$$s==null?this:u.$$s;return d.$length()},{$$s:q}):(x(q.encoding,"each_char",[q],I.$to_proc()),q)}),T(p,"$chars",function P(){var I=P.$$p||S,q=this;return P.$$p=null,D(I)?x(q,"each_char",[],I.$to_proc()):q.$each_char().$to_a()}),T(p,"$each_codepoint",function P(){var I=P.$$p||S,q=this;if(P.$$p=null,I===S)return q.$enum_for("each_codepoint");for(var u=0,d=q.length;u<d;u++)n.yield1(I,q.codePointAt(u));return q}),T(p,"$codepoints",function P(){var I=P.$$p||S,q=this;return P.$$p=null,I!==S?x(q,"each_codepoint",[],I.$to_proc()):q.$each_codepoint().$to_a()}),T(p,"$encode",function(I){var q=this;return n.enc(q,I)}),T(p,"$force_encoding",function(I){var q=this,u=q;return I===u.encoding||(I=W["$coerce_to!"](I,j("String"),"to_s"),I=j("Encoding").$find(I),I===u.encoding)||(u=n.set_encoding(u,I)),u}),T(p,"$getbyte",function(I){var q=this,u=S;return u=q.$bytes(),I=W["$coerce_to!"](I,j("Integer"),"to_int"),D(Y(u.$length(),I))?S:u["$[]"](I)}),T(p,"$initialize_copy",function(I){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),T(p,"$valid_encoding?",v(!0))}("::",null),ee=[j(h("Encoding"),"UTF_8")],x(j("Encoding"),"default_external=",ee),ee[ee.length-1]};Opal.modules["corelib/math"]=function(n){var z=n.type_error,w=n.module,D=n.const_set,x=n.Class,O=n.slice,Z=n.Kernel,T=n.defs,J=n.truthy,v=n.send,L=n.def,$e=n.rb_minus,W=n.eqeqeq,Y=n.rb_divide,ee=[],B=n.nil,b=n.$$$;return n.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(h,S){var j=w(h,"Math"),k=[j].concat(S),F=n.$r(k);return D(j,"E",Math.E),D(j,"PI",Math.PI),D(j,"DomainError",x.$new(b("StandardError"))),T(j,"$checked",function(A,P){var I,q;if(I=O(arguments,1),q=I,isNaN(q[0])||q.length==2&&isNaN(q[1]))return NaN;var u=Math[A].apply(null,q);return isNaN(u)&&Z.$raise(F("DomainError"),'Numerical argument is out of domain - "'+A+'"'),u},-2),T(j,"$float!",function(A){try{return Z.$Float(A)}catch(P){if(n.rescue(P,[b("ArgumentError")]))try{return Z.$raise(z(A,b("Float")))}finally{n.pop_exception(P)}else throw P}}),T(j,"$integer!",function(A){try{return Z.$Integer(A)}catch(P){if(n.rescue(P,[b("ArgumentError")]))try{return Z.$raise(z(A,b("Integer")))}finally{n.pop_exception(P)}else throw P}}),j.$module_function(),J(typeof Math.erf<"u")||n.prop(Math,"erf",function(p){var A=.254829592,P=-.284496736,I=1.421413741,q=-1.453152027,u=1.061405429,d=.3275911,M=1;p<0&&(M=-1),p=Math.abs(p);var g=1/(1+d*p),c=1-((((u*g+q)*g+I)*g+P)*g+A)*g*Math.exp(-p*p);return M*c}),J(typeof Math.erfc<"u")||n.prop(Math,"erfc",function(p){var A=Math.abs(p),P=1/(.5*A+1),I=P*.17087277+-.82215223,q=P*I+1.48851587,u=P*q+-1.13520398,d=P*u+.27886807,M=P*d+-.18628806,g=P*M+.09678418,c=P*g+.37409196,l=P*c+1.00002368,E=P*l,G=-A*A-1.26551223+E,_=P*Math.exp(G);return p<0?2-_:_}),v(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function p(A){var P=p.$$s==null?this:p.$$s;return A==null&&(A=B),v(P,"define_method",[A],function(q){return q==null&&(q=B),b("Math").$checked(A,b("Math")["$float!"](q))})},{$$s:j}),L(j,"$atan2",function(A,P){return b("Math").$checked("atan2",b("Math")["$float!"](A),b("Math")["$float!"](P))}),L(j,"$hypot",function(A,P){return b("Math").$checked("hypot",b("Math")["$float!"](A),b("Math")["$float!"](P))}),L(j,"$frexp",function(A){if(A=F("Math")["$float!"](A),isNaN(A))return[NaN,0];var P=Math.floor(Math.log(Math.abs(A))/Math.log(2))+1,I=A/Math.pow(2,P);return[I,P]}),L(j,"$gamma",function(A){A=F("Math")["$float!"](A);var P,I,q,u,d,M,g,c,l,E=4.7421875,G=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(A))return NaN;if(A===0&&1/A<0)return-1/0;if((A===-1||A===-1/0)&&Z.$raise(F("DomainError"),'Numerical argument is out of domain - "gamma"'),F("Integer")["$==="](A)){if(A<=0)return isFinite(A)?1/0:NaN;if(A>171)return 1/0;for(u=A-2,d=A-1;u>1;)d*=u,u--;return d==0&&(d=1),d}if(A<.5)return Math.PI/(Math.sin(Math.PI*A)*b("Math").$gamma($e(1,A)));if(A>=171.35)return 1/0;if(A>85)return M=A*A,g=M*A,c=g*A,l=c*A,Math.sqrt(2*Math.PI/A)*Math.pow(A/Math.E,A)*(1+1/(12*A)+1/(288*M)-139/(51840*g)-571/(2488320*c)+163879/(209018880*l)+5246819/(75246796800*l*A));for(A-=1,q=G[0],P=1;P<G.length;++P)q+=G[P]/(A+P);return I=A+E+.5,Math.sqrt(2*Math.PI)*Math.pow(I,A+.5)*Math.exp(-I)*q}),L(j,"$ldexp",function(A,P){return A=F("Math")["$float!"](A),P=F("Math")["$integer!"](P),isNaN(P)&&Z.$raise(b("RangeError"),"float NaN out of range of integer"),A*Math.pow(2,P)}),L(j,"$lgamma",function(A){return A==-1?[1/0,1]:[Math.log(Math.abs(b("Math").$gamma(A))),b("Math").$gamma(A)<0?-1:1]}),L(j,"$log",function(A,P){return W(b("String"),A)&&Z.$raise(z(A,b("Float"))),J(P==null)?b("Math").$checked("log",b("Math")["$float!"](A)):(W(b("String"),P)&&Z.$raise(z(P,b("Float"))),Y(b("Math").$checked("log",b("Math")["$float!"](A)),b("Math").$checked("log",b("Math")["$float!"](P))))},-2),L(j,"$log10",function(A){return W(b("String"),A)&&Z.$raise(z(A,b("Float"))),b("Math").$checked("log10",b("Math")["$float!"](A))}),L(j,"$log2",function(A){return W(b("String"),A)&&Z.$raise(z(A,b("Float"))),b("Math").$checked("log2",b("Math")["$float!"](A))}),L(j,"$tan",function(A){return A=b("Math")["$float!"](A),J(A["$infinite?"]())?b(b("Float"),"NAN"):b("Math").$checked("tan",b("Math")["$float!"](A))})}("::",ee)};Opal.modules["corelib/complex/base"]=function(n){var z=n.module,w=n.truthy,D=n.def,x=n.klass,O=[],Z=n.nil;return n.add_stubs("new,from_string"),function(T,J){var v=z(T,"Kernel"),L=[v].concat(J),$e=n.$r(L);return D(v,"$Complex",function(Y,ee){return ee==null&&(ee=Z),w(ee)?$e("Complex").$new(Y,ee):$e("Complex").$new(Y,0)},-2)}("::",O),function(T,J,v){var L=x(T,J,"String"),$e=[L].concat(v),W=n.$r($e);return D(L,"$to_c",function(){var ee=this;return W("Complex").$from_string(ee)})}("::",null,O)};Opal.modules["corelib/complex"]=function(n){var z=n.klass,w=n.truthy,D=n.eqeqeq,x=n.Kernel,O=n.defs,Z=n.rb_times,T=n.def,J=n.rb_plus,v=n.rb_minus,L=n.rb_divide,$e=n.eqeq,W=n.to_ary,Y=n.rb_gt,ee=n.neqeq,B=n.return_val,b=n.const_set,h=n.alias,S=n.top,j=[],k=n.nil,F=n.$$$;return n.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),S.$require("corelib/numeric"),S.$require("corelib/complex/base"),function(p,A,P){var I=z(p,A,"Complex"),q=[I].concat(P),u=n.$r(q),d=I.$$prototype;return d.real=d.imag=k,O(I,"$rect",function(g,c){var l=this;return c==null&&(c=0),D(F("Numeric"),g)&&w(g["$real?"]())&&D(F("Numeric"),c)&&w(c["$real?"]())||x.$raise(F("TypeError"),"not a real"),l.$new(g,c)},-2),O(I,"$polar",function(g,c){var l=this;return c==null&&(c=0),D(F("Numeric"),g)&&w(g["$real?"]())&&D(F("Numeric"),c)&&w(c["$real?"]())||x.$raise(F("TypeError"),"not a real"),l.$new(Z(g,F("Math").$cos(c)),Z(g,F("Math").$sin(c)))},-2),I.$attr_reader("real","imag"),T(I,"$initialize",function(g,c){var l=this;return c==null&&(c=0),l.real=g,l.imag=c,l.$freeze()},-2),T(I,"$coerce",function(g){var c=this;return D(F("Complex"),g)?[g,c]:D(F("Numeric"),g)&&w(g["$real?"]())?[F("Complex").$new(g,0),c]:x.$raise(F("TypeError"),""+g.$class()+" can't be coerced into Complex")}),T(I,"$==",function(g){var c=this,l=k;return D(F("Complex"),g)?w(l=c.real["$=="](g.$real()))?c.imag["$=="](g.$imag()):l:D(F("Numeric"),g)&&w(g["$real?"]())?w(l=c.real["$=="](g))?c.imag["$=="](0):l:g["$=="](c)}),T(I,"$-@",function(){var g=this;return x.$Complex(g.real["$-@"](),g.imag["$-@"]())}),T(I,"$+",function(g){var c=this;return D(F("Complex"),g)?x.$Complex(J(c.real,g.$real()),J(c.imag,g.$imag())):D(F("Numeric"),g)&&w(g["$real?"]())?x.$Complex(J(c.real,g),c.imag):c.$__coerced__("+",g)}),T(I,"$-",function(g){var c=this;return D(F("Complex"),g)?x.$Complex(v(c.real,g.$real()),v(c.imag,g.$imag())):D(F("Numeric"),g)&&w(g["$real?"]())?x.$Complex(v(c.real,g),c.imag):c.$__coerced__("-",g)}),T(I,"$*",function(g){var c=this;return D(F("Complex"),g)?x.$Complex(v(Z(c.real,g.$real()),Z(c.imag,g.$imag())),J(Z(c.real,g.$imag()),Z(c.imag,g.$real()))):D(F("Numeric"),g)&&w(g["$real?"]())?x.$Complex(Z(c.real,g),Z(c.imag,g)):c.$__coerced__("*",g)}),T(I,"$/",function(g){var c=this;return D(F("Complex"),g)?D(F("Number"),c.real)&&w(c.real["$nan?"]())||D(F("Number"),c.imag)&&w(c.imag["$nan?"]())||D(F("Number"),g.$real())&&w(g.$real()["$nan?"]())||D(F("Number"),g.$imag())&&w(g.$imag()["$nan?"]())?F("Complex").$new(F(F("Float"),"NAN"),F(F("Float"),"NAN")):L(Z(c,g.$conj()),g.$abs2()):D(F("Numeric"),g)&&w(g["$real?"]())?x.$Complex(c.real.$quo(g),c.imag.$quo(g)):c.$__coerced__("/",g)}),T(I,"$**",function(g){var c,l,E=this,G=k,_=k,s=k,$=k,r=k,e=k,t=k,i=k,a=k,o=k,m=k;if($e(g,0))return F("Complex").$new(1,0);if(D(F("Complex"),g))return l=E.$polar(),c=W(l),G=c[0]==null?k:c[0],_=c[1]==null?k:c[1],s=g.$real(),$=g.$imag(),r=F("Math").$exp(v(Z(s,F("Math").$log(G)),Z($,_))),e=J(Z(_,s),Z($,F("Math").$log(G))),F("Complex").$polar(r,e);if(D(F("Integer"),g))if(w(Y(g,0))){for(t=E,i=t,a=v(g,1);ee(a,0);){for(l=a.$divmod(2),c=W(l),o=c[0]==null?k:c[0],m=c[1]==null?k:c[1];$e(m,0);)t=x.$Complex(v(Z(t.$real(),t.$real()),Z(t.$imag(),t.$imag())),Z(Z(2,t.$real()),t.$imag())),a=o,l=a.$divmod(2),c=W(l),o=c[0]==null?k:c[0],m=c[1]==null?k:c[1];i=Z(i,t),a=v(a,1)}return i}else return L(F("Rational").$new(1,1),E)["$**"](g["$-@"]());else return D(F("Float"),g)||D(F("Rational"),g)?(l=E.$polar(),c=W(l),G=c[0]==null?k:c[0],_=c[1]==null?k:c[1],F("Complex").$polar(G["$**"](g),Z(_,g))):E.$__coerced__("**",g)}),T(I,"$abs",function(){var g=this;return F("Math").$hypot(g.real,g.imag)}),T(I,"$abs2",function(){var g=this;return J(Z(g.real,g.real),Z(g.imag,g.imag))}),T(I,"$angle",function(){var g=this;return F("Math").$atan2(g.imag,g.real)}),T(I,"$conj",function(){var g=this;return x.$Complex(g.real,g.imag["$-@"]())}),T(I,"$denominator",function(){var g=this;return g.real.$denominator().$lcm(g.imag.$denominator())}),T(I,"$eql?",function(g){var c=this,l=k,E=k;return w(l=w(E=u("Complex")["$==="](g))?c.real.$class()["$=="](c.imag.$class()):E)?c["$=="](g):l}),T(I,"$fdiv",function(g){var c=this;return D(F("Numeric"),g)||x.$raise(F("TypeError"),""+g.$class()+" can't be coerced into Complex"),L(c,g)}),T(I,"$finite?",function(){var g=this,c=k;return w(c=g.real["$finite?"]())?g.imag["$finite?"]():c}),T(I,"$hash",function(){var g=this;return[F("Complex"),g.real,g.imag].$hash()}),T(I,"$infinite?",function(){var g=this,c=k;return w(c=g.real["$infinite?"]())?c:g.imag["$infinite?"]()}),T(I,"$inspect",function(){var g=this;return"("+g+")"}),T(I,"$numerator",function(){var g=this,c=k;return c=g.$denominator(),x.$Complex(Z(g.real.$numerator(),L(c,g.real.$denominator())),Z(g.imag.$numerator(),L(c,g.imag.$denominator())))}),T(I,"$polar",function(){var g=this;return[g.$abs(),g.$arg()]}),T(I,"$rationalize",function(g){var c=this;return arguments.length>1&&x.$raise(F("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),ee(c.imag,0)&&x.$raise(F("RangeError"),"can't convert "+c+" into Rational"),c.$real().$rationalize(g)},-1),T(I,"$real?",B(!1)),T(I,"$rect",function(){var g=this;return[g.real,g.imag]}),T(I,"$to_f",function(){var g=this;return $e(g.imag,0)||x.$raise(F("RangeError"),"can't convert "+g+" into Float"),g.real.$to_f()}),T(I,"$to_i",function(){var g=this;return $e(g.imag,0)||x.$raise(F("RangeError"),"can't convert "+g+" into Integer"),g.real.$to_i()}),T(I,"$to_r",function(){var g=this;return $e(g.imag,0)||x.$raise(F("RangeError"),"can't convert "+g+" into Rational"),g.real.$to_r()}),T(I,"$to_s",function(){var g=this,c=k;return c=g.real.$inspect(),c=J(c,D(F("Number"),g.imag)&&w(g.imag["$nan?"]())||w(g.imag["$positive?"]())||w(g.imag["$zero?"]())?"+":"-"),c=J(c,g.imag.$abs().$inspect()),D(F("Number"),g.imag)&&(w(g.imag["$nan?"]())||w(g.imag["$infinite?"]()))&&(c=J(c,"*")),J(c,"i")}),b(q[0],"I",I.$new(0,1)),O(I,"$from_string",function(g){var c=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;g.match(c);var l,E;function G(){return c.test(g)}function _(){var $=g.match(c),r=$[0];return g=g.slice(r.length),r.replace(/_/g,"")}function s(){if(G()){var $=parseFloat(_());if(g[0]==="/")if(g=g.slice(1),G()){var r=parseFloat(_());return x.$Rational($,r)}else return g="/"+g,$;else return $}else return null}return l=s(),l?(E=s(),E?x.$Complex(l,E):g[0]==="i"?x.$Complex(0,l):x.$Complex(l,0)):g[0]==="i"?x.$Complex(0,1):g[0]==="-"&&g[1]==="i"?x.$Complex(0,-1):g[0]==="+"&&g[1]==="i"?x.$Complex(0,1):x.$Complex(0,0)}),function(M,g){return h(M,"rectangular","rect")}(n.get_singleton_class(I)),h(I,"arg","angle"),h(I,"conjugate","conj"),h(I,"divide","/"),h(I,"imaginary","imag"),h(I,"magnitude","abs"),h(I,"phase","arg"),h(I,"quo","/"),h(I,"rectangular","rect"),n.udef(I,"$negative?"),n.udef(I,"$positive?"),n.udef(I,"$step"),k}("::",F("Numeric"),j)};Opal.modules["corelib/rational/base"]=function(n){var z=n.module,w=n.def,D=n.klass;n.nil;var x=n.$$$;return n.add_stubs("convert,from_string"),function(O){var Z=z(O,"Kernel");return w(Z,"$Rational",function(J,v){return v==null&&(v=1),x("Rational").$convert(J,v)},-2)}("::"),function(O,Z){var T=D(O,Z,"String");return w(T,"$to_r",function(){var v=this;return x("Rational").$from_string(v)})}("::",null)};Opal.modules["corelib/rational"]=function(n){var z=n.klass,w=n.eqeq,D=n.Kernel,x=n.truthy,O=n.rb_lt,Z=n.rb_divide,T=n.defs,J=n.eqeqeq,v=n.not,L=n.Opal,$e=n.def,W=n.return_ivar,Y=n.rb_minus,ee=n.rb_times,B=n.rb_plus,b=n.rb_gt,h=n.rb_le,S=n.return_self,j=n.alias,k=n.top,F=n.nil,p=n.$$$;return n.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),k.$require("corelib/numeric"),k.$require("corelib/rational/base"),function(A,P){var I=z(A,P,"Rational"),q=I.$$prototype;return q.num=q.den=F,T(I,"$reduce",function(d,M){var g=this,c=F;if(d=d.$to_i(),M=M.$to_i(),w(M,0))D.$raise(p("ZeroDivisionError"),"divided by 0");else if(x(O(M,0)))d=d["$-@"](),M=M["$-@"]();else if(w(M,1))return g.$new(d,M);return c=d.$gcd(M),g.$new(Z(d,c),Z(M,c))}),T(I,"$convert",function(d,M){var g=this;return(x(d["$nil?"]())||x(M["$nil?"]()))&&D.$raise(p("TypeError"),"cannot convert nil into Rational"),J(p("Integer"),d)&&J(p("Integer"),M)?g.$reduce(d,M):((J(p("Float"),d)||J(p("String"),d)||J(p("Complex"),d))&&(d=d.$to_r()),(J(p("Float"),M)||J(p("String"),M)||J(p("Complex"),M))&&(M=M.$to_r()),x(M["$equal?"](1))&&v(p("Integer")["$==="](d))?L["$coerce_to!"](d,p("Rational"),"to_r"):J(p("Numeric"),d)&&J(p("Numeric"),M)?Z(d,M):g.$reduce(d,M))}),$e(I,"$initialize",function(d,M){var g=this;return g.num=d,g.den=M,g.$freeze()}),$e(I,"$numerator",W("num")),$e(I,"$denominator",W("den")),$e(I,"$coerce",function(d){var M=this,g=F;return J(p("Rational"),g=d)?[d,M]:J(p("Integer"),g)?[d.$to_r(),M]:J(p("Float"),g)?[d,M.$to_f()]:F}),$e(I,"$==",function(d){var M=this,g=F,c=F;return J(p("Rational"),g=d)?x(c=M.num["$=="](d.$numerator()))?M.den["$=="](d.$denominator()):c:J(p("Integer"),g)?x(c=M.num["$=="](d))?M.den["$=="](1):c:J(p("Float"),g)?M.$to_f()["$=="](d):d["$=="](M)}),$e(I,"$<=>",function(d){var M=this,g=F;return J(p("Rational"),g=d)?Y(ee(M.num,d.$denominator()),ee(M.den,d.$numerator()))["$<=>"](0):J(p("Integer"),g)?Y(M.num,ee(M.den,d))["$<=>"](0):J(p("Float"),g)?M.$to_f()["$<=>"](d):M.$__coerced__("<=>",d)}),$e(I,"$+",function(d){var M=this,g=F,c=F,l=F;return J(p("Rational"),g=d)?(c=B(ee(M.num,d.$denominator()),ee(M.den,d.$numerator())),l=ee(M.den,d.$denominator()),D.$Rational(c,l)):J(p("Integer"),g)?D.$Rational(B(M.num,ee(d,M.den)),M.den):J(p("Float"),g)?B(M.$to_f(),d):M.$__coerced__("+",d)}),$e(I,"$-",function(d){var M=this,g=F,c=F,l=F;return J(p("Rational"),g=d)?(c=Y(ee(M.num,d.$denominator()),ee(M.den,d.$numerator())),l=ee(M.den,d.$denominator()),D.$Rational(c,l)):J(p("Integer"),g)?D.$Rational(Y(M.num,ee(d,M.den)),M.den):J(p("Float"),g)?Y(M.$to_f(),d):M.$__coerced__("-",d)}),$e(I,"$*",function(d){var M=this,g=F,c=F,l=F;return J(p("Rational"),g=d)?(c=ee(M.num,d.$numerator()),l=ee(M.den,d.$denominator()),D.$Rational(c,l)):J(p("Integer"),g)?D.$Rational(ee(M.num,d),M.den):J(p("Float"),g)?ee(M.$to_f(),d):M.$__coerced__("*",d)}),$e(I,"$/",function(d){var M=this,g=F,c=F,l=F;return J(p("Rational"),g=d)?(c=ee(M.num,d.$denominator()),l=ee(M.den,d.$numerator()),D.$Rational(c,l)):J(p("Integer"),g)?w(d,0)?Z(M.$to_f(),0):D.$Rational(M.num,ee(M.den,d)):J(p("Float"),g)?Z(M.$to_f(),d):M.$__coerced__("/",d)}),$e(I,"$**",function(d){var M=this,g=F;return J(p("Integer"),g=d)?w(M,0)&&x(O(d,0))?p(p("Float"),"INFINITY"):x(b(d,0))?D.$Rational(M.num["$**"](d),M.den["$**"](d)):x(O(d,0))?D.$Rational(M.den["$**"](d["$-@"]()),M.num["$**"](d["$-@"]())):D.$Rational(1,1):J(p("Float"),g)?M.$to_f()["$**"](d):J(p("Rational"),g)?w(d,0)?D.$Rational(1,1):w(d.$denominator(),1)?x(O(d,0))?D.$Rational(M.den["$**"](d.$numerator().$abs()),M.num["$**"](d.$numerator().$abs())):D.$Rational(M.num["$**"](d.$numerator()),M.den["$**"](d.$numerator())):w(M,0)&&x(O(d,0))?D.$raise(p("ZeroDivisionError"),"divided by 0"):M.$to_f()["$**"](d):M.$__coerced__("**",d)}),$e(I,"$abs",function(){var d=this;return D.$Rational(d.num.$abs(),d.den.$abs())}),$e(I,"$ceil",function(d){var M=this;return d==null&&(d=0),w(d,0)?Z(M.num["$-@"](),M.den)["$-@"]().$ceil():M.$with_precision("ceil",d)},-1),$e(I,"$floor",function(d){var M=this;return d==null&&(d=0),w(d,0)?Z(M.num["$-@"](),M.den)["$-@"]().$floor():M.$with_precision("floor",d)},-1),$e(I,"$hash",function(){var d=this;return[p("Rational"),d.num,d.den].$hash()}),$e(I,"$inspect",function(){var d=this;return"("+d+")"}),$e(I,"$rationalize",function(d){var M=this;if(arguments.length>1&&D.$raise(p("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),d==null)return M;for(var g=d.$abs(),c=Y(M,g),l=B(M,g),E=0,G=1,_=1,s=0,$,r,e,t,i;e=c.$ceil(),!h(e,l);)t=e-1,$=t*G+E,r=t*s+_,i=Z(1,Y(l,t)),l=Z(1,Y(c,t)),c=i,E=G,_=s,G=$,s=r;return D.$Rational(e*G+E,e*s+_)},-1),$e(I,"$round",function(d){var M=this,g=F,c=F,l=F;return d==null&&(d=0),w(d,0)?w(M.num,0)?0:w(M.den,1)?M.num:(g=B(ee(M.num.$abs(),2),M.den),c=ee(M.den,2),l=Z(g,c).$truncate(),x(O(M.num,0))?l["$-@"]():l):M.$with_precision("round",d)},-1),$e(I,"$to_f",function(){var d=this;return Z(d.num,d.den)}),$e(I,"$to_i",function(){var d=this;return d.$truncate()}),$e(I,"$to_r",S),$e(I,"$to_s",function(){var d=this;return""+d.num+"/"+d.den}),$e(I,"$truncate",function(d){var M=this;return d==null&&(d=0),w(d,0)?x(O(M.num,0))?M.$ceil():M.$floor():M.$with_precision("truncate",d)},-1),$e(I,"$with_precision",function(d,M){var g=this,c=F,l=F;return J(p("Integer"),M)||D.$raise(p("TypeError"),"not an Integer"),c=10["$**"](M),l=ee(g,c),x(O(M,1))?Z(l.$send(d),c).$to_i():D.$Rational(l.$send(d),c)}),T(I,"$from_string",function(d){var M=d.trimLeft(),g=/^[+-]?[\d_]+(\.[\d_]+)?/;M.match(g);var c,l;function E(){return g.test(M)}function G(){var _=M.match(g),s=_[0];return M=M.slice(s.length),s.replace(/_/g,"")}return E()?(c=parseFloat(G()),M[0]==="/"?(M=M.slice(1),E()?(l=parseFloat(G()),D.$Rational(c,l)):D.$Rational(c,1)):D.$Rational(c,1)):D.$Rational(0,1)}),j(I,"divide","/"),j(I,"quo","/")}("::",p("Numeric"))};Opal.modules["corelib/time"]=function(n){var z=n.slice,w=n.deny_frozen_access,D=n.klass,x=n.Kernel,O=n.Opal,Z=n.defs,T=n.eqeqeq,J=n.def,v=n.truthy,L=n.rb_gt,$e=n.rb_lt,W=n.send,Y=n.rb_plus,ee=n.rb_divide,B=n.rb_minus,b=n.range,h=n.neqeq,S=n.rb_le,j=n.eqeq,k=n.alias,F=n.top,p=[],A=n.nil,P=n.$$$;return n.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),F.$require("corelib/comparable"),function(I,q,u){var d=D(I,q,"Time"),M=[d].concat(u),g=n.$r(M);d.$include(P("Comparable"));var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],G=["January","February","March","April","May","June","July","August","September","October","November","December"];Z(d,"$at",function($,r){var e;return P("Time")["$==="]($)?(r!==void 0&&x.$raise(P("TypeError"),"can't convert Time into an exact number"),e=new Date($.getTime()),e.timezone=$.timezone,e):($.$$is_number||($=O["$coerce_to!"]($,P("Integer"),"to_int")),r===void 0?new Date($*1e3):(r.$$is_number||(r=O["$coerce_to!"](r,P("Integer"),"to_int")),new Date($*1e3+r/1e3)))},-2);function _(s,$,r,e,t,i){if(s.$$is_string?s=parseInt(s,10):s=O["$coerce_to!"](s,P("Integer"),"to_int"),$===A)$=1;else if(!$.$$is_number)if($["$respond_to?"]("to_str"))switch($=$.$to_str(),$.toLowerCase()){case"jan":$=1;break;case"feb":$=2;break;case"mar":$=3;break;case"apr":$=4;break;case"may":$=5;break;case"jun":$=6;break;case"jul":$=7;break;case"aug":$=8;break;case"sep":$=9;break;case"oct":$=10;break;case"nov":$=11;break;case"dec":$=12;break;default:$=$.$to_i()}else $=O["$coerce_to!"]($,P("Integer"),"to_int");return($<1||$>12)&&x.$raise(P("ArgumentError"),"month out of range: "+$),$=$-1,r===A?r=1:r.$$is_string?r=parseInt(r,10):r=O["$coerce_to!"](r,P("Integer"),"to_int"),(r<1||r>31)&&x.$raise(P("ArgumentError"),"day out of range: "+r),e===A?e=0:e.$$is_string?e=parseInt(e,10):e=O["$coerce_to!"](e,P("Integer"),"to_int"),(e<0||e>24)&&x.$raise(P("ArgumentError"),"hour out of range: "+e),t===A?t=0:t.$$is_string?t=parseInt(t,10):t=O["$coerce_to!"](t,P("Integer"),"to_int"),(t<0||t>59)&&x.$raise(P("ArgumentError"),"min out of range: "+t),i===A?i=0:i.$$is_number||(i.$$is_string?i=parseInt(i,10):i=O["$coerce_to!"](i,P("Integer"),"to_int")),(i<0||i>60)&&x.$raise(P("ArgumentError"),"sec out of range: "+i),[s,$,r,e,t,i]}return Z(d,"$new",function($,r,e,t,i,a,o){var m=this;r==null&&(r=A),e==null&&(e=A),t==null&&(t=A),i==null&&(i=A),a==null&&(a=A),o==null&&(o=A);var N,K,C,V;return $===void 0?new Date:(N=_($,r,e,t,i,a),$=N[0],r=N[1],e=N[2],t=N[3],i=N[4],a=N[5],o===A?(K=new Date($,r,e,t,i,0,a*1e3),$<100&&K.setFullYear($),K):(C=m.$_parse_offset(o),V=new Date(Date.UTC($,r,e,t,i,0,a*1e3)),$<100&&V.setUTCFullYear($),K=new Date(V.getTime()-C*36e5),K.timezone=C,K))},-1),Z(d,"$_parse_offset",function($){var r;if($.$$is_string)if($=="UTC")r=0;else if(/^[+-]\d\d:[0-5]\d$/.test($)){var e,t,i;e=$[0],t=+($[1]+$[2]),i=+($[4]+$[5]),r=(e=="-"?-1:1)*(t+i/60)}else x.$raise(P("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+$);else $.$$is_number?r=$/3600:x.$raise(P("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return r}),Z(d,"$local",function($,r,e,t,i,a,o,m,N,K){r==null&&(r=A),e==null&&(e=A),t==null&&(t=A),i==null&&(i=A),a==null&&(a=A),o==null&&(o=A),m==null&&(m=A),N==null&&(N=A),K==null&&(K=A);var C,V;return arguments.length===10&&(C=z(arguments),$=C[5],r=C[4],e=C[3],t=C[2],i=C[1],a=C[0]),C=_($,r,e,t,i,a),$=C[0],r=C[1],e=C[2],t=C[3],i=C[4],a=C[5],V=new Date($,r,e,t,i,0,a*1e3),$<100&&V.setFullYear($),V},-2),Z(d,"$gm",function($,r,e,t,i,a,o,m,N,K){r==null&&(r=A),e==null&&(e=A),t==null&&(t=A),i==null&&(i=A),a==null&&(a=A),o==null&&(o=A),m==null&&(m=A),N==null&&(N=A),K==null&&(K=A);var C,V;return arguments.length===10&&(C=z(arguments),$=C[5],r=C[4],e=C[3],t=C[2],i=C[1],a=C[0]),C=_($,r,e,t,i,a),$=C[0],r=C[1],e=C[2],t=C[3],i=C[4],a=C[5],V=new Date(Date.UTC($,r,e,t,i,0,a*1e3)),$<100&&V.setUTCFullYear($),V.timezone=0,V},-2),Z(d,"$now",function(){var $=this;return $.$new()}),J(d,"$+",function($){var r=this;T(P("Time"),$)&&x.$raise(P("TypeError"),"time + time?"),$.$$is_number||($=O["$coerce_to!"]($,P("Integer"),"to_int"));var e=new Date(r.getTime()+$*1e3);return e.timezone=r.timezone,e}),J(d,"$-",function($){var r=this;if(T(P("Time"),$))return(r.getTime()-$.getTime())/1e3;$.$$is_number||($=O["$coerce_to!"]($,P("Integer"),"to_int"));var e=new Date(r.getTime()-$*1e3);return e.timezone=r.timezone,e}),J(d,"$<=>",function($){var r=this,e=A;return T(P("Time"),$)?r.$to_f()["$<=>"]($.$to_f()):(e=$["$<=>"](r),v(e["$nil?"]())?A:v(L(e,0))?-1:v($e(e,0))?1:0)}),J(d,"$==",function($){var r=this,e=A;return v(e=P("Time")["$==="]($))?r.$to_f()===$.$to_f():e}),J(d,"$asctime",function(){var $=this;return $.$strftime("%a %b %e %H:%M:%S %Y")}),W([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function s($,r,e,t){var i=s.$$s==null?this:s.$$s;return $==null&&($=A),r==null&&(r=A),e==null&&(e=A),t==null&&(t=0),W(i,"define_method",[$],function a(){var o=a.$$s==null?this:a.$$s;return t+(o.timezone!=null?new Date(o.getTime()+o.timezone*36e5)[e]():o[r]())},{$$s:i})},{$$arity:-4,$$s:d}),J(d,"$yday",function(){var $=this,r=A,e=A,t=A;return r=g("Time").$new($.$year()).$to_i(),e=g("Time").$new($.$year(),$.$month(),$.$day()).$to_i(),t=86400,Y(ee(B(e,r),t).$round(),1)}),J(d,"$isdst",function(){var $=this,r=new Date($.getFullYear(),0,1),e=new Date($.getFullYear(),6,1);return $.getTimezoneOffset()<Math.max(r.getTimezoneOffset(),e.getTimezoneOffset())}),J(d,"$dup",function(){var $=this,r=A;return r=new Date($.getTime()),r.$copy_instance_variables($),r.$initialize_dup($),r}),J(d,"$eql?",function($){var r=this,e=A;return v(e=$["$is_a?"](P("Time")))?r["$<=>"]($)["$zero?"]():e}),W([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function s($,r){var e=s.$$s==null?this:s.$$s;return $==null&&($=A),r==null&&(r=A),W(e,"define_method",[$],function t(){var i=t.$$s==null?this:t.$$s;return i.$wday()===r},{$$s:e})},{$$s:d}),J(d,"$hash",function(){var $=this;return[P("Time"),$.getTime()].$hash()}),J(d,"$inspect",function(){var $=this;return v($["$utc?"]())?$.$strftime("%Y-%m-%d %H:%M:%S UTC"):$.$strftime("%Y-%m-%d %H:%M:%S %z")}),J(d,"$succ",function(){var $=this,r=new Date($.getTime()+1e3);return r.timezone=$.timezone,r}),J(d,"$usec",function(){var $=this;return $.getMilliseconds()*1e3}),J(d,"$zone",function(){var $=this;if($.timezone===0)return"UTC";if($.timezone!=null)return A;var r=$.toString(),e;return r.indexOf("(")==-1?e=r.match(/[A-Z]{3,4}/)[0]:e=r.match(/\((.+)\)(?:\s|$)/)[1],e=="GMT"&&/(GMT\W*\d{4})/.test(r)?RegExp.$1:e}),J(d,"$getgm",function(){var $=this,r=new Date($.getTime());return r.timezone=0,r}),J(d,"$gmtime",function(){var $=this;return $.timezone!==0&&(w($),$.timezone=0),$}),J(d,"$gmt?",function(){var $=this;return $.timezone===0}),J(d,"$gmt_offset",function(){var $=this;return $.timezone!=null?$.timezone*60:-$.getTimezoneOffset()*60}),J(d,"$strftime",function($){var r=this;return $.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,t,i,a,o){var m="",N,K,C,V=t.indexOf("0")!==-1,re=t.indexOf("-")===-1,ae=t.indexOf("_")!==-1,le=t.indexOf("^")!==-1,_e=t.indexOf("#")!==-1,de=(t.match(":")||[]).length;switch(i=parseInt(i,10),V&&ae&&(t.indexOf("0")<t.indexOf("_")?V=!1:ae=!1),o){case"Y":m+=r.$year();break;case"C":V=!ae,m+=Math.round(r.$year()/100);break;case"y":V=!ae,m+=r.$year()%100;break;case"m":V=!ae,m+=r.$mon();break;case"B":m+=G[r.$mon()-1];break;case"b":case"h":ae=!V,m+=E[r.$mon()-1];break;case"d":V=!ae,m+=r.$day();break;case"e":ae=!V,m+=r.$day();break;case"j":V=!ae,i=isNaN(i)?3:i,m+=r.$yday();break;case"H":V=!ae,m+=r.$hour();break;case"k":ae=!V,m+=r.$hour();break;case"I":V=!ae,m+=r.$hour()%12||12;break;case"l":ae=!V,m+=r.$hour()%12||12;break;case"P":m+=r.$hour()>=12?"pm":"am";break;case"p":m+=r.$hour()>=12?"PM":"AM";break;case"M":V=!ae,m+=r.$min();break;case"S":V=!ae,m+=r.$sec();break;case"L":V=!ae,i=isNaN(i)?3:i,m+=r.getMilliseconds();break;case"N":i=isNaN(i)?9:i,m+=r.getMilliseconds().toString().$rjust(3,"0"),m=m.$ljust(i,"0");break;case"z":var ge=r.timezone==null?r.getTimezoneOffset():-r.timezone*60,ve=Math.floor(Math.abs(ge)/60),me=Math.abs(ge)%60;m+=ge<0?"+":"-",m+=ve<10?"0":"",m+=ve,de>0&&(m+=":"),m+=me<10?"0":"",m+=me,de>1&&(m+=":00");break;case"Z":m+=r.$zone();break;case"A":m+=c[r.$wday()];break;case"a":m+=l[r.$wday()];break;case"u":m+=r.$wday()+1;break;case"w":m+=r.$wday();break;case"V":m+=r.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":m+=r.$cweek_cyear()["$[]"](1);break;case"g":m+=r.$cweek_cyear()["$[]"](1)["$[]"](b(-2,-1,!1));break;case"s":m+=r.$to_i();break;case"n":m+=`
`;break;case"t":m+="	";break;case"%":m+="%";break;case"c":m+=r.$strftime("%a %b %e %T %Y");break;case"D":case"x":m+=r.$strftime("%m/%d/%y");break;case"F":m+=r.$strftime("%Y-%m-%d");break;case"v":m+=r.$strftime("%e-%^b-%4Y");break;case"r":m+=r.$strftime("%I:%M:%S %p");break;case"R":m+=r.$strftime("%H:%M");break;case"T":case"X":m+=r.$strftime("%H:%M:%S");break;case"J":if(N=r.$to_date().$jd(),N<2405160){m+=r.$strftime("%Y-%m-%d");break}else N<2419614?(K="M",C=1867):N<2424875?(K="T",C=1911):N<2447535?(K="S",C=1925):N<2458605?(K="H",C=1988):(K="R",C=2018);m+=r.$format("%c%02d",K,B(r.$year(),C)),m+=r.$strftime("-%m-%d");break;default:return e}return le&&(m=m.toUpperCase()),_e&&(m=m.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),re&&(V||ae)&&(m=m.$rjust(isNaN(i)?2:i,ae?" ":"0")),m})}),J(d,"$to_a",function(){var $=this;return[$.$sec(),$.$min(),$.$hour(),$.$day(),$.$month(),$.$year(),$.$wday(),$.$yday(),$.$isdst(),$.$zone()]}),J(d,"$to_f",function(){var $=this;return $.getTime()/1e3}),J(d,"$to_i",function(){var $=this;return parseInt($.getTime()/1e3,10)}),J(d,"$cweek_cyear",function(){var $=this,r=A,e=A,t=A,i=A,a=A,o=A,m=A;return r=P("Time").$new($.$year(),1,1),e=r.$wday(),t=$.$year(),v(S(e,4))&&h(e,0)?i=B(e,1):(i=B(B(e,7),1),j(i,-8)&&(i=-1)),a=ee(Y($.$yday(),i),7).$ceil(),v(S(a,0))?P("Time").$new(B($.$year(),1),12,31).$cweek_cyear():(j(a,53)&&(o=P("Time").$new($.$year(),12,31),m=o.$wday(),v(S(m,3))&&h(m,0)&&(a=1,t=Y(t,1))),[a,t])}),function(s,$){return k(s,"mktime","local"),k(s,"utc","gm")}(n.get_singleton_class(d)),k(d,"ctime","asctime"),k(d,"dst?","isdst"),k(d,"getutc","getgm"),k(d,"gmtoff","gmt_offset"),k(d,"mday","day"),k(d,"month","mon"),k(d,"to_s","inspect"),k(d,"tv_sec","to_i"),k(d,"tv_usec","usec"),k(d,"utc","gmtime"),k(d,"utc?","gmt?"),k(d,"utc_offset","gmt_offset")}("::",Date,p)};Opal.modules["corelib/struct"]=function(n){var z=n.klass,w=n.slice,D=n.extract_kwargs,x=n.ensure_kwargs,O=n.hash_get,Z=n.truthy,T=n.neqeq,J=n.eqeq,v=n.Opal,L=n.send,$e=n.Class,W=n.to_a,Y=n.def,ee=n.defs,B=n.Kernel,b=n.rb_gt,h=n.rb_minus,S=n.eqeqeq,j=n.rb_lt,k=n.rb_ge,F=n.rb_plus,p=n.alias,A=n.top,P=[],I=n.nil,q=n.$$$;return n.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),A.$require("corelib/enumerable"),function(u,d,M){var g=z(u,d,"Struct"),c=[g].concat(M),l=n.$r(c);g.$include(q("Enumerable")),ee(g,"$new",function G(_,s,$){var r=G.$$p||I,e,t,i,a,o=this,m=I;if(G.$$p=null,e=w(arguments,1),t=D(e),t=x(t),i=e,a=O(t,"keyword_init"),a==null&&(a=!1),Z(_))if(J(_.$class(),q("String"))&&T(_["$[]"](0).$upcase(),_["$[]"](0)))i.$unshift(_),_=I;else try{_=v["$const_name!"](_)}catch(N){if(n.rescue(N,[q("TypeError"),q("NameError")]))try{i.$unshift(_),_=I}finally{n.pop_exception(N)}else throw N}return L(i,"map",[],function(K){return K==null&&(K=I),v["$coerce_to!"](K,q("String"),"to_str")}),m=L($e,"new",[o],function N(){var K=N.$$s==null?this:N.$$s;return L(i,"each",[],function C(V){var re=C.$$s==null?this:C.$$s;return V==null&&(V=I),re.$define_struct_attribute(V)},{$$s:K}),function(C,V){return Y(C,"$new",function(ae){var le,_e,de=this,ge=I;return le=w(arguments),_e=le,ge=de.$allocate(),ge.$$data={},L(ge,"initialize",W(_e)),ge},-1),C.$alias_method("[]","new")}(n.get_singleton_class(K))},{$$s:o}),Z(r)&&L(m,"module_eval",[],r.$to_proc()),m.$$keyword_init=a,Z(_)&&q("Struct").$const_set(_,m),m},-2),ee(g,"$define_struct_attribute",function(_){var s=this;return J(s,q("Struct"))&&B.$raise(q("ArgumentError"),"you cannot define attributes to the Struct class"),s.$members()["$<<"](_),L(s,"define_method",[_],function $(){var r=$.$$s==null?this:$.$$s;return r.$$data[_]},{$$s:s}),L(s,"define_method",[""+_+"="],function $(r){var e=$.$$s==null?this:$.$$s;return r==null&&(r=I),e.$$data[_]=r},{$$s:s})}),ee(g,"$members",function(){var _=this,s=I;return _.members==null&&(_.members=I),J(_,q("Struct"))&&B.$raise(q("ArgumentError"),"the Struct class has no members"),_.members=Z(s=_.members)?s:[]}),ee(g,"$inherited",function(_){var s=this,$=I;return s.members==null&&(s.members=I),$=s.members,L(_,"instance_eval",[],function r(){var e=r.$$s==null?this:r.$$s;return e.members=$},{$$s:s})}),Y(g,"$initialize",function(_){var s,$,r=this,e=I,t=I,i=I;return s=w(arguments),$=s,Z(r.$class().$$keyword_init)?(e=Z(t=$.$last())?t:new Map,(Z(b($.$length(),1))||Z($.length===1&&!e.$$is_hash))&&B.$raise(q("ArgumentError"),"wrong number of arguments (given "+$.$length()+", expected 0)"),i=h(e.$keys(),r.$class().$members()),Z(i["$any?"]())&&B.$raise(q("ArgumentError"),"unknown keywords: "+i.$join(", ")),L(r.$class().$members(),"each",[],function a(o){var m,N=a.$$s==null?this:a.$$s;return o==null&&(o=I),m=[o,e["$[]"](o)],L(N,"[]=",m),m[m.length-1]},{$$s:r})):(Z(b($.$length(),r.$class().$members().$length()))&&B.$raise(q("ArgumentError"),"struct size differs"),L(r.$class().$members(),"each_with_index",[],function a(o,m){var N,K=a.$$s==null?this:a.$$s;return o==null&&(o=I),m==null&&(m=I),N=[o,$["$[]"](m)],L(K,"[]=",N),N[N.length-1]},{$$s:r}))},-1),Y(g,"$initialize_copy",function(_){var s=this;s.$$data={};var $=Object.keys(_.$$data),r,e,t;for(r=0,e=$.length;r<e;r++)t=$[r],s.$$data[t]=_.$$data[t]}),ee(g,"$keyword_init?",function(){var _=this;return _.$$keyword_init}),Y(g,"$members",function(){var _=this;return _.$class().$members()}),Y(g,"$hash",function(){var _=this;return[_.$class(),_.$to_a()].$hash()}),Y(g,"$[]",function(_){var s=this;return S(q("Integer"),_)?(Z(j(_,s.$class().$members().$size()["$-@"]()))&&B.$raise(q("IndexError"),"offset "+_+" too small for struct(size:"+s.$class().$members().$size()+")"),Z(k(_,s.$class().$members().$size()))&&B.$raise(q("IndexError"),"offset "+_+" too large for struct(size:"+s.$class().$members().$size()+")"),_=s.$class().$members()["$[]"](_)):S(q("String"),_)?s.$$data.hasOwnProperty(_)||B.$raise(q("NameError").$new("no member '"+_+"' in struct",_)):B.$raise(q("TypeError"),"no implicit conversion of "+_.$class()+" into Integer"),_=v["$coerce_to!"](_,q("String"),"to_str"),s.$$data[_]}),Y(g,"$[]=",function(_,s){var $=this;return S(q("Integer"),_)?(Z(j(_,$.$class().$members().$size()["$-@"]()))&&B.$raise(q("IndexError"),"offset "+_+" too small for struct(size:"+$.$class().$members().$size()+")"),Z(k(_,$.$class().$members().$size()))&&B.$raise(q("IndexError"),"offset "+_+" too large for struct(size:"+$.$class().$members().$size()+")"),_=$.$class().$members()["$[]"](_)):S(q("String"),_)?Z($.$class().$members()["$include?"](_.$to_sym()))||B.$raise(q("NameError").$new("no member '"+_+"' in struct",_)):B.$raise(q("TypeError"),"no implicit conversion of "+_.$class()+" into Integer"),_=v["$coerce_to!"](_,q("String"),"to_str"),$.$$data[_]=s}),Y(g,"$==",function(_){var s=this;if(!Z(_["$instance_of?"](s.$class())))return!1;var $={},r={};function e(t,i){var a,o,m;$[t.$__id__()]=!0,r[i.$__id__()]=!0;for(a in t.$$data)if(o=t.$$data[a],m=i.$$data[a],q("Struct")["$==="](o)){if((!$.hasOwnProperty(o.$__id__())||!r.hasOwnProperty(m.$__id__()))&&!e(o,m))return!1}else if(!o["$=="](m))return!1;return!0}return e(s,_)}),Y(g,"$eql?",function(_){var s=this;if(!Z(_["$instance_of?"](s.$class())))return!1;var $={},r={};function e(t,i){var a,o,m;$[t.$__id__()]=!0,r[i.$__id__()]=!0;for(a in t.$$data)if(o=t.$$data[a],m=i.$$data[a],q("Struct")["$==="](o)){if((!$.hasOwnProperty(o.$__id__())||!r.hasOwnProperty(m.$__id__()))&&!e(o,m))return!1}else if(!o["$eql?"](m))return!1;return!0}return e(s,_)}),Y(g,"$each",function G(){var _=G.$$p||I,s=this;return G.$$p=null,_===I?L(s,"enum_for",["each"],function $(){var r=$.$$s==null?this:$.$$s;return r.$size()},{$$s:s}):(L(s.$class().$members(),"each",[],function $(r){var e=$.$$s==null?this:$.$$s;return r==null&&(r=I),n.yield1(_,e["$[]"](r))},{$$s:s}),s)}),Y(g,"$each_pair",function G(){var _=G.$$p||I,s=this;return G.$$p=null,_===I?L(s,"enum_for",["each_pair"],function $(){var r=$.$$s==null?this:$.$$s;return r.$size()},{$$s:s}):(L(s.$class().$members(),"each",[],function $(r){var e=$.$$s==null?this:$.$$s;return r==null&&(r=I),n.yield1(_,[r,e["$[]"](r)])},{$$s:s}),s)}),Y(g,"$length",function(){var _=this;return _.$class().$members().$length()}),Y(g,"$to_a",function(){var _=this;return L(_.$class().$members(),"map",[],function s($){var r=s.$$s==null?this:s.$$s;return $==null&&($=I),r["$[]"]($)},{$$s:_})});var E=[];return Y(g,"$inspect",function(){var _=this,s=I,$=I;return function(){try{return s="#<struct ",Z(E["$include?"](_.$__id__()))?F(s,":...>"):(E["$<<"](_.$__id__()),$=!0,S(q("Struct"),_)&&Z(_.$class().$name())&&(s=F(s,""+_.$class()+" ")),s=F(s,L(_.$each_pair(),"map",[],function(e,t){return e==null&&(e=I),t==null&&(t=I),""+e+"="+l("Opal").$inspect(t)}).$join(", ")),s=F(s,">"),s)}finally{Z($)&&E.pop()}}()}),Y(g,"$to_h",function G(_){var s=G.$$p||I,$,r,e=this;return G.$$p=null,$=w(arguments),r=$,s!==I?L(L(e,"map",[],s.$to_proc()),"to_h",W(r)):L(e.$class().$members(),"each_with_object",[new Map],function t(i,a){var o,m=t.$$s==null?this:t.$$s;return i==null&&(i=I),a==null&&(a=I),o=[i,m["$[]"](i)],L(a,"[]=",o),o[o.length-1]},{$$s:e})},-1),Y(g,"$values_at",function(_){var s,$,r=this;s=w(arguments),$=s,$=L($,"map",[],function(o){return o==null&&(o=I),o.$$is_range?o.$to_a():o}).$flatten();for(var e=[],t=0,i=$.length;t<i;t++)$[t].$$is_number||B.$raise(q("TypeError"),"no implicit conversion of "+$[t].$class()+" into Integer"),e.push(r["$[]"]($[t]));return e},-1),Y(g,"$dig",function(_,s){var $,r,e=this,t=I;return $=w(arguments,1),r=$,t=Z(_.$$is_string&&e.$$data.hasOwnProperty(_))&&e.$$data[_]||I,t===I||r.length===0?t:(Z(t["$respond_to?"]("dig"))||B.$raise(q("TypeError"),""+t.$class()+" does not have #dig method"),L(t,"dig",W(r)))},-2),p(g,"size","length"),p(g,"to_s","inspect"),p(g,"values","to_a")}("::",null,P)};Opal.modules["corelib/set"]=function(n){var z=n.freeze,w=n.klass,D=n.slice,x=n.defs,O=n.truthy,Z=n.eqeqeq,T=n.Kernel,J=n.send,v=n.def,L=n.eqeq,$e=n.rb_lt,W=n.rb_le,Y=n.alias,ee=[],B=n.nil,b=n.$$$;return n.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(h,S,j){var k=w(h,S,"Set"),F=[k].concat(j),p=n.$r(F),A=B,P=k.$$prototype;P.hash=B,k.$include(b("Enumerable")),x(k,"$[]",function(u){var d,M,g=this;return d=D(arguments),M=d,g.$new(M)},-1),v(k,"$initialize",function q(u){var d=q.$$p||B,M=this;return q.$$p=null,u==null&&(u=B),M.hash=new Map,O(u["$nil?"]())?B:(Z(b("Enumerable"),u)||T.$raise(b("ArgumentError"),"value must be enumerable"),O(d)?J(u,"each",[],function g(c){var l=g.$$s==null?this:g.$$s;return c==null&&(c=B),l.$add(n.yield1(d,c))},{$$s:M}):M.$merge(u))},-1),v(k,"$dup",function(){var u=this,d=B;return d=u.$class().$new(),d.$merge(u)}),v(k,"$-",function(u){var d=this;return O(u["$respond_to?"]("each"))||T.$raise(b("ArgumentError"),"value must be enumerable"),d.$dup().$subtract(u)}),v(k,"$inspect",function(){var u=this;return"#<Set: {"+u.$to_a().$join(",")+"}>"}),v(k,"$==",function(u){var d=this;return O(d["$equal?"](u))?!0:O(u["$instance_of?"](d.$class()))?d.hash["$=="](u.$instance_variable_get("@hash")):O(u["$is_a?"](b("Set")))&&L(d.$size(),u.$size())?J(u,"all?",[],function M(g){var c=M.$$s==null?this:M.$$s;return c.hash==null&&(c.hash=B),g==null&&(g=B),c.hash["$include?"](g)},{$$s:d}):!1}),v(k,"$add",function(u){var d=this;return d.hash["$[]="](u,!0),d}),v(k,"$classify",function q(){var u=q.$$p||B,d=this,M=B;return q.$$p=null,u===B?d.$enum_for("classify"):(M=J(b("Hash"),"new",[],function g(c,l){var E,G=g.$$s==null?this:g.$$s;return c==null&&(c=B),l==null&&(l=B),E=[l,G.$class().$new()],J(c,"[]=",E),E[E.length-1]},{$$s:d}),J(d,"each",[],function(c){return c==null&&(c=B),M["$[]"](n.yield1(u,c)).$add(c)}),M)}),v(k,"$collect!",function q(){var u=q.$$p||B,d=this,M=B;return q.$$p=null,u===B?d.$enum_for("collect!"):(M=d.$class().$new(),J(d,"each",[],function(c){return c==null&&(c=B),M["$<<"](n.yield1(u,c))}),d.$replace(M))}),v(k,"$compare_by_identity",function(){var u=this;return O(u.hash["$respond_to?"]("compare_by_identity"))?(u.hash.$compare_by_identity(),u):u.$raise(p("NotImplementedError"),""+u.$class().$name()+"#compare_by_identity is not implemented")}),v(k,"$compare_by_identity?",function(){var u=this,d=B;return O(d=u.hash["$respond_to?"]("compare_by_identity?"))?u.hash["$compare_by_identity?"]():d}),v(k,"$delete",function(u){var d=this;return d.hash.$delete(u),d}),v(k,"$delete?",function(u){var d=this;return O(d["$include?"](u))?(d.$delete(u),d):B}),v(k,"$delete_if",function q(){var u=q.$$p||B,d=this;return q.$$p=null,u===B?d.$enum_for("delete_if"):(J(J(d,"select",[],function(g){return g==null&&(g=B),n.yield1(u,g)}),"each",[],function M(g){var c=M.$$s==null?this:M.$$s;return c.hash==null&&(c.hash=B),g==null&&(g=B),c.hash.$delete(g)},{$$s:d}),d)}),v(k,"$freeze",function(){var u=this;return O(u["$frozen?"]())?u:(u.hash.$freeze(),z(u))}),v(k,"$keep_if",function q(){var u=q.$$p||B,d=this;return q.$$p=null,u===B?d.$enum_for("keep_if"):(J(J(d,"reject",[],function(g){return g==null&&(g=B),n.yield1(u,g)}),"each",[],function M(g){var c=M.$$s==null?this:M.$$s;return c.hash==null&&(c.hash=B),g==null&&(g=B),c.hash.$delete(g)},{$$s:d}),d)}),v(k,"$reject!",function q(){var u=q.$$p||B,d=this,M=B;return q.$$p=null,u===B?d.$enum_for("reject!"):(M=d.$size(),J(d,"delete_if",[],u.$to_proc()),L(d.$size(),M)?B:d)}),v(k,"$select!",function q(){var u=q.$$p||B,d=this,M=B;return q.$$p=null,u===B?d.$enum_for("select!"):(M=d.$size(),J(d,"keep_if",[],u.$to_proc()),L(d.$size(),M)?B:d)}),v(k,"$add?",function(u){var d=this;return O(d["$include?"](u))?B:d.$add(u)}),v(k,"$each",function q(){var u=q.$$p||B,d=this;return q.$$p=null,u===B?d.$enum_for("each"):(J(d.hash,"each_key",[],u.$to_proc()),d)}),v(k,"$empty?",function(){var u=this;return u.hash["$empty?"]()}),v(k,"$eql?",function(u){var d=this;return d.hash["$eql?"](J(u,"instance_eval",[],function M(){var g=M.$$s==null?this:M.$$s;return g.hash==null&&(g.hash=B),g.hash},{$$s:d}))}),v(k,"$clear",function(){var u=this;return u.hash.$clear(),u}),v(k,"$include?",function(u){var d=this;return d.hash["$include?"](u)}),v(k,"$merge",function(u){var d=this;return J(u,"each",[],function M(g){var c=M.$$s==null?this:M.$$s;return g==null&&(g=B),c.$add(g)},{$$s:d}),d}),v(k,"$replace",function(u){var d=this;return d.$clear(),d.$merge(u),d}),v(k,"$size",function(){var u=this;return u.hash.$size()}),v(k,"$subtract",function(u){var d=this;return J(u,"each",[],function M(g){var c=M.$$s==null?this:M.$$s;return g==null&&(g=B),c.$delete(g)},{$$s:d}),d}),v(k,"$|",function(u){var d=this;return O(u["$respond_to?"]("each"))||T.$raise(b("ArgumentError"),"value must be enumerable"),d.$dup().$merge(u)});function I(q){O(A=q["$is_a?"](b("Set")))||T.$raise(b("ArgumentError"),"value must be a set")}return v(k,"$superset?",function(u){var d=this;return I(u),O($e(d.$size(),u.$size()))?!1:J(u,"all?",[],function M(g){var c=M.$$s==null?this:M.$$s;return g==null&&(g=B),c["$include?"](g)},{$$s:d})}),v(k,"$proper_superset?",function(u){var d=this;return I(u),O(W(d.$size(),u.$size()))?!1:J(u,"all?",[],function M(g){var c=M.$$s==null?this:M.$$s;return g==null&&(g=B),c["$include?"](g)},{$$s:d})}),v(k,"$subset?",function(u){var d=this;return I(u),O($e(u.$size(),d.$size()))?!1:J(d,"all?",[],function(g){return g==null&&(g=B),u["$include?"](g)})}),v(k,"$proper_subset?",function(u){var d=this;return I(u),O(W(u.$size(),d.$size()))?!1:J(d,"all?",[],function(g){return g==null&&(g=B),u["$include?"](g)})}),v(k,"$intersect?",function(u){var d=this;return I(u),O($e(d.$size(),u.$size()))?J(d,"any?",[],function(g){return g==null&&(g=B),u["$include?"](g)}):J(u,"any?",[],function M(g){var c=M.$$s==null?this:M.$$s;return g==null&&(g=B),c["$include?"](g)},{$$s:d})}),v(k,"$disjoint?",function(u){var d=this;return d["$intersect?"](u)["$!"]()}),v(k,"$to_a",function(){var u=this;return u.hash.$keys()}),Y(k,"+","|"),Y(k,"<","proper_subset?"),Y(k,"<<","add"),Y(k,"<=","subset?"),Y(k,">","proper_superset?"),Y(k,">=","superset?"),Y(k,"difference","-"),Y(k,"filter!","select!"),Y(k,"length","size"),Y(k,"map!","collect!"),Y(k,"member?","include?"),Y(k,"union","|")}("::",null,ee)};Opal.modules["corelib/dir"]=function(n){var z=n.klass,w=n.def,D=n.truthy,x=n.alias,O=n.nil,Z=n.$$$;return n.add_stubs("[],pwd"),function(T,J,v){var L=z(T,J,"Dir");return function($e,W){return w($e,"$chdir",function Y(ee){var B=Y.$$p||O,b=O;return Y.$$p=null,function(){try{return b=n.current_dir,n.current_dir=ee,n.yieldX(B,[])}finally{n.current_dir=b}}()}),w($e,"$pwd",function(){return n.current_dir||"."}),w($e,"$home",function(){var ee=O;return D(ee=Z("ENV")["$[]"]("HOME"))?ee:"."}),x($e,"getwd","pwd")}(n.get_singleton_class(L))}("::",null)};Opal.modules["corelib/file"]=function(n){var z=n.truthy,w=n.klass,D=n.const_set,x=n.Opal,O=n.regexp,Z=n.rb_plus,T=n.def,J=n.Kernel,v=n.eqeq,L=n.rb_lt,$e=n.rb_minus,W=n.range,Y=n.send,ee=n.slice,B=n.alias,b=[],h=n.nil,S=n.$$$;return n.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(j,k,F){var p=w(j,k,"File"),A=[p].concat(F),P=h;return D(A[0],"Separator",D(A[0],"SEPARATOR","/")),D(A[0],"ALT_SEPARATOR",h),D(A[0],"PATH_SEPARATOR",":"),D(A[0],"FNM_SYSCASE",0),P=/^[a-zA-Z]:(?:\\|\/)/,function(I,q){var u=[I].concat(q),d=n.$r(u);T(I,"$absolute_path",function(l,E){var G=h,_=h,s=h,$=h,r=h,e=h,t=h,i=h,a=h,o=h;E==null&&(E=h),G=d("SEPARATOR"),_=g(),s=[],l=z(l["$respond_to?"]("to_path"))?l.$to_path():l,l=x["$coerce_to!"](l,S("String"),"to_str"),E=z($=E)?$:S("Dir").$pwd(),r=l.substr(0,G.length)===G||P.test(l),e=E.substr(0,G.length)===G||P.test(E),z(r)?(t=l.$split(O(["[",_,"]"])),i=P.test(l)?"":l.$sub(O(["^([",_,"]+).*$"]),"\\1"),a=!0):(t=Z(E.$split(O(["[",_,"]"])),l.$split(O(["[",_,"]"]))),i=P.test(E)?"":E.$sub(O(["^([",_,"]+).*$"]),"\\1"),a=e);for(var m,N=0,K=t.length;N<K;N++)m=t[N],!(m===h||m===""&&(s.length===0||a)||m==="."&&(s.length===0||a))&&(m===".."?s.pop():s.push(m));return!a&&t[0]!=="."&&s.$unshift("."),o=s.$join(G),z(a)&&(o=Z(i,o)),o},-2),T(I,"$expand_path",function(l,E){var G=this,_=h,s=h,$=h,r=h,e=h;return E==null&&(E=h),_=d("SEPARATOR"),s=g(),z(l[0]==="~"||E&&E[0]==="~")&&($=d("Dir").$home(),z($)||J.$raise(S("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),r=P.test($)?"":$.$sub(O(["^([",s,"]+).*$"]),"\\1"),z($["$start_with?"](r))||J.$raise(S("ArgumentError"),"non-absolute home"),$=Z($,_),e=O(["^\\~(?:",_,"|$)"]),l=l.$sub(e,$),z(E)&&(E=E.$sub(e,$))),G.$absolute_path(l,E)},-2);function M(c){return z(c["$respond_to?"]("to_path"))&&(c=c.$to_path()),c=x["$coerce_to!"](c,S("String"),"to_str"),c}function g(){return d("ALT_SEPARATOR")===h?n.escape_regexp(d("SEPARATOR")):n.escape_regexp(Z(d("SEPARATOR"),d("ALT_SEPARATOR")))}return T(I,"$dirname",function(l,E){var G=this,_=h;if(E==null&&(E=1),v(E,0))return l;z(L(E,0))&&J.$raise(S("ArgumentError"),"level can't be negative"),_=g(),l=M(l);var s=l.match(new RegExp("^["+_+"]")),$;return l=l.replace(new RegExp("["+_+"]+$"),""),l=l.replace(new RegExp("[^"+_+"]+$"),""),l=l.replace(new RegExp("["+_+"]+$"),""),l===""?$=s?"/":".":$=l,E==1?$:G.$dirname($,$e(E,1))},-2),T(I,"$basename",function(l,E){var G=h;return E==null&&(E=h),G=g(),l=M(l),l.length==0||(E!==h?E=x["$coerce_to!"](E,S("String"),"to_str"):E=null,l=l.replace(new RegExp("(.)["+G+"]*$"),"$1"),l=l.replace(new RegExp("^(?:.*["+G+"])?([^"+G+"]+)$"),"$1"),E===".*"?l=l.replace(/\.[^\.]+$/,""):E!==null&&(E=n.escape_regexp(E),l=l.replace(new RegExp(""+E+"$"),""))),l},-2),T(I,"$extname",function(l){var E=this,G=h,_=h;return l=M(l),G=E.$basename(l),z(G["$empty?"]())||(_=G["$[]"](W(1,-1,!1)).$rindex("."),z(_["$nil?"]())||v(Z(_,1),$e(G.$length(),1)))?"":G["$[]"](n.Range.$new(Z(_,1),-1,!1))}),T(I,"$exist?",function(l){return n.modules[l]!=null}),T(I,"$directory?",function(l){var E=h;E=[];for(var G in n.modules)E.push(G);return l=l.$gsub(O(["(^.",d("SEPARATOR"),"+|",d("SEPARATOR"),"+$)"])),Y(E,"find",[],function(s){return s==null&&(s=h),s["$=~"](O(["^",l]))})}),T(I,"$join",function(l){var E,G,_=h;return E=ee(arguments),G=E,z(G["$empty?"]())?"":(_="",G=Y(G.$flatten().$each_with_index(),"map",[],function($,r){return $==null&&($=h),r==null&&(r=h),v(r,0)&&z($["$empty?"]())||v(G.$length(),Z(r,1))&&z($["$empty?"]())?d("SEPARATOR"):$}),G=Y(G,"reject",[],"empty?".$to_proc()),Y(G,"each_with_index",[],function($,r){var e=h;return $==null&&($=h),r==null&&(r=h),e=G["$[]"](Z(r,1)),z(e["$nil?"]())?_=""+_+$:(z($["$end_with?"](d("SEPARATOR")))&&z(e["$start_with?"](d("SEPARATOR")))&&($=$.$sub(O([d("SEPARATOR"),"+$"]),"")),_=z($["$end_with?"](d("SEPARATOR")))||z(e["$start_with?"](d("SEPARATOR")))?""+_+$:""+_+$+d("SEPARATOR"))}),_)},-1),T(I,"$split",function(l){return l.$split(d("SEPARATOR"))}),B(I,"realpath","expand_path"),B(I,"exists?","exist?")}(n.get_singleton_class(p),A)}("::",S("IO"),b)};Opal.modules["corelib/process/base"]=function(n){var z=n.klass,w=n.slice,D=n.defs,x=n.return_val,O=n.nil;return function(Z,T){var J=z(Z,T,"Signal");return D(J,"$trap",function(L){return w(arguments),O},-1)}("::",null),function(Z,T){var J=z(Z,T,"GC");return D(J,"$start",x(O))}("::",null)};Opal.modules["corelib/process"]=function(n){var z=n.module,w=n.defs,D=n.truthy,x=n.return_val,O=n.Kernel,Z=n.nil,T=n.$$$;return n.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(J){var v=z(J,"Process"),L=Z;if(v.__clocks__=[],w(v,"$__register_clock__",function(Y,ee){var B=this;return B.__clocks__==null&&(B.__clocks__=Z),B.$const_set(Y,B.__clocks__.$size()),B.__clocks__["$<<"](ee)}),v.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),L=!1,n.global.performance)L=function(){return performance.now()};else if(n.global.process&&process.hrtime){var $e=process.hrtime();L=function(){var W=process.hrtime($e),Y=W[1]/1e3|0;return W[0]*1e3+Y/1e3}}return D(L)&&v.$__register_clock__("CLOCK_MONOTONIC",L),w(v,"$pid",x(0)),w(v,"$times",function(){var Y=Z;return Y=T("Time").$now().$to_f(),T(T("Benchmark"),"Tms").$new(Y,Y,Y,Y,Y)}),w(v,"$clock_gettime",function(Y,ee){var B=this,b=Z;B.__clocks__==null&&(B.__clocks__=Z),ee==null&&(ee="float_second"),D(b=B.__clocks__["$[]"](Y))||O.$raise(T(T("Errno"),"EINVAL"),"clock_gettime("+Y+") "+B.__clocks__["$[]"](Y));var h=b();switch(ee){case"float_second":return h/1e3;case"float_millisecond":return h/1;case"float_microsecond":return h*1e3;case"second":return h/1e3|0;case"millisecond":return h/1|0;case"microsecond":return h*1e3|0;case"nanosecond":return h*1e6|0;default:O.$raise(T("ArgumentError"),"unexpected unit: "+ee)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(n){var z=n.klass,w=n.module,D=n.def,x=n.range,O=n.send,Z=n.rb_divide,T=n.Kernel,J=n.Opal,v=[],L=n.nil,$e=n.$$$;return n.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(W,Y,ee){var B=z(W,Y,"Random"),b=[B].concat(ee);return function(h,S){var j=w(h,"Formatter"),k=[j].concat(S),F=n.$r(k);return D(j,"$hex",function(A){var P=this;A==null&&(A=L),A=$e("Random").$_verify_count(A);for(var I=P.$bytes(A),q="",u=0;u<A;u++)q+=I.charCodeAt(u).toString(16).padStart(2,"0");return q.$encode("US-ASCII")},-1),D(j,"$random_bytes",function(A){var P=this;return A==null&&(A=L),P.$bytes(A)},-1),D(j,"$base64",function(A){var P=this;return A==null&&(A=L),$e("Base64").$strict_encode64(P.$random_bytes(A)).$encode("US-ASCII")},-1),D(j,"$urlsafe_base64",function(A,P){var I=this;return A==null&&(A=L),P==null&&(P=!1),$e("Base64").$urlsafe_encode64(I.$random_bytes(A),P).$encode("US-ASCII")},-1),D(j,"$uuid",function(){var A=this,P=L;return P=A.$hex(16).$split(""),P["$[]="](12,"4"),P["$[]="](16,(parseInt(P["$[]"](16),16)&3|8).toString(16)),P=[P["$[]"](x(0,8,!0)),P["$[]"](x(8,12,!0)),P["$[]"](x(12,16,!0)),P["$[]"](x(16,20,!0)),P["$[]"](x(20,32,!0))],P=O(P,"map",[],"join".$to_proc()),P.$join("-")}),D(j,"$random_float",function(){var A=this,P=L,I=L;return P=A.$bytes(4),I=0,O(4,"times",[],function(u){return u==null&&(u=L),I=I["$<<"](8),I=I["$|"](P["$[]"](u).$ord())}),Z(I.$abs(),2147483647)}),D(j,"$random_number",function(A){var P=this;function I(){return P.$random_float()}function q(d){return Math.floor(I()*d)}function u(){var d=A.begin,M=A.end;if(d===L||M===L)return L;var g=M-d;return g<0?L:g===0?d:(M%1===0&&d%1===0&&!A.excl&&g++,q(g)+d)}return A==null?I():A.$$is_range?u():A.$$is_number?(A<=0&&T.$raise($e("ArgumentError"),"invalid argument - "+A),A%1===0?q(A):I()*A):(A=J["$coerce_to!"](A,$e("Integer"),"to_int"),A<=0&&T.$raise($e("ArgumentError"),"invalid argument - "+A),q(A))},-1),D(j,"$alphanumeric",function(A){var P=this,I=L;return A==null&&(A=L),A=F("Random").$_verify_count(A),I=O([x("0","9",!1),x("a","z",!1),x("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),O($e("Array"),"new",[A],function q(u){var d=q.$$s==null?this:q.$$s;return I["$[]"](d.$random_number(I.$length()))},{$$s:P}).$join()},-1)}(B,b),B.$include($e($e("Random"),"Formatter")),B.$extend($e($e("Random"),"Formatter"))}("::",null,v)};Opal.modules["corelib/random/mersenne_twister"]=function(n){var z=n.klass,w=n.const_set,D=n.send,x=n.nil,O=n.$$$,Z=x;return n.add_stubs("generator="),Z=function(){var T=624,J=397,v=2567483615,L=2147483648,$e=2147483647,W=function(k,F){return k&L|F&$e},Y=function(k,F){return W(k,F)>>>1^(F&1?v:0)};function ee(k){var F={left:0,next:T,state:new Array(T)};return B(F,k),F}function B(k,F){var p;for(k.state[0]=F>>>0,p=1;p<T;p++)k.state[p]=1812433253*(k.state[p-1]^k.state[p-1]>>30>>>0)+p,k.state[p]&=4294967295;k.left=1,k.next=T}function b(k){var F=0,p=k.state,A;for(k.left=T,k.next=0,A=T-J+1;--A;F++)p[F]=p[F+J]^Y(p[F+0],p[F+1]);for(A=J;--A;F++)p[F]=p[F+(J-T)]^Y(p[F+0],p[F+1]);p[F]=p[F+(J-T)]^Y(p[F+0],p[0])}function h(k){var F;return--k.left<=0&&b(k),F=k.state[k.next++],F^=F>>>11,F^=F<<7&2636928640,F^=F<<15&4022730752,F^=F>>>18,F>>>0}function S(k,F){return k>>>=5,F>>>=6,(k*67108864+F)*(1/9007199254740992)}function j(k){var F=h(k),p=h(k);return S(F,p)}return{genrand_real:j,init:ee}}(),function(T,J){var v=z(T,J,"Random"),L,$e=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return w(v,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*$e)},reseed:function(W){return Z.init(W)},rand:function(W){return Z.genrand_real(W)}}),L=[O(v,"MERSENNE_TWISTER_GENERATOR")],D(v,"generator=",L),L[L.length-1]}("::",null)};Opal.modules["corelib/random"]=function(n){var z=n.truthy,w=n.klass,D=n.Kernel,x=n.defs,O=n.Opal,Z=n.def,T=n.eqeqeq,J=n.send,v=n.top,L=n.nil,$e=n.$$$;return n.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),v.$require("corelib/random/formatter"),function(W,Y){var ee=w(W,Y,"Random");return ee.$attr_reader("seed","state"),x(ee,"$_verify_count",function(b){return z(b)||(b=16),typeof b!="number"&&(b=b.$to_int()),b<0&&D.$raise($e("ArgumentError"),"negative string size (or size too big)"),b=Math.floor(b),b}),Z(ee,"$initialize",function(b){var h=this;return b==null&&(b=$e("Random").$new_seed()),b=O["$coerce_to!"](b,$e("Integer"),"to_int"),h.state=b,h.$reseed(b)},-1),Z(ee,"$reseed",function(b){var h=this;return h.seed=b,h.$rng=n.$$rand.reseed(b)}),x(ee,"$new_seed",function(){return n.$$rand.new_seed()}),x(ee,"$rand",function(b){var h=this;return $e(h,"DEFAULT").$rand(b)},-1),x(ee,"$srand",function(b){var h=this,S=L;return b==null&&(b=$e("Random").$new_seed()),b=O["$coerce_to!"](b,$e("Integer"),"to_int"),S=$e(h,"DEFAULT").$seed(),$e(h,"DEFAULT").$reseed(b),S},-1),x(ee,"$urandom",function(b){return $e("SecureRandom").$bytes(b)}),Z(ee,"$==",function(b){var h=this,S=L;return T($e("Random"),b)?z(S=h.$seed()["$=="](b.$seed()))?h.$state()["$=="](b.$state()):S:!1}),Z(ee,"$bytes",function(b){var h=this;return b=$e("Random").$_verify_count(b),J($e("Array"),"new",[b],function S(){var j=S.$$s==null?this:S.$$s;return j.$rand(255).$chr()},{$$s:h}).$join().$encode("ASCII-8BIT")}),x(ee,"$bytes",function(b){var h=this;return $e(h,"DEFAULT").$bytes(b)}),Z(ee,"$rand",function(b){var h=this;return h.$random_number(b)},-1),Z(ee,"$random_float",function(){var b=this;return b.state++,n.$$rand.rand(b.$rng)}),x(ee,"$random_float",function(){var b=this;return $e(b,"DEFAULT").$random_float()}),x(ee,"$generator=",function(b){var h=this;return n.$$rand=b,z(h["$const_defined?"]("DEFAULT"))?$e(h,"DEFAULT").$reseed():h.$const_set("DEFAULT",h.$new(h.$new_seed()))})}("::",null),v.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(n){var z=n.Kernel,w=n.klass,D=n.send,x=n.slice,O=n.module,Z=n.def,T=n.return_val,J=n.alias,v=n.defs,L=n.top,$e=[],W=n.nil,Y=n.$$$;n.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var ee={};function B(h){switch(n.config.unsupported_features_severity){case"error":z.$raise(Y("NotImplementedError"),h);break;case"warning":b(h);break}}function b(h){ee[h]||(ee[h]=!0,L.$warn(h))}return function(h,S){var j=w(h,S,"String"),k="String#%s not supported. Mutable String methods are not supported in Opal.";return D(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function F(p){var A=F.$$s==null?this:F.$$s;return p==null&&(p=W),D(A,"define_method",[p],function(I){return x(arguments),z.$raise(Y("NotImplementedError"),k["$%"](p))},-1)},{$$s:j})}("::",null),function(h){var S=O(h,"Kernel"),j="Object tainting is not supported by Opal";return Z(S,"$taint",function(){var F=this;return B(j),F}),Z(S,"$untaint",function(){var F=this;return B(j),F}),Z(S,"$tainted?",function(){return B(j),!1})}("::"),function(h,S){var j=w(h,S,"Module");return Z(j,"$public",function(F){var p,A,P=this;return p=x(arguments),A=p,A.length===0?(P.$$module_function=!1,W):A.length===1?A[0]:A},-1),Z(j,"$private_class_method",function(F){var p,A;return p=x(arguments),A=p,A.length===1?A[0]:A},-1),Z(j,"$private_method_defined?",T(!1)),Z(j,"$private_constant",function(F){return x(arguments),W},-1),J(j,"nesting","public"),J(j,"private","public"),J(j,"protected","public"),J(j,"protected_method_defined?","private_method_defined?"),J(j,"public_class_method","private_class_method"),J(j,"public_instance_method","instance_method"),J(j,"public_instance_methods","instance_methods"),J(j,"public_method_defined?","method_defined?")}("::",null),function(h){var S=O(h,"Kernel");return Z(S,"$private_methods",function(k){return x(arguments),[]},-1),J(S,"protected_methods","private_methods"),J(S,"private_instance_methods","private_methods"),J(S,"protected_instance_methods","private_methods")}("::"),function(h,S){var j=O(h,"Kernel"),k=[j].concat(S),F=n.$r(k);return Z(j,"$eval",function(A){return x(arguments),z.$raise(Y("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+F("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",$e),v(L,"$public",function(S){var j,k;return j=x(arguments),k=j,k.length===1?k[0]:k},-1),v(L,"$private",function(S){var j,k;return j=x(arguments),k=j,k.length===1?k[0]:k},-1)};Opal.modules["corelib/binding"]=function(n){var z=n.klass,w=n.truthy,D=n.def,x=n.slice,O=n.send,Z=n.to_a,T=n.Kernel,J=n.return_ivar,v=n.eqeq;n.thrower;var L=n.module,$e=n.const_set,W=n.top,Y=[],ee=n.nil,B=n.$$$;return n.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(b,h){var S=z(b,h,"Binding"),j=S.$$prototype;return j.jseval=j.scope_variables=ee,D(S,"$initialize",function(F,p,A,P){var I,q=this;return p==null&&(p=[]),P==null&&(P=ee),I=[F,p,A,P],q.jseval=I[0],q.scope_variables=I[1],q.receiver=I[2],q.source_location=I[3],w(typeof A!==void 0)?ee:A=q.$js_eval("self")},-2),D(S,"$js_eval",function(F){var p,A,P=this;return p=x(arguments),A=p,w(P.jseval)?O(P.jseval,"call",Z(A)):T.$raise("Evaluation on a Proc#binding is not supported")},-1),D(S,"$local_variable_get",function(F){var p=this;try{return p.$js_eval(F)}catch(A){if(n.rescue(A,[B("Exception")]))try{return T.$raise(B("NameError"),"local variable `"+F+"' is not defined for "+p.$inspect())}finally{n.pop_exception(A)}else throw A}}),D(S,"$local_variable_set",function(F,p){var A=this;return n.Binding.tmp_value=p,A.$js_eval(""+F+" = Opal.Binding.tmp_value"),delete n.Binding.tmp_value,p}),D(S,"$local_variables",J("scope_variables")),D(S,"$local_variable_defined?",function(F){var p=this;return p.scope_variables["$include?"](F)}),D(S,"$eval",function(F,p,A){try{var P=this;return p==null&&(p=ee),A==null&&(A=ee),v(F,"self")?P.$receiver():T.$eval(F,P,p,A)}catch(I){if(I===n.t_eval_return)return I.$v;throw I}},-2),S.$attr_reader("receiver","source_location")}("::",null),function(b){var h=L(b,"Kernel");return D(h,"$binding",function(){return T.$raise("Opal doesn't support dynamic calls to binding")})}("::"),$e(Y[0],"TOPLEVEL_BINDING",B("Binding").$new(function(b){return new Function("self","return "+b)(W)},[],W,["<main>",0]))};Opal.modules["corelib/irb"]=function(n){var z=n.module,w=n.truthy,D=n.Kernel,x=n.defs,O=n.gvars,Z=n.lambda,T=n.hash_rehash,J=n.send,v=n.rb_plus,L=n.const_set,$e=n.klass,W=n.def,Y=n.Opal,ee=n.range,B=n.eqeq,b=n.thrower,h=[],S=n.nil,j=n.$$$;n.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(k,F){var p=z(k,"Opal"),A=[p].concat(F);return function(P,I){var q=z(P,"IRB"),u=[q].concat(I),d=n.$r(u);return x(q,"$ensure_loaded",function(g){var c=S,l=S;if(w(n.loaded_features["$include?"](g)))return S;c=w(d("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":d("RUBY_ENGINE_VERSION"),l="https://cdn.opalrb.com/opal/"+c+"/"+g+".js";var E;if(typeof XMLHttpRequest<"u"){var G=new XMLHttpRequest;G.open("GET",l,!1),G.send(""),E=G.responseText}else D.$raise("You need to provision "+g+" yourself in this environment");return new Function("Opal",E)(n),n.require(g),w(n.loaded_features["$include?"](g))?S:D.$raise("Could not load "+g+" for some reason")}),q.$singleton_class().$attr_accessor("output"),x(q,"$prepare_console",function M(){var g=M.$$p||S,c,l=this,E=S,G=S;return O.stdout==null&&(O.stdout=S),O.stderr==null&&(O.stderr=S),O.stdin==null&&(O.stdin=S),M.$$p=null,function(){try{return l["$output="](""),E=T(new Map([[O.stdout,Z(function(s){return s==null&&(s=S),O.stdout=s})],[O.stderr,Z(function(s){return s==null&&(s=S),O.stderr=s})]])),w(l["$browser?"]())&&(J(E,"each",[],function _(s,$){var r=_.$$s==null?this:_.$$s,e=S;return s==null&&(s=S),$==null&&($=S),e=s.$dup(),e["$write_proc="](J(r,"proc",[],function t(i){var a=t.$$s==null?this:t.$$s;return i==null&&(i=S),a["$output="](v(a.$output(),i)),a["$output="](a.$output().$split(`
`).$last(30).$join(`
`)),w(i["$end_with?"](`
`))&&a["$output="](v(a.$output(),`
`)),s.$write_proc().$call(i)},{$$s:r})),e["$tty="](!1),$.$call(e)},{$$s:l}),G=O.stdin.$read_proc(),O.stdin["$read_proc="](function(_){var s=prompt(l.$output());return s!==null?s+`
`:S})),n.yieldX(g,[])}finally{J(E,"each",[],function(s,$){return s==null&&(s=S),$==null&&($=S),$.$call(s)}),c=[G],J(O.stdin,"read_proc=",c),c[c.length-1],c=[""],J(l,"output=",c),c[c.length-1]}}()}),x(q,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),L(u[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(M,g){var c=$e(M,g,"Silencer"),l=c.$$prototype;return l.collector=l.stderr=S,W(c,"$initialize",function(){var G=this;return O.stderr==null&&(O.stderr=S),G.stderr=O.stderr}),W(c,"$silence",function E(){var G=E.$$p||S,_=this;return E.$$p=null,function(){try{return _.collector=j("StringIO").$new(),O.stderr=_.collector,n.yieldX(G,[])}finally{O.stderr=_.stderr}}()}),W(c,"$warnings",function(){var G=this;return G.collector.$string()})}(u[0],null)}(A[0],A)}(h[0],h),function(k,F,p){var A=$e(k,F,"Binding"),P=[A].concat(p),I=n.$r(P);return W(A,"$irb",function(){try{var u=b("return"),d=this,M=S;return j(Y,"IRB").$ensure_loaded("opal-replutils"),M=j(j(Y,"IRB"),"Silencer").$new(),J(j(Y,"IRB"),"prepare_console",[],function g(){var c=g.$$s==null?this:g.$$s;return function(){try{var l=b("break");return J(c,"loop",[],function E(){var G=E.$$s==null?this:E.$$s,_=S,s=S,$=S,r=S,e=S;G.$print(">> "),_=G.$gets(),w(_)||l.$throw(S,E.$$is_lambda),s="",w(j(Y,"IRB")["$browser?"]())&&G.$puts(_),w(_["$start_with?"]("ls "))?(s=_["$[]"](ee(3,-1,!1)),$="ls"):B(_,`ls
`)?(s="self",$="ls"):w(_["$start_with?"]("show "))?(s=_["$[]"](ee(5,-1,!1)),$="show"):(s=_,$="inspect"),r=S;do{try{J(M,"silence",[],function(){return r=n.compile(s,{irb:!0})})}catch(t){if(n.rescue(t,[I("SyntaxError")])){e=t;try{if(w(j(j(Y,"IRB"),"LINEBREAKS")["$include?"](e.$message()))){G.$print(".. "),_=G.$gets(),w(_)||u.$throw(S,E.$$is_lambda),w(j(Y,"IRB")["$browser?"]())&&G.$puts(_),s=v(s,_);continue}else w(M.$warnings()["$empty?"]())?G.$warn(e.$full_message()):G.$warn(M.$warnings())}finally{n.pop_exception(t)}}else throw t}break}while(!0);return B($,"show")&&(G.$puts(r),u.$throw(S,E.$$is_lambda)),G.$puts(j("REPLUtils").$eval_and_print(r,$,!1,G))},{$$s:c,$$ret:u})}catch(E){if(E===l)return E.$v;throw E}finally{l.is_orphan=!0}}()},{$$s:d})}catch(g){if(g===u)return g.$v;throw g}finally{u.is_orphan=!0}})}("::",null,h),n.irb=function(k){j("Binding").$new(k).$irb()},n.load_parser=function(){n.Opal.IRB.$ensure_loaded("opal-parser")},typeof n.eval>"u"&&(n.eval=function(k){return n.load_parser(),n.eval(k)}),typeof n.compile>"u"&&(n.compile=function(k,F){return n.load_parser(),n.compile(k,F)})};Opal.modules.opal=function(n){var z=n.Object;return n.nil,n.add_stubs("require,autoload"),z.$require("opal/base"),z.$require("opal/mini"),z.$require("corelib/kernel/format"),z.$require("corelib/string/encoding"),z.$autoload("Math","corelib/math"),z.$require("corelib/complex/base"),z.$autoload("Complex","corelib/complex"),z.$require("corelib/rational/base"),z.$autoload("Rational","corelib/rational"),z.$require("corelib/time"),z.$autoload("Struct","corelib/struct"),z.$autoload("Set","corelib/set"),z.$autoload("Dir","corelib/dir"),z.$autoload("File","corelib/file"),z.$require("corelib/process/base"),z.$autoload("Process","corelib/process"),z.$autoload("Random","corelib/random"),z.$require("corelib/unsupported"),z.$require("corelib/binding"),z.$require("corelib/irb")};Opal.modules["js/proxy"]=function(n){var z=n.module,w=n.truthy,D=n.def,x=n.klass,O=n.const_set,Z=n.slice,T=n.range,J=n.send,v=n.to_a,L=n.gvars,$e=n.top,W=[],Y=n.nil;return n.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),$e.$require("opal"),$e.$require("native"),function(ee,B){var b=z(ee,"JS"),h=[b].concat(B),S=n.$r(h);return function(j,k){var F=z(j,"Helpers"),p=[F].concat(k),A=n.$r(p);return D(F,"$wrap_result",function(I){return w(I&&typeof I.then=="function")?A("Promise").$new(I):w(typeof I=="object"&&I!==null)?A("Proxy").$new(I):I}),D(F,"$native_methods",function(){var I=this,q=Y;return I.native_methods==null&&(I.native_methods=Y),I.native_methods=function(){if(w(q=I.native_methods))return q;{let u=I.$to_n();const d=new Set;for(;u!==null;){for(const M of Reflect.ownKeys(u)){const g=M.toString(),c=I.$to_rb_name(g);typeof M!="symbol"&&g!==c&&d.add(c),d.add(g)}u=Object.getPrototypeOf(u)}return Array.from(d)}}()})}(h[0],h),function(j,k,F){var p=x(j,k,"Proxy"),A=[p].concat(F),P=n.$r(A);return p.$include(P("Enumerable")),p.$include(P("Helpers")),p.$attr_accessor("native"),O(A[0],"IRREGULARS",["html","url","uri"]),D(p,"$initialize",function(q){var u=this;return u.native=u.$Native(q)}),D(p,"$method_missing",function I(q,u){var d=I.$$p||Y,M,g,c,l=this,E=Y,G=Y,_=Y,s=Y,$=Y,r=Y;return I.$$p=null,M=Z(arguments,1),g=M,E=l.$to_js_name(q),w(l["$existing_property?"](E))||w(E["$end_with?"]("="))||l.$raise(P("NoMethodError"),"undefined method `"+q+"` for "+l),w(E["$end_with?"]("="))?(G=E["$[]"](T(0,-2,!1)),c=[G,g.$first()],J(l.$native(),"[]=",c),c[c.length-1]):(_=l.$native()["$[]"](E),w(typeof _=="function")?(s=g.$dup(),w(d)&&($=function(){let e=Array.prototype.slice.call(arguments);return J(d,"call",[l.$class().$new(this)].concat(v(e)))},s["$<<"]($)),r=_.apply(l.$to_n(),s.$to_n()),l.$wrap_result(r)):w(typeof _=="object"&&_!==null)?l.$wrap_result(_):_)},-2),D(p,"$to_str",function(){var q=this;return q.$to_n().toString()}),D(p,"$respond_to_missing?",function(q,u){return!0},-2),D(p,"$each",function I(){var q=I.$$p||Y,u=this,d=Y;return I.$$p=null,w(u["$respond_to?"]("length"))?(d=u.$length(),J(n.Range.$new(0,d,!0),"each",[],function M(g){var c=M.$$s==null?this:M.$$s;return g==null&&(g=Y),n.yield1(q,c["$[]"](g))},{$$s:u})):u.$enum_for("each")}),D(p,"$[]",function(q){var u=this,d=Y;return d=u.$native()["$[]"](q),u.$wrap_result(d)}),D(p,"$[]=",function(q,u){var d=this;return d.$native()["$[]="](q,u),d.$wrap_result(d.$native())}),D(p,"$to_n",function(){var q=this;return q.$native().$to_n()}),D(p,"$length",function(){var q=this;return q.$native().$length()}),p.$private(),D(p,"$to_js_name",function(q){return J(q.$to_s().$split("_").$map(),"with_index",[],function(d,M){return d==null&&(d=Y),M==null&&(M=Y),w(P("IRREGULARS")["$include?"](d.$gsub("=","").$downcase()))?d.$upcase():w(M["$zero?"]())?d:d.$capitalize()}).$join()}),D(p,"$to_rb_name",function(q){return J(q.$to_s(),"gsub",[/([A-Z]+)/],function(){var d;return"_"+((d=L["~"])===Y?Y:d["$[]"](1)).$downcase()}).$sub(/^_/,"")}),D(p,"$existing_property?",function(q){var u=this;return q in u.$to_n()})}(h[0],null,h),function(j,k,F){var p=x(j,k,"Promise"),A=[p].concat(F),P=n.$r(A);return p.$include(P("Helpers")),D(p,"$then",function I(){var q=I.$$p||Y,u,d=this,M=Y;return I.$$p=null,M=function(g){var c=q.$call(d.$wrap_result(g));return c&&typeof c.then=="function"?c:c&&typeof c.to_n=="function"?c.to_n():c},u=[d.$to_n().then(M)],J(d,"native=",u),u[u.length-1]}),D(p,"$catch",function I(){var q=I.$$p||Y,u,d=this,M=Y;return I.$$p=null,M=function(g){var c=q.$call(d.$wrap_result(g));return c&&typeof c.then=="function"?c:c&&typeof c.to_n=="function"?c.to_n():c},u=[d.$to_n().catch(M)],J(d,"native=",u),u[u.length-1]})}(h[0],S("Proxy"),h)}(W[0],W)};Opal.modules["opal_stimulus/stimulus_controller"]=function(n){var z=n.klass,w=n.const_set,D=n.Opal,x=n.defs,O=n.truthy,Z=n.send,T=n.gvars,J=n.return_val,v=n.thrower,L=n.rb_plus,$e=n.eqeqeq,W=n.def,Y=n.top,ee=[],B=n.nil,b=n.$$$;return n.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),Y.$require("opal"),Y.$require("native"),Y.$require("js/proxy"),function(h,S,j){var k=z(h,S,"StimulusController"),F=[k].concat(j),p=n.$r(F),A=k.$$prototype;return A.window=A.document=B,w(F[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),w(F[0],"DEFAULT_GETTERS",["element"]),x(k,"$inherited",function(I){return D.$bridge(I.$stimulus_controller(),I)}),x(k,"$stimulus_controller",function(){var I=this;return I.stimulus_controller==null&&(I.stimulus_controller=B),O(I.stimulus_controller)||(I.stimulus_controller=class extends Controller{}),I.stimulus_controller}),x(k,"$stimulus_name",function(){var I=this;return I.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),x(k,"$method_added",function(I){var q=this;if(O(p("DEFAULT_GETTERS")["$include?"](I)))return B;q.$stimulus_controller().prototype[I]=function(...u){try{var d=u.map(function(M){return M&&typeof M=="object"&&!M.$$class?n.JS.Proxy.$new(M):M});return this["$"+I].apply(this,d)}catch(M){console.error("Uncaught",M)}}}),x(k,"$to_ruby_name",function(I){return Z(I.$to_s(),"gsub",[/([A-Z]+)/],function(){var u;return"_"+((u=T["~"])===B?B:u["$[]"](1)).$downcase()}).$sub(/^_/,"")}),x(k,"$register_all!",function(){try{var I=v("return"),q=this;return Z(q.$subclasses(),"each",[],function u(d){return d==null&&(d=B),Z(d,"define_method",["dummy"],J(B)),O(application.controllers["$include?"](d.$stimulus_name()))&&I.$throw(B,u.$$is_lambda),application.register(d.$stimulus_name(),d.$stimulus_controller())},{$$ret:I})}catch(u){if(u===I)return u.$v;throw u}finally{I.is_orphan=!0}}),x(k,"$targets=",function(I){var q=this;return I==null&&(I=[]),q.$stimulus_controller().targets=I,Z(I,"each",[],function u(d){var M=u.$$s==null?this:u.$$s,g=B,c=B,l=B,E=B,G=B,_=B;d==null&&(d=B),g=d.$to_s(),c=M.$to_ruby_name(d),Z(M,"define_method",[L(c,"_target")],function(){return b(p("JS"),"Proxy").$new(this[L(g,"Target")])}),Z(M,"define_method",[L(c,"_targets")],function(){return Z(this[L(g,"Targets")],"map",[],function(r){return r==null&&(r=B),b(p("JS"),"Proxy").$new(r)})}),Z(M,"define_method",[L(L("has_",c),"_target")],function(){return this[L(L("has",g.$capitalize()),"Target")]}),l=L(c,"_target_connected"),E=L(g,"TargetConnected"),M.$stimulus_controller().prototype[E]=function(){if(this["$respond_to?"]&&this["$respond_to?"](l))return this["$"+l]()},G=L(c,"_target_disconnected"),_=L(g,"TargetDisconnected"),M.$stimulus_controller().prototype[_]=function(){if(this["$respond_to?"]&&this["$respond_to?"](G))return this["$"+G]()}},{$$s:q})},-1),x(k,"$outlets=",function(I){var q=this;return I==null&&(I=[]),q.$stimulus_controller().outlets=I,Z(I,"each",[],function u(d){var M=u.$$s==null?this:u.$$s,g=B,c=B,l=B,E=B,G=B,_=B;d==null&&(d=B),g=d.$to_s(),c=M.$to_ruby_name(d),Z(M,"define_method",[L(c,"_outlet")],function(){return this[L(g,"Outlet")]}),Z(M,"define_method",[L(c,"_outlets")],function(){return this[L(g,"Outlets")]}),Z(M,"define_method",[L(L("has_",c),"_outlet")],function(){return this[L(L("has",g.$capitalize()),"Outlet")]}),l=L(c,"_outlet_connected"),E=L(g,"OutletConnected"),M.$stimulus_controller().prototype[E]=function(){if(this["$respond_to?"]&&this["$respond_to?"](l))return this["$"+l]()},G=L(c,"_outlet_disconnected"),_=L(g,"OutletDisconnected"),M.$stimulus_controller().prototype[_]=function(){if(this["$respond_to?"]&&this["$respond_to?"](G))return this["$"+G]()}},{$$s:q})},-1),x(k,"$values=",function(I){var q=this,u=B;return I==null&&(I=new Map),u=new Map,Z(I,"each",[],function d(M,g){var c=d.$$s==null?this:d.$$s,l=B,E=B,G=B,_=B;M==null&&(M=B),g==null&&(g=B),M=c.$to_ruby_name(M),l=$e("string",E=g)?String:$e("number",E)?Number:$e("boolean",E)?Boolean:$e("array",E)?Array:$e("object",E)?Object:c.$raise(p("ArgumentError"),"Unsupported value type: "+g+", please use :string, :number, :boolean, :array, or :object"),u["$[]="](M,l),c.$stimulus_controller().values=u.$to_n(),Z(c,"define_method",[L(M,"_value")],function s(){var $=s.$$s==null?this:s.$$s;return $.$Native(this[L(M,"Value")])},{$$s:c}),Z(c,"define_method",[L(M,"_value=")],function s($){var r=s.$$s==null?this:s.$$s;return $==null&&($=B),r.$Native(this[L(M,"Value")]=$)},{$$s:c}),Z(c,"define_method",["has_"+M],function(){return this[L(L("has",M.$to_s().$capitalize()),"Value")]}),G=""+M+"_value_changed",_=""+M+"ValueChanged",c.$stimulus_controller().prototype[_]=function(s,$){if(g["$=="]("object")&&(s=JSON.stringify(s),$=JSON.stringify($)),this["$respond_to?"]&&this["$respond_to?"](G))return this["$"+G](s,$)}},{$$s:q})},-1),x(k,"$classes=",function(I){var q=this;return I==null&&(I=[]),q.$stimulus_controller().classes=I,Z(I,"each",[],function u(d){var M=u.$$s==null?this:u.$$s,g=B,c=B;return d==null&&(d=B),g=d.$to_s(),c=M.$to_ruby_name(d),Z(M,"define_method",[""+c+"_class"],function(){return this[L(g,"Class")]}),Z(M,"define_method",[""+c+"_classes"],function(){return this[L(g,"Classes")]}),Z(M,"define_method",["has_"+c+"_class"],function(){return this[L(L("has",g.$capitalize()),"Class")]})},{$$s:q})},-1),W(k,"$element",function(){return b(p("JS"),"Proxy").$new(this.element)}),W(k,"$window",function(){var I=this,q=B;return T.$==null&&(T.$=B),I.window=O(q=I.window)?q:b(p("JS"),"Proxy").$new(T.$.$window())}),W(k,"$document",function(){var I=this,q=B;return T.$==null&&(T.$=B),I.document=O(q=I.document)?q:b(p("JS"),"Proxy").$new(T.$.$document())})}(ee[0],Controller,ee)};Opal.modules["opal_vite/concerns/v1/stimulus_helpers"]=function(n){var z=n.module,w=n.def,D=n.truthy,x=n.eqeq,O=n.send,Z=n.slice,T=n.ensure_kwargs,J=n.get_kwarg,v=n.hash_get,L=n.rb_plus,$e=n.rb_minus,W=n.to_a,Y=n.range,ee=n.const_set,B=[],b=n.$r(B),h=n.nil,S=n.$$$;return n.add_stubs("camelize,has_target?,target_set_value,target_set_html,set_target_style,get_target_style,==,show_target,hide_target,call,body_style,to_n,storage_get,is_a?,parse_int,event_data,to_native_element,Native,map,to_a,js_timestamp,is_nan?,parse_float,to_s,empty?,respond_to?,fetch_json_promise,fetch_json_safe,js_then,js_catch,console_error,set_stimulus_value,+,stimulus_value,-,!,get_class,get_classes,has_outlet?,get_outlet,js_call_on,each,get_outlets,nil?,stimulus_dispatch,action_param,[],[]=,flatten,to_proc,blank?,private,include?,upcase,downcase,split,join,first"),function(j,k){var F=z(j,"OpalVite"),p=[F].concat(k);return function(A,P){var I=z(A,"Concerns"),q=[I].concat(P);return function(u,d){var M=z(u,"V1"),g=[M].concat(d);return function(c,l){var E=z(c,"StimulusHelpers"),G=[E].concat(l),_=n.$r(G);return w(E,"$has_target?",function($){var r=this,e=h;return e="has"+r.$camelize($)+"Target",this[e]}),w(E,"$get_target",function($){var r=this,e=h;return D(r["$has_target?"]($))?(e=""+r.$camelize($,!1)+"Target",this[e]):h}),w(E,"$get_targets",function($){var r=this,e=h;return e=""+r.$camelize($,!1)+"Targets",Array.from(this[e]||[])}),w(E,"$target_value",function($){var r=this,e=h;return D(r["$has_target?"]($))?(e=""+r.$camelize($,!1)+"Target",this[e].value):h}),w(E,"$target_set_value",function($,r){var e=this,t=h;return D(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].value=r):h}),w(E,"$target_html",function($){var r=this,e=h;return D(r["$has_target?"]($))?(e=""+r.$camelize($,!1)+"Target",this[e].innerHTML):h}),w(E,"$target_set_html",function($,r){var e=this,t=h;return D(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].innerHTML=r):h}),w(E,"$target_text",function($){var r=this,e=h;return D(r["$has_target?"]($))?(e=""+r.$camelize($,!1)+"Target",this[e].textContent):h}),w(E,"$target_set_text",function($,r){var e=this,t=h;return D(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].textContent=r):h}),w(E,"$target_data",function($,r){var e=this,t=h;return D(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].getAttribute("data-"+r)):h}),w(E,"$target_set_data",function($,r,e){var t=this,i=h;return D(t["$has_target?"]($))?(i=""+t.$camelize($,!1)+"Target",this[i].setAttribute("data-"+r,e)):h}),w(E,"$target_clear",function($){var r=this;return r.$target_set_value($,"")}),w(E,"$target_clear_html",function($){var r=this;return r.$target_set_html($,"")}),w(E,"$set_target_style",function($,r,e){var t=this,i=h;return D(t["$has_target?"]($))?(i=""+t.$camelize($,!1)+"Target",this[i].style[r]=e):h}),w(E,"$get_target_style",function($,r){var e=this,t=h;return D(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].style[r]):h}),w(E,"$show_target",function($){var r=this;return r.$set_target_style($,"display","")}),w(E,"$hide_target",function($){var r=this;return r.$set_target_style($,"display","none")}),w(E,"$toggle_target_visibility",function($){var r=this,e=h;return e=r.$get_target_style($,"display"),x(e,"none")?r.$show_target($):r.$hide_target($)}),w(E,"$add_target_class",function($,r){var e=this,t=h;return D(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].classList.add(r)):h}),w(E,"$remove_target_class",function($,r){var e=this,t=h;return D(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].classList.remove(r)):h}),w(E,"$toggle_target_class",function($,r){var e=this,t=h;return D(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].classList.toggle(r)):h}),w(E,"$has_target_class?",function($,r){var e=this,t=h;return D(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].classList.contains(r)):!1}),w(E,"$js_timestamp",function(){return Date.now()}),w(E,"$js_iso_date",function(){return new Date().toISOString()}),w(E,"$js_date",function($){return $==null&&($=h),D($)?new Date($):new Date},-1),w(E,"$js_regexp",function($,r){return r==null&&(r=""),new RegExp($,r)},-2),w(E,"$js_regexp_test",function($,r,e){return e==null&&(e=""),new RegExp($,e).test(r)},-3),w(E,"$set_timeout",function s($){var r=s.$$p||h;return s.$$p=null,setTimeout(function(){r.$call()},$)}),w(E,"$set_interval",function s($){var r=s.$$p||h;return s.$$p=null,setInterval(function(){r.$call()},$)}),w(E,"$clear_timeout",function($){return clearTimeout($)}),w(E,"$clear_interval",function($){return clearInterval($)}),w(E,"$body_style",function($,r){return document.body.style[$]=r}),w(E,"$lock_body_scroll",function(){var $=this;return $.$body_style("overflow","hidden")}),w(E,"$unlock_body_scroll",function(){var $=this;return $.$body_style("overflow","")}),w(E,"$js_array",function(){return[]}),w(E,"$js_array_push",function($,r){return $.push(r.$to_n())}),w(E,"$js_array_length",function($){return $.length}),w(E,"$js_array_at",function($,r){return $[r]}),w(E,"$storage_get",function($){return localStorage.getItem($)}),w(E,"$storage_set",function($,r){return localStorage.setItem($,r)}),w(E,"$storage_remove",function($){return localStorage.removeItem($)}),w(E,"$storage_get_json",function($,r){var e=this,t=h;return r==null&&(r=h),t=e.$storage_get($),D(t===null)?r:JSON.parse(t)},-2),w(E,"$storage_set_json",function($,r){return localStorage.setItem($,JSON.stringify(r.$to_n()))}),w(E,"$dispatch_window_event",function($,r){var e=h;r==null&&(r=new Map),e=D(r["$is_a?"](_("Hash")))?r.$to_n():r;const t=new CustomEvent($,{detail:e});window.dispatchEvent(t)},-2),w(E,"$dispatch_event",function($,r){var e=h;r==null&&(r=new Map),e=D(r["$is_a?"](_("Hash")))?r.$to_n():r;const t=new CustomEvent($,{detail:e});this.element.dispatchEvent(t)},-2),w(E,"$on_window_event",function s($){var r=s.$$p||h;return s.$$p=null,window.addEventListener($,r)}),w(E,"$off_window_event",function($,r){return window.removeEventListener($,r)}),w(E,"$on_document_event",function s($){var r=s.$$p||h;return s.$$p=null,document.addEventListener($,r)}),w(E,"$on_dom_ready",function s(){var $=s.$$p||h;return s.$$p=null,document.addEventListener("DOMContentLoaded",$)}),w(E,"$on_element_event",function s($,r){var e=s.$$p||h;return s.$$p=null,$.addEventListener(r,e)}),w(E,"$off_element_event",function($,r,e){return $.removeEventListener(r,e)}),w(E,"$on_controller_event",function s($){var r=s.$$p||h;return s.$$p=null,this.element.addEventListener($,r)}),w(E,"$event_target",function(){return event.currentTarget}),w(E,"$event_data",function($){return event.currentTarget.getAttribute("data-"+$)}),w(E,"$event_data_int",function($){var r=this;return r.$parse_int(r.$event_data($))}),w(E,"$prevent_default",function(){return event.preventDefault()}),w(E,"$event_key",function(){return event.key}),w(E,"$to_native_element",function($){return D(typeof $.$to_n=="function")?$.$to_n():$}),w(E,"$add_class",function($,r){var e=this,t=h;return t=e.$to_native_element($),t.classList.add(r)}),w(E,"$remove_class",function($,r){var e=this,t=h;return t=e.$to_native_element($),t.classList.remove(r)}),w(E,"$toggle_class",function($,r){var e=this,t=h;return t=e.$to_native_element($),t.classList.toggle(r)}),w(E,"$has_class?",function($,r){var e=this,t=h;return t=e.$to_native_element($),t.classList.contains(r)}),w(E,"$set_attr",function($,r,e){var t=this,i=h;return i=t.$to_native_element($),i.setAttribute(r,e)}),w(E,"$get_attr",function($,r){var e=this,t=h;return t=e.$to_native_element($),t.getAttribute(r)}),w(E,"$remove_attr",function($,r){var e=this,t=h;return t=e.$to_native_element($),t.removeAttribute(r)}),w(E,"$set_style",function($,r,e){var t=this,i=h;return i=t.$to_native_element($),i.style[r]=e}),w(E,"$set_html",function($,r){var e=this,t=h;return t=e.$to_native_element($),t.innerHTML=r}),w(E,"$set_text",function($,r){var e=this,t=h;return t=e.$to_native_element($),t.textContent=r}),w(E,"$get_value",function($){var r=this,e=h;return e=r.$to_native_element($),e.value}),w(E,"$set_value",function($,r){var e=this,t=h;return t=e.$to_native_element($),t.value=r}),w(E,"$focus",function($){var r=this,e=h;return e=r.$to_native_element($),e.focus()}),w(E,"$has_attr?",function($,r){var e=this,t=h;return t=e.$to_native_element($),t.hasAttribute(r)}),w(E,"$create_element",function($){return document.createElement($)}),w(E,"$append_child",function($,r){var e=this,t=h,i=h;return t=e.$to_native_element($),i=e.$to_native_element(r),t.appendChild(i)}),w(E,"$remove_element",function($){var r=this,e=h;return e=r.$to_native_element($),e.remove()}),w(E,"$next_sibling",function($){var r=this,e=h;return e=r.$to_native_element($),e.nextElementSibling}),w(E,"$prev_sibling",function($){var r=this,e=h;return e=r.$to_native_element($),e.previousElementSibling}),w(E,"$parent",function($){var r=this,e=h;return e=r.$to_native_element($),e.parentElement}),w(E,"$query",function($){var r=this,e=h;return e=document.querySelector($),D(e===null)?h:r.$Native(e)}),w(E,"$query_all",function($){var r=this,e=h;return e=Array.from(document.querySelectorAll($)),O(r.$Native(e).$to_a(),"map",[],function t(i){var a=t.$$s==null?this:t.$$s;return i==null&&(i=h),a.$Native(i)},{$$s:r})}),w(E,"$query_element",function($){var r=this,e=h;return e=this.element.querySelector($),D(e===null)?h:r.$Native(e)}),w(E,"$query_all_element",function($){var r=this,e=h;return e=Array.from(this.element.querySelectorAll($)),O(r.$Native(e).$to_a(),"map",[],function t(i){var a=t.$$s==null?this:t.$$s;return i==null&&(i=h),a.$Native(i)},{$$s:r})}),w(E,"$doc_root",function(){return document.documentElement}),w(E,"$set_root_attr",function($,r){return document.documentElement.setAttribute($,r)}),w(E,"$get_root_attr",function($){return document.documentElement.getAttribute($)}),w(E,"$clone_template",function($){var r=this,e=h;return e=""+r.$camelize($,!1)+"Target",this[e].content.cloneNode(!0)}),w(E,"$template_first_child",function($){return $.firstElementChild}),w(E,"$element_add_class",function($){return this.element.classList.add($)}),w(E,"$element_remove_class",function($){return this.element.classList.remove($)}),w(E,"$element_toggle_class",function($){return this.element.classList.toggle($)}),w(E,"$generate_id",function(){var $=this;return $.$js_timestamp()}),w(E,"$target_focus",function($){var r=this,e=h;return D(r["$has_target?"]($))?(e=""+r.$camelize($,!1)+"Target",this[e].focus()):h}),w(E,"$target_blur",function($){var r=this,e=h;return D(r["$has_target?"]($))?(e=""+r.$camelize($,!1)+"Target",this[e].blur()):h}),w(E,"$parse_int",function($,r){return r==null&&(r=10),parseInt($,r)},-2),w(E,"$parse_float",function($){return parseFloat($)}),w(E,"$is_nan?",function($){return Number.isNaN($)}),w(E,"$parse_int_or",function($,r){var e=this,t=h;return r==null&&(r=0),t=e.$parse_int($),D(e["$is_nan?"](t))?r:t},-2),w(E,"$parse_float_or",function($,r){var e=this,t=h;return r==null&&(r=0),t=e.$parse_float($),D(e["$is_nan?"](t))?r:t},-2),w(E,"$js_prop",function($){return this[$.$to_s()]}),w(E,"$js_set_prop",function($,r){return this[$.$to_s()]=r}),w(E,"$js_has_prop?",function($){return!!this[$.$to_s()]}),w(E,"$js_call",function($,r){var e,t,i=h;return e=Z(arguments,1),t=e,D(t["$empty?"]())?this[$.$to_s()]():(i=O(t,"map",[],function(o){return o==null&&(o=h),D(o["$respond_to?"]("to_n"))?o.$to_n():o}),this[$.$to_s()].apply(this,i))},-2),w(E,"$js_call_on",function($,r,e){var t,i,a=h;return t=Z(arguments,2),i=t,D(i["$empty?"]())?$[r.$to_s()]():(a=O(i,"map",[],function(m){return m==null&&(m=h),D(m["$respond_to?"]("to_n"))?m.$to_n():m}),$[r.$to_s()].apply($,a))},-3),w(E,"$js_get",function($,r){return $[r.$to_s()]}),w(E,"$js_set",function($,r,e){return $[r.$to_s()]=e}),w(E,"$json_parse",function($){return JSON.parse($)}),w(E,"$json_stringify",function($){var r=h;return r=D($["$respond_to?"]("to_n"))?$.$to_n():$,JSON.stringify(r)}),w(E,"$console_log",function($){var r,e;return r=Z(arguments),e=r,console.log.apply(console,e)},-1),w(E,"$console_warn",function($){var r,e;return r=Z(arguments),e=r,console.warn.apply(console,e)},-1),w(E,"$console_error",function($){var r,e;return r=Z(arguments),e=r,console.error.apply(console,e)},-1),w(E,"$js_string_char_at",function($,r){return $.charAt(r)}),w(E,"$js_substring",function($,r,e){return e==null&&(e=h),D(e)?$.substring(r,e):$.substring(r)},-3),w(E,"$js_split",function($,r){return $.split(r)}),w(E,"$js_trim",function($){return $.trim()}),w(E,"$js_includes?",function($,r){return $.includes(r)}),w(E,"$js_equals?",function($,r){return $===r}),w(E,"$js_loose_equals?",function($,r){return $==r}),w(E,"$js_random",function(){return Math.random()}),w(E,"$js_min",function($,r){return Math.min($,r)}),w(E,"$js_max",function($,r){return Math.max($,r)}),w(E,"$js_abs",function($){return Math.abs($)}),w(E,"$js_round",function($){return Math.round($)}),w(E,"$js_ceil",function($){return Math.ceil($)}),w(E,"$js_to_fixed",function($,r){return $.toFixed(r)}),w(E,"$random_int",function($){return Math.floor(Math.random()*$)}),w(E,"$js_floor",function($){return Math.floor($)}),w(E,"$js_global_exists?",function($){return typeof window[$]<"u"}),w(E,"$js_global",function($){return window[$]}),w(E,"$js_new",function($,r){var e,t,i=h;return e=Z(arguments,1),t=e,D(t["$empty?"]())?new $:(i=O(t,"map",[],function(o){return o==null&&(o=h),o!=null&&typeof o.$to_n=="function"?o.$to_n():o}),Reflect.construct($,i))},-2),w(E,"$js_define_method",function s($){var r=s.$$p||h;return s.$$p=null,this[$.$to_s()]=r}),w(E,"$js_define_method_on",function s($,r){var e=s.$$p||h;return s.$$p=null,$[r.$to_s()]=e}),w(E,"$js_length",function($){return $.length}),w(E,"$js_map",function s($){var r=s.$$p||h;return s.$$p=null,$.map(r)}),w(E,"$js_filter",function s($){var r=s.$$p||h;return s.$$p=null,$.filter(r)}),w(E,"$js_reduce",function s($,r){var e=s.$$p||h;return s.$$p=null,$.reduce(e,r)}),w(E,"$js_each",function s($){var r=s.$$p||h;return s.$$p=null,$.forEach(r)}),w(E,"$js_slice",function($,r,e){return e==null&&(e=h),D(e)?$.slice(r,e):$.slice(r)},-3),w(E,"$js_object",function(){return{}}),w(E,"$js_keys",function($){return Object.keys($)}),w(E,"$js_values",function($){return Object.values($)}),w(E,"$js_entries",function($){return Object.entries($)}),w(E,"$js_unique_count",function($){return new Set($).size}),w(E,"$js_fetch",function($){return fetch($)}),w(E,"$fetch_json",function s($){var r=s.$$p||h;s.$$p=null,fetch($).then(e=>e.json()).then(e=>r.$call(e)).catch(e=>console.error("Fetch error:",e))}),w(E,"$fetch_json_promise",function($){return fetch($).then(r=>r.json())}),w(E,"$fetch_json_safe",function($){return fetch($).then(function(r){if(!r.ok)throw new Error("Network response was not ok: "+r.status);return r.json()})}),w(E,"$fetch_all_json",function($){var r=this,e=h;return e=O($,"map",[],function t(i){var a=t.$$s==null?this:t.$$s;return i==null&&(i=h),a.$fetch_json_promise(i)},{$$s:r}),Promise.all(e)}),w(E,"$fetch_json_with_handlers",function($,r){var e,t,i=this,a=h;return r=T(r),e=J(r,"on_success"),t=v(r,"on_error"),t==null&&(t=h),a=i.$fetch_json_safe($),a=O(i,"js_then",[a],function(m){return m==null&&(m=h),e.$call(m)}),D(t)?O(i,"js_catch",[a],function(m){return m==null&&(m=h),t.$call(m)}):O(i,"js_catch",[a],function o(m){var N=o.$$s==null?this:o.$$s;return m==null&&(m=h),N.$console_error("Fetch error:",m)},{$$s:i})}),w(E,"$promise_all",function($){return Promise.all($)}),w(E,"$promise_race",function($){return Promise.race($)}),w(E,"$promise_resolve",function($){var r=h;return r=D($["$respond_to?"]("to_n"))?$.$to_n():$,Promise.resolve(r)}),w(E,"$promise_reject",function($){return Promise.reject($)}),w(E,"$js_then",function s($){var r=s.$$p||h;return s.$$p=null,$.then(r)}),w(E,"$js_catch",function s($){var r=s.$$p||h;return s.$$p=null,$.catch(r)}),w(E,"$js_finally",function s($){var r=s.$$p||h;return s.$$p=null,$.finally(r)}),w(E,"$stimulus_value",function($){var r=this,e=h;return e=""+r.$camelize($,!1)+"Value",this[e]}),w(E,"$set_stimulus_value",function($,r){var e=this,t=h,i=h;return t=""+e.$camelize($,!1)+"Value",i=D(r["$respond_to?"]("to_n"))?r.$to_n():r,this[t]=i}),w(E,"$has_stimulus_value?",function($){var r=this,e=h;return e="has"+r.$camelize($)+"Value",this[e]}),w(E,"$increment_stimulus_value",function($,r){var e=this;return r==null&&(r=1),e.$set_stimulus_value($,L(e.$stimulus_value($),r))},-2),w(E,"$decrement_stimulus_value",function($,r){var e=this;return r==null&&(r=1),e.$set_stimulus_value($,$e(e.$stimulus_value($),r))},-2),w(E,"$toggle_stimulus_value",function($){var r=this;return r.$set_stimulus_value($,r.$stimulus_value($)["$!"]())}),w(E,"$get_class",function($){var r=this,e=h;return e=""+r.$camelize($,!1)+"Class",this[e]}),w(E,"$get_classes",function($){var r=this,e=h;return e=""+r.$camelize($,!1)+"Classes",Array.from(this[e]||[])}),w(E,"$has_class_definition?",function($){var r=this,e=h;return e="has"+r.$camelize($)+"Class",this[e]}),w(E,"$apply_class",function($,r){var e=this,t=h,i=h;return t=e.$to_native_element($),i=e.$get_class(r),D(i)?t.classList.add(i):h}),w(E,"$apply_classes",function($,r){var e=this,t=h,i=h;return t=e.$to_native_element($),i=e.$get_classes(r),D(i)?t.classList.add(...i):h}),w(E,"$remove_applied_class",function($,r){var e=this,t=h,i=h;return t=e.$to_native_element($),i=e.$get_class(r),D(i)?t.classList.remove(i):h}),w(E,"$remove_applied_classes",function($,r){var e=this,t=h,i=h;return t=e.$to_native_element($),i=e.$get_classes(r),D(i)?t.classList.remove(...i):h}),w(E,"$has_outlet?",function($){var r=this,e=h;return e="has"+r.$camelize($)+"Outlet",this[e]}),w(E,"$get_outlet",function($){var r=this,e=h;return e=""+r.$camelize($,!1)+"Outlet",this[e]}),w(E,"$get_outlets",function($){var r=this,e=h;return e=""+r.$camelize($,!1)+"Outlets",Array.from(this[e]||[])}),w(E,"$get_outlet_element",function($){var r=this,e=h;return e=""+r.$camelize($,!1)+"OutletElement",this[e]}),w(E,"$get_outlet_elements",function($){var r=this,e=h;return e=""+r.$camelize($,!1)+"OutletElements",Array.from(this[e]||[])}),w(E,"$call_outlet",function($,r,e){var t,i,a=this,o=h;return t=Z(arguments,2),i=t,D(a["$has_outlet?"]($))?(o=a.$get_outlet($),O(a,"js_call_on",[o,r].concat(W(i)))):h},-3),w(E,"$call_all_outlets",function($,r,e){var t,i,a=this;return t=Z(arguments,2),i=t,O(a.$get_outlets($),"each",[],function o(m){var N=o.$$s==null?this:o.$$s;return m==null&&(m=h),O(N,"js_call_on",[m,r].concat(W(i)))},{$$s:a})},-3),w(E,"$stimulus_dispatch",function($,r){var e,t,i,a,o,m=h,N=h;return r=T(r),e=v(r,"detail"),e==null&&(e=new Map),t=v(r,"target"),t==null&&(t=h),i=v(r,"prefix"),i==null&&(i=h),a=v(r,"bubbles"),a==null&&(a=!0),o=v(r,"cancelable"),o==null&&(o=!0),m=D(e["$respond_to?"]("to_n"))?e.$to_n():e,N={detail:m,bubbles:a,cancelable:o},D(t["$nil?"]())||(N.target=t),D(i["$nil?"]())||(N.prefix=i),this.dispatch($,N)},-2),w(E,"$stimulus_dispatch_confirm",function($,r){var e,t=this,i=h;return r=T(r),e=v(r,"detail"),e==null&&(e=new Map),i=t.$stimulus_dispatch($,new Map([["detail",e],["cancelable",!0]])),!i.defaultPrevented},-2),w(E,"$action_params",function(){return event.params||{}}),w(E,"$action_param",function($){return(event.params||{})[$.$to_s()]}),w(E,"$action_param_int",function($,r){var e=this,t=h,i=h;return r==null&&(r=0),t=e.$action_param($),i=e.$parse_int(t),D(e["$is_nan?"](i))?r:i},-2),w(E,"$action_param_bool",function($){var r=this,e=h;return e=r.$action_param($),!!e&&e!=="false"&&e!=="0"}),w(E,"$has_action_param?",function($){return(event.params||{}).hasOwnProperty($.$to_s())}),w(E,"$this_application",function(){return this.application}),w(E,"$this_identifier",function(){return this.identifier}),w(E,"$this_element",function(){return this.element}),w(E,"$get_controller",function($,r){var e=this,t=h;return t=e.$to_native_element($),this.application.getControllerForElementAndIdentifier(t,r)}),w(E,"$get_controllers",function($,r){var e=this,t=h;t=e.$to_native_element($),Array.from(t.querySelectorAll('[data-controller~="'+r+'"]')).map(i=>this.application.getControllerForElementAndIdentifier(i,r)).filter(i=>i!==null)}),w(E,"$this_scope",function(){return this.scope.element}),w(E,"$in_scope?",function($){var r=this,e=h;return e=r.$to_native_element($),this.element.contains(e)}),w(E,"$debounce",function s($){var r=s.$$p||h;s.$$p=null;var e;return function(...t){clearTimeout(e),e=setTimeout(()=>r.$call(),$)}}),w(E,"$throttle",function s($){var r=s.$$p||h;s.$$p=null;var e=0;return function(...t){var i=Date.now();i-e>=$&&(e=i,r.$call())}}),w(E,"$debounced",function s($,r){var e=s.$$p||h,t,i=this,a=h,o=h;return i._debounce_timers==null&&(i._debounce_timers=h),s.$$p=null,r==null&&(r="default"),i._debounce_timers=D(a=i._debounce_timers)?a:new Map,o="_debounce_"+r,clearTimeout(i._debounce_timers["$[]"](o)),t=[o,setTimeout(function(){e.$call()},$)],O(i._debounce_timers,"[]=",t),t[t.length-1]},-2),w(E,"$throttled",function s($,r){var e=s.$$p||h,t=this,i=h,a=h,o=h,m=h;return t._throttle_times==null&&(t._throttle_times=h),s.$$p=null,r==null&&(r="default"),t._throttle_times=D(i=t._throttle_times)?i:new Map,a="_throttle_"+r,o=Date.now(),m=D(i=t._throttle_times["$[]"](a))?i:0,D(o-m>=$)?(t._throttle_times["$[]="](a,o),e.$call()):h},-2),w(E,"$copy_to_clipboard",function s($){var r=s.$$p||h;s.$$p=null,navigator.clipboard.writeText($).then(function(){D(r)&&r.$call()})}),w(E,"$read_from_clipboard",function s(){var $=s.$$p||h;s.$$p=null,navigator.clipboard.readText().then(function(r){$.$call(r)})}),w(E,"$deep_clone",function($){return JSON.parse(JSON.stringify($.$to_n()))}),w(E,"$deep_merge",function($,r){function e(t,i){var a=Object.assign({},t);for(var o in i)i.hasOwnProperty(o)&&(i[o]&&typeof i[o]=="object"&&!Array.isArray(i[o])?a[o]=e(a[o]||{},i[o]):a[o]=i[o]);return a}return e($.$to_n(),r.$to_n())}),w(E,"$pick",function($,r){var e,t,i=h;return e=Z(arguments,1),t=e,i=new Map,O(t.$flatten(),"each",[],function(o){var m,N=h,K=h;return o==null&&(o=h),N=o.$to_s(),K=$.$to_n(),D(K.hasOwnProperty(N))?(m=[N,K[N]],O(i,"[]=",m),m[m.length-1]):h}),i},-2),w(E,"$omit",function($,r){var e,t,i,a=h,o=h,m=h;return e=Z(arguments,1),t=e,a=O(t.$flatten(),"map",[],"to_s".$to_proc()),o=new Map,m=$.$to_n(),Object.keys(m).forEach(function(N){a.includes(N)||(i=[N,m[N]],O(o,"[]=",i),i[i.length-1])}),o},-2),w(E,"$unique",function($){return[...new Set($.$to_n())]}),w(E,"$intersection",function($,r){var e=h;return e=new Set(r.$to_n()),$.$to_n().filter(t=>e.has(t))}),w(E,"$difference",function($,r){var e=h;return e=new Set(r.$to_n()),$.$to_n().filter(t=>!e.has(t))}),w(E,"$union",function($,r){return[...new Set([...$.$to_n(),...r.$to_n()])]}),w(E,"$valid_email?",function($){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($)}),w(E,"$valid_url?",function($){try{return new URL($),!0}catch{return!1}}),w(E,"$valid_phone?",function($){var r=h;r=$.replace(/[\s\-\(\)\.]/g,"");var e=/^[\+]?[0-9]{10,15}$/;return e.test(r)}),w(E,"$blank?",function($){return D($["$nil?"]())?!0:D(typeof $=="string")?$.trim()==="":D(Array.isArray($))?$.length===0:!1}),w(E,"$present?",function($){var r=this;return r["$blank?"]($)["$!"]()}),w(E,"$min_length?",function($,r){return D($["$nil?"]())?!1:$.length>=r}),w(E,"$max_length?",function($,r){return D($["$nil?"]())?!1:$.length<=r}),w(E,"$matches_pattern?",function($,r){return D($["$nil?"]())?!1:new RegExp(r).test($)}),w(E,"$console_styled",function($,r){return r==null&&(r="color: blue; font-weight: bold;"),console.log("%c"+$,r)},-2),w(E,"$console_group",function s($,r){var e=s.$$p||h,t;return s.$$p=null,r=T(r),t=v(r,"collapsed"),t==null&&(t=!1),D(t)?console.groupCollapsed($):console.group($),e.$call(),console.groupEnd()},-2),w(E,"$console_table",function($){return console.table($.$to_n())}),w(E,"$console_time",function($){var r=h;return r=new Date().toISOString(),console.log("["+r+"] "+$)}),E.$private(),w(E,"$camelize",function($,r){var e=h,t=h;return r==null&&(r=!0),e=$.$to_s(),D(e["$include?"]("_"))?(t=e.$split("_"),D(r)?O(t,"map",[],"capitalize".$to_proc()).$join():L([t.$first()],O(t["$[]"](Y(1,-1,!1)),"map",[],"capitalize".$to_proc())).$join()):D(r)?L(e["$[]"](0).$upcase(),e["$[]"](Y(1,-1,!1)).$to_s()):L(e["$[]"](0).$downcase(),e["$[]"](Y(1,-1,!1)).$to_s())},-2)}(g[0],g)}(q[0],q)}(p[0],p)}(B[0],B),ee(B[0],"StimulusHelpers",S(S(S(b("OpalVite"),"Concerns"),"V1"),"StimulusHelpers"))};Opal.modules["services/todo_storage_service"]=function(n){var z=n.klass,w=n.def,D=n.truthy,x=[],O=n.nil;return n.add_stubs("include,attr_reader,storage_get_json,js_timestamp,js_iso_date,all,to_n,save"),function(Z,T,J){var v=z(Z,T,"TodoStorageService"),L=[v].concat(J),$e=n.$r(L),W=v.$$prototype;return W.storage_key=O,v.$include($e("StimulusHelpers")),v.$attr_reader("storage_key"),w(v,"$initialize",function(ee){var B=this;return ee==null&&(ee="opal_todos"),B.storage_key=ee},-1),w(v,"$all",function(){var ee=this;return ee.$storage_get_json(ee.storage_key,[])}),w(v,"$save",function(ee){var B=this;return localStorage.setItem(B.storage_key,JSON.stringify(ee))}),w(v,"$add",function(ee){var B=this,b=O,h=O;return b=new Map([["id",B.$js_timestamp()],["text",ee],["completed",!1],["createdAt",B.$js_iso_date()]]),h=B.$all(),h.push(b.$to_n()),B.$save(h),b.$to_n()}),w(v,"$find",function(ee){var B=this,b=O;return b=B.$all(),b.find(function(h){return h.id===ee})}),w(v,"$toggle",function(ee){var B=this,b=O,h=O;return b=B.$all(),h=b.find(function(S){return S.id===ee}),D(h)?(h.completed=!h.completed,B.$save(b),!0):!1}),w(v,"$update_text",function(ee,B){var b=this,h=O,S=O;return h=b.$all(),S=h.find(function(j){return j.id===ee}),D(S)?(S.text=B,b.$save(h),!0):!1}),w(v,"$delete",function(ee){var B=this,b=O,h=O;return b=B.$all(),h=b.filter(function(S){return S.id!==ee}),B.$save(h)}),w(v,"$clear_completed",function(){var ee=this,B=O,b=O,h=O;return B=ee.$all(),b=B.filter(function(S){return S.completed}).length,h=B.filter(function(S){return!S.completed}),ee.$save(h),b}),w(v,"$filter",function(ee){var B=this,b=O;switch(b=B.$all(),ee.valueOf()){case"active":return b.filter(function(h){return!h.completed});case"completed":return b.filter(function(h){return h.completed});default:return b}}),w(v,"$counts",function(){var ee=this,B=O,b=O,h=O,S=O;return B=ee.$all(),b=B.length,h=B.filter(function(j){return!j.completed}).length,S=B.filter(function(j){return j.completed}).length,new Map([["total",b],["active",h],["completed",S]])})}(x[0],null,x)};Opal.modules["services/todo_presenter"]=function(n){var z=n.klass,w=n.assign_ivar,D=n.def,x=n.truthy,O=n.eqeq,Z=[],T=n.nil;return n.add_stubs("include,get_target,set_html,render_todo_item,show_empty_state,hide_empty_state,clone_template,template_first_child,setup_todo_element,append_child,query,to_native_element,set_text,has_target?,target_set_html,[],==,show_target,hide_target,private,set_attr,add_class,setup_checkbox,setup_text,setup_buttons"),function(J,v,L){var $e=z(J,v,"TodoPresenter"),W=[$e].concat(L),Y=n.$r(W),ee=$e.$$prototype;return ee.controller=T,$e.$include(Y("StimulusHelpers")),D($e,"$initialize",w("controller")),D($e,"$render_all",function(b){var h=this,S=T,j=T,k=T;S=h.controller.$get_target("list"),h.$set_html(S,""),j=b.length;for(var F=0;F<j;F++)k=b[F],h.$render_todo_item(k,S);return x(j===0)?h.$show_empty_state():h.$hide_empty_state()}),D($e,"$render_todo_item",function(b,h){var S=this,j=T,k=T;return j=S.controller.$clone_template("template"),k=S.$template_first_child(j),x(k)?(S.$setup_todo_element(k,b),S.$append_child(h,j)):T}),D($e,"$update_todo_text",function(b,h){var S=this,j=T,k=T,F=T;return j=S.$query('[data-todo-id="'+b+'"]'),x(j)?(k=S.$to_native_element(j),F=k.querySelector(".todo-text"),x(F)?S.$set_text(F,h):T):T}),D($e,"$update_count",function(b){var h=this;return x(h.controller["$has_target?"]("count"))&&h.controller.$target_set_html("count",""+b["$[]"]("active")+" active, "+b["$[]"]("completed")+" completed"),O(b["$[]"]("total"),0)?h.$show_empty_state():T}),D($e,"$show_empty_state",function(){var b=this;return x(b.controller["$has_target?"]("emptyState"))?b.controller.$show_target("emptyState"):T}),D($e,"$hide_empty_state",function(){var b=this;return x(b.controller["$has_target?"]("emptyState"))?b.controller.$hide_target("emptyState"):T}),$e.$private(),D($e,"$setup_todo_element",function(b,h){var S=this;return S.$set_attr(b,"data-todo-id",h.id),x(h.completed)&&S.$add_class(b,"completed"),S.$setup_checkbox(b,h),S.$setup_text(b,h),S.$setup_buttons(b,h)}),D($e,"$setup_checkbox",function(b,h){var S=this,j=T;return j=b.querySelector(".todo-checkbox"),x(j)?(S.$set_attr(j,"data-todo-id",h.id),j.checked=h.completed):T}),D($e,"$setup_text",function(b,h){var S=this,j=T;return j=b.querySelector(".todo-text"),x(j)?S.$set_text(j,h.text):T}),D($e,"$setup_buttons",function(b,h){var S=this,j=T,k=T;return j=b.querySelector(".edit-btn"),x(j)&&S.$set_attr(j,"data-todo-id",h.id),k=b.querySelector(".delete-btn"),x(k)?S.$set_attr(k,"data-todo-id",h.id):T})}(Z[0],null,Z)};Opal.modules["controllers/todo_controller"]=function(n){var z=n.klass,w=n.send2,D=n.find_super,x=n.def,O=n.send,Z=n.truthy,T=n.eqeq,J=[],v=n.$r(J),L=n.nil;return n.add_stubs("include,targets=,values=,classes=,new,on_window_event,parse_int,handle_update_todo,render_todos,target_value,show_toast,get_target,has_class_definition?,apply_class,set_attr,set_timeout,add,target_set_value,remove_applied_class,remove_attr,event_data_int,toggle,delete,find,dispatch_window_event,clear_completed,==,event_data,query_all_element,each,remove_class,add_class,event_target,private,update_text,update_todo_text,filter,render_all,update_count,counts"),function($e,W,Y){var ee=z($e,W,"TodoController"),B=[ee].concat(Y),b=n.$r(B),h=ee.$$prototype;return h.storage_key_value=h.storage=h.presenter=L,ee.$include(b("StimulusHelpers")),ee["$targets="](["list","input","template","count","emptyState","form"]),ee["$values="](new Map([["storage_key","string"],["filter","string"]])),ee["$classes="](["loading","success"]),x(ee,"$initialize",function S(){var j=S.$$p||L,k=this;return S.$$p=null,w(k,D(k,"initialize",S,!1,!0),"initialize",[],j),k.storage_key_value="opal_todos",k.filter_value="all"}),x(ee,"$connect",function(){var j=this;return j.storage=b("TodoStorageService").$new(j.storage_key_value),j.presenter=b("TodoPresenter").$new(j),O(j,"on_window_event",["update-todo"],function k(F){var p=k.$$s==null?this:k.$$s,A=L,P=L,I=L;return F==null&&(F=L),A=F.detail,P=p.$parse_int(A.todoId),I=A.text,p.$handle_update_todo(P,I)},{$$s:j}),j.$render_todos()}),x(ee,"$add_todo",function(){var j=this,k=L,F=L,p=L;return k=j.$target_value("input"),k=k.trim(),Z(k==="")?(j.$show_toast("Please enter a todo item","error"),L):(F=j.$get_target("form"),Z(j["$has_class_definition?"]("loading"))&&(j.$apply_class(F,"loading"),p=F.querySelector("button"),Z(p)&&j.$set_attr(p,"disabled","true")),O(j,"set_timeout",[800],function A(){var P=A.$$s==null?this:A.$$s;return P.storage==null&&(P.storage=L),P.storage.$add(k),P.$target_set_value("input",""),Z(P["$has_class_definition?"]("loading"))&&(P.$remove_applied_class(F,"loading"),p=F.querySelector("button"),Z(p)&&P.$remove_attr(p,"disabled")),P.$render_todos(),Z(P["$has_class_definition?"]("success"))&&(P.$apply_class(F,"success"),O(P,"set_timeout",[1e3],function I(){var q=I.$$s==null?this:I.$$s;return q.$remove_applied_class(F,"success")},{$$s:P})),P.$show_toast("Todo added!","success")},{$$s:j}))}),x(ee,"$toggle_todo",function(){var j=this,k=L;return k=j.$event_data_int("todo-id"),Z(j.storage.$toggle(k))?j.$render_todos():L}),x(ee,"$delete_todo",function(){var j=this,k=L;return k=j.$event_data_int("todo-id"),j.storage.$delete(k),j.$render_todos(),j.$show_toast("Todo deleted","info")}),x(ee,"$edit_todo",function(){var j=this,k=L,F=L;return k=j.$event_data_int("todo-id"),F=j.storage.$find(k),Z(F)?j.$dispatch_window_event("open-modal",new Map([["title","Edit Todo"],["todoId",k],["todoText",F.text]])):L}),x(ee,"$clear_completed",function(){var j=this,k=L;return k=j.storage.$clear_completed(),T(k,0)?(j.$show_toast("No completed todos to clear","info"),L):(j.$render_todos(),j.$show_toast("Completed todos cleared","success"))}),x(ee,"$set_filter",function(){var j=this,k=L,F=L;return k=j.$event_data("filter"),this.filterValue=k,F=j.$query_all_element("[data-filter]"),O(F,"each",[],function p(A){var P=p.$$s==null?this:p.$$s;return A==null&&(A=L),P.$remove_class(A,"active")},{$$s:j}),j.$add_class(j.$event_target(),"active"),j.$render_todos()}),ee.$private(),x(ee,"$handle_update_todo",function(j,k){var F=this;return Z(F.storage.$update_text(j,k))?(F.presenter.$update_todo_text(j,k),F.$show_toast("Todo updated!","success")):L}),x(ee,"$render_todos",function(){var j=this,k=L,F=L;return k=this.filterValue||"all",F=j.storage.$filter(k),j.presenter.$render_all(F),j.presenter.$update_count(j.storage.$counts())}),x(ee,"$show_toast",function(j,k){var F=this;return F.$dispatch_window_event("show-toast",new Map([["message",j],["type",k]]))})}(J[0],v("StimulusController"),J)};Opal.modules["controllers/form_controller"]=function(n){var z=n.klass,w=n.return_val,D=n.def,x=n.truthy,O=n.neqeq,Z=n.send,T=[],J=n.$r(T),v=n.nil;return n.add_stubs("include,targets=,event_target,next_sibling,get_value,has_attr?,parse_int_or,get_attr,js_regexp_test,!=,add_class,has_class?,set_text,set_style,remove_class,prevent_default,query_all_element,each,dispatch_window_event"),function(L,$e,W){var Y=z(L,$e,"FormController"),ee=[Y].concat(W),B=n.$r(ee);return Y.$include(B("StimulusHelpers")),Y["$targets="](["input","error"]),D(Y,"$connect",w(v)),D(Y,"$validate",function(){var h=this,S=v,j=v,k=v,F=v,p=v,A=v,P=v,I=v;return S=h.$event_target(),j=h.$next_sibling(S),k=h.$get_value(S).trim(),F=h["$has_attr?"](S,"data-required"),p=h.$parse_int_or(h.$get_attr(S,"data-min-length"),0),A=h.$parse_int_or(h.$get_attr(S,"data-max-length"),1e3),P=h.$get_attr(S,"data-pattern"),I="",x(F)&&x(k==="")?I="This field is required":x(p>0&&k.length<p)?I="Must be at least "+p+" characters":x(A>0&&k.length>A)?I="Must be at most "+A+" characters":x(P)&&x(k!=="")&&(x(h.$js_regexp_test(P,k))||(I="Invalid format")),O(I,"")?(h.$add_class(S,"error"),x(j)&&x(h["$has_class?"](j,"error-message"))?(h.$set_text(j,I),h.$set_style(j,"display","block")):v):(h.$remove_class(S,"error"),x(j)&&x(h["$has_class?"](j,"error-message"))?h.$set_style(j,"display","none"):v)}),D(Y,"$submit",function(){var h=this,S=v,j=v;return h.$prevent_default(),S=h.$query_all_element('[data-form-target="input"]'),j=!0,Z(S,"each",[],function k(F){var p=k.$$s==null?this:k.$$s;F==null&&(F=v);const A=new Event("input",{bubbles:!0});return F.dispatchEvent(A),x(p["$has_class?"](F,"error"))?j=!1:v},{$$s:h}),x(j)?(h.$dispatch_window_event("show-toast",new Map([["message","Form submitted successfully!"],["type","success"]])),this.element.reset(),Z(S,"each",[],function k(F){var p=k.$$s==null?this:k.$$s,A=v;return F==null&&(F=v),p.$remove_class(F,"error"),A=p.$next_sibling(F),x(A)&&x(p["$has_class?"](A,"error-message"))?p.$set_style(A,"display","none"):v},{$$s:h})):(h.$dispatch_window_event("show-toast",new Map([["message","Please fix validation errors"],["type","error"]])),v)})}(T[0],J("StimulusController"),T)};Opal.modules["controllers/modal_controller"]=function(n){var z=n.klass,w=n.send,D=n.truthy,x=n.def,O=n.eqeq,Z=[],T=n.$r(Z),J=n.nil;return n.add_stubs("include,targets=,on_window_event,has_target?,target_set_text,target_set_value,get_target,set_attr,open_modal,close_modal,reset_form,event_target,close,==,event_key,get_value,dispatch_window_event,get_attr,parse_int,private,element_add_class,add_target_class,set_timeout,target_focus,lock_body_scroll,element_remove_class,remove_target_class,unlock_body_scroll,remove_attr"),function(v,L,$e){var W=z(v,L,"ModalController"),Y=[W].concat($e),ee=n.$r(Y);return W.$include(ee("StimulusHelpers")),W["$targets="](["overlay","content","title","body","input"]),x(W,"$connect",function(){var b=this;return w(b,"on_window_event",["open-modal"],function h(S){var j=h.$$s==null?this:h.$$s,k=J,F=J,p=J,A=J,P=J;return S==null&&(S=J),k=S.detail,F=k.title,p=k.todoText,A=k.todoId,D(j["$has_target?"]("title"))&&D(F)&&j.$target_set_text("title",F),D(j["$has_target?"]("input"))&&D(p)&&(j.$target_set_value("input",p),P=j.$get_target("input"),j.$set_attr(P,"data-todo-id",A)),j.$open_modal()},{$$s:b})}),x(W,"$open",function(){var b=this;return b.$open_modal()}),x(W,"$open_with_data",function(){var b=this,h=J,S=J,j=J,k=J,F=J;return h=arguments[0],S=h.title,j=h.todoText,k=h.todoId,D(b["$has_target?"]("title"))&&D(S)&&b.$target_set_text("title",S),D(b["$has_target?"]("input"))&&D(j)&&(b.$target_set_value("input",j),F=b.$get_target("input"),b.$set_attr(F,"data-todo-id",k)),b.$open_modal()}),x(W,"$close",function(){var b=this;return b.$close_modal(),D(b["$has_target?"]("input"))?b.$reset_form():J}),x(W,"$close_on_overlay",function(){var b=this,h=J,S=J;return h=b.$event_target(),S=b.$get_target("overlay"),D(h===S)?b.$close():J}),x(W,"$close_on_escape",function(){var b=this;return O(b.$event_key(),"Escape")?b.$close():J}),x(W,"$save",function(){var b=this,h=J,S=J,j=J;return h=b.$get_target("input"),D(h)?(S=b.$get_value(h),S=S.trim(),D(S==="")?(b.$dispatch_window_event("show-toast",new Map([["message","Please enter todo text"],["type","error"]])),J):(j=b.$get_attr(h,"data-todo-id"),b.$dispatch_window_event("update-todo",new Map([["todoId",b.$parse_int(j)],["text",S]])),b.$close_modal(),D(b["$has_target?"]("input"))?b.$reset_form():J)):J}),W.$private(),x(W,"$open_modal",function(){var b=this;return b.$element_add_class("active"),b.$add_target_class("overlay","active"),b.$add_target_class("content","active"),D(b["$has_target?"]("input"))&&w(b,"set_timeout",[100],function h(){var S=h.$$s==null?this:h.$$s;return S.$target_focus("input")},{$$s:b}),b.$lock_body_scroll()}),x(W,"$close_modal",function(){var b=this;return b.$element_remove_class("active"),b.$remove_target_class("overlay","active"),b.$remove_target_class("content","active"),b.$unlock_body_scroll()}),x(W,"$reset_form",function(){var b=this,h=J;return b.$target_set_value("input",""),h=b.$get_target("input"),b.$remove_attr(h,"data-todo-id")})}(Z[0],T("StimulusController"),Z)};Opal.modules["controllers/toast_controller"]=function(n){var z=n.klass,w=n.send,D=n.def,x=n.truthy,O=n.eqeqeq,Z=[],T=n.$r(Z),J=n.nil;return n.add_stubs("include,targets=,on_window_event,show,has_target?,get_target,query,puts,create_element,===,set_html,append_child,set_timeout,add_class,remove_class,remove_element,sample,[]"),function(v,L,$e){var W=z(v,L,"ToastController"),Y=[W].concat($e),ee=n.$r(Y);return W.$include(ee("StimulusHelpers")),W["$targets="](["container"]),D(W,"$connect",function(){var b=this;return w(b,"on_window_event",["show-toast"],function h(S){var j=h.$$s==null?this:h.$$s,k=J,F=J,p=J;return S==null&&(S=J),k=S.detail,F=k.message,p=k.type||"info",j.$show(F,p)},{$$s:b})}),D(W,"$show",function(b,h){var S=this,j=J,k=J,F=J,p=J;return b==null&&(b=J),h==null&&(h="info"),b=x(j=b)?j:arguments[0],x(arguments.length>1)&&(h=arguments[1]||"info"),k=x(S["$has_target?"]("container"))?S.$get_target("container"):J,k=x(j=k)?j:S.$query('.toast-container[data-toast-target="container"]'),x(k)?(F=S.$create_element("div"),F.className="toast toast-"+h,p=O("success",j=h)?"":O("error",j)?"":O("warning",j)?"":"",S.$set_html(F,'<span class="toast-icon">'+p+'</span><span class="toast-message">'+b+"</span>"),S.$append_child(k,F),w(S,"set_timeout",[10],function A(){var P=A.$$s==null?this:A.$$s;return P.$add_class(F,"show")},{$$s:S}),w(S,"set_timeout",[3e3],function A(){var P=A.$$s==null?this:A.$$s;return P.$remove_class(F,"show"),w(P,"set_timeout",[300],function I(){var q=I.$$s==null?this:I.$$s;return q.$remove_element(F)},{$$s:P})},{$$s:S})):(S.$puts("No toast container found"),J)},-1),D(W,"$show_test",function(){var b=this,h=J,S=J;return h=[new Map([["text","Success message!"],["type","success"]]),new Map([["text","Error message!"],["type","error"]]),new Map([["text","Warning message!"],["type","warning"]]),new Map([["text","Info message!"],["type","info"]])],S=h.$sample(),b.$show(S["$[]"]("text"),S["$[]"]("type"))})}(Z[0],T("StimulusController"),Z)};Opal.modules["controllers/theme_controller"]=function(n){var z=n.klass,w=n.def,D=n.truthy,x=n.eqeq,O=[],Z=n.$r(O),T=n.nil;return n.add_stubs("include,load_theme,get_root_attr,==,set_root_attr,storage_set,event_target,set_text,dispatch_window_event,private,storage_get,query_element"),function(J,v,L){var $e=z(J,v,"ThemeController"),W=[$e].concat(L),Y=n.$r(W);return $e.$include(Y("StimulusHelpers")),w($e,"$connect",function(){var B=this;return B.$load_theme()}),w($e,"$toggle",function(){var B=this,b=T,h=T,S=T,j=T;return b=D(h=B.$get_root_attr("data-theme"))?h:"light",S=x(b,"light")?"dark":"light",B.$set_root_attr("data-theme",S),B.$storage_set("theme",S),j=B.$event_target(),B.$set_text(j,x(S,"dark")?" Light Mode":" Dark Mode"),B.$dispatch_window_event("show-toast",new Map([["message","Switched to "+S+" mode"],["type","info"]]))}),$e.$private(),w($e,"$load_theme",function(){var B=this,b=T,h=T,S=T;return b=D(h=B.$storage_get("theme"))?h:"light",B.$set_root_attr("data-theme",b),S=B.$query_element('[data-action*="toggle"]'),D(S)?B.$set_text(S,x(b,"dark")?" Light Mode":" Dark Mode"):T})}(O[0],Z("StimulusController"),O)};Opal.queue(function(n){var z=n.top,w=[],D=n.$r(w);return n.nil,n.add_stubs("require,puts,register_all!"),z.$require("native"),z.$require("opal_stimulus/stimulus_controller"),z.$require("opal_vite/concerns/v1/stimulus_helpers"),z.$require("services/todo_storage_service"),z.$require("services/todo_presenter"),z.$require("controllers/todo_controller"),z.$require("controllers/form_controller"),z.$require("controllers/modal_controller"),z.$require("controllers/toast_controller"),z.$require("controllers/theme_controller"),z.$puts("Practical App - Todo with Opal"),z.$puts("Ruby version: "+D("RUBY_VERSION")),D("StimulusController")["$register_all!"](),z.$puts("All controllers registered!")});
