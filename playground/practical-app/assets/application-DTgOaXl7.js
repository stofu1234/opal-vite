Opal.modules.native=function(e){var k=e.hash_put,E=e.module,H=e.defs,x=e.slice,ee=e.truthy,Z=e.send,T=e.Kernel,J=e.extract_kwargs,g=e.ensure_kwargs,K=e.hash_get,$e=e.range,W=e.to_a,G=e.def,O=e.return_ivar,M=e.alias,v=e.klass,q=e.rb_minus,I=e.return_val,j=e.send2,z=e.find_super,P=e.eqeqeq,m=e.rb_ge,A=e.return_self,D=e.gvars,S=e.top,w=[],o=e.$r(w),d=e.nil,N=e.$$$;return e.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(h,l){var c=E(h,"Native"),X=[c].concat(l),y=e.$r(X);return H(c,"$is_a?",function(a,$){var n=this;try{return a instanceof n.$try_convert($)}catch{return!1}}),H(c,"$try_convert",function(a,$){var n=this;return $==null&&($=d),n["$native?"](a)?a:a["$respond_to?"]("to_n")?a.$to_n():$},-2),H(c,"$convert",function(a){var $=this;if($["$native?"](a))return a;if(a["$respond_to?"]("to_n"))return a.$to_n();$.$raise(y("ArgumentError"),""+a.$inspect()+" isn't native")}),H(c,"$call",function i(a,$,n){var t=i.$$p||d,r,s,u=this;i.$$p=null,r=x(arguments,2),s=r;var f=a[$];if(f instanceof Function){for(var b=new Array(s.length),C=0,L=s.length;C<L;C++){var F=s[C],V=u.$try_convert(F);b[C]=V===d?F:V}return t!==d&&b.push(t),u.$Native(f.apply(a,b))}else return u.$Native(f)},-3),H(c,"$proc",function i(){var a=i.$$p||d,$=this;return i.$$p=null,ee(a)||$.$raise(y("LocalJumpError"),"no block given"),Z(T,"proc",[],function n(t){var r,s,u=n.$$s==null?this:n.$$s,f=d;if(r=x(arguments),s=r,Z(s,"map!",[],function C(L){var F=C.$$s==null?this:C.$$s;return L==null&&(L=d),F.$Native(L)},{$$s:u}),f=u.$Native(this),this===e.global)return a.apply(u,s);var b=a.$$s;a.$$s=null;try{return a.apply(f,s)}finally{a.$$s=b}},{$$arity:-1,$$s:$})}),function(i,a){var $=E(i,"Helpers"),n=[$].concat(a),t=e.$r(n);return G($,"$alias_native",function r(s,u,f){var b,C,L,F;r.$$p;var V=this;return r.$$p=null,b=x(arguments,1),C=J(b),C=g(C),b.length>0&&(L=b.shift()),L==null&&(L=s),F=K(C,"as"),F==null&&(F=d),ee(L["$end_with?"]("="))?Z(V,"define_method",[s],function re(ae){var le=re.$$s==null?this:re.$$s;return le.native==null&&(le.native=d),ae==null&&(ae=d),le.native[L["$[]"]($e(0,-2,!1))]=t("Native").$convert(ae),ae},{$$s:V}):ee(F)?Z(V,"define_method",[s],function re(ae){var le=re.$$p||d,_e,de,ge=re.$$s==null?this:re.$$s,ve=d;return ge.native==null&&(ge.native=d),re.$$p=null,_e=x(arguments),de=_e,ve=Z(t("Native"),"call",[ge.native,L].concat(W(de)),le.$to_proc()),ee(ve)?F.$new(ve.$to_n()):d},{$$arity:-1,$$s:V}):Z(V,"define_method",[s],function re(ae){var le=re.$$p||d,_e,de,ge=re.$$s==null?this:re.$$s;return ge.native==null&&(ge.native=d),re.$$p=null,_e=x(arguments),de=_e,Z(t("Native"),"call",[ge.native,L].concat(W(de)),le.$to_proc())},{$$arity:-1,$$s:V})},-2),G($,"$native_reader",function(s){var u,f,b=this;return u=x(arguments),f=u,Z(f,"each",[],function C(L){var F=C.$$s==null?this:C.$$s;return L==null&&(L=d),Z(F,"define_method",[L],function V(){var re=V.$$s==null?this:V.$$s;return re.native==null&&(re.native=d),re.$Native(re.native[L])},{$$s:F})},{$$s:b})},-1),G($,"$native_writer",function(s){var u,f,b=this;return u=x(arguments),f=u,Z(f,"each",[],function C(L){var F=C.$$s==null?this:C.$$s;return L==null&&(L=d),Z(F,"define_method",[""+L+"="],function V(re){var ae=V.$$s==null?this:V.$$s;return ae.native==null&&(ae.native=d),re==null&&(re=d),ae.$Native(ae.native[L]=re)},{$$s:F})},{$$s:b})},-1),G($,"$native_accessor",function(s){var u,f,b=this;return u=x(arguments),f=u,Z(b,"native_reader",W(f)),Z(b,"native_writer",W(f))},-1)}(X[0],X),function(i,a){var $=E(i,"Wrapper"),n=[$].concat(a),t=e.$r(n);return G($,"$initialize",function(s){var u=this;return ee(T["$native?"](s))||T.$raise(t("ArgumentError"),""+s.$inspect()+" isn't native"),u.native=s}),G($,"$to_n",O("native")),H($,"$included",function(s){return s.$extend(t("Helpers"))})}(X[0],X),H(c,"$included",function(a){var $=this;return $.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),a.$include(y("Wrapper"))})}(w[0],w),function(h,l){var c=E(h,"Kernel"),X=[c].concat(l),y=e.$r(X);return G(c,"$native?",function(a){return a==null||!a.$$class}),G(c,"$Native",function i(a){i.$$p;var $=this;return i.$$p=null,ee(a==null)?d:ee($["$native?"](a))?N(y("Native"),"Object").$new(a):ee(a["$is_a?"](y("Array")))?Z(a,"map",[],function n(t){var r=n.$$s==null?this:n.$$s;return t==null&&(t=d),r.$Native(t)},{$$s:$}):ee(a["$is_a?"](y("Proc")))?Z($,"proc",[],function n(t){var r=n.$$p||d,s,u,f=n.$$s==null?this:n.$$s;return n.$$p=null,s=x(arguments),u=s,f.$Native(Z(a,"call",W(u),r.$to_proc()))},{$$arity:-1,$$s:$}):a}),M(c,"_Array","Array"),G(c,"$Array",function i(a,$){var n=i.$$p||d,t,r,s=this;return i.$$p=null,t=x(arguments,1),r=t,ee(s["$native?"](a))?Z(N(y("Native"),"Array"),"new",[a].concat(W(r)),n.$to_proc()).$to_a():s.$_Array(a)},-2)}(w[0],w),function(h,l){var c=v(h,l,"Object"),X=c.$$prototype;return X.native=d,c.$include(N(N("Native"),"Wrapper")),G(c,"$==",function(i){var a=this;return a.native===N("Native").$try_convert(i)}),G(c,"$has_key?",function(i){var a=this;return e.hasOwnProperty.call(a.native,i)}),G(c,"$each",function y(i){var a,$,n=y.$$p||d,t=this;if(y.$$p=null,a=x(arguments),$=a,n!==d){for(var r in t.native)e.yieldX(n,[r,t.native[r]]);return t}else return Z(t,"method_missing",["each"].concat(W($)))},-1),G(c,"$[]",function(i){var a=this,$=a.native[i];return $ instanceof Function?$:N("Native").$call(a.native,i)}),G(c,"$[]=",function(i,a){var $=this,n=d;return n=N("Native").$try_convert(a),ee(n===d)?$.native[i]=a:$.native[i]=n}),G(c,"$merge!",function(i){var a=this;i=N("Native").$convert(i);for(var $ in i)a.native[$]=i[$];return a}),G(c,"$respond_to?",function(i,a){var $=this;return a==null&&(a=!1),T.$instance_method("respond_to?").$bind($).$call(i,a)},-2),G(c,"$respond_to_missing?",function(i,a){var $=this;return e.hasOwnProperty.call($.native,i)},-2),G(c,"$method_missing",function y(i,a){var $=y.$$p||d,n,t,r,s=this;return y.$$p=null,n=x(arguments,1),t=n,i.charAt(i.length-1)==="="?(r=[i.$slice(0,q(i.$length(),1)),t["$[]"](0)],Z(s,"[]=",r),r[r.length-1]):Z(N("Native"),"call",[s.native,i].concat(W(t)),$.$to_proc())},-2),G(c,"$nil?",I(!1)),G(c,"$is_a?",function(i){var a=this;return e.is_a(a,i)}),G(c,"$instance_of?",function(i){var a=this;return a.$$class===i}),G(c,"$class",function(){var i=this;return i.$$class}),G(c,"$to_a",function y(i){var a=y.$$p||d,$=this;return y.$$p=null,i==null&&(i=new Map),Z(N(N("Native"),"Array"),"new",[$.native,i],a.$to_proc()).$to_a()},-1),G(c,"$inspect",function(){var i=this;return"#<Native:"+String(i.native)+">"}),M(c,"include?","has_key?"),M(c,"key?","has_key?"),M(c,"kind_of?","is_a?"),M(c,"member?","has_key?")}(o("Native"),o("BasicObject")),function(h,l,c){var X=v(h,l,"Array"),y=[X].concat(c),i=e.$r(y),a=X.$$prototype;return a.named=a.native=a.get=a.block=a.set=a.length=d,X.$include(N(i("Native"),"Wrapper")),X.$include(i("Enumerable")),G(X,"$initialize",function $(n,t){var r=$.$$p||d,s=this,u=d;return $.$$p=null,t==null&&(t=new Map),j(s,z(s,"initialize",$,!1,!0),"initialize",[n],null),s.get=ee(u=t["$[]"]("get"))?u:t["$[]"]("access"),s.named=t["$[]"]("named"),s.set=ee(u=t["$[]"]("set"))?u:t["$[]"]("access"),s.length=ee(u=t["$[]"]("length"))?u:"length",s.block=r,ee(s.$length()==null)?s.$raise(i("ArgumentError"),"no length found on the array-like object"):d},-2),G(X,"$each",function $(){var n=$.$$p||d,t=this;if($.$$p=null,!ee(n))return t.$enum_for("each");for(var r=0,s=t.$length();r<s;r++)e.yield1(n,t["$[]"](r));return t}),G(X,"$[]",function(n){var t=this,r=d,s=d;return r=P(i("String"),s=n)||P(i("Symbol"),s)?ee(t.named)?t.native[t.named](n):t.native[n]:P(i("Integer"),s)?ee(t.get)?t.native[t.get](n):t.native[n]:d,ee(r)?ee(t.block)?t.block.$call(r):t.$Native(r):d}),G(X,"$[]=",function(n,t){var r=this;return ee(r.set)?r.native[r.set](n,i("Native").$convert(t)):r.native[n]=i("Native").$convert(t)}),G(X,"$last",function(n){var t=this,r=d,s=d;if(n==null&&(n=d),ee(n)){for(r=q(t.$length(),1),s=[];ee(m(r,0));)s["$<<"](t["$[]"](r)),r=q(r,1);return s}else return t["$[]"](q(t.$length(),1))},-1),G(X,"$length",function(){var n=this;return n.native[n.length]}),G(X,"$inspect",function(){var n=this;return n.$to_a().$inspect()}),M(X,"to_ary","to_a")}(o("Native"),null,w),function(h,l){var c=v(h,l,"Numeric");return G(c,"$to_n",function(){var y=this;return y.valueOf()})}(w[0],null),function(h,l){var c=v(h,l,"Proc");return G(c,"$to_n",A)}(w[0],null),function(h,l){var c=v(h,l,"String");return G(c,"$to_n",function(){var y=this;return y.valueOf()})}(w[0],null),function(h,l){var c=v(h,l,"Regexp");return G(c,"$to_n",function(){var y=this;return y.valueOf()})}(w[0],null),function(h,l){var c=v(h,l,"MatchData");return G(c,"$to_n",O("matches"))}(w[0],null),function(h,l,c){var X=v(h,l,"Struct"),y=[X].concat(c),i=e.$r(y);return G(X,"$to_n",function(){var $=this,n=d;return n={},Z($,"each_pair",[],function(r,s){return r==null&&(r=d),s==null&&(s=d),n[r]=i("Native").$try_convert(s,s)}),n})}(w[0],null,w),function(h,l,c){var X=v(h,l,"Array"),y=[X].concat(c),i=e.$r(y);return G(X,"$to_n",function(){for(var $=this,n=[],t=0,r=$.length;t<r;t++){var s=$[t];n.push(i("Native").$try_convert(s,s))}return n})}(w[0],null,w),function(h,l){var c=v(h,l,"Boolean");return G(c,"$to_n",function(){var y=this;return y.valueOf()})}(w[0],null),function(h,l){var c=v(h,l,"Time");return G(c,"$to_n",A)}(w[0],null),function(h,l){var c=v(h,l,"NilClass");return G(c,"$to_n",function(){return null})}(w[0],null),ee(o("Hash")["$method_defined?"]("_initialize"))||function(h,l,c){var X=v(h,l,"Hash"),y=[X].concat(c),i=e.$r(y);M(X,"_initialize","initialize");function a($,n,t){t&&(t.constructor===void 0||t.constructor===Object||t instanceof Map)?k($,n,i("Hash").$new(t)):t&&t.$$is_array?(t=t.map(function(r){return r&&(r.constructor===void 0||r.constructor===Object||t instanceof Map)?i("Hash").$new(r):X.$Native(r)}),k($,n,t)):k($,n,X.$Native(t))}return G(X,"$initialize",function $(n){var t=$.$$p||d,r=this;if($.$$p=null,n!=null)if(n.constructor===void 0||n.constructor===Object){var s,u;for(s in n)u=n[s],a(r,s,u);return r}else n instanceof Map&&e.hash_each(n,!1,function(f,b){return a(r,f,b),[!1,!1]});return Z(r,"_initialize",[n],t.$to_proc())},-1),G(X,"$to_n",function(){var n=this,t={};return e.hash_each(n,!1,function(r,s){return t[i("Native").$try_convert(r,r)]=i("Native").$try_convert(s,s),[!1,!1]}),t})}(w[0],null,w),function(h,l){var c=v(h,l,"Module");return G(c,"$native_module",function(){var y=this;return e.global[y.$name()]=y})}(w[0],null),function(h,l,c){var X=v(h,l,"Class"),y=[X].concat(c),i=e.$r(y);return G(X,"$native_alias",function($,n){var t=this,r=t.prototype[e.jsid(n)];r||t.$raise(i("NameError").$new("undefined method `"+n+"' for class `"+t.$inspect()+"'",n)),t.prototype[$]=r}),G(X,"$native_class",function(){var $=this;return $.$native_module(),$.new=$.$new})}(w[0],null,w),D.$=D.global=S.$Native(e.global)};(function(e){var k;if(typeof globalThis<"u"?e=globalThis:typeof global<"u"?e=global:typeof window<"u"&&(e=window),e.console==null&&(e.console={}),typeof e.console=="object"?k=e.console:k={},"log"in k||(k.log=function(){}),"warn"in k||(k.warn=k.log),typeof e.Opal<"u")return k.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),e.Opal;var E,H,x,ee,Z,T,J,g=e.Opal={};g.global=e,g.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var K=Function.prototype.call,$e=Function.prototype.bind,W=Object.hasOwn||K.bind(Object.prototype.hasOwnProperty),G=Object.setPrototypeOf,O=K.bind(Array.prototype.slice),M=K.bind(Array.prototype.splice),v=4,q=v;function I(){return q+=2,q}g.uid=I,g.id=function(_){return _.$$is_number?_*2+1:(_.$$id==null&&m(_,"$$id",I()),_.$$id)};var j=g.gvars={};g.exit=function(_){j.DEBUG&&k.log("Exited with status "+_)},g.exceptions=[],g.pop_exception=function(_){var p=g.exceptions.pop();p===_||(p?j["!"]=p:j["!"]=E)};function z(_,p){if(_||(_=g.Exception||Error),J&&J.$raise)arguments.length>2?J.$raise(_.$new.apply(_,O(arguments,1))):J.$raise(_,p);else throw _.$new?_.$new(p):new _(p)}var P={value:void 0,enumerable:!1,configurable:!0,writable:!0};function m(_,p,U){typeof _=="string"?_[p]=U:(P.value=U,Object.defineProperty(_,p,P))}g.prop=m,g.defineProperty=g.prop,g.slice=O;var A=g.truthy=function(_){return _!==!1&&E!==_&&_!==void 0&&_!==null&&(!(_ instanceof Boolean)||_.valueOf()===!0)};g.falsy=function(_){return!A(_)},g.type_error=function(_,p,U,te){_=_.$$class,te&&U?(te=te.$$class,z(g.TypeError,"can't convert "+_+" into "+p+" ("+_+"#"+U+" gives "+te+")")):z(g.TypeError,"no implicit conversion of "+_+" into "+p)},g.coerce_to=function(_,p,U,te){var ue;return U==="to_int"&&p===g.Integer&&_.$$is_number?_<0?Math.ceil(_):Math.floor(_):U==="to_str"&&p===g.String&&_.$$is_string||g.is_a(_,p)?_:_["$respond_to?"].$$pristine&&_.$method_missing.$$pristine?(ue=_[de(U)],(ue==null||ue.$$stub)&&g.type_error(_,p),ue.apply(_,te)):(_["$respond_to?"](U)||g.type_error(_,p),te==null&&(te=[]),g.send(_,U,te))},g.respond_to=function(_,p,U){if(_==null||!_.$$class)return!1;U=!!U;var te=_[p];if(_["$respond_to?"].$$pristine){if(typeof te=="function"&&!te.$$stub)return!0;if(!_["$respond_to_missing?"].$$pristine)return g.send(_,_["$respond_to_missing?"],[p.substr(1),U])}else return g.send(_,_["$respond_to?"],[p.substr(1),U])},g.trace_class=!1,g.tracers_for_class=[];function D(_){var p,U,te;for(p=0,U=g.tracers_for_class.length;p<U;p++)te=g.tracers_for_class[p],te.trace_object=_,te.block.$call(te)}function S(_,p){if(_.$$autoload[p].loaded){if(_.$$autoload[p].loaded&&!_.$$autoload[p].required&&_.$$autoload[p].exception)throw _.$$autoload[p].exception}else{_.$$autoload[p].loaded=!0;try{g.Kernel.$require(_.$$autoload[p].path)}catch(U){throw _.$$autoload[p].exception=U,U}if(_.$$autoload[p].required=!0,_.$$const[p]!=null)return _.$$autoload[p].success=!0,_.$$const[p]}}function w(_,p){if(_){if(_.$$const[p]!=null)return _.$$const[p];if(_.$$autoload&&_.$$autoload[p])return S(_,p)}}function o(_,p){var U,te,ue;if(_.length!==0)for(U=0,te=_.length;U<te;U++){if(ue=_[U].$$const[p],ue!=null)return ue;if(_[U].$$autoload&&_[U].$$autoload[p])return S(_[U],p)}}function d(_,p){var U,te,ue;if(_!=null)for(ue=V(_),U=0,te=ue.length;U<te;U++){if(ue[U].$$const&&W(ue[U].$$const,p))return ue[U].$$const[p];if(ue[U].$$autoload&&ue[U].$$autoload[p])return S(ue[U],p)}}function N(_,p){if(_==null||_.$$is_module)return d(x,p)}function h(_,p){return(_||x).$const_missing(p)}g.const_get_local=function(_,p,U){var te;if(_!=null)return _==="::"&&(_=x),!_.$$is_module&&!_.$$is_class&&z(g.TypeError,_.toString()+" is not a class/module"),te=w(_,p),te!=null||U?te:h(_,p)},g.const_get_qualified=function(_,p,U){var te,ue,ce,he=g.const_cache_version;if(p==null)return te=w(x,_),te??g.const_get_qualified(x,_,U);if(_!=null)return _==="::"&&(_=x),!_.$$is_module&&!_.$$is_class&&z(g.TypeError,_.toString()+" is not a class/module"),(ue=_.$$const_cache)==null&&(m(_,"$$const_cache",Object.create(null)),ue=_.$$const_cache),ce=ue[p],ce==null||ce[0]!==he?((te=w(_,p))!=null||(te=d(_,p))!=null,ue[p]=[he,te]):te=ce[1],te!=null||U?te:h(_,p)},g.const_cache_version=1,g.const_get_relative=function(_,p,U){var te=_[0],ue,ce=g.const_cache_version,he,pe;return(he=_.$$const_cache)==null&&(m(_,"$$const_cache",Object.create(null)),he=_.$$const_cache),pe=he[p],pe==null||pe[0]!==ce?((ue=w(te,p))!=null||(ue=o(_,p))!=null||(ue=d(te,p))!=null||(ue=N(te,p))!=null,he[p]=[ce,ue]):ue=pe[1],ue!=null||U?ue:h(te,p)};function l(_,p,U){var te=!0;return(_==null||_==="::")&&(_=x),U.$$is_a_module&&((U.$$name==null||U.$$name===E)&&(U.$$name=p),U.$$base_module==null&&(U.$$base_module=_)),_.$$const=_.$$const||Object.create(null),(p in _.$$const||"$$autoload"in _&&p in _.$$autoload)&&(te=!1),_.$$const[p]=U,_.$$=_.$$const,g.const_cache_version++,_===x&&(g[p]=U),m(_,p,U),te&&_.$const_added&&!_.$const_added.$$pristine&&_.$const_added(p),U}g.const_set=l,g.constants=function(_,p){p==null&&(p=!0);var U,te=[_],ue,ce,he={},pe;for(p&&(te=te.concat(V(_))),p&&_.$$is_module&&(te=te.concat([g.Object]).concat(V(g.Object))),ue=0,ce=te.length;ue<ce&&(U=te[ue],!(_!==x&&U==x));ue++){for(pe in U.$$const)he[pe]=!0;if(U.$$autoload)for(pe in U.$$autoload)he[pe]=!0}return Object.keys(he)},g.const_remove=function(_,p){if(g.const_cache_version++,_.$$const[p]!=null){var U=_.$$const[p];return delete _.$$const[p],U}if(_.$$autoload&&_.$$autoload[p])return delete _.$$autoload[p],E;z(g.NameError,"constant "+_+"::"+_.$name()+" not defined")},g.const_get_relative_factory=function(_){return function(p,U){return g.$$(_,p,U)}},g.$$=g.const_get_relative,g.$$$=g.const_get_qualified,g.$r=g.const_get_relative_factory;function c(_){return _==null?!1:_.$$bridge?_:_.$$super?c(_.$$super):!1}function X(_,p,U){var te,ue;if((ue=c(p))?te=function(){var ye=new($e.apply(ue.$$constructor,ge(null,arguments)));return G(ye,te.$$prototype),ye}:te=function(){},_&&_!==E&&m(te,"displayName","::"+_),m(te,"$$name",_),m(te,"$$constructor",te),m(te,"$$prototype",te.prototype),m(te,"$$const",{}),m(te,"$$is_class",!0),m(te,"$$is_a_module",!0),m(te,"$$super",p),m(te,"$$cvars",{}),m(te,"$$own_included_modules",[]),m(te,"$$own_prepended_modules",[]),m(te,"$$ancestors",[]),m(te,"$$ancestors_cache_version",null),m(te,"$$subclasses",[]),m(te,"$$cloned_from",[]),m(te.$$prototype,"$$class",te),g.Class&&G(te,g.Class.prototype),p!=null){if(G(te.$$prototype,p.$$prototype),U!==!0)if(typeof WeakRef<"u"){var ce,he,pe=[];for(ce=0;ce<p.$$subclasses.length;ce++)he=p.$$subclasses[ce],he.deref()!==void 0&&pe.push(he);pe.push(new WeakRef(te)),p.$$subclasses=pe}else p.$$subclasses.push(te);p.$$meta&&g.build_class_singleton_class(te)}return te}g.allocate_class=X;function y(_,p){var U=w(_,p);if(U)return U.$$is_class||z(g.TypeError,p+" is not a class"),U}function i(_,p){_.$$super!==p&&z(g.TypeError,"superclass mismatch for class "+_.$$name)}g.klass=function(_,p,U){var te;_==null||_=="::"?_=x:!_.$$is_class&&!_.$$is_module&&(_=_.$$class),p!=null&&(!p.hasOwnProperty||p.hasOwnProperty&&!p.hasOwnProperty("$$is_class"))&&(p.constructor&&p.constructor.name=="Function"?(te=p,p=x):z(g.TypeError,"superclass must be a Class ("+(p.constructor&&(p.constructor.name||p.constructor.$$name)||typeof p)+" given)"));var ue=y(_,U);return ue!=null?p&&i(ue,p):(p==null&&(p=x),ue=X(U,p),l(_,U,ue),p.$inherited&&p.$inherited(ue),te&&g.bridge(te,ue)),g.trace_class&&D(ue),ue};function a(_){var p=function(){},U=p;return _&&m(p,"displayName",_+".constructor"),m(U,"$$name",_),m(U,"$$prototype",p.prototype),m(U,"$$const",{}),m(U,"$$is_module",!0),m(U,"$$is_a_module",!0),m(U,"$$cvars",{}),m(U,"$$iclasses",[]),m(U,"$$own_included_modules",[]),m(U,"$$own_prepended_modules",[]),m(U,"$$ancestors",[U]),m(U,"$$ancestors_cache_version",null),m(U,"$$cloned_from",[]),G(U,g.Module.prototype),U}g.allocate_module=a;function $(_,p){var U=w(_,p);return U==null&&_===x&&(U=d(x,p)),U&&!U.$$is_module&&U!==x&&z(g.TypeError,p+" is not a module"),U}g.module=function(_,p){var U;return _==null||_=="::"?_=x:!_.$$is_class&&!_.$$is_module&&(_=_.$$class),U=$(_,p),U==null&&(U=a(p),l(_,p,U)),g.trace_class&&D(U),U},g.get_singleton_class=function(_){return _.$$is_number&&z(g.TypeError,"can't define singleton"),_.$$meta?_.$$meta:_.hasOwnProperty("$$is_class")?g.build_class_singleton_class(_):_.hasOwnProperty("$$is_module")?g.build_module_singleton_class(_):g.build_object_singleton_class(_)};function n(_,p){_.hasOwnProperty("$$meta")?_.$$meta=p:m(_,"$$meta",p),_.$$frozen?_.$$meta.$freeze():G(_,p.$$prototype)}g.build_class_singleton_class=function(_){if(_.$$meta)return _.$$meta;var p=_===H?Z:g.get_singleton_class(_.$$super),U=X(null,p,!0);return m(U,"$$is_singleton",!0),m(U,"$$singleton_of",_),n(_,U),m(_,"$$class",g.Class),U},g.build_module_singleton_class=function(_){if(_.$$meta)return _.$$meta;var p=X(null,g.Module,!0);return m(p,"$$is_singleton",!0),m(p,"$$singleton_of",_),n(_,p),m(_,"$$class",g.Module),p},g.build_object_singleton_class=function(_){var p=_.$$class,U=X(E,p,!0);return m(U,"$$is_singleton",!0),m(U,"$$singleton_of",_),delete U.$$prototype.$$class,n(_,U),U},g.is_method=function(_){return _[0]==="$"&&_[1]!=="$"},g.instance_methods=function(_){for(var p=Object.create(null),U=[],te=V(_),ue=0,ce=te.length;ue<ce;ue++){var he=te[ue],pe=he.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ze=ye.length;we<ze;we++){var Ee=ye[we];if(!p[Ee]){if(g.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);U.push(qe)}}p[Ee]=!0}}}return U},g.own_instance_methods=function(_){var p=[],U=_.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);for(var te=Object.getOwnPropertyNames(U),ue=0,ce=te.length;ue<ce;ue++){var he=te[ue];if(g.is_method(he)){var pe=U[he];if(!pe.$$stub){var ye=he.slice(1);p.push(ye)}}}return p},g.methods=function(_){return g.instance_methods(_.$$meta||_.$$class)},g.own_methods=function(_){return _.$$meta?g.own_instance_methods(_.$$meta):[]},g.receiver_methods=function(_){var p=g.get_singleton_class(_),U=g.own_instance_methods(p),te=g.own_instance_methods(p.$$super);return U.concat(te)},g.class_variables=function(_){var p=V(_),U,te=p.length,ue={};for(U=te-1;U>=0;U--){var ce=p[U];for(var he in ce.$$cvars)ue[he]=ce.$$cvars[he]}return ue},g.class_variable_set=function(_,p,U){var te=V(_),ue,ce=te.length;for(ue=ce-2;ue>=0;ue--){var he=te[ue];if(W(he.$$cvars,p))return he.$$cvars[p]=U,U}return _.$$cvars[p]=U,U},g.class_variable_get=function(_,p,U){if(W(_.$$cvars,p))return _.$$cvars[p];var te=V(_),ue,ce=te.length;for(ue=0;ue<ce;ue++){var he=te[ue];if(W(he.$$cvars,p))return he.$$cvars[p]}return U||z(g.NameError,"uninitialized class variable "+p+" in "+_.$name()),E};function t(_){return _.hasOwnProperty("$$iclass")&&_.hasOwnProperty("$$root")}function r(_){for(var p=[],U,te=Object.getPrototypeOf(_.$$prototype);te&&!te.hasOwnProperty("$$class");)U=L(te),U&&p.push(U),te=Object.getPrototypeOf(te);return p}function s(_){var p=[],U,te=Object.getPrototypeOf(_.$$prototype);if(_.$$prototype.hasOwnProperty("$$dummy"))for(;te&&te!==_.$$prototype.$$define_methods_on;)U=L(te),U&&p.push(U),te=Object.getPrototypeOf(te);return p}g.append_features=function(_,p){var U=V(_),te=[];U.indexOf(p)!==-1&&z(g.ArgumentError,"cyclic include detected");for(var ue=0,ce=U.length;ue<ce;ue++){var he=U[ue],pe=f(he);m(pe,"$$included",!0),te.push(pe)}var ye=V(p),we=C(te),ze,Ee;if(ye.indexOf(_)===-1)ze=p.$$prototype,Ee=Object.getPrototypeOf(p.$$prototype);else{for(var xe=p.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===_&&t(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var ke=Object.getPrototypeOf(qe);ke.hasOwnProperty("$$iclass")&&!t(ke);)ke=Object.getPrototypeOf(ke);ze=xe,Ee=ke}else ze=p.$$prototype,Ee=Object.getPrototypeOf(p.$$prototype)}G(ze,we.first),G(we.last,Ee),p.$$own_included_modules=r(p),g.const_cache_version++},g.prepend_features=function(_,p){var U=V(_),te=[];U.indexOf(p)!==-1&&z(g.ArgumentError,"cyclic prepend detected");for(var ue=0,ce=U.length;ue<ce;ue++){var he=U[ue],pe=f(he);m(pe,"$$prepended",!0),te.push(pe)}var ye=C(te),we=p.$$prototype,ze=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=b(p),u(p),m(we,"$$dummy",!0),m(we,"$$define_methods_on",Ee),G(we,Ee),G(Ee,ze));var ke=V(p);if(ke.indexOf(_)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else z(g.RuntimeError,"Prepending a module multiple times is not supported");G(xe,ye.first),G(ye.last,qe),p.$$own_prepended_modules=s(p),g.const_cache_version++};function u(_){for(var p=_.$$prototype,U=Object.getOwnPropertyNames(p),te=0;te<U.length;te++){var ue=U[te];g.is_method(ue)&&delete p[ue]}}function f(_){var p=b(_);return _.$$is_module&&_.$$iclasses.push(p),p}function b(_){var p={},U=_.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);var te=Object.getOwnPropertyNames(U),ue=te.length,ce;for(ce=0;ce<ue;ce++){var he=te[ce];m(p,he,U[he])}return m(p,"$$iclass",!0),m(p,"$$module",_),p}function C(_){var p=_.length,U=_[0];if(m(U,"$$root",!0),p===1)return{first:U,last:U};for(var te=U,ue=1;ue<p;ue++){var ce=_[ue];G(te,ce),te=ce}return{first:_[0],last:_[p-1]}}g.bridge=function(_,p){_.hasOwnProperty("$$bridge")&&z(g.ArgumentError,"already bridged"),m(_,"$$bridge",p),G(_.prototype,(p.$$super||g.Object).$$prototype),m(p,"$$prototype",_.prototype),m(p.$$prototype,"$$class",p),m(p,"$$constructor",_),m(p,"$$bridge",!0)};function L(_){if(!_.hasOwnProperty("$$dummy")){if(_.hasOwnProperty("$$iclass"))return _.$$module;if(_.hasOwnProperty("$$class"))return _.$$class}}function F(_){return _.$$own_prepended_modules.concat([_]).concat(_.$$own_included_modules)}function V(_){if(!_)return[];if(_.$$ancestors_cache_version===g.const_cache_version)return _.$$ancestors;var p=[],U,te,ue;for(U=0,te=F(_),ue=te.length;U<ue;U++)p.push(te[U]);if(_.$$super)for(U=0,te=V(_.$$super),ue=te.length;U<ue;U++)p.push(te[U]);return _.$$ancestors_cache_version=g.const_cache_version,_.$$ancestors=p,p}g.ancestors=V,g.included_modules=function(_){for(var p=[],U=null,te=Object.getPrototypeOf(_.$$prototype);te&&Object.getPrototypeOf(te);te=Object.getPrototypeOf(te))U=L(te),U&&U.$$is_module&&te.$$iclass&&te.$$included&&p.push(U);return p},g.add_stubs=function(_){var p=g.BasicObject.$$prototype,U,te;_=_.split(",");for(var ue=0,ce=_.length;ue<ce;ue++)U=de(_[ue]),te=p[U],(te==null||te.$$stub)&&g.add_stub_for(p,U)},g.add_stub_for=function(_,p){m(_,p,g.stub_for(p))},g.stub_for=function(_){function p(){return this.$method_missing.$$p=p.$$p,p.$$p=null,this.$method_missing.apply(this,ge(_.slice(1),arguments))}return p.$$stub=!0,p},g.ac=function(_,p,U,te){var ue="";U.$$is_a_module?ue+=U.$$name+".":ue+=U.$$class.$$name+"#",ue+=te,z(g.ArgumentError,"["+ue+"] wrong number of arguments (given "+_+", expected "+p+")")},g.block_ac=function(_,p,U){var te="`block in "+U+"'";z(g.ArgumentError,te+": wrong number of arguments (given "+_+", expected "+p+")")};function re(_){return _.hasOwnProperty("$$meta")&&_.$$meta!==null?V(_.$$meta):V(_.$$class)}g.find_super=function(_,p,U,te,ue){var ce=de(p),he,pe,ye,we,ze=-1,Ee;for(he=re(_),we=U.$$owner,Ee=0;Ee<he.length;Ee++)if(pe=he[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ze=Ee;break}for(Ee=ze+1;Ee<he.length;Ee++){pe=he[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(ce)){ye=xe[ce];break}}return!te&&ye&&ye.$$stub&&_.$method_missing.$$pristine&&z(g.NoMethodError,"super: no superclass method `"+p+"' for "+_,p),ye.$$stub&&!ue?null:ye},g.find_block_super=function(_,p,U,te,ue){var ce=p;return U||z(g.RuntimeError,"super called outside of method"),ue&&U.$$define_meth&&z(g.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),U.$$def&&(ce=U.$$jsid),g.find_super(_,ce,U,te)},g.find_super_dispatcher=g.find_super,g.find_iter_super_dispatcher=g.find_block_super;function ae(_,p,U){try{_(p)}catch(te){if(te===U)return U.$v;throw te}}g.yield1=function(_,p){typeof _!="function"&&z(g.LocalJumpError,"no block given");var U=_.$$has_top_level_mlhs_arg,te=_.$$has_trailing_comma_in_args,ue=_.$$is_lambda&&_.$$ret;return(_.length>1||(U||te)&&_.length===1)&&(p=g.to_ary(p)),(_.length>1||te&&_.length===1)&&p.$$is_array?ue?ae(_.apply.bind(_,null),p,_.$$ret):_.apply(null,p):ue?ae(_,p,_.$$ret):_(p)},g.yieldX=function(_,p){return typeof _!="function"&&z(g.LocalJumpError,"no block given"),_.length>1&&p.length===1&&p[0].$$is_array&&(p=p[0]),_.$$is_lambda&&_.$$ret?ae(_.apply.bind(_,null),p,_.$$ret):_.apply(null,p)},g.rescue=function(_,p){for(var U=0;U<p.length;U++){var te=p[U];if(te.$$is_array){var ue=g.rescue(_,te);if(ue)return ue}else if(te===g.JS.Error||te["$==="](_))return te}return null},g.is_a=function(_,p){if(p!=null&&_.$$meta===p||_.$$class===p)return!0;if(_.$$is_number&&p.$$is_number_class)return p.$$is_integer_class?_%1===0:!0;var U=V(_.$$is_class?g.get_singleton_class(_):_.$$meta||_.$$class);return U.indexOf(p)!==-1},g.to_hash=function(_){if(_.$$is_hash)return _;if(_["$respond_to?"]("to_hash",!0)){var p=_.$to_hash();if(p.$$is_hash)return p;z(g.TypeError,"Can't convert "+_.$$class+" to Hash ("+_.$$class+"#to_hash gives "+p.$$class+")")}else z(g.TypeError,"no implicit conversion of "+_.$$class+" into Hash")},g.to_ary=function(_){if(_.$$is_array)return _;if(_["$respond_to?"]("to_ary",!0)){var p=_.$to_ary();if(p===E)return[_];if(p.$$is_array)return p;z(g.TypeError,"Can't convert "+_.$$class+" to Array ("+_.$$class+"#to_ary gives "+p.$$class+")")}else return[_]},g.to_a=function(_){if(_.$$is_array)return _.slice();if(_["$respond_to?"]("to_a",!0)){var p=_.$to_a();if(p===E)return[_];if(p.$$is_array)return p;z(g.TypeError,"Can't convert "+_.$$class+" to Array ("+_.$$class+"#to_a gives "+p.$$class+")")}else return[_]},g.extract_kwargs=function(_){var p=_[_.length-1];if(p!=null&&g.respond_to(p,"$to_hash",!0))return M(_,_.length-1),p},g.kwrestargs=function(_,p){var U=new Map;return g.hash_each(_,!1,function(te,ue){return p[te]||g.hash_put(U,te,ue),[!1,!1]}),U};function le(_,p){typeof p=="number"?_.$$arity=p:typeof p=="object"&&Object.assign(_,p)}var _e=new Map;function de(_){var p=_e.get(_);return p||(p="$"+_,_e.set(_,p)),p}g.jsid=de;function ge(_,p){return p.$$is_array||(p=O(p)),[_].concat(p)}g.send=function(_,p,U,te,ue){var ce;return typeof p=="function"?(ce=p,p=null):typeof p=="string"?ce=_[de(p)]:z(g.NameError,"Passed method should be a string or a function"),g.send2(_,ce,p,U,te,ue)},g.send2=function(_,p,U,te,ue,ce){return p==null&&U!=null&&_.$method_missing&&(p=_.$method_missing,te=ge(U,te)),le(ue,ce),typeof ue=="function"&&(p.$$p=ue),p.apply(_,te)},g.refined_send=function(_,p,U,te,ue,ce){var he,pe,ye,we,ze,Ee,xe,qe,ke,Ae;for(we=re(p),he=0;he<we.length;he++)for(ze=g.id(we[he]),pe=0;pe<_.length;pe++)for(Ee=_[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ze]>"u")&&(ke=qe[ze],typeof ke.$$prototype[de(U)]<"u")))return Ae=ke.$$prototype[de(U)],g.send2(p,Ae,U,te,ue,ce);return g.send(p,U,te,ue,ce)},g.lambda=function(_,p){return _.$$is_lambda=!0,le(_,p),_},g.def=function(_,p,U,te){return le(U,te),_===g.top?g.defn(g.Object,p,U):!_.$$eval&&_.$$is_a_module?g.defn(_,p,U):g.defs(_,p,U)},g.defn=function(_,p,U){R(_),U.displayName=p,U.$$owner=_;var te=p.substr(1),ue=_.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),m(ue,p,U),_.$$is_module){_.$$module_function&&g.defs(_,p,U);for(var ce=0,he=_.$$iclasses,pe=he.length;ce<pe;ce++){var ye=he[ce];m(ye,p,U)}}var we=_.$$singleton_of;return _.$method_added&&!_.$method_added.$$stub&&!we?_.$method_added(te):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(te),te},g.defs=function(_,p,U,te){return le(U,te),(_.$$is_string||_.$$is_number)&&z(g.TypeError,"can't define singleton"),g.defn(g.get_singleton_class(_),p,U)};function ve(_,p){if(_.$$is_module)for(var U=0,te=_.$$iclasses,ue=te.length;U<ue;U++){var ce=te[U];delete ce[p]}}g.rdef=function(_,p){W(_.$$prototype,p)||z(g.NameError,"method '"+p.substr(1)+"' not defined in "+_.$name()),delete _.$$prototype[p],ve(_,p),_.$$is_singleton?_.$$prototype.$singleton_method_removed&&!_.$$prototype.$singleton_method_removed.$$stub&&_.$$prototype.$singleton_method_removed(p.substr(1)):_.$method_removed&&!_.$method_removed.$$stub&&_.$method_removed(p.substr(1))},g.udef=function(_,p){(!_.$$prototype[p]||_.$$prototype[p].$$stub)&&z(g.NameError,"method '"+p.substr(1)+"' not defined in "+_.$name()),g.add_stub_for(_.$$prototype,p),ve(_,p),_.$$is_singleton?_.$$prototype.$singleton_method_undefined&&!_.$$prototype.$singleton_method_undefined.$$stub&&_.$$prototype.$singleton_method_undefined(p.substr(1)):_.$method_undefined&&!_.$method_undefined.$$stub&&_.$method_undefined(p.substr(1))};function me(_){return typeof _=="function"&&!_.$$stub}g.alias=function(_,p,U){var te=de(p),ue=de(U),ce,he;if(typeof _.$$prototype>"u"&&(_=g.Object),ce=_.$$prototype[ue],_.$$eval)return g.alias(g.get_singleton_class(_),p,U);if(!me(ce)){for(var pe=_.$$super;typeof ce!="function"&&pe;)ce=pe[ue],pe=pe.$$super;!me(ce)&&_.$$is_module&&(ce=g.Object.$$prototype[ue]),me(ce)||z(g.NameError,"undefined method `"+U+"' for class `"+_.$name()+"'")}return ce.$$alias_of&&(ce=ce.$$alias_of),he=g.wrap_method_body(ce),he.displayName=p,he.$$alias_of=ce,he.$$alias_name=p,g.defn(_,te,he),_},g.wrap_method_body=function(_){var p=function(){var U=p.$$p;return p.$$p=null,g.send(this,_,arguments,U)};try{Object.defineProperty(p,"length",{value:_.length})}catch{}return p.$$arity=_.$$arity==null?_.length:_.$$arity,p.$$parameters=_.$$parameters,p.$$source_location=_.$$source_location,p},g.alias_gvar=function(_,p){return Object.defineProperty(j,_,{configurable:!0,enumerable:!0,get:function(){return j[p]},set:function(U){j[p]=U}}),E},g.alias_native=function(_,p,U){var te=de(p),ue=_.$$prototype[U];return(typeof ue!="function"||ue.$$stub)&&z(g.NameError,"undefined native method `"+U+"' for class `"+_.$name()+"'"),g.defn(_,te,ue),_},g.hash_init=function(_){k.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},g.hash_clone=function(_,p){return p.$$none=_.$$none,p.$$proc=_.$$proc,g.hash_each(_,p,function(U,te){return g.hash_put(p,U,te),[!1,p]})},g.hash_put=function(_,p,U){var te=typeof p;if(te==="string"||te==="symbol"||te==="number"||te==="boolean"||te==="bigint")_.set(p,U);else if(p.$$is_string)_.set(p.valueOf(),U);else{_.$$keys||(_.$$keys=new Map);var ue=p.$$is_string?p.valueOf():_.$$by_identity?g.id(p):p.$hash(),ce=_.$$keys;if(!ce.has(ue)){ce.set(ue,[p]),_.set(p,U);return}for(var he=ce.get(ue),pe,ye=0;ye<he.length;ye++)if(pe=he[ye],p===pe||p["$eql?"](pe)){_.set(pe,U);return}he.push(p),_.set(p,U)}},g.hash_get=function(_,p){var U=typeof p;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return _.get(p);if(_.$$keys){var te=p.$$is_string?p.valueOf():_.$$by_identity?g.id(p):p.$hash(),ue=_.$$keys.get(te),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],p===ce||p["$eql?"](ce))return _.get(ce)}else if(p.$$is_string)return _.get(te)}else if(p.$$is_string)return _.get(p.valueOf())};function be(_,p){var U=_.get(p);if(U!==void 0)return _.delete(p),U}g.hash_delete=function(_,p){var U=typeof p;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return be(_,p);if(_.$$keys){var te=p.$$is_string?p.valueOf():_.$$by_identity?g.id(p):p.$hash(),ue=_.$$keys.get(te),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],p===ce||p["$eql?"](ce))return ue.splice(he,1),ue.length===0&&_.$$keys.delete(te),be(_,ce)}else if(p.$$is_string)return be(_,te)}else if(p.$$is_string)return be(_,p.valueOf())},g.hash_rehash=function(_){var p=_.$$keys;return p&&p.clear(),g.hash_each(_,!1,function(U,te){var ue=typeof U;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var ce=U.$$is_string?U.valueOf():_.$$by_identity?g.id(U):U.$hash();if(p||(_.$$keys=p=new Map),!p.has(ce))return p.set(ce,[U]),[!1,!1];for(var he=p.get(ce),pe=he.length===1?he:O(he),ye,we=0;we<pe.length;we++)ye=pe[we],(U===ye||U["$eql?"](ye))&&(he.splice(he.indexOf(ye),1),_.delete(ye));return he.push(U),[!1,!1]}),_},g.hash=function(){var _=arguments.length,p,U,te,ue,ce,he;if(_===1&&arguments[0].$$is_hash)return arguments[0];if(U=new Map,_===1)if(p=arguments[0],arguments[0].$$is_array){for(ue=p.length,te=0;te<ue;te++)p[te].length!==2&&z(g.ArgumentError,"value not of length 2: "+p[te].$inspect()),ce=p[te][0],he=p[te][1],g.hash_put(U,ce,he);return U}else{p=arguments[0];for(ce in p)W(p,ce)&&(he=p[ce],g.hash_put(U,ce,he));return U}for(_%2!==0&&z(g.ArgumentError,"odd number of arguments for Hash"),te=0;te<_;te+=2)ce=arguments[te],he=arguments[te+1],g.hash_put(U,ce,he);return U},g.hash2=function(_,p){k.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var U=new Map,te=0,ue=_.length;te<ue;te++)U.set(_[te],p[_[te]]);return U},g.hash_each=function(_,p,U){for(var te,ue=0,ce,he=Array.from(_.entries()),pe=he.length;ue<pe;ue++)if(ce=he[ue],te=U(ce[0],ce[1]),te[0])return te[1];return te?te[1]:p},g.range=function(_,p,U){var te=new g.Range;return te.begin=_,te.end=p,te.excl=U,te};var ie=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];g.ivar=function(_){return ie.indexOf(_)!==-1&&(_+="$"),_};function R(_){_.$$frozen&&z(g.FrozenError,"can't modify frozen "+_.$class()+": "+_,new Map([["receiver",_]]))}g.deny_frozen_access=R,g.freeze=function(_){return m(_,"$$frozen",!0),_.hasOwnProperty("$$id")||m(_,"$$id",I()),_.hasOwnProperty("$$meta")?_.$$meta.$freeze():m(_,"$$meta",null),_.hasOwnProperty("$$comparable")||m(_,"$$comparable",null),Object.seal(_),_};function B(_,p){var U=Object.getOwnPropertyNames(_),te=U.length,ue,ce,he;for(ue=0;ue<te;ue++)ce=U[ue],ce[0]!=="$"&&(he=Object.getOwnPropertyDescriptor(_,ce),he&&he.enumerable&&p(ce,he))}g.each_ivar=B,g.freeze_props=function(_){var p={get:null,set:function(U){R(_)},enumerable:!0};B(_,function(U,te){te.writable&&(p.get=se(te.value),Object.defineProperty(_,U,p))})},g.escape_regexp=function(_){return _.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},g.global_regexp=function(_){return _.global?_:(_.$$g==null?_.$$g=new RegExp(_.source,(_.multiline?"gm":"g")+(_.ignoreCase?"i":"")):_.$$g.lastIndex=null,_.$$g)},g.global_multiline_regexp=function(_){var p,U;return _.global&&_.multiline?_:(U="gm"+(_.ignoreCase?"i":""),_.multiline?(_.$$g==null&&(_.$$g=new RegExp(_.source,U)),p=_.$$g):(_.$$gm==null&&(_.$$gm=new RegExp(_.source,U)),p=_.$$gm),p.lastIndex=null,p)},g.regexp=function(_,p){for(var U,te=typeof p<"u"&&p&&p.indexOf("i")>=0,ue=0,ce=_.length;ue<ce;ue++)U=_[ue],U instanceof RegExp&&(U.ignoreCase!==te&&g.Kernel.$warn("ignore case doesn't match for "+U.source.$inspect(),new Map([["uplevel",1]])),U=U.source),U===""&&(U="(?:"+U+")"),_[ue]=U;return p?new RegExp(_.join(""),p):new RegExp(_.join(""))},g.modules={},g.loaded_features=["corelib/runtime"],g.current_dir=".",g.require_table={"corelib/runtime":!0},g.normalize=function(_){var p,U,te=[],ue="/";g.current_dir!=="."&&(_=g.current_dir.replace(/\/*$/,"/")+_),_=_.replace(/^\.\//,""),_=_.replace(/\.(rb|opal|js)$/,""),p=_.split(ue);for(var ce=0,he=p.length;ce<he;ce++)U=p[ce],U!==""&&(U===".."?te.pop():te.push(U));return te.join(ue)},g.loaded=function(_){var p,U,te;for(p=0,U=_.length;p<U;p++)te=g.normalize(_[p]),!g.require_table[te]&&(g.loaded_features.push(te),g.require_table[te]=!0)},g.load_normalized=function(_){g.loaded([_]);var p=g.modules[_];if(p){var U=p(g);if(typeof Promise<"u"&&U instanceof Promise)return U.then(se(!0))}else{var te=g.config.missing_require_severity,ue="cannot load such file -- "+_;te==="error"?z(g.LoadError,ue):te==="warning"&&k.warn("WARNING: LoadError: "+ue)}return!0},g.load=function(_){return _=g.normalize(_),g.load_normalized(_)},g.require=function(_){return _=g.normalize(_),g.require_table[_]?!1:g.load_normalized(_)},g.encodings=Object.create(null),g.set_encoding=function(_,p,U){typeof U>"u"&&(U="encoding"),(typeof _=="string"||_.$$frozen===!0)&&z(g.FrozenError,"can't modify frozen String");var te=g.find_encoding(p);return te===_[U]||(_[U]=te),_},g.find_encoding=function(_){var p=g.encodings,U=p[_]||p[_.toUpperCase()];return U||z(g.ArgumentError,"unknown encoding name - "+_),U},g.enc=function(_,p){var U=new String(_);return U=g.set_encoding(U,p),U.internal_encoding=U.encoding,U},g.binary=function(_){var p=new String(_);return g.set_encoding(p,"binary","internal_encoding")},g.last_promise=null,g.promise_unhandled_exception=!1,g.queue=function(_){if(g.last_promise)return g.last_promise=g.last_promise.then(function(){if(!g.promise_unhandled_exception)return _(g)}).catch(function(U){g.respond_to(U,"$full_message")&&(U=U.$full_message()),k.error(U),g.promise_unhandled_exception=!0,g.exit(1)}),g.last_promise;var p=_(g);return typeof Promise=="function"&&typeof p=="object"&&p instanceof Promise&&(g.last_promise=p),p};function Y(_,p){return typeof _=="number"&&typeof p=="number"}g.rb_plus=function(_,p){return Y(_,p)?_+p:_["$+"](p)},g.rb_minus=function(_,p){return Y(_,p)?_-p:_["$-"](p)},g.rb_times=function(_,p){return Y(_,p)?_*p:_["$*"](p)},g.rb_divide=function(_,p){return Y(_,p)?_/p:_["$/"](p)},g.rb_lt=function(_,p){return Y(_,p)?_<p:_["$<"](p)},g.rb_gt=function(_,p){return Y(_,p)?_>p:_["$>"](p)},g.rb_le=function(_,p){return Y(_,p)?_<=p:_["$<="](p)},g.rb_ge=function(_,p){return Y(_,p)?_>=p:_["$>="](p)};function Q(_,p){return typeof _=="number"&&typeof p=="number"||typeof _=="string"&&typeof p=="string"}function ne(_,p){return Q(_,p)?_===p:A(_["$=="](p))}g.eqeq=ne,g.eqeqeq=function(_,p){return Q(_,p)?_===p:A(_["$==="](p))},g.neqeq=function(_,p){return Q(_,p)?_!==p:A(_["$!="](p))},g.not=function(_){return _==null||_===!1||E===_?!0:_===!0||_["$!"].$$pristine?!1:A(_["$!"]())};function se(_){return function(){return _}}g.return_val=se,g.return_self=function(){return this},g.return_ivar=function(_){return function(){return this[_]==null?E:this[_]}},g.assign_ivar=function(_){return function(p){return R(this),this[_]=p}},g.assign_ivar_val=function(_,p){return function(){return R(this),this[_]=p}},g.ensure_kwargs=function(_){if(_==null)return new Map;if(_.$$is_hash)return _;z(g.ArgumentError,"expected kwargs")},g.get_kwarg=function(_,p){var U=g.hash_get(_,p);return U===void 0&&z(g.ArgumentError,"missing keyword: "+p),U},g.large_array_unpack=function(_){var p=_.split(","),U=p.length,te;for(te=0;te<U;te++)switch(p[te][0]){case void 0:p[te]=E;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":p[te]=+p[te]}return p},g.opal32_init=se(1332765036);function oe(_,p){return _<<p|_>>>32-p}g.opal32_add=function(_,p){return _^=p,_=oe(_,1),_},g.BasicObject=H=X("BasicObject",null),g.Object=x=X("Object",g.BasicObject),g.Module=ee=X("Module",g.Object),g.Class=Z=X("Class",g.Module),g.Opal=T=a("Opal"),g.Kernel=J=a("Kernel"),G(g.BasicObject,g.Class.$$prototype),G(g.Object,g.Class.$$prototype),G(g.Module,g.Class.$$prototype),G(g.Class,g.Class.$$prototype),H.$$const.BasicObject=H,l(x,"BasicObject",H),l(x,"Object",x),l(x,"Module",ee),l(x,"Class",Z),l(x,"Opal",T),l(x,"Kernel",J),H.$$class=Z,x.$$class=Z,ee.$$class=Z,Z.$$class=Z,T.$$class=ee,J.$$class=ee,m(x.$$prototype,"toString",function(){var _=this.$to_s();return _.$$is_string&&typeof _=="object"?_.valueOf():_}),m(x.$$prototype,"$require",g.require),g.top=new x,g.top.$to_s=g.top.$inspect=se("main"),g.top.$define_method=fe;function fe(){var _=fe.$$p;return fe.$$p=null,g.send(x,"define_method",arguments,_)}g.NilClass=X("NilClass",g.Object),l(x,"NilClass",g.NilClass),E=g.nil=new g.NilClass,E.$$id=v,E.call=E.apply=function(){z(g.LocalJumpError,"no block given")},E.$$frozen=!0,E.$$comparable=!1,Object.seal(E),g.thrower=function(_){var p={$thrower_type:_,$throw:function(U,te){throw U==null&&(U=E),this.is_orphan&&!te&&z(g.LocalJumpError,"unexpected "+_,U,_.$to_sym()),this.$v=U,this},is_orphan:!1};return p},Object.defineProperty(j,"@",{enumerable:!0,configurable:!0,get:function(){return A(j["!"])?j["!"].$backtrace():E},set:function(_){A(j["!"])?j["!"].$set_backtrace(_):z(g.ArgumentError,"$! not set")}}),g.t_eval_return=g.thrower("return"),TypeError.$$super=Error,g.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(e){var k=e.type_error,E=e.coerce_to,H=e.module,x=e.defs,ee=e.slice,Z=e.eqeqeq,T=e.Kernel,J=e.truthy,g=e.Opal,K=e.nil,$e=e.$$$;return e.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(W){var G=H(W,"Opal");x(G,"$bridge",function(v,q){return e.bridge(v,q)}),x(G,"$coerce_to!",function(v,q,I,j){var z,P,m=K;return z=ee(arguments,3),P=z,m=E(v,q,I,P),Z(q,m)||T.$raise(k(v,q,I,m)),m},-4),x(G,"$coerce_to?",function(v,q,I,j){var z,P,m=K;return z=ee(arguments,3),P=z,!J(v["$respond_to?"](I))||(m=E(v,q,I,P),J(m["$nil?"]()))?K:(Z(q,m)||T.$raise(k(v,q,I,m)),m)},-4),x(G,"$try_convert",function(v,q,I){return Z(q,v)?v:J(v["$respond_to?"](I))?v.$__send__(I):K}),x(G,"$compare",function(v,q){var I=K;return I=v["$<=>"](q),J(I===K)&&T.$raise($e("ArgumentError"),"comparison of "+v.$class()+" with "+q.$class()+" failed"),I}),x(G,"$destructure",function(v){if(v.length==1)return v[0];if(v.$$is_array)return v;for(var q=new Array(v.length),I=0,j=q.length;I<j;I++)q[I]=v[I];return q}),x(G,"$respond_to?",function(v,q,I){return I==null&&(I=!1),v==null||!v.$$class?!1:v["$respond_to?"](q,I)},-3),x(G,"$instance_variable_name!",function(v){return v=g["$coerce_to!"](v,$e("String"),"to_str"),J(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(v))||T.$raise($e("NameError").$new("'"+v+"' is not allowed as an instance variable name",v)),v}),x(G,"$class_variable_name!",function(v){return v=g["$coerce_to!"](v,$e("String"),"to_str"),J(v.length<3||v.slice(0,2)!=="@@")&&T.$raise($e("NameError").$new("`"+v+"' is not allowed as a class variable name",v)),v}),x(G,"$const_name?",function(v){return typeof v!="string"&&(v=g["$coerce_to!"](v,$e("String"),"to_str")),v[0]===v[0].toUpperCase()}),x(G,"$const_name!",function(v){var q=this;return J($e("::","String","skip_raise")?"constant":K)&&(v=g["$coerce_to!"](v,$e("String"),"to_str")),(!v||v[0]!=v[0].toUpperCase())&&q.$raise($e("NameError"),"wrong constant name "+v),v}),x(G,"$pristine",function(v,q){var I,j;I=ee(arguments,1),j=I;for(var z,P,m=j.length-1;m>=0;m--)z=j[m],P=v.$$prototype[e.jsid(z)],P&&!P.$$stub&&(P.$$pristine=!0);return K},-2);var O=[];return x(G,"$inspect",function(v){var q=K,I=!1;return function(){try{try{return v===null?"null":v===void 0?"undefined":typeof v.$$class>"u"?Object.prototype.toString.apply(v):typeof v.$inspect!="function"||v.$inspect.$$stub||O.indexOf(v.$__id__())!==-1?"#<"+v.$$class+":0x"+v.$__id__().$to_s(16)+">":(O.push(v.$__id__()),I=!0,v.$inspect())}catch(j){if(e.rescue(j,[$e("Exception")])){q=j;try{return"#<"+v.$$class+":0x"+v.$__id__().$to_s(16)+">"}finally{e.pop_exception(j)}}else throw j}}finally{I&&O.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(e){var k=e.truthy,E=e.coerce_to,H=e.const_set,x=e.Object,ee=e.return_ivar,Z=e.assign_ivar,T=e.ivar,J=e.deny_frozen_access,g=e.freeze,K=e.prop,$e=e.jsid,W=e.each_ivar,G=e.klass,O=e.Opal,M=e.Kernel,v=e.defs,q=e.send,I=e.def,j=e.eqeqeq,z=e.Module,P=e.rb_lt,m=e.rb_gt,A=e.slice,D=e.to_a,S=e.return_val,w=e.eqeq,o=e.not,d=e.rb_le,N=e.range,h=e.send2,l=e.find_super,c=e.alias,X=[],y=e.nil,i=e.$$$;return e.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(a,$,n){var t=G(a,$,"Module"),r=[t].concat(n),s=e.$r(r);function u(L){if(L.$$is_string)return L;var F=O.$try_convert(L,i("String"),"to_str");if(F.$$is_string)return F;F===y?M.$raise(i("TypeError"),""+L+" is not a symbol nor a string"):M.$raise(i("TypeError"),"can't convert "+L.$class()+" to String ("+L.$class()+"#to_str gives "+F.$class())}v(t,"$allocate",function(){var F=this,V=e.allocate_module(y,function(){});return F!==e.Module&&Object.setPrototypeOf(V,F.$$prototype),V}),I(t,"$initialize",function L(){var F=L.$$p||y,V=this;return L.$$p=null,F!==y?q(V,"module_eval",[],F.$to_proc()):y}),I(t,"$===",function(F){var V=this;return k(F==null)?!1:e.is_a(F,V)}),I(t,"$<",function(F){var V=this;j(z,F)||M.$raise(i("TypeError"),"compared with non class/module");var re=V,ae,le,_e;if(re===F)return!1;for(le=0,ae=e.ancestors(V),_e=ae.length;le<_e;le++)if(ae[le]===F)return!0;for(le=0,ae=e.ancestors(F),_e=ae.length;le<_e;le++)if(ae[le]===V)return!1;return y}),I(t,"$<=",function(F){var V=this,re=y;return k(re=V["$equal?"](F))?re:P(V,F)}),I(t,"$>",function(F){var V=this;return j(z,F)||M.$raise(i("TypeError"),"compared with non class/module"),P(F,V)}),I(t,"$>=",function(F){var V=this,re=y;return k(re=V["$equal?"](F))?re:m(V,F)}),I(t,"$<=>",function(F){var V=this,re=y;return V===F?0:!j(z,F)||(re=P(V,F),k(re["$nil?"]()))?y:k(re)?-1:1}),I(t,"$alias_method",function(F,V){var re=this;return J(re),F=E(F,i("String"),"to_str"),V=E(V,i("String"),"to_str"),e.alias(re,F,V),re}),I(t,"$alias_native",function(F,V){var re=this;return V==null&&(V=F),J(re),e.alias_native(re,F,V),re},-2),I(t,"$ancestors",function(){var F=this;return e.ancestors(F)}),I(t,"$append_features",function(F){var V=this;return J(F),e.append_features(V,F),V}),I(t,"$attr_accessor",function(F){var V,re,ae=this;return V=A(arguments),re=V,q(ae,"attr_reader",D(re)),q(ae,"attr_writer",D(re))},-1),I(t,"$attr",function(F){var V,re,ae=this;return V=A(arguments),re=V,re.length==2&&(re[1]===!0||re[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),re[1]?ae.$attr_accessor(re[0]):ae.$attr_reader(re[0]),y):q(ae,"attr_reader",D(re))},-1),I(t,"$attr_reader",function(F){var V,re,ae=this;V=A(arguments),re=V,J(ae);for(var le=ae.$$prototype,_e=re.length-1;_e>=0;_e--){var de=re[_e],ge=$e(de),ve=T(de),me=ee(ve);e.prop(le,ve,y),me.$$parameters=[],me.$$arity=0,e.defn(ae,ge,me)}return y},-1),I(t,"$attr_writer",function(F){var V,re,ae=this;V=A(arguments),re=V,J(ae);for(var le=ae.$$prototype,_e=re.length-1;_e>=0;_e--){var de=re[_e],ge=$e(de+"="),ve=T(de),me=Z(ve);me.$$parameters=[["req"]],me.$$arity=1,e.prop(le,ve,y),e.defn(ae,ge,me)}return y},-1),I(t,"$autoload",function(F,V){var re=this;return J(re),s("Opal")["$const_name?"](F)||M.$raise(i("NameError"),"autoload must be constant name: "+F),V==""&&M.$raise(i("ArgumentError"),"empty file name"),re.$$const.hasOwnProperty(F)||(re.$$autoload||(re.$$autoload={}),e.const_cache_version++,re.$$autoload[F]={path:V,loaded:!1,required:!1,success:!1,exception:!1},re.$const_added&&!re.$const_added.$$pristine&&re.$const_added(F)),y}),I(t,"$autoload?",function(F){var V=this;if(V.$$autoload&&V.$$autoload[F]&&!V.$$autoload[F].required&&!V.$$autoload[F].success)return V.$$autoload[F].path;for(var re=V.$ancestors(),ae=0,le=re.length;ae<le;ae++)if(re[ae].$$autoload&&re[ae].$$autoload[F]&&!re[ae].$$autoload[F].required&&!re[ae].$$autoload[F].success)return re[ae].$$autoload[F].path;return y}),I(t,"$class_variables",function(){var F=this;return Object.keys(e.class_variables(F))}),I(t,"$class_variable_get",function(F){var V=this;return F=O["$class_variable_name!"](F),e.class_variable_get(V,F,!1)}),I(t,"$class_variable_set",function(F,V){var re=this;return J(re),F=O["$class_variable_name!"](F),e.class_variable_set(re,F,V)}),I(t,"$class_variable_defined?",function(F){var V=this;return F=O["$class_variable_name!"](F),e.class_variables(V).hasOwnProperty(F)}),I(t,"$const_added",S(y)),O.$pristine(t,"const_added"),I(t,"$remove_class_variable",function(F){var V=this;if(J(V),F=O["$class_variable_name!"](F),e.hasOwnProperty.call(V.$$cvars,F)){var re=V.$$cvars[F];return delete V.$$cvars[F],re}else M.$raise(i("NameError"),"cannot remove "+F+" for "+V)}),I(t,"$constants",function(F){var V=this;return F==null&&(F=!0),e.constants(V,F)},-1),v(t,"$constants",function(F){var V=this;if(F==null){var re=(V.$$nesting||[]).concat(x),ae,le={},_e,de;for(_e=0,de=re.length;_e<de;_e++)for(ae in re[_e].$$const)le[ae]=!0;return Object.keys(le)}else return e.constants(V,F)},-1),v(t,"$nesting",function(){var F=this;return F.$$nesting||[]}),I(t,"$const_defined?",function(F,V){var re=this;V==null&&(V=!0),F=s("Opal")["$const_name!"](F),k(F["$=~"](i(O,"CONST_NAME_REGEXP")))||M.$raise(i("NameError").$new("wrong constant name "+F,F));var ae,le=[re],_e,de;for(V&&(le=le.concat(e.ancestors(re)),re.$$is_module&&(le=le.concat([x]).concat(e.ancestors(x)))),_e=0,de=le.length;_e<de;_e++)if(ae=le[_e],ae.$$const[F]!=null||ae.$$autoload&&ae.$$autoload[F]&&!ae.$$autoload[F].required&&!ae.$$autoload[F].success)return!0;return!1},-2),I(t,"$const_get",function(F,V){var re=this;return V==null&&(V=!0),F=s("Opal")["$const_name!"](F),F.indexOf("::")===0&&F!=="::"&&(F=F.slice(2)),k(F.indexOf("::")!=-1&&F!="::")?q(F.$split("::"),"inject",[re],function(le,_e){return le==null&&(le=y),_e==null&&(_e=y),le.$const_get(_e)}):(k(F["$=~"](i(O,"CONST_NAME_REGEXP")))||M.$raise(i("NameError").$new("wrong constant name "+F,F)),V?e.$$([re],F):e.const_get_local(re,F))},-2),I(t,"$const_missing",function(F){var V=this,re=y;return re=w(V,x)?F:""+V+"::"+F,M.$raise(i("NameError").$new("uninitialized constant "+re,F))}),I(t,"$const_set",function(F,V){var re=this;return J(re),F=O["$const_name!"](F),(k(F["$!~"](i(O,"CONST_NAME_REGEXP")))||k(F["$start_with?"]("::")))&&M.$raise(i("NameError").$new("wrong constant name "+F,F)),H(re,F,V),V}),I(t,"$public_constant",S(y)),I(t,"$define_method",function L(F,V){var re=L.$$p||y,ae=this,le=y,_e=y,de=y;return L.$$p=null,J(ae),V===void 0&&re===y&&M.$raise(i("ArgumentError"),"tried to create a Proc object without a block"),F=u(F),k(V!==void 0)&&(re=j(i("Proc"),le=V)?V:j(i("Method"),le)?V.$to_proc().$$unbound:j(i("UnboundMethod"),le)?e.wrap_method_body(V.$$method):M.$raise(i("TypeError"),"wrong argument type "+V.$class()+" (expected Proc/Method/UnboundMethod)"),k(!V.$$is_proc)&&(_e=V.$owner(),k(_e.$$is_class)&&o(d(ae,_e))&&(de=k(_e.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+_e,M.$raise(i("TypeError"),de)))),typeof Proxy<"u"&&(re.$$proxy_target=re,re=new Proxy(re,{apply:function(ge,ve,me){var be=ge.$$jsid,ie=ge.$$is_lambda;ge.$$jsid=F,ge.$$is_lambda=!0;try{return ge.apply(ve,me)}catch(R){if(R===ge.$$brk||R===ge.$$ret)return R.$v;throw R}finally{ge.$$jsid=be,ge.$$is_lambda=ie}}})),re.$$jsid=F,re.$$s=null,re.$$def=re,re.$$define_meth=!0,e.defn(ae,$e(F),re)},-2),I(t,"$freeze",function(){var F=this;return k(F["$frozen?"]())?F:(F.hasOwnProperty("$$base_module")||K(F,"$$base_module",null),g(F))}),I(t,"$remove_method",function(F){var V,re,ae=this;V=A(arguments),re=V;for(var le=0;le<re.length;le++){var _e=u(re[le]);J(ae),e.rdef(ae,"$"+_e)}return ae},-1),I(t,"$singleton_class?",function(){var F=this;return!!F.$$is_singleton}),I(t,"$include",function(F){var V,re,ae=this;V=A(arguments),re=V;for(var le=re.length-1;le>=0;le--){var _e=re[le];_e.$$is_module||M.$raise(i("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$append_features(ae),_e.$included(ae)}return ae},-1),I(t,"$included_modules",function(){var F=this;return e.included_modules(F)}),I(t,"$include?",function(F){var V=this;F.$$is_module||M.$raise(i("TypeError"),"wrong argument type "+F.$class()+" (expected Module)");var re,ae,le,_e=e.ancestors(V);for(re=0,ae=_e.length;re<ae;re++)if(le=_e[re],le===F&&le!==V)return!0;return!1}),I(t,"$instance_method",function(F){var V=this,re=V.$$prototype[$e(F)];return(!re||re.$$stub)&&M.$raise(i("NameError").$new("undefined method `"+F+"' for class `"+V.$name()+"'",F)),i("UnboundMethod").$new(V,re.$$owner||V,re,F)}),I(t,"$instance_methods",function(F){var V=this;return F==null&&(F=!0),k(F)?e.instance_methods(V):e.own_instance_methods(V)},-1),I(t,"$included",S(y)),I(t,"$extended",S(y)),I(t,"$extend_object",function(F){return J(F),y}),I(t,"$method_added",function(F){return A(arguments),y},-1),I(t,"$method_removed",function(F){return A(arguments),y},-1),I(t,"$method_undefined",function(F){return A(arguments),y},-1),I(t,"$module_eval",function L(F){var V=L.$$p||y,re,ae,le,_e=this,de=y,ge=y,ve=y,me=y,be=y,ie=y;L.$$p=null,re=A(arguments),ae=re,k(V["$nil?"]())&&k(!!e.compile)?(k(N(1,3,!1)["$cover?"](ae.$size()))||M.$raise(i("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(D(ae)),de=le[0]==null?y:le[0],ge=le[1]==null?y:le[1],le[2]==null||le[2],ve=new Map([["file",k(me=ge)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),ie=O.$compile(de,be),V=q(M,"proc",[],function Y(){var Q=Y.$$s==null?this:Y.$$s;return new Function("Opal,self","return "+ie)(e,Q)},{$$s:_e})):k(ae["$any?"]())&&M.$raise(i("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var R=V.$$s,B;return V.$$s=null,B=V.apply(_e,[_e]),V.$$s=R,B},-1),I(t,"$module_exec",function L(F){var V=L.$$p||y,re,ae,le=this;L.$$p=null,re=A(arguments),ae=re,V===y&&M.$raise(i("LocalJumpError"),"no block given");var _e=V.$$s,de;return V.$$s=null,de=V.apply(le,ae),V.$$s=_e,de},-1),I(t,"$method_defined?",function(F){var V=this,re=V.$$prototype[$e(F)];return!!re&&!re.$$stub}),I(t,"$module_function",function(F){var V,re,ae=this;if(V=A(arguments),re=V,J(ae),re.length===0)return ae.$$module_function=!0,y;for(var le=0,_e=re.length;le<_e;le++){var de=re[le],ge=$e(de),ve=ae.$$prototype[ge];e.defs(ae,ge,ve)}return re.length===1?re[0]:re},-1),I(t,"$name",function(){var F=this;if(F.$$full_name)return F.$$full_name;for(var V=[],re=F;re;){if(re.$$name===y||re.$$name==null)return y;if(V.unshift(re.$$name),re=re.$$base_module,re===x)break}return V.length===0?y:F.$$full_name=V.join("::")}),I(t,"$prepend",function(F){var V,re,ae=this;V=A(arguments),re=V,re.length===0&&M.$raise(i("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=re.length-1;le>=0;le--){var _e=re[le];_e.$$is_module||M.$raise(i("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$prepend_features(ae),_e.$prepended(ae)}return ae},-1),I(t,"$prepend_features",function(F){var V=this;return J(F),V.$$is_module||M.$raise(i("TypeError"),"wrong argument type "+V.$class()+" (expected Module)"),e.prepend_features(V,F),V}),I(t,"$prepended",S(y)),I(t,"$remove_const",function(F){var V=this;return J(V),e.const_remove(V,F)}),I(t,"$to_s",function(){var F=this,V=y;return k(V=e.Module.$name.call(F))?V:"#<"+(F.$$is_module?"Module":"Class")+":0x"+F.$__id__().$to_s(16)+">"}),I(t,"$undef_method",function(F){var V,re,ae=this;V=A(arguments),re=V;for(var le=0;le<re.length;le++){var _e=u(re[le]);J(ae),e.udef(ae,"$"+_e)}return ae},-1),I(t,"$instance_variables",function(){var F=this,V=y;V=(e.Module.$$nesting=r,F.$constants());var re=[];return W(F,function(ae){ae!=="constructor"&&!V["$include?"](ae)&&re.push("@"+ae)}),re});function f(L,F){var V,re=e.own_instance_methods(L);for(V=0;V<re.length;V++){var ae=re[V],le=$e(ae),_e=L.$$prototype[le],de=e.wrap_method_body(_e);de.$$jsid=ae,e.defn(F,le,de)}}function b(L,F){for(var V=L.$$own_included_modules,re=V.length-1;re>=0;re--)e.append_features(V[re],F)}function C(L,F){for(var V=L.$$own_prepended_modules,re=V.length-1;re>=0;re--)e.prepend_features(V[re],F)}return I(t,"$initialize_copy",function(F){var V=this;return f(F,V),b(F,V),C(F,V),V.$$cloned_from=F.$$cloned_from.concat(F),V.$copy_class_variables(F),V.$copy_constants(F)}),I(t,"$initialize_dup",function L(F){var V=L.$$p||y,re=this;return L.$$p=null,h(re,l(re,"initialize_dup",L,!1,!0),"initialize_dup",[F],V),re.$copy_singleton_methods(F)}),I(t,"$copy_class_variables",function(F){var V=this;for(var re in F.$$cvars)V.$$cvars[re]=F.$$cvars[re]}),I(t,"$copy_constants",function(F){var V=this,re,ae=F.$$const;for(re in ae)H(V,re,ae[re])}),I(t,"$refine",function L(F){var V=L.$$p||y,re,ae=this,le=y,_e=y,de=y;return L.$$p=null,re=[ae,y,y],le=re[0],_e=re[1],de=re[2],de=e.id(F),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?_e=ae.$$refine_modules[de]=i("Refinement").$new():_e=ae.$$refine_modules[de],_e.refinement_module=le,_e.refined_class=F,q(_e,"class_exec",[],V.$to_proc()),_e}),I(t,"$refinements",function(){var F=this,V=F.$$refine_modules,re=new Map;if(typeof V>"u")return re;for(var ae in V)re["$[]="](V[ae].refined_class,V[ae]);return re}),I(t,"$using",function(F){return M.$raise("Module#using is not permitted in methods")}),c(t,"class_eval","module_eval"),c(t,"class_exec","module_exec"),c(t,"inspect","to_s")}("::",null,X),function(a,$){var n=G(a,$,"Refinement"),t=n.$$prototype;return t.refinement_module=t.refined_class=y,n.$attr_reader("refined_class"),I(n,"$inspect",function r(){var s=r.$$p||y,u=this;return r.$$p=null,k(u.refinement_module)?"#<refinement:"+u.refined_class.$inspect()+"@"+u.refinement_module.$inspect()+">":h(u,l(u,"inspect",r,!1,!0),"inspect",[],s)})}("::",z)};Opal.modules["corelib/class"]=function(e){var k=e.klass,E=e.send,H=e.defs,x=e.def,ee=e.ensure_kwargs,Z=e.hash_get,T=e.eqeq,J=e.truthy,g=e.rb_plus,K=e.return_val,$e=e.slice,W=e.send2,G=e.find_super,O=e.Kernel,M=e.alias,v=e.top,q=[],I=e.nil,j=e.$$$;return e.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),v.$require("corelib/module"),function(z,P,m){var A=k(z,P,"Class"),D=[A].concat(m),S=e.$r(D);return H(A,"$new",function w(o){var d=w.$$p||I;if(w.$$p=null,o==null&&(o=S("Object")),!o.$$is_class)throw e.TypeError.$new("superclass must be a Class");var N=e.allocate_class(I,o);return o.$inherited(N),d!==I&&E(N,"class_eval",[],d.$to_proc()),N},-1),x(A,"$allocate",function(){var o=this,d=new o.$$constructor;return d.$$id=e.uid(),d}),x(A,"$clone",function(o){var d,N=this,h=I;return o=ee(o),d=Z(o,"freeze"),d==null&&(d=I),J(d["$nil?"]())||T(d,!0)||T(d,!1)||N.$raise(S("ArgumentError"),"unexpected value for freeze: "+d.$class()),h=e.allocate_class(I,N.$$super),h.$copy_instance_variables(N),h.$copy_singleton_methods(N),h.$initialize_clone(N,new Map([["freeze",d]])),(T(d,!0)||J(d["$nil?"]())&&J(N["$frozen?"]()))&&h.$freeze(),h},-1),x(A,"$dup",function(){var o=this,d=I;return d=e.allocate_class(I,o.$$super),d.$copy_instance_variables(o),d.$initialize_dup(o),d}),x(A,"$descendants",function(){var o=this;return g(o.$subclasses(),E(o.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),x(A,"$inherited",K(I)),x(A,"$new",function w(o){var d=w.$$p||I,N,h,l=this;w.$$p=null,N=$e(arguments),h=N;var c=l.$allocate();return e.send(c,c.$initialize,h,d),c},-1),x(A,"$subclasses",function(){var o=this;if(typeof WeakRef<"u"){var d,N,h=[];for(d=0;d<o.$$subclasses.length;d++)N=o.$$subclasses[d].deref(),N!==void 0&&h.push(N);return h}else return o.$$subclasses}),x(A,"$superclass",function(){var o=this;return o.$$super||I}),x(A,"$to_s",function w(){w.$$p;var o=this;w.$$p=null;var d=o.$$singleton_of;return d&&d.$$is_a_module?"#<Class:"+d.$name()+">":d?"#<Class:#<"+d.$$class.$name()+":0x"+e.id(d).$to_s(16)+">>":W(o,G(o,"to_s",w,!1,!0),"to_s",[],null)}),x(A,"$attached_object",function(){var o=this;if(o.$$singleton_of!=null)return o.$$singleton_of;O.$raise(j("TypeError"),"`"+o+"' is not a singleton class")}),M(A,"inspect","to_s")}("::",null,q)};Opal.modules["corelib/basic_object"]=function(e){var k=e.klass,E=e.slice,H=e.def,x=e.alias,ee=e.return_val,Z=e.Opal,T=e.truthy,J=e.range,g=e.Kernel,K=e.to_a,$e=e.send,W=e.eqeq,G=e.rb_ge,O=e.nil,M=e.$$$;return e.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(v,q){var I=k(v,q,"BasicObject");return H(I,"$initialize",function(z){return E(arguments),O},-1),H(I,"$==",function(z){var P=this;return P===z}),H(I,"$eql?",function(z){var P=this;return P["$=="](z)}),x(I,"equal?","=="),H(I,"$__id__",function(){var z=this;return z.$$id!=null||e.prop(z,"$$id",e.uid()),z.$$id}),H(I,"$__send__",function j(z,P){var m=j.$$p||O,A,D,S=this;j.$$p=null,A=E(arguments,1),D=A,z.$$is_string||S.$raise(M("TypeError"),""+S.$inspect()+" is not a symbol nor a string");var w=S[e.jsid(z)];return w?(m!==O&&(w.$$p=m),w.apply(S,D)):(m!==O&&(S.$method_missing.$$p=m),S.$method_missing.apply(S,[z].concat(D)))},-2),H(I,"$!",ee(!1)),Z.$pristine("!"),H(I,"$!=",function(z){var P=this;return P["$=="](z)["$!"]()}),H(I,"$instance_eval",function j(z){var P=j.$$p||O,m,A,D,S=this,w=O,o=O,d=O,N=O,h=O,l=O;if(j.$$p=null,m=E(arguments),A=m,T(P["$nil?"]())&&T(!!e.compile))T(J(1,3,!1)["$cover?"](A.$size()))||g.$raise(M("ArgumentError"),"wrong number of arguments (0 for 1..3)"),D=[].concat(K(A)),w=D[0]==null?O:D[0],o=D[1]==null?O:D[1],D[2]==null||D[2],d=new Map([["file",T(N=o)?N:"(eval)"],["eval",!0]]),h=new Map([["arity_check",!1]]).$merge(d),l=Z.$compile(w,h),P=$e(g,"proc",[],function y(){var i=y.$$s==null?this:y.$$s;return new Function("Opal,self","return "+l)(e,i)},{$$s:S});else{if(T(P["$nil?"]())&&T(G(A.$length(),1))&&W(A.$first()["$[]"](0),"@"))return S.$instance_variable_get(A.$first());T(A["$any?"]())&&g.$raise(M("ArgumentError"),"wrong number of arguments ("+A.$size()+" for 0)")}var c=P.$$s,X;if(P.$$s=null,S.$$is_a_module){S.$$eval=!0;try{X=P.call(S,S)}finally{S.$$eval=!1}}else X=P.call(S,S);return P.$$s=c,X},-1),H(I,"$instance_exec",function j(z){var P=j.$$p||O,m,A,D=this;j.$$p=null,m=E(arguments),A=m,T(P)||g.$raise(M("ArgumentError"),"no block given");var S=P.$$s,w;if(P.$$s=null,D.$$is_a_module){D.$$eval=!0;try{w=P.apply(D,A)}finally{D.$$eval=!1}}else w=P.apply(D,A);return P.$$s=S,w},-1),H(I,"$singleton_method_added",function(z){return E(arguments),O},-1),H(I,"$singleton_method_removed",function(z){return E(arguments),O},-1),H(I,"$singleton_method_undefined",function(z){return E(arguments),O},-1),H(I,"$method_missing",function j(z,P){j.$$p;var m,A,D=this,S=O;return j.$$p=null,m=E(arguments,1),A=m,S=Z.$inspect(D),g.$raise(M("NoMethodError").$new("undefined method `"+z+"' for "+S,z,A),O,g.$caller(1))},-2),Z.$pristine(I,"method_missing"),H(I,"$respond_to_missing?",function(z,P){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(e){var k=e.truthy,E=e.coerce_to,H=e.respond_to,x=e.Opal,ee=e.deny_frozen_access,Z=e.freeze,T=e.freeze_props,J=e.jsid,g=e.each_ivar,K=e.module,$e=e.return_val,W=e.def,G=e.Kernel,O=e.gvars,M=e.slice,v=e.send,q=e.to_a,I=e.ensure_kwargs,j=e.hash_get,z=e.eqeq,P=e.rb_plus,m=e.extract_kwargs,A=e.eqeqeq,D=e.return_self,S=e.rb_le,w=e.rb_lt,o=e.Object,d=e.alias,N=e.klass,h=[],l=e.nil,c=e.$$$;return e.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(X,y){var i=K(X,"Kernel"),a=[i].concat(y),$=e.$r(a);W(i,"$=~",$e(!1)),W(i,"$!~",function(r){var s=this;return s["$=~"](r)["$!"]()}),W(i,"$===",function(r){var s=this,u=l;return k(u=s.$object_id()["$=="](r.$object_id()))?u:s["$=="](r)}),W(i,"$<=>",function(r){var s=this;s.$$comparable=!0;var u=s["$=="](r);return u&&u!==l?0:l}),W(i,"$method",function(r){var s=this,u=s[J(r)];return(!u||u.$$stub)&&G.$raise(c("NameError").$new("undefined method `"+r+"' for class `"+s.$class()+"'",r)),c("Method").$new(s,u.$$owner||s.$class(),u,r)}),W(i,"$methods",function(r){var s=this;return r==null&&(r=!0),k(r)?e.methods(s):e.own_methods(s)},-1),W(i,"$public_methods",function(r){var s=this;return r==null&&(r=!0),k(r)?e.methods(s):e.receiver_methods(s)},-1),W(i,"$Array",function(r){var s;return r===l?[]:r.$$is_array?r:(s=x["$coerce_to?"](r,c("Array"),"to_ary"),s!==l||(s=x["$coerce_to?"](r,c("Array"),"to_a"),s!==l)?s:[r])}),W(i,"$at_exit",function t(){var r=t.$$p||l,s=l;return O.__at_exit__==null&&(O.__at_exit__=l),t.$$p=null,O.__at_exit__=k(s=O.__at_exit__)?s:[],O.__at_exit__["$<<"](r),r}),W(i,"$caller",function(r,s){r==null&&(r=1),s==null&&(s=l);var u,f;u=new Error().$backtrace(),f=[];for(var b=r+1,C=u.length;b<C;b++)u[b].match(/runtime\.js/)||f.push(u[b]);return s!=l&&(f=f.slice(0,s)),f},-1),W(i,"$caller_locations",function(r){var s,u,f=this;return s=M(arguments),u=s,v(v(f,"caller",q(u)),"map",[],function(C){return C==null&&(C=l),c(c(c("Thread"),"Backtrace"),"Location").$new(C)})},-1),W(i,"$class",function(){var r=this;return r.$$class}),W(i,"$copy_instance_variables",function(r){var s=this,u=Object.keys(r),f,b,C;for(f=0,b=u.length;f<b;f++)C=u[f],C.charAt(0)!=="$"&&r.hasOwnProperty(C)&&(s[C]=r[C])}),W(i,"$copy_singleton_methods",function(r){var s=this,u,f,b,C;if(r.hasOwnProperty("$$meta")&&r.$$meta!==null){var L=e.get_singleton_class(r),F=e.get_singleton_class(s);for(b=Object.getOwnPropertyNames(L.$$prototype),u=0,C=b.length;u<C;u++)f=b[u],e.is_method(f)&&(F.$$prototype[f]=L.$$prototype[f]);F.$$const=Object.assign({},L.$$const),Object.setPrototypeOf(F.$$prototype,Object.getPrototypeOf(L.$$prototype))}for(u=0,b=Object.getOwnPropertyNames(r),C=b.length;u<C;u++)f=b[u],f.charAt(0)==="$"&&f.charAt(1)!=="$"&&r.hasOwnProperty(f)&&(s[f]=r[f])}),W(i,"$clone",function(r){var s,u=this,f=l;return r=I(r),s=j(r,"freeze"),s==null&&(s=l),k(s["$nil?"]())||z(s,!0)||z(s,!1)||u.$raise($("ArgumentError"),"unexpected value for freeze: "+s.$class()),f=u.$class().$allocate(),f.$copy_instance_variables(u),f.$copy_singleton_methods(u),f.$initialize_clone(u,new Map([["freeze",s]])),(z(s,!0)||k(s["$nil?"]())&&k(u["$frozen?"]()))&&f.$freeze(),f},-1),W(i,"$initialize_clone",function(r,s){var u=this;return s=I(s),j(s,"freeze"),u.$initialize_copy(r),u},-2),W(i,"$define_singleton_method",function t(r,s){var u=t.$$p||l,f=this;return t.$$p=null,v(f.$singleton_class(),"define_method",[r,s],u.$to_proc())},-2),W(i,"$dup",function(){var r=this,s=l;return s=r.$class().$allocate(),s.$copy_instance_variables(r),s.$initialize_dup(r),s}),W(i,"$initialize_dup",function(r){var s=this;return s.$initialize_copy(r)}),W(i,"$enum_for",function t(r,s){var u=t.$$p||l,f,b,C,L=this;return t.$$p=null,f=M(arguments),f.length>0&&(b=f.shift()),b==null&&(b="each"),C=f,v(c("Enumerator"),"for",[L,b].concat(q(C)),u.$to_proc())},-1),W(i,"$equal?",function(r){var s=this;return s===r}),W(i,"$exit",function(r){var s=l,u=l;for(O.__at_exit__==null&&(O.__at_exit__=l),r==null&&(r=!0),O.__at_exit__=k(s=O.__at_exit__)?s:[];!k(O.__at_exit__["$empty?"]());)u=O.__at_exit__.$pop(),u.$call();return r.$$is_boolean?r=r?0:1:r=E(r,c("Integer"),"to_int"),e.exit(r),l},-1),W(i,"$extend",function(r){var s,u,f=this;s=M(arguments),u=s,u.length==0&&f.$raise(c("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),ee(f);for(var b=f.$singleton_class(),C=u.length-1;C>=0;C--){var L=u[C];L.$$is_module||G.$raise(c("TypeError"),"wrong argument type "+L.$class()+" (expected Module)"),L.$append_features(b),L.$extend_object(f),L.$extended(f)}return f},-1),W(i,"$freeze",function(){var r=this;return k(r["$frozen?"]())?r:typeof r=="object"?(T(r),Z(r)):r}),W(i,"$frozen?",function(){var r=this;switch(typeof r){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return r.$$frozen||!1;default:return!1}}),W(i,"$gets",function(r){var s,u;return O.stdin==null&&(O.stdin=l),s=M(arguments),u=s,v(O.stdin,"gets",q(u))},-1),W(i,"$hash",function(){var r=this;return r.$__id__()}),W(i,"$initialize_copy",$e(l));var n=[];return W(i,"$inspect",function(){var r=this,s=l,u=l,f=l,b=l;return function(){try{try{return s="",u=r.$__id__(),k(n["$include?"](u))?s=" ...":(n["$<<"](u),f=!0,v(r.$instance_variables(),"each",[],function C(L){var F=C.$$s==null?this:C.$$s,V=l,re=l;return L==null&&(L=l),V=F.$instance_variable_get(L),re=$("Opal").$inspect(V),s=P(s," "+L+"="+re)},{$$s:r})),"#<"+r.$class()+":0x"+u.$to_s(16)+s+">"}catch(C){if(e.rescue(C,[$("StandardError")])){b=C;try{return"#<"+r.$class()+":0x"+u.$to_s(16)+">"}finally{e.pop_exception(C)}}else throw C}}finally{k(f)&&n.$pop()}}()}),W(i,"$instance_of?",function(r){var s=this;return!r.$$is_class&&!r.$$is_module&&G.$raise(c("TypeError"),"class or module required"),s.$$class===r}),W(i,"$instance_variable_defined?",function(r){var s=this;return r=x["$instance_variable_name!"](r),e.hasOwnProperty.call(s,r.substr(1))}),W(i,"$instance_variable_get",function(r){var s=this;r=x["$instance_variable_name!"](r);var u=s[e.ivar(r.substr(1))];return u??l}),W(i,"$instance_variable_set",function(r,s){var u=this;return ee(u),r=x["$instance_variable_name!"](r),u[e.ivar(r.substr(1))]=s}),W(i,"$remove_instance_variable",function(r){var s=this;r=x["$instance_variable_name!"](r);var u=e.ivar(r.substr(1)),f;return s.hasOwnProperty(u)?(f=s[u],delete s[u],f):G.$raise(c("NameError"),"instance variable "+r+" not defined")}),W(i,"$instance_variables",function(){var r=this,s=[];return g(r,function(u){u.substr(-1)==="$"&&(u=u.slice(0,u.length-1)),s.push("@"+u)}),s}),W(i,"$Integer",function(r,s,u){var f,b,C,L;f=M(arguments,1),b=m(f),b=I(b),f.length>0&&(C=f.shift()),L=j(b,"exception"),L==null&&(L=!0);var F,V,re;if(L=k(L),!r.$$is_string){if(C!==void 0)if(L)G.$raise(c("ArgumentError"),"base specified for non string value");else return l;if(r===l)if(L)G.$raise(c("TypeError"),"can't convert nil into Integer");else return l;if(r.$$is_number){if(r===1/0||r===-1/0||isNaN(r))if(L)G.$raise(c("FloatDomainError"),r);else return l;return Math.floor(r)}if(r["$respond_to?"]("to_int")&&(F=r.$to_int(),e.is_a(F,c("Integer")))||r["$respond_to?"]("to_i")&&(F=r.$to_i(),e.is_a(F,c("Integer"))))return F;if(L)G.$raise(c("TypeError"),"can't convert "+r.$class()+" into Integer");else return l}if(r==="0")return 0;if(C===void 0)C=0;else if(C=E(C,c("Integer"),"to_int"),C===1||C<0||C>36)if(L)G.$raise(c("ArgumentError"),"invalid radix "+C);else return l;if(V=r.toLowerCase(),V=V.replace(/(\d)_(?=\d)/g,"$1"),V=V.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,le,_e){switch(_e){case"0b":if(C===0||C===2)return C=2,le;case"0":case"0o":if(C===0||C===8)return C=8,le;case"0d":if(C===0||C===10)return C=10,le;case"0x":if(C===0||C===16)return C=16,le}if(L)G.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return l}),C=C===0?10:C,re="0-"+(C<=10?C-1:"9a-"+String.fromCharCode(97+(C-11))),!new RegExp("^\\s*[+-]?["+re+"]+\\s*$").test(V))if(L)G.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return l;if(F=parseInt(V,C),isNaN(F))if(L)G.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return l;return F},-2),W(i,"$Float",function(r,s){var u;s=I(s),u=j(s,"exception"),u==null&&(u=!0);var f;if(u=k(u),r===l)if(u)G.$raise(c("TypeError"),"can't convert nil into Float");else return l;if(r.$$is_string){if(f=r.toString(),f=f.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(f))return G.$Integer(f);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(f))if(u)G.$raise(c("ArgumentError"),'invalid value for Float(): "'+r+'"');else return l;return parseFloat(f)}return u?x["$coerce_to!"](r,c("Float"),"to_f"):E(r,c("Float"),"to_f")},-2),W(i,"$Hash",function(r){return k(r["$nil?"]())||z(r,[])?new Map:A(c("Hash"),r)?r:x["$coerce_to!"](r,c("Hash"),"to_hash")}),W(i,"$is_a?",function(r){var s=this;return!r.$$is_class&&!r.$$is_module&&G.$raise(c("TypeError"),"class or module required"),e.is_a(s,r)}),W(i,"$itself",D),W(i,"$lambda",function t(){var r=t.$$p||l;return t.$$p=null,e.lambda(r)}),W(i,"$load",function(r){return r=x["$coerce_to!"](r,c("String"),"to_str"),e.load(r)}),W(i,"$loop",function t(){var r=t.$$p||l,s=this,u=l;if(t.$$p=null,r===l)return v(s,"enum_for",["loop"],function(){return c(c("Float"),"INFINITY")});for(;k(!0);)try{e.yieldX(r,[])}catch(f){if(e.rescue(f,[c("StopIteration")])){u=f;try{return u.$result()}finally{e.pop_exception(f)}}else throw f}return s}),W(i,"$nil?",$e(!1)),W(i,"$printf",function(r){var s,u,f=this,b=l;return O.stdout==null&&(O.stdout=l),s=M(arguments),u=s,k(u["$empty?"]())||(b=k(u[0].$$is_string)?O.stdout:u.$shift(),b.$write(v(f,"format",q(u)))),l},-1),W(i,"$proc",function t(){var r=t.$$p||l;return t.$$p=null,k(r)||G.$raise(c("ArgumentError"),"tried to create Proc object without a block"),r.$$is_lambda=!1,r}),W(i,"$puts",function(r){var s,u;return O.stdout==null&&(O.stdout=l),s=M(arguments),u=s,v(O.stdout,"puts",q(u))},-1),W(i,"$p",function(r){var s,u;return s=M(arguments),u=s,v(u,"each",[],function(b){return O.stdout==null&&(O.stdout=l),b==null&&(b=l),O.stdout.$puts(b.$inspect())}),k(S(u.$length(),1))?u["$[]"](0):u},-1),W(i,"$print",function(r){var s,u;return O.stdout==null&&(O.stdout=l),s=M(arguments),u=s,v(O.stdout,"print",q(u))},-1),W(i,"$readline",function(r){var s,u;return O.stdin==null&&(O.stdin=l),s=M(arguments),u=s,v(O.stdin,"readline",q(u))},-1),W(i,"$warn",function(r,s){var u,f,b,C,L,F,V=this,re=l;return O.VERBOSE==null&&(O.VERBOSE=l),O.stderr==null&&(O.stderr=l),u=M(arguments),f=m(u),f=I(f),b=u,C=j(f,"uplevel"),C==null&&(C=l),k(C)&&(C=x["$coerce_to!"](C,c("Integer"),"to_str"),k(w(C,0))&&G.$raise(c("ArgumentError"),"negative level ("+C+")"),re=(L=(F=V.$caller(P(C,1),1).$first(),F===l||F==null?l:F.$split(":in `")),L===l||L==null?l:L.$first()),k(re)&&(re=""+re+": "),b=v(b,"map",[],function(le){return le==null&&(le=l),""+re+"warning: "+le})),k(O.VERBOSE["$nil?"]())||k(b["$empty?"]())?l:v(O.stderr,"puts",q(b))},-1),W(i,"$raise",function(r,s,u){throw O["!"]==null&&(O["!"]=l),s==null&&(s=l),u==null&&(u=l),r==null&&O["!"]!==l?O["!"]:(r==null?r=c("RuntimeError").$new(""):H(r,"$to_str")?r=c("RuntimeError").$new(r.$to_str()):r.$$is_class&&H(r,"$exception")?r=r.$exception(s):r.$$is_exception||(r=c("TypeError").$new("exception class/object expected")),u!==l&&r.$set_backtrace(u),O["!"]!==l&&e.exceptions.push(O["!"]),O["!"]=r,r)},-1),W(i,"$rand",function(r){return r===void 0?c(c("Random"),"DEFAULT").$rand():(r.$$is_number&&(r<0&&(r=Math.abs(r)),r%1!==0&&(r=r.$to_i()),r===0&&(r=void 0)),c(c("Random"),"DEFAULT").$rand(r))},-1),W(i,"$respond_to?",function(r,s){var u=this;s==null&&(s=!1);var f=u[J(r)];return typeof f=="function"&&!f.$$stub?!0:u["$respond_to_missing?"].$$pristine===!0?!1:u["$respond_to_missing?"](r,s)},-2),W(i,"$respond_to_missing?",function(r,s){return!1},-2),x.$pristine(i,"respond_to?","respond_to_missing?"),W(i,"$require",function(r){return typeof r!="string"&&e.String&&e.Array&&(r=x["$coerce_to!"](r,c("String"),"to_str")),e.require(r)}),W(i,"$require_relative",function(r){return x["$try_convert!"](r,c("String"),"to_str"),r=c("File").$expand_path(c("File").$join(e.current_file,"..",r)),e.require(r)}),W(i,"$require_tree",function(r,s){var u;s=I(s),u=j(s,"autoload"),u==null&&(u=!1);var f=[];r=c("File").$expand_path(r),r=e.normalize(r),r==="."&&(r="");for(var b in e.modules)b["$start_with?"](r)&&(u?f.push([b,!0]):f.push([b,e.require(b)]));return f},-2),W(i,"$singleton_class",function(){var r=this;return e.get_singleton_class(r)}),W(i,"$sleep",function(r){r==null&&(r=l),r===l&&G.$raise(c("TypeError"),"can't convert NilClass into time interval"),r.$$is_number||G.$raise(c("TypeError"),"can't convert "+r.$class()+" into time interval"),r<0&&G.$raise(c("ArgumentError"),"time interval must be positive");for(var s=e.global.performance?function(){return performance.now()}:function(){return new Date},u=s();s()-u<=r*1e3;);return Math.round(r)},-1),W(i,"$srand",function(r){return r==null&&(r=$("Random").$new_seed()),c("Random").$srand(r)},-1),W(i,"$String",function(r){var s=l;return k(s=x["$coerce_to?"](r,c("String"),"to_str"))?s:x["$coerce_to!"](r,c("String"),"to_s")}),W(i,"$tap",function t(){var r=t.$$p||l,s=this;return t.$$p=null,e.yield1(r,s),s}),W(i,"$to_proc",D),W(i,"$to_s",function(){var r=this;return"#<"+r.$class()+":0x"+r.$__id__().$to_s(16)+">"}),W(i,"$catch",function t(r){var s=t.$$p||l,u=l,f=l;t.$$p=null,r==null&&(r=l);try{return r=k(u=r)?u:o.$new(),e.yield1(s,r)}catch(b){if(e.rescue(b,[c("UncaughtThrowError")])){f=b;try{return z(f.$tag(),r)?f.$value():G.$raise()}finally{e.pop_exception(b)}}else throw b}},-1),W(i,"$throw",function(r,s){return s==null&&(s=l),G.$raise(c("UncaughtThrowError").$new(r,s))},-2),W(i,"$open",function t(r){var s=t.$$p||l,u,f;return t.$$p=null,u=M(arguments),f=u,v(c("File"),"open",q(f),s.$to_proc())},-1),W(i,"$yield_self",function t(){var r=t.$$p||l,s=this;return t.$$p=null,r===l?v(s,"enum_for",["yield_self"],$e(1)):e.yield1(r,s)}),d(i,"fail","raise"),d(i,"kind_of?","is_a?"),d(i,"object_id","__id__"),d(i,"public_send","__send__"),d(i,"send","__send__"),d(i,"then","yield_self"),d(i,"to_enum","enum_for")}("::",h),function(X,y){var i=N(X,y,"Object");return delete o.$$prototype.$require,i.$include(G)}("::",null)};Opal.modules["corelib/main"]=function(e){var k=e.return_val,E=e.def,H=e.Object,x=e.slice,ee=e.Kernel,Z=e.top;return e.nil,e.add_stubs("include,raise"),function(T,J){return E(T,"$to_s",k("main")),E(T,"$include",function(K){return H.$include(K)}),E(T,"$autoload",function(K){var $e,W;return $e=x(arguments),W=$e,e.Object.$autoload.apply(e.Object,W)},-1),E(T,"$using",function(K){return ee.$raise("main.using is permitted only at toplevel")})}(e.get_singleton_class(Z))};Opal.modules["corelib/error/errno"]=function(e){var k=e.module,E=e.truthy,H=e.rb_plus,x=e.send2,ee=e.find_super,Z=e.def,T=e.klass,J=e.nil,g=e.$$$;return e.add_stubs("+,errno,class,attr_reader"),function(K,$e){var W=k(K,"Errno"),G=J,O=J;G=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],O=J;var M;for(M=0;M<G.length;M++)(function(){var v=G[M][0],q=G[M][1],I=G[M][2];O=e.klass(W,e.SystemCallError,v),O.errno=I,function(j,z){return Z(j,"$new",function P(m){P.$$p;var A=this,D=J;return P.$$p=null,m==null&&(m=J),D=q,E(m)&&(D=H(D," - "+m)),x(A,ee(A,"new",P,!1,!0),"new",[D],null)},-1)}(e.get_singleton_class(O))})()}("::"),function(K,$e,W){var G=T(K,$e,"SystemCallError");return Z(G,"$errno",function(){var M=this;return M.$class().$errno()}),function(O,M){return O.$attr_reader("errno")}(e.get_singleton_class(G))}("::",g("StandardError"))};Opal.modules["corelib/error"]=function(e){var k=e.klass,E=e.slice,H=e.gvars,x=e.defs,ee=e.send,Z=e.to_a,T=e.def,J=e.send2,g=e.find_super,K=e.truthy,$e=e.Kernel,W=e.not,G=e.rb_plus,O=e.eqeq,M=e.Object,v=e.ensure_kwargs,q=e.hash_get,I=e.module,j=[],z=e.nil,P=e.$$$;return e.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(m,A,D){var S=k(m,A,"Exception"),w=[S].concat(D),o=e.$r(w),d=S.$$prototype;d.message=z,e.prop(S.$$prototype,"$$is_exception",!0);var N;Error.stackTraceLimit=100,x(S,"$new",function(c){var X,y,i=this;H["!"]==null&&(H["!"]=z),X=E(arguments),y=X;var a=y.length>0?y[0]:z,$=new i.$$constructor(a);return $.name=i.$$name,$.message=a,$.cause=H["!"],e.send($,$.$initialize,y),e.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace($,N),$},-1),N=S.$new,x(S,"$exception",function(c){var X,y,i=this;return X=E(arguments),y=X,ee(i,"new",Z(y))},-1),T(S,"$initialize",function(c){var X,y,i=this;return X=E(arguments),y=X,i.message=y.length>0?y[0]:z},-1),T(S,"$copy_instance_variables",function l(c){var X=l.$$p||z,y=this;l.$$p=null,J(y,g(y,"copy_instance_variables",l,!1,!0),"copy_instance_variables",[c],X),y.message=c.message,y.cause=c.cause,y.stack=c.stack});function h(l){for(var c=[],X,y=0;y<l.length;y++){var i=l[y];!i||!i.$$is_string||((X=i.match(/^    at (.*?) \((.*?)\)$/))?c.push(X[2]+":in `"+X[1]+"'"):(X=i.match(/^    at (.*?)$/))?c.push(X[1]+":in `undefined'"):(X=i.match(/^  from (.*?)$/))?c.push(X[1]):(X=i.match(/^(.*?)@(.*?)$/))&&c.push(X[2]+":in `"+X[1]+"'"))}return c}return T(S,"$backtrace",function(){var c=this;if(c.backtrace)return c.backtrace;var X=c.stack;return typeof X<"u"&&X.$$is_string?c.backtrace=h(X.split(`
`)):X?c.backtrace=h(X):[]}),T(S,"$backtrace_locations",function(){var c,X=this;return X.backtrace_locations||(X.backtrace_locations=(c=X.$backtrace(),c===z||c==null?z:ee(c,"map",[],function(i){return i==null&&(i=z),P(P(P("Thread"),"Backtrace"),"Location").$new(i)}))),X.backtrace_locations}),T(S,"$cause",function(){var c=this;return c.cause||z}),T(S,"$exception",function(c){var X=this;if(c==null&&(c=z),c===z||X===c)return X;var y=X.$clone();return y.message=c,X.backtrace&&(y.backtrace=X.backtrace.$dup()),y.stack=X.stack,y.cause=X.cause,y},-1),T(S,"$message",function(){var c=this;return c.$to_s()}),T(S,"$full_message",function(c){var X,y=this,i=z,a=z,$=z,n=z,t=z,r=z,s=z,u=z,f=z;return H.stderr==null&&(H.stderr=z),c==null&&(c=z),K(o("Hash","skip_raise")?"constant":z)?(c=new Map([["highlight",H.stderr["$tty?"]()],["order","top"]]).$merge(K(i=c)?i:new Map),X=[c["$[]"]("highlight"),c["$[]"]("order")],a=X[0],$=X[1],K([!0,!1]["$include?"](a))||$e.$raise(P("ArgumentError"),"expected true or false as highlight: "+a),K(["top","bottom"]["$include?"]($))||$e.$raise(P("ArgumentError"),"expected :top or :bottom as order: "+$),K(a)?(n="\x1B[1;4m",t="\x1B[1m",r="\x1B[m"):n=t=r="",s=y.$backtrace().$dup(),(W(s)||K(s["$empty?"]()))&&(s=y.$caller()),u=s.$shift(),f=""+u+": ",f=G(f,""+t+y.$to_s()+" ("+n+y.$class()+r+t+")"+r+`
`),f=G(f,ee(s,"map",[],function(C){return C==null&&(C=z),"	from "+C+`
`}).$join()),K(y.$cause())&&(f=G(f,y.$cause().$full_message(new Map([["highlight",a]])))),O($,"bottom")&&(f=f.$split(`
`).$reverse().$join(`
`),f=G(""+t+"Traceback"+r+` (most recent call last):
`,f)),f):""+y.message+`
`+y.stack},-1),T(S,"$inspect",function(){var c=this,X=z;return X=c.$to_s(),K(X["$empty?"]())?c.$class().$to_s():"#<"+c.$class().$to_s()+": "+c.$to_s()+">"}),T(S,"$set_backtrace",function(c){var X=this,y=!0,i,a;if(c===z)X.backtrace=z,X.stack="";else if(c.$$is_string)X.backtrace=[c],X.stack="  from "+c;else{if(c.$$is_array){for(i=0,a=c.length;i<a;i++)if(!c[i].$$is_string){y=!1;break}}else y=!1;y===!1&&$e.$raise(P("TypeError"),"backtrace must be Array of String"),X.backtrace=c,X.stack=ee(c,"map",[],function(n){return n==null&&(n=z),G("  from ",n)}).join(`
`)}return c}),T(S,"$to_s",function(){var c=this,X=z,y=z;return K(X=K(y=c.message)?c.message.$to_s():y)?X:c.$class().$to_s()})}("::",Error,j),k("::",P("Exception"),"ScriptError"),k("::",P("ScriptError"),"SyntaxError"),k("::",P("ScriptError"),"LoadError"),k("::",P("ScriptError"),"NotImplementedError"),k("::",P("Exception"),"SystemExit"),k("::",P("Exception"),"NoMemoryError"),k("::",P("Exception"),"SignalException"),k("::",P("SignalException"),"Interrupt"),k("::",P("Exception"),"SecurityError"),k("::",P("Exception"),"SystemStackError"),k("::",P("Exception"),"StandardError"),k("::",P("StandardError"),"EncodingError"),k("::",P("StandardError"),"ZeroDivisionError"),k("::",P("StandardError"),"NameError"),k("::",P("NameError"),"NoMethodError"),k("::",P("StandardError"),"RuntimeError"),k("::",P("RuntimeError"),"FrozenError"),k("::",P("StandardError"),"LocalJumpError"),k("::",P("StandardError"),"TypeError"),k("::",P("StandardError"),"ArgumentError"),k("::",P("ArgumentError"),"UncaughtThrowError"),k("::",P("StandardError"),"IndexError"),k("::",P("IndexError"),"StopIteration"),k("::",P("StopIteration"),"ClosedQueueError"),k("::",P("IndexError"),"KeyError"),k("::",P("StandardError"),"RangeError"),k("::",P("RangeError"),"FloatDomainError"),k("::",P("StandardError"),"IOError"),k("::",P("IOError"),"EOFError"),k("::",P("StandardError"),"SystemCallError"),k("::",P("StandardError"),"RegexpError"),k("::",P("StandardError"),"ThreadError"),k("::",P("StandardError"),"FiberError"),M.$autoload("Errno","corelib/error/errno"),function(m,A){var D=k(m,A,"FrozenError");return D.$attr_reader("receiver"),T(D,"$initialize",function S(w,o){var d;S.$$p;var N=this;return S.$$p=null,o=v(o),d=q(o,"receiver"),d==null&&(d=z),J(N,g(N,"initialize",S,!1,!0),"initialize",[w],null),N.receiver=d},-2)}("::",P("RuntimeError")),function(m,A){var D=k(m,A,"UncaughtThrowError"),S=D.$$prototype;return S.tag=z,D.$attr_reader("tag","value"),T(D,"$initialize",function w(o,d){w.$$p;var N=this;return w.$$p=null,d==null&&(d=z),N.tag=o,N.value=d,J(N,g(N,"initialize",w,!1,!0),"initialize",["uncaught throw "+N.tag.$inspect()],null)},-2)}("::",P("ArgumentError")),function(m,A){var D=k(m,A,"NameError");return D.$attr_reader("name"),T(D,"$initialize",function S(w,o){S.$$p;var d=this;return S.$$p=null,o==null&&(o=z),J(d,g(d,"initialize",S,!1,!0),"initialize",[w],null),d.name=o},-2)}("::",null),function(m,A){var D=k(m,A,"NoMethodError");return D.$attr_reader("args"),T(D,"$initialize",function S(w,o,d){S.$$p;var N=this;return S.$$p=null,o==null&&(o=z),d==null&&(d=[]),J(N,g(N,"initialize",S,!1,!0),"initialize",[w,o],null),N.args=d},-2)}("::",null),function(m,A){var D=k(m,A,"StopIteration");return D.$attr_reader("result")}("::",null),function(m,A){var D=k(m,A,"KeyError"),S=D.$$prototype;return S.receiver=S.key=z,T(D,"$initialize",function w(o,d){var N,h;w.$$p;var l=this;return w.$$p=null,d=v(d),N=q(d,"receiver"),N==null&&(N=z),h=q(d,"key"),h==null&&(h=z),J(l,g(l,"initialize",w,!1,!0),"initialize",[o],null),l.receiver=N,l.key=h},-2),T(D,"$receiver",function(){var o=this,d=z;return K(d=o.receiver)?d:$e.$raise(P("ArgumentError"),"no receiver is available")}),T(D,"$key",function(){var o=this,d=z;return K(d=o.key)?d:$e.$raise(P("ArgumentError"),"no key is available")})}("::",null),function(m,A){var D=k(m,A,"LocalJumpError");return D.$attr_reader("exit_value","reason"),T(D,"$initialize",function S(w,o,d){S.$$p;var N=this;return S.$$p=null,o==null&&(o=z),d==null&&(d="noreason"),J(N,g(N,"initialize",S,!1,!0),"initialize",[w],null),N.exit_value=o,N.reason=d},-2)}("::",null),function(m,A){var D=I(m,"JS"),S=[D].concat(A);return k(S[0],null,"Error"),z}("::",j)};Opal.modules["corelib/constants"]=function(e){var k=e.const_set;e.nil;var E=e.$$$;return k("::","RUBY_PLATFORM","opal"),k("::","RUBY_ENGINE","opal"),k("::","RUBY_VERSION","3.2.0"),k("::","RUBY_ENGINE_VERSION","1.8.2"),k("::","RUBY_RELEASE_DATE","2023-11-23"),k("::","RUBY_PATCHLEVEL",0),k("::","RUBY_REVISION","0"),k("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),k("::","RUBY_DESCRIPTION","opal "+E("RUBY_ENGINE_VERSION")+" ("+E("RUBY_RELEASE_DATE")+" revision "+E("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(e){var k=e.Object;return e.nil,e.add_stubs("require"),k.$require("corelib/runtime"),k.$require("corelib/helpers"),k.$require("corelib/module"),k.$require("corelib/class"),k.$require("corelib/basic_object"),k.$require("corelib/kernel"),k.$require("corelib/main"),k.$require("corelib/error"),k.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(e){var k=e.klass,E=e.Kernel,H=e.def,x=e.return_val,ee=e.ensure_kwargs,Z=e.hash_get,T=e.NilClass,J=e.slice,g=e.truthy,K=e.rb_gt,$e=e.alias,W=e.nil,G=e.$$$;return e.add_stubs("raise,name,new,>,length,Rational,to_i"),function(O,M,v){var q=k(O,M,"NilClass");return q.$$prototype.$$meta=q,function(I,j){return H(I,"$allocate",function(){var P=this;return E.$raise(G("TypeError"),"allocator undefined for "+P.$name())}),e.udef(I,"$new"),W}(e.get_singleton_class(q)),H(q,"$!",x(!0)),H(q,"$&",x(!1)),H(q,"$|",function(j){return j!==!1&&j!==W}),H(q,"$^",function(j){return j!==!1&&j!==W}),H(q,"$==",function(j){return j===W}),H(q,"$dup",x(W)),H(q,"$clone",function(j){return j=ee(j),Z(j,"freeze"),W},-1),H(q,"$inspect",x("nil")),H(q,"$nil?",x(!0)),H(q,"$singleton_class",function(){return T}),H(q,"$to_a",function(){return[]}),H(q,"$to_h",function(){return new Map}),H(q,"$to_i",x(0)),H(q,"$to_s",x("")),H(q,"$to_c",function(){return G("Complex").$new(0,0)}),H(q,"$rationalize",function(j){var z,P;return z=J(arguments),P=z,g(K(P.$length(),1))&&E.$raise(G("ArgumentError")),E.$Rational(0,1)},-1),H(q,"$to_r",function(){return E.$Rational(0,1)}),H(q,"$instance_variables",function(){return[]}),$e(q,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(e){var k=e.klass,E=e.Kernel,H=e.def,x=e.return_self,ee=e.ensure_kwargs,Z=e.hash_get,T=e.slice,J=e.truthy,g=e.send2,K=e.find_super,$e=e.to_a,W=e.alias,G=e.nil,O=e.$$$;return e.add_stubs("raise,name,==,to_s,__id__"),function(M,v,q){var I=k(M,v,"Boolean");e.prop(I.$$prototype,"$$is_boolean",!0);for(var j=["$$class","$$meta"],z=0;z<j.length;z++)Object.defineProperty(I.$$prototype,j[z],{configurable:!0,enumerable:!1,get:function(){return this==!0?e.TrueClass:this==!1?e.FalseClass:e.Boolean}});return Object.defineProperty(I.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:G}}),function(P,m){return H(P,"$allocate",function(){var D=this;return E.$raise(O("TypeError"),"allocator undefined for "+D.$name())}),e.udef(P,"$new"),G}(e.get_singleton_class(I)),H(I,"$__id__",function(){var m=this;return m.valueOf()?2:0}),H(I,"$!",function(){var m=this;return m!=!0}),H(I,"$&",function(m){var A=this;return A==!0?m!==!1&&m!==G:!1}),H(I,"$|",function(m){var A=this;return A==!0?!0:m!==!1&&m!==G}),H(I,"$^",function(m){var A=this;return A==!0?m===!1||m===G:m!==!1&&m!==G}),H(I,"$==",function(m){var A=this;return A==!0===m.valueOf()}),H(I,"$singleton_class",function(){var m=this;return m.$$meta}),H(I,"$to_s",function(){var m=this;return m==!0?"true":"false"}),H(I,"$dup",x),H(I,"$clone",function(m){var A=this;return m=ee(m),Z(m,"freeze"),A},-1),H(I,"$method_missing",function P(m,A){var D=P.$$p||G,S,w,o=this;P.$$p=null,S=T(arguments,1),w=S;var d=o.$$class.$$prototype[e.jsid(m)];return J(typeof d<"u"&&!d.$$stub)||g(o,K(o,"method_missing",P,!1,!0),"method_missing",[m].concat($e(w)),D),e.send(o,d,w,D)},-2),H(I,"$respond_to_missing?",function(m,A){var D=this,S=D.$$class.$$prototype[e.jsid(m)];return typeof S<"u"&&!S.$$stub},-2),W(I,"eql?","=="),W(I,"equal?","=="),W(I,"inspect","to_s"),W(I,"object_id","__id__")}("::",Boolean),k("::",O("Boolean"),"TrueClass"),k("::",O("Boolean"),"FalseClass"),G};Opal.modules["corelib/comparable"]=function(e){var k=e.truthy,E=e.module,H=e.rb_gt,x=e.rb_lt,ee=e.eqeqeq,Z=e.Kernel,T=e.def,J=e.nil,g=e.$$$;return e.add_stubs(">,<,===,raise,class,<=>,equal?"),function(K){var $e=E(K,"Comparable"),W=J;function G(v){return e.is_a(v,e.Integer)?v:H(v,0)?1:x(v,0)?-1:0}function O(v,q){var I;ee(J,W=q)||ee(!0,W)||ee(!1,W)||ee(g("Integer"),W)||ee(g("Float"),W)?I=q.$inspect():I=q.$$class,Z.$raise(g("ArgumentError"),"comparison of "+v.$class()+" with "+I+" failed")}function M(v,q){var I=v["$<=>"](q);return k(I)||O(v,q),G(I)}return T($e,"$==",function(q){var I=this,j=J;return k(I["$equal?"](q))?!0:I["$<=>"]==e.Kernel["$<=>"]?!1:I.$$comparable?(I.$$comparable=!1,!1):k(j=I["$<=>"](q))?G(j)==0:!1}),T($e,"$>",function(q){var I=this;return M(I,q)>0}),T($e,"$>=",function(q){var I=this;return M(I,q)>=0}),T($e,"$<",function(q){var I=this;return M(I,q)<0}),T($e,"$<=",function(q){var I=this;return M(I,q)<=0}),T($e,"$between?",function(q,I){var j=this;return!(k(x(j,q))||k(H(j,I)))}),T($e,"$clamp",function(q,I){var j=this;I==null&&(I=J);var z,P;if(I===J&&(e.is_a(q,e.Range)||Z.$raise(g("TypeError"),"wrong argument type "+q.$class()+" (expected Range)"),P=q.excl,I=q.end,q=q.begin,I!==J&&P&&Z.$raise(g("ArgumentError"),"cannot clamp with an exclusive range")),q!==J&&I!==J&&M(q,I)>0&&Z.$raise(g("ArgumentError"),"min argument must be smaller than max argument"),q!==J){if(z=M(j,q),z==0)return j;if(z<0)return q}return I!==J&&(z=M(j,I),z>0)?I:j},-2)}("::")};Opal.modules["corelib/regexp"]=function(e){var k=e.coerce_to,E=e.prop,H=e.freeze,x=e.klass,ee=e.const_set,Z=e.send2,T=e.find_super,J=e.def,g=e.truthy,K=e.gvars,$e=e.slice,W=e.Kernel,G=e.Opal,O=e.alias,M=e.send,v=e.regexp,q=e.rb_plus,I=e.ensure_kwargs,j=e.hash_get,z=e.rb_ge,P=e.to_a,m=e.eqeqeq,A=e.rb_minus,D=e.return_ivar,S=[],w=e.nil,o=e.$$$;return e.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),x("::",o("StandardError"),"RegexpError"),function(d,N,h){var l=x(d,N,"Regexp"),c=[l].concat(h),X=e.$r(c);return ee(l,"IGNORECASE",1),ee(l,"EXTENDED",2),ee(l,"MULTILINE",4),e.prop(l.$$prototype,"$$is_regexp",!0),function(y,i){var a=[y].concat(i),$=e.$r(a);return J(y,"$allocate",function n(){var t=n.$$p||w,r=this,s=w;return n.$$p=null,s=Z(r,T(r,"allocate",n,!1,!0),"allocate",[],t),s.uninitialized=!0,s}),J(y,"$escape",function(t){return t=k(t,o("String"),"to_str"),e.escape_regexp(t)}),J(y,"$last_match",function(t){return K["~"]==null&&(K["~"]=w),t==null&&(t=w),g(t["$nil?"]())?K["~"]:g(K["~"])?K["~"]["$[]"](t):w},-1),J(y,"$union",function(t){var r,s,u=this;r=$e(arguments),s=r;var f,b,C,L,F;if(s.length==0)return/(?!)/;if(s.length==1&&s[0].$$is_regexp)return s[0];f=s[0].$$is_array,s.length>1&&f&&W.$raise(o("TypeError"),"no implicit conversion of Array into String"),f&&(s=s[0]),L=void 0,b=[];for(var V=0;V<s.length;V++)C=s[V],C.$$is_string?b.push(u.$escape(C)):C.$$is_regexp?(F=C.$options(),L!=null&&L!=F&&W.$raise(o("TypeError"),"All expressions must use the same options"),L=F,b.push("("+C.source+")")):b.push(u.$escape(C.$to_str()));return u.$new(b.$join("|"),L)},-1),J(y,"$new",function(t,r){if(t.$$is_regexp)return new RegExp(t);if(t=G["$coerce_to!"](t,o("String"),"to_str"),t.charAt(t.length-1)==="\\"&&t.charAt(t.length-2)!=="\\"&&W.$raise(o("RegexpError"),"too short escape sequence: /"+t+"/"),t=t.replace("\\A","^").replace("\\z","$"),r===void 0||r["$!"]())return new RegExp(t);if(r.$$is_number){var s="";$("IGNORECASE")&r&&(s+="i"),$("MULTILINE")&r&&(s+="m"),r=s}else r="i";return new RegExp(t,r)},-2),O(y,"compile","new"),O(y,"quote","escape")}(e.get_singleton_class(l),c),J(l,"$==",function(i){var a=this;return i instanceof RegExp&&a.toString()===i.toString()}),J(l,"$===",function(i){var a=this;return a.$match(G["$coerce_to?"](i,o("String"),"to_str"))!==w}),J(l,"$=~",function(i){var a=this,$=w;return K["~"]==null&&(K["~"]=w),g($=a.$match(i))?K["~"].$begin(0):$}),J(l,"$freeze",function(){var i=this;return g(i["$frozen?"]())?i:(i.hasOwnProperty("$$g")||E(i,"$$g",null),i.hasOwnProperty("$$gm")||E(i,"$$gm",null),H(i))}),J(l,"$inspect",function(){var i=this,a=/^\/(.*)\/([^\/]*)$/,$=i.toString(),n=a.exec($);if(n){for(var t=n[1],r=n[2],s=t.split(""),u=s.length,f=!1,b="",C=0;C<u;C++){var L=s[C];!f&&L=="/"&&(b=b.concat("\\")),b=b.concat(L),L=="\\"?f?f=!1:f=!0:f=!1}return"/"+b+"/"+r}else return $}),J(l,"$match",function y(i,a){var $=y.$$p||w,n=this;if(K["~"]==null&&(K["~"]=w),y.$$p=null,n.uninitialized&&W.$raise(o("TypeError"),"uninitialized Regexp"),a===void 0){if(i===w)return K["~"]=w;var t=n.exec(k(i,o("String"),"to_str"));return t?(K["~"]=o("MatchData").$new(n,t),$===w?K["~"]:e.yield1($,K["~"])):K["~"]=w}if(a=k(a,o("Integer"),"to_int"),i===w||(i=k(i,o("String"),"to_str"),a<0&&(a+=i.length,a<0)))return K["~"]=w;for(var r,s=e.global_regexp(n);;){if(r=s.exec(i),r===null)return K["~"]=w;if(r.index>=a)return K["~"]=o("MatchData").$new(s,r),$===w?K["~"]:e.yield1($,K["~"]);s.lastIndex=r.index+1}},-2),J(l,"$match?",function(i,a){var $=this;if($.uninitialized&&W.$raise(o("TypeError"),"uninitialized Regexp"),a===void 0)return i===w?!1:$.test(k(i,o("String"),"to_str"));if(a=k(a,o("Integer"),"to_int"),i===w||(i=k(i,o("String"),"to_str"),a<0&&(a+=i.length,a<0)))return!1;var n,t=e.global_regexp($);return n=t.exec(i),!(n===null||n.index<a)},-2),J(l,"$names",function(){var i=this;return M(i.$source().$scan(v(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),J(l,"$named_captures",function(){var i=this;return M(M(M(i.$source().$scan(v(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function($){return $==null&&($=w),M($,"map",[],function(t){return t==null&&(t=w),q(t.$last(),1)})})}),J(l,"$~",function(){var i=this;return K._==null&&(K._=w),i["$=~"](K._)}),J(l,"$source",function(){var i=this;return i.source}),J(l,"$options",function(){var i=this;i.uninitialized&&W.$raise(o("TypeError"),"uninitialized Regexp");var a=0;return i.multiline&&(a|=X("MULTILINE")),i.ignoreCase&&(a|=X("IGNORECASE")),a}),J(l,"$casefold?",function(){var i=this;return i.ignoreCase}),O(l,"eql?","=="),O(l,"to_s","source")}("::",RegExp,S),function(d,N,h){var l=x(d,N,"MatchData"),c=[l].concat(h),X=e.$r(c),y=l.$$prototype;return y.matches=w,l.$attr_reader("post_match","pre_match","regexp","string"),J(l,"$initialize",function(a,$,n){var t,r=this;n=I(n),t=j(n,"no_matchdata"),t==null&&(t=!1),g(t)||(K["~"]=r),r.regexp=a,r.begin=$.index,r.string=$.input,r.pre_match=$.input.slice(0,$.index),r.post_match=$.input.slice($.index+$[0].length),r.matches=[];for(var s=0,u=$.length;s<u;s++){var f=$[s];f==null?r.matches.push(w):r.matches.push(f)}},-3),J(l,"$match",function(a){var $=this,n=w;return g(n=$["$[]"](a))?n:g(a["$is_a?"](X("Integer")))&&g(z(a,$.$length()))?W.$raise(o("IndexError"),"index "+a+" out of matches"):w}),J(l,"$match_length",function(a){var $,n=this;return $=n.$match(a),$===w||$==null?w:$.$length()}),J(l,"$[]",function(a){var $,n,t=this;return $=$e(arguments),n=$,n[0].$$is_string?(t.$regexp().$names()["$include?"](n["$[]"](0))["$!"]()&&W.$raise(o("IndexError"),"undefined group name reference: "+n["$[]"](0)),t.$named_captures()["$[]"](n["$[]"](0))):M(t.matches,"[]",P(n))},-1),J(l,"$offset",function(a){var $=this;return a!==0&&W.$raise(o("ArgumentError"),"MatchData#offset only supports 0th element"),[$.begin,$.begin+$.matches[a].length]}),J(l,"$==",function(a){var $=this,n=w,t=w,r=w,s=w;return m(o("MatchData"),a)?g(n=g(t=g(r=g(s=$.string==a.string)?$.regexp.toString()==a.regexp.toString():s)?$.pre_match==a.pre_match:r)?$.post_match==a.post_match:t)?$.begin==a.begin:n:!1}),J(l,"$begin",function(a){var $=this;return a!==0&&W.$raise(o("ArgumentError"),"MatchData#begin only supports 0th element"),$.begin}),J(l,"$end",function(a){var $=this;return a!==0&&W.$raise(o("ArgumentError"),"MatchData#end only supports 0th element"),$.begin+$.matches[a].length}),J(l,"$captures",function(){var a=this;return a.matches.slice(1)}),J(l,"$named_captures",function(){var a=this,$=w;return $=a.$captures(),M(a.$regexp().$named_captures(),"transform_values",[],function(t){return t==null&&(t=w),$["$[]"](A(t.$last(),1))})}),J(l,"$names",function(){var a=this;return a.$regexp().$names()}),J(l,"$inspect",function(){var a=this,$="#<MatchData "+a.matches[0].$inspect();if(a.$regexp().$names()["$empty?"]())for(var n=1,t=a.matches.length;n<t;n++)$+=" "+n+":"+a.matches[n].$inspect();else M(a.$named_captures(),"each",[],function(s,u){return s==null&&(s=w),u==null&&(u=w),$+=" "+s+":"+u.$inspect()});return $+">"}),J(l,"$length",function(){var a=this;return a.matches.length}),J(l,"$to_a",D("matches")),J(l,"$to_s",function(){var a=this;return a.matches[0]}),J(l,"$values_at",function(a){var $,n,t=this;$=$e(arguments),n=$;var r,s,u,f=[];for(r=0;r<n.length;r++){if(n[r].$$is_range&&(s=n[r].$to_a(),s.unshift(r,1),Array.prototype.splice.apply(n,s)),u=G["$coerce_to!"](n[r],o("Integer"),"to_int"),u<0&&(u+=t.matches.length,u<0)){f.push(w);continue}f.push(t.matches[u])}return f},-1),O(l,"eql?","=="),O(l,"size","length")}(S[0],null,S)};Opal.modules["corelib/string"]=function(e){var k=e.coerce_to,E=e.respond_to,H=e.global_multiline_regexp,x=e.prop,ee=e.opal32_init,Z=e.opal32_add,T=e.klass,J=e.send2,g=e.find_super,K=e.def,$e=e.Opal,W=e.defs,G=e.slice,O=e.send,M=e.to_a,v=e.extract_kwargs,q=e.ensure_kwargs,I=e.hash_get,j=e.eqeqeq,z=e.Kernel,P=e.truthy,m=e.gvars,A=e.rb_divide,D=e.rb_plus,S=e.eqeq,w=e.alias,o=e.const_set,d=e.top,N=[],h=e.$r(N),l=e.nil,c=e.$$$;return e.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),d.$require("corelib/comparable"),d.$require("corelib/regexp"),function(X,y,i){var a=T(X,y,"String"),$=[a].concat(i),n=e.$r($);a.$include(c("Comparable")),e.prop(a.$$prototype,"$$is_string",!0);var t=new Map;(function(){K(a,"$__id__",function s(){var u=s.$$p||l,f=this;if(s.$$p=null,typeof f=="object")return J(f,g(f,"__id__",s,!1,!0),"__id__",[],u);if(t.has(f))return t.get(f);var b=e.uid();return t.set(f,b),b}),K(a,"$hash",function(){var u=this,f=ee(),b,C=u.length;for(f=Z(f,5),f=Z(f,C),b=0;b<C;b++)f=Z(f,u.charCodeAt(b));return f})})(),W(a,"$try_convert",function(u){return $e["$coerce_to?"](u,c("String"),"to_str")}),W(a,"$new",function(u){var f,b,C=this;f=G(arguments),b=f;var L=b[0]||"",F=b[b.length-1];return L=k(L,c("String"),"to_str"),F&&F.$$is_hash&&F.has("encoding")&&(L=L.$force_encoding(F.get("encoding").value)),L=new C.$$constructor(L),L.$initialize.$$pristine||O(L,"initialize",M(b)),L},-1),K(a,"$initialize",function(u,f){var b,C;return b=G(arguments),C=v(b),C=q(C),b.length>0&&b.shift(),I(C,"encoding"),I(C,"capacity"),l},-1),K(a,"$%",function(u){var f=this;return j(c("Array"),u)?O(f,"format",[f].concat(M(u))):f.$format(f,u)}),K(a,"$*",function(u){var f=this;if(u=k(u,c("Integer"),"to_int"),u<0&&z.$raise(c("ArgumentError"),"negative argument"),u===0)return"";var b="",C=f.toString();for(C.length*u>=1<<28&&z.$raise(c("RangeError"),"multiply count must not overflow maximum string size");(u&1)===1&&(b+=C),u>>>=1,u!==0;)C+=C;return b}),K(a,"$+",function(u){var f=this;if(u=k(u,c("String"),"to_str"),u==""&&f.$$class===e.String)return f;if(f==""&&u.$$class===e.String)return u;var b=f+u;return f.encoding===b.encoding&&u.encoding===b.encoding||f.encoding.name==="UTF-8"||u.encoding.name==="UTF-8"?b:e.enc(b,f.encoding)}),K(a,"$<=>",function(u){var f=this;if(P(u["$respond_to?"]("to_str")))return u=u.$to_str().$to_s(),f>u?1:f<u?-1:0;var b=u["$<=>"](f);return b===l?l:b>0?-1:b<0?1:0}),K(a,"$==",function(u){var f=this;return u.$$is_string?f.toString()===u.toString():E(u,"$to_str")?u["$=="](f):!1}),K(a,"$=~",function(u){var f=this;return u.$$is_string&&z.$raise(c("TypeError"),"type mismatch: String given"),u["$=~"](f)}),K(a,"$[]",function(u,f){var b=this,C=b.length,L,F;if(u.$$is_range)return L=u.excl,F=u,f=u.end===l?-1:k(u.end,c("Integer"),"to_int"),u=u.begin===l?0:k(u.begin,c("Integer"),"to_int"),Math.abs(u)>C?l:(u<0&&(u+=C),f<0&&(f+=C),(!L||F.end===l)&&(f+=1),f=f-u,f<0&&(f=0),b.substr(u,f));if(u.$$is_string)return f!=null&&z.$raise(c("TypeError")),b.indexOf(u)!==-1?u:l;if(u.$$is_regexp){var V=b.match(u);return V===null?(m["~"]=l,l):(m["~"]=c("MatchData").$new(u,V),f==null?V[0]:(f=k(f,c("Integer"),"to_int"),f<0&&-f<V.length?V[f+=V.length]:f>=0&&f<V.length?V[f]:l))}return u=k(u,c("Integer"),"to_int"),u<0&&(u+=C),f==null?u>=C||u<0?l:b.substr(u,1):(f=k(f,c("Integer"),"to_int"),f<0||u>C||u<0?l:b.substr(u,f))},-2),K(a,"$b",function(){var u=this;return new String(u).$force_encoding("binary")}),K(a,"$capitalize",function(){var u=this;return u.charAt(0).toUpperCase()+u.substr(1).toLowerCase()}),K(a,"$casecmp",function(u){var f=this;if(!P(u["$respond_to?"]("to_str")))return l;u=k(u,c("String"),"to_str").$to_s();var b=/^[\x00-\x7F]*$/;return b.test(f)&&b.test(u)&&(f=f.toLowerCase(),u=u.toLowerCase()),f["$<=>"](u)}),K(a,"$casecmp?",function(u){var f=this,b=f.$casecmp(u);return b===l?l:b===0}),K(a,"$center",function(u,f){var b=this;if(f==null&&(f=" "),u=k(u,c("Integer"),"to_int"),f=k(f,c("String"),"to_str").$to_s(),P(f["$empty?"]())&&z.$raise(c("ArgumentError"),"zero width padding"),P(u<=b.length))return b;var C=b.$ljust(A(D(u,b.length),2).$ceil(),f),L=b.$rjust(A(D(u,b.length),2).$floor(),f);return L+C.slice(b.length)},-2),K(a,"$chomp",function(u){var f=this;if(m["/"]==null&&(m["/"]=l),u==null&&(u=m["/"]),P(u===l||f.length===0))return f;u=$e["$coerce_to!"](u,c("String"),"to_str").$to_s();var b;if(u===`
`)b=f.replace(/\r?\n?$/,"");else if(u==="")b=f.replace(/(\r?\n)+$/,"");else if(f.length>=u.length){var C=f.substr(f.length-u.length,u.length);C===u&&(b=f.substr(0,f.length-u.length))}return b??f},-1),K(a,"$chop",function(){var u=this,f=u.length,b;return f<=1?b="":u.charAt(f-1)===`
`&&u.charAt(f-2)==="\r"?b=u.substr(0,f-2):b=u.substr(0,f-1),b}),K(a,"$chr",function(){var u=this;return u.charAt(0)}),K(a,"$clone",function(u){var f,b=this,C=l;return u=q(u),f=I(u,"freeze"),f==null&&(f=l),P(f["$nil?"]())||S(f,!0)||S(f,!1)||b.$raise(n("ArgumentError"),"unexpected value for freeze: "+f.$class()),C=new String(b),C.$copy_singleton_methods(b),C.$initialize_clone(b,new Map([["freeze",f]])),S(f,!0)?C.$$frozen||(C.$$frozen=!0):P(f["$nil?"]())&&b.$$frozen&&(C.$$frozen=!0),C},-1),K(a,"$dup",function(){var u=this,f=l;return f=new String(u),f.$initialize_dup(u),f}),K(a,"$count",function(u){var f,b,C=this;f=G(arguments),b=f,b.length===0&&z.$raise(c("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var L=r(b);return L===null?0:C.length-C.replace(new RegExp(L,"g"),"").length},-1),K(a,"$delete",function(u){var f,b,C=this;f=G(arguments),b=f,b.length===0&&z.$raise(c("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var L=r(b);return L===null?C:C.replace(new RegExp(L,"g"),"")},-1),K(a,"$delete_prefix",function(u){var f=this;return u.$$is_string||(u=k(u,c("String"),"to_str")),f.slice(0,u.length)===u?f.slice(u.length):f}),K(a,"$delete_suffix",function(u){var f=this;return u.$$is_string||(u=k(u,c("String"),"to_str")),f.slice(f.length-u.length)===u?f.slice(0,f.length-u.length):f}),K(a,"$downcase",function(){var u=this;return u.toLowerCase()}),K(a,"$each_line",function s(u,f){var b=s.$$p||l,C,L,F,V,re=this;if(m["/"]==null&&(m["/"]=l),s.$$p=null,C=G(arguments),L=v(C),L=q(L),C.length>0&&(F=C.shift()),F==null&&(F=m["/"]),V=I(L,"chomp"),V==null&&(V=!1),b===l)return re.$enum_for("each_line",F,new Map([["chomp",V]]));if(F===l)return e.yield1(b,re),re;F=k(F,c("String"),"to_str");var ae,le,_e,de,ge,ve,me,be;if(F.length===0){for(ae=re.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,_e=ae.length;le<_e;le+=2)(ae[le]||ae[le+1])&&(be=(ae[le]||"")+(ae[le+1]||""),V&&(be=be.$chomp(`
`)),e.yield1(b,be));return re}for(ge=re.$chomp(F),ve=re.length!=ge.length,me=ge.split(F),le=0,de=me.length;le<de;le++)be=me[le],(le<de-1||ve)&&(be+=F),V&&(be=be.$chomp(F)),e.yield1(b,be);return re},-1),K(a,"$empty?",function(){var u=this;return u.length===0}),K(a,"$end_with?",function(u){var f,b,C=this;f=G(arguments),b=f;for(var L=0,F=b.length;L<F;L++){var V=k(b[L],c("String"),"to_str").$to_s();if(C.length>=V.length&&C.substr(C.length-V.length,V.length)==V)return!0}return!1},-1),K(a,"$gsub",function s(u,f){var b=s.$$p||l,C=this;if(s.$$p=null,f===void 0&&b===l)return C.$enum_for("gsub",u);var L="",F=l,V=0,re,ae;u.$$is_regexp?u=H(u):(u=k(u,c("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(re=u.exec(C),re===null){m["~"]=l,L+=C.slice(V);break}F=c("MatchData").$new(u,re),f===void 0?(le=u.lastIndex,ae=b(re[0]),u.lastIndex=le):f.$$is_hash?ae=f["$[]"](re[0]).$to_s():(f.$$is_string||(f=k(f,c("String"),"to_str")),ae=f.replace(/([\\]+)([0-9+&`'])/g,function(_e,de,ge){if(de.length%2===0)return _e;switch(ge){case"+":for(var ve=re.length-1;ve>0;ve--)if(re[ve]!==void 0)return de.slice(1)+re[ve];return"";case"&":return de.slice(1)+re[0];case"`":return de.slice(1)+C.slice(0,re.index);case"'":return de.slice(1)+C.slice(re.index+re[0].length);default:return de.slice(1)+(re[ge]||"")}}).replace(/\\\\/g,"\\")),u.lastIndex===re.index?(L+=C.slice(V,re.index)+ae+(C[re.index]||""),u.lastIndex+=1):L+=C.slice(V,re.index)+ae,V=u.lastIndex}return m["~"]=F,L},-2),K(a,"$hex",function(){var u=this;return u.$to_i(16)}),K(a,"$include?",function(u){var f=this;return u.$$is_string||(u=k(u,c("String"),"to_str")),f.indexOf(u)!==-1}),K(a,"$index",function(u,f){var b=this,C,L,F;if(f===void 0)f=0;else if(f=k(f,c("Integer"),"to_int"),f<0&&(f+=b.length,f<0))return l;if(u.$$is_regexp)for(F=H(u);;){if(L=F.exec(b),L===null){m["~"]=l,C=-1;break}if(L.index>=f){m["~"]=c("MatchData").$new(F,L),C=L.index;break}F.lastIndex=L.index+1}else u=k(u,c("String"),"to_str"),u.length===0&&f>b.length?C=-1:C=b.indexOf(u,f);return C===-1?l:C},-2),K(a,"$inspect",function(){var u=this,f=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,b={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},C=u.replace(f,function(L){return b[L]?b[L]:(L=L.charCodeAt(0),L<=255&&(u.encoding["$binary?"]()||u.internal_encoding["$binary?"]())?"\\x"+("00"+L.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+L.toString(16).toUpperCase()).slice(-4))});return'"'+C.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),K(a,"$intern",function(){var u=this;return u.toString()}),K(a,"$length",function(){var u=this;return u.length}),w(a,"size","length"),K(a,"$lines",function s(u,f){var b=s.$$p||l,C,L,F,V,re=this,ae=l;return m["/"]==null&&(m["/"]=l),s.$$p=null,C=G(arguments),L=v(C),L=q(L),C.length>0&&(F=C.shift()),F==null&&(F=m["/"]),V=I(L,"chomp"),V==null&&(V=!1),ae=O(re,"each_line",[F,new Map([["chomp",V]])],b.$to_proc()),P(b)?re:ae.$to_a()},-1),K(a,"$ljust",function(u,f){var b=this;if(f==null&&(f=" "),u=k(u,c("Integer"),"to_int"),f=k(f,c("String"),"to_str").$to_s(),P(f["$empty?"]())&&z.$raise(c("ArgumentError"),"zero width padding"),P(u<=b.length))return b;var C=-1,L="";for(u-=b.length;++C<u;)L+=f;return b+L.slice(0,u)},-2),K(a,"$lstrip",function(){var u=this;return u.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),K(a,"$ascii_only?",function(){var u=this;return u.encoding.ascii?/^[\x00-\x7F]*$/.test(u):!1}),K(a,"$match",function s(u,f){var b=s.$$p||l,C=this;return s.$$p=null,(j(n("String"),u)||P(u["$respond_to?"]("to_str")))&&(u=c("Regexp").$new(u.$to_str())),j(c("Regexp"),u)||z.$raise(c("TypeError"),"wrong argument type "+u.$class()+" (expected Regexp)"),O(u,"match",[C,f],b.$to_proc())},-2),K(a,"$match?",function(u,f){var b=this;return(j(n("String"),u)||P(u["$respond_to?"]("to_str")))&&(u=c("Regexp").$new(u.$to_str())),j(c("Regexp"),u)||z.$raise(c("TypeError"),"wrong argument type "+u.$class()+" (expected Regexp)"),u["$match?"](b,f)},-2),K(a,"$next",function(){var u=this,f=u.length;if(f===0)return"";for(var b=u,C=u.search(/[a-zA-Z0-9]/),L=!1,F;f--;){if(F=u.charCodeAt(f),F>=48&&F<=57||F>=65&&F<=90||F>=97&&F<=122)switch(F){case 57:L=!0,F=48;break;case 90:L=!0,F=65;break;case 122:L=!0,F=97;break;default:L=!1,F+=1}else C===-1?F===255?(L=!0,F=0):(L=!1,F+=1):L=!0;if(b=b.slice(0,f)+String.fromCharCode(F)+b.slice(f+1),L&&(f===0||f===C)){switch(F){case 65:break;case 97:break;default:F+=1}f===0?b=String.fromCharCode(F)+b:b=b.slice(0,f)+String.fromCharCode(F)+b.slice(f),L=!1}if(!L)break}return b}),K(a,"$oct",function(){var u=this,f,b=u,C=8;return/^\s*_/.test(b)?0:(b=b.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(L,F,V,re){switch(re.charAt(0)){case"+":case"-":return L;case"0":if(re.charAt(1)==="x"&&V==="0x")return L}switch(V){case"0b":C=2;break;case"0":case"0o":C=8;break;case"0d":C=10;break;case"0x":C=16;break}return F+re}),f=parseInt(b.replace(/_(?!_)/g,""),C),isNaN(f)?0:f)}),K(a,"$ord",function(){var u=this;return typeof u.codePointAt=="function"?u.codePointAt(0):u.charCodeAt(0)}),K(a,"$partition",function(u){var f=this,b,C;return u.$$is_regexp?(C=u.exec(f),C===null?b=-1:(c("MatchData").$new(u,C),u=C[0],b=C.index)):(u=k(u,c("String"),"to_str"),b=f.indexOf(u)),b===-1?[f,"",""]:[f.slice(0,b),f.slice(b,b+u.length),f.slice(b+u.length)]}),K(a,"$reverse",function(){var u=this;return u.split("").reverse().join("")}),K(a,"$rindex",function(u,f){var b=this,C,L,F,V;if(f===void 0)f=b.length;else if(f=k(f,c("Integer"),"to_int"),f<0&&(f+=b.length,f<0))return l;if(u.$$is_regexp){for(L=null,F=H(u);V=F.exec(b),!(V===null||V.index>f);)L=V,F.lastIndex=L.index+1;L===null?(m["~"]=l,C=-1):(c("MatchData").$new(F,L),C=L.index)}else u=k(u,c("String"),"to_str"),C=b.lastIndexOf(u,f);return C===-1?l:C},-2),K(a,"$rjust",function(u,f){var b=this;if(f==null&&(f=" "),u=k(u,c("Integer"),"to_int"),f=k(f,c("String"),"to_str").$to_s(),P(f["$empty?"]())&&z.$raise(c("ArgumentError"),"zero width padding"),P(u<=b.length))return b;var C=Math.floor(u-b.length),L=Math.floor(C/f.length),F=Array(L+1).join(f),V=C-F.length;return F+f.slice(0,V)+b},-2),K(a,"$rpartition",function(u){var f=this,b,C,L,F;if(u.$$is_regexp){for(C=null,L=H(u);F=L.exec(f),F!==null;)C=F,L.lastIndex=C.index+1;C===null?b=-1:(c("MatchData").$new(L,C),u=C[0],b=C.index)}else u=k(u,c("String"),"to_str"),b=f.lastIndexOf(u);return b===-1?["","",f]:[f.slice(0,b),f.slice(b,b+u.length),f.slice(b+u.length)]}),K(a,"$rstrip",function(){var u=this;return u.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),K(a,"$scan",function s(u,f){var b=s.$$p||l,C,L=this;s.$$p=null,f=q(f),C=I(f,"no_matchdata"),C==null&&(C=!1);var F=[],V=l,re;for(u.$$is_regexp?u=H(u):(u=k(u,c("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(re=u.exec(L))!=null;)V=c("MatchData").$new(u,re,new Map([["no_matchdata",C]])),b===l?re.length==1?F.push(re[0]):F.push(V.$captures()):re.length==1?e.yield1(b,re[0]):e.yield1(b,V.$captures()),u.lastIndex===re.index&&(u.lastIndex+=1);return C||(m["~"]=V),b!==l?L:F},-2),K(a,"$singleton_class",function(){var u=this;return e.get_singleton_class(u)}),K(a,"$split",function(u,f){var b=this,C=l;if(m[";"]==null&&(m[";"]=l),b.length===0)return[];if(f===void 0)f=0;else if(f=$e["$coerce_to!"](f,c("Integer"),"to_int"),f===1)return[b];(u===void 0||u===l)&&(u=P(C=m[";"])?C:" ");var L=[],F=b.toString(),V=0,re,ae=0,le=0,_e,de;if(u.$$is_regexp?u=H(u):(u=k(u,c("String"),"to_str").$to_s(),u===" "&&(u=/\s+/gm,F=F.replace(/^\s+/,""))),L=F.split(u),L.length===1&&L[0]===F)return[L[0]];for(;(_e=L.indexOf(void 0))!==-1;)L.splice(_e,1);if(f===0){for(;L[L.length-1]==="";)L.pop();return L}if(u.$$is_regexp||(u=e.escape_regexp(u),u=new RegExp(u,"gm")),re=u.exec(F),f<0){if(re!==null&&re[0]===""&&u.source.indexOf("(?=")===-1)for(_e=0,de=re.length;_e<de;_e++)L.push("");return L}if(re!==null&&re[0]==="")return le=(re.length-1)*(f-1)+f,L.splice(le-1,L.length-1,L.slice(le-1).join("")),L;if(f>=L.length)return L;for(;re!==null&&(ae++,V=u.lastIndex,le+=re.length,ae+1!==f);)re=u.exec(F);return L.splice(le,L.length-1,F.slice(V)),L},-1),K(a,"$squeeze",function(u){var f,b,C=this;if(f=G(arguments),b=f,b.length===0)return C.replace(/(.)\1+/g,"$1");var L=r(b);return L===null?C:C.replace(new RegExp("("+L+")\\1+","g"),"$1")},-1),K(a,"$start_with?",function(u){var f,b,C=this;f=G(arguments),b=f;for(var L=0,F=b.length;L<F;L++)if(b[L].$$is_regexp){var V=b[L],re=V.exec(C);if(re!=null&&re.index===0)return m["~"]=c("MatchData").$new(V,re),!0;m["~"]=l}else{var ae=k(b[L],c("String"),"to_str").$to_s();if(C.length>=ae.length&&C.startsWith(ae))return!0}return!1},-1),K(a,"$strip",function(){var u=this;return u.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),K(a,"$sub",function s(u,f){var b=s.$$p||l,C=this;s.$$p=null,u.$$is_regexp||(u=k(u,c("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var L,F=u.exec(C);return F===null?(m["~"]=l,L=C.toString()):(c("MatchData").$new(u,F),f===void 0?(b===l&&z.$raise(c("ArgumentError"),"wrong number of arguments (1 for 2)"),L=C.slice(0,F.index)+b(F[0])+C.slice(F.index+F[0].length)):f.$$is_hash?L=C.slice(0,F.index)+f["$[]"](F[0]).$to_s()+C.slice(F.index+F[0].length):(f=k(f,c("String"),"to_str"),f=f.replace(/([\\]+)([0-9+&`'])/g,function(V,re,ae){if(re.length%2===0)return V;switch(ae){case"+":for(var le=F.length-1;le>0;le--)if(F[le]!==void 0)return re.slice(1)+F[le];return"";case"&":return re.slice(1)+F[0];case"`":return re.slice(1)+C.slice(0,F.index);case"'":return re.slice(1)+C.slice(F.index+F[0].length);default:return re.slice(1)+(F[ae]||"")}}).replace(/\\\\/g,"\\"),L=C.slice(0,F.index)+f+C.slice(F.index+F[0].length))),L},-2),K(a,"$sum",function(u){var f=this;u==null&&(u=16),u=k(u,c("Integer"),"to_int");for(var b=0,C=f.length,L=0;L<C;L++)b+=f.charCodeAt(L);return u<=0?b:b&Math.pow(2,u)-1},-1),K(a,"$swapcase",function(){var u=this,f=u.replace(/([a-z]+)|([A-Z]+)/g,function(b,C,L){return C?b.toUpperCase():b.toLowerCase()});return f}),K(a,"$to_f",function(){var u=this;if(u.charAt(0)==="_")return 0;var f=parseFloat(u.replace(/_/g,""));return isNaN(f)||f==1/0||f==-1/0?0:f}),K(a,"$to_i",function(u){var f=this;u==null&&(u=10);var b,C=f.toLowerCase(),L=k(u,c("Integer"),"to_int");return(L===1||L<0||L>36)&&z.$raise(c("ArgumentError"),"invalid radix "+L),/^\s*_/.test(C)?0:(C=C.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(F,V,re,ae){switch(ae.charAt(0)){case"+":case"-":return F;case"0":if(ae.charAt(1)==="x"&&re==="0x"&&(L===0||L===16))return F}switch(re){case"0b":if(L===0||L===2)return L=2,V+ae;break;case"0":case"0o":if(L===0||L===8)return L=8,V+ae;break;case"0d":if(L===0||L===10)return L=10,V+ae;break;case"0x":if(L===0||L===16)return L=16,V+ae;break}return F}),b=parseInt(C.replace(/_(?!_)/g,""),L),isNaN(b)?0:b)},-1),K(a,"$to_proc",function s(){s.$$p;var u=this,f=l,b=l,C=l;return s.$$p=null,f=u.valueOf(),b=e.jsid(f),C=O(z,"proc",[],function L(F){var V=L.$$p||l,re,ae;L.$$p=null,re=G(arguments),ae=re,ae.length===0&&z.$raise(c("ArgumentError"),"no receiver given");var le=ae[0];le==null&&(le=l);var _e=le[b];return _e?ae=ae.slice(1):(_e=le.$method_missing,ae[0]=f),typeof V=="function"&&(_e.$$p=V),ae.length===0?_e.call(le):_e.apply(le,ae)},-1),C.$$source_location=l,C}),K(a,"$to_s",function(){var u=this;return u.toString()}),K(a,"$tr",function(u,f){var b=this;if(u=k(u,c("String"),"to_str").$to_s(),f=k(f,c("String"),"to_str").$to_s(),u.length==0||u===f)return b;var C,L,F,V,re,ae,le,_e={},de=u.split(""),ge=de.length,ve=f.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],ge-=1);var R=[],B=null;for(L=!1,C=0;C<ge;C++)if(V=de[C],B==null)B=V,R.push(V);else if(V==="-")B==="-"?(R.push("-"),R.push("-")):C==ge-1?R.push("-"):L=!0;else if(L){for(re=B.charCodeAt(0),ae=V.charCodeAt(0),re>ae&&z.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),F=re+1;F<ae;F++)R.push(String.fromCharCode(F));R.push(V),L=null,B=null}else R.push(V);if(de=R,ge=de.length,be)for(C=0;C<ge;C++)_e[de[C]]=!0;else{if(me>0){var Y=[],Q=null;for(L=!1,C=0;C<me;C++)if(V=ve[C],Q==null)Q=V,Y.push(V);else if(V==="-")Q==="-"?(Y.push("-"),Y.push("-")):C==me-1?Y.push("-"):L=!0;else if(L){for(re=Q.charCodeAt(0),ae=V.charCodeAt(0),re>ae&&z.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),F=re+1;F<ae;F++)Y.push(String.fromCharCode(F));Y.push(V),L=null,Q=null}else Y.push(V);ve=Y,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(C=0;C<ne;C++)ve.push(se)}for(C=0;C<ge;C++)_e[de[C]]=ve[C]}var oe="";for(C=0,le=b.length;C<le;C++){V=b.charAt(C);var fe=_e[V];be?oe+=fe==null?ie:V:oe+=fe??V}return oe}),K(a,"$tr_s",function(u,f){var b=this;if(u=k(u,c("String"),"to_str").$to_s(),f=k(f,c("String"),"to_str").$to_s(),u.length==0)return b;var C,L,F,V,re,ae,le,_e={},de=u.split(""),ge=de.length,ve=f.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],ge-=1);var R=[],B=null;for(L=!1,C=0;C<ge;C++)if(V=de[C],B==null)B=V,R.push(V);else if(V==="-")B==="-"?(R.push("-"),R.push("-")):C==ge-1?R.push("-"):L=!0;else if(L){for(re=B.charCodeAt(0),ae=V.charCodeAt(0),re>ae&&z.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),F=re+1;F<ae;F++)R.push(String.fromCharCode(F));R.push(V),L=null,B=null}else R.push(V);if(de=R,ge=de.length,be)for(C=0;C<ge;C++)_e[de[C]]=!0;else{if(me>0){var Y=[],Q=null;for(L=!1,C=0;C<me;C++)if(V=ve[C],B==null)B=V,Y.push(V);else if(V==="-")Q==="-"?(Y.push("-"),Y.push("-")):C==me-1?Y.push("-"):L=!0;else if(L){for(re=B.charCodeAt(0),ae=V.charCodeAt(0),re>ae&&z.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),F=re+1;F<ae;F++)Y.push(String.fromCharCode(F));Y.push(V),L=null,B=null}else Y.push(V);ve=Y,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(C=0;C<ne;C++)ve.push(se)}for(C=0;C<ge;C++)_e[de[C]]=ve[C]}var oe="",fe=null;for(C=0,le=b.length;C<le;C++){V=b.charAt(C);var _=_e[V];be?_==null?fe==null&&(oe+=ie,fe=!0):(oe+=V,fe=null):_!=null?(fe==null||fe!==_)&&(oe+=_,fe=_):(oe+=V,fe=null)}return oe}),K(a,"$upcase",function(){var u=this;return u.toUpperCase()}),K(a,"$upto",function s(u,f){var b=s.$$p||l,C=this;if(s.$$p=null,f==null&&(f=!1),b===l)return C.$enum_for("upto",u,f);var L,F,V=C.toString();if(u=k(u,c("String"),"to_str"),V.length===1&&u.length===1)for(L=V.charCodeAt(0),F=u.charCodeAt(0);L<=F&&!(f&&L===F);)b(String.fromCharCode(L)),L+=1;else if(parseInt(V,10).toString()===V&&parseInt(u,10).toString()===u)for(L=parseInt(V,10),F=parseInt(u,10);L<=F&&!(f&&L===F);)b(L.toString()),L+=1;else for(;V.length<=u.length&&V<=u&&!(f&&V===u);)b(V),V=V.$succ();return C},-2);function r(s){function u(_e){var de="",ge,ve=_e.length,me,be,ie,R,B;for(ge=0;ge<ve;ge++)if(me=_e.charAt(ge),me==="-"&&ge>0&&ge<ve-1&&!be){for(ie=_e.charCodeAt(ge-1),R=_e.charCodeAt(ge+1),ie>R&&z.$raise(c("ArgumentError"),'invalid range "'+ie+"-"+R+'" in string transliteration'),B=ie+1;B<R+1;B++)de+=String.fromCharCode(B);be=!0,ge++}else be=me==="\\",de+=me;return de}function f(_e,de){if(_e.length===0)return de;var ge="",ve,me=_e.length,be;for(ve=0;ve<me;ve++)be=_e.charAt(ve),de.indexOf(be)!==-1&&(ge+=be);return ge}var b,C,L,F,V,re,ae="",le="";for(b=0,C=s.length;b<C;b++)L=k(s[b],c("String"),"to_str"),F=L.charAt(0)==="^"&&L.length>1,L=u(F?L.slice(1):L),F?le=f(le,L):ae=f(ae,L);if(ae.length>0&&le.length>0){for(re="",b=0,C=ae.length;b<C;b++)V=ae.charAt(b),le.indexOf(V)===-1&&(re+=V);ae=re,le=""}return ae.length>0?"["+c("Regexp").$escape(ae)+"]":le.length>0?"[^"+c("Regexp").$escape(le)+"]":null}return K(a,"$instance_variables",function(){return[]}),W(a,"$_load",function(u){var f,b,C=this;return f=G(arguments),b=f,O(C,"new",M(b))},-1),K(a,"$unicode_normalize",function(u){var f=this;return u==null&&(u="nfc"),P(["nfc","nfd","nfkc","nfkd"]["$include?"](u))||z.$raise(c("ArgumentError"),"Invalid normalization form "+u),f.normalize(u.$upcase())},-1),K(a,"$unicode_normalized?",function(u){var f=this;return u==null&&(u="nfc"),f.$unicode_normalize(u)["$=="](f)},-1),K(a,"$unpack",function(u){return z.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),K(a,"$unpack1",function(u){return z.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),K(a,"$freeze",function(){var u=this;return typeof u=="string"||x(u,"$$frozen",!0),u}),K(a,"$-@",function(){var u=this;return typeof u=="string"||u.$$frozen?u:u.encoding.name=="UTF-8"&&u.internal_encoding.name=="UTF-8"?u.toString():u.$dup().$freeze()}),K(a,"$frozen?",function(){var u=this;return typeof u=="string"||u.$$frozen===!0}),w(a,"+@","dup"),w(a,"===","=="),w(a,"byteslice","[]"),w(a,"eql?","=="),w(a,"equal?","==="),w(a,"object_id","__id__"),w(a,"slice","[]"),w(a,"succ","next"),w(a,"to_str","to_s"),w(a,"to_sym","intern"),$e.$pristine(a,"initialize")}("::",String,N),o(N[0],"Symbol",h("String"))};Opal.modules["corelib/enumerable"]=function(e){var k=e.truthy,E=e.coerce_to,H=e.yield1,x=e.yieldX,ee=e.deny_frozen_access,Z=e.module,T=e.send,J=e.slice,g=e.to_a,K=e.Opal,$e=e.thrower,W=e.def,G=e.Kernel,O=e.return_val,M=e.rb_gt,v=e.rb_times,q=e.rb_lt,I=e.eqeq,j=e.rb_plus,z=e.rb_minus,P=e.rb_divide,m=e.rb_le,A=e.lambda,D=e.not,S=e.alias,w=[],o=e.nil,d=e.$$$;return e.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(N,h){var l=Z(N,"Enumerable"),c=[l].concat(h),X=e.$r(c);function y(i){return i.length===0&&(i=[o]),i.length>1&&(i=[i]),i}return W(l,"$all?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,k(a!==void 0)?T(t,"each",[],function r(s){var u,f,b=o;if(u=J(arguments),f=u,b=y(f),k(T(a,"public_send",["==="].concat(g(b)))))return o;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):n!==o?T(t,"each",[],function r(s){var u,f;if(u=J(arguments),f=u,k(e.yieldX(n,g(f))))return o;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):T(t,"each",[],function r(s){var u,f;if(u=J(arguments),f=u,k(K.$destructure(f)))return o;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),W(l,"$any?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,k(a!==void 0)?T(t,"each",[],function r(s){var u,f,b=o;if(u=J(arguments),f=u,b=y(f),k(T(a,"public_send",["==="].concat(g(b)))))$.$throw(!0,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):n!==o?T(t,"each",[],function r(s){var u,f;if(u=J(arguments),f=u,k(e.yieldX(n,g(f))))$.$throw(!0,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):T(t,"each",[],function r(s){var u,f;if(u=J(arguments),f=u,k(K.$destructure(f)))$.$throw(!0,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),!1}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),W(l,"$chunk",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o?T($,"to_enum",["chunk"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:$}):T(d("Enumerator"),"new",[],function n(t){var r=n.$$s==null?this:n.$$s;t==null&&(t=o);var s=o,u=[];function f(){u.length>0&&t.$yield(s,u)}r.$each.$$p=function(b){var C=H(a,b);C===o?(f(),u=[],s=o):(s===o||s===C?u.push(b):(f(),u=[b]),s=C)},r.$each(),f()},{$$s:$})}),W(l,"$chunk_while",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o&&G.$raise(d("ArgumentError"),"no block given"),T($,"slice_when",[],function(t,r){return t==null&&(t=o),r==null&&(r=o),e.yieldX(a,[t,r])["$!"]()})}),W(l,"$collect",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return T($,"enum_for",["collect"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$});var n=[];return $.$each.$$p=function(){var t=x(a,arguments);n.push(t)},$.$each(),n}),W(l,"$collect_concat",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o?T($,"enum_for",["collect_concat"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:$}):T($,"map",[],a.$to_proc()).$flatten(1)}),W(l,"$compact",function(){var a=this;return a.$to_a().$compact()}),W(l,"$count",function i(a){var $=i.$$p||o,n=this,t=o;return i.$$p=null,t=0,a!=null&&$!==o&&n.$warn("warning: given block not used"),k(a!=null)?$=T(G,"proc",[],function(s){var u,f;return u=J(arguments),f=u,K.$destructure(f)["$=="](a)},-1):k($["$nil?"]())&&($=T(G,"proc",[],O(!0))),T(n,"each",[],function(s){var u,f;return u=J(arguments),f=u,k(x($,f))?t++:o},-1),t},-1),W(l,"$cycle",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),$===o)return T(n,"enum_for",["cycle",a],function u(){var f=u.$$s==null?this:u.$$s;return k(a["$nil?"]())?k(f["$respond_to?"]("size"))?d(d("Float"),"INFINITY"):o:(a=K["$coerce_to!"](a,d("Integer"),"to_int"),k(M(a,0))?v(f.$enumerator_size(),a):0)},{$$s:n});if(!k(a["$nil?"]())&&(a=K["$coerce_to!"](a,d("Integer"),"to_int"),k(a<=0)))return o;var t=[],r,s;if(n.$each.$$p=function(){var u=K.$destructure(arguments);H($,u),t.push(u)},n.$each(),t.length===0)return o;if(a===o)for(;;)for(r=0,s=t.length;r<s;r++)H($,t[r]);else for(;a>1;){for(r=0,s=t.length;r<s;r++)H($,t[r]);a--}},-1),W(l,"$detect",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,n===o?t.$enum_for("detect",a):(T(t,"each",[],function r(s){var u,f,b=o;if(u=J(arguments),f=u,b=K.$destructure(f),k(e.yield1(n,b)))$.$throw(b,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),a!==void 0?typeof a=="function"?a():a:o)}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),W(l,"$drop",function(a){var $=this;a=E(a,d("Integer"),"to_int"),k(a<0)&&G.$raise(d("ArgumentError"),"attempt to drop negative size");var n=[],t=0;return $.$each.$$p=function(){a<=t&&n.push(K.$destructure(arguments)),t++},$.$each(),n}),W(l,"$drop_while",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return $.$enum_for("drop_while");var n=[],t=!0;return $.$each.$$p=function(){var r=K.$destructure(arguments);if(t){var s=H(a,r);k(s)||(t=!1,n.push(r))}else n.push(r)},$.$each(),n}),W(l,"$each_cons",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,k(arguments.length!=1)&&G.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),a=K.$try_convert(a,d("Integer"),"to_int"),k(a<=0)&&G.$raise(d("ArgumentError"),"invalid size"),$===o)return T(n,"enum_for",["each_cons",a],function r(){var s=r.$$s==null?this:r.$$s,u=o;return u=s.$enumerator_size(),k(u["$nil?"]())?o:I(u,0)||k(q(u,a))?0:j(z(u,a),1)},{$$s:n});var t=[];return n.$each.$$p=function(){var r=K.$destructure(arguments);t.push(r),t.length>a&&t.shift(),t.length==a&&H($,t.slice(0,a))},n.$each(),n}),W(l,"$each_entry",function i(a){var $=i.$$p||o,n,t,r=this;return i.$$p=null,n=J(arguments),t=n,$===o?T(r,"to_enum",["each_entry"].concat(g(t)),function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var s=K.$destructure(arguments);H($,s)},r.$each.apply(r,t),r)},-1),W(l,"$each_slice",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a=E(a,d("Integer"),"to_int"),k(a<=0)&&G.$raise(d("ArgumentError"),"invalid slice size"),$===o)return T(n,"enum_for",["each_slice",a],function r(){var s=r.$$s==null?this:r.$$s;return k(s["$respond_to?"]("size"))?P(s.$size(),a).$ceil():o},{$$s:n});var t=[];return n.$each.$$p=function(){var r=K.$destructure(arguments);t.push(r),t.length===a&&(H($,t),t=[])},n.$each(),t.length>0&&H($,t),n}),W(l,"$each_with_index",function i(a){var $=i.$$p||o,n,t,r=this;if(i.$$p=null,n=J(arguments),t=n,$===o)return T(r,"enum_for",["each_with_index"].concat(g(t)),function u(){var f=u.$$s==null?this:u.$$s;return f.$enumerator_size()},{$$s:r});var s=0;return r.$each.$$p=function(){var u=K.$destructure(arguments);$(u,s),s++},r.$each.apply(r,t),r},-1),W(l,"$each_with_object",function i(a){var $=i.$$p||o,n=this;return i.$$p=null,$===o?T(n,"enum_for",["each_with_object",a],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:n}):(n.$each.$$p=function(){var t=K.$destructure(arguments);$(t,a)},n.$each(),a)}),W(l,"$entries",function(a){var $,n,t=this;$=J(arguments),n=$;var r=[];return t.$each.$$p=function(){r.push(K.$destructure(arguments))},t.$each.apply(t,n),r},-1),W(l,"$filter_map",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o?T($,"enum_for",["filter_map"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:$}):T(T($,"map",[],a.$to_proc()),"select",[],"itself".$to_proc())}),W(l,"$find_all",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return T($,"enum_for",["find_all"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$});var n=[];return $.$each.$$p=function(){var t=K.$destructure(arguments),r=H(a,t);k(r)&&n.push(t)},$.$each(),n}),W(l,"$find_index",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this,r=o;return i.$$p=null,k(a===void 0&&n===o)?t.$enum_for("find_index"):(a!=null&&n!==o&&t.$warn("warning: given block not used"),r=0,k(a!=null)?T(t,"each",[],function s(u){var f,b;return f=J(arguments),b=f,I(K.$destructure(b),a)&&$.$throw(r,s.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}):T(t,"each",[],function s(u){var f,b;return f=J(arguments),b=f,k(e.yieldX(n,g(b)))&&$.$throw(r,s.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}),o)}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),W(l,"$first",function(a){try{var $=$e("return"),n=this,t=o,r=o;return k(a===void 0)?T(n,"each",[],function s(u){u==null&&(u=o),$.$throw(u,s.$$is_lambda)},{$$ret:$}):(t=[],a=E(a,d("Integer"),"to_int"),k(a<0)&&G.$raise(d("ArgumentError"),"attempt to take negative size"),k(a==0)?[]:(r=0,T(n,"each",[],function s(u){var f,b;if(f=J(arguments),b=f,t.push(K.$destructure(b)),k(a<=++r))$.$throw(t,s.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),t))}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),W(l,"$grep",function i(a){var $=i.$$p||o,n=this,t=o;return i.$$p=null,t=[],T(n,"each",[],function(s){var u,f,b=o;return u=J(arguments),f=u,b=y(f),k(T(a,"__send__",["==="].concat(g(b))))?($!==o?(k(M(f.$length(),1))&&(f=[f]),f=e.yieldX($,g(f))):k(m(f.$length(),1))&&(f=f["$[]"](0)),t.$push(f)):o},-1),t}),W(l,"$grep_v",function i(a){var $=i.$$p||o,n=this,t=o;return i.$$p=null,t=[],T(n,"each",[],function(s){var u,f,b=o;return u=J(arguments),f=u,b=y(f),k(T(a,"__send__",["==="].concat(g(b))))?o:($!==o?(k(M(f.$length(),1))&&(f=[f]),f=e.yieldX($,g(f))):k(m(f.$length(),1))&&(f=f["$[]"](0)),t.$push(f))},-1),t}),W(l,"$group_by",function i(){var a=i.$$p||o,$,n=this,t=o,r=o;return i.$$p=null,a===o?T(n,"enum_for",["group_by"],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:n}):(t=new Map,n.$each.$$p=function(){var s=K.$destructure(arguments),u=H(a,s);(k(r=t["$[]"](u))?r:($=[u,[]],T(t,"[]=",$),$[$.length-1]))["$<<"](s)},n.$each(),t)}),W(l,"$include?",function(a){try{var $=$e("return"),n=this;return T(n,"each",[],function t(r){var s,u;if(s=J(arguments),u=s,I(K.$destructure(u),a))$.$throw(!0,t.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),!1}catch(t){if(t===$)return t.$v;throw t}finally{$.is_orphan=!0}}),W(l,"$inject",function i(a,$){var n=i.$$p||o,t=this;i.$$p=null;var r=a;return n!==o&&$===void 0?t.$each.$$p=function(){var s=K.$destructure(arguments);if(r===void 0){r=s;return}s=x(n,[r,s]),r=s}:($===void 0&&(d("Symbol")["$==="](a)||G.$raise(d("TypeError"),""+a.$inspect()+" is not a Symbol"),$=a,r=void 0),t.$each.$$p=function(){var s=K.$destructure(arguments);if(r===void 0){r=s;return}r=r.$__send__($,s)}),t.$each(),r??o},-1),W(l,"$lazy",function(){var a=this;return T(d(d("Enumerator"),"Lazy"),"new",[a,a.$enumerator_size()],function(n,t){var r,s;return n==null&&(n=o),r=J(arguments,1),s=r,T(n,"yield",g(s))},-2)}),W(l,"$enumerator_size",function(){var a=this;return k(a["$respond_to?"]("size"))?a.$size():o}),W(l,"$max",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a===void 0||a===o){var t,r;return n.$each.$$p=function(){var s=K.$destructure(arguments);if(t===void 0){t=s;return}$!==o?r=x($,[s,t]):r=s["$<=>"](t),r===o&&G.$raise(d("ArgumentError"),"comparison failed"),r>0&&(t=s)},n.$each(),t===void 0?o:t}return a=E(a,d("Integer"),"to_int"),T(n,"sort",[],$.$to_proc()).$reverse().$first(a)},-1),W(l,"$max_by",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),!k($))return T(n,"enum_for",["max_by",a],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:n});if(!k(a["$nil?"]()))return T(n,"sort_by",[],$.$to_proc()).$reverse().$take(a);var t,r;return n.$each.$$p=function(){var s=K.$destructure(arguments),u=H($,s);if(t===void 0){t=s,r=u;return}u["$<=>"](r)>0&&(t=s,r=u)},n.$each(),t===void 0?o:t},-1),W(l,"$min",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),!k(a["$nil?"]()))return $!==o?T(n,"sort",[],function(s,u){return s==null&&(s=o),u==null&&(u=o),e.yieldX($,[s,u])}).$take(a):n.$sort().$take(a);var t;return $!==o?n.$each.$$p=function(){var r=K.$destructure(arguments);if(t===void 0){t=r;return}var s=$(r,t);s===o&&G.$raise(d("ArgumentError"),"comparison failed"),s<0&&(t=r)}:n.$each.$$p=function(){var r=K.$destructure(arguments);if(t===void 0){t=r;return}K.$compare(r,t)<0&&(t=r)},n.$each(),t===void 0?o:t},-1),W(l,"$min_by",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),!k($))return T(n,"enum_for",["min_by",a],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:n});if(!k(a["$nil?"]()))return T(n,"sort_by",[],$.$to_proc()).$take(a);var t,r;return n.$each.$$p=function(){var s=K.$destructure(arguments),u=H($,s);if(t===void 0){t=s,r=u;return}u["$<=>"](r)<0&&(t=s,r=u)},n.$each(),t===void 0?o:t},-1),W(l,"$minmax",function i(){var a=i.$$p||o,$=this,n=o;i.$$p=null,a=k(n=a)?n:T(G,"proc",[],function(f,b){return f==null&&(f=o),b==null&&(b=o),f["$<=>"](b)});var t=o,r=o,s=!0;return $.$each.$$p=function(){var u=K.$destructure(arguments);if(s)t=r=u,s=!1;else{var f=a.$call(t,u);f===o?G.$raise(d("ArgumentError"),"comparison failed"):f>0&&(t=u);var b=a.$call(r,u);b===o?G.$raise(d("ArgumentError"),"comparison failed"):b<0&&(r=u)}},$.$each(),[t,r]}),W(l,"$minmax_by",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,!k(a))return T($,"enum_for",["minmax_by"],function u(){var f=u.$$s==null?this:u.$$s;return f.$enumerator_size()},{$$s:$});var n=o,t=o,r,s;return $.$each.$$p=function(){var u=K.$destructure(arguments),f=H(a,u);(r===void 0||f["$<=>"](r)<0)&&(n=u,r=f),(s===void 0||f["$<=>"](s)>0)&&(t=u,s=f)},$.$each(),[n,t]}),W(l,"$none?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,k(a!==void 0)?T(t,"each",[],function r(s){var u,f,b=o;if(u=J(arguments),f=u,b=y(f),k(T(a,"public_send",["==="].concat(g(b)))))$.$throw(!1,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):n!==o?T(t,"each",[],function r(s){var u,f;if(u=J(arguments),f=u,k(e.yieldX(n,g(f))))$.$throw(!1,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):T(t,"each",[],function r(s){var u,f,b=o;if(u=J(arguments),f=u,b=K.$destructure(f),k(b))$.$throw(!1,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),W(l,"$one?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this,r=o;return i.$$p=null,r=0,k(a!==void 0)?T(t,"each",[],function s(u){var f,b,C=o;if(f=J(arguments),b=f,C=y(b),k(T(a,"public_send",["==="].concat(g(C)))))if(r=j(r,1),k(M(r,1)))$.$throw(!1,s.$$is_lambda);else return o;else return o},{$$arity:-1,$$ret:$}):n!==o?T(t,"each",[],function s(u){var f,b;if(f=J(arguments),b=f,!k(e.yieldX(n,g(b))))return o;if(r=j(r,1),k(M(r,1)))$.$throw(!1,s.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):T(t,"each",[],function s(u){var f,b;if(f=J(arguments),b=f,!k(K.$destructure(b)))return o;if(r=j(r,1),k(M(r,1)))$.$throw(!1,s.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),r["$=="](1)}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),W(l,"$partition",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return T($,"enum_for",["partition"],function r(){var s=r.$$s==null?this:r.$$s;return s.$enumerator_size()},{$$s:$});var n=[],t=[];return $.$each.$$p=function(){var r=K.$destructure(arguments),s=H(a,r);k(s)?n.push(r):t.push(r)},$.$each(),[n,t]}),W(l,"$reject",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return T($,"enum_for",["reject"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$});var n=[];return $.$each.$$p=function(){var t=K.$destructure(arguments),r=H(a,t);k(r)||n.push(t)},$.$each(),n}),W(l,"$reverse_each",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return T($,"enum_for",["reverse_each"],function r(){var s=r.$$s==null?this:r.$$s;return s.$enumerator_size()},{$$s:$});var n=[];$.$each.$$p=function(){n.push(arguments)},$.$each();for(var t=n.length-1;t>=0;t--)x(a,n[t]);return n}),W(l,"$slice_before",function i(a){var $=i.$$p||o,n=this;return i.$$p=null,k(a===void 0&&$===o)&&G.$raise(d("ArgumentError"),"both pattern and block are given"),k(a!==void 0&&$!==o||arguments.length>1)&&G.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),T(d("Enumerator"),"new",[],function t(r){var s=t.$$s==null?this:t.$$s;r==null&&(r=o);var u=[];$!==o?a===void 0?s.$each.$$p=function(){var f=K.$destructure(arguments),b=H($,f);k(b)&&u.length>0&&(r["$<<"](u),u=[]),u.push(f)}:s.$each.$$p=function(){var f=K.$destructure(arguments),b=$(f,a.$dup());k(b)&&u.length>0&&(r["$<<"](u),u=[]),u.push(f)}:s.$each.$$p=function(){var f=K.$destructure(arguments),b=a["$==="](f);k(b)&&u.length>0&&(r["$<<"](u),u=[]),u.push(f)},s.$each(),u.length>0&&r["$<<"](u)},{$$s:n})},-1),W(l,"$slice_after",function i(a){var $=i.$$p||o,n=this;return i.$$p=null,k(a===void 0&&$===o)&&G.$raise(d("ArgumentError"),"both pattern and block are given"),k(a!==void 0&&$!==o||arguments.length>1)&&G.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),k(a!==void 0)&&($=T(G,"proc",[],function(r){return r==null&&(r=o),a["$==="](r)})),T(d("Enumerator"),"new",[],function t(r){var s=t.$$s==null?this:t.$$s;r==null&&(r=o);var u;s.$each.$$p=function(){var f=K.$destructure(arguments),b=H($,f);u==null&&(u=[]),k(b)?(u.push(f),r.$yield(u),u=null):u.push(f)},s.$each(),u!=null&&r.$yield(u)},{$$s:n})},-1),W(l,"$slice_when",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o&&G.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1)"),T(d("Enumerator"),"new",[],function n(t){var r=n.$$s==null?this:n.$$s;t==null&&(t=o);var s=o,u=o;r.$each_cons.$$p=function(){var f=K.$destructure(arguments),b=f[0],C=f[1],L=x(a,[b,C]);u=C,s===o&&(s=[]),k(L)?(s.push(b),t.$yield(s),s=[]):s.push(b)},r.$each_cons(2),s!==o&&(s.push(u),t.$yield(s))},{$$s:$})}),W(l,"$sort",function i(){var a=i.$$p||o,$=this,n=o;return i.$$p=null,n=$.$to_a(),a===o&&(a=A(function(r,s){return r==null&&(r=o),s==null&&(s=o),r["$<=>"](s)})),T(n,"sort",[],a.$to_proc())}),W(l,"$sort_by",function i(){var a=i.$$p||o,$=this,n=o;return i.$$p=null,a===o?T($,"enum_for",["sort_by"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$}):(n=T($,"map",[],function(){var r=o;return r=K.$destructure(arguments),[e.yield1(a,r),r]}),T(n,"sort!",[],function(r,s){return r==null&&(r=o),s==null&&(s=o),r[0]["$<=>"](s[0])}),T(n,"map!",[],function(r){return r==null&&(r=o),r[1]}))}),W(l,"$sum",function i(a){var $=i.$$p||o,n=this,t=o,r=o;return i.$$p=null,a==null&&(a=0),t=a,r=0,T(n,"each",[],function(u){var f,b,C=o,L=o,F=o;return f=J(arguments),b=f,C=$!==o?e.yieldX($,g(b)):K.$destructure(b),D([d(d("Float"),"INFINITY"),d(d("Float"),"INFINITY")["$-@"]()]["$include?"](C))&&k(C["$respond_to?"]("-"))?(L=z(C,r),F=j(t,L),r=z(z(F,t),L),t=F):t=j(t,C)},-1),t},-1),W(l,"$take",function(a){var $=this;return $.$first(a)}),W(l,"$take_while",function i(){try{var a=$e("return"),$=i.$$p||o,n=this,t=o;return i.$$p=null,k($)?(t=[],T(n,"each",[],function r(s){var u,f,b=o;return u=J(arguments),f=u,b=K.$destructure(f),k(e.yield1($,b))||a.$throw(t,r.$$is_lambda),t.push(b)},{$$arity:-1,$$ret:a})):n.$enum_for("take_while")}catch(r){if(r===a)return r.$v;throw r}finally{a.is_orphan=!0}}),W(l,"$uniq",function i(){var a=i.$$p||o,$=this,n=o;return i.$$p=null,n=new Map,T($,"each",[],function(r){var s,u,f,b=o,C=o;return s=J(arguments),u=s,b=K.$destructure(u),C=a!==o?e.yield1(a,b):b,k(n["$key?"](C))?o:(f=[C,b],T(n,"[]=",f),f[f.length-1])},-1),n.$values()}),W(l,"$tally",function(a){var $=this,n=o;return a&&a!==o&&ee(a),n=T(T($,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),k(a)?(T(n,"each",[],function(r,s){var u;return r==null&&(r=o),s==null&&(s=o),u=[r,j(a.$fetch(r,0),s)],T(a,"[]=",u),u[u.length-1]}),a):n},-1),W(l,"$to_h",function i(a){var $=i.$$p||o,n,t,r=this;if(i.$$p=null,n=J(arguments),t=n,$!==o)return T(T(r,"map",[],$.$to_proc()),"to_h",g(t));var s=new Map;return r.$each.$$p=function(){var u=K.$destructure(arguments),f=K["$coerce_to?"](u,d("Array"),"to_ary"),b,C;f.$$is_array||G.$raise(d("TypeError"),"wrong element type "+u.$class()+" (expected array)"),f.length!==2&&G.$raise(d("ArgumentError"),"element has wrong array length (expected 2, was "+f.$length()+")"),b=f[0],C=f[1],e.hash_put(s,b,C)},r.$each.apply(r,t),s},-1),W(l,"$to_set",function i(a,$){var n=i.$$p||o,t,r,s,u=this;return i.$$p=null,t=J(arguments),t.length>0&&(r=t.shift()),r==null&&(r=X("Set")),s=t,T(r,"new",[u].concat(g(s)),n.$to_proc())},-1),W(l,"$zip",function i(a){i.$$p;var $,n,t=this;return i.$$p=null,$=J(arguments),n=$,T(t.$to_a(),"zip",g(n))},-1),S(l,"find","detect"),S(l,"filter","find_all"),S(l,"flat_map","collect_concat"),S(l,"map","collect"),S(l,"member?","include?"),S(l,"reduce","inject"),S(l,"select","find_all"),S(l,"to_a","entries")}("::",w)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(e){var k=e.klass,E=e.truthy,H=e.to_a,x=e.eqeq,ee=e.Kernel,Z=e.def,T=e.rb_gt,J=e.rb_lt,g=e.rb_le,K=e.rb_ge,$e=e.rb_plus,W=e.rb_minus,G=e.eqeqeq,O=e.not,M=e.rb_times,v=e.rb_divide,q=e.alias,I=[],j=e.nil,z=e.$$$;return e.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(P,m,A){var D=k(P,m,"Enumerator"),S=[D].concat(A);return function(w,o,d){var N=k(w,o,"ArithmeticSequence"),h=[N].concat(d),l=e.$r(h),c=N.$$prototype;c.step_arg2=c.receiver_num=c.step_arg1=c.step=c.range=c.topfx=c.bypfx=c.creation_method=c.skipped_arg=j,e.prop(N.$$prototype,"$$is_arithmetic_seq",!0);var X=1/0;return Z(N,"$initialize",function(i,a,$){var n,t=this,r=j;return $==null&&($="step"),t.creation_method=$,E(i["$is_a?"](z("Array")))?(n=[].concat(H(i)),t.step_arg1=n[0]==null?j:n[0],t.step_arg2=n[1]==null?j:n[1],t.topfx=n[2]==null?j:n[2],t.bypfx=n[3]==null?j:n[3],t.receiver_num=a,t.step=1,t.range=E(t.step_arg2)?(t.step=t.step_arg2,e.Range.$new(t.receiver_num,t.step_arg1,!1)):E(t.step_arg1)?e.Range.$new(t.receiver_num,t.step_arg1,!1):e.Range.$new(t.receiver_num,j,!1)):(E(a)||(t.skipped_arg=!0),n=[i,E(r=a)?r:1],t.range=n[0],t.step=n[1]),t.object=t,x(t.step,0)&&ee.$raise(l("ArgumentError"),"step can't be 0"),E(t.step["$respond_to?"]("to_int"))?j:ee.$raise(l("ArgumentError"),"no implicit conversion of "+t.step.$class()+" into Integer")},-2),N.$attr_reader("step"),Z(N,"$begin",function(){var i=this;return i.range.$begin()}),Z(N,"$end",function(){var i=this;return i.range.$end()}),Z(N,"$exclude_end?",function(){var i=this;return i.range["$exclude_end?"]()}),Z(N,"$_lesser_than_end?",function(i){var a=this,$=j,n=j;return $=E(n=a.$end())?n:X,E(T(a.$step(),0))?E(a["$exclude_end?"]())?J(i,$):g(i,$):E(a["$exclude_end?"]())?T(i,$):K(i,$)}),Z(N,"$_greater_than_begin?",function(i){var a=this,$=j,n=j;return $=E(n=a.$begin())?n:X["$-@"](),E(T(a.$step(),0))?T(i,$):J(i,$)}),Z(N,"$first",function(i){var a=this,$=j,n=j,t=j;if($=E(n=a.$begin())?n:X["$-@"](),!E(i))return E(a["$_lesser_than_end?"]($))?$:j;for(t=[];E(E(n=a["$_lesser_than_end?"]($))?T(i,0):n);)t["$<<"]($),$=$e($,a.$step()),i=W(i,1);return t},-1),Z(N,"$each",function y(){var i=y.$$p||j,a=this,$=j,n=j;if(y.$$p=null,i===j)return a;for(G(j,$=a.$begin())&&ee.$raise(l("TypeError"),"nil can't be coerced into Integer"),n=E($=a.$begin())?$:X["$-@"]();E(a["$_lesser_than_end?"](n));)e.yield1(i,n),n=$e(n,a.$step());return a}),Z(N,"$last",function(i){var a=this,$=j,n=j,t=j;if(G(X,$=a.$end())||G(X["$-@"](),$)?ee.$raise(z("FloatDomainError"),a.$end()):G(j,$)&&ee.$raise(z("RangeError"),"cannot get the last element of endless arithmetic sequence"),n=W(a.$end(),W(a.$end(),a.$begin())["$%"](a.$step())),E(a["$_lesser_than_end?"](n))||(n=W(n,a.$step())),!E(i))return E(a["$_greater_than_begin?"](n))?n:j;for(t=[];E(E($=a["$_greater_than_begin?"](n))?T(i,0):$);)t["$<<"](n),n=W(n,a.$step()),i=W(i,1);return t.$reverse()},-1),Z(N,"$size",function(){var i=this,a=j,$=j;return a=E(T(i.$step(),0))?1:-1,O(i["$_lesser_than_end?"](i.$begin()))?0:E([X["$-@"](),X]["$include?"](i.$step()))?1:E([M(X["$-@"](),a),j]["$include?"](i.$begin()))||E([M(X,a),j]["$include?"](i.$end()))?X:($=W(i.$end(),W(i.$end(),i.$begin())["$%"](i.$step())),E(i["$_lesser_than_end?"]($))||($=W($,i.$step())),$e(v(W($,i.$begin()),i.$step()).$abs().$to_i(),1))}),Z(N,"$==",function(i){var a=this,$=j,n=j,t=j,r=j;return E($=E(n=E(t=E(r=a.$class()["$=="](i.$class()))?a.$begin()["$=="](i.$begin()):r)?a.$end()["$=="](i.$end()):t)?a.$step()["$=="](i.$step()):n)?a["$exclude_end?"]()["$=="](i["$exclude_end?"]()):$}),Z(N,"$hash",function(){var i=this;return[l("ArithmeticSequence"),i.$begin(),i.$end(),i.$step(),i["$exclude_end?"]()].$hash()}),Z(N,"$inspect",function(){var i=this,a=j;return E(i.receiver_num)?(a=E(i.step_arg2)?"("+i.topfx+i.step_arg1.$inspect()+", "+i.bypfx+i.step_arg2.$inspect()+")":E(i.step_arg1)?"("+i.topfx+i.step_arg1.$inspect()+")":j,"("+i.receiver_num.$inspect()+"."+i.creation_method+a+")"):(a=E(i.skipped_arg)?j:"("+i.step+")","(("+i.range.$inspect()+")."+i.creation_method+a+")")}),q(N,"===","=="),q(N,"eql?","==")}(D,D,S)}("::",null,I)};Opal.modules["corelib/enumerator/chain"]=function(e){var k=e.deny_frozen_access,E=e.klass,H=e.slice,x=e.def,ee=e.send,Z=e.to_a,T=e.truthy,J=e.rb_plus,g=e.thrower,K=e.nil,$e=e.$$$;return e.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(W,G){var O=E(W,G,"Enumerator");return function(M,v){var q=E(M,v,"Chain"),I=q.$$prototype;return I.enums=I.iterated=K,x(q,"$initialize",function(z){var P,m,A=this;return P=H(arguments),m=P,k(A),A.enums=m,A.iterated=[],A.object=A},-1),x(q,"$each",function j(z){var P=j.$$p||K,m,A,D=this;return j.$$p=null,m=H(arguments),A=m,P===K?ee(D,"to_enum",["each"].concat(Z(A)),function S(){var w=S.$$s==null?this:S.$$s;return w.$size()},{$$s:D}):(ee(D.enums,"each",[],function S(w){var o=S.$$s==null?this:S.$$s;return o.iterated==null&&(o.iterated=K),w==null&&(w=K),o.iterated["$<<"](w),ee(w,"each",Z(A),P.$to_proc())},{$$s:D}),D)},-1),x(q,"$size",function(z){try{var P=g("return"),m,A,D=this,S=K;return m=H(arguments),A=m,S=0,ee(D.enums,"each",[],function w(o){var d=K;return o==null&&(o=K),d=ee(o,"size",Z(A)),T([K,$e($e("Float"),"INFINITY")]["$include?"](d))&&P.$throw(d,w.$$is_lambda),S=J(S,d)},{$$ret:P}),S}catch(w){if(w===P)return w.$v;throw w}finally{P.is_orphan=!0}},-1),x(q,"$rewind",function(){var z=this;return ee(z.iterated,"reverse_each",[],function(m){return m==null&&(m=K),T(m["$respond_to?"]("rewind"))?m.$rewind():K}),z.iterated=[],z}),x(q,"$inspect",function(){var z=this;return"#<Enumerator::Chain: "+z.enums.$inspect()+">"})}(O,O)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(e){var k=e.deny_frozen_access,E=e.klass,H=e.truthy,x=e.Kernel,ee=e.def,Z=e.slice,T=e.send,J=[],g=e.nil,K=e.$$$;return e.add_stubs("include,raise,new,to_proc"),function($e,W,G){var O=E($e,W,"Enumerator"),M=[O].concat(G);return function(v,q,I){var j=E(v,q,"Generator"),z=[j].concat(I),P=e.$r(z),m=j.$$prototype;return m.block=g,j.$include(K("Enumerable")),ee(j,"$initialize",function A(){var D=A.$$p||g,S=this;return A.$$p=null,k(S),H(D)||x.$raise(K("LocalJumpError"),"no block given"),S.block=D}),ee(j,"$each",function A(D){var S=A.$$p||g,w,o,d=this,N=g;A.$$p=null,w=Z(arguments),o=w,N=T(P("Yielder"),"new",[],S.$to_proc());try{o.unshift(N),e.yieldX(d.block,o)}catch(h){if(h&&h.$thrower_type=="breaker")return h.$v;throw h}return d},-1)}(M[0],null,M)}(J[0],null,J)};Opal.modules["corelib/enumerator/lazy"]=function(e){var k=e.truthy,E=e.coerce_to,H=e.yield1,x=e.yieldX,ee=e.deny_frozen_access,Z=e.klass,T=e.slice,J=e.send2,g=e.find_super,K=e.to_a,$e=e.defs,W=e.Kernel,G=e.send,O=e.def,M=e.return_self,v=e.Opal,q=e.rb_lt,I=e.eqeqeq,j=e.rb_plus,z=e.alias,P=[],m=e.nil,A=e.$$$;return e.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(D,S,w){var o=Z(D,S,"Enumerator"),d=[o].concat(w);return function(N,h,l){var c=Z(N,h,"Lazy"),X=[c].concat(l),y=e.$r(X),i=c.$$prototype;return i.enumerator=m,Z(c,A("Exception"),"StopLazyError"),$e(c,"$for",function a($,n){var t,r,s=a.$$p||m,u=this,f=m;return a.$$p=null,t=T(arguments,1),r=t,f=J(u,g(u,"for",a,!1,!0),"for",[$].concat(K(r)),s),f.enumerator=$,f},-2),O(c,"$initialize",function a($,n){var t=a.$$p||m,r=this;return a.$$p=null,n==null&&(n=m),ee(r),t===m&&W.$raise(A("ArgumentError"),"tried to call lazy new without a block"),r.enumerator=$,J(r,g(r,"initialize",a,!1,!0),"initialize",[n],function(u,f){var b,C;u==null&&(u=m),b=T(arguments,1),C=b;try{return G($,"each",K(C),function(F){var V,re;V=T(arguments),re=V,re.unshift(u),x(t,re)},-1)}catch(L){if(e.rescue(L,[y("StopLazyError")]))try{return m}finally{e.pop_exception(L)}else throw L}},-2)},-2),O(c,"$lazy",M),O(c,"$collect",function a(){var $=a.$$p||m,n=this;return a.$$p=null,k($)||W.$raise(A("ArgumentError"),"tried to call lazy map without a block"),G(y("Lazy"),"new",[n,n.$enumerator_size()],function(r,s){var u,f;r==null&&(r=m),u=T(arguments,1),f=u;var b=x($,f);r.$yield(b)},-2)}),O(c,"$collect_concat",function a(){var $=a.$$p||m,n=this;return a.$$p=null,k($)||W.$raise(A("ArgumentError"),"tried to call lazy map without a block"),G(y("Lazy"),"new",[n,m],function(r,s){var u,f;r==null&&(r=m),u=T(arguments,1),f=u;var b=x($,f);if(b["$respond_to?"]("force")&&b["$respond_to?"]("each"))G(b,"each",[],function(F){return F==null&&(F=m),r.$yield(F)});else{var C=v.$try_convert(b,A("Array"),"to_ary");C===m?r.$yield(b):G(b,"each",[],function(F){return F==null&&(F=m),r.$yield(F)})}},-2)}),O(c,"$drop",function($){var n=this,t=m,r=m,s=m;return $=E($,A("Integer"),"to_int"),k(q($,0))&&W.$raise(A("ArgumentError"),"attempt to drop negative size"),t=n.$enumerator_size(),r=I(A("Integer"),t)&&k(q($,t))?$:t,s=0,G(y("Lazy"),"new",[n,r],function(f,b){var C,L;return f==null&&(f=m),C=T(arguments,1),L=C,k(q(s,$))?s=j(s,1):G(f,"yield",K(L))},-2)}),O(c,"$drop_while",function a(){var $=a.$$p||m,n=this,t=m;return a.$$p=null,k($)||W.$raise(A("ArgumentError"),"tried to call lazy drop_while without a block"),t=!0,G(y("Lazy"),"new",[n,m],function(s,u){var f,b;if(s==null&&(s=m),f=T(arguments,1),b=f,k(t)){var C=x($,b);k(C)||(t=!1,G(s,"yield",K(b)))}else return G(s,"yield",K(b))},-2)}),O(c,"$enum_for",function a($,n){var t=a.$$p||m,r,s,u,f=this;return a.$$p=null,r=T(arguments),r.length>0&&(s=r.shift()),s==null&&(s="each"),u=r,G(f.$class(),"for",[f,s].concat(K(u)),t.$to_proc())},-1),O(c,"$find_all",function a(){var $=a.$$p||m,n=this;return a.$$p=null,k($)||W.$raise(A("ArgumentError"),"tried to call lazy select without a block"),G(y("Lazy"),"new",[n,m],function(r,s){var u,f;r==null&&(r=m),u=T(arguments,1),f=u;var b=x($,f);k(b)&&G(r,"yield",K(f))},-2)}),O(c,"$grep",function a($){var n=a.$$p||m,t=this;return a.$$p=null,k(n)?G(y("Lazy"),"new",[t,m],function(s,u){var f,b;s==null&&(s=m),f=T(arguments,1),b=f;var C=v.$destructure(b),L=$["$==="](C);k(L)&&(L=H(n,C),s.$yield(H(n,C)))},-2):G(y("Lazy"),"new",[t,m],function(s,u){var f,b;s==null&&(s=m),f=T(arguments,1),b=f;var C=v.$destructure(b),L=$["$==="](C);k(L)&&s.$yield(C)},-2)}),O(c,"$reject",function a(){var $=a.$$p||m,n=this;return a.$$p=null,k($)||W.$raise(A("ArgumentError"),"tried to call lazy reject without a block"),G(y("Lazy"),"new",[n,m],function(r,s){var u,f;r==null&&(r=m),u=T(arguments,1),f=u;var b=x($,f);k(b)||G(r,"yield",K(f))},-2)}),O(c,"$take",function($){var n=this,t=m,r=m,s=m;return $=E($,A("Integer"),"to_int"),k(q($,0))&&W.$raise(A("ArgumentError"),"attempt to take negative size"),t=n.$enumerator_size(),r=I(A("Integer"),t)&&k(q($,t))?$:t,s=0,G(y("Lazy"),"new",[n,r],function(f,b){var C,L;return f==null&&(f=m),C=T(arguments,1),L=C,k(q(s,$))?(G(f,"yield",K(L)),s=j(s,1)):W.$raise(y("StopLazyError"))},-2)}),O(c,"$take_while",function a(){var $=a.$$p||m,n=this;return a.$$p=null,k($)||W.$raise(A("ArgumentError"),"tried to call lazy take_while without a block"),G(y("Lazy"),"new",[n,m],function(r,s){var u,f;r==null&&(r=m),u=T(arguments,1),f=u;var b=x($,f);k(b)?G(r,"yield",K(f)):W.$raise(y("StopLazyError"))},-2)}),O(c,"$inspect",function(){var $=this;return"#<"+$.$class()+": "+$.enumerator.$inspect()+">"}),z(c,"force","to_a"),z(c,"filter","find_all"),z(c,"flat_map","collect_concat"),z(c,"map","collect"),z(c,"select","find_all"),z(c,"to_enum","enum_for")}(o,o,d)}("::",null,P)};Opal.modules["corelib/enumerator/yielder"]=function(e){var k=e.klass,E=e.def,H=e.slice,x=e.send,ee=e.to_a,Z=[],T=e.nil;return e.add_stubs("yield,proc"),function(J,g,K){var $e=k(J,g,"Enumerator"),W=[$e].concat(K);return function(G,O){var M=k(G,O,"Yielder"),v=M.$$prototype;return v.block=T,E(M,"$initialize",function q(){var I=q.$$p||T,j=this;return q.$$p=null,j.block=I,j}),E(M,"$yield",function(I){var j,z,P=this;j=H(arguments),z=j;var m=e.yieldX(P.block,z);if(m&&m.$thrower_type=="break")throw m;return m},-1),E(M,"$<<",function(I){var j=this;return j.$yield(I),j}),E(M,"$to_proc",function(){var I=this;return x(I,"proc",[],function j(z){var P,m,A=j.$$s==null?this:j.$$s;return P=H(arguments),m=P,x(A,"yield",ee(m))},{$$arity:-1,$$s:I})})}(W[0],null)}(Z[0],null,Z)};Opal.modules["corelib/enumerator"]=function(e){var k=e.slice,E=e.coerce_to,H=e.deny_frozen_access,x=e.klass,ee=e.defs,Z=e.truthy,T=e.send,J=e.not,g=e.def,K=e.rb_plus,$e=e.to_a,W=e.Opal,G=e.send2,O=e.find_super,M=e.rb_ge,v=e.Kernel,q=e.rb_le,I=e.alias,j=e.top,z=[],P=e.nil,m=e.$$$;return e.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),j.$require("corelib/enumerable"),function(A,D,S){var w=x(A,D,"Enumerator"),o=[w].concat(S),d=e.$r(o),N=w.$$prototype;return N.size=N.args=N.object=N.method=N.values=N.cursor=P,w.$include(m("Enumerable")),w.$$prototype.$$is_enumerator=!0,ee(w,"$for",function h(l,c,X){var y=h.$$p||P,i,a,$,n=this;h.$$p=null,i=k(arguments,1),i.length>0&&(a=i.shift()),a==null&&(a="each"),$=i;var t=n.$allocate();return t.object=l,t.size=y,t.method=a,t.args=$,t.cursor=0,t},-2),g(w,"$initialize",function h(l){var c=h.$$p||P,X=this;return h.$$p=null,k(arguments),H(X),X.cursor=0,Z(c)?(X.object=T(d("Generator"),"new",[],c.$to_proc()),X.method="each",X.args=[],X.size=arguments[0]||P,Z(X.size)&&J(X.size["$respond_to?"]("call"))?X.size=E(X.size,m("Integer"),"to_int"):P):(X.object=arguments[0],X.method=arguments[1]||"each",X.args=k(arguments,2),X.size=P)},-1),g(w,"$each",function h(l){var c=h.$$p||P,X,y,i=this;return h.$$p=null,X=k(arguments),y=X,Z(c["$nil?"]())&&Z(y["$empty?"]())?i:(y=K(i.args,y),Z(c["$nil?"]())?T(i.$class(),"new",[i.object,i.method].concat($e(y))):T(i.object,"__send__",[i.method].concat($e(y)),c.$to_proc()))},-1),g(w,"$size",function(){var l=this;return Z(l.size["$respond_to?"]("call"))?T(l.size,"call",$e(l.args)):l.size}),g(w,"$with_index",function h(l){var c=h.$$p||P,X=this;if(h.$$p=null,l==null&&(l=0),l=Z(l)?E(l,m("Integer"),"to_int"):0,!Z(c))return T(X,"enum_for",["with_index",l],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:X});var y=l;return X.$each.$$p=function(){var i=W.$destructure(arguments),a=c(i,y);return y++,a},X.$each()},-1),g(w,"$each_with_index",function h(){var l=h.$$p||P,c=this;return h.$$p=null,l===P?T(c,"enum_for",["each_with_index"],function X(){var y=X.$$s==null?this:X.$$s;return y.$size()},{$$s:c}):(G(c,O(c,"each_with_index",h,!1,!0),"each_with_index",[],l),c.object)}),g(w,"$rewind",function(){var l=this;return l.cursor=0,l}),g(w,"$peek_values",function(){var l=this,c=P;return l.values=Z(c=l.values)?c:T(l,"map",[],function(y){var i,a;return i=k(arguments),a=i,a},-1),Z(M(l.cursor,l.values.$length()))&&v.$raise(m("StopIteration"),"iteration reached an end"),l.values["$[]"](l.cursor)}),g(w,"$peek",function(){var l=this,c=P;return c=l.$peek_values(),Z(q(c.$length(),1))?c["$[]"](0):c}),g(w,"$next_values",function(){var l=this,c=P;return c=l.$peek_values(),l.cursor=K(l.cursor,1),c}),g(w,"$next",function(){var l=this,c=P;return c=l.$next_values(),Z(q(c.$length(),1))?c["$[]"](0):c}),g(w,"$feed",function(l){var c=this;return c.$raise(d("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),g(w,"$+",function(l){var c=this;return m(m("Enumerator"),"Chain").$new(c,l)}),g(w,"$inspect",function(){var l=this,c=P;return c="#<"+l.$class()+": "+l.object.$inspect()+":"+l.method,Z(l.args["$any?"]())&&(c=K(c,"("+l.args.$inspect()["$[]"](m("Range").$new(1,-2))+")")),K(c,">")}),I(w,"with_object","each_with_object"),w.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),w.$autoload("Chain","corelib/enumerator/chain"),w.$autoload("Generator","corelib/enumerator/generator"),w.$autoload("Lazy","corelib/enumerator/lazy"),w.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,z)};Opal.modules["corelib/numeric"]=function(e){var k=e.klass,E=e.truthy,H=e.Kernel,x=e.def,ee=e.to_ary,Z=e.return_self,T=e.rb_minus,J=e.rb_times,g=e.rb_lt,K=e.eqeq,$e=e.rb_divide,W=e.return_val,G=e.Opal,O=e.slice,M=e.extract_kwargs,v=e.ensure_kwargs,q=e.hash_get,I=e.not,j=e.send,z=e.rb_ge,P=e.rb_le,m=e.rb_plus,A=e.rb_gt,D=e.alias,S=e.top,w=e.nil,o=e.$$$;return e.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),S.$require("corelib/comparable"),function(d,N){var h=k(d,N,"Numeric");return h.$include(o("Comparable")),x(h,"$coerce",function(c){var X=this;return E(c["$instance_of?"](X.$class()))?[c,X]:[H.$Float(c),H.$Float(X)]}),x(h,"$__coerced__",function(c,X){var y,i,a=this,$=w,n=w;if(E(X["$respond_to?"]("coerce")))return i=X.$coerce(a),y=ee(i),$=y[0]==null?w:y[0],n=y[1]==null?w:y[1],$.$__send__(c,n);switch(c.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return H.$raise(o("TypeError"),""+X.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return H.$raise(o("ArgumentError"),"comparison of "+a.$class()+" with "+X.$class()+" failed");default:return w}}),x(h,"$<=>",function(c){var X=this;return E(X["$equal?"](c))?0:w}),x(h,"$+@",Z),x(h,"$-@",function(){var c=this;return T(0,c)}),x(h,"$%",function(c){var X=this;return T(X,J(c,X.$div(c)))}),x(h,"$abs",function(){var c=this;return E(g(c,0))?c["$-@"]():c}),x(h,"$abs2",function(){var c=this;return J(c,c)}),x(h,"$angle",function(){var c=this;return E(g(c,0))?o(o("Math"),"PI"):0}),x(h,"$ceil",function(c){var X=this;return c==null&&(c=0),X.$to_f().$ceil(c)},-1),x(h,"$conj",Z),x(h,"$denominator",function(){var c=this;return c.$to_r().$denominator()}),x(h,"$div",function(c){var X=this;return K(c,0)&&H.$raise(o("ZeroDivisionError"),"divided by o"),$e(X,c).$floor()}),x(h,"$divmod",function(c){var X=this;return[X.$div(c),X["$%"](c)]}),x(h,"$fdiv",function(c){var X=this;return $e(X.$to_f(),c)}),x(h,"$floor",function(c){var X=this;return c==null&&(c=0),X.$to_f().$floor(c)},-1),x(h,"$i",function(){var c=this;return H.$Complex(0,c)}),x(h,"$imag",W(0)),x(h,"$integer?",W(!1)),x(h,"$nonzero?",function(){var c=this;return E(c["$zero?"]())?w:c}),x(h,"$numerator",function(){var c=this;return c.$to_r().$numerator()}),x(h,"$polar",function(){var c=this;return[c.$abs(),c.$arg()]}),x(h,"$quo",function(c){var X=this;return $e(G["$coerce_to!"](X,o("Rational"),"to_r"),c)}),x(h,"$real",Z),x(h,"$real?",W(!0)),x(h,"$rect",function(){var c=this;return[c,0]}),x(h,"$round",function(c){var X=this;return X.$to_f().$round(c)},-1),x(h,"$step",function l(c,X,y){var i=l.$$p||w,a,$,n,t,r,s,u=this,f=w;l.$$p=null,a=O(arguments),$=M(a),$=v($),a.length>0&&(n=a.shift()),a.length>0&&(t=a.shift()),r=q($,"to"),s=q($,"by"),n!==void 0&&r!==void 0&&H.$raise(o("ArgumentError"),"to is given twice"),t!==void 0&&s!==void 0&&H.$raise(o("ArgumentError"),"step is given twice"),r!==void 0&&(n=r),s!==void 0&&(t=s),n===void 0&&(n=w);function b(){t===w&&H.$raise(o("TypeError"),"step must be numeric"),t!=null&&t["$=="](0)&&H.$raise(o("ArgumentError"),"step can't be 0"),(t===w||t==null)&&(t=1);var ge=t["$<=>"](0);ge===w&&H.$raise(o("ArgumentError"),"0 can't be coerced into "+t.$class()),(n===w||n==null)&&(n=ge>0?o(o("Float"),"INFINITY"):o(o("Float"),"INFINITY")["$-@"]()),G.$compare(u,n)}function C(){if(t>0&&u>n||t<0&&u<n)return 0;if(t===1/0||t===-1/0)return 1;var ge=Math.abs,ve=Math.floor,me=(ge(u)+ge(n)+ge(n-u))/ge(t)*o(o("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((n-u)/t+me)+1)}function L(){if(b(),t===0)return 1/0;if(t%1!==0)return C();if(t>0&&u>n||t<0&&u<n)return 0;var ge=Math.ceil,ve=Math.abs,me=ve(u-n)+1,be=ve(t);return ge(me/be)}if(i===w)return(I(n)||E(n["$is_a?"](o("Numeric"))))&&(I(t)||E(t["$is_a?"](o("Numeric"))))?o(o("Enumerator"),"ArithmeticSequence").$new([n,t,E(r)?"to: ":w,E(s)?"by: ":w],u):j(u,"enum_for",["step",n,t],L.$to_proc());b();var F=t["$negative?"](),V=t["$=="](0)||n===1/0&&!F||n===-1/0&&F;if(u.$$is_number&&t.$$is_number&&n.$$is_number)if(u%1===0&&(V||n%1===0)&&t%1===0){var re=u;if(V)for(;;re+=t)i(re);else if(F)for(;re>=n;re+=t)i(re);else for(;re<=n;re+=t)i(re);return u}else{var ae=u.$to_f().valueOf();t=t.$to_f().valueOf(),n=n.$to_f().valueOf();var le=C();if(!isFinite(t))le!==0&&i(ae);else if(t===0)for(;;)i(ae);else for(var _e=0;_e<le;_e++){var de=_e*t+u;(t>=0?n<de:n>de)&&(de=n),i(de)}return u}for(f=u;E(F?z(f,n):P(f,n));)e.yield1(i,f),f=m(f,t)},-1),x(h,"$to_c",function(){var c=this;return H.$Complex(c,0)}),x(h,"$to_int",function(){var c=this;return c.$to_i()}),x(h,"$truncate",function(c){var X=this;return c==null&&(c=0),X.$to_f().$truncate(c)},-1),x(h,"$zero?",function(){var c=this;return c["$=="](0)}),x(h,"$positive?",function(){var c=this;return A(c,0)}),x(h,"$negative?",function(){var c=this;return g(c,0)}),x(h,"$dup",Z),x(h,"$clone",function(c){var X=this;return c=v(c),q(c,"freeze"),X},-1),x(h,"$finite?",W(!0)),x(h,"$infinite?",W(w)),D(h,"arg","angle"),D(h,"conjugate","conj"),D(h,"imaginary","imag"),D(h,"magnitude","abs"),D(h,"modulo","%"),D(h,"phase","arg"),D(h,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(e){var k=e.truthy,E=e.falsy,H=e.yield1,x=e.hash_get,ee=e.hash_put,Z=e.hash_delete,T=e.coerce_to,J=e.respond_to,g=e.deny_frozen_access,K=e.freeze,$e=e.opal32_init,W=e.opal32_add,G=e.klass,O=e.slice,M=e.defs,v=e.Kernel,q=e.def,I=e.Opal,j=e.eqeqeq,z=e.send2,P=e.find_super,m=e.send,A=e.rb_gt,D=e.rb_times,S=e.eqeq,w=e.rb_minus,o=e.to_a,d=e.to_ary,N=e.gvars,h=e.rb_ge,l=e.assign_ivar,c=e.rb_lt,X=e.return_self,y=e.neqeq,i=e.alias,a=e.top,$=[],n=e.nil,t=e.$$$;return e.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),a.$require("corelib/enumerable"),a.$require("corelib/numeric"),function(r,s,u){var f=G(r,s,"Array"),b=[f].concat(u),C=e.$r(b);f.$include(t("Enumerable")),e.prop(f.$$prototype,"$$is_array",!0);function L(ie){for(var R=ie[0],B=1,Y=ie.length;B<Y;B++)ie[B-1]=ie[B];return ie.pop(),R}function F(ie,R){return R.$$name===e.Array?ie:R.$allocate().$replace(ie.$to_a())}function V(ie,R,B){for(var Y,Q=null,ne=new Array(ie.length),se=0,oe=0;se<ie.length;se++){if(!Q)try{Y=H(B,ie[se])}catch(fe){Q=fe}(Q||R(Y))&&(ne[oe]=ie[se],oe+=1)}if(oe!==se&&(ie.splice.apply(ie,[0,ne.length].concat(ne)),ie.splice(oe,ne.length)),Q)throw Q}function re(ie){return ie.$$is_array||(ie=T(ie,t("Array"),"to_ary")),ie.$to_a()}function ae(ie,R){var B=R.length;if(B>6&&B<32767)ie.push.apply(ie,R);else for(var Y=0;Y<B;Y++)ie.push(R[Y])}M(f,"$[]",function(R){var B,Y,Q=this;return B=O(arguments),Y=B,F(Y,Q)},-1),q(f,"$initialize",function ie(R,B){var Y=ie.$$p||n,Q=this;if(ie.$$p=null,R==null&&(R=n),B==null&&(B=n),g(Q),B!==n&&Y!==n&&v.$warn("warning: block supersedes default value argument"),R>t(t("Integer"),"MAX")&&v.$raise(t("ArgumentError"),"array size too big"),arguments.length>2&&v.$raise(t("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return Q.length>0&&Q.splice(0,Q.length),Q;if(arguments.length===1){if(R.$$is_array)return Q.$replace(R.$to_a()),Q;if(R["$respond_to?"]("to_ary"))return Q.$replace(R.$to_ary()),Q}R=T(R,t("Integer"),"to_int"),R<0&&v.$raise(t("ArgumentError"),"negative array size"),Q.splice(0,Q.length);var ne,se;if(Y===n)for(ne=0;ne<R;ne++)Q.push(B);else for(ne=0,se;ne<R;ne++)se=Y(ne),Q[ne]=se;return Q},-1),M(f,"$try_convert",function(R){return I["$coerce_to?"](R,t("Array"),"to_ary")}),q(f,"$&",function(R){var B=this;if(R=re(R),B.length===0||R.length===0)return[];var Y=[],Q=new Map,ne,se,oe;for(ne=0,se=R.length;ne<se;ne++)ee(Q,R[ne],!0);for(ne=0,se=B.length;ne<se;ne++)oe=B[ne],Z(Q,oe)!==void 0&&Y.push(oe);return Y}),q(f,"$|",function(R){var B=this;R=re(R);var Y=new Map,Q,ne;for(Q=0,ne=B.length;Q<ne;Q++)ee(Y,B[Q],!0);for(Q=0,ne=R.length;Q<ne;Q++)ee(Y,R[Q],!0);return Y.$keys()}),q(f,"$*",function(R){var B=this;if(k(R["$respond_to?"]("to_str")))return B.$join(R.$to_str());R=T(R,t("Integer"),"to_int"),k(R<0)&&v.$raise(t("ArgumentError"),"negative argument");for(var Y=[],Q=B.$to_a(),ne=0;ne<R;ne++)Y=Y.concat(Q);return Y}),q(f,"$+",function(R){var B=this;return R=re(R),B.concat(R)}),q(f,"$-",function(R){var B=this;if(R=re(R),k(B.length===0))return[];if(k(R.length===0))return B.slice();var Y=[],Q=new Map,ne,se,oe;for(ne=0,se=R.length;ne<se;ne++)ee(Q,R[ne],!0);for(ne=0,se=B.length;ne<se;ne++)oe=B[ne],x(Q,oe)===void 0&&Y.push(oe);return Y}),q(f,"$<<",function(R){var B=this;return g(B),B.push(R),B}),q(f,"$<=>",function(R){var B=this;if(j(t("Array"),R))R=R.$to_a();else if(k(R["$respond_to?"]("to_ary")))R=R.$to_ary().$to_a();else return n;if(B===R)return 0;for(var Y=Math.min(B.length,R.length),Q=0;Q<Y;Q++){var ne=B[Q]["$<=>"](R[Q]);if(ne!==0)return ne}return B.length["$<=>"](R.length)}),q(f,"$==",function(R){var B=this,Y={};function Q(ne,se){var oe,fe,_,p;if(ne===se)return!0;if(!se.$$is_array)return J(se,"$to_ary")?se["$=="](ne):!1;if(ne.$$constructor!==Array&&(ne=ne.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),ne.length!==se.length)return!1;for(Y[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(_=ne[oe],p=se[oe],_.$$is_array){if(p.$$is_array&&p.length!==_.length||!Y.hasOwnProperty(_.$object_id())&&!Q(_,p))return!1}else if(!_["$=="](p))return!1;return!0}return Q(B,R)});function le(ie,R){var B=ie.length,Y,Q,ne,se;return Y=R.excl,Q=R.begin===n?0:T(R.begin,e.Integer,"to_int"),ne=R.end===n?-1:T(R.end,e.Integer,"to_int"),Q<0&&(Q+=B,Q<0)||(R.excl_rev&&R.begin!==n&&(Q+=1),Q>B)?n:ne<0&&(ne+=B,ne<0)?[]:((!Y||R.end===n)&&(ne+=1),se=ie.slice(Q,ne),se)}function _e(ie,R){var B,Y=[],Q=0,ne;for(R.step<0?(ne={begin:R.range.end,end:R.range.begin,excl:!1,excl_rev:R.range.excl},B=le(ie,ne).$reverse()):B=le(ie,R.range);Q<B.length;)Y.push(B[Q]),Q+=Math.abs(R.step);return Y}function de(ie,R,B){var Y=ie.length,Q;return R=T(R,e.Integer,"to_int"),R<0&&(R+=Y,R<0)?n:B===void 0?R>=Y||R<0?n:ie[R]:(B=T(B,e.Integer,"to_int"),B<0||R>Y||R<0?n:(Q=ie.slice(R,R+B),Q))}q(f,"$[]",function(R,B){var Y=this;return R.$$is_range?le(Y,R):R.$$is_arithmetic_seq?_e(Y,R):de(Y,R,B)},-2),q(f,"$[]=",function(R,B,Y){var Q=this,ne=n,se=n;g(Q),ne=n;var oe,fe=Q.length;if(R.$$is_range){B.$$is_array?ne=B.$to_a():B["$respond_to?"]("to_ary")?ne=B.$to_ary().$to_a():ne=[B];var _=R.excl,p=R.begin===n?0:T(R.begin,e.Integer,"to_int"),U=R.end===n?-1:T(R.end,e.Integer,"to_int");if(p<0&&(p+=fe,p<0&&v.$raise(t("RangeError"),""+R.$inspect()+" out of range")),U<0&&(U+=fe),(!_||R.end===n)&&(U+=1),p>fe)for(oe=fe;oe<p;oe++)Q[oe]=n;return U<0?Q.splice.apply(Q,[p,0].concat(ne)):Q.splice.apply(Q,[p,U-p].concat(ne)),B}else{Y===void 0?se=1:(se=B,B=Y,B.$$is_array?ne=B.$to_a():B["$respond_to?"]("to_ary")?ne=B.$to_ary().$to_a():ne=[B]);var te;if(R=T(R,t("Integer"),"to_int"),se=T(se,t("Integer"),"to_int"),R<0&&(te=R,R+=fe,R<0&&v.$raise(t("IndexError"),"index "+te+" too small for array; minimum "+-Q.length)),se<0&&v.$raise(t("IndexError"),"negative length ("+se+")"),R>fe)for(oe=fe;oe<R;oe++)Q[oe]=n;return Y===void 0?Q[R]=B:Q.splice.apply(Q,[R,se].concat(ne)),B}},-3),q(f,"$any?",function ie(R){var B=ie.$$p||n,Y=this;return ie.$$p=null,Y.length===0?!1:z(Y,P(Y,"any?",ie,!1,!0),"any?",[R],B)},-1),q(f,"$assoc",function(R){for(var B=this,Y=0,Q=B.length,ne;Y<Q;Y++)if(ne=B[Y],ne.length&&ne[0]["$=="](R))return ne;return n}),q(f,"$at",function(R){var B=this;return R=T(R,t("Integer"),"to_int"),R<0&&(R+=B.length),R<0||R>=B.length?n:B[R]}),q(f,"$bsearch_index",function ie(){var R=ie.$$p||n,B=this;if(ie.$$p=null,R===n)return B.$enum_for("bsearch_index");for(var Y=0,Q=B.length,ne,se,oe,fe=!1,_=n;Y<Q;){if(ne=Y+Math.floor((Q-Y)/2),se=B[ne],oe=H(R,se),oe===!0)_=ne,fe=!0;else if(oe===!1||oe===n)fe=!1;else if(oe.$$is_number){if(oe===0)return ne;fe=oe<0}else v.$raise(t("TypeError"),"wrong argument type "+oe.$class()+" (must be numeric, true, false or nil)");fe?Q=ne:Y=ne+1}return _}),q(f,"$bsearch",function ie(){var R=ie.$$p||n,B=this,Y=n;return ie.$$p=null,R===n?B.$enum_for("bsearch"):(Y=m(B,"bsearch_index",[],R.$to_proc()),Y!=null&&Y.$$is_number?B[Y]:Y)}),q(f,"$cycle",function ie(R){var B=ie.$$p||n,Y=this;if(ie.$$p=null,R==null&&(R=n),B===n)return m(Y,"enum_for",["cycle",R],function se(){var oe=se.$$s==null?this:se.$$s;return k(R["$nil?"]())?t(t("Float"),"INFINITY"):(R=I["$coerce_to!"](R,t("Integer"),"to_int"),k(A(R,0))?D(oe.$enumerator_size(),R):0)},{$$s:Y});if(k(Y["$empty?"]())||S(R,0))return n;var Q,ne;if(R===n)for(;;)for(Q=0,ne=Y.length;Q<ne;Q++)H(B,Y[Q]);else{if(R=I["$coerce_to!"](R,t("Integer"),"to_int"),R<=0)return Y;for(;R>0;){for(Q=0,ne=Y.length;Q<ne;Q++)H(B,Y[Q]);R--}}return Y},-1),q(f,"$clear",function(){var R=this;return g(R),R.splice(0,R.length),R}),q(f,"$count",function ie(R){var B=ie.$$p||n,Y=this;return ie.$$p=null,k(R!==void 0)||k(B)?z(Y,P(Y,"count",ie,!1,!0),"count",[R],B):Y.$size()},-1),q(f,"$initialize_copy",function(R){var B=this;return B.$replace(R)}),q(f,"$collect",function ie(){var R=ie.$$p||n,B=this;if(ie.$$p=null,R===n)return m(B,"enum_for",["collect"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:B});for(var Y=[],Q=0;Q<B.length;Q++){var ne=H(R,B[Q]);Y[Q]=ne}return Y}),q(f,"$collect!",function ie(){var R=ie.$$p||n,B=this;if(ie.$$p=null,R===n)return m(B,"enum_for",["collect!"],function ne(){var se=ne.$$s==null?this:ne.$$s;return se.$size()},{$$s:B});g(B);for(var Y=0;Y<B.length;Y++){var Q=H(R,B[Y]);B[Y]=Q}return B});function ge(ie,R){return ie===R||R===0?1:R>0&&ie>R?ge(ie-1,R-1)+ge(ie-1,R):0}q(f,"$combination",function ie(R){var B=ie.$$p||n,Y=this,Q=n;if(ie.$$p=null,Q=I["$coerce_to!"](R,t("Integer"),"to_int"),B===n)return m(Y,"enum_for",["combination",Q],function te(){var ue=te.$$s==null?this:te.$$s;return ge(ue.length,Q)},{$$s:Y});var ne,se,oe,fe,_,p,U;if(Q===0)e.yield1(B,[]);else if(Q===1)for(ne=0,se=Y.length;ne<se;ne++)e.yield1(B,[Y[ne]]);else if(Q===Y.length)e.yield1(B,Y.slice());else if(Q>=0&&Q<Y.length){for(oe=[],ne=0;ne<=Q+1;ne++)oe.push(0);for(fe=[],_=0,p=!1,oe[0]=-1;!p;){for(fe[_]=Y[oe[_+1]];_<Q-1;)_++,U=oe[_+1]=oe[_]+1,fe[_]=Y[U];e.yield1(B,fe.slice()),_++;do p=_===0,oe[_]++,_--;while(oe[_+1]+Q===Y.length+_+1)}}return Y}),q(f,"$repeated_combination",function ie(R){var B=ie.$$p||n,Y=this,Q=n;if(ie.$$p=null,Q=I["$coerce_to!"](R,t("Integer"),"to_int"),B===n)return m(Y,"enum_for",["repeated_combination",Q],function se(){var oe=se.$$s==null?this:se.$$s;return ge(oe.length+Q-1,Q)},{$$s:Y});function ne(se,oe,fe,_){if(fe.length==se){var p=fe.slice();e.yield1(B,p);return}for(var U=oe;U<_.length;U++)fe.push(_[U]),ne(se,U,fe,_),fe.pop()}return Q>=0&&ne(Q,0,[],Y),Y}),q(f,"$compact",function(){for(var R=this,B=[],Y=0,Q=R.length,ne;Y<Q;Y++)(ne=R[Y])!==n&&B.push(ne);return B}),q(f,"$compact!",function(){var R=this;g(R);for(var B=R.length,Y=0,Q=R.length;Y<Q;Y++)R[Y]===n&&(R.splice(Y,1),Q--,Y--);return R.length===B?n:R}),q(f,"$concat",function(R){var B,Y,Q=this;return B=O(arguments),Y=B,g(Q),Y=m(Y,"map",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;return se==null&&(se=n),se=re(se),k(se["$equal?"](oe))&&(se=se.$dup()),se},{$$s:Q}),m(Y,"each",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;se==null&&(se=n);for(var fe=0,_=se.length;fe<_;fe++)oe.push(se[fe])},{$$s:Q}),Q},-1),q(f,"$delete",function ie(R){var B=ie.$$p||n,Y=this;ie.$$p=null;for(var Q=Y.length,ne=0,se=Q;ne<se;ne++)Y[ne]["$=="](R)&&(g(Y),Y.splice(ne,1),se--,ne--);return Y.length===Q?B!==n?e.yieldX(B,[]):n:R}),q(f,"$delete_at",function(R){var B=this;if(g(B),R=T(R,t("Integer"),"to_int"),R<0&&(R+=B.length),R<0||R>=B.length)return n;var Y=B[R];return B.splice(R,1),Y}),q(f,"$delete_if",function ie(){var R=ie.$$p||n,B=this;return ie.$$p=null,R===n?m(B,"enum_for",["delete_if"],function Y(){var Q=Y.$$s==null?this:Y.$$s;return Q.$size()},{$$s:B}):(g(B),V(B,E,R),B)}),q(f,"$difference",function(R){var B,Y,Q=this;return B=O(arguments),Y=B,m(Y,"reduce",[Q.$to_a().$dup()],function(se,oe){return se==null&&(se=n),oe==null&&(oe=n),w(se,oe)})},-1),q(f,"$dig",function(R,B){var Y,Q,ne=this,se=n;return Y=O(arguments,1),Q=Y,se=ne["$[]"](R),se===n||Q.length===0?se:(k(se["$respond_to?"]("dig"))||v.$raise(t("TypeError"),""+se.$class()+" does not have #dig method"),m(se,"dig",o(Q)))},-2),q(f,"$drop",function(R){var B=this;return R=T(R,t("Integer"),"to_int"),R<0&&v.$raise(t("ArgumentError")),B.slice(R)}),q(f,"$dup",function ie(){var R=ie.$$p||n,B=this;return ie.$$p=null,B.$$class===e.Array&&B.$$class.$allocate.$$pristine&&B.$copy_instance_variables.$$pristine&&B.$initialize_dup.$$pristine?B.slice(0):z(B,P(B,"dup",ie,!1,!0),"dup",[],R)}),q(f,"$each",function ie(){var R=ie.$$p||n,B=this;if(ie.$$p=null,R===n)return m(B,"enum_for",["each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:B});for(var Y=0;Y<B.length;Y++)H(R,B[Y]);return B}),q(f,"$each_index",function ie(){var R=ie.$$p||n,B=this;if(ie.$$p=null,R===n)return m(B,"enum_for",["each_index"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:B});for(var Y=0;Y<B.length;Y++)H(R,Y);return B}),q(f,"$empty?",function(){var R=this;return R.length===0}),q(f,"$eql?",function(R){var B=this,Y={};function Q(ne,se){var oe,fe,_,p;if(!se.$$is_array||(se=se.$to_a(),ne.length!==se.length))return!1;for(Y[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(_=ne[oe],p=se[oe],_.$$is_array){if(p.$$is_array&&p.length!==_.length||!Y.hasOwnProperty(_.$object_id())&&!Q(_,p))return!1}else if(!_["$eql?"](p))return!1;return!0}return Q(B,R)}),q(f,"$fetch",function ie(R,B){var Y=ie.$$p||n,Q=this;ie.$$p=null;var ne=R;if(R=T(R,t("Integer"),"to_int"),R<0&&(R+=Q.length),R>=0&&R<Q.length)return Q[R];if(Y!==n&&B!=null&&Q.$warn("warning: block supersedes default value argument"),Y!==n)return Y(ne);if(B!=null)return B;Q.length===0?v.$raise(t("IndexError"),"index "+ne+" outside of array bounds: 0...0"):v.$raise(t("IndexError"),"index "+ne+" outside of array bounds: -"+Q.length+"..."+Q.length)},-2),q(f,"$fill",function ie(R){var B=ie.$$p||n,Y,Q,ne,se,oe=this,fe=n,_=n,p=n,U=n,te=n;ie.$$p=null,Y=O(arguments),Q=Y,g(oe);var ue,ce;if(k(B)?(k(Q.length>2)&&v.$raise(t("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 0..2)"),se=Q,ne=d(se),fe=ne[0]==null?n:ne[0],_=ne[1]==null?n:ne[1]):(k(Q.length==0)?v.$raise(t("ArgumentError"),"wrong number of arguments (0 for 1..3)"):k(Q.length>3)&&v.$raise(t("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 1..3)"),se=Q,ne=d(se),p=ne[0]==null?n:ne[0],fe=ne[1]==null?n:ne[1],_=ne[2]==null?n:ne[2]),j(t("Range"),fe)){if(k(_)&&v.$raise(t("TypeError"),"length invalid with range"),U=fe.begin===n?0:T(fe.begin,t("Integer"),"to_int"),k(U<0)&&(U+=this.length),k(U<0)&&v.$raise(t("RangeError"),""+fe.$inspect()+" out of range"),te=fe.end===n?-1:T(fe.end,t("Integer"),"to_int"),k(te<0)&&(te+=this.length),k(fe["$exclude_end?"]())||(te+=1),k(te<=U))return oe}else if(k(fe))if(U=T(fe,t("Integer"),"to_int"),k(U<0)&&(U+=this.length),k(U<0)&&(U=0),k(_)){if(te=T(_,t("Integer"),"to_int"),k(te==0))return oe;te+=U}else te=this.length;else U=0,te=this.length;if(k(U>this.length))for(ue=this.length;ue<te;ue++)oe[ue]=n;if(k(te>this.length)&&(this.length=te),k(B))for(this.length;U<te;U++)ce=B(U),oe[U]=ce;else for(this.length;U<te;U++)oe[U]=p;return oe},-1),q(f,"$first",function(R){var B=this;return R==null?B.length===0?n:B[0]:(R=T(R,t("Integer"),"to_int"),R<0&&v.$raise(t("ArgumentError"),"negative array size"),B.slice(0,R))},-1),q(f,"$flatten",function(R){var B=this;function Y(Q,ne){var se=[],oe,fe,_,p;for(Q=Q.$to_a(),oe=0,fe=Q.length;oe<fe;oe++){if(_=Q[oe],!J(_,"$to_ary",!0)){se.push(_);continue}if(p=_.$to_ary(),p===n){se.push(_);continue}switch(p.$$is_array||v.$raise(t("TypeError")),p===B&&v.$raise(t("ArgumentError")),ne){case void 0:se=se.concat(Y(p));break;case 0:se.push(p);break;default:ae(se,Y(p,ne-1))}}return se}return R!==void 0&&(R=T(R,t("Integer"),"to_int")),Y(B,R)},-1),q(f,"$flatten!",function(R){var B=this;g(B);var Y=B.$flatten(R);if(B.length==Y.length){for(var Q=0,ne=B.length;Q<ne&&B[Q]===Y[Q];Q++);if(Q==ne)return n}return B.$replace(Y),B},-1),q(f,"$freeze",function(){var R=this;return k(R["$frozen?"]())?R:K(R)});var ve;q(f,"$hash",function(){var R=this,B=ve===void 0,Y=$e(),Q=R.$object_id(),ne,se,oe;if(Y=W(Y,10),Y=W(Y,R.length),B)ve=Object.create(null);else if(ve[Q])return W(Y,16843009);try{for(oe in ve)if(ne=ve[oe],R["$eql?"](ne))return W(Y,16843009);for(ve[Q]=R,se=0;se<R.length;se++)ne=R[se],Y=W(Y,ne.$hash());return Y}finally{B&&(ve=void 0)}}),q(f,"$include?",function(R){for(var B=this,Y=0,Q=B.length;Y<Q;Y++)if(B[Y]["$=="](R))return!0;return!1}),q(f,"$index",function ie(R){var B=ie.$$p||n,Y=this;ie.$$p=null;var Q,ne,se;if(R!=null&&B!==n&&Y.$warn("warning: given block not used"),R!=null){for(Q=0,ne=Y.length;Q<ne;Q++)if(Y[Q]["$=="](R))return Q}else if(B!==n){for(Q=0;Q<Y.length;Q++)if(se=B(Y[Q]),se!==!1&&se!==n)return Q}else return Y.$enum_for("index");return n},-1),q(f,"$insert",function(R,B){var Y,Q,ne=this;if(Y=O(arguments,1),Q=Y,g(ne),R=T(R,t("Integer"),"to_int"),Q.length>0){if(R<0&&(R+=ne.length+1,R<0&&v.$raise(t("IndexError"),""+R+" is out of bounds")),R>ne.length)for(var se=ne.length;se<R;se++)ne.push(n);ne.splice.apply(ne,[R,0].concat(Q))}return ne},-2);var me=[];q(f,"$inspect",function(){var R=this,B=[],Y=R.$__id__(),Q=!0;return function(){try{if(me.indexOf(Y)!==-1)return Q=!1,"[...]";me.push(Y);for(var ne=0,se=R.length;ne<se;ne++){var oe=R["$[]"](ne);B.push(C("Opal").$inspect(oe))}return"["+B.join(", ")+"]"}finally{Q&&me.pop()}}()}),q(f,"$intersection",function(R){var B,Y,Q=this,ne=n,se=n;return B=O(arguments),Y=B,Y.length===0?Q.$to_a().$dup():(Y=Y.map(re),Q.length===0?[]:(Y=m(Y,"sort_by",[],"length".$to_proc()),k(Q.length<Y[0].length)?m(Y,"reduce",[Q],"&".$to_proc()):(ne=Y.pop(),se=m(Y,"reduce",[ne],"&".$to_proc()),Q["$&"](se))))},-1),q(f,"$intersect?",function(R){var B=this,Y,Q,ne=new Map,se,oe;for(B.length<R.length?(Y=B,Q=R):(Y=R,Q=B),se=0,oe=Y.length;se<oe;se++)ee(ne,Y[se],!0);for(se=0,oe=Q.length;se<oe;se++)if(x(ne,Q[se]))return!0;return!1}),q(f,"$join",function(R){var B=this;if(N[","]==null&&(N[","]=n),R==null&&(R=n),k(B.length===0))return"";k(R===n)&&(R=N[","]);var Y=[],Q,ne,se,oe;for(Q=0,ne=B.length;Q<ne;Q++){if(se=B[Q],J(se,"$to_str")&&(oe=se.$to_str(),oe!==n)){Y.push(oe.$to_s());continue}if(J(se,"$to_ary")&&(oe=se.$to_ary(),oe===B&&v.$raise(t("ArgumentError")),oe!==n)){Y.push(oe.$join(R));continue}if(J(se,"$to_s")&&(oe=se.$to_s(),oe!==n)){Y.push(oe);continue}v.$raise(t("NoMethodError").$new(""+C("Opal").$inspect(B.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return R===n?Y.join(""):Y.join(I["$coerce_to!"](R,t("String"),"to_str").$to_s())},-1),q(f,"$keep_if",function ie(){var R=ie.$$p||n,B=this;return ie.$$p=null,R===n?m(B,"enum_for",["keep_if"],function Y(){var Q=Y.$$s==null?this:Y.$$s;return Q.$size()},{$$s:B}):(g(B),V(B,k,R),B)}),q(f,"$last",function(R){var B=this;return R==null?B.length===0?n:B[B.length-1]:(R=T(R,t("Integer"),"to_int"),R<0&&v.$raise(t("ArgumentError"),"negative array size"),R>B.length&&(R=B.length),B.slice(B.length-R,B.length))},-1),q(f,"$length",function(){var R=this;return R.length}),q(f,"$max",function ie(R){var B=ie.$$p||n,Y=this;return ie.$$p=null,m(Y.$each(),"max",[R],B.$to_proc())},-1),q(f,"$min",function ie(){var R=ie.$$p||n,B=this;return ie.$$p=null,m(B.$each(),"min",[],R.$to_proc())});function be(ie,R){for(var B=R>=0?1:0;R;)B*=ie,ie--,R--;return B}return q(f,"$permutation",function ie(R){var B=ie.$$p||n,Y=this,Q=n,ne=n;if(ie.$$p=null,B===n)return m(Y,"enum_for",["permutation",R],function p(){var U=p.$$s==null?this:p.$$s;return be(U.length,R===void 0?U.length:R)},{$$s:Y});var se,oe,fe;if(R===void 0?R=Y.length:R=T(R,t("Integer"),"to_int"),!(R<0||Y.length<R))if(R===0)e.yield1(B,[]);else if(R===1)for(var _=0;_<Y.length;_++)e.yield1(B,[Y[_]]);else Q=C("Array").$new(R),ne=C("Array").$new(Y.length,!1),se=function(p,U,te,ue,ce){Y=this;for(var he=0;he<Y.length;he++)if(ue["$[]"](he)["$!"]())if(U[te]=he,te<p-1)ue[he]=!0,se.call(Y,p,U,te+1,ue,ce),ue[he]=!1;else{fe=[];for(var pe=0;pe<U.length;pe++)fe.push(Y[U[pe]]);H(ce,fe)}},B!==n?(oe=Y.slice(),se.call(oe,R,Q,0,ne,B)):se.call(Y,R,Q,0,ne,B);return Y},-1),q(f,"$repeated_permutation",function ie(R){var B=ie.$$p||n,Y=this,Q=n;if(ie.$$p=null,Q=I["$coerce_to!"](R,t("Integer"),"to_int"),B===n)return m(Y,"enum_for",["repeated_permutation",Q],function se(){var oe=se.$$s==null?this:se.$$s;return k(h(Q,0))?oe.$size()["$**"](Q):0},{$$s:Y});function ne(se,oe,fe){if(oe.length==se){var _=oe.slice();e.yield1(B,_);return}for(var p=0;p<fe.length;p++)oe.push(fe[p]),ne(se,oe,fe),oe.pop()}return ne(Q,[],Y.slice()),Y}),q(f,"$pop",function(R){var B=this;return g(B),k(R===void 0)?k(B.length===0)?n:B.pop():(R=T(R,t("Integer"),"to_int"),k(R<0)&&v.$raise(t("ArgumentError"),"negative array size"),k(B.length===0)?[]:k(R===1)?[B.pop()]:k(R>B.length)?B.splice(0,B.length):B.splice(B.length-R,B.length))},-1),q(f,"$product",function ie(R){var B=ie.$$p||n,Y,Q,ne=this;ie.$$p=null,Y=O(arguments),Q=Y;var se=B!==n?null:[],oe=Q.length+1,fe=new Array(oe),_=new Array(oe),p=new Array(oe),U,te,ue,ce,he=1;for(p[0]=ne,U=1;U<oe;U++)p[U]=T(Q[U-1],t("Array"),"to_ary");for(U=0;U<oe;U++){if(ce=p[U].length,ce===0)return se||ne;he*=ce,he>2147483647&&v.$raise(t("RangeError"),"too big to product"),_[U]=ce,fe[U]=0}e:for(;;){for(ue=[],U=0;U<oe;U++)ue.push(p[U][fe[U]]);for(se?se.push(ue):e.yield1(B,ue),te=oe-1,fe[te]++;fe[te]===_[te];){if(fe[te]=0,--te<0)break e;fe[te]++}}return se||ne},-1),q(f,"$push",function(R){var B,Y,Q=this;return B=O(arguments),Y=B,g(Q),ae(Q,Y),Q},-1),q(f,"$rassoc",function(R){for(var B=this,Y=0,Q=B.length,ne;Y<Q;Y++)if(ne=B[Y],ne.length&&ne[1]!==void 0&&ne[1]["$=="](R))return ne;return n}),q(f,"$reject",function ie(){var R=ie.$$p||n,B=this;if(ie.$$p=null,R===n)return m(B,"enum_for",["reject"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:B});for(var Y=[],Q=0,ne;Q<B.length;Q++)ne=R(B[Q]),(ne===!1||ne===n)&&Y.push(B[Q]);return Y}),q(f,"$reject!",function ie(){var R=ie.$$p||n,B=this,Y=n;return ie.$$p=null,R===n?m(B,"enum_for",["reject!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:B}):(g(B),Y=B.$length(),m(B,"delete_if",[],R.$to_proc()),S(B.$length(),Y)?n:B)}),q(f,"$replace",function(R){var B=this;return g(B),R=re(R),B.length>0&&B.splice(0,B.length),ae(B,R),B}),q(f,"$reverse",function(){var R=this;return R.slice(0).reverse()}),q(f,"$reverse!",function(){var R=this;return g(R),R.reverse()}),q(f,"$reverse_each",function ie(){var R=ie.$$p||n,B=this;if(ie.$$p=null,R===n)return m(B,"enum_for",["reverse_each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:B});for(var Y=B.length-1;Y>=0;Y--)H(R,B[Y]);return B}),q(f,"$rindex",function ie(R){var B=ie.$$p||n,Y=this;ie.$$p=null;var Q,ne;if(R!=null&&B!==n&&Y.$warn("warning: given block not used"),R!=null){for(Q=Y.length-1;Q>=0&&!(Q>=Y.length);Q--)if(Y[Q]["$=="](R))return Q}else if(B!==n){for(Q=Y.length-1;Q>=0&&!(Q>=Y.length);Q--)if(ne=B(Y[Q]),ne!==!1&&ne!==n)return Q}else if(R==null)return Y.$enum_for("rindex");return n},-1),q(f,"$rotate",function(R){var B=this;R==null&&(R=1);var Y,Q,ne,se;return R=T(R,t("Integer"),"to_int"),B.length===1?B.slice():B.length===0?[]:(Y=B.slice(),Q=R%Y.length,ne=Y.slice(Q),se=Y.slice(0,Q),ne.concat(se))},-1),q(f,"$rotate!",function(R){var B=this,Y=n;return R==null&&(R=1),g(B),B.length===0||B.length===1?B:(R=T(R,t("Integer"),"to_int"),Y=B.$rotate(R),B.$replace(Y))},-1),function(ie,R){var B=G(ie,R,"SampleRandom"),Y=B.$$prototype;return Y.rng=n,q(B,"$initialize",l("rng")),q(B,"$rand",function(ne){var se=this,oe=n;return oe=T(se.rng.$rand(ne),t("Integer"),"to_int"),k(oe<0)&&v.$raise(t("RangeError"),"random value must be >= 0"),k(oe<ne)||v.$raise(t("RangeError"),"random value must be less than Array size"),oe})}(f,null),q(f,"$sample",function(R,B){var Y=this,Q=n,ne=n;if(k(R===void 0))return Y.$at(v.$rand(Y.length));if(k(B===void 0)?k(Q=I["$coerce_to?"](R,t("Hash"),"to_hash"))?(B=Q,R=n):(B=n,R=T(R,t("Integer"),"to_int")):(R=T(R,t("Integer"),"to_int"),B=T(B,t("Hash"),"to_hash")),k(R)&&k(R<0)&&v.$raise(t("ArgumentError"),"count must be greater than 0"),k(B)&&(ne=B["$[]"]("random")),ne=k(ne)&&k(ne["$respond_to?"]("rand"))?C("SampleRandom").$new(ne):v,!k(R))return Y[ne.$rand(Y.length)];var se,oe,fe,_,p,U,te,ue;switch(R>Y.length&&(R=Y.length),R){case 0:return[];case 1:return[Y[ne.$rand(Y.length)]];case 2:return _=ne.$rand(Y.length),p=ne.$rand(Y.length-1),_<=p&&p++,[Y[_],Y[p]];default:if(Y.length/R>3){for(se=!1,oe=0,fe=C("Array").$new(R),_=1,fe[0]=ne.$rand(Y.length);_<R;){for(U=ne.$rand(Y.length),p=0;p<_;){for(;U===fe[p];){if(oe++,oe>100){se=!0;break}U=ne.$rand(Y.length)}if(se)break;p++}if(se)break;fe[_]=U,_++}if(!se){for(_=0;_<R;)fe[_]=Y[fe[_]],_++;return fe}}fe=Y.slice();for(var ce=0;ce<R;ce++)te=ne.$rand(Y.length-ce)+ce,ue=fe[ce],fe[ce]=fe[te],fe[te]=ue;return R===Y.length?fe:fe["$[]"](0,R)}},-1),q(f,"$select",function ie(){var R=ie.$$p||n,B=this;if(ie.$$p=null,R===n)return m(B,"enum_for",["select"],function oe(){var fe=oe.$$s==null?this:oe.$$s;return fe.$size()},{$$s:B});for(var Y=[],Q=0,ne,se;Q<B.length;Q++)ne=B[Q],se=H(R,ne),k(se)&&Y.push(ne);return Y}),q(f,"$select!",function ie(){var R=ie.$$p||n,B=this;if(ie.$$p=null,R===n)return m(B,"enum_for",["select!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:B});g(B);var Y=B.length;return m(B,"keep_if",[],R.$to_proc()),B.length===Y?n:B}),q(f,"$shift",function(R){var B=this;return g(B),k(R===void 0)?k(B.length===0)?n:L(B):(R=T(R,t("Integer"),"to_int"),k(R<0)&&v.$raise(t("ArgumentError"),"negative array size"),k(B.length===0)?[]:B.splice(0,R))},-1),q(f,"$shuffle",function(R){var B=this;return B.$dup().$to_a()["$shuffle!"](R)},-1),q(f,"$shuffle!",function(R){var B=this;g(B);var Y,Q=B.length,ne,se;for(R!==void 0&&(R=I["$coerce_to?"](R,t("Hash"),"to_hash"),R!==n&&(R=R["$[]"]("random"),R!==n&&R["$respond_to?"]("rand")&&(Y=R)));Q;)Y?(ne=Y.$rand(Q).$to_int(),ne<0&&v.$raise(t("RangeError"),"random number too small "+ne),ne>=Q&&v.$raise(t("RangeError"),"random number too big "+ne)):ne=B.$rand(Q),se=B[--Q],B[Q]=B[ne],B[ne]=se;return B},-1),q(f,"$slice!",function(R,B){var Y=this,Q=n,ne=n,se=n,oe=n,fe=n;if(g(Y),Q=n,k(B===void 0))if(j(t("Range"),R)){ne=R,Q=Y["$[]"](ne),se=ne.begin===n?0:T(ne.begin,t("Integer"),"to_int"),oe=ne.end===n?-1:T(ne.end,t("Integer"),"to_int"),se<0&&(se+=Y.length),oe<0?oe+=Y.length:oe>=Y.length&&(oe=Y.length-1,ne.excl&&(oe+=1));var _=oe-se;ne.excl&&ne.end!==n?oe-=1:_+=1,se<Y.length&&se>=0&&oe<Y.length&&oe>=0&&_>0&&Y.splice(se,_)}else{if(fe=T(R,t("Integer"),"to_int"),fe<0&&(fe+=Y.length),fe<0||fe>=Y.length)return n;Q=Y[fe],fe===0?Y.shift():Y.splice(fe,1)}else{if(fe=T(R,t("Integer"),"to_int"),B=T(B,t("Integer"),"to_int"),B<0)return n;Q=Y["$[]"](fe,B),fe<0&&(fe+=Y.length),fe+B>Y.length&&(B=Y.length-fe),fe<Y.length&&fe>=0&&Y.splice(fe,B)}return Q},-2),q(f,"$sort",function ie(){var R=ie.$$p||n,B=this;return ie.$$p=null,k(B.length>1)?(R===n&&(R=function(Y,Q){return Y["$<=>"](Q)}),B.slice().sort(function(Y,Q){var ne=R(Y,Q);return ne===n&&v.$raise(t("ArgumentError"),"comparison of "+Y.$inspect()+" with "+Q.$inspect()+" failed"),A(ne,0)?1:c(ne,0)?-1:0})):B}),q(f,"$sort!",function ie(){var R=ie.$$p||n,B=this;ie.$$p=null,g(B);var Y;R!==n?Y=m(B.slice(),"sort",[],R.$to_proc()):Y=B.slice().$sort(),B.length=0;for(var Q=0,ne=Y.length;Q<ne;Q++)B.push(Y[Q]);return B}),q(f,"$sort_by!",function ie(){var R=ie.$$p||n,B=this;return ie.$$p=null,R===n?m(B,"enum_for",["sort_by!"],function Y(){var Q=Y.$$s==null?this:Y.$$s;return Q.$size()},{$$s:B}):(g(B),B.$replace(m(B,"sort_by",[],R.$to_proc())))}),q(f,"$take",function(R){var B=this;return R<0&&v.$raise(t("ArgumentError")),B.slice(0,R)}),q(f,"$take_while",function ie(){var R=ie.$$p||n,B=this;ie.$$p=null;for(var Y=[],Q=0,ne,se;Q<B.length;Q++){if(ne=B[Q],se=R(ne),se===!1||se===n)return Y;Y.push(ne)}return Y}),q(f,"$to_a",function(){var R=this;return R.$$class===e.Array?R:e.Array.$new(R)}),q(f,"$to_ary",X),q(f,"$to_h",function ie(){var R=ie.$$p||n,B=this,Y=n;ie.$$p=null,Y=B,R!==n&&(Y=m(Y,"map",[],R.$to_proc()));var Q,ne=Y.length,se,oe,fe,_=new Map;for(Q=0;Q<ne;Q++)se=I["$coerce_to?"](Y[Q],t("Array"),"to_ary"),se.$$is_array||v.$raise(t("TypeError"),"wrong element type "+Y[Q].$class()+" at "+Q+" (expected array)"),se.length!==2&&v.$raise(t("ArgumentError"),"element has wrong array length at "+Q+" (expected 2, was "+se.$length()+")"),oe=se[0],fe=se[1],ee(_,oe,fe);return _}),q(f,"$transpose",function(){var R=this,B=n,Y=n;return k(R["$empty?"]())?[]:(B=[],Y=n,m(R,"each",[],function(ne){var se=n;return ne==null&&(ne=n),ne=re(ne),Y=k(se=Y)?se:ne.length,y(ne.length,Y)&&v.$raise(t("IndexError"),"element size differs ("+ne.length+" should be "+Y+")"),m(ne.length,"times",[],function(fe){var _,p=n;return fe==null&&(fe=n),p=k(se=B["$[]"](fe))?se:(_=[fe,[]],m(B,"[]=",_),_[_.length-1]),p["$<<"](ne.$at(fe))})}),B)}),q(f,"$union",function(R){var B,Y,Q=this;return B=O(arguments),Y=B,m(Y,"reduce",[Q.$uniq()],function(se,oe){return se==null&&(se=n),oe==null&&(oe=n),se["$|"](oe)})},-1),q(f,"$uniq",function ie(){var R=ie.$$p||n,B=this;ie.$$p=null;var Y=new Map,Q,ne,se,oe;if(R===n)for(Q=0,ne=B.length;Q<ne;Q++)se=B[Q],x(Y,se)===void 0&&ee(Y,se,se);else for(Q=0;Q<B.length;Q++)se=B[Q],oe=H(R,se),x(Y,oe)===void 0&&ee(Y,oe,se);return Y.$values()}),q(f,"$uniq!",function ie(){var R=ie.$$p||n,B=this;ie.$$p=null,g(B);var Y=new Map,Q,ne,se,oe=[];for(Q=0;Q<B.length;Q++)ne=B[Q],se=R===n?ne:H(R,ne),x(Y,se)===void 0?ee(Y,se,ne):oe.push(Q);for(Q=oe.length-1;Q>=0;Q--)B.splice(oe[Q],1);return oe.length===0?n:B}),q(f,"$unshift",function(R){var B,Y,Q=this;B=O(arguments),Y=B,g(Q);var ne=Q.length,se=Y.length;if(se==0)return Q;for(var oe=ne-se,fe=0;fe<se;fe++)Q.push(Q[oe+fe]);for(var _=ne-1;_-se>=0;)Q[_]=Q[_-se],_--;for(var p=0;p<se;p++)Q[p]=Y[p];return Q},-1),q(f,"$values_at",function(R){var B,Y,Q=this,ne=n;return B=O(arguments),Y=B,ne=[],m(Y,"each",[],function se(oe){var fe=se.$$s==null?this:se.$$s,_=n,p=n,U=n;return oe==null&&(oe=n),k(oe["$is_a?"](t("Range")))?(_=oe.$end()===n?-1:T(oe.$end(),t("Integer"),"to_int"),p=oe.$begin()===n?0:T(oe.$begin(),t("Integer"),"to_int"),p<0?(p=p+fe.length,n):(_<0&&(_=_+fe.length),oe["$exclude_end?"]()&&oe.$end()!==n&&_--,_<p?n:m(p,"upto",[_],function te(ue){var ce=te.$$s==null?this:te.$$s;return ue==null&&(ue=n),ne["$<<"](ce.$at(ue))},{$$s:fe}))):(U=T(oe,t("Integer"),"to_int"),ne["$<<"](fe.$at(U)))},{$$s:Q}),ne},-1),q(f,"$zip",function ie(R){var B=ie.$$p||n,Y,Q,ne=this,se=n;ie.$$p=null,Y=O(arguments),Q=Y;var oe=[],fe=ne.length,_,p,U,te,ue;for(te=0,ue=Q.length;te<ue;te++)if(p=Q[te],!p.$$is_array){if(p.$$is_range||p.$$is_enumerator){Q[te]=p.$take(fe);continue}Q[te]=(k(se=I["$coerce_to?"](p,t("Array"),"to_ary"))?se:I["$coerce_to!"](p,t("Enumerator"),"to_enum","each")).$to_a()}for(U=0;U<fe;U++){for(_=[ne[U]],te=0,ue=Q.length;te<ue;te++)p=Q[te][U],p==null&&(p=n),_[te+1]=p;oe[U]=_}if(B!==n){for(U=0;U<fe;U++)e.yield1(B,oe[U]);return n}return oe},-1),M(f,"$inherited",function(R){R.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),q(f,"$instance_variables",function ie(){var R=ie.$$p||n,B=this;return ie.$$p=null,m(z(B,P(B,"instance_variables",ie,!1,!0),"instance_variables",[],R),"reject",[],function(Q){var ne=n;return Q==null&&(Q=n),k(ne=/^@\d+$/.test(Q))?ne:Q["$=="]("@length")})}),q(f,"$pack",function(R){return O(arguments),v.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),i(f,"append","push"),i(f,"filter","select"),i(f,"filter!","select!"),i(f,"map","collect"),i(f,"map!","collect!"),i(f,"prepend","unshift"),i(f,"size","length"),i(f,"slice","[]"),i(f,"to_s","inspect"),I.$pristine(f.$singleton_class(),"allocate"),I.$pristine(f,"copy_instance_variables","initialize_dup")}("::",Array,$)};Opal.modules["corelib/hash"]=function(e){var k=e.yield1,E=e.hash_clone,H=e.hash_delete,x=e.hash_each,ee=e.hash_get,Z=e.hash_put,T=e.deny_frozen_access,J=e.freeze,g=e.opal32_init,K=e.opal32_add,$e=e.klass,W=e.slice,G=e.Opal,O=e.Kernel,M=e.defs,v=e.def,q=e.send,I=e.rb_ge,j=e.rb_gt,z=e.truthy,P=e.to_a,m=e.return_self,A=e.not,D=e.alias,S=e.top,w=[],o=e.nil,d=e.$$$;return e.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),S.$require("corelib/enumerable"),function(N,h,l){var c=$e(N,h,"Hash"),X=[c].concat(l),y=e.$r(X);c.$include(d("Enumerable")),c.$$prototype.$$is_hash=!0,M(c,"$[]",function(n){var t,r,s=this;t=W(arguments),r=t;var u,f=r.length,b,C;if(f===1){if(u=G["$coerce_to?"](r["$[]"](0),d("Hash"),"to_hash"),u!==o)return s.$allocate()["$merge!"](u);for(r=G["$coerce_to?"](r["$[]"](0),d("Array"),"to_ary"),r===o&&O.$raise(d("ArgumentError"),"odd number of arguments for Hash"),f=r.length,u=s.$allocate(),C=0;C<f;C++)b=r[C],b.$$is_array||O.$raise(d("ArgumentError"),"invalid element "+b.$inspect()+" for Hash"),b.length===1?u.$store(b[0],o):b.length===2?u.$store(b[0],b[1]):O.$raise(d("ArgumentError"),"invalid number of elements ("+b.length+" for "+b.$inspect()+"), must be 1..2");return u}for(f%2!==0&&O.$raise(d("ArgumentError"),"odd number of arguments for Hash"),u=s.$allocate(),C=0;C<f;C+=2)u.$store(r[C],r[C+1]);return u},-1),M(c,"$allocate",function(){var n=this,t=new n.$$constructor;return t.$$none=o,t.$$proc=o,t}),M(c,"$try_convert",function(n){return G["$coerce_to?"](n,d("Hash"),"to_hash")}),v(c,"$initialize",function $(n){var t=$.$$p||o,r=this;return $.$$p=null,T(r),n!==void 0&&t!==o&&O.$raise(d("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=n===void 0?o:n,r.$$proc=t,r},-1),v(c,"$==",function(n){var t=this;return t===n?!0:!n.$$is_hash||t.size!==n.size?!1:x(t,!0,function(r,s){var u=ee(n,r);return u===void 0||!s["$eql?"](u)?[!0,!1]:[!1,!0]})}),v(c,"$>=",function(n){var t=this,r=o;return n=G["$coerce_to!"](n,d("Hash"),"to_hash"),t.size<n.size?!1:(r=!0,q(n,"each",[],function s(u,f){var b=s.$$s==null?this:s.$$s,C=o;if(u==null&&(u=o),f==null&&(f=o),C=b.$fetch(u,null),C==null||C!==f){r=!1;return}},{$$s:t}),r)}),v(c,"$>",function(n){var t=this;return n=G["$coerce_to!"](n,d("Hash"),"to_hash"),t.size<=n.size?!1:I(t,n)}),v(c,"$<",function(n){var t=this;return n=G["$coerce_to!"](n,d("Hash"),"to_hash"),j(n,t)}),v(c,"$<=",function(n){var t=this;return n=G["$coerce_to!"](n,d("Hash"),"to_hash"),I(n,t)}),v(c,"$[]",function(n){var t=this,r=ee(t,n);return r!==void 0?r:t.$default(n)}),v(c,"$[]=",function(n,t){var r=this;return T(r),Z(r,n,t),t}),v(c,"$assoc",function(n){var t=this;return x(t,o,function(r,s){return r["$=="](n)?[!0,[r,s]]:[!1,o]})}),v(c,"$clear",function(){var n=this;return T(n),n.clear(),n.$$keys&&n.$$keys.clear(),n}),v(c,"$clone",function(){var n=this,t=n.$class().$new();return E(n,t),n["$frozen?"]()?t.$freeze():t}),v(c,"$compact",function(){var n=this,t=new Map;return x(n,t,function(r,s){return s!==o&&Z(t,r,s),[!1,t]})}),v(c,"$compact!",function(){var n=this;T(n);var t=o;return x(n,t,function(r,s){return s===o&&(H(n,r),t=n),[!1,t]})}),v(c,"$compare_by_identity",function(){var n=this;return T(n),n.$$by_identity||(n.$$by_identity=!0,n.size!==0&&e.hash_rehash(n)),n}),v(c,"$compare_by_identity?",function(){var n=this;return n.$$by_identity===!0}),v(c,"$default",function(n){var t=this;return n!==void 0&&t.$$proc!==o&&t.$$proc!==void 0?t.$$proc.$call(t,n):t.$$none===void 0?o:t.$$none},-1),v(c,"$default=",function(n){var t=this;return T(t),t.$$proc=o,t.$$none=n,n}),v(c,"$default_proc",function(){var n=this;return n.$$proc!==void 0?n.$$proc:o}),v(c,"$default_proc=",function(n){var t=this;T(t);var r=n;return r!==o&&(r=G["$coerce_to!"](r,d("Proc"),"to_proc"),r["$lambda?"]()&&r.$arity().$abs()!==2&&O.$raise(d("TypeError"),"default_proc takes two arguments")),t.$$none=o,t.$$proc=r,n}),v(c,"$delete",function $(n){var t=$.$$p||o,r=this;$.$$p=null,T(r);var s=H(r,n);return s!==void 0?s:t!==o?e.yield1(t,n):o}),v(c,"$delete_if",function $(){var n=$.$$p||o,t=this;return $.$$p=null,z(n)?(T(t),x(t,t,function(r,s){var u=n(r,s);return u!==!1&&u!==o&&H(t,r),[!1,t]})):q(t,"enum_for",["delete_if"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),v(c,"$dig",function(n,t){var r,s,u=this,f=o;return r=W(arguments,1),s=r,f=u["$[]"](n),f===o||s.length===0?f:(z(f["$respond_to?"]("dig"))||O.$raise(d("TypeError"),""+f.$class()+" does not have #dig method"),q(f,"dig",P(s)))},-2),v(c,"$dup",function(){var n=this;return E(n,n.$class().$new())}),v(c,"$each",function $(){var n=$.$$p||o,t=this;return $.$$p=null,z(n)?x(t,t,function(r,s){return k(n,[r,s]),[!1,t]}):q(t,"enum_for",["each"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),v(c,"$each_key",function $(){var n=$.$$p||o,t=this;return $.$$p=null,z(n)?x(t,t,function(r,s){return n(r),[!1,t]}):q(t,"enum_for",["each_key"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),v(c,"$each_value",function $(){var n=$.$$p||o,t=this;return $.$$p=null,z(n)?x(t,t,function(r,s){return n(s),[!1,t]}):q(t,"enum_for",["each_value"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),v(c,"$empty?",function(){var n=this;return n.size===0}),v(c,"$except",function(n){var t,r,s=this;return t=W(arguments),r=t,q(s.$dup(),"except!",P(r))},-1),v(c,"$except!",function(n){var t,r,s=this;return t=W(arguments),r=t,q(r,"each",[],function u(f){var b=u.$$s==null?this:u.$$s;return f==null&&(f=o),b.$delete(f)},{$$s:s}),s},-1),v(c,"$fetch",function $(n,t){var r=$.$$p||o,s=this;$.$$p=null;var u=ee(s,n);return u!==void 0?u:r!==o?r(n):t!==void 0?t:O.$raise(d("KeyError").$new("key not found: "+n.$inspect(),new Map([["key",n],["receiver",s]])))},-2),v(c,"$fetch_values",function $(n){var t=$.$$p||o,r,s,u=this;return $.$$p=null,r=W(arguments),s=r,q(s,"map",[],function f(b){var C=f.$$s==null?this:f.$$s;return b==null&&(b=o),q(C,"fetch",[b],t.$to_proc())},{$$s:u})},-1),v(c,"$flatten",function(n){var t=this;n==null&&(n=1),n=G["$coerce_to!"](n,d("Integer"),"to_int");var r=[];return x(t,r,function(s,u){return r.push(s),u.$$is_array?n===1?(r.push(u),[!1,r]):(r=r.concat(u.$flatten(n-2)),[!1,r]):(r.push(u),[!1,r])})},-1),v(c,"$freeze",function(){var n=this;return z(n["$frozen?"]())?n:J(n)}),v(c,"$has_key?",function(n){var t=this;return ee(t,n)!==void 0}),v(c,"$has_value?",function(n){var t=this;return x(t,!1,function(r,s){return s["$=="](n)?[!0,!0]:[!1,!1]})});var i;v(c,"$hash",function(){var n=this,t=i===void 0,r=n.$object_id(),s=g(),u,f,b,C=n.size,L=new Int32Array(C);if(s=K(s,4),s=K(s,C),t)i=Object.create(null);else if(i[r])return K(s,16843009);try{for(u in i)if(f=i[u],n["$eql?"](f))return K(s,16843009);for(i[r]=n,b=0,x(n,!1,function(F,V){return L[b]=[1883326802,F,V].$hash(),b++,[!1,!1]}),L=L.sort(),b=0;b<L.length;b++)s=K(s,L[b]);return s}finally{t&&(i=void 0)}}),v(c,"$index",function(n){var t=this;return x(t,o,function(r,s){return s["$=="](n)?[!0,r]:[!1,o]})}),v(c,"$indexes",function(n){var t,r,s=this;t=W(arguments),r=t;for(var u=[],f=0,b=r.length,C,L;f<b;f++){if(C=r[f],L=ee(s,C),L===void 0){u.push(s.$default());continue}u.push(L)}return u},-1);var a;return v(c,"$inspect",function(){var n=this,t=a===void 0,r=n.$object_id(),s=[];return function(){try{if(t&&(a={}),a.hasOwnProperty(r))return"{...}";return a[r]=!0,x(n,!1,function(u,f){return f=y("Opal").$inspect(f),u=y("Opal").$inspect(u),s.push(u+"=>"+f),[!1,!1]}),"{"+s.join(", ")+"}";return o}finally{t&&(a=void 0)}}()}),v(c,"$invert",function(){var n=this,t=new Map;return x(n,t,function(r,s){return Z(t,s,r),[!1,t]})}),v(c,"$keep_if",function $(){var n=$.$$p||o,t=this;return $.$$p=null,z(n)?(T(t),x(t,t,function(r,s){var u=n(r,s);return(u===!1||u===o)&&H(t,r),[!1,t]})):q(t,"enum_for",["keep_if"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),v(c,"$keys",function(){var n=this;return Array.from(n.keys())}),v(c,"$length",function(){var n=this;return n.size}),v(c,"$merge",function $(n){var t=$.$$p||o,r,s,u=this;return $.$$p=null,r=W(arguments),s=r,q(u.$dup(),"merge!",P(s),t.$to_proc())},-1),v(c,"$merge!",function $(n){var t=$.$$p||o,r,s,u=this;$.$$p=null,r=W(arguments),s=r,T(u);var f,b;for(f=0;f<s.length;++f)b=G["$coerce_to!"](s[f],d("Hash"),"to_hash"),t===o?x(b,!1,function(C,L){return Z(u,C,L),[!1,!1]}):x(b,!1,function(C,L){var F=ee(u,C);return F===void 0?(Z(u,C,L),[!1,!1]):(Z(u,C,t(C,F,L)),[!1,!1])});return u},-1),v(c,"$rassoc",function(n){var t=this;return x(t,o,function(r,s){return s["$=="](n)?[!0,[r,s]]:[!1,o]})}),v(c,"$rehash",function(){var n=this;return T(n),e.hash_rehash(n)}),v(c,"$reject",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!z(n))return q(t,"enum_for",["reject"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});var r=new Map;return x(t,r,function(s,u){var f=n(s,u);return(f===!1||f===o)&&Z(r,s,u),[!1,r]})}),v(c,"$reject!",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!z(n))return q(t,"enum_for",["reject!"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});T(t);var r=o;return x(t,r,function(s,u){var f=n(s,u);return f!==!1&&f!==o&&(H(t,s),r=t),[!1,r]})}),v(c,"$replace",function(n){var t=this;return T(t),n=G["$coerce_to!"](n,d("Hash"),"to_hash"),t.$clear(),x(n,!1,function(r,s){return Z(t,r,s),[!1,!1]}),z(n.$default_proc())?t["$default_proc="](n.$default_proc()):t["$default="](n.$default()),t}),v(c,"$select",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!z(n))return q(t,"enum_for",["select"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});var r=new Map;return x(t,r,function(s,u){var f=n(s,u);return f!==!1&&f!==o&&Z(r,s,u),[!1,r]})}),v(c,"$select!",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!z(n))return q(t,"enum_for",["select!"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});T(t);var r=o;return x(t,r,function(s,u){var f=n(s,u);return(f===!1||f===o)&&(H(t,s),r=t),[!1,r]})}),v(c,"$shift",function(){var n=this;return T(n),x(n,o,function(t,r){return[!0,[t,H(n,t)]]})}),v(c,"$slice",function(n){var t,r,s=this;t=W(arguments),r=t;for(var u=new Map,f=0,b=r.length;f<b;f++){var C=r[f],L=ee(s,C);L!==void 0&&Z(u,C,L)}return u},-1),v(c,"$to_a",function(){var n=this,t=[];return x(n,t,function(r,s){return t.push([r,s]),[!1,t]})}),v(c,"$to_h",function $(){var n=$.$$p||o,t=this;if($.$$p=null,n!==o)return q(t,"map",[],n.$to_proc()).$to_h();if(t.$$class===e.Hash)return t;var r=new Map;return E(t,r),r}),v(c,"$to_hash",m),v(c,"$to_proc",function(){var n=this;return q(n,"proc",[],function t(r){var s=t.$$s==null?this:t.$$s;return r==null&&O.$raise(d("ArgumentError"),"no key given"),s["$[]"](r)},{$$arity:-1,$$s:n})}),v(c,"$transform_keys",function $(n){var t=$.$$p||o,r=this;if($.$$p=null,n==null&&(n=o),A(t)&&A(n))return q(r,"enum_for",["transform_keys"],function u(){var f=u.$$s==null?this:u.$$s;return f.$size()},{$$s:r});var s=new Map;return x(r,s,function(u,f){var b;return n!==o&&(b=ee(n,u)),b===void 0&&t&&t!==o&&(b=t(u)),b===void 0&&(b=u),Z(s,b,f),[!1,s]})},-1),v(c,"$transform_keys!",function $(n){var t=$.$$p||o,r=this;if($.$$p=null,n==null&&(n=o),A(t)&&A(n))return q(r,"enum_for",["transform_keys!"],function u(){var f=u.$$s==null?this:u.$$s;return f.$size()},{$$s:r});T(r);var s=new Map;return x(r,r,function(u,f){var b;return n!==o&&(b=ee(n,u)),b===void 0&&t&&t!==o&&(b=t(u)),b===void 0?[!1,r]:(ee(s,u)||H(r,u),Z(r,b,f),Z(s,b,!0),[!1,r])})},-1),v(c,"$transform_values",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!z(n))return q(t,"enum_for",["transform_values"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});var r=new Map;return x(t,r,function(s,u){return Z(r,s,n(u)),[!1,r]})}),v(c,"$transform_values!",function $(){var n=$.$$p||o,t=this;return $.$$p=null,z(n)?(T(t),x(t,t,function(r,s){return Z(t,r,n(s)),[!1,t]})):q(t,"enum_for",["transform_values!"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),v(c,"$values",function(){var n=this;return Array.from(n.values())}),D(c,"each_pair","each"),D(c,"eql?","=="),D(c,"filter","select"),D(c,"filter!","select!"),D(c,"include?","has_key?"),D(c,"indices","indexes"),D(c,"key","index"),D(c,"key?","has_key?"),D(c,"member?","has_key?"),D(c,"size","length"),D(c,"store","[]="),D(c,"to_s","inspect"),D(c,"update","merge!"),D(c,"value?","has_value?"),D(c,"values_at","indexes")}("::",Map,w)};Opal.modules["corelib/number"]=function(e){var k=e.klass,E=e.Opal,H=e.Kernel,x=e.def,ee=e.eqeqeq,Z=e.truthy,T=e.rb_gt,J=e.not,g=e.rb_lt,K=e.alias,$e=e.send2,W=e.find_super,G=e.send,O=e.rb_plus,M=e.rb_minus,v=e.eqeq,q=e.return_self,I=e.rb_divide,j=e.to_ary,z=e.rb_times,P=e.rb_le,m=e.rb_ge,A=e.return_val,D=e.const_set,S=e.top,w=[],o=e.nil,d=e.$$$;return e.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),S.$require("corelib/numeric"),function(N,h,l){var c=k(N,h,"Number");E.$bridge(Number,c),e.prop(c.$$prototype,"$$is_number",!0),c.$$is_number_class=!0;var X=new Map;(function(t,r){return x(t,"$allocate",function(){var u=this;return H.$raise(d("TypeError"),"allocator undefined for "+u.$name())}),e.udef(t,"$new"),o})(e.get_singleton_class(c)),x(c,"$coerce",function(r){var s=this;if(r===o)H.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float");else{if(r.$$is_string)return[H.$Float(r),s];if(r["$respond_to?"]("to_f"))return[E["$coerce_to!"](r,d("Float"),"to_f"),s];if(r.$$is_number)return[r,s];H.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float")}}),x(c,"$__id__",function(){var r=this;if(r|r===0)return r*2+1;if(X.has(r))return X.get(r);var s=e.uid();return X.set(r,s),s}),x(c,"$hash",function(){var r=this;return r|r===0?r.$__id__():r.toString().$hash()}),x(c,"$+",function(r){var s=this;return r.$$is_number?s+r:s.$__coerced__("+",r)}),x(c,"$-",function(r){var s=this;return r.$$is_number?s-r:s.$__coerced__("-",r)}),x(c,"$*",function(r){var s=this;return r.$$is_number?s*r:s.$__coerced__("*",r)}),x(c,"$/",function(r){var s=this;return r.$$is_number?s/r:s.$__coerced__("/",r)}),x(c,"$%",function(r){var s=this;if(r.$$is_number){if(r==-1/0)return r;if(r==0)H.$raise(d("ZeroDivisionError"),"divided by 0");else return r<0||s<0?(s%r+r)%r:s%r}else return s.$__coerced__("%",r)}),x(c,"$&",function(r){var s=this;return r.$$is_number?s&r:s.$__coerced__("&",r)}),x(c,"$|",function(r){var s=this;return r.$$is_number?s|r:s.$__coerced__("|",r)}),x(c,"$^",function(r){var s=this;return r.$$is_number?s^r:s.$__coerced__("^",r)}),x(c,"$<",function(r){var s=this;return r.$$is_number?s<r:s.$__coerced__("<",r)}),x(c,"$<=",function(r){var s=this;return r.$$is_number?s<=r:s.$__coerced__("<=",r)}),x(c,"$>",function(r){var s=this;return r.$$is_number?s>r:s.$__coerced__(">",r)}),x(c,"$>=",function(r){var s=this;return r.$$is_number?s>=r:s.$__coerced__(">=",r)});var y=function(t,r){return r.$$is_number?isNaN(t)||isNaN(r)?o:t>r?1:t<r?-1:0:t.$__coerced__("<=>",r)};x(c,"$<=>",function(r){var s=this;try{return y(s,r)}catch(u){if(e.rescue(u,[d("ArgumentError")]))try{return o}finally{e.pop_exception(u)}else throw u}}),x(c,"$<<",function(r){var s=this;return r=E["$coerce_to!"](r,d("Integer"),"to_int"),r>0?s<<r:s>>-r}),x(c,"$>>",function(r){var s=this;return r=E["$coerce_to!"](r,d("Integer"),"to_int"),r>0?s>>r:s<<-r}),x(c,"$[]",function(r){var s=this;return r=E["$coerce_to!"](r,d("Integer"),"to_int"),r<0?0:r>=32?s<0?1:0:s>>r&1}),x(c,"$+@",function(){var r=this;return+r}),x(c,"$-@",function(){var r=this;return-r}),x(c,"$~",function(){var r=this;return~r}),x(c,"$**",function(r){var s=this;return ee(d("Integer"),r)?J(d("Integer")["$==="](s))||Z(T(r,0))?Math.pow(s,r):d("Rational").$new(s,1)["$**"](r):Z(g(s,0))&&(ee(d("Float"),r)||ee(d("Rational"),r))?d("Complex").$new(s,0)["$**"](r.$to_f()):Z(r.$$is_number!=null)?Math.pow(s,r):s.$__coerced__("**",r)}),x(c,"$==",function(r){var s=this;return r.$$is_number?s.valueOf()===r.valueOf():r["$respond_to?"]("==")?r["$=="](s):!1}),K(c,"===","=="),x(c,"$abs",function(){var r=this;return Math.abs(r)}),x(c,"$abs2",function(){var r=this;return Math.abs(r*r)}),x(c,"$allbits?",function(r){var s=this;return r=E["$coerce_to!"](r,d("Integer"),"to_int"),(s&r)==r}),x(c,"$anybits?",function(r){var s=this;return r=E["$coerce_to!"](r,d("Integer"),"to_int"),(s&r)!==0}),x(c,"$angle",function(){var r=this;return Z(r["$nan?"]())?r:r==0?1/r>0?0:Math.PI:r<0?Math.PI:0}),x(c,"$bit_length",function(){var r=this;if(ee(d("Integer"),r)||H.$raise(d("NoMethodError").$new("undefined method `bit_length` for "+r+":Float","bit_length")),r===0||r===-1)return 0;for(var s=0,u=r<0?~r:r;u!=0;)s+=1,u>>>=1;return s}),x(c,"$ceil",function(r){var s=this;r==null&&(r=0);var u=s.$to_f();if(u%1===0&&r>=0)return u;var f=Math.pow(10,r),b=Math.ceil(u*f)/f;return u%1===0&&(b=Math.round(b)),b},-1),x(c,"$chr",function(r){var s=this;return e.enc(String.fromCharCode(s),r||"BINARY")},-1),x(c,"$denominator",function t(){var r=t.$$p||o,s=this;return t.$$p=null,Z(s["$nan?"]())||Z(s["$infinite?"]())?1:$e(s,W(s,"denominator",t,!1,!0),"denominator",[],r)}),x(c,"$downto",function t(r){var s=t.$$p||o,u=this;if(t.$$p=null,s===o)return G(u,"enum_for",["downto",r],function b(){var C=b.$$s==null?this:b.$$s;return ee(d("Numeric"),r)||H.$raise(d("ArgumentError"),"comparison of "+C.$class()+" with "+r.$class()+" failed"),Z(T(r,C))?0:O(M(C,r),1)},{$$s:u});r.$$is_number||H.$raise(d("ArgumentError"),"comparison of "+u.$class()+" with "+r.$class()+" failed");for(var f=u;f>=r;f--)s(f);return u}),x(c,"$equal?",function(r){var s=this,u=o;return Z(u=s["$=="](r))?u:isNaN(s)&&isNaN(r)}),x(c,"$even?",function(){var r=this;return r%2===0}),x(c,"$floor",function(r){var s=this;r==null&&(r=0);var u=s.$to_f();if(u%1===0&&r>=0)return u;var f=Math.pow(10,r),b=Math.floor(u*f)/f;return u%1===0&&(b=Math.round(b)),b},-1),x(c,"$gcd",function(r){var s=this;ee(d("Integer"),r)||H.$raise(d("TypeError"),"not an integer");for(var u=Math.abs(s),f=Math.abs(r);u>0;){var b=u;u=f%u,f=b}return f}),x(c,"$gcdlcm",function(r){var s=this;return[s.$gcd(r),s.$lcm(r)]}),x(c,"$integer?",function(){var r=this;return r%1===0}),x(c,"$is_a?",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,v(r,d("Integer"))&&ee(d("Integer"),u)||v(r,d("Integer"))&&ee(d("Integer"),u)||v(r,d("Float"))&&ee(d("Float"),u)?!0:$e(u,W(u,"is_a?",t,!1,!0),"is_a?",[r],s)}),x(c,"$instance_of?",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,v(r,d("Integer"))&&ee(d("Integer"),u)||v(r,d("Integer"))&&ee(d("Integer"),u)||v(r,d("Float"))&&ee(d("Float"),u)?!0:$e(u,W(u,"instance_of?",t,!1,!0),"instance_of?",[r],s)}),x(c,"$lcm",function(r){var s=this;return ee(d("Integer"),r)||H.$raise(d("TypeError"),"not an integer"),s==0||r==0?0:Math.abs(s*r/s.$gcd(r))}),x(c,"$next",function(){var r=this;return r+1}),x(c,"$nobits?",function(r){var s=this;return r=E["$coerce_to!"](r,d("Integer"),"to_int"),(s&r)==0}),x(c,"$nonzero?",function(){var r=this;return r==0?o:r}),x(c,"$numerator",function t(){var r=t.$$p||o,s=this;return t.$$p=null,Z(s["$nan?"]())||Z(s["$infinite?"]())?s:$e(s,W(s,"numerator",t,!1,!0),"numerator",[],r)}),x(c,"$odd?",function(){var r=this;return r%2!==0}),x(c,"$ord",q),x(c,"$pow",function(r,s){var u=this;return u==0&&H.$raise(d("ZeroDivisionError"),"divided by 0"),s===void 0?u["$**"](r):(d("Integer")["$==="](r)||H.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),r<0&&H.$raise(d("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),d("Integer")["$==="](s)||H.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),s===0&&H.$raise(d("ZeroDivisionError"),"divided by 0"),u["$**"](r)["$%"](s))},-2),x(c,"$pred",function(){var r=this;return r-1}),x(c,"$quo",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,ee(d("Integer"),u)?$e(u,W(u,"quo",t,!1,!0),"quo",[r],s):I(u,r)}),x(c,"$rationalize",function(r){var s,u,f=this,b=o,C=o;return arguments.length>1&&H.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),ee(d("Integer"),f)?d("Rational").$new(f,1):Z(f["$infinite?"]())?H.$raise(d("FloatDomainError"),"Infinity"):Z(f["$nan?"]())?H.$raise(d("FloatDomainError"),"NaN"):Z(r==null)?(u=d("Math").$frexp(f),s=j(u),b=s[0]==null?o:s[0],C=s[1]==null?o:s[1],b=d("Math").$ldexp(b,d(d("Float"),"MANT_DIG")).$to_i(),C=M(C,d(d("Float"),"MANT_DIG")),d("Rational").$new(z(2,b),1["$<<"](M(1,C))).$rationalize(d("Rational").$new(1,1["$<<"](M(1,C))))):f.$to_r().$rationalize(r)},-1),x(c,"$remainder",function(r){var s=this;return M(s,z(r,I(s,r).$truncate()))}),x(c,"$round",function(r){var s,u,f=this,b=o;if(ee(d("Integer"),f)){if(Z(r==null)||(ee(d("Float"),r)&&Z(r["$infinite?"]())&&H.$raise(d("RangeError"),"Infinity"),r=E["$coerce_to!"](r,d("Integer"),"to_int"),Z(g(r,d(d("Integer"),"MIN")))&&H.$raise(d("RangeError"),"out of bounds"),Z(r>=0)))return f;if(r=r["$-@"](),.415241*r-.125>f.$size())return 0;var C=Math.pow(10,r),L=Math.floor((Math.abs(f)+C/2)/C)*C;return f<0?-L:L}else{if(Z(f["$nan?"]())&&Z(r==null)&&H.$raise(d("FloatDomainError"),"NaN"),r=E["$coerce_to!"](r||0,d("Integer"),"to_int"),Z(P(r,0)))Z(f["$nan?"]())?H.$raise(d("RangeError"),"NaN"):Z(f["$infinite?"]())&&H.$raise(d("FloatDomainError"),"Infinity");else{if(v(r,0))return Math.round(f);if(Z(f["$nan?"]())||Z(f["$infinite?"]()))return f}return u=d("Math").$frexp(f),s=j(u),s[0]==null||s[0],b=s[1]==null?o:s[1],Z(m(r,M(O(d(d("Float"),"DIG"),2),Z(T(b,0))?I(b,4):M(I(b,3),1))))?f:Z(g(r,(Z(T(b,0))?O(I(b,3),1):I(b,4))["$-@"]()))?0:Math.round(f*Math.pow(10,r))/Math.pow(10,r)}},-1),x(c,"$times",function t(){var r=t.$$p||o,s=this;if(t.$$p=null,!Z(r))return G(s,"enum_for",["times"],function f(){var b=f.$$s==null?this:f.$$s;return b},{$$s:s});for(var u=0;u<s;u++)r(u);return s}),x(c,"$to_f",q),x(c,"$to_i",function(){var r=this;return r<0?Math.ceil(r):Math.floor(r)}),x(c,"$to_r",function(){var r,s,u=this,f=o,b=o;return ee(d("Integer"),u)?d("Rational").$new(u,1):(s=d("Math").$frexp(u),r=j(s),f=r[0]==null?o:r[0],b=r[1]==null?o:r[1],f=d("Math").$ldexp(f,d(d("Float"),"MANT_DIG")).$to_i(),b=M(b,d(d("Float"),"MANT_DIG")),z(f,d(d("Float"),"RADIX")["$**"](b)).$to_r())}),x(c,"$to_s",function(r){var s=this;return r==null&&(r=10),r=E["$coerce_to!"](r,d("Integer"),"to_int"),(Z(g(r,2))||Z(T(r,36)))&&H.$raise(d("ArgumentError"),"invalid radix "+r),v(s,0)&&Z(1/s===-1/0)?"-0.0":s.toString(r)},-1),x(c,"$truncate",function(r){var s=this;r==null&&(r=0);var u=s.$to_f();if(u%1===0&&r>=0)return u;var f=Math.pow(10,r),b=parseInt(u*f,10)/f;return u%1===0&&(b=Math.round(b)),b},-1),x(c,"$digits",function(r){var s=this;r==null&&(r=10),Z(g(s,0))&&H.$raise(d(d("Math"),"DomainError"),"out of domain"),r=E["$coerce_to!"](r,d("Integer"),"to_int"),Z(g(r,2))&&H.$raise(d("ArgumentError"),"invalid radix "+r),s!=parseInt(s)&&H.$raise(d("NoMethodError"),"undefined method `digits' for "+s.$inspect());var u=s,f=[];if(s==0)return[0];for(;u!=0;)f.push(u%r),u=parseInt(u/r,10);return f},-1),x(c,"$divmod",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,Z(u["$nan?"]())||Z(r["$nan?"]())?H.$raise(d("FloatDomainError"),"NaN"):Z(u["$infinite?"]())?H.$raise(d("FloatDomainError"),"Infinity"):$e(u,W(u,"divmod",t,!1,!0),"divmod",[r],s)}),x(c,"$upto",function t(r){var s=t.$$p||o,u=this;if(t.$$p=null,s===o)return G(u,"enum_for",["upto",r],function b(){var C=b.$$s==null?this:b.$$s;return ee(d("Numeric"),r)||H.$raise(d("ArgumentError"),"comparison of "+C.$class()+" with "+r.$class()+" failed"),Z(g(r,C))?0:O(M(r,C),1)},{$$s:u});r.$$is_number||H.$raise(d("ArgumentError"),"comparison of "+u.$class()+" with "+r.$class()+" failed");for(var f=u;f<=r;f++)s(f);return u}),x(c,"$zero?",function(){var r=this;return r==0}),x(c,"$size",A(4)),x(c,"$nan?",function(){var r=this;return isNaN(r)}),x(c,"$finite?",function(){var r=this;return r!=1/0&&r!=-1/0&&!isNaN(r)}),x(c,"$infinite?",function(){var r=this;return r==1/0?1:r==-1/0?-1:o}),x(c,"$positive?",function(){var r=this;return r!=0&&(r==1/0||1/r>0)}),x(c,"$negative?",function(){var r=this;return r==-1/0||1/r<0});function i(t){var r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}function a(t){return new DataView(t.buffer).getFloat64(0,!0)}function $(t){for(var r=i(t),s=0;s<r.length;s++)if(r[s]===255)r[s]=0;else{r[s]++;break}return a(r)}function n(t){for(var r=i(t),s=0;s<r.length;s++)if(r[s]===0)r[s]=255;else{r[s]--;break}return a(r)}return x(c,"$next_float",function(){var r=this;return v(r,d(d("Float"),"INFINITY"))?d(d("Float"),"INFINITY"):Z(r["$nan?"]())?d(d("Float"),"NAN"):Z(m(r,0))?$(Math.abs(r)):n(r)}),x(c,"$prev_float",function(){var r=this;return v(r,d(d("Float"),"INFINITY")["$-@"]())?d(d("Float"),"INFINITY")["$-@"]():Z(r["$nan?"]())?d(d("Float"),"NAN"):Z(T(r,0))?n(r):-$(Math.abs(r))}),K(c,"arg","angle"),K(c,"eql?","=="),K(c,"fdiv","/"),K(c,"inspect","to_s"),K(c,"kind_of?","is_a?"),K(c,"magnitude","abs"),K(c,"modulo","%"),K(c,"object_id","__id__"),K(c,"phase","angle"),K(c,"succ","next"),K(c,"to_int","to_i")}("::",d("Numeric")),D("::","Fixnum",d("Number")),function(N,h,l){var c=k(N,h,"Integer"),X=[c].concat(l);return c.$$is_number_class=!0,c.$$is_integer_class=!0,function(y,i){var a=[y].concat(i),$=e.$r(a);return x(y,"$allocate",function(){var t=this;return H.$raise(d("TypeError"),"allocator undefined for "+t.$name())}),e.udef(y,"$new"),x(y,"$sqrt",function(t){return t=E["$coerce_to!"](t,d("Integer"),"to_int"),t<0&&H.$raise(d(d("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(t),10)}),x(y,"$try_convert",function(t){var r=this;return $("Opal")["$coerce_to?"](t,r,"to_int")})}(e.get_singleton_class(c),X),D(c,"MAX",Math.pow(2,30)-1),D(c,"MIN",-Math.pow(2,30))}("::",d("Numeric"),w),function(N,h,l){var c=k(N,h,"Float");return c.$$is_number_class=!0,function(X,y){return x(X,"$allocate",function(){var a=this;return H.$raise(d("TypeError"),"allocator undefined for "+a.$name())}),e.udef(X,"$new"),x(X,"$===",function(a){return!!a.$$is_number})}(e.get_singleton_class(c)),D(c,"INFINITY",1/0),D(c,"MAX",Number.MAX_VALUE),D(c,"MIN",Number.MIN_VALUE),D(c,"NAN",NaN),D(c,"DIG",15),D(c,"MANT_DIG",53),D(c,"RADIX",2),D(c,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",d("Numeric"))};Opal.modules["corelib/range"]=function(e){var k=e.klass,E=e.truthy,H=e.Kernel,x=e.def,ee=e.not,Z=e.send2,T=e.find_super,J=e.lambda,g=e.send,K=e.rb_ge,$e=e.rb_gt,W=e.eqeq,G=e.rb_le,O=e.rb_lt,M=e.eqeqeq,v=e.return_ivar,q=e.rb_minus,I=e.Opal,j=e.rb_divide,z=e.rb_plus,P=e.rb_times,m=e.thrower,A=e.alias,D=e.top,S=[],w=e.nil,o=e.$$$;return e.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),D.$require("corelib/enumerable"),function(d,N,h){var l=k(d,N,"Range"),c=[l].concat(h),X=e.$r(c),y=l.$$prototype;y.begin=y.end=y.excl=w,l.$include(o("Enumerable")),l.$$prototype.$$is_range=!0,l.$attr_reader("begin","end"),x(l,"$initialize",function($,n,t){var r=this;return t==null&&(t=!1),E(r.begin)&&H.$raise(o("NameError"),"'initialize' called twice"),E($["$<=>"](n))||E($["$nil?"]())||E(n["$nil?"]())||H.$raise(o("ArgumentError"),"bad value for range"),r.begin=$,r.end=n,r.excl=t},-3),x(l,"$===",function($){var n=this;return E($.$$is_range)?!1:n["$cover?"]($)});function i(a){return a.begin===w||a.end===w||a.begin===-1/0||a.end===1/0||a.begin===1/0||a.end===-1/0}return x(l,"$count",function a(){var $=a.$$p||w,n=this;return a.$$p=null,ee($!==w)&&E(i(n))?o(o("Float"),"INFINITY"):Z(n,T(n,"count",a,!1,!0),"count",[],$)}),x(l,"$to_a",function a(){var $=a.$$p||w,n=this;return a.$$p=null,E(i(n))&&H.$raise(o("TypeError"),"cannot convert endless range to an array"),Z(n,T(n,"to_a",a,!1,!0),"to_a",[],$)}),x(l,"$cover?",function($){var n=this,t=w,r=w,s=w,u=w,f=w,b=w,C=w,L=w;return t=J(function(V,re){var ae=w;return V==null&&(V=w),re==null&&(re=w),E(ae=V["$<=>"](re))?ae:1}),E($.$$is_range)?(r=$.$begin(),s=$.$end(),u=$["$exclude_end?"](),E(n.begin)&&E(r["$nil?"]())||E(n.end)&&E(s["$nil?"]())||E(r)&&E(s)&&E(g(t.$call(r,s),"then",[],function(V){return V==null&&(V=w),E(u)?K(V,0):$e(V,0)}))||E(r)&&ee(n["$cover?"](r))?!1:(f=t.$call(n.end,s),W(n.excl,u)?K(f,0):E(n.excl)?$e(f,0):E(K(f,0))?!0:(b=$.$max(),E(C=b["$nil?"]()["$!"]())?G(t.$call(b,n.end),0):C))):E(n.begin)&&E($e(t.$call(n.begin,$),0))?!1:E(n.end["$nil?"]())?!0:(L=t.$call($,n.end),E(n.excl)?O(L,0):G(L,0))}),x(l,"$each",function a(){var $=a.$$p||w,n=this,t=w,r=w,s=w;if(a.$$p=null,$===w)return g(n,"enum_for",["each"],function b(){var C=b.$$s==null?this:b.$$s;return C.$size()},{$$s:n});var u,f;if(n.begin.$$is_number&&n.end.$$is_number){for((n.begin%1!==0||n.end%1!==0)&&H.$raise(o("TypeError"),"can't iterate from Float"),u=n.begin,f=n.end+(E(n.excl)?0:1);u<f;u++)$(u);return n}if(n.begin.$$is_string&&n.end.$$is_string)return g(n.begin,"upto",[n.end,n.excl],$.$to_proc()),n;for(t=n.begin,r=n.end,E(t["$respond_to?"]("succ"))||H.$raise(o("TypeError"),"can't iterate from "+t.$class());E(E(s=n.end["$nil?"]())?s:O(t["$<=>"](r),0));)e.yield1($,t),t=t.$succ();return ee(n.excl)&&W(t,r)&&e.yield1($,t),n}),x(l,"$eql?",function($){var n=this,t=w,r=w;return M(o("Range"),$)?E(t=E(r=n.excl["$==="]($["$exclude_end?"]()))?n.begin["$eql?"]($.$begin()):r)?n.end["$eql?"]($.$end()):t:!1}),x(l,"$exclude_end?",v("excl")),x(l,"$first",function a($){var n=a.$$p||w,t=this;return a.$$p=null,E(t.begin["$nil?"]())&&H.$raise(o("RangeError"),"cannot get the minimum of beginless range"),E($==null)?t.begin:Z(t,T(t,"first",a,!1,!0),"first",[$],n)},-1),x(l,"$include?",function a($){var n=a.$$p||w,t=this,r=w,s=w;if(a.$$p=null,E(t.begin.$$is_number||t.end.$$is_number)||E(t.begin["$is_a?"](o("Time")))||E(t.end["$is_a?"](o("Time")))||E(o("Integer").$try_convert(t.begin))||E(o("Integer").$try_convert(t.end)))return t["$cover?"]($);if(E(t.begin.$$is_string||t.end.$$is_string)){if(E(t.begin.$$is_string&&t.end.$$is_string))return g(t.begin.$upto(t.end,t.excl),"any?",[],function(f){return f==null&&(f=w),f["$=="]($)});if(E(t.begin["$nil?"]()))return r=$["$<=>"](t.end),E(s=r["$nil?"]()["$!"]())?E(t.excl)?O(r,0):G(r,0):s;if(E(t.end["$nil?"]()))return r=t.begin["$<=>"]($),E(s=r["$nil?"]()["$!"]())?G(r,0):s}return Z(t,T(t,"include?",a,!1,!0),"include?",[$],n)}),x(l,"$last",function($){var n=this;return E(n.end["$nil?"]())&&H.$raise(o("RangeError"),"cannot get the maximum of endless range"),E($==null)?n.end:n.$to_a().$last($)},-1),x(l,"$max",function a(){var $=a.$$p||w,n=this;return a.$$p=null,E(n.end["$nil?"]())?H.$raise(o("RangeError"),"cannot get the maximum of endless range"):$!==w?Z(n,T(n,"max",a,!1,!0),"max",[],$):ee(n.begin["$nil?"]())&&(E($e(n.begin,n.end))||E(n.excl)&&W(n.begin,n.end))?w:n.excl?n.end-1:n.end}),x(l,"$min",function a(){var $=a.$$p||w,n=this;return a.$$p=null,E(n.begin["$nil?"]())?H.$raise(o("RangeError"),"cannot get the minimum of beginless range"):$!==w?Z(n,T(n,"min",a,!1,!0),"min",[],$):ee(n.end["$nil?"]())&&(E($e(n.begin,n.end))||E(n.excl)&&W(n.begin,n.end))?w:n.begin}),x(l,"$size",function(){var $=this.begin,n=this.end;if(o("Numeric")["$==="]($)){if(o("Numeric")["$==="](n)){var t=q(n,$);return t<0?0:(this.excl||(t+=1),o("Float")["$==="]($)||o("Float")["$==="](n)?Math.floor(t):t)}else if(n===w)return 1/0}else if($===w&&o("Numeric")["$==="](n))return 1/0;return w}),x(l,"$step",function a($){var n=a.$$p||w,t=this,r=w,s=w;a.$$p=null;function u(){$==null?$=1:$.$$is_number||($=I["$coerce_to!"]($,o("Integer"),"to_int")),$<0?H.$raise(o("ArgumentError"),"step can't be negative"):$===0&&H.$raise(o("ArgumentError"),"step can't be 0")}function f(){if(!t.begin["$respond_to?"]("succ")||t.begin.$$is_string&&t.end.$$is_string)return w;if($%1===0)return j(t.$size(),$).$ceil();var b=t.begin,C=t.end,L=Math.abs,F=Math.floor,V=(L(b)+L(C)+L(C-b))/L($)*o(o("Float"),"EPSILON"),re;return V>.5&&(V=.5),t.excl?(re=F((C-b)/$-V),re*$+b<C&&re++):re=F((C-b)/$+V)+1,re}return n===w?(E(t.begin["$is_a?"](X("Numeric")))||E(t.begin["$nil?"]()))&&(E(t.end["$is_a?"](X("Numeric")))||E(t.end["$nil?"]()))&&ee(E(r=t.begin["$nil?"]())?t.end["$nil?"]():r)?o(o("Enumerator"),"ArithmeticSequence").$new(t,$,"step"):g(t,"enum_for",["step",$],function(){return u(),f()}):(u(),E(t.begin.$$is_number&&t.end.$$is_number)?(s=0,function(){try{var b=m("break");return g(t,"loop",[],function C(){var L=C.$$s==null?this:C.$$s,F=w;return L.begin==null&&(L.begin=w),L.excl==null&&(L.excl=w),L.end==null&&(L.end=w),F=z(L.begin,P(s,$)),E(L.excl)?E(K(F,L.end))&&b.$throw(w,C.$$is_lambda):E($e(F,L.end))&&b.$throw(w,C.$$is_lambda),e.yield1(n,F),s=z(s,1)},{$$s:t})}catch(C){if(C===b)return C.$v;throw C}finally{b.is_orphan=!0}}()):(t.begin.$$is_string&&t.end.$$is_string&&$%1!==0&&H.$raise(o("TypeError"),"no implicit conversion to float from string"),g(t,"each_with_index",[],function(C,L){return C==null&&(C=w),L==null&&(L=w),W(L["$%"]($),0)?e.yield1(n,C):w})),t)},-1),x(l,"$%",function($){var n=this;return E(n.begin["$is_a?"](X("Numeric")))&&E(n.end["$is_a?"](X("Numeric")))?o(o("Enumerator"),"ArithmeticSequence").$new(n,$,"%"):n.$step($)}),x(l,"$bsearch",function a(){var $=a.$$p||w,n=this;return a.$$p=null,$===w?n.$enum_for("bsearch"):(E(i(n)&&(n.begin.$$is_number||n.end.$$is_number))&&H.$raise(o("NotImplementedError"),"Can't #bsearch an infinite range"),E(n.begin.$$is_number&&n.end.$$is_number)||H.$raise(o("TypeError"),"can't do binary search for "+n.begin.$class()),g(n.$to_a(),"bsearch",[],$.$to_proc()))}),x(l,"$to_s",function(){var $=this,n=w;return""+(E(n=$.begin)?n:"")+(E($.excl)?"...":"..")+(E(n=$.end)?n:"")}),x(l,"$inspect",function(){var $=this,n=w;return""+(E(n=$.begin)?$.begin.$inspect():n)+(E($.excl)?"...":"..")+(E(n=$.end)?$.end.$inspect():n)}),x(l,"$marshal_load",function($){var n=this;return n.begin=$["$[]"]("begin"),n.end=$["$[]"]("end"),n.excl=$["$[]"]("excl")}),x(l,"$hash",function(){var $=this;return[o("Range"),$.begin,$.end,$.excl].$hash()}),A(l,"==","eql?"),A(l,"member?","include?")}("::",null,S)};Opal.modules["corelib/proc"]=function(e){var k=e.slice,E=e.each_ivar,H=e.klass,x=e.truthy,ee=e.Kernel,Z=e.defs,T=e.def,J=e.send,g=e.to_a,K=e.return_self,$e=e.ensure_kwargs,W=e.hash_get,G=e.Opal,O=e.alias,M=e.nil,v=e.$$$;return e.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(q,I){var j=H(q,I,"Proc");e.prop(j.$$prototype,"$$is_proc",!0),e.prop(j.$$prototype,"$$is_lambda",!1),Z(j,"$new",function m(){var A=m.$$p||M;return m.$$p=null,x(A)||ee.$raise(v("ArgumentError"),"tried to create a Proc object without a block"),A});function z(m,A){if(m.$$ret)try{return m.apply(null,A)}catch(D){if(D===m.$$ret)return D.$v;throw D}else return m.apply(null,A)}function P(m,A){if(m.$$brk)try{return e.yieldX(m,A)}catch(D){if(D===m.$$brk)return D.$v;throw D}else return e.yieldX(m,A)}return T(j,"$call",function m(A){var D=m.$$p||M,S,w,o=this;return m.$$p=null,S=k(arguments),w=S,D!==M&&(o.$$p=D),o.$$is_lambda?z(o,w):P(o,w)},-1),T(j,"$>>",function m(A){m.$$p;var D=this;return m.$$p=null,J(ee,"proc",[],function S(w){var o=S.$$p||M,d,N,h=S.$$s==null?this:S.$$s,l=M;return S.$$p=null,d=k(arguments),N=d,l=J(h,"call",g(N),o.$to_proc()),A.$call(l)},{$$arity:-1,$$s:D})}),T(j,"$<<",function m(A){m.$$p;var D=this;return m.$$p=null,J(ee,"proc",[],function S(w){var o=S.$$p||M,d,N,h=S.$$s==null?this:S.$$s,l=M;return S.$$p=null,d=k(arguments),N=d,l=J(A,"call",g(N),o.$to_proc()),h.$call(l)},{$$arity:-1,$$s:D})}),T(j,"$to_proc",K),T(j,"$lambda?",function(){var A=this;return!!A.$$is_lambda}),T(j,"$arity",function(){var A=this;return A.$$is_curried?-1:A.$$arity!=null?A.$$arity:A.length}),T(j,"$source_location",function(){var A=this,D=M;return A.$$is_curried?M:x(D=A.$$source_location)?D:M}),T(j,"$binding",function(){var A=this;return A.$$is_curried&&ee.$raise(v("ArgumentError"),"Can't create Binding"),x(v("::","Binding","skip_raise")?"constant":M)?v("Binding").$new(M,[],A.$$s,A.$source_location()):M}),T(j,"$parameters",function(A){var D,S=this;if(A=$e(A),D=W(A,"lambda"),S.$$is_curried)return[["rest"]];if(S.$$parameters){if(D??S.$$is_lambda)return S.$$parameters;var w=[],o,d;for(o=0,d=S.$$parameters.length;o<d;o++){var N=S.$$parameters[o];N[0]==="req"&&(N=["opt",N[1]]),w.push(N)}return w}else return[]},-1),T(j,"$curry",function(A){var D=this;A===void 0?A=D.length:(A=G["$coerce_to!"](A,v("Integer"),"to_int"),D.$$is_lambda&&A!==D.length&&ee.$raise(v("ArgumentError"),"wrong number of arguments ("+A+" for "+D.length+")"));function S(){var w=k(arguments),o=w.length,d;return o>A&&D.$$is_lambda&&!D.$$is_curried&&ee.$raise(v("ArgumentError"),"wrong number of arguments ("+o+" for "+A+")"),o>=A?D.$call.apply(D,w):(d=function(){return S.apply(null,w.concat(k(arguments)))},d.$$is_lambda=D.$$is_lambda,d.$$is_curried=!0,d)}return S.$$is_lambda=D.$$is_lambda,S.$$is_curried=!0,S},-1),T(j,"$dup",function(){var A=this,D=A.$$original_proc||A,S=function(){return D.apply(this,arguments)};return E(A,function(w){S[w]=A[w]}),S}),O(j,"===","call"),O(j,"clone","dup"),O(j,"yield","call"),O(j,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(e){var k=e.klass,E=e.def,H=e.truthy,x=e.slice,ee=e.alias,Z=e.Kernel,T=e.send,J=e.to_a,g=e.nil,K=e.$$$;return e.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function($e,W){var G=k($e,W,"Method"),O=G.$$prototype;return O.method=O.receiver=O.owner=O.name=g,G.$attr_reader("owner","receiver","name"),E(G,"$initialize",function(v,q,I,j){var z=this;return z.receiver=v,z.owner=q,z.name=j,z.method=I}),E(G,"$arity",function(){var v=this;return v.method.$arity()}),E(G,"$parameters",function(){var v=this;return v.method.$$parameters}),E(G,"$source_location",function(){var v=this,q=g;return H(q=v.method.$$source_location)?q:["(eval)",0]}),E(G,"$comments",function(){var v=this,q=g;return H(q=v.method.$$comments)?q:[]}),E(G,"$call",function M(v){var q=M.$$p||g,I,j,z=this;return M.$$p=null,I=x(arguments),j=I,z.method.$$p=q,z.method.apply(z.receiver,j)},-1),E(G,"$curry",function(v){var q=this;return q.method.$curry(v)},-1),E(G,"$>>",function(v){var q=this;return q.method["$>>"](v)}),E(G,"$<<",function(v){var q=this;return q.method["$<<"](v)}),E(G,"$unbind",function(){var v=this;return K("UnboundMethod").$new(v.receiver.$class(),v.owner,v.method,v.name)}),E(G,"$to_proc",function(){var v=this,q=v.$call.bind(v);return q.$$unbound=v.method,q.$$is_lambda=!0,q.$$arity=v.method.$$arity==null?v.method.length:v.method.$$arity,q.$$parameters=v.method.$$parameters,q}),E(G,"$inspect",function(){var v=this;return"#<"+v.$class()+": "+v.receiver.$class()+"#"+v.name+" (defined in "+v.owner+" in "+v.$source_location().$join(":")+")>"}),ee(G,"[]","call"),ee(G,"===","call")}("::",null),function($e,W){var G=k($e,W,"UnboundMethod"),O=G.$$prototype;return O.method=O.owner=O.name=O.source=g,G.$attr_reader("source","owner","name"),E(G,"$initialize",function(v,q,I,j){var z=this;return z.source=v,z.owner=q,z.method=I,z.name=j,z.$$method=I}),E(G,"$arity",function(){var v=this;return v.method.$arity()}),E(G,"$parameters",function(){var v=this;return v.method.$$parameters}),E(G,"$source_location",function(){var v=this,q=g;return H(q=v.method.$$source_location)?q:["(eval)",0]}),E(G,"$comments",function(){var v=this,q=g;return H(q=v.method.$$comments)?q:[]}),E(G,"$bind",function(v){var q=this;if(q.owner.$$is_module||e.is_a(v,q.owner))return K("Method").$new(v,q.owner,q.method,q.name);Z.$raise(K("TypeError"),"can't bind singleton method to a different class (expected "+v+".kind_of?("+q.owner+" to be true)")}),E(G,"$bind_call",function M(v,q){var I=M.$$p||g,j,z,P=this;return M.$$p=null,j=x(arguments,1),z=j,T(P.$bind(v),"call",J(z),I.$to_proc())},-2),E(G,"$inspect",function(){var v=this;return"#<"+v.$class()+": "+v.source+"#"+v.name+" (defined in "+v.owner+" in "+v.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(e){var k=e.gvars,E=e.const_set,H=e.Object,x=e.nil;return e.add_stubs("new"),k["&"]=k["~"]=k["`"]=k["'"]=x,k.LOADED_FEATURES=k['"']=e.loaded_features,k.LOAD_PATH=k[":"]=[],k["/"]=`
`,k[","]=x,E("::","ARGV",[]),E("::","ARGF",H.$new()),E("::","ENV",new Map),k.VERBOSE=!1,k.DEBUG=!1,k.SAFE=0};Opal.modules["corelib/io"]=function(e){var k=e.klass,E=e.const_set,H=e.not,x=e.truthy,ee=e.def,Z=e.return_ivar,T=e.return_val,J=e.slice,g=e.Kernel,K=e.gvars,$e=e.send,W=e.to_a,G=e.rb_plus,O=e.neqeq,M=e.range,v=e.eqeq,q=e.to_ary,I=e.rb_gt,j=e.assign_ivar_val,z=e.alias,P,m=e.nil,A=e.$$$;e.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(S,w){var o=k(S,w,"IO"),d=o.$$prototype;return d.read_buffer=d.closed=m,E(o,"SEEK_SET",0),E(o,"SEEK_CUR",1),E(o,"SEEK_END",2),E(o,"SEEK_DATA",3),E(o,"SEEK_HOLE",4),E(o,"READABLE",1),E(o,"WRITABLE",4),o.$attr_reader("eof"),o.$attr_accessor("read_proc","sync","tty","write_proc"),ee(o,"$initialize",function(h,l){var c=this;return l==null&&(l="r"),c.fd=h,c.flags=l,c.eof=!1,x(l["$include?"]("r"))&&H(l["$match?"](/[wa+]/))?c.closed="write":x(l["$match?"](/[wa]/))&&H(l["$match?"](/[r+]/))?c.closed="read":m},-2),ee(o,"$fileno",Z("fd")),ee(o,"$tty?",function(){var h=this;return h.tty==!0}),ee(o,"$write",function(h){var l=this;return l.write_proc(h),h.$size()}),ee(o,"$flush",T(m)),ee(o,"$<<",function(h){var l=this;return l.$write(h),l}),ee(o,"$print",function(h){var l,c,X=this;K[","]==null&&(K[","]=m),l=J(arguments),c=l;for(var y=0,i=c.length;y<i;y++)c[y]=g.$String(c[y]);return X.$write(c.join(K[","])),m},-1),ee(o,"$puts",function(h){var l,c,X=this;l=J(arguments),c=l;var y;if(c.length===0)return X.$write(`
`),m;for(var i=0,a=c.length;i<a;i++)if(c[i].$$is_array){var $=c[i].$flatten();$.length>0&&$e(X,"puts",W($))}else c[i].$$is_string?y=c[i].valueOf():y=g.$String(c[i]),y.endsWith(`
`)||(y+=`
`),X.$write(y);return m},-1),ee(o,"$getc",function(){var h=this,l=m,c=m,X=m;h.read_buffer=x(l=h.read_buffer)?l:"",c="";do if(h.read_buffer=G(h.read_buffer,c),O(h.read_buffer,""))return X=h.read_buffer["$[]"](0),h.read_buffer=h.read_buffer["$[]"](M(1,-1,!1)),X;while(x(c=h.$sysread_noraise(1)));return m}),ee(o,"$getbyte",function(){var h,l=this;return h=l.$getc(),h===m||h==null?m:h.$ord()}),ee(o,"$readbyte",function(){var h=this;return h.$readchar().$ord()}),ee(o,"$readchar",function(){var h=this,l=m;return x(l=h.$getc())?l:g.$raise(A("EOFError"),"end of file reached")}),ee(o,"$readline",function(h){var l,c,X=this,y=m;return l=J(arguments),c=l,x(y=$e(X,"gets",W(c)))?y:g.$raise(A("EOFError"),"end of file reached")},-1),ee(o,"$gets",function(h,l,c){var X,y,i=this,a=m,$=m,n=m,t=m,r=m,s=m;K["/"]==null&&(K["/"]=m),h==null&&(h=!1),l==null&&(l=m),c==null&&(c=new Map),x(h.$$is_number)&&H(l)&&(X=[!1,h,l],h=X[0],l=X[1],c=X[2]),x(h.$$is_hash)&&H(l)&&v(c,new Map)?(X=[!1,m,h],h=X[0],l=X[1],c=X[2]):x(l.$$is_hash)&&v(c,new Map)&&(X=[h,m,l],h=X[0],l=X[1],c=X[2]),a=h,v(h,!1)&&(h=K["/"]),v(h,"")&&(h=/\r?\n\r?\n/),h=x($=h)?$:"",v(a,"")||(h=h.$to_str()),n=v(a,"")?2:h.$length(),v(h," ")&&(h=/ /),i.read_buffer=x($=i.read_buffer)?$:"",t="",r=m;do if(i.read_buffer=G(i.read_buffer,t),O(h,"")&&x(x(h.$$is_regexp)?i.read_buffer["$match?"](h):i.read_buffer["$include?"](h))){s=i.read_buffer,y=i.read_buffer.$split(h,2),X=q(y),r=X[0]==null?m:X[0],i.read_buffer=X[1]==null?m:X[1],O(r,s)&&(r=G(r,s["$[]"](r.$length(),n)));break}while(x(t=i.$sysread_noraise(v(h,"")?65536:1)));return x(r)||(X=[x($=i.read_buffer)?$:"",""],r=X[0],i.read_buffer=X[1],v(r,"")&&(r=m)),x(r)&&(x(l)&&(r=r["$[]"](e.Range.$new(0,l,!0)),i.read_buffer=G(r["$[]"](e.Range.$new(l,-1,!1)),i.read_buffer)),x(c["$[]"]("chomp"))&&(r=r.$sub(/\r?\n$/,"")),v(a,"")&&(r=r.$sub(/^[\r\n]+/,""))),v(a,!1)&&(K._=r),r},-1),ee(o,"$sysread",function(h){var l=this,c=m;return x(c=l.read_proc(h))?c:(l.eof=!0,g.$raise(A("EOFError"),"end of file reached"))}),ee(o,"$sysread_noraise",function(h){var l=this;try{return l.$sysread(h)}catch(c){if(e.rescue(c,[A("EOFError")]))try{return m}finally{e.pop_exception(c)}else throw c}}),ee(o,"$readpartial",function(h){var l,c=this,X=m,y=m,i=m;return c.read_buffer=x(X=c.read_buffer)?X:"",y=c.$sysread(h),l=[G(c.read_buffer,x(X=y)?X:""),""],i=l[0],c.read_buffer=l[1],v(i,"")&&(i=m),i}),ee(o,"$read",function(h){var l,c=this,X=m,y=m,i=m;h==null&&(h=m),c.read_buffer=x(X=c.read_buffer)?X:"",y="",i=m;do if(c.read_buffer=G(c.read_buffer,y),x(h)&&x(I(c.read_buffer.$length(),h)))return l=[c.read_buffer["$[]"](e.Range.$new(0,h,!0)),c.read_buffer["$[]"](e.Range.$new(h,-1,!1))],i=l[0],c.read_buffer=l[1],i;while(x(y=c.$sysread_noraise(x(X=h)?X:65536)));return l=[c.read_buffer,""],i=l[0],c.read_buffer=l[1],i},-1),ee(o,"$readlines",function(h){var l=this;return K["/"]==null&&(K["/"]=m),h==null&&(h=K["/"]),l.$each_line(h).$to_a()},-1),ee(o,"$each",function N(h,l){var c=N.$$p||m,X,y,i,a=this,$=m;if(K["/"]==null&&(K["/"]=m),N.$$p=null,X=J(arguments),X.length>0&&(y=X.shift()),y==null&&(y=K["/"]),i=X,c===m)return $e(a,"enum_for",["each",y].concat(W(i)));for(;x($=$e(a,"gets",[y].concat(W(i))));)e.yield1(c,$);return a},-1),ee(o,"$each_byte",function N(){var h=N.$$p||m,l=this,c=m;if(N.$$p=null,h===m)return l.$enum_for("each_byte");for(;x(c=l.$getbyte());)e.yield1(h,c);return l}),ee(o,"$each_char",function N(){var h=N.$$p||m,l=this,c=m;if(N.$$p=null,h===m)return l.$enum_for("each_char");for(;x(c=l.$getc());)e.yield1(h,c);return l}),ee(o,"$close",j("closed","both")),ee(o,"$close_read",function(){var h=this;return v(h.closed,"write")?h.closed="both":h.closed="read"}),ee(o,"$close_write",function(){var h=this;return v(h.closed,"read")?h.closed="both":h.closed="write"}),ee(o,"$closed?",function(){var h=this;return h.closed["$=="]("both")}),ee(o,"$closed_read?",function(){var h=this,l=m;return x(l=h.closed["$=="]("read"))?l:h.closed["$=="]("both")}),ee(o,"$closed_write?",function(){var h=this,l=m;return x(l=h.closed["$=="]("write"))?l:h.closed["$=="]("both")}),ee(o,"$check_writable",function(){var h=this;return x(h["$closed_write?"]())?g.$raise(A("IOError"),"not opened for writing"):m}),ee(o,"$check_readable",function(){var h=this;return x(h["$closed_read?"]())?g.$raise(A("IOError"),"not opened for reading"):m}),z(o,"each_line","each"),z(o,"eof?","eof")}("::",null),E("::","STDIN",K.stdin=A("IO").$new(0,"r")),E("::","STDOUT",K.stdout=A("IO").$new(1,"w")),E("::","STDERR",K.stderr=A("IO").$new(2,"w"));var D=e.global.console;return A("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(S){process.stdout.write(S)}:function(S){D.log(S)}),A("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(S){process.stderr.write(S)}:function(S){D.warn(S)}),P=[function(S){var w=prompt();return w!==null?w+`
`:m}],$e(A("STDIN"),"read_proc=",P),P[P.length-1]};Opal.modules["opal/regexp_anchors"]=function(e){var k=e.module,E=e.const_set,H=[];e.nil;var x=e.$$$;return e.add_stubs("new"),function(ee,Z){var T=k(ee,"Opal"),J=[T].concat(Z),g=e.$r(J);return E(T,"REGEXP_START","^"),E(T,"REGEXP_END","$"),E(T,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),E(T,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),E(T,"INLINE_IDENTIFIER_REGEXP",g("Regexp").$new("[^"+x(T,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+x(T,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),E(T,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),E(T,"CONST_NAME_REGEXP",g("Regexp").$new(""+x(T,"REGEXP_START")+"(::)?[A-Z][^"+x(T,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+x(T,"REGEXP_END")))}(H[0],H)};Opal.modules["opal/mini"]=function(e){var k=e.Object;return e.nil,e.add_stubs("require"),k.$require("opal/base"),k.$require("corelib/nil"),k.$require("corelib/boolean"),k.$require("corelib/string"),k.$require("corelib/comparable"),k.$require("corelib/enumerable"),k.$require("corelib/enumerator"),k.$require("corelib/array"),k.$require("corelib/hash"),k.$require("corelib/number"),k.$require("corelib/range"),k.$require("corelib/proc"),k.$require("corelib/method"),k.$require("corelib/regexp"),k.$require("corelib/variables"),k.$require("corelib/io"),k.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(e){var k=e.coerce_to,E=e.module,H=e.slice,x=e.truthy,ee=e.eqeq,Z=e.Opal,T=e.Kernel,J=e.gvars,g=e.def,K=e.alias,$e=e.nil,W=e.$$$;return e.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(G){var O=E(G,"Kernel");return g(O,"$format",function(v,q){var I,j,z=$e;J.DEBUG==null&&(J.DEBUG=$e),I=H(arguments,1),j=I,ee(j.$length(),1)&&x(j["$[]"](0)["$respond_to?"]("to_ary"))&&(z=Z["$coerce_to?"](j["$[]"](0),W("Array"),"to_ary"),x(z["$nil?"]())||(j=z.$to_a()));var P="",m=0,A,D,S=v.length,w,o,d,N,h,l,c,X,y,i,a,$,n,t=1,r=0,s,u=0,f=1,b=2,C=4,L=8,F=16,V=32,re=64,ae=128;function le(){s&V&&T.$raise(W("ArgumentError"),"flag after width"),s&ae&&T.$raise(W("ArgumentError"),"flag after precision")}function _e(){s&V&&T.$raise(W("ArgumentError"),"width given twice"),s&ae&&T.$raise(W("ArgumentError"),"width after precision")}function de(R){return R>=j.length&&T.$raise(W("ArgumentError"),"too few arguments"),j[R]}function ge(){switch(r){case-1:T.$raise(W("ArgumentError"),"unnumbered("+t+") mixed with numbered");case-2:T.$raise(W("ArgumentError"),"unnumbered("+t+") mixed with named")}return r=t++,de(r-1)}function ve(R){return r>0&&T.$raise(W("ArgumentError"),"numbered("+R+") after unnumbered("+r+")"),r===-2&&T.$raise(W("ArgumentError"),"numbered("+R+") after named"),R<1&&T.$raise(W("ArgumentError"),"invalid index - "+R+"$"),r=-1,de(R-1)}function me(){return n===void 0?ge():n}function be(R){for(var B,Y="";;D++){if(D===S&&T.$raise(W("ArgumentError"),"malformed format string - %*[0-9]"),v.charCodeAt(D)<48||v.charCodeAt(D)>57)return D--,B=parseInt(Y,10)||0,B>2147483647&&T.$raise(W("ArgumentError"),""+R+" too big"),B;Y+=v.charAt(D)}}function ie(R){var B,Y=be(R);return v.charAt(D+1)==="$"?(D++,B=ve(Y)):B=ge(),B.$to_int()}for(D=v.indexOf("%");D!==-1;D=v.indexOf("%",D)){switch(o=void 0,s=u,N=-1,h=-1,n=void 0,A=D,D++,v.charAt(D)){case"%":m=D;case"":case`
`:case"\0":D++;continue}e:for(;D<S;D++)switch(v.charAt(D)){case" ":le(),s|=F;continue e;case"#":le(),s|=f;continue e;case"+":le(),s|=C;continue e;case"-":le(),s|=b;continue e;case"0":le(),s|=L;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(l=be("width"),v.charAt(D+1)==="$"){if(D+2===S){o="%",D++;break e}n!==void 0&&T.$raise(W("ArgumentError"),"value given twice - %"+l+"$"),n=ve(l),D++}else _e(),s|=V,N=l;continue e;case"<":case"{":for(X=v.charAt(D)==="<"?">":"}",c="",D++;;D++){if(D===S&&T.$raise(W("ArgumentError"),"malformed name - unmatched parenthesis"),v.charAt(D)===X){if(r>0&&T.$raise(W("ArgumentError"),"named "+c+" after unnumbered("+r+")"),r===-1&&T.$raise(W("ArgumentError"),"named "+c+" after numbered"),r=-2,(j[0]===void 0||!j[0].$$is_hash)&&T.$raise(W("ArgumentError"),"one hash required"),n=j[0].$fetch(c),X===">")continue e;if(o=n.toString(),h!==-1&&(o=o.slice(0,h)),s&b)for(;o.length<N;)o=o+" ";else for(;o.length<N;)o=" "+o;break e}c+=v.charAt(D)}case"*":D++,_e(),s|=V,N=ie("width"),N<0&&(s|=b,N=-N);continue e;case".":if(s&ae&&T.$raise(W("ArgumentError"),"precision given twice"),s|=re|ae,h=0,D++,v.charAt(D)==="*"){D++,h=ie("precision"),h<0&&(s&=~re);continue e}h=be("precision");continue e;case"d":case"i":case"u":if(w=T.$Integer(me()),w>=0){for(o=w.toString();o.length<h;)o="0"+o;if(s&b)for((s&C||s&F)&&(o=(s&C?"+":" ")+o);o.length<N;)o=o+" ";else if(s&L&&h===-1){for(;o.length<N-(s&C||s&F?1:0);)o="0"+o;(s&C||s&F)&&(o=(s&C?"+":" ")+o)}else for((s&C||s&F)&&(o=(s&C?"+":" ")+o);o.length<N;)o=" "+o}else{for(o=(-w).toString();o.length<h;)o="0"+o;if(s&b)for(o="-"+o;o.length<N;)o=o+" ";else if(s&L&&h===-1){for(;o.length<N-1;)o="0"+o;o="-"+o}else for(o="-"+o;o.length<N;)o=" "+o}break e;case"b":case"B":case"o":case"x":case"X":switch(v.charAt(D)){case"b":case"B":y=2,i="0b",a=/^1+/,$="1";break;case"o":y=8,i="0",a=/^3?7+/,$="7";break;case"x":case"X":y=16,i="0x",a=/^f+/,$="f";break}if(w=T.$Integer(me()),w>=0){for(o=w.toString(y);o.length<h;)o="0"+o;if(s&b)for((s&C||s&F)&&(o=(s&C?"+":" ")+o),s&f&&w!==0&&(o=i+o);o.length<N;)o=o+" ";else if(s&L&&h===-1){for(;o.length<N-(s&C||s&F?1:0)-(s&f&&w!==0?i.length:0);)o="0"+o;s&f&&w!==0&&(o=i+o),(s&C||s&F)&&(o=(s&C?"+":" ")+o)}else for(s&f&&w!==0&&(o=i+o),(s&C||s&F)&&(o=(s&C?"+":" ")+o);o.length<N;)o=" "+o}else if(s&C||s&F){for(o=(-w).toString(y);o.length<h;)o="0"+o;if(s&b)for(s&f&&(o=i+o),o="-"+o;o.length<N;)o=o+" ";else if(s&L&&h===-1){for(;o.length<N-1-(s&f?2:0);)o="0"+o;s&f&&(o=i+o),o="-"+o}else for(s&f&&(o=i+o),o="-"+o;o.length<N;)o=" "+o}else{for(o=(w>>>0).toString(y).replace(a,$);o.length<h-2;)o=$+o;if(s&b)for(o=".."+o,s&f&&(o=i+o);o.length<N;)o=o+" ";else if(s&L&&h===-1){for(;o.length<N-2-(s&f?i.length:0);)o=$+o;o=".."+o,s&f&&(o=i+o)}else for(o=".."+o,s&f&&(o=i+o);o.length<N;)o=" "+o}v.charAt(D)===v.charAt(D).toUpperCase()&&(o=o.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(w=T.$Float(me()),w>=0||isNaN(w)){if(w===1/0)o="Inf";else switch(v.charAt(D)){case"f":o=w.toFixed(h===-1?6:h);break;case"e":case"E":o=w.toExponential(h===-1?6:h);break;case"g":case"G":o=w.toExponential(),d=parseInt(o.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(o=w.toPrecision(h===-1?s&f?6:void 0:h));break}if(s&b)for((s&C||s&F)&&(o=(s&C?"+":" ")+o);o.length<N;)o=o+" ";else if(s&L&&w!==1/0&&!isNaN(w)){for(;o.length<N-(s&C||s&F?1:0);)o="0"+o;(s&C||s&F)&&(o=(s&C?"+":" ")+o)}else for((s&C||s&F)&&(o=(s&C?"+":" ")+o);o.length<N;)o=" "+o}else{if(w===-1/0)o="Inf";else switch(v.charAt(D)){case"f":o=(-w).toFixed(h===-1?6:h);break;case"e":case"E":o=(-w).toExponential(h===-1?6:h);break;case"g":case"G":o=(-w).toExponential(),d=parseInt(o.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(o=(-w).toPrecision(h===-1?s&f?6:void 0:h));break}if(s&b)for(o="-"+o;o.length<N;)o=o+" ";else if(s&L&&w!==-1/0){for(;o.length<N-1;)o="0"+o;o="-"+o}else for(o="-"+o;o.length<N;)o=" "+o}v.charAt(D)===v.charAt(D).toUpperCase()&&w!==1/0&&w!==-1/0&&!isNaN(w)&&(o=o.toUpperCase()),o=o.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":T.$raise(W("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(w=me(),w["$respond_to?"]("to_ary")&&(w=w.$to_ary()[0]),w["$respond_to?"]("to_str")?o=w.$to_str():o=String.fromCharCode(k(w,W("Integer"),"to_int")),o.length!==1&&T.$raise(W("ArgumentError"),"%c requires a character"),s&b)for(;o.length<N;)o=o+" ";else for(;o.length<N;)o=" "+o;break e;case"p":if(o=me().$inspect(),h!==-1&&(o=o.slice(0,h)),s&b)for(;o.length<N;)o=o+" ";else for(;o.length<N;)o=" "+o;break e;case"s":if(o=me().$to_s(),h!==-1&&(o=o.slice(0,h)),s&b)for(;o.length<N;)o=o+" ";else for(;o.length<N;)o=" "+o;break e;default:T.$raise(W("ArgumentError"),"malformed format string - %"+v.charAt(D))}o===void 0&&T.$raise(W("ArgumentError"),"malformed format string - %"),P+=v.slice(m,A)+o,m=D+1}return J.DEBUG&&r>=0&&t<j.length&&T.$raise(W("ArgumentError"),"too many arguments for format string"),P+v.slice(m)},-2),K(O,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(e){var k=e.klass,E=e.rb_plus,H=e.truthy,x=e.send,ee=e.defs,Z=e.eqeq,T=e.def,J=e.return_ivar,g=e.return_val,K=e.slice,$e=e.Kernel,W=e.Opal,G=e.rb_lt,O,M=e.top,v=[],q=e.$r(v),I=e.nil,j=e.$$$;return e.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),M.$require("corelib/string"),function(z,P,m){var A=k(z,P,"Encoding"),D=[A].concat(m),S=A.$$prototype;return S.name=S.dummy=I,ee(A,"$register",function w(o,d){var N=w.$$p||I,h=this,l=I,c=I,X=I,y=I,i=I,a=I;return w.$$p=null,d==null&&(d=new Map),l=E([o],H(c=d["$[]"]("aliases"))?c:[]),X=H(c=d["$[]"]("ascii"))&&c,y=H(c=d["$[]"]("dummy"))&&c,H(d["$[]"]("inherits"))?(i=d["$[]"]("inherits").$clone(),i.$initialize(o,l,X,y)):i=h.$new(o,l,X,y),N!==I&&x(i,"instance_eval",[],N.$to_proc()),a=e.encodings,x(l,"each",[],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=I),t.$const_set(n.$tr("-","_"),i),a[n]=i},{$$s:h})},-2),ee(A,"$find",function(o){var d=this;return Z(o,"default_external")?d.$default_external():e.find_encoding(o)}),A.$singleton_class().$attr_accessor("default_external"),A.$attr_reader("name","names"),T(A,"$initialize",function(o,d,N,h){var l=this;return l.name=o,l.names=d,l.ascii=N,l.dummy=h}),T(A,"$ascii_compatible?",J("ascii")),T(A,"$dummy?",J("dummy")),T(A,"$binary?",g(!1)),T(A,"$to_s",J("name")),T(A,"$inspect",function(){var o=this;return"#<Encoding:"+o.name+(H(o.dummy)?" (dummy)":I)+">"}),T(A,"$charsize",function(o){for(var d=0,N=0,h=o.length;N<h;N++){var l=o.charCodeAt(N);l>=55296&&l<=56319||d++}return d}),T(A,"$each_char",function w(o){var d=w.$$p||I;w.$$p=null;for(var N="",h=0,l=o.length;h<l;h++){var c=o.charCodeAt(h),X=o.charAt(h);if(c>=56320&&c<=57343){N=X;continue}else c>=55296&&c<=56319&&(X=N+X);o.encoding.name!="UTF-8"&&(X=new String(X),X.encoding=o.encoding),e.yield1(d,X)}}),T(A,"$each_byte",function(o){return K(arguments),$e.$raise(j("NotImplementedError"))},-1),T(A,"$bytesize",function(o){return K(arguments),$e.$raise(j("NotImplementedError"))},-1),k("::",j("StandardError"),"EncodingError"),k("::",j("EncodingError"),"CompatibilityError"),k(D[0],j("EncodingError"),"UndefinedConversionError"),I}("::",null,v),x(j("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function z(){var P=z.$$s==null?this:z.$$s;return T(P,"$each_byte",function m(A){var D=m.$$p||I;m.$$p=null;for(var S=1/0,w,o=A.length,d=null,N=0;N<o;++N){if(w=A.charCodeAt(N),w>55295&&w<57344){if(!d){if(w>56319){(S-=3)>-1&&(e.yield1(D,239),e.yield1(D,191),e.yield1(D,189));continue}else if(N+1===o){(S-=3)>-1&&(e.yield1(D,239),e.yield1(D,191),e.yield1(D,189));continue}d=w;continue}if(w<56320){(S-=3)>-1&&(e.yield1(D,239),e.yield1(D,191),e.yield1(D,189)),d=w;continue}w=(d-55296<<10|w-56320)+65536}else d&&(S-=3)>-1&&(e.yield1(D,239),e.yield1(D,191),e.yield1(D,189));if(d=null,w<128){if((S-=1)<0)break;e.yield1(D,w)}else if(w<2048){if((S-=2)<0)break;e.yield1(D,w>>6|192),e.yield1(D,w&63|128)}else if(w<65536){if((S-=3)<0)break;e.yield1(D,w>>12|224),e.yield1(D,w>>6&63|128),e.yield1(D,w&63|128)}else if(w<1114112){if((S-=4)<0)break;e.yield1(D,w>>18|240),e.yield1(D,w>>12&63|128),e.yield1(D,w>>6&63|128),e.yield1(D,w&63|128)}}}),T(P,"$bytesize",function(A){return A.$bytes().$length()})},{$$s:M}),x(j("Encoding"),"register",["UTF-16LE"],function z(){var P=z.$$s==null?this:z.$$s;return T(P,"$each_byte",function m(A){var D=m.$$p||I;m.$$p=null;for(var S=0,w=A.length;S<w;S++){var o=A.charCodeAt(S);e.yield1(D,o&255),e.yield1(D,o>>8)}}),T(P,"$bytesize",function(A){return A.length*2})},{$$s:M}),x(j("Encoding"),"register",["UTF-16BE",new Map([["inherits",j(j("Encoding"),"UTF_16LE")]])],function z(){var P=z.$$s==null?this:z.$$s;return T(P,"$each_byte",function m(A){var D=m.$$p||I;m.$$p=null;for(var S=0,w=A.length;S<w;S++){var o=A.charCodeAt(S);e.yield1(D,o>>8),e.yield1(D,o&255)}})},{$$s:M}),x(j("Encoding"),"register",["UTF-32LE"],function z(){var P=z.$$s==null?this:z.$$s;return T(P,"$each_byte",function m(A){var D=m.$$p||I;m.$$p=null;for(var S=0,w=A.length;S<w;S++){var o=A.charCodeAt(S);e.yield1(D,o&255),e.yield1(D,o>>8),e.yield1(D,0),e.yield1(D,0)}}),T(P,"$bytesize",function(A){return A.length*4})},{$$s:M}),x(j("Encoding"),"register",["UTF-32BE",new Map([["inherits",j(j("Encoding"),"UTF_32LE")]])],function z(){var P=z.$$s==null?this:z.$$s;return T(P,"$each_byte",function m(A){var D=m.$$p||I;m.$$p=null;for(var S=0,w=A.length;S<w;S++){var o=A.charCodeAt(S);e.yield1(D,0),e.yield1(D,0),e.yield1(D,o>>8),e.yield1(D,o&255)}})},{$$s:M}),x(j("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function z(){var P=z.$$s==null?this:z.$$s;return T(P,"$each_char",function m(A){var D=m.$$p||I;m.$$p=null;for(var S=0,w=A.length;S<w;S++){var o=new String(A.charAt(S));o.encoding=A.encoding,e.yield1(D,o)}}),T(P,"$charsize",function(A){return A.length}),T(P,"$each_byte",function m(A){var D=m.$$p||I;m.$$p=null;for(var S=0,w=A.length;S<w;S++){var o=A.charCodeAt(S);e.yield1(D,o&255)}}),T(P,"$bytesize",function(A){return A.length}),T(P,"$binary?",g(!0))},{$$s:M}),j("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",j(j("Encoding"),"ASCII_8BIT")]])),j("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",j(j("Encoding"),"ASCII_8BIT")]])),function(z,P){var m=k(z,P,"String"),A=m.$$prototype;return A.internal_encoding=A.bytes=A.encoding=I,m.$attr_reader("encoding"),m.$attr_reader("internal_encoding"),e.prop(String.prototype,"bytes",I),e.prop(String.prototype,"encoding",j(j("Encoding"),"UTF_8")),e.prop(String.prototype,"internal_encoding",j(j("Encoding"),"UTF_8")),T(m,"$b",function(){var S=this;return S.$dup().$force_encoding("binary")}),T(m,"$bytesize",function(){var S=this;return S.internal_encoding.$bytesize(S)}),T(m,"$each_byte",function D(){var S=D.$$p||I,w=this;return D.$$p=null,S===I?x(w,"enum_for",["each_byte"],function o(){var d=o.$$s==null?this:o.$$s;return d.$bytesize()},{$$s:w}):(x(w.internal_encoding,"each_byte",[w],S.$to_proc()),w)}),T(m,"$bytes",function(){var S=this,w=I;return typeof S=="string"?new String(S).$each_byte().$to_a():(S.bytes=H(w=S.bytes)?w:S.$each_byte().$to_a(),S.bytes.$dup())}),T(m,"$each_char",function D(){var S=D.$$p||I,w=this;return D.$$p=null,S===I?x(w,"enum_for",["each_char"],function o(){var d=o.$$s==null?this:o.$$s;return d.$length()},{$$s:w}):(x(w.encoding,"each_char",[w],S.$to_proc()),w)}),T(m,"$chars",function D(){var S=D.$$p||I,w=this;return D.$$p=null,H(S)?x(w,"each_char",[],S.$to_proc()):w.$each_char().$to_a()}),T(m,"$each_codepoint",function D(){var S=D.$$p||I,w=this;if(D.$$p=null,S===I)return w.$enum_for("each_codepoint");for(var o=0,d=w.length;o<d;o++)e.yield1(S,w.codePointAt(o));return w}),T(m,"$codepoints",function D(){var S=D.$$p||I,w=this;return D.$$p=null,S!==I?x(w,"each_codepoint",[],S.$to_proc()):w.$each_codepoint().$to_a()}),T(m,"$encode",function(S){var w=this;return e.enc(w,S)}),T(m,"$force_encoding",function(S){var w=this,o=w;return S===o.encoding||(S=W["$coerce_to!"](S,j("String"),"to_s"),S=j("Encoding").$find(S),S===o.encoding)||(o=e.set_encoding(o,S)),o}),T(m,"$getbyte",function(S){var w=this,o=I;return o=w.$bytes(),S=W["$coerce_to!"](S,j("Integer"),"to_int"),H(G(o.$length(),S))?I:o["$[]"](S)}),T(m,"$initialize_copy",function(S){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),T(m,"$valid_encoding?",g(!0))}("::",null),O=[j(q("Encoding"),"UTF_8")],x(j("Encoding"),"default_external=",O),O[O.length-1]};Opal.modules["corelib/math"]=function(e){var k=e.type_error,E=e.module,H=e.const_set,x=e.Class,ee=e.slice,Z=e.Kernel,T=e.defs,J=e.truthy,g=e.send,K=e.def,$e=e.rb_minus,W=e.eqeqeq,G=e.rb_divide,O=[],M=e.nil,v=e.$$$;return e.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(q,I){var j=E(q,"Math"),z=[j].concat(I),P=e.$r(z);return H(j,"E",Math.E),H(j,"PI",Math.PI),H(j,"DomainError",x.$new(v("StandardError"))),T(j,"$checked",function(A,D){var S,w;if(S=ee(arguments,1),w=S,isNaN(w[0])||w.length==2&&isNaN(w[1]))return NaN;var o=Math[A].apply(null,w);return isNaN(o)&&Z.$raise(P("DomainError"),'Numerical argument is out of domain - "'+A+'"'),o},-2),T(j,"$float!",function(A){try{return Z.$Float(A)}catch(D){if(e.rescue(D,[v("ArgumentError")]))try{return Z.$raise(k(A,v("Float")))}finally{e.pop_exception(D)}else throw D}}),T(j,"$integer!",function(A){try{return Z.$Integer(A)}catch(D){if(e.rescue(D,[v("ArgumentError")]))try{return Z.$raise(k(A,v("Integer")))}finally{e.pop_exception(D)}else throw D}}),j.$module_function(),J(typeof Math.erf<"u")||e.prop(Math,"erf",function(m){var A=.254829592,D=-.284496736,S=1.421413741,w=-1.453152027,o=1.061405429,d=.3275911,N=1;m<0&&(N=-1),m=Math.abs(m);var h=1/(1+d*m),l=1-((((o*h+w)*h+S)*h+D)*h+A)*h*Math.exp(-m*m);return N*l}),J(typeof Math.erfc<"u")||e.prop(Math,"erfc",function(m){var A=Math.abs(m),D=1/(.5*A+1),S=D*.17087277+-.82215223,w=D*S+1.48851587,o=D*w+-1.13520398,d=D*o+.27886807,N=D*d+-.18628806,h=D*N+.09678418,l=D*h+.37409196,c=D*l+1.00002368,X=D*c,y=-A*A-1.26551223+X,i=D*Math.exp(y);return m<0?2-i:i}),g(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function m(A){var D=m.$$s==null?this:m.$$s;return A==null&&(A=M),g(D,"define_method",[A],function(w){return w==null&&(w=M),v("Math").$checked(A,v("Math")["$float!"](w))})},{$$s:j}),K(j,"$atan2",function(A,D){return v("Math").$checked("atan2",v("Math")["$float!"](A),v("Math")["$float!"](D))}),K(j,"$hypot",function(A,D){return v("Math").$checked("hypot",v("Math")["$float!"](A),v("Math")["$float!"](D))}),K(j,"$frexp",function(A){if(A=P("Math")["$float!"](A),isNaN(A))return[NaN,0];var D=Math.floor(Math.log(Math.abs(A))/Math.log(2))+1,S=A/Math.pow(2,D);return[S,D]}),K(j,"$gamma",function(A){A=P("Math")["$float!"](A);var D,S,w,o,d,N,h,l,c,X=4.7421875,y=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(A))return NaN;if(A===0&&1/A<0)return-1/0;if((A===-1||A===-1/0)&&Z.$raise(P("DomainError"),'Numerical argument is out of domain - "gamma"'),P("Integer")["$==="](A)){if(A<=0)return isFinite(A)?1/0:NaN;if(A>171)return 1/0;for(o=A-2,d=A-1;o>1;)d*=o,o--;return d==0&&(d=1),d}if(A<.5)return Math.PI/(Math.sin(Math.PI*A)*v("Math").$gamma($e(1,A)));if(A>=171.35)return 1/0;if(A>85)return N=A*A,h=N*A,l=h*A,c=l*A,Math.sqrt(2*Math.PI/A)*Math.pow(A/Math.E,A)*(1+1/(12*A)+1/(288*N)-139/(51840*h)-571/(2488320*l)+163879/(209018880*c)+5246819/(75246796800*c*A));for(A-=1,w=y[0],D=1;D<y.length;++D)w+=y[D]/(A+D);return S=A+X+.5,Math.sqrt(2*Math.PI)*Math.pow(S,A+.5)*Math.exp(-S)*w}),K(j,"$ldexp",function(A,D){return A=P("Math")["$float!"](A),D=P("Math")["$integer!"](D),isNaN(D)&&Z.$raise(v("RangeError"),"float NaN out of range of integer"),A*Math.pow(2,D)}),K(j,"$lgamma",function(A){return A==-1?[1/0,1]:[Math.log(Math.abs(v("Math").$gamma(A))),v("Math").$gamma(A)<0?-1:1]}),K(j,"$log",function(A,D){return W(v("String"),A)&&Z.$raise(k(A,v("Float"))),J(D==null)?v("Math").$checked("log",v("Math")["$float!"](A)):(W(v("String"),D)&&Z.$raise(k(D,v("Float"))),G(v("Math").$checked("log",v("Math")["$float!"](A)),v("Math").$checked("log",v("Math")["$float!"](D))))},-2),K(j,"$log10",function(A){return W(v("String"),A)&&Z.$raise(k(A,v("Float"))),v("Math").$checked("log10",v("Math")["$float!"](A))}),K(j,"$log2",function(A){return W(v("String"),A)&&Z.$raise(k(A,v("Float"))),v("Math").$checked("log2",v("Math")["$float!"](A))}),K(j,"$tan",function(A){return A=v("Math")["$float!"](A),J(A["$infinite?"]())?v(v("Float"),"NAN"):v("Math").$checked("tan",v("Math")["$float!"](A))})}("::",O)};Opal.modules["corelib/complex/base"]=function(e){var k=e.module,E=e.truthy,H=e.def,x=e.klass,ee=[],Z=e.nil;return e.add_stubs("new,from_string"),function(T,J){var g=k(T,"Kernel"),K=[g].concat(J),$e=e.$r(K);return H(g,"$Complex",function(G,O){return O==null&&(O=Z),E(O)?$e("Complex").$new(G,O):$e("Complex").$new(G,0)},-2)}("::",ee),function(T,J,g){var K=x(T,J,"String"),$e=[K].concat(g),W=e.$r($e);return H(K,"$to_c",function(){var O=this;return W("Complex").$from_string(O)})}("::",null,ee)};Opal.modules["corelib/complex"]=function(e){var k=e.klass,E=e.truthy,H=e.eqeqeq,x=e.Kernel,ee=e.defs,Z=e.rb_times,T=e.def,J=e.rb_plus,g=e.rb_minus,K=e.rb_divide,$e=e.eqeq,W=e.to_ary,G=e.rb_gt,O=e.neqeq,M=e.return_val,v=e.const_set,q=e.alias,I=e.top,j=[],z=e.nil,P=e.$$$;return e.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),I.$require("corelib/numeric"),I.$require("corelib/complex/base"),function(m,A,D){var S=k(m,A,"Complex"),w=[S].concat(D),o=e.$r(w),d=S.$$prototype;return d.real=d.imag=z,ee(S,"$rect",function(h,l){var c=this;return l==null&&(l=0),H(P("Numeric"),h)&&E(h["$real?"]())&&H(P("Numeric"),l)&&E(l["$real?"]())||x.$raise(P("TypeError"),"not a real"),c.$new(h,l)},-2),ee(S,"$polar",function(h,l){var c=this;return l==null&&(l=0),H(P("Numeric"),h)&&E(h["$real?"]())&&H(P("Numeric"),l)&&E(l["$real?"]())||x.$raise(P("TypeError"),"not a real"),c.$new(Z(h,P("Math").$cos(l)),Z(h,P("Math").$sin(l)))},-2),S.$attr_reader("real","imag"),T(S,"$initialize",function(h,l){var c=this;return l==null&&(l=0),c.real=h,c.imag=l,c.$freeze()},-2),T(S,"$coerce",function(h){var l=this;return H(P("Complex"),h)?[h,l]:H(P("Numeric"),h)&&E(h["$real?"]())?[P("Complex").$new(h,0),l]:x.$raise(P("TypeError"),""+h.$class()+" can't be coerced into Complex")}),T(S,"$==",function(h){var l=this,c=z;return H(P("Complex"),h)?E(c=l.real["$=="](h.$real()))?l.imag["$=="](h.$imag()):c:H(P("Numeric"),h)&&E(h["$real?"]())?E(c=l.real["$=="](h))?l.imag["$=="](0):c:h["$=="](l)}),T(S,"$-@",function(){var h=this;return x.$Complex(h.real["$-@"](),h.imag["$-@"]())}),T(S,"$+",function(h){var l=this;return H(P("Complex"),h)?x.$Complex(J(l.real,h.$real()),J(l.imag,h.$imag())):H(P("Numeric"),h)&&E(h["$real?"]())?x.$Complex(J(l.real,h),l.imag):l.$__coerced__("+",h)}),T(S,"$-",function(h){var l=this;return H(P("Complex"),h)?x.$Complex(g(l.real,h.$real()),g(l.imag,h.$imag())):H(P("Numeric"),h)&&E(h["$real?"]())?x.$Complex(g(l.real,h),l.imag):l.$__coerced__("-",h)}),T(S,"$*",function(h){var l=this;return H(P("Complex"),h)?x.$Complex(g(Z(l.real,h.$real()),Z(l.imag,h.$imag())),J(Z(l.real,h.$imag()),Z(l.imag,h.$real()))):H(P("Numeric"),h)&&E(h["$real?"]())?x.$Complex(Z(l.real,h),Z(l.imag,h)):l.$__coerced__("*",h)}),T(S,"$/",function(h){var l=this;return H(P("Complex"),h)?H(P("Number"),l.real)&&E(l.real["$nan?"]())||H(P("Number"),l.imag)&&E(l.imag["$nan?"]())||H(P("Number"),h.$real())&&E(h.$real()["$nan?"]())||H(P("Number"),h.$imag())&&E(h.$imag()["$nan?"]())?P("Complex").$new(P(P("Float"),"NAN"),P(P("Float"),"NAN")):K(Z(l,h.$conj()),h.$abs2()):H(P("Numeric"),h)&&E(h["$real?"]())?x.$Complex(l.real.$quo(h),l.imag.$quo(h)):l.$__coerced__("/",h)}),T(S,"$**",function(h){var l,c,X=this,y=z,i=z,a=z,$=z,n=z,t=z,r=z,s=z,u=z,f=z,b=z;if($e(h,0))return P("Complex").$new(1,0);if(H(P("Complex"),h))return c=X.$polar(),l=W(c),y=l[0]==null?z:l[0],i=l[1]==null?z:l[1],a=h.$real(),$=h.$imag(),n=P("Math").$exp(g(Z(a,P("Math").$log(y)),Z($,i))),t=J(Z(i,a),Z($,P("Math").$log(y))),P("Complex").$polar(n,t);if(H(P("Integer"),h))if(E(G(h,0))){for(r=X,s=r,u=g(h,1);O(u,0);){for(c=u.$divmod(2),l=W(c),f=l[0]==null?z:l[0],b=l[1]==null?z:l[1];$e(b,0);)r=x.$Complex(g(Z(r.$real(),r.$real()),Z(r.$imag(),r.$imag())),Z(Z(2,r.$real()),r.$imag())),u=f,c=u.$divmod(2),l=W(c),f=l[0]==null?z:l[0],b=l[1]==null?z:l[1];s=Z(s,r),u=g(u,1)}return s}else return K(P("Rational").$new(1,1),X)["$**"](h["$-@"]());else return H(P("Float"),h)||H(P("Rational"),h)?(c=X.$polar(),l=W(c),y=l[0]==null?z:l[0],i=l[1]==null?z:l[1],P("Complex").$polar(y["$**"](h),Z(i,h))):X.$__coerced__("**",h)}),T(S,"$abs",function(){var h=this;return P("Math").$hypot(h.real,h.imag)}),T(S,"$abs2",function(){var h=this;return J(Z(h.real,h.real),Z(h.imag,h.imag))}),T(S,"$angle",function(){var h=this;return P("Math").$atan2(h.imag,h.real)}),T(S,"$conj",function(){var h=this;return x.$Complex(h.real,h.imag["$-@"]())}),T(S,"$denominator",function(){var h=this;return h.real.$denominator().$lcm(h.imag.$denominator())}),T(S,"$eql?",function(h){var l=this,c=z,X=z;return E(c=E(X=o("Complex")["$==="](h))?l.real.$class()["$=="](l.imag.$class()):X)?l["$=="](h):c}),T(S,"$fdiv",function(h){var l=this;return H(P("Numeric"),h)||x.$raise(P("TypeError"),""+h.$class()+" can't be coerced into Complex"),K(l,h)}),T(S,"$finite?",function(){var h=this,l=z;return E(l=h.real["$finite?"]())?h.imag["$finite?"]():l}),T(S,"$hash",function(){var h=this;return[P("Complex"),h.real,h.imag].$hash()}),T(S,"$infinite?",function(){var h=this,l=z;return E(l=h.real["$infinite?"]())?l:h.imag["$infinite?"]()}),T(S,"$inspect",function(){var h=this;return"("+h+")"}),T(S,"$numerator",function(){var h=this,l=z;return l=h.$denominator(),x.$Complex(Z(h.real.$numerator(),K(l,h.real.$denominator())),Z(h.imag.$numerator(),K(l,h.imag.$denominator())))}),T(S,"$polar",function(){var h=this;return[h.$abs(),h.$arg()]}),T(S,"$rationalize",function(h){var l=this;return arguments.length>1&&x.$raise(P("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),O(l.imag,0)&&x.$raise(P("RangeError"),"can't convert "+l+" into Rational"),l.$real().$rationalize(h)},-1),T(S,"$real?",M(!1)),T(S,"$rect",function(){var h=this;return[h.real,h.imag]}),T(S,"$to_f",function(){var h=this;return $e(h.imag,0)||x.$raise(P("RangeError"),"can't convert "+h+" into Float"),h.real.$to_f()}),T(S,"$to_i",function(){var h=this;return $e(h.imag,0)||x.$raise(P("RangeError"),"can't convert "+h+" into Integer"),h.real.$to_i()}),T(S,"$to_r",function(){var h=this;return $e(h.imag,0)||x.$raise(P("RangeError"),"can't convert "+h+" into Rational"),h.real.$to_r()}),T(S,"$to_s",function(){var h=this,l=z;return l=h.real.$inspect(),l=J(l,H(P("Number"),h.imag)&&E(h.imag["$nan?"]())||E(h.imag["$positive?"]())||E(h.imag["$zero?"]())?"+":"-"),l=J(l,h.imag.$abs().$inspect()),H(P("Number"),h.imag)&&(E(h.imag["$nan?"]())||E(h.imag["$infinite?"]()))&&(l=J(l,"*")),J(l,"i")}),v(w[0],"I",S.$new(0,1)),ee(S,"$from_string",function(h){var l=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;h.match(l);var c,X;function y(){return l.test(h)}function i(){var $=h.match(l),n=$[0];return h=h.slice(n.length),n.replace(/_/g,"")}function a(){if(y()){var $=parseFloat(i());if(h[0]==="/")if(h=h.slice(1),y()){var n=parseFloat(i());return x.$Rational($,n)}else return h="/"+h,$;else return $}else return null}return c=a(),c?(X=a(),X?x.$Complex(c,X):h[0]==="i"?x.$Complex(0,c):x.$Complex(c,0)):h[0]==="i"?x.$Complex(0,1):h[0]==="-"&&h[1]==="i"?x.$Complex(0,-1):h[0]==="+"&&h[1]==="i"?x.$Complex(0,1):x.$Complex(0,0)}),function(N,h){return q(N,"rectangular","rect")}(e.get_singleton_class(S)),q(S,"arg","angle"),q(S,"conjugate","conj"),q(S,"divide","/"),q(S,"imaginary","imag"),q(S,"magnitude","abs"),q(S,"phase","arg"),q(S,"quo","/"),q(S,"rectangular","rect"),e.udef(S,"$negative?"),e.udef(S,"$positive?"),e.udef(S,"$step"),z}("::",P("Numeric"),j)};Opal.modules["corelib/rational/base"]=function(e){var k=e.module,E=e.def,H=e.klass;e.nil;var x=e.$$$;return e.add_stubs("convert,from_string"),function(ee){var Z=k(ee,"Kernel");return E(Z,"$Rational",function(J,g){return g==null&&(g=1),x("Rational").$convert(J,g)},-2)}("::"),function(ee,Z){var T=H(ee,Z,"String");return E(T,"$to_r",function(){var g=this;return x("Rational").$from_string(g)})}("::",null)};Opal.modules["corelib/rational"]=function(e){var k=e.klass,E=e.eqeq,H=e.Kernel,x=e.truthy,ee=e.rb_lt,Z=e.rb_divide,T=e.defs,J=e.eqeqeq,g=e.not,K=e.Opal,$e=e.def,W=e.return_ivar,G=e.rb_minus,O=e.rb_times,M=e.rb_plus,v=e.rb_gt,q=e.rb_le,I=e.return_self,j=e.alias,z=e.top,P=e.nil,m=e.$$$;return e.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),z.$require("corelib/numeric"),z.$require("corelib/rational/base"),function(A,D){var S=k(A,D,"Rational"),w=S.$$prototype;return w.num=w.den=P,T(S,"$reduce",function(d,N){var h=this,l=P;if(d=d.$to_i(),N=N.$to_i(),E(N,0))H.$raise(m("ZeroDivisionError"),"divided by 0");else if(x(ee(N,0)))d=d["$-@"](),N=N["$-@"]();else if(E(N,1))return h.$new(d,N);return l=d.$gcd(N),h.$new(Z(d,l),Z(N,l))}),T(S,"$convert",function(d,N){var h=this;return(x(d["$nil?"]())||x(N["$nil?"]()))&&H.$raise(m("TypeError"),"cannot convert nil into Rational"),J(m("Integer"),d)&&J(m("Integer"),N)?h.$reduce(d,N):((J(m("Float"),d)||J(m("String"),d)||J(m("Complex"),d))&&(d=d.$to_r()),(J(m("Float"),N)||J(m("String"),N)||J(m("Complex"),N))&&(N=N.$to_r()),x(N["$equal?"](1))&&g(m("Integer")["$==="](d))?K["$coerce_to!"](d,m("Rational"),"to_r"):J(m("Numeric"),d)&&J(m("Numeric"),N)?Z(d,N):h.$reduce(d,N))}),$e(S,"$initialize",function(d,N){var h=this;return h.num=d,h.den=N,h.$freeze()}),$e(S,"$numerator",W("num")),$e(S,"$denominator",W("den")),$e(S,"$coerce",function(d){var N=this,h=P;return J(m("Rational"),h=d)?[d,N]:J(m("Integer"),h)?[d.$to_r(),N]:J(m("Float"),h)?[d,N.$to_f()]:P}),$e(S,"$==",function(d){var N=this,h=P,l=P;return J(m("Rational"),h=d)?x(l=N.num["$=="](d.$numerator()))?N.den["$=="](d.$denominator()):l:J(m("Integer"),h)?x(l=N.num["$=="](d))?N.den["$=="](1):l:J(m("Float"),h)?N.$to_f()["$=="](d):d["$=="](N)}),$e(S,"$<=>",function(d){var N=this,h=P;return J(m("Rational"),h=d)?G(O(N.num,d.$denominator()),O(N.den,d.$numerator()))["$<=>"](0):J(m("Integer"),h)?G(N.num,O(N.den,d))["$<=>"](0):J(m("Float"),h)?N.$to_f()["$<=>"](d):N.$__coerced__("<=>",d)}),$e(S,"$+",function(d){var N=this,h=P,l=P,c=P;return J(m("Rational"),h=d)?(l=M(O(N.num,d.$denominator()),O(N.den,d.$numerator())),c=O(N.den,d.$denominator()),H.$Rational(l,c)):J(m("Integer"),h)?H.$Rational(M(N.num,O(d,N.den)),N.den):J(m("Float"),h)?M(N.$to_f(),d):N.$__coerced__("+",d)}),$e(S,"$-",function(d){var N=this,h=P,l=P,c=P;return J(m("Rational"),h=d)?(l=G(O(N.num,d.$denominator()),O(N.den,d.$numerator())),c=O(N.den,d.$denominator()),H.$Rational(l,c)):J(m("Integer"),h)?H.$Rational(G(N.num,O(d,N.den)),N.den):J(m("Float"),h)?G(N.$to_f(),d):N.$__coerced__("-",d)}),$e(S,"$*",function(d){var N=this,h=P,l=P,c=P;return J(m("Rational"),h=d)?(l=O(N.num,d.$numerator()),c=O(N.den,d.$denominator()),H.$Rational(l,c)):J(m("Integer"),h)?H.$Rational(O(N.num,d),N.den):J(m("Float"),h)?O(N.$to_f(),d):N.$__coerced__("*",d)}),$e(S,"$/",function(d){var N=this,h=P,l=P,c=P;return J(m("Rational"),h=d)?(l=O(N.num,d.$denominator()),c=O(N.den,d.$numerator()),H.$Rational(l,c)):J(m("Integer"),h)?E(d,0)?Z(N.$to_f(),0):H.$Rational(N.num,O(N.den,d)):J(m("Float"),h)?Z(N.$to_f(),d):N.$__coerced__("/",d)}),$e(S,"$**",function(d){var N=this,h=P;return J(m("Integer"),h=d)?E(N,0)&&x(ee(d,0))?m(m("Float"),"INFINITY"):x(v(d,0))?H.$Rational(N.num["$**"](d),N.den["$**"](d)):x(ee(d,0))?H.$Rational(N.den["$**"](d["$-@"]()),N.num["$**"](d["$-@"]())):H.$Rational(1,1):J(m("Float"),h)?N.$to_f()["$**"](d):J(m("Rational"),h)?E(d,0)?H.$Rational(1,1):E(d.$denominator(),1)?x(ee(d,0))?H.$Rational(N.den["$**"](d.$numerator().$abs()),N.num["$**"](d.$numerator().$abs())):H.$Rational(N.num["$**"](d.$numerator()),N.den["$**"](d.$numerator())):E(N,0)&&x(ee(d,0))?H.$raise(m("ZeroDivisionError"),"divided by 0"):N.$to_f()["$**"](d):N.$__coerced__("**",d)}),$e(S,"$abs",function(){var d=this;return H.$Rational(d.num.$abs(),d.den.$abs())}),$e(S,"$ceil",function(d){var N=this;return d==null&&(d=0),E(d,0)?Z(N.num["$-@"](),N.den)["$-@"]().$ceil():N.$with_precision("ceil",d)},-1),$e(S,"$floor",function(d){var N=this;return d==null&&(d=0),E(d,0)?Z(N.num["$-@"](),N.den)["$-@"]().$floor():N.$with_precision("floor",d)},-1),$e(S,"$hash",function(){var d=this;return[m("Rational"),d.num,d.den].$hash()}),$e(S,"$inspect",function(){var d=this;return"("+d+")"}),$e(S,"$rationalize",function(d){var N=this;if(arguments.length>1&&H.$raise(m("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),d==null)return N;for(var h=d.$abs(),l=G(N,h),c=M(N,h),X=0,y=1,i=1,a=0,$,n,t,r,s;t=l.$ceil(),!q(t,c);)r=t-1,$=r*y+X,n=r*a+i,s=Z(1,G(c,r)),c=Z(1,G(l,r)),l=s,X=y,i=a,y=$,a=n;return H.$Rational(t*y+X,t*a+i)},-1),$e(S,"$round",function(d){var N=this,h=P,l=P,c=P;return d==null&&(d=0),E(d,0)?E(N.num,0)?0:E(N.den,1)?N.num:(h=M(O(N.num.$abs(),2),N.den),l=O(N.den,2),c=Z(h,l).$truncate(),x(ee(N.num,0))?c["$-@"]():c):N.$with_precision("round",d)},-1),$e(S,"$to_f",function(){var d=this;return Z(d.num,d.den)}),$e(S,"$to_i",function(){var d=this;return d.$truncate()}),$e(S,"$to_r",I),$e(S,"$to_s",function(){var d=this;return""+d.num+"/"+d.den}),$e(S,"$truncate",function(d){var N=this;return d==null&&(d=0),E(d,0)?x(ee(N.num,0))?N.$ceil():N.$floor():N.$with_precision("truncate",d)},-1),$e(S,"$with_precision",function(d,N){var h=this,l=P,c=P;return J(m("Integer"),N)||H.$raise(m("TypeError"),"not an Integer"),l=10["$**"](N),c=O(h,l),x(ee(N,1))?Z(c.$send(d),l).$to_i():H.$Rational(c.$send(d),l)}),T(S,"$from_string",function(d){var N=d.trimLeft(),h=/^[+-]?[\d_]+(\.[\d_]+)?/;N.match(h);var l,c;function X(){return h.test(N)}function y(){var i=N.match(h),a=i[0];return N=N.slice(a.length),a.replace(/_/g,"")}return X()?(l=parseFloat(y()),N[0]==="/"?(N=N.slice(1),X()?(c=parseFloat(y()),H.$Rational(l,c)):H.$Rational(l,1)):H.$Rational(l,1)):H.$Rational(0,1)}),j(S,"divide","/"),j(S,"quo","/")}("::",m("Numeric"))};Opal.modules["corelib/time"]=function(e){var k=e.slice,E=e.deny_frozen_access,H=e.klass,x=e.Kernel,ee=e.Opal,Z=e.defs,T=e.eqeqeq,J=e.def,g=e.truthy,K=e.rb_gt,$e=e.rb_lt,W=e.send,G=e.rb_plus,O=e.rb_divide,M=e.rb_minus,v=e.range,q=e.neqeq,I=e.rb_le,j=e.eqeq,z=e.alias,P=e.top,m=[],A=e.nil,D=e.$$$;return e.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),P.$require("corelib/comparable"),function(S,w,o){var d=H(S,w,"Time"),N=[d].concat(o),h=e.$r(N);d.$include(D("Comparable"));var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],X=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],y=["January","February","March","April","May","June","July","August","September","October","November","December"];Z(d,"$at",function($,n){var t;return D("Time")["$==="]($)?(n!==void 0&&x.$raise(D("TypeError"),"can't convert Time into an exact number"),t=new Date($.getTime()),t.timezone=$.timezone,t):($.$$is_number||($=ee["$coerce_to!"]($,D("Integer"),"to_int")),n===void 0?new Date($*1e3):(n.$$is_number||(n=ee["$coerce_to!"](n,D("Integer"),"to_int")),new Date($*1e3+n/1e3)))},-2);function i(a,$,n,t,r,s){if(a.$$is_string?a=parseInt(a,10):a=ee["$coerce_to!"](a,D("Integer"),"to_int"),$===A)$=1;else if(!$.$$is_number)if($["$respond_to?"]("to_str"))switch($=$.$to_str(),$.toLowerCase()){case"jan":$=1;break;case"feb":$=2;break;case"mar":$=3;break;case"apr":$=4;break;case"may":$=5;break;case"jun":$=6;break;case"jul":$=7;break;case"aug":$=8;break;case"sep":$=9;break;case"oct":$=10;break;case"nov":$=11;break;case"dec":$=12;break;default:$=$.$to_i()}else $=ee["$coerce_to!"]($,D("Integer"),"to_int");return($<1||$>12)&&x.$raise(D("ArgumentError"),"month out of range: "+$),$=$-1,n===A?n=1:n.$$is_string?n=parseInt(n,10):n=ee["$coerce_to!"](n,D("Integer"),"to_int"),(n<1||n>31)&&x.$raise(D("ArgumentError"),"day out of range: "+n),t===A?t=0:t.$$is_string?t=parseInt(t,10):t=ee["$coerce_to!"](t,D("Integer"),"to_int"),(t<0||t>24)&&x.$raise(D("ArgumentError"),"hour out of range: "+t),r===A?r=0:r.$$is_string?r=parseInt(r,10):r=ee["$coerce_to!"](r,D("Integer"),"to_int"),(r<0||r>59)&&x.$raise(D("ArgumentError"),"min out of range: "+r),s===A?s=0:s.$$is_number||(s.$$is_string?s=parseInt(s,10):s=ee["$coerce_to!"](s,D("Integer"),"to_int")),(s<0||s>60)&&x.$raise(D("ArgumentError"),"sec out of range: "+s),[a,$,n,t,r,s]}return Z(d,"$new",function($,n,t,r,s,u,f){var b=this;n==null&&(n=A),t==null&&(t=A),r==null&&(r=A),s==null&&(s=A),u==null&&(u=A),f==null&&(f=A);var C,L,F,V;return $===void 0?new Date:(C=i($,n,t,r,s,u),$=C[0],n=C[1],t=C[2],r=C[3],s=C[4],u=C[5],f===A?(L=new Date($,n,t,r,s,0,u*1e3),$<100&&L.setFullYear($),L):(F=b.$_parse_offset(f),V=new Date(Date.UTC($,n,t,r,s,0,u*1e3)),$<100&&V.setUTCFullYear($),L=new Date(V.getTime()-F*36e5),L.timezone=F,L))},-1),Z(d,"$_parse_offset",function($){var n;if($.$$is_string)if($=="UTC")n=0;else if(/^[+-]\d\d:[0-5]\d$/.test($)){var t,r,s;t=$[0],r=+($[1]+$[2]),s=+($[4]+$[5]),n=(t=="-"?-1:1)*(r+s/60)}else x.$raise(D("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+$);else $.$$is_number?n=$/3600:x.$raise(D("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return n}),Z(d,"$local",function($,n,t,r,s,u,f,b,C,L){n==null&&(n=A),t==null&&(t=A),r==null&&(r=A),s==null&&(s=A),u==null&&(u=A),f==null&&(f=A),b==null&&(b=A),C==null&&(C=A),L==null&&(L=A);var F,V;return arguments.length===10&&(F=k(arguments),$=F[5],n=F[4],t=F[3],r=F[2],s=F[1],u=F[0]),F=i($,n,t,r,s,u),$=F[0],n=F[1],t=F[2],r=F[3],s=F[4],u=F[5],V=new Date($,n,t,r,s,0,u*1e3),$<100&&V.setFullYear($),V},-2),Z(d,"$gm",function($,n,t,r,s,u,f,b,C,L){n==null&&(n=A),t==null&&(t=A),r==null&&(r=A),s==null&&(s=A),u==null&&(u=A),f==null&&(f=A),b==null&&(b=A),C==null&&(C=A),L==null&&(L=A);var F,V;return arguments.length===10&&(F=k(arguments),$=F[5],n=F[4],t=F[3],r=F[2],s=F[1],u=F[0]),F=i($,n,t,r,s,u),$=F[0],n=F[1],t=F[2],r=F[3],s=F[4],u=F[5],V=new Date(Date.UTC($,n,t,r,s,0,u*1e3)),$<100&&V.setUTCFullYear($),V.timezone=0,V},-2),Z(d,"$now",function(){var $=this;return $.$new()}),J(d,"$+",function($){var n=this;T(D("Time"),$)&&x.$raise(D("TypeError"),"time + time?"),$.$$is_number||($=ee["$coerce_to!"]($,D("Integer"),"to_int"));var t=new Date(n.getTime()+$*1e3);return t.timezone=n.timezone,t}),J(d,"$-",function($){var n=this;if(T(D("Time"),$))return(n.getTime()-$.getTime())/1e3;$.$$is_number||($=ee["$coerce_to!"]($,D("Integer"),"to_int"));var t=new Date(n.getTime()-$*1e3);return t.timezone=n.timezone,t}),J(d,"$<=>",function($){var n=this,t=A;return T(D("Time"),$)?n.$to_f()["$<=>"]($.$to_f()):(t=$["$<=>"](n),g(t["$nil?"]())?A:g(K(t,0))?-1:g($e(t,0))?1:0)}),J(d,"$==",function($){var n=this,t=A;return g(t=D("Time")["$==="]($))?n.$to_f()===$.$to_f():t}),J(d,"$asctime",function(){var $=this;return $.$strftime("%a %b %e %H:%M:%S %Y")}),W([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function a($,n,t,r){var s=a.$$s==null?this:a.$$s;return $==null&&($=A),n==null&&(n=A),t==null&&(t=A),r==null&&(r=0),W(s,"define_method",[$],function u(){var f=u.$$s==null?this:u.$$s;return r+(f.timezone!=null?new Date(f.getTime()+f.timezone*36e5)[t]():f[n]())},{$$s:s})},{$$arity:-4,$$s:d}),J(d,"$yday",function(){var $=this,n=A,t=A,r=A;return n=h("Time").$new($.$year()).$to_i(),t=h("Time").$new($.$year(),$.$month(),$.$day()).$to_i(),r=86400,G(O(M(t,n),r).$round(),1)}),J(d,"$isdst",function(){var $=this,n=new Date($.getFullYear(),0,1),t=new Date($.getFullYear(),6,1);return $.getTimezoneOffset()<Math.max(n.getTimezoneOffset(),t.getTimezoneOffset())}),J(d,"$dup",function(){var $=this,n=A;return n=new Date($.getTime()),n.$copy_instance_variables($),n.$initialize_dup($),n}),J(d,"$eql?",function($){var n=this,t=A;return g(t=$["$is_a?"](D("Time")))?n["$<=>"]($)["$zero?"]():t}),W([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function a($,n){var t=a.$$s==null?this:a.$$s;return $==null&&($=A),n==null&&(n=A),W(t,"define_method",[$],function r(){var s=r.$$s==null?this:r.$$s;return s.$wday()===n},{$$s:t})},{$$s:d}),J(d,"$hash",function(){var $=this;return[D("Time"),$.getTime()].$hash()}),J(d,"$inspect",function(){var $=this;return g($["$utc?"]())?$.$strftime("%Y-%m-%d %H:%M:%S UTC"):$.$strftime("%Y-%m-%d %H:%M:%S %z")}),J(d,"$succ",function(){var $=this,n=new Date($.getTime()+1e3);return n.timezone=$.timezone,n}),J(d,"$usec",function(){var $=this;return $.getMilliseconds()*1e3}),J(d,"$zone",function(){var $=this;if($.timezone===0)return"UTC";if($.timezone!=null)return A;var n=$.toString(),t;return n.indexOf("(")==-1?t=n.match(/[A-Z]{3,4}/)[0]:t=n.match(/\((.+)\)(?:\s|$)/)[1],t=="GMT"&&/(GMT\W*\d{4})/.test(n)?RegExp.$1:t}),J(d,"$getgm",function(){var $=this,n=new Date($.getTime());return n.timezone=0,n}),J(d,"$gmtime",function(){var $=this;return $.timezone!==0&&(E($),$.timezone=0),$}),J(d,"$gmt?",function(){var $=this;return $.timezone===0}),J(d,"$gmt_offset",function(){var $=this;return $.timezone!=null?$.timezone*60:-$.getTimezoneOffset()*60}),J(d,"$strftime",function($){var n=this;return $.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(t,r,s,u,f){var b="",C,L,F,V=r.indexOf("0")!==-1,re=r.indexOf("-")===-1,ae=r.indexOf("_")!==-1,le=r.indexOf("^")!==-1,_e=r.indexOf("#")!==-1,de=(r.match(":")||[]).length;switch(s=parseInt(s,10),V&&ae&&(r.indexOf("0")<r.indexOf("_")?V=!1:ae=!1),f){case"Y":b+=n.$year();break;case"C":V=!ae,b+=Math.round(n.$year()/100);break;case"y":V=!ae,b+=n.$year()%100;break;case"m":V=!ae,b+=n.$mon();break;case"B":b+=y[n.$mon()-1];break;case"b":case"h":ae=!V,b+=X[n.$mon()-1];break;case"d":V=!ae,b+=n.$day();break;case"e":ae=!V,b+=n.$day();break;case"j":V=!ae,s=isNaN(s)?3:s,b+=n.$yday();break;case"H":V=!ae,b+=n.$hour();break;case"k":ae=!V,b+=n.$hour();break;case"I":V=!ae,b+=n.$hour()%12||12;break;case"l":ae=!V,b+=n.$hour()%12||12;break;case"P":b+=n.$hour()>=12?"pm":"am";break;case"p":b+=n.$hour()>=12?"PM":"AM";break;case"M":V=!ae,b+=n.$min();break;case"S":V=!ae,b+=n.$sec();break;case"L":V=!ae,s=isNaN(s)?3:s,b+=n.getMilliseconds();break;case"N":s=isNaN(s)?9:s,b+=n.getMilliseconds().toString().$rjust(3,"0"),b=b.$ljust(s,"0");break;case"z":var ge=n.timezone==null?n.getTimezoneOffset():-n.timezone*60,ve=Math.floor(Math.abs(ge)/60),me=Math.abs(ge)%60;b+=ge<0?"+":"-",b+=ve<10?"0":"",b+=ve,de>0&&(b+=":"),b+=me<10?"0":"",b+=me,de>1&&(b+=":00");break;case"Z":b+=n.$zone();break;case"A":b+=l[n.$wday()];break;case"a":b+=c[n.$wday()];break;case"u":b+=n.$wday()+1;break;case"w":b+=n.$wday();break;case"V":b+=n.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":b+=n.$cweek_cyear()["$[]"](1);break;case"g":b+=n.$cweek_cyear()["$[]"](1)["$[]"](v(-2,-1,!1));break;case"s":b+=n.$to_i();break;case"n":b+=`
`;break;case"t":b+="	";break;case"%":b+="%";break;case"c":b+=n.$strftime("%a %b %e %T %Y");break;case"D":case"x":b+=n.$strftime("%m/%d/%y");break;case"F":b+=n.$strftime("%Y-%m-%d");break;case"v":b+=n.$strftime("%e-%^b-%4Y");break;case"r":b+=n.$strftime("%I:%M:%S %p");break;case"R":b+=n.$strftime("%H:%M");break;case"T":case"X":b+=n.$strftime("%H:%M:%S");break;case"J":if(C=n.$to_date().$jd(),C<2405160){b+=n.$strftime("%Y-%m-%d");break}else C<2419614?(L="M",F=1867):C<2424875?(L="T",F=1911):C<2447535?(L="S",F=1925):C<2458605?(L="H",F=1988):(L="R",F=2018);b+=n.$format("%c%02d",L,M(n.$year(),F)),b+=n.$strftime("-%m-%d");break;default:return t}return le&&(b=b.toUpperCase()),_e&&(b=b.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),re&&(V||ae)&&(b=b.$rjust(isNaN(s)?2:s,ae?" ":"0")),b})}),J(d,"$to_a",function(){var $=this;return[$.$sec(),$.$min(),$.$hour(),$.$day(),$.$month(),$.$year(),$.$wday(),$.$yday(),$.$isdst(),$.$zone()]}),J(d,"$to_f",function(){var $=this;return $.getTime()/1e3}),J(d,"$to_i",function(){var $=this;return parseInt($.getTime()/1e3,10)}),J(d,"$cweek_cyear",function(){var $=this,n=A,t=A,r=A,s=A,u=A,f=A,b=A;return n=D("Time").$new($.$year(),1,1),t=n.$wday(),r=$.$year(),g(I(t,4))&&q(t,0)?s=M(t,1):(s=M(M(t,7),1),j(s,-8)&&(s=-1)),u=O(G($.$yday(),s),7).$ceil(),g(I(u,0))?D("Time").$new(M($.$year(),1),12,31).$cweek_cyear():(j(u,53)&&(f=D("Time").$new($.$year(),12,31),b=f.$wday(),g(I(b,3))&&q(b,0)&&(u=1,r=G(r,1))),[u,r])}),function(a,$){return z(a,"mktime","local"),z(a,"utc","gm")}(e.get_singleton_class(d)),z(d,"ctime","asctime"),z(d,"dst?","isdst"),z(d,"getutc","getgm"),z(d,"gmtoff","gmt_offset"),z(d,"mday","day"),z(d,"month","mon"),z(d,"to_s","inspect"),z(d,"tv_sec","to_i"),z(d,"tv_usec","usec"),z(d,"utc","gmtime"),z(d,"utc?","gmt?"),z(d,"utc_offset","gmt_offset")}("::",Date,m)};Opal.modules["corelib/struct"]=function(e){var k=e.klass,E=e.slice,H=e.extract_kwargs,x=e.ensure_kwargs,ee=e.hash_get,Z=e.truthy,T=e.neqeq,J=e.eqeq,g=e.Opal,K=e.send,$e=e.Class,W=e.to_a,G=e.def,O=e.defs,M=e.Kernel,v=e.rb_gt,q=e.rb_minus,I=e.eqeqeq,j=e.rb_lt,z=e.rb_ge,P=e.rb_plus,m=e.alias,A=e.top,D=[],S=e.nil,w=e.$$$;return e.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),A.$require("corelib/enumerable"),function(o,d,N){var h=k(o,d,"Struct"),l=[h].concat(N),c=e.$r(l);h.$include(w("Enumerable")),O(h,"$new",function y(i,a,$){var n=y.$$p||S,t,r,s,u,f=this,b=S;if(y.$$p=null,t=E(arguments,1),r=H(t),r=x(r),s=t,u=ee(r,"keyword_init"),u==null&&(u=!1),Z(i))if(J(i.$class(),w("String"))&&T(i["$[]"](0).$upcase(),i["$[]"](0)))s.$unshift(i),i=S;else try{i=g["$const_name!"](i)}catch(C){if(e.rescue(C,[w("TypeError"),w("NameError")]))try{s.$unshift(i),i=S}finally{e.pop_exception(C)}else throw C}return K(s,"map",[],function(L){return L==null&&(L=S),g["$coerce_to!"](L,w("String"),"to_str")}),b=K($e,"new",[f],function C(){var L=C.$$s==null?this:C.$$s;return K(s,"each",[],function F(V){var re=F.$$s==null?this:F.$$s;return V==null&&(V=S),re.$define_struct_attribute(V)},{$$s:L}),function(F,V){return G(F,"$new",function(ae){var le,_e,de=this,ge=S;return le=E(arguments),_e=le,ge=de.$allocate(),ge.$$data={},K(ge,"initialize",W(_e)),ge},-1),F.$alias_method("[]","new")}(e.get_singleton_class(L))},{$$s:f}),Z(n)&&K(b,"module_eval",[],n.$to_proc()),b.$$keyword_init=u,Z(i)&&w("Struct").$const_set(i,b),b},-2),O(h,"$define_struct_attribute",function(i){var a=this;return J(a,w("Struct"))&&M.$raise(w("ArgumentError"),"you cannot define attributes to the Struct class"),a.$members()["$<<"](i),K(a,"define_method",[i],function $(){var n=$.$$s==null?this:$.$$s;return n.$$data[i]},{$$s:a}),K(a,"define_method",[""+i+"="],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=S),t.$$data[i]=n},{$$s:a})}),O(h,"$members",function(){var i=this,a=S;return i.members==null&&(i.members=S),J(i,w("Struct"))&&M.$raise(w("ArgumentError"),"the Struct class has no members"),i.members=Z(a=i.members)?a:[]}),O(h,"$inherited",function(i){var a=this,$=S;return a.members==null&&(a.members=S),$=a.members,K(i,"instance_eval",[],function n(){var t=n.$$s==null?this:n.$$s;return t.members=$},{$$s:a})}),G(h,"$initialize",function(i){var a,$,n=this,t=S,r=S,s=S;return a=E(arguments),$=a,Z(n.$class().$$keyword_init)?(t=Z(r=$.$last())?r:new Map,(Z(v($.$length(),1))||Z($.length===1&&!t.$$is_hash))&&M.$raise(w("ArgumentError"),"wrong number of arguments (given "+$.$length()+", expected 0)"),s=q(t.$keys(),n.$class().$members()),Z(s["$any?"]())&&M.$raise(w("ArgumentError"),"unknown keywords: "+s.$join(", ")),K(n.$class().$members(),"each",[],function u(f){var b,C=u.$$s==null?this:u.$$s;return f==null&&(f=S),b=[f,t["$[]"](f)],K(C,"[]=",b),b[b.length-1]},{$$s:n})):(Z(v($.$length(),n.$class().$members().$length()))&&M.$raise(w("ArgumentError"),"struct size differs"),K(n.$class().$members(),"each_with_index",[],function u(f,b){var C,L=u.$$s==null?this:u.$$s;return f==null&&(f=S),b==null&&(b=S),C=[f,$["$[]"](b)],K(L,"[]=",C),C[C.length-1]},{$$s:n}))},-1),G(h,"$initialize_copy",function(i){var a=this;a.$$data={};var $=Object.keys(i.$$data),n,t,r;for(n=0,t=$.length;n<t;n++)r=$[n],a.$$data[r]=i.$$data[r]}),O(h,"$keyword_init?",function(){var i=this;return i.$$keyword_init}),G(h,"$members",function(){var i=this;return i.$class().$members()}),G(h,"$hash",function(){var i=this;return[i.$class(),i.$to_a()].$hash()}),G(h,"$[]",function(i){var a=this;return I(w("Integer"),i)?(Z(j(i,a.$class().$members().$size()["$-@"]()))&&M.$raise(w("IndexError"),"offset "+i+" too small for struct(size:"+a.$class().$members().$size()+")"),Z(z(i,a.$class().$members().$size()))&&M.$raise(w("IndexError"),"offset "+i+" too large for struct(size:"+a.$class().$members().$size()+")"),i=a.$class().$members()["$[]"](i)):I(w("String"),i)?a.$$data.hasOwnProperty(i)||M.$raise(w("NameError").$new("no member '"+i+"' in struct",i)):M.$raise(w("TypeError"),"no implicit conversion of "+i.$class()+" into Integer"),i=g["$coerce_to!"](i,w("String"),"to_str"),a.$$data[i]}),G(h,"$[]=",function(i,a){var $=this;return I(w("Integer"),i)?(Z(j(i,$.$class().$members().$size()["$-@"]()))&&M.$raise(w("IndexError"),"offset "+i+" too small for struct(size:"+$.$class().$members().$size()+")"),Z(z(i,$.$class().$members().$size()))&&M.$raise(w("IndexError"),"offset "+i+" too large for struct(size:"+$.$class().$members().$size()+")"),i=$.$class().$members()["$[]"](i)):I(w("String"),i)?Z($.$class().$members()["$include?"](i.$to_sym()))||M.$raise(w("NameError").$new("no member '"+i+"' in struct",i)):M.$raise(w("TypeError"),"no implicit conversion of "+i.$class()+" into Integer"),i=g["$coerce_to!"](i,w("String"),"to_str"),$.$$data[i]=a}),G(h,"$==",function(i){var a=this;if(!Z(i["$instance_of?"](a.$class())))return!1;var $={},n={};function t(r,s){var u,f,b;$[r.$__id__()]=!0,n[s.$__id__()]=!0;for(u in r.$$data)if(f=r.$$data[u],b=s.$$data[u],w("Struct")["$==="](f)){if((!$.hasOwnProperty(f.$__id__())||!n.hasOwnProperty(b.$__id__()))&&!t(f,b))return!1}else if(!f["$=="](b))return!1;return!0}return t(a,i)}),G(h,"$eql?",function(i){var a=this;if(!Z(i["$instance_of?"](a.$class())))return!1;var $={},n={};function t(r,s){var u,f,b;$[r.$__id__()]=!0,n[s.$__id__()]=!0;for(u in r.$$data)if(f=r.$$data[u],b=s.$$data[u],w("Struct")["$==="](f)){if((!$.hasOwnProperty(f.$__id__())||!n.hasOwnProperty(b.$__id__()))&&!t(f,b))return!1}else if(!f["$eql?"](b))return!1;return!0}return t(a,i)}),G(h,"$each",function y(){var i=y.$$p||S,a=this;return y.$$p=null,i===S?K(a,"enum_for",["each"],function $(){var n=$.$$s==null?this:$.$$s;return n.$size()},{$$s:a}):(K(a.$class().$members(),"each",[],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=S),e.yield1(i,t["$[]"](n))},{$$s:a}),a)}),G(h,"$each_pair",function y(){var i=y.$$p||S,a=this;return y.$$p=null,i===S?K(a,"enum_for",["each_pair"],function $(){var n=$.$$s==null?this:$.$$s;return n.$size()},{$$s:a}):(K(a.$class().$members(),"each",[],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=S),e.yield1(i,[n,t["$[]"](n)])},{$$s:a}),a)}),G(h,"$length",function(){var i=this;return i.$class().$members().$length()}),G(h,"$to_a",function(){var i=this;return K(i.$class().$members(),"map",[],function a($){var n=a.$$s==null?this:a.$$s;return $==null&&($=S),n["$[]"]($)},{$$s:i})});var X=[];return G(h,"$inspect",function(){var i=this,a=S,$=S;return function(){try{return a="#<struct ",Z(X["$include?"](i.$__id__()))?P(a,":...>"):(X["$<<"](i.$__id__()),$=!0,I(w("Struct"),i)&&Z(i.$class().$name())&&(a=P(a,""+i.$class()+" ")),a=P(a,K(i.$each_pair(),"map",[],function(t,r){return t==null&&(t=S),r==null&&(r=S),""+t+"="+c("Opal").$inspect(r)}).$join(", ")),a=P(a,">"),a)}finally{Z($)&&X.pop()}}()}),G(h,"$to_h",function y(i){var a=y.$$p||S,$,n,t=this;return y.$$p=null,$=E(arguments),n=$,a!==S?K(K(t,"map",[],a.$to_proc()),"to_h",W(n)):K(t.$class().$members(),"each_with_object",[new Map],function r(s,u){var f,b=r.$$s==null?this:r.$$s;return s==null&&(s=S),u==null&&(u=S),f=[s,b["$[]"](s)],K(u,"[]=",f),f[f.length-1]},{$$s:t})},-1),G(h,"$values_at",function(i){var a,$,n=this;a=E(arguments),$=a,$=K($,"map",[],function(f){return f==null&&(f=S),f.$$is_range?f.$to_a():f}).$flatten();for(var t=[],r=0,s=$.length;r<s;r++)$[r].$$is_number||M.$raise(w("TypeError"),"no implicit conversion of "+$[r].$class()+" into Integer"),t.push(n["$[]"]($[r]));return t},-1),G(h,"$dig",function(i,a){var $,n,t=this,r=S;return $=E(arguments,1),n=$,r=Z(i.$$is_string&&t.$$data.hasOwnProperty(i))&&t.$$data[i]||S,r===S||n.length===0?r:(Z(r["$respond_to?"]("dig"))||M.$raise(w("TypeError"),""+r.$class()+" does not have #dig method"),K(r,"dig",W(n)))},-2),m(h,"size","length"),m(h,"to_s","inspect"),m(h,"values","to_a")}("::",null,D)};Opal.modules["corelib/set"]=function(e){var k=e.freeze,E=e.klass,H=e.slice,x=e.defs,ee=e.truthy,Z=e.eqeqeq,T=e.Kernel,J=e.send,g=e.def,K=e.eqeq,$e=e.rb_lt,W=e.rb_le,G=e.alias,O=[],M=e.nil,v=e.$$$;return e.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(q,I,j){var z=E(q,I,"Set"),P=[z].concat(j),m=e.$r(P),A=M,D=z.$$prototype;D.hash=M,z.$include(v("Enumerable")),x(z,"$[]",function(o){var d,N,h=this;return d=H(arguments),N=d,h.$new(N)},-1),g(z,"$initialize",function w(o){var d=w.$$p||M,N=this;return w.$$p=null,o==null&&(o=M),N.hash=new Map,ee(o["$nil?"]())?M:(Z(v("Enumerable"),o)||T.$raise(v("ArgumentError"),"value must be enumerable"),ee(d)?J(o,"each",[],function h(l){var c=h.$$s==null?this:h.$$s;return l==null&&(l=M),c.$add(e.yield1(d,l))},{$$s:N}):N.$merge(o))},-1),g(z,"$dup",function(){var o=this,d=M;return d=o.$class().$new(),d.$merge(o)}),g(z,"$-",function(o){var d=this;return ee(o["$respond_to?"]("each"))||T.$raise(v("ArgumentError"),"value must be enumerable"),d.$dup().$subtract(o)}),g(z,"$inspect",function(){var o=this;return"#<Set: {"+o.$to_a().$join(",")+"}>"}),g(z,"$==",function(o){var d=this;return ee(d["$equal?"](o))?!0:ee(o["$instance_of?"](d.$class()))?d.hash["$=="](o.$instance_variable_get("@hash")):ee(o["$is_a?"](v("Set")))&&K(d.$size(),o.$size())?J(o,"all?",[],function N(h){var l=N.$$s==null?this:N.$$s;return l.hash==null&&(l.hash=M),h==null&&(h=M),l.hash["$include?"](h)},{$$s:d}):!1}),g(z,"$add",function(o){var d=this;return d.hash["$[]="](o,!0),d}),g(z,"$classify",function w(){var o=w.$$p||M,d=this,N=M;return w.$$p=null,o===M?d.$enum_for("classify"):(N=J(v("Hash"),"new",[],function h(l,c){var X,y=h.$$s==null?this:h.$$s;return l==null&&(l=M),c==null&&(c=M),X=[c,y.$class().$new()],J(l,"[]=",X),X[X.length-1]},{$$s:d}),J(d,"each",[],function(l){return l==null&&(l=M),N["$[]"](e.yield1(o,l)).$add(l)}),N)}),g(z,"$collect!",function w(){var o=w.$$p||M,d=this,N=M;return w.$$p=null,o===M?d.$enum_for("collect!"):(N=d.$class().$new(),J(d,"each",[],function(l){return l==null&&(l=M),N["$<<"](e.yield1(o,l))}),d.$replace(N))}),g(z,"$compare_by_identity",function(){var o=this;return ee(o.hash["$respond_to?"]("compare_by_identity"))?(o.hash.$compare_by_identity(),o):o.$raise(m("NotImplementedError"),""+o.$class().$name()+"#compare_by_identity is not implemented")}),g(z,"$compare_by_identity?",function(){var o=this,d=M;return ee(d=o.hash["$respond_to?"]("compare_by_identity?"))?o.hash["$compare_by_identity?"]():d}),g(z,"$delete",function(o){var d=this;return d.hash.$delete(o),d}),g(z,"$delete?",function(o){var d=this;return ee(d["$include?"](o))?(d.$delete(o),d):M}),g(z,"$delete_if",function w(){var o=w.$$p||M,d=this;return w.$$p=null,o===M?d.$enum_for("delete_if"):(J(J(d,"select",[],function(h){return h==null&&(h=M),e.yield1(o,h)}),"each",[],function N(h){var l=N.$$s==null?this:N.$$s;return l.hash==null&&(l.hash=M),h==null&&(h=M),l.hash.$delete(h)},{$$s:d}),d)}),g(z,"$freeze",function(){var o=this;return ee(o["$frozen?"]())?o:(o.hash.$freeze(),k(o))}),g(z,"$keep_if",function w(){var o=w.$$p||M,d=this;return w.$$p=null,o===M?d.$enum_for("keep_if"):(J(J(d,"reject",[],function(h){return h==null&&(h=M),e.yield1(o,h)}),"each",[],function N(h){var l=N.$$s==null?this:N.$$s;return l.hash==null&&(l.hash=M),h==null&&(h=M),l.hash.$delete(h)},{$$s:d}),d)}),g(z,"$reject!",function w(){var o=w.$$p||M,d=this,N=M;return w.$$p=null,o===M?d.$enum_for("reject!"):(N=d.$size(),J(d,"delete_if",[],o.$to_proc()),K(d.$size(),N)?M:d)}),g(z,"$select!",function w(){var o=w.$$p||M,d=this,N=M;return w.$$p=null,o===M?d.$enum_for("select!"):(N=d.$size(),J(d,"keep_if",[],o.$to_proc()),K(d.$size(),N)?M:d)}),g(z,"$add?",function(o){var d=this;return ee(d["$include?"](o))?M:d.$add(o)}),g(z,"$each",function w(){var o=w.$$p||M,d=this;return w.$$p=null,o===M?d.$enum_for("each"):(J(d.hash,"each_key",[],o.$to_proc()),d)}),g(z,"$empty?",function(){var o=this;return o.hash["$empty?"]()}),g(z,"$eql?",function(o){var d=this;return d.hash["$eql?"](J(o,"instance_eval",[],function N(){var h=N.$$s==null?this:N.$$s;return h.hash==null&&(h.hash=M),h.hash},{$$s:d}))}),g(z,"$clear",function(){var o=this;return o.hash.$clear(),o}),g(z,"$include?",function(o){var d=this;return d.hash["$include?"](o)}),g(z,"$merge",function(o){var d=this;return J(o,"each",[],function N(h){var l=N.$$s==null?this:N.$$s;return h==null&&(h=M),l.$add(h)},{$$s:d}),d}),g(z,"$replace",function(o){var d=this;return d.$clear(),d.$merge(o),d}),g(z,"$size",function(){var o=this;return o.hash.$size()}),g(z,"$subtract",function(o){var d=this;return J(o,"each",[],function N(h){var l=N.$$s==null?this:N.$$s;return h==null&&(h=M),l.$delete(h)},{$$s:d}),d}),g(z,"$|",function(o){var d=this;return ee(o["$respond_to?"]("each"))||T.$raise(v("ArgumentError"),"value must be enumerable"),d.$dup().$merge(o)});function S(w){ee(A=w["$is_a?"](v("Set")))||T.$raise(v("ArgumentError"),"value must be a set")}return g(z,"$superset?",function(o){var d=this;return S(o),ee($e(d.$size(),o.$size()))?!1:J(o,"all?",[],function N(h){var l=N.$$s==null?this:N.$$s;return h==null&&(h=M),l["$include?"](h)},{$$s:d})}),g(z,"$proper_superset?",function(o){var d=this;return S(o),ee(W(d.$size(),o.$size()))?!1:J(o,"all?",[],function N(h){var l=N.$$s==null?this:N.$$s;return h==null&&(h=M),l["$include?"](h)},{$$s:d})}),g(z,"$subset?",function(o){var d=this;return S(o),ee($e(o.$size(),d.$size()))?!1:J(d,"all?",[],function(h){return h==null&&(h=M),o["$include?"](h)})}),g(z,"$proper_subset?",function(o){var d=this;return S(o),ee(W(o.$size(),d.$size()))?!1:J(d,"all?",[],function(h){return h==null&&(h=M),o["$include?"](h)})}),g(z,"$intersect?",function(o){var d=this;return S(o),ee($e(d.$size(),o.$size()))?J(d,"any?",[],function(h){return h==null&&(h=M),o["$include?"](h)}):J(o,"any?",[],function N(h){var l=N.$$s==null?this:N.$$s;return h==null&&(h=M),l["$include?"](h)},{$$s:d})}),g(z,"$disjoint?",function(o){var d=this;return d["$intersect?"](o)["$!"]()}),g(z,"$to_a",function(){var o=this;return o.hash.$keys()}),G(z,"+","|"),G(z,"<","proper_subset?"),G(z,"<<","add"),G(z,"<=","subset?"),G(z,">","proper_superset?"),G(z,">=","superset?"),G(z,"difference","-"),G(z,"filter!","select!"),G(z,"length","size"),G(z,"map!","collect!"),G(z,"member?","include?"),G(z,"union","|")}("::",null,O)};Opal.modules["corelib/dir"]=function(e){var k=e.klass,E=e.def,H=e.truthy,x=e.alias,ee=e.nil,Z=e.$$$;return e.add_stubs("[],pwd"),function(T,J,g){var K=k(T,J,"Dir");return function($e,W){return E($e,"$chdir",function G(O){var M=G.$$p||ee,v=ee;return G.$$p=null,function(){try{return v=e.current_dir,e.current_dir=O,e.yieldX(M,[])}finally{e.current_dir=v}}()}),E($e,"$pwd",function(){return e.current_dir||"."}),E($e,"$home",function(){var O=ee;return H(O=Z("ENV")["$[]"]("HOME"))?O:"."}),x($e,"getwd","pwd")}(e.get_singleton_class(K))}("::",null)};Opal.modules["corelib/file"]=function(e){var k=e.truthy,E=e.klass,H=e.const_set,x=e.Opal,ee=e.regexp,Z=e.rb_plus,T=e.def,J=e.Kernel,g=e.eqeq,K=e.rb_lt,$e=e.rb_minus,W=e.range,G=e.send,O=e.slice,M=e.alias,v=[],q=e.nil,I=e.$$$;return e.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(j,z,P){var m=E(j,z,"File"),A=[m].concat(P),D=q;return H(A[0],"Separator",H(A[0],"SEPARATOR","/")),H(A[0],"ALT_SEPARATOR",q),H(A[0],"PATH_SEPARATOR",":"),H(A[0],"FNM_SYSCASE",0),D=/^[a-zA-Z]:(?:\\|\/)/,function(S,w){var o=[S].concat(w),d=e.$r(o);T(S,"$absolute_path",function(c,X){var y=q,i=q,a=q,$=q,n=q,t=q,r=q,s=q,u=q,f=q;X==null&&(X=q),y=d("SEPARATOR"),i=h(),a=[],c=k(c["$respond_to?"]("to_path"))?c.$to_path():c,c=x["$coerce_to!"](c,I("String"),"to_str"),X=k($=X)?$:I("Dir").$pwd(),n=c.substr(0,y.length)===y||D.test(c),t=X.substr(0,y.length)===y||D.test(X),k(n)?(r=c.$split(ee(["[",i,"]"])),s=D.test(c)?"":c.$sub(ee(["^([",i,"]+).*$"]),"\\1"),u=!0):(r=Z(X.$split(ee(["[",i,"]"])),c.$split(ee(["[",i,"]"]))),s=D.test(X)?"":X.$sub(ee(["^([",i,"]+).*$"]),"\\1"),u=t);for(var b,C=0,L=r.length;C<L;C++)b=r[C],!(b===q||b===""&&(a.length===0||u)||b==="."&&(a.length===0||u))&&(b===".."?a.pop():a.push(b));return!u&&r[0]!=="."&&a.$unshift("."),f=a.$join(y),k(u)&&(f=Z(s,f)),f},-2),T(S,"$expand_path",function(c,X){var y=this,i=q,a=q,$=q,n=q,t=q;return X==null&&(X=q),i=d("SEPARATOR"),a=h(),k(c[0]==="~"||X&&X[0]==="~")&&($=d("Dir").$home(),k($)||J.$raise(I("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),n=D.test($)?"":$.$sub(ee(["^([",a,"]+).*$"]),"\\1"),k($["$start_with?"](n))||J.$raise(I("ArgumentError"),"non-absolute home"),$=Z($,i),t=ee(["^\\~(?:",i,"|$)"]),c=c.$sub(t,$),k(X)&&(X=X.$sub(t,$))),y.$absolute_path(c,X)},-2);function N(l){return k(l["$respond_to?"]("to_path"))&&(l=l.$to_path()),l=x["$coerce_to!"](l,I("String"),"to_str"),l}function h(){return d("ALT_SEPARATOR")===q?e.escape_regexp(d("SEPARATOR")):e.escape_regexp(Z(d("SEPARATOR"),d("ALT_SEPARATOR")))}return T(S,"$dirname",function(c,X){var y=this,i=q;if(X==null&&(X=1),g(X,0))return c;k(K(X,0))&&J.$raise(I("ArgumentError"),"level can't be negative"),i=h(),c=N(c);var a=c.match(new RegExp("^["+i+"]")),$;return c=c.replace(new RegExp("["+i+"]+$"),""),c=c.replace(new RegExp("[^"+i+"]+$"),""),c=c.replace(new RegExp("["+i+"]+$"),""),c===""?$=a?"/":".":$=c,X==1?$:y.$dirname($,$e(X,1))},-2),T(S,"$basename",function(c,X){var y=q;return X==null&&(X=q),y=h(),c=N(c),c.length==0||(X!==q?X=x["$coerce_to!"](X,I("String"),"to_str"):X=null,c=c.replace(new RegExp("(.)["+y+"]*$"),"$1"),c=c.replace(new RegExp("^(?:.*["+y+"])?([^"+y+"]+)$"),"$1"),X===".*"?c=c.replace(/\.[^\.]+$/,""):X!==null&&(X=e.escape_regexp(X),c=c.replace(new RegExp(""+X+"$"),""))),c},-2),T(S,"$extname",function(c){var X=this,y=q,i=q;return c=N(c),y=X.$basename(c),k(y["$empty?"]())||(i=y["$[]"](W(1,-1,!1)).$rindex("."),k(i["$nil?"]())||g(Z(i,1),$e(y.$length(),1)))?"":y["$[]"](e.Range.$new(Z(i,1),-1,!1))}),T(S,"$exist?",function(c){return e.modules[c]!=null}),T(S,"$directory?",function(c){var X=q;X=[];for(var y in e.modules)X.push(y);return c=c.$gsub(ee(["(^.",d("SEPARATOR"),"+|",d("SEPARATOR"),"+$)"])),G(X,"find",[],function(a){return a==null&&(a=q),a["$=~"](ee(["^",c]))})}),T(S,"$join",function(c){var X,y,i=q;return X=O(arguments),y=X,k(y["$empty?"]())?"":(i="",y=G(y.$flatten().$each_with_index(),"map",[],function($,n){return $==null&&($=q),n==null&&(n=q),g(n,0)&&k($["$empty?"]())||g(y.$length(),Z(n,1))&&k($["$empty?"]())?d("SEPARATOR"):$}),y=G(y,"reject",[],"empty?".$to_proc()),G(y,"each_with_index",[],function($,n){var t=q;return $==null&&($=q),n==null&&(n=q),t=y["$[]"](Z(n,1)),k(t["$nil?"]())?i=""+i+$:(k($["$end_with?"](d("SEPARATOR")))&&k(t["$start_with?"](d("SEPARATOR")))&&($=$.$sub(ee([d("SEPARATOR"),"+$"]),"")),i=k($["$end_with?"](d("SEPARATOR")))||k(t["$start_with?"](d("SEPARATOR")))?""+i+$:""+i+$+d("SEPARATOR"))}),i)},-1),T(S,"$split",function(c){return c.$split(d("SEPARATOR"))}),M(S,"realpath","expand_path"),M(S,"exists?","exist?")}(e.get_singleton_class(m),A)}("::",I("IO"),v)};Opal.modules["corelib/process/base"]=function(e){var k=e.klass,E=e.slice,H=e.defs,x=e.return_val,ee=e.nil;return function(Z,T){var J=k(Z,T,"Signal");return H(J,"$trap",function(K){return E(arguments),ee},-1)}("::",null),function(Z,T){var J=k(Z,T,"GC");return H(J,"$start",x(ee))}("::",null)};Opal.modules["corelib/process"]=function(e){var k=e.module,E=e.defs,H=e.truthy,x=e.return_val,ee=e.Kernel,Z=e.nil,T=e.$$$;return e.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(J){var g=k(J,"Process"),K=Z;if(g.__clocks__=[],E(g,"$__register_clock__",function(G,O){var M=this;return M.__clocks__==null&&(M.__clocks__=Z),M.$const_set(G,M.__clocks__.$size()),M.__clocks__["$<<"](O)}),g.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),K=!1,e.global.performance)K=function(){return performance.now()};else if(e.global.process&&process.hrtime){var $e=process.hrtime();K=function(){var W=process.hrtime($e),G=W[1]/1e3|0;return W[0]*1e3+G/1e3}}return H(K)&&g.$__register_clock__("CLOCK_MONOTONIC",K),E(g,"$pid",x(0)),E(g,"$times",function(){var G=Z;return G=T("Time").$now().$to_f(),T(T("Benchmark"),"Tms").$new(G,G,G,G,G)}),E(g,"$clock_gettime",function(G,O){var M=this,v=Z;M.__clocks__==null&&(M.__clocks__=Z),O==null&&(O="float_second"),H(v=M.__clocks__["$[]"](G))||ee.$raise(T(T("Errno"),"EINVAL"),"clock_gettime("+G+") "+M.__clocks__["$[]"](G));var q=v();switch(O){case"float_second":return q/1e3;case"float_millisecond":return q/1;case"float_microsecond":return q*1e3;case"second":return q/1e3|0;case"millisecond":return q/1|0;case"microsecond":return q*1e3|0;case"nanosecond":return q*1e6|0;default:ee.$raise(T("ArgumentError"),"unexpected unit: "+O)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(e){var k=e.klass,E=e.module,H=e.def,x=e.range,ee=e.send,Z=e.rb_divide,T=e.Kernel,J=e.Opal,g=[],K=e.nil,$e=e.$$$;return e.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(W,G,O){var M=k(W,G,"Random"),v=[M].concat(O);return function(q,I){var j=E(q,"Formatter"),z=[j].concat(I),P=e.$r(z);return H(j,"$hex",function(A){var D=this;A==null&&(A=K),A=$e("Random").$_verify_count(A);for(var S=D.$bytes(A),w="",o=0;o<A;o++)w+=S.charCodeAt(o).toString(16).padStart(2,"0");return w.$encode("US-ASCII")},-1),H(j,"$random_bytes",function(A){var D=this;return A==null&&(A=K),D.$bytes(A)},-1),H(j,"$base64",function(A){var D=this;return A==null&&(A=K),$e("Base64").$strict_encode64(D.$random_bytes(A)).$encode("US-ASCII")},-1),H(j,"$urlsafe_base64",function(A,D){var S=this;return A==null&&(A=K),D==null&&(D=!1),$e("Base64").$urlsafe_encode64(S.$random_bytes(A),D).$encode("US-ASCII")},-1),H(j,"$uuid",function(){var A=this,D=K;return D=A.$hex(16).$split(""),D["$[]="](12,"4"),D["$[]="](16,(parseInt(D["$[]"](16),16)&3|8).toString(16)),D=[D["$[]"](x(0,8,!0)),D["$[]"](x(8,12,!0)),D["$[]"](x(12,16,!0)),D["$[]"](x(16,20,!0)),D["$[]"](x(20,32,!0))],D=ee(D,"map",[],"join".$to_proc()),D.$join("-")}),H(j,"$random_float",function(){var A=this,D=K,S=K;return D=A.$bytes(4),S=0,ee(4,"times",[],function(o){return o==null&&(o=K),S=S["$<<"](8),S=S["$|"](D["$[]"](o).$ord())}),Z(S.$abs(),2147483647)}),H(j,"$random_number",function(A){var D=this;function S(){return D.$random_float()}function w(d){return Math.floor(S()*d)}function o(){var d=A.begin,N=A.end;if(d===K||N===K)return K;var h=N-d;return h<0?K:h===0?d:(N%1===0&&d%1===0&&!A.excl&&h++,w(h)+d)}return A==null?S():A.$$is_range?o():A.$$is_number?(A<=0&&T.$raise($e("ArgumentError"),"invalid argument - "+A),A%1===0?w(A):S()*A):(A=J["$coerce_to!"](A,$e("Integer"),"to_int"),A<=0&&T.$raise($e("ArgumentError"),"invalid argument - "+A),w(A))},-1),H(j,"$alphanumeric",function(A){var D=this,S=K;return A==null&&(A=K),A=P("Random").$_verify_count(A),S=ee([x("0","9",!1),x("a","z",!1),x("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),ee($e("Array"),"new",[A],function w(o){var d=w.$$s==null?this:w.$$s;return S["$[]"](d.$random_number(S.$length()))},{$$s:D}).$join()},-1)}(M,v),M.$include($e($e("Random"),"Formatter")),M.$extend($e($e("Random"),"Formatter"))}("::",null,g)};Opal.modules["corelib/random/mersenne_twister"]=function(e){var k=e.klass,E=e.const_set,H=e.send,x=e.nil,ee=e.$$$,Z=x;return e.add_stubs("generator="),Z=function(){var T=624,J=397,g=2567483615,K=2147483648,$e=2147483647,W=function(z,P){return z&K|P&$e},G=function(z,P){return W(z,P)>>>1^(P&1?g:0)};function O(z){var P={left:0,next:T,state:new Array(T)};return M(P,z),P}function M(z,P){var m;for(z.state[0]=P>>>0,m=1;m<T;m++)z.state[m]=1812433253*(z.state[m-1]^z.state[m-1]>>30>>>0)+m,z.state[m]&=4294967295;z.left=1,z.next=T}function v(z){var P=0,m=z.state,A;for(z.left=T,z.next=0,A=T-J+1;--A;P++)m[P]=m[P+J]^G(m[P+0],m[P+1]);for(A=J;--A;P++)m[P]=m[P+(J-T)]^G(m[P+0],m[P+1]);m[P]=m[P+(J-T)]^G(m[P+0],m[0])}function q(z){var P;return--z.left<=0&&v(z),P=z.state[z.next++],P^=P>>>11,P^=P<<7&2636928640,P^=P<<15&4022730752,P^=P>>>18,P>>>0}function I(z,P){return z>>>=5,P>>>=6,(z*67108864+P)*(1/9007199254740992)}function j(z){var P=q(z),m=q(z);return I(P,m)}return{genrand_real:j,init:O}}(),function(T,J){var g=k(T,J,"Random"),K,$e=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return E(g,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*$e)},reseed:function(W){return Z.init(W)},rand:function(W){return Z.genrand_real(W)}}),K=[ee(g,"MERSENNE_TWISTER_GENERATOR")],H(g,"generator=",K),K[K.length-1]}("::",null)};Opal.modules["corelib/random"]=function(e){var k=e.truthy,E=e.klass,H=e.Kernel,x=e.defs,ee=e.Opal,Z=e.def,T=e.eqeqeq,J=e.send,g=e.top,K=e.nil,$e=e.$$$;return e.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),g.$require("corelib/random/formatter"),function(W,G){var O=E(W,G,"Random");return O.$attr_reader("seed","state"),x(O,"$_verify_count",function(v){return k(v)||(v=16),typeof v!="number"&&(v=v.$to_int()),v<0&&H.$raise($e("ArgumentError"),"negative string size (or size too big)"),v=Math.floor(v),v}),Z(O,"$initialize",function(v){var q=this;return v==null&&(v=$e("Random").$new_seed()),v=ee["$coerce_to!"](v,$e("Integer"),"to_int"),q.state=v,q.$reseed(v)},-1),Z(O,"$reseed",function(v){var q=this;return q.seed=v,q.$rng=e.$$rand.reseed(v)}),x(O,"$new_seed",function(){return e.$$rand.new_seed()}),x(O,"$rand",function(v){var q=this;return $e(q,"DEFAULT").$rand(v)},-1),x(O,"$srand",function(v){var q=this,I=K;return v==null&&(v=$e("Random").$new_seed()),v=ee["$coerce_to!"](v,$e("Integer"),"to_int"),I=$e(q,"DEFAULT").$seed(),$e(q,"DEFAULT").$reseed(v),I},-1),x(O,"$urandom",function(v){return $e("SecureRandom").$bytes(v)}),Z(O,"$==",function(v){var q=this,I=K;return T($e("Random"),v)?k(I=q.$seed()["$=="](v.$seed()))?q.$state()["$=="](v.$state()):I:!1}),Z(O,"$bytes",function(v){var q=this;return v=$e("Random").$_verify_count(v),J($e("Array"),"new",[v],function I(){var j=I.$$s==null?this:I.$$s;return j.$rand(255).$chr()},{$$s:q}).$join().$encode("ASCII-8BIT")}),x(O,"$bytes",function(v){var q=this;return $e(q,"DEFAULT").$bytes(v)}),Z(O,"$rand",function(v){var q=this;return q.$random_number(v)},-1),Z(O,"$random_float",function(){var v=this;return v.state++,e.$$rand.rand(v.$rng)}),x(O,"$random_float",function(){var v=this;return $e(v,"DEFAULT").$random_float()}),x(O,"$generator=",function(v){var q=this;return e.$$rand=v,k(q["$const_defined?"]("DEFAULT"))?$e(q,"DEFAULT").$reseed():q.$const_set("DEFAULT",q.$new(q.$new_seed()))})}("::",null),g.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(e){var k=e.Kernel,E=e.klass,H=e.send,x=e.slice,ee=e.module,Z=e.def,T=e.return_val,J=e.alias,g=e.defs,K=e.top,$e=[],W=e.nil,G=e.$$$;e.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var O={};function M(q){switch(e.config.unsupported_features_severity){case"error":k.$raise(G("NotImplementedError"),q);break;case"warning":v(q);break}}function v(q){O[q]||(O[q]=!0,K.$warn(q))}return function(q,I){var j=E(q,I,"String"),z="String#%s not supported. Mutable String methods are not supported in Opal.";return H(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function P(m){var A=P.$$s==null?this:P.$$s;return m==null&&(m=W),H(A,"define_method",[m],function(S){return x(arguments),k.$raise(G("NotImplementedError"),z["$%"](m))},-1)},{$$s:j})}("::",null),function(q){var I=ee(q,"Kernel"),j="Object tainting is not supported by Opal";return Z(I,"$taint",function(){var P=this;return M(j),P}),Z(I,"$untaint",function(){var P=this;return M(j),P}),Z(I,"$tainted?",function(){return M(j),!1})}("::"),function(q,I){var j=E(q,I,"Module");return Z(j,"$public",function(P){var m,A,D=this;return m=x(arguments),A=m,A.length===0?(D.$$module_function=!1,W):A.length===1?A[0]:A},-1),Z(j,"$private_class_method",function(P){var m,A;return m=x(arguments),A=m,A.length===1?A[0]:A},-1),Z(j,"$private_method_defined?",T(!1)),Z(j,"$private_constant",function(P){return x(arguments),W},-1),J(j,"nesting","public"),J(j,"private","public"),J(j,"protected","public"),J(j,"protected_method_defined?","private_method_defined?"),J(j,"public_class_method","private_class_method"),J(j,"public_instance_method","instance_method"),J(j,"public_instance_methods","instance_methods"),J(j,"public_method_defined?","method_defined?")}("::",null),function(q){var I=ee(q,"Kernel");return Z(I,"$private_methods",function(z){return x(arguments),[]},-1),J(I,"protected_methods","private_methods"),J(I,"private_instance_methods","private_methods"),J(I,"protected_instance_methods","private_methods")}("::"),function(q,I){var j=ee(q,"Kernel"),z=[j].concat(I),P=e.$r(z);return Z(j,"$eval",function(A){return x(arguments),k.$raise(G("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+P("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",$e),g(K,"$public",function(I){var j,z;return j=x(arguments),z=j,z.length===1?z[0]:z},-1),g(K,"$private",function(I){var j,z;return j=x(arguments),z=j,z.length===1?z[0]:z},-1)};Opal.modules["corelib/binding"]=function(e){var k=e.klass,E=e.truthy,H=e.def,x=e.slice,ee=e.send,Z=e.to_a,T=e.Kernel,J=e.return_ivar,g=e.eqeq;e.thrower;var K=e.module,$e=e.const_set,W=e.top,G=[],O=e.nil,M=e.$$$;return e.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(v,q){var I=k(v,q,"Binding"),j=I.$$prototype;return j.jseval=j.scope_variables=O,H(I,"$initialize",function(P,m,A,D){var S,w=this;return m==null&&(m=[]),D==null&&(D=O),S=[P,m,A,D],w.jseval=S[0],w.scope_variables=S[1],w.receiver=S[2],w.source_location=S[3],E(typeof A!==void 0)?O:A=w.$js_eval("self")},-2),H(I,"$js_eval",function(P){var m,A,D=this;return m=x(arguments),A=m,E(D.jseval)?ee(D.jseval,"call",Z(A)):T.$raise("Evaluation on a Proc#binding is not supported")},-1),H(I,"$local_variable_get",function(P){var m=this;try{return m.$js_eval(P)}catch(A){if(e.rescue(A,[M("Exception")]))try{return T.$raise(M("NameError"),"local variable `"+P+"' is not defined for "+m.$inspect())}finally{e.pop_exception(A)}else throw A}}),H(I,"$local_variable_set",function(P,m){var A=this;return e.Binding.tmp_value=m,A.$js_eval(""+P+" = Opal.Binding.tmp_value"),delete e.Binding.tmp_value,m}),H(I,"$local_variables",J("scope_variables")),H(I,"$local_variable_defined?",function(P){var m=this;return m.scope_variables["$include?"](P)}),H(I,"$eval",function(P,m,A){try{var D=this;return m==null&&(m=O),A==null&&(A=O),g(P,"self")?D.$receiver():T.$eval(P,D,m,A)}catch(S){if(S===e.t_eval_return)return S.$v;throw S}},-2),I.$attr_reader("receiver","source_location")}("::",null),function(v){var q=K(v,"Kernel");return H(q,"$binding",function(){return T.$raise("Opal doesn't support dynamic calls to binding")})}("::"),$e(G[0],"TOPLEVEL_BINDING",M("Binding").$new(function(v){return new Function("self","return "+v)(W)},[],W,["<main>",0]))};Opal.modules["corelib/irb"]=function(e){var k=e.module,E=e.truthy,H=e.Kernel,x=e.defs,ee=e.gvars,Z=e.lambda,T=e.hash_rehash,J=e.send,g=e.rb_plus,K=e.const_set,$e=e.klass,W=e.def,G=e.Opal,O=e.range,M=e.eqeq,v=e.thrower,q=[],I=e.nil,j=e.$$$;e.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(z,P){var m=k(z,"Opal"),A=[m].concat(P);return function(D,S){var w=k(D,"IRB"),o=[w].concat(S),d=e.$r(o);return x(w,"$ensure_loaded",function(h){var l=I,c=I;if(E(e.loaded_features["$include?"](h)))return I;l=E(d("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":d("RUBY_ENGINE_VERSION"),c="https://cdn.opalrb.com/opal/"+l+"/"+h+".js";var X;if(typeof XMLHttpRequest<"u"){var y=new XMLHttpRequest;y.open("GET",c,!1),y.send(""),X=y.responseText}else H.$raise("You need to provision "+h+" yourself in this environment");return new Function("Opal",X)(e),e.require(h),E(e.loaded_features["$include?"](h))?I:H.$raise("Could not load "+h+" for some reason")}),w.$singleton_class().$attr_accessor("output"),x(w,"$prepare_console",function N(){var h=N.$$p||I,l,c=this,X=I,y=I;return ee.stdout==null&&(ee.stdout=I),ee.stderr==null&&(ee.stderr=I),ee.stdin==null&&(ee.stdin=I),N.$$p=null,function(){try{return c["$output="](""),X=T(new Map([[ee.stdout,Z(function(a){return a==null&&(a=I),ee.stdout=a})],[ee.stderr,Z(function(a){return a==null&&(a=I),ee.stderr=a})]])),E(c["$browser?"]())&&(J(X,"each",[],function i(a,$){var n=i.$$s==null?this:i.$$s,t=I;return a==null&&(a=I),$==null&&($=I),t=a.$dup(),t["$write_proc="](J(n,"proc",[],function r(s){var u=r.$$s==null?this:r.$$s;return s==null&&(s=I),u["$output="](g(u.$output(),s)),u["$output="](u.$output().$split(`
`).$last(30).$join(`
`)),E(s["$end_with?"](`
`))&&u["$output="](g(u.$output(),`
`)),a.$write_proc().$call(s)},{$$s:n})),t["$tty="](!1),$.$call(t)},{$$s:c}),y=ee.stdin.$read_proc(),ee.stdin["$read_proc="](function(i){var a=prompt(c.$output());return a!==null?a+`
`:I})),e.yieldX(h,[])}finally{J(X,"each",[],function(a,$){return a==null&&(a=I),$==null&&($=I),$.$call(a)}),l=[y],J(ee.stdin,"read_proc=",l),l[l.length-1],l=[""],J(c,"output=",l),l[l.length-1]}}()}),x(w,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),K(o[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(N,h){var l=$e(N,h,"Silencer"),c=l.$$prototype;return c.collector=c.stderr=I,W(l,"$initialize",function(){var y=this;return ee.stderr==null&&(ee.stderr=I),y.stderr=ee.stderr}),W(l,"$silence",function X(){var y=X.$$p||I,i=this;return X.$$p=null,function(){try{return i.collector=j("StringIO").$new(),ee.stderr=i.collector,e.yieldX(y,[])}finally{ee.stderr=i.stderr}}()}),W(l,"$warnings",function(){var y=this;return y.collector.$string()})}(o[0],null)}(A[0],A)}(q[0],q),function(z,P,m){var A=$e(z,P,"Binding"),D=[A].concat(m),S=e.$r(D);return W(A,"$irb",function(){try{var o=v("return"),d=this,N=I;return j(G,"IRB").$ensure_loaded("opal-replutils"),N=j(j(G,"IRB"),"Silencer").$new(),J(j(G,"IRB"),"prepare_console",[],function h(){var l=h.$$s==null?this:h.$$s;return function(){try{var c=v("break");return J(l,"loop",[],function X(){var y=X.$$s==null?this:X.$$s,i=I,a=I,$=I,n=I,t=I;y.$print(">> "),i=y.$gets(),E(i)||c.$throw(I,X.$$is_lambda),a="",E(j(G,"IRB")["$browser?"]())&&y.$puts(i),E(i["$start_with?"]("ls "))?(a=i["$[]"](O(3,-1,!1)),$="ls"):M(i,`ls
`)?(a="self",$="ls"):E(i["$start_with?"]("show "))?(a=i["$[]"](O(5,-1,!1)),$="show"):(a=i,$="inspect"),n=I;do{try{J(N,"silence",[],function(){return n=e.compile(a,{irb:!0})})}catch(r){if(e.rescue(r,[S("SyntaxError")])){t=r;try{if(E(j(j(G,"IRB"),"LINEBREAKS")["$include?"](t.$message()))){y.$print(".. "),i=y.$gets(),E(i)||o.$throw(I,X.$$is_lambda),E(j(G,"IRB")["$browser?"]())&&y.$puts(i),a=g(a,i);continue}else E(N.$warnings()["$empty?"]())?y.$warn(t.$full_message()):y.$warn(N.$warnings())}finally{e.pop_exception(r)}}else throw r}break}while(!0);return M($,"show")&&(y.$puts(n),o.$throw(I,X.$$is_lambda)),y.$puts(j("REPLUtils").$eval_and_print(n,$,!1,y))},{$$s:l,$$ret:o})}catch(X){if(X===c)return X.$v;throw X}finally{c.is_orphan=!0}}()},{$$s:d})}catch(h){if(h===o)return h.$v;throw h}finally{o.is_orphan=!0}})}("::",null,q),e.irb=function(z){j("Binding").$new(z).$irb()},e.load_parser=function(){e.Opal.IRB.$ensure_loaded("opal-parser")},typeof e.eval>"u"&&(e.eval=function(z){return e.load_parser(),e.eval(z)}),typeof e.compile>"u"&&(e.compile=function(z,P){return e.load_parser(),e.compile(z,P)})};Opal.modules.opal=function(e){var k=e.Object;return e.nil,e.add_stubs("require,autoload"),k.$require("opal/base"),k.$require("opal/mini"),k.$require("corelib/kernel/format"),k.$require("corelib/string/encoding"),k.$autoload("Math","corelib/math"),k.$require("corelib/complex/base"),k.$autoload("Complex","corelib/complex"),k.$require("corelib/rational/base"),k.$autoload("Rational","corelib/rational"),k.$require("corelib/time"),k.$autoload("Struct","corelib/struct"),k.$autoload("Set","corelib/set"),k.$autoload("Dir","corelib/dir"),k.$autoload("File","corelib/file"),k.$require("corelib/process/base"),k.$autoload("Process","corelib/process"),k.$autoload("Random","corelib/random"),k.$require("corelib/unsupported"),k.$require("corelib/binding"),k.$require("corelib/irb")};Opal.modules["js/proxy"]=function(e){var k=e.module,E=e.truthy,H=e.def,x=e.klass,ee=e.const_set,Z=e.slice,T=e.range,J=e.send,g=e.to_a,K=e.gvars,$e=e.top,W=[],G=e.nil;return e.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),$e.$require("opal"),$e.$require("native"),function(O,M){var v=k(O,"JS"),q=[v].concat(M),I=e.$r(q);return function(j,z){var P=k(j,"Helpers"),m=[P].concat(z),A=e.$r(m);return H(P,"$wrap_result",function(S){return E(S&&typeof S.then=="function")?A("Promise").$new(S):E(typeof S=="object"&&S!==null)?A("Proxy").$new(S):S}),H(P,"$native_methods",function(){var S=this,w=G;return S.native_methods==null&&(S.native_methods=G),S.native_methods=function(){if(E(w=S.native_methods))return w;{let o=S.$to_n();const d=new Set;for(;o!==null;){for(const N of Reflect.ownKeys(o)){const h=N.toString(),l=S.$to_rb_name(h);typeof N!="symbol"&&h!==l&&d.add(l),d.add(h)}o=Object.getPrototypeOf(o)}return Array.from(d)}}()})}(q[0],q),function(j,z,P){var m=x(j,z,"Proxy"),A=[m].concat(P),D=e.$r(A);return m.$include(D("Enumerable")),m.$include(D("Helpers")),m.$attr_accessor("native"),ee(A[0],"IRREGULARS",["html","url","uri"]),H(m,"$initialize",function(w){var o=this;return o.native=o.$Native(w)}),H(m,"$method_missing",function S(w,o){var d=S.$$p||G,N,h,l,c=this,X=G,y=G,i=G,a=G,$=G,n=G;return S.$$p=null,N=Z(arguments,1),h=N,X=c.$to_js_name(w),E(c["$existing_property?"](X))||E(X["$end_with?"]("="))||c.$raise(D("NoMethodError"),"undefined method `"+w+"` for "+c),E(X["$end_with?"]("="))?(y=X["$[]"](T(0,-2,!1)),l=[y,h.$first()],J(c.$native(),"[]=",l),l[l.length-1]):(i=c.$native()["$[]"](X),E(typeof i=="function")?(a=h.$dup(),E(d)&&($=function(){let t=Array.prototype.slice.call(arguments);return J(d,"call",[c.$class().$new(this)].concat(g(t)))},a["$<<"]($)),n=i.apply(c.$to_n(),a.$to_n()),c.$wrap_result(n)):E(typeof i=="object"&&i!==null)?c.$wrap_result(i):i)},-2),H(m,"$to_str",function(){var w=this;return w.$to_n().toString()}),H(m,"$respond_to_missing?",function(w,o){return!0},-2),H(m,"$each",function S(){var w=S.$$p||G,o=this,d=G;return S.$$p=null,E(o["$respond_to?"]("length"))?(d=o.$length(),J(e.Range.$new(0,d,!0),"each",[],function N(h){var l=N.$$s==null?this:N.$$s;return h==null&&(h=G),e.yield1(w,l["$[]"](h))},{$$s:o})):o.$enum_for("each")}),H(m,"$[]",function(w){var o=this,d=G;return d=o.$native()["$[]"](w),o.$wrap_result(d)}),H(m,"$[]=",function(w,o){var d=this;return d.$native()["$[]="](w,o),d.$wrap_result(d.$native())}),H(m,"$to_n",function(){var w=this;return w.$native().$to_n()}),H(m,"$length",function(){var w=this;return w.$native().$length()}),m.$private(),H(m,"$to_js_name",function(w){return J(w.$to_s().$split("_").$map(),"with_index",[],function(d,N){return d==null&&(d=G),N==null&&(N=G),E(D("IRREGULARS")["$include?"](d.$gsub("=","").$downcase()))?d.$upcase():E(N["$zero?"]())?d:d.$capitalize()}).$join()}),H(m,"$to_rb_name",function(w){return J(w.$to_s(),"gsub",[/([A-Z]+)/],function(){var d;return"_"+((d=K["~"])===G?G:d["$[]"](1)).$downcase()}).$sub(/^_/,"")}),H(m,"$existing_property?",function(w){var o=this;return w in o.$to_n()})}(q[0],null,q),function(j,z,P){var m=x(j,z,"Promise"),A=[m].concat(P),D=e.$r(A);return m.$include(D("Helpers")),H(m,"$then",function S(){var w=S.$$p||G,o,d=this,N=G;return S.$$p=null,N=function(h){var l=w.$call(d.$wrap_result(h));return l&&typeof l.then=="function"?l:l&&typeof l.to_n=="function"?l.to_n():l},o=[d.$to_n().then(N)],J(d,"native=",o),o[o.length-1]}),H(m,"$catch",function S(){var w=S.$$p||G,o,d=this,N=G;return S.$$p=null,N=function(h){var l=w.$call(d.$wrap_result(h));return l&&typeof l.then=="function"?l:l&&typeof l.to_n=="function"?l.to_n():l},o=[d.$to_n().catch(N)],J(d,"native=",o),o[o.length-1]})}(q[0],I("Proxy"),q)}(W[0],W)};Opal.modules["opal_stimulus/stimulus_controller"]=function(e){var k=e.klass,E=e.const_set,H=e.Opal,x=e.defs,ee=e.truthy,Z=e.send,T=e.gvars,J=e.return_val,g=e.thrower,K=e.rb_plus,$e=e.eqeqeq,W=e.def,G=e.top,O=[],M=e.nil,v=e.$$$;return e.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),G.$require("opal"),G.$require("native"),G.$require("js/proxy"),function(q,I,j){var z=k(q,I,"StimulusController"),P=[z].concat(j),m=e.$r(P),A=z.$$prototype;return A.window=A.document=M,E(P[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),E(P[0],"DEFAULT_GETTERS",["element"]),x(z,"$inherited",function(S){return H.$bridge(S.$stimulus_controller(),S)}),x(z,"$stimulus_controller",function(){var S=this;return S.stimulus_controller==null&&(S.stimulus_controller=M),ee(S.stimulus_controller)||(S.stimulus_controller=class extends Controller{}),S.stimulus_controller}),x(z,"$stimulus_name",function(){var S=this;return S.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),x(z,"$method_added",function(S){var w=this;if(ee(m("DEFAULT_GETTERS")["$include?"](S)))return M;w.$stimulus_controller().prototype[S]=function(...o){try{var d=o.map(function(N){return N&&typeof N=="object"&&!N.$$class?e.JS.Proxy.$new(N):N});return this["$"+S].apply(this,d)}catch(N){console.error("Uncaught",N)}}}),x(z,"$to_ruby_name",function(S){return Z(S.$to_s(),"gsub",[/([A-Z]+)/],function(){var o;return"_"+((o=T["~"])===M?M:o["$[]"](1)).$downcase()}).$sub(/^_/,"")}),x(z,"$register_all!",function(){try{var S=g("return"),w=this;return Z(w.$subclasses(),"each",[],function o(d){return d==null&&(d=M),Z(d,"define_method",["dummy"],J(M)),ee(application.controllers["$include?"](d.$stimulus_name()))&&S.$throw(M,o.$$is_lambda),application.register(d.$stimulus_name(),d.$stimulus_controller())},{$$ret:S})}catch(o){if(o===S)return o.$v;throw o}finally{S.is_orphan=!0}}),x(z,"$targets=",function(S){var w=this;return S==null&&(S=[]),w.$stimulus_controller().targets=S,Z(S,"each",[],function o(d){var N=o.$$s==null?this:o.$$s,h=M,l=M,c=M,X=M,y=M,i=M;d==null&&(d=M),h=d.$to_s(),l=N.$to_ruby_name(d),Z(N,"define_method",[K(l,"_target")],function(){return v(m("JS"),"Proxy").$new(this[K(h,"Target")])}),Z(N,"define_method",[K(l,"_targets")],function(){return Z(this[K(h,"Targets")],"map",[],function(n){return n==null&&(n=M),v(m("JS"),"Proxy").$new(n)})}),Z(N,"define_method",[K(K("has_",l),"_target")],function(){return this[K(K("has",h.$capitalize()),"Target")]}),c=K(l,"_target_connected"),X=K(h,"TargetConnected"),N.$stimulus_controller().prototype[X]=function(){if(this["$respond_to?"]&&this["$respond_to?"](c))return this["$"+c]()},y=K(l,"_target_disconnected"),i=K(h,"TargetDisconnected"),N.$stimulus_controller().prototype[i]=function(){if(this["$respond_to?"]&&this["$respond_to?"](y))return this["$"+y]()}},{$$s:w})},-1),x(z,"$outlets=",function(S){var w=this;return S==null&&(S=[]),w.$stimulus_controller().outlets=S,Z(S,"each",[],function o(d){var N=o.$$s==null?this:o.$$s,h=M,l=M,c=M,X=M,y=M,i=M;d==null&&(d=M),h=d.$to_s(),l=N.$to_ruby_name(d),Z(N,"define_method",[K(l,"_outlet")],function(){return this[K(h,"Outlet")]}),Z(N,"define_method",[K(l,"_outlets")],function(){return this[K(h,"Outlets")]}),Z(N,"define_method",[K(K("has_",l),"_outlet")],function(){return this[K(K("has",h.$capitalize()),"Outlet")]}),c=K(l,"_outlet_connected"),X=K(h,"OutletConnected"),N.$stimulus_controller().prototype[X]=function(){if(this["$respond_to?"]&&this["$respond_to?"](c))return this["$"+c]()},y=K(l,"_outlet_disconnected"),i=K(h,"OutletDisconnected"),N.$stimulus_controller().prototype[i]=function(){if(this["$respond_to?"]&&this["$respond_to?"](y))return this["$"+y]()}},{$$s:w})},-1),x(z,"$values=",function(S){var w=this,o=M;return S==null&&(S=new Map),o=new Map,Z(S,"each",[],function d(N,h){var l=d.$$s==null?this:d.$$s,c=M,X=M,y=M,i=M;N==null&&(N=M),h==null&&(h=M),N=l.$to_ruby_name(N),c=$e("string",X=h)?String:$e("number",X)?Number:$e("boolean",X)?Boolean:$e("array",X)?Array:$e("object",X)?Object:l.$raise(m("ArgumentError"),"Unsupported value type: "+h+", please use :string, :number, :boolean, :array, or :object"),o["$[]="](N,c),l.$stimulus_controller().values=o.$to_n(),Z(l,"define_method",[K(N,"_value")],function a(){var $=a.$$s==null?this:a.$$s;return $.$Native(this[K(N,"Value")])},{$$s:l}),Z(l,"define_method",[K(N,"_value=")],function a($){var n=a.$$s==null?this:a.$$s;return $==null&&($=M),n.$Native(this[K(N,"Value")]=$)},{$$s:l}),Z(l,"define_method",["has_"+N],function(){return this[K(K("has",N.$to_s().$capitalize()),"Value")]}),y=""+N+"_value_changed",i=""+N+"ValueChanged",l.$stimulus_controller().prototype[i]=function(a,$){if(h["$=="]("object")&&(a=JSON.stringify(a),$=JSON.stringify($)),this["$respond_to?"]&&this["$respond_to?"](y))return this["$"+y](a,$)}},{$$s:w})},-1),x(z,"$classes=",function(S){var w=this;return S==null&&(S=[]),w.$stimulus_controller().classes=S,Z(S,"each",[],function o(d){var N=o.$$s==null?this:o.$$s,h=M,l=M;return d==null&&(d=M),h=d.$to_s(),l=N.$to_ruby_name(d),Z(N,"define_method",[""+l+"_class"],function(){return this[K(h,"Class")]}),Z(N,"define_method",[""+l+"_classes"],function(){return this[K(h,"Classes")]}),Z(N,"define_method",["has_"+l+"_class"],function(){return this[K(K("has",h.$capitalize()),"Class")]})},{$$s:w})},-1),W(z,"$element",function(){return v(m("JS"),"Proxy").$new(this.element)}),W(z,"$window",function(){var S=this,w=M;return T.$==null&&(T.$=M),S.window=ee(w=S.window)?w:v(m("JS"),"Proxy").$new(T.$.$window())}),W(z,"$document",function(){var S=this,w=M;return T.$==null&&(T.$=M),S.document=ee(w=S.document)?w:v(m("JS"),"Proxy").$new(T.$.$document())})}(O[0],Controller,O)};Opal.modules["opal_vite/concerns/v1/stimulus_helpers"]=function(e){var k=e.module,E=e.def,H=e.truthy,x=e.eqeq,ee=e.slice,Z=e.send,T=e.ensure_kwargs,J=e.get_kwarg,g=e.hash_get,K=e.rb_plus,$e=e.range,W=e.const_set,G=[],O=e.$r(G),M=e.nil,v=e.$$$;return e.add_stubs("camelize,has_target?,target_set_value,target_set_html,set_target_style,get_target_style,==,show_target,hide_target,call,body_style,to_n,storage_get,is_a?,parse_int,event_data,js_timestamp,is_nan?,parse_float,to_s,empty?,map,respond_to?,fetch_json_promise,fetch_json_safe,js_then,js_catch,console_error,private,include?,+,upcase,[],downcase,split,join,to_proc,first"),function(q,I){var j=k(q,"OpalVite"),z=[j].concat(I);return function(P,m){var A=k(P,"Concerns"),D=[A].concat(m);return function(S,w){var o=k(S,"V1"),d=[o].concat(w);return function(N,h){var l=k(N,"StimulusHelpers"),c=[l].concat(h),X=e.$r(c);return E(l,"$has_target?",function(i){var a=this,$=M;return $="has"+a.$camelize(i)+"Target",this[$]}),E(l,"$get_target",function(i){var a=this,$=M;return H(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$]):M}),E(l,"$get_targets",function(i){var a=this,$=M;return $=""+a.$camelize(i,!1)+"Targets",Array.from(this[$]||[])}),E(l,"$target_value",function(i){var a=this,$=M;return H(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].value):M}),E(l,"$target_set_value",function(i,a){var $=this,n=M;return H($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].value=a):M}),E(l,"$target_html",function(i){var a=this,$=M;return H(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].innerHTML):M}),E(l,"$target_set_html",function(i,a){var $=this,n=M;return H($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].innerHTML=a):M}),E(l,"$target_text",function(i){var a=this,$=M;return H(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].textContent):M}),E(l,"$target_set_text",function(i,a){var $=this,n=M;return H($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].textContent=a):M}),E(l,"$target_data",function(i,a){var $=this,n=M;return H($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].getAttribute("data-"+a)):M}),E(l,"$target_set_data",function(i,a,$){var n=this,t=M;return H(n["$has_target?"](i))?(t=""+n.$camelize(i,!1)+"Target",this[t].setAttribute("data-"+a,$)):M}),E(l,"$target_clear",function(i){var a=this;return a.$target_set_value(i,"")}),E(l,"$target_clear_html",function(i){var a=this;return a.$target_set_html(i,"")}),E(l,"$set_target_style",function(i,a,$){var n=this,t=M;return H(n["$has_target?"](i))?(t=""+n.$camelize(i,!1)+"Target",this[t].style[a]=$):M}),E(l,"$get_target_style",function(i,a){var $=this,n=M;return H($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].style[a]):M}),E(l,"$show_target",function(i){var a=this;return a.$set_target_style(i,"display","")}),E(l,"$hide_target",function(i){var a=this;return a.$set_target_style(i,"display","none")}),E(l,"$toggle_target_visibility",function(i){var a=this,$=M;return $=a.$get_target_style(i,"display"),x($,"none")?a.$show_target(i):a.$hide_target(i)}),E(l,"$add_target_class",function(i,a){var $=this,n=M;return H($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.add(a)):M}),E(l,"$remove_target_class",function(i,a){var $=this,n=M;return H($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.remove(a)):M}),E(l,"$toggle_target_class",function(i,a){var $=this,n=M;return H($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.toggle(a)):M}),E(l,"$has_target_class?",function(i,a){var $=this,n=M;return H($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.contains(a)):!1}),E(l,"$js_timestamp",function(){return Date.now()}),E(l,"$js_iso_date",function(){return new Date().toISOString()}),E(l,"$js_date",function(i){return i==null&&(i=M),H(i)?new Date(i):new Date},-1),E(l,"$js_regexp",function(i,a){return a==null&&(a=""),new RegExp(i,a)},-2),E(l,"$js_regexp_test",function(i,a,$){return $==null&&($=""),new RegExp(i,$).test(a)},-3),E(l,"$set_timeout",function y(i){var a=y.$$p||M;return y.$$p=null,setTimeout(function(){a.$call()},i)}),E(l,"$set_interval",function y(i){var a=y.$$p||M;return y.$$p=null,setInterval(function(){a.$call()},i)}),E(l,"$clear_timeout",function(i){return clearTimeout(i)}),E(l,"$clear_interval",function(i){return clearInterval(i)}),E(l,"$body_style",function(i,a){return document.body.style[i]=a}),E(l,"$lock_body_scroll",function(){var i=this;return i.$body_style("overflow","hidden")}),E(l,"$unlock_body_scroll",function(){var i=this;return i.$body_style("overflow","")}),E(l,"$js_array",function(){return[]}),E(l,"$js_array_push",function(i,a){return i.push(a.$to_n())}),E(l,"$js_array_length",function(i){return i.length}),E(l,"$js_array_at",function(i,a){return i[a]}),E(l,"$storage_get",function(i){return localStorage.getItem(i)}),E(l,"$storage_set",function(i,a){return localStorage.setItem(i,a)}),E(l,"$storage_remove",function(i){return localStorage.removeItem(i)}),E(l,"$storage_get_json",function(i,a){var $=this,n=M;return a==null&&(a=M),n=$.$storage_get(i),H(n===null)?a:JSON.parse(n)},-2),E(l,"$storage_set_json",function(i,a){return localStorage.setItem(i,JSON.stringify(a.$to_n()))}),E(l,"$dispatch_window_event",function(i,a){var $=M;a==null&&(a=new Map),$=H(a["$is_a?"](X("Hash")))?a.$to_n():a;const n=new CustomEvent(i,{detail:$});window.dispatchEvent(n)},-2),E(l,"$dispatch_event",function(i,a){var $=M;a==null&&(a=new Map),$=H(a["$is_a?"](X("Hash")))?a.$to_n():a;const n=new CustomEvent(i,{detail:$});this.element.dispatchEvent(n)},-2),E(l,"$on_window_event",function y(i){var a=y.$$p||M;return y.$$p=null,window.addEventListener(i,a)}),E(l,"$off_window_event",function(i,a){return window.removeEventListener(i,a)}),E(l,"$on_document_event",function y(i){var a=y.$$p||M;return y.$$p=null,document.addEventListener(i,a)}),E(l,"$on_dom_ready",function y(){var i=y.$$p||M;return y.$$p=null,document.addEventListener("DOMContentLoaded",i)}),E(l,"$on_element_event",function y(i,a){var $=y.$$p||M;return y.$$p=null,i.addEventListener(a,$)}),E(l,"$off_element_event",function(i,a,$){return i.removeEventListener(a,$)}),E(l,"$on_controller_event",function y(i){var a=y.$$p||M;y.$$p=null;const $=a;this.element.addEventListener(i,function(n){$(n)})}),E(l,"$event_target",function(){return event.currentTarget}),E(l,"$event_data",function(i){return event.currentTarget.getAttribute("data-"+i)}),E(l,"$event_data_int",function(i){var a=this;return a.$parse_int(a.$event_data(i))}),E(l,"$prevent_default",function(){return event.preventDefault()}),E(l,"$event_key",function(){return event.key}),E(l,"$add_class",function(i,a){return i.classList.add(a)}),E(l,"$remove_class",function(i,a){return i.classList.remove(a)}),E(l,"$toggle_class",function(i,a){return i.classList.toggle(a)}),E(l,"$has_class?",function(i,a){return i.classList.contains(a)}),E(l,"$set_attr",function(i,a,$){return i.setAttribute(a,$)}),E(l,"$get_attr",function(i,a){return i.getAttribute(a)}),E(l,"$remove_attr",function(i,a){return i.removeAttribute(a)}),E(l,"$set_style",function(i,a,$){return i.style[a]=$}),E(l,"$set_html",function(i,a){return i.innerHTML=a}),E(l,"$set_text",function(i,a){return i.textContent=a}),E(l,"$get_value",function(i){return i.value}),E(l,"$set_value",function(i,a){return i.value=a}),E(l,"$focus",function(i){return i.focus()}),E(l,"$has_attr?",function(i,a){return i.hasAttribute(a)}),E(l,"$create_element",function(i){return document.createElement(i)}),E(l,"$append_child",function(i,a){return i.appendChild(a)}),E(l,"$remove_element",function(i){return i.remove()}),E(l,"$next_sibling",function(i){return i.nextElementSibling}),E(l,"$prev_sibling",function(i){return i.previousElementSibling}),E(l,"$parent",function(i){return i.parentElement}),E(l,"$query",function(i){return document.querySelector(i)}),E(l,"$query_all",function(i){return Array.from(document.querySelectorAll(i))}),E(l,"$query_element",function(i){return this.element.querySelector(i)}),E(l,"$query_all_element",function(i){return Array.from(this.element.querySelectorAll(i))}),E(l,"$doc_root",function(){return document.documentElement}),E(l,"$set_root_attr",function(i,a){return document.documentElement.setAttribute(i,a)}),E(l,"$get_root_attr",function(i){return document.documentElement.getAttribute(i)}),E(l,"$clone_template",function(i){var a=this,$=M;return $=""+a.$camelize(i,!1)+"Target",this[$].content.cloneNode(!0)}),E(l,"$template_first_child",function(i){return i.firstElementChild}),E(l,"$element_add_class",function(i){return this.element.classList.add(i)}),E(l,"$element_remove_class",function(i){return this.element.classList.remove(i)}),E(l,"$element_toggle_class",function(i){return this.element.classList.toggle(i)}),E(l,"$generate_id",function(){var i=this;return i.$js_timestamp()}),E(l,"$target_focus",function(i){var a=this,$=M;return H(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].focus()):M}),E(l,"$target_blur",function(i){var a=this,$=M;return H(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].blur()):M}),E(l,"$parse_int",function(i,a){return a==null&&(a=10),parseInt(i,a)},-2),E(l,"$parse_float",function(i){return parseFloat(i)}),E(l,"$is_nan?",function(i){return Number.isNaN(i)}),E(l,"$parse_int_or",function(i,a){var $=this,n=M;return a==null&&(a=0),n=$.$parse_int(i),H($["$is_nan?"](n))?a:n},-2),E(l,"$parse_float_or",function(i,a){var $=this,n=M;return a==null&&(a=0),n=$.$parse_float(i),H($["$is_nan?"](n))?a:n},-2),E(l,"$js_prop",function(i){return this[i.$to_s()]}),E(l,"$js_set_prop",function(i,a){return this[i.$to_s()]=a}),E(l,"$js_has_prop?",function(i){return!!this[i.$to_s()]}),E(l,"$js_call",function(i,a){var $,n,t=M;return $=ee(arguments,1),n=$,H(n["$empty?"]())?this[i.$to_s()]():(t=Z(n,"map",[],function(s){return s==null&&(s=M),H(s["$respond_to?"]("to_n"))?s.$to_n():s}),this[i.$to_s()].apply(this,t))},-2),E(l,"$js_call_on",function(i,a,$){var n,t,r=M;return n=ee(arguments,2),t=n,H(t["$empty?"]())?i[a.$to_s()]():(r=Z(t,"map",[],function(u){return u==null&&(u=M),H(u["$respond_to?"]("to_n"))?u.$to_n():u}),i[a.$to_s()].apply(i,r))},-3),E(l,"$js_get",function(i,a){return i[a.$to_s()]}),E(l,"$js_set",function(i,a,$){return i[a.$to_s()]=$}),E(l,"$json_parse",function(i){return JSON.parse(i)}),E(l,"$json_stringify",function(i){var a=M;return a=H(i["$respond_to?"]("to_n"))?i.$to_n():i,JSON.stringify(a)}),E(l,"$console_log",function(i){var a,$;return a=ee(arguments),$=a,console.log.apply(console,$)},-1),E(l,"$console_warn",function(i){var a,$;return a=ee(arguments),$=a,console.warn.apply(console,$)},-1),E(l,"$console_error",function(i){var a,$;return a=ee(arguments),$=a,console.error.apply(console,$)},-1),E(l,"$js_string_char_at",function(i,a){return i.charAt(a)}),E(l,"$js_substring",function(i,a,$){return $==null&&($=M),H($)?i.substring(a,$):i.substring(a)},-3),E(l,"$js_split",function(i,a){return i.split(a)}),E(l,"$js_trim",function(i){return i.trim()}),E(l,"$js_includes?",function(i,a){return i.includes(a)}),E(l,"$js_equals?",function(i,a){return i===a}),E(l,"$js_loose_equals?",function(i,a){return i==a}),E(l,"$js_random",function(){return Math.random()}),E(l,"$js_min",function(i,a){return Math.min(i,a)}),E(l,"$js_max",function(i,a){return Math.max(i,a)}),E(l,"$js_abs",function(i){return Math.abs(i)}),E(l,"$js_round",function(i){return Math.round(i)}),E(l,"$js_ceil",function(i){return Math.ceil(i)}),E(l,"$js_to_fixed",function(i,a){return i.toFixed(a)}),E(l,"$random_int",function(i){return Math.floor(Math.random()*i)}),E(l,"$js_floor",function(i){return Math.floor(i)}),E(l,"$js_global_exists?",function(i){return typeof window[i]<"u"}),E(l,"$js_global",function(i){return window[i]}),E(l,"$js_new",function(i,a){var $,n,t=M;return $=ee(arguments,1),n=$,H(n["$empty?"]())?new i:(t=Z(n,"map",[],function(s){return s==null&&(s=M),s!=null&&typeof s.$to_n=="function"?s.$to_n():s}),Reflect.construct(i,t))},-2),E(l,"$js_define_method",function y(i){var a=y.$$p||M;return y.$$p=null,this[i.$to_s()]=a}),E(l,"$js_define_method_on",function y(i,a){var $=y.$$p||M;return y.$$p=null,i[a.$to_s()]=$}),E(l,"$js_length",function(i){return i.length}),E(l,"$js_map",function y(i){var a=y.$$p||M;return y.$$p=null,i.map(a)}),E(l,"$js_filter",function y(i){var a=y.$$p||M;return y.$$p=null,i.filter(a)}),E(l,"$js_reduce",function y(i,a){var $=y.$$p||M;return y.$$p=null,i.reduce($,a)}),E(l,"$js_each",function y(i){var a=y.$$p||M;return y.$$p=null,i.forEach(a)}),E(l,"$js_slice",function(i,a,$){return $==null&&($=M),H($)?i.slice(a,$):i.slice(a)},-3),E(l,"$js_object",function(){return{}}),E(l,"$js_keys",function(i){return Object.keys(i)}),E(l,"$js_values",function(i){return Object.values(i)}),E(l,"$js_entries",function(i){return Object.entries(i)}),E(l,"$js_unique_count",function(i){return new Set(i).size}),E(l,"$js_fetch",function(i){return fetch(i)}),E(l,"$fetch_json",function y(i){var a=y.$$p||M;y.$$p=null,fetch(i).then($=>$.json()).then($=>a.$call($)).catch($=>console.error("Fetch error:",$))}),E(l,"$fetch_json_promise",function(i){return fetch(i).then(a=>a.json())}),E(l,"$fetch_json_safe",function(i){return fetch(i).then(function(a){if(!a.ok)throw new Error("Network response was not ok: "+a.status);return a.json()})}),E(l,"$fetch_all_json",function(i){var a=this,$=M;return $=Z(i,"map",[],function n(t){var r=n.$$s==null?this:n.$$s;return t==null&&(t=M),r.$fetch_json_promise(t)},{$$s:a}),Promise.all($)}),E(l,"$fetch_json_with_handlers",function(i,a){var $,n,t=this,r=M;return a=T(a),$=J(a,"on_success"),n=g(a,"on_error"),n==null&&(n=M),r=t.$fetch_json_safe(i),r=Z(t,"js_then",[r],function(u){return u==null&&(u=M),$.$call(u)}),H(n)?Z(t,"js_catch",[r],function(u){return u==null&&(u=M),n.$call(u)}):Z(t,"js_catch",[r],function s(u){var f=s.$$s==null?this:s.$$s;return u==null&&(u=M),f.$console_error("Fetch error:",u)},{$$s:t})}),E(l,"$promise_all",function(i){return Promise.all(i)}),E(l,"$promise_race",function(i){return Promise.race(i)}),E(l,"$promise_resolve",function(i){var a=M;return a=H(i["$respond_to?"]("to_n"))?i.$to_n():i,Promise.resolve(a)}),E(l,"$promise_reject",function(i){return Promise.reject(i)}),E(l,"$js_then",function y(i){var a=y.$$p||M;return y.$$p=null,i.then(a)}),E(l,"$js_catch",function y(i){var a=y.$$p||M;return y.$$p=null,i.catch(a)}),E(l,"$js_finally",function y(i){var a=y.$$p||M;return y.$$p=null,i.finally(a)}),l.$private(),E(l,"$camelize",function(i,a){var $=M,n=M;return a==null&&(a=!0),$=i.$to_s(),H($["$include?"]("_"))?(n=$.$split("_"),H(a)?Z(n,"map",[],"capitalize".$to_proc()).$join():K([n.$first()],Z(n["$[]"]($e(1,-1,!1)),"map",[],"capitalize".$to_proc())).$join()):H(a)?K($["$[]"](0).$upcase(),$["$[]"]($e(1,-1,!1)).$to_s()):K($["$[]"](0).$downcase(),$["$[]"]($e(1,-1,!1)).$to_s())},-2)}(d[0],d)}(D[0],D)}(z[0],z)}(G[0],G),W(G[0],"StimulusHelpers",v(v(v(O("OpalVite"),"Concerns"),"V1"),"StimulusHelpers"))};Opal.modules["services/todo_storage_service"]=function(e){var k=e.klass,E=e.def,H=e.truthy,x=[],ee=e.nil;return e.add_stubs("include,attr_reader,storage_get_json,js_timestamp,js_iso_date,all,to_n,save"),function(Z,T,J){var g=k(Z,T,"TodoStorageService"),K=[g].concat(J),$e=e.$r(K),W=g.$$prototype;return W.storage_key=ee,g.$include($e("StimulusHelpers")),g.$attr_reader("storage_key"),E(g,"$initialize",function(O){var M=this;return O==null&&(O="opal_todos"),M.storage_key=O},-1),E(g,"$all",function(){var O=this;return O.$storage_get_json(O.storage_key,[])}),E(g,"$save",function(O){var M=this;return localStorage.setItem(M.storage_key,JSON.stringify(O))}),E(g,"$add",function(O){var M=this,v=ee,q=ee;return v=new Map([["id",M.$js_timestamp()],["text",O],["completed",!1],["createdAt",M.$js_iso_date()]]),q=M.$all(),q.push(v.$to_n()),M.$save(q),v.$to_n()}),E(g,"$find",function(O){var M=this,v=ee;return v=M.$all(),v.find(function(q){return q.id===O})}),E(g,"$toggle",function(O){var M=this,v=ee,q=ee;return v=M.$all(),q=v.find(function(I){return I.id===O}),H(q)?(q.completed=!q.completed,M.$save(v),!0):!1}),E(g,"$update_text",function(O,M){var v=this,q=ee,I=ee;return q=v.$all(),I=q.find(function(j){return j.id===O}),H(I)?(I.text=M,v.$save(q),!0):!1}),E(g,"$delete",function(O){var M=this,v=ee,q=ee;return v=M.$all(),q=v.filter(function(I){return I.id!==O}),M.$save(q)}),E(g,"$clear_completed",function(){var O=this,M=ee,v=ee,q=ee;return M=O.$all(),v=M.filter(function(I){return I.completed}).length,q=M.filter(function(I){return!I.completed}),O.$save(q),v}),E(g,"$filter",function(O){var M=this,v=ee;switch(v=M.$all(),O.valueOf()){case"active":return v.filter(function(q){return!q.completed});case"completed":return v.filter(function(q){return q.completed});default:return v}}),E(g,"$counts",function(){var O=this,M=ee,v=ee,q=ee,I=ee;return M=O.$all(),v=M.length,q=M.filter(function(j){return!j.completed}).length,I=M.filter(function(j){return j.completed}).length,new Map([["total",v],["active",q],["completed",I]])})}(x[0],null,x)};Opal.modules["services/todo_presenter"]=function(e){var k=e.klass,E=e.assign_ivar,H=e.def,x=e.truthy,ee=e.eqeq,Z=[],T=e.nil;return e.add_stubs("include,get_target,set_html,render_todo_item,show_empty_state,hide_empty_state,clone_template,template_first_child,setup_todo_element,append_child,query,set_text,has_target?,target_set_html,[],==,show_target,hide_target,private,set_attr,add_class,setup_checkbox,setup_text,setup_buttons"),function(J,g,K){var $e=k(J,g,"TodoPresenter"),W=[$e].concat(K),G=e.$r(W),O=$e.$$prototype;return O.controller=T,$e.$include(G("StimulusHelpers")),H($e,"$initialize",E("controller")),H($e,"$render_all",function(v){var q=this,I=T,j=T,z=T;I=q.controller.$get_target("list"),q.$set_html(I,""),j=v.length;for(var P=0;P<j;P++)z=v[P],q.$render_todo_item(z,I);return x(j===0)?q.$show_empty_state():q.$hide_empty_state()}),H($e,"$render_todo_item",function(v,q){var I=this,j=T,z=T;return j=I.controller.$clone_template("template"),z=I.$template_first_child(j),x(z)?(I.$setup_todo_element(z,v),I.$append_child(q,j)):T}),H($e,"$update_todo_text",function(v,q){var I=this,j=T,z=T;return j=I.$query('[data-todo-id="'+v+'"]'),x(j)?(z=j.querySelector(".todo-text"),x(z)?I.$set_text(z,q):T):T}),H($e,"$update_count",function(v){var q=this;return x(q.controller["$has_target?"]("count"))&&q.controller.$target_set_html("count",""+v["$[]"]("active")+" active, "+v["$[]"]("completed")+" completed"),ee(v["$[]"]("total"),0)?q.$show_empty_state():T}),H($e,"$show_empty_state",function(){var v=this;return x(v.controller["$has_target?"]("emptyState"))?v.controller.$show_target("emptyState"):T}),H($e,"$hide_empty_state",function(){var v=this;return x(v.controller["$has_target?"]("emptyState"))?v.controller.$hide_target("emptyState"):T}),$e.$private(),H($e,"$setup_todo_element",function(v,q){var I=this;return I.$set_attr(v,"data-todo-id",q.id),x(q.completed)&&I.$add_class(v,"completed"),I.$setup_checkbox(v,q),I.$setup_text(v,q),I.$setup_buttons(v,q)}),H($e,"$setup_checkbox",function(v,q){var I=this,j=T;return j=v.querySelector(".todo-checkbox"),x(j)?(I.$set_attr(j,"data-todo-id",q.id),j.checked=q.completed):T}),H($e,"$setup_text",function(v,q){var I=this,j=T;return j=v.querySelector(".todo-text"),x(j)?I.$set_text(j,q.text):T}),H($e,"$setup_buttons",function(v,q){var I=this,j=T,z=T;return j=v.querySelector(".edit-btn"),x(j)&&I.$set_attr(j,"data-todo-id",q.id),z=v.querySelector(".delete-btn"),x(z)?I.$set_attr(z,"data-todo-id",q.id):T})}(Z[0],null,Z)};Opal.modules["controllers/todo_controller"]=function(e){var k=e.klass,E=e.send2,H=e.find_super,x=e.def,ee=e.send,Z=e.truthy,T=e.eqeq,J=[],g=e.$r(J),K=e.nil;return e.add_stubs("include,targets=,values=,new,on_window_event,parse_int,handle_update_todo,render_todos,target_value,show_toast,add,target_set_value,event_data_int,toggle,delete,find,dispatch_window_event,clear_completed,==,event_data,query_all_element,each,remove_class,add_class,event_target,private,update_text,update_todo_text,filter,render_all,update_count,counts"),function($e,W,G){var O=k($e,W,"TodoController"),M=[O].concat(G),v=e.$r(M),q=O.$$prototype;return q.storage_key_value=q.storage=q.presenter=K,O.$include(v("StimulusHelpers")),O["$targets="](["list","input","template","count","emptyState"]),O["$values="](new Map([["storage_key","string"],["filter","string"]])),x(O,"$initialize",function I(){var j=I.$$p||K,z=this;return I.$$p=null,E(z,H(z,"initialize",I,!1,!0),"initialize",[],j),z.storage_key_value="opal_todos",z.filter_value="all"}),x(O,"$connect",function(){var j=this;return j.storage=v("TodoStorageService").$new(j.storage_key_value),j.presenter=v("TodoPresenter").$new(j),ee(j,"on_window_event",["update-todo"],function z(P){var m=z.$$s==null?this:z.$$s,A=K,D=K,S=K;return P==null&&(P=K),A=P.detail,D=m.$parse_int(A.todoId),S=A.text,m.$handle_update_todo(D,S)},{$$s:j}),j.$render_todos()}),x(O,"$add_todo",function(){var j=this,z=K;return z=j.$target_value("input"),z=z.trim(),Z(z==="")?(j.$show_toast("Please enter a todo item","error"),K):(j.storage.$add(z),j.$target_set_value("input",""),j.$render_todos(),j.$show_toast("Todo added!","success"))}),x(O,"$toggle_todo",function(){var j=this,z=K;return z=j.$event_data_int("todo-id"),Z(j.storage.$toggle(z))?j.$render_todos():K}),x(O,"$delete_todo",function(){var j=this,z=K;return z=j.$event_data_int("todo-id"),j.storage.$delete(z),j.$render_todos(),j.$show_toast("Todo deleted","info")}),x(O,"$edit_todo",function(){var j=this,z=K,P=K;return z=j.$event_data_int("todo-id"),P=j.storage.$find(z),Z(P)?j.$dispatch_window_event("open-modal",new Map([["title","Edit Todo"],["todoId",z],["todoText",P.text]])):K}),x(O,"$clear_completed",function(){var j=this,z=K;return z=j.storage.$clear_completed(),T(z,0)?(j.$show_toast("No completed todos to clear","info"),K):(j.$render_todos(),j.$show_toast("Completed todos cleared","success"))}),x(O,"$set_filter",function(){var j=this,z=K,P=K;return z=j.$event_data("filter"),this.filterValue=z,P=j.$query_all_element("[data-filter]"),ee(P,"each",[],function m(A){var D=m.$$s==null?this:m.$$s;return A==null&&(A=K),D.$remove_class(A,"active")},{$$s:j}),j.$add_class(j.$event_target(),"active"),j.$render_todos()}),O.$private(),x(O,"$handle_update_todo",function(j,z){var P=this;return Z(P.storage.$update_text(j,z))?(P.presenter.$update_todo_text(j,z),P.$show_toast("Todo updated!","success")):K}),x(O,"$render_todos",function(){var j=this,z=K,P=K;return z=this.filterValue||"all",P=j.storage.$filter(z),j.presenter.$render_all(P),j.presenter.$update_count(j.storage.$counts())}),x(O,"$show_toast",function(j,z){var P=this;return P.$dispatch_window_event("show-toast",new Map([["message",j],["type",z]]))})}(J[0],g("StimulusController"),J)};Opal.modules["controllers/form_controller"]=function(e){var k=e.klass,E=e.return_val,H=e.def,x=e.truthy,ee=e.neqeq,Z=e.send,T=[],J=e.$r(T),g=e.nil;return e.add_stubs("include,targets=,event_target,next_sibling,get_value,has_attr?,parse_int_or,get_attr,js_regexp_test,!=,add_class,has_class?,set_text,set_style,remove_class,prevent_default,query_all_element,each,dispatch_window_event"),function(K,$e,W){var G=k(K,$e,"FormController"),O=[G].concat(W),M=e.$r(O);return G.$include(M("StimulusHelpers")),G["$targets="](["input","error"]),H(G,"$connect",E(g)),H(G,"$validate",function(){var q=this,I=g,j=g,z=g,P=g,m=g,A=g,D=g,S=g;return I=q.$event_target(),j=q.$next_sibling(I),z=q.$get_value(I).trim(),P=q["$has_attr?"](I,"data-required"),m=q.$parse_int_or(q.$get_attr(I,"data-min-length"),0),A=q.$parse_int_or(q.$get_attr(I,"data-max-length"),1e3),D=q.$get_attr(I,"data-pattern"),S="",x(P)&&x(z==="")?S="This field is required":x(m>0&&z.length<m)?S="Must be at least "+m+" characters":x(A>0&&z.length>A)?S="Must be at most "+A+" characters":x(D)&&x(z!=="")&&(x(q.$js_regexp_test(D,z))||(S="Invalid format")),ee(S,"")?(q.$add_class(I,"error"),x(j)&&x(q["$has_class?"](j,"error-message"))?(q.$set_text(j,S),q.$set_style(j,"display","block")):g):(q.$remove_class(I,"error"),x(j)&&x(q["$has_class?"](j,"error-message"))?q.$set_style(j,"display","none"):g)}),H(G,"$submit",function(){var q=this,I=g,j=g;return q.$prevent_default(),I=q.$query_all_element('[data-form-target="input"]'),j=!0,Z(I,"each",[],function z(P){var m=z.$$s==null?this:z.$$s;P==null&&(P=g);const A=new Event("input",{bubbles:!0});return P.dispatchEvent(A),x(m["$has_class?"](P,"error"))?j=!1:g},{$$s:q}),x(j)?(q.$dispatch_window_event("show-toast",new Map([["message","Form submitted successfully!"],["type","success"]])),this.element.reset(),Z(I,"each",[],function z(P){var m=z.$$s==null?this:z.$$s,A=g;return P==null&&(P=g),m.$remove_class(P,"error"),A=m.$next_sibling(P),x(A)&&x(m["$has_class?"](A,"error-message"))?m.$set_style(A,"display","none"):g},{$$s:q})):(q.$dispatch_window_event("show-toast",new Map([["message","Please fix validation errors"],["type","error"]])),g)})}(T[0],J("StimulusController"),T)};Opal.modules["controllers/modal_controller"]=function(e){var k=e.klass,E=e.send,H=e.truthy,x=e.def,ee=e.eqeq,Z=[],T=e.$r(Z),J=e.nil;return e.add_stubs("include,targets=,on_window_event,has_target?,target_set_text,target_set_value,get_target,set_attr,open_modal,on_controller_event,close_modal,reset_form,event_target,close,==,event_key,get_value,dispatch_window_event,get_attr,dispatch_event,parse_int,private,element_add_class,add_target_class,set_timeout,target_focus,lock_body_scroll,element_remove_class,remove_target_class,unlock_body_scroll,remove_attr"),function(g,K,$e){var W=k(g,K,"ModalController"),G=[W].concat($e),O=e.$r(G);return W.$include(O("StimulusHelpers")),W["$targets="](["overlay","content","title","body","input"]),x(W,"$connect",function(){var v=this;return E(v,"on_window_event",["open-modal"],function q(I){var j=q.$$s==null?this:q.$$s,z=J,P=J,m=J,A=J,D=J;return I==null&&(I=J),z=I.detail,P=z.title,m=z.todoText,A=z.todoId,H(j["$has_target?"]("title"))&&H(P)&&j.$target_set_text("title",P),H(j["$has_target?"]("input"))&&H(m)&&(j.$target_set_value("input",m),D=j.$get_target("input"),j.$set_attr(D,"data-todo-id",A)),j.$open_modal()},{$$s:v}),E(v,"on_controller_event",["modal-save"],function q(I){var j=q.$$s==null?this:q.$$s,z=J;I==null&&(I=J),z=I.detail;const P=new CustomEvent("update-todo",{detail:z});return window.dispatchEvent(P),j.$close_modal(),H(j["$has_target?"]("input"))?j.$reset_form():J},{$$s:v})}),x(W,"$open",function(){var v=this;return v.$open_modal()}),x(W,"$open_with_data",function(){var v=this,q=J,I=J,j=J,z=J,P=J;return q=arguments[0],I=q.title,j=q.todoText,z=q.todoId,H(v["$has_target?"]("title"))&&H(I)&&v.$target_set_text("title",I),H(v["$has_target?"]("input"))&&H(j)&&(v.$target_set_value("input",j),P=v.$get_target("input"),v.$set_attr(P,"data-todo-id",z)),v.$open_modal()}),x(W,"$close",function(){var v=this;return v.$close_modal(),H(v["$has_target?"]("input"))?v.$reset_form():J}),x(W,"$close_on_overlay",function(){var v=this,q=J,I=J;return q=v.$event_target(),I=v.$get_target("overlay"),H(q===I)?v.$close():J}),x(W,"$close_on_escape",function(){var v=this;return ee(v.$event_key(),"Escape")?v.$close():J}),x(W,"$save",function(){var v=this,q=J,I=J,j=J;return q=v.$get_target("input"),I=v.$get_value(q),I=I.trim(),H(I==="")?(v.$dispatch_window_event("show-toast",new Map([["message","Please enter todo text"],["type","error"]])),J):(j=v.$get_attr(q,"data-todo-id"),v.$dispatch_event("modal-save",new Map([["todoId",v.$parse_int(j)],["text",I]])))}),W.$private(),x(W,"$open_modal",function(){var v=this;return v.$element_add_class("active"),v.$add_target_class("overlay","active"),v.$add_target_class("content","active"),H(v["$has_target?"]("input"))&&E(v,"set_timeout",[100],function q(){var I=q.$$s==null?this:q.$$s;return I.$target_focus("input")},{$$s:v}),v.$lock_body_scroll()}),x(W,"$close_modal",function(){var v=this;return v.$element_remove_class("active"),v.$remove_target_class("overlay","active"),v.$remove_target_class("content","active"),v.$unlock_body_scroll()}),x(W,"$reset_form",function(){var v=this,q=J;return v.$target_set_value("input",""),q=v.$get_target("input"),v.$remove_attr(q,"data-todo-id")})}(Z[0],T("StimulusController"),Z)};Opal.modules["controllers/toast_controller"]=function(e){var k=e.klass,E=e.send,H=e.def,x=e.truthy,ee=e.eqeqeq,Z=[],T=e.$r(Z),J=e.nil;return e.add_stubs("include,targets=,on_window_event,show,has_target?,get_target,query,puts,create_element,===,set_html,append_child,set_timeout,add_class,remove_class,remove_element,sample,[]"),function(g,K,$e){var W=k(g,K,"ToastController"),G=[W].concat($e),O=e.$r(G);return W.$include(O("StimulusHelpers")),W["$targets="](["container"]),H(W,"$connect",function(){var v=this;return E(v,"on_window_event",["show-toast"],function q(I){var j=q.$$s==null?this:q.$$s,z=J,P=J,m=J;return I==null&&(I=J),z=I.detail,P=z.message,m=z.type||"info",j.$show(P,m)},{$$s:v})}),H(W,"$show",function(v,q){var I=this,j=J,z=J,P=J,m=J;return v==null&&(v=J),q==null&&(q="info"),v=x(j=v)?j:arguments[0],x(arguments.length>1)&&(q=arguments[1]||"info"),z=x(I["$has_target?"]("container"))?I.$get_target("container"):J,z=x(j=z)?j:I.$query('.toast-container[data-toast-target="container"]'),x(z)?(P=I.$create_element("div"),P.className="toast toast-"+q,m=ee("success",j=q)?"":ee("error",j)?"":ee("warning",j)?"":"",I.$set_html(P,'<span class="toast-icon">'+m+'</span><span class="toast-message">'+v+"</span>"),I.$append_child(z,P),E(I,"set_timeout",[10],function A(){var D=A.$$s==null?this:A.$$s;return D.$add_class(P,"show")},{$$s:I}),E(I,"set_timeout",[3e3],function A(){var D=A.$$s==null?this:A.$$s;return D.$remove_class(P,"show"),E(D,"set_timeout",[300],function S(){var w=S.$$s==null?this:S.$$s;return w.$remove_element(P)},{$$s:D})},{$$s:I})):(I.$puts("No toast container found"),J)},-1),H(W,"$show_test",function(){var v=this,q=J,I=J;return q=[new Map([["text","Success message!"],["type","success"]]),new Map([["text","Error message!"],["type","error"]]),new Map([["text","Warning message!"],["type","warning"]]),new Map([["text","Info message!"],["type","info"]])],I=q.$sample(),v.$show(I["$[]"]("text"),I["$[]"]("type"))})}(Z[0],T("StimulusController"),Z)};Opal.modules["controllers/theme_controller"]=function(e){var k=e.klass,E=e.def,H=e.truthy,x=e.eqeq,ee=[],Z=e.$r(ee),T=e.nil;return e.add_stubs("include,load_theme,get_root_attr,==,set_root_attr,storage_set,event_target,set_text,dispatch_window_event,private,storage_get,query_element"),function(J,g,K){var $e=k(J,g,"ThemeController"),W=[$e].concat(K),G=e.$r(W);return $e.$include(G("StimulusHelpers")),E($e,"$connect",function(){var M=this;return M.$load_theme()}),E($e,"$toggle",function(){var M=this,v=T,q=T,I=T,j=T;return v=H(q=M.$get_root_attr("data-theme"))?q:"light",I=x(v,"light")?"dark":"light",M.$set_root_attr("data-theme",I),M.$storage_set("theme",I),j=M.$event_target(),M.$set_text(j,x(I,"dark")?" Light Mode":" Dark Mode"),M.$dispatch_window_event("show-toast",new Map([["message","Switched to "+I+" mode"],["type","info"]]))}),$e.$private(),E($e,"$load_theme",function(){var M=this,v=T,q=T,I=T;return v=H(q=M.$storage_get("theme"))?q:"light",M.$set_root_attr("data-theme",v),I=M.$query_element('[data-action*="toggle"]'),H(I)?M.$set_text(I,x(v,"dark")?" Light Mode":" Dark Mode"):T})}(ee[0],Z("StimulusController"),ee)};Opal.queue(function(e){var k=e.top,E=[],H=e.$r(E);return e.nil,e.add_stubs("require,puts,register_all!"),k.$require("native"),k.$require("opal_stimulus/stimulus_controller"),k.$require("opal_vite/concerns/v1/stimulus_helpers"),k.$require("services/todo_storage_service"),k.$require("services/todo_presenter"),k.$require("controllers/todo_controller"),k.$require("controllers/form_controller"),k.$require("controllers/modal_controller"),k.$require("controllers/toast_controller"),k.$require("controllers/theme_controller"),k.$puts("Practical App - Todo with Opal"),k.$puts("Ruby version: "+H("RUBY_VERSION")),H("StimulusController")["$register_all!"](),k.$puts("All controllers registered!")});
