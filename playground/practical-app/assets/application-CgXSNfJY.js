Opal.modules.native=function(n){var z=n.hash_put,w=n.module,D=n.defs,x=n.slice,ee=n.truthy,Z=n.send,M=n.Kernel,J=n.extract_kwargs,v=n.ensure_kwargs,L=n.hash_get,$e=n.range,W=n.to_a,Y=n.def,O=n.return_ivar,H=n.alias,b=n.klass,h=n.rb_minus,I=n.return_val,j=n.send2,k=n.find_super,F=n.eqeqeq,p=n.rb_ge,A=n.return_self,P=n.gvars,S=n.top,E=[],u=n.$r(E),d=n.nil,N=n.$$$;return n.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(g,c){var l=w(g,"Native"),q=[l].concat(c),G=n.$r(q);return D(l,"$is_a?",function(s,$){var t=this;try{return s instanceof t.$try_convert($)}catch{return!1}}),D(l,"$try_convert",function(s,$){var t=this;return $==null&&($=d),t["$native?"](s)?s:s["$respond_to?"]("to_n")?s.$to_n():$},-2),D(l,"$convert",function(s){var $=this;if($["$native?"](s))return s;if(s["$respond_to?"]("to_n"))return s.$to_n();$.$raise(G("ArgumentError"),""+s.$inspect()+" isn't native")}),D(l,"$call",function _(s,$,t){var e=_.$$p||d,r,i,a=this;_.$$p=null,r=x(arguments,2),i=r;var o=s[$];if(o instanceof Function){for(var m=new Array(i.length),T=0,K=i.length;T<K;T++){var C=i[T],V=a.$try_convert(C);m[T]=V===d?C:V}return e!==d&&m.push(e),a.$Native(o.apply(s,m))}else return a.$Native(o)},-3),D(l,"$proc",function _(){var s=_.$$p||d,$=this;return _.$$p=null,ee(s)||$.$raise(G("LocalJumpError"),"no block given"),Z(M,"proc",[],function t(e){var r,i,a=t.$$s==null?this:t.$$s,o=d;if(r=x(arguments),i=r,Z(i,"map!",[],function T(K){var C=T.$$s==null?this:T.$$s;return K==null&&(K=d),C.$Native(K)},{$$s:a}),o=a.$Native(this),this===n.global)return s.apply(a,i);var m=s.$$s;s.$$s=null;try{return s.apply(o,i)}finally{s.$$s=m}},{$$arity:-1,$$s:$})}),function(_,s){var $=w(_,"Helpers"),t=[$].concat(s),e=n.$r(t);return Y($,"$alias_native",function r(i,a,o){var m,T,K,C;r.$$p;var V=this;return r.$$p=null,m=x(arguments,1),T=J(m),T=v(T),m.length>0&&(K=m.shift()),K==null&&(K=i),C=L(T,"as"),C==null&&(C=d),ee(K["$end_with?"]("="))?Z(V,"define_method",[i],function re(ae){var le=re.$$s==null?this:re.$$s;return le.native==null&&(le.native=d),ae==null&&(ae=d),le.native[K["$[]"]($e(0,-2,!1))]=e("Native").$convert(ae),ae},{$$s:V}):ee(C)?Z(V,"define_method",[i],function re(ae){var le=re.$$p||d,_e,de,ge=re.$$s==null?this:re.$$s,ve=d;return ge.native==null&&(ge.native=d),re.$$p=null,_e=x(arguments),de=_e,ve=Z(e("Native"),"call",[ge.native,K].concat(W(de)),le.$to_proc()),ee(ve)?C.$new(ve.$to_n()):d},{$$arity:-1,$$s:V}):Z(V,"define_method",[i],function re(ae){var le=re.$$p||d,_e,de,ge=re.$$s==null?this:re.$$s;return ge.native==null&&(ge.native=d),re.$$p=null,_e=x(arguments),de=_e,Z(e("Native"),"call",[ge.native,K].concat(W(de)),le.$to_proc())},{$$arity:-1,$$s:V})},-2),Y($,"$native_reader",function(i){var a,o,m=this;return a=x(arguments),o=a,Z(o,"each",[],function T(K){var C=T.$$s==null?this:T.$$s;return K==null&&(K=d),Z(C,"define_method",[K],function V(){var re=V.$$s==null?this:V.$$s;return re.native==null&&(re.native=d),re.$Native(re.native[K])},{$$s:C})},{$$s:m})},-1),Y($,"$native_writer",function(i){var a,o,m=this;return a=x(arguments),o=a,Z(o,"each",[],function T(K){var C=T.$$s==null?this:T.$$s;return K==null&&(K=d),Z(C,"define_method",[""+K+"="],function V(re){var ae=V.$$s==null?this:V.$$s;return ae.native==null&&(ae.native=d),re==null&&(re=d),ae.$Native(ae.native[K]=re)},{$$s:C})},{$$s:m})},-1),Y($,"$native_accessor",function(i){var a,o,m=this;return a=x(arguments),o=a,Z(m,"native_reader",W(o)),Z(m,"native_writer",W(o))},-1)}(q[0],q),function(_,s){var $=w(_,"Wrapper"),t=[$].concat(s),e=n.$r(t);return Y($,"$initialize",function(i){var a=this;return ee(M["$native?"](i))||M.$raise(e("ArgumentError"),""+i.$inspect()+" isn't native"),a.native=i}),Y($,"$to_n",O("native")),D($,"$included",function(i){return i.$extend(e("Helpers"))})}(q[0],q),D(l,"$included",function(s){var $=this;return $.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),s.$include(G("Wrapper"))})}(E[0],E),function(g,c){var l=w(g,"Kernel"),q=[l].concat(c),G=n.$r(q);return Y(l,"$native?",function(s){return s==null||!s.$$class}),Y(l,"$Native",function _(s){_.$$p;var $=this;return _.$$p=null,ee(s==null)?d:ee($["$native?"](s))?N(G("Native"),"Object").$new(s):ee(s["$is_a?"](G("Array")))?Z(s,"map",[],function t(e){var r=t.$$s==null?this:t.$$s;return e==null&&(e=d),r.$Native(e)},{$$s:$}):ee(s["$is_a?"](G("Proc")))?Z($,"proc",[],function t(e){var r=t.$$p||d,i,a,o=t.$$s==null?this:t.$$s;return t.$$p=null,i=x(arguments),a=i,o.$Native(Z(s,"call",W(a),r.$to_proc()))},{$$arity:-1,$$s:$}):s}),H(l,"_Array","Array"),Y(l,"$Array",function _(s,$){var t=_.$$p||d,e,r,i=this;return _.$$p=null,e=x(arguments,1),r=e,ee(i["$native?"](s))?Z(N(G("Native"),"Array"),"new",[s].concat(W(r)),t.$to_proc()).$to_a():i.$_Array(s)},-2)}(E[0],E),function(g,c){var l=b(g,c,"Object"),q=l.$$prototype;return q.native=d,l.$include(N(N("Native"),"Wrapper")),Y(l,"$==",function(_){var s=this;return s.native===N("Native").$try_convert(_)}),Y(l,"$has_key?",function(_){var s=this;return n.hasOwnProperty.call(s.native,_)}),Y(l,"$each",function G(_){var s,$,t=G.$$p||d,e=this;if(G.$$p=null,s=x(arguments),$=s,t!==d){for(var r in e.native)n.yieldX(t,[r,e.native[r]]);return e}else return Z(e,"method_missing",["each"].concat(W($)))},-1),Y(l,"$[]",function(_){var s=this,$=s.native[_];return $ instanceof Function?$:N("Native").$call(s.native,_)}),Y(l,"$[]=",function(_,s){var $=this,t=d;return t=N("Native").$try_convert(s),ee(t===d)?$.native[_]=s:$.native[_]=t}),Y(l,"$merge!",function(_){var s=this;_=N("Native").$convert(_);for(var $ in _)s.native[$]=_[$];return s}),Y(l,"$respond_to?",function(_,s){var $=this;return s==null&&(s=!1),M.$instance_method("respond_to?").$bind($).$call(_,s)},-2),Y(l,"$respond_to_missing?",function(_,s){var $=this;return n.hasOwnProperty.call($.native,_)},-2),Y(l,"$method_missing",function G(_,s){var $=G.$$p||d,t,e,r,i=this;return G.$$p=null,t=x(arguments,1),e=t,_.charAt(_.length-1)==="="?(r=[_.$slice(0,h(_.$length(),1)),e["$[]"](0)],Z(i,"[]=",r),r[r.length-1]):Z(N("Native"),"call",[i.native,_].concat(W(e)),$.$to_proc())},-2),Y(l,"$nil?",I(!1)),Y(l,"$is_a?",function(_){var s=this;return n.is_a(s,_)}),Y(l,"$instance_of?",function(_){var s=this;return s.$$class===_}),Y(l,"$class",function(){var _=this;return _.$$class}),Y(l,"$to_a",function G(_){var s=G.$$p||d,$=this;return G.$$p=null,_==null&&(_=new Map),Z(N(N("Native"),"Array"),"new",[$.native,_],s.$to_proc()).$to_a()},-1),Y(l,"$inspect",function(){var _=this;return"#<Native:"+String(_.native)+">"}),H(l,"include?","has_key?"),H(l,"key?","has_key?"),H(l,"kind_of?","is_a?"),H(l,"member?","has_key?")}(u("Native"),u("BasicObject")),function(g,c,l){var q=b(g,c,"Array"),G=[q].concat(l),_=n.$r(G),s=q.$$prototype;return s.named=s.native=s.get=s.block=s.set=s.length=d,q.$include(N(_("Native"),"Wrapper")),q.$include(_("Enumerable")),Y(q,"$initialize",function $(t,e){var r=$.$$p||d,i=this,a=d;return $.$$p=null,e==null&&(e=new Map),j(i,k(i,"initialize",$,!1,!0),"initialize",[t],null),i.get=ee(a=e["$[]"]("get"))?a:e["$[]"]("access"),i.named=e["$[]"]("named"),i.set=ee(a=e["$[]"]("set"))?a:e["$[]"]("access"),i.length=ee(a=e["$[]"]("length"))?a:"length",i.block=r,ee(i.$length()==null)?i.$raise(_("ArgumentError"),"no length found on the array-like object"):d},-2),Y(q,"$each",function $(){var t=$.$$p||d,e=this;if($.$$p=null,!ee(t))return e.$enum_for("each");for(var r=0,i=e.$length();r<i;r++)n.yield1(t,e["$[]"](r));return e}),Y(q,"$[]",function(t){var e=this,r=d,i=d;return r=F(_("String"),i=t)||F(_("Symbol"),i)?ee(e.named)?e.native[e.named](t):e.native[t]:F(_("Integer"),i)?ee(e.get)?e.native[e.get](t):e.native[t]:d,ee(r)?ee(e.block)?e.block.$call(r):e.$Native(r):d}),Y(q,"$[]=",function(t,e){var r=this;return ee(r.set)?r.native[r.set](t,_("Native").$convert(e)):r.native[t]=_("Native").$convert(e)}),Y(q,"$last",function(t){var e=this,r=d,i=d;if(t==null&&(t=d),ee(t)){for(r=h(e.$length(),1),i=[];ee(p(r,0));)i["$<<"](e["$[]"](r)),r=h(r,1);return i}else return e["$[]"](h(e.$length(),1))},-1),Y(q,"$length",function(){var t=this;return t.native[t.length]}),Y(q,"$inspect",function(){var t=this;return t.$to_a().$inspect()}),H(q,"to_ary","to_a")}(u("Native"),null,E),function(g,c){var l=b(g,c,"Numeric");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(E[0],null),function(g,c){var l=b(g,c,"Proc");return Y(l,"$to_n",A)}(E[0],null),function(g,c){var l=b(g,c,"String");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(E[0],null),function(g,c){var l=b(g,c,"Regexp");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(E[0],null),function(g,c){var l=b(g,c,"MatchData");return Y(l,"$to_n",O("matches"))}(E[0],null),function(g,c,l){var q=b(g,c,"Struct"),G=[q].concat(l),_=n.$r(G);return Y(q,"$to_n",function(){var $=this,t=d;return t={},Z($,"each_pair",[],function(r,i){return r==null&&(r=d),i==null&&(i=d),t[r]=_("Native").$try_convert(i,i)}),t})}(E[0],null,E),function(g,c,l){var q=b(g,c,"Array"),G=[q].concat(l),_=n.$r(G);return Y(q,"$to_n",function(){for(var $=this,t=[],e=0,r=$.length;e<r;e++){var i=$[e];t.push(_("Native").$try_convert(i,i))}return t})}(E[0],null,E),function(g,c){var l=b(g,c,"Boolean");return Y(l,"$to_n",function(){var G=this;return G.valueOf()})}(E[0],null),function(g,c){var l=b(g,c,"Time");return Y(l,"$to_n",A)}(E[0],null),function(g,c){var l=b(g,c,"NilClass");return Y(l,"$to_n",function(){return null})}(E[0],null),ee(u("Hash")["$method_defined?"]("_initialize"))||function(g,c,l){var q=b(g,c,"Hash"),G=[q].concat(l),_=n.$r(G);H(q,"_initialize","initialize");function s($,t,e){e&&(e.constructor===void 0||e.constructor===Object||e instanceof Map)?z($,t,_("Hash").$new(e)):e&&e.$$is_array?(e=e.map(function(r){return r&&(r.constructor===void 0||r.constructor===Object||e instanceof Map)?_("Hash").$new(r):q.$Native(r)}),z($,t,e)):z($,t,q.$Native(e))}return Y(q,"$initialize",function $(t){var e=$.$$p||d,r=this;if($.$$p=null,t!=null)if(t.constructor===void 0||t.constructor===Object){var i,a;for(i in t)a=t[i],s(r,i,a);return r}else t instanceof Map&&n.hash_each(t,!1,function(o,m){return s(r,o,m),[!1,!1]});return Z(r,"_initialize",[t],e.$to_proc())},-1),Y(q,"$to_n",function(){var t=this,e={};return n.hash_each(t,!1,function(r,i){return e[_("Native").$try_convert(r,r)]=_("Native").$try_convert(i,i),[!1,!1]}),e})}(E[0],null,E),function(g,c){var l=b(g,c,"Module");return Y(l,"$native_module",function(){var G=this;return n.global[G.$name()]=G})}(E[0],null),function(g,c,l){var q=b(g,c,"Class"),G=[q].concat(l),_=n.$r(G);return Y(q,"$native_alias",function($,t){var e=this,r=e.prototype[n.jsid(t)];r||e.$raise(_("NameError").$new("undefined method `"+t+"' for class `"+e.$inspect()+"'",t)),e.prototype[$]=r}),Y(q,"$native_class",function(){var $=this;return $.$native_module(),$.new=$.$new})}(E[0],null,E),P.$=P.global=S.$Native(n.global)};(function(n){var z;if(typeof globalThis<"u"?n=globalThis:typeof global<"u"?n=global:typeof window<"u"&&(n=window),n.console==null&&(n.console={}),typeof n.console=="object"?z=n.console:z={},"log"in z||(z.log=function(){}),"warn"in z||(z.warn=z.log),typeof n.Opal<"u")return z.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),n.Opal;var w,D,x,ee,Z,M,J,v=n.Opal={};v.global=n,v.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var L=Function.prototype.call,$e=Function.prototype.bind,W=Object.hasOwn||L.bind(Object.prototype.hasOwnProperty),Y=Object.setPrototypeOf,O=L.bind(Array.prototype.slice),H=L.bind(Array.prototype.splice),b=4,h=b;function I(){return h+=2,h}v.uid=I,v.id=function(f){return f.$$is_number?f*2+1:(f.$$id==null&&p(f,"$$id",I()),f.$$id)};var j=v.gvars={};v.exit=function(f){j.DEBUG&&z.log("Exited with status "+f)},v.exceptions=[],v.pop_exception=function(f){var y=v.exceptions.pop();y===f||(y?j["!"]=y:j["!"]=w)};function k(f,y){if(f||(f=v.Exception||Error),J&&J.$raise)arguments.length>2?J.$raise(f.$new.apply(f,O(arguments,1))):J.$raise(f,y);else throw f.$new?f.$new(y):new f(y)}var F={value:void 0,enumerable:!1,configurable:!0,writable:!0};function p(f,y,U){typeof f=="string"?f[y]=U:(F.value=U,Object.defineProperty(f,y,F))}v.prop=p,v.defineProperty=v.prop,v.slice=O;var A=v.truthy=function(f){return f!==!1&&w!==f&&f!==void 0&&f!==null&&(!(f instanceof Boolean)||f.valueOf()===!0)};v.falsy=function(f){return!A(f)},v.type_error=function(f,y,U,te){f=f.$$class,te&&U?(te=te.$$class,k(v.TypeError,"can't convert "+f+" into "+y+" ("+f+"#"+U+" gives "+te+")")):k(v.TypeError,"no implicit conversion of "+f+" into "+y)},v.coerce_to=function(f,y,U,te){var ue;return U==="to_int"&&y===v.Integer&&f.$$is_number?f<0?Math.ceil(f):Math.floor(f):U==="to_str"&&y===v.String&&f.$$is_string||v.is_a(f,y)?f:f["$respond_to?"].$$pristine&&f.$method_missing.$$pristine?(ue=f[de(U)],(ue==null||ue.$$stub)&&v.type_error(f,y),ue.apply(f,te)):(f["$respond_to?"](U)||v.type_error(f,y),te==null&&(te=[]),v.send(f,U,te))},v.respond_to=function(f,y,U){if(f==null||!f.$$class)return!1;U=!!U;var te=f[y];if(f["$respond_to?"].$$pristine){if(typeof te=="function"&&!te.$$stub)return!0;if(!f["$respond_to_missing?"].$$pristine)return v.send(f,f["$respond_to_missing?"],[y.substr(1),U])}else return v.send(f,f["$respond_to?"],[y.substr(1),U])},v.trace_class=!1,v.tracers_for_class=[];function P(f){var y,U,te;for(y=0,U=v.tracers_for_class.length;y<U;y++)te=v.tracers_for_class[y],te.trace_object=f,te.block.$call(te)}function S(f,y){if(f.$$autoload[y].loaded){if(f.$$autoload[y].loaded&&!f.$$autoload[y].required&&f.$$autoload[y].exception)throw f.$$autoload[y].exception}else{f.$$autoload[y].loaded=!0;try{v.Kernel.$require(f.$$autoload[y].path)}catch(U){throw f.$$autoload[y].exception=U,U}if(f.$$autoload[y].required=!0,f.$$const[y]!=null)return f.$$autoload[y].success=!0,f.$$const[y]}}function E(f,y){if(f){if(f.$$const[y]!=null)return f.$$const[y];if(f.$$autoload&&f.$$autoload[y])return S(f,y)}}function u(f,y){var U,te,ue;if(f.length!==0)for(U=0,te=f.length;U<te;U++){if(ue=f[U].$$const[y],ue!=null)return ue;if(f[U].$$autoload&&f[U].$$autoload[y])return S(f[U],y)}}function d(f,y){var U,te,ue;if(f!=null)for(ue=V(f),U=0,te=ue.length;U<te;U++){if(ue[U].$$const&&W(ue[U].$$const,y))return ue[U].$$const[y];if(ue[U].$$autoload&&ue[U].$$autoload[y])return S(ue[U],y)}}function N(f,y){if(f==null||f.$$is_module)return d(x,y)}function g(f,y){return(f||x).$const_missing(y)}v.const_get_local=function(f,y,U){var te;if(f!=null)return f==="::"&&(f=x),!f.$$is_module&&!f.$$is_class&&k(v.TypeError,f.toString()+" is not a class/module"),te=E(f,y),te!=null||U?te:g(f,y)},v.const_get_qualified=function(f,y,U){var te,ue,ce,he=v.const_cache_version;if(y==null)return te=E(x,f),te??v.const_get_qualified(x,f,U);if(f!=null)return f==="::"&&(f=x),!f.$$is_module&&!f.$$is_class&&k(v.TypeError,f.toString()+" is not a class/module"),(ue=f.$$const_cache)==null&&(p(f,"$$const_cache",Object.create(null)),ue=f.$$const_cache),ce=ue[y],ce==null||ce[0]!==he?((te=E(f,y))!=null||(te=d(f,y))!=null,ue[y]=[he,te]):te=ce[1],te!=null||U?te:g(f,y)},v.const_cache_version=1,v.const_get_relative=function(f,y,U){var te=f[0],ue,ce=v.const_cache_version,he,pe;return(he=f.$$const_cache)==null&&(p(f,"$$const_cache",Object.create(null)),he=f.$$const_cache),pe=he[y],pe==null||pe[0]!==ce?((ue=E(te,y))!=null||(ue=u(f,y))!=null||(ue=d(te,y))!=null||(ue=N(te,y))!=null,he[y]=[ce,ue]):ue=pe[1],ue!=null||U?ue:g(te,y)};function c(f,y,U){var te=!0;return(f==null||f==="::")&&(f=x),U.$$is_a_module&&((U.$$name==null||U.$$name===w)&&(U.$$name=y),U.$$base_module==null&&(U.$$base_module=f)),f.$$const=f.$$const||Object.create(null),(y in f.$$const||"$$autoload"in f&&y in f.$$autoload)&&(te=!1),f.$$const[y]=U,f.$$=f.$$const,v.const_cache_version++,f===x&&(v[y]=U),p(f,y,U),te&&f.$const_added&&!f.$const_added.$$pristine&&f.$const_added(y),U}v.const_set=c,v.constants=function(f,y){y==null&&(y=!0);var U,te=[f],ue,ce,he={},pe;for(y&&(te=te.concat(V(f))),y&&f.$$is_module&&(te=te.concat([v.Object]).concat(V(v.Object))),ue=0,ce=te.length;ue<ce&&(U=te[ue],!(f!==x&&U==x));ue++){for(pe in U.$$const)he[pe]=!0;if(U.$$autoload)for(pe in U.$$autoload)he[pe]=!0}return Object.keys(he)},v.const_remove=function(f,y){if(v.const_cache_version++,f.$$const[y]!=null){var U=f.$$const[y];return delete f.$$const[y],U}if(f.$$autoload&&f.$$autoload[y])return delete f.$$autoload[y],w;k(v.NameError,"constant "+f+"::"+f.$name()+" not defined")},v.const_get_relative_factory=function(f){return function(y,U){return v.$$(f,y,U)}},v.$$=v.const_get_relative,v.$$$=v.const_get_qualified,v.$r=v.const_get_relative_factory;function l(f){return f==null?!1:f.$$bridge?f:f.$$super?l(f.$$super):!1}function q(f,y,U){var te,ue;if((ue=l(y))?te=function(){var ye=new($e.apply(ue.$$constructor,ge(null,arguments)));return Y(ye,te.$$prototype),ye}:te=function(){},f&&f!==w&&p(te,"displayName","::"+f),p(te,"$$name",f),p(te,"$$constructor",te),p(te,"$$prototype",te.prototype),p(te,"$$const",{}),p(te,"$$is_class",!0),p(te,"$$is_a_module",!0),p(te,"$$super",y),p(te,"$$cvars",{}),p(te,"$$own_included_modules",[]),p(te,"$$own_prepended_modules",[]),p(te,"$$ancestors",[]),p(te,"$$ancestors_cache_version",null),p(te,"$$subclasses",[]),p(te,"$$cloned_from",[]),p(te.$$prototype,"$$class",te),v.Class&&Y(te,v.Class.prototype),y!=null){if(Y(te.$$prototype,y.$$prototype),U!==!0)if(typeof WeakRef<"u"){var ce,he,pe=[];for(ce=0;ce<y.$$subclasses.length;ce++)he=y.$$subclasses[ce],he.deref()!==void 0&&pe.push(he);pe.push(new WeakRef(te)),y.$$subclasses=pe}else y.$$subclasses.push(te);y.$$meta&&v.build_class_singleton_class(te)}return te}v.allocate_class=q;function G(f,y){var U=E(f,y);if(U)return U.$$is_class||k(v.TypeError,y+" is not a class"),U}function _(f,y){f.$$super!==y&&k(v.TypeError,"superclass mismatch for class "+f.$$name)}v.klass=function(f,y,U){var te;f==null||f=="::"?f=x:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),y!=null&&(!y.hasOwnProperty||y.hasOwnProperty&&!y.hasOwnProperty("$$is_class"))&&(y.constructor&&y.constructor.name=="Function"?(te=y,y=x):k(v.TypeError,"superclass must be a Class ("+(y.constructor&&(y.constructor.name||y.constructor.$$name)||typeof y)+" given)"));var ue=G(f,U);return ue!=null?y&&_(ue,y):(y==null&&(y=x),ue=q(U,y),c(f,U,ue),y.$inherited&&y.$inherited(ue),te&&v.bridge(te,ue)),v.trace_class&&P(ue),ue};function s(f){var y=function(){},U=y;return f&&p(y,"displayName",f+".constructor"),p(U,"$$name",f),p(U,"$$prototype",y.prototype),p(U,"$$const",{}),p(U,"$$is_module",!0),p(U,"$$is_a_module",!0),p(U,"$$cvars",{}),p(U,"$$iclasses",[]),p(U,"$$own_included_modules",[]),p(U,"$$own_prepended_modules",[]),p(U,"$$ancestors",[U]),p(U,"$$ancestors_cache_version",null),p(U,"$$cloned_from",[]),Y(U,v.Module.prototype),U}v.allocate_module=s;function $(f,y){var U=E(f,y);return U==null&&f===x&&(U=d(x,y)),U&&!U.$$is_module&&U!==x&&k(v.TypeError,y+" is not a module"),U}v.module=function(f,y){var U;return f==null||f=="::"?f=x:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),U=$(f,y),U==null&&(U=s(y),c(f,y,U)),v.trace_class&&P(U),U},v.get_singleton_class=function(f){return f.$$is_number&&k(v.TypeError,"can't define singleton"),f.$$meta?f.$$meta:f.hasOwnProperty("$$is_class")?v.build_class_singleton_class(f):f.hasOwnProperty("$$is_module")?v.build_module_singleton_class(f):v.build_object_singleton_class(f)};function t(f,y){f.hasOwnProperty("$$meta")?f.$$meta=y:p(f,"$$meta",y),f.$$frozen?f.$$meta.$freeze():Y(f,y.$$prototype)}v.build_class_singleton_class=function(f){if(f.$$meta)return f.$$meta;var y=f===D?Z:v.get_singleton_class(f.$$super),U=q(null,y,!0);return p(U,"$$is_singleton",!0),p(U,"$$singleton_of",f),t(f,U),p(f,"$$class",v.Class),U},v.build_module_singleton_class=function(f){if(f.$$meta)return f.$$meta;var y=q(null,v.Module,!0);return p(y,"$$is_singleton",!0),p(y,"$$singleton_of",f),t(f,y),p(f,"$$class",v.Module),y},v.build_object_singleton_class=function(f){var y=f.$$class,U=q(w,y,!0);return p(U,"$$is_singleton",!0),p(U,"$$singleton_of",f),delete U.$$prototype.$$class,t(f,U),U},v.is_method=function(f){return f[0]==="$"&&f[1]!=="$"},v.instance_methods=function(f){for(var y=Object.create(null),U=[],te=V(f),ue=0,ce=te.length;ue<ce;ue++){var he=te[ue],pe=he.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ze=ye.length;we<ze;we++){var Ee=ye[we];if(!y[Ee]){if(v.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);U.push(qe)}}y[Ee]=!0}}}return U},v.own_instance_methods=function(f){var y=[],U=f.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);for(var te=Object.getOwnPropertyNames(U),ue=0,ce=te.length;ue<ce;ue++){var he=te[ue];if(v.is_method(he)){var pe=U[he];if(!pe.$$stub){var ye=he.slice(1);y.push(ye)}}}return y},v.methods=function(f){return v.instance_methods(f.$$meta||f.$$class)},v.own_methods=function(f){return f.$$meta?v.own_instance_methods(f.$$meta):[]},v.receiver_methods=function(f){var y=v.get_singleton_class(f),U=v.own_instance_methods(y),te=v.own_instance_methods(y.$$super);return U.concat(te)},v.class_variables=function(f){var y=V(f),U,te=y.length,ue={};for(U=te-1;U>=0;U--){var ce=y[U];for(var he in ce.$$cvars)ue[he]=ce.$$cvars[he]}return ue},v.class_variable_set=function(f,y,U){var te=V(f),ue,ce=te.length;for(ue=ce-2;ue>=0;ue--){var he=te[ue];if(W(he.$$cvars,y))return he.$$cvars[y]=U,U}return f.$$cvars[y]=U,U},v.class_variable_get=function(f,y,U){if(W(f.$$cvars,y))return f.$$cvars[y];var te=V(f),ue,ce=te.length;for(ue=0;ue<ce;ue++){var he=te[ue];if(W(he.$$cvars,y))return he.$$cvars[y]}return U||k(v.NameError,"uninitialized class variable "+y+" in "+f.$name()),w};function e(f){return f.hasOwnProperty("$$iclass")&&f.hasOwnProperty("$$root")}function r(f){for(var y=[],U,te=Object.getPrototypeOf(f.$$prototype);te&&!te.hasOwnProperty("$$class");)U=K(te),U&&y.push(U),te=Object.getPrototypeOf(te);return y}function i(f){var y=[],U,te=Object.getPrototypeOf(f.$$prototype);if(f.$$prototype.hasOwnProperty("$$dummy"))for(;te&&te!==f.$$prototype.$$define_methods_on;)U=K(te),U&&y.push(U),te=Object.getPrototypeOf(te);return y}v.append_features=function(f,y){var U=V(f),te=[];U.indexOf(y)!==-1&&k(v.ArgumentError,"cyclic include detected");for(var ue=0,ce=U.length;ue<ce;ue++){var he=U[ue],pe=o(he);p(pe,"$$included",!0),te.push(pe)}var ye=V(y),we=T(te),ze,Ee;if(ye.indexOf(f)===-1)ze=y.$$prototype,Ee=Object.getPrototypeOf(y.$$prototype);else{for(var xe=y.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===f&&e(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var ke=Object.getPrototypeOf(qe);ke.hasOwnProperty("$$iclass")&&!e(ke);)ke=Object.getPrototypeOf(ke);ze=xe,Ee=ke}else ze=y.$$prototype,Ee=Object.getPrototypeOf(y.$$prototype)}Y(ze,we.first),Y(we.last,Ee),y.$$own_included_modules=r(y),v.const_cache_version++},v.prepend_features=function(f,y){var U=V(f),te=[];U.indexOf(y)!==-1&&k(v.ArgumentError,"cyclic prepend detected");for(var ue=0,ce=U.length;ue<ce;ue++){var he=U[ue],pe=o(he);p(pe,"$$prepended",!0),te.push(pe)}var ye=T(te),we=y.$$prototype,ze=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=m(y),a(y),p(we,"$$dummy",!0),p(we,"$$define_methods_on",Ee),Y(we,Ee),Y(Ee,ze));var ke=V(y);if(ke.indexOf(f)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else k(v.RuntimeError,"Prepending a module multiple times is not supported");Y(xe,ye.first),Y(ye.last,qe),y.$$own_prepended_modules=i(y),v.const_cache_version++};function a(f){for(var y=f.$$prototype,U=Object.getOwnPropertyNames(y),te=0;te<U.length;te++){var ue=U[te];v.is_method(ue)&&delete y[ue]}}function o(f){var y=m(f);return f.$$is_module&&f.$$iclasses.push(y),y}function m(f){var y={},U=f.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);var te=Object.getOwnPropertyNames(U),ue=te.length,ce;for(ce=0;ce<ue;ce++){var he=te[ce];p(y,he,U[he])}return p(y,"$$iclass",!0),p(y,"$$module",f),y}function T(f){var y=f.length,U=f[0];if(p(U,"$$root",!0),y===1)return{first:U,last:U};for(var te=U,ue=1;ue<y;ue++){var ce=f[ue];Y(te,ce),te=ce}return{first:f[0],last:f[y-1]}}v.bridge=function(f,y){f.hasOwnProperty("$$bridge")&&k(v.ArgumentError,"already bridged"),p(f,"$$bridge",y),Y(f.prototype,(y.$$super||v.Object).$$prototype),p(y,"$$prototype",f.prototype),p(y.$$prototype,"$$class",y),p(y,"$$constructor",f),p(y,"$$bridge",!0)};function K(f){if(!f.hasOwnProperty("$$dummy")){if(f.hasOwnProperty("$$iclass"))return f.$$module;if(f.hasOwnProperty("$$class"))return f.$$class}}function C(f){return f.$$own_prepended_modules.concat([f]).concat(f.$$own_included_modules)}function V(f){if(!f)return[];if(f.$$ancestors_cache_version===v.const_cache_version)return f.$$ancestors;var y=[],U,te,ue;for(U=0,te=C(f),ue=te.length;U<ue;U++)y.push(te[U]);if(f.$$super)for(U=0,te=V(f.$$super),ue=te.length;U<ue;U++)y.push(te[U]);return f.$$ancestors_cache_version=v.const_cache_version,f.$$ancestors=y,y}v.ancestors=V,v.included_modules=function(f){for(var y=[],U=null,te=Object.getPrototypeOf(f.$$prototype);te&&Object.getPrototypeOf(te);te=Object.getPrototypeOf(te))U=K(te),U&&U.$$is_module&&te.$$iclass&&te.$$included&&y.push(U);return y},v.add_stubs=function(f){var y=v.BasicObject.$$prototype,U,te;f=f.split(",");for(var ue=0,ce=f.length;ue<ce;ue++)U=de(f[ue]),te=y[U],(te==null||te.$$stub)&&v.add_stub_for(y,U)},v.add_stub_for=function(f,y){p(f,y,v.stub_for(y))},v.stub_for=function(f){function y(){return this.$method_missing.$$p=y.$$p,y.$$p=null,this.$method_missing.apply(this,ge(f.slice(1),arguments))}return y.$$stub=!0,y},v.ac=function(f,y,U,te){var ue="";U.$$is_a_module?ue+=U.$$name+".":ue+=U.$$class.$$name+"#",ue+=te,k(v.ArgumentError,"["+ue+"] wrong number of arguments (given "+f+", expected "+y+")")},v.block_ac=function(f,y,U){var te="`block in "+U+"'";k(v.ArgumentError,te+": wrong number of arguments (given "+f+", expected "+y+")")};function re(f){return f.hasOwnProperty("$$meta")&&f.$$meta!==null?V(f.$$meta):V(f.$$class)}v.find_super=function(f,y,U,te,ue){var ce=de(y),he,pe,ye,we,ze=-1,Ee;for(he=re(f),we=U.$$owner,Ee=0;Ee<he.length;Ee++)if(pe=he[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ze=Ee;break}for(Ee=ze+1;Ee<he.length;Ee++){pe=he[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(ce)){ye=xe[ce];break}}return!te&&ye&&ye.$$stub&&f.$method_missing.$$pristine&&k(v.NoMethodError,"super: no superclass method `"+y+"' for "+f,y),ye.$$stub&&!ue?null:ye},v.find_block_super=function(f,y,U,te,ue){var ce=y;return U||k(v.RuntimeError,"super called outside of method"),ue&&U.$$define_meth&&k(v.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),U.$$def&&(ce=U.$$jsid),v.find_super(f,ce,U,te)},v.find_super_dispatcher=v.find_super,v.find_iter_super_dispatcher=v.find_block_super;function ae(f,y,U){try{f(y)}catch(te){if(te===U)return U.$v;throw te}}v.yield1=function(f,y){typeof f!="function"&&k(v.LocalJumpError,"no block given");var U=f.$$has_top_level_mlhs_arg,te=f.$$has_trailing_comma_in_args,ue=f.$$is_lambda&&f.$$ret;return(f.length>1||(U||te)&&f.length===1)&&(y=v.to_ary(y)),(f.length>1||te&&f.length===1)&&y.$$is_array?ue?ae(f.apply.bind(f,null),y,f.$$ret):f.apply(null,y):ue?ae(f,y,f.$$ret):f(y)},v.yieldX=function(f,y){return typeof f!="function"&&k(v.LocalJumpError,"no block given"),f.length>1&&y.length===1&&y[0].$$is_array&&(y=y[0]),f.$$is_lambda&&f.$$ret?ae(f.apply.bind(f,null),y,f.$$ret):f.apply(null,y)},v.rescue=function(f,y){for(var U=0;U<y.length;U++){var te=y[U];if(te.$$is_array){var ue=v.rescue(f,te);if(ue)return ue}else if(te===v.JS.Error||te["$==="](f))return te}return null},v.is_a=function(f,y){if(y!=null&&f.$$meta===y||f.$$class===y)return!0;if(f.$$is_number&&y.$$is_number_class)return y.$$is_integer_class?f%1===0:!0;var U=V(f.$$is_class?v.get_singleton_class(f):f.$$meta||f.$$class);return U.indexOf(y)!==-1},v.to_hash=function(f){if(f.$$is_hash)return f;if(f["$respond_to?"]("to_hash",!0)){var y=f.$to_hash();if(y.$$is_hash)return y;k(v.TypeError,"Can't convert "+f.$$class+" to Hash ("+f.$$class+"#to_hash gives "+y.$$class+")")}else k(v.TypeError,"no implicit conversion of "+f.$$class+" into Hash")},v.to_ary=function(f){if(f.$$is_array)return f;if(f["$respond_to?"]("to_ary",!0)){var y=f.$to_ary();if(y===w)return[f];if(y.$$is_array)return y;k(v.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_ary gives "+y.$$class+")")}else return[f]},v.to_a=function(f){if(f.$$is_array)return f.slice();if(f["$respond_to?"]("to_a",!0)){var y=f.$to_a();if(y===w)return[f];if(y.$$is_array)return y;k(v.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_a gives "+y.$$class+")")}else return[f]},v.extract_kwargs=function(f){var y=f[f.length-1];if(y!=null&&v.respond_to(y,"$to_hash",!0))return H(f,f.length-1),y},v.kwrestargs=function(f,y){var U=new Map;return v.hash_each(f,!1,function(te,ue){return y[te]||v.hash_put(U,te,ue),[!1,!1]}),U};function le(f,y){typeof y=="number"?f.$$arity=y:typeof y=="object"&&Object.assign(f,y)}var _e=new Map;function de(f){var y=_e.get(f);return y||(y="$"+f,_e.set(f,y)),y}v.jsid=de;function ge(f,y){return y.$$is_array||(y=O(y)),[f].concat(y)}v.send=function(f,y,U,te,ue){var ce;return typeof y=="function"?(ce=y,y=null):typeof y=="string"?ce=f[de(y)]:k(v.NameError,"Passed method should be a string or a function"),v.send2(f,ce,y,U,te,ue)},v.send2=function(f,y,U,te,ue,ce){return y==null&&U!=null&&f.$method_missing&&(y=f.$method_missing,te=ge(U,te)),le(ue,ce),typeof ue=="function"&&(y.$$p=ue),y.apply(f,te)},v.refined_send=function(f,y,U,te,ue,ce){var he,pe,ye,we,ze,Ee,xe,qe,ke,Ae;for(we=re(y),he=0;he<we.length;he++)for(ze=v.id(we[he]),pe=0;pe<f.length;pe++)for(Ee=f[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ze]>"u")&&(ke=qe[ze],typeof ke.$$prototype[de(U)]<"u")))return Ae=ke.$$prototype[de(U)],v.send2(y,Ae,U,te,ue,ce);return v.send(y,U,te,ue,ce)},v.lambda=function(f,y){return f.$$is_lambda=!0,le(f,y),f},v.def=function(f,y,U,te){return le(U,te),f===v.top?v.defn(v.Object,y,U):!f.$$eval&&f.$$is_a_module?v.defn(f,y,U):v.defs(f,y,U)},v.defn=function(f,y,U){R(f),U.displayName=y,U.$$owner=f;var te=y.substr(1),ue=f.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),p(ue,y,U),f.$$is_module){f.$$module_function&&v.defs(f,y,U);for(var ce=0,he=f.$$iclasses,pe=he.length;ce<pe;ce++){var ye=he[ce];p(ye,y,U)}}var we=f.$$singleton_of;return f.$method_added&&!f.$method_added.$$stub&&!we?f.$method_added(te):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(te),te},v.defs=function(f,y,U,te){return le(U,te),(f.$$is_string||f.$$is_number)&&k(v.TypeError,"can't define singleton"),v.defn(v.get_singleton_class(f),y,U)};function ve(f,y){if(f.$$is_module)for(var U=0,te=f.$$iclasses,ue=te.length;U<ue;U++){var ce=te[U];delete ce[y]}}v.rdef=function(f,y){W(f.$$prototype,y)||k(v.NameError,"method '"+y.substr(1)+"' not defined in "+f.$name()),delete f.$$prototype[y],ve(f,y),f.$$is_singleton?f.$$prototype.$singleton_method_removed&&!f.$$prototype.$singleton_method_removed.$$stub&&f.$$prototype.$singleton_method_removed(y.substr(1)):f.$method_removed&&!f.$method_removed.$$stub&&f.$method_removed(y.substr(1))},v.udef=function(f,y){(!f.$$prototype[y]||f.$$prototype[y].$$stub)&&k(v.NameError,"method '"+y.substr(1)+"' not defined in "+f.$name()),v.add_stub_for(f.$$prototype,y),ve(f,y),f.$$is_singleton?f.$$prototype.$singleton_method_undefined&&!f.$$prototype.$singleton_method_undefined.$$stub&&f.$$prototype.$singleton_method_undefined(y.substr(1)):f.$method_undefined&&!f.$method_undefined.$$stub&&f.$method_undefined(y.substr(1))};function me(f){return typeof f=="function"&&!f.$$stub}v.alias=function(f,y,U){var te=de(y),ue=de(U),ce,he;if(typeof f.$$prototype>"u"&&(f=v.Object),ce=f.$$prototype[ue],f.$$eval)return v.alias(v.get_singleton_class(f),y,U);if(!me(ce)){for(var pe=f.$$super;typeof ce!="function"&&pe;)ce=pe[ue],pe=pe.$$super;!me(ce)&&f.$$is_module&&(ce=v.Object.$$prototype[ue]),me(ce)||k(v.NameError,"undefined method `"+U+"' for class `"+f.$name()+"'")}return ce.$$alias_of&&(ce=ce.$$alias_of),he=v.wrap_method_body(ce),he.displayName=y,he.$$alias_of=ce,he.$$alias_name=y,v.defn(f,te,he),f},v.wrap_method_body=function(f){var y=function(){var U=y.$$p;return y.$$p=null,v.send(this,f,arguments,U)};try{Object.defineProperty(y,"length",{value:f.length})}catch{}return y.$$arity=f.$$arity==null?f.length:f.$$arity,y.$$parameters=f.$$parameters,y.$$source_location=f.$$source_location,y},v.alias_gvar=function(f,y){return Object.defineProperty(j,f,{configurable:!0,enumerable:!0,get:function(){return j[y]},set:function(U){j[y]=U}}),w},v.alias_native=function(f,y,U){var te=de(y),ue=f.$$prototype[U];return(typeof ue!="function"||ue.$$stub)&&k(v.NameError,"undefined native method `"+U+"' for class `"+f.$name()+"'"),v.defn(f,te,ue),f},v.hash_init=function(f){z.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},v.hash_clone=function(f,y){return y.$$none=f.$$none,y.$$proc=f.$$proc,v.hash_each(f,y,function(U,te){return v.hash_put(y,U,te),[!1,y]})},v.hash_put=function(f,y,U){var te=typeof y;if(te==="string"||te==="symbol"||te==="number"||te==="boolean"||te==="bigint")f.set(y,U);else if(y.$$is_string)f.set(y.valueOf(),U);else{f.$$keys||(f.$$keys=new Map);var ue=y.$$is_string?y.valueOf():f.$$by_identity?v.id(y):y.$hash(),ce=f.$$keys;if(!ce.has(ue)){ce.set(ue,[y]),f.set(y,U);return}for(var he=ce.get(ue),pe,ye=0;ye<he.length;ye++)if(pe=he[ye],y===pe||y["$eql?"](pe)){f.set(pe,U);return}he.push(y),f.set(y,U)}},v.hash_get=function(f,y){var U=typeof y;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return f.get(y);if(f.$$keys){var te=y.$$is_string?y.valueOf():f.$$by_identity?v.id(y):y.$hash(),ue=f.$$keys.get(te),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],y===ce||y["$eql?"](ce))return f.get(ce)}else if(y.$$is_string)return f.get(te)}else if(y.$$is_string)return f.get(y.valueOf())};function be(f,y){var U=f.get(y);if(U!==void 0)return f.delete(y),U}v.hash_delete=function(f,y){var U=typeof y;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return be(f,y);if(f.$$keys){var te=y.$$is_string?y.valueOf():f.$$by_identity?v.id(y):y.$hash(),ue=f.$$keys.get(te),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],y===ce||y["$eql?"](ce))return ue.splice(he,1),ue.length===0&&f.$$keys.delete(te),be(f,ce)}else if(y.$$is_string)return be(f,te)}else if(y.$$is_string)return be(f,y.valueOf())},v.hash_rehash=function(f){var y=f.$$keys;return y&&y.clear(),v.hash_each(f,!1,function(U,te){var ue=typeof U;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var ce=U.$$is_string?U.valueOf():f.$$by_identity?v.id(U):U.$hash();if(y||(f.$$keys=y=new Map),!y.has(ce))return y.set(ce,[U]),[!1,!1];for(var he=y.get(ce),pe=he.length===1?he:O(he),ye,we=0;we<pe.length;we++)ye=pe[we],(U===ye||U["$eql?"](ye))&&(he.splice(he.indexOf(ye),1),f.delete(ye));return he.push(U),[!1,!1]}),f},v.hash=function(){var f=arguments.length,y,U,te,ue,ce,he;if(f===1&&arguments[0].$$is_hash)return arguments[0];if(U=new Map,f===1)if(y=arguments[0],arguments[0].$$is_array){for(ue=y.length,te=0;te<ue;te++)y[te].length!==2&&k(v.ArgumentError,"value not of length 2: "+y[te].$inspect()),ce=y[te][0],he=y[te][1],v.hash_put(U,ce,he);return U}else{y=arguments[0];for(ce in y)W(y,ce)&&(he=y[ce],v.hash_put(U,ce,he));return U}for(f%2!==0&&k(v.ArgumentError,"odd number of arguments for Hash"),te=0;te<f;te+=2)ce=arguments[te],he=arguments[te+1],v.hash_put(U,ce,he);return U},v.hash2=function(f,y){z.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var U=new Map,te=0,ue=f.length;te<ue;te++)U.set(f[te],y[f[te]]);return U},v.hash_each=function(f,y,U){for(var te,ue=0,ce,he=Array.from(f.entries()),pe=he.length;ue<pe;ue++)if(ce=he[ue],te=U(ce[0],ce[1]),te[0])return te[1];return te?te[1]:y},v.range=function(f,y,U){var te=new v.Range;return te.begin=f,te.end=y,te.excl=U,te};var ie=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];v.ivar=function(f){return ie.indexOf(f)!==-1&&(f+="$"),f};function R(f){f.$$frozen&&k(v.FrozenError,"can't modify frozen "+f.$class()+": "+f,new Map([["receiver",f]]))}v.deny_frozen_access=R,v.freeze=function(f){return p(f,"$$frozen",!0),f.hasOwnProperty("$$id")||p(f,"$$id",I()),f.hasOwnProperty("$$meta")?f.$$meta.$freeze():p(f,"$$meta",null),f.hasOwnProperty("$$comparable")||p(f,"$$comparable",null),Object.seal(f),f};function B(f,y){var U=Object.getOwnPropertyNames(f),te=U.length,ue,ce,he;for(ue=0;ue<te;ue++)ce=U[ue],ce[0]!=="$"&&(he=Object.getOwnPropertyDescriptor(f,ce),he&&he.enumerable&&y(ce,he))}v.each_ivar=B,v.freeze_props=function(f){var y={get:null,set:function(U){R(f)},enumerable:!0};B(f,function(U,te){te.writable&&(y.get=se(te.value),Object.defineProperty(f,U,y))})},v.escape_regexp=function(f){return f.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},v.global_regexp=function(f){return f.global?f:(f.$$g==null?f.$$g=new RegExp(f.source,(f.multiline?"gm":"g")+(f.ignoreCase?"i":"")):f.$$g.lastIndex=null,f.$$g)},v.global_multiline_regexp=function(f){var y,U;return f.global&&f.multiline?f:(U="gm"+(f.ignoreCase?"i":""),f.multiline?(f.$$g==null&&(f.$$g=new RegExp(f.source,U)),y=f.$$g):(f.$$gm==null&&(f.$$gm=new RegExp(f.source,U)),y=f.$$gm),y.lastIndex=null,y)},v.regexp=function(f,y){for(var U,te=typeof y<"u"&&y&&y.indexOf("i")>=0,ue=0,ce=f.length;ue<ce;ue++)U=f[ue],U instanceof RegExp&&(U.ignoreCase!==te&&v.Kernel.$warn("ignore case doesn't match for "+U.source.$inspect(),new Map([["uplevel",1]])),U=U.source),U===""&&(U="(?:"+U+")"),f[ue]=U;return y?new RegExp(f.join(""),y):new RegExp(f.join(""))},v.modules={},v.loaded_features=["corelib/runtime"],v.current_dir=".",v.require_table={"corelib/runtime":!0},v.normalize=function(f){var y,U,te=[],ue="/";v.current_dir!=="."&&(f=v.current_dir.replace(/\/*$/,"/")+f),f=f.replace(/^\.\//,""),f=f.replace(/\.(rb|opal|js)$/,""),y=f.split(ue);for(var ce=0,he=y.length;ce<he;ce++)U=y[ce],U!==""&&(U===".."?te.pop():te.push(U));return te.join(ue)},v.loaded=function(f){var y,U,te;for(y=0,U=f.length;y<U;y++)te=v.normalize(f[y]),!v.require_table[te]&&(v.loaded_features.push(te),v.require_table[te]=!0)},v.load_normalized=function(f){v.loaded([f]);var y=v.modules[f];if(y){var U=y(v);if(typeof Promise<"u"&&U instanceof Promise)return U.then(se(!0))}else{var te=v.config.missing_require_severity,ue="cannot load such file -- "+f;te==="error"?k(v.LoadError,ue):te==="warning"&&z.warn("WARNING: LoadError: "+ue)}return!0},v.load=function(f){return f=v.normalize(f),v.load_normalized(f)},v.require=function(f){return f=v.normalize(f),v.require_table[f]?!1:v.load_normalized(f)},v.encodings=Object.create(null),v.set_encoding=function(f,y,U){typeof U>"u"&&(U="encoding"),(typeof f=="string"||f.$$frozen===!0)&&k(v.FrozenError,"can't modify frozen String");var te=v.find_encoding(y);return te===f[U]||(f[U]=te),f},v.find_encoding=function(f){var y=v.encodings,U=y[f]||y[f.toUpperCase()];return U||k(v.ArgumentError,"unknown encoding name - "+f),U},v.enc=function(f,y){var U=new String(f);return U=v.set_encoding(U,y),U.internal_encoding=U.encoding,U},v.binary=function(f){var y=new String(f);return v.set_encoding(y,"binary","internal_encoding")},v.last_promise=null,v.promise_unhandled_exception=!1,v.queue=function(f){if(v.last_promise)return v.last_promise=v.last_promise.then(function(){if(!v.promise_unhandled_exception)return f(v)}).catch(function(U){v.respond_to(U,"$full_message")&&(U=U.$full_message()),z.error(U),v.promise_unhandled_exception=!0,v.exit(1)}),v.last_promise;var y=f(v);return typeof Promise=="function"&&typeof y=="object"&&y instanceof Promise&&(v.last_promise=y),y};function X(f,y){return typeof f=="number"&&typeof y=="number"}v.rb_plus=function(f,y){return X(f,y)?f+y:f["$+"](y)},v.rb_minus=function(f,y){return X(f,y)?f-y:f["$-"](y)},v.rb_times=function(f,y){return X(f,y)?f*y:f["$*"](y)},v.rb_divide=function(f,y){return X(f,y)?f/y:f["$/"](y)},v.rb_lt=function(f,y){return X(f,y)?f<y:f["$<"](y)},v.rb_gt=function(f,y){return X(f,y)?f>y:f["$>"](y)},v.rb_le=function(f,y){return X(f,y)?f<=y:f["$<="](y)},v.rb_ge=function(f,y){return X(f,y)?f>=y:f["$>="](y)};function Q(f,y){return typeof f=="number"&&typeof y=="number"||typeof f=="string"&&typeof y=="string"}function ne(f,y){return Q(f,y)?f===y:A(f["$=="](y))}v.eqeq=ne,v.eqeqeq=function(f,y){return Q(f,y)?f===y:A(f["$==="](y))},v.neqeq=function(f,y){return Q(f,y)?f!==y:A(f["$!="](y))},v.not=function(f){return f==null||f===!1||w===f?!0:f===!0||f["$!"].$$pristine?!1:A(f["$!"]())};function se(f){return function(){return f}}v.return_val=se,v.return_self=function(){return this},v.return_ivar=function(f){return function(){return this[f]==null?w:this[f]}},v.assign_ivar=function(f){return function(y){return R(this),this[f]=y}},v.assign_ivar_val=function(f,y){return function(){return R(this),this[f]=y}},v.ensure_kwargs=function(f){if(f==null)return new Map;if(f.$$is_hash)return f;k(v.ArgumentError,"expected kwargs")},v.get_kwarg=function(f,y){var U=v.hash_get(f,y);return U===void 0&&k(v.ArgumentError,"missing keyword: "+y),U},v.large_array_unpack=function(f){var y=f.split(","),U=y.length,te;for(te=0;te<U;te++)switch(y[te][0]){case void 0:y[te]=w;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":y[te]=+y[te]}return y},v.opal32_init=se(1332765036);function oe(f,y){return f<<y|f>>>32-y}v.opal32_add=function(f,y){return f^=y,f=oe(f,1),f},v.BasicObject=D=q("BasicObject",null),v.Object=x=q("Object",v.BasicObject),v.Module=ee=q("Module",v.Object),v.Class=Z=q("Class",v.Module),v.Opal=M=s("Opal"),v.Kernel=J=s("Kernel"),Y(v.BasicObject,v.Class.$$prototype),Y(v.Object,v.Class.$$prototype),Y(v.Module,v.Class.$$prototype),Y(v.Class,v.Class.$$prototype),D.$$const.BasicObject=D,c(x,"BasicObject",D),c(x,"Object",x),c(x,"Module",ee),c(x,"Class",Z),c(x,"Opal",M),c(x,"Kernel",J),D.$$class=Z,x.$$class=Z,ee.$$class=Z,Z.$$class=Z,M.$$class=ee,J.$$class=ee,p(x.$$prototype,"toString",function(){var f=this.$to_s();return f.$$is_string&&typeof f=="object"?f.valueOf():f}),p(x.$$prototype,"$require",v.require),v.top=new x,v.top.$to_s=v.top.$inspect=se("main"),v.top.$define_method=fe;function fe(){var f=fe.$$p;return fe.$$p=null,v.send(x,"define_method",arguments,f)}v.NilClass=q("NilClass",v.Object),c(x,"NilClass",v.NilClass),w=v.nil=new v.NilClass,w.$$id=b,w.call=w.apply=function(){k(v.LocalJumpError,"no block given")},w.$$frozen=!0,w.$$comparable=!1,Object.seal(w),v.thrower=function(f){var y={$thrower_type:f,$throw:function(U,te){throw U==null&&(U=w),this.is_orphan&&!te&&k(v.LocalJumpError,"unexpected "+f,U,f.$to_sym()),this.$v=U,this},is_orphan:!1};return y},Object.defineProperty(j,"@",{enumerable:!0,configurable:!0,get:function(){return A(j["!"])?j["!"].$backtrace():w},set:function(f){A(j["!"])?j["!"].$set_backtrace(f):k(v.ArgumentError,"$! not set")}}),v.t_eval_return=v.thrower("return"),TypeError.$$super=Error,v.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(n){var z=n.type_error,w=n.coerce_to,D=n.module,x=n.defs,ee=n.slice,Z=n.eqeqeq,M=n.Kernel,J=n.truthy,v=n.Opal,L=n.nil,$e=n.$$$;return n.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(W){var Y=D(W,"Opal");x(Y,"$bridge",function(b,h){return n.bridge(b,h)}),x(Y,"$coerce_to!",function(b,h,I,j){var k,F,p=L;return k=ee(arguments,3),F=k,p=w(b,h,I,F),Z(h,p)||M.$raise(z(b,h,I,p)),p},-4),x(Y,"$coerce_to?",function(b,h,I,j){var k,F,p=L;return k=ee(arguments,3),F=k,!J(b["$respond_to?"](I))||(p=w(b,h,I,F),J(p["$nil?"]()))?L:(Z(h,p)||M.$raise(z(b,h,I,p)),p)},-4),x(Y,"$try_convert",function(b,h,I){return Z(h,b)?b:J(b["$respond_to?"](I))?b.$__send__(I):L}),x(Y,"$compare",function(b,h){var I=L;return I=b["$<=>"](h),J(I===L)&&M.$raise($e("ArgumentError"),"comparison of "+b.$class()+" with "+h.$class()+" failed"),I}),x(Y,"$destructure",function(b){if(b.length==1)return b[0];if(b.$$is_array)return b;for(var h=new Array(b.length),I=0,j=h.length;I<j;I++)h[I]=b[I];return h}),x(Y,"$respond_to?",function(b,h,I){return I==null&&(I=!1),b==null||!b.$$class?!1:b["$respond_to?"](h,I)},-3),x(Y,"$instance_variable_name!",function(b){return b=v["$coerce_to!"](b,$e("String"),"to_str"),J(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(b))||M.$raise($e("NameError").$new("'"+b+"' is not allowed as an instance variable name",b)),b}),x(Y,"$class_variable_name!",function(b){return b=v["$coerce_to!"](b,$e("String"),"to_str"),J(b.length<3||b.slice(0,2)!=="@@")&&M.$raise($e("NameError").$new("`"+b+"' is not allowed as a class variable name",b)),b}),x(Y,"$const_name?",function(b){return typeof b!="string"&&(b=v["$coerce_to!"](b,$e("String"),"to_str")),b[0]===b[0].toUpperCase()}),x(Y,"$const_name!",function(b){var h=this;return J($e("::","String","skip_raise")?"constant":L)&&(b=v["$coerce_to!"](b,$e("String"),"to_str")),(!b||b[0]!=b[0].toUpperCase())&&h.$raise($e("NameError"),"wrong constant name "+b),b}),x(Y,"$pristine",function(b,h){var I,j;I=ee(arguments,1),j=I;for(var k,F,p=j.length-1;p>=0;p--)k=j[p],F=b.$$prototype[n.jsid(k)],F&&!F.$$stub&&(F.$$pristine=!0);return L},-2);var O=[];return x(Y,"$inspect",function(b){var h=L,I=!1;return function(){try{try{return b===null?"null":b===void 0?"undefined":typeof b.$$class>"u"?Object.prototype.toString.apply(b):typeof b.$inspect!="function"||b.$inspect.$$stub||O.indexOf(b.$__id__())!==-1?"#<"+b.$$class+":0x"+b.$__id__().$to_s(16)+">":(O.push(b.$__id__()),I=!0,b.$inspect())}catch(j){if(n.rescue(j,[$e("Exception")])){h=j;try{return"#<"+b.$$class+":0x"+b.$__id__().$to_s(16)+">"}finally{n.pop_exception(j)}}else throw j}}finally{I&&O.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(n){var z=n.truthy,w=n.coerce_to,D=n.const_set,x=n.Object,ee=n.return_ivar,Z=n.assign_ivar,M=n.ivar,J=n.deny_frozen_access,v=n.freeze,L=n.prop,$e=n.jsid,W=n.each_ivar,Y=n.klass,O=n.Opal,H=n.Kernel,b=n.defs,h=n.send,I=n.def,j=n.eqeqeq,k=n.Module,F=n.rb_lt,p=n.rb_gt,A=n.slice,P=n.to_a,S=n.return_val,E=n.eqeq,u=n.not,d=n.rb_le,N=n.range,g=n.send2,c=n.find_super,l=n.alias,q=[],G=n.nil,_=n.$$$;return n.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(s,$,t){var e=Y(s,$,"Module"),r=[e].concat(t),i=n.$r(r);function a(K){if(K.$$is_string)return K;var C=O.$try_convert(K,_("String"),"to_str");if(C.$$is_string)return C;C===G?H.$raise(_("TypeError"),""+K+" is not a symbol nor a string"):H.$raise(_("TypeError"),"can't convert "+K.$class()+" to String ("+K.$class()+"#to_str gives "+C.$class())}b(e,"$allocate",function(){var C=this,V=n.allocate_module(G,function(){});return C!==n.Module&&Object.setPrototypeOf(V,C.$$prototype),V}),I(e,"$initialize",function K(){var C=K.$$p||G,V=this;return K.$$p=null,C!==G?h(V,"module_eval",[],C.$to_proc()):G}),I(e,"$===",function(C){var V=this;return z(C==null)?!1:n.is_a(C,V)}),I(e,"$<",function(C){var V=this;j(k,C)||H.$raise(_("TypeError"),"compared with non class/module");var re=V,ae,le,_e;if(re===C)return!1;for(le=0,ae=n.ancestors(V),_e=ae.length;le<_e;le++)if(ae[le]===C)return!0;for(le=0,ae=n.ancestors(C),_e=ae.length;le<_e;le++)if(ae[le]===V)return!1;return G}),I(e,"$<=",function(C){var V=this,re=G;return z(re=V["$equal?"](C))?re:F(V,C)}),I(e,"$>",function(C){var V=this;return j(k,C)||H.$raise(_("TypeError"),"compared with non class/module"),F(C,V)}),I(e,"$>=",function(C){var V=this,re=G;return z(re=V["$equal?"](C))?re:p(V,C)}),I(e,"$<=>",function(C){var V=this,re=G;return V===C?0:!j(k,C)||(re=F(V,C),z(re["$nil?"]()))?G:z(re)?-1:1}),I(e,"$alias_method",function(C,V){var re=this;return J(re),C=w(C,_("String"),"to_str"),V=w(V,_("String"),"to_str"),n.alias(re,C,V),re}),I(e,"$alias_native",function(C,V){var re=this;return V==null&&(V=C),J(re),n.alias_native(re,C,V),re},-2),I(e,"$ancestors",function(){var C=this;return n.ancestors(C)}),I(e,"$append_features",function(C){var V=this;return J(C),n.append_features(V,C),V}),I(e,"$attr_accessor",function(C){var V,re,ae=this;return V=A(arguments),re=V,h(ae,"attr_reader",P(re)),h(ae,"attr_writer",P(re))},-1),I(e,"$attr",function(C){var V,re,ae=this;return V=A(arguments),re=V,re.length==2&&(re[1]===!0||re[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),re[1]?ae.$attr_accessor(re[0]):ae.$attr_reader(re[0]),G):h(ae,"attr_reader",P(re))},-1),I(e,"$attr_reader",function(C){var V,re,ae=this;V=A(arguments),re=V,J(ae);for(var le=ae.$$prototype,_e=re.length-1;_e>=0;_e--){var de=re[_e],ge=$e(de),ve=M(de),me=ee(ve);n.prop(le,ve,G),me.$$parameters=[],me.$$arity=0,n.defn(ae,ge,me)}return G},-1),I(e,"$attr_writer",function(C){var V,re,ae=this;V=A(arguments),re=V,J(ae);for(var le=ae.$$prototype,_e=re.length-1;_e>=0;_e--){var de=re[_e],ge=$e(de+"="),ve=M(de),me=Z(ve);me.$$parameters=[["req"]],me.$$arity=1,n.prop(le,ve,G),n.defn(ae,ge,me)}return G},-1),I(e,"$autoload",function(C,V){var re=this;return J(re),i("Opal")["$const_name?"](C)||H.$raise(_("NameError"),"autoload must be constant name: "+C),V==""&&H.$raise(_("ArgumentError"),"empty file name"),re.$$const.hasOwnProperty(C)||(re.$$autoload||(re.$$autoload={}),n.const_cache_version++,re.$$autoload[C]={path:V,loaded:!1,required:!1,success:!1,exception:!1},re.$const_added&&!re.$const_added.$$pristine&&re.$const_added(C)),G}),I(e,"$autoload?",function(C){var V=this;if(V.$$autoload&&V.$$autoload[C]&&!V.$$autoload[C].required&&!V.$$autoload[C].success)return V.$$autoload[C].path;for(var re=V.$ancestors(),ae=0,le=re.length;ae<le;ae++)if(re[ae].$$autoload&&re[ae].$$autoload[C]&&!re[ae].$$autoload[C].required&&!re[ae].$$autoload[C].success)return re[ae].$$autoload[C].path;return G}),I(e,"$class_variables",function(){var C=this;return Object.keys(n.class_variables(C))}),I(e,"$class_variable_get",function(C){var V=this;return C=O["$class_variable_name!"](C),n.class_variable_get(V,C,!1)}),I(e,"$class_variable_set",function(C,V){var re=this;return J(re),C=O["$class_variable_name!"](C),n.class_variable_set(re,C,V)}),I(e,"$class_variable_defined?",function(C){var V=this;return C=O["$class_variable_name!"](C),n.class_variables(V).hasOwnProperty(C)}),I(e,"$const_added",S(G)),O.$pristine(e,"const_added"),I(e,"$remove_class_variable",function(C){var V=this;if(J(V),C=O["$class_variable_name!"](C),n.hasOwnProperty.call(V.$$cvars,C)){var re=V.$$cvars[C];return delete V.$$cvars[C],re}else H.$raise(_("NameError"),"cannot remove "+C+" for "+V)}),I(e,"$constants",function(C){var V=this;return C==null&&(C=!0),n.constants(V,C)},-1),b(e,"$constants",function(C){var V=this;if(C==null){var re=(V.$$nesting||[]).concat(x),ae,le={},_e,de;for(_e=0,de=re.length;_e<de;_e++)for(ae in re[_e].$$const)le[ae]=!0;return Object.keys(le)}else return n.constants(V,C)},-1),b(e,"$nesting",function(){var C=this;return C.$$nesting||[]}),I(e,"$const_defined?",function(C,V){var re=this;V==null&&(V=!0),C=i("Opal")["$const_name!"](C),z(C["$=~"](_(O,"CONST_NAME_REGEXP")))||H.$raise(_("NameError").$new("wrong constant name "+C,C));var ae,le=[re],_e,de;for(V&&(le=le.concat(n.ancestors(re)),re.$$is_module&&(le=le.concat([x]).concat(n.ancestors(x)))),_e=0,de=le.length;_e<de;_e++)if(ae=le[_e],ae.$$const[C]!=null||ae.$$autoload&&ae.$$autoload[C]&&!ae.$$autoload[C].required&&!ae.$$autoload[C].success)return!0;return!1},-2),I(e,"$const_get",function(C,V){var re=this;return V==null&&(V=!0),C=i("Opal")["$const_name!"](C),C.indexOf("::")===0&&C!=="::"&&(C=C.slice(2)),z(C.indexOf("::")!=-1&&C!="::")?h(C.$split("::"),"inject",[re],function(le,_e){return le==null&&(le=G),_e==null&&(_e=G),le.$const_get(_e)}):(z(C["$=~"](_(O,"CONST_NAME_REGEXP")))||H.$raise(_("NameError").$new("wrong constant name "+C,C)),V?n.$$([re],C):n.const_get_local(re,C))},-2),I(e,"$const_missing",function(C){var V=this,re=G;return re=E(V,x)?C:""+V+"::"+C,H.$raise(_("NameError").$new("uninitialized constant "+re,C))}),I(e,"$const_set",function(C,V){var re=this;return J(re),C=O["$const_name!"](C),(z(C["$!~"](_(O,"CONST_NAME_REGEXP")))||z(C["$start_with?"]("::")))&&H.$raise(_("NameError").$new("wrong constant name "+C,C)),D(re,C,V),V}),I(e,"$public_constant",S(G)),I(e,"$define_method",function K(C,V){var re=K.$$p||G,ae=this,le=G,_e=G,de=G;return K.$$p=null,J(ae),V===void 0&&re===G&&H.$raise(_("ArgumentError"),"tried to create a Proc object without a block"),C=a(C),z(V!==void 0)&&(re=j(_("Proc"),le=V)?V:j(_("Method"),le)?V.$to_proc().$$unbound:j(_("UnboundMethod"),le)?n.wrap_method_body(V.$$method):H.$raise(_("TypeError"),"wrong argument type "+V.$class()+" (expected Proc/Method/UnboundMethod)"),z(!V.$$is_proc)&&(_e=V.$owner(),z(_e.$$is_class)&&u(d(ae,_e))&&(de=z(_e.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+_e,H.$raise(_("TypeError"),de)))),typeof Proxy<"u"&&(re.$$proxy_target=re,re=new Proxy(re,{apply:function(ge,ve,me){var be=ge.$$jsid,ie=ge.$$is_lambda;ge.$$jsid=C,ge.$$is_lambda=!0;try{return ge.apply(ve,me)}catch(R){if(R===ge.$$brk||R===ge.$$ret)return R.$v;throw R}finally{ge.$$jsid=be,ge.$$is_lambda=ie}}})),re.$$jsid=C,re.$$s=null,re.$$def=re,re.$$define_meth=!0,n.defn(ae,$e(C),re)},-2),I(e,"$freeze",function(){var C=this;return z(C["$frozen?"]())?C:(C.hasOwnProperty("$$base_module")||L(C,"$$base_module",null),v(C))}),I(e,"$remove_method",function(C){var V,re,ae=this;V=A(arguments),re=V;for(var le=0;le<re.length;le++){var _e=a(re[le]);J(ae),n.rdef(ae,"$"+_e)}return ae},-1),I(e,"$singleton_class?",function(){var C=this;return!!C.$$is_singleton}),I(e,"$include",function(C){var V,re,ae=this;V=A(arguments),re=V;for(var le=re.length-1;le>=0;le--){var _e=re[le];_e.$$is_module||H.$raise(_("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$append_features(ae),_e.$included(ae)}return ae},-1),I(e,"$included_modules",function(){var C=this;return n.included_modules(C)}),I(e,"$include?",function(C){var V=this;C.$$is_module||H.$raise(_("TypeError"),"wrong argument type "+C.$class()+" (expected Module)");var re,ae,le,_e=n.ancestors(V);for(re=0,ae=_e.length;re<ae;re++)if(le=_e[re],le===C&&le!==V)return!0;return!1}),I(e,"$instance_method",function(C){var V=this,re=V.$$prototype[$e(C)];return(!re||re.$$stub)&&H.$raise(_("NameError").$new("undefined method `"+C+"' for class `"+V.$name()+"'",C)),_("UnboundMethod").$new(V,re.$$owner||V,re,C)}),I(e,"$instance_methods",function(C){var V=this;return C==null&&(C=!0),z(C)?n.instance_methods(V):n.own_instance_methods(V)},-1),I(e,"$included",S(G)),I(e,"$extended",S(G)),I(e,"$extend_object",function(C){return J(C),G}),I(e,"$method_added",function(C){return A(arguments),G},-1),I(e,"$method_removed",function(C){return A(arguments),G},-1),I(e,"$method_undefined",function(C){return A(arguments),G},-1),I(e,"$module_eval",function K(C){var V=K.$$p||G,re,ae,le,_e=this,de=G,ge=G,ve=G,me=G,be=G,ie=G;K.$$p=null,re=A(arguments),ae=re,z(V["$nil?"]())&&z(!!n.compile)?(z(N(1,3,!1)["$cover?"](ae.$size()))||H.$raise(_("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(P(ae)),de=le[0]==null?G:le[0],ge=le[1]==null?G:le[1],le[2]==null||le[2],ve=new Map([["file",z(me=ge)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),ie=O.$compile(de,be),V=h(H,"proc",[],function X(){var Q=X.$$s==null?this:X.$$s;return new Function("Opal,self","return "+ie)(n,Q)},{$$s:_e})):z(ae["$any?"]())&&H.$raise(_("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var R=V.$$s,B;return V.$$s=null,B=V.apply(_e,[_e]),V.$$s=R,B},-1),I(e,"$module_exec",function K(C){var V=K.$$p||G,re,ae,le=this;K.$$p=null,re=A(arguments),ae=re,V===G&&H.$raise(_("LocalJumpError"),"no block given");var _e=V.$$s,de;return V.$$s=null,de=V.apply(le,ae),V.$$s=_e,de},-1),I(e,"$method_defined?",function(C){var V=this,re=V.$$prototype[$e(C)];return!!re&&!re.$$stub}),I(e,"$module_function",function(C){var V,re,ae=this;if(V=A(arguments),re=V,J(ae),re.length===0)return ae.$$module_function=!0,G;for(var le=0,_e=re.length;le<_e;le++){var de=re[le],ge=$e(de),ve=ae.$$prototype[ge];n.defs(ae,ge,ve)}return re.length===1?re[0]:re},-1),I(e,"$name",function(){var C=this;if(C.$$full_name)return C.$$full_name;for(var V=[],re=C;re;){if(re.$$name===G||re.$$name==null)return G;if(V.unshift(re.$$name),re=re.$$base_module,re===x)break}return V.length===0?G:C.$$full_name=V.join("::")}),I(e,"$prepend",function(C){var V,re,ae=this;V=A(arguments),re=V,re.length===0&&H.$raise(_("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=re.length-1;le>=0;le--){var _e=re[le];_e.$$is_module||H.$raise(_("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$prepend_features(ae),_e.$prepended(ae)}return ae},-1),I(e,"$prepend_features",function(C){var V=this;return J(C),V.$$is_module||H.$raise(_("TypeError"),"wrong argument type "+V.$class()+" (expected Module)"),n.prepend_features(V,C),V}),I(e,"$prepended",S(G)),I(e,"$remove_const",function(C){var V=this;return J(V),n.const_remove(V,C)}),I(e,"$to_s",function(){var C=this,V=G;return z(V=n.Module.$name.call(C))?V:"#<"+(C.$$is_module?"Module":"Class")+":0x"+C.$__id__().$to_s(16)+">"}),I(e,"$undef_method",function(C){var V,re,ae=this;V=A(arguments),re=V;for(var le=0;le<re.length;le++){var _e=a(re[le]);J(ae),n.udef(ae,"$"+_e)}return ae},-1),I(e,"$instance_variables",function(){var C=this,V=G;V=(n.Module.$$nesting=r,C.$constants());var re=[];return W(C,function(ae){ae!=="constructor"&&!V["$include?"](ae)&&re.push("@"+ae)}),re});function o(K,C){var V,re=n.own_instance_methods(K);for(V=0;V<re.length;V++){var ae=re[V],le=$e(ae),_e=K.$$prototype[le],de=n.wrap_method_body(_e);de.$$jsid=ae,n.defn(C,le,de)}}function m(K,C){for(var V=K.$$own_included_modules,re=V.length-1;re>=0;re--)n.append_features(V[re],C)}function T(K,C){for(var V=K.$$own_prepended_modules,re=V.length-1;re>=0;re--)n.prepend_features(V[re],C)}return I(e,"$initialize_copy",function(C){var V=this;return o(C,V),m(C,V),T(C,V),V.$$cloned_from=C.$$cloned_from.concat(C),V.$copy_class_variables(C),V.$copy_constants(C)}),I(e,"$initialize_dup",function K(C){var V=K.$$p||G,re=this;return K.$$p=null,g(re,c(re,"initialize_dup",K,!1,!0),"initialize_dup",[C],V),re.$copy_singleton_methods(C)}),I(e,"$copy_class_variables",function(C){var V=this;for(var re in C.$$cvars)V.$$cvars[re]=C.$$cvars[re]}),I(e,"$copy_constants",function(C){var V=this,re,ae=C.$$const;for(re in ae)D(V,re,ae[re])}),I(e,"$refine",function K(C){var V=K.$$p||G,re,ae=this,le=G,_e=G,de=G;return K.$$p=null,re=[ae,G,G],le=re[0],_e=re[1],de=re[2],de=n.id(C),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?_e=ae.$$refine_modules[de]=_("Refinement").$new():_e=ae.$$refine_modules[de],_e.refinement_module=le,_e.refined_class=C,h(_e,"class_exec",[],V.$to_proc()),_e}),I(e,"$refinements",function(){var C=this,V=C.$$refine_modules,re=new Map;if(typeof V>"u")return re;for(var ae in V)re["$[]="](V[ae].refined_class,V[ae]);return re}),I(e,"$using",function(C){return H.$raise("Module#using is not permitted in methods")}),l(e,"class_eval","module_eval"),l(e,"class_exec","module_exec"),l(e,"inspect","to_s")}("::",null,q),function(s,$){var t=Y(s,$,"Refinement"),e=t.$$prototype;return e.refinement_module=e.refined_class=G,t.$attr_reader("refined_class"),I(t,"$inspect",function r(){var i=r.$$p||G,a=this;return r.$$p=null,z(a.refinement_module)?"#<refinement:"+a.refined_class.$inspect()+"@"+a.refinement_module.$inspect()+">":g(a,c(a,"inspect",r,!1,!0),"inspect",[],i)})}("::",k)};Opal.modules["corelib/class"]=function(n){var z=n.klass,w=n.send,D=n.defs,x=n.def,ee=n.ensure_kwargs,Z=n.hash_get,M=n.eqeq,J=n.truthy,v=n.rb_plus,L=n.return_val,$e=n.slice,W=n.send2,Y=n.find_super,O=n.Kernel,H=n.alias,b=n.top,h=[],I=n.nil,j=n.$$$;return n.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),b.$require("corelib/module"),function(k,F,p){var A=z(k,F,"Class"),P=[A].concat(p),S=n.$r(P);return D(A,"$new",function E(u){var d=E.$$p||I;if(E.$$p=null,u==null&&(u=S("Object")),!u.$$is_class)throw n.TypeError.$new("superclass must be a Class");var N=n.allocate_class(I,u);return u.$inherited(N),d!==I&&w(N,"class_eval",[],d.$to_proc()),N},-1),x(A,"$allocate",function(){var u=this,d=new u.$$constructor;return d.$$id=n.uid(),d}),x(A,"$clone",function(u){var d,N=this,g=I;return u=ee(u),d=Z(u,"freeze"),d==null&&(d=I),J(d["$nil?"]())||M(d,!0)||M(d,!1)||N.$raise(S("ArgumentError"),"unexpected value for freeze: "+d.$class()),g=n.allocate_class(I,N.$$super),g.$copy_instance_variables(N),g.$copy_singleton_methods(N),g.$initialize_clone(N,new Map([["freeze",d]])),(M(d,!0)||J(d["$nil?"]())&&J(N["$frozen?"]()))&&g.$freeze(),g},-1),x(A,"$dup",function(){var u=this,d=I;return d=n.allocate_class(I,u.$$super),d.$copy_instance_variables(u),d.$initialize_dup(u),d}),x(A,"$descendants",function(){var u=this;return v(u.$subclasses(),w(u.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),x(A,"$inherited",L(I)),x(A,"$new",function E(u){var d=E.$$p||I,N,g,c=this;E.$$p=null,N=$e(arguments),g=N;var l=c.$allocate();return n.send(l,l.$initialize,g,d),l},-1),x(A,"$subclasses",function(){var u=this;if(typeof WeakRef<"u"){var d,N,g=[];for(d=0;d<u.$$subclasses.length;d++)N=u.$$subclasses[d].deref(),N!==void 0&&g.push(N);return g}else return u.$$subclasses}),x(A,"$superclass",function(){var u=this;return u.$$super||I}),x(A,"$to_s",function E(){E.$$p;var u=this;E.$$p=null;var d=u.$$singleton_of;return d&&d.$$is_a_module?"#<Class:"+d.$name()+">":d?"#<Class:#<"+d.$$class.$name()+":0x"+n.id(d).$to_s(16)+">>":W(u,Y(u,"to_s",E,!1,!0),"to_s",[],null)}),x(A,"$attached_object",function(){var u=this;if(u.$$singleton_of!=null)return u.$$singleton_of;O.$raise(j("TypeError"),"`"+u+"' is not a singleton class")}),H(A,"inspect","to_s")}("::",null,h)};Opal.modules["corelib/basic_object"]=function(n){var z=n.klass,w=n.slice,D=n.def,x=n.alias,ee=n.return_val,Z=n.Opal,M=n.truthy,J=n.range,v=n.Kernel,L=n.to_a,$e=n.send,W=n.eqeq,Y=n.rb_ge,O=n.nil,H=n.$$$;return n.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(b,h){var I=z(b,h,"BasicObject");return D(I,"$initialize",function(k){return w(arguments),O},-1),D(I,"$==",function(k){var F=this;return F===k}),D(I,"$eql?",function(k){var F=this;return F["$=="](k)}),x(I,"equal?","=="),D(I,"$__id__",function(){var k=this;return k.$$id!=null||n.prop(k,"$$id",n.uid()),k.$$id}),D(I,"$__send__",function j(k,F){var p=j.$$p||O,A,P,S=this;j.$$p=null,A=w(arguments,1),P=A,k.$$is_string||S.$raise(H("TypeError"),""+S.$inspect()+" is not a symbol nor a string");var E=S[n.jsid(k)];return E?(p!==O&&(E.$$p=p),E.apply(S,P)):(p!==O&&(S.$method_missing.$$p=p),S.$method_missing.apply(S,[k].concat(P)))},-2),D(I,"$!",ee(!1)),Z.$pristine("!"),D(I,"$!=",function(k){var F=this;return F["$=="](k)["$!"]()}),D(I,"$instance_eval",function j(k){var F=j.$$p||O,p,A,P,S=this,E=O,u=O,d=O,N=O,g=O,c=O;if(j.$$p=null,p=w(arguments),A=p,M(F["$nil?"]())&&M(!!n.compile))M(J(1,3,!1)["$cover?"](A.$size()))||v.$raise(H("ArgumentError"),"wrong number of arguments (0 for 1..3)"),P=[].concat(L(A)),E=P[0]==null?O:P[0],u=P[1]==null?O:P[1],P[2]==null||P[2],d=new Map([["file",M(N=u)?N:"(eval)"],["eval",!0]]),g=new Map([["arity_check",!1]]).$merge(d),c=Z.$compile(E,g),F=$e(v,"proc",[],function G(){var _=G.$$s==null?this:G.$$s;return new Function("Opal,self","return "+c)(n,_)},{$$s:S});else{if(M(F["$nil?"]())&&M(Y(A.$length(),1))&&W(A.$first()["$[]"](0),"@"))return S.$instance_variable_get(A.$first());M(A["$any?"]())&&v.$raise(H("ArgumentError"),"wrong number of arguments ("+A.$size()+" for 0)")}var l=F.$$s,q;if(F.$$s=null,S.$$is_a_module){S.$$eval=!0;try{q=F.call(S,S)}finally{S.$$eval=!1}}else q=F.call(S,S);return F.$$s=l,q},-1),D(I,"$instance_exec",function j(k){var F=j.$$p||O,p,A,P=this;j.$$p=null,p=w(arguments),A=p,M(F)||v.$raise(H("ArgumentError"),"no block given");var S=F.$$s,E;if(F.$$s=null,P.$$is_a_module){P.$$eval=!0;try{E=F.apply(P,A)}finally{P.$$eval=!1}}else E=F.apply(P,A);return F.$$s=S,E},-1),D(I,"$singleton_method_added",function(k){return w(arguments),O},-1),D(I,"$singleton_method_removed",function(k){return w(arguments),O},-1),D(I,"$singleton_method_undefined",function(k){return w(arguments),O},-1),D(I,"$method_missing",function j(k,F){j.$$p;var p,A,P=this,S=O;return j.$$p=null,p=w(arguments,1),A=p,S=Z.$inspect(P),v.$raise(H("NoMethodError").$new("undefined method `"+k+"' for "+S,k,A),O,v.$caller(1))},-2),Z.$pristine(I,"method_missing"),D(I,"$respond_to_missing?",function(k,F){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(n){var z=n.truthy,w=n.coerce_to,D=n.respond_to,x=n.Opal,ee=n.deny_frozen_access,Z=n.freeze,M=n.freeze_props,J=n.jsid,v=n.each_ivar,L=n.module,$e=n.return_val,W=n.def,Y=n.Kernel,O=n.gvars,H=n.slice,b=n.send,h=n.to_a,I=n.ensure_kwargs,j=n.hash_get,k=n.eqeq,F=n.rb_plus,p=n.extract_kwargs,A=n.eqeqeq,P=n.return_self,S=n.rb_le,E=n.rb_lt,u=n.Object,d=n.alias,N=n.klass,g=[],c=n.nil,l=n.$$$;return n.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(q,G){var _=L(q,"Kernel"),s=[_].concat(G),$=n.$r(s);W(_,"$=~",$e(!1)),W(_,"$!~",function(r){var i=this;return i["$=~"](r)["$!"]()}),W(_,"$===",function(r){var i=this,a=c;return z(a=i.$object_id()["$=="](r.$object_id()))?a:i["$=="](r)}),W(_,"$<=>",function(r){var i=this;i.$$comparable=!0;var a=i["$=="](r);return a&&a!==c?0:c}),W(_,"$method",function(r){var i=this,a=i[J(r)];return(!a||a.$$stub)&&Y.$raise(l("NameError").$new("undefined method `"+r+"' for class `"+i.$class()+"'",r)),l("Method").$new(i,a.$$owner||i.$class(),a,r)}),W(_,"$methods",function(r){var i=this;return r==null&&(r=!0),z(r)?n.methods(i):n.own_methods(i)},-1),W(_,"$public_methods",function(r){var i=this;return r==null&&(r=!0),z(r)?n.methods(i):n.receiver_methods(i)},-1),W(_,"$Array",function(r){var i;return r===c?[]:r.$$is_array?r:(i=x["$coerce_to?"](r,l("Array"),"to_ary"),i!==c||(i=x["$coerce_to?"](r,l("Array"),"to_a"),i!==c)?i:[r])}),W(_,"$at_exit",function e(){var r=e.$$p||c,i=c;return O.__at_exit__==null&&(O.__at_exit__=c),e.$$p=null,O.__at_exit__=z(i=O.__at_exit__)?i:[],O.__at_exit__["$<<"](r),r}),W(_,"$caller",function(r,i){r==null&&(r=1),i==null&&(i=c);var a,o;a=new Error().$backtrace(),o=[];for(var m=r+1,T=a.length;m<T;m++)a[m].match(/runtime\.js/)||o.push(a[m]);return i!=c&&(o=o.slice(0,i)),o},-1),W(_,"$caller_locations",function(r){var i,a,o=this;return i=H(arguments),a=i,b(b(o,"caller",h(a)),"map",[],function(T){return T==null&&(T=c),l(l(l("Thread"),"Backtrace"),"Location").$new(T)})},-1),W(_,"$class",function(){var r=this;return r.$$class}),W(_,"$copy_instance_variables",function(r){var i=this,a=Object.keys(r),o,m,T;for(o=0,m=a.length;o<m;o++)T=a[o],T.charAt(0)!=="$"&&r.hasOwnProperty(T)&&(i[T]=r[T])}),W(_,"$copy_singleton_methods",function(r){var i=this,a,o,m,T;if(r.hasOwnProperty("$$meta")&&r.$$meta!==null){var K=n.get_singleton_class(r),C=n.get_singleton_class(i);for(m=Object.getOwnPropertyNames(K.$$prototype),a=0,T=m.length;a<T;a++)o=m[a],n.is_method(o)&&(C.$$prototype[o]=K.$$prototype[o]);C.$$const=Object.assign({},K.$$const),Object.setPrototypeOf(C.$$prototype,Object.getPrototypeOf(K.$$prototype))}for(a=0,m=Object.getOwnPropertyNames(r),T=m.length;a<T;a++)o=m[a],o.charAt(0)==="$"&&o.charAt(1)!=="$"&&r.hasOwnProperty(o)&&(i[o]=r[o])}),W(_,"$clone",function(r){var i,a=this,o=c;return r=I(r),i=j(r,"freeze"),i==null&&(i=c),z(i["$nil?"]())||k(i,!0)||k(i,!1)||a.$raise($("ArgumentError"),"unexpected value for freeze: "+i.$class()),o=a.$class().$allocate(),o.$copy_instance_variables(a),o.$copy_singleton_methods(a),o.$initialize_clone(a,new Map([["freeze",i]])),(k(i,!0)||z(i["$nil?"]())&&z(a["$frozen?"]()))&&o.$freeze(),o},-1),W(_,"$initialize_clone",function(r,i){var a=this;return i=I(i),j(i,"freeze"),a.$initialize_copy(r),a},-2),W(_,"$define_singleton_method",function e(r,i){var a=e.$$p||c,o=this;return e.$$p=null,b(o.$singleton_class(),"define_method",[r,i],a.$to_proc())},-2),W(_,"$dup",function(){var r=this,i=c;return i=r.$class().$allocate(),i.$copy_instance_variables(r),i.$initialize_dup(r),i}),W(_,"$initialize_dup",function(r){var i=this;return i.$initialize_copy(r)}),W(_,"$enum_for",function e(r,i){var a=e.$$p||c,o,m,T,K=this;return e.$$p=null,o=H(arguments),o.length>0&&(m=o.shift()),m==null&&(m="each"),T=o,b(l("Enumerator"),"for",[K,m].concat(h(T)),a.$to_proc())},-1),W(_,"$equal?",function(r){var i=this;return i===r}),W(_,"$exit",function(r){var i=c,a=c;for(O.__at_exit__==null&&(O.__at_exit__=c),r==null&&(r=!0),O.__at_exit__=z(i=O.__at_exit__)?i:[];!z(O.__at_exit__["$empty?"]());)a=O.__at_exit__.$pop(),a.$call();return r.$$is_boolean?r=r?0:1:r=w(r,l("Integer"),"to_int"),n.exit(r),c},-1),W(_,"$extend",function(r){var i,a,o=this;i=H(arguments),a=i,a.length==0&&o.$raise(l("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),ee(o);for(var m=o.$singleton_class(),T=a.length-1;T>=0;T--){var K=a[T];K.$$is_module||Y.$raise(l("TypeError"),"wrong argument type "+K.$class()+" (expected Module)"),K.$append_features(m),K.$extend_object(o),K.$extended(o)}return o},-1),W(_,"$freeze",function(){var r=this;return z(r["$frozen?"]())?r:typeof r=="object"?(M(r),Z(r)):r}),W(_,"$frozen?",function(){var r=this;switch(typeof r){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return r.$$frozen||!1;default:return!1}}),W(_,"$gets",function(r){var i,a;return O.stdin==null&&(O.stdin=c),i=H(arguments),a=i,b(O.stdin,"gets",h(a))},-1),W(_,"$hash",function(){var r=this;return r.$__id__()}),W(_,"$initialize_copy",$e(c));var t=[];return W(_,"$inspect",function(){var r=this,i=c,a=c,o=c,m=c;return function(){try{try{return i="",a=r.$__id__(),z(t["$include?"](a))?i=" ...":(t["$<<"](a),o=!0,b(r.$instance_variables(),"each",[],function T(K){var C=T.$$s==null?this:T.$$s,V=c,re=c;return K==null&&(K=c),V=C.$instance_variable_get(K),re=$("Opal").$inspect(V),i=F(i," "+K+"="+re)},{$$s:r})),"#<"+r.$class()+":0x"+a.$to_s(16)+i+">"}catch(T){if(n.rescue(T,[$("StandardError")])){m=T;try{return"#<"+r.$class()+":0x"+a.$to_s(16)+">"}finally{n.pop_exception(T)}}else throw T}}finally{z(o)&&t.$pop()}}()}),W(_,"$instance_of?",function(r){var i=this;return!r.$$is_class&&!r.$$is_module&&Y.$raise(l("TypeError"),"class or module required"),i.$$class===r}),W(_,"$instance_variable_defined?",function(r){var i=this;return r=x["$instance_variable_name!"](r),n.hasOwnProperty.call(i,r.substr(1))}),W(_,"$instance_variable_get",function(r){var i=this;r=x["$instance_variable_name!"](r);var a=i[n.ivar(r.substr(1))];return a??c}),W(_,"$instance_variable_set",function(r,i){var a=this;return ee(a),r=x["$instance_variable_name!"](r),a[n.ivar(r.substr(1))]=i}),W(_,"$remove_instance_variable",function(r){var i=this;r=x["$instance_variable_name!"](r);var a=n.ivar(r.substr(1)),o;return i.hasOwnProperty(a)?(o=i[a],delete i[a],o):Y.$raise(l("NameError"),"instance variable "+r+" not defined")}),W(_,"$instance_variables",function(){var r=this,i=[];return v(r,function(a){a.substr(-1)==="$"&&(a=a.slice(0,a.length-1)),i.push("@"+a)}),i}),W(_,"$Integer",function(r,i,a){var o,m,T,K;o=H(arguments,1),m=p(o),m=I(m),o.length>0&&(T=o.shift()),K=j(m,"exception"),K==null&&(K=!0);var C,V,re;if(K=z(K),!r.$$is_string){if(T!==void 0)if(K)Y.$raise(l("ArgumentError"),"base specified for non string value");else return c;if(r===c)if(K)Y.$raise(l("TypeError"),"can't convert nil into Integer");else return c;if(r.$$is_number){if(r===1/0||r===-1/0||isNaN(r))if(K)Y.$raise(l("FloatDomainError"),r);else return c;return Math.floor(r)}if(r["$respond_to?"]("to_int")&&(C=r.$to_int(),n.is_a(C,l("Integer")))||r["$respond_to?"]("to_i")&&(C=r.$to_i(),n.is_a(C,l("Integer"))))return C;if(K)Y.$raise(l("TypeError"),"can't convert "+r.$class()+" into Integer");else return c}if(r==="0")return 0;if(T===void 0)T=0;else if(T=w(T,l("Integer"),"to_int"),T===1||T<0||T>36)if(K)Y.$raise(l("ArgumentError"),"invalid radix "+T);else return c;if(V=r.toLowerCase(),V=V.replace(/(\d)_(?=\d)/g,"$1"),V=V.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,le,_e){switch(_e){case"0b":if(T===0||T===2)return T=2,le;case"0":case"0o":if(T===0||T===8)return T=8,le;case"0d":if(T===0||T===10)return T=10,le;case"0x":if(T===0||T===16)return T=16,le}if(K)Y.$raise(l("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return c}),T=T===0?10:T,re="0-"+(T<=10?T-1:"9a-"+String.fromCharCode(97+(T-11))),!new RegExp("^\\s*[+-]?["+re+"]+\\s*$").test(V))if(K)Y.$raise(l("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return c;if(C=parseInt(V,T),isNaN(C))if(K)Y.$raise(l("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return c;return C},-2),W(_,"$Float",function(r,i){var a;i=I(i),a=j(i,"exception"),a==null&&(a=!0);var o;if(a=z(a),r===c)if(a)Y.$raise(l("TypeError"),"can't convert nil into Float");else return c;if(r.$$is_string){if(o=r.toString(),o=o.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(o))return Y.$Integer(o);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(o))if(a)Y.$raise(l("ArgumentError"),'invalid value for Float(): "'+r+'"');else return c;return parseFloat(o)}return a?x["$coerce_to!"](r,l("Float"),"to_f"):w(r,l("Float"),"to_f")},-2),W(_,"$Hash",function(r){return z(r["$nil?"]())||k(r,[])?new Map:A(l("Hash"),r)?r:x["$coerce_to!"](r,l("Hash"),"to_hash")}),W(_,"$is_a?",function(r){var i=this;return!r.$$is_class&&!r.$$is_module&&Y.$raise(l("TypeError"),"class or module required"),n.is_a(i,r)}),W(_,"$itself",P),W(_,"$lambda",function e(){var r=e.$$p||c;return e.$$p=null,n.lambda(r)}),W(_,"$load",function(r){return r=x["$coerce_to!"](r,l("String"),"to_str"),n.load(r)}),W(_,"$loop",function e(){var r=e.$$p||c,i=this,a=c;if(e.$$p=null,r===c)return b(i,"enum_for",["loop"],function(){return l(l("Float"),"INFINITY")});for(;z(!0);)try{n.yieldX(r,[])}catch(o){if(n.rescue(o,[l("StopIteration")])){a=o;try{return a.$result()}finally{n.pop_exception(o)}}else throw o}return i}),W(_,"$nil?",$e(!1)),W(_,"$printf",function(r){var i,a,o=this,m=c;return O.stdout==null&&(O.stdout=c),i=H(arguments),a=i,z(a["$empty?"]())||(m=z(a[0].$$is_string)?O.stdout:a.$shift(),m.$write(b(o,"format",h(a)))),c},-1),W(_,"$proc",function e(){var r=e.$$p||c;return e.$$p=null,z(r)||Y.$raise(l("ArgumentError"),"tried to create Proc object without a block"),r.$$is_lambda=!1,r}),W(_,"$puts",function(r){var i,a;return O.stdout==null&&(O.stdout=c),i=H(arguments),a=i,b(O.stdout,"puts",h(a))},-1),W(_,"$p",function(r){var i,a;return i=H(arguments),a=i,b(a,"each",[],function(m){return O.stdout==null&&(O.stdout=c),m==null&&(m=c),O.stdout.$puts(m.$inspect())}),z(S(a.$length(),1))?a["$[]"](0):a},-1),W(_,"$print",function(r){var i,a;return O.stdout==null&&(O.stdout=c),i=H(arguments),a=i,b(O.stdout,"print",h(a))},-1),W(_,"$readline",function(r){var i,a;return O.stdin==null&&(O.stdin=c),i=H(arguments),a=i,b(O.stdin,"readline",h(a))},-1),W(_,"$warn",function(r,i){var a,o,m,T,K,C,V=this,re=c;return O.VERBOSE==null&&(O.VERBOSE=c),O.stderr==null&&(O.stderr=c),a=H(arguments),o=p(a),o=I(o),m=a,T=j(o,"uplevel"),T==null&&(T=c),z(T)&&(T=x["$coerce_to!"](T,l("Integer"),"to_str"),z(E(T,0))&&Y.$raise(l("ArgumentError"),"negative level ("+T+")"),re=(K=(C=V.$caller(F(T,1),1).$first(),C===c||C==null?c:C.$split(":in `")),K===c||K==null?c:K.$first()),z(re)&&(re=""+re+": "),m=b(m,"map",[],function(le){return le==null&&(le=c),""+re+"warning: "+le})),z(O.VERBOSE["$nil?"]())||z(m["$empty?"]())?c:b(O.stderr,"puts",h(m))},-1),W(_,"$raise",function(r,i,a){throw O["!"]==null&&(O["!"]=c),i==null&&(i=c),a==null&&(a=c),r==null&&O["!"]!==c?O["!"]:(r==null?r=l("RuntimeError").$new(""):D(r,"$to_str")?r=l("RuntimeError").$new(r.$to_str()):r.$$is_class&&D(r,"$exception")?r=r.$exception(i):r.$$is_exception||(r=l("TypeError").$new("exception class/object expected")),a!==c&&r.$set_backtrace(a),O["!"]!==c&&n.exceptions.push(O["!"]),O["!"]=r,r)},-1),W(_,"$rand",function(r){return r===void 0?l(l("Random"),"DEFAULT").$rand():(r.$$is_number&&(r<0&&(r=Math.abs(r)),r%1!==0&&(r=r.$to_i()),r===0&&(r=void 0)),l(l("Random"),"DEFAULT").$rand(r))},-1),W(_,"$respond_to?",function(r,i){var a=this;i==null&&(i=!1);var o=a[J(r)];return typeof o=="function"&&!o.$$stub?!0:a["$respond_to_missing?"].$$pristine===!0?!1:a["$respond_to_missing?"](r,i)},-2),W(_,"$respond_to_missing?",function(r,i){return!1},-2),x.$pristine(_,"respond_to?","respond_to_missing?"),W(_,"$require",function(r){return typeof r!="string"&&n.String&&n.Array&&(r=x["$coerce_to!"](r,l("String"),"to_str")),n.require(r)}),W(_,"$require_relative",function(r){return x["$try_convert!"](r,l("String"),"to_str"),r=l("File").$expand_path(l("File").$join(n.current_file,"..",r)),n.require(r)}),W(_,"$require_tree",function(r,i){var a;i=I(i),a=j(i,"autoload"),a==null&&(a=!1);var o=[];r=l("File").$expand_path(r),r=n.normalize(r),r==="."&&(r="");for(var m in n.modules)m["$start_with?"](r)&&(a?o.push([m,!0]):o.push([m,n.require(m)]));return o},-2),W(_,"$singleton_class",function(){var r=this;return n.get_singleton_class(r)}),W(_,"$sleep",function(r){r==null&&(r=c),r===c&&Y.$raise(l("TypeError"),"can't convert NilClass into time interval"),r.$$is_number||Y.$raise(l("TypeError"),"can't convert "+r.$class()+" into time interval"),r<0&&Y.$raise(l("ArgumentError"),"time interval must be positive");for(var i=n.global.performance?function(){return performance.now()}:function(){return new Date},a=i();i()-a<=r*1e3;);return Math.round(r)},-1),W(_,"$srand",function(r){return r==null&&(r=$("Random").$new_seed()),l("Random").$srand(r)},-1),W(_,"$String",function(r){var i=c;return z(i=x["$coerce_to?"](r,l("String"),"to_str"))?i:x["$coerce_to!"](r,l("String"),"to_s")}),W(_,"$tap",function e(){var r=e.$$p||c,i=this;return e.$$p=null,n.yield1(r,i),i}),W(_,"$to_proc",P),W(_,"$to_s",function(){var r=this;return"#<"+r.$class()+":0x"+r.$__id__().$to_s(16)+">"}),W(_,"$catch",function e(r){var i=e.$$p||c,a=c,o=c;e.$$p=null,r==null&&(r=c);try{return r=z(a=r)?a:u.$new(),n.yield1(i,r)}catch(m){if(n.rescue(m,[l("UncaughtThrowError")])){o=m;try{return k(o.$tag(),r)?o.$value():Y.$raise()}finally{n.pop_exception(m)}}else throw m}},-1),W(_,"$throw",function(r,i){return i==null&&(i=c),Y.$raise(l("UncaughtThrowError").$new(r,i))},-2),W(_,"$open",function e(r){var i=e.$$p||c,a,o;return e.$$p=null,a=H(arguments),o=a,b(l("File"),"open",h(o),i.$to_proc())},-1),W(_,"$yield_self",function e(){var r=e.$$p||c,i=this;return e.$$p=null,r===c?b(i,"enum_for",["yield_self"],$e(1)):n.yield1(r,i)}),d(_,"fail","raise"),d(_,"kind_of?","is_a?"),d(_,"object_id","__id__"),d(_,"public_send","__send__"),d(_,"send","__send__"),d(_,"then","yield_self"),d(_,"to_enum","enum_for")}("::",g),function(q,G){var _=N(q,G,"Object");return delete u.$$prototype.$require,_.$include(Y)}("::",null)};Opal.modules["corelib/main"]=function(n){var z=n.return_val,w=n.def,D=n.Object,x=n.slice,ee=n.Kernel,Z=n.top;return n.nil,n.add_stubs("include,raise"),function(M,J){return w(M,"$to_s",z("main")),w(M,"$include",function(L){return D.$include(L)}),w(M,"$autoload",function(L){var $e,W;return $e=x(arguments),W=$e,n.Object.$autoload.apply(n.Object,W)},-1),w(M,"$using",function(L){return ee.$raise("main.using is permitted only at toplevel")})}(n.get_singleton_class(Z))};Opal.modules["corelib/error/errno"]=function(n){var z=n.module,w=n.truthy,D=n.rb_plus,x=n.send2,ee=n.find_super,Z=n.def,M=n.klass,J=n.nil,v=n.$$$;return n.add_stubs("+,errno,class,attr_reader"),function(L,$e){var W=z(L,"Errno"),Y=J,O=J;Y=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],O=J;var H;for(H=0;H<Y.length;H++)(function(){var b=Y[H][0],h=Y[H][1],I=Y[H][2];O=n.klass(W,n.SystemCallError,b),O.errno=I,function(j,k){return Z(j,"$new",function F(p){F.$$p;var A=this,P=J;return F.$$p=null,p==null&&(p=J),P=h,w(p)&&(P=D(P," - "+p)),x(A,ee(A,"new",F,!1,!0),"new",[P],null)},-1)}(n.get_singleton_class(O))})()}("::"),function(L,$e,W){var Y=M(L,$e,"SystemCallError");return Z(Y,"$errno",function(){var H=this;return H.$class().$errno()}),function(O,H){return O.$attr_reader("errno")}(n.get_singleton_class(Y))}("::",v("StandardError"))};Opal.modules["corelib/error"]=function(n){var z=n.klass,w=n.slice,D=n.gvars,x=n.defs,ee=n.send,Z=n.to_a,M=n.def,J=n.send2,v=n.find_super,L=n.truthy,$e=n.Kernel,W=n.not,Y=n.rb_plus,O=n.eqeq,H=n.Object,b=n.ensure_kwargs,h=n.hash_get,I=n.module,j=[],k=n.nil,F=n.$$$;return n.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(p,A,P){var S=z(p,A,"Exception"),E=[S].concat(P),u=n.$r(E),d=S.$$prototype;d.message=k,n.prop(S.$$prototype,"$$is_exception",!0);var N;Error.stackTraceLimit=100,x(S,"$new",function(l){var q,G,_=this;D["!"]==null&&(D["!"]=k),q=w(arguments),G=q;var s=G.length>0?G[0]:k,$=new _.$$constructor(s);return $.name=_.$$name,$.message=s,$.cause=D["!"],n.send($,$.$initialize,G),n.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace($,N),$},-1),N=S.$new,x(S,"$exception",function(l){var q,G,_=this;return q=w(arguments),G=q,ee(_,"new",Z(G))},-1),M(S,"$initialize",function(l){var q,G,_=this;return q=w(arguments),G=q,_.message=G.length>0?G[0]:k},-1),M(S,"$copy_instance_variables",function c(l){var q=c.$$p||k,G=this;c.$$p=null,J(G,v(G,"copy_instance_variables",c,!1,!0),"copy_instance_variables",[l],q),G.message=l.message,G.cause=l.cause,G.stack=l.stack});function g(c){for(var l=[],q,G=0;G<c.length;G++){var _=c[G];!_||!_.$$is_string||((q=_.match(/^    at (.*?) \((.*?)\)$/))?l.push(q[2]+":in `"+q[1]+"'"):(q=_.match(/^    at (.*?)$/))?l.push(q[1]+":in `undefined'"):(q=_.match(/^  from (.*?)$/))?l.push(q[1]):(q=_.match(/^(.*?)@(.*?)$/))&&l.push(q[2]+":in `"+q[1]+"'"))}return l}return M(S,"$backtrace",function(){var l=this;if(l.backtrace)return l.backtrace;var q=l.stack;return typeof q<"u"&&q.$$is_string?l.backtrace=g(q.split(`
`)):q?l.backtrace=g(q):[]}),M(S,"$backtrace_locations",function(){var l,q=this;return q.backtrace_locations||(q.backtrace_locations=(l=q.$backtrace(),l===k||l==null?k:ee(l,"map",[],function(_){return _==null&&(_=k),F(F(F("Thread"),"Backtrace"),"Location").$new(_)}))),q.backtrace_locations}),M(S,"$cause",function(){var l=this;return l.cause||k}),M(S,"$exception",function(l){var q=this;if(l==null&&(l=k),l===k||q===l)return q;var G=q.$clone();return G.message=l,q.backtrace&&(G.backtrace=q.backtrace.$dup()),G.stack=q.stack,G.cause=q.cause,G},-1),M(S,"$message",function(){var l=this;return l.$to_s()}),M(S,"$full_message",function(l){var q,G=this,_=k,s=k,$=k,t=k,e=k,r=k,i=k,a=k,o=k;return D.stderr==null&&(D.stderr=k),l==null&&(l=k),L(u("Hash","skip_raise")?"constant":k)?(l=new Map([["highlight",D.stderr["$tty?"]()],["order","top"]]).$merge(L(_=l)?_:new Map),q=[l["$[]"]("highlight"),l["$[]"]("order")],s=q[0],$=q[1],L([!0,!1]["$include?"](s))||$e.$raise(F("ArgumentError"),"expected true or false as highlight: "+s),L(["top","bottom"]["$include?"]($))||$e.$raise(F("ArgumentError"),"expected :top or :bottom as order: "+$),L(s)?(t="\x1B[1;4m",e="\x1B[1m",r="\x1B[m"):t=e=r="",i=G.$backtrace().$dup(),(W(i)||L(i["$empty?"]()))&&(i=G.$caller()),a=i.$shift(),o=""+a+": ",o=Y(o,""+e+G.$to_s()+" ("+t+G.$class()+r+e+")"+r+`
`),o=Y(o,ee(i,"map",[],function(T){return T==null&&(T=k),"	from "+T+`
`}).$join()),L(G.$cause())&&(o=Y(o,G.$cause().$full_message(new Map([["highlight",s]])))),O($,"bottom")&&(o=o.$split(`
`).$reverse().$join(`
`),o=Y(""+e+"Traceback"+r+` (most recent call last):
`,o)),o):""+G.message+`
`+G.stack},-1),M(S,"$inspect",function(){var l=this,q=k;return q=l.$to_s(),L(q["$empty?"]())?l.$class().$to_s():"#<"+l.$class().$to_s()+": "+l.$to_s()+">"}),M(S,"$set_backtrace",function(l){var q=this,G=!0,_,s;if(l===k)q.backtrace=k,q.stack="";else if(l.$$is_string)q.backtrace=[l],q.stack="  from "+l;else{if(l.$$is_array){for(_=0,s=l.length;_<s;_++)if(!l[_].$$is_string){G=!1;break}}else G=!1;G===!1&&$e.$raise(F("TypeError"),"backtrace must be Array of String"),q.backtrace=l,q.stack=ee(l,"map",[],function(t){return t==null&&(t=k),Y("  from ",t)}).join(`
`)}return l}),M(S,"$to_s",function(){var l=this,q=k,G=k;return L(q=L(G=l.message)?l.message.$to_s():G)?q:l.$class().$to_s()})}("::",Error,j),z("::",F("Exception"),"ScriptError"),z("::",F("ScriptError"),"SyntaxError"),z("::",F("ScriptError"),"LoadError"),z("::",F("ScriptError"),"NotImplementedError"),z("::",F("Exception"),"SystemExit"),z("::",F("Exception"),"NoMemoryError"),z("::",F("Exception"),"SignalException"),z("::",F("SignalException"),"Interrupt"),z("::",F("Exception"),"SecurityError"),z("::",F("Exception"),"SystemStackError"),z("::",F("Exception"),"StandardError"),z("::",F("StandardError"),"EncodingError"),z("::",F("StandardError"),"ZeroDivisionError"),z("::",F("StandardError"),"NameError"),z("::",F("NameError"),"NoMethodError"),z("::",F("StandardError"),"RuntimeError"),z("::",F("RuntimeError"),"FrozenError"),z("::",F("StandardError"),"LocalJumpError"),z("::",F("StandardError"),"TypeError"),z("::",F("StandardError"),"ArgumentError"),z("::",F("ArgumentError"),"UncaughtThrowError"),z("::",F("StandardError"),"IndexError"),z("::",F("IndexError"),"StopIteration"),z("::",F("StopIteration"),"ClosedQueueError"),z("::",F("IndexError"),"KeyError"),z("::",F("StandardError"),"RangeError"),z("::",F("RangeError"),"FloatDomainError"),z("::",F("StandardError"),"IOError"),z("::",F("IOError"),"EOFError"),z("::",F("StandardError"),"SystemCallError"),z("::",F("StandardError"),"RegexpError"),z("::",F("StandardError"),"ThreadError"),z("::",F("StandardError"),"FiberError"),H.$autoload("Errno","corelib/error/errno"),function(p,A){var P=z(p,A,"FrozenError");return P.$attr_reader("receiver"),M(P,"$initialize",function S(E,u){var d;S.$$p;var N=this;return S.$$p=null,u=b(u),d=h(u,"receiver"),d==null&&(d=k),J(N,v(N,"initialize",S,!1,!0),"initialize",[E],null),N.receiver=d},-2)}("::",F("RuntimeError")),function(p,A){var P=z(p,A,"UncaughtThrowError"),S=P.$$prototype;return S.tag=k,P.$attr_reader("tag","value"),M(P,"$initialize",function E(u,d){E.$$p;var N=this;return E.$$p=null,d==null&&(d=k),N.tag=u,N.value=d,J(N,v(N,"initialize",E,!1,!0),"initialize",["uncaught throw "+N.tag.$inspect()],null)},-2)}("::",F("ArgumentError")),function(p,A){var P=z(p,A,"NameError");return P.$attr_reader("name"),M(P,"$initialize",function S(E,u){S.$$p;var d=this;return S.$$p=null,u==null&&(u=k),J(d,v(d,"initialize",S,!1,!0),"initialize",[E],null),d.name=u},-2)}("::",null),function(p,A){var P=z(p,A,"NoMethodError");return P.$attr_reader("args"),M(P,"$initialize",function S(E,u,d){S.$$p;var N=this;return S.$$p=null,u==null&&(u=k),d==null&&(d=[]),J(N,v(N,"initialize",S,!1,!0),"initialize",[E,u],null),N.args=d},-2)}("::",null),function(p,A){var P=z(p,A,"StopIteration");return P.$attr_reader("result")}("::",null),function(p,A){var P=z(p,A,"KeyError"),S=P.$$prototype;return S.receiver=S.key=k,M(P,"$initialize",function E(u,d){var N,g;E.$$p;var c=this;return E.$$p=null,d=b(d),N=h(d,"receiver"),N==null&&(N=k),g=h(d,"key"),g==null&&(g=k),J(c,v(c,"initialize",E,!1,!0),"initialize",[u],null),c.receiver=N,c.key=g},-2),M(P,"$receiver",function(){var u=this,d=k;return L(d=u.receiver)?d:$e.$raise(F("ArgumentError"),"no receiver is available")}),M(P,"$key",function(){var u=this,d=k;return L(d=u.key)?d:$e.$raise(F("ArgumentError"),"no key is available")})}("::",null),function(p,A){var P=z(p,A,"LocalJumpError");return P.$attr_reader("exit_value","reason"),M(P,"$initialize",function S(E,u,d){S.$$p;var N=this;return S.$$p=null,u==null&&(u=k),d==null&&(d="noreason"),J(N,v(N,"initialize",S,!1,!0),"initialize",[E],null),N.exit_value=u,N.reason=d},-2)}("::",null),function(p,A){var P=I(p,"JS"),S=[P].concat(A);return z(S[0],null,"Error"),k}("::",j)};Opal.modules["corelib/constants"]=function(n){var z=n.const_set;n.nil;var w=n.$$$;return z("::","RUBY_PLATFORM","opal"),z("::","RUBY_ENGINE","opal"),z("::","RUBY_VERSION","3.2.0"),z("::","RUBY_ENGINE_VERSION","1.8.2"),z("::","RUBY_RELEASE_DATE","2023-11-23"),z("::","RUBY_PATCHLEVEL",0),z("::","RUBY_REVISION","0"),z("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),z("::","RUBY_DESCRIPTION","opal "+w("RUBY_ENGINE_VERSION")+" ("+w("RUBY_RELEASE_DATE")+" revision "+w("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(n){var z=n.Object;return n.nil,n.add_stubs("require"),z.$require("corelib/runtime"),z.$require("corelib/helpers"),z.$require("corelib/module"),z.$require("corelib/class"),z.$require("corelib/basic_object"),z.$require("corelib/kernel"),z.$require("corelib/main"),z.$require("corelib/error"),z.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(n){var z=n.klass,w=n.Kernel,D=n.def,x=n.return_val,ee=n.ensure_kwargs,Z=n.hash_get,M=n.NilClass,J=n.slice,v=n.truthy,L=n.rb_gt,$e=n.alias,W=n.nil,Y=n.$$$;return n.add_stubs("raise,name,new,>,length,Rational,to_i"),function(O,H,b){var h=z(O,H,"NilClass");return h.$$prototype.$$meta=h,function(I,j){return D(I,"$allocate",function(){var F=this;return w.$raise(Y("TypeError"),"allocator undefined for "+F.$name())}),n.udef(I,"$new"),W}(n.get_singleton_class(h)),D(h,"$!",x(!0)),D(h,"$&",x(!1)),D(h,"$|",function(j){return j!==!1&&j!==W}),D(h,"$^",function(j){return j!==!1&&j!==W}),D(h,"$==",function(j){return j===W}),D(h,"$dup",x(W)),D(h,"$clone",function(j){return j=ee(j),Z(j,"freeze"),W},-1),D(h,"$inspect",x("nil")),D(h,"$nil?",x(!0)),D(h,"$singleton_class",function(){return M}),D(h,"$to_a",function(){return[]}),D(h,"$to_h",function(){return new Map}),D(h,"$to_i",x(0)),D(h,"$to_s",x("")),D(h,"$to_c",function(){return Y("Complex").$new(0,0)}),D(h,"$rationalize",function(j){var k,F;return k=J(arguments),F=k,v(L(F.$length(),1))&&w.$raise(Y("ArgumentError")),w.$Rational(0,1)},-1),D(h,"$to_r",function(){return w.$Rational(0,1)}),D(h,"$instance_variables",function(){return[]}),$e(h,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(n){var z=n.klass,w=n.Kernel,D=n.def,x=n.return_self,ee=n.ensure_kwargs,Z=n.hash_get,M=n.slice,J=n.truthy,v=n.send2,L=n.find_super,$e=n.to_a,W=n.alias,Y=n.nil,O=n.$$$;return n.add_stubs("raise,name,==,to_s,__id__"),function(H,b,h){var I=z(H,b,"Boolean");n.prop(I.$$prototype,"$$is_boolean",!0);for(var j=["$$class","$$meta"],k=0;k<j.length;k++)Object.defineProperty(I.$$prototype,j[k],{configurable:!0,enumerable:!1,get:function(){return this==!0?n.TrueClass:this==!1?n.FalseClass:n.Boolean}});return Object.defineProperty(I.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:Y}}),function(F,p){return D(F,"$allocate",function(){var P=this;return w.$raise(O("TypeError"),"allocator undefined for "+P.$name())}),n.udef(F,"$new"),Y}(n.get_singleton_class(I)),D(I,"$__id__",function(){var p=this;return p.valueOf()?2:0}),D(I,"$!",function(){var p=this;return p!=!0}),D(I,"$&",function(p){var A=this;return A==!0?p!==!1&&p!==Y:!1}),D(I,"$|",function(p){var A=this;return A==!0?!0:p!==!1&&p!==Y}),D(I,"$^",function(p){var A=this;return A==!0?p===!1||p===Y:p!==!1&&p!==Y}),D(I,"$==",function(p){var A=this;return A==!0===p.valueOf()}),D(I,"$singleton_class",function(){var p=this;return p.$$meta}),D(I,"$to_s",function(){var p=this;return p==!0?"true":"false"}),D(I,"$dup",x),D(I,"$clone",function(p){var A=this;return p=ee(p),Z(p,"freeze"),A},-1),D(I,"$method_missing",function F(p,A){var P=F.$$p||Y,S,E,u=this;F.$$p=null,S=M(arguments,1),E=S;var d=u.$$class.$$prototype[n.jsid(p)];return J(typeof d<"u"&&!d.$$stub)||v(u,L(u,"method_missing",F,!1,!0),"method_missing",[p].concat($e(E)),P),n.send(u,d,E,P)},-2),D(I,"$respond_to_missing?",function(p,A){var P=this,S=P.$$class.$$prototype[n.jsid(p)];return typeof S<"u"&&!S.$$stub},-2),W(I,"eql?","=="),W(I,"equal?","=="),W(I,"inspect","to_s"),W(I,"object_id","__id__")}("::",Boolean),z("::",O("Boolean"),"TrueClass"),z("::",O("Boolean"),"FalseClass"),Y};Opal.modules["corelib/comparable"]=function(n){var z=n.truthy,w=n.module,D=n.rb_gt,x=n.rb_lt,ee=n.eqeqeq,Z=n.Kernel,M=n.def,J=n.nil,v=n.$$$;return n.add_stubs(">,<,===,raise,class,<=>,equal?"),function(L){var $e=w(L,"Comparable"),W=J;function Y(b){return n.is_a(b,n.Integer)?b:D(b,0)?1:x(b,0)?-1:0}function O(b,h){var I;ee(J,W=h)||ee(!0,W)||ee(!1,W)||ee(v("Integer"),W)||ee(v("Float"),W)?I=h.$inspect():I=h.$$class,Z.$raise(v("ArgumentError"),"comparison of "+b.$class()+" with "+I+" failed")}function H(b,h){var I=b["$<=>"](h);return z(I)||O(b,h),Y(I)}return M($e,"$==",function(h){var I=this,j=J;return z(I["$equal?"](h))?!0:I["$<=>"]==n.Kernel["$<=>"]?!1:I.$$comparable?(I.$$comparable=!1,!1):z(j=I["$<=>"](h))?Y(j)==0:!1}),M($e,"$>",function(h){var I=this;return H(I,h)>0}),M($e,"$>=",function(h){var I=this;return H(I,h)>=0}),M($e,"$<",function(h){var I=this;return H(I,h)<0}),M($e,"$<=",function(h){var I=this;return H(I,h)<=0}),M($e,"$between?",function(h,I){var j=this;return!(z(x(j,h))||z(D(j,I)))}),M($e,"$clamp",function(h,I){var j=this;I==null&&(I=J);var k,F;if(I===J&&(n.is_a(h,n.Range)||Z.$raise(v("TypeError"),"wrong argument type "+h.$class()+" (expected Range)"),F=h.excl,I=h.end,h=h.begin,I!==J&&F&&Z.$raise(v("ArgumentError"),"cannot clamp with an exclusive range")),h!==J&&I!==J&&H(h,I)>0&&Z.$raise(v("ArgumentError"),"min argument must be smaller than max argument"),h!==J){if(k=H(j,h),k==0)return j;if(k<0)return h}return I!==J&&(k=H(j,I),k>0)?I:j},-2)}("::")};Opal.modules["corelib/regexp"]=function(n){var z=n.coerce_to,w=n.prop,D=n.freeze,x=n.klass,ee=n.const_set,Z=n.send2,M=n.find_super,J=n.def,v=n.truthy,L=n.gvars,$e=n.slice,W=n.Kernel,Y=n.Opal,O=n.alias,H=n.send,b=n.regexp,h=n.rb_plus,I=n.ensure_kwargs,j=n.hash_get,k=n.rb_ge,F=n.to_a,p=n.eqeqeq,A=n.rb_minus,P=n.return_ivar,S=[],E=n.nil,u=n.$$$;return n.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),x("::",u("StandardError"),"RegexpError"),function(d,N,g){var c=x(d,N,"Regexp"),l=[c].concat(g),q=n.$r(l);return ee(c,"IGNORECASE",1),ee(c,"EXTENDED",2),ee(c,"MULTILINE",4),n.prop(c.$$prototype,"$$is_regexp",!0),function(G,_){var s=[G].concat(_),$=n.$r(s);return J(G,"$allocate",function t(){var e=t.$$p||E,r=this,i=E;return t.$$p=null,i=Z(r,M(r,"allocate",t,!1,!0),"allocate",[],e),i.uninitialized=!0,i}),J(G,"$escape",function(e){return e=z(e,u("String"),"to_str"),n.escape_regexp(e)}),J(G,"$last_match",function(e){return L["~"]==null&&(L["~"]=E),e==null&&(e=E),v(e["$nil?"]())?L["~"]:v(L["~"])?L["~"]["$[]"](e):E},-1),J(G,"$union",function(e){var r,i,a=this;r=$e(arguments),i=r;var o,m,T,K,C;if(i.length==0)return/(?!)/;if(i.length==1&&i[0].$$is_regexp)return i[0];o=i[0].$$is_array,i.length>1&&o&&W.$raise(u("TypeError"),"no implicit conversion of Array into String"),o&&(i=i[0]),K=void 0,m=[];for(var V=0;V<i.length;V++)T=i[V],T.$$is_string?m.push(a.$escape(T)):T.$$is_regexp?(C=T.$options(),K!=null&&K!=C&&W.$raise(u("TypeError"),"All expressions must use the same options"),K=C,m.push("("+T.source+")")):m.push(a.$escape(T.$to_str()));return a.$new(m.$join("|"),K)},-1),J(G,"$new",function(e,r){if(e.$$is_regexp)return new RegExp(e);if(e=Y["$coerce_to!"](e,u("String"),"to_str"),e.charAt(e.length-1)==="\\"&&e.charAt(e.length-2)!=="\\"&&W.$raise(u("RegexpError"),"too short escape sequence: /"+e+"/"),e=e.replace("\\A","^").replace("\\z","$"),r===void 0||r["$!"]())return new RegExp(e);if(r.$$is_number){var i="";$("IGNORECASE")&r&&(i+="i"),$("MULTILINE")&r&&(i+="m"),r=i}else r="i";return new RegExp(e,r)},-2),O(G,"compile","new"),O(G,"quote","escape")}(n.get_singleton_class(c),l),J(c,"$==",function(_){var s=this;return _ instanceof RegExp&&s.toString()===_.toString()}),J(c,"$===",function(_){var s=this;return s.$match(Y["$coerce_to?"](_,u("String"),"to_str"))!==E}),J(c,"$=~",function(_){var s=this,$=E;return L["~"]==null&&(L["~"]=E),v($=s.$match(_))?L["~"].$begin(0):$}),J(c,"$freeze",function(){var _=this;return v(_["$frozen?"]())?_:(_.hasOwnProperty("$$g")||w(_,"$$g",null),_.hasOwnProperty("$$gm")||w(_,"$$gm",null),D(_))}),J(c,"$inspect",function(){var _=this,s=/^\/(.*)\/([^\/]*)$/,$=_.toString(),t=s.exec($);if(t){for(var e=t[1],r=t[2],i=e.split(""),a=i.length,o=!1,m="",T=0;T<a;T++){var K=i[T];!o&&K=="/"&&(m=m.concat("\\")),m=m.concat(K),K=="\\"?o?o=!1:o=!0:o=!1}return"/"+m+"/"+r}else return $}),J(c,"$match",function G(_,s){var $=G.$$p||E,t=this;if(L["~"]==null&&(L["~"]=E),G.$$p=null,t.uninitialized&&W.$raise(u("TypeError"),"uninitialized Regexp"),s===void 0){if(_===E)return L["~"]=E;var e=t.exec(z(_,u("String"),"to_str"));return e?(L["~"]=u("MatchData").$new(t,e),$===E?L["~"]:n.yield1($,L["~"])):L["~"]=E}if(s=z(s,u("Integer"),"to_int"),_===E||(_=z(_,u("String"),"to_str"),s<0&&(s+=_.length,s<0)))return L["~"]=E;for(var r,i=n.global_regexp(t);;){if(r=i.exec(_),r===null)return L["~"]=E;if(r.index>=s)return L["~"]=u("MatchData").$new(i,r),$===E?L["~"]:n.yield1($,L["~"]);i.lastIndex=r.index+1}},-2),J(c,"$match?",function(_,s){var $=this;if($.uninitialized&&W.$raise(u("TypeError"),"uninitialized Regexp"),s===void 0)return _===E?!1:$.test(z(_,u("String"),"to_str"));if(s=z(s,u("Integer"),"to_int"),_===E||(_=z(_,u("String"),"to_str"),s<0&&(s+=_.length,s<0)))return!1;var t,e=n.global_regexp($);return t=e.exec(_),!(t===null||t.index<s)},-2),J(c,"$names",function(){var _=this;return H(_.$source().$scan(b(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),J(c,"$named_captures",function(){var _=this;return H(H(H(_.$source().$scan(b(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function($){return $==null&&($=E),H($,"map",[],function(e){return e==null&&(e=E),h(e.$last(),1)})})}),J(c,"$~",function(){var _=this;return L._==null&&(L._=E),_["$=~"](L._)}),J(c,"$source",function(){var _=this;return _.source}),J(c,"$options",function(){var _=this;_.uninitialized&&W.$raise(u("TypeError"),"uninitialized Regexp");var s=0;return _.multiline&&(s|=q("MULTILINE")),_.ignoreCase&&(s|=q("IGNORECASE")),s}),J(c,"$casefold?",function(){var _=this;return _.ignoreCase}),O(c,"eql?","=="),O(c,"to_s","source")}("::",RegExp,S),function(d,N,g){var c=x(d,N,"MatchData"),l=[c].concat(g),q=n.$r(l),G=c.$$prototype;return G.matches=E,c.$attr_reader("post_match","pre_match","regexp","string"),J(c,"$initialize",function(s,$,t){var e,r=this;t=I(t),e=j(t,"no_matchdata"),e==null&&(e=!1),v(e)||(L["~"]=r),r.regexp=s,r.begin=$.index,r.string=$.input,r.pre_match=$.input.slice(0,$.index),r.post_match=$.input.slice($.index+$[0].length),r.matches=[];for(var i=0,a=$.length;i<a;i++){var o=$[i];o==null?r.matches.push(E):r.matches.push(o)}},-3),J(c,"$match",function(s){var $=this,t=E;return v(t=$["$[]"](s))?t:v(s["$is_a?"](q("Integer")))&&v(k(s,$.$length()))?W.$raise(u("IndexError"),"index "+s+" out of matches"):E}),J(c,"$match_length",function(s){var $,t=this;return $=t.$match(s),$===E||$==null?E:$.$length()}),J(c,"$[]",function(s){var $,t,e=this;return $=$e(arguments),t=$,t[0].$$is_string?(e.$regexp().$names()["$include?"](t["$[]"](0))["$!"]()&&W.$raise(u("IndexError"),"undefined group name reference: "+t["$[]"](0)),e.$named_captures()["$[]"](t["$[]"](0))):H(e.matches,"[]",F(t))},-1),J(c,"$offset",function(s){var $=this;return s!==0&&W.$raise(u("ArgumentError"),"MatchData#offset only supports 0th element"),[$.begin,$.begin+$.matches[s].length]}),J(c,"$==",function(s){var $=this,t=E,e=E,r=E,i=E;return p(u("MatchData"),s)?v(t=v(e=v(r=v(i=$.string==s.string)?$.regexp.toString()==s.regexp.toString():i)?$.pre_match==s.pre_match:r)?$.post_match==s.post_match:e)?$.begin==s.begin:t:!1}),J(c,"$begin",function(s){var $=this;return s!==0&&W.$raise(u("ArgumentError"),"MatchData#begin only supports 0th element"),$.begin}),J(c,"$end",function(s){var $=this;return s!==0&&W.$raise(u("ArgumentError"),"MatchData#end only supports 0th element"),$.begin+$.matches[s].length}),J(c,"$captures",function(){var s=this;return s.matches.slice(1)}),J(c,"$named_captures",function(){var s=this,$=E;return $=s.$captures(),H(s.$regexp().$named_captures(),"transform_values",[],function(e){return e==null&&(e=E),$["$[]"](A(e.$last(),1))})}),J(c,"$names",function(){var s=this;return s.$regexp().$names()}),J(c,"$inspect",function(){var s=this,$="#<MatchData "+s.matches[0].$inspect();if(s.$regexp().$names()["$empty?"]())for(var t=1,e=s.matches.length;t<e;t++)$+=" "+t+":"+s.matches[t].$inspect();else H(s.$named_captures(),"each",[],function(i,a){return i==null&&(i=E),a==null&&(a=E),$+=" "+i+":"+a.$inspect()});return $+">"}),J(c,"$length",function(){var s=this;return s.matches.length}),J(c,"$to_a",P("matches")),J(c,"$to_s",function(){var s=this;return s.matches[0]}),J(c,"$values_at",function(s){var $,t,e=this;$=$e(arguments),t=$;var r,i,a,o=[];for(r=0;r<t.length;r++){if(t[r].$$is_range&&(i=t[r].$to_a(),i.unshift(r,1),Array.prototype.splice.apply(t,i)),a=Y["$coerce_to!"](t[r],u("Integer"),"to_int"),a<0&&(a+=e.matches.length,a<0)){o.push(E);continue}o.push(e.matches[a])}return o},-1),O(c,"eql?","=="),O(c,"size","length")}(S[0],null,S)};Opal.modules["corelib/string"]=function(n){var z=n.coerce_to,w=n.respond_to,D=n.global_multiline_regexp,x=n.prop,ee=n.opal32_init,Z=n.opal32_add,M=n.klass,J=n.send2,v=n.find_super,L=n.def,$e=n.Opal,W=n.defs,Y=n.slice,O=n.send,H=n.to_a,b=n.extract_kwargs,h=n.ensure_kwargs,I=n.hash_get,j=n.eqeqeq,k=n.Kernel,F=n.truthy,p=n.gvars,A=n.rb_divide,P=n.rb_plus,S=n.eqeq,E=n.alias,u=n.const_set,d=n.top,N=[],g=n.$r(N),c=n.nil,l=n.$$$;return n.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),d.$require("corelib/comparable"),d.$require("corelib/regexp"),function(q,G,_){var s=M(q,G,"String"),$=[s].concat(_),t=n.$r($);s.$include(l("Comparable")),n.prop(s.$$prototype,"$$is_string",!0);var e=new Map;(function(){L(s,"$__id__",function i(){var a=i.$$p||c,o=this;if(i.$$p=null,typeof o=="object")return J(o,v(o,"__id__",i,!1,!0),"__id__",[],a);if(e.has(o))return e.get(o);var m=n.uid();return e.set(o,m),m}),L(s,"$hash",function(){var a=this,o=ee(),m,T=a.length;for(o=Z(o,5),o=Z(o,T),m=0;m<T;m++)o=Z(o,a.charCodeAt(m));return o})})(),W(s,"$try_convert",function(a){return $e["$coerce_to?"](a,l("String"),"to_str")}),W(s,"$new",function(a){var o,m,T=this;o=Y(arguments),m=o;var K=m[0]||"",C=m[m.length-1];return K=z(K,l("String"),"to_str"),C&&C.$$is_hash&&C.has("encoding")&&(K=K.$force_encoding(C.get("encoding").value)),K=new T.$$constructor(K),K.$initialize.$$pristine||O(K,"initialize",H(m)),K},-1),L(s,"$initialize",function(a,o){var m,T;return m=Y(arguments),T=b(m),T=h(T),m.length>0&&m.shift(),I(T,"encoding"),I(T,"capacity"),c},-1),L(s,"$%",function(a){var o=this;return j(l("Array"),a)?O(o,"format",[o].concat(H(a))):o.$format(o,a)}),L(s,"$*",function(a){var o=this;if(a=z(a,l("Integer"),"to_int"),a<0&&k.$raise(l("ArgumentError"),"negative argument"),a===0)return"";var m="",T=o.toString();for(T.length*a>=1<<28&&k.$raise(l("RangeError"),"multiply count must not overflow maximum string size");(a&1)===1&&(m+=T),a>>>=1,a!==0;)T+=T;return m}),L(s,"$+",function(a){var o=this;if(a=z(a,l("String"),"to_str"),a==""&&o.$$class===n.String)return o;if(o==""&&a.$$class===n.String)return a;var m=o+a;return o.encoding===m.encoding&&a.encoding===m.encoding||o.encoding.name==="UTF-8"||a.encoding.name==="UTF-8"?m:n.enc(m,o.encoding)}),L(s,"$<=>",function(a){var o=this;if(F(a["$respond_to?"]("to_str")))return a=a.$to_str().$to_s(),o>a?1:o<a?-1:0;var m=a["$<=>"](o);return m===c?c:m>0?-1:m<0?1:0}),L(s,"$==",function(a){var o=this;return a.$$is_string?o.toString()===a.toString():w(a,"$to_str")?a["$=="](o):!1}),L(s,"$=~",function(a){var o=this;return a.$$is_string&&k.$raise(l("TypeError"),"type mismatch: String given"),a["$=~"](o)}),L(s,"$[]",function(a,o){var m=this,T=m.length,K,C;if(a.$$is_range)return K=a.excl,C=a,o=a.end===c?-1:z(a.end,l("Integer"),"to_int"),a=a.begin===c?0:z(a.begin,l("Integer"),"to_int"),Math.abs(a)>T?c:(a<0&&(a+=T),o<0&&(o+=T),(!K||C.end===c)&&(o+=1),o=o-a,o<0&&(o=0),m.substr(a,o));if(a.$$is_string)return o!=null&&k.$raise(l("TypeError")),m.indexOf(a)!==-1?a:c;if(a.$$is_regexp){var V=m.match(a);return V===null?(p["~"]=c,c):(p["~"]=l("MatchData").$new(a,V),o==null?V[0]:(o=z(o,l("Integer"),"to_int"),o<0&&-o<V.length?V[o+=V.length]:o>=0&&o<V.length?V[o]:c))}return a=z(a,l("Integer"),"to_int"),a<0&&(a+=T),o==null?a>=T||a<0?c:m.substr(a,1):(o=z(o,l("Integer"),"to_int"),o<0||a>T||a<0?c:m.substr(a,o))},-2),L(s,"$b",function(){var a=this;return new String(a).$force_encoding("binary")}),L(s,"$capitalize",function(){var a=this;return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}),L(s,"$casecmp",function(a){var o=this;if(!F(a["$respond_to?"]("to_str")))return c;a=z(a,l("String"),"to_str").$to_s();var m=/^[\x00-\x7F]*$/;return m.test(o)&&m.test(a)&&(o=o.toLowerCase(),a=a.toLowerCase()),o["$<=>"](a)}),L(s,"$casecmp?",function(a){var o=this,m=o.$casecmp(a);return m===c?c:m===0}),L(s,"$center",function(a,o){var m=this;if(o==null&&(o=" "),a=z(a,l("Integer"),"to_int"),o=z(o,l("String"),"to_str").$to_s(),F(o["$empty?"]())&&k.$raise(l("ArgumentError"),"zero width padding"),F(a<=m.length))return m;var T=m.$ljust(A(P(a,m.length),2).$ceil(),o),K=m.$rjust(A(P(a,m.length),2).$floor(),o);return K+T.slice(m.length)},-2),L(s,"$chomp",function(a){var o=this;if(p["/"]==null&&(p["/"]=c),a==null&&(a=p["/"]),F(a===c||o.length===0))return o;a=$e["$coerce_to!"](a,l("String"),"to_str").$to_s();var m;if(a===`
`)m=o.replace(/\r?\n?$/,"");else if(a==="")m=o.replace(/(\r?\n)+$/,"");else if(o.length>=a.length){var T=o.substr(o.length-a.length,a.length);T===a&&(m=o.substr(0,o.length-a.length))}return m??o},-1),L(s,"$chop",function(){var a=this,o=a.length,m;return o<=1?m="":a.charAt(o-1)===`
`&&a.charAt(o-2)==="\r"?m=a.substr(0,o-2):m=a.substr(0,o-1),m}),L(s,"$chr",function(){var a=this;return a.charAt(0)}),L(s,"$clone",function(a){var o,m=this,T=c;return a=h(a),o=I(a,"freeze"),o==null&&(o=c),F(o["$nil?"]())||S(o,!0)||S(o,!1)||m.$raise(t("ArgumentError"),"unexpected value for freeze: "+o.$class()),T=new String(m),T.$copy_singleton_methods(m),T.$initialize_clone(m,new Map([["freeze",o]])),S(o,!0)?T.$$frozen||(T.$$frozen=!0):F(o["$nil?"]())&&m.$$frozen&&(T.$$frozen=!0),T},-1),L(s,"$dup",function(){var a=this,o=c;return o=new String(a),o.$initialize_dup(a),o}),L(s,"$count",function(a){var o,m,T=this;o=Y(arguments),m=o,m.length===0&&k.$raise(l("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var K=r(m);return K===null?0:T.length-T.replace(new RegExp(K,"g"),"").length},-1),L(s,"$delete",function(a){var o,m,T=this;o=Y(arguments),m=o,m.length===0&&k.$raise(l("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var K=r(m);return K===null?T:T.replace(new RegExp(K,"g"),"")},-1),L(s,"$delete_prefix",function(a){var o=this;return a.$$is_string||(a=z(a,l("String"),"to_str")),o.slice(0,a.length)===a?o.slice(a.length):o}),L(s,"$delete_suffix",function(a){var o=this;return a.$$is_string||(a=z(a,l("String"),"to_str")),o.slice(o.length-a.length)===a?o.slice(0,o.length-a.length):o}),L(s,"$downcase",function(){var a=this;return a.toLowerCase()}),L(s,"$each_line",function i(a,o){var m=i.$$p||c,T,K,C,V,re=this;if(p["/"]==null&&(p["/"]=c),i.$$p=null,T=Y(arguments),K=b(T),K=h(K),T.length>0&&(C=T.shift()),C==null&&(C=p["/"]),V=I(K,"chomp"),V==null&&(V=!1),m===c)return re.$enum_for("each_line",C,new Map([["chomp",V]]));if(C===c)return n.yield1(m,re),re;C=z(C,l("String"),"to_str");var ae,le,_e,de,ge,ve,me,be;if(C.length===0){for(ae=re.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,_e=ae.length;le<_e;le+=2)(ae[le]||ae[le+1])&&(be=(ae[le]||"")+(ae[le+1]||""),V&&(be=be.$chomp(`
`)),n.yield1(m,be));return re}for(ge=re.$chomp(C),ve=re.length!=ge.length,me=ge.split(C),le=0,de=me.length;le<de;le++)be=me[le],(le<de-1||ve)&&(be+=C),V&&(be=be.$chomp(C)),n.yield1(m,be);return re},-1),L(s,"$empty?",function(){var a=this;return a.length===0}),L(s,"$end_with?",function(a){var o,m,T=this;o=Y(arguments),m=o;for(var K=0,C=m.length;K<C;K++){var V=z(m[K],l("String"),"to_str").$to_s();if(T.length>=V.length&&T.substr(T.length-V.length,V.length)==V)return!0}return!1},-1),L(s,"$gsub",function i(a,o){var m=i.$$p||c,T=this;if(i.$$p=null,o===void 0&&m===c)return T.$enum_for("gsub",a);var K="",C=c,V=0,re,ae;a.$$is_regexp?a=D(a):(a=z(a,l("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(re=a.exec(T),re===null){p["~"]=c,K+=T.slice(V);break}C=l("MatchData").$new(a,re),o===void 0?(le=a.lastIndex,ae=m(re[0]),a.lastIndex=le):o.$$is_hash?ae=o["$[]"](re[0]).$to_s():(o.$$is_string||(o=z(o,l("String"),"to_str")),ae=o.replace(/([\\]+)([0-9+&`'])/g,function(_e,de,ge){if(de.length%2===0)return _e;switch(ge){case"+":for(var ve=re.length-1;ve>0;ve--)if(re[ve]!==void 0)return de.slice(1)+re[ve];return"";case"&":return de.slice(1)+re[0];case"`":return de.slice(1)+T.slice(0,re.index);case"'":return de.slice(1)+T.slice(re.index+re[0].length);default:return de.slice(1)+(re[ge]||"")}}).replace(/\\\\/g,"\\")),a.lastIndex===re.index?(K+=T.slice(V,re.index)+ae+(T[re.index]||""),a.lastIndex+=1):K+=T.slice(V,re.index)+ae,V=a.lastIndex}return p["~"]=C,K},-2),L(s,"$hex",function(){var a=this;return a.$to_i(16)}),L(s,"$include?",function(a){var o=this;return a.$$is_string||(a=z(a,l("String"),"to_str")),o.indexOf(a)!==-1}),L(s,"$index",function(a,o){var m=this,T,K,C;if(o===void 0)o=0;else if(o=z(o,l("Integer"),"to_int"),o<0&&(o+=m.length,o<0))return c;if(a.$$is_regexp)for(C=D(a);;){if(K=C.exec(m),K===null){p["~"]=c,T=-1;break}if(K.index>=o){p["~"]=l("MatchData").$new(C,K),T=K.index;break}C.lastIndex=K.index+1}else a=z(a,l("String"),"to_str"),a.length===0&&o>m.length?T=-1:T=m.indexOf(a,o);return T===-1?c:T},-2),L(s,"$inspect",function(){var a=this,o=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,m={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},T=a.replace(o,function(K){return m[K]?m[K]:(K=K.charCodeAt(0),K<=255&&(a.encoding["$binary?"]()||a.internal_encoding["$binary?"]())?"\\x"+("00"+K.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+K.toString(16).toUpperCase()).slice(-4))});return'"'+T.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),L(s,"$intern",function(){var a=this;return a.toString()}),L(s,"$length",function(){var a=this;return a.length}),E(s,"size","length"),L(s,"$lines",function i(a,o){var m=i.$$p||c,T,K,C,V,re=this,ae=c;return p["/"]==null&&(p["/"]=c),i.$$p=null,T=Y(arguments),K=b(T),K=h(K),T.length>0&&(C=T.shift()),C==null&&(C=p["/"]),V=I(K,"chomp"),V==null&&(V=!1),ae=O(re,"each_line",[C,new Map([["chomp",V]])],m.$to_proc()),F(m)?re:ae.$to_a()},-1),L(s,"$ljust",function(a,o){var m=this;if(o==null&&(o=" "),a=z(a,l("Integer"),"to_int"),o=z(o,l("String"),"to_str").$to_s(),F(o["$empty?"]())&&k.$raise(l("ArgumentError"),"zero width padding"),F(a<=m.length))return m;var T=-1,K="";for(a-=m.length;++T<a;)K+=o;return m+K.slice(0,a)},-2),L(s,"$lstrip",function(){var a=this;return a.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),L(s,"$ascii_only?",function(){var a=this;return a.encoding.ascii?/^[\x00-\x7F]*$/.test(a):!1}),L(s,"$match",function i(a,o){var m=i.$$p||c,T=this;return i.$$p=null,(j(t("String"),a)||F(a["$respond_to?"]("to_str")))&&(a=l("Regexp").$new(a.$to_str())),j(l("Regexp"),a)||k.$raise(l("TypeError"),"wrong argument type "+a.$class()+" (expected Regexp)"),O(a,"match",[T,o],m.$to_proc())},-2),L(s,"$match?",function(a,o){var m=this;return(j(t("String"),a)||F(a["$respond_to?"]("to_str")))&&(a=l("Regexp").$new(a.$to_str())),j(l("Regexp"),a)||k.$raise(l("TypeError"),"wrong argument type "+a.$class()+" (expected Regexp)"),a["$match?"](m,o)},-2),L(s,"$next",function(){var a=this,o=a.length;if(o===0)return"";for(var m=a,T=a.search(/[a-zA-Z0-9]/),K=!1,C;o--;){if(C=a.charCodeAt(o),C>=48&&C<=57||C>=65&&C<=90||C>=97&&C<=122)switch(C){case 57:K=!0,C=48;break;case 90:K=!0,C=65;break;case 122:K=!0,C=97;break;default:K=!1,C+=1}else T===-1?C===255?(K=!0,C=0):(K=!1,C+=1):K=!0;if(m=m.slice(0,o)+String.fromCharCode(C)+m.slice(o+1),K&&(o===0||o===T)){switch(C){case 65:break;case 97:break;default:C+=1}o===0?m=String.fromCharCode(C)+m:m=m.slice(0,o)+String.fromCharCode(C)+m.slice(o),K=!1}if(!K)break}return m}),L(s,"$oct",function(){var a=this,o,m=a,T=8;return/^\s*_/.test(m)?0:(m=m.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(K,C,V,re){switch(re.charAt(0)){case"+":case"-":return K;case"0":if(re.charAt(1)==="x"&&V==="0x")return K}switch(V){case"0b":T=2;break;case"0":case"0o":T=8;break;case"0d":T=10;break;case"0x":T=16;break}return C+re}),o=parseInt(m.replace(/_(?!_)/g,""),T),isNaN(o)?0:o)}),L(s,"$ord",function(){var a=this;return typeof a.codePointAt=="function"?a.codePointAt(0):a.charCodeAt(0)}),L(s,"$partition",function(a){var o=this,m,T;return a.$$is_regexp?(T=a.exec(o),T===null?m=-1:(l("MatchData").$new(a,T),a=T[0],m=T.index)):(a=z(a,l("String"),"to_str"),m=o.indexOf(a)),m===-1?[o,"",""]:[o.slice(0,m),o.slice(m,m+a.length),o.slice(m+a.length)]}),L(s,"$reverse",function(){var a=this;return a.split("").reverse().join("")}),L(s,"$rindex",function(a,o){var m=this,T,K,C,V;if(o===void 0)o=m.length;else if(o=z(o,l("Integer"),"to_int"),o<0&&(o+=m.length,o<0))return c;if(a.$$is_regexp){for(K=null,C=D(a);V=C.exec(m),!(V===null||V.index>o);)K=V,C.lastIndex=K.index+1;K===null?(p["~"]=c,T=-1):(l("MatchData").$new(C,K),T=K.index)}else a=z(a,l("String"),"to_str"),T=m.lastIndexOf(a,o);return T===-1?c:T},-2),L(s,"$rjust",function(a,o){var m=this;if(o==null&&(o=" "),a=z(a,l("Integer"),"to_int"),o=z(o,l("String"),"to_str").$to_s(),F(o["$empty?"]())&&k.$raise(l("ArgumentError"),"zero width padding"),F(a<=m.length))return m;var T=Math.floor(a-m.length),K=Math.floor(T/o.length),C=Array(K+1).join(o),V=T-C.length;return C+o.slice(0,V)+m},-2),L(s,"$rpartition",function(a){var o=this,m,T,K,C;if(a.$$is_regexp){for(T=null,K=D(a);C=K.exec(o),C!==null;)T=C,K.lastIndex=T.index+1;T===null?m=-1:(l("MatchData").$new(K,T),a=T[0],m=T.index)}else a=z(a,l("String"),"to_str"),m=o.lastIndexOf(a);return m===-1?["","",o]:[o.slice(0,m),o.slice(m,m+a.length),o.slice(m+a.length)]}),L(s,"$rstrip",function(){var a=this;return a.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),L(s,"$scan",function i(a,o){var m=i.$$p||c,T,K=this;i.$$p=null,o=h(o),T=I(o,"no_matchdata"),T==null&&(T=!1);var C=[],V=c,re;for(a.$$is_regexp?a=D(a):(a=z(a,l("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(re=a.exec(K))!=null;)V=l("MatchData").$new(a,re,new Map([["no_matchdata",T]])),m===c?re.length==1?C.push(re[0]):C.push(V.$captures()):re.length==1?n.yield1(m,re[0]):n.yield1(m,V.$captures()),a.lastIndex===re.index&&(a.lastIndex+=1);return T||(p["~"]=V),m!==c?K:C},-2),L(s,"$singleton_class",function(){var a=this;return n.get_singleton_class(a)}),L(s,"$split",function(a,o){var m=this,T=c;if(p[";"]==null&&(p[";"]=c),m.length===0)return[];if(o===void 0)o=0;else if(o=$e["$coerce_to!"](o,l("Integer"),"to_int"),o===1)return[m];(a===void 0||a===c)&&(a=F(T=p[";"])?T:" ");var K=[],C=m.toString(),V=0,re,ae=0,le=0,_e,de;if(a.$$is_regexp?a=D(a):(a=z(a,l("String"),"to_str").$to_s(),a===" "&&(a=/\s+/gm,C=C.replace(/^\s+/,""))),K=C.split(a),K.length===1&&K[0]===C)return[K[0]];for(;(_e=K.indexOf(void 0))!==-1;)K.splice(_e,1);if(o===0){for(;K[K.length-1]==="";)K.pop();return K}if(a.$$is_regexp||(a=n.escape_regexp(a),a=new RegExp(a,"gm")),re=a.exec(C),o<0){if(re!==null&&re[0]===""&&a.source.indexOf("(?=")===-1)for(_e=0,de=re.length;_e<de;_e++)K.push("");return K}if(re!==null&&re[0]==="")return le=(re.length-1)*(o-1)+o,K.splice(le-1,K.length-1,K.slice(le-1).join("")),K;if(o>=K.length)return K;for(;re!==null&&(ae++,V=a.lastIndex,le+=re.length,ae+1!==o);)re=a.exec(C);return K.splice(le,K.length-1,C.slice(V)),K},-1),L(s,"$squeeze",function(a){var o,m,T=this;if(o=Y(arguments),m=o,m.length===0)return T.replace(/(.)\1+/g,"$1");var K=r(m);return K===null?T:T.replace(new RegExp("("+K+")\\1+","g"),"$1")},-1),L(s,"$start_with?",function(a){var o,m,T=this;o=Y(arguments),m=o;for(var K=0,C=m.length;K<C;K++)if(m[K].$$is_regexp){var V=m[K],re=V.exec(T);if(re!=null&&re.index===0)return p["~"]=l("MatchData").$new(V,re),!0;p["~"]=c}else{var ae=z(m[K],l("String"),"to_str").$to_s();if(T.length>=ae.length&&T.startsWith(ae))return!0}return!1},-1),L(s,"$strip",function(){var a=this;return a.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),L(s,"$sub",function i(a,o){var m=i.$$p||c,T=this;i.$$p=null,a.$$is_regexp||(a=z(a,l("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var K,C=a.exec(T);return C===null?(p["~"]=c,K=T.toString()):(l("MatchData").$new(a,C),o===void 0?(m===c&&k.$raise(l("ArgumentError"),"wrong number of arguments (1 for 2)"),K=T.slice(0,C.index)+m(C[0])+T.slice(C.index+C[0].length)):o.$$is_hash?K=T.slice(0,C.index)+o["$[]"](C[0]).$to_s()+T.slice(C.index+C[0].length):(o=z(o,l("String"),"to_str"),o=o.replace(/([\\]+)([0-9+&`'])/g,function(V,re,ae){if(re.length%2===0)return V;switch(ae){case"+":for(var le=C.length-1;le>0;le--)if(C[le]!==void 0)return re.slice(1)+C[le];return"";case"&":return re.slice(1)+C[0];case"`":return re.slice(1)+T.slice(0,C.index);case"'":return re.slice(1)+T.slice(C.index+C[0].length);default:return re.slice(1)+(C[ae]||"")}}).replace(/\\\\/g,"\\"),K=T.slice(0,C.index)+o+T.slice(C.index+C[0].length))),K},-2),L(s,"$sum",function(a){var o=this;a==null&&(a=16),a=z(a,l("Integer"),"to_int");for(var m=0,T=o.length,K=0;K<T;K++)m+=o.charCodeAt(K);return a<=0?m:m&Math.pow(2,a)-1},-1),L(s,"$swapcase",function(){var a=this,o=a.replace(/([a-z]+)|([A-Z]+)/g,function(m,T,K){return T?m.toUpperCase():m.toLowerCase()});return o}),L(s,"$to_f",function(){var a=this;if(a.charAt(0)==="_")return 0;var o=parseFloat(a.replace(/_/g,""));return isNaN(o)||o==1/0||o==-1/0?0:o}),L(s,"$to_i",function(a){var o=this;a==null&&(a=10);var m,T=o.toLowerCase(),K=z(a,l("Integer"),"to_int");return(K===1||K<0||K>36)&&k.$raise(l("ArgumentError"),"invalid radix "+K),/^\s*_/.test(T)?0:(T=T.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(C,V,re,ae){switch(ae.charAt(0)){case"+":case"-":return C;case"0":if(ae.charAt(1)==="x"&&re==="0x"&&(K===0||K===16))return C}switch(re){case"0b":if(K===0||K===2)return K=2,V+ae;break;case"0":case"0o":if(K===0||K===8)return K=8,V+ae;break;case"0d":if(K===0||K===10)return K=10,V+ae;break;case"0x":if(K===0||K===16)return K=16,V+ae;break}return C}),m=parseInt(T.replace(/_(?!_)/g,""),K),isNaN(m)?0:m)},-1),L(s,"$to_proc",function i(){i.$$p;var a=this,o=c,m=c,T=c;return i.$$p=null,o=a.valueOf(),m=n.jsid(o),T=O(k,"proc",[],function K(C){var V=K.$$p||c,re,ae;K.$$p=null,re=Y(arguments),ae=re,ae.length===0&&k.$raise(l("ArgumentError"),"no receiver given");var le=ae[0];le==null&&(le=c);var _e=le[m];return _e?ae=ae.slice(1):(_e=le.$method_missing,ae[0]=o),typeof V=="function"&&(_e.$$p=V),ae.length===0?_e.call(le):_e.apply(le,ae)},-1),T.$$source_location=c,T}),L(s,"$to_s",function(){var a=this;return a.toString()}),L(s,"$tr",function(a,o){var m=this;if(a=z(a,l("String"),"to_str").$to_s(),o=z(o,l("String"),"to_str").$to_s(),a.length==0||a===o)return m;var T,K,C,V,re,ae,le,_e={},de=a.split(""),ge=de.length,ve=o.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],ge-=1);var R=[],B=null;for(K=!1,T=0;T<ge;T++)if(V=de[T],B==null)B=V,R.push(V);else if(V==="-")B==="-"?(R.push("-"),R.push("-")):T==ge-1?R.push("-"):K=!0;else if(K){for(re=B.charCodeAt(0),ae=V.charCodeAt(0),re>ae&&k.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),C=re+1;C<ae;C++)R.push(String.fromCharCode(C));R.push(V),K=null,B=null}else R.push(V);if(de=R,ge=de.length,be)for(T=0;T<ge;T++)_e[de[T]]=!0;else{if(me>0){var X=[],Q=null;for(K=!1,T=0;T<me;T++)if(V=ve[T],Q==null)Q=V,X.push(V);else if(V==="-")Q==="-"?(X.push("-"),X.push("-")):T==me-1?X.push("-"):K=!0;else if(K){for(re=Q.charCodeAt(0),ae=V.charCodeAt(0),re>ae&&k.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),C=re+1;C<ae;C++)X.push(String.fromCharCode(C));X.push(V),K=null,Q=null}else X.push(V);ve=X,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(T=0;T<ne;T++)ve.push(se)}for(T=0;T<ge;T++)_e[de[T]]=ve[T]}var oe="";for(T=0,le=m.length;T<le;T++){V=m.charAt(T);var fe=_e[V];be?oe+=fe==null?ie:V:oe+=fe??V}return oe}),L(s,"$tr_s",function(a,o){var m=this;if(a=z(a,l("String"),"to_str").$to_s(),o=z(o,l("String"),"to_str").$to_s(),a.length==0)return m;var T,K,C,V,re,ae,le,_e={},de=a.split(""),ge=de.length,ve=o.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],ge-=1);var R=[],B=null;for(K=!1,T=0;T<ge;T++)if(V=de[T],B==null)B=V,R.push(V);else if(V==="-")B==="-"?(R.push("-"),R.push("-")):T==ge-1?R.push("-"):K=!0;else if(K){for(re=B.charCodeAt(0),ae=V.charCodeAt(0),re>ae&&k.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),C=re+1;C<ae;C++)R.push(String.fromCharCode(C));R.push(V),K=null,B=null}else R.push(V);if(de=R,ge=de.length,be)for(T=0;T<ge;T++)_e[de[T]]=!0;else{if(me>0){var X=[],Q=null;for(K=!1,T=0;T<me;T++)if(V=ve[T],B==null)B=V,X.push(V);else if(V==="-")Q==="-"?(X.push("-"),X.push("-")):T==me-1?X.push("-"):K=!0;else if(K){for(re=B.charCodeAt(0),ae=V.charCodeAt(0),re>ae&&k.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),C=re+1;C<ae;C++)X.push(String.fromCharCode(C));X.push(V),K=null,B=null}else X.push(V);ve=X,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(T=0;T<ne;T++)ve.push(se)}for(T=0;T<ge;T++)_e[de[T]]=ve[T]}var oe="",fe=null;for(T=0,le=m.length;T<le;T++){V=m.charAt(T);var f=_e[V];be?f==null?fe==null&&(oe+=ie,fe=!0):(oe+=V,fe=null):f!=null?(fe==null||fe!==f)&&(oe+=f,fe=f):(oe+=V,fe=null)}return oe}),L(s,"$upcase",function(){var a=this;return a.toUpperCase()}),L(s,"$upto",function i(a,o){var m=i.$$p||c,T=this;if(i.$$p=null,o==null&&(o=!1),m===c)return T.$enum_for("upto",a,o);var K,C,V=T.toString();if(a=z(a,l("String"),"to_str"),V.length===1&&a.length===1)for(K=V.charCodeAt(0),C=a.charCodeAt(0);K<=C&&!(o&&K===C);)m(String.fromCharCode(K)),K+=1;else if(parseInt(V,10).toString()===V&&parseInt(a,10).toString()===a)for(K=parseInt(V,10),C=parseInt(a,10);K<=C&&!(o&&K===C);)m(K.toString()),K+=1;else for(;V.length<=a.length&&V<=a&&!(o&&V===a);)m(V),V=V.$succ();return T},-2);function r(i){function a(_e){var de="",ge,ve=_e.length,me,be,ie,R,B;for(ge=0;ge<ve;ge++)if(me=_e.charAt(ge),me==="-"&&ge>0&&ge<ve-1&&!be){for(ie=_e.charCodeAt(ge-1),R=_e.charCodeAt(ge+1),ie>R&&k.$raise(l("ArgumentError"),'invalid range "'+ie+"-"+R+'" in string transliteration'),B=ie+1;B<R+1;B++)de+=String.fromCharCode(B);be=!0,ge++}else be=me==="\\",de+=me;return de}function o(_e,de){if(_e.length===0)return de;var ge="",ve,me=_e.length,be;for(ve=0;ve<me;ve++)be=_e.charAt(ve),de.indexOf(be)!==-1&&(ge+=be);return ge}var m,T,K,C,V,re,ae="",le="";for(m=0,T=i.length;m<T;m++)K=z(i[m],l("String"),"to_str"),C=K.charAt(0)==="^"&&K.length>1,K=a(C?K.slice(1):K),C?le=o(le,K):ae=o(ae,K);if(ae.length>0&&le.length>0){for(re="",m=0,T=ae.length;m<T;m++)V=ae.charAt(m),le.indexOf(V)===-1&&(re+=V);ae=re,le=""}return ae.length>0?"["+l("Regexp").$escape(ae)+"]":le.length>0?"[^"+l("Regexp").$escape(le)+"]":null}return L(s,"$instance_variables",function(){return[]}),W(s,"$_load",function(a){var o,m,T=this;return o=Y(arguments),m=o,O(T,"new",H(m))},-1),L(s,"$unicode_normalize",function(a){var o=this;return a==null&&(a="nfc"),F(["nfc","nfd","nfkc","nfkd"]["$include?"](a))||k.$raise(l("ArgumentError"),"Invalid normalization form "+a),o.normalize(a.$upcase())},-1),L(s,"$unicode_normalized?",function(a){var o=this;return a==null&&(a="nfc"),o.$unicode_normalize(a)["$=="](o)},-1),L(s,"$unpack",function(a){return k.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),L(s,"$unpack1",function(a){return k.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),L(s,"$freeze",function(){var a=this;return typeof a=="string"||x(a,"$$frozen",!0),a}),L(s,"$-@",function(){var a=this;return typeof a=="string"||a.$$frozen?a:a.encoding.name=="UTF-8"&&a.internal_encoding.name=="UTF-8"?a.toString():a.$dup().$freeze()}),L(s,"$frozen?",function(){var a=this;return typeof a=="string"||a.$$frozen===!0}),E(s,"+@","dup"),E(s,"===","=="),E(s,"byteslice","[]"),E(s,"eql?","=="),E(s,"equal?","==="),E(s,"object_id","__id__"),E(s,"slice","[]"),E(s,"succ","next"),E(s,"to_str","to_s"),E(s,"to_sym","intern"),$e.$pristine(s,"initialize")}("::",String,N),u(N[0],"Symbol",g("String"))};Opal.modules["corelib/enumerable"]=function(n){var z=n.truthy,w=n.coerce_to,D=n.yield1,x=n.yieldX,ee=n.deny_frozen_access,Z=n.module,M=n.send,J=n.slice,v=n.to_a,L=n.Opal,$e=n.thrower,W=n.def,Y=n.Kernel,O=n.return_val,H=n.rb_gt,b=n.rb_times,h=n.rb_lt,I=n.eqeq,j=n.rb_plus,k=n.rb_minus,F=n.rb_divide,p=n.rb_le,A=n.lambda,P=n.not,S=n.alias,E=[],u=n.nil,d=n.$$$;return n.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(N,g){var c=Z(N,"Enumerable"),l=[c].concat(g),q=n.$r(l);function G(_){return _.length===0&&(_=[u]),_.length>1&&(_=[_]),_}return W(c,"$all?",function _(s){try{var $=$e("return"),t=_.$$p||u,e=this;return _.$$p=null,z(s!==void 0)?M(e,"each",[],function r(i){var a,o,m=u;if(a=J(arguments),o=a,m=G(o),z(M(s,"public_send",["==="].concat(v(m)))))return u;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):t!==u?M(e,"each",[],function r(i){var a,o;if(a=J(arguments),o=a,z(n.yieldX(t,v(o))))return u;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):M(e,"each",[],function r(i){var a,o;if(a=J(arguments),o=a,z(L.$destructure(o)))return u;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),W(c,"$any?",function _(s){try{var $=$e("return"),t=_.$$p||u,e=this;return _.$$p=null,z(s!==void 0)?M(e,"each",[],function r(i){var a,o,m=u;if(a=J(arguments),o=a,m=G(o),z(M(s,"public_send",["==="].concat(v(m)))))$.$throw(!0,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):t!==u?M(e,"each",[],function r(i){var a,o;if(a=J(arguments),o=a,z(n.yieldX(t,v(o))))$.$throw(!0,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):M(e,"each",[],function r(i){var a,o;if(a=J(arguments),o=a,z(L.$destructure(o)))$.$throw(!0,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),!1}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),W(c,"$chunk",function _(){var s=_.$$p||u,$=this;return _.$$p=null,s===u?M($,"to_enum",["chunk"],function t(){var e=t.$$s==null?this:t.$$s;return e.$enumerator_size()},{$$s:$}):M(d("Enumerator"),"new",[],function t(e){var r=t.$$s==null?this:t.$$s;e==null&&(e=u);var i=u,a=[];function o(){a.length>0&&e.$yield(i,a)}r.$each.$$p=function(m){var T=D(s,m);T===u?(o(),a=[],i=u):(i===u||i===T?a.push(m):(o(),a=[m]),i=T)},r.$each(),o()},{$$s:$})}),W(c,"$chunk_while",function _(){var s=_.$$p||u,$=this;return _.$$p=null,s===u&&Y.$raise(d("ArgumentError"),"no block given"),M($,"slice_when",[],function(e,r){return e==null&&(e=u),r==null&&(r=u),n.yieldX(s,[e,r])["$!"]()})}),W(c,"$collect",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,s===u)return M($,"enum_for",["collect"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$});var t=[];return $.$each.$$p=function(){var e=x(s,arguments);t.push(e)},$.$each(),t}),W(c,"$collect_concat",function _(){var s=_.$$p||u,$=this;return _.$$p=null,s===u?M($,"enum_for",["collect_concat"],function t(){var e=t.$$s==null?this:t.$$s;return e.$enumerator_size()},{$$s:$}):M($,"map",[],s.$to_proc()).$flatten(1)}),W(c,"$compact",function(){var s=this;return s.$to_a().$compact()}),W(c,"$count",function _(s){var $=_.$$p||u,t=this,e=u;return _.$$p=null,e=0,s!=null&&$!==u&&t.$warn("warning: given block not used"),z(s!=null)?$=M(Y,"proc",[],function(i){var a,o;return a=J(arguments),o=a,L.$destructure(o)["$=="](s)},-1):z($["$nil?"]())&&($=M(Y,"proc",[],O(!0))),M(t,"each",[],function(i){var a,o;return a=J(arguments),o=a,z(x($,o))?e++:u},-1),e},-1),W(c,"$cycle",function _(s){var $=_.$$p||u,t=this;if(_.$$p=null,s==null&&(s=u),$===u)return M(t,"enum_for",["cycle",s],function a(){var o=a.$$s==null?this:a.$$s;return z(s["$nil?"]())?z(o["$respond_to?"]("size"))?d(d("Float"),"INFINITY"):u:(s=L["$coerce_to!"](s,d("Integer"),"to_int"),z(H(s,0))?b(o.$enumerator_size(),s):0)},{$$s:t});if(!z(s["$nil?"]())&&(s=L["$coerce_to!"](s,d("Integer"),"to_int"),z(s<=0)))return u;var e=[],r,i;if(t.$each.$$p=function(){var a=L.$destructure(arguments);D($,a),e.push(a)},t.$each(),e.length===0)return u;if(s===u)for(;;)for(r=0,i=e.length;r<i;r++)D($,e[r]);else for(;s>1;){for(r=0,i=e.length;r<i;r++)D($,e[r]);s--}},-1),W(c,"$detect",function _(s){try{var $=$e("return"),t=_.$$p||u,e=this;return _.$$p=null,t===u?e.$enum_for("detect",s):(M(e,"each",[],function r(i){var a,o,m=u;if(a=J(arguments),o=a,m=L.$destructure(o),z(n.yield1(t,m)))$.$throw(m,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),s!==void 0?typeof s=="function"?s():s:u)}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),W(c,"$drop",function(s){var $=this;s=w(s,d("Integer"),"to_int"),z(s<0)&&Y.$raise(d("ArgumentError"),"attempt to drop negative size");var t=[],e=0;return $.$each.$$p=function(){s<=e&&t.push(L.$destructure(arguments)),e++},$.$each(),t}),W(c,"$drop_while",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,s===u)return $.$enum_for("drop_while");var t=[],e=!0;return $.$each.$$p=function(){var r=L.$destructure(arguments);if(e){var i=D(s,r);z(i)||(e=!1,t.push(r))}else t.push(r)},$.$each(),t}),W(c,"$each_cons",function _(s){var $=_.$$p||u,t=this;if(_.$$p=null,z(arguments.length!=1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),s=L.$try_convert(s,d("Integer"),"to_int"),z(s<=0)&&Y.$raise(d("ArgumentError"),"invalid size"),$===u)return M(t,"enum_for",["each_cons",s],function r(){var i=r.$$s==null?this:r.$$s,a=u;return a=i.$enumerator_size(),z(a["$nil?"]())?u:I(a,0)||z(h(a,s))?0:j(k(a,s),1)},{$$s:t});var e=[];return t.$each.$$p=function(){var r=L.$destructure(arguments);e.push(r),e.length>s&&e.shift(),e.length==s&&D($,e.slice(0,s))},t.$each(),t}),W(c,"$each_entry",function _(s){var $=_.$$p||u,t,e,r=this;return _.$$p=null,t=J(arguments),e=t,$===u?M(r,"to_enum",["each_entry"].concat(v(e)),function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var i=L.$destructure(arguments);D($,i)},r.$each.apply(r,e),r)},-1),W(c,"$each_slice",function _(s){var $=_.$$p||u,t=this;if(_.$$p=null,s=w(s,d("Integer"),"to_int"),z(s<=0)&&Y.$raise(d("ArgumentError"),"invalid slice size"),$===u)return M(t,"enum_for",["each_slice",s],function r(){var i=r.$$s==null?this:r.$$s;return z(i["$respond_to?"]("size"))?F(i.$size(),s).$ceil():u},{$$s:t});var e=[];return t.$each.$$p=function(){var r=L.$destructure(arguments);e.push(r),e.length===s&&(D($,e),e=[])},t.$each(),e.length>0&&D($,e),t}),W(c,"$each_with_index",function _(s){var $=_.$$p||u,t,e,r=this;if(_.$$p=null,t=J(arguments),e=t,$===u)return M(r,"enum_for",["each_with_index"].concat(v(e)),function a(){var o=a.$$s==null?this:a.$$s;return o.$enumerator_size()},{$$s:r});var i=0;return r.$each.$$p=function(){var a=L.$destructure(arguments);$(a,i),i++},r.$each.apply(r,e),r},-1),W(c,"$each_with_object",function _(s){var $=_.$$p||u,t=this;return _.$$p=null,$===u?M(t,"enum_for",["each_with_object",s],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:t}):(t.$each.$$p=function(){var e=L.$destructure(arguments);$(e,s)},t.$each(),s)}),W(c,"$entries",function(s){var $,t,e=this;$=J(arguments),t=$;var r=[];return e.$each.$$p=function(){r.push(L.$destructure(arguments))},e.$each.apply(e,t),r},-1),W(c,"$filter_map",function _(){var s=_.$$p||u,$=this;return _.$$p=null,s===u?M($,"enum_for",["filter_map"],function t(){var e=t.$$s==null?this:t.$$s;return e.$enumerator_size()},{$$s:$}):M(M($,"map",[],s.$to_proc()),"select",[],"itself".$to_proc())}),W(c,"$find_all",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,s===u)return M($,"enum_for",["find_all"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$});var t=[];return $.$each.$$p=function(){var e=L.$destructure(arguments),r=D(s,e);z(r)&&t.push(e)},$.$each(),t}),W(c,"$find_index",function _(s){try{var $=$e("return"),t=_.$$p||u,e=this,r=u;return _.$$p=null,z(s===void 0&&t===u)?e.$enum_for("find_index"):(s!=null&&t!==u&&e.$warn("warning: given block not used"),r=0,z(s!=null)?M(e,"each",[],function i(a){var o,m;return o=J(arguments),m=o,I(L.$destructure(m),s)&&$.$throw(r,i.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}):M(e,"each",[],function i(a){var o,m;return o=J(arguments),m=o,z(n.yieldX(t,v(m)))&&$.$throw(r,i.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}),u)}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),W(c,"$first",function(s){try{var $=$e("return"),t=this,e=u,r=u;return z(s===void 0)?M(t,"each",[],function i(a){a==null&&(a=u),$.$throw(a,i.$$is_lambda)},{$$ret:$}):(e=[],s=w(s,d("Integer"),"to_int"),z(s<0)&&Y.$raise(d("ArgumentError"),"attempt to take negative size"),z(s==0)?[]:(r=0,M(t,"each",[],function i(a){var o,m;if(o=J(arguments),m=o,e.push(L.$destructure(m)),z(s<=++r))$.$throw(e,i.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),e))}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),W(c,"$grep",function _(s){var $=_.$$p||u,t=this,e=u;return _.$$p=null,e=[],M(t,"each",[],function(i){var a,o,m=u;return a=J(arguments),o=a,m=G(o),z(M(s,"__send__",["==="].concat(v(m))))?($!==u?(z(H(o.$length(),1))&&(o=[o]),o=n.yieldX($,v(o))):z(p(o.$length(),1))&&(o=o["$[]"](0)),e.$push(o)):u},-1),e}),W(c,"$grep_v",function _(s){var $=_.$$p||u,t=this,e=u;return _.$$p=null,e=[],M(t,"each",[],function(i){var a,o,m=u;return a=J(arguments),o=a,m=G(o),z(M(s,"__send__",["==="].concat(v(m))))?u:($!==u?(z(H(o.$length(),1))&&(o=[o]),o=n.yieldX($,v(o))):z(p(o.$length(),1))&&(o=o["$[]"](0)),e.$push(o))},-1),e}),W(c,"$group_by",function _(){var s=_.$$p||u,$,t=this,e=u,r=u;return _.$$p=null,s===u?M(t,"enum_for",["group_by"],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:t}):(e=new Map,t.$each.$$p=function(){var i=L.$destructure(arguments),a=D(s,i);(z(r=e["$[]"](a))?r:($=[a,[]],M(e,"[]=",$),$[$.length-1]))["$<<"](i)},t.$each(),e)}),W(c,"$include?",function(s){try{var $=$e("return"),t=this;return M(t,"each",[],function e(r){var i,a;if(i=J(arguments),a=i,I(L.$destructure(a),s))$.$throw(!0,e.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),!1}catch(e){if(e===$)return e.$v;throw e}finally{$.is_orphan=!0}}),W(c,"$inject",function _(s,$){var t=_.$$p||u,e=this;_.$$p=null;var r=s;return t!==u&&$===void 0?e.$each.$$p=function(){var i=L.$destructure(arguments);if(r===void 0){r=i;return}i=x(t,[r,i]),r=i}:($===void 0&&(d("Symbol")["$==="](s)||Y.$raise(d("TypeError"),""+s.$inspect()+" is not a Symbol"),$=s,r=void 0),e.$each.$$p=function(){var i=L.$destructure(arguments);if(r===void 0){r=i;return}r=r.$__send__($,i)}),e.$each(),r??u},-1),W(c,"$lazy",function(){var s=this;return M(d(d("Enumerator"),"Lazy"),"new",[s,s.$enumerator_size()],function(t,e){var r,i;return t==null&&(t=u),r=J(arguments,1),i=r,M(t,"yield",v(i))},-2)}),W(c,"$enumerator_size",function(){var s=this;return z(s["$respond_to?"]("size"))?s.$size():u}),W(c,"$max",function _(s){var $=_.$$p||u,t=this;if(_.$$p=null,s===void 0||s===u){var e,r;return t.$each.$$p=function(){var i=L.$destructure(arguments);if(e===void 0){e=i;return}$!==u?r=x($,[i,e]):r=i["$<=>"](e),r===u&&Y.$raise(d("ArgumentError"),"comparison failed"),r>0&&(e=i)},t.$each(),e===void 0?u:e}return s=w(s,d("Integer"),"to_int"),M(t,"sort",[],$.$to_proc()).$reverse().$first(s)},-1),W(c,"$max_by",function _(s){var $=_.$$p||u,t=this;if(_.$$p=null,s==null&&(s=u),!z($))return M(t,"enum_for",["max_by",s],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:t});if(!z(s["$nil?"]()))return M(t,"sort_by",[],$.$to_proc()).$reverse().$take(s);var e,r;return t.$each.$$p=function(){var i=L.$destructure(arguments),a=D($,i);if(e===void 0){e=i,r=a;return}a["$<=>"](r)>0&&(e=i,r=a)},t.$each(),e===void 0?u:e},-1),W(c,"$min",function _(s){var $=_.$$p||u,t=this;if(_.$$p=null,s==null&&(s=u),!z(s["$nil?"]()))return $!==u?M(t,"sort",[],function(i,a){return i==null&&(i=u),a==null&&(a=u),n.yieldX($,[i,a])}).$take(s):t.$sort().$take(s);var e;return $!==u?t.$each.$$p=function(){var r=L.$destructure(arguments);if(e===void 0){e=r;return}var i=$(r,e);i===u&&Y.$raise(d("ArgumentError"),"comparison failed"),i<0&&(e=r)}:t.$each.$$p=function(){var r=L.$destructure(arguments);if(e===void 0){e=r;return}L.$compare(r,e)<0&&(e=r)},t.$each(),e===void 0?u:e},-1),W(c,"$min_by",function _(s){var $=_.$$p||u,t=this;if(_.$$p=null,s==null&&(s=u),!z($))return M(t,"enum_for",["min_by",s],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:t});if(!z(s["$nil?"]()))return M(t,"sort_by",[],$.$to_proc()).$take(s);var e,r;return t.$each.$$p=function(){var i=L.$destructure(arguments),a=D($,i);if(e===void 0){e=i,r=a;return}a["$<=>"](r)<0&&(e=i,r=a)},t.$each(),e===void 0?u:e},-1),W(c,"$minmax",function _(){var s=_.$$p||u,$=this,t=u;_.$$p=null,s=z(t=s)?t:M(Y,"proc",[],function(o,m){return o==null&&(o=u),m==null&&(m=u),o["$<=>"](m)});var e=u,r=u,i=!0;return $.$each.$$p=function(){var a=L.$destructure(arguments);if(i)e=r=a,i=!1;else{var o=s.$call(e,a);o===u?Y.$raise(d("ArgumentError"),"comparison failed"):o>0&&(e=a);var m=s.$call(r,a);m===u?Y.$raise(d("ArgumentError"),"comparison failed"):m<0&&(r=a)}},$.$each(),[e,r]}),W(c,"$minmax_by",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,!z(s))return M($,"enum_for",["minmax_by"],function a(){var o=a.$$s==null?this:a.$$s;return o.$enumerator_size()},{$$s:$});var t=u,e=u,r,i;return $.$each.$$p=function(){var a=L.$destructure(arguments),o=D(s,a);(r===void 0||o["$<=>"](r)<0)&&(t=a,r=o),(i===void 0||o["$<=>"](i)>0)&&(e=a,i=o)},$.$each(),[t,e]}),W(c,"$none?",function _(s){try{var $=$e("return"),t=_.$$p||u,e=this;return _.$$p=null,z(s!==void 0)?M(e,"each",[],function r(i){var a,o,m=u;if(a=J(arguments),o=a,m=G(o),z(M(s,"public_send",["==="].concat(v(m)))))$.$throw(!1,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):t!==u?M(e,"each",[],function r(i){var a,o;if(a=J(arguments),o=a,z(n.yieldX(t,v(o))))$.$throw(!1,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):M(e,"each",[],function r(i){var a,o,m=u;if(a=J(arguments),o=a,m=L.$destructure(o),z(m))$.$throw(!1,r.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),W(c,"$one?",function _(s){try{var $=$e("return"),t=_.$$p||u,e=this,r=u;return _.$$p=null,r=0,z(s!==void 0)?M(e,"each",[],function i(a){var o,m,T=u;if(o=J(arguments),m=o,T=G(m),z(M(s,"public_send",["==="].concat(v(T)))))if(r=j(r,1),z(H(r,1)))$.$throw(!1,i.$$is_lambda);else return u;else return u},{$$arity:-1,$$ret:$}):t!==u?M(e,"each",[],function i(a){var o,m;if(o=J(arguments),m=o,!z(n.yieldX(t,v(m))))return u;if(r=j(r,1),z(H(r,1)))$.$throw(!1,i.$$is_lambda);else return u},{$$arity:-1,$$ret:$}):M(e,"each",[],function i(a){var o,m;if(o=J(arguments),m=o,!z(L.$destructure(m)))return u;if(r=j(r,1),z(H(r,1)))$.$throw(!1,i.$$is_lambda);else return u},{$$arity:-1,$$ret:$}),r["$=="](1)}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),W(c,"$partition",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,s===u)return M($,"enum_for",["partition"],function r(){var i=r.$$s==null?this:r.$$s;return i.$enumerator_size()},{$$s:$});var t=[],e=[];return $.$each.$$p=function(){var r=L.$destructure(arguments),i=D(s,r);z(i)?t.push(r):e.push(r)},$.$each(),[t,e]}),W(c,"$reject",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,s===u)return M($,"enum_for",["reject"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$});var t=[];return $.$each.$$p=function(){var e=L.$destructure(arguments),r=D(s,e);z(r)||t.push(e)},$.$each(),t}),W(c,"$reverse_each",function _(){var s=_.$$p||u,$=this;if(_.$$p=null,s===u)return M($,"enum_for",["reverse_each"],function r(){var i=r.$$s==null?this:r.$$s;return i.$enumerator_size()},{$$s:$});var t=[];$.$each.$$p=function(){t.push(arguments)},$.$each();for(var e=t.length-1;e>=0;e--)x(s,t[e]);return t}),W(c,"$slice_before",function _(s){var $=_.$$p||u,t=this;return _.$$p=null,z(s===void 0&&$===u)&&Y.$raise(d("ArgumentError"),"both pattern and block are given"),z(s!==void 0&&$!==u||arguments.length>1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),M(d("Enumerator"),"new",[],function e(r){var i=e.$$s==null?this:e.$$s;r==null&&(r=u);var a=[];$!==u?s===void 0?i.$each.$$p=function(){var o=L.$destructure(arguments),m=D($,o);z(m)&&a.length>0&&(r["$<<"](a),a=[]),a.push(o)}:i.$each.$$p=function(){var o=L.$destructure(arguments),m=$(o,s.$dup());z(m)&&a.length>0&&(r["$<<"](a),a=[]),a.push(o)}:i.$each.$$p=function(){var o=L.$destructure(arguments),m=s["$==="](o);z(m)&&a.length>0&&(r["$<<"](a),a=[]),a.push(o)},i.$each(),a.length>0&&r["$<<"](a)},{$$s:t})},-1),W(c,"$slice_after",function _(s){var $=_.$$p||u,t=this;return _.$$p=null,z(s===void 0&&$===u)&&Y.$raise(d("ArgumentError"),"both pattern and block are given"),z(s!==void 0&&$!==u||arguments.length>1)&&Y.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),z(s!==void 0)&&($=M(Y,"proc",[],function(r){return r==null&&(r=u),s["$==="](r)})),M(d("Enumerator"),"new",[],function e(r){var i=e.$$s==null?this:e.$$s;r==null&&(r=u);var a;i.$each.$$p=function(){var o=L.$destructure(arguments),m=D($,o);a==null&&(a=[]),z(m)?(a.push(o),r.$yield(a),a=null):a.push(o)},i.$each(),a!=null&&r.$yield(a)},{$$s:t})},-1),W(c,"$slice_when",function _(){var s=_.$$p||u,$=this;return _.$$p=null,s===u&&Y.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1)"),M(d("Enumerator"),"new",[],function t(e){var r=t.$$s==null?this:t.$$s;e==null&&(e=u);var i=u,a=u;r.$each_cons.$$p=function(){var o=L.$destructure(arguments),m=o[0],T=o[1],K=x(s,[m,T]);a=T,i===u&&(i=[]),z(K)?(i.push(m),e.$yield(i),i=[]):i.push(m)},r.$each_cons(2),i!==u&&(i.push(a),e.$yield(i))},{$$s:$})}),W(c,"$sort",function _(){var s=_.$$p||u,$=this,t=u;return _.$$p=null,t=$.$to_a(),s===u&&(s=A(function(r,i){return r==null&&(r=u),i==null&&(i=u),r["$<=>"](i)})),M(t,"sort",[],s.$to_proc())}),W(c,"$sort_by",function _(){var s=_.$$p||u,$=this,t=u;return _.$$p=null,s===u?M($,"enum_for",["sort_by"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$}):(t=M($,"map",[],function(){var r=u;return r=L.$destructure(arguments),[n.yield1(s,r),r]}),M(t,"sort!",[],function(r,i){return r==null&&(r=u),i==null&&(i=u),r[0]["$<=>"](i[0])}),M(t,"map!",[],function(r){return r==null&&(r=u),r[1]}))}),W(c,"$sum",function _(s){var $=_.$$p||u,t=this,e=u,r=u;return _.$$p=null,s==null&&(s=0),e=s,r=0,M(t,"each",[],function(a){var o,m,T=u,K=u,C=u;return o=J(arguments),m=o,T=$!==u?n.yieldX($,v(m)):L.$destructure(m),P([d(d("Float"),"INFINITY"),d(d("Float"),"INFINITY")["$-@"]()]["$include?"](T))&&z(T["$respond_to?"]("-"))?(K=k(T,r),C=j(e,K),r=k(k(C,e),K),e=C):e=j(e,T)},-1),e},-1),W(c,"$take",function(s){var $=this;return $.$first(s)}),W(c,"$take_while",function _(){try{var s=$e("return"),$=_.$$p||u,t=this,e=u;return _.$$p=null,z($)?(e=[],M(t,"each",[],function r(i){var a,o,m=u;return a=J(arguments),o=a,m=L.$destructure(o),z(n.yield1($,m))||s.$throw(e,r.$$is_lambda),e.push(m)},{$$arity:-1,$$ret:s})):t.$enum_for("take_while")}catch(r){if(r===s)return r.$v;throw r}finally{s.is_orphan=!0}}),W(c,"$uniq",function _(){var s=_.$$p||u,$=this,t=u;return _.$$p=null,t=new Map,M($,"each",[],function(r){var i,a,o,m=u,T=u;return i=J(arguments),a=i,m=L.$destructure(a),T=s!==u?n.yield1(s,m):m,z(t["$key?"](T))?u:(o=[T,m],M(t,"[]=",o),o[o.length-1])},-1),t.$values()}),W(c,"$tally",function(s){var $=this,t=u;return s&&s!==u&&ee(s),t=M(M($,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),z(s)?(M(t,"each",[],function(r,i){var a;return r==null&&(r=u),i==null&&(i=u),a=[r,j(s.$fetch(r,0),i)],M(s,"[]=",a),a[a.length-1]}),s):t},-1),W(c,"$to_h",function _(s){var $=_.$$p||u,t,e,r=this;if(_.$$p=null,t=J(arguments),e=t,$!==u)return M(M(r,"map",[],$.$to_proc()),"to_h",v(e));var i=new Map;return r.$each.$$p=function(){var a=L.$destructure(arguments),o=L["$coerce_to?"](a,d("Array"),"to_ary"),m,T;o.$$is_array||Y.$raise(d("TypeError"),"wrong element type "+a.$class()+" (expected array)"),o.length!==2&&Y.$raise(d("ArgumentError"),"element has wrong array length (expected 2, was "+o.$length()+")"),m=o[0],T=o[1],n.hash_put(i,m,T)},r.$each.apply(r,e),i},-1),W(c,"$to_set",function _(s,$){var t=_.$$p||u,e,r,i,a=this;return _.$$p=null,e=J(arguments),e.length>0&&(r=e.shift()),r==null&&(r=q("Set")),i=e,M(r,"new",[a].concat(v(i)),t.$to_proc())},-1),W(c,"$zip",function _(s){_.$$p;var $,t,e=this;return _.$$p=null,$=J(arguments),t=$,M(e.$to_a(),"zip",v(t))},-1),S(c,"find","detect"),S(c,"filter","find_all"),S(c,"flat_map","collect_concat"),S(c,"map","collect"),S(c,"member?","include?"),S(c,"reduce","inject"),S(c,"select","find_all"),S(c,"to_a","entries")}("::",E)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(n){var z=n.klass,w=n.truthy,D=n.to_a,x=n.eqeq,ee=n.Kernel,Z=n.def,M=n.rb_gt,J=n.rb_lt,v=n.rb_le,L=n.rb_ge,$e=n.rb_plus,W=n.rb_minus,Y=n.eqeqeq,O=n.not,H=n.rb_times,b=n.rb_divide,h=n.alias,I=[],j=n.nil,k=n.$$$;return n.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(F,p,A){var P=z(F,p,"Enumerator"),S=[P].concat(A);return function(E,u,d){var N=z(E,u,"ArithmeticSequence"),g=[N].concat(d),c=n.$r(g),l=N.$$prototype;l.step_arg2=l.receiver_num=l.step_arg1=l.step=l.range=l.topfx=l.bypfx=l.creation_method=l.skipped_arg=j,n.prop(N.$$prototype,"$$is_arithmetic_seq",!0);var q=1/0;return Z(N,"$initialize",function(_,s,$){var t,e=this,r=j;return $==null&&($="step"),e.creation_method=$,w(_["$is_a?"](k("Array")))?(t=[].concat(D(_)),e.step_arg1=t[0]==null?j:t[0],e.step_arg2=t[1]==null?j:t[1],e.topfx=t[2]==null?j:t[2],e.bypfx=t[3]==null?j:t[3],e.receiver_num=s,e.step=1,e.range=w(e.step_arg2)?(e.step=e.step_arg2,n.Range.$new(e.receiver_num,e.step_arg1,!1)):w(e.step_arg1)?n.Range.$new(e.receiver_num,e.step_arg1,!1):n.Range.$new(e.receiver_num,j,!1)):(w(s)||(e.skipped_arg=!0),t=[_,w(r=s)?r:1],e.range=t[0],e.step=t[1]),e.object=e,x(e.step,0)&&ee.$raise(c("ArgumentError"),"step can't be 0"),w(e.step["$respond_to?"]("to_int"))?j:ee.$raise(c("ArgumentError"),"no implicit conversion of "+e.step.$class()+" into Integer")},-2),N.$attr_reader("step"),Z(N,"$begin",function(){var _=this;return _.range.$begin()}),Z(N,"$end",function(){var _=this;return _.range.$end()}),Z(N,"$exclude_end?",function(){var _=this;return _.range["$exclude_end?"]()}),Z(N,"$_lesser_than_end?",function(_){var s=this,$=j,t=j;return $=w(t=s.$end())?t:q,w(M(s.$step(),0))?w(s["$exclude_end?"]())?J(_,$):v(_,$):w(s["$exclude_end?"]())?M(_,$):L(_,$)}),Z(N,"$_greater_than_begin?",function(_){var s=this,$=j,t=j;return $=w(t=s.$begin())?t:q["$-@"](),w(M(s.$step(),0))?M(_,$):J(_,$)}),Z(N,"$first",function(_){var s=this,$=j,t=j,e=j;if($=w(t=s.$begin())?t:q["$-@"](),!w(_))return w(s["$_lesser_than_end?"]($))?$:j;for(e=[];w(w(t=s["$_lesser_than_end?"]($))?M(_,0):t);)e["$<<"]($),$=$e($,s.$step()),_=W(_,1);return e},-1),Z(N,"$each",function G(){var _=G.$$p||j,s=this,$=j,t=j;if(G.$$p=null,_===j)return s;for(Y(j,$=s.$begin())&&ee.$raise(c("TypeError"),"nil can't be coerced into Integer"),t=w($=s.$begin())?$:q["$-@"]();w(s["$_lesser_than_end?"](t));)n.yield1(_,t),t=$e(t,s.$step());return s}),Z(N,"$last",function(_){var s=this,$=j,t=j,e=j;if(Y(q,$=s.$end())||Y(q["$-@"](),$)?ee.$raise(k("FloatDomainError"),s.$end()):Y(j,$)&&ee.$raise(k("RangeError"),"cannot get the last element of endless arithmetic sequence"),t=W(s.$end(),W(s.$end(),s.$begin())["$%"](s.$step())),w(s["$_lesser_than_end?"](t))||(t=W(t,s.$step())),!w(_))return w(s["$_greater_than_begin?"](t))?t:j;for(e=[];w(w($=s["$_greater_than_begin?"](t))?M(_,0):$);)e["$<<"](t),t=W(t,s.$step()),_=W(_,1);return e.$reverse()},-1),Z(N,"$size",function(){var _=this,s=j,$=j;return s=w(M(_.$step(),0))?1:-1,O(_["$_lesser_than_end?"](_.$begin()))?0:w([q["$-@"](),q]["$include?"](_.$step()))?1:w([H(q["$-@"](),s),j]["$include?"](_.$begin()))||w([H(q,s),j]["$include?"](_.$end()))?q:($=W(_.$end(),W(_.$end(),_.$begin())["$%"](_.$step())),w(_["$_lesser_than_end?"]($))||($=W($,_.$step())),$e(b(W($,_.$begin()),_.$step()).$abs().$to_i(),1))}),Z(N,"$==",function(_){var s=this,$=j,t=j,e=j,r=j;return w($=w(t=w(e=w(r=s.$class()["$=="](_.$class()))?s.$begin()["$=="](_.$begin()):r)?s.$end()["$=="](_.$end()):e)?s.$step()["$=="](_.$step()):t)?s["$exclude_end?"]()["$=="](_["$exclude_end?"]()):$}),Z(N,"$hash",function(){var _=this;return[c("ArithmeticSequence"),_.$begin(),_.$end(),_.$step(),_["$exclude_end?"]()].$hash()}),Z(N,"$inspect",function(){var _=this,s=j;return w(_.receiver_num)?(s=w(_.step_arg2)?"("+_.topfx+_.step_arg1.$inspect()+", "+_.bypfx+_.step_arg2.$inspect()+")":w(_.step_arg1)?"("+_.topfx+_.step_arg1.$inspect()+")":j,"("+_.receiver_num.$inspect()+"."+_.creation_method+s+")"):(s=w(_.skipped_arg)?j:"("+_.step+")","(("+_.range.$inspect()+")."+_.creation_method+s+")")}),h(N,"===","=="),h(N,"eql?","==")}(P,P,S)}("::",null,I)};Opal.modules["corelib/enumerator/chain"]=function(n){var z=n.deny_frozen_access,w=n.klass,D=n.slice,x=n.def,ee=n.send,Z=n.to_a,M=n.truthy,J=n.rb_plus,v=n.thrower,L=n.nil,$e=n.$$$;return n.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(W,Y){var O=w(W,Y,"Enumerator");return function(H,b){var h=w(H,b,"Chain"),I=h.$$prototype;return I.enums=I.iterated=L,x(h,"$initialize",function(k){var F,p,A=this;return F=D(arguments),p=F,z(A),A.enums=p,A.iterated=[],A.object=A},-1),x(h,"$each",function j(k){var F=j.$$p||L,p,A,P=this;return j.$$p=null,p=D(arguments),A=p,F===L?ee(P,"to_enum",["each"].concat(Z(A)),function S(){var E=S.$$s==null?this:S.$$s;return E.$size()},{$$s:P}):(ee(P.enums,"each",[],function S(E){var u=S.$$s==null?this:S.$$s;return u.iterated==null&&(u.iterated=L),E==null&&(E=L),u.iterated["$<<"](E),ee(E,"each",Z(A),F.$to_proc())},{$$s:P}),P)},-1),x(h,"$size",function(k){try{var F=v("return"),p,A,P=this,S=L;return p=D(arguments),A=p,S=0,ee(P.enums,"each",[],function E(u){var d=L;return u==null&&(u=L),d=ee(u,"size",Z(A)),M([L,$e($e("Float"),"INFINITY")]["$include?"](d))&&F.$throw(d,E.$$is_lambda),S=J(S,d)},{$$ret:F}),S}catch(E){if(E===F)return E.$v;throw E}finally{F.is_orphan=!0}},-1),x(h,"$rewind",function(){var k=this;return ee(k.iterated,"reverse_each",[],function(p){return p==null&&(p=L),M(p["$respond_to?"]("rewind"))?p.$rewind():L}),k.iterated=[],k}),x(h,"$inspect",function(){var k=this;return"#<Enumerator::Chain: "+k.enums.$inspect()+">"})}(O,O)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(n){var z=n.deny_frozen_access,w=n.klass,D=n.truthy,x=n.Kernel,ee=n.def,Z=n.slice,M=n.send,J=[],v=n.nil,L=n.$$$;return n.add_stubs("include,raise,new,to_proc"),function($e,W,Y){var O=w($e,W,"Enumerator"),H=[O].concat(Y);return function(b,h,I){var j=w(b,h,"Generator"),k=[j].concat(I),F=n.$r(k),p=j.$$prototype;return p.block=v,j.$include(L("Enumerable")),ee(j,"$initialize",function A(){var P=A.$$p||v,S=this;return A.$$p=null,z(S),D(P)||x.$raise(L("LocalJumpError"),"no block given"),S.block=P}),ee(j,"$each",function A(P){var S=A.$$p||v,E,u,d=this,N=v;A.$$p=null,E=Z(arguments),u=E,N=M(F("Yielder"),"new",[],S.$to_proc());try{u.unshift(N),n.yieldX(d.block,u)}catch(g){if(g&&g.$thrower_type=="breaker")return g.$v;throw g}return d},-1)}(H[0],null,H)}(J[0],null,J)};Opal.modules["corelib/enumerator/lazy"]=function(n){var z=n.truthy,w=n.coerce_to,D=n.yield1,x=n.yieldX,ee=n.deny_frozen_access,Z=n.klass,M=n.slice,J=n.send2,v=n.find_super,L=n.to_a,$e=n.defs,W=n.Kernel,Y=n.send,O=n.def,H=n.return_self,b=n.Opal,h=n.rb_lt,I=n.eqeqeq,j=n.rb_plus,k=n.alias,F=[],p=n.nil,A=n.$$$;return n.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(P,S,E){var u=Z(P,S,"Enumerator"),d=[u].concat(E);return function(N,g,c){var l=Z(N,g,"Lazy"),q=[l].concat(c),G=n.$r(q),_=l.$$prototype;return _.enumerator=p,Z(l,A("Exception"),"StopLazyError"),$e(l,"$for",function s($,t){var e,r,i=s.$$p||p,a=this,o=p;return s.$$p=null,e=M(arguments,1),r=e,o=J(a,v(a,"for",s,!1,!0),"for",[$].concat(L(r)),i),o.enumerator=$,o},-2),O(l,"$initialize",function s($,t){var e=s.$$p||p,r=this;return s.$$p=null,t==null&&(t=p),ee(r),e===p&&W.$raise(A("ArgumentError"),"tried to call lazy new without a block"),r.enumerator=$,J(r,v(r,"initialize",s,!1,!0),"initialize",[t],function(a,o){var m,T;a==null&&(a=p),m=M(arguments,1),T=m;try{return Y($,"each",L(T),function(C){var V,re;V=M(arguments),re=V,re.unshift(a),x(e,re)},-1)}catch(K){if(n.rescue(K,[G("StopLazyError")]))try{return p}finally{n.pop_exception(K)}else throw K}},-2)},-2),O(l,"$lazy",H),O(l,"$collect",function s(){var $=s.$$p||p,t=this;return s.$$p=null,z($)||W.$raise(A("ArgumentError"),"tried to call lazy map without a block"),Y(G("Lazy"),"new",[t,t.$enumerator_size()],function(r,i){var a,o;r==null&&(r=p),a=M(arguments,1),o=a;var m=x($,o);r.$yield(m)},-2)}),O(l,"$collect_concat",function s(){var $=s.$$p||p,t=this;return s.$$p=null,z($)||W.$raise(A("ArgumentError"),"tried to call lazy map without a block"),Y(G("Lazy"),"new",[t,p],function(r,i){var a,o;r==null&&(r=p),a=M(arguments,1),o=a;var m=x($,o);if(m["$respond_to?"]("force")&&m["$respond_to?"]("each"))Y(m,"each",[],function(C){return C==null&&(C=p),r.$yield(C)});else{var T=b.$try_convert(m,A("Array"),"to_ary");T===p?r.$yield(m):Y(m,"each",[],function(C){return C==null&&(C=p),r.$yield(C)})}},-2)}),O(l,"$drop",function($){var t=this,e=p,r=p,i=p;return $=w($,A("Integer"),"to_int"),z(h($,0))&&W.$raise(A("ArgumentError"),"attempt to drop negative size"),e=t.$enumerator_size(),r=I(A("Integer"),e)&&z(h($,e))?$:e,i=0,Y(G("Lazy"),"new",[t,r],function(o,m){var T,K;return o==null&&(o=p),T=M(arguments,1),K=T,z(h(i,$))?i=j(i,1):Y(o,"yield",L(K))},-2)}),O(l,"$drop_while",function s(){var $=s.$$p||p,t=this,e=p;return s.$$p=null,z($)||W.$raise(A("ArgumentError"),"tried to call lazy drop_while without a block"),e=!0,Y(G("Lazy"),"new",[t,p],function(i,a){var o,m;if(i==null&&(i=p),o=M(arguments,1),m=o,z(e)){var T=x($,m);z(T)||(e=!1,Y(i,"yield",L(m)))}else return Y(i,"yield",L(m))},-2)}),O(l,"$enum_for",function s($,t){var e=s.$$p||p,r,i,a,o=this;return s.$$p=null,r=M(arguments),r.length>0&&(i=r.shift()),i==null&&(i="each"),a=r,Y(o.$class(),"for",[o,i].concat(L(a)),e.$to_proc())},-1),O(l,"$find_all",function s(){var $=s.$$p||p,t=this;return s.$$p=null,z($)||W.$raise(A("ArgumentError"),"tried to call lazy select without a block"),Y(G("Lazy"),"new",[t,p],function(r,i){var a,o;r==null&&(r=p),a=M(arguments,1),o=a;var m=x($,o);z(m)&&Y(r,"yield",L(o))},-2)}),O(l,"$grep",function s($){var t=s.$$p||p,e=this;return s.$$p=null,z(t)?Y(G("Lazy"),"new",[e,p],function(i,a){var o,m;i==null&&(i=p),o=M(arguments,1),m=o;var T=b.$destructure(m),K=$["$==="](T);z(K)&&(K=D(t,T),i.$yield(D(t,T)))},-2):Y(G("Lazy"),"new",[e,p],function(i,a){var o,m;i==null&&(i=p),o=M(arguments,1),m=o;var T=b.$destructure(m),K=$["$==="](T);z(K)&&i.$yield(T)},-2)}),O(l,"$reject",function s(){var $=s.$$p||p,t=this;return s.$$p=null,z($)||W.$raise(A("ArgumentError"),"tried to call lazy reject without a block"),Y(G("Lazy"),"new",[t,p],function(r,i){var a,o;r==null&&(r=p),a=M(arguments,1),o=a;var m=x($,o);z(m)||Y(r,"yield",L(o))},-2)}),O(l,"$take",function($){var t=this,e=p,r=p,i=p;return $=w($,A("Integer"),"to_int"),z(h($,0))&&W.$raise(A("ArgumentError"),"attempt to take negative size"),e=t.$enumerator_size(),r=I(A("Integer"),e)&&z(h($,e))?$:e,i=0,Y(G("Lazy"),"new",[t,r],function(o,m){var T,K;return o==null&&(o=p),T=M(arguments,1),K=T,z(h(i,$))?(Y(o,"yield",L(K)),i=j(i,1)):W.$raise(G("StopLazyError"))},-2)}),O(l,"$take_while",function s(){var $=s.$$p||p,t=this;return s.$$p=null,z($)||W.$raise(A("ArgumentError"),"tried to call lazy take_while without a block"),Y(G("Lazy"),"new",[t,p],function(r,i){var a,o;r==null&&(r=p),a=M(arguments,1),o=a;var m=x($,o);z(m)?Y(r,"yield",L(o)):W.$raise(G("StopLazyError"))},-2)}),O(l,"$inspect",function(){var $=this;return"#<"+$.$class()+": "+$.enumerator.$inspect()+">"}),k(l,"force","to_a"),k(l,"filter","find_all"),k(l,"flat_map","collect_concat"),k(l,"map","collect"),k(l,"select","find_all"),k(l,"to_enum","enum_for")}(u,u,d)}("::",null,F)};Opal.modules["corelib/enumerator/yielder"]=function(n){var z=n.klass,w=n.def,D=n.slice,x=n.send,ee=n.to_a,Z=[],M=n.nil;return n.add_stubs("yield,proc"),function(J,v,L){var $e=z(J,v,"Enumerator"),W=[$e].concat(L);return function(Y,O){var H=z(Y,O,"Yielder"),b=H.$$prototype;return b.block=M,w(H,"$initialize",function h(){var I=h.$$p||M,j=this;return h.$$p=null,j.block=I,j}),w(H,"$yield",function(I){var j,k,F=this;j=D(arguments),k=j;var p=n.yieldX(F.block,k);if(p&&p.$thrower_type=="break")throw p;return p},-1),w(H,"$<<",function(I){var j=this;return j.$yield(I),j}),w(H,"$to_proc",function(){var I=this;return x(I,"proc",[],function j(k){var F,p,A=j.$$s==null?this:j.$$s;return F=D(arguments),p=F,x(A,"yield",ee(p))},{$$arity:-1,$$s:I})})}(W[0],null)}(Z[0],null,Z)};Opal.modules["corelib/enumerator"]=function(n){var z=n.slice,w=n.coerce_to,D=n.deny_frozen_access,x=n.klass,ee=n.defs,Z=n.truthy,M=n.send,J=n.not,v=n.def,L=n.rb_plus,$e=n.to_a,W=n.Opal,Y=n.send2,O=n.find_super,H=n.rb_ge,b=n.Kernel,h=n.rb_le,I=n.alias,j=n.top,k=[],F=n.nil,p=n.$$$;return n.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),j.$require("corelib/enumerable"),function(A,P,S){var E=x(A,P,"Enumerator"),u=[E].concat(S),d=n.$r(u),N=E.$$prototype;return N.size=N.args=N.object=N.method=N.values=N.cursor=F,E.$include(p("Enumerable")),E.$$prototype.$$is_enumerator=!0,ee(E,"$for",function g(c,l,q){var G=g.$$p||F,_,s,$,t=this;g.$$p=null,_=z(arguments,1),_.length>0&&(s=_.shift()),s==null&&(s="each"),$=_;var e=t.$allocate();return e.object=c,e.size=G,e.method=s,e.args=$,e.cursor=0,e},-2),v(E,"$initialize",function g(c){var l=g.$$p||F,q=this;return g.$$p=null,z(arguments),D(q),q.cursor=0,Z(l)?(q.object=M(d("Generator"),"new",[],l.$to_proc()),q.method="each",q.args=[],q.size=arguments[0]||F,Z(q.size)&&J(q.size["$respond_to?"]("call"))?q.size=w(q.size,p("Integer"),"to_int"):F):(q.object=arguments[0],q.method=arguments[1]||"each",q.args=z(arguments,2),q.size=F)},-1),v(E,"$each",function g(c){var l=g.$$p||F,q,G,_=this;return g.$$p=null,q=z(arguments),G=q,Z(l["$nil?"]())&&Z(G["$empty?"]())?_:(G=L(_.args,G),Z(l["$nil?"]())?M(_.$class(),"new",[_.object,_.method].concat($e(G))):M(_.object,"__send__",[_.method].concat($e(G)),l.$to_proc()))},-1),v(E,"$size",function(){var c=this;return Z(c.size["$respond_to?"]("call"))?M(c.size,"call",$e(c.args)):c.size}),v(E,"$with_index",function g(c){var l=g.$$p||F,q=this;if(g.$$p=null,c==null&&(c=0),c=Z(c)?w(c,p("Integer"),"to_int"):0,!Z(l))return M(q,"enum_for",["with_index",c],function _(){var s=_.$$s==null?this:_.$$s;return s.$size()},{$$s:q});var G=c;return q.$each.$$p=function(){var _=W.$destructure(arguments),s=l(_,G);return G++,s},q.$each()},-1),v(E,"$each_with_index",function g(){var c=g.$$p||F,l=this;return g.$$p=null,c===F?M(l,"enum_for",["each_with_index"],function q(){var G=q.$$s==null?this:q.$$s;return G.$size()},{$$s:l}):(Y(l,O(l,"each_with_index",g,!1,!0),"each_with_index",[],c),l.object)}),v(E,"$rewind",function(){var c=this;return c.cursor=0,c}),v(E,"$peek_values",function(){var c=this,l=F;return c.values=Z(l=c.values)?l:M(c,"map",[],function(G){var _,s;return _=z(arguments),s=_,s},-1),Z(H(c.cursor,c.values.$length()))&&b.$raise(p("StopIteration"),"iteration reached an end"),c.values["$[]"](c.cursor)}),v(E,"$peek",function(){var c=this,l=F;return l=c.$peek_values(),Z(h(l.$length(),1))?l["$[]"](0):l}),v(E,"$next_values",function(){var c=this,l=F;return l=c.$peek_values(),c.cursor=L(c.cursor,1),l}),v(E,"$next",function(){var c=this,l=F;return l=c.$next_values(),Z(h(l.$length(),1))?l["$[]"](0):l}),v(E,"$feed",function(c){var l=this;return l.$raise(d("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),v(E,"$+",function(c){var l=this;return p(p("Enumerator"),"Chain").$new(l,c)}),v(E,"$inspect",function(){var c=this,l=F;return l="#<"+c.$class()+": "+c.object.$inspect()+":"+c.method,Z(c.args["$any?"]())&&(l=L(l,"("+c.args.$inspect()["$[]"](p("Range").$new(1,-2))+")")),L(l,">")}),I(E,"with_object","each_with_object"),E.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),E.$autoload("Chain","corelib/enumerator/chain"),E.$autoload("Generator","corelib/enumerator/generator"),E.$autoload("Lazy","corelib/enumerator/lazy"),E.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,k)};Opal.modules["corelib/numeric"]=function(n){var z=n.klass,w=n.truthy,D=n.Kernel,x=n.def,ee=n.to_ary,Z=n.return_self,M=n.rb_minus,J=n.rb_times,v=n.rb_lt,L=n.eqeq,$e=n.rb_divide,W=n.return_val,Y=n.Opal,O=n.slice,H=n.extract_kwargs,b=n.ensure_kwargs,h=n.hash_get,I=n.not,j=n.send,k=n.rb_ge,F=n.rb_le,p=n.rb_plus,A=n.rb_gt,P=n.alias,S=n.top,E=n.nil,u=n.$$$;return n.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),S.$require("corelib/comparable"),function(d,N){var g=z(d,N,"Numeric");return g.$include(u("Comparable")),x(g,"$coerce",function(l){var q=this;return w(l["$instance_of?"](q.$class()))?[l,q]:[D.$Float(l),D.$Float(q)]}),x(g,"$__coerced__",function(l,q){var G,_,s=this,$=E,t=E;if(w(q["$respond_to?"]("coerce")))return _=q.$coerce(s),G=ee(_),$=G[0]==null?E:G[0],t=G[1]==null?E:G[1],$.$__send__(l,t);switch(l.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return D.$raise(u("TypeError"),""+q.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return D.$raise(u("ArgumentError"),"comparison of "+s.$class()+" with "+q.$class()+" failed");default:return E}}),x(g,"$<=>",function(l){var q=this;return w(q["$equal?"](l))?0:E}),x(g,"$+@",Z),x(g,"$-@",function(){var l=this;return M(0,l)}),x(g,"$%",function(l){var q=this;return M(q,J(l,q.$div(l)))}),x(g,"$abs",function(){var l=this;return w(v(l,0))?l["$-@"]():l}),x(g,"$abs2",function(){var l=this;return J(l,l)}),x(g,"$angle",function(){var l=this;return w(v(l,0))?u(u("Math"),"PI"):0}),x(g,"$ceil",function(l){var q=this;return l==null&&(l=0),q.$to_f().$ceil(l)},-1),x(g,"$conj",Z),x(g,"$denominator",function(){var l=this;return l.$to_r().$denominator()}),x(g,"$div",function(l){var q=this;return L(l,0)&&D.$raise(u("ZeroDivisionError"),"divided by o"),$e(q,l).$floor()}),x(g,"$divmod",function(l){var q=this;return[q.$div(l),q["$%"](l)]}),x(g,"$fdiv",function(l){var q=this;return $e(q.$to_f(),l)}),x(g,"$floor",function(l){var q=this;return l==null&&(l=0),q.$to_f().$floor(l)},-1),x(g,"$i",function(){var l=this;return D.$Complex(0,l)}),x(g,"$imag",W(0)),x(g,"$integer?",W(!1)),x(g,"$nonzero?",function(){var l=this;return w(l["$zero?"]())?E:l}),x(g,"$numerator",function(){var l=this;return l.$to_r().$numerator()}),x(g,"$polar",function(){var l=this;return[l.$abs(),l.$arg()]}),x(g,"$quo",function(l){var q=this;return $e(Y["$coerce_to!"](q,u("Rational"),"to_r"),l)}),x(g,"$real",Z),x(g,"$real?",W(!0)),x(g,"$rect",function(){var l=this;return[l,0]}),x(g,"$round",function(l){var q=this;return q.$to_f().$round(l)},-1),x(g,"$step",function c(l,q,G){var _=c.$$p||E,s,$,t,e,r,i,a=this,o=E;c.$$p=null,s=O(arguments),$=H(s),$=b($),s.length>0&&(t=s.shift()),s.length>0&&(e=s.shift()),r=h($,"to"),i=h($,"by"),t!==void 0&&r!==void 0&&D.$raise(u("ArgumentError"),"to is given twice"),e!==void 0&&i!==void 0&&D.$raise(u("ArgumentError"),"step is given twice"),r!==void 0&&(t=r),i!==void 0&&(e=i),t===void 0&&(t=E);function m(){e===E&&D.$raise(u("TypeError"),"step must be numeric"),e!=null&&e["$=="](0)&&D.$raise(u("ArgumentError"),"step can't be 0"),(e===E||e==null)&&(e=1);var ge=e["$<=>"](0);ge===E&&D.$raise(u("ArgumentError"),"0 can't be coerced into "+e.$class()),(t===E||t==null)&&(t=ge>0?u(u("Float"),"INFINITY"):u(u("Float"),"INFINITY")["$-@"]()),Y.$compare(a,t)}function T(){if(e>0&&a>t||e<0&&a<t)return 0;if(e===1/0||e===-1/0)return 1;var ge=Math.abs,ve=Math.floor,me=(ge(a)+ge(t)+ge(t-a))/ge(e)*u(u("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((t-a)/e+me)+1)}function K(){if(m(),e===0)return 1/0;if(e%1!==0)return T();if(e>0&&a>t||e<0&&a<t)return 0;var ge=Math.ceil,ve=Math.abs,me=ve(a-t)+1,be=ve(e);return ge(me/be)}if(_===E)return(I(t)||w(t["$is_a?"](u("Numeric"))))&&(I(e)||w(e["$is_a?"](u("Numeric"))))?u(u("Enumerator"),"ArithmeticSequence").$new([t,e,w(r)?"to: ":E,w(i)?"by: ":E],a):j(a,"enum_for",["step",t,e],K.$to_proc());m();var C=e["$negative?"](),V=e["$=="](0)||t===1/0&&!C||t===-1/0&&C;if(a.$$is_number&&e.$$is_number&&t.$$is_number)if(a%1===0&&(V||t%1===0)&&e%1===0){var re=a;if(V)for(;;re+=e)_(re);else if(C)for(;re>=t;re+=e)_(re);else for(;re<=t;re+=e)_(re);return a}else{var ae=a.$to_f().valueOf();e=e.$to_f().valueOf(),t=t.$to_f().valueOf();var le=T();if(!isFinite(e))le!==0&&_(ae);else if(e===0)for(;;)_(ae);else for(var _e=0;_e<le;_e++){var de=_e*e+a;(e>=0?t<de:t>de)&&(de=t),_(de)}return a}for(o=a;w(C?k(o,t):F(o,t));)n.yield1(_,o),o=p(o,e)},-1),x(g,"$to_c",function(){var l=this;return D.$Complex(l,0)}),x(g,"$to_int",function(){var l=this;return l.$to_i()}),x(g,"$truncate",function(l){var q=this;return l==null&&(l=0),q.$to_f().$truncate(l)},-1),x(g,"$zero?",function(){var l=this;return l["$=="](0)}),x(g,"$positive?",function(){var l=this;return A(l,0)}),x(g,"$negative?",function(){var l=this;return v(l,0)}),x(g,"$dup",Z),x(g,"$clone",function(l){var q=this;return l=b(l),h(l,"freeze"),q},-1),x(g,"$finite?",W(!0)),x(g,"$infinite?",W(E)),P(g,"arg","angle"),P(g,"conjugate","conj"),P(g,"imaginary","imag"),P(g,"magnitude","abs"),P(g,"modulo","%"),P(g,"phase","arg"),P(g,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(n){var z=n.truthy,w=n.falsy,D=n.yield1,x=n.hash_get,ee=n.hash_put,Z=n.hash_delete,M=n.coerce_to,J=n.respond_to,v=n.deny_frozen_access,L=n.freeze,$e=n.opal32_init,W=n.opal32_add,Y=n.klass,O=n.slice,H=n.defs,b=n.Kernel,h=n.def,I=n.Opal,j=n.eqeqeq,k=n.send2,F=n.find_super,p=n.send,A=n.rb_gt,P=n.rb_times,S=n.eqeq,E=n.rb_minus,u=n.to_a,d=n.to_ary,N=n.gvars,g=n.rb_ge,c=n.assign_ivar,l=n.rb_lt,q=n.return_self,G=n.neqeq,_=n.alias,s=n.top,$=[],t=n.nil,e=n.$$$;return n.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),s.$require("corelib/enumerable"),s.$require("corelib/numeric"),function(r,i,a){var o=Y(r,i,"Array"),m=[o].concat(a),T=n.$r(m);o.$include(e("Enumerable")),n.prop(o.$$prototype,"$$is_array",!0);function K(ie){for(var R=ie[0],B=1,X=ie.length;B<X;B++)ie[B-1]=ie[B];return ie.pop(),R}function C(ie,R){return R.$$name===n.Array?ie:R.$allocate().$replace(ie.$to_a())}function V(ie,R,B){for(var X,Q=null,ne=new Array(ie.length),se=0,oe=0;se<ie.length;se++){if(!Q)try{X=D(B,ie[se])}catch(fe){Q=fe}(Q||R(X))&&(ne[oe]=ie[se],oe+=1)}if(oe!==se&&(ie.splice.apply(ie,[0,ne.length].concat(ne)),ie.splice(oe,ne.length)),Q)throw Q}function re(ie){return ie.$$is_array||(ie=M(ie,e("Array"),"to_ary")),ie.$to_a()}function ae(ie,R){var B=R.length;if(B>6&&B<32767)ie.push.apply(ie,R);else for(var X=0;X<B;X++)ie.push(R[X])}H(o,"$[]",function(R){var B,X,Q=this;return B=O(arguments),X=B,C(X,Q)},-1),h(o,"$initialize",function ie(R,B){var X=ie.$$p||t,Q=this;if(ie.$$p=null,R==null&&(R=t),B==null&&(B=t),v(Q),B!==t&&X!==t&&b.$warn("warning: block supersedes default value argument"),R>e(e("Integer"),"MAX")&&b.$raise(e("ArgumentError"),"array size too big"),arguments.length>2&&b.$raise(e("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return Q.length>0&&Q.splice(0,Q.length),Q;if(arguments.length===1){if(R.$$is_array)return Q.$replace(R.$to_a()),Q;if(R["$respond_to?"]("to_ary"))return Q.$replace(R.$to_ary()),Q}R=M(R,e("Integer"),"to_int"),R<0&&b.$raise(e("ArgumentError"),"negative array size"),Q.splice(0,Q.length);var ne,se;if(X===t)for(ne=0;ne<R;ne++)Q.push(B);else for(ne=0,se;ne<R;ne++)se=X(ne),Q[ne]=se;return Q},-1),H(o,"$try_convert",function(R){return I["$coerce_to?"](R,e("Array"),"to_ary")}),h(o,"$&",function(R){var B=this;if(R=re(R),B.length===0||R.length===0)return[];var X=[],Q=new Map,ne,se,oe;for(ne=0,se=R.length;ne<se;ne++)ee(Q,R[ne],!0);for(ne=0,se=B.length;ne<se;ne++)oe=B[ne],Z(Q,oe)!==void 0&&X.push(oe);return X}),h(o,"$|",function(R){var B=this;R=re(R);var X=new Map,Q,ne;for(Q=0,ne=B.length;Q<ne;Q++)ee(X,B[Q],!0);for(Q=0,ne=R.length;Q<ne;Q++)ee(X,R[Q],!0);return X.$keys()}),h(o,"$*",function(R){var B=this;if(z(R["$respond_to?"]("to_str")))return B.$join(R.$to_str());R=M(R,e("Integer"),"to_int"),z(R<0)&&b.$raise(e("ArgumentError"),"negative argument");for(var X=[],Q=B.$to_a(),ne=0;ne<R;ne++)X=X.concat(Q);return X}),h(o,"$+",function(R){var B=this;return R=re(R),B.concat(R)}),h(o,"$-",function(R){var B=this;if(R=re(R),z(B.length===0))return[];if(z(R.length===0))return B.slice();var X=[],Q=new Map,ne,se,oe;for(ne=0,se=R.length;ne<se;ne++)ee(Q,R[ne],!0);for(ne=0,se=B.length;ne<se;ne++)oe=B[ne],x(Q,oe)===void 0&&X.push(oe);return X}),h(o,"$<<",function(R){var B=this;return v(B),B.push(R),B}),h(o,"$<=>",function(R){var B=this;if(j(e("Array"),R))R=R.$to_a();else if(z(R["$respond_to?"]("to_ary")))R=R.$to_ary().$to_a();else return t;if(B===R)return 0;for(var X=Math.min(B.length,R.length),Q=0;Q<X;Q++){var ne=B[Q]["$<=>"](R[Q]);if(ne!==0)return ne}return B.length["$<=>"](R.length)}),h(o,"$==",function(R){var B=this,X={};function Q(ne,se){var oe,fe,f,y;if(ne===se)return!0;if(!se.$$is_array)return J(se,"$to_ary")?se["$=="](ne):!1;if(ne.$$constructor!==Array&&(ne=ne.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),ne.length!==se.length)return!1;for(X[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(f=ne[oe],y=se[oe],f.$$is_array){if(y.$$is_array&&y.length!==f.length||!X.hasOwnProperty(f.$object_id())&&!Q(f,y))return!1}else if(!f["$=="](y))return!1;return!0}return Q(B,R)});function le(ie,R){var B=ie.length,X,Q,ne,se;return X=R.excl,Q=R.begin===t?0:M(R.begin,n.Integer,"to_int"),ne=R.end===t?-1:M(R.end,n.Integer,"to_int"),Q<0&&(Q+=B,Q<0)||(R.excl_rev&&R.begin!==t&&(Q+=1),Q>B)?t:ne<0&&(ne+=B,ne<0)?[]:((!X||R.end===t)&&(ne+=1),se=ie.slice(Q,ne),se)}function _e(ie,R){var B,X=[],Q=0,ne;for(R.step<0?(ne={begin:R.range.end,end:R.range.begin,excl:!1,excl_rev:R.range.excl},B=le(ie,ne).$reverse()):B=le(ie,R.range);Q<B.length;)X.push(B[Q]),Q+=Math.abs(R.step);return X}function de(ie,R,B){var X=ie.length,Q;return R=M(R,n.Integer,"to_int"),R<0&&(R+=X,R<0)?t:B===void 0?R>=X||R<0?t:ie[R]:(B=M(B,n.Integer,"to_int"),B<0||R>X||R<0?t:(Q=ie.slice(R,R+B),Q))}h(o,"$[]",function(R,B){var X=this;return R.$$is_range?le(X,R):R.$$is_arithmetic_seq?_e(X,R):de(X,R,B)},-2),h(o,"$[]=",function(R,B,X){var Q=this,ne=t,se=t;v(Q),ne=t;var oe,fe=Q.length;if(R.$$is_range){B.$$is_array?ne=B.$to_a():B["$respond_to?"]("to_ary")?ne=B.$to_ary().$to_a():ne=[B];var f=R.excl,y=R.begin===t?0:M(R.begin,n.Integer,"to_int"),U=R.end===t?-1:M(R.end,n.Integer,"to_int");if(y<0&&(y+=fe,y<0&&b.$raise(e("RangeError"),""+R.$inspect()+" out of range")),U<0&&(U+=fe),(!f||R.end===t)&&(U+=1),y>fe)for(oe=fe;oe<y;oe++)Q[oe]=t;return U<0?Q.splice.apply(Q,[y,0].concat(ne)):Q.splice.apply(Q,[y,U-y].concat(ne)),B}else{X===void 0?se=1:(se=B,B=X,B.$$is_array?ne=B.$to_a():B["$respond_to?"]("to_ary")?ne=B.$to_ary().$to_a():ne=[B]);var te;if(R=M(R,e("Integer"),"to_int"),se=M(se,e("Integer"),"to_int"),R<0&&(te=R,R+=fe,R<0&&b.$raise(e("IndexError"),"index "+te+" too small for array; minimum "+-Q.length)),se<0&&b.$raise(e("IndexError"),"negative length ("+se+")"),R>fe)for(oe=fe;oe<R;oe++)Q[oe]=t;return X===void 0?Q[R]=B:Q.splice.apply(Q,[R,se].concat(ne)),B}},-3),h(o,"$any?",function ie(R){var B=ie.$$p||t,X=this;return ie.$$p=null,X.length===0?!1:k(X,F(X,"any?",ie,!1,!0),"any?",[R],B)},-1),h(o,"$assoc",function(R){for(var B=this,X=0,Q=B.length,ne;X<Q;X++)if(ne=B[X],ne.length&&ne[0]["$=="](R))return ne;return t}),h(o,"$at",function(R){var B=this;return R=M(R,e("Integer"),"to_int"),R<0&&(R+=B.length),R<0||R>=B.length?t:B[R]}),h(o,"$bsearch_index",function ie(){var R=ie.$$p||t,B=this;if(ie.$$p=null,R===t)return B.$enum_for("bsearch_index");for(var X=0,Q=B.length,ne,se,oe,fe=!1,f=t;X<Q;){if(ne=X+Math.floor((Q-X)/2),se=B[ne],oe=D(R,se),oe===!0)f=ne,fe=!0;else if(oe===!1||oe===t)fe=!1;else if(oe.$$is_number){if(oe===0)return ne;fe=oe<0}else b.$raise(e("TypeError"),"wrong argument type "+oe.$class()+" (must be numeric, true, false or nil)");fe?Q=ne:X=ne+1}return f}),h(o,"$bsearch",function ie(){var R=ie.$$p||t,B=this,X=t;return ie.$$p=null,R===t?B.$enum_for("bsearch"):(X=p(B,"bsearch_index",[],R.$to_proc()),X!=null&&X.$$is_number?B[X]:X)}),h(o,"$cycle",function ie(R){var B=ie.$$p||t,X=this;if(ie.$$p=null,R==null&&(R=t),B===t)return p(X,"enum_for",["cycle",R],function se(){var oe=se.$$s==null?this:se.$$s;return z(R["$nil?"]())?e(e("Float"),"INFINITY"):(R=I["$coerce_to!"](R,e("Integer"),"to_int"),z(A(R,0))?P(oe.$enumerator_size(),R):0)},{$$s:X});if(z(X["$empty?"]())||S(R,0))return t;var Q,ne;if(R===t)for(;;)for(Q=0,ne=X.length;Q<ne;Q++)D(B,X[Q]);else{if(R=I["$coerce_to!"](R,e("Integer"),"to_int"),R<=0)return X;for(;R>0;){for(Q=0,ne=X.length;Q<ne;Q++)D(B,X[Q]);R--}}return X},-1),h(o,"$clear",function(){var R=this;return v(R),R.splice(0,R.length),R}),h(o,"$count",function ie(R){var B=ie.$$p||t,X=this;return ie.$$p=null,z(R!==void 0)||z(B)?k(X,F(X,"count",ie,!1,!0),"count",[R],B):X.$size()},-1),h(o,"$initialize_copy",function(R){var B=this;return B.$replace(R)}),h(o,"$collect",function ie(){var R=ie.$$p||t,B=this;if(ie.$$p=null,R===t)return p(B,"enum_for",["collect"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:B});for(var X=[],Q=0;Q<B.length;Q++){var ne=D(R,B[Q]);X[Q]=ne}return X}),h(o,"$collect!",function ie(){var R=ie.$$p||t,B=this;if(ie.$$p=null,R===t)return p(B,"enum_for",["collect!"],function ne(){var se=ne.$$s==null?this:ne.$$s;return se.$size()},{$$s:B});v(B);for(var X=0;X<B.length;X++){var Q=D(R,B[X]);B[X]=Q}return B});function ge(ie,R){return ie===R||R===0?1:R>0&&ie>R?ge(ie-1,R-1)+ge(ie-1,R):0}h(o,"$combination",function ie(R){var B=ie.$$p||t,X=this,Q=t;if(ie.$$p=null,Q=I["$coerce_to!"](R,e("Integer"),"to_int"),B===t)return p(X,"enum_for",["combination",Q],function te(){var ue=te.$$s==null?this:te.$$s;return ge(ue.length,Q)},{$$s:X});var ne,se,oe,fe,f,y,U;if(Q===0)n.yield1(B,[]);else if(Q===1)for(ne=0,se=X.length;ne<se;ne++)n.yield1(B,[X[ne]]);else if(Q===X.length)n.yield1(B,X.slice());else if(Q>=0&&Q<X.length){for(oe=[],ne=0;ne<=Q+1;ne++)oe.push(0);for(fe=[],f=0,y=!1,oe[0]=-1;!y;){for(fe[f]=X[oe[f+1]];f<Q-1;)f++,U=oe[f+1]=oe[f]+1,fe[f]=X[U];n.yield1(B,fe.slice()),f++;do y=f===0,oe[f]++,f--;while(oe[f+1]+Q===X.length+f+1)}}return X}),h(o,"$repeated_combination",function ie(R){var B=ie.$$p||t,X=this,Q=t;if(ie.$$p=null,Q=I["$coerce_to!"](R,e("Integer"),"to_int"),B===t)return p(X,"enum_for",["repeated_combination",Q],function se(){var oe=se.$$s==null?this:se.$$s;return ge(oe.length+Q-1,Q)},{$$s:X});function ne(se,oe,fe,f){if(fe.length==se){var y=fe.slice();n.yield1(B,y);return}for(var U=oe;U<f.length;U++)fe.push(f[U]),ne(se,U,fe,f),fe.pop()}return Q>=0&&ne(Q,0,[],X),X}),h(o,"$compact",function(){for(var R=this,B=[],X=0,Q=R.length,ne;X<Q;X++)(ne=R[X])!==t&&B.push(ne);return B}),h(o,"$compact!",function(){var R=this;v(R);for(var B=R.length,X=0,Q=R.length;X<Q;X++)R[X]===t&&(R.splice(X,1),Q--,X--);return R.length===B?t:R}),h(o,"$concat",function(R){var B,X,Q=this;return B=O(arguments),X=B,v(Q),X=p(X,"map",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;return se==null&&(se=t),se=re(se),z(se["$equal?"](oe))&&(se=se.$dup()),se},{$$s:Q}),p(X,"each",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;se==null&&(se=t);for(var fe=0,f=se.length;fe<f;fe++)oe.push(se[fe])},{$$s:Q}),Q},-1),h(o,"$delete",function ie(R){var B=ie.$$p||t,X=this;ie.$$p=null;for(var Q=X.length,ne=0,se=Q;ne<se;ne++)X[ne]["$=="](R)&&(v(X),X.splice(ne,1),se--,ne--);return X.length===Q?B!==t?n.yieldX(B,[]):t:R}),h(o,"$delete_at",function(R){var B=this;if(v(B),R=M(R,e("Integer"),"to_int"),R<0&&(R+=B.length),R<0||R>=B.length)return t;var X=B[R];return B.splice(R,1),X}),h(o,"$delete_if",function ie(){var R=ie.$$p||t,B=this;return ie.$$p=null,R===t?p(B,"enum_for",["delete_if"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:B}):(v(B),V(B,w,R),B)}),h(o,"$difference",function(R){var B,X,Q=this;return B=O(arguments),X=B,p(X,"reduce",[Q.$to_a().$dup()],function(se,oe){return se==null&&(se=t),oe==null&&(oe=t),E(se,oe)})},-1),h(o,"$dig",function(R,B){var X,Q,ne=this,se=t;return X=O(arguments,1),Q=X,se=ne["$[]"](R),se===t||Q.length===0?se:(z(se["$respond_to?"]("dig"))||b.$raise(e("TypeError"),""+se.$class()+" does not have #dig method"),p(se,"dig",u(Q)))},-2),h(o,"$drop",function(R){var B=this;return R=M(R,e("Integer"),"to_int"),R<0&&b.$raise(e("ArgumentError")),B.slice(R)}),h(o,"$dup",function ie(){var R=ie.$$p||t,B=this;return ie.$$p=null,B.$$class===n.Array&&B.$$class.$allocate.$$pristine&&B.$copy_instance_variables.$$pristine&&B.$initialize_dup.$$pristine?B.slice(0):k(B,F(B,"dup",ie,!1,!0),"dup",[],R)}),h(o,"$each",function ie(){var R=ie.$$p||t,B=this;if(ie.$$p=null,R===t)return p(B,"enum_for",["each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:B});for(var X=0;X<B.length;X++)D(R,B[X]);return B}),h(o,"$each_index",function ie(){var R=ie.$$p||t,B=this;if(ie.$$p=null,R===t)return p(B,"enum_for",["each_index"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:B});for(var X=0;X<B.length;X++)D(R,X);return B}),h(o,"$empty?",function(){var R=this;return R.length===0}),h(o,"$eql?",function(R){var B=this,X={};function Q(ne,se){var oe,fe,f,y;if(!se.$$is_array||(se=se.$to_a(),ne.length!==se.length))return!1;for(X[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(f=ne[oe],y=se[oe],f.$$is_array){if(y.$$is_array&&y.length!==f.length||!X.hasOwnProperty(f.$object_id())&&!Q(f,y))return!1}else if(!f["$eql?"](y))return!1;return!0}return Q(B,R)}),h(o,"$fetch",function ie(R,B){var X=ie.$$p||t,Q=this;ie.$$p=null;var ne=R;if(R=M(R,e("Integer"),"to_int"),R<0&&(R+=Q.length),R>=0&&R<Q.length)return Q[R];if(X!==t&&B!=null&&Q.$warn("warning: block supersedes default value argument"),X!==t)return X(ne);if(B!=null)return B;Q.length===0?b.$raise(e("IndexError"),"index "+ne+" outside of array bounds: 0...0"):b.$raise(e("IndexError"),"index "+ne+" outside of array bounds: -"+Q.length+"..."+Q.length)},-2),h(o,"$fill",function ie(R){var B=ie.$$p||t,X,Q,ne,se,oe=this,fe=t,f=t,y=t,U=t,te=t;ie.$$p=null,X=O(arguments),Q=X,v(oe);var ue,ce;if(z(B)?(z(Q.length>2)&&b.$raise(e("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 0..2)"),se=Q,ne=d(se),fe=ne[0]==null?t:ne[0],f=ne[1]==null?t:ne[1]):(z(Q.length==0)?b.$raise(e("ArgumentError"),"wrong number of arguments (0 for 1..3)"):z(Q.length>3)&&b.$raise(e("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 1..3)"),se=Q,ne=d(se),y=ne[0]==null?t:ne[0],fe=ne[1]==null?t:ne[1],f=ne[2]==null?t:ne[2]),j(e("Range"),fe)){if(z(f)&&b.$raise(e("TypeError"),"length invalid with range"),U=fe.begin===t?0:M(fe.begin,e("Integer"),"to_int"),z(U<0)&&(U+=this.length),z(U<0)&&b.$raise(e("RangeError"),""+fe.$inspect()+" out of range"),te=fe.end===t?-1:M(fe.end,e("Integer"),"to_int"),z(te<0)&&(te+=this.length),z(fe["$exclude_end?"]())||(te+=1),z(te<=U))return oe}else if(z(fe))if(U=M(fe,e("Integer"),"to_int"),z(U<0)&&(U+=this.length),z(U<0)&&(U=0),z(f)){if(te=M(f,e("Integer"),"to_int"),z(te==0))return oe;te+=U}else te=this.length;else U=0,te=this.length;if(z(U>this.length))for(ue=this.length;ue<te;ue++)oe[ue]=t;if(z(te>this.length)&&(this.length=te),z(B))for(this.length;U<te;U++)ce=B(U),oe[U]=ce;else for(this.length;U<te;U++)oe[U]=y;return oe},-1),h(o,"$first",function(R){var B=this;return R==null?B.length===0?t:B[0]:(R=M(R,e("Integer"),"to_int"),R<0&&b.$raise(e("ArgumentError"),"negative array size"),B.slice(0,R))},-1),h(o,"$flatten",function(R){var B=this;function X(Q,ne){var se=[],oe,fe,f,y;for(Q=Q.$to_a(),oe=0,fe=Q.length;oe<fe;oe++){if(f=Q[oe],!J(f,"$to_ary",!0)){se.push(f);continue}if(y=f.$to_ary(),y===t){se.push(f);continue}switch(y.$$is_array||b.$raise(e("TypeError")),y===B&&b.$raise(e("ArgumentError")),ne){case void 0:se=se.concat(X(y));break;case 0:se.push(y);break;default:ae(se,X(y,ne-1))}}return se}return R!==void 0&&(R=M(R,e("Integer"),"to_int")),X(B,R)},-1),h(o,"$flatten!",function(R){var B=this;v(B);var X=B.$flatten(R);if(B.length==X.length){for(var Q=0,ne=B.length;Q<ne&&B[Q]===X[Q];Q++);if(Q==ne)return t}return B.$replace(X),B},-1),h(o,"$freeze",function(){var R=this;return z(R["$frozen?"]())?R:L(R)});var ve;h(o,"$hash",function(){var R=this,B=ve===void 0,X=$e(),Q=R.$object_id(),ne,se,oe;if(X=W(X,10),X=W(X,R.length),B)ve=Object.create(null);else if(ve[Q])return W(X,16843009);try{for(oe in ve)if(ne=ve[oe],R["$eql?"](ne))return W(X,16843009);for(ve[Q]=R,se=0;se<R.length;se++)ne=R[se],X=W(X,ne.$hash());return X}finally{B&&(ve=void 0)}}),h(o,"$include?",function(R){for(var B=this,X=0,Q=B.length;X<Q;X++)if(B[X]["$=="](R))return!0;return!1}),h(o,"$index",function ie(R){var B=ie.$$p||t,X=this;ie.$$p=null;var Q,ne,se;if(R!=null&&B!==t&&X.$warn("warning: given block not used"),R!=null){for(Q=0,ne=X.length;Q<ne;Q++)if(X[Q]["$=="](R))return Q}else if(B!==t){for(Q=0;Q<X.length;Q++)if(se=B(X[Q]),se!==!1&&se!==t)return Q}else return X.$enum_for("index");return t},-1),h(o,"$insert",function(R,B){var X,Q,ne=this;if(X=O(arguments,1),Q=X,v(ne),R=M(R,e("Integer"),"to_int"),Q.length>0){if(R<0&&(R+=ne.length+1,R<0&&b.$raise(e("IndexError"),""+R+" is out of bounds")),R>ne.length)for(var se=ne.length;se<R;se++)ne.push(t);ne.splice.apply(ne,[R,0].concat(Q))}return ne},-2);var me=[];h(o,"$inspect",function(){var R=this,B=[],X=R.$__id__(),Q=!0;return function(){try{if(me.indexOf(X)!==-1)return Q=!1,"[...]";me.push(X);for(var ne=0,se=R.length;ne<se;ne++){var oe=R["$[]"](ne);B.push(T("Opal").$inspect(oe))}return"["+B.join(", ")+"]"}finally{Q&&me.pop()}}()}),h(o,"$intersection",function(R){var B,X,Q=this,ne=t,se=t;return B=O(arguments),X=B,X.length===0?Q.$to_a().$dup():(X=X.map(re),Q.length===0?[]:(X=p(X,"sort_by",[],"length".$to_proc()),z(Q.length<X[0].length)?p(X,"reduce",[Q],"&".$to_proc()):(ne=X.pop(),se=p(X,"reduce",[ne],"&".$to_proc()),Q["$&"](se))))},-1),h(o,"$intersect?",function(R){var B=this,X,Q,ne=new Map,se,oe;for(B.length<R.length?(X=B,Q=R):(X=R,Q=B),se=0,oe=X.length;se<oe;se++)ee(ne,X[se],!0);for(se=0,oe=Q.length;se<oe;se++)if(x(ne,Q[se]))return!0;return!1}),h(o,"$join",function(R){var B=this;if(N[","]==null&&(N[","]=t),R==null&&(R=t),z(B.length===0))return"";z(R===t)&&(R=N[","]);var X=[],Q,ne,se,oe;for(Q=0,ne=B.length;Q<ne;Q++){if(se=B[Q],J(se,"$to_str")&&(oe=se.$to_str(),oe!==t)){X.push(oe.$to_s());continue}if(J(se,"$to_ary")&&(oe=se.$to_ary(),oe===B&&b.$raise(e("ArgumentError")),oe!==t)){X.push(oe.$join(R));continue}if(J(se,"$to_s")&&(oe=se.$to_s(),oe!==t)){X.push(oe);continue}b.$raise(e("NoMethodError").$new(""+T("Opal").$inspect(B.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return R===t?X.join(""):X.join(I["$coerce_to!"](R,e("String"),"to_str").$to_s())},-1),h(o,"$keep_if",function ie(){var R=ie.$$p||t,B=this;return ie.$$p=null,R===t?p(B,"enum_for",["keep_if"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:B}):(v(B),V(B,z,R),B)}),h(o,"$last",function(R){var B=this;return R==null?B.length===0?t:B[B.length-1]:(R=M(R,e("Integer"),"to_int"),R<0&&b.$raise(e("ArgumentError"),"negative array size"),R>B.length&&(R=B.length),B.slice(B.length-R,B.length))},-1),h(o,"$length",function(){var R=this;return R.length}),h(o,"$max",function ie(R){var B=ie.$$p||t,X=this;return ie.$$p=null,p(X.$each(),"max",[R],B.$to_proc())},-1),h(o,"$min",function ie(){var R=ie.$$p||t,B=this;return ie.$$p=null,p(B.$each(),"min",[],R.$to_proc())});function be(ie,R){for(var B=R>=0?1:0;R;)B*=ie,ie--,R--;return B}return h(o,"$permutation",function ie(R){var B=ie.$$p||t,X=this,Q=t,ne=t;if(ie.$$p=null,B===t)return p(X,"enum_for",["permutation",R],function y(){var U=y.$$s==null?this:y.$$s;return be(U.length,R===void 0?U.length:R)},{$$s:X});var se,oe,fe;if(R===void 0?R=X.length:R=M(R,e("Integer"),"to_int"),!(R<0||X.length<R))if(R===0)n.yield1(B,[]);else if(R===1)for(var f=0;f<X.length;f++)n.yield1(B,[X[f]]);else Q=T("Array").$new(R),ne=T("Array").$new(X.length,!1),se=function(y,U,te,ue,ce){X=this;for(var he=0;he<X.length;he++)if(ue["$[]"](he)["$!"]())if(U[te]=he,te<y-1)ue[he]=!0,se.call(X,y,U,te+1,ue,ce),ue[he]=!1;else{fe=[];for(var pe=0;pe<U.length;pe++)fe.push(X[U[pe]]);D(ce,fe)}},B!==t?(oe=X.slice(),se.call(oe,R,Q,0,ne,B)):se.call(X,R,Q,0,ne,B);return X},-1),h(o,"$repeated_permutation",function ie(R){var B=ie.$$p||t,X=this,Q=t;if(ie.$$p=null,Q=I["$coerce_to!"](R,e("Integer"),"to_int"),B===t)return p(X,"enum_for",["repeated_permutation",Q],function se(){var oe=se.$$s==null?this:se.$$s;return z(g(Q,0))?oe.$size()["$**"](Q):0},{$$s:X});function ne(se,oe,fe){if(oe.length==se){var f=oe.slice();n.yield1(B,f);return}for(var y=0;y<fe.length;y++)oe.push(fe[y]),ne(se,oe,fe),oe.pop()}return ne(Q,[],X.slice()),X}),h(o,"$pop",function(R){var B=this;return v(B),z(R===void 0)?z(B.length===0)?t:B.pop():(R=M(R,e("Integer"),"to_int"),z(R<0)&&b.$raise(e("ArgumentError"),"negative array size"),z(B.length===0)?[]:z(R===1)?[B.pop()]:z(R>B.length)?B.splice(0,B.length):B.splice(B.length-R,B.length))},-1),h(o,"$product",function ie(R){var B=ie.$$p||t,X,Q,ne=this;ie.$$p=null,X=O(arguments),Q=X;var se=B!==t?null:[],oe=Q.length+1,fe=new Array(oe),f=new Array(oe),y=new Array(oe),U,te,ue,ce,he=1;for(y[0]=ne,U=1;U<oe;U++)y[U]=M(Q[U-1],e("Array"),"to_ary");for(U=0;U<oe;U++){if(ce=y[U].length,ce===0)return se||ne;he*=ce,he>2147483647&&b.$raise(e("RangeError"),"too big to product"),f[U]=ce,fe[U]=0}e:for(;;){for(ue=[],U=0;U<oe;U++)ue.push(y[U][fe[U]]);for(se?se.push(ue):n.yield1(B,ue),te=oe-1,fe[te]++;fe[te]===f[te];){if(fe[te]=0,--te<0)break e;fe[te]++}}return se||ne},-1),h(o,"$push",function(R){var B,X,Q=this;return B=O(arguments),X=B,v(Q),ae(Q,X),Q},-1),h(o,"$rassoc",function(R){for(var B=this,X=0,Q=B.length,ne;X<Q;X++)if(ne=B[X],ne.length&&ne[1]!==void 0&&ne[1]["$=="](R))return ne;return t}),h(o,"$reject",function ie(){var R=ie.$$p||t,B=this;if(ie.$$p=null,R===t)return p(B,"enum_for",["reject"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:B});for(var X=[],Q=0,ne;Q<B.length;Q++)ne=R(B[Q]),(ne===!1||ne===t)&&X.push(B[Q]);return X}),h(o,"$reject!",function ie(){var R=ie.$$p||t,B=this,X=t;return ie.$$p=null,R===t?p(B,"enum_for",["reject!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:B}):(v(B),X=B.$length(),p(B,"delete_if",[],R.$to_proc()),S(B.$length(),X)?t:B)}),h(o,"$replace",function(R){var B=this;return v(B),R=re(R),B.length>0&&B.splice(0,B.length),ae(B,R),B}),h(o,"$reverse",function(){var R=this;return R.slice(0).reverse()}),h(o,"$reverse!",function(){var R=this;return v(R),R.reverse()}),h(o,"$reverse_each",function ie(){var R=ie.$$p||t,B=this;if(ie.$$p=null,R===t)return p(B,"enum_for",["reverse_each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:B});for(var X=B.length-1;X>=0;X--)D(R,B[X]);return B}),h(o,"$rindex",function ie(R){var B=ie.$$p||t,X=this;ie.$$p=null;var Q,ne;if(R!=null&&B!==t&&X.$warn("warning: given block not used"),R!=null){for(Q=X.length-1;Q>=0&&!(Q>=X.length);Q--)if(X[Q]["$=="](R))return Q}else if(B!==t){for(Q=X.length-1;Q>=0&&!(Q>=X.length);Q--)if(ne=B(X[Q]),ne!==!1&&ne!==t)return Q}else if(R==null)return X.$enum_for("rindex");return t},-1),h(o,"$rotate",function(R){var B=this;R==null&&(R=1);var X,Q,ne,se;return R=M(R,e("Integer"),"to_int"),B.length===1?B.slice():B.length===0?[]:(X=B.slice(),Q=R%X.length,ne=X.slice(Q),se=X.slice(0,Q),ne.concat(se))},-1),h(o,"$rotate!",function(R){var B=this,X=t;return R==null&&(R=1),v(B),B.length===0||B.length===1?B:(R=M(R,e("Integer"),"to_int"),X=B.$rotate(R),B.$replace(X))},-1),function(ie,R){var B=Y(ie,R,"SampleRandom"),X=B.$$prototype;return X.rng=t,h(B,"$initialize",c("rng")),h(B,"$rand",function(ne){var se=this,oe=t;return oe=M(se.rng.$rand(ne),e("Integer"),"to_int"),z(oe<0)&&b.$raise(e("RangeError"),"random value must be >= 0"),z(oe<ne)||b.$raise(e("RangeError"),"random value must be less than Array size"),oe})}(o,null),h(o,"$sample",function(R,B){var X=this,Q=t,ne=t;if(z(R===void 0))return X.$at(b.$rand(X.length));if(z(B===void 0)?z(Q=I["$coerce_to?"](R,e("Hash"),"to_hash"))?(B=Q,R=t):(B=t,R=M(R,e("Integer"),"to_int")):(R=M(R,e("Integer"),"to_int"),B=M(B,e("Hash"),"to_hash")),z(R)&&z(R<0)&&b.$raise(e("ArgumentError"),"count must be greater than 0"),z(B)&&(ne=B["$[]"]("random")),ne=z(ne)&&z(ne["$respond_to?"]("rand"))?T("SampleRandom").$new(ne):b,!z(R))return X[ne.$rand(X.length)];var se,oe,fe,f,y,U,te,ue;switch(R>X.length&&(R=X.length),R){case 0:return[];case 1:return[X[ne.$rand(X.length)]];case 2:return f=ne.$rand(X.length),y=ne.$rand(X.length-1),f<=y&&y++,[X[f],X[y]];default:if(X.length/R>3){for(se=!1,oe=0,fe=T("Array").$new(R),f=1,fe[0]=ne.$rand(X.length);f<R;){for(U=ne.$rand(X.length),y=0;y<f;){for(;U===fe[y];){if(oe++,oe>100){se=!0;break}U=ne.$rand(X.length)}if(se)break;y++}if(se)break;fe[f]=U,f++}if(!se){for(f=0;f<R;)fe[f]=X[fe[f]],f++;return fe}}fe=X.slice();for(var ce=0;ce<R;ce++)te=ne.$rand(X.length-ce)+ce,ue=fe[ce],fe[ce]=fe[te],fe[te]=ue;return R===X.length?fe:fe["$[]"](0,R)}},-1),h(o,"$select",function ie(){var R=ie.$$p||t,B=this;if(ie.$$p=null,R===t)return p(B,"enum_for",["select"],function oe(){var fe=oe.$$s==null?this:oe.$$s;return fe.$size()},{$$s:B});for(var X=[],Q=0,ne,se;Q<B.length;Q++)ne=B[Q],se=D(R,ne),z(se)&&X.push(ne);return X}),h(o,"$select!",function ie(){var R=ie.$$p||t,B=this;if(ie.$$p=null,R===t)return p(B,"enum_for",["select!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:B});v(B);var X=B.length;return p(B,"keep_if",[],R.$to_proc()),B.length===X?t:B}),h(o,"$shift",function(R){var B=this;return v(B),z(R===void 0)?z(B.length===0)?t:K(B):(R=M(R,e("Integer"),"to_int"),z(R<0)&&b.$raise(e("ArgumentError"),"negative array size"),z(B.length===0)?[]:B.splice(0,R))},-1),h(o,"$shuffle",function(R){var B=this;return B.$dup().$to_a()["$shuffle!"](R)},-1),h(o,"$shuffle!",function(R){var B=this;v(B);var X,Q=B.length,ne,se;for(R!==void 0&&(R=I["$coerce_to?"](R,e("Hash"),"to_hash"),R!==t&&(R=R["$[]"]("random"),R!==t&&R["$respond_to?"]("rand")&&(X=R)));Q;)X?(ne=X.$rand(Q).$to_int(),ne<0&&b.$raise(e("RangeError"),"random number too small "+ne),ne>=Q&&b.$raise(e("RangeError"),"random number too big "+ne)):ne=B.$rand(Q),se=B[--Q],B[Q]=B[ne],B[ne]=se;return B},-1),h(o,"$slice!",function(R,B){var X=this,Q=t,ne=t,se=t,oe=t,fe=t;if(v(X),Q=t,z(B===void 0))if(j(e("Range"),R)){ne=R,Q=X["$[]"](ne),se=ne.begin===t?0:M(ne.begin,e("Integer"),"to_int"),oe=ne.end===t?-1:M(ne.end,e("Integer"),"to_int"),se<0&&(se+=X.length),oe<0?oe+=X.length:oe>=X.length&&(oe=X.length-1,ne.excl&&(oe+=1));var f=oe-se;ne.excl&&ne.end!==t?oe-=1:f+=1,se<X.length&&se>=0&&oe<X.length&&oe>=0&&f>0&&X.splice(se,f)}else{if(fe=M(R,e("Integer"),"to_int"),fe<0&&(fe+=X.length),fe<0||fe>=X.length)return t;Q=X[fe],fe===0?X.shift():X.splice(fe,1)}else{if(fe=M(R,e("Integer"),"to_int"),B=M(B,e("Integer"),"to_int"),B<0)return t;Q=X["$[]"](fe,B),fe<0&&(fe+=X.length),fe+B>X.length&&(B=X.length-fe),fe<X.length&&fe>=0&&X.splice(fe,B)}return Q},-2),h(o,"$sort",function ie(){var R=ie.$$p||t,B=this;return ie.$$p=null,z(B.length>1)?(R===t&&(R=function(X,Q){return X["$<=>"](Q)}),B.slice().sort(function(X,Q){var ne=R(X,Q);return ne===t&&b.$raise(e("ArgumentError"),"comparison of "+X.$inspect()+" with "+Q.$inspect()+" failed"),A(ne,0)?1:l(ne,0)?-1:0})):B}),h(o,"$sort!",function ie(){var R=ie.$$p||t,B=this;ie.$$p=null,v(B);var X;R!==t?X=p(B.slice(),"sort",[],R.$to_proc()):X=B.slice().$sort(),B.length=0;for(var Q=0,ne=X.length;Q<ne;Q++)B.push(X[Q]);return B}),h(o,"$sort_by!",function ie(){var R=ie.$$p||t,B=this;return ie.$$p=null,R===t?p(B,"enum_for",["sort_by!"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:B}):(v(B),B.$replace(p(B,"sort_by",[],R.$to_proc())))}),h(o,"$take",function(R){var B=this;return R<0&&b.$raise(e("ArgumentError")),B.slice(0,R)}),h(o,"$take_while",function ie(){var R=ie.$$p||t,B=this;ie.$$p=null;for(var X=[],Q=0,ne,se;Q<B.length;Q++){if(ne=B[Q],se=R(ne),se===!1||se===t)return X;X.push(ne)}return X}),h(o,"$to_a",function(){var R=this;return R.$$class===n.Array?R:n.Array.$new(R)}),h(o,"$to_ary",q),h(o,"$to_h",function ie(){var R=ie.$$p||t,B=this,X=t;ie.$$p=null,X=B,R!==t&&(X=p(X,"map",[],R.$to_proc()));var Q,ne=X.length,se,oe,fe,f=new Map;for(Q=0;Q<ne;Q++)se=I["$coerce_to?"](X[Q],e("Array"),"to_ary"),se.$$is_array||b.$raise(e("TypeError"),"wrong element type "+X[Q].$class()+" at "+Q+" (expected array)"),se.length!==2&&b.$raise(e("ArgumentError"),"element has wrong array length at "+Q+" (expected 2, was "+se.$length()+")"),oe=se[0],fe=se[1],ee(f,oe,fe);return f}),h(o,"$transpose",function(){var R=this,B=t,X=t;return z(R["$empty?"]())?[]:(B=[],X=t,p(R,"each",[],function(ne){var se=t;return ne==null&&(ne=t),ne=re(ne),X=z(se=X)?se:ne.length,G(ne.length,X)&&b.$raise(e("IndexError"),"element size differs ("+ne.length+" should be "+X+")"),p(ne.length,"times",[],function(fe){var f,y=t;return fe==null&&(fe=t),y=z(se=B["$[]"](fe))?se:(f=[fe,[]],p(B,"[]=",f),f[f.length-1]),y["$<<"](ne.$at(fe))})}),B)}),h(o,"$union",function(R){var B,X,Q=this;return B=O(arguments),X=B,p(X,"reduce",[Q.$uniq()],function(se,oe){return se==null&&(se=t),oe==null&&(oe=t),se["$|"](oe)})},-1),h(o,"$uniq",function ie(){var R=ie.$$p||t,B=this;ie.$$p=null;var X=new Map,Q,ne,se,oe;if(R===t)for(Q=0,ne=B.length;Q<ne;Q++)se=B[Q],x(X,se)===void 0&&ee(X,se,se);else for(Q=0;Q<B.length;Q++)se=B[Q],oe=D(R,se),x(X,oe)===void 0&&ee(X,oe,se);return X.$values()}),h(o,"$uniq!",function ie(){var R=ie.$$p||t,B=this;ie.$$p=null,v(B);var X=new Map,Q,ne,se,oe=[];for(Q=0;Q<B.length;Q++)ne=B[Q],se=R===t?ne:D(R,ne),x(X,se)===void 0?ee(X,se,ne):oe.push(Q);for(Q=oe.length-1;Q>=0;Q--)B.splice(oe[Q],1);return oe.length===0?t:B}),h(o,"$unshift",function(R){var B,X,Q=this;B=O(arguments),X=B,v(Q);var ne=Q.length,se=X.length;if(se==0)return Q;for(var oe=ne-se,fe=0;fe<se;fe++)Q.push(Q[oe+fe]);for(var f=ne-1;f-se>=0;)Q[f]=Q[f-se],f--;for(var y=0;y<se;y++)Q[y]=X[y];return Q},-1),h(o,"$values_at",function(R){var B,X,Q=this,ne=t;return B=O(arguments),X=B,ne=[],p(X,"each",[],function se(oe){var fe=se.$$s==null?this:se.$$s,f=t,y=t,U=t;return oe==null&&(oe=t),z(oe["$is_a?"](e("Range")))?(f=oe.$end()===t?-1:M(oe.$end(),e("Integer"),"to_int"),y=oe.$begin()===t?0:M(oe.$begin(),e("Integer"),"to_int"),y<0?(y=y+fe.length,t):(f<0&&(f=f+fe.length),oe["$exclude_end?"]()&&oe.$end()!==t&&f--,f<y?t:p(y,"upto",[f],function te(ue){var ce=te.$$s==null?this:te.$$s;return ue==null&&(ue=t),ne["$<<"](ce.$at(ue))},{$$s:fe}))):(U=M(oe,e("Integer"),"to_int"),ne["$<<"](fe.$at(U)))},{$$s:Q}),ne},-1),h(o,"$zip",function ie(R){var B=ie.$$p||t,X,Q,ne=this,se=t;ie.$$p=null,X=O(arguments),Q=X;var oe=[],fe=ne.length,f,y,U,te,ue;for(te=0,ue=Q.length;te<ue;te++)if(y=Q[te],!y.$$is_array){if(y.$$is_range||y.$$is_enumerator){Q[te]=y.$take(fe);continue}Q[te]=(z(se=I["$coerce_to?"](y,e("Array"),"to_ary"))?se:I["$coerce_to!"](y,e("Enumerator"),"to_enum","each")).$to_a()}for(U=0;U<fe;U++){for(f=[ne[U]],te=0,ue=Q.length;te<ue;te++)y=Q[te][U],y==null&&(y=t),f[te+1]=y;oe[U]=f}if(B!==t){for(U=0;U<fe;U++)n.yield1(B,oe[U]);return t}return oe},-1),H(o,"$inherited",function(R){R.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),h(o,"$instance_variables",function ie(){var R=ie.$$p||t,B=this;return ie.$$p=null,p(k(B,F(B,"instance_variables",ie,!1,!0),"instance_variables",[],R),"reject",[],function(Q){var ne=t;return Q==null&&(Q=t),z(ne=/^@\d+$/.test(Q))?ne:Q["$=="]("@length")})}),h(o,"$pack",function(R){return O(arguments),b.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),_(o,"append","push"),_(o,"filter","select"),_(o,"filter!","select!"),_(o,"map","collect"),_(o,"map!","collect!"),_(o,"prepend","unshift"),_(o,"size","length"),_(o,"slice","[]"),_(o,"to_s","inspect"),I.$pristine(o.$singleton_class(),"allocate"),I.$pristine(o,"copy_instance_variables","initialize_dup")}("::",Array,$)};Opal.modules["corelib/hash"]=function(n){var z=n.yield1,w=n.hash_clone,D=n.hash_delete,x=n.hash_each,ee=n.hash_get,Z=n.hash_put,M=n.deny_frozen_access,J=n.freeze,v=n.opal32_init,L=n.opal32_add,$e=n.klass,W=n.slice,Y=n.Opal,O=n.Kernel,H=n.defs,b=n.def,h=n.send,I=n.rb_ge,j=n.rb_gt,k=n.truthy,F=n.to_a,p=n.return_self,A=n.not,P=n.alias,S=n.top,E=[],u=n.nil,d=n.$$$;return n.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),S.$require("corelib/enumerable"),function(N,g,c){var l=$e(N,g,"Hash"),q=[l].concat(c),G=n.$r(q);l.$include(d("Enumerable")),l.$$prototype.$$is_hash=!0,H(l,"$[]",function(t){var e,r,i=this;e=W(arguments),r=e;var a,o=r.length,m,T;if(o===1){if(a=Y["$coerce_to?"](r["$[]"](0),d("Hash"),"to_hash"),a!==u)return i.$allocate()["$merge!"](a);for(r=Y["$coerce_to?"](r["$[]"](0),d("Array"),"to_ary"),r===u&&O.$raise(d("ArgumentError"),"odd number of arguments for Hash"),o=r.length,a=i.$allocate(),T=0;T<o;T++)m=r[T],m.$$is_array||O.$raise(d("ArgumentError"),"invalid element "+m.$inspect()+" for Hash"),m.length===1?a.$store(m[0],u):m.length===2?a.$store(m[0],m[1]):O.$raise(d("ArgumentError"),"invalid number of elements ("+m.length+" for "+m.$inspect()+"), must be 1..2");return a}for(o%2!==0&&O.$raise(d("ArgumentError"),"odd number of arguments for Hash"),a=i.$allocate(),T=0;T<o;T+=2)a.$store(r[T],r[T+1]);return a},-1),H(l,"$allocate",function(){var t=this,e=new t.$$constructor;return e.$$none=u,e.$$proc=u,e}),H(l,"$try_convert",function(t){return Y["$coerce_to?"](t,d("Hash"),"to_hash")}),b(l,"$initialize",function $(t){var e=$.$$p||u,r=this;return $.$$p=null,M(r),t!==void 0&&e!==u&&O.$raise(d("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=t===void 0?u:t,r.$$proc=e,r},-1),b(l,"$==",function(t){var e=this;return e===t?!0:!t.$$is_hash||e.size!==t.size?!1:x(e,!0,function(r,i){var a=ee(t,r);return a===void 0||!i["$eql?"](a)?[!0,!1]:[!1,!0]})}),b(l,"$>=",function(t){var e=this,r=u;return t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),e.size<t.size?!1:(r=!0,h(t,"each",[],function i(a,o){var m=i.$$s==null?this:i.$$s,T=u;if(a==null&&(a=u),o==null&&(o=u),T=m.$fetch(a,null),T==null||T!==o){r=!1;return}},{$$s:e}),r)}),b(l,"$>",function(t){var e=this;return t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),e.size<=t.size?!1:I(e,t)}),b(l,"$<",function(t){var e=this;return t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),j(t,e)}),b(l,"$<=",function(t){var e=this;return t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),I(t,e)}),b(l,"$[]",function(t){var e=this,r=ee(e,t);return r!==void 0?r:e.$default(t)}),b(l,"$[]=",function(t,e){var r=this;return M(r),Z(r,t,e),e}),b(l,"$assoc",function(t){var e=this;return x(e,u,function(r,i){return r["$=="](t)?[!0,[r,i]]:[!1,u]})}),b(l,"$clear",function(){var t=this;return M(t),t.clear(),t.$$keys&&t.$$keys.clear(),t}),b(l,"$clone",function(){var t=this,e=t.$class().$new();return w(t,e),t["$frozen?"]()?e.$freeze():e}),b(l,"$compact",function(){var t=this,e=new Map;return x(t,e,function(r,i){return i!==u&&Z(e,r,i),[!1,e]})}),b(l,"$compact!",function(){var t=this;M(t);var e=u;return x(t,e,function(r,i){return i===u&&(D(t,r),e=t),[!1,e]})}),b(l,"$compare_by_identity",function(){var t=this;return M(t),t.$$by_identity||(t.$$by_identity=!0,t.size!==0&&n.hash_rehash(t)),t}),b(l,"$compare_by_identity?",function(){var t=this;return t.$$by_identity===!0}),b(l,"$default",function(t){var e=this;return t!==void 0&&e.$$proc!==u&&e.$$proc!==void 0?e.$$proc.$call(e,t):e.$$none===void 0?u:e.$$none},-1),b(l,"$default=",function(t){var e=this;return M(e),e.$$proc=u,e.$$none=t,t}),b(l,"$default_proc",function(){var t=this;return t.$$proc!==void 0?t.$$proc:u}),b(l,"$default_proc=",function(t){var e=this;M(e);var r=t;return r!==u&&(r=Y["$coerce_to!"](r,d("Proc"),"to_proc"),r["$lambda?"]()&&r.$arity().$abs()!==2&&O.$raise(d("TypeError"),"default_proc takes two arguments")),e.$$none=u,e.$$proc=r,t}),b(l,"$delete",function $(t){var e=$.$$p||u,r=this;$.$$p=null,M(r);var i=D(r,t);return i!==void 0?i:e!==u?n.yield1(e,t):u}),b(l,"$delete_if",function $(){var t=$.$$p||u,e=this;return $.$$p=null,k(t)?(M(e),x(e,e,function(r,i){var a=t(r,i);return a!==!1&&a!==u&&D(e,r),[!1,e]})):h(e,"enum_for",["delete_if"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),b(l,"$dig",function(t,e){var r,i,a=this,o=u;return r=W(arguments,1),i=r,o=a["$[]"](t),o===u||i.length===0?o:(k(o["$respond_to?"]("dig"))||O.$raise(d("TypeError"),""+o.$class()+" does not have #dig method"),h(o,"dig",F(i)))},-2),b(l,"$dup",function(){var t=this;return w(t,t.$class().$new())}),b(l,"$each",function $(){var t=$.$$p||u,e=this;return $.$$p=null,k(t)?x(e,e,function(r,i){return z(t,[r,i]),[!1,e]}):h(e,"enum_for",["each"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),b(l,"$each_key",function $(){var t=$.$$p||u,e=this;return $.$$p=null,k(t)?x(e,e,function(r,i){return t(r),[!1,e]}):h(e,"enum_for",["each_key"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),b(l,"$each_value",function $(){var t=$.$$p||u,e=this;return $.$$p=null,k(t)?x(e,e,function(r,i){return t(i),[!1,e]}):h(e,"enum_for",["each_value"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),b(l,"$empty?",function(){var t=this;return t.size===0}),b(l,"$except",function(t){var e,r,i=this;return e=W(arguments),r=e,h(i.$dup(),"except!",F(r))},-1),b(l,"$except!",function(t){var e,r,i=this;return e=W(arguments),r=e,h(r,"each",[],function a(o){var m=a.$$s==null?this:a.$$s;return o==null&&(o=u),m.$delete(o)},{$$s:i}),i},-1),b(l,"$fetch",function $(t,e){var r=$.$$p||u,i=this;$.$$p=null;var a=ee(i,t);return a!==void 0?a:r!==u?r(t):e!==void 0?e:O.$raise(d("KeyError").$new("key not found: "+t.$inspect(),new Map([["key",t],["receiver",i]])))},-2),b(l,"$fetch_values",function $(t){var e=$.$$p||u,r,i,a=this;return $.$$p=null,r=W(arguments),i=r,h(i,"map",[],function o(m){var T=o.$$s==null?this:o.$$s;return m==null&&(m=u),h(T,"fetch",[m],e.$to_proc())},{$$s:a})},-1),b(l,"$flatten",function(t){var e=this;t==null&&(t=1),t=Y["$coerce_to!"](t,d("Integer"),"to_int");var r=[];return x(e,r,function(i,a){return r.push(i),a.$$is_array?t===1?(r.push(a),[!1,r]):(r=r.concat(a.$flatten(t-2)),[!1,r]):(r.push(a),[!1,r])})},-1),b(l,"$freeze",function(){var t=this;return k(t["$frozen?"]())?t:J(t)}),b(l,"$has_key?",function(t){var e=this;return ee(e,t)!==void 0}),b(l,"$has_value?",function(t){var e=this;return x(e,!1,function(r,i){return i["$=="](t)?[!0,!0]:[!1,!1]})});var _;b(l,"$hash",function(){var t=this,e=_===void 0,r=t.$object_id(),i=v(),a,o,m,T=t.size,K=new Int32Array(T);if(i=L(i,4),i=L(i,T),e)_=Object.create(null);else if(_[r])return L(i,16843009);try{for(a in _)if(o=_[a],t["$eql?"](o))return L(i,16843009);for(_[r]=t,m=0,x(t,!1,function(C,V){return K[m]=[1883326802,C,V].$hash(),m++,[!1,!1]}),K=K.sort(),m=0;m<K.length;m++)i=L(i,K[m]);return i}finally{e&&(_=void 0)}}),b(l,"$index",function(t){var e=this;return x(e,u,function(r,i){return i["$=="](t)?[!0,r]:[!1,u]})}),b(l,"$indexes",function(t){var e,r,i=this;e=W(arguments),r=e;for(var a=[],o=0,m=r.length,T,K;o<m;o++){if(T=r[o],K=ee(i,T),K===void 0){a.push(i.$default());continue}a.push(K)}return a},-1);var s;return b(l,"$inspect",function(){var t=this,e=s===void 0,r=t.$object_id(),i=[];return function(){try{if(e&&(s={}),s.hasOwnProperty(r))return"{...}";return s[r]=!0,x(t,!1,function(a,o){return o=G("Opal").$inspect(o),a=G("Opal").$inspect(a),i.push(a+"=>"+o),[!1,!1]}),"{"+i.join(", ")+"}";return u}finally{e&&(s=void 0)}}()}),b(l,"$invert",function(){var t=this,e=new Map;return x(t,e,function(r,i){return Z(e,i,r),[!1,e]})}),b(l,"$keep_if",function $(){var t=$.$$p||u,e=this;return $.$$p=null,k(t)?(M(e),x(e,e,function(r,i){var a=t(r,i);return(a===!1||a===u)&&D(e,r),[!1,e]})):h(e,"enum_for",["keep_if"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),b(l,"$keys",function(){var t=this;return Array.from(t.keys())}),b(l,"$length",function(){var t=this;return t.size}),b(l,"$merge",function $(t){var e=$.$$p||u,r,i,a=this;return $.$$p=null,r=W(arguments),i=r,h(a.$dup(),"merge!",F(i),e.$to_proc())},-1),b(l,"$merge!",function $(t){var e=$.$$p||u,r,i,a=this;$.$$p=null,r=W(arguments),i=r,M(a);var o,m;for(o=0;o<i.length;++o)m=Y["$coerce_to!"](i[o],d("Hash"),"to_hash"),e===u?x(m,!1,function(T,K){return Z(a,T,K),[!1,!1]}):x(m,!1,function(T,K){var C=ee(a,T);return C===void 0?(Z(a,T,K),[!1,!1]):(Z(a,T,e(T,C,K)),[!1,!1])});return a},-1),b(l,"$rassoc",function(t){var e=this;return x(e,u,function(r,i){return i["$=="](t)?[!0,[r,i]]:[!1,u]})}),b(l,"$rehash",function(){var t=this;return M(t),n.hash_rehash(t)}),b(l,"$reject",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!k(t))return h(e,"enum_for",["reject"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var r=new Map;return x(e,r,function(i,a){var o=t(i,a);return(o===!1||o===u)&&Z(r,i,a),[!1,r]})}),b(l,"$reject!",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!k(t))return h(e,"enum_for",["reject!"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});M(e);var r=u;return x(e,r,function(i,a){var o=t(i,a);return o!==!1&&o!==u&&(D(e,i),r=e),[!1,r]})}),b(l,"$replace",function(t){var e=this;return M(e),t=Y["$coerce_to!"](t,d("Hash"),"to_hash"),e.$clear(),x(t,!1,function(r,i){return Z(e,r,i),[!1,!1]}),k(t.$default_proc())?e["$default_proc="](t.$default_proc()):e["$default="](t.$default()),e}),b(l,"$select",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!k(t))return h(e,"enum_for",["select"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var r=new Map;return x(e,r,function(i,a){var o=t(i,a);return o!==!1&&o!==u&&Z(r,i,a),[!1,r]})}),b(l,"$select!",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!k(t))return h(e,"enum_for",["select!"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});M(e);var r=u;return x(e,r,function(i,a){var o=t(i,a);return(o===!1||o===u)&&(D(e,i),r=e),[!1,r]})}),b(l,"$shift",function(){var t=this;return M(t),x(t,u,function(e,r){return[!0,[e,D(t,e)]]})}),b(l,"$slice",function(t){var e,r,i=this;e=W(arguments),r=e;for(var a=new Map,o=0,m=r.length;o<m;o++){var T=r[o],K=ee(i,T);K!==void 0&&Z(a,T,K)}return a},-1),b(l,"$to_a",function(){var t=this,e=[];return x(t,e,function(r,i){return e.push([r,i]),[!1,e]})}),b(l,"$to_h",function $(){var t=$.$$p||u,e=this;if($.$$p=null,t!==u)return h(e,"map",[],t.$to_proc()).$to_h();if(e.$$class===n.Hash)return e;var r=new Map;return w(e,r),r}),b(l,"$to_hash",p),b(l,"$to_proc",function(){var t=this;return h(t,"proc",[],function e(r){var i=e.$$s==null?this:e.$$s;return r==null&&O.$raise(d("ArgumentError"),"no key given"),i["$[]"](r)},{$$arity:-1,$$s:t})}),b(l,"$transform_keys",function $(t){var e=$.$$p||u,r=this;if($.$$p=null,t==null&&(t=u),A(e)&&A(t))return h(r,"enum_for",["transform_keys"],function a(){var o=a.$$s==null?this:a.$$s;return o.$size()},{$$s:r});var i=new Map;return x(r,i,function(a,o){var m;return t!==u&&(m=ee(t,a)),m===void 0&&e&&e!==u&&(m=e(a)),m===void 0&&(m=a),Z(i,m,o),[!1,i]})},-1),b(l,"$transform_keys!",function $(t){var e=$.$$p||u,r=this;if($.$$p=null,t==null&&(t=u),A(e)&&A(t))return h(r,"enum_for",["transform_keys!"],function a(){var o=a.$$s==null?this:a.$$s;return o.$size()},{$$s:r});M(r);var i=new Map;return x(r,r,function(a,o){var m;return t!==u&&(m=ee(t,a)),m===void 0&&e&&e!==u&&(m=e(a)),m===void 0?[!1,r]:(ee(i,a)||D(r,a),Z(r,m,o),Z(i,m,!0),[!1,r])})},-1),b(l,"$transform_values",function $(){var t=$.$$p||u,e=this;if($.$$p=null,!k(t))return h(e,"enum_for",["transform_values"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var r=new Map;return x(e,r,function(i,a){return Z(r,i,t(a)),[!1,r]})}),b(l,"$transform_values!",function $(){var t=$.$$p||u,e=this;return $.$$p=null,k(t)?(M(e),x(e,e,function(r,i){return Z(e,r,t(i)),[!1,e]})):h(e,"enum_for",["transform_values!"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),b(l,"$values",function(){var t=this;return Array.from(t.values())}),P(l,"each_pair","each"),P(l,"eql?","=="),P(l,"filter","select"),P(l,"filter!","select!"),P(l,"include?","has_key?"),P(l,"indices","indexes"),P(l,"key","index"),P(l,"key?","has_key?"),P(l,"member?","has_key?"),P(l,"size","length"),P(l,"store","[]="),P(l,"to_s","inspect"),P(l,"update","merge!"),P(l,"value?","has_value?"),P(l,"values_at","indexes")}("::",Map,E)};Opal.modules["corelib/number"]=function(n){var z=n.klass,w=n.Opal,D=n.Kernel,x=n.def,ee=n.eqeqeq,Z=n.truthy,M=n.rb_gt,J=n.not,v=n.rb_lt,L=n.alias,$e=n.send2,W=n.find_super,Y=n.send,O=n.rb_plus,H=n.rb_minus,b=n.eqeq,h=n.return_self,I=n.rb_divide,j=n.to_ary,k=n.rb_times,F=n.rb_le,p=n.rb_ge,A=n.return_val,P=n.const_set,S=n.top,E=[],u=n.nil,d=n.$$$;return n.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),S.$require("corelib/numeric"),function(N,g,c){var l=z(N,g,"Number");w.$bridge(Number,l),n.prop(l.$$prototype,"$$is_number",!0),l.$$is_number_class=!0;var q=new Map;(function(e,r){return x(e,"$allocate",function(){var a=this;return D.$raise(d("TypeError"),"allocator undefined for "+a.$name())}),n.udef(e,"$new"),u})(n.get_singleton_class(l)),x(l,"$coerce",function(r){var i=this;if(r===u)D.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float");else{if(r.$$is_string)return[D.$Float(r),i];if(r["$respond_to?"]("to_f"))return[w["$coerce_to!"](r,d("Float"),"to_f"),i];if(r.$$is_number)return[r,i];D.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float")}}),x(l,"$__id__",function(){var r=this;if(r|r===0)return r*2+1;if(q.has(r))return q.get(r);var i=n.uid();return q.set(r,i),i}),x(l,"$hash",function(){var r=this;return r|r===0?r.$__id__():r.toString().$hash()}),x(l,"$+",function(r){var i=this;return r.$$is_number?i+r:i.$__coerced__("+",r)}),x(l,"$-",function(r){var i=this;return r.$$is_number?i-r:i.$__coerced__("-",r)}),x(l,"$*",function(r){var i=this;return r.$$is_number?i*r:i.$__coerced__("*",r)}),x(l,"$/",function(r){var i=this;return r.$$is_number?i/r:i.$__coerced__("/",r)}),x(l,"$%",function(r){var i=this;if(r.$$is_number){if(r==-1/0)return r;if(r==0)D.$raise(d("ZeroDivisionError"),"divided by 0");else return r<0||i<0?(i%r+r)%r:i%r}else return i.$__coerced__("%",r)}),x(l,"$&",function(r){var i=this;return r.$$is_number?i&r:i.$__coerced__("&",r)}),x(l,"$|",function(r){var i=this;return r.$$is_number?i|r:i.$__coerced__("|",r)}),x(l,"$^",function(r){var i=this;return r.$$is_number?i^r:i.$__coerced__("^",r)}),x(l,"$<",function(r){var i=this;return r.$$is_number?i<r:i.$__coerced__("<",r)}),x(l,"$<=",function(r){var i=this;return r.$$is_number?i<=r:i.$__coerced__("<=",r)}),x(l,"$>",function(r){var i=this;return r.$$is_number?i>r:i.$__coerced__(">",r)}),x(l,"$>=",function(r){var i=this;return r.$$is_number?i>=r:i.$__coerced__(">=",r)});var G=function(e,r){return r.$$is_number?isNaN(e)||isNaN(r)?u:e>r?1:e<r?-1:0:e.$__coerced__("<=>",r)};x(l,"$<=>",function(r){var i=this;try{return G(i,r)}catch(a){if(n.rescue(a,[d("ArgumentError")]))try{return u}finally{n.pop_exception(a)}else throw a}}),x(l,"$<<",function(r){var i=this;return r=w["$coerce_to!"](r,d("Integer"),"to_int"),r>0?i<<r:i>>-r}),x(l,"$>>",function(r){var i=this;return r=w["$coerce_to!"](r,d("Integer"),"to_int"),r>0?i>>r:i<<-r}),x(l,"$[]",function(r){var i=this;return r=w["$coerce_to!"](r,d("Integer"),"to_int"),r<0?0:r>=32?i<0?1:0:i>>r&1}),x(l,"$+@",function(){var r=this;return+r}),x(l,"$-@",function(){var r=this;return-r}),x(l,"$~",function(){var r=this;return~r}),x(l,"$**",function(r){var i=this;return ee(d("Integer"),r)?J(d("Integer")["$==="](i))||Z(M(r,0))?Math.pow(i,r):d("Rational").$new(i,1)["$**"](r):Z(v(i,0))&&(ee(d("Float"),r)||ee(d("Rational"),r))?d("Complex").$new(i,0)["$**"](r.$to_f()):Z(r.$$is_number!=null)?Math.pow(i,r):i.$__coerced__("**",r)}),x(l,"$==",function(r){var i=this;return r.$$is_number?i.valueOf()===r.valueOf():r["$respond_to?"]("==")?r["$=="](i):!1}),L(l,"===","=="),x(l,"$abs",function(){var r=this;return Math.abs(r)}),x(l,"$abs2",function(){var r=this;return Math.abs(r*r)}),x(l,"$allbits?",function(r){var i=this;return r=w["$coerce_to!"](r,d("Integer"),"to_int"),(i&r)==r}),x(l,"$anybits?",function(r){var i=this;return r=w["$coerce_to!"](r,d("Integer"),"to_int"),(i&r)!==0}),x(l,"$angle",function(){var r=this;return Z(r["$nan?"]())?r:r==0?1/r>0?0:Math.PI:r<0?Math.PI:0}),x(l,"$bit_length",function(){var r=this;if(ee(d("Integer"),r)||D.$raise(d("NoMethodError").$new("undefined method `bit_length` for "+r+":Float","bit_length")),r===0||r===-1)return 0;for(var i=0,a=r<0?~r:r;a!=0;)i+=1,a>>>=1;return i}),x(l,"$ceil",function(r){var i=this;r==null&&(r=0);var a=i.$to_f();if(a%1===0&&r>=0)return a;var o=Math.pow(10,r),m=Math.ceil(a*o)/o;return a%1===0&&(m=Math.round(m)),m},-1),x(l,"$chr",function(r){var i=this;return n.enc(String.fromCharCode(i),r||"BINARY")},-1),x(l,"$denominator",function e(){var r=e.$$p||u,i=this;return e.$$p=null,Z(i["$nan?"]())||Z(i["$infinite?"]())?1:$e(i,W(i,"denominator",e,!1,!0),"denominator",[],r)}),x(l,"$downto",function e(r){var i=e.$$p||u,a=this;if(e.$$p=null,i===u)return Y(a,"enum_for",["downto",r],function m(){var T=m.$$s==null?this:m.$$s;return ee(d("Numeric"),r)||D.$raise(d("ArgumentError"),"comparison of "+T.$class()+" with "+r.$class()+" failed"),Z(M(r,T))?0:O(H(T,r),1)},{$$s:a});r.$$is_number||D.$raise(d("ArgumentError"),"comparison of "+a.$class()+" with "+r.$class()+" failed");for(var o=a;o>=r;o--)i(o);return a}),x(l,"$equal?",function(r){var i=this,a=u;return Z(a=i["$=="](r))?a:isNaN(i)&&isNaN(r)}),x(l,"$even?",function(){var r=this;return r%2===0}),x(l,"$floor",function(r){var i=this;r==null&&(r=0);var a=i.$to_f();if(a%1===0&&r>=0)return a;var o=Math.pow(10,r),m=Math.floor(a*o)/o;return a%1===0&&(m=Math.round(m)),m},-1),x(l,"$gcd",function(r){var i=this;ee(d("Integer"),r)||D.$raise(d("TypeError"),"not an integer");for(var a=Math.abs(i),o=Math.abs(r);a>0;){var m=a;a=o%a,o=m}return o}),x(l,"$gcdlcm",function(r){var i=this;return[i.$gcd(r),i.$lcm(r)]}),x(l,"$integer?",function(){var r=this;return r%1===0}),x(l,"$is_a?",function e(r){var i=e.$$p||u,a=this;return e.$$p=null,b(r,d("Integer"))&&ee(d("Integer"),a)||b(r,d("Integer"))&&ee(d("Integer"),a)||b(r,d("Float"))&&ee(d("Float"),a)?!0:$e(a,W(a,"is_a?",e,!1,!0),"is_a?",[r],i)}),x(l,"$instance_of?",function e(r){var i=e.$$p||u,a=this;return e.$$p=null,b(r,d("Integer"))&&ee(d("Integer"),a)||b(r,d("Integer"))&&ee(d("Integer"),a)||b(r,d("Float"))&&ee(d("Float"),a)?!0:$e(a,W(a,"instance_of?",e,!1,!0),"instance_of?",[r],i)}),x(l,"$lcm",function(r){var i=this;return ee(d("Integer"),r)||D.$raise(d("TypeError"),"not an integer"),i==0||r==0?0:Math.abs(i*r/i.$gcd(r))}),x(l,"$next",function(){var r=this;return r+1}),x(l,"$nobits?",function(r){var i=this;return r=w["$coerce_to!"](r,d("Integer"),"to_int"),(i&r)==0}),x(l,"$nonzero?",function(){var r=this;return r==0?u:r}),x(l,"$numerator",function e(){var r=e.$$p||u,i=this;return e.$$p=null,Z(i["$nan?"]())||Z(i["$infinite?"]())?i:$e(i,W(i,"numerator",e,!1,!0),"numerator",[],r)}),x(l,"$odd?",function(){var r=this;return r%2!==0}),x(l,"$ord",h),x(l,"$pow",function(r,i){var a=this;return a==0&&D.$raise(d("ZeroDivisionError"),"divided by 0"),i===void 0?a["$**"](r):(d("Integer")["$==="](r)||D.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),r<0&&D.$raise(d("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),d("Integer")["$==="](i)||D.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),i===0&&D.$raise(d("ZeroDivisionError"),"divided by 0"),a["$**"](r)["$%"](i))},-2),x(l,"$pred",function(){var r=this;return r-1}),x(l,"$quo",function e(r){var i=e.$$p||u,a=this;return e.$$p=null,ee(d("Integer"),a)?$e(a,W(a,"quo",e,!1,!0),"quo",[r],i):I(a,r)}),x(l,"$rationalize",function(r){var i,a,o=this,m=u,T=u;return arguments.length>1&&D.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),ee(d("Integer"),o)?d("Rational").$new(o,1):Z(o["$infinite?"]())?D.$raise(d("FloatDomainError"),"Infinity"):Z(o["$nan?"]())?D.$raise(d("FloatDomainError"),"NaN"):Z(r==null)?(a=d("Math").$frexp(o),i=j(a),m=i[0]==null?u:i[0],T=i[1]==null?u:i[1],m=d("Math").$ldexp(m,d(d("Float"),"MANT_DIG")).$to_i(),T=H(T,d(d("Float"),"MANT_DIG")),d("Rational").$new(k(2,m),1["$<<"](H(1,T))).$rationalize(d("Rational").$new(1,1["$<<"](H(1,T))))):o.$to_r().$rationalize(r)},-1),x(l,"$remainder",function(r){var i=this;return H(i,k(r,I(i,r).$truncate()))}),x(l,"$round",function(r){var i,a,o=this,m=u;if(ee(d("Integer"),o)){if(Z(r==null)||(ee(d("Float"),r)&&Z(r["$infinite?"]())&&D.$raise(d("RangeError"),"Infinity"),r=w["$coerce_to!"](r,d("Integer"),"to_int"),Z(v(r,d(d("Integer"),"MIN")))&&D.$raise(d("RangeError"),"out of bounds"),Z(r>=0)))return o;if(r=r["$-@"](),.415241*r-.125>o.$size())return 0;var T=Math.pow(10,r),K=Math.floor((Math.abs(o)+T/2)/T)*T;return o<0?-K:K}else{if(Z(o["$nan?"]())&&Z(r==null)&&D.$raise(d("FloatDomainError"),"NaN"),r=w["$coerce_to!"](r||0,d("Integer"),"to_int"),Z(F(r,0)))Z(o["$nan?"]())?D.$raise(d("RangeError"),"NaN"):Z(o["$infinite?"]())&&D.$raise(d("FloatDomainError"),"Infinity");else{if(b(r,0))return Math.round(o);if(Z(o["$nan?"]())||Z(o["$infinite?"]()))return o}return a=d("Math").$frexp(o),i=j(a),i[0]==null||i[0],m=i[1]==null?u:i[1],Z(p(r,H(O(d(d("Float"),"DIG"),2),Z(M(m,0))?I(m,4):H(I(m,3),1))))?o:Z(v(r,(Z(M(m,0))?O(I(m,3),1):I(m,4))["$-@"]()))?0:Math.round(o*Math.pow(10,r))/Math.pow(10,r)}},-1),x(l,"$times",function e(){var r=e.$$p||u,i=this;if(e.$$p=null,!Z(r))return Y(i,"enum_for",["times"],function o(){var m=o.$$s==null?this:o.$$s;return m},{$$s:i});for(var a=0;a<i;a++)r(a);return i}),x(l,"$to_f",h),x(l,"$to_i",function(){var r=this;return r<0?Math.ceil(r):Math.floor(r)}),x(l,"$to_r",function(){var r,i,a=this,o=u,m=u;return ee(d("Integer"),a)?d("Rational").$new(a,1):(i=d("Math").$frexp(a),r=j(i),o=r[0]==null?u:r[0],m=r[1]==null?u:r[1],o=d("Math").$ldexp(o,d(d("Float"),"MANT_DIG")).$to_i(),m=H(m,d(d("Float"),"MANT_DIG")),k(o,d(d("Float"),"RADIX")["$**"](m)).$to_r())}),x(l,"$to_s",function(r){var i=this;return r==null&&(r=10),r=w["$coerce_to!"](r,d("Integer"),"to_int"),(Z(v(r,2))||Z(M(r,36)))&&D.$raise(d("ArgumentError"),"invalid radix "+r),b(i,0)&&Z(1/i===-1/0)?"-0.0":i.toString(r)},-1),x(l,"$truncate",function(r){var i=this;r==null&&(r=0);var a=i.$to_f();if(a%1===0&&r>=0)return a;var o=Math.pow(10,r),m=parseInt(a*o,10)/o;return a%1===0&&(m=Math.round(m)),m},-1),x(l,"$digits",function(r){var i=this;r==null&&(r=10),Z(v(i,0))&&D.$raise(d(d("Math"),"DomainError"),"out of domain"),r=w["$coerce_to!"](r,d("Integer"),"to_int"),Z(v(r,2))&&D.$raise(d("ArgumentError"),"invalid radix "+r),i!=parseInt(i)&&D.$raise(d("NoMethodError"),"undefined method `digits' for "+i.$inspect());var a=i,o=[];if(i==0)return[0];for(;a!=0;)o.push(a%r),a=parseInt(a/r,10);return o},-1),x(l,"$divmod",function e(r){var i=e.$$p||u,a=this;return e.$$p=null,Z(a["$nan?"]())||Z(r["$nan?"]())?D.$raise(d("FloatDomainError"),"NaN"):Z(a["$infinite?"]())?D.$raise(d("FloatDomainError"),"Infinity"):$e(a,W(a,"divmod",e,!1,!0),"divmod",[r],i)}),x(l,"$upto",function e(r){var i=e.$$p||u,a=this;if(e.$$p=null,i===u)return Y(a,"enum_for",["upto",r],function m(){var T=m.$$s==null?this:m.$$s;return ee(d("Numeric"),r)||D.$raise(d("ArgumentError"),"comparison of "+T.$class()+" with "+r.$class()+" failed"),Z(v(r,T))?0:O(H(r,T),1)},{$$s:a});r.$$is_number||D.$raise(d("ArgumentError"),"comparison of "+a.$class()+" with "+r.$class()+" failed");for(var o=a;o<=r;o++)i(o);return a}),x(l,"$zero?",function(){var r=this;return r==0}),x(l,"$size",A(4)),x(l,"$nan?",function(){var r=this;return isNaN(r)}),x(l,"$finite?",function(){var r=this;return r!=1/0&&r!=-1/0&&!isNaN(r)}),x(l,"$infinite?",function(){var r=this;return r==1/0?1:r==-1/0?-1:u}),x(l,"$positive?",function(){var r=this;return r!=0&&(r==1/0||1/r>0)}),x(l,"$negative?",function(){var r=this;return r==-1/0||1/r<0});function _(e){var r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),r}function s(e){return new DataView(e.buffer).getFloat64(0,!0)}function $(e){for(var r=_(e),i=0;i<r.length;i++)if(r[i]===255)r[i]=0;else{r[i]++;break}return s(r)}function t(e){for(var r=_(e),i=0;i<r.length;i++)if(r[i]===0)r[i]=255;else{r[i]--;break}return s(r)}return x(l,"$next_float",function(){var r=this;return b(r,d(d("Float"),"INFINITY"))?d(d("Float"),"INFINITY"):Z(r["$nan?"]())?d(d("Float"),"NAN"):Z(p(r,0))?$(Math.abs(r)):t(r)}),x(l,"$prev_float",function(){var r=this;return b(r,d(d("Float"),"INFINITY")["$-@"]())?d(d("Float"),"INFINITY")["$-@"]():Z(r["$nan?"]())?d(d("Float"),"NAN"):Z(M(r,0))?t(r):-$(Math.abs(r))}),L(l,"arg","angle"),L(l,"eql?","=="),L(l,"fdiv","/"),L(l,"inspect","to_s"),L(l,"kind_of?","is_a?"),L(l,"magnitude","abs"),L(l,"modulo","%"),L(l,"object_id","__id__"),L(l,"phase","angle"),L(l,"succ","next"),L(l,"to_int","to_i")}("::",d("Numeric")),P("::","Fixnum",d("Number")),function(N,g,c){var l=z(N,g,"Integer"),q=[l].concat(c);return l.$$is_number_class=!0,l.$$is_integer_class=!0,function(G,_){var s=[G].concat(_),$=n.$r(s);return x(G,"$allocate",function(){var e=this;return D.$raise(d("TypeError"),"allocator undefined for "+e.$name())}),n.udef(G,"$new"),x(G,"$sqrt",function(e){return e=w["$coerce_to!"](e,d("Integer"),"to_int"),e<0&&D.$raise(d(d("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(e),10)}),x(G,"$try_convert",function(e){var r=this;return $("Opal")["$coerce_to?"](e,r,"to_int")})}(n.get_singleton_class(l),q),P(l,"MAX",Math.pow(2,30)-1),P(l,"MIN",-Math.pow(2,30))}("::",d("Numeric"),E),function(N,g,c){var l=z(N,g,"Float");return l.$$is_number_class=!0,function(q,G){return x(q,"$allocate",function(){var s=this;return D.$raise(d("TypeError"),"allocator undefined for "+s.$name())}),n.udef(q,"$new"),x(q,"$===",function(s){return!!s.$$is_number})}(n.get_singleton_class(l)),P(l,"INFINITY",1/0),P(l,"MAX",Number.MAX_VALUE),P(l,"MIN",Number.MIN_VALUE),P(l,"NAN",NaN),P(l,"DIG",15),P(l,"MANT_DIG",53),P(l,"RADIX",2),P(l,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",d("Numeric"))};Opal.modules["corelib/range"]=function(n){var z=n.klass,w=n.truthy,D=n.Kernel,x=n.def,ee=n.not,Z=n.send2,M=n.find_super,J=n.lambda,v=n.send,L=n.rb_ge,$e=n.rb_gt,W=n.eqeq,Y=n.rb_le,O=n.rb_lt,H=n.eqeqeq,b=n.return_ivar,h=n.rb_minus,I=n.Opal,j=n.rb_divide,k=n.rb_plus,F=n.rb_times,p=n.thrower,A=n.alias,P=n.top,S=[],E=n.nil,u=n.$$$;return n.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),P.$require("corelib/enumerable"),function(d,N,g){var c=z(d,N,"Range"),l=[c].concat(g),q=n.$r(l),G=c.$$prototype;G.begin=G.end=G.excl=E,c.$include(u("Enumerable")),c.$$prototype.$$is_range=!0,c.$attr_reader("begin","end"),x(c,"$initialize",function($,t,e){var r=this;return e==null&&(e=!1),w(r.begin)&&D.$raise(u("NameError"),"'initialize' called twice"),w($["$<=>"](t))||w($["$nil?"]())||w(t["$nil?"]())||D.$raise(u("ArgumentError"),"bad value for range"),r.begin=$,r.end=t,r.excl=e},-3),x(c,"$===",function($){var t=this;return w($.$$is_range)?!1:t["$cover?"]($)});function _(s){return s.begin===E||s.end===E||s.begin===-1/0||s.end===1/0||s.begin===1/0||s.end===-1/0}return x(c,"$count",function s(){var $=s.$$p||E,t=this;return s.$$p=null,ee($!==E)&&w(_(t))?u(u("Float"),"INFINITY"):Z(t,M(t,"count",s,!1,!0),"count",[],$)}),x(c,"$to_a",function s(){var $=s.$$p||E,t=this;return s.$$p=null,w(_(t))&&D.$raise(u("TypeError"),"cannot convert endless range to an array"),Z(t,M(t,"to_a",s,!1,!0),"to_a",[],$)}),x(c,"$cover?",function($){var t=this,e=E,r=E,i=E,a=E,o=E,m=E,T=E,K=E;return e=J(function(V,re){var ae=E;return V==null&&(V=E),re==null&&(re=E),w(ae=V["$<=>"](re))?ae:1}),w($.$$is_range)?(r=$.$begin(),i=$.$end(),a=$["$exclude_end?"](),w(t.begin)&&w(r["$nil?"]())||w(t.end)&&w(i["$nil?"]())||w(r)&&w(i)&&w(v(e.$call(r,i),"then",[],function(V){return V==null&&(V=E),w(a)?L(V,0):$e(V,0)}))||w(r)&&ee(t["$cover?"](r))?!1:(o=e.$call(t.end,i),W(t.excl,a)?L(o,0):w(t.excl)?$e(o,0):w(L(o,0))?!0:(m=$.$max(),w(T=m["$nil?"]()["$!"]())?Y(e.$call(m,t.end),0):T))):w(t.begin)&&w($e(e.$call(t.begin,$),0))?!1:w(t.end["$nil?"]())?!0:(K=e.$call($,t.end),w(t.excl)?O(K,0):Y(K,0))}),x(c,"$each",function s(){var $=s.$$p||E,t=this,e=E,r=E,i=E;if(s.$$p=null,$===E)return v(t,"enum_for",["each"],function m(){var T=m.$$s==null?this:m.$$s;return T.$size()},{$$s:t});var a,o;if(t.begin.$$is_number&&t.end.$$is_number){for((t.begin%1!==0||t.end%1!==0)&&D.$raise(u("TypeError"),"can't iterate from Float"),a=t.begin,o=t.end+(w(t.excl)?0:1);a<o;a++)$(a);return t}if(t.begin.$$is_string&&t.end.$$is_string)return v(t.begin,"upto",[t.end,t.excl],$.$to_proc()),t;for(e=t.begin,r=t.end,w(e["$respond_to?"]("succ"))||D.$raise(u("TypeError"),"can't iterate from "+e.$class());w(w(i=t.end["$nil?"]())?i:O(e["$<=>"](r),0));)n.yield1($,e),e=e.$succ();return ee(t.excl)&&W(e,r)&&n.yield1($,e),t}),x(c,"$eql?",function($){var t=this,e=E,r=E;return H(u("Range"),$)?w(e=w(r=t.excl["$==="]($["$exclude_end?"]()))?t.begin["$eql?"]($.$begin()):r)?t.end["$eql?"]($.$end()):e:!1}),x(c,"$exclude_end?",b("excl")),x(c,"$first",function s($){var t=s.$$p||E,e=this;return s.$$p=null,w(e.begin["$nil?"]())&&D.$raise(u("RangeError"),"cannot get the minimum of beginless range"),w($==null)?e.begin:Z(e,M(e,"first",s,!1,!0),"first",[$],t)},-1),x(c,"$include?",function s($){var t=s.$$p||E,e=this,r=E,i=E;if(s.$$p=null,w(e.begin.$$is_number||e.end.$$is_number)||w(e.begin["$is_a?"](u("Time")))||w(e.end["$is_a?"](u("Time")))||w(u("Integer").$try_convert(e.begin))||w(u("Integer").$try_convert(e.end)))return e["$cover?"]($);if(w(e.begin.$$is_string||e.end.$$is_string)){if(w(e.begin.$$is_string&&e.end.$$is_string))return v(e.begin.$upto(e.end,e.excl),"any?",[],function(o){return o==null&&(o=E),o["$=="]($)});if(w(e.begin["$nil?"]()))return r=$["$<=>"](e.end),w(i=r["$nil?"]()["$!"]())?w(e.excl)?O(r,0):Y(r,0):i;if(w(e.end["$nil?"]()))return r=e.begin["$<=>"]($),w(i=r["$nil?"]()["$!"]())?Y(r,0):i}return Z(e,M(e,"include?",s,!1,!0),"include?",[$],t)}),x(c,"$last",function($){var t=this;return w(t.end["$nil?"]())&&D.$raise(u("RangeError"),"cannot get the maximum of endless range"),w($==null)?t.end:t.$to_a().$last($)},-1),x(c,"$max",function s(){var $=s.$$p||E,t=this;return s.$$p=null,w(t.end["$nil?"]())?D.$raise(u("RangeError"),"cannot get the maximum of endless range"):$!==E?Z(t,M(t,"max",s,!1,!0),"max",[],$):ee(t.begin["$nil?"]())&&(w($e(t.begin,t.end))||w(t.excl)&&W(t.begin,t.end))?E:t.excl?t.end-1:t.end}),x(c,"$min",function s(){var $=s.$$p||E,t=this;return s.$$p=null,w(t.begin["$nil?"]())?D.$raise(u("RangeError"),"cannot get the minimum of beginless range"):$!==E?Z(t,M(t,"min",s,!1,!0),"min",[],$):ee(t.end["$nil?"]())&&(w($e(t.begin,t.end))||w(t.excl)&&W(t.begin,t.end))?E:t.begin}),x(c,"$size",function(){var $=this.begin,t=this.end;if(u("Numeric")["$==="]($)){if(u("Numeric")["$==="](t)){var e=h(t,$);return e<0?0:(this.excl||(e+=1),u("Float")["$==="]($)||u("Float")["$==="](t)?Math.floor(e):e)}else if(t===E)return 1/0}else if($===E&&u("Numeric")["$==="](t))return 1/0;return E}),x(c,"$step",function s($){var t=s.$$p||E,e=this,r=E,i=E;s.$$p=null;function a(){$==null?$=1:$.$$is_number||($=I["$coerce_to!"]($,u("Integer"),"to_int")),$<0?D.$raise(u("ArgumentError"),"step can't be negative"):$===0&&D.$raise(u("ArgumentError"),"step can't be 0")}function o(){if(!e.begin["$respond_to?"]("succ")||e.begin.$$is_string&&e.end.$$is_string)return E;if($%1===0)return j(e.$size(),$).$ceil();var m=e.begin,T=e.end,K=Math.abs,C=Math.floor,V=(K(m)+K(T)+K(T-m))/K($)*u(u("Float"),"EPSILON"),re;return V>.5&&(V=.5),e.excl?(re=C((T-m)/$-V),re*$+m<T&&re++):re=C((T-m)/$+V)+1,re}return t===E?(w(e.begin["$is_a?"](q("Numeric")))||w(e.begin["$nil?"]()))&&(w(e.end["$is_a?"](q("Numeric")))||w(e.end["$nil?"]()))&&ee(w(r=e.begin["$nil?"]())?e.end["$nil?"]():r)?u(u("Enumerator"),"ArithmeticSequence").$new(e,$,"step"):v(e,"enum_for",["step",$],function(){return a(),o()}):(a(),w(e.begin.$$is_number&&e.end.$$is_number)?(i=0,function(){try{var m=p("break");return v(e,"loop",[],function T(){var K=T.$$s==null?this:T.$$s,C=E;return K.begin==null&&(K.begin=E),K.excl==null&&(K.excl=E),K.end==null&&(K.end=E),C=k(K.begin,F(i,$)),w(K.excl)?w(L(C,K.end))&&m.$throw(E,T.$$is_lambda):w($e(C,K.end))&&m.$throw(E,T.$$is_lambda),n.yield1(t,C),i=k(i,1)},{$$s:e})}catch(T){if(T===m)return T.$v;throw T}finally{m.is_orphan=!0}}()):(e.begin.$$is_string&&e.end.$$is_string&&$%1!==0&&D.$raise(u("TypeError"),"no implicit conversion to float from string"),v(e,"each_with_index",[],function(T,K){return T==null&&(T=E),K==null&&(K=E),W(K["$%"]($),0)?n.yield1(t,T):E})),e)},-1),x(c,"$%",function($){var t=this;return w(t.begin["$is_a?"](q("Numeric")))&&w(t.end["$is_a?"](q("Numeric")))?u(u("Enumerator"),"ArithmeticSequence").$new(t,$,"%"):t.$step($)}),x(c,"$bsearch",function s(){var $=s.$$p||E,t=this;return s.$$p=null,$===E?t.$enum_for("bsearch"):(w(_(t)&&(t.begin.$$is_number||t.end.$$is_number))&&D.$raise(u("NotImplementedError"),"Can't #bsearch an infinite range"),w(t.begin.$$is_number&&t.end.$$is_number)||D.$raise(u("TypeError"),"can't do binary search for "+t.begin.$class()),v(t.$to_a(),"bsearch",[],$.$to_proc()))}),x(c,"$to_s",function(){var $=this,t=E;return""+(w(t=$.begin)?t:"")+(w($.excl)?"...":"..")+(w(t=$.end)?t:"")}),x(c,"$inspect",function(){var $=this,t=E;return""+(w(t=$.begin)?$.begin.$inspect():t)+(w($.excl)?"...":"..")+(w(t=$.end)?$.end.$inspect():t)}),x(c,"$marshal_load",function($){var t=this;return t.begin=$["$[]"]("begin"),t.end=$["$[]"]("end"),t.excl=$["$[]"]("excl")}),x(c,"$hash",function(){var $=this;return[u("Range"),$.begin,$.end,$.excl].$hash()}),A(c,"==","eql?"),A(c,"member?","include?")}("::",null,S)};Opal.modules["corelib/proc"]=function(n){var z=n.slice,w=n.each_ivar,D=n.klass,x=n.truthy,ee=n.Kernel,Z=n.defs,M=n.def,J=n.send,v=n.to_a,L=n.return_self,$e=n.ensure_kwargs,W=n.hash_get,Y=n.Opal,O=n.alias,H=n.nil,b=n.$$$;return n.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(h,I){var j=D(h,I,"Proc");n.prop(j.$$prototype,"$$is_proc",!0),n.prop(j.$$prototype,"$$is_lambda",!1),Z(j,"$new",function p(){var A=p.$$p||H;return p.$$p=null,x(A)||ee.$raise(b("ArgumentError"),"tried to create a Proc object without a block"),A});function k(p,A){if(p.$$ret)try{return p.apply(null,A)}catch(P){if(P===p.$$ret)return P.$v;throw P}else return p.apply(null,A)}function F(p,A){if(p.$$brk)try{return n.yieldX(p,A)}catch(P){if(P===p.$$brk)return P.$v;throw P}else return n.yieldX(p,A)}return M(j,"$call",function p(A){var P=p.$$p||H,S,E,u=this;return p.$$p=null,S=z(arguments),E=S,P!==H&&(u.$$p=P),u.$$is_lambda?k(u,E):F(u,E)},-1),M(j,"$>>",function p(A){p.$$p;var P=this;return p.$$p=null,J(ee,"proc",[],function S(E){var u=S.$$p||H,d,N,g=S.$$s==null?this:S.$$s,c=H;return S.$$p=null,d=z(arguments),N=d,c=J(g,"call",v(N),u.$to_proc()),A.$call(c)},{$$arity:-1,$$s:P})}),M(j,"$<<",function p(A){p.$$p;var P=this;return p.$$p=null,J(ee,"proc",[],function S(E){var u=S.$$p||H,d,N,g=S.$$s==null?this:S.$$s,c=H;return S.$$p=null,d=z(arguments),N=d,c=J(A,"call",v(N),u.$to_proc()),g.$call(c)},{$$arity:-1,$$s:P})}),M(j,"$to_proc",L),M(j,"$lambda?",function(){var A=this;return!!A.$$is_lambda}),M(j,"$arity",function(){var A=this;return A.$$is_curried?-1:A.$$arity!=null?A.$$arity:A.length}),M(j,"$source_location",function(){var A=this,P=H;return A.$$is_curried?H:x(P=A.$$source_location)?P:H}),M(j,"$binding",function(){var A=this;return A.$$is_curried&&ee.$raise(b("ArgumentError"),"Can't create Binding"),x(b("::","Binding","skip_raise")?"constant":H)?b("Binding").$new(H,[],A.$$s,A.$source_location()):H}),M(j,"$parameters",function(A){var P,S=this;if(A=$e(A),P=W(A,"lambda"),S.$$is_curried)return[["rest"]];if(S.$$parameters){if(P??S.$$is_lambda)return S.$$parameters;var E=[],u,d;for(u=0,d=S.$$parameters.length;u<d;u++){var N=S.$$parameters[u];N[0]==="req"&&(N=["opt",N[1]]),E.push(N)}return E}else return[]},-1),M(j,"$curry",function(A){var P=this;A===void 0?A=P.length:(A=Y["$coerce_to!"](A,b("Integer"),"to_int"),P.$$is_lambda&&A!==P.length&&ee.$raise(b("ArgumentError"),"wrong number of arguments ("+A+" for "+P.length+")"));function S(){var E=z(arguments),u=E.length,d;return u>A&&P.$$is_lambda&&!P.$$is_curried&&ee.$raise(b("ArgumentError"),"wrong number of arguments ("+u+" for "+A+")"),u>=A?P.$call.apply(P,E):(d=function(){return S.apply(null,E.concat(z(arguments)))},d.$$is_lambda=P.$$is_lambda,d.$$is_curried=!0,d)}return S.$$is_lambda=P.$$is_lambda,S.$$is_curried=!0,S},-1),M(j,"$dup",function(){var A=this,P=A.$$original_proc||A,S=function(){return P.apply(this,arguments)};return w(A,function(E){S[E]=A[E]}),S}),O(j,"===","call"),O(j,"clone","dup"),O(j,"yield","call"),O(j,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(n){var z=n.klass,w=n.def,D=n.truthy,x=n.slice,ee=n.alias,Z=n.Kernel,M=n.send,J=n.to_a,v=n.nil,L=n.$$$;return n.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function($e,W){var Y=z($e,W,"Method"),O=Y.$$prototype;return O.method=O.receiver=O.owner=O.name=v,Y.$attr_reader("owner","receiver","name"),w(Y,"$initialize",function(b,h,I,j){var k=this;return k.receiver=b,k.owner=h,k.name=j,k.method=I}),w(Y,"$arity",function(){var b=this;return b.method.$arity()}),w(Y,"$parameters",function(){var b=this;return b.method.$$parameters}),w(Y,"$source_location",function(){var b=this,h=v;return D(h=b.method.$$source_location)?h:["(eval)",0]}),w(Y,"$comments",function(){var b=this,h=v;return D(h=b.method.$$comments)?h:[]}),w(Y,"$call",function H(b){var h=H.$$p||v,I,j,k=this;return H.$$p=null,I=x(arguments),j=I,k.method.$$p=h,k.method.apply(k.receiver,j)},-1),w(Y,"$curry",function(b){var h=this;return h.method.$curry(b)},-1),w(Y,"$>>",function(b){var h=this;return h.method["$>>"](b)}),w(Y,"$<<",function(b){var h=this;return h.method["$<<"](b)}),w(Y,"$unbind",function(){var b=this;return L("UnboundMethod").$new(b.receiver.$class(),b.owner,b.method,b.name)}),w(Y,"$to_proc",function(){var b=this,h=b.$call.bind(b);return h.$$unbound=b.method,h.$$is_lambda=!0,h.$$arity=b.method.$$arity==null?b.method.length:b.method.$$arity,h.$$parameters=b.method.$$parameters,h}),w(Y,"$inspect",function(){var b=this;return"#<"+b.$class()+": "+b.receiver.$class()+"#"+b.name+" (defined in "+b.owner+" in "+b.$source_location().$join(":")+")>"}),ee(Y,"[]","call"),ee(Y,"===","call")}("::",null),function($e,W){var Y=z($e,W,"UnboundMethod"),O=Y.$$prototype;return O.method=O.owner=O.name=O.source=v,Y.$attr_reader("source","owner","name"),w(Y,"$initialize",function(b,h,I,j){var k=this;return k.source=b,k.owner=h,k.method=I,k.name=j,k.$$method=I}),w(Y,"$arity",function(){var b=this;return b.method.$arity()}),w(Y,"$parameters",function(){var b=this;return b.method.$$parameters}),w(Y,"$source_location",function(){var b=this,h=v;return D(h=b.method.$$source_location)?h:["(eval)",0]}),w(Y,"$comments",function(){var b=this,h=v;return D(h=b.method.$$comments)?h:[]}),w(Y,"$bind",function(b){var h=this;if(h.owner.$$is_module||n.is_a(b,h.owner))return L("Method").$new(b,h.owner,h.method,h.name);Z.$raise(L("TypeError"),"can't bind singleton method to a different class (expected "+b+".kind_of?("+h.owner+" to be true)")}),w(Y,"$bind_call",function H(b,h){var I=H.$$p||v,j,k,F=this;return H.$$p=null,j=x(arguments,1),k=j,M(F.$bind(b),"call",J(k),I.$to_proc())},-2),w(Y,"$inspect",function(){var b=this;return"#<"+b.$class()+": "+b.source+"#"+b.name+" (defined in "+b.owner+" in "+b.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(n){var z=n.gvars,w=n.const_set,D=n.Object,x=n.nil;return n.add_stubs("new"),z["&"]=z["~"]=z["`"]=z["'"]=x,z.LOADED_FEATURES=z['"']=n.loaded_features,z.LOAD_PATH=z[":"]=[],z["/"]=`
`,z[","]=x,w("::","ARGV",[]),w("::","ARGF",D.$new()),w("::","ENV",new Map),z.VERBOSE=!1,z.DEBUG=!1,z.SAFE=0};Opal.modules["corelib/io"]=function(n){var z=n.klass,w=n.const_set,D=n.not,x=n.truthy,ee=n.def,Z=n.return_ivar,M=n.return_val,J=n.slice,v=n.Kernel,L=n.gvars,$e=n.send,W=n.to_a,Y=n.rb_plus,O=n.neqeq,H=n.range,b=n.eqeq,h=n.to_ary,I=n.rb_gt,j=n.assign_ivar_val,k=n.alias,F,p=n.nil,A=n.$$$;n.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(S,E){var u=z(S,E,"IO"),d=u.$$prototype;return d.read_buffer=d.closed=p,w(u,"SEEK_SET",0),w(u,"SEEK_CUR",1),w(u,"SEEK_END",2),w(u,"SEEK_DATA",3),w(u,"SEEK_HOLE",4),w(u,"READABLE",1),w(u,"WRITABLE",4),u.$attr_reader("eof"),u.$attr_accessor("read_proc","sync","tty","write_proc"),ee(u,"$initialize",function(g,c){var l=this;return c==null&&(c="r"),l.fd=g,l.flags=c,l.eof=!1,x(c["$include?"]("r"))&&D(c["$match?"](/[wa+]/))?l.closed="write":x(c["$match?"](/[wa]/))&&D(c["$match?"](/[r+]/))?l.closed="read":p},-2),ee(u,"$fileno",Z("fd")),ee(u,"$tty?",function(){var g=this;return g.tty==!0}),ee(u,"$write",function(g){var c=this;return c.write_proc(g),g.$size()}),ee(u,"$flush",M(p)),ee(u,"$<<",function(g){var c=this;return c.$write(g),c}),ee(u,"$print",function(g){var c,l,q=this;L[","]==null&&(L[","]=p),c=J(arguments),l=c;for(var G=0,_=l.length;G<_;G++)l[G]=v.$String(l[G]);return q.$write(l.join(L[","])),p},-1),ee(u,"$puts",function(g){var c,l,q=this;c=J(arguments),l=c;var G;if(l.length===0)return q.$write(`
`),p;for(var _=0,s=l.length;_<s;_++)if(l[_].$$is_array){var $=l[_].$flatten();$.length>0&&$e(q,"puts",W($))}else l[_].$$is_string?G=l[_].valueOf():G=v.$String(l[_]),G.endsWith(`
`)||(G+=`
`),q.$write(G);return p},-1),ee(u,"$getc",function(){var g=this,c=p,l=p,q=p;g.read_buffer=x(c=g.read_buffer)?c:"",l="";do if(g.read_buffer=Y(g.read_buffer,l),O(g.read_buffer,""))return q=g.read_buffer["$[]"](0),g.read_buffer=g.read_buffer["$[]"](H(1,-1,!1)),q;while(x(l=g.$sysread_noraise(1)));return p}),ee(u,"$getbyte",function(){var g,c=this;return g=c.$getc(),g===p||g==null?p:g.$ord()}),ee(u,"$readbyte",function(){var g=this;return g.$readchar().$ord()}),ee(u,"$readchar",function(){var g=this,c=p;return x(c=g.$getc())?c:v.$raise(A("EOFError"),"end of file reached")}),ee(u,"$readline",function(g){var c,l,q=this,G=p;return c=J(arguments),l=c,x(G=$e(q,"gets",W(l)))?G:v.$raise(A("EOFError"),"end of file reached")},-1),ee(u,"$gets",function(g,c,l){var q,G,_=this,s=p,$=p,t=p,e=p,r=p,i=p;L["/"]==null&&(L["/"]=p),g==null&&(g=!1),c==null&&(c=p),l==null&&(l=new Map),x(g.$$is_number)&&D(c)&&(q=[!1,g,c],g=q[0],c=q[1],l=q[2]),x(g.$$is_hash)&&D(c)&&b(l,new Map)?(q=[!1,p,g],g=q[0],c=q[1],l=q[2]):x(c.$$is_hash)&&b(l,new Map)&&(q=[g,p,c],g=q[0],c=q[1],l=q[2]),s=g,b(g,!1)&&(g=L["/"]),b(g,"")&&(g=/\r?\n\r?\n/),g=x($=g)?$:"",b(s,"")||(g=g.$to_str()),t=b(s,"")?2:g.$length(),b(g," ")&&(g=/ /),_.read_buffer=x($=_.read_buffer)?$:"",e="",r=p;do if(_.read_buffer=Y(_.read_buffer,e),O(g,"")&&x(x(g.$$is_regexp)?_.read_buffer["$match?"](g):_.read_buffer["$include?"](g))){i=_.read_buffer,G=_.read_buffer.$split(g,2),q=h(G),r=q[0]==null?p:q[0],_.read_buffer=q[1]==null?p:q[1],O(r,i)&&(r=Y(r,i["$[]"](r.$length(),t)));break}while(x(e=_.$sysread_noraise(b(g,"")?65536:1)));return x(r)||(q=[x($=_.read_buffer)?$:"",""],r=q[0],_.read_buffer=q[1],b(r,"")&&(r=p)),x(r)&&(x(c)&&(r=r["$[]"](n.Range.$new(0,c,!0)),_.read_buffer=Y(r["$[]"](n.Range.$new(c,-1,!1)),_.read_buffer)),x(l["$[]"]("chomp"))&&(r=r.$sub(/\r?\n$/,"")),b(s,"")&&(r=r.$sub(/^[\r\n]+/,""))),b(s,!1)&&(L._=r),r},-1),ee(u,"$sysread",function(g){var c=this,l=p;return x(l=c.read_proc(g))?l:(c.eof=!0,v.$raise(A("EOFError"),"end of file reached"))}),ee(u,"$sysread_noraise",function(g){var c=this;try{return c.$sysread(g)}catch(l){if(n.rescue(l,[A("EOFError")]))try{return p}finally{n.pop_exception(l)}else throw l}}),ee(u,"$readpartial",function(g){var c,l=this,q=p,G=p,_=p;return l.read_buffer=x(q=l.read_buffer)?q:"",G=l.$sysread(g),c=[Y(l.read_buffer,x(q=G)?q:""),""],_=c[0],l.read_buffer=c[1],b(_,"")&&(_=p),_}),ee(u,"$read",function(g){var c,l=this,q=p,G=p,_=p;g==null&&(g=p),l.read_buffer=x(q=l.read_buffer)?q:"",G="",_=p;do if(l.read_buffer=Y(l.read_buffer,G),x(g)&&x(I(l.read_buffer.$length(),g)))return c=[l.read_buffer["$[]"](n.Range.$new(0,g,!0)),l.read_buffer["$[]"](n.Range.$new(g,-1,!1))],_=c[0],l.read_buffer=c[1],_;while(x(G=l.$sysread_noraise(x(q=g)?q:65536)));return c=[l.read_buffer,""],_=c[0],l.read_buffer=c[1],_},-1),ee(u,"$readlines",function(g){var c=this;return L["/"]==null&&(L["/"]=p),g==null&&(g=L["/"]),c.$each_line(g).$to_a()},-1),ee(u,"$each",function N(g,c){var l=N.$$p||p,q,G,_,s=this,$=p;if(L["/"]==null&&(L["/"]=p),N.$$p=null,q=J(arguments),q.length>0&&(G=q.shift()),G==null&&(G=L["/"]),_=q,l===p)return $e(s,"enum_for",["each",G].concat(W(_)));for(;x($=$e(s,"gets",[G].concat(W(_))));)n.yield1(l,$);return s},-1),ee(u,"$each_byte",function N(){var g=N.$$p||p,c=this,l=p;if(N.$$p=null,g===p)return c.$enum_for("each_byte");for(;x(l=c.$getbyte());)n.yield1(g,l);return c}),ee(u,"$each_char",function N(){var g=N.$$p||p,c=this,l=p;if(N.$$p=null,g===p)return c.$enum_for("each_char");for(;x(l=c.$getc());)n.yield1(g,l);return c}),ee(u,"$close",j("closed","both")),ee(u,"$close_read",function(){var g=this;return b(g.closed,"write")?g.closed="both":g.closed="read"}),ee(u,"$close_write",function(){var g=this;return b(g.closed,"read")?g.closed="both":g.closed="write"}),ee(u,"$closed?",function(){var g=this;return g.closed["$=="]("both")}),ee(u,"$closed_read?",function(){var g=this,c=p;return x(c=g.closed["$=="]("read"))?c:g.closed["$=="]("both")}),ee(u,"$closed_write?",function(){var g=this,c=p;return x(c=g.closed["$=="]("write"))?c:g.closed["$=="]("both")}),ee(u,"$check_writable",function(){var g=this;return x(g["$closed_write?"]())?v.$raise(A("IOError"),"not opened for writing"):p}),ee(u,"$check_readable",function(){var g=this;return x(g["$closed_read?"]())?v.$raise(A("IOError"),"not opened for reading"):p}),k(u,"each_line","each"),k(u,"eof?","eof")}("::",null),w("::","STDIN",L.stdin=A("IO").$new(0,"r")),w("::","STDOUT",L.stdout=A("IO").$new(1,"w")),w("::","STDERR",L.stderr=A("IO").$new(2,"w"));var P=n.global.console;return A("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(S){process.stdout.write(S)}:function(S){P.log(S)}),A("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(S){process.stderr.write(S)}:function(S){P.warn(S)}),F=[function(S){var E=prompt();return E!==null?E+`
`:p}],$e(A("STDIN"),"read_proc=",F),F[F.length-1]};Opal.modules["opal/regexp_anchors"]=function(n){var z=n.module,w=n.const_set,D=[];n.nil;var x=n.$$$;return n.add_stubs("new"),function(ee,Z){var M=z(ee,"Opal"),J=[M].concat(Z),v=n.$r(J);return w(M,"REGEXP_START","^"),w(M,"REGEXP_END","$"),w(M,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),w(M,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),w(M,"INLINE_IDENTIFIER_REGEXP",v("Regexp").$new("[^"+x(M,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+x(M,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),w(M,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),w(M,"CONST_NAME_REGEXP",v("Regexp").$new(""+x(M,"REGEXP_START")+"(::)?[A-Z][^"+x(M,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+x(M,"REGEXP_END")))}(D[0],D)};Opal.modules["opal/mini"]=function(n){var z=n.Object;return n.nil,n.add_stubs("require"),z.$require("opal/base"),z.$require("corelib/nil"),z.$require("corelib/boolean"),z.$require("corelib/string"),z.$require("corelib/comparable"),z.$require("corelib/enumerable"),z.$require("corelib/enumerator"),z.$require("corelib/array"),z.$require("corelib/hash"),z.$require("corelib/number"),z.$require("corelib/range"),z.$require("corelib/proc"),z.$require("corelib/method"),z.$require("corelib/regexp"),z.$require("corelib/variables"),z.$require("corelib/io"),z.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(n){var z=n.coerce_to,w=n.module,D=n.slice,x=n.truthy,ee=n.eqeq,Z=n.Opal,M=n.Kernel,J=n.gvars,v=n.def,L=n.alias,$e=n.nil,W=n.$$$;return n.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(Y){var O=w(Y,"Kernel");return v(O,"$format",function(b,h){var I,j,k=$e;J.DEBUG==null&&(J.DEBUG=$e),I=D(arguments,1),j=I,ee(j.$length(),1)&&x(j["$[]"](0)["$respond_to?"]("to_ary"))&&(k=Z["$coerce_to?"](j["$[]"](0),W("Array"),"to_ary"),x(k["$nil?"]())||(j=k.$to_a()));var F="",p=0,A,P,S=b.length,E,u,d,N,g,c,l,q,G,_,s,$,t,e=1,r=0,i,a=0,o=1,m=2,T=4,K=8,C=16,V=32,re=64,ae=128;function le(){i&V&&M.$raise(W("ArgumentError"),"flag after width"),i&ae&&M.$raise(W("ArgumentError"),"flag after precision")}function _e(){i&V&&M.$raise(W("ArgumentError"),"width given twice"),i&ae&&M.$raise(W("ArgumentError"),"width after precision")}function de(R){return R>=j.length&&M.$raise(W("ArgumentError"),"too few arguments"),j[R]}function ge(){switch(r){case-1:M.$raise(W("ArgumentError"),"unnumbered("+e+") mixed with numbered");case-2:M.$raise(W("ArgumentError"),"unnumbered("+e+") mixed with named")}return r=e++,de(r-1)}function ve(R){return r>0&&M.$raise(W("ArgumentError"),"numbered("+R+") after unnumbered("+r+")"),r===-2&&M.$raise(W("ArgumentError"),"numbered("+R+") after named"),R<1&&M.$raise(W("ArgumentError"),"invalid index - "+R+"$"),r=-1,de(R-1)}function me(){return t===void 0?ge():t}function be(R){for(var B,X="";;P++){if(P===S&&M.$raise(W("ArgumentError"),"malformed format string - %*[0-9]"),b.charCodeAt(P)<48||b.charCodeAt(P)>57)return P--,B=parseInt(X,10)||0,B>2147483647&&M.$raise(W("ArgumentError"),""+R+" too big"),B;X+=b.charAt(P)}}function ie(R){var B,X=be(R);return b.charAt(P+1)==="$"?(P++,B=ve(X)):B=ge(),B.$to_int()}for(P=b.indexOf("%");P!==-1;P=b.indexOf("%",P)){switch(u=void 0,i=a,N=-1,g=-1,t=void 0,A=P,P++,b.charAt(P)){case"%":p=P;case"":case`
`:case"\0":P++;continue}e:for(;P<S;P++)switch(b.charAt(P)){case" ":le(),i|=C;continue e;case"#":le(),i|=o;continue e;case"+":le(),i|=T;continue e;case"-":le(),i|=m;continue e;case"0":le(),i|=K;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(c=be("width"),b.charAt(P+1)==="$"){if(P+2===S){u="%",P++;break e}t!==void 0&&M.$raise(W("ArgumentError"),"value given twice - %"+c+"$"),t=ve(c),P++}else _e(),i|=V,N=c;continue e;case"<":case"{":for(q=b.charAt(P)==="<"?">":"}",l="",P++;;P++){if(P===S&&M.$raise(W("ArgumentError"),"malformed name - unmatched parenthesis"),b.charAt(P)===q){if(r>0&&M.$raise(W("ArgumentError"),"named "+l+" after unnumbered("+r+")"),r===-1&&M.$raise(W("ArgumentError"),"named "+l+" after numbered"),r=-2,(j[0]===void 0||!j[0].$$is_hash)&&M.$raise(W("ArgumentError"),"one hash required"),t=j[0].$fetch(l),q===">")continue e;if(u=t.toString(),g!==-1&&(u=u.slice(0,g)),i&m)for(;u.length<N;)u=u+" ";else for(;u.length<N;)u=" "+u;break e}l+=b.charAt(P)}case"*":P++,_e(),i|=V,N=ie("width"),N<0&&(i|=m,N=-N);continue e;case".":if(i&ae&&M.$raise(W("ArgumentError"),"precision given twice"),i|=re|ae,g=0,P++,b.charAt(P)==="*"){P++,g=ie("precision"),g<0&&(i&=~re);continue e}g=be("precision");continue e;case"d":case"i":case"u":if(E=M.$Integer(me()),E>=0){for(u=E.toString();u.length<g;)u="0"+u;if(i&m)for((i&T||i&C)&&(u=(i&T?"+":" ")+u);u.length<N;)u=u+" ";else if(i&K&&g===-1){for(;u.length<N-(i&T||i&C?1:0);)u="0"+u;(i&T||i&C)&&(u=(i&T?"+":" ")+u)}else for((i&T||i&C)&&(u=(i&T?"+":" ")+u);u.length<N;)u=" "+u}else{for(u=(-E).toString();u.length<g;)u="0"+u;if(i&m)for(u="-"+u;u.length<N;)u=u+" ";else if(i&K&&g===-1){for(;u.length<N-1;)u="0"+u;u="-"+u}else for(u="-"+u;u.length<N;)u=" "+u}break e;case"b":case"B":case"o":case"x":case"X":switch(b.charAt(P)){case"b":case"B":G=2,_="0b",s=/^1+/,$="1";break;case"o":G=8,_="0",s=/^3?7+/,$="7";break;case"x":case"X":G=16,_="0x",s=/^f+/,$="f";break}if(E=M.$Integer(me()),E>=0){for(u=E.toString(G);u.length<g;)u="0"+u;if(i&m)for((i&T||i&C)&&(u=(i&T?"+":" ")+u),i&o&&E!==0&&(u=_+u);u.length<N;)u=u+" ";else if(i&K&&g===-1){for(;u.length<N-(i&T||i&C?1:0)-(i&o&&E!==0?_.length:0);)u="0"+u;i&o&&E!==0&&(u=_+u),(i&T||i&C)&&(u=(i&T?"+":" ")+u)}else for(i&o&&E!==0&&(u=_+u),(i&T||i&C)&&(u=(i&T?"+":" ")+u);u.length<N;)u=" "+u}else if(i&T||i&C){for(u=(-E).toString(G);u.length<g;)u="0"+u;if(i&m)for(i&o&&(u=_+u),u="-"+u;u.length<N;)u=u+" ";else if(i&K&&g===-1){for(;u.length<N-1-(i&o?2:0);)u="0"+u;i&o&&(u=_+u),u="-"+u}else for(i&o&&(u=_+u),u="-"+u;u.length<N;)u=" "+u}else{for(u=(E>>>0).toString(G).replace(s,$);u.length<g-2;)u=$+u;if(i&m)for(u=".."+u,i&o&&(u=_+u);u.length<N;)u=u+" ";else if(i&K&&g===-1){for(;u.length<N-2-(i&o?_.length:0);)u=$+u;u=".."+u,i&o&&(u=_+u)}else for(u=".."+u,i&o&&(u=_+u);u.length<N;)u=" "+u}b.charAt(P)===b.charAt(P).toUpperCase()&&(u=u.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(E=M.$Float(me()),E>=0||isNaN(E)){if(E===1/0)u="Inf";else switch(b.charAt(P)){case"f":u=E.toFixed(g===-1?6:g);break;case"e":case"E":u=E.toExponential(g===-1?6:g);break;case"g":case"G":u=E.toExponential(),d=parseInt(u.split("e")[1],10),d<-4||d>=(g===-1?6:g)||(u=E.toPrecision(g===-1?i&o?6:void 0:g));break}if(i&m)for((i&T||i&C)&&(u=(i&T?"+":" ")+u);u.length<N;)u=u+" ";else if(i&K&&E!==1/0&&!isNaN(E)){for(;u.length<N-(i&T||i&C?1:0);)u="0"+u;(i&T||i&C)&&(u=(i&T?"+":" ")+u)}else for((i&T||i&C)&&(u=(i&T?"+":" ")+u);u.length<N;)u=" "+u}else{if(E===-1/0)u="Inf";else switch(b.charAt(P)){case"f":u=(-E).toFixed(g===-1?6:g);break;case"e":case"E":u=(-E).toExponential(g===-1?6:g);break;case"g":case"G":u=(-E).toExponential(),d=parseInt(u.split("e")[1],10),d<-4||d>=(g===-1?6:g)||(u=(-E).toPrecision(g===-1?i&o?6:void 0:g));break}if(i&m)for(u="-"+u;u.length<N;)u=u+" ";else if(i&K&&E!==-1/0){for(;u.length<N-1;)u="0"+u;u="-"+u}else for(u="-"+u;u.length<N;)u=" "+u}b.charAt(P)===b.charAt(P).toUpperCase()&&E!==1/0&&E!==-1/0&&!isNaN(E)&&(u=u.toUpperCase()),u=u.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":M.$raise(W("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(E=me(),E["$respond_to?"]("to_ary")&&(E=E.$to_ary()[0]),E["$respond_to?"]("to_str")?u=E.$to_str():u=String.fromCharCode(z(E,W("Integer"),"to_int")),u.length!==1&&M.$raise(W("ArgumentError"),"%c requires a character"),i&m)for(;u.length<N;)u=u+" ";else for(;u.length<N;)u=" "+u;break e;case"p":if(u=me().$inspect(),g!==-1&&(u=u.slice(0,g)),i&m)for(;u.length<N;)u=u+" ";else for(;u.length<N;)u=" "+u;break e;case"s":if(u=me().$to_s(),g!==-1&&(u=u.slice(0,g)),i&m)for(;u.length<N;)u=u+" ";else for(;u.length<N;)u=" "+u;break e;default:M.$raise(W("ArgumentError"),"malformed format string - %"+b.charAt(P))}u===void 0&&M.$raise(W("ArgumentError"),"malformed format string - %"),F+=b.slice(p,A)+u,p=P+1}return J.DEBUG&&r>=0&&e<j.length&&M.$raise(W("ArgumentError"),"too many arguments for format string"),F+b.slice(p)},-2),L(O,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(n){var z=n.klass,w=n.rb_plus,D=n.truthy,x=n.send,ee=n.defs,Z=n.eqeq,M=n.def,J=n.return_ivar,v=n.return_val,L=n.slice,$e=n.Kernel,W=n.Opal,Y=n.rb_lt,O,H=n.top,b=[],h=n.$r(b),I=n.nil,j=n.$$$;return n.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),H.$require("corelib/string"),function(k,F,p){var A=z(k,F,"Encoding"),P=[A].concat(p),S=A.$$prototype;return S.name=S.dummy=I,ee(A,"$register",function E(u,d){var N=E.$$p||I,g=this,c=I,l=I,q=I,G=I,_=I,s=I;return E.$$p=null,d==null&&(d=new Map),c=w([u],D(l=d["$[]"]("aliases"))?l:[]),q=D(l=d["$[]"]("ascii"))&&l,G=D(l=d["$[]"]("dummy"))&&l,D(d["$[]"]("inherits"))?(_=d["$[]"]("inherits").$clone(),_.$initialize(u,c,q,G)):_=g.$new(u,c,q,G),N!==I&&x(_,"instance_eval",[],N.$to_proc()),s=n.encodings,x(c,"each",[],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=I),e.$const_set(t.$tr("-","_"),_),s[t]=_},{$$s:g})},-2),ee(A,"$find",function(u){var d=this;return Z(u,"default_external")?d.$default_external():n.find_encoding(u)}),A.$singleton_class().$attr_accessor("default_external"),A.$attr_reader("name","names"),M(A,"$initialize",function(u,d,N,g){var c=this;return c.name=u,c.names=d,c.ascii=N,c.dummy=g}),M(A,"$ascii_compatible?",J("ascii")),M(A,"$dummy?",J("dummy")),M(A,"$binary?",v(!1)),M(A,"$to_s",J("name")),M(A,"$inspect",function(){var u=this;return"#<Encoding:"+u.name+(D(u.dummy)?" (dummy)":I)+">"}),M(A,"$charsize",function(u){for(var d=0,N=0,g=u.length;N<g;N++){var c=u.charCodeAt(N);c>=55296&&c<=56319||d++}return d}),M(A,"$each_char",function E(u){var d=E.$$p||I;E.$$p=null;for(var N="",g=0,c=u.length;g<c;g++){var l=u.charCodeAt(g),q=u.charAt(g);if(l>=56320&&l<=57343){N=q;continue}else l>=55296&&l<=56319&&(q=N+q);u.encoding.name!="UTF-8"&&(q=new String(q),q.encoding=u.encoding),n.yield1(d,q)}}),M(A,"$each_byte",function(u){return L(arguments),$e.$raise(j("NotImplementedError"))},-1),M(A,"$bytesize",function(u){return L(arguments),$e.$raise(j("NotImplementedError"))},-1),z("::",j("StandardError"),"EncodingError"),z("::",j("EncodingError"),"CompatibilityError"),z(P[0],j("EncodingError"),"UndefinedConversionError"),I}("::",null,b),x(j("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function k(){var F=k.$$s==null?this:k.$$s;return M(F,"$each_byte",function p(A){var P=p.$$p||I;p.$$p=null;for(var S=1/0,E,u=A.length,d=null,N=0;N<u;++N){if(E=A.charCodeAt(N),E>55295&&E<57344){if(!d){if(E>56319){(S-=3)>-1&&(n.yield1(P,239),n.yield1(P,191),n.yield1(P,189));continue}else if(N+1===u){(S-=3)>-1&&(n.yield1(P,239),n.yield1(P,191),n.yield1(P,189));continue}d=E;continue}if(E<56320){(S-=3)>-1&&(n.yield1(P,239),n.yield1(P,191),n.yield1(P,189)),d=E;continue}E=(d-55296<<10|E-56320)+65536}else d&&(S-=3)>-1&&(n.yield1(P,239),n.yield1(P,191),n.yield1(P,189));if(d=null,E<128){if((S-=1)<0)break;n.yield1(P,E)}else if(E<2048){if((S-=2)<0)break;n.yield1(P,E>>6|192),n.yield1(P,E&63|128)}else if(E<65536){if((S-=3)<0)break;n.yield1(P,E>>12|224),n.yield1(P,E>>6&63|128),n.yield1(P,E&63|128)}else if(E<1114112){if((S-=4)<0)break;n.yield1(P,E>>18|240),n.yield1(P,E>>12&63|128),n.yield1(P,E>>6&63|128),n.yield1(P,E&63|128)}}}),M(F,"$bytesize",function(A){return A.$bytes().$length()})},{$$s:H}),x(j("Encoding"),"register",["UTF-16LE"],function k(){var F=k.$$s==null?this:k.$$s;return M(F,"$each_byte",function p(A){var P=p.$$p||I;p.$$p=null;for(var S=0,E=A.length;S<E;S++){var u=A.charCodeAt(S);n.yield1(P,u&255),n.yield1(P,u>>8)}}),M(F,"$bytesize",function(A){return A.length*2})},{$$s:H}),x(j("Encoding"),"register",["UTF-16BE",new Map([["inherits",j(j("Encoding"),"UTF_16LE")]])],function k(){var F=k.$$s==null?this:k.$$s;return M(F,"$each_byte",function p(A){var P=p.$$p||I;p.$$p=null;for(var S=0,E=A.length;S<E;S++){var u=A.charCodeAt(S);n.yield1(P,u>>8),n.yield1(P,u&255)}})},{$$s:H}),x(j("Encoding"),"register",["UTF-32LE"],function k(){var F=k.$$s==null?this:k.$$s;return M(F,"$each_byte",function p(A){var P=p.$$p||I;p.$$p=null;for(var S=0,E=A.length;S<E;S++){var u=A.charCodeAt(S);n.yield1(P,u&255),n.yield1(P,u>>8),n.yield1(P,0),n.yield1(P,0)}}),M(F,"$bytesize",function(A){return A.length*4})},{$$s:H}),x(j("Encoding"),"register",["UTF-32BE",new Map([["inherits",j(j("Encoding"),"UTF_32LE")]])],function k(){var F=k.$$s==null?this:k.$$s;return M(F,"$each_byte",function p(A){var P=p.$$p||I;p.$$p=null;for(var S=0,E=A.length;S<E;S++){var u=A.charCodeAt(S);n.yield1(P,0),n.yield1(P,0),n.yield1(P,u>>8),n.yield1(P,u&255)}})},{$$s:H}),x(j("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function k(){var F=k.$$s==null?this:k.$$s;return M(F,"$each_char",function p(A){var P=p.$$p||I;p.$$p=null;for(var S=0,E=A.length;S<E;S++){var u=new String(A.charAt(S));u.encoding=A.encoding,n.yield1(P,u)}}),M(F,"$charsize",function(A){return A.length}),M(F,"$each_byte",function p(A){var P=p.$$p||I;p.$$p=null;for(var S=0,E=A.length;S<E;S++){var u=A.charCodeAt(S);n.yield1(P,u&255)}}),M(F,"$bytesize",function(A){return A.length}),M(F,"$binary?",v(!0))},{$$s:H}),j("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",j(j("Encoding"),"ASCII_8BIT")]])),j("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",j(j("Encoding"),"ASCII_8BIT")]])),function(k,F){var p=z(k,F,"String"),A=p.$$prototype;return A.internal_encoding=A.bytes=A.encoding=I,p.$attr_reader("encoding"),p.$attr_reader("internal_encoding"),n.prop(String.prototype,"bytes",I),n.prop(String.prototype,"encoding",j(j("Encoding"),"UTF_8")),n.prop(String.prototype,"internal_encoding",j(j("Encoding"),"UTF_8")),M(p,"$b",function(){var S=this;return S.$dup().$force_encoding("binary")}),M(p,"$bytesize",function(){var S=this;return S.internal_encoding.$bytesize(S)}),M(p,"$each_byte",function P(){var S=P.$$p||I,E=this;return P.$$p=null,S===I?x(E,"enum_for",["each_byte"],function u(){var d=u.$$s==null?this:u.$$s;return d.$bytesize()},{$$s:E}):(x(E.internal_encoding,"each_byte",[E],S.$to_proc()),E)}),M(p,"$bytes",function(){var S=this,E=I;return typeof S=="string"?new String(S).$each_byte().$to_a():(S.bytes=D(E=S.bytes)?E:S.$each_byte().$to_a(),S.bytes.$dup())}),M(p,"$each_char",function P(){var S=P.$$p||I,E=this;return P.$$p=null,S===I?x(E,"enum_for",["each_char"],function u(){var d=u.$$s==null?this:u.$$s;return d.$length()},{$$s:E}):(x(E.encoding,"each_char",[E],S.$to_proc()),E)}),M(p,"$chars",function P(){var S=P.$$p||I,E=this;return P.$$p=null,D(S)?x(E,"each_char",[],S.$to_proc()):E.$each_char().$to_a()}),M(p,"$each_codepoint",function P(){var S=P.$$p||I,E=this;if(P.$$p=null,S===I)return E.$enum_for("each_codepoint");for(var u=0,d=E.length;u<d;u++)n.yield1(S,E.codePointAt(u));return E}),M(p,"$codepoints",function P(){var S=P.$$p||I,E=this;return P.$$p=null,S!==I?x(E,"each_codepoint",[],S.$to_proc()):E.$each_codepoint().$to_a()}),M(p,"$encode",function(S){var E=this;return n.enc(E,S)}),M(p,"$force_encoding",function(S){var E=this,u=E;return S===u.encoding||(S=W["$coerce_to!"](S,j("String"),"to_s"),S=j("Encoding").$find(S),S===u.encoding)||(u=n.set_encoding(u,S)),u}),M(p,"$getbyte",function(S){var E=this,u=I;return u=E.$bytes(),S=W["$coerce_to!"](S,j("Integer"),"to_int"),D(Y(u.$length(),S))?I:u["$[]"](S)}),M(p,"$initialize_copy",function(S){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),M(p,"$valid_encoding?",v(!0))}("::",null),O=[j(h("Encoding"),"UTF_8")],x(j("Encoding"),"default_external=",O),O[O.length-1]};Opal.modules["corelib/math"]=function(n){var z=n.type_error,w=n.module,D=n.const_set,x=n.Class,ee=n.slice,Z=n.Kernel,M=n.defs,J=n.truthy,v=n.send,L=n.def,$e=n.rb_minus,W=n.eqeqeq,Y=n.rb_divide,O=[],H=n.nil,b=n.$$$;return n.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(h,I){var j=w(h,"Math"),k=[j].concat(I),F=n.$r(k);return D(j,"E",Math.E),D(j,"PI",Math.PI),D(j,"DomainError",x.$new(b("StandardError"))),M(j,"$checked",function(A,P){var S,E;if(S=ee(arguments,1),E=S,isNaN(E[0])||E.length==2&&isNaN(E[1]))return NaN;var u=Math[A].apply(null,E);return isNaN(u)&&Z.$raise(F("DomainError"),'Numerical argument is out of domain - "'+A+'"'),u},-2),M(j,"$float!",function(A){try{return Z.$Float(A)}catch(P){if(n.rescue(P,[b("ArgumentError")]))try{return Z.$raise(z(A,b("Float")))}finally{n.pop_exception(P)}else throw P}}),M(j,"$integer!",function(A){try{return Z.$Integer(A)}catch(P){if(n.rescue(P,[b("ArgumentError")]))try{return Z.$raise(z(A,b("Integer")))}finally{n.pop_exception(P)}else throw P}}),j.$module_function(),J(typeof Math.erf<"u")||n.prop(Math,"erf",function(p){var A=.254829592,P=-.284496736,S=1.421413741,E=-1.453152027,u=1.061405429,d=.3275911,N=1;p<0&&(N=-1),p=Math.abs(p);var g=1/(1+d*p),c=1-((((u*g+E)*g+S)*g+P)*g+A)*g*Math.exp(-p*p);return N*c}),J(typeof Math.erfc<"u")||n.prop(Math,"erfc",function(p){var A=Math.abs(p),P=1/(.5*A+1),S=P*.17087277+-.82215223,E=P*S+1.48851587,u=P*E+-1.13520398,d=P*u+.27886807,N=P*d+-.18628806,g=P*N+.09678418,c=P*g+.37409196,l=P*c+1.00002368,q=P*l,G=-A*A-1.26551223+q,_=P*Math.exp(G);return p<0?2-_:_}),v(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function p(A){var P=p.$$s==null?this:p.$$s;return A==null&&(A=H),v(P,"define_method",[A],function(E){return E==null&&(E=H),b("Math").$checked(A,b("Math")["$float!"](E))})},{$$s:j}),L(j,"$atan2",function(A,P){return b("Math").$checked("atan2",b("Math")["$float!"](A),b("Math")["$float!"](P))}),L(j,"$hypot",function(A,P){return b("Math").$checked("hypot",b("Math")["$float!"](A),b("Math")["$float!"](P))}),L(j,"$frexp",function(A){if(A=F("Math")["$float!"](A),isNaN(A))return[NaN,0];var P=Math.floor(Math.log(Math.abs(A))/Math.log(2))+1,S=A/Math.pow(2,P);return[S,P]}),L(j,"$gamma",function(A){A=F("Math")["$float!"](A);var P,S,E,u,d,N,g,c,l,q=4.7421875,G=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(A))return NaN;if(A===0&&1/A<0)return-1/0;if((A===-1||A===-1/0)&&Z.$raise(F("DomainError"),'Numerical argument is out of domain - "gamma"'),F("Integer")["$==="](A)){if(A<=0)return isFinite(A)?1/0:NaN;if(A>171)return 1/0;for(u=A-2,d=A-1;u>1;)d*=u,u--;return d==0&&(d=1),d}if(A<.5)return Math.PI/(Math.sin(Math.PI*A)*b("Math").$gamma($e(1,A)));if(A>=171.35)return 1/0;if(A>85)return N=A*A,g=N*A,c=g*A,l=c*A,Math.sqrt(2*Math.PI/A)*Math.pow(A/Math.E,A)*(1+1/(12*A)+1/(288*N)-139/(51840*g)-571/(2488320*c)+163879/(209018880*l)+5246819/(75246796800*l*A));for(A-=1,E=G[0],P=1;P<G.length;++P)E+=G[P]/(A+P);return S=A+q+.5,Math.sqrt(2*Math.PI)*Math.pow(S,A+.5)*Math.exp(-S)*E}),L(j,"$ldexp",function(A,P){return A=F("Math")["$float!"](A),P=F("Math")["$integer!"](P),isNaN(P)&&Z.$raise(b("RangeError"),"float NaN out of range of integer"),A*Math.pow(2,P)}),L(j,"$lgamma",function(A){return A==-1?[1/0,1]:[Math.log(Math.abs(b("Math").$gamma(A))),b("Math").$gamma(A)<0?-1:1]}),L(j,"$log",function(A,P){return W(b("String"),A)&&Z.$raise(z(A,b("Float"))),J(P==null)?b("Math").$checked("log",b("Math")["$float!"](A)):(W(b("String"),P)&&Z.$raise(z(P,b("Float"))),Y(b("Math").$checked("log",b("Math")["$float!"](A)),b("Math").$checked("log",b("Math")["$float!"](P))))},-2),L(j,"$log10",function(A){return W(b("String"),A)&&Z.$raise(z(A,b("Float"))),b("Math").$checked("log10",b("Math")["$float!"](A))}),L(j,"$log2",function(A){return W(b("String"),A)&&Z.$raise(z(A,b("Float"))),b("Math").$checked("log2",b("Math")["$float!"](A))}),L(j,"$tan",function(A){return A=b("Math")["$float!"](A),J(A["$infinite?"]())?b(b("Float"),"NAN"):b("Math").$checked("tan",b("Math")["$float!"](A))})}("::",O)};Opal.modules["corelib/complex/base"]=function(n){var z=n.module,w=n.truthy,D=n.def,x=n.klass,ee=[],Z=n.nil;return n.add_stubs("new,from_string"),function(M,J){var v=z(M,"Kernel"),L=[v].concat(J),$e=n.$r(L);return D(v,"$Complex",function(Y,O){return O==null&&(O=Z),w(O)?$e("Complex").$new(Y,O):$e("Complex").$new(Y,0)},-2)}("::",ee),function(M,J,v){var L=x(M,J,"String"),$e=[L].concat(v),W=n.$r($e);return D(L,"$to_c",function(){var O=this;return W("Complex").$from_string(O)})}("::",null,ee)};Opal.modules["corelib/complex"]=function(n){var z=n.klass,w=n.truthy,D=n.eqeqeq,x=n.Kernel,ee=n.defs,Z=n.rb_times,M=n.def,J=n.rb_plus,v=n.rb_minus,L=n.rb_divide,$e=n.eqeq,W=n.to_ary,Y=n.rb_gt,O=n.neqeq,H=n.return_val,b=n.const_set,h=n.alias,I=n.top,j=[],k=n.nil,F=n.$$$;return n.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),I.$require("corelib/numeric"),I.$require("corelib/complex/base"),function(p,A,P){var S=z(p,A,"Complex"),E=[S].concat(P),u=n.$r(E),d=S.$$prototype;return d.real=d.imag=k,ee(S,"$rect",function(g,c){var l=this;return c==null&&(c=0),D(F("Numeric"),g)&&w(g["$real?"]())&&D(F("Numeric"),c)&&w(c["$real?"]())||x.$raise(F("TypeError"),"not a real"),l.$new(g,c)},-2),ee(S,"$polar",function(g,c){var l=this;return c==null&&(c=0),D(F("Numeric"),g)&&w(g["$real?"]())&&D(F("Numeric"),c)&&w(c["$real?"]())||x.$raise(F("TypeError"),"not a real"),l.$new(Z(g,F("Math").$cos(c)),Z(g,F("Math").$sin(c)))},-2),S.$attr_reader("real","imag"),M(S,"$initialize",function(g,c){var l=this;return c==null&&(c=0),l.real=g,l.imag=c,l.$freeze()},-2),M(S,"$coerce",function(g){var c=this;return D(F("Complex"),g)?[g,c]:D(F("Numeric"),g)&&w(g["$real?"]())?[F("Complex").$new(g,0),c]:x.$raise(F("TypeError"),""+g.$class()+" can't be coerced into Complex")}),M(S,"$==",function(g){var c=this,l=k;return D(F("Complex"),g)?w(l=c.real["$=="](g.$real()))?c.imag["$=="](g.$imag()):l:D(F("Numeric"),g)&&w(g["$real?"]())?w(l=c.real["$=="](g))?c.imag["$=="](0):l:g["$=="](c)}),M(S,"$-@",function(){var g=this;return x.$Complex(g.real["$-@"](),g.imag["$-@"]())}),M(S,"$+",function(g){var c=this;return D(F("Complex"),g)?x.$Complex(J(c.real,g.$real()),J(c.imag,g.$imag())):D(F("Numeric"),g)&&w(g["$real?"]())?x.$Complex(J(c.real,g),c.imag):c.$__coerced__("+",g)}),M(S,"$-",function(g){var c=this;return D(F("Complex"),g)?x.$Complex(v(c.real,g.$real()),v(c.imag,g.$imag())):D(F("Numeric"),g)&&w(g["$real?"]())?x.$Complex(v(c.real,g),c.imag):c.$__coerced__("-",g)}),M(S,"$*",function(g){var c=this;return D(F("Complex"),g)?x.$Complex(v(Z(c.real,g.$real()),Z(c.imag,g.$imag())),J(Z(c.real,g.$imag()),Z(c.imag,g.$real()))):D(F("Numeric"),g)&&w(g["$real?"]())?x.$Complex(Z(c.real,g),Z(c.imag,g)):c.$__coerced__("*",g)}),M(S,"$/",function(g){var c=this;return D(F("Complex"),g)?D(F("Number"),c.real)&&w(c.real["$nan?"]())||D(F("Number"),c.imag)&&w(c.imag["$nan?"]())||D(F("Number"),g.$real())&&w(g.$real()["$nan?"]())||D(F("Number"),g.$imag())&&w(g.$imag()["$nan?"]())?F("Complex").$new(F(F("Float"),"NAN"),F(F("Float"),"NAN")):L(Z(c,g.$conj()),g.$abs2()):D(F("Numeric"),g)&&w(g["$real?"]())?x.$Complex(c.real.$quo(g),c.imag.$quo(g)):c.$__coerced__("/",g)}),M(S,"$**",function(g){var c,l,q=this,G=k,_=k,s=k,$=k,t=k,e=k,r=k,i=k,a=k,o=k,m=k;if($e(g,0))return F("Complex").$new(1,0);if(D(F("Complex"),g))return l=q.$polar(),c=W(l),G=c[0]==null?k:c[0],_=c[1]==null?k:c[1],s=g.$real(),$=g.$imag(),t=F("Math").$exp(v(Z(s,F("Math").$log(G)),Z($,_))),e=J(Z(_,s),Z($,F("Math").$log(G))),F("Complex").$polar(t,e);if(D(F("Integer"),g))if(w(Y(g,0))){for(r=q,i=r,a=v(g,1);O(a,0);){for(l=a.$divmod(2),c=W(l),o=c[0]==null?k:c[0],m=c[1]==null?k:c[1];$e(m,0);)r=x.$Complex(v(Z(r.$real(),r.$real()),Z(r.$imag(),r.$imag())),Z(Z(2,r.$real()),r.$imag())),a=o,l=a.$divmod(2),c=W(l),o=c[0]==null?k:c[0],m=c[1]==null?k:c[1];i=Z(i,r),a=v(a,1)}return i}else return L(F("Rational").$new(1,1),q)["$**"](g["$-@"]());else return D(F("Float"),g)||D(F("Rational"),g)?(l=q.$polar(),c=W(l),G=c[0]==null?k:c[0],_=c[1]==null?k:c[1],F("Complex").$polar(G["$**"](g),Z(_,g))):q.$__coerced__("**",g)}),M(S,"$abs",function(){var g=this;return F("Math").$hypot(g.real,g.imag)}),M(S,"$abs2",function(){var g=this;return J(Z(g.real,g.real),Z(g.imag,g.imag))}),M(S,"$angle",function(){var g=this;return F("Math").$atan2(g.imag,g.real)}),M(S,"$conj",function(){var g=this;return x.$Complex(g.real,g.imag["$-@"]())}),M(S,"$denominator",function(){var g=this;return g.real.$denominator().$lcm(g.imag.$denominator())}),M(S,"$eql?",function(g){var c=this,l=k,q=k;return w(l=w(q=u("Complex")["$==="](g))?c.real.$class()["$=="](c.imag.$class()):q)?c["$=="](g):l}),M(S,"$fdiv",function(g){var c=this;return D(F("Numeric"),g)||x.$raise(F("TypeError"),""+g.$class()+" can't be coerced into Complex"),L(c,g)}),M(S,"$finite?",function(){var g=this,c=k;return w(c=g.real["$finite?"]())?g.imag["$finite?"]():c}),M(S,"$hash",function(){var g=this;return[F("Complex"),g.real,g.imag].$hash()}),M(S,"$infinite?",function(){var g=this,c=k;return w(c=g.real["$infinite?"]())?c:g.imag["$infinite?"]()}),M(S,"$inspect",function(){var g=this;return"("+g+")"}),M(S,"$numerator",function(){var g=this,c=k;return c=g.$denominator(),x.$Complex(Z(g.real.$numerator(),L(c,g.real.$denominator())),Z(g.imag.$numerator(),L(c,g.imag.$denominator())))}),M(S,"$polar",function(){var g=this;return[g.$abs(),g.$arg()]}),M(S,"$rationalize",function(g){var c=this;return arguments.length>1&&x.$raise(F("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),O(c.imag,0)&&x.$raise(F("RangeError"),"can't convert "+c+" into Rational"),c.$real().$rationalize(g)},-1),M(S,"$real?",H(!1)),M(S,"$rect",function(){var g=this;return[g.real,g.imag]}),M(S,"$to_f",function(){var g=this;return $e(g.imag,0)||x.$raise(F("RangeError"),"can't convert "+g+" into Float"),g.real.$to_f()}),M(S,"$to_i",function(){var g=this;return $e(g.imag,0)||x.$raise(F("RangeError"),"can't convert "+g+" into Integer"),g.real.$to_i()}),M(S,"$to_r",function(){var g=this;return $e(g.imag,0)||x.$raise(F("RangeError"),"can't convert "+g+" into Rational"),g.real.$to_r()}),M(S,"$to_s",function(){var g=this,c=k;return c=g.real.$inspect(),c=J(c,D(F("Number"),g.imag)&&w(g.imag["$nan?"]())||w(g.imag["$positive?"]())||w(g.imag["$zero?"]())?"+":"-"),c=J(c,g.imag.$abs().$inspect()),D(F("Number"),g.imag)&&(w(g.imag["$nan?"]())||w(g.imag["$infinite?"]()))&&(c=J(c,"*")),J(c,"i")}),b(E[0],"I",S.$new(0,1)),ee(S,"$from_string",function(g){var c=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;g.match(c);var l,q;function G(){return c.test(g)}function _(){var $=g.match(c),t=$[0];return g=g.slice(t.length),t.replace(/_/g,"")}function s(){if(G()){var $=parseFloat(_());if(g[0]==="/")if(g=g.slice(1),G()){var t=parseFloat(_());return x.$Rational($,t)}else return g="/"+g,$;else return $}else return null}return l=s(),l?(q=s(),q?x.$Complex(l,q):g[0]==="i"?x.$Complex(0,l):x.$Complex(l,0)):g[0]==="i"?x.$Complex(0,1):g[0]==="-"&&g[1]==="i"?x.$Complex(0,-1):g[0]==="+"&&g[1]==="i"?x.$Complex(0,1):x.$Complex(0,0)}),function(N,g){return h(N,"rectangular","rect")}(n.get_singleton_class(S)),h(S,"arg","angle"),h(S,"conjugate","conj"),h(S,"divide","/"),h(S,"imaginary","imag"),h(S,"magnitude","abs"),h(S,"phase","arg"),h(S,"quo","/"),h(S,"rectangular","rect"),n.udef(S,"$negative?"),n.udef(S,"$positive?"),n.udef(S,"$step"),k}("::",F("Numeric"),j)};Opal.modules["corelib/rational/base"]=function(n){var z=n.module,w=n.def,D=n.klass;n.nil;var x=n.$$$;return n.add_stubs("convert,from_string"),function(ee){var Z=z(ee,"Kernel");return w(Z,"$Rational",function(J,v){return v==null&&(v=1),x("Rational").$convert(J,v)},-2)}("::"),function(ee,Z){var M=D(ee,Z,"String");return w(M,"$to_r",function(){var v=this;return x("Rational").$from_string(v)})}("::",null)};Opal.modules["corelib/rational"]=function(n){var z=n.klass,w=n.eqeq,D=n.Kernel,x=n.truthy,ee=n.rb_lt,Z=n.rb_divide,M=n.defs,J=n.eqeqeq,v=n.not,L=n.Opal,$e=n.def,W=n.return_ivar,Y=n.rb_minus,O=n.rb_times,H=n.rb_plus,b=n.rb_gt,h=n.rb_le,I=n.return_self,j=n.alias,k=n.top,F=n.nil,p=n.$$$;return n.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),k.$require("corelib/numeric"),k.$require("corelib/rational/base"),function(A,P){var S=z(A,P,"Rational"),E=S.$$prototype;return E.num=E.den=F,M(S,"$reduce",function(d,N){var g=this,c=F;if(d=d.$to_i(),N=N.$to_i(),w(N,0))D.$raise(p("ZeroDivisionError"),"divided by 0");else if(x(ee(N,0)))d=d["$-@"](),N=N["$-@"]();else if(w(N,1))return g.$new(d,N);return c=d.$gcd(N),g.$new(Z(d,c),Z(N,c))}),M(S,"$convert",function(d,N){var g=this;return(x(d["$nil?"]())||x(N["$nil?"]()))&&D.$raise(p("TypeError"),"cannot convert nil into Rational"),J(p("Integer"),d)&&J(p("Integer"),N)?g.$reduce(d,N):((J(p("Float"),d)||J(p("String"),d)||J(p("Complex"),d))&&(d=d.$to_r()),(J(p("Float"),N)||J(p("String"),N)||J(p("Complex"),N))&&(N=N.$to_r()),x(N["$equal?"](1))&&v(p("Integer")["$==="](d))?L["$coerce_to!"](d,p("Rational"),"to_r"):J(p("Numeric"),d)&&J(p("Numeric"),N)?Z(d,N):g.$reduce(d,N))}),$e(S,"$initialize",function(d,N){var g=this;return g.num=d,g.den=N,g.$freeze()}),$e(S,"$numerator",W("num")),$e(S,"$denominator",W("den")),$e(S,"$coerce",function(d){var N=this,g=F;return J(p("Rational"),g=d)?[d,N]:J(p("Integer"),g)?[d.$to_r(),N]:J(p("Float"),g)?[d,N.$to_f()]:F}),$e(S,"$==",function(d){var N=this,g=F,c=F;return J(p("Rational"),g=d)?x(c=N.num["$=="](d.$numerator()))?N.den["$=="](d.$denominator()):c:J(p("Integer"),g)?x(c=N.num["$=="](d))?N.den["$=="](1):c:J(p("Float"),g)?N.$to_f()["$=="](d):d["$=="](N)}),$e(S,"$<=>",function(d){var N=this,g=F;return J(p("Rational"),g=d)?Y(O(N.num,d.$denominator()),O(N.den,d.$numerator()))["$<=>"](0):J(p("Integer"),g)?Y(N.num,O(N.den,d))["$<=>"](0):J(p("Float"),g)?N.$to_f()["$<=>"](d):N.$__coerced__("<=>",d)}),$e(S,"$+",function(d){var N=this,g=F,c=F,l=F;return J(p("Rational"),g=d)?(c=H(O(N.num,d.$denominator()),O(N.den,d.$numerator())),l=O(N.den,d.$denominator()),D.$Rational(c,l)):J(p("Integer"),g)?D.$Rational(H(N.num,O(d,N.den)),N.den):J(p("Float"),g)?H(N.$to_f(),d):N.$__coerced__("+",d)}),$e(S,"$-",function(d){var N=this,g=F,c=F,l=F;return J(p("Rational"),g=d)?(c=Y(O(N.num,d.$denominator()),O(N.den,d.$numerator())),l=O(N.den,d.$denominator()),D.$Rational(c,l)):J(p("Integer"),g)?D.$Rational(Y(N.num,O(d,N.den)),N.den):J(p("Float"),g)?Y(N.$to_f(),d):N.$__coerced__("-",d)}),$e(S,"$*",function(d){var N=this,g=F,c=F,l=F;return J(p("Rational"),g=d)?(c=O(N.num,d.$numerator()),l=O(N.den,d.$denominator()),D.$Rational(c,l)):J(p("Integer"),g)?D.$Rational(O(N.num,d),N.den):J(p("Float"),g)?O(N.$to_f(),d):N.$__coerced__("*",d)}),$e(S,"$/",function(d){var N=this,g=F,c=F,l=F;return J(p("Rational"),g=d)?(c=O(N.num,d.$denominator()),l=O(N.den,d.$numerator()),D.$Rational(c,l)):J(p("Integer"),g)?w(d,0)?Z(N.$to_f(),0):D.$Rational(N.num,O(N.den,d)):J(p("Float"),g)?Z(N.$to_f(),d):N.$__coerced__("/",d)}),$e(S,"$**",function(d){var N=this,g=F;return J(p("Integer"),g=d)?w(N,0)&&x(ee(d,0))?p(p("Float"),"INFINITY"):x(b(d,0))?D.$Rational(N.num["$**"](d),N.den["$**"](d)):x(ee(d,0))?D.$Rational(N.den["$**"](d["$-@"]()),N.num["$**"](d["$-@"]())):D.$Rational(1,1):J(p("Float"),g)?N.$to_f()["$**"](d):J(p("Rational"),g)?w(d,0)?D.$Rational(1,1):w(d.$denominator(),1)?x(ee(d,0))?D.$Rational(N.den["$**"](d.$numerator().$abs()),N.num["$**"](d.$numerator().$abs())):D.$Rational(N.num["$**"](d.$numerator()),N.den["$**"](d.$numerator())):w(N,0)&&x(ee(d,0))?D.$raise(p("ZeroDivisionError"),"divided by 0"):N.$to_f()["$**"](d):N.$__coerced__("**",d)}),$e(S,"$abs",function(){var d=this;return D.$Rational(d.num.$abs(),d.den.$abs())}),$e(S,"$ceil",function(d){var N=this;return d==null&&(d=0),w(d,0)?Z(N.num["$-@"](),N.den)["$-@"]().$ceil():N.$with_precision("ceil",d)},-1),$e(S,"$floor",function(d){var N=this;return d==null&&(d=0),w(d,0)?Z(N.num["$-@"](),N.den)["$-@"]().$floor():N.$with_precision("floor",d)},-1),$e(S,"$hash",function(){var d=this;return[p("Rational"),d.num,d.den].$hash()}),$e(S,"$inspect",function(){var d=this;return"("+d+")"}),$e(S,"$rationalize",function(d){var N=this;if(arguments.length>1&&D.$raise(p("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),d==null)return N;for(var g=d.$abs(),c=Y(N,g),l=H(N,g),q=0,G=1,_=1,s=0,$,t,e,r,i;e=c.$ceil(),!h(e,l);)r=e-1,$=r*G+q,t=r*s+_,i=Z(1,Y(l,r)),l=Z(1,Y(c,r)),c=i,q=G,_=s,G=$,s=t;return D.$Rational(e*G+q,e*s+_)},-1),$e(S,"$round",function(d){var N=this,g=F,c=F,l=F;return d==null&&(d=0),w(d,0)?w(N.num,0)?0:w(N.den,1)?N.num:(g=H(O(N.num.$abs(),2),N.den),c=O(N.den,2),l=Z(g,c).$truncate(),x(ee(N.num,0))?l["$-@"]():l):N.$with_precision("round",d)},-1),$e(S,"$to_f",function(){var d=this;return Z(d.num,d.den)}),$e(S,"$to_i",function(){var d=this;return d.$truncate()}),$e(S,"$to_r",I),$e(S,"$to_s",function(){var d=this;return""+d.num+"/"+d.den}),$e(S,"$truncate",function(d){var N=this;return d==null&&(d=0),w(d,0)?x(ee(N.num,0))?N.$ceil():N.$floor():N.$with_precision("truncate",d)},-1),$e(S,"$with_precision",function(d,N){var g=this,c=F,l=F;return J(p("Integer"),N)||D.$raise(p("TypeError"),"not an Integer"),c=10["$**"](N),l=O(g,c),x(ee(N,1))?Z(l.$send(d),c).$to_i():D.$Rational(l.$send(d),c)}),M(S,"$from_string",function(d){var N=d.trimLeft(),g=/^[+-]?[\d_]+(\.[\d_]+)?/;N.match(g);var c,l;function q(){return g.test(N)}function G(){var _=N.match(g),s=_[0];return N=N.slice(s.length),s.replace(/_/g,"")}return q()?(c=parseFloat(G()),N[0]==="/"?(N=N.slice(1),q()?(l=parseFloat(G()),D.$Rational(c,l)):D.$Rational(c,1)):D.$Rational(c,1)):D.$Rational(0,1)}),j(S,"divide","/"),j(S,"quo","/")}("::",p("Numeric"))};Opal.modules["corelib/time"]=function(n){var z=n.slice,w=n.deny_frozen_access,D=n.klass,x=n.Kernel,ee=n.Opal,Z=n.defs,M=n.eqeqeq,J=n.def,v=n.truthy,L=n.rb_gt,$e=n.rb_lt,W=n.send,Y=n.rb_plus,O=n.rb_divide,H=n.rb_minus,b=n.range,h=n.neqeq,I=n.rb_le,j=n.eqeq,k=n.alias,F=n.top,p=[],A=n.nil,P=n.$$$;return n.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),F.$require("corelib/comparable"),function(S,E,u){var d=D(S,E,"Time"),N=[d].concat(u),g=n.$r(N);d.$include(P("Comparable"));var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],G=["January","February","March","April","May","June","July","August","September","October","November","December"];Z(d,"$at",function($,t){var e;return P("Time")["$==="]($)?(t!==void 0&&x.$raise(P("TypeError"),"can't convert Time into an exact number"),e=new Date($.getTime()),e.timezone=$.timezone,e):($.$$is_number||($=ee["$coerce_to!"]($,P("Integer"),"to_int")),t===void 0?new Date($*1e3):(t.$$is_number||(t=ee["$coerce_to!"](t,P("Integer"),"to_int")),new Date($*1e3+t/1e3)))},-2);function _(s,$,t,e,r,i){if(s.$$is_string?s=parseInt(s,10):s=ee["$coerce_to!"](s,P("Integer"),"to_int"),$===A)$=1;else if(!$.$$is_number)if($["$respond_to?"]("to_str"))switch($=$.$to_str(),$.toLowerCase()){case"jan":$=1;break;case"feb":$=2;break;case"mar":$=3;break;case"apr":$=4;break;case"may":$=5;break;case"jun":$=6;break;case"jul":$=7;break;case"aug":$=8;break;case"sep":$=9;break;case"oct":$=10;break;case"nov":$=11;break;case"dec":$=12;break;default:$=$.$to_i()}else $=ee["$coerce_to!"]($,P("Integer"),"to_int");return($<1||$>12)&&x.$raise(P("ArgumentError"),"month out of range: "+$),$=$-1,t===A?t=1:t.$$is_string?t=parseInt(t,10):t=ee["$coerce_to!"](t,P("Integer"),"to_int"),(t<1||t>31)&&x.$raise(P("ArgumentError"),"day out of range: "+t),e===A?e=0:e.$$is_string?e=parseInt(e,10):e=ee["$coerce_to!"](e,P("Integer"),"to_int"),(e<0||e>24)&&x.$raise(P("ArgumentError"),"hour out of range: "+e),r===A?r=0:r.$$is_string?r=parseInt(r,10):r=ee["$coerce_to!"](r,P("Integer"),"to_int"),(r<0||r>59)&&x.$raise(P("ArgumentError"),"min out of range: "+r),i===A?i=0:i.$$is_number||(i.$$is_string?i=parseInt(i,10):i=ee["$coerce_to!"](i,P("Integer"),"to_int")),(i<0||i>60)&&x.$raise(P("ArgumentError"),"sec out of range: "+i),[s,$,t,e,r,i]}return Z(d,"$new",function($,t,e,r,i,a,o){var m=this;t==null&&(t=A),e==null&&(e=A),r==null&&(r=A),i==null&&(i=A),a==null&&(a=A),o==null&&(o=A);var T,K,C,V;return $===void 0?new Date:(T=_($,t,e,r,i,a),$=T[0],t=T[1],e=T[2],r=T[3],i=T[4],a=T[5],o===A?(K=new Date($,t,e,r,i,0,a*1e3),$<100&&K.setFullYear($),K):(C=m.$_parse_offset(o),V=new Date(Date.UTC($,t,e,r,i,0,a*1e3)),$<100&&V.setUTCFullYear($),K=new Date(V.getTime()-C*36e5),K.timezone=C,K))},-1),Z(d,"$_parse_offset",function($){var t;if($.$$is_string)if($=="UTC")t=0;else if(/^[+-]\d\d:[0-5]\d$/.test($)){var e,r,i;e=$[0],r=+($[1]+$[2]),i=+($[4]+$[5]),t=(e=="-"?-1:1)*(r+i/60)}else x.$raise(P("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+$);else $.$$is_number?t=$/3600:x.$raise(P("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return t}),Z(d,"$local",function($,t,e,r,i,a,o,m,T,K){t==null&&(t=A),e==null&&(e=A),r==null&&(r=A),i==null&&(i=A),a==null&&(a=A),o==null&&(o=A),m==null&&(m=A),T==null&&(T=A),K==null&&(K=A);var C,V;return arguments.length===10&&(C=z(arguments),$=C[5],t=C[4],e=C[3],r=C[2],i=C[1],a=C[0]),C=_($,t,e,r,i,a),$=C[0],t=C[1],e=C[2],r=C[3],i=C[4],a=C[5],V=new Date($,t,e,r,i,0,a*1e3),$<100&&V.setFullYear($),V},-2),Z(d,"$gm",function($,t,e,r,i,a,o,m,T,K){t==null&&(t=A),e==null&&(e=A),r==null&&(r=A),i==null&&(i=A),a==null&&(a=A),o==null&&(o=A),m==null&&(m=A),T==null&&(T=A),K==null&&(K=A);var C,V;return arguments.length===10&&(C=z(arguments),$=C[5],t=C[4],e=C[3],r=C[2],i=C[1],a=C[0]),C=_($,t,e,r,i,a),$=C[0],t=C[1],e=C[2],r=C[3],i=C[4],a=C[5],V=new Date(Date.UTC($,t,e,r,i,0,a*1e3)),$<100&&V.setUTCFullYear($),V.timezone=0,V},-2),Z(d,"$now",function(){var $=this;return $.$new()}),J(d,"$+",function($){var t=this;M(P("Time"),$)&&x.$raise(P("TypeError"),"time + time?"),$.$$is_number||($=ee["$coerce_to!"]($,P("Integer"),"to_int"));var e=new Date(t.getTime()+$*1e3);return e.timezone=t.timezone,e}),J(d,"$-",function($){var t=this;if(M(P("Time"),$))return(t.getTime()-$.getTime())/1e3;$.$$is_number||($=ee["$coerce_to!"]($,P("Integer"),"to_int"));var e=new Date(t.getTime()-$*1e3);return e.timezone=t.timezone,e}),J(d,"$<=>",function($){var t=this,e=A;return M(P("Time"),$)?t.$to_f()["$<=>"]($.$to_f()):(e=$["$<=>"](t),v(e["$nil?"]())?A:v(L(e,0))?-1:v($e(e,0))?1:0)}),J(d,"$==",function($){var t=this,e=A;return v(e=P("Time")["$==="]($))?t.$to_f()===$.$to_f():e}),J(d,"$asctime",function(){var $=this;return $.$strftime("%a %b %e %H:%M:%S %Y")}),W([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function s($,t,e,r){var i=s.$$s==null?this:s.$$s;return $==null&&($=A),t==null&&(t=A),e==null&&(e=A),r==null&&(r=0),W(i,"define_method",[$],function a(){var o=a.$$s==null?this:a.$$s;return r+(o.timezone!=null?new Date(o.getTime()+o.timezone*36e5)[e]():o[t]())},{$$s:i})},{$$arity:-4,$$s:d}),J(d,"$yday",function(){var $=this,t=A,e=A,r=A;return t=g("Time").$new($.$year()).$to_i(),e=g("Time").$new($.$year(),$.$month(),$.$day()).$to_i(),r=86400,Y(O(H(e,t),r).$round(),1)}),J(d,"$isdst",function(){var $=this,t=new Date($.getFullYear(),0,1),e=new Date($.getFullYear(),6,1);return $.getTimezoneOffset()<Math.max(t.getTimezoneOffset(),e.getTimezoneOffset())}),J(d,"$dup",function(){var $=this,t=A;return t=new Date($.getTime()),t.$copy_instance_variables($),t.$initialize_dup($),t}),J(d,"$eql?",function($){var t=this,e=A;return v(e=$["$is_a?"](P("Time")))?t["$<=>"]($)["$zero?"]():e}),W([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function s($,t){var e=s.$$s==null?this:s.$$s;return $==null&&($=A),t==null&&(t=A),W(e,"define_method",[$],function r(){var i=r.$$s==null?this:r.$$s;return i.$wday()===t},{$$s:e})},{$$s:d}),J(d,"$hash",function(){var $=this;return[P("Time"),$.getTime()].$hash()}),J(d,"$inspect",function(){var $=this;return v($["$utc?"]())?$.$strftime("%Y-%m-%d %H:%M:%S UTC"):$.$strftime("%Y-%m-%d %H:%M:%S %z")}),J(d,"$succ",function(){var $=this,t=new Date($.getTime()+1e3);return t.timezone=$.timezone,t}),J(d,"$usec",function(){var $=this;return $.getMilliseconds()*1e3}),J(d,"$zone",function(){var $=this;if($.timezone===0)return"UTC";if($.timezone!=null)return A;var t=$.toString(),e;return t.indexOf("(")==-1?e=t.match(/[A-Z]{3,4}/)[0]:e=t.match(/\((.+)\)(?:\s|$)/)[1],e=="GMT"&&/(GMT\W*\d{4})/.test(t)?RegExp.$1:e}),J(d,"$getgm",function(){var $=this,t=new Date($.getTime());return t.timezone=0,t}),J(d,"$gmtime",function(){var $=this;return $.timezone!==0&&(w($),$.timezone=0),$}),J(d,"$gmt?",function(){var $=this;return $.timezone===0}),J(d,"$gmt_offset",function(){var $=this;return $.timezone!=null?$.timezone*60:-$.getTimezoneOffset()*60}),J(d,"$strftime",function($){var t=this;return $.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,r,i,a,o){var m="",T,K,C,V=r.indexOf("0")!==-1,re=r.indexOf("-")===-1,ae=r.indexOf("_")!==-1,le=r.indexOf("^")!==-1,_e=r.indexOf("#")!==-1,de=(r.match(":")||[]).length;switch(i=parseInt(i,10),V&&ae&&(r.indexOf("0")<r.indexOf("_")?V=!1:ae=!1),o){case"Y":m+=t.$year();break;case"C":V=!ae,m+=Math.round(t.$year()/100);break;case"y":V=!ae,m+=t.$year()%100;break;case"m":V=!ae,m+=t.$mon();break;case"B":m+=G[t.$mon()-1];break;case"b":case"h":ae=!V,m+=q[t.$mon()-1];break;case"d":V=!ae,m+=t.$day();break;case"e":ae=!V,m+=t.$day();break;case"j":V=!ae,i=isNaN(i)?3:i,m+=t.$yday();break;case"H":V=!ae,m+=t.$hour();break;case"k":ae=!V,m+=t.$hour();break;case"I":V=!ae,m+=t.$hour()%12||12;break;case"l":ae=!V,m+=t.$hour()%12||12;break;case"P":m+=t.$hour()>=12?"pm":"am";break;case"p":m+=t.$hour()>=12?"PM":"AM";break;case"M":V=!ae,m+=t.$min();break;case"S":V=!ae,m+=t.$sec();break;case"L":V=!ae,i=isNaN(i)?3:i,m+=t.getMilliseconds();break;case"N":i=isNaN(i)?9:i,m+=t.getMilliseconds().toString().$rjust(3,"0"),m=m.$ljust(i,"0");break;case"z":var ge=t.timezone==null?t.getTimezoneOffset():-t.timezone*60,ve=Math.floor(Math.abs(ge)/60),me=Math.abs(ge)%60;m+=ge<0?"+":"-",m+=ve<10?"0":"",m+=ve,de>0&&(m+=":"),m+=me<10?"0":"",m+=me,de>1&&(m+=":00");break;case"Z":m+=t.$zone();break;case"A":m+=c[t.$wday()];break;case"a":m+=l[t.$wday()];break;case"u":m+=t.$wday()+1;break;case"w":m+=t.$wday();break;case"V":m+=t.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":m+=t.$cweek_cyear()["$[]"](1);break;case"g":m+=t.$cweek_cyear()["$[]"](1)["$[]"](b(-2,-1,!1));break;case"s":m+=t.$to_i();break;case"n":m+=`
`;break;case"t":m+="	";break;case"%":m+="%";break;case"c":m+=t.$strftime("%a %b %e %T %Y");break;case"D":case"x":m+=t.$strftime("%m/%d/%y");break;case"F":m+=t.$strftime("%Y-%m-%d");break;case"v":m+=t.$strftime("%e-%^b-%4Y");break;case"r":m+=t.$strftime("%I:%M:%S %p");break;case"R":m+=t.$strftime("%H:%M");break;case"T":case"X":m+=t.$strftime("%H:%M:%S");break;case"J":if(T=t.$to_date().$jd(),T<2405160){m+=t.$strftime("%Y-%m-%d");break}else T<2419614?(K="M",C=1867):T<2424875?(K="T",C=1911):T<2447535?(K="S",C=1925):T<2458605?(K="H",C=1988):(K="R",C=2018);m+=t.$format("%c%02d",K,H(t.$year(),C)),m+=t.$strftime("-%m-%d");break;default:return e}return le&&(m=m.toUpperCase()),_e&&(m=m.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),re&&(V||ae)&&(m=m.$rjust(isNaN(i)?2:i,ae?" ":"0")),m})}),J(d,"$to_a",function(){var $=this;return[$.$sec(),$.$min(),$.$hour(),$.$day(),$.$month(),$.$year(),$.$wday(),$.$yday(),$.$isdst(),$.$zone()]}),J(d,"$to_f",function(){var $=this;return $.getTime()/1e3}),J(d,"$to_i",function(){var $=this;return parseInt($.getTime()/1e3,10)}),J(d,"$cweek_cyear",function(){var $=this,t=A,e=A,r=A,i=A,a=A,o=A,m=A;return t=P("Time").$new($.$year(),1,1),e=t.$wday(),r=$.$year(),v(I(e,4))&&h(e,0)?i=H(e,1):(i=H(H(e,7),1),j(i,-8)&&(i=-1)),a=O(Y($.$yday(),i),7).$ceil(),v(I(a,0))?P("Time").$new(H($.$year(),1),12,31).$cweek_cyear():(j(a,53)&&(o=P("Time").$new($.$year(),12,31),m=o.$wday(),v(I(m,3))&&h(m,0)&&(a=1,r=Y(r,1))),[a,r])}),function(s,$){return k(s,"mktime","local"),k(s,"utc","gm")}(n.get_singleton_class(d)),k(d,"ctime","asctime"),k(d,"dst?","isdst"),k(d,"getutc","getgm"),k(d,"gmtoff","gmt_offset"),k(d,"mday","day"),k(d,"month","mon"),k(d,"to_s","inspect"),k(d,"tv_sec","to_i"),k(d,"tv_usec","usec"),k(d,"utc","gmtime"),k(d,"utc?","gmt?"),k(d,"utc_offset","gmt_offset")}("::",Date,p)};Opal.modules["corelib/struct"]=function(n){var z=n.klass,w=n.slice,D=n.extract_kwargs,x=n.ensure_kwargs,ee=n.hash_get,Z=n.truthy,M=n.neqeq,J=n.eqeq,v=n.Opal,L=n.send,$e=n.Class,W=n.to_a,Y=n.def,O=n.defs,H=n.Kernel,b=n.rb_gt,h=n.rb_minus,I=n.eqeqeq,j=n.rb_lt,k=n.rb_ge,F=n.rb_plus,p=n.alias,A=n.top,P=[],S=n.nil,E=n.$$$;return n.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),A.$require("corelib/enumerable"),function(u,d,N){var g=z(u,d,"Struct"),c=[g].concat(N),l=n.$r(c);g.$include(E("Enumerable")),O(g,"$new",function G(_,s,$){var t=G.$$p||S,e,r,i,a,o=this,m=S;if(G.$$p=null,e=w(arguments,1),r=D(e),r=x(r),i=e,a=ee(r,"keyword_init"),a==null&&(a=!1),Z(_))if(J(_.$class(),E("String"))&&M(_["$[]"](0).$upcase(),_["$[]"](0)))i.$unshift(_),_=S;else try{_=v["$const_name!"](_)}catch(T){if(n.rescue(T,[E("TypeError"),E("NameError")]))try{i.$unshift(_),_=S}finally{n.pop_exception(T)}else throw T}return L(i,"map",[],function(K){return K==null&&(K=S),v["$coerce_to!"](K,E("String"),"to_str")}),m=L($e,"new",[o],function T(){var K=T.$$s==null?this:T.$$s;return L(i,"each",[],function C(V){var re=C.$$s==null?this:C.$$s;return V==null&&(V=S),re.$define_struct_attribute(V)},{$$s:K}),function(C,V){return Y(C,"$new",function(ae){var le,_e,de=this,ge=S;return le=w(arguments),_e=le,ge=de.$allocate(),ge.$$data={},L(ge,"initialize",W(_e)),ge},-1),C.$alias_method("[]","new")}(n.get_singleton_class(K))},{$$s:o}),Z(t)&&L(m,"module_eval",[],t.$to_proc()),m.$$keyword_init=a,Z(_)&&E("Struct").$const_set(_,m),m},-2),O(g,"$define_struct_attribute",function(_){var s=this;return J(s,E("Struct"))&&H.$raise(E("ArgumentError"),"you cannot define attributes to the Struct class"),s.$members()["$<<"](_),L(s,"define_method",[_],function $(){var t=$.$$s==null?this:$.$$s;return t.$$data[_]},{$$s:s}),L(s,"define_method",[""+_+"="],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=S),e.$$data[_]=t},{$$s:s})}),O(g,"$members",function(){var _=this,s=S;return _.members==null&&(_.members=S),J(_,E("Struct"))&&H.$raise(E("ArgumentError"),"the Struct class has no members"),_.members=Z(s=_.members)?s:[]}),O(g,"$inherited",function(_){var s=this,$=S;return s.members==null&&(s.members=S),$=s.members,L(_,"instance_eval",[],function t(){var e=t.$$s==null?this:t.$$s;return e.members=$},{$$s:s})}),Y(g,"$initialize",function(_){var s,$,t=this,e=S,r=S,i=S;return s=w(arguments),$=s,Z(t.$class().$$keyword_init)?(e=Z(r=$.$last())?r:new Map,(Z(b($.$length(),1))||Z($.length===1&&!e.$$is_hash))&&H.$raise(E("ArgumentError"),"wrong number of arguments (given "+$.$length()+", expected 0)"),i=h(e.$keys(),t.$class().$members()),Z(i["$any?"]())&&H.$raise(E("ArgumentError"),"unknown keywords: "+i.$join(", ")),L(t.$class().$members(),"each",[],function a(o){var m,T=a.$$s==null?this:a.$$s;return o==null&&(o=S),m=[o,e["$[]"](o)],L(T,"[]=",m),m[m.length-1]},{$$s:t})):(Z(b($.$length(),t.$class().$members().$length()))&&H.$raise(E("ArgumentError"),"struct size differs"),L(t.$class().$members(),"each_with_index",[],function a(o,m){var T,K=a.$$s==null?this:a.$$s;return o==null&&(o=S),m==null&&(m=S),T=[o,$["$[]"](m)],L(K,"[]=",T),T[T.length-1]},{$$s:t}))},-1),Y(g,"$initialize_copy",function(_){var s=this;s.$$data={};var $=Object.keys(_.$$data),t,e,r;for(t=0,e=$.length;t<e;t++)r=$[t],s.$$data[r]=_.$$data[r]}),O(g,"$keyword_init?",function(){var _=this;return _.$$keyword_init}),Y(g,"$members",function(){var _=this;return _.$class().$members()}),Y(g,"$hash",function(){var _=this;return[_.$class(),_.$to_a()].$hash()}),Y(g,"$[]",function(_){var s=this;return I(E("Integer"),_)?(Z(j(_,s.$class().$members().$size()["$-@"]()))&&H.$raise(E("IndexError"),"offset "+_+" too small for struct(size:"+s.$class().$members().$size()+")"),Z(k(_,s.$class().$members().$size()))&&H.$raise(E("IndexError"),"offset "+_+" too large for struct(size:"+s.$class().$members().$size()+")"),_=s.$class().$members()["$[]"](_)):I(E("String"),_)?s.$$data.hasOwnProperty(_)||H.$raise(E("NameError").$new("no member '"+_+"' in struct",_)):H.$raise(E("TypeError"),"no implicit conversion of "+_.$class()+" into Integer"),_=v["$coerce_to!"](_,E("String"),"to_str"),s.$$data[_]}),Y(g,"$[]=",function(_,s){var $=this;return I(E("Integer"),_)?(Z(j(_,$.$class().$members().$size()["$-@"]()))&&H.$raise(E("IndexError"),"offset "+_+" too small for struct(size:"+$.$class().$members().$size()+")"),Z(k(_,$.$class().$members().$size()))&&H.$raise(E("IndexError"),"offset "+_+" too large for struct(size:"+$.$class().$members().$size()+")"),_=$.$class().$members()["$[]"](_)):I(E("String"),_)?Z($.$class().$members()["$include?"](_.$to_sym()))||H.$raise(E("NameError").$new("no member '"+_+"' in struct",_)):H.$raise(E("TypeError"),"no implicit conversion of "+_.$class()+" into Integer"),_=v["$coerce_to!"](_,E("String"),"to_str"),$.$$data[_]=s}),Y(g,"$==",function(_){var s=this;if(!Z(_["$instance_of?"](s.$class())))return!1;var $={},t={};function e(r,i){var a,o,m;$[r.$__id__()]=!0,t[i.$__id__()]=!0;for(a in r.$$data)if(o=r.$$data[a],m=i.$$data[a],E("Struct")["$==="](o)){if((!$.hasOwnProperty(o.$__id__())||!t.hasOwnProperty(m.$__id__()))&&!e(o,m))return!1}else if(!o["$=="](m))return!1;return!0}return e(s,_)}),Y(g,"$eql?",function(_){var s=this;if(!Z(_["$instance_of?"](s.$class())))return!1;var $={},t={};function e(r,i){var a,o,m;$[r.$__id__()]=!0,t[i.$__id__()]=!0;for(a in r.$$data)if(o=r.$$data[a],m=i.$$data[a],E("Struct")["$==="](o)){if((!$.hasOwnProperty(o.$__id__())||!t.hasOwnProperty(m.$__id__()))&&!e(o,m))return!1}else if(!o["$eql?"](m))return!1;return!0}return e(s,_)}),Y(g,"$each",function G(){var _=G.$$p||S,s=this;return G.$$p=null,_===S?L(s,"enum_for",["each"],function $(){var t=$.$$s==null?this:$.$$s;return t.$size()},{$$s:s}):(L(s.$class().$members(),"each",[],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=S),n.yield1(_,e["$[]"](t))},{$$s:s}),s)}),Y(g,"$each_pair",function G(){var _=G.$$p||S,s=this;return G.$$p=null,_===S?L(s,"enum_for",["each_pair"],function $(){var t=$.$$s==null?this:$.$$s;return t.$size()},{$$s:s}):(L(s.$class().$members(),"each",[],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=S),n.yield1(_,[t,e["$[]"](t)])},{$$s:s}),s)}),Y(g,"$length",function(){var _=this;return _.$class().$members().$length()}),Y(g,"$to_a",function(){var _=this;return L(_.$class().$members(),"map",[],function s($){var t=s.$$s==null?this:s.$$s;return $==null&&($=S),t["$[]"]($)},{$$s:_})});var q=[];return Y(g,"$inspect",function(){var _=this,s=S,$=S;return function(){try{return s="#<struct ",Z(q["$include?"](_.$__id__()))?F(s,":...>"):(q["$<<"](_.$__id__()),$=!0,I(E("Struct"),_)&&Z(_.$class().$name())&&(s=F(s,""+_.$class()+" ")),s=F(s,L(_.$each_pair(),"map",[],function(e,r){return e==null&&(e=S),r==null&&(r=S),""+e+"="+l("Opal").$inspect(r)}).$join(", ")),s=F(s,">"),s)}finally{Z($)&&q.pop()}}()}),Y(g,"$to_h",function G(_){var s=G.$$p||S,$,t,e=this;return G.$$p=null,$=w(arguments),t=$,s!==S?L(L(e,"map",[],s.$to_proc()),"to_h",W(t)):L(e.$class().$members(),"each_with_object",[new Map],function r(i,a){var o,m=r.$$s==null?this:r.$$s;return i==null&&(i=S),a==null&&(a=S),o=[i,m["$[]"](i)],L(a,"[]=",o),o[o.length-1]},{$$s:e})},-1),Y(g,"$values_at",function(_){var s,$,t=this;s=w(arguments),$=s,$=L($,"map",[],function(o){return o==null&&(o=S),o.$$is_range?o.$to_a():o}).$flatten();for(var e=[],r=0,i=$.length;r<i;r++)$[r].$$is_number||H.$raise(E("TypeError"),"no implicit conversion of "+$[r].$class()+" into Integer"),e.push(t["$[]"]($[r]));return e},-1),Y(g,"$dig",function(_,s){var $,t,e=this,r=S;return $=w(arguments,1),t=$,r=Z(_.$$is_string&&e.$$data.hasOwnProperty(_))&&e.$$data[_]||S,r===S||t.length===0?r:(Z(r["$respond_to?"]("dig"))||H.$raise(E("TypeError"),""+r.$class()+" does not have #dig method"),L(r,"dig",W(t)))},-2),p(g,"size","length"),p(g,"to_s","inspect"),p(g,"values","to_a")}("::",null,P)};Opal.modules["corelib/set"]=function(n){var z=n.freeze,w=n.klass,D=n.slice,x=n.defs,ee=n.truthy,Z=n.eqeqeq,M=n.Kernel,J=n.send,v=n.def,L=n.eqeq,$e=n.rb_lt,W=n.rb_le,Y=n.alias,O=[],H=n.nil,b=n.$$$;return n.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(h,I,j){var k=w(h,I,"Set"),F=[k].concat(j),p=n.$r(F),A=H,P=k.$$prototype;P.hash=H,k.$include(b("Enumerable")),x(k,"$[]",function(u){var d,N,g=this;return d=D(arguments),N=d,g.$new(N)},-1),v(k,"$initialize",function E(u){var d=E.$$p||H,N=this;return E.$$p=null,u==null&&(u=H),N.hash=new Map,ee(u["$nil?"]())?H:(Z(b("Enumerable"),u)||M.$raise(b("ArgumentError"),"value must be enumerable"),ee(d)?J(u,"each",[],function g(c){var l=g.$$s==null?this:g.$$s;return c==null&&(c=H),l.$add(n.yield1(d,c))},{$$s:N}):N.$merge(u))},-1),v(k,"$dup",function(){var u=this,d=H;return d=u.$class().$new(),d.$merge(u)}),v(k,"$-",function(u){var d=this;return ee(u["$respond_to?"]("each"))||M.$raise(b("ArgumentError"),"value must be enumerable"),d.$dup().$subtract(u)}),v(k,"$inspect",function(){var u=this;return"#<Set: {"+u.$to_a().$join(",")+"}>"}),v(k,"$==",function(u){var d=this;return ee(d["$equal?"](u))?!0:ee(u["$instance_of?"](d.$class()))?d.hash["$=="](u.$instance_variable_get("@hash")):ee(u["$is_a?"](b("Set")))&&L(d.$size(),u.$size())?J(u,"all?",[],function N(g){var c=N.$$s==null?this:N.$$s;return c.hash==null&&(c.hash=H),g==null&&(g=H),c.hash["$include?"](g)},{$$s:d}):!1}),v(k,"$add",function(u){var d=this;return d.hash["$[]="](u,!0),d}),v(k,"$classify",function E(){var u=E.$$p||H,d=this,N=H;return E.$$p=null,u===H?d.$enum_for("classify"):(N=J(b("Hash"),"new",[],function g(c,l){var q,G=g.$$s==null?this:g.$$s;return c==null&&(c=H),l==null&&(l=H),q=[l,G.$class().$new()],J(c,"[]=",q),q[q.length-1]},{$$s:d}),J(d,"each",[],function(c){return c==null&&(c=H),N["$[]"](n.yield1(u,c)).$add(c)}),N)}),v(k,"$collect!",function E(){var u=E.$$p||H,d=this,N=H;return E.$$p=null,u===H?d.$enum_for("collect!"):(N=d.$class().$new(),J(d,"each",[],function(c){return c==null&&(c=H),N["$<<"](n.yield1(u,c))}),d.$replace(N))}),v(k,"$compare_by_identity",function(){var u=this;return ee(u.hash["$respond_to?"]("compare_by_identity"))?(u.hash.$compare_by_identity(),u):u.$raise(p("NotImplementedError"),""+u.$class().$name()+"#compare_by_identity is not implemented")}),v(k,"$compare_by_identity?",function(){var u=this,d=H;return ee(d=u.hash["$respond_to?"]("compare_by_identity?"))?u.hash["$compare_by_identity?"]():d}),v(k,"$delete",function(u){var d=this;return d.hash.$delete(u),d}),v(k,"$delete?",function(u){var d=this;return ee(d["$include?"](u))?(d.$delete(u),d):H}),v(k,"$delete_if",function E(){var u=E.$$p||H,d=this;return E.$$p=null,u===H?d.$enum_for("delete_if"):(J(J(d,"select",[],function(g){return g==null&&(g=H),n.yield1(u,g)}),"each",[],function N(g){var c=N.$$s==null?this:N.$$s;return c.hash==null&&(c.hash=H),g==null&&(g=H),c.hash.$delete(g)},{$$s:d}),d)}),v(k,"$freeze",function(){var u=this;return ee(u["$frozen?"]())?u:(u.hash.$freeze(),z(u))}),v(k,"$keep_if",function E(){var u=E.$$p||H,d=this;return E.$$p=null,u===H?d.$enum_for("keep_if"):(J(J(d,"reject",[],function(g){return g==null&&(g=H),n.yield1(u,g)}),"each",[],function N(g){var c=N.$$s==null?this:N.$$s;return c.hash==null&&(c.hash=H),g==null&&(g=H),c.hash.$delete(g)},{$$s:d}),d)}),v(k,"$reject!",function E(){var u=E.$$p||H,d=this,N=H;return E.$$p=null,u===H?d.$enum_for("reject!"):(N=d.$size(),J(d,"delete_if",[],u.$to_proc()),L(d.$size(),N)?H:d)}),v(k,"$select!",function E(){var u=E.$$p||H,d=this,N=H;return E.$$p=null,u===H?d.$enum_for("select!"):(N=d.$size(),J(d,"keep_if",[],u.$to_proc()),L(d.$size(),N)?H:d)}),v(k,"$add?",function(u){var d=this;return ee(d["$include?"](u))?H:d.$add(u)}),v(k,"$each",function E(){var u=E.$$p||H,d=this;return E.$$p=null,u===H?d.$enum_for("each"):(J(d.hash,"each_key",[],u.$to_proc()),d)}),v(k,"$empty?",function(){var u=this;return u.hash["$empty?"]()}),v(k,"$eql?",function(u){var d=this;return d.hash["$eql?"](J(u,"instance_eval",[],function N(){var g=N.$$s==null?this:N.$$s;return g.hash==null&&(g.hash=H),g.hash},{$$s:d}))}),v(k,"$clear",function(){var u=this;return u.hash.$clear(),u}),v(k,"$include?",function(u){var d=this;return d.hash["$include?"](u)}),v(k,"$merge",function(u){var d=this;return J(u,"each",[],function N(g){var c=N.$$s==null?this:N.$$s;return g==null&&(g=H),c.$add(g)},{$$s:d}),d}),v(k,"$replace",function(u){var d=this;return d.$clear(),d.$merge(u),d}),v(k,"$size",function(){var u=this;return u.hash.$size()}),v(k,"$subtract",function(u){var d=this;return J(u,"each",[],function N(g){var c=N.$$s==null?this:N.$$s;return g==null&&(g=H),c.$delete(g)},{$$s:d}),d}),v(k,"$|",function(u){var d=this;return ee(u["$respond_to?"]("each"))||M.$raise(b("ArgumentError"),"value must be enumerable"),d.$dup().$merge(u)});function S(E){ee(A=E["$is_a?"](b("Set")))||M.$raise(b("ArgumentError"),"value must be a set")}return v(k,"$superset?",function(u){var d=this;return S(u),ee($e(d.$size(),u.$size()))?!1:J(u,"all?",[],function N(g){var c=N.$$s==null?this:N.$$s;return g==null&&(g=H),c["$include?"](g)},{$$s:d})}),v(k,"$proper_superset?",function(u){var d=this;return S(u),ee(W(d.$size(),u.$size()))?!1:J(u,"all?",[],function N(g){var c=N.$$s==null?this:N.$$s;return g==null&&(g=H),c["$include?"](g)},{$$s:d})}),v(k,"$subset?",function(u){var d=this;return S(u),ee($e(u.$size(),d.$size()))?!1:J(d,"all?",[],function(g){return g==null&&(g=H),u["$include?"](g)})}),v(k,"$proper_subset?",function(u){var d=this;return S(u),ee(W(u.$size(),d.$size()))?!1:J(d,"all?",[],function(g){return g==null&&(g=H),u["$include?"](g)})}),v(k,"$intersect?",function(u){var d=this;return S(u),ee($e(d.$size(),u.$size()))?J(d,"any?",[],function(g){return g==null&&(g=H),u["$include?"](g)}):J(u,"any?",[],function N(g){var c=N.$$s==null?this:N.$$s;return g==null&&(g=H),c["$include?"](g)},{$$s:d})}),v(k,"$disjoint?",function(u){var d=this;return d["$intersect?"](u)["$!"]()}),v(k,"$to_a",function(){var u=this;return u.hash.$keys()}),Y(k,"+","|"),Y(k,"<","proper_subset?"),Y(k,"<<","add"),Y(k,"<=","subset?"),Y(k,">","proper_superset?"),Y(k,">=","superset?"),Y(k,"difference","-"),Y(k,"filter!","select!"),Y(k,"length","size"),Y(k,"map!","collect!"),Y(k,"member?","include?"),Y(k,"union","|")}("::",null,O)};Opal.modules["corelib/dir"]=function(n){var z=n.klass,w=n.def,D=n.truthy,x=n.alias,ee=n.nil,Z=n.$$$;return n.add_stubs("[],pwd"),function(M,J,v){var L=z(M,J,"Dir");return function($e,W){return w($e,"$chdir",function Y(O){var H=Y.$$p||ee,b=ee;return Y.$$p=null,function(){try{return b=n.current_dir,n.current_dir=O,n.yieldX(H,[])}finally{n.current_dir=b}}()}),w($e,"$pwd",function(){return n.current_dir||"."}),w($e,"$home",function(){var O=ee;return D(O=Z("ENV")["$[]"]("HOME"))?O:"."}),x($e,"getwd","pwd")}(n.get_singleton_class(L))}("::",null)};Opal.modules["corelib/file"]=function(n){var z=n.truthy,w=n.klass,D=n.const_set,x=n.Opal,ee=n.regexp,Z=n.rb_plus,M=n.def,J=n.Kernel,v=n.eqeq,L=n.rb_lt,$e=n.rb_minus,W=n.range,Y=n.send,O=n.slice,H=n.alias,b=[],h=n.nil,I=n.$$$;return n.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(j,k,F){var p=w(j,k,"File"),A=[p].concat(F),P=h;return D(A[0],"Separator",D(A[0],"SEPARATOR","/")),D(A[0],"ALT_SEPARATOR",h),D(A[0],"PATH_SEPARATOR",":"),D(A[0],"FNM_SYSCASE",0),P=/^[a-zA-Z]:(?:\\|\/)/,function(S,E){var u=[S].concat(E),d=n.$r(u);M(S,"$absolute_path",function(l,q){var G=h,_=h,s=h,$=h,t=h,e=h,r=h,i=h,a=h,o=h;q==null&&(q=h),G=d("SEPARATOR"),_=g(),s=[],l=z(l["$respond_to?"]("to_path"))?l.$to_path():l,l=x["$coerce_to!"](l,I("String"),"to_str"),q=z($=q)?$:I("Dir").$pwd(),t=l.substr(0,G.length)===G||P.test(l),e=q.substr(0,G.length)===G||P.test(q),z(t)?(r=l.$split(ee(["[",_,"]"])),i=P.test(l)?"":l.$sub(ee(["^([",_,"]+).*$"]),"\\1"),a=!0):(r=Z(q.$split(ee(["[",_,"]"])),l.$split(ee(["[",_,"]"]))),i=P.test(q)?"":q.$sub(ee(["^([",_,"]+).*$"]),"\\1"),a=e);for(var m,T=0,K=r.length;T<K;T++)m=r[T],!(m===h||m===""&&(s.length===0||a)||m==="."&&(s.length===0||a))&&(m===".."?s.pop():s.push(m));return!a&&r[0]!=="."&&s.$unshift("."),o=s.$join(G),z(a)&&(o=Z(i,o)),o},-2),M(S,"$expand_path",function(l,q){var G=this,_=h,s=h,$=h,t=h,e=h;return q==null&&(q=h),_=d("SEPARATOR"),s=g(),z(l[0]==="~"||q&&q[0]==="~")&&($=d("Dir").$home(),z($)||J.$raise(I("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),t=P.test($)?"":$.$sub(ee(["^([",s,"]+).*$"]),"\\1"),z($["$start_with?"](t))||J.$raise(I("ArgumentError"),"non-absolute home"),$=Z($,_),e=ee(["^\\~(?:",_,"|$)"]),l=l.$sub(e,$),z(q)&&(q=q.$sub(e,$))),G.$absolute_path(l,q)},-2);function N(c){return z(c["$respond_to?"]("to_path"))&&(c=c.$to_path()),c=x["$coerce_to!"](c,I("String"),"to_str"),c}function g(){return d("ALT_SEPARATOR")===h?n.escape_regexp(d("SEPARATOR")):n.escape_regexp(Z(d("SEPARATOR"),d("ALT_SEPARATOR")))}return M(S,"$dirname",function(l,q){var G=this,_=h;if(q==null&&(q=1),v(q,0))return l;z(L(q,0))&&J.$raise(I("ArgumentError"),"level can't be negative"),_=g(),l=N(l);var s=l.match(new RegExp("^["+_+"]")),$;return l=l.replace(new RegExp("["+_+"]+$"),""),l=l.replace(new RegExp("[^"+_+"]+$"),""),l=l.replace(new RegExp("["+_+"]+$"),""),l===""?$=s?"/":".":$=l,q==1?$:G.$dirname($,$e(q,1))},-2),M(S,"$basename",function(l,q){var G=h;return q==null&&(q=h),G=g(),l=N(l),l.length==0||(q!==h?q=x["$coerce_to!"](q,I("String"),"to_str"):q=null,l=l.replace(new RegExp("(.)["+G+"]*$"),"$1"),l=l.replace(new RegExp("^(?:.*["+G+"])?([^"+G+"]+)$"),"$1"),q===".*"?l=l.replace(/\.[^\.]+$/,""):q!==null&&(q=n.escape_regexp(q),l=l.replace(new RegExp(""+q+"$"),""))),l},-2),M(S,"$extname",function(l){var q=this,G=h,_=h;return l=N(l),G=q.$basename(l),z(G["$empty?"]())||(_=G["$[]"](W(1,-1,!1)).$rindex("."),z(_["$nil?"]())||v(Z(_,1),$e(G.$length(),1)))?"":G["$[]"](n.Range.$new(Z(_,1),-1,!1))}),M(S,"$exist?",function(l){return n.modules[l]!=null}),M(S,"$directory?",function(l){var q=h;q=[];for(var G in n.modules)q.push(G);return l=l.$gsub(ee(["(^.",d("SEPARATOR"),"+|",d("SEPARATOR"),"+$)"])),Y(q,"find",[],function(s){return s==null&&(s=h),s["$=~"](ee(["^",l]))})}),M(S,"$join",function(l){var q,G,_=h;return q=O(arguments),G=q,z(G["$empty?"]())?"":(_="",G=Y(G.$flatten().$each_with_index(),"map",[],function($,t){return $==null&&($=h),t==null&&(t=h),v(t,0)&&z($["$empty?"]())||v(G.$length(),Z(t,1))&&z($["$empty?"]())?d("SEPARATOR"):$}),G=Y(G,"reject",[],"empty?".$to_proc()),Y(G,"each_with_index",[],function($,t){var e=h;return $==null&&($=h),t==null&&(t=h),e=G["$[]"](Z(t,1)),z(e["$nil?"]())?_=""+_+$:(z($["$end_with?"](d("SEPARATOR")))&&z(e["$start_with?"](d("SEPARATOR")))&&($=$.$sub(ee([d("SEPARATOR"),"+$"]),"")),_=z($["$end_with?"](d("SEPARATOR")))||z(e["$start_with?"](d("SEPARATOR")))?""+_+$:""+_+$+d("SEPARATOR"))}),_)},-1),M(S,"$split",function(l){return l.$split(d("SEPARATOR"))}),H(S,"realpath","expand_path"),H(S,"exists?","exist?")}(n.get_singleton_class(p),A)}("::",I("IO"),b)};Opal.modules["corelib/process/base"]=function(n){var z=n.klass,w=n.slice,D=n.defs,x=n.return_val,ee=n.nil;return function(Z,M){var J=z(Z,M,"Signal");return D(J,"$trap",function(L){return w(arguments),ee},-1)}("::",null),function(Z,M){var J=z(Z,M,"GC");return D(J,"$start",x(ee))}("::",null)};Opal.modules["corelib/process"]=function(n){var z=n.module,w=n.defs,D=n.truthy,x=n.return_val,ee=n.Kernel,Z=n.nil,M=n.$$$;return n.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(J){var v=z(J,"Process"),L=Z;if(v.__clocks__=[],w(v,"$__register_clock__",function(Y,O){var H=this;return H.__clocks__==null&&(H.__clocks__=Z),H.$const_set(Y,H.__clocks__.$size()),H.__clocks__["$<<"](O)}),v.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),L=!1,n.global.performance)L=function(){return performance.now()};else if(n.global.process&&process.hrtime){var $e=process.hrtime();L=function(){var W=process.hrtime($e),Y=W[1]/1e3|0;return W[0]*1e3+Y/1e3}}return D(L)&&v.$__register_clock__("CLOCK_MONOTONIC",L),w(v,"$pid",x(0)),w(v,"$times",function(){var Y=Z;return Y=M("Time").$now().$to_f(),M(M("Benchmark"),"Tms").$new(Y,Y,Y,Y,Y)}),w(v,"$clock_gettime",function(Y,O){var H=this,b=Z;H.__clocks__==null&&(H.__clocks__=Z),O==null&&(O="float_second"),D(b=H.__clocks__["$[]"](Y))||ee.$raise(M(M("Errno"),"EINVAL"),"clock_gettime("+Y+") "+H.__clocks__["$[]"](Y));var h=b();switch(O){case"float_second":return h/1e3;case"float_millisecond":return h/1;case"float_microsecond":return h*1e3;case"second":return h/1e3|0;case"millisecond":return h/1|0;case"microsecond":return h*1e3|0;case"nanosecond":return h*1e6|0;default:ee.$raise(M("ArgumentError"),"unexpected unit: "+O)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(n){var z=n.klass,w=n.module,D=n.def,x=n.range,ee=n.send,Z=n.rb_divide,M=n.Kernel,J=n.Opal,v=[],L=n.nil,$e=n.$$$;return n.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(W,Y,O){var H=z(W,Y,"Random"),b=[H].concat(O);return function(h,I){var j=w(h,"Formatter"),k=[j].concat(I),F=n.$r(k);return D(j,"$hex",function(A){var P=this;A==null&&(A=L),A=$e("Random").$_verify_count(A);for(var S=P.$bytes(A),E="",u=0;u<A;u++)E+=S.charCodeAt(u).toString(16).padStart(2,"0");return E.$encode("US-ASCII")},-1),D(j,"$random_bytes",function(A){var P=this;return A==null&&(A=L),P.$bytes(A)},-1),D(j,"$base64",function(A){var P=this;return A==null&&(A=L),$e("Base64").$strict_encode64(P.$random_bytes(A)).$encode("US-ASCII")},-1),D(j,"$urlsafe_base64",function(A,P){var S=this;return A==null&&(A=L),P==null&&(P=!1),$e("Base64").$urlsafe_encode64(S.$random_bytes(A),P).$encode("US-ASCII")},-1),D(j,"$uuid",function(){var A=this,P=L;return P=A.$hex(16).$split(""),P["$[]="](12,"4"),P["$[]="](16,(parseInt(P["$[]"](16),16)&3|8).toString(16)),P=[P["$[]"](x(0,8,!0)),P["$[]"](x(8,12,!0)),P["$[]"](x(12,16,!0)),P["$[]"](x(16,20,!0)),P["$[]"](x(20,32,!0))],P=ee(P,"map",[],"join".$to_proc()),P.$join("-")}),D(j,"$random_float",function(){var A=this,P=L,S=L;return P=A.$bytes(4),S=0,ee(4,"times",[],function(u){return u==null&&(u=L),S=S["$<<"](8),S=S["$|"](P["$[]"](u).$ord())}),Z(S.$abs(),2147483647)}),D(j,"$random_number",function(A){var P=this;function S(){return P.$random_float()}function E(d){return Math.floor(S()*d)}function u(){var d=A.begin,N=A.end;if(d===L||N===L)return L;var g=N-d;return g<0?L:g===0?d:(N%1===0&&d%1===0&&!A.excl&&g++,E(g)+d)}return A==null?S():A.$$is_range?u():A.$$is_number?(A<=0&&M.$raise($e("ArgumentError"),"invalid argument - "+A),A%1===0?E(A):S()*A):(A=J["$coerce_to!"](A,$e("Integer"),"to_int"),A<=0&&M.$raise($e("ArgumentError"),"invalid argument - "+A),E(A))},-1),D(j,"$alphanumeric",function(A){var P=this,S=L;return A==null&&(A=L),A=F("Random").$_verify_count(A),S=ee([x("0","9",!1),x("a","z",!1),x("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),ee($e("Array"),"new",[A],function E(u){var d=E.$$s==null?this:E.$$s;return S["$[]"](d.$random_number(S.$length()))},{$$s:P}).$join()},-1)}(H,b),H.$include($e($e("Random"),"Formatter")),H.$extend($e($e("Random"),"Formatter"))}("::",null,v)};Opal.modules["corelib/random/mersenne_twister"]=function(n){var z=n.klass,w=n.const_set,D=n.send,x=n.nil,ee=n.$$$,Z=x;return n.add_stubs("generator="),Z=function(){var M=624,J=397,v=2567483615,L=2147483648,$e=2147483647,W=function(k,F){return k&L|F&$e},Y=function(k,F){return W(k,F)>>>1^(F&1?v:0)};function O(k){var F={left:0,next:M,state:new Array(M)};return H(F,k),F}function H(k,F){var p;for(k.state[0]=F>>>0,p=1;p<M;p++)k.state[p]=1812433253*(k.state[p-1]^k.state[p-1]>>30>>>0)+p,k.state[p]&=4294967295;k.left=1,k.next=M}function b(k){var F=0,p=k.state,A;for(k.left=M,k.next=0,A=M-J+1;--A;F++)p[F]=p[F+J]^Y(p[F+0],p[F+1]);for(A=J;--A;F++)p[F]=p[F+(J-M)]^Y(p[F+0],p[F+1]);p[F]=p[F+(J-M)]^Y(p[F+0],p[0])}function h(k){var F;return--k.left<=0&&b(k),F=k.state[k.next++],F^=F>>>11,F^=F<<7&2636928640,F^=F<<15&4022730752,F^=F>>>18,F>>>0}function I(k,F){return k>>>=5,F>>>=6,(k*67108864+F)*(1/9007199254740992)}function j(k){var F=h(k),p=h(k);return I(F,p)}return{genrand_real:j,init:O}}(),function(M,J){var v=z(M,J,"Random"),L,$e=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return w(v,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*$e)},reseed:function(W){return Z.init(W)},rand:function(W){return Z.genrand_real(W)}}),L=[ee(v,"MERSENNE_TWISTER_GENERATOR")],D(v,"generator=",L),L[L.length-1]}("::",null)};Opal.modules["corelib/random"]=function(n){var z=n.truthy,w=n.klass,D=n.Kernel,x=n.defs,ee=n.Opal,Z=n.def,M=n.eqeqeq,J=n.send,v=n.top,L=n.nil,$e=n.$$$;return n.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),v.$require("corelib/random/formatter"),function(W,Y){var O=w(W,Y,"Random");return O.$attr_reader("seed","state"),x(O,"$_verify_count",function(b){return z(b)||(b=16),typeof b!="number"&&(b=b.$to_int()),b<0&&D.$raise($e("ArgumentError"),"negative string size (or size too big)"),b=Math.floor(b),b}),Z(O,"$initialize",function(b){var h=this;return b==null&&(b=$e("Random").$new_seed()),b=ee["$coerce_to!"](b,$e("Integer"),"to_int"),h.state=b,h.$reseed(b)},-1),Z(O,"$reseed",function(b){var h=this;return h.seed=b,h.$rng=n.$$rand.reseed(b)}),x(O,"$new_seed",function(){return n.$$rand.new_seed()}),x(O,"$rand",function(b){var h=this;return $e(h,"DEFAULT").$rand(b)},-1),x(O,"$srand",function(b){var h=this,I=L;return b==null&&(b=$e("Random").$new_seed()),b=ee["$coerce_to!"](b,$e("Integer"),"to_int"),I=$e(h,"DEFAULT").$seed(),$e(h,"DEFAULT").$reseed(b),I},-1),x(O,"$urandom",function(b){return $e("SecureRandom").$bytes(b)}),Z(O,"$==",function(b){var h=this,I=L;return M($e("Random"),b)?z(I=h.$seed()["$=="](b.$seed()))?h.$state()["$=="](b.$state()):I:!1}),Z(O,"$bytes",function(b){var h=this;return b=$e("Random").$_verify_count(b),J($e("Array"),"new",[b],function I(){var j=I.$$s==null?this:I.$$s;return j.$rand(255).$chr()},{$$s:h}).$join().$encode("ASCII-8BIT")}),x(O,"$bytes",function(b){var h=this;return $e(h,"DEFAULT").$bytes(b)}),Z(O,"$rand",function(b){var h=this;return h.$random_number(b)},-1),Z(O,"$random_float",function(){var b=this;return b.state++,n.$$rand.rand(b.$rng)}),x(O,"$random_float",function(){var b=this;return $e(b,"DEFAULT").$random_float()}),x(O,"$generator=",function(b){var h=this;return n.$$rand=b,z(h["$const_defined?"]("DEFAULT"))?$e(h,"DEFAULT").$reseed():h.$const_set("DEFAULT",h.$new(h.$new_seed()))})}("::",null),v.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(n){var z=n.Kernel,w=n.klass,D=n.send,x=n.slice,ee=n.module,Z=n.def,M=n.return_val,J=n.alias,v=n.defs,L=n.top,$e=[],W=n.nil,Y=n.$$$;n.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var O={};function H(h){switch(n.config.unsupported_features_severity){case"error":z.$raise(Y("NotImplementedError"),h);break;case"warning":b(h);break}}function b(h){O[h]||(O[h]=!0,L.$warn(h))}return function(h,I){var j=w(h,I,"String"),k="String#%s not supported. Mutable String methods are not supported in Opal.";return D(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function F(p){var A=F.$$s==null?this:F.$$s;return p==null&&(p=W),D(A,"define_method",[p],function(S){return x(arguments),z.$raise(Y("NotImplementedError"),k["$%"](p))},-1)},{$$s:j})}("::",null),function(h){var I=ee(h,"Kernel"),j="Object tainting is not supported by Opal";return Z(I,"$taint",function(){var F=this;return H(j),F}),Z(I,"$untaint",function(){var F=this;return H(j),F}),Z(I,"$tainted?",function(){return H(j),!1})}("::"),function(h,I){var j=w(h,I,"Module");return Z(j,"$public",function(F){var p,A,P=this;return p=x(arguments),A=p,A.length===0?(P.$$module_function=!1,W):A.length===1?A[0]:A},-1),Z(j,"$private_class_method",function(F){var p,A;return p=x(arguments),A=p,A.length===1?A[0]:A},-1),Z(j,"$private_method_defined?",M(!1)),Z(j,"$private_constant",function(F){return x(arguments),W},-1),J(j,"nesting","public"),J(j,"private","public"),J(j,"protected","public"),J(j,"protected_method_defined?","private_method_defined?"),J(j,"public_class_method","private_class_method"),J(j,"public_instance_method","instance_method"),J(j,"public_instance_methods","instance_methods"),J(j,"public_method_defined?","method_defined?")}("::",null),function(h){var I=ee(h,"Kernel");return Z(I,"$private_methods",function(k){return x(arguments),[]},-1),J(I,"protected_methods","private_methods"),J(I,"private_instance_methods","private_methods"),J(I,"protected_instance_methods","private_methods")}("::"),function(h,I){var j=ee(h,"Kernel"),k=[j].concat(I),F=n.$r(k);return Z(j,"$eval",function(A){return x(arguments),z.$raise(Y("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+F("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",$e),v(L,"$public",function(I){var j,k;return j=x(arguments),k=j,k.length===1?k[0]:k},-1),v(L,"$private",function(I){var j,k;return j=x(arguments),k=j,k.length===1?k[0]:k},-1)};Opal.modules["corelib/binding"]=function(n){var z=n.klass,w=n.truthy,D=n.def,x=n.slice,ee=n.send,Z=n.to_a,M=n.Kernel,J=n.return_ivar,v=n.eqeq;n.thrower;var L=n.module,$e=n.const_set,W=n.top,Y=[],O=n.nil,H=n.$$$;return n.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(b,h){var I=z(b,h,"Binding"),j=I.$$prototype;return j.jseval=j.scope_variables=O,D(I,"$initialize",function(F,p,A,P){var S,E=this;return p==null&&(p=[]),P==null&&(P=O),S=[F,p,A,P],E.jseval=S[0],E.scope_variables=S[1],E.receiver=S[2],E.source_location=S[3],w(typeof A!==void 0)?O:A=E.$js_eval("self")},-2),D(I,"$js_eval",function(F){var p,A,P=this;return p=x(arguments),A=p,w(P.jseval)?ee(P.jseval,"call",Z(A)):M.$raise("Evaluation on a Proc#binding is not supported")},-1),D(I,"$local_variable_get",function(F){var p=this;try{return p.$js_eval(F)}catch(A){if(n.rescue(A,[H("Exception")]))try{return M.$raise(H("NameError"),"local variable `"+F+"' is not defined for "+p.$inspect())}finally{n.pop_exception(A)}else throw A}}),D(I,"$local_variable_set",function(F,p){var A=this;return n.Binding.tmp_value=p,A.$js_eval(""+F+" = Opal.Binding.tmp_value"),delete n.Binding.tmp_value,p}),D(I,"$local_variables",J("scope_variables")),D(I,"$local_variable_defined?",function(F){var p=this;return p.scope_variables["$include?"](F)}),D(I,"$eval",function(F,p,A){try{var P=this;return p==null&&(p=O),A==null&&(A=O),v(F,"self")?P.$receiver():M.$eval(F,P,p,A)}catch(S){if(S===n.t_eval_return)return S.$v;throw S}},-2),I.$attr_reader("receiver","source_location")}("::",null),function(b){var h=L(b,"Kernel");return D(h,"$binding",function(){return M.$raise("Opal doesn't support dynamic calls to binding")})}("::"),$e(Y[0],"TOPLEVEL_BINDING",H("Binding").$new(function(b){return new Function("self","return "+b)(W)},[],W,["<main>",0]))};Opal.modules["corelib/irb"]=function(n){var z=n.module,w=n.truthy,D=n.Kernel,x=n.defs,ee=n.gvars,Z=n.lambda,M=n.hash_rehash,J=n.send,v=n.rb_plus,L=n.const_set,$e=n.klass,W=n.def,Y=n.Opal,O=n.range,H=n.eqeq,b=n.thrower,h=[],I=n.nil,j=n.$$$;n.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(k,F){var p=z(k,"Opal"),A=[p].concat(F);return function(P,S){var E=z(P,"IRB"),u=[E].concat(S),d=n.$r(u);return x(E,"$ensure_loaded",function(g){var c=I,l=I;if(w(n.loaded_features["$include?"](g)))return I;c=w(d("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":d("RUBY_ENGINE_VERSION"),l="https://cdn.opalrb.com/opal/"+c+"/"+g+".js";var q;if(typeof XMLHttpRequest<"u"){var G=new XMLHttpRequest;G.open("GET",l,!1),G.send(""),q=G.responseText}else D.$raise("You need to provision "+g+" yourself in this environment");return new Function("Opal",q)(n),n.require(g),w(n.loaded_features["$include?"](g))?I:D.$raise("Could not load "+g+" for some reason")}),E.$singleton_class().$attr_accessor("output"),x(E,"$prepare_console",function N(){var g=N.$$p||I,c,l=this,q=I,G=I;return ee.stdout==null&&(ee.stdout=I),ee.stderr==null&&(ee.stderr=I),ee.stdin==null&&(ee.stdin=I),N.$$p=null,function(){try{return l["$output="](""),q=M(new Map([[ee.stdout,Z(function(s){return s==null&&(s=I),ee.stdout=s})],[ee.stderr,Z(function(s){return s==null&&(s=I),ee.stderr=s})]])),w(l["$browser?"]())&&(J(q,"each",[],function _(s,$){var t=_.$$s==null?this:_.$$s,e=I;return s==null&&(s=I),$==null&&($=I),e=s.$dup(),e["$write_proc="](J(t,"proc",[],function r(i){var a=r.$$s==null?this:r.$$s;return i==null&&(i=I),a["$output="](v(a.$output(),i)),a["$output="](a.$output().$split(`
`).$last(30).$join(`
`)),w(i["$end_with?"](`
`))&&a["$output="](v(a.$output(),`
`)),s.$write_proc().$call(i)},{$$s:t})),e["$tty="](!1),$.$call(e)},{$$s:l}),G=ee.stdin.$read_proc(),ee.stdin["$read_proc="](function(_){var s=prompt(l.$output());return s!==null?s+`
`:I})),n.yieldX(g,[])}finally{J(q,"each",[],function(s,$){return s==null&&(s=I),$==null&&($=I),$.$call(s)}),c=[G],J(ee.stdin,"read_proc=",c),c[c.length-1],c=[""],J(l,"output=",c),c[c.length-1]}}()}),x(E,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),L(u[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(N,g){var c=$e(N,g,"Silencer"),l=c.$$prototype;return l.collector=l.stderr=I,W(c,"$initialize",function(){var G=this;return ee.stderr==null&&(ee.stderr=I),G.stderr=ee.stderr}),W(c,"$silence",function q(){var G=q.$$p||I,_=this;return q.$$p=null,function(){try{return _.collector=j("StringIO").$new(),ee.stderr=_.collector,n.yieldX(G,[])}finally{ee.stderr=_.stderr}}()}),W(c,"$warnings",function(){var G=this;return G.collector.$string()})}(u[0],null)}(A[0],A)}(h[0],h),function(k,F,p){var A=$e(k,F,"Binding"),P=[A].concat(p),S=n.$r(P);return W(A,"$irb",function(){try{var u=b("return"),d=this,N=I;return j(Y,"IRB").$ensure_loaded("opal-replutils"),N=j(j(Y,"IRB"),"Silencer").$new(),J(j(Y,"IRB"),"prepare_console",[],function g(){var c=g.$$s==null?this:g.$$s;return function(){try{var l=b("break");return J(c,"loop",[],function q(){var G=q.$$s==null?this:q.$$s,_=I,s=I,$=I,t=I,e=I;G.$print(">> "),_=G.$gets(),w(_)||l.$throw(I,q.$$is_lambda),s="",w(j(Y,"IRB")["$browser?"]())&&G.$puts(_),w(_["$start_with?"]("ls "))?(s=_["$[]"](O(3,-1,!1)),$="ls"):H(_,`ls
`)?(s="self",$="ls"):w(_["$start_with?"]("show "))?(s=_["$[]"](O(5,-1,!1)),$="show"):(s=_,$="inspect"),t=I;do{try{J(N,"silence",[],function(){return t=n.compile(s,{irb:!0})})}catch(r){if(n.rescue(r,[S("SyntaxError")])){e=r;try{if(w(j(j(Y,"IRB"),"LINEBREAKS")["$include?"](e.$message()))){G.$print(".. "),_=G.$gets(),w(_)||u.$throw(I,q.$$is_lambda),w(j(Y,"IRB")["$browser?"]())&&G.$puts(_),s=v(s,_);continue}else w(N.$warnings()["$empty?"]())?G.$warn(e.$full_message()):G.$warn(N.$warnings())}finally{n.pop_exception(r)}}else throw r}break}while(!0);return H($,"show")&&(G.$puts(t),u.$throw(I,q.$$is_lambda)),G.$puts(j("REPLUtils").$eval_and_print(t,$,!1,G))},{$$s:c,$$ret:u})}catch(q){if(q===l)return q.$v;throw q}finally{l.is_orphan=!0}}()},{$$s:d})}catch(g){if(g===u)return g.$v;throw g}finally{u.is_orphan=!0}})}("::",null,h),n.irb=function(k){j("Binding").$new(k).$irb()},n.load_parser=function(){n.Opal.IRB.$ensure_loaded("opal-parser")},typeof n.eval>"u"&&(n.eval=function(k){return n.load_parser(),n.eval(k)}),typeof n.compile>"u"&&(n.compile=function(k,F){return n.load_parser(),n.compile(k,F)})};Opal.modules.opal=function(n){var z=n.Object;return n.nil,n.add_stubs("require,autoload"),z.$require("opal/base"),z.$require("opal/mini"),z.$require("corelib/kernel/format"),z.$require("corelib/string/encoding"),z.$autoload("Math","corelib/math"),z.$require("corelib/complex/base"),z.$autoload("Complex","corelib/complex"),z.$require("corelib/rational/base"),z.$autoload("Rational","corelib/rational"),z.$require("corelib/time"),z.$autoload("Struct","corelib/struct"),z.$autoload("Set","corelib/set"),z.$autoload("Dir","corelib/dir"),z.$autoload("File","corelib/file"),z.$require("corelib/process/base"),z.$autoload("Process","corelib/process"),z.$autoload("Random","corelib/random"),z.$require("corelib/unsupported"),z.$require("corelib/binding"),z.$require("corelib/irb")};Opal.modules["js/proxy"]=function(n){var z=n.module,w=n.truthy,D=n.def,x=n.klass,ee=n.const_set,Z=n.slice,M=n.range,J=n.send,v=n.to_a,L=n.gvars,$e=n.top,W=[],Y=n.nil;return n.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),$e.$require("opal"),$e.$require("native"),function(O,H){var b=z(O,"JS"),h=[b].concat(H),I=n.$r(h);return function(j,k){var F=z(j,"Helpers"),p=[F].concat(k),A=n.$r(p);return D(F,"$wrap_result",function(S){return w(S&&typeof S.then=="function")?A("Promise").$new(S):w(typeof S=="object"&&S!==null)?A("Proxy").$new(S):S}),D(F,"$native_methods",function(){var S=this,E=Y;return S.native_methods==null&&(S.native_methods=Y),S.native_methods=function(){if(w(E=S.native_methods))return E;{let u=S.$to_n();const d=new Set;for(;u!==null;){for(const N of Reflect.ownKeys(u)){const g=N.toString(),c=S.$to_rb_name(g);typeof N!="symbol"&&g!==c&&d.add(c),d.add(g)}u=Object.getPrototypeOf(u)}return Array.from(d)}}()})}(h[0],h),function(j,k,F){var p=x(j,k,"Proxy"),A=[p].concat(F),P=n.$r(A);return p.$include(P("Enumerable")),p.$include(P("Helpers")),p.$attr_accessor("native"),ee(A[0],"IRREGULARS",["html","url","uri"]),D(p,"$initialize",function(E){var u=this;return u.native=u.$Native(E)}),D(p,"$method_missing",function S(E,u){var d=S.$$p||Y,N,g,c,l=this,q=Y,G=Y,_=Y,s=Y,$=Y,t=Y;return S.$$p=null,N=Z(arguments,1),g=N,q=l.$to_js_name(E),w(l["$existing_property?"](q))||w(q["$end_with?"]("="))||l.$raise(P("NoMethodError"),"undefined method `"+E+"` for "+l),w(q["$end_with?"]("="))?(G=q["$[]"](M(0,-2,!1)),c=[G,g.$first()],J(l.$native(),"[]=",c),c[c.length-1]):(_=l.$native()["$[]"](q),w(typeof _=="function")?(s=g.$dup(),w(d)&&($=function(){let e=Array.prototype.slice.call(arguments);return J(d,"call",[l.$class().$new(this)].concat(v(e)))},s["$<<"]($)),t=_.apply(l.$to_n(),s.$to_n()),l.$wrap_result(t)):w(typeof _=="object"&&_!==null)?l.$wrap_result(_):_)},-2),D(p,"$to_str",function(){var E=this;return E.$to_n().toString()}),D(p,"$respond_to_missing?",function(E,u){return!0},-2),D(p,"$each",function S(){var E=S.$$p||Y,u=this,d=Y;return S.$$p=null,w(u["$respond_to?"]("length"))?(d=u.$length(),J(n.Range.$new(0,d,!0),"each",[],function N(g){var c=N.$$s==null?this:N.$$s;return g==null&&(g=Y),n.yield1(E,c["$[]"](g))},{$$s:u})):u.$enum_for("each")}),D(p,"$[]",function(E){var u=this,d=Y;return d=u.$native()["$[]"](E),u.$wrap_result(d)}),D(p,"$[]=",function(E,u){var d=this;return d.$native()["$[]="](E,u),d.$wrap_result(d.$native())}),D(p,"$to_n",function(){var E=this;return E.$native().$to_n()}),D(p,"$length",function(){var E=this;return E.$native().$length()}),p.$private(),D(p,"$to_js_name",function(E){return J(E.$to_s().$split("_").$map(),"with_index",[],function(d,N){return d==null&&(d=Y),N==null&&(N=Y),w(P("IRREGULARS")["$include?"](d.$gsub("=","").$downcase()))?d.$upcase():w(N["$zero?"]())?d:d.$capitalize()}).$join()}),D(p,"$to_rb_name",function(E){return J(E.$to_s(),"gsub",[/([A-Z]+)/],function(){var d;return"_"+((d=L["~"])===Y?Y:d["$[]"](1)).$downcase()}).$sub(/^_/,"")}),D(p,"$existing_property?",function(E){var u=this;return E in u.$to_n()})}(h[0],null,h),function(j,k,F){var p=x(j,k,"Promise"),A=[p].concat(F),P=n.$r(A);return p.$include(P("Helpers")),D(p,"$then",function S(){var E=S.$$p||Y,u,d=this,N=Y;return S.$$p=null,N=function(g){var c=E.$call(d.$wrap_result(g));return c&&typeof c.then=="function"?c:c&&typeof c.to_n=="function"?c.to_n():c},u=[d.$to_n().then(N)],J(d,"native=",u),u[u.length-1]}),D(p,"$catch",function S(){var E=S.$$p||Y,u,d=this,N=Y;return S.$$p=null,N=function(g){var c=E.$call(d.$wrap_result(g));return c&&typeof c.then=="function"?c:c&&typeof c.to_n=="function"?c.to_n():c},u=[d.$to_n().catch(N)],J(d,"native=",u),u[u.length-1]})}(h[0],I("Proxy"),h)}(W[0],W)};Opal.modules["opal_stimulus/stimulus_controller"]=function(n){var z=n.klass,w=n.const_set,D=n.Opal,x=n.defs,ee=n.truthy,Z=n.send,M=n.gvars,J=n.return_val,v=n.thrower,L=n.rb_plus,$e=n.eqeqeq,W=n.def,Y=n.top,O=[],H=n.nil,b=n.$$$;return n.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),Y.$require("opal"),Y.$require("native"),Y.$require("js/proxy"),function(h,I,j){var k=z(h,I,"StimulusController"),F=[k].concat(j),p=n.$r(F),A=k.$$prototype;return A.window=A.document=H,w(F[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),w(F[0],"DEFAULT_GETTERS",["element"]),x(k,"$inherited",function(S){return D.$bridge(S.$stimulus_controller(),S)}),x(k,"$stimulus_controller",function(){var S=this;return S.stimulus_controller==null&&(S.stimulus_controller=H),ee(S.stimulus_controller)||(S.stimulus_controller=class extends Controller{}),S.stimulus_controller}),x(k,"$stimulus_name",function(){var S=this;return S.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),x(k,"$method_added",function(S){var E=this;if(ee(p("DEFAULT_GETTERS")["$include?"](S)))return H;E.$stimulus_controller().prototype[S]=function(...u){try{var d=u.map(function(N){return N&&typeof N=="object"&&!N.$$class?n.JS.Proxy.$new(N):N});return this["$"+S].apply(this,d)}catch(N){console.error("Uncaught",N)}}}),x(k,"$to_ruby_name",function(S){return Z(S.$to_s(),"gsub",[/([A-Z]+)/],function(){var u;return"_"+((u=M["~"])===H?H:u["$[]"](1)).$downcase()}).$sub(/^_/,"")}),x(k,"$register_all!",function(){try{var S=v("return"),E=this;return Z(E.$subclasses(),"each",[],function u(d){return d==null&&(d=H),Z(d,"define_method",["dummy"],J(H)),ee(application.controllers["$include?"](d.$stimulus_name()))&&S.$throw(H,u.$$is_lambda),application.register(d.$stimulus_name(),d.$stimulus_controller())},{$$ret:S})}catch(u){if(u===S)return u.$v;throw u}finally{S.is_orphan=!0}}),x(k,"$targets=",function(S){var E=this;return S==null&&(S=[]),E.$stimulus_controller().targets=S,Z(S,"each",[],function u(d){var N=u.$$s==null?this:u.$$s,g=H,c=H,l=H,q=H,G=H,_=H;d==null&&(d=H),g=d.$to_s(),c=N.$to_ruby_name(d),Z(N,"define_method",[L(c,"_target")],function(){return b(p("JS"),"Proxy").$new(this[L(g,"Target")])}),Z(N,"define_method",[L(c,"_targets")],function(){return Z(this[L(g,"Targets")],"map",[],function(t){return t==null&&(t=H),b(p("JS"),"Proxy").$new(t)})}),Z(N,"define_method",[L(L("has_",c),"_target")],function(){return this[L(L("has",g.$capitalize()),"Target")]}),l=L(c,"_target_connected"),q=L(g,"TargetConnected"),N.$stimulus_controller().prototype[q]=function(){if(this["$respond_to?"]&&this["$respond_to?"](l))return this["$"+l]()},G=L(c,"_target_disconnected"),_=L(g,"TargetDisconnected"),N.$stimulus_controller().prototype[_]=function(){if(this["$respond_to?"]&&this["$respond_to?"](G))return this["$"+G]()}},{$$s:E})},-1),x(k,"$outlets=",function(S){var E=this;return S==null&&(S=[]),E.$stimulus_controller().outlets=S,Z(S,"each",[],function u(d){var N=u.$$s==null?this:u.$$s,g=H,c=H,l=H,q=H,G=H,_=H;d==null&&(d=H),g=d.$to_s(),c=N.$to_ruby_name(d),Z(N,"define_method",[L(c,"_outlet")],function(){return this[L(g,"Outlet")]}),Z(N,"define_method",[L(c,"_outlets")],function(){return this[L(g,"Outlets")]}),Z(N,"define_method",[L(L("has_",c),"_outlet")],function(){return this[L(L("has",g.$capitalize()),"Outlet")]}),l=L(c,"_outlet_connected"),q=L(g,"OutletConnected"),N.$stimulus_controller().prototype[q]=function(){if(this["$respond_to?"]&&this["$respond_to?"](l))return this["$"+l]()},G=L(c,"_outlet_disconnected"),_=L(g,"OutletDisconnected"),N.$stimulus_controller().prototype[_]=function(){if(this["$respond_to?"]&&this["$respond_to?"](G))return this["$"+G]()}},{$$s:E})},-1),x(k,"$values=",function(S){var E=this,u=H;return S==null&&(S=new Map),u=new Map,Z(S,"each",[],function d(N,g){var c=d.$$s==null?this:d.$$s,l=H,q=H,G=H,_=H;N==null&&(N=H),g==null&&(g=H),N=c.$to_ruby_name(N),l=$e("string",q=g)?String:$e("number",q)?Number:$e("boolean",q)?Boolean:$e("array",q)?Array:$e("object",q)?Object:c.$raise(p("ArgumentError"),"Unsupported value type: "+g+", please use :string, :number, :boolean, :array, or :object"),u["$[]="](N,l),c.$stimulus_controller().values=u.$to_n(),Z(c,"define_method",[L(N,"_value")],function s(){var $=s.$$s==null?this:s.$$s;return $.$Native(this[L(N,"Value")])},{$$s:c}),Z(c,"define_method",[L(N,"_value=")],function s($){var t=s.$$s==null?this:s.$$s;return $==null&&($=H),t.$Native(this[L(N,"Value")]=$)},{$$s:c}),Z(c,"define_method",["has_"+N],function(){return this[L(L("has",N.$to_s().$capitalize()),"Value")]}),G=""+N+"_value_changed",_=""+N+"ValueChanged",c.$stimulus_controller().prototype[_]=function(s,$){if(g["$=="]("object")&&(s=JSON.stringify(s),$=JSON.stringify($)),this["$respond_to?"]&&this["$respond_to?"](G))return this["$"+G](s,$)}},{$$s:E})},-1),x(k,"$classes=",function(S){var E=this;return S==null&&(S=[]),E.$stimulus_controller().classes=S,Z(S,"each",[],function u(d){var N=u.$$s==null?this:u.$$s,g=H,c=H;return d==null&&(d=H),g=d.$to_s(),c=N.$to_ruby_name(d),Z(N,"define_method",[""+c+"_class"],function(){return this[L(g,"Class")]}),Z(N,"define_method",[""+c+"_classes"],function(){return this[L(g,"Classes")]}),Z(N,"define_method",["has_"+c+"_class"],function(){return this[L(L("has",g.$capitalize()),"Class")]})},{$$s:E})},-1),W(k,"$element",function(){return b(p("JS"),"Proxy").$new(this.element)}),W(k,"$window",function(){var S=this,E=H;return M.$==null&&(M.$=H),S.window=ee(E=S.window)?E:b(p("JS"),"Proxy").$new(M.$.$window())}),W(k,"$document",function(){var S=this,E=H;return M.$==null&&(M.$=H),S.document=ee(E=S.document)?E:b(p("JS"),"Proxy").$new(M.$.$document())})}(O[0],Controller,O)};Opal.modules["opal_vite/concerns/v1/stimulus_helpers"]=function(n){var z=n.module,w=n.def,D=n.truthy,x=n.eqeq,ee=n.send,Z=n.slice,M=n.ensure_kwargs,J=n.get_kwarg,v=n.hash_get,L=n.rb_plus,$e=n.rb_minus,W=n.to_a,Y=n.range,O=n.const_set,H=[],b=n.$r(H),h=n.nil,I=n.$$$;return n.add_stubs("camelize,has_target?,target_set_value,target_set_html,set_target_style,get_target_style,==,show_target,hide_target,call,body_style,to_n,storage_get,is_a?,parse_int,event_data,to_native_element,Native,map,to_a,js_timestamp,is_nan?,parse_float,to_s,empty?,respond_to?,fetch_json_promise,fetch_json_safe,js_then,js_catch,console_error,set_stimulus_value,+,stimulus_value,-,!,get_class,get_classes,has_outlet?,get_outlet,js_call_on,each,get_outlets,nil?,stimulus_dispatch,action_param,private,include?,upcase,[],downcase,split,join,to_proc,first"),function(j,k){var F=z(j,"OpalVite"),p=[F].concat(k);return function(A,P){var S=z(A,"Concerns"),E=[S].concat(P);return function(u,d){var N=z(u,"V1"),g=[N].concat(d);return function(c,l){var q=z(c,"StimulusHelpers"),G=[q].concat(l),_=n.$r(G);return w(q,"$has_target?",function($){var t=this,e=h;return e="has"+t.$camelize($)+"Target",this[e]}),w(q,"$get_target",function($){var t=this,e=h;return D(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e]):h}),w(q,"$get_targets",function($){var t=this,e=h;return e=""+t.$camelize($,!1)+"Targets",Array.from(this[e]||[])}),w(q,"$target_value",function($){var t=this,e=h;return D(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].value):h}),w(q,"$target_set_value",function($,t){var e=this,r=h;return D(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].value=t):h}),w(q,"$target_html",function($){var t=this,e=h;return D(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].innerHTML):h}),w(q,"$target_set_html",function($,t){var e=this,r=h;return D(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].innerHTML=t):h}),w(q,"$target_text",function($){var t=this,e=h;return D(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].textContent):h}),w(q,"$target_set_text",function($,t){var e=this,r=h;return D(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].textContent=t):h}),w(q,"$target_data",function($,t){var e=this,r=h;return D(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].getAttribute("data-"+t)):h}),w(q,"$target_set_data",function($,t,e){var r=this,i=h;return D(r["$has_target?"]($))?(i=""+r.$camelize($,!1)+"Target",this[i].setAttribute("data-"+t,e)):h}),w(q,"$target_clear",function($){var t=this;return t.$target_set_value($,"")}),w(q,"$target_clear_html",function($){var t=this;return t.$target_set_html($,"")}),w(q,"$set_target_style",function($,t,e){var r=this,i=h;return D(r["$has_target?"]($))?(i=""+r.$camelize($,!1)+"Target",this[i].style[t]=e):h}),w(q,"$get_target_style",function($,t){var e=this,r=h;return D(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].style[t]):h}),w(q,"$show_target",function($){var t=this;return t.$set_target_style($,"display","")}),w(q,"$hide_target",function($){var t=this;return t.$set_target_style($,"display","none")}),w(q,"$toggle_target_visibility",function($){var t=this,e=h;return e=t.$get_target_style($,"display"),x(e,"none")?t.$show_target($):t.$hide_target($)}),w(q,"$add_target_class",function($,t){var e=this,r=h;return D(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.add(t)):h}),w(q,"$remove_target_class",function($,t){var e=this,r=h;return D(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.remove(t)):h}),w(q,"$toggle_target_class",function($,t){var e=this,r=h;return D(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.toggle(t)):h}),w(q,"$has_target_class?",function($,t){var e=this,r=h;return D(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.contains(t)):!1}),w(q,"$js_timestamp",function(){return Date.now()}),w(q,"$js_iso_date",function(){return new Date().toISOString()}),w(q,"$js_date",function($){return $==null&&($=h),D($)?new Date($):new Date},-1),w(q,"$js_regexp",function($,t){return t==null&&(t=""),new RegExp($,t)},-2),w(q,"$js_regexp_test",function($,t,e){return e==null&&(e=""),new RegExp($,e).test(t)},-3),w(q,"$set_timeout",function s($){var t=s.$$p||h;return s.$$p=null,setTimeout(function(){t.$call()},$)}),w(q,"$set_interval",function s($){var t=s.$$p||h;return s.$$p=null,setInterval(function(){t.$call()},$)}),w(q,"$clear_timeout",function($){return clearTimeout($)}),w(q,"$clear_interval",function($){return clearInterval($)}),w(q,"$body_style",function($,t){return document.body.style[$]=t}),w(q,"$lock_body_scroll",function(){var $=this;return $.$body_style("overflow","hidden")}),w(q,"$unlock_body_scroll",function(){var $=this;return $.$body_style("overflow","")}),w(q,"$js_array",function(){return[]}),w(q,"$js_array_push",function($,t){return $.push(t.$to_n())}),w(q,"$js_array_length",function($){return $.length}),w(q,"$js_array_at",function($,t){return $[t]}),w(q,"$storage_get",function($){return localStorage.getItem($)}),w(q,"$storage_set",function($,t){return localStorage.setItem($,t)}),w(q,"$storage_remove",function($){return localStorage.removeItem($)}),w(q,"$storage_get_json",function($,t){var e=this,r=h;return t==null&&(t=h),r=e.$storage_get($),D(r===null)?t:JSON.parse(r)},-2),w(q,"$storage_set_json",function($,t){return localStorage.setItem($,JSON.stringify(t.$to_n()))}),w(q,"$dispatch_window_event",function($,t){var e=h;t==null&&(t=new Map),e=D(t["$is_a?"](_("Hash")))?t.$to_n():t;const r=new CustomEvent($,{detail:e});window.dispatchEvent(r)},-2),w(q,"$dispatch_event",function($,t){var e=h;t==null&&(t=new Map),e=D(t["$is_a?"](_("Hash")))?t.$to_n():t;const r=new CustomEvent($,{detail:e});this.element.dispatchEvent(r)},-2),w(q,"$on_window_event",function s($){var t=s.$$p||h;return s.$$p=null,window.addEventListener($,t)}),w(q,"$off_window_event",function($,t){return window.removeEventListener($,t)}),w(q,"$on_document_event",function s($){var t=s.$$p||h;return s.$$p=null,document.addEventListener($,t)}),w(q,"$on_dom_ready",function s(){var $=s.$$p||h;return s.$$p=null,document.addEventListener("DOMContentLoaded",$)}),w(q,"$on_element_event",function s($,t){var e=s.$$p||h;return s.$$p=null,$.addEventListener(t,e)}),w(q,"$off_element_event",function($,t,e){return $.removeEventListener(t,e)}),w(q,"$on_controller_event",function s($){var t=s.$$p||h;return s.$$p=null,this.element.addEventListener($,t)}),w(q,"$event_target",function(){return event.currentTarget}),w(q,"$event_data",function($){return event.currentTarget.getAttribute("data-"+$)}),w(q,"$event_data_int",function($){var t=this;return t.$parse_int(t.$event_data($))}),w(q,"$prevent_default",function(){return event.preventDefault()}),w(q,"$event_key",function(){return event.key}),w(q,"$to_native_element",function($){return D(typeof $.$to_n=="function")?$.$to_n():$}),w(q,"$add_class",function($,t){var e=this,r=h;return r=e.$to_native_element($),r.classList.add(t)}),w(q,"$remove_class",function($,t){var e=this,r=h;return r=e.$to_native_element($),r.classList.remove(t)}),w(q,"$toggle_class",function($,t){var e=this,r=h;return r=e.$to_native_element($),r.classList.toggle(t)}),w(q,"$has_class?",function($,t){var e=this,r=h;return r=e.$to_native_element($),r.classList.contains(t)}),w(q,"$set_attr",function($,t,e){var r=this,i=h;return i=r.$to_native_element($),i.setAttribute(t,e)}),w(q,"$get_attr",function($,t){var e=this,r=h;return r=e.$to_native_element($),r.getAttribute(t)}),w(q,"$remove_attr",function($,t){var e=this,r=h;return r=e.$to_native_element($),r.removeAttribute(t)}),w(q,"$set_style",function($,t,e){var r=this,i=h;return i=r.$to_native_element($),i.style[t]=e}),w(q,"$set_html",function($,t){var e=this,r=h;return r=e.$to_native_element($),r.innerHTML=t}),w(q,"$set_text",function($,t){var e=this,r=h;return r=e.$to_native_element($),r.textContent=t}),w(q,"$get_value",function($){var t=this,e=h;return e=t.$to_native_element($),e.value}),w(q,"$set_value",function($,t){var e=this,r=h;return r=e.$to_native_element($),r.value=t}),w(q,"$focus",function($){var t=this,e=h;return e=t.$to_native_element($),e.focus()}),w(q,"$has_attr?",function($,t){var e=this,r=h;return r=e.$to_native_element($),r.hasAttribute(t)}),w(q,"$create_element",function($){return document.createElement($)}),w(q,"$append_child",function($,t){var e=this,r=h,i=h;return r=e.$to_native_element($),i=e.$to_native_element(t),r.appendChild(i)}),w(q,"$remove_element",function($){var t=this,e=h;return e=t.$to_native_element($),e.remove()}),w(q,"$next_sibling",function($){var t=this,e=h;return e=t.$to_native_element($),e.nextElementSibling}),w(q,"$prev_sibling",function($){var t=this,e=h;return e=t.$to_native_element($),e.previousElementSibling}),w(q,"$parent",function($){var t=this,e=h;return e=t.$to_native_element($),e.parentElement}),w(q,"$query",function($){var t=this,e=h;return e=document.querySelector($),D(e===null)?h:t.$Native(e)}),w(q,"$query_all",function($){var t=this,e=h;return e=Array.from(document.querySelectorAll($)),ee(t.$Native(e).$to_a(),"map",[],function r(i){var a=r.$$s==null?this:r.$$s;return i==null&&(i=h),a.$Native(i)},{$$s:t})}),w(q,"$query_element",function($){var t=this,e=h;return e=this.element.querySelector($),D(e===null)?h:t.$Native(e)}),w(q,"$query_all_element",function($){var t=this,e=h;return e=Array.from(this.element.querySelectorAll($)),ee(t.$Native(e).$to_a(),"map",[],function r(i){var a=r.$$s==null?this:r.$$s;return i==null&&(i=h),a.$Native(i)},{$$s:t})}),w(q,"$doc_root",function(){return document.documentElement}),w(q,"$set_root_attr",function($,t){return document.documentElement.setAttribute($,t)}),w(q,"$get_root_attr",function($){return document.documentElement.getAttribute($)}),w(q,"$clone_template",function($){var t=this,e=h;return e=""+t.$camelize($,!1)+"Target",this[e].content.cloneNode(!0)}),w(q,"$template_first_child",function($){return $.firstElementChild}),w(q,"$element_add_class",function($){return this.element.classList.add($)}),w(q,"$element_remove_class",function($){return this.element.classList.remove($)}),w(q,"$element_toggle_class",function($){return this.element.classList.toggle($)}),w(q,"$generate_id",function(){var $=this;return $.$js_timestamp()}),w(q,"$target_focus",function($){var t=this,e=h;return D(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].focus()):h}),w(q,"$target_blur",function($){var t=this,e=h;return D(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].blur()):h}),w(q,"$parse_int",function($,t){return t==null&&(t=10),parseInt($,t)},-2),w(q,"$parse_float",function($){return parseFloat($)}),w(q,"$is_nan?",function($){return Number.isNaN($)}),w(q,"$parse_int_or",function($,t){var e=this,r=h;return t==null&&(t=0),r=e.$parse_int($),D(e["$is_nan?"](r))?t:r},-2),w(q,"$parse_float_or",function($,t){var e=this,r=h;return t==null&&(t=0),r=e.$parse_float($),D(e["$is_nan?"](r))?t:r},-2),w(q,"$js_prop",function($){return this[$.$to_s()]}),w(q,"$js_set_prop",function($,t){return this[$.$to_s()]=t}),w(q,"$js_has_prop?",function($){return!!this[$.$to_s()]}),w(q,"$js_call",function($,t){var e,r,i=h;return e=Z(arguments,1),r=e,D(r["$empty?"]())?this[$.$to_s()]():(i=ee(r,"map",[],function(o){return o==null&&(o=h),D(o["$respond_to?"]("to_n"))?o.$to_n():o}),this[$.$to_s()].apply(this,i))},-2),w(q,"$js_call_on",function($,t,e){var r,i,a=h;return r=Z(arguments,2),i=r,D(i["$empty?"]())?$[t.$to_s()]():(a=ee(i,"map",[],function(m){return m==null&&(m=h),D(m["$respond_to?"]("to_n"))?m.$to_n():m}),$[t.$to_s()].apply($,a))},-3),w(q,"$js_get",function($,t){return $[t.$to_s()]}),w(q,"$js_set",function($,t,e){return $[t.$to_s()]=e}),w(q,"$json_parse",function($){return JSON.parse($)}),w(q,"$json_stringify",function($){var t=h;return t=D($["$respond_to?"]("to_n"))?$.$to_n():$,JSON.stringify(t)}),w(q,"$console_log",function($){var t,e;return t=Z(arguments),e=t,console.log.apply(console,e)},-1),w(q,"$console_warn",function($){var t,e;return t=Z(arguments),e=t,console.warn.apply(console,e)},-1),w(q,"$console_error",function($){var t,e;return t=Z(arguments),e=t,console.error.apply(console,e)},-1),w(q,"$js_string_char_at",function($,t){return $.charAt(t)}),w(q,"$js_substring",function($,t,e){return e==null&&(e=h),D(e)?$.substring(t,e):$.substring(t)},-3),w(q,"$js_split",function($,t){return $.split(t)}),w(q,"$js_trim",function($){return $.trim()}),w(q,"$js_includes?",function($,t){return $.includes(t)}),w(q,"$js_equals?",function($,t){return $===t}),w(q,"$js_loose_equals?",function($,t){return $==t}),w(q,"$js_random",function(){return Math.random()}),w(q,"$js_min",function($,t){return Math.min($,t)}),w(q,"$js_max",function($,t){return Math.max($,t)}),w(q,"$js_abs",function($){return Math.abs($)}),w(q,"$js_round",function($){return Math.round($)}),w(q,"$js_ceil",function($){return Math.ceil($)}),w(q,"$js_to_fixed",function($,t){return $.toFixed(t)}),w(q,"$random_int",function($){return Math.floor(Math.random()*$)}),w(q,"$js_floor",function($){return Math.floor($)}),w(q,"$js_global_exists?",function($){return typeof window[$]<"u"}),w(q,"$js_global",function($){return window[$]}),w(q,"$js_new",function($,t){var e,r,i=h;return e=Z(arguments,1),r=e,D(r["$empty?"]())?new $:(i=ee(r,"map",[],function(o){return o==null&&(o=h),o!=null&&typeof o.$to_n=="function"?o.$to_n():o}),Reflect.construct($,i))},-2),w(q,"$js_define_method",function s($){var t=s.$$p||h;return s.$$p=null,this[$.$to_s()]=t}),w(q,"$js_define_method_on",function s($,t){var e=s.$$p||h;return s.$$p=null,$[t.$to_s()]=e}),w(q,"$js_length",function($){return $.length}),w(q,"$js_map",function s($){var t=s.$$p||h;return s.$$p=null,$.map(t)}),w(q,"$js_filter",function s($){var t=s.$$p||h;return s.$$p=null,$.filter(t)}),w(q,"$js_reduce",function s($,t){var e=s.$$p||h;return s.$$p=null,$.reduce(e,t)}),w(q,"$js_each",function s($){var t=s.$$p||h;return s.$$p=null,$.forEach(t)}),w(q,"$js_slice",function($,t,e){return e==null&&(e=h),D(e)?$.slice(t,e):$.slice(t)},-3),w(q,"$js_object",function(){return{}}),w(q,"$js_keys",function($){return Object.keys($)}),w(q,"$js_values",function($){return Object.values($)}),w(q,"$js_entries",function($){return Object.entries($)}),w(q,"$js_unique_count",function($){return new Set($).size}),w(q,"$js_fetch",function($){return fetch($)}),w(q,"$fetch_json",function s($){var t=s.$$p||h;s.$$p=null,fetch($).then(e=>e.json()).then(e=>t.$call(e)).catch(e=>console.error("Fetch error:",e))}),w(q,"$fetch_json_promise",function($){return fetch($).then(t=>t.json())}),w(q,"$fetch_json_safe",function($){return fetch($).then(function(t){if(!t.ok)throw new Error("Network response was not ok: "+t.status);return t.json()})}),w(q,"$fetch_all_json",function($){var t=this,e=h;return e=ee($,"map",[],function r(i){var a=r.$$s==null?this:r.$$s;return i==null&&(i=h),a.$fetch_json_promise(i)},{$$s:t}),Promise.all(e)}),w(q,"$fetch_json_with_handlers",function($,t){var e,r,i=this,a=h;return t=M(t),e=J(t,"on_success"),r=v(t,"on_error"),r==null&&(r=h),a=i.$fetch_json_safe($),a=ee(i,"js_then",[a],function(m){return m==null&&(m=h),e.$call(m)}),D(r)?ee(i,"js_catch",[a],function(m){return m==null&&(m=h),r.$call(m)}):ee(i,"js_catch",[a],function o(m){var T=o.$$s==null?this:o.$$s;return m==null&&(m=h),T.$console_error("Fetch error:",m)},{$$s:i})}),w(q,"$promise_all",function($){return Promise.all($)}),w(q,"$promise_race",function($){return Promise.race($)}),w(q,"$promise_resolve",function($){var t=h;return t=D($["$respond_to?"]("to_n"))?$.$to_n():$,Promise.resolve(t)}),w(q,"$promise_reject",function($){return Promise.reject($)}),w(q,"$js_then",function s($){var t=s.$$p||h;return s.$$p=null,$.then(t)}),w(q,"$js_catch",function s($){var t=s.$$p||h;return s.$$p=null,$.catch(t)}),w(q,"$js_finally",function s($){var t=s.$$p||h;return s.$$p=null,$.finally(t)}),w(q,"$stimulus_value",function($){var t=this,e=h;return e=""+t.$camelize($,!1)+"Value",this[e]}),w(q,"$set_stimulus_value",function($,t){var e=this,r=h,i=h;return r=""+e.$camelize($,!1)+"Value",i=D(t["$respond_to?"]("to_n"))?t.$to_n():t,this[r]=i}),w(q,"$has_stimulus_value?",function($){var t=this,e=h;return e="has"+t.$camelize($)+"Value",this[e]}),w(q,"$increment_stimulus_value",function($,t){var e=this;return t==null&&(t=1),e.$set_stimulus_value($,L(e.$stimulus_value($),t))},-2),w(q,"$decrement_stimulus_value",function($,t){var e=this;return t==null&&(t=1),e.$set_stimulus_value($,$e(e.$stimulus_value($),t))},-2),w(q,"$toggle_stimulus_value",function($){var t=this;return t.$set_stimulus_value($,t.$stimulus_value($)["$!"]())}),w(q,"$get_class",function($){var t=this,e=h;return e=""+t.$camelize($,!1)+"Class",this[e]}),w(q,"$get_classes",function($){var t=this,e=h;return e=""+t.$camelize($,!1)+"Classes",Array.from(this[e]||[])}),w(q,"$has_class_definition?",function($){var t=this,e=h;return e="has"+t.$camelize($)+"Class",this[e]}),w(q,"$apply_class",function($,t){var e=this,r=h,i=h;return r=e.$to_native_element($),i=e.$get_class(t),D(i)?r.classList.add(i):h}),w(q,"$apply_classes",function($,t){var e=this,r=h,i=h;return r=e.$to_native_element($),i=e.$get_classes(t),D(i)?r.classList.add(...i):h}),w(q,"$remove_applied_class",function($,t){var e=this,r=h,i=h;return r=e.$to_native_element($),i=e.$get_class(t),D(i)?r.classList.remove(i):h}),w(q,"$remove_applied_classes",function($,t){var e=this,r=h,i=h;return r=e.$to_native_element($),i=e.$get_classes(t),D(i)?r.classList.remove(...i):h}),w(q,"$has_outlet?",function($){var t=this,e=h;return e="has"+t.$camelize($)+"Outlet",this[e]}),w(q,"$get_outlet",function($){var t=this,e=h;return e=""+t.$camelize($,!1)+"Outlet",this[e]}),w(q,"$get_outlets",function($){var t=this,e=h;return e=""+t.$camelize($,!1)+"Outlets",Array.from(this[e]||[])}),w(q,"$get_outlet_element",function($){var t=this,e=h;return e=""+t.$camelize($,!1)+"OutletElement",this[e]}),w(q,"$get_outlet_elements",function($){var t=this,e=h;return e=""+t.$camelize($,!1)+"OutletElements",Array.from(this[e]||[])}),w(q,"$call_outlet",function($,t,e){var r,i,a=this,o=h;return r=Z(arguments,2),i=r,D(a["$has_outlet?"]($))?(o=a.$get_outlet($),ee(a,"js_call_on",[o,t].concat(W(i)))):h},-3),w(q,"$call_all_outlets",function($,t,e){var r,i,a=this;return r=Z(arguments,2),i=r,ee(a.$get_outlets($),"each",[],function o(m){var T=o.$$s==null?this:o.$$s;return m==null&&(m=h),ee(T,"js_call_on",[m,t].concat(W(i)))},{$$s:a})},-3),w(q,"$stimulus_dispatch",function($,t){var e,r,i,a,o,m=h,T=h;return t=M(t),e=v(t,"detail"),e==null&&(e=new Map),r=v(t,"target"),r==null&&(r=h),i=v(t,"prefix"),i==null&&(i=h),a=v(t,"bubbles"),a==null&&(a=!0),o=v(t,"cancelable"),o==null&&(o=!0),m=D(e["$respond_to?"]("to_n"))?e.$to_n():e,T={detail:m,bubbles:a,cancelable:o},D(r["$nil?"]())||(T.target=r),D(i["$nil?"]())||(T.prefix=i),this.dispatch($,T)},-2),w(q,"$stimulus_dispatch_confirm",function($,t){var e,r=this,i=h;return t=M(t),e=v(t,"detail"),e==null&&(e=new Map),i=r.$stimulus_dispatch($,new Map([["detail",e],["cancelable",!0]])),!i.defaultPrevented},-2),w(q,"$action_params",function(){return event.params||{}}),w(q,"$action_param",function($){return(event.params||{})[$.$to_s()]}),w(q,"$action_param_int",function($,t){var e=this,r=h,i=h;return t==null&&(t=0),r=e.$action_param($),i=e.$parse_int(r),D(e["$is_nan?"](i))?t:i},-2),w(q,"$action_param_bool",function($){var t=this,e=h;return e=t.$action_param($),!!e&&e!=="false"&&e!=="0"}),w(q,"$has_action_param?",function($){return(event.params||{}).hasOwnProperty($.$to_s())}),w(q,"$this_application",function(){return this.application}),w(q,"$this_identifier",function(){return this.identifier}),w(q,"$this_element",function(){return this.element}),w(q,"$get_controller",function($,t){var e=this,r=h;return r=e.$to_native_element($),this.application.getControllerForElementAndIdentifier(r,t)}),w(q,"$get_controllers",function($,t){var e=this,r=h;r=e.$to_native_element($),Array.from(r.querySelectorAll('[data-controller~="'+t+'"]')).map(i=>this.application.getControllerForElementAndIdentifier(i,t)).filter(i=>i!==null)}),w(q,"$this_scope",function(){return this.scope.element}),w(q,"$in_scope?",function($){var t=this,e=h;return e=t.$to_native_element($),this.element.contains(e)}),q.$private(),w(q,"$camelize",function($,t){var e=h,r=h;return t==null&&(t=!0),e=$.$to_s(),D(e["$include?"]("_"))?(r=e.$split("_"),D(t)?ee(r,"map",[],"capitalize".$to_proc()).$join():L([r.$first()],ee(r["$[]"](Y(1,-1,!1)),"map",[],"capitalize".$to_proc())).$join()):D(t)?L(e["$[]"](0).$upcase(),e["$[]"](Y(1,-1,!1)).$to_s()):L(e["$[]"](0).$downcase(),e["$[]"](Y(1,-1,!1)).$to_s())},-2)}(g[0],g)}(E[0],E)}(p[0],p)}(H[0],H),O(H[0],"StimulusHelpers",I(I(I(b("OpalVite"),"Concerns"),"V1"),"StimulusHelpers"))};Opal.modules["services/todo_storage_service"]=function(n){var z=n.klass,w=n.def,D=n.truthy,x=[],ee=n.nil;return n.add_stubs("include,attr_reader,storage_get_json,js_timestamp,js_iso_date,all,to_n,save"),function(Z,M,J){var v=z(Z,M,"TodoStorageService"),L=[v].concat(J),$e=n.$r(L),W=v.$$prototype;return W.storage_key=ee,v.$include($e("StimulusHelpers")),v.$attr_reader("storage_key"),w(v,"$initialize",function(O){var H=this;return O==null&&(O="opal_todos"),H.storage_key=O},-1),w(v,"$all",function(){var O=this;return O.$storage_get_json(O.storage_key,[])}),w(v,"$save",function(O){var H=this;return localStorage.setItem(H.storage_key,JSON.stringify(O))}),w(v,"$add",function(O){var H=this,b=ee,h=ee;return b=new Map([["id",H.$js_timestamp()],["text",O],["completed",!1],["createdAt",H.$js_iso_date()]]),h=H.$all(),h.push(b.$to_n()),H.$save(h),b.$to_n()}),w(v,"$find",function(O){var H=this,b=ee;return b=H.$all(),b.find(function(h){return h.id===O})}),w(v,"$toggle",function(O){var H=this,b=ee,h=ee;return b=H.$all(),h=b.find(function(I){return I.id===O}),D(h)?(h.completed=!h.completed,H.$save(b),!0):!1}),w(v,"$update_text",function(O,H){var b=this,h=ee,I=ee;return h=b.$all(),I=h.find(function(j){return j.id===O}),D(I)?(I.text=H,b.$save(h),!0):!1}),w(v,"$delete",function(O){var H=this,b=ee,h=ee;return b=H.$all(),h=b.filter(function(I){return I.id!==O}),H.$save(h)}),w(v,"$clear_completed",function(){var O=this,H=ee,b=ee,h=ee;return H=O.$all(),b=H.filter(function(I){return I.completed}).length,h=H.filter(function(I){return!I.completed}),O.$save(h),b}),w(v,"$filter",function(O){var H=this,b=ee;switch(b=H.$all(),O.valueOf()){case"active":return b.filter(function(h){return!h.completed});case"completed":return b.filter(function(h){return h.completed});default:return b}}),w(v,"$counts",function(){var O=this,H=ee,b=ee,h=ee,I=ee;return H=O.$all(),b=H.length,h=H.filter(function(j){return!j.completed}).length,I=H.filter(function(j){return j.completed}).length,new Map([["total",b],["active",h],["completed",I]])})}(x[0],null,x)};Opal.modules["services/todo_presenter"]=function(n){var z=n.klass,w=n.assign_ivar,D=n.def,x=n.truthy,ee=n.eqeq,Z=[],M=n.nil;return n.add_stubs("include,get_target,set_html,render_todo_item,show_empty_state,hide_empty_state,clone_template,template_first_child,setup_todo_element,append_child,query,to_native_element,set_text,has_target?,target_set_html,[],==,show_target,hide_target,private,set_attr,add_class,setup_checkbox,setup_text,setup_buttons"),function(J,v,L){var $e=z(J,v,"TodoPresenter"),W=[$e].concat(L),Y=n.$r(W),O=$e.$$prototype;return O.controller=M,$e.$include(Y("StimulusHelpers")),D($e,"$initialize",w("controller")),D($e,"$render_all",function(b){var h=this,I=M,j=M,k=M;I=h.controller.$get_target("list"),h.$set_html(I,""),j=b.length;for(var F=0;F<j;F++)k=b[F],h.$render_todo_item(k,I);return x(j===0)?h.$show_empty_state():h.$hide_empty_state()}),D($e,"$render_todo_item",function(b,h){var I=this,j=M,k=M;return j=I.controller.$clone_template("template"),k=I.$template_first_child(j),x(k)?(I.$setup_todo_element(k,b),I.$append_child(h,j)):M}),D($e,"$update_todo_text",function(b,h){var I=this,j=M,k=M,F=M;return j=I.$query('[data-todo-id="'+b+'"]'),x(j)?(k=I.$to_native_element(j),F=k.querySelector(".todo-text"),x(F)?I.$set_text(F,h):M):M}),D($e,"$update_count",function(b){var h=this;return x(h.controller["$has_target?"]("count"))&&h.controller.$target_set_html("count",""+b["$[]"]("active")+" active, "+b["$[]"]("completed")+" completed"),ee(b["$[]"]("total"),0)?h.$show_empty_state():M}),D($e,"$show_empty_state",function(){var b=this;return x(b.controller["$has_target?"]("emptyState"))?b.controller.$show_target("emptyState"):M}),D($e,"$hide_empty_state",function(){var b=this;return x(b.controller["$has_target?"]("emptyState"))?b.controller.$hide_target("emptyState"):M}),$e.$private(),D($e,"$setup_todo_element",function(b,h){var I=this;return I.$set_attr(b,"data-todo-id",h.id),x(h.completed)&&I.$add_class(b,"completed"),I.$setup_checkbox(b,h),I.$setup_text(b,h),I.$setup_buttons(b,h)}),D($e,"$setup_checkbox",function(b,h){var I=this,j=M;return j=b.querySelector(".todo-checkbox"),x(j)?(I.$set_attr(j,"data-todo-id",h.id),j.checked=h.completed):M}),D($e,"$setup_text",function(b,h){var I=this,j=M;return j=b.querySelector(".todo-text"),x(j)?I.$set_text(j,h.text):M}),D($e,"$setup_buttons",function(b,h){var I=this,j=M,k=M;return j=b.querySelector(".edit-btn"),x(j)&&I.$set_attr(j,"data-todo-id",h.id),k=b.querySelector(".delete-btn"),x(k)?I.$set_attr(k,"data-todo-id",h.id):M})}(Z[0],null,Z)};Opal.modules["controllers/todo_controller"]=function(n){var z=n.klass,w=n.send2,D=n.find_super,x=n.def,ee=n.send,Z=n.truthy,M=n.eqeq,J=[],v=n.$r(J),L=n.nil;return n.add_stubs("include,targets=,values=,classes=,new,on_window_event,parse_int,handle_update_todo,render_todos,target_value,show_toast,get_target,has_class_definition?,apply_class,set_attr,set_timeout,add,target_set_value,remove_applied_class,remove_attr,event_data_int,toggle,delete,find,dispatch_window_event,clear_completed,==,event_data,query_all_element,each,remove_class,add_class,event_target,private,update_text,update_todo_text,filter,render_all,update_count,counts"),function($e,W,Y){var O=z($e,W,"TodoController"),H=[O].concat(Y),b=n.$r(H),h=O.$$prototype;return h.storage_key_value=h.storage=h.presenter=L,O.$include(b("StimulusHelpers")),O["$targets="](["list","input","template","count","emptyState","form"]),O["$values="](new Map([["storage_key","string"],["filter","string"]])),O["$classes="](["loading","success"]),x(O,"$initialize",function I(){var j=I.$$p||L,k=this;return I.$$p=null,w(k,D(k,"initialize",I,!1,!0),"initialize",[],j),k.storage_key_value="opal_todos",k.filter_value="all"}),x(O,"$connect",function(){var j=this;return j.storage=b("TodoStorageService").$new(j.storage_key_value),j.presenter=b("TodoPresenter").$new(j),ee(j,"on_window_event",["update-todo"],function k(F){var p=k.$$s==null?this:k.$$s,A=L,P=L,S=L;return F==null&&(F=L),A=F.detail,P=p.$parse_int(A.todoId),S=A.text,p.$handle_update_todo(P,S)},{$$s:j}),j.$render_todos()}),x(O,"$add_todo",function(){var j=this,k=L,F=L,p=L;return k=j.$target_value("input"),k=k.trim(),Z(k==="")?(j.$show_toast("Please enter a todo item","error"),L):(F=j.$get_target("form"),Z(j["$has_class_definition?"]("loading"))&&(j.$apply_class(F,"loading"),p=F.querySelector("button"),Z(p)&&j.$set_attr(p,"disabled","true")),ee(j,"set_timeout",[800],function A(){var P=A.$$s==null?this:A.$$s;return P.storage==null&&(P.storage=L),P.storage.$add(k),P.$target_set_value("input",""),Z(P["$has_class_definition?"]("loading"))&&(P.$remove_applied_class(F,"loading"),p=F.querySelector("button"),Z(p)&&P.$remove_attr(p,"disabled")),P.$render_todos(),Z(P["$has_class_definition?"]("success"))&&(P.$apply_class(F,"success"),ee(P,"set_timeout",[1e3],function S(){var E=S.$$s==null?this:S.$$s;return E.$remove_applied_class(F,"success")},{$$s:P})),P.$show_toast("Todo added!","success")},{$$s:j}))}),x(O,"$toggle_todo",function(){var j=this,k=L;return k=j.$event_data_int("todo-id"),Z(j.storage.$toggle(k))?j.$render_todos():L}),x(O,"$delete_todo",function(){var j=this,k=L;return k=j.$event_data_int("todo-id"),j.storage.$delete(k),j.$render_todos(),j.$show_toast("Todo deleted","info")}),x(O,"$edit_todo",function(){var j=this,k=L,F=L;return k=j.$event_data_int("todo-id"),F=j.storage.$find(k),Z(F)?j.$dispatch_window_event("open-modal",new Map([["title","Edit Todo"],["todoId",k],["todoText",F.text]])):L}),x(O,"$clear_completed",function(){var j=this,k=L;return k=j.storage.$clear_completed(),M(k,0)?(j.$show_toast("No completed todos to clear","info"),L):(j.$render_todos(),j.$show_toast("Completed todos cleared","success"))}),x(O,"$set_filter",function(){var j=this,k=L,F=L;return k=j.$event_data("filter"),this.filterValue=k,F=j.$query_all_element("[data-filter]"),ee(F,"each",[],function p(A){var P=p.$$s==null?this:p.$$s;return A==null&&(A=L),P.$remove_class(A,"active")},{$$s:j}),j.$add_class(j.$event_target(),"active"),j.$render_todos()}),O.$private(),x(O,"$handle_update_todo",function(j,k){var F=this;return Z(F.storage.$update_text(j,k))?(F.presenter.$update_todo_text(j,k),F.$show_toast("Todo updated!","success")):L}),x(O,"$render_todos",function(){var j=this,k=L,F=L;return k=this.filterValue||"all",F=j.storage.$filter(k),j.presenter.$render_all(F),j.presenter.$update_count(j.storage.$counts())}),x(O,"$show_toast",function(j,k){var F=this;return F.$dispatch_window_event("show-toast",new Map([["message",j],["type",k]]))})}(J[0],v("StimulusController"),J)};Opal.modules["controllers/form_controller"]=function(n){var z=n.klass,w=n.return_val,D=n.def,x=n.truthy,ee=n.neqeq,Z=n.send,M=[],J=n.$r(M),v=n.nil;return n.add_stubs("include,targets=,event_target,next_sibling,get_value,has_attr?,parse_int_or,get_attr,js_regexp_test,!=,add_class,has_class?,set_text,set_style,remove_class,prevent_default,query_all_element,each,dispatch_window_event"),function(L,$e,W){var Y=z(L,$e,"FormController"),O=[Y].concat(W),H=n.$r(O);return Y.$include(H("StimulusHelpers")),Y["$targets="](["input","error"]),D(Y,"$connect",w(v)),D(Y,"$validate",function(){var h=this,I=v,j=v,k=v,F=v,p=v,A=v,P=v,S=v;return I=h.$event_target(),j=h.$next_sibling(I),k=h.$get_value(I).trim(),F=h["$has_attr?"](I,"data-required"),p=h.$parse_int_or(h.$get_attr(I,"data-min-length"),0),A=h.$parse_int_or(h.$get_attr(I,"data-max-length"),1e3),P=h.$get_attr(I,"data-pattern"),S="",x(F)&&x(k==="")?S="This field is required":x(p>0&&k.length<p)?S="Must be at least "+p+" characters":x(A>0&&k.length>A)?S="Must be at most "+A+" characters":x(P)&&x(k!=="")&&(x(h.$js_regexp_test(P,k))||(S="Invalid format")),ee(S,"")?(h.$add_class(I,"error"),x(j)&&x(h["$has_class?"](j,"error-message"))?(h.$set_text(j,S),h.$set_style(j,"display","block")):v):(h.$remove_class(I,"error"),x(j)&&x(h["$has_class?"](j,"error-message"))?h.$set_style(j,"display","none"):v)}),D(Y,"$submit",function(){var h=this,I=v,j=v;return h.$prevent_default(),I=h.$query_all_element('[data-form-target="input"]'),j=!0,Z(I,"each",[],function k(F){var p=k.$$s==null?this:k.$$s;F==null&&(F=v);const A=new Event("input",{bubbles:!0});return F.dispatchEvent(A),x(p["$has_class?"](F,"error"))?j=!1:v},{$$s:h}),x(j)?(h.$dispatch_window_event("show-toast",new Map([["message","Form submitted successfully!"],["type","success"]])),this.element.reset(),Z(I,"each",[],function k(F){var p=k.$$s==null?this:k.$$s,A=v;return F==null&&(F=v),p.$remove_class(F,"error"),A=p.$next_sibling(F),x(A)&&x(p["$has_class?"](A,"error-message"))?p.$set_style(A,"display","none"):v},{$$s:h})):(h.$dispatch_window_event("show-toast",new Map([["message","Please fix validation errors"],["type","error"]])),v)})}(M[0],J("StimulusController"),M)};Opal.modules["controllers/modal_controller"]=function(n){var z=n.klass,w=n.send,D=n.truthy,x=n.def,ee=n.eqeq,Z=[],M=n.$r(Z),J=n.nil;return n.add_stubs("include,targets=,on_window_event,has_target?,target_set_text,target_set_value,get_target,set_attr,open_modal,close_modal,reset_form,event_target,close,==,event_key,get_value,dispatch_window_event,get_attr,parse_int,private,element_add_class,add_target_class,set_timeout,target_focus,lock_body_scroll,element_remove_class,remove_target_class,unlock_body_scroll,remove_attr"),function(v,L,$e){var W=z(v,L,"ModalController"),Y=[W].concat($e),O=n.$r(Y);return W.$include(O("StimulusHelpers")),W["$targets="](["overlay","content","title","body","input"]),x(W,"$connect",function(){var b=this;return w(b,"on_window_event",["open-modal"],function h(I){var j=h.$$s==null?this:h.$$s,k=J,F=J,p=J,A=J,P=J;return I==null&&(I=J),k=I.detail,F=k.title,p=k.todoText,A=k.todoId,D(j["$has_target?"]("title"))&&D(F)&&j.$target_set_text("title",F),D(j["$has_target?"]("input"))&&D(p)&&(j.$target_set_value("input",p),P=j.$get_target("input"),j.$set_attr(P,"data-todo-id",A)),j.$open_modal()},{$$s:b})}),x(W,"$open",function(){var b=this;return b.$open_modal()}),x(W,"$open_with_data",function(){var b=this,h=J,I=J,j=J,k=J,F=J;return h=arguments[0],I=h.title,j=h.todoText,k=h.todoId,D(b["$has_target?"]("title"))&&D(I)&&b.$target_set_text("title",I),D(b["$has_target?"]("input"))&&D(j)&&(b.$target_set_value("input",j),F=b.$get_target("input"),b.$set_attr(F,"data-todo-id",k)),b.$open_modal()}),x(W,"$close",function(){var b=this;return b.$close_modal(),D(b["$has_target?"]("input"))?b.$reset_form():J}),x(W,"$close_on_overlay",function(){var b=this,h=J,I=J;return h=b.$event_target(),I=b.$get_target("overlay"),D(h===I)?b.$close():J}),x(W,"$close_on_escape",function(){var b=this;return ee(b.$event_key(),"Escape")?b.$close():J}),x(W,"$save",function(){var b=this,h=J,I=J,j=J;return h=b.$get_target("input"),D(h)?(I=b.$get_value(h),I=I.trim(),D(I==="")?(b.$dispatch_window_event("show-toast",new Map([["message","Please enter todo text"],["type","error"]])),J):(j=b.$get_attr(h,"data-todo-id"),b.$dispatch_window_event("update-todo",new Map([["todoId",b.$parse_int(j)],["text",I]])),b.$close_modal(),D(b["$has_target?"]("input"))?b.$reset_form():J)):J}),W.$private(),x(W,"$open_modal",function(){var b=this;return b.$element_add_class("active"),b.$add_target_class("overlay","active"),b.$add_target_class("content","active"),D(b["$has_target?"]("input"))&&w(b,"set_timeout",[100],function h(){var I=h.$$s==null?this:h.$$s;return I.$target_focus("input")},{$$s:b}),b.$lock_body_scroll()}),x(W,"$close_modal",function(){var b=this;return b.$element_remove_class("active"),b.$remove_target_class("overlay","active"),b.$remove_target_class("content","active"),b.$unlock_body_scroll()}),x(W,"$reset_form",function(){var b=this,h=J;return b.$target_set_value("input",""),h=b.$get_target("input"),b.$remove_attr(h,"data-todo-id")})}(Z[0],M("StimulusController"),Z)};Opal.modules["controllers/toast_controller"]=function(n){var z=n.klass,w=n.send,D=n.def,x=n.truthy,ee=n.eqeqeq,Z=[],M=n.$r(Z),J=n.nil;return n.add_stubs("include,targets=,on_window_event,show,has_target?,get_target,query,puts,create_element,===,set_html,append_child,set_timeout,add_class,remove_class,remove_element,sample,[]"),function(v,L,$e){var W=z(v,L,"ToastController"),Y=[W].concat($e),O=n.$r(Y);return W.$include(O("StimulusHelpers")),W["$targets="](["container"]),D(W,"$connect",function(){var b=this;return w(b,"on_window_event",["show-toast"],function h(I){var j=h.$$s==null?this:h.$$s,k=J,F=J,p=J;return I==null&&(I=J),k=I.detail,F=k.message,p=k.type||"info",j.$show(F,p)},{$$s:b})}),D(W,"$show",function(b,h){var I=this,j=J,k=J,F=J,p=J;return b==null&&(b=J),h==null&&(h="info"),b=x(j=b)?j:arguments[0],x(arguments.length>1)&&(h=arguments[1]||"info"),k=x(I["$has_target?"]("container"))?I.$get_target("container"):J,k=x(j=k)?j:I.$query('.toast-container[data-toast-target="container"]'),x(k)?(F=I.$create_element("div"),F.className="toast toast-"+h,p=ee("success",j=h)?"":ee("error",j)?"":ee("warning",j)?"":"",I.$set_html(F,'<span class="toast-icon">'+p+'</span><span class="toast-message">'+b+"</span>"),I.$append_child(k,F),w(I,"set_timeout",[10],function A(){var P=A.$$s==null?this:A.$$s;return P.$add_class(F,"show")},{$$s:I}),w(I,"set_timeout",[3e3],function A(){var P=A.$$s==null?this:A.$$s;return P.$remove_class(F,"show"),w(P,"set_timeout",[300],function S(){var E=S.$$s==null?this:S.$$s;return E.$remove_element(F)},{$$s:P})},{$$s:I})):(I.$puts("No toast container found"),J)},-1),D(W,"$show_test",function(){var b=this,h=J,I=J;return h=[new Map([["text","Success message!"],["type","success"]]),new Map([["text","Error message!"],["type","error"]]),new Map([["text","Warning message!"],["type","warning"]]),new Map([["text","Info message!"],["type","info"]])],I=h.$sample(),b.$show(I["$[]"]("text"),I["$[]"]("type"))})}(Z[0],M("StimulusController"),Z)};Opal.modules["controllers/theme_controller"]=function(n){var z=n.klass,w=n.def,D=n.truthy,x=n.eqeq,ee=[],Z=n.$r(ee),M=n.nil;return n.add_stubs("include,load_theme,get_root_attr,==,set_root_attr,storage_set,event_target,set_text,dispatch_window_event,private,storage_get,query_element"),function(J,v,L){var $e=z(J,v,"ThemeController"),W=[$e].concat(L),Y=n.$r(W);return $e.$include(Y("StimulusHelpers")),w($e,"$connect",function(){var H=this;return H.$load_theme()}),w($e,"$toggle",function(){var H=this,b=M,h=M,I=M,j=M;return b=D(h=H.$get_root_attr("data-theme"))?h:"light",I=x(b,"light")?"dark":"light",H.$set_root_attr("data-theme",I),H.$storage_set("theme",I),j=H.$event_target(),H.$set_text(j,x(I,"dark")?" Light Mode":" Dark Mode"),H.$dispatch_window_event("show-toast",new Map([["message","Switched to "+I+" mode"],["type","info"]]))}),$e.$private(),w($e,"$load_theme",function(){var H=this,b=M,h=M,I=M;return b=D(h=H.$storage_get("theme"))?h:"light",H.$set_root_attr("data-theme",b),I=H.$query_element('[data-action*="toggle"]'),D(I)?H.$set_text(I,x(b,"dark")?" Light Mode":" Dark Mode"):M})}(ee[0],Z("StimulusController"),ee)};Opal.queue(function(n){var z=n.top,w=[],D=n.$r(w);return n.nil,n.add_stubs("require,puts,register_all!"),z.$require("native"),z.$require("opal_stimulus/stimulus_controller"),z.$require("opal_vite/concerns/v1/stimulus_helpers"),z.$require("services/todo_storage_service"),z.$require("services/todo_presenter"),z.$require("controllers/todo_controller"),z.$require("controllers/form_controller"),z.$require("controllers/modal_controller"),z.$require("controllers/toast_controller"),z.$require("controllers/theme_controller"),z.$puts("Practical App - Todo with Opal"),z.$puts("Ruby version: "+D("RUBY_VERSION")),D("StimulusController")["$register_all!"](),z.$puts("All controllers registered!")});
