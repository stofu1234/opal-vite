var se=(s,P)=>()=>(P||s((P={exports:{}}).exports,P),P.exports);var ie=se((re,ne)=>{(function(){const P=document.createElement("link").relList;if(P&&P.supports&&P.supports("modulepreload"))return;for(const N of document.querySelectorAll('link[rel="modulepreload"]'))C(N);new MutationObserver(N=>{for(const b of N)if(b.type==="childList")for(const y of b.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&C(y)}).observe(document,{childList:!0,subtree:!0});function x(N){const b={};return N.integrity&&(b.integrity=N.integrity),N.referrerPolicy&&(b.referrerPolicy=N.referrerPolicy),N.crossOrigin==="use-credentials"?b.credentials="include":N.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function C(N){if(N.ep)return;N.ep=!0;const b=x(N);fetch(N.href,b)}})();Opal.modules.native=function(s){var P=s.hash_put,x=s.module,C=s.defs,N=s.slice,b=s.truthy,y=s.send,w=s.Kernel,S=s.extract_kwargs,f=s.ensure_kwargs,M=s.hash_get,l=s.range,m=s.to_a,d=s.def,D=s.return_ivar,g=s.alias,u=s.klass,E=s.rb_minus,a=s.return_val,r=s.send2,h=s.find_super,j=s.eqeqeq,H=s.rb_ge,G=s.return_self,Y=s.gvars,Z=s.top,B=[],X=s.$r(B),$=s.nil,L=s.$$$;return s.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(q,A){var p=x(q,"Native"),k=[p].concat(A),v=s.$r(k);return C(p,"$is_a?",function(t,i){var n=this;try{return t instanceof n.$try_convert(i)}catch{return!1}}),C(p,"$try_convert",function(t,i){var n=this;return i==null&&(i=$),n["$native?"](t)?t:t["$respond_to?"]("to_n")?t.$to_n():i},-2),C(p,"$convert",function(t){var i=this;if(i["$native?"](t))return t;if(t["$respond_to?"]("to_n"))return t.$to_n();i.$raise(v("ArgumentError"),""+t.$inspect()+" isn't native")}),C(p,"$call",function e(t,i,n){var o=e.$$p||$,c,_,z=this;e.$$p=null,c=N(arguments,2),_=c;var T=t[i];if(T instanceof Function){for(var I=new Array(_.length),F=0,W=_.length;F<W;F++){var K=_[F],U=z.$try_convert(K);I[F]=U===$?K:U}return o!==$&&I.push(o),z.$Native(T.apply(t,I))}else return z.$Native(T)},-3),C(p,"$proc",function e(){var t=e.$$p||$,i=this;return e.$$p=null,b(t)||i.$raise(v("LocalJumpError"),"no block given"),y(w,"proc",[],function n(o){var c,_,z=n.$$s==null?this:n.$$s,T=$;if(c=N(arguments),_=c,y(_,"map!",[],function F(W){var K=F.$$s==null?this:F.$$s;return W==null&&(W=$),K.$Native(W)},{$$s:z}),T=z.$Native(this),this===s.global)return t.apply(z,_);var I=t.$$s;t.$$s=null;try{return t.apply(T,_)}finally{t.$$s=I}},{$$arity:-1,$$s:i})}),function(e,t){var i=x(e,"Helpers"),n=[i].concat(t),o=s.$r(n);return d(i,"$alias_native",function c(_,z,T){var I,F,W,K;c.$$p;var U=this;return c.$$p=null,I=N(arguments,1),F=S(I),F=f(F),I.length>0&&(W=I.shift()),W==null&&(W=_),K=M(F,"as"),K==null&&(K=$),b(W["$end_with?"]("="))?y(U,"define_method",[_],function R(J){var Q=R.$$s==null?this:R.$$s;return Q.native==null&&(Q.native=$),J==null&&(J=$),Q.native[W["$[]"](l(0,-2,!1))]=o("Native").$convert(J),J},{$$s:U}):b(K)?y(U,"define_method",[_],function R(J){var Q=R.$$p||$,O,ee,V=R.$$s==null?this:R.$$s,te=$;return V.native==null&&(V.native=$),R.$$p=null,O=N(arguments),ee=O,te=y(o("Native"),"call",[V.native,W].concat(m(ee)),Q.$to_proc()),b(te)?K.$new(te.$to_n()):$},{$$arity:-1,$$s:U}):y(U,"define_method",[_],function R(J){var Q=R.$$p||$,O,ee,V=R.$$s==null?this:R.$$s;return V.native==null&&(V.native=$),R.$$p=null,O=N(arguments),ee=O,y(o("Native"),"call",[V.native,W].concat(m(ee)),Q.$to_proc())},{$$arity:-1,$$s:U})},-2),d(i,"$native_reader",function(_){var z,T,I=this;return z=N(arguments),T=z,y(T,"each",[],function F(W){var K=F.$$s==null?this:F.$$s;return W==null&&(W=$),y(K,"define_method",[W],function U(){var R=U.$$s==null?this:U.$$s;return R.native==null&&(R.native=$),R.$Native(R.native[W])},{$$s:K})},{$$s:I})},-1),d(i,"$native_writer",function(_){var z,T,I=this;return z=N(arguments),T=z,y(T,"each",[],function F(W){var K=F.$$s==null?this:F.$$s;return W==null&&(W=$),y(K,"define_method",[""+W+"="],function U(R){var J=U.$$s==null?this:U.$$s;return J.native==null&&(J.native=$),R==null&&(R=$),J.$Native(J.native[W]=R)},{$$s:K})},{$$s:I})},-1),d(i,"$native_accessor",function(_){var z,T,I=this;return z=N(arguments),T=z,y(I,"native_reader",m(T)),y(I,"native_writer",m(T))},-1)}(k[0],k),function(e,t){var i=x(e,"Wrapper"),n=[i].concat(t),o=s.$r(n);return d(i,"$initialize",function(_){var z=this;return b(w["$native?"](_))||w.$raise(o("ArgumentError"),""+_.$inspect()+" isn't native"),z.native=_}),d(i,"$to_n",D("native")),C(i,"$included",function(_){return _.$extend(o("Helpers"))})}(k[0],k),C(p,"$included",function(t){var i=this;return i.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),t.$include(v("Wrapper"))})}(B[0],B),function(q,A){var p=x(q,"Kernel"),k=[p].concat(A),v=s.$r(k);return d(p,"$native?",function(t){return t==null||!t.$$class}),d(p,"$Native",function e(t){e.$$p;var i=this;return e.$$p=null,b(t==null)?$:b(i["$native?"](t))?L(v("Native"),"Object").$new(t):b(t["$is_a?"](v("Array")))?y(t,"map",[],function n(o){var c=n.$$s==null?this:n.$$s;return o==null&&(o=$),c.$Native(o)},{$$s:i}):b(t["$is_a?"](v("Proc")))?y(i,"proc",[],function n(o){var c=n.$$p||$,_,z,T=n.$$s==null?this:n.$$s;return n.$$p=null,_=N(arguments),z=_,T.$Native(y(t,"call",m(z),c.$to_proc()))},{$$arity:-1,$$s:i}):t}),g(p,"_Array","Array"),d(p,"$Array",function e(t,i){var n=e.$$p||$,o,c,_=this;return e.$$p=null,o=N(arguments,1),c=o,b(_["$native?"](t))?y(L(v("Native"),"Array"),"new",[t].concat(m(c)),n.$to_proc()).$to_a():_.$_Array(t)},-2)}(B[0],B),function(q,A){var p=u(q,A,"Object"),k=p.$$prototype;return k.native=$,p.$include(L(L("Native"),"Wrapper")),d(p,"$==",function(e){var t=this;return t.native===L("Native").$try_convert(e)}),d(p,"$has_key?",function(e){var t=this;return s.hasOwnProperty.call(t.native,e)}),d(p,"$each",function v(e){var t,i,n=v.$$p||$,o=this;if(v.$$p=null,t=N(arguments),i=t,n!==$){for(var c in o.native)s.yieldX(n,[c,o.native[c]]);return o}else return y(o,"method_missing",["each"].concat(m(i)))},-1),d(p,"$[]",function(e){var t=this,i=t.native[e];return i instanceof Function?i:L("Native").$call(t.native,e)}),d(p,"$[]=",function(e,t){var i=this,n=$;return n=L("Native").$try_convert(t),b(n===$)?i.native[e]=t:i.native[e]=n}),d(p,"$merge!",function(e){var t=this;e=L("Native").$convert(e);for(var i in e)t.native[i]=e[i];return t}),d(p,"$respond_to?",function(e,t){var i=this;return t==null&&(t=!1),w.$instance_method("respond_to?").$bind(i).$call(e,t)},-2),d(p,"$respond_to_missing?",function(e,t){var i=this;return s.hasOwnProperty.call(i.native,e)},-2),d(p,"$method_missing",function v(e,t){var i=v.$$p||$,n,o,c,_=this;return v.$$p=null,n=N(arguments,1),o=n,e.charAt(e.length-1)==="="?(c=[e.$slice(0,E(e.$length(),1)),o["$[]"](0)],y(_,"[]=",c),c[c.length-1]):y(L("Native"),"call",[_.native,e].concat(m(o)),i.$to_proc())},-2),d(p,"$nil?",a(!1)),d(p,"$is_a?",function(e){var t=this;return s.is_a(t,e)}),d(p,"$instance_of?",function(e){var t=this;return t.$$class===e}),d(p,"$class",function(){var e=this;return e.$$class}),d(p,"$to_a",function v(e){var t=v.$$p||$,i=this;return v.$$p=null,e==null&&(e=new Map),y(L(L("Native"),"Array"),"new",[i.native,e],t.$to_proc()).$to_a()},-1),d(p,"$inspect",function(){var e=this;return"#<Native:"+String(e.native)+">"}),g(p,"include?","has_key?"),g(p,"key?","has_key?"),g(p,"kind_of?","is_a?"),g(p,"member?","has_key?")}(X("Native"),X("BasicObject")),function(q,A,p){var k=u(q,A,"Array"),v=[k].concat(p),e=s.$r(v),t=k.$$prototype;return t.named=t.native=t.get=t.block=t.set=t.length=$,k.$include(L(e("Native"),"Wrapper")),k.$include(e("Enumerable")),d(k,"$initialize",function i(n,o){var c=i.$$p||$,_=this,z=$;return i.$$p=null,o==null&&(o=new Map),r(_,h(_,"initialize",i,!1,!0),"initialize",[n],null),_.get=b(z=o["$[]"]("get"))?z:o["$[]"]("access"),_.named=o["$[]"]("named"),_.set=b(z=o["$[]"]("set"))?z:o["$[]"]("access"),_.length=b(z=o["$[]"]("length"))?z:"length",_.block=c,b(_.$length()==null)?_.$raise(e("ArgumentError"),"no length found on the array-like object"):$},-2),d(k,"$each",function i(){var n=i.$$p||$,o=this;if(i.$$p=null,!b(n))return o.$enum_for("each");for(var c=0,_=o.$length();c<_;c++)s.yield1(n,o["$[]"](c));return o}),d(k,"$[]",function(n){var o=this,c=$,_=$;return c=j(e("String"),_=n)||j(e("Symbol"),_)?b(o.named)?o.native[o.named](n):o.native[n]:j(e("Integer"),_)?b(o.get)?o.native[o.get](n):o.native[n]:$,b(c)?b(o.block)?o.block.$call(c):o.$Native(c):$}),d(k,"$[]=",function(n,o){var c=this;return b(c.set)?c.native[c.set](n,e("Native").$convert(o)):c.native[n]=e("Native").$convert(o)}),d(k,"$last",function(n){var o=this,c=$,_=$;if(n==null&&(n=$),b(n)){for(c=E(o.$length(),1),_=[];b(H(c,0));)_["$<<"](o["$[]"](c)),c=E(c,1);return _}else return o["$[]"](E(o.$length(),1))},-1),d(k,"$length",function(){var n=this;return n.native[n.length]}),d(k,"$inspect",function(){var n=this;return n.$to_a().$inspect()}),g(k,"to_ary","to_a")}(X("Native"),null,B),function(q,A){var p=u(q,A,"Numeric");return d(p,"$to_n",function(){var v=this;return v.valueOf()})}(B[0],null),function(q,A){var p=u(q,A,"Proc");return d(p,"$to_n",G)}(B[0],null),function(q,A){var p=u(q,A,"String");return d(p,"$to_n",function(){var v=this;return v.valueOf()})}(B[0],null),function(q,A){var p=u(q,A,"Regexp");return d(p,"$to_n",function(){var v=this;return v.valueOf()})}(B[0],null),function(q,A){var p=u(q,A,"MatchData");return d(p,"$to_n",D("matches"))}(B[0],null),function(q,A,p){var k=u(q,A,"Struct"),v=[k].concat(p),e=s.$r(v);return d(k,"$to_n",function(){var i=this,n=$;return n={},y(i,"each_pair",[],function(c,_){return c==null&&(c=$),_==null&&(_=$),n[c]=e("Native").$try_convert(_,_)}),n})}(B[0],null,B),function(q,A,p){var k=u(q,A,"Array"),v=[k].concat(p),e=s.$r(v);return d(k,"$to_n",function(){for(var i=this,n=[],o=0,c=i.length;o<c;o++){var _=i[o];n.push(e("Native").$try_convert(_,_))}return n})}(B[0],null,B),function(q,A){var p=u(q,A,"Boolean");return d(p,"$to_n",function(){var v=this;return v.valueOf()})}(B[0],null),function(q,A){var p=u(q,A,"Time");return d(p,"$to_n",G)}(B[0],null),function(q,A){var p=u(q,A,"NilClass");return d(p,"$to_n",function(){return null})}(B[0],null),b(X("Hash")["$method_defined?"]("_initialize"))||function(q,A,p){var k=u(q,A,"Hash"),v=[k].concat(p),e=s.$r(v);g(k,"_initialize","initialize");function t(i,n,o){o&&(o.constructor===void 0||o.constructor===Object||o instanceof Map)?P(i,n,e("Hash").$new(o)):o&&o.$$is_array?(o=o.map(function(c){return c&&(c.constructor===void 0||c.constructor===Object||o instanceof Map)?e("Hash").$new(c):k.$Native(c)}),P(i,n,o)):P(i,n,k.$Native(o))}return d(k,"$initialize",function i(n){var o=i.$$p||$,c=this;if(i.$$p=null,n!=null)if(n.constructor===void 0||n.constructor===Object){var _,z;for(_ in n)z=n[_],t(c,_,z);return c}else n instanceof Map&&s.hash_each(n,!1,function(T,I){return t(c,T,I),[!1,!1]});return y(c,"_initialize",[n],o.$to_proc())},-1),d(k,"$to_n",function(){var n=this,o={};return s.hash_each(n,!1,function(c,_){return o[e("Native").$try_convert(c,c)]=e("Native").$try_convert(_,_),[!1,!1]}),o})}(B[0],null,B),function(q,A){var p=u(q,A,"Module");return d(p,"$native_module",function(){var v=this;return s.global[v.$name()]=v})}(B[0],null),function(q,A,p){var k=u(q,A,"Class"),v=[k].concat(p),e=s.$r(v);return d(k,"$native_alias",function(i,n){var o=this,c=o.prototype[s.jsid(n)];c||o.$raise(e("NameError").$new("undefined method `"+n+"' for class `"+o.$inspect()+"'",n)),o.prototype[i]=c}),d(k,"$native_class",function(){var i=this;return i.$native_module(),i.new=i.$new})}(B[0],null,B),Y.$=Y.global=Z.$Native(s.global)};Opal.modules.template=function(s){var P=s.klass,x=s.truthy,C=s.defs,N=s.send,b=s.def,y=s.alias,w=[],S=s.nil;return s.add_stubs("[],[]=,keys,attr_reader,instance_exec,new,to_proc,<<,join,append"),function(f,M,l){var m=P(f,M,"Template"),d=[m].concat(l),D=s.$r(d),g=m.$$prototype;return g.name=g.body=S,m._cache=new Map,C(m,"$[]",function(E){var a=this,r=S;return a._cache==null&&(a._cache=S),x(r=a._cache["$[]"](E))?r:a._cache["$[]"]("templates/"+E)}),C(m,"$[]=",function(E,a){var r,h=this;return h._cache==null&&(h._cache=S),r=[E,a],N(h._cache,"[]=",r),r[r.length-1]}),C(m,"$paths",function(){var E=this;return E._cache==null&&(E._cache=S),E._cache.$keys()}),m.$attr_reader("body"),b(m,"$initialize",function u(E){var a=u.$$p||S,r,h=this;return u.$$p=null,r=[E,a],h.name=r[0],h.body=r[1],r=[E,h],N(D("Template"),"[]=",r),r[r.length-1]}),b(m,"$inspect",function(){var E=this;return"#<Template: '"+E.name+"'>"}),b(m,"$render",function(E){var a=this;return E==null&&(E=a),N(E,"instance_exec",[D("OutputBuffer").$new()],a.body.$to_proc())},-1),function(u,E){var a=P(u,E,"OutputBuffer"),r=a.$$prototype;return r.buffer=S,b(a,"$initialize",function(){var j=this;return j.buffer=[]}),b(a,"$append",function(j){var H=this;return H.buffer["$<<"](j)}),b(a,"$join",function(){var j=this;return j.buffer.$join()}),y(a,"append=","append")}(d[0],null)}(w[0],null,w)};Opal.modules.erb=function(s){var P=s.klass,x=s.module,C=s.def,N=s.alias,b=s.top,y=[];return s.nil,s.add_stubs("require,html_escape,module_function"),b.$require("template"),function(w,S,f){var M=P(w,S,"ERB"),l=[M].concat(f);return function(m){var d=x(m,"Util"),D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=/[&<>"']/g;return C(d,"$html_escape",function(E){return(""+E).replace(g,function(a){return D[a]})}),N(d,"h","html_escape"),d.$module_function("h"),d.$module_function("html_escape")}(l[0])}(y[0],null,y)};(function(s){if(typeof re=="object"&&typeof ne<"u")ne.exports=s();else if(typeof define=="function"&&define.amd)define([],s);else{var P;typeof window<"u"?P=window:typeof global<"u"?P=global:typeof self<"u"?P=self:P=this,P.snabbdom=s()}})(function(){return function(){function s(P,x,C){function N(w,S){if(!x[w]){if(!P[w]){var f=typeof require=="function"&&require;if(!S&&f)return f(w,!0);if(b)return b(w,!0);var M=new Error("Cannot find module '"+w+"'");throw M.code="MODULE_NOT_FOUND",M}var l=x[w]={exports:{}};P[w][0].call(l.exports,function(m){var d=P[w][1][m];return N(d||m)},l,l.exports,s,P,x,C)}return x[w].exports}for(var b=typeof require=="function"&&require,y=0;y<C.length;y++)N(C[y]);return N}return s}()({1:[function(s,P,x){var C=s("./node_modules/snabbdom/build/init"),N=s("./node_modules/snabbdom/build/h"),b=s("./node_modules/snabbdom/build/tovnode"),y=s("./node_modules/snabbdom/build/modules/attributes"),w=s("./node_modules/snabbdom/build/modules/class"),S=s("./node_modules/snabbdom/build/modules/dataset"),f=s("./node_modules/snabbdom/build/modules/eventlisteners"),M=s("./node_modules/snabbdom/build/modules/props"),l=s("./node_modules/snabbdom/build/modules/style");P.exports.init=C.init,P.exports.h=N.h,P.exports.toVNode=b.toVNode,P.exports.attributesModule=y.attributesModule,P.exports.classModule=w.classModule,P.exports.datasetModule=S.datasetModule,P.exports.eventListenersModule=f.eventListenersModule,P.exports.propsModule=M.propsModule,P.exports.styleModule=l.styleModule},{"./node_modules/snabbdom/build/h":2,"./node_modules/snabbdom/build/init":4,"./node_modules/snabbdom/build/modules/attributes":6,"./node_modules/snabbdom/build/modules/class":7,"./node_modules/snabbdom/build/modules/dataset":8,"./node_modules/snabbdom/build/modules/eventlisteners":9,"./node_modules/snabbdom/build/modules/props":10,"./node_modules/snabbdom/build/modules/style":11,"./node_modules/snabbdom/build/tovnode":12}],2:[function(s,P,x){Object.defineProperty(x,"__esModule",{value:!0}),x.h=S;var C=s("./vnode"),N=y(s("./is"));function b(f){if(typeof WeakMap!="function")return null;var M=new WeakMap,l=new WeakMap;return(b=function(m){return m?l:M})(f)}function y(f,M){if(f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var l=b(M);if(l&&l.has(f))return l.get(f);var m={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in f)if(D!=="default"&&Object.prototype.hasOwnProperty.call(f,D)){var g=d?Object.getOwnPropertyDescriptor(f,D):null;g&&(g.get||g.set)?Object.defineProperty(m,D,g):m[D]=f[D]}return m.default=f,l&&l.set(f,m),m}function w(f,M,l){if(f.ns="http://www.w3.org/2000/svg",l!=="foreignObject"&&M!==void 0)for(let m=0;m<M.length;++m){const d=M[m].data;d!==void 0&&w(d,M[m].children,M[m].sel)}}function S(f,M,l){let m={},d,D,g;if(l!==void 0?(M!==null&&(m=M),N.array(l)?d=l:N.primitive(l)?D=l.toString():l&&l.sel&&(d=[l])):M!=null&&(N.array(M)?d=M:N.primitive(M)?D=M.toString():M&&M.sel?d=[M]:m=M),d!==void 0)for(g=0;g<d.length;++g)N.primitive(d[g])&&(d[g]=(0,C.vnode)(void 0,void 0,void 0,d[g],void 0));return f[0]==="s"&&f[1]==="v"&&f[2]==="g"&&(f.length===3||f[3]==="."||f[3]==="#")&&w(m,d,f),(0,C.vnode)(f,m,d,D,void 0)}},{"./is":5,"./vnode":13}],3:[function(s,P,x){Object.defineProperty(x,"__esModule",{value:!0}),x.htmlDomApi=void 0;function C(r,h){return document.createElement(r,h)}function N(r,h,j){return document.createElementNS(r,h,j)}function b(r){return document.createTextNode(r)}function y(r){return document.createComment(r)}function w(r,h,j){r.insertBefore(h,j)}function S(r,h){r.removeChild(h)}function f(r,h){r.appendChild(h)}function M(r){return r.parentNode}function l(r){return r.nextSibling}function m(r){return r.tagName}function d(r,h){r.textContent=h}function D(r){return r.textContent}function g(r){return r.nodeType===1}function u(r){return r.nodeType===3}function E(r){return r.nodeType===8}const a={createElement:C,createElementNS:N,createTextNode:b,createComment:y,insertBefore:w,removeChild:S,appendChild:f,parentNode:M,nextSibling:l,tagName:m,setTextContent:d,getTextContent:D,isElement:g,isText:u,isComment:E};x.htmlDomApi=a},{}],4:[function(s,P,x){Object.defineProperty(x,"__esModule",{value:!0}),x.init=g;var C=s("./vnode"),N=w(s("./is")),b=s("./htmldomapi");function y(u){if(typeof WeakMap!="function")return null;var E=new WeakMap,a=new WeakMap;return(y=function(r){return r?a:E})(u)}function w(u,E){if(u&&u.__esModule)return u;if(u===null||typeof u!="object"&&typeof u!="function")return{default:u};var a=y(E);if(a&&a.has(u))return a.get(u);var r={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in u)if(j!=="default"&&Object.prototype.hasOwnProperty.call(u,j)){var H=h?Object.getOwnPropertyDescriptor(u,j):null;H&&(H.get||H.set)?Object.defineProperty(r,j,H):r[j]=u[j]}return r.default=u,a&&a.set(u,r),r}function S(u){return u===void 0}function f(u){return u!==void 0}const M=(0,C.vnode)("",{},[],void 0,void 0);function l(u,E){var a,r;const h=u.key===E.key,j=((a=u.data)===null||a===void 0?void 0:a.is)===((r=E.data)===null||r===void 0?void 0:r.is);return u.sel===E.sel&&h&&j}function m(u){return u.sel!==void 0}function d(u,E,a){var r;const h={};for(let j=E;j<=a;++j){const H=(r=u[j])===null||r===void 0?void 0:r.key;H!==void 0&&(h[H]=j)}return h}const D=["create","update","remove","destroy","pre","post"];function g(u,E){const a={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},r=E!==void 0?E:b.htmlDomApi;for(const $ of D)for(const L of u){const q=L[$];q!==void 0&&a[$].push(q)}function h($){const L=$.id?"#"+$.id:"",q=$.getAttribute("class"),A=q?"."+q.split(" ").join("."):"";return(0,C.vnode)(r.tagName($).toLowerCase()+L+A,{},[],void 0,$)}function j($,L){return function(){if(--L===0){const A=r.parentNode($);r.removeChild(A,$)}}}function H($,L){var q,A;let p,k=$.data;if(k!==void 0){const t=(q=k.hook)===null||q===void 0?void 0:q.init;f(t)&&(t($),k=$.data)}const v=$.children,e=$.sel;if(e==="!")S($.text)&&($.text=""),$.elm=r.createComment($.text);else if(e!==void 0){const t=e.indexOf("#"),i=e.indexOf(".",t),n=t>0?t:e.length,o=i>0?i:e.length,c=t!==-1||i!==-1?e.slice(0,Math.min(n,o)):e,_=$.elm=f(k)&&f(p=k.ns)?r.createElementNS(p,c,k):r.createElement(c,k);for(n<o&&_.setAttribute("id",e.slice(n+1,o)),i>0&&_.setAttribute("class",e.slice(o+1).replace(/\./g," ")),p=0;p<a.create.length;++p)a.create[p](M,$);if(N.array(v))for(p=0;p<v.length;++p){const T=v[p];T!=null&&r.appendChild(_,H(T,L))}else N.primitive($.text)&&r.appendChild(_,r.createTextNode($.text));const z=$.data.hook;f(z)&&((A=z.create)===null||A===void 0||A.call(z,M,$),z.insert&&L.push($))}else $.elm=r.createTextNode($.text);return $.elm}function G($,L,q,A,p,k){for(;A<=p;++A){const v=q[A];v!=null&&r.insertBefore($,H(v,k),L)}}function Y($){var L,q;const A=$.data;if(A!==void 0){(q=(L=A==null?void 0:A.hook)===null||L===void 0?void 0:L.destroy)===null||q===void 0||q.call(L,$);for(let p=0;p<a.destroy.length;++p)a.destroy[p]($);if($.children!==void 0)for(let p=0;p<$.children.length;++p){const k=$.children[p];k!=null&&typeof k!="string"&&Y(k)}}}function Z($,L,q,A){for(var p,k;q<=A;++q){let v,e;const t=L[q];if(t!=null)if(f(t.sel)){Y(t),v=a.remove.length+1,e=j(t.elm,v);for(let n=0;n<a.remove.length;++n)a.remove[n](t,e);const i=(k=(p=t==null?void 0:t.data)===null||p===void 0?void 0:p.hook)===null||k===void 0?void 0:k.remove;f(i)?i(t,e):e()}else r.removeChild($,t.elm)}}function B($,L,q,A){let p=0,k=0,v=L.length-1,e=L[0],t=L[v],i=q.length-1,n=q[0],o=q[i],c,_,z,T;for(;p<=v&&k<=i;)e==null?e=L[++p]:t==null?t=L[--v]:n==null?n=q[++k]:o==null?o=q[--i]:l(e,n)?(X(e,n,A),e=L[++p],n=q[++k]):l(t,o)?(X(t,o,A),t=L[--v],o=q[--i]):l(e,o)?(X(e,o,A),r.insertBefore($,e.elm,r.nextSibling(t.elm)),e=L[++p],o=q[--i]):l(t,n)?(X(t,n,A),r.insertBefore($,t.elm,e.elm),t=L[--v],n=q[++k]):(c===void 0&&(c=d(L,p,v)),_=c[n.key],S(_)?r.insertBefore($,H(n,A),e.elm):(z=L[_],z.sel!==n.sel?r.insertBefore($,H(n,A),e.elm):(X(z,n,A),L[_]=void 0,r.insertBefore($,z.elm,e.elm))),n=q[++k]);(p<=v||k<=i)&&(p>v?(T=q[i+1]==null?null:q[i+1].elm,G($,T,q,k,i,A)):Z($,L,p,v))}function X($,L,q){var A,p,k,v,e;const t=(A=L.data)===null||A===void 0?void 0:A.hook;(p=t==null?void 0:t.prepatch)===null||p===void 0||p.call(t,$,L);const i=L.elm=$.elm,n=$.children,o=L.children;if($!==L){if(L.data!==void 0){for(let c=0;c<a.update.length;++c)a.update[c]($,L);(v=(k=L.data.hook)===null||k===void 0?void 0:k.update)===null||v===void 0||v.call(k,$,L)}S(L.text)?f(n)&&f(o)?n!==o&&B(i,n,o,q):f(o)?(f($.text)&&r.setTextContent(i,""),G(i,null,o,0,o.length-1,q)):f(n)?Z(i,n,0,n.length-1):f($.text)&&r.setTextContent(i,""):$.text!==L.text&&(f(n)&&Z(i,n,0,n.length-1),r.setTextContent(i,L.text)),(e=t==null?void 0:t.postpatch)===null||e===void 0||e.call(t,$,L)}}return function(L,q){let A,p,k;const v=[];for(A=0;A<a.pre.length;++A)a.pre[A]();for(m(L)||(L=h(L)),l(L,q)?X(L,q,v):(p=L.elm,k=r.parentNode(p),H(q,v),k!==null&&(r.insertBefore(k,q.elm,r.nextSibling(p)),Z(k,[L],0,0))),A=0;A<v.length;++A)v[A].data.hook.insert(v[A]);for(A=0;A<a.post.length;++A)a.post[A]();return q}}},{"./htmldomapi":3,"./is":5,"./vnode":13}],5:[function(s,P,x){Object.defineProperty(x,"__esModule",{value:!0}),x.primitive=N,x.array=void 0;const C=Array.isArray;x.array=C;function N(b){return typeof b=="string"||typeof b=="number"||b instanceof String||b instanceof Number}},{}],6:[function(s,P,x){Object.defineProperty(x,"__esModule",{value:!0}),x.attributesModule=void 0;const C="http://www.w3.org/1999/xlink",N="http://www.w3.org/XML/1998/namespace",b=58,y=120;function w(f,M){let l;const m=M.elm;let d=f.data.attrs,D=M.data.attrs;if(!(!d&&!D)&&d!==D){d=d||{},D=D||{};for(l in D){const g=D[l];d[l]!==g&&(g===!0?m.setAttribute(l,""):g===!1?m.removeAttribute(l):l.charCodeAt(0)!==y?m.setAttribute(l,g):l.charCodeAt(3)===b?m.setAttributeNS(N,l,g):l.charCodeAt(5)===b?m.setAttributeNS(C,l,g):m.setAttribute(l,g))}for(l in d)l in D||m.removeAttribute(l)}}const S={create:w,update:w};x.attributesModule=S},{}],7:[function(s,P,x){Object.defineProperty(x,"__esModule",{value:!0}),x.classModule=void 0;function C(b,y){let w,S;const f=y.elm;let M=b.data.class,l=y.data.class;if(!(!M&&!l)&&M!==l){M=M||{},l=l||{};for(S in M)M[S]&&!Object.prototype.hasOwnProperty.call(l,S)&&f.classList.remove(S);for(S in l)w=l[S],w!==M[S]&&f.classList[w?"add":"remove"](S)}}const N={create:C,update:C};x.classModule=N},{}],8:[function(s,P,x){Object.defineProperty(x,"__esModule",{value:!0}),x.datasetModule=void 0;const C=/[A-Z]/g;function N(y,w){const S=w.elm;let f=y.data.dataset,M=w.data.dataset,l;if(!f&&!M||f===M)return;f=f||{},M=M||{};const m=S.dataset;for(l in f)M[l]||(m?l in m&&delete m[l]:S.removeAttribute("data-"+l.replace(C,"-$&").toLowerCase()));for(l in M)f[l]!==M[l]&&(m?m[l]=M[l]:S.setAttribute("data-"+l.replace(C,"-$&").toLowerCase(),M[l]))}const b={create:N,update:N};x.datasetModule=b},{}],9:[function(s,P,x){Object.defineProperty(x,"__esModule",{value:!0}),x.eventListenersModule=void 0;function C(S,f,M){if(typeof S=="function")S.call(f,M,f);else if(typeof S=="object")for(let l=0;l<S.length;l++)C(S[l],f,M)}function N(S,f){const M=S.type,l=f.data.on;l&&l[M]&&C(l[M],f,S)}function b(){return function S(f){N(f,S.vnode)}}function y(S,f){const M=S.data.on,l=S.listener,m=S.elm,d=f&&f.data.on,D=f&&f.elm;let g;if(M!==d){if(M&&l)if(d)for(g in M)d[g]||m.removeEventListener(g,l,!1);else for(g in M)m.removeEventListener(g,l,!1);if(d){const u=f.listener=S.listener||b();if(u.vnode=f,M)for(g in d)M[g]||D.addEventListener(g,u,!1);else for(g in d)D.addEventListener(g,u,!1)}}}const w={create:y,update:y,destroy:y};x.eventListenersModule=w},{}],10:[function(s,P,x){Object.defineProperty(x,"__esModule",{value:!0}),x.propsModule=void 0;function C(b,y){let w,S,f;const M=y.elm;let l=b.data.props,m=y.data.props;if(!(!l&&!m)&&l!==m){l=l||{},m=m||{};for(w in m)S=m[w],f=l[w],f!==S&&(w!=="value"||M[w]!==S)&&(M[w]=S)}}const N={create:C,update:C};x.propsModule=N},{}],11:[function(s,P,x){Object.defineProperty(x,"__esModule",{value:!0}),x.styleModule=void 0;const C=typeof window<"u"&&window.requestAnimationFrame.bind(window)||setTimeout,N=function(m){C(function(){C(m)})};let b=!1;function y(m,d,D){N(function(){m[d]=D})}function w(m,d){let D,g;const u=d.elm;let E=m.data.style,a=d.data.style;if(!E&&!a||E===a)return;E=E||{},a=a||{};const r="delayed"in E;for(g in E)a[g]||(g[0]==="-"&&g[1]==="-"?u.style.removeProperty(g):u.style[g]="");for(g in a)if(D=a[g],g==="delayed"&&a.delayed)for(const h in a.delayed)D=a.delayed[h],(!r||D!==E.delayed[h])&&y(u.style,h,D);else g!=="remove"&&D!==E[g]&&(g[0]==="-"&&g[1]==="-"?u.style.setProperty(g,D):u.style[g]=D)}function S(m){let d,D;const g=m.elm,u=m.data.style;if(!(!u||!(d=u.destroy)))for(D in d)g.style[D]=d[D]}function f(m,d){const D=m.data.style;if(!D||!D.remove){d();return}b||(m.elm.offsetLeft,b=!0);let g;const u=m.elm;let E=0;const a=D.remove;let r=0;const h=[];for(g in a)h.push(g),u.style[g]=a[g];const H=getComputedStyle(u)["transition-property"].split(", ");for(;E<H.length;++E)h.indexOf(H[E])!==-1&&r++;u.addEventListener("transitionend",function(G){G.target===u&&--r,r===0&&d()})}function M(){b=!1}const l={pre:M,create:w,update:w,destroy:S,remove:f};x.styleModule=l},{}],12:[function(s,P,x){Object.defineProperty(x,"__esModule",{value:!0}),x.toVNode=b;var C=s("./vnode"),N=s("./htmldomapi");function b(y,w){const S=w!==void 0?w:N.htmlDomApi;let f;if(S.isElement(y)){const M=y.id?"#"+y.id:"",l=y.getAttribute("class"),m=l?"."+l.split(" ").join("."):"",d=S.tagName(y).toLowerCase()+M+m,D={},g=[];let u,E,a;const r=y.attributes,h=y.childNodes;for(E=0,a=r.length;E<a;E++)u=r[E].nodeName,u!=="id"&&u!=="class"&&(D[u]=r[E].nodeValue);for(E=0,a=h.length;E<a;E++)g.push(b(h[E],w));return(0,C.vnode)(d,{attrs:D},g,void 0,y)}else return S.isText(y)?(f=S.getTextContent(y),(0,C.vnode)(void 0,void 0,void 0,f,y)):S.isComment(y)?(f=S.getTextContent(y),(0,C.vnode)("!",{},[],f,y)):(0,C.vnode)("",{},[],void 0,y)}},{"./htmldomapi":3,"./vnode":13}],13:[function(s,P,x){Object.defineProperty(x,"__esModule",{value:!0}),x.vnode=C;function C(N,b,y,w,S){const f=b===void 0?void 0:b.key;return{sel:N,data:b,children:y,text:w,elm:S,key:f}}},{}]},{},[1])(1)});Opal.loaded(["vendor/snabbdom.js"]);Opal.modules["snabberb/component"]=function(s){var P=s.module,x=s.klass,C=s.ensure_kwargs,N=s.kwrestargs,b=s.send,y=s.defs,w=s.truthy,S=s.rb_minus,f=s.def,M=s.rb_le,l=s.not,m=s.slice,d=s.extract_kwargs,D=s.hash_get,g=[],u=s.nil,E=s.$$$;return s.add_stubs("attr_accessor,attr_reader,[]=,class_needs,respond_to?,superclass,clone,new,node=,update!,html,root?,store,-,keys,empty?,raise,init_needs,==,node_to_s,render,is_a?,<=,class,!,convert,<<,request_ids,shift,node,root,nil?,stores?,instance_variable_set,update,dig,private,each,[],key?,html_escape,needs"),function(a,r){var h=P(a,"Snabberb"),j=[h].concat(r),H=s.$r(j);return function(G,Y,Z){var B=x(G,Y,"Component"),X=[B].concat(Z),$=s.$r(X),L=B.$$prototype;L.root=L.store=L.request_ids=u,B.$attr_accessor("node"),B.$attr_reader("root");const q=new Set(["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),A=new Set(["attributes","childElementCount","children","classList","clientHeight","clientLeft","clientTop","clientWidth","currentStyle","firstElementChild","innerHTML","lastElementChild","nextElementSibling","ongotpointercapture","onlostpointercapture","onwheel","outerHTML","previousElementSibling","runtimeStyle","scrollHeight","scrollLeft","scrollLeftMax","scrollTop","scrollTopMax","scrollWidth","tabStop","tagName"]),p=new Set(["disabled","visible","checked","readonly","required","allowfullscreen","autofocus","autoplay","compact","controls","default","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","noresize","noshade","novalidate","nowrap","open","reversed","seamless","selected","sortable","truespeed","typemustmatch"]),k=snabbdom.init([snabbdom.attributesModule,snabbdom.classModule,snabbdom.datasetModule,snabbdom.eventListenersModule,snabbdom.propsModule,snabbdom.styleModule]);return y(B,"$needs",function(e,t){var i,n,o=this;return t=C(t),i=N(t,{}),n=[e,i],b(o.$class_needs(),"[]=",n),n[n.length-1]},-2),y(B,"$class_needs",function(){var e=this,t=u;return e.class_needs==null&&(e.class_needs=u),e.class_needs=w(t=e.class_needs)?t:w(e.$superclass()["$respond_to?"]("class_needs"))?e.$superclass().$class_needs().$clone():new Map}),y(B,"$attach",function(e,t){var i,n=this,o=u;return t=C(t),i=N(t,{}),o=n.$new(u,i),o["$node="](document.getElementById(e)),o["$update!"]()},-2),y(B,"$html",function(e){var t,i=this,n=u;return e=C(e),t=N(e,{}),n=i.$new(u,t),n.$html()},-1),f(B,"$initialize",function(e,t){var i=this,n=u,o=u;return i.root=w(n=e)?n:i,i.store=w(i["$root?"]())?new Map:i.root.$store(),o=S(t.$keys(),i.$class_needs().$keys()),w(o["$empty?"]())||i.$raise("Unused needs passed to component: "+o+"."),i.$init_needs(t)}),f(B,"$root?",function(){var e=this;return e["$=="](e.root)}),f(B,"$render",function(){var e=this;return e.$raise($("NotImplementedError"))}),f(B,"$html",function(){var e=this;return e.$node_to_s(e.$render())}),f(B,"$h",function(e,t,i){var n=this,o=u,c=u;return t==null&&(t=new Map),i==null&&(i=u),w(e["$is_a?"]($("Class")))?(w(M(e,$("Component")))||n.$raise("Element '"+e+"' must be a subclass of "+n.$class()),o=e.$new(n.root,s.to_hash(t)),o.$render()):(c=t["$is_a?"]($("Hash")),l(i)&&l(c)&&(i=t),w(c)||(t=new Map),snabbdom.h(e,$("Native").$convert(t),i))},-2),f(B,"$update",function(){var e=this;return e.$request_ids()["$<<"](window.requestAnimationFrame(function(t){e["$update!"]()}))}),f(B,"$update!",function(){var e,t=this,i=u;return t.$request_ids().$shift(),w(t.$request_ids()["$empty?"]())?(i=t.root.$render(),k(t.$root().$node(),i),e=[i],b(t.root,"node=",e),e[e.length-1]):u}),f(B,"$store",function(e,t,i){var n,o,c,_,z,T=this,I=u;return n=m(arguments),o=d(n),o=C(o),n.length>0&&(c=n.shift()),c==null&&(c=u),n.length>0&&(_=n.shift()),_==null&&(_=u),z=D(o,"skip"),z==null&&(z=!1),w(c["$nil?"]())?T.store:(w(T["$stores?"](c))||T.$raise("Cannot store key '"+c+"' since it is not a stored need of "+T.$class()+"."),T.store["$[]="](c,_),I="@"+c,T.$instance_variable_set(I,_),l(T["$root?"]())&&w(T.root["$stores?"](c))&&T.root.$instance_variable_set(I,_),w(z)?u:T.$update())},-1),f(B,"$class_needs",function(){var e=this;return e.$class().$class_needs()}),f(B,"$stores?",function(e){var t=this;return t.$class_needs().$dig(e,"store")}),f(B,"$request_ids",function(){var e=this,t=u;return w(e["$root?"]())?e.request_ids=w(t=e.request_ids)?t:[]:e.root.$request_ids()}),B.$private(),f(B,"$init_needs",function(e){var t=this;return b(t.$class_needs(),"each",[],function i(n,o){var c,_=i.$$s==null?this:i.$$s,z=u;return _.store==null&&(_.store=u),n==null&&(n=u),o==null&&(o=u),z="@"+n,w(_.store["$key?"](n))&&w(o["$[]"]("store"))?_.$instance_variable_set(z,_.store["$[]"](n)):w(e["$key?"](n))?(w(o["$[]"]("store"))&&l(_.store["$key?"](n))&&_.store["$[]="](n,e["$[]"](n)),_.$instance_variable_set(z,e["$[]"](n))):w((c=o,c===u||c==null?u:c["$key?"]("default")))?_.$instance_variable_set(z,o["$[]"]("default")):_.$raise("Needs '"+n+"' required but not provided.")},{$$s:t})}),f(B,"$parse_sel",function(e){let t="",i="";const n={};return e.split(".").forEach((c,_)=>{_==0?(c=c.split("#"),c.length>1&&(i=c[1]),c=c[0],_==0?t=c:n[c]=!0):t?n[c]=!0:t=c}),{tag:t,id:i,classes:n}}),f(B,"$node_to_s",function(e){var t=this;if(!e.sel)return t.$escape(e.text);const i=t.$parse_sel(e.sel);for(const T in e.data.class)e.data.class[T]?i.classes[T]=!0:delete i.classes[T];let n={};i.id.length>0&&(n.id=i.id);const o=Object.keys(i.classes);o.length>0&&(n.class=o.join(" "));for(const T in e.data.attrs)n[T]=e.data.attrs[T];for(const T in e.data.dataset)n["data-"+T]=e.data.dataset[T];for(const T in e.data.props)if(!A.has(T)){const I=e.data.props[T];p.has(T)?I&&(n[T]=T):n[T]=I}const c=[];for(let T in e.data.style){const I=e.data.style[T];T=T.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c.push(T+": "+I)}c.length>0&&(n.style=c.join("; ")),n=Object.keys(n).map(T=>t.$escape(T)+'="'+t.$escape(n[T])+'"');const _=i.tag,z=["<"+_];return n.length>0&&z.push(" "+n.join(" ")),z.push(">"),q.has(_)||(e.data.props&&e.data.props.innerHTML?z.push(e.data.props.innerHTML):e.text?z.push(t.$escape(e.text)):e.children&&e.children.forEach(T=>z.push(t.$node_to_s(T))),z.push("</"+_+">")),z.join("")}),f(B,"$escape",function(e){return E($("ERB"),"Util").$html_escape(e)})}(j[0],null,j),function(G,Y){var Z=x(G,Y,"Layout");return Z.$needs("application"),Z.$needs("attach_func"),Z.$needs("javascript_include_tags")}(j[0],E(H("Snabberb"),"Component"))}(g[0],g)};Opal.modules.snabberb=function(s){var P=s.module,x=s.top,C=[],N=s.nil;return s.add_stubs("require"),x.$require("erb"),x.$require("native"),x.$require("vendor/snabbdom"),x.$require("snabberb/component"),P(C[0],"Snabberb"),N};Opal.modules["components/counter"]=function(s){var P=s.klass,x=s.lambda,C=s.rb_minus,N=s.rb_plus,b=s.rb_times,y=s.def,w=s.truthy,S=s.rb_gt,f=s.rb_lt,M=[],l=s.$r(M),m=s.nil,d=s.$$$;return s.add_stubs("needs,h,to_s,store,-,+,status_display,*,abs,private,>,<"),function(D,g){var u=P(D,g,"Counter"),E=u.$$prototype;return E.count=m,u.$needs("count",new Map([["default",0],["store",!0]])),y(u,"$render",function(){var r=this;return r.$h("div",[r.$h("div",new Map([["class",new Map([["counter-display",!0]])]]),[r.$h("div",new Map([["class",new Map([["count-value",!0]])]]),r.count.$to_s())]),r.$h("div",new Map([["class",new Map([["counter-controls",!0]])]]),[r.$h("button",new Map([["class",new Map([["btn",!0],["btn-decrement",!0]])],["on",new Map([["click",x(function h(){var j=h.$$s==null?this:h.$$s;return j.count==null&&(j.count=m),j.$store("count",C(j.count,1))},{$$s:r})]])]]),"−"),r.$h("button",new Map([["class",new Map([["btn",!0],["btn-reset",!0]])],["on",new Map([["click",x(function h(){var j=h.$$s==null?this:h.$$s;return j.$store("count",0)},{$$s:r})]])]]),"Reset"),r.$h("button",new Map([["class",new Map([["btn",!0],["btn-increment",!0]])],["on",new Map([["click",x(function h(){var j=h.$$s==null?this:h.$$s;return j.count==null&&(j.count=m),j.$store("count",N(j.count,1))},{$$s:r})]])]]),"+")]),r.$h("div",new Map([["style",new Map([["textAlign","center"],["color","#666"]])]]),[r.$h("p","Current count: "+r.count),r.$h("p",new Map([["class",new Map([["status",!0]])]]),[r.$status_display()]),r.$h("p",new Map([["style",new Map([["marginTop","0.5rem"],["fontSize","0.85rem"],["color","#999"]])]]),"Double: "+b(r.count,2)+" | Absolute: "+r.count.$abs())])])}),u.$private(),y(u,"$status_display",function(){var r=this;return w(S(r.count,0))?r.$h("span",new Map([["class",new Map([["positive",!0]])]]),"↑ Positive"):w(f(r.count,0))?r.$h("span",new Map([["class",new Map([["negative",!0]])]]),"↓ Negative"):r.$h("span",new Map([["class",new Map([["zero",!0]])]]),"● Zero")})}(M[0],d(l("Snabberb"),"Component"))};Opal.modules["components/todo_app"]=function(s){var P=s.klass,x=s.lambda,C=s.truthy,N=s.send,b=s.eqeq,y=s.rb_gt,w=s.def,S=s.rb_plus,f=[],M=s.$r(f),l=s.nil,m=s.$$$;return s.add_stubs("needs,h,compact,store,add_todo,empty?,map,render_todo_item,any?,remaining_count,==,>,completed_count,clear_completed,private,[],toggle_todo,remove_todo,strip,+,reject,!,count"),function(d,D){var g=P(d,D,"TodoApp"),u=g.$$prototype;return u.new_todo=u.todos=u.next_id=l,g.$needs("todos",new Map([["default",[]],["store",!0]])),g.$needs("new_todo",new Map([["default",""],["store",!0]])),g.$needs("next_id",new Map([["default",1],["store",!0]])),w(g,"$render",function(){var a=this;return a.$h("div",[a.$h("div",new Map([["class",new Map([["todo-input",!0]])]]),[a.$h("input",new Map([["attrs",new Map([["type","text"],["placeholder","What needs to be done?"]])],["props",new Map([["value",a.new_todo]])],["on",new Map([["input",x(function r(h){var j=r.$$s==null?this:r.$$s;return h==null&&(h=l),j.$store("new_todo",h.target.value)},{$$s:a})],["keyup",x(function r(h){var j=r.$$s==null?this:r.$$s;return h==null&&(h=l),C(h.key==="Enter")?j.$add_todo():l},{$$s:a})]])]])),a.$h("button",new Map([["on",new Map([["click",x(function r(){var h=r.$$s==null?this:r.$$s;return h.$add_todo()},{$$s:a})]])]]),"Add")]),C(a.todos["$empty?"]())?a.$h("div",new Map([["class",new Map([["empty-state",!0]])]]),[a.$h("p","No todos yet. Add one above!")]):a.$h("ul",new Map([["class",new Map([["todo-list",!0]])]]),N(a.todos,"map",[],function r(h){var j=r.$$s==null?this:r.$$s;return h==null&&(h=l),j.$render_todo_item(h)},{$$s:a})),C(a.todos["$any?"]())?a.$h("div",new Map([["class",new Map([["todo-stats",!0]])]]),[a.$h("span",""+a.$remaining_count()+" item"+(b(a.$remaining_count(),1)?"":"s")+" left"),C(y(a.$completed_count(),0))?a.$h("button",new Map([["class",new Map([["clear-completed",!0]])],["on",new Map([["click",x(function r(){var h=r.$$s==null?this:r.$$s;return h.$clear_completed()},{$$s:a})]])]]),"Clear completed ("+a.$completed_count()+")"):l].$compact()):l].$compact())}),g.$private(),w(g,"$render_todo_item",function(a){var r=this;return r.$h("li",new Map([["key",a["$[]"]("id")],["class",new Map([["todo-item",!0],["completed",a["$[]"]("completed")]])]]),[r.$h("input",new Map([["attrs",new Map([["type","checkbox"]])],["props",new Map([["checked",a["$[]"]("completed")]])],["on",new Map([["change",x(function h(){var j=h.$$s==null?this:h.$$s;return j.$toggle_todo(a["$[]"]("id"))},{$$s:r})]])]])),r.$h("span",a["$[]"]("text")),r.$h("button",new Map([["class",new Map([["delete-btn",!0]])],["on",new Map([["click",x(function h(){var j=h.$$s==null?this:h.$$s;return j.$remove_todo(a["$[]"]("id"))},{$$s:r})]])]]),"Delete")])}),w(g,"$add_todo",function(){var a=this,r=l,h=l;return r=a.new_todo.$strip(),C(r["$empty?"]())?l:(h=S(a.todos,[new Map([["id",a.next_id],["text",r],["completed",!1]])]),a.$store("todos",h),a.$store("next_id",S(a.next_id,1)),a.$store("new_todo",""))}),w(g,"$remove_todo",function(a){var r=this,h=l;return h=N(r.todos,"reject",[],function(H){return H==null&&(H=l),H["$[]"]("id")["$=="](a)}),r.$store("todos",h)}),w(g,"$toggle_todo",function(a){var r=this,h=l;return h=N(r.todos,"map",[],function(H){return H==null&&(H=l),b(H["$[]"]("id"),a)?new Map([["id",H["$[]"]("id")],["text",H["$[]"]("text")],["completed",H["$[]"]("completed")["$!"]()]]):H}),r.$store("todos",h)}),w(g,"$clear_completed",function(){var a=this,r=l;return r=N(a.todos,"reject",[],function(j){return j==null&&(j=l),j["$[]"]("completed")}),a.$store("todos",r)}),w(g,"$remaining_count",function(){var a=this;return N(a.todos,"count",[],function(h){return h==null&&(h=l),h["$[]"]("completed")["$!"]()})}),w(g,"$completed_count",function(){var a=this;return N(a.todos,"count",[],function(h){return h==null&&(h=l),h["$[]"]("completed")})})}(f[0],m(M("Snabberb"),"Component"))};Opal.queue(function(s){var P=s.top,x=[],C=s.$r(x);s.nil,s.add_stubs("require,puts,attach"),P.$require("native"),P.$require("snabberb"),P.$require("components/counter"),P.$require("components/todo_app"),document.addEventListener("DOMContentLoaded",function(){P.$puts("DOM ready, mounting Snabberb components..."),C("Counter").$attach("counter-app"),P.$puts("Counter mounted!"),C("TodoApp").$attach("todo-app"),P.$puts("TodoApp mounted!"),P.$puts("All Snabberb components initialized!")})});console.log("Snabberb + Opal + Vite Example");console.log("Ruby version:",Opal.RUBY_VERSION);console.log("Application loaded!")});export default ie();
