(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))g(v);new MutationObserver(v=>{for(const X of v)if(X.type==="childList")for(const Y of X.addedNodes)Y.tagName==="LINK"&&Y.rel==="modulepreload"&&g(Y)}).observe(document,{childList:!0,subtree:!0});function l(v){const X={};return v.integrity&&(X.integrity=v.integrity),v.referrerPolicy&&(X.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?X.credentials="include":v.crossOrigin==="anonymous"?X.credentials="omit":X.credentials="same-origin",X}function g(v){if(v.ep)return;v.ep=!0;const X=l(v);fetch(v.href,X)}})();const sr="modulepreload",$r=function(e){return"/opal-vite/playground/stimulus-app/"+e},Le={},ar=function(t,l,g){let v=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const Y=document.querySelector("meta[property=csp-nonce]"),z=(Y==null?void 0:Y.nonce)||(Y==null?void 0:Y.getAttribute("nonce"));v=Promise.allSettled(l.map(H=>{if(H=$r(H),H in Le)return;Le[H]=!0;const p=H.endsWith(".css"),U=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${H}"]${U}`))return;const $e=document.createElement("link");if($e.rel=p?"stylesheet":sr,p||($e.as="script"),$e.crossOrigin="",$e.href=H,z&&$e.setAttribute("nonce",z),document.head.appendChild($e),p)return new Promise((Z,Q)=>{$e.addEventListener("load",Z),$e.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${H}`)))})}))}function X(Y){const z=new Event("vite:preloadError",{cancelable:!0});if(z.payload=Y,window.dispatchEvent(z),!z.defaultPrevented)throw Y}return v.then(Y=>{for(const z of Y||[])z.status==="rejected"&&X(z.reason);return t().catch(X)})};(function(e){var t;if(typeof globalThis<"u"?e=globalThis:typeof global<"u"?e=global:typeof window<"u"&&(e=window),e.console==null&&(e.console={}),typeof e.console=="object"?t=e.console:t={},"log"in t||(t.log=function(){}),"warn"in t||(t.warn=t.log),typeof e.Opal<"u")return t.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),e.Opal;var l,g,v,X,Y,z,H,p=e.Opal={};p.global=e,p.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var U=Function.prototype.call,$e=Function.prototype.bind,Z=Object.hasOwn||U.bind(Object.prototype.hasOwnProperty),Q=Object.setPrototypeOf,ne=U.bind(Array.prototype.slice),O=U.bind(Array.prototype.splice),k=4,C=k;function P(){return C+=2,C}p.uid=P,p.id=function(f){return f.$$is_number?f*2+1:(f.$$id==null&&E(f,"$$id",P()),f.$$id)};var W=p.gvars={};p.exit=function(f){W.DEBUG&&t.log("Exited with status "+f)},p.exceptions=[],p.pop_exception=function(f){var b=p.exceptions.pop();b===f||(b?W["!"]=b:W["!"]=l)};function M(f,b){if(f||(f=p.Exception||Error),H&&H.$raise)arguments.length>2?H.$raise(f.$new.apply(f,ne(arguments,1))):H.$raise(f,b);else throw f.$new?f.$new(b):new f(b)}var L={value:void 0,enumerable:!1,configurable:!0,writable:!0};function E(f,b,R){typeof f=="string"?f[b]=R:(L.value=R,Object.defineProperty(f,b,L))}p.prop=E,p.defineProperty=p.prop,p.slice=ne;var q=p.truthy=function(f){return f!==!1&&l!==f&&f!==void 0&&f!==null&&(!(f instanceof Boolean)||f.valueOf()===!0)};p.falsy=function(f){return!q(f)},p.type_error=function(f,b,R,ee){f=f.$$class,ee&&R?(ee=ee.$$class,M(p.TypeError,"can't convert "+f+" into "+b+" ("+f+"#"+R+" gives "+ee+")")):M(p.TypeError,"no implicit conversion of "+f+" into "+b)},p.coerce_to=function(f,b,R,ee){var ae;return R==="to_int"&&b===p.Integer&&f.$$is_number?f<0?Math.ceil(f):Math.floor(f):R==="to_str"&&b===p.String&&f.$$is_string||p.is_a(f,b)?f:f["$respond_to?"].$$pristine&&f.$method_missing.$$pristine?(ae=f[he(R)],(ae==null||ae.$$stub)&&p.type_error(f,b),ae.apply(f,ee)):(f["$respond_to?"](R)||p.type_error(f,b),ee==null&&(ee=[]),p.send(f,R,ee))},p.respond_to=function(f,b,R){if(f==null||!f.$$class)return!1;R=!!R;var ee=f[b];if(f["$respond_to?"].$$pristine){if(typeof ee=="function"&&!ee.$$stub)return!0;if(!f["$respond_to_missing?"].$$pristine)return p.send(f,f["$respond_to_missing?"],[b.substr(1),R])}else return p.send(f,f["$respond_to?"],[b.substr(1),R])},p.trace_class=!1,p.tracers_for_class=[];function B(f){var b,R,ee;for(b=0,R=p.tracers_for_class.length;b<R;b++)ee=p.tracers_for_class[b],ee.trace_object=f,ee.block.$call(ee)}function F(f,b){if(f.$$autoload[b].loaded){if(f.$$autoload[b].loaded&&!f.$$autoload[b].required&&f.$$autoload[b].exception)throw f.$$autoload[b].exception}else{f.$$autoload[b].loaded=!0;try{p.Kernel.$require(f.$$autoload[b].path)}catch(R){throw f.$$autoload[b].exception=R,R}if(f.$$autoload[b].required=!0,f.$$const[b]!=null)return f.$$autoload[b].success=!0,f.$$const[b]}}function A(f,b){if(f){if(f.$$const[b]!=null)return f.$$const[b];if(f.$$autoload&&f.$$autoload[b])return F(f,b)}}function a(f,b){var R,ee,ae;if(f.length!==0)for(R=0,ee=f.length;R<ee;R++){if(ae=f[R].$$const[b],ae!=null)return ae;if(f[R].$$autoload&&f[R].$$autoload[b])return F(f[R],b)}}function m(f,b){var R,ee,ae;if(f!=null)for(ae=j(f),R=0,ee=ae.length;R<ee;R++){if(ae[R].$$const&&Z(ae[R].$$const,b))return ae[R].$$const[b];if(ae[R].$$autoload&&ae[R].$$autoload[b])return F(ae[R],b)}}function T(f,b){if(f==null||f.$$is_module)return m(v,b)}function y(f,b){return(f||v).$const_missing(b)}p.const_get_local=function(f,b,R){var ee;if(f!=null)return f==="::"&&(f=v),!f.$$is_module&&!f.$$is_class&&M(p.TypeError,f.toString()+" is not a class/module"),ee=A(f,b),ee!=null||R?ee:y(f,b)},p.const_get_qualified=function(f,b,R){var ee,ae,ce,de=p.const_cache_version;if(b==null)return ee=A(v,f),ee??p.const_get_qualified(v,f,R);if(f!=null)return f==="::"&&(f=v),!f.$$is_module&&!f.$$is_class&&M(p.TypeError,f.toString()+" is not a class/module"),(ae=f.$$const_cache)==null&&(E(f,"$$const_cache",Object.create(null)),ae=f.$$const_cache),ce=ae[b],ce==null||ce[0]!==de?((ee=A(f,b))!=null||(ee=m(f,b))!=null,ae[b]=[de,ee]):ee=ce[1],ee!=null||R?ee:y(f,b)},p.const_cache_version=1,p.const_get_relative=function(f,b,R){var ee=f[0],ae,ce=p.const_cache_version,de,pe;return(de=f.$$const_cache)==null&&(E(f,"$$const_cache",Object.create(null)),de=f.$$const_cache),pe=de[b],pe==null||pe[0]!==ce?((ae=A(ee,b))!=null||(ae=a(f,b))!=null||(ae=m(ee,b))!=null||(ae=T(ee,b))!=null,de[b]=[ce,ae]):ae=pe[1],ae!=null||R?ae:y(ee,b)};function d(f,b,R){var ee=!0;return(f==null||f==="::")&&(f=v),R.$$is_a_module&&((R.$$name==null||R.$$name===l)&&(R.$$name=b),R.$$base_module==null&&(R.$$base_module=f)),f.$$const=f.$$const||Object.create(null),(b in f.$$const||"$$autoload"in f&&b in f.$$autoload)&&(ee=!1),f.$$const[b]=R,f.$$=f.$$const,p.const_cache_version++,f===v&&(p[b]=R),E(f,b,R),ee&&f.$const_added&&!f.$const_added.$$pristine&&f.$const_added(b),R}p.const_set=d,p.constants=function(f,b){b==null&&(b=!0);var R,ee=[f],ae,ce,de={},pe;for(b&&(ee=ee.concat(j(f))),b&&f.$$is_module&&(ee=ee.concat([p.Object]).concat(j(p.Object))),ae=0,ce=ee.length;ae<ce&&(R=ee[ae],!(f!==v&&R==v));ae++){for(pe in R.$$const)de[pe]=!0;if(R.$$autoload)for(pe in R.$$autoload)de[pe]=!0}return Object.keys(de)},p.const_remove=function(f,b){if(p.const_cache_version++,f.$$const[b]!=null){var R=f.$$const[b];return delete f.$$const[b],R}if(f.$$autoload&&f.$$autoload[b])return delete f.$$autoload[b],l;M(p.NameError,"constant "+f+"::"+f.$name()+" not defined")},p.const_get_relative_factory=function(f){return function(b,R){return p.$$(f,b,R)}},p.$$=p.const_get_relative,p.$$$=p.const_get_qualified,p.$r=p.const_get_relative_factory;function c(f){return f==null?!1:f.$$bridge?f:f.$$super?c(f.$$super):!1}function J(f,b,R){var ee,ae;if((ae=c(b))?ee=function(){var ye=new($e.apply(ae.$$constructor,ge(null,arguments)));return Q(ye,ee.$$prototype),ye}:ee=function(){},f&&f!==l&&E(ee,"displayName","::"+f),E(ee,"$$name",f),E(ee,"$$constructor",ee),E(ee,"$$prototype",ee.prototype),E(ee,"$$const",{}),E(ee,"$$is_class",!0),E(ee,"$$is_a_module",!0),E(ee,"$$super",b),E(ee,"$$cvars",{}),E(ee,"$$own_included_modules",[]),E(ee,"$$own_prepended_modules",[]),E(ee,"$$ancestors",[]),E(ee,"$$ancestors_cache_version",null),E(ee,"$$subclasses",[]),E(ee,"$$cloned_from",[]),E(ee.$$prototype,"$$class",ee),p.Class&&Q(ee,p.Class.prototype),b!=null){if(Q(ee.$$prototype,b.$$prototype),R!==!0)if(typeof WeakRef<"u"){var ce,de,pe=[];for(ce=0;ce<b.$$subclasses.length;ce++)de=b.$$subclasses[ce],de.deref()!==void 0&&pe.push(de);pe.push(new WeakRef(ee)),b.$$subclasses=pe}else b.$$subclasses.push(ee);b.$$meta&&p.build_class_singleton_class(ee)}return ee}p.allocate_class=J;function V(f,b){var R=A(f,b);if(R)return R.$$is_class||M(p.TypeError,b+" is not a class"),R}function h(f,b){f.$$super!==b&&M(p.TypeError,"superclass mismatch for class "+f.$$name)}p.klass=function(f,b,R){var ee;f==null||f=="::"?f=v:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),b!=null&&(!b.hasOwnProperty||b.hasOwnProperty&&!b.hasOwnProperty("$$is_class"))&&(b.constructor&&b.constructor.name=="Function"?(ee=b,b=v):M(p.TypeError,"superclass must be a Class ("+(b.constructor&&(b.constructor.name||b.constructor.$$name)||typeof b)+" given)"));var ae=V(f,R);return ae!=null?b&&h(ae,b):(b==null&&(b=v),ae=J(R,b),d(f,R,ae),b.$inherited&&b.$inherited(ae),ee&&p.bridge(ee,ae)),p.trace_class&&B(ae),ae};function _(f){var b=function(){},R=b;return f&&E(b,"displayName",f+".constructor"),E(R,"$$name",f),E(R,"$$prototype",b.prototype),E(R,"$$const",{}),E(R,"$$is_module",!0),E(R,"$$is_a_module",!0),E(R,"$$cvars",{}),E(R,"$$iclasses",[]),E(R,"$$own_included_modules",[]),E(R,"$$own_prepended_modules",[]),E(R,"$$ancestors",[R]),E(R,"$$ancestors_cache_version",null),E(R,"$$cloned_from",[]),Q(R,p.Module.prototype),R}p.allocate_module=_;function o(f,b){var R=A(f,b);return R==null&&f===v&&(R=m(v,b)),R&&!R.$$is_module&&R!==v&&M(p.TypeError,b+" is not a module"),R}p.module=function(f,b){var R;return f==null||f=="::"?f=v:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),R=o(f,b),R==null&&(R=_(b),d(f,b,R)),p.trace_class&&B(R),R},p.get_singleton_class=function(f){return f.$$is_number&&M(p.TypeError,"can't define singleton"),f.$$meta?f.$$meta:f.hasOwnProperty("$$is_class")?p.build_class_singleton_class(f):f.hasOwnProperty("$$is_module")?p.build_module_singleton_class(f):p.build_object_singleton_class(f)};function i(f,b){f.hasOwnProperty("$$meta")?f.$$meta=b:E(f,"$$meta",b),f.$$frozen?f.$$meta.$freeze():Q(f,b.$$prototype)}p.build_class_singleton_class=function(f){if(f.$$meta)return f.$$meta;var b=f===g?Y:p.get_singleton_class(f.$$super),R=J(null,b,!0);return E(R,"$$is_singleton",!0),E(R,"$$singleton_of",f),i(f,R),E(f,"$$class",p.Class),R},p.build_module_singleton_class=function(f){if(f.$$meta)return f.$$meta;var b=J(null,p.Module,!0);return E(b,"$$is_singleton",!0),E(b,"$$singleton_of",f),i(f,b),E(f,"$$class",p.Module),b},p.build_object_singleton_class=function(f){var b=f.$$class,R=J(l,b,!0);return E(R,"$$is_singleton",!0),E(R,"$$singleton_of",f),delete R.$$prototype.$$class,i(f,R),R},p.is_method=function(f){return f[0]==="$"&&f[1]!=="$"},p.instance_methods=function(f){for(var b=Object.create(null),R=[],ee=j(f),ae=0,ce=ee.length;ae<ce;ae++){var de=ee[ae],pe=de.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,qe=ye.length;we<qe;we++){var Ee=ye[we];if(!b[Ee]){if(p.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var Ae=Ee.slice(1);R.push(Ae)}}b[Ee]=!0}}}return R},p.own_instance_methods=function(f){var b=[],R=f.$$prototype;R.hasOwnProperty("$$dummy")&&(R=R.$$define_methods_on);for(var ee=Object.getOwnPropertyNames(R),ae=0,ce=ee.length;ae<ce;ae++){var de=ee[ae];if(p.is_method(de)){var pe=R[de];if(!pe.$$stub){var ye=de.slice(1);b.push(ye)}}}return b},p.methods=function(f){return p.instance_methods(f.$$meta||f.$$class)},p.own_methods=function(f){return f.$$meta?p.own_instance_methods(f.$$meta):[]},p.receiver_methods=function(f){var b=p.get_singleton_class(f),R=p.own_instance_methods(b),ee=p.own_instance_methods(b.$$super);return R.concat(ee)},p.class_variables=function(f){var b=j(f),R,ee=b.length,ae={};for(R=ee-1;R>=0;R--){var ce=b[R];for(var de in ce.$$cvars)ae[de]=ce.$$cvars[de]}return ae},p.class_variable_set=function(f,b,R){var ee=j(f),ae,ce=ee.length;for(ae=ce-2;ae>=0;ae--){var de=ee[ae];if(Z(de.$$cvars,b))return de.$$cvars[b]=R,R}return f.$$cvars[b]=R,R},p.class_variable_get=function(f,b,R){if(Z(f.$$cvars,b))return f.$$cvars[b];var ee=j(f),ae,ce=ee.length;for(ae=0;ae<ce;ae++){var de=ee[ae];if(Z(de.$$cvars,b))return de.$$cvars[b]}return R||M(p.NameError,"uninitialized class variable "+b+" in "+f.$name()),l};function n(f){return f.hasOwnProperty("$$iclass")&&f.hasOwnProperty("$$root")}function r(f){for(var b=[],R,ee=Object.getPrototypeOf(f.$$prototype);ee&&!ee.hasOwnProperty("$$class");)R=D(ee),R&&b.push(R),ee=Object.getPrototypeOf(ee);return b}function $(f){var b=[],R,ee=Object.getPrototypeOf(f.$$prototype);if(f.$$prototype.hasOwnProperty("$$dummy"))for(;ee&&ee!==f.$$prototype.$$define_methods_on;)R=D(ee),R&&b.push(R),ee=Object.getPrototypeOf(ee);return b}p.append_features=function(f,b){var R=j(f),ee=[];R.indexOf(b)!==-1&&M(p.ArgumentError,"cyclic include detected");for(var ae=0,ce=R.length;ae<ce;ae++){var de=R[ae],pe=u(de);E(pe,"$$included",!0),ee.push(pe)}var ye=j(b),we=I(ee),qe,Ee;if(ye.indexOf(f)===-1)qe=b.$$prototype,Ee=Object.getPrototypeOf(b.$$prototype);else{for(var xe=b.$$prototype,Ae=Object.getPrototypeOf(xe);Ae!=null&&!(Ae.$$module===f&&n(Ae));)xe=Ae,Ae=Object.getPrototypeOf(Ae);if(Ae){for(var ke=Object.getPrototypeOf(Ae);ke.hasOwnProperty("$$iclass")&&!n(ke);)ke=Object.getPrototypeOf(ke);qe=xe,Ee=ke}else qe=b.$$prototype,Ee=Object.getPrototypeOf(b.$$prototype)}Q(qe,we.first),Q(we.last,Ee),b.$$own_included_modules=r(b),p.const_cache_version++},p.prepend_features=function(f,b){var R=j(f),ee=[];R.indexOf(b)!==-1&&M(p.ArgumentError,"cyclic prepend detected");for(var ae=0,ce=R.length;ae<ce;ae++){var de=R[ae],pe=u(de);E(pe,"$$prepended",!0),ee.push(pe)}var ye=I(ee),we=b.$$prototype,qe=Object.getPrototypeOf(we),Ee,xe,Ae;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=w(b),s(b),E(we,"$$dummy",!0),E(we,"$$define_methods_on",Ee),Q(we,Ee),Q(Ee,qe));var ke=j(b);if(ke.indexOf(f)===-1)for(xe=we,Ae=Object.getPrototypeOf(we);Ae!=null&&!(Ae.hasOwnProperty("$$root")||Ae===Ee||!Ae.hasOwnProperty("$$iclass"));)Ae=Object.getPrototypeOf(Ae);else M(p.RuntimeError,"Prepending a module multiple times is not supported");Q(xe,ye.first),Q(ye.last,Ae),b.$$own_prepended_modules=$(b),p.const_cache_version++};function s(f){for(var b=f.$$prototype,R=Object.getOwnPropertyNames(b),ee=0;ee<R.length;ee++){var ae=R[ee];p.is_method(ae)&&delete b[ae]}}function u(f){var b=w(f);return f.$$is_module&&f.$$iclasses.push(b),b}function w(f){var b={},R=f.$$prototype;R.hasOwnProperty("$$dummy")&&(R=R.$$define_methods_on);var ee=Object.getOwnPropertyNames(R),ae=ee.length,ce;for(ce=0;ce<ae;ce++){var de=ee[ce];E(b,de,R[de])}return E(b,"$$iclass",!0),E(b,"$$module",f),b}function I(f){var b=f.length,R=f[0];if(E(R,"$$root",!0),b===1)return{first:R,last:R};for(var ee=R,ae=1;ae<b;ae++){var ce=f[ae];Q(ee,ce),ee=ce}return{first:f[0],last:f[b-1]}}p.bridge=function(f,b){f.hasOwnProperty("$$bridge")&&M(p.ArgumentError,"already bridged"),E(f,"$$bridge",b),Q(f.prototype,(b.$$super||p.Object).$$prototype),E(b,"$$prototype",f.prototype),E(b.$$prototype,"$$class",b),E(b,"$$constructor",f),E(b,"$$bridge",!0)};function D(f){if(!f.hasOwnProperty("$$dummy")){if(f.hasOwnProperty("$$iclass"))return f.$$module;if(f.hasOwnProperty("$$class"))return f.$$class}}function S(f){return f.$$own_prepended_modules.concat([f]).concat(f.$$own_included_modules)}function j(f){if(!f)return[];if(f.$$ancestors_cache_version===p.const_cache_version)return f.$$ancestors;var b=[],R,ee,ae;for(R=0,ee=S(f),ae=ee.length;R<ae;R++)b.push(ee[R]);if(f.$$super)for(R=0,ee=j(f.$$super),ae=ee.length;R<ae;R++)b.push(ee[R]);return f.$$ancestors_cache_version=p.const_cache_version,f.$$ancestors=b,b}p.ancestors=j,p.included_modules=function(f){for(var b=[],R=null,ee=Object.getPrototypeOf(f.$$prototype);ee&&Object.getPrototypeOf(ee);ee=Object.getPrototypeOf(ee))R=D(ee),R&&R.$$is_module&&ee.$$iclass&&ee.$$included&&b.push(R);return b},p.add_stubs=function(f){var b=p.BasicObject.$$prototype,R,ee;f=f.split(",");for(var ae=0,ce=f.length;ae<ce;ae++)R=he(f[ae]),ee=b[R],(ee==null||ee.$$stub)&&p.add_stub_for(b,R)},p.add_stub_for=function(f,b){E(f,b,p.stub_for(b))},p.stub_for=function(f){function b(){return this.$method_missing.$$p=b.$$p,b.$$p=null,this.$method_missing.apply(this,ge(f.slice(1),arguments))}return b.$$stub=!0,b},p.ac=function(f,b,R,ee){var ae="";R.$$is_a_module?ae+=R.$$name+".":ae+=R.$$class.$$name+"#",ae+=ee,M(p.ArgumentError,"["+ae+"] wrong number of arguments (given "+f+", expected "+b+")")},p.block_ac=function(f,b,R){var ee="`block in "+R+"'";M(p.ArgumentError,ee+": wrong number of arguments (given "+f+", expected "+b+")")};function re(f){return f.hasOwnProperty("$$meta")&&f.$$meta!==null?j(f.$$meta):j(f.$$class)}p.find_super=function(f,b,R,ee,ae){var ce=he(b),de,pe,ye,we,qe=-1,Ee;for(de=re(f),we=R.$$owner,Ee=0;Ee<de.length;Ee++)if(pe=de[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){qe=Ee;break}for(Ee=qe+1;Ee<de.length;Ee++){pe=de[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(ce)){ye=xe[ce];break}}return!ee&&ye&&ye.$$stub&&f.$method_missing.$$pristine&&M(p.NoMethodError,"super: no superclass method `"+b+"' for "+f,b),ye.$$stub&&!ae?null:ye},p.find_block_super=function(f,b,R,ee,ae){var ce=b;return R||M(p.RuntimeError,"super called outside of method"),ae&&R.$$define_meth&&M(p.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),R.$$def&&(ce=R.$$jsid),p.find_super(f,ce,R,ee)},p.find_super_dispatcher=p.find_super,p.find_iter_super_dispatcher=p.find_block_super;function oe(f,b,R){try{f(b)}catch(ee){if(ee===R)return R.$v;throw ee}}p.yield1=function(f,b){typeof f!="function"&&M(p.LocalJumpError,"no block given");var R=f.$$has_top_level_mlhs_arg,ee=f.$$has_trailing_comma_in_args,ae=f.$$is_lambda&&f.$$ret;return(f.length>1||(R||ee)&&f.length===1)&&(b=p.to_ary(b)),(f.length>1||ee&&f.length===1)&&b.$$is_array?ae?oe(f.apply.bind(f,null),b,f.$$ret):f.apply(null,b):ae?oe(f,b,f.$$ret):f(b)},p.yieldX=function(f,b){return typeof f!="function"&&M(p.LocalJumpError,"no block given"),f.length>1&&b.length===1&&b[0].$$is_array&&(b=b[0]),f.$$is_lambda&&f.$$ret?oe(f.apply.bind(f,null),b,f.$$ret):f.apply(null,b)},p.rescue=function(f,b){for(var R=0;R<b.length;R++){var ee=b[R];if(ee.$$is_array){var ae=p.rescue(f,ee);if(ae)return ae}else if(ee===p.JS.Error||ee["$==="](f))return ee}return null},p.is_a=function(f,b){if(b!=null&&f.$$meta===b||f.$$class===b)return!0;if(f.$$is_number&&b.$$is_number_class)return b.$$is_integer_class?f%1===0:!0;var R=j(f.$$is_class?p.get_singleton_class(f):f.$$meta||f.$$class);return R.indexOf(b)!==-1},p.to_hash=function(f){if(f.$$is_hash)return f;if(f["$respond_to?"]("to_hash",!0)){var b=f.$to_hash();if(b.$$is_hash)return b;M(p.TypeError,"Can't convert "+f.$$class+" to Hash ("+f.$$class+"#to_hash gives "+b.$$class+")")}else M(p.TypeError,"no implicit conversion of "+f.$$class+" into Hash")},p.to_ary=function(f){if(f.$$is_array)return f;if(f["$respond_to?"]("to_ary",!0)){var b=f.$to_ary();if(b===l)return[f];if(b.$$is_array)return b;M(p.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_ary gives "+b.$$class+")")}else return[f]},p.to_a=function(f){if(f.$$is_array)return f.slice();if(f["$respond_to?"]("to_a",!0)){var b=f.$to_a();if(b===l)return[f];if(b.$$is_array)return b;M(p.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_a gives "+b.$$class+")")}else return[f]},p.extract_kwargs=function(f){var b=f[f.length-1];if(b!=null&&p.respond_to(b,"$to_hash",!0))return O(f,f.length-1),b},p.kwrestargs=function(f,b){var R=new Map;return p.hash_each(f,!1,function(ee,ae){return b[ee]||p.hash_put(R,ee,ae),[!1,!1]}),R};function le(f,b){typeof b=="number"?f.$$arity=b:typeof b=="object"&&Object.assign(f,b)}var _e=new Map;function he(f){var b=_e.get(f);return b||(b="$"+f,_e.set(f,b)),b}p.jsid=he;function ge(f,b){return b.$$is_array||(b=ne(b)),[f].concat(b)}p.send=function(f,b,R,ee,ae){var ce;return typeof b=="function"?(ce=b,b=null):typeof b=="string"?ce=f[he(b)]:M(p.NameError,"Passed method should be a string or a function"),p.send2(f,ce,b,R,ee,ae)},p.send2=function(f,b,R,ee,ae,ce){return b==null&&R!=null&&f.$method_missing&&(b=f.$method_missing,ee=ge(R,ee)),le(ae,ce),typeof ae=="function"&&(b.$$p=ae),b.apply(f,ee)},p.refined_send=function(f,b,R,ee,ae,ce){var de,pe,ye,we,qe,Ee,xe,Ae,ke,Ke;for(we=re(b),de=0;de<we.length;de++)for(qe=p.id(we[de]),pe=0;pe<f.length;pe++)for(Ee=f[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(Ae=xe.$$refine_modules,!(typeof Ae[qe]>"u")&&(ke=Ae[qe],typeof ke.$$prototype[he(R)]<"u")))return Ke=ke.$$prototype[he(R)],p.send2(b,Ke,R,ee,ae,ce);return p.send(b,R,ee,ae,ce)},p.lambda=function(f,b){return f.$$is_lambda=!0,le(f,b),f},p.def=function(f,b,R,ee){return le(R,ee),f===p.top?p.defn(p.Object,b,R):!f.$$eval&&f.$$is_a_module?p.defn(f,b,R):p.defs(f,b,R)},p.defn=function(f,b,R){x(f),R.displayName=b,R.$$owner=f;var ee=b.substr(1),ae=f.$$prototype;if(ae.hasOwnProperty("$$dummy")&&(ae=ae.$$define_methods_on),E(ae,b,R),f.$$is_module){f.$$module_function&&p.defs(f,b,R);for(var ce=0,de=f.$$iclasses,pe=de.length;ce<pe;ce++){var ye=de[ce];E(ye,b,R)}}var we=f.$$singleton_of;return f.$method_added&&!f.$method_added.$$stub&&!we?f.$method_added(ee):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(ee),ee},p.defs=function(f,b,R,ee){return le(R,ee),(f.$$is_string||f.$$is_number)&&M(p.TypeError,"can't define singleton"),p.defn(p.get_singleton_class(f),b,R)};function me(f,b){if(f.$$is_module)for(var R=0,ee=f.$$iclasses,ae=ee.length;R<ae;R++){var ce=ee[R];delete ce[b]}}p.rdef=function(f,b){Z(f.$$prototype,b)||M(p.NameError,"method '"+b.substr(1)+"' not defined in "+f.$name()),delete f.$$prototype[b],me(f,b),f.$$is_singleton?f.$$prototype.$singleton_method_removed&&!f.$$prototype.$singleton_method_removed.$$stub&&f.$$prototype.$singleton_method_removed(b.substr(1)):f.$method_removed&&!f.$method_removed.$$stub&&f.$method_removed(b.substr(1))},p.udef=function(f,b){(!f.$$prototype[b]||f.$$prototype[b].$$stub)&&M(p.NameError,"method '"+b.substr(1)+"' not defined in "+f.$name()),p.add_stub_for(f.$$prototype,b),me(f,b),f.$$is_singleton?f.$$prototype.$singleton_method_undefined&&!f.$$prototype.$singleton_method_undefined.$$stub&&f.$$prototype.$singleton_method_undefined(b.substr(1)):f.$method_undefined&&!f.$method_undefined.$$stub&&f.$method_undefined(b.substr(1))};function ve(f){return typeof f=="function"&&!f.$$stub}p.alias=function(f,b,R){var ee=he(b),ae=he(R),ce,de;if(typeof f.$$prototype>"u"&&(f=p.Object),ce=f.$$prototype[ae],f.$$eval)return p.alias(p.get_singleton_class(f),b,R);if(!ve(ce)){for(var pe=f.$$super;typeof ce!="function"&&pe;)ce=pe[ae],pe=pe.$$super;!ve(ce)&&f.$$is_module&&(ce=p.Object.$$prototype[ae]),ve(ce)||M(p.NameError,"undefined method `"+R+"' for class `"+f.$name()+"'")}return ce.$$alias_of&&(ce=ce.$$alias_of),de=p.wrap_method_body(ce),de.displayName=b,de.$$alias_of=ce,de.$$alias_name=b,p.defn(f,ee,de),f},p.wrap_method_body=function(f){var b=function(){var R=b.$$p;return b.$$p=null,p.send(this,f,arguments,R)};try{Object.defineProperty(b,"length",{value:f.length})}catch{}return b.$$arity=f.$$arity==null?f.length:f.$$arity,b.$$parameters=f.$$parameters,b.$$source_location=f.$$source_location,b},p.alias_gvar=function(f,b){return Object.defineProperty(W,f,{configurable:!0,enumerable:!0,get:function(){return W[b]},set:function(R){W[b]=R}}),l},p.alias_native=function(f,b,R){var ee=he(b),ae=f.$$prototype[R];return(typeof ae!="function"||ae.$$stub)&&M(p.NameError,"undefined native method `"+R+"' for class `"+f.$name()+"'"),p.defn(f,ee,ae),f},p.hash_init=function(f){t.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},p.hash_clone=function(f,b){return b.$$none=f.$$none,b.$$proc=f.$$proc,p.hash_each(f,b,function(R,ee){return p.hash_put(b,R,ee),[!1,b]})},p.hash_put=function(f,b,R){var ee=typeof b;if(ee==="string"||ee==="symbol"||ee==="number"||ee==="boolean"||ee==="bigint")f.set(b,R);else if(b.$$is_string)f.set(b.valueOf(),R);else{f.$$keys||(f.$$keys=new Map);var ae=b.$$is_string?b.valueOf():f.$$by_identity?p.id(b):b.$hash(),ce=f.$$keys;if(!ce.has(ae)){ce.set(ae,[b]),f.set(b,R);return}for(var de=ce.get(ae),pe,ye=0;ye<de.length;ye++)if(pe=de[ye],b===pe||b["$eql?"](pe)){f.set(pe,R);return}de.push(b),f.set(b,R)}},p.hash_get=function(f,b){var R=typeof b;if(R==="string"||R==="symbol"||R==="number"||R==="boolean"||R==="bigint")return f.get(b);if(f.$$keys){var ee=b.$$is_string?b.valueOf():f.$$by_identity?p.id(b):b.$hash(),ae=f.$$keys.get(ee),ce;if(ae!==void 0){for(var de=0;de<ae.length;de++)if(ce=ae[de],b===ce||b["$eql?"](ce))return f.get(ce)}else if(b.$$is_string)return f.get(ee)}else if(b.$$is_string)return f.get(b.valueOf())};function be(f,b){var R=f.get(b);if(R!==void 0)return f.delete(b),R}p.hash_delete=function(f,b){var R=typeof b;if(R==="string"||R==="symbol"||R==="number"||R==="boolean"||R==="bigint")return be(f,b);if(f.$$keys){var ee=b.$$is_string?b.valueOf():f.$$by_identity?p.id(b):b.$hash(),ae=f.$$keys.get(ee),ce;if(ae!==void 0){for(var de=0;de<ae.length;de++)if(ce=ae[de],b===ce||b["$eql?"](ce))return ae.splice(de,1),ae.length===0&&f.$$keys.delete(ee),be(f,ce)}else if(b.$$is_string)return be(f,ee)}else if(b.$$is_string)return be(f,b.valueOf())},p.hash_rehash=function(f){var b=f.$$keys;return b&&b.clear(),p.hash_each(f,!1,function(R,ee){var ae=typeof R;if(ae==="string"||ae==="symbol"||ae==="number"||ae==="boolean"||ae==="bigint")return[!1,!1];var ce=R.$$is_string?R.valueOf():f.$$by_identity?p.id(R):R.$hash();if(b||(f.$$keys=b=new Map),!b.has(ce))return b.set(ce,[R]),[!1,!1];for(var de=b.get(ce),pe=de.length===1?de:ne(de),ye,we=0;we<pe.length;we++)ye=pe[we],(R===ye||R["$eql?"](ye))&&(de.splice(de.indexOf(ye),1),f.delete(ye));return de.push(R),[!1,!1]}),f},p.hash=function(){var f=arguments.length,b,R,ee,ae,ce,de;if(f===1&&arguments[0].$$is_hash)return arguments[0];if(R=new Map,f===1)if(b=arguments[0],arguments[0].$$is_array){for(ae=b.length,ee=0;ee<ae;ee++)b[ee].length!==2&&M(p.ArgumentError,"value not of length 2: "+b[ee].$inspect()),ce=b[ee][0],de=b[ee][1],p.hash_put(R,ce,de);return R}else{b=arguments[0];for(ce in b)Z(b,ce)&&(de=b[ce],p.hash_put(R,ce,de));return R}for(f%2!==0&&M(p.ArgumentError,"odd number of arguments for Hash"),ee=0;ee<f;ee+=2)ce=arguments[ee],de=arguments[ee+1],p.hash_put(R,ce,de);return R},p.hash2=function(f,b){t.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var R=new Map,ee=0,ae=f.length;ee<ae;ee++)R.set(f[ee],b[f[ee]]);return R},p.hash_each=function(f,b,R){for(var ee,ae=0,ce,de=Array.from(f.entries()),pe=de.length;ae<pe;ae++)if(ce=de[ae],ee=R(ce[0],ce[1]),ee[0])return ee[1];return ee?ee[1]:b},p.range=function(f,b,R){var ee=new p.Range;return ee.begin=f,ee.end=b,ee.excl=R,ee};var ie=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];p.ivar=function(f){return ie.indexOf(f)!==-1&&(f+="$"),f};function x(f){f.$$frozen&&M(p.FrozenError,"can't modify frozen "+f.$class()+": "+f,new Map([["receiver",f]]))}p.deny_frozen_access=x,p.freeze=function(f){return E(f,"$$frozen",!0),f.hasOwnProperty("$$id")||E(f,"$$id",P()),f.hasOwnProperty("$$meta")?f.$$meta.$freeze():E(f,"$$meta",null),f.hasOwnProperty("$$comparable")||E(f,"$$comparable",null),Object.seal(f),f};function N(f,b){var R=Object.getOwnPropertyNames(f),ee=R.length,ae,ce,de;for(ae=0;ae<ee;ae++)ce=R[ae],ce[0]!=="$"&&(de=Object.getOwnPropertyDescriptor(f,ce),de&&de.enumerable&&b(ce,de))}p.each_ivar=N,p.freeze_props=function(f){var b={get:null,set:function(R){x(f)},enumerable:!0};N(f,function(R,ee){ee.writable&&(b.get=se(ee.value),Object.defineProperty(f,R,b))})},p.escape_regexp=function(f){return f.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},p.global_regexp=function(f){return f.global?f:(f.$$g==null?f.$$g=new RegExp(f.source,(f.multiline?"gm":"g")+(f.ignoreCase?"i":"")):f.$$g.lastIndex=null,f.$$g)},p.global_multiline_regexp=function(f){var b,R;return f.global&&f.multiline?f:(R="gm"+(f.ignoreCase?"i":""),f.multiline?(f.$$g==null&&(f.$$g=new RegExp(f.source,R)),b=f.$$g):(f.$$gm==null&&(f.$$gm=new RegExp(f.source,R)),b=f.$$gm),b.lastIndex=null,b)},p.regexp=function(f,b){for(var R,ee=typeof b<"u"&&b&&b.indexOf("i")>=0,ae=0,ce=f.length;ae<ce;ae++)R=f[ae],R instanceof RegExp&&(R.ignoreCase!==ee&&p.Kernel.$warn("ignore case doesn't match for "+R.source.$inspect(),new Map([["uplevel",1]])),R=R.source),R===""&&(R="(?:"+R+")"),f[ae]=R;return b?new RegExp(f.join(""),b):new RegExp(f.join(""))},p.modules={},p.loaded_features=["corelib/runtime"],p.current_dir=".",p.require_table={"corelib/runtime":!0},p.normalize=function(f){var b,R,ee=[],ae="/";p.current_dir!=="."&&(f=p.current_dir.replace(/\/*$/,"/")+f),f=f.replace(/^\.\//,""),f=f.replace(/\.(rb|opal|js)$/,""),b=f.split(ae);for(var ce=0,de=b.length;ce<de;ce++)R=b[ce],R!==""&&(R===".."?ee.pop():ee.push(R));return ee.join(ae)},p.loaded=function(f){var b,R,ee;for(b=0,R=f.length;b<R;b++)ee=p.normalize(f[b]),!p.require_table[ee]&&(p.loaded_features.push(ee),p.require_table[ee]=!0)},p.load_normalized=function(f){p.loaded([f]);var b=p.modules[f];if(b){var R=b(p);if(typeof Promise<"u"&&R instanceof Promise)return R.then(se(!0))}else{var ee=p.config.missing_require_severity,ae="cannot load such file -- "+f;ee==="error"?M(p.LoadError,ae):ee==="warning"&&t.warn("WARNING: LoadError: "+ae)}return!0},p.load=function(f){return f=p.normalize(f),p.load_normalized(f)},p.require=function(f){return f=p.normalize(f),p.require_table[f]?!1:p.load_normalized(f)},p.encodings=Object.create(null),p.set_encoding=function(f,b,R){typeof R>"u"&&(R="encoding"),(typeof f=="string"||f.$$frozen===!0)&&M(p.FrozenError,"can't modify frozen String");var ee=p.find_encoding(b);return ee===f[R]||(f[R]=ee),f},p.find_encoding=function(f){var b=p.encodings,R=b[f]||b[f.toUpperCase()];return R||M(p.ArgumentError,"unknown encoding name - "+f),R},p.enc=function(f,b){var R=new String(f);return R=p.set_encoding(R,b),R.internal_encoding=R.encoding,R},p.binary=function(f){var b=new String(f);return p.set_encoding(b,"binary","internal_encoding")},p.last_promise=null,p.promise_unhandled_exception=!1,p.queue=function(f){if(p.last_promise)return p.last_promise=p.last_promise.then(function(){if(!p.promise_unhandled_exception)return f(p)}).catch(function(R){p.respond_to(R,"$full_message")&&(R=R.$full_message()),t.error(R),p.promise_unhandled_exception=!0,p.exit(1)}),p.last_promise;var b=f(p);return typeof Promise=="function"&&typeof b=="object"&&b instanceof Promise&&(p.last_promise=b),b};function K(f,b){return typeof f=="number"&&typeof b=="number"}p.rb_plus=function(f,b){return K(f,b)?f+b:f["$+"](b)},p.rb_minus=function(f,b){return K(f,b)?f-b:f["$-"](b)},p.rb_times=function(f,b){return K(f,b)?f*b:f["$*"](b)},p.rb_divide=function(f,b){return K(f,b)?f/b:f["$/"](b)},p.rb_lt=function(f,b){return K(f,b)?f<b:f["$<"](b)},p.rb_gt=function(f,b){return K(f,b)?f>b:f["$>"](b)},p.rb_le=function(f,b){return K(f,b)?f<=b:f["$<="](b)},p.rb_ge=function(f,b){return K(f,b)?f>=b:f["$>="](b)};function G(f,b){return typeof f=="number"&&typeof b=="number"||typeof f=="string"&&typeof b=="string"}function te(f,b){return G(f,b)?f===b:q(f["$=="](b))}p.eqeq=te,p.eqeqeq=function(f,b){return G(f,b)?f===b:q(f["$==="](b))},p.neqeq=function(f,b){return G(f,b)?f!==b:q(f["$!="](b))},p.not=function(f){return f==null||f===!1||l===f?!0:f===!0||f["$!"].$$pristine?!1:q(f["$!"]())};function se(f){return function(){return f}}p.return_val=se,p.return_self=function(){return this},p.return_ivar=function(f){return function(){return this[f]==null?l:this[f]}},p.assign_ivar=function(f){return function(b){return x(this),this[f]=b}},p.assign_ivar_val=function(f,b){return function(){return x(this),this[f]=b}},p.ensure_kwargs=function(f){if(f==null)return new Map;if(f.$$is_hash)return f;M(p.ArgumentError,"expected kwargs")},p.get_kwarg=function(f,b){var R=p.hash_get(f,b);return R===void 0&&M(p.ArgumentError,"missing keyword: "+b),R},p.large_array_unpack=function(f){var b=f.split(","),R=b.length,ee;for(ee=0;ee<R;ee++)switch(b[ee][0]){case void 0:b[ee]=l;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":b[ee]=+b[ee]}return b},p.opal32_init=se(1332765036);function ue(f,b){return f<<b|f>>>32-b}p.opal32_add=function(f,b){return f^=b,f=ue(f,1),f},p.BasicObject=g=J("BasicObject",null),p.Object=v=J("Object",p.BasicObject),p.Module=X=J("Module",p.Object),p.Class=Y=J("Class",p.Module),p.Opal=z=_("Opal"),p.Kernel=H=_("Kernel"),Q(p.BasicObject,p.Class.$$prototype),Q(p.Object,p.Class.$$prototype),Q(p.Module,p.Class.$$prototype),Q(p.Class,p.Class.$$prototype),g.$$const.BasicObject=g,d(v,"BasicObject",g),d(v,"Object",v),d(v,"Module",X),d(v,"Class",Y),d(v,"Opal",z),d(v,"Kernel",H),g.$$class=Y,v.$$class=Y,X.$$class=Y,Y.$$class=Y,z.$$class=X,H.$$class=X,E(v.$$prototype,"toString",function(){var f=this.$to_s();return f.$$is_string&&typeof f=="object"?f.valueOf():f}),E(v.$$prototype,"$require",p.require),p.top=new v,p.top.$to_s=p.top.$inspect=se("main"),p.top.$define_method=fe;function fe(){var f=fe.$$p;return fe.$$p=null,p.send(v,"define_method",arguments,f)}p.NilClass=J("NilClass",p.Object),d(v,"NilClass",p.NilClass),l=p.nil=new p.NilClass,l.$$id=k,l.call=l.apply=function(){M(p.LocalJumpError,"no block given")},l.$$frozen=!0,l.$$comparable=!1,Object.seal(l),p.thrower=function(f){var b={$thrower_type:f,$throw:function(R,ee){throw R==null&&(R=l),this.is_orphan&&!ee&&M(p.LocalJumpError,"unexpected "+f,R,f.$to_sym()),this.$v=R,this},is_orphan:!1};return b},Object.defineProperty(W,"@",{enumerable:!0,configurable:!0,get:function(){return q(W["!"])?W["!"].$backtrace():l},set:function(f){q(W["!"])?W["!"].$set_backtrace(f):M(p.ArgumentError,"$! not set")}}),p.t_eval_return=p.thrower("return"),TypeError.$$super=Error,p.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(e){var t=e.type_error,l=e.coerce_to,g=e.module,v=e.defs,X=e.slice,Y=e.eqeqeq,z=e.Kernel,H=e.truthy,p=e.Opal,U=e.nil,$e=e.$$$;return e.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(Z){var Q=g(Z,"Opal");v(Q,"$bridge",function(k,C){return e.bridge(k,C)}),v(Q,"$coerce_to!",function(k,C,P,W){var M,L,E=U;return M=X(arguments,3),L=M,E=l(k,C,P,L),Y(C,E)||z.$raise(t(k,C,P,E)),E},-4),v(Q,"$coerce_to?",function(k,C,P,W){var M,L,E=U;return M=X(arguments,3),L=M,!H(k["$respond_to?"](P))||(E=l(k,C,P,L),H(E["$nil?"]()))?U:(Y(C,E)||z.$raise(t(k,C,P,E)),E)},-4),v(Q,"$try_convert",function(k,C,P){return Y(C,k)?k:H(k["$respond_to?"](P))?k.$__send__(P):U}),v(Q,"$compare",function(k,C){var P=U;return P=k["$<=>"](C),H(P===U)&&z.$raise($e("ArgumentError"),"comparison of "+k.$class()+" with "+C.$class()+" failed"),P}),v(Q,"$destructure",function(k){if(k.length==1)return k[0];if(k.$$is_array)return k;for(var C=new Array(k.length),P=0,W=C.length;P<W;P++)C[P]=k[P];return C}),v(Q,"$respond_to?",function(k,C,P){return P==null&&(P=!1),k==null||!k.$$class?!1:k["$respond_to?"](C,P)},-3),v(Q,"$instance_variable_name!",function(k){return k=p["$coerce_to!"](k,$e("String"),"to_str"),H(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(k))||z.$raise($e("NameError").$new("'"+k+"' is not allowed as an instance variable name",k)),k}),v(Q,"$class_variable_name!",function(k){return k=p["$coerce_to!"](k,$e("String"),"to_str"),H(k.length<3||k.slice(0,2)!=="@@")&&z.$raise($e("NameError").$new("`"+k+"' is not allowed as a class variable name",k)),k}),v(Q,"$const_name?",function(k){return typeof k!="string"&&(k=p["$coerce_to!"](k,$e("String"),"to_str")),k[0]===k[0].toUpperCase()}),v(Q,"$const_name!",function(k){var C=this;return H($e("::","String","skip_raise")?"constant":U)&&(k=p["$coerce_to!"](k,$e("String"),"to_str")),(!k||k[0]!=k[0].toUpperCase())&&C.$raise($e("NameError"),"wrong constant name "+k),k}),v(Q,"$pristine",function(k,C){var P,W;P=X(arguments,1),W=P;for(var M,L,E=W.length-1;E>=0;E--)M=W[E],L=k.$$prototype[e.jsid(M)],L&&!L.$$stub&&(L.$$pristine=!0);return U},-2);var ne=[];return v(Q,"$inspect",function(k){var C=U,P=!1;return function(){try{try{return k===null?"null":k===void 0?"undefined":typeof k.$$class>"u"?Object.prototype.toString.apply(k):typeof k.$inspect!="function"||k.$inspect.$$stub||ne.indexOf(k.$__id__())!==-1?"#<"+k.$$class+":0x"+k.$__id__().$to_s(16)+">":(ne.push(k.$__id__()),P=!0,k.$inspect())}catch(W){if(e.rescue(W,[$e("Exception")])){C=W;try{return"#<"+k.$$class+":0x"+k.$__id__().$to_s(16)+">"}finally{e.pop_exception(W)}}else throw W}}finally{P&&ne.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(e){var t=e.truthy,l=e.coerce_to,g=e.const_set,v=e.Object,X=e.return_ivar,Y=e.assign_ivar,z=e.ivar,H=e.deny_frozen_access,p=e.freeze,U=e.prop,$e=e.jsid,Z=e.each_ivar,Q=e.klass,ne=e.Opal,O=e.Kernel,k=e.defs,C=e.send,P=e.def,W=e.eqeqeq,M=e.Module,L=e.rb_lt,E=e.rb_gt,q=e.slice,B=e.to_a,F=e.return_val,A=e.eqeq,a=e.not,m=e.rb_le,T=e.range,y=e.send2,d=e.find_super,c=e.alias,J=[],V=e.nil,h=e.$$$;return e.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(_,o,i){var n=Q(_,o,"Module"),r=[n].concat(i),$=e.$r(r);function s(D){if(D.$$is_string)return D;var S=ne.$try_convert(D,h("String"),"to_str");if(S.$$is_string)return S;S===V?O.$raise(h("TypeError"),""+D+" is not a symbol nor a string"):O.$raise(h("TypeError"),"can't convert "+D.$class()+" to String ("+D.$class()+"#to_str gives "+S.$class())}k(n,"$allocate",function(){var S=this,j=e.allocate_module(V,function(){});return S!==e.Module&&Object.setPrototypeOf(j,S.$$prototype),j}),P(n,"$initialize",function D(){var S=D.$$p||V,j=this;return D.$$p=null,S!==V?C(j,"module_eval",[],S.$to_proc()):V}),P(n,"$===",function(S){var j=this;return t(S==null)?!1:e.is_a(S,j)}),P(n,"$<",function(S){var j=this;W(M,S)||O.$raise(h("TypeError"),"compared with non class/module");var re=j,oe,le,_e;if(re===S)return!1;for(le=0,oe=e.ancestors(j),_e=oe.length;le<_e;le++)if(oe[le]===S)return!0;for(le=0,oe=e.ancestors(S),_e=oe.length;le<_e;le++)if(oe[le]===j)return!1;return V}),P(n,"$<=",function(S){var j=this,re=V;return t(re=j["$equal?"](S))?re:L(j,S)}),P(n,"$>",function(S){var j=this;return W(M,S)||O.$raise(h("TypeError"),"compared with non class/module"),L(S,j)}),P(n,"$>=",function(S){var j=this,re=V;return t(re=j["$equal?"](S))?re:E(j,S)}),P(n,"$<=>",function(S){var j=this,re=V;return j===S?0:!W(M,S)||(re=L(j,S),t(re["$nil?"]()))?V:t(re)?-1:1}),P(n,"$alias_method",function(S,j){var re=this;return H(re),S=l(S,h("String"),"to_str"),j=l(j,h("String"),"to_str"),e.alias(re,S,j),re}),P(n,"$alias_native",function(S,j){var re=this;return j==null&&(j=S),H(re),e.alias_native(re,S,j),re},-2),P(n,"$ancestors",function(){var S=this;return e.ancestors(S)}),P(n,"$append_features",function(S){var j=this;return H(S),e.append_features(j,S),j}),P(n,"$attr_accessor",function(S){var j,re,oe=this;return j=q(arguments),re=j,C(oe,"attr_reader",B(re)),C(oe,"attr_writer",B(re))},-1),P(n,"$attr",function(S){var j,re,oe=this;return j=q(arguments),re=j,re.length==2&&(re[1]===!0||re[1]===!1)?(oe.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),re[1]?oe.$attr_accessor(re[0]):oe.$attr_reader(re[0]),V):C(oe,"attr_reader",B(re))},-1),P(n,"$attr_reader",function(S){var j,re,oe=this;j=q(arguments),re=j,H(oe);for(var le=oe.$$prototype,_e=re.length-1;_e>=0;_e--){var he=re[_e],ge=$e(he),me=z(he),ve=X(me);e.prop(le,me,V),ve.$$parameters=[],ve.$$arity=0,e.defn(oe,ge,ve)}return V},-1),P(n,"$attr_writer",function(S){var j,re,oe=this;j=q(arguments),re=j,H(oe);for(var le=oe.$$prototype,_e=re.length-1;_e>=0;_e--){var he=re[_e],ge=$e(he+"="),me=z(he),ve=Y(me);ve.$$parameters=[["req"]],ve.$$arity=1,e.prop(le,me,V),e.defn(oe,ge,ve)}return V},-1),P(n,"$autoload",function(S,j){var re=this;return H(re),$("Opal")["$const_name?"](S)||O.$raise(h("NameError"),"autoload must be constant name: "+S),j==""&&O.$raise(h("ArgumentError"),"empty file name"),re.$$const.hasOwnProperty(S)||(re.$$autoload||(re.$$autoload={}),e.const_cache_version++,re.$$autoload[S]={path:j,loaded:!1,required:!1,success:!1,exception:!1},re.$const_added&&!re.$const_added.$$pristine&&re.$const_added(S)),V}),P(n,"$autoload?",function(S){var j=this;if(j.$$autoload&&j.$$autoload[S]&&!j.$$autoload[S].required&&!j.$$autoload[S].success)return j.$$autoload[S].path;for(var re=j.$ancestors(),oe=0,le=re.length;oe<le;oe++)if(re[oe].$$autoload&&re[oe].$$autoload[S]&&!re[oe].$$autoload[S].required&&!re[oe].$$autoload[S].success)return re[oe].$$autoload[S].path;return V}),P(n,"$class_variables",function(){var S=this;return Object.keys(e.class_variables(S))}),P(n,"$class_variable_get",function(S){var j=this;return S=ne["$class_variable_name!"](S),e.class_variable_get(j,S,!1)}),P(n,"$class_variable_set",function(S,j){var re=this;return H(re),S=ne["$class_variable_name!"](S),e.class_variable_set(re,S,j)}),P(n,"$class_variable_defined?",function(S){var j=this;return S=ne["$class_variable_name!"](S),e.class_variables(j).hasOwnProperty(S)}),P(n,"$const_added",F(V)),ne.$pristine(n,"const_added"),P(n,"$remove_class_variable",function(S){var j=this;if(H(j),S=ne["$class_variable_name!"](S),e.hasOwnProperty.call(j.$$cvars,S)){var re=j.$$cvars[S];return delete j.$$cvars[S],re}else O.$raise(h("NameError"),"cannot remove "+S+" for "+j)}),P(n,"$constants",function(S){var j=this;return S==null&&(S=!0),e.constants(j,S)},-1),k(n,"$constants",function(S){var j=this;if(S==null){var re=(j.$$nesting||[]).concat(v),oe,le={},_e,he;for(_e=0,he=re.length;_e<he;_e++)for(oe in re[_e].$$const)le[oe]=!0;return Object.keys(le)}else return e.constants(j,S)},-1),k(n,"$nesting",function(){var S=this;return S.$$nesting||[]}),P(n,"$const_defined?",function(S,j){var re=this;j==null&&(j=!0),S=$("Opal")["$const_name!"](S),t(S["$=~"](h(ne,"CONST_NAME_REGEXP")))||O.$raise(h("NameError").$new("wrong constant name "+S,S));var oe,le=[re],_e,he;for(j&&(le=le.concat(e.ancestors(re)),re.$$is_module&&(le=le.concat([v]).concat(e.ancestors(v)))),_e=0,he=le.length;_e<he;_e++)if(oe=le[_e],oe.$$const[S]!=null||oe.$$autoload&&oe.$$autoload[S]&&!oe.$$autoload[S].required&&!oe.$$autoload[S].success)return!0;return!1},-2),P(n,"$const_get",function(S,j){var re=this;return j==null&&(j=!0),S=$("Opal")["$const_name!"](S),S.indexOf("::")===0&&S!=="::"&&(S=S.slice(2)),t(S.indexOf("::")!=-1&&S!="::")?C(S.$split("::"),"inject",[re],function(le,_e){return le==null&&(le=V),_e==null&&(_e=V),le.$const_get(_e)}):(t(S["$=~"](h(ne,"CONST_NAME_REGEXP")))||O.$raise(h("NameError").$new("wrong constant name "+S,S)),j?e.$$([re],S):e.const_get_local(re,S))},-2),P(n,"$const_missing",function(S){var j=this,re=V;return re=A(j,v)?S:""+j+"::"+S,O.$raise(h("NameError").$new("uninitialized constant "+re,S))}),P(n,"$const_set",function(S,j){var re=this;return H(re),S=ne["$const_name!"](S),(t(S["$!~"](h(ne,"CONST_NAME_REGEXP")))||t(S["$start_with?"]("::")))&&O.$raise(h("NameError").$new("wrong constant name "+S,S)),g(re,S,j),j}),P(n,"$public_constant",F(V)),P(n,"$define_method",function D(S,j){var re=D.$$p||V,oe=this,le=V,_e=V,he=V;return D.$$p=null,H(oe),j===void 0&&re===V&&O.$raise(h("ArgumentError"),"tried to create a Proc object without a block"),S=s(S),t(j!==void 0)&&(re=W(h("Proc"),le=j)?j:W(h("Method"),le)?j.$to_proc().$$unbound:W(h("UnboundMethod"),le)?e.wrap_method_body(j.$$method):O.$raise(h("TypeError"),"wrong argument type "+j.$class()+" (expected Proc/Method/UnboundMethod)"),t(!j.$$is_proc)&&(_e=j.$owner(),t(_e.$$is_class)&&a(m(oe,_e))&&(he=t(_e.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+_e,O.$raise(h("TypeError"),he)))),typeof Proxy<"u"&&(re.$$proxy_target=re,re=new Proxy(re,{apply:function(ge,me,ve){var be=ge.$$jsid,ie=ge.$$is_lambda;ge.$$jsid=S,ge.$$is_lambda=!0;try{return ge.apply(me,ve)}catch(x){if(x===ge.$$brk||x===ge.$$ret)return x.$v;throw x}finally{ge.$$jsid=be,ge.$$is_lambda=ie}}})),re.$$jsid=S,re.$$s=null,re.$$def=re,re.$$define_meth=!0,e.defn(oe,$e(S),re)},-2),P(n,"$freeze",function(){var S=this;return t(S["$frozen?"]())?S:(S.hasOwnProperty("$$base_module")||U(S,"$$base_module",null),p(S))}),P(n,"$remove_method",function(S){var j,re,oe=this;j=q(arguments),re=j;for(var le=0;le<re.length;le++){var _e=s(re[le]);H(oe),e.rdef(oe,"$"+_e)}return oe},-1),P(n,"$singleton_class?",function(){var S=this;return!!S.$$is_singleton}),P(n,"$include",function(S){var j,re,oe=this;j=q(arguments),re=j;for(var le=re.length-1;le>=0;le--){var _e=re[le];_e.$$is_module||O.$raise(h("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$append_features(oe),_e.$included(oe)}return oe},-1),P(n,"$included_modules",function(){var S=this;return e.included_modules(S)}),P(n,"$include?",function(S){var j=this;S.$$is_module||O.$raise(h("TypeError"),"wrong argument type "+S.$class()+" (expected Module)");var re,oe,le,_e=e.ancestors(j);for(re=0,oe=_e.length;re<oe;re++)if(le=_e[re],le===S&&le!==j)return!0;return!1}),P(n,"$instance_method",function(S){var j=this,re=j.$$prototype[$e(S)];return(!re||re.$$stub)&&O.$raise(h("NameError").$new("undefined method `"+S+"' for class `"+j.$name()+"'",S)),h("UnboundMethod").$new(j,re.$$owner||j,re,S)}),P(n,"$instance_methods",function(S){var j=this;return S==null&&(S=!0),t(S)?e.instance_methods(j):e.own_instance_methods(j)},-1),P(n,"$included",F(V)),P(n,"$extended",F(V)),P(n,"$extend_object",function(S){return H(S),V}),P(n,"$method_added",function(S){return q(arguments),V},-1),P(n,"$method_removed",function(S){return q(arguments),V},-1),P(n,"$method_undefined",function(S){return q(arguments),V},-1),P(n,"$module_eval",function D(S){var j=D.$$p||V,re,oe,le,_e=this,he=V,ge=V,me=V,ve=V,be=V,ie=V;D.$$p=null,re=q(arguments),oe=re,t(j["$nil?"]())&&t(!!e.compile)?(t(T(1,3,!1)["$cover?"](oe.$size()))||O.$raise(h("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(B(oe)),he=le[0]==null?V:le[0],ge=le[1]==null?V:le[1],le[2]==null||le[2],me=new Map([["file",t(ve=ge)?ve:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(me),ie=ne.$compile(he,be),j=C(O,"proc",[],function K(){var G=K.$$s==null?this:K.$$s;return new Function("Opal,self","return "+ie)(e,G)},{$$s:_e})):t(oe["$any?"]())&&O.$raise(h("ArgumentError"),"wrong number of arguments ("+oe.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var x=j.$$s,N;return j.$$s=null,N=j.apply(_e,[_e]),j.$$s=x,N},-1),P(n,"$module_exec",function D(S){var j=D.$$p||V,re,oe,le=this;D.$$p=null,re=q(arguments),oe=re,j===V&&O.$raise(h("LocalJumpError"),"no block given");var _e=j.$$s,he;return j.$$s=null,he=j.apply(le,oe),j.$$s=_e,he},-1),P(n,"$method_defined?",function(S){var j=this,re=j.$$prototype[$e(S)];return!!re&&!re.$$stub}),P(n,"$module_function",function(S){var j,re,oe=this;if(j=q(arguments),re=j,H(oe),re.length===0)return oe.$$module_function=!0,V;for(var le=0,_e=re.length;le<_e;le++){var he=re[le],ge=$e(he),me=oe.$$prototype[ge];e.defs(oe,ge,me)}return re.length===1?re[0]:re},-1),P(n,"$name",function(){var S=this;if(S.$$full_name)return S.$$full_name;for(var j=[],re=S;re;){if(re.$$name===V||re.$$name==null)return V;if(j.unshift(re.$$name),re=re.$$base_module,re===v)break}return j.length===0?V:S.$$full_name=j.join("::")}),P(n,"$prepend",function(S){var j,re,oe=this;j=q(arguments),re=j,re.length===0&&O.$raise(h("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=re.length-1;le>=0;le--){var _e=re[le];_e.$$is_module||O.$raise(h("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$prepend_features(oe),_e.$prepended(oe)}return oe},-1),P(n,"$prepend_features",function(S){var j=this;return H(S),j.$$is_module||O.$raise(h("TypeError"),"wrong argument type "+j.$class()+" (expected Module)"),e.prepend_features(j,S),j}),P(n,"$prepended",F(V)),P(n,"$remove_const",function(S){var j=this;return H(j),e.const_remove(j,S)}),P(n,"$to_s",function(){var S=this,j=V;return t(j=e.Module.$name.call(S))?j:"#<"+(S.$$is_module?"Module":"Class")+":0x"+S.$__id__().$to_s(16)+">"}),P(n,"$undef_method",function(S){var j,re,oe=this;j=q(arguments),re=j;for(var le=0;le<re.length;le++){var _e=s(re[le]);H(oe),e.udef(oe,"$"+_e)}return oe},-1),P(n,"$instance_variables",function(){var S=this,j=V;j=(e.Module.$$nesting=r,S.$constants());var re=[];return Z(S,function(oe){oe!=="constructor"&&!j["$include?"](oe)&&re.push("@"+oe)}),re});function u(D,S){var j,re=e.own_instance_methods(D);for(j=0;j<re.length;j++){var oe=re[j],le=$e(oe),_e=D.$$prototype[le],he=e.wrap_method_body(_e);he.$$jsid=oe,e.defn(S,le,he)}}function w(D,S){for(var j=D.$$own_included_modules,re=j.length-1;re>=0;re--)e.append_features(j[re],S)}function I(D,S){for(var j=D.$$own_prepended_modules,re=j.length-1;re>=0;re--)e.prepend_features(j[re],S)}return P(n,"$initialize_copy",function(S){var j=this;return u(S,j),w(S,j),I(S,j),j.$$cloned_from=S.$$cloned_from.concat(S),j.$copy_class_variables(S),j.$copy_constants(S)}),P(n,"$initialize_dup",function D(S){var j=D.$$p||V,re=this;return D.$$p=null,y(re,d(re,"initialize_dup",D,!1,!0),"initialize_dup",[S],j),re.$copy_singleton_methods(S)}),P(n,"$copy_class_variables",function(S){var j=this;for(var re in S.$$cvars)j.$$cvars[re]=S.$$cvars[re]}),P(n,"$copy_constants",function(S){var j=this,re,oe=S.$$const;for(re in oe)g(j,re,oe[re])}),P(n,"$refine",function D(S){var j=D.$$p||V,re,oe=this,le=V,_e=V,he=V;return D.$$p=null,re=[oe,V,V],le=re[0],_e=re[1],he=re[2],he=e.id(S),typeof oe.$$refine_modules>"u"&&(oe.$$refine_modules=Object.create(null)),typeof oe.$$refine_modules[he]>"u"?_e=oe.$$refine_modules[he]=h("Refinement").$new():_e=oe.$$refine_modules[he],_e.refinement_module=le,_e.refined_class=S,C(_e,"class_exec",[],j.$to_proc()),_e}),P(n,"$refinements",function(){var S=this,j=S.$$refine_modules,re=new Map;if(typeof j>"u")return re;for(var oe in j)re["$[]="](j[oe].refined_class,j[oe]);return re}),P(n,"$using",function(S){return O.$raise("Module#using is not permitted in methods")}),c(n,"class_eval","module_eval"),c(n,"class_exec","module_exec"),c(n,"inspect","to_s")}("::",null,J),function(_,o){var i=Q(_,o,"Refinement"),n=i.$$prototype;return n.refinement_module=n.refined_class=V,i.$attr_reader("refined_class"),P(i,"$inspect",function r(){var $=r.$$p||V,s=this;return r.$$p=null,t(s.refinement_module)?"#<refinement:"+s.refined_class.$inspect()+"@"+s.refinement_module.$inspect()+">":y(s,d(s,"inspect",r,!1,!0),"inspect",[],$)})}("::",M)};Opal.modules["corelib/class"]=function(e){var t=e.klass,l=e.send,g=e.defs,v=e.def,X=e.ensure_kwargs,Y=e.hash_get,z=e.eqeq,H=e.truthy,p=e.rb_plus,U=e.return_val,$e=e.slice,Z=e.send2,Q=e.find_super,ne=e.Kernel,O=e.alias,k=e.top,C=[],P=e.nil,W=e.$$$;return e.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),k.$require("corelib/module"),function(M,L,E){var q=t(M,L,"Class"),B=[q].concat(E),F=e.$r(B);return g(q,"$new",function A(a){var m=A.$$p||P;if(A.$$p=null,a==null&&(a=F("Object")),!a.$$is_class)throw e.TypeError.$new("superclass must be a Class");var T=e.allocate_class(P,a);return a.$inherited(T),m!==P&&l(T,"class_eval",[],m.$to_proc()),T},-1),v(q,"$allocate",function(){var a=this,m=new a.$$constructor;return m.$$id=e.uid(),m}),v(q,"$clone",function(a){var m,T=this,y=P;return a=X(a),m=Y(a,"freeze"),m==null&&(m=P),H(m["$nil?"]())||z(m,!0)||z(m,!1)||T.$raise(F("ArgumentError"),"unexpected value for freeze: "+m.$class()),y=e.allocate_class(P,T.$$super),y.$copy_instance_variables(T),y.$copy_singleton_methods(T),y.$initialize_clone(T,new Map([["freeze",m]])),(z(m,!0)||H(m["$nil?"]())&&H(T["$frozen?"]()))&&y.$freeze(),y},-1),v(q,"$dup",function(){var a=this,m=P;return m=e.allocate_class(P,a.$$super),m.$copy_instance_variables(a),m.$initialize_dup(a),m}),v(q,"$descendants",function(){var a=this;return p(a.$subclasses(),l(a.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),v(q,"$inherited",U(P)),v(q,"$new",function A(a){var m=A.$$p||P,T,y,d=this;A.$$p=null,T=$e(arguments),y=T;var c=d.$allocate();return e.send(c,c.$initialize,y,m),c},-1),v(q,"$subclasses",function(){var a=this;if(typeof WeakRef<"u"){var m,T,y=[];for(m=0;m<a.$$subclasses.length;m++)T=a.$$subclasses[m].deref(),T!==void 0&&y.push(T);return y}else return a.$$subclasses}),v(q,"$superclass",function(){var a=this;return a.$$super||P}),v(q,"$to_s",function A(){A.$$p;var a=this;A.$$p=null;var m=a.$$singleton_of;return m&&m.$$is_a_module?"#<Class:"+m.$name()+">":m?"#<Class:#<"+m.$$class.$name()+":0x"+e.id(m).$to_s(16)+">>":Z(a,Q(a,"to_s",A,!1,!0),"to_s",[],null)}),v(q,"$attached_object",function(){var a=this;if(a.$$singleton_of!=null)return a.$$singleton_of;ne.$raise(W("TypeError"),"`"+a+"' is not a singleton class")}),O(q,"inspect","to_s")}("::",null,C)};Opal.modules["corelib/basic_object"]=function(e){var t=e.klass,l=e.slice,g=e.def,v=e.alias,X=e.return_val,Y=e.Opal,z=e.truthy,H=e.range,p=e.Kernel,U=e.to_a,$e=e.send,Z=e.eqeq,Q=e.rb_ge,ne=e.nil,O=e.$$$;return e.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(k,C){var P=t(k,C,"BasicObject");return g(P,"$initialize",function(M){return l(arguments),ne},-1),g(P,"$==",function(M){var L=this;return L===M}),g(P,"$eql?",function(M){var L=this;return L["$=="](M)}),v(P,"equal?","=="),g(P,"$__id__",function(){var M=this;return M.$$id!=null||e.prop(M,"$$id",e.uid()),M.$$id}),g(P,"$__send__",function W(M,L){var E=W.$$p||ne,q,B,F=this;W.$$p=null,q=l(arguments,1),B=q,M.$$is_string||F.$raise(O("TypeError"),""+F.$inspect()+" is not a symbol nor a string");var A=F[e.jsid(M)];return A?(E!==ne&&(A.$$p=E),A.apply(F,B)):(E!==ne&&(F.$method_missing.$$p=E),F.$method_missing.apply(F,[M].concat(B)))},-2),g(P,"$!",X(!1)),Y.$pristine("!"),g(P,"$!=",function(M){var L=this;return L["$=="](M)["$!"]()}),g(P,"$instance_eval",function W(M){var L=W.$$p||ne,E,q,B,F=this,A=ne,a=ne,m=ne,T=ne,y=ne,d=ne;if(W.$$p=null,E=l(arguments),q=E,z(L["$nil?"]())&&z(!!e.compile))z(H(1,3,!1)["$cover?"](q.$size()))||p.$raise(O("ArgumentError"),"wrong number of arguments (0 for 1..3)"),B=[].concat(U(q)),A=B[0]==null?ne:B[0],a=B[1]==null?ne:B[1],B[2]==null||B[2],m=new Map([["file",z(T=a)?T:"(eval)"],["eval",!0]]),y=new Map([["arity_check",!1]]).$merge(m),d=Y.$compile(A,y),L=$e(p,"proc",[],function V(){var h=V.$$s==null?this:V.$$s;return new Function("Opal,self","return "+d)(e,h)},{$$s:F});else{if(z(L["$nil?"]())&&z(Q(q.$length(),1))&&Z(q.$first()["$[]"](0),"@"))return F.$instance_variable_get(q.$first());z(q["$any?"]())&&p.$raise(O("ArgumentError"),"wrong number of arguments ("+q.$size()+" for 0)")}var c=L.$$s,J;if(L.$$s=null,F.$$is_a_module){F.$$eval=!0;try{J=L.call(F,F)}finally{F.$$eval=!1}}else J=L.call(F,F);return L.$$s=c,J},-1),g(P,"$instance_exec",function W(M){var L=W.$$p||ne,E,q,B=this;W.$$p=null,E=l(arguments),q=E,z(L)||p.$raise(O("ArgumentError"),"no block given");var F=L.$$s,A;if(L.$$s=null,B.$$is_a_module){B.$$eval=!0;try{A=L.apply(B,q)}finally{B.$$eval=!1}}else A=L.apply(B,q);return L.$$s=F,A},-1),g(P,"$singleton_method_added",function(M){return l(arguments),ne},-1),g(P,"$singleton_method_removed",function(M){return l(arguments),ne},-1),g(P,"$singleton_method_undefined",function(M){return l(arguments),ne},-1),g(P,"$method_missing",function W(M,L){W.$$p;var E,q,B=this,F=ne;return W.$$p=null,E=l(arguments,1),q=E,F=Y.$inspect(B),p.$raise(O("NoMethodError").$new("undefined method `"+M+"' for "+F,M,q),ne,p.$caller(1))},-2),Y.$pristine(P,"method_missing"),g(P,"$respond_to_missing?",function(M,L){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(e){var t=e.truthy,l=e.coerce_to,g=e.respond_to,v=e.Opal,X=e.deny_frozen_access,Y=e.freeze,z=e.freeze_props,H=e.jsid,p=e.each_ivar,U=e.module,$e=e.return_val,Z=e.def,Q=e.Kernel,ne=e.gvars,O=e.slice,k=e.send,C=e.to_a,P=e.ensure_kwargs,W=e.hash_get,M=e.eqeq,L=e.rb_plus,E=e.extract_kwargs,q=e.eqeqeq,B=e.return_self,F=e.rb_le,A=e.rb_lt,a=e.Object,m=e.alias,T=e.klass,y=[],d=e.nil,c=e.$$$;return e.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(J,V){var h=U(J,"Kernel"),_=[h].concat(V),o=e.$r(_);Z(h,"$=~",$e(!1)),Z(h,"$!~",function(r){var $=this;return $["$=~"](r)["$!"]()}),Z(h,"$===",function(r){var $=this,s=d;return t(s=$.$object_id()["$=="](r.$object_id()))?s:$["$=="](r)}),Z(h,"$<=>",function(r){var $=this;$.$$comparable=!0;var s=$["$=="](r);return s&&s!==d?0:d}),Z(h,"$method",function(r){var $=this,s=$[H(r)];return(!s||s.$$stub)&&Q.$raise(c("NameError").$new("undefined method `"+r+"' for class `"+$.$class()+"'",r)),c("Method").$new($,s.$$owner||$.$class(),s,r)}),Z(h,"$methods",function(r){var $=this;return r==null&&(r=!0),t(r)?e.methods($):e.own_methods($)},-1),Z(h,"$public_methods",function(r){var $=this;return r==null&&(r=!0),t(r)?e.methods($):e.receiver_methods($)},-1),Z(h,"$Array",function(r){var $;return r===d?[]:r.$$is_array?r:($=v["$coerce_to?"](r,c("Array"),"to_ary"),$!==d||($=v["$coerce_to?"](r,c("Array"),"to_a"),$!==d)?$:[r])}),Z(h,"$at_exit",function n(){var r=n.$$p||d,$=d;return ne.__at_exit__==null&&(ne.__at_exit__=d),n.$$p=null,ne.__at_exit__=t($=ne.__at_exit__)?$:[],ne.__at_exit__["$<<"](r),r}),Z(h,"$caller",function(r,$){r==null&&(r=1),$==null&&($=d);var s,u;s=new Error().$backtrace(),u=[];for(var w=r+1,I=s.length;w<I;w++)s[w].match(/runtime\.js/)||u.push(s[w]);return $!=d&&(u=u.slice(0,$)),u},-1),Z(h,"$caller_locations",function(r){var $,s,u=this;return $=O(arguments),s=$,k(k(u,"caller",C(s)),"map",[],function(I){return I==null&&(I=d),c(c(c("Thread"),"Backtrace"),"Location").$new(I)})},-1),Z(h,"$class",function(){var r=this;return r.$$class}),Z(h,"$copy_instance_variables",function(r){var $=this,s=Object.keys(r),u,w,I;for(u=0,w=s.length;u<w;u++)I=s[u],I.charAt(0)!=="$"&&r.hasOwnProperty(I)&&($[I]=r[I])}),Z(h,"$copy_singleton_methods",function(r){var $=this,s,u,w,I;if(r.hasOwnProperty("$$meta")&&r.$$meta!==null){var D=e.get_singleton_class(r),S=e.get_singleton_class($);for(w=Object.getOwnPropertyNames(D.$$prototype),s=0,I=w.length;s<I;s++)u=w[s],e.is_method(u)&&(S.$$prototype[u]=D.$$prototype[u]);S.$$const=Object.assign({},D.$$const),Object.setPrototypeOf(S.$$prototype,Object.getPrototypeOf(D.$$prototype))}for(s=0,w=Object.getOwnPropertyNames(r),I=w.length;s<I;s++)u=w[s],u.charAt(0)==="$"&&u.charAt(1)!=="$"&&r.hasOwnProperty(u)&&($[u]=r[u])}),Z(h,"$clone",function(r){var $,s=this,u=d;return r=P(r),$=W(r,"freeze"),$==null&&($=d),t($["$nil?"]())||M($,!0)||M($,!1)||s.$raise(o("ArgumentError"),"unexpected value for freeze: "+$.$class()),u=s.$class().$allocate(),u.$copy_instance_variables(s),u.$copy_singleton_methods(s),u.$initialize_clone(s,new Map([["freeze",$]])),(M($,!0)||t($["$nil?"]())&&t(s["$frozen?"]()))&&u.$freeze(),u},-1),Z(h,"$initialize_clone",function(r,$){var s=this;return $=P($),W($,"freeze"),s.$initialize_copy(r),s},-2),Z(h,"$define_singleton_method",function n(r,$){var s=n.$$p||d,u=this;return n.$$p=null,k(u.$singleton_class(),"define_method",[r,$],s.$to_proc())},-2),Z(h,"$dup",function(){var r=this,$=d;return $=r.$class().$allocate(),$.$copy_instance_variables(r),$.$initialize_dup(r),$}),Z(h,"$initialize_dup",function(r){var $=this;return $.$initialize_copy(r)}),Z(h,"$enum_for",function n(r,$){var s=n.$$p||d,u,w,I,D=this;return n.$$p=null,u=O(arguments),u.length>0&&(w=u.shift()),w==null&&(w="each"),I=u,k(c("Enumerator"),"for",[D,w].concat(C(I)),s.$to_proc())},-1),Z(h,"$equal?",function(r){var $=this;return $===r}),Z(h,"$exit",function(r){var $=d,s=d;for(ne.__at_exit__==null&&(ne.__at_exit__=d),r==null&&(r=!0),ne.__at_exit__=t($=ne.__at_exit__)?$:[];!t(ne.__at_exit__["$empty?"]());)s=ne.__at_exit__.$pop(),s.$call();return r.$$is_boolean?r=r?0:1:r=l(r,c("Integer"),"to_int"),e.exit(r),d},-1),Z(h,"$extend",function(r){var $,s,u=this;$=O(arguments),s=$,s.length==0&&u.$raise(c("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),X(u);for(var w=u.$singleton_class(),I=s.length-1;I>=0;I--){var D=s[I];D.$$is_module||Q.$raise(c("TypeError"),"wrong argument type "+D.$class()+" (expected Module)"),D.$append_features(w),D.$extend_object(u),D.$extended(u)}return u},-1),Z(h,"$freeze",function(){var r=this;return t(r["$frozen?"]())?r:typeof r=="object"?(z(r),Y(r)):r}),Z(h,"$frozen?",function(){var r=this;switch(typeof r){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return r.$$frozen||!1;default:return!1}}),Z(h,"$gets",function(r){var $,s;return ne.stdin==null&&(ne.stdin=d),$=O(arguments),s=$,k(ne.stdin,"gets",C(s))},-1),Z(h,"$hash",function(){var r=this;return r.$__id__()}),Z(h,"$initialize_copy",$e(d));var i=[];return Z(h,"$inspect",function(){var r=this,$=d,s=d,u=d,w=d;return function(){try{try{return $="",s=r.$__id__(),t(i["$include?"](s))?$=" ...":(i["$<<"](s),u=!0,k(r.$instance_variables(),"each",[],function I(D){var S=I.$$s==null?this:I.$$s,j=d,re=d;return D==null&&(D=d),j=S.$instance_variable_get(D),re=o("Opal").$inspect(j),$=L($," "+D+"="+re)},{$$s:r})),"#<"+r.$class()+":0x"+s.$to_s(16)+$+">"}catch(I){if(e.rescue(I,[o("StandardError")])){w=I;try{return"#<"+r.$class()+":0x"+s.$to_s(16)+">"}finally{e.pop_exception(I)}}else throw I}}finally{t(u)&&i.$pop()}}()}),Z(h,"$instance_of?",function(r){var $=this;return!r.$$is_class&&!r.$$is_module&&Q.$raise(c("TypeError"),"class or module required"),$.$$class===r}),Z(h,"$instance_variable_defined?",function(r){var $=this;return r=v["$instance_variable_name!"](r),e.hasOwnProperty.call($,r.substr(1))}),Z(h,"$instance_variable_get",function(r){var $=this;r=v["$instance_variable_name!"](r);var s=$[e.ivar(r.substr(1))];return s??d}),Z(h,"$instance_variable_set",function(r,$){var s=this;return X(s),r=v["$instance_variable_name!"](r),s[e.ivar(r.substr(1))]=$}),Z(h,"$remove_instance_variable",function(r){var $=this;r=v["$instance_variable_name!"](r);var s=e.ivar(r.substr(1)),u;return $.hasOwnProperty(s)?(u=$[s],delete $[s],u):Q.$raise(c("NameError"),"instance variable "+r+" not defined")}),Z(h,"$instance_variables",function(){var r=this,$=[];return p(r,function(s){s.substr(-1)==="$"&&(s=s.slice(0,s.length-1)),$.push("@"+s)}),$}),Z(h,"$Integer",function(r,$,s){var u,w,I,D;u=O(arguments,1),w=E(u),w=P(w),u.length>0&&(I=u.shift()),D=W(w,"exception"),D==null&&(D=!0);var S,j,re;if(D=t(D),!r.$$is_string){if(I!==void 0)if(D)Q.$raise(c("ArgumentError"),"base specified for non string value");else return d;if(r===d)if(D)Q.$raise(c("TypeError"),"can't convert nil into Integer");else return d;if(r.$$is_number){if(r===1/0||r===-1/0||isNaN(r))if(D)Q.$raise(c("FloatDomainError"),r);else return d;return Math.floor(r)}if(r["$respond_to?"]("to_int")&&(S=r.$to_int(),e.is_a(S,c("Integer")))||r["$respond_to?"]("to_i")&&(S=r.$to_i(),e.is_a(S,c("Integer"))))return S;if(D)Q.$raise(c("TypeError"),"can't convert "+r.$class()+" into Integer");else return d}if(r==="0")return 0;if(I===void 0)I=0;else if(I=l(I,c("Integer"),"to_int"),I===1||I<0||I>36)if(D)Q.$raise(c("ArgumentError"),"invalid radix "+I);else return d;if(j=r.toLowerCase(),j=j.replace(/(\d)_(?=\d)/g,"$1"),j=j.replace(/^(\s*[+-]?)(0[bodx]?)/,function(oe,le,_e){switch(_e){case"0b":if(I===0||I===2)return I=2,le;case"0":case"0o":if(I===0||I===8)return I=8,le;case"0d":if(I===0||I===10)return I=10,le;case"0x":if(I===0||I===16)return I=16,le}if(D)Q.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return d}),I=I===0?10:I,re="0-"+(I<=10?I-1:"9a-"+String.fromCharCode(97+(I-11))),!new RegExp("^\\s*[+-]?["+re+"]+\\s*$").test(j))if(D)Q.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return d;if(S=parseInt(j,I),isNaN(S))if(D)Q.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return d;return S},-2),Z(h,"$Float",function(r,$){var s;$=P($),s=W($,"exception"),s==null&&(s=!0);var u;if(s=t(s),r===d)if(s)Q.$raise(c("TypeError"),"can't convert nil into Float");else return d;if(r.$$is_string){if(u=r.toString(),u=u.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(u))return Q.$Integer(u);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(u))if(s)Q.$raise(c("ArgumentError"),'invalid value for Float(): "'+r+'"');else return d;return parseFloat(u)}return s?v["$coerce_to!"](r,c("Float"),"to_f"):l(r,c("Float"),"to_f")},-2),Z(h,"$Hash",function(r){return t(r["$nil?"]())||M(r,[])?new Map:q(c("Hash"),r)?r:v["$coerce_to!"](r,c("Hash"),"to_hash")}),Z(h,"$is_a?",function(r){var $=this;return!r.$$is_class&&!r.$$is_module&&Q.$raise(c("TypeError"),"class or module required"),e.is_a($,r)}),Z(h,"$itself",B),Z(h,"$lambda",function n(){var r=n.$$p||d;return n.$$p=null,e.lambda(r)}),Z(h,"$load",function(r){return r=v["$coerce_to!"](r,c("String"),"to_str"),e.load(r)}),Z(h,"$loop",function n(){var r=n.$$p||d,$=this,s=d;if(n.$$p=null,r===d)return k($,"enum_for",["loop"],function(){return c(c("Float"),"INFINITY")});for(;t(!0);)try{e.yieldX(r,[])}catch(u){if(e.rescue(u,[c("StopIteration")])){s=u;try{return s.$result()}finally{e.pop_exception(u)}}else throw u}return $}),Z(h,"$nil?",$e(!1)),Z(h,"$printf",function(r){var $,s,u=this,w=d;return ne.stdout==null&&(ne.stdout=d),$=O(arguments),s=$,t(s["$empty?"]())||(w=t(s[0].$$is_string)?ne.stdout:s.$shift(),w.$write(k(u,"format",C(s)))),d},-1),Z(h,"$proc",function n(){var r=n.$$p||d;return n.$$p=null,t(r)||Q.$raise(c("ArgumentError"),"tried to create Proc object without a block"),r.$$is_lambda=!1,r}),Z(h,"$puts",function(r){var $,s;return ne.stdout==null&&(ne.stdout=d),$=O(arguments),s=$,k(ne.stdout,"puts",C(s))},-1),Z(h,"$p",function(r){var $,s;return $=O(arguments),s=$,k(s,"each",[],function(w){return ne.stdout==null&&(ne.stdout=d),w==null&&(w=d),ne.stdout.$puts(w.$inspect())}),t(F(s.$length(),1))?s["$[]"](0):s},-1),Z(h,"$print",function(r){var $,s;return ne.stdout==null&&(ne.stdout=d),$=O(arguments),s=$,k(ne.stdout,"print",C(s))},-1),Z(h,"$readline",function(r){var $,s;return ne.stdin==null&&(ne.stdin=d),$=O(arguments),s=$,k(ne.stdin,"readline",C(s))},-1),Z(h,"$warn",function(r,$){var s,u,w,I,D,S,j=this,re=d;return ne.VERBOSE==null&&(ne.VERBOSE=d),ne.stderr==null&&(ne.stderr=d),s=O(arguments),u=E(s),u=P(u),w=s,I=W(u,"uplevel"),I==null&&(I=d),t(I)&&(I=v["$coerce_to!"](I,c("Integer"),"to_str"),t(A(I,0))&&Q.$raise(c("ArgumentError"),"negative level ("+I+")"),re=(D=(S=j.$caller(L(I,1),1).$first(),S===d||S==null?d:S.$split(":in `")),D===d||D==null?d:D.$first()),t(re)&&(re=""+re+": "),w=k(w,"map",[],function(le){return le==null&&(le=d),""+re+"warning: "+le})),t(ne.VERBOSE["$nil?"]())||t(w["$empty?"]())?d:k(ne.stderr,"puts",C(w))},-1),Z(h,"$raise",function(r,$,s){throw ne["!"]==null&&(ne["!"]=d),$==null&&($=d),s==null&&(s=d),r==null&&ne["!"]!==d?ne["!"]:(r==null?r=c("RuntimeError").$new(""):g(r,"$to_str")?r=c("RuntimeError").$new(r.$to_str()):r.$$is_class&&g(r,"$exception")?r=r.$exception($):r.$$is_exception||(r=c("TypeError").$new("exception class/object expected")),s!==d&&r.$set_backtrace(s),ne["!"]!==d&&e.exceptions.push(ne["!"]),ne["!"]=r,r)},-1),Z(h,"$rand",function(r){return r===void 0?c(c("Random"),"DEFAULT").$rand():(r.$$is_number&&(r<0&&(r=Math.abs(r)),r%1!==0&&(r=r.$to_i()),r===0&&(r=void 0)),c(c("Random"),"DEFAULT").$rand(r))},-1),Z(h,"$respond_to?",function(r,$){var s=this;$==null&&($=!1);var u=s[H(r)];return typeof u=="function"&&!u.$$stub?!0:s["$respond_to_missing?"].$$pristine===!0?!1:s["$respond_to_missing?"](r,$)},-2),Z(h,"$respond_to_missing?",function(r,$){return!1},-2),v.$pristine(h,"respond_to?","respond_to_missing?"),Z(h,"$require",function(r){return typeof r!="string"&&e.String&&e.Array&&(r=v["$coerce_to!"](r,c("String"),"to_str")),e.require(r)}),Z(h,"$require_relative",function(r){return v["$try_convert!"](r,c("String"),"to_str"),r=c("File").$expand_path(c("File").$join(e.current_file,"..",r)),e.require(r)}),Z(h,"$require_tree",function(r,$){var s;$=P($),s=W($,"autoload"),s==null&&(s=!1);var u=[];r=c("File").$expand_path(r),r=e.normalize(r),r==="."&&(r="");for(var w in e.modules)w["$start_with?"](r)&&(s?u.push([w,!0]):u.push([w,e.require(w)]));return u},-2),Z(h,"$singleton_class",function(){var r=this;return e.get_singleton_class(r)}),Z(h,"$sleep",function(r){r==null&&(r=d),r===d&&Q.$raise(c("TypeError"),"can't convert NilClass into time interval"),r.$$is_number||Q.$raise(c("TypeError"),"can't convert "+r.$class()+" into time interval"),r<0&&Q.$raise(c("ArgumentError"),"time interval must be positive");for(var $=e.global.performance?function(){return performance.now()}:function(){return new Date},s=$();$()-s<=r*1e3;);return Math.round(r)},-1),Z(h,"$srand",function(r){return r==null&&(r=o("Random").$new_seed()),c("Random").$srand(r)},-1),Z(h,"$String",function(r){var $=d;return t($=v["$coerce_to?"](r,c("String"),"to_str"))?$:v["$coerce_to!"](r,c("String"),"to_s")}),Z(h,"$tap",function n(){var r=n.$$p||d,$=this;return n.$$p=null,e.yield1(r,$),$}),Z(h,"$to_proc",B),Z(h,"$to_s",function(){var r=this;return"#<"+r.$class()+":0x"+r.$__id__().$to_s(16)+">"}),Z(h,"$catch",function n(r){var $=n.$$p||d,s=d,u=d;n.$$p=null,r==null&&(r=d);try{return r=t(s=r)?s:a.$new(),e.yield1($,r)}catch(w){if(e.rescue(w,[c("UncaughtThrowError")])){u=w;try{return M(u.$tag(),r)?u.$value():Q.$raise()}finally{e.pop_exception(w)}}else throw w}},-1),Z(h,"$throw",function(r,$){return $==null&&($=d),Q.$raise(c("UncaughtThrowError").$new(r,$))},-2),Z(h,"$open",function n(r){var $=n.$$p||d,s,u;return n.$$p=null,s=O(arguments),u=s,k(c("File"),"open",C(u),$.$to_proc())},-1),Z(h,"$yield_self",function n(){var r=n.$$p||d,$=this;return n.$$p=null,r===d?k($,"enum_for",["yield_self"],$e(1)):e.yield1(r,$)}),m(h,"fail","raise"),m(h,"kind_of?","is_a?"),m(h,"object_id","__id__"),m(h,"public_send","__send__"),m(h,"send","__send__"),m(h,"then","yield_self"),m(h,"to_enum","enum_for")}("::",y),function(J,V){var h=T(J,V,"Object");return delete a.$$prototype.$require,h.$include(Q)}("::",null)};Opal.modules["corelib/main"]=function(e){var t=e.return_val,l=e.def,g=e.Object,v=e.slice,X=e.Kernel,Y=e.top;return e.nil,e.add_stubs("include,raise"),function(z,H){return l(z,"$to_s",t("main")),l(z,"$include",function(U){return g.$include(U)}),l(z,"$autoload",function(U){var $e,Z;return $e=v(arguments),Z=$e,e.Object.$autoload.apply(e.Object,Z)},-1),l(z,"$using",function(U){return X.$raise("main.using is permitted only at toplevel")})}(e.get_singleton_class(Y))};Opal.modules["corelib/error/errno"]=function(e){var t=e.module,l=e.truthy,g=e.rb_plus,v=e.send2,X=e.find_super,Y=e.def,z=e.klass,H=e.nil,p=e.$$$;return e.add_stubs("+,errno,class,attr_reader"),function(U,$e){var Z=t(U,"Errno"),Q=H,ne=H;Q=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],ne=H;var O;for(O=0;O<Q.length;O++)(function(){var k=Q[O][0],C=Q[O][1],P=Q[O][2];ne=e.klass(Z,e.SystemCallError,k),ne.errno=P,function(W,M){return Y(W,"$new",function L(E){L.$$p;var q=this,B=H;return L.$$p=null,E==null&&(E=H),B=C,l(E)&&(B=g(B," - "+E)),v(q,X(q,"new",L,!1,!0),"new",[B],null)},-1)}(e.get_singleton_class(ne))})()}("::"),function(U,$e,Z){var Q=z(U,$e,"SystemCallError");return Y(Q,"$errno",function(){var O=this;return O.$class().$errno()}),function(ne,O){return ne.$attr_reader("errno")}(e.get_singleton_class(Q))}("::",p("StandardError"))};Opal.modules["corelib/error"]=function(e){var t=e.klass,l=e.slice,g=e.gvars,v=e.defs,X=e.send,Y=e.to_a,z=e.def,H=e.send2,p=e.find_super,U=e.truthy,$e=e.Kernel,Z=e.not,Q=e.rb_plus,ne=e.eqeq,O=e.Object,k=e.ensure_kwargs,C=e.hash_get,P=e.module,W=[],M=e.nil,L=e.$$$;return e.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(E,q,B){var F=t(E,q,"Exception"),A=[F].concat(B),a=e.$r(A),m=F.$$prototype;m.message=M,e.prop(F.$$prototype,"$$is_exception",!0);var T;Error.stackTraceLimit=100,v(F,"$new",function(c){var J,V,h=this;g["!"]==null&&(g["!"]=M),J=l(arguments),V=J;var _=V.length>0?V[0]:M,o=new h.$$constructor(_);return o.name=h.$$name,o.message=_,o.cause=g["!"],e.send(o,o.$initialize,V),e.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace(o,T),o},-1),T=F.$new,v(F,"$exception",function(c){var J,V,h=this;return J=l(arguments),V=J,X(h,"new",Y(V))},-1),z(F,"$initialize",function(c){var J,V,h=this;return J=l(arguments),V=J,h.message=V.length>0?V[0]:M},-1),z(F,"$copy_instance_variables",function d(c){var J=d.$$p||M,V=this;d.$$p=null,H(V,p(V,"copy_instance_variables",d,!1,!0),"copy_instance_variables",[c],J),V.message=c.message,V.cause=c.cause,V.stack=c.stack});function y(d){for(var c=[],J,V=0;V<d.length;V++){var h=d[V];!h||!h.$$is_string||((J=h.match(/^    at (.*?) \((.*?)\)$/))?c.push(J[2]+":in `"+J[1]+"'"):(J=h.match(/^    at (.*?)$/))?c.push(J[1]+":in `undefined'"):(J=h.match(/^  from (.*?)$/))?c.push(J[1]):(J=h.match(/^(.*?)@(.*?)$/))&&c.push(J[2]+":in `"+J[1]+"'"))}return c}return z(F,"$backtrace",function(){var c=this;if(c.backtrace)return c.backtrace;var J=c.stack;return typeof J<"u"&&J.$$is_string?c.backtrace=y(J.split(`
`)):J?c.backtrace=y(J):[]}),z(F,"$backtrace_locations",function(){var c,J=this;return J.backtrace_locations||(J.backtrace_locations=(c=J.$backtrace(),c===M||c==null?M:X(c,"map",[],function(h){return h==null&&(h=M),L(L(L("Thread"),"Backtrace"),"Location").$new(h)}))),J.backtrace_locations}),z(F,"$cause",function(){var c=this;return c.cause||M}),z(F,"$exception",function(c){var J=this;if(c==null&&(c=M),c===M||J===c)return J;var V=J.$clone();return V.message=c,J.backtrace&&(V.backtrace=J.backtrace.$dup()),V.stack=J.stack,V.cause=J.cause,V},-1),z(F,"$message",function(){var c=this;return c.$to_s()}),z(F,"$full_message",function(c){var J,V=this,h=M,_=M,o=M,i=M,n=M,r=M,$=M,s=M,u=M;return g.stderr==null&&(g.stderr=M),c==null&&(c=M),U(a("Hash","skip_raise")?"constant":M)?(c=new Map([["highlight",g.stderr["$tty?"]()],["order","top"]]).$merge(U(h=c)?h:new Map),J=[c["$[]"]("highlight"),c["$[]"]("order")],_=J[0],o=J[1],U([!0,!1]["$include?"](_))||$e.$raise(L("ArgumentError"),"expected true or false as highlight: "+_),U(["top","bottom"]["$include?"](o))||$e.$raise(L("ArgumentError"),"expected :top or :bottom as order: "+o),U(_)?(i="\x1B[1;4m",n="\x1B[1m",r="\x1B[m"):i=n=r="",$=V.$backtrace().$dup(),(Z($)||U($["$empty?"]()))&&($=V.$caller()),s=$.$shift(),u=""+s+": ",u=Q(u,""+n+V.$to_s()+" ("+i+V.$class()+r+n+")"+r+`
`),u=Q(u,X($,"map",[],function(I){return I==null&&(I=M),"	from "+I+`
`}).$join()),U(V.$cause())&&(u=Q(u,V.$cause().$full_message(new Map([["highlight",_]])))),ne(o,"bottom")&&(u=u.$split(`
`).$reverse().$join(`
`),u=Q(""+n+"Traceback"+r+` (most recent call last):
`,u)),u):""+V.message+`
`+V.stack},-1),z(F,"$inspect",function(){var c=this,J=M;return J=c.$to_s(),U(J["$empty?"]())?c.$class().$to_s():"#<"+c.$class().$to_s()+": "+c.$to_s()+">"}),z(F,"$set_backtrace",function(c){var J=this,V=!0,h,_;if(c===M)J.backtrace=M,J.stack="";else if(c.$$is_string)J.backtrace=[c],J.stack="  from "+c;else{if(c.$$is_array){for(h=0,_=c.length;h<_;h++)if(!c[h].$$is_string){V=!1;break}}else V=!1;V===!1&&$e.$raise(L("TypeError"),"backtrace must be Array of String"),J.backtrace=c,J.stack=X(c,"map",[],function(i){return i==null&&(i=M),Q("  from ",i)}).join(`
`)}return c}),z(F,"$to_s",function(){var c=this,J=M,V=M;return U(J=U(V=c.message)?c.message.$to_s():V)?J:c.$class().$to_s()})}("::",Error,W),t("::",L("Exception"),"ScriptError"),t("::",L("ScriptError"),"SyntaxError"),t("::",L("ScriptError"),"LoadError"),t("::",L("ScriptError"),"NotImplementedError"),t("::",L("Exception"),"SystemExit"),t("::",L("Exception"),"NoMemoryError"),t("::",L("Exception"),"SignalException"),t("::",L("SignalException"),"Interrupt"),t("::",L("Exception"),"SecurityError"),t("::",L("Exception"),"SystemStackError"),t("::",L("Exception"),"StandardError"),t("::",L("StandardError"),"EncodingError"),t("::",L("StandardError"),"ZeroDivisionError"),t("::",L("StandardError"),"NameError"),t("::",L("NameError"),"NoMethodError"),t("::",L("StandardError"),"RuntimeError"),t("::",L("RuntimeError"),"FrozenError"),t("::",L("StandardError"),"LocalJumpError"),t("::",L("StandardError"),"TypeError"),t("::",L("StandardError"),"ArgumentError"),t("::",L("ArgumentError"),"UncaughtThrowError"),t("::",L("StandardError"),"IndexError"),t("::",L("IndexError"),"StopIteration"),t("::",L("StopIteration"),"ClosedQueueError"),t("::",L("IndexError"),"KeyError"),t("::",L("StandardError"),"RangeError"),t("::",L("RangeError"),"FloatDomainError"),t("::",L("StandardError"),"IOError"),t("::",L("IOError"),"EOFError"),t("::",L("StandardError"),"SystemCallError"),t("::",L("StandardError"),"RegexpError"),t("::",L("StandardError"),"ThreadError"),t("::",L("StandardError"),"FiberError"),O.$autoload("Errno","corelib/error/errno"),function(E,q){var B=t(E,q,"FrozenError");return B.$attr_reader("receiver"),z(B,"$initialize",function F(A,a){var m;F.$$p;var T=this;return F.$$p=null,a=k(a),m=C(a,"receiver"),m==null&&(m=M),H(T,p(T,"initialize",F,!1,!0),"initialize",[A],null),T.receiver=m},-2)}("::",L("RuntimeError")),function(E,q){var B=t(E,q,"UncaughtThrowError"),F=B.$$prototype;return F.tag=M,B.$attr_reader("tag","value"),z(B,"$initialize",function A(a,m){A.$$p;var T=this;return A.$$p=null,m==null&&(m=M),T.tag=a,T.value=m,H(T,p(T,"initialize",A,!1,!0),"initialize",["uncaught throw "+T.tag.$inspect()],null)},-2)}("::",L("ArgumentError")),function(E,q){var B=t(E,q,"NameError");return B.$attr_reader("name"),z(B,"$initialize",function F(A,a){F.$$p;var m=this;return F.$$p=null,a==null&&(a=M),H(m,p(m,"initialize",F,!1,!0),"initialize",[A],null),m.name=a},-2)}("::",null),function(E,q){var B=t(E,q,"NoMethodError");return B.$attr_reader("args"),z(B,"$initialize",function F(A,a,m){F.$$p;var T=this;return F.$$p=null,a==null&&(a=M),m==null&&(m=[]),H(T,p(T,"initialize",F,!1,!0),"initialize",[A,a],null),T.args=m},-2)}("::",null),function(E,q){var B=t(E,q,"StopIteration");return B.$attr_reader("result")}("::",null),function(E,q){var B=t(E,q,"KeyError"),F=B.$$prototype;return F.receiver=F.key=M,z(B,"$initialize",function A(a,m){var T,y;A.$$p;var d=this;return A.$$p=null,m=k(m),T=C(m,"receiver"),T==null&&(T=M),y=C(m,"key"),y==null&&(y=M),H(d,p(d,"initialize",A,!1,!0),"initialize",[a],null),d.receiver=T,d.key=y},-2),z(B,"$receiver",function(){var a=this,m=M;return U(m=a.receiver)?m:$e.$raise(L("ArgumentError"),"no receiver is available")}),z(B,"$key",function(){var a=this,m=M;return U(m=a.key)?m:$e.$raise(L("ArgumentError"),"no key is available")})}("::",null),function(E,q){var B=t(E,q,"LocalJumpError");return B.$attr_reader("exit_value","reason"),z(B,"$initialize",function F(A,a,m){F.$$p;var T=this;return F.$$p=null,a==null&&(a=M),m==null&&(m="noreason"),H(T,p(T,"initialize",F,!1,!0),"initialize",[A],null),T.exit_value=a,T.reason=m},-2)}("::",null),function(E,q){var B=P(E,"JS"),F=[B].concat(q);return t(F[0],null,"Error"),M}("::",W)};Opal.modules["corelib/constants"]=function(e){var t=e.const_set;e.nil;var l=e.$$$;return t("::","RUBY_PLATFORM","opal"),t("::","RUBY_ENGINE","opal"),t("::","RUBY_VERSION","3.2.0"),t("::","RUBY_ENGINE_VERSION","1.8.2"),t("::","RUBY_RELEASE_DATE","2023-11-23"),t("::","RUBY_PATCHLEVEL",0),t("::","RUBY_REVISION","0"),t("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),t("::","RUBY_DESCRIPTION","opal "+l("RUBY_ENGINE_VERSION")+" ("+l("RUBY_RELEASE_DATE")+" revision "+l("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(e){var t=e.Object;return e.nil,e.add_stubs("require"),t.$require("corelib/runtime"),t.$require("corelib/helpers"),t.$require("corelib/module"),t.$require("corelib/class"),t.$require("corelib/basic_object"),t.$require("corelib/kernel"),t.$require("corelib/main"),t.$require("corelib/error"),t.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(e){var t=e.klass,l=e.Kernel,g=e.def,v=e.return_val,X=e.ensure_kwargs,Y=e.hash_get,z=e.NilClass,H=e.slice,p=e.truthy,U=e.rb_gt,$e=e.alias,Z=e.nil,Q=e.$$$;return e.add_stubs("raise,name,new,>,length,Rational,to_i"),function(ne,O,k){var C=t(ne,O,"NilClass");return C.$$prototype.$$meta=C,function(P,W){return g(P,"$allocate",function(){var L=this;return l.$raise(Q("TypeError"),"allocator undefined for "+L.$name())}),e.udef(P,"$new"),Z}(e.get_singleton_class(C)),g(C,"$!",v(!0)),g(C,"$&",v(!1)),g(C,"$|",function(W){return W!==!1&&W!==Z}),g(C,"$^",function(W){return W!==!1&&W!==Z}),g(C,"$==",function(W){return W===Z}),g(C,"$dup",v(Z)),g(C,"$clone",function(W){return W=X(W),Y(W,"freeze"),Z},-1),g(C,"$inspect",v("nil")),g(C,"$nil?",v(!0)),g(C,"$singleton_class",function(){return z}),g(C,"$to_a",function(){return[]}),g(C,"$to_h",function(){return new Map}),g(C,"$to_i",v(0)),g(C,"$to_s",v("")),g(C,"$to_c",function(){return Q("Complex").$new(0,0)}),g(C,"$rationalize",function(W){var M,L;return M=H(arguments),L=M,p(U(L.$length(),1))&&l.$raise(Q("ArgumentError")),l.$Rational(0,1)},-1),g(C,"$to_r",function(){return l.$Rational(0,1)}),g(C,"$instance_variables",function(){return[]}),$e(C,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(e){var t=e.klass,l=e.Kernel,g=e.def,v=e.return_self,X=e.ensure_kwargs,Y=e.hash_get,z=e.slice,H=e.truthy,p=e.send2,U=e.find_super,$e=e.to_a,Z=e.alias,Q=e.nil,ne=e.$$$;return e.add_stubs("raise,name,==,to_s,__id__"),function(O,k,C){var P=t(O,k,"Boolean");e.prop(P.$$prototype,"$$is_boolean",!0);for(var W=["$$class","$$meta"],M=0;M<W.length;M++)Object.defineProperty(P.$$prototype,W[M],{configurable:!0,enumerable:!1,get:function(){return this==!0?e.TrueClass:this==!1?e.FalseClass:e.Boolean}});return Object.defineProperty(P.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:Q}}),function(L,E){return g(L,"$allocate",function(){var B=this;return l.$raise(ne("TypeError"),"allocator undefined for "+B.$name())}),e.udef(L,"$new"),Q}(e.get_singleton_class(P)),g(P,"$__id__",function(){var E=this;return E.valueOf()?2:0}),g(P,"$!",function(){var E=this;return E!=!0}),g(P,"$&",function(E){var q=this;return q==!0?E!==!1&&E!==Q:!1}),g(P,"$|",function(E){var q=this;return q==!0?!0:E!==!1&&E!==Q}),g(P,"$^",function(E){var q=this;return q==!0?E===!1||E===Q:E!==!1&&E!==Q}),g(P,"$==",function(E){var q=this;return q==!0===E.valueOf()}),g(P,"$singleton_class",function(){var E=this;return E.$$meta}),g(P,"$to_s",function(){var E=this;return E==!0?"true":"false"}),g(P,"$dup",v),g(P,"$clone",function(E){var q=this;return E=X(E),Y(E,"freeze"),q},-1),g(P,"$method_missing",function L(E,q){var B=L.$$p||Q,F,A,a=this;L.$$p=null,F=z(arguments,1),A=F;var m=a.$$class.$$prototype[e.jsid(E)];return H(typeof m<"u"&&!m.$$stub)||p(a,U(a,"method_missing",L,!1,!0),"method_missing",[E].concat($e(A)),B),e.send(a,m,A,B)},-2),g(P,"$respond_to_missing?",function(E,q){var B=this,F=B.$$class.$$prototype[e.jsid(E)];return typeof F<"u"&&!F.$$stub},-2),Z(P,"eql?","=="),Z(P,"equal?","=="),Z(P,"inspect","to_s"),Z(P,"object_id","__id__")}("::",Boolean),t("::",ne("Boolean"),"TrueClass"),t("::",ne("Boolean"),"FalseClass"),Q};Opal.modules["corelib/comparable"]=function(e){var t=e.truthy,l=e.module,g=e.rb_gt,v=e.rb_lt,X=e.eqeqeq,Y=e.Kernel,z=e.def,H=e.nil,p=e.$$$;return e.add_stubs(">,<,===,raise,class,<=>,equal?"),function(U){var $e=l(U,"Comparable"),Z=H;function Q(k){return e.is_a(k,e.Integer)?k:g(k,0)?1:v(k,0)?-1:0}function ne(k,C){var P;X(H,Z=C)||X(!0,Z)||X(!1,Z)||X(p("Integer"),Z)||X(p("Float"),Z)?P=C.$inspect():P=C.$$class,Y.$raise(p("ArgumentError"),"comparison of "+k.$class()+" with "+P+" failed")}function O(k,C){var P=k["$<=>"](C);return t(P)||ne(k,C),Q(P)}return z($e,"$==",function(C){var P=this,W=H;return t(P["$equal?"](C))?!0:P["$<=>"]==e.Kernel["$<=>"]?!1:P.$$comparable?(P.$$comparable=!1,!1):t(W=P["$<=>"](C))?Q(W)==0:!1}),z($e,"$>",function(C){var P=this;return O(P,C)>0}),z($e,"$>=",function(C){var P=this;return O(P,C)>=0}),z($e,"$<",function(C){var P=this;return O(P,C)<0}),z($e,"$<=",function(C){var P=this;return O(P,C)<=0}),z($e,"$between?",function(C,P){var W=this;return!(t(v(W,C))||t(g(W,P)))}),z($e,"$clamp",function(C,P){var W=this;P==null&&(P=H);var M,L;if(P===H&&(e.is_a(C,e.Range)||Y.$raise(p("TypeError"),"wrong argument type "+C.$class()+" (expected Range)"),L=C.excl,P=C.end,C=C.begin,P!==H&&L&&Y.$raise(p("ArgumentError"),"cannot clamp with an exclusive range")),C!==H&&P!==H&&O(C,P)>0&&Y.$raise(p("ArgumentError"),"min argument must be smaller than max argument"),C!==H){if(M=O(W,C),M==0)return W;if(M<0)return C}return P!==H&&(M=O(W,P),M>0)?P:W},-2)}("::")};Opal.modules["corelib/regexp"]=function(e){var t=e.coerce_to,l=e.prop,g=e.freeze,v=e.klass,X=e.const_set,Y=e.send2,z=e.find_super,H=e.def,p=e.truthy,U=e.gvars,$e=e.slice,Z=e.Kernel,Q=e.Opal,ne=e.alias,O=e.send,k=e.regexp,C=e.rb_plus,P=e.ensure_kwargs,W=e.hash_get,M=e.rb_ge,L=e.to_a,E=e.eqeqeq,q=e.rb_minus,B=e.return_ivar,F=[],A=e.nil,a=e.$$$;return e.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),v("::",a("StandardError"),"RegexpError"),function(m,T,y){var d=v(m,T,"Regexp"),c=[d].concat(y),J=e.$r(c);return X(d,"IGNORECASE",1),X(d,"EXTENDED",2),X(d,"MULTILINE",4),e.prop(d.$$prototype,"$$is_regexp",!0),function(V,h){var _=[V].concat(h),o=e.$r(_);return H(V,"$allocate",function i(){var n=i.$$p||A,r=this,$=A;return i.$$p=null,$=Y(r,z(r,"allocate",i,!1,!0),"allocate",[],n),$.uninitialized=!0,$}),H(V,"$escape",function(n){return n=t(n,a("String"),"to_str"),e.escape_regexp(n)}),H(V,"$last_match",function(n){return U["~"]==null&&(U["~"]=A),n==null&&(n=A),p(n["$nil?"]())?U["~"]:p(U["~"])?U["~"]["$[]"](n):A},-1),H(V,"$union",function(n){var r,$,s=this;r=$e(arguments),$=r;var u,w,I,D,S;if($.length==0)return/(?!)/;if($.length==1&&$[0].$$is_regexp)return $[0];u=$[0].$$is_array,$.length>1&&u&&Z.$raise(a("TypeError"),"no implicit conversion of Array into String"),u&&($=$[0]),D=void 0,w=[];for(var j=0;j<$.length;j++)I=$[j],I.$$is_string?w.push(s.$escape(I)):I.$$is_regexp?(S=I.$options(),D!=null&&D!=S&&Z.$raise(a("TypeError"),"All expressions must use the same options"),D=S,w.push("("+I.source+")")):w.push(s.$escape(I.$to_str()));return s.$new(w.$join("|"),D)},-1),H(V,"$new",function(n,r){if(n.$$is_regexp)return new RegExp(n);if(n=Q["$coerce_to!"](n,a("String"),"to_str"),n.charAt(n.length-1)==="\\"&&n.charAt(n.length-2)!=="\\"&&Z.$raise(a("RegexpError"),"too short escape sequence: /"+n+"/"),n=n.replace("\\A","^").replace("\\z","$"),r===void 0||r["$!"]())return new RegExp(n);if(r.$$is_number){var $="";o("IGNORECASE")&r&&($+="i"),o("MULTILINE")&r&&($+="m"),r=$}else r="i";return new RegExp(n,r)},-2),ne(V,"compile","new"),ne(V,"quote","escape")}(e.get_singleton_class(d),c),H(d,"$==",function(h){var _=this;return h instanceof RegExp&&_.toString()===h.toString()}),H(d,"$===",function(h){var _=this;return _.$match(Q["$coerce_to?"](h,a("String"),"to_str"))!==A}),H(d,"$=~",function(h){var _=this,o=A;return U["~"]==null&&(U["~"]=A),p(o=_.$match(h))?U["~"].$begin(0):o}),H(d,"$freeze",function(){var h=this;return p(h["$frozen?"]())?h:(h.hasOwnProperty("$$g")||l(h,"$$g",null),h.hasOwnProperty("$$gm")||l(h,"$$gm",null),g(h))}),H(d,"$inspect",function(){var h=this,_=/^\/(.*)\/([^\/]*)$/,o=h.toString(),i=_.exec(o);if(i){for(var n=i[1],r=i[2],$=n.split(""),s=$.length,u=!1,w="",I=0;I<s;I++){var D=$[I];!u&&D=="/"&&(w=w.concat("\\")),w=w.concat(D),D=="\\"?u?u=!1:u=!0:u=!1}return"/"+w+"/"+r}else return o}),H(d,"$match",function V(h,_){var o=V.$$p||A,i=this;if(U["~"]==null&&(U["~"]=A),V.$$p=null,i.uninitialized&&Z.$raise(a("TypeError"),"uninitialized Regexp"),_===void 0){if(h===A)return U["~"]=A;var n=i.exec(t(h,a("String"),"to_str"));return n?(U["~"]=a("MatchData").$new(i,n),o===A?U["~"]:e.yield1(o,U["~"])):U["~"]=A}if(_=t(_,a("Integer"),"to_int"),h===A||(h=t(h,a("String"),"to_str"),_<0&&(_+=h.length,_<0)))return U["~"]=A;for(var r,$=e.global_regexp(i);;){if(r=$.exec(h),r===null)return U["~"]=A;if(r.index>=_)return U["~"]=a("MatchData").$new($,r),o===A?U["~"]:e.yield1(o,U["~"]);$.lastIndex=r.index+1}},-2),H(d,"$match?",function(h,_){var o=this;if(o.uninitialized&&Z.$raise(a("TypeError"),"uninitialized Regexp"),_===void 0)return h===A?!1:o.test(t(h,a("String"),"to_str"));if(_=t(_,a("Integer"),"to_int"),h===A||(h=t(h,a("String"),"to_str"),_<0&&(_+=h.length,_<0)))return!1;var i,n=e.global_regexp(o);return i=n.exec(h),!(i===null||i.index<_)},-2),H(d,"$names",function(){var h=this;return O(h.$source().$scan(k(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),H(d,"$named_captures",function(){var h=this;return O(O(O(h.$source().$scan(k(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function(o){return o==null&&(o=A),O(o,"map",[],function(n){return n==null&&(n=A),C(n.$last(),1)})})}),H(d,"$~",function(){var h=this;return U._==null&&(U._=A),h["$=~"](U._)}),H(d,"$source",function(){var h=this;return h.source}),H(d,"$options",function(){var h=this;h.uninitialized&&Z.$raise(a("TypeError"),"uninitialized Regexp");var _=0;return h.multiline&&(_|=J("MULTILINE")),h.ignoreCase&&(_|=J("IGNORECASE")),_}),H(d,"$casefold?",function(){var h=this;return h.ignoreCase}),ne(d,"eql?","=="),ne(d,"to_s","source")}("::",RegExp,F),function(m,T,y){var d=v(m,T,"MatchData"),c=[d].concat(y),J=e.$r(c),V=d.$$prototype;return V.matches=A,d.$attr_reader("post_match","pre_match","regexp","string"),H(d,"$initialize",function(_,o,i){var n,r=this;i=P(i),n=W(i,"no_matchdata"),n==null&&(n=!1),p(n)||(U["~"]=r),r.regexp=_,r.begin=o.index,r.string=o.input,r.pre_match=o.input.slice(0,o.index),r.post_match=o.input.slice(o.index+o[0].length),r.matches=[];for(var $=0,s=o.length;$<s;$++){var u=o[$];u==null?r.matches.push(A):r.matches.push(u)}},-3),H(d,"$match",function(_){var o=this,i=A;return p(i=o["$[]"](_))?i:p(_["$is_a?"](J("Integer")))&&p(M(_,o.$length()))?Z.$raise(a("IndexError"),"index "+_+" out of matches"):A}),H(d,"$match_length",function(_){var o,i=this;return o=i.$match(_),o===A||o==null?A:o.$length()}),H(d,"$[]",function(_){var o,i,n=this;return o=$e(arguments),i=o,i[0].$$is_string?(n.$regexp().$names()["$include?"](i["$[]"](0))["$!"]()&&Z.$raise(a("IndexError"),"undefined group name reference: "+i["$[]"](0)),n.$named_captures()["$[]"](i["$[]"](0))):O(n.matches,"[]",L(i))},-1),H(d,"$offset",function(_){var o=this;return _!==0&&Z.$raise(a("ArgumentError"),"MatchData#offset only supports 0th element"),[o.begin,o.begin+o.matches[_].length]}),H(d,"$==",function(_){var o=this,i=A,n=A,r=A,$=A;return E(a("MatchData"),_)?p(i=p(n=p(r=p($=o.string==_.string)?o.regexp.toString()==_.regexp.toString():$)?o.pre_match==_.pre_match:r)?o.post_match==_.post_match:n)?o.begin==_.begin:i:!1}),H(d,"$begin",function(_){var o=this;return _!==0&&Z.$raise(a("ArgumentError"),"MatchData#begin only supports 0th element"),o.begin}),H(d,"$end",function(_){var o=this;return _!==0&&Z.$raise(a("ArgumentError"),"MatchData#end only supports 0th element"),o.begin+o.matches[_].length}),H(d,"$captures",function(){var _=this;return _.matches.slice(1)}),H(d,"$named_captures",function(){var _=this,o=A;return o=_.$captures(),O(_.$regexp().$named_captures(),"transform_values",[],function(n){return n==null&&(n=A),o["$[]"](q(n.$last(),1))})}),H(d,"$names",function(){var _=this;return _.$regexp().$names()}),H(d,"$inspect",function(){var _=this,o="#<MatchData "+_.matches[0].$inspect();if(_.$regexp().$names()["$empty?"]())for(var i=1,n=_.matches.length;i<n;i++)o+=" "+i+":"+_.matches[i].$inspect();else O(_.$named_captures(),"each",[],function($,s){return $==null&&($=A),s==null&&(s=A),o+=" "+$+":"+s.$inspect()});return o+">"}),H(d,"$length",function(){var _=this;return _.matches.length}),H(d,"$to_a",B("matches")),H(d,"$to_s",function(){var _=this;return _.matches[0]}),H(d,"$values_at",function(_){var o,i,n=this;o=$e(arguments),i=o;var r,$,s,u=[];for(r=0;r<i.length;r++){if(i[r].$$is_range&&($=i[r].$to_a(),$.unshift(r,1),Array.prototype.splice.apply(i,$)),s=Q["$coerce_to!"](i[r],a("Integer"),"to_int"),s<0&&(s+=n.matches.length,s<0)){u.push(A);continue}u.push(n.matches[s])}return u},-1),ne(d,"eql?","=="),ne(d,"size","length")}(F[0],null,F)};Opal.modules["corelib/string"]=function(e){var t=e.coerce_to,l=e.respond_to,g=e.global_multiline_regexp,v=e.prop,X=e.opal32_init,Y=e.opal32_add,z=e.klass,H=e.send2,p=e.find_super,U=e.def,$e=e.Opal,Z=e.defs,Q=e.slice,ne=e.send,O=e.to_a,k=e.extract_kwargs,C=e.ensure_kwargs,P=e.hash_get,W=e.eqeqeq,M=e.Kernel,L=e.truthy,E=e.gvars,q=e.rb_divide,B=e.rb_plus,F=e.eqeq,A=e.alias,a=e.const_set,m=e.top,T=[],y=e.$r(T),d=e.nil,c=e.$$$;return e.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),m.$require("corelib/comparable"),m.$require("corelib/regexp"),function(J,V,h){var _=z(J,V,"String"),o=[_].concat(h),i=e.$r(o);_.$include(c("Comparable")),e.prop(_.$$prototype,"$$is_string",!0);var n=new Map;(function(){U(_,"$__id__",function $(){var s=$.$$p||d,u=this;if($.$$p=null,typeof u=="object")return H(u,p(u,"__id__",$,!1,!0),"__id__",[],s);if(n.has(u))return n.get(u);var w=e.uid();return n.set(u,w),w}),U(_,"$hash",function(){var s=this,u=X(),w,I=s.length;for(u=Y(u,5),u=Y(u,I),w=0;w<I;w++)u=Y(u,s.charCodeAt(w));return u})})(),Z(_,"$try_convert",function(s){return $e["$coerce_to?"](s,c("String"),"to_str")}),Z(_,"$new",function(s){var u,w,I=this;u=Q(arguments),w=u;var D=w[0]||"",S=w[w.length-1];return D=t(D,c("String"),"to_str"),S&&S.$$is_hash&&S.has("encoding")&&(D=D.$force_encoding(S.get("encoding").value)),D=new I.$$constructor(D),D.$initialize.$$pristine||ne(D,"initialize",O(w)),D},-1),U(_,"$initialize",function(s,u){var w,I;return w=Q(arguments),I=k(w),I=C(I),w.length>0&&w.shift(),P(I,"encoding"),P(I,"capacity"),d},-1),U(_,"$%",function(s){var u=this;return W(c("Array"),s)?ne(u,"format",[u].concat(O(s))):u.$format(u,s)}),U(_,"$*",function(s){var u=this;if(s=t(s,c("Integer"),"to_int"),s<0&&M.$raise(c("ArgumentError"),"negative argument"),s===0)return"";var w="",I=u.toString();for(I.length*s>=1<<28&&M.$raise(c("RangeError"),"multiply count must not overflow maximum string size");(s&1)===1&&(w+=I),s>>>=1,s!==0;)I+=I;return w}),U(_,"$+",function(s){var u=this;if(s=t(s,c("String"),"to_str"),s==""&&u.$$class===e.String)return u;if(u==""&&s.$$class===e.String)return s;var w=u+s;return u.encoding===w.encoding&&s.encoding===w.encoding||u.encoding.name==="UTF-8"||s.encoding.name==="UTF-8"?w:e.enc(w,u.encoding)}),U(_,"$<=>",function(s){var u=this;if(L(s["$respond_to?"]("to_str")))return s=s.$to_str().$to_s(),u>s?1:u<s?-1:0;var w=s["$<=>"](u);return w===d?d:w>0?-1:w<0?1:0}),U(_,"$==",function(s){var u=this;return s.$$is_string?u.toString()===s.toString():l(s,"$to_str")?s["$=="](u):!1}),U(_,"$=~",function(s){var u=this;return s.$$is_string&&M.$raise(c("TypeError"),"type mismatch: String given"),s["$=~"](u)}),U(_,"$[]",function(s,u){var w=this,I=w.length,D,S;if(s.$$is_range)return D=s.excl,S=s,u=s.end===d?-1:t(s.end,c("Integer"),"to_int"),s=s.begin===d?0:t(s.begin,c("Integer"),"to_int"),Math.abs(s)>I?d:(s<0&&(s+=I),u<0&&(u+=I),(!D||S.end===d)&&(u+=1),u=u-s,u<0&&(u=0),w.substr(s,u));if(s.$$is_string)return u!=null&&M.$raise(c("TypeError")),w.indexOf(s)!==-1?s:d;if(s.$$is_regexp){var j=w.match(s);return j===null?(E["~"]=d,d):(E["~"]=c("MatchData").$new(s,j),u==null?j[0]:(u=t(u,c("Integer"),"to_int"),u<0&&-u<j.length?j[u+=j.length]:u>=0&&u<j.length?j[u]:d))}return s=t(s,c("Integer"),"to_int"),s<0&&(s+=I),u==null?s>=I||s<0?d:w.substr(s,1):(u=t(u,c("Integer"),"to_int"),u<0||s>I||s<0?d:w.substr(s,u))},-2),U(_,"$b",function(){var s=this;return new String(s).$force_encoding("binary")}),U(_,"$capitalize",function(){var s=this;return s.charAt(0).toUpperCase()+s.substr(1).toLowerCase()}),U(_,"$casecmp",function(s){var u=this;if(!L(s["$respond_to?"]("to_str")))return d;s=t(s,c("String"),"to_str").$to_s();var w=/^[\x00-\x7F]*$/;return w.test(u)&&w.test(s)&&(u=u.toLowerCase(),s=s.toLowerCase()),u["$<=>"](s)}),U(_,"$casecmp?",function(s){var u=this,w=u.$casecmp(s);return w===d?d:w===0}),U(_,"$center",function(s,u){var w=this;if(u==null&&(u=" "),s=t(s,c("Integer"),"to_int"),u=t(u,c("String"),"to_str").$to_s(),L(u["$empty?"]())&&M.$raise(c("ArgumentError"),"zero width padding"),L(s<=w.length))return w;var I=w.$ljust(q(B(s,w.length),2).$ceil(),u),D=w.$rjust(q(B(s,w.length),2).$floor(),u);return D+I.slice(w.length)},-2),U(_,"$chomp",function(s){var u=this;if(E["/"]==null&&(E["/"]=d),s==null&&(s=E["/"]),L(s===d||u.length===0))return u;s=$e["$coerce_to!"](s,c("String"),"to_str").$to_s();var w;if(s===`
`)w=u.replace(/\r?\n?$/,"");else if(s==="")w=u.replace(/(\r?\n)+$/,"");else if(u.length>=s.length){var I=u.substr(u.length-s.length,s.length);I===s&&(w=u.substr(0,u.length-s.length))}return w??u},-1),U(_,"$chop",function(){var s=this,u=s.length,w;return u<=1?w="":s.charAt(u-1)===`
`&&s.charAt(u-2)==="\r"?w=s.substr(0,u-2):w=s.substr(0,u-1),w}),U(_,"$chr",function(){var s=this;return s.charAt(0)}),U(_,"$clone",function(s){var u,w=this,I=d;return s=C(s),u=P(s,"freeze"),u==null&&(u=d),L(u["$nil?"]())||F(u,!0)||F(u,!1)||w.$raise(i("ArgumentError"),"unexpected value for freeze: "+u.$class()),I=new String(w),I.$copy_singleton_methods(w),I.$initialize_clone(w,new Map([["freeze",u]])),F(u,!0)?I.$$frozen||(I.$$frozen=!0):L(u["$nil?"]())&&w.$$frozen&&(I.$$frozen=!0),I},-1),U(_,"$dup",function(){var s=this,u=d;return u=new String(s),u.$initialize_dup(s),u}),U(_,"$count",function(s){var u,w,I=this;u=Q(arguments),w=u,w.length===0&&M.$raise(c("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var D=r(w);return D===null?0:I.length-I.replace(new RegExp(D,"g"),"").length},-1),U(_,"$delete",function(s){var u,w,I=this;u=Q(arguments),w=u,w.length===0&&M.$raise(c("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var D=r(w);return D===null?I:I.replace(new RegExp(D,"g"),"")},-1),U(_,"$delete_prefix",function(s){var u=this;return s.$$is_string||(s=t(s,c("String"),"to_str")),u.slice(0,s.length)===s?u.slice(s.length):u}),U(_,"$delete_suffix",function(s){var u=this;return s.$$is_string||(s=t(s,c("String"),"to_str")),u.slice(u.length-s.length)===s?u.slice(0,u.length-s.length):u}),U(_,"$downcase",function(){var s=this;return s.toLowerCase()}),U(_,"$each_line",function $(s,u){var w=$.$$p||d,I,D,S,j,re=this;if(E["/"]==null&&(E["/"]=d),$.$$p=null,I=Q(arguments),D=k(I),D=C(D),I.length>0&&(S=I.shift()),S==null&&(S=E["/"]),j=P(D,"chomp"),j==null&&(j=!1),w===d)return re.$enum_for("each_line",S,new Map([["chomp",j]]));if(S===d)return e.yield1(w,re),re;S=t(S,c("String"),"to_str");var oe,le,_e,he,ge,me,ve,be;if(S.length===0){for(oe=re.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,_e=oe.length;le<_e;le+=2)(oe[le]||oe[le+1])&&(be=(oe[le]||"")+(oe[le+1]||""),j&&(be=be.$chomp(`
`)),e.yield1(w,be));return re}for(ge=re.$chomp(S),me=re.length!=ge.length,ve=ge.split(S),le=0,he=ve.length;le<he;le++)be=ve[le],(le<he-1||me)&&(be+=S),j&&(be=be.$chomp(S)),e.yield1(w,be);return re},-1),U(_,"$empty?",function(){var s=this;return s.length===0}),U(_,"$end_with?",function(s){var u,w,I=this;u=Q(arguments),w=u;for(var D=0,S=w.length;D<S;D++){var j=t(w[D],c("String"),"to_str").$to_s();if(I.length>=j.length&&I.substr(I.length-j.length,j.length)==j)return!0}return!1},-1),U(_,"$gsub",function $(s,u){var w=$.$$p||d,I=this;if($.$$p=null,u===void 0&&w===d)return I.$enum_for("gsub",s);var D="",S=d,j=0,re,oe;s.$$is_regexp?s=g(s):(s=t(s,c("String"),"to_str"),s=new RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(re=s.exec(I),re===null){E["~"]=d,D+=I.slice(j);break}S=c("MatchData").$new(s,re),u===void 0?(le=s.lastIndex,oe=w(re[0]),s.lastIndex=le):u.$$is_hash?oe=u["$[]"](re[0]).$to_s():(u.$$is_string||(u=t(u,c("String"),"to_str")),oe=u.replace(/([\\]+)([0-9+&`'])/g,function(_e,he,ge){if(he.length%2===0)return _e;switch(ge){case"+":for(var me=re.length-1;me>0;me--)if(re[me]!==void 0)return he.slice(1)+re[me];return"";case"&":return he.slice(1)+re[0];case"`":return he.slice(1)+I.slice(0,re.index);case"'":return he.slice(1)+I.slice(re.index+re[0].length);default:return he.slice(1)+(re[ge]||"")}}).replace(/\\\\/g,"\\")),s.lastIndex===re.index?(D+=I.slice(j,re.index)+oe+(I[re.index]||""),s.lastIndex+=1):D+=I.slice(j,re.index)+oe,j=s.lastIndex}return E["~"]=S,D},-2),U(_,"$hex",function(){var s=this;return s.$to_i(16)}),U(_,"$include?",function(s){var u=this;return s.$$is_string||(s=t(s,c("String"),"to_str")),u.indexOf(s)!==-1}),U(_,"$index",function(s,u){var w=this,I,D,S;if(u===void 0)u=0;else if(u=t(u,c("Integer"),"to_int"),u<0&&(u+=w.length,u<0))return d;if(s.$$is_regexp)for(S=g(s);;){if(D=S.exec(w),D===null){E["~"]=d,I=-1;break}if(D.index>=u){E["~"]=c("MatchData").$new(S,D),I=D.index;break}S.lastIndex=D.index+1}else s=t(s,c("String"),"to_str"),s.length===0&&u>w.length?I=-1:I=w.indexOf(s,u);return I===-1?d:I},-2),U(_,"$inspect",function(){var s=this,u=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,w={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},I=s.replace(u,function(D){return w[D]?w[D]:(D=D.charCodeAt(0),D<=255&&(s.encoding["$binary?"]()||s.internal_encoding["$binary?"]())?"\\x"+("00"+D.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+D.toString(16).toUpperCase()).slice(-4))});return'"'+I.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),U(_,"$intern",function(){var s=this;return s.toString()}),U(_,"$length",function(){var s=this;return s.length}),A(_,"size","length"),U(_,"$lines",function $(s,u){var w=$.$$p||d,I,D,S,j,re=this,oe=d;return E["/"]==null&&(E["/"]=d),$.$$p=null,I=Q(arguments),D=k(I),D=C(D),I.length>0&&(S=I.shift()),S==null&&(S=E["/"]),j=P(D,"chomp"),j==null&&(j=!1),oe=ne(re,"each_line",[S,new Map([["chomp",j]])],w.$to_proc()),L(w)?re:oe.$to_a()},-1),U(_,"$ljust",function(s,u){var w=this;if(u==null&&(u=" "),s=t(s,c("Integer"),"to_int"),u=t(u,c("String"),"to_str").$to_s(),L(u["$empty?"]())&&M.$raise(c("ArgumentError"),"zero width padding"),L(s<=w.length))return w;var I=-1,D="";for(s-=w.length;++I<s;)D+=u;return w+D.slice(0,s)},-2),U(_,"$lstrip",function(){var s=this;return s.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),U(_,"$ascii_only?",function(){var s=this;return s.encoding.ascii?/^[\x00-\x7F]*$/.test(s):!1}),U(_,"$match",function $(s,u){var w=$.$$p||d,I=this;return $.$$p=null,(W(i("String"),s)||L(s["$respond_to?"]("to_str")))&&(s=c("Regexp").$new(s.$to_str())),W(c("Regexp"),s)||M.$raise(c("TypeError"),"wrong argument type "+s.$class()+" (expected Regexp)"),ne(s,"match",[I,u],w.$to_proc())},-2),U(_,"$match?",function(s,u){var w=this;return(W(i("String"),s)||L(s["$respond_to?"]("to_str")))&&(s=c("Regexp").$new(s.$to_str())),W(c("Regexp"),s)||M.$raise(c("TypeError"),"wrong argument type "+s.$class()+" (expected Regexp)"),s["$match?"](w,u)},-2),U(_,"$next",function(){var s=this,u=s.length;if(u===0)return"";for(var w=s,I=s.search(/[a-zA-Z0-9]/),D=!1,S;u--;){if(S=s.charCodeAt(u),S>=48&&S<=57||S>=65&&S<=90||S>=97&&S<=122)switch(S){case 57:D=!0,S=48;break;case 90:D=!0,S=65;break;case 122:D=!0,S=97;break;default:D=!1,S+=1}else I===-1?S===255?(D=!0,S=0):(D=!1,S+=1):D=!0;if(w=w.slice(0,u)+String.fromCharCode(S)+w.slice(u+1),D&&(u===0||u===I)){switch(S){case 65:break;case 97:break;default:S+=1}u===0?w=String.fromCharCode(S)+w:w=w.slice(0,u)+String.fromCharCode(S)+w.slice(u),D=!1}if(!D)break}return w}),U(_,"$oct",function(){var s=this,u,w=s,I=8;return/^\s*_/.test(w)?0:(w=w.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(D,S,j,re){switch(re.charAt(0)){case"+":case"-":return D;case"0":if(re.charAt(1)==="x"&&j==="0x")return D}switch(j){case"0b":I=2;break;case"0":case"0o":I=8;break;case"0d":I=10;break;case"0x":I=16;break}return S+re}),u=parseInt(w.replace(/_(?!_)/g,""),I),isNaN(u)?0:u)}),U(_,"$ord",function(){var s=this;return typeof s.codePointAt=="function"?s.codePointAt(0):s.charCodeAt(0)}),U(_,"$partition",function(s){var u=this,w,I;return s.$$is_regexp?(I=s.exec(u),I===null?w=-1:(c("MatchData").$new(s,I),s=I[0],w=I.index)):(s=t(s,c("String"),"to_str"),w=u.indexOf(s)),w===-1?[u,"",""]:[u.slice(0,w),u.slice(w,w+s.length),u.slice(w+s.length)]}),U(_,"$reverse",function(){var s=this;return s.split("").reverse().join("")}),U(_,"$rindex",function(s,u){var w=this,I,D,S,j;if(u===void 0)u=w.length;else if(u=t(u,c("Integer"),"to_int"),u<0&&(u+=w.length,u<0))return d;if(s.$$is_regexp){for(D=null,S=g(s);j=S.exec(w),!(j===null||j.index>u);)D=j,S.lastIndex=D.index+1;D===null?(E["~"]=d,I=-1):(c("MatchData").$new(S,D),I=D.index)}else s=t(s,c("String"),"to_str"),I=w.lastIndexOf(s,u);return I===-1?d:I},-2),U(_,"$rjust",function(s,u){var w=this;if(u==null&&(u=" "),s=t(s,c("Integer"),"to_int"),u=t(u,c("String"),"to_str").$to_s(),L(u["$empty?"]())&&M.$raise(c("ArgumentError"),"zero width padding"),L(s<=w.length))return w;var I=Math.floor(s-w.length),D=Math.floor(I/u.length),S=Array(D+1).join(u),j=I-S.length;return S+u.slice(0,j)+w},-2),U(_,"$rpartition",function(s){var u=this,w,I,D,S;if(s.$$is_regexp){for(I=null,D=g(s);S=D.exec(u),S!==null;)I=S,D.lastIndex=I.index+1;I===null?w=-1:(c("MatchData").$new(D,I),s=I[0],w=I.index)}else s=t(s,c("String"),"to_str"),w=u.lastIndexOf(s);return w===-1?["","",u]:[u.slice(0,w),u.slice(w,w+s.length),u.slice(w+s.length)]}),U(_,"$rstrip",function(){var s=this;return s.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),U(_,"$scan",function $(s,u){var w=$.$$p||d,I,D=this;$.$$p=null,u=C(u),I=P(u,"no_matchdata"),I==null&&(I=!1);var S=[],j=d,re;for(s.$$is_regexp?s=g(s):(s=t(s,c("String"),"to_str"),s=new RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(re=s.exec(D))!=null;)j=c("MatchData").$new(s,re,new Map([["no_matchdata",I]])),w===d?re.length==1?S.push(re[0]):S.push(j.$captures()):re.length==1?e.yield1(w,re[0]):e.yield1(w,j.$captures()),s.lastIndex===re.index&&(s.lastIndex+=1);return I||(E["~"]=j),w!==d?D:S},-2),U(_,"$singleton_class",function(){var s=this;return e.get_singleton_class(s)}),U(_,"$split",function(s,u){var w=this,I=d;if(E[";"]==null&&(E[";"]=d),w.length===0)return[];if(u===void 0)u=0;else if(u=$e["$coerce_to!"](u,c("Integer"),"to_int"),u===1)return[w];(s===void 0||s===d)&&(s=L(I=E[";"])?I:" ");var D=[],S=w.toString(),j=0,re,oe=0,le=0,_e,he;if(s.$$is_regexp?s=g(s):(s=t(s,c("String"),"to_str").$to_s(),s===" "&&(s=/\s+/gm,S=S.replace(/^\s+/,""))),D=S.split(s),D.length===1&&D[0]===S)return[D[0]];for(;(_e=D.indexOf(void 0))!==-1;)D.splice(_e,1);if(u===0){for(;D[D.length-1]==="";)D.pop();return D}if(s.$$is_regexp||(s=e.escape_regexp(s),s=new RegExp(s,"gm")),re=s.exec(S),u<0){if(re!==null&&re[0]===""&&s.source.indexOf("(?=")===-1)for(_e=0,he=re.length;_e<he;_e++)D.push("");return D}if(re!==null&&re[0]==="")return le=(re.length-1)*(u-1)+u,D.splice(le-1,D.length-1,D.slice(le-1).join("")),D;if(u>=D.length)return D;for(;re!==null&&(oe++,j=s.lastIndex,le+=re.length,oe+1!==u);)re=s.exec(S);return D.splice(le,D.length-1,S.slice(j)),D},-1),U(_,"$squeeze",function(s){var u,w,I=this;if(u=Q(arguments),w=u,w.length===0)return I.replace(/(.)\1+/g,"$1");var D=r(w);return D===null?I:I.replace(new RegExp("("+D+")\\1+","g"),"$1")},-1),U(_,"$start_with?",function(s){var u,w,I=this;u=Q(arguments),w=u;for(var D=0,S=w.length;D<S;D++)if(w[D].$$is_regexp){var j=w[D],re=j.exec(I);if(re!=null&&re.index===0)return E["~"]=c("MatchData").$new(j,re),!0;E["~"]=d}else{var oe=t(w[D],c("String"),"to_str").$to_s();if(I.length>=oe.length&&I.startsWith(oe))return!0}return!1},-1),U(_,"$strip",function(){var s=this;return s.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),U(_,"$sub",function $(s,u){var w=$.$$p||d,I=this;$.$$p=null,s.$$is_regexp||(s=t(s,c("String"),"to_str"),s=new RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var D,S=s.exec(I);return S===null?(E["~"]=d,D=I.toString()):(c("MatchData").$new(s,S),u===void 0?(w===d&&M.$raise(c("ArgumentError"),"wrong number of arguments (1 for 2)"),D=I.slice(0,S.index)+w(S[0])+I.slice(S.index+S[0].length)):u.$$is_hash?D=I.slice(0,S.index)+u["$[]"](S[0]).$to_s()+I.slice(S.index+S[0].length):(u=t(u,c("String"),"to_str"),u=u.replace(/([\\]+)([0-9+&`'])/g,function(j,re,oe){if(re.length%2===0)return j;switch(oe){case"+":for(var le=S.length-1;le>0;le--)if(S[le]!==void 0)return re.slice(1)+S[le];return"";case"&":return re.slice(1)+S[0];case"`":return re.slice(1)+I.slice(0,S.index);case"'":return re.slice(1)+I.slice(S.index+S[0].length);default:return re.slice(1)+(S[oe]||"")}}).replace(/\\\\/g,"\\"),D=I.slice(0,S.index)+u+I.slice(S.index+S[0].length))),D},-2),U(_,"$sum",function(s){var u=this;s==null&&(s=16),s=t(s,c("Integer"),"to_int");for(var w=0,I=u.length,D=0;D<I;D++)w+=u.charCodeAt(D);return s<=0?w:w&Math.pow(2,s)-1},-1),U(_,"$swapcase",function(){var s=this,u=s.replace(/([a-z]+)|([A-Z]+)/g,function(w,I,D){return I?w.toUpperCase():w.toLowerCase()});return u}),U(_,"$to_f",function(){var s=this;if(s.charAt(0)==="_")return 0;var u=parseFloat(s.replace(/_/g,""));return isNaN(u)||u==1/0||u==-1/0?0:u}),U(_,"$to_i",function(s){var u=this;s==null&&(s=10);var w,I=u.toLowerCase(),D=t(s,c("Integer"),"to_int");return(D===1||D<0||D>36)&&M.$raise(c("ArgumentError"),"invalid radix "+D),/^\s*_/.test(I)?0:(I=I.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(S,j,re,oe){switch(oe.charAt(0)){case"+":case"-":return S;case"0":if(oe.charAt(1)==="x"&&re==="0x"&&(D===0||D===16))return S}switch(re){case"0b":if(D===0||D===2)return D=2,j+oe;break;case"0":case"0o":if(D===0||D===8)return D=8,j+oe;break;case"0d":if(D===0||D===10)return D=10,j+oe;break;case"0x":if(D===0||D===16)return D=16,j+oe;break}return S}),w=parseInt(I.replace(/_(?!_)/g,""),D),isNaN(w)?0:w)},-1),U(_,"$to_proc",function $(){$.$$p;var s=this,u=d,w=d,I=d;return $.$$p=null,u=s.valueOf(),w=e.jsid(u),I=ne(M,"proc",[],function D(S){var j=D.$$p||d,re,oe;D.$$p=null,re=Q(arguments),oe=re,oe.length===0&&M.$raise(c("ArgumentError"),"no receiver given");var le=oe[0];le==null&&(le=d);var _e=le[w];return _e?oe=oe.slice(1):(_e=le.$method_missing,oe[0]=u),typeof j=="function"&&(_e.$$p=j),oe.length===0?_e.call(le):_e.apply(le,oe)},-1),I.$$source_location=d,I}),U(_,"$to_s",function(){var s=this;return s.toString()}),U(_,"$tr",function(s,u){var w=this;if(s=t(s,c("String"),"to_str").$to_s(),u=t(u,c("String"),"to_str").$to_s(),s.length==0||s===u)return w;var I,D,S,j,re,oe,le,_e={},he=s.split(""),ge=he.length,me=u.split(""),ve=me.length,be=!1,ie=null;he[0]==="^"&&he.length>1&&(be=!0,he.shift(),ie=me[ve-1],ge-=1);var x=[],N=null;for(D=!1,I=0;I<ge;I++)if(j=he[I],N==null)N=j,x.push(j);else if(j==="-")N==="-"?(x.push("-"),x.push("-")):I==ge-1?x.push("-"):D=!0;else if(D){for(re=N.charCodeAt(0),oe=j.charCodeAt(0),re>oe&&M.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(oe)+'" in string transliteration'),S=re+1;S<oe;S++)x.push(String.fromCharCode(S));x.push(j),D=null,N=null}else x.push(j);if(he=x,ge=he.length,be)for(I=0;I<ge;I++)_e[he[I]]=!0;else{if(ve>0){var K=[],G=null;for(D=!1,I=0;I<ve;I++)if(j=me[I],G==null)G=j,K.push(j);else if(j==="-")G==="-"?(K.push("-"),K.push("-")):I==ve-1?K.push("-"):D=!0;else if(D){for(re=G.charCodeAt(0),oe=j.charCodeAt(0),re>oe&&M.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(oe)+'" in string transliteration'),S=re+1;S<oe;S++)K.push(String.fromCharCode(S));K.push(j),D=null,G=null}else K.push(j);me=K,ve=me.length}var te=ge-ve;if(te>0){var se=ve>0?me[ve-1]:"";for(I=0;I<te;I++)me.push(se)}for(I=0;I<ge;I++)_e[he[I]]=me[I]}var ue="";for(I=0,le=w.length;I<le;I++){j=w.charAt(I);var fe=_e[j];be?ue+=fe==null?ie:j:ue+=fe??j}return ue}),U(_,"$tr_s",function(s,u){var w=this;if(s=t(s,c("String"),"to_str").$to_s(),u=t(u,c("String"),"to_str").$to_s(),s.length==0)return w;var I,D,S,j,re,oe,le,_e={},he=s.split(""),ge=he.length,me=u.split(""),ve=me.length,be=!1,ie=null;he[0]==="^"&&he.length>1&&(be=!0,he.shift(),ie=me[ve-1],ge-=1);var x=[],N=null;for(D=!1,I=0;I<ge;I++)if(j=he[I],N==null)N=j,x.push(j);else if(j==="-")N==="-"?(x.push("-"),x.push("-")):I==ge-1?x.push("-"):D=!0;else if(D){for(re=N.charCodeAt(0),oe=j.charCodeAt(0),re>oe&&M.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(oe)+'" in string transliteration'),S=re+1;S<oe;S++)x.push(String.fromCharCode(S));x.push(j),D=null,N=null}else x.push(j);if(he=x,ge=he.length,be)for(I=0;I<ge;I++)_e[he[I]]=!0;else{if(ve>0){var K=[],G=null;for(D=!1,I=0;I<ve;I++)if(j=me[I],N==null)N=j,K.push(j);else if(j==="-")G==="-"?(K.push("-"),K.push("-")):I==ve-1?K.push("-"):D=!0;else if(D){for(re=N.charCodeAt(0),oe=j.charCodeAt(0),re>oe&&M.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(oe)+'" in string transliteration'),S=re+1;S<oe;S++)K.push(String.fromCharCode(S));K.push(j),D=null,N=null}else K.push(j);me=K,ve=me.length}var te=ge-ve;if(te>0){var se=ve>0?me[ve-1]:"";for(I=0;I<te;I++)me.push(se)}for(I=0;I<ge;I++)_e[he[I]]=me[I]}var ue="",fe=null;for(I=0,le=w.length;I<le;I++){j=w.charAt(I);var f=_e[j];be?f==null?fe==null&&(ue+=ie,fe=!0):(ue+=j,fe=null):f!=null?(fe==null||fe!==f)&&(ue+=f,fe=f):(ue+=j,fe=null)}return ue}),U(_,"$upcase",function(){var s=this;return s.toUpperCase()}),U(_,"$upto",function $(s,u){var w=$.$$p||d,I=this;if($.$$p=null,u==null&&(u=!1),w===d)return I.$enum_for("upto",s,u);var D,S,j=I.toString();if(s=t(s,c("String"),"to_str"),j.length===1&&s.length===1)for(D=j.charCodeAt(0),S=s.charCodeAt(0);D<=S&&!(u&&D===S);)w(String.fromCharCode(D)),D+=1;else if(parseInt(j,10).toString()===j&&parseInt(s,10).toString()===s)for(D=parseInt(j,10),S=parseInt(s,10);D<=S&&!(u&&D===S);)w(D.toString()),D+=1;else for(;j.length<=s.length&&j<=s&&!(u&&j===s);)w(j),j=j.$succ();return I},-2);function r($){function s(_e){var he="",ge,me=_e.length,ve,be,ie,x,N;for(ge=0;ge<me;ge++)if(ve=_e.charAt(ge),ve==="-"&&ge>0&&ge<me-1&&!be){for(ie=_e.charCodeAt(ge-1),x=_e.charCodeAt(ge+1),ie>x&&M.$raise(c("ArgumentError"),'invalid range "'+ie+"-"+x+'" in string transliteration'),N=ie+1;N<x+1;N++)he+=String.fromCharCode(N);be=!0,ge++}else be=ve==="\\",he+=ve;return he}function u(_e,he){if(_e.length===0)return he;var ge="",me,ve=_e.length,be;for(me=0;me<ve;me++)be=_e.charAt(me),he.indexOf(be)!==-1&&(ge+=be);return ge}var w,I,D,S,j,re,oe="",le="";for(w=0,I=$.length;w<I;w++)D=t($[w],c("String"),"to_str"),S=D.charAt(0)==="^"&&D.length>1,D=s(S?D.slice(1):D),S?le=u(le,D):oe=u(oe,D);if(oe.length>0&&le.length>0){for(re="",w=0,I=oe.length;w<I;w++)j=oe.charAt(w),le.indexOf(j)===-1&&(re+=j);oe=re,le=""}return oe.length>0?"["+c("Regexp").$escape(oe)+"]":le.length>0?"[^"+c("Regexp").$escape(le)+"]":null}return U(_,"$instance_variables",function(){return[]}),Z(_,"$_load",function(s){var u,w,I=this;return u=Q(arguments),w=u,ne(I,"new",O(w))},-1),U(_,"$unicode_normalize",function(s){var u=this;return s==null&&(s="nfc"),L(["nfc","nfd","nfkc","nfkd"]["$include?"](s))||M.$raise(c("ArgumentError"),"Invalid normalization form "+s),u.normalize(s.$upcase())},-1),U(_,"$unicode_normalized?",function(s){var u=this;return s==null&&(s="nfc"),u.$unicode_normalize(s)["$=="](u)},-1),U(_,"$unpack",function(s){return M.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),U(_,"$unpack1",function(s){return M.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),U(_,"$freeze",function(){var s=this;return typeof s=="string"||v(s,"$$frozen",!0),s}),U(_,"$-@",function(){var s=this;return typeof s=="string"||s.$$frozen?s:s.encoding.name=="UTF-8"&&s.internal_encoding.name=="UTF-8"?s.toString():s.$dup().$freeze()}),U(_,"$frozen?",function(){var s=this;return typeof s=="string"||s.$$frozen===!0}),A(_,"+@","dup"),A(_,"===","=="),A(_,"byteslice","[]"),A(_,"eql?","=="),A(_,"equal?","==="),A(_,"object_id","__id__"),A(_,"slice","[]"),A(_,"succ","next"),A(_,"to_str","to_s"),A(_,"to_sym","intern"),$e.$pristine(_,"initialize")}("::",String,T),a(T[0],"Symbol",y("String"))};Opal.modules["corelib/enumerable"]=function(e){var t=e.truthy,l=e.coerce_to,g=e.yield1,v=e.yieldX,X=e.deny_frozen_access,Y=e.module,z=e.send,H=e.slice,p=e.to_a,U=e.Opal,$e=e.thrower,Z=e.def,Q=e.Kernel,ne=e.return_val,O=e.rb_gt,k=e.rb_times,C=e.rb_lt,P=e.eqeq,W=e.rb_plus,M=e.rb_minus,L=e.rb_divide,E=e.rb_le,q=e.lambda,B=e.not,F=e.alias,A=[],a=e.nil,m=e.$$$;return e.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(T,y){var d=Y(T,"Enumerable"),c=[d].concat(y),J=e.$r(c);function V(h){return h.length===0&&(h=[a]),h.length>1&&(h=[h]),h}return Z(d,"$all?",function h(_){try{var o=$e("return"),i=h.$$p||a,n=this;return h.$$p=null,t(_!==void 0)?z(n,"each",[],function r($){var s,u,w=a;if(s=H(arguments),u=s,w=V(u),t(z(_,"public_send",["==="].concat(p(w)))))return a;o.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:o}):i!==a?z(n,"each",[],function r($){var s,u;if(s=H(arguments),u=s,t(e.yieldX(i,p(u))))return a;o.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:o}):z(n,"each",[],function r($){var s,u;if(s=H(arguments),u=s,t(U.$destructure(u)))return a;o.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:o}),!0}catch(r){if(r===o)return r.$v;throw r}finally{o.is_orphan=!0}},-1),Z(d,"$any?",function h(_){try{var o=$e("return"),i=h.$$p||a,n=this;return h.$$p=null,t(_!==void 0)?z(n,"each",[],function r($){var s,u,w=a;if(s=H(arguments),u=s,w=V(u),t(z(_,"public_send",["==="].concat(p(w)))))o.$throw(!0,r.$$is_lambda);else return a},{$$arity:-1,$$ret:o}):i!==a?z(n,"each",[],function r($){var s,u;if(s=H(arguments),u=s,t(e.yieldX(i,p(u))))o.$throw(!0,r.$$is_lambda);else return a},{$$arity:-1,$$ret:o}):z(n,"each",[],function r($){var s,u;if(s=H(arguments),u=s,t(U.$destructure(u)))o.$throw(!0,r.$$is_lambda);else return a},{$$arity:-1,$$ret:o}),!1}catch(r){if(r===o)return r.$v;throw r}finally{o.is_orphan=!0}},-1),Z(d,"$chunk",function h(){var _=h.$$p||a,o=this;return h.$$p=null,_===a?z(o,"to_enum",["chunk"],function i(){var n=i.$$s==null?this:i.$$s;return n.$enumerator_size()},{$$s:o}):z(m("Enumerator"),"new",[],function i(n){var r=i.$$s==null?this:i.$$s;n==null&&(n=a);var $=a,s=[];function u(){s.length>0&&n.$yield($,s)}r.$each.$$p=function(w){var I=g(_,w);I===a?(u(),s=[],$=a):($===a||$===I?s.push(w):(u(),s=[w]),$=I)},r.$each(),u()},{$$s:o})}),Z(d,"$chunk_while",function h(){var _=h.$$p||a,o=this;return h.$$p=null,_===a&&Q.$raise(m("ArgumentError"),"no block given"),z(o,"slice_when",[],function(n,r){return n==null&&(n=a),r==null&&(r=a),e.yieldX(_,[n,r])["$!"]()})}),Z(d,"$collect",function h(){var _=h.$$p||a,o=this;if(h.$$p=null,_===a)return z(o,"enum_for",["collect"],function n(){var r=n.$$s==null?this:n.$$s;return r.$enumerator_size()},{$$s:o});var i=[];return o.$each.$$p=function(){var n=v(_,arguments);i.push(n)},o.$each(),i}),Z(d,"$collect_concat",function h(){var _=h.$$p||a,o=this;return h.$$p=null,_===a?z(o,"enum_for",["collect_concat"],function i(){var n=i.$$s==null?this:i.$$s;return n.$enumerator_size()},{$$s:o}):z(o,"map",[],_.$to_proc()).$flatten(1)}),Z(d,"$compact",function(){var _=this;return _.$to_a().$compact()}),Z(d,"$count",function h(_){var o=h.$$p||a,i=this,n=a;return h.$$p=null,n=0,_!=null&&o!==a&&i.$warn("warning: given block not used"),t(_!=null)?o=z(Q,"proc",[],function($){var s,u;return s=H(arguments),u=s,U.$destructure(u)["$=="](_)},-1):t(o["$nil?"]())&&(o=z(Q,"proc",[],ne(!0))),z(i,"each",[],function($){var s,u;return s=H(arguments),u=s,t(v(o,u))?n++:a},-1),n},-1),Z(d,"$cycle",function h(_){var o=h.$$p||a,i=this;if(h.$$p=null,_==null&&(_=a),o===a)return z(i,"enum_for",["cycle",_],function s(){var u=s.$$s==null?this:s.$$s;return t(_["$nil?"]())?t(u["$respond_to?"]("size"))?m(m("Float"),"INFINITY"):a:(_=U["$coerce_to!"](_,m("Integer"),"to_int"),t(O(_,0))?k(u.$enumerator_size(),_):0)},{$$s:i});if(!t(_["$nil?"]())&&(_=U["$coerce_to!"](_,m("Integer"),"to_int"),t(_<=0)))return a;var n=[],r,$;if(i.$each.$$p=function(){var s=U.$destructure(arguments);g(o,s),n.push(s)},i.$each(),n.length===0)return a;if(_===a)for(;;)for(r=0,$=n.length;r<$;r++)g(o,n[r]);else for(;_>1;){for(r=0,$=n.length;r<$;r++)g(o,n[r]);_--}},-1),Z(d,"$detect",function h(_){try{var o=$e("return"),i=h.$$p||a,n=this;return h.$$p=null,i===a?n.$enum_for("detect",_):(z(n,"each",[],function r($){var s,u,w=a;if(s=H(arguments),u=s,w=U.$destructure(u),t(e.yield1(i,w)))o.$throw(w,r.$$is_lambda);else return a},{$$arity:-1,$$ret:o}),_!==void 0?typeof _=="function"?_():_:a)}catch(r){if(r===o)return r.$v;throw r}finally{o.is_orphan=!0}},-1),Z(d,"$drop",function(_){var o=this;_=l(_,m("Integer"),"to_int"),t(_<0)&&Q.$raise(m("ArgumentError"),"attempt to drop negative size");var i=[],n=0;return o.$each.$$p=function(){_<=n&&i.push(U.$destructure(arguments)),n++},o.$each(),i}),Z(d,"$drop_while",function h(){var _=h.$$p||a,o=this;if(h.$$p=null,_===a)return o.$enum_for("drop_while");var i=[],n=!0;return o.$each.$$p=function(){var r=U.$destructure(arguments);if(n){var $=g(_,r);t($)||(n=!1,i.push(r))}else i.push(r)},o.$each(),i}),Z(d,"$each_cons",function h(_){var o=h.$$p||a,i=this;if(h.$$p=null,t(arguments.length!=1)&&Q.$raise(m("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),_=U.$try_convert(_,m("Integer"),"to_int"),t(_<=0)&&Q.$raise(m("ArgumentError"),"invalid size"),o===a)return z(i,"enum_for",["each_cons",_],function r(){var $=r.$$s==null?this:r.$$s,s=a;return s=$.$enumerator_size(),t(s["$nil?"]())?a:P(s,0)||t(C(s,_))?0:W(M(s,_),1)},{$$s:i});var n=[];return i.$each.$$p=function(){var r=U.$destructure(arguments);n.push(r),n.length>_&&n.shift(),n.length==_&&g(o,n.slice(0,_))},i.$each(),i}),Z(d,"$each_entry",function h(_){var o=h.$$p||a,i,n,r=this;return h.$$p=null,i=H(arguments),n=i,o===a?z(r,"to_enum",["each_entry"].concat(p(n)),function $(){var s=$.$$s==null?this:$.$$s;return s.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var $=U.$destructure(arguments);g(o,$)},r.$each.apply(r,n),r)},-1),Z(d,"$each_slice",function h(_){var o=h.$$p||a,i=this;if(h.$$p=null,_=l(_,m("Integer"),"to_int"),t(_<=0)&&Q.$raise(m("ArgumentError"),"invalid slice size"),o===a)return z(i,"enum_for",["each_slice",_],function r(){var $=r.$$s==null?this:r.$$s;return t($["$respond_to?"]("size"))?L($.$size(),_).$ceil():a},{$$s:i});var n=[];return i.$each.$$p=function(){var r=U.$destructure(arguments);n.push(r),n.length===_&&(g(o,n),n=[])},i.$each(),n.length>0&&g(o,n),i}),Z(d,"$each_with_index",function h(_){var o=h.$$p||a,i,n,r=this;if(h.$$p=null,i=H(arguments),n=i,o===a)return z(r,"enum_for",["each_with_index"].concat(p(n)),function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:r});var $=0;return r.$each.$$p=function(){var s=U.$destructure(arguments);o(s,$),$++},r.$each.apply(r,n),r},-1),Z(d,"$each_with_object",function h(_){var o=h.$$p||a,i=this;return h.$$p=null,o===a?z(i,"enum_for",["each_with_object",_],function n(){var r=n.$$s==null?this:n.$$s;return r.$enumerator_size()},{$$s:i}):(i.$each.$$p=function(){var n=U.$destructure(arguments);o(n,_)},i.$each(),_)}),Z(d,"$entries",function(_){var o,i,n=this;o=H(arguments),i=o;var r=[];return n.$each.$$p=function(){r.push(U.$destructure(arguments))},n.$each.apply(n,i),r},-1),Z(d,"$filter_map",function h(){var _=h.$$p||a,o=this;return h.$$p=null,_===a?z(o,"enum_for",["filter_map"],function i(){var n=i.$$s==null?this:i.$$s;return n.$enumerator_size()},{$$s:o}):z(z(o,"map",[],_.$to_proc()),"select",[],"itself".$to_proc())}),Z(d,"$find_all",function h(){var _=h.$$p||a,o=this;if(h.$$p=null,_===a)return z(o,"enum_for",["find_all"],function n(){var r=n.$$s==null?this:n.$$s;return r.$enumerator_size()},{$$s:o});var i=[];return o.$each.$$p=function(){var n=U.$destructure(arguments),r=g(_,n);t(r)&&i.push(n)},o.$each(),i}),Z(d,"$find_index",function h(_){try{var o=$e("return"),i=h.$$p||a,n=this,r=a;return h.$$p=null,t(_===void 0&&i===a)?n.$enum_for("find_index"):(_!=null&&i!==a&&n.$warn("warning: given block not used"),r=0,t(_!=null)?z(n,"each",[],function $(s){var u,w;return u=H(arguments),w=u,P(U.$destructure(w),_)&&o.$throw(r,$.$$is_lambda),r+=1},{$$arity:-1,$$ret:o}):z(n,"each",[],function $(s){var u,w;return u=H(arguments),w=u,t(e.yieldX(i,p(w)))&&o.$throw(r,$.$$is_lambda),r+=1},{$$arity:-1,$$ret:o}),a)}catch($){if($===o)return $.$v;throw $}finally{o.is_orphan=!0}},-1),Z(d,"$first",function(_){try{var o=$e("return"),i=this,n=a,r=a;return t(_===void 0)?z(i,"each",[],function $(s){s==null&&(s=a),o.$throw(s,$.$$is_lambda)},{$$ret:o}):(n=[],_=l(_,m("Integer"),"to_int"),t(_<0)&&Q.$raise(m("ArgumentError"),"attempt to take negative size"),t(_==0)?[]:(r=0,z(i,"each",[],function $(s){var u,w;if(u=H(arguments),w=u,n.push(U.$destructure(w)),t(_<=++r))o.$throw(n,$.$$is_lambda);else return a},{$$arity:-1,$$ret:o}),n))}catch($){if($===o)return $.$v;throw $}finally{o.is_orphan=!0}},-1),Z(d,"$grep",function h(_){var o=h.$$p||a,i=this,n=a;return h.$$p=null,n=[],z(i,"each",[],function($){var s,u,w=a;return s=H(arguments),u=s,w=V(u),t(z(_,"__send__",["==="].concat(p(w))))?(o!==a?(t(O(u.$length(),1))&&(u=[u]),u=e.yieldX(o,p(u))):t(E(u.$length(),1))&&(u=u["$[]"](0)),n.$push(u)):a},-1),n}),Z(d,"$grep_v",function h(_){var o=h.$$p||a,i=this,n=a;return h.$$p=null,n=[],z(i,"each",[],function($){var s,u,w=a;return s=H(arguments),u=s,w=V(u),t(z(_,"__send__",["==="].concat(p(w))))?a:(o!==a?(t(O(u.$length(),1))&&(u=[u]),u=e.yieldX(o,p(u))):t(E(u.$length(),1))&&(u=u["$[]"](0)),n.$push(u))},-1),n}),Z(d,"$group_by",function h(){var _=h.$$p||a,o,i=this,n=a,r=a;return h.$$p=null,_===a?z(i,"enum_for",["group_by"],function $(){var s=$.$$s==null?this:$.$$s;return s.$enumerator_size()},{$$s:i}):(n=new Map,i.$each.$$p=function(){var $=U.$destructure(arguments),s=g(_,$);(t(r=n["$[]"](s))?r:(o=[s,[]],z(n,"[]=",o),o[o.length-1]))["$<<"]($)},i.$each(),n)}),Z(d,"$include?",function(_){try{var o=$e("return"),i=this;return z(i,"each",[],function n(r){var $,s;if($=H(arguments),s=$,P(U.$destructure(s),_))o.$throw(!0,n.$$is_lambda);else return a},{$$arity:-1,$$ret:o}),!1}catch(n){if(n===o)return n.$v;throw n}finally{o.is_orphan=!0}}),Z(d,"$inject",function h(_,o){var i=h.$$p||a,n=this;h.$$p=null;var r=_;return i!==a&&o===void 0?n.$each.$$p=function(){var $=U.$destructure(arguments);if(r===void 0){r=$;return}$=v(i,[r,$]),r=$}:(o===void 0&&(m("Symbol")["$==="](_)||Q.$raise(m("TypeError"),""+_.$inspect()+" is not a Symbol"),o=_,r=void 0),n.$each.$$p=function(){var $=U.$destructure(arguments);if(r===void 0){r=$;return}r=r.$__send__(o,$)}),n.$each(),r??a},-1),Z(d,"$lazy",function(){var _=this;return z(m(m("Enumerator"),"Lazy"),"new",[_,_.$enumerator_size()],function(i,n){var r,$;return i==null&&(i=a),r=H(arguments,1),$=r,z(i,"yield",p($))},-2)}),Z(d,"$enumerator_size",function(){var _=this;return t(_["$respond_to?"]("size"))?_.$size():a}),Z(d,"$max",function h(_){var o=h.$$p||a,i=this;if(h.$$p=null,_===void 0||_===a){var n,r;return i.$each.$$p=function(){var $=U.$destructure(arguments);if(n===void 0){n=$;return}o!==a?r=v(o,[$,n]):r=$["$<=>"](n),r===a&&Q.$raise(m("ArgumentError"),"comparison failed"),r>0&&(n=$)},i.$each(),n===void 0?a:n}return _=l(_,m("Integer"),"to_int"),z(i,"sort",[],o.$to_proc()).$reverse().$first(_)},-1),Z(d,"$max_by",function h(_){var o=h.$$p||a,i=this;if(h.$$p=null,_==null&&(_=a),!t(o))return z(i,"enum_for",["max_by",_],function $(){var s=$.$$s==null?this:$.$$s;return s.$enumerator_size()},{$$s:i});if(!t(_["$nil?"]()))return z(i,"sort_by",[],o.$to_proc()).$reverse().$take(_);var n,r;return i.$each.$$p=function(){var $=U.$destructure(arguments),s=g(o,$);if(n===void 0){n=$,r=s;return}s["$<=>"](r)>0&&(n=$,r=s)},i.$each(),n===void 0?a:n},-1),Z(d,"$min",function h(_){var o=h.$$p||a,i=this;if(h.$$p=null,_==null&&(_=a),!t(_["$nil?"]()))return o!==a?z(i,"sort",[],function($,s){return $==null&&($=a),s==null&&(s=a),e.yieldX(o,[$,s])}).$take(_):i.$sort().$take(_);var n;return o!==a?i.$each.$$p=function(){var r=U.$destructure(arguments);if(n===void 0){n=r;return}var $=o(r,n);$===a&&Q.$raise(m("ArgumentError"),"comparison failed"),$<0&&(n=r)}:i.$each.$$p=function(){var r=U.$destructure(arguments);if(n===void 0){n=r;return}U.$compare(r,n)<0&&(n=r)},i.$each(),n===void 0?a:n},-1),Z(d,"$min_by",function h(_){var o=h.$$p||a,i=this;if(h.$$p=null,_==null&&(_=a),!t(o))return z(i,"enum_for",["min_by",_],function $(){var s=$.$$s==null?this:$.$$s;return s.$enumerator_size()},{$$s:i});if(!t(_["$nil?"]()))return z(i,"sort_by",[],o.$to_proc()).$take(_);var n,r;return i.$each.$$p=function(){var $=U.$destructure(arguments),s=g(o,$);if(n===void 0){n=$,r=s;return}s["$<=>"](r)<0&&(n=$,r=s)},i.$each(),n===void 0?a:n},-1),Z(d,"$minmax",function h(){var _=h.$$p||a,o=this,i=a;h.$$p=null,_=t(i=_)?i:z(Q,"proc",[],function(u,w){return u==null&&(u=a),w==null&&(w=a),u["$<=>"](w)});var n=a,r=a,$=!0;return o.$each.$$p=function(){var s=U.$destructure(arguments);if($)n=r=s,$=!1;else{var u=_.$call(n,s);u===a?Q.$raise(m("ArgumentError"),"comparison failed"):u>0&&(n=s);var w=_.$call(r,s);w===a?Q.$raise(m("ArgumentError"),"comparison failed"):w<0&&(r=s)}},o.$each(),[n,r]}),Z(d,"$minmax_by",function h(){var _=h.$$p||a,o=this;if(h.$$p=null,!t(_))return z(o,"enum_for",["minmax_by"],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:o});var i=a,n=a,r,$;return o.$each.$$p=function(){var s=U.$destructure(arguments),u=g(_,s);(r===void 0||u["$<=>"](r)<0)&&(i=s,r=u),($===void 0||u["$<=>"]($)>0)&&(n=s,$=u)},o.$each(),[i,n]}),Z(d,"$none?",function h(_){try{var o=$e("return"),i=h.$$p||a,n=this;return h.$$p=null,t(_!==void 0)?z(n,"each",[],function r($){var s,u,w=a;if(s=H(arguments),u=s,w=V(u),t(z(_,"public_send",["==="].concat(p(w)))))o.$throw(!1,r.$$is_lambda);else return a},{$$arity:-1,$$ret:o}):i!==a?z(n,"each",[],function r($){var s,u;if(s=H(arguments),u=s,t(e.yieldX(i,p(u))))o.$throw(!1,r.$$is_lambda);else return a},{$$arity:-1,$$ret:o}):z(n,"each",[],function r($){var s,u,w=a;if(s=H(arguments),u=s,w=U.$destructure(u),t(w))o.$throw(!1,r.$$is_lambda);else return a},{$$arity:-1,$$ret:o}),!0}catch(r){if(r===o)return r.$v;throw r}finally{o.is_orphan=!0}},-1),Z(d,"$one?",function h(_){try{var o=$e("return"),i=h.$$p||a,n=this,r=a;return h.$$p=null,r=0,t(_!==void 0)?z(n,"each",[],function $(s){var u,w,I=a;if(u=H(arguments),w=u,I=V(w),t(z(_,"public_send",["==="].concat(p(I)))))if(r=W(r,1),t(O(r,1)))o.$throw(!1,$.$$is_lambda);else return a;else return a},{$$arity:-1,$$ret:o}):i!==a?z(n,"each",[],function $(s){var u,w;if(u=H(arguments),w=u,!t(e.yieldX(i,p(w))))return a;if(r=W(r,1),t(O(r,1)))o.$throw(!1,$.$$is_lambda);else return a},{$$arity:-1,$$ret:o}):z(n,"each",[],function $(s){var u,w;if(u=H(arguments),w=u,!t(U.$destructure(w)))return a;if(r=W(r,1),t(O(r,1)))o.$throw(!1,$.$$is_lambda);else return a},{$$arity:-1,$$ret:o}),r["$=="](1)}catch($){if($===o)return $.$v;throw $}finally{o.is_orphan=!0}},-1),Z(d,"$partition",function h(){var _=h.$$p||a,o=this;if(h.$$p=null,_===a)return z(o,"enum_for",["partition"],function r(){var $=r.$$s==null?this:r.$$s;return $.$enumerator_size()},{$$s:o});var i=[],n=[];return o.$each.$$p=function(){var r=U.$destructure(arguments),$=g(_,r);t($)?i.push(r):n.push(r)},o.$each(),[i,n]}),Z(d,"$reject",function h(){var _=h.$$p||a,o=this;if(h.$$p=null,_===a)return z(o,"enum_for",["reject"],function n(){var r=n.$$s==null?this:n.$$s;return r.$enumerator_size()},{$$s:o});var i=[];return o.$each.$$p=function(){var n=U.$destructure(arguments),r=g(_,n);t(r)||i.push(n)},o.$each(),i}),Z(d,"$reverse_each",function h(){var _=h.$$p||a,o=this;if(h.$$p=null,_===a)return z(o,"enum_for",["reverse_each"],function r(){var $=r.$$s==null?this:r.$$s;return $.$enumerator_size()},{$$s:o});var i=[];o.$each.$$p=function(){i.push(arguments)},o.$each();for(var n=i.length-1;n>=0;n--)v(_,i[n]);return i}),Z(d,"$slice_before",function h(_){var o=h.$$p||a,i=this;return h.$$p=null,t(_===void 0&&o===a)&&Q.$raise(m("ArgumentError"),"both pattern and block are given"),t(_!==void 0&&o!==a||arguments.length>1)&&Q.$raise(m("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),z(m("Enumerator"),"new",[],function n(r){var $=n.$$s==null?this:n.$$s;r==null&&(r=a);var s=[];o!==a?_===void 0?$.$each.$$p=function(){var u=U.$destructure(arguments),w=g(o,u);t(w)&&s.length>0&&(r["$<<"](s),s=[]),s.push(u)}:$.$each.$$p=function(){var u=U.$destructure(arguments),w=o(u,_.$dup());t(w)&&s.length>0&&(r["$<<"](s),s=[]),s.push(u)}:$.$each.$$p=function(){var u=U.$destructure(arguments),w=_["$==="](u);t(w)&&s.length>0&&(r["$<<"](s),s=[]),s.push(u)},$.$each(),s.length>0&&r["$<<"](s)},{$$s:i})},-1),Z(d,"$slice_after",function h(_){var o=h.$$p||a,i=this;return h.$$p=null,t(_===void 0&&o===a)&&Q.$raise(m("ArgumentError"),"both pattern and block are given"),t(_!==void 0&&o!==a||arguments.length>1)&&Q.$raise(m("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),t(_!==void 0)&&(o=z(Q,"proc",[],function(r){return r==null&&(r=a),_["$==="](r)})),z(m("Enumerator"),"new",[],function n(r){var $=n.$$s==null?this:n.$$s;r==null&&(r=a);var s;$.$each.$$p=function(){var u=U.$destructure(arguments),w=g(o,u);s==null&&(s=[]),t(w)?(s.push(u),r.$yield(s),s=null):s.push(u)},$.$each(),s!=null&&r.$yield(s)},{$$s:i})},-1),Z(d,"$slice_when",function h(){var _=h.$$p||a,o=this;return h.$$p=null,_===a&&Q.$raise(m("ArgumentError"),"wrong number of arguments (0 for 1)"),z(m("Enumerator"),"new",[],function i(n){var r=i.$$s==null?this:i.$$s;n==null&&(n=a);var $=a,s=a;r.$each_cons.$$p=function(){var u=U.$destructure(arguments),w=u[0],I=u[1],D=v(_,[w,I]);s=I,$===a&&($=[]),t(D)?($.push(w),n.$yield($),$=[]):$.push(w)},r.$each_cons(2),$!==a&&($.push(s),n.$yield($))},{$$s:o})}),Z(d,"$sort",function h(){var _=h.$$p||a,o=this,i=a;return h.$$p=null,i=o.$to_a(),_===a&&(_=q(function(r,$){return r==null&&(r=a),$==null&&($=a),r["$<=>"]($)})),z(i,"sort",[],_.$to_proc())}),Z(d,"$sort_by",function h(){var _=h.$$p||a,o=this,i=a;return h.$$p=null,_===a?z(o,"enum_for",["sort_by"],function n(){var r=n.$$s==null?this:n.$$s;return r.$enumerator_size()},{$$s:o}):(i=z(o,"map",[],function(){var r=a;return r=U.$destructure(arguments),[e.yield1(_,r),r]}),z(i,"sort!",[],function(r,$){return r==null&&(r=a),$==null&&($=a),r[0]["$<=>"]($[0])}),z(i,"map!",[],function(r){return r==null&&(r=a),r[1]}))}),Z(d,"$sum",function h(_){var o=h.$$p||a,i=this,n=a,r=a;return h.$$p=null,_==null&&(_=0),n=_,r=0,z(i,"each",[],function(s){var u,w,I=a,D=a,S=a;return u=H(arguments),w=u,I=o!==a?e.yieldX(o,p(w)):U.$destructure(w),B([m(m("Float"),"INFINITY"),m(m("Float"),"INFINITY")["$-@"]()]["$include?"](I))&&t(I["$respond_to?"]("-"))?(D=M(I,r),S=W(n,D),r=M(M(S,n),D),n=S):n=W(n,I)},-1),n},-1),Z(d,"$take",function(_){var o=this;return o.$first(_)}),Z(d,"$take_while",function h(){try{var _=$e("return"),o=h.$$p||a,i=this,n=a;return h.$$p=null,t(o)?(n=[],z(i,"each",[],function r($){var s,u,w=a;return s=H(arguments),u=s,w=U.$destructure(u),t(e.yield1(o,w))||_.$throw(n,r.$$is_lambda),n.push(w)},{$$arity:-1,$$ret:_})):i.$enum_for("take_while")}catch(r){if(r===_)return r.$v;throw r}finally{_.is_orphan=!0}}),Z(d,"$uniq",function h(){var _=h.$$p||a,o=this,i=a;return h.$$p=null,i=new Map,z(o,"each",[],function(r){var $,s,u,w=a,I=a;return $=H(arguments),s=$,w=U.$destructure(s),I=_!==a?e.yield1(_,w):w,t(i["$key?"](I))?a:(u=[I,w],z(i,"[]=",u),u[u.length-1])},-1),i.$values()}),Z(d,"$tally",function(_){var o=this,i=a;return _&&_!==a&&X(_),i=z(z(o,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),t(_)?(z(i,"each",[],function(r,$){var s;return r==null&&(r=a),$==null&&($=a),s=[r,W(_.$fetch(r,0),$)],z(_,"[]=",s),s[s.length-1]}),_):i},-1),Z(d,"$to_h",function h(_){var o=h.$$p||a,i,n,r=this;if(h.$$p=null,i=H(arguments),n=i,o!==a)return z(z(r,"map",[],o.$to_proc()),"to_h",p(n));var $=new Map;return r.$each.$$p=function(){var s=U.$destructure(arguments),u=U["$coerce_to?"](s,m("Array"),"to_ary"),w,I;u.$$is_array||Q.$raise(m("TypeError"),"wrong element type "+s.$class()+" (expected array)"),u.length!==2&&Q.$raise(m("ArgumentError"),"element has wrong array length (expected 2, was "+u.$length()+")"),w=u[0],I=u[1],e.hash_put($,w,I)},r.$each.apply(r,n),$},-1),Z(d,"$to_set",function h(_,o){var i=h.$$p||a,n,r,$,s=this;return h.$$p=null,n=H(arguments),n.length>0&&(r=n.shift()),r==null&&(r=J("Set")),$=n,z(r,"new",[s].concat(p($)),i.$to_proc())},-1),Z(d,"$zip",function h(_){h.$$p;var o,i,n=this;return h.$$p=null,o=H(arguments),i=o,z(n.$to_a(),"zip",p(i))},-1),F(d,"find","detect"),F(d,"filter","find_all"),F(d,"flat_map","collect_concat"),F(d,"map","collect"),F(d,"member?","include?"),F(d,"reduce","inject"),F(d,"select","find_all"),F(d,"to_a","entries")}("::",A)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(e){var t=e.klass,l=e.truthy,g=e.to_a,v=e.eqeq,X=e.Kernel,Y=e.def,z=e.rb_gt,H=e.rb_lt,p=e.rb_le,U=e.rb_ge,$e=e.rb_plus,Z=e.rb_minus,Q=e.eqeqeq,ne=e.not,O=e.rb_times,k=e.rb_divide,C=e.alias,P=[],W=e.nil,M=e.$$$;return e.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(L,E,q){var B=t(L,E,"Enumerator"),F=[B].concat(q);return function(A,a,m){var T=t(A,a,"ArithmeticSequence"),y=[T].concat(m),d=e.$r(y),c=T.$$prototype;c.step_arg2=c.receiver_num=c.step_arg1=c.step=c.range=c.topfx=c.bypfx=c.creation_method=c.skipped_arg=W,e.prop(T.$$prototype,"$$is_arithmetic_seq",!0);var J=1/0;return Y(T,"$initialize",function(h,_,o){var i,n=this,r=W;return o==null&&(o="step"),n.creation_method=o,l(h["$is_a?"](M("Array")))?(i=[].concat(g(h)),n.step_arg1=i[0]==null?W:i[0],n.step_arg2=i[1]==null?W:i[1],n.topfx=i[2]==null?W:i[2],n.bypfx=i[3]==null?W:i[3],n.receiver_num=_,n.step=1,n.range=l(n.step_arg2)?(n.step=n.step_arg2,e.Range.$new(n.receiver_num,n.step_arg1,!1)):l(n.step_arg1)?e.Range.$new(n.receiver_num,n.step_arg1,!1):e.Range.$new(n.receiver_num,W,!1)):(l(_)||(n.skipped_arg=!0),i=[h,l(r=_)?r:1],n.range=i[0],n.step=i[1]),n.object=n,v(n.step,0)&&X.$raise(d("ArgumentError"),"step can't be 0"),l(n.step["$respond_to?"]("to_int"))?W:X.$raise(d("ArgumentError"),"no implicit conversion of "+n.step.$class()+" into Integer")},-2),T.$attr_reader("step"),Y(T,"$begin",function(){var h=this;return h.range.$begin()}),Y(T,"$end",function(){var h=this;return h.range.$end()}),Y(T,"$exclude_end?",function(){var h=this;return h.range["$exclude_end?"]()}),Y(T,"$_lesser_than_end?",function(h){var _=this,o=W,i=W;return o=l(i=_.$end())?i:J,l(z(_.$step(),0))?l(_["$exclude_end?"]())?H(h,o):p(h,o):l(_["$exclude_end?"]())?z(h,o):U(h,o)}),Y(T,"$_greater_than_begin?",function(h){var _=this,o=W,i=W;return o=l(i=_.$begin())?i:J["$-@"](),l(z(_.$step(),0))?z(h,o):H(h,o)}),Y(T,"$first",function(h){var _=this,o=W,i=W,n=W;if(o=l(i=_.$begin())?i:J["$-@"](),!l(h))return l(_["$_lesser_than_end?"](o))?o:W;for(n=[];l(l(i=_["$_lesser_than_end?"](o))?z(h,0):i);)n["$<<"](o),o=$e(o,_.$step()),h=Z(h,1);return n},-1),Y(T,"$each",function V(){var h=V.$$p||W,_=this,o=W,i=W;if(V.$$p=null,h===W)return _;for(Q(W,o=_.$begin())&&X.$raise(d("TypeError"),"nil can't be coerced into Integer"),i=l(o=_.$begin())?o:J["$-@"]();l(_["$_lesser_than_end?"](i));)e.yield1(h,i),i=$e(i,_.$step());return _}),Y(T,"$last",function(h){var _=this,o=W,i=W,n=W;if(Q(J,o=_.$end())||Q(J["$-@"](),o)?X.$raise(M("FloatDomainError"),_.$end()):Q(W,o)&&X.$raise(M("RangeError"),"cannot get the last element of endless arithmetic sequence"),i=Z(_.$end(),Z(_.$end(),_.$begin())["$%"](_.$step())),l(_["$_lesser_than_end?"](i))||(i=Z(i,_.$step())),!l(h))return l(_["$_greater_than_begin?"](i))?i:W;for(n=[];l(l(o=_["$_greater_than_begin?"](i))?z(h,0):o);)n["$<<"](i),i=Z(i,_.$step()),h=Z(h,1);return n.$reverse()},-1),Y(T,"$size",function(){var h=this,_=W,o=W;return _=l(z(h.$step(),0))?1:-1,ne(h["$_lesser_than_end?"](h.$begin()))?0:l([J["$-@"](),J]["$include?"](h.$step()))?1:l([O(J["$-@"](),_),W]["$include?"](h.$begin()))||l([O(J,_),W]["$include?"](h.$end()))?J:(o=Z(h.$end(),Z(h.$end(),h.$begin())["$%"](h.$step())),l(h["$_lesser_than_end?"](o))||(o=Z(o,h.$step())),$e(k(Z(o,h.$begin()),h.$step()).$abs().$to_i(),1))}),Y(T,"$==",function(h){var _=this,o=W,i=W,n=W,r=W;return l(o=l(i=l(n=l(r=_.$class()["$=="](h.$class()))?_.$begin()["$=="](h.$begin()):r)?_.$end()["$=="](h.$end()):n)?_.$step()["$=="](h.$step()):i)?_["$exclude_end?"]()["$=="](h["$exclude_end?"]()):o}),Y(T,"$hash",function(){var h=this;return[d("ArithmeticSequence"),h.$begin(),h.$end(),h.$step(),h["$exclude_end?"]()].$hash()}),Y(T,"$inspect",function(){var h=this,_=W;return l(h.receiver_num)?(_=l(h.step_arg2)?"("+h.topfx+h.step_arg1.$inspect()+", "+h.bypfx+h.step_arg2.$inspect()+")":l(h.step_arg1)?"("+h.topfx+h.step_arg1.$inspect()+")":W,"("+h.receiver_num.$inspect()+"."+h.creation_method+_+")"):(_=l(h.skipped_arg)?W:"("+h.step+")","(("+h.range.$inspect()+")."+h.creation_method+_+")")}),C(T,"===","=="),C(T,"eql?","==")}(B,B,F)}("::",null,P)};Opal.modules["corelib/enumerator/chain"]=function(e){var t=e.deny_frozen_access,l=e.klass,g=e.slice,v=e.def,X=e.send,Y=e.to_a,z=e.truthy,H=e.rb_plus,p=e.thrower,U=e.nil,$e=e.$$$;return e.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(Z,Q){var ne=l(Z,Q,"Enumerator");return function(O,k){var C=l(O,k,"Chain"),P=C.$$prototype;return P.enums=P.iterated=U,v(C,"$initialize",function(M){var L,E,q=this;return L=g(arguments),E=L,t(q),q.enums=E,q.iterated=[],q.object=q},-1),v(C,"$each",function W(M){var L=W.$$p||U,E,q,B=this;return W.$$p=null,E=g(arguments),q=E,L===U?X(B,"to_enum",["each"].concat(Y(q)),function F(){var A=F.$$s==null?this:F.$$s;return A.$size()},{$$s:B}):(X(B.enums,"each",[],function F(A){var a=F.$$s==null?this:F.$$s;return a.iterated==null&&(a.iterated=U),A==null&&(A=U),a.iterated["$<<"](A),X(A,"each",Y(q),L.$to_proc())},{$$s:B}),B)},-1),v(C,"$size",function(M){try{var L=p("return"),E,q,B=this,F=U;return E=g(arguments),q=E,F=0,X(B.enums,"each",[],function A(a){var m=U;return a==null&&(a=U),m=X(a,"size",Y(q)),z([U,$e($e("Float"),"INFINITY")]["$include?"](m))&&L.$throw(m,A.$$is_lambda),F=H(F,m)},{$$ret:L}),F}catch(A){if(A===L)return A.$v;throw A}finally{L.is_orphan=!0}},-1),v(C,"$rewind",function(){var M=this;return X(M.iterated,"reverse_each",[],function(E){return E==null&&(E=U),z(E["$respond_to?"]("rewind"))?E.$rewind():U}),M.iterated=[],M}),v(C,"$inspect",function(){var M=this;return"#<Enumerator::Chain: "+M.enums.$inspect()+">"})}(ne,ne)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(e){var t=e.deny_frozen_access,l=e.klass,g=e.truthy,v=e.Kernel,X=e.def,Y=e.slice,z=e.send,H=[],p=e.nil,U=e.$$$;return e.add_stubs("include,raise,new,to_proc"),function($e,Z,Q){var ne=l($e,Z,"Enumerator"),O=[ne].concat(Q);return function(k,C,P){var W=l(k,C,"Generator"),M=[W].concat(P),L=e.$r(M),E=W.$$prototype;return E.block=p,W.$include(U("Enumerable")),X(W,"$initialize",function q(){var B=q.$$p||p,F=this;return q.$$p=null,t(F),g(B)||v.$raise(U("LocalJumpError"),"no block given"),F.block=B}),X(W,"$each",function q(B){var F=q.$$p||p,A,a,m=this,T=p;q.$$p=null,A=Y(arguments),a=A,T=z(L("Yielder"),"new",[],F.$to_proc());try{a.unshift(T),e.yieldX(m.block,a)}catch(y){if(y&&y.$thrower_type=="breaker")return y.$v;throw y}return m},-1)}(O[0],null,O)}(H[0],null,H)};Opal.modules["corelib/enumerator/lazy"]=function(e){var t=e.truthy,l=e.coerce_to,g=e.yield1,v=e.yieldX,X=e.deny_frozen_access,Y=e.klass,z=e.slice,H=e.send2,p=e.find_super,U=e.to_a,$e=e.defs,Z=e.Kernel,Q=e.send,ne=e.def,O=e.return_self,k=e.Opal,C=e.rb_lt,P=e.eqeqeq,W=e.rb_plus,M=e.alias,L=[],E=e.nil,q=e.$$$;return e.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(B,F,A){var a=Y(B,F,"Enumerator"),m=[a].concat(A);return function(T,y,d){var c=Y(T,y,"Lazy"),J=[c].concat(d),V=e.$r(J),h=c.$$prototype;return h.enumerator=E,Y(c,q("Exception"),"StopLazyError"),$e(c,"$for",function _(o,i){var n,r,$=_.$$p||E,s=this,u=E;return _.$$p=null,n=z(arguments,1),r=n,u=H(s,p(s,"for",_,!1,!0),"for",[o].concat(U(r)),$),u.enumerator=o,u},-2),ne(c,"$initialize",function _(o,i){var n=_.$$p||E,r=this;return _.$$p=null,i==null&&(i=E),X(r),n===E&&Z.$raise(q("ArgumentError"),"tried to call lazy new without a block"),r.enumerator=o,H(r,p(r,"initialize",_,!1,!0),"initialize",[i],function(s,u){var w,I;s==null&&(s=E),w=z(arguments,1),I=w;try{return Q(o,"each",U(I),function(S){var j,re;j=z(arguments),re=j,re.unshift(s),v(n,re)},-1)}catch(D){if(e.rescue(D,[V("StopLazyError")]))try{return E}finally{e.pop_exception(D)}else throw D}},-2)},-2),ne(c,"$lazy",O),ne(c,"$collect",function _(){var o=_.$$p||E,i=this;return _.$$p=null,t(o)||Z.$raise(q("ArgumentError"),"tried to call lazy map without a block"),Q(V("Lazy"),"new",[i,i.$enumerator_size()],function(r,$){var s,u;r==null&&(r=E),s=z(arguments,1),u=s;var w=v(o,u);r.$yield(w)},-2)}),ne(c,"$collect_concat",function _(){var o=_.$$p||E,i=this;return _.$$p=null,t(o)||Z.$raise(q("ArgumentError"),"tried to call lazy map without a block"),Q(V("Lazy"),"new",[i,E],function(r,$){var s,u;r==null&&(r=E),s=z(arguments,1),u=s;var w=v(o,u);if(w["$respond_to?"]("force")&&w["$respond_to?"]("each"))Q(w,"each",[],function(S){return S==null&&(S=E),r.$yield(S)});else{var I=k.$try_convert(w,q("Array"),"to_ary");I===E?r.$yield(w):Q(w,"each",[],function(S){return S==null&&(S=E),r.$yield(S)})}},-2)}),ne(c,"$drop",function(o){var i=this,n=E,r=E,$=E;return o=l(o,q("Integer"),"to_int"),t(C(o,0))&&Z.$raise(q("ArgumentError"),"attempt to drop negative size"),n=i.$enumerator_size(),r=P(q("Integer"),n)&&t(C(o,n))?o:n,$=0,Q(V("Lazy"),"new",[i,r],function(u,w){var I,D;return u==null&&(u=E),I=z(arguments,1),D=I,t(C($,o))?$=W($,1):Q(u,"yield",U(D))},-2)}),ne(c,"$drop_while",function _(){var o=_.$$p||E,i=this,n=E;return _.$$p=null,t(o)||Z.$raise(q("ArgumentError"),"tried to call lazy drop_while without a block"),n=!0,Q(V("Lazy"),"new",[i,E],function($,s){var u,w;if($==null&&($=E),u=z(arguments,1),w=u,t(n)){var I=v(o,w);t(I)||(n=!1,Q($,"yield",U(w)))}else return Q($,"yield",U(w))},-2)}),ne(c,"$enum_for",function _(o,i){var n=_.$$p||E,r,$,s,u=this;return _.$$p=null,r=z(arguments),r.length>0&&($=r.shift()),$==null&&($="each"),s=r,Q(u.$class(),"for",[u,$].concat(U(s)),n.$to_proc())},-1),ne(c,"$find_all",function _(){var o=_.$$p||E,i=this;return _.$$p=null,t(o)||Z.$raise(q("ArgumentError"),"tried to call lazy select without a block"),Q(V("Lazy"),"new",[i,E],function(r,$){var s,u;r==null&&(r=E),s=z(arguments,1),u=s;var w=v(o,u);t(w)&&Q(r,"yield",U(u))},-2)}),ne(c,"$grep",function _(o){var i=_.$$p||E,n=this;return _.$$p=null,t(i)?Q(V("Lazy"),"new",[n,E],function($,s){var u,w;$==null&&($=E),u=z(arguments,1),w=u;var I=k.$destructure(w),D=o["$==="](I);t(D)&&(D=g(i,I),$.$yield(g(i,I)))},-2):Q(V("Lazy"),"new",[n,E],function($,s){var u,w;$==null&&($=E),u=z(arguments,1),w=u;var I=k.$destructure(w),D=o["$==="](I);t(D)&&$.$yield(I)},-2)}),ne(c,"$reject",function _(){var o=_.$$p||E,i=this;return _.$$p=null,t(o)||Z.$raise(q("ArgumentError"),"tried to call lazy reject without a block"),Q(V("Lazy"),"new",[i,E],function(r,$){var s,u;r==null&&(r=E),s=z(arguments,1),u=s;var w=v(o,u);t(w)||Q(r,"yield",U(u))},-2)}),ne(c,"$take",function(o){var i=this,n=E,r=E,$=E;return o=l(o,q("Integer"),"to_int"),t(C(o,0))&&Z.$raise(q("ArgumentError"),"attempt to take negative size"),n=i.$enumerator_size(),r=P(q("Integer"),n)&&t(C(o,n))?o:n,$=0,Q(V("Lazy"),"new",[i,r],function(u,w){var I,D;return u==null&&(u=E),I=z(arguments,1),D=I,t(C($,o))?(Q(u,"yield",U(D)),$=W($,1)):Z.$raise(V("StopLazyError"))},-2)}),ne(c,"$take_while",function _(){var o=_.$$p||E,i=this;return _.$$p=null,t(o)||Z.$raise(q("ArgumentError"),"tried to call lazy take_while without a block"),Q(V("Lazy"),"new",[i,E],function(r,$){var s,u;r==null&&(r=E),s=z(arguments,1),u=s;var w=v(o,u);t(w)?Q(r,"yield",U(u)):Z.$raise(V("StopLazyError"))},-2)}),ne(c,"$inspect",function(){var o=this;return"#<"+o.$class()+": "+o.enumerator.$inspect()+">"}),M(c,"force","to_a"),M(c,"filter","find_all"),M(c,"flat_map","collect_concat"),M(c,"map","collect"),M(c,"select","find_all"),M(c,"to_enum","enum_for")}(a,a,m)}("::",null,L)};Opal.modules["corelib/enumerator/yielder"]=function(e){var t=e.klass,l=e.def,g=e.slice,v=e.send,X=e.to_a,Y=[],z=e.nil;return e.add_stubs("yield,proc"),function(H,p,U){var $e=t(H,p,"Enumerator"),Z=[$e].concat(U);return function(Q,ne){var O=t(Q,ne,"Yielder"),k=O.$$prototype;return k.block=z,l(O,"$initialize",function C(){var P=C.$$p||z,W=this;return C.$$p=null,W.block=P,W}),l(O,"$yield",function(P){var W,M,L=this;W=g(arguments),M=W;var E=e.yieldX(L.block,M);if(E&&E.$thrower_type=="break")throw E;return E},-1),l(O,"$<<",function(P){var W=this;return W.$yield(P),W}),l(O,"$to_proc",function(){var P=this;return v(P,"proc",[],function W(M){var L,E,q=W.$$s==null?this:W.$$s;return L=g(arguments),E=L,v(q,"yield",X(E))},{$$arity:-1,$$s:P})})}(Z[0],null)}(Y[0],null,Y)};Opal.modules["corelib/enumerator"]=function(e){var t=e.slice,l=e.coerce_to,g=e.deny_frozen_access,v=e.klass,X=e.defs,Y=e.truthy,z=e.send,H=e.not,p=e.def,U=e.rb_plus,$e=e.to_a,Z=e.Opal,Q=e.send2,ne=e.find_super,O=e.rb_ge,k=e.Kernel,C=e.rb_le,P=e.alias,W=e.top,M=[],L=e.nil,E=e.$$$;return e.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),W.$require("corelib/enumerable"),function(q,B,F){var A=v(q,B,"Enumerator"),a=[A].concat(F),m=e.$r(a),T=A.$$prototype;return T.size=T.args=T.object=T.method=T.values=T.cursor=L,A.$include(E("Enumerable")),A.$$prototype.$$is_enumerator=!0,X(A,"$for",function y(d,c,J){var V=y.$$p||L,h,_,o,i=this;y.$$p=null,h=t(arguments,1),h.length>0&&(_=h.shift()),_==null&&(_="each"),o=h;var n=i.$allocate();return n.object=d,n.size=V,n.method=_,n.args=o,n.cursor=0,n},-2),p(A,"$initialize",function y(d){var c=y.$$p||L,J=this;return y.$$p=null,t(arguments),g(J),J.cursor=0,Y(c)?(J.object=z(m("Generator"),"new",[],c.$to_proc()),J.method="each",J.args=[],J.size=arguments[0]||L,Y(J.size)&&H(J.size["$respond_to?"]("call"))?J.size=l(J.size,E("Integer"),"to_int"):L):(J.object=arguments[0],J.method=arguments[1]||"each",J.args=t(arguments,2),J.size=L)},-1),p(A,"$each",function y(d){var c=y.$$p||L,J,V,h=this;return y.$$p=null,J=t(arguments),V=J,Y(c["$nil?"]())&&Y(V["$empty?"]())?h:(V=U(h.args,V),Y(c["$nil?"]())?z(h.$class(),"new",[h.object,h.method].concat($e(V))):z(h.object,"__send__",[h.method].concat($e(V)),c.$to_proc()))},-1),p(A,"$size",function(){var d=this;return Y(d.size["$respond_to?"]("call"))?z(d.size,"call",$e(d.args)):d.size}),p(A,"$with_index",function y(d){var c=y.$$p||L,J=this;if(y.$$p=null,d==null&&(d=0),d=Y(d)?l(d,E("Integer"),"to_int"):0,!Y(c))return z(J,"enum_for",["with_index",d],function h(){var _=h.$$s==null?this:h.$$s;return _.$size()},{$$s:J});var V=d;return J.$each.$$p=function(){var h=Z.$destructure(arguments),_=c(h,V);return V++,_},J.$each()},-1),p(A,"$each_with_index",function y(){var d=y.$$p||L,c=this;return y.$$p=null,d===L?z(c,"enum_for",["each_with_index"],function J(){var V=J.$$s==null?this:J.$$s;return V.$size()},{$$s:c}):(Q(c,ne(c,"each_with_index",y,!1,!0),"each_with_index",[],d),c.object)}),p(A,"$rewind",function(){var d=this;return d.cursor=0,d}),p(A,"$peek_values",function(){var d=this,c=L;return d.values=Y(c=d.values)?c:z(d,"map",[],function(V){var h,_;return h=t(arguments),_=h,_},-1),Y(O(d.cursor,d.values.$length()))&&k.$raise(E("StopIteration"),"iteration reached an end"),d.values["$[]"](d.cursor)}),p(A,"$peek",function(){var d=this,c=L;return c=d.$peek_values(),Y(C(c.$length(),1))?c["$[]"](0):c}),p(A,"$next_values",function(){var d=this,c=L;return c=d.$peek_values(),d.cursor=U(d.cursor,1),c}),p(A,"$next",function(){var d=this,c=L;return c=d.$next_values(),Y(C(c.$length(),1))?c["$[]"](0):c}),p(A,"$feed",function(d){var c=this;return c.$raise(m("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),p(A,"$+",function(d){var c=this;return E(E("Enumerator"),"Chain").$new(c,d)}),p(A,"$inspect",function(){var d=this,c=L;return c="#<"+d.$class()+": "+d.object.$inspect()+":"+d.method,Y(d.args["$any?"]())&&(c=U(c,"("+d.args.$inspect()["$[]"](E("Range").$new(1,-2))+")")),U(c,">")}),P(A,"with_object","each_with_object"),A.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),A.$autoload("Chain","corelib/enumerator/chain"),A.$autoload("Generator","corelib/enumerator/generator"),A.$autoload("Lazy","corelib/enumerator/lazy"),A.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,M)};Opal.modules["corelib/numeric"]=function(e){var t=e.klass,l=e.truthy,g=e.Kernel,v=e.def,X=e.to_ary,Y=e.return_self,z=e.rb_minus,H=e.rb_times,p=e.rb_lt,U=e.eqeq,$e=e.rb_divide,Z=e.return_val,Q=e.Opal,ne=e.slice,O=e.extract_kwargs,k=e.ensure_kwargs,C=e.hash_get,P=e.not,W=e.send,M=e.rb_ge,L=e.rb_le,E=e.rb_plus,q=e.rb_gt,B=e.alias,F=e.top,A=e.nil,a=e.$$$;return e.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),F.$require("corelib/comparable"),function(m,T){var y=t(m,T,"Numeric");return y.$include(a("Comparable")),v(y,"$coerce",function(c){var J=this;return l(c["$instance_of?"](J.$class()))?[c,J]:[g.$Float(c),g.$Float(J)]}),v(y,"$__coerced__",function(c,J){var V,h,_=this,o=A,i=A;if(l(J["$respond_to?"]("coerce")))return h=J.$coerce(_),V=X(h),o=V[0]==null?A:V[0],i=V[1]==null?A:V[1],o.$__send__(c,i);switch(c.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return g.$raise(a("TypeError"),""+J.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return g.$raise(a("ArgumentError"),"comparison of "+_.$class()+" with "+J.$class()+" failed");default:return A}}),v(y,"$<=>",function(c){var J=this;return l(J["$equal?"](c))?0:A}),v(y,"$+@",Y),v(y,"$-@",function(){var c=this;return z(0,c)}),v(y,"$%",function(c){var J=this;return z(J,H(c,J.$div(c)))}),v(y,"$abs",function(){var c=this;return l(p(c,0))?c["$-@"]():c}),v(y,"$abs2",function(){var c=this;return H(c,c)}),v(y,"$angle",function(){var c=this;return l(p(c,0))?a(a("Math"),"PI"):0}),v(y,"$ceil",function(c){var J=this;return c==null&&(c=0),J.$to_f().$ceil(c)},-1),v(y,"$conj",Y),v(y,"$denominator",function(){var c=this;return c.$to_r().$denominator()}),v(y,"$div",function(c){var J=this;return U(c,0)&&g.$raise(a("ZeroDivisionError"),"divided by o"),$e(J,c).$floor()}),v(y,"$divmod",function(c){var J=this;return[J.$div(c),J["$%"](c)]}),v(y,"$fdiv",function(c){var J=this;return $e(J.$to_f(),c)}),v(y,"$floor",function(c){var J=this;return c==null&&(c=0),J.$to_f().$floor(c)},-1),v(y,"$i",function(){var c=this;return g.$Complex(0,c)}),v(y,"$imag",Z(0)),v(y,"$integer?",Z(!1)),v(y,"$nonzero?",function(){var c=this;return l(c["$zero?"]())?A:c}),v(y,"$numerator",function(){var c=this;return c.$to_r().$numerator()}),v(y,"$polar",function(){var c=this;return[c.$abs(),c.$arg()]}),v(y,"$quo",function(c){var J=this;return $e(Q["$coerce_to!"](J,a("Rational"),"to_r"),c)}),v(y,"$real",Y),v(y,"$real?",Z(!0)),v(y,"$rect",function(){var c=this;return[c,0]}),v(y,"$round",function(c){var J=this;return J.$to_f().$round(c)},-1),v(y,"$step",function d(c,J,V){var h=d.$$p||A,_,o,i,n,r,$,s=this,u=A;d.$$p=null,_=ne(arguments),o=O(_),o=k(o),_.length>0&&(i=_.shift()),_.length>0&&(n=_.shift()),r=C(o,"to"),$=C(o,"by"),i!==void 0&&r!==void 0&&g.$raise(a("ArgumentError"),"to is given twice"),n!==void 0&&$!==void 0&&g.$raise(a("ArgumentError"),"step is given twice"),r!==void 0&&(i=r),$!==void 0&&(n=$),i===void 0&&(i=A);function w(){n===A&&g.$raise(a("TypeError"),"step must be numeric"),n!=null&&n["$=="](0)&&g.$raise(a("ArgumentError"),"step can't be 0"),(n===A||n==null)&&(n=1);var ge=n["$<=>"](0);ge===A&&g.$raise(a("ArgumentError"),"0 can't be coerced into "+n.$class()),(i===A||i==null)&&(i=ge>0?a(a("Float"),"INFINITY"):a(a("Float"),"INFINITY")["$-@"]()),Q.$compare(s,i)}function I(){if(n>0&&s>i||n<0&&s<i)return 0;if(n===1/0||n===-1/0)return 1;var ge=Math.abs,me=Math.floor,ve=(ge(s)+ge(i)+ge(i-s))/ge(n)*a(a("Float"),"EPSILON");return ve===1/0||ve===-1/0?0:(ve>.5&&(ve=.5),me((i-s)/n+ve)+1)}function D(){if(w(),n===0)return 1/0;if(n%1!==0)return I();if(n>0&&s>i||n<0&&s<i)return 0;var ge=Math.ceil,me=Math.abs,ve=me(s-i)+1,be=me(n);return ge(ve/be)}if(h===A)return(P(i)||l(i["$is_a?"](a("Numeric"))))&&(P(n)||l(n["$is_a?"](a("Numeric"))))?a(a("Enumerator"),"ArithmeticSequence").$new([i,n,l(r)?"to: ":A,l($)?"by: ":A],s):W(s,"enum_for",["step",i,n],D.$to_proc());w();var S=n["$negative?"](),j=n["$=="](0)||i===1/0&&!S||i===-1/0&&S;if(s.$$is_number&&n.$$is_number&&i.$$is_number)if(s%1===0&&(j||i%1===0)&&n%1===0){var re=s;if(j)for(;;re+=n)h(re);else if(S)for(;re>=i;re+=n)h(re);else for(;re<=i;re+=n)h(re);return s}else{var oe=s.$to_f().valueOf();n=n.$to_f().valueOf(),i=i.$to_f().valueOf();var le=I();if(!isFinite(n))le!==0&&h(oe);else if(n===0)for(;;)h(oe);else for(var _e=0;_e<le;_e++){var he=_e*n+s;(n>=0?i<he:i>he)&&(he=i),h(he)}return s}for(u=s;l(S?M(u,i):L(u,i));)e.yield1(h,u),u=E(u,n)},-1),v(y,"$to_c",function(){var c=this;return g.$Complex(c,0)}),v(y,"$to_int",function(){var c=this;return c.$to_i()}),v(y,"$truncate",function(c){var J=this;return c==null&&(c=0),J.$to_f().$truncate(c)},-1),v(y,"$zero?",function(){var c=this;return c["$=="](0)}),v(y,"$positive?",function(){var c=this;return q(c,0)}),v(y,"$negative?",function(){var c=this;return p(c,0)}),v(y,"$dup",Y),v(y,"$clone",function(c){var J=this;return c=k(c),C(c,"freeze"),J},-1),v(y,"$finite?",Z(!0)),v(y,"$infinite?",Z(A)),B(y,"arg","angle"),B(y,"conjugate","conj"),B(y,"imaginary","imag"),B(y,"magnitude","abs"),B(y,"modulo","%"),B(y,"phase","arg"),B(y,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(e){var t=e.truthy,l=e.falsy,g=e.yield1,v=e.hash_get,X=e.hash_put,Y=e.hash_delete,z=e.coerce_to,H=e.respond_to,p=e.deny_frozen_access,U=e.freeze,$e=e.opal32_init,Z=e.opal32_add,Q=e.klass,ne=e.slice,O=e.defs,k=e.Kernel,C=e.def,P=e.Opal,W=e.eqeqeq,M=e.send2,L=e.find_super,E=e.send,q=e.rb_gt,B=e.rb_times,F=e.eqeq,A=e.rb_minus,a=e.to_a,m=e.to_ary,T=e.gvars,y=e.rb_ge,d=e.assign_ivar,c=e.rb_lt,J=e.return_self,V=e.neqeq,h=e.alias,_=e.top,o=[],i=e.nil,n=e.$$$;return e.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),_.$require("corelib/enumerable"),_.$require("corelib/numeric"),function(r,$,s){var u=Q(r,$,"Array"),w=[u].concat(s),I=e.$r(w);u.$include(n("Enumerable")),e.prop(u.$$prototype,"$$is_array",!0);function D(ie){for(var x=ie[0],N=1,K=ie.length;N<K;N++)ie[N-1]=ie[N];return ie.pop(),x}function S(ie,x){return x.$$name===e.Array?ie:x.$allocate().$replace(ie.$to_a())}function j(ie,x,N){for(var K,G=null,te=new Array(ie.length),se=0,ue=0;se<ie.length;se++){if(!G)try{K=g(N,ie[se])}catch(fe){G=fe}(G||x(K))&&(te[ue]=ie[se],ue+=1)}if(ue!==se&&(ie.splice.apply(ie,[0,te.length].concat(te)),ie.splice(ue,te.length)),G)throw G}function re(ie){return ie.$$is_array||(ie=z(ie,n("Array"),"to_ary")),ie.$to_a()}function oe(ie,x){var N=x.length;if(N>6&&N<32767)ie.push.apply(ie,x);else for(var K=0;K<N;K++)ie.push(x[K])}O(u,"$[]",function(x){var N,K,G=this;return N=ne(arguments),K=N,S(K,G)},-1),C(u,"$initialize",function ie(x,N){var K=ie.$$p||i,G=this;if(ie.$$p=null,x==null&&(x=i),N==null&&(N=i),p(G),N!==i&&K!==i&&k.$warn("warning: block supersedes default value argument"),x>n(n("Integer"),"MAX")&&k.$raise(n("ArgumentError"),"array size too big"),arguments.length>2&&k.$raise(n("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return G.length>0&&G.splice(0,G.length),G;if(arguments.length===1){if(x.$$is_array)return G.$replace(x.$to_a()),G;if(x["$respond_to?"]("to_ary"))return G.$replace(x.$to_ary()),G}x=z(x,n("Integer"),"to_int"),x<0&&k.$raise(n("ArgumentError"),"negative array size"),G.splice(0,G.length);var te,se;if(K===i)for(te=0;te<x;te++)G.push(N);else for(te=0,se;te<x;te++)se=K(te),G[te]=se;return G},-1),O(u,"$try_convert",function(x){return P["$coerce_to?"](x,n("Array"),"to_ary")}),C(u,"$&",function(x){var N=this;if(x=re(x),N.length===0||x.length===0)return[];var K=[],G=new Map,te,se,ue;for(te=0,se=x.length;te<se;te++)X(G,x[te],!0);for(te=0,se=N.length;te<se;te++)ue=N[te],Y(G,ue)!==void 0&&K.push(ue);return K}),C(u,"$|",function(x){var N=this;x=re(x);var K=new Map,G,te;for(G=0,te=N.length;G<te;G++)X(K,N[G],!0);for(G=0,te=x.length;G<te;G++)X(K,x[G],!0);return K.$keys()}),C(u,"$*",function(x){var N=this;if(t(x["$respond_to?"]("to_str")))return N.$join(x.$to_str());x=z(x,n("Integer"),"to_int"),t(x<0)&&k.$raise(n("ArgumentError"),"negative argument");for(var K=[],G=N.$to_a(),te=0;te<x;te++)K=K.concat(G);return K}),C(u,"$+",function(x){var N=this;return x=re(x),N.concat(x)}),C(u,"$-",function(x){var N=this;if(x=re(x),t(N.length===0))return[];if(t(x.length===0))return N.slice();var K=[],G=new Map,te,se,ue;for(te=0,se=x.length;te<se;te++)X(G,x[te],!0);for(te=0,se=N.length;te<se;te++)ue=N[te],v(G,ue)===void 0&&K.push(ue);return K}),C(u,"$<<",function(x){var N=this;return p(N),N.push(x),N}),C(u,"$<=>",function(x){var N=this;if(W(n("Array"),x))x=x.$to_a();else if(t(x["$respond_to?"]("to_ary")))x=x.$to_ary().$to_a();else return i;if(N===x)return 0;for(var K=Math.min(N.length,x.length),G=0;G<K;G++){var te=N[G]["$<=>"](x[G]);if(te!==0)return te}return N.length["$<=>"](x.length)}),C(u,"$==",function(x){var N=this,K={};function G(te,se){var ue,fe,f,b;if(te===se)return!0;if(!se.$$is_array)return H(se,"$to_ary")?se["$=="](te):!1;if(te.$$constructor!==Array&&(te=te.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),te.length!==se.length)return!1;for(K[te.$object_id()]=!0,ue=0,fe=te.length;ue<fe;ue++)if(f=te[ue],b=se[ue],f.$$is_array){if(b.$$is_array&&b.length!==f.length||!K.hasOwnProperty(f.$object_id())&&!G(f,b))return!1}else if(!f["$=="](b))return!1;return!0}return G(N,x)});function le(ie,x){var N=ie.length,K,G,te,se;return K=x.excl,G=x.begin===i?0:z(x.begin,e.Integer,"to_int"),te=x.end===i?-1:z(x.end,e.Integer,"to_int"),G<0&&(G+=N,G<0)||(x.excl_rev&&x.begin!==i&&(G+=1),G>N)?i:te<0&&(te+=N,te<0)?[]:((!K||x.end===i)&&(te+=1),se=ie.slice(G,te),se)}function _e(ie,x){var N,K=[],G=0,te;for(x.step<0?(te={begin:x.range.end,end:x.range.begin,excl:!1,excl_rev:x.range.excl},N=le(ie,te).$reverse()):N=le(ie,x.range);G<N.length;)K.push(N[G]),G+=Math.abs(x.step);return K}function he(ie,x,N){var K=ie.length,G;return x=z(x,e.Integer,"to_int"),x<0&&(x+=K,x<0)?i:N===void 0?x>=K||x<0?i:ie[x]:(N=z(N,e.Integer,"to_int"),N<0||x>K||x<0?i:(G=ie.slice(x,x+N),G))}C(u,"$[]",function(x,N){var K=this;return x.$$is_range?le(K,x):x.$$is_arithmetic_seq?_e(K,x):he(K,x,N)},-2),C(u,"$[]=",function(x,N,K){var G=this,te=i,se=i;p(G),te=i;var ue,fe=G.length;if(x.$$is_range){N.$$is_array?te=N.$to_a():N["$respond_to?"]("to_ary")?te=N.$to_ary().$to_a():te=[N];var f=x.excl,b=x.begin===i?0:z(x.begin,e.Integer,"to_int"),R=x.end===i?-1:z(x.end,e.Integer,"to_int");if(b<0&&(b+=fe,b<0&&k.$raise(n("RangeError"),""+x.$inspect()+" out of range")),R<0&&(R+=fe),(!f||x.end===i)&&(R+=1),b>fe)for(ue=fe;ue<b;ue++)G[ue]=i;return R<0?G.splice.apply(G,[b,0].concat(te)):G.splice.apply(G,[b,R-b].concat(te)),N}else{K===void 0?se=1:(se=N,N=K,N.$$is_array?te=N.$to_a():N["$respond_to?"]("to_ary")?te=N.$to_ary().$to_a():te=[N]);var ee;if(x=z(x,n("Integer"),"to_int"),se=z(se,n("Integer"),"to_int"),x<0&&(ee=x,x+=fe,x<0&&k.$raise(n("IndexError"),"index "+ee+" too small for array; minimum "+-G.length)),se<0&&k.$raise(n("IndexError"),"negative length ("+se+")"),x>fe)for(ue=fe;ue<x;ue++)G[ue]=i;return K===void 0?G[x]=N:G.splice.apply(G,[x,se].concat(te)),N}},-3),C(u,"$any?",function ie(x){var N=ie.$$p||i,K=this;return ie.$$p=null,K.length===0?!1:M(K,L(K,"any?",ie,!1,!0),"any?",[x],N)},-1),C(u,"$assoc",function(x){for(var N=this,K=0,G=N.length,te;K<G;K++)if(te=N[K],te.length&&te[0]["$=="](x))return te;return i}),C(u,"$at",function(x){var N=this;return x=z(x,n("Integer"),"to_int"),x<0&&(x+=N.length),x<0||x>=N.length?i:N[x]}),C(u,"$bsearch_index",function ie(){var x=ie.$$p||i,N=this;if(ie.$$p=null,x===i)return N.$enum_for("bsearch_index");for(var K=0,G=N.length,te,se,ue,fe=!1,f=i;K<G;){if(te=K+Math.floor((G-K)/2),se=N[te],ue=g(x,se),ue===!0)f=te,fe=!0;else if(ue===!1||ue===i)fe=!1;else if(ue.$$is_number){if(ue===0)return te;fe=ue<0}else k.$raise(n("TypeError"),"wrong argument type "+ue.$class()+" (must be numeric, true, false or nil)");fe?G=te:K=te+1}return f}),C(u,"$bsearch",function ie(){var x=ie.$$p||i,N=this,K=i;return ie.$$p=null,x===i?N.$enum_for("bsearch"):(K=E(N,"bsearch_index",[],x.$to_proc()),K!=null&&K.$$is_number?N[K]:K)}),C(u,"$cycle",function ie(x){var N=ie.$$p||i,K=this;if(ie.$$p=null,x==null&&(x=i),N===i)return E(K,"enum_for",["cycle",x],function se(){var ue=se.$$s==null?this:se.$$s;return t(x["$nil?"]())?n(n("Float"),"INFINITY"):(x=P["$coerce_to!"](x,n("Integer"),"to_int"),t(q(x,0))?B(ue.$enumerator_size(),x):0)},{$$s:K});if(t(K["$empty?"]())||F(x,0))return i;var G,te;if(x===i)for(;;)for(G=0,te=K.length;G<te;G++)g(N,K[G]);else{if(x=P["$coerce_to!"](x,n("Integer"),"to_int"),x<=0)return K;for(;x>0;){for(G=0,te=K.length;G<te;G++)g(N,K[G]);x--}}return K},-1),C(u,"$clear",function(){var x=this;return p(x),x.splice(0,x.length),x}),C(u,"$count",function ie(x){var N=ie.$$p||i,K=this;return ie.$$p=null,t(x!==void 0)||t(N)?M(K,L(K,"count",ie,!1,!0),"count",[x],N):K.$size()},-1),C(u,"$initialize_copy",function(x){var N=this;return N.$replace(x)}),C(u,"$collect",function ie(){var x=ie.$$p||i,N=this;if(ie.$$p=null,x===i)return E(N,"enum_for",["collect"],function se(){var ue=se.$$s==null?this:se.$$s;return ue.$size()},{$$s:N});for(var K=[],G=0;G<N.length;G++){var te=g(x,N[G]);K[G]=te}return K}),C(u,"$collect!",function ie(){var x=ie.$$p||i,N=this;if(ie.$$p=null,x===i)return E(N,"enum_for",["collect!"],function te(){var se=te.$$s==null?this:te.$$s;return se.$size()},{$$s:N});p(N);for(var K=0;K<N.length;K++){var G=g(x,N[K]);N[K]=G}return N});function ge(ie,x){return ie===x||x===0?1:x>0&&ie>x?ge(ie-1,x-1)+ge(ie-1,x):0}C(u,"$combination",function ie(x){var N=ie.$$p||i,K=this,G=i;if(ie.$$p=null,G=P["$coerce_to!"](x,n("Integer"),"to_int"),N===i)return E(K,"enum_for",["combination",G],function ee(){var ae=ee.$$s==null?this:ee.$$s;return ge(ae.length,G)},{$$s:K});var te,se,ue,fe,f,b,R;if(G===0)e.yield1(N,[]);else if(G===1)for(te=0,se=K.length;te<se;te++)e.yield1(N,[K[te]]);else if(G===K.length)e.yield1(N,K.slice());else if(G>=0&&G<K.length){for(ue=[],te=0;te<=G+1;te++)ue.push(0);for(fe=[],f=0,b=!1,ue[0]=-1;!b;){for(fe[f]=K[ue[f+1]];f<G-1;)f++,R=ue[f+1]=ue[f]+1,fe[f]=K[R];e.yield1(N,fe.slice()),f++;do b=f===0,ue[f]++,f--;while(ue[f+1]+G===K.length+f+1)}}return K}),C(u,"$repeated_combination",function ie(x){var N=ie.$$p||i,K=this,G=i;if(ie.$$p=null,G=P["$coerce_to!"](x,n("Integer"),"to_int"),N===i)return E(K,"enum_for",["repeated_combination",G],function se(){var ue=se.$$s==null?this:se.$$s;return ge(ue.length+G-1,G)},{$$s:K});function te(se,ue,fe,f){if(fe.length==se){var b=fe.slice();e.yield1(N,b);return}for(var R=ue;R<f.length;R++)fe.push(f[R]),te(se,R,fe,f),fe.pop()}return G>=0&&te(G,0,[],K),K}),C(u,"$compact",function(){for(var x=this,N=[],K=0,G=x.length,te;K<G;K++)(te=x[K])!==i&&N.push(te);return N}),C(u,"$compact!",function(){var x=this;p(x);for(var N=x.length,K=0,G=x.length;K<G;K++)x[K]===i&&(x.splice(K,1),G--,K--);return x.length===N?i:x}),C(u,"$concat",function(x){var N,K,G=this;return N=ne(arguments),K=N,p(G),K=E(K,"map",[],function te(se){var ue=te.$$s==null?this:te.$$s;return se==null&&(se=i),se=re(se),t(se["$equal?"](ue))&&(se=se.$dup()),se},{$$s:G}),E(K,"each",[],function te(se){var ue=te.$$s==null?this:te.$$s;se==null&&(se=i);for(var fe=0,f=se.length;fe<f;fe++)ue.push(se[fe])},{$$s:G}),G},-1),C(u,"$delete",function ie(x){var N=ie.$$p||i,K=this;ie.$$p=null;for(var G=K.length,te=0,se=G;te<se;te++)K[te]["$=="](x)&&(p(K),K.splice(te,1),se--,te--);return K.length===G?N!==i?e.yieldX(N,[]):i:x}),C(u,"$delete_at",function(x){var N=this;if(p(N),x=z(x,n("Integer"),"to_int"),x<0&&(x+=N.length),x<0||x>=N.length)return i;var K=N[x];return N.splice(x,1),K}),C(u,"$delete_if",function ie(){var x=ie.$$p||i,N=this;return ie.$$p=null,x===i?E(N,"enum_for",["delete_if"],function K(){var G=K.$$s==null?this:K.$$s;return G.$size()},{$$s:N}):(p(N),j(N,l,x),N)}),C(u,"$difference",function(x){var N,K,G=this;return N=ne(arguments),K=N,E(K,"reduce",[G.$to_a().$dup()],function(se,ue){return se==null&&(se=i),ue==null&&(ue=i),A(se,ue)})},-1),C(u,"$dig",function(x,N){var K,G,te=this,se=i;return K=ne(arguments,1),G=K,se=te["$[]"](x),se===i||G.length===0?se:(t(se["$respond_to?"]("dig"))||k.$raise(n("TypeError"),""+se.$class()+" does not have #dig method"),E(se,"dig",a(G)))},-2),C(u,"$drop",function(x){var N=this;return x=z(x,n("Integer"),"to_int"),x<0&&k.$raise(n("ArgumentError")),N.slice(x)}),C(u,"$dup",function ie(){var x=ie.$$p||i,N=this;return ie.$$p=null,N.$$class===e.Array&&N.$$class.$allocate.$$pristine&&N.$copy_instance_variables.$$pristine&&N.$initialize_dup.$$pristine?N.slice(0):M(N,L(N,"dup",ie,!1,!0),"dup",[],x)}),C(u,"$each",function ie(){var x=ie.$$p||i,N=this;if(ie.$$p=null,x===i)return E(N,"enum_for",["each"],function G(){var te=G.$$s==null?this:G.$$s;return te.$size()},{$$s:N});for(var K=0;K<N.length;K++)g(x,N[K]);return N}),C(u,"$each_index",function ie(){var x=ie.$$p||i,N=this;if(ie.$$p=null,x===i)return E(N,"enum_for",["each_index"],function G(){var te=G.$$s==null?this:G.$$s;return te.$size()},{$$s:N});for(var K=0;K<N.length;K++)g(x,K);return N}),C(u,"$empty?",function(){var x=this;return x.length===0}),C(u,"$eql?",function(x){var N=this,K={};function G(te,se){var ue,fe,f,b;if(!se.$$is_array||(se=se.$to_a(),te.length!==se.length))return!1;for(K[te.$object_id()]=!0,ue=0,fe=te.length;ue<fe;ue++)if(f=te[ue],b=se[ue],f.$$is_array){if(b.$$is_array&&b.length!==f.length||!K.hasOwnProperty(f.$object_id())&&!G(f,b))return!1}else if(!f["$eql?"](b))return!1;return!0}return G(N,x)}),C(u,"$fetch",function ie(x,N){var K=ie.$$p||i,G=this;ie.$$p=null;var te=x;if(x=z(x,n("Integer"),"to_int"),x<0&&(x+=G.length),x>=0&&x<G.length)return G[x];if(K!==i&&N!=null&&G.$warn("warning: block supersedes default value argument"),K!==i)return K(te);if(N!=null)return N;G.length===0?k.$raise(n("IndexError"),"index "+te+" outside of array bounds: 0...0"):k.$raise(n("IndexError"),"index "+te+" outside of array bounds: -"+G.length+"..."+G.length)},-2),C(u,"$fill",function ie(x){var N=ie.$$p||i,K,G,te,se,ue=this,fe=i,f=i,b=i,R=i,ee=i;ie.$$p=null,K=ne(arguments),G=K,p(ue);var ae,ce;if(t(N)?(t(G.length>2)&&k.$raise(n("ArgumentError"),"wrong number of arguments ("+G.$length()+" for 0..2)"),se=G,te=m(se),fe=te[0]==null?i:te[0],f=te[1]==null?i:te[1]):(t(G.length==0)?k.$raise(n("ArgumentError"),"wrong number of arguments (0 for 1..3)"):t(G.length>3)&&k.$raise(n("ArgumentError"),"wrong number of arguments ("+G.$length()+" for 1..3)"),se=G,te=m(se),b=te[0]==null?i:te[0],fe=te[1]==null?i:te[1],f=te[2]==null?i:te[2]),W(n("Range"),fe)){if(t(f)&&k.$raise(n("TypeError"),"length invalid with range"),R=fe.begin===i?0:z(fe.begin,n("Integer"),"to_int"),t(R<0)&&(R+=this.length),t(R<0)&&k.$raise(n("RangeError"),""+fe.$inspect()+" out of range"),ee=fe.end===i?-1:z(fe.end,n("Integer"),"to_int"),t(ee<0)&&(ee+=this.length),t(fe["$exclude_end?"]())||(ee+=1),t(ee<=R))return ue}else if(t(fe))if(R=z(fe,n("Integer"),"to_int"),t(R<0)&&(R+=this.length),t(R<0)&&(R=0),t(f)){if(ee=z(f,n("Integer"),"to_int"),t(ee==0))return ue;ee+=R}else ee=this.length;else R=0,ee=this.length;if(t(R>this.length))for(ae=this.length;ae<ee;ae++)ue[ae]=i;if(t(ee>this.length)&&(this.length=ee),t(N))for(this.length;R<ee;R++)ce=N(R),ue[R]=ce;else for(this.length;R<ee;R++)ue[R]=b;return ue},-1),C(u,"$first",function(x){var N=this;return x==null?N.length===0?i:N[0]:(x=z(x,n("Integer"),"to_int"),x<0&&k.$raise(n("ArgumentError"),"negative array size"),N.slice(0,x))},-1),C(u,"$flatten",function(x){var N=this;function K(G,te){var se=[],ue,fe,f,b;for(G=G.$to_a(),ue=0,fe=G.length;ue<fe;ue++){if(f=G[ue],!H(f,"$to_ary",!0)){se.push(f);continue}if(b=f.$to_ary(),b===i){se.push(f);continue}switch(b.$$is_array||k.$raise(n("TypeError")),b===N&&k.$raise(n("ArgumentError")),te){case void 0:se=se.concat(K(b));break;case 0:se.push(b);break;default:oe(se,K(b,te-1))}}return se}return x!==void 0&&(x=z(x,n("Integer"),"to_int")),K(N,x)},-1),C(u,"$flatten!",function(x){var N=this;p(N);var K=N.$flatten(x);if(N.length==K.length){for(var G=0,te=N.length;G<te&&N[G]===K[G];G++);if(G==te)return i}return N.$replace(K),N},-1),C(u,"$freeze",function(){var x=this;return t(x["$frozen?"]())?x:U(x)});var me;C(u,"$hash",function(){var x=this,N=me===void 0,K=$e(),G=x.$object_id(),te,se,ue;if(K=Z(K,10),K=Z(K,x.length),N)me=Object.create(null);else if(me[G])return Z(K,16843009);try{for(ue in me)if(te=me[ue],x["$eql?"](te))return Z(K,16843009);for(me[G]=x,se=0;se<x.length;se++)te=x[se],K=Z(K,te.$hash());return K}finally{N&&(me=void 0)}}),C(u,"$include?",function(x){for(var N=this,K=0,G=N.length;K<G;K++)if(N[K]["$=="](x))return!0;return!1}),C(u,"$index",function ie(x){var N=ie.$$p||i,K=this;ie.$$p=null;var G,te,se;if(x!=null&&N!==i&&K.$warn("warning: given block not used"),x!=null){for(G=0,te=K.length;G<te;G++)if(K[G]["$=="](x))return G}else if(N!==i){for(G=0;G<K.length;G++)if(se=N(K[G]),se!==!1&&se!==i)return G}else return K.$enum_for("index");return i},-1),C(u,"$insert",function(x,N){var K,G,te=this;if(K=ne(arguments,1),G=K,p(te),x=z(x,n("Integer"),"to_int"),G.length>0){if(x<0&&(x+=te.length+1,x<0&&k.$raise(n("IndexError"),""+x+" is out of bounds")),x>te.length)for(var se=te.length;se<x;se++)te.push(i);te.splice.apply(te,[x,0].concat(G))}return te},-2);var ve=[];C(u,"$inspect",function(){var x=this,N=[],K=x.$__id__(),G=!0;return function(){try{if(ve.indexOf(K)!==-1)return G=!1,"[...]";ve.push(K);for(var te=0,se=x.length;te<se;te++){var ue=x["$[]"](te);N.push(I("Opal").$inspect(ue))}return"["+N.join(", ")+"]"}finally{G&&ve.pop()}}()}),C(u,"$intersection",function(x){var N,K,G=this,te=i,se=i;return N=ne(arguments),K=N,K.length===0?G.$to_a().$dup():(K=K.map(re),G.length===0?[]:(K=E(K,"sort_by",[],"length".$to_proc()),t(G.length<K[0].length)?E(K,"reduce",[G],"&".$to_proc()):(te=K.pop(),se=E(K,"reduce",[te],"&".$to_proc()),G["$&"](se))))},-1),C(u,"$intersect?",function(x){var N=this,K,G,te=new Map,se,ue;for(N.length<x.length?(K=N,G=x):(K=x,G=N),se=0,ue=K.length;se<ue;se++)X(te,K[se],!0);for(se=0,ue=G.length;se<ue;se++)if(v(te,G[se]))return!0;return!1}),C(u,"$join",function(x){var N=this;if(T[","]==null&&(T[","]=i),x==null&&(x=i),t(N.length===0))return"";t(x===i)&&(x=T[","]);var K=[],G,te,se,ue;for(G=0,te=N.length;G<te;G++){if(se=N[G],H(se,"$to_str")&&(ue=se.$to_str(),ue!==i)){K.push(ue.$to_s());continue}if(H(se,"$to_ary")&&(ue=se.$to_ary(),ue===N&&k.$raise(n("ArgumentError")),ue!==i)){K.push(ue.$join(x));continue}if(H(se,"$to_s")&&(ue=se.$to_s(),ue!==i)){K.push(ue);continue}k.$raise(n("NoMethodError").$new(""+I("Opal").$inspect(N.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return x===i?K.join(""):K.join(P["$coerce_to!"](x,n("String"),"to_str").$to_s())},-1),C(u,"$keep_if",function ie(){var x=ie.$$p||i,N=this;return ie.$$p=null,x===i?E(N,"enum_for",["keep_if"],function K(){var G=K.$$s==null?this:K.$$s;return G.$size()},{$$s:N}):(p(N),j(N,t,x),N)}),C(u,"$last",function(x){var N=this;return x==null?N.length===0?i:N[N.length-1]:(x=z(x,n("Integer"),"to_int"),x<0&&k.$raise(n("ArgumentError"),"negative array size"),x>N.length&&(x=N.length),N.slice(N.length-x,N.length))},-1),C(u,"$length",function(){var x=this;return x.length}),C(u,"$max",function ie(x){var N=ie.$$p||i,K=this;return ie.$$p=null,E(K.$each(),"max",[x],N.$to_proc())},-1),C(u,"$min",function ie(){var x=ie.$$p||i,N=this;return ie.$$p=null,E(N.$each(),"min",[],x.$to_proc())});function be(ie,x){for(var N=x>=0?1:0;x;)N*=ie,ie--,x--;return N}return C(u,"$permutation",function ie(x){var N=ie.$$p||i,K=this,G=i,te=i;if(ie.$$p=null,N===i)return E(K,"enum_for",["permutation",x],function b(){var R=b.$$s==null?this:b.$$s;return be(R.length,x===void 0?R.length:x)},{$$s:K});var se,ue,fe;if(x===void 0?x=K.length:x=z(x,n("Integer"),"to_int"),!(x<0||K.length<x))if(x===0)e.yield1(N,[]);else if(x===1)for(var f=0;f<K.length;f++)e.yield1(N,[K[f]]);else G=I("Array").$new(x),te=I("Array").$new(K.length,!1),se=function(b,R,ee,ae,ce){K=this;for(var de=0;de<K.length;de++)if(ae["$[]"](de)["$!"]())if(R[ee]=de,ee<b-1)ae[de]=!0,se.call(K,b,R,ee+1,ae,ce),ae[de]=!1;else{fe=[];for(var pe=0;pe<R.length;pe++)fe.push(K[R[pe]]);g(ce,fe)}},N!==i?(ue=K.slice(),se.call(ue,x,G,0,te,N)):se.call(K,x,G,0,te,N);return K},-1),C(u,"$repeated_permutation",function ie(x){var N=ie.$$p||i,K=this,G=i;if(ie.$$p=null,G=P["$coerce_to!"](x,n("Integer"),"to_int"),N===i)return E(K,"enum_for",["repeated_permutation",G],function se(){var ue=se.$$s==null?this:se.$$s;return t(y(G,0))?ue.$size()["$**"](G):0},{$$s:K});function te(se,ue,fe){if(ue.length==se){var f=ue.slice();e.yield1(N,f);return}for(var b=0;b<fe.length;b++)ue.push(fe[b]),te(se,ue,fe),ue.pop()}return te(G,[],K.slice()),K}),C(u,"$pop",function(x){var N=this;return p(N),t(x===void 0)?t(N.length===0)?i:N.pop():(x=z(x,n("Integer"),"to_int"),t(x<0)&&k.$raise(n("ArgumentError"),"negative array size"),t(N.length===0)?[]:t(x===1)?[N.pop()]:t(x>N.length)?N.splice(0,N.length):N.splice(N.length-x,N.length))},-1),C(u,"$product",function ie(x){var N=ie.$$p||i,K,G,te=this;ie.$$p=null,K=ne(arguments),G=K;var se=N!==i?null:[],ue=G.length+1,fe=new Array(ue),f=new Array(ue),b=new Array(ue),R,ee,ae,ce,de=1;for(b[0]=te,R=1;R<ue;R++)b[R]=z(G[R-1],n("Array"),"to_ary");for(R=0;R<ue;R++){if(ce=b[R].length,ce===0)return se||te;de*=ce,de>2147483647&&k.$raise(n("RangeError"),"too big to product"),f[R]=ce,fe[R]=0}e:for(;;){for(ae=[],R=0;R<ue;R++)ae.push(b[R][fe[R]]);for(se?se.push(ae):e.yield1(N,ae),ee=ue-1,fe[ee]++;fe[ee]===f[ee];){if(fe[ee]=0,--ee<0)break e;fe[ee]++}}return se||te},-1),C(u,"$push",function(x){var N,K,G=this;return N=ne(arguments),K=N,p(G),oe(G,K),G},-1),C(u,"$rassoc",function(x){for(var N=this,K=0,G=N.length,te;K<G;K++)if(te=N[K],te.length&&te[1]!==void 0&&te[1]["$=="](x))return te;return i}),C(u,"$reject",function ie(){var x=ie.$$p||i,N=this;if(ie.$$p=null,x===i)return E(N,"enum_for",["reject"],function se(){var ue=se.$$s==null?this:se.$$s;return ue.$size()},{$$s:N});for(var K=[],G=0,te;G<N.length;G++)te=x(N[G]),(te===!1||te===i)&&K.push(N[G]);return K}),C(u,"$reject!",function ie(){var x=ie.$$p||i,N=this,K=i;return ie.$$p=null,x===i?E(N,"enum_for",["reject!"],function G(){var te=G.$$s==null?this:G.$$s;return te.$size()},{$$s:N}):(p(N),K=N.$length(),E(N,"delete_if",[],x.$to_proc()),F(N.$length(),K)?i:N)}),C(u,"$replace",function(x){var N=this;return p(N),x=re(x),N.length>0&&N.splice(0,N.length),oe(N,x),N}),C(u,"$reverse",function(){var x=this;return x.slice(0).reverse()}),C(u,"$reverse!",function(){var x=this;return p(x),x.reverse()}),C(u,"$reverse_each",function ie(){var x=ie.$$p||i,N=this;if(ie.$$p=null,x===i)return E(N,"enum_for",["reverse_each"],function G(){var te=G.$$s==null?this:G.$$s;return te.$size()},{$$s:N});for(var K=N.length-1;K>=0;K--)g(x,N[K]);return N}),C(u,"$rindex",function ie(x){var N=ie.$$p||i,K=this;ie.$$p=null;var G,te;if(x!=null&&N!==i&&K.$warn("warning: given block not used"),x!=null){for(G=K.length-1;G>=0&&!(G>=K.length);G--)if(K[G]["$=="](x))return G}else if(N!==i){for(G=K.length-1;G>=0&&!(G>=K.length);G--)if(te=N(K[G]),te!==!1&&te!==i)return G}else if(x==null)return K.$enum_for("rindex");return i},-1),C(u,"$rotate",function(x){var N=this;x==null&&(x=1);var K,G,te,se;return x=z(x,n("Integer"),"to_int"),N.length===1?N.slice():N.length===0?[]:(K=N.slice(),G=x%K.length,te=K.slice(G),se=K.slice(0,G),te.concat(se))},-1),C(u,"$rotate!",function(x){var N=this,K=i;return x==null&&(x=1),p(N),N.length===0||N.length===1?N:(x=z(x,n("Integer"),"to_int"),K=N.$rotate(x),N.$replace(K))},-1),function(ie,x){var N=Q(ie,x,"SampleRandom"),K=N.$$prototype;return K.rng=i,C(N,"$initialize",d("rng")),C(N,"$rand",function(te){var se=this,ue=i;return ue=z(se.rng.$rand(te),n("Integer"),"to_int"),t(ue<0)&&k.$raise(n("RangeError"),"random value must be >= 0"),t(ue<te)||k.$raise(n("RangeError"),"random value must be less than Array size"),ue})}(u,null),C(u,"$sample",function(x,N){var K=this,G=i,te=i;if(t(x===void 0))return K.$at(k.$rand(K.length));if(t(N===void 0)?t(G=P["$coerce_to?"](x,n("Hash"),"to_hash"))?(N=G,x=i):(N=i,x=z(x,n("Integer"),"to_int")):(x=z(x,n("Integer"),"to_int"),N=z(N,n("Hash"),"to_hash")),t(x)&&t(x<0)&&k.$raise(n("ArgumentError"),"count must be greater than 0"),t(N)&&(te=N["$[]"]("random")),te=t(te)&&t(te["$respond_to?"]("rand"))?I("SampleRandom").$new(te):k,!t(x))return K[te.$rand(K.length)];var se,ue,fe,f,b,R,ee,ae;switch(x>K.length&&(x=K.length),x){case 0:return[];case 1:return[K[te.$rand(K.length)]];case 2:return f=te.$rand(K.length),b=te.$rand(K.length-1),f<=b&&b++,[K[f],K[b]];default:if(K.length/x>3){for(se=!1,ue=0,fe=I("Array").$new(x),f=1,fe[0]=te.$rand(K.length);f<x;){for(R=te.$rand(K.length),b=0;b<f;){for(;R===fe[b];){if(ue++,ue>100){se=!0;break}R=te.$rand(K.length)}if(se)break;b++}if(se)break;fe[f]=R,f++}if(!se){for(f=0;f<x;)fe[f]=K[fe[f]],f++;return fe}}fe=K.slice();for(var ce=0;ce<x;ce++)ee=te.$rand(K.length-ce)+ce,ae=fe[ce],fe[ce]=fe[ee],fe[ee]=ae;return x===K.length?fe:fe["$[]"](0,x)}},-1),C(u,"$select",function ie(){var x=ie.$$p||i,N=this;if(ie.$$p=null,x===i)return E(N,"enum_for",["select"],function ue(){var fe=ue.$$s==null?this:ue.$$s;return fe.$size()},{$$s:N});for(var K=[],G=0,te,se;G<N.length;G++)te=N[G],se=g(x,te),t(se)&&K.push(te);return K}),C(u,"$select!",function ie(){var x=ie.$$p||i,N=this;if(ie.$$p=null,x===i)return E(N,"enum_for",["select!"],function G(){var te=G.$$s==null?this:G.$$s;return te.$size()},{$$s:N});p(N);var K=N.length;return E(N,"keep_if",[],x.$to_proc()),N.length===K?i:N}),C(u,"$shift",function(x){var N=this;return p(N),t(x===void 0)?t(N.length===0)?i:D(N):(x=z(x,n("Integer"),"to_int"),t(x<0)&&k.$raise(n("ArgumentError"),"negative array size"),t(N.length===0)?[]:N.splice(0,x))},-1),C(u,"$shuffle",function(x){var N=this;return N.$dup().$to_a()["$shuffle!"](x)},-1),C(u,"$shuffle!",function(x){var N=this;p(N);var K,G=N.length,te,se;for(x!==void 0&&(x=P["$coerce_to?"](x,n("Hash"),"to_hash"),x!==i&&(x=x["$[]"]("random"),x!==i&&x["$respond_to?"]("rand")&&(K=x)));G;)K?(te=K.$rand(G).$to_int(),te<0&&k.$raise(n("RangeError"),"random number too small "+te),te>=G&&k.$raise(n("RangeError"),"random number too big "+te)):te=N.$rand(G),se=N[--G],N[G]=N[te],N[te]=se;return N},-1),C(u,"$slice!",function(x,N){var K=this,G=i,te=i,se=i,ue=i,fe=i;if(p(K),G=i,t(N===void 0))if(W(n("Range"),x)){te=x,G=K["$[]"](te),se=te.begin===i?0:z(te.begin,n("Integer"),"to_int"),ue=te.end===i?-1:z(te.end,n("Integer"),"to_int"),se<0&&(se+=K.length),ue<0?ue+=K.length:ue>=K.length&&(ue=K.length-1,te.excl&&(ue+=1));var f=ue-se;te.excl&&te.end!==i?ue-=1:f+=1,se<K.length&&se>=0&&ue<K.length&&ue>=0&&f>0&&K.splice(se,f)}else{if(fe=z(x,n("Integer"),"to_int"),fe<0&&(fe+=K.length),fe<0||fe>=K.length)return i;G=K[fe],fe===0?K.shift():K.splice(fe,1)}else{if(fe=z(x,n("Integer"),"to_int"),N=z(N,n("Integer"),"to_int"),N<0)return i;G=K["$[]"](fe,N),fe<0&&(fe+=K.length),fe+N>K.length&&(N=K.length-fe),fe<K.length&&fe>=0&&K.splice(fe,N)}return G},-2),C(u,"$sort",function ie(){var x=ie.$$p||i,N=this;return ie.$$p=null,t(N.length>1)?(x===i&&(x=function(K,G){return K["$<=>"](G)}),N.slice().sort(function(K,G){var te=x(K,G);return te===i&&k.$raise(n("ArgumentError"),"comparison of "+K.$inspect()+" with "+G.$inspect()+" failed"),q(te,0)?1:c(te,0)?-1:0})):N}),C(u,"$sort!",function ie(){var x=ie.$$p||i,N=this;ie.$$p=null,p(N);var K;x!==i?K=E(N.slice(),"sort",[],x.$to_proc()):K=N.slice().$sort(),N.length=0;for(var G=0,te=K.length;G<te;G++)N.push(K[G]);return N}),C(u,"$sort_by!",function ie(){var x=ie.$$p||i,N=this;return ie.$$p=null,x===i?E(N,"enum_for",["sort_by!"],function K(){var G=K.$$s==null?this:K.$$s;return G.$size()},{$$s:N}):(p(N),N.$replace(E(N,"sort_by",[],x.$to_proc())))}),C(u,"$take",function(x){var N=this;return x<0&&k.$raise(n("ArgumentError")),N.slice(0,x)}),C(u,"$take_while",function ie(){var x=ie.$$p||i,N=this;ie.$$p=null;for(var K=[],G=0,te,se;G<N.length;G++){if(te=N[G],se=x(te),se===!1||se===i)return K;K.push(te)}return K}),C(u,"$to_a",function(){var x=this;return x.$$class===e.Array?x:e.Array.$new(x)}),C(u,"$to_ary",J),C(u,"$to_h",function ie(){var x=ie.$$p||i,N=this,K=i;ie.$$p=null,K=N,x!==i&&(K=E(K,"map",[],x.$to_proc()));var G,te=K.length,se,ue,fe,f=new Map;for(G=0;G<te;G++)se=P["$coerce_to?"](K[G],n("Array"),"to_ary"),se.$$is_array||k.$raise(n("TypeError"),"wrong element type "+K[G].$class()+" at "+G+" (expected array)"),se.length!==2&&k.$raise(n("ArgumentError"),"element has wrong array length at "+G+" (expected 2, was "+se.$length()+")"),ue=se[0],fe=se[1],X(f,ue,fe);return f}),C(u,"$transpose",function(){var x=this,N=i,K=i;return t(x["$empty?"]())?[]:(N=[],K=i,E(x,"each",[],function(te){var se=i;return te==null&&(te=i),te=re(te),K=t(se=K)?se:te.length,V(te.length,K)&&k.$raise(n("IndexError"),"element size differs ("+te.length+" should be "+K+")"),E(te.length,"times",[],function(fe){var f,b=i;return fe==null&&(fe=i),b=t(se=N["$[]"](fe))?se:(f=[fe,[]],E(N,"[]=",f),f[f.length-1]),b["$<<"](te.$at(fe))})}),N)}),C(u,"$union",function(x){var N,K,G=this;return N=ne(arguments),K=N,E(K,"reduce",[G.$uniq()],function(se,ue){return se==null&&(se=i),ue==null&&(ue=i),se["$|"](ue)})},-1),C(u,"$uniq",function ie(){var x=ie.$$p||i,N=this;ie.$$p=null;var K=new Map,G,te,se,ue;if(x===i)for(G=0,te=N.length;G<te;G++)se=N[G],v(K,se)===void 0&&X(K,se,se);else for(G=0;G<N.length;G++)se=N[G],ue=g(x,se),v(K,ue)===void 0&&X(K,ue,se);return K.$values()}),C(u,"$uniq!",function ie(){var x=ie.$$p||i,N=this;ie.$$p=null,p(N);var K=new Map,G,te,se,ue=[];for(G=0;G<N.length;G++)te=N[G],se=x===i?te:g(x,te),v(K,se)===void 0?X(K,se,te):ue.push(G);for(G=ue.length-1;G>=0;G--)N.splice(ue[G],1);return ue.length===0?i:N}),C(u,"$unshift",function(x){var N,K,G=this;N=ne(arguments),K=N,p(G);var te=G.length,se=K.length;if(se==0)return G;for(var ue=te-se,fe=0;fe<se;fe++)G.push(G[ue+fe]);for(var f=te-1;f-se>=0;)G[f]=G[f-se],f--;for(var b=0;b<se;b++)G[b]=K[b];return G},-1),C(u,"$values_at",function(x){var N,K,G=this,te=i;return N=ne(arguments),K=N,te=[],E(K,"each",[],function se(ue){var fe=se.$$s==null?this:se.$$s,f=i,b=i,R=i;return ue==null&&(ue=i),t(ue["$is_a?"](n("Range")))?(f=ue.$end()===i?-1:z(ue.$end(),n("Integer"),"to_int"),b=ue.$begin()===i?0:z(ue.$begin(),n("Integer"),"to_int"),b<0?(b=b+fe.length,i):(f<0&&(f=f+fe.length),ue["$exclude_end?"]()&&ue.$end()!==i&&f--,f<b?i:E(b,"upto",[f],function ee(ae){var ce=ee.$$s==null?this:ee.$$s;return ae==null&&(ae=i),te["$<<"](ce.$at(ae))},{$$s:fe}))):(R=z(ue,n("Integer"),"to_int"),te["$<<"](fe.$at(R)))},{$$s:G}),te},-1),C(u,"$zip",function ie(x){var N=ie.$$p||i,K,G,te=this,se=i;ie.$$p=null,K=ne(arguments),G=K;var ue=[],fe=te.length,f,b,R,ee,ae;for(ee=0,ae=G.length;ee<ae;ee++)if(b=G[ee],!b.$$is_array){if(b.$$is_range||b.$$is_enumerator){G[ee]=b.$take(fe);continue}G[ee]=(t(se=P["$coerce_to?"](b,n("Array"),"to_ary"))?se:P["$coerce_to!"](b,n("Enumerator"),"to_enum","each")).$to_a()}for(R=0;R<fe;R++){for(f=[te[R]],ee=0,ae=G.length;ee<ae;ee++)b=G[ee][R],b==null&&(b=i),f[ee+1]=b;ue[R]=f}if(N!==i){for(R=0;R<fe;R++)e.yield1(N,ue[R]);return i}return ue},-1),O(u,"$inherited",function(x){x.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),C(u,"$instance_variables",function ie(){var x=ie.$$p||i,N=this;return ie.$$p=null,E(M(N,L(N,"instance_variables",ie,!1,!0),"instance_variables",[],x),"reject",[],function(G){var te=i;return G==null&&(G=i),t(te=/^@\d+$/.test(G))?te:G["$=="]("@length")})}),C(u,"$pack",function(x){return ne(arguments),k.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),h(u,"append","push"),h(u,"filter","select"),h(u,"filter!","select!"),h(u,"map","collect"),h(u,"map!","collect!"),h(u,"prepend","unshift"),h(u,"size","length"),h(u,"slice","[]"),h(u,"to_s","inspect"),P.$pristine(u.$singleton_class(),"allocate"),P.$pristine(u,"copy_instance_variables","initialize_dup")}("::",Array,o)};Opal.modules["corelib/hash"]=function(e){var t=e.yield1,l=e.hash_clone,g=e.hash_delete,v=e.hash_each,X=e.hash_get,Y=e.hash_put,z=e.deny_frozen_access,H=e.freeze,p=e.opal32_init,U=e.opal32_add,$e=e.klass,Z=e.slice,Q=e.Opal,ne=e.Kernel,O=e.defs,k=e.def,C=e.send,P=e.rb_ge,W=e.rb_gt,M=e.truthy,L=e.to_a,E=e.return_self,q=e.not,B=e.alias,F=e.top,A=[],a=e.nil,m=e.$$$;return e.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),F.$require("corelib/enumerable"),function(T,y,d){var c=$e(T,y,"Hash"),J=[c].concat(d),V=e.$r(J);c.$include(m("Enumerable")),c.$$prototype.$$is_hash=!0,O(c,"$[]",function(i){var n,r,$=this;n=Z(arguments),r=n;var s,u=r.length,w,I;if(u===1){if(s=Q["$coerce_to?"](r["$[]"](0),m("Hash"),"to_hash"),s!==a)return $.$allocate()["$merge!"](s);for(r=Q["$coerce_to?"](r["$[]"](0),m("Array"),"to_ary"),r===a&&ne.$raise(m("ArgumentError"),"odd number of arguments for Hash"),u=r.length,s=$.$allocate(),I=0;I<u;I++)w=r[I],w.$$is_array||ne.$raise(m("ArgumentError"),"invalid element "+w.$inspect()+" for Hash"),w.length===1?s.$store(w[0],a):w.length===2?s.$store(w[0],w[1]):ne.$raise(m("ArgumentError"),"invalid number of elements ("+w.length+" for "+w.$inspect()+"), must be 1..2");return s}for(u%2!==0&&ne.$raise(m("ArgumentError"),"odd number of arguments for Hash"),s=$.$allocate(),I=0;I<u;I+=2)s.$store(r[I],r[I+1]);return s},-1),O(c,"$allocate",function(){var i=this,n=new i.$$constructor;return n.$$none=a,n.$$proc=a,n}),O(c,"$try_convert",function(i){return Q["$coerce_to?"](i,m("Hash"),"to_hash")}),k(c,"$initialize",function o(i){var n=o.$$p||a,r=this;return o.$$p=null,z(r),i!==void 0&&n!==a&&ne.$raise(m("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=i===void 0?a:i,r.$$proc=n,r},-1),k(c,"$==",function(i){var n=this;return n===i?!0:!i.$$is_hash||n.size!==i.size?!1:v(n,!0,function(r,$){var s=X(i,r);return s===void 0||!$["$eql?"](s)?[!0,!1]:[!1,!0]})}),k(c,"$>=",function(i){var n=this,r=a;return i=Q["$coerce_to!"](i,m("Hash"),"to_hash"),n.size<i.size?!1:(r=!0,C(i,"each",[],function $(s,u){var w=$.$$s==null?this:$.$$s,I=a;if(s==null&&(s=a),u==null&&(u=a),I=w.$fetch(s,null),I==null||I!==u){r=!1;return}},{$$s:n}),r)}),k(c,"$>",function(i){var n=this;return i=Q["$coerce_to!"](i,m("Hash"),"to_hash"),n.size<=i.size?!1:P(n,i)}),k(c,"$<",function(i){var n=this;return i=Q["$coerce_to!"](i,m("Hash"),"to_hash"),W(i,n)}),k(c,"$<=",function(i){var n=this;return i=Q["$coerce_to!"](i,m("Hash"),"to_hash"),P(i,n)}),k(c,"$[]",function(i){var n=this,r=X(n,i);return r!==void 0?r:n.$default(i)}),k(c,"$[]=",function(i,n){var r=this;return z(r),Y(r,i,n),n}),k(c,"$assoc",function(i){var n=this;return v(n,a,function(r,$){return r["$=="](i)?[!0,[r,$]]:[!1,a]})}),k(c,"$clear",function(){var i=this;return z(i),i.clear(),i.$$keys&&i.$$keys.clear(),i}),k(c,"$clone",function(){var i=this,n=i.$class().$new();return l(i,n),i["$frozen?"]()?n.$freeze():n}),k(c,"$compact",function(){var i=this,n=new Map;return v(i,n,function(r,$){return $!==a&&Y(n,r,$),[!1,n]})}),k(c,"$compact!",function(){var i=this;z(i);var n=a;return v(i,n,function(r,$){return $===a&&(g(i,r),n=i),[!1,n]})}),k(c,"$compare_by_identity",function(){var i=this;return z(i),i.$$by_identity||(i.$$by_identity=!0,i.size!==0&&e.hash_rehash(i)),i}),k(c,"$compare_by_identity?",function(){var i=this;return i.$$by_identity===!0}),k(c,"$default",function(i){var n=this;return i!==void 0&&n.$$proc!==a&&n.$$proc!==void 0?n.$$proc.$call(n,i):n.$$none===void 0?a:n.$$none},-1),k(c,"$default=",function(i){var n=this;return z(n),n.$$proc=a,n.$$none=i,i}),k(c,"$default_proc",function(){var i=this;return i.$$proc!==void 0?i.$$proc:a}),k(c,"$default_proc=",function(i){var n=this;z(n);var r=i;return r!==a&&(r=Q["$coerce_to!"](r,m("Proc"),"to_proc"),r["$lambda?"]()&&r.$arity().$abs()!==2&&ne.$raise(m("TypeError"),"default_proc takes two arguments")),n.$$none=a,n.$$proc=r,i}),k(c,"$delete",function o(i){var n=o.$$p||a,r=this;o.$$p=null,z(r);var $=g(r,i);return $!==void 0?$:n!==a?e.yield1(n,i):a}),k(c,"$delete_if",function o(){var i=o.$$p||a,n=this;return o.$$p=null,M(i)?(z(n),v(n,n,function(r,$){var s=i(r,$);return s!==!1&&s!==a&&g(n,r),[!1,n]})):C(n,"enum_for",["delete_if"],function r(){var $=r.$$s==null?this:r.$$s;return $.$size()},{$$s:n})}),k(c,"$dig",function(i,n){var r,$,s=this,u=a;return r=Z(arguments,1),$=r,u=s["$[]"](i),u===a||$.length===0?u:(M(u["$respond_to?"]("dig"))||ne.$raise(m("TypeError"),""+u.$class()+" does not have #dig method"),C(u,"dig",L($)))},-2),k(c,"$dup",function(){var i=this;return l(i,i.$class().$new())}),k(c,"$each",function o(){var i=o.$$p||a,n=this;return o.$$p=null,M(i)?v(n,n,function(r,$){return t(i,[r,$]),[!1,n]}):C(n,"enum_for",["each"],function r(){var $=r.$$s==null?this:r.$$s;return $.$size()},{$$s:n})}),k(c,"$each_key",function o(){var i=o.$$p||a,n=this;return o.$$p=null,M(i)?v(n,n,function(r,$){return i(r),[!1,n]}):C(n,"enum_for",["each_key"],function r(){var $=r.$$s==null?this:r.$$s;return $.$size()},{$$s:n})}),k(c,"$each_value",function o(){var i=o.$$p||a,n=this;return o.$$p=null,M(i)?v(n,n,function(r,$){return i($),[!1,n]}):C(n,"enum_for",["each_value"],function r(){var $=r.$$s==null?this:r.$$s;return $.$size()},{$$s:n})}),k(c,"$empty?",function(){var i=this;return i.size===0}),k(c,"$except",function(i){var n,r,$=this;return n=Z(arguments),r=n,C($.$dup(),"except!",L(r))},-1),k(c,"$except!",function(i){var n,r,$=this;return n=Z(arguments),r=n,C(r,"each",[],function s(u){var w=s.$$s==null?this:s.$$s;return u==null&&(u=a),w.$delete(u)},{$$s:$}),$},-1),k(c,"$fetch",function o(i,n){var r=o.$$p||a,$=this;o.$$p=null;var s=X($,i);return s!==void 0?s:r!==a?r(i):n!==void 0?n:ne.$raise(m("KeyError").$new("key not found: "+i.$inspect(),new Map([["key",i],["receiver",$]])))},-2),k(c,"$fetch_values",function o(i){var n=o.$$p||a,r,$,s=this;return o.$$p=null,r=Z(arguments),$=r,C($,"map",[],function u(w){var I=u.$$s==null?this:u.$$s;return w==null&&(w=a),C(I,"fetch",[w],n.$to_proc())},{$$s:s})},-1),k(c,"$flatten",function(i){var n=this;i==null&&(i=1),i=Q["$coerce_to!"](i,m("Integer"),"to_int");var r=[];return v(n,r,function($,s){return r.push($),s.$$is_array?i===1?(r.push(s),[!1,r]):(r=r.concat(s.$flatten(i-2)),[!1,r]):(r.push(s),[!1,r])})},-1),k(c,"$freeze",function(){var i=this;return M(i["$frozen?"]())?i:H(i)}),k(c,"$has_key?",function(i){var n=this;return X(n,i)!==void 0}),k(c,"$has_value?",function(i){var n=this;return v(n,!1,function(r,$){return $["$=="](i)?[!0,!0]:[!1,!1]})});var h;k(c,"$hash",function(){var i=this,n=h===void 0,r=i.$object_id(),$=p(),s,u,w,I=i.size,D=new Int32Array(I);if($=U($,4),$=U($,I),n)h=Object.create(null);else if(h[r])return U($,16843009);try{for(s in h)if(u=h[s],i["$eql?"](u))return U($,16843009);for(h[r]=i,w=0,v(i,!1,function(S,j){return D[w]=[1883326802,S,j].$hash(),w++,[!1,!1]}),D=D.sort(),w=0;w<D.length;w++)$=U($,D[w]);return $}finally{n&&(h=void 0)}}),k(c,"$index",function(i){var n=this;return v(n,a,function(r,$){return $["$=="](i)?[!0,r]:[!1,a]})}),k(c,"$indexes",function(i){var n,r,$=this;n=Z(arguments),r=n;for(var s=[],u=0,w=r.length,I,D;u<w;u++){if(I=r[u],D=X($,I),D===void 0){s.push($.$default());continue}s.push(D)}return s},-1);var _;return k(c,"$inspect",function(){var i=this,n=_===void 0,r=i.$object_id(),$=[];return function(){try{if(n&&(_={}),_.hasOwnProperty(r))return"{...}";return _[r]=!0,v(i,!1,function(s,u){return u=V("Opal").$inspect(u),s=V("Opal").$inspect(s),$.push(s+"=>"+u),[!1,!1]}),"{"+$.join(", ")+"}";return a}finally{n&&(_=void 0)}}()}),k(c,"$invert",function(){var i=this,n=new Map;return v(i,n,function(r,$){return Y(n,$,r),[!1,n]})}),k(c,"$keep_if",function o(){var i=o.$$p||a,n=this;return o.$$p=null,M(i)?(z(n),v(n,n,function(r,$){var s=i(r,$);return(s===!1||s===a)&&g(n,r),[!1,n]})):C(n,"enum_for",["keep_if"],function r(){var $=r.$$s==null?this:r.$$s;return $.$size()},{$$s:n})}),k(c,"$keys",function(){var i=this;return Array.from(i.keys())}),k(c,"$length",function(){var i=this;return i.size}),k(c,"$merge",function o(i){var n=o.$$p||a,r,$,s=this;return o.$$p=null,r=Z(arguments),$=r,C(s.$dup(),"merge!",L($),n.$to_proc())},-1),k(c,"$merge!",function o(i){var n=o.$$p||a,r,$,s=this;o.$$p=null,r=Z(arguments),$=r,z(s);var u,w;for(u=0;u<$.length;++u)w=Q["$coerce_to!"]($[u],m("Hash"),"to_hash"),n===a?v(w,!1,function(I,D){return Y(s,I,D),[!1,!1]}):v(w,!1,function(I,D){var S=X(s,I);return S===void 0?(Y(s,I,D),[!1,!1]):(Y(s,I,n(I,S,D)),[!1,!1])});return s},-1),k(c,"$rassoc",function(i){var n=this;return v(n,a,function(r,$){return $["$=="](i)?[!0,[r,$]]:[!1,a]})}),k(c,"$rehash",function(){var i=this;return z(i),e.hash_rehash(i)}),k(c,"$reject",function o(){var i=o.$$p||a,n=this;if(o.$$p=null,!M(i))return C(n,"enum_for",["reject"],function $(){var s=$.$$s==null?this:$.$$s;return s.$size()},{$$s:n});var r=new Map;return v(n,r,function($,s){var u=i($,s);return(u===!1||u===a)&&Y(r,$,s),[!1,r]})}),k(c,"$reject!",function o(){var i=o.$$p||a,n=this;if(o.$$p=null,!M(i))return C(n,"enum_for",["reject!"],function $(){var s=$.$$s==null?this:$.$$s;return s.$size()},{$$s:n});z(n);var r=a;return v(n,r,function($,s){var u=i($,s);return u!==!1&&u!==a&&(g(n,$),r=n),[!1,r]})}),k(c,"$replace",function(i){var n=this;return z(n),i=Q["$coerce_to!"](i,m("Hash"),"to_hash"),n.$clear(),v(i,!1,function(r,$){return Y(n,r,$),[!1,!1]}),M(i.$default_proc())?n["$default_proc="](i.$default_proc()):n["$default="](i.$default()),n}),k(c,"$select",function o(){var i=o.$$p||a,n=this;if(o.$$p=null,!M(i))return C(n,"enum_for",["select"],function $(){var s=$.$$s==null?this:$.$$s;return s.$size()},{$$s:n});var r=new Map;return v(n,r,function($,s){var u=i($,s);return u!==!1&&u!==a&&Y(r,$,s),[!1,r]})}),k(c,"$select!",function o(){var i=o.$$p||a,n=this;if(o.$$p=null,!M(i))return C(n,"enum_for",["select!"],function $(){var s=$.$$s==null?this:$.$$s;return s.$size()},{$$s:n});z(n);var r=a;return v(n,r,function($,s){var u=i($,s);return(u===!1||u===a)&&(g(n,$),r=n),[!1,r]})}),k(c,"$shift",function(){var i=this;return z(i),v(i,a,function(n,r){return[!0,[n,g(i,n)]]})}),k(c,"$slice",function(i){var n,r,$=this;n=Z(arguments),r=n;for(var s=new Map,u=0,w=r.length;u<w;u++){var I=r[u],D=X($,I);D!==void 0&&Y(s,I,D)}return s},-1),k(c,"$to_a",function(){var i=this,n=[];return v(i,n,function(r,$){return n.push([r,$]),[!1,n]})}),k(c,"$to_h",function o(){var i=o.$$p||a,n=this;if(o.$$p=null,i!==a)return C(n,"map",[],i.$to_proc()).$to_h();if(n.$$class===e.Hash)return n;var r=new Map;return l(n,r),r}),k(c,"$to_hash",E),k(c,"$to_proc",function(){var i=this;return C(i,"proc",[],function n(r){var $=n.$$s==null?this:n.$$s;return r==null&&ne.$raise(m("ArgumentError"),"no key given"),$["$[]"](r)},{$$arity:-1,$$s:i})}),k(c,"$transform_keys",function o(i){var n=o.$$p||a,r=this;if(o.$$p=null,i==null&&(i=a),q(n)&&q(i))return C(r,"enum_for",["transform_keys"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:r});var $=new Map;return v(r,$,function(s,u){var w;return i!==a&&(w=X(i,s)),w===void 0&&n&&n!==a&&(w=n(s)),w===void 0&&(w=s),Y($,w,u),[!1,$]})},-1),k(c,"$transform_keys!",function o(i){var n=o.$$p||a,r=this;if(o.$$p=null,i==null&&(i=a),q(n)&&q(i))return C(r,"enum_for",["transform_keys!"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:r});z(r);var $=new Map;return v(r,r,function(s,u){var w;return i!==a&&(w=X(i,s)),w===void 0&&n&&n!==a&&(w=n(s)),w===void 0?[!1,r]:(X($,s)||g(r,s),Y(r,w,u),Y($,w,!0),[!1,r])})},-1),k(c,"$transform_values",function o(){var i=o.$$p||a,n=this;if(o.$$p=null,!M(i))return C(n,"enum_for",["transform_values"],function $(){var s=$.$$s==null?this:$.$$s;return s.$size()},{$$s:n});var r=new Map;return v(n,r,function($,s){return Y(r,$,i(s)),[!1,r]})}),k(c,"$transform_values!",function o(){var i=o.$$p||a,n=this;return o.$$p=null,M(i)?(z(n),v(n,n,function(r,$){return Y(n,r,i($)),[!1,n]})):C(n,"enum_for",["transform_values!"],function r(){var $=r.$$s==null?this:r.$$s;return $.$size()},{$$s:n})}),k(c,"$values",function(){var i=this;return Array.from(i.values())}),B(c,"each_pair","each"),B(c,"eql?","=="),B(c,"filter","select"),B(c,"filter!","select!"),B(c,"include?","has_key?"),B(c,"indices","indexes"),B(c,"key","index"),B(c,"key?","has_key?"),B(c,"member?","has_key?"),B(c,"size","length"),B(c,"store","[]="),B(c,"to_s","inspect"),B(c,"update","merge!"),B(c,"value?","has_value?"),B(c,"values_at","indexes")}("::",Map,A)};Opal.modules["corelib/number"]=function(e){var t=e.klass,l=e.Opal,g=e.Kernel,v=e.def,X=e.eqeqeq,Y=e.truthy,z=e.rb_gt,H=e.not,p=e.rb_lt,U=e.alias,$e=e.send2,Z=e.find_super,Q=e.send,ne=e.rb_plus,O=e.rb_minus,k=e.eqeq,C=e.return_self,P=e.rb_divide,W=e.to_ary,M=e.rb_times,L=e.rb_le,E=e.rb_ge,q=e.return_val,B=e.const_set,F=e.top,A=[],a=e.nil,m=e.$$$;return e.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),F.$require("corelib/numeric"),function(T,y,d){var c=t(T,y,"Number");l.$bridge(Number,c),e.prop(c.$$prototype,"$$is_number",!0),c.$$is_number_class=!0;var J=new Map;(function(n,r){return v(n,"$allocate",function(){var s=this;return g.$raise(m("TypeError"),"allocator undefined for "+s.$name())}),e.udef(n,"$new"),a})(e.get_singleton_class(c)),v(c,"$coerce",function(r){var $=this;if(r===a)g.$raise(m("TypeError"),"can't convert "+r.$class()+" into Float");else{if(r.$$is_string)return[g.$Float(r),$];if(r["$respond_to?"]("to_f"))return[l["$coerce_to!"](r,m("Float"),"to_f"),$];if(r.$$is_number)return[r,$];g.$raise(m("TypeError"),"can't convert "+r.$class()+" into Float")}}),v(c,"$__id__",function(){var r=this;if(r|r===0)return r*2+1;if(J.has(r))return J.get(r);var $=e.uid();return J.set(r,$),$}),v(c,"$hash",function(){var r=this;return r|r===0?r.$__id__():r.toString().$hash()}),v(c,"$+",function(r){var $=this;return r.$$is_number?$+r:$.$__coerced__("+",r)}),v(c,"$-",function(r){var $=this;return r.$$is_number?$-r:$.$__coerced__("-",r)}),v(c,"$*",function(r){var $=this;return r.$$is_number?$*r:$.$__coerced__("*",r)}),v(c,"$/",function(r){var $=this;return r.$$is_number?$/r:$.$__coerced__("/",r)}),v(c,"$%",function(r){var $=this;if(r.$$is_number){if(r==-1/0)return r;if(r==0)g.$raise(m("ZeroDivisionError"),"divided by 0");else return r<0||$<0?($%r+r)%r:$%r}else return $.$__coerced__("%",r)}),v(c,"$&",function(r){var $=this;return r.$$is_number?$&r:$.$__coerced__("&",r)}),v(c,"$|",function(r){var $=this;return r.$$is_number?$|r:$.$__coerced__("|",r)}),v(c,"$^",function(r){var $=this;return r.$$is_number?$^r:$.$__coerced__("^",r)}),v(c,"$<",function(r){var $=this;return r.$$is_number?$<r:$.$__coerced__("<",r)}),v(c,"$<=",function(r){var $=this;return r.$$is_number?$<=r:$.$__coerced__("<=",r)}),v(c,"$>",function(r){var $=this;return r.$$is_number?$>r:$.$__coerced__(">",r)}),v(c,"$>=",function(r){var $=this;return r.$$is_number?$>=r:$.$__coerced__(">=",r)});var V=function(n,r){return r.$$is_number?isNaN(n)||isNaN(r)?a:n>r?1:n<r?-1:0:n.$__coerced__("<=>",r)};v(c,"$<=>",function(r){var $=this;try{return V($,r)}catch(s){if(e.rescue(s,[m("ArgumentError")]))try{return a}finally{e.pop_exception(s)}else throw s}}),v(c,"$<<",function(r){var $=this;return r=l["$coerce_to!"](r,m("Integer"),"to_int"),r>0?$<<r:$>>-r}),v(c,"$>>",function(r){var $=this;return r=l["$coerce_to!"](r,m("Integer"),"to_int"),r>0?$>>r:$<<-r}),v(c,"$[]",function(r){var $=this;return r=l["$coerce_to!"](r,m("Integer"),"to_int"),r<0?0:r>=32?$<0?1:0:$>>r&1}),v(c,"$+@",function(){var r=this;return+r}),v(c,"$-@",function(){var r=this;return-r}),v(c,"$~",function(){var r=this;return~r}),v(c,"$**",function(r){var $=this;return X(m("Integer"),r)?H(m("Integer")["$==="]($))||Y(z(r,0))?Math.pow($,r):m("Rational").$new($,1)["$**"](r):Y(p($,0))&&(X(m("Float"),r)||X(m("Rational"),r))?m("Complex").$new($,0)["$**"](r.$to_f()):Y(r.$$is_number!=null)?Math.pow($,r):$.$__coerced__("**",r)}),v(c,"$==",function(r){var $=this;return r.$$is_number?$.valueOf()===r.valueOf():r["$respond_to?"]("==")?r["$=="]($):!1}),U(c,"===","=="),v(c,"$abs",function(){var r=this;return Math.abs(r)}),v(c,"$abs2",function(){var r=this;return Math.abs(r*r)}),v(c,"$allbits?",function(r){var $=this;return r=l["$coerce_to!"](r,m("Integer"),"to_int"),($&r)==r}),v(c,"$anybits?",function(r){var $=this;return r=l["$coerce_to!"](r,m("Integer"),"to_int"),($&r)!==0}),v(c,"$angle",function(){var r=this;return Y(r["$nan?"]())?r:r==0?1/r>0?0:Math.PI:r<0?Math.PI:0}),v(c,"$bit_length",function(){var r=this;if(X(m("Integer"),r)||g.$raise(m("NoMethodError").$new("undefined method `bit_length` for "+r+":Float","bit_length")),r===0||r===-1)return 0;for(var $=0,s=r<0?~r:r;s!=0;)$+=1,s>>>=1;return $}),v(c,"$ceil",function(r){var $=this;r==null&&(r=0);var s=$.$to_f();if(s%1===0&&r>=0)return s;var u=Math.pow(10,r),w=Math.ceil(s*u)/u;return s%1===0&&(w=Math.round(w)),w},-1),v(c,"$chr",function(r){var $=this;return e.enc(String.fromCharCode($),r||"BINARY")},-1),v(c,"$denominator",function n(){var r=n.$$p||a,$=this;return n.$$p=null,Y($["$nan?"]())||Y($["$infinite?"]())?1:$e($,Z($,"denominator",n,!1,!0),"denominator",[],r)}),v(c,"$downto",function n(r){var $=n.$$p||a,s=this;if(n.$$p=null,$===a)return Q(s,"enum_for",["downto",r],function w(){var I=w.$$s==null?this:w.$$s;return X(m("Numeric"),r)||g.$raise(m("ArgumentError"),"comparison of "+I.$class()+" with "+r.$class()+" failed"),Y(z(r,I))?0:ne(O(I,r),1)},{$$s:s});r.$$is_number||g.$raise(m("ArgumentError"),"comparison of "+s.$class()+" with "+r.$class()+" failed");for(var u=s;u>=r;u--)$(u);return s}),v(c,"$equal?",function(r){var $=this,s=a;return Y(s=$["$=="](r))?s:isNaN($)&&isNaN(r)}),v(c,"$even?",function(){var r=this;return r%2===0}),v(c,"$floor",function(r){var $=this;r==null&&(r=0);var s=$.$to_f();if(s%1===0&&r>=0)return s;var u=Math.pow(10,r),w=Math.floor(s*u)/u;return s%1===0&&(w=Math.round(w)),w},-1),v(c,"$gcd",function(r){var $=this;X(m("Integer"),r)||g.$raise(m("TypeError"),"not an integer");for(var s=Math.abs($),u=Math.abs(r);s>0;){var w=s;s=u%s,u=w}return u}),v(c,"$gcdlcm",function(r){var $=this;return[$.$gcd(r),$.$lcm(r)]}),v(c,"$integer?",function(){var r=this;return r%1===0}),v(c,"$is_a?",function n(r){var $=n.$$p||a,s=this;return n.$$p=null,k(r,m("Integer"))&&X(m("Integer"),s)||k(r,m("Integer"))&&X(m("Integer"),s)||k(r,m("Float"))&&X(m("Float"),s)?!0:$e(s,Z(s,"is_a?",n,!1,!0),"is_a?",[r],$)}),v(c,"$instance_of?",function n(r){var $=n.$$p||a,s=this;return n.$$p=null,k(r,m("Integer"))&&X(m("Integer"),s)||k(r,m("Integer"))&&X(m("Integer"),s)||k(r,m("Float"))&&X(m("Float"),s)?!0:$e(s,Z(s,"instance_of?",n,!1,!0),"instance_of?",[r],$)}),v(c,"$lcm",function(r){var $=this;return X(m("Integer"),r)||g.$raise(m("TypeError"),"not an integer"),$==0||r==0?0:Math.abs($*r/$.$gcd(r))}),v(c,"$next",function(){var r=this;return r+1}),v(c,"$nobits?",function(r){var $=this;return r=l["$coerce_to!"](r,m("Integer"),"to_int"),($&r)==0}),v(c,"$nonzero?",function(){var r=this;return r==0?a:r}),v(c,"$numerator",function n(){var r=n.$$p||a,$=this;return n.$$p=null,Y($["$nan?"]())||Y($["$infinite?"]())?$:$e($,Z($,"numerator",n,!1,!0),"numerator",[],r)}),v(c,"$odd?",function(){var r=this;return r%2!==0}),v(c,"$ord",C),v(c,"$pow",function(r,$){var s=this;return s==0&&g.$raise(m("ZeroDivisionError"),"divided by 0"),$===void 0?s["$**"](r):(m("Integer")["$==="](r)||g.$raise(m("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),r<0&&g.$raise(m("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),m("Integer")["$==="]($)||g.$raise(m("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),$===0&&g.$raise(m("ZeroDivisionError"),"divided by 0"),s["$**"](r)["$%"]($))},-2),v(c,"$pred",function(){var r=this;return r-1}),v(c,"$quo",function n(r){var $=n.$$p||a,s=this;return n.$$p=null,X(m("Integer"),s)?$e(s,Z(s,"quo",n,!1,!0),"quo",[r],$):P(s,r)}),v(c,"$rationalize",function(r){var $,s,u=this,w=a,I=a;return arguments.length>1&&g.$raise(m("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),X(m("Integer"),u)?m("Rational").$new(u,1):Y(u["$infinite?"]())?g.$raise(m("FloatDomainError"),"Infinity"):Y(u["$nan?"]())?g.$raise(m("FloatDomainError"),"NaN"):Y(r==null)?(s=m("Math").$frexp(u),$=W(s),w=$[0]==null?a:$[0],I=$[1]==null?a:$[1],w=m("Math").$ldexp(w,m(m("Float"),"MANT_DIG")).$to_i(),I=O(I,m(m("Float"),"MANT_DIG")),m("Rational").$new(M(2,w),1["$<<"](O(1,I))).$rationalize(m("Rational").$new(1,1["$<<"](O(1,I))))):u.$to_r().$rationalize(r)},-1),v(c,"$remainder",function(r){var $=this;return O($,M(r,P($,r).$truncate()))}),v(c,"$round",function(r){var $,s,u=this,w=a;if(X(m("Integer"),u)){if(Y(r==null)||(X(m("Float"),r)&&Y(r["$infinite?"]())&&g.$raise(m("RangeError"),"Infinity"),r=l["$coerce_to!"](r,m("Integer"),"to_int"),Y(p(r,m(m("Integer"),"MIN")))&&g.$raise(m("RangeError"),"out of bounds"),Y(r>=0)))return u;if(r=r["$-@"](),.415241*r-.125>u.$size())return 0;var I=Math.pow(10,r),D=Math.floor((Math.abs(u)+I/2)/I)*I;return u<0?-D:D}else{if(Y(u["$nan?"]())&&Y(r==null)&&g.$raise(m("FloatDomainError"),"NaN"),r=l["$coerce_to!"](r||0,m("Integer"),"to_int"),Y(L(r,0)))Y(u["$nan?"]())?g.$raise(m("RangeError"),"NaN"):Y(u["$infinite?"]())&&g.$raise(m("FloatDomainError"),"Infinity");else{if(k(r,0))return Math.round(u);if(Y(u["$nan?"]())||Y(u["$infinite?"]()))return u}return s=m("Math").$frexp(u),$=W(s),$[0]==null||$[0],w=$[1]==null?a:$[1],Y(E(r,O(ne(m(m("Float"),"DIG"),2),Y(z(w,0))?P(w,4):O(P(w,3),1))))?u:Y(p(r,(Y(z(w,0))?ne(P(w,3),1):P(w,4))["$-@"]()))?0:Math.round(u*Math.pow(10,r))/Math.pow(10,r)}},-1),v(c,"$times",function n(){var r=n.$$p||a,$=this;if(n.$$p=null,!Y(r))return Q($,"enum_for",["times"],function u(){var w=u.$$s==null?this:u.$$s;return w},{$$s:$});for(var s=0;s<$;s++)r(s);return $}),v(c,"$to_f",C),v(c,"$to_i",function(){var r=this;return r<0?Math.ceil(r):Math.floor(r)}),v(c,"$to_r",function(){var r,$,s=this,u=a,w=a;return X(m("Integer"),s)?m("Rational").$new(s,1):($=m("Math").$frexp(s),r=W($),u=r[0]==null?a:r[0],w=r[1]==null?a:r[1],u=m("Math").$ldexp(u,m(m("Float"),"MANT_DIG")).$to_i(),w=O(w,m(m("Float"),"MANT_DIG")),M(u,m(m("Float"),"RADIX")["$**"](w)).$to_r())}),v(c,"$to_s",function(r){var $=this;return r==null&&(r=10),r=l["$coerce_to!"](r,m("Integer"),"to_int"),(Y(p(r,2))||Y(z(r,36)))&&g.$raise(m("ArgumentError"),"invalid radix "+r),k($,0)&&Y(1/$===-1/0)?"-0.0":$.toString(r)},-1),v(c,"$truncate",function(r){var $=this;r==null&&(r=0);var s=$.$to_f();if(s%1===0&&r>=0)return s;var u=Math.pow(10,r),w=parseInt(s*u,10)/u;return s%1===0&&(w=Math.round(w)),w},-1),v(c,"$digits",function(r){var $=this;r==null&&(r=10),Y(p($,0))&&g.$raise(m(m("Math"),"DomainError"),"out of domain"),r=l["$coerce_to!"](r,m("Integer"),"to_int"),Y(p(r,2))&&g.$raise(m("ArgumentError"),"invalid radix "+r),$!=parseInt($)&&g.$raise(m("NoMethodError"),"undefined method `digits' for "+$.$inspect());var s=$,u=[];if($==0)return[0];for(;s!=0;)u.push(s%r),s=parseInt(s/r,10);return u},-1),v(c,"$divmod",function n(r){var $=n.$$p||a,s=this;return n.$$p=null,Y(s["$nan?"]())||Y(r["$nan?"]())?g.$raise(m("FloatDomainError"),"NaN"):Y(s["$infinite?"]())?g.$raise(m("FloatDomainError"),"Infinity"):$e(s,Z(s,"divmod",n,!1,!0),"divmod",[r],$)}),v(c,"$upto",function n(r){var $=n.$$p||a,s=this;if(n.$$p=null,$===a)return Q(s,"enum_for",["upto",r],function w(){var I=w.$$s==null?this:w.$$s;return X(m("Numeric"),r)||g.$raise(m("ArgumentError"),"comparison of "+I.$class()+" with "+r.$class()+" failed"),Y(p(r,I))?0:ne(O(r,I),1)},{$$s:s});r.$$is_number||g.$raise(m("ArgumentError"),"comparison of "+s.$class()+" with "+r.$class()+" failed");for(var u=s;u<=r;u++)$(u);return s}),v(c,"$zero?",function(){var r=this;return r==0}),v(c,"$size",q(4)),v(c,"$nan?",function(){var r=this;return isNaN(r)}),v(c,"$finite?",function(){var r=this;return r!=1/0&&r!=-1/0&&!isNaN(r)}),v(c,"$infinite?",function(){var r=this;return r==1/0?1:r==-1/0?-1:a}),v(c,"$positive?",function(){var r=this;return r!=0&&(r==1/0||1/r>0)}),v(c,"$negative?",function(){var r=this;return r==-1/0||1/r<0});function h(n){var r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,n,!0),r}function _(n){return new DataView(n.buffer).getFloat64(0,!0)}function o(n){for(var r=h(n),$=0;$<r.length;$++)if(r[$]===255)r[$]=0;else{r[$]++;break}return _(r)}function i(n){for(var r=h(n),$=0;$<r.length;$++)if(r[$]===0)r[$]=255;else{r[$]--;break}return _(r)}return v(c,"$next_float",function(){var r=this;return k(r,m(m("Float"),"INFINITY"))?m(m("Float"),"INFINITY"):Y(r["$nan?"]())?m(m("Float"),"NAN"):Y(E(r,0))?o(Math.abs(r)):i(r)}),v(c,"$prev_float",function(){var r=this;return k(r,m(m("Float"),"INFINITY")["$-@"]())?m(m("Float"),"INFINITY")["$-@"]():Y(r["$nan?"]())?m(m("Float"),"NAN"):Y(z(r,0))?i(r):-o(Math.abs(r))}),U(c,"arg","angle"),U(c,"eql?","=="),U(c,"fdiv","/"),U(c,"inspect","to_s"),U(c,"kind_of?","is_a?"),U(c,"magnitude","abs"),U(c,"modulo","%"),U(c,"object_id","__id__"),U(c,"phase","angle"),U(c,"succ","next"),U(c,"to_int","to_i")}("::",m("Numeric")),B("::","Fixnum",m("Number")),function(T,y,d){var c=t(T,y,"Integer"),J=[c].concat(d);return c.$$is_number_class=!0,c.$$is_integer_class=!0,function(V,h){var _=[V].concat(h),o=e.$r(_);return v(V,"$allocate",function(){var n=this;return g.$raise(m("TypeError"),"allocator undefined for "+n.$name())}),e.udef(V,"$new"),v(V,"$sqrt",function(n){return n=l["$coerce_to!"](n,m("Integer"),"to_int"),n<0&&g.$raise(m(m("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(n),10)}),v(V,"$try_convert",function(n){var r=this;return o("Opal")["$coerce_to?"](n,r,"to_int")})}(e.get_singleton_class(c),J),B(c,"MAX",Math.pow(2,30)-1),B(c,"MIN",-Math.pow(2,30))}("::",m("Numeric"),A),function(T,y,d){var c=t(T,y,"Float");return c.$$is_number_class=!0,function(J,V){return v(J,"$allocate",function(){var _=this;return g.$raise(m("TypeError"),"allocator undefined for "+_.$name())}),e.udef(J,"$new"),v(J,"$===",function(_){return!!_.$$is_number})}(e.get_singleton_class(c)),B(c,"INFINITY",1/0),B(c,"MAX",Number.MAX_VALUE),B(c,"MIN",Number.MIN_VALUE),B(c,"NAN",NaN),B(c,"DIG",15),B(c,"MANT_DIG",53),B(c,"RADIX",2),B(c,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",m("Numeric"))};Opal.modules["corelib/range"]=function(e){var t=e.klass,l=e.truthy,g=e.Kernel,v=e.def,X=e.not,Y=e.send2,z=e.find_super,H=e.lambda,p=e.send,U=e.rb_ge,$e=e.rb_gt,Z=e.eqeq,Q=e.rb_le,ne=e.rb_lt,O=e.eqeqeq,k=e.return_ivar,C=e.rb_minus,P=e.Opal,W=e.rb_divide,M=e.rb_plus,L=e.rb_times,E=e.thrower,q=e.alias,B=e.top,F=[],A=e.nil,a=e.$$$;return e.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),B.$require("corelib/enumerable"),function(m,T,y){var d=t(m,T,"Range"),c=[d].concat(y),J=e.$r(c),V=d.$$prototype;V.begin=V.end=V.excl=A,d.$include(a("Enumerable")),d.$$prototype.$$is_range=!0,d.$attr_reader("begin","end"),v(d,"$initialize",function(o,i,n){var r=this;return n==null&&(n=!1),l(r.begin)&&g.$raise(a("NameError"),"'initialize' called twice"),l(o["$<=>"](i))||l(o["$nil?"]())||l(i["$nil?"]())||g.$raise(a("ArgumentError"),"bad value for range"),r.begin=o,r.end=i,r.excl=n},-3),v(d,"$===",function(o){var i=this;return l(o.$$is_range)?!1:i["$cover?"](o)});function h(_){return _.begin===A||_.end===A||_.begin===-1/0||_.end===1/0||_.begin===1/0||_.end===-1/0}return v(d,"$count",function _(){var o=_.$$p||A,i=this;return _.$$p=null,X(o!==A)&&l(h(i))?a(a("Float"),"INFINITY"):Y(i,z(i,"count",_,!1,!0),"count",[],o)}),v(d,"$to_a",function _(){var o=_.$$p||A,i=this;return _.$$p=null,l(h(i))&&g.$raise(a("TypeError"),"cannot convert endless range to an array"),Y(i,z(i,"to_a",_,!1,!0),"to_a",[],o)}),v(d,"$cover?",function(o){var i=this,n=A,r=A,$=A,s=A,u=A,w=A,I=A,D=A;return n=H(function(j,re){var oe=A;return j==null&&(j=A),re==null&&(re=A),l(oe=j["$<=>"](re))?oe:1}),l(o.$$is_range)?(r=o.$begin(),$=o.$end(),s=o["$exclude_end?"](),l(i.begin)&&l(r["$nil?"]())||l(i.end)&&l($["$nil?"]())||l(r)&&l($)&&l(p(n.$call(r,$),"then",[],function(j){return j==null&&(j=A),l(s)?U(j,0):$e(j,0)}))||l(r)&&X(i["$cover?"](r))?!1:(u=n.$call(i.end,$),Z(i.excl,s)?U(u,0):l(i.excl)?$e(u,0):l(U(u,0))?!0:(w=o.$max(),l(I=w["$nil?"]()["$!"]())?Q(n.$call(w,i.end),0):I))):l(i.begin)&&l($e(n.$call(i.begin,o),0))?!1:l(i.end["$nil?"]())?!0:(D=n.$call(o,i.end),l(i.excl)?ne(D,0):Q(D,0))}),v(d,"$each",function _(){var o=_.$$p||A,i=this,n=A,r=A,$=A;if(_.$$p=null,o===A)return p(i,"enum_for",["each"],function w(){var I=w.$$s==null?this:w.$$s;return I.$size()},{$$s:i});var s,u;if(i.begin.$$is_number&&i.end.$$is_number){for((i.begin%1!==0||i.end%1!==0)&&g.$raise(a("TypeError"),"can't iterate from Float"),s=i.begin,u=i.end+(l(i.excl)?0:1);s<u;s++)o(s);return i}if(i.begin.$$is_string&&i.end.$$is_string)return p(i.begin,"upto",[i.end,i.excl],o.$to_proc()),i;for(n=i.begin,r=i.end,l(n["$respond_to?"]("succ"))||g.$raise(a("TypeError"),"can't iterate from "+n.$class());l(l($=i.end["$nil?"]())?$:ne(n["$<=>"](r),0));)e.yield1(o,n),n=n.$succ();return X(i.excl)&&Z(n,r)&&e.yield1(o,n),i}),v(d,"$eql?",function(o){var i=this,n=A,r=A;return O(a("Range"),o)?l(n=l(r=i.excl["$==="](o["$exclude_end?"]()))?i.begin["$eql?"](o.$begin()):r)?i.end["$eql?"](o.$end()):n:!1}),v(d,"$exclude_end?",k("excl")),v(d,"$first",function _(o){var i=_.$$p||A,n=this;return _.$$p=null,l(n.begin["$nil?"]())&&g.$raise(a("RangeError"),"cannot get the minimum of beginless range"),l(o==null)?n.begin:Y(n,z(n,"first",_,!1,!0),"first",[o],i)},-1),v(d,"$include?",function _(o){var i=_.$$p||A,n=this,r=A,$=A;if(_.$$p=null,l(n.begin.$$is_number||n.end.$$is_number)||l(n.begin["$is_a?"](a("Time")))||l(n.end["$is_a?"](a("Time")))||l(a("Integer").$try_convert(n.begin))||l(a("Integer").$try_convert(n.end)))return n["$cover?"](o);if(l(n.begin.$$is_string||n.end.$$is_string)){if(l(n.begin.$$is_string&&n.end.$$is_string))return p(n.begin.$upto(n.end,n.excl),"any?",[],function(u){return u==null&&(u=A),u["$=="](o)});if(l(n.begin["$nil?"]()))return r=o["$<=>"](n.end),l($=r["$nil?"]()["$!"]())?l(n.excl)?ne(r,0):Q(r,0):$;if(l(n.end["$nil?"]()))return r=n.begin["$<=>"](o),l($=r["$nil?"]()["$!"]())?Q(r,0):$}return Y(n,z(n,"include?",_,!1,!0),"include?",[o],i)}),v(d,"$last",function(o){var i=this;return l(i.end["$nil?"]())&&g.$raise(a("RangeError"),"cannot get the maximum of endless range"),l(o==null)?i.end:i.$to_a().$last(o)},-1),v(d,"$max",function _(){var o=_.$$p||A,i=this;return _.$$p=null,l(i.end["$nil?"]())?g.$raise(a("RangeError"),"cannot get the maximum of endless range"):o!==A?Y(i,z(i,"max",_,!1,!0),"max",[],o):X(i.begin["$nil?"]())&&(l($e(i.begin,i.end))||l(i.excl)&&Z(i.begin,i.end))?A:i.excl?i.end-1:i.end}),v(d,"$min",function _(){var o=_.$$p||A,i=this;return _.$$p=null,l(i.begin["$nil?"]())?g.$raise(a("RangeError"),"cannot get the minimum of beginless range"):o!==A?Y(i,z(i,"min",_,!1,!0),"min",[],o):X(i.end["$nil?"]())&&(l($e(i.begin,i.end))||l(i.excl)&&Z(i.begin,i.end))?A:i.begin}),v(d,"$size",function(){var o=this.begin,i=this.end;if(a("Numeric")["$==="](o)){if(a("Numeric")["$==="](i)){var n=C(i,o);return n<0?0:(this.excl||(n+=1),a("Float")["$==="](o)||a("Float")["$==="](i)?Math.floor(n):n)}else if(i===A)return 1/0}else if(o===A&&a("Numeric")["$==="](i))return 1/0;return A}),v(d,"$step",function _(o){var i=_.$$p||A,n=this,r=A,$=A;_.$$p=null;function s(){o==null?o=1:o.$$is_number||(o=P["$coerce_to!"](o,a("Integer"),"to_int")),o<0?g.$raise(a("ArgumentError"),"step can't be negative"):o===0&&g.$raise(a("ArgumentError"),"step can't be 0")}function u(){if(!n.begin["$respond_to?"]("succ")||n.begin.$$is_string&&n.end.$$is_string)return A;if(o%1===0)return W(n.$size(),o).$ceil();var w=n.begin,I=n.end,D=Math.abs,S=Math.floor,j=(D(w)+D(I)+D(I-w))/D(o)*a(a("Float"),"EPSILON"),re;return j>.5&&(j=.5),n.excl?(re=S((I-w)/o-j),re*o+w<I&&re++):re=S((I-w)/o+j)+1,re}return i===A?(l(n.begin["$is_a?"](J("Numeric")))||l(n.begin["$nil?"]()))&&(l(n.end["$is_a?"](J("Numeric")))||l(n.end["$nil?"]()))&&X(l(r=n.begin["$nil?"]())?n.end["$nil?"]():r)?a(a("Enumerator"),"ArithmeticSequence").$new(n,o,"step"):p(n,"enum_for",["step",o],function(){return s(),u()}):(s(),l(n.begin.$$is_number&&n.end.$$is_number)?($=0,function(){try{var w=E("break");return p(n,"loop",[],function I(){var D=I.$$s==null?this:I.$$s,S=A;return D.begin==null&&(D.begin=A),D.excl==null&&(D.excl=A),D.end==null&&(D.end=A),S=M(D.begin,L($,o)),l(D.excl)?l(U(S,D.end))&&w.$throw(A,I.$$is_lambda):l($e(S,D.end))&&w.$throw(A,I.$$is_lambda),e.yield1(i,S),$=M($,1)},{$$s:n})}catch(I){if(I===w)return I.$v;throw I}finally{w.is_orphan=!0}}()):(n.begin.$$is_string&&n.end.$$is_string&&o%1!==0&&g.$raise(a("TypeError"),"no implicit conversion to float from string"),p(n,"each_with_index",[],function(I,D){return I==null&&(I=A),D==null&&(D=A),Z(D["$%"](o),0)?e.yield1(i,I):A})),n)},-1),v(d,"$%",function(o){var i=this;return l(i.begin["$is_a?"](J("Numeric")))&&l(i.end["$is_a?"](J("Numeric")))?a(a("Enumerator"),"ArithmeticSequence").$new(i,o,"%"):i.$step(o)}),v(d,"$bsearch",function _(){var o=_.$$p||A,i=this;return _.$$p=null,o===A?i.$enum_for("bsearch"):(l(h(i)&&(i.begin.$$is_number||i.end.$$is_number))&&g.$raise(a("NotImplementedError"),"Can't #bsearch an infinite range"),l(i.begin.$$is_number&&i.end.$$is_number)||g.$raise(a("TypeError"),"can't do binary search for "+i.begin.$class()),p(i.$to_a(),"bsearch",[],o.$to_proc()))}),v(d,"$to_s",function(){var o=this,i=A;return""+(l(i=o.begin)?i:"")+(l(o.excl)?"...":"..")+(l(i=o.end)?i:"")}),v(d,"$inspect",function(){var o=this,i=A;return""+(l(i=o.begin)?o.begin.$inspect():i)+(l(o.excl)?"...":"..")+(l(i=o.end)?o.end.$inspect():i)}),v(d,"$marshal_load",function(o){var i=this;return i.begin=o["$[]"]("begin"),i.end=o["$[]"]("end"),i.excl=o["$[]"]("excl")}),v(d,"$hash",function(){var o=this;return[a("Range"),o.begin,o.end,o.excl].$hash()}),q(d,"==","eql?"),q(d,"member?","include?")}("::",null,F)};Opal.modules["corelib/proc"]=function(e){var t=e.slice,l=e.each_ivar,g=e.klass,v=e.truthy,X=e.Kernel,Y=e.defs,z=e.def,H=e.send,p=e.to_a,U=e.return_self,$e=e.ensure_kwargs,Z=e.hash_get,Q=e.Opal,ne=e.alias,O=e.nil,k=e.$$$;return e.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(C,P){var W=g(C,P,"Proc");e.prop(W.$$prototype,"$$is_proc",!0),e.prop(W.$$prototype,"$$is_lambda",!1),Y(W,"$new",function E(){var q=E.$$p||O;return E.$$p=null,v(q)||X.$raise(k("ArgumentError"),"tried to create a Proc object without a block"),q});function M(E,q){if(E.$$ret)try{return E.apply(null,q)}catch(B){if(B===E.$$ret)return B.$v;throw B}else return E.apply(null,q)}function L(E,q){if(E.$$brk)try{return e.yieldX(E,q)}catch(B){if(B===E.$$brk)return B.$v;throw B}else return e.yieldX(E,q)}return z(W,"$call",function E(q){var B=E.$$p||O,F,A,a=this;return E.$$p=null,F=t(arguments),A=F,B!==O&&(a.$$p=B),a.$$is_lambda?M(a,A):L(a,A)},-1),z(W,"$>>",function E(q){E.$$p;var B=this;return E.$$p=null,H(X,"proc",[],function F(A){var a=F.$$p||O,m,T,y=F.$$s==null?this:F.$$s,d=O;return F.$$p=null,m=t(arguments),T=m,d=H(y,"call",p(T),a.$to_proc()),q.$call(d)},{$$arity:-1,$$s:B})}),z(W,"$<<",function E(q){E.$$p;var B=this;return E.$$p=null,H(X,"proc",[],function F(A){var a=F.$$p||O,m,T,y=F.$$s==null?this:F.$$s,d=O;return F.$$p=null,m=t(arguments),T=m,d=H(q,"call",p(T),a.$to_proc()),y.$call(d)},{$$arity:-1,$$s:B})}),z(W,"$to_proc",U),z(W,"$lambda?",function(){var q=this;return!!q.$$is_lambda}),z(W,"$arity",function(){var q=this;return q.$$is_curried?-1:q.$$arity!=null?q.$$arity:q.length}),z(W,"$source_location",function(){var q=this,B=O;return q.$$is_curried?O:v(B=q.$$source_location)?B:O}),z(W,"$binding",function(){var q=this;return q.$$is_curried&&X.$raise(k("ArgumentError"),"Can't create Binding"),v(k("::","Binding","skip_raise")?"constant":O)?k("Binding").$new(O,[],q.$$s,q.$source_location()):O}),z(W,"$parameters",function(q){var B,F=this;if(q=$e(q),B=Z(q,"lambda"),F.$$is_curried)return[["rest"]];if(F.$$parameters){if(B??F.$$is_lambda)return F.$$parameters;var A=[],a,m;for(a=0,m=F.$$parameters.length;a<m;a++){var T=F.$$parameters[a];T[0]==="req"&&(T=["opt",T[1]]),A.push(T)}return A}else return[]},-1),z(W,"$curry",function(q){var B=this;q===void 0?q=B.length:(q=Q["$coerce_to!"](q,k("Integer"),"to_int"),B.$$is_lambda&&q!==B.length&&X.$raise(k("ArgumentError"),"wrong number of arguments ("+q+" for "+B.length+")"));function F(){var A=t(arguments),a=A.length,m;return a>q&&B.$$is_lambda&&!B.$$is_curried&&X.$raise(k("ArgumentError"),"wrong number of arguments ("+a+" for "+q+")"),a>=q?B.$call.apply(B,A):(m=function(){return F.apply(null,A.concat(t(arguments)))},m.$$is_lambda=B.$$is_lambda,m.$$is_curried=!0,m)}return F.$$is_lambda=B.$$is_lambda,F.$$is_curried=!0,F},-1),z(W,"$dup",function(){var q=this,B=q.$$original_proc||q,F=function(){return B.apply(this,arguments)};return l(q,function(A){F[A]=q[A]}),F}),ne(W,"===","call"),ne(W,"clone","dup"),ne(W,"yield","call"),ne(W,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(e){var t=e.klass,l=e.def,g=e.truthy,v=e.slice,X=e.alias,Y=e.Kernel,z=e.send,H=e.to_a,p=e.nil,U=e.$$$;return e.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function($e,Z){var Q=t($e,Z,"Method"),ne=Q.$$prototype;return ne.method=ne.receiver=ne.owner=ne.name=p,Q.$attr_reader("owner","receiver","name"),l(Q,"$initialize",function(k,C,P,W){var M=this;return M.receiver=k,M.owner=C,M.name=W,M.method=P}),l(Q,"$arity",function(){var k=this;return k.method.$arity()}),l(Q,"$parameters",function(){var k=this;return k.method.$$parameters}),l(Q,"$source_location",function(){var k=this,C=p;return g(C=k.method.$$source_location)?C:["(eval)",0]}),l(Q,"$comments",function(){var k=this,C=p;return g(C=k.method.$$comments)?C:[]}),l(Q,"$call",function O(k){var C=O.$$p||p,P,W,M=this;return O.$$p=null,P=v(arguments),W=P,M.method.$$p=C,M.method.apply(M.receiver,W)},-1),l(Q,"$curry",function(k){var C=this;return C.method.$curry(k)},-1),l(Q,"$>>",function(k){var C=this;return C.method["$>>"](k)}),l(Q,"$<<",function(k){var C=this;return C.method["$<<"](k)}),l(Q,"$unbind",function(){var k=this;return U("UnboundMethod").$new(k.receiver.$class(),k.owner,k.method,k.name)}),l(Q,"$to_proc",function(){var k=this,C=k.$call.bind(k);return C.$$unbound=k.method,C.$$is_lambda=!0,C.$$arity=k.method.$$arity==null?k.method.length:k.method.$$arity,C.$$parameters=k.method.$$parameters,C}),l(Q,"$inspect",function(){var k=this;return"#<"+k.$class()+": "+k.receiver.$class()+"#"+k.name+" (defined in "+k.owner+" in "+k.$source_location().$join(":")+")>"}),X(Q,"[]","call"),X(Q,"===","call")}("::",null),function($e,Z){var Q=t($e,Z,"UnboundMethod"),ne=Q.$$prototype;return ne.method=ne.owner=ne.name=ne.source=p,Q.$attr_reader("source","owner","name"),l(Q,"$initialize",function(k,C,P,W){var M=this;return M.source=k,M.owner=C,M.method=P,M.name=W,M.$$method=P}),l(Q,"$arity",function(){var k=this;return k.method.$arity()}),l(Q,"$parameters",function(){var k=this;return k.method.$$parameters}),l(Q,"$source_location",function(){var k=this,C=p;return g(C=k.method.$$source_location)?C:["(eval)",0]}),l(Q,"$comments",function(){var k=this,C=p;return g(C=k.method.$$comments)?C:[]}),l(Q,"$bind",function(k){var C=this;if(C.owner.$$is_module||e.is_a(k,C.owner))return U("Method").$new(k,C.owner,C.method,C.name);Y.$raise(U("TypeError"),"can't bind singleton method to a different class (expected "+k+".kind_of?("+C.owner+" to be true)")}),l(Q,"$bind_call",function O(k,C){var P=O.$$p||p,W,M,L=this;return O.$$p=null,W=v(arguments,1),M=W,z(L.$bind(k),"call",H(M),P.$to_proc())},-2),l(Q,"$inspect",function(){var k=this;return"#<"+k.$class()+": "+k.source+"#"+k.name+" (defined in "+k.owner+" in "+k.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(e){var t=e.gvars,l=e.const_set,g=e.Object,v=e.nil;return e.add_stubs("new"),t["&"]=t["~"]=t["`"]=t["'"]=v,t.LOADED_FEATURES=t['"']=e.loaded_features,t.LOAD_PATH=t[":"]=[],t["/"]=`
`,t[","]=v,l("::","ARGV",[]),l("::","ARGF",g.$new()),l("::","ENV",new Map),t.VERBOSE=!1,t.DEBUG=!1,t.SAFE=0};Opal.modules["corelib/io"]=function(e){var t=e.klass,l=e.const_set,g=e.not,v=e.truthy,X=e.def,Y=e.return_ivar,z=e.return_val,H=e.slice,p=e.Kernel,U=e.gvars,$e=e.send,Z=e.to_a,Q=e.rb_plus,ne=e.neqeq,O=e.range,k=e.eqeq,C=e.to_ary,P=e.rb_gt,W=e.assign_ivar_val,M=e.alias,L,E=e.nil,q=e.$$$;e.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(F,A){var a=t(F,A,"IO"),m=a.$$prototype;return m.read_buffer=m.closed=E,l(a,"SEEK_SET",0),l(a,"SEEK_CUR",1),l(a,"SEEK_END",2),l(a,"SEEK_DATA",3),l(a,"SEEK_HOLE",4),l(a,"READABLE",1),l(a,"WRITABLE",4),a.$attr_reader("eof"),a.$attr_accessor("read_proc","sync","tty","write_proc"),X(a,"$initialize",function(y,d){var c=this;return d==null&&(d="r"),c.fd=y,c.flags=d,c.eof=!1,v(d["$include?"]("r"))&&g(d["$match?"](/[wa+]/))?c.closed="write":v(d["$match?"](/[wa]/))&&g(d["$match?"](/[r+]/))?c.closed="read":E},-2),X(a,"$fileno",Y("fd")),X(a,"$tty?",function(){var y=this;return y.tty==!0}),X(a,"$write",function(y){var d=this;return d.write_proc(y),y.$size()}),X(a,"$flush",z(E)),X(a,"$<<",function(y){var d=this;return d.$write(y),d}),X(a,"$print",function(y){var d,c,J=this;U[","]==null&&(U[","]=E),d=H(arguments),c=d;for(var V=0,h=c.length;V<h;V++)c[V]=p.$String(c[V]);return J.$write(c.join(U[","])),E},-1),X(a,"$puts",function(y){var d,c,J=this;d=H(arguments),c=d;var V;if(c.length===0)return J.$write(`
`),E;for(var h=0,_=c.length;h<_;h++)if(c[h].$$is_array){var o=c[h].$flatten();o.length>0&&$e(J,"puts",Z(o))}else c[h].$$is_string?V=c[h].valueOf():V=p.$String(c[h]),V.endsWith(`
`)||(V+=`
`),J.$write(V);return E},-1),X(a,"$getc",function(){var y=this,d=E,c=E,J=E;y.read_buffer=v(d=y.read_buffer)?d:"",c="";do if(y.read_buffer=Q(y.read_buffer,c),ne(y.read_buffer,""))return J=y.read_buffer["$[]"](0),y.read_buffer=y.read_buffer["$[]"](O(1,-1,!1)),J;while(v(c=y.$sysread_noraise(1)));return E}),X(a,"$getbyte",function(){var y,d=this;return y=d.$getc(),y===E||y==null?E:y.$ord()}),X(a,"$readbyte",function(){var y=this;return y.$readchar().$ord()}),X(a,"$readchar",function(){var y=this,d=E;return v(d=y.$getc())?d:p.$raise(q("EOFError"),"end of file reached")}),X(a,"$readline",function(y){var d,c,J=this,V=E;return d=H(arguments),c=d,v(V=$e(J,"gets",Z(c)))?V:p.$raise(q("EOFError"),"end of file reached")},-1),X(a,"$gets",function(y,d,c){var J,V,h=this,_=E,o=E,i=E,n=E,r=E,$=E;U["/"]==null&&(U["/"]=E),y==null&&(y=!1),d==null&&(d=E),c==null&&(c=new Map),v(y.$$is_number)&&g(d)&&(J=[!1,y,d],y=J[0],d=J[1],c=J[2]),v(y.$$is_hash)&&g(d)&&k(c,new Map)?(J=[!1,E,y],y=J[0],d=J[1],c=J[2]):v(d.$$is_hash)&&k(c,new Map)&&(J=[y,E,d],y=J[0],d=J[1],c=J[2]),_=y,k(y,!1)&&(y=U["/"]),k(y,"")&&(y=/\r?\n\r?\n/),y=v(o=y)?o:"",k(_,"")||(y=y.$to_str()),i=k(_,"")?2:y.$length(),k(y," ")&&(y=/ /),h.read_buffer=v(o=h.read_buffer)?o:"",n="",r=E;do if(h.read_buffer=Q(h.read_buffer,n),ne(y,"")&&v(v(y.$$is_regexp)?h.read_buffer["$match?"](y):h.read_buffer["$include?"](y))){$=h.read_buffer,V=h.read_buffer.$split(y,2),J=C(V),r=J[0]==null?E:J[0],h.read_buffer=J[1]==null?E:J[1],ne(r,$)&&(r=Q(r,$["$[]"](r.$length(),i)));break}while(v(n=h.$sysread_noraise(k(y,"")?65536:1)));return v(r)||(J=[v(o=h.read_buffer)?o:"",""],r=J[0],h.read_buffer=J[1],k(r,"")&&(r=E)),v(r)&&(v(d)&&(r=r["$[]"](e.Range.$new(0,d,!0)),h.read_buffer=Q(r["$[]"](e.Range.$new(d,-1,!1)),h.read_buffer)),v(c["$[]"]("chomp"))&&(r=r.$sub(/\r?\n$/,"")),k(_,"")&&(r=r.$sub(/^[\r\n]+/,""))),k(_,!1)&&(U._=r),r},-1),X(a,"$sysread",function(y){var d=this,c=E;return v(c=d.read_proc(y))?c:(d.eof=!0,p.$raise(q("EOFError"),"end of file reached"))}),X(a,"$sysread_noraise",function(y){var d=this;try{return d.$sysread(y)}catch(c){if(e.rescue(c,[q("EOFError")]))try{return E}finally{e.pop_exception(c)}else throw c}}),X(a,"$readpartial",function(y){var d,c=this,J=E,V=E,h=E;return c.read_buffer=v(J=c.read_buffer)?J:"",V=c.$sysread(y),d=[Q(c.read_buffer,v(J=V)?J:""),""],h=d[0],c.read_buffer=d[1],k(h,"")&&(h=E),h}),X(a,"$read",function(y){var d,c=this,J=E,V=E,h=E;y==null&&(y=E),c.read_buffer=v(J=c.read_buffer)?J:"",V="",h=E;do if(c.read_buffer=Q(c.read_buffer,V),v(y)&&v(P(c.read_buffer.$length(),y)))return d=[c.read_buffer["$[]"](e.Range.$new(0,y,!0)),c.read_buffer["$[]"](e.Range.$new(y,-1,!1))],h=d[0],c.read_buffer=d[1],h;while(v(V=c.$sysread_noraise(v(J=y)?J:65536)));return d=[c.read_buffer,""],h=d[0],c.read_buffer=d[1],h},-1),X(a,"$readlines",function(y){var d=this;return U["/"]==null&&(U["/"]=E),y==null&&(y=U["/"]),d.$each_line(y).$to_a()},-1),X(a,"$each",function T(y,d){var c=T.$$p||E,J,V,h,_=this,o=E;if(U["/"]==null&&(U["/"]=E),T.$$p=null,J=H(arguments),J.length>0&&(V=J.shift()),V==null&&(V=U["/"]),h=J,c===E)return $e(_,"enum_for",["each",V].concat(Z(h)));for(;v(o=$e(_,"gets",[V].concat(Z(h))));)e.yield1(c,o);return _},-1),X(a,"$each_byte",function T(){var y=T.$$p||E,d=this,c=E;if(T.$$p=null,y===E)return d.$enum_for("each_byte");for(;v(c=d.$getbyte());)e.yield1(y,c);return d}),X(a,"$each_char",function T(){var y=T.$$p||E,d=this,c=E;if(T.$$p=null,y===E)return d.$enum_for("each_char");for(;v(c=d.$getc());)e.yield1(y,c);return d}),X(a,"$close",W("closed","both")),X(a,"$close_read",function(){var y=this;return k(y.closed,"write")?y.closed="both":y.closed="read"}),X(a,"$close_write",function(){var y=this;return k(y.closed,"read")?y.closed="both":y.closed="write"}),X(a,"$closed?",function(){var y=this;return y.closed["$=="]("both")}),X(a,"$closed_read?",function(){var y=this,d=E;return v(d=y.closed["$=="]("read"))?d:y.closed["$=="]("both")}),X(a,"$closed_write?",function(){var y=this,d=E;return v(d=y.closed["$=="]("write"))?d:y.closed["$=="]("both")}),X(a,"$check_writable",function(){var y=this;return v(y["$closed_write?"]())?p.$raise(q("IOError"),"not opened for writing"):E}),X(a,"$check_readable",function(){var y=this;return v(y["$closed_read?"]())?p.$raise(q("IOError"),"not opened for reading"):E}),M(a,"each_line","each"),M(a,"eof?","eof")}("::",null),l("::","STDIN",U.stdin=q("IO").$new(0,"r")),l("::","STDOUT",U.stdout=q("IO").$new(1,"w")),l("::","STDERR",U.stderr=q("IO").$new(2,"w"));var B=e.global.console;return q("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(F){process.stdout.write(F)}:function(F){B.log(F)}),q("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(F){process.stderr.write(F)}:function(F){B.warn(F)}),L=[function(F){var A=prompt();return A!==null?A+`
`:E}],$e(q("STDIN"),"read_proc=",L),L[L.length-1]};Opal.modules["opal/regexp_anchors"]=function(e){var t=e.module,l=e.const_set,g=[];e.nil;var v=e.$$$;return e.add_stubs("new"),function(X,Y){var z=t(X,"Opal"),H=[z].concat(Y),p=e.$r(H);return l(z,"REGEXP_START","^"),l(z,"REGEXP_END","$"),l(z,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),l(z,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),l(z,"INLINE_IDENTIFIER_REGEXP",p("Regexp").$new("[^"+v(z,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+v(z,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),l(z,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),l(z,"CONST_NAME_REGEXP",p("Regexp").$new(""+v(z,"REGEXP_START")+"(::)?[A-Z][^"+v(z,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+v(z,"REGEXP_END")))}(g[0],g)};Opal.modules["opal/mini"]=function(e){var t=e.Object;return e.nil,e.add_stubs("require"),t.$require("opal/base"),t.$require("corelib/nil"),t.$require("corelib/boolean"),t.$require("corelib/string"),t.$require("corelib/comparable"),t.$require("corelib/enumerable"),t.$require("corelib/enumerator"),t.$require("corelib/array"),t.$require("corelib/hash"),t.$require("corelib/number"),t.$require("corelib/range"),t.$require("corelib/proc"),t.$require("corelib/method"),t.$require("corelib/regexp"),t.$require("corelib/variables"),t.$require("corelib/io"),t.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(e){var t=e.coerce_to,l=e.module,g=e.slice,v=e.truthy,X=e.eqeq,Y=e.Opal,z=e.Kernel,H=e.gvars,p=e.def,U=e.alias,$e=e.nil,Z=e.$$$;return e.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(Q){var ne=l(Q,"Kernel");return p(ne,"$format",function(k,C){var P,W,M=$e;H.DEBUG==null&&(H.DEBUG=$e),P=g(arguments,1),W=P,X(W.$length(),1)&&v(W["$[]"](0)["$respond_to?"]("to_ary"))&&(M=Y["$coerce_to?"](W["$[]"](0),Z("Array"),"to_ary"),v(M["$nil?"]())||(W=M.$to_a()));var L="",E=0,q,B,F=k.length,A,a,m,T,y,d,c,J,V,h,_,o,i,n=1,r=0,$,s=0,u=1,w=2,I=4,D=8,S=16,j=32,re=64,oe=128;function le(){$&j&&z.$raise(Z("ArgumentError"),"flag after width"),$&oe&&z.$raise(Z("ArgumentError"),"flag after precision")}function _e(){$&j&&z.$raise(Z("ArgumentError"),"width given twice"),$&oe&&z.$raise(Z("ArgumentError"),"width after precision")}function he(x){return x>=W.length&&z.$raise(Z("ArgumentError"),"too few arguments"),W[x]}function ge(){switch(r){case-1:z.$raise(Z("ArgumentError"),"unnumbered("+n+") mixed with numbered");case-2:z.$raise(Z("ArgumentError"),"unnumbered("+n+") mixed with named")}return r=n++,he(r-1)}function me(x){return r>0&&z.$raise(Z("ArgumentError"),"numbered("+x+") after unnumbered("+r+")"),r===-2&&z.$raise(Z("ArgumentError"),"numbered("+x+") after named"),x<1&&z.$raise(Z("ArgumentError"),"invalid index - "+x+"$"),r=-1,he(x-1)}function ve(){return i===void 0?ge():i}function be(x){for(var N,K="";;B++){if(B===F&&z.$raise(Z("ArgumentError"),"malformed format string - %*[0-9]"),k.charCodeAt(B)<48||k.charCodeAt(B)>57)return B--,N=parseInt(K,10)||0,N>2147483647&&z.$raise(Z("ArgumentError"),""+x+" too big"),N;K+=k.charAt(B)}}function ie(x){var N,K=be(x);return k.charAt(B+1)==="$"?(B++,N=me(K)):N=ge(),N.$to_int()}for(B=k.indexOf("%");B!==-1;B=k.indexOf("%",B)){switch(a=void 0,$=s,T=-1,y=-1,i=void 0,q=B,B++,k.charAt(B)){case"%":E=B;case"":case`
`:case"\0":B++;continue}e:for(;B<F;B++)switch(k.charAt(B)){case" ":le(),$|=S;continue e;case"#":le(),$|=u;continue e;case"+":le(),$|=I;continue e;case"-":le(),$|=w;continue e;case"0":le(),$|=D;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(d=be("width"),k.charAt(B+1)==="$"){if(B+2===F){a="%",B++;break e}i!==void 0&&z.$raise(Z("ArgumentError"),"value given twice - %"+d+"$"),i=me(d),B++}else _e(),$|=j,T=d;continue e;case"<":case"{":for(J=k.charAt(B)==="<"?">":"}",c="",B++;;B++){if(B===F&&z.$raise(Z("ArgumentError"),"malformed name - unmatched parenthesis"),k.charAt(B)===J){if(r>0&&z.$raise(Z("ArgumentError"),"named "+c+" after unnumbered("+r+")"),r===-1&&z.$raise(Z("ArgumentError"),"named "+c+" after numbered"),r=-2,(W[0]===void 0||!W[0].$$is_hash)&&z.$raise(Z("ArgumentError"),"one hash required"),i=W[0].$fetch(c),J===">")continue e;if(a=i.toString(),y!==-1&&(a=a.slice(0,y)),$&w)for(;a.length<T;)a=a+" ";else for(;a.length<T;)a=" "+a;break e}c+=k.charAt(B)}case"*":B++,_e(),$|=j,T=ie("width"),T<0&&($|=w,T=-T);continue e;case".":if($&oe&&z.$raise(Z("ArgumentError"),"precision given twice"),$|=re|oe,y=0,B++,k.charAt(B)==="*"){B++,y=ie("precision"),y<0&&($&=~re);continue e}y=be("precision");continue e;case"d":case"i":case"u":if(A=z.$Integer(ve()),A>=0){for(a=A.toString();a.length<y;)a="0"+a;if($&w)for(($&I||$&S)&&(a=($&I?"+":" ")+a);a.length<T;)a=a+" ";else if($&D&&y===-1){for(;a.length<T-($&I||$&S?1:0);)a="0"+a;($&I||$&S)&&(a=($&I?"+":" ")+a)}else for(($&I||$&S)&&(a=($&I?"+":" ")+a);a.length<T;)a=" "+a}else{for(a=(-A).toString();a.length<y;)a="0"+a;if($&w)for(a="-"+a;a.length<T;)a=a+" ";else if($&D&&y===-1){for(;a.length<T-1;)a="0"+a;a="-"+a}else for(a="-"+a;a.length<T;)a=" "+a}break e;case"b":case"B":case"o":case"x":case"X":switch(k.charAt(B)){case"b":case"B":V=2,h="0b",_=/^1+/,o="1";break;case"o":V=8,h="0",_=/^3?7+/,o="7";break;case"x":case"X":V=16,h="0x",_=/^f+/,o="f";break}if(A=z.$Integer(ve()),A>=0){for(a=A.toString(V);a.length<y;)a="0"+a;if($&w)for(($&I||$&S)&&(a=($&I?"+":" ")+a),$&u&&A!==0&&(a=h+a);a.length<T;)a=a+" ";else if($&D&&y===-1){for(;a.length<T-($&I||$&S?1:0)-($&u&&A!==0?h.length:0);)a="0"+a;$&u&&A!==0&&(a=h+a),($&I||$&S)&&(a=($&I?"+":" ")+a)}else for($&u&&A!==0&&(a=h+a),($&I||$&S)&&(a=($&I?"+":" ")+a);a.length<T;)a=" "+a}else if($&I||$&S){for(a=(-A).toString(V);a.length<y;)a="0"+a;if($&w)for($&u&&(a=h+a),a="-"+a;a.length<T;)a=a+" ";else if($&D&&y===-1){for(;a.length<T-1-($&u?2:0);)a="0"+a;$&u&&(a=h+a),a="-"+a}else for($&u&&(a=h+a),a="-"+a;a.length<T;)a=" "+a}else{for(a=(A>>>0).toString(V).replace(_,o);a.length<y-2;)a=o+a;if($&w)for(a=".."+a,$&u&&(a=h+a);a.length<T;)a=a+" ";else if($&D&&y===-1){for(;a.length<T-2-($&u?h.length:0);)a=o+a;a=".."+a,$&u&&(a=h+a)}else for(a=".."+a,$&u&&(a=h+a);a.length<T;)a=" "+a}k.charAt(B)===k.charAt(B).toUpperCase()&&(a=a.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(A=z.$Float(ve()),A>=0||isNaN(A)){if(A===1/0)a="Inf";else switch(k.charAt(B)){case"f":a=A.toFixed(y===-1?6:y);break;case"e":case"E":a=A.toExponential(y===-1?6:y);break;case"g":case"G":a=A.toExponential(),m=parseInt(a.split("e")[1],10),m<-4||m>=(y===-1?6:y)||(a=A.toPrecision(y===-1?$&u?6:void 0:y));break}if($&w)for(($&I||$&S)&&(a=($&I?"+":" ")+a);a.length<T;)a=a+" ";else if($&D&&A!==1/0&&!isNaN(A)){for(;a.length<T-($&I||$&S?1:0);)a="0"+a;($&I||$&S)&&(a=($&I?"+":" ")+a)}else for(($&I||$&S)&&(a=($&I?"+":" ")+a);a.length<T;)a=" "+a}else{if(A===-1/0)a="Inf";else switch(k.charAt(B)){case"f":a=(-A).toFixed(y===-1?6:y);break;case"e":case"E":a=(-A).toExponential(y===-1?6:y);break;case"g":case"G":a=(-A).toExponential(),m=parseInt(a.split("e")[1],10),m<-4||m>=(y===-1?6:y)||(a=(-A).toPrecision(y===-1?$&u?6:void 0:y));break}if($&w)for(a="-"+a;a.length<T;)a=a+" ";else if($&D&&A!==-1/0){for(;a.length<T-1;)a="0"+a;a="-"+a}else for(a="-"+a;a.length<T;)a=" "+a}k.charAt(B)===k.charAt(B).toUpperCase()&&A!==1/0&&A!==-1/0&&!isNaN(A)&&(a=a.toUpperCase()),a=a.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":z.$raise(Z("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(A=ve(),A["$respond_to?"]("to_ary")&&(A=A.$to_ary()[0]),A["$respond_to?"]("to_str")?a=A.$to_str():a=String.fromCharCode(t(A,Z("Integer"),"to_int")),a.length!==1&&z.$raise(Z("ArgumentError"),"%c requires a character"),$&w)for(;a.length<T;)a=a+" ";else for(;a.length<T;)a=" "+a;break e;case"p":if(a=ve().$inspect(),y!==-1&&(a=a.slice(0,y)),$&w)for(;a.length<T;)a=a+" ";else for(;a.length<T;)a=" "+a;break e;case"s":if(a=ve().$to_s(),y!==-1&&(a=a.slice(0,y)),$&w)for(;a.length<T;)a=a+" ";else for(;a.length<T;)a=" "+a;break e;default:z.$raise(Z("ArgumentError"),"malformed format string - %"+k.charAt(B))}a===void 0&&z.$raise(Z("ArgumentError"),"malformed format string - %"),L+=k.slice(E,q)+a,E=B+1}return H.DEBUG&&r>=0&&n<W.length&&z.$raise(Z("ArgumentError"),"too many arguments for format string"),L+k.slice(E)},-2),U(ne,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(e){var t=e.klass,l=e.rb_plus,g=e.truthy,v=e.send,X=e.defs,Y=e.eqeq,z=e.def,H=e.return_ivar,p=e.return_val,U=e.slice,$e=e.Kernel,Z=e.Opal,Q=e.rb_lt,ne,O=e.top,k=[],C=e.$r(k),P=e.nil,W=e.$$$;return e.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),O.$require("corelib/string"),function(M,L,E){var q=t(M,L,"Encoding"),B=[q].concat(E),F=q.$$prototype;return F.name=F.dummy=P,X(q,"$register",function A(a,m){var T=A.$$p||P,y=this,d=P,c=P,J=P,V=P,h=P,_=P;return A.$$p=null,m==null&&(m=new Map),d=l([a],g(c=m["$[]"]("aliases"))?c:[]),J=g(c=m["$[]"]("ascii"))&&c,V=g(c=m["$[]"]("dummy"))&&c,g(m["$[]"]("inherits"))?(h=m["$[]"]("inherits").$clone(),h.$initialize(a,d,J,V)):h=y.$new(a,d,J,V),T!==P&&v(h,"instance_eval",[],T.$to_proc()),_=e.encodings,v(d,"each",[],function o(i){var n=o.$$s==null?this:o.$$s;return i==null&&(i=P),n.$const_set(i.$tr("-","_"),h),_[i]=h},{$$s:y})},-2),X(q,"$find",function(a){var m=this;return Y(a,"default_external")?m.$default_external():e.find_encoding(a)}),q.$singleton_class().$attr_accessor("default_external"),q.$attr_reader("name","names"),z(q,"$initialize",function(a,m,T,y){var d=this;return d.name=a,d.names=m,d.ascii=T,d.dummy=y}),z(q,"$ascii_compatible?",H("ascii")),z(q,"$dummy?",H("dummy")),z(q,"$binary?",p(!1)),z(q,"$to_s",H("name")),z(q,"$inspect",function(){var a=this;return"#<Encoding:"+a.name+(g(a.dummy)?" (dummy)":P)+">"}),z(q,"$charsize",function(a){for(var m=0,T=0,y=a.length;T<y;T++){var d=a.charCodeAt(T);d>=55296&&d<=56319||m++}return m}),z(q,"$each_char",function A(a){var m=A.$$p||P;A.$$p=null;for(var T="",y=0,d=a.length;y<d;y++){var c=a.charCodeAt(y),J=a.charAt(y);if(c>=56320&&c<=57343){T=J;continue}else c>=55296&&c<=56319&&(J=T+J);a.encoding.name!="UTF-8"&&(J=new String(J),J.encoding=a.encoding),e.yield1(m,J)}}),z(q,"$each_byte",function(a){return U(arguments),$e.$raise(W("NotImplementedError"))},-1),z(q,"$bytesize",function(a){return U(arguments),$e.$raise(W("NotImplementedError"))},-1),t("::",W("StandardError"),"EncodingError"),t("::",W("EncodingError"),"CompatibilityError"),t(B[0],W("EncodingError"),"UndefinedConversionError"),P}("::",null,k),v(W("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function M(){var L=M.$$s==null?this:M.$$s;return z(L,"$each_byte",function E(q){var B=E.$$p||P;E.$$p=null;for(var F=1/0,A,a=q.length,m=null,T=0;T<a;++T){if(A=q.charCodeAt(T),A>55295&&A<57344){if(!m){if(A>56319){(F-=3)>-1&&(e.yield1(B,239),e.yield1(B,191),e.yield1(B,189));continue}else if(T+1===a){(F-=3)>-1&&(e.yield1(B,239),e.yield1(B,191),e.yield1(B,189));continue}m=A;continue}if(A<56320){(F-=3)>-1&&(e.yield1(B,239),e.yield1(B,191),e.yield1(B,189)),m=A;continue}A=(m-55296<<10|A-56320)+65536}else m&&(F-=3)>-1&&(e.yield1(B,239),e.yield1(B,191),e.yield1(B,189));if(m=null,A<128){if((F-=1)<0)break;e.yield1(B,A)}else if(A<2048){if((F-=2)<0)break;e.yield1(B,A>>6|192),e.yield1(B,A&63|128)}else if(A<65536){if((F-=3)<0)break;e.yield1(B,A>>12|224),e.yield1(B,A>>6&63|128),e.yield1(B,A&63|128)}else if(A<1114112){if((F-=4)<0)break;e.yield1(B,A>>18|240),e.yield1(B,A>>12&63|128),e.yield1(B,A>>6&63|128),e.yield1(B,A&63|128)}}}),z(L,"$bytesize",function(q){return q.$bytes().$length()})},{$$s:O}),v(W("Encoding"),"register",["UTF-16LE"],function M(){var L=M.$$s==null?this:M.$$s;return z(L,"$each_byte",function E(q){var B=E.$$p||P;E.$$p=null;for(var F=0,A=q.length;F<A;F++){var a=q.charCodeAt(F);e.yield1(B,a&255),e.yield1(B,a>>8)}}),z(L,"$bytesize",function(q){return q.length*2})},{$$s:O}),v(W("Encoding"),"register",["UTF-16BE",new Map([["inherits",W(W("Encoding"),"UTF_16LE")]])],function M(){var L=M.$$s==null?this:M.$$s;return z(L,"$each_byte",function E(q){var B=E.$$p||P;E.$$p=null;for(var F=0,A=q.length;F<A;F++){var a=q.charCodeAt(F);e.yield1(B,a>>8),e.yield1(B,a&255)}})},{$$s:O}),v(W("Encoding"),"register",["UTF-32LE"],function M(){var L=M.$$s==null?this:M.$$s;return z(L,"$each_byte",function E(q){var B=E.$$p||P;E.$$p=null;for(var F=0,A=q.length;F<A;F++){var a=q.charCodeAt(F);e.yield1(B,a&255),e.yield1(B,a>>8),e.yield1(B,0),e.yield1(B,0)}}),z(L,"$bytesize",function(q){return q.length*4})},{$$s:O}),v(W("Encoding"),"register",["UTF-32BE",new Map([["inherits",W(W("Encoding"),"UTF_32LE")]])],function M(){var L=M.$$s==null?this:M.$$s;return z(L,"$each_byte",function E(q){var B=E.$$p||P;E.$$p=null;for(var F=0,A=q.length;F<A;F++){var a=q.charCodeAt(F);e.yield1(B,0),e.yield1(B,0),e.yield1(B,a>>8),e.yield1(B,a&255)}})},{$$s:O}),v(W("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function M(){var L=M.$$s==null?this:M.$$s;return z(L,"$each_char",function E(q){var B=E.$$p||P;E.$$p=null;for(var F=0,A=q.length;F<A;F++){var a=new String(q.charAt(F));a.encoding=q.encoding,e.yield1(B,a)}}),z(L,"$charsize",function(q){return q.length}),z(L,"$each_byte",function E(q){var B=E.$$p||P;E.$$p=null;for(var F=0,A=q.length;F<A;F++){var a=q.charCodeAt(F);e.yield1(B,a&255)}}),z(L,"$bytesize",function(q){return q.length}),z(L,"$binary?",p(!0))},{$$s:O}),W("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",W(W("Encoding"),"ASCII_8BIT")]])),W("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",W(W("Encoding"),"ASCII_8BIT")]])),function(M,L){var E=t(M,L,"String"),q=E.$$prototype;return q.internal_encoding=q.bytes=q.encoding=P,E.$attr_reader("encoding"),E.$attr_reader("internal_encoding"),e.prop(String.prototype,"bytes",P),e.prop(String.prototype,"encoding",W(W("Encoding"),"UTF_8")),e.prop(String.prototype,"internal_encoding",W(W("Encoding"),"UTF_8")),z(E,"$b",function(){var F=this;return F.$dup().$force_encoding("binary")}),z(E,"$bytesize",function(){var F=this;return F.internal_encoding.$bytesize(F)}),z(E,"$each_byte",function B(){var F=B.$$p||P,A=this;return B.$$p=null,F===P?v(A,"enum_for",["each_byte"],function a(){var m=a.$$s==null?this:a.$$s;return m.$bytesize()},{$$s:A}):(v(A.internal_encoding,"each_byte",[A],F.$to_proc()),A)}),z(E,"$bytes",function(){var F=this,A=P;return typeof F=="string"?new String(F).$each_byte().$to_a():(F.bytes=g(A=F.bytes)?A:F.$each_byte().$to_a(),F.bytes.$dup())}),z(E,"$each_char",function B(){var F=B.$$p||P,A=this;return B.$$p=null,F===P?v(A,"enum_for",["each_char"],function a(){var m=a.$$s==null?this:a.$$s;return m.$length()},{$$s:A}):(v(A.encoding,"each_char",[A],F.$to_proc()),A)}),z(E,"$chars",function B(){var F=B.$$p||P,A=this;return B.$$p=null,g(F)?v(A,"each_char",[],F.$to_proc()):A.$each_char().$to_a()}),z(E,"$each_codepoint",function B(){var F=B.$$p||P,A=this;if(B.$$p=null,F===P)return A.$enum_for("each_codepoint");for(var a=0,m=A.length;a<m;a++)e.yield1(F,A.codePointAt(a));return A}),z(E,"$codepoints",function B(){var F=B.$$p||P,A=this;return B.$$p=null,F!==P?v(A,"each_codepoint",[],F.$to_proc()):A.$each_codepoint().$to_a()}),z(E,"$encode",function(F){var A=this;return e.enc(A,F)}),z(E,"$force_encoding",function(F){var A=this,a=A;return F===a.encoding||(F=Z["$coerce_to!"](F,W("String"),"to_s"),F=W("Encoding").$find(F),F===a.encoding)||(a=e.set_encoding(a,F)),a}),z(E,"$getbyte",function(F){var A=this,a=P;return a=A.$bytes(),F=Z["$coerce_to!"](F,W("Integer"),"to_int"),g(Q(a.$length(),F))?P:a["$[]"](F)}),z(E,"$initialize_copy",function(F){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),z(E,"$valid_encoding?",p(!0))}("::",null),ne=[W(C("Encoding"),"UTF_8")],v(W("Encoding"),"default_external=",ne),ne[ne.length-1]};Opal.modules["corelib/math"]=function(e){var t=e.type_error,l=e.module,g=e.const_set,v=e.Class,X=e.slice,Y=e.Kernel,z=e.defs,H=e.truthy,p=e.send,U=e.def,$e=e.rb_minus,Z=e.eqeqeq,Q=e.rb_divide,ne=[],O=e.nil,k=e.$$$;return e.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(C,P){var W=l(C,"Math"),M=[W].concat(P),L=e.$r(M);return g(W,"E",Math.E),g(W,"PI",Math.PI),g(W,"DomainError",v.$new(k("StandardError"))),z(W,"$checked",function(q,B){var F,A;if(F=X(arguments,1),A=F,isNaN(A[0])||A.length==2&&isNaN(A[1]))return NaN;var a=Math[q].apply(null,A);return isNaN(a)&&Y.$raise(L("DomainError"),'Numerical argument is out of domain - "'+q+'"'),a},-2),z(W,"$float!",function(q){try{return Y.$Float(q)}catch(B){if(e.rescue(B,[k("ArgumentError")]))try{return Y.$raise(t(q,k("Float")))}finally{e.pop_exception(B)}else throw B}}),z(W,"$integer!",function(q){try{return Y.$Integer(q)}catch(B){if(e.rescue(B,[k("ArgumentError")]))try{return Y.$raise(t(q,k("Integer")))}finally{e.pop_exception(B)}else throw B}}),W.$module_function(),H(typeof Math.erf<"u")||e.prop(Math,"erf",function(E){var q=.254829592,B=-.284496736,F=1.421413741,A=-1.453152027,a=1.061405429,m=.3275911,T=1;E<0&&(T=-1),E=Math.abs(E);var y=1/(1+m*E),d=1-((((a*y+A)*y+F)*y+B)*y+q)*y*Math.exp(-E*E);return T*d}),H(typeof Math.erfc<"u")||e.prop(Math,"erfc",function(E){var q=Math.abs(E),B=1/(.5*q+1),F=B*.17087277+-.82215223,A=B*F+1.48851587,a=B*A+-1.13520398,m=B*a+.27886807,T=B*m+-.18628806,y=B*T+.09678418,d=B*y+.37409196,c=B*d+1.00002368,J=B*c,V=-q*q-1.26551223+J,h=B*Math.exp(V);return E<0?2-h:h}),p(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function E(q){var B=E.$$s==null?this:E.$$s;return q==null&&(q=O),p(B,"define_method",[q],function(A){return A==null&&(A=O),k("Math").$checked(q,k("Math")["$float!"](A))})},{$$s:W}),U(W,"$atan2",function(q,B){return k("Math").$checked("atan2",k("Math")["$float!"](q),k("Math")["$float!"](B))}),U(W,"$hypot",function(q,B){return k("Math").$checked("hypot",k("Math")["$float!"](q),k("Math")["$float!"](B))}),U(W,"$frexp",function(q){if(q=L("Math")["$float!"](q),isNaN(q))return[NaN,0];var B=Math.floor(Math.log(Math.abs(q))/Math.log(2))+1,F=q/Math.pow(2,B);return[F,B]}),U(W,"$gamma",function(q){q=L("Math")["$float!"](q);var B,F,A,a,m,T,y,d,c,J=4.7421875,V=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(q))return NaN;if(q===0&&1/q<0)return-1/0;if((q===-1||q===-1/0)&&Y.$raise(L("DomainError"),'Numerical argument is out of domain - "gamma"'),L("Integer")["$==="](q)){if(q<=0)return isFinite(q)?1/0:NaN;if(q>171)return 1/0;for(a=q-2,m=q-1;a>1;)m*=a,a--;return m==0&&(m=1),m}if(q<.5)return Math.PI/(Math.sin(Math.PI*q)*k("Math").$gamma($e(1,q)));if(q>=171.35)return 1/0;if(q>85)return T=q*q,y=T*q,d=y*q,c=d*q,Math.sqrt(2*Math.PI/q)*Math.pow(q/Math.E,q)*(1+1/(12*q)+1/(288*T)-139/(51840*y)-571/(2488320*d)+163879/(209018880*c)+5246819/(75246796800*c*q));for(q-=1,A=V[0],B=1;B<V.length;++B)A+=V[B]/(q+B);return F=q+J+.5,Math.sqrt(2*Math.PI)*Math.pow(F,q+.5)*Math.exp(-F)*A}),U(W,"$ldexp",function(q,B){return q=L("Math")["$float!"](q),B=L("Math")["$integer!"](B),isNaN(B)&&Y.$raise(k("RangeError"),"float NaN out of range of integer"),q*Math.pow(2,B)}),U(W,"$lgamma",function(q){return q==-1?[1/0,1]:[Math.log(Math.abs(k("Math").$gamma(q))),k("Math").$gamma(q)<0?-1:1]}),U(W,"$log",function(q,B){return Z(k("String"),q)&&Y.$raise(t(q,k("Float"))),H(B==null)?k("Math").$checked("log",k("Math")["$float!"](q)):(Z(k("String"),B)&&Y.$raise(t(B,k("Float"))),Q(k("Math").$checked("log",k("Math")["$float!"](q)),k("Math").$checked("log",k("Math")["$float!"](B))))},-2),U(W,"$log10",function(q){return Z(k("String"),q)&&Y.$raise(t(q,k("Float"))),k("Math").$checked("log10",k("Math")["$float!"](q))}),U(W,"$log2",function(q){return Z(k("String"),q)&&Y.$raise(t(q,k("Float"))),k("Math").$checked("log2",k("Math")["$float!"](q))}),U(W,"$tan",function(q){return q=k("Math")["$float!"](q),H(q["$infinite?"]())?k(k("Float"),"NAN"):k("Math").$checked("tan",k("Math")["$float!"](q))})}("::",ne)};Opal.modules["corelib/complex/base"]=function(e){var t=e.module,l=e.truthy,g=e.def,v=e.klass,X=[],Y=e.nil;return e.add_stubs("new,from_string"),function(z,H){var p=t(z,"Kernel"),U=[p].concat(H),$e=e.$r(U);return g(p,"$Complex",function(Q,ne){return ne==null&&(ne=Y),l(ne)?$e("Complex").$new(Q,ne):$e("Complex").$new(Q,0)},-2)}("::",X),function(z,H,p){var U=v(z,H,"String"),$e=[U].concat(p),Z=e.$r($e);return g(U,"$to_c",function(){var ne=this;return Z("Complex").$from_string(ne)})}("::",null,X)};Opal.modules["corelib/complex"]=function(e){var t=e.klass,l=e.truthy,g=e.eqeqeq,v=e.Kernel,X=e.defs,Y=e.rb_times,z=e.def,H=e.rb_plus,p=e.rb_minus,U=e.rb_divide,$e=e.eqeq,Z=e.to_ary,Q=e.rb_gt,ne=e.neqeq,O=e.return_val,k=e.const_set,C=e.alias,P=e.top,W=[],M=e.nil,L=e.$$$;return e.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),P.$require("corelib/numeric"),P.$require("corelib/complex/base"),function(E,q,B){var F=t(E,q,"Complex"),A=[F].concat(B),a=e.$r(A),m=F.$$prototype;return m.real=m.imag=M,X(F,"$rect",function(y,d){var c=this;return d==null&&(d=0),g(L("Numeric"),y)&&l(y["$real?"]())&&g(L("Numeric"),d)&&l(d["$real?"]())||v.$raise(L("TypeError"),"not a real"),c.$new(y,d)},-2),X(F,"$polar",function(y,d){var c=this;return d==null&&(d=0),g(L("Numeric"),y)&&l(y["$real?"]())&&g(L("Numeric"),d)&&l(d["$real?"]())||v.$raise(L("TypeError"),"not a real"),c.$new(Y(y,L("Math").$cos(d)),Y(y,L("Math").$sin(d)))},-2),F.$attr_reader("real","imag"),z(F,"$initialize",function(y,d){var c=this;return d==null&&(d=0),c.real=y,c.imag=d,c.$freeze()},-2),z(F,"$coerce",function(y){var d=this;return g(L("Complex"),y)?[y,d]:g(L("Numeric"),y)&&l(y["$real?"]())?[L("Complex").$new(y,0),d]:v.$raise(L("TypeError"),""+y.$class()+" can't be coerced into Complex")}),z(F,"$==",function(y){var d=this,c=M;return g(L("Complex"),y)?l(c=d.real["$=="](y.$real()))?d.imag["$=="](y.$imag()):c:g(L("Numeric"),y)&&l(y["$real?"]())?l(c=d.real["$=="](y))?d.imag["$=="](0):c:y["$=="](d)}),z(F,"$-@",function(){var y=this;return v.$Complex(y.real["$-@"](),y.imag["$-@"]())}),z(F,"$+",function(y){var d=this;return g(L("Complex"),y)?v.$Complex(H(d.real,y.$real()),H(d.imag,y.$imag())):g(L("Numeric"),y)&&l(y["$real?"]())?v.$Complex(H(d.real,y),d.imag):d.$__coerced__("+",y)}),z(F,"$-",function(y){var d=this;return g(L("Complex"),y)?v.$Complex(p(d.real,y.$real()),p(d.imag,y.$imag())):g(L("Numeric"),y)&&l(y["$real?"]())?v.$Complex(p(d.real,y),d.imag):d.$__coerced__("-",y)}),z(F,"$*",function(y){var d=this;return g(L("Complex"),y)?v.$Complex(p(Y(d.real,y.$real()),Y(d.imag,y.$imag())),H(Y(d.real,y.$imag()),Y(d.imag,y.$real()))):g(L("Numeric"),y)&&l(y["$real?"]())?v.$Complex(Y(d.real,y),Y(d.imag,y)):d.$__coerced__("*",y)}),z(F,"$/",function(y){var d=this;return g(L("Complex"),y)?g(L("Number"),d.real)&&l(d.real["$nan?"]())||g(L("Number"),d.imag)&&l(d.imag["$nan?"]())||g(L("Number"),y.$real())&&l(y.$real()["$nan?"]())||g(L("Number"),y.$imag())&&l(y.$imag()["$nan?"]())?L("Complex").$new(L(L("Float"),"NAN"),L(L("Float"),"NAN")):U(Y(d,y.$conj()),y.$abs2()):g(L("Numeric"),y)&&l(y["$real?"]())?v.$Complex(d.real.$quo(y),d.imag.$quo(y)):d.$__coerced__("/",y)}),z(F,"$**",function(y){var d,c,J=this,V=M,h=M,_=M,o=M,i=M,n=M,r=M,$=M,s=M,u=M,w=M;if($e(y,0))return L("Complex").$new(1,0);if(g(L("Complex"),y))return c=J.$polar(),d=Z(c),V=d[0]==null?M:d[0],h=d[1]==null?M:d[1],_=y.$real(),o=y.$imag(),i=L("Math").$exp(p(Y(_,L("Math").$log(V)),Y(o,h))),n=H(Y(h,_),Y(o,L("Math").$log(V))),L("Complex").$polar(i,n);if(g(L("Integer"),y))if(l(Q(y,0))){for(r=J,$=r,s=p(y,1);ne(s,0);){for(c=s.$divmod(2),d=Z(c),u=d[0]==null?M:d[0],w=d[1]==null?M:d[1];$e(w,0);)r=v.$Complex(p(Y(r.$real(),r.$real()),Y(r.$imag(),r.$imag())),Y(Y(2,r.$real()),r.$imag())),s=u,c=s.$divmod(2),d=Z(c),u=d[0]==null?M:d[0],w=d[1]==null?M:d[1];$=Y($,r),s=p(s,1)}return $}else return U(L("Rational").$new(1,1),J)["$**"](y["$-@"]());else return g(L("Float"),y)||g(L("Rational"),y)?(c=J.$polar(),d=Z(c),V=d[0]==null?M:d[0],h=d[1]==null?M:d[1],L("Complex").$polar(V["$**"](y),Y(h,y))):J.$__coerced__("**",y)}),z(F,"$abs",function(){var y=this;return L("Math").$hypot(y.real,y.imag)}),z(F,"$abs2",function(){var y=this;return H(Y(y.real,y.real),Y(y.imag,y.imag))}),z(F,"$angle",function(){var y=this;return L("Math").$atan2(y.imag,y.real)}),z(F,"$conj",function(){var y=this;return v.$Complex(y.real,y.imag["$-@"]())}),z(F,"$denominator",function(){var y=this;return y.real.$denominator().$lcm(y.imag.$denominator())}),z(F,"$eql?",function(y){var d=this,c=M,J=M;return l(c=l(J=a("Complex")["$==="](y))?d.real.$class()["$=="](d.imag.$class()):J)?d["$=="](y):c}),z(F,"$fdiv",function(y){var d=this;return g(L("Numeric"),y)||v.$raise(L("TypeError"),""+y.$class()+" can't be coerced into Complex"),U(d,y)}),z(F,"$finite?",function(){var y=this,d=M;return l(d=y.real["$finite?"]())?y.imag["$finite?"]():d}),z(F,"$hash",function(){var y=this;return[L("Complex"),y.real,y.imag].$hash()}),z(F,"$infinite?",function(){var y=this,d=M;return l(d=y.real["$infinite?"]())?d:y.imag["$infinite?"]()}),z(F,"$inspect",function(){var y=this;return"("+y+")"}),z(F,"$numerator",function(){var y=this,d=M;return d=y.$denominator(),v.$Complex(Y(y.real.$numerator(),U(d,y.real.$denominator())),Y(y.imag.$numerator(),U(d,y.imag.$denominator())))}),z(F,"$polar",function(){var y=this;return[y.$abs(),y.$arg()]}),z(F,"$rationalize",function(y){var d=this;return arguments.length>1&&v.$raise(L("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),ne(d.imag,0)&&v.$raise(L("RangeError"),"can't convert "+d+" into Rational"),d.$real().$rationalize(y)},-1),z(F,"$real?",O(!1)),z(F,"$rect",function(){var y=this;return[y.real,y.imag]}),z(F,"$to_f",function(){var y=this;return $e(y.imag,0)||v.$raise(L("RangeError"),"can't convert "+y+" into Float"),y.real.$to_f()}),z(F,"$to_i",function(){var y=this;return $e(y.imag,0)||v.$raise(L("RangeError"),"can't convert "+y+" into Integer"),y.real.$to_i()}),z(F,"$to_r",function(){var y=this;return $e(y.imag,0)||v.$raise(L("RangeError"),"can't convert "+y+" into Rational"),y.real.$to_r()}),z(F,"$to_s",function(){var y=this,d=M;return d=y.real.$inspect(),d=H(d,g(L("Number"),y.imag)&&l(y.imag["$nan?"]())||l(y.imag["$positive?"]())||l(y.imag["$zero?"]())?"+":"-"),d=H(d,y.imag.$abs().$inspect()),g(L("Number"),y.imag)&&(l(y.imag["$nan?"]())||l(y.imag["$infinite?"]()))&&(d=H(d,"*")),H(d,"i")}),k(A[0],"I",F.$new(0,1)),X(F,"$from_string",function(y){var d=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;y.match(d);var c,J;function V(){return d.test(y)}function h(){var o=y.match(d),i=o[0];return y=y.slice(i.length),i.replace(/_/g,"")}function _(){if(V()){var o=parseFloat(h());if(y[0]==="/")if(y=y.slice(1),V()){var i=parseFloat(h());return v.$Rational(o,i)}else return y="/"+y,o;else return o}else return null}return c=_(),c?(J=_(),J?v.$Complex(c,J):y[0]==="i"?v.$Complex(0,c):v.$Complex(c,0)):y[0]==="i"?v.$Complex(0,1):y[0]==="-"&&y[1]==="i"?v.$Complex(0,-1):y[0]==="+"&&y[1]==="i"?v.$Complex(0,1):v.$Complex(0,0)}),function(T,y){return C(T,"rectangular","rect")}(e.get_singleton_class(F)),C(F,"arg","angle"),C(F,"conjugate","conj"),C(F,"divide","/"),C(F,"imaginary","imag"),C(F,"magnitude","abs"),C(F,"phase","arg"),C(F,"quo","/"),C(F,"rectangular","rect"),e.udef(F,"$negative?"),e.udef(F,"$positive?"),e.udef(F,"$step"),M}("::",L("Numeric"),W)};Opal.modules["corelib/rational/base"]=function(e){var t=e.module,l=e.def,g=e.klass;e.nil;var v=e.$$$;return e.add_stubs("convert,from_string"),function(X){var Y=t(X,"Kernel");return l(Y,"$Rational",function(H,p){return p==null&&(p=1),v("Rational").$convert(H,p)},-2)}("::"),function(X,Y){var z=g(X,Y,"String");return l(z,"$to_r",function(){var p=this;return v("Rational").$from_string(p)})}("::",null)};Opal.modules["corelib/rational"]=function(e){var t=e.klass,l=e.eqeq,g=e.Kernel,v=e.truthy,X=e.rb_lt,Y=e.rb_divide,z=e.defs,H=e.eqeqeq,p=e.not,U=e.Opal,$e=e.def,Z=e.return_ivar,Q=e.rb_minus,ne=e.rb_times,O=e.rb_plus,k=e.rb_gt,C=e.rb_le,P=e.return_self,W=e.alias,M=e.top,L=e.nil,E=e.$$$;return e.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),M.$require("corelib/numeric"),M.$require("corelib/rational/base"),function(q,B){var F=t(q,B,"Rational"),A=F.$$prototype;return A.num=A.den=L,z(F,"$reduce",function(m,T){var y=this,d=L;if(m=m.$to_i(),T=T.$to_i(),l(T,0))g.$raise(E("ZeroDivisionError"),"divided by 0");else if(v(X(T,0)))m=m["$-@"](),T=T["$-@"]();else if(l(T,1))return y.$new(m,T);return d=m.$gcd(T),y.$new(Y(m,d),Y(T,d))}),z(F,"$convert",function(m,T){var y=this;return(v(m["$nil?"]())||v(T["$nil?"]()))&&g.$raise(E("TypeError"),"cannot convert nil into Rational"),H(E("Integer"),m)&&H(E("Integer"),T)?y.$reduce(m,T):((H(E("Float"),m)||H(E("String"),m)||H(E("Complex"),m))&&(m=m.$to_r()),(H(E("Float"),T)||H(E("String"),T)||H(E("Complex"),T))&&(T=T.$to_r()),v(T["$equal?"](1))&&p(E("Integer")["$==="](m))?U["$coerce_to!"](m,E("Rational"),"to_r"):H(E("Numeric"),m)&&H(E("Numeric"),T)?Y(m,T):y.$reduce(m,T))}),$e(F,"$initialize",function(m,T){var y=this;return y.num=m,y.den=T,y.$freeze()}),$e(F,"$numerator",Z("num")),$e(F,"$denominator",Z("den")),$e(F,"$coerce",function(m){var T=this,y=L;return H(E("Rational"),y=m)?[m,T]:H(E("Integer"),y)?[m.$to_r(),T]:H(E("Float"),y)?[m,T.$to_f()]:L}),$e(F,"$==",function(m){var T=this,y=L,d=L;return H(E("Rational"),y=m)?v(d=T.num["$=="](m.$numerator()))?T.den["$=="](m.$denominator()):d:H(E("Integer"),y)?v(d=T.num["$=="](m))?T.den["$=="](1):d:H(E("Float"),y)?T.$to_f()["$=="](m):m["$=="](T)}),$e(F,"$<=>",function(m){var T=this,y=L;return H(E("Rational"),y=m)?Q(ne(T.num,m.$denominator()),ne(T.den,m.$numerator()))["$<=>"](0):H(E("Integer"),y)?Q(T.num,ne(T.den,m))["$<=>"](0):H(E("Float"),y)?T.$to_f()["$<=>"](m):T.$__coerced__("<=>",m)}),$e(F,"$+",function(m){var T=this,y=L,d=L,c=L;return H(E("Rational"),y=m)?(d=O(ne(T.num,m.$denominator()),ne(T.den,m.$numerator())),c=ne(T.den,m.$denominator()),g.$Rational(d,c)):H(E("Integer"),y)?g.$Rational(O(T.num,ne(m,T.den)),T.den):H(E("Float"),y)?O(T.$to_f(),m):T.$__coerced__("+",m)}),$e(F,"$-",function(m){var T=this,y=L,d=L,c=L;return H(E("Rational"),y=m)?(d=Q(ne(T.num,m.$denominator()),ne(T.den,m.$numerator())),c=ne(T.den,m.$denominator()),g.$Rational(d,c)):H(E("Integer"),y)?g.$Rational(Q(T.num,ne(m,T.den)),T.den):H(E("Float"),y)?Q(T.$to_f(),m):T.$__coerced__("-",m)}),$e(F,"$*",function(m){var T=this,y=L,d=L,c=L;return H(E("Rational"),y=m)?(d=ne(T.num,m.$numerator()),c=ne(T.den,m.$denominator()),g.$Rational(d,c)):H(E("Integer"),y)?g.$Rational(ne(T.num,m),T.den):H(E("Float"),y)?ne(T.$to_f(),m):T.$__coerced__("*",m)}),$e(F,"$/",function(m){var T=this,y=L,d=L,c=L;return H(E("Rational"),y=m)?(d=ne(T.num,m.$denominator()),c=ne(T.den,m.$numerator()),g.$Rational(d,c)):H(E("Integer"),y)?l(m,0)?Y(T.$to_f(),0):g.$Rational(T.num,ne(T.den,m)):H(E("Float"),y)?Y(T.$to_f(),m):T.$__coerced__("/",m)}),$e(F,"$**",function(m){var T=this,y=L;return H(E("Integer"),y=m)?l(T,0)&&v(X(m,0))?E(E("Float"),"INFINITY"):v(k(m,0))?g.$Rational(T.num["$**"](m),T.den["$**"](m)):v(X(m,0))?g.$Rational(T.den["$**"](m["$-@"]()),T.num["$**"](m["$-@"]())):g.$Rational(1,1):H(E("Float"),y)?T.$to_f()["$**"](m):H(E("Rational"),y)?l(m,0)?g.$Rational(1,1):l(m.$denominator(),1)?v(X(m,0))?g.$Rational(T.den["$**"](m.$numerator().$abs()),T.num["$**"](m.$numerator().$abs())):g.$Rational(T.num["$**"](m.$numerator()),T.den["$**"](m.$numerator())):l(T,0)&&v(X(m,0))?g.$raise(E("ZeroDivisionError"),"divided by 0"):T.$to_f()["$**"](m):T.$__coerced__("**",m)}),$e(F,"$abs",function(){var m=this;return g.$Rational(m.num.$abs(),m.den.$abs())}),$e(F,"$ceil",function(m){var T=this;return m==null&&(m=0),l(m,0)?Y(T.num["$-@"](),T.den)["$-@"]().$ceil():T.$with_precision("ceil",m)},-1),$e(F,"$floor",function(m){var T=this;return m==null&&(m=0),l(m,0)?Y(T.num["$-@"](),T.den)["$-@"]().$floor():T.$with_precision("floor",m)},-1),$e(F,"$hash",function(){var m=this;return[E("Rational"),m.num,m.den].$hash()}),$e(F,"$inspect",function(){var m=this;return"("+m+")"}),$e(F,"$rationalize",function(m){var T=this;if(arguments.length>1&&g.$raise(E("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),m==null)return T;for(var y=m.$abs(),d=Q(T,y),c=O(T,y),J=0,V=1,h=1,_=0,o,i,n,r,$;n=d.$ceil(),!C(n,c);)r=n-1,o=r*V+J,i=r*_+h,$=Y(1,Q(c,r)),c=Y(1,Q(d,r)),d=$,J=V,h=_,V=o,_=i;return g.$Rational(n*V+J,n*_+h)},-1),$e(F,"$round",function(m){var T=this,y=L,d=L,c=L;return m==null&&(m=0),l(m,0)?l(T.num,0)?0:l(T.den,1)?T.num:(y=O(ne(T.num.$abs(),2),T.den),d=ne(T.den,2),c=Y(y,d).$truncate(),v(X(T.num,0))?c["$-@"]():c):T.$with_precision("round",m)},-1),$e(F,"$to_f",function(){var m=this;return Y(m.num,m.den)}),$e(F,"$to_i",function(){var m=this;return m.$truncate()}),$e(F,"$to_r",P),$e(F,"$to_s",function(){var m=this;return""+m.num+"/"+m.den}),$e(F,"$truncate",function(m){var T=this;return m==null&&(m=0),l(m,0)?v(X(T.num,0))?T.$ceil():T.$floor():T.$with_precision("truncate",m)},-1),$e(F,"$with_precision",function(m,T){var y=this,d=L,c=L;return H(E("Integer"),T)||g.$raise(E("TypeError"),"not an Integer"),d=10["$**"](T),c=ne(y,d),v(X(T,1))?Y(c.$send(m),d).$to_i():g.$Rational(c.$send(m),d)}),z(F,"$from_string",function(m){var T=m.trimLeft(),y=/^[+-]?[\d_]+(\.[\d_]+)?/;T.match(y);var d,c;function J(){return y.test(T)}function V(){var h=T.match(y),_=h[0];return T=T.slice(_.length),_.replace(/_/g,"")}return J()?(d=parseFloat(V()),T[0]==="/"?(T=T.slice(1),J()?(c=parseFloat(V()),g.$Rational(d,c)):g.$Rational(d,1)):g.$Rational(d,1)):g.$Rational(0,1)}),W(F,"divide","/"),W(F,"quo","/")}("::",E("Numeric"))};Opal.modules["corelib/time"]=function(e){var t=e.slice,l=e.deny_frozen_access,g=e.klass,v=e.Kernel,X=e.Opal,Y=e.defs,z=e.eqeqeq,H=e.def,p=e.truthy,U=e.rb_gt,$e=e.rb_lt,Z=e.send,Q=e.rb_plus,ne=e.rb_divide,O=e.rb_minus,k=e.range,C=e.neqeq,P=e.rb_le,W=e.eqeq,M=e.alias,L=e.top,E=[],q=e.nil,B=e.$$$;return e.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),L.$require("corelib/comparable"),function(F,A,a){var m=g(F,A,"Time"),T=[m].concat(a),y=e.$r(T);m.$include(B("Comparable"));var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],V=["January","February","March","April","May","June","July","August","September","October","November","December"];Y(m,"$at",function(o,i){var n;return B("Time")["$==="](o)?(i!==void 0&&v.$raise(B("TypeError"),"can't convert Time into an exact number"),n=new Date(o.getTime()),n.timezone=o.timezone,n):(o.$$is_number||(o=X["$coerce_to!"](o,B("Integer"),"to_int")),i===void 0?new Date(o*1e3):(i.$$is_number||(i=X["$coerce_to!"](i,B("Integer"),"to_int")),new Date(o*1e3+i/1e3)))},-2);function h(_,o,i,n,r,$){if(_.$$is_string?_=parseInt(_,10):_=X["$coerce_to!"](_,B("Integer"),"to_int"),o===q)o=1;else if(!o.$$is_number)if(o["$respond_to?"]("to_str"))switch(o=o.$to_str(),o.toLowerCase()){case"jan":o=1;break;case"feb":o=2;break;case"mar":o=3;break;case"apr":o=4;break;case"may":o=5;break;case"jun":o=6;break;case"jul":o=7;break;case"aug":o=8;break;case"sep":o=9;break;case"oct":o=10;break;case"nov":o=11;break;case"dec":o=12;break;default:o=o.$to_i()}else o=X["$coerce_to!"](o,B("Integer"),"to_int");return(o<1||o>12)&&v.$raise(B("ArgumentError"),"month out of range: "+o),o=o-1,i===q?i=1:i.$$is_string?i=parseInt(i,10):i=X["$coerce_to!"](i,B("Integer"),"to_int"),(i<1||i>31)&&v.$raise(B("ArgumentError"),"day out of range: "+i),n===q?n=0:n.$$is_string?n=parseInt(n,10):n=X["$coerce_to!"](n,B("Integer"),"to_int"),(n<0||n>24)&&v.$raise(B("ArgumentError"),"hour out of range: "+n),r===q?r=0:r.$$is_string?r=parseInt(r,10):r=X["$coerce_to!"](r,B("Integer"),"to_int"),(r<0||r>59)&&v.$raise(B("ArgumentError"),"min out of range: "+r),$===q?$=0:$.$$is_number||($.$$is_string?$=parseInt($,10):$=X["$coerce_to!"]($,B("Integer"),"to_int")),($<0||$>60)&&v.$raise(B("ArgumentError"),"sec out of range: "+$),[_,o,i,n,r,$]}return Y(m,"$new",function(o,i,n,r,$,s,u){var w=this;i==null&&(i=q),n==null&&(n=q),r==null&&(r=q),$==null&&($=q),s==null&&(s=q),u==null&&(u=q);var I,D,S,j;return o===void 0?new Date:(I=h(o,i,n,r,$,s),o=I[0],i=I[1],n=I[2],r=I[3],$=I[4],s=I[5],u===q?(D=new Date(o,i,n,r,$,0,s*1e3),o<100&&D.setFullYear(o),D):(S=w.$_parse_offset(u),j=new Date(Date.UTC(o,i,n,r,$,0,s*1e3)),o<100&&j.setUTCFullYear(o),D=new Date(j.getTime()-S*36e5),D.timezone=S,D))},-1),Y(m,"$_parse_offset",function(o){var i;if(o.$$is_string)if(o=="UTC")i=0;else if(/^[+-]\d\d:[0-5]\d$/.test(o)){var n,r,$;n=o[0],r=+(o[1]+o[2]),$=+(o[4]+o[5]),i=(n=="-"?-1:1)*(r+$/60)}else v.$raise(B("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+o);else o.$$is_number?i=o/3600:v.$raise(B("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return i}),Y(m,"$local",function(o,i,n,r,$,s,u,w,I,D){i==null&&(i=q),n==null&&(n=q),r==null&&(r=q),$==null&&($=q),s==null&&(s=q),u==null&&(u=q),w==null&&(w=q),I==null&&(I=q),D==null&&(D=q);var S,j;return arguments.length===10&&(S=t(arguments),o=S[5],i=S[4],n=S[3],r=S[2],$=S[1],s=S[0]),S=h(o,i,n,r,$,s),o=S[0],i=S[1],n=S[2],r=S[3],$=S[4],s=S[5],j=new Date(o,i,n,r,$,0,s*1e3),o<100&&j.setFullYear(o),j},-2),Y(m,"$gm",function(o,i,n,r,$,s,u,w,I,D){i==null&&(i=q),n==null&&(n=q),r==null&&(r=q),$==null&&($=q),s==null&&(s=q),u==null&&(u=q),w==null&&(w=q),I==null&&(I=q),D==null&&(D=q);var S,j;return arguments.length===10&&(S=t(arguments),o=S[5],i=S[4],n=S[3],r=S[2],$=S[1],s=S[0]),S=h(o,i,n,r,$,s),o=S[0],i=S[1],n=S[2],r=S[3],$=S[4],s=S[5],j=new Date(Date.UTC(o,i,n,r,$,0,s*1e3)),o<100&&j.setUTCFullYear(o),j.timezone=0,j},-2),Y(m,"$now",function(){var o=this;return o.$new()}),H(m,"$+",function(o){var i=this;z(B("Time"),o)&&v.$raise(B("TypeError"),"time + time?"),o.$$is_number||(o=X["$coerce_to!"](o,B("Integer"),"to_int"));var n=new Date(i.getTime()+o*1e3);return n.timezone=i.timezone,n}),H(m,"$-",function(o){var i=this;if(z(B("Time"),o))return(i.getTime()-o.getTime())/1e3;o.$$is_number||(o=X["$coerce_to!"](o,B("Integer"),"to_int"));var n=new Date(i.getTime()-o*1e3);return n.timezone=i.timezone,n}),H(m,"$<=>",function(o){var i=this,n=q;return z(B("Time"),o)?i.$to_f()["$<=>"](o.$to_f()):(n=o["$<=>"](i),p(n["$nil?"]())?q:p(U(n,0))?-1:p($e(n,0))?1:0)}),H(m,"$==",function(o){var i=this,n=q;return p(n=B("Time")["$==="](o))?i.$to_f()===o.$to_f():n}),H(m,"$asctime",function(){var o=this;return o.$strftime("%a %b %e %H:%M:%S %Y")}),Z([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function _(o,i,n,r){var $=_.$$s==null?this:_.$$s;return o==null&&(o=q),i==null&&(i=q),n==null&&(n=q),r==null&&(r=0),Z($,"define_method",[o],function s(){var u=s.$$s==null?this:s.$$s;return r+(u.timezone!=null?new Date(u.getTime()+u.timezone*36e5)[n]():u[i]())},{$$s:$})},{$$arity:-4,$$s:m}),H(m,"$yday",function(){var o=this,i=q,n=q,r=q;return i=y("Time").$new(o.$year()).$to_i(),n=y("Time").$new(o.$year(),o.$month(),o.$day()).$to_i(),r=86400,Q(ne(O(n,i),r).$round(),1)}),H(m,"$isdst",function(){var o=this,i=new Date(o.getFullYear(),0,1),n=new Date(o.getFullYear(),6,1);return o.getTimezoneOffset()<Math.max(i.getTimezoneOffset(),n.getTimezoneOffset())}),H(m,"$dup",function(){var o=this,i=q;return i=new Date(o.getTime()),i.$copy_instance_variables(o),i.$initialize_dup(o),i}),H(m,"$eql?",function(o){var i=this,n=q;return p(n=o["$is_a?"](B("Time")))?i["$<=>"](o)["$zero?"]():n}),Z([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function _(o,i){var n=_.$$s==null?this:_.$$s;return o==null&&(o=q),i==null&&(i=q),Z(n,"define_method",[o],function r(){var $=r.$$s==null?this:r.$$s;return $.$wday()===i},{$$s:n})},{$$s:m}),H(m,"$hash",function(){var o=this;return[B("Time"),o.getTime()].$hash()}),H(m,"$inspect",function(){var o=this;return p(o["$utc?"]())?o.$strftime("%Y-%m-%d %H:%M:%S UTC"):o.$strftime("%Y-%m-%d %H:%M:%S %z")}),H(m,"$succ",function(){var o=this,i=new Date(o.getTime()+1e3);return i.timezone=o.timezone,i}),H(m,"$usec",function(){var o=this;return o.getMilliseconds()*1e3}),H(m,"$zone",function(){var o=this;if(o.timezone===0)return"UTC";if(o.timezone!=null)return q;var i=o.toString(),n;return i.indexOf("(")==-1?n=i.match(/[A-Z]{3,4}/)[0]:n=i.match(/\((.+)\)(?:\s|$)/)[1],n=="GMT"&&/(GMT\W*\d{4})/.test(i)?RegExp.$1:n}),H(m,"$getgm",function(){var o=this,i=new Date(o.getTime());return i.timezone=0,i}),H(m,"$gmtime",function(){var o=this;return o.timezone!==0&&(l(o),o.timezone=0),o}),H(m,"$gmt?",function(){var o=this;return o.timezone===0}),H(m,"$gmt_offset",function(){var o=this;return o.timezone!=null?o.timezone*60:-o.getTimezoneOffset()*60}),H(m,"$strftime",function(o){var i=this;return o.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(n,r,$,s,u){var w="",I,D,S,j=r.indexOf("0")!==-1,re=r.indexOf("-")===-1,oe=r.indexOf("_")!==-1,le=r.indexOf("^")!==-1,_e=r.indexOf("#")!==-1,he=(r.match(":")||[]).length;switch($=parseInt($,10),j&&oe&&(r.indexOf("0")<r.indexOf("_")?j=!1:oe=!1),u){case"Y":w+=i.$year();break;case"C":j=!oe,w+=Math.round(i.$year()/100);break;case"y":j=!oe,w+=i.$year()%100;break;case"m":j=!oe,w+=i.$mon();break;case"B":w+=V[i.$mon()-1];break;case"b":case"h":oe=!j,w+=J[i.$mon()-1];break;case"d":j=!oe,w+=i.$day();break;case"e":oe=!j,w+=i.$day();break;case"j":j=!oe,$=isNaN($)?3:$,w+=i.$yday();break;case"H":j=!oe,w+=i.$hour();break;case"k":oe=!j,w+=i.$hour();break;case"I":j=!oe,w+=i.$hour()%12||12;break;case"l":oe=!j,w+=i.$hour()%12||12;break;case"P":w+=i.$hour()>=12?"pm":"am";break;case"p":w+=i.$hour()>=12?"PM":"AM";break;case"M":j=!oe,w+=i.$min();break;case"S":j=!oe,w+=i.$sec();break;case"L":j=!oe,$=isNaN($)?3:$,w+=i.getMilliseconds();break;case"N":$=isNaN($)?9:$,w+=i.getMilliseconds().toString().$rjust(3,"0"),w=w.$ljust($,"0");break;case"z":var ge=i.timezone==null?i.getTimezoneOffset():-i.timezone*60,me=Math.floor(Math.abs(ge)/60),ve=Math.abs(ge)%60;w+=ge<0?"+":"-",w+=me<10?"0":"",w+=me,he>0&&(w+=":"),w+=ve<10?"0":"",w+=ve,he>1&&(w+=":00");break;case"Z":w+=i.$zone();break;case"A":w+=d[i.$wday()];break;case"a":w+=c[i.$wday()];break;case"u":w+=i.$wday()+1;break;case"w":w+=i.$wday();break;case"V":w+=i.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":w+=i.$cweek_cyear()["$[]"](1);break;case"g":w+=i.$cweek_cyear()["$[]"](1)["$[]"](k(-2,-1,!1));break;case"s":w+=i.$to_i();break;case"n":w+=`
`;break;case"t":w+="	";break;case"%":w+="%";break;case"c":w+=i.$strftime("%a %b %e %T %Y");break;case"D":case"x":w+=i.$strftime("%m/%d/%y");break;case"F":w+=i.$strftime("%Y-%m-%d");break;case"v":w+=i.$strftime("%e-%^b-%4Y");break;case"r":w+=i.$strftime("%I:%M:%S %p");break;case"R":w+=i.$strftime("%H:%M");break;case"T":case"X":w+=i.$strftime("%H:%M:%S");break;case"J":if(I=i.$to_date().$jd(),I<2405160){w+=i.$strftime("%Y-%m-%d");break}else I<2419614?(D="M",S=1867):I<2424875?(D="T",S=1911):I<2447535?(D="S",S=1925):I<2458605?(D="H",S=1988):(D="R",S=2018);w+=i.$format("%c%02d",D,O(i.$year(),S)),w+=i.$strftime("-%m-%d");break;default:return n}return le&&(w=w.toUpperCase()),_e&&(w=w.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),re&&(j||oe)&&(w=w.$rjust(isNaN($)?2:$,oe?" ":"0")),w})}),H(m,"$to_a",function(){var o=this;return[o.$sec(),o.$min(),o.$hour(),o.$day(),o.$month(),o.$year(),o.$wday(),o.$yday(),o.$isdst(),o.$zone()]}),H(m,"$to_f",function(){var o=this;return o.getTime()/1e3}),H(m,"$to_i",function(){var o=this;return parseInt(o.getTime()/1e3,10)}),H(m,"$cweek_cyear",function(){var o=this,i=q,n=q,r=q,$=q,s=q,u=q,w=q;return i=B("Time").$new(o.$year(),1,1),n=i.$wday(),r=o.$year(),p(P(n,4))&&C(n,0)?$=O(n,1):($=O(O(n,7),1),W($,-8)&&($=-1)),s=ne(Q(o.$yday(),$),7).$ceil(),p(P(s,0))?B("Time").$new(O(o.$year(),1),12,31).$cweek_cyear():(W(s,53)&&(u=B("Time").$new(o.$year(),12,31),w=u.$wday(),p(P(w,3))&&C(w,0)&&(s=1,r=Q(r,1))),[s,r])}),function(_,o){return M(_,"mktime","local"),M(_,"utc","gm")}(e.get_singleton_class(m)),M(m,"ctime","asctime"),M(m,"dst?","isdst"),M(m,"getutc","getgm"),M(m,"gmtoff","gmt_offset"),M(m,"mday","day"),M(m,"month","mon"),M(m,"to_s","inspect"),M(m,"tv_sec","to_i"),M(m,"tv_usec","usec"),M(m,"utc","gmtime"),M(m,"utc?","gmt?"),M(m,"utc_offset","gmt_offset")}("::",Date,E)};Opal.modules["corelib/struct"]=function(e){var t=e.klass,l=e.slice,g=e.extract_kwargs,v=e.ensure_kwargs,X=e.hash_get,Y=e.truthy,z=e.neqeq,H=e.eqeq,p=e.Opal,U=e.send,$e=e.Class,Z=e.to_a,Q=e.def,ne=e.defs,O=e.Kernel,k=e.rb_gt,C=e.rb_minus,P=e.eqeqeq,W=e.rb_lt,M=e.rb_ge,L=e.rb_plus,E=e.alias,q=e.top,B=[],F=e.nil,A=e.$$$;return e.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),q.$require("corelib/enumerable"),function(a,m,T){var y=t(a,m,"Struct"),d=[y].concat(T),c=e.$r(d);y.$include(A("Enumerable")),ne(y,"$new",function V(h,_,o){var i=V.$$p||F,n,r,$,s,u=this,w=F;if(V.$$p=null,n=l(arguments,1),r=g(n),r=v(r),$=n,s=X(r,"keyword_init"),s==null&&(s=!1),Y(h))if(H(h.$class(),A("String"))&&z(h["$[]"](0).$upcase(),h["$[]"](0)))$.$unshift(h),h=F;else try{h=p["$const_name!"](h)}catch(I){if(e.rescue(I,[A("TypeError"),A("NameError")]))try{$.$unshift(h),h=F}finally{e.pop_exception(I)}else throw I}return U($,"map",[],function(D){return D==null&&(D=F),p["$coerce_to!"](D,A("String"),"to_str")}),w=U($e,"new",[u],function I(){var D=I.$$s==null?this:I.$$s;return U($,"each",[],function S(j){var re=S.$$s==null?this:S.$$s;return j==null&&(j=F),re.$define_struct_attribute(j)},{$$s:D}),function(S,j){return Q(S,"$new",function(oe){var le,_e,he=this,ge=F;return le=l(arguments),_e=le,ge=he.$allocate(),ge.$$data={},U(ge,"initialize",Z(_e)),ge},-1),S.$alias_method("[]","new")}(e.get_singleton_class(D))},{$$s:u}),Y(i)&&U(w,"module_eval",[],i.$to_proc()),w.$$keyword_init=s,Y(h)&&A("Struct").$const_set(h,w),w},-2),ne(y,"$define_struct_attribute",function(h){var _=this;return H(_,A("Struct"))&&O.$raise(A("ArgumentError"),"you cannot define attributes to the Struct class"),_.$members()["$<<"](h),U(_,"define_method",[h],function o(){var i=o.$$s==null?this:o.$$s;return i.$$data[h]},{$$s:_}),U(_,"define_method",[""+h+"="],function o(i){var n=o.$$s==null?this:o.$$s;return i==null&&(i=F),n.$$data[h]=i},{$$s:_})}),ne(y,"$members",function(){var h=this,_=F;return h.members==null&&(h.members=F),H(h,A("Struct"))&&O.$raise(A("ArgumentError"),"the Struct class has no members"),h.members=Y(_=h.members)?_:[]}),ne(y,"$inherited",function(h){var _=this,o=F;return _.members==null&&(_.members=F),o=_.members,U(h,"instance_eval",[],function i(){var n=i.$$s==null?this:i.$$s;return n.members=o},{$$s:_})}),Q(y,"$initialize",function(h){var _,o,i=this,n=F,r=F,$=F;return _=l(arguments),o=_,Y(i.$class().$$keyword_init)?(n=Y(r=o.$last())?r:new Map,(Y(k(o.$length(),1))||Y(o.length===1&&!n.$$is_hash))&&O.$raise(A("ArgumentError"),"wrong number of arguments (given "+o.$length()+", expected 0)"),$=C(n.$keys(),i.$class().$members()),Y($["$any?"]())&&O.$raise(A("ArgumentError"),"unknown keywords: "+$.$join(", ")),U(i.$class().$members(),"each",[],function s(u){var w,I=s.$$s==null?this:s.$$s;return u==null&&(u=F),w=[u,n["$[]"](u)],U(I,"[]=",w),w[w.length-1]},{$$s:i})):(Y(k(o.$length(),i.$class().$members().$length()))&&O.$raise(A("ArgumentError"),"struct size differs"),U(i.$class().$members(),"each_with_index",[],function s(u,w){var I,D=s.$$s==null?this:s.$$s;return u==null&&(u=F),w==null&&(w=F),I=[u,o["$[]"](w)],U(D,"[]=",I),I[I.length-1]},{$$s:i}))},-1),Q(y,"$initialize_copy",function(h){var _=this;_.$$data={};var o=Object.keys(h.$$data),i,n,r;for(i=0,n=o.length;i<n;i++)r=o[i],_.$$data[r]=h.$$data[r]}),ne(y,"$keyword_init?",function(){var h=this;return h.$$keyword_init}),Q(y,"$members",function(){var h=this;return h.$class().$members()}),Q(y,"$hash",function(){var h=this;return[h.$class(),h.$to_a()].$hash()}),Q(y,"$[]",function(h){var _=this;return P(A("Integer"),h)?(Y(W(h,_.$class().$members().$size()["$-@"]()))&&O.$raise(A("IndexError"),"offset "+h+" too small for struct(size:"+_.$class().$members().$size()+")"),Y(M(h,_.$class().$members().$size()))&&O.$raise(A("IndexError"),"offset "+h+" too large for struct(size:"+_.$class().$members().$size()+")"),h=_.$class().$members()["$[]"](h)):P(A("String"),h)?_.$$data.hasOwnProperty(h)||O.$raise(A("NameError").$new("no member '"+h+"' in struct",h)):O.$raise(A("TypeError"),"no implicit conversion of "+h.$class()+" into Integer"),h=p["$coerce_to!"](h,A("String"),"to_str"),_.$$data[h]}),Q(y,"$[]=",function(h,_){var o=this;return P(A("Integer"),h)?(Y(W(h,o.$class().$members().$size()["$-@"]()))&&O.$raise(A("IndexError"),"offset "+h+" too small for struct(size:"+o.$class().$members().$size()+")"),Y(M(h,o.$class().$members().$size()))&&O.$raise(A("IndexError"),"offset "+h+" too large for struct(size:"+o.$class().$members().$size()+")"),h=o.$class().$members()["$[]"](h)):P(A("String"),h)?Y(o.$class().$members()["$include?"](h.$to_sym()))||O.$raise(A("NameError").$new("no member '"+h+"' in struct",h)):O.$raise(A("TypeError"),"no implicit conversion of "+h.$class()+" into Integer"),h=p["$coerce_to!"](h,A("String"),"to_str"),o.$$data[h]=_}),Q(y,"$==",function(h){var _=this;if(!Y(h["$instance_of?"](_.$class())))return!1;var o={},i={};function n(r,$){var s,u,w;o[r.$__id__()]=!0,i[$.$__id__()]=!0;for(s in r.$$data)if(u=r.$$data[s],w=$.$$data[s],A("Struct")["$==="](u)){if((!o.hasOwnProperty(u.$__id__())||!i.hasOwnProperty(w.$__id__()))&&!n(u,w))return!1}else if(!u["$=="](w))return!1;return!0}return n(_,h)}),Q(y,"$eql?",function(h){var _=this;if(!Y(h["$instance_of?"](_.$class())))return!1;var o={},i={};function n(r,$){var s,u,w;o[r.$__id__()]=!0,i[$.$__id__()]=!0;for(s in r.$$data)if(u=r.$$data[s],w=$.$$data[s],A("Struct")["$==="](u)){if((!o.hasOwnProperty(u.$__id__())||!i.hasOwnProperty(w.$__id__()))&&!n(u,w))return!1}else if(!u["$eql?"](w))return!1;return!0}return n(_,h)}),Q(y,"$each",function V(){var h=V.$$p||F,_=this;return V.$$p=null,h===F?U(_,"enum_for",["each"],function o(){var i=o.$$s==null?this:o.$$s;return i.$size()},{$$s:_}):(U(_.$class().$members(),"each",[],function o(i){var n=o.$$s==null?this:o.$$s;return i==null&&(i=F),e.yield1(h,n["$[]"](i))},{$$s:_}),_)}),Q(y,"$each_pair",function V(){var h=V.$$p||F,_=this;return V.$$p=null,h===F?U(_,"enum_for",["each_pair"],function o(){var i=o.$$s==null?this:o.$$s;return i.$size()},{$$s:_}):(U(_.$class().$members(),"each",[],function o(i){var n=o.$$s==null?this:o.$$s;return i==null&&(i=F),e.yield1(h,[i,n["$[]"](i)])},{$$s:_}),_)}),Q(y,"$length",function(){var h=this;return h.$class().$members().$length()}),Q(y,"$to_a",function(){var h=this;return U(h.$class().$members(),"map",[],function _(o){var i=_.$$s==null?this:_.$$s;return o==null&&(o=F),i["$[]"](o)},{$$s:h})});var J=[];return Q(y,"$inspect",function(){var h=this,_=F,o=F;return function(){try{return _="#<struct ",Y(J["$include?"](h.$__id__()))?L(_,":...>"):(J["$<<"](h.$__id__()),o=!0,P(A("Struct"),h)&&Y(h.$class().$name())&&(_=L(_,""+h.$class()+" ")),_=L(_,U(h.$each_pair(),"map",[],function(n,r){return n==null&&(n=F),r==null&&(r=F),""+n+"="+c("Opal").$inspect(r)}).$join(", ")),_=L(_,">"),_)}finally{Y(o)&&J.pop()}}()}),Q(y,"$to_h",function V(h){var _=V.$$p||F,o,i,n=this;return V.$$p=null,o=l(arguments),i=o,_!==F?U(U(n,"map",[],_.$to_proc()),"to_h",Z(i)):U(n.$class().$members(),"each_with_object",[new Map],function r($,s){var u,w=r.$$s==null?this:r.$$s;return $==null&&($=F),s==null&&(s=F),u=[$,w["$[]"]($)],U(s,"[]=",u),u[u.length-1]},{$$s:n})},-1),Q(y,"$values_at",function(h){var _,o,i=this;_=l(arguments),o=_,o=U(o,"map",[],function(u){return u==null&&(u=F),u.$$is_range?u.$to_a():u}).$flatten();for(var n=[],r=0,$=o.length;r<$;r++)o[r].$$is_number||O.$raise(A("TypeError"),"no implicit conversion of "+o[r].$class()+" into Integer"),n.push(i["$[]"](o[r]));return n},-1),Q(y,"$dig",function(h,_){var o,i,n=this,r=F;return o=l(arguments,1),i=o,r=Y(h.$$is_string&&n.$$data.hasOwnProperty(h))&&n.$$data[h]||F,r===F||i.length===0?r:(Y(r["$respond_to?"]("dig"))||O.$raise(A("TypeError"),""+r.$class()+" does not have #dig method"),U(r,"dig",Z(i)))},-2),E(y,"size","length"),E(y,"to_s","inspect"),E(y,"values","to_a")}("::",null,B)};Opal.modules["corelib/set"]=function(e){var t=e.freeze,l=e.klass,g=e.slice,v=e.defs,X=e.truthy,Y=e.eqeqeq,z=e.Kernel,H=e.send,p=e.def,U=e.eqeq,$e=e.rb_lt,Z=e.rb_le,Q=e.alias,ne=[],O=e.nil,k=e.$$$;return e.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(C,P,W){var M=l(C,P,"Set"),L=[M].concat(W),E=e.$r(L),q=O,B=M.$$prototype;B.hash=O,M.$include(k("Enumerable")),v(M,"$[]",function(a){var m,T,y=this;return m=g(arguments),T=m,y.$new(T)},-1),p(M,"$initialize",function A(a){var m=A.$$p||O,T=this;return A.$$p=null,a==null&&(a=O),T.hash=new Map,X(a["$nil?"]())?O:(Y(k("Enumerable"),a)||z.$raise(k("ArgumentError"),"value must be enumerable"),X(m)?H(a,"each",[],function y(d){var c=y.$$s==null?this:y.$$s;return d==null&&(d=O),c.$add(e.yield1(m,d))},{$$s:T}):T.$merge(a))},-1),p(M,"$dup",function(){var a=this,m=O;return m=a.$class().$new(),m.$merge(a)}),p(M,"$-",function(a){var m=this;return X(a["$respond_to?"]("each"))||z.$raise(k("ArgumentError"),"value must be enumerable"),m.$dup().$subtract(a)}),p(M,"$inspect",function(){var a=this;return"#<Set: {"+a.$to_a().$join(",")+"}>"}),p(M,"$==",function(a){var m=this;return X(m["$equal?"](a))?!0:X(a["$instance_of?"](m.$class()))?m.hash["$=="](a.$instance_variable_get("@hash")):X(a["$is_a?"](k("Set")))&&U(m.$size(),a.$size())?H(a,"all?",[],function T(y){var d=T.$$s==null?this:T.$$s;return d.hash==null&&(d.hash=O),y==null&&(y=O),d.hash["$include?"](y)},{$$s:m}):!1}),p(M,"$add",function(a){var m=this;return m.hash["$[]="](a,!0),m}),p(M,"$classify",function A(){var a=A.$$p||O,m=this,T=O;return A.$$p=null,a===O?m.$enum_for("classify"):(T=H(k("Hash"),"new",[],function y(d,c){var J,V=y.$$s==null?this:y.$$s;return d==null&&(d=O),c==null&&(c=O),J=[c,V.$class().$new()],H(d,"[]=",J),J[J.length-1]},{$$s:m}),H(m,"each",[],function(d){return d==null&&(d=O),T["$[]"](e.yield1(a,d)).$add(d)}),T)}),p(M,"$collect!",function A(){var a=A.$$p||O,m=this,T=O;return A.$$p=null,a===O?m.$enum_for("collect!"):(T=m.$class().$new(),H(m,"each",[],function(d){return d==null&&(d=O),T["$<<"](e.yield1(a,d))}),m.$replace(T))}),p(M,"$compare_by_identity",function(){var a=this;return X(a.hash["$respond_to?"]("compare_by_identity"))?(a.hash.$compare_by_identity(),a):a.$raise(E("NotImplementedError"),""+a.$class().$name()+"#compare_by_identity is not implemented")}),p(M,"$compare_by_identity?",function(){var a=this,m=O;return X(m=a.hash["$respond_to?"]("compare_by_identity?"))?a.hash["$compare_by_identity?"]():m}),p(M,"$delete",function(a){var m=this;return m.hash.$delete(a),m}),p(M,"$delete?",function(a){var m=this;return X(m["$include?"](a))?(m.$delete(a),m):O}),p(M,"$delete_if",function A(){var a=A.$$p||O,m=this;return A.$$p=null,a===O?m.$enum_for("delete_if"):(H(H(m,"select",[],function(y){return y==null&&(y=O),e.yield1(a,y)}),"each",[],function T(y){var d=T.$$s==null?this:T.$$s;return d.hash==null&&(d.hash=O),y==null&&(y=O),d.hash.$delete(y)},{$$s:m}),m)}),p(M,"$freeze",function(){var a=this;return X(a["$frozen?"]())?a:(a.hash.$freeze(),t(a))}),p(M,"$keep_if",function A(){var a=A.$$p||O,m=this;return A.$$p=null,a===O?m.$enum_for("keep_if"):(H(H(m,"reject",[],function(y){return y==null&&(y=O),e.yield1(a,y)}),"each",[],function T(y){var d=T.$$s==null?this:T.$$s;return d.hash==null&&(d.hash=O),y==null&&(y=O),d.hash.$delete(y)},{$$s:m}),m)}),p(M,"$reject!",function A(){var a=A.$$p||O,m=this,T=O;return A.$$p=null,a===O?m.$enum_for("reject!"):(T=m.$size(),H(m,"delete_if",[],a.$to_proc()),U(m.$size(),T)?O:m)}),p(M,"$select!",function A(){var a=A.$$p||O,m=this,T=O;return A.$$p=null,a===O?m.$enum_for("select!"):(T=m.$size(),H(m,"keep_if",[],a.$to_proc()),U(m.$size(),T)?O:m)}),p(M,"$add?",function(a){var m=this;return X(m["$include?"](a))?O:m.$add(a)}),p(M,"$each",function A(){var a=A.$$p||O,m=this;return A.$$p=null,a===O?m.$enum_for("each"):(H(m.hash,"each_key",[],a.$to_proc()),m)}),p(M,"$empty?",function(){var a=this;return a.hash["$empty?"]()}),p(M,"$eql?",function(a){var m=this;return m.hash["$eql?"](H(a,"instance_eval",[],function T(){var y=T.$$s==null?this:T.$$s;return y.hash==null&&(y.hash=O),y.hash},{$$s:m}))}),p(M,"$clear",function(){var a=this;return a.hash.$clear(),a}),p(M,"$include?",function(a){var m=this;return m.hash["$include?"](a)}),p(M,"$merge",function(a){var m=this;return H(a,"each",[],function T(y){var d=T.$$s==null?this:T.$$s;return y==null&&(y=O),d.$add(y)},{$$s:m}),m}),p(M,"$replace",function(a){var m=this;return m.$clear(),m.$merge(a),m}),p(M,"$size",function(){var a=this;return a.hash.$size()}),p(M,"$subtract",function(a){var m=this;return H(a,"each",[],function T(y){var d=T.$$s==null?this:T.$$s;return y==null&&(y=O),d.$delete(y)},{$$s:m}),m}),p(M,"$|",function(a){var m=this;return X(a["$respond_to?"]("each"))||z.$raise(k("ArgumentError"),"value must be enumerable"),m.$dup().$merge(a)});function F(A){X(q=A["$is_a?"](k("Set")))||z.$raise(k("ArgumentError"),"value must be a set")}return p(M,"$superset?",function(a){var m=this;return F(a),X($e(m.$size(),a.$size()))?!1:H(a,"all?",[],function T(y){var d=T.$$s==null?this:T.$$s;return y==null&&(y=O),d["$include?"](y)},{$$s:m})}),p(M,"$proper_superset?",function(a){var m=this;return F(a),X(Z(m.$size(),a.$size()))?!1:H(a,"all?",[],function T(y){var d=T.$$s==null?this:T.$$s;return y==null&&(y=O),d["$include?"](y)},{$$s:m})}),p(M,"$subset?",function(a){var m=this;return F(a),X($e(a.$size(),m.$size()))?!1:H(m,"all?",[],function(y){return y==null&&(y=O),a["$include?"](y)})}),p(M,"$proper_subset?",function(a){var m=this;return F(a),X(Z(a.$size(),m.$size()))?!1:H(m,"all?",[],function(y){return y==null&&(y=O),a["$include?"](y)})}),p(M,"$intersect?",function(a){var m=this;return F(a),X($e(m.$size(),a.$size()))?H(m,"any?",[],function(y){return y==null&&(y=O),a["$include?"](y)}):H(a,"any?",[],function T(y){var d=T.$$s==null?this:T.$$s;return y==null&&(y=O),d["$include?"](y)},{$$s:m})}),p(M,"$disjoint?",function(a){var m=this;return m["$intersect?"](a)["$!"]()}),p(M,"$to_a",function(){var a=this;return a.hash.$keys()}),Q(M,"+","|"),Q(M,"<","proper_subset?"),Q(M,"<<","add"),Q(M,"<=","subset?"),Q(M,">","proper_superset?"),Q(M,">=","superset?"),Q(M,"difference","-"),Q(M,"filter!","select!"),Q(M,"length","size"),Q(M,"map!","collect!"),Q(M,"member?","include?"),Q(M,"union","|")}("::",null,ne)};Opal.modules["corelib/dir"]=function(e){var t=e.klass,l=e.def,g=e.truthy,v=e.alias,X=e.nil,Y=e.$$$;return e.add_stubs("[],pwd"),function(z,H,p){var U=t(z,H,"Dir");return function($e,Z){return l($e,"$chdir",function Q(ne){var O=Q.$$p||X,k=X;return Q.$$p=null,function(){try{return k=e.current_dir,e.current_dir=ne,e.yieldX(O,[])}finally{e.current_dir=k}}()}),l($e,"$pwd",function(){return e.current_dir||"."}),l($e,"$home",function(){var ne=X;return g(ne=Y("ENV")["$[]"]("HOME"))?ne:"."}),v($e,"getwd","pwd")}(e.get_singleton_class(U))}("::",null)};Opal.modules["corelib/file"]=function(e){var t=e.truthy,l=e.klass,g=e.const_set,v=e.Opal,X=e.regexp,Y=e.rb_plus,z=e.def,H=e.Kernel,p=e.eqeq,U=e.rb_lt,$e=e.rb_minus,Z=e.range,Q=e.send,ne=e.slice,O=e.alias,k=[],C=e.nil,P=e.$$$;return e.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(W,M,L){var E=l(W,M,"File"),q=[E].concat(L),B=C;return g(q[0],"Separator",g(q[0],"SEPARATOR","/")),g(q[0],"ALT_SEPARATOR",C),g(q[0],"PATH_SEPARATOR",":"),g(q[0],"FNM_SYSCASE",0),B=/^[a-zA-Z]:(?:\\|\/)/,function(F,A){var a=[F].concat(A),m=e.$r(a);z(F,"$absolute_path",function(c,J){var V=C,h=C,_=C,o=C,i=C,n=C,r=C,$=C,s=C,u=C;J==null&&(J=C),V=m("SEPARATOR"),h=y(),_=[],c=t(c["$respond_to?"]("to_path"))?c.$to_path():c,c=v["$coerce_to!"](c,P("String"),"to_str"),J=t(o=J)?o:P("Dir").$pwd(),i=c.substr(0,V.length)===V||B.test(c),n=J.substr(0,V.length)===V||B.test(J),t(i)?(r=c.$split(X(["[",h,"]"])),$=B.test(c)?"":c.$sub(X(["^([",h,"]+).*$"]),"\\1"),s=!0):(r=Y(J.$split(X(["[",h,"]"])),c.$split(X(["[",h,"]"]))),$=B.test(J)?"":J.$sub(X(["^([",h,"]+).*$"]),"\\1"),s=n);for(var w,I=0,D=r.length;I<D;I++)w=r[I],!(w===C||w===""&&(_.length===0||s)||w==="."&&(_.length===0||s))&&(w===".."?_.pop():_.push(w));return!s&&r[0]!=="."&&_.$unshift("."),u=_.$join(V),t(s)&&(u=Y($,u)),u},-2),z(F,"$expand_path",function(c,J){var V=this,h=C,_=C,o=C,i=C,n=C;return J==null&&(J=C),h=m("SEPARATOR"),_=y(),t(c[0]==="~"||J&&J[0]==="~")&&(o=m("Dir").$home(),t(o)||H.$raise(P("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),i=B.test(o)?"":o.$sub(X(["^([",_,"]+).*$"]),"\\1"),t(o["$start_with?"](i))||H.$raise(P("ArgumentError"),"non-absolute home"),o=Y(o,h),n=X(["^\\~(?:",h,"|$)"]),c=c.$sub(n,o),t(J)&&(J=J.$sub(n,o))),V.$absolute_path(c,J)},-2);function T(d){return t(d["$respond_to?"]("to_path"))&&(d=d.$to_path()),d=v["$coerce_to!"](d,P("String"),"to_str"),d}function y(){return m("ALT_SEPARATOR")===C?e.escape_regexp(m("SEPARATOR")):e.escape_regexp(Y(m("SEPARATOR"),m("ALT_SEPARATOR")))}return z(F,"$dirname",function(c,J){var V=this,h=C;if(J==null&&(J=1),p(J,0))return c;t(U(J,0))&&H.$raise(P("ArgumentError"),"level can't be negative"),h=y(),c=T(c);var _=c.match(new RegExp("^["+h+"]")),o;return c=c.replace(new RegExp("["+h+"]+$"),""),c=c.replace(new RegExp("[^"+h+"]+$"),""),c=c.replace(new RegExp("["+h+"]+$"),""),c===""?o=_?"/":".":o=c,J==1?o:V.$dirname(o,$e(J,1))},-2),z(F,"$basename",function(c,J){var V=C;return J==null&&(J=C),V=y(),c=T(c),c.length==0||(J!==C?J=v["$coerce_to!"](J,P("String"),"to_str"):J=null,c=c.replace(new RegExp("(.)["+V+"]*$"),"$1"),c=c.replace(new RegExp("^(?:.*["+V+"])?([^"+V+"]+)$"),"$1"),J===".*"?c=c.replace(/\.[^\.]+$/,""):J!==null&&(J=e.escape_regexp(J),c=c.replace(new RegExp(""+J+"$"),""))),c},-2),z(F,"$extname",function(c){var J=this,V=C,h=C;return c=T(c),V=J.$basename(c),t(V["$empty?"]())||(h=V["$[]"](Z(1,-1,!1)).$rindex("."),t(h["$nil?"]())||p(Y(h,1),$e(V.$length(),1)))?"":V["$[]"](e.Range.$new(Y(h,1),-1,!1))}),z(F,"$exist?",function(c){return e.modules[c]!=null}),z(F,"$directory?",function(c){var J=C;J=[];for(var V in e.modules)J.push(V);return c=c.$gsub(X(["(^.",m("SEPARATOR"),"+|",m("SEPARATOR"),"+$)"])),Q(J,"find",[],function(_){return _==null&&(_=C),_["$=~"](X(["^",c]))})}),z(F,"$join",function(c){var J,V,h=C;return J=ne(arguments),V=J,t(V["$empty?"]())?"":(h="",V=Q(V.$flatten().$each_with_index(),"map",[],function(o,i){return o==null&&(o=C),i==null&&(i=C),p(i,0)&&t(o["$empty?"]())||p(V.$length(),Y(i,1))&&t(o["$empty?"]())?m("SEPARATOR"):o}),V=Q(V,"reject",[],"empty?".$to_proc()),Q(V,"each_with_index",[],function(o,i){var n=C;return o==null&&(o=C),i==null&&(i=C),n=V["$[]"](Y(i,1)),t(n["$nil?"]())?h=""+h+o:(t(o["$end_with?"](m("SEPARATOR")))&&t(n["$start_with?"](m("SEPARATOR")))&&(o=o.$sub(X([m("SEPARATOR"),"+$"]),"")),h=t(o["$end_with?"](m("SEPARATOR")))||t(n["$start_with?"](m("SEPARATOR")))?""+h+o:""+h+o+m("SEPARATOR"))}),h)},-1),z(F,"$split",function(c){return c.$split(m("SEPARATOR"))}),O(F,"realpath","expand_path"),O(F,"exists?","exist?")}(e.get_singleton_class(E),q)}("::",P("IO"),k)};Opal.modules["corelib/process/base"]=function(e){var t=e.klass,l=e.slice,g=e.defs,v=e.return_val,X=e.nil;return function(Y,z){var H=t(Y,z,"Signal");return g(H,"$trap",function(U){return l(arguments),X},-1)}("::",null),function(Y,z){var H=t(Y,z,"GC");return g(H,"$start",v(X))}("::",null)};Opal.modules["corelib/process"]=function(e){var t=e.module,l=e.defs,g=e.truthy,v=e.return_val,X=e.Kernel,Y=e.nil,z=e.$$$;return e.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(H){var p=t(H,"Process"),U=Y;if(p.__clocks__=[],l(p,"$__register_clock__",function(Q,ne){var O=this;return O.__clocks__==null&&(O.__clocks__=Y),O.$const_set(Q,O.__clocks__.$size()),O.__clocks__["$<<"](ne)}),p.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),U=!1,e.global.performance)U=function(){return performance.now()};else if(e.global.process&&process.hrtime){var $e=process.hrtime();U=function(){var Z=process.hrtime($e),Q=Z[1]/1e3|0;return Z[0]*1e3+Q/1e3}}return g(U)&&p.$__register_clock__("CLOCK_MONOTONIC",U),l(p,"$pid",v(0)),l(p,"$times",function(){var Q=Y;return Q=z("Time").$now().$to_f(),z(z("Benchmark"),"Tms").$new(Q,Q,Q,Q,Q)}),l(p,"$clock_gettime",function(Q,ne){var O=this,k=Y;O.__clocks__==null&&(O.__clocks__=Y),ne==null&&(ne="float_second"),g(k=O.__clocks__["$[]"](Q))||X.$raise(z(z("Errno"),"EINVAL"),"clock_gettime("+Q+") "+O.__clocks__["$[]"](Q));var C=k();switch(ne){case"float_second":return C/1e3;case"float_millisecond":return C/1;case"float_microsecond":return C*1e3;case"second":return C/1e3|0;case"millisecond":return C/1|0;case"microsecond":return C*1e3|0;case"nanosecond":return C*1e6|0;default:X.$raise(z("ArgumentError"),"unexpected unit: "+ne)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(e){var t=e.klass,l=e.module,g=e.def,v=e.range,X=e.send,Y=e.rb_divide,z=e.Kernel,H=e.Opal,p=[],U=e.nil,$e=e.$$$;return e.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(Z,Q,ne){var O=t(Z,Q,"Random"),k=[O].concat(ne);return function(C,P){var W=l(C,"Formatter"),M=[W].concat(P),L=e.$r(M);return g(W,"$hex",function(q){var B=this;q==null&&(q=U),q=$e("Random").$_verify_count(q);for(var F=B.$bytes(q),A="",a=0;a<q;a++)A+=F.charCodeAt(a).toString(16).padStart(2,"0");return A.$encode("US-ASCII")},-1),g(W,"$random_bytes",function(q){var B=this;return q==null&&(q=U),B.$bytes(q)},-1),g(W,"$base64",function(q){var B=this;return q==null&&(q=U),$e("Base64").$strict_encode64(B.$random_bytes(q)).$encode("US-ASCII")},-1),g(W,"$urlsafe_base64",function(q,B){var F=this;return q==null&&(q=U),B==null&&(B=!1),$e("Base64").$urlsafe_encode64(F.$random_bytes(q),B).$encode("US-ASCII")},-1),g(W,"$uuid",function(){var q=this,B=U;return B=q.$hex(16).$split(""),B["$[]="](12,"4"),B["$[]="](16,(parseInt(B["$[]"](16),16)&3|8).toString(16)),B=[B["$[]"](v(0,8,!0)),B["$[]"](v(8,12,!0)),B["$[]"](v(12,16,!0)),B["$[]"](v(16,20,!0)),B["$[]"](v(20,32,!0))],B=X(B,"map",[],"join".$to_proc()),B.$join("-")}),g(W,"$random_float",function(){var q=this,B=U,F=U;return B=q.$bytes(4),F=0,X(4,"times",[],function(a){return a==null&&(a=U),F=F["$<<"](8),F=F["$|"](B["$[]"](a).$ord())}),Y(F.$abs(),2147483647)}),g(W,"$random_number",function(q){var B=this;function F(){return B.$random_float()}function A(m){return Math.floor(F()*m)}function a(){var m=q.begin,T=q.end;if(m===U||T===U)return U;var y=T-m;return y<0?U:y===0?m:(T%1===0&&m%1===0&&!q.excl&&y++,A(y)+m)}return q==null?F():q.$$is_range?a():q.$$is_number?(q<=0&&z.$raise($e("ArgumentError"),"invalid argument - "+q),q%1===0?A(q):F()*q):(q=H["$coerce_to!"](q,$e("Integer"),"to_int"),q<=0&&z.$raise($e("ArgumentError"),"invalid argument - "+q),A(q))},-1),g(W,"$alphanumeric",function(q){var B=this,F=U;return q==null&&(q=U),q=L("Random").$_verify_count(q),F=X([v("0","9",!1),v("a","z",!1),v("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),X($e("Array"),"new",[q],function A(a){var m=A.$$s==null?this:A.$$s;return F["$[]"](m.$random_number(F.$length()))},{$$s:B}).$join()},-1)}(O,k),O.$include($e($e("Random"),"Formatter")),O.$extend($e($e("Random"),"Formatter"))}("::",null,p)};Opal.modules["corelib/random/mersenne_twister"]=function(e){var t=e.klass,l=e.const_set,g=e.send,v=e.nil,X=e.$$$,Y=v;return e.add_stubs("generator="),Y=function(){var z=624,H=397,p=2567483615,U=2147483648,$e=2147483647,Z=function(M,L){return M&U|L&$e},Q=function(M,L){return Z(M,L)>>>1^(L&1?p:0)};function ne(M){var L={left:0,next:z,state:new Array(z)};return O(L,M),L}function O(M,L){var E;for(M.state[0]=L>>>0,E=1;E<z;E++)M.state[E]=1812433253*(M.state[E-1]^M.state[E-1]>>30>>>0)+E,M.state[E]&=4294967295;M.left=1,M.next=z}function k(M){var L=0,E=M.state,q;for(M.left=z,M.next=0,q=z-H+1;--q;L++)E[L]=E[L+H]^Q(E[L+0],E[L+1]);for(q=H;--q;L++)E[L]=E[L+(H-z)]^Q(E[L+0],E[L+1]);E[L]=E[L+(H-z)]^Q(E[L+0],E[0])}function C(M){var L;return--M.left<=0&&k(M),L=M.state[M.next++],L^=L>>>11,L^=L<<7&2636928640,L^=L<<15&4022730752,L^=L>>>18,L>>>0}function P(M,L){return M>>>=5,L>>>=6,(M*67108864+L)*(1/9007199254740992)}function W(M){var L=C(M),E=C(M);return P(L,E)}return{genrand_real:W,init:ne}}(),function(z,H){var p=t(z,H,"Random"),U,$e=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return l(p,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*$e)},reseed:function(Z){return Y.init(Z)},rand:function(Z){return Y.genrand_real(Z)}}),U=[X(p,"MERSENNE_TWISTER_GENERATOR")],g(p,"generator=",U),U[U.length-1]}("::",null)};Opal.modules["corelib/random"]=function(e){var t=e.truthy,l=e.klass,g=e.Kernel,v=e.defs,X=e.Opal,Y=e.def,z=e.eqeqeq,H=e.send,p=e.top,U=e.nil,$e=e.$$$;return e.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),p.$require("corelib/random/formatter"),function(Z,Q){var ne=l(Z,Q,"Random");return ne.$attr_reader("seed","state"),v(ne,"$_verify_count",function(k){return t(k)||(k=16),typeof k!="number"&&(k=k.$to_int()),k<0&&g.$raise($e("ArgumentError"),"negative string size (or size too big)"),k=Math.floor(k),k}),Y(ne,"$initialize",function(k){var C=this;return k==null&&(k=$e("Random").$new_seed()),k=X["$coerce_to!"](k,$e("Integer"),"to_int"),C.state=k,C.$reseed(k)},-1),Y(ne,"$reseed",function(k){var C=this;return C.seed=k,C.$rng=e.$$rand.reseed(k)}),v(ne,"$new_seed",function(){return e.$$rand.new_seed()}),v(ne,"$rand",function(k){var C=this;return $e(C,"DEFAULT").$rand(k)},-1),v(ne,"$srand",function(k){var C=this,P=U;return k==null&&(k=$e("Random").$new_seed()),k=X["$coerce_to!"](k,$e("Integer"),"to_int"),P=$e(C,"DEFAULT").$seed(),$e(C,"DEFAULT").$reseed(k),P},-1),v(ne,"$urandom",function(k){return $e("SecureRandom").$bytes(k)}),Y(ne,"$==",function(k){var C=this,P=U;return z($e("Random"),k)?t(P=C.$seed()["$=="](k.$seed()))?C.$state()["$=="](k.$state()):P:!1}),Y(ne,"$bytes",function(k){var C=this;return k=$e("Random").$_verify_count(k),H($e("Array"),"new",[k],function P(){var W=P.$$s==null?this:P.$$s;return W.$rand(255).$chr()},{$$s:C}).$join().$encode("ASCII-8BIT")}),v(ne,"$bytes",function(k){var C=this;return $e(C,"DEFAULT").$bytes(k)}),Y(ne,"$rand",function(k){var C=this;return C.$random_number(k)},-1),Y(ne,"$random_float",function(){var k=this;return k.state++,e.$$rand.rand(k.$rng)}),v(ne,"$random_float",function(){var k=this;return $e(k,"DEFAULT").$random_float()}),v(ne,"$generator=",function(k){var C=this;return e.$$rand=k,t(C["$const_defined?"]("DEFAULT"))?$e(C,"DEFAULT").$reseed():C.$const_set("DEFAULT",C.$new(C.$new_seed()))})}("::",null),p.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(e){var t=e.Kernel,l=e.klass,g=e.send,v=e.slice,X=e.module,Y=e.def,z=e.return_val,H=e.alias,p=e.defs,U=e.top,$e=[],Z=e.nil,Q=e.$$$;e.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var ne={};function O(C){switch(e.config.unsupported_features_severity){case"error":t.$raise(Q("NotImplementedError"),C);break;case"warning":k(C);break}}function k(C){ne[C]||(ne[C]=!0,U.$warn(C))}return function(C,P){var W=l(C,P,"String"),M="String#%s not supported. Mutable String methods are not supported in Opal.";return g(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function L(E){var q=L.$$s==null?this:L.$$s;return E==null&&(E=Z),g(q,"define_method",[E],function(F){return v(arguments),t.$raise(Q("NotImplementedError"),M["$%"](E))},-1)},{$$s:W})}("::",null),function(C){var P=X(C,"Kernel"),W="Object tainting is not supported by Opal";return Y(P,"$taint",function(){var L=this;return O(W),L}),Y(P,"$untaint",function(){var L=this;return O(W),L}),Y(P,"$tainted?",function(){return O(W),!1})}("::"),function(C,P){var W=l(C,P,"Module");return Y(W,"$public",function(L){var E,q,B=this;return E=v(arguments),q=E,q.length===0?(B.$$module_function=!1,Z):q.length===1?q[0]:q},-1),Y(W,"$private_class_method",function(L){var E,q;return E=v(arguments),q=E,q.length===1?q[0]:q},-1),Y(W,"$private_method_defined?",z(!1)),Y(W,"$private_constant",function(L){return v(arguments),Z},-1),H(W,"nesting","public"),H(W,"private","public"),H(W,"protected","public"),H(W,"protected_method_defined?","private_method_defined?"),H(W,"public_class_method","private_class_method"),H(W,"public_instance_method","instance_method"),H(W,"public_instance_methods","instance_methods"),H(W,"public_method_defined?","method_defined?")}("::",null),function(C){var P=X(C,"Kernel");return Y(P,"$private_methods",function(M){return v(arguments),[]},-1),H(P,"protected_methods","private_methods"),H(P,"private_instance_methods","private_methods"),H(P,"protected_instance_methods","private_methods")}("::"),function(C,P){var W=X(C,"Kernel"),M=[W].concat(P),L=e.$r(M);return Y(W,"$eval",function(q){return v(arguments),t.$raise(Q("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+L("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",$e),p(U,"$public",function(P){var W,M;return W=v(arguments),M=W,M.length===1?M[0]:M},-1),p(U,"$private",function(P){var W,M;return W=v(arguments),M=W,M.length===1?M[0]:M},-1)};Opal.modules["corelib/binding"]=function(e){var t=e.klass,l=e.truthy,g=e.def,v=e.slice,X=e.send,Y=e.to_a,z=e.Kernel,H=e.return_ivar,p=e.eqeq;e.thrower;var U=e.module,$e=e.const_set,Z=e.top,Q=[],ne=e.nil,O=e.$$$;return e.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(k,C){var P=t(k,C,"Binding"),W=P.$$prototype;return W.jseval=W.scope_variables=ne,g(P,"$initialize",function(L,E,q,B){var F,A=this;return E==null&&(E=[]),B==null&&(B=ne),F=[L,E,q,B],A.jseval=F[0],A.scope_variables=F[1],A.receiver=F[2],A.source_location=F[3],l(typeof q!==void 0)?ne:q=A.$js_eval("self")},-2),g(P,"$js_eval",function(L){var E,q,B=this;return E=v(arguments),q=E,l(B.jseval)?X(B.jseval,"call",Y(q)):z.$raise("Evaluation on a Proc#binding is not supported")},-1),g(P,"$local_variable_get",function(L){var E=this;try{return E.$js_eval(L)}catch(q){if(e.rescue(q,[O("Exception")]))try{return z.$raise(O("NameError"),"local variable `"+L+"' is not defined for "+E.$inspect())}finally{e.pop_exception(q)}else throw q}}),g(P,"$local_variable_set",function(L,E){var q=this;return e.Binding.tmp_value=E,q.$js_eval(""+L+" = Opal.Binding.tmp_value"),delete e.Binding.tmp_value,E}),g(P,"$local_variables",H("scope_variables")),g(P,"$local_variable_defined?",function(L){var E=this;return E.scope_variables["$include?"](L)}),g(P,"$eval",function(L,E,q){try{var B=this;return E==null&&(E=ne),q==null&&(q=ne),p(L,"self")?B.$receiver():z.$eval(L,B,E,q)}catch(F){if(F===e.t_eval_return)return F.$v;throw F}},-2),P.$attr_reader("receiver","source_location")}("::",null),function(k){var C=U(k,"Kernel");return g(C,"$binding",function(){return z.$raise("Opal doesn't support dynamic calls to binding")})}("::"),$e(Q[0],"TOPLEVEL_BINDING",O("Binding").$new(function(k){return new Function("self","return "+k)(Z)},[],Z,["<main>",0]))};Opal.modules["corelib/irb"]=function(e){var t=e.module,l=e.truthy,g=e.Kernel,v=e.defs,X=e.gvars,Y=e.lambda,z=e.hash_rehash,H=e.send,p=e.rb_plus,U=e.const_set,$e=e.klass,Z=e.def,Q=e.Opal,ne=e.range,O=e.eqeq,k=e.thrower,C=[],P=e.nil,W=e.$$$;e.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(M,L){var E=t(M,"Opal"),q=[E].concat(L);return function(B,F){var A=t(B,"IRB"),a=[A].concat(F),m=e.$r(a);return v(A,"$ensure_loaded",function(y){var d=P,c=P;if(l(e.loaded_features["$include?"](y)))return P;d=l(m("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":m("RUBY_ENGINE_VERSION"),c="https://cdn.opalrb.com/opal/"+d+"/"+y+".js";var J;if(typeof XMLHttpRequest<"u"){var V=new XMLHttpRequest;V.open("GET",c,!1),V.send(""),J=V.responseText}else g.$raise("You need to provision "+y+" yourself in this environment");return new Function("Opal",J)(e),e.require(y),l(e.loaded_features["$include?"](y))?P:g.$raise("Could not load "+y+" for some reason")}),A.$singleton_class().$attr_accessor("output"),v(A,"$prepare_console",function T(){var y=T.$$p||P,d,c=this,J=P,V=P;return X.stdout==null&&(X.stdout=P),X.stderr==null&&(X.stderr=P),X.stdin==null&&(X.stdin=P),T.$$p=null,function(){try{return c["$output="](""),J=z(new Map([[X.stdout,Y(function(_){return _==null&&(_=P),X.stdout=_})],[X.stderr,Y(function(_){return _==null&&(_=P),X.stderr=_})]])),l(c["$browser?"]())&&(H(J,"each",[],function h(_,o){var i=h.$$s==null?this:h.$$s,n=P;return _==null&&(_=P),o==null&&(o=P),n=_.$dup(),n["$write_proc="](H(i,"proc",[],function r($){var s=r.$$s==null?this:r.$$s;return $==null&&($=P),s["$output="](p(s.$output(),$)),s["$output="](s.$output().$split(`
`).$last(30).$join(`
`)),l($["$end_with?"](`
`))&&s["$output="](p(s.$output(),`
`)),_.$write_proc().$call($)},{$$s:i})),n["$tty="](!1),o.$call(n)},{$$s:c}),V=X.stdin.$read_proc(),X.stdin["$read_proc="](function(h){var _=prompt(c.$output());return _!==null?_+`
`:P})),e.yieldX(y,[])}finally{H(J,"each",[],function(_,o){return _==null&&(_=P),o==null&&(o=P),o.$call(_)}),d=[V],H(X.stdin,"read_proc=",d),d[d.length-1],d=[""],H(c,"output=",d),d[d.length-1]}}()}),v(A,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),U(a[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(T,y){var d=$e(T,y,"Silencer"),c=d.$$prototype;return c.collector=c.stderr=P,Z(d,"$initialize",function(){var V=this;return X.stderr==null&&(X.stderr=P),V.stderr=X.stderr}),Z(d,"$silence",function J(){var V=J.$$p||P,h=this;return J.$$p=null,function(){try{return h.collector=W("StringIO").$new(),X.stderr=h.collector,e.yieldX(V,[])}finally{X.stderr=h.stderr}}()}),Z(d,"$warnings",function(){var V=this;return V.collector.$string()})}(a[0],null)}(q[0],q)}(C[0],C),function(M,L,E){var q=$e(M,L,"Binding"),B=[q].concat(E),F=e.$r(B);return Z(q,"$irb",function(){try{var a=k("return"),m=this,T=P;return W(Q,"IRB").$ensure_loaded("opal-replutils"),T=W(W(Q,"IRB"),"Silencer").$new(),H(W(Q,"IRB"),"prepare_console",[],function y(){var d=y.$$s==null?this:y.$$s;return function(){try{var c=k("break");return H(d,"loop",[],function J(){var V=J.$$s==null?this:J.$$s,h=P,_=P,o=P,i=P,n=P;V.$print(">> "),h=V.$gets(),l(h)||c.$throw(P,J.$$is_lambda),_="",l(W(Q,"IRB")["$browser?"]())&&V.$puts(h),l(h["$start_with?"]("ls "))?(_=h["$[]"](ne(3,-1,!1)),o="ls"):O(h,`ls
`)?(_="self",o="ls"):l(h["$start_with?"]("show "))?(_=h["$[]"](ne(5,-1,!1)),o="show"):(_=h,o="inspect"),i=P;do{try{H(T,"silence",[],function(){return i=e.compile(_,{irb:!0})})}catch(r){if(e.rescue(r,[F("SyntaxError")])){n=r;try{if(l(W(W(Q,"IRB"),"LINEBREAKS")["$include?"](n.$message()))){V.$print(".. "),h=V.$gets(),l(h)||a.$throw(P,J.$$is_lambda),l(W(Q,"IRB")["$browser?"]())&&V.$puts(h),_=p(_,h);continue}else l(T.$warnings()["$empty?"]())?V.$warn(n.$full_message()):V.$warn(T.$warnings())}finally{e.pop_exception(r)}}else throw r}break}while(!0);return O(o,"show")&&(V.$puts(i),a.$throw(P,J.$$is_lambda)),V.$puts(W("REPLUtils").$eval_and_print(i,o,!1,V))},{$$s:d,$$ret:a})}catch(J){if(J===c)return J.$v;throw J}finally{c.is_orphan=!0}}()},{$$s:m})}catch(y){if(y===a)return y.$v;throw y}finally{a.is_orphan=!0}})}("::",null,C),e.irb=function(M){W("Binding").$new(M).$irb()},e.load_parser=function(){e.Opal.IRB.$ensure_loaded("opal-parser")},typeof e.eval>"u"&&(e.eval=function(M){return e.load_parser(),e.eval(M)}),typeof e.compile>"u"&&(e.compile=function(M,L){return e.load_parser(),e.compile(M,L)})};Opal.queue(function(e){var t=e.Object;return e.nil,e.add_stubs("require,autoload"),t.$require("opal/base"),t.$require("opal/mini"),t.$require("corelib/kernel/format"),t.$require("corelib/string/encoding"),t.$autoload("Math","corelib/math"),t.$require("corelib/complex/base"),t.$autoload("Complex","corelib/complex"),t.$require("corelib/rational/base"),t.$autoload("Rational","corelib/rational"),t.$require("corelib/time"),t.$autoload("Struct","corelib/struct"),t.$autoload("Set","corelib/set"),t.$autoload("Dir","corelib/dir"),t.$autoload("File","corelib/file"),t.$require("corelib/process/base"),t.$autoload("Process","corelib/process"),t.$autoload("Random","corelib/random"),t.$require("corelib/unsupported"),t.$require("corelib/binding"),t.$require("corelib/irb")});class or{constructor(t,l,g){this.eventTarget=t,this.eventName=l,this.eventOptions=g,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(t){this.unorderedBindings.add(t)}bindingDisconnected(t){this.unorderedBindings.delete(t)}handleEvent(t){const l=ur(t);for(const g of this.bindings){if(l.immediatePropagationStopped)break;g.handleEvent(l)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((t,l)=>{const g=t.index,v=l.index;return g<v?-1:g>v?1:0})}}function ur(e){if("immediatePropagationStopped"in e)return e;{const{stopImmediatePropagation:t}=e;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}class lr{constructor(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(t=>t.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(t=>t.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((t,l)=>t.concat(Array.from(l.values())),[])}bindingConnected(t){this.fetchEventListenerForBinding(t).bindingConnected(t)}bindingDisconnected(t,l=!1){this.fetchEventListenerForBinding(t).bindingDisconnected(t),l&&this.clearEventListenersForBinding(t)}handleError(t,l,g={}){this.application.handleError(t,`Error ${l}`,g)}clearEventListenersForBinding(t){const l=this.fetchEventListenerForBinding(t);l.hasBindings()||(l.disconnect(),this.removeMappedEventListenerFor(t))}removeMappedEventListenerFor(t){const{eventTarget:l,eventName:g,eventOptions:v}=t,X=this.fetchEventListenerMapForEventTarget(l),Y=this.cacheKey(g,v);X.delete(Y),X.size==0&&this.eventListenerMaps.delete(l)}fetchEventListenerForBinding(t){const{eventTarget:l,eventName:g,eventOptions:v}=t;return this.fetchEventListener(l,g,v)}fetchEventListener(t,l,g){const v=this.fetchEventListenerMapForEventTarget(t),X=this.cacheKey(l,g);let Y=v.get(X);return Y||(Y=this.createEventListener(t,l,g),v.set(X,Y)),Y}createEventListener(t,l,g){const v=new or(t,l,g);return this.started&&v.connect(),v}fetchEventListenerMapForEventTarget(t){let l=this.eventListenerMaps.get(t);return l||(l=new Map,this.eventListenerMaps.set(t,l)),l}cacheKey(t,l){const g=[t];return Object.keys(l).sort().forEach(v=>{g.push(`${l[v]?"":"!"}${v}`)}),g.join(":")}}const fr={stop({event:e,value:t}){return t&&e.stopPropagation(),!0},prevent({event:e,value:t}){return t&&e.preventDefault(),!0},self({event:e,value:t,element:l}){return t?l===e.target:!0}},cr=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function _r(e){const l=e.trim().match(cr)||[];let g=l[2],v=l[3];return v&&!["keydown","keyup","keypress"].includes(g)&&(g+=`.${v}`,v=""),{eventTarget:dr(l[4]),eventName:g,eventOptions:l[7]?hr(l[7]):{},identifier:l[5],methodName:l[6],keyFilter:l[1]||v}}function dr(e){if(e=="window")return window;if(e=="document")return document}function hr(e){return e.split(":").reduce((t,l)=>Object.assign(t,{[l.replace(/^!/,"")]:!/^!/.test(l)}),{})}function gr(e){if(e==window)return"window";if(e==document)return"document"}function Be(e){return e.replace(/(?:[_-])([a-z0-9])/g,(t,l)=>l.toUpperCase())}function Fe(e){return Be(e.replace(/--/g,"-").replace(/__/g,"_"))}function Se(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Ze(e){return e.replace(/([A-Z])/g,(t,l)=>`-${l.toLowerCase()}`)}function mr(e){return e.match(/[^\s]+/g)||[]}function je(e){return e!=null}function Re(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const Ue=["meta","ctrl","alt","shift"];class vr{constructor(t,l,g,v){this.element=t,this.index=l,this.eventTarget=g.eventTarget||t,this.eventName=g.eventName||pr(t)||Te("missing event name"),this.eventOptions=g.eventOptions||{},this.identifier=g.identifier||Te("missing identifier"),this.methodName=g.methodName||Te("missing method name"),this.keyFilter=g.keyFilter||"",this.schema=v}static forToken(t,l){return new this(t.element,t.index,_r(t.content),l)}toString(){const t=this.keyFilter?`.${this.keyFilter}`:"",l=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${t}${l}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(t){if(!this.keyFilter)return!1;const l=this.keyFilter.split("+");if(this.keyFilterDissatisfied(t,l))return!0;const g=l.filter(v=>!Ue.includes(v))[0];return g?(Re(this.keyMappings,g)||Te(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[g].toLowerCase()!==t.key.toLowerCase()):!1}shouldIgnoreMouseEvent(t){if(!this.keyFilter)return!1;const l=[this.keyFilter];return!!this.keyFilterDissatisfied(t,l)}get params(){const t={},l=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:g,value:v}of Array.from(this.element.attributes)){const X=g.match(l),Y=X&&X[1];Y&&(t[Be(Y)]=br(v))}return t}get eventTargetName(){return gr(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(t,l){const[g,v,X,Y]=Ue.map(z=>l.includes(z));return t.metaKey!==g||t.ctrlKey!==v||t.altKey!==X||t.shiftKey!==Y}}const Ve={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:e=>e.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function pr(e){const t=e.tagName.toLowerCase();if(t in Ve)return Ve[t](e)}function Te(e){throw new Error(e)}function br(e){try{return JSON.parse(e)}catch{return e}}class yr{constructor(t,l){this.context=t,this.action=l}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(t){const l=this.prepareActionEvent(t);this.willBeInvokedByEvent(t)&&this.applyEventModifiers(l)&&this.invokeWithEvent(l)}get eventName(){return this.action.eventName}get method(){const t=this.controller[this.methodName];if(typeof t=="function")return t;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(t){const{element:l}=this.action,{actionDescriptorFilters:g}=this.context.application,{controller:v}=this.context;let X=!0;for(const[Y,z]of Object.entries(this.eventOptions))if(Y in g){const H=g[Y];X=X&&H({name:Y,value:z,event:t,element:l,controller:v})}else continue;return X}prepareActionEvent(t){return Object.assign(t,{params:this.action.params})}invokeWithEvent(t){const{target:l,currentTarget:g}=t;try{this.method.call(this.controller,t),this.context.logDebugActivity(this.methodName,{event:t,target:l,currentTarget:g,action:this.methodName})}catch(v){const{identifier:X,controller:Y,element:z,index:H}=this,p={identifier:X,controller:Y,element:z,index:H,event:t};this.context.handleError(v,`invoking action "${this.action}"`,p)}}willBeInvokedByEvent(t){const l=t.target;return t instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(t)||t instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(t)?!1:this.element===l?!0:l instanceof Element&&this.element.contains(l)?this.scope.containsElement(l):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class Qe{constructor(t,l){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=l,this.elements=new Set,this.mutationObserver=new MutationObserver(g=>this.processMutations(g))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(t){this.started&&(this.mutationObserver.disconnect(),this.started=!1),t(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const t=new Set(this.matchElementsInTree());for(const l of Array.from(this.elements))t.has(l)||this.removeElement(l);for(const l of Array.from(t))this.addElement(l)}}processMutations(t){if(this.started)for(const l of t)this.processMutation(l)}processMutation(t){t.type=="attributes"?this.processAttributeChange(t.target,t.attributeName):t.type=="childList"&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))}processAttributeChange(t,l){this.elements.has(t)?this.delegate.elementAttributeChanged&&this.matchElement(t)?this.delegate.elementAttributeChanged(t,l):this.removeElement(t):this.matchElement(t)&&this.addElement(t)}processRemovedNodes(t){for(const l of Array.from(t)){const g=this.elementFromNode(l);g&&this.processTree(g,this.removeElement)}}processAddedNodes(t){for(const l of Array.from(t)){const g=this.elementFromNode(l);g&&this.elementIsActive(g)&&this.processTree(g,this.addElement)}}matchElement(t){return this.delegate.matchElement(t)}matchElementsInTree(t=this.element){return this.delegate.matchElementsInTree(t)}processTree(t,l){for(const g of this.matchElementsInTree(t))l.call(this,g)}elementFromNode(t){if(t.nodeType==Node.ELEMENT_NODE)return t}elementIsActive(t){return t.isConnected!=this.element.isConnected?!1:this.element.contains(t)}addElement(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))}removeElement(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))}}class Oe{constructor(t,l,g){this.attributeName=l,this.delegate=g,this.elementObserver=new Qe(t,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(t){return t.hasAttribute(this.attributeName)}matchElementsInTree(t){const l=this.matchElement(t)?[t]:[],g=Array.from(t.querySelectorAll(this.selector));return l.concat(g)}elementMatched(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)}elementUnmatched(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)}elementAttributeChanged(t,l){this.delegate.elementAttributeValueChanged&&this.attributeName==l&&this.delegate.elementAttributeValueChanged(t,l)}}function wr(e,t,l){er(e,t).add(l)}function Er(e,t,l){er(e,t).delete(l),Ar(e,t)}function er(e,t){let l=e.get(t);return l||(l=new Set,e.set(t,l)),l}function Ar(e,t){const l=e.get(t);l!=null&&l.size==0&&e.delete(t)}class ze{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((l,g)=>l.concat(Array.from(g)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((l,g)=>l+g.size,0)}add(t,l){wr(this.valuesByKey,t,l)}delete(t,l){Er(this.valuesByKey,t,l)}has(t,l){const g=this.valuesByKey.get(t);return g!=null&&g.has(l)}hasKey(t){return this.valuesByKey.has(t)}hasValue(t){return Array.from(this.valuesByKey.values()).some(g=>g.has(t))}getValuesForKey(t){const l=this.valuesByKey.get(t);return l?Array.from(l):[]}getKeysForValue(t){return Array.from(this.valuesByKey).filter(([l,g])=>g.has(t)).map(([l,g])=>l)}}class xr{constructor(t,l,g,v){this._selector=l,this.details=v,this.elementObserver=new Qe(t,this),this.delegate=g,this.matchesByElement=new ze}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(t){this._selector=t,this.refresh()}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(t){const{selector:l}=this;if(l){const g=t.matches(l);return this.delegate.selectorMatchElement?g&&this.delegate.selectorMatchElement(t,this.details):g}else return!1}matchElementsInTree(t){const{selector:l}=this;if(l){const g=this.matchElement(t)?[t]:[],v=Array.from(t.querySelectorAll(l)).filter(X=>this.matchElement(X));return g.concat(v)}else return[]}elementMatched(t){const{selector:l}=this;l&&this.selectorMatched(t,l)}elementUnmatched(t){const l=this.matchesByElement.getKeysForValue(t);for(const g of l)this.selectorUnmatched(t,g)}elementAttributeChanged(t,l){const{selector:g}=this;if(g){const v=this.matchElement(t),X=this.matchesByElement.has(g,t);v&&!X?this.selectorMatched(t,g):!v&&X&&this.selectorUnmatched(t,g)}}selectorMatched(t,l){this.delegate.selectorMatched(t,l,this.details),this.matchesByElement.add(l,t)}selectorUnmatched(t,l){this.delegate.selectorUnmatched(t,l,this.details),this.matchesByElement.delete(l,t)}}class qr{constructor(t,l){this.element=t,this.delegate=l,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(g=>this.processMutations(g))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const t of this.knownAttributeNames)this.refreshAttribute(t,null)}processMutations(t){if(this.started)for(const l of t)this.processMutation(l)}processMutation(t){const l=t.attributeName;l&&this.refreshAttribute(l,t.oldValue)}refreshAttribute(t,l){const g=this.delegate.getStringMapKeyForAttribute(t);if(g!=null){this.stringMap.has(t)||this.stringMapKeyAdded(g,t);const v=this.element.getAttribute(t);if(this.stringMap.get(t)!=v&&this.stringMapValueChanged(v,g,l),v==null){const X=this.stringMap.get(t);this.stringMap.delete(t),X&&this.stringMapKeyRemoved(g,t,X)}else this.stringMap.set(t,v)}}stringMapKeyAdded(t,l){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(t,l)}stringMapValueChanged(t,l,g){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(t,l,g)}stringMapKeyRemoved(t,l,g){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(t,l,g)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(t=>t.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class rr{constructor(t,l,g){this.attributeObserver=new Oe(t,l,this),this.delegate=g,this.tokensByElement=new ze}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(t){this.attributeObserver.pause(t)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(t){this.tokensMatched(this.readTokensForElement(t))}elementAttributeValueChanged(t){const[l,g]=this.refreshTokensForElement(t);this.tokensUnmatched(l),this.tokensMatched(g)}elementUnmatchedAttribute(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))}tokensMatched(t){t.forEach(l=>this.tokenMatched(l))}tokensUnmatched(t){t.forEach(l=>this.tokenUnmatched(l))}tokenMatched(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)}tokenUnmatched(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)}refreshTokensForElement(t){const l=this.tokensByElement.getValuesForKey(t),g=this.readTokensForElement(t),v=zr(l,g).findIndex(([X,Y])=>!Ir(X,Y));return v==-1?[[],[]]:[l.slice(v),g.slice(v)]}readTokensForElement(t){const l=this.attributeName,g=t.getAttribute(l)||"";return kr(g,t,l)}}function kr(e,t,l){return e.trim().split(/\s+/).filter(g=>g.length).map((g,v)=>({element:t,attributeName:l,content:g,index:v}))}function zr(e,t){const l=Math.max(e.length,t.length);return Array.from({length:l},(g,v)=>[e[v],t[v]])}function Ir(e,t){return e&&t&&e.index==t.index&&e.content==t.content}class tr{constructor(t,l,g){this.tokenListObserver=new rr(t,l,this),this.delegate=g,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(t){const{element:l}=t,{value:g}=this.fetchParseResultForToken(t);g&&(this.fetchValuesByTokenForElement(l).set(t,g),this.delegate.elementMatchedValue(l,g))}tokenUnmatched(t){const{element:l}=t,{value:g}=this.fetchParseResultForToken(t);g&&(this.fetchValuesByTokenForElement(l).delete(t),this.delegate.elementUnmatchedValue(l,g))}fetchParseResultForToken(t){let l=this.parseResultsByToken.get(t);return l||(l=this.parseToken(t),this.parseResultsByToken.set(t,l)),l}fetchValuesByTokenForElement(t){let l=this.valuesByTokenByElement.get(t);return l||(l=new Map,this.valuesByTokenByElement.set(t,l)),l}parseToken(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(l){return{error:l}}}}class Sr{constructor(t,l){this.context=t,this.delegate=l,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new tr(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(t){const l=new yr(this.context,t);this.bindingsByAction.set(t,l),this.delegate.bindingConnected(l)}disconnectAction(t){const l=this.bindingsByAction.get(t);l&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(l))}disconnectAllActions(){this.bindings.forEach(t=>this.delegate.bindingDisconnected(t,!0)),this.bindingsByAction.clear()}parseValueForToken(t){const l=vr.forToken(t,this.schema);if(l.identifier==this.identifier)return l}elementMatchedValue(t,l){this.connectAction(l)}elementUnmatchedValue(t,l){this.disconnectAction(l)}}class Mr{constructor(t,l){this.context=t,this.receiver=l,this.stringMapObserver=new qr(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(t){if(t in this.valueDescriptorMap)return this.valueDescriptorMap[t].name}stringMapKeyAdded(t,l){const g=this.valueDescriptorMap[l];this.hasValue(t)||this.invokeChangedCallback(t,g.writer(this.receiver[t]),g.writer(g.defaultValue))}stringMapValueChanged(t,l,g){const v=this.valueDescriptorNameMap[l];t!==null&&(g===null&&(g=v.writer(v.defaultValue)),this.invokeChangedCallback(l,t,g))}stringMapKeyRemoved(t,l,g){const v=this.valueDescriptorNameMap[t];this.hasValue(t)?this.invokeChangedCallback(t,v.writer(this.receiver[t]),g):this.invokeChangedCallback(t,v.writer(v.defaultValue),g)}invokeChangedCallbacksForDefaultValues(){for(const{key:t,name:l,defaultValue:g,writer:v}of this.valueDescriptors)g!=null&&!this.controller.data.has(t)&&this.invokeChangedCallback(l,v(g),void 0)}invokeChangedCallback(t,l,g){const v=`${t}Changed`,X=this.receiver[v];if(typeof X=="function"){const Y=this.valueDescriptorNameMap[t];try{const z=Y.reader(l);let H=g;g&&(H=Y.reader(g)),X.call(this.receiver,z,H)}catch(z){throw z instanceof TypeError&&(z.message=`Stimulus Value "${this.context.identifier}.${Y.name}" - ${z.message}`),z}}}get valueDescriptors(){const{valueDescriptorMap:t}=this;return Object.keys(t).map(l=>t[l])}get valueDescriptorNameMap(){const t={};return Object.keys(this.valueDescriptorMap).forEach(l=>{const g=this.valueDescriptorMap[l];t[g.name]=g}),t}hasValue(t){const l=this.valueDescriptorNameMap[t],g=`has${Se(l.name)}`;return this.receiver[g]}}class Nr{constructor(t,l){this.context=t,this.delegate=l,this.targetsByName=new ze}start(){this.tokenListObserver||(this.tokenListObserver=new rr(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:t,content:l}){this.scope.containsElement(t)&&this.connectTarget(t,l)}tokenUnmatched({element:t,content:l}){this.disconnectTarget(t,l)}connectTarget(t,l){var g;this.targetsByName.has(l,t)||(this.targetsByName.add(l,t),(g=this.tokenListObserver)===null||g===void 0||g.pause(()=>this.delegate.targetConnected(t,l)))}disconnectTarget(t,l){var g;this.targetsByName.has(l,t)&&(this.targetsByName.delete(l,t),(g=this.tokenListObserver)===null||g===void 0||g.pause(()=>this.delegate.targetDisconnected(t,l)))}disconnectAllTargets(){for(const t of this.targetsByName.keys)for(const l of this.targetsByName.getValuesForKey(t))this.disconnectTarget(l,t)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function Me(e,t){const l=nr(e);return Array.from(l.reduce((g,v)=>(Cr(v,t).forEach(X=>g.add(X)),g),new Set))}function Tr(e,t){return nr(e).reduce((g,v)=>(g.push(...Fr(v,t)),g),[])}function nr(e){const t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}function Cr(e,t){const l=e[t];return Array.isArray(l)?l:[]}function Fr(e,t){const l=e[t];return l?Object.keys(l).map(g=>[g,l[g]]):[]}class Rr{constructor(t,l){this.started=!1,this.context=t,this.delegate=l,this.outletsByName=new ze,this.outletElementsByName=new ze,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(t=>{this.setupSelectorObserverForOutlet(t),this.setupAttributeObserverForOutlet(t)}),this.started=!0,this.dependentContexts.forEach(t=>t.refresh()))}refresh(){this.selectorObserverMap.forEach(t=>t.refresh()),this.attributeObserverMap.forEach(t=>t.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(t=>t.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(t=>t.stop()),this.attributeObserverMap.clear())}selectorMatched(t,l,{outletName:g}){const v=this.getOutlet(t,g);v&&this.connectOutlet(v,t,g)}selectorUnmatched(t,l,{outletName:g}){const v=this.getOutletFromMap(t,g);v&&this.disconnectOutlet(v,t,g)}selectorMatchElement(t,{outletName:l}){const g=this.selector(l),v=this.hasOutlet(t,l),X=t.matches(`[${this.schema.controllerAttribute}~=${l}]`);return g?v&&X&&t.matches(g):!1}elementMatchedAttribute(t,l){const g=this.getOutletNameFromOutletAttributeName(l);g&&this.updateSelectorObserverForOutlet(g)}elementAttributeValueChanged(t,l){const g=this.getOutletNameFromOutletAttributeName(l);g&&this.updateSelectorObserverForOutlet(g)}elementUnmatchedAttribute(t,l){const g=this.getOutletNameFromOutletAttributeName(l);g&&this.updateSelectorObserverForOutlet(g)}connectOutlet(t,l,g){var v;this.outletElementsByName.has(g,l)||(this.outletsByName.add(g,t),this.outletElementsByName.add(g,l),(v=this.selectorObserverMap.get(g))===null||v===void 0||v.pause(()=>this.delegate.outletConnected(t,l,g)))}disconnectOutlet(t,l,g){var v;this.outletElementsByName.has(g,l)&&(this.outletsByName.delete(g,t),this.outletElementsByName.delete(g,l),(v=this.selectorObserverMap.get(g))===null||v===void 0||v.pause(()=>this.delegate.outletDisconnected(t,l,g)))}disconnectAllOutlets(){for(const t of this.outletElementsByName.keys)for(const l of this.outletElementsByName.getValuesForKey(t))for(const g of this.outletsByName.getValuesForKey(t))this.disconnectOutlet(g,l,t)}updateSelectorObserverForOutlet(t){const l=this.selectorObserverMap.get(t);l&&(l.selector=this.selector(t))}setupSelectorObserverForOutlet(t){const l=this.selector(t),g=new xr(document.body,l,this,{outletName:t});this.selectorObserverMap.set(t,g),g.start()}setupAttributeObserverForOutlet(t){const l=this.attributeNameForOutletName(t),g=new Oe(this.scope.element,l,this);this.attributeObserverMap.set(t,g),g.start()}selector(t){return this.scope.outlets.getSelectorForOutletName(t)}attributeNameForOutletName(t){return this.scope.schema.outletAttributeForScope(this.identifier,t)}getOutletNameFromOutletAttributeName(t){return this.outletDefinitions.find(l=>this.attributeNameForOutletName(l)===t)}get outletDependencies(){const t=new ze;return this.router.modules.forEach(l=>{const g=l.definition.controllerConstructor;Me(g,"outlets").forEach(X=>t.add(X,l.identifier))}),t}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const t=this.dependentControllerIdentifiers;return this.router.contexts.filter(l=>t.includes(l.identifier))}hasOutlet(t,l){return!!this.getOutlet(t,l)||!!this.getOutletFromMap(t,l)}getOutlet(t,l){return this.application.getControllerForElementAndIdentifier(t,l)}getOutletFromMap(t,l){return this.outletsByName.getValuesForKey(l).find(g=>g.element===t)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class Dr{constructor(t,l){this.logDebugActivity=(g,v={})=>{const{identifier:X,controller:Y,element:z}=this;v=Object.assign({identifier:X,controller:Y,element:z},v),this.application.logDebugActivity(this.identifier,g,v)},this.module=t,this.scope=l,this.controller=new t.controllerConstructor(this),this.bindingObserver=new Sr(this,this.dispatcher),this.valueObserver=new Mr(this,this.controller),this.targetObserver=new Nr(this,this),this.outletObserver=new Rr(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(g){this.handleError(g,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(t){this.handleError(t,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(t){this.handleError(t,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(t,l,g={}){const{identifier:v,controller:X,element:Y}=this;g=Object.assign({identifier:v,controller:X,element:Y},g),this.application.handleError(t,`Error ${l}`,g)}targetConnected(t,l){this.invokeControllerMethod(`${l}TargetConnected`,t)}targetDisconnected(t,l){this.invokeControllerMethod(`${l}TargetDisconnected`,t)}outletConnected(t,l,g){this.invokeControllerMethod(`${Fe(g)}OutletConnected`,t,l)}outletDisconnected(t,l,g){this.invokeControllerMethod(`${Fe(g)}OutletDisconnected`,t,l)}invokeControllerMethod(t,...l){const g=this.controller;typeof g[t]=="function"&&g[t](...l)}}function Br(e){return Pr(e,Kr(e))}function Pr(e,t){const l=Vr(e),g=Lr(e.prototype,t);return Object.defineProperties(l.prototype,g),l}function Kr(e){return Me(e,"blessings").reduce((l,g)=>{const v=g(e);for(const X in v){const Y=l[X]||{};l[X]=Object.assign(Y,v[X])}return l},{})}function Lr(e,t){return Ur(t).reduce((l,g)=>{const v=jr(e,t,g);return v&&Object.assign(l,{[g]:v}),l},{})}function jr(e,t,l){const g=Object.getOwnPropertyDescriptor(e,l);if(!(g&&"value"in g)){const X=Object.getOwnPropertyDescriptor(t,l).value;return g&&(X.get=g.get||X.get,X.set=g.set||X.set),X}}const Ur=typeof Object.getOwnPropertySymbols=="function"?e=>[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)]:Object.getOwnPropertyNames,Vr=(()=>{function e(l){function g(){return Reflect.construct(l,arguments,new.target)}return g.prototype=Object.create(l.prototype,{constructor:{value:g}}),Reflect.setPrototypeOf(g,l),g}function t(){const g=e(function(){this.a.call(this)});return g.prototype.a=function(){},new g}try{return t(),e}catch{return g=>class extends g{}}})();function Hr(e){return{identifier:e.identifier,controllerConstructor:Br(e.controllerConstructor)}}class Gr{constructor(t,l){this.application=t,this.definition=Hr(l),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(t){const l=this.fetchContextForScope(t);this.connectedContexts.add(l),l.connect()}disconnectContextForScope(t){const l=this.contextsByScope.get(t);l&&(this.connectedContexts.delete(l),l.disconnect())}fetchContextForScope(t){let l=this.contextsByScope.get(t);return l||(l=new Dr(this,t),this.contextsByScope.set(t,l)),l}}class Yr{constructor(t){this.scope=t}has(t){return this.data.has(this.getDataKey(t))}get(t){return this.getAll(t)[0]}getAll(t){const l=this.data.get(this.getDataKey(t))||"";return mr(l)}getAttributeName(t){return this.data.getAttributeNameForKey(this.getDataKey(t))}getDataKey(t){return`${t}-class`}get data(){return this.scope.data}}class Xr{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(t){const l=this.getAttributeNameForKey(t);return this.element.getAttribute(l)}set(t,l){const g=this.getAttributeNameForKey(t);return this.element.setAttribute(g,l),this.get(t)}has(t){const l=this.getAttributeNameForKey(t);return this.element.hasAttribute(l)}delete(t){if(this.has(t)){const l=this.getAttributeNameForKey(t);return this.element.removeAttribute(l),!0}else return!1}getAttributeNameForKey(t){return`data-${this.identifier}-${Ze(t)}`}}class Wr{constructor(t){this.warnedKeysByObject=new WeakMap,this.logger=t}warn(t,l,g){let v=this.warnedKeysByObject.get(t);v||(v=new Set,this.warnedKeysByObject.set(t,v)),v.has(l)||(v.add(l),this.logger.warn(g,t))}}function De(e,t){return`[${e}~="${t}"]`}class Jr{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((l,g)=>l||this.findTarget(g)||this.findLegacyTarget(g),void 0)}findAll(...t){return t.reduce((l,g)=>[...l,...this.findAllTargets(g),...this.findAllLegacyTargets(g)],[])}findTarget(t){const l=this.getSelectorForTargetName(t);return this.scope.findElement(l)}findAllTargets(t){const l=this.getSelectorForTargetName(t);return this.scope.findAllElements(l)}getSelectorForTargetName(t){const l=this.schema.targetAttributeForScope(this.identifier);return De(l,t)}findLegacyTarget(t){const l=this.getLegacySelectorForTargetName(t);return this.deprecate(this.scope.findElement(l),t)}findAllLegacyTargets(t){const l=this.getLegacySelectorForTargetName(t);return this.scope.findAllElements(l).map(g=>this.deprecate(g,t))}getLegacySelectorForTargetName(t){const l=`${this.identifier}.${t}`;return De(this.schema.targetAttribute,l)}deprecate(t,l){if(t){const{identifier:g}=this,v=this.schema.targetAttribute,X=this.schema.targetAttributeForScope(g);this.guide.warn(t,`target:${l}`,`Please replace ${v}="${g}.${l}" with ${X}="${l}". The ${v} attribute is deprecated and will be removed in a future version of Stimulus.`)}return t}get guide(){return this.scope.guide}}class Zr{constructor(t,l){this.scope=t,this.controllerElement=l}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((l,g)=>l||this.findOutlet(g),void 0)}findAll(...t){return t.reduce((l,g)=>[...l,...this.findAllOutlets(g)],[])}getSelectorForOutletName(t){const l=this.schema.outletAttributeForScope(this.identifier,t);return this.controllerElement.getAttribute(l)}findOutlet(t){const l=this.getSelectorForOutletName(t);if(l)return this.findElement(l,t)}findAllOutlets(t){const l=this.getSelectorForOutletName(t);return l?this.findAllElements(l,t):[]}findElement(t,l){return this.scope.queryElements(t).filter(v=>this.matchesElement(v,t,l))[0]}findAllElements(t,l){return this.scope.queryElements(t).filter(v=>this.matchesElement(v,t,l))}matchesElement(t,l,g){const v=t.getAttribute(this.scope.schema.controllerAttribute)||"";return t.matches(l)&&v.split(" ").includes(g)}}class Pe{constructor(t,l,g,v){this.targets=new Jr(this),this.classes=new Yr(this),this.data=new Xr(this),this.containsElement=X=>X.closest(this.controllerSelector)===this.element,this.schema=t,this.element=l,this.identifier=g,this.guide=new Wr(v),this.outlets=new Zr(this.documentScope,l)}findElement(t){return this.element.matches(t)?this.element:this.queryElements(t).find(this.containsElement)}findAllElements(t){return[...this.element.matches(t)?[this.element]:[],...this.queryElements(t).filter(this.containsElement)]}queryElements(t){return Array.from(this.element.querySelectorAll(t))}get controllerSelector(){return De(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new Pe(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class Qr{constructor(t,l,g){this.element=t,this.schema=l,this.delegate=g,this.valueListObserver=new tr(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(t){const{element:l,content:g}=t;return this.parseValueForElementAndIdentifier(l,g)}parseValueForElementAndIdentifier(t,l){const g=this.fetchScopesByIdentifierForElement(t);let v=g.get(l);return v||(v=this.delegate.createScopeForElementAndIdentifier(t,l),g.set(l,v)),v}elementMatchedValue(t,l){const g=(this.scopeReferenceCounts.get(l)||0)+1;this.scopeReferenceCounts.set(l,g),g==1&&this.delegate.scopeConnected(l)}elementUnmatchedValue(t,l){const g=this.scopeReferenceCounts.get(l);g&&(this.scopeReferenceCounts.set(l,g-1),g==1&&this.delegate.scopeDisconnected(l))}fetchScopesByIdentifierForElement(t){let l=this.scopesByIdentifierByElement.get(t);return l||(l=new Map,this.scopesByIdentifierByElement.set(t,l)),l}}class Or{constructor(t){this.application=t,this.scopeObserver=new Qr(this.element,this.schema,this),this.scopesByIdentifier=new ze,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((t,l)=>t.concat(l.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(t){this.unloadIdentifier(t.identifier);const l=new Gr(this.application,t);this.connectModule(l);const g=t.controllerConstructor.afterLoad;g&&g.call(t.controllerConstructor,t.identifier,this.application)}unloadIdentifier(t){const l=this.modulesByIdentifier.get(t);l&&this.disconnectModule(l)}getContextForElementAndIdentifier(t,l){const g=this.modulesByIdentifier.get(l);if(g)return g.contexts.find(v=>v.element==t)}proposeToConnectScopeForElementAndIdentifier(t,l){const g=this.scopeObserver.parseValueForElementAndIdentifier(t,l);g?this.scopeObserver.elementMatchedValue(g.element,g):console.error(`Couldn't find or create scope for identifier: "${l}" and element:`,t)}handleError(t,l,g){this.application.handleError(t,l,g)}createScopeForElementAndIdentifier(t,l){return new Pe(this.schema,t,l,this.logger)}scopeConnected(t){this.scopesByIdentifier.add(t.identifier,t);const l=this.modulesByIdentifier.get(t.identifier);l&&l.connectContextForScope(t)}scopeDisconnected(t){this.scopesByIdentifier.delete(t.identifier,t);const l=this.modulesByIdentifier.get(t.identifier);l&&l.disconnectContextForScope(t)}connectModule(t){this.modulesByIdentifier.set(t.identifier,t),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(g=>t.connectContextForScope(g))}disconnectModule(t){this.modulesByIdentifier.delete(t.identifier),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(g=>t.disconnectContextForScope(g))}}const et={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:e=>`data-${e}-target`,outletAttributeForScope:(e,t)=>`data-${e}-${t}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},He("abcdefghijklmnopqrstuvwxyz".split("").map(e=>[e,e]))),He("0123456789".split("").map(e=>[e,e])))};function He(e){return e.reduce((t,[l,g])=>Object.assign(Object.assign({},t),{[l]:g}),{})}class rt{constructor(t=document.documentElement,l=et){this.logger=console,this.debug=!1,this.logDebugActivity=(g,v,X={})=>{this.debug&&this.logFormattedMessage(g,v,X)},this.element=t,this.schema=l,this.dispatcher=new lr(this),this.router=new Or(this),this.actionDescriptorFilters=Object.assign({},fr)}static start(t,l){const g=new this(t,l);return g.start(),g}async start(){await tt(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(t,l){this.load({identifier:t,controllerConstructor:l})}registerActionOption(t,l){this.actionDescriptorFilters[t]=l}load(t,...l){(Array.isArray(t)?t:[t,...l]).forEach(v=>{v.controllerConstructor.shouldLoad&&this.router.loadDefinition(v)})}unload(t,...l){(Array.isArray(t)?t:[t,...l]).forEach(v=>this.router.unloadIdentifier(v))}get controllers(){return this.router.contexts.map(t=>t.controller)}getControllerForElementAndIdentifier(t,l){const g=this.router.getContextForElementAndIdentifier(t,l);return g?g.controller:null}handleError(t,l,g){var v;this.logger.error(`%s

%o

%o`,l,t,g),(v=window.onerror)===null||v===void 0||v.call(window,l,"",0,0,t)}logFormattedMessage(t,l,g={}){g=Object.assign({application:this},g),this.logger.groupCollapsed(`${t} #${l}`),this.logger.log("details:",Object.assign({},g)),this.logger.groupEnd()}}function tt(){return new Promise(e=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>e()):e()})}function nt(e){return Me(e,"classes").reduce((l,g)=>Object.assign(l,it(g)),{})}function it(e){return{[`${e}Class`]:{get(){const{classes:t}=this;if(t.has(e))return t.get(e);{const l=t.getAttributeName(e);throw new Error(`Missing attribute "${l}"`)}}},[`${e}Classes`]:{get(){return this.classes.getAll(e)}},[`has${Se(e)}Class`]:{get(){return this.classes.has(e)}}}}function st(e){return Me(e,"outlets").reduce((l,g)=>Object.assign(l,$t(g)),{})}function Ge(e,t,l){return e.application.getControllerForElementAndIdentifier(t,l)}function Ye(e,t,l){let g=Ge(e,t,l);if(g||(e.application.router.proposeToConnectScopeForElementAndIdentifier(t,l),g=Ge(e,t,l),g))return g}function $t(e){const t=Fe(e);return{[`${t}Outlet`]:{get(){const l=this.outlets.find(e),g=this.outlets.getSelectorForOutletName(e);if(l){const v=Ye(this,l,e);if(v)return v;throw new Error(`The provided outlet element is missing an outlet controller "${e}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${e}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${g}".`)}},[`${t}Outlets`]:{get(){const l=this.outlets.findAll(e);return l.length>0?l.map(g=>{const v=Ye(this,g,e);if(v)return v;console.warn(`The provided outlet element is missing an outlet controller "${e}" instance for host controller "${this.identifier}"`,g)}).filter(g=>g):[]}},[`${t}OutletElement`]:{get(){const l=this.outlets.find(e),g=this.outlets.getSelectorForOutletName(e);if(l)return l;throw new Error(`Missing outlet element "${e}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${g}".`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(e)}},[`has${Se(t)}Outlet`]:{get(){return this.outlets.has(e)}}}}function at(e){return Me(e,"targets").reduce((l,g)=>Object.assign(l,ot(g)),{})}function ot(e){return{[`${e}Target`]:{get(){const t=this.targets.find(e);if(t)return t;throw new Error(`Missing target element "${e}" for "${this.identifier}" controller`)}},[`${e}Targets`]:{get(){return this.targets.findAll(e)}},[`has${Se(e)}Target`]:{get(){return this.targets.has(e)}}}}function ut(e){const t=Tr(e,"values"),l={valueDescriptorMap:{get(){return t.reduce((g,v)=>{const X=ir(v,this.identifier),Y=this.data.getAttributeNameForKey(X.key);return Object.assign(g,{[Y]:X})},{})}}};return t.reduce((g,v)=>Object.assign(g,lt(v)),l)}function lt(e,t){const l=ir(e,t),{key:g,name:v,reader:X,writer:Y}=l;return{[v]:{get(){const z=this.data.get(g);return z!==null?X(z):l.defaultValue},set(z){z===void 0?this.data.delete(g):this.data.set(g,Y(z))}},[`has${Se(v)}`]:{get(){return this.data.has(g)||l.hasCustomDefaultValue}}}}function ir([e,t],l){return dt({controller:l,token:e,typeDefinition:t})}function Ce(e){switch(e){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Ie(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(e))return"array";if(Object.prototype.toString.call(e)==="[object Object]")return"object"}function ft(e){const{controller:t,token:l,typeObject:g}=e,v=je(g.type),X=je(g.default),Y=v&&X,z=v&&!X,H=!v&&X,p=Ce(g.type),U=Ie(e.typeObject.default);if(z)return p;if(H)return U;if(p!==U){const $e=t?`${t}.${l}`:l;throw new Error(`The specified default value for the Stimulus Value "${$e}" must match the defined type "${p}". The provided default value of "${g.default}" is of type "${U}".`)}if(Y)return p}function ct(e){const{controller:t,token:l,typeDefinition:g}=e,X=ft({controller:t,token:l,typeObject:g}),Y=Ie(g),z=Ce(g),H=X||Y||z;if(H)return H;const p=t?`${t}.${g}`:l;throw new Error(`Unknown value type "${p}" for "${l}" value`)}function _t(e){const t=Ce(e);if(t)return Xe[t];const l=Re(e,"default"),g=Re(e,"type"),v=e;if(l)return v.default;if(g){const{type:X}=v,Y=Ce(X);if(Y)return Xe[Y]}return e}function dt(e){const{token:t,typeDefinition:l}=e,g=`${Ze(t)}-value`,v=ct(e);return{type:v,key:g,name:Be(g),get defaultValue(){return _t(l)},get hasCustomDefaultValue(){return Ie(l)!==void 0},reader:ht[v],writer:We[v]||We.default}}const Xe={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},ht={array(e){const t=JSON.parse(e);if(!Array.isArray(t))throw new TypeError(`expected value of type "array" but instead got value "${e}" of type "${Ie(t)}"`);return t},boolean(e){return!(e=="0"||String(e).toLowerCase()=="false")},number(e){return Number(e.replace(/_/g,""))},object(e){const t=JSON.parse(e);if(t===null||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected value of type "object" but instead got value "${e}" of type "${Ie(t)}"`);return t},string(e){return e}},We={default:gt,array:Je,object:Je};function Je(e){return JSON.stringify(e)}function gt(e){return`${e}`}class Ne{constructor(t){this.context=t}static get shouldLoad(){return!0}static afterLoad(t,l){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:l=this.element,detail:g={},prefix:v=this.identifier,bubbles:X=!0,cancelable:Y=!0}={}){const z=v?`${v}:${t}`:t,H=new CustomEvent(z,{detail:g,bubbles:X,cancelable:Y});return l.dispatchEvent(H),H}}Ne.blessings=[nt,at,ut,st];Ne.targets=[];Ne.outlets=[];Ne.values={};window.Controller=Ne;window.Stimulus=rt.start();window.application=window.Stimulus;console.log("Stimulus globals set up, loading Opal controllers...");ar(()=>import("./application-CNriAXDP.js"),[]).then(()=>{console.log(" Stimulus application started with Opal controllers!")}).catch(e=>{console.error("Failed to load Opal controllers:",e)});
