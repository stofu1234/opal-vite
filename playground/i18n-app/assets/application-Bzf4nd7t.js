Opal.modules.native=function(e){var x=e.hash_put,q=e.module,j=e.defs,S=e.slice,re=e.truthy,J=e.send,T=e.Kernel,Z=e.extract_kwargs,g=e.ensure_kwargs,U=e.hash_get,$e=e.range,W=e.to_a,H=e.def,ee=e.return_ivar,C=e.alias,b=e.klass,y=e.rb_minus,L=e.return_val,G=e.send2,A=e.find_super,B=e.eqeqeq,m=e.rb_ge,z=e.return_self,F=e.gvars,k=e.top,E=[],o=e.$r(E),d=e.nil,I=e.$$$;return e.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(h,l){var c=q(h,"Native"),X=[c].concat(l),w=e.$r(X);return j(c,"$is_a?",function(a,$){var n=this;try{return a instanceof n.$try_convert($)}catch{return!1}}),j(c,"$try_convert",function(a,$){var n=this;return $==null&&($=d),n["$native?"](a)?a:a["$respond_to?"]("to_n")?a.$to_n():$},-2),j(c,"$convert",function(a){var $=this;if($["$native?"](a))return a;if(a["$respond_to?"]("to_n"))return a.$to_n();$.$raise(w("ArgumentError"),""+a.$inspect()+" isn't native")}),j(c,"$call",function i(a,$,n){var t=i.$$p||d,r,s,u=this;i.$$p=null,r=S(arguments,2),s=r;var f=a[$];if(f instanceof Function){for(var p=new Array(s.length),M=0,D=s.length;M<D;M++){var R=s[M],V=u.$try_convert(R);p[M]=V===d?R:V}return t!==d&&p.push(t),u.$Native(f.apply(a,p))}else return u.$Native(f)},-3),j(c,"$proc",function i(){var a=i.$$p||d,$=this;return i.$$p=null,re(a)||$.$raise(w("LocalJumpError"),"no block given"),J(T,"proc",[],function n(t){var r,s,u=n.$$s==null?this:n.$$s,f=d;if(r=S(arguments),s=r,J(s,"map!",[],function M(D){var R=M.$$s==null?this:M.$$s;return D==null&&(D=d),R.$Native(D)},{$$s:u}),f=u.$Native(this),this===e.global)return a.apply(u,s);var p=a.$$s;a.$$s=null;try{return a.apply(f,s)}finally{a.$$s=p}},{$$arity:-1,$$s:$})}),function(i,a){var $=q(i,"Helpers"),n=[$].concat(a),t=e.$r(n);return H($,"$alias_native",function r(s,u,f){var p,M,D,R;r.$$p;var V=this;return r.$$p=null,p=S(arguments,1),M=Z(p),M=g(M),p.length>0&&(D=p.shift()),D==null&&(D=s),R=U(M,"as"),R==null&&(R=d),re(D["$end_with?"]("="))?J(V,"define_method",[s],function O(ae){var le=O.$$s==null?this:O.$$s;return le.native==null&&(le.native=d),ae==null&&(ae=d),le.native[D["$[]"]($e(0,-2,!1))]=t("Native").$convert(ae),ae},{$$s:V}):re(R)?J(V,"define_method",[s],function O(ae){var le=O.$$p||d,_e,de,ge=O.$$s==null?this:O.$$s,ve=d;return ge.native==null&&(ge.native=d),O.$$p=null,_e=S(arguments),de=_e,ve=J(t("Native"),"call",[ge.native,D].concat(W(de)),le.$to_proc()),re(ve)?R.$new(ve.$to_n()):d},{$$arity:-1,$$s:V}):J(V,"define_method",[s],function O(ae){var le=O.$$p||d,_e,de,ge=O.$$s==null?this:O.$$s;return ge.native==null&&(ge.native=d),O.$$p=null,_e=S(arguments),de=_e,J(t("Native"),"call",[ge.native,D].concat(W(de)),le.$to_proc())},{$$arity:-1,$$s:V})},-2),H($,"$native_reader",function(s){var u,f,p=this;return u=S(arguments),f=u,J(f,"each",[],function M(D){var R=M.$$s==null?this:M.$$s;return D==null&&(D=d),J(R,"define_method",[D],function V(){var O=V.$$s==null?this:V.$$s;return O.native==null&&(O.native=d),O.$Native(O.native[D])},{$$s:R})},{$$s:p})},-1),H($,"$native_writer",function(s){var u,f,p=this;return u=S(arguments),f=u,J(f,"each",[],function M(D){var R=M.$$s==null?this:M.$$s;return D==null&&(D=d),J(R,"define_method",[""+D+"="],function V(O){var ae=V.$$s==null?this:V.$$s;return ae.native==null&&(ae.native=d),O==null&&(O=d),ae.$Native(ae.native[D]=O)},{$$s:R})},{$$s:p})},-1),H($,"$native_accessor",function(s){var u,f,p=this;return u=S(arguments),f=u,J(p,"native_reader",W(f)),J(p,"native_writer",W(f))},-1)}(X[0],X),function(i,a){var $=q(i,"Wrapper"),n=[$].concat(a),t=e.$r(n);return H($,"$initialize",function(s){var u=this;return re(T["$native?"](s))||T.$raise(t("ArgumentError"),""+s.$inspect()+" isn't native"),u.native=s}),H($,"$to_n",ee("native")),j($,"$included",function(s){return s.$extend(t("Helpers"))})}(X[0],X),j(c,"$included",function(a){var $=this;return $.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),a.$include(w("Wrapper"))})}(E[0],E),function(h,l){var c=q(h,"Kernel"),X=[c].concat(l),w=e.$r(X);return H(c,"$native?",function(a){return a==null||!a.$$class}),H(c,"$Native",function i(a){i.$$p;var $=this;return i.$$p=null,re(a==null)?d:re($["$native?"](a))?I(w("Native"),"Object").$new(a):re(a["$is_a?"](w("Array")))?J(a,"map",[],function n(t){var r=n.$$s==null?this:n.$$s;return t==null&&(t=d),r.$Native(t)},{$$s:$}):re(a["$is_a?"](w("Proc")))?J($,"proc",[],function n(t){var r=n.$$p||d,s,u,f=n.$$s==null?this:n.$$s;return n.$$p=null,s=S(arguments),u=s,f.$Native(J(a,"call",W(u),r.$to_proc()))},{$$arity:-1,$$s:$}):a}),C(c,"_Array","Array"),H(c,"$Array",function i(a,$){var n=i.$$p||d,t,r,s=this;return i.$$p=null,t=S(arguments,1),r=t,re(s["$native?"](a))?J(I(w("Native"),"Array"),"new",[a].concat(W(r)),n.$to_proc()).$to_a():s.$_Array(a)},-2)}(E[0],E),function(h,l){var c=b(h,l,"Object"),X=c.$$prototype;return X.native=d,c.$include(I(I("Native"),"Wrapper")),H(c,"$==",function(i){var a=this;return a.native===I("Native").$try_convert(i)}),H(c,"$has_key?",function(i){var a=this;return e.hasOwnProperty.call(a.native,i)}),H(c,"$each",function w(i){var a,$,n=w.$$p||d,t=this;if(w.$$p=null,a=S(arguments),$=a,n!==d){for(var r in t.native)e.yieldX(n,[r,t.native[r]]);return t}else return J(t,"method_missing",["each"].concat(W($)))},-1),H(c,"$[]",function(i){var a=this,$=a.native[i];return $ instanceof Function?$:I("Native").$call(a.native,i)}),H(c,"$[]=",function(i,a){var $=this,n=d;return n=I("Native").$try_convert(a),re(n===d)?$.native[i]=a:$.native[i]=n}),H(c,"$merge!",function(i){var a=this;i=I("Native").$convert(i);for(var $ in i)a.native[$]=i[$];return a}),H(c,"$respond_to?",function(i,a){var $=this;return a==null&&(a=!1),T.$instance_method("respond_to?").$bind($).$call(i,a)},-2),H(c,"$respond_to_missing?",function(i,a){var $=this;return e.hasOwnProperty.call($.native,i)},-2),H(c,"$method_missing",function w(i,a){var $=w.$$p||d,n,t,r,s=this;return w.$$p=null,n=S(arguments,1),t=n,i.charAt(i.length-1)==="="?(r=[i.$slice(0,y(i.$length(),1)),t["$[]"](0)],J(s,"[]=",r),r[r.length-1]):J(I("Native"),"call",[s.native,i].concat(W(t)),$.$to_proc())},-2),H(c,"$nil?",L(!1)),H(c,"$is_a?",function(i){var a=this;return e.is_a(a,i)}),H(c,"$instance_of?",function(i){var a=this;return a.$$class===i}),H(c,"$class",function(){var i=this;return i.$$class}),H(c,"$to_a",function w(i){var a=w.$$p||d,$=this;return w.$$p=null,i==null&&(i=new Map),J(I(I("Native"),"Array"),"new",[$.native,i],a.$to_proc()).$to_a()},-1),H(c,"$inspect",function(){var i=this;return"#<Native:"+String(i.native)+">"}),C(c,"include?","has_key?"),C(c,"key?","has_key?"),C(c,"kind_of?","is_a?"),C(c,"member?","has_key?")}(o("Native"),o("BasicObject")),function(h,l,c){var X=b(h,l,"Array"),w=[X].concat(c),i=e.$r(w),a=X.$$prototype;return a.named=a.native=a.get=a.block=a.set=a.length=d,X.$include(I(i("Native"),"Wrapper")),X.$include(i("Enumerable")),H(X,"$initialize",function $(n,t){var r=$.$$p||d,s=this,u=d;return $.$$p=null,t==null&&(t=new Map),G(s,A(s,"initialize",$,!1,!0),"initialize",[n],null),s.get=re(u=t["$[]"]("get"))?u:t["$[]"]("access"),s.named=t["$[]"]("named"),s.set=re(u=t["$[]"]("set"))?u:t["$[]"]("access"),s.length=re(u=t["$[]"]("length"))?u:"length",s.block=r,re(s.$length()==null)?s.$raise(i("ArgumentError"),"no length found on the array-like object"):d},-2),H(X,"$each",function $(){var n=$.$$p||d,t=this;if($.$$p=null,!re(n))return t.$enum_for("each");for(var r=0,s=t.$length();r<s;r++)e.yield1(n,t["$[]"](r));return t}),H(X,"$[]",function(n){var t=this,r=d,s=d;return r=B(i("String"),s=n)||B(i("Symbol"),s)?re(t.named)?t.native[t.named](n):t.native[n]:B(i("Integer"),s)?re(t.get)?t.native[t.get](n):t.native[n]:d,re(r)?re(t.block)?t.block.$call(r):t.$Native(r):d}),H(X,"$[]=",function(n,t){var r=this;return re(r.set)?r.native[r.set](n,i("Native").$convert(t)):r.native[n]=i("Native").$convert(t)}),H(X,"$last",function(n){var t=this,r=d,s=d;if(n==null&&(n=d),re(n)){for(r=y(t.$length(),1),s=[];re(m(r,0));)s["$<<"](t["$[]"](r)),r=y(r,1);return s}else return t["$[]"](y(t.$length(),1))},-1),H(X,"$length",function(){var n=this;return n.native[n.length]}),H(X,"$inspect",function(){var n=this;return n.$to_a().$inspect()}),C(X,"to_ary","to_a")}(o("Native"),null,E),function(h,l){var c=b(h,l,"Numeric");return H(c,"$to_n",function(){var w=this;return w.valueOf()})}(E[0],null),function(h,l){var c=b(h,l,"Proc");return H(c,"$to_n",z)}(E[0],null),function(h,l){var c=b(h,l,"String");return H(c,"$to_n",function(){var w=this;return w.valueOf()})}(E[0],null),function(h,l){var c=b(h,l,"Regexp");return H(c,"$to_n",function(){var w=this;return w.valueOf()})}(E[0],null),function(h,l){var c=b(h,l,"MatchData");return H(c,"$to_n",ee("matches"))}(E[0],null),function(h,l,c){var X=b(h,l,"Struct"),w=[X].concat(c),i=e.$r(w);return H(X,"$to_n",function(){var $=this,n=d;return n={},J($,"each_pair",[],function(r,s){return r==null&&(r=d),s==null&&(s=d),n[r]=i("Native").$try_convert(s,s)}),n})}(E[0],null,E),function(h,l,c){var X=b(h,l,"Array"),w=[X].concat(c),i=e.$r(w);return H(X,"$to_n",function(){for(var $=this,n=[],t=0,r=$.length;t<r;t++){var s=$[t];n.push(i("Native").$try_convert(s,s))}return n})}(E[0],null,E),function(h,l){var c=b(h,l,"Boolean");return H(c,"$to_n",function(){var w=this;return w.valueOf()})}(E[0],null),function(h,l){var c=b(h,l,"Time");return H(c,"$to_n",z)}(E[0],null),function(h,l){var c=b(h,l,"NilClass");return H(c,"$to_n",function(){return null})}(E[0],null),re(o("Hash")["$method_defined?"]("_initialize"))||function(h,l,c){var X=b(h,l,"Hash"),w=[X].concat(c),i=e.$r(w);C(X,"_initialize","initialize");function a($,n,t){t&&(t.constructor===void 0||t.constructor===Object||t instanceof Map)?x($,n,i("Hash").$new(t)):t&&t.$$is_array?(t=t.map(function(r){return r&&(r.constructor===void 0||r.constructor===Object||t instanceof Map)?i("Hash").$new(r):X.$Native(r)}),x($,n,t)):x($,n,X.$Native(t))}return H(X,"$initialize",function $(n){var t=$.$$p||d,r=this;if($.$$p=null,n!=null)if(n.constructor===void 0||n.constructor===Object){var s,u;for(s in n)u=n[s],a(r,s,u);return r}else n instanceof Map&&e.hash_each(n,!1,function(f,p){return a(r,f,p),[!1,!1]});return J(r,"_initialize",[n],t.$to_proc())},-1),H(X,"$to_n",function(){var n=this,t={};return e.hash_each(n,!1,function(r,s){return t[i("Native").$try_convert(r,r)]=i("Native").$try_convert(s,s),[!1,!1]}),t})}(E[0],null,E),function(h,l){var c=b(h,l,"Module");return H(c,"$native_module",function(){var w=this;return e.global[w.$name()]=w})}(E[0],null),function(h,l,c){var X=b(h,l,"Class"),w=[X].concat(c),i=e.$r(w);return H(X,"$native_alias",function($,n){var t=this,r=t.prototype[e.jsid(n)];r||t.$raise(i("NameError").$new("undefined method `"+n+"' for class `"+t.$inspect()+"'",n)),t.prototype[$]=r}),H(X,"$native_class",function(){var $=this;return $.$native_module(),$.new=$.$new})}(E[0],null,E),F.$=F.global=k.$Native(e.global)};(function(e){var x;if(typeof globalThis<"u"?e=globalThis:typeof global<"u"?e=global:typeof window<"u"&&(e=window),e.console==null&&(e.console={}),typeof e.console=="object"?x=e.console:x={},"log"in x||(x.log=function(){}),"warn"in x||(x.warn=x.log),typeof e.Opal<"u")return x.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),e.Opal;var q,j,S,re,J,T,Z,g=e.Opal={};g.global=e,g.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var U=Function.prototype.call,$e=Function.prototype.bind,W=Object.hasOwn||U.bind(Object.prototype.hasOwnProperty),H=Object.setPrototypeOf,ee=U.bind(Array.prototype.slice),C=U.bind(Array.prototype.splice),b=4,y=b;function L(){return y+=2,y}g.uid=L,g.id=function(_){return _.$$is_number?_*2+1:(_.$$id==null&&m(_,"$$id",L()),_.$$id)};var G=g.gvars={};g.exit=function(_){G.DEBUG&&x.log("Exited with status "+_)},g.exceptions=[],g.pop_exception=function(_){var v=g.exceptions.pop();v===_||(v?G["!"]=v:G["!"]=q)};function A(_,v){if(_||(_=g.Exception||Error),Z&&Z.$raise)arguments.length>2?Z.$raise(_.$new.apply(_,ee(arguments,1))):Z.$raise(_,v);else throw _.$new?_.$new(v):new _(v)}var B={value:void 0,enumerable:!1,configurable:!0,writable:!0};function m(_,v,K){typeof _=="string"?_[v]=K:(B.value=K,Object.defineProperty(_,v,B))}g.prop=m,g.defineProperty=g.prop,g.slice=ee;var z=g.truthy=function(_){return _!==!1&&q!==_&&_!==void 0&&_!==null&&(!(_ instanceof Boolean)||_.valueOf()===!0)};g.falsy=function(_){return!z(_)},g.type_error=function(_,v,K,te){_=_.$$class,te&&K?(te=te.$$class,A(g.TypeError,"can't convert "+_+" into "+v+" ("+_+"#"+K+" gives "+te+")")):A(g.TypeError,"no implicit conversion of "+_+" into "+v)},g.coerce_to=function(_,v,K,te){var ue;return K==="to_int"&&v===g.Integer&&_.$$is_number?_<0?Math.ceil(_):Math.floor(_):K==="to_str"&&v===g.String&&_.$$is_string||g.is_a(_,v)?_:_["$respond_to?"].$$pristine&&_.$method_missing.$$pristine?(ue=_[de(K)],(ue==null||ue.$$stub)&&g.type_error(_,v),ue.apply(_,te)):(_["$respond_to?"](K)||g.type_error(_,v),te==null&&(te=[]),g.send(_,K,te))},g.respond_to=function(_,v,K){if(_==null||!_.$$class)return!1;K=!!K;var te=_[v];if(_["$respond_to?"].$$pristine){if(typeof te=="function"&&!te.$$stub)return!0;if(!_["$respond_to_missing?"].$$pristine)return g.send(_,_["$respond_to_missing?"],[v.substr(1),K])}else return g.send(_,_["$respond_to?"],[v.substr(1),K])},g.trace_class=!1,g.tracers_for_class=[];function F(_){var v,K,te;for(v=0,K=g.tracers_for_class.length;v<K;v++)te=g.tracers_for_class[v],te.trace_object=_,te.block.$call(te)}function k(_,v){if(_.$$autoload[v].loaded){if(_.$$autoload[v].loaded&&!_.$$autoload[v].required&&_.$$autoload[v].exception)throw _.$$autoload[v].exception}else{_.$$autoload[v].loaded=!0;try{g.Kernel.$require(_.$$autoload[v].path)}catch(K){throw _.$$autoload[v].exception=K,K}if(_.$$autoload[v].required=!0,_.$$const[v]!=null)return _.$$autoload[v].success=!0,_.$$const[v]}}function E(_,v){if(_){if(_.$$const[v]!=null)return _.$$const[v];if(_.$$autoload&&_.$$autoload[v])return k(_,v)}}function o(_,v){var K,te,ue;if(_.length!==0)for(K=0,te=_.length;K<te;K++){if(ue=_[K].$$const[v],ue!=null)return ue;if(_[K].$$autoload&&_[K].$$autoload[v])return k(_[K],v)}}function d(_,v){var K,te,ue;if(_!=null)for(ue=V(_),K=0,te=ue.length;K<te;K++){if(ue[K].$$const&&W(ue[K].$$const,v))return ue[K].$$const[v];if(ue[K].$$autoload&&ue[K].$$autoload[v])return k(ue[K],v)}}function I(_,v){if(_==null||_.$$is_module)return d(S,v)}function h(_,v){return(_||S).$const_missing(v)}g.const_get_local=function(_,v,K){var te;if(_!=null)return _==="::"&&(_=S),!_.$$is_module&&!_.$$is_class&&A(g.TypeError,_.toString()+" is not a class/module"),te=E(_,v),te!=null||K?te:h(_,v)},g.const_get_qualified=function(_,v,K){var te,ue,ce,he=g.const_cache_version;if(v==null)return te=E(S,_),te??g.const_get_qualified(S,_,K);if(_!=null)return _==="::"&&(_=S),!_.$$is_module&&!_.$$is_class&&A(g.TypeError,_.toString()+" is not a class/module"),(ue=_.$$const_cache)==null&&(m(_,"$$const_cache",Object.create(null)),ue=_.$$const_cache),ce=ue[v],ce==null||ce[0]!==he?((te=E(_,v))!=null||(te=d(_,v))!=null,ue[v]=[he,te]):te=ce[1],te!=null||K?te:h(_,v)},g.const_cache_version=1,g.const_get_relative=function(_,v,K){var te=_[0],ue,ce=g.const_cache_version,he,pe;return(he=_.$$const_cache)==null&&(m(_,"$$const_cache",Object.create(null)),he=_.$$const_cache),pe=he[v],pe==null||pe[0]!==ce?((ue=E(te,v))!=null||(ue=o(_,v))!=null||(ue=d(te,v))!=null||(ue=I(te,v))!=null,he[v]=[ce,ue]):ue=pe[1],ue!=null||K?ue:h(te,v)};function l(_,v,K){var te=!0;return(_==null||_==="::")&&(_=S),K.$$is_a_module&&((K.$$name==null||K.$$name===q)&&(K.$$name=v),K.$$base_module==null&&(K.$$base_module=_)),_.$$const=_.$$const||Object.create(null),(v in _.$$const||"$$autoload"in _&&v in _.$$autoload)&&(te=!1),_.$$const[v]=K,_.$$=_.$$const,g.const_cache_version++,_===S&&(g[v]=K),m(_,v,K),te&&_.$const_added&&!_.$const_added.$$pristine&&_.$const_added(v),K}g.const_set=l,g.constants=function(_,v){v==null&&(v=!0);var K,te=[_],ue,ce,he={},pe;for(v&&(te=te.concat(V(_))),v&&_.$$is_module&&(te=te.concat([g.Object]).concat(V(g.Object))),ue=0,ce=te.length;ue<ce&&(K=te[ue],!(_!==S&&K==S));ue++){for(pe in K.$$const)he[pe]=!0;if(K.$$autoload)for(pe in K.$$autoload)he[pe]=!0}return Object.keys(he)},g.const_remove=function(_,v){if(g.const_cache_version++,_.$$const[v]!=null){var K=_.$$const[v];return delete _.$$const[v],K}if(_.$$autoload&&_.$$autoload[v])return delete _.$$autoload[v],q;A(g.NameError,"constant "+_+"::"+_.$name()+" not defined")},g.const_get_relative_factory=function(_){return function(v,K){return g.$$(_,v,K)}},g.$$=g.const_get_relative,g.$$$=g.const_get_qualified,g.$r=g.const_get_relative_factory;function c(_){return _==null?!1:_.$$bridge?_:_.$$super?c(_.$$super):!1}function X(_,v,K){var te,ue;if((ue=c(v))?te=function(){var ye=new($e.apply(ue.$$constructor,ge(null,arguments)));return H(ye,te.$$prototype),ye}:te=function(){},_&&_!==q&&m(te,"displayName","::"+_),m(te,"$$name",_),m(te,"$$constructor",te),m(te,"$$prototype",te.prototype),m(te,"$$const",{}),m(te,"$$is_class",!0),m(te,"$$is_a_module",!0),m(te,"$$super",v),m(te,"$$cvars",{}),m(te,"$$own_included_modules",[]),m(te,"$$own_prepended_modules",[]),m(te,"$$ancestors",[]),m(te,"$$ancestors_cache_version",null),m(te,"$$subclasses",[]),m(te,"$$cloned_from",[]),m(te.$$prototype,"$$class",te),g.Class&&H(te,g.Class.prototype),v!=null){if(H(te.$$prototype,v.$$prototype),K!==!0)if(typeof WeakRef<"u"){var ce,he,pe=[];for(ce=0;ce<v.$$subclasses.length;ce++)he=v.$$subclasses[ce],he.deref()!==void 0&&pe.push(he);pe.push(new WeakRef(te)),v.$$subclasses=pe}else v.$$subclasses.push(te);v.$$meta&&g.build_class_singleton_class(te)}return te}g.allocate_class=X;function w(_,v){var K=E(_,v);if(K)return K.$$is_class||A(g.TypeError,v+" is not a class"),K}function i(_,v){_.$$super!==v&&A(g.TypeError,"superclass mismatch for class "+_.$$name)}g.klass=function(_,v,K){var te;_==null||_=="::"?_=S:!_.$$is_class&&!_.$$is_module&&(_=_.$$class),v!=null&&(!v.hasOwnProperty||v.hasOwnProperty&&!v.hasOwnProperty("$$is_class"))&&(v.constructor&&v.constructor.name=="Function"?(te=v,v=S):A(g.TypeError,"superclass must be a Class ("+(v.constructor&&(v.constructor.name||v.constructor.$$name)||typeof v)+" given)"));var ue=w(_,K);return ue!=null?v&&i(ue,v):(v==null&&(v=S),ue=X(K,v),l(_,K,ue),v.$inherited&&v.$inherited(ue),te&&g.bridge(te,ue)),g.trace_class&&F(ue),ue};function a(_){var v=function(){},K=v;return _&&m(v,"displayName",_+".constructor"),m(K,"$$name",_),m(K,"$$prototype",v.prototype),m(K,"$$const",{}),m(K,"$$is_module",!0),m(K,"$$is_a_module",!0),m(K,"$$cvars",{}),m(K,"$$iclasses",[]),m(K,"$$own_included_modules",[]),m(K,"$$own_prepended_modules",[]),m(K,"$$ancestors",[K]),m(K,"$$ancestors_cache_version",null),m(K,"$$cloned_from",[]),H(K,g.Module.prototype),K}g.allocate_module=a;function $(_,v){var K=E(_,v);return K==null&&_===S&&(K=d(S,v)),K&&!K.$$is_module&&K!==S&&A(g.TypeError,v+" is not a module"),K}g.module=function(_,v){var K;return _==null||_=="::"?_=S:!_.$$is_class&&!_.$$is_module&&(_=_.$$class),K=$(_,v),K==null&&(K=a(v),l(_,v,K)),g.trace_class&&F(K),K},g.get_singleton_class=function(_){return _.$$is_number&&A(g.TypeError,"can't define singleton"),_.$$meta?_.$$meta:_.hasOwnProperty("$$is_class")?g.build_class_singleton_class(_):_.hasOwnProperty("$$is_module")?g.build_module_singleton_class(_):g.build_object_singleton_class(_)};function n(_,v){_.hasOwnProperty("$$meta")?_.$$meta=v:m(_,"$$meta",v),_.$$frozen?_.$$meta.$freeze():H(_,v.$$prototype)}g.build_class_singleton_class=function(_){if(_.$$meta)return _.$$meta;var v=_===j?J:g.get_singleton_class(_.$$super),K=X(null,v,!0);return m(K,"$$is_singleton",!0),m(K,"$$singleton_of",_),n(_,K),m(_,"$$class",g.Class),K},g.build_module_singleton_class=function(_){if(_.$$meta)return _.$$meta;var v=X(null,g.Module,!0);return m(v,"$$is_singleton",!0),m(v,"$$singleton_of",_),n(_,v),m(_,"$$class",g.Module),v},g.build_object_singleton_class=function(_){var v=_.$$class,K=X(q,v,!0);return m(K,"$$is_singleton",!0),m(K,"$$singleton_of",_),delete K.$$prototype.$$class,n(_,K),K},g.is_method=function(_){return _[0]==="$"&&_[1]!=="$"},g.instance_methods=function(_){for(var v=Object.create(null),K=[],te=V(_),ue=0,ce=te.length;ue<ce;ue++){var he=te[ue],pe=he.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ze=ye.length;we<ze;we++){var Ee=ye[we];if(!v[Ee]){if(g.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);K.push(qe)}}v[Ee]=!0}}}return K},g.own_instance_methods=function(_){var v=[],K=_.$$prototype;K.hasOwnProperty("$$dummy")&&(K=K.$$define_methods_on);for(var te=Object.getOwnPropertyNames(K),ue=0,ce=te.length;ue<ce;ue++){var he=te[ue];if(g.is_method(he)){var pe=K[he];if(!pe.$$stub){var ye=he.slice(1);v.push(ye)}}}return v},g.methods=function(_){return g.instance_methods(_.$$meta||_.$$class)},g.own_methods=function(_){return _.$$meta?g.own_instance_methods(_.$$meta):[]},g.receiver_methods=function(_){var v=g.get_singleton_class(_),K=g.own_instance_methods(v),te=g.own_instance_methods(v.$$super);return K.concat(te)},g.class_variables=function(_){var v=V(_),K,te=v.length,ue={};for(K=te-1;K>=0;K--){var ce=v[K];for(var he in ce.$$cvars)ue[he]=ce.$$cvars[he]}return ue},g.class_variable_set=function(_,v,K){var te=V(_),ue,ce=te.length;for(ue=ce-2;ue>=0;ue--){var he=te[ue];if(W(he.$$cvars,v))return he.$$cvars[v]=K,K}return _.$$cvars[v]=K,K},g.class_variable_get=function(_,v,K){if(W(_.$$cvars,v))return _.$$cvars[v];var te=V(_),ue,ce=te.length;for(ue=0;ue<ce;ue++){var he=te[ue];if(W(he.$$cvars,v))return he.$$cvars[v]}return K||A(g.NameError,"uninitialized class variable "+v+" in "+_.$name()),q};function t(_){return _.hasOwnProperty("$$iclass")&&_.hasOwnProperty("$$root")}function r(_){for(var v=[],K,te=Object.getPrototypeOf(_.$$prototype);te&&!te.hasOwnProperty("$$class");)K=D(te),K&&v.push(K),te=Object.getPrototypeOf(te);return v}function s(_){var v=[],K,te=Object.getPrototypeOf(_.$$prototype);if(_.$$prototype.hasOwnProperty("$$dummy"))for(;te&&te!==_.$$prototype.$$define_methods_on;)K=D(te),K&&v.push(K),te=Object.getPrototypeOf(te);return v}g.append_features=function(_,v){var K=V(_),te=[];K.indexOf(v)!==-1&&A(g.ArgumentError,"cyclic include detected");for(var ue=0,ce=K.length;ue<ce;ue++){var he=K[ue],pe=f(he);m(pe,"$$included",!0),te.push(pe)}var ye=V(v),we=M(te),ze,Ee;if(ye.indexOf(_)===-1)ze=v.$$prototype,Ee=Object.getPrototypeOf(v.$$prototype);else{for(var xe=v.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===_&&t(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var Ae=Object.getPrototypeOf(qe);Ae.hasOwnProperty("$$iclass")&&!t(Ae);)Ae=Object.getPrototypeOf(Ae);ze=xe,Ee=Ae}else ze=v.$$prototype,Ee=Object.getPrototypeOf(v.$$prototype)}H(ze,we.first),H(we.last,Ee),v.$$own_included_modules=r(v),g.const_cache_version++},g.prepend_features=function(_,v){var K=V(_),te=[];K.indexOf(v)!==-1&&A(g.ArgumentError,"cyclic prepend detected");for(var ue=0,ce=K.length;ue<ce;ue++){var he=K[ue],pe=f(he);m(pe,"$$prepended",!0),te.push(pe)}var ye=M(te),we=v.$$prototype,ze=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=p(v),u(v),m(we,"$$dummy",!0),m(we,"$$define_methods_on",Ee),H(we,Ee),H(Ee,ze));var Ae=V(v);if(Ae.indexOf(_)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else A(g.RuntimeError,"Prepending a module multiple times is not supported");H(xe,ye.first),H(ye.last,qe),v.$$own_prepended_modules=s(v),g.const_cache_version++};function u(_){for(var v=_.$$prototype,K=Object.getOwnPropertyNames(v),te=0;te<K.length;te++){var ue=K[te];g.is_method(ue)&&delete v[ue]}}function f(_){var v=p(_);return _.$$is_module&&_.$$iclasses.push(v),v}function p(_){var v={},K=_.$$prototype;K.hasOwnProperty("$$dummy")&&(K=K.$$define_methods_on);var te=Object.getOwnPropertyNames(K),ue=te.length,ce;for(ce=0;ce<ue;ce++){var he=te[ce];m(v,he,K[he])}return m(v,"$$iclass",!0),m(v,"$$module",_),v}function M(_){var v=_.length,K=_[0];if(m(K,"$$root",!0),v===1)return{first:K,last:K};for(var te=K,ue=1;ue<v;ue++){var ce=_[ue];H(te,ce),te=ce}return{first:_[0],last:_[v-1]}}g.bridge=function(_,v){_.hasOwnProperty("$$bridge")&&A(g.ArgumentError,"already bridged"),m(_,"$$bridge",v),H(_.prototype,(v.$$super||g.Object).$$prototype),m(v,"$$prototype",_.prototype),m(v.$$prototype,"$$class",v),m(v,"$$constructor",_),m(v,"$$bridge",!0)};function D(_){if(!_.hasOwnProperty("$$dummy")){if(_.hasOwnProperty("$$iclass"))return _.$$module;if(_.hasOwnProperty("$$class"))return _.$$class}}function R(_){return _.$$own_prepended_modules.concat([_]).concat(_.$$own_included_modules)}function V(_){if(!_)return[];if(_.$$ancestors_cache_version===g.const_cache_version)return _.$$ancestors;var v=[],K,te,ue;for(K=0,te=R(_),ue=te.length;K<ue;K++)v.push(te[K]);if(_.$$super)for(K=0,te=V(_.$$super),ue=te.length;K<ue;K++)v.push(te[K]);return _.$$ancestors_cache_version=g.const_cache_version,_.$$ancestors=v,v}g.ancestors=V,g.included_modules=function(_){for(var v=[],K=null,te=Object.getPrototypeOf(_.$$prototype);te&&Object.getPrototypeOf(te);te=Object.getPrototypeOf(te))K=D(te),K&&K.$$is_module&&te.$$iclass&&te.$$included&&v.push(K);return v},g.add_stubs=function(_){var v=g.BasicObject.$$prototype,K,te;_=_.split(",");for(var ue=0,ce=_.length;ue<ce;ue++)K=de(_[ue]),te=v[K],(te==null||te.$$stub)&&g.add_stub_for(v,K)},g.add_stub_for=function(_,v){m(_,v,g.stub_for(v))},g.stub_for=function(_){function v(){return this.$method_missing.$$p=v.$$p,v.$$p=null,this.$method_missing.apply(this,ge(_.slice(1),arguments))}return v.$$stub=!0,v},g.ac=function(_,v,K,te){var ue="";K.$$is_a_module?ue+=K.$$name+".":ue+=K.$$class.$$name+"#",ue+=te,A(g.ArgumentError,"["+ue+"] wrong number of arguments (given "+_+", expected "+v+")")},g.block_ac=function(_,v,K){var te="`block in "+K+"'";A(g.ArgumentError,te+": wrong number of arguments (given "+_+", expected "+v+")")};function O(_){return _.hasOwnProperty("$$meta")&&_.$$meta!==null?V(_.$$meta):V(_.$$class)}g.find_super=function(_,v,K,te,ue){var ce=de(v),he,pe,ye,we,ze=-1,Ee;for(he=O(_),we=K.$$owner,Ee=0;Ee<he.length;Ee++)if(pe=he[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ze=Ee;break}for(Ee=ze+1;Ee<he.length;Ee++){pe=he[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(ce)){ye=xe[ce];break}}return!te&&ye&&ye.$$stub&&_.$method_missing.$$pristine&&A(g.NoMethodError,"super: no superclass method `"+v+"' for "+_,v),ye.$$stub&&!ue?null:ye},g.find_block_super=function(_,v,K,te,ue){var ce=v;return K||A(g.RuntimeError,"super called outside of method"),ue&&K.$$define_meth&&A(g.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),K.$$def&&(ce=K.$$jsid),g.find_super(_,ce,K,te)},g.find_super_dispatcher=g.find_super,g.find_iter_super_dispatcher=g.find_block_super;function ae(_,v,K){try{_(v)}catch(te){if(te===K)return K.$v;throw te}}g.yield1=function(_,v){typeof _!="function"&&A(g.LocalJumpError,"no block given");var K=_.$$has_top_level_mlhs_arg,te=_.$$has_trailing_comma_in_args,ue=_.$$is_lambda&&_.$$ret;return(_.length>1||(K||te)&&_.length===1)&&(v=g.to_ary(v)),(_.length>1||te&&_.length===1)&&v.$$is_array?ue?ae(_.apply.bind(_,null),v,_.$$ret):_.apply(null,v):ue?ae(_,v,_.$$ret):_(v)},g.yieldX=function(_,v){return typeof _!="function"&&A(g.LocalJumpError,"no block given"),_.length>1&&v.length===1&&v[0].$$is_array&&(v=v[0]),_.$$is_lambda&&_.$$ret?ae(_.apply.bind(_,null),v,_.$$ret):_.apply(null,v)},g.rescue=function(_,v){for(var K=0;K<v.length;K++){var te=v[K];if(te.$$is_array){var ue=g.rescue(_,te);if(ue)return ue}else if(te===g.JS.Error||te["$==="](_))return te}return null},g.is_a=function(_,v){if(v!=null&&_.$$meta===v||_.$$class===v)return!0;if(_.$$is_number&&v.$$is_number_class)return v.$$is_integer_class?_%1===0:!0;var K=V(_.$$is_class?g.get_singleton_class(_):_.$$meta||_.$$class);return K.indexOf(v)!==-1},g.to_hash=function(_){if(_.$$is_hash)return _;if(_["$respond_to?"]("to_hash",!0)){var v=_.$to_hash();if(v.$$is_hash)return v;A(g.TypeError,"Can't convert "+_.$$class+" to Hash ("+_.$$class+"#to_hash gives "+v.$$class+")")}else A(g.TypeError,"no implicit conversion of "+_.$$class+" into Hash")},g.to_ary=function(_){if(_.$$is_array)return _;if(_["$respond_to?"]("to_ary",!0)){var v=_.$to_ary();if(v===q)return[_];if(v.$$is_array)return v;A(g.TypeError,"Can't convert "+_.$$class+" to Array ("+_.$$class+"#to_ary gives "+v.$$class+")")}else return[_]},g.to_a=function(_){if(_.$$is_array)return _.slice();if(_["$respond_to?"]("to_a",!0)){var v=_.$to_a();if(v===q)return[_];if(v.$$is_array)return v;A(g.TypeError,"Can't convert "+_.$$class+" to Array ("+_.$$class+"#to_a gives "+v.$$class+")")}else return[_]},g.extract_kwargs=function(_){var v=_[_.length-1];if(v!=null&&g.respond_to(v,"$to_hash",!0))return C(_,_.length-1),v},g.kwrestargs=function(_,v){var K=new Map;return g.hash_each(_,!1,function(te,ue){return v[te]||g.hash_put(K,te,ue),[!1,!1]}),K};function le(_,v){typeof v=="number"?_.$$arity=v:typeof v=="object"&&Object.assign(_,v)}var _e=new Map;function de(_){var v=_e.get(_);return v||(v="$"+_,_e.set(_,v)),v}g.jsid=de;function ge(_,v){return v.$$is_array||(v=ee(v)),[_].concat(v)}g.send=function(_,v,K,te,ue){var ce;return typeof v=="function"?(ce=v,v=null):typeof v=="string"?ce=_[de(v)]:A(g.NameError,"Passed method should be a string or a function"),g.send2(_,ce,v,K,te,ue)},g.send2=function(_,v,K,te,ue,ce){return v==null&&K!=null&&_.$method_missing&&(v=_.$method_missing,te=ge(K,te)),le(ue,ce),typeof ue=="function"&&(v.$$p=ue),v.apply(_,te)},g.refined_send=function(_,v,K,te,ue,ce){var he,pe,ye,we,ze,Ee,xe,qe,Ae,ke;for(we=O(v),he=0;he<we.length;he++)for(ze=g.id(we[he]),pe=0;pe<_.length;pe++)for(Ee=_[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ze]>"u")&&(Ae=qe[ze],typeof Ae.$$prototype[de(K)]<"u")))return ke=Ae.$$prototype[de(K)],g.send2(v,ke,K,te,ue,ce);return g.send(v,K,te,ue,ce)},g.lambda=function(_,v){return _.$$is_lambda=!0,le(_,v),_},g.def=function(_,v,K,te){return le(K,te),_===g.top?g.defn(g.Object,v,K):!_.$$eval&&_.$$is_a_module?g.defn(_,v,K):g.defs(_,v,K)},g.defn=function(_,v,K){N(_),K.displayName=v,K.$$owner=_;var te=v.substr(1),ue=_.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),m(ue,v,K),_.$$is_module){_.$$module_function&&g.defs(_,v,K);for(var ce=0,he=_.$$iclasses,pe=he.length;ce<pe;ce++){var ye=he[ce];m(ye,v,K)}}var we=_.$$singleton_of;return _.$method_added&&!_.$method_added.$$stub&&!we?_.$method_added(te):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(te),te},g.defs=function(_,v,K,te){return le(K,te),(_.$$is_string||_.$$is_number)&&A(g.TypeError,"can't define singleton"),g.defn(g.get_singleton_class(_),v,K)};function ve(_,v){if(_.$$is_module)for(var K=0,te=_.$$iclasses,ue=te.length;K<ue;K++){var ce=te[K];delete ce[v]}}g.rdef=function(_,v){W(_.$$prototype,v)||A(g.NameError,"method '"+v.substr(1)+"' not defined in "+_.$name()),delete _.$$prototype[v],ve(_,v),_.$$is_singleton?_.$$prototype.$singleton_method_removed&&!_.$$prototype.$singleton_method_removed.$$stub&&_.$$prototype.$singleton_method_removed(v.substr(1)):_.$method_removed&&!_.$method_removed.$$stub&&_.$method_removed(v.substr(1))},g.udef=function(_,v){(!_.$$prototype[v]||_.$$prototype[v].$$stub)&&A(g.NameError,"method '"+v.substr(1)+"' not defined in "+_.$name()),g.add_stub_for(_.$$prototype,v),ve(_,v),_.$$is_singleton?_.$$prototype.$singleton_method_undefined&&!_.$$prototype.$singleton_method_undefined.$$stub&&_.$$prototype.$singleton_method_undefined(v.substr(1)):_.$method_undefined&&!_.$method_undefined.$$stub&&_.$method_undefined(v.substr(1))};function me(_){return typeof _=="function"&&!_.$$stub}g.alias=function(_,v,K){var te=de(v),ue=de(K),ce,he;if(typeof _.$$prototype>"u"&&(_=g.Object),ce=_.$$prototype[ue],_.$$eval)return g.alias(g.get_singleton_class(_),v,K);if(!me(ce)){for(var pe=_.$$super;typeof ce!="function"&&pe;)ce=pe[ue],pe=pe.$$super;!me(ce)&&_.$$is_module&&(ce=g.Object.$$prototype[ue]),me(ce)||A(g.NameError,"undefined method `"+K+"' for class `"+_.$name()+"'")}return ce.$$alias_of&&(ce=ce.$$alias_of),he=g.wrap_method_body(ce),he.displayName=v,he.$$alias_of=ce,he.$$alias_name=v,g.defn(_,te,he),_},g.wrap_method_body=function(_){var v=function(){var K=v.$$p;return v.$$p=null,g.send(this,_,arguments,K)};try{Object.defineProperty(v,"length",{value:_.length})}catch{}return v.$$arity=_.$$arity==null?_.length:_.$$arity,v.$$parameters=_.$$parameters,v.$$source_location=_.$$source_location,v},g.alias_gvar=function(_,v){return Object.defineProperty(G,_,{configurable:!0,enumerable:!0,get:function(){return G[v]},set:function(K){G[v]=K}}),q},g.alias_native=function(_,v,K){var te=de(v),ue=_.$$prototype[K];return(typeof ue!="function"||ue.$$stub)&&A(g.NameError,"undefined native method `"+K+"' for class `"+_.$name()+"'"),g.defn(_,te,ue),_},g.hash_init=function(_){x.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},g.hash_clone=function(_,v){return v.$$none=_.$$none,v.$$proc=_.$$proc,g.hash_each(_,v,function(K,te){return g.hash_put(v,K,te),[!1,v]})},g.hash_put=function(_,v,K){var te=typeof v;if(te==="string"||te==="symbol"||te==="number"||te==="boolean"||te==="bigint")_.set(v,K);else if(v.$$is_string)_.set(v.valueOf(),K);else{_.$$keys||(_.$$keys=new Map);var ue=v.$$is_string?v.valueOf():_.$$by_identity?g.id(v):v.$hash(),ce=_.$$keys;if(!ce.has(ue)){ce.set(ue,[v]),_.set(v,K);return}for(var he=ce.get(ue),pe,ye=0;ye<he.length;ye++)if(pe=he[ye],v===pe||v["$eql?"](pe)){_.set(pe,K);return}he.push(v),_.set(v,K)}},g.hash_get=function(_,v){var K=typeof v;if(K==="string"||K==="symbol"||K==="number"||K==="boolean"||K==="bigint")return _.get(v);if(_.$$keys){var te=v.$$is_string?v.valueOf():_.$$by_identity?g.id(v):v.$hash(),ue=_.$$keys.get(te),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],v===ce||v["$eql?"](ce))return _.get(ce)}else if(v.$$is_string)return _.get(te)}else if(v.$$is_string)return _.get(v.valueOf())};function be(_,v){var K=_.get(v);if(K!==void 0)return _.delete(v),K}g.hash_delete=function(_,v){var K=typeof v;if(K==="string"||K==="symbol"||K==="number"||K==="boolean"||K==="bigint")return be(_,v);if(_.$$keys){var te=v.$$is_string?v.valueOf():_.$$by_identity?g.id(v):v.$hash(),ue=_.$$keys.get(te),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],v===ce||v["$eql?"](ce))return ue.splice(he,1),ue.length===0&&_.$$keys.delete(te),be(_,ce)}else if(v.$$is_string)return be(_,te)}else if(v.$$is_string)return be(_,v.valueOf())},g.hash_rehash=function(_){var v=_.$$keys;return v&&v.clear(),g.hash_each(_,!1,function(K,te){var ue=typeof K;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var ce=K.$$is_string?K.valueOf():_.$$by_identity?g.id(K):K.$hash();if(v||(_.$$keys=v=new Map),!v.has(ce))return v.set(ce,[K]),[!1,!1];for(var he=v.get(ce),pe=he.length===1?he:ee(he),ye,we=0;we<pe.length;we++)ye=pe[we],(K===ye||K["$eql?"](ye))&&(he.splice(he.indexOf(ye),1),_.delete(ye));return he.push(K),[!1,!1]}),_},g.hash=function(){var _=arguments.length,v,K,te,ue,ce,he;if(_===1&&arguments[0].$$is_hash)return arguments[0];if(K=new Map,_===1)if(v=arguments[0],arguments[0].$$is_array){for(ue=v.length,te=0;te<ue;te++)v[te].length!==2&&A(g.ArgumentError,"value not of length 2: "+v[te].$inspect()),ce=v[te][0],he=v[te][1],g.hash_put(K,ce,he);return K}else{v=arguments[0];for(ce in v)W(v,ce)&&(he=v[ce],g.hash_put(K,ce,he));return K}for(_%2!==0&&A(g.ArgumentError,"odd number of arguments for Hash"),te=0;te<_;te+=2)ce=arguments[te],he=arguments[te+1],g.hash_put(K,ce,he);return K},g.hash2=function(_,v){x.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var K=new Map,te=0,ue=_.length;te<ue;te++)K.set(_[te],v[_[te]]);return K},g.hash_each=function(_,v,K){for(var te,ue=0,ce,he=Array.from(_.entries()),pe=he.length;ue<pe;ue++)if(ce=he[ue],te=K(ce[0],ce[1]),te[0])return te[1];return te?te[1]:v},g.range=function(_,v,K){var te=new g.Range;return te.begin=_,te.end=v,te.excl=K,te};var ie=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];g.ivar=function(_){return ie.indexOf(_)!==-1&&(_+="$"),_};function N(_){_.$$frozen&&A(g.FrozenError,"can't modify frozen "+_.$class()+": "+_,new Map([["receiver",_]]))}g.deny_frozen_access=N,g.freeze=function(_){return m(_,"$$frozen",!0),_.hasOwnProperty("$$id")||m(_,"$$id",L()),_.hasOwnProperty("$$meta")?_.$$meta.$freeze():m(_,"$$meta",null),_.hasOwnProperty("$$comparable")||m(_,"$$comparable",null),Object.seal(_),_};function P(_,v){var K=Object.getOwnPropertyNames(_),te=K.length,ue,ce,he;for(ue=0;ue<te;ue++)ce=K[ue],ce[0]!=="$"&&(he=Object.getOwnPropertyDescriptor(_,ce),he&&he.enumerable&&v(ce,he))}g.each_ivar=P,g.freeze_props=function(_){var v={get:null,set:function(K){N(_)},enumerable:!0};P(_,function(K,te){te.writable&&(v.get=se(te.value),Object.defineProperty(_,K,v))})},g.escape_regexp=function(_){return _.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},g.global_regexp=function(_){return _.global?_:(_.$$g==null?_.$$g=new RegExp(_.source,(_.multiline?"gm":"g")+(_.ignoreCase?"i":"")):_.$$g.lastIndex=null,_.$$g)},g.global_multiline_regexp=function(_){var v,K;return _.global&&_.multiline?_:(K="gm"+(_.ignoreCase?"i":""),_.multiline?(_.$$g==null&&(_.$$g=new RegExp(_.source,K)),v=_.$$g):(_.$$gm==null&&(_.$$gm=new RegExp(_.source,K)),v=_.$$gm),v.lastIndex=null,v)},g.regexp=function(_,v){for(var K,te=typeof v<"u"&&v&&v.indexOf("i")>=0,ue=0,ce=_.length;ue<ce;ue++)K=_[ue],K instanceof RegExp&&(K.ignoreCase!==te&&g.Kernel.$warn("ignore case doesn't match for "+K.source.$inspect(),new Map([["uplevel",1]])),K=K.source),K===""&&(K="(?:"+K+")"),_[ue]=K;return v?new RegExp(_.join(""),v):new RegExp(_.join(""))},g.modules={},g.loaded_features=["corelib/runtime"],g.current_dir=".",g.require_table={"corelib/runtime":!0},g.normalize=function(_){var v,K,te=[],ue="/";g.current_dir!=="."&&(_=g.current_dir.replace(/\/*$/,"/")+_),_=_.replace(/^\.\//,""),_=_.replace(/\.(rb|opal|js)$/,""),v=_.split(ue);for(var ce=0,he=v.length;ce<he;ce++)K=v[ce],K!==""&&(K===".."?te.pop():te.push(K));return te.join(ue)},g.loaded=function(_){var v,K,te;for(v=0,K=_.length;v<K;v++)te=g.normalize(_[v]),!g.require_table[te]&&(g.loaded_features.push(te),g.require_table[te]=!0)},g.load_normalized=function(_){g.loaded([_]);var v=g.modules[_];if(v){var K=v(g);if(typeof Promise<"u"&&K instanceof Promise)return K.then(se(!0))}else{var te=g.config.missing_require_severity,ue="cannot load such file -- "+_;te==="error"?A(g.LoadError,ue):te==="warning"&&x.warn("WARNING: LoadError: "+ue)}return!0},g.load=function(_){return _=g.normalize(_),g.load_normalized(_)},g.require=function(_){return _=g.normalize(_),g.require_table[_]?!1:g.load_normalized(_)},g.encodings=Object.create(null),g.set_encoding=function(_,v,K){typeof K>"u"&&(K="encoding"),(typeof _=="string"||_.$$frozen===!0)&&A(g.FrozenError,"can't modify frozen String");var te=g.find_encoding(v);return te===_[K]||(_[K]=te),_},g.find_encoding=function(_){var v=g.encodings,K=v[_]||v[_.toUpperCase()];return K||A(g.ArgumentError,"unknown encoding name - "+_),K},g.enc=function(_,v){var K=new String(_);return K=g.set_encoding(K,v),K.internal_encoding=K.encoding,K},g.binary=function(_){var v=new String(_);return g.set_encoding(v,"binary","internal_encoding")},g.last_promise=null,g.promise_unhandled_exception=!1,g.queue=function(_){if(g.last_promise)return g.last_promise=g.last_promise.then(function(){if(!g.promise_unhandled_exception)return _(g)}).catch(function(K){g.respond_to(K,"$full_message")&&(K=K.$full_message()),x.error(K),g.promise_unhandled_exception=!0,g.exit(1)}),g.last_promise;var v=_(g);return typeof Promise=="function"&&typeof v=="object"&&v instanceof Promise&&(g.last_promise=v),v};function Y(_,v){return typeof _=="number"&&typeof v=="number"}g.rb_plus=function(_,v){return Y(_,v)?_+v:_["$+"](v)},g.rb_minus=function(_,v){return Y(_,v)?_-v:_["$-"](v)},g.rb_times=function(_,v){return Y(_,v)?_*v:_["$*"](v)},g.rb_divide=function(_,v){return Y(_,v)?_/v:_["$/"](v)},g.rb_lt=function(_,v){return Y(_,v)?_<v:_["$<"](v)},g.rb_gt=function(_,v){return Y(_,v)?_>v:_["$>"](v)},g.rb_le=function(_,v){return Y(_,v)?_<=v:_["$<="](v)},g.rb_ge=function(_,v){return Y(_,v)?_>=v:_["$>="](v)};function Q(_,v){return typeof _=="number"&&typeof v=="number"||typeof _=="string"&&typeof v=="string"}function ne(_,v){return Q(_,v)?_===v:z(_["$=="](v))}g.eqeq=ne,g.eqeqeq=function(_,v){return Q(_,v)?_===v:z(_["$==="](v))},g.neqeq=function(_,v){return Q(_,v)?_!==v:z(_["$!="](v))},g.not=function(_){return _==null||_===!1||q===_?!0:_===!0||_["$!"].$$pristine?!1:z(_["$!"]())};function se(_){return function(){return _}}g.return_val=se,g.return_self=function(){return this},g.return_ivar=function(_){return function(){return this[_]==null?q:this[_]}},g.assign_ivar=function(_){return function(v){return N(this),this[_]=v}},g.assign_ivar_val=function(_,v){return function(){return N(this),this[_]=v}},g.ensure_kwargs=function(_){if(_==null)return new Map;if(_.$$is_hash)return _;A(g.ArgumentError,"expected kwargs")},g.get_kwarg=function(_,v){var K=g.hash_get(_,v);return K===void 0&&A(g.ArgumentError,"missing keyword: "+v),K},g.large_array_unpack=function(_){var v=_.split(","),K=v.length,te;for(te=0;te<K;te++)switch(v[te][0]){case void 0:v[te]=q;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":v[te]=+v[te]}return v},g.opal32_init=se(1332765036);function oe(_,v){return _<<v|_>>>32-v}g.opal32_add=function(_,v){return _^=v,_=oe(_,1),_},g.BasicObject=j=X("BasicObject",null),g.Object=S=X("Object",g.BasicObject),g.Module=re=X("Module",g.Object),g.Class=J=X("Class",g.Module),g.Opal=T=a("Opal"),g.Kernel=Z=a("Kernel"),H(g.BasicObject,g.Class.$$prototype),H(g.Object,g.Class.$$prototype),H(g.Module,g.Class.$$prototype),H(g.Class,g.Class.$$prototype),j.$$const.BasicObject=j,l(S,"BasicObject",j),l(S,"Object",S),l(S,"Module",re),l(S,"Class",J),l(S,"Opal",T),l(S,"Kernel",Z),j.$$class=J,S.$$class=J,re.$$class=J,J.$$class=J,T.$$class=re,Z.$$class=re,m(S.$$prototype,"toString",function(){var _=this.$to_s();return _.$$is_string&&typeof _=="object"?_.valueOf():_}),m(S.$$prototype,"$require",g.require),g.top=new S,g.top.$to_s=g.top.$inspect=se("main"),g.top.$define_method=fe;function fe(){var _=fe.$$p;return fe.$$p=null,g.send(S,"define_method",arguments,_)}g.NilClass=X("NilClass",g.Object),l(S,"NilClass",g.NilClass),q=g.nil=new g.NilClass,q.$$id=b,q.call=q.apply=function(){A(g.LocalJumpError,"no block given")},q.$$frozen=!0,q.$$comparable=!1,Object.seal(q),g.thrower=function(_){var v={$thrower_type:_,$throw:function(K,te){throw K==null&&(K=q),this.is_orphan&&!te&&A(g.LocalJumpError,"unexpected "+_,K,_.$to_sym()),this.$v=K,this},is_orphan:!1};return v},Object.defineProperty(G,"@",{enumerable:!0,configurable:!0,get:function(){return z(G["!"])?G["!"].$backtrace():q},set:function(_){z(G["!"])?G["!"].$set_backtrace(_):A(g.ArgumentError,"$! not set")}}),g.t_eval_return=g.thrower("return"),TypeError.$$super=Error,g.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(e){var x=e.type_error,q=e.coerce_to,j=e.module,S=e.defs,re=e.slice,J=e.eqeqeq,T=e.Kernel,Z=e.truthy,g=e.Opal,U=e.nil,$e=e.$$$;return e.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(W){var H=j(W,"Opal");S(H,"$bridge",function(b,y){return e.bridge(b,y)}),S(H,"$coerce_to!",function(b,y,L,G){var A,B,m=U;return A=re(arguments,3),B=A,m=q(b,y,L,B),J(y,m)||T.$raise(x(b,y,L,m)),m},-4),S(H,"$coerce_to?",function(b,y,L,G){var A,B,m=U;return A=re(arguments,3),B=A,!Z(b["$respond_to?"](L))||(m=q(b,y,L,B),Z(m["$nil?"]()))?U:(J(y,m)||T.$raise(x(b,y,L,m)),m)},-4),S(H,"$try_convert",function(b,y,L){return J(y,b)?b:Z(b["$respond_to?"](L))?b.$__send__(L):U}),S(H,"$compare",function(b,y){var L=U;return L=b["$<=>"](y),Z(L===U)&&T.$raise($e("ArgumentError"),"comparison of "+b.$class()+" with "+y.$class()+" failed"),L}),S(H,"$destructure",function(b){if(b.length==1)return b[0];if(b.$$is_array)return b;for(var y=new Array(b.length),L=0,G=y.length;L<G;L++)y[L]=b[L];return y}),S(H,"$respond_to?",function(b,y,L){return L==null&&(L=!1),b==null||!b.$$class?!1:b["$respond_to?"](y,L)},-3),S(H,"$instance_variable_name!",function(b){return b=g["$coerce_to!"](b,$e("String"),"to_str"),Z(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(b))||T.$raise($e("NameError").$new("'"+b+"' is not allowed as an instance variable name",b)),b}),S(H,"$class_variable_name!",function(b){return b=g["$coerce_to!"](b,$e("String"),"to_str"),Z(b.length<3||b.slice(0,2)!=="@@")&&T.$raise($e("NameError").$new("`"+b+"' is not allowed as a class variable name",b)),b}),S(H,"$const_name?",function(b){return typeof b!="string"&&(b=g["$coerce_to!"](b,$e("String"),"to_str")),b[0]===b[0].toUpperCase()}),S(H,"$const_name!",function(b){var y=this;return Z($e("::","String","skip_raise")?"constant":U)&&(b=g["$coerce_to!"](b,$e("String"),"to_str")),(!b||b[0]!=b[0].toUpperCase())&&y.$raise($e("NameError"),"wrong constant name "+b),b}),S(H,"$pristine",function(b,y){var L,G;L=re(arguments,1),G=L;for(var A,B,m=G.length-1;m>=0;m--)A=G[m],B=b.$$prototype[e.jsid(A)],B&&!B.$$stub&&(B.$$pristine=!0);return U},-2);var ee=[];return S(H,"$inspect",function(b){var y=U,L=!1;return function(){try{try{return b===null?"null":b===void 0?"undefined":typeof b.$$class>"u"?Object.prototype.toString.apply(b):typeof b.$inspect!="function"||b.$inspect.$$stub||ee.indexOf(b.$__id__())!==-1?"#<"+b.$$class+":0x"+b.$__id__().$to_s(16)+">":(ee.push(b.$__id__()),L=!0,b.$inspect())}catch(G){if(e.rescue(G,[$e("Exception")])){y=G;try{return"#<"+b.$$class+":0x"+b.$__id__().$to_s(16)+">"}finally{e.pop_exception(G)}}else throw G}}finally{L&&ee.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(e){var x=e.truthy,q=e.coerce_to,j=e.const_set,S=e.Object,re=e.return_ivar,J=e.assign_ivar,T=e.ivar,Z=e.deny_frozen_access,g=e.freeze,U=e.prop,$e=e.jsid,W=e.each_ivar,H=e.klass,ee=e.Opal,C=e.Kernel,b=e.defs,y=e.send,L=e.def,G=e.eqeqeq,A=e.Module,B=e.rb_lt,m=e.rb_gt,z=e.slice,F=e.to_a,k=e.return_val,E=e.eqeq,o=e.not,d=e.rb_le,I=e.range,h=e.send2,l=e.find_super,c=e.alias,X=[],w=e.nil,i=e.$$$;return e.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(a,$,n){var t=H(a,$,"Module"),r=[t].concat(n),s=e.$r(r);function u(D){if(D.$$is_string)return D;var R=ee.$try_convert(D,i("String"),"to_str");if(R.$$is_string)return R;R===w?C.$raise(i("TypeError"),""+D+" is not a symbol nor a string"):C.$raise(i("TypeError"),"can't convert "+D.$class()+" to String ("+D.$class()+"#to_str gives "+R.$class())}b(t,"$allocate",function(){var R=this,V=e.allocate_module(w,function(){});return R!==e.Module&&Object.setPrototypeOf(V,R.$$prototype),V}),L(t,"$initialize",function D(){var R=D.$$p||w,V=this;return D.$$p=null,R!==w?y(V,"module_eval",[],R.$to_proc()):w}),L(t,"$===",function(R){var V=this;return x(R==null)?!1:e.is_a(R,V)}),L(t,"$<",function(R){var V=this;G(A,R)||C.$raise(i("TypeError"),"compared with non class/module");var O=V,ae,le,_e;if(O===R)return!1;for(le=0,ae=e.ancestors(V),_e=ae.length;le<_e;le++)if(ae[le]===R)return!0;for(le=0,ae=e.ancestors(R),_e=ae.length;le<_e;le++)if(ae[le]===V)return!1;return w}),L(t,"$<=",function(R){var V=this,O=w;return x(O=V["$equal?"](R))?O:B(V,R)}),L(t,"$>",function(R){var V=this;return G(A,R)||C.$raise(i("TypeError"),"compared with non class/module"),B(R,V)}),L(t,"$>=",function(R){var V=this,O=w;return x(O=V["$equal?"](R))?O:m(V,R)}),L(t,"$<=>",function(R){var V=this,O=w;return V===R?0:!G(A,R)||(O=B(V,R),x(O["$nil?"]()))?w:x(O)?-1:1}),L(t,"$alias_method",function(R,V){var O=this;return Z(O),R=q(R,i("String"),"to_str"),V=q(V,i("String"),"to_str"),e.alias(O,R,V),O}),L(t,"$alias_native",function(R,V){var O=this;return V==null&&(V=R),Z(O),e.alias_native(O,R,V),O},-2),L(t,"$ancestors",function(){var R=this;return e.ancestors(R)}),L(t,"$append_features",function(R){var V=this;return Z(R),e.append_features(V,R),V}),L(t,"$attr_accessor",function(R){var V,O,ae=this;return V=z(arguments),O=V,y(ae,"attr_reader",F(O)),y(ae,"attr_writer",F(O))},-1),L(t,"$attr",function(R){var V,O,ae=this;return V=z(arguments),O=V,O.length==2&&(O[1]===!0||O[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),O[1]?ae.$attr_accessor(O[0]):ae.$attr_reader(O[0]),w):y(ae,"attr_reader",F(O))},-1),L(t,"$attr_reader",function(R){var V,O,ae=this;V=z(arguments),O=V,Z(ae);for(var le=ae.$$prototype,_e=O.length-1;_e>=0;_e--){var de=O[_e],ge=$e(de),ve=T(de),me=re(ve);e.prop(le,ve,w),me.$$parameters=[],me.$$arity=0,e.defn(ae,ge,me)}return w},-1),L(t,"$attr_writer",function(R){var V,O,ae=this;V=z(arguments),O=V,Z(ae);for(var le=ae.$$prototype,_e=O.length-1;_e>=0;_e--){var de=O[_e],ge=$e(de+"="),ve=T(de),me=J(ve);me.$$parameters=[["req"]],me.$$arity=1,e.prop(le,ve,w),e.defn(ae,ge,me)}return w},-1),L(t,"$autoload",function(R,V){var O=this;return Z(O),s("Opal")["$const_name?"](R)||C.$raise(i("NameError"),"autoload must be constant name: "+R),V==""&&C.$raise(i("ArgumentError"),"empty file name"),O.$$const.hasOwnProperty(R)||(O.$$autoload||(O.$$autoload={}),e.const_cache_version++,O.$$autoload[R]={path:V,loaded:!1,required:!1,success:!1,exception:!1},O.$const_added&&!O.$const_added.$$pristine&&O.$const_added(R)),w}),L(t,"$autoload?",function(R){var V=this;if(V.$$autoload&&V.$$autoload[R]&&!V.$$autoload[R].required&&!V.$$autoload[R].success)return V.$$autoload[R].path;for(var O=V.$ancestors(),ae=0,le=O.length;ae<le;ae++)if(O[ae].$$autoload&&O[ae].$$autoload[R]&&!O[ae].$$autoload[R].required&&!O[ae].$$autoload[R].success)return O[ae].$$autoload[R].path;return w}),L(t,"$class_variables",function(){var R=this;return Object.keys(e.class_variables(R))}),L(t,"$class_variable_get",function(R){var V=this;return R=ee["$class_variable_name!"](R),e.class_variable_get(V,R,!1)}),L(t,"$class_variable_set",function(R,V){var O=this;return Z(O),R=ee["$class_variable_name!"](R),e.class_variable_set(O,R,V)}),L(t,"$class_variable_defined?",function(R){var V=this;return R=ee["$class_variable_name!"](R),e.class_variables(V).hasOwnProperty(R)}),L(t,"$const_added",k(w)),ee.$pristine(t,"const_added"),L(t,"$remove_class_variable",function(R){var V=this;if(Z(V),R=ee["$class_variable_name!"](R),e.hasOwnProperty.call(V.$$cvars,R)){var O=V.$$cvars[R];return delete V.$$cvars[R],O}else C.$raise(i("NameError"),"cannot remove "+R+" for "+V)}),L(t,"$constants",function(R){var V=this;return R==null&&(R=!0),e.constants(V,R)},-1),b(t,"$constants",function(R){var V=this;if(R==null){var O=(V.$$nesting||[]).concat(S),ae,le={},_e,de;for(_e=0,de=O.length;_e<de;_e++)for(ae in O[_e].$$const)le[ae]=!0;return Object.keys(le)}else return e.constants(V,R)},-1),b(t,"$nesting",function(){var R=this;return R.$$nesting||[]}),L(t,"$const_defined?",function(R,V){var O=this;V==null&&(V=!0),R=s("Opal")["$const_name!"](R),x(R["$=~"](i(ee,"CONST_NAME_REGEXP")))||C.$raise(i("NameError").$new("wrong constant name "+R,R));var ae,le=[O],_e,de;for(V&&(le=le.concat(e.ancestors(O)),O.$$is_module&&(le=le.concat([S]).concat(e.ancestors(S)))),_e=0,de=le.length;_e<de;_e++)if(ae=le[_e],ae.$$const[R]!=null||ae.$$autoload&&ae.$$autoload[R]&&!ae.$$autoload[R].required&&!ae.$$autoload[R].success)return!0;return!1},-2),L(t,"$const_get",function(R,V){var O=this;return V==null&&(V=!0),R=s("Opal")["$const_name!"](R),R.indexOf("::")===0&&R!=="::"&&(R=R.slice(2)),x(R.indexOf("::")!=-1&&R!="::")?y(R.$split("::"),"inject",[O],function(le,_e){return le==null&&(le=w),_e==null&&(_e=w),le.$const_get(_e)}):(x(R["$=~"](i(ee,"CONST_NAME_REGEXP")))||C.$raise(i("NameError").$new("wrong constant name "+R,R)),V?e.$$([O],R):e.const_get_local(O,R))},-2),L(t,"$const_missing",function(R){var V=this,O=w;return O=E(V,S)?R:""+V+"::"+R,C.$raise(i("NameError").$new("uninitialized constant "+O,R))}),L(t,"$const_set",function(R,V){var O=this;return Z(O),R=ee["$const_name!"](R),(x(R["$!~"](i(ee,"CONST_NAME_REGEXP")))||x(R["$start_with?"]("::")))&&C.$raise(i("NameError").$new("wrong constant name "+R,R)),j(O,R,V),V}),L(t,"$public_constant",k(w)),L(t,"$define_method",function D(R,V){var O=D.$$p||w,ae=this,le=w,_e=w,de=w;return D.$$p=null,Z(ae),V===void 0&&O===w&&C.$raise(i("ArgumentError"),"tried to create a Proc object without a block"),R=u(R),x(V!==void 0)&&(O=G(i("Proc"),le=V)?V:G(i("Method"),le)?V.$to_proc().$$unbound:G(i("UnboundMethod"),le)?e.wrap_method_body(V.$$method):C.$raise(i("TypeError"),"wrong argument type "+V.$class()+" (expected Proc/Method/UnboundMethod)"),x(!V.$$is_proc)&&(_e=V.$owner(),x(_e.$$is_class)&&o(d(ae,_e))&&(de=x(_e.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+_e,C.$raise(i("TypeError"),de)))),typeof Proxy<"u"&&(O.$$proxy_target=O,O=new Proxy(O,{apply:function(ge,ve,me){var be=ge.$$jsid,ie=ge.$$is_lambda;ge.$$jsid=R,ge.$$is_lambda=!0;try{return ge.apply(ve,me)}catch(N){if(N===ge.$$brk||N===ge.$$ret)return N.$v;throw N}finally{ge.$$jsid=be,ge.$$is_lambda=ie}}})),O.$$jsid=R,O.$$s=null,O.$$def=O,O.$$define_meth=!0,e.defn(ae,$e(R),O)},-2),L(t,"$freeze",function(){var R=this;return x(R["$frozen?"]())?R:(R.hasOwnProperty("$$base_module")||U(R,"$$base_module",null),g(R))}),L(t,"$remove_method",function(R){var V,O,ae=this;V=z(arguments),O=V;for(var le=0;le<O.length;le++){var _e=u(O[le]);Z(ae),e.rdef(ae,"$"+_e)}return ae},-1),L(t,"$singleton_class?",function(){var R=this;return!!R.$$is_singleton}),L(t,"$include",function(R){var V,O,ae=this;V=z(arguments),O=V;for(var le=O.length-1;le>=0;le--){var _e=O[le];_e.$$is_module||C.$raise(i("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$append_features(ae),_e.$included(ae)}return ae},-1),L(t,"$included_modules",function(){var R=this;return e.included_modules(R)}),L(t,"$include?",function(R){var V=this;R.$$is_module||C.$raise(i("TypeError"),"wrong argument type "+R.$class()+" (expected Module)");var O,ae,le,_e=e.ancestors(V);for(O=0,ae=_e.length;O<ae;O++)if(le=_e[O],le===R&&le!==V)return!0;return!1}),L(t,"$instance_method",function(R){var V=this,O=V.$$prototype[$e(R)];return(!O||O.$$stub)&&C.$raise(i("NameError").$new("undefined method `"+R+"' for class `"+V.$name()+"'",R)),i("UnboundMethod").$new(V,O.$$owner||V,O,R)}),L(t,"$instance_methods",function(R){var V=this;return R==null&&(R=!0),x(R)?e.instance_methods(V):e.own_instance_methods(V)},-1),L(t,"$included",k(w)),L(t,"$extended",k(w)),L(t,"$extend_object",function(R){return Z(R),w}),L(t,"$method_added",function(R){return z(arguments),w},-1),L(t,"$method_removed",function(R){return z(arguments),w},-1),L(t,"$method_undefined",function(R){return z(arguments),w},-1),L(t,"$module_eval",function D(R){var V=D.$$p||w,O,ae,le,_e=this,de=w,ge=w,ve=w,me=w,be=w,ie=w;D.$$p=null,O=z(arguments),ae=O,x(V["$nil?"]())&&x(!!e.compile)?(x(I(1,3,!1)["$cover?"](ae.$size()))||C.$raise(i("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(F(ae)),de=le[0]==null?w:le[0],ge=le[1]==null?w:le[1],le[2]==null||le[2],ve=new Map([["file",x(me=ge)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),ie=ee.$compile(de,be),V=y(C,"proc",[],function Y(){var Q=Y.$$s==null?this:Y.$$s;return new Function("Opal,self","return "+ie)(e,Q)},{$$s:_e})):x(ae["$any?"]())&&C.$raise(i("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var N=V.$$s,P;return V.$$s=null,P=V.apply(_e,[_e]),V.$$s=N,P},-1),L(t,"$module_exec",function D(R){var V=D.$$p||w,O,ae,le=this;D.$$p=null,O=z(arguments),ae=O,V===w&&C.$raise(i("LocalJumpError"),"no block given");var _e=V.$$s,de;return V.$$s=null,de=V.apply(le,ae),V.$$s=_e,de},-1),L(t,"$method_defined?",function(R){var V=this,O=V.$$prototype[$e(R)];return!!O&&!O.$$stub}),L(t,"$module_function",function(R){var V,O,ae=this;if(V=z(arguments),O=V,Z(ae),O.length===0)return ae.$$module_function=!0,w;for(var le=0,_e=O.length;le<_e;le++){var de=O[le],ge=$e(de),ve=ae.$$prototype[ge];e.defs(ae,ge,ve)}return O.length===1?O[0]:O},-1),L(t,"$name",function(){var R=this;if(R.$$full_name)return R.$$full_name;for(var V=[],O=R;O;){if(O.$$name===w||O.$$name==null)return w;if(V.unshift(O.$$name),O=O.$$base_module,O===S)break}return V.length===0?w:R.$$full_name=V.join("::")}),L(t,"$prepend",function(R){var V,O,ae=this;V=z(arguments),O=V,O.length===0&&C.$raise(i("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=O.length-1;le>=0;le--){var _e=O[le];_e.$$is_module||C.$raise(i("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$prepend_features(ae),_e.$prepended(ae)}return ae},-1),L(t,"$prepend_features",function(R){var V=this;return Z(R),V.$$is_module||C.$raise(i("TypeError"),"wrong argument type "+V.$class()+" (expected Module)"),e.prepend_features(V,R),V}),L(t,"$prepended",k(w)),L(t,"$remove_const",function(R){var V=this;return Z(V),e.const_remove(V,R)}),L(t,"$to_s",function(){var R=this,V=w;return x(V=e.Module.$name.call(R))?V:"#<"+(R.$$is_module?"Module":"Class")+":0x"+R.$__id__().$to_s(16)+">"}),L(t,"$undef_method",function(R){var V,O,ae=this;V=z(arguments),O=V;for(var le=0;le<O.length;le++){var _e=u(O[le]);Z(ae),e.udef(ae,"$"+_e)}return ae},-1),L(t,"$instance_variables",function(){var R=this,V=w;V=(e.Module.$$nesting=r,R.$constants());var O=[];return W(R,function(ae){ae!=="constructor"&&!V["$include?"](ae)&&O.push("@"+ae)}),O});function f(D,R){var V,O=e.own_instance_methods(D);for(V=0;V<O.length;V++){var ae=O[V],le=$e(ae),_e=D.$$prototype[le],de=e.wrap_method_body(_e);de.$$jsid=ae,e.defn(R,le,de)}}function p(D,R){for(var V=D.$$own_included_modules,O=V.length-1;O>=0;O--)e.append_features(V[O],R)}function M(D,R){for(var V=D.$$own_prepended_modules,O=V.length-1;O>=0;O--)e.prepend_features(V[O],R)}return L(t,"$initialize_copy",function(R){var V=this;return f(R,V),p(R,V),M(R,V),V.$$cloned_from=R.$$cloned_from.concat(R),V.$copy_class_variables(R),V.$copy_constants(R)}),L(t,"$initialize_dup",function D(R){var V=D.$$p||w,O=this;return D.$$p=null,h(O,l(O,"initialize_dup",D,!1,!0),"initialize_dup",[R],V),O.$copy_singleton_methods(R)}),L(t,"$copy_class_variables",function(R){var V=this;for(var O in R.$$cvars)V.$$cvars[O]=R.$$cvars[O]}),L(t,"$copy_constants",function(R){var V=this,O,ae=R.$$const;for(O in ae)j(V,O,ae[O])}),L(t,"$refine",function D(R){var V=D.$$p||w,O,ae=this,le=w,_e=w,de=w;return D.$$p=null,O=[ae,w,w],le=O[0],_e=O[1],de=O[2],de=e.id(R),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?_e=ae.$$refine_modules[de]=i("Refinement").$new():_e=ae.$$refine_modules[de],_e.refinement_module=le,_e.refined_class=R,y(_e,"class_exec",[],V.$to_proc()),_e}),L(t,"$refinements",function(){var R=this,V=R.$$refine_modules,O=new Map;if(typeof V>"u")return O;for(var ae in V)O["$[]="](V[ae].refined_class,V[ae]);return O}),L(t,"$using",function(R){return C.$raise("Module#using is not permitted in methods")}),c(t,"class_eval","module_eval"),c(t,"class_exec","module_exec"),c(t,"inspect","to_s")}("::",null,X),function(a,$){var n=H(a,$,"Refinement"),t=n.$$prototype;return t.refinement_module=t.refined_class=w,n.$attr_reader("refined_class"),L(n,"$inspect",function r(){var s=r.$$p||w,u=this;return r.$$p=null,x(u.refinement_module)?"#<refinement:"+u.refined_class.$inspect()+"@"+u.refinement_module.$inspect()+">":h(u,l(u,"inspect",r,!1,!0),"inspect",[],s)})}("::",A)};Opal.modules["corelib/class"]=function(e){var x=e.klass,q=e.send,j=e.defs,S=e.def,re=e.ensure_kwargs,J=e.hash_get,T=e.eqeq,Z=e.truthy,g=e.rb_plus,U=e.return_val,$e=e.slice,W=e.send2,H=e.find_super,ee=e.Kernel,C=e.alias,b=e.top,y=[],L=e.nil,G=e.$$$;return e.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),b.$require("corelib/module"),function(A,B,m){var z=x(A,B,"Class"),F=[z].concat(m),k=e.$r(F);return j(z,"$new",function E(o){var d=E.$$p||L;if(E.$$p=null,o==null&&(o=k("Object")),!o.$$is_class)throw e.TypeError.$new("superclass must be a Class");var I=e.allocate_class(L,o);return o.$inherited(I),d!==L&&q(I,"class_eval",[],d.$to_proc()),I},-1),S(z,"$allocate",function(){var o=this,d=new o.$$constructor;return d.$$id=e.uid(),d}),S(z,"$clone",function(o){var d,I=this,h=L;return o=re(o),d=J(o,"freeze"),d==null&&(d=L),Z(d["$nil?"]())||T(d,!0)||T(d,!1)||I.$raise(k("ArgumentError"),"unexpected value for freeze: "+d.$class()),h=e.allocate_class(L,I.$$super),h.$copy_instance_variables(I),h.$copy_singleton_methods(I),h.$initialize_clone(I,new Map([["freeze",d]])),(T(d,!0)||Z(d["$nil?"]())&&Z(I["$frozen?"]()))&&h.$freeze(),h},-1),S(z,"$dup",function(){var o=this,d=L;return d=e.allocate_class(L,o.$$super),d.$copy_instance_variables(o),d.$initialize_dup(o),d}),S(z,"$descendants",function(){var o=this;return g(o.$subclasses(),q(o.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),S(z,"$inherited",U(L)),S(z,"$new",function E(o){var d=E.$$p||L,I,h,l=this;E.$$p=null,I=$e(arguments),h=I;var c=l.$allocate();return e.send(c,c.$initialize,h,d),c},-1),S(z,"$subclasses",function(){var o=this;if(typeof WeakRef<"u"){var d,I,h=[];for(d=0;d<o.$$subclasses.length;d++)I=o.$$subclasses[d].deref(),I!==void 0&&h.push(I);return h}else return o.$$subclasses}),S(z,"$superclass",function(){var o=this;return o.$$super||L}),S(z,"$to_s",function E(){E.$$p;var o=this;E.$$p=null;var d=o.$$singleton_of;return d&&d.$$is_a_module?"#<Class:"+d.$name()+">":d?"#<Class:#<"+d.$$class.$name()+":0x"+e.id(d).$to_s(16)+">>":W(o,H(o,"to_s",E,!1,!0),"to_s",[],null)}),S(z,"$attached_object",function(){var o=this;if(o.$$singleton_of!=null)return o.$$singleton_of;ee.$raise(G("TypeError"),"`"+o+"' is not a singleton class")}),C(z,"inspect","to_s")}("::",null,y)};Opal.modules["corelib/basic_object"]=function(e){var x=e.klass,q=e.slice,j=e.def,S=e.alias,re=e.return_val,J=e.Opal,T=e.truthy,Z=e.range,g=e.Kernel,U=e.to_a,$e=e.send,W=e.eqeq,H=e.rb_ge,ee=e.nil,C=e.$$$;return e.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(b,y){var L=x(b,y,"BasicObject");return j(L,"$initialize",function(A){return q(arguments),ee},-1),j(L,"$==",function(A){var B=this;return B===A}),j(L,"$eql?",function(A){var B=this;return B["$=="](A)}),S(L,"equal?","=="),j(L,"$__id__",function(){var A=this;return A.$$id!=null||e.prop(A,"$$id",e.uid()),A.$$id}),j(L,"$__send__",function G(A,B){var m=G.$$p||ee,z,F,k=this;G.$$p=null,z=q(arguments,1),F=z,A.$$is_string||k.$raise(C("TypeError"),""+k.$inspect()+" is not a symbol nor a string");var E=k[e.jsid(A)];return E?(m!==ee&&(E.$$p=m),E.apply(k,F)):(m!==ee&&(k.$method_missing.$$p=m),k.$method_missing.apply(k,[A].concat(F)))},-2),j(L,"$!",re(!1)),J.$pristine("!"),j(L,"$!=",function(A){var B=this;return B["$=="](A)["$!"]()}),j(L,"$instance_eval",function G(A){var B=G.$$p||ee,m,z,F,k=this,E=ee,o=ee,d=ee,I=ee,h=ee,l=ee;if(G.$$p=null,m=q(arguments),z=m,T(B["$nil?"]())&&T(!!e.compile))T(Z(1,3,!1)["$cover?"](z.$size()))||g.$raise(C("ArgumentError"),"wrong number of arguments (0 for 1..3)"),F=[].concat(U(z)),E=F[0]==null?ee:F[0],o=F[1]==null?ee:F[1],F[2]==null||F[2],d=new Map([["file",T(I=o)?I:"(eval)"],["eval",!0]]),h=new Map([["arity_check",!1]]).$merge(d),l=J.$compile(E,h),B=$e(g,"proc",[],function w(){var i=w.$$s==null?this:w.$$s;return new Function("Opal,self","return "+l)(e,i)},{$$s:k});else{if(T(B["$nil?"]())&&T(H(z.$length(),1))&&W(z.$first()["$[]"](0),"@"))return k.$instance_variable_get(z.$first());T(z["$any?"]())&&g.$raise(C("ArgumentError"),"wrong number of arguments ("+z.$size()+" for 0)")}var c=B.$$s,X;if(B.$$s=null,k.$$is_a_module){k.$$eval=!0;try{X=B.call(k,k)}finally{k.$$eval=!1}}else X=B.call(k,k);return B.$$s=c,X},-1),j(L,"$instance_exec",function G(A){var B=G.$$p||ee,m,z,F=this;G.$$p=null,m=q(arguments),z=m,T(B)||g.$raise(C("ArgumentError"),"no block given");var k=B.$$s,E;if(B.$$s=null,F.$$is_a_module){F.$$eval=!0;try{E=B.apply(F,z)}finally{F.$$eval=!1}}else E=B.apply(F,z);return B.$$s=k,E},-1),j(L,"$singleton_method_added",function(A){return q(arguments),ee},-1),j(L,"$singleton_method_removed",function(A){return q(arguments),ee},-1),j(L,"$singleton_method_undefined",function(A){return q(arguments),ee},-1),j(L,"$method_missing",function G(A,B){G.$$p;var m,z,F=this,k=ee;return G.$$p=null,m=q(arguments,1),z=m,k=J.$inspect(F),g.$raise(C("NoMethodError").$new("undefined method `"+A+"' for "+k,A,z),ee,g.$caller(1))},-2),J.$pristine(L,"method_missing"),j(L,"$respond_to_missing?",function(A,B){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(e){var x=e.truthy,q=e.coerce_to,j=e.respond_to,S=e.Opal,re=e.deny_frozen_access,J=e.freeze,T=e.freeze_props,Z=e.jsid,g=e.each_ivar,U=e.module,$e=e.return_val,W=e.def,H=e.Kernel,ee=e.gvars,C=e.slice,b=e.send,y=e.to_a,L=e.ensure_kwargs,G=e.hash_get,A=e.eqeq,B=e.rb_plus,m=e.extract_kwargs,z=e.eqeqeq,F=e.return_self,k=e.rb_le,E=e.rb_lt,o=e.Object,d=e.alias,I=e.klass,h=[],l=e.nil,c=e.$$$;return e.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(X,w){var i=U(X,"Kernel"),a=[i].concat(w),$=e.$r(a);W(i,"$=~",$e(!1)),W(i,"$!~",function(r){var s=this;return s["$=~"](r)["$!"]()}),W(i,"$===",function(r){var s=this,u=l;return x(u=s.$object_id()["$=="](r.$object_id()))?u:s["$=="](r)}),W(i,"$<=>",function(r){var s=this;s.$$comparable=!0;var u=s["$=="](r);return u&&u!==l?0:l}),W(i,"$method",function(r){var s=this,u=s[Z(r)];return(!u||u.$$stub)&&H.$raise(c("NameError").$new("undefined method `"+r+"' for class `"+s.$class()+"'",r)),c("Method").$new(s,u.$$owner||s.$class(),u,r)}),W(i,"$methods",function(r){var s=this;return r==null&&(r=!0),x(r)?e.methods(s):e.own_methods(s)},-1),W(i,"$public_methods",function(r){var s=this;return r==null&&(r=!0),x(r)?e.methods(s):e.receiver_methods(s)},-1),W(i,"$Array",function(r){var s;return r===l?[]:r.$$is_array?r:(s=S["$coerce_to?"](r,c("Array"),"to_ary"),s!==l||(s=S["$coerce_to?"](r,c("Array"),"to_a"),s!==l)?s:[r])}),W(i,"$at_exit",function t(){var r=t.$$p||l,s=l;return ee.__at_exit__==null&&(ee.__at_exit__=l),t.$$p=null,ee.__at_exit__=x(s=ee.__at_exit__)?s:[],ee.__at_exit__["$<<"](r),r}),W(i,"$caller",function(r,s){r==null&&(r=1),s==null&&(s=l);var u,f;u=new Error().$backtrace(),f=[];for(var p=r+1,M=u.length;p<M;p++)u[p].match(/runtime\.js/)||f.push(u[p]);return s!=l&&(f=f.slice(0,s)),f},-1),W(i,"$caller_locations",function(r){var s,u,f=this;return s=C(arguments),u=s,b(b(f,"caller",y(u)),"map",[],function(M){return M==null&&(M=l),c(c(c("Thread"),"Backtrace"),"Location").$new(M)})},-1),W(i,"$class",function(){var r=this;return r.$$class}),W(i,"$copy_instance_variables",function(r){var s=this,u=Object.keys(r),f,p,M;for(f=0,p=u.length;f<p;f++)M=u[f],M.charAt(0)!=="$"&&r.hasOwnProperty(M)&&(s[M]=r[M])}),W(i,"$copy_singleton_methods",function(r){var s=this,u,f,p,M;if(r.hasOwnProperty("$$meta")&&r.$$meta!==null){var D=e.get_singleton_class(r),R=e.get_singleton_class(s);for(p=Object.getOwnPropertyNames(D.$$prototype),u=0,M=p.length;u<M;u++)f=p[u],e.is_method(f)&&(R.$$prototype[f]=D.$$prototype[f]);R.$$const=Object.assign({},D.$$const),Object.setPrototypeOf(R.$$prototype,Object.getPrototypeOf(D.$$prototype))}for(u=0,p=Object.getOwnPropertyNames(r),M=p.length;u<M;u++)f=p[u],f.charAt(0)==="$"&&f.charAt(1)!=="$"&&r.hasOwnProperty(f)&&(s[f]=r[f])}),W(i,"$clone",function(r){var s,u=this,f=l;return r=L(r),s=G(r,"freeze"),s==null&&(s=l),x(s["$nil?"]())||A(s,!0)||A(s,!1)||u.$raise($("ArgumentError"),"unexpected value for freeze: "+s.$class()),f=u.$class().$allocate(),f.$copy_instance_variables(u),f.$copy_singleton_methods(u),f.$initialize_clone(u,new Map([["freeze",s]])),(A(s,!0)||x(s["$nil?"]())&&x(u["$frozen?"]()))&&f.$freeze(),f},-1),W(i,"$initialize_clone",function(r,s){var u=this;return s=L(s),G(s,"freeze"),u.$initialize_copy(r),u},-2),W(i,"$define_singleton_method",function t(r,s){var u=t.$$p||l,f=this;return t.$$p=null,b(f.$singleton_class(),"define_method",[r,s],u.$to_proc())},-2),W(i,"$dup",function(){var r=this,s=l;return s=r.$class().$allocate(),s.$copy_instance_variables(r),s.$initialize_dup(r),s}),W(i,"$initialize_dup",function(r){var s=this;return s.$initialize_copy(r)}),W(i,"$enum_for",function t(r,s){var u=t.$$p||l,f,p,M,D=this;return t.$$p=null,f=C(arguments),f.length>0&&(p=f.shift()),p==null&&(p="each"),M=f,b(c("Enumerator"),"for",[D,p].concat(y(M)),u.$to_proc())},-1),W(i,"$equal?",function(r){var s=this;return s===r}),W(i,"$exit",function(r){var s=l,u=l;for(ee.__at_exit__==null&&(ee.__at_exit__=l),r==null&&(r=!0),ee.__at_exit__=x(s=ee.__at_exit__)?s:[];!x(ee.__at_exit__["$empty?"]());)u=ee.__at_exit__.$pop(),u.$call();return r.$$is_boolean?r=r?0:1:r=q(r,c("Integer"),"to_int"),e.exit(r),l},-1),W(i,"$extend",function(r){var s,u,f=this;s=C(arguments),u=s,u.length==0&&f.$raise(c("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),re(f);for(var p=f.$singleton_class(),M=u.length-1;M>=0;M--){var D=u[M];D.$$is_module||H.$raise(c("TypeError"),"wrong argument type "+D.$class()+" (expected Module)"),D.$append_features(p),D.$extend_object(f),D.$extended(f)}return f},-1),W(i,"$freeze",function(){var r=this;return x(r["$frozen?"]())?r:typeof r=="object"?(T(r),J(r)):r}),W(i,"$frozen?",function(){var r=this;switch(typeof r){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return r.$$frozen||!1;default:return!1}}),W(i,"$gets",function(r){var s,u;return ee.stdin==null&&(ee.stdin=l),s=C(arguments),u=s,b(ee.stdin,"gets",y(u))},-1),W(i,"$hash",function(){var r=this;return r.$__id__()}),W(i,"$initialize_copy",$e(l));var n=[];return W(i,"$inspect",function(){var r=this,s=l,u=l,f=l,p=l;return function(){try{try{return s="",u=r.$__id__(),x(n["$include?"](u))?s=" ...":(n["$<<"](u),f=!0,b(r.$instance_variables(),"each",[],function M(D){var R=M.$$s==null?this:M.$$s,V=l,O=l;return D==null&&(D=l),V=R.$instance_variable_get(D),O=$("Opal").$inspect(V),s=B(s," "+D+"="+O)},{$$s:r})),"#<"+r.$class()+":0x"+u.$to_s(16)+s+">"}catch(M){if(e.rescue(M,[$("StandardError")])){p=M;try{return"#<"+r.$class()+":0x"+u.$to_s(16)+">"}finally{e.pop_exception(M)}}else throw M}}finally{x(f)&&n.$pop()}}()}),W(i,"$instance_of?",function(r){var s=this;return!r.$$is_class&&!r.$$is_module&&H.$raise(c("TypeError"),"class or module required"),s.$$class===r}),W(i,"$instance_variable_defined?",function(r){var s=this;return r=S["$instance_variable_name!"](r),e.hasOwnProperty.call(s,r.substr(1))}),W(i,"$instance_variable_get",function(r){var s=this;r=S["$instance_variable_name!"](r);var u=s[e.ivar(r.substr(1))];return u??l}),W(i,"$instance_variable_set",function(r,s){var u=this;return re(u),r=S["$instance_variable_name!"](r),u[e.ivar(r.substr(1))]=s}),W(i,"$remove_instance_variable",function(r){var s=this;r=S["$instance_variable_name!"](r);var u=e.ivar(r.substr(1)),f;return s.hasOwnProperty(u)?(f=s[u],delete s[u],f):H.$raise(c("NameError"),"instance variable "+r+" not defined")}),W(i,"$instance_variables",function(){var r=this,s=[];return g(r,function(u){u.substr(-1)==="$"&&(u=u.slice(0,u.length-1)),s.push("@"+u)}),s}),W(i,"$Integer",function(r,s,u){var f,p,M,D;f=C(arguments,1),p=m(f),p=L(p),f.length>0&&(M=f.shift()),D=G(p,"exception"),D==null&&(D=!0);var R,V,O;if(D=x(D),!r.$$is_string){if(M!==void 0)if(D)H.$raise(c("ArgumentError"),"base specified for non string value");else return l;if(r===l)if(D)H.$raise(c("TypeError"),"can't convert nil into Integer");else return l;if(r.$$is_number){if(r===1/0||r===-1/0||isNaN(r))if(D)H.$raise(c("FloatDomainError"),r);else return l;return Math.floor(r)}if(r["$respond_to?"]("to_int")&&(R=r.$to_int(),e.is_a(R,c("Integer")))||r["$respond_to?"]("to_i")&&(R=r.$to_i(),e.is_a(R,c("Integer"))))return R;if(D)H.$raise(c("TypeError"),"can't convert "+r.$class()+" into Integer");else return l}if(r==="0")return 0;if(M===void 0)M=0;else if(M=q(M,c("Integer"),"to_int"),M===1||M<0||M>36)if(D)H.$raise(c("ArgumentError"),"invalid radix "+M);else return l;if(V=r.toLowerCase(),V=V.replace(/(\d)_(?=\d)/g,"$1"),V=V.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,le,_e){switch(_e){case"0b":if(M===0||M===2)return M=2,le;case"0":case"0o":if(M===0||M===8)return M=8,le;case"0d":if(M===0||M===10)return M=10,le;case"0x":if(M===0||M===16)return M=16,le}if(D)H.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return l}),M=M===0?10:M,O="0-"+(M<=10?M-1:"9a-"+String.fromCharCode(97+(M-11))),!new RegExp("^\\s*[+-]?["+O+"]+\\s*$").test(V))if(D)H.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return l;if(R=parseInt(V,M),isNaN(R))if(D)H.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return l;return R},-2),W(i,"$Float",function(r,s){var u;s=L(s),u=G(s,"exception"),u==null&&(u=!0);var f;if(u=x(u),r===l)if(u)H.$raise(c("TypeError"),"can't convert nil into Float");else return l;if(r.$$is_string){if(f=r.toString(),f=f.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(f))return H.$Integer(f);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(f))if(u)H.$raise(c("ArgumentError"),'invalid value for Float(): "'+r+'"');else return l;return parseFloat(f)}return u?S["$coerce_to!"](r,c("Float"),"to_f"):q(r,c("Float"),"to_f")},-2),W(i,"$Hash",function(r){return x(r["$nil?"]())||A(r,[])?new Map:z(c("Hash"),r)?r:S["$coerce_to!"](r,c("Hash"),"to_hash")}),W(i,"$is_a?",function(r){var s=this;return!r.$$is_class&&!r.$$is_module&&H.$raise(c("TypeError"),"class or module required"),e.is_a(s,r)}),W(i,"$itself",F),W(i,"$lambda",function t(){var r=t.$$p||l;return t.$$p=null,e.lambda(r)}),W(i,"$load",function(r){return r=S["$coerce_to!"](r,c("String"),"to_str"),e.load(r)}),W(i,"$loop",function t(){var r=t.$$p||l,s=this,u=l;if(t.$$p=null,r===l)return b(s,"enum_for",["loop"],function(){return c(c("Float"),"INFINITY")});for(;x(!0);)try{e.yieldX(r,[])}catch(f){if(e.rescue(f,[c("StopIteration")])){u=f;try{return u.$result()}finally{e.pop_exception(f)}}else throw f}return s}),W(i,"$nil?",$e(!1)),W(i,"$printf",function(r){var s,u,f=this,p=l;return ee.stdout==null&&(ee.stdout=l),s=C(arguments),u=s,x(u["$empty?"]())||(p=x(u[0].$$is_string)?ee.stdout:u.$shift(),p.$write(b(f,"format",y(u)))),l},-1),W(i,"$proc",function t(){var r=t.$$p||l;return t.$$p=null,x(r)||H.$raise(c("ArgumentError"),"tried to create Proc object without a block"),r.$$is_lambda=!1,r}),W(i,"$puts",function(r){var s,u;return ee.stdout==null&&(ee.stdout=l),s=C(arguments),u=s,b(ee.stdout,"puts",y(u))},-1),W(i,"$p",function(r){var s,u;return s=C(arguments),u=s,b(u,"each",[],function(p){return ee.stdout==null&&(ee.stdout=l),p==null&&(p=l),ee.stdout.$puts(p.$inspect())}),x(k(u.$length(),1))?u["$[]"](0):u},-1),W(i,"$print",function(r){var s,u;return ee.stdout==null&&(ee.stdout=l),s=C(arguments),u=s,b(ee.stdout,"print",y(u))},-1),W(i,"$readline",function(r){var s,u;return ee.stdin==null&&(ee.stdin=l),s=C(arguments),u=s,b(ee.stdin,"readline",y(u))},-1),W(i,"$warn",function(r,s){var u,f,p,M,D,R,V=this,O=l;return ee.VERBOSE==null&&(ee.VERBOSE=l),ee.stderr==null&&(ee.stderr=l),u=C(arguments),f=m(u),f=L(f),p=u,M=G(f,"uplevel"),M==null&&(M=l),x(M)&&(M=S["$coerce_to!"](M,c("Integer"),"to_str"),x(E(M,0))&&H.$raise(c("ArgumentError"),"negative level ("+M+")"),O=(D=(R=V.$caller(B(M,1),1).$first(),R===l||R==null?l:R.$split(":in `")),D===l||D==null?l:D.$first()),x(O)&&(O=""+O+": "),p=b(p,"map",[],function(le){return le==null&&(le=l),""+O+"warning: "+le})),x(ee.VERBOSE["$nil?"]())||x(p["$empty?"]())?l:b(ee.stderr,"puts",y(p))},-1),W(i,"$raise",function(r,s,u){throw ee["!"]==null&&(ee["!"]=l),s==null&&(s=l),u==null&&(u=l),r==null&&ee["!"]!==l?ee["!"]:(r==null?r=c("RuntimeError").$new(""):j(r,"$to_str")?r=c("RuntimeError").$new(r.$to_str()):r.$$is_class&&j(r,"$exception")?r=r.$exception(s):r.$$is_exception||(r=c("TypeError").$new("exception class/object expected")),u!==l&&r.$set_backtrace(u),ee["!"]!==l&&e.exceptions.push(ee["!"]),ee["!"]=r,r)},-1),W(i,"$rand",function(r){return r===void 0?c(c("Random"),"DEFAULT").$rand():(r.$$is_number&&(r<0&&(r=Math.abs(r)),r%1!==0&&(r=r.$to_i()),r===0&&(r=void 0)),c(c("Random"),"DEFAULT").$rand(r))},-1),W(i,"$respond_to?",function(r,s){var u=this;s==null&&(s=!1);var f=u[Z(r)];return typeof f=="function"&&!f.$$stub?!0:u["$respond_to_missing?"].$$pristine===!0?!1:u["$respond_to_missing?"](r,s)},-2),W(i,"$respond_to_missing?",function(r,s){return!1},-2),S.$pristine(i,"respond_to?","respond_to_missing?"),W(i,"$require",function(r){return typeof r!="string"&&e.String&&e.Array&&(r=S["$coerce_to!"](r,c("String"),"to_str")),e.require(r)}),W(i,"$require_relative",function(r){return S["$try_convert!"](r,c("String"),"to_str"),r=c("File").$expand_path(c("File").$join(e.current_file,"..",r)),e.require(r)}),W(i,"$require_tree",function(r,s){var u;s=L(s),u=G(s,"autoload"),u==null&&(u=!1);var f=[];r=c("File").$expand_path(r),r=e.normalize(r),r==="."&&(r="");for(var p in e.modules)p["$start_with?"](r)&&(u?f.push([p,!0]):f.push([p,e.require(p)]));return f},-2),W(i,"$singleton_class",function(){var r=this;return e.get_singleton_class(r)}),W(i,"$sleep",function(r){r==null&&(r=l),r===l&&H.$raise(c("TypeError"),"can't convert NilClass into time interval"),r.$$is_number||H.$raise(c("TypeError"),"can't convert "+r.$class()+" into time interval"),r<0&&H.$raise(c("ArgumentError"),"time interval must be positive");for(var s=e.global.performance?function(){return performance.now()}:function(){return new Date},u=s();s()-u<=r*1e3;);return Math.round(r)},-1),W(i,"$srand",function(r){return r==null&&(r=$("Random").$new_seed()),c("Random").$srand(r)},-1),W(i,"$String",function(r){var s=l;return x(s=S["$coerce_to?"](r,c("String"),"to_str"))?s:S["$coerce_to!"](r,c("String"),"to_s")}),W(i,"$tap",function t(){var r=t.$$p||l,s=this;return t.$$p=null,e.yield1(r,s),s}),W(i,"$to_proc",F),W(i,"$to_s",function(){var r=this;return"#<"+r.$class()+":0x"+r.$__id__().$to_s(16)+">"}),W(i,"$catch",function t(r){var s=t.$$p||l,u=l,f=l;t.$$p=null,r==null&&(r=l);try{return r=x(u=r)?u:o.$new(),e.yield1(s,r)}catch(p){if(e.rescue(p,[c("UncaughtThrowError")])){f=p;try{return A(f.$tag(),r)?f.$value():H.$raise()}finally{e.pop_exception(p)}}else throw p}},-1),W(i,"$throw",function(r,s){return s==null&&(s=l),H.$raise(c("UncaughtThrowError").$new(r,s))},-2),W(i,"$open",function t(r){var s=t.$$p||l,u,f;return t.$$p=null,u=C(arguments),f=u,b(c("File"),"open",y(f),s.$to_proc())},-1),W(i,"$yield_self",function t(){var r=t.$$p||l,s=this;return t.$$p=null,r===l?b(s,"enum_for",["yield_self"],$e(1)):e.yield1(r,s)}),d(i,"fail","raise"),d(i,"kind_of?","is_a?"),d(i,"object_id","__id__"),d(i,"public_send","__send__"),d(i,"send","__send__"),d(i,"then","yield_self"),d(i,"to_enum","enum_for")}("::",h),function(X,w){var i=I(X,w,"Object");return delete o.$$prototype.$require,i.$include(H)}("::",null)};Opal.modules["corelib/main"]=function(e){var x=e.return_val,q=e.def,j=e.Object,S=e.slice,re=e.Kernel,J=e.top;return e.nil,e.add_stubs("include,raise"),function(T,Z){return q(T,"$to_s",x("main")),q(T,"$include",function(U){return j.$include(U)}),q(T,"$autoload",function(U){var $e,W;return $e=S(arguments),W=$e,e.Object.$autoload.apply(e.Object,W)},-1),q(T,"$using",function(U){return re.$raise("main.using is permitted only at toplevel")})}(e.get_singleton_class(J))};Opal.modules["corelib/error/errno"]=function(e){var x=e.module,q=e.truthy,j=e.rb_plus,S=e.send2,re=e.find_super,J=e.def,T=e.klass,Z=e.nil,g=e.$$$;return e.add_stubs("+,errno,class,attr_reader"),function(U,$e){var W=x(U,"Errno"),H=Z,ee=Z;H=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],ee=Z;var C;for(C=0;C<H.length;C++)(function(){var b=H[C][0],y=H[C][1],L=H[C][2];ee=e.klass(W,e.SystemCallError,b),ee.errno=L,function(G,A){return J(G,"$new",function B(m){B.$$p;var z=this,F=Z;return B.$$p=null,m==null&&(m=Z),F=y,q(m)&&(F=j(F," - "+m)),S(z,re(z,"new",B,!1,!0),"new",[F],null)},-1)}(e.get_singleton_class(ee))})()}("::"),function(U,$e,W){var H=T(U,$e,"SystemCallError");return J(H,"$errno",function(){var C=this;return C.$class().$errno()}),function(ee,C){return ee.$attr_reader("errno")}(e.get_singleton_class(H))}("::",g("StandardError"))};Opal.modules["corelib/error"]=function(e){var x=e.klass,q=e.slice,j=e.gvars,S=e.defs,re=e.send,J=e.to_a,T=e.def,Z=e.send2,g=e.find_super,U=e.truthy,$e=e.Kernel,W=e.not,H=e.rb_plus,ee=e.eqeq,C=e.Object,b=e.ensure_kwargs,y=e.hash_get,L=e.module,G=[],A=e.nil,B=e.$$$;return e.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(m,z,F){var k=x(m,z,"Exception"),E=[k].concat(F),o=e.$r(E),d=k.$$prototype;d.message=A,e.prop(k.$$prototype,"$$is_exception",!0);var I;Error.stackTraceLimit=100,S(k,"$new",function(c){var X,w,i=this;j["!"]==null&&(j["!"]=A),X=q(arguments),w=X;var a=w.length>0?w[0]:A,$=new i.$$constructor(a);return $.name=i.$$name,$.message=a,$.cause=j["!"],e.send($,$.$initialize,w),e.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace($,I),$},-1),I=k.$new,S(k,"$exception",function(c){var X,w,i=this;return X=q(arguments),w=X,re(i,"new",J(w))},-1),T(k,"$initialize",function(c){var X,w,i=this;return X=q(arguments),w=X,i.message=w.length>0?w[0]:A},-1),T(k,"$copy_instance_variables",function l(c){var X=l.$$p||A,w=this;l.$$p=null,Z(w,g(w,"copy_instance_variables",l,!1,!0),"copy_instance_variables",[c],X),w.message=c.message,w.cause=c.cause,w.stack=c.stack});function h(l){for(var c=[],X,w=0;w<l.length;w++){var i=l[w];!i||!i.$$is_string||((X=i.match(/^    at (.*?) \((.*?)\)$/))?c.push(X[2]+":in `"+X[1]+"'"):(X=i.match(/^    at (.*?)$/))?c.push(X[1]+":in `undefined'"):(X=i.match(/^  from (.*?)$/))?c.push(X[1]):(X=i.match(/^(.*?)@(.*?)$/))&&c.push(X[2]+":in `"+X[1]+"'"))}return c}return T(k,"$backtrace",function(){var c=this;if(c.backtrace)return c.backtrace;var X=c.stack;return typeof X<"u"&&X.$$is_string?c.backtrace=h(X.split(`
`)):X?c.backtrace=h(X):[]}),T(k,"$backtrace_locations",function(){var c,X=this;return X.backtrace_locations||(X.backtrace_locations=(c=X.$backtrace(),c===A||c==null?A:re(c,"map",[],function(i){return i==null&&(i=A),B(B(B("Thread"),"Backtrace"),"Location").$new(i)}))),X.backtrace_locations}),T(k,"$cause",function(){var c=this;return c.cause||A}),T(k,"$exception",function(c){var X=this;if(c==null&&(c=A),c===A||X===c)return X;var w=X.$clone();return w.message=c,X.backtrace&&(w.backtrace=X.backtrace.$dup()),w.stack=X.stack,w.cause=X.cause,w},-1),T(k,"$message",function(){var c=this;return c.$to_s()}),T(k,"$full_message",function(c){var X,w=this,i=A,a=A,$=A,n=A,t=A,r=A,s=A,u=A,f=A;return j.stderr==null&&(j.stderr=A),c==null&&(c=A),U(o("Hash","skip_raise")?"constant":A)?(c=new Map([["highlight",j.stderr["$tty?"]()],["order","top"]]).$merge(U(i=c)?i:new Map),X=[c["$[]"]("highlight"),c["$[]"]("order")],a=X[0],$=X[1],U([!0,!1]["$include?"](a))||$e.$raise(B("ArgumentError"),"expected true or false as highlight: "+a),U(["top","bottom"]["$include?"]($))||$e.$raise(B("ArgumentError"),"expected :top or :bottom as order: "+$),U(a)?(n="\x1B[1;4m",t="\x1B[1m",r="\x1B[m"):n=t=r="",s=w.$backtrace().$dup(),(W(s)||U(s["$empty?"]()))&&(s=w.$caller()),u=s.$shift(),f=""+u+": ",f=H(f,""+t+w.$to_s()+" ("+n+w.$class()+r+t+")"+r+`
`),f=H(f,re(s,"map",[],function(M){return M==null&&(M=A),"	from "+M+`
`}).$join()),U(w.$cause())&&(f=H(f,w.$cause().$full_message(new Map([["highlight",a]])))),ee($,"bottom")&&(f=f.$split(`
`).$reverse().$join(`
`),f=H(""+t+"Traceback"+r+` (most recent call last):
`,f)),f):""+w.message+`
`+w.stack},-1),T(k,"$inspect",function(){var c=this,X=A;return X=c.$to_s(),U(X["$empty?"]())?c.$class().$to_s():"#<"+c.$class().$to_s()+": "+c.$to_s()+">"}),T(k,"$set_backtrace",function(c){var X=this,w=!0,i,a;if(c===A)X.backtrace=A,X.stack="";else if(c.$$is_string)X.backtrace=[c],X.stack="  from "+c;else{if(c.$$is_array){for(i=0,a=c.length;i<a;i++)if(!c[i].$$is_string){w=!1;break}}else w=!1;w===!1&&$e.$raise(B("TypeError"),"backtrace must be Array of String"),X.backtrace=c,X.stack=re(c,"map",[],function(n){return n==null&&(n=A),H("  from ",n)}).join(`
`)}return c}),T(k,"$to_s",function(){var c=this,X=A,w=A;return U(X=U(w=c.message)?c.message.$to_s():w)?X:c.$class().$to_s()})}("::",Error,G),x("::",B("Exception"),"ScriptError"),x("::",B("ScriptError"),"SyntaxError"),x("::",B("ScriptError"),"LoadError"),x("::",B("ScriptError"),"NotImplementedError"),x("::",B("Exception"),"SystemExit"),x("::",B("Exception"),"NoMemoryError"),x("::",B("Exception"),"SignalException"),x("::",B("SignalException"),"Interrupt"),x("::",B("Exception"),"SecurityError"),x("::",B("Exception"),"SystemStackError"),x("::",B("Exception"),"StandardError"),x("::",B("StandardError"),"EncodingError"),x("::",B("StandardError"),"ZeroDivisionError"),x("::",B("StandardError"),"NameError"),x("::",B("NameError"),"NoMethodError"),x("::",B("StandardError"),"RuntimeError"),x("::",B("RuntimeError"),"FrozenError"),x("::",B("StandardError"),"LocalJumpError"),x("::",B("StandardError"),"TypeError"),x("::",B("StandardError"),"ArgumentError"),x("::",B("ArgumentError"),"UncaughtThrowError"),x("::",B("StandardError"),"IndexError"),x("::",B("IndexError"),"StopIteration"),x("::",B("StopIteration"),"ClosedQueueError"),x("::",B("IndexError"),"KeyError"),x("::",B("StandardError"),"RangeError"),x("::",B("RangeError"),"FloatDomainError"),x("::",B("StandardError"),"IOError"),x("::",B("IOError"),"EOFError"),x("::",B("StandardError"),"SystemCallError"),x("::",B("StandardError"),"RegexpError"),x("::",B("StandardError"),"ThreadError"),x("::",B("StandardError"),"FiberError"),C.$autoload("Errno","corelib/error/errno"),function(m,z){var F=x(m,z,"FrozenError");return F.$attr_reader("receiver"),T(F,"$initialize",function k(E,o){var d;k.$$p;var I=this;return k.$$p=null,o=b(o),d=y(o,"receiver"),d==null&&(d=A),Z(I,g(I,"initialize",k,!1,!0),"initialize",[E],null),I.receiver=d},-2)}("::",B("RuntimeError")),function(m,z){var F=x(m,z,"UncaughtThrowError"),k=F.$$prototype;return k.tag=A,F.$attr_reader("tag","value"),T(F,"$initialize",function E(o,d){E.$$p;var I=this;return E.$$p=null,d==null&&(d=A),I.tag=o,I.value=d,Z(I,g(I,"initialize",E,!1,!0),"initialize",["uncaught throw "+I.tag.$inspect()],null)},-2)}("::",B("ArgumentError")),function(m,z){var F=x(m,z,"NameError");return F.$attr_reader("name"),T(F,"$initialize",function k(E,o){k.$$p;var d=this;return k.$$p=null,o==null&&(o=A),Z(d,g(d,"initialize",k,!1,!0),"initialize",[E],null),d.name=o},-2)}("::",null),function(m,z){var F=x(m,z,"NoMethodError");return F.$attr_reader("args"),T(F,"$initialize",function k(E,o,d){k.$$p;var I=this;return k.$$p=null,o==null&&(o=A),d==null&&(d=[]),Z(I,g(I,"initialize",k,!1,!0),"initialize",[E,o],null),I.args=d},-2)}("::",null),function(m,z){var F=x(m,z,"StopIteration");return F.$attr_reader("result")}("::",null),function(m,z){var F=x(m,z,"KeyError"),k=F.$$prototype;return k.receiver=k.key=A,T(F,"$initialize",function E(o,d){var I,h;E.$$p;var l=this;return E.$$p=null,d=b(d),I=y(d,"receiver"),I==null&&(I=A),h=y(d,"key"),h==null&&(h=A),Z(l,g(l,"initialize",E,!1,!0),"initialize",[o],null),l.receiver=I,l.key=h},-2),T(F,"$receiver",function(){var o=this,d=A;return U(d=o.receiver)?d:$e.$raise(B("ArgumentError"),"no receiver is available")}),T(F,"$key",function(){var o=this,d=A;return U(d=o.key)?d:$e.$raise(B("ArgumentError"),"no key is available")})}("::",null),function(m,z){var F=x(m,z,"LocalJumpError");return F.$attr_reader("exit_value","reason"),T(F,"$initialize",function k(E,o,d){k.$$p;var I=this;return k.$$p=null,o==null&&(o=A),d==null&&(d="noreason"),Z(I,g(I,"initialize",k,!1,!0),"initialize",[E],null),I.exit_value=o,I.reason=d},-2)}("::",null),function(m,z){var F=L(m,"JS"),k=[F].concat(z);return x(k[0],null,"Error"),A}("::",G)};Opal.modules["corelib/constants"]=function(e){var x=e.const_set;e.nil;var q=e.$$$;return x("::","RUBY_PLATFORM","opal"),x("::","RUBY_ENGINE","opal"),x("::","RUBY_VERSION","3.2.0"),x("::","RUBY_ENGINE_VERSION","1.8.2"),x("::","RUBY_RELEASE_DATE","2023-11-23"),x("::","RUBY_PATCHLEVEL",0),x("::","RUBY_REVISION","0"),x("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),x("::","RUBY_DESCRIPTION","opal "+q("RUBY_ENGINE_VERSION")+" ("+q("RUBY_RELEASE_DATE")+" revision "+q("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(e){var x=e.Object;return e.nil,e.add_stubs("require"),x.$require("corelib/runtime"),x.$require("corelib/helpers"),x.$require("corelib/module"),x.$require("corelib/class"),x.$require("corelib/basic_object"),x.$require("corelib/kernel"),x.$require("corelib/main"),x.$require("corelib/error"),x.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(e){var x=e.klass,q=e.Kernel,j=e.def,S=e.return_val,re=e.ensure_kwargs,J=e.hash_get,T=e.NilClass,Z=e.slice,g=e.truthy,U=e.rb_gt,$e=e.alias,W=e.nil,H=e.$$$;return e.add_stubs("raise,name,new,>,length,Rational,to_i"),function(ee,C,b){var y=x(ee,C,"NilClass");return y.$$prototype.$$meta=y,function(L,G){return j(L,"$allocate",function(){var B=this;return q.$raise(H("TypeError"),"allocator undefined for "+B.$name())}),e.udef(L,"$new"),W}(e.get_singleton_class(y)),j(y,"$!",S(!0)),j(y,"$&",S(!1)),j(y,"$|",function(G){return G!==!1&&G!==W}),j(y,"$^",function(G){return G!==!1&&G!==W}),j(y,"$==",function(G){return G===W}),j(y,"$dup",S(W)),j(y,"$clone",function(G){return G=re(G),J(G,"freeze"),W},-1),j(y,"$inspect",S("nil")),j(y,"$nil?",S(!0)),j(y,"$singleton_class",function(){return T}),j(y,"$to_a",function(){return[]}),j(y,"$to_h",function(){return new Map}),j(y,"$to_i",S(0)),j(y,"$to_s",S("")),j(y,"$to_c",function(){return H("Complex").$new(0,0)}),j(y,"$rationalize",function(G){var A,B;return A=Z(arguments),B=A,g(U(B.$length(),1))&&q.$raise(H("ArgumentError")),q.$Rational(0,1)},-1),j(y,"$to_r",function(){return q.$Rational(0,1)}),j(y,"$instance_variables",function(){return[]}),$e(y,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(e){var x=e.klass,q=e.Kernel,j=e.def,S=e.return_self,re=e.ensure_kwargs,J=e.hash_get,T=e.slice,Z=e.truthy,g=e.send2,U=e.find_super,$e=e.to_a,W=e.alias,H=e.nil,ee=e.$$$;return e.add_stubs("raise,name,==,to_s,__id__"),function(C,b,y){var L=x(C,b,"Boolean");e.prop(L.$$prototype,"$$is_boolean",!0);for(var G=["$$class","$$meta"],A=0;A<G.length;A++)Object.defineProperty(L.$$prototype,G[A],{configurable:!0,enumerable:!1,get:function(){return this==!0?e.TrueClass:this==!1?e.FalseClass:e.Boolean}});return Object.defineProperty(L.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:H}}),function(B,m){return j(B,"$allocate",function(){var F=this;return q.$raise(ee("TypeError"),"allocator undefined for "+F.$name())}),e.udef(B,"$new"),H}(e.get_singleton_class(L)),j(L,"$__id__",function(){var m=this;return m.valueOf()?2:0}),j(L,"$!",function(){var m=this;return m!=!0}),j(L,"$&",function(m){var z=this;return z==!0?m!==!1&&m!==H:!1}),j(L,"$|",function(m){var z=this;return z==!0?!0:m!==!1&&m!==H}),j(L,"$^",function(m){var z=this;return z==!0?m===!1||m===H:m!==!1&&m!==H}),j(L,"$==",function(m){var z=this;return z==!0===m.valueOf()}),j(L,"$singleton_class",function(){var m=this;return m.$$meta}),j(L,"$to_s",function(){var m=this;return m==!0?"true":"false"}),j(L,"$dup",S),j(L,"$clone",function(m){var z=this;return m=re(m),J(m,"freeze"),z},-1),j(L,"$method_missing",function B(m,z){var F=B.$$p||H,k,E,o=this;B.$$p=null,k=T(arguments,1),E=k;var d=o.$$class.$$prototype[e.jsid(m)];return Z(typeof d<"u"&&!d.$$stub)||g(o,U(o,"method_missing",B,!1,!0),"method_missing",[m].concat($e(E)),F),e.send(o,d,E,F)},-2),j(L,"$respond_to_missing?",function(m,z){var F=this,k=F.$$class.$$prototype[e.jsid(m)];return typeof k<"u"&&!k.$$stub},-2),W(L,"eql?","=="),W(L,"equal?","=="),W(L,"inspect","to_s"),W(L,"object_id","__id__")}("::",Boolean),x("::",ee("Boolean"),"TrueClass"),x("::",ee("Boolean"),"FalseClass"),H};Opal.modules["corelib/comparable"]=function(e){var x=e.truthy,q=e.module,j=e.rb_gt,S=e.rb_lt,re=e.eqeqeq,J=e.Kernel,T=e.def,Z=e.nil,g=e.$$$;return e.add_stubs(">,<,===,raise,class,<=>,equal?"),function(U){var $e=q(U,"Comparable"),W=Z;function H(b){return e.is_a(b,e.Integer)?b:j(b,0)?1:S(b,0)?-1:0}function ee(b,y){var L;re(Z,W=y)||re(!0,W)||re(!1,W)||re(g("Integer"),W)||re(g("Float"),W)?L=y.$inspect():L=y.$$class,J.$raise(g("ArgumentError"),"comparison of "+b.$class()+" with "+L+" failed")}function C(b,y){var L=b["$<=>"](y);return x(L)||ee(b,y),H(L)}return T($e,"$==",function(y){var L=this,G=Z;return x(L["$equal?"](y))?!0:L["$<=>"]==e.Kernel["$<=>"]?!1:L.$$comparable?(L.$$comparable=!1,!1):x(G=L["$<=>"](y))?H(G)==0:!1}),T($e,"$>",function(y){var L=this;return C(L,y)>0}),T($e,"$>=",function(y){var L=this;return C(L,y)>=0}),T($e,"$<",function(y){var L=this;return C(L,y)<0}),T($e,"$<=",function(y){var L=this;return C(L,y)<=0}),T($e,"$between?",function(y,L){var G=this;return!(x(S(G,y))||x(j(G,L)))}),T($e,"$clamp",function(y,L){var G=this;L==null&&(L=Z);var A,B;if(L===Z&&(e.is_a(y,e.Range)||J.$raise(g("TypeError"),"wrong argument type "+y.$class()+" (expected Range)"),B=y.excl,L=y.end,y=y.begin,L!==Z&&B&&J.$raise(g("ArgumentError"),"cannot clamp with an exclusive range")),y!==Z&&L!==Z&&C(y,L)>0&&J.$raise(g("ArgumentError"),"min argument must be smaller than max argument"),y!==Z){if(A=C(G,y),A==0)return G;if(A<0)return y}return L!==Z&&(A=C(G,L),A>0)?L:G},-2)}("::")};Opal.modules["corelib/regexp"]=function(e){var x=e.coerce_to,q=e.prop,j=e.freeze,S=e.klass,re=e.const_set,J=e.send2,T=e.find_super,Z=e.def,g=e.truthy,U=e.gvars,$e=e.slice,W=e.Kernel,H=e.Opal,ee=e.alias,C=e.send,b=e.regexp,y=e.rb_plus,L=e.ensure_kwargs,G=e.hash_get,A=e.rb_ge,B=e.to_a,m=e.eqeqeq,z=e.rb_minus,F=e.return_ivar,k=[],E=e.nil,o=e.$$$;return e.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),S("::",o("StandardError"),"RegexpError"),function(d,I,h){var l=S(d,I,"Regexp"),c=[l].concat(h),X=e.$r(c);return re(l,"IGNORECASE",1),re(l,"EXTENDED",2),re(l,"MULTILINE",4),e.prop(l.$$prototype,"$$is_regexp",!0),function(w,i){var a=[w].concat(i),$=e.$r(a);return Z(w,"$allocate",function n(){var t=n.$$p||E,r=this,s=E;return n.$$p=null,s=J(r,T(r,"allocate",n,!1,!0),"allocate",[],t),s.uninitialized=!0,s}),Z(w,"$escape",function(t){return t=x(t,o("String"),"to_str"),e.escape_regexp(t)}),Z(w,"$last_match",function(t){return U["~"]==null&&(U["~"]=E),t==null&&(t=E),g(t["$nil?"]())?U["~"]:g(U["~"])?U["~"]["$[]"](t):E},-1),Z(w,"$union",function(t){var r,s,u=this;r=$e(arguments),s=r;var f,p,M,D,R;if(s.length==0)return/(?!)/;if(s.length==1&&s[0].$$is_regexp)return s[0];f=s[0].$$is_array,s.length>1&&f&&W.$raise(o("TypeError"),"no implicit conversion of Array into String"),f&&(s=s[0]),D=void 0,p=[];for(var V=0;V<s.length;V++)M=s[V],M.$$is_string?p.push(u.$escape(M)):M.$$is_regexp?(R=M.$options(),D!=null&&D!=R&&W.$raise(o("TypeError"),"All expressions must use the same options"),D=R,p.push("("+M.source+")")):p.push(u.$escape(M.$to_str()));return u.$new(p.$join("|"),D)},-1),Z(w,"$new",function(t,r){if(t.$$is_regexp)return new RegExp(t);if(t=H["$coerce_to!"](t,o("String"),"to_str"),t.charAt(t.length-1)==="\\"&&t.charAt(t.length-2)!=="\\"&&W.$raise(o("RegexpError"),"too short escape sequence: /"+t+"/"),t=t.replace("\\A","^").replace("\\z","$"),r===void 0||r["$!"]())return new RegExp(t);if(r.$$is_number){var s="";$("IGNORECASE")&r&&(s+="i"),$("MULTILINE")&r&&(s+="m"),r=s}else r="i";return new RegExp(t,r)},-2),ee(w,"compile","new"),ee(w,"quote","escape")}(e.get_singleton_class(l),c),Z(l,"$==",function(i){var a=this;return i instanceof RegExp&&a.toString()===i.toString()}),Z(l,"$===",function(i){var a=this;return a.$match(H["$coerce_to?"](i,o("String"),"to_str"))!==E}),Z(l,"$=~",function(i){var a=this,$=E;return U["~"]==null&&(U["~"]=E),g($=a.$match(i))?U["~"].$begin(0):$}),Z(l,"$freeze",function(){var i=this;return g(i["$frozen?"]())?i:(i.hasOwnProperty("$$g")||q(i,"$$g",null),i.hasOwnProperty("$$gm")||q(i,"$$gm",null),j(i))}),Z(l,"$inspect",function(){var i=this,a=/^\/(.*)\/([^\/]*)$/,$=i.toString(),n=a.exec($);if(n){for(var t=n[1],r=n[2],s=t.split(""),u=s.length,f=!1,p="",M=0;M<u;M++){var D=s[M];!f&&D=="/"&&(p=p.concat("\\")),p=p.concat(D),D=="\\"?f?f=!1:f=!0:f=!1}return"/"+p+"/"+r}else return $}),Z(l,"$match",function w(i,a){var $=w.$$p||E,n=this;if(U["~"]==null&&(U["~"]=E),w.$$p=null,n.uninitialized&&W.$raise(o("TypeError"),"uninitialized Regexp"),a===void 0){if(i===E)return U["~"]=E;var t=n.exec(x(i,o("String"),"to_str"));return t?(U["~"]=o("MatchData").$new(n,t),$===E?U["~"]:e.yield1($,U["~"])):U["~"]=E}if(a=x(a,o("Integer"),"to_int"),i===E||(i=x(i,o("String"),"to_str"),a<0&&(a+=i.length,a<0)))return U["~"]=E;for(var r,s=e.global_regexp(n);;){if(r=s.exec(i),r===null)return U["~"]=E;if(r.index>=a)return U["~"]=o("MatchData").$new(s,r),$===E?U["~"]:e.yield1($,U["~"]);s.lastIndex=r.index+1}},-2),Z(l,"$match?",function(i,a){var $=this;if($.uninitialized&&W.$raise(o("TypeError"),"uninitialized Regexp"),a===void 0)return i===E?!1:$.test(x(i,o("String"),"to_str"));if(a=x(a,o("Integer"),"to_int"),i===E||(i=x(i,o("String"),"to_str"),a<0&&(a+=i.length,a<0)))return!1;var n,t=e.global_regexp($);return n=t.exec(i),!(n===null||n.index<a)},-2),Z(l,"$names",function(){var i=this;return C(i.$source().$scan(b(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),Z(l,"$named_captures",function(){var i=this;return C(C(C(i.$source().$scan(b(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function($){return $==null&&($=E),C($,"map",[],function(t){return t==null&&(t=E),y(t.$last(),1)})})}),Z(l,"$~",function(){var i=this;return U._==null&&(U._=E),i["$=~"](U._)}),Z(l,"$source",function(){var i=this;return i.source}),Z(l,"$options",function(){var i=this;i.uninitialized&&W.$raise(o("TypeError"),"uninitialized Regexp");var a=0;return i.multiline&&(a|=X("MULTILINE")),i.ignoreCase&&(a|=X("IGNORECASE")),a}),Z(l,"$casefold?",function(){var i=this;return i.ignoreCase}),ee(l,"eql?","=="),ee(l,"to_s","source")}("::",RegExp,k),function(d,I,h){var l=S(d,I,"MatchData"),c=[l].concat(h),X=e.$r(c),w=l.$$prototype;return w.matches=E,l.$attr_reader("post_match","pre_match","regexp","string"),Z(l,"$initialize",function(a,$,n){var t,r=this;n=L(n),t=G(n,"no_matchdata"),t==null&&(t=!1),g(t)||(U["~"]=r),r.regexp=a,r.begin=$.index,r.string=$.input,r.pre_match=$.input.slice(0,$.index),r.post_match=$.input.slice($.index+$[0].length),r.matches=[];for(var s=0,u=$.length;s<u;s++){var f=$[s];f==null?r.matches.push(E):r.matches.push(f)}},-3),Z(l,"$match",function(a){var $=this,n=E;return g(n=$["$[]"](a))?n:g(a["$is_a?"](X("Integer")))&&g(A(a,$.$length()))?W.$raise(o("IndexError"),"index "+a+" out of matches"):E}),Z(l,"$match_length",function(a){var $,n=this;return $=n.$match(a),$===E||$==null?E:$.$length()}),Z(l,"$[]",function(a){var $,n,t=this;return $=$e(arguments),n=$,n[0].$$is_string?(t.$regexp().$names()["$include?"](n["$[]"](0))["$!"]()&&W.$raise(o("IndexError"),"undefined group name reference: "+n["$[]"](0)),t.$named_captures()["$[]"](n["$[]"](0))):C(t.matches,"[]",B(n))},-1),Z(l,"$offset",function(a){var $=this;return a!==0&&W.$raise(o("ArgumentError"),"MatchData#offset only supports 0th element"),[$.begin,$.begin+$.matches[a].length]}),Z(l,"$==",function(a){var $=this,n=E,t=E,r=E,s=E;return m(o("MatchData"),a)?g(n=g(t=g(r=g(s=$.string==a.string)?$.regexp.toString()==a.regexp.toString():s)?$.pre_match==a.pre_match:r)?$.post_match==a.post_match:t)?$.begin==a.begin:n:!1}),Z(l,"$begin",function(a){var $=this;return a!==0&&W.$raise(o("ArgumentError"),"MatchData#begin only supports 0th element"),$.begin}),Z(l,"$end",function(a){var $=this;return a!==0&&W.$raise(o("ArgumentError"),"MatchData#end only supports 0th element"),$.begin+$.matches[a].length}),Z(l,"$captures",function(){var a=this;return a.matches.slice(1)}),Z(l,"$named_captures",function(){var a=this,$=E;return $=a.$captures(),C(a.$regexp().$named_captures(),"transform_values",[],function(t){return t==null&&(t=E),$["$[]"](z(t.$last(),1))})}),Z(l,"$names",function(){var a=this;return a.$regexp().$names()}),Z(l,"$inspect",function(){var a=this,$="#<MatchData "+a.matches[0].$inspect();if(a.$regexp().$names()["$empty?"]())for(var n=1,t=a.matches.length;n<t;n++)$+=" "+n+":"+a.matches[n].$inspect();else C(a.$named_captures(),"each",[],function(s,u){return s==null&&(s=E),u==null&&(u=E),$+=" "+s+":"+u.$inspect()});return $+">"}),Z(l,"$length",function(){var a=this;return a.matches.length}),Z(l,"$to_a",F("matches")),Z(l,"$to_s",function(){var a=this;return a.matches[0]}),Z(l,"$values_at",function(a){var $,n,t=this;$=$e(arguments),n=$;var r,s,u,f=[];for(r=0;r<n.length;r++){if(n[r].$$is_range&&(s=n[r].$to_a(),s.unshift(r,1),Array.prototype.splice.apply(n,s)),u=H["$coerce_to!"](n[r],o("Integer"),"to_int"),u<0&&(u+=t.matches.length,u<0)){f.push(E);continue}f.push(t.matches[u])}return f},-1),ee(l,"eql?","=="),ee(l,"size","length")}(k[0],null,k)};Opal.modules["corelib/string"]=function(e){var x=e.coerce_to,q=e.respond_to,j=e.global_multiline_regexp,S=e.prop,re=e.opal32_init,J=e.opal32_add,T=e.klass,Z=e.send2,g=e.find_super,U=e.def,$e=e.Opal,W=e.defs,H=e.slice,ee=e.send,C=e.to_a,b=e.extract_kwargs,y=e.ensure_kwargs,L=e.hash_get,G=e.eqeqeq,A=e.Kernel,B=e.truthy,m=e.gvars,z=e.rb_divide,F=e.rb_plus,k=e.eqeq,E=e.alias,o=e.const_set,d=e.top,I=[],h=e.$r(I),l=e.nil,c=e.$$$;return e.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),d.$require("corelib/comparable"),d.$require("corelib/regexp"),function(X,w,i){var a=T(X,w,"String"),$=[a].concat(i),n=e.$r($);a.$include(c("Comparable")),e.prop(a.$$prototype,"$$is_string",!0);var t=new Map;(function(){U(a,"$__id__",function s(){var u=s.$$p||l,f=this;if(s.$$p=null,typeof f=="object")return Z(f,g(f,"__id__",s,!1,!0),"__id__",[],u);if(t.has(f))return t.get(f);var p=e.uid();return t.set(f,p),p}),U(a,"$hash",function(){var u=this,f=re(),p,M=u.length;for(f=J(f,5),f=J(f,M),p=0;p<M;p++)f=J(f,u.charCodeAt(p));return f})})(),W(a,"$try_convert",function(u){return $e["$coerce_to?"](u,c("String"),"to_str")}),W(a,"$new",function(u){var f,p,M=this;f=H(arguments),p=f;var D=p[0]||"",R=p[p.length-1];return D=x(D,c("String"),"to_str"),R&&R.$$is_hash&&R.has("encoding")&&(D=D.$force_encoding(R.get("encoding").value)),D=new M.$$constructor(D),D.$initialize.$$pristine||ee(D,"initialize",C(p)),D},-1),U(a,"$initialize",function(u,f){var p,M;return p=H(arguments),M=b(p),M=y(M),p.length>0&&p.shift(),L(M,"encoding"),L(M,"capacity"),l},-1),U(a,"$%",function(u){var f=this;return G(c("Array"),u)?ee(f,"format",[f].concat(C(u))):f.$format(f,u)}),U(a,"$*",function(u){var f=this;if(u=x(u,c("Integer"),"to_int"),u<0&&A.$raise(c("ArgumentError"),"negative argument"),u===0)return"";var p="",M=f.toString();for(M.length*u>=1<<28&&A.$raise(c("RangeError"),"multiply count must not overflow maximum string size");(u&1)===1&&(p+=M),u>>>=1,u!==0;)M+=M;return p}),U(a,"$+",function(u){var f=this;if(u=x(u,c("String"),"to_str"),u==""&&f.$$class===e.String)return f;if(f==""&&u.$$class===e.String)return u;var p=f+u;return f.encoding===p.encoding&&u.encoding===p.encoding||f.encoding.name==="UTF-8"||u.encoding.name==="UTF-8"?p:e.enc(p,f.encoding)}),U(a,"$<=>",function(u){var f=this;if(B(u["$respond_to?"]("to_str")))return u=u.$to_str().$to_s(),f>u?1:f<u?-1:0;var p=u["$<=>"](f);return p===l?l:p>0?-1:p<0?1:0}),U(a,"$==",function(u){var f=this;return u.$$is_string?f.toString()===u.toString():q(u,"$to_str")?u["$=="](f):!1}),U(a,"$=~",function(u){var f=this;return u.$$is_string&&A.$raise(c("TypeError"),"type mismatch: String given"),u["$=~"](f)}),U(a,"$[]",function(u,f){var p=this,M=p.length,D,R;if(u.$$is_range)return D=u.excl,R=u,f=u.end===l?-1:x(u.end,c("Integer"),"to_int"),u=u.begin===l?0:x(u.begin,c("Integer"),"to_int"),Math.abs(u)>M?l:(u<0&&(u+=M),f<0&&(f+=M),(!D||R.end===l)&&(f+=1),f=f-u,f<0&&(f=0),p.substr(u,f));if(u.$$is_string)return f!=null&&A.$raise(c("TypeError")),p.indexOf(u)!==-1?u:l;if(u.$$is_regexp){var V=p.match(u);return V===null?(m["~"]=l,l):(m["~"]=c("MatchData").$new(u,V),f==null?V[0]:(f=x(f,c("Integer"),"to_int"),f<0&&-f<V.length?V[f+=V.length]:f>=0&&f<V.length?V[f]:l))}return u=x(u,c("Integer"),"to_int"),u<0&&(u+=M),f==null?u>=M||u<0?l:p.substr(u,1):(f=x(f,c("Integer"),"to_int"),f<0||u>M||u<0?l:p.substr(u,f))},-2),U(a,"$b",function(){var u=this;return new String(u).$force_encoding("binary")}),U(a,"$capitalize",function(){var u=this;return u.charAt(0).toUpperCase()+u.substr(1).toLowerCase()}),U(a,"$casecmp",function(u){var f=this;if(!B(u["$respond_to?"]("to_str")))return l;u=x(u,c("String"),"to_str").$to_s();var p=/^[\x00-\x7F]*$/;return p.test(f)&&p.test(u)&&(f=f.toLowerCase(),u=u.toLowerCase()),f["$<=>"](u)}),U(a,"$casecmp?",function(u){var f=this,p=f.$casecmp(u);return p===l?l:p===0}),U(a,"$center",function(u,f){var p=this;if(f==null&&(f=" "),u=x(u,c("Integer"),"to_int"),f=x(f,c("String"),"to_str").$to_s(),B(f["$empty?"]())&&A.$raise(c("ArgumentError"),"zero width padding"),B(u<=p.length))return p;var M=p.$ljust(z(F(u,p.length),2).$ceil(),f),D=p.$rjust(z(F(u,p.length),2).$floor(),f);return D+M.slice(p.length)},-2),U(a,"$chomp",function(u){var f=this;if(m["/"]==null&&(m["/"]=l),u==null&&(u=m["/"]),B(u===l||f.length===0))return f;u=$e["$coerce_to!"](u,c("String"),"to_str").$to_s();var p;if(u===`
`)p=f.replace(/\r?\n?$/,"");else if(u==="")p=f.replace(/(\r?\n)+$/,"");else if(f.length>=u.length){var M=f.substr(f.length-u.length,u.length);M===u&&(p=f.substr(0,f.length-u.length))}return p??f},-1),U(a,"$chop",function(){var u=this,f=u.length,p;return f<=1?p="":u.charAt(f-1)===`
`&&u.charAt(f-2)==="\r"?p=u.substr(0,f-2):p=u.substr(0,f-1),p}),U(a,"$chr",function(){var u=this;return u.charAt(0)}),U(a,"$clone",function(u){var f,p=this,M=l;return u=y(u),f=L(u,"freeze"),f==null&&(f=l),B(f["$nil?"]())||k(f,!0)||k(f,!1)||p.$raise(n("ArgumentError"),"unexpected value for freeze: "+f.$class()),M=new String(p),M.$copy_singleton_methods(p),M.$initialize_clone(p,new Map([["freeze",f]])),k(f,!0)?M.$$frozen||(M.$$frozen=!0):B(f["$nil?"]())&&p.$$frozen&&(M.$$frozen=!0),M},-1),U(a,"$dup",function(){var u=this,f=l;return f=new String(u),f.$initialize_dup(u),f}),U(a,"$count",function(u){var f,p,M=this;f=H(arguments),p=f,p.length===0&&A.$raise(c("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var D=r(p);return D===null?0:M.length-M.replace(new RegExp(D,"g"),"").length},-1),U(a,"$delete",function(u){var f,p,M=this;f=H(arguments),p=f,p.length===0&&A.$raise(c("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var D=r(p);return D===null?M:M.replace(new RegExp(D,"g"),"")},-1),U(a,"$delete_prefix",function(u){var f=this;return u.$$is_string||(u=x(u,c("String"),"to_str")),f.slice(0,u.length)===u?f.slice(u.length):f}),U(a,"$delete_suffix",function(u){var f=this;return u.$$is_string||(u=x(u,c("String"),"to_str")),f.slice(f.length-u.length)===u?f.slice(0,f.length-u.length):f}),U(a,"$downcase",function(){var u=this;return u.toLowerCase()}),U(a,"$each_line",function s(u,f){var p=s.$$p||l,M,D,R,V,O=this;if(m["/"]==null&&(m["/"]=l),s.$$p=null,M=H(arguments),D=b(M),D=y(D),M.length>0&&(R=M.shift()),R==null&&(R=m["/"]),V=L(D,"chomp"),V==null&&(V=!1),p===l)return O.$enum_for("each_line",R,new Map([["chomp",V]]));if(R===l)return e.yield1(p,O),O;R=x(R,c("String"),"to_str");var ae,le,_e,de,ge,ve,me,be;if(R.length===0){for(ae=O.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,_e=ae.length;le<_e;le+=2)(ae[le]||ae[le+1])&&(be=(ae[le]||"")+(ae[le+1]||""),V&&(be=be.$chomp(`
`)),e.yield1(p,be));return O}for(ge=O.$chomp(R),ve=O.length!=ge.length,me=ge.split(R),le=0,de=me.length;le<de;le++)be=me[le],(le<de-1||ve)&&(be+=R),V&&(be=be.$chomp(R)),e.yield1(p,be);return O},-1),U(a,"$empty?",function(){var u=this;return u.length===0}),U(a,"$end_with?",function(u){var f,p,M=this;f=H(arguments),p=f;for(var D=0,R=p.length;D<R;D++){var V=x(p[D],c("String"),"to_str").$to_s();if(M.length>=V.length&&M.substr(M.length-V.length,V.length)==V)return!0}return!1},-1),U(a,"$gsub",function s(u,f){var p=s.$$p||l,M=this;if(s.$$p=null,f===void 0&&p===l)return M.$enum_for("gsub",u);var D="",R=l,V=0,O,ae;u.$$is_regexp?u=j(u):(u=x(u,c("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(O=u.exec(M),O===null){m["~"]=l,D+=M.slice(V);break}R=c("MatchData").$new(u,O),f===void 0?(le=u.lastIndex,ae=p(O[0]),u.lastIndex=le):f.$$is_hash?ae=f["$[]"](O[0]).$to_s():(f.$$is_string||(f=x(f,c("String"),"to_str")),ae=f.replace(/([\\]+)([0-9+&`'])/g,function(_e,de,ge){if(de.length%2===0)return _e;switch(ge){case"+":for(var ve=O.length-1;ve>0;ve--)if(O[ve]!==void 0)return de.slice(1)+O[ve];return"";case"&":return de.slice(1)+O[0];case"`":return de.slice(1)+M.slice(0,O.index);case"'":return de.slice(1)+M.slice(O.index+O[0].length);default:return de.slice(1)+(O[ge]||"")}}).replace(/\\\\/g,"\\")),u.lastIndex===O.index?(D+=M.slice(V,O.index)+ae+(M[O.index]||""),u.lastIndex+=1):D+=M.slice(V,O.index)+ae,V=u.lastIndex}return m["~"]=R,D},-2),U(a,"$hex",function(){var u=this;return u.$to_i(16)}),U(a,"$include?",function(u){var f=this;return u.$$is_string||(u=x(u,c("String"),"to_str")),f.indexOf(u)!==-1}),U(a,"$index",function(u,f){var p=this,M,D,R;if(f===void 0)f=0;else if(f=x(f,c("Integer"),"to_int"),f<0&&(f+=p.length,f<0))return l;if(u.$$is_regexp)for(R=j(u);;){if(D=R.exec(p),D===null){m["~"]=l,M=-1;break}if(D.index>=f){m["~"]=c("MatchData").$new(R,D),M=D.index;break}R.lastIndex=D.index+1}else u=x(u,c("String"),"to_str"),u.length===0&&f>p.length?M=-1:M=p.indexOf(u,f);return M===-1?l:M},-2),U(a,"$inspect",function(){var u=this,f=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},M=u.replace(f,function(D){return p[D]?p[D]:(D=D.charCodeAt(0),D<=255&&(u.encoding["$binary?"]()||u.internal_encoding["$binary?"]())?"\\x"+("00"+D.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+D.toString(16).toUpperCase()).slice(-4))});return'"'+M.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),U(a,"$intern",function(){var u=this;return u.toString()}),U(a,"$length",function(){var u=this;return u.length}),E(a,"size","length"),U(a,"$lines",function s(u,f){var p=s.$$p||l,M,D,R,V,O=this,ae=l;return m["/"]==null&&(m["/"]=l),s.$$p=null,M=H(arguments),D=b(M),D=y(D),M.length>0&&(R=M.shift()),R==null&&(R=m["/"]),V=L(D,"chomp"),V==null&&(V=!1),ae=ee(O,"each_line",[R,new Map([["chomp",V]])],p.$to_proc()),B(p)?O:ae.$to_a()},-1),U(a,"$ljust",function(u,f){var p=this;if(f==null&&(f=" "),u=x(u,c("Integer"),"to_int"),f=x(f,c("String"),"to_str").$to_s(),B(f["$empty?"]())&&A.$raise(c("ArgumentError"),"zero width padding"),B(u<=p.length))return p;var M=-1,D="";for(u-=p.length;++M<u;)D+=f;return p+D.slice(0,u)},-2),U(a,"$lstrip",function(){var u=this;return u.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),U(a,"$ascii_only?",function(){var u=this;return u.encoding.ascii?/^[\x00-\x7F]*$/.test(u):!1}),U(a,"$match",function s(u,f){var p=s.$$p||l,M=this;return s.$$p=null,(G(n("String"),u)||B(u["$respond_to?"]("to_str")))&&(u=c("Regexp").$new(u.$to_str())),G(c("Regexp"),u)||A.$raise(c("TypeError"),"wrong argument type "+u.$class()+" (expected Regexp)"),ee(u,"match",[M,f],p.$to_proc())},-2),U(a,"$match?",function(u,f){var p=this;return(G(n("String"),u)||B(u["$respond_to?"]("to_str")))&&(u=c("Regexp").$new(u.$to_str())),G(c("Regexp"),u)||A.$raise(c("TypeError"),"wrong argument type "+u.$class()+" (expected Regexp)"),u["$match?"](p,f)},-2),U(a,"$next",function(){var u=this,f=u.length;if(f===0)return"";for(var p=u,M=u.search(/[a-zA-Z0-9]/),D=!1,R;f--;){if(R=u.charCodeAt(f),R>=48&&R<=57||R>=65&&R<=90||R>=97&&R<=122)switch(R){case 57:D=!0,R=48;break;case 90:D=!0,R=65;break;case 122:D=!0,R=97;break;default:D=!1,R+=1}else M===-1?R===255?(D=!0,R=0):(D=!1,R+=1):D=!0;if(p=p.slice(0,f)+String.fromCharCode(R)+p.slice(f+1),D&&(f===0||f===M)){switch(R){case 65:break;case 97:break;default:R+=1}f===0?p=String.fromCharCode(R)+p:p=p.slice(0,f)+String.fromCharCode(R)+p.slice(f),D=!1}if(!D)break}return p}),U(a,"$oct",function(){var u=this,f,p=u,M=8;return/^\s*_/.test(p)?0:(p=p.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(D,R,V,O){switch(O.charAt(0)){case"+":case"-":return D;case"0":if(O.charAt(1)==="x"&&V==="0x")return D}switch(V){case"0b":M=2;break;case"0":case"0o":M=8;break;case"0d":M=10;break;case"0x":M=16;break}return R+O}),f=parseInt(p.replace(/_(?!_)/g,""),M),isNaN(f)?0:f)}),U(a,"$ord",function(){var u=this;return typeof u.codePointAt=="function"?u.codePointAt(0):u.charCodeAt(0)}),U(a,"$partition",function(u){var f=this,p,M;return u.$$is_regexp?(M=u.exec(f),M===null?p=-1:(c("MatchData").$new(u,M),u=M[0],p=M.index)):(u=x(u,c("String"),"to_str"),p=f.indexOf(u)),p===-1?[f,"",""]:[f.slice(0,p),f.slice(p,p+u.length),f.slice(p+u.length)]}),U(a,"$reverse",function(){var u=this;return u.split("").reverse().join("")}),U(a,"$rindex",function(u,f){var p=this,M,D,R,V;if(f===void 0)f=p.length;else if(f=x(f,c("Integer"),"to_int"),f<0&&(f+=p.length,f<0))return l;if(u.$$is_regexp){for(D=null,R=j(u);V=R.exec(p),!(V===null||V.index>f);)D=V,R.lastIndex=D.index+1;D===null?(m["~"]=l,M=-1):(c("MatchData").$new(R,D),M=D.index)}else u=x(u,c("String"),"to_str"),M=p.lastIndexOf(u,f);return M===-1?l:M},-2),U(a,"$rjust",function(u,f){var p=this;if(f==null&&(f=" "),u=x(u,c("Integer"),"to_int"),f=x(f,c("String"),"to_str").$to_s(),B(f["$empty?"]())&&A.$raise(c("ArgumentError"),"zero width padding"),B(u<=p.length))return p;var M=Math.floor(u-p.length),D=Math.floor(M/f.length),R=Array(D+1).join(f),V=M-R.length;return R+f.slice(0,V)+p},-2),U(a,"$rpartition",function(u){var f=this,p,M,D,R;if(u.$$is_regexp){for(M=null,D=j(u);R=D.exec(f),R!==null;)M=R,D.lastIndex=M.index+1;M===null?p=-1:(c("MatchData").$new(D,M),u=M[0],p=M.index)}else u=x(u,c("String"),"to_str"),p=f.lastIndexOf(u);return p===-1?["","",f]:[f.slice(0,p),f.slice(p,p+u.length),f.slice(p+u.length)]}),U(a,"$rstrip",function(){var u=this;return u.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),U(a,"$scan",function s(u,f){var p=s.$$p||l,M,D=this;s.$$p=null,f=y(f),M=L(f,"no_matchdata"),M==null&&(M=!1);var R=[],V=l,O;for(u.$$is_regexp?u=j(u):(u=x(u,c("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(O=u.exec(D))!=null;)V=c("MatchData").$new(u,O,new Map([["no_matchdata",M]])),p===l?O.length==1?R.push(O[0]):R.push(V.$captures()):O.length==1?e.yield1(p,O[0]):e.yield1(p,V.$captures()),u.lastIndex===O.index&&(u.lastIndex+=1);return M||(m["~"]=V),p!==l?D:R},-2),U(a,"$singleton_class",function(){var u=this;return e.get_singleton_class(u)}),U(a,"$split",function(u,f){var p=this,M=l;if(m[";"]==null&&(m[";"]=l),p.length===0)return[];if(f===void 0)f=0;else if(f=$e["$coerce_to!"](f,c("Integer"),"to_int"),f===1)return[p];(u===void 0||u===l)&&(u=B(M=m[";"])?M:" ");var D=[],R=p.toString(),V=0,O,ae=0,le=0,_e,de;if(u.$$is_regexp?u=j(u):(u=x(u,c("String"),"to_str").$to_s(),u===" "&&(u=/\s+/gm,R=R.replace(/^\s+/,""))),D=R.split(u),D.length===1&&D[0]===R)return[D[0]];for(;(_e=D.indexOf(void 0))!==-1;)D.splice(_e,1);if(f===0){for(;D[D.length-1]==="";)D.pop();return D}if(u.$$is_regexp||(u=e.escape_regexp(u),u=new RegExp(u,"gm")),O=u.exec(R),f<0){if(O!==null&&O[0]===""&&u.source.indexOf("(?=")===-1)for(_e=0,de=O.length;_e<de;_e++)D.push("");return D}if(O!==null&&O[0]==="")return le=(O.length-1)*(f-1)+f,D.splice(le-1,D.length-1,D.slice(le-1).join("")),D;if(f>=D.length)return D;for(;O!==null&&(ae++,V=u.lastIndex,le+=O.length,ae+1!==f);)O=u.exec(R);return D.splice(le,D.length-1,R.slice(V)),D},-1),U(a,"$squeeze",function(u){var f,p,M=this;if(f=H(arguments),p=f,p.length===0)return M.replace(/(.)\1+/g,"$1");var D=r(p);return D===null?M:M.replace(new RegExp("("+D+")\\1+","g"),"$1")},-1),U(a,"$start_with?",function(u){var f,p,M=this;f=H(arguments),p=f;for(var D=0,R=p.length;D<R;D++)if(p[D].$$is_regexp){var V=p[D],O=V.exec(M);if(O!=null&&O.index===0)return m["~"]=c("MatchData").$new(V,O),!0;m["~"]=l}else{var ae=x(p[D],c("String"),"to_str").$to_s();if(M.length>=ae.length&&M.startsWith(ae))return!0}return!1},-1),U(a,"$strip",function(){var u=this;return u.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),U(a,"$sub",function s(u,f){var p=s.$$p||l,M=this;s.$$p=null,u.$$is_regexp||(u=x(u,c("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var D,R=u.exec(M);return R===null?(m["~"]=l,D=M.toString()):(c("MatchData").$new(u,R),f===void 0?(p===l&&A.$raise(c("ArgumentError"),"wrong number of arguments (1 for 2)"),D=M.slice(0,R.index)+p(R[0])+M.slice(R.index+R[0].length)):f.$$is_hash?D=M.slice(0,R.index)+f["$[]"](R[0]).$to_s()+M.slice(R.index+R[0].length):(f=x(f,c("String"),"to_str"),f=f.replace(/([\\]+)([0-9+&`'])/g,function(V,O,ae){if(O.length%2===0)return V;switch(ae){case"+":for(var le=R.length-1;le>0;le--)if(R[le]!==void 0)return O.slice(1)+R[le];return"";case"&":return O.slice(1)+R[0];case"`":return O.slice(1)+M.slice(0,R.index);case"'":return O.slice(1)+M.slice(R.index+R[0].length);default:return O.slice(1)+(R[ae]||"")}}).replace(/\\\\/g,"\\"),D=M.slice(0,R.index)+f+M.slice(R.index+R[0].length))),D},-2),U(a,"$sum",function(u){var f=this;u==null&&(u=16),u=x(u,c("Integer"),"to_int");for(var p=0,M=f.length,D=0;D<M;D++)p+=f.charCodeAt(D);return u<=0?p:p&Math.pow(2,u)-1},-1),U(a,"$swapcase",function(){var u=this,f=u.replace(/([a-z]+)|([A-Z]+)/g,function(p,M,D){return M?p.toUpperCase():p.toLowerCase()});return f}),U(a,"$to_f",function(){var u=this;if(u.charAt(0)==="_")return 0;var f=parseFloat(u.replace(/_/g,""));return isNaN(f)||f==1/0||f==-1/0?0:f}),U(a,"$to_i",function(u){var f=this;u==null&&(u=10);var p,M=f.toLowerCase(),D=x(u,c("Integer"),"to_int");return(D===1||D<0||D>36)&&A.$raise(c("ArgumentError"),"invalid radix "+D),/^\s*_/.test(M)?0:(M=M.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(R,V,O,ae){switch(ae.charAt(0)){case"+":case"-":return R;case"0":if(ae.charAt(1)==="x"&&O==="0x"&&(D===0||D===16))return R}switch(O){case"0b":if(D===0||D===2)return D=2,V+ae;break;case"0":case"0o":if(D===0||D===8)return D=8,V+ae;break;case"0d":if(D===0||D===10)return D=10,V+ae;break;case"0x":if(D===0||D===16)return D=16,V+ae;break}return R}),p=parseInt(M.replace(/_(?!_)/g,""),D),isNaN(p)?0:p)},-1),U(a,"$to_proc",function s(){s.$$p;var u=this,f=l,p=l,M=l;return s.$$p=null,f=u.valueOf(),p=e.jsid(f),M=ee(A,"proc",[],function D(R){var V=D.$$p||l,O,ae;D.$$p=null,O=H(arguments),ae=O,ae.length===0&&A.$raise(c("ArgumentError"),"no receiver given");var le=ae[0];le==null&&(le=l);var _e=le[p];return _e?ae=ae.slice(1):(_e=le.$method_missing,ae[0]=f),typeof V=="function"&&(_e.$$p=V),ae.length===0?_e.call(le):_e.apply(le,ae)},-1),M.$$source_location=l,M}),U(a,"$to_s",function(){var u=this;return u.toString()}),U(a,"$tr",function(u,f){var p=this;if(u=x(u,c("String"),"to_str").$to_s(),f=x(f,c("String"),"to_str").$to_s(),u.length==0||u===f)return p;var M,D,R,V,O,ae,le,_e={},de=u.split(""),ge=de.length,ve=f.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],ge-=1);var N=[],P=null;for(D=!1,M=0;M<ge;M++)if(V=de[M],P==null)P=V,N.push(V);else if(V==="-")P==="-"?(N.push("-"),N.push("-")):M==ge-1?N.push("-"):D=!0;else if(D){for(O=P.charCodeAt(0),ae=V.charCodeAt(0),O>ae&&A.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),R=O+1;R<ae;R++)N.push(String.fromCharCode(R));N.push(V),D=null,P=null}else N.push(V);if(de=N,ge=de.length,be)for(M=0;M<ge;M++)_e[de[M]]=!0;else{if(me>0){var Y=[],Q=null;for(D=!1,M=0;M<me;M++)if(V=ve[M],Q==null)Q=V,Y.push(V);else if(V==="-")Q==="-"?(Y.push("-"),Y.push("-")):M==me-1?Y.push("-"):D=!0;else if(D){for(O=Q.charCodeAt(0),ae=V.charCodeAt(0),O>ae&&A.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),R=O+1;R<ae;R++)Y.push(String.fromCharCode(R));Y.push(V),D=null,Q=null}else Y.push(V);ve=Y,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(M=0;M<ne;M++)ve.push(se)}for(M=0;M<ge;M++)_e[de[M]]=ve[M]}var oe="";for(M=0,le=p.length;M<le;M++){V=p.charAt(M);var fe=_e[V];be?oe+=fe==null?ie:V:oe+=fe??V}return oe}),U(a,"$tr_s",function(u,f){var p=this;if(u=x(u,c("String"),"to_str").$to_s(),f=x(f,c("String"),"to_str").$to_s(),u.length==0)return p;var M,D,R,V,O,ae,le,_e={},de=u.split(""),ge=de.length,ve=f.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],ge-=1);var N=[],P=null;for(D=!1,M=0;M<ge;M++)if(V=de[M],P==null)P=V,N.push(V);else if(V==="-")P==="-"?(N.push("-"),N.push("-")):M==ge-1?N.push("-"):D=!0;else if(D){for(O=P.charCodeAt(0),ae=V.charCodeAt(0),O>ae&&A.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),R=O+1;R<ae;R++)N.push(String.fromCharCode(R));N.push(V),D=null,P=null}else N.push(V);if(de=N,ge=de.length,be)for(M=0;M<ge;M++)_e[de[M]]=!0;else{if(me>0){var Y=[],Q=null;for(D=!1,M=0;M<me;M++)if(V=ve[M],P==null)P=V,Y.push(V);else if(V==="-")Q==="-"?(Y.push("-"),Y.push("-")):M==me-1?Y.push("-"):D=!0;else if(D){for(O=P.charCodeAt(0),ae=V.charCodeAt(0),O>ae&&A.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),R=O+1;R<ae;R++)Y.push(String.fromCharCode(R));Y.push(V),D=null,P=null}else Y.push(V);ve=Y,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(M=0;M<ne;M++)ve.push(se)}for(M=0;M<ge;M++)_e[de[M]]=ve[M]}var oe="",fe=null;for(M=0,le=p.length;M<le;M++){V=p.charAt(M);var _=_e[V];be?_==null?fe==null&&(oe+=ie,fe=!0):(oe+=V,fe=null):_!=null?(fe==null||fe!==_)&&(oe+=_,fe=_):(oe+=V,fe=null)}return oe}),U(a,"$upcase",function(){var u=this;return u.toUpperCase()}),U(a,"$upto",function s(u,f){var p=s.$$p||l,M=this;if(s.$$p=null,f==null&&(f=!1),p===l)return M.$enum_for("upto",u,f);var D,R,V=M.toString();if(u=x(u,c("String"),"to_str"),V.length===1&&u.length===1)for(D=V.charCodeAt(0),R=u.charCodeAt(0);D<=R&&!(f&&D===R);)p(String.fromCharCode(D)),D+=1;else if(parseInt(V,10).toString()===V&&parseInt(u,10).toString()===u)for(D=parseInt(V,10),R=parseInt(u,10);D<=R&&!(f&&D===R);)p(D.toString()),D+=1;else for(;V.length<=u.length&&V<=u&&!(f&&V===u);)p(V),V=V.$succ();return M},-2);function r(s){function u(_e){var de="",ge,ve=_e.length,me,be,ie,N,P;for(ge=0;ge<ve;ge++)if(me=_e.charAt(ge),me==="-"&&ge>0&&ge<ve-1&&!be){for(ie=_e.charCodeAt(ge-1),N=_e.charCodeAt(ge+1),ie>N&&A.$raise(c("ArgumentError"),'invalid range "'+ie+"-"+N+'" in string transliteration'),P=ie+1;P<N+1;P++)de+=String.fromCharCode(P);be=!0,ge++}else be=me==="\\",de+=me;return de}function f(_e,de){if(_e.length===0)return de;var ge="",ve,me=_e.length,be;for(ve=0;ve<me;ve++)be=_e.charAt(ve),de.indexOf(be)!==-1&&(ge+=be);return ge}var p,M,D,R,V,O,ae="",le="";for(p=0,M=s.length;p<M;p++)D=x(s[p],c("String"),"to_str"),R=D.charAt(0)==="^"&&D.length>1,D=u(R?D.slice(1):D),R?le=f(le,D):ae=f(ae,D);if(ae.length>0&&le.length>0){for(O="",p=0,M=ae.length;p<M;p++)V=ae.charAt(p),le.indexOf(V)===-1&&(O+=V);ae=O,le=""}return ae.length>0?"["+c("Regexp").$escape(ae)+"]":le.length>0?"[^"+c("Regexp").$escape(le)+"]":null}return U(a,"$instance_variables",function(){return[]}),W(a,"$_load",function(u){var f,p,M=this;return f=H(arguments),p=f,ee(M,"new",C(p))},-1),U(a,"$unicode_normalize",function(u){var f=this;return u==null&&(u="nfc"),B(["nfc","nfd","nfkc","nfkd"]["$include?"](u))||A.$raise(c("ArgumentError"),"Invalid normalization form "+u),f.normalize(u.$upcase())},-1),U(a,"$unicode_normalized?",function(u){var f=this;return u==null&&(u="nfc"),f.$unicode_normalize(u)["$=="](f)},-1),U(a,"$unpack",function(u){return A.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),U(a,"$unpack1",function(u){return A.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),U(a,"$freeze",function(){var u=this;return typeof u=="string"||S(u,"$$frozen",!0),u}),U(a,"$-@",function(){var u=this;return typeof u=="string"||u.$$frozen?u:u.encoding.name=="UTF-8"&&u.internal_encoding.name=="UTF-8"?u.toString():u.$dup().$freeze()}),U(a,"$frozen?",function(){var u=this;return typeof u=="string"||u.$$frozen===!0}),E(a,"+@","dup"),E(a,"===","=="),E(a,"byteslice","[]"),E(a,"eql?","=="),E(a,"equal?","==="),E(a,"object_id","__id__"),E(a,"slice","[]"),E(a,"succ","next"),E(a,"to_str","to_s"),E(a,"to_sym","intern"),$e.$pristine(a,"initialize")}("::",String,I),o(I[0],"Symbol",h("String"))};Opal.modules["corelib/enumerable"]=function(e){var x=e.truthy,q=e.coerce_to,j=e.yield1,S=e.yieldX,re=e.deny_frozen_access,J=e.module,T=e.send,Z=e.slice,g=e.to_a,U=e.Opal,$e=e.thrower,W=e.def,H=e.Kernel,ee=e.return_val,C=e.rb_gt,b=e.rb_times,y=e.rb_lt,L=e.eqeq,G=e.rb_plus,A=e.rb_minus,B=e.rb_divide,m=e.rb_le,z=e.lambda,F=e.not,k=e.alias,E=[],o=e.nil,d=e.$$$;return e.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(I,h){var l=J(I,"Enumerable"),c=[l].concat(h),X=e.$r(c);function w(i){return i.length===0&&(i=[o]),i.length>1&&(i=[i]),i}return W(l,"$all?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,x(a!==void 0)?T(t,"each",[],function r(s){var u,f,p=o;if(u=Z(arguments),f=u,p=w(f),x(T(a,"public_send",["==="].concat(g(p)))))return o;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):n!==o?T(t,"each",[],function r(s){var u,f;if(u=Z(arguments),f=u,x(e.yieldX(n,g(f))))return o;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):T(t,"each",[],function r(s){var u,f;if(u=Z(arguments),f=u,x(U.$destructure(f)))return o;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),W(l,"$any?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,x(a!==void 0)?T(t,"each",[],function r(s){var u,f,p=o;if(u=Z(arguments),f=u,p=w(f),x(T(a,"public_send",["==="].concat(g(p)))))$.$throw(!0,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):n!==o?T(t,"each",[],function r(s){var u,f;if(u=Z(arguments),f=u,x(e.yieldX(n,g(f))))$.$throw(!0,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):T(t,"each",[],function r(s){var u,f;if(u=Z(arguments),f=u,x(U.$destructure(f)))$.$throw(!0,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),!1}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),W(l,"$chunk",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o?T($,"to_enum",["chunk"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:$}):T(d("Enumerator"),"new",[],function n(t){var r=n.$$s==null?this:n.$$s;t==null&&(t=o);var s=o,u=[];function f(){u.length>0&&t.$yield(s,u)}r.$each.$$p=function(p){var M=j(a,p);M===o?(f(),u=[],s=o):(s===o||s===M?u.push(p):(f(),u=[p]),s=M)},r.$each(),f()},{$$s:$})}),W(l,"$chunk_while",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o&&H.$raise(d("ArgumentError"),"no block given"),T($,"slice_when",[],function(t,r){return t==null&&(t=o),r==null&&(r=o),e.yieldX(a,[t,r])["$!"]()})}),W(l,"$collect",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return T($,"enum_for",["collect"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$});var n=[];return $.$each.$$p=function(){var t=S(a,arguments);n.push(t)},$.$each(),n}),W(l,"$collect_concat",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o?T($,"enum_for",["collect_concat"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:$}):T($,"map",[],a.$to_proc()).$flatten(1)}),W(l,"$compact",function(){var a=this;return a.$to_a().$compact()}),W(l,"$count",function i(a){var $=i.$$p||o,n=this,t=o;return i.$$p=null,t=0,a!=null&&$!==o&&n.$warn("warning: given block not used"),x(a!=null)?$=T(H,"proc",[],function(s){var u,f;return u=Z(arguments),f=u,U.$destructure(f)["$=="](a)},-1):x($["$nil?"]())&&($=T(H,"proc",[],ee(!0))),T(n,"each",[],function(s){var u,f;return u=Z(arguments),f=u,x(S($,f))?t++:o},-1),t},-1),W(l,"$cycle",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),$===o)return T(n,"enum_for",["cycle",a],function u(){var f=u.$$s==null?this:u.$$s;return x(a["$nil?"]())?x(f["$respond_to?"]("size"))?d(d("Float"),"INFINITY"):o:(a=U["$coerce_to!"](a,d("Integer"),"to_int"),x(C(a,0))?b(f.$enumerator_size(),a):0)},{$$s:n});if(!x(a["$nil?"]())&&(a=U["$coerce_to!"](a,d("Integer"),"to_int"),x(a<=0)))return o;var t=[],r,s;if(n.$each.$$p=function(){var u=U.$destructure(arguments);j($,u),t.push(u)},n.$each(),t.length===0)return o;if(a===o)for(;;)for(r=0,s=t.length;r<s;r++)j($,t[r]);else for(;a>1;){for(r=0,s=t.length;r<s;r++)j($,t[r]);a--}},-1),W(l,"$detect",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,n===o?t.$enum_for("detect",a):(T(t,"each",[],function r(s){var u,f,p=o;if(u=Z(arguments),f=u,p=U.$destructure(f),x(e.yield1(n,p)))$.$throw(p,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),a!==void 0?typeof a=="function"?a():a:o)}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),W(l,"$drop",function(a){var $=this;a=q(a,d("Integer"),"to_int"),x(a<0)&&H.$raise(d("ArgumentError"),"attempt to drop negative size");var n=[],t=0;return $.$each.$$p=function(){a<=t&&n.push(U.$destructure(arguments)),t++},$.$each(),n}),W(l,"$drop_while",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return $.$enum_for("drop_while");var n=[],t=!0;return $.$each.$$p=function(){var r=U.$destructure(arguments);if(t){var s=j(a,r);x(s)||(t=!1,n.push(r))}else n.push(r)},$.$each(),n}),W(l,"$each_cons",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,x(arguments.length!=1)&&H.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),a=U.$try_convert(a,d("Integer"),"to_int"),x(a<=0)&&H.$raise(d("ArgumentError"),"invalid size"),$===o)return T(n,"enum_for",["each_cons",a],function r(){var s=r.$$s==null?this:r.$$s,u=o;return u=s.$enumerator_size(),x(u["$nil?"]())?o:L(u,0)||x(y(u,a))?0:G(A(u,a),1)},{$$s:n});var t=[];return n.$each.$$p=function(){var r=U.$destructure(arguments);t.push(r),t.length>a&&t.shift(),t.length==a&&j($,t.slice(0,a))},n.$each(),n}),W(l,"$each_entry",function i(a){var $=i.$$p||o,n,t,r=this;return i.$$p=null,n=Z(arguments),t=n,$===o?T(r,"to_enum",["each_entry"].concat(g(t)),function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var s=U.$destructure(arguments);j($,s)},r.$each.apply(r,t),r)},-1),W(l,"$each_slice",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a=q(a,d("Integer"),"to_int"),x(a<=0)&&H.$raise(d("ArgumentError"),"invalid slice size"),$===o)return T(n,"enum_for",["each_slice",a],function r(){var s=r.$$s==null?this:r.$$s;return x(s["$respond_to?"]("size"))?B(s.$size(),a).$ceil():o},{$$s:n});var t=[];return n.$each.$$p=function(){var r=U.$destructure(arguments);t.push(r),t.length===a&&(j($,t),t=[])},n.$each(),t.length>0&&j($,t),n}),W(l,"$each_with_index",function i(a){var $=i.$$p||o,n,t,r=this;if(i.$$p=null,n=Z(arguments),t=n,$===o)return T(r,"enum_for",["each_with_index"].concat(g(t)),function u(){var f=u.$$s==null?this:u.$$s;return f.$enumerator_size()},{$$s:r});var s=0;return r.$each.$$p=function(){var u=U.$destructure(arguments);$(u,s),s++},r.$each.apply(r,t),r},-1),W(l,"$each_with_object",function i(a){var $=i.$$p||o,n=this;return i.$$p=null,$===o?T(n,"enum_for",["each_with_object",a],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:n}):(n.$each.$$p=function(){var t=U.$destructure(arguments);$(t,a)},n.$each(),a)}),W(l,"$entries",function(a){var $,n,t=this;$=Z(arguments),n=$;var r=[];return t.$each.$$p=function(){r.push(U.$destructure(arguments))},t.$each.apply(t,n),r},-1),W(l,"$filter_map",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o?T($,"enum_for",["filter_map"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:$}):T(T($,"map",[],a.$to_proc()),"select",[],"itself".$to_proc())}),W(l,"$find_all",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return T($,"enum_for",["find_all"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$});var n=[];return $.$each.$$p=function(){var t=U.$destructure(arguments),r=j(a,t);x(r)&&n.push(t)},$.$each(),n}),W(l,"$find_index",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this,r=o;return i.$$p=null,x(a===void 0&&n===o)?t.$enum_for("find_index"):(a!=null&&n!==o&&t.$warn("warning: given block not used"),r=0,x(a!=null)?T(t,"each",[],function s(u){var f,p;return f=Z(arguments),p=f,L(U.$destructure(p),a)&&$.$throw(r,s.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}):T(t,"each",[],function s(u){var f,p;return f=Z(arguments),p=f,x(e.yieldX(n,g(p)))&&$.$throw(r,s.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}),o)}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),W(l,"$first",function(a){try{var $=$e("return"),n=this,t=o,r=o;return x(a===void 0)?T(n,"each",[],function s(u){u==null&&(u=o),$.$throw(u,s.$$is_lambda)},{$$ret:$}):(t=[],a=q(a,d("Integer"),"to_int"),x(a<0)&&H.$raise(d("ArgumentError"),"attempt to take negative size"),x(a==0)?[]:(r=0,T(n,"each",[],function s(u){var f,p;if(f=Z(arguments),p=f,t.push(U.$destructure(p)),x(a<=++r))$.$throw(t,s.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),t))}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),W(l,"$grep",function i(a){var $=i.$$p||o,n=this,t=o;return i.$$p=null,t=[],T(n,"each",[],function(s){var u,f,p=o;return u=Z(arguments),f=u,p=w(f),x(T(a,"__send__",["==="].concat(g(p))))?($!==o?(x(C(f.$length(),1))&&(f=[f]),f=e.yieldX($,g(f))):x(m(f.$length(),1))&&(f=f["$[]"](0)),t.$push(f)):o},-1),t}),W(l,"$grep_v",function i(a){var $=i.$$p||o,n=this,t=o;return i.$$p=null,t=[],T(n,"each",[],function(s){var u,f,p=o;return u=Z(arguments),f=u,p=w(f),x(T(a,"__send__",["==="].concat(g(p))))?o:($!==o?(x(C(f.$length(),1))&&(f=[f]),f=e.yieldX($,g(f))):x(m(f.$length(),1))&&(f=f["$[]"](0)),t.$push(f))},-1),t}),W(l,"$group_by",function i(){var a=i.$$p||o,$,n=this,t=o,r=o;return i.$$p=null,a===o?T(n,"enum_for",["group_by"],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:n}):(t=new Map,n.$each.$$p=function(){var s=U.$destructure(arguments),u=j(a,s);(x(r=t["$[]"](u))?r:($=[u,[]],T(t,"[]=",$),$[$.length-1]))["$<<"](s)},n.$each(),t)}),W(l,"$include?",function(a){try{var $=$e("return"),n=this;return T(n,"each",[],function t(r){var s,u;if(s=Z(arguments),u=s,L(U.$destructure(u),a))$.$throw(!0,t.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),!1}catch(t){if(t===$)return t.$v;throw t}finally{$.is_orphan=!0}}),W(l,"$inject",function i(a,$){var n=i.$$p||o,t=this;i.$$p=null;var r=a;return n!==o&&$===void 0?t.$each.$$p=function(){var s=U.$destructure(arguments);if(r===void 0){r=s;return}s=S(n,[r,s]),r=s}:($===void 0&&(d("Symbol")["$==="](a)||H.$raise(d("TypeError"),""+a.$inspect()+" is not a Symbol"),$=a,r=void 0),t.$each.$$p=function(){var s=U.$destructure(arguments);if(r===void 0){r=s;return}r=r.$__send__($,s)}),t.$each(),r??o},-1),W(l,"$lazy",function(){var a=this;return T(d(d("Enumerator"),"Lazy"),"new",[a,a.$enumerator_size()],function(n,t){var r,s;return n==null&&(n=o),r=Z(arguments,1),s=r,T(n,"yield",g(s))},-2)}),W(l,"$enumerator_size",function(){var a=this;return x(a["$respond_to?"]("size"))?a.$size():o}),W(l,"$max",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a===void 0||a===o){var t,r;return n.$each.$$p=function(){var s=U.$destructure(arguments);if(t===void 0){t=s;return}$!==o?r=S($,[s,t]):r=s["$<=>"](t),r===o&&H.$raise(d("ArgumentError"),"comparison failed"),r>0&&(t=s)},n.$each(),t===void 0?o:t}return a=q(a,d("Integer"),"to_int"),T(n,"sort",[],$.$to_proc()).$reverse().$first(a)},-1),W(l,"$max_by",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),!x($))return T(n,"enum_for",["max_by",a],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:n});if(!x(a["$nil?"]()))return T(n,"sort_by",[],$.$to_proc()).$reverse().$take(a);var t,r;return n.$each.$$p=function(){var s=U.$destructure(arguments),u=j($,s);if(t===void 0){t=s,r=u;return}u["$<=>"](r)>0&&(t=s,r=u)},n.$each(),t===void 0?o:t},-1),W(l,"$min",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),!x(a["$nil?"]()))return $!==o?T(n,"sort",[],function(s,u){return s==null&&(s=o),u==null&&(u=o),e.yieldX($,[s,u])}).$take(a):n.$sort().$take(a);var t;return $!==o?n.$each.$$p=function(){var r=U.$destructure(arguments);if(t===void 0){t=r;return}var s=$(r,t);s===o&&H.$raise(d("ArgumentError"),"comparison failed"),s<0&&(t=r)}:n.$each.$$p=function(){var r=U.$destructure(arguments);if(t===void 0){t=r;return}U.$compare(r,t)<0&&(t=r)},n.$each(),t===void 0?o:t},-1),W(l,"$min_by",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),!x($))return T(n,"enum_for",["min_by",a],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:n});if(!x(a["$nil?"]()))return T(n,"sort_by",[],$.$to_proc()).$take(a);var t,r;return n.$each.$$p=function(){var s=U.$destructure(arguments),u=j($,s);if(t===void 0){t=s,r=u;return}u["$<=>"](r)<0&&(t=s,r=u)},n.$each(),t===void 0?o:t},-1),W(l,"$minmax",function i(){var a=i.$$p||o,$=this,n=o;i.$$p=null,a=x(n=a)?n:T(H,"proc",[],function(f,p){return f==null&&(f=o),p==null&&(p=o),f["$<=>"](p)});var t=o,r=o,s=!0;return $.$each.$$p=function(){var u=U.$destructure(arguments);if(s)t=r=u,s=!1;else{var f=a.$call(t,u);f===o?H.$raise(d("ArgumentError"),"comparison failed"):f>0&&(t=u);var p=a.$call(r,u);p===o?H.$raise(d("ArgumentError"),"comparison failed"):p<0&&(r=u)}},$.$each(),[t,r]}),W(l,"$minmax_by",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,!x(a))return T($,"enum_for",["minmax_by"],function u(){var f=u.$$s==null?this:u.$$s;return f.$enumerator_size()},{$$s:$});var n=o,t=o,r,s;return $.$each.$$p=function(){var u=U.$destructure(arguments),f=j(a,u);(r===void 0||f["$<=>"](r)<0)&&(n=u,r=f),(s===void 0||f["$<=>"](s)>0)&&(t=u,s=f)},$.$each(),[n,t]}),W(l,"$none?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,x(a!==void 0)?T(t,"each",[],function r(s){var u,f,p=o;if(u=Z(arguments),f=u,p=w(f),x(T(a,"public_send",["==="].concat(g(p)))))$.$throw(!1,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):n!==o?T(t,"each",[],function r(s){var u,f;if(u=Z(arguments),f=u,x(e.yieldX(n,g(f))))$.$throw(!1,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):T(t,"each",[],function r(s){var u,f,p=o;if(u=Z(arguments),f=u,p=U.$destructure(f),x(p))$.$throw(!1,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),W(l,"$one?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this,r=o;return i.$$p=null,r=0,x(a!==void 0)?T(t,"each",[],function s(u){var f,p,M=o;if(f=Z(arguments),p=f,M=w(p),x(T(a,"public_send",["==="].concat(g(M)))))if(r=G(r,1),x(C(r,1)))$.$throw(!1,s.$$is_lambda);else return o;else return o},{$$arity:-1,$$ret:$}):n!==o?T(t,"each",[],function s(u){var f,p;if(f=Z(arguments),p=f,!x(e.yieldX(n,g(p))))return o;if(r=G(r,1),x(C(r,1)))$.$throw(!1,s.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):T(t,"each",[],function s(u){var f,p;if(f=Z(arguments),p=f,!x(U.$destructure(p)))return o;if(r=G(r,1),x(C(r,1)))$.$throw(!1,s.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),r["$=="](1)}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),W(l,"$partition",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return T($,"enum_for",["partition"],function r(){var s=r.$$s==null?this:r.$$s;return s.$enumerator_size()},{$$s:$});var n=[],t=[];return $.$each.$$p=function(){var r=U.$destructure(arguments),s=j(a,r);x(s)?n.push(r):t.push(r)},$.$each(),[n,t]}),W(l,"$reject",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return T($,"enum_for",["reject"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$});var n=[];return $.$each.$$p=function(){var t=U.$destructure(arguments),r=j(a,t);x(r)||n.push(t)},$.$each(),n}),W(l,"$reverse_each",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return T($,"enum_for",["reverse_each"],function r(){var s=r.$$s==null?this:r.$$s;return s.$enumerator_size()},{$$s:$});var n=[];$.$each.$$p=function(){n.push(arguments)},$.$each();for(var t=n.length-1;t>=0;t--)S(a,n[t]);return n}),W(l,"$slice_before",function i(a){var $=i.$$p||o,n=this;return i.$$p=null,x(a===void 0&&$===o)&&H.$raise(d("ArgumentError"),"both pattern and block are given"),x(a!==void 0&&$!==o||arguments.length>1)&&H.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),T(d("Enumerator"),"new",[],function t(r){var s=t.$$s==null?this:t.$$s;r==null&&(r=o);var u=[];$!==o?a===void 0?s.$each.$$p=function(){var f=U.$destructure(arguments),p=j($,f);x(p)&&u.length>0&&(r["$<<"](u),u=[]),u.push(f)}:s.$each.$$p=function(){var f=U.$destructure(arguments),p=$(f,a.$dup());x(p)&&u.length>0&&(r["$<<"](u),u=[]),u.push(f)}:s.$each.$$p=function(){var f=U.$destructure(arguments),p=a["$==="](f);x(p)&&u.length>0&&(r["$<<"](u),u=[]),u.push(f)},s.$each(),u.length>0&&r["$<<"](u)},{$$s:n})},-1),W(l,"$slice_after",function i(a){var $=i.$$p||o,n=this;return i.$$p=null,x(a===void 0&&$===o)&&H.$raise(d("ArgumentError"),"both pattern and block are given"),x(a!==void 0&&$!==o||arguments.length>1)&&H.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),x(a!==void 0)&&($=T(H,"proc",[],function(r){return r==null&&(r=o),a["$==="](r)})),T(d("Enumerator"),"new",[],function t(r){var s=t.$$s==null?this:t.$$s;r==null&&(r=o);var u;s.$each.$$p=function(){var f=U.$destructure(arguments),p=j($,f);u==null&&(u=[]),x(p)?(u.push(f),r.$yield(u),u=null):u.push(f)},s.$each(),u!=null&&r.$yield(u)},{$$s:n})},-1),W(l,"$slice_when",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o&&H.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1)"),T(d("Enumerator"),"new",[],function n(t){var r=n.$$s==null?this:n.$$s;t==null&&(t=o);var s=o,u=o;r.$each_cons.$$p=function(){var f=U.$destructure(arguments),p=f[0],M=f[1],D=S(a,[p,M]);u=M,s===o&&(s=[]),x(D)?(s.push(p),t.$yield(s),s=[]):s.push(p)},r.$each_cons(2),s!==o&&(s.push(u),t.$yield(s))},{$$s:$})}),W(l,"$sort",function i(){var a=i.$$p||o,$=this,n=o;return i.$$p=null,n=$.$to_a(),a===o&&(a=z(function(r,s){return r==null&&(r=o),s==null&&(s=o),r["$<=>"](s)})),T(n,"sort",[],a.$to_proc())}),W(l,"$sort_by",function i(){var a=i.$$p||o,$=this,n=o;return i.$$p=null,a===o?T($,"enum_for",["sort_by"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$}):(n=T($,"map",[],function(){var r=o;return r=U.$destructure(arguments),[e.yield1(a,r),r]}),T(n,"sort!",[],function(r,s){return r==null&&(r=o),s==null&&(s=o),r[0]["$<=>"](s[0])}),T(n,"map!",[],function(r){return r==null&&(r=o),r[1]}))}),W(l,"$sum",function i(a){var $=i.$$p||o,n=this,t=o,r=o;return i.$$p=null,a==null&&(a=0),t=a,r=0,T(n,"each",[],function(u){var f,p,M=o,D=o,R=o;return f=Z(arguments),p=f,M=$!==o?e.yieldX($,g(p)):U.$destructure(p),F([d(d("Float"),"INFINITY"),d(d("Float"),"INFINITY")["$-@"]()]["$include?"](M))&&x(M["$respond_to?"]("-"))?(D=A(M,r),R=G(t,D),r=A(A(R,t),D),t=R):t=G(t,M)},-1),t},-1),W(l,"$take",function(a){var $=this;return $.$first(a)}),W(l,"$take_while",function i(){try{var a=$e("return"),$=i.$$p||o,n=this,t=o;return i.$$p=null,x($)?(t=[],T(n,"each",[],function r(s){var u,f,p=o;return u=Z(arguments),f=u,p=U.$destructure(f),x(e.yield1($,p))||a.$throw(t,r.$$is_lambda),t.push(p)},{$$arity:-1,$$ret:a})):n.$enum_for("take_while")}catch(r){if(r===a)return r.$v;throw r}finally{a.is_orphan=!0}}),W(l,"$uniq",function i(){var a=i.$$p||o,$=this,n=o;return i.$$p=null,n=new Map,T($,"each",[],function(r){var s,u,f,p=o,M=o;return s=Z(arguments),u=s,p=U.$destructure(u),M=a!==o?e.yield1(a,p):p,x(n["$key?"](M))?o:(f=[M,p],T(n,"[]=",f),f[f.length-1])},-1),n.$values()}),W(l,"$tally",function(a){var $=this,n=o;return a&&a!==o&&re(a),n=T(T($,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),x(a)?(T(n,"each",[],function(r,s){var u;return r==null&&(r=o),s==null&&(s=o),u=[r,G(a.$fetch(r,0),s)],T(a,"[]=",u),u[u.length-1]}),a):n},-1),W(l,"$to_h",function i(a){var $=i.$$p||o,n,t,r=this;if(i.$$p=null,n=Z(arguments),t=n,$!==o)return T(T(r,"map",[],$.$to_proc()),"to_h",g(t));var s=new Map;return r.$each.$$p=function(){var u=U.$destructure(arguments),f=U["$coerce_to?"](u,d("Array"),"to_ary"),p,M;f.$$is_array||H.$raise(d("TypeError"),"wrong element type "+u.$class()+" (expected array)"),f.length!==2&&H.$raise(d("ArgumentError"),"element has wrong array length (expected 2, was "+f.$length()+")"),p=f[0],M=f[1],e.hash_put(s,p,M)},r.$each.apply(r,t),s},-1),W(l,"$to_set",function i(a,$){var n=i.$$p||o,t,r,s,u=this;return i.$$p=null,t=Z(arguments),t.length>0&&(r=t.shift()),r==null&&(r=X("Set")),s=t,T(r,"new",[u].concat(g(s)),n.$to_proc())},-1),W(l,"$zip",function i(a){i.$$p;var $,n,t=this;return i.$$p=null,$=Z(arguments),n=$,T(t.$to_a(),"zip",g(n))},-1),k(l,"find","detect"),k(l,"filter","find_all"),k(l,"flat_map","collect_concat"),k(l,"map","collect"),k(l,"member?","include?"),k(l,"reduce","inject"),k(l,"select","find_all"),k(l,"to_a","entries")}("::",E)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(e){var x=e.klass,q=e.truthy,j=e.to_a,S=e.eqeq,re=e.Kernel,J=e.def,T=e.rb_gt,Z=e.rb_lt,g=e.rb_le,U=e.rb_ge,$e=e.rb_plus,W=e.rb_minus,H=e.eqeqeq,ee=e.not,C=e.rb_times,b=e.rb_divide,y=e.alias,L=[],G=e.nil,A=e.$$$;return e.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(B,m,z){var F=x(B,m,"Enumerator"),k=[F].concat(z);return function(E,o,d){var I=x(E,o,"ArithmeticSequence"),h=[I].concat(d),l=e.$r(h),c=I.$$prototype;c.step_arg2=c.receiver_num=c.step_arg1=c.step=c.range=c.topfx=c.bypfx=c.creation_method=c.skipped_arg=G,e.prop(I.$$prototype,"$$is_arithmetic_seq",!0);var X=1/0;return J(I,"$initialize",function(i,a,$){var n,t=this,r=G;return $==null&&($="step"),t.creation_method=$,q(i["$is_a?"](A("Array")))?(n=[].concat(j(i)),t.step_arg1=n[0]==null?G:n[0],t.step_arg2=n[1]==null?G:n[1],t.topfx=n[2]==null?G:n[2],t.bypfx=n[3]==null?G:n[3],t.receiver_num=a,t.step=1,t.range=q(t.step_arg2)?(t.step=t.step_arg2,e.Range.$new(t.receiver_num,t.step_arg1,!1)):q(t.step_arg1)?e.Range.$new(t.receiver_num,t.step_arg1,!1):e.Range.$new(t.receiver_num,G,!1)):(q(a)||(t.skipped_arg=!0),n=[i,q(r=a)?r:1],t.range=n[0],t.step=n[1]),t.object=t,S(t.step,0)&&re.$raise(l("ArgumentError"),"step can't be 0"),q(t.step["$respond_to?"]("to_int"))?G:re.$raise(l("ArgumentError"),"no implicit conversion of "+t.step.$class()+" into Integer")},-2),I.$attr_reader("step"),J(I,"$begin",function(){var i=this;return i.range.$begin()}),J(I,"$end",function(){var i=this;return i.range.$end()}),J(I,"$exclude_end?",function(){var i=this;return i.range["$exclude_end?"]()}),J(I,"$_lesser_than_end?",function(i){var a=this,$=G,n=G;return $=q(n=a.$end())?n:X,q(T(a.$step(),0))?q(a["$exclude_end?"]())?Z(i,$):g(i,$):q(a["$exclude_end?"]())?T(i,$):U(i,$)}),J(I,"$_greater_than_begin?",function(i){var a=this,$=G,n=G;return $=q(n=a.$begin())?n:X["$-@"](),q(T(a.$step(),0))?T(i,$):Z(i,$)}),J(I,"$first",function(i){var a=this,$=G,n=G,t=G;if($=q(n=a.$begin())?n:X["$-@"](),!q(i))return q(a["$_lesser_than_end?"]($))?$:G;for(t=[];q(q(n=a["$_lesser_than_end?"]($))?T(i,0):n);)t["$<<"]($),$=$e($,a.$step()),i=W(i,1);return t},-1),J(I,"$each",function w(){var i=w.$$p||G,a=this,$=G,n=G;if(w.$$p=null,i===G)return a;for(H(G,$=a.$begin())&&re.$raise(l("TypeError"),"nil can't be coerced into Integer"),n=q($=a.$begin())?$:X["$-@"]();q(a["$_lesser_than_end?"](n));)e.yield1(i,n),n=$e(n,a.$step());return a}),J(I,"$last",function(i){var a=this,$=G,n=G,t=G;if(H(X,$=a.$end())||H(X["$-@"](),$)?re.$raise(A("FloatDomainError"),a.$end()):H(G,$)&&re.$raise(A("RangeError"),"cannot get the last element of endless arithmetic sequence"),n=W(a.$end(),W(a.$end(),a.$begin())["$%"](a.$step())),q(a["$_lesser_than_end?"](n))||(n=W(n,a.$step())),!q(i))return q(a["$_greater_than_begin?"](n))?n:G;for(t=[];q(q($=a["$_greater_than_begin?"](n))?T(i,0):$);)t["$<<"](n),n=W(n,a.$step()),i=W(i,1);return t.$reverse()},-1),J(I,"$size",function(){var i=this,a=G,$=G;return a=q(T(i.$step(),0))?1:-1,ee(i["$_lesser_than_end?"](i.$begin()))?0:q([X["$-@"](),X]["$include?"](i.$step()))?1:q([C(X["$-@"](),a),G]["$include?"](i.$begin()))||q([C(X,a),G]["$include?"](i.$end()))?X:($=W(i.$end(),W(i.$end(),i.$begin())["$%"](i.$step())),q(i["$_lesser_than_end?"]($))||($=W($,i.$step())),$e(b(W($,i.$begin()),i.$step()).$abs().$to_i(),1))}),J(I,"$==",function(i){var a=this,$=G,n=G,t=G,r=G;return q($=q(n=q(t=q(r=a.$class()["$=="](i.$class()))?a.$begin()["$=="](i.$begin()):r)?a.$end()["$=="](i.$end()):t)?a.$step()["$=="](i.$step()):n)?a["$exclude_end?"]()["$=="](i["$exclude_end?"]()):$}),J(I,"$hash",function(){var i=this;return[l("ArithmeticSequence"),i.$begin(),i.$end(),i.$step(),i["$exclude_end?"]()].$hash()}),J(I,"$inspect",function(){var i=this,a=G;return q(i.receiver_num)?(a=q(i.step_arg2)?"("+i.topfx+i.step_arg1.$inspect()+", "+i.bypfx+i.step_arg2.$inspect()+")":q(i.step_arg1)?"("+i.topfx+i.step_arg1.$inspect()+")":G,"("+i.receiver_num.$inspect()+"."+i.creation_method+a+")"):(a=q(i.skipped_arg)?G:"("+i.step+")","(("+i.range.$inspect()+")."+i.creation_method+a+")")}),y(I,"===","=="),y(I,"eql?","==")}(F,F,k)}("::",null,L)};Opal.modules["corelib/enumerator/chain"]=function(e){var x=e.deny_frozen_access,q=e.klass,j=e.slice,S=e.def,re=e.send,J=e.to_a,T=e.truthy,Z=e.rb_plus,g=e.thrower,U=e.nil,$e=e.$$$;return e.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(W,H){var ee=q(W,H,"Enumerator");return function(C,b){var y=q(C,b,"Chain"),L=y.$$prototype;return L.enums=L.iterated=U,S(y,"$initialize",function(A){var B,m,z=this;return B=j(arguments),m=B,x(z),z.enums=m,z.iterated=[],z.object=z},-1),S(y,"$each",function G(A){var B=G.$$p||U,m,z,F=this;return G.$$p=null,m=j(arguments),z=m,B===U?re(F,"to_enum",["each"].concat(J(z)),function k(){var E=k.$$s==null?this:k.$$s;return E.$size()},{$$s:F}):(re(F.enums,"each",[],function k(E){var o=k.$$s==null?this:k.$$s;return o.iterated==null&&(o.iterated=U),E==null&&(E=U),o.iterated["$<<"](E),re(E,"each",J(z),B.$to_proc())},{$$s:F}),F)},-1),S(y,"$size",function(A){try{var B=g("return"),m,z,F=this,k=U;return m=j(arguments),z=m,k=0,re(F.enums,"each",[],function E(o){var d=U;return o==null&&(o=U),d=re(o,"size",J(z)),T([U,$e($e("Float"),"INFINITY")]["$include?"](d))&&B.$throw(d,E.$$is_lambda),k=Z(k,d)},{$$ret:B}),k}catch(E){if(E===B)return E.$v;throw E}finally{B.is_orphan=!0}},-1),S(y,"$rewind",function(){var A=this;return re(A.iterated,"reverse_each",[],function(m){return m==null&&(m=U),T(m["$respond_to?"]("rewind"))?m.$rewind():U}),A.iterated=[],A}),S(y,"$inspect",function(){var A=this;return"#<Enumerator::Chain: "+A.enums.$inspect()+">"})}(ee,ee)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(e){var x=e.deny_frozen_access,q=e.klass,j=e.truthy,S=e.Kernel,re=e.def,J=e.slice,T=e.send,Z=[],g=e.nil,U=e.$$$;return e.add_stubs("include,raise,new,to_proc"),function($e,W,H){var ee=q($e,W,"Enumerator"),C=[ee].concat(H);return function(b,y,L){var G=q(b,y,"Generator"),A=[G].concat(L),B=e.$r(A),m=G.$$prototype;return m.block=g,G.$include(U("Enumerable")),re(G,"$initialize",function z(){var F=z.$$p||g,k=this;return z.$$p=null,x(k),j(F)||S.$raise(U("LocalJumpError"),"no block given"),k.block=F}),re(G,"$each",function z(F){var k=z.$$p||g,E,o,d=this,I=g;z.$$p=null,E=J(arguments),o=E,I=T(B("Yielder"),"new",[],k.$to_proc());try{o.unshift(I),e.yieldX(d.block,o)}catch(h){if(h&&h.$thrower_type=="breaker")return h.$v;throw h}return d},-1)}(C[0],null,C)}(Z[0],null,Z)};Opal.modules["corelib/enumerator/lazy"]=function(e){var x=e.truthy,q=e.coerce_to,j=e.yield1,S=e.yieldX,re=e.deny_frozen_access,J=e.klass,T=e.slice,Z=e.send2,g=e.find_super,U=e.to_a,$e=e.defs,W=e.Kernel,H=e.send,ee=e.def,C=e.return_self,b=e.Opal,y=e.rb_lt,L=e.eqeqeq,G=e.rb_plus,A=e.alias,B=[],m=e.nil,z=e.$$$;return e.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(F,k,E){var o=J(F,k,"Enumerator"),d=[o].concat(E);return function(I,h,l){var c=J(I,h,"Lazy"),X=[c].concat(l),w=e.$r(X),i=c.$$prototype;return i.enumerator=m,J(c,z("Exception"),"StopLazyError"),$e(c,"$for",function a($,n){var t,r,s=a.$$p||m,u=this,f=m;return a.$$p=null,t=T(arguments,1),r=t,f=Z(u,g(u,"for",a,!1,!0),"for",[$].concat(U(r)),s),f.enumerator=$,f},-2),ee(c,"$initialize",function a($,n){var t=a.$$p||m,r=this;return a.$$p=null,n==null&&(n=m),re(r),t===m&&W.$raise(z("ArgumentError"),"tried to call lazy new without a block"),r.enumerator=$,Z(r,g(r,"initialize",a,!1,!0),"initialize",[n],function(u,f){var p,M;u==null&&(u=m),p=T(arguments,1),M=p;try{return H($,"each",U(M),function(R){var V,O;V=T(arguments),O=V,O.unshift(u),S(t,O)},-1)}catch(D){if(e.rescue(D,[w("StopLazyError")]))try{return m}finally{e.pop_exception(D)}else throw D}},-2)},-2),ee(c,"$lazy",C),ee(c,"$collect",function a(){var $=a.$$p||m,n=this;return a.$$p=null,x($)||W.$raise(z("ArgumentError"),"tried to call lazy map without a block"),H(w("Lazy"),"new",[n,n.$enumerator_size()],function(r,s){var u,f;r==null&&(r=m),u=T(arguments,1),f=u;var p=S($,f);r.$yield(p)},-2)}),ee(c,"$collect_concat",function a(){var $=a.$$p||m,n=this;return a.$$p=null,x($)||W.$raise(z("ArgumentError"),"tried to call lazy map without a block"),H(w("Lazy"),"new",[n,m],function(r,s){var u,f;r==null&&(r=m),u=T(arguments,1),f=u;var p=S($,f);if(p["$respond_to?"]("force")&&p["$respond_to?"]("each"))H(p,"each",[],function(R){return R==null&&(R=m),r.$yield(R)});else{var M=b.$try_convert(p,z("Array"),"to_ary");M===m?r.$yield(p):H(p,"each",[],function(R){return R==null&&(R=m),r.$yield(R)})}},-2)}),ee(c,"$drop",function($){var n=this,t=m,r=m,s=m;return $=q($,z("Integer"),"to_int"),x(y($,0))&&W.$raise(z("ArgumentError"),"attempt to drop negative size"),t=n.$enumerator_size(),r=L(z("Integer"),t)&&x(y($,t))?$:t,s=0,H(w("Lazy"),"new",[n,r],function(f,p){var M,D;return f==null&&(f=m),M=T(arguments,1),D=M,x(y(s,$))?s=G(s,1):H(f,"yield",U(D))},-2)}),ee(c,"$drop_while",function a(){var $=a.$$p||m,n=this,t=m;return a.$$p=null,x($)||W.$raise(z("ArgumentError"),"tried to call lazy drop_while without a block"),t=!0,H(w("Lazy"),"new",[n,m],function(s,u){var f,p;if(s==null&&(s=m),f=T(arguments,1),p=f,x(t)){var M=S($,p);x(M)||(t=!1,H(s,"yield",U(p)))}else return H(s,"yield",U(p))},-2)}),ee(c,"$enum_for",function a($,n){var t=a.$$p||m,r,s,u,f=this;return a.$$p=null,r=T(arguments),r.length>0&&(s=r.shift()),s==null&&(s="each"),u=r,H(f.$class(),"for",[f,s].concat(U(u)),t.$to_proc())},-1),ee(c,"$find_all",function a(){var $=a.$$p||m,n=this;return a.$$p=null,x($)||W.$raise(z("ArgumentError"),"tried to call lazy select without a block"),H(w("Lazy"),"new",[n,m],function(r,s){var u,f;r==null&&(r=m),u=T(arguments,1),f=u;var p=S($,f);x(p)&&H(r,"yield",U(f))},-2)}),ee(c,"$grep",function a($){var n=a.$$p||m,t=this;return a.$$p=null,x(n)?H(w("Lazy"),"new",[t,m],function(s,u){var f,p;s==null&&(s=m),f=T(arguments,1),p=f;var M=b.$destructure(p),D=$["$==="](M);x(D)&&(D=j(n,M),s.$yield(j(n,M)))},-2):H(w("Lazy"),"new",[t,m],function(s,u){var f,p;s==null&&(s=m),f=T(arguments,1),p=f;var M=b.$destructure(p),D=$["$==="](M);x(D)&&s.$yield(M)},-2)}),ee(c,"$reject",function a(){var $=a.$$p||m,n=this;return a.$$p=null,x($)||W.$raise(z("ArgumentError"),"tried to call lazy reject without a block"),H(w("Lazy"),"new",[n,m],function(r,s){var u,f;r==null&&(r=m),u=T(arguments,1),f=u;var p=S($,f);x(p)||H(r,"yield",U(f))},-2)}),ee(c,"$take",function($){var n=this,t=m,r=m,s=m;return $=q($,z("Integer"),"to_int"),x(y($,0))&&W.$raise(z("ArgumentError"),"attempt to take negative size"),t=n.$enumerator_size(),r=L(z("Integer"),t)&&x(y($,t))?$:t,s=0,H(w("Lazy"),"new",[n,r],function(f,p){var M,D;return f==null&&(f=m),M=T(arguments,1),D=M,x(y(s,$))?(H(f,"yield",U(D)),s=G(s,1)):W.$raise(w("StopLazyError"))},-2)}),ee(c,"$take_while",function a(){var $=a.$$p||m,n=this;return a.$$p=null,x($)||W.$raise(z("ArgumentError"),"tried to call lazy take_while without a block"),H(w("Lazy"),"new",[n,m],function(r,s){var u,f;r==null&&(r=m),u=T(arguments,1),f=u;var p=S($,f);x(p)?H(r,"yield",U(f)):W.$raise(w("StopLazyError"))},-2)}),ee(c,"$inspect",function(){var $=this;return"#<"+$.$class()+": "+$.enumerator.$inspect()+">"}),A(c,"force","to_a"),A(c,"filter","find_all"),A(c,"flat_map","collect_concat"),A(c,"map","collect"),A(c,"select","find_all"),A(c,"to_enum","enum_for")}(o,o,d)}("::",null,B)};Opal.modules["corelib/enumerator/yielder"]=function(e){var x=e.klass,q=e.def,j=e.slice,S=e.send,re=e.to_a,J=[],T=e.nil;return e.add_stubs("yield,proc"),function(Z,g,U){var $e=x(Z,g,"Enumerator"),W=[$e].concat(U);return function(H,ee){var C=x(H,ee,"Yielder"),b=C.$$prototype;return b.block=T,q(C,"$initialize",function y(){var L=y.$$p||T,G=this;return y.$$p=null,G.block=L,G}),q(C,"$yield",function(L){var G,A,B=this;G=j(arguments),A=G;var m=e.yieldX(B.block,A);if(m&&m.$thrower_type=="break")throw m;return m},-1),q(C,"$<<",function(L){var G=this;return G.$yield(L),G}),q(C,"$to_proc",function(){var L=this;return S(L,"proc",[],function G(A){var B,m,z=G.$$s==null?this:G.$$s;return B=j(arguments),m=B,S(z,"yield",re(m))},{$$arity:-1,$$s:L})})}(W[0],null)}(J[0],null,J)};Opal.modules["corelib/enumerator"]=function(e){var x=e.slice,q=e.coerce_to,j=e.deny_frozen_access,S=e.klass,re=e.defs,J=e.truthy,T=e.send,Z=e.not,g=e.def,U=e.rb_plus,$e=e.to_a,W=e.Opal,H=e.send2,ee=e.find_super,C=e.rb_ge,b=e.Kernel,y=e.rb_le,L=e.alias,G=e.top,A=[],B=e.nil,m=e.$$$;return e.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),G.$require("corelib/enumerable"),function(z,F,k){var E=S(z,F,"Enumerator"),o=[E].concat(k),d=e.$r(o),I=E.$$prototype;return I.size=I.args=I.object=I.method=I.values=I.cursor=B,E.$include(m("Enumerable")),E.$$prototype.$$is_enumerator=!0,re(E,"$for",function h(l,c,X){var w=h.$$p||B,i,a,$,n=this;h.$$p=null,i=x(arguments,1),i.length>0&&(a=i.shift()),a==null&&(a="each"),$=i;var t=n.$allocate();return t.object=l,t.size=w,t.method=a,t.args=$,t.cursor=0,t},-2),g(E,"$initialize",function h(l){var c=h.$$p||B,X=this;return h.$$p=null,x(arguments),j(X),X.cursor=0,J(c)?(X.object=T(d("Generator"),"new",[],c.$to_proc()),X.method="each",X.args=[],X.size=arguments[0]||B,J(X.size)&&Z(X.size["$respond_to?"]("call"))?X.size=q(X.size,m("Integer"),"to_int"):B):(X.object=arguments[0],X.method=arguments[1]||"each",X.args=x(arguments,2),X.size=B)},-1),g(E,"$each",function h(l){var c=h.$$p||B,X,w,i=this;return h.$$p=null,X=x(arguments),w=X,J(c["$nil?"]())&&J(w["$empty?"]())?i:(w=U(i.args,w),J(c["$nil?"]())?T(i.$class(),"new",[i.object,i.method].concat($e(w))):T(i.object,"__send__",[i.method].concat($e(w)),c.$to_proc()))},-1),g(E,"$size",function(){var l=this;return J(l.size["$respond_to?"]("call"))?T(l.size,"call",$e(l.args)):l.size}),g(E,"$with_index",function h(l){var c=h.$$p||B,X=this;if(h.$$p=null,l==null&&(l=0),l=J(l)?q(l,m("Integer"),"to_int"):0,!J(c))return T(X,"enum_for",["with_index",l],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:X});var w=l;return X.$each.$$p=function(){var i=W.$destructure(arguments),a=c(i,w);return w++,a},X.$each()},-1),g(E,"$each_with_index",function h(){var l=h.$$p||B,c=this;return h.$$p=null,l===B?T(c,"enum_for",["each_with_index"],function X(){var w=X.$$s==null?this:X.$$s;return w.$size()},{$$s:c}):(H(c,ee(c,"each_with_index",h,!1,!0),"each_with_index",[],l),c.object)}),g(E,"$rewind",function(){var l=this;return l.cursor=0,l}),g(E,"$peek_values",function(){var l=this,c=B;return l.values=J(c=l.values)?c:T(l,"map",[],function(w){var i,a;return i=x(arguments),a=i,a},-1),J(C(l.cursor,l.values.$length()))&&b.$raise(m("StopIteration"),"iteration reached an end"),l.values["$[]"](l.cursor)}),g(E,"$peek",function(){var l=this,c=B;return c=l.$peek_values(),J(y(c.$length(),1))?c["$[]"](0):c}),g(E,"$next_values",function(){var l=this,c=B;return c=l.$peek_values(),l.cursor=U(l.cursor,1),c}),g(E,"$next",function(){var l=this,c=B;return c=l.$next_values(),J(y(c.$length(),1))?c["$[]"](0):c}),g(E,"$feed",function(l){var c=this;return c.$raise(d("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),g(E,"$+",function(l){var c=this;return m(m("Enumerator"),"Chain").$new(c,l)}),g(E,"$inspect",function(){var l=this,c=B;return c="#<"+l.$class()+": "+l.object.$inspect()+":"+l.method,J(l.args["$any?"]())&&(c=U(c,"("+l.args.$inspect()["$[]"](m("Range").$new(1,-2))+")")),U(c,">")}),L(E,"with_object","each_with_object"),E.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),E.$autoload("Chain","corelib/enumerator/chain"),E.$autoload("Generator","corelib/enumerator/generator"),E.$autoload("Lazy","corelib/enumerator/lazy"),E.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,A)};Opal.modules["corelib/numeric"]=function(e){var x=e.klass,q=e.truthy,j=e.Kernel,S=e.def,re=e.to_ary,J=e.return_self,T=e.rb_minus,Z=e.rb_times,g=e.rb_lt,U=e.eqeq,$e=e.rb_divide,W=e.return_val,H=e.Opal,ee=e.slice,C=e.extract_kwargs,b=e.ensure_kwargs,y=e.hash_get,L=e.not,G=e.send,A=e.rb_ge,B=e.rb_le,m=e.rb_plus,z=e.rb_gt,F=e.alias,k=e.top,E=e.nil,o=e.$$$;return e.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),k.$require("corelib/comparable"),function(d,I){var h=x(d,I,"Numeric");return h.$include(o("Comparable")),S(h,"$coerce",function(c){var X=this;return q(c["$instance_of?"](X.$class()))?[c,X]:[j.$Float(c),j.$Float(X)]}),S(h,"$__coerced__",function(c,X){var w,i,a=this,$=E,n=E;if(q(X["$respond_to?"]("coerce")))return i=X.$coerce(a),w=re(i),$=w[0]==null?E:w[0],n=w[1]==null?E:w[1],$.$__send__(c,n);switch(c.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return j.$raise(o("TypeError"),""+X.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return j.$raise(o("ArgumentError"),"comparison of "+a.$class()+" with "+X.$class()+" failed");default:return E}}),S(h,"$<=>",function(c){var X=this;return q(X["$equal?"](c))?0:E}),S(h,"$+@",J),S(h,"$-@",function(){var c=this;return T(0,c)}),S(h,"$%",function(c){var X=this;return T(X,Z(c,X.$div(c)))}),S(h,"$abs",function(){var c=this;return q(g(c,0))?c["$-@"]():c}),S(h,"$abs2",function(){var c=this;return Z(c,c)}),S(h,"$angle",function(){var c=this;return q(g(c,0))?o(o("Math"),"PI"):0}),S(h,"$ceil",function(c){var X=this;return c==null&&(c=0),X.$to_f().$ceil(c)},-1),S(h,"$conj",J),S(h,"$denominator",function(){var c=this;return c.$to_r().$denominator()}),S(h,"$div",function(c){var X=this;return U(c,0)&&j.$raise(o("ZeroDivisionError"),"divided by o"),$e(X,c).$floor()}),S(h,"$divmod",function(c){var X=this;return[X.$div(c),X["$%"](c)]}),S(h,"$fdiv",function(c){var X=this;return $e(X.$to_f(),c)}),S(h,"$floor",function(c){var X=this;return c==null&&(c=0),X.$to_f().$floor(c)},-1),S(h,"$i",function(){var c=this;return j.$Complex(0,c)}),S(h,"$imag",W(0)),S(h,"$integer?",W(!1)),S(h,"$nonzero?",function(){var c=this;return q(c["$zero?"]())?E:c}),S(h,"$numerator",function(){var c=this;return c.$to_r().$numerator()}),S(h,"$polar",function(){var c=this;return[c.$abs(),c.$arg()]}),S(h,"$quo",function(c){var X=this;return $e(H["$coerce_to!"](X,o("Rational"),"to_r"),c)}),S(h,"$real",J),S(h,"$real?",W(!0)),S(h,"$rect",function(){var c=this;return[c,0]}),S(h,"$round",function(c){var X=this;return X.$to_f().$round(c)},-1),S(h,"$step",function l(c,X,w){var i=l.$$p||E,a,$,n,t,r,s,u=this,f=E;l.$$p=null,a=ee(arguments),$=C(a),$=b($),a.length>0&&(n=a.shift()),a.length>0&&(t=a.shift()),r=y($,"to"),s=y($,"by"),n!==void 0&&r!==void 0&&j.$raise(o("ArgumentError"),"to is given twice"),t!==void 0&&s!==void 0&&j.$raise(o("ArgumentError"),"step is given twice"),r!==void 0&&(n=r),s!==void 0&&(t=s),n===void 0&&(n=E);function p(){t===E&&j.$raise(o("TypeError"),"step must be numeric"),t!=null&&t["$=="](0)&&j.$raise(o("ArgumentError"),"step can't be 0"),(t===E||t==null)&&(t=1);var ge=t["$<=>"](0);ge===E&&j.$raise(o("ArgumentError"),"0 can't be coerced into "+t.$class()),(n===E||n==null)&&(n=ge>0?o(o("Float"),"INFINITY"):o(o("Float"),"INFINITY")["$-@"]()),H.$compare(u,n)}function M(){if(t>0&&u>n||t<0&&u<n)return 0;if(t===1/0||t===-1/0)return 1;var ge=Math.abs,ve=Math.floor,me=(ge(u)+ge(n)+ge(n-u))/ge(t)*o(o("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((n-u)/t+me)+1)}function D(){if(p(),t===0)return 1/0;if(t%1!==0)return M();if(t>0&&u>n||t<0&&u<n)return 0;var ge=Math.ceil,ve=Math.abs,me=ve(u-n)+1,be=ve(t);return ge(me/be)}if(i===E)return(L(n)||q(n["$is_a?"](o("Numeric"))))&&(L(t)||q(t["$is_a?"](o("Numeric"))))?o(o("Enumerator"),"ArithmeticSequence").$new([n,t,q(r)?"to: ":E,q(s)?"by: ":E],u):G(u,"enum_for",["step",n,t],D.$to_proc());p();var R=t["$negative?"](),V=t["$=="](0)||n===1/0&&!R||n===-1/0&&R;if(u.$$is_number&&t.$$is_number&&n.$$is_number)if(u%1===0&&(V||n%1===0)&&t%1===0){var O=u;if(V)for(;;O+=t)i(O);else if(R)for(;O>=n;O+=t)i(O);else for(;O<=n;O+=t)i(O);return u}else{var ae=u.$to_f().valueOf();t=t.$to_f().valueOf(),n=n.$to_f().valueOf();var le=M();if(!isFinite(t))le!==0&&i(ae);else if(t===0)for(;;)i(ae);else for(var _e=0;_e<le;_e++){var de=_e*t+u;(t>=0?n<de:n>de)&&(de=n),i(de)}return u}for(f=u;q(R?A(f,n):B(f,n));)e.yield1(i,f),f=m(f,t)},-1),S(h,"$to_c",function(){var c=this;return j.$Complex(c,0)}),S(h,"$to_int",function(){var c=this;return c.$to_i()}),S(h,"$truncate",function(c){var X=this;return c==null&&(c=0),X.$to_f().$truncate(c)},-1),S(h,"$zero?",function(){var c=this;return c["$=="](0)}),S(h,"$positive?",function(){var c=this;return z(c,0)}),S(h,"$negative?",function(){var c=this;return g(c,0)}),S(h,"$dup",J),S(h,"$clone",function(c){var X=this;return c=b(c),y(c,"freeze"),X},-1),S(h,"$finite?",W(!0)),S(h,"$infinite?",W(E)),F(h,"arg","angle"),F(h,"conjugate","conj"),F(h,"imaginary","imag"),F(h,"magnitude","abs"),F(h,"modulo","%"),F(h,"phase","arg"),F(h,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(e){var x=e.truthy,q=e.falsy,j=e.yield1,S=e.hash_get,re=e.hash_put,J=e.hash_delete,T=e.coerce_to,Z=e.respond_to,g=e.deny_frozen_access,U=e.freeze,$e=e.opal32_init,W=e.opal32_add,H=e.klass,ee=e.slice,C=e.defs,b=e.Kernel,y=e.def,L=e.Opal,G=e.eqeqeq,A=e.send2,B=e.find_super,m=e.send,z=e.rb_gt,F=e.rb_times,k=e.eqeq,E=e.rb_minus,o=e.to_a,d=e.to_ary,I=e.gvars,h=e.rb_ge,l=e.assign_ivar,c=e.rb_lt,X=e.return_self,w=e.neqeq,i=e.alias,a=e.top,$=[],n=e.nil,t=e.$$$;return e.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),a.$require("corelib/enumerable"),a.$require("corelib/numeric"),function(r,s,u){var f=H(r,s,"Array"),p=[f].concat(u),M=e.$r(p);f.$include(t("Enumerable")),e.prop(f.$$prototype,"$$is_array",!0);function D(ie){for(var N=ie[0],P=1,Y=ie.length;P<Y;P++)ie[P-1]=ie[P];return ie.pop(),N}function R(ie,N){return N.$$name===e.Array?ie:N.$allocate().$replace(ie.$to_a())}function V(ie,N,P){for(var Y,Q=null,ne=new Array(ie.length),se=0,oe=0;se<ie.length;se++){if(!Q)try{Y=j(P,ie[se])}catch(fe){Q=fe}(Q||N(Y))&&(ne[oe]=ie[se],oe+=1)}if(oe!==se&&(ie.splice.apply(ie,[0,ne.length].concat(ne)),ie.splice(oe,ne.length)),Q)throw Q}function O(ie){return ie.$$is_array||(ie=T(ie,t("Array"),"to_ary")),ie.$to_a()}function ae(ie,N){var P=N.length;if(P>6&&P<32767)ie.push.apply(ie,N);else for(var Y=0;Y<P;Y++)ie.push(N[Y])}C(f,"$[]",function(N){var P,Y,Q=this;return P=ee(arguments),Y=P,R(Y,Q)},-1),y(f,"$initialize",function ie(N,P){var Y=ie.$$p||n,Q=this;if(ie.$$p=null,N==null&&(N=n),P==null&&(P=n),g(Q),P!==n&&Y!==n&&b.$warn("warning: block supersedes default value argument"),N>t(t("Integer"),"MAX")&&b.$raise(t("ArgumentError"),"array size too big"),arguments.length>2&&b.$raise(t("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return Q.length>0&&Q.splice(0,Q.length),Q;if(arguments.length===1){if(N.$$is_array)return Q.$replace(N.$to_a()),Q;if(N["$respond_to?"]("to_ary"))return Q.$replace(N.$to_ary()),Q}N=T(N,t("Integer"),"to_int"),N<0&&b.$raise(t("ArgumentError"),"negative array size"),Q.splice(0,Q.length);var ne,se;if(Y===n)for(ne=0;ne<N;ne++)Q.push(P);else for(ne=0,se;ne<N;ne++)se=Y(ne),Q[ne]=se;return Q},-1),C(f,"$try_convert",function(N){return L["$coerce_to?"](N,t("Array"),"to_ary")}),y(f,"$&",function(N){var P=this;if(N=O(N),P.length===0||N.length===0)return[];var Y=[],Q=new Map,ne,se,oe;for(ne=0,se=N.length;ne<se;ne++)re(Q,N[ne],!0);for(ne=0,se=P.length;ne<se;ne++)oe=P[ne],J(Q,oe)!==void 0&&Y.push(oe);return Y}),y(f,"$|",function(N){var P=this;N=O(N);var Y=new Map,Q,ne;for(Q=0,ne=P.length;Q<ne;Q++)re(Y,P[Q],!0);for(Q=0,ne=N.length;Q<ne;Q++)re(Y,N[Q],!0);return Y.$keys()}),y(f,"$*",function(N){var P=this;if(x(N["$respond_to?"]("to_str")))return P.$join(N.$to_str());N=T(N,t("Integer"),"to_int"),x(N<0)&&b.$raise(t("ArgumentError"),"negative argument");for(var Y=[],Q=P.$to_a(),ne=0;ne<N;ne++)Y=Y.concat(Q);return Y}),y(f,"$+",function(N){var P=this;return N=O(N),P.concat(N)}),y(f,"$-",function(N){var P=this;if(N=O(N),x(P.length===0))return[];if(x(N.length===0))return P.slice();var Y=[],Q=new Map,ne,se,oe;for(ne=0,se=N.length;ne<se;ne++)re(Q,N[ne],!0);for(ne=0,se=P.length;ne<se;ne++)oe=P[ne],S(Q,oe)===void 0&&Y.push(oe);return Y}),y(f,"$<<",function(N){var P=this;return g(P),P.push(N),P}),y(f,"$<=>",function(N){var P=this;if(G(t("Array"),N))N=N.$to_a();else if(x(N["$respond_to?"]("to_ary")))N=N.$to_ary().$to_a();else return n;if(P===N)return 0;for(var Y=Math.min(P.length,N.length),Q=0;Q<Y;Q++){var ne=P[Q]["$<=>"](N[Q]);if(ne!==0)return ne}return P.length["$<=>"](N.length)}),y(f,"$==",function(N){var P=this,Y={};function Q(ne,se){var oe,fe,_,v;if(ne===se)return!0;if(!se.$$is_array)return Z(se,"$to_ary")?se["$=="](ne):!1;if(ne.$$constructor!==Array&&(ne=ne.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),ne.length!==se.length)return!1;for(Y[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(_=ne[oe],v=se[oe],_.$$is_array){if(v.$$is_array&&v.length!==_.length||!Y.hasOwnProperty(_.$object_id())&&!Q(_,v))return!1}else if(!_["$=="](v))return!1;return!0}return Q(P,N)});function le(ie,N){var P=ie.length,Y,Q,ne,se;return Y=N.excl,Q=N.begin===n?0:T(N.begin,e.Integer,"to_int"),ne=N.end===n?-1:T(N.end,e.Integer,"to_int"),Q<0&&(Q+=P,Q<0)||(N.excl_rev&&N.begin!==n&&(Q+=1),Q>P)?n:ne<0&&(ne+=P,ne<0)?[]:((!Y||N.end===n)&&(ne+=1),se=ie.slice(Q,ne),se)}function _e(ie,N){var P,Y=[],Q=0,ne;for(N.step<0?(ne={begin:N.range.end,end:N.range.begin,excl:!1,excl_rev:N.range.excl},P=le(ie,ne).$reverse()):P=le(ie,N.range);Q<P.length;)Y.push(P[Q]),Q+=Math.abs(N.step);return Y}function de(ie,N,P){var Y=ie.length,Q;return N=T(N,e.Integer,"to_int"),N<0&&(N+=Y,N<0)?n:P===void 0?N>=Y||N<0?n:ie[N]:(P=T(P,e.Integer,"to_int"),P<0||N>Y||N<0?n:(Q=ie.slice(N,N+P),Q))}y(f,"$[]",function(N,P){var Y=this;return N.$$is_range?le(Y,N):N.$$is_arithmetic_seq?_e(Y,N):de(Y,N,P)},-2),y(f,"$[]=",function(N,P,Y){var Q=this,ne=n,se=n;g(Q),ne=n;var oe,fe=Q.length;if(N.$$is_range){P.$$is_array?ne=P.$to_a():P["$respond_to?"]("to_ary")?ne=P.$to_ary().$to_a():ne=[P];var _=N.excl,v=N.begin===n?0:T(N.begin,e.Integer,"to_int"),K=N.end===n?-1:T(N.end,e.Integer,"to_int");if(v<0&&(v+=fe,v<0&&b.$raise(t("RangeError"),""+N.$inspect()+" out of range")),K<0&&(K+=fe),(!_||N.end===n)&&(K+=1),v>fe)for(oe=fe;oe<v;oe++)Q[oe]=n;return K<0?Q.splice.apply(Q,[v,0].concat(ne)):Q.splice.apply(Q,[v,K-v].concat(ne)),P}else{Y===void 0?se=1:(se=P,P=Y,P.$$is_array?ne=P.$to_a():P["$respond_to?"]("to_ary")?ne=P.$to_ary().$to_a():ne=[P]);var te;if(N=T(N,t("Integer"),"to_int"),se=T(se,t("Integer"),"to_int"),N<0&&(te=N,N+=fe,N<0&&b.$raise(t("IndexError"),"index "+te+" too small for array; minimum "+-Q.length)),se<0&&b.$raise(t("IndexError"),"negative length ("+se+")"),N>fe)for(oe=fe;oe<N;oe++)Q[oe]=n;return Y===void 0?Q[N]=P:Q.splice.apply(Q,[N,se].concat(ne)),P}},-3),y(f,"$any?",function ie(N){var P=ie.$$p||n,Y=this;return ie.$$p=null,Y.length===0?!1:A(Y,B(Y,"any?",ie,!1,!0),"any?",[N],P)},-1),y(f,"$assoc",function(N){for(var P=this,Y=0,Q=P.length,ne;Y<Q;Y++)if(ne=P[Y],ne.length&&ne[0]["$=="](N))return ne;return n}),y(f,"$at",function(N){var P=this;return N=T(N,t("Integer"),"to_int"),N<0&&(N+=P.length),N<0||N>=P.length?n:P[N]}),y(f,"$bsearch_index",function ie(){var N=ie.$$p||n,P=this;if(ie.$$p=null,N===n)return P.$enum_for("bsearch_index");for(var Y=0,Q=P.length,ne,se,oe,fe=!1,_=n;Y<Q;){if(ne=Y+Math.floor((Q-Y)/2),se=P[ne],oe=j(N,se),oe===!0)_=ne,fe=!0;else if(oe===!1||oe===n)fe=!1;else if(oe.$$is_number){if(oe===0)return ne;fe=oe<0}else b.$raise(t("TypeError"),"wrong argument type "+oe.$class()+" (must be numeric, true, false or nil)");fe?Q=ne:Y=ne+1}return _}),y(f,"$bsearch",function ie(){var N=ie.$$p||n,P=this,Y=n;return ie.$$p=null,N===n?P.$enum_for("bsearch"):(Y=m(P,"bsearch_index",[],N.$to_proc()),Y!=null&&Y.$$is_number?P[Y]:Y)}),y(f,"$cycle",function ie(N){var P=ie.$$p||n,Y=this;if(ie.$$p=null,N==null&&(N=n),P===n)return m(Y,"enum_for",["cycle",N],function se(){var oe=se.$$s==null?this:se.$$s;return x(N["$nil?"]())?t(t("Float"),"INFINITY"):(N=L["$coerce_to!"](N,t("Integer"),"to_int"),x(z(N,0))?F(oe.$enumerator_size(),N):0)},{$$s:Y});if(x(Y["$empty?"]())||k(N,0))return n;var Q,ne;if(N===n)for(;;)for(Q=0,ne=Y.length;Q<ne;Q++)j(P,Y[Q]);else{if(N=L["$coerce_to!"](N,t("Integer"),"to_int"),N<=0)return Y;for(;N>0;){for(Q=0,ne=Y.length;Q<ne;Q++)j(P,Y[Q]);N--}}return Y},-1),y(f,"$clear",function(){var N=this;return g(N),N.splice(0,N.length),N}),y(f,"$count",function ie(N){var P=ie.$$p||n,Y=this;return ie.$$p=null,x(N!==void 0)||x(P)?A(Y,B(Y,"count",ie,!1,!0),"count",[N],P):Y.$size()},-1),y(f,"$initialize_copy",function(N){var P=this;return P.$replace(N)}),y(f,"$collect",function ie(){var N=ie.$$p||n,P=this;if(ie.$$p=null,N===n)return m(P,"enum_for",["collect"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:P});for(var Y=[],Q=0;Q<P.length;Q++){var ne=j(N,P[Q]);Y[Q]=ne}return Y}),y(f,"$collect!",function ie(){var N=ie.$$p||n,P=this;if(ie.$$p=null,N===n)return m(P,"enum_for",["collect!"],function ne(){var se=ne.$$s==null?this:ne.$$s;return se.$size()},{$$s:P});g(P);for(var Y=0;Y<P.length;Y++){var Q=j(N,P[Y]);P[Y]=Q}return P});function ge(ie,N){return ie===N||N===0?1:N>0&&ie>N?ge(ie-1,N-1)+ge(ie-1,N):0}y(f,"$combination",function ie(N){var P=ie.$$p||n,Y=this,Q=n;if(ie.$$p=null,Q=L["$coerce_to!"](N,t("Integer"),"to_int"),P===n)return m(Y,"enum_for",["combination",Q],function te(){var ue=te.$$s==null?this:te.$$s;return ge(ue.length,Q)},{$$s:Y});var ne,se,oe,fe,_,v,K;if(Q===0)e.yield1(P,[]);else if(Q===1)for(ne=0,se=Y.length;ne<se;ne++)e.yield1(P,[Y[ne]]);else if(Q===Y.length)e.yield1(P,Y.slice());else if(Q>=0&&Q<Y.length){for(oe=[],ne=0;ne<=Q+1;ne++)oe.push(0);for(fe=[],_=0,v=!1,oe[0]=-1;!v;){for(fe[_]=Y[oe[_+1]];_<Q-1;)_++,K=oe[_+1]=oe[_]+1,fe[_]=Y[K];e.yield1(P,fe.slice()),_++;do v=_===0,oe[_]++,_--;while(oe[_+1]+Q===Y.length+_+1)}}return Y}),y(f,"$repeated_combination",function ie(N){var P=ie.$$p||n,Y=this,Q=n;if(ie.$$p=null,Q=L["$coerce_to!"](N,t("Integer"),"to_int"),P===n)return m(Y,"enum_for",["repeated_combination",Q],function se(){var oe=se.$$s==null?this:se.$$s;return ge(oe.length+Q-1,Q)},{$$s:Y});function ne(se,oe,fe,_){if(fe.length==se){var v=fe.slice();e.yield1(P,v);return}for(var K=oe;K<_.length;K++)fe.push(_[K]),ne(se,K,fe,_),fe.pop()}return Q>=0&&ne(Q,0,[],Y),Y}),y(f,"$compact",function(){for(var N=this,P=[],Y=0,Q=N.length,ne;Y<Q;Y++)(ne=N[Y])!==n&&P.push(ne);return P}),y(f,"$compact!",function(){var N=this;g(N);for(var P=N.length,Y=0,Q=N.length;Y<Q;Y++)N[Y]===n&&(N.splice(Y,1),Q--,Y--);return N.length===P?n:N}),y(f,"$concat",function(N){var P,Y,Q=this;return P=ee(arguments),Y=P,g(Q),Y=m(Y,"map",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;return se==null&&(se=n),se=O(se),x(se["$equal?"](oe))&&(se=se.$dup()),se},{$$s:Q}),m(Y,"each",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;se==null&&(se=n);for(var fe=0,_=se.length;fe<_;fe++)oe.push(se[fe])},{$$s:Q}),Q},-1),y(f,"$delete",function ie(N){var P=ie.$$p||n,Y=this;ie.$$p=null;for(var Q=Y.length,ne=0,se=Q;ne<se;ne++)Y[ne]["$=="](N)&&(g(Y),Y.splice(ne,1),se--,ne--);return Y.length===Q?P!==n?e.yieldX(P,[]):n:N}),y(f,"$delete_at",function(N){var P=this;if(g(P),N=T(N,t("Integer"),"to_int"),N<0&&(N+=P.length),N<0||N>=P.length)return n;var Y=P[N];return P.splice(N,1),Y}),y(f,"$delete_if",function ie(){var N=ie.$$p||n,P=this;return ie.$$p=null,N===n?m(P,"enum_for",["delete_if"],function Y(){var Q=Y.$$s==null?this:Y.$$s;return Q.$size()},{$$s:P}):(g(P),V(P,q,N),P)}),y(f,"$difference",function(N){var P,Y,Q=this;return P=ee(arguments),Y=P,m(Y,"reduce",[Q.$to_a().$dup()],function(se,oe){return se==null&&(se=n),oe==null&&(oe=n),E(se,oe)})},-1),y(f,"$dig",function(N,P){var Y,Q,ne=this,se=n;return Y=ee(arguments,1),Q=Y,se=ne["$[]"](N),se===n||Q.length===0?se:(x(se["$respond_to?"]("dig"))||b.$raise(t("TypeError"),""+se.$class()+" does not have #dig method"),m(se,"dig",o(Q)))},-2),y(f,"$drop",function(N){var P=this;return N=T(N,t("Integer"),"to_int"),N<0&&b.$raise(t("ArgumentError")),P.slice(N)}),y(f,"$dup",function ie(){var N=ie.$$p||n,P=this;return ie.$$p=null,P.$$class===e.Array&&P.$$class.$allocate.$$pristine&&P.$copy_instance_variables.$$pristine&&P.$initialize_dup.$$pristine?P.slice(0):A(P,B(P,"dup",ie,!1,!0),"dup",[],N)}),y(f,"$each",function ie(){var N=ie.$$p||n,P=this;if(ie.$$p=null,N===n)return m(P,"enum_for",["each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:P});for(var Y=0;Y<P.length;Y++)j(N,P[Y]);return P}),y(f,"$each_index",function ie(){var N=ie.$$p||n,P=this;if(ie.$$p=null,N===n)return m(P,"enum_for",["each_index"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:P});for(var Y=0;Y<P.length;Y++)j(N,Y);return P}),y(f,"$empty?",function(){var N=this;return N.length===0}),y(f,"$eql?",function(N){var P=this,Y={};function Q(ne,se){var oe,fe,_,v;if(!se.$$is_array||(se=se.$to_a(),ne.length!==se.length))return!1;for(Y[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(_=ne[oe],v=se[oe],_.$$is_array){if(v.$$is_array&&v.length!==_.length||!Y.hasOwnProperty(_.$object_id())&&!Q(_,v))return!1}else if(!_["$eql?"](v))return!1;return!0}return Q(P,N)}),y(f,"$fetch",function ie(N,P){var Y=ie.$$p||n,Q=this;ie.$$p=null;var ne=N;if(N=T(N,t("Integer"),"to_int"),N<0&&(N+=Q.length),N>=0&&N<Q.length)return Q[N];if(Y!==n&&P!=null&&Q.$warn("warning: block supersedes default value argument"),Y!==n)return Y(ne);if(P!=null)return P;Q.length===0?b.$raise(t("IndexError"),"index "+ne+" outside of array bounds: 0...0"):b.$raise(t("IndexError"),"index "+ne+" outside of array bounds: -"+Q.length+"..."+Q.length)},-2),y(f,"$fill",function ie(N){var P=ie.$$p||n,Y,Q,ne,se,oe=this,fe=n,_=n,v=n,K=n,te=n;ie.$$p=null,Y=ee(arguments),Q=Y,g(oe);var ue,ce;if(x(P)?(x(Q.length>2)&&b.$raise(t("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 0..2)"),se=Q,ne=d(se),fe=ne[0]==null?n:ne[0],_=ne[1]==null?n:ne[1]):(x(Q.length==0)?b.$raise(t("ArgumentError"),"wrong number of arguments (0 for 1..3)"):x(Q.length>3)&&b.$raise(t("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 1..3)"),se=Q,ne=d(se),v=ne[0]==null?n:ne[0],fe=ne[1]==null?n:ne[1],_=ne[2]==null?n:ne[2]),G(t("Range"),fe)){if(x(_)&&b.$raise(t("TypeError"),"length invalid with range"),K=fe.begin===n?0:T(fe.begin,t("Integer"),"to_int"),x(K<0)&&(K+=this.length),x(K<0)&&b.$raise(t("RangeError"),""+fe.$inspect()+" out of range"),te=fe.end===n?-1:T(fe.end,t("Integer"),"to_int"),x(te<0)&&(te+=this.length),x(fe["$exclude_end?"]())||(te+=1),x(te<=K))return oe}else if(x(fe))if(K=T(fe,t("Integer"),"to_int"),x(K<0)&&(K+=this.length),x(K<0)&&(K=0),x(_)){if(te=T(_,t("Integer"),"to_int"),x(te==0))return oe;te+=K}else te=this.length;else K=0,te=this.length;if(x(K>this.length))for(ue=this.length;ue<te;ue++)oe[ue]=n;if(x(te>this.length)&&(this.length=te),x(P))for(this.length;K<te;K++)ce=P(K),oe[K]=ce;else for(this.length;K<te;K++)oe[K]=v;return oe},-1),y(f,"$first",function(N){var P=this;return N==null?P.length===0?n:P[0]:(N=T(N,t("Integer"),"to_int"),N<0&&b.$raise(t("ArgumentError"),"negative array size"),P.slice(0,N))},-1),y(f,"$flatten",function(N){var P=this;function Y(Q,ne){var se=[],oe,fe,_,v;for(Q=Q.$to_a(),oe=0,fe=Q.length;oe<fe;oe++){if(_=Q[oe],!Z(_,"$to_ary",!0)){se.push(_);continue}if(v=_.$to_ary(),v===n){se.push(_);continue}switch(v.$$is_array||b.$raise(t("TypeError")),v===P&&b.$raise(t("ArgumentError")),ne){case void 0:se=se.concat(Y(v));break;case 0:se.push(v);break;default:ae(se,Y(v,ne-1))}}return se}return N!==void 0&&(N=T(N,t("Integer"),"to_int")),Y(P,N)},-1),y(f,"$flatten!",function(N){var P=this;g(P);var Y=P.$flatten(N);if(P.length==Y.length){for(var Q=0,ne=P.length;Q<ne&&P[Q]===Y[Q];Q++);if(Q==ne)return n}return P.$replace(Y),P},-1),y(f,"$freeze",function(){var N=this;return x(N["$frozen?"]())?N:U(N)});var ve;y(f,"$hash",function(){var N=this,P=ve===void 0,Y=$e(),Q=N.$object_id(),ne,se,oe;if(Y=W(Y,10),Y=W(Y,N.length),P)ve=Object.create(null);else if(ve[Q])return W(Y,16843009);try{for(oe in ve)if(ne=ve[oe],N["$eql?"](ne))return W(Y,16843009);for(ve[Q]=N,se=0;se<N.length;se++)ne=N[se],Y=W(Y,ne.$hash());return Y}finally{P&&(ve=void 0)}}),y(f,"$include?",function(N){for(var P=this,Y=0,Q=P.length;Y<Q;Y++)if(P[Y]["$=="](N))return!0;return!1}),y(f,"$index",function ie(N){var P=ie.$$p||n,Y=this;ie.$$p=null;var Q,ne,se;if(N!=null&&P!==n&&Y.$warn("warning: given block not used"),N!=null){for(Q=0,ne=Y.length;Q<ne;Q++)if(Y[Q]["$=="](N))return Q}else if(P!==n){for(Q=0;Q<Y.length;Q++)if(se=P(Y[Q]),se!==!1&&se!==n)return Q}else return Y.$enum_for("index");return n},-1),y(f,"$insert",function(N,P){var Y,Q,ne=this;if(Y=ee(arguments,1),Q=Y,g(ne),N=T(N,t("Integer"),"to_int"),Q.length>0){if(N<0&&(N+=ne.length+1,N<0&&b.$raise(t("IndexError"),""+N+" is out of bounds")),N>ne.length)for(var se=ne.length;se<N;se++)ne.push(n);ne.splice.apply(ne,[N,0].concat(Q))}return ne},-2);var me=[];y(f,"$inspect",function(){var N=this,P=[],Y=N.$__id__(),Q=!0;return function(){try{if(me.indexOf(Y)!==-1)return Q=!1,"[...]";me.push(Y);for(var ne=0,se=N.length;ne<se;ne++){var oe=N["$[]"](ne);P.push(M("Opal").$inspect(oe))}return"["+P.join(", ")+"]"}finally{Q&&me.pop()}}()}),y(f,"$intersection",function(N){var P,Y,Q=this,ne=n,se=n;return P=ee(arguments),Y=P,Y.length===0?Q.$to_a().$dup():(Y=Y.map(O),Q.length===0?[]:(Y=m(Y,"sort_by",[],"length".$to_proc()),x(Q.length<Y[0].length)?m(Y,"reduce",[Q],"&".$to_proc()):(ne=Y.pop(),se=m(Y,"reduce",[ne],"&".$to_proc()),Q["$&"](se))))},-1),y(f,"$intersect?",function(N){var P=this,Y,Q,ne=new Map,se,oe;for(P.length<N.length?(Y=P,Q=N):(Y=N,Q=P),se=0,oe=Y.length;se<oe;se++)re(ne,Y[se],!0);for(se=0,oe=Q.length;se<oe;se++)if(S(ne,Q[se]))return!0;return!1}),y(f,"$join",function(N){var P=this;if(I[","]==null&&(I[","]=n),N==null&&(N=n),x(P.length===0))return"";x(N===n)&&(N=I[","]);var Y=[],Q,ne,se,oe;for(Q=0,ne=P.length;Q<ne;Q++){if(se=P[Q],Z(se,"$to_str")&&(oe=se.$to_str(),oe!==n)){Y.push(oe.$to_s());continue}if(Z(se,"$to_ary")&&(oe=se.$to_ary(),oe===P&&b.$raise(t("ArgumentError")),oe!==n)){Y.push(oe.$join(N));continue}if(Z(se,"$to_s")&&(oe=se.$to_s(),oe!==n)){Y.push(oe);continue}b.$raise(t("NoMethodError").$new(""+M("Opal").$inspect(P.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return N===n?Y.join(""):Y.join(L["$coerce_to!"](N,t("String"),"to_str").$to_s())},-1),y(f,"$keep_if",function ie(){var N=ie.$$p||n,P=this;return ie.$$p=null,N===n?m(P,"enum_for",["keep_if"],function Y(){var Q=Y.$$s==null?this:Y.$$s;return Q.$size()},{$$s:P}):(g(P),V(P,x,N),P)}),y(f,"$last",function(N){var P=this;return N==null?P.length===0?n:P[P.length-1]:(N=T(N,t("Integer"),"to_int"),N<0&&b.$raise(t("ArgumentError"),"negative array size"),N>P.length&&(N=P.length),P.slice(P.length-N,P.length))},-1),y(f,"$length",function(){var N=this;return N.length}),y(f,"$max",function ie(N){var P=ie.$$p||n,Y=this;return ie.$$p=null,m(Y.$each(),"max",[N],P.$to_proc())},-1),y(f,"$min",function ie(){var N=ie.$$p||n,P=this;return ie.$$p=null,m(P.$each(),"min",[],N.$to_proc())});function be(ie,N){for(var P=N>=0?1:0;N;)P*=ie,ie--,N--;return P}return y(f,"$permutation",function ie(N){var P=ie.$$p||n,Y=this,Q=n,ne=n;if(ie.$$p=null,P===n)return m(Y,"enum_for",["permutation",N],function v(){var K=v.$$s==null?this:v.$$s;return be(K.length,N===void 0?K.length:N)},{$$s:Y});var se,oe,fe;if(N===void 0?N=Y.length:N=T(N,t("Integer"),"to_int"),!(N<0||Y.length<N))if(N===0)e.yield1(P,[]);else if(N===1)for(var _=0;_<Y.length;_++)e.yield1(P,[Y[_]]);else Q=M("Array").$new(N),ne=M("Array").$new(Y.length,!1),se=function(v,K,te,ue,ce){Y=this;for(var he=0;he<Y.length;he++)if(ue["$[]"](he)["$!"]())if(K[te]=he,te<v-1)ue[he]=!0,se.call(Y,v,K,te+1,ue,ce),ue[he]=!1;else{fe=[];for(var pe=0;pe<K.length;pe++)fe.push(Y[K[pe]]);j(ce,fe)}},P!==n?(oe=Y.slice(),se.call(oe,N,Q,0,ne,P)):se.call(Y,N,Q,0,ne,P);return Y},-1),y(f,"$repeated_permutation",function ie(N){var P=ie.$$p||n,Y=this,Q=n;if(ie.$$p=null,Q=L["$coerce_to!"](N,t("Integer"),"to_int"),P===n)return m(Y,"enum_for",["repeated_permutation",Q],function se(){var oe=se.$$s==null?this:se.$$s;return x(h(Q,0))?oe.$size()["$**"](Q):0},{$$s:Y});function ne(se,oe,fe){if(oe.length==se){var _=oe.slice();e.yield1(P,_);return}for(var v=0;v<fe.length;v++)oe.push(fe[v]),ne(se,oe,fe),oe.pop()}return ne(Q,[],Y.slice()),Y}),y(f,"$pop",function(N){var P=this;return g(P),x(N===void 0)?x(P.length===0)?n:P.pop():(N=T(N,t("Integer"),"to_int"),x(N<0)&&b.$raise(t("ArgumentError"),"negative array size"),x(P.length===0)?[]:x(N===1)?[P.pop()]:x(N>P.length)?P.splice(0,P.length):P.splice(P.length-N,P.length))},-1),y(f,"$product",function ie(N){var P=ie.$$p||n,Y,Q,ne=this;ie.$$p=null,Y=ee(arguments),Q=Y;var se=P!==n?null:[],oe=Q.length+1,fe=new Array(oe),_=new Array(oe),v=new Array(oe),K,te,ue,ce,he=1;for(v[0]=ne,K=1;K<oe;K++)v[K]=T(Q[K-1],t("Array"),"to_ary");for(K=0;K<oe;K++){if(ce=v[K].length,ce===0)return se||ne;he*=ce,he>2147483647&&b.$raise(t("RangeError"),"too big to product"),_[K]=ce,fe[K]=0}e:for(;;){for(ue=[],K=0;K<oe;K++)ue.push(v[K][fe[K]]);for(se?se.push(ue):e.yield1(P,ue),te=oe-1,fe[te]++;fe[te]===_[te];){if(fe[te]=0,--te<0)break e;fe[te]++}}return se||ne},-1),y(f,"$push",function(N){var P,Y,Q=this;return P=ee(arguments),Y=P,g(Q),ae(Q,Y),Q},-1),y(f,"$rassoc",function(N){for(var P=this,Y=0,Q=P.length,ne;Y<Q;Y++)if(ne=P[Y],ne.length&&ne[1]!==void 0&&ne[1]["$=="](N))return ne;return n}),y(f,"$reject",function ie(){var N=ie.$$p||n,P=this;if(ie.$$p=null,N===n)return m(P,"enum_for",["reject"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:P});for(var Y=[],Q=0,ne;Q<P.length;Q++)ne=N(P[Q]),(ne===!1||ne===n)&&Y.push(P[Q]);return Y}),y(f,"$reject!",function ie(){var N=ie.$$p||n,P=this,Y=n;return ie.$$p=null,N===n?m(P,"enum_for",["reject!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:P}):(g(P),Y=P.$length(),m(P,"delete_if",[],N.$to_proc()),k(P.$length(),Y)?n:P)}),y(f,"$replace",function(N){var P=this;return g(P),N=O(N),P.length>0&&P.splice(0,P.length),ae(P,N),P}),y(f,"$reverse",function(){var N=this;return N.slice(0).reverse()}),y(f,"$reverse!",function(){var N=this;return g(N),N.reverse()}),y(f,"$reverse_each",function ie(){var N=ie.$$p||n,P=this;if(ie.$$p=null,N===n)return m(P,"enum_for",["reverse_each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:P});for(var Y=P.length-1;Y>=0;Y--)j(N,P[Y]);return P}),y(f,"$rindex",function ie(N){var P=ie.$$p||n,Y=this;ie.$$p=null;var Q,ne;if(N!=null&&P!==n&&Y.$warn("warning: given block not used"),N!=null){for(Q=Y.length-1;Q>=0&&!(Q>=Y.length);Q--)if(Y[Q]["$=="](N))return Q}else if(P!==n){for(Q=Y.length-1;Q>=0&&!(Q>=Y.length);Q--)if(ne=P(Y[Q]),ne!==!1&&ne!==n)return Q}else if(N==null)return Y.$enum_for("rindex");return n},-1),y(f,"$rotate",function(N){var P=this;N==null&&(N=1);var Y,Q,ne,se;return N=T(N,t("Integer"),"to_int"),P.length===1?P.slice():P.length===0?[]:(Y=P.slice(),Q=N%Y.length,ne=Y.slice(Q),se=Y.slice(0,Q),ne.concat(se))},-1),y(f,"$rotate!",function(N){var P=this,Y=n;return N==null&&(N=1),g(P),P.length===0||P.length===1?P:(N=T(N,t("Integer"),"to_int"),Y=P.$rotate(N),P.$replace(Y))},-1),function(ie,N){var P=H(ie,N,"SampleRandom"),Y=P.$$prototype;return Y.rng=n,y(P,"$initialize",l("rng")),y(P,"$rand",function(ne){var se=this,oe=n;return oe=T(se.rng.$rand(ne),t("Integer"),"to_int"),x(oe<0)&&b.$raise(t("RangeError"),"random value must be >= 0"),x(oe<ne)||b.$raise(t("RangeError"),"random value must be less than Array size"),oe})}(f,null),y(f,"$sample",function(N,P){var Y=this,Q=n,ne=n;if(x(N===void 0))return Y.$at(b.$rand(Y.length));if(x(P===void 0)?x(Q=L["$coerce_to?"](N,t("Hash"),"to_hash"))?(P=Q,N=n):(P=n,N=T(N,t("Integer"),"to_int")):(N=T(N,t("Integer"),"to_int"),P=T(P,t("Hash"),"to_hash")),x(N)&&x(N<0)&&b.$raise(t("ArgumentError"),"count must be greater than 0"),x(P)&&(ne=P["$[]"]("random")),ne=x(ne)&&x(ne["$respond_to?"]("rand"))?M("SampleRandom").$new(ne):b,!x(N))return Y[ne.$rand(Y.length)];var se,oe,fe,_,v,K,te,ue;switch(N>Y.length&&(N=Y.length),N){case 0:return[];case 1:return[Y[ne.$rand(Y.length)]];case 2:return _=ne.$rand(Y.length),v=ne.$rand(Y.length-1),_<=v&&v++,[Y[_],Y[v]];default:if(Y.length/N>3){for(se=!1,oe=0,fe=M("Array").$new(N),_=1,fe[0]=ne.$rand(Y.length);_<N;){for(K=ne.$rand(Y.length),v=0;v<_;){for(;K===fe[v];){if(oe++,oe>100){se=!0;break}K=ne.$rand(Y.length)}if(se)break;v++}if(se)break;fe[_]=K,_++}if(!se){for(_=0;_<N;)fe[_]=Y[fe[_]],_++;return fe}}fe=Y.slice();for(var ce=0;ce<N;ce++)te=ne.$rand(Y.length-ce)+ce,ue=fe[ce],fe[ce]=fe[te],fe[te]=ue;return N===Y.length?fe:fe["$[]"](0,N)}},-1),y(f,"$select",function ie(){var N=ie.$$p||n,P=this;if(ie.$$p=null,N===n)return m(P,"enum_for",["select"],function oe(){var fe=oe.$$s==null?this:oe.$$s;return fe.$size()},{$$s:P});for(var Y=[],Q=0,ne,se;Q<P.length;Q++)ne=P[Q],se=j(N,ne),x(se)&&Y.push(ne);return Y}),y(f,"$select!",function ie(){var N=ie.$$p||n,P=this;if(ie.$$p=null,N===n)return m(P,"enum_for",["select!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:P});g(P);var Y=P.length;return m(P,"keep_if",[],N.$to_proc()),P.length===Y?n:P}),y(f,"$shift",function(N){var P=this;return g(P),x(N===void 0)?x(P.length===0)?n:D(P):(N=T(N,t("Integer"),"to_int"),x(N<0)&&b.$raise(t("ArgumentError"),"negative array size"),x(P.length===0)?[]:P.splice(0,N))},-1),y(f,"$shuffle",function(N){var P=this;return P.$dup().$to_a()["$shuffle!"](N)},-1),y(f,"$shuffle!",function(N){var P=this;g(P);var Y,Q=P.length,ne,se;for(N!==void 0&&(N=L["$coerce_to?"](N,t("Hash"),"to_hash"),N!==n&&(N=N["$[]"]("random"),N!==n&&N["$respond_to?"]("rand")&&(Y=N)));Q;)Y?(ne=Y.$rand(Q).$to_int(),ne<0&&b.$raise(t("RangeError"),"random number too small "+ne),ne>=Q&&b.$raise(t("RangeError"),"random number too big "+ne)):ne=P.$rand(Q),se=P[--Q],P[Q]=P[ne],P[ne]=se;return P},-1),y(f,"$slice!",function(N,P){var Y=this,Q=n,ne=n,se=n,oe=n,fe=n;if(g(Y),Q=n,x(P===void 0))if(G(t("Range"),N)){ne=N,Q=Y["$[]"](ne),se=ne.begin===n?0:T(ne.begin,t("Integer"),"to_int"),oe=ne.end===n?-1:T(ne.end,t("Integer"),"to_int"),se<0&&(se+=Y.length),oe<0?oe+=Y.length:oe>=Y.length&&(oe=Y.length-1,ne.excl&&(oe+=1));var _=oe-se;ne.excl&&ne.end!==n?oe-=1:_+=1,se<Y.length&&se>=0&&oe<Y.length&&oe>=0&&_>0&&Y.splice(se,_)}else{if(fe=T(N,t("Integer"),"to_int"),fe<0&&(fe+=Y.length),fe<0||fe>=Y.length)return n;Q=Y[fe],fe===0?Y.shift():Y.splice(fe,1)}else{if(fe=T(N,t("Integer"),"to_int"),P=T(P,t("Integer"),"to_int"),P<0)return n;Q=Y["$[]"](fe,P),fe<0&&(fe+=Y.length),fe+P>Y.length&&(P=Y.length-fe),fe<Y.length&&fe>=0&&Y.splice(fe,P)}return Q},-2),y(f,"$sort",function ie(){var N=ie.$$p||n,P=this;return ie.$$p=null,x(P.length>1)?(N===n&&(N=function(Y,Q){return Y["$<=>"](Q)}),P.slice().sort(function(Y,Q){var ne=N(Y,Q);return ne===n&&b.$raise(t("ArgumentError"),"comparison of "+Y.$inspect()+" with "+Q.$inspect()+" failed"),z(ne,0)?1:c(ne,0)?-1:0})):P}),y(f,"$sort!",function ie(){var N=ie.$$p||n,P=this;ie.$$p=null,g(P);var Y;N!==n?Y=m(P.slice(),"sort",[],N.$to_proc()):Y=P.slice().$sort(),P.length=0;for(var Q=0,ne=Y.length;Q<ne;Q++)P.push(Y[Q]);return P}),y(f,"$sort_by!",function ie(){var N=ie.$$p||n,P=this;return ie.$$p=null,N===n?m(P,"enum_for",["sort_by!"],function Y(){var Q=Y.$$s==null?this:Y.$$s;return Q.$size()},{$$s:P}):(g(P),P.$replace(m(P,"sort_by",[],N.$to_proc())))}),y(f,"$take",function(N){var P=this;return N<0&&b.$raise(t("ArgumentError")),P.slice(0,N)}),y(f,"$take_while",function ie(){var N=ie.$$p||n,P=this;ie.$$p=null;for(var Y=[],Q=0,ne,se;Q<P.length;Q++){if(ne=P[Q],se=N(ne),se===!1||se===n)return Y;Y.push(ne)}return Y}),y(f,"$to_a",function(){var N=this;return N.$$class===e.Array?N:e.Array.$new(N)}),y(f,"$to_ary",X),y(f,"$to_h",function ie(){var N=ie.$$p||n,P=this,Y=n;ie.$$p=null,Y=P,N!==n&&(Y=m(Y,"map",[],N.$to_proc()));var Q,ne=Y.length,se,oe,fe,_=new Map;for(Q=0;Q<ne;Q++)se=L["$coerce_to?"](Y[Q],t("Array"),"to_ary"),se.$$is_array||b.$raise(t("TypeError"),"wrong element type "+Y[Q].$class()+" at "+Q+" (expected array)"),se.length!==2&&b.$raise(t("ArgumentError"),"element has wrong array length at "+Q+" (expected 2, was "+se.$length()+")"),oe=se[0],fe=se[1],re(_,oe,fe);return _}),y(f,"$transpose",function(){var N=this,P=n,Y=n;return x(N["$empty?"]())?[]:(P=[],Y=n,m(N,"each",[],function(ne){var se=n;return ne==null&&(ne=n),ne=O(ne),Y=x(se=Y)?se:ne.length,w(ne.length,Y)&&b.$raise(t("IndexError"),"element size differs ("+ne.length+" should be "+Y+")"),m(ne.length,"times",[],function(fe){var _,v=n;return fe==null&&(fe=n),v=x(se=P["$[]"](fe))?se:(_=[fe,[]],m(P,"[]=",_),_[_.length-1]),v["$<<"](ne.$at(fe))})}),P)}),y(f,"$union",function(N){var P,Y,Q=this;return P=ee(arguments),Y=P,m(Y,"reduce",[Q.$uniq()],function(se,oe){return se==null&&(se=n),oe==null&&(oe=n),se["$|"](oe)})},-1),y(f,"$uniq",function ie(){var N=ie.$$p||n,P=this;ie.$$p=null;var Y=new Map,Q,ne,se,oe;if(N===n)for(Q=0,ne=P.length;Q<ne;Q++)se=P[Q],S(Y,se)===void 0&&re(Y,se,se);else for(Q=0;Q<P.length;Q++)se=P[Q],oe=j(N,se),S(Y,oe)===void 0&&re(Y,oe,se);return Y.$values()}),y(f,"$uniq!",function ie(){var N=ie.$$p||n,P=this;ie.$$p=null,g(P);var Y=new Map,Q,ne,se,oe=[];for(Q=0;Q<P.length;Q++)ne=P[Q],se=N===n?ne:j(N,ne),S(Y,se)===void 0?re(Y,se,ne):oe.push(Q);for(Q=oe.length-1;Q>=0;Q--)P.splice(oe[Q],1);return oe.length===0?n:P}),y(f,"$unshift",function(N){var P,Y,Q=this;P=ee(arguments),Y=P,g(Q);var ne=Q.length,se=Y.length;if(se==0)return Q;for(var oe=ne-se,fe=0;fe<se;fe++)Q.push(Q[oe+fe]);for(var _=ne-1;_-se>=0;)Q[_]=Q[_-se],_--;for(var v=0;v<se;v++)Q[v]=Y[v];return Q},-1),y(f,"$values_at",function(N){var P,Y,Q=this,ne=n;return P=ee(arguments),Y=P,ne=[],m(Y,"each",[],function se(oe){var fe=se.$$s==null?this:se.$$s,_=n,v=n,K=n;return oe==null&&(oe=n),x(oe["$is_a?"](t("Range")))?(_=oe.$end()===n?-1:T(oe.$end(),t("Integer"),"to_int"),v=oe.$begin()===n?0:T(oe.$begin(),t("Integer"),"to_int"),v<0?(v=v+fe.length,n):(_<0&&(_=_+fe.length),oe["$exclude_end?"]()&&oe.$end()!==n&&_--,_<v?n:m(v,"upto",[_],function te(ue){var ce=te.$$s==null?this:te.$$s;return ue==null&&(ue=n),ne["$<<"](ce.$at(ue))},{$$s:fe}))):(K=T(oe,t("Integer"),"to_int"),ne["$<<"](fe.$at(K)))},{$$s:Q}),ne},-1),y(f,"$zip",function ie(N){var P=ie.$$p||n,Y,Q,ne=this,se=n;ie.$$p=null,Y=ee(arguments),Q=Y;var oe=[],fe=ne.length,_,v,K,te,ue;for(te=0,ue=Q.length;te<ue;te++)if(v=Q[te],!v.$$is_array){if(v.$$is_range||v.$$is_enumerator){Q[te]=v.$take(fe);continue}Q[te]=(x(se=L["$coerce_to?"](v,t("Array"),"to_ary"))?se:L["$coerce_to!"](v,t("Enumerator"),"to_enum","each")).$to_a()}for(K=0;K<fe;K++){for(_=[ne[K]],te=0,ue=Q.length;te<ue;te++)v=Q[te][K],v==null&&(v=n),_[te+1]=v;oe[K]=_}if(P!==n){for(K=0;K<fe;K++)e.yield1(P,oe[K]);return n}return oe},-1),C(f,"$inherited",function(N){N.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),y(f,"$instance_variables",function ie(){var N=ie.$$p||n,P=this;return ie.$$p=null,m(A(P,B(P,"instance_variables",ie,!1,!0),"instance_variables",[],N),"reject",[],function(Q){var ne=n;return Q==null&&(Q=n),x(ne=/^@\d+$/.test(Q))?ne:Q["$=="]("@length")})}),y(f,"$pack",function(N){return ee(arguments),b.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),i(f,"append","push"),i(f,"filter","select"),i(f,"filter!","select!"),i(f,"map","collect"),i(f,"map!","collect!"),i(f,"prepend","unshift"),i(f,"size","length"),i(f,"slice","[]"),i(f,"to_s","inspect"),L.$pristine(f.$singleton_class(),"allocate"),L.$pristine(f,"copy_instance_variables","initialize_dup")}("::",Array,$)};Opal.modules["corelib/hash"]=function(e){var x=e.yield1,q=e.hash_clone,j=e.hash_delete,S=e.hash_each,re=e.hash_get,J=e.hash_put,T=e.deny_frozen_access,Z=e.freeze,g=e.opal32_init,U=e.opal32_add,$e=e.klass,W=e.slice,H=e.Opal,ee=e.Kernel,C=e.defs,b=e.def,y=e.send,L=e.rb_ge,G=e.rb_gt,A=e.truthy,B=e.to_a,m=e.return_self,z=e.not,F=e.alias,k=e.top,E=[],o=e.nil,d=e.$$$;return e.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),k.$require("corelib/enumerable"),function(I,h,l){var c=$e(I,h,"Hash"),X=[c].concat(l),w=e.$r(X);c.$include(d("Enumerable")),c.$$prototype.$$is_hash=!0,C(c,"$[]",function(n){var t,r,s=this;t=W(arguments),r=t;var u,f=r.length,p,M;if(f===1){if(u=H["$coerce_to?"](r["$[]"](0),d("Hash"),"to_hash"),u!==o)return s.$allocate()["$merge!"](u);for(r=H["$coerce_to?"](r["$[]"](0),d("Array"),"to_ary"),r===o&&ee.$raise(d("ArgumentError"),"odd number of arguments for Hash"),f=r.length,u=s.$allocate(),M=0;M<f;M++)p=r[M],p.$$is_array||ee.$raise(d("ArgumentError"),"invalid element "+p.$inspect()+" for Hash"),p.length===1?u.$store(p[0],o):p.length===2?u.$store(p[0],p[1]):ee.$raise(d("ArgumentError"),"invalid number of elements ("+p.length+" for "+p.$inspect()+"), must be 1..2");return u}for(f%2!==0&&ee.$raise(d("ArgumentError"),"odd number of arguments for Hash"),u=s.$allocate(),M=0;M<f;M+=2)u.$store(r[M],r[M+1]);return u},-1),C(c,"$allocate",function(){var n=this,t=new n.$$constructor;return t.$$none=o,t.$$proc=o,t}),C(c,"$try_convert",function(n){return H["$coerce_to?"](n,d("Hash"),"to_hash")}),b(c,"$initialize",function $(n){var t=$.$$p||o,r=this;return $.$$p=null,T(r),n!==void 0&&t!==o&&ee.$raise(d("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=n===void 0?o:n,r.$$proc=t,r},-1),b(c,"$==",function(n){var t=this;return t===n?!0:!n.$$is_hash||t.size!==n.size?!1:S(t,!0,function(r,s){var u=re(n,r);return u===void 0||!s["$eql?"](u)?[!0,!1]:[!1,!0]})}),b(c,"$>=",function(n){var t=this,r=o;return n=H["$coerce_to!"](n,d("Hash"),"to_hash"),t.size<n.size?!1:(r=!0,y(n,"each",[],function s(u,f){var p=s.$$s==null?this:s.$$s,M=o;if(u==null&&(u=o),f==null&&(f=o),M=p.$fetch(u,null),M==null||M!==f){r=!1;return}},{$$s:t}),r)}),b(c,"$>",function(n){var t=this;return n=H["$coerce_to!"](n,d("Hash"),"to_hash"),t.size<=n.size?!1:L(t,n)}),b(c,"$<",function(n){var t=this;return n=H["$coerce_to!"](n,d("Hash"),"to_hash"),G(n,t)}),b(c,"$<=",function(n){var t=this;return n=H["$coerce_to!"](n,d("Hash"),"to_hash"),L(n,t)}),b(c,"$[]",function(n){var t=this,r=re(t,n);return r!==void 0?r:t.$default(n)}),b(c,"$[]=",function(n,t){var r=this;return T(r),J(r,n,t),t}),b(c,"$assoc",function(n){var t=this;return S(t,o,function(r,s){return r["$=="](n)?[!0,[r,s]]:[!1,o]})}),b(c,"$clear",function(){var n=this;return T(n),n.clear(),n.$$keys&&n.$$keys.clear(),n}),b(c,"$clone",function(){var n=this,t=n.$class().$new();return q(n,t),n["$frozen?"]()?t.$freeze():t}),b(c,"$compact",function(){var n=this,t=new Map;return S(n,t,function(r,s){return s!==o&&J(t,r,s),[!1,t]})}),b(c,"$compact!",function(){var n=this;T(n);var t=o;return S(n,t,function(r,s){return s===o&&(j(n,r),t=n),[!1,t]})}),b(c,"$compare_by_identity",function(){var n=this;return T(n),n.$$by_identity||(n.$$by_identity=!0,n.size!==0&&e.hash_rehash(n)),n}),b(c,"$compare_by_identity?",function(){var n=this;return n.$$by_identity===!0}),b(c,"$default",function(n){var t=this;return n!==void 0&&t.$$proc!==o&&t.$$proc!==void 0?t.$$proc.$call(t,n):t.$$none===void 0?o:t.$$none},-1),b(c,"$default=",function(n){var t=this;return T(t),t.$$proc=o,t.$$none=n,n}),b(c,"$default_proc",function(){var n=this;return n.$$proc!==void 0?n.$$proc:o}),b(c,"$default_proc=",function(n){var t=this;T(t);var r=n;return r!==o&&(r=H["$coerce_to!"](r,d("Proc"),"to_proc"),r["$lambda?"]()&&r.$arity().$abs()!==2&&ee.$raise(d("TypeError"),"default_proc takes two arguments")),t.$$none=o,t.$$proc=r,n}),b(c,"$delete",function $(n){var t=$.$$p||o,r=this;$.$$p=null,T(r);var s=j(r,n);return s!==void 0?s:t!==o?e.yield1(t,n):o}),b(c,"$delete_if",function $(){var n=$.$$p||o,t=this;return $.$$p=null,A(n)?(T(t),S(t,t,function(r,s){var u=n(r,s);return u!==!1&&u!==o&&j(t,r),[!1,t]})):y(t,"enum_for",["delete_if"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),b(c,"$dig",function(n,t){var r,s,u=this,f=o;return r=W(arguments,1),s=r,f=u["$[]"](n),f===o||s.length===0?f:(A(f["$respond_to?"]("dig"))||ee.$raise(d("TypeError"),""+f.$class()+" does not have #dig method"),y(f,"dig",B(s)))},-2),b(c,"$dup",function(){var n=this;return q(n,n.$class().$new())}),b(c,"$each",function $(){var n=$.$$p||o,t=this;return $.$$p=null,A(n)?S(t,t,function(r,s){return x(n,[r,s]),[!1,t]}):y(t,"enum_for",["each"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),b(c,"$each_key",function $(){var n=$.$$p||o,t=this;return $.$$p=null,A(n)?S(t,t,function(r,s){return n(r),[!1,t]}):y(t,"enum_for",["each_key"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),b(c,"$each_value",function $(){var n=$.$$p||o,t=this;return $.$$p=null,A(n)?S(t,t,function(r,s){return n(s),[!1,t]}):y(t,"enum_for",["each_value"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),b(c,"$empty?",function(){var n=this;return n.size===0}),b(c,"$except",function(n){var t,r,s=this;return t=W(arguments),r=t,y(s.$dup(),"except!",B(r))},-1),b(c,"$except!",function(n){var t,r,s=this;return t=W(arguments),r=t,y(r,"each",[],function u(f){var p=u.$$s==null?this:u.$$s;return f==null&&(f=o),p.$delete(f)},{$$s:s}),s},-1),b(c,"$fetch",function $(n,t){var r=$.$$p||o,s=this;$.$$p=null;var u=re(s,n);return u!==void 0?u:r!==o?r(n):t!==void 0?t:ee.$raise(d("KeyError").$new("key not found: "+n.$inspect(),new Map([["key",n],["receiver",s]])))},-2),b(c,"$fetch_values",function $(n){var t=$.$$p||o,r,s,u=this;return $.$$p=null,r=W(arguments),s=r,y(s,"map",[],function f(p){var M=f.$$s==null?this:f.$$s;return p==null&&(p=o),y(M,"fetch",[p],t.$to_proc())},{$$s:u})},-1),b(c,"$flatten",function(n){var t=this;n==null&&(n=1),n=H["$coerce_to!"](n,d("Integer"),"to_int");var r=[];return S(t,r,function(s,u){return r.push(s),u.$$is_array?n===1?(r.push(u),[!1,r]):(r=r.concat(u.$flatten(n-2)),[!1,r]):(r.push(u),[!1,r])})},-1),b(c,"$freeze",function(){var n=this;return A(n["$frozen?"]())?n:Z(n)}),b(c,"$has_key?",function(n){var t=this;return re(t,n)!==void 0}),b(c,"$has_value?",function(n){var t=this;return S(t,!1,function(r,s){return s["$=="](n)?[!0,!0]:[!1,!1]})});var i;b(c,"$hash",function(){var n=this,t=i===void 0,r=n.$object_id(),s=g(),u,f,p,M=n.size,D=new Int32Array(M);if(s=U(s,4),s=U(s,M),t)i=Object.create(null);else if(i[r])return U(s,16843009);try{for(u in i)if(f=i[u],n["$eql?"](f))return U(s,16843009);for(i[r]=n,p=0,S(n,!1,function(R,V){return D[p]=[1883326802,R,V].$hash(),p++,[!1,!1]}),D=D.sort(),p=0;p<D.length;p++)s=U(s,D[p]);return s}finally{t&&(i=void 0)}}),b(c,"$index",function(n){var t=this;return S(t,o,function(r,s){return s["$=="](n)?[!0,r]:[!1,o]})}),b(c,"$indexes",function(n){var t,r,s=this;t=W(arguments),r=t;for(var u=[],f=0,p=r.length,M,D;f<p;f++){if(M=r[f],D=re(s,M),D===void 0){u.push(s.$default());continue}u.push(D)}return u},-1);var a;return b(c,"$inspect",function(){var n=this,t=a===void 0,r=n.$object_id(),s=[];return function(){try{if(t&&(a={}),a.hasOwnProperty(r))return"{...}";return a[r]=!0,S(n,!1,function(u,f){return f=w("Opal").$inspect(f),u=w("Opal").$inspect(u),s.push(u+"=>"+f),[!1,!1]}),"{"+s.join(", ")+"}";return o}finally{t&&(a=void 0)}}()}),b(c,"$invert",function(){var n=this,t=new Map;return S(n,t,function(r,s){return J(t,s,r),[!1,t]})}),b(c,"$keep_if",function $(){var n=$.$$p||o,t=this;return $.$$p=null,A(n)?(T(t),S(t,t,function(r,s){var u=n(r,s);return(u===!1||u===o)&&j(t,r),[!1,t]})):y(t,"enum_for",["keep_if"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),b(c,"$keys",function(){var n=this;return Array.from(n.keys())}),b(c,"$length",function(){var n=this;return n.size}),b(c,"$merge",function $(n){var t=$.$$p||o,r,s,u=this;return $.$$p=null,r=W(arguments),s=r,y(u.$dup(),"merge!",B(s),t.$to_proc())},-1),b(c,"$merge!",function $(n){var t=$.$$p||o,r,s,u=this;$.$$p=null,r=W(arguments),s=r,T(u);var f,p;for(f=0;f<s.length;++f)p=H["$coerce_to!"](s[f],d("Hash"),"to_hash"),t===o?S(p,!1,function(M,D){return J(u,M,D),[!1,!1]}):S(p,!1,function(M,D){var R=re(u,M);return R===void 0?(J(u,M,D),[!1,!1]):(J(u,M,t(M,R,D)),[!1,!1])});return u},-1),b(c,"$rassoc",function(n){var t=this;return S(t,o,function(r,s){return s["$=="](n)?[!0,[r,s]]:[!1,o]})}),b(c,"$rehash",function(){var n=this;return T(n),e.hash_rehash(n)}),b(c,"$reject",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!A(n))return y(t,"enum_for",["reject"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});var r=new Map;return S(t,r,function(s,u){var f=n(s,u);return(f===!1||f===o)&&J(r,s,u),[!1,r]})}),b(c,"$reject!",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!A(n))return y(t,"enum_for",["reject!"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});T(t);var r=o;return S(t,r,function(s,u){var f=n(s,u);return f!==!1&&f!==o&&(j(t,s),r=t),[!1,r]})}),b(c,"$replace",function(n){var t=this;return T(t),n=H["$coerce_to!"](n,d("Hash"),"to_hash"),t.$clear(),S(n,!1,function(r,s){return J(t,r,s),[!1,!1]}),A(n.$default_proc())?t["$default_proc="](n.$default_proc()):t["$default="](n.$default()),t}),b(c,"$select",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!A(n))return y(t,"enum_for",["select"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});var r=new Map;return S(t,r,function(s,u){var f=n(s,u);return f!==!1&&f!==o&&J(r,s,u),[!1,r]})}),b(c,"$select!",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!A(n))return y(t,"enum_for",["select!"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});T(t);var r=o;return S(t,r,function(s,u){var f=n(s,u);return(f===!1||f===o)&&(j(t,s),r=t),[!1,r]})}),b(c,"$shift",function(){var n=this;return T(n),S(n,o,function(t,r){return[!0,[t,j(n,t)]]})}),b(c,"$slice",function(n){var t,r,s=this;t=W(arguments),r=t;for(var u=new Map,f=0,p=r.length;f<p;f++){var M=r[f],D=re(s,M);D!==void 0&&J(u,M,D)}return u},-1),b(c,"$to_a",function(){var n=this,t=[];return S(n,t,function(r,s){return t.push([r,s]),[!1,t]})}),b(c,"$to_h",function $(){var n=$.$$p||o,t=this;if($.$$p=null,n!==o)return y(t,"map",[],n.$to_proc()).$to_h();if(t.$$class===e.Hash)return t;var r=new Map;return q(t,r),r}),b(c,"$to_hash",m),b(c,"$to_proc",function(){var n=this;return y(n,"proc",[],function t(r){var s=t.$$s==null?this:t.$$s;return r==null&&ee.$raise(d("ArgumentError"),"no key given"),s["$[]"](r)},{$$arity:-1,$$s:n})}),b(c,"$transform_keys",function $(n){var t=$.$$p||o,r=this;if($.$$p=null,n==null&&(n=o),z(t)&&z(n))return y(r,"enum_for",["transform_keys"],function u(){var f=u.$$s==null?this:u.$$s;return f.$size()},{$$s:r});var s=new Map;return S(r,s,function(u,f){var p;return n!==o&&(p=re(n,u)),p===void 0&&t&&t!==o&&(p=t(u)),p===void 0&&(p=u),J(s,p,f),[!1,s]})},-1),b(c,"$transform_keys!",function $(n){var t=$.$$p||o,r=this;if($.$$p=null,n==null&&(n=o),z(t)&&z(n))return y(r,"enum_for",["transform_keys!"],function u(){var f=u.$$s==null?this:u.$$s;return f.$size()},{$$s:r});T(r);var s=new Map;return S(r,r,function(u,f){var p;return n!==o&&(p=re(n,u)),p===void 0&&t&&t!==o&&(p=t(u)),p===void 0?[!1,r]:(re(s,u)||j(r,u),J(r,p,f),J(s,p,!0),[!1,r])})},-1),b(c,"$transform_values",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!A(n))return y(t,"enum_for",["transform_values"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});var r=new Map;return S(t,r,function(s,u){return J(r,s,n(u)),[!1,r]})}),b(c,"$transform_values!",function $(){var n=$.$$p||o,t=this;return $.$$p=null,A(n)?(T(t),S(t,t,function(r,s){return J(t,r,n(s)),[!1,t]})):y(t,"enum_for",["transform_values!"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),b(c,"$values",function(){var n=this;return Array.from(n.values())}),F(c,"each_pair","each"),F(c,"eql?","=="),F(c,"filter","select"),F(c,"filter!","select!"),F(c,"include?","has_key?"),F(c,"indices","indexes"),F(c,"key","index"),F(c,"key?","has_key?"),F(c,"member?","has_key?"),F(c,"size","length"),F(c,"store","[]="),F(c,"to_s","inspect"),F(c,"update","merge!"),F(c,"value?","has_value?"),F(c,"values_at","indexes")}("::",Map,E)};Opal.modules["corelib/number"]=function(e){var x=e.klass,q=e.Opal,j=e.Kernel,S=e.def,re=e.eqeqeq,J=e.truthy,T=e.rb_gt,Z=e.not,g=e.rb_lt,U=e.alias,$e=e.send2,W=e.find_super,H=e.send,ee=e.rb_plus,C=e.rb_minus,b=e.eqeq,y=e.return_self,L=e.rb_divide,G=e.to_ary,A=e.rb_times,B=e.rb_le,m=e.rb_ge,z=e.return_val,F=e.const_set,k=e.top,E=[],o=e.nil,d=e.$$$;return e.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),k.$require("corelib/numeric"),function(I,h,l){var c=x(I,h,"Number");q.$bridge(Number,c),e.prop(c.$$prototype,"$$is_number",!0),c.$$is_number_class=!0;var X=new Map;(function(t,r){return S(t,"$allocate",function(){var u=this;return j.$raise(d("TypeError"),"allocator undefined for "+u.$name())}),e.udef(t,"$new"),o})(e.get_singleton_class(c)),S(c,"$coerce",function(r){var s=this;if(r===o)j.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float");else{if(r.$$is_string)return[j.$Float(r),s];if(r["$respond_to?"]("to_f"))return[q["$coerce_to!"](r,d("Float"),"to_f"),s];if(r.$$is_number)return[r,s];j.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float")}}),S(c,"$__id__",function(){var r=this;if(r|r===0)return r*2+1;if(X.has(r))return X.get(r);var s=e.uid();return X.set(r,s),s}),S(c,"$hash",function(){var r=this;return r|r===0?r.$__id__():r.toString().$hash()}),S(c,"$+",function(r){var s=this;return r.$$is_number?s+r:s.$__coerced__("+",r)}),S(c,"$-",function(r){var s=this;return r.$$is_number?s-r:s.$__coerced__("-",r)}),S(c,"$*",function(r){var s=this;return r.$$is_number?s*r:s.$__coerced__("*",r)}),S(c,"$/",function(r){var s=this;return r.$$is_number?s/r:s.$__coerced__("/",r)}),S(c,"$%",function(r){var s=this;if(r.$$is_number){if(r==-1/0)return r;if(r==0)j.$raise(d("ZeroDivisionError"),"divided by 0");else return r<0||s<0?(s%r+r)%r:s%r}else return s.$__coerced__("%",r)}),S(c,"$&",function(r){var s=this;return r.$$is_number?s&r:s.$__coerced__("&",r)}),S(c,"$|",function(r){var s=this;return r.$$is_number?s|r:s.$__coerced__("|",r)}),S(c,"$^",function(r){var s=this;return r.$$is_number?s^r:s.$__coerced__("^",r)}),S(c,"$<",function(r){var s=this;return r.$$is_number?s<r:s.$__coerced__("<",r)}),S(c,"$<=",function(r){var s=this;return r.$$is_number?s<=r:s.$__coerced__("<=",r)}),S(c,"$>",function(r){var s=this;return r.$$is_number?s>r:s.$__coerced__(">",r)}),S(c,"$>=",function(r){var s=this;return r.$$is_number?s>=r:s.$__coerced__(">=",r)});var w=function(t,r){return r.$$is_number?isNaN(t)||isNaN(r)?o:t>r?1:t<r?-1:0:t.$__coerced__("<=>",r)};S(c,"$<=>",function(r){var s=this;try{return w(s,r)}catch(u){if(e.rescue(u,[d("ArgumentError")]))try{return o}finally{e.pop_exception(u)}else throw u}}),S(c,"$<<",function(r){var s=this;return r=q["$coerce_to!"](r,d("Integer"),"to_int"),r>0?s<<r:s>>-r}),S(c,"$>>",function(r){var s=this;return r=q["$coerce_to!"](r,d("Integer"),"to_int"),r>0?s>>r:s<<-r}),S(c,"$[]",function(r){var s=this;return r=q["$coerce_to!"](r,d("Integer"),"to_int"),r<0?0:r>=32?s<0?1:0:s>>r&1}),S(c,"$+@",function(){var r=this;return+r}),S(c,"$-@",function(){var r=this;return-r}),S(c,"$~",function(){var r=this;return~r}),S(c,"$**",function(r){var s=this;return re(d("Integer"),r)?Z(d("Integer")["$==="](s))||J(T(r,0))?Math.pow(s,r):d("Rational").$new(s,1)["$**"](r):J(g(s,0))&&(re(d("Float"),r)||re(d("Rational"),r))?d("Complex").$new(s,0)["$**"](r.$to_f()):J(r.$$is_number!=null)?Math.pow(s,r):s.$__coerced__("**",r)}),S(c,"$==",function(r){var s=this;return r.$$is_number?s.valueOf()===r.valueOf():r["$respond_to?"]("==")?r["$=="](s):!1}),U(c,"===","=="),S(c,"$abs",function(){var r=this;return Math.abs(r)}),S(c,"$abs2",function(){var r=this;return Math.abs(r*r)}),S(c,"$allbits?",function(r){var s=this;return r=q["$coerce_to!"](r,d("Integer"),"to_int"),(s&r)==r}),S(c,"$anybits?",function(r){var s=this;return r=q["$coerce_to!"](r,d("Integer"),"to_int"),(s&r)!==0}),S(c,"$angle",function(){var r=this;return J(r["$nan?"]())?r:r==0?1/r>0?0:Math.PI:r<0?Math.PI:0}),S(c,"$bit_length",function(){var r=this;if(re(d("Integer"),r)||j.$raise(d("NoMethodError").$new("undefined method `bit_length` for "+r+":Float","bit_length")),r===0||r===-1)return 0;for(var s=0,u=r<0?~r:r;u!=0;)s+=1,u>>>=1;return s}),S(c,"$ceil",function(r){var s=this;r==null&&(r=0);var u=s.$to_f();if(u%1===0&&r>=0)return u;var f=Math.pow(10,r),p=Math.ceil(u*f)/f;return u%1===0&&(p=Math.round(p)),p},-1),S(c,"$chr",function(r){var s=this;return e.enc(String.fromCharCode(s),r||"BINARY")},-1),S(c,"$denominator",function t(){var r=t.$$p||o,s=this;return t.$$p=null,J(s["$nan?"]())||J(s["$infinite?"]())?1:$e(s,W(s,"denominator",t,!1,!0),"denominator",[],r)}),S(c,"$downto",function t(r){var s=t.$$p||o,u=this;if(t.$$p=null,s===o)return H(u,"enum_for",["downto",r],function p(){var M=p.$$s==null?this:p.$$s;return re(d("Numeric"),r)||j.$raise(d("ArgumentError"),"comparison of "+M.$class()+" with "+r.$class()+" failed"),J(T(r,M))?0:ee(C(M,r),1)},{$$s:u});r.$$is_number||j.$raise(d("ArgumentError"),"comparison of "+u.$class()+" with "+r.$class()+" failed");for(var f=u;f>=r;f--)s(f);return u}),S(c,"$equal?",function(r){var s=this,u=o;return J(u=s["$=="](r))?u:isNaN(s)&&isNaN(r)}),S(c,"$even?",function(){var r=this;return r%2===0}),S(c,"$floor",function(r){var s=this;r==null&&(r=0);var u=s.$to_f();if(u%1===0&&r>=0)return u;var f=Math.pow(10,r),p=Math.floor(u*f)/f;return u%1===0&&(p=Math.round(p)),p},-1),S(c,"$gcd",function(r){var s=this;re(d("Integer"),r)||j.$raise(d("TypeError"),"not an integer");for(var u=Math.abs(s),f=Math.abs(r);u>0;){var p=u;u=f%u,f=p}return f}),S(c,"$gcdlcm",function(r){var s=this;return[s.$gcd(r),s.$lcm(r)]}),S(c,"$integer?",function(){var r=this;return r%1===0}),S(c,"$is_a?",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,b(r,d("Integer"))&&re(d("Integer"),u)||b(r,d("Integer"))&&re(d("Integer"),u)||b(r,d("Float"))&&re(d("Float"),u)?!0:$e(u,W(u,"is_a?",t,!1,!0),"is_a?",[r],s)}),S(c,"$instance_of?",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,b(r,d("Integer"))&&re(d("Integer"),u)||b(r,d("Integer"))&&re(d("Integer"),u)||b(r,d("Float"))&&re(d("Float"),u)?!0:$e(u,W(u,"instance_of?",t,!1,!0),"instance_of?",[r],s)}),S(c,"$lcm",function(r){var s=this;return re(d("Integer"),r)||j.$raise(d("TypeError"),"not an integer"),s==0||r==0?0:Math.abs(s*r/s.$gcd(r))}),S(c,"$next",function(){var r=this;return r+1}),S(c,"$nobits?",function(r){var s=this;return r=q["$coerce_to!"](r,d("Integer"),"to_int"),(s&r)==0}),S(c,"$nonzero?",function(){var r=this;return r==0?o:r}),S(c,"$numerator",function t(){var r=t.$$p||o,s=this;return t.$$p=null,J(s["$nan?"]())||J(s["$infinite?"]())?s:$e(s,W(s,"numerator",t,!1,!0),"numerator",[],r)}),S(c,"$odd?",function(){var r=this;return r%2!==0}),S(c,"$ord",y),S(c,"$pow",function(r,s){var u=this;return u==0&&j.$raise(d("ZeroDivisionError"),"divided by 0"),s===void 0?u["$**"](r):(d("Integer")["$==="](r)||j.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),r<0&&j.$raise(d("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),d("Integer")["$==="](s)||j.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),s===0&&j.$raise(d("ZeroDivisionError"),"divided by 0"),u["$**"](r)["$%"](s))},-2),S(c,"$pred",function(){var r=this;return r-1}),S(c,"$quo",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,re(d("Integer"),u)?$e(u,W(u,"quo",t,!1,!0),"quo",[r],s):L(u,r)}),S(c,"$rationalize",function(r){var s,u,f=this,p=o,M=o;return arguments.length>1&&j.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),re(d("Integer"),f)?d("Rational").$new(f,1):J(f["$infinite?"]())?j.$raise(d("FloatDomainError"),"Infinity"):J(f["$nan?"]())?j.$raise(d("FloatDomainError"),"NaN"):J(r==null)?(u=d("Math").$frexp(f),s=G(u),p=s[0]==null?o:s[0],M=s[1]==null?o:s[1],p=d("Math").$ldexp(p,d(d("Float"),"MANT_DIG")).$to_i(),M=C(M,d(d("Float"),"MANT_DIG")),d("Rational").$new(A(2,p),1["$<<"](C(1,M))).$rationalize(d("Rational").$new(1,1["$<<"](C(1,M))))):f.$to_r().$rationalize(r)},-1),S(c,"$remainder",function(r){var s=this;return C(s,A(r,L(s,r).$truncate()))}),S(c,"$round",function(r){var s,u,f=this,p=o;if(re(d("Integer"),f)){if(J(r==null)||(re(d("Float"),r)&&J(r["$infinite?"]())&&j.$raise(d("RangeError"),"Infinity"),r=q["$coerce_to!"](r,d("Integer"),"to_int"),J(g(r,d(d("Integer"),"MIN")))&&j.$raise(d("RangeError"),"out of bounds"),J(r>=0)))return f;if(r=r["$-@"](),.415241*r-.125>f.$size())return 0;var M=Math.pow(10,r),D=Math.floor((Math.abs(f)+M/2)/M)*M;return f<0?-D:D}else{if(J(f["$nan?"]())&&J(r==null)&&j.$raise(d("FloatDomainError"),"NaN"),r=q["$coerce_to!"](r||0,d("Integer"),"to_int"),J(B(r,0)))J(f["$nan?"]())?j.$raise(d("RangeError"),"NaN"):J(f["$infinite?"]())&&j.$raise(d("FloatDomainError"),"Infinity");else{if(b(r,0))return Math.round(f);if(J(f["$nan?"]())||J(f["$infinite?"]()))return f}return u=d("Math").$frexp(f),s=G(u),s[0]==null||s[0],p=s[1]==null?o:s[1],J(m(r,C(ee(d(d("Float"),"DIG"),2),J(T(p,0))?L(p,4):C(L(p,3),1))))?f:J(g(r,(J(T(p,0))?ee(L(p,3),1):L(p,4))["$-@"]()))?0:Math.round(f*Math.pow(10,r))/Math.pow(10,r)}},-1),S(c,"$times",function t(){var r=t.$$p||o,s=this;if(t.$$p=null,!J(r))return H(s,"enum_for",["times"],function f(){var p=f.$$s==null?this:f.$$s;return p},{$$s:s});for(var u=0;u<s;u++)r(u);return s}),S(c,"$to_f",y),S(c,"$to_i",function(){var r=this;return r<0?Math.ceil(r):Math.floor(r)}),S(c,"$to_r",function(){var r,s,u=this,f=o,p=o;return re(d("Integer"),u)?d("Rational").$new(u,1):(s=d("Math").$frexp(u),r=G(s),f=r[0]==null?o:r[0],p=r[1]==null?o:r[1],f=d("Math").$ldexp(f,d(d("Float"),"MANT_DIG")).$to_i(),p=C(p,d(d("Float"),"MANT_DIG")),A(f,d(d("Float"),"RADIX")["$**"](p)).$to_r())}),S(c,"$to_s",function(r){var s=this;return r==null&&(r=10),r=q["$coerce_to!"](r,d("Integer"),"to_int"),(J(g(r,2))||J(T(r,36)))&&j.$raise(d("ArgumentError"),"invalid radix "+r),b(s,0)&&J(1/s===-1/0)?"-0.0":s.toString(r)},-1),S(c,"$truncate",function(r){var s=this;r==null&&(r=0);var u=s.$to_f();if(u%1===0&&r>=0)return u;var f=Math.pow(10,r),p=parseInt(u*f,10)/f;return u%1===0&&(p=Math.round(p)),p},-1),S(c,"$digits",function(r){var s=this;r==null&&(r=10),J(g(s,0))&&j.$raise(d(d("Math"),"DomainError"),"out of domain"),r=q["$coerce_to!"](r,d("Integer"),"to_int"),J(g(r,2))&&j.$raise(d("ArgumentError"),"invalid radix "+r),s!=parseInt(s)&&j.$raise(d("NoMethodError"),"undefined method `digits' for "+s.$inspect());var u=s,f=[];if(s==0)return[0];for(;u!=0;)f.push(u%r),u=parseInt(u/r,10);return f},-1),S(c,"$divmod",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,J(u["$nan?"]())||J(r["$nan?"]())?j.$raise(d("FloatDomainError"),"NaN"):J(u["$infinite?"]())?j.$raise(d("FloatDomainError"),"Infinity"):$e(u,W(u,"divmod",t,!1,!0),"divmod",[r],s)}),S(c,"$upto",function t(r){var s=t.$$p||o,u=this;if(t.$$p=null,s===o)return H(u,"enum_for",["upto",r],function p(){var M=p.$$s==null?this:p.$$s;return re(d("Numeric"),r)||j.$raise(d("ArgumentError"),"comparison of "+M.$class()+" with "+r.$class()+" failed"),J(g(r,M))?0:ee(C(r,M),1)},{$$s:u});r.$$is_number||j.$raise(d("ArgumentError"),"comparison of "+u.$class()+" with "+r.$class()+" failed");for(var f=u;f<=r;f++)s(f);return u}),S(c,"$zero?",function(){var r=this;return r==0}),S(c,"$size",z(4)),S(c,"$nan?",function(){var r=this;return isNaN(r)}),S(c,"$finite?",function(){var r=this;return r!=1/0&&r!=-1/0&&!isNaN(r)}),S(c,"$infinite?",function(){var r=this;return r==1/0?1:r==-1/0?-1:o}),S(c,"$positive?",function(){var r=this;return r!=0&&(r==1/0||1/r>0)}),S(c,"$negative?",function(){var r=this;return r==-1/0||1/r<0});function i(t){var r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}function a(t){return new DataView(t.buffer).getFloat64(0,!0)}function $(t){for(var r=i(t),s=0;s<r.length;s++)if(r[s]===255)r[s]=0;else{r[s]++;break}return a(r)}function n(t){for(var r=i(t),s=0;s<r.length;s++)if(r[s]===0)r[s]=255;else{r[s]--;break}return a(r)}return S(c,"$next_float",function(){var r=this;return b(r,d(d("Float"),"INFINITY"))?d(d("Float"),"INFINITY"):J(r["$nan?"]())?d(d("Float"),"NAN"):J(m(r,0))?$(Math.abs(r)):n(r)}),S(c,"$prev_float",function(){var r=this;return b(r,d(d("Float"),"INFINITY")["$-@"]())?d(d("Float"),"INFINITY")["$-@"]():J(r["$nan?"]())?d(d("Float"),"NAN"):J(T(r,0))?n(r):-$(Math.abs(r))}),U(c,"arg","angle"),U(c,"eql?","=="),U(c,"fdiv","/"),U(c,"inspect","to_s"),U(c,"kind_of?","is_a?"),U(c,"magnitude","abs"),U(c,"modulo","%"),U(c,"object_id","__id__"),U(c,"phase","angle"),U(c,"succ","next"),U(c,"to_int","to_i")}("::",d("Numeric")),F("::","Fixnum",d("Number")),function(I,h,l){var c=x(I,h,"Integer"),X=[c].concat(l);return c.$$is_number_class=!0,c.$$is_integer_class=!0,function(w,i){var a=[w].concat(i),$=e.$r(a);return S(w,"$allocate",function(){var t=this;return j.$raise(d("TypeError"),"allocator undefined for "+t.$name())}),e.udef(w,"$new"),S(w,"$sqrt",function(t){return t=q["$coerce_to!"](t,d("Integer"),"to_int"),t<0&&j.$raise(d(d("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(t),10)}),S(w,"$try_convert",function(t){var r=this;return $("Opal")["$coerce_to?"](t,r,"to_int")})}(e.get_singleton_class(c),X),F(c,"MAX",Math.pow(2,30)-1),F(c,"MIN",-Math.pow(2,30))}("::",d("Numeric"),E),function(I,h,l){var c=x(I,h,"Float");return c.$$is_number_class=!0,function(X,w){return S(X,"$allocate",function(){var a=this;return j.$raise(d("TypeError"),"allocator undefined for "+a.$name())}),e.udef(X,"$new"),S(X,"$===",function(a){return!!a.$$is_number})}(e.get_singleton_class(c)),F(c,"INFINITY",1/0),F(c,"MAX",Number.MAX_VALUE),F(c,"MIN",Number.MIN_VALUE),F(c,"NAN",NaN),F(c,"DIG",15),F(c,"MANT_DIG",53),F(c,"RADIX",2),F(c,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",d("Numeric"))};Opal.modules["corelib/range"]=function(e){var x=e.klass,q=e.truthy,j=e.Kernel,S=e.def,re=e.not,J=e.send2,T=e.find_super,Z=e.lambda,g=e.send,U=e.rb_ge,$e=e.rb_gt,W=e.eqeq,H=e.rb_le,ee=e.rb_lt,C=e.eqeqeq,b=e.return_ivar,y=e.rb_minus,L=e.Opal,G=e.rb_divide,A=e.rb_plus,B=e.rb_times,m=e.thrower,z=e.alias,F=e.top,k=[],E=e.nil,o=e.$$$;return e.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),F.$require("corelib/enumerable"),function(d,I,h){var l=x(d,I,"Range"),c=[l].concat(h),X=e.$r(c),w=l.$$prototype;w.begin=w.end=w.excl=E,l.$include(o("Enumerable")),l.$$prototype.$$is_range=!0,l.$attr_reader("begin","end"),S(l,"$initialize",function($,n,t){var r=this;return t==null&&(t=!1),q(r.begin)&&j.$raise(o("NameError"),"'initialize' called twice"),q($["$<=>"](n))||q($["$nil?"]())||q(n["$nil?"]())||j.$raise(o("ArgumentError"),"bad value for range"),r.begin=$,r.end=n,r.excl=t},-3),S(l,"$===",function($){var n=this;return q($.$$is_range)?!1:n["$cover?"]($)});function i(a){return a.begin===E||a.end===E||a.begin===-1/0||a.end===1/0||a.begin===1/0||a.end===-1/0}return S(l,"$count",function a(){var $=a.$$p||E,n=this;return a.$$p=null,re($!==E)&&q(i(n))?o(o("Float"),"INFINITY"):J(n,T(n,"count",a,!1,!0),"count",[],$)}),S(l,"$to_a",function a(){var $=a.$$p||E,n=this;return a.$$p=null,q(i(n))&&j.$raise(o("TypeError"),"cannot convert endless range to an array"),J(n,T(n,"to_a",a,!1,!0),"to_a",[],$)}),S(l,"$cover?",function($){var n=this,t=E,r=E,s=E,u=E,f=E,p=E,M=E,D=E;return t=Z(function(V,O){var ae=E;return V==null&&(V=E),O==null&&(O=E),q(ae=V["$<=>"](O))?ae:1}),q($.$$is_range)?(r=$.$begin(),s=$.$end(),u=$["$exclude_end?"](),q(n.begin)&&q(r["$nil?"]())||q(n.end)&&q(s["$nil?"]())||q(r)&&q(s)&&q(g(t.$call(r,s),"then",[],function(V){return V==null&&(V=E),q(u)?U(V,0):$e(V,0)}))||q(r)&&re(n["$cover?"](r))?!1:(f=t.$call(n.end,s),W(n.excl,u)?U(f,0):q(n.excl)?$e(f,0):q(U(f,0))?!0:(p=$.$max(),q(M=p["$nil?"]()["$!"]())?H(t.$call(p,n.end),0):M))):q(n.begin)&&q($e(t.$call(n.begin,$),0))?!1:q(n.end["$nil?"]())?!0:(D=t.$call($,n.end),q(n.excl)?ee(D,0):H(D,0))}),S(l,"$each",function a(){var $=a.$$p||E,n=this,t=E,r=E,s=E;if(a.$$p=null,$===E)return g(n,"enum_for",["each"],function p(){var M=p.$$s==null?this:p.$$s;return M.$size()},{$$s:n});var u,f;if(n.begin.$$is_number&&n.end.$$is_number){for((n.begin%1!==0||n.end%1!==0)&&j.$raise(o("TypeError"),"can't iterate from Float"),u=n.begin,f=n.end+(q(n.excl)?0:1);u<f;u++)$(u);return n}if(n.begin.$$is_string&&n.end.$$is_string)return g(n.begin,"upto",[n.end,n.excl],$.$to_proc()),n;for(t=n.begin,r=n.end,q(t["$respond_to?"]("succ"))||j.$raise(o("TypeError"),"can't iterate from "+t.$class());q(q(s=n.end["$nil?"]())?s:ee(t["$<=>"](r),0));)e.yield1($,t),t=t.$succ();return re(n.excl)&&W(t,r)&&e.yield1($,t),n}),S(l,"$eql?",function($){var n=this,t=E,r=E;return C(o("Range"),$)?q(t=q(r=n.excl["$==="]($["$exclude_end?"]()))?n.begin["$eql?"]($.$begin()):r)?n.end["$eql?"]($.$end()):t:!1}),S(l,"$exclude_end?",b("excl")),S(l,"$first",function a($){var n=a.$$p||E,t=this;return a.$$p=null,q(t.begin["$nil?"]())&&j.$raise(o("RangeError"),"cannot get the minimum of beginless range"),q($==null)?t.begin:J(t,T(t,"first",a,!1,!0),"first",[$],n)},-1),S(l,"$include?",function a($){var n=a.$$p||E,t=this,r=E,s=E;if(a.$$p=null,q(t.begin.$$is_number||t.end.$$is_number)||q(t.begin["$is_a?"](o("Time")))||q(t.end["$is_a?"](o("Time")))||q(o("Integer").$try_convert(t.begin))||q(o("Integer").$try_convert(t.end)))return t["$cover?"]($);if(q(t.begin.$$is_string||t.end.$$is_string)){if(q(t.begin.$$is_string&&t.end.$$is_string))return g(t.begin.$upto(t.end,t.excl),"any?",[],function(f){return f==null&&(f=E),f["$=="]($)});if(q(t.begin["$nil?"]()))return r=$["$<=>"](t.end),q(s=r["$nil?"]()["$!"]())?q(t.excl)?ee(r,0):H(r,0):s;if(q(t.end["$nil?"]()))return r=t.begin["$<=>"]($),q(s=r["$nil?"]()["$!"]())?H(r,0):s}return J(t,T(t,"include?",a,!1,!0),"include?",[$],n)}),S(l,"$last",function($){var n=this;return q(n.end["$nil?"]())&&j.$raise(o("RangeError"),"cannot get the maximum of endless range"),q($==null)?n.end:n.$to_a().$last($)},-1),S(l,"$max",function a(){var $=a.$$p||E,n=this;return a.$$p=null,q(n.end["$nil?"]())?j.$raise(o("RangeError"),"cannot get the maximum of endless range"):$!==E?J(n,T(n,"max",a,!1,!0),"max",[],$):re(n.begin["$nil?"]())&&(q($e(n.begin,n.end))||q(n.excl)&&W(n.begin,n.end))?E:n.excl?n.end-1:n.end}),S(l,"$min",function a(){var $=a.$$p||E,n=this;return a.$$p=null,q(n.begin["$nil?"]())?j.$raise(o("RangeError"),"cannot get the minimum of beginless range"):$!==E?J(n,T(n,"min",a,!1,!0),"min",[],$):re(n.end["$nil?"]())&&(q($e(n.begin,n.end))||q(n.excl)&&W(n.begin,n.end))?E:n.begin}),S(l,"$size",function(){var $=this.begin,n=this.end;if(o("Numeric")["$==="]($)){if(o("Numeric")["$==="](n)){var t=y(n,$);return t<0?0:(this.excl||(t+=1),o("Float")["$==="]($)||o("Float")["$==="](n)?Math.floor(t):t)}else if(n===E)return 1/0}else if($===E&&o("Numeric")["$==="](n))return 1/0;return E}),S(l,"$step",function a($){var n=a.$$p||E,t=this,r=E,s=E;a.$$p=null;function u(){$==null?$=1:$.$$is_number||($=L["$coerce_to!"]($,o("Integer"),"to_int")),$<0?j.$raise(o("ArgumentError"),"step can't be negative"):$===0&&j.$raise(o("ArgumentError"),"step can't be 0")}function f(){if(!t.begin["$respond_to?"]("succ")||t.begin.$$is_string&&t.end.$$is_string)return E;if($%1===0)return G(t.$size(),$).$ceil();var p=t.begin,M=t.end,D=Math.abs,R=Math.floor,V=(D(p)+D(M)+D(M-p))/D($)*o(o("Float"),"EPSILON"),O;return V>.5&&(V=.5),t.excl?(O=R((M-p)/$-V),O*$+p<M&&O++):O=R((M-p)/$+V)+1,O}return n===E?(q(t.begin["$is_a?"](X("Numeric")))||q(t.begin["$nil?"]()))&&(q(t.end["$is_a?"](X("Numeric")))||q(t.end["$nil?"]()))&&re(q(r=t.begin["$nil?"]())?t.end["$nil?"]():r)?o(o("Enumerator"),"ArithmeticSequence").$new(t,$,"step"):g(t,"enum_for",["step",$],function(){return u(),f()}):(u(),q(t.begin.$$is_number&&t.end.$$is_number)?(s=0,function(){try{var p=m("break");return g(t,"loop",[],function M(){var D=M.$$s==null?this:M.$$s,R=E;return D.begin==null&&(D.begin=E),D.excl==null&&(D.excl=E),D.end==null&&(D.end=E),R=A(D.begin,B(s,$)),q(D.excl)?q(U(R,D.end))&&p.$throw(E,M.$$is_lambda):q($e(R,D.end))&&p.$throw(E,M.$$is_lambda),e.yield1(n,R),s=A(s,1)},{$$s:t})}catch(M){if(M===p)return M.$v;throw M}finally{p.is_orphan=!0}}()):(t.begin.$$is_string&&t.end.$$is_string&&$%1!==0&&j.$raise(o("TypeError"),"no implicit conversion to float from string"),g(t,"each_with_index",[],function(M,D){return M==null&&(M=E),D==null&&(D=E),W(D["$%"]($),0)?e.yield1(n,M):E})),t)},-1),S(l,"$%",function($){var n=this;return q(n.begin["$is_a?"](X("Numeric")))&&q(n.end["$is_a?"](X("Numeric")))?o(o("Enumerator"),"ArithmeticSequence").$new(n,$,"%"):n.$step($)}),S(l,"$bsearch",function a(){var $=a.$$p||E,n=this;return a.$$p=null,$===E?n.$enum_for("bsearch"):(q(i(n)&&(n.begin.$$is_number||n.end.$$is_number))&&j.$raise(o("NotImplementedError"),"Can't #bsearch an infinite range"),q(n.begin.$$is_number&&n.end.$$is_number)||j.$raise(o("TypeError"),"can't do binary search for "+n.begin.$class()),g(n.$to_a(),"bsearch",[],$.$to_proc()))}),S(l,"$to_s",function(){var $=this,n=E;return""+(q(n=$.begin)?n:"")+(q($.excl)?"...":"..")+(q(n=$.end)?n:"")}),S(l,"$inspect",function(){var $=this,n=E;return""+(q(n=$.begin)?$.begin.$inspect():n)+(q($.excl)?"...":"..")+(q(n=$.end)?$.end.$inspect():n)}),S(l,"$marshal_load",function($){var n=this;return n.begin=$["$[]"]("begin"),n.end=$["$[]"]("end"),n.excl=$["$[]"]("excl")}),S(l,"$hash",function(){var $=this;return[o("Range"),$.begin,$.end,$.excl].$hash()}),z(l,"==","eql?"),z(l,"member?","include?")}("::",null,k)};Opal.modules["corelib/proc"]=function(e){var x=e.slice,q=e.each_ivar,j=e.klass,S=e.truthy,re=e.Kernel,J=e.defs,T=e.def,Z=e.send,g=e.to_a,U=e.return_self,$e=e.ensure_kwargs,W=e.hash_get,H=e.Opal,ee=e.alias,C=e.nil,b=e.$$$;return e.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(y,L){var G=j(y,L,"Proc");e.prop(G.$$prototype,"$$is_proc",!0),e.prop(G.$$prototype,"$$is_lambda",!1),J(G,"$new",function m(){var z=m.$$p||C;return m.$$p=null,S(z)||re.$raise(b("ArgumentError"),"tried to create a Proc object without a block"),z});function A(m,z){if(m.$$ret)try{return m.apply(null,z)}catch(F){if(F===m.$$ret)return F.$v;throw F}else return m.apply(null,z)}function B(m,z){if(m.$$brk)try{return e.yieldX(m,z)}catch(F){if(F===m.$$brk)return F.$v;throw F}else return e.yieldX(m,z)}return T(G,"$call",function m(z){var F=m.$$p||C,k,E,o=this;return m.$$p=null,k=x(arguments),E=k,F!==C&&(o.$$p=F),o.$$is_lambda?A(o,E):B(o,E)},-1),T(G,"$>>",function m(z){m.$$p;var F=this;return m.$$p=null,Z(re,"proc",[],function k(E){var o=k.$$p||C,d,I,h=k.$$s==null?this:k.$$s,l=C;return k.$$p=null,d=x(arguments),I=d,l=Z(h,"call",g(I),o.$to_proc()),z.$call(l)},{$$arity:-1,$$s:F})}),T(G,"$<<",function m(z){m.$$p;var F=this;return m.$$p=null,Z(re,"proc",[],function k(E){var o=k.$$p||C,d,I,h=k.$$s==null?this:k.$$s,l=C;return k.$$p=null,d=x(arguments),I=d,l=Z(z,"call",g(I),o.$to_proc()),h.$call(l)},{$$arity:-1,$$s:F})}),T(G,"$to_proc",U),T(G,"$lambda?",function(){var z=this;return!!z.$$is_lambda}),T(G,"$arity",function(){var z=this;return z.$$is_curried?-1:z.$$arity!=null?z.$$arity:z.length}),T(G,"$source_location",function(){var z=this,F=C;return z.$$is_curried?C:S(F=z.$$source_location)?F:C}),T(G,"$binding",function(){var z=this;return z.$$is_curried&&re.$raise(b("ArgumentError"),"Can't create Binding"),S(b("::","Binding","skip_raise")?"constant":C)?b("Binding").$new(C,[],z.$$s,z.$source_location()):C}),T(G,"$parameters",function(z){var F,k=this;if(z=$e(z),F=W(z,"lambda"),k.$$is_curried)return[["rest"]];if(k.$$parameters){if(F??k.$$is_lambda)return k.$$parameters;var E=[],o,d;for(o=0,d=k.$$parameters.length;o<d;o++){var I=k.$$parameters[o];I[0]==="req"&&(I=["opt",I[1]]),E.push(I)}return E}else return[]},-1),T(G,"$curry",function(z){var F=this;z===void 0?z=F.length:(z=H["$coerce_to!"](z,b("Integer"),"to_int"),F.$$is_lambda&&z!==F.length&&re.$raise(b("ArgumentError"),"wrong number of arguments ("+z+" for "+F.length+")"));function k(){var E=x(arguments),o=E.length,d;return o>z&&F.$$is_lambda&&!F.$$is_curried&&re.$raise(b("ArgumentError"),"wrong number of arguments ("+o+" for "+z+")"),o>=z?F.$call.apply(F,E):(d=function(){return k.apply(null,E.concat(x(arguments)))},d.$$is_lambda=F.$$is_lambda,d.$$is_curried=!0,d)}return k.$$is_lambda=F.$$is_lambda,k.$$is_curried=!0,k},-1),T(G,"$dup",function(){var z=this,F=z.$$original_proc||z,k=function(){return F.apply(this,arguments)};return q(z,function(E){k[E]=z[E]}),k}),ee(G,"===","call"),ee(G,"clone","dup"),ee(G,"yield","call"),ee(G,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(e){var x=e.klass,q=e.def,j=e.truthy,S=e.slice,re=e.alias,J=e.Kernel,T=e.send,Z=e.to_a,g=e.nil,U=e.$$$;return e.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function($e,W){var H=x($e,W,"Method"),ee=H.$$prototype;return ee.method=ee.receiver=ee.owner=ee.name=g,H.$attr_reader("owner","receiver","name"),q(H,"$initialize",function(b,y,L,G){var A=this;return A.receiver=b,A.owner=y,A.name=G,A.method=L}),q(H,"$arity",function(){var b=this;return b.method.$arity()}),q(H,"$parameters",function(){var b=this;return b.method.$$parameters}),q(H,"$source_location",function(){var b=this,y=g;return j(y=b.method.$$source_location)?y:["(eval)",0]}),q(H,"$comments",function(){var b=this,y=g;return j(y=b.method.$$comments)?y:[]}),q(H,"$call",function C(b){var y=C.$$p||g,L,G,A=this;return C.$$p=null,L=S(arguments),G=L,A.method.$$p=y,A.method.apply(A.receiver,G)},-1),q(H,"$curry",function(b){var y=this;return y.method.$curry(b)},-1),q(H,"$>>",function(b){var y=this;return y.method["$>>"](b)}),q(H,"$<<",function(b){var y=this;return y.method["$<<"](b)}),q(H,"$unbind",function(){var b=this;return U("UnboundMethod").$new(b.receiver.$class(),b.owner,b.method,b.name)}),q(H,"$to_proc",function(){var b=this,y=b.$call.bind(b);return y.$$unbound=b.method,y.$$is_lambda=!0,y.$$arity=b.method.$$arity==null?b.method.length:b.method.$$arity,y.$$parameters=b.method.$$parameters,y}),q(H,"$inspect",function(){var b=this;return"#<"+b.$class()+": "+b.receiver.$class()+"#"+b.name+" (defined in "+b.owner+" in "+b.$source_location().$join(":")+")>"}),re(H,"[]","call"),re(H,"===","call")}("::",null),function($e,W){var H=x($e,W,"UnboundMethod"),ee=H.$$prototype;return ee.method=ee.owner=ee.name=ee.source=g,H.$attr_reader("source","owner","name"),q(H,"$initialize",function(b,y,L,G){var A=this;return A.source=b,A.owner=y,A.method=L,A.name=G,A.$$method=L}),q(H,"$arity",function(){var b=this;return b.method.$arity()}),q(H,"$parameters",function(){var b=this;return b.method.$$parameters}),q(H,"$source_location",function(){var b=this,y=g;return j(y=b.method.$$source_location)?y:["(eval)",0]}),q(H,"$comments",function(){var b=this,y=g;return j(y=b.method.$$comments)?y:[]}),q(H,"$bind",function(b){var y=this;if(y.owner.$$is_module||e.is_a(b,y.owner))return U("Method").$new(b,y.owner,y.method,y.name);J.$raise(U("TypeError"),"can't bind singleton method to a different class (expected "+b+".kind_of?("+y.owner+" to be true)")}),q(H,"$bind_call",function C(b,y){var L=C.$$p||g,G,A,B=this;return C.$$p=null,G=S(arguments,1),A=G,T(B.$bind(b),"call",Z(A),L.$to_proc())},-2),q(H,"$inspect",function(){var b=this;return"#<"+b.$class()+": "+b.source+"#"+b.name+" (defined in "+b.owner+" in "+b.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(e){var x=e.gvars,q=e.const_set,j=e.Object,S=e.nil;return e.add_stubs("new"),x["&"]=x["~"]=x["`"]=x["'"]=S,x.LOADED_FEATURES=x['"']=e.loaded_features,x.LOAD_PATH=x[":"]=[],x["/"]=`
`,x[","]=S,q("::","ARGV",[]),q("::","ARGF",j.$new()),q("::","ENV",new Map),x.VERBOSE=!1,x.DEBUG=!1,x.SAFE=0};Opal.modules["corelib/io"]=function(e){var x=e.klass,q=e.const_set,j=e.not,S=e.truthy,re=e.def,J=e.return_ivar,T=e.return_val,Z=e.slice,g=e.Kernel,U=e.gvars,$e=e.send,W=e.to_a,H=e.rb_plus,ee=e.neqeq,C=e.range,b=e.eqeq,y=e.to_ary,L=e.rb_gt,G=e.assign_ivar_val,A=e.alias,B,m=e.nil,z=e.$$$;e.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(k,E){var o=x(k,E,"IO"),d=o.$$prototype;return d.read_buffer=d.closed=m,q(o,"SEEK_SET",0),q(o,"SEEK_CUR",1),q(o,"SEEK_END",2),q(o,"SEEK_DATA",3),q(o,"SEEK_HOLE",4),q(o,"READABLE",1),q(o,"WRITABLE",4),o.$attr_reader("eof"),o.$attr_accessor("read_proc","sync","tty","write_proc"),re(o,"$initialize",function(h,l){var c=this;return l==null&&(l="r"),c.fd=h,c.flags=l,c.eof=!1,S(l["$include?"]("r"))&&j(l["$match?"](/[wa+]/))?c.closed="write":S(l["$match?"](/[wa]/))&&j(l["$match?"](/[r+]/))?c.closed="read":m},-2),re(o,"$fileno",J("fd")),re(o,"$tty?",function(){var h=this;return h.tty==!0}),re(o,"$write",function(h){var l=this;return l.write_proc(h),h.$size()}),re(o,"$flush",T(m)),re(o,"$<<",function(h){var l=this;return l.$write(h),l}),re(o,"$print",function(h){var l,c,X=this;U[","]==null&&(U[","]=m),l=Z(arguments),c=l;for(var w=0,i=c.length;w<i;w++)c[w]=g.$String(c[w]);return X.$write(c.join(U[","])),m},-1),re(o,"$puts",function(h){var l,c,X=this;l=Z(arguments),c=l;var w;if(c.length===0)return X.$write(`
`),m;for(var i=0,a=c.length;i<a;i++)if(c[i].$$is_array){var $=c[i].$flatten();$.length>0&&$e(X,"puts",W($))}else c[i].$$is_string?w=c[i].valueOf():w=g.$String(c[i]),w.endsWith(`
`)||(w+=`
`),X.$write(w);return m},-1),re(o,"$getc",function(){var h=this,l=m,c=m,X=m;h.read_buffer=S(l=h.read_buffer)?l:"",c="";do if(h.read_buffer=H(h.read_buffer,c),ee(h.read_buffer,""))return X=h.read_buffer["$[]"](0),h.read_buffer=h.read_buffer["$[]"](C(1,-1,!1)),X;while(S(c=h.$sysread_noraise(1)));return m}),re(o,"$getbyte",function(){var h,l=this;return h=l.$getc(),h===m||h==null?m:h.$ord()}),re(o,"$readbyte",function(){var h=this;return h.$readchar().$ord()}),re(o,"$readchar",function(){var h=this,l=m;return S(l=h.$getc())?l:g.$raise(z("EOFError"),"end of file reached")}),re(o,"$readline",function(h){var l,c,X=this,w=m;return l=Z(arguments),c=l,S(w=$e(X,"gets",W(c)))?w:g.$raise(z("EOFError"),"end of file reached")},-1),re(o,"$gets",function(h,l,c){var X,w,i=this,a=m,$=m,n=m,t=m,r=m,s=m;U["/"]==null&&(U["/"]=m),h==null&&(h=!1),l==null&&(l=m),c==null&&(c=new Map),S(h.$$is_number)&&j(l)&&(X=[!1,h,l],h=X[0],l=X[1],c=X[2]),S(h.$$is_hash)&&j(l)&&b(c,new Map)?(X=[!1,m,h],h=X[0],l=X[1],c=X[2]):S(l.$$is_hash)&&b(c,new Map)&&(X=[h,m,l],h=X[0],l=X[1],c=X[2]),a=h,b(h,!1)&&(h=U["/"]),b(h,"")&&(h=/\r?\n\r?\n/),h=S($=h)?$:"",b(a,"")||(h=h.$to_str()),n=b(a,"")?2:h.$length(),b(h," ")&&(h=/ /),i.read_buffer=S($=i.read_buffer)?$:"",t="",r=m;do if(i.read_buffer=H(i.read_buffer,t),ee(h,"")&&S(S(h.$$is_regexp)?i.read_buffer["$match?"](h):i.read_buffer["$include?"](h))){s=i.read_buffer,w=i.read_buffer.$split(h,2),X=y(w),r=X[0]==null?m:X[0],i.read_buffer=X[1]==null?m:X[1],ee(r,s)&&(r=H(r,s["$[]"](r.$length(),n)));break}while(S(t=i.$sysread_noraise(b(h,"")?65536:1)));return S(r)||(X=[S($=i.read_buffer)?$:"",""],r=X[0],i.read_buffer=X[1],b(r,"")&&(r=m)),S(r)&&(S(l)&&(r=r["$[]"](e.Range.$new(0,l,!0)),i.read_buffer=H(r["$[]"](e.Range.$new(l,-1,!1)),i.read_buffer)),S(c["$[]"]("chomp"))&&(r=r.$sub(/\r?\n$/,"")),b(a,"")&&(r=r.$sub(/^[\r\n]+/,""))),b(a,!1)&&(U._=r),r},-1),re(o,"$sysread",function(h){var l=this,c=m;return S(c=l.read_proc(h))?c:(l.eof=!0,g.$raise(z("EOFError"),"end of file reached"))}),re(o,"$sysread_noraise",function(h){var l=this;try{return l.$sysread(h)}catch(c){if(e.rescue(c,[z("EOFError")]))try{return m}finally{e.pop_exception(c)}else throw c}}),re(o,"$readpartial",function(h){var l,c=this,X=m,w=m,i=m;return c.read_buffer=S(X=c.read_buffer)?X:"",w=c.$sysread(h),l=[H(c.read_buffer,S(X=w)?X:""),""],i=l[0],c.read_buffer=l[1],b(i,"")&&(i=m),i}),re(o,"$read",function(h){var l,c=this,X=m,w=m,i=m;h==null&&(h=m),c.read_buffer=S(X=c.read_buffer)?X:"",w="",i=m;do if(c.read_buffer=H(c.read_buffer,w),S(h)&&S(L(c.read_buffer.$length(),h)))return l=[c.read_buffer["$[]"](e.Range.$new(0,h,!0)),c.read_buffer["$[]"](e.Range.$new(h,-1,!1))],i=l[0],c.read_buffer=l[1],i;while(S(w=c.$sysread_noraise(S(X=h)?X:65536)));return l=[c.read_buffer,""],i=l[0],c.read_buffer=l[1],i},-1),re(o,"$readlines",function(h){var l=this;return U["/"]==null&&(U["/"]=m),h==null&&(h=U["/"]),l.$each_line(h).$to_a()},-1),re(o,"$each",function I(h,l){var c=I.$$p||m,X,w,i,a=this,$=m;if(U["/"]==null&&(U["/"]=m),I.$$p=null,X=Z(arguments),X.length>0&&(w=X.shift()),w==null&&(w=U["/"]),i=X,c===m)return $e(a,"enum_for",["each",w].concat(W(i)));for(;S($=$e(a,"gets",[w].concat(W(i))));)e.yield1(c,$);return a},-1),re(o,"$each_byte",function I(){var h=I.$$p||m,l=this,c=m;if(I.$$p=null,h===m)return l.$enum_for("each_byte");for(;S(c=l.$getbyte());)e.yield1(h,c);return l}),re(o,"$each_char",function I(){var h=I.$$p||m,l=this,c=m;if(I.$$p=null,h===m)return l.$enum_for("each_char");for(;S(c=l.$getc());)e.yield1(h,c);return l}),re(o,"$close",G("closed","both")),re(o,"$close_read",function(){var h=this;return b(h.closed,"write")?h.closed="both":h.closed="read"}),re(o,"$close_write",function(){var h=this;return b(h.closed,"read")?h.closed="both":h.closed="write"}),re(o,"$closed?",function(){var h=this;return h.closed["$=="]("both")}),re(o,"$closed_read?",function(){var h=this,l=m;return S(l=h.closed["$=="]("read"))?l:h.closed["$=="]("both")}),re(o,"$closed_write?",function(){var h=this,l=m;return S(l=h.closed["$=="]("write"))?l:h.closed["$=="]("both")}),re(o,"$check_writable",function(){var h=this;return S(h["$closed_write?"]())?g.$raise(z("IOError"),"not opened for writing"):m}),re(o,"$check_readable",function(){var h=this;return S(h["$closed_read?"]())?g.$raise(z("IOError"),"not opened for reading"):m}),A(o,"each_line","each"),A(o,"eof?","eof")}("::",null),q("::","STDIN",U.stdin=z("IO").$new(0,"r")),q("::","STDOUT",U.stdout=z("IO").$new(1,"w")),q("::","STDERR",U.stderr=z("IO").$new(2,"w"));var F=e.global.console;return z("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(k){process.stdout.write(k)}:function(k){F.log(k)}),z("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(k){process.stderr.write(k)}:function(k){F.warn(k)}),B=[function(k){var E=prompt();return E!==null?E+`
`:m}],$e(z("STDIN"),"read_proc=",B),B[B.length-1]};Opal.modules["opal/regexp_anchors"]=function(e){var x=e.module,q=e.const_set,j=[];e.nil;var S=e.$$$;return e.add_stubs("new"),function(re,J){var T=x(re,"Opal"),Z=[T].concat(J),g=e.$r(Z);return q(T,"REGEXP_START","^"),q(T,"REGEXP_END","$"),q(T,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),q(T,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),q(T,"INLINE_IDENTIFIER_REGEXP",g("Regexp").$new("[^"+S(T,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+S(T,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),q(T,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),q(T,"CONST_NAME_REGEXP",g("Regexp").$new(""+S(T,"REGEXP_START")+"(::)?[A-Z][^"+S(T,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+S(T,"REGEXP_END")))}(j[0],j)};Opal.modules["opal/mini"]=function(e){var x=e.Object;return e.nil,e.add_stubs("require"),x.$require("opal/base"),x.$require("corelib/nil"),x.$require("corelib/boolean"),x.$require("corelib/string"),x.$require("corelib/comparable"),x.$require("corelib/enumerable"),x.$require("corelib/enumerator"),x.$require("corelib/array"),x.$require("corelib/hash"),x.$require("corelib/number"),x.$require("corelib/range"),x.$require("corelib/proc"),x.$require("corelib/method"),x.$require("corelib/regexp"),x.$require("corelib/variables"),x.$require("corelib/io"),x.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(e){var x=e.coerce_to,q=e.module,j=e.slice,S=e.truthy,re=e.eqeq,J=e.Opal,T=e.Kernel,Z=e.gvars,g=e.def,U=e.alias,$e=e.nil,W=e.$$$;return e.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(H){var ee=q(H,"Kernel");return g(ee,"$format",function(b,y){var L,G,A=$e;Z.DEBUG==null&&(Z.DEBUG=$e),L=j(arguments,1),G=L,re(G.$length(),1)&&S(G["$[]"](0)["$respond_to?"]("to_ary"))&&(A=J["$coerce_to?"](G["$[]"](0),W("Array"),"to_ary"),S(A["$nil?"]())||(G=A.$to_a()));var B="",m=0,z,F,k=b.length,E,o,d,I,h,l,c,X,w,i,a,$,n,t=1,r=0,s,u=0,f=1,p=2,M=4,D=8,R=16,V=32,O=64,ae=128;function le(){s&V&&T.$raise(W("ArgumentError"),"flag after width"),s&ae&&T.$raise(W("ArgumentError"),"flag after precision")}function _e(){s&V&&T.$raise(W("ArgumentError"),"width given twice"),s&ae&&T.$raise(W("ArgumentError"),"width after precision")}function de(N){return N>=G.length&&T.$raise(W("ArgumentError"),"too few arguments"),G[N]}function ge(){switch(r){case-1:T.$raise(W("ArgumentError"),"unnumbered("+t+") mixed with numbered");case-2:T.$raise(W("ArgumentError"),"unnumbered("+t+") mixed with named")}return r=t++,de(r-1)}function ve(N){return r>0&&T.$raise(W("ArgumentError"),"numbered("+N+") after unnumbered("+r+")"),r===-2&&T.$raise(W("ArgumentError"),"numbered("+N+") after named"),N<1&&T.$raise(W("ArgumentError"),"invalid index - "+N+"$"),r=-1,de(N-1)}function me(){return n===void 0?ge():n}function be(N){for(var P,Y="";;F++){if(F===k&&T.$raise(W("ArgumentError"),"malformed format string - %*[0-9]"),b.charCodeAt(F)<48||b.charCodeAt(F)>57)return F--,P=parseInt(Y,10)||0,P>2147483647&&T.$raise(W("ArgumentError"),""+N+" too big"),P;Y+=b.charAt(F)}}function ie(N){var P,Y=be(N);return b.charAt(F+1)==="$"?(F++,P=ve(Y)):P=ge(),P.$to_int()}for(F=b.indexOf("%");F!==-1;F=b.indexOf("%",F)){switch(o=void 0,s=u,I=-1,h=-1,n=void 0,z=F,F++,b.charAt(F)){case"%":m=F;case"":case`
`:case"\0":F++;continue}e:for(;F<k;F++)switch(b.charAt(F)){case" ":le(),s|=R;continue e;case"#":le(),s|=f;continue e;case"+":le(),s|=M;continue e;case"-":le(),s|=p;continue e;case"0":le(),s|=D;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(l=be("width"),b.charAt(F+1)==="$"){if(F+2===k){o="%",F++;break e}n!==void 0&&T.$raise(W("ArgumentError"),"value given twice - %"+l+"$"),n=ve(l),F++}else _e(),s|=V,I=l;continue e;case"<":case"{":for(X=b.charAt(F)==="<"?">":"}",c="",F++;;F++){if(F===k&&T.$raise(W("ArgumentError"),"malformed name - unmatched parenthesis"),b.charAt(F)===X){if(r>0&&T.$raise(W("ArgumentError"),"named "+c+" after unnumbered("+r+")"),r===-1&&T.$raise(W("ArgumentError"),"named "+c+" after numbered"),r=-2,(G[0]===void 0||!G[0].$$is_hash)&&T.$raise(W("ArgumentError"),"one hash required"),n=G[0].$fetch(c),X===">")continue e;if(o=n.toString(),h!==-1&&(o=o.slice(0,h)),s&p)for(;o.length<I;)o=o+" ";else for(;o.length<I;)o=" "+o;break e}c+=b.charAt(F)}case"*":F++,_e(),s|=V,I=ie("width"),I<0&&(s|=p,I=-I);continue e;case".":if(s&ae&&T.$raise(W("ArgumentError"),"precision given twice"),s|=O|ae,h=0,F++,b.charAt(F)==="*"){F++,h=ie("precision"),h<0&&(s&=~O);continue e}h=be("precision");continue e;case"d":case"i":case"u":if(E=T.$Integer(me()),E>=0){for(o=E.toString();o.length<h;)o="0"+o;if(s&p)for((s&M||s&R)&&(o=(s&M?"+":" ")+o);o.length<I;)o=o+" ";else if(s&D&&h===-1){for(;o.length<I-(s&M||s&R?1:0);)o="0"+o;(s&M||s&R)&&(o=(s&M?"+":" ")+o)}else for((s&M||s&R)&&(o=(s&M?"+":" ")+o);o.length<I;)o=" "+o}else{for(o=(-E).toString();o.length<h;)o="0"+o;if(s&p)for(o="-"+o;o.length<I;)o=o+" ";else if(s&D&&h===-1){for(;o.length<I-1;)o="0"+o;o="-"+o}else for(o="-"+o;o.length<I;)o=" "+o}break e;case"b":case"B":case"o":case"x":case"X":switch(b.charAt(F)){case"b":case"B":w=2,i="0b",a=/^1+/,$="1";break;case"o":w=8,i="0",a=/^3?7+/,$="7";break;case"x":case"X":w=16,i="0x",a=/^f+/,$="f";break}if(E=T.$Integer(me()),E>=0){for(o=E.toString(w);o.length<h;)o="0"+o;if(s&p)for((s&M||s&R)&&(o=(s&M?"+":" ")+o),s&f&&E!==0&&(o=i+o);o.length<I;)o=o+" ";else if(s&D&&h===-1){for(;o.length<I-(s&M||s&R?1:0)-(s&f&&E!==0?i.length:0);)o="0"+o;s&f&&E!==0&&(o=i+o),(s&M||s&R)&&(o=(s&M?"+":" ")+o)}else for(s&f&&E!==0&&(o=i+o),(s&M||s&R)&&(o=(s&M?"+":" ")+o);o.length<I;)o=" "+o}else if(s&M||s&R){for(o=(-E).toString(w);o.length<h;)o="0"+o;if(s&p)for(s&f&&(o=i+o),o="-"+o;o.length<I;)o=o+" ";else if(s&D&&h===-1){for(;o.length<I-1-(s&f?2:0);)o="0"+o;s&f&&(o=i+o),o="-"+o}else for(s&f&&(o=i+o),o="-"+o;o.length<I;)o=" "+o}else{for(o=(E>>>0).toString(w).replace(a,$);o.length<h-2;)o=$+o;if(s&p)for(o=".."+o,s&f&&(o=i+o);o.length<I;)o=o+" ";else if(s&D&&h===-1){for(;o.length<I-2-(s&f?i.length:0);)o=$+o;o=".."+o,s&f&&(o=i+o)}else for(o=".."+o,s&f&&(o=i+o);o.length<I;)o=" "+o}b.charAt(F)===b.charAt(F).toUpperCase()&&(o=o.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(E=T.$Float(me()),E>=0||isNaN(E)){if(E===1/0)o="Inf";else switch(b.charAt(F)){case"f":o=E.toFixed(h===-1?6:h);break;case"e":case"E":o=E.toExponential(h===-1?6:h);break;case"g":case"G":o=E.toExponential(),d=parseInt(o.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(o=E.toPrecision(h===-1?s&f?6:void 0:h));break}if(s&p)for((s&M||s&R)&&(o=(s&M?"+":" ")+o);o.length<I;)o=o+" ";else if(s&D&&E!==1/0&&!isNaN(E)){for(;o.length<I-(s&M||s&R?1:0);)o="0"+o;(s&M||s&R)&&(o=(s&M?"+":" ")+o)}else for((s&M||s&R)&&(o=(s&M?"+":" ")+o);o.length<I;)o=" "+o}else{if(E===-1/0)o="Inf";else switch(b.charAt(F)){case"f":o=(-E).toFixed(h===-1?6:h);break;case"e":case"E":o=(-E).toExponential(h===-1?6:h);break;case"g":case"G":o=(-E).toExponential(),d=parseInt(o.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(o=(-E).toPrecision(h===-1?s&f?6:void 0:h));break}if(s&p)for(o="-"+o;o.length<I;)o=o+" ";else if(s&D&&E!==-1/0){for(;o.length<I-1;)o="0"+o;o="-"+o}else for(o="-"+o;o.length<I;)o=" "+o}b.charAt(F)===b.charAt(F).toUpperCase()&&E!==1/0&&E!==-1/0&&!isNaN(E)&&(o=o.toUpperCase()),o=o.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":T.$raise(W("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(E=me(),E["$respond_to?"]("to_ary")&&(E=E.$to_ary()[0]),E["$respond_to?"]("to_str")?o=E.$to_str():o=String.fromCharCode(x(E,W("Integer"),"to_int")),o.length!==1&&T.$raise(W("ArgumentError"),"%c requires a character"),s&p)for(;o.length<I;)o=o+" ";else for(;o.length<I;)o=" "+o;break e;case"p":if(o=me().$inspect(),h!==-1&&(o=o.slice(0,h)),s&p)for(;o.length<I;)o=o+" ";else for(;o.length<I;)o=" "+o;break e;case"s":if(o=me().$to_s(),h!==-1&&(o=o.slice(0,h)),s&p)for(;o.length<I;)o=o+" ";else for(;o.length<I;)o=" "+o;break e;default:T.$raise(W("ArgumentError"),"malformed format string - %"+b.charAt(F))}o===void 0&&T.$raise(W("ArgumentError"),"malformed format string - %"),B+=b.slice(m,z)+o,m=F+1}return Z.DEBUG&&r>=0&&t<G.length&&T.$raise(W("ArgumentError"),"too many arguments for format string"),B+b.slice(m)},-2),U(ee,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(e){var x=e.klass,q=e.rb_plus,j=e.truthy,S=e.send,re=e.defs,J=e.eqeq,T=e.def,Z=e.return_ivar,g=e.return_val,U=e.slice,$e=e.Kernel,W=e.Opal,H=e.rb_lt,ee,C=e.top,b=[],y=e.$r(b),L=e.nil,G=e.$$$;return e.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),C.$require("corelib/string"),function(A,B,m){var z=x(A,B,"Encoding"),F=[z].concat(m),k=z.$$prototype;return k.name=k.dummy=L,re(z,"$register",function E(o,d){var I=E.$$p||L,h=this,l=L,c=L,X=L,w=L,i=L,a=L;return E.$$p=null,d==null&&(d=new Map),l=q([o],j(c=d["$[]"]("aliases"))?c:[]),X=j(c=d["$[]"]("ascii"))&&c,w=j(c=d["$[]"]("dummy"))&&c,j(d["$[]"]("inherits"))?(i=d["$[]"]("inherits").$clone(),i.$initialize(o,l,X,w)):i=h.$new(o,l,X,w),I!==L&&S(i,"instance_eval",[],I.$to_proc()),a=e.encodings,S(l,"each",[],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=L),t.$const_set(n.$tr("-","_"),i),a[n]=i},{$$s:h})},-2),re(z,"$find",function(o){var d=this;return J(o,"default_external")?d.$default_external():e.find_encoding(o)}),z.$singleton_class().$attr_accessor("default_external"),z.$attr_reader("name","names"),T(z,"$initialize",function(o,d,I,h){var l=this;return l.name=o,l.names=d,l.ascii=I,l.dummy=h}),T(z,"$ascii_compatible?",Z("ascii")),T(z,"$dummy?",Z("dummy")),T(z,"$binary?",g(!1)),T(z,"$to_s",Z("name")),T(z,"$inspect",function(){var o=this;return"#<Encoding:"+o.name+(j(o.dummy)?" (dummy)":L)+">"}),T(z,"$charsize",function(o){for(var d=0,I=0,h=o.length;I<h;I++){var l=o.charCodeAt(I);l>=55296&&l<=56319||d++}return d}),T(z,"$each_char",function E(o){var d=E.$$p||L;E.$$p=null;for(var I="",h=0,l=o.length;h<l;h++){var c=o.charCodeAt(h),X=o.charAt(h);if(c>=56320&&c<=57343){I=X;continue}else c>=55296&&c<=56319&&(X=I+X);o.encoding.name!="UTF-8"&&(X=new String(X),X.encoding=o.encoding),e.yield1(d,X)}}),T(z,"$each_byte",function(o){return U(arguments),$e.$raise(G("NotImplementedError"))},-1),T(z,"$bytesize",function(o){return U(arguments),$e.$raise(G("NotImplementedError"))},-1),x("::",G("StandardError"),"EncodingError"),x("::",G("EncodingError"),"CompatibilityError"),x(F[0],G("EncodingError"),"UndefinedConversionError"),L}("::",null,b),S(G("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function A(){var B=A.$$s==null?this:A.$$s;return T(B,"$each_byte",function m(z){var F=m.$$p||L;m.$$p=null;for(var k=1/0,E,o=z.length,d=null,I=0;I<o;++I){if(E=z.charCodeAt(I),E>55295&&E<57344){if(!d){if(E>56319){(k-=3)>-1&&(e.yield1(F,239),e.yield1(F,191),e.yield1(F,189));continue}else if(I+1===o){(k-=3)>-1&&(e.yield1(F,239),e.yield1(F,191),e.yield1(F,189));continue}d=E;continue}if(E<56320){(k-=3)>-1&&(e.yield1(F,239),e.yield1(F,191),e.yield1(F,189)),d=E;continue}E=(d-55296<<10|E-56320)+65536}else d&&(k-=3)>-1&&(e.yield1(F,239),e.yield1(F,191),e.yield1(F,189));if(d=null,E<128){if((k-=1)<0)break;e.yield1(F,E)}else if(E<2048){if((k-=2)<0)break;e.yield1(F,E>>6|192),e.yield1(F,E&63|128)}else if(E<65536){if((k-=3)<0)break;e.yield1(F,E>>12|224),e.yield1(F,E>>6&63|128),e.yield1(F,E&63|128)}else if(E<1114112){if((k-=4)<0)break;e.yield1(F,E>>18|240),e.yield1(F,E>>12&63|128),e.yield1(F,E>>6&63|128),e.yield1(F,E&63|128)}}}),T(B,"$bytesize",function(z){return z.$bytes().$length()})},{$$s:C}),S(G("Encoding"),"register",["UTF-16LE"],function A(){var B=A.$$s==null?this:A.$$s;return T(B,"$each_byte",function m(z){var F=m.$$p||L;m.$$p=null;for(var k=0,E=z.length;k<E;k++){var o=z.charCodeAt(k);e.yield1(F,o&255),e.yield1(F,o>>8)}}),T(B,"$bytesize",function(z){return z.length*2})},{$$s:C}),S(G("Encoding"),"register",["UTF-16BE",new Map([["inherits",G(G("Encoding"),"UTF_16LE")]])],function A(){var B=A.$$s==null?this:A.$$s;return T(B,"$each_byte",function m(z){var F=m.$$p||L;m.$$p=null;for(var k=0,E=z.length;k<E;k++){var o=z.charCodeAt(k);e.yield1(F,o>>8),e.yield1(F,o&255)}})},{$$s:C}),S(G("Encoding"),"register",["UTF-32LE"],function A(){var B=A.$$s==null?this:A.$$s;return T(B,"$each_byte",function m(z){var F=m.$$p||L;m.$$p=null;for(var k=0,E=z.length;k<E;k++){var o=z.charCodeAt(k);e.yield1(F,o&255),e.yield1(F,o>>8),e.yield1(F,0),e.yield1(F,0)}}),T(B,"$bytesize",function(z){return z.length*4})},{$$s:C}),S(G("Encoding"),"register",["UTF-32BE",new Map([["inherits",G(G("Encoding"),"UTF_32LE")]])],function A(){var B=A.$$s==null?this:A.$$s;return T(B,"$each_byte",function m(z){var F=m.$$p||L;m.$$p=null;for(var k=0,E=z.length;k<E;k++){var o=z.charCodeAt(k);e.yield1(F,0),e.yield1(F,0),e.yield1(F,o>>8),e.yield1(F,o&255)}})},{$$s:C}),S(G("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function A(){var B=A.$$s==null?this:A.$$s;return T(B,"$each_char",function m(z){var F=m.$$p||L;m.$$p=null;for(var k=0,E=z.length;k<E;k++){var o=new String(z.charAt(k));o.encoding=z.encoding,e.yield1(F,o)}}),T(B,"$charsize",function(z){return z.length}),T(B,"$each_byte",function m(z){var F=m.$$p||L;m.$$p=null;for(var k=0,E=z.length;k<E;k++){var o=z.charCodeAt(k);e.yield1(F,o&255)}}),T(B,"$bytesize",function(z){return z.length}),T(B,"$binary?",g(!0))},{$$s:C}),G("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",G(G("Encoding"),"ASCII_8BIT")]])),G("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",G(G("Encoding"),"ASCII_8BIT")]])),function(A,B){var m=x(A,B,"String"),z=m.$$prototype;return z.internal_encoding=z.bytes=z.encoding=L,m.$attr_reader("encoding"),m.$attr_reader("internal_encoding"),e.prop(String.prototype,"bytes",L),e.prop(String.prototype,"encoding",G(G("Encoding"),"UTF_8")),e.prop(String.prototype,"internal_encoding",G(G("Encoding"),"UTF_8")),T(m,"$b",function(){var k=this;return k.$dup().$force_encoding("binary")}),T(m,"$bytesize",function(){var k=this;return k.internal_encoding.$bytesize(k)}),T(m,"$each_byte",function F(){var k=F.$$p||L,E=this;return F.$$p=null,k===L?S(E,"enum_for",["each_byte"],function o(){var d=o.$$s==null?this:o.$$s;return d.$bytesize()},{$$s:E}):(S(E.internal_encoding,"each_byte",[E],k.$to_proc()),E)}),T(m,"$bytes",function(){var k=this,E=L;return typeof k=="string"?new String(k).$each_byte().$to_a():(k.bytes=j(E=k.bytes)?E:k.$each_byte().$to_a(),k.bytes.$dup())}),T(m,"$each_char",function F(){var k=F.$$p||L,E=this;return F.$$p=null,k===L?S(E,"enum_for",["each_char"],function o(){var d=o.$$s==null?this:o.$$s;return d.$length()},{$$s:E}):(S(E.encoding,"each_char",[E],k.$to_proc()),E)}),T(m,"$chars",function F(){var k=F.$$p||L,E=this;return F.$$p=null,j(k)?S(E,"each_char",[],k.$to_proc()):E.$each_char().$to_a()}),T(m,"$each_codepoint",function F(){var k=F.$$p||L,E=this;if(F.$$p=null,k===L)return E.$enum_for("each_codepoint");for(var o=0,d=E.length;o<d;o++)e.yield1(k,E.codePointAt(o));return E}),T(m,"$codepoints",function F(){var k=F.$$p||L,E=this;return F.$$p=null,k!==L?S(E,"each_codepoint",[],k.$to_proc()):E.$each_codepoint().$to_a()}),T(m,"$encode",function(k){var E=this;return e.enc(E,k)}),T(m,"$force_encoding",function(k){var E=this,o=E;return k===o.encoding||(k=W["$coerce_to!"](k,G("String"),"to_s"),k=G("Encoding").$find(k),k===o.encoding)||(o=e.set_encoding(o,k)),o}),T(m,"$getbyte",function(k){var E=this,o=L;return o=E.$bytes(),k=W["$coerce_to!"](k,G("Integer"),"to_int"),j(H(o.$length(),k))?L:o["$[]"](k)}),T(m,"$initialize_copy",function(k){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),T(m,"$valid_encoding?",g(!0))}("::",null),ee=[G(y("Encoding"),"UTF_8")],S(G("Encoding"),"default_external=",ee),ee[ee.length-1]};Opal.modules["corelib/math"]=function(e){var x=e.type_error,q=e.module,j=e.const_set,S=e.Class,re=e.slice,J=e.Kernel,T=e.defs,Z=e.truthy,g=e.send,U=e.def,$e=e.rb_minus,W=e.eqeqeq,H=e.rb_divide,ee=[],C=e.nil,b=e.$$$;return e.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(y,L){var G=q(y,"Math"),A=[G].concat(L),B=e.$r(A);return j(G,"E",Math.E),j(G,"PI",Math.PI),j(G,"DomainError",S.$new(b("StandardError"))),T(G,"$checked",function(z,F){var k,E;if(k=re(arguments,1),E=k,isNaN(E[0])||E.length==2&&isNaN(E[1]))return NaN;var o=Math[z].apply(null,E);return isNaN(o)&&J.$raise(B("DomainError"),'Numerical argument is out of domain - "'+z+'"'),o},-2),T(G,"$float!",function(z){try{return J.$Float(z)}catch(F){if(e.rescue(F,[b("ArgumentError")]))try{return J.$raise(x(z,b("Float")))}finally{e.pop_exception(F)}else throw F}}),T(G,"$integer!",function(z){try{return J.$Integer(z)}catch(F){if(e.rescue(F,[b("ArgumentError")]))try{return J.$raise(x(z,b("Integer")))}finally{e.pop_exception(F)}else throw F}}),G.$module_function(),Z(typeof Math.erf<"u")||e.prop(Math,"erf",function(m){var z=.254829592,F=-.284496736,k=1.421413741,E=-1.453152027,o=1.061405429,d=.3275911,I=1;m<0&&(I=-1),m=Math.abs(m);var h=1/(1+d*m),l=1-((((o*h+E)*h+k)*h+F)*h+z)*h*Math.exp(-m*m);return I*l}),Z(typeof Math.erfc<"u")||e.prop(Math,"erfc",function(m){var z=Math.abs(m),F=1/(.5*z+1),k=F*.17087277+-.82215223,E=F*k+1.48851587,o=F*E+-1.13520398,d=F*o+.27886807,I=F*d+-.18628806,h=F*I+.09678418,l=F*h+.37409196,c=F*l+1.00002368,X=F*c,w=-z*z-1.26551223+X,i=F*Math.exp(w);return m<0?2-i:i}),g(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function m(z){var F=m.$$s==null?this:m.$$s;return z==null&&(z=C),g(F,"define_method",[z],function(E){return E==null&&(E=C),b("Math").$checked(z,b("Math")["$float!"](E))})},{$$s:G}),U(G,"$atan2",function(z,F){return b("Math").$checked("atan2",b("Math")["$float!"](z),b("Math")["$float!"](F))}),U(G,"$hypot",function(z,F){return b("Math").$checked("hypot",b("Math")["$float!"](z),b("Math")["$float!"](F))}),U(G,"$frexp",function(z){if(z=B("Math")["$float!"](z),isNaN(z))return[NaN,0];var F=Math.floor(Math.log(Math.abs(z))/Math.log(2))+1,k=z/Math.pow(2,F);return[k,F]}),U(G,"$gamma",function(z){z=B("Math")["$float!"](z);var F,k,E,o,d,I,h,l,c,X=4.7421875,w=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(z))return NaN;if(z===0&&1/z<0)return-1/0;if((z===-1||z===-1/0)&&J.$raise(B("DomainError"),'Numerical argument is out of domain - "gamma"'),B("Integer")["$==="](z)){if(z<=0)return isFinite(z)?1/0:NaN;if(z>171)return 1/0;for(o=z-2,d=z-1;o>1;)d*=o,o--;return d==0&&(d=1),d}if(z<.5)return Math.PI/(Math.sin(Math.PI*z)*b("Math").$gamma($e(1,z)));if(z>=171.35)return 1/0;if(z>85)return I=z*z,h=I*z,l=h*z,c=l*z,Math.sqrt(2*Math.PI/z)*Math.pow(z/Math.E,z)*(1+1/(12*z)+1/(288*I)-139/(51840*h)-571/(2488320*l)+163879/(209018880*c)+5246819/(75246796800*c*z));for(z-=1,E=w[0],F=1;F<w.length;++F)E+=w[F]/(z+F);return k=z+X+.5,Math.sqrt(2*Math.PI)*Math.pow(k,z+.5)*Math.exp(-k)*E}),U(G,"$ldexp",function(z,F){return z=B("Math")["$float!"](z),F=B("Math")["$integer!"](F),isNaN(F)&&J.$raise(b("RangeError"),"float NaN out of range of integer"),z*Math.pow(2,F)}),U(G,"$lgamma",function(z){return z==-1?[1/0,1]:[Math.log(Math.abs(b("Math").$gamma(z))),b("Math").$gamma(z)<0?-1:1]}),U(G,"$log",function(z,F){return W(b("String"),z)&&J.$raise(x(z,b("Float"))),Z(F==null)?b("Math").$checked("log",b("Math")["$float!"](z)):(W(b("String"),F)&&J.$raise(x(F,b("Float"))),H(b("Math").$checked("log",b("Math")["$float!"](z)),b("Math").$checked("log",b("Math")["$float!"](F))))},-2),U(G,"$log10",function(z){return W(b("String"),z)&&J.$raise(x(z,b("Float"))),b("Math").$checked("log10",b("Math")["$float!"](z))}),U(G,"$log2",function(z){return W(b("String"),z)&&J.$raise(x(z,b("Float"))),b("Math").$checked("log2",b("Math")["$float!"](z))}),U(G,"$tan",function(z){return z=b("Math")["$float!"](z),Z(z["$infinite?"]())?b(b("Float"),"NAN"):b("Math").$checked("tan",b("Math")["$float!"](z))})}("::",ee)};Opal.modules["corelib/complex/base"]=function(e){var x=e.module,q=e.truthy,j=e.def,S=e.klass,re=[],J=e.nil;return e.add_stubs("new,from_string"),function(T,Z){var g=x(T,"Kernel"),U=[g].concat(Z),$e=e.$r(U);return j(g,"$Complex",function(H,ee){return ee==null&&(ee=J),q(ee)?$e("Complex").$new(H,ee):$e("Complex").$new(H,0)},-2)}("::",re),function(T,Z,g){var U=S(T,Z,"String"),$e=[U].concat(g),W=e.$r($e);return j(U,"$to_c",function(){var ee=this;return W("Complex").$from_string(ee)})}("::",null,re)};Opal.modules["corelib/complex"]=function(e){var x=e.klass,q=e.truthy,j=e.eqeqeq,S=e.Kernel,re=e.defs,J=e.rb_times,T=e.def,Z=e.rb_plus,g=e.rb_minus,U=e.rb_divide,$e=e.eqeq,W=e.to_ary,H=e.rb_gt,ee=e.neqeq,C=e.return_val,b=e.const_set,y=e.alias,L=e.top,G=[],A=e.nil,B=e.$$$;return e.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),L.$require("corelib/numeric"),L.$require("corelib/complex/base"),function(m,z,F){var k=x(m,z,"Complex"),E=[k].concat(F),o=e.$r(E),d=k.$$prototype;return d.real=d.imag=A,re(k,"$rect",function(h,l){var c=this;return l==null&&(l=0),j(B("Numeric"),h)&&q(h["$real?"]())&&j(B("Numeric"),l)&&q(l["$real?"]())||S.$raise(B("TypeError"),"not a real"),c.$new(h,l)},-2),re(k,"$polar",function(h,l){var c=this;return l==null&&(l=0),j(B("Numeric"),h)&&q(h["$real?"]())&&j(B("Numeric"),l)&&q(l["$real?"]())||S.$raise(B("TypeError"),"not a real"),c.$new(J(h,B("Math").$cos(l)),J(h,B("Math").$sin(l)))},-2),k.$attr_reader("real","imag"),T(k,"$initialize",function(h,l){var c=this;return l==null&&(l=0),c.real=h,c.imag=l,c.$freeze()},-2),T(k,"$coerce",function(h){var l=this;return j(B("Complex"),h)?[h,l]:j(B("Numeric"),h)&&q(h["$real?"]())?[B("Complex").$new(h,0),l]:S.$raise(B("TypeError"),""+h.$class()+" can't be coerced into Complex")}),T(k,"$==",function(h){var l=this,c=A;return j(B("Complex"),h)?q(c=l.real["$=="](h.$real()))?l.imag["$=="](h.$imag()):c:j(B("Numeric"),h)&&q(h["$real?"]())?q(c=l.real["$=="](h))?l.imag["$=="](0):c:h["$=="](l)}),T(k,"$-@",function(){var h=this;return S.$Complex(h.real["$-@"](),h.imag["$-@"]())}),T(k,"$+",function(h){var l=this;return j(B("Complex"),h)?S.$Complex(Z(l.real,h.$real()),Z(l.imag,h.$imag())):j(B("Numeric"),h)&&q(h["$real?"]())?S.$Complex(Z(l.real,h),l.imag):l.$__coerced__("+",h)}),T(k,"$-",function(h){var l=this;return j(B("Complex"),h)?S.$Complex(g(l.real,h.$real()),g(l.imag,h.$imag())):j(B("Numeric"),h)&&q(h["$real?"]())?S.$Complex(g(l.real,h),l.imag):l.$__coerced__("-",h)}),T(k,"$*",function(h){var l=this;return j(B("Complex"),h)?S.$Complex(g(J(l.real,h.$real()),J(l.imag,h.$imag())),Z(J(l.real,h.$imag()),J(l.imag,h.$real()))):j(B("Numeric"),h)&&q(h["$real?"]())?S.$Complex(J(l.real,h),J(l.imag,h)):l.$__coerced__("*",h)}),T(k,"$/",function(h){var l=this;return j(B("Complex"),h)?j(B("Number"),l.real)&&q(l.real["$nan?"]())||j(B("Number"),l.imag)&&q(l.imag["$nan?"]())||j(B("Number"),h.$real())&&q(h.$real()["$nan?"]())||j(B("Number"),h.$imag())&&q(h.$imag()["$nan?"]())?B("Complex").$new(B(B("Float"),"NAN"),B(B("Float"),"NAN")):U(J(l,h.$conj()),h.$abs2()):j(B("Numeric"),h)&&q(h["$real?"]())?S.$Complex(l.real.$quo(h),l.imag.$quo(h)):l.$__coerced__("/",h)}),T(k,"$**",function(h){var l,c,X=this,w=A,i=A,a=A,$=A,n=A,t=A,r=A,s=A,u=A,f=A,p=A;if($e(h,0))return B("Complex").$new(1,0);if(j(B("Complex"),h))return c=X.$polar(),l=W(c),w=l[0]==null?A:l[0],i=l[1]==null?A:l[1],a=h.$real(),$=h.$imag(),n=B("Math").$exp(g(J(a,B("Math").$log(w)),J($,i))),t=Z(J(i,a),J($,B("Math").$log(w))),B("Complex").$polar(n,t);if(j(B("Integer"),h))if(q(H(h,0))){for(r=X,s=r,u=g(h,1);ee(u,0);){for(c=u.$divmod(2),l=W(c),f=l[0]==null?A:l[0],p=l[1]==null?A:l[1];$e(p,0);)r=S.$Complex(g(J(r.$real(),r.$real()),J(r.$imag(),r.$imag())),J(J(2,r.$real()),r.$imag())),u=f,c=u.$divmod(2),l=W(c),f=l[0]==null?A:l[0],p=l[1]==null?A:l[1];s=J(s,r),u=g(u,1)}return s}else return U(B("Rational").$new(1,1),X)["$**"](h["$-@"]());else return j(B("Float"),h)||j(B("Rational"),h)?(c=X.$polar(),l=W(c),w=l[0]==null?A:l[0],i=l[1]==null?A:l[1],B("Complex").$polar(w["$**"](h),J(i,h))):X.$__coerced__("**",h)}),T(k,"$abs",function(){var h=this;return B("Math").$hypot(h.real,h.imag)}),T(k,"$abs2",function(){var h=this;return Z(J(h.real,h.real),J(h.imag,h.imag))}),T(k,"$angle",function(){var h=this;return B("Math").$atan2(h.imag,h.real)}),T(k,"$conj",function(){var h=this;return S.$Complex(h.real,h.imag["$-@"]())}),T(k,"$denominator",function(){var h=this;return h.real.$denominator().$lcm(h.imag.$denominator())}),T(k,"$eql?",function(h){var l=this,c=A,X=A;return q(c=q(X=o("Complex")["$==="](h))?l.real.$class()["$=="](l.imag.$class()):X)?l["$=="](h):c}),T(k,"$fdiv",function(h){var l=this;return j(B("Numeric"),h)||S.$raise(B("TypeError"),""+h.$class()+" can't be coerced into Complex"),U(l,h)}),T(k,"$finite?",function(){var h=this,l=A;return q(l=h.real["$finite?"]())?h.imag["$finite?"]():l}),T(k,"$hash",function(){var h=this;return[B("Complex"),h.real,h.imag].$hash()}),T(k,"$infinite?",function(){var h=this,l=A;return q(l=h.real["$infinite?"]())?l:h.imag["$infinite?"]()}),T(k,"$inspect",function(){var h=this;return"("+h+")"}),T(k,"$numerator",function(){var h=this,l=A;return l=h.$denominator(),S.$Complex(J(h.real.$numerator(),U(l,h.real.$denominator())),J(h.imag.$numerator(),U(l,h.imag.$denominator())))}),T(k,"$polar",function(){var h=this;return[h.$abs(),h.$arg()]}),T(k,"$rationalize",function(h){var l=this;return arguments.length>1&&S.$raise(B("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),ee(l.imag,0)&&S.$raise(B("RangeError"),"can't convert "+l+" into Rational"),l.$real().$rationalize(h)},-1),T(k,"$real?",C(!1)),T(k,"$rect",function(){var h=this;return[h.real,h.imag]}),T(k,"$to_f",function(){var h=this;return $e(h.imag,0)||S.$raise(B("RangeError"),"can't convert "+h+" into Float"),h.real.$to_f()}),T(k,"$to_i",function(){var h=this;return $e(h.imag,0)||S.$raise(B("RangeError"),"can't convert "+h+" into Integer"),h.real.$to_i()}),T(k,"$to_r",function(){var h=this;return $e(h.imag,0)||S.$raise(B("RangeError"),"can't convert "+h+" into Rational"),h.real.$to_r()}),T(k,"$to_s",function(){var h=this,l=A;return l=h.real.$inspect(),l=Z(l,j(B("Number"),h.imag)&&q(h.imag["$nan?"]())||q(h.imag["$positive?"]())||q(h.imag["$zero?"]())?"+":"-"),l=Z(l,h.imag.$abs().$inspect()),j(B("Number"),h.imag)&&(q(h.imag["$nan?"]())||q(h.imag["$infinite?"]()))&&(l=Z(l,"*")),Z(l,"i")}),b(E[0],"I",k.$new(0,1)),re(k,"$from_string",function(h){var l=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;h.match(l);var c,X;function w(){return l.test(h)}function i(){var $=h.match(l),n=$[0];return h=h.slice(n.length),n.replace(/_/g,"")}function a(){if(w()){var $=parseFloat(i());if(h[0]==="/")if(h=h.slice(1),w()){var n=parseFloat(i());return S.$Rational($,n)}else return h="/"+h,$;else return $}else return null}return c=a(),c?(X=a(),X?S.$Complex(c,X):h[0]==="i"?S.$Complex(0,c):S.$Complex(c,0)):h[0]==="i"?S.$Complex(0,1):h[0]==="-"&&h[1]==="i"?S.$Complex(0,-1):h[0]==="+"&&h[1]==="i"?S.$Complex(0,1):S.$Complex(0,0)}),function(I,h){return y(I,"rectangular","rect")}(e.get_singleton_class(k)),y(k,"arg","angle"),y(k,"conjugate","conj"),y(k,"divide","/"),y(k,"imaginary","imag"),y(k,"magnitude","abs"),y(k,"phase","arg"),y(k,"quo","/"),y(k,"rectangular","rect"),e.udef(k,"$negative?"),e.udef(k,"$positive?"),e.udef(k,"$step"),A}("::",B("Numeric"),G)};Opal.modules["corelib/rational/base"]=function(e){var x=e.module,q=e.def,j=e.klass;e.nil;var S=e.$$$;return e.add_stubs("convert,from_string"),function(re){var J=x(re,"Kernel");return q(J,"$Rational",function(Z,g){return g==null&&(g=1),S("Rational").$convert(Z,g)},-2)}("::"),function(re,J){var T=j(re,J,"String");return q(T,"$to_r",function(){var g=this;return S("Rational").$from_string(g)})}("::",null)};Opal.modules["corelib/rational"]=function(e){var x=e.klass,q=e.eqeq,j=e.Kernel,S=e.truthy,re=e.rb_lt,J=e.rb_divide,T=e.defs,Z=e.eqeqeq,g=e.not,U=e.Opal,$e=e.def,W=e.return_ivar,H=e.rb_minus,ee=e.rb_times,C=e.rb_plus,b=e.rb_gt,y=e.rb_le,L=e.return_self,G=e.alias,A=e.top,B=e.nil,m=e.$$$;return e.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),A.$require("corelib/numeric"),A.$require("corelib/rational/base"),function(z,F){var k=x(z,F,"Rational"),E=k.$$prototype;return E.num=E.den=B,T(k,"$reduce",function(d,I){var h=this,l=B;if(d=d.$to_i(),I=I.$to_i(),q(I,0))j.$raise(m("ZeroDivisionError"),"divided by 0");else if(S(re(I,0)))d=d["$-@"](),I=I["$-@"]();else if(q(I,1))return h.$new(d,I);return l=d.$gcd(I),h.$new(J(d,l),J(I,l))}),T(k,"$convert",function(d,I){var h=this;return(S(d["$nil?"]())||S(I["$nil?"]()))&&j.$raise(m("TypeError"),"cannot convert nil into Rational"),Z(m("Integer"),d)&&Z(m("Integer"),I)?h.$reduce(d,I):((Z(m("Float"),d)||Z(m("String"),d)||Z(m("Complex"),d))&&(d=d.$to_r()),(Z(m("Float"),I)||Z(m("String"),I)||Z(m("Complex"),I))&&(I=I.$to_r()),S(I["$equal?"](1))&&g(m("Integer")["$==="](d))?U["$coerce_to!"](d,m("Rational"),"to_r"):Z(m("Numeric"),d)&&Z(m("Numeric"),I)?J(d,I):h.$reduce(d,I))}),$e(k,"$initialize",function(d,I){var h=this;return h.num=d,h.den=I,h.$freeze()}),$e(k,"$numerator",W("num")),$e(k,"$denominator",W("den")),$e(k,"$coerce",function(d){var I=this,h=B;return Z(m("Rational"),h=d)?[d,I]:Z(m("Integer"),h)?[d.$to_r(),I]:Z(m("Float"),h)?[d,I.$to_f()]:B}),$e(k,"$==",function(d){var I=this,h=B,l=B;return Z(m("Rational"),h=d)?S(l=I.num["$=="](d.$numerator()))?I.den["$=="](d.$denominator()):l:Z(m("Integer"),h)?S(l=I.num["$=="](d))?I.den["$=="](1):l:Z(m("Float"),h)?I.$to_f()["$=="](d):d["$=="](I)}),$e(k,"$<=>",function(d){var I=this,h=B;return Z(m("Rational"),h=d)?H(ee(I.num,d.$denominator()),ee(I.den,d.$numerator()))["$<=>"](0):Z(m("Integer"),h)?H(I.num,ee(I.den,d))["$<=>"](0):Z(m("Float"),h)?I.$to_f()["$<=>"](d):I.$__coerced__("<=>",d)}),$e(k,"$+",function(d){var I=this,h=B,l=B,c=B;return Z(m("Rational"),h=d)?(l=C(ee(I.num,d.$denominator()),ee(I.den,d.$numerator())),c=ee(I.den,d.$denominator()),j.$Rational(l,c)):Z(m("Integer"),h)?j.$Rational(C(I.num,ee(d,I.den)),I.den):Z(m("Float"),h)?C(I.$to_f(),d):I.$__coerced__("+",d)}),$e(k,"$-",function(d){var I=this,h=B,l=B,c=B;return Z(m("Rational"),h=d)?(l=H(ee(I.num,d.$denominator()),ee(I.den,d.$numerator())),c=ee(I.den,d.$denominator()),j.$Rational(l,c)):Z(m("Integer"),h)?j.$Rational(H(I.num,ee(d,I.den)),I.den):Z(m("Float"),h)?H(I.$to_f(),d):I.$__coerced__("-",d)}),$e(k,"$*",function(d){var I=this,h=B,l=B,c=B;return Z(m("Rational"),h=d)?(l=ee(I.num,d.$numerator()),c=ee(I.den,d.$denominator()),j.$Rational(l,c)):Z(m("Integer"),h)?j.$Rational(ee(I.num,d),I.den):Z(m("Float"),h)?ee(I.$to_f(),d):I.$__coerced__("*",d)}),$e(k,"$/",function(d){var I=this,h=B,l=B,c=B;return Z(m("Rational"),h=d)?(l=ee(I.num,d.$denominator()),c=ee(I.den,d.$numerator()),j.$Rational(l,c)):Z(m("Integer"),h)?q(d,0)?J(I.$to_f(),0):j.$Rational(I.num,ee(I.den,d)):Z(m("Float"),h)?J(I.$to_f(),d):I.$__coerced__("/",d)}),$e(k,"$**",function(d){var I=this,h=B;return Z(m("Integer"),h=d)?q(I,0)&&S(re(d,0))?m(m("Float"),"INFINITY"):S(b(d,0))?j.$Rational(I.num["$**"](d),I.den["$**"](d)):S(re(d,0))?j.$Rational(I.den["$**"](d["$-@"]()),I.num["$**"](d["$-@"]())):j.$Rational(1,1):Z(m("Float"),h)?I.$to_f()["$**"](d):Z(m("Rational"),h)?q(d,0)?j.$Rational(1,1):q(d.$denominator(),1)?S(re(d,0))?j.$Rational(I.den["$**"](d.$numerator().$abs()),I.num["$**"](d.$numerator().$abs())):j.$Rational(I.num["$**"](d.$numerator()),I.den["$**"](d.$numerator())):q(I,0)&&S(re(d,0))?j.$raise(m("ZeroDivisionError"),"divided by 0"):I.$to_f()["$**"](d):I.$__coerced__("**",d)}),$e(k,"$abs",function(){var d=this;return j.$Rational(d.num.$abs(),d.den.$abs())}),$e(k,"$ceil",function(d){var I=this;return d==null&&(d=0),q(d,0)?J(I.num["$-@"](),I.den)["$-@"]().$ceil():I.$with_precision("ceil",d)},-1),$e(k,"$floor",function(d){var I=this;return d==null&&(d=0),q(d,0)?J(I.num["$-@"](),I.den)["$-@"]().$floor():I.$with_precision("floor",d)},-1),$e(k,"$hash",function(){var d=this;return[m("Rational"),d.num,d.den].$hash()}),$e(k,"$inspect",function(){var d=this;return"("+d+")"}),$e(k,"$rationalize",function(d){var I=this;if(arguments.length>1&&j.$raise(m("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),d==null)return I;for(var h=d.$abs(),l=H(I,h),c=C(I,h),X=0,w=1,i=1,a=0,$,n,t,r,s;t=l.$ceil(),!y(t,c);)r=t-1,$=r*w+X,n=r*a+i,s=J(1,H(c,r)),c=J(1,H(l,r)),l=s,X=w,i=a,w=$,a=n;return j.$Rational(t*w+X,t*a+i)},-1),$e(k,"$round",function(d){var I=this,h=B,l=B,c=B;return d==null&&(d=0),q(d,0)?q(I.num,0)?0:q(I.den,1)?I.num:(h=C(ee(I.num.$abs(),2),I.den),l=ee(I.den,2),c=J(h,l).$truncate(),S(re(I.num,0))?c["$-@"]():c):I.$with_precision("round",d)},-1),$e(k,"$to_f",function(){var d=this;return J(d.num,d.den)}),$e(k,"$to_i",function(){var d=this;return d.$truncate()}),$e(k,"$to_r",L),$e(k,"$to_s",function(){var d=this;return""+d.num+"/"+d.den}),$e(k,"$truncate",function(d){var I=this;return d==null&&(d=0),q(d,0)?S(re(I.num,0))?I.$ceil():I.$floor():I.$with_precision("truncate",d)},-1),$e(k,"$with_precision",function(d,I){var h=this,l=B,c=B;return Z(m("Integer"),I)||j.$raise(m("TypeError"),"not an Integer"),l=10["$**"](I),c=ee(h,l),S(re(I,1))?J(c.$send(d),l).$to_i():j.$Rational(c.$send(d),l)}),T(k,"$from_string",function(d){var I=d.trimLeft(),h=/^[+-]?[\d_]+(\.[\d_]+)?/;I.match(h);var l,c;function X(){return h.test(I)}function w(){var i=I.match(h),a=i[0];return I=I.slice(a.length),a.replace(/_/g,"")}return X()?(l=parseFloat(w()),I[0]==="/"?(I=I.slice(1),X()?(c=parseFloat(w()),j.$Rational(l,c)):j.$Rational(l,1)):j.$Rational(l,1)):j.$Rational(0,1)}),G(k,"divide","/"),G(k,"quo","/")}("::",m("Numeric"))};Opal.modules["corelib/time"]=function(e){var x=e.slice,q=e.deny_frozen_access,j=e.klass,S=e.Kernel,re=e.Opal,J=e.defs,T=e.eqeqeq,Z=e.def,g=e.truthy,U=e.rb_gt,$e=e.rb_lt,W=e.send,H=e.rb_plus,ee=e.rb_divide,C=e.rb_minus,b=e.range,y=e.neqeq,L=e.rb_le,G=e.eqeq,A=e.alias,B=e.top,m=[],z=e.nil,F=e.$$$;return e.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),B.$require("corelib/comparable"),function(k,E,o){var d=j(k,E,"Time"),I=[d].concat(o),h=e.$r(I);d.$include(F("Comparable"));var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],X=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],w=["January","February","March","April","May","June","July","August","September","October","November","December"];J(d,"$at",function($,n){var t;return F("Time")["$==="]($)?(n!==void 0&&S.$raise(F("TypeError"),"can't convert Time into an exact number"),t=new Date($.getTime()),t.timezone=$.timezone,t):($.$$is_number||($=re["$coerce_to!"]($,F("Integer"),"to_int")),n===void 0?new Date($*1e3):(n.$$is_number||(n=re["$coerce_to!"](n,F("Integer"),"to_int")),new Date($*1e3+n/1e3)))},-2);function i(a,$,n,t,r,s){if(a.$$is_string?a=parseInt(a,10):a=re["$coerce_to!"](a,F("Integer"),"to_int"),$===z)$=1;else if(!$.$$is_number)if($["$respond_to?"]("to_str"))switch($=$.$to_str(),$.toLowerCase()){case"jan":$=1;break;case"feb":$=2;break;case"mar":$=3;break;case"apr":$=4;break;case"may":$=5;break;case"jun":$=6;break;case"jul":$=7;break;case"aug":$=8;break;case"sep":$=9;break;case"oct":$=10;break;case"nov":$=11;break;case"dec":$=12;break;default:$=$.$to_i()}else $=re["$coerce_to!"]($,F("Integer"),"to_int");return($<1||$>12)&&S.$raise(F("ArgumentError"),"month out of range: "+$),$=$-1,n===z?n=1:n.$$is_string?n=parseInt(n,10):n=re["$coerce_to!"](n,F("Integer"),"to_int"),(n<1||n>31)&&S.$raise(F("ArgumentError"),"day out of range: "+n),t===z?t=0:t.$$is_string?t=parseInt(t,10):t=re["$coerce_to!"](t,F("Integer"),"to_int"),(t<0||t>24)&&S.$raise(F("ArgumentError"),"hour out of range: "+t),r===z?r=0:r.$$is_string?r=parseInt(r,10):r=re["$coerce_to!"](r,F("Integer"),"to_int"),(r<0||r>59)&&S.$raise(F("ArgumentError"),"min out of range: "+r),s===z?s=0:s.$$is_number||(s.$$is_string?s=parseInt(s,10):s=re["$coerce_to!"](s,F("Integer"),"to_int")),(s<0||s>60)&&S.$raise(F("ArgumentError"),"sec out of range: "+s),[a,$,n,t,r,s]}return J(d,"$new",function($,n,t,r,s,u,f){var p=this;n==null&&(n=z),t==null&&(t=z),r==null&&(r=z),s==null&&(s=z),u==null&&(u=z),f==null&&(f=z);var M,D,R,V;return $===void 0?new Date:(M=i($,n,t,r,s,u),$=M[0],n=M[1],t=M[2],r=M[3],s=M[4],u=M[5],f===z?(D=new Date($,n,t,r,s,0,u*1e3),$<100&&D.setFullYear($),D):(R=p.$_parse_offset(f),V=new Date(Date.UTC($,n,t,r,s,0,u*1e3)),$<100&&V.setUTCFullYear($),D=new Date(V.getTime()-R*36e5),D.timezone=R,D))},-1),J(d,"$_parse_offset",function($){var n;if($.$$is_string)if($=="UTC")n=0;else if(/^[+-]\d\d:[0-5]\d$/.test($)){var t,r,s;t=$[0],r=+($[1]+$[2]),s=+($[4]+$[5]),n=(t=="-"?-1:1)*(r+s/60)}else S.$raise(F("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+$);else $.$$is_number?n=$/3600:S.$raise(F("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return n}),J(d,"$local",function($,n,t,r,s,u,f,p,M,D){n==null&&(n=z),t==null&&(t=z),r==null&&(r=z),s==null&&(s=z),u==null&&(u=z),f==null&&(f=z),p==null&&(p=z),M==null&&(M=z),D==null&&(D=z);var R,V;return arguments.length===10&&(R=x(arguments),$=R[5],n=R[4],t=R[3],r=R[2],s=R[1],u=R[0]),R=i($,n,t,r,s,u),$=R[0],n=R[1],t=R[2],r=R[3],s=R[4],u=R[5],V=new Date($,n,t,r,s,0,u*1e3),$<100&&V.setFullYear($),V},-2),J(d,"$gm",function($,n,t,r,s,u,f,p,M,D){n==null&&(n=z),t==null&&(t=z),r==null&&(r=z),s==null&&(s=z),u==null&&(u=z),f==null&&(f=z),p==null&&(p=z),M==null&&(M=z),D==null&&(D=z);var R,V;return arguments.length===10&&(R=x(arguments),$=R[5],n=R[4],t=R[3],r=R[2],s=R[1],u=R[0]),R=i($,n,t,r,s,u),$=R[0],n=R[1],t=R[2],r=R[3],s=R[4],u=R[5],V=new Date(Date.UTC($,n,t,r,s,0,u*1e3)),$<100&&V.setUTCFullYear($),V.timezone=0,V},-2),J(d,"$now",function(){var $=this;return $.$new()}),Z(d,"$+",function($){var n=this;T(F("Time"),$)&&S.$raise(F("TypeError"),"time + time?"),$.$$is_number||($=re["$coerce_to!"]($,F("Integer"),"to_int"));var t=new Date(n.getTime()+$*1e3);return t.timezone=n.timezone,t}),Z(d,"$-",function($){var n=this;if(T(F("Time"),$))return(n.getTime()-$.getTime())/1e3;$.$$is_number||($=re["$coerce_to!"]($,F("Integer"),"to_int"));var t=new Date(n.getTime()-$*1e3);return t.timezone=n.timezone,t}),Z(d,"$<=>",function($){var n=this,t=z;return T(F("Time"),$)?n.$to_f()["$<=>"]($.$to_f()):(t=$["$<=>"](n),g(t["$nil?"]())?z:g(U(t,0))?-1:g($e(t,0))?1:0)}),Z(d,"$==",function($){var n=this,t=z;return g(t=F("Time")["$==="]($))?n.$to_f()===$.$to_f():t}),Z(d,"$asctime",function(){var $=this;return $.$strftime("%a %b %e %H:%M:%S %Y")}),W([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function a($,n,t,r){var s=a.$$s==null?this:a.$$s;return $==null&&($=z),n==null&&(n=z),t==null&&(t=z),r==null&&(r=0),W(s,"define_method",[$],function u(){var f=u.$$s==null?this:u.$$s;return r+(f.timezone!=null?new Date(f.getTime()+f.timezone*36e5)[t]():f[n]())},{$$s:s})},{$$arity:-4,$$s:d}),Z(d,"$yday",function(){var $=this,n=z,t=z,r=z;return n=h("Time").$new($.$year()).$to_i(),t=h("Time").$new($.$year(),$.$month(),$.$day()).$to_i(),r=86400,H(ee(C(t,n),r).$round(),1)}),Z(d,"$isdst",function(){var $=this,n=new Date($.getFullYear(),0,1),t=new Date($.getFullYear(),6,1);return $.getTimezoneOffset()<Math.max(n.getTimezoneOffset(),t.getTimezoneOffset())}),Z(d,"$dup",function(){var $=this,n=z;return n=new Date($.getTime()),n.$copy_instance_variables($),n.$initialize_dup($),n}),Z(d,"$eql?",function($){var n=this,t=z;return g(t=$["$is_a?"](F("Time")))?n["$<=>"]($)["$zero?"]():t}),W([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function a($,n){var t=a.$$s==null?this:a.$$s;return $==null&&($=z),n==null&&(n=z),W(t,"define_method",[$],function r(){var s=r.$$s==null?this:r.$$s;return s.$wday()===n},{$$s:t})},{$$s:d}),Z(d,"$hash",function(){var $=this;return[F("Time"),$.getTime()].$hash()}),Z(d,"$inspect",function(){var $=this;return g($["$utc?"]())?$.$strftime("%Y-%m-%d %H:%M:%S UTC"):$.$strftime("%Y-%m-%d %H:%M:%S %z")}),Z(d,"$succ",function(){var $=this,n=new Date($.getTime()+1e3);return n.timezone=$.timezone,n}),Z(d,"$usec",function(){var $=this;return $.getMilliseconds()*1e3}),Z(d,"$zone",function(){var $=this;if($.timezone===0)return"UTC";if($.timezone!=null)return z;var n=$.toString(),t;return n.indexOf("(")==-1?t=n.match(/[A-Z]{3,4}/)[0]:t=n.match(/\((.+)\)(?:\s|$)/)[1],t=="GMT"&&/(GMT\W*\d{4})/.test(n)?RegExp.$1:t}),Z(d,"$getgm",function(){var $=this,n=new Date($.getTime());return n.timezone=0,n}),Z(d,"$gmtime",function(){var $=this;return $.timezone!==0&&(q($),$.timezone=0),$}),Z(d,"$gmt?",function(){var $=this;return $.timezone===0}),Z(d,"$gmt_offset",function(){var $=this;return $.timezone!=null?$.timezone*60:-$.getTimezoneOffset()*60}),Z(d,"$strftime",function($){var n=this;return $.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(t,r,s,u,f){var p="",M,D,R,V=r.indexOf("0")!==-1,O=r.indexOf("-")===-1,ae=r.indexOf("_")!==-1,le=r.indexOf("^")!==-1,_e=r.indexOf("#")!==-1,de=(r.match(":")||[]).length;switch(s=parseInt(s,10),V&&ae&&(r.indexOf("0")<r.indexOf("_")?V=!1:ae=!1),f){case"Y":p+=n.$year();break;case"C":V=!ae,p+=Math.round(n.$year()/100);break;case"y":V=!ae,p+=n.$year()%100;break;case"m":V=!ae,p+=n.$mon();break;case"B":p+=w[n.$mon()-1];break;case"b":case"h":ae=!V,p+=X[n.$mon()-1];break;case"d":V=!ae,p+=n.$day();break;case"e":ae=!V,p+=n.$day();break;case"j":V=!ae,s=isNaN(s)?3:s,p+=n.$yday();break;case"H":V=!ae,p+=n.$hour();break;case"k":ae=!V,p+=n.$hour();break;case"I":V=!ae,p+=n.$hour()%12||12;break;case"l":ae=!V,p+=n.$hour()%12||12;break;case"P":p+=n.$hour()>=12?"pm":"am";break;case"p":p+=n.$hour()>=12?"PM":"AM";break;case"M":V=!ae,p+=n.$min();break;case"S":V=!ae,p+=n.$sec();break;case"L":V=!ae,s=isNaN(s)?3:s,p+=n.getMilliseconds();break;case"N":s=isNaN(s)?9:s,p+=n.getMilliseconds().toString().$rjust(3,"0"),p=p.$ljust(s,"0");break;case"z":var ge=n.timezone==null?n.getTimezoneOffset():-n.timezone*60,ve=Math.floor(Math.abs(ge)/60),me=Math.abs(ge)%60;p+=ge<0?"+":"-",p+=ve<10?"0":"",p+=ve,de>0&&(p+=":"),p+=me<10?"0":"",p+=me,de>1&&(p+=":00");break;case"Z":p+=n.$zone();break;case"A":p+=l[n.$wday()];break;case"a":p+=c[n.$wday()];break;case"u":p+=n.$wday()+1;break;case"w":p+=n.$wday();break;case"V":p+=n.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":p+=n.$cweek_cyear()["$[]"](1);break;case"g":p+=n.$cweek_cyear()["$[]"](1)["$[]"](b(-2,-1,!1));break;case"s":p+=n.$to_i();break;case"n":p+=`
`;break;case"t":p+="	";break;case"%":p+="%";break;case"c":p+=n.$strftime("%a %b %e %T %Y");break;case"D":case"x":p+=n.$strftime("%m/%d/%y");break;case"F":p+=n.$strftime("%Y-%m-%d");break;case"v":p+=n.$strftime("%e-%^b-%4Y");break;case"r":p+=n.$strftime("%I:%M:%S %p");break;case"R":p+=n.$strftime("%H:%M");break;case"T":case"X":p+=n.$strftime("%H:%M:%S");break;case"J":if(M=n.$to_date().$jd(),M<2405160){p+=n.$strftime("%Y-%m-%d");break}else M<2419614?(D="M",R=1867):M<2424875?(D="T",R=1911):M<2447535?(D="S",R=1925):M<2458605?(D="H",R=1988):(D="R",R=2018);p+=n.$format("%c%02d",D,C(n.$year(),R)),p+=n.$strftime("-%m-%d");break;default:return t}return le&&(p=p.toUpperCase()),_e&&(p=p.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),O&&(V||ae)&&(p=p.$rjust(isNaN(s)?2:s,ae?" ":"0")),p})}),Z(d,"$to_a",function(){var $=this;return[$.$sec(),$.$min(),$.$hour(),$.$day(),$.$month(),$.$year(),$.$wday(),$.$yday(),$.$isdst(),$.$zone()]}),Z(d,"$to_f",function(){var $=this;return $.getTime()/1e3}),Z(d,"$to_i",function(){var $=this;return parseInt($.getTime()/1e3,10)}),Z(d,"$cweek_cyear",function(){var $=this,n=z,t=z,r=z,s=z,u=z,f=z,p=z;return n=F("Time").$new($.$year(),1,1),t=n.$wday(),r=$.$year(),g(L(t,4))&&y(t,0)?s=C(t,1):(s=C(C(t,7),1),G(s,-8)&&(s=-1)),u=ee(H($.$yday(),s),7).$ceil(),g(L(u,0))?F("Time").$new(C($.$year(),1),12,31).$cweek_cyear():(G(u,53)&&(f=F("Time").$new($.$year(),12,31),p=f.$wday(),g(L(p,3))&&y(p,0)&&(u=1,r=H(r,1))),[u,r])}),function(a,$){return A(a,"mktime","local"),A(a,"utc","gm")}(e.get_singleton_class(d)),A(d,"ctime","asctime"),A(d,"dst?","isdst"),A(d,"getutc","getgm"),A(d,"gmtoff","gmt_offset"),A(d,"mday","day"),A(d,"month","mon"),A(d,"to_s","inspect"),A(d,"tv_sec","to_i"),A(d,"tv_usec","usec"),A(d,"utc","gmtime"),A(d,"utc?","gmt?"),A(d,"utc_offset","gmt_offset")}("::",Date,m)};Opal.modules["corelib/struct"]=function(e){var x=e.klass,q=e.slice,j=e.extract_kwargs,S=e.ensure_kwargs,re=e.hash_get,J=e.truthy,T=e.neqeq,Z=e.eqeq,g=e.Opal,U=e.send,$e=e.Class,W=e.to_a,H=e.def,ee=e.defs,C=e.Kernel,b=e.rb_gt,y=e.rb_minus,L=e.eqeqeq,G=e.rb_lt,A=e.rb_ge,B=e.rb_plus,m=e.alias,z=e.top,F=[],k=e.nil,E=e.$$$;return e.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),z.$require("corelib/enumerable"),function(o,d,I){var h=x(o,d,"Struct"),l=[h].concat(I),c=e.$r(l);h.$include(E("Enumerable")),ee(h,"$new",function w(i,a,$){var n=w.$$p||k,t,r,s,u,f=this,p=k;if(w.$$p=null,t=q(arguments,1),r=j(t),r=S(r),s=t,u=re(r,"keyword_init"),u==null&&(u=!1),J(i))if(Z(i.$class(),E("String"))&&T(i["$[]"](0).$upcase(),i["$[]"](0)))s.$unshift(i),i=k;else try{i=g["$const_name!"](i)}catch(M){if(e.rescue(M,[E("TypeError"),E("NameError")]))try{s.$unshift(i),i=k}finally{e.pop_exception(M)}else throw M}return U(s,"map",[],function(D){return D==null&&(D=k),g["$coerce_to!"](D,E("String"),"to_str")}),p=U($e,"new",[f],function M(){var D=M.$$s==null?this:M.$$s;return U(s,"each",[],function R(V){var O=R.$$s==null?this:R.$$s;return V==null&&(V=k),O.$define_struct_attribute(V)},{$$s:D}),function(R,V){return H(R,"$new",function(ae){var le,_e,de=this,ge=k;return le=q(arguments),_e=le,ge=de.$allocate(),ge.$$data={},U(ge,"initialize",W(_e)),ge},-1),R.$alias_method("[]","new")}(e.get_singleton_class(D))},{$$s:f}),J(n)&&U(p,"module_eval",[],n.$to_proc()),p.$$keyword_init=u,J(i)&&E("Struct").$const_set(i,p),p},-2),ee(h,"$define_struct_attribute",function(i){var a=this;return Z(a,E("Struct"))&&C.$raise(E("ArgumentError"),"you cannot define attributes to the Struct class"),a.$members()["$<<"](i),U(a,"define_method",[i],function $(){var n=$.$$s==null?this:$.$$s;return n.$$data[i]},{$$s:a}),U(a,"define_method",[""+i+"="],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=k),t.$$data[i]=n},{$$s:a})}),ee(h,"$members",function(){var i=this,a=k;return i.members==null&&(i.members=k),Z(i,E("Struct"))&&C.$raise(E("ArgumentError"),"the Struct class has no members"),i.members=J(a=i.members)?a:[]}),ee(h,"$inherited",function(i){var a=this,$=k;return a.members==null&&(a.members=k),$=a.members,U(i,"instance_eval",[],function n(){var t=n.$$s==null?this:n.$$s;return t.members=$},{$$s:a})}),H(h,"$initialize",function(i){var a,$,n=this,t=k,r=k,s=k;return a=q(arguments),$=a,J(n.$class().$$keyword_init)?(t=J(r=$.$last())?r:new Map,(J(b($.$length(),1))||J($.length===1&&!t.$$is_hash))&&C.$raise(E("ArgumentError"),"wrong number of arguments (given "+$.$length()+", expected 0)"),s=y(t.$keys(),n.$class().$members()),J(s["$any?"]())&&C.$raise(E("ArgumentError"),"unknown keywords: "+s.$join(", ")),U(n.$class().$members(),"each",[],function u(f){var p,M=u.$$s==null?this:u.$$s;return f==null&&(f=k),p=[f,t["$[]"](f)],U(M,"[]=",p),p[p.length-1]},{$$s:n})):(J(b($.$length(),n.$class().$members().$length()))&&C.$raise(E("ArgumentError"),"struct size differs"),U(n.$class().$members(),"each_with_index",[],function u(f,p){var M,D=u.$$s==null?this:u.$$s;return f==null&&(f=k),p==null&&(p=k),M=[f,$["$[]"](p)],U(D,"[]=",M),M[M.length-1]},{$$s:n}))},-1),H(h,"$initialize_copy",function(i){var a=this;a.$$data={};var $=Object.keys(i.$$data),n,t,r;for(n=0,t=$.length;n<t;n++)r=$[n],a.$$data[r]=i.$$data[r]}),ee(h,"$keyword_init?",function(){var i=this;return i.$$keyword_init}),H(h,"$members",function(){var i=this;return i.$class().$members()}),H(h,"$hash",function(){var i=this;return[i.$class(),i.$to_a()].$hash()}),H(h,"$[]",function(i){var a=this;return L(E("Integer"),i)?(J(G(i,a.$class().$members().$size()["$-@"]()))&&C.$raise(E("IndexError"),"offset "+i+" too small for struct(size:"+a.$class().$members().$size()+")"),J(A(i,a.$class().$members().$size()))&&C.$raise(E("IndexError"),"offset "+i+" too large for struct(size:"+a.$class().$members().$size()+")"),i=a.$class().$members()["$[]"](i)):L(E("String"),i)?a.$$data.hasOwnProperty(i)||C.$raise(E("NameError").$new("no member '"+i+"' in struct",i)):C.$raise(E("TypeError"),"no implicit conversion of "+i.$class()+" into Integer"),i=g["$coerce_to!"](i,E("String"),"to_str"),a.$$data[i]}),H(h,"$[]=",function(i,a){var $=this;return L(E("Integer"),i)?(J(G(i,$.$class().$members().$size()["$-@"]()))&&C.$raise(E("IndexError"),"offset "+i+" too small for struct(size:"+$.$class().$members().$size()+")"),J(A(i,$.$class().$members().$size()))&&C.$raise(E("IndexError"),"offset "+i+" too large for struct(size:"+$.$class().$members().$size()+")"),i=$.$class().$members()["$[]"](i)):L(E("String"),i)?J($.$class().$members()["$include?"](i.$to_sym()))||C.$raise(E("NameError").$new("no member '"+i+"' in struct",i)):C.$raise(E("TypeError"),"no implicit conversion of "+i.$class()+" into Integer"),i=g["$coerce_to!"](i,E("String"),"to_str"),$.$$data[i]=a}),H(h,"$==",function(i){var a=this;if(!J(i["$instance_of?"](a.$class())))return!1;var $={},n={};function t(r,s){var u,f,p;$[r.$__id__()]=!0,n[s.$__id__()]=!0;for(u in r.$$data)if(f=r.$$data[u],p=s.$$data[u],E("Struct")["$==="](f)){if((!$.hasOwnProperty(f.$__id__())||!n.hasOwnProperty(p.$__id__()))&&!t(f,p))return!1}else if(!f["$=="](p))return!1;return!0}return t(a,i)}),H(h,"$eql?",function(i){var a=this;if(!J(i["$instance_of?"](a.$class())))return!1;var $={},n={};function t(r,s){var u,f,p;$[r.$__id__()]=!0,n[s.$__id__()]=!0;for(u in r.$$data)if(f=r.$$data[u],p=s.$$data[u],E("Struct")["$==="](f)){if((!$.hasOwnProperty(f.$__id__())||!n.hasOwnProperty(p.$__id__()))&&!t(f,p))return!1}else if(!f["$eql?"](p))return!1;return!0}return t(a,i)}),H(h,"$each",function w(){var i=w.$$p||k,a=this;return w.$$p=null,i===k?U(a,"enum_for",["each"],function $(){var n=$.$$s==null?this:$.$$s;return n.$size()},{$$s:a}):(U(a.$class().$members(),"each",[],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=k),e.yield1(i,t["$[]"](n))},{$$s:a}),a)}),H(h,"$each_pair",function w(){var i=w.$$p||k,a=this;return w.$$p=null,i===k?U(a,"enum_for",["each_pair"],function $(){var n=$.$$s==null?this:$.$$s;return n.$size()},{$$s:a}):(U(a.$class().$members(),"each",[],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=k),e.yield1(i,[n,t["$[]"](n)])},{$$s:a}),a)}),H(h,"$length",function(){var i=this;return i.$class().$members().$length()}),H(h,"$to_a",function(){var i=this;return U(i.$class().$members(),"map",[],function a($){var n=a.$$s==null?this:a.$$s;return $==null&&($=k),n["$[]"]($)},{$$s:i})});var X=[];return H(h,"$inspect",function(){var i=this,a=k,$=k;return function(){try{return a="#<struct ",J(X["$include?"](i.$__id__()))?B(a,":...>"):(X["$<<"](i.$__id__()),$=!0,L(E("Struct"),i)&&J(i.$class().$name())&&(a=B(a,""+i.$class()+" ")),a=B(a,U(i.$each_pair(),"map",[],function(t,r){return t==null&&(t=k),r==null&&(r=k),""+t+"="+c("Opal").$inspect(r)}).$join(", ")),a=B(a,">"),a)}finally{J($)&&X.pop()}}()}),H(h,"$to_h",function w(i){var a=w.$$p||k,$,n,t=this;return w.$$p=null,$=q(arguments),n=$,a!==k?U(U(t,"map",[],a.$to_proc()),"to_h",W(n)):U(t.$class().$members(),"each_with_object",[new Map],function r(s,u){var f,p=r.$$s==null?this:r.$$s;return s==null&&(s=k),u==null&&(u=k),f=[s,p["$[]"](s)],U(u,"[]=",f),f[f.length-1]},{$$s:t})},-1),H(h,"$values_at",function(i){var a,$,n=this;a=q(arguments),$=a,$=U($,"map",[],function(f){return f==null&&(f=k),f.$$is_range?f.$to_a():f}).$flatten();for(var t=[],r=0,s=$.length;r<s;r++)$[r].$$is_number||C.$raise(E("TypeError"),"no implicit conversion of "+$[r].$class()+" into Integer"),t.push(n["$[]"]($[r]));return t},-1),H(h,"$dig",function(i,a){var $,n,t=this,r=k;return $=q(arguments,1),n=$,r=J(i.$$is_string&&t.$$data.hasOwnProperty(i))&&t.$$data[i]||k,r===k||n.length===0?r:(J(r["$respond_to?"]("dig"))||C.$raise(E("TypeError"),""+r.$class()+" does not have #dig method"),U(r,"dig",W(n)))},-2),m(h,"size","length"),m(h,"to_s","inspect"),m(h,"values","to_a")}("::",null,F)};Opal.modules["corelib/set"]=function(e){var x=e.freeze,q=e.klass,j=e.slice,S=e.defs,re=e.truthy,J=e.eqeqeq,T=e.Kernel,Z=e.send,g=e.def,U=e.eqeq,$e=e.rb_lt,W=e.rb_le,H=e.alias,ee=[],C=e.nil,b=e.$$$;return e.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(y,L,G){var A=q(y,L,"Set"),B=[A].concat(G),m=e.$r(B),z=C,F=A.$$prototype;F.hash=C,A.$include(b("Enumerable")),S(A,"$[]",function(o){var d,I,h=this;return d=j(arguments),I=d,h.$new(I)},-1),g(A,"$initialize",function E(o){var d=E.$$p||C,I=this;return E.$$p=null,o==null&&(o=C),I.hash=new Map,re(o["$nil?"]())?C:(J(b("Enumerable"),o)||T.$raise(b("ArgumentError"),"value must be enumerable"),re(d)?Z(o,"each",[],function h(l){var c=h.$$s==null?this:h.$$s;return l==null&&(l=C),c.$add(e.yield1(d,l))},{$$s:I}):I.$merge(o))},-1),g(A,"$dup",function(){var o=this,d=C;return d=o.$class().$new(),d.$merge(o)}),g(A,"$-",function(o){var d=this;return re(o["$respond_to?"]("each"))||T.$raise(b("ArgumentError"),"value must be enumerable"),d.$dup().$subtract(o)}),g(A,"$inspect",function(){var o=this;return"#<Set: {"+o.$to_a().$join(",")+"}>"}),g(A,"$==",function(o){var d=this;return re(d["$equal?"](o))?!0:re(o["$instance_of?"](d.$class()))?d.hash["$=="](o.$instance_variable_get("@hash")):re(o["$is_a?"](b("Set")))&&U(d.$size(),o.$size())?Z(o,"all?",[],function I(h){var l=I.$$s==null?this:I.$$s;return l.hash==null&&(l.hash=C),h==null&&(h=C),l.hash["$include?"](h)},{$$s:d}):!1}),g(A,"$add",function(o){var d=this;return d.hash["$[]="](o,!0),d}),g(A,"$classify",function E(){var o=E.$$p||C,d=this,I=C;return E.$$p=null,o===C?d.$enum_for("classify"):(I=Z(b("Hash"),"new",[],function h(l,c){var X,w=h.$$s==null?this:h.$$s;return l==null&&(l=C),c==null&&(c=C),X=[c,w.$class().$new()],Z(l,"[]=",X),X[X.length-1]},{$$s:d}),Z(d,"each",[],function(l){return l==null&&(l=C),I["$[]"](e.yield1(o,l)).$add(l)}),I)}),g(A,"$collect!",function E(){var o=E.$$p||C,d=this,I=C;return E.$$p=null,o===C?d.$enum_for("collect!"):(I=d.$class().$new(),Z(d,"each",[],function(l){return l==null&&(l=C),I["$<<"](e.yield1(o,l))}),d.$replace(I))}),g(A,"$compare_by_identity",function(){var o=this;return re(o.hash["$respond_to?"]("compare_by_identity"))?(o.hash.$compare_by_identity(),o):o.$raise(m("NotImplementedError"),""+o.$class().$name()+"#compare_by_identity is not implemented")}),g(A,"$compare_by_identity?",function(){var o=this,d=C;return re(d=o.hash["$respond_to?"]("compare_by_identity?"))?o.hash["$compare_by_identity?"]():d}),g(A,"$delete",function(o){var d=this;return d.hash.$delete(o),d}),g(A,"$delete?",function(o){var d=this;return re(d["$include?"](o))?(d.$delete(o),d):C}),g(A,"$delete_if",function E(){var o=E.$$p||C,d=this;return E.$$p=null,o===C?d.$enum_for("delete_if"):(Z(Z(d,"select",[],function(h){return h==null&&(h=C),e.yield1(o,h)}),"each",[],function I(h){var l=I.$$s==null?this:I.$$s;return l.hash==null&&(l.hash=C),h==null&&(h=C),l.hash.$delete(h)},{$$s:d}),d)}),g(A,"$freeze",function(){var o=this;return re(o["$frozen?"]())?o:(o.hash.$freeze(),x(o))}),g(A,"$keep_if",function E(){var o=E.$$p||C,d=this;return E.$$p=null,o===C?d.$enum_for("keep_if"):(Z(Z(d,"reject",[],function(h){return h==null&&(h=C),e.yield1(o,h)}),"each",[],function I(h){var l=I.$$s==null?this:I.$$s;return l.hash==null&&(l.hash=C),h==null&&(h=C),l.hash.$delete(h)},{$$s:d}),d)}),g(A,"$reject!",function E(){var o=E.$$p||C,d=this,I=C;return E.$$p=null,o===C?d.$enum_for("reject!"):(I=d.$size(),Z(d,"delete_if",[],o.$to_proc()),U(d.$size(),I)?C:d)}),g(A,"$select!",function E(){var o=E.$$p||C,d=this,I=C;return E.$$p=null,o===C?d.$enum_for("select!"):(I=d.$size(),Z(d,"keep_if",[],o.$to_proc()),U(d.$size(),I)?C:d)}),g(A,"$add?",function(o){var d=this;return re(d["$include?"](o))?C:d.$add(o)}),g(A,"$each",function E(){var o=E.$$p||C,d=this;return E.$$p=null,o===C?d.$enum_for("each"):(Z(d.hash,"each_key",[],o.$to_proc()),d)}),g(A,"$empty?",function(){var o=this;return o.hash["$empty?"]()}),g(A,"$eql?",function(o){var d=this;return d.hash["$eql?"](Z(o,"instance_eval",[],function I(){var h=I.$$s==null?this:I.$$s;return h.hash==null&&(h.hash=C),h.hash},{$$s:d}))}),g(A,"$clear",function(){var o=this;return o.hash.$clear(),o}),g(A,"$include?",function(o){var d=this;return d.hash["$include?"](o)}),g(A,"$merge",function(o){var d=this;return Z(o,"each",[],function I(h){var l=I.$$s==null?this:I.$$s;return h==null&&(h=C),l.$add(h)},{$$s:d}),d}),g(A,"$replace",function(o){var d=this;return d.$clear(),d.$merge(o),d}),g(A,"$size",function(){var o=this;return o.hash.$size()}),g(A,"$subtract",function(o){var d=this;return Z(o,"each",[],function I(h){var l=I.$$s==null?this:I.$$s;return h==null&&(h=C),l.$delete(h)},{$$s:d}),d}),g(A,"$|",function(o){var d=this;return re(o["$respond_to?"]("each"))||T.$raise(b("ArgumentError"),"value must be enumerable"),d.$dup().$merge(o)});function k(E){re(z=E["$is_a?"](b("Set")))||T.$raise(b("ArgumentError"),"value must be a set")}return g(A,"$superset?",function(o){var d=this;return k(o),re($e(d.$size(),o.$size()))?!1:Z(o,"all?",[],function I(h){var l=I.$$s==null?this:I.$$s;return h==null&&(h=C),l["$include?"](h)},{$$s:d})}),g(A,"$proper_superset?",function(o){var d=this;return k(o),re(W(d.$size(),o.$size()))?!1:Z(o,"all?",[],function I(h){var l=I.$$s==null?this:I.$$s;return h==null&&(h=C),l["$include?"](h)},{$$s:d})}),g(A,"$subset?",function(o){var d=this;return k(o),re($e(o.$size(),d.$size()))?!1:Z(d,"all?",[],function(h){return h==null&&(h=C),o["$include?"](h)})}),g(A,"$proper_subset?",function(o){var d=this;return k(o),re(W(o.$size(),d.$size()))?!1:Z(d,"all?",[],function(h){return h==null&&(h=C),o["$include?"](h)})}),g(A,"$intersect?",function(o){var d=this;return k(o),re($e(d.$size(),o.$size()))?Z(d,"any?",[],function(h){return h==null&&(h=C),o["$include?"](h)}):Z(o,"any?",[],function I(h){var l=I.$$s==null?this:I.$$s;return h==null&&(h=C),l["$include?"](h)},{$$s:d})}),g(A,"$disjoint?",function(o){var d=this;return d["$intersect?"](o)["$!"]()}),g(A,"$to_a",function(){var o=this;return o.hash.$keys()}),H(A,"+","|"),H(A,"<","proper_subset?"),H(A,"<<","add"),H(A,"<=","subset?"),H(A,">","proper_superset?"),H(A,">=","superset?"),H(A,"difference","-"),H(A,"filter!","select!"),H(A,"length","size"),H(A,"map!","collect!"),H(A,"member?","include?"),H(A,"union","|")}("::",null,ee)};Opal.modules["corelib/dir"]=function(e){var x=e.klass,q=e.def,j=e.truthy,S=e.alias,re=e.nil,J=e.$$$;return e.add_stubs("[],pwd"),function(T,Z,g){var U=x(T,Z,"Dir");return function($e,W){return q($e,"$chdir",function H(ee){var C=H.$$p||re,b=re;return H.$$p=null,function(){try{return b=e.current_dir,e.current_dir=ee,e.yieldX(C,[])}finally{e.current_dir=b}}()}),q($e,"$pwd",function(){return e.current_dir||"."}),q($e,"$home",function(){var ee=re;return j(ee=J("ENV")["$[]"]("HOME"))?ee:"."}),S($e,"getwd","pwd")}(e.get_singleton_class(U))}("::",null)};Opal.modules["corelib/file"]=function(e){var x=e.truthy,q=e.klass,j=e.const_set,S=e.Opal,re=e.regexp,J=e.rb_plus,T=e.def,Z=e.Kernel,g=e.eqeq,U=e.rb_lt,$e=e.rb_minus,W=e.range,H=e.send,ee=e.slice,C=e.alias,b=[],y=e.nil,L=e.$$$;return e.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(G,A,B){var m=q(G,A,"File"),z=[m].concat(B),F=y;return j(z[0],"Separator",j(z[0],"SEPARATOR","/")),j(z[0],"ALT_SEPARATOR",y),j(z[0],"PATH_SEPARATOR",":"),j(z[0],"FNM_SYSCASE",0),F=/^[a-zA-Z]:(?:\\|\/)/,function(k,E){var o=[k].concat(E),d=e.$r(o);T(k,"$absolute_path",function(c,X){var w=y,i=y,a=y,$=y,n=y,t=y,r=y,s=y,u=y,f=y;X==null&&(X=y),w=d("SEPARATOR"),i=h(),a=[],c=x(c["$respond_to?"]("to_path"))?c.$to_path():c,c=S["$coerce_to!"](c,L("String"),"to_str"),X=x($=X)?$:L("Dir").$pwd(),n=c.substr(0,w.length)===w||F.test(c),t=X.substr(0,w.length)===w||F.test(X),x(n)?(r=c.$split(re(["[",i,"]"])),s=F.test(c)?"":c.$sub(re(["^([",i,"]+).*$"]),"\\1"),u=!0):(r=J(X.$split(re(["[",i,"]"])),c.$split(re(["[",i,"]"]))),s=F.test(X)?"":X.$sub(re(["^([",i,"]+).*$"]),"\\1"),u=t);for(var p,M=0,D=r.length;M<D;M++)p=r[M],!(p===y||p===""&&(a.length===0||u)||p==="."&&(a.length===0||u))&&(p===".."?a.pop():a.push(p));return!u&&r[0]!=="."&&a.$unshift("."),f=a.$join(w),x(u)&&(f=J(s,f)),f},-2),T(k,"$expand_path",function(c,X){var w=this,i=y,a=y,$=y,n=y,t=y;return X==null&&(X=y),i=d("SEPARATOR"),a=h(),x(c[0]==="~"||X&&X[0]==="~")&&($=d("Dir").$home(),x($)||Z.$raise(L("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),n=F.test($)?"":$.$sub(re(["^([",a,"]+).*$"]),"\\1"),x($["$start_with?"](n))||Z.$raise(L("ArgumentError"),"non-absolute home"),$=J($,i),t=re(["^\\~(?:",i,"|$)"]),c=c.$sub(t,$),x(X)&&(X=X.$sub(t,$))),w.$absolute_path(c,X)},-2);function I(l){return x(l["$respond_to?"]("to_path"))&&(l=l.$to_path()),l=S["$coerce_to!"](l,L("String"),"to_str"),l}function h(){return d("ALT_SEPARATOR")===y?e.escape_regexp(d("SEPARATOR")):e.escape_regexp(J(d("SEPARATOR"),d("ALT_SEPARATOR")))}return T(k,"$dirname",function(c,X){var w=this,i=y;if(X==null&&(X=1),g(X,0))return c;x(U(X,0))&&Z.$raise(L("ArgumentError"),"level can't be negative"),i=h(),c=I(c);var a=c.match(new RegExp("^["+i+"]")),$;return c=c.replace(new RegExp("["+i+"]+$"),""),c=c.replace(new RegExp("[^"+i+"]+$"),""),c=c.replace(new RegExp("["+i+"]+$"),""),c===""?$=a?"/":".":$=c,X==1?$:w.$dirname($,$e(X,1))},-2),T(k,"$basename",function(c,X){var w=y;return X==null&&(X=y),w=h(),c=I(c),c.length==0||(X!==y?X=S["$coerce_to!"](X,L("String"),"to_str"):X=null,c=c.replace(new RegExp("(.)["+w+"]*$"),"$1"),c=c.replace(new RegExp("^(?:.*["+w+"])?([^"+w+"]+)$"),"$1"),X===".*"?c=c.replace(/\.[^\.]+$/,""):X!==null&&(X=e.escape_regexp(X),c=c.replace(new RegExp(""+X+"$"),""))),c},-2),T(k,"$extname",function(c){var X=this,w=y,i=y;return c=I(c),w=X.$basename(c),x(w["$empty?"]())||(i=w["$[]"](W(1,-1,!1)).$rindex("."),x(i["$nil?"]())||g(J(i,1),$e(w.$length(),1)))?"":w["$[]"](e.Range.$new(J(i,1),-1,!1))}),T(k,"$exist?",function(c){return e.modules[c]!=null}),T(k,"$directory?",function(c){var X=y;X=[];for(var w in e.modules)X.push(w);return c=c.$gsub(re(["(^.",d("SEPARATOR"),"+|",d("SEPARATOR"),"+$)"])),H(X,"find",[],function(a){return a==null&&(a=y),a["$=~"](re(["^",c]))})}),T(k,"$join",function(c){var X,w,i=y;return X=ee(arguments),w=X,x(w["$empty?"]())?"":(i="",w=H(w.$flatten().$each_with_index(),"map",[],function($,n){return $==null&&($=y),n==null&&(n=y),g(n,0)&&x($["$empty?"]())||g(w.$length(),J(n,1))&&x($["$empty?"]())?d("SEPARATOR"):$}),w=H(w,"reject",[],"empty?".$to_proc()),H(w,"each_with_index",[],function($,n){var t=y;return $==null&&($=y),n==null&&(n=y),t=w["$[]"](J(n,1)),x(t["$nil?"]())?i=""+i+$:(x($["$end_with?"](d("SEPARATOR")))&&x(t["$start_with?"](d("SEPARATOR")))&&($=$.$sub(re([d("SEPARATOR"),"+$"]),"")),i=x($["$end_with?"](d("SEPARATOR")))||x(t["$start_with?"](d("SEPARATOR")))?""+i+$:""+i+$+d("SEPARATOR"))}),i)},-1),T(k,"$split",function(c){return c.$split(d("SEPARATOR"))}),C(k,"realpath","expand_path"),C(k,"exists?","exist?")}(e.get_singleton_class(m),z)}("::",L("IO"),b)};Opal.modules["corelib/process/base"]=function(e){var x=e.klass,q=e.slice,j=e.defs,S=e.return_val,re=e.nil;return function(J,T){var Z=x(J,T,"Signal");return j(Z,"$trap",function(U){return q(arguments),re},-1)}("::",null),function(J,T){var Z=x(J,T,"GC");return j(Z,"$start",S(re))}("::",null)};Opal.modules["corelib/process"]=function(e){var x=e.module,q=e.defs,j=e.truthy,S=e.return_val,re=e.Kernel,J=e.nil,T=e.$$$;return e.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(Z){var g=x(Z,"Process"),U=J;if(g.__clocks__=[],q(g,"$__register_clock__",function(H,ee){var C=this;return C.__clocks__==null&&(C.__clocks__=J),C.$const_set(H,C.__clocks__.$size()),C.__clocks__["$<<"](ee)}),g.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),U=!1,e.global.performance)U=function(){return performance.now()};else if(e.global.process&&process.hrtime){var $e=process.hrtime();U=function(){var W=process.hrtime($e),H=W[1]/1e3|0;return W[0]*1e3+H/1e3}}return j(U)&&g.$__register_clock__("CLOCK_MONOTONIC",U),q(g,"$pid",S(0)),q(g,"$times",function(){var H=J;return H=T("Time").$now().$to_f(),T(T("Benchmark"),"Tms").$new(H,H,H,H,H)}),q(g,"$clock_gettime",function(H,ee){var C=this,b=J;C.__clocks__==null&&(C.__clocks__=J),ee==null&&(ee="float_second"),j(b=C.__clocks__["$[]"](H))||re.$raise(T(T("Errno"),"EINVAL"),"clock_gettime("+H+") "+C.__clocks__["$[]"](H));var y=b();switch(ee){case"float_second":return y/1e3;case"float_millisecond":return y/1;case"float_microsecond":return y*1e3;case"second":return y/1e3|0;case"millisecond":return y/1|0;case"microsecond":return y*1e3|0;case"nanosecond":return y*1e6|0;default:re.$raise(T("ArgumentError"),"unexpected unit: "+ee)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(e){var x=e.klass,q=e.module,j=e.def,S=e.range,re=e.send,J=e.rb_divide,T=e.Kernel,Z=e.Opal,g=[],U=e.nil,$e=e.$$$;return e.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(W,H,ee){var C=x(W,H,"Random"),b=[C].concat(ee);return function(y,L){var G=q(y,"Formatter"),A=[G].concat(L),B=e.$r(A);return j(G,"$hex",function(z){var F=this;z==null&&(z=U),z=$e("Random").$_verify_count(z);for(var k=F.$bytes(z),E="",o=0;o<z;o++)E+=k.charCodeAt(o).toString(16).padStart(2,"0");return E.$encode("US-ASCII")},-1),j(G,"$random_bytes",function(z){var F=this;return z==null&&(z=U),F.$bytes(z)},-1),j(G,"$base64",function(z){var F=this;return z==null&&(z=U),$e("Base64").$strict_encode64(F.$random_bytes(z)).$encode("US-ASCII")},-1),j(G,"$urlsafe_base64",function(z,F){var k=this;return z==null&&(z=U),F==null&&(F=!1),$e("Base64").$urlsafe_encode64(k.$random_bytes(z),F).$encode("US-ASCII")},-1),j(G,"$uuid",function(){var z=this,F=U;return F=z.$hex(16).$split(""),F["$[]="](12,"4"),F["$[]="](16,(parseInt(F["$[]"](16),16)&3|8).toString(16)),F=[F["$[]"](S(0,8,!0)),F["$[]"](S(8,12,!0)),F["$[]"](S(12,16,!0)),F["$[]"](S(16,20,!0)),F["$[]"](S(20,32,!0))],F=re(F,"map",[],"join".$to_proc()),F.$join("-")}),j(G,"$random_float",function(){var z=this,F=U,k=U;return F=z.$bytes(4),k=0,re(4,"times",[],function(o){return o==null&&(o=U),k=k["$<<"](8),k=k["$|"](F["$[]"](o).$ord())}),J(k.$abs(),2147483647)}),j(G,"$random_number",function(z){var F=this;function k(){return F.$random_float()}function E(d){return Math.floor(k()*d)}function o(){var d=z.begin,I=z.end;if(d===U||I===U)return U;var h=I-d;return h<0?U:h===0?d:(I%1===0&&d%1===0&&!z.excl&&h++,E(h)+d)}return z==null?k():z.$$is_range?o():z.$$is_number?(z<=0&&T.$raise($e("ArgumentError"),"invalid argument - "+z),z%1===0?E(z):k()*z):(z=Z["$coerce_to!"](z,$e("Integer"),"to_int"),z<=0&&T.$raise($e("ArgumentError"),"invalid argument - "+z),E(z))},-1),j(G,"$alphanumeric",function(z){var F=this,k=U;return z==null&&(z=U),z=B("Random").$_verify_count(z),k=re([S("0","9",!1),S("a","z",!1),S("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),re($e("Array"),"new",[z],function E(o){var d=E.$$s==null?this:E.$$s;return k["$[]"](d.$random_number(k.$length()))},{$$s:F}).$join()},-1)}(C,b),C.$include($e($e("Random"),"Formatter")),C.$extend($e($e("Random"),"Formatter"))}("::",null,g)};Opal.modules["corelib/random/mersenne_twister"]=function(e){var x=e.klass,q=e.const_set,j=e.send,S=e.nil,re=e.$$$,J=S;return e.add_stubs("generator="),J=function(){var T=624,Z=397,g=2567483615,U=2147483648,$e=2147483647,W=function(A,B){return A&U|B&$e},H=function(A,B){return W(A,B)>>>1^(B&1?g:0)};function ee(A){var B={left:0,next:T,state:new Array(T)};return C(B,A),B}function C(A,B){var m;for(A.state[0]=B>>>0,m=1;m<T;m++)A.state[m]=1812433253*(A.state[m-1]^A.state[m-1]>>30>>>0)+m,A.state[m]&=4294967295;A.left=1,A.next=T}function b(A){var B=0,m=A.state,z;for(A.left=T,A.next=0,z=T-Z+1;--z;B++)m[B]=m[B+Z]^H(m[B+0],m[B+1]);for(z=Z;--z;B++)m[B]=m[B+(Z-T)]^H(m[B+0],m[B+1]);m[B]=m[B+(Z-T)]^H(m[B+0],m[0])}function y(A){var B;return--A.left<=0&&b(A),B=A.state[A.next++],B^=B>>>11,B^=B<<7&2636928640,B^=B<<15&4022730752,B^=B>>>18,B>>>0}function L(A,B){return A>>>=5,B>>>=6,(A*67108864+B)*(1/9007199254740992)}function G(A){var B=y(A),m=y(A);return L(B,m)}return{genrand_real:G,init:ee}}(),function(T,Z){var g=x(T,Z,"Random"),U,$e=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return q(g,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*$e)},reseed:function(W){return J.init(W)},rand:function(W){return J.genrand_real(W)}}),U=[re(g,"MERSENNE_TWISTER_GENERATOR")],j(g,"generator=",U),U[U.length-1]}("::",null)};Opal.modules["corelib/random"]=function(e){var x=e.truthy,q=e.klass,j=e.Kernel,S=e.defs,re=e.Opal,J=e.def,T=e.eqeqeq,Z=e.send,g=e.top,U=e.nil,$e=e.$$$;return e.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),g.$require("corelib/random/formatter"),function(W,H){var ee=q(W,H,"Random");return ee.$attr_reader("seed","state"),S(ee,"$_verify_count",function(b){return x(b)||(b=16),typeof b!="number"&&(b=b.$to_int()),b<0&&j.$raise($e("ArgumentError"),"negative string size (or size too big)"),b=Math.floor(b),b}),J(ee,"$initialize",function(b){var y=this;return b==null&&(b=$e("Random").$new_seed()),b=re["$coerce_to!"](b,$e("Integer"),"to_int"),y.state=b,y.$reseed(b)},-1),J(ee,"$reseed",function(b){var y=this;return y.seed=b,y.$rng=e.$$rand.reseed(b)}),S(ee,"$new_seed",function(){return e.$$rand.new_seed()}),S(ee,"$rand",function(b){var y=this;return $e(y,"DEFAULT").$rand(b)},-1),S(ee,"$srand",function(b){var y=this,L=U;return b==null&&(b=$e("Random").$new_seed()),b=re["$coerce_to!"](b,$e("Integer"),"to_int"),L=$e(y,"DEFAULT").$seed(),$e(y,"DEFAULT").$reseed(b),L},-1),S(ee,"$urandom",function(b){return $e("SecureRandom").$bytes(b)}),J(ee,"$==",function(b){var y=this,L=U;return T($e("Random"),b)?x(L=y.$seed()["$=="](b.$seed()))?y.$state()["$=="](b.$state()):L:!1}),J(ee,"$bytes",function(b){var y=this;return b=$e("Random").$_verify_count(b),Z($e("Array"),"new",[b],function L(){var G=L.$$s==null?this:L.$$s;return G.$rand(255).$chr()},{$$s:y}).$join().$encode("ASCII-8BIT")}),S(ee,"$bytes",function(b){var y=this;return $e(y,"DEFAULT").$bytes(b)}),J(ee,"$rand",function(b){var y=this;return y.$random_number(b)},-1),J(ee,"$random_float",function(){var b=this;return b.state++,e.$$rand.rand(b.$rng)}),S(ee,"$random_float",function(){var b=this;return $e(b,"DEFAULT").$random_float()}),S(ee,"$generator=",function(b){var y=this;return e.$$rand=b,x(y["$const_defined?"]("DEFAULT"))?$e(y,"DEFAULT").$reseed():y.$const_set("DEFAULT",y.$new(y.$new_seed()))})}("::",null),g.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(e){var x=e.Kernel,q=e.klass,j=e.send,S=e.slice,re=e.module,J=e.def,T=e.return_val,Z=e.alias,g=e.defs,U=e.top,$e=[],W=e.nil,H=e.$$$;e.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var ee={};function C(y){switch(e.config.unsupported_features_severity){case"error":x.$raise(H("NotImplementedError"),y);break;case"warning":b(y);break}}function b(y){ee[y]||(ee[y]=!0,U.$warn(y))}return function(y,L){var G=q(y,L,"String"),A="String#%s not supported. Mutable String methods are not supported in Opal.";return j(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function B(m){var z=B.$$s==null?this:B.$$s;return m==null&&(m=W),j(z,"define_method",[m],function(k){return S(arguments),x.$raise(H("NotImplementedError"),A["$%"](m))},-1)},{$$s:G})}("::",null),function(y){var L=re(y,"Kernel"),G="Object tainting is not supported by Opal";return J(L,"$taint",function(){var B=this;return C(G),B}),J(L,"$untaint",function(){var B=this;return C(G),B}),J(L,"$tainted?",function(){return C(G),!1})}("::"),function(y,L){var G=q(y,L,"Module");return J(G,"$public",function(B){var m,z,F=this;return m=S(arguments),z=m,z.length===0?(F.$$module_function=!1,W):z.length===1?z[0]:z},-1),J(G,"$private_class_method",function(B){var m,z;return m=S(arguments),z=m,z.length===1?z[0]:z},-1),J(G,"$private_method_defined?",T(!1)),J(G,"$private_constant",function(B){return S(arguments),W},-1),Z(G,"nesting","public"),Z(G,"private","public"),Z(G,"protected","public"),Z(G,"protected_method_defined?","private_method_defined?"),Z(G,"public_class_method","private_class_method"),Z(G,"public_instance_method","instance_method"),Z(G,"public_instance_methods","instance_methods"),Z(G,"public_method_defined?","method_defined?")}("::",null),function(y){var L=re(y,"Kernel");return J(L,"$private_methods",function(A){return S(arguments),[]},-1),Z(L,"protected_methods","private_methods"),Z(L,"private_instance_methods","private_methods"),Z(L,"protected_instance_methods","private_methods")}("::"),function(y,L){var G=re(y,"Kernel"),A=[G].concat(L),B=e.$r(A);return J(G,"$eval",function(z){return S(arguments),x.$raise(H("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+B("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",$e),g(U,"$public",function(L){var G,A;return G=S(arguments),A=G,A.length===1?A[0]:A},-1),g(U,"$private",function(L){var G,A;return G=S(arguments),A=G,A.length===1?A[0]:A},-1)};Opal.modules["corelib/binding"]=function(e){var x=e.klass,q=e.truthy,j=e.def,S=e.slice,re=e.send,J=e.to_a,T=e.Kernel,Z=e.return_ivar,g=e.eqeq;e.thrower;var U=e.module,$e=e.const_set,W=e.top,H=[],ee=e.nil,C=e.$$$;return e.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(b,y){var L=x(b,y,"Binding"),G=L.$$prototype;return G.jseval=G.scope_variables=ee,j(L,"$initialize",function(B,m,z,F){var k,E=this;return m==null&&(m=[]),F==null&&(F=ee),k=[B,m,z,F],E.jseval=k[0],E.scope_variables=k[1],E.receiver=k[2],E.source_location=k[3],q(typeof z!==void 0)?ee:z=E.$js_eval("self")},-2),j(L,"$js_eval",function(B){var m,z,F=this;return m=S(arguments),z=m,q(F.jseval)?re(F.jseval,"call",J(z)):T.$raise("Evaluation on a Proc#binding is not supported")},-1),j(L,"$local_variable_get",function(B){var m=this;try{return m.$js_eval(B)}catch(z){if(e.rescue(z,[C("Exception")]))try{return T.$raise(C("NameError"),"local variable `"+B+"' is not defined for "+m.$inspect())}finally{e.pop_exception(z)}else throw z}}),j(L,"$local_variable_set",function(B,m){var z=this;return e.Binding.tmp_value=m,z.$js_eval(""+B+" = Opal.Binding.tmp_value"),delete e.Binding.tmp_value,m}),j(L,"$local_variables",Z("scope_variables")),j(L,"$local_variable_defined?",function(B){var m=this;return m.scope_variables["$include?"](B)}),j(L,"$eval",function(B,m,z){try{var F=this;return m==null&&(m=ee),z==null&&(z=ee),g(B,"self")?F.$receiver():T.$eval(B,F,m,z)}catch(k){if(k===e.t_eval_return)return k.$v;throw k}},-2),L.$attr_reader("receiver","source_location")}("::",null),function(b){var y=U(b,"Kernel");return j(y,"$binding",function(){return T.$raise("Opal doesn't support dynamic calls to binding")})}("::"),$e(H[0],"TOPLEVEL_BINDING",C("Binding").$new(function(b){return new Function("self","return "+b)(W)},[],W,["<main>",0]))};Opal.modules["corelib/irb"]=function(e){var x=e.module,q=e.truthy,j=e.Kernel,S=e.defs,re=e.gvars,J=e.lambda,T=e.hash_rehash,Z=e.send,g=e.rb_plus,U=e.const_set,$e=e.klass,W=e.def,H=e.Opal,ee=e.range,C=e.eqeq,b=e.thrower,y=[],L=e.nil,G=e.$$$;e.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(A,B){var m=x(A,"Opal"),z=[m].concat(B);return function(F,k){var E=x(F,"IRB"),o=[E].concat(k),d=e.$r(o);return S(E,"$ensure_loaded",function(h){var l=L,c=L;if(q(e.loaded_features["$include?"](h)))return L;l=q(d("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":d("RUBY_ENGINE_VERSION"),c="https://cdn.opalrb.com/opal/"+l+"/"+h+".js";var X;if(typeof XMLHttpRequest<"u"){var w=new XMLHttpRequest;w.open("GET",c,!1),w.send(""),X=w.responseText}else j.$raise("You need to provision "+h+" yourself in this environment");return new Function("Opal",X)(e),e.require(h),q(e.loaded_features["$include?"](h))?L:j.$raise("Could not load "+h+" for some reason")}),E.$singleton_class().$attr_accessor("output"),S(E,"$prepare_console",function I(){var h=I.$$p||L,l,c=this,X=L,w=L;return re.stdout==null&&(re.stdout=L),re.stderr==null&&(re.stderr=L),re.stdin==null&&(re.stdin=L),I.$$p=null,function(){try{return c["$output="](""),X=T(new Map([[re.stdout,J(function(a){return a==null&&(a=L),re.stdout=a})],[re.stderr,J(function(a){return a==null&&(a=L),re.stderr=a})]])),q(c["$browser?"]())&&(Z(X,"each",[],function i(a,$){var n=i.$$s==null?this:i.$$s,t=L;return a==null&&(a=L),$==null&&($=L),t=a.$dup(),t["$write_proc="](Z(n,"proc",[],function r(s){var u=r.$$s==null?this:r.$$s;return s==null&&(s=L),u["$output="](g(u.$output(),s)),u["$output="](u.$output().$split(`
`).$last(30).$join(`
`)),q(s["$end_with?"](`
`))&&u["$output="](g(u.$output(),`
`)),a.$write_proc().$call(s)},{$$s:n})),t["$tty="](!1),$.$call(t)},{$$s:c}),w=re.stdin.$read_proc(),re.stdin["$read_proc="](function(i){var a=prompt(c.$output());return a!==null?a+`
`:L})),e.yieldX(h,[])}finally{Z(X,"each",[],function(a,$){return a==null&&(a=L),$==null&&($=L),$.$call(a)}),l=[w],Z(re.stdin,"read_proc=",l),l[l.length-1],l=[""],Z(c,"output=",l),l[l.length-1]}}()}),S(E,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),U(o[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(I,h){var l=$e(I,h,"Silencer"),c=l.$$prototype;return c.collector=c.stderr=L,W(l,"$initialize",function(){var w=this;return re.stderr==null&&(re.stderr=L),w.stderr=re.stderr}),W(l,"$silence",function X(){var w=X.$$p||L,i=this;return X.$$p=null,function(){try{return i.collector=G("StringIO").$new(),re.stderr=i.collector,e.yieldX(w,[])}finally{re.stderr=i.stderr}}()}),W(l,"$warnings",function(){var w=this;return w.collector.$string()})}(o[0],null)}(z[0],z)}(y[0],y),function(A,B,m){var z=$e(A,B,"Binding"),F=[z].concat(m),k=e.$r(F);return W(z,"$irb",function(){try{var o=b("return"),d=this,I=L;return G(H,"IRB").$ensure_loaded("opal-replutils"),I=G(G(H,"IRB"),"Silencer").$new(),Z(G(H,"IRB"),"prepare_console",[],function h(){var l=h.$$s==null?this:h.$$s;return function(){try{var c=b("break");return Z(l,"loop",[],function X(){var w=X.$$s==null?this:X.$$s,i=L,a=L,$=L,n=L,t=L;w.$print(">> "),i=w.$gets(),q(i)||c.$throw(L,X.$$is_lambda),a="",q(G(H,"IRB")["$browser?"]())&&w.$puts(i),q(i["$start_with?"]("ls "))?(a=i["$[]"](ee(3,-1,!1)),$="ls"):C(i,`ls
`)?(a="self",$="ls"):q(i["$start_with?"]("show "))?(a=i["$[]"](ee(5,-1,!1)),$="show"):(a=i,$="inspect"),n=L;do{try{Z(I,"silence",[],function(){return n=e.compile(a,{irb:!0})})}catch(r){if(e.rescue(r,[k("SyntaxError")])){t=r;try{if(q(G(G(H,"IRB"),"LINEBREAKS")["$include?"](t.$message()))){w.$print(".. "),i=w.$gets(),q(i)||o.$throw(L,X.$$is_lambda),q(G(H,"IRB")["$browser?"]())&&w.$puts(i),a=g(a,i);continue}else q(I.$warnings()["$empty?"]())?w.$warn(t.$full_message()):w.$warn(I.$warnings())}finally{e.pop_exception(r)}}else throw r}break}while(!0);return C($,"show")&&(w.$puts(n),o.$throw(L,X.$$is_lambda)),w.$puts(G("REPLUtils").$eval_and_print(n,$,!1,w))},{$$s:l,$$ret:o})}catch(X){if(X===c)return X.$v;throw X}finally{c.is_orphan=!0}}()},{$$s:d})}catch(h){if(h===o)return h.$v;throw h}finally{o.is_orphan=!0}})}("::",null,y),e.irb=function(A){G("Binding").$new(A).$irb()},e.load_parser=function(){e.Opal.IRB.$ensure_loaded("opal-parser")},typeof e.eval>"u"&&(e.eval=function(A){return e.load_parser(),e.eval(A)}),typeof e.compile>"u"&&(e.compile=function(A,B){return e.load_parser(),e.compile(A,B)})};Opal.modules.opal=function(e){var x=e.Object;return e.nil,e.add_stubs("require,autoload"),x.$require("opal/base"),x.$require("opal/mini"),x.$require("corelib/kernel/format"),x.$require("corelib/string/encoding"),x.$autoload("Math","corelib/math"),x.$require("corelib/complex/base"),x.$autoload("Complex","corelib/complex"),x.$require("corelib/rational/base"),x.$autoload("Rational","corelib/rational"),x.$require("corelib/time"),x.$autoload("Struct","corelib/struct"),x.$autoload("Set","corelib/set"),x.$autoload("Dir","corelib/dir"),x.$autoload("File","corelib/file"),x.$require("corelib/process/base"),x.$autoload("Process","corelib/process"),x.$autoload("Random","corelib/random"),x.$require("corelib/unsupported"),x.$require("corelib/binding"),x.$require("corelib/irb")};Opal.modules["js/proxy"]=function(e){var x=e.module,q=e.truthy,j=e.def,S=e.klass,re=e.const_set,J=e.slice,T=e.range,Z=e.send,g=e.to_a,U=e.gvars,$e=e.top,W=[],H=e.nil;return e.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),$e.$require("opal"),$e.$require("native"),function(ee,C){var b=x(ee,"JS"),y=[b].concat(C),L=e.$r(y);return function(G,A){var B=x(G,"Helpers"),m=[B].concat(A),z=e.$r(m);return j(B,"$wrap_result",function(k){return q(k&&typeof k.then=="function")?z("Promise").$new(k):q(typeof k=="object"&&k!==null)?z("Proxy").$new(k):k}),j(B,"$native_methods",function(){var k=this,E=H;return k.native_methods==null&&(k.native_methods=H),k.native_methods=function(){if(q(E=k.native_methods))return E;{let o=k.$to_n();const d=new Set;for(;o!==null;){for(const I of Reflect.ownKeys(o)){const h=I.toString(),l=k.$to_rb_name(h);typeof I!="symbol"&&h!==l&&d.add(l),d.add(h)}o=Object.getPrototypeOf(o)}return Array.from(d)}}()})}(y[0],y),function(G,A,B){var m=S(G,A,"Proxy"),z=[m].concat(B),F=e.$r(z);return m.$include(F("Enumerable")),m.$include(F("Helpers")),m.$attr_accessor("native"),re(z[0],"IRREGULARS",["html","url","uri"]),j(m,"$initialize",function(E){var o=this;return o.native=o.$Native(E)}),j(m,"$method_missing",function k(E,o){var d=k.$$p||H,I,h,l,c=this,X=H,w=H,i=H,a=H,$=H,n=H;return k.$$p=null,I=J(arguments,1),h=I,X=c.$to_js_name(E),q(c["$existing_property?"](X))||q(X["$end_with?"]("="))||c.$raise(F("NoMethodError"),"undefined method `"+E+"` for "+c),q(X["$end_with?"]("="))?(w=X["$[]"](T(0,-2,!1)),l=[w,h.$first()],Z(c.$native(),"[]=",l),l[l.length-1]):(i=c.$native()["$[]"](X),q(typeof i=="function")?(a=h.$dup(),q(d)&&($=function(){let t=Array.prototype.slice.call(arguments);return Z(d,"call",[c.$class().$new(this)].concat(g(t)))},a["$<<"]($)),n=i.apply(c.$to_n(),a.$to_n()),c.$wrap_result(n)):q(typeof i=="object"&&i!==null)?c.$wrap_result(i):i)},-2),j(m,"$to_str",function(){var E=this;return E.$to_n().toString()}),j(m,"$respond_to_missing?",function(E,o){return!0},-2),j(m,"$each",function k(){var E=k.$$p||H,o=this,d=H;return k.$$p=null,q(o["$respond_to?"]("length"))?(d=o.$length(),Z(e.Range.$new(0,d,!0),"each",[],function I(h){var l=I.$$s==null?this:I.$$s;return h==null&&(h=H),e.yield1(E,l["$[]"](h))},{$$s:o})):o.$enum_for("each")}),j(m,"$[]",function(E){var o=this,d=H;return d=o.$native()["$[]"](E),o.$wrap_result(d)}),j(m,"$[]=",function(E,o){var d=this;return d.$native()["$[]="](E,o),d.$wrap_result(d.$native())}),j(m,"$to_n",function(){var E=this;return E.$native().$to_n()}),j(m,"$length",function(){var E=this;return E.$native().$length()}),m.$private(),j(m,"$to_js_name",function(E){return Z(E.$to_s().$split("_").$map(),"with_index",[],function(d,I){return d==null&&(d=H),I==null&&(I=H),q(F("IRREGULARS")["$include?"](d.$gsub("=","").$downcase()))?d.$upcase():q(I["$zero?"]())?d:d.$capitalize()}).$join()}),j(m,"$to_rb_name",function(E){return Z(E.$to_s(),"gsub",[/([A-Z]+)/],function(){var d;return"_"+((d=U["~"])===H?H:d["$[]"](1)).$downcase()}).$sub(/^_/,"")}),j(m,"$existing_property?",function(E){var o=this;return E in o.$to_n()})}(y[0],null,y),function(G,A,B){var m=S(G,A,"Promise"),z=[m].concat(B),F=e.$r(z);return m.$include(F("Helpers")),j(m,"$then",function k(){var E=k.$$p||H,o,d=this,I=H;return k.$$p=null,I=function(h){var l=E.$call(d.$wrap_result(h));return l&&typeof l.then=="function"?l:l&&typeof l.to_n=="function"?l.to_n():l},o=[d.$to_n().then(I)],Z(d,"native=",o),o[o.length-1]}),j(m,"$catch",function k(){var E=k.$$p||H,o,d=this,I=H;return k.$$p=null,I=function(h){var l=E.$call(d.$wrap_result(h));return l&&typeof l.then=="function"?l:l&&typeof l.to_n=="function"?l.to_n():l},o=[d.$to_n().catch(I)],Z(d,"native=",o),o[o.length-1]})}(y[0],L("Proxy"),y)}(W[0],W)};Opal.modules["opal_stimulus/stimulus_controller"]=function(e){var x=e.klass,q=e.const_set,j=e.Opal,S=e.defs,re=e.truthy,J=e.send,T=e.gvars,Z=e.return_val,g=e.thrower,U=e.rb_plus,$e=e.eqeqeq,W=e.def,H=e.top,ee=[],C=e.nil,b=e.$$$;return e.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),H.$require("opal"),H.$require("native"),H.$require("js/proxy"),function(y,L,G){var A=x(y,L,"StimulusController"),B=[A].concat(G),m=e.$r(B),z=A.$$prototype;return z.window=z.document=C,q(B[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),q(B[0],"DEFAULT_GETTERS",["element"]),S(A,"$inherited",function(k){return j.$bridge(k.$stimulus_controller(),k)}),S(A,"$stimulus_controller",function(){var k=this;return k.stimulus_controller==null&&(k.stimulus_controller=C),re(k.stimulus_controller)||(k.stimulus_controller=class extends Controller{}),k.stimulus_controller}),S(A,"$stimulus_name",function(){var k=this;return k.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),S(A,"$method_added",function(k){var E=this;if(re(m("DEFAULT_GETTERS")["$include?"](k)))return C;E.$stimulus_controller().prototype[k]=function(...o){try{var d=o.map(function(I){return I&&typeof I=="object"&&!I.$$class?e.JS.Proxy.$new(I):I});return this["$"+k].apply(this,d)}catch(I){console.error("Uncaught",I)}}}),S(A,"$to_ruby_name",function(k){return J(k.$to_s(),"gsub",[/([A-Z]+)/],function(){var o;return"_"+((o=T["~"])===C?C:o["$[]"](1)).$downcase()}).$sub(/^_/,"")}),S(A,"$register_all!",function(){try{var k=g("return"),E=this;return J(E.$subclasses(),"each",[],function o(d){return d==null&&(d=C),J(d,"define_method",["dummy"],Z(C)),re(application.controllers["$include?"](d.$stimulus_name()))&&k.$throw(C,o.$$is_lambda),application.register(d.$stimulus_name(),d.$stimulus_controller())},{$$ret:k})}catch(o){if(o===k)return o.$v;throw o}finally{k.is_orphan=!0}}),S(A,"$targets=",function(k){var E=this;return k==null&&(k=[]),E.$stimulus_controller().targets=k,J(k,"each",[],function o(d){var I=o.$$s==null?this:o.$$s,h=C,l=C,c=C,X=C,w=C,i=C;d==null&&(d=C),h=d.$to_s(),l=I.$to_ruby_name(d),J(I,"define_method",[U(l,"_target")],function(){return b(m("JS"),"Proxy").$new(this[U(h,"Target")])}),J(I,"define_method",[U(l,"_targets")],function(){return J(this[U(h,"Targets")],"map",[],function(n){return n==null&&(n=C),b(m("JS"),"Proxy").$new(n)})}),J(I,"define_method",[U(U("has_",l),"_target")],function(){return this[U(U("has",h.$capitalize()),"Target")]}),c=U(l,"_target_connected"),X=U(h,"TargetConnected"),I.$stimulus_controller().prototype[X]=function(){if(this["$respond_to?"]&&this["$respond_to?"](c))return this["$"+c]()},w=U(l,"_target_disconnected"),i=U(h,"TargetDisconnected"),I.$stimulus_controller().prototype[i]=function(){if(this["$respond_to?"]&&this["$respond_to?"](w))return this["$"+w]()}},{$$s:E})},-1),S(A,"$outlets=",function(k){var E=this;return k==null&&(k=[]),E.$stimulus_controller().outlets=k,J(k,"each",[],function o(d){var I=o.$$s==null?this:o.$$s,h=C,l=C,c=C,X=C,w=C,i=C;d==null&&(d=C),h=d.$to_s(),l=I.$to_ruby_name(d),J(I,"define_method",[U(l,"_outlet")],function(){return this[U(h,"Outlet")]}),J(I,"define_method",[U(l,"_outlets")],function(){return this[U(h,"Outlets")]}),J(I,"define_method",[U(U("has_",l),"_outlet")],function(){return this[U(U("has",h.$capitalize()),"Outlet")]}),c=U(l,"_outlet_connected"),X=U(h,"OutletConnected"),I.$stimulus_controller().prototype[X]=function(){if(this["$respond_to?"]&&this["$respond_to?"](c))return this["$"+c]()},w=U(l,"_outlet_disconnected"),i=U(h,"OutletDisconnected"),I.$stimulus_controller().prototype[i]=function(){if(this["$respond_to?"]&&this["$respond_to?"](w))return this["$"+w]()}},{$$s:E})},-1),S(A,"$values=",function(k){var E=this,o=C;return k==null&&(k=new Map),o=new Map,J(k,"each",[],function d(I,h){var l=d.$$s==null?this:d.$$s,c=C,X=C,w=C,i=C;I==null&&(I=C),h==null&&(h=C),I=l.$to_ruby_name(I),c=$e("string",X=h)?String:$e("number",X)?Number:$e("boolean",X)?Boolean:$e("array",X)?Array:$e("object",X)?Object:l.$raise(m("ArgumentError"),"Unsupported value type: "+h+", please use :string, :number, :boolean, :array, or :object"),o["$[]="](I,c),l.$stimulus_controller().values=o.$to_n(),J(l,"define_method",[U(I,"_value")],function a(){var $=a.$$s==null?this:a.$$s;return $.$Native(this[U(I,"Value")])},{$$s:l}),J(l,"define_method",[U(I,"_value=")],function a($){var n=a.$$s==null?this:a.$$s;return $==null&&($=C),n.$Native(this[U(I,"Value")]=$)},{$$s:l}),J(l,"define_method",["has_"+I],function(){return this[U(U("has",I.$to_s().$capitalize()),"Value")]}),w=""+I+"_value_changed",i=""+I+"ValueChanged",l.$stimulus_controller().prototype[i]=function(a,$){if(h["$=="]("object")&&(a=JSON.stringify(a),$=JSON.stringify($)),this["$respond_to?"]&&this["$respond_to?"](w))return this["$"+w](a,$)}},{$$s:E})},-1),S(A,"$classes=",function(k){var E=this;return k==null&&(k=[]),E.$stimulus_controller().classes=k,J(k,"each",[],function o(d){var I=o.$$s==null?this:o.$$s,h=C,l=C;return d==null&&(d=C),h=d.$to_s(),l=I.$to_ruby_name(d),J(I,"define_method",[""+l+"_class"],function(){return this[U(h,"Class")]}),J(I,"define_method",[""+l+"_classes"],function(){return this[U(h,"Classes")]}),J(I,"define_method",["has_"+l+"_class"],function(){return this[U(U("has",h.$capitalize()),"Class")]})},{$$s:E})},-1),W(A,"$element",function(){return b(m("JS"),"Proxy").$new(this.element)}),W(A,"$window",function(){var k=this,E=C;return T.$==null&&(T.$=C),k.window=re(E=k.window)?E:b(m("JS"),"Proxy").$new(T.$.$window())}),W(A,"$document",function(){var k=this,E=C;return T.$==null&&(T.$=C),k.document=re(E=k.document)?E:b(m("JS"),"Proxy").$new(T.$.$document())})}(ee[0],Controller,ee)};Opal.modules["opal_vite/concerns/v1/stimulus_helpers"]=function(e){var x=e.module,q=e.def,j=e.truthy,S=e.eqeq,re=e.slice,J=e.send,T=e.ensure_kwargs,Z=e.get_kwarg,g=e.hash_get,U=e.rb_plus,$e=e.range,W=e.const_set,H=[],ee=e.$r(H),C=e.nil,b=e.$$$;return e.add_stubs("camelize,has_target?,target_set_value,target_set_html,set_target_style,get_target_style,==,show_target,hide_target,call,body_style,to_n,storage_get,is_a?,parse_int,event_data,js_timestamp,is_nan?,parse_float,to_s,empty?,map,respond_to?,fetch_json_promise,fetch_json_safe,js_then,js_catch,console_error,private,include?,+,upcase,[],downcase,split,join,to_proc,first"),function(y,L){var G=x(y,"OpalVite"),A=[G].concat(L);return function(B,m){var z=x(B,"Concerns"),F=[z].concat(m);return function(k,E){var o=x(k,"V1"),d=[o].concat(E);return function(I,h){var l=x(I,"StimulusHelpers"),c=[l].concat(h),X=e.$r(c);return q(l,"$has_target?",function(i){var a=this,$=C;return $="has"+a.$camelize(i)+"Target",this[$]}),q(l,"$get_target",function(i){var a=this,$=C;return j(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$]):C}),q(l,"$get_targets",function(i){var a=this,$=C;return $=""+a.$camelize(i,!1)+"Targets",Array.from(this[$]||[])}),q(l,"$target_value",function(i){var a=this,$=C;return j(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].value):C}),q(l,"$target_set_value",function(i,a){var $=this,n=C;return j($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].value=a):C}),q(l,"$target_html",function(i){var a=this,$=C;return j(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].innerHTML):C}),q(l,"$target_set_html",function(i,a){var $=this,n=C;return j($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].innerHTML=a):C}),q(l,"$target_text",function(i){var a=this,$=C;return j(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].textContent):C}),q(l,"$target_set_text",function(i,a){var $=this,n=C;return j($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].textContent=a):C}),q(l,"$target_data",function(i,a){var $=this,n=C;return j($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].getAttribute("data-"+a)):C}),q(l,"$target_set_data",function(i,a,$){var n=this,t=C;return j(n["$has_target?"](i))?(t=""+n.$camelize(i,!1)+"Target",this[t].setAttribute("data-"+a,$)):C}),q(l,"$target_clear",function(i){var a=this;return a.$target_set_value(i,"")}),q(l,"$target_clear_html",function(i){var a=this;return a.$target_set_html(i,"")}),q(l,"$set_target_style",function(i,a,$){var n=this,t=C;return j(n["$has_target?"](i))?(t=""+n.$camelize(i,!1)+"Target",this[t].style[a]=$):C}),q(l,"$get_target_style",function(i,a){var $=this,n=C;return j($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].style[a]):C}),q(l,"$show_target",function(i){var a=this;return a.$set_target_style(i,"display","")}),q(l,"$hide_target",function(i){var a=this;return a.$set_target_style(i,"display","none")}),q(l,"$toggle_target_visibility",function(i){var a=this,$=C;return $=a.$get_target_style(i,"display"),S($,"none")?a.$show_target(i):a.$hide_target(i)}),q(l,"$add_target_class",function(i,a){var $=this,n=C;return j($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.add(a)):C}),q(l,"$remove_target_class",function(i,a){var $=this,n=C;return j($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.remove(a)):C}),q(l,"$toggle_target_class",function(i,a){var $=this,n=C;return j($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.toggle(a)):C}),q(l,"$has_target_class?",function(i,a){var $=this,n=C;return j($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.contains(a)):!1}),q(l,"$js_timestamp",function(){return Date.now()}),q(l,"$js_iso_date",function(){return new Date().toISOString()}),q(l,"$js_date",function(i){return i==null&&(i=C),j(i)?new Date(i):new Date},-1),q(l,"$js_regexp",function(i,a){return a==null&&(a=""),new RegExp(i,a)},-2),q(l,"$js_regexp_test",function(i,a,$){return $==null&&($=""),new RegExp(i,$).test(a)},-3),q(l,"$set_timeout",function w(i){var a=w.$$p||C;return w.$$p=null,setTimeout(function(){a.$call()},i)}),q(l,"$set_interval",function w(i){var a=w.$$p||C;return w.$$p=null,setInterval(function(){a.$call()},i)}),q(l,"$clear_timeout",function(i){return clearTimeout(i)}),q(l,"$clear_interval",function(i){return clearInterval(i)}),q(l,"$body_style",function(i,a){return document.body.style[i]=a}),q(l,"$lock_body_scroll",function(){var i=this;return i.$body_style("overflow","hidden")}),q(l,"$unlock_body_scroll",function(){var i=this;return i.$body_style("overflow","")}),q(l,"$js_array",function(){return[]}),q(l,"$js_array_push",function(i,a){return i.push(a.$to_n())}),q(l,"$js_array_length",function(i){return i.length}),q(l,"$js_array_at",function(i,a){return i[a]}),q(l,"$storage_get",function(i){return localStorage.getItem(i)}),q(l,"$storage_set",function(i,a){return localStorage.setItem(i,a)}),q(l,"$storage_remove",function(i){return localStorage.removeItem(i)}),q(l,"$storage_get_json",function(i,a){var $=this,n=C;return a==null&&(a=C),n=$.$storage_get(i),j(n===null)?a:JSON.parse(n)},-2),q(l,"$storage_set_json",function(i,a){return localStorage.setItem(i,JSON.stringify(a.$to_n()))}),q(l,"$dispatch_window_event",function(i,a){var $=C;a==null&&(a=new Map),$=j(a["$is_a?"](X("Hash")))?a.$to_n():a;const n=new CustomEvent(i,{detail:$});window.dispatchEvent(n)},-2),q(l,"$dispatch_event",function(i,a){var $=C;a==null&&(a=new Map),$=j(a["$is_a?"](X("Hash")))?a.$to_n():a;const n=new CustomEvent(i,{detail:$});this.element.dispatchEvent(n)},-2),q(l,"$on_window_event",function w(i){var a=w.$$p||C;return w.$$p=null,window.addEventListener(i,a)}),q(l,"$off_window_event",function(i,a){return window.removeEventListener(i,a)}),q(l,"$on_document_event",function w(i){var a=w.$$p||C;return w.$$p=null,document.addEventListener(i,a)}),q(l,"$on_dom_ready",function w(){var i=w.$$p||C;return w.$$p=null,document.addEventListener("DOMContentLoaded",i)}),q(l,"$on_element_event",function w(i,a){var $=w.$$p||C;return w.$$p=null,i.addEventListener(a,$)}),q(l,"$off_element_event",function(i,a,$){return i.removeEventListener(a,$)}),q(l,"$on_controller_event",function w(i){var a=w.$$p||C;w.$$p=null;const $=a;this.element.addEventListener(i,function(n){$(n)})}),q(l,"$event_target",function(){return event.currentTarget}),q(l,"$event_data",function(i){return event.currentTarget.getAttribute("data-"+i)}),q(l,"$event_data_int",function(i){var a=this;return a.$parse_int(a.$event_data(i))}),q(l,"$prevent_default",function(){return event.preventDefault()}),q(l,"$event_key",function(){return event.key}),q(l,"$add_class",function(i,a){return i.classList.add(a)}),q(l,"$remove_class",function(i,a){return i.classList.remove(a)}),q(l,"$toggle_class",function(i,a){return i.classList.toggle(a)}),q(l,"$has_class?",function(i,a){return i.classList.contains(a)}),q(l,"$set_attr",function(i,a,$){return i.setAttribute(a,$)}),q(l,"$get_attr",function(i,a){return i.getAttribute(a)}),q(l,"$remove_attr",function(i,a){return i.removeAttribute(a)}),q(l,"$set_style",function(i,a,$){return i.style[a]=$}),q(l,"$set_html",function(i,a){return i.innerHTML=a}),q(l,"$set_text",function(i,a){return i.textContent=a}),q(l,"$get_value",function(i){return i.value}),q(l,"$set_value",function(i,a){return i.value=a}),q(l,"$focus",function(i){return i.focus()}),q(l,"$has_attr?",function(i,a){return i.hasAttribute(a)}),q(l,"$create_element",function(i){return document.createElement(i)}),q(l,"$append_child",function(i,a){return i.appendChild(a)}),q(l,"$remove_element",function(i){return i.remove()}),q(l,"$next_sibling",function(i){return i.nextElementSibling}),q(l,"$prev_sibling",function(i){return i.previousElementSibling}),q(l,"$parent",function(i){return i.parentElement}),q(l,"$query",function(i){return document.querySelector(i)}),q(l,"$query_all",function(i){return Array.from(document.querySelectorAll(i))}),q(l,"$query_element",function(i){return this.element.querySelector(i)}),q(l,"$query_all_element",function(i){return Array.from(this.element.querySelectorAll(i))}),q(l,"$doc_root",function(){return document.documentElement}),q(l,"$set_root_attr",function(i,a){return document.documentElement.setAttribute(i,a)}),q(l,"$get_root_attr",function(i){return document.documentElement.getAttribute(i)}),q(l,"$clone_template",function(i){var a=this,$=C;return $=""+a.$camelize(i,!1)+"Target",this[$].content.cloneNode(!0)}),q(l,"$template_first_child",function(i){return i.firstElementChild}),q(l,"$element_add_class",function(i){return this.element.classList.add(i)}),q(l,"$element_remove_class",function(i){return this.element.classList.remove(i)}),q(l,"$element_toggle_class",function(i){return this.element.classList.toggle(i)}),q(l,"$generate_id",function(){var i=this;return i.$js_timestamp()}),q(l,"$target_focus",function(i){var a=this,$=C;return j(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].focus()):C}),q(l,"$target_blur",function(i){var a=this,$=C;return j(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].blur()):C}),q(l,"$parse_int",function(i,a){return a==null&&(a=10),parseInt(i,a)},-2),q(l,"$parse_float",function(i){return parseFloat(i)}),q(l,"$is_nan?",function(i){return Number.isNaN(i)}),q(l,"$parse_int_or",function(i,a){var $=this,n=C;return a==null&&(a=0),n=$.$parse_int(i),j($["$is_nan?"](n))?a:n},-2),q(l,"$parse_float_or",function(i,a){var $=this,n=C;return a==null&&(a=0),n=$.$parse_float(i),j($["$is_nan?"](n))?a:n},-2),q(l,"$js_prop",function(i){return this[i.$to_s()]}),q(l,"$js_set_prop",function(i,a){return this[i.$to_s()]=a}),q(l,"$js_has_prop?",function(i){return!!this[i.$to_s()]}),q(l,"$js_call",function(i,a){var $,n,t=C;return $=re(arguments,1),n=$,j(n["$empty?"]())?this[i.$to_s()]():(t=J(n,"map",[],function(s){return s==null&&(s=C),j(s["$respond_to?"]("to_n"))?s.$to_n():s}),this[i.$to_s()].apply(this,t))},-2),q(l,"$js_call_on",function(i,a,$){var n,t,r=C;return n=re(arguments,2),t=n,j(t["$empty?"]())?i[a.$to_s()]():(r=J(t,"map",[],function(u){return u==null&&(u=C),j(u["$respond_to?"]("to_n"))?u.$to_n():u}),i[a.$to_s()].apply(i,r))},-3),q(l,"$js_get",function(i,a){return i[a.$to_s()]}),q(l,"$js_set",function(i,a,$){return i[a.$to_s()]=$}),q(l,"$json_parse",function(i){return JSON.parse(i)}),q(l,"$json_stringify",function(i){var a=C;return a=j(i["$respond_to?"]("to_n"))?i.$to_n():i,JSON.stringify(a)}),q(l,"$console_log",function(i){var a,$;return a=re(arguments),$=a,console.log.apply(console,$)},-1),q(l,"$console_warn",function(i){var a,$;return a=re(arguments),$=a,console.warn.apply(console,$)},-1),q(l,"$console_error",function(i){var a,$;return a=re(arguments),$=a,console.error.apply(console,$)},-1),q(l,"$js_string_char_at",function(i,a){return i.charAt(a)}),q(l,"$js_substring",function(i,a,$){return $==null&&($=C),j($)?i.substring(a,$):i.substring(a)},-3),q(l,"$js_split",function(i,a){return i.split(a)}),q(l,"$js_trim",function(i){return i.trim()}),q(l,"$js_includes?",function(i,a){return i.includes(a)}),q(l,"$js_equals?",function(i,a){return i===a}),q(l,"$js_loose_equals?",function(i,a){return i==a}),q(l,"$js_random",function(){return Math.random()}),q(l,"$js_min",function(i,a){return Math.min(i,a)}),q(l,"$js_max",function(i,a){return Math.max(i,a)}),q(l,"$js_abs",function(i){return Math.abs(i)}),q(l,"$js_round",function(i){return Math.round(i)}),q(l,"$js_ceil",function(i){return Math.ceil(i)}),q(l,"$js_to_fixed",function(i,a){return i.toFixed(a)}),q(l,"$random_int",function(i){return Math.floor(Math.random()*i)}),q(l,"$js_floor",function(i){return Math.floor(i)}),q(l,"$js_global_exists?",function(i){return typeof window[i]<"u"}),q(l,"$js_global",function(i){return window[i]}),q(l,"$js_new",function(i,a){var $,n,t=C;return $=re(arguments,1),n=$,j(n["$empty?"]())?new i:(t=J(n,"map",[],function(s){return s==null&&(s=C),s!=null&&typeof s.$to_n=="function"?s.$to_n():s}),Reflect.construct(i,t))},-2),q(l,"$js_define_method",function w(i){var a=w.$$p||C;return w.$$p=null,this[i.$to_s()]=a}),q(l,"$js_define_method_on",function w(i,a){var $=w.$$p||C;return w.$$p=null,i[a.$to_s()]=$}),q(l,"$js_length",function(i){return i.length}),q(l,"$js_map",function w(i){var a=w.$$p||C;return w.$$p=null,i.map(a)}),q(l,"$js_filter",function w(i){var a=w.$$p||C;return w.$$p=null,i.filter(a)}),q(l,"$js_reduce",function w(i,a){var $=w.$$p||C;return w.$$p=null,i.reduce($,a)}),q(l,"$js_each",function w(i){var a=w.$$p||C;return w.$$p=null,i.forEach(a)}),q(l,"$js_slice",function(i,a,$){return $==null&&($=C),j($)?i.slice(a,$):i.slice(a)},-3),q(l,"$js_object",function(){return{}}),q(l,"$js_keys",function(i){return Object.keys(i)}),q(l,"$js_values",function(i){return Object.values(i)}),q(l,"$js_entries",function(i){return Object.entries(i)}),q(l,"$js_unique_count",function(i){return new Set(i).size}),q(l,"$js_fetch",function(i){return fetch(i)}),q(l,"$fetch_json",function w(i){var a=w.$$p||C;w.$$p=null,fetch(i).then($=>$.json()).then($=>a.$call($)).catch($=>console.error("Fetch error:",$))}),q(l,"$fetch_json_promise",function(i){return fetch(i).then(a=>a.json())}),q(l,"$fetch_json_safe",function(i){return fetch(i).then(function(a){if(!a.ok)throw new Error("Network response was not ok: "+a.status);return a.json()})}),q(l,"$fetch_all_json",function(i){var a=this,$=C;return $=J(i,"map",[],function n(t){var r=n.$$s==null?this:n.$$s;return t==null&&(t=C),r.$fetch_json_promise(t)},{$$s:a}),Promise.all($)}),q(l,"$fetch_json_with_handlers",function(i,a){var $,n,t=this,r=C;return a=T(a),$=Z(a,"on_success"),n=g(a,"on_error"),n==null&&(n=C),r=t.$fetch_json_safe(i),r=J(t,"js_then",[r],function(u){return u==null&&(u=C),$.$call(u)}),j(n)?J(t,"js_catch",[r],function(u){return u==null&&(u=C),n.$call(u)}):J(t,"js_catch",[r],function s(u){var f=s.$$s==null?this:s.$$s;return u==null&&(u=C),f.$console_error("Fetch error:",u)},{$$s:t})}),q(l,"$promise_all",function(i){return Promise.all(i)}),q(l,"$promise_race",function(i){return Promise.race(i)}),q(l,"$promise_resolve",function(i){var a=C;return a=j(i["$respond_to?"]("to_n"))?i.$to_n():i,Promise.resolve(a)}),q(l,"$promise_reject",function(i){return Promise.reject(i)}),q(l,"$js_then",function w(i){var a=w.$$p||C;return w.$$p=null,i.then(a)}),q(l,"$js_catch",function w(i){var a=w.$$p||C;return w.$$p=null,i.catch(a)}),q(l,"$js_finally",function w(i){var a=w.$$p||C;return w.$$p=null,i.finally(a)}),l.$private(),q(l,"$camelize",function(i,a){var $=C,n=C;return a==null&&(a=!0),$=i.$to_s(),j($["$include?"]("_"))?(n=$.$split("_"),j(a)?J(n,"map",[],"capitalize".$to_proc()).$join():U([n.$first()],J(n["$[]"]($e(1,-1,!1)),"map",[],"capitalize".$to_proc())).$join()):j(a)?U($["$[]"](0).$upcase(),$["$[]"]($e(1,-1,!1)).$to_s()):U($["$[]"](0).$downcase(),$["$[]"]($e(1,-1,!1)).$to_s())},-2)}(d[0],d)}(F[0],F)}(A[0],A)}(H[0],H),W(H[0],"StimulusHelpers",b(b(b(ee("OpalVite"),"Concerns"),"V1"),"StimulusHelpers"))};Opal.modules["opal_vite/concerns/v1/storable"]=function(e){var x=e.module,q=e.truthy,j=e.def,S=e.const_set,re=[],J=e.$r(re),T=e.nil,Z=e.$$$;return e.add_stubs("to_n"),function(g,U){var $e=x(g,"OpalVite"),W=[$e].concat(U);return function(H,ee){var C=x(H,"Concerns"),b=[C].concat(ee);return function(y,L){var G=x(y,"V1"),A=[G].concat(L);return function(B,m){var z=x(B,"Storable"),F=[z].concat(m),k=e.$r(F);return j(z,"$storage_get",function(o){var d=T;if(d=localStorage.getItem(o),!q(d))return T;try{return JSON.parse(d)}catch(I){if(e.rescue(I,[k("StandardError")]))try{return T}finally{e.pop_exception(I)}else throw I}}),j(z,"$storage_set",function(o,d){var I=T;return I=JSON.stringify(d.$to_n()),localStorage.setItem(o,I)}),j(z,"$storage_remove",function(o){return localStorage.removeItem(o)})}(A[0],A)}(b[0],b)}(W[0],W)}(re[0],re),S(re[0],"Storable",Z(Z(Z(J("OpalVite"),"Concerns"),"V1"),"Storable"))};Opal.modules["data/translations"]=function(e){var x=e.module,q=e.const_set,j=e.defs,S=e.truthy,re=[],J=e.nil;return e.add_stubs("freeze,[],include?"),function(T,Z){var g=x(T,"Translations"),U=[g].concat(Z),$e=e.$r(U);return q(U[0],"SUPPORTED_LOCALES",["en","ja","es","fr","de"].$freeze()),q(U[0],"DEFAULT_LOCALE","en".$freeze()),j(g,"$data",function(){}),q(U[0],"SUCCESS_MESSAGES",new Map([["en","Message sent successfully!"],["ja",""],["es","Mensaje enviado con xito!"],["fr","Message envoy avec succs !"],["de","Nachricht erfolgreich gesendet!"]]).$freeze()),j(g,"$success_message",function(H){var ee=J;return S(ee=$e("SUCCESS_MESSAGES")["$[]"](H))?ee:$e("SUCCESS_MESSAGES")["$[]"]($e("DEFAULT_LOCALE"))}),j(g,"$supported?",function(H){return $e("SUPPORTED_LOCALES")["$include?"](H)})}(re[0],re)};Opal.modules["services/i18n_service"]=function(e){var x=e.klass,q=e.const_set,j=e.truthy,S=e.def,re=e.return_ivar,J=e.eqeqeq,T=e.eqeq,Z=[],g=e.nil,U=e.$$$;return e.add_stubs("include,freeze,attr_reader,data,load_saved_locale,puts,supported?,save_locale,===,js_get,to_sym,==,js_global,js_new,to_n,js_call_on,success_message,private,storage_get,storage_set"),function($e,W,H){var ee=x($e,W,"I18nService"),C=[ee].concat(H),b=e.$r(C),y=ee.$$prototype;return y.current_locale=y.translations=g,ee.$include(b("StimulusHelpers")),q(C[0],"STORAGE_KEY","preferredLocale".$freeze()),ee.$attr_reader("translations"),S(ee,"$initialize",function(){var G=this,A=g;return G.translations=b("Translations").$data(),G.current_locale=j(A=G.$load_saved_locale())?A:U(b("Translations"),"DEFAULT_LOCALE"),G.$puts("I18nService initialized with locale: "+G.current_locale)}),S(ee,"$current_locale",re("current_locale")),S(ee,"$current_locale=",function(G){var A=this;return j(b("Translations")["$supported?"](G))?(A.current_locale=G,A.$save_locale(G)):g}),S(ee,"$t",function(){var G=this,A=g;return!j(G.translations)||(A=G.translations[G.current_locale],j(A===void 0))?g:A}),S(ee,"$valid_locale?",function(G){var A=this;return j(A.translations)?A.translations[G]!==void 0:!1}),S(ee,"$pluralize",function(G,A){var B=this,m=g,z=g,F=g;return m=J(0,z=A)?"zero":J(1,z)?"one":"other",F=j(z=B.$js_get(G,m.$to_sym()))?z:B.$js_get(G,"other"),F.replace("{count}",A)}),S(ee,"$format_currency",function(G){var A=this,B=g,m=g,z=g,F=g;B=T(A.current_locale,"ja")?"JPY":"USD";try{return m=A.$js_global("Intl"),z=A.$js_get(m,"NumberFormat"),F=A.$js_new(z,A.current_locale,new Map([["style","currency"],["currency",B]]).$to_n()),A.$js_call_on(F,"format",G)}catch(k){if(e.rescue(k,[b("StandardError")]))try{return"$"+G.toFixed(2)}finally{e.pop_exception(k)}else throw k}}),S(ee,"$format_date",function(G){var A=this,B=g,m=g,z=g,F=g;try{return B=A.$js_global("Intl"),m=A.$js_get(B,"DateTimeFormat"),z=new Map([["year","numeric"],["month","long"],["day","numeric"]]).$to_n(),F=A.$js_new(m,A.current_locale,z),A.$js_call_on(F,"format",G)}catch(k){if(e.rescue(k,[b("StandardError")]))try{return G.toLocaleDateString()}finally{e.pop_exception(k)}else throw k}}),S(ee,"$format_time",function(G){var A=this,B=g,m=g,z=g,F=g;try{return B=A.$js_global("Intl"),m=A.$js_get(B,"DateTimeFormat"),z=new Map([["hour","numeric"],["minute","numeric"],["hour12",A.current_locale["$=="]("en")]]).$to_n(),F=A.$js_new(m,A.current_locale,z),A.$js_call_on(F,"format",G)}catch(k){if(e.rescue(k,[b("StandardError")]))try{return G.toLocaleTimeString()}finally{e.pop_exception(k)}else throw k}}),S(ee,"$success_message",function(){var G=this;return b("Translations").$success_message(G.current_locale)}),ee.$private(),S(ee,"$load_saved_locale",function(){var G=this,A=g;return A=G.$storage_get(b("STORAGE_KEY")),j(A)&&j(b("Translations")["$supported?"](A))?A:g}),S(ee,"$save_locale",function(G){var A=this;return A.$storage_set(b("STORAGE_KEY"),G)})}(Z[0],null,Z)};Opal.modules["controllers/i18n_controller"]=function(e){var x=e.klass,q=e.def,j=e.truthy,S=e.send,re=[],J=e.$r(re),T=e.nil;return e.add_stubs("include,targets=,values=,new,js_set_prop,current_locale,update_active_button,update_translations,event_target,js_get,valid_locale?,current_locale=,success_message,private,js_prop,js_each,js_call_on,t,update_text_targets,update_placeholders,update_pluralized_messages,update_prices,update_date_time,set_root_attr,has_target?,target_set_text,target_set_html,get_target,js_set,pluralize,format_currency,js_date,format_date,format_time"),function(Z,g,U){var $e=x(Z,g,"I18nController"),W=[$e].concat(U),H=e.$r(W),ee=$e.$$prototype;return ee.i18n_service=T,$e.$include(H("StimulusHelpers")),$e["$targets="](e.large_array_unpack("title,subtitle,languageLabel,langBtn,welcomeTitle,welcomeMessage,productsTitle,product1Name,product1Desc,product1Price,product1Stock,product2Name,product2Desc,product2Price,product2Stock,product3Name,product3Desc,product3Price,product3Stock,notificationsTitle,notification1,notification2,notification3,dateTimeTitle,currentDateLabel,currentDate,currentTimeLabel,currentTime,formTitle,nameLabel,nameInput,emailLabel,emailInput,messageLabel,messageInput,submitBtn,featuresTitle,feature1Title,feature1Desc,feature2Title,feature2Desc,feature3Title,feature3Desc,feature4Title,feature4Desc,feature5Title,feature5Desc,feature6Title,feature6Desc,footerText")),$e["$values="](new Map([["current_locale","string"]])),q($e,"$connect",function(){var b=this;return b.i18n_service=H("I18nService").$new(),b.$js_set_prop("currentLocaleValue",b.i18n_service.$current_locale()),b.$update_active_button(),b.$update_translations()}),q($e,"$switch_language",function(){var b=this,y=T,L=T,G=T;return y=b.$event_target(),L=b.$js_get(y,"dataset"),G=b.$js_get(L,"locale"),j(b.i18n_service["$valid_locale?"](G))?(b.i18n_service["$current_locale="](G),b.$js_set_prop("currentLocaleValue",G),b.$update_active_button(),b.$update_translations()):T}),q($e,"$handle_submit",function(){var b=this,y=T;return event.preventDefault(),y=b.i18n_service.$success_message(),alert(y)}),$e.$private(),q($e,"$update_active_button",function(){var b=this,y=T,L=T;return y=b.$js_prop("langBtnTargets"),L=b.i18n_service.$current_locale(),S(b,"js_each",[y],function G(A){var B=G.$$s==null?this:G.$$s,m=T,z=T;return A==null&&(A=T),m=B.$js_get(B.$js_get(A,"dataset"),"locale"),z=B.$js_get(A,"classList"),j(m===L)?B.$js_call_on(z,"add","active"):B.$js_call_on(z,"remove","active")},{$$s:b})}),q($e,"$update_translations",function(){var b=this,y=T;return y=b.i18n_service.$t(),j(y)?(b.$update_text_targets(y),b.$update_placeholders(y),b.$update_pluralized_messages(y),b.$update_prices(),b.$update_date_time(),b.$set_root_attr("lang",b.i18n_service.$current_locale())):T}),q($e,"$update_text_targets",function(b){var y=this;return j(y["$has_target?"]("title"))&&y.$target_set_text("title",y.$js_get(b,"title")),j(y["$has_target?"]("subtitle"))&&y.$target_set_text("subtitle",y.$js_get(b,"subtitle")),j(y["$has_target?"]("languageLabel"))&&y.$target_set_text("languageLabel",y.$js_get(b,"languageLabel")),j(y["$has_target?"]("welcomeTitle"))&&y.$target_set_text("welcomeTitle",y.$js_get(b,"welcomeTitle")),j(y["$has_target?"]("welcomeMessage"))&&y.$target_set_text("welcomeMessage",y.$js_get(b,"welcomeMessage")),j(y["$has_target?"]("productsTitle"))&&y.$target_set_text("productsTitle",y.$js_get(b,"productsTitle")),j(y["$has_target?"]("product1Name"))&&y.$target_set_text("product1Name",y.$js_get(b,"product1Name")),j(y["$has_target?"]("product1Desc"))&&y.$target_set_text("product1Desc",y.$js_get(b,"product1Desc")),j(y["$has_target?"]("product2Name"))&&y.$target_set_text("product2Name",y.$js_get(b,"product2Name")),j(y["$has_target?"]("product2Desc"))&&y.$target_set_text("product2Desc",y.$js_get(b,"product2Desc")),j(y["$has_target?"]("product3Name"))&&y.$target_set_text("product3Name",y.$js_get(b,"product3Name")),j(y["$has_target?"]("product3Desc"))&&y.$target_set_text("product3Desc",y.$js_get(b,"product3Desc")),j(y["$has_target?"]("notificationsTitle"))&&y.$target_set_text("notificationsTitle",y.$js_get(b,"notificationsTitle")),j(y["$has_target?"]("dateTimeTitle"))&&y.$target_set_text("dateTimeTitle",y.$js_get(b,"dateTimeTitle")),j(y["$has_target?"]("currentDateLabel"))&&y.$target_set_text("currentDateLabel",y.$js_get(b,"currentDateLabel")),j(y["$has_target?"]("currentTimeLabel"))&&y.$target_set_text("currentTimeLabel",y.$js_get(b,"currentTimeLabel")),j(y["$has_target?"]("formTitle"))&&y.$target_set_text("formTitle",y.$js_get(b,"formTitle")),j(y["$has_target?"]("nameLabel"))&&y.$target_set_text("nameLabel",y.$js_get(b,"nameLabel")),j(y["$has_target?"]("emailLabel"))&&y.$target_set_text("emailLabel",y.$js_get(b,"emailLabel")),j(y["$has_target?"]("messageLabel"))&&y.$target_set_text("messageLabel",y.$js_get(b,"messageLabel")),j(y["$has_target?"]("submitBtn"))&&y.$target_set_text("submitBtn",y.$js_get(b,"submitBtn")),j(y["$has_target?"]("featuresTitle"))&&y.$target_set_text("featuresTitle",y.$js_get(b,"featuresTitle")),j(y["$has_target?"]("feature1Title"))&&y.$target_set_text("feature1Title",y.$js_get(b,"feature1Title")),j(y["$has_target?"]("feature1Desc"))&&y.$target_set_text("feature1Desc",y.$js_get(b,"feature1Desc")),j(y["$has_target?"]("feature2Title"))&&y.$target_set_text("feature2Title",y.$js_get(b,"feature2Title")),j(y["$has_target?"]("feature2Desc"))&&y.$target_set_text("feature2Desc",y.$js_get(b,"feature2Desc")),j(y["$has_target?"]("feature3Title"))&&y.$target_set_text("feature3Title",y.$js_get(b,"feature3Title")),j(y["$has_target?"]("feature3Desc"))&&y.$target_set_text("feature3Desc",y.$js_get(b,"feature3Desc")),j(y["$has_target?"]("feature4Title"))&&y.$target_set_text("feature4Title",y.$js_get(b,"feature4Title")),j(y["$has_target?"]("feature4Desc"))&&y.$target_set_text("feature4Desc",y.$js_get(b,"feature4Desc")),j(y["$has_target?"]("feature5Title"))&&y.$target_set_text("feature5Title",y.$js_get(b,"feature5Title")),j(y["$has_target?"]("feature5Desc"))&&y.$target_set_text("feature5Desc",y.$js_get(b,"feature5Desc")),j(y["$has_target?"]("feature6Title"))&&y.$target_set_text("feature6Title",y.$js_get(b,"feature6Title")),j(y["$has_target?"]("feature6Desc"))&&y.$target_set_text("feature6Desc",y.$js_get(b,"feature6Desc")),j(y["$has_target?"]("footerText"))?y.$target_set_html("footerText",y.$js_get(b,"footerText")):T}),q($e,"$update_placeholders",function(b){var y=this,L=T,G=T,A=T,B=T;return L=y.$js_get(b,"placeholders"),j(L)?(j(y["$has_target?"]("nameInput"))&&(G=y.$get_target("nameInput"),y.$js_set(G,"placeholder",y.$js_get(L,"name"))),j(y["$has_target?"]("emailInput"))&&(A=y.$get_target("emailInput"),y.$js_set(A,"placeholder",y.$js_get(L,"email"))),j(y["$has_target?"]("messageInput"))?(B=y.$get_target("messageInput"),y.$js_set(B,"placeholder",y.$js_get(L,"message"))):T):T}),q($e,"$update_pluralized_messages",function(b){var y=this,L=T,G=T,A=T;return L=y.$js_get(b,"plurals"),j(L)?(G=y.$js_get(L,"message"),A=y.$js_get(L,"item"),j(y["$has_target?"]("notification1"))&&y.$target_set_text("notification1",y.i18n_service.$pluralize(G,1)),j(y["$has_target?"]("notification2"))&&y.$target_set_text("notification2",y.i18n_service.$pluralize(G,5)),j(y["$has_target?"]("notification3"))&&y.$target_set_text("notification3",y.i18n_service.$pluralize(G,0)),j(y["$has_target?"]("product1Stock"))&&y.$target_set_text("product1Stock",y.i18n_service.$pluralize(A,10)),j(y["$has_target?"]("product2Stock"))&&y.$target_set_text("product2Stock",y.i18n_service.$pluralize(A,1)),j(y["$has_target?"]("product3Stock"))?y.$target_set_text("product3Stock",y.i18n_service.$pluralize(A,0)):T):T}),q($e,"$update_prices",function(){var b=this;return j(b["$has_target?"]("product1Price"))&&b.$target_set_text("product1Price",b.i18n_service.$format_currency(1299.99)),j(b["$has_target?"]("product2Price"))&&b.$target_set_text("product2Price",b.i18n_service.$format_currency(899.99)),j(b["$has_target?"]("product3Price"))?b.$target_set_text("product3Price",b.i18n_service.$format_currency(349.99)):T}),q($e,"$update_date_time",function(){var b=this,y=T;return y=b.$js_date(),j(b["$has_target?"]("currentDate"))&&b.$target_set_text("currentDate",b.i18n_service.$format_date(y)),j(b["$has_target?"]("currentTime"))?b.$target_set_text("currentTime",b.i18n_service.$format_time(y)):T})}(re[0],J("StimulusController"),re)};Opal.queue(function(e){var x=e.top,q=[],j=e.$r(q);return e.nil,e.add_stubs("require,puts,register_all!"),x.$require("native"),x.$require("opal_stimulus/stimulus_controller"),x.$require("opal_vite/concerns/v1/stimulus_helpers"),x.$require("opal_vite/concerns/v1/storable"),x.$require("data/translations"),x.$require("services/i18n_service"),x.$require("controllers/i18n_controller"),x.$puts("i18n Example - Opal + Stimulus"),x.$puts("Ruby version: "+j("RUBY_VERSION")),j("StimulusController")["$register_all!"](),x.$puts("All controllers registered!")});
