Opal.modules.native=function(n){var A=n.hash_put,h=n.module,x=n.defs,I=n.slice,Q=n.truthy,W=n.send,P=n.Kernel,K=n.extract_kwargs,p=n.ensure_kwargs,B=n.hash_get,O=n.range,X=n.to_a,U=n.def,re=n.return_ivar,Z=n.alias,j=n.klass,y=n.rb_minus,z=n.return_val,N=n.send2,S=n.find_super,L=n.eqeqeq,E=n.rb_ge,M=n.return_self,C=n.gvars,w=n.top,m=[],i=n.$r(m),l=n.nil,b=n.$$$;return n.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(_,c){var o=h(_,"Native"),v=[o].concat(c),T=n.$r(v);return x(o,"$is_a?",function(a,$){var r=this;try{return a instanceof r.$try_convert($)}catch{return!1}}),x(o,"$try_convert",function(a,$){var r=this;return $==null&&($=l),r["$native?"](a)?a:a["$respond_to?"]("to_n")?a.$to_n():$},-2),x(o,"$convert",function(a){var $=this;if($["$native?"](a))return a;if(a["$respond_to?"]("to_n"))return a.$to_n();$.$raise(T("ArgumentError"),""+a.$inspect()+" isn't native")}),x(o,"$call",function d(a,$,r){var e=d.$$p||l,t,s,u=this;d.$$p=null,t=I(arguments,2),s=t;var f=a[$];if(f instanceof Function){for(var q=new Array(s.length),R=0,H=s.length;R<H;R++){var D=s[R],G=u.$try_convert(D);q[R]=G===l?D:G}return e!==l&&q.push(e),u.$Native(f.apply(a,q))}else return u.$Native(f)},-3),x(o,"$proc",function d(){var a=d.$$p||l,$=this;return d.$$p=null,Q(a)||$.$raise(T("LocalJumpError"),"no block given"),W(P,"proc",[],function r(e){var t,s,u=r.$$s==null?this:r.$$s,f=l;if(t=I(arguments),s=t,W(s,"map!",[],function R(H){var D=R.$$s==null?this:R.$$s;return H==null&&(H=l),D.$Native(H)},{$$s:u}),f=u.$Native(this),this===n.global)return a.apply(u,s);var q=a.$$s;a.$$s=null;try{return a.apply(f,s)}finally{a.$$s=q}},{$$arity:-1,$$s:$})}),function(d,a){var $=h(d,"Helpers"),r=[$].concat(a),e=n.$r(r);return U($,"$alias_native",function t(s,u,f){var q,R,H,D;t.$$p;var G=this;return t.$$p=null,q=I(arguments,1),R=K(q),R=p(R),q.length>0&&(H=q.shift()),H==null&&(H=s),D=B(R,"as"),D==null&&(D=l),Q(H["$end_with?"]("="))?W(G,"define_method",[s],function te(ae){var le=te.$$s==null?this:te.$$s;return le.native==null&&(le.native=l),ae==null&&(ae=l),le.native[H["$[]"](O(0,-2,!1))]=e("Native").$convert(ae),ae},{$$s:G}):Q(D)?W(G,"define_method",[s],function te(ae){var le=te.$$p||l,fe,de,he=te.$$s==null?this:te.$$s,ve=l;return he.native==null&&(he.native=l),te.$$p=null,fe=I(arguments),de=fe,ve=W(e("Native"),"call",[he.native,H].concat(X(de)),le.$to_proc()),Q(ve)?D.$new(ve.$to_n()):l},{$$arity:-1,$$s:G}):W(G,"define_method",[s],function te(ae){var le=te.$$p||l,fe,de,he=te.$$s==null?this:te.$$s;return he.native==null&&(he.native=l),te.$$p=null,fe=I(arguments),de=fe,W(e("Native"),"call",[he.native,H].concat(X(de)),le.$to_proc())},{$$arity:-1,$$s:G})},-2),U($,"$native_reader",function(s){var u,f,q=this;return u=I(arguments),f=u,W(f,"each",[],function R(H){var D=R.$$s==null?this:R.$$s;return H==null&&(H=l),W(D,"define_method",[H],function G(){var te=G.$$s==null?this:G.$$s;return te.native==null&&(te.native=l),te.$Native(te.native[H])},{$$s:D})},{$$s:q})},-1),U($,"$native_writer",function(s){var u,f,q=this;return u=I(arguments),f=u,W(f,"each",[],function R(H){var D=R.$$s==null?this:R.$$s;return H==null&&(H=l),W(D,"define_method",[""+H+"="],function G(te){var ae=G.$$s==null?this:G.$$s;return ae.native==null&&(ae.native=l),te==null&&(te=l),ae.$Native(ae.native[H]=te)},{$$s:D})},{$$s:q})},-1),U($,"$native_accessor",function(s){var u,f,q=this;return u=I(arguments),f=u,W(q,"native_reader",X(f)),W(q,"native_writer",X(f))},-1)}(v[0],v),function(d,a){var $=h(d,"Wrapper"),r=[$].concat(a),e=n.$r(r);return U($,"$initialize",function(s){var u=this;return Q(P["$native?"](s))||P.$raise(e("ArgumentError"),""+s.$inspect()+" isn't native"),u.native=s}),U($,"$to_n",re("native")),x($,"$included",function(s){return s.$extend(e("Helpers"))})}(v[0],v),x(o,"$included",function(a){var $=this;return $.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),a.$include(T("Wrapper"))})}(m[0],m),function(_,c){var o=h(_,"Kernel"),v=[o].concat(c),T=n.$r(v);return U(o,"$native?",function(a){return a==null||!a.$$class}),U(o,"$Native",function d(a){d.$$p;var $=this;return d.$$p=null,Q(a==null)?l:Q($["$native?"](a))?b(T("Native"),"Object").$new(a):Q(a["$is_a?"](T("Array")))?W(a,"map",[],function r(e){var t=r.$$s==null?this:r.$$s;return e==null&&(e=l),t.$Native(e)},{$$s:$}):Q(a["$is_a?"](T("Proc")))?W($,"proc",[],function r(e){var t=r.$$p||l,s,u,f=r.$$s==null?this:r.$$s;return r.$$p=null,s=I(arguments),u=s,f.$Native(W(a,"call",X(u),t.$to_proc()))},{$$arity:-1,$$s:$}):a}),Z(o,"_Array","Array"),U(o,"$Array",function d(a,$){var r=d.$$p||l,e,t,s=this;return d.$$p=null,e=I(arguments,1),t=e,Q(s["$native?"](a))?W(b(T("Native"),"Array"),"new",[a].concat(X(t)),r.$to_proc()).$to_a():s.$_Array(a)},-2)}(m[0],m),function(_,c){var o=j(_,c,"Object"),v=o.$$prototype;return v.native=l,o.$include(b(b("Native"),"Wrapper")),U(o,"$==",function(d){var a=this;return a.native===b("Native").$try_convert(d)}),U(o,"$has_key?",function(d){var a=this;return n.hasOwnProperty.call(a.native,d)}),U(o,"$each",function T(d){var a,$,r=T.$$p||l,e=this;if(T.$$p=null,a=I(arguments),$=a,r!==l){for(var t in e.native)n.yieldX(r,[t,e.native[t]]);return e}else return W(e,"method_missing",["each"].concat(X($)))},-1),U(o,"$[]",function(d){var a=this,$=a.native[d];return $ instanceof Function?$:b("Native").$call(a.native,d)}),U(o,"$[]=",function(d,a){var $=this,r=l;return r=b("Native").$try_convert(a),Q(r===l)?$.native[d]=a:$.native[d]=r}),U(o,"$merge!",function(d){var a=this;d=b("Native").$convert(d);for(var $ in d)a.native[$]=d[$];return a}),U(o,"$respond_to?",function(d,a){var $=this;return a==null&&(a=!1),P.$instance_method("respond_to?").$bind($).$call(d,a)},-2),U(o,"$respond_to_missing?",function(d,a){var $=this;return n.hasOwnProperty.call($.native,d)},-2),U(o,"$method_missing",function T(d,a){var $=T.$$p||l,r,e,t,s=this;return T.$$p=null,r=I(arguments,1),e=r,d.charAt(d.length-1)==="="?(t=[d.$slice(0,y(d.$length(),1)),e["$[]"](0)],W(s,"[]=",t),t[t.length-1]):W(b("Native"),"call",[s.native,d].concat(X(e)),$.$to_proc())},-2),U(o,"$nil?",z(!1)),U(o,"$is_a?",function(d){var a=this;return n.is_a(a,d)}),U(o,"$instance_of?",function(d){var a=this;return a.$$class===d}),U(o,"$class",function(){var d=this;return d.$$class}),U(o,"$to_a",function T(d){var a=T.$$p||l,$=this;return T.$$p=null,d==null&&(d=new Map),W(b(b("Native"),"Array"),"new",[$.native,d],a.$to_proc()).$to_a()},-1),U(o,"$inspect",function(){var d=this;return"#<Native:"+String(d.native)+">"}),Z(o,"include?","has_key?"),Z(o,"key?","has_key?"),Z(o,"kind_of?","is_a?"),Z(o,"member?","has_key?")}(i("Native"),i("BasicObject")),function(_,c,o){var v=j(_,c,"Array"),T=[v].concat(o),d=n.$r(T),a=v.$$prototype;return a.named=a.native=a.get=a.block=a.set=a.length=l,v.$include(b(d("Native"),"Wrapper")),v.$include(d("Enumerable")),U(v,"$initialize",function $(r,e){var t=$.$$p||l,s=this,u=l;return $.$$p=null,e==null&&(e=new Map),N(s,S(s,"initialize",$,!1,!0),"initialize",[r],null),s.get=Q(u=e["$[]"]("get"))?u:e["$[]"]("access"),s.named=e["$[]"]("named"),s.set=Q(u=e["$[]"]("set"))?u:e["$[]"]("access"),s.length=Q(u=e["$[]"]("length"))?u:"length",s.block=t,Q(s.$length()==null)?s.$raise(d("ArgumentError"),"no length found on the array-like object"):l},-2),U(v,"$each",function $(){var r=$.$$p||l,e=this;if($.$$p=null,!Q(r))return e.$enum_for("each");for(var t=0,s=e.$length();t<s;t++)n.yield1(r,e["$[]"](t));return e}),U(v,"$[]",function(r){var e=this,t=l,s=l;return t=L(d("String"),s=r)||L(d("Symbol"),s)?Q(e.named)?e.native[e.named](r):e.native[r]:L(d("Integer"),s)?Q(e.get)?e.native[e.get](r):e.native[r]:l,Q(t)?Q(e.block)?e.block.$call(t):e.$Native(t):l}),U(v,"$[]=",function(r,e){var t=this;return Q(t.set)?t.native[t.set](r,d("Native").$convert(e)):t.native[r]=d("Native").$convert(e)}),U(v,"$last",function(r){var e=this,t=l,s=l;if(r==null&&(r=l),Q(r)){for(t=y(e.$length(),1),s=[];Q(E(t,0));)s["$<<"](e["$[]"](t)),t=y(t,1);return s}else return e["$[]"](y(e.$length(),1))},-1),U(v,"$length",function(){var r=this;return r.native[r.length]}),U(v,"$inspect",function(){var r=this;return r.$to_a().$inspect()}),Z(v,"to_ary","to_a")}(i("Native"),null,m),function(_,c){var o=j(_,c,"Numeric");return U(o,"$to_n",function(){var T=this;return T.valueOf()})}(m[0],null),function(_,c){var o=j(_,c,"Proc");return U(o,"$to_n",M)}(m[0],null),function(_,c){var o=j(_,c,"String");return U(o,"$to_n",function(){var T=this;return T.valueOf()})}(m[0],null),function(_,c){var o=j(_,c,"Regexp");return U(o,"$to_n",function(){var T=this;return T.valueOf()})}(m[0],null),function(_,c){var o=j(_,c,"MatchData");return U(o,"$to_n",re("matches"))}(m[0],null),function(_,c,o){var v=j(_,c,"Struct"),T=[v].concat(o),d=n.$r(T);return U(v,"$to_n",function(){var $=this,r=l;return r={},W($,"each_pair",[],function(t,s){return t==null&&(t=l),s==null&&(s=l),r[t]=d("Native").$try_convert(s,s)}),r})}(m[0],null,m),function(_,c,o){var v=j(_,c,"Array"),T=[v].concat(o),d=n.$r(T);return U(v,"$to_n",function(){for(var $=this,r=[],e=0,t=$.length;e<t;e++){var s=$[e];r.push(d("Native").$try_convert(s,s))}return r})}(m[0],null,m),function(_,c){var o=j(_,c,"Boolean");return U(o,"$to_n",function(){var T=this;return T.valueOf()})}(m[0],null),function(_,c){var o=j(_,c,"Time");return U(o,"$to_n",M)}(m[0],null),function(_,c){var o=j(_,c,"NilClass");return U(o,"$to_n",function(){return null})}(m[0],null),Q(i("Hash")["$method_defined?"]("_initialize"))||function(_,c,o){var v=j(_,c,"Hash"),T=[v].concat(o),d=n.$r(T);Z(v,"_initialize","initialize");function a($,r,e){e&&(e.constructor===void 0||e.constructor===Object||e instanceof Map)?A($,r,d("Hash").$new(e)):e&&e.$$is_array?(e=e.map(function(t){return t&&(t.constructor===void 0||t.constructor===Object||e instanceof Map)?d("Hash").$new(t):v.$Native(t)}),A($,r,e)):A($,r,v.$Native(e))}return U(v,"$initialize",function $(r){var e=$.$$p||l,t=this;if($.$$p=null,r!=null)if(r.constructor===void 0||r.constructor===Object){var s,u;for(s in r)u=r[s],a(t,s,u);return t}else r instanceof Map&&n.hash_each(r,!1,function(f,q){return a(t,f,q),[!1,!1]});return W(t,"_initialize",[r],e.$to_proc())},-1),U(v,"$to_n",function(){var r=this,e={};return n.hash_each(r,!1,function(t,s){return e[d("Native").$try_convert(t,t)]=d("Native").$try_convert(s,s),[!1,!1]}),e})}(m[0],null,m),function(_,c){var o=j(_,c,"Module");return U(o,"$native_module",function(){var T=this;return n.global[T.$name()]=T})}(m[0],null),function(_,c,o){var v=j(_,c,"Class"),T=[v].concat(o),d=n.$r(T);return U(v,"$native_alias",function($,r){var e=this,t=e.prototype[n.jsid(r)];t||e.$raise(d("NameError").$new("undefined method `"+r+"' for class `"+e.$inspect()+"'",r)),e.prototype[$]=t}),U(v,"$native_class",function(){var $=this;return $.$native_module(),$.new=$.$new})}(m[0],null,m),C.$=C.global=w.$Native(n.global)};(function(n){var A;if(typeof globalThis<"u"?n=globalThis:typeof global<"u"?n=global:typeof window<"u"&&(n=window),n.console==null&&(n.console={}),typeof n.console=="object"?A=n.console:A={},"log"in A||(A.log=function(){}),"warn"in A||(A.warn=A.log),typeof n.Opal<"u")return A.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),n.Opal;var h,x,I,Q,W,P,K,p=n.Opal={};p.global=n,p.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var B=Function.prototype.call,O=Function.prototype.bind,X=Object.hasOwn||B.bind(Object.prototype.hasOwnProperty),U=Object.setPrototypeOf,re=B.bind(Array.prototype.slice),Z=B.bind(Array.prototype.splice),j=4,y=j;function z(){return y+=2,y}p.uid=z,p.id=function(g){return g.$$is_number?g*2+1:(g.$$id==null&&E(g,"$$id",z()),g.$$id)};var N=p.gvars={};p.exit=function(g){N.DEBUG&&A.log("Exited with status "+g)},p.exceptions=[],p.pop_exception=function(g){var k=p.exceptions.pop();k===g||(k?N["!"]=k:N["!"]=h)};function S(g,k){if(g||(g=p.Exception||Error),K&&K.$raise)arguments.length>2?K.$raise(g.$new.apply(g,re(arguments,1))):K.$raise(g,k);else throw g.$new?g.$new(k):new g(k)}var L={value:void 0,enumerable:!1,configurable:!0,writable:!0};function E(g,k,J){typeof g=="string"?g[k]=J:(L.value=J,Object.defineProperty(g,k,L))}p.prop=E,p.defineProperty=p.prop,p.slice=re;var M=p.truthy=function(g){return g!==!1&&h!==g&&g!==void 0&&g!==null&&(!(g instanceof Boolean)||g.valueOf()===!0)};p.falsy=function(g){return!M(g)},p.type_error=function(g,k,J,ne){g=g.$$class,ne&&J?(ne=ne.$$class,S(p.TypeError,"can't convert "+g+" into "+k+" ("+g+"#"+J+" gives "+ne+")")):S(p.TypeError,"no implicit conversion of "+g+" into "+k)},p.coerce_to=function(g,k,J,ne){var ue;return J==="to_int"&&k===p.Integer&&g.$$is_number?g<0?Math.ceil(g):Math.floor(g):J==="to_str"&&k===p.String&&g.$$is_string||p.is_a(g,k)?g:g["$respond_to?"].$$pristine&&g.$method_missing.$$pristine?(ue=g[de(J)],(ue==null||ue.$$stub)&&p.type_error(g,k),ue.apply(g,ne)):(g["$respond_to?"](J)||p.type_error(g,k),ne==null&&(ne=[]),p.send(g,J,ne))},p.respond_to=function(g,k,J){if(g==null||!g.$$class)return!1;J=!!J;var ne=g[k];if(g["$respond_to?"].$$pristine){if(typeof ne=="function"&&!ne.$$stub)return!0;if(!g["$respond_to_missing?"].$$pristine)return p.send(g,g["$respond_to_missing?"],[k.substr(1),J])}else return p.send(g,g["$respond_to?"],[k.substr(1),J])},p.trace_class=!1,p.tracers_for_class=[];function C(g){var k,J,ne;for(k=0,J=p.tracers_for_class.length;k<J;k++)ne=p.tracers_for_class[k],ne.trace_object=g,ne.block.$call(ne)}function w(g,k){if(g.$$autoload[k].loaded){if(g.$$autoload[k].loaded&&!g.$$autoload[k].required&&g.$$autoload[k].exception)throw g.$$autoload[k].exception}else{g.$$autoload[k].loaded=!0;try{p.Kernel.$require(g.$$autoload[k].path)}catch(J){throw g.$$autoload[k].exception=J,J}if(g.$$autoload[k].required=!0,g.$$const[k]!=null)return g.$$autoload[k].success=!0,g.$$const[k]}}function m(g,k){if(g){if(g.$$const[k]!=null)return g.$$const[k];if(g.$$autoload&&g.$$autoload[k])return w(g,k)}}function i(g,k){var J,ne,ue;if(g.length!==0)for(J=0,ne=g.length;J<ne;J++){if(ue=g[J].$$const[k],ue!=null)return ue;if(g[J].$$autoload&&g[J].$$autoload[k])return w(g[J],k)}}function l(g,k){var J,ne,ue;if(g!=null)for(ue=G(g),J=0,ne=ue.length;J<ne;J++){if(ue[J].$$const&&X(ue[J].$$const,k))return ue[J].$$const[k];if(ue[J].$$autoload&&ue[J].$$autoload[k])return w(ue[J],k)}}function b(g,k){if(g==null||g.$$is_module)return l(I,k)}function _(g,k){return(g||I).$const_missing(k)}p.const_get_local=function(g,k,J){var ne;if(g!=null)return g==="::"&&(g=I),!g.$$is_module&&!g.$$is_class&&S(p.TypeError,g.toString()+" is not a class/module"),ne=m(g,k),ne!=null||J?ne:_(g,k)},p.const_get_qualified=function(g,k,J){var ne,ue,_e,ge=p.const_cache_version;if(k==null)return ne=m(I,g),ne??p.const_get_qualified(I,g,J);if(g!=null)return g==="::"&&(g=I),!g.$$is_module&&!g.$$is_class&&S(p.TypeError,g.toString()+" is not a class/module"),(ue=g.$$const_cache)==null&&(E(g,"$$const_cache",Object.create(null)),ue=g.$$const_cache),_e=ue[k],_e==null||_e[0]!==ge?((ne=m(g,k))!=null||(ne=l(g,k))!=null,ue[k]=[ge,ne]):ne=_e[1],ne!=null||J?ne:_(g,k)},p.const_cache_version=1,p.const_get_relative=function(g,k,J){var ne=g[0],ue,_e=p.const_cache_version,ge,pe;return(ge=g.$$const_cache)==null&&(E(g,"$$const_cache",Object.create(null)),ge=g.$$const_cache),pe=ge[k],pe==null||pe[0]!==_e?((ue=m(ne,k))!=null||(ue=i(g,k))!=null||(ue=l(ne,k))!=null||(ue=b(ne,k))!=null,ge[k]=[_e,ue]):ue=pe[1],ue!=null||J?ue:_(ne,k)};function c(g,k,J){var ne=!0;return(g==null||g==="::")&&(g=I),J.$$is_a_module&&((J.$$name==null||J.$$name===h)&&(J.$$name=k),J.$$base_module==null&&(J.$$base_module=g)),g.$$const=g.$$const||Object.create(null),(k in g.$$const||"$$autoload"in g&&k in g.$$autoload)&&(ne=!1),g.$$const[k]=J,g.$$=g.$$const,p.const_cache_version++,g===I&&(p[k]=J),E(g,k,J),ne&&g.$const_added&&!g.$const_added.$$pristine&&g.$const_added(k),J}p.const_set=c,p.constants=function(g,k){k==null&&(k=!0);var J,ne=[g],ue,_e,ge={},pe;for(k&&(ne=ne.concat(G(g))),k&&g.$$is_module&&(ne=ne.concat([p.Object]).concat(G(p.Object))),ue=0,_e=ne.length;ue<_e&&(J=ne[ue],!(g!==I&&J==I));ue++){for(pe in J.$$const)ge[pe]=!0;if(J.$$autoload)for(pe in J.$$autoload)ge[pe]=!0}return Object.keys(ge)},p.const_remove=function(g,k){if(p.const_cache_version++,g.$$const[k]!=null){var J=g.$$const[k];return delete g.$$const[k],J}if(g.$$autoload&&g.$$autoload[k])return delete g.$$autoload[k],h;S(p.NameError,"constant "+g+"::"+g.$name()+" not defined")},p.const_get_relative_factory=function(g){return function(k,J){return p.$$(g,k,J)}},p.$$=p.const_get_relative,p.$$$=p.const_get_qualified,p.$r=p.const_get_relative_factory;function o(g){return g==null?!1:g.$$bridge?g:g.$$super?o(g.$$super):!1}function v(g,k,J){var ne,ue;if((ue=o(k))?ne=function(){var ye=new(O.apply(ue.$$constructor,he(null,arguments)));return U(ye,ne.$$prototype),ye}:ne=function(){},g&&g!==h&&E(ne,"displayName","::"+g),E(ne,"$$name",g),E(ne,"$$constructor",ne),E(ne,"$$prototype",ne.prototype),E(ne,"$$const",{}),E(ne,"$$is_class",!0),E(ne,"$$is_a_module",!0),E(ne,"$$super",k),E(ne,"$$cvars",{}),E(ne,"$$own_included_modules",[]),E(ne,"$$own_prepended_modules",[]),E(ne,"$$ancestors",[]),E(ne,"$$ancestors_cache_version",null),E(ne,"$$subclasses",[]),E(ne,"$$cloned_from",[]),E(ne.$$prototype,"$$class",ne),p.Class&&U(ne,p.Class.prototype),k!=null){if(U(ne.$$prototype,k.$$prototype),J!==!0)if(typeof WeakRef<"u"){var _e,ge,pe=[];for(_e=0;_e<k.$$subclasses.length;_e++)ge=k.$$subclasses[_e],ge.deref()!==void 0&&pe.push(ge);pe.push(new WeakRef(ne)),k.$$subclasses=pe}else k.$$subclasses.push(ne);k.$$meta&&p.build_class_singleton_class(ne)}return ne}p.allocate_class=v;function T(g,k){var J=m(g,k);if(J)return J.$$is_class||S(p.TypeError,k+" is not a class"),J}function d(g,k){g.$$super!==k&&S(p.TypeError,"superclass mismatch for class "+g.$$name)}p.klass=function(g,k,J){var ne;g==null||g=="::"?g=I:!g.$$is_class&&!g.$$is_module&&(g=g.$$class),k!=null&&(!k.hasOwnProperty||k.hasOwnProperty&&!k.hasOwnProperty("$$is_class"))&&(k.constructor&&k.constructor.name=="Function"?(ne=k,k=I):S(p.TypeError,"superclass must be a Class ("+(k.constructor&&(k.constructor.name||k.constructor.$$name)||typeof k)+" given)"));var ue=T(g,J);return ue!=null?k&&d(ue,k):(k==null&&(k=I),ue=v(J,k),c(g,J,ue),k.$inherited&&k.$inherited(ue),ne&&p.bridge(ne,ue)),p.trace_class&&C(ue),ue};function a(g){var k=function(){},J=k;return g&&E(k,"displayName",g+".constructor"),E(J,"$$name",g),E(J,"$$prototype",k.prototype),E(J,"$$const",{}),E(J,"$$is_module",!0),E(J,"$$is_a_module",!0),E(J,"$$cvars",{}),E(J,"$$iclasses",[]),E(J,"$$own_included_modules",[]),E(J,"$$own_prepended_modules",[]),E(J,"$$ancestors",[J]),E(J,"$$ancestors_cache_version",null),E(J,"$$cloned_from",[]),U(J,p.Module.prototype),J}p.allocate_module=a;function $(g,k){var J=m(g,k);return J==null&&g===I&&(J=l(I,k)),J&&!J.$$is_module&&J!==I&&S(p.TypeError,k+" is not a module"),J}p.module=function(g,k){var J;return g==null||g=="::"?g=I:!g.$$is_class&&!g.$$is_module&&(g=g.$$class),J=$(g,k),J==null&&(J=a(k),c(g,k,J)),p.trace_class&&C(J),J},p.get_singleton_class=function(g){return g.$$is_number&&S(p.TypeError,"can't define singleton"),g.$$meta?g.$$meta:g.hasOwnProperty("$$is_class")?p.build_class_singleton_class(g):g.hasOwnProperty("$$is_module")?p.build_module_singleton_class(g):p.build_object_singleton_class(g)};function r(g,k){g.hasOwnProperty("$$meta")?g.$$meta=k:E(g,"$$meta",k),g.$$frozen?g.$$meta.$freeze():U(g,k.$$prototype)}p.build_class_singleton_class=function(g){if(g.$$meta)return g.$$meta;var k=g===x?W:p.get_singleton_class(g.$$super),J=v(null,k,!0);return E(J,"$$is_singleton",!0),E(J,"$$singleton_of",g),r(g,J),E(g,"$$class",p.Class),J},p.build_module_singleton_class=function(g){if(g.$$meta)return g.$$meta;var k=v(null,p.Module,!0);return E(k,"$$is_singleton",!0),E(k,"$$singleton_of",g),r(g,k),E(g,"$$class",p.Module),k},p.build_object_singleton_class=function(g){var k=g.$$class,J=v(h,k,!0);return E(J,"$$is_singleton",!0),E(J,"$$singleton_of",g),delete J.$$prototype.$$class,r(g,J),J},p.is_method=function(g){return g[0]==="$"&&g[1]!=="$"},p.instance_methods=function(g){for(var k=Object.create(null),J=[],ne=G(g),ue=0,_e=ne.length;ue<_e;ue++){var ge=ne[ue],pe=ge.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ke=ye.length;we<ke;we++){var Ee=ye[we];if(!k[Ee]){if(p.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);J.push(qe)}}k[Ee]=!0}}}return J},p.own_instance_methods=function(g){var k=[],J=g.$$prototype;J.hasOwnProperty("$$dummy")&&(J=J.$$define_methods_on);for(var ne=Object.getOwnPropertyNames(J),ue=0,_e=ne.length;ue<_e;ue++){var ge=ne[ue];if(p.is_method(ge)){var pe=J[ge];if(!pe.$$stub){var ye=ge.slice(1);k.push(ye)}}}return k},p.methods=function(g){return p.instance_methods(g.$$meta||g.$$class)},p.own_methods=function(g){return g.$$meta?p.own_instance_methods(g.$$meta):[]},p.receiver_methods=function(g){var k=p.get_singleton_class(g),J=p.own_instance_methods(k),ne=p.own_instance_methods(k.$$super);return J.concat(ne)},p.class_variables=function(g){var k=G(g),J,ne=k.length,ue={};for(J=ne-1;J>=0;J--){var _e=k[J];for(var ge in _e.$$cvars)ue[ge]=_e.$$cvars[ge]}return ue},p.class_variable_set=function(g,k,J){var ne=G(g),ue,_e=ne.length;for(ue=_e-2;ue>=0;ue--){var ge=ne[ue];if(X(ge.$$cvars,k))return ge.$$cvars[k]=J,J}return g.$$cvars[k]=J,J},p.class_variable_get=function(g,k,J){if(X(g.$$cvars,k))return g.$$cvars[k];var ne=G(g),ue,_e=ne.length;for(ue=0;ue<_e;ue++){var ge=ne[ue];if(X(ge.$$cvars,k))return ge.$$cvars[k]}return J||S(p.NameError,"uninitialized class variable "+k+" in "+g.$name()),h};function e(g){return g.hasOwnProperty("$$iclass")&&g.hasOwnProperty("$$root")}function t(g){for(var k=[],J,ne=Object.getPrototypeOf(g.$$prototype);ne&&!ne.hasOwnProperty("$$class");)J=H(ne),J&&k.push(J),ne=Object.getPrototypeOf(ne);return k}function s(g){var k=[],J,ne=Object.getPrototypeOf(g.$$prototype);if(g.$$prototype.hasOwnProperty("$$dummy"))for(;ne&&ne!==g.$$prototype.$$define_methods_on;)J=H(ne),J&&k.push(J),ne=Object.getPrototypeOf(ne);return k}p.append_features=function(g,k){var J=G(g),ne=[];J.indexOf(k)!==-1&&S(p.ArgumentError,"cyclic include detected");for(var ue=0,_e=J.length;ue<_e;ue++){var ge=J[ue],pe=f(ge);E(pe,"$$included",!0),ne.push(pe)}var ye=G(k),we=R(ne),ke,Ee;if(ye.indexOf(g)===-1)ke=k.$$prototype,Ee=Object.getPrototypeOf(k.$$prototype);else{for(var xe=k.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===g&&e(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var ze=Object.getPrototypeOf(qe);ze.hasOwnProperty("$$iclass")&&!e(ze);)ze=Object.getPrototypeOf(ze);ke=xe,Ee=ze}else ke=k.$$prototype,Ee=Object.getPrototypeOf(k.$$prototype)}U(ke,we.first),U(we.last,Ee),k.$$own_included_modules=t(k),p.const_cache_version++},p.prepend_features=function(g,k){var J=G(g),ne=[];J.indexOf(k)!==-1&&S(p.ArgumentError,"cyclic prepend detected");for(var ue=0,_e=J.length;ue<_e;ue++){var ge=J[ue],pe=f(ge);E(pe,"$$prepended",!0),ne.push(pe)}var ye=R(ne),we=k.$$prototype,ke=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=q(k),u(k),E(we,"$$dummy",!0),E(we,"$$define_methods_on",Ee),U(we,Ee),U(Ee,ke));var ze=G(k);if(ze.indexOf(g)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else S(p.RuntimeError,"Prepending a module multiple times is not supported");U(xe,ye.first),U(ye.last,qe),k.$$own_prepended_modules=s(k),p.const_cache_version++};function u(g){for(var k=g.$$prototype,J=Object.getOwnPropertyNames(k),ne=0;ne<J.length;ne++){var ue=J[ne];p.is_method(ue)&&delete k[ue]}}function f(g){var k=q(g);return g.$$is_module&&g.$$iclasses.push(k),k}function q(g){var k={},J=g.$$prototype;J.hasOwnProperty("$$dummy")&&(J=J.$$define_methods_on);var ne=Object.getOwnPropertyNames(J),ue=ne.length,_e;for(_e=0;_e<ue;_e++){var ge=ne[_e];E(k,ge,J[ge])}return E(k,"$$iclass",!0),E(k,"$$module",g),k}function R(g){var k=g.length,J=g[0];if(E(J,"$$root",!0),k===1)return{first:J,last:J};for(var ne=J,ue=1;ue<k;ue++){var _e=g[ue];U(ne,_e),ne=_e}return{first:g[0],last:g[k-1]}}p.bridge=function(g,k){g.hasOwnProperty("$$bridge")&&S(p.ArgumentError,"already bridged"),E(g,"$$bridge",k),U(g.prototype,(k.$$super||p.Object).$$prototype),E(k,"$$prototype",g.prototype),E(k.$$prototype,"$$class",k),E(k,"$$constructor",g),E(k,"$$bridge",!0)};function H(g){if(!g.hasOwnProperty("$$dummy")){if(g.hasOwnProperty("$$iclass"))return g.$$module;if(g.hasOwnProperty("$$class"))return g.$$class}}function D(g){return g.$$own_prepended_modules.concat([g]).concat(g.$$own_included_modules)}function G(g){if(!g)return[];if(g.$$ancestors_cache_version===p.const_cache_version)return g.$$ancestors;var k=[],J,ne,ue;for(J=0,ne=D(g),ue=ne.length;J<ue;J++)k.push(ne[J]);if(g.$$super)for(J=0,ne=G(g.$$super),ue=ne.length;J<ue;J++)k.push(ne[J]);return g.$$ancestors_cache_version=p.const_cache_version,g.$$ancestors=k,k}p.ancestors=G,p.included_modules=function(g){for(var k=[],J=null,ne=Object.getPrototypeOf(g.$$prototype);ne&&Object.getPrototypeOf(ne);ne=Object.getPrototypeOf(ne))J=H(ne),J&&J.$$is_module&&ne.$$iclass&&ne.$$included&&k.push(J);return k},p.add_stubs=function(g){var k=p.BasicObject.$$prototype,J,ne;g=g.split(",");for(var ue=0,_e=g.length;ue<_e;ue++)J=de(g[ue]),ne=k[J],(ne==null||ne.$$stub)&&p.add_stub_for(k,J)},p.add_stub_for=function(g,k){E(g,k,p.stub_for(k))},p.stub_for=function(g){function k(){return this.$method_missing.$$p=k.$$p,k.$$p=null,this.$method_missing.apply(this,he(g.slice(1),arguments))}return k.$$stub=!0,k},p.ac=function(g,k,J,ne){var ue="";J.$$is_a_module?ue+=J.$$name+".":ue+=J.$$class.$$name+"#",ue+=ne,S(p.ArgumentError,"["+ue+"] wrong number of arguments (given "+g+", expected "+k+")")},p.block_ac=function(g,k,J){var ne="`block in "+J+"'";S(p.ArgumentError,ne+": wrong number of arguments (given "+g+", expected "+k+")")};function te(g){return g.hasOwnProperty("$$meta")&&g.$$meta!==null?G(g.$$meta):G(g.$$class)}p.find_super=function(g,k,J,ne,ue){var _e=de(k),ge,pe,ye,we,ke=-1,Ee;for(ge=te(g),we=J.$$owner,Ee=0;Ee<ge.length;Ee++)if(pe=ge[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ke=Ee;break}for(Ee=ke+1;Ee<ge.length;Ee++){pe=ge[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(_e)){ye=xe[_e];break}}return!ne&&ye&&ye.$$stub&&g.$method_missing.$$pristine&&S(p.NoMethodError,"super: no superclass method `"+k+"' for "+g,k),ye.$$stub&&!ue?null:ye},p.find_block_super=function(g,k,J,ne,ue){var _e=k;return J||S(p.RuntimeError,"super called outside of method"),ue&&J.$$define_meth&&S(p.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),J.$$def&&(_e=J.$$jsid),p.find_super(g,_e,J,ne)},p.find_super_dispatcher=p.find_super,p.find_iter_super_dispatcher=p.find_block_super;function ae(g,k,J){try{g(k)}catch(ne){if(ne===J)return J.$v;throw ne}}p.yield1=function(g,k){typeof g!="function"&&S(p.LocalJumpError,"no block given");var J=g.$$has_top_level_mlhs_arg,ne=g.$$has_trailing_comma_in_args,ue=g.$$is_lambda&&g.$$ret;return(g.length>1||(J||ne)&&g.length===1)&&(k=p.to_ary(k)),(g.length>1||ne&&g.length===1)&&k.$$is_array?ue?ae(g.apply.bind(g,null),k,g.$$ret):g.apply(null,k):ue?ae(g,k,g.$$ret):g(k)},p.yieldX=function(g,k){return typeof g!="function"&&S(p.LocalJumpError,"no block given"),g.length>1&&k.length===1&&k[0].$$is_array&&(k=k[0]),g.$$is_lambda&&g.$$ret?ae(g.apply.bind(g,null),k,g.$$ret):g.apply(null,k)},p.rescue=function(g,k){for(var J=0;J<k.length;J++){var ne=k[J];if(ne.$$is_array){var ue=p.rescue(g,ne);if(ue)return ue}else if(ne===p.JS.Error||ne["$==="](g))return ne}return null},p.is_a=function(g,k){if(k!=null&&g.$$meta===k||g.$$class===k)return!0;if(g.$$is_number&&k.$$is_number_class)return k.$$is_integer_class?g%1===0:!0;var J=G(g.$$is_class?p.get_singleton_class(g):g.$$meta||g.$$class);return J.indexOf(k)!==-1},p.to_hash=function(g){if(g.$$is_hash)return g;if(g["$respond_to?"]("to_hash",!0)){var k=g.$to_hash();if(k.$$is_hash)return k;S(p.TypeError,"Can't convert "+g.$$class+" to Hash ("+g.$$class+"#to_hash gives "+k.$$class+")")}else S(p.TypeError,"no implicit conversion of "+g.$$class+" into Hash")},p.to_ary=function(g){if(g.$$is_array)return g;if(g["$respond_to?"]("to_ary",!0)){var k=g.$to_ary();if(k===h)return[g];if(k.$$is_array)return k;S(p.TypeError,"Can't convert "+g.$$class+" to Array ("+g.$$class+"#to_ary gives "+k.$$class+")")}else return[g]},p.to_a=function(g){if(g.$$is_array)return g.slice();if(g["$respond_to?"]("to_a",!0)){var k=g.$to_a();if(k===h)return[g];if(k.$$is_array)return k;S(p.TypeError,"Can't convert "+g.$$class+" to Array ("+g.$$class+"#to_a gives "+k.$$class+")")}else return[g]},p.extract_kwargs=function(g){var k=g[g.length-1];if(k!=null&&p.respond_to(k,"$to_hash",!0))return Z(g,g.length-1),k},p.kwrestargs=function(g,k){var J=new Map;return p.hash_each(g,!1,function(ne,ue){return k[ne]||p.hash_put(J,ne,ue),[!1,!1]}),J};function le(g,k){typeof k=="number"?g.$$arity=k:typeof k=="object"&&Object.assign(g,k)}var fe=new Map;function de(g){var k=fe.get(g);return k||(k="$"+g,fe.set(g,k)),k}p.jsid=de;function he(g,k){return k.$$is_array||(k=re(k)),[g].concat(k)}p.send=function(g,k,J,ne,ue){var _e;return typeof k=="function"?(_e=k,k=null):typeof k=="string"?_e=g[de(k)]:S(p.NameError,"Passed method should be a string or a function"),p.send2(g,_e,k,J,ne,ue)},p.send2=function(g,k,J,ne,ue,_e){return k==null&&J!=null&&g.$method_missing&&(k=g.$method_missing,ne=he(J,ne)),le(ue,_e),typeof ue=="function"&&(k.$$p=ue),k.apply(g,ne)},p.refined_send=function(g,k,J,ne,ue,_e){var ge,pe,ye,we,ke,Ee,xe,qe,ze,Ae;for(we=te(k),ge=0;ge<we.length;ge++)for(ke=p.id(we[ge]),pe=0;pe<g.length;pe++)for(Ee=g[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ke]>"u")&&(ze=qe[ke],typeof ze.$$prototype[de(J)]<"u")))return Ae=ze.$$prototype[de(J)],p.send2(k,Ae,J,ne,ue,_e);return p.send(k,J,ne,ue,_e)},p.lambda=function(g,k){return g.$$is_lambda=!0,le(g,k),g},p.def=function(g,k,J,ne){return le(J,ne),g===p.top?p.defn(p.Object,k,J):!g.$$eval&&g.$$is_a_module?p.defn(g,k,J):p.defs(g,k,J)},p.defn=function(g,k,J){F(g),J.displayName=k,J.$$owner=g;var ne=k.substr(1),ue=g.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),E(ue,k,J),g.$$is_module){g.$$module_function&&p.defs(g,k,J);for(var _e=0,ge=g.$$iclasses,pe=ge.length;_e<pe;_e++){var ye=ge[_e];E(ye,k,J)}}var we=g.$$singleton_of;return g.$method_added&&!g.$method_added.$$stub&&!we?g.$method_added(ne):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(ne),ne},p.defs=function(g,k,J,ne){return le(J,ne),(g.$$is_string||g.$$is_number)&&S(p.TypeError,"can't define singleton"),p.defn(p.get_singleton_class(g),k,J)};function ve(g,k){if(g.$$is_module)for(var J=0,ne=g.$$iclasses,ue=ne.length;J<ue;J++){var _e=ne[J];delete _e[k]}}p.rdef=function(g,k){X(g.$$prototype,k)||S(p.NameError,"method '"+k.substr(1)+"' not defined in "+g.$name()),delete g.$$prototype[k],ve(g,k),g.$$is_singleton?g.$$prototype.$singleton_method_removed&&!g.$$prototype.$singleton_method_removed.$$stub&&g.$$prototype.$singleton_method_removed(k.substr(1)):g.$method_removed&&!g.$method_removed.$$stub&&g.$method_removed(k.substr(1))},p.udef=function(g,k){(!g.$$prototype[k]||g.$$prototype[k].$$stub)&&S(p.NameError,"method '"+k.substr(1)+"' not defined in "+g.$name()),p.add_stub_for(g.$$prototype,k),ve(g,k),g.$$is_singleton?g.$$prototype.$singleton_method_undefined&&!g.$$prototype.$singleton_method_undefined.$$stub&&g.$$prototype.$singleton_method_undefined(k.substr(1)):g.$method_undefined&&!g.$method_undefined.$$stub&&g.$method_undefined(k.substr(1))};function me(g){return typeof g=="function"&&!g.$$stub}p.alias=function(g,k,J){var ne=de(k),ue=de(J),_e,ge;if(typeof g.$$prototype>"u"&&(g=p.Object),_e=g.$$prototype[ue],g.$$eval)return p.alias(p.get_singleton_class(g),k,J);if(!me(_e)){for(var pe=g.$$super;typeof _e!="function"&&pe;)_e=pe[ue],pe=pe.$$super;!me(_e)&&g.$$is_module&&(_e=p.Object.$$prototype[ue]),me(_e)||S(p.NameError,"undefined method `"+J+"' for class `"+g.$name()+"'")}return _e.$$alias_of&&(_e=_e.$$alias_of),ge=p.wrap_method_body(_e),ge.displayName=k,ge.$$alias_of=_e,ge.$$alias_name=k,p.defn(g,ne,ge),g},p.wrap_method_body=function(g){var k=function(){var J=k.$$p;return k.$$p=null,p.send(this,g,arguments,J)};try{Object.defineProperty(k,"length",{value:g.length})}catch{}return k.$$arity=g.$$arity==null?g.length:g.$$arity,k.$$parameters=g.$$parameters,k.$$source_location=g.$$source_location,k},p.alias_gvar=function(g,k){return Object.defineProperty(N,g,{configurable:!0,enumerable:!0,get:function(){return N[k]},set:function(J){N[k]=J}}),h},p.alias_native=function(g,k,J){var ne=de(k),ue=g.$$prototype[J];return(typeof ue!="function"||ue.$$stub)&&S(p.NameError,"undefined native method `"+J+"' for class `"+g.$name()+"'"),p.defn(g,ne,ue),g},p.hash_init=function(g){A.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},p.hash_clone=function(g,k){return k.$$none=g.$$none,k.$$proc=g.$$proc,p.hash_each(g,k,function(J,ne){return p.hash_put(k,J,ne),[!1,k]})},p.hash_put=function(g,k,J){var ne=typeof k;if(ne==="string"||ne==="symbol"||ne==="number"||ne==="boolean"||ne==="bigint")g.set(k,J);else if(k.$$is_string)g.set(k.valueOf(),J);else{g.$$keys||(g.$$keys=new Map);var ue=k.$$is_string?k.valueOf():g.$$by_identity?p.id(k):k.$hash(),_e=g.$$keys;if(!_e.has(ue)){_e.set(ue,[k]),g.set(k,J);return}for(var ge=_e.get(ue),pe,ye=0;ye<ge.length;ye++)if(pe=ge[ye],k===pe||k["$eql?"](pe)){g.set(pe,J);return}ge.push(k),g.set(k,J)}},p.hash_get=function(g,k){var J=typeof k;if(J==="string"||J==="symbol"||J==="number"||J==="boolean"||J==="bigint")return g.get(k);if(g.$$keys){var ne=k.$$is_string?k.valueOf():g.$$by_identity?p.id(k):k.$hash(),ue=g.$$keys.get(ne),_e;if(ue!==void 0){for(var ge=0;ge<ue.length;ge++)if(_e=ue[ge],k===_e||k["$eql?"](_e))return g.get(_e)}else if(k.$$is_string)return g.get(ne)}else if(k.$$is_string)return g.get(k.valueOf())};function be(g,k){var J=g.get(k);if(J!==void 0)return g.delete(k),J}p.hash_delete=function(g,k){var J=typeof k;if(J==="string"||J==="symbol"||J==="number"||J==="boolean"||J==="bigint")return be(g,k);if(g.$$keys){var ne=k.$$is_string?k.valueOf():g.$$by_identity?p.id(k):k.$hash(),ue=g.$$keys.get(ne),_e;if(ue!==void 0){for(var ge=0;ge<ue.length;ge++)if(_e=ue[ge],k===_e||k["$eql?"](_e))return ue.splice(ge,1),ue.length===0&&g.$$keys.delete(ne),be(g,_e)}else if(k.$$is_string)return be(g,ne)}else if(k.$$is_string)return be(g,k.valueOf())},p.hash_rehash=function(g){var k=g.$$keys;return k&&k.clear(),p.hash_each(g,!1,function(J,ne){var ue=typeof J;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var _e=J.$$is_string?J.valueOf():g.$$by_identity?p.id(J):J.$hash();if(k||(g.$$keys=k=new Map),!k.has(_e))return k.set(_e,[J]),[!1,!1];for(var ge=k.get(_e),pe=ge.length===1?ge:re(ge),ye,we=0;we<pe.length;we++)ye=pe[we],(J===ye||J["$eql?"](ye))&&(ge.splice(ge.indexOf(ye),1),g.delete(ye));return ge.push(J),[!1,!1]}),g},p.hash=function(){var g=arguments.length,k,J,ne,ue,_e,ge;if(g===1&&arguments[0].$$is_hash)return arguments[0];if(J=new Map,g===1)if(k=arguments[0],arguments[0].$$is_array){for(ue=k.length,ne=0;ne<ue;ne++)k[ne].length!==2&&S(p.ArgumentError,"value not of length 2: "+k[ne].$inspect()),_e=k[ne][0],ge=k[ne][1],p.hash_put(J,_e,ge);return J}else{k=arguments[0];for(_e in k)X(k,_e)&&(ge=k[_e],p.hash_put(J,_e,ge));return J}for(g%2!==0&&S(p.ArgumentError,"odd number of arguments for Hash"),ne=0;ne<g;ne+=2)_e=arguments[ne],ge=arguments[ne+1],p.hash_put(J,_e,ge);return J},p.hash2=function(g,k){A.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var J=new Map,ne=0,ue=g.length;ne<ue;ne++)J.set(g[ne],k[g[ne]]);return J},p.hash_each=function(g,k,J){for(var ne,ue=0,_e,ge=Array.from(g.entries()),pe=ge.length;ue<pe;ue++)if(_e=ge[ue],ne=J(_e[0],_e[1]),ne[0])return ne[1];return ne?ne[1]:k},p.range=function(g,k,J){var ne=new p.Range;return ne.begin=g,ne.end=k,ne.excl=J,ne};var ie=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];p.ivar=function(g){return ie.indexOf(g)!==-1&&(g+="$"),g};function F(g){g.$$frozen&&S(p.FrozenError,"can't modify frozen "+g.$class()+": "+g,new Map([["receiver",g]]))}p.deny_frozen_access=F,p.freeze=function(g){return E(g,"$$frozen",!0),g.hasOwnProperty("$$id")||E(g,"$$id",z()),g.hasOwnProperty("$$meta")?g.$$meta.$freeze():E(g,"$$meta",null),g.hasOwnProperty("$$comparable")||E(g,"$$comparable",null),Object.seal(g),g};function V(g,k){var J=Object.getOwnPropertyNames(g),ne=J.length,ue,_e,ge;for(ue=0;ue<ne;ue++)_e=J[ue],_e[0]!=="$"&&(ge=Object.getOwnPropertyDescriptor(g,_e),ge&&ge.enumerable&&k(_e,ge))}p.each_ivar=V,p.freeze_props=function(g){var k={get:null,set:function(J){F(g)},enumerable:!0};V(g,function(J,ne){ne.writable&&(k.get=se(ne.value),Object.defineProperty(g,J,k))})},p.escape_regexp=function(g){return g.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},p.global_regexp=function(g){return g.global?g:(g.$$g==null?g.$$g=new RegExp(g.source,(g.multiline?"gm":"g")+(g.ignoreCase?"i":"")):g.$$g.lastIndex=null,g.$$g)},p.global_multiline_regexp=function(g){var k,J;return g.global&&g.multiline?g:(J="gm"+(g.ignoreCase?"i":""),g.multiline?(g.$$g==null&&(g.$$g=new RegExp(g.source,J)),k=g.$$g):(g.$$gm==null&&(g.$$gm=new RegExp(g.source,J)),k=g.$$gm),k.lastIndex=null,k)},p.regexp=function(g,k){for(var J,ne=typeof k<"u"&&k&&k.indexOf("i")>=0,ue=0,_e=g.length;ue<_e;ue++)J=g[ue],J instanceof RegExp&&(J.ignoreCase!==ne&&p.Kernel.$warn("ignore case doesn't match for "+J.source.$inspect(),new Map([["uplevel",1]])),J=J.source),J===""&&(J="(?:"+J+")"),g[ue]=J;return k?new RegExp(g.join(""),k):new RegExp(g.join(""))},p.modules={},p.loaded_features=["corelib/runtime"],p.current_dir=".",p.require_table={"corelib/runtime":!0},p.normalize=function(g){var k,J,ne=[],ue="/";p.current_dir!=="."&&(g=p.current_dir.replace(/\/*$/,"/")+g),g=g.replace(/^\.\//,""),g=g.replace(/\.(rb|opal|js)$/,""),k=g.split(ue);for(var _e=0,ge=k.length;_e<ge;_e++)J=k[_e],J!==""&&(J===".."?ne.pop():ne.push(J));return ne.join(ue)},p.loaded=function(g){var k,J,ne;for(k=0,J=g.length;k<J;k++)ne=p.normalize(g[k]),!p.require_table[ne]&&(p.loaded_features.push(ne),p.require_table[ne]=!0)},p.load_normalized=function(g){p.loaded([g]);var k=p.modules[g];if(k){var J=k(p);if(typeof Promise<"u"&&J instanceof Promise)return J.then(se(!0))}else{var ne=p.config.missing_require_severity,ue="cannot load such file -- "+g;ne==="error"?S(p.LoadError,ue):ne==="warning"&&A.warn("WARNING: LoadError: "+ue)}return!0},p.load=function(g){return g=p.normalize(g),p.load_normalized(g)},p.require=function(g){return g=p.normalize(g),p.require_table[g]?!1:p.load_normalized(g)},p.encodings=Object.create(null),p.set_encoding=function(g,k,J){typeof J>"u"&&(J="encoding"),(typeof g=="string"||g.$$frozen===!0)&&S(p.FrozenError,"can't modify frozen String");var ne=p.find_encoding(k);return ne===g[J]||(g[J]=ne),g},p.find_encoding=function(g){var k=p.encodings,J=k[g]||k[g.toUpperCase()];return J||S(p.ArgumentError,"unknown encoding name - "+g),J},p.enc=function(g,k){var J=new String(g);return J=p.set_encoding(J,k),J.internal_encoding=J.encoding,J},p.binary=function(g){var k=new String(g);return p.set_encoding(k,"binary","internal_encoding")},p.last_promise=null,p.promise_unhandled_exception=!1,p.queue=function(g){if(p.last_promise)return p.last_promise=p.last_promise.then(function(){if(!p.promise_unhandled_exception)return g(p)}).catch(function(J){p.respond_to(J,"$full_message")&&(J=J.$full_message()),A.error(J),p.promise_unhandled_exception=!0,p.exit(1)}),p.last_promise;var k=g(p);return typeof Promise=="function"&&typeof k=="object"&&k instanceof Promise&&(p.last_promise=k),k};function Y(g,k){return typeof g=="number"&&typeof k=="number"}p.rb_plus=function(g,k){return Y(g,k)?g+k:g["$+"](k)},p.rb_minus=function(g,k){return Y(g,k)?g-k:g["$-"](k)},p.rb_times=function(g,k){return Y(g,k)?g*k:g["$*"](k)},p.rb_divide=function(g,k){return Y(g,k)?g/k:g["$/"](k)},p.rb_lt=function(g,k){return Y(g,k)?g<k:g["$<"](k)},p.rb_gt=function(g,k){return Y(g,k)?g>k:g["$>"](k)},p.rb_le=function(g,k){return Y(g,k)?g<=k:g["$<="](k)},p.rb_ge=function(g,k){return Y(g,k)?g>=k:g["$>="](k)};function ee(g,k){return typeof g=="number"&&typeof k=="number"||typeof g=="string"&&typeof k=="string"}function $e(g,k){return ee(g,k)?g===k:M(g["$=="](k))}p.eqeq=$e,p.eqeqeq=function(g,k){return ee(g,k)?g===k:M(g["$==="](k))},p.neqeq=function(g,k){return ee(g,k)?g!==k:M(g["$!="](k))},p.not=function(g){return g==null||g===!1||h===g?!0:g===!0||g["$!"].$$pristine?!1:M(g["$!"]())};function se(g){return function(){return g}}p.return_val=se,p.return_self=function(){return this},p.return_ivar=function(g){return function(){return this[g]==null?h:this[g]}},p.assign_ivar=function(g){return function(k){return F(this),this[g]=k}},p.assign_ivar_val=function(g,k){return function(){return F(this),this[g]=k}},p.ensure_kwargs=function(g){if(g==null)return new Map;if(g.$$is_hash)return g;S(p.ArgumentError,"expected kwargs")},p.get_kwarg=function(g,k){var J=p.hash_get(g,k);return J===void 0&&S(p.ArgumentError,"missing keyword: "+k),J},p.large_array_unpack=function(g){var k=g.split(","),J=k.length,ne;for(ne=0;ne<J;ne++)switch(k[ne][0]){case void 0:k[ne]=h;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":k[ne]=+k[ne]}return k},p.opal32_init=se(1332765036);function oe(g,k){return g<<k|g>>>32-k}p.opal32_add=function(g,k){return g^=k,g=oe(g,1),g},p.BasicObject=x=v("BasicObject",null),p.Object=I=v("Object",p.BasicObject),p.Module=Q=v("Module",p.Object),p.Class=W=v("Class",p.Module),p.Opal=P=a("Opal"),p.Kernel=K=a("Kernel"),U(p.BasicObject,p.Class.$$prototype),U(p.Object,p.Class.$$prototype),U(p.Module,p.Class.$$prototype),U(p.Class,p.Class.$$prototype),x.$$const.BasicObject=x,c(I,"BasicObject",x),c(I,"Object",I),c(I,"Module",Q),c(I,"Class",W),c(I,"Opal",P),c(I,"Kernel",K),x.$$class=W,I.$$class=W,Q.$$class=W,W.$$class=W,P.$$class=Q,K.$$class=Q,E(I.$$prototype,"toString",function(){var g=this.$to_s();return g.$$is_string&&typeof g=="object"?g.valueOf():g}),E(I.$$prototype,"$require",p.require),p.top=new I,p.top.$to_s=p.top.$inspect=se("main"),p.top.$define_method=ce;function ce(){var g=ce.$$p;return ce.$$p=null,p.send(I,"define_method",arguments,g)}p.NilClass=v("NilClass",p.Object),c(I,"NilClass",p.NilClass),h=p.nil=new p.NilClass,h.$$id=j,h.call=h.apply=function(){S(p.LocalJumpError,"no block given")},h.$$frozen=!0,h.$$comparable=!1,Object.seal(h),p.thrower=function(g){var k={$thrower_type:g,$throw:function(J,ne){throw J==null&&(J=h),this.is_orphan&&!ne&&S(p.LocalJumpError,"unexpected "+g,J,g.$to_sym()),this.$v=J,this},is_orphan:!1};return k},Object.defineProperty(N,"@",{enumerable:!0,configurable:!0,get:function(){return M(N["!"])?N["!"].$backtrace():h},set:function(g){M(N["!"])?N["!"].$set_backtrace(g):S(p.ArgumentError,"$! not set")}}),p.t_eval_return=p.thrower("return"),TypeError.$$super=Error,p.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(n){var A=n.type_error,h=n.coerce_to,x=n.module,I=n.defs,Q=n.slice,W=n.eqeqeq,P=n.Kernel,K=n.truthy,p=n.Opal,B=n.nil,O=n.$$$;return n.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(X){var U=x(X,"Opal");I(U,"$bridge",function(j,y){return n.bridge(j,y)}),I(U,"$coerce_to!",function(j,y,z,N){var S,L,E=B;return S=Q(arguments,3),L=S,E=h(j,y,z,L),W(y,E)||P.$raise(A(j,y,z,E)),E},-4),I(U,"$coerce_to?",function(j,y,z,N){var S,L,E=B;return S=Q(arguments,3),L=S,!K(j["$respond_to?"](z))||(E=h(j,y,z,L),K(E["$nil?"]()))?B:(W(y,E)||P.$raise(A(j,y,z,E)),E)},-4),I(U,"$try_convert",function(j,y,z){return W(y,j)?j:K(j["$respond_to?"](z))?j.$__send__(z):B}),I(U,"$compare",function(j,y){var z=B;return z=j["$<=>"](y),K(z===B)&&P.$raise(O("ArgumentError"),"comparison of "+j.$class()+" with "+y.$class()+" failed"),z}),I(U,"$destructure",function(j){if(j.length==1)return j[0];if(j.$$is_array)return j;for(var y=new Array(j.length),z=0,N=y.length;z<N;z++)y[z]=j[z];return y}),I(U,"$respond_to?",function(j,y,z){return z==null&&(z=!1),j==null||!j.$$class?!1:j["$respond_to?"](y,z)},-3),I(U,"$instance_variable_name!",function(j){return j=p["$coerce_to!"](j,O("String"),"to_str"),K(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(j))||P.$raise(O("NameError").$new("'"+j+"' is not allowed as an instance variable name",j)),j}),I(U,"$class_variable_name!",function(j){return j=p["$coerce_to!"](j,O("String"),"to_str"),K(j.length<3||j.slice(0,2)!=="@@")&&P.$raise(O("NameError").$new("`"+j+"' is not allowed as a class variable name",j)),j}),I(U,"$const_name?",function(j){return typeof j!="string"&&(j=p["$coerce_to!"](j,O("String"),"to_str")),j[0]===j[0].toUpperCase()}),I(U,"$const_name!",function(j){var y=this;return K(O("::","String","skip_raise")?"constant":B)&&(j=p["$coerce_to!"](j,O("String"),"to_str")),(!j||j[0]!=j[0].toUpperCase())&&y.$raise(O("NameError"),"wrong constant name "+j),j}),I(U,"$pristine",function(j,y){var z,N;z=Q(arguments,1),N=z;for(var S,L,E=N.length-1;E>=0;E--)S=N[E],L=j.$$prototype[n.jsid(S)],L&&!L.$$stub&&(L.$$pristine=!0);return B},-2);var re=[];return I(U,"$inspect",function(j){var y=B,z=!1;return function(){try{try{return j===null?"null":j===void 0?"undefined":typeof j.$$class>"u"?Object.prototype.toString.apply(j):typeof j.$inspect!="function"||j.$inspect.$$stub||re.indexOf(j.$__id__())!==-1?"#<"+j.$$class+":0x"+j.$__id__().$to_s(16)+">":(re.push(j.$__id__()),z=!0,j.$inspect())}catch(N){if(n.rescue(N,[O("Exception")])){y=N;try{return"#<"+j.$$class+":0x"+j.$__id__().$to_s(16)+">"}finally{n.pop_exception(N)}}else throw N}}finally{z&&re.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(n){var A=n.truthy,h=n.coerce_to,x=n.const_set,I=n.Object,Q=n.return_ivar,W=n.assign_ivar,P=n.ivar,K=n.deny_frozen_access,p=n.freeze,B=n.prop,O=n.jsid,X=n.each_ivar,U=n.klass,re=n.Opal,Z=n.Kernel,j=n.defs,y=n.send,z=n.def,N=n.eqeqeq,S=n.Module,L=n.rb_lt,E=n.rb_gt,M=n.slice,C=n.to_a,w=n.return_val,m=n.eqeq,i=n.not,l=n.rb_le,b=n.range,_=n.send2,c=n.find_super,o=n.alias,v=[],T=n.nil,d=n.$$$;return n.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(a,$,r){var e=U(a,$,"Module"),t=[e].concat(r),s=n.$r(t);function u(H){if(H.$$is_string)return H;var D=re.$try_convert(H,d("String"),"to_str");if(D.$$is_string)return D;D===T?Z.$raise(d("TypeError"),""+H+" is not a symbol nor a string"):Z.$raise(d("TypeError"),"can't convert "+H.$class()+" to String ("+H.$class()+"#to_str gives "+D.$class())}j(e,"$allocate",function(){var D=this,G=n.allocate_module(T,function(){});return D!==n.Module&&Object.setPrototypeOf(G,D.$$prototype),G}),z(e,"$initialize",function H(){var D=H.$$p||T,G=this;return H.$$p=null,D!==T?y(G,"module_eval",[],D.$to_proc()):T}),z(e,"$===",function(D){var G=this;return A(D==null)?!1:n.is_a(D,G)}),z(e,"$<",function(D){var G=this;N(S,D)||Z.$raise(d("TypeError"),"compared with non class/module");var te=G,ae,le,fe;if(te===D)return!1;for(le=0,ae=n.ancestors(G),fe=ae.length;le<fe;le++)if(ae[le]===D)return!0;for(le=0,ae=n.ancestors(D),fe=ae.length;le<fe;le++)if(ae[le]===G)return!1;return T}),z(e,"$<=",function(D){var G=this,te=T;return A(te=G["$equal?"](D))?te:L(G,D)}),z(e,"$>",function(D){var G=this;return N(S,D)||Z.$raise(d("TypeError"),"compared with non class/module"),L(D,G)}),z(e,"$>=",function(D){var G=this,te=T;return A(te=G["$equal?"](D))?te:E(G,D)}),z(e,"$<=>",function(D){var G=this,te=T;return G===D?0:!N(S,D)||(te=L(G,D),A(te["$nil?"]()))?T:A(te)?-1:1}),z(e,"$alias_method",function(D,G){var te=this;return K(te),D=h(D,d("String"),"to_str"),G=h(G,d("String"),"to_str"),n.alias(te,D,G),te}),z(e,"$alias_native",function(D,G){var te=this;return G==null&&(G=D),K(te),n.alias_native(te,D,G),te},-2),z(e,"$ancestors",function(){var D=this;return n.ancestors(D)}),z(e,"$append_features",function(D){var G=this;return K(D),n.append_features(G,D),G}),z(e,"$attr_accessor",function(D){var G,te,ae=this;return G=M(arguments),te=G,y(ae,"attr_reader",C(te)),y(ae,"attr_writer",C(te))},-1),z(e,"$attr",function(D){var G,te,ae=this;return G=M(arguments),te=G,te.length==2&&(te[1]===!0||te[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),te[1]?ae.$attr_accessor(te[0]):ae.$attr_reader(te[0]),T):y(ae,"attr_reader",C(te))},-1),z(e,"$attr_reader",function(D){var G,te,ae=this;G=M(arguments),te=G,K(ae);for(var le=ae.$$prototype,fe=te.length-1;fe>=0;fe--){var de=te[fe],he=O(de),ve=P(de),me=Q(ve);n.prop(le,ve,T),me.$$parameters=[],me.$$arity=0,n.defn(ae,he,me)}return T},-1),z(e,"$attr_writer",function(D){var G,te,ae=this;G=M(arguments),te=G,K(ae);for(var le=ae.$$prototype,fe=te.length-1;fe>=0;fe--){var de=te[fe],he=O(de+"="),ve=P(de),me=W(ve);me.$$parameters=[["req"]],me.$$arity=1,n.prop(le,ve,T),n.defn(ae,he,me)}return T},-1),z(e,"$autoload",function(D,G){var te=this;return K(te),s("Opal")["$const_name?"](D)||Z.$raise(d("NameError"),"autoload must be constant name: "+D),G==""&&Z.$raise(d("ArgumentError"),"empty file name"),te.$$const.hasOwnProperty(D)||(te.$$autoload||(te.$$autoload={}),n.const_cache_version++,te.$$autoload[D]={path:G,loaded:!1,required:!1,success:!1,exception:!1},te.$const_added&&!te.$const_added.$$pristine&&te.$const_added(D)),T}),z(e,"$autoload?",function(D){var G=this;if(G.$$autoload&&G.$$autoload[D]&&!G.$$autoload[D].required&&!G.$$autoload[D].success)return G.$$autoload[D].path;for(var te=G.$ancestors(),ae=0,le=te.length;ae<le;ae++)if(te[ae].$$autoload&&te[ae].$$autoload[D]&&!te[ae].$$autoload[D].required&&!te[ae].$$autoload[D].success)return te[ae].$$autoload[D].path;return T}),z(e,"$class_variables",function(){var D=this;return Object.keys(n.class_variables(D))}),z(e,"$class_variable_get",function(D){var G=this;return D=re["$class_variable_name!"](D),n.class_variable_get(G,D,!1)}),z(e,"$class_variable_set",function(D,G){var te=this;return K(te),D=re["$class_variable_name!"](D),n.class_variable_set(te,D,G)}),z(e,"$class_variable_defined?",function(D){var G=this;return D=re["$class_variable_name!"](D),n.class_variables(G).hasOwnProperty(D)}),z(e,"$const_added",w(T)),re.$pristine(e,"const_added"),z(e,"$remove_class_variable",function(D){var G=this;if(K(G),D=re["$class_variable_name!"](D),n.hasOwnProperty.call(G.$$cvars,D)){var te=G.$$cvars[D];return delete G.$$cvars[D],te}else Z.$raise(d("NameError"),"cannot remove "+D+" for "+G)}),z(e,"$constants",function(D){var G=this;return D==null&&(D=!0),n.constants(G,D)},-1),j(e,"$constants",function(D){var G=this;if(D==null){var te=(G.$$nesting||[]).concat(I),ae,le={},fe,de;for(fe=0,de=te.length;fe<de;fe++)for(ae in te[fe].$$const)le[ae]=!0;return Object.keys(le)}else return n.constants(G,D)},-1),j(e,"$nesting",function(){var D=this;return D.$$nesting||[]}),z(e,"$const_defined?",function(D,G){var te=this;G==null&&(G=!0),D=s("Opal")["$const_name!"](D),A(D["$=~"](d(re,"CONST_NAME_REGEXP")))||Z.$raise(d("NameError").$new("wrong constant name "+D,D));var ae,le=[te],fe,de;for(G&&(le=le.concat(n.ancestors(te)),te.$$is_module&&(le=le.concat([I]).concat(n.ancestors(I)))),fe=0,de=le.length;fe<de;fe++)if(ae=le[fe],ae.$$const[D]!=null||ae.$$autoload&&ae.$$autoload[D]&&!ae.$$autoload[D].required&&!ae.$$autoload[D].success)return!0;return!1},-2),z(e,"$const_get",function(D,G){var te=this;return G==null&&(G=!0),D=s("Opal")["$const_name!"](D),D.indexOf("::")===0&&D!=="::"&&(D=D.slice(2)),A(D.indexOf("::")!=-1&&D!="::")?y(D.$split("::"),"inject",[te],function(le,fe){return le==null&&(le=T),fe==null&&(fe=T),le.$const_get(fe)}):(A(D["$=~"](d(re,"CONST_NAME_REGEXP")))||Z.$raise(d("NameError").$new("wrong constant name "+D,D)),G?n.$$([te],D):n.const_get_local(te,D))},-2),z(e,"$const_missing",function(D){var G=this,te=T;return te=m(G,I)?D:""+G+"::"+D,Z.$raise(d("NameError").$new("uninitialized constant "+te,D))}),z(e,"$const_set",function(D,G){var te=this;return K(te),D=re["$const_name!"](D),(A(D["$!~"](d(re,"CONST_NAME_REGEXP")))||A(D["$start_with?"]("::")))&&Z.$raise(d("NameError").$new("wrong constant name "+D,D)),x(te,D,G),G}),z(e,"$public_constant",w(T)),z(e,"$define_method",function H(D,G){var te=H.$$p||T,ae=this,le=T,fe=T,de=T;return H.$$p=null,K(ae),G===void 0&&te===T&&Z.$raise(d("ArgumentError"),"tried to create a Proc object without a block"),D=u(D),A(G!==void 0)&&(te=N(d("Proc"),le=G)?G:N(d("Method"),le)?G.$to_proc().$$unbound:N(d("UnboundMethod"),le)?n.wrap_method_body(G.$$method):Z.$raise(d("TypeError"),"wrong argument type "+G.$class()+" (expected Proc/Method/UnboundMethod)"),A(!G.$$is_proc)&&(fe=G.$owner(),A(fe.$$is_class)&&i(l(ae,fe))&&(de=A(fe.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+fe,Z.$raise(d("TypeError"),de)))),typeof Proxy<"u"&&(te.$$proxy_target=te,te=new Proxy(te,{apply:function(he,ve,me){var be=he.$$jsid,ie=he.$$is_lambda;he.$$jsid=D,he.$$is_lambda=!0;try{return he.apply(ve,me)}catch(F){if(F===he.$$brk||F===he.$$ret)return F.$v;throw F}finally{he.$$jsid=be,he.$$is_lambda=ie}}})),te.$$jsid=D,te.$$s=null,te.$$def=te,te.$$define_meth=!0,n.defn(ae,O(D),te)},-2),z(e,"$freeze",function(){var D=this;return A(D["$frozen?"]())?D:(D.hasOwnProperty("$$base_module")||B(D,"$$base_module",null),p(D))}),z(e,"$remove_method",function(D){var G,te,ae=this;G=M(arguments),te=G;for(var le=0;le<te.length;le++){var fe=u(te[le]);K(ae),n.rdef(ae,"$"+fe)}return ae},-1),z(e,"$singleton_class?",function(){var D=this;return!!D.$$is_singleton}),z(e,"$include",function(D){var G,te,ae=this;G=M(arguments),te=G;for(var le=te.length-1;le>=0;le--){var fe=te[le];fe.$$is_module||Z.$raise(d("TypeError"),"wrong argument type "+fe.$class()+" (expected Module)"),fe.$append_features(ae),fe.$included(ae)}return ae},-1),z(e,"$included_modules",function(){var D=this;return n.included_modules(D)}),z(e,"$include?",function(D){var G=this;D.$$is_module||Z.$raise(d("TypeError"),"wrong argument type "+D.$class()+" (expected Module)");var te,ae,le,fe=n.ancestors(G);for(te=0,ae=fe.length;te<ae;te++)if(le=fe[te],le===D&&le!==G)return!0;return!1}),z(e,"$instance_method",function(D){var G=this,te=G.$$prototype[O(D)];return(!te||te.$$stub)&&Z.$raise(d("NameError").$new("undefined method `"+D+"' for class `"+G.$name()+"'",D)),d("UnboundMethod").$new(G,te.$$owner||G,te,D)}),z(e,"$instance_methods",function(D){var G=this;return D==null&&(D=!0),A(D)?n.instance_methods(G):n.own_instance_methods(G)},-1),z(e,"$included",w(T)),z(e,"$extended",w(T)),z(e,"$extend_object",function(D){return K(D),T}),z(e,"$method_added",function(D){return M(arguments),T},-1),z(e,"$method_removed",function(D){return M(arguments),T},-1),z(e,"$method_undefined",function(D){return M(arguments),T},-1),z(e,"$module_eval",function H(D){var G=H.$$p||T,te,ae,le,fe=this,de=T,he=T,ve=T,me=T,be=T,ie=T;H.$$p=null,te=M(arguments),ae=te,A(G["$nil?"]())&&A(!!n.compile)?(A(b(1,3,!1)["$cover?"](ae.$size()))||Z.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(C(ae)),de=le[0]==null?T:le[0],he=le[1]==null?T:le[1],le[2]==null||le[2],ve=new Map([["file",A(me=he)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),ie=re.$compile(de,be),G=y(Z,"proc",[],function Y(){var ee=Y.$$s==null?this:Y.$$s;return new Function("Opal,self","return "+ie)(n,ee)},{$$s:fe})):A(ae["$any?"]())&&Z.$raise(d("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var F=G.$$s,V;return G.$$s=null,V=G.apply(fe,[fe]),G.$$s=F,V},-1),z(e,"$module_exec",function H(D){var G=H.$$p||T,te,ae,le=this;H.$$p=null,te=M(arguments),ae=te,G===T&&Z.$raise(d("LocalJumpError"),"no block given");var fe=G.$$s,de;return G.$$s=null,de=G.apply(le,ae),G.$$s=fe,de},-1),z(e,"$method_defined?",function(D){var G=this,te=G.$$prototype[O(D)];return!!te&&!te.$$stub}),z(e,"$module_function",function(D){var G,te,ae=this;if(G=M(arguments),te=G,K(ae),te.length===0)return ae.$$module_function=!0,T;for(var le=0,fe=te.length;le<fe;le++){var de=te[le],he=O(de),ve=ae.$$prototype[he];n.defs(ae,he,ve)}return te.length===1?te[0]:te},-1),z(e,"$name",function(){var D=this;if(D.$$full_name)return D.$$full_name;for(var G=[],te=D;te;){if(te.$$name===T||te.$$name==null)return T;if(G.unshift(te.$$name),te=te.$$base_module,te===I)break}return G.length===0?T:D.$$full_name=G.join("::")}),z(e,"$prepend",function(D){var G,te,ae=this;G=M(arguments),te=G,te.length===0&&Z.$raise(d("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=te.length-1;le>=0;le--){var fe=te[le];fe.$$is_module||Z.$raise(d("TypeError"),"wrong argument type "+fe.$class()+" (expected Module)"),fe.$prepend_features(ae),fe.$prepended(ae)}return ae},-1),z(e,"$prepend_features",function(D){var G=this;return K(D),G.$$is_module||Z.$raise(d("TypeError"),"wrong argument type "+G.$class()+" (expected Module)"),n.prepend_features(G,D),G}),z(e,"$prepended",w(T)),z(e,"$remove_const",function(D){var G=this;return K(G),n.const_remove(G,D)}),z(e,"$to_s",function(){var D=this,G=T;return A(G=n.Module.$name.call(D))?G:"#<"+(D.$$is_module?"Module":"Class")+":0x"+D.$__id__().$to_s(16)+">"}),z(e,"$undef_method",function(D){var G,te,ae=this;G=M(arguments),te=G;for(var le=0;le<te.length;le++){var fe=u(te[le]);K(ae),n.udef(ae,"$"+fe)}return ae},-1),z(e,"$instance_variables",function(){var D=this,G=T;G=(n.Module.$$nesting=t,D.$constants());var te=[];return X(D,function(ae){ae!=="constructor"&&!G["$include?"](ae)&&te.push("@"+ae)}),te});function f(H,D){var G,te=n.own_instance_methods(H);for(G=0;G<te.length;G++){var ae=te[G],le=O(ae),fe=H.$$prototype[le],de=n.wrap_method_body(fe);de.$$jsid=ae,n.defn(D,le,de)}}function q(H,D){for(var G=H.$$own_included_modules,te=G.length-1;te>=0;te--)n.append_features(G[te],D)}function R(H,D){for(var G=H.$$own_prepended_modules,te=G.length-1;te>=0;te--)n.prepend_features(G[te],D)}return z(e,"$initialize_copy",function(D){var G=this;return f(D,G),q(D,G),R(D,G),G.$$cloned_from=D.$$cloned_from.concat(D),G.$copy_class_variables(D),G.$copy_constants(D)}),z(e,"$initialize_dup",function H(D){var G=H.$$p||T,te=this;return H.$$p=null,_(te,c(te,"initialize_dup",H,!1,!0),"initialize_dup",[D],G),te.$copy_singleton_methods(D)}),z(e,"$copy_class_variables",function(D){var G=this;for(var te in D.$$cvars)G.$$cvars[te]=D.$$cvars[te]}),z(e,"$copy_constants",function(D){var G=this,te,ae=D.$$const;for(te in ae)x(G,te,ae[te])}),z(e,"$refine",function H(D){var G=H.$$p||T,te,ae=this,le=T,fe=T,de=T;return H.$$p=null,te=[ae,T,T],le=te[0],fe=te[1],de=te[2],de=n.id(D),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?fe=ae.$$refine_modules[de]=d("Refinement").$new():fe=ae.$$refine_modules[de],fe.refinement_module=le,fe.refined_class=D,y(fe,"class_exec",[],G.$to_proc()),fe}),z(e,"$refinements",function(){var D=this,G=D.$$refine_modules,te=new Map;if(typeof G>"u")return te;for(var ae in G)te["$[]="](G[ae].refined_class,G[ae]);return te}),z(e,"$using",function(D){return Z.$raise("Module#using is not permitted in methods")}),o(e,"class_eval","module_eval"),o(e,"class_exec","module_exec"),o(e,"inspect","to_s")}("::",null,v),function(a,$){var r=U(a,$,"Refinement"),e=r.$$prototype;return e.refinement_module=e.refined_class=T,r.$attr_reader("refined_class"),z(r,"$inspect",function t(){var s=t.$$p||T,u=this;return t.$$p=null,A(u.refinement_module)?"#<refinement:"+u.refined_class.$inspect()+"@"+u.refinement_module.$inspect()+">":_(u,c(u,"inspect",t,!1,!0),"inspect",[],s)})}("::",S)};Opal.modules["corelib/class"]=function(n){var A=n.klass,h=n.send,x=n.defs,I=n.def,Q=n.ensure_kwargs,W=n.hash_get,P=n.eqeq,K=n.truthy,p=n.rb_plus,B=n.return_val,O=n.slice,X=n.send2,U=n.find_super,re=n.Kernel,Z=n.alias,j=n.top,y=[],z=n.nil,N=n.$$$;return n.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),j.$require("corelib/module"),function(S,L,E){var M=A(S,L,"Class"),C=[M].concat(E),w=n.$r(C);return x(M,"$new",function m(i){var l=m.$$p||z;if(m.$$p=null,i==null&&(i=w("Object")),!i.$$is_class)throw n.TypeError.$new("superclass must be a Class");var b=n.allocate_class(z,i);return i.$inherited(b),l!==z&&h(b,"class_eval",[],l.$to_proc()),b},-1),I(M,"$allocate",function(){var i=this,l=new i.$$constructor;return l.$$id=n.uid(),l}),I(M,"$clone",function(i){var l,b=this,_=z;return i=Q(i),l=W(i,"freeze"),l==null&&(l=z),K(l["$nil?"]())||P(l,!0)||P(l,!1)||b.$raise(w("ArgumentError"),"unexpected value for freeze: "+l.$class()),_=n.allocate_class(z,b.$$super),_.$copy_instance_variables(b),_.$copy_singleton_methods(b),_.$initialize_clone(b,new Map([["freeze",l]])),(P(l,!0)||K(l["$nil?"]())&&K(b["$frozen?"]()))&&_.$freeze(),_},-1),I(M,"$dup",function(){var i=this,l=z;return l=n.allocate_class(z,i.$$super),l.$copy_instance_variables(i),l.$initialize_dup(i),l}),I(M,"$descendants",function(){var i=this;return p(i.$subclasses(),h(i.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),I(M,"$inherited",B(z)),I(M,"$new",function m(i){var l=m.$$p||z,b,_,c=this;m.$$p=null,b=O(arguments),_=b;var o=c.$allocate();return n.send(o,o.$initialize,_,l),o},-1),I(M,"$subclasses",function(){var i=this;if(typeof WeakRef<"u"){var l,b,_=[];for(l=0;l<i.$$subclasses.length;l++)b=i.$$subclasses[l].deref(),b!==void 0&&_.push(b);return _}else return i.$$subclasses}),I(M,"$superclass",function(){var i=this;return i.$$super||z}),I(M,"$to_s",function m(){m.$$p;var i=this;m.$$p=null;var l=i.$$singleton_of;return l&&l.$$is_a_module?"#<Class:"+l.$name()+">":l?"#<Class:#<"+l.$$class.$name()+":0x"+n.id(l).$to_s(16)+">>":X(i,U(i,"to_s",m,!1,!0),"to_s",[],null)}),I(M,"$attached_object",function(){var i=this;if(i.$$singleton_of!=null)return i.$$singleton_of;re.$raise(N("TypeError"),"`"+i+"' is not a singleton class")}),Z(M,"inspect","to_s")}("::",null,y)};Opal.modules["corelib/basic_object"]=function(n){var A=n.klass,h=n.slice,x=n.def,I=n.alias,Q=n.return_val,W=n.Opal,P=n.truthy,K=n.range,p=n.Kernel,B=n.to_a,O=n.send,X=n.eqeq,U=n.rb_ge,re=n.nil,Z=n.$$$;return n.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(j,y){var z=A(j,y,"BasicObject");return x(z,"$initialize",function(S){return h(arguments),re},-1),x(z,"$==",function(S){var L=this;return L===S}),x(z,"$eql?",function(S){var L=this;return L["$=="](S)}),I(z,"equal?","=="),x(z,"$__id__",function(){var S=this;return S.$$id!=null||n.prop(S,"$$id",n.uid()),S.$$id}),x(z,"$__send__",function N(S,L){var E=N.$$p||re,M,C,w=this;N.$$p=null,M=h(arguments,1),C=M,S.$$is_string||w.$raise(Z("TypeError"),""+w.$inspect()+" is not a symbol nor a string");var m=w[n.jsid(S)];return m?(E!==re&&(m.$$p=E),m.apply(w,C)):(E!==re&&(w.$method_missing.$$p=E),w.$method_missing.apply(w,[S].concat(C)))},-2),x(z,"$!",Q(!1)),W.$pristine("!"),x(z,"$!=",function(S){var L=this;return L["$=="](S)["$!"]()}),x(z,"$instance_eval",function N(S){var L=N.$$p||re,E,M,C,w=this,m=re,i=re,l=re,b=re,_=re,c=re;if(N.$$p=null,E=h(arguments),M=E,P(L["$nil?"]())&&P(!!n.compile))P(K(1,3,!1)["$cover?"](M.$size()))||p.$raise(Z("ArgumentError"),"wrong number of arguments (0 for 1..3)"),C=[].concat(B(M)),m=C[0]==null?re:C[0],i=C[1]==null?re:C[1],C[2]==null||C[2],l=new Map([["file",P(b=i)?b:"(eval)"],["eval",!0]]),_=new Map([["arity_check",!1]]).$merge(l),c=W.$compile(m,_),L=O(p,"proc",[],function T(){var d=T.$$s==null?this:T.$$s;return new Function("Opal,self","return "+c)(n,d)},{$$s:w});else{if(P(L["$nil?"]())&&P(U(M.$length(),1))&&X(M.$first()["$[]"](0),"@"))return w.$instance_variable_get(M.$first());P(M["$any?"]())&&p.$raise(Z("ArgumentError"),"wrong number of arguments ("+M.$size()+" for 0)")}var o=L.$$s,v;if(L.$$s=null,w.$$is_a_module){w.$$eval=!0;try{v=L.call(w,w)}finally{w.$$eval=!1}}else v=L.call(w,w);return L.$$s=o,v},-1),x(z,"$instance_exec",function N(S){var L=N.$$p||re,E,M,C=this;N.$$p=null,E=h(arguments),M=E,P(L)||p.$raise(Z("ArgumentError"),"no block given");var w=L.$$s,m;if(L.$$s=null,C.$$is_a_module){C.$$eval=!0;try{m=L.apply(C,M)}finally{C.$$eval=!1}}else m=L.apply(C,M);return L.$$s=w,m},-1),x(z,"$singleton_method_added",function(S){return h(arguments),re},-1),x(z,"$singleton_method_removed",function(S){return h(arguments),re},-1),x(z,"$singleton_method_undefined",function(S){return h(arguments),re},-1),x(z,"$method_missing",function N(S,L){N.$$p;var E,M,C=this,w=re;return N.$$p=null,E=h(arguments,1),M=E,w=W.$inspect(C),p.$raise(Z("NoMethodError").$new("undefined method `"+S+"' for "+w,S,M),re,p.$caller(1))},-2),W.$pristine(z,"method_missing"),x(z,"$respond_to_missing?",function(S,L){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(n){var A=n.truthy,h=n.coerce_to,x=n.respond_to,I=n.Opal,Q=n.deny_frozen_access,W=n.freeze,P=n.freeze_props,K=n.jsid,p=n.each_ivar,B=n.module,O=n.return_val,X=n.def,U=n.Kernel,re=n.gvars,Z=n.slice,j=n.send,y=n.to_a,z=n.ensure_kwargs,N=n.hash_get,S=n.eqeq,L=n.rb_plus,E=n.extract_kwargs,M=n.eqeqeq,C=n.return_self,w=n.rb_le,m=n.rb_lt,i=n.Object,l=n.alias,b=n.klass,_=[],c=n.nil,o=n.$$$;return n.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(v,T){var d=B(v,"Kernel"),a=[d].concat(T),$=n.$r(a);X(d,"$=~",O(!1)),X(d,"$!~",function(t){var s=this;return s["$=~"](t)["$!"]()}),X(d,"$===",function(t){var s=this,u=c;return A(u=s.$object_id()["$=="](t.$object_id()))?u:s["$=="](t)}),X(d,"$<=>",function(t){var s=this;s.$$comparable=!0;var u=s["$=="](t);return u&&u!==c?0:c}),X(d,"$method",function(t){var s=this,u=s[K(t)];return(!u||u.$$stub)&&U.$raise(o("NameError").$new("undefined method `"+t+"' for class `"+s.$class()+"'",t)),o("Method").$new(s,u.$$owner||s.$class(),u,t)}),X(d,"$methods",function(t){var s=this;return t==null&&(t=!0),A(t)?n.methods(s):n.own_methods(s)},-1),X(d,"$public_methods",function(t){var s=this;return t==null&&(t=!0),A(t)?n.methods(s):n.receiver_methods(s)},-1),X(d,"$Array",function(t){var s;return t===c?[]:t.$$is_array?t:(s=I["$coerce_to?"](t,o("Array"),"to_ary"),s!==c||(s=I["$coerce_to?"](t,o("Array"),"to_a"),s!==c)?s:[t])}),X(d,"$at_exit",function e(){var t=e.$$p||c,s=c;return re.__at_exit__==null&&(re.__at_exit__=c),e.$$p=null,re.__at_exit__=A(s=re.__at_exit__)?s:[],re.__at_exit__["$<<"](t),t}),X(d,"$caller",function(t,s){t==null&&(t=1),s==null&&(s=c);var u,f;u=new Error().$backtrace(),f=[];for(var q=t+1,R=u.length;q<R;q++)u[q].match(/runtime\.js/)||f.push(u[q]);return s!=c&&(f=f.slice(0,s)),f},-1),X(d,"$caller_locations",function(t){var s,u,f=this;return s=Z(arguments),u=s,j(j(f,"caller",y(u)),"map",[],function(R){return R==null&&(R=c),o(o(o("Thread"),"Backtrace"),"Location").$new(R)})},-1),X(d,"$class",function(){var t=this;return t.$$class}),X(d,"$copy_instance_variables",function(t){var s=this,u=Object.keys(t),f,q,R;for(f=0,q=u.length;f<q;f++)R=u[f],R.charAt(0)!=="$"&&t.hasOwnProperty(R)&&(s[R]=t[R])}),X(d,"$copy_singleton_methods",function(t){var s=this,u,f,q,R;if(t.hasOwnProperty("$$meta")&&t.$$meta!==null){var H=n.get_singleton_class(t),D=n.get_singleton_class(s);for(q=Object.getOwnPropertyNames(H.$$prototype),u=0,R=q.length;u<R;u++)f=q[u],n.is_method(f)&&(D.$$prototype[f]=H.$$prototype[f]);D.$$const=Object.assign({},H.$$const),Object.setPrototypeOf(D.$$prototype,Object.getPrototypeOf(H.$$prototype))}for(u=0,q=Object.getOwnPropertyNames(t),R=q.length;u<R;u++)f=q[u],f.charAt(0)==="$"&&f.charAt(1)!=="$"&&t.hasOwnProperty(f)&&(s[f]=t[f])}),X(d,"$clone",function(t){var s,u=this,f=c;return t=z(t),s=N(t,"freeze"),s==null&&(s=c),A(s["$nil?"]())||S(s,!0)||S(s,!1)||u.$raise($("ArgumentError"),"unexpected value for freeze: "+s.$class()),f=u.$class().$allocate(),f.$copy_instance_variables(u),f.$copy_singleton_methods(u),f.$initialize_clone(u,new Map([["freeze",s]])),(S(s,!0)||A(s["$nil?"]())&&A(u["$frozen?"]()))&&f.$freeze(),f},-1),X(d,"$initialize_clone",function(t,s){var u=this;return s=z(s),N(s,"freeze"),u.$initialize_copy(t),u},-2),X(d,"$define_singleton_method",function e(t,s){var u=e.$$p||c,f=this;return e.$$p=null,j(f.$singleton_class(),"define_method",[t,s],u.$to_proc())},-2),X(d,"$dup",function(){var t=this,s=c;return s=t.$class().$allocate(),s.$copy_instance_variables(t),s.$initialize_dup(t),s}),X(d,"$initialize_dup",function(t){var s=this;return s.$initialize_copy(t)}),X(d,"$enum_for",function e(t,s){var u=e.$$p||c,f,q,R,H=this;return e.$$p=null,f=Z(arguments),f.length>0&&(q=f.shift()),q==null&&(q="each"),R=f,j(o("Enumerator"),"for",[H,q].concat(y(R)),u.$to_proc())},-1),X(d,"$equal?",function(t){var s=this;return s===t}),X(d,"$exit",function(t){var s=c,u=c;for(re.__at_exit__==null&&(re.__at_exit__=c),t==null&&(t=!0),re.__at_exit__=A(s=re.__at_exit__)?s:[];!A(re.__at_exit__["$empty?"]());)u=re.__at_exit__.$pop(),u.$call();return t.$$is_boolean?t=t?0:1:t=h(t,o("Integer"),"to_int"),n.exit(t),c},-1),X(d,"$extend",function(t){var s,u,f=this;s=Z(arguments),u=s,u.length==0&&f.$raise(o("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),Q(f);for(var q=f.$singleton_class(),R=u.length-1;R>=0;R--){var H=u[R];H.$$is_module||U.$raise(o("TypeError"),"wrong argument type "+H.$class()+" (expected Module)"),H.$append_features(q),H.$extend_object(f),H.$extended(f)}return f},-1),X(d,"$freeze",function(){var t=this;return A(t["$frozen?"]())?t:typeof t=="object"?(P(t),W(t)):t}),X(d,"$frozen?",function(){var t=this;switch(typeof t){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return t.$$frozen||!1;default:return!1}}),X(d,"$gets",function(t){var s,u;return re.stdin==null&&(re.stdin=c),s=Z(arguments),u=s,j(re.stdin,"gets",y(u))},-1),X(d,"$hash",function(){var t=this;return t.$__id__()}),X(d,"$initialize_copy",O(c));var r=[];return X(d,"$inspect",function(){var t=this,s=c,u=c,f=c,q=c;return function(){try{try{return s="",u=t.$__id__(),A(r["$include?"](u))?s=" ...":(r["$<<"](u),f=!0,j(t.$instance_variables(),"each",[],function R(H){var D=R.$$s==null?this:R.$$s,G=c,te=c;return H==null&&(H=c),G=D.$instance_variable_get(H),te=$("Opal").$inspect(G),s=L(s," "+H+"="+te)},{$$s:t})),"#<"+t.$class()+":0x"+u.$to_s(16)+s+">"}catch(R){if(n.rescue(R,[$("StandardError")])){q=R;try{return"#<"+t.$class()+":0x"+u.$to_s(16)+">"}finally{n.pop_exception(R)}}else throw R}}finally{A(f)&&r.$pop()}}()}),X(d,"$instance_of?",function(t){var s=this;return!t.$$is_class&&!t.$$is_module&&U.$raise(o("TypeError"),"class or module required"),s.$$class===t}),X(d,"$instance_variable_defined?",function(t){var s=this;return t=I["$instance_variable_name!"](t),n.hasOwnProperty.call(s,t.substr(1))}),X(d,"$instance_variable_get",function(t){var s=this;t=I["$instance_variable_name!"](t);var u=s[n.ivar(t.substr(1))];return u??c}),X(d,"$instance_variable_set",function(t,s){var u=this;return Q(u),t=I["$instance_variable_name!"](t),u[n.ivar(t.substr(1))]=s}),X(d,"$remove_instance_variable",function(t){var s=this;t=I["$instance_variable_name!"](t);var u=n.ivar(t.substr(1)),f;return s.hasOwnProperty(u)?(f=s[u],delete s[u],f):U.$raise(o("NameError"),"instance variable "+t+" not defined")}),X(d,"$instance_variables",function(){var t=this,s=[];return p(t,function(u){u.substr(-1)==="$"&&(u=u.slice(0,u.length-1)),s.push("@"+u)}),s}),X(d,"$Integer",function(t,s,u){var f,q,R,H;f=Z(arguments,1),q=E(f),q=z(q),f.length>0&&(R=f.shift()),H=N(q,"exception"),H==null&&(H=!0);var D,G,te;if(H=A(H),!t.$$is_string){if(R!==void 0)if(H)U.$raise(o("ArgumentError"),"base specified for non string value");else return c;if(t===c)if(H)U.$raise(o("TypeError"),"can't convert nil into Integer");else return c;if(t.$$is_number){if(t===1/0||t===-1/0||isNaN(t))if(H)U.$raise(o("FloatDomainError"),t);else return c;return Math.floor(t)}if(t["$respond_to?"]("to_int")&&(D=t.$to_int(),n.is_a(D,o("Integer")))||t["$respond_to?"]("to_i")&&(D=t.$to_i(),n.is_a(D,o("Integer"))))return D;if(H)U.$raise(o("TypeError"),"can't convert "+t.$class()+" into Integer");else return c}if(t==="0")return 0;if(R===void 0)R=0;else if(R=h(R,o("Integer"),"to_int"),R===1||R<0||R>36)if(H)U.$raise(o("ArgumentError"),"invalid radix "+R);else return c;if(G=t.toLowerCase(),G=G.replace(/(\d)_(?=\d)/g,"$1"),G=G.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,le,fe){switch(fe){case"0b":if(R===0||R===2)return R=2,le;case"0":case"0o":if(R===0||R===8)return R=8,le;case"0d":if(R===0||R===10)return R=10,le;case"0x":if(R===0||R===16)return R=16,le}if(H)U.$raise(o("ArgumentError"),'invalid value for Integer(): "'+t+'"');else return c}),R=R===0?10:R,te="0-"+(R<=10?R-1:"9a-"+String.fromCharCode(97+(R-11))),!new RegExp("^\\s*[+-]?["+te+"]+\\s*$").test(G))if(H)U.$raise(o("ArgumentError"),'invalid value for Integer(): "'+t+'"');else return c;if(D=parseInt(G,R),isNaN(D))if(H)U.$raise(o("ArgumentError"),'invalid value for Integer(): "'+t+'"');else return c;return D},-2),X(d,"$Float",function(t,s){var u;s=z(s),u=N(s,"exception"),u==null&&(u=!0);var f;if(u=A(u),t===c)if(u)U.$raise(o("TypeError"),"can't convert nil into Float");else return c;if(t.$$is_string){if(f=t.toString(),f=f.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(f))return U.$Integer(f);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(f))if(u)U.$raise(o("ArgumentError"),'invalid value for Float(): "'+t+'"');else return c;return parseFloat(f)}return u?I["$coerce_to!"](t,o("Float"),"to_f"):h(t,o("Float"),"to_f")},-2),X(d,"$Hash",function(t){return A(t["$nil?"]())||S(t,[])?new Map:M(o("Hash"),t)?t:I["$coerce_to!"](t,o("Hash"),"to_hash")}),X(d,"$is_a?",function(t){var s=this;return!t.$$is_class&&!t.$$is_module&&U.$raise(o("TypeError"),"class or module required"),n.is_a(s,t)}),X(d,"$itself",C),X(d,"$lambda",function e(){var t=e.$$p||c;return e.$$p=null,n.lambda(t)}),X(d,"$load",function(t){return t=I["$coerce_to!"](t,o("String"),"to_str"),n.load(t)}),X(d,"$loop",function e(){var t=e.$$p||c,s=this,u=c;if(e.$$p=null,t===c)return j(s,"enum_for",["loop"],function(){return o(o("Float"),"INFINITY")});for(;A(!0);)try{n.yieldX(t,[])}catch(f){if(n.rescue(f,[o("StopIteration")])){u=f;try{return u.$result()}finally{n.pop_exception(f)}}else throw f}return s}),X(d,"$nil?",O(!1)),X(d,"$printf",function(t){var s,u,f=this,q=c;return re.stdout==null&&(re.stdout=c),s=Z(arguments),u=s,A(u["$empty?"]())||(q=A(u[0].$$is_string)?re.stdout:u.$shift(),q.$write(j(f,"format",y(u)))),c},-1),X(d,"$proc",function e(){var t=e.$$p||c;return e.$$p=null,A(t)||U.$raise(o("ArgumentError"),"tried to create Proc object without a block"),t.$$is_lambda=!1,t}),X(d,"$puts",function(t){var s,u;return re.stdout==null&&(re.stdout=c),s=Z(arguments),u=s,j(re.stdout,"puts",y(u))},-1),X(d,"$p",function(t){var s,u;return s=Z(arguments),u=s,j(u,"each",[],function(q){return re.stdout==null&&(re.stdout=c),q==null&&(q=c),re.stdout.$puts(q.$inspect())}),A(w(u.$length(),1))?u["$[]"](0):u},-1),X(d,"$print",function(t){var s,u;return re.stdout==null&&(re.stdout=c),s=Z(arguments),u=s,j(re.stdout,"print",y(u))},-1),X(d,"$readline",function(t){var s,u;return re.stdin==null&&(re.stdin=c),s=Z(arguments),u=s,j(re.stdin,"readline",y(u))},-1),X(d,"$warn",function(t,s){var u,f,q,R,H,D,G=this,te=c;return re.VERBOSE==null&&(re.VERBOSE=c),re.stderr==null&&(re.stderr=c),u=Z(arguments),f=E(u),f=z(f),q=u,R=N(f,"uplevel"),R==null&&(R=c),A(R)&&(R=I["$coerce_to!"](R,o("Integer"),"to_str"),A(m(R,0))&&U.$raise(o("ArgumentError"),"negative level ("+R+")"),te=(H=(D=G.$caller(L(R,1),1).$first(),D===c||D==null?c:D.$split(":in `")),H===c||H==null?c:H.$first()),A(te)&&(te=""+te+": "),q=j(q,"map",[],function(le){return le==null&&(le=c),""+te+"warning: "+le})),A(re.VERBOSE["$nil?"]())||A(q["$empty?"]())?c:j(re.stderr,"puts",y(q))},-1),X(d,"$raise",function(t,s,u){throw re["!"]==null&&(re["!"]=c),s==null&&(s=c),u==null&&(u=c),t==null&&re["!"]!==c?re["!"]:(t==null?t=o("RuntimeError").$new(""):x(t,"$to_str")?t=o("RuntimeError").$new(t.$to_str()):t.$$is_class&&x(t,"$exception")?t=t.$exception(s):t.$$is_exception||(t=o("TypeError").$new("exception class/object expected")),u!==c&&t.$set_backtrace(u),re["!"]!==c&&n.exceptions.push(re["!"]),re["!"]=t,t)},-1),X(d,"$rand",function(t){return t===void 0?o(o("Random"),"DEFAULT").$rand():(t.$$is_number&&(t<0&&(t=Math.abs(t)),t%1!==0&&(t=t.$to_i()),t===0&&(t=void 0)),o(o("Random"),"DEFAULT").$rand(t))},-1),X(d,"$respond_to?",function(t,s){var u=this;s==null&&(s=!1);var f=u[K(t)];return typeof f=="function"&&!f.$$stub?!0:u["$respond_to_missing?"].$$pristine===!0?!1:u["$respond_to_missing?"](t,s)},-2),X(d,"$respond_to_missing?",function(t,s){return!1},-2),I.$pristine(d,"respond_to?","respond_to_missing?"),X(d,"$require",function(t){return typeof t!="string"&&n.String&&n.Array&&(t=I["$coerce_to!"](t,o("String"),"to_str")),n.require(t)}),X(d,"$require_relative",function(t){return I["$try_convert!"](t,o("String"),"to_str"),t=o("File").$expand_path(o("File").$join(n.current_file,"..",t)),n.require(t)}),X(d,"$require_tree",function(t,s){var u;s=z(s),u=N(s,"autoload"),u==null&&(u=!1);var f=[];t=o("File").$expand_path(t),t=n.normalize(t),t==="."&&(t="");for(var q in n.modules)q["$start_with?"](t)&&(u?f.push([q,!0]):f.push([q,n.require(q)]));return f},-2),X(d,"$singleton_class",function(){var t=this;return n.get_singleton_class(t)}),X(d,"$sleep",function(t){t==null&&(t=c),t===c&&U.$raise(o("TypeError"),"can't convert NilClass into time interval"),t.$$is_number||U.$raise(o("TypeError"),"can't convert "+t.$class()+" into time interval"),t<0&&U.$raise(o("ArgumentError"),"time interval must be positive");for(var s=n.global.performance?function(){return performance.now()}:function(){return new Date},u=s();s()-u<=t*1e3;);return Math.round(t)},-1),X(d,"$srand",function(t){return t==null&&(t=$("Random").$new_seed()),o("Random").$srand(t)},-1),X(d,"$String",function(t){var s=c;return A(s=I["$coerce_to?"](t,o("String"),"to_str"))?s:I["$coerce_to!"](t,o("String"),"to_s")}),X(d,"$tap",function e(){var t=e.$$p||c,s=this;return e.$$p=null,n.yield1(t,s),s}),X(d,"$to_proc",C),X(d,"$to_s",function(){var t=this;return"#<"+t.$class()+":0x"+t.$__id__().$to_s(16)+">"}),X(d,"$catch",function e(t){var s=e.$$p||c,u=c,f=c;e.$$p=null,t==null&&(t=c);try{return t=A(u=t)?u:i.$new(),n.yield1(s,t)}catch(q){if(n.rescue(q,[o("UncaughtThrowError")])){f=q;try{return S(f.$tag(),t)?f.$value():U.$raise()}finally{n.pop_exception(q)}}else throw q}},-1),X(d,"$throw",function(t,s){return s==null&&(s=c),U.$raise(o("UncaughtThrowError").$new(t,s))},-2),X(d,"$open",function e(t){var s=e.$$p||c,u,f;return e.$$p=null,u=Z(arguments),f=u,j(o("File"),"open",y(f),s.$to_proc())},-1),X(d,"$yield_self",function e(){var t=e.$$p||c,s=this;return e.$$p=null,t===c?j(s,"enum_for",["yield_self"],O(1)):n.yield1(t,s)}),l(d,"fail","raise"),l(d,"kind_of?","is_a?"),l(d,"object_id","__id__"),l(d,"public_send","__send__"),l(d,"send","__send__"),l(d,"then","yield_self"),l(d,"to_enum","enum_for")}("::",_),function(v,T){var d=b(v,T,"Object");return delete i.$$prototype.$require,d.$include(U)}("::",null)};Opal.modules["corelib/main"]=function(n){var A=n.return_val,h=n.def,x=n.Object,I=n.slice,Q=n.Kernel,W=n.top;return n.nil,n.add_stubs("include,raise"),function(P,K){return h(P,"$to_s",A("main")),h(P,"$include",function(B){return x.$include(B)}),h(P,"$autoload",function(B){var O,X;return O=I(arguments),X=O,n.Object.$autoload.apply(n.Object,X)},-1),h(P,"$using",function(B){return Q.$raise("main.using is permitted only at toplevel")})}(n.get_singleton_class(W))};Opal.modules["corelib/error/errno"]=function(n){var A=n.module,h=n.truthy,x=n.rb_plus,I=n.send2,Q=n.find_super,W=n.def,P=n.klass,K=n.nil,p=n.$$$;return n.add_stubs("+,errno,class,attr_reader"),function(B,O){var X=A(B,"Errno"),U=K,re=K;U=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],re=K;var Z;for(Z=0;Z<U.length;Z++)(function(){var j=U[Z][0],y=U[Z][1],z=U[Z][2];re=n.klass(X,n.SystemCallError,j),re.errno=z,function(N,S){return W(N,"$new",function L(E){L.$$p;var M=this,C=K;return L.$$p=null,E==null&&(E=K),C=y,h(E)&&(C=x(C," - "+E)),I(M,Q(M,"new",L,!1,!0),"new",[C],null)},-1)}(n.get_singleton_class(re))})()}("::"),function(B,O,X){var U=P(B,O,"SystemCallError");return W(U,"$errno",function(){var Z=this;return Z.$class().$errno()}),function(re,Z){return re.$attr_reader("errno")}(n.get_singleton_class(U))}("::",p("StandardError"))};Opal.modules["corelib/error"]=function(n){var A=n.klass,h=n.slice,x=n.gvars,I=n.defs,Q=n.send,W=n.to_a,P=n.def,K=n.send2,p=n.find_super,B=n.truthy,O=n.Kernel,X=n.not,U=n.rb_plus,re=n.eqeq,Z=n.Object,j=n.ensure_kwargs,y=n.hash_get,z=n.module,N=[],S=n.nil,L=n.$$$;return n.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(E,M,C){var w=A(E,M,"Exception"),m=[w].concat(C),i=n.$r(m),l=w.$$prototype;l.message=S,n.prop(w.$$prototype,"$$is_exception",!0);var b;Error.stackTraceLimit=100,I(w,"$new",function(o){var v,T,d=this;x["!"]==null&&(x["!"]=S),v=h(arguments),T=v;var a=T.length>0?T[0]:S,$=new d.$$constructor(a);return $.name=d.$$name,$.message=a,$.cause=x["!"],n.send($,$.$initialize,T),n.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace($,b),$},-1),b=w.$new,I(w,"$exception",function(o){var v,T,d=this;return v=h(arguments),T=v,Q(d,"new",W(T))},-1),P(w,"$initialize",function(o){var v,T,d=this;return v=h(arguments),T=v,d.message=T.length>0?T[0]:S},-1),P(w,"$copy_instance_variables",function c(o){var v=c.$$p||S,T=this;c.$$p=null,K(T,p(T,"copy_instance_variables",c,!1,!0),"copy_instance_variables",[o],v),T.message=o.message,T.cause=o.cause,T.stack=o.stack});function _(c){for(var o=[],v,T=0;T<c.length;T++){var d=c[T];!d||!d.$$is_string||((v=d.match(/^    at (.*?) \((.*?)\)$/))?o.push(v[2]+":in `"+v[1]+"'"):(v=d.match(/^    at (.*?)$/))?o.push(v[1]+":in `undefined'"):(v=d.match(/^  from (.*?)$/))?o.push(v[1]):(v=d.match(/^(.*?)@(.*?)$/))&&o.push(v[2]+":in `"+v[1]+"'"))}return o}return P(w,"$backtrace",function(){var o=this;if(o.backtrace)return o.backtrace;var v=o.stack;return typeof v<"u"&&v.$$is_string?o.backtrace=_(v.split(`
`)):v?o.backtrace=_(v):[]}),P(w,"$backtrace_locations",function(){var o,v=this;return v.backtrace_locations||(v.backtrace_locations=(o=v.$backtrace(),o===S||o==null?S:Q(o,"map",[],function(d){return d==null&&(d=S),L(L(L("Thread"),"Backtrace"),"Location").$new(d)}))),v.backtrace_locations}),P(w,"$cause",function(){var o=this;return o.cause||S}),P(w,"$exception",function(o){var v=this;if(o==null&&(o=S),o===S||v===o)return v;var T=v.$clone();return T.message=o,v.backtrace&&(T.backtrace=v.backtrace.$dup()),T.stack=v.stack,T.cause=v.cause,T},-1),P(w,"$message",function(){var o=this;return o.$to_s()}),P(w,"$full_message",function(o){var v,T=this,d=S,a=S,$=S,r=S,e=S,t=S,s=S,u=S,f=S;return x.stderr==null&&(x.stderr=S),o==null&&(o=S),B(i("Hash","skip_raise")?"constant":S)?(o=new Map([["highlight",x.stderr["$tty?"]()],["order","top"]]).$merge(B(d=o)?d:new Map),v=[o["$[]"]("highlight"),o["$[]"]("order")],a=v[0],$=v[1],B([!0,!1]["$include?"](a))||O.$raise(L("ArgumentError"),"expected true or false as highlight: "+a),B(["top","bottom"]["$include?"]($))||O.$raise(L("ArgumentError"),"expected :top or :bottom as order: "+$),B(a)?(r="\x1B[1;4m",e="\x1B[1m",t="\x1B[m"):r=e=t="",s=T.$backtrace().$dup(),(X(s)||B(s["$empty?"]()))&&(s=T.$caller()),u=s.$shift(),f=""+u+": ",f=U(f,""+e+T.$to_s()+" ("+r+T.$class()+t+e+")"+t+`
`),f=U(f,Q(s,"map",[],function(R){return R==null&&(R=S),"	from "+R+`
`}).$join()),B(T.$cause())&&(f=U(f,T.$cause().$full_message(new Map([["highlight",a]])))),re($,"bottom")&&(f=f.$split(`
`).$reverse().$join(`
`),f=U(""+e+"Traceback"+t+` (most recent call last):
`,f)),f):""+T.message+`
`+T.stack},-1),P(w,"$inspect",function(){var o=this,v=S;return v=o.$to_s(),B(v["$empty?"]())?o.$class().$to_s():"#<"+o.$class().$to_s()+": "+o.$to_s()+">"}),P(w,"$set_backtrace",function(o){var v=this,T=!0,d,a;if(o===S)v.backtrace=S,v.stack="";else if(o.$$is_string)v.backtrace=[o],v.stack="  from "+o;else{if(o.$$is_array){for(d=0,a=o.length;d<a;d++)if(!o[d].$$is_string){T=!1;break}}else T=!1;T===!1&&O.$raise(L("TypeError"),"backtrace must be Array of String"),v.backtrace=o,v.stack=Q(o,"map",[],function(r){return r==null&&(r=S),U("  from ",r)}).join(`
`)}return o}),P(w,"$to_s",function(){var o=this,v=S,T=S;return B(v=B(T=o.message)?o.message.$to_s():T)?v:o.$class().$to_s()})}("::",Error,N),A("::",L("Exception"),"ScriptError"),A("::",L("ScriptError"),"SyntaxError"),A("::",L("ScriptError"),"LoadError"),A("::",L("ScriptError"),"NotImplementedError"),A("::",L("Exception"),"SystemExit"),A("::",L("Exception"),"NoMemoryError"),A("::",L("Exception"),"SignalException"),A("::",L("SignalException"),"Interrupt"),A("::",L("Exception"),"SecurityError"),A("::",L("Exception"),"SystemStackError"),A("::",L("Exception"),"StandardError"),A("::",L("StandardError"),"EncodingError"),A("::",L("StandardError"),"ZeroDivisionError"),A("::",L("StandardError"),"NameError"),A("::",L("NameError"),"NoMethodError"),A("::",L("StandardError"),"RuntimeError"),A("::",L("RuntimeError"),"FrozenError"),A("::",L("StandardError"),"LocalJumpError"),A("::",L("StandardError"),"TypeError"),A("::",L("StandardError"),"ArgumentError"),A("::",L("ArgumentError"),"UncaughtThrowError"),A("::",L("StandardError"),"IndexError"),A("::",L("IndexError"),"StopIteration"),A("::",L("StopIteration"),"ClosedQueueError"),A("::",L("IndexError"),"KeyError"),A("::",L("StandardError"),"RangeError"),A("::",L("RangeError"),"FloatDomainError"),A("::",L("StandardError"),"IOError"),A("::",L("IOError"),"EOFError"),A("::",L("StandardError"),"SystemCallError"),A("::",L("StandardError"),"RegexpError"),A("::",L("StandardError"),"ThreadError"),A("::",L("StandardError"),"FiberError"),Z.$autoload("Errno","corelib/error/errno"),function(E,M){var C=A(E,M,"FrozenError");return C.$attr_reader("receiver"),P(C,"$initialize",function w(m,i){var l;w.$$p;var b=this;return w.$$p=null,i=j(i),l=y(i,"receiver"),l==null&&(l=S),K(b,p(b,"initialize",w,!1,!0),"initialize",[m],null),b.receiver=l},-2)}("::",L("RuntimeError")),function(E,M){var C=A(E,M,"UncaughtThrowError"),w=C.$$prototype;return w.tag=S,C.$attr_reader("tag","value"),P(C,"$initialize",function m(i,l){m.$$p;var b=this;return m.$$p=null,l==null&&(l=S),b.tag=i,b.value=l,K(b,p(b,"initialize",m,!1,!0),"initialize",["uncaught throw "+b.tag.$inspect()],null)},-2)}("::",L("ArgumentError")),function(E,M){var C=A(E,M,"NameError");return C.$attr_reader("name"),P(C,"$initialize",function w(m,i){w.$$p;var l=this;return w.$$p=null,i==null&&(i=S),K(l,p(l,"initialize",w,!1,!0),"initialize",[m],null),l.name=i},-2)}("::",null),function(E,M){var C=A(E,M,"NoMethodError");return C.$attr_reader("args"),P(C,"$initialize",function w(m,i,l){w.$$p;var b=this;return w.$$p=null,i==null&&(i=S),l==null&&(l=[]),K(b,p(b,"initialize",w,!1,!0),"initialize",[m,i],null),b.args=l},-2)}("::",null),function(E,M){var C=A(E,M,"StopIteration");return C.$attr_reader("result")}("::",null),function(E,M){var C=A(E,M,"KeyError"),w=C.$$prototype;return w.receiver=w.key=S,P(C,"$initialize",function m(i,l){var b,_;m.$$p;var c=this;return m.$$p=null,l=j(l),b=y(l,"receiver"),b==null&&(b=S),_=y(l,"key"),_==null&&(_=S),K(c,p(c,"initialize",m,!1,!0),"initialize",[i],null),c.receiver=b,c.key=_},-2),P(C,"$receiver",function(){var i=this,l=S;return B(l=i.receiver)?l:O.$raise(L("ArgumentError"),"no receiver is available")}),P(C,"$key",function(){var i=this,l=S;return B(l=i.key)?l:O.$raise(L("ArgumentError"),"no key is available")})}("::",null),function(E,M){var C=A(E,M,"LocalJumpError");return C.$attr_reader("exit_value","reason"),P(C,"$initialize",function w(m,i,l){w.$$p;var b=this;return w.$$p=null,i==null&&(i=S),l==null&&(l="noreason"),K(b,p(b,"initialize",w,!1,!0),"initialize",[m],null),b.exit_value=i,b.reason=l},-2)}("::",null),function(E,M){var C=z(E,"JS"),w=[C].concat(M);return A(w[0],null,"Error"),S}("::",N)};Opal.modules["corelib/constants"]=function(n){var A=n.const_set;n.nil;var h=n.$$$;return A("::","RUBY_PLATFORM","opal"),A("::","RUBY_ENGINE","opal"),A("::","RUBY_VERSION","3.2.0"),A("::","RUBY_ENGINE_VERSION","1.8.2"),A("::","RUBY_RELEASE_DATE","2023-11-23"),A("::","RUBY_PATCHLEVEL",0),A("::","RUBY_REVISION","0"),A("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),A("::","RUBY_DESCRIPTION","opal "+h("RUBY_ENGINE_VERSION")+" ("+h("RUBY_RELEASE_DATE")+" revision "+h("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(n){var A=n.Object;return n.nil,n.add_stubs("require"),A.$require("corelib/runtime"),A.$require("corelib/helpers"),A.$require("corelib/module"),A.$require("corelib/class"),A.$require("corelib/basic_object"),A.$require("corelib/kernel"),A.$require("corelib/main"),A.$require("corelib/error"),A.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(n){var A=n.klass,h=n.Kernel,x=n.def,I=n.return_val,Q=n.ensure_kwargs,W=n.hash_get,P=n.NilClass,K=n.slice,p=n.truthy,B=n.rb_gt,O=n.alias,X=n.nil,U=n.$$$;return n.add_stubs("raise,name,new,>,length,Rational,to_i"),function(re,Z,j){var y=A(re,Z,"NilClass");return y.$$prototype.$$meta=y,function(z,N){return x(z,"$allocate",function(){var L=this;return h.$raise(U("TypeError"),"allocator undefined for "+L.$name())}),n.udef(z,"$new"),X}(n.get_singleton_class(y)),x(y,"$!",I(!0)),x(y,"$&",I(!1)),x(y,"$|",function(N){return N!==!1&&N!==X}),x(y,"$^",function(N){return N!==!1&&N!==X}),x(y,"$==",function(N){return N===X}),x(y,"$dup",I(X)),x(y,"$clone",function(N){return N=Q(N),W(N,"freeze"),X},-1),x(y,"$inspect",I("nil")),x(y,"$nil?",I(!0)),x(y,"$singleton_class",function(){return P}),x(y,"$to_a",function(){return[]}),x(y,"$to_h",function(){return new Map}),x(y,"$to_i",I(0)),x(y,"$to_s",I("")),x(y,"$to_c",function(){return U("Complex").$new(0,0)}),x(y,"$rationalize",function(N){var S,L;return S=K(arguments),L=S,p(B(L.$length(),1))&&h.$raise(U("ArgumentError")),h.$Rational(0,1)},-1),x(y,"$to_r",function(){return h.$Rational(0,1)}),x(y,"$instance_variables",function(){return[]}),O(y,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(n){var A=n.klass,h=n.Kernel,x=n.def,I=n.return_self,Q=n.ensure_kwargs,W=n.hash_get,P=n.slice,K=n.truthy,p=n.send2,B=n.find_super,O=n.to_a,X=n.alias,U=n.nil,re=n.$$$;return n.add_stubs("raise,name,==,to_s,__id__"),function(Z,j,y){var z=A(Z,j,"Boolean");n.prop(z.$$prototype,"$$is_boolean",!0);for(var N=["$$class","$$meta"],S=0;S<N.length;S++)Object.defineProperty(z.$$prototype,N[S],{configurable:!0,enumerable:!1,get:function(){return this==!0?n.TrueClass:this==!1?n.FalseClass:n.Boolean}});return Object.defineProperty(z.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:U}}),function(L,E){return x(L,"$allocate",function(){var C=this;return h.$raise(re("TypeError"),"allocator undefined for "+C.$name())}),n.udef(L,"$new"),U}(n.get_singleton_class(z)),x(z,"$__id__",function(){var E=this;return E.valueOf()?2:0}),x(z,"$!",function(){var E=this;return E!=!0}),x(z,"$&",function(E){var M=this;return M==!0?E!==!1&&E!==U:!1}),x(z,"$|",function(E){var M=this;return M==!0?!0:E!==!1&&E!==U}),x(z,"$^",function(E){var M=this;return M==!0?E===!1||E===U:E!==!1&&E!==U}),x(z,"$==",function(E){var M=this;return M==!0===E.valueOf()}),x(z,"$singleton_class",function(){var E=this;return E.$$meta}),x(z,"$to_s",function(){var E=this;return E==!0?"true":"false"}),x(z,"$dup",I),x(z,"$clone",function(E){var M=this;return E=Q(E),W(E,"freeze"),M},-1),x(z,"$method_missing",function L(E,M){var C=L.$$p||U,w,m,i=this;L.$$p=null,w=P(arguments,1),m=w;var l=i.$$class.$$prototype[n.jsid(E)];return K(typeof l<"u"&&!l.$$stub)||p(i,B(i,"method_missing",L,!1,!0),"method_missing",[E].concat(O(m)),C),n.send(i,l,m,C)},-2),x(z,"$respond_to_missing?",function(E,M){var C=this,w=C.$$class.$$prototype[n.jsid(E)];return typeof w<"u"&&!w.$$stub},-2),X(z,"eql?","=="),X(z,"equal?","=="),X(z,"inspect","to_s"),X(z,"object_id","__id__")}("::",Boolean),A("::",re("Boolean"),"TrueClass"),A("::",re("Boolean"),"FalseClass"),U};Opal.modules["corelib/comparable"]=function(n){var A=n.truthy,h=n.module,x=n.rb_gt,I=n.rb_lt,Q=n.eqeqeq,W=n.Kernel,P=n.def,K=n.nil,p=n.$$$;return n.add_stubs(">,<,===,raise,class,<=>,equal?"),function(B){var O=h(B,"Comparable"),X=K;function U(j){return n.is_a(j,n.Integer)?j:x(j,0)?1:I(j,0)?-1:0}function re(j,y){var z;Q(K,X=y)||Q(!0,X)||Q(!1,X)||Q(p("Integer"),X)||Q(p("Float"),X)?z=y.$inspect():z=y.$$class,W.$raise(p("ArgumentError"),"comparison of "+j.$class()+" with "+z+" failed")}function Z(j,y){var z=j["$<=>"](y);return A(z)||re(j,y),U(z)}return P(O,"$==",function(y){var z=this,N=K;return A(z["$equal?"](y))?!0:z["$<=>"]==n.Kernel["$<=>"]?!1:z.$$comparable?(z.$$comparable=!1,!1):A(N=z["$<=>"](y))?U(N)==0:!1}),P(O,"$>",function(y){var z=this;return Z(z,y)>0}),P(O,"$>=",function(y){var z=this;return Z(z,y)>=0}),P(O,"$<",function(y){var z=this;return Z(z,y)<0}),P(O,"$<=",function(y){var z=this;return Z(z,y)<=0}),P(O,"$between?",function(y,z){var N=this;return!(A(I(N,y))||A(x(N,z)))}),P(O,"$clamp",function(y,z){var N=this;z==null&&(z=K);var S,L;if(z===K&&(n.is_a(y,n.Range)||W.$raise(p("TypeError"),"wrong argument type "+y.$class()+" (expected Range)"),L=y.excl,z=y.end,y=y.begin,z!==K&&L&&W.$raise(p("ArgumentError"),"cannot clamp with an exclusive range")),y!==K&&z!==K&&Z(y,z)>0&&W.$raise(p("ArgumentError"),"min argument must be smaller than max argument"),y!==K){if(S=Z(N,y),S==0)return N;if(S<0)return y}return z!==K&&(S=Z(N,z),S>0)?z:N},-2)}("::")};Opal.modules["corelib/regexp"]=function(n){var A=n.coerce_to,h=n.prop,x=n.freeze,I=n.klass,Q=n.const_set,W=n.send2,P=n.find_super,K=n.def,p=n.truthy,B=n.gvars,O=n.slice,X=n.Kernel,U=n.Opal,re=n.alias,Z=n.send,j=n.regexp,y=n.rb_plus,z=n.ensure_kwargs,N=n.hash_get,S=n.rb_ge,L=n.to_a,E=n.eqeqeq,M=n.rb_minus,C=n.return_ivar,w=[],m=n.nil,i=n.$$$;return n.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),I("::",i("StandardError"),"RegexpError"),function(l,b,_){var c=I(l,b,"Regexp"),o=[c].concat(_),v=n.$r(o);return Q(c,"IGNORECASE",1),Q(c,"EXTENDED",2),Q(c,"MULTILINE",4),n.prop(c.$$prototype,"$$is_regexp",!0),function(T,d){var a=[T].concat(d),$=n.$r(a);return K(T,"$allocate",function r(){var e=r.$$p||m,t=this,s=m;return r.$$p=null,s=W(t,P(t,"allocate",r,!1,!0),"allocate",[],e),s.uninitialized=!0,s}),K(T,"$escape",function(e){return e=A(e,i("String"),"to_str"),n.escape_regexp(e)}),K(T,"$last_match",function(e){return B["~"]==null&&(B["~"]=m),e==null&&(e=m),p(e["$nil?"]())?B["~"]:p(B["~"])?B["~"]["$[]"](e):m},-1),K(T,"$union",function(e){var t,s,u=this;t=O(arguments),s=t;var f,q,R,H,D;if(s.length==0)return/(?!)/;if(s.length==1&&s[0].$$is_regexp)return s[0];f=s[0].$$is_array,s.length>1&&f&&X.$raise(i("TypeError"),"no implicit conversion of Array into String"),f&&(s=s[0]),H=void 0,q=[];for(var G=0;G<s.length;G++)R=s[G],R.$$is_string?q.push(u.$escape(R)):R.$$is_regexp?(D=R.$options(),H!=null&&H!=D&&X.$raise(i("TypeError"),"All expressions must use the same options"),H=D,q.push("("+R.source+")")):q.push(u.$escape(R.$to_str()));return u.$new(q.$join("|"),H)},-1),K(T,"$new",function(e,t){if(e.$$is_regexp)return new RegExp(e);if(e=U["$coerce_to!"](e,i("String"),"to_str"),e.charAt(e.length-1)==="\\"&&e.charAt(e.length-2)!=="\\"&&X.$raise(i("RegexpError"),"too short escape sequence: /"+e+"/"),e=e.replace("\\A","^").replace("\\z","$"),t===void 0||t["$!"]())return new RegExp(e);if(t.$$is_number){var s="";$("IGNORECASE")&t&&(s+="i"),$("MULTILINE")&t&&(s+="m"),t=s}else t="i";return new RegExp(e,t)},-2),re(T,"compile","new"),re(T,"quote","escape")}(n.get_singleton_class(c),o),K(c,"$==",function(d){var a=this;return d instanceof RegExp&&a.toString()===d.toString()}),K(c,"$===",function(d){var a=this;return a.$match(U["$coerce_to?"](d,i("String"),"to_str"))!==m}),K(c,"$=~",function(d){var a=this,$=m;return B["~"]==null&&(B["~"]=m),p($=a.$match(d))?B["~"].$begin(0):$}),K(c,"$freeze",function(){var d=this;return p(d["$frozen?"]())?d:(d.hasOwnProperty("$$g")||h(d,"$$g",null),d.hasOwnProperty("$$gm")||h(d,"$$gm",null),x(d))}),K(c,"$inspect",function(){var d=this,a=/^\/(.*)\/([^\/]*)$/,$=d.toString(),r=a.exec($);if(r){for(var e=r[1],t=r[2],s=e.split(""),u=s.length,f=!1,q="",R=0;R<u;R++){var H=s[R];!f&&H=="/"&&(q=q.concat("\\")),q=q.concat(H),H=="\\"?f?f=!1:f=!0:f=!1}return"/"+q+"/"+t}else return $}),K(c,"$match",function T(d,a){var $=T.$$p||m,r=this;if(B["~"]==null&&(B["~"]=m),T.$$p=null,r.uninitialized&&X.$raise(i("TypeError"),"uninitialized Regexp"),a===void 0){if(d===m)return B["~"]=m;var e=r.exec(A(d,i("String"),"to_str"));return e?(B["~"]=i("MatchData").$new(r,e),$===m?B["~"]:n.yield1($,B["~"])):B["~"]=m}if(a=A(a,i("Integer"),"to_int"),d===m||(d=A(d,i("String"),"to_str"),a<0&&(a+=d.length,a<0)))return B["~"]=m;for(var t,s=n.global_regexp(r);;){if(t=s.exec(d),t===null)return B["~"]=m;if(t.index>=a)return B["~"]=i("MatchData").$new(s,t),$===m?B["~"]:n.yield1($,B["~"]);s.lastIndex=t.index+1}},-2),K(c,"$match?",function(d,a){var $=this;if($.uninitialized&&X.$raise(i("TypeError"),"uninitialized Regexp"),a===void 0)return d===m?!1:$.test(A(d,i("String"),"to_str"));if(a=A(a,i("Integer"),"to_int"),d===m||(d=A(d,i("String"),"to_str"),a<0&&(a+=d.length,a<0)))return!1;var r,e=n.global_regexp($);return r=e.exec(d),!(r===null||r.index<a)},-2),K(c,"$names",function(){var d=this;return Z(d.$source().$scan(j(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),K(c,"$named_captures",function(){var d=this;return Z(Z(Z(d.$source().$scan(j(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function($){return $==null&&($=m),Z($,"map",[],function(e){return e==null&&(e=m),y(e.$last(),1)})})}),K(c,"$~",function(){var d=this;return B._==null&&(B._=m),d["$=~"](B._)}),K(c,"$source",function(){var d=this;return d.source}),K(c,"$options",function(){var d=this;d.uninitialized&&X.$raise(i("TypeError"),"uninitialized Regexp");var a=0;return d.multiline&&(a|=v("MULTILINE")),d.ignoreCase&&(a|=v("IGNORECASE")),a}),K(c,"$casefold?",function(){var d=this;return d.ignoreCase}),re(c,"eql?","=="),re(c,"to_s","source")}("::",RegExp,w),function(l,b,_){var c=I(l,b,"MatchData"),o=[c].concat(_),v=n.$r(o),T=c.$$prototype;return T.matches=m,c.$attr_reader("post_match","pre_match","regexp","string"),K(c,"$initialize",function(a,$,r){var e,t=this;r=z(r),e=N(r,"no_matchdata"),e==null&&(e=!1),p(e)||(B["~"]=t),t.regexp=a,t.begin=$.index,t.string=$.input,t.pre_match=$.input.slice(0,$.index),t.post_match=$.input.slice($.index+$[0].length),t.matches=[];for(var s=0,u=$.length;s<u;s++){var f=$[s];f==null?t.matches.push(m):t.matches.push(f)}},-3),K(c,"$match",function(a){var $=this,r=m;return p(r=$["$[]"](a))?r:p(a["$is_a?"](v("Integer")))&&p(S(a,$.$length()))?X.$raise(i("IndexError"),"index "+a+" out of matches"):m}),K(c,"$match_length",function(a){var $,r=this;return $=r.$match(a),$===m||$==null?m:$.$length()}),K(c,"$[]",function(a){var $,r,e=this;return $=O(arguments),r=$,r[0].$$is_string?(e.$regexp().$names()["$include?"](r["$[]"](0))["$!"]()&&X.$raise(i("IndexError"),"undefined group name reference: "+r["$[]"](0)),e.$named_captures()["$[]"](r["$[]"](0))):Z(e.matches,"[]",L(r))},-1),K(c,"$offset",function(a){var $=this;return a!==0&&X.$raise(i("ArgumentError"),"MatchData#offset only supports 0th element"),[$.begin,$.begin+$.matches[a].length]}),K(c,"$==",function(a){var $=this,r=m,e=m,t=m,s=m;return E(i("MatchData"),a)?p(r=p(e=p(t=p(s=$.string==a.string)?$.regexp.toString()==a.regexp.toString():s)?$.pre_match==a.pre_match:t)?$.post_match==a.post_match:e)?$.begin==a.begin:r:!1}),K(c,"$begin",function(a){var $=this;return a!==0&&X.$raise(i("ArgumentError"),"MatchData#begin only supports 0th element"),$.begin}),K(c,"$end",function(a){var $=this;return a!==0&&X.$raise(i("ArgumentError"),"MatchData#end only supports 0th element"),$.begin+$.matches[a].length}),K(c,"$captures",function(){var a=this;return a.matches.slice(1)}),K(c,"$named_captures",function(){var a=this,$=m;return $=a.$captures(),Z(a.$regexp().$named_captures(),"transform_values",[],function(e){return e==null&&(e=m),$["$[]"](M(e.$last(),1))})}),K(c,"$names",function(){var a=this;return a.$regexp().$names()}),K(c,"$inspect",function(){var a=this,$="#<MatchData "+a.matches[0].$inspect();if(a.$regexp().$names()["$empty?"]())for(var r=1,e=a.matches.length;r<e;r++)$+=" "+r+":"+a.matches[r].$inspect();else Z(a.$named_captures(),"each",[],function(s,u){return s==null&&(s=m),u==null&&(u=m),$+=" "+s+":"+u.$inspect()});return $+">"}),K(c,"$length",function(){var a=this;return a.matches.length}),K(c,"$to_a",C("matches")),K(c,"$to_s",function(){var a=this;return a.matches[0]}),K(c,"$values_at",function(a){var $,r,e=this;$=O(arguments),r=$;var t,s,u,f=[];for(t=0;t<r.length;t++){if(r[t].$$is_range&&(s=r[t].$to_a(),s.unshift(t,1),Array.prototype.splice.apply(r,s)),u=U["$coerce_to!"](r[t],i("Integer"),"to_int"),u<0&&(u+=e.matches.length,u<0)){f.push(m);continue}f.push(e.matches[u])}return f},-1),re(c,"eql?","=="),re(c,"size","length")}(w[0],null,w)};Opal.modules["corelib/string"]=function(n){var A=n.coerce_to,h=n.respond_to,x=n.global_multiline_regexp,I=n.prop,Q=n.opal32_init,W=n.opal32_add,P=n.klass,K=n.send2,p=n.find_super,B=n.def,O=n.Opal,X=n.defs,U=n.slice,re=n.send,Z=n.to_a,j=n.extract_kwargs,y=n.ensure_kwargs,z=n.hash_get,N=n.eqeqeq,S=n.Kernel,L=n.truthy,E=n.gvars,M=n.rb_divide,C=n.rb_plus,w=n.eqeq,m=n.alias,i=n.const_set,l=n.top,b=[],_=n.$r(b),c=n.nil,o=n.$$$;return n.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),l.$require("corelib/comparable"),l.$require("corelib/regexp"),function(v,T,d){var a=P(v,T,"String"),$=[a].concat(d),r=n.$r($);a.$include(o("Comparable")),n.prop(a.$$prototype,"$$is_string",!0);var e=new Map;(function(){B(a,"$__id__",function s(){var u=s.$$p||c,f=this;if(s.$$p=null,typeof f=="object")return K(f,p(f,"__id__",s,!1,!0),"__id__",[],u);if(e.has(f))return e.get(f);var q=n.uid();return e.set(f,q),q}),B(a,"$hash",function(){var u=this,f=Q(),q,R=u.length;for(f=W(f,5),f=W(f,R),q=0;q<R;q++)f=W(f,u.charCodeAt(q));return f})})(),X(a,"$try_convert",function(u){return O["$coerce_to?"](u,o("String"),"to_str")}),X(a,"$new",function(u){var f,q,R=this;f=U(arguments),q=f;var H=q[0]||"",D=q[q.length-1];return H=A(H,o("String"),"to_str"),D&&D.$$is_hash&&D.has("encoding")&&(H=H.$force_encoding(D.get("encoding").value)),H=new R.$$constructor(H),H.$initialize.$$pristine||re(H,"initialize",Z(q)),H},-1),B(a,"$initialize",function(u,f){var q,R;return q=U(arguments),R=j(q),R=y(R),q.length>0&&q.shift(),z(R,"encoding"),z(R,"capacity"),c},-1),B(a,"$%",function(u){var f=this;return N(o("Array"),u)?re(f,"format",[f].concat(Z(u))):f.$format(f,u)}),B(a,"$*",function(u){var f=this;if(u=A(u,o("Integer"),"to_int"),u<0&&S.$raise(o("ArgumentError"),"negative argument"),u===0)return"";var q="",R=f.toString();for(R.length*u>=1<<28&&S.$raise(o("RangeError"),"multiply count must not overflow maximum string size");(u&1)===1&&(q+=R),u>>>=1,u!==0;)R+=R;return q}),B(a,"$+",function(u){var f=this;if(u=A(u,o("String"),"to_str"),u==""&&f.$$class===n.String)return f;if(f==""&&u.$$class===n.String)return u;var q=f+u;return f.encoding===q.encoding&&u.encoding===q.encoding||f.encoding.name==="UTF-8"||u.encoding.name==="UTF-8"?q:n.enc(q,f.encoding)}),B(a,"$<=>",function(u){var f=this;if(L(u["$respond_to?"]("to_str")))return u=u.$to_str().$to_s(),f>u?1:f<u?-1:0;var q=u["$<=>"](f);return q===c?c:q>0?-1:q<0?1:0}),B(a,"$==",function(u){var f=this;return u.$$is_string?f.toString()===u.toString():h(u,"$to_str")?u["$=="](f):!1}),B(a,"$=~",function(u){var f=this;return u.$$is_string&&S.$raise(o("TypeError"),"type mismatch: String given"),u["$=~"](f)}),B(a,"$[]",function(u,f){var q=this,R=q.length,H,D;if(u.$$is_range)return H=u.excl,D=u,f=u.end===c?-1:A(u.end,o("Integer"),"to_int"),u=u.begin===c?0:A(u.begin,o("Integer"),"to_int"),Math.abs(u)>R?c:(u<0&&(u+=R),f<0&&(f+=R),(!H||D.end===c)&&(f+=1),f=f-u,f<0&&(f=0),q.substr(u,f));if(u.$$is_string)return f!=null&&S.$raise(o("TypeError")),q.indexOf(u)!==-1?u:c;if(u.$$is_regexp){var G=q.match(u);return G===null?(E["~"]=c,c):(E["~"]=o("MatchData").$new(u,G),f==null?G[0]:(f=A(f,o("Integer"),"to_int"),f<0&&-f<G.length?G[f+=G.length]:f>=0&&f<G.length?G[f]:c))}return u=A(u,o("Integer"),"to_int"),u<0&&(u+=R),f==null?u>=R||u<0?c:q.substr(u,1):(f=A(f,o("Integer"),"to_int"),f<0||u>R||u<0?c:q.substr(u,f))},-2),B(a,"$b",function(){var u=this;return new String(u).$force_encoding("binary")}),B(a,"$capitalize",function(){var u=this;return u.charAt(0).toUpperCase()+u.substr(1).toLowerCase()}),B(a,"$casecmp",function(u){var f=this;if(!L(u["$respond_to?"]("to_str")))return c;u=A(u,o("String"),"to_str").$to_s();var q=/^[\x00-\x7F]*$/;return q.test(f)&&q.test(u)&&(f=f.toLowerCase(),u=u.toLowerCase()),f["$<=>"](u)}),B(a,"$casecmp?",function(u){var f=this,q=f.$casecmp(u);return q===c?c:q===0}),B(a,"$center",function(u,f){var q=this;if(f==null&&(f=" "),u=A(u,o("Integer"),"to_int"),f=A(f,o("String"),"to_str").$to_s(),L(f["$empty?"]())&&S.$raise(o("ArgumentError"),"zero width padding"),L(u<=q.length))return q;var R=q.$ljust(M(C(u,q.length),2).$ceil(),f),H=q.$rjust(M(C(u,q.length),2).$floor(),f);return H+R.slice(q.length)},-2),B(a,"$chomp",function(u){var f=this;if(E["/"]==null&&(E["/"]=c),u==null&&(u=E["/"]),L(u===c||f.length===0))return f;u=O["$coerce_to!"](u,o("String"),"to_str").$to_s();var q;if(u===`
`)q=f.replace(/\r?\n?$/,"");else if(u==="")q=f.replace(/(\r?\n)+$/,"");else if(f.length>=u.length){var R=f.substr(f.length-u.length,u.length);R===u&&(q=f.substr(0,f.length-u.length))}return q??f},-1),B(a,"$chop",function(){var u=this,f=u.length,q;return f<=1?q="":u.charAt(f-1)===`
`&&u.charAt(f-2)==="\r"?q=u.substr(0,f-2):q=u.substr(0,f-1),q}),B(a,"$chr",function(){var u=this;return u.charAt(0)}),B(a,"$clone",function(u){var f,q=this,R=c;return u=y(u),f=z(u,"freeze"),f==null&&(f=c),L(f["$nil?"]())||w(f,!0)||w(f,!1)||q.$raise(r("ArgumentError"),"unexpected value for freeze: "+f.$class()),R=new String(q),R.$copy_singleton_methods(q),R.$initialize_clone(q,new Map([["freeze",f]])),w(f,!0)?R.$$frozen||(R.$$frozen=!0):L(f["$nil?"]())&&q.$$frozen&&(R.$$frozen=!0),R},-1),B(a,"$dup",function(){var u=this,f=c;return f=new String(u),f.$initialize_dup(u),f}),B(a,"$count",function(u){var f,q,R=this;f=U(arguments),q=f,q.length===0&&S.$raise(o("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var H=t(q);return H===null?0:R.length-R.replace(new RegExp(H,"g"),"").length},-1),B(a,"$delete",function(u){var f,q,R=this;f=U(arguments),q=f,q.length===0&&S.$raise(o("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var H=t(q);return H===null?R:R.replace(new RegExp(H,"g"),"")},-1),B(a,"$delete_prefix",function(u){var f=this;return u.$$is_string||(u=A(u,o("String"),"to_str")),f.slice(0,u.length)===u?f.slice(u.length):f}),B(a,"$delete_suffix",function(u){var f=this;return u.$$is_string||(u=A(u,o("String"),"to_str")),f.slice(f.length-u.length)===u?f.slice(0,f.length-u.length):f}),B(a,"$downcase",function(){var u=this;return u.toLowerCase()}),B(a,"$each_line",function s(u,f){var q=s.$$p||c,R,H,D,G,te=this;if(E["/"]==null&&(E["/"]=c),s.$$p=null,R=U(arguments),H=j(R),H=y(H),R.length>0&&(D=R.shift()),D==null&&(D=E["/"]),G=z(H,"chomp"),G==null&&(G=!1),q===c)return te.$enum_for("each_line",D,new Map([["chomp",G]]));if(D===c)return n.yield1(q,te),te;D=A(D,o("String"),"to_str");var ae,le,fe,de,he,ve,me,be;if(D.length===0){for(ae=te.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,fe=ae.length;le<fe;le+=2)(ae[le]||ae[le+1])&&(be=(ae[le]||"")+(ae[le+1]||""),G&&(be=be.$chomp(`
`)),n.yield1(q,be));return te}for(he=te.$chomp(D),ve=te.length!=he.length,me=he.split(D),le=0,de=me.length;le<de;le++)be=me[le],(le<de-1||ve)&&(be+=D),G&&(be=be.$chomp(D)),n.yield1(q,be);return te},-1),B(a,"$empty?",function(){var u=this;return u.length===0}),B(a,"$end_with?",function(u){var f,q,R=this;f=U(arguments),q=f;for(var H=0,D=q.length;H<D;H++){var G=A(q[H],o("String"),"to_str").$to_s();if(R.length>=G.length&&R.substr(R.length-G.length,G.length)==G)return!0}return!1},-1),B(a,"$gsub",function s(u,f){var q=s.$$p||c,R=this;if(s.$$p=null,f===void 0&&q===c)return R.$enum_for("gsub",u);var H="",D=c,G=0,te,ae;u.$$is_regexp?u=x(u):(u=A(u,o("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(te=u.exec(R),te===null){E["~"]=c,H+=R.slice(G);break}D=o("MatchData").$new(u,te),f===void 0?(le=u.lastIndex,ae=q(te[0]),u.lastIndex=le):f.$$is_hash?ae=f["$[]"](te[0]).$to_s():(f.$$is_string||(f=A(f,o("String"),"to_str")),ae=f.replace(/([\\]+)([0-9+&`'])/g,function(fe,de,he){if(de.length%2===0)return fe;switch(he){case"+":for(var ve=te.length-1;ve>0;ve--)if(te[ve]!==void 0)return de.slice(1)+te[ve];return"";case"&":return de.slice(1)+te[0];case"`":return de.slice(1)+R.slice(0,te.index);case"'":return de.slice(1)+R.slice(te.index+te[0].length);default:return de.slice(1)+(te[he]||"")}}).replace(/\\\\/g,"\\")),u.lastIndex===te.index?(H+=R.slice(G,te.index)+ae+(R[te.index]||""),u.lastIndex+=1):H+=R.slice(G,te.index)+ae,G=u.lastIndex}return E["~"]=D,H},-2),B(a,"$hex",function(){var u=this;return u.$to_i(16)}),B(a,"$include?",function(u){var f=this;return u.$$is_string||(u=A(u,o("String"),"to_str")),f.indexOf(u)!==-1}),B(a,"$index",function(u,f){var q=this,R,H,D;if(f===void 0)f=0;else if(f=A(f,o("Integer"),"to_int"),f<0&&(f+=q.length,f<0))return c;if(u.$$is_regexp)for(D=x(u);;){if(H=D.exec(q),H===null){E["~"]=c,R=-1;break}if(H.index>=f){E["~"]=o("MatchData").$new(D,H),R=H.index;break}D.lastIndex=H.index+1}else u=A(u,o("String"),"to_str"),u.length===0&&f>q.length?R=-1:R=q.indexOf(u,f);return R===-1?c:R},-2),B(a,"$inspect",function(){var u=this,f=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,q={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},R=u.replace(f,function(H){return q[H]?q[H]:(H=H.charCodeAt(0),H<=255&&(u.encoding["$binary?"]()||u.internal_encoding["$binary?"]())?"\\x"+("00"+H.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+H.toString(16).toUpperCase()).slice(-4))});return'"'+R.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),B(a,"$intern",function(){var u=this;return u.toString()}),B(a,"$length",function(){var u=this;return u.length}),m(a,"size","length"),B(a,"$lines",function s(u,f){var q=s.$$p||c,R,H,D,G,te=this,ae=c;return E["/"]==null&&(E["/"]=c),s.$$p=null,R=U(arguments),H=j(R),H=y(H),R.length>0&&(D=R.shift()),D==null&&(D=E["/"]),G=z(H,"chomp"),G==null&&(G=!1),ae=re(te,"each_line",[D,new Map([["chomp",G]])],q.$to_proc()),L(q)?te:ae.$to_a()},-1),B(a,"$ljust",function(u,f){var q=this;if(f==null&&(f=" "),u=A(u,o("Integer"),"to_int"),f=A(f,o("String"),"to_str").$to_s(),L(f["$empty?"]())&&S.$raise(o("ArgumentError"),"zero width padding"),L(u<=q.length))return q;var R=-1,H="";for(u-=q.length;++R<u;)H+=f;return q+H.slice(0,u)},-2),B(a,"$lstrip",function(){var u=this;return u.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),B(a,"$ascii_only?",function(){var u=this;return u.encoding.ascii?/^[\x00-\x7F]*$/.test(u):!1}),B(a,"$match",function s(u,f){var q=s.$$p||c,R=this;return s.$$p=null,(N(r("String"),u)||L(u["$respond_to?"]("to_str")))&&(u=o("Regexp").$new(u.$to_str())),N(o("Regexp"),u)||S.$raise(o("TypeError"),"wrong argument type "+u.$class()+" (expected Regexp)"),re(u,"match",[R,f],q.$to_proc())},-2),B(a,"$match?",function(u,f){var q=this;return(N(r("String"),u)||L(u["$respond_to?"]("to_str")))&&(u=o("Regexp").$new(u.$to_str())),N(o("Regexp"),u)||S.$raise(o("TypeError"),"wrong argument type "+u.$class()+" (expected Regexp)"),u["$match?"](q,f)},-2),B(a,"$next",function(){var u=this,f=u.length;if(f===0)return"";for(var q=u,R=u.search(/[a-zA-Z0-9]/),H=!1,D;f--;){if(D=u.charCodeAt(f),D>=48&&D<=57||D>=65&&D<=90||D>=97&&D<=122)switch(D){case 57:H=!0,D=48;break;case 90:H=!0,D=65;break;case 122:H=!0,D=97;break;default:H=!1,D+=1}else R===-1?D===255?(H=!0,D=0):(H=!1,D+=1):H=!0;if(q=q.slice(0,f)+String.fromCharCode(D)+q.slice(f+1),H&&(f===0||f===R)){switch(D){case 65:break;case 97:break;default:D+=1}f===0?q=String.fromCharCode(D)+q:q=q.slice(0,f)+String.fromCharCode(D)+q.slice(f),H=!1}if(!H)break}return q}),B(a,"$oct",function(){var u=this,f,q=u,R=8;return/^\s*_/.test(q)?0:(q=q.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(H,D,G,te){switch(te.charAt(0)){case"+":case"-":return H;case"0":if(te.charAt(1)==="x"&&G==="0x")return H}switch(G){case"0b":R=2;break;case"0":case"0o":R=8;break;case"0d":R=10;break;case"0x":R=16;break}return D+te}),f=parseInt(q.replace(/_(?!_)/g,""),R),isNaN(f)?0:f)}),B(a,"$ord",function(){var u=this;return typeof u.codePointAt=="function"?u.codePointAt(0):u.charCodeAt(0)}),B(a,"$partition",function(u){var f=this,q,R;return u.$$is_regexp?(R=u.exec(f),R===null?q=-1:(o("MatchData").$new(u,R),u=R[0],q=R.index)):(u=A(u,o("String"),"to_str"),q=f.indexOf(u)),q===-1?[f,"",""]:[f.slice(0,q),f.slice(q,q+u.length),f.slice(q+u.length)]}),B(a,"$reverse",function(){var u=this;return u.split("").reverse().join("")}),B(a,"$rindex",function(u,f){var q=this,R,H,D,G;if(f===void 0)f=q.length;else if(f=A(f,o("Integer"),"to_int"),f<0&&(f+=q.length,f<0))return c;if(u.$$is_regexp){for(H=null,D=x(u);G=D.exec(q),!(G===null||G.index>f);)H=G,D.lastIndex=H.index+1;H===null?(E["~"]=c,R=-1):(o("MatchData").$new(D,H),R=H.index)}else u=A(u,o("String"),"to_str"),R=q.lastIndexOf(u,f);return R===-1?c:R},-2),B(a,"$rjust",function(u,f){var q=this;if(f==null&&(f=" "),u=A(u,o("Integer"),"to_int"),f=A(f,o("String"),"to_str").$to_s(),L(f["$empty?"]())&&S.$raise(o("ArgumentError"),"zero width padding"),L(u<=q.length))return q;var R=Math.floor(u-q.length),H=Math.floor(R/f.length),D=Array(H+1).join(f),G=R-D.length;return D+f.slice(0,G)+q},-2),B(a,"$rpartition",function(u){var f=this,q,R,H,D;if(u.$$is_regexp){for(R=null,H=x(u);D=H.exec(f),D!==null;)R=D,H.lastIndex=R.index+1;R===null?q=-1:(o("MatchData").$new(H,R),u=R[0],q=R.index)}else u=A(u,o("String"),"to_str"),q=f.lastIndexOf(u);return q===-1?["","",f]:[f.slice(0,q),f.slice(q,q+u.length),f.slice(q+u.length)]}),B(a,"$rstrip",function(){var u=this;return u.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),B(a,"$scan",function s(u,f){var q=s.$$p||c,R,H=this;s.$$p=null,f=y(f),R=z(f,"no_matchdata"),R==null&&(R=!1);var D=[],G=c,te;for(u.$$is_regexp?u=x(u):(u=A(u,o("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(te=u.exec(H))!=null;)G=o("MatchData").$new(u,te,new Map([["no_matchdata",R]])),q===c?te.length==1?D.push(te[0]):D.push(G.$captures()):te.length==1?n.yield1(q,te[0]):n.yield1(q,G.$captures()),u.lastIndex===te.index&&(u.lastIndex+=1);return R||(E["~"]=G),q!==c?H:D},-2),B(a,"$singleton_class",function(){var u=this;return n.get_singleton_class(u)}),B(a,"$split",function(u,f){var q=this,R=c;if(E[";"]==null&&(E[";"]=c),q.length===0)return[];if(f===void 0)f=0;else if(f=O["$coerce_to!"](f,o("Integer"),"to_int"),f===1)return[q];(u===void 0||u===c)&&(u=L(R=E[";"])?R:" ");var H=[],D=q.toString(),G=0,te,ae=0,le=0,fe,de;if(u.$$is_regexp?u=x(u):(u=A(u,o("String"),"to_str").$to_s(),u===" "&&(u=/\s+/gm,D=D.replace(/^\s+/,""))),H=D.split(u),H.length===1&&H[0]===D)return[H[0]];for(;(fe=H.indexOf(void 0))!==-1;)H.splice(fe,1);if(f===0){for(;H[H.length-1]==="";)H.pop();return H}if(u.$$is_regexp||(u=n.escape_regexp(u),u=new RegExp(u,"gm")),te=u.exec(D),f<0){if(te!==null&&te[0]===""&&u.source.indexOf("(?=")===-1)for(fe=0,de=te.length;fe<de;fe++)H.push("");return H}if(te!==null&&te[0]==="")return le=(te.length-1)*(f-1)+f,H.splice(le-1,H.length-1,H.slice(le-1).join("")),H;if(f>=H.length)return H;for(;te!==null&&(ae++,G=u.lastIndex,le+=te.length,ae+1!==f);)te=u.exec(D);return H.splice(le,H.length-1,D.slice(G)),H},-1),B(a,"$squeeze",function(u){var f,q,R=this;if(f=U(arguments),q=f,q.length===0)return R.replace(/(.)\1+/g,"$1");var H=t(q);return H===null?R:R.replace(new RegExp("("+H+")\\1+","g"),"$1")},-1),B(a,"$start_with?",function(u){var f,q,R=this;f=U(arguments),q=f;for(var H=0,D=q.length;H<D;H++)if(q[H].$$is_regexp){var G=q[H],te=G.exec(R);if(te!=null&&te.index===0)return E["~"]=o("MatchData").$new(G,te),!0;E["~"]=c}else{var ae=A(q[H],o("String"),"to_str").$to_s();if(R.length>=ae.length&&R.startsWith(ae))return!0}return!1},-1),B(a,"$strip",function(){var u=this;return u.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),B(a,"$sub",function s(u,f){var q=s.$$p||c,R=this;s.$$p=null,u.$$is_regexp||(u=A(u,o("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var H,D=u.exec(R);return D===null?(E["~"]=c,H=R.toString()):(o("MatchData").$new(u,D),f===void 0?(q===c&&S.$raise(o("ArgumentError"),"wrong number of arguments (1 for 2)"),H=R.slice(0,D.index)+q(D[0])+R.slice(D.index+D[0].length)):f.$$is_hash?H=R.slice(0,D.index)+f["$[]"](D[0]).$to_s()+R.slice(D.index+D[0].length):(f=A(f,o("String"),"to_str"),f=f.replace(/([\\]+)([0-9+&`'])/g,function(G,te,ae){if(te.length%2===0)return G;switch(ae){case"+":for(var le=D.length-1;le>0;le--)if(D[le]!==void 0)return te.slice(1)+D[le];return"";case"&":return te.slice(1)+D[0];case"`":return te.slice(1)+R.slice(0,D.index);case"'":return te.slice(1)+R.slice(D.index+D[0].length);default:return te.slice(1)+(D[ae]||"")}}).replace(/\\\\/g,"\\"),H=R.slice(0,D.index)+f+R.slice(D.index+D[0].length))),H},-2),B(a,"$sum",function(u){var f=this;u==null&&(u=16),u=A(u,o("Integer"),"to_int");for(var q=0,R=f.length,H=0;H<R;H++)q+=f.charCodeAt(H);return u<=0?q:q&Math.pow(2,u)-1},-1),B(a,"$swapcase",function(){var u=this,f=u.replace(/([a-z]+)|([A-Z]+)/g,function(q,R,H){return R?q.toUpperCase():q.toLowerCase()});return f}),B(a,"$to_f",function(){var u=this;if(u.charAt(0)==="_")return 0;var f=parseFloat(u.replace(/_/g,""));return isNaN(f)||f==1/0||f==-1/0?0:f}),B(a,"$to_i",function(u){var f=this;u==null&&(u=10);var q,R=f.toLowerCase(),H=A(u,o("Integer"),"to_int");return(H===1||H<0||H>36)&&S.$raise(o("ArgumentError"),"invalid radix "+H),/^\s*_/.test(R)?0:(R=R.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(D,G,te,ae){switch(ae.charAt(0)){case"+":case"-":return D;case"0":if(ae.charAt(1)==="x"&&te==="0x"&&(H===0||H===16))return D}switch(te){case"0b":if(H===0||H===2)return H=2,G+ae;break;case"0":case"0o":if(H===0||H===8)return H=8,G+ae;break;case"0d":if(H===0||H===10)return H=10,G+ae;break;case"0x":if(H===0||H===16)return H=16,G+ae;break}return D}),q=parseInt(R.replace(/_(?!_)/g,""),H),isNaN(q)?0:q)},-1),B(a,"$to_proc",function s(){s.$$p;var u=this,f=c,q=c,R=c;return s.$$p=null,f=u.valueOf(),q=n.jsid(f),R=re(S,"proc",[],function H(D){var G=H.$$p||c,te,ae;H.$$p=null,te=U(arguments),ae=te,ae.length===0&&S.$raise(o("ArgumentError"),"no receiver given");var le=ae[0];le==null&&(le=c);var fe=le[q];return fe?ae=ae.slice(1):(fe=le.$method_missing,ae[0]=f),typeof G=="function"&&(fe.$$p=G),ae.length===0?fe.call(le):fe.apply(le,ae)},-1),R.$$source_location=c,R}),B(a,"$to_s",function(){var u=this;return u.toString()}),B(a,"$tr",function(u,f){var q=this;if(u=A(u,o("String"),"to_str").$to_s(),f=A(f,o("String"),"to_str").$to_s(),u.length==0||u===f)return q;var R,H,D,G,te,ae,le,fe={},de=u.split(""),he=de.length,ve=f.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],he-=1);var F=[],V=null;for(H=!1,R=0;R<he;R++)if(G=de[R],V==null)V=G,F.push(G);else if(G==="-")V==="-"?(F.push("-"),F.push("-")):R==he-1?F.push("-"):H=!0;else if(H){for(te=V.charCodeAt(0),ae=G.charCodeAt(0),te>ae&&S.$raise(o("ArgumentError"),'invalid range "'+String.fromCharCode(te)+"-"+String.fromCharCode(ae)+'" in string transliteration'),D=te+1;D<ae;D++)F.push(String.fromCharCode(D));F.push(G),H=null,V=null}else F.push(G);if(de=F,he=de.length,be)for(R=0;R<he;R++)fe[de[R]]=!0;else{if(me>0){var Y=[],ee=null;for(H=!1,R=0;R<me;R++)if(G=ve[R],ee==null)ee=G,Y.push(G);else if(G==="-")ee==="-"?(Y.push("-"),Y.push("-")):R==me-1?Y.push("-"):H=!0;else if(H){for(te=ee.charCodeAt(0),ae=G.charCodeAt(0),te>ae&&S.$raise(o("ArgumentError"),'invalid range "'+String.fromCharCode(te)+"-"+String.fromCharCode(ae)+'" in string transliteration'),D=te+1;D<ae;D++)Y.push(String.fromCharCode(D));Y.push(G),H=null,ee=null}else Y.push(G);ve=Y,me=ve.length}var $e=he-me;if($e>0){var se=me>0?ve[me-1]:"";for(R=0;R<$e;R++)ve.push(se)}for(R=0;R<he;R++)fe[de[R]]=ve[R]}var oe="";for(R=0,le=q.length;R<le;R++){G=q.charAt(R);var ce=fe[G];be?oe+=ce==null?ie:G:oe+=ce??G}return oe}),B(a,"$tr_s",function(u,f){var q=this;if(u=A(u,o("String"),"to_str").$to_s(),f=A(f,o("String"),"to_str").$to_s(),u.length==0)return q;var R,H,D,G,te,ae,le,fe={},de=u.split(""),he=de.length,ve=f.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],he-=1);var F=[],V=null;for(H=!1,R=0;R<he;R++)if(G=de[R],V==null)V=G,F.push(G);else if(G==="-")V==="-"?(F.push("-"),F.push("-")):R==he-1?F.push("-"):H=!0;else if(H){for(te=V.charCodeAt(0),ae=G.charCodeAt(0),te>ae&&S.$raise(o("ArgumentError"),'invalid range "'+String.fromCharCode(te)+"-"+String.fromCharCode(ae)+'" in string transliteration'),D=te+1;D<ae;D++)F.push(String.fromCharCode(D));F.push(G),H=null,V=null}else F.push(G);if(de=F,he=de.length,be)for(R=0;R<he;R++)fe[de[R]]=!0;else{if(me>0){var Y=[],ee=null;for(H=!1,R=0;R<me;R++)if(G=ve[R],V==null)V=G,Y.push(G);else if(G==="-")ee==="-"?(Y.push("-"),Y.push("-")):R==me-1?Y.push("-"):H=!0;else if(H){for(te=V.charCodeAt(0),ae=G.charCodeAt(0),te>ae&&S.$raise(o("ArgumentError"),'invalid range "'+String.fromCharCode(te)+"-"+String.fromCharCode(ae)+'" in string transliteration'),D=te+1;D<ae;D++)Y.push(String.fromCharCode(D));Y.push(G),H=null,V=null}else Y.push(G);ve=Y,me=ve.length}var $e=he-me;if($e>0){var se=me>0?ve[me-1]:"";for(R=0;R<$e;R++)ve.push(se)}for(R=0;R<he;R++)fe[de[R]]=ve[R]}var oe="",ce=null;for(R=0,le=q.length;R<le;R++){G=q.charAt(R);var g=fe[G];be?g==null?ce==null&&(oe+=ie,ce=!0):(oe+=G,ce=null):g!=null?(ce==null||ce!==g)&&(oe+=g,ce=g):(oe+=G,ce=null)}return oe}),B(a,"$upcase",function(){var u=this;return u.toUpperCase()}),B(a,"$upto",function s(u,f){var q=s.$$p||c,R=this;if(s.$$p=null,f==null&&(f=!1),q===c)return R.$enum_for("upto",u,f);var H,D,G=R.toString();if(u=A(u,o("String"),"to_str"),G.length===1&&u.length===1)for(H=G.charCodeAt(0),D=u.charCodeAt(0);H<=D&&!(f&&H===D);)q(String.fromCharCode(H)),H+=1;else if(parseInt(G,10).toString()===G&&parseInt(u,10).toString()===u)for(H=parseInt(G,10),D=parseInt(u,10);H<=D&&!(f&&H===D);)q(H.toString()),H+=1;else for(;G.length<=u.length&&G<=u&&!(f&&G===u);)q(G),G=G.$succ();return R},-2);function t(s){function u(fe){var de="",he,ve=fe.length,me,be,ie,F,V;for(he=0;he<ve;he++)if(me=fe.charAt(he),me==="-"&&he>0&&he<ve-1&&!be){for(ie=fe.charCodeAt(he-1),F=fe.charCodeAt(he+1),ie>F&&S.$raise(o("ArgumentError"),'invalid range "'+ie+"-"+F+'" in string transliteration'),V=ie+1;V<F+1;V++)de+=String.fromCharCode(V);be=!0,he++}else be=me==="\\",de+=me;return de}function f(fe,de){if(fe.length===0)return de;var he="",ve,me=fe.length,be;for(ve=0;ve<me;ve++)be=fe.charAt(ve),de.indexOf(be)!==-1&&(he+=be);return he}var q,R,H,D,G,te,ae="",le="";for(q=0,R=s.length;q<R;q++)H=A(s[q],o("String"),"to_str"),D=H.charAt(0)==="^"&&H.length>1,H=u(D?H.slice(1):H),D?le=f(le,H):ae=f(ae,H);if(ae.length>0&&le.length>0){for(te="",q=0,R=ae.length;q<R;q++)G=ae.charAt(q),le.indexOf(G)===-1&&(te+=G);ae=te,le=""}return ae.length>0?"["+o("Regexp").$escape(ae)+"]":le.length>0?"[^"+o("Regexp").$escape(le)+"]":null}return B(a,"$instance_variables",function(){return[]}),X(a,"$_load",function(u){var f,q,R=this;return f=U(arguments),q=f,re(R,"new",Z(q))},-1),B(a,"$unicode_normalize",function(u){var f=this;return u==null&&(u="nfc"),L(["nfc","nfd","nfkc","nfkd"]["$include?"](u))||S.$raise(o("ArgumentError"),"Invalid normalization form "+u),f.normalize(u.$upcase())},-1),B(a,"$unicode_normalized?",function(u){var f=this;return u==null&&(u="nfc"),f.$unicode_normalize(u)["$=="](f)},-1),B(a,"$unpack",function(u){return S.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),B(a,"$unpack1",function(u){return S.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),B(a,"$freeze",function(){var u=this;return typeof u=="string"||I(u,"$$frozen",!0),u}),B(a,"$-@",function(){var u=this;return typeof u=="string"||u.$$frozen?u:u.encoding.name=="UTF-8"&&u.internal_encoding.name=="UTF-8"?u.toString():u.$dup().$freeze()}),B(a,"$frozen?",function(){var u=this;return typeof u=="string"||u.$$frozen===!0}),m(a,"+@","dup"),m(a,"===","=="),m(a,"byteslice","[]"),m(a,"eql?","=="),m(a,"equal?","==="),m(a,"object_id","__id__"),m(a,"slice","[]"),m(a,"succ","next"),m(a,"to_str","to_s"),m(a,"to_sym","intern"),O.$pristine(a,"initialize")}("::",String,b),i(b[0],"Symbol",_("String"))};Opal.modules["corelib/enumerable"]=function(n){var A=n.truthy,h=n.coerce_to,x=n.yield1,I=n.yieldX,Q=n.deny_frozen_access,W=n.module,P=n.send,K=n.slice,p=n.to_a,B=n.Opal,O=n.thrower,X=n.def,U=n.Kernel,re=n.return_val,Z=n.rb_gt,j=n.rb_times,y=n.rb_lt,z=n.eqeq,N=n.rb_plus,S=n.rb_minus,L=n.rb_divide,E=n.rb_le,M=n.lambda,C=n.not,w=n.alias,m=[],i=n.nil,l=n.$$$;return n.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(b,_){var c=W(b,"Enumerable"),o=[c].concat(_),v=n.$r(o);function T(d){return d.length===0&&(d=[i]),d.length>1&&(d=[d]),d}return X(c,"$all?",function d(a){try{var $=O("return"),r=d.$$p||i,e=this;return d.$$p=null,A(a!==void 0)?P(e,"each",[],function t(s){var u,f,q=i;if(u=K(arguments),f=u,q=T(f),A(P(a,"public_send",["==="].concat(p(q)))))return i;$.$throw(!1,t.$$is_lambda)},{$$arity:-1,$$ret:$}):r!==i?P(e,"each",[],function t(s){var u,f;if(u=K(arguments),f=u,A(n.yieldX(r,p(f))))return i;$.$throw(!1,t.$$is_lambda)},{$$arity:-1,$$ret:$}):P(e,"each",[],function t(s){var u,f;if(u=K(arguments),f=u,A(B.$destructure(f)))return i;$.$throw(!1,t.$$is_lambda)},{$$arity:-1,$$ret:$}),!0}catch(t){if(t===$)return t.$v;throw t}finally{$.is_orphan=!0}},-1),X(c,"$any?",function d(a){try{var $=O("return"),r=d.$$p||i,e=this;return d.$$p=null,A(a!==void 0)?P(e,"each",[],function t(s){var u,f,q=i;if(u=K(arguments),f=u,q=T(f),A(P(a,"public_send",["==="].concat(p(q)))))$.$throw(!0,t.$$is_lambda);else return i},{$$arity:-1,$$ret:$}):r!==i?P(e,"each",[],function t(s){var u,f;if(u=K(arguments),f=u,A(n.yieldX(r,p(f))))$.$throw(!0,t.$$is_lambda);else return i},{$$arity:-1,$$ret:$}):P(e,"each",[],function t(s){var u,f;if(u=K(arguments),f=u,A(B.$destructure(f)))$.$throw(!0,t.$$is_lambda);else return i},{$$arity:-1,$$ret:$}),!1}catch(t){if(t===$)return t.$v;throw t}finally{$.is_orphan=!0}},-1),X(c,"$chunk",function d(){var a=d.$$p||i,$=this;return d.$$p=null,a===i?P($,"to_enum",["chunk"],function r(){var e=r.$$s==null?this:r.$$s;return e.$enumerator_size()},{$$s:$}):P(l("Enumerator"),"new",[],function r(e){var t=r.$$s==null?this:r.$$s;e==null&&(e=i);var s=i,u=[];function f(){u.length>0&&e.$yield(s,u)}t.$each.$$p=function(q){var R=x(a,q);R===i?(f(),u=[],s=i):(s===i||s===R?u.push(q):(f(),u=[q]),s=R)},t.$each(),f()},{$$s:$})}),X(c,"$chunk_while",function d(){var a=d.$$p||i,$=this;return d.$$p=null,a===i&&U.$raise(l("ArgumentError"),"no block given"),P($,"slice_when",[],function(e,t){return e==null&&(e=i),t==null&&(t=i),n.yieldX(a,[e,t])["$!"]()})}),X(c,"$collect",function d(){var a=d.$$p||i,$=this;if(d.$$p=null,a===i)return P($,"enum_for",["collect"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:$});var r=[];return $.$each.$$p=function(){var e=I(a,arguments);r.push(e)},$.$each(),r}),X(c,"$collect_concat",function d(){var a=d.$$p||i,$=this;return d.$$p=null,a===i?P($,"enum_for",["collect_concat"],function r(){var e=r.$$s==null?this:r.$$s;return e.$enumerator_size()},{$$s:$}):P($,"map",[],a.$to_proc()).$flatten(1)}),X(c,"$compact",function(){var a=this;return a.$to_a().$compact()}),X(c,"$count",function d(a){var $=d.$$p||i,r=this,e=i;return d.$$p=null,e=0,a!=null&&$!==i&&r.$warn("warning: given block not used"),A(a!=null)?$=P(U,"proc",[],function(s){var u,f;return u=K(arguments),f=u,B.$destructure(f)["$=="](a)},-1):A($["$nil?"]())&&($=P(U,"proc",[],re(!0))),P(r,"each",[],function(s){var u,f;return u=K(arguments),f=u,A(I($,f))?e++:i},-1),e},-1),X(c,"$cycle",function d(a){var $=d.$$p||i,r=this;if(d.$$p=null,a==null&&(a=i),$===i)return P(r,"enum_for",["cycle",a],function u(){var f=u.$$s==null?this:u.$$s;return A(a["$nil?"]())?A(f["$respond_to?"]("size"))?l(l("Float"),"INFINITY"):i:(a=B["$coerce_to!"](a,l("Integer"),"to_int"),A(Z(a,0))?j(f.$enumerator_size(),a):0)},{$$s:r});if(!A(a["$nil?"]())&&(a=B["$coerce_to!"](a,l("Integer"),"to_int"),A(a<=0)))return i;var e=[],t,s;if(r.$each.$$p=function(){var u=B.$destructure(arguments);x($,u),e.push(u)},r.$each(),e.length===0)return i;if(a===i)for(;;)for(t=0,s=e.length;t<s;t++)x($,e[t]);else for(;a>1;){for(t=0,s=e.length;t<s;t++)x($,e[t]);a--}},-1),X(c,"$detect",function d(a){try{var $=O("return"),r=d.$$p||i,e=this;return d.$$p=null,r===i?e.$enum_for("detect",a):(P(e,"each",[],function t(s){var u,f,q=i;if(u=K(arguments),f=u,q=B.$destructure(f),A(n.yield1(r,q)))$.$throw(q,t.$$is_lambda);else return i},{$$arity:-1,$$ret:$}),a!==void 0?typeof a=="function"?a():a:i)}catch(t){if(t===$)return t.$v;throw t}finally{$.is_orphan=!0}},-1),X(c,"$drop",function(a){var $=this;a=h(a,l("Integer"),"to_int"),A(a<0)&&U.$raise(l("ArgumentError"),"attempt to drop negative size");var r=[],e=0;return $.$each.$$p=function(){a<=e&&r.push(B.$destructure(arguments)),e++},$.$each(),r}),X(c,"$drop_while",function d(){var a=d.$$p||i,$=this;if(d.$$p=null,a===i)return $.$enum_for("drop_while");var r=[],e=!0;return $.$each.$$p=function(){var t=B.$destructure(arguments);if(e){var s=x(a,t);A(s)||(e=!1,r.push(t))}else r.push(t)},$.$each(),r}),X(c,"$each_cons",function d(a){var $=d.$$p||i,r=this;if(d.$$p=null,A(arguments.length!=1)&&U.$raise(l("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),a=B.$try_convert(a,l("Integer"),"to_int"),A(a<=0)&&U.$raise(l("ArgumentError"),"invalid size"),$===i)return P(r,"enum_for",["each_cons",a],function t(){var s=t.$$s==null?this:t.$$s,u=i;return u=s.$enumerator_size(),A(u["$nil?"]())?i:z(u,0)||A(y(u,a))?0:N(S(u,a),1)},{$$s:r});var e=[];return r.$each.$$p=function(){var t=B.$destructure(arguments);e.push(t),e.length>a&&e.shift(),e.length==a&&x($,e.slice(0,a))},r.$each(),r}),X(c,"$each_entry",function d(a){var $=d.$$p||i,r,e,t=this;return d.$$p=null,r=K(arguments),e=r,$===i?P(t,"to_enum",["each_entry"].concat(p(e)),function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:t}):(t.$each.$$p=function(){var s=B.$destructure(arguments);x($,s)},t.$each.apply(t,e),t)},-1),X(c,"$each_slice",function d(a){var $=d.$$p||i,r=this;if(d.$$p=null,a=h(a,l("Integer"),"to_int"),A(a<=0)&&U.$raise(l("ArgumentError"),"invalid slice size"),$===i)return P(r,"enum_for",["each_slice",a],function t(){var s=t.$$s==null?this:t.$$s;return A(s["$respond_to?"]("size"))?L(s.$size(),a).$ceil():i},{$$s:r});var e=[];return r.$each.$$p=function(){var t=B.$destructure(arguments);e.push(t),e.length===a&&(x($,e),e=[])},r.$each(),e.length>0&&x($,e),r}),X(c,"$each_with_index",function d(a){var $=d.$$p||i,r,e,t=this;if(d.$$p=null,r=K(arguments),e=r,$===i)return P(t,"enum_for",["each_with_index"].concat(p(e)),function u(){var f=u.$$s==null?this:u.$$s;return f.$enumerator_size()},{$$s:t});var s=0;return t.$each.$$p=function(){var u=B.$destructure(arguments);$(u,s),s++},t.$each.apply(t,e),t},-1),X(c,"$each_with_object",function d(a){var $=d.$$p||i,r=this;return d.$$p=null,$===i?P(r,"enum_for",["each_with_object",a],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var e=B.$destructure(arguments);$(e,a)},r.$each(),a)}),X(c,"$entries",function(a){var $,r,e=this;$=K(arguments),r=$;var t=[];return e.$each.$$p=function(){t.push(B.$destructure(arguments))},e.$each.apply(e,r),t},-1),X(c,"$filter_map",function d(){var a=d.$$p||i,$=this;return d.$$p=null,a===i?P($,"enum_for",["filter_map"],function r(){var e=r.$$s==null?this:r.$$s;return e.$enumerator_size()},{$$s:$}):P(P($,"map",[],a.$to_proc()),"select",[],"itself".$to_proc())}),X(c,"$find_all",function d(){var a=d.$$p||i,$=this;if(d.$$p=null,a===i)return P($,"enum_for",["find_all"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:$});var r=[];return $.$each.$$p=function(){var e=B.$destructure(arguments),t=x(a,e);A(t)&&r.push(e)},$.$each(),r}),X(c,"$find_index",function d(a){try{var $=O("return"),r=d.$$p||i,e=this,t=i;return d.$$p=null,A(a===void 0&&r===i)?e.$enum_for("find_index"):(a!=null&&r!==i&&e.$warn("warning: given block not used"),t=0,A(a!=null)?P(e,"each",[],function s(u){var f,q;return f=K(arguments),q=f,z(B.$destructure(q),a)&&$.$throw(t,s.$$is_lambda),t+=1},{$$arity:-1,$$ret:$}):P(e,"each",[],function s(u){var f,q;return f=K(arguments),q=f,A(n.yieldX(r,p(q)))&&$.$throw(t,s.$$is_lambda),t+=1},{$$arity:-1,$$ret:$}),i)}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),X(c,"$first",function(a){try{var $=O("return"),r=this,e=i,t=i;return A(a===void 0)?P(r,"each",[],function s(u){u==null&&(u=i),$.$throw(u,s.$$is_lambda)},{$$ret:$}):(e=[],a=h(a,l("Integer"),"to_int"),A(a<0)&&U.$raise(l("ArgumentError"),"attempt to take negative size"),A(a==0)?[]:(t=0,P(r,"each",[],function s(u){var f,q;if(f=K(arguments),q=f,e.push(B.$destructure(q)),A(a<=++t))$.$throw(e,s.$$is_lambda);else return i},{$$arity:-1,$$ret:$}),e))}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),X(c,"$grep",function d(a){var $=d.$$p||i,r=this,e=i;return d.$$p=null,e=[],P(r,"each",[],function(s){var u,f,q=i;return u=K(arguments),f=u,q=T(f),A(P(a,"__send__",["==="].concat(p(q))))?($!==i?(A(Z(f.$length(),1))&&(f=[f]),f=n.yieldX($,p(f))):A(E(f.$length(),1))&&(f=f["$[]"](0)),e.$push(f)):i},-1),e}),X(c,"$grep_v",function d(a){var $=d.$$p||i,r=this,e=i;return d.$$p=null,e=[],P(r,"each",[],function(s){var u,f,q=i;return u=K(arguments),f=u,q=T(f),A(P(a,"__send__",["==="].concat(p(q))))?i:($!==i?(A(Z(f.$length(),1))&&(f=[f]),f=n.yieldX($,p(f))):A(E(f.$length(),1))&&(f=f["$[]"](0)),e.$push(f))},-1),e}),X(c,"$group_by",function d(){var a=d.$$p||i,$,r=this,e=i,t=i;return d.$$p=null,a===i?P(r,"enum_for",["group_by"],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:r}):(e=new Map,r.$each.$$p=function(){var s=B.$destructure(arguments),u=x(a,s);(A(t=e["$[]"](u))?t:($=[u,[]],P(e,"[]=",$),$[$.length-1]))["$<<"](s)},r.$each(),e)}),X(c,"$include?",function(a){try{var $=O("return"),r=this;return P(r,"each",[],function e(t){var s,u;if(s=K(arguments),u=s,z(B.$destructure(u),a))$.$throw(!0,e.$$is_lambda);else return i},{$$arity:-1,$$ret:$}),!1}catch(e){if(e===$)return e.$v;throw e}finally{$.is_orphan=!0}}),X(c,"$inject",function d(a,$){var r=d.$$p||i,e=this;d.$$p=null;var t=a;return r!==i&&$===void 0?e.$each.$$p=function(){var s=B.$destructure(arguments);if(t===void 0){t=s;return}s=I(r,[t,s]),t=s}:($===void 0&&(l("Symbol")["$==="](a)||U.$raise(l("TypeError"),""+a.$inspect()+" is not a Symbol"),$=a,t=void 0),e.$each.$$p=function(){var s=B.$destructure(arguments);if(t===void 0){t=s;return}t=t.$__send__($,s)}),e.$each(),t??i},-1),X(c,"$lazy",function(){var a=this;return P(l(l("Enumerator"),"Lazy"),"new",[a,a.$enumerator_size()],function(r,e){var t,s;return r==null&&(r=i),t=K(arguments,1),s=t,P(r,"yield",p(s))},-2)}),X(c,"$enumerator_size",function(){var a=this;return A(a["$respond_to?"]("size"))?a.$size():i}),X(c,"$max",function d(a){var $=d.$$p||i,r=this;if(d.$$p=null,a===void 0||a===i){var e,t;return r.$each.$$p=function(){var s=B.$destructure(arguments);if(e===void 0){e=s;return}$!==i?t=I($,[s,e]):t=s["$<=>"](e),t===i&&U.$raise(l("ArgumentError"),"comparison failed"),t>0&&(e=s)},r.$each(),e===void 0?i:e}return a=h(a,l("Integer"),"to_int"),P(r,"sort",[],$.$to_proc()).$reverse().$first(a)},-1),X(c,"$max_by",function d(a){var $=d.$$p||i,r=this;if(d.$$p=null,a==null&&(a=i),!A($))return P(r,"enum_for",["max_by",a],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:r});if(!A(a["$nil?"]()))return P(r,"sort_by",[],$.$to_proc()).$reverse().$take(a);var e,t;return r.$each.$$p=function(){var s=B.$destructure(arguments),u=x($,s);if(e===void 0){e=s,t=u;return}u["$<=>"](t)>0&&(e=s,t=u)},r.$each(),e===void 0?i:e},-1),X(c,"$min",function d(a){var $=d.$$p||i,r=this;if(d.$$p=null,a==null&&(a=i),!A(a["$nil?"]()))return $!==i?P(r,"sort",[],function(s,u){return s==null&&(s=i),u==null&&(u=i),n.yieldX($,[s,u])}).$take(a):r.$sort().$take(a);var e;return $!==i?r.$each.$$p=function(){var t=B.$destructure(arguments);if(e===void 0){e=t;return}var s=$(t,e);s===i&&U.$raise(l("ArgumentError"),"comparison failed"),s<0&&(e=t)}:r.$each.$$p=function(){var t=B.$destructure(arguments);if(e===void 0){e=t;return}B.$compare(t,e)<0&&(e=t)},r.$each(),e===void 0?i:e},-1),X(c,"$min_by",function d(a){var $=d.$$p||i,r=this;if(d.$$p=null,a==null&&(a=i),!A($))return P(r,"enum_for",["min_by",a],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:r});if(!A(a["$nil?"]()))return P(r,"sort_by",[],$.$to_proc()).$take(a);var e,t;return r.$each.$$p=function(){var s=B.$destructure(arguments),u=x($,s);if(e===void 0){e=s,t=u;return}u["$<=>"](t)<0&&(e=s,t=u)},r.$each(),e===void 0?i:e},-1),X(c,"$minmax",function d(){var a=d.$$p||i,$=this,r=i;d.$$p=null,a=A(r=a)?r:P(U,"proc",[],function(f,q){return f==null&&(f=i),q==null&&(q=i),f["$<=>"](q)});var e=i,t=i,s=!0;return $.$each.$$p=function(){var u=B.$destructure(arguments);if(s)e=t=u,s=!1;else{var f=a.$call(e,u);f===i?U.$raise(l("ArgumentError"),"comparison failed"):f>0&&(e=u);var q=a.$call(t,u);q===i?U.$raise(l("ArgumentError"),"comparison failed"):q<0&&(t=u)}},$.$each(),[e,t]}),X(c,"$minmax_by",function d(){var a=d.$$p||i,$=this;if(d.$$p=null,!A(a))return P($,"enum_for",["minmax_by"],function u(){var f=u.$$s==null?this:u.$$s;return f.$enumerator_size()},{$$s:$});var r=i,e=i,t,s;return $.$each.$$p=function(){var u=B.$destructure(arguments),f=x(a,u);(t===void 0||f["$<=>"](t)<0)&&(r=u,t=f),(s===void 0||f["$<=>"](s)>0)&&(e=u,s=f)},$.$each(),[r,e]}),X(c,"$none?",function d(a){try{var $=O("return"),r=d.$$p||i,e=this;return d.$$p=null,A(a!==void 0)?P(e,"each",[],function t(s){var u,f,q=i;if(u=K(arguments),f=u,q=T(f),A(P(a,"public_send",["==="].concat(p(q)))))$.$throw(!1,t.$$is_lambda);else return i},{$$arity:-1,$$ret:$}):r!==i?P(e,"each",[],function t(s){var u,f;if(u=K(arguments),f=u,A(n.yieldX(r,p(f))))$.$throw(!1,t.$$is_lambda);else return i},{$$arity:-1,$$ret:$}):P(e,"each",[],function t(s){var u,f,q=i;if(u=K(arguments),f=u,q=B.$destructure(f),A(q))$.$throw(!1,t.$$is_lambda);else return i},{$$arity:-1,$$ret:$}),!0}catch(t){if(t===$)return t.$v;throw t}finally{$.is_orphan=!0}},-1),X(c,"$one?",function d(a){try{var $=O("return"),r=d.$$p||i,e=this,t=i;return d.$$p=null,t=0,A(a!==void 0)?P(e,"each",[],function s(u){var f,q,R=i;if(f=K(arguments),q=f,R=T(q),A(P(a,"public_send",["==="].concat(p(R)))))if(t=N(t,1),A(Z(t,1)))$.$throw(!1,s.$$is_lambda);else return i;else return i},{$$arity:-1,$$ret:$}):r!==i?P(e,"each",[],function s(u){var f,q;if(f=K(arguments),q=f,!A(n.yieldX(r,p(q))))return i;if(t=N(t,1),A(Z(t,1)))$.$throw(!1,s.$$is_lambda);else return i},{$$arity:-1,$$ret:$}):P(e,"each",[],function s(u){var f,q;if(f=K(arguments),q=f,!A(B.$destructure(q)))return i;if(t=N(t,1),A(Z(t,1)))$.$throw(!1,s.$$is_lambda);else return i},{$$arity:-1,$$ret:$}),t["$=="](1)}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),X(c,"$partition",function d(){var a=d.$$p||i,$=this;if(d.$$p=null,a===i)return P($,"enum_for",["partition"],function t(){var s=t.$$s==null?this:t.$$s;return s.$enumerator_size()},{$$s:$});var r=[],e=[];return $.$each.$$p=function(){var t=B.$destructure(arguments),s=x(a,t);A(s)?r.push(t):e.push(t)},$.$each(),[r,e]}),X(c,"$reject",function d(){var a=d.$$p||i,$=this;if(d.$$p=null,a===i)return P($,"enum_for",["reject"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:$});var r=[];return $.$each.$$p=function(){var e=B.$destructure(arguments),t=x(a,e);A(t)||r.push(e)},$.$each(),r}),X(c,"$reverse_each",function d(){var a=d.$$p||i,$=this;if(d.$$p=null,a===i)return P($,"enum_for",["reverse_each"],function t(){var s=t.$$s==null?this:t.$$s;return s.$enumerator_size()},{$$s:$});var r=[];$.$each.$$p=function(){r.push(arguments)},$.$each();for(var e=r.length-1;e>=0;e--)I(a,r[e]);return r}),X(c,"$slice_before",function d(a){var $=d.$$p||i,r=this;return d.$$p=null,A(a===void 0&&$===i)&&U.$raise(l("ArgumentError"),"both pattern and block are given"),A(a!==void 0&&$!==i||arguments.length>1)&&U.$raise(l("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),P(l("Enumerator"),"new",[],function e(t){var s=e.$$s==null?this:e.$$s;t==null&&(t=i);var u=[];$!==i?a===void 0?s.$each.$$p=function(){var f=B.$destructure(arguments),q=x($,f);A(q)&&u.length>0&&(t["$<<"](u),u=[]),u.push(f)}:s.$each.$$p=function(){var f=B.$destructure(arguments),q=$(f,a.$dup());A(q)&&u.length>0&&(t["$<<"](u),u=[]),u.push(f)}:s.$each.$$p=function(){var f=B.$destructure(arguments),q=a["$==="](f);A(q)&&u.length>0&&(t["$<<"](u),u=[]),u.push(f)},s.$each(),u.length>0&&t["$<<"](u)},{$$s:r})},-1),X(c,"$slice_after",function d(a){var $=d.$$p||i,r=this;return d.$$p=null,A(a===void 0&&$===i)&&U.$raise(l("ArgumentError"),"both pattern and block are given"),A(a!==void 0&&$!==i||arguments.length>1)&&U.$raise(l("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),A(a!==void 0)&&($=P(U,"proc",[],function(t){return t==null&&(t=i),a["$==="](t)})),P(l("Enumerator"),"new",[],function e(t){var s=e.$$s==null?this:e.$$s;t==null&&(t=i);var u;s.$each.$$p=function(){var f=B.$destructure(arguments),q=x($,f);u==null&&(u=[]),A(q)?(u.push(f),t.$yield(u),u=null):u.push(f)},s.$each(),u!=null&&t.$yield(u)},{$$s:r})},-1),X(c,"$slice_when",function d(){var a=d.$$p||i,$=this;return d.$$p=null,a===i&&U.$raise(l("ArgumentError"),"wrong number of arguments (0 for 1)"),P(l("Enumerator"),"new",[],function r(e){var t=r.$$s==null?this:r.$$s;e==null&&(e=i);var s=i,u=i;t.$each_cons.$$p=function(){var f=B.$destructure(arguments),q=f[0],R=f[1],H=I(a,[q,R]);u=R,s===i&&(s=[]),A(H)?(s.push(q),e.$yield(s),s=[]):s.push(q)},t.$each_cons(2),s!==i&&(s.push(u),e.$yield(s))},{$$s:$})}),X(c,"$sort",function d(){var a=d.$$p||i,$=this,r=i;return d.$$p=null,r=$.$to_a(),a===i&&(a=M(function(t,s){return t==null&&(t=i),s==null&&(s=i),t["$<=>"](s)})),P(r,"sort",[],a.$to_proc())}),X(c,"$sort_by",function d(){var a=d.$$p||i,$=this,r=i;return d.$$p=null,a===i?P($,"enum_for",["sort_by"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:$}):(r=P($,"map",[],function(){var t=i;return t=B.$destructure(arguments),[n.yield1(a,t),t]}),P(r,"sort!",[],function(t,s){return t==null&&(t=i),s==null&&(s=i),t[0]["$<=>"](s[0])}),P(r,"map!",[],function(t){return t==null&&(t=i),t[1]}))}),X(c,"$sum",function d(a){var $=d.$$p||i,r=this,e=i,t=i;return d.$$p=null,a==null&&(a=0),e=a,t=0,P(r,"each",[],function(u){var f,q,R=i,H=i,D=i;return f=K(arguments),q=f,R=$!==i?n.yieldX($,p(q)):B.$destructure(q),C([l(l("Float"),"INFINITY"),l(l("Float"),"INFINITY")["$-@"]()]["$include?"](R))&&A(R["$respond_to?"]("-"))?(H=S(R,t),D=N(e,H),t=S(S(D,e),H),e=D):e=N(e,R)},-1),e},-1),X(c,"$take",function(a){var $=this;return $.$first(a)}),X(c,"$take_while",function d(){try{var a=O("return"),$=d.$$p||i,r=this,e=i;return d.$$p=null,A($)?(e=[],P(r,"each",[],function t(s){var u,f,q=i;return u=K(arguments),f=u,q=B.$destructure(f),A(n.yield1($,q))||a.$throw(e,t.$$is_lambda),e.push(q)},{$$arity:-1,$$ret:a})):r.$enum_for("take_while")}catch(t){if(t===a)return t.$v;throw t}finally{a.is_orphan=!0}}),X(c,"$uniq",function d(){var a=d.$$p||i,$=this,r=i;return d.$$p=null,r=new Map,P($,"each",[],function(t){var s,u,f,q=i,R=i;return s=K(arguments),u=s,q=B.$destructure(u),R=a!==i?n.yield1(a,q):q,A(r["$key?"](R))?i:(f=[R,q],P(r,"[]=",f),f[f.length-1])},-1),r.$values()}),X(c,"$tally",function(a){var $=this,r=i;return a&&a!==i&&Q(a),r=P(P($,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),A(a)?(P(r,"each",[],function(t,s){var u;return t==null&&(t=i),s==null&&(s=i),u=[t,N(a.$fetch(t,0),s)],P(a,"[]=",u),u[u.length-1]}),a):r},-1),X(c,"$to_h",function d(a){var $=d.$$p||i,r,e,t=this;if(d.$$p=null,r=K(arguments),e=r,$!==i)return P(P(t,"map",[],$.$to_proc()),"to_h",p(e));var s=new Map;return t.$each.$$p=function(){var u=B.$destructure(arguments),f=B["$coerce_to?"](u,l("Array"),"to_ary"),q,R;f.$$is_array||U.$raise(l("TypeError"),"wrong element type "+u.$class()+" (expected array)"),f.length!==2&&U.$raise(l("ArgumentError"),"element has wrong array length (expected 2, was "+f.$length()+")"),q=f[0],R=f[1],n.hash_put(s,q,R)},t.$each.apply(t,e),s},-1),X(c,"$to_set",function d(a,$){var r=d.$$p||i,e,t,s,u=this;return d.$$p=null,e=K(arguments),e.length>0&&(t=e.shift()),t==null&&(t=v("Set")),s=e,P(t,"new",[u].concat(p(s)),r.$to_proc())},-1),X(c,"$zip",function d(a){d.$$p;var $,r,e=this;return d.$$p=null,$=K(arguments),r=$,P(e.$to_a(),"zip",p(r))},-1),w(c,"find","detect"),w(c,"filter","find_all"),w(c,"flat_map","collect_concat"),w(c,"map","collect"),w(c,"member?","include?"),w(c,"reduce","inject"),w(c,"select","find_all"),w(c,"to_a","entries")}("::",m)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(n){var A=n.klass,h=n.truthy,x=n.to_a,I=n.eqeq,Q=n.Kernel,W=n.def,P=n.rb_gt,K=n.rb_lt,p=n.rb_le,B=n.rb_ge,O=n.rb_plus,X=n.rb_minus,U=n.eqeqeq,re=n.not,Z=n.rb_times,j=n.rb_divide,y=n.alias,z=[],N=n.nil,S=n.$$$;return n.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(L,E,M){var C=A(L,E,"Enumerator"),w=[C].concat(M);return function(m,i,l){var b=A(m,i,"ArithmeticSequence"),_=[b].concat(l),c=n.$r(_),o=b.$$prototype;o.step_arg2=o.receiver_num=o.step_arg1=o.step=o.range=o.topfx=o.bypfx=o.creation_method=o.skipped_arg=N,n.prop(b.$$prototype,"$$is_arithmetic_seq",!0);var v=1/0;return W(b,"$initialize",function(d,a,$){var r,e=this,t=N;return $==null&&($="step"),e.creation_method=$,h(d["$is_a?"](S("Array")))?(r=[].concat(x(d)),e.step_arg1=r[0]==null?N:r[0],e.step_arg2=r[1]==null?N:r[1],e.topfx=r[2]==null?N:r[2],e.bypfx=r[3]==null?N:r[3],e.receiver_num=a,e.step=1,e.range=h(e.step_arg2)?(e.step=e.step_arg2,n.Range.$new(e.receiver_num,e.step_arg1,!1)):h(e.step_arg1)?n.Range.$new(e.receiver_num,e.step_arg1,!1):n.Range.$new(e.receiver_num,N,!1)):(h(a)||(e.skipped_arg=!0),r=[d,h(t=a)?t:1],e.range=r[0],e.step=r[1]),e.object=e,I(e.step,0)&&Q.$raise(c("ArgumentError"),"step can't be 0"),h(e.step["$respond_to?"]("to_int"))?N:Q.$raise(c("ArgumentError"),"no implicit conversion of "+e.step.$class()+" into Integer")},-2),b.$attr_reader("step"),W(b,"$begin",function(){var d=this;return d.range.$begin()}),W(b,"$end",function(){var d=this;return d.range.$end()}),W(b,"$exclude_end?",function(){var d=this;return d.range["$exclude_end?"]()}),W(b,"$_lesser_than_end?",function(d){var a=this,$=N,r=N;return $=h(r=a.$end())?r:v,h(P(a.$step(),0))?h(a["$exclude_end?"]())?K(d,$):p(d,$):h(a["$exclude_end?"]())?P(d,$):B(d,$)}),W(b,"$_greater_than_begin?",function(d){var a=this,$=N,r=N;return $=h(r=a.$begin())?r:v["$-@"](),h(P(a.$step(),0))?P(d,$):K(d,$)}),W(b,"$first",function(d){var a=this,$=N,r=N,e=N;if($=h(r=a.$begin())?r:v["$-@"](),!h(d))return h(a["$_lesser_than_end?"]($))?$:N;for(e=[];h(h(r=a["$_lesser_than_end?"]($))?P(d,0):r);)e["$<<"]($),$=O($,a.$step()),d=X(d,1);return e},-1),W(b,"$each",function T(){var d=T.$$p||N,a=this,$=N,r=N;if(T.$$p=null,d===N)return a;for(U(N,$=a.$begin())&&Q.$raise(c("TypeError"),"nil can't be coerced into Integer"),r=h($=a.$begin())?$:v["$-@"]();h(a["$_lesser_than_end?"](r));)n.yield1(d,r),r=O(r,a.$step());return a}),W(b,"$last",function(d){var a=this,$=N,r=N,e=N;if(U(v,$=a.$end())||U(v["$-@"](),$)?Q.$raise(S("FloatDomainError"),a.$end()):U(N,$)&&Q.$raise(S("RangeError"),"cannot get the last element of endless arithmetic sequence"),r=X(a.$end(),X(a.$end(),a.$begin())["$%"](a.$step())),h(a["$_lesser_than_end?"](r))||(r=X(r,a.$step())),!h(d))return h(a["$_greater_than_begin?"](r))?r:N;for(e=[];h(h($=a["$_greater_than_begin?"](r))?P(d,0):$);)e["$<<"](r),r=X(r,a.$step()),d=X(d,1);return e.$reverse()},-1),W(b,"$size",function(){var d=this,a=N,$=N;return a=h(P(d.$step(),0))?1:-1,re(d["$_lesser_than_end?"](d.$begin()))?0:h([v["$-@"](),v]["$include?"](d.$step()))?1:h([Z(v["$-@"](),a),N]["$include?"](d.$begin()))||h([Z(v,a),N]["$include?"](d.$end()))?v:($=X(d.$end(),X(d.$end(),d.$begin())["$%"](d.$step())),h(d["$_lesser_than_end?"]($))||($=X($,d.$step())),O(j(X($,d.$begin()),d.$step()).$abs().$to_i(),1))}),W(b,"$==",function(d){var a=this,$=N,r=N,e=N,t=N;return h($=h(r=h(e=h(t=a.$class()["$=="](d.$class()))?a.$begin()["$=="](d.$begin()):t)?a.$end()["$=="](d.$end()):e)?a.$step()["$=="](d.$step()):r)?a["$exclude_end?"]()["$=="](d["$exclude_end?"]()):$}),W(b,"$hash",function(){var d=this;return[c("ArithmeticSequence"),d.$begin(),d.$end(),d.$step(),d["$exclude_end?"]()].$hash()}),W(b,"$inspect",function(){var d=this,a=N;return h(d.receiver_num)?(a=h(d.step_arg2)?"("+d.topfx+d.step_arg1.$inspect()+", "+d.bypfx+d.step_arg2.$inspect()+")":h(d.step_arg1)?"("+d.topfx+d.step_arg1.$inspect()+")":N,"("+d.receiver_num.$inspect()+"."+d.creation_method+a+")"):(a=h(d.skipped_arg)?N:"("+d.step+")","(("+d.range.$inspect()+")."+d.creation_method+a+")")}),y(b,"===","=="),y(b,"eql?","==")}(C,C,w)}("::",null,z)};Opal.modules["corelib/enumerator/chain"]=function(n){var A=n.deny_frozen_access,h=n.klass,x=n.slice,I=n.def,Q=n.send,W=n.to_a,P=n.truthy,K=n.rb_plus,p=n.thrower,B=n.nil,O=n.$$$;return n.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(X,U){var re=h(X,U,"Enumerator");return function(Z,j){var y=h(Z,j,"Chain"),z=y.$$prototype;return z.enums=z.iterated=B,I(y,"$initialize",function(S){var L,E,M=this;return L=x(arguments),E=L,A(M),M.enums=E,M.iterated=[],M.object=M},-1),I(y,"$each",function N(S){var L=N.$$p||B,E,M,C=this;return N.$$p=null,E=x(arguments),M=E,L===B?Q(C,"to_enum",["each"].concat(W(M)),function w(){var m=w.$$s==null?this:w.$$s;return m.$size()},{$$s:C}):(Q(C.enums,"each",[],function w(m){var i=w.$$s==null?this:w.$$s;return i.iterated==null&&(i.iterated=B),m==null&&(m=B),i.iterated["$<<"](m),Q(m,"each",W(M),L.$to_proc())},{$$s:C}),C)},-1),I(y,"$size",function(S){try{var L=p("return"),E,M,C=this,w=B;return E=x(arguments),M=E,w=0,Q(C.enums,"each",[],function m(i){var l=B;return i==null&&(i=B),l=Q(i,"size",W(M)),P([B,O(O("Float"),"INFINITY")]["$include?"](l))&&L.$throw(l,m.$$is_lambda),w=K(w,l)},{$$ret:L}),w}catch(m){if(m===L)return m.$v;throw m}finally{L.is_orphan=!0}},-1),I(y,"$rewind",function(){var S=this;return Q(S.iterated,"reverse_each",[],function(E){return E==null&&(E=B),P(E["$respond_to?"]("rewind"))?E.$rewind():B}),S.iterated=[],S}),I(y,"$inspect",function(){var S=this;return"#<Enumerator::Chain: "+S.enums.$inspect()+">"})}(re,re)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(n){var A=n.deny_frozen_access,h=n.klass,x=n.truthy,I=n.Kernel,Q=n.def,W=n.slice,P=n.send,K=[],p=n.nil,B=n.$$$;return n.add_stubs("include,raise,new,to_proc"),function(O,X,U){var re=h(O,X,"Enumerator"),Z=[re].concat(U);return function(j,y,z){var N=h(j,y,"Generator"),S=[N].concat(z),L=n.$r(S),E=N.$$prototype;return E.block=p,N.$include(B("Enumerable")),Q(N,"$initialize",function M(){var C=M.$$p||p,w=this;return M.$$p=null,A(w),x(C)||I.$raise(B("LocalJumpError"),"no block given"),w.block=C}),Q(N,"$each",function M(C){var w=M.$$p||p,m,i,l=this,b=p;M.$$p=null,m=W(arguments),i=m,b=P(L("Yielder"),"new",[],w.$to_proc());try{i.unshift(b),n.yieldX(l.block,i)}catch(_){if(_&&_.$thrower_type=="breaker")return _.$v;throw _}return l},-1)}(Z[0],null,Z)}(K[0],null,K)};Opal.modules["corelib/enumerator/lazy"]=function(n){var A=n.truthy,h=n.coerce_to,x=n.yield1,I=n.yieldX,Q=n.deny_frozen_access,W=n.klass,P=n.slice,K=n.send2,p=n.find_super,B=n.to_a,O=n.defs,X=n.Kernel,U=n.send,re=n.def,Z=n.return_self,j=n.Opal,y=n.rb_lt,z=n.eqeqeq,N=n.rb_plus,S=n.alias,L=[],E=n.nil,M=n.$$$;return n.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(C,w,m){var i=W(C,w,"Enumerator"),l=[i].concat(m);return function(b,_,c){var o=W(b,_,"Lazy"),v=[o].concat(c),T=n.$r(v),d=o.$$prototype;return d.enumerator=E,W(o,M("Exception"),"StopLazyError"),O(o,"$for",function a($,r){var e,t,s=a.$$p||E,u=this,f=E;return a.$$p=null,e=P(arguments,1),t=e,f=K(u,p(u,"for",a,!1,!0),"for",[$].concat(B(t)),s),f.enumerator=$,f},-2),re(o,"$initialize",function a($,r){var e=a.$$p||E,t=this;return a.$$p=null,r==null&&(r=E),Q(t),e===E&&X.$raise(M("ArgumentError"),"tried to call lazy new without a block"),t.enumerator=$,K(t,p(t,"initialize",a,!1,!0),"initialize",[r],function(u,f){var q,R;u==null&&(u=E),q=P(arguments,1),R=q;try{return U($,"each",B(R),function(D){var G,te;G=P(arguments),te=G,te.unshift(u),I(e,te)},-1)}catch(H){if(n.rescue(H,[T("StopLazyError")]))try{return E}finally{n.pop_exception(H)}else throw H}},-2)},-2),re(o,"$lazy",Z),re(o,"$collect",function a(){var $=a.$$p||E,r=this;return a.$$p=null,A($)||X.$raise(M("ArgumentError"),"tried to call lazy map without a block"),U(T("Lazy"),"new",[r,r.$enumerator_size()],function(t,s){var u,f;t==null&&(t=E),u=P(arguments,1),f=u;var q=I($,f);t.$yield(q)},-2)}),re(o,"$collect_concat",function a(){var $=a.$$p||E,r=this;return a.$$p=null,A($)||X.$raise(M("ArgumentError"),"tried to call lazy map without a block"),U(T("Lazy"),"new",[r,E],function(t,s){var u,f;t==null&&(t=E),u=P(arguments,1),f=u;var q=I($,f);if(q["$respond_to?"]("force")&&q["$respond_to?"]("each"))U(q,"each",[],function(D){return D==null&&(D=E),t.$yield(D)});else{var R=j.$try_convert(q,M("Array"),"to_ary");R===E?t.$yield(q):U(q,"each",[],function(D){return D==null&&(D=E),t.$yield(D)})}},-2)}),re(o,"$drop",function($){var r=this,e=E,t=E,s=E;return $=h($,M("Integer"),"to_int"),A(y($,0))&&X.$raise(M("ArgumentError"),"attempt to drop negative size"),e=r.$enumerator_size(),t=z(M("Integer"),e)&&A(y($,e))?$:e,s=0,U(T("Lazy"),"new",[r,t],function(f,q){var R,H;return f==null&&(f=E),R=P(arguments,1),H=R,A(y(s,$))?s=N(s,1):U(f,"yield",B(H))},-2)}),re(o,"$drop_while",function a(){var $=a.$$p||E,r=this,e=E;return a.$$p=null,A($)||X.$raise(M("ArgumentError"),"tried to call lazy drop_while without a block"),e=!0,U(T("Lazy"),"new",[r,E],function(s,u){var f,q;if(s==null&&(s=E),f=P(arguments,1),q=f,A(e)){var R=I($,q);A(R)||(e=!1,U(s,"yield",B(q)))}else return U(s,"yield",B(q))},-2)}),re(o,"$enum_for",function a($,r){var e=a.$$p||E,t,s,u,f=this;return a.$$p=null,t=P(arguments),t.length>0&&(s=t.shift()),s==null&&(s="each"),u=t,U(f.$class(),"for",[f,s].concat(B(u)),e.$to_proc())},-1),re(o,"$find_all",function a(){var $=a.$$p||E,r=this;return a.$$p=null,A($)||X.$raise(M("ArgumentError"),"tried to call lazy select without a block"),U(T("Lazy"),"new",[r,E],function(t,s){var u,f;t==null&&(t=E),u=P(arguments,1),f=u;var q=I($,f);A(q)&&U(t,"yield",B(f))},-2)}),re(o,"$grep",function a($){var r=a.$$p||E,e=this;return a.$$p=null,A(r)?U(T("Lazy"),"new",[e,E],function(s,u){var f,q;s==null&&(s=E),f=P(arguments,1),q=f;var R=j.$destructure(q),H=$["$==="](R);A(H)&&(H=x(r,R),s.$yield(x(r,R)))},-2):U(T("Lazy"),"new",[e,E],function(s,u){var f,q;s==null&&(s=E),f=P(arguments,1),q=f;var R=j.$destructure(q),H=$["$==="](R);A(H)&&s.$yield(R)},-2)}),re(o,"$reject",function a(){var $=a.$$p||E,r=this;return a.$$p=null,A($)||X.$raise(M("ArgumentError"),"tried to call lazy reject without a block"),U(T("Lazy"),"new",[r,E],function(t,s){var u,f;t==null&&(t=E),u=P(arguments,1),f=u;var q=I($,f);A(q)||U(t,"yield",B(f))},-2)}),re(o,"$take",function($){var r=this,e=E,t=E,s=E;return $=h($,M("Integer"),"to_int"),A(y($,0))&&X.$raise(M("ArgumentError"),"attempt to take negative size"),e=r.$enumerator_size(),t=z(M("Integer"),e)&&A(y($,e))?$:e,s=0,U(T("Lazy"),"new",[r,t],function(f,q){var R,H;return f==null&&(f=E),R=P(arguments,1),H=R,A(y(s,$))?(U(f,"yield",B(H)),s=N(s,1)):X.$raise(T("StopLazyError"))},-2)}),re(o,"$take_while",function a(){var $=a.$$p||E,r=this;return a.$$p=null,A($)||X.$raise(M("ArgumentError"),"tried to call lazy take_while without a block"),U(T("Lazy"),"new",[r,E],function(t,s){var u,f;t==null&&(t=E),u=P(arguments,1),f=u;var q=I($,f);A(q)?U(t,"yield",B(f)):X.$raise(T("StopLazyError"))},-2)}),re(o,"$inspect",function(){var $=this;return"#<"+$.$class()+": "+$.enumerator.$inspect()+">"}),S(o,"force","to_a"),S(o,"filter","find_all"),S(o,"flat_map","collect_concat"),S(o,"map","collect"),S(o,"select","find_all"),S(o,"to_enum","enum_for")}(i,i,l)}("::",null,L)};Opal.modules["corelib/enumerator/yielder"]=function(n){var A=n.klass,h=n.def,x=n.slice,I=n.send,Q=n.to_a,W=[],P=n.nil;return n.add_stubs("yield,proc"),function(K,p,B){var O=A(K,p,"Enumerator"),X=[O].concat(B);return function(U,re){var Z=A(U,re,"Yielder"),j=Z.$$prototype;return j.block=P,h(Z,"$initialize",function y(){var z=y.$$p||P,N=this;return y.$$p=null,N.block=z,N}),h(Z,"$yield",function(z){var N,S,L=this;N=x(arguments),S=N;var E=n.yieldX(L.block,S);if(E&&E.$thrower_type=="break")throw E;return E},-1),h(Z,"$<<",function(z){var N=this;return N.$yield(z),N}),h(Z,"$to_proc",function(){var z=this;return I(z,"proc",[],function N(S){var L,E,M=N.$$s==null?this:N.$$s;return L=x(arguments),E=L,I(M,"yield",Q(E))},{$$arity:-1,$$s:z})})}(X[0],null)}(W[0],null,W)};Opal.modules["corelib/enumerator"]=function(n){var A=n.slice,h=n.coerce_to,x=n.deny_frozen_access,I=n.klass,Q=n.defs,W=n.truthy,P=n.send,K=n.not,p=n.def,B=n.rb_plus,O=n.to_a,X=n.Opal,U=n.send2,re=n.find_super,Z=n.rb_ge,j=n.Kernel,y=n.rb_le,z=n.alias,N=n.top,S=[],L=n.nil,E=n.$$$;return n.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),N.$require("corelib/enumerable"),function(M,C,w){var m=I(M,C,"Enumerator"),i=[m].concat(w),l=n.$r(i),b=m.$$prototype;return b.size=b.args=b.object=b.method=b.values=b.cursor=L,m.$include(E("Enumerable")),m.$$prototype.$$is_enumerator=!0,Q(m,"$for",function _(c,o,v){var T=_.$$p||L,d,a,$,r=this;_.$$p=null,d=A(arguments,1),d.length>0&&(a=d.shift()),a==null&&(a="each"),$=d;var e=r.$allocate();return e.object=c,e.size=T,e.method=a,e.args=$,e.cursor=0,e},-2),p(m,"$initialize",function _(c){var o=_.$$p||L,v=this;return _.$$p=null,A(arguments),x(v),v.cursor=0,W(o)?(v.object=P(l("Generator"),"new",[],o.$to_proc()),v.method="each",v.args=[],v.size=arguments[0]||L,W(v.size)&&K(v.size["$respond_to?"]("call"))?v.size=h(v.size,E("Integer"),"to_int"):L):(v.object=arguments[0],v.method=arguments[1]||"each",v.args=A(arguments,2),v.size=L)},-1),p(m,"$each",function _(c){var o=_.$$p||L,v,T,d=this;return _.$$p=null,v=A(arguments),T=v,W(o["$nil?"]())&&W(T["$empty?"]())?d:(T=B(d.args,T),W(o["$nil?"]())?P(d.$class(),"new",[d.object,d.method].concat(O(T))):P(d.object,"__send__",[d.method].concat(O(T)),o.$to_proc()))},-1),p(m,"$size",function(){var c=this;return W(c.size["$respond_to?"]("call"))?P(c.size,"call",O(c.args)):c.size}),p(m,"$with_index",function _(c){var o=_.$$p||L,v=this;if(_.$$p=null,c==null&&(c=0),c=W(c)?h(c,E("Integer"),"to_int"):0,!W(o))return P(v,"enum_for",["with_index",c],function d(){var a=d.$$s==null?this:d.$$s;return a.$size()},{$$s:v});var T=c;return v.$each.$$p=function(){var d=X.$destructure(arguments),a=o(d,T);return T++,a},v.$each()},-1),p(m,"$each_with_index",function _(){var c=_.$$p||L,o=this;return _.$$p=null,c===L?P(o,"enum_for",["each_with_index"],function v(){var T=v.$$s==null?this:v.$$s;return T.$size()},{$$s:o}):(U(o,re(o,"each_with_index",_,!1,!0),"each_with_index",[],c),o.object)}),p(m,"$rewind",function(){var c=this;return c.cursor=0,c}),p(m,"$peek_values",function(){var c=this,o=L;return c.values=W(o=c.values)?o:P(c,"map",[],function(T){var d,a;return d=A(arguments),a=d,a},-1),W(Z(c.cursor,c.values.$length()))&&j.$raise(E("StopIteration"),"iteration reached an end"),c.values["$[]"](c.cursor)}),p(m,"$peek",function(){var c=this,o=L;return o=c.$peek_values(),W(y(o.$length(),1))?o["$[]"](0):o}),p(m,"$next_values",function(){var c=this,o=L;return o=c.$peek_values(),c.cursor=B(c.cursor,1),o}),p(m,"$next",function(){var c=this,o=L;return o=c.$next_values(),W(y(o.$length(),1))?o["$[]"](0):o}),p(m,"$feed",function(c){var o=this;return o.$raise(l("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),p(m,"$+",function(c){var o=this;return E(E("Enumerator"),"Chain").$new(o,c)}),p(m,"$inspect",function(){var c=this,o=L;return o="#<"+c.$class()+": "+c.object.$inspect()+":"+c.method,W(c.args["$any?"]())&&(o=B(o,"("+c.args.$inspect()["$[]"](E("Range").$new(1,-2))+")")),B(o,">")}),z(m,"with_object","each_with_object"),m.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),m.$autoload("Chain","corelib/enumerator/chain"),m.$autoload("Generator","corelib/enumerator/generator"),m.$autoload("Lazy","corelib/enumerator/lazy"),m.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,S)};Opal.modules["corelib/numeric"]=function(n){var A=n.klass,h=n.truthy,x=n.Kernel,I=n.def,Q=n.to_ary,W=n.return_self,P=n.rb_minus,K=n.rb_times,p=n.rb_lt,B=n.eqeq,O=n.rb_divide,X=n.return_val,U=n.Opal,re=n.slice,Z=n.extract_kwargs,j=n.ensure_kwargs,y=n.hash_get,z=n.not,N=n.send,S=n.rb_ge,L=n.rb_le,E=n.rb_plus,M=n.rb_gt,C=n.alias,w=n.top,m=n.nil,i=n.$$$;return n.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),w.$require("corelib/comparable"),function(l,b){var _=A(l,b,"Numeric");return _.$include(i("Comparable")),I(_,"$coerce",function(o){var v=this;return h(o["$instance_of?"](v.$class()))?[o,v]:[x.$Float(o),x.$Float(v)]}),I(_,"$__coerced__",function(o,v){var T,d,a=this,$=m,r=m;if(h(v["$respond_to?"]("coerce")))return d=v.$coerce(a),T=Q(d),$=T[0]==null?m:T[0],r=T[1]==null?m:T[1],$.$__send__(o,r);switch(o.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return x.$raise(i("TypeError"),""+v.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return x.$raise(i("ArgumentError"),"comparison of "+a.$class()+" with "+v.$class()+" failed");default:return m}}),I(_,"$<=>",function(o){var v=this;return h(v["$equal?"](o))?0:m}),I(_,"$+@",W),I(_,"$-@",function(){var o=this;return P(0,o)}),I(_,"$%",function(o){var v=this;return P(v,K(o,v.$div(o)))}),I(_,"$abs",function(){var o=this;return h(p(o,0))?o["$-@"]():o}),I(_,"$abs2",function(){var o=this;return K(o,o)}),I(_,"$angle",function(){var o=this;return h(p(o,0))?i(i("Math"),"PI"):0}),I(_,"$ceil",function(o){var v=this;return o==null&&(o=0),v.$to_f().$ceil(o)},-1),I(_,"$conj",W),I(_,"$denominator",function(){var o=this;return o.$to_r().$denominator()}),I(_,"$div",function(o){var v=this;return B(o,0)&&x.$raise(i("ZeroDivisionError"),"divided by o"),O(v,o).$floor()}),I(_,"$divmod",function(o){var v=this;return[v.$div(o),v["$%"](o)]}),I(_,"$fdiv",function(o){var v=this;return O(v.$to_f(),o)}),I(_,"$floor",function(o){var v=this;return o==null&&(o=0),v.$to_f().$floor(o)},-1),I(_,"$i",function(){var o=this;return x.$Complex(0,o)}),I(_,"$imag",X(0)),I(_,"$integer?",X(!1)),I(_,"$nonzero?",function(){var o=this;return h(o["$zero?"]())?m:o}),I(_,"$numerator",function(){var o=this;return o.$to_r().$numerator()}),I(_,"$polar",function(){var o=this;return[o.$abs(),o.$arg()]}),I(_,"$quo",function(o){var v=this;return O(U["$coerce_to!"](v,i("Rational"),"to_r"),o)}),I(_,"$real",W),I(_,"$real?",X(!0)),I(_,"$rect",function(){var o=this;return[o,0]}),I(_,"$round",function(o){var v=this;return v.$to_f().$round(o)},-1),I(_,"$step",function c(o,v,T){var d=c.$$p||m,a,$,r,e,t,s,u=this,f=m;c.$$p=null,a=re(arguments),$=Z(a),$=j($),a.length>0&&(r=a.shift()),a.length>0&&(e=a.shift()),t=y($,"to"),s=y($,"by"),r!==void 0&&t!==void 0&&x.$raise(i("ArgumentError"),"to is given twice"),e!==void 0&&s!==void 0&&x.$raise(i("ArgumentError"),"step is given twice"),t!==void 0&&(r=t),s!==void 0&&(e=s),r===void 0&&(r=m);function q(){e===m&&x.$raise(i("TypeError"),"step must be numeric"),e!=null&&e["$=="](0)&&x.$raise(i("ArgumentError"),"step can't be 0"),(e===m||e==null)&&(e=1);var he=e["$<=>"](0);he===m&&x.$raise(i("ArgumentError"),"0 can't be coerced into "+e.$class()),(r===m||r==null)&&(r=he>0?i(i("Float"),"INFINITY"):i(i("Float"),"INFINITY")["$-@"]()),U.$compare(u,r)}function R(){if(e>0&&u>r||e<0&&u<r)return 0;if(e===1/0||e===-1/0)return 1;var he=Math.abs,ve=Math.floor,me=(he(u)+he(r)+he(r-u))/he(e)*i(i("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((r-u)/e+me)+1)}function H(){if(q(),e===0)return 1/0;if(e%1!==0)return R();if(e>0&&u>r||e<0&&u<r)return 0;var he=Math.ceil,ve=Math.abs,me=ve(u-r)+1,be=ve(e);return he(me/be)}if(d===m)return(z(r)||h(r["$is_a?"](i("Numeric"))))&&(z(e)||h(e["$is_a?"](i("Numeric"))))?i(i("Enumerator"),"ArithmeticSequence").$new([r,e,h(t)?"to: ":m,h(s)?"by: ":m],u):N(u,"enum_for",["step",r,e],H.$to_proc());q();var D=e["$negative?"](),G=e["$=="](0)||r===1/0&&!D||r===-1/0&&D;if(u.$$is_number&&e.$$is_number&&r.$$is_number)if(u%1===0&&(G||r%1===0)&&e%1===0){var te=u;if(G)for(;;te+=e)d(te);else if(D)for(;te>=r;te+=e)d(te);else for(;te<=r;te+=e)d(te);return u}else{var ae=u.$to_f().valueOf();e=e.$to_f().valueOf(),r=r.$to_f().valueOf();var le=R();if(!isFinite(e))le!==0&&d(ae);else if(e===0)for(;;)d(ae);else for(var fe=0;fe<le;fe++){var de=fe*e+u;(e>=0?r<de:r>de)&&(de=r),d(de)}return u}for(f=u;h(D?S(f,r):L(f,r));)n.yield1(d,f),f=E(f,e)},-1),I(_,"$to_c",function(){var o=this;return x.$Complex(o,0)}),I(_,"$to_int",function(){var o=this;return o.$to_i()}),I(_,"$truncate",function(o){var v=this;return o==null&&(o=0),v.$to_f().$truncate(o)},-1),I(_,"$zero?",function(){var o=this;return o["$=="](0)}),I(_,"$positive?",function(){var o=this;return M(o,0)}),I(_,"$negative?",function(){var o=this;return p(o,0)}),I(_,"$dup",W),I(_,"$clone",function(o){var v=this;return o=j(o),y(o,"freeze"),v},-1),I(_,"$finite?",X(!0)),I(_,"$infinite?",X(m)),C(_,"arg","angle"),C(_,"conjugate","conj"),C(_,"imaginary","imag"),C(_,"magnitude","abs"),C(_,"modulo","%"),C(_,"phase","arg"),C(_,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(n){var A=n.truthy,h=n.falsy,x=n.yield1,I=n.hash_get,Q=n.hash_put,W=n.hash_delete,P=n.coerce_to,K=n.respond_to,p=n.deny_frozen_access,B=n.freeze,O=n.opal32_init,X=n.opal32_add,U=n.klass,re=n.slice,Z=n.defs,j=n.Kernel,y=n.def,z=n.Opal,N=n.eqeqeq,S=n.send2,L=n.find_super,E=n.send,M=n.rb_gt,C=n.rb_times,w=n.eqeq,m=n.rb_minus,i=n.to_a,l=n.to_ary,b=n.gvars,_=n.rb_ge,c=n.assign_ivar,o=n.rb_lt,v=n.return_self,T=n.neqeq,d=n.alias,a=n.top,$=[],r=n.nil,e=n.$$$;return n.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),a.$require("corelib/enumerable"),a.$require("corelib/numeric"),function(t,s,u){var f=U(t,s,"Array"),q=[f].concat(u),R=n.$r(q);f.$include(e("Enumerable")),n.prop(f.$$prototype,"$$is_array",!0);function H(ie){for(var F=ie[0],V=1,Y=ie.length;V<Y;V++)ie[V-1]=ie[V];return ie.pop(),F}function D(ie,F){return F.$$name===n.Array?ie:F.$allocate().$replace(ie.$to_a())}function G(ie,F,V){for(var Y,ee=null,$e=new Array(ie.length),se=0,oe=0;se<ie.length;se++){if(!ee)try{Y=x(V,ie[se])}catch(ce){ee=ce}(ee||F(Y))&&($e[oe]=ie[se],oe+=1)}if(oe!==se&&(ie.splice.apply(ie,[0,$e.length].concat($e)),ie.splice(oe,$e.length)),ee)throw ee}function te(ie){return ie.$$is_array||(ie=P(ie,e("Array"),"to_ary")),ie.$to_a()}function ae(ie,F){var V=F.length;if(V>6&&V<32767)ie.push.apply(ie,F);else for(var Y=0;Y<V;Y++)ie.push(F[Y])}Z(f,"$[]",function(F){var V,Y,ee=this;return V=re(arguments),Y=V,D(Y,ee)},-1),y(f,"$initialize",function ie(F,V){var Y=ie.$$p||r,ee=this;if(ie.$$p=null,F==null&&(F=r),V==null&&(V=r),p(ee),V!==r&&Y!==r&&j.$warn("warning: block supersedes default value argument"),F>e(e("Integer"),"MAX")&&j.$raise(e("ArgumentError"),"array size too big"),arguments.length>2&&j.$raise(e("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return ee.length>0&&ee.splice(0,ee.length),ee;if(arguments.length===1){if(F.$$is_array)return ee.$replace(F.$to_a()),ee;if(F["$respond_to?"]("to_ary"))return ee.$replace(F.$to_ary()),ee}F=P(F,e("Integer"),"to_int"),F<0&&j.$raise(e("ArgumentError"),"negative array size"),ee.splice(0,ee.length);var $e,se;if(Y===r)for($e=0;$e<F;$e++)ee.push(V);else for($e=0,se;$e<F;$e++)se=Y($e),ee[$e]=se;return ee},-1),Z(f,"$try_convert",function(F){return z["$coerce_to?"](F,e("Array"),"to_ary")}),y(f,"$&",function(F){var V=this;if(F=te(F),V.length===0||F.length===0)return[];var Y=[],ee=new Map,$e,se,oe;for($e=0,se=F.length;$e<se;$e++)Q(ee,F[$e],!0);for($e=0,se=V.length;$e<se;$e++)oe=V[$e],W(ee,oe)!==void 0&&Y.push(oe);return Y}),y(f,"$|",function(F){var V=this;F=te(F);var Y=new Map,ee,$e;for(ee=0,$e=V.length;ee<$e;ee++)Q(Y,V[ee],!0);for(ee=0,$e=F.length;ee<$e;ee++)Q(Y,F[ee],!0);return Y.$keys()}),y(f,"$*",function(F){var V=this;if(A(F["$respond_to?"]("to_str")))return V.$join(F.$to_str());F=P(F,e("Integer"),"to_int"),A(F<0)&&j.$raise(e("ArgumentError"),"negative argument");for(var Y=[],ee=V.$to_a(),$e=0;$e<F;$e++)Y=Y.concat(ee);return Y}),y(f,"$+",function(F){var V=this;return F=te(F),V.concat(F)}),y(f,"$-",function(F){var V=this;if(F=te(F),A(V.length===0))return[];if(A(F.length===0))return V.slice();var Y=[],ee=new Map,$e,se,oe;for($e=0,se=F.length;$e<se;$e++)Q(ee,F[$e],!0);for($e=0,se=V.length;$e<se;$e++)oe=V[$e],I(ee,oe)===void 0&&Y.push(oe);return Y}),y(f,"$<<",function(F){var V=this;return p(V),V.push(F),V}),y(f,"$<=>",function(F){var V=this;if(N(e("Array"),F))F=F.$to_a();else if(A(F["$respond_to?"]("to_ary")))F=F.$to_ary().$to_a();else return r;if(V===F)return 0;for(var Y=Math.min(V.length,F.length),ee=0;ee<Y;ee++){var $e=V[ee]["$<=>"](F[ee]);if($e!==0)return $e}return V.length["$<=>"](F.length)}),y(f,"$==",function(F){var V=this,Y={};function ee($e,se){var oe,ce,g,k;if($e===se)return!0;if(!se.$$is_array)return K(se,"$to_ary")?se["$=="]($e):!1;if($e.$$constructor!==Array&&($e=$e.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),$e.length!==se.length)return!1;for(Y[$e.$object_id()]=!0,oe=0,ce=$e.length;oe<ce;oe++)if(g=$e[oe],k=se[oe],g.$$is_array){if(k.$$is_array&&k.length!==g.length||!Y.hasOwnProperty(g.$object_id())&&!ee(g,k))return!1}else if(!g["$=="](k))return!1;return!0}return ee(V,F)});function le(ie,F){var V=ie.length,Y,ee,$e,se;return Y=F.excl,ee=F.begin===r?0:P(F.begin,n.Integer,"to_int"),$e=F.end===r?-1:P(F.end,n.Integer,"to_int"),ee<0&&(ee+=V,ee<0)||(F.excl_rev&&F.begin!==r&&(ee+=1),ee>V)?r:$e<0&&($e+=V,$e<0)?[]:((!Y||F.end===r)&&($e+=1),se=ie.slice(ee,$e),se)}function fe(ie,F){var V,Y=[],ee=0,$e;for(F.step<0?($e={begin:F.range.end,end:F.range.begin,excl:!1,excl_rev:F.range.excl},V=le(ie,$e).$reverse()):V=le(ie,F.range);ee<V.length;)Y.push(V[ee]),ee+=Math.abs(F.step);return Y}function de(ie,F,V){var Y=ie.length,ee;return F=P(F,n.Integer,"to_int"),F<0&&(F+=Y,F<0)?r:V===void 0?F>=Y||F<0?r:ie[F]:(V=P(V,n.Integer,"to_int"),V<0||F>Y||F<0?r:(ee=ie.slice(F,F+V),ee))}y(f,"$[]",function(F,V){var Y=this;return F.$$is_range?le(Y,F):F.$$is_arithmetic_seq?fe(Y,F):de(Y,F,V)},-2),y(f,"$[]=",function(F,V,Y){var ee=this,$e=r,se=r;p(ee),$e=r;var oe,ce=ee.length;if(F.$$is_range){V.$$is_array?$e=V.$to_a():V["$respond_to?"]("to_ary")?$e=V.$to_ary().$to_a():$e=[V];var g=F.excl,k=F.begin===r?0:P(F.begin,n.Integer,"to_int"),J=F.end===r?-1:P(F.end,n.Integer,"to_int");if(k<0&&(k+=ce,k<0&&j.$raise(e("RangeError"),""+F.$inspect()+" out of range")),J<0&&(J+=ce),(!g||F.end===r)&&(J+=1),k>ce)for(oe=ce;oe<k;oe++)ee[oe]=r;return J<0?ee.splice.apply(ee,[k,0].concat($e)):ee.splice.apply(ee,[k,J-k].concat($e)),V}else{Y===void 0?se=1:(se=V,V=Y,V.$$is_array?$e=V.$to_a():V["$respond_to?"]("to_ary")?$e=V.$to_ary().$to_a():$e=[V]);var ne;if(F=P(F,e("Integer"),"to_int"),se=P(se,e("Integer"),"to_int"),F<0&&(ne=F,F+=ce,F<0&&j.$raise(e("IndexError"),"index "+ne+" too small for array; minimum "+-ee.length)),se<0&&j.$raise(e("IndexError"),"negative length ("+se+")"),F>ce)for(oe=ce;oe<F;oe++)ee[oe]=r;return Y===void 0?ee[F]=V:ee.splice.apply(ee,[F,se].concat($e)),V}},-3),y(f,"$any?",function ie(F){var V=ie.$$p||r,Y=this;return ie.$$p=null,Y.length===0?!1:S(Y,L(Y,"any?",ie,!1,!0),"any?",[F],V)},-1),y(f,"$assoc",function(F){for(var V=this,Y=0,ee=V.length,$e;Y<ee;Y++)if($e=V[Y],$e.length&&$e[0]["$=="](F))return $e;return r}),y(f,"$at",function(F){var V=this;return F=P(F,e("Integer"),"to_int"),F<0&&(F+=V.length),F<0||F>=V.length?r:V[F]}),y(f,"$bsearch_index",function ie(){var F=ie.$$p||r,V=this;if(ie.$$p=null,F===r)return V.$enum_for("bsearch_index");for(var Y=0,ee=V.length,$e,se,oe,ce=!1,g=r;Y<ee;){if($e=Y+Math.floor((ee-Y)/2),se=V[$e],oe=x(F,se),oe===!0)g=$e,ce=!0;else if(oe===!1||oe===r)ce=!1;else if(oe.$$is_number){if(oe===0)return $e;ce=oe<0}else j.$raise(e("TypeError"),"wrong argument type "+oe.$class()+" (must be numeric, true, false or nil)");ce?ee=$e:Y=$e+1}return g}),y(f,"$bsearch",function ie(){var F=ie.$$p||r,V=this,Y=r;return ie.$$p=null,F===r?V.$enum_for("bsearch"):(Y=E(V,"bsearch_index",[],F.$to_proc()),Y!=null&&Y.$$is_number?V[Y]:Y)}),y(f,"$cycle",function ie(F){var V=ie.$$p||r,Y=this;if(ie.$$p=null,F==null&&(F=r),V===r)return E(Y,"enum_for",["cycle",F],function se(){var oe=se.$$s==null?this:se.$$s;return A(F["$nil?"]())?e(e("Float"),"INFINITY"):(F=z["$coerce_to!"](F,e("Integer"),"to_int"),A(M(F,0))?C(oe.$enumerator_size(),F):0)},{$$s:Y});if(A(Y["$empty?"]())||w(F,0))return r;var ee,$e;if(F===r)for(;;)for(ee=0,$e=Y.length;ee<$e;ee++)x(V,Y[ee]);else{if(F=z["$coerce_to!"](F,e("Integer"),"to_int"),F<=0)return Y;for(;F>0;){for(ee=0,$e=Y.length;ee<$e;ee++)x(V,Y[ee]);F--}}return Y},-1),y(f,"$clear",function(){var F=this;return p(F),F.splice(0,F.length),F}),y(f,"$count",function ie(F){var V=ie.$$p||r,Y=this;return ie.$$p=null,A(F!==void 0)||A(V)?S(Y,L(Y,"count",ie,!1,!0),"count",[F],V):Y.$size()},-1),y(f,"$initialize_copy",function(F){var V=this;return V.$replace(F)}),y(f,"$collect",function ie(){var F=ie.$$p||r,V=this;if(ie.$$p=null,F===r)return E(V,"enum_for",["collect"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:V});for(var Y=[],ee=0;ee<V.length;ee++){var $e=x(F,V[ee]);Y[ee]=$e}return Y}),y(f,"$collect!",function ie(){var F=ie.$$p||r,V=this;if(ie.$$p=null,F===r)return E(V,"enum_for",["collect!"],function $e(){var se=$e.$$s==null?this:$e.$$s;return se.$size()},{$$s:V});p(V);for(var Y=0;Y<V.length;Y++){var ee=x(F,V[Y]);V[Y]=ee}return V});function he(ie,F){return ie===F||F===0?1:F>0&&ie>F?he(ie-1,F-1)+he(ie-1,F):0}y(f,"$combination",function ie(F){var V=ie.$$p||r,Y=this,ee=r;if(ie.$$p=null,ee=z["$coerce_to!"](F,e("Integer"),"to_int"),V===r)return E(Y,"enum_for",["combination",ee],function ne(){var ue=ne.$$s==null?this:ne.$$s;return he(ue.length,ee)},{$$s:Y});var $e,se,oe,ce,g,k,J;if(ee===0)n.yield1(V,[]);else if(ee===1)for($e=0,se=Y.length;$e<se;$e++)n.yield1(V,[Y[$e]]);else if(ee===Y.length)n.yield1(V,Y.slice());else if(ee>=0&&ee<Y.length){for(oe=[],$e=0;$e<=ee+1;$e++)oe.push(0);for(ce=[],g=0,k=!1,oe[0]=-1;!k;){for(ce[g]=Y[oe[g+1]];g<ee-1;)g++,J=oe[g+1]=oe[g]+1,ce[g]=Y[J];n.yield1(V,ce.slice()),g++;do k=g===0,oe[g]++,g--;while(oe[g+1]+ee===Y.length+g+1)}}return Y}),y(f,"$repeated_combination",function ie(F){var V=ie.$$p||r,Y=this,ee=r;if(ie.$$p=null,ee=z["$coerce_to!"](F,e("Integer"),"to_int"),V===r)return E(Y,"enum_for",["repeated_combination",ee],function se(){var oe=se.$$s==null?this:se.$$s;return he(oe.length+ee-1,ee)},{$$s:Y});function $e(se,oe,ce,g){if(ce.length==se){var k=ce.slice();n.yield1(V,k);return}for(var J=oe;J<g.length;J++)ce.push(g[J]),$e(se,J,ce,g),ce.pop()}return ee>=0&&$e(ee,0,[],Y),Y}),y(f,"$compact",function(){for(var F=this,V=[],Y=0,ee=F.length,$e;Y<ee;Y++)($e=F[Y])!==r&&V.push($e);return V}),y(f,"$compact!",function(){var F=this;p(F);for(var V=F.length,Y=0,ee=F.length;Y<ee;Y++)F[Y]===r&&(F.splice(Y,1),ee--,Y--);return F.length===V?r:F}),y(f,"$concat",function(F){var V,Y,ee=this;return V=re(arguments),Y=V,p(ee),Y=E(Y,"map",[],function $e(se){var oe=$e.$$s==null?this:$e.$$s;return se==null&&(se=r),se=te(se),A(se["$equal?"](oe))&&(se=se.$dup()),se},{$$s:ee}),E(Y,"each",[],function $e(se){var oe=$e.$$s==null?this:$e.$$s;se==null&&(se=r);for(var ce=0,g=se.length;ce<g;ce++)oe.push(se[ce])},{$$s:ee}),ee},-1),y(f,"$delete",function ie(F){var V=ie.$$p||r,Y=this;ie.$$p=null;for(var ee=Y.length,$e=0,se=ee;$e<se;$e++)Y[$e]["$=="](F)&&(p(Y),Y.splice($e,1),se--,$e--);return Y.length===ee?V!==r?n.yieldX(V,[]):r:F}),y(f,"$delete_at",function(F){var V=this;if(p(V),F=P(F,e("Integer"),"to_int"),F<0&&(F+=V.length),F<0||F>=V.length)return r;var Y=V[F];return V.splice(F,1),Y}),y(f,"$delete_if",function ie(){var F=ie.$$p||r,V=this;return ie.$$p=null,F===r?E(V,"enum_for",["delete_if"],function Y(){var ee=Y.$$s==null?this:Y.$$s;return ee.$size()},{$$s:V}):(p(V),G(V,h,F),V)}),y(f,"$difference",function(F){var V,Y,ee=this;return V=re(arguments),Y=V,E(Y,"reduce",[ee.$to_a().$dup()],function(se,oe){return se==null&&(se=r),oe==null&&(oe=r),m(se,oe)})},-1),y(f,"$dig",function(F,V){var Y,ee,$e=this,se=r;return Y=re(arguments,1),ee=Y,se=$e["$[]"](F),se===r||ee.length===0?se:(A(se["$respond_to?"]("dig"))||j.$raise(e("TypeError"),""+se.$class()+" does not have #dig method"),E(se,"dig",i(ee)))},-2),y(f,"$drop",function(F){var V=this;return F=P(F,e("Integer"),"to_int"),F<0&&j.$raise(e("ArgumentError")),V.slice(F)}),y(f,"$dup",function ie(){var F=ie.$$p||r,V=this;return ie.$$p=null,V.$$class===n.Array&&V.$$class.$allocate.$$pristine&&V.$copy_instance_variables.$$pristine&&V.$initialize_dup.$$pristine?V.slice(0):S(V,L(V,"dup",ie,!1,!0),"dup",[],F)}),y(f,"$each",function ie(){var F=ie.$$p||r,V=this;if(ie.$$p=null,F===r)return E(V,"enum_for",["each"],function ee(){var $e=ee.$$s==null?this:ee.$$s;return $e.$size()},{$$s:V});for(var Y=0;Y<V.length;Y++)x(F,V[Y]);return V}),y(f,"$each_index",function ie(){var F=ie.$$p||r,V=this;if(ie.$$p=null,F===r)return E(V,"enum_for",["each_index"],function ee(){var $e=ee.$$s==null?this:ee.$$s;return $e.$size()},{$$s:V});for(var Y=0;Y<V.length;Y++)x(F,Y);return V}),y(f,"$empty?",function(){var F=this;return F.length===0}),y(f,"$eql?",function(F){var V=this,Y={};function ee($e,se){var oe,ce,g,k;if(!se.$$is_array||(se=se.$to_a(),$e.length!==se.length))return!1;for(Y[$e.$object_id()]=!0,oe=0,ce=$e.length;oe<ce;oe++)if(g=$e[oe],k=se[oe],g.$$is_array){if(k.$$is_array&&k.length!==g.length||!Y.hasOwnProperty(g.$object_id())&&!ee(g,k))return!1}else if(!g["$eql?"](k))return!1;return!0}return ee(V,F)}),y(f,"$fetch",function ie(F,V){var Y=ie.$$p||r,ee=this;ie.$$p=null;var $e=F;if(F=P(F,e("Integer"),"to_int"),F<0&&(F+=ee.length),F>=0&&F<ee.length)return ee[F];if(Y!==r&&V!=null&&ee.$warn("warning: block supersedes default value argument"),Y!==r)return Y($e);if(V!=null)return V;ee.length===0?j.$raise(e("IndexError"),"index "+$e+" outside of array bounds: 0...0"):j.$raise(e("IndexError"),"index "+$e+" outside of array bounds: -"+ee.length+"..."+ee.length)},-2),y(f,"$fill",function ie(F){var V=ie.$$p||r,Y,ee,$e,se,oe=this,ce=r,g=r,k=r,J=r,ne=r;ie.$$p=null,Y=re(arguments),ee=Y,p(oe);var ue,_e;if(A(V)?(A(ee.length>2)&&j.$raise(e("ArgumentError"),"wrong number of arguments ("+ee.$length()+" for 0..2)"),se=ee,$e=l(se),ce=$e[0]==null?r:$e[0],g=$e[1]==null?r:$e[1]):(A(ee.length==0)?j.$raise(e("ArgumentError"),"wrong number of arguments (0 for 1..3)"):A(ee.length>3)&&j.$raise(e("ArgumentError"),"wrong number of arguments ("+ee.$length()+" for 1..3)"),se=ee,$e=l(se),k=$e[0]==null?r:$e[0],ce=$e[1]==null?r:$e[1],g=$e[2]==null?r:$e[2]),N(e("Range"),ce)){if(A(g)&&j.$raise(e("TypeError"),"length invalid with range"),J=ce.begin===r?0:P(ce.begin,e("Integer"),"to_int"),A(J<0)&&(J+=this.length),A(J<0)&&j.$raise(e("RangeError"),""+ce.$inspect()+" out of range"),ne=ce.end===r?-1:P(ce.end,e("Integer"),"to_int"),A(ne<0)&&(ne+=this.length),A(ce["$exclude_end?"]())||(ne+=1),A(ne<=J))return oe}else if(A(ce))if(J=P(ce,e("Integer"),"to_int"),A(J<0)&&(J+=this.length),A(J<0)&&(J=0),A(g)){if(ne=P(g,e("Integer"),"to_int"),A(ne==0))return oe;ne+=J}else ne=this.length;else J=0,ne=this.length;if(A(J>this.length))for(ue=this.length;ue<ne;ue++)oe[ue]=r;if(A(ne>this.length)&&(this.length=ne),A(V))for(this.length;J<ne;J++)_e=V(J),oe[J]=_e;else for(this.length;J<ne;J++)oe[J]=k;return oe},-1),y(f,"$first",function(F){var V=this;return F==null?V.length===0?r:V[0]:(F=P(F,e("Integer"),"to_int"),F<0&&j.$raise(e("ArgumentError"),"negative array size"),V.slice(0,F))},-1),y(f,"$flatten",function(F){var V=this;function Y(ee,$e){var se=[],oe,ce,g,k;for(ee=ee.$to_a(),oe=0,ce=ee.length;oe<ce;oe++){if(g=ee[oe],!K(g,"$to_ary",!0)){se.push(g);continue}if(k=g.$to_ary(),k===r){se.push(g);continue}switch(k.$$is_array||j.$raise(e("TypeError")),k===V&&j.$raise(e("ArgumentError")),$e){case void 0:se=se.concat(Y(k));break;case 0:se.push(k);break;default:ae(se,Y(k,$e-1))}}return se}return F!==void 0&&(F=P(F,e("Integer"),"to_int")),Y(V,F)},-1),y(f,"$flatten!",function(F){var V=this;p(V);var Y=V.$flatten(F);if(V.length==Y.length){for(var ee=0,$e=V.length;ee<$e&&V[ee]===Y[ee];ee++);if(ee==$e)return r}return V.$replace(Y),V},-1),y(f,"$freeze",function(){var F=this;return A(F["$frozen?"]())?F:B(F)});var ve;y(f,"$hash",function(){var F=this,V=ve===void 0,Y=O(),ee=F.$object_id(),$e,se,oe;if(Y=X(Y,10),Y=X(Y,F.length),V)ve=Object.create(null);else if(ve[ee])return X(Y,16843009);try{for(oe in ve)if($e=ve[oe],F["$eql?"]($e))return X(Y,16843009);for(ve[ee]=F,se=0;se<F.length;se++)$e=F[se],Y=X(Y,$e.$hash());return Y}finally{V&&(ve=void 0)}}),y(f,"$include?",function(F){for(var V=this,Y=0,ee=V.length;Y<ee;Y++)if(V[Y]["$=="](F))return!0;return!1}),y(f,"$index",function ie(F){var V=ie.$$p||r,Y=this;ie.$$p=null;var ee,$e,se;if(F!=null&&V!==r&&Y.$warn("warning: given block not used"),F!=null){for(ee=0,$e=Y.length;ee<$e;ee++)if(Y[ee]["$=="](F))return ee}else if(V!==r){for(ee=0;ee<Y.length;ee++)if(se=V(Y[ee]),se!==!1&&se!==r)return ee}else return Y.$enum_for("index");return r},-1),y(f,"$insert",function(F,V){var Y,ee,$e=this;if(Y=re(arguments,1),ee=Y,p($e),F=P(F,e("Integer"),"to_int"),ee.length>0){if(F<0&&(F+=$e.length+1,F<0&&j.$raise(e("IndexError"),""+F+" is out of bounds")),F>$e.length)for(var se=$e.length;se<F;se++)$e.push(r);$e.splice.apply($e,[F,0].concat(ee))}return $e},-2);var me=[];y(f,"$inspect",function(){var F=this,V=[],Y=F.$__id__(),ee=!0;return function(){try{if(me.indexOf(Y)!==-1)return ee=!1,"[...]";me.push(Y);for(var $e=0,se=F.length;$e<se;$e++){var oe=F["$[]"]($e);V.push(R("Opal").$inspect(oe))}return"["+V.join(", ")+"]"}finally{ee&&me.pop()}}()}),y(f,"$intersection",function(F){var V,Y,ee=this,$e=r,se=r;return V=re(arguments),Y=V,Y.length===0?ee.$to_a().$dup():(Y=Y.map(te),ee.length===0?[]:(Y=E(Y,"sort_by",[],"length".$to_proc()),A(ee.length<Y[0].length)?E(Y,"reduce",[ee],"&".$to_proc()):($e=Y.pop(),se=E(Y,"reduce",[$e],"&".$to_proc()),ee["$&"](se))))},-1),y(f,"$intersect?",function(F){var V=this,Y,ee,$e=new Map,se,oe;for(V.length<F.length?(Y=V,ee=F):(Y=F,ee=V),se=0,oe=Y.length;se<oe;se++)Q($e,Y[se],!0);for(se=0,oe=ee.length;se<oe;se++)if(I($e,ee[se]))return!0;return!1}),y(f,"$join",function(F){var V=this;if(b[","]==null&&(b[","]=r),F==null&&(F=r),A(V.length===0))return"";A(F===r)&&(F=b[","]);var Y=[],ee,$e,se,oe;for(ee=0,$e=V.length;ee<$e;ee++){if(se=V[ee],K(se,"$to_str")&&(oe=se.$to_str(),oe!==r)){Y.push(oe.$to_s());continue}if(K(se,"$to_ary")&&(oe=se.$to_ary(),oe===V&&j.$raise(e("ArgumentError")),oe!==r)){Y.push(oe.$join(F));continue}if(K(se,"$to_s")&&(oe=se.$to_s(),oe!==r)){Y.push(oe);continue}j.$raise(e("NoMethodError").$new(""+R("Opal").$inspect(V.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return F===r?Y.join(""):Y.join(z["$coerce_to!"](F,e("String"),"to_str").$to_s())},-1),y(f,"$keep_if",function ie(){var F=ie.$$p||r,V=this;return ie.$$p=null,F===r?E(V,"enum_for",["keep_if"],function Y(){var ee=Y.$$s==null?this:Y.$$s;return ee.$size()},{$$s:V}):(p(V),G(V,A,F),V)}),y(f,"$last",function(F){var V=this;return F==null?V.length===0?r:V[V.length-1]:(F=P(F,e("Integer"),"to_int"),F<0&&j.$raise(e("ArgumentError"),"negative array size"),F>V.length&&(F=V.length),V.slice(V.length-F,V.length))},-1),y(f,"$length",function(){var F=this;return F.length}),y(f,"$max",function ie(F){var V=ie.$$p||r,Y=this;return ie.$$p=null,E(Y.$each(),"max",[F],V.$to_proc())},-1),y(f,"$min",function ie(){var F=ie.$$p||r,V=this;return ie.$$p=null,E(V.$each(),"min",[],F.$to_proc())});function be(ie,F){for(var V=F>=0?1:0;F;)V*=ie,ie--,F--;return V}return y(f,"$permutation",function ie(F){var V=ie.$$p||r,Y=this,ee=r,$e=r;if(ie.$$p=null,V===r)return E(Y,"enum_for",["permutation",F],function k(){var J=k.$$s==null?this:k.$$s;return be(J.length,F===void 0?J.length:F)},{$$s:Y});var se,oe,ce;if(F===void 0?F=Y.length:F=P(F,e("Integer"),"to_int"),!(F<0||Y.length<F))if(F===0)n.yield1(V,[]);else if(F===1)for(var g=0;g<Y.length;g++)n.yield1(V,[Y[g]]);else ee=R("Array").$new(F),$e=R("Array").$new(Y.length,!1),se=function(k,J,ne,ue,_e){Y=this;for(var ge=0;ge<Y.length;ge++)if(ue["$[]"](ge)["$!"]())if(J[ne]=ge,ne<k-1)ue[ge]=!0,se.call(Y,k,J,ne+1,ue,_e),ue[ge]=!1;else{ce=[];for(var pe=0;pe<J.length;pe++)ce.push(Y[J[pe]]);x(_e,ce)}},V!==r?(oe=Y.slice(),se.call(oe,F,ee,0,$e,V)):se.call(Y,F,ee,0,$e,V);return Y},-1),y(f,"$repeated_permutation",function ie(F){var V=ie.$$p||r,Y=this,ee=r;if(ie.$$p=null,ee=z["$coerce_to!"](F,e("Integer"),"to_int"),V===r)return E(Y,"enum_for",["repeated_permutation",ee],function se(){var oe=se.$$s==null?this:se.$$s;return A(_(ee,0))?oe.$size()["$**"](ee):0},{$$s:Y});function $e(se,oe,ce){if(oe.length==se){var g=oe.slice();n.yield1(V,g);return}for(var k=0;k<ce.length;k++)oe.push(ce[k]),$e(se,oe,ce),oe.pop()}return $e(ee,[],Y.slice()),Y}),y(f,"$pop",function(F){var V=this;return p(V),A(F===void 0)?A(V.length===0)?r:V.pop():(F=P(F,e("Integer"),"to_int"),A(F<0)&&j.$raise(e("ArgumentError"),"negative array size"),A(V.length===0)?[]:A(F===1)?[V.pop()]:A(F>V.length)?V.splice(0,V.length):V.splice(V.length-F,V.length))},-1),y(f,"$product",function ie(F){var V=ie.$$p||r,Y,ee,$e=this;ie.$$p=null,Y=re(arguments),ee=Y;var se=V!==r?null:[],oe=ee.length+1,ce=new Array(oe),g=new Array(oe),k=new Array(oe),J,ne,ue,_e,ge=1;for(k[0]=$e,J=1;J<oe;J++)k[J]=P(ee[J-1],e("Array"),"to_ary");for(J=0;J<oe;J++){if(_e=k[J].length,_e===0)return se||$e;ge*=_e,ge>2147483647&&j.$raise(e("RangeError"),"too big to product"),g[J]=_e,ce[J]=0}e:for(;;){for(ue=[],J=0;J<oe;J++)ue.push(k[J][ce[J]]);for(se?se.push(ue):n.yield1(V,ue),ne=oe-1,ce[ne]++;ce[ne]===g[ne];){if(ce[ne]=0,--ne<0)break e;ce[ne]++}}return se||$e},-1),y(f,"$push",function(F){var V,Y,ee=this;return V=re(arguments),Y=V,p(ee),ae(ee,Y),ee},-1),y(f,"$rassoc",function(F){for(var V=this,Y=0,ee=V.length,$e;Y<ee;Y++)if($e=V[Y],$e.length&&$e[1]!==void 0&&$e[1]["$=="](F))return $e;return r}),y(f,"$reject",function ie(){var F=ie.$$p||r,V=this;if(ie.$$p=null,F===r)return E(V,"enum_for",["reject"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:V});for(var Y=[],ee=0,$e;ee<V.length;ee++)$e=F(V[ee]),($e===!1||$e===r)&&Y.push(V[ee]);return Y}),y(f,"$reject!",function ie(){var F=ie.$$p||r,V=this,Y=r;return ie.$$p=null,F===r?E(V,"enum_for",["reject!"],function ee(){var $e=ee.$$s==null?this:ee.$$s;return $e.$size()},{$$s:V}):(p(V),Y=V.$length(),E(V,"delete_if",[],F.$to_proc()),w(V.$length(),Y)?r:V)}),y(f,"$replace",function(F){var V=this;return p(V),F=te(F),V.length>0&&V.splice(0,V.length),ae(V,F),V}),y(f,"$reverse",function(){var F=this;return F.slice(0).reverse()}),y(f,"$reverse!",function(){var F=this;return p(F),F.reverse()}),y(f,"$reverse_each",function ie(){var F=ie.$$p||r,V=this;if(ie.$$p=null,F===r)return E(V,"enum_for",["reverse_each"],function ee(){var $e=ee.$$s==null?this:ee.$$s;return $e.$size()},{$$s:V});for(var Y=V.length-1;Y>=0;Y--)x(F,V[Y]);return V}),y(f,"$rindex",function ie(F){var V=ie.$$p||r,Y=this;ie.$$p=null;var ee,$e;if(F!=null&&V!==r&&Y.$warn("warning: given block not used"),F!=null){for(ee=Y.length-1;ee>=0&&!(ee>=Y.length);ee--)if(Y[ee]["$=="](F))return ee}else if(V!==r){for(ee=Y.length-1;ee>=0&&!(ee>=Y.length);ee--)if($e=V(Y[ee]),$e!==!1&&$e!==r)return ee}else if(F==null)return Y.$enum_for("rindex");return r},-1),y(f,"$rotate",function(F){var V=this;F==null&&(F=1);var Y,ee,$e,se;return F=P(F,e("Integer"),"to_int"),V.length===1?V.slice():V.length===0?[]:(Y=V.slice(),ee=F%Y.length,$e=Y.slice(ee),se=Y.slice(0,ee),$e.concat(se))},-1),y(f,"$rotate!",function(F){var V=this,Y=r;return F==null&&(F=1),p(V),V.length===0||V.length===1?V:(F=P(F,e("Integer"),"to_int"),Y=V.$rotate(F),V.$replace(Y))},-1),function(ie,F){var V=U(ie,F,"SampleRandom"),Y=V.$$prototype;return Y.rng=r,y(V,"$initialize",c("rng")),y(V,"$rand",function($e){var se=this,oe=r;return oe=P(se.rng.$rand($e),e("Integer"),"to_int"),A(oe<0)&&j.$raise(e("RangeError"),"random value must be >= 0"),A(oe<$e)||j.$raise(e("RangeError"),"random value must be less than Array size"),oe})}(f,null),y(f,"$sample",function(F,V){var Y=this,ee=r,$e=r;if(A(F===void 0))return Y.$at(j.$rand(Y.length));if(A(V===void 0)?A(ee=z["$coerce_to?"](F,e("Hash"),"to_hash"))?(V=ee,F=r):(V=r,F=P(F,e("Integer"),"to_int")):(F=P(F,e("Integer"),"to_int"),V=P(V,e("Hash"),"to_hash")),A(F)&&A(F<0)&&j.$raise(e("ArgumentError"),"count must be greater than 0"),A(V)&&($e=V["$[]"]("random")),$e=A($e)&&A($e["$respond_to?"]("rand"))?R("SampleRandom").$new($e):j,!A(F))return Y[$e.$rand(Y.length)];var se,oe,ce,g,k,J,ne,ue;switch(F>Y.length&&(F=Y.length),F){case 0:return[];case 1:return[Y[$e.$rand(Y.length)]];case 2:return g=$e.$rand(Y.length),k=$e.$rand(Y.length-1),g<=k&&k++,[Y[g],Y[k]];default:if(Y.length/F>3){for(se=!1,oe=0,ce=R("Array").$new(F),g=1,ce[0]=$e.$rand(Y.length);g<F;){for(J=$e.$rand(Y.length),k=0;k<g;){for(;J===ce[k];){if(oe++,oe>100){se=!0;break}J=$e.$rand(Y.length)}if(se)break;k++}if(se)break;ce[g]=J,g++}if(!se){for(g=0;g<F;)ce[g]=Y[ce[g]],g++;return ce}}ce=Y.slice();for(var _e=0;_e<F;_e++)ne=$e.$rand(Y.length-_e)+_e,ue=ce[_e],ce[_e]=ce[ne],ce[ne]=ue;return F===Y.length?ce:ce["$[]"](0,F)}},-1),y(f,"$select",function ie(){var F=ie.$$p||r,V=this;if(ie.$$p=null,F===r)return E(V,"enum_for",["select"],function oe(){var ce=oe.$$s==null?this:oe.$$s;return ce.$size()},{$$s:V});for(var Y=[],ee=0,$e,se;ee<V.length;ee++)$e=V[ee],se=x(F,$e),A(se)&&Y.push($e);return Y}),y(f,"$select!",function ie(){var F=ie.$$p||r,V=this;if(ie.$$p=null,F===r)return E(V,"enum_for",["select!"],function ee(){var $e=ee.$$s==null?this:ee.$$s;return $e.$size()},{$$s:V});p(V);var Y=V.length;return E(V,"keep_if",[],F.$to_proc()),V.length===Y?r:V}),y(f,"$shift",function(F){var V=this;return p(V),A(F===void 0)?A(V.length===0)?r:H(V):(F=P(F,e("Integer"),"to_int"),A(F<0)&&j.$raise(e("ArgumentError"),"negative array size"),A(V.length===0)?[]:V.splice(0,F))},-1),y(f,"$shuffle",function(F){var V=this;return V.$dup().$to_a()["$shuffle!"](F)},-1),y(f,"$shuffle!",function(F){var V=this;p(V);var Y,ee=V.length,$e,se;for(F!==void 0&&(F=z["$coerce_to?"](F,e("Hash"),"to_hash"),F!==r&&(F=F["$[]"]("random"),F!==r&&F["$respond_to?"]("rand")&&(Y=F)));ee;)Y?($e=Y.$rand(ee).$to_int(),$e<0&&j.$raise(e("RangeError"),"random number too small "+$e),$e>=ee&&j.$raise(e("RangeError"),"random number too big "+$e)):$e=V.$rand(ee),se=V[--ee],V[ee]=V[$e],V[$e]=se;return V},-1),y(f,"$slice!",function(F,V){var Y=this,ee=r,$e=r,se=r,oe=r,ce=r;if(p(Y),ee=r,A(V===void 0))if(N(e("Range"),F)){$e=F,ee=Y["$[]"]($e),se=$e.begin===r?0:P($e.begin,e("Integer"),"to_int"),oe=$e.end===r?-1:P($e.end,e("Integer"),"to_int"),se<0&&(se+=Y.length),oe<0?oe+=Y.length:oe>=Y.length&&(oe=Y.length-1,$e.excl&&(oe+=1));var g=oe-se;$e.excl&&$e.end!==r?oe-=1:g+=1,se<Y.length&&se>=0&&oe<Y.length&&oe>=0&&g>0&&Y.splice(se,g)}else{if(ce=P(F,e("Integer"),"to_int"),ce<0&&(ce+=Y.length),ce<0||ce>=Y.length)return r;ee=Y[ce],ce===0?Y.shift():Y.splice(ce,1)}else{if(ce=P(F,e("Integer"),"to_int"),V=P(V,e("Integer"),"to_int"),V<0)return r;ee=Y["$[]"](ce,V),ce<0&&(ce+=Y.length),ce+V>Y.length&&(V=Y.length-ce),ce<Y.length&&ce>=0&&Y.splice(ce,V)}return ee},-2),y(f,"$sort",function ie(){var F=ie.$$p||r,V=this;return ie.$$p=null,A(V.length>1)?(F===r&&(F=function(Y,ee){return Y["$<=>"](ee)}),V.slice().sort(function(Y,ee){var $e=F(Y,ee);return $e===r&&j.$raise(e("ArgumentError"),"comparison of "+Y.$inspect()+" with "+ee.$inspect()+" failed"),M($e,0)?1:o($e,0)?-1:0})):V}),y(f,"$sort!",function ie(){var F=ie.$$p||r,V=this;ie.$$p=null,p(V);var Y;F!==r?Y=E(V.slice(),"sort",[],F.$to_proc()):Y=V.slice().$sort(),V.length=0;for(var ee=0,$e=Y.length;ee<$e;ee++)V.push(Y[ee]);return V}),y(f,"$sort_by!",function ie(){var F=ie.$$p||r,V=this;return ie.$$p=null,F===r?E(V,"enum_for",["sort_by!"],function Y(){var ee=Y.$$s==null?this:Y.$$s;return ee.$size()},{$$s:V}):(p(V),V.$replace(E(V,"sort_by",[],F.$to_proc())))}),y(f,"$take",function(F){var V=this;return F<0&&j.$raise(e("ArgumentError")),V.slice(0,F)}),y(f,"$take_while",function ie(){var F=ie.$$p||r,V=this;ie.$$p=null;for(var Y=[],ee=0,$e,se;ee<V.length;ee++){if($e=V[ee],se=F($e),se===!1||se===r)return Y;Y.push($e)}return Y}),y(f,"$to_a",function(){var F=this;return F.$$class===n.Array?F:n.Array.$new(F)}),y(f,"$to_ary",v),y(f,"$to_h",function ie(){var F=ie.$$p||r,V=this,Y=r;ie.$$p=null,Y=V,F!==r&&(Y=E(Y,"map",[],F.$to_proc()));var ee,$e=Y.length,se,oe,ce,g=new Map;for(ee=0;ee<$e;ee++)se=z["$coerce_to?"](Y[ee],e("Array"),"to_ary"),se.$$is_array||j.$raise(e("TypeError"),"wrong element type "+Y[ee].$class()+" at "+ee+" (expected array)"),se.length!==2&&j.$raise(e("ArgumentError"),"element has wrong array length at "+ee+" (expected 2, was "+se.$length()+")"),oe=se[0],ce=se[1],Q(g,oe,ce);return g}),y(f,"$transpose",function(){var F=this,V=r,Y=r;return A(F["$empty?"]())?[]:(V=[],Y=r,E(F,"each",[],function($e){var se=r;return $e==null&&($e=r),$e=te($e),Y=A(se=Y)?se:$e.length,T($e.length,Y)&&j.$raise(e("IndexError"),"element size differs ("+$e.length+" should be "+Y+")"),E($e.length,"times",[],function(ce){var g,k=r;return ce==null&&(ce=r),k=A(se=V["$[]"](ce))?se:(g=[ce,[]],E(V,"[]=",g),g[g.length-1]),k["$<<"]($e.$at(ce))})}),V)}),y(f,"$union",function(F){var V,Y,ee=this;return V=re(arguments),Y=V,E(Y,"reduce",[ee.$uniq()],function(se,oe){return se==null&&(se=r),oe==null&&(oe=r),se["$|"](oe)})},-1),y(f,"$uniq",function ie(){var F=ie.$$p||r,V=this;ie.$$p=null;var Y=new Map,ee,$e,se,oe;if(F===r)for(ee=0,$e=V.length;ee<$e;ee++)se=V[ee],I(Y,se)===void 0&&Q(Y,se,se);else for(ee=0;ee<V.length;ee++)se=V[ee],oe=x(F,se),I(Y,oe)===void 0&&Q(Y,oe,se);return Y.$values()}),y(f,"$uniq!",function ie(){var F=ie.$$p||r,V=this;ie.$$p=null,p(V);var Y=new Map,ee,$e,se,oe=[];for(ee=0;ee<V.length;ee++)$e=V[ee],se=F===r?$e:x(F,$e),I(Y,se)===void 0?Q(Y,se,$e):oe.push(ee);for(ee=oe.length-1;ee>=0;ee--)V.splice(oe[ee],1);return oe.length===0?r:V}),y(f,"$unshift",function(F){var V,Y,ee=this;V=re(arguments),Y=V,p(ee);var $e=ee.length,se=Y.length;if(se==0)return ee;for(var oe=$e-se,ce=0;ce<se;ce++)ee.push(ee[oe+ce]);for(var g=$e-1;g-se>=0;)ee[g]=ee[g-se],g--;for(var k=0;k<se;k++)ee[k]=Y[k];return ee},-1),y(f,"$values_at",function(F){var V,Y,ee=this,$e=r;return V=re(arguments),Y=V,$e=[],E(Y,"each",[],function se(oe){var ce=se.$$s==null?this:se.$$s,g=r,k=r,J=r;return oe==null&&(oe=r),A(oe["$is_a?"](e("Range")))?(g=oe.$end()===r?-1:P(oe.$end(),e("Integer"),"to_int"),k=oe.$begin()===r?0:P(oe.$begin(),e("Integer"),"to_int"),k<0?(k=k+ce.length,r):(g<0&&(g=g+ce.length),oe["$exclude_end?"]()&&oe.$end()!==r&&g--,g<k?r:E(k,"upto",[g],function ne(ue){var _e=ne.$$s==null?this:ne.$$s;return ue==null&&(ue=r),$e["$<<"](_e.$at(ue))},{$$s:ce}))):(J=P(oe,e("Integer"),"to_int"),$e["$<<"](ce.$at(J)))},{$$s:ee}),$e},-1),y(f,"$zip",function ie(F){var V=ie.$$p||r,Y,ee,$e=this,se=r;ie.$$p=null,Y=re(arguments),ee=Y;var oe=[],ce=$e.length,g,k,J,ne,ue;for(ne=0,ue=ee.length;ne<ue;ne++)if(k=ee[ne],!k.$$is_array){if(k.$$is_range||k.$$is_enumerator){ee[ne]=k.$take(ce);continue}ee[ne]=(A(se=z["$coerce_to?"](k,e("Array"),"to_ary"))?se:z["$coerce_to!"](k,e("Enumerator"),"to_enum","each")).$to_a()}for(J=0;J<ce;J++){for(g=[$e[J]],ne=0,ue=ee.length;ne<ue;ne++)k=ee[ne][J],k==null&&(k=r),g[ne+1]=k;oe[J]=g}if(V!==r){for(J=0;J<ce;J++)n.yield1(V,oe[J]);return r}return oe},-1),Z(f,"$inherited",function(F){F.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),y(f,"$instance_variables",function ie(){var F=ie.$$p||r,V=this;return ie.$$p=null,E(S(V,L(V,"instance_variables",ie,!1,!0),"instance_variables",[],F),"reject",[],function(ee){var $e=r;return ee==null&&(ee=r),A($e=/^@\d+$/.test(ee))?$e:ee["$=="]("@length")})}),y(f,"$pack",function(F){return re(arguments),j.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),d(f,"append","push"),d(f,"filter","select"),d(f,"filter!","select!"),d(f,"map","collect"),d(f,"map!","collect!"),d(f,"prepend","unshift"),d(f,"size","length"),d(f,"slice","[]"),d(f,"to_s","inspect"),z.$pristine(f.$singleton_class(),"allocate"),z.$pristine(f,"copy_instance_variables","initialize_dup")}("::",Array,$)};Opal.modules["corelib/hash"]=function(n){var A=n.yield1,h=n.hash_clone,x=n.hash_delete,I=n.hash_each,Q=n.hash_get,W=n.hash_put,P=n.deny_frozen_access,K=n.freeze,p=n.opal32_init,B=n.opal32_add,O=n.klass,X=n.slice,U=n.Opal,re=n.Kernel,Z=n.defs,j=n.def,y=n.send,z=n.rb_ge,N=n.rb_gt,S=n.truthy,L=n.to_a,E=n.return_self,M=n.not,C=n.alias,w=n.top,m=[],i=n.nil,l=n.$$$;return n.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),w.$require("corelib/enumerable"),function(b,_,c){var o=O(b,_,"Hash"),v=[o].concat(c),T=n.$r(v);o.$include(l("Enumerable")),o.$$prototype.$$is_hash=!0,Z(o,"$[]",function(r){var e,t,s=this;e=X(arguments),t=e;var u,f=t.length,q,R;if(f===1){if(u=U["$coerce_to?"](t["$[]"](0),l("Hash"),"to_hash"),u!==i)return s.$allocate()["$merge!"](u);for(t=U["$coerce_to?"](t["$[]"](0),l("Array"),"to_ary"),t===i&&re.$raise(l("ArgumentError"),"odd number of arguments for Hash"),f=t.length,u=s.$allocate(),R=0;R<f;R++)q=t[R],q.$$is_array||re.$raise(l("ArgumentError"),"invalid element "+q.$inspect()+" for Hash"),q.length===1?u.$store(q[0],i):q.length===2?u.$store(q[0],q[1]):re.$raise(l("ArgumentError"),"invalid number of elements ("+q.length+" for "+q.$inspect()+"), must be 1..2");return u}for(f%2!==0&&re.$raise(l("ArgumentError"),"odd number of arguments for Hash"),u=s.$allocate(),R=0;R<f;R+=2)u.$store(t[R],t[R+1]);return u},-1),Z(o,"$allocate",function(){var r=this,e=new r.$$constructor;return e.$$none=i,e.$$proc=i,e}),Z(o,"$try_convert",function(r){return U["$coerce_to?"](r,l("Hash"),"to_hash")}),j(o,"$initialize",function $(r){var e=$.$$p||i,t=this;return $.$$p=null,P(t),r!==void 0&&e!==i&&re.$raise(l("ArgumentError"),"wrong number of arguments (1 for 0)"),t.$$none=r===void 0?i:r,t.$$proc=e,t},-1),j(o,"$==",function(r){var e=this;return e===r?!0:!r.$$is_hash||e.size!==r.size?!1:I(e,!0,function(t,s){var u=Q(r,t);return u===void 0||!s["$eql?"](u)?[!0,!1]:[!1,!0]})}),j(o,"$>=",function(r){var e=this,t=i;return r=U["$coerce_to!"](r,l("Hash"),"to_hash"),e.size<r.size?!1:(t=!0,y(r,"each",[],function s(u,f){var q=s.$$s==null?this:s.$$s,R=i;if(u==null&&(u=i),f==null&&(f=i),R=q.$fetch(u,null),R==null||R!==f){t=!1;return}},{$$s:e}),t)}),j(o,"$>",function(r){var e=this;return r=U["$coerce_to!"](r,l("Hash"),"to_hash"),e.size<=r.size?!1:z(e,r)}),j(o,"$<",function(r){var e=this;return r=U["$coerce_to!"](r,l("Hash"),"to_hash"),N(r,e)}),j(o,"$<=",function(r){var e=this;return r=U["$coerce_to!"](r,l("Hash"),"to_hash"),z(r,e)}),j(o,"$[]",function(r){var e=this,t=Q(e,r);return t!==void 0?t:e.$default(r)}),j(o,"$[]=",function(r,e){var t=this;return P(t),W(t,r,e),e}),j(o,"$assoc",function(r){var e=this;return I(e,i,function(t,s){return t["$=="](r)?[!0,[t,s]]:[!1,i]})}),j(o,"$clear",function(){var r=this;return P(r),r.clear(),r.$$keys&&r.$$keys.clear(),r}),j(o,"$clone",function(){var r=this,e=r.$class().$new();return h(r,e),r["$frozen?"]()?e.$freeze():e}),j(o,"$compact",function(){var r=this,e=new Map;return I(r,e,function(t,s){return s!==i&&W(e,t,s),[!1,e]})}),j(o,"$compact!",function(){var r=this;P(r);var e=i;return I(r,e,function(t,s){return s===i&&(x(r,t),e=r),[!1,e]})}),j(o,"$compare_by_identity",function(){var r=this;return P(r),r.$$by_identity||(r.$$by_identity=!0,r.size!==0&&n.hash_rehash(r)),r}),j(o,"$compare_by_identity?",function(){var r=this;return r.$$by_identity===!0}),j(o,"$default",function(r){var e=this;return r!==void 0&&e.$$proc!==i&&e.$$proc!==void 0?e.$$proc.$call(e,r):e.$$none===void 0?i:e.$$none},-1),j(o,"$default=",function(r){var e=this;return P(e),e.$$proc=i,e.$$none=r,r}),j(o,"$default_proc",function(){var r=this;return r.$$proc!==void 0?r.$$proc:i}),j(o,"$default_proc=",function(r){var e=this;P(e);var t=r;return t!==i&&(t=U["$coerce_to!"](t,l("Proc"),"to_proc"),t["$lambda?"]()&&t.$arity().$abs()!==2&&re.$raise(l("TypeError"),"default_proc takes two arguments")),e.$$none=i,e.$$proc=t,r}),j(o,"$delete",function $(r){var e=$.$$p||i,t=this;$.$$p=null,P(t);var s=x(t,r);return s!==void 0?s:e!==i?n.yield1(e,r):i}),j(o,"$delete_if",function $(){var r=$.$$p||i,e=this;return $.$$p=null,S(r)?(P(e),I(e,e,function(t,s){var u=r(t,s);return u!==!1&&u!==i&&x(e,t),[!1,e]})):y(e,"enum_for",["delete_if"],function t(){var s=t.$$s==null?this:t.$$s;return s.$size()},{$$s:e})}),j(o,"$dig",function(r,e){var t,s,u=this,f=i;return t=X(arguments,1),s=t,f=u["$[]"](r),f===i||s.length===0?f:(S(f["$respond_to?"]("dig"))||re.$raise(l("TypeError"),""+f.$class()+" does not have #dig method"),y(f,"dig",L(s)))},-2),j(o,"$dup",function(){var r=this;return h(r,r.$class().$new())}),j(o,"$each",function $(){var r=$.$$p||i,e=this;return $.$$p=null,S(r)?I(e,e,function(t,s){return A(r,[t,s]),[!1,e]}):y(e,"enum_for",["each"],function t(){var s=t.$$s==null?this:t.$$s;return s.$size()},{$$s:e})}),j(o,"$each_key",function $(){var r=$.$$p||i,e=this;return $.$$p=null,S(r)?I(e,e,function(t,s){return r(t),[!1,e]}):y(e,"enum_for",["each_key"],function t(){var s=t.$$s==null?this:t.$$s;return s.$size()},{$$s:e})}),j(o,"$each_value",function $(){var r=$.$$p||i,e=this;return $.$$p=null,S(r)?I(e,e,function(t,s){return r(s),[!1,e]}):y(e,"enum_for",["each_value"],function t(){var s=t.$$s==null?this:t.$$s;return s.$size()},{$$s:e})}),j(o,"$empty?",function(){var r=this;return r.size===0}),j(o,"$except",function(r){var e,t,s=this;return e=X(arguments),t=e,y(s.$dup(),"except!",L(t))},-1),j(o,"$except!",function(r){var e,t,s=this;return e=X(arguments),t=e,y(t,"each",[],function u(f){var q=u.$$s==null?this:u.$$s;return f==null&&(f=i),q.$delete(f)},{$$s:s}),s},-1),j(o,"$fetch",function $(r,e){var t=$.$$p||i,s=this;$.$$p=null;var u=Q(s,r);return u!==void 0?u:t!==i?t(r):e!==void 0?e:re.$raise(l("KeyError").$new("key not found: "+r.$inspect(),new Map([["key",r],["receiver",s]])))},-2),j(o,"$fetch_values",function $(r){var e=$.$$p||i,t,s,u=this;return $.$$p=null,t=X(arguments),s=t,y(s,"map",[],function f(q){var R=f.$$s==null?this:f.$$s;return q==null&&(q=i),y(R,"fetch",[q],e.$to_proc())},{$$s:u})},-1),j(o,"$flatten",function(r){var e=this;r==null&&(r=1),r=U["$coerce_to!"](r,l("Integer"),"to_int");var t=[];return I(e,t,function(s,u){return t.push(s),u.$$is_array?r===1?(t.push(u),[!1,t]):(t=t.concat(u.$flatten(r-2)),[!1,t]):(t.push(u),[!1,t])})},-1),j(o,"$freeze",function(){var r=this;return S(r["$frozen?"]())?r:K(r)}),j(o,"$has_key?",function(r){var e=this;return Q(e,r)!==void 0}),j(o,"$has_value?",function(r){var e=this;return I(e,!1,function(t,s){return s["$=="](r)?[!0,!0]:[!1,!1]})});var d;j(o,"$hash",function(){var r=this,e=d===void 0,t=r.$object_id(),s=p(),u,f,q,R=r.size,H=new Int32Array(R);if(s=B(s,4),s=B(s,R),e)d=Object.create(null);else if(d[t])return B(s,16843009);try{for(u in d)if(f=d[u],r["$eql?"](f))return B(s,16843009);for(d[t]=r,q=0,I(r,!1,function(D,G){return H[q]=[1883326802,D,G].$hash(),q++,[!1,!1]}),H=H.sort(),q=0;q<H.length;q++)s=B(s,H[q]);return s}finally{e&&(d=void 0)}}),j(o,"$index",function(r){var e=this;return I(e,i,function(t,s){return s["$=="](r)?[!0,t]:[!1,i]})}),j(o,"$indexes",function(r){var e,t,s=this;e=X(arguments),t=e;for(var u=[],f=0,q=t.length,R,H;f<q;f++){if(R=t[f],H=Q(s,R),H===void 0){u.push(s.$default());continue}u.push(H)}return u},-1);var a;return j(o,"$inspect",function(){var r=this,e=a===void 0,t=r.$object_id(),s=[];return function(){try{if(e&&(a={}),a.hasOwnProperty(t))return"{...}";return a[t]=!0,I(r,!1,function(u,f){return f=T("Opal").$inspect(f),u=T("Opal").$inspect(u),s.push(u+"=>"+f),[!1,!1]}),"{"+s.join(", ")+"}";return i}finally{e&&(a=void 0)}}()}),j(o,"$invert",function(){var r=this,e=new Map;return I(r,e,function(t,s){return W(e,s,t),[!1,e]})}),j(o,"$keep_if",function $(){var r=$.$$p||i,e=this;return $.$$p=null,S(r)?(P(e),I(e,e,function(t,s){var u=r(t,s);return(u===!1||u===i)&&x(e,t),[!1,e]})):y(e,"enum_for",["keep_if"],function t(){var s=t.$$s==null?this:t.$$s;return s.$size()},{$$s:e})}),j(o,"$keys",function(){var r=this;return Array.from(r.keys())}),j(o,"$length",function(){var r=this;return r.size}),j(o,"$merge",function $(r){var e=$.$$p||i,t,s,u=this;return $.$$p=null,t=X(arguments),s=t,y(u.$dup(),"merge!",L(s),e.$to_proc())},-1),j(o,"$merge!",function $(r){var e=$.$$p||i,t,s,u=this;$.$$p=null,t=X(arguments),s=t,P(u);var f,q;for(f=0;f<s.length;++f)q=U["$coerce_to!"](s[f],l("Hash"),"to_hash"),e===i?I(q,!1,function(R,H){return W(u,R,H),[!1,!1]}):I(q,!1,function(R,H){var D=Q(u,R);return D===void 0?(W(u,R,H),[!1,!1]):(W(u,R,e(R,D,H)),[!1,!1])});return u},-1),j(o,"$rassoc",function(r){var e=this;return I(e,i,function(t,s){return s["$=="](r)?[!0,[t,s]]:[!1,i]})}),j(o,"$rehash",function(){var r=this;return P(r),n.hash_rehash(r)}),j(o,"$reject",function $(){var r=$.$$p||i,e=this;if($.$$p=null,!S(r))return y(e,"enum_for",["reject"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:e});var t=new Map;return I(e,t,function(s,u){var f=r(s,u);return(f===!1||f===i)&&W(t,s,u),[!1,t]})}),j(o,"$reject!",function $(){var r=$.$$p||i,e=this;if($.$$p=null,!S(r))return y(e,"enum_for",["reject!"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:e});P(e);var t=i;return I(e,t,function(s,u){var f=r(s,u);return f!==!1&&f!==i&&(x(e,s),t=e),[!1,t]})}),j(o,"$replace",function(r){var e=this;return P(e),r=U["$coerce_to!"](r,l("Hash"),"to_hash"),e.$clear(),I(r,!1,function(t,s){return W(e,t,s),[!1,!1]}),S(r.$default_proc())?e["$default_proc="](r.$default_proc()):e["$default="](r.$default()),e}),j(o,"$select",function $(){var r=$.$$p||i,e=this;if($.$$p=null,!S(r))return y(e,"enum_for",["select"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:e});var t=new Map;return I(e,t,function(s,u){var f=r(s,u);return f!==!1&&f!==i&&W(t,s,u),[!1,t]})}),j(o,"$select!",function $(){var r=$.$$p||i,e=this;if($.$$p=null,!S(r))return y(e,"enum_for",["select!"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:e});P(e);var t=i;return I(e,t,function(s,u){var f=r(s,u);return(f===!1||f===i)&&(x(e,s),t=e),[!1,t]})}),j(o,"$shift",function(){var r=this;return P(r),I(r,i,function(e,t){return[!0,[e,x(r,e)]]})}),j(o,"$slice",function(r){var e,t,s=this;e=X(arguments),t=e;for(var u=new Map,f=0,q=t.length;f<q;f++){var R=t[f],H=Q(s,R);H!==void 0&&W(u,R,H)}return u},-1),j(o,"$to_a",function(){var r=this,e=[];return I(r,e,function(t,s){return e.push([t,s]),[!1,e]})}),j(o,"$to_h",function $(){var r=$.$$p||i,e=this;if($.$$p=null,r!==i)return y(e,"map",[],r.$to_proc()).$to_h();if(e.$$class===n.Hash)return e;var t=new Map;return h(e,t),t}),j(o,"$to_hash",E),j(o,"$to_proc",function(){var r=this;return y(r,"proc",[],function e(t){var s=e.$$s==null?this:e.$$s;return t==null&&re.$raise(l("ArgumentError"),"no key given"),s["$[]"](t)},{$$arity:-1,$$s:r})}),j(o,"$transform_keys",function $(r){var e=$.$$p||i,t=this;if($.$$p=null,r==null&&(r=i),M(e)&&M(r))return y(t,"enum_for",["transform_keys"],function u(){var f=u.$$s==null?this:u.$$s;return f.$size()},{$$s:t});var s=new Map;return I(t,s,function(u,f){var q;return r!==i&&(q=Q(r,u)),q===void 0&&e&&e!==i&&(q=e(u)),q===void 0&&(q=u),W(s,q,f),[!1,s]})},-1),j(o,"$transform_keys!",function $(r){var e=$.$$p||i,t=this;if($.$$p=null,r==null&&(r=i),M(e)&&M(r))return y(t,"enum_for",["transform_keys!"],function u(){var f=u.$$s==null?this:u.$$s;return f.$size()},{$$s:t});P(t);var s=new Map;return I(t,t,function(u,f){var q;return r!==i&&(q=Q(r,u)),q===void 0&&e&&e!==i&&(q=e(u)),q===void 0?[!1,t]:(Q(s,u)||x(t,u),W(t,q,f),W(s,q,!0),[!1,t])})},-1),j(o,"$transform_values",function $(){var r=$.$$p||i,e=this;if($.$$p=null,!S(r))return y(e,"enum_for",["transform_values"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:e});var t=new Map;return I(e,t,function(s,u){return W(t,s,r(u)),[!1,t]})}),j(o,"$transform_values!",function $(){var r=$.$$p||i,e=this;return $.$$p=null,S(r)?(P(e),I(e,e,function(t,s){return W(e,t,r(s)),[!1,e]})):y(e,"enum_for",["transform_values!"],function t(){var s=t.$$s==null?this:t.$$s;return s.$size()},{$$s:e})}),j(o,"$values",function(){var r=this;return Array.from(r.values())}),C(o,"each_pair","each"),C(o,"eql?","=="),C(o,"filter","select"),C(o,"filter!","select!"),C(o,"include?","has_key?"),C(o,"indices","indexes"),C(o,"key","index"),C(o,"key?","has_key?"),C(o,"member?","has_key?"),C(o,"size","length"),C(o,"store","[]="),C(o,"to_s","inspect"),C(o,"update","merge!"),C(o,"value?","has_value?"),C(o,"values_at","indexes")}("::",Map,m)};Opal.modules["corelib/number"]=function(n){var A=n.klass,h=n.Opal,x=n.Kernel,I=n.def,Q=n.eqeqeq,W=n.truthy,P=n.rb_gt,K=n.not,p=n.rb_lt,B=n.alias,O=n.send2,X=n.find_super,U=n.send,re=n.rb_plus,Z=n.rb_minus,j=n.eqeq,y=n.return_self,z=n.rb_divide,N=n.to_ary,S=n.rb_times,L=n.rb_le,E=n.rb_ge,M=n.return_val,C=n.const_set,w=n.top,m=[],i=n.nil,l=n.$$$;return n.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),w.$require("corelib/numeric"),function(b,_,c){var o=A(b,_,"Number");h.$bridge(Number,o),n.prop(o.$$prototype,"$$is_number",!0),o.$$is_number_class=!0;var v=new Map;(function(e,t){return I(e,"$allocate",function(){var u=this;return x.$raise(l("TypeError"),"allocator undefined for "+u.$name())}),n.udef(e,"$new"),i})(n.get_singleton_class(o)),I(o,"$coerce",function(t){var s=this;if(t===i)x.$raise(l("TypeError"),"can't convert "+t.$class()+" into Float");else{if(t.$$is_string)return[x.$Float(t),s];if(t["$respond_to?"]("to_f"))return[h["$coerce_to!"](t,l("Float"),"to_f"),s];if(t.$$is_number)return[t,s];x.$raise(l("TypeError"),"can't convert "+t.$class()+" into Float")}}),I(o,"$__id__",function(){var t=this;if(t|t===0)return t*2+1;if(v.has(t))return v.get(t);var s=n.uid();return v.set(t,s),s}),I(o,"$hash",function(){var t=this;return t|t===0?t.$__id__():t.toString().$hash()}),I(o,"$+",function(t){var s=this;return t.$$is_number?s+t:s.$__coerced__("+",t)}),I(o,"$-",function(t){var s=this;return t.$$is_number?s-t:s.$__coerced__("-",t)}),I(o,"$*",function(t){var s=this;return t.$$is_number?s*t:s.$__coerced__("*",t)}),I(o,"$/",function(t){var s=this;return t.$$is_number?s/t:s.$__coerced__("/",t)}),I(o,"$%",function(t){var s=this;if(t.$$is_number){if(t==-1/0)return t;if(t==0)x.$raise(l("ZeroDivisionError"),"divided by 0");else return t<0||s<0?(s%t+t)%t:s%t}else return s.$__coerced__("%",t)}),I(o,"$&",function(t){var s=this;return t.$$is_number?s&t:s.$__coerced__("&",t)}),I(o,"$|",function(t){var s=this;return t.$$is_number?s|t:s.$__coerced__("|",t)}),I(o,"$^",function(t){var s=this;return t.$$is_number?s^t:s.$__coerced__("^",t)}),I(o,"$<",function(t){var s=this;return t.$$is_number?s<t:s.$__coerced__("<",t)}),I(o,"$<=",function(t){var s=this;return t.$$is_number?s<=t:s.$__coerced__("<=",t)}),I(o,"$>",function(t){var s=this;return t.$$is_number?s>t:s.$__coerced__(">",t)}),I(o,"$>=",function(t){var s=this;return t.$$is_number?s>=t:s.$__coerced__(">=",t)});var T=function(e,t){return t.$$is_number?isNaN(e)||isNaN(t)?i:e>t?1:e<t?-1:0:e.$__coerced__("<=>",t)};I(o,"$<=>",function(t){var s=this;try{return T(s,t)}catch(u){if(n.rescue(u,[l("ArgumentError")]))try{return i}finally{n.pop_exception(u)}else throw u}}),I(o,"$<<",function(t){var s=this;return t=h["$coerce_to!"](t,l("Integer"),"to_int"),t>0?s<<t:s>>-t}),I(o,"$>>",function(t){var s=this;return t=h["$coerce_to!"](t,l("Integer"),"to_int"),t>0?s>>t:s<<-t}),I(o,"$[]",function(t){var s=this;return t=h["$coerce_to!"](t,l("Integer"),"to_int"),t<0?0:t>=32?s<0?1:0:s>>t&1}),I(o,"$+@",function(){var t=this;return+t}),I(o,"$-@",function(){var t=this;return-t}),I(o,"$~",function(){var t=this;return~t}),I(o,"$**",function(t){var s=this;return Q(l("Integer"),t)?K(l("Integer")["$==="](s))||W(P(t,0))?Math.pow(s,t):l("Rational").$new(s,1)["$**"](t):W(p(s,0))&&(Q(l("Float"),t)||Q(l("Rational"),t))?l("Complex").$new(s,0)["$**"](t.$to_f()):W(t.$$is_number!=null)?Math.pow(s,t):s.$__coerced__("**",t)}),I(o,"$==",function(t){var s=this;return t.$$is_number?s.valueOf()===t.valueOf():t["$respond_to?"]("==")?t["$=="](s):!1}),B(o,"===","=="),I(o,"$abs",function(){var t=this;return Math.abs(t)}),I(o,"$abs2",function(){var t=this;return Math.abs(t*t)}),I(o,"$allbits?",function(t){var s=this;return t=h["$coerce_to!"](t,l("Integer"),"to_int"),(s&t)==t}),I(o,"$anybits?",function(t){var s=this;return t=h["$coerce_to!"](t,l("Integer"),"to_int"),(s&t)!==0}),I(o,"$angle",function(){var t=this;return W(t["$nan?"]())?t:t==0?1/t>0?0:Math.PI:t<0?Math.PI:0}),I(o,"$bit_length",function(){var t=this;if(Q(l("Integer"),t)||x.$raise(l("NoMethodError").$new("undefined method `bit_length` for "+t+":Float","bit_length")),t===0||t===-1)return 0;for(var s=0,u=t<0?~t:t;u!=0;)s+=1,u>>>=1;return s}),I(o,"$ceil",function(t){var s=this;t==null&&(t=0);var u=s.$to_f();if(u%1===0&&t>=0)return u;var f=Math.pow(10,t),q=Math.ceil(u*f)/f;return u%1===0&&(q=Math.round(q)),q},-1),I(o,"$chr",function(t){var s=this;return n.enc(String.fromCharCode(s),t||"BINARY")},-1),I(o,"$denominator",function e(){var t=e.$$p||i,s=this;return e.$$p=null,W(s["$nan?"]())||W(s["$infinite?"]())?1:O(s,X(s,"denominator",e,!1,!0),"denominator",[],t)}),I(o,"$downto",function e(t){var s=e.$$p||i,u=this;if(e.$$p=null,s===i)return U(u,"enum_for",["downto",t],function q(){var R=q.$$s==null?this:q.$$s;return Q(l("Numeric"),t)||x.$raise(l("ArgumentError"),"comparison of "+R.$class()+" with "+t.$class()+" failed"),W(P(t,R))?0:re(Z(R,t),1)},{$$s:u});t.$$is_number||x.$raise(l("ArgumentError"),"comparison of "+u.$class()+" with "+t.$class()+" failed");for(var f=u;f>=t;f--)s(f);return u}),I(o,"$equal?",function(t){var s=this,u=i;return W(u=s["$=="](t))?u:isNaN(s)&&isNaN(t)}),I(o,"$even?",function(){var t=this;return t%2===0}),I(o,"$floor",function(t){var s=this;t==null&&(t=0);var u=s.$to_f();if(u%1===0&&t>=0)return u;var f=Math.pow(10,t),q=Math.floor(u*f)/f;return u%1===0&&(q=Math.round(q)),q},-1),I(o,"$gcd",function(t){var s=this;Q(l("Integer"),t)||x.$raise(l("TypeError"),"not an integer");for(var u=Math.abs(s),f=Math.abs(t);u>0;){var q=u;u=f%u,f=q}return f}),I(o,"$gcdlcm",function(t){var s=this;return[s.$gcd(t),s.$lcm(t)]}),I(o,"$integer?",function(){var t=this;return t%1===0}),I(o,"$is_a?",function e(t){var s=e.$$p||i,u=this;return e.$$p=null,j(t,l("Integer"))&&Q(l("Integer"),u)||j(t,l("Integer"))&&Q(l("Integer"),u)||j(t,l("Float"))&&Q(l("Float"),u)?!0:O(u,X(u,"is_a?",e,!1,!0),"is_a?",[t],s)}),I(o,"$instance_of?",function e(t){var s=e.$$p||i,u=this;return e.$$p=null,j(t,l("Integer"))&&Q(l("Integer"),u)||j(t,l("Integer"))&&Q(l("Integer"),u)||j(t,l("Float"))&&Q(l("Float"),u)?!0:O(u,X(u,"instance_of?",e,!1,!0),"instance_of?",[t],s)}),I(o,"$lcm",function(t){var s=this;return Q(l("Integer"),t)||x.$raise(l("TypeError"),"not an integer"),s==0||t==0?0:Math.abs(s*t/s.$gcd(t))}),I(o,"$next",function(){var t=this;return t+1}),I(o,"$nobits?",function(t){var s=this;return t=h["$coerce_to!"](t,l("Integer"),"to_int"),(s&t)==0}),I(o,"$nonzero?",function(){var t=this;return t==0?i:t}),I(o,"$numerator",function e(){var t=e.$$p||i,s=this;return e.$$p=null,W(s["$nan?"]())||W(s["$infinite?"]())?s:O(s,X(s,"numerator",e,!1,!0),"numerator",[],t)}),I(o,"$odd?",function(){var t=this;return t%2!==0}),I(o,"$ord",y),I(o,"$pow",function(t,s){var u=this;return u==0&&x.$raise(l("ZeroDivisionError"),"divided by 0"),s===void 0?u["$**"](t):(l("Integer")["$==="](t)||x.$raise(l("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),t<0&&x.$raise(l("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),l("Integer")["$==="](s)||x.$raise(l("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),s===0&&x.$raise(l("ZeroDivisionError"),"divided by 0"),u["$**"](t)["$%"](s))},-2),I(o,"$pred",function(){var t=this;return t-1}),I(o,"$quo",function e(t){var s=e.$$p||i,u=this;return e.$$p=null,Q(l("Integer"),u)?O(u,X(u,"quo",e,!1,!0),"quo",[t],s):z(u,t)}),I(o,"$rationalize",function(t){var s,u,f=this,q=i,R=i;return arguments.length>1&&x.$raise(l("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),Q(l("Integer"),f)?l("Rational").$new(f,1):W(f["$infinite?"]())?x.$raise(l("FloatDomainError"),"Infinity"):W(f["$nan?"]())?x.$raise(l("FloatDomainError"),"NaN"):W(t==null)?(u=l("Math").$frexp(f),s=N(u),q=s[0]==null?i:s[0],R=s[1]==null?i:s[1],q=l("Math").$ldexp(q,l(l("Float"),"MANT_DIG")).$to_i(),R=Z(R,l(l("Float"),"MANT_DIG")),l("Rational").$new(S(2,q),1["$<<"](Z(1,R))).$rationalize(l("Rational").$new(1,1["$<<"](Z(1,R))))):f.$to_r().$rationalize(t)},-1),I(o,"$remainder",function(t){var s=this;return Z(s,S(t,z(s,t).$truncate()))}),I(o,"$round",function(t){var s,u,f=this,q=i;if(Q(l("Integer"),f)){if(W(t==null)||(Q(l("Float"),t)&&W(t["$infinite?"]())&&x.$raise(l("RangeError"),"Infinity"),t=h["$coerce_to!"](t,l("Integer"),"to_int"),W(p(t,l(l("Integer"),"MIN")))&&x.$raise(l("RangeError"),"out of bounds"),W(t>=0)))return f;if(t=t["$-@"](),.415241*t-.125>f.$size())return 0;var R=Math.pow(10,t),H=Math.floor((Math.abs(f)+R/2)/R)*R;return f<0?-H:H}else{if(W(f["$nan?"]())&&W(t==null)&&x.$raise(l("FloatDomainError"),"NaN"),t=h["$coerce_to!"](t||0,l("Integer"),"to_int"),W(L(t,0)))W(f["$nan?"]())?x.$raise(l("RangeError"),"NaN"):W(f["$infinite?"]())&&x.$raise(l("FloatDomainError"),"Infinity");else{if(j(t,0))return Math.round(f);if(W(f["$nan?"]())||W(f["$infinite?"]()))return f}return u=l("Math").$frexp(f),s=N(u),s[0]==null||s[0],q=s[1]==null?i:s[1],W(E(t,Z(re(l(l("Float"),"DIG"),2),W(P(q,0))?z(q,4):Z(z(q,3),1))))?f:W(p(t,(W(P(q,0))?re(z(q,3),1):z(q,4))["$-@"]()))?0:Math.round(f*Math.pow(10,t))/Math.pow(10,t)}},-1),I(o,"$times",function e(){var t=e.$$p||i,s=this;if(e.$$p=null,!W(t))return U(s,"enum_for",["times"],function f(){var q=f.$$s==null?this:f.$$s;return q},{$$s:s});for(var u=0;u<s;u++)t(u);return s}),I(o,"$to_f",y),I(o,"$to_i",function(){var t=this;return t<0?Math.ceil(t):Math.floor(t)}),I(o,"$to_r",function(){var t,s,u=this,f=i,q=i;return Q(l("Integer"),u)?l("Rational").$new(u,1):(s=l("Math").$frexp(u),t=N(s),f=t[0]==null?i:t[0],q=t[1]==null?i:t[1],f=l("Math").$ldexp(f,l(l("Float"),"MANT_DIG")).$to_i(),q=Z(q,l(l("Float"),"MANT_DIG")),S(f,l(l("Float"),"RADIX")["$**"](q)).$to_r())}),I(o,"$to_s",function(t){var s=this;return t==null&&(t=10),t=h["$coerce_to!"](t,l("Integer"),"to_int"),(W(p(t,2))||W(P(t,36)))&&x.$raise(l("ArgumentError"),"invalid radix "+t),j(s,0)&&W(1/s===-1/0)?"-0.0":s.toString(t)},-1),I(o,"$truncate",function(t){var s=this;t==null&&(t=0);var u=s.$to_f();if(u%1===0&&t>=0)return u;var f=Math.pow(10,t),q=parseInt(u*f,10)/f;return u%1===0&&(q=Math.round(q)),q},-1),I(o,"$digits",function(t){var s=this;t==null&&(t=10),W(p(s,0))&&x.$raise(l(l("Math"),"DomainError"),"out of domain"),t=h["$coerce_to!"](t,l("Integer"),"to_int"),W(p(t,2))&&x.$raise(l("ArgumentError"),"invalid radix "+t),s!=parseInt(s)&&x.$raise(l("NoMethodError"),"undefined method `digits' for "+s.$inspect());var u=s,f=[];if(s==0)return[0];for(;u!=0;)f.push(u%t),u=parseInt(u/t,10);return f},-1),I(o,"$divmod",function e(t){var s=e.$$p||i,u=this;return e.$$p=null,W(u["$nan?"]())||W(t["$nan?"]())?x.$raise(l("FloatDomainError"),"NaN"):W(u["$infinite?"]())?x.$raise(l("FloatDomainError"),"Infinity"):O(u,X(u,"divmod",e,!1,!0),"divmod",[t],s)}),I(o,"$upto",function e(t){var s=e.$$p||i,u=this;if(e.$$p=null,s===i)return U(u,"enum_for",["upto",t],function q(){var R=q.$$s==null?this:q.$$s;return Q(l("Numeric"),t)||x.$raise(l("ArgumentError"),"comparison of "+R.$class()+" with "+t.$class()+" failed"),W(p(t,R))?0:re(Z(t,R),1)},{$$s:u});t.$$is_number||x.$raise(l("ArgumentError"),"comparison of "+u.$class()+" with "+t.$class()+" failed");for(var f=u;f<=t;f++)s(f);return u}),I(o,"$zero?",function(){var t=this;return t==0}),I(o,"$size",M(4)),I(o,"$nan?",function(){var t=this;return isNaN(t)}),I(o,"$finite?",function(){var t=this;return t!=1/0&&t!=-1/0&&!isNaN(t)}),I(o,"$infinite?",function(){var t=this;return t==1/0?1:t==-1/0?-1:i}),I(o,"$positive?",function(){var t=this;return t!=0&&(t==1/0||1/t>0)}),I(o,"$negative?",function(){var t=this;return t==-1/0||1/t<0});function d(e){var t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}function a(e){return new DataView(e.buffer).getFloat64(0,!0)}function $(e){for(var t=d(e),s=0;s<t.length;s++)if(t[s]===255)t[s]=0;else{t[s]++;break}return a(t)}function r(e){for(var t=d(e),s=0;s<t.length;s++)if(t[s]===0)t[s]=255;else{t[s]--;break}return a(t)}return I(o,"$next_float",function(){var t=this;return j(t,l(l("Float"),"INFINITY"))?l(l("Float"),"INFINITY"):W(t["$nan?"]())?l(l("Float"),"NAN"):W(E(t,0))?$(Math.abs(t)):r(t)}),I(o,"$prev_float",function(){var t=this;return j(t,l(l("Float"),"INFINITY")["$-@"]())?l(l("Float"),"INFINITY")["$-@"]():W(t["$nan?"]())?l(l("Float"),"NAN"):W(P(t,0))?r(t):-$(Math.abs(t))}),B(o,"arg","angle"),B(o,"eql?","=="),B(o,"fdiv","/"),B(o,"inspect","to_s"),B(o,"kind_of?","is_a?"),B(o,"magnitude","abs"),B(o,"modulo","%"),B(o,"object_id","__id__"),B(o,"phase","angle"),B(o,"succ","next"),B(o,"to_int","to_i")}("::",l("Numeric")),C("::","Fixnum",l("Number")),function(b,_,c){var o=A(b,_,"Integer"),v=[o].concat(c);return o.$$is_number_class=!0,o.$$is_integer_class=!0,function(T,d){var a=[T].concat(d),$=n.$r(a);return I(T,"$allocate",function(){var e=this;return x.$raise(l("TypeError"),"allocator undefined for "+e.$name())}),n.udef(T,"$new"),I(T,"$sqrt",function(e){return e=h["$coerce_to!"](e,l("Integer"),"to_int"),e<0&&x.$raise(l(l("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(e),10)}),I(T,"$try_convert",function(e){var t=this;return $("Opal")["$coerce_to?"](e,t,"to_int")})}(n.get_singleton_class(o),v),C(o,"MAX",Math.pow(2,30)-1),C(o,"MIN",-Math.pow(2,30))}("::",l("Numeric"),m),function(b,_,c){var o=A(b,_,"Float");return o.$$is_number_class=!0,function(v,T){return I(v,"$allocate",function(){var a=this;return x.$raise(l("TypeError"),"allocator undefined for "+a.$name())}),n.udef(v,"$new"),I(v,"$===",function(a){return!!a.$$is_number})}(n.get_singleton_class(o)),C(o,"INFINITY",1/0),C(o,"MAX",Number.MAX_VALUE),C(o,"MIN",Number.MIN_VALUE),C(o,"NAN",NaN),C(o,"DIG",15),C(o,"MANT_DIG",53),C(o,"RADIX",2),C(o,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",l("Numeric"))};Opal.modules["corelib/range"]=function(n){var A=n.klass,h=n.truthy,x=n.Kernel,I=n.def,Q=n.not,W=n.send2,P=n.find_super,K=n.lambda,p=n.send,B=n.rb_ge,O=n.rb_gt,X=n.eqeq,U=n.rb_le,re=n.rb_lt,Z=n.eqeqeq,j=n.return_ivar,y=n.rb_minus,z=n.Opal,N=n.rb_divide,S=n.rb_plus,L=n.rb_times,E=n.thrower,M=n.alias,C=n.top,w=[],m=n.nil,i=n.$$$;return n.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),C.$require("corelib/enumerable"),function(l,b,_){var c=A(l,b,"Range"),o=[c].concat(_),v=n.$r(o),T=c.$$prototype;T.begin=T.end=T.excl=m,c.$include(i("Enumerable")),c.$$prototype.$$is_range=!0,c.$attr_reader("begin","end"),I(c,"$initialize",function($,r,e){var t=this;return e==null&&(e=!1),h(t.begin)&&x.$raise(i("NameError"),"'initialize' called twice"),h($["$<=>"](r))||h($["$nil?"]())||h(r["$nil?"]())||x.$raise(i("ArgumentError"),"bad value for range"),t.begin=$,t.end=r,t.excl=e},-3),I(c,"$===",function($){var r=this;return h($.$$is_range)?!1:r["$cover?"]($)});function d(a){return a.begin===m||a.end===m||a.begin===-1/0||a.end===1/0||a.begin===1/0||a.end===-1/0}return I(c,"$count",function a(){var $=a.$$p||m,r=this;return a.$$p=null,Q($!==m)&&h(d(r))?i(i("Float"),"INFINITY"):W(r,P(r,"count",a,!1,!0),"count",[],$)}),I(c,"$to_a",function a(){var $=a.$$p||m,r=this;return a.$$p=null,h(d(r))&&x.$raise(i("TypeError"),"cannot convert endless range to an array"),W(r,P(r,"to_a",a,!1,!0),"to_a",[],$)}),I(c,"$cover?",function($){var r=this,e=m,t=m,s=m,u=m,f=m,q=m,R=m,H=m;return e=K(function(G,te){var ae=m;return G==null&&(G=m),te==null&&(te=m),h(ae=G["$<=>"](te))?ae:1}),h($.$$is_range)?(t=$.$begin(),s=$.$end(),u=$["$exclude_end?"](),h(r.begin)&&h(t["$nil?"]())||h(r.end)&&h(s["$nil?"]())||h(t)&&h(s)&&h(p(e.$call(t,s),"then",[],function(G){return G==null&&(G=m),h(u)?B(G,0):O(G,0)}))||h(t)&&Q(r["$cover?"](t))?!1:(f=e.$call(r.end,s),X(r.excl,u)?B(f,0):h(r.excl)?O(f,0):h(B(f,0))?!0:(q=$.$max(),h(R=q["$nil?"]()["$!"]())?U(e.$call(q,r.end),0):R))):h(r.begin)&&h(O(e.$call(r.begin,$),0))?!1:h(r.end["$nil?"]())?!0:(H=e.$call($,r.end),h(r.excl)?re(H,0):U(H,0))}),I(c,"$each",function a(){var $=a.$$p||m,r=this,e=m,t=m,s=m;if(a.$$p=null,$===m)return p(r,"enum_for",["each"],function q(){var R=q.$$s==null?this:q.$$s;return R.$size()},{$$s:r});var u,f;if(r.begin.$$is_number&&r.end.$$is_number){for((r.begin%1!==0||r.end%1!==0)&&x.$raise(i("TypeError"),"can't iterate from Float"),u=r.begin,f=r.end+(h(r.excl)?0:1);u<f;u++)$(u);return r}if(r.begin.$$is_string&&r.end.$$is_string)return p(r.begin,"upto",[r.end,r.excl],$.$to_proc()),r;for(e=r.begin,t=r.end,h(e["$respond_to?"]("succ"))||x.$raise(i("TypeError"),"can't iterate from "+e.$class());h(h(s=r.end["$nil?"]())?s:re(e["$<=>"](t),0));)n.yield1($,e),e=e.$succ();return Q(r.excl)&&X(e,t)&&n.yield1($,e),r}),I(c,"$eql?",function($){var r=this,e=m,t=m;return Z(i("Range"),$)?h(e=h(t=r.excl["$==="]($["$exclude_end?"]()))?r.begin["$eql?"]($.$begin()):t)?r.end["$eql?"]($.$end()):e:!1}),I(c,"$exclude_end?",j("excl")),I(c,"$first",function a($){var r=a.$$p||m,e=this;return a.$$p=null,h(e.begin["$nil?"]())&&x.$raise(i("RangeError"),"cannot get the minimum of beginless range"),h($==null)?e.begin:W(e,P(e,"first",a,!1,!0),"first",[$],r)},-1),I(c,"$include?",function a($){var r=a.$$p||m,e=this,t=m,s=m;if(a.$$p=null,h(e.begin.$$is_number||e.end.$$is_number)||h(e.begin["$is_a?"](i("Time")))||h(e.end["$is_a?"](i("Time")))||h(i("Integer").$try_convert(e.begin))||h(i("Integer").$try_convert(e.end)))return e["$cover?"]($);if(h(e.begin.$$is_string||e.end.$$is_string)){if(h(e.begin.$$is_string&&e.end.$$is_string))return p(e.begin.$upto(e.end,e.excl),"any?",[],function(f){return f==null&&(f=m),f["$=="]($)});if(h(e.begin["$nil?"]()))return t=$["$<=>"](e.end),h(s=t["$nil?"]()["$!"]())?h(e.excl)?re(t,0):U(t,0):s;if(h(e.end["$nil?"]()))return t=e.begin["$<=>"]($),h(s=t["$nil?"]()["$!"]())?U(t,0):s}return W(e,P(e,"include?",a,!1,!0),"include?",[$],r)}),I(c,"$last",function($){var r=this;return h(r.end["$nil?"]())&&x.$raise(i("RangeError"),"cannot get the maximum of endless range"),h($==null)?r.end:r.$to_a().$last($)},-1),I(c,"$max",function a(){var $=a.$$p||m,r=this;return a.$$p=null,h(r.end["$nil?"]())?x.$raise(i("RangeError"),"cannot get the maximum of endless range"):$!==m?W(r,P(r,"max",a,!1,!0),"max",[],$):Q(r.begin["$nil?"]())&&(h(O(r.begin,r.end))||h(r.excl)&&X(r.begin,r.end))?m:r.excl?r.end-1:r.end}),I(c,"$min",function a(){var $=a.$$p||m,r=this;return a.$$p=null,h(r.begin["$nil?"]())?x.$raise(i("RangeError"),"cannot get the minimum of beginless range"):$!==m?W(r,P(r,"min",a,!1,!0),"min",[],$):Q(r.end["$nil?"]())&&(h(O(r.begin,r.end))||h(r.excl)&&X(r.begin,r.end))?m:r.begin}),I(c,"$size",function(){var $=this.begin,r=this.end;if(i("Numeric")["$==="]($)){if(i("Numeric")["$==="](r)){var e=y(r,$);return e<0?0:(this.excl||(e+=1),i("Float")["$==="]($)||i("Float")["$==="](r)?Math.floor(e):e)}else if(r===m)return 1/0}else if($===m&&i("Numeric")["$==="](r))return 1/0;return m}),I(c,"$step",function a($){var r=a.$$p||m,e=this,t=m,s=m;a.$$p=null;function u(){$==null?$=1:$.$$is_number||($=z["$coerce_to!"]($,i("Integer"),"to_int")),$<0?x.$raise(i("ArgumentError"),"step can't be negative"):$===0&&x.$raise(i("ArgumentError"),"step can't be 0")}function f(){if(!e.begin["$respond_to?"]("succ")||e.begin.$$is_string&&e.end.$$is_string)return m;if($%1===0)return N(e.$size(),$).$ceil();var q=e.begin,R=e.end,H=Math.abs,D=Math.floor,G=(H(q)+H(R)+H(R-q))/H($)*i(i("Float"),"EPSILON"),te;return G>.5&&(G=.5),e.excl?(te=D((R-q)/$-G),te*$+q<R&&te++):te=D((R-q)/$+G)+1,te}return r===m?(h(e.begin["$is_a?"](v("Numeric")))||h(e.begin["$nil?"]()))&&(h(e.end["$is_a?"](v("Numeric")))||h(e.end["$nil?"]()))&&Q(h(t=e.begin["$nil?"]())?e.end["$nil?"]():t)?i(i("Enumerator"),"ArithmeticSequence").$new(e,$,"step"):p(e,"enum_for",["step",$],function(){return u(),f()}):(u(),h(e.begin.$$is_number&&e.end.$$is_number)?(s=0,function(){try{var q=E("break");return p(e,"loop",[],function R(){var H=R.$$s==null?this:R.$$s,D=m;return H.begin==null&&(H.begin=m),H.excl==null&&(H.excl=m),H.end==null&&(H.end=m),D=S(H.begin,L(s,$)),h(H.excl)?h(B(D,H.end))&&q.$throw(m,R.$$is_lambda):h(O(D,H.end))&&q.$throw(m,R.$$is_lambda),n.yield1(r,D),s=S(s,1)},{$$s:e})}catch(R){if(R===q)return R.$v;throw R}finally{q.is_orphan=!0}}()):(e.begin.$$is_string&&e.end.$$is_string&&$%1!==0&&x.$raise(i("TypeError"),"no implicit conversion to float from string"),p(e,"each_with_index",[],function(R,H){return R==null&&(R=m),H==null&&(H=m),X(H["$%"]($),0)?n.yield1(r,R):m})),e)},-1),I(c,"$%",function($){var r=this;return h(r.begin["$is_a?"](v("Numeric")))&&h(r.end["$is_a?"](v("Numeric")))?i(i("Enumerator"),"ArithmeticSequence").$new(r,$,"%"):r.$step($)}),I(c,"$bsearch",function a(){var $=a.$$p||m,r=this;return a.$$p=null,$===m?r.$enum_for("bsearch"):(h(d(r)&&(r.begin.$$is_number||r.end.$$is_number))&&x.$raise(i("NotImplementedError"),"Can't #bsearch an infinite range"),h(r.begin.$$is_number&&r.end.$$is_number)||x.$raise(i("TypeError"),"can't do binary search for "+r.begin.$class()),p(r.$to_a(),"bsearch",[],$.$to_proc()))}),I(c,"$to_s",function(){var $=this,r=m;return""+(h(r=$.begin)?r:"")+(h($.excl)?"...":"..")+(h(r=$.end)?r:"")}),I(c,"$inspect",function(){var $=this,r=m;return""+(h(r=$.begin)?$.begin.$inspect():r)+(h($.excl)?"...":"..")+(h(r=$.end)?$.end.$inspect():r)}),I(c,"$marshal_load",function($){var r=this;return r.begin=$["$[]"]("begin"),r.end=$["$[]"]("end"),r.excl=$["$[]"]("excl")}),I(c,"$hash",function(){var $=this;return[i("Range"),$.begin,$.end,$.excl].$hash()}),M(c,"==","eql?"),M(c,"member?","include?")}("::",null,w)};Opal.modules["corelib/proc"]=function(n){var A=n.slice,h=n.each_ivar,x=n.klass,I=n.truthy,Q=n.Kernel,W=n.defs,P=n.def,K=n.send,p=n.to_a,B=n.return_self,O=n.ensure_kwargs,X=n.hash_get,U=n.Opal,re=n.alias,Z=n.nil,j=n.$$$;return n.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(y,z){var N=x(y,z,"Proc");n.prop(N.$$prototype,"$$is_proc",!0),n.prop(N.$$prototype,"$$is_lambda",!1),W(N,"$new",function E(){var M=E.$$p||Z;return E.$$p=null,I(M)||Q.$raise(j("ArgumentError"),"tried to create a Proc object without a block"),M});function S(E,M){if(E.$$ret)try{return E.apply(null,M)}catch(C){if(C===E.$$ret)return C.$v;throw C}else return E.apply(null,M)}function L(E,M){if(E.$$brk)try{return n.yieldX(E,M)}catch(C){if(C===E.$$brk)return C.$v;throw C}else return n.yieldX(E,M)}return P(N,"$call",function E(M){var C=E.$$p||Z,w,m,i=this;return E.$$p=null,w=A(arguments),m=w,C!==Z&&(i.$$p=C),i.$$is_lambda?S(i,m):L(i,m)},-1),P(N,"$>>",function E(M){E.$$p;var C=this;return E.$$p=null,K(Q,"proc",[],function w(m){var i=w.$$p||Z,l,b,_=w.$$s==null?this:w.$$s,c=Z;return w.$$p=null,l=A(arguments),b=l,c=K(_,"call",p(b),i.$to_proc()),M.$call(c)},{$$arity:-1,$$s:C})}),P(N,"$<<",function E(M){E.$$p;var C=this;return E.$$p=null,K(Q,"proc",[],function w(m){var i=w.$$p||Z,l,b,_=w.$$s==null?this:w.$$s,c=Z;return w.$$p=null,l=A(arguments),b=l,c=K(M,"call",p(b),i.$to_proc()),_.$call(c)},{$$arity:-1,$$s:C})}),P(N,"$to_proc",B),P(N,"$lambda?",function(){var M=this;return!!M.$$is_lambda}),P(N,"$arity",function(){var M=this;return M.$$is_curried?-1:M.$$arity!=null?M.$$arity:M.length}),P(N,"$source_location",function(){var M=this,C=Z;return M.$$is_curried?Z:I(C=M.$$source_location)?C:Z}),P(N,"$binding",function(){var M=this;return M.$$is_curried&&Q.$raise(j("ArgumentError"),"Can't create Binding"),I(j("::","Binding","skip_raise")?"constant":Z)?j("Binding").$new(Z,[],M.$$s,M.$source_location()):Z}),P(N,"$parameters",function(M){var C,w=this;if(M=O(M),C=X(M,"lambda"),w.$$is_curried)return[["rest"]];if(w.$$parameters){if(C??w.$$is_lambda)return w.$$parameters;var m=[],i,l;for(i=0,l=w.$$parameters.length;i<l;i++){var b=w.$$parameters[i];b[0]==="req"&&(b=["opt",b[1]]),m.push(b)}return m}else return[]},-1),P(N,"$curry",function(M){var C=this;M===void 0?M=C.length:(M=U["$coerce_to!"](M,j("Integer"),"to_int"),C.$$is_lambda&&M!==C.length&&Q.$raise(j("ArgumentError"),"wrong number of arguments ("+M+" for "+C.length+")"));function w(){var m=A(arguments),i=m.length,l;return i>M&&C.$$is_lambda&&!C.$$is_curried&&Q.$raise(j("ArgumentError"),"wrong number of arguments ("+i+" for "+M+")"),i>=M?C.$call.apply(C,m):(l=function(){return w.apply(null,m.concat(A(arguments)))},l.$$is_lambda=C.$$is_lambda,l.$$is_curried=!0,l)}return w.$$is_lambda=C.$$is_lambda,w.$$is_curried=!0,w},-1),P(N,"$dup",function(){var M=this,C=M.$$original_proc||M,w=function(){return C.apply(this,arguments)};return h(M,function(m){w[m]=M[m]}),w}),re(N,"===","call"),re(N,"clone","dup"),re(N,"yield","call"),re(N,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(n){var A=n.klass,h=n.def,x=n.truthy,I=n.slice,Q=n.alias,W=n.Kernel,P=n.send,K=n.to_a,p=n.nil,B=n.$$$;return n.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function(O,X){var U=A(O,X,"Method"),re=U.$$prototype;return re.method=re.receiver=re.owner=re.name=p,U.$attr_reader("owner","receiver","name"),h(U,"$initialize",function(j,y,z,N){var S=this;return S.receiver=j,S.owner=y,S.name=N,S.method=z}),h(U,"$arity",function(){var j=this;return j.method.$arity()}),h(U,"$parameters",function(){var j=this;return j.method.$$parameters}),h(U,"$source_location",function(){var j=this,y=p;return x(y=j.method.$$source_location)?y:["(eval)",0]}),h(U,"$comments",function(){var j=this,y=p;return x(y=j.method.$$comments)?y:[]}),h(U,"$call",function Z(j){var y=Z.$$p||p,z,N,S=this;return Z.$$p=null,z=I(arguments),N=z,S.method.$$p=y,S.method.apply(S.receiver,N)},-1),h(U,"$curry",function(j){var y=this;return y.method.$curry(j)},-1),h(U,"$>>",function(j){var y=this;return y.method["$>>"](j)}),h(U,"$<<",function(j){var y=this;return y.method["$<<"](j)}),h(U,"$unbind",function(){var j=this;return B("UnboundMethod").$new(j.receiver.$class(),j.owner,j.method,j.name)}),h(U,"$to_proc",function(){var j=this,y=j.$call.bind(j);return y.$$unbound=j.method,y.$$is_lambda=!0,y.$$arity=j.method.$$arity==null?j.method.length:j.method.$$arity,y.$$parameters=j.method.$$parameters,y}),h(U,"$inspect",function(){var j=this;return"#<"+j.$class()+": "+j.receiver.$class()+"#"+j.name+" (defined in "+j.owner+" in "+j.$source_location().$join(":")+")>"}),Q(U,"[]","call"),Q(U,"===","call")}("::",null),function(O,X){var U=A(O,X,"UnboundMethod"),re=U.$$prototype;return re.method=re.owner=re.name=re.source=p,U.$attr_reader("source","owner","name"),h(U,"$initialize",function(j,y,z,N){var S=this;return S.source=j,S.owner=y,S.method=z,S.name=N,S.$$method=z}),h(U,"$arity",function(){var j=this;return j.method.$arity()}),h(U,"$parameters",function(){var j=this;return j.method.$$parameters}),h(U,"$source_location",function(){var j=this,y=p;return x(y=j.method.$$source_location)?y:["(eval)",0]}),h(U,"$comments",function(){var j=this,y=p;return x(y=j.method.$$comments)?y:[]}),h(U,"$bind",function(j){var y=this;if(y.owner.$$is_module||n.is_a(j,y.owner))return B("Method").$new(j,y.owner,y.method,y.name);W.$raise(B("TypeError"),"can't bind singleton method to a different class (expected "+j+".kind_of?("+y.owner+" to be true)")}),h(U,"$bind_call",function Z(j,y){var z=Z.$$p||p,N,S,L=this;return Z.$$p=null,N=I(arguments,1),S=N,P(L.$bind(j),"call",K(S),z.$to_proc())},-2),h(U,"$inspect",function(){var j=this;return"#<"+j.$class()+": "+j.source+"#"+j.name+" (defined in "+j.owner+" in "+j.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(n){var A=n.gvars,h=n.const_set,x=n.Object,I=n.nil;return n.add_stubs("new"),A["&"]=A["~"]=A["`"]=A["'"]=I,A.LOADED_FEATURES=A['"']=n.loaded_features,A.LOAD_PATH=A[":"]=[],A["/"]=`
`,A[","]=I,h("::","ARGV",[]),h("::","ARGF",x.$new()),h("::","ENV",new Map),A.VERBOSE=!1,A.DEBUG=!1,A.SAFE=0};Opal.modules["corelib/io"]=function(n){var A=n.klass,h=n.const_set,x=n.not,I=n.truthy,Q=n.def,W=n.return_ivar,P=n.return_val,K=n.slice,p=n.Kernel,B=n.gvars,O=n.send,X=n.to_a,U=n.rb_plus,re=n.neqeq,Z=n.range,j=n.eqeq,y=n.to_ary,z=n.rb_gt,N=n.assign_ivar_val,S=n.alias,L,E=n.nil,M=n.$$$;n.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(w,m){var i=A(w,m,"IO"),l=i.$$prototype;return l.read_buffer=l.closed=E,h(i,"SEEK_SET",0),h(i,"SEEK_CUR",1),h(i,"SEEK_END",2),h(i,"SEEK_DATA",3),h(i,"SEEK_HOLE",4),h(i,"READABLE",1),h(i,"WRITABLE",4),i.$attr_reader("eof"),i.$attr_accessor("read_proc","sync","tty","write_proc"),Q(i,"$initialize",function(_,c){var o=this;return c==null&&(c="r"),o.fd=_,o.flags=c,o.eof=!1,I(c["$include?"]("r"))&&x(c["$match?"](/[wa+]/))?o.closed="write":I(c["$match?"](/[wa]/))&&x(c["$match?"](/[r+]/))?o.closed="read":E},-2),Q(i,"$fileno",W("fd")),Q(i,"$tty?",function(){var _=this;return _.tty==!0}),Q(i,"$write",function(_){var c=this;return c.write_proc(_),_.$size()}),Q(i,"$flush",P(E)),Q(i,"$<<",function(_){var c=this;return c.$write(_),c}),Q(i,"$print",function(_){var c,o,v=this;B[","]==null&&(B[","]=E),c=K(arguments),o=c;for(var T=0,d=o.length;T<d;T++)o[T]=p.$String(o[T]);return v.$write(o.join(B[","])),E},-1),Q(i,"$puts",function(_){var c,o,v=this;c=K(arguments),o=c;var T;if(o.length===0)return v.$write(`
`),E;for(var d=0,a=o.length;d<a;d++)if(o[d].$$is_array){var $=o[d].$flatten();$.length>0&&O(v,"puts",X($))}else o[d].$$is_string?T=o[d].valueOf():T=p.$String(o[d]),T.endsWith(`
`)||(T+=`
`),v.$write(T);return E},-1),Q(i,"$getc",function(){var _=this,c=E,o=E,v=E;_.read_buffer=I(c=_.read_buffer)?c:"",o="";do if(_.read_buffer=U(_.read_buffer,o),re(_.read_buffer,""))return v=_.read_buffer["$[]"](0),_.read_buffer=_.read_buffer["$[]"](Z(1,-1,!1)),v;while(I(o=_.$sysread_noraise(1)));return E}),Q(i,"$getbyte",function(){var _,c=this;return _=c.$getc(),_===E||_==null?E:_.$ord()}),Q(i,"$readbyte",function(){var _=this;return _.$readchar().$ord()}),Q(i,"$readchar",function(){var _=this,c=E;return I(c=_.$getc())?c:p.$raise(M("EOFError"),"end of file reached")}),Q(i,"$readline",function(_){var c,o,v=this,T=E;return c=K(arguments),o=c,I(T=O(v,"gets",X(o)))?T:p.$raise(M("EOFError"),"end of file reached")},-1),Q(i,"$gets",function(_,c,o){var v,T,d=this,a=E,$=E,r=E,e=E,t=E,s=E;B["/"]==null&&(B["/"]=E),_==null&&(_=!1),c==null&&(c=E),o==null&&(o=new Map),I(_.$$is_number)&&x(c)&&(v=[!1,_,c],_=v[0],c=v[1],o=v[2]),I(_.$$is_hash)&&x(c)&&j(o,new Map)?(v=[!1,E,_],_=v[0],c=v[1],o=v[2]):I(c.$$is_hash)&&j(o,new Map)&&(v=[_,E,c],_=v[0],c=v[1],o=v[2]),a=_,j(_,!1)&&(_=B["/"]),j(_,"")&&(_=/\r?\n\r?\n/),_=I($=_)?$:"",j(a,"")||(_=_.$to_str()),r=j(a,"")?2:_.$length(),j(_," ")&&(_=/ /),d.read_buffer=I($=d.read_buffer)?$:"",e="",t=E;do if(d.read_buffer=U(d.read_buffer,e),re(_,"")&&I(I(_.$$is_regexp)?d.read_buffer["$match?"](_):d.read_buffer["$include?"](_))){s=d.read_buffer,T=d.read_buffer.$split(_,2),v=y(T),t=v[0]==null?E:v[0],d.read_buffer=v[1]==null?E:v[1],re(t,s)&&(t=U(t,s["$[]"](t.$length(),r)));break}while(I(e=d.$sysread_noraise(j(_,"")?65536:1)));return I(t)||(v=[I($=d.read_buffer)?$:"",""],t=v[0],d.read_buffer=v[1],j(t,"")&&(t=E)),I(t)&&(I(c)&&(t=t["$[]"](n.Range.$new(0,c,!0)),d.read_buffer=U(t["$[]"](n.Range.$new(c,-1,!1)),d.read_buffer)),I(o["$[]"]("chomp"))&&(t=t.$sub(/\r?\n$/,"")),j(a,"")&&(t=t.$sub(/^[\r\n]+/,""))),j(a,!1)&&(B._=t),t},-1),Q(i,"$sysread",function(_){var c=this,o=E;return I(o=c.read_proc(_))?o:(c.eof=!0,p.$raise(M("EOFError"),"end of file reached"))}),Q(i,"$sysread_noraise",function(_){var c=this;try{return c.$sysread(_)}catch(o){if(n.rescue(o,[M("EOFError")]))try{return E}finally{n.pop_exception(o)}else throw o}}),Q(i,"$readpartial",function(_){var c,o=this,v=E,T=E,d=E;return o.read_buffer=I(v=o.read_buffer)?v:"",T=o.$sysread(_),c=[U(o.read_buffer,I(v=T)?v:""),""],d=c[0],o.read_buffer=c[1],j(d,"")&&(d=E),d}),Q(i,"$read",function(_){var c,o=this,v=E,T=E,d=E;_==null&&(_=E),o.read_buffer=I(v=o.read_buffer)?v:"",T="",d=E;do if(o.read_buffer=U(o.read_buffer,T),I(_)&&I(z(o.read_buffer.$length(),_)))return c=[o.read_buffer["$[]"](n.Range.$new(0,_,!0)),o.read_buffer["$[]"](n.Range.$new(_,-1,!1))],d=c[0],o.read_buffer=c[1],d;while(I(T=o.$sysread_noraise(I(v=_)?v:65536)));return c=[o.read_buffer,""],d=c[0],o.read_buffer=c[1],d},-1),Q(i,"$readlines",function(_){var c=this;return B["/"]==null&&(B["/"]=E),_==null&&(_=B["/"]),c.$each_line(_).$to_a()},-1),Q(i,"$each",function b(_,c){var o=b.$$p||E,v,T,d,a=this,$=E;if(B["/"]==null&&(B["/"]=E),b.$$p=null,v=K(arguments),v.length>0&&(T=v.shift()),T==null&&(T=B["/"]),d=v,o===E)return O(a,"enum_for",["each",T].concat(X(d)));for(;I($=O(a,"gets",[T].concat(X(d))));)n.yield1(o,$);return a},-1),Q(i,"$each_byte",function b(){var _=b.$$p||E,c=this,o=E;if(b.$$p=null,_===E)return c.$enum_for("each_byte");for(;I(o=c.$getbyte());)n.yield1(_,o);return c}),Q(i,"$each_char",function b(){var _=b.$$p||E,c=this,o=E;if(b.$$p=null,_===E)return c.$enum_for("each_char");for(;I(o=c.$getc());)n.yield1(_,o);return c}),Q(i,"$close",N("closed","both")),Q(i,"$close_read",function(){var _=this;return j(_.closed,"write")?_.closed="both":_.closed="read"}),Q(i,"$close_write",function(){var _=this;return j(_.closed,"read")?_.closed="both":_.closed="write"}),Q(i,"$closed?",function(){var _=this;return _.closed["$=="]("both")}),Q(i,"$closed_read?",function(){var _=this,c=E;return I(c=_.closed["$=="]("read"))?c:_.closed["$=="]("both")}),Q(i,"$closed_write?",function(){var _=this,c=E;return I(c=_.closed["$=="]("write"))?c:_.closed["$=="]("both")}),Q(i,"$check_writable",function(){var _=this;return I(_["$closed_write?"]())?p.$raise(M("IOError"),"not opened for writing"):E}),Q(i,"$check_readable",function(){var _=this;return I(_["$closed_read?"]())?p.$raise(M("IOError"),"not opened for reading"):E}),S(i,"each_line","each"),S(i,"eof?","eof")}("::",null),h("::","STDIN",B.stdin=M("IO").$new(0,"r")),h("::","STDOUT",B.stdout=M("IO").$new(1,"w")),h("::","STDERR",B.stderr=M("IO").$new(2,"w"));var C=n.global.console;return M("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(w){process.stdout.write(w)}:function(w){C.log(w)}),M("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(w){process.stderr.write(w)}:function(w){C.warn(w)}),L=[function(w){var m=prompt();return m!==null?m+`
`:E}],O(M("STDIN"),"read_proc=",L),L[L.length-1]};Opal.modules["opal/regexp_anchors"]=function(n){var A=n.module,h=n.const_set,x=[];n.nil;var I=n.$$$;return n.add_stubs("new"),function(Q,W){var P=A(Q,"Opal"),K=[P].concat(W),p=n.$r(K);return h(P,"REGEXP_START","^"),h(P,"REGEXP_END","$"),h(P,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),h(P,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),h(P,"INLINE_IDENTIFIER_REGEXP",p("Regexp").$new("[^"+I(P,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+I(P,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),h(P,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),h(P,"CONST_NAME_REGEXP",p("Regexp").$new(""+I(P,"REGEXP_START")+"(::)?[A-Z][^"+I(P,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+I(P,"REGEXP_END")))}(x[0],x)};Opal.modules["opal/mini"]=function(n){var A=n.Object;return n.nil,n.add_stubs("require"),A.$require("opal/base"),A.$require("corelib/nil"),A.$require("corelib/boolean"),A.$require("corelib/string"),A.$require("corelib/comparable"),A.$require("corelib/enumerable"),A.$require("corelib/enumerator"),A.$require("corelib/array"),A.$require("corelib/hash"),A.$require("corelib/number"),A.$require("corelib/range"),A.$require("corelib/proc"),A.$require("corelib/method"),A.$require("corelib/regexp"),A.$require("corelib/variables"),A.$require("corelib/io"),A.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(n){var A=n.coerce_to,h=n.module,x=n.slice,I=n.truthy,Q=n.eqeq,W=n.Opal,P=n.Kernel,K=n.gvars,p=n.def,B=n.alias,O=n.nil,X=n.$$$;return n.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(U){var re=h(U,"Kernel");return p(re,"$format",function(j,y){var z,N,S=O;K.DEBUG==null&&(K.DEBUG=O),z=x(arguments,1),N=z,Q(N.$length(),1)&&I(N["$[]"](0)["$respond_to?"]("to_ary"))&&(S=W["$coerce_to?"](N["$[]"](0),X("Array"),"to_ary"),I(S["$nil?"]())||(N=S.$to_a()));var L="",E=0,M,C,w=j.length,m,i,l,b,_,c,o,v,T,d,a,$,r,e=1,t=0,s,u=0,f=1,q=2,R=4,H=8,D=16,G=32,te=64,ae=128;function le(){s&G&&P.$raise(X("ArgumentError"),"flag after width"),s&ae&&P.$raise(X("ArgumentError"),"flag after precision")}function fe(){s&G&&P.$raise(X("ArgumentError"),"width given twice"),s&ae&&P.$raise(X("ArgumentError"),"width after precision")}function de(F){return F>=N.length&&P.$raise(X("ArgumentError"),"too few arguments"),N[F]}function he(){switch(t){case-1:P.$raise(X("ArgumentError"),"unnumbered("+e+") mixed with numbered");case-2:P.$raise(X("ArgumentError"),"unnumbered("+e+") mixed with named")}return t=e++,de(t-1)}function ve(F){return t>0&&P.$raise(X("ArgumentError"),"numbered("+F+") after unnumbered("+t+")"),t===-2&&P.$raise(X("ArgumentError"),"numbered("+F+") after named"),F<1&&P.$raise(X("ArgumentError"),"invalid index - "+F+"$"),t=-1,de(F-1)}function me(){return r===void 0?he():r}function be(F){for(var V,Y="";;C++){if(C===w&&P.$raise(X("ArgumentError"),"malformed format string - %*[0-9]"),j.charCodeAt(C)<48||j.charCodeAt(C)>57)return C--,V=parseInt(Y,10)||0,V>2147483647&&P.$raise(X("ArgumentError"),""+F+" too big"),V;Y+=j.charAt(C)}}function ie(F){var V,Y=be(F);return j.charAt(C+1)==="$"?(C++,V=ve(Y)):V=he(),V.$to_int()}for(C=j.indexOf("%");C!==-1;C=j.indexOf("%",C)){switch(i=void 0,s=u,b=-1,_=-1,r=void 0,M=C,C++,j.charAt(C)){case"%":E=C;case"":case`
`:case"\0":C++;continue}e:for(;C<w;C++)switch(j.charAt(C)){case" ":le(),s|=D;continue e;case"#":le(),s|=f;continue e;case"+":le(),s|=R;continue e;case"-":le(),s|=q;continue e;case"0":le(),s|=H;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(c=be("width"),j.charAt(C+1)==="$"){if(C+2===w){i="%",C++;break e}r!==void 0&&P.$raise(X("ArgumentError"),"value given twice - %"+c+"$"),r=ve(c),C++}else fe(),s|=G,b=c;continue e;case"<":case"{":for(v=j.charAt(C)==="<"?">":"}",o="",C++;;C++){if(C===w&&P.$raise(X("ArgumentError"),"malformed name - unmatched parenthesis"),j.charAt(C)===v){if(t>0&&P.$raise(X("ArgumentError"),"named "+o+" after unnumbered("+t+")"),t===-1&&P.$raise(X("ArgumentError"),"named "+o+" after numbered"),t=-2,(N[0]===void 0||!N[0].$$is_hash)&&P.$raise(X("ArgumentError"),"one hash required"),r=N[0].$fetch(o),v===">")continue e;if(i=r.toString(),_!==-1&&(i=i.slice(0,_)),s&q)for(;i.length<b;)i=i+" ";else for(;i.length<b;)i=" "+i;break e}o+=j.charAt(C)}case"*":C++,fe(),s|=G,b=ie("width"),b<0&&(s|=q,b=-b);continue e;case".":if(s&ae&&P.$raise(X("ArgumentError"),"precision given twice"),s|=te|ae,_=0,C++,j.charAt(C)==="*"){C++,_=ie("precision"),_<0&&(s&=~te);continue e}_=be("precision");continue e;case"d":case"i":case"u":if(m=P.$Integer(me()),m>=0){for(i=m.toString();i.length<_;)i="0"+i;if(s&q)for((s&R||s&D)&&(i=(s&R?"+":" ")+i);i.length<b;)i=i+" ";else if(s&H&&_===-1){for(;i.length<b-(s&R||s&D?1:0);)i="0"+i;(s&R||s&D)&&(i=(s&R?"+":" ")+i)}else for((s&R||s&D)&&(i=(s&R?"+":" ")+i);i.length<b;)i=" "+i}else{for(i=(-m).toString();i.length<_;)i="0"+i;if(s&q)for(i="-"+i;i.length<b;)i=i+" ";else if(s&H&&_===-1){for(;i.length<b-1;)i="0"+i;i="-"+i}else for(i="-"+i;i.length<b;)i=" "+i}break e;case"b":case"B":case"o":case"x":case"X":switch(j.charAt(C)){case"b":case"B":T=2,d="0b",a=/^1+/,$="1";break;case"o":T=8,d="0",a=/^3?7+/,$="7";break;case"x":case"X":T=16,d="0x",a=/^f+/,$="f";break}if(m=P.$Integer(me()),m>=0){for(i=m.toString(T);i.length<_;)i="0"+i;if(s&q)for((s&R||s&D)&&(i=(s&R?"+":" ")+i),s&f&&m!==0&&(i=d+i);i.length<b;)i=i+" ";else if(s&H&&_===-1){for(;i.length<b-(s&R||s&D?1:0)-(s&f&&m!==0?d.length:0);)i="0"+i;s&f&&m!==0&&(i=d+i),(s&R||s&D)&&(i=(s&R?"+":" ")+i)}else for(s&f&&m!==0&&(i=d+i),(s&R||s&D)&&(i=(s&R?"+":" ")+i);i.length<b;)i=" "+i}else if(s&R||s&D){for(i=(-m).toString(T);i.length<_;)i="0"+i;if(s&q)for(s&f&&(i=d+i),i="-"+i;i.length<b;)i=i+" ";else if(s&H&&_===-1){for(;i.length<b-1-(s&f?2:0);)i="0"+i;s&f&&(i=d+i),i="-"+i}else for(s&f&&(i=d+i),i="-"+i;i.length<b;)i=" "+i}else{for(i=(m>>>0).toString(T).replace(a,$);i.length<_-2;)i=$+i;if(s&q)for(i=".."+i,s&f&&(i=d+i);i.length<b;)i=i+" ";else if(s&H&&_===-1){for(;i.length<b-2-(s&f?d.length:0);)i=$+i;i=".."+i,s&f&&(i=d+i)}else for(i=".."+i,s&f&&(i=d+i);i.length<b;)i=" "+i}j.charAt(C)===j.charAt(C).toUpperCase()&&(i=i.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(m=P.$Float(me()),m>=0||isNaN(m)){if(m===1/0)i="Inf";else switch(j.charAt(C)){case"f":i=m.toFixed(_===-1?6:_);break;case"e":case"E":i=m.toExponential(_===-1?6:_);break;case"g":case"G":i=m.toExponential(),l=parseInt(i.split("e")[1],10),l<-4||l>=(_===-1?6:_)||(i=m.toPrecision(_===-1?s&f?6:void 0:_));break}if(s&q)for((s&R||s&D)&&(i=(s&R?"+":" ")+i);i.length<b;)i=i+" ";else if(s&H&&m!==1/0&&!isNaN(m)){for(;i.length<b-(s&R||s&D?1:0);)i="0"+i;(s&R||s&D)&&(i=(s&R?"+":" ")+i)}else for((s&R||s&D)&&(i=(s&R?"+":" ")+i);i.length<b;)i=" "+i}else{if(m===-1/0)i="Inf";else switch(j.charAt(C)){case"f":i=(-m).toFixed(_===-1?6:_);break;case"e":case"E":i=(-m).toExponential(_===-1?6:_);break;case"g":case"G":i=(-m).toExponential(),l=parseInt(i.split("e")[1],10),l<-4||l>=(_===-1?6:_)||(i=(-m).toPrecision(_===-1?s&f?6:void 0:_));break}if(s&q)for(i="-"+i;i.length<b;)i=i+" ";else if(s&H&&m!==-1/0){for(;i.length<b-1;)i="0"+i;i="-"+i}else for(i="-"+i;i.length<b;)i=" "+i}j.charAt(C)===j.charAt(C).toUpperCase()&&m!==1/0&&m!==-1/0&&!isNaN(m)&&(i=i.toUpperCase()),i=i.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":P.$raise(X("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(m=me(),m["$respond_to?"]("to_ary")&&(m=m.$to_ary()[0]),m["$respond_to?"]("to_str")?i=m.$to_str():i=String.fromCharCode(A(m,X("Integer"),"to_int")),i.length!==1&&P.$raise(X("ArgumentError"),"%c requires a character"),s&q)for(;i.length<b;)i=i+" ";else for(;i.length<b;)i=" "+i;break e;case"p":if(i=me().$inspect(),_!==-1&&(i=i.slice(0,_)),s&q)for(;i.length<b;)i=i+" ";else for(;i.length<b;)i=" "+i;break e;case"s":if(i=me().$to_s(),_!==-1&&(i=i.slice(0,_)),s&q)for(;i.length<b;)i=i+" ";else for(;i.length<b;)i=" "+i;break e;default:P.$raise(X("ArgumentError"),"malformed format string - %"+j.charAt(C))}i===void 0&&P.$raise(X("ArgumentError"),"malformed format string - %"),L+=j.slice(E,M)+i,E=C+1}return K.DEBUG&&t>=0&&e<N.length&&P.$raise(X("ArgumentError"),"too many arguments for format string"),L+j.slice(E)},-2),B(re,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(n){var A=n.klass,h=n.rb_plus,x=n.truthy,I=n.send,Q=n.defs,W=n.eqeq,P=n.def,K=n.return_ivar,p=n.return_val,B=n.slice,O=n.Kernel,X=n.Opal,U=n.rb_lt,re,Z=n.top,j=[],y=n.$r(j),z=n.nil,N=n.$$$;return n.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),Z.$require("corelib/string"),function(S,L,E){var M=A(S,L,"Encoding"),C=[M].concat(E),w=M.$$prototype;return w.name=w.dummy=z,Q(M,"$register",function m(i,l){var b=m.$$p||z,_=this,c=z,o=z,v=z,T=z,d=z,a=z;return m.$$p=null,l==null&&(l=new Map),c=h([i],x(o=l["$[]"]("aliases"))?o:[]),v=x(o=l["$[]"]("ascii"))&&o,T=x(o=l["$[]"]("dummy"))&&o,x(l["$[]"]("inherits"))?(d=l["$[]"]("inherits").$clone(),d.$initialize(i,c,v,T)):d=_.$new(i,c,v,T),b!==z&&I(d,"instance_eval",[],b.$to_proc()),a=n.encodings,I(c,"each",[],function $(r){var e=$.$$s==null?this:$.$$s;return r==null&&(r=z),e.$const_set(r.$tr("-","_"),d),a[r]=d},{$$s:_})},-2),Q(M,"$find",function(i){var l=this;return W(i,"default_external")?l.$default_external():n.find_encoding(i)}),M.$singleton_class().$attr_accessor("default_external"),M.$attr_reader("name","names"),P(M,"$initialize",function(i,l,b,_){var c=this;return c.name=i,c.names=l,c.ascii=b,c.dummy=_}),P(M,"$ascii_compatible?",K("ascii")),P(M,"$dummy?",K("dummy")),P(M,"$binary?",p(!1)),P(M,"$to_s",K("name")),P(M,"$inspect",function(){var i=this;return"#<Encoding:"+i.name+(x(i.dummy)?" (dummy)":z)+">"}),P(M,"$charsize",function(i){for(var l=0,b=0,_=i.length;b<_;b++){var c=i.charCodeAt(b);c>=55296&&c<=56319||l++}return l}),P(M,"$each_char",function m(i){var l=m.$$p||z;m.$$p=null;for(var b="",_=0,c=i.length;_<c;_++){var o=i.charCodeAt(_),v=i.charAt(_);if(o>=56320&&o<=57343){b=v;continue}else o>=55296&&o<=56319&&(v=b+v);i.encoding.name!="UTF-8"&&(v=new String(v),v.encoding=i.encoding),n.yield1(l,v)}}),P(M,"$each_byte",function(i){return B(arguments),O.$raise(N("NotImplementedError"))},-1),P(M,"$bytesize",function(i){return B(arguments),O.$raise(N("NotImplementedError"))},-1),A("::",N("StandardError"),"EncodingError"),A("::",N("EncodingError"),"CompatibilityError"),A(C[0],N("EncodingError"),"UndefinedConversionError"),z}("::",null,j),I(N("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function S(){var L=S.$$s==null?this:S.$$s;return P(L,"$each_byte",function E(M){var C=E.$$p||z;E.$$p=null;for(var w=1/0,m,i=M.length,l=null,b=0;b<i;++b){if(m=M.charCodeAt(b),m>55295&&m<57344){if(!l){if(m>56319){(w-=3)>-1&&(n.yield1(C,239),n.yield1(C,191),n.yield1(C,189));continue}else if(b+1===i){(w-=3)>-1&&(n.yield1(C,239),n.yield1(C,191),n.yield1(C,189));continue}l=m;continue}if(m<56320){(w-=3)>-1&&(n.yield1(C,239),n.yield1(C,191),n.yield1(C,189)),l=m;continue}m=(l-55296<<10|m-56320)+65536}else l&&(w-=3)>-1&&(n.yield1(C,239),n.yield1(C,191),n.yield1(C,189));if(l=null,m<128){if((w-=1)<0)break;n.yield1(C,m)}else if(m<2048){if((w-=2)<0)break;n.yield1(C,m>>6|192),n.yield1(C,m&63|128)}else if(m<65536){if((w-=3)<0)break;n.yield1(C,m>>12|224),n.yield1(C,m>>6&63|128),n.yield1(C,m&63|128)}else if(m<1114112){if((w-=4)<0)break;n.yield1(C,m>>18|240),n.yield1(C,m>>12&63|128),n.yield1(C,m>>6&63|128),n.yield1(C,m&63|128)}}}),P(L,"$bytesize",function(M){return M.$bytes().$length()})},{$$s:Z}),I(N("Encoding"),"register",["UTF-16LE"],function S(){var L=S.$$s==null?this:S.$$s;return P(L,"$each_byte",function E(M){var C=E.$$p||z;E.$$p=null;for(var w=0,m=M.length;w<m;w++){var i=M.charCodeAt(w);n.yield1(C,i&255),n.yield1(C,i>>8)}}),P(L,"$bytesize",function(M){return M.length*2})},{$$s:Z}),I(N("Encoding"),"register",["UTF-16BE",new Map([["inherits",N(N("Encoding"),"UTF_16LE")]])],function S(){var L=S.$$s==null?this:S.$$s;return P(L,"$each_byte",function E(M){var C=E.$$p||z;E.$$p=null;for(var w=0,m=M.length;w<m;w++){var i=M.charCodeAt(w);n.yield1(C,i>>8),n.yield1(C,i&255)}})},{$$s:Z}),I(N("Encoding"),"register",["UTF-32LE"],function S(){var L=S.$$s==null?this:S.$$s;return P(L,"$each_byte",function E(M){var C=E.$$p||z;E.$$p=null;for(var w=0,m=M.length;w<m;w++){var i=M.charCodeAt(w);n.yield1(C,i&255),n.yield1(C,i>>8),n.yield1(C,0),n.yield1(C,0)}}),P(L,"$bytesize",function(M){return M.length*4})},{$$s:Z}),I(N("Encoding"),"register",["UTF-32BE",new Map([["inherits",N(N("Encoding"),"UTF_32LE")]])],function S(){var L=S.$$s==null?this:S.$$s;return P(L,"$each_byte",function E(M){var C=E.$$p||z;E.$$p=null;for(var w=0,m=M.length;w<m;w++){var i=M.charCodeAt(w);n.yield1(C,0),n.yield1(C,0),n.yield1(C,i>>8),n.yield1(C,i&255)}})},{$$s:Z}),I(N("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function S(){var L=S.$$s==null?this:S.$$s;return P(L,"$each_char",function E(M){var C=E.$$p||z;E.$$p=null;for(var w=0,m=M.length;w<m;w++){var i=new String(M.charAt(w));i.encoding=M.encoding,n.yield1(C,i)}}),P(L,"$charsize",function(M){return M.length}),P(L,"$each_byte",function E(M){var C=E.$$p||z;E.$$p=null;for(var w=0,m=M.length;w<m;w++){var i=M.charCodeAt(w);n.yield1(C,i&255)}}),P(L,"$bytesize",function(M){return M.length}),P(L,"$binary?",p(!0))},{$$s:Z}),N("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",N(N("Encoding"),"ASCII_8BIT")]])),N("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",N(N("Encoding"),"ASCII_8BIT")]])),function(S,L){var E=A(S,L,"String"),M=E.$$prototype;return M.internal_encoding=M.bytes=M.encoding=z,E.$attr_reader("encoding"),E.$attr_reader("internal_encoding"),n.prop(String.prototype,"bytes",z),n.prop(String.prototype,"encoding",N(N("Encoding"),"UTF_8")),n.prop(String.prototype,"internal_encoding",N(N("Encoding"),"UTF_8")),P(E,"$b",function(){var w=this;return w.$dup().$force_encoding("binary")}),P(E,"$bytesize",function(){var w=this;return w.internal_encoding.$bytesize(w)}),P(E,"$each_byte",function C(){var w=C.$$p||z,m=this;return C.$$p=null,w===z?I(m,"enum_for",["each_byte"],function i(){var l=i.$$s==null?this:i.$$s;return l.$bytesize()},{$$s:m}):(I(m.internal_encoding,"each_byte",[m],w.$to_proc()),m)}),P(E,"$bytes",function(){var w=this,m=z;return typeof w=="string"?new String(w).$each_byte().$to_a():(w.bytes=x(m=w.bytes)?m:w.$each_byte().$to_a(),w.bytes.$dup())}),P(E,"$each_char",function C(){var w=C.$$p||z,m=this;return C.$$p=null,w===z?I(m,"enum_for",["each_char"],function i(){var l=i.$$s==null?this:i.$$s;return l.$length()},{$$s:m}):(I(m.encoding,"each_char",[m],w.$to_proc()),m)}),P(E,"$chars",function C(){var w=C.$$p||z,m=this;return C.$$p=null,x(w)?I(m,"each_char",[],w.$to_proc()):m.$each_char().$to_a()}),P(E,"$each_codepoint",function C(){var w=C.$$p||z,m=this;if(C.$$p=null,w===z)return m.$enum_for("each_codepoint");for(var i=0,l=m.length;i<l;i++)n.yield1(w,m.codePointAt(i));return m}),P(E,"$codepoints",function C(){var w=C.$$p||z,m=this;return C.$$p=null,w!==z?I(m,"each_codepoint",[],w.$to_proc()):m.$each_codepoint().$to_a()}),P(E,"$encode",function(w){var m=this;return n.enc(m,w)}),P(E,"$force_encoding",function(w){var m=this,i=m;return w===i.encoding||(w=X["$coerce_to!"](w,N("String"),"to_s"),w=N("Encoding").$find(w),w===i.encoding)||(i=n.set_encoding(i,w)),i}),P(E,"$getbyte",function(w){var m=this,i=z;return i=m.$bytes(),w=X["$coerce_to!"](w,N("Integer"),"to_int"),x(U(i.$length(),w))?z:i["$[]"](w)}),P(E,"$initialize_copy",function(w){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),P(E,"$valid_encoding?",p(!0))}("::",null),re=[N(y("Encoding"),"UTF_8")],I(N("Encoding"),"default_external=",re),re[re.length-1]};Opal.modules["corelib/math"]=function(n){var A=n.type_error,h=n.module,x=n.const_set,I=n.Class,Q=n.slice,W=n.Kernel,P=n.defs,K=n.truthy,p=n.send,B=n.def,O=n.rb_minus,X=n.eqeqeq,U=n.rb_divide,re=[],Z=n.nil,j=n.$$$;return n.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(y,z){var N=h(y,"Math"),S=[N].concat(z),L=n.$r(S);return x(N,"E",Math.E),x(N,"PI",Math.PI),x(N,"DomainError",I.$new(j("StandardError"))),P(N,"$checked",function(M,C){var w,m;if(w=Q(arguments,1),m=w,isNaN(m[0])||m.length==2&&isNaN(m[1]))return NaN;var i=Math[M].apply(null,m);return isNaN(i)&&W.$raise(L("DomainError"),'Numerical argument is out of domain - "'+M+'"'),i},-2),P(N,"$float!",function(M){try{return W.$Float(M)}catch(C){if(n.rescue(C,[j("ArgumentError")]))try{return W.$raise(A(M,j("Float")))}finally{n.pop_exception(C)}else throw C}}),P(N,"$integer!",function(M){try{return W.$Integer(M)}catch(C){if(n.rescue(C,[j("ArgumentError")]))try{return W.$raise(A(M,j("Integer")))}finally{n.pop_exception(C)}else throw C}}),N.$module_function(),K(typeof Math.erf<"u")||n.prop(Math,"erf",function(E){var M=.254829592,C=-.284496736,w=1.421413741,m=-1.453152027,i=1.061405429,l=.3275911,b=1;E<0&&(b=-1),E=Math.abs(E);var _=1/(1+l*E),c=1-((((i*_+m)*_+w)*_+C)*_+M)*_*Math.exp(-E*E);return b*c}),K(typeof Math.erfc<"u")||n.prop(Math,"erfc",function(E){var M=Math.abs(E),C=1/(.5*M+1),w=C*.17087277+-.82215223,m=C*w+1.48851587,i=C*m+-1.13520398,l=C*i+.27886807,b=C*l+-.18628806,_=C*b+.09678418,c=C*_+.37409196,o=C*c+1.00002368,v=C*o,T=-M*M-1.26551223+v,d=C*Math.exp(T);return E<0?2-d:d}),p(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function E(M){var C=E.$$s==null?this:E.$$s;return M==null&&(M=Z),p(C,"define_method",[M],function(m){return m==null&&(m=Z),j("Math").$checked(M,j("Math")["$float!"](m))})},{$$s:N}),B(N,"$atan2",function(M,C){return j("Math").$checked("atan2",j("Math")["$float!"](M),j("Math")["$float!"](C))}),B(N,"$hypot",function(M,C){return j("Math").$checked("hypot",j("Math")["$float!"](M),j("Math")["$float!"](C))}),B(N,"$frexp",function(M){if(M=L("Math")["$float!"](M),isNaN(M))return[NaN,0];var C=Math.floor(Math.log(Math.abs(M))/Math.log(2))+1,w=M/Math.pow(2,C);return[w,C]}),B(N,"$gamma",function(M){M=L("Math")["$float!"](M);var C,w,m,i,l,b,_,c,o,v=4.7421875,T=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(M))return NaN;if(M===0&&1/M<0)return-1/0;if((M===-1||M===-1/0)&&W.$raise(L("DomainError"),'Numerical argument is out of domain - "gamma"'),L("Integer")["$==="](M)){if(M<=0)return isFinite(M)?1/0:NaN;if(M>171)return 1/0;for(i=M-2,l=M-1;i>1;)l*=i,i--;return l==0&&(l=1),l}if(M<.5)return Math.PI/(Math.sin(Math.PI*M)*j("Math").$gamma(O(1,M)));if(M>=171.35)return 1/0;if(M>85)return b=M*M,_=b*M,c=_*M,o=c*M,Math.sqrt(2*Math.PI/M)*Math.pow(M/Math.E,M)*(1+1/(12*M)+1/(288*b)-139/(51840*_)-571/(2488320*c)+163879/(209018880*o)+5246819/(75246796800*o*M));for(M-=1,m=T[0],C=1;C<T.length;++C)m+=T[C]/(M+C);return w=M+v+.5,Math.sqrt(2*Math.PI)*Math.pow(w,M+.5)*Math.exp(-w)*m}),B(N,"$ldexp",function(M,C){return M=L("Math")["$float!"](M),C=L("Math")["$integer!"](C),isNaN(C)&&W.$raise(j("RangeError"),"float NaN out of range of integer"),M*Math.pow(2,C)}),B(N,"$lgamma",function(M){return M==-1?[1/0,1]:[Math.log(Math.abs(j("Math").$gamma(M))),j("Math").$gamma(M)<0?-1:1]}),B(N,"$log",function(M,C){return X(j("String"),M)&&W.$raise(A(M,j("Float"))),K(C==null)?j("Math").$checked("log",j("Math")["$float!"](M)):(X(j("String"),C)&&W.$raise(A(C,j("Float"))),U(j("Math").$checked("log",j("Math")["$float!"](M)),j("Math").$checked("log",j("Math")["$float!"](C))))},-2),B(N,"$log10",function(M){return X(j("String"),M)&&W.$raise(A(M,j("Float"))),j("Math").$checked("log10",j("Math")["$float!"](M))}),B(N,"$log2",function(M){return X(j("String"),M)&&W.$raise(A(M,j("Float"))),j("Math").$checked("log2",j("Math")["$float!"](M))}),B(N,"$tan",function(M){return M=j("Math")["$float!"](M),K(M["$infinite?"]())?j(j("Float"),"NAN"):j("Math").$checked("tan",j("Math")["$float!"](M))})}("::",re)};Opal.modules["corelib/complex/base"]=function(n){var A=n.module,h=n.truthy,x=n.def,I=n.klass,Q=[],W=n.nil;return n.add_stubs("new,from_string"),function(P,K){var p=A(P,"Kernel"),B=[p].concat(K),O=n.$r(B);return x(p,"$Complex",function(U,re){return re==null&&(re=W),h(re)?O("Complex").$new(U,re):O("Complex").$new(U,0)},-2)}("::",Q),function(P,K,p){var B=I(P,K,"String"),O=[B].concat(p),X=n.$r(O);return x(B,"$to_c",function(){var re=this;return X("Complex").$from_string(re)})}("::",null,Q)};Opal.modules["corelib/complex"]=function(n){var A=n.klass,h=n.truthy,x=n.eqeqeq,I=n.Kernel,Q=n.defs,W=n.rb_times,P=n.def,K=n.rb_plus,p=n.rb_minus,B=n.rb_divide,O=n.eqeq,X=n.to_ary,U=n.rb_gt,re=n.neqeq,Z=n.return_val,j=n.const_set,y=n.alias,z=n.top,N=[],S=n.nil,L=n.$$$;return n.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),z.$require("corelib/numeric"),z.$require("corelib/complex/base"),function(E,M,C){var w=A(E,M,"Complex"),m=[w].concat(C),i=n.$r(m),l=w.$$prototype;return l.real=l.imag=S,Q(w,"$rect",function(_,c){var o=this;return c==null&&(c=0),x(L("Numeric"),_)&&h(_["$real?"]())&&x(L("Numeric"),c)&&h(c["$real?"]())||I.$raise(L("TypeError"),"not a real"),o.$new(_,c)},-2),Q(w,"$polar",function(_,c){var o=this;return c==null&&(c=0),x(L("Numeric"),_)&&h(_["$real?"]())&&x(L("Numeric"),c)&&h(c["$real?"]())||I.$raise(L("TypeError"),"not a real"),o.$new(W(_,L("Math").$cos(c)),W(_,L("Math").$sin(c)))},-2),w.$attr_reader("real","imag"),P(w,"$initialize",function(_,c){var o=this;return c==null&&(c=0),o.real=_,o.imag=c,o.$freeze()},-2),P(w,"$coerce",function(_){var c=this;return x(L("Complex"),_)?[_,c]:x(L("Numeric"),_)&&h(_["$real?"]())?[L("Complex").$new(_,0),c]:I.$raise(L("TypeError"),""+_.$class()+" can't be coerced into Complex")}),P(w,"$==",function(_){var c=this,o=S;return x(L("Complex"),_)?h(o=c.real["$=="](_.$real()))?c.imag["$=="](_.$imag()):o:x(L("Numeric"),_)&&h(_["$real?"]())?h(o=c.real["$=="](_))?c.imag["$=="](0):o:_["$=="](c)}),P(w,"$-@",function(){var _=this;return I.$Complex(_.real["$-@"](),_.imag["$-@"]())}),P(w,"$+",function(_){var c=this;return x(L("Complex"),_)?I.$Complex(K(c.real,_.$real()),K(c.imag,_.$imag())):x(L("Numeric"),_)&&h(_["$real?"]())?I.$Complex(K(c.real,_),c.imag):c.$__coerced__("+",_)}),P(w,"$-",function(_){var c=this;return x(L("Complex"),_)?I.$Complex(p(c.real,_.$real()),p(c.imag,_.$imag())):x(L("Numeric"),_)&&h(_["$real?"]())?I.$Complex(p(c.real,_),c.imag):c.$__coerced__("-",_)}),P(w,"$*",function(_){var c=this;return x(L("Complex"),_)?I.$Complex(p(W(c.real,_.$real()),W(c.imag,_.$imag())),K(W(c.real,_.$imag()),W(c.imag,_.$real()))):x(L("Numeric"),_)&&h(_["$real?"]())?I.$Complex(W(c.real,_),W(c.imag,_)):c.$__coerced__("*",_)}),P(w,"$/",function(_){var c=this;return x(L("Complex"),_)?x(L("Number"),c.real)&&h(c.real["$nan?"]())||x(L("Number"),c.imag)&&h(c.imag["$nan?"]())||x(L("Number"),_.$real())&&h(_.$real()["$nan?"]())||x(L("Number"),_.$imag())&&h(_.$imag()["$nan?"]())?L("Complex").$new(L(L("Float"),"NAN"),L(L("Float"),"NAN")):B(W(c,_.$conj()),_.$abs2()):x(L("Numeric"),_)&&h(_["$real?"]())?I.$Complex(c.real.$quo(_),c.imag.$quo(_)):c.$__coerced__("/",_)}),P(w,"$**",function(_){var c,o,v=this,T=S,d=S,a=S,$=S,r=S,e=S,t=S,s=S,u=S,f=S,q=S;if(O(_,0))return L("Complex").$new(1,0);if(x(L("Complex"),_))return o=v.$polar(),c=X(o),T=c[0]==null?S:c[0],d=c[1]==null?S:c[1],a=_.$real(),$=_.$imag(),r=L("Math").$exp(p(W(a,L("Math").$log(T)),W($,d))),e=K(W(d,a),W($,L("Math").$log(T))),L("Complex").$polar(r,e);if(x(L("Integer"),_))if(h(U(_,0))){for(t=v,s=t,u=p(_,1);re(u,0);){for(o=u.$divmod(2),c=X(o),f=c[0]==null?S:c[0],q=c[1]==null?S:c[1];O(q,0);)t=I.$Complex(p(W(t.$real(),t.$real()),W(t.$imag(),t.$imag())),W(W(2,t.$real()),t.$imag())),u=f,o=u.$divmod(2),c=X(o),f=c[0]==null?S:c[0],q=c[1]==null?S:c[1];s=W(s,t),u=p(u,1)}return s}else return B(L("Rational").$new(1,1),v)["$**"](_["$-@"]());else return x(L("Float"),_)||x(L("Rational"),_)?(o=v.$polar(),c=X(o),T=c[0]==null?S:c[0],d=c[1]==null?S:c[1],L("Complex").$polar(T["$**"](_),W(d,_))):v.$__coerced__("**",_)}),P(w,"$abs",function(){var _=this;return L("Math").$hypot(_.real,_.imag)}),P(w,"$abs2",function(){var _=this;return K(W(_.real,_.real),W(_.imag,_.imag))}),P(w,"$angle",function(){var _=this;return L("Math").$atan2(_.imag,_.real)}),P(w,"$conj",function(){var _=this;return I.$Complex(_.real,_.imag["$-@"]())}),P(w,"$denominator",function(){var _=this;return _.real.$denominator().$lcm(_.imag.$denominator())}),P(w,"$eql?",function(_){var c=this,o=S,v=S;return h(o=h(v=i("Complex")["$==="](_))?c.real.$class()["$=="](c.imag.$class()):v)?c["$=="](_):o}),P(w,"$fdiv",function(_){var c=this;return x(L("Numeric"),_)||I.$raise(L("TypeError"),""+_.$class()+" can't be coerced into Complex"),B(c,_)}),P(w,"$finite?",function(){var _=this,c=S;return h(c=_.real["$finite?"]())?_.imag["$finite?"]():c}),P(w,"$hash",function(){var _=this;return[L("Complex"),_.real,_.imag].$hash()}),P(w,"$infinite?",function(){var _=this,c=S;return h(c=_.real["$infinite?"]())?c:_.imag["$infinite?"]()}),P(w,"$inspect",function(){var _=this;return"("+_+")"}),P(w,"$numerator",function(){var _=this,c=S;return c=_.$denominator(),I.$Complex(W(_.real.$numerator(),B(c,_.real.$denominator())),W(_.imag.$numerator(),B(c,_.imag.$denominator())))}),P(w,"$polar",function(){var _=this;return[_.$abs(),_.$arg()]}),P(w,"$rationalize",function(_){var c=this;return arguments.length>1&&I.$raise(L("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),re(c.imag,0)&&I.$raise(L("RangeError"),"can't convert "+c+" into Rational"),c.$real().$rationalize(_)},-1),P(w,"$real?",Z(!1)),P(w,"$rect",function(){var _=this;return[_.real,_.imag]}),P(w,"$to_f",function(){var _=this;return O(_.imag,0)||I.$raise(L("RangeError"),"can't convert "+_+" into Float"),_.real.$to_f()}),P(w,"$to_i",function(){var _=this;return O(_.imag,0)||I.$raise(L("RangeError"),"can't convert "+_+" into Integer"),_.real.$to_i()}),P(w,"$to_r",function(){var _=this;return O(_.imag,0)||I.$raise(L("RangeError"),"can't convert "+_+" into Rational"),_.real.$to_r()}),P(w,"$to_s",function(){var _=this,c=S;return c=_.real.$inspect(),c=K(c,x(L("Number"),_.imag)&&h(_.imag["$nan?"]())||h(_.imag["$positive?"]())||h(_.imag["$zero?"]())?"+":"-"),c=K(c,_.imag.$abs().$inspect()),x(L("Number"),_.imag)&&(h(_.imag["$nan?"]())||h(_.imag["$infinite?"]()))&&(c=K(c,"*")),K(c,"i")}),j(m[0],"I",w.$new(0,1)),Q(w,"$from_string",function(_){var c=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;_.match(c);var o,v;function T(){return c.test(_)}function d(){var $=_.match(c),r=$[0];return _=_.slice(r.length),r.replace(/_/g,"")}function a(){if(T()){var $=parseFloat(d());if(_[0]==="/")if(_=_.slice(1),T()){var r=parseFloat(d());return I.$Rational($,r)}else return _="/"+_,$;else return $}else return null}return o=a(),o?(v=a(),v?I.$Complex(o,v):_[0]==="i"?I.$Complex(0,o):I.$Complex(o,0)):_[0]==="i"?I.$Complex(0,1):_[0]==="-"&&_[1]==="i"?I.$Complex(0,-1):_[0]==="+"&&_[1]==="i"?I.$Complex(0,1):I.$Complex(0,0)}),function(b,_){return y(b,"rectangular","rect")}(n.get_singleton_class(w)),y(w,"arg","angle"),y(w,"conjugate","conj"),y(w,"divide","/"),y(w,"imaginary","imag"),y(w,"magnitude","abs"),y(w,"phase","arg"),y(w,"quo","/"),y(w,"rectangular","rect"),n.udef(w,"$negative?"),n.udef(w,"$positive?"),n.udef(w,"$step"),S}("::",L("Numeric"),N)};Opal.modules["corelib/rational/base"]=function(n){var A=n.module,h=n.def,x=n.klass;n.nil;var I=n.$$$;return n.add_stubs("convert,from_string"),function(Q){var W=A(Q,"Kernel");return h(W,"$Rational",function(K,p){return p==null&&(p=1),I("Rational").$convert(K,p)},-2)}("::"),function(Q,W){var P=x(Q,W,"String");return h(P,"$to_r",function(){var p=this;return I("Rational").$from_string(p)})}("::",null)};Opal.modules["corelib/rational"]=function(n){var A=n.klass,h=n.eqeq,x=n.Kernel,I=n.truthy,Q=n.rb_lt,W=n.rb_divide,P=n.defs,K=n.eqeqeq,p=n.not,B=n.Opal,O=n.def,X=n.return_ivar,U=n.rb_minus,re=n.rb_times,Z=n.rb_plus,j=n.rb_gt,y=n.rb_le,z=n.return_self,N=n.alias,S=n.top,L=n.nil,E=n.$$$;return n.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),S.$require("corelib/numeric"),S.$require("corelib/rational/base"),function(M,C){var w=A(M,C,"Rational"),m=w.$$prototype;return m.num=m.den=L,P(w,"$reduce",function(l,b){var _=this,c=L;if(l=l.$to_i(),b=b.$to_i(),h(b,0))x.$raise(E("ZeroDivisionError"),"divided by 0");else if(I(Q(b,0)))l=l["$-@"](),b=b["$-@"]();else if(h(b,1))return _.$new(l,b);return c=l.$gcd(b),_.$new(W(l,c),W(b,c))}),P(w,"$convert",function(l,b){var _=this;return(I(l["$nil?"]())||I(b["$nil?"]()))&&x.$raise(E("TypeError"),"cannot convert nil into Rational"),K(E("Integer"),l)&&K(E("Integer"),b)?_.$reduce(l,b):((K(E("Float"),l)||K(E("String"),l)||K(E("Complex"),l))&&(l=l.$to_r()),(K(E("Float"),b)||K(E("String"),b)||K(E("Complex"),b))&&(b=b.$to_r()),I(b["$equal?"](1))&&p(E("Integer")["$==="](l))?B["$coerce_to!"](l,E("Rational"),"to_r"):K(E("Numeric"),l)&&K(E("Numeric"),b)?W(l,b):_.$reduce(l,b))}),O(w,"$initialize",function(l,b){var _=this;return _.num=l,_.den=b,_.$freeze()}),O(w,"$numerator",X("num")),O(w,"$denominator",X("den")),O(w,"$coerce",function(l){var b=this,_=L;return K(E("Rational"),_=l)?[l,b]:K(E("Integer"),_)?[l.$to_r(),b]:K(E("Float"),_)?[l,b.$to_f()]:L}),O(w,"$==",function(l){var b=this,_=L,c=L;return K(E("Rational"),_=l)?I(c=b.num["$=="](l.$numerator()))?b.den["$=="](l.$denominator()):c:K(E("Integer"),_)?I(c=b.num["$=="](l))?b.den["$=="](1):c:K(E("Float"),_)?b.$to_f()["$=="](l):l["$=="](b)}),O(w,"$<=>",function(l){var b=this,_=L;return K(E("Rational"),_=l)?U(re(b.num,l.$denominator()),re(b.den,l.$numerator()))["$<=>"](0):K(E("Integer"),_)?U(b.num,re(b.den,l))["$<=>"](0):K(E("Float"),_)?b.$to_f()["$<=>"](l):b.$__coerced__("<=>",l)}),O(w,"$+",function(l){var b=this,_=L,c=L,o=L;return K(E("Rational"),_=l)?(c=Z(re(b.num,l.$denominator()),re(b.den,l.$numerator())),o=re(b.den,l.$denominator()),x.$Rational(c,o)):K(E("Integer"),_)?x.$Rational(Z(b.num,re(l,b.den)),b.den):K(E("Float"),_)?Z(b.$to_f(),l):b.$__coerced__("+",l)}),O(w,"$-",function(l){var b=this,_=L,c=L,o=L;return K(E("Rational"),_=l)?(c=U(re(b.num,l.$denominator()),re(b.den,l.$numerator())),o=re(b.den,l.$denominator()),x.$Rational(c,o)):K(E("Integer"),_)?x.$Rational(U(b.num,re(l,b.den)),b.den):K(E("Float"),_)?U(b.$to_f(),l):b.$__coerced__("-",l)}),O(w,"$*",function(l){var b=this,_=L,c=L,o=L;return K(E("Rational"),_=l)?(c=re(b.num,l.$numerator()),o=re(b.den,l.$denominator()),x.$Rational(c,o)):K(E("Integer"),_)?x.$Rational(re(b.num,l),b.den):K(E("Float"),_)?re(b.$to_f(),l):b.$__coerced__("*",l)}),O(w,"$/",function(l){var b=this,_=L,c=L,o=L;return K(E("Rational"),_=l)?(c=re(b.num,l.$denominator()),o=re(b.den,l.$numerator()),x.$Rational(c,o)):K(E("Integer"),_)?h(l,0)?W(b.$to_f(),0):x.$Rational(b.num,re(b.den,l)):K(E("Float"),_)?W(b.$to_f(),l):b.$__coerced__("/",l)}),O(w,"$**",function(l){var b=this,_=L;return K(E("Integer"),_=l)?h(b,0)&&I(Q(l,0))?E(E("Float"),"INFINITY"):I(j(l,0))?x.$Rational(b.num["$**"](l),b.den["$**"](l)):I(Q(l,0))?x.$Rational(b.den["$**"](l["$-@"]()),b.num["$**"](l["$-@"]())):x.$Rational(1,1):K(E("Float"),_)?b.$to_f()["$**"](l):K(E("Rational"),_)?h(l,0)?x.$Rational(1,1):h(l.$denominator(),1)?I(Q(l,0))?x.$Rational(b.den["$**"](l.$numerator().$abs()),b.num["$**"](l.$numerator().$abs())):x.$Rational(b.num["$**"](l.$numerator()),b.den["$**"](l.$numerator())):h(b,0)&&I(Q(l,0))?x.$raise(E("ZeroDivisionError"),"divided by 0"):b.$to_f()["$**"](l):b.$__coerced__("**",l)}),O(w,"$abs",function(){var l=this;return x.$Rational(l.num.$abs(),l.den.$abs())}),O(w,"$ceil",function(l){var b=this;return l==null&&(l=0),h(l,0)?W(b.num["$-@"](),b.den)["$-@"]().$ceil():b.$with_precision("ceil",l)},-1),O(w,"$floor",function(l){var b=this;return l==null&&(l=0),h(l,0)?W(b.num["$-@"](),b.den)["$-@"]().$floor():b.$with_precision("floor",l)},-1),O(w,"$hash",function(){var l=this;return[E("Rational"),l.num,l.den].$hash()}),O(w,"$inspect",function(){var l=this;return"("+l+")"}),O(w,"$rationalize",function(l){var b=this;if(arguments.length>1&&x.$raise(E("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),l==null)return b;for(var _=l.$abs(),c=U(b,_),o=Z(b,_),v=0,T=1,d=1,a=0,$,r,e,t,s;e=c.$ceil(),!y(e,o);)t=e-1,$=t*T+v,r=t*a+d,s=W(1,U(o,t)),o=W(1,U(c,t)),c=s,v=T,d=a,T=$,a=r;return x.$Rational(e*T+v,e*a+d)},-1),O(w,"$round",function(l){var b=this,_=L,c=L,o=L;return l==null&&(l=0),h(l,0)?h(b.num,0)?0:h(b.den,1)?b.num:(_=Z(re(b.num.$abs(),2),b.den),c=re(b.den,2),o=W(_,c).$truncate(),I(Q(b.num,0))?o["$-@"]():o):b.$with_precision("round",l)},-1),O(w,"$to_f",function(){var l=this;return W(l.num,l.den)}),O(w,"$to_i",function(){var l=this;return l.$truncate()}),O(w,"$to_r",z),O(w,"$to_s",function(){var l=this;return""+l.num+"/"+l.den}),O(w,"$truncate",function(l){var b=this;return l==null&&(l=0),h(l,0)?I(Q(b.num,0))?b.$ceil():b.$floor():b.$with_precision("truncate",l)},-1),O(w,"$with_precision",function(l,b){var _=this,c=L,o=L;return K(E("Integer"),b)||x.$raise(E("TypeError"),"not an Integer"),c=10["$**"](b),o=re(_,c),I(Q(b,1))?W(o.$send(l),c).$to_i():x.$Rational(o.$send(l),c)}),P(w,"$from_string",function(l){var b=l.trimLeft(),_=/^[+-]?[\d_]+(\.[\d_]+)?/;b.match(_);var c,o;function v(){return _.test(b)}function T(){var d=b.match(_),a=d[0];return b=b.slice(a.length),a.replace(/_/g,"")}return v()?(c=parseFloat(T()),b[0]==="/"?(b=b.slice(1),v()?(o=parseFloat(T()),x.$Rational(c,o)):x.$Rational(c,1)):x.$Rational(c,1)):x.$Rational(0,1)}),N(w,"divide","/"),N(w,"quo","/")}("::",E("Numeric"))};Opal.modules["corelib/time"]=function(n){var A=n.slice,h=n.deny_frozen_access,x=n.klass,I=n.Kernel,Q=n.Opal,W=n.defs,P=n.eqeqeq,K=n.def,p=n.truthy,B=n.rb_gt,O=n.rb_lt,X=n.send,U=n.rb_plus,re=n.rb_divide,Z=n.rb_minus,j=n.range,y=n.neqeq,z=n.rb_le,N=n.eqeq,S=n.alias,L=n.top,E=[],M=n.nil,C=n.$$$;return n.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),L.$require("corelib/comparable"),function(w,m,i){var l=x(w,m,"Time"),b=[l].concat(i),_=n.$r(b);l.$include(C("Comparable"));var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],T=["January","February","March","April","May","June","July","August","September","October","November","December"];W(l,"$at",function($,r){var e;return C("Time")["$==="]($)?(r!==void 0&&I.$raise(C("TypeError"),"can't convert Time into an exact number"),e=new Date($.getTime()),e.timezone=$.timezone,e):($.$$is_number||($=Q["$coerce_to!"]($,C("Integer"),"to_int")),r===void 0?new Date($*1e3):(r.$$is_number||(r=Q["$coerce_to!"](r,C("Integer"),"to_int")),new Date($*1e3+r/1e3)))},-2);function d(a,$,r,e,t,s){if(a.$$is_string?a=parseInt(a,10):a=Q["$coerce_to!"](a,C("Integer"),"to_int"),$===M)$=1;else if(!$.$$is_number)if($["$respond_to?"]("to_str"))switch($=$.$to_str(),$.toLowerCase()){case"jan":$=1;break;case"feb":$=2;break;case"mar":$=3;break;case"apr":$=4;break;case"may":$=5;break;case"jun":$=6;break;case"jul":$=7;break;case"aug":$=8;break;case"sep":$=9;break;case"oct":$=10;break;case"nov":$=11;break;case"dec":$=12;break;default:$=$.$to_i()}else $=Q["$coerce_to!"]($,C("Integer"),"to_int");return($<1||$>12)&&I.$raise(C("ArgumentError"),"month out of range: "+$),$=$-1,r===M?r=1:r.$$is_string?r=parseInt(r,10):r=Q["$coerce_to!"](r,C("Integer"),"to_int"),(r<1||r>31)&&I.$raise(C("ArgumentError"),"day out of range: "+r),e===M?e=0:e.$$is_string?e=parseInt(e,10):e=Q["$coerce_to!"](e,C("Integer"),"to_int"),(e<0||e>24)&&I.$raise(C("ArgumentError"),"hour out of range: "+e),t===M?t=0:t.$$is_string?t=parseInt(t,10):t=Q["$coerce_to!"](t,C("Integer"),"to_int"),(t<0||t>59)&&I.$raise(C("ArgumentError"),"min out of range: "+t),s===M?s=0:s.$$is_number||(s.$$is_string?s=parseInt(s,10):s=Q["$coerce_to!"](s,C("Integer"),"to_int")),(s<0||s>60)&&I.$raise(C("ArgumentError"),"sec out of range: "+s),[a,$,r,e,t,s]}return W(l,"$new",function($,r,e,t,s,u,f){var q=this;r==null&&(r=M),e==null&&(e=M),t==null&&(t=M),s==null&&(s=M),u==null&&(u=M),f==null&&(f=M);var R,H,D,G;return $===void 0?new Date:(R=d($,r,e,t,s,u),$=R[0],r=R[1],e=R[2],t=R[3],s=R[4],u=R[5],f===M?(H=new Date($,r,e,t,s,0,u*1e3),$<100&&H.setFullYear($),H):(D=q.$_parse_offset(f),G=new Date(Date.UTC($,r,e,t,s,0,u*1e3)),$<100&&G.setUTCFullYear($),H=new Date(G.getTime()-D*36e5),H.timezone=D,H))},-1),W(l,"$_parse_offset",function($){var r;if($.$$is_string)if($=="UTC")r=0;else if(/^[+-]\d\d:[0-5]\d$/.test($)){var e,t,s;e=$[0],t=+($[1]+$[2]),s=+($[4]+$[5]),r=(e=="-"?-1:1)*(t+s/60)}else I.$raise(C("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+$);else $.$$is_number?r=$/3600:I.$raise(C("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return r}),W(l,"$local",function($,r,e,t,s,u,f,q,R,H){r==null&&(r=M),e==null&&(e=M),t==null&&(t=M),s==null&&(s=M),u==null&&(u=M),f==null&&(f=M),q==null&&(q=M),R==null&&(R=M),H==null&&(H=M);var D,G;return arguments.length===10&&(D=A(arguments),$=D[5],r=D[4],e=D[3],t=D[2],s=D[1],u=D[0]),D=d($,r,e,t,s,u),$=D[0],r=D[1],e=D[2],t=D[3],s=D[4],u=D[5],G=new Date($,r,e,t,s,0,u*1e3),$<100&&G.setFullYear($),G},-2),W(l,"$gm",function($,r,e,t,s,u,f,q,R,H){r==null&&(r=M),e==null&&(e=M),t==null&&(t=M),s==null&&(s=M),u==null&&(u=M),f==null&&(f=M),q==null&&(q=M),R==null&&(R=M),H==null&&(H=M);var D,G;return arguments.length===10&&(D=A(arguments),$=D[5],r=D[4],e=D[3],t=D[2],s=D[1],u=D[0]),D=d($,r,e,t,s,u),$=D[0],r=D[1],e=D[2],t=D[3],s=D[4],u=D[5],G=new Date(Date.UTC($,r,e,t,s,0,u*1e3)),$<100&&G.setUTCFullYear($),G.timezone=0,G},-2),W(l,"$now",function(){var $=this;return $.$new()}),K(l,"$+",function($){var r=this;P(C("Time"),$)&&I.$raise(C("TypeError"),"time + time?"),$.$$is_number||($=Q["$coerce_to!"]($,C("Integer"),"to_int"));var e=new Date(r.getTime()+$*1e3);return e.timezone=r.timezone,e}),K(l,"$-",function($){var r=this;if(P(C("Time"),$))return(r.getTime()-$.getTime())/1e3;$.$$is_number||($=Q["$coerce_to!"]($,C("Integer"),"to_int"));var e=new Date(r.getTime()-$*1e3);return e.timezone=r.timezone,e}),K(l,"$<=>",function($){var r=this,e=M;return P(C("Time"),$)?r.$to_f()["$<=>"]($.$to_f()):(e=$["$<=>"](r),p(e["$nil?"]())?M:p(B(e,0))?-1:p(O(e,0))?1:0)}),K(l,"$==",function($){var r=this,e=M;return p(e=C("Time")["$==="]($))?r.$to_f()===$.$to_f():e}),K(l,"$asctime",function(){var $=this;return $.$strftime("%a %b %e %H:%M:%S %Y")}),X([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function a($,r,e,t){var s=a.$$s==null?this:a.$$s;return $==null&&($=M),r==null&&(r=M),e==null&&(e=M),t==null&&(t=0),X(s,"define_method",[$],function u(){var f=u.$$s==null?this:u.$$s;return t+(f.timezone!=null?new Date(f.getTime()+f.timezone*36e5)[e]():f[r]())},{$$s:s})},{$$arity:-4,$$s:l}),K(l,"$yday",function(){var $=this,r=M,e=M,t=M;return r=_("Time").$new($.$year()).$to_i(),e=_("Time").$new($.$year(),$.$month(),$.$day()).$to_i(),t=86400,U(re(Z(e,r),t).$round(),1)}),K(l,"$isdst",function(){var $=this,r=new Date($.getFullYear(),0,1),e=new Date($.getFullYear(),6,1);return $.getTimezoneOffset()<Math.max(r.getTimezoneOffset(),e.getTimezoneOffset())}),K(l,"$dup",function(){var $=this,r=M;return r=new Date($.getTime()),r.$copy_instance_variables($),r.$initialize_dup($),r}),K(l,"$eql?",function($){var r=this,e=M;return p(e=$["$is_a?"](C("Time")))?r["$<=>"]($)["$zero?"]():e}),X([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function a($,r){var e=a.$$s==null?this:a.$$s;return $==null&&($=M),r==null&&(r=M),X(e,"define_method",[$],function t(){var s=t.$$s==null?this:t.$$s;return s.$wday()===r},{$$s:e})},{$$s:l}),K(l,"$hash",function(){var $=this;return[C("Time"),$.getTime()].$hash()}),K(l,"$inspect",function(){var $=this;return p($["$utc?"]())?$.$strftime("%Y-%m-%d %H:%M:%S UTC"):$.$strftime("%Y-%m-%d %H:%M:%S %z")}),K(l,"$succ",function(){var $=this,r=new Date($.getTime()+1e3);return r.timezone=$.timezone,r}),K(l,"$usec",function(){var $=this;return $.getMilliseconds()*1e3}),K(l,"$zone",function(){var $=this;if($.timezone===0)return"UTC";if($.timezone!=null)return M;var r=$.toString(),e;return r.indexOf("(")==-1?e=r.match(/[A-Z]{3,4}/)[0]:e=r.match(/\((.+)\)(?:\s|$)/)[1],e=="GMT"&&/(GMT\W*\d{4})/.test(r)?RegExp.$1:e}),K(l,"$getgm",function(){var $=this,r=new Date($.getTime());return r.timezone=0,r}),K(l,"$gmtime",function(){var $=this;return $.timezone!==0&&(h($),$.timezone=0),$}),K(l,"$gmt?",function(){var $=this;return $.timezone===0}),K(l,"$gmt_offset",function(){var $=this;return $.timezone!=null?$.timezone*60:-$.getTimezoneOffset()*60}),K(l,"$strftime",function($){var r=this;return $.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,t,s,u,f){var q="",R,H,D,G=t.indexOf("0")!==-1,te=t.indexOf("-")===-1,ae=t.indexOf("_")!==-1,le=t.indexOf("^")!==-1,fe=t.indexOf("#")!==-1,de=(t.match(":")||[]).length;switch(s=parseInt(s,10),G&&ae&&(t.indexOf("0")<t.indexOf("_")?G=!1:ae=!1),f){case"Y":q+=r.$year();break;case"C":G=!ae,q+=Math.round(r.$year()/100);break;case"y":G=!ae,q+=r.$year()%100;break;case"m":G=!ae,q+=r.$mon();break;case"B":q+=T[r.$mon()-1];break;case"b":case"h":ae=!G,q+=v[r.$mon()-1];break;case"d":G=!ae,q+=r.$day();break;case"e":ae=!G,q+=r.$day();break;case"j":G=!ae,s=isNaN(s)?3:s,q+=r.$yday();break;case"H":G=!ae,q+=r.$hour();break;case"k":ae=!G,q+=r.$hour();break;case"I":G=!ae,q+=r.$hour()%12||12;break;case"l":ae=!G,q+=r.$hour()%12||12;break;case"P":q+=r.$hour()>=12?"pm":"am";break;case"p":q+=r.$hour()>=12?"PM":"AM";break;case"M":G=!ae,q+=r.$min();break;case"S":G=!ae,q+=r.$sec();break;case"L":G=!ae,s=isNaN(s)?3:s,q+=r.getMilliseconds();break;case"N":s=isNaN(s)?9:s,q+=r.getMilliseconds().toString().$rjust(3,"0"),q=q.$ljust(s,"0");break;case"z":var he=r.timezone==null?r.getTimezoneOffset():-r.timezone*60,ve=Math.floor(Math.abs(he)/60),me=Math.abs(he)%60;q+=he<0?"+":"-",q+=ve<10?"0":"",q+=ve,de>0&&(q+=":"),q+=me<10?"0":"",q+=me,de>1&&(q+=":00");break;case"Z":q+=r.$zone();break;case"A":q+=c[r.$wday()];break;case"a":q+=o[r.$wday()];break;case"u":q+=r.$wday()+1;break;case"w":q+=r.$wday();break;case"V":q+=r.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":q+=r.$cweek_cyear()["$[]"](1);break;case"g":q+=r.$cweek_cyear()["$[]"](1)["$[]"](j(-2,-1,!1));break;case"s":q+=r.$to_i();break;case"n":q+=`
`;break;case"t":q+="	";break;case"%":q+="%";break;case"c":q+=r.$strftime("%a %b %e %T %Y");break;case"D":case"x":q+=r.$strftime("%m/%d/%y");break;case"F":q+=r.$strftime("%Y-%m-%d");break;case"v":q+=r.$strftime("%e-%^b-%4Y");break;case"r":q+=r.$strftime("%I:%M:%S %p");break;case"R":q+=r.$strftime("%H:%M");break;case"T":case"X":q+=r.$strftime("%H:%M:%S");break;case"J":if(R=r.$to_date().$jd(),R<2405160){q+=r.$strftime("%Y-%m-%d");break}else R<2419614?(H="M",D=1867):R<2424875?(H="T",D=1911):R<2447535?(H="S",D=1925):R<2458605?(H="H",D=1988):(H="R",D=2018);q+=r.$format("%c%02d",H,Z(r.$year(),D)),q+=r.$strftime("-%m-%d");break;default:return e}return le&&(q=q.toUpperCase()),fe&&(q=q.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),te&&(G||ae)&&(q=q.$rjust(isNaN(s)?2:s,ae?" ":"0")),q})}),K(l,"$to_a",function(){var $=this;return[$.$sec(),$.$min(),$.$hour(),$.$day(),$.$month(),$.$year(),$.$wday(),$.$yday(),$.$isdst(),$.$zone()]}),K(l,"$to_f",function(){var $=this;return $.getTime()/1e3}),K(l,"$to_i",function(){var $=this;return parseInt($.getTime()/1e3,10)}),K(l,"$cweek_cyear",function(){var $=this,r=M,e=M,t=M,s=M,u=M,f=M,q=M;return r=C("Time").$new($.$year(),1,1),e=r.$wday(),t=$.$year(),p(z(e,4))&&y(e,0)?s=Z(e,1):(s=Z(Z(e,7),1),N(s,-8)&&(s=-1)),u=re(U($.$yday(),s),7).$ceil(),p(z(u,0))?C("Time").$new(Z($.$year(),1),12,31).$cweek_cyear():(N(u,53)&&(f=C("Time").$new($.$year(),12,31),q=f.$wday(),p(z(q,3))&&y(q,0)&&(u=1,t=U(t,1))),[u,t])}),function(a,$){return S(a,"mktime","local"),S(a,"utc","gm")}(n.get_singleton_class(l)),S(l,"ctime","asctime"),S(l,"dst?","isdst"),S(l,"getutc","getgm"),S(l,"gmtoff","gmt_offset"),S(l,"mday","day"),S(l,"month","mon"),S(l,"to_s","inspect"),S(l,"tv_sec","to_i"),S(l,"tv_usec","usec"),S(l,"utc","gmtime"),S(l,"utc?","gmt?"),S(l,"utc_offset","gmt_offset")}("::",Date,E)};Opal.modules["corelib/struct"]=function(n){var A=n.klass,h=n.slice,x=n.extract_kwargs,I=n.ensure_kwargs,Q=n.hash_get,W=n.truthy,P=n.neqeq,K=n.eqeq,p=n.Opal,B=n.send,O=n.Class,X=n.to_a,U=n.def,re=n.defs,Z=n.Kernel,j=n.rb_gt,y=n.rb_minus,z=n.eqeqeq,N=n.rb_lt,S=n.rb_ge,L=n.rb_plus,E=n.alias,M=n.top,C=[],w=n.nil,m=n.$$$;return n.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),M.$require("corelib/enumerable"),function(i,l,b){var _=A(i,l,"Struct"),c=[_].concat(b),o=n.$r(c);_.$include(m("Enumerable")),re(_,"$new",function T(d,a,$){var r=T.$$p||w,e,t,s,u,f=this,q=w;if(T.$$p=null,e=h(arguments,1),t=x(e),t=I(t),s=e,u=Q(t,"keyword_init"),u==null&&(u=!1),W(d))if(K(d.$class(),m("String"))&&P(d["$[]"](0).$upcase(),d["$[]"](0)))s.$unshift(d),d=w;else try{d=p["$const_name!"](d)}catch(R){if(n.rescue(R,[m("TypeError"),m("NameError")]))try{s.$unshift(d),d=w}finally{n.pop_exception(R)}else throw R}return B(s,"map",[],function(H){return H==null&&(H=w),p["$coerce_to!"](H,m("String"),"to_str")}),q=B(O,"new",[f],function R(){var H=R.$$s==null?this:R.$$s;return B(s,"each",[],function D(G){var te=D.$$s==null?this:D.$$s;return G==null&&(G=w),te.$define_struct_attribute(G)},{$$s:H}),function(D,G){return U(D,"$new",function(ae){var le,fe,de=this,he=w;return le=h(arguments),fe=le,he=de.$allocate(),he.$$data={},B(he,"initialize",X(fe)),he},-1),D.$alias_method("[]","new")}(n.get_singleton_class(H))},{$$s:f}),W(r)&&B(q,"module_eval",[],r.$to_proc()),q.$$keyword_init=u,W(d)&&m("Struct").$const_set(d,q),q},-2),re(_,"$define_struct_attribute",function(d){var a=this;return K(a,m("Struct"))&&Z.$raise(m("ArgumentError"),"you cannot define attributes to the Struct class"),a.$members()["$<<"](d),B(a,"define_method",[d],function $(){var r=$.$$s==null?this:$.$$s;return r.$$data[d]},{$$s:a}),B(a,"define_method",[""+d+"="],function $(r){var e=$.$$s==null?this:$.$$s;return r==null&&(r=w),e.$$data[d]=r},{$$s:a})}),re(_,"$members",function(){var d=this,a=w;return d.members==null&&(d.members=w),K(d,m("Struct"))&&Z.$raise(m("ArgumentError"),"the Struct class has no members"),d.members=W(a=d.members)?a:[]}),re(_,"$inherited",function(d){var a=this,$=w;return a.members==null&&(a.members=w),$=a.members,B(d,"instance_eval",[],function r(){var e=r.$$s==null?this:r.$$s;return e.members=$},{$$s:a})}),U(_,"$initialize",function(d){var a,$,r=this,e=w,t=w,s=w;return a=h(arguments),$=a,W(r.$class().$$keyword_init)?(e=W(t=$.$last())?t:new Map,(W(j($.$length(),1))||W($.length===1&&!e.$$is_hash))&&Z.$raise(m("ArgumentError"),"wrong number of arguments (given "+$.$length()+", expected 0)"),s=y(e.$keys(),r.$class().$members()),W(s["$any?"]())&&Z.$raise(m("ArgumentError"),"unknown keywords: "+s.$join(", ")),B(r.$class().$members(),"each",[],function u(f){var q,R=u.$$s==null?this:u.$$s;return f==null&&(f=w),q=[f,e["$[]"](f)],B(R,"[]=",q),q[q.length-1]},{$$s:r})):(W(j($.$length(),r.$class().$members().$length()))&&Z.$raise(m("ArgumentError"),"struct size differs"),B(r.$class().$members(),"each_with_index",[],function u(f,q){var R,H=u.$$s==null?this:u.$$s;return f==null&&(f=w),q==null&&(q=w),R=[f,$["$[]"](q)],B(H,"[]=",R),R[R.length-1]},{$$s:r}))},-1),U(_,"$initialize_copy",function(d){var a=this;a.$$data={};var $=Object.keys(d.$$data),r,e,t;for(r=0,e=$.length;r<e;r++)t=$[r],a.$$data[t]=d.$$data[t]}),re(_,"$keyword_init?",function(){var d=this;return d.$$keyword_init}),U(_,"$members",function(){var d=this;return d.$class().$members()}),U(_,"$hash",function(){var d=this;return[d.$class(),d.$to_a()].$hash()}),U(_,"$[]",function(d){var a=this;return z(m("Integer"),d)?(W(N(d,a.$class().$members().$size()["$-@"]()))&&Z.$raise(m("IndexError"),"offset "+d+" too small for struct(size:"+a.$class().$members().$size()+")"),W(S(d,a.$class().$members().$size()))&&Z.$raise(m("IndexError"),"offset "+d+" too large for struct(size:"+a.$class().$members().$size()+")"),d=a.$class().$members()["$[]"](d)):z(m("String"),d)?a.$$data.hasOwnProperty(d)||Z.$raise(m("NameError").$new("no member '"+d+"' in struct",d)):Z.$raise(m("TypeError"),"no implicit conversion of "+d.$class()+" into Integer"),d=p["$coerce_to!"](d,m("String"),"to_str"),a.$$data[d]}),U(_,"$[]=",function(d,a){var $=this;return z(m("Integer"),d)?(W(N(d,$.$class().$members().$size()["$-@"]()))&&Z.$raise(m("IndexError"),"offset "+d+" too small for struct(size:"+$.$class().$members().$size()+")"),W(S(d,$.$class().$members().$size()))&&Z.$raise(m("IndexError"),"offset "+d+" too large for struct(size:"+$.$class().$members().$size()+")"),d=$.$class().$members()["$[]"](d)):z(m("String"),d)?W($.$class().$members()["$include?"](d.$to_sym()))||Z.$raise(m("NameError").$new("no member '"+d+"' in struct",d)):Z.$raise(m("TypeError"),"no implicit conversion of "+d.$class()+" into Integer"),d=p["$coerce_to!"](d,m("String"),"to_str"),$.$$data[d]=a}),U(_,"$==",function(d){var a=this;if(!W(d["$instance_of?"](a.$class())))return!1;var $={},r={};function e(t,s){var u,f,q;$[t.$__id__()]=!0,r[s.$__id__()]=!0;for(u in t.$$data)if(f=t.$$data[u],q=s.$$data[u],m("Struct")["$==="](f)){if((!$.hasOwnProperty(f.$__id__())||!r.hasOwnProperty(q.$__id__()))&&!e(f,q))return!1}else if(!f["$=="](q))return!1;return!0}return e(a,d)}),U(_,"$eql?",function(d){var a=this;if(!W(d["$instance_of?"](a.$class())))return!1;var $={},r={};function e(t,s){var u,f,q;$[t.$__id__()]=!0,r[s.$__id__()]=!0;for(u in t.$$data)if(f=t.$$data[u],q=s.$$data[u],m("Struct")["$==="](f)){if((!$.hasOwnProperty(f.$__id__())||!r.hasOwnProperty(q.$__id__()))&&!e(f,q))return!1}else if(!f["$eql?"](q))return!1;return!0}return e(a,d)}),U(_,"$each",function T(){var d=T.$$p||w,a=this;return T.$$p=null,d===w?B(a,"enum_for",["each"],function $(){var r=$.$$s==null?this:$.$$s;return r.$size()},{$$s:a}):(B(a.$class().$members(),"each",[],function $(r){var e=$.$$s==null?this:$.$$s;return r==null&&(r=w),n.yield1(d,e["$[]"](r))},{$$s:a}),a)}),U(_,"$each_pair",function T(){var d=T.$$p||w,a=this;return T.$$p=null,d===w?B(a,"enum_for",["each_pair"],function $(){var r=$.$$s==null?this:$.$$s;return r.$size()},{$$s:a}):(B(a.$class().$members(),"each",[],function $(r){var e=$.$$s==null?this:$.$$s;return r==null&&(r=w),n.yield1(d,[r,e["$[]"](r)])},{$$s:a}),a)}),U(_,"$length",function(){var d=this;return d.$class().$members().$length()}),U(_,"$to_a",function(){var d=this;return B(d.$class().$members(),"map",[],function a($){var r=a.$$s==null?this:a.$$s;return $==null&&($=w),r["$[]"]($)},{$$s:d})});var v=[];return U(_,"$inspect",function(){var d=this,a=w,$=w;return function(){try{return a="#<struct ",W(v["$include?"](d.$__id__()))?L(a,":...>"):(v["$<<"](d.$__id__()),$=!0,z(m("Struct"),d)&&W(d.$class().$name())&&(a=L(a,""+d.$class()+" ")),a=L(a,B(d.$each_pair(),"map",[],function(e,t){return e==null&&(e=w),t==null&&(t=w),""+e+"="+o("Opal").$inspect(t)}).$join(", ")),a=L(a,">"),a)}finally{W($)&&v.pop()}}()}),U(_,"$to_h",function T(d){var a=T.$$p||w,$,r,e=this;return T.$$p=null,$=h(arguments),r=$,a!==w?B(B(e,"map",[],a.$to_proc()),"to_h",X(r)):B(e.$class().$members(),"each_with_object",[new Map],function t(s,u){var f,q=t.$$s==null?this:t.$$s;return s==null&&(s=w),u==null&&(u=w),f=[s,q["$[]"](s)],B(u,"[]=",f),f[f.length-1]},{$$s:e})},-1),U(_,"$values_at",function(d){var a,$,r=this;a=h(arguments),$=a,$=B($,"map",[],function(f){return f==null&&(f=w),f.$$is_range?f.$to_a():f}).$flatten();for(var e=[],t=0,s=$.length;t<s;t++)$[t].$$is_number||Z.$raise(m("TypeError"),"no implicit conversion of "+$[t].$class()+" into Integer"),e.push(r["$[]"]($[t]));return e},-1),U(_,"$dig",function(d,a){var $,r,e=this,t=w;return $=h(arguments,1),r=$,t=W(d.$$is_string&&e.$$data.hasOwnProperty(d))&&e.$$data[d]||w,t===w||r.length===0?t:(W(t["$respond_to?"]("dig"))||Z.$raise(m("TypeError"),""+t.$class()+" does not have #dig method"),B(t,"dig",X(r)))},-2),E(_,"size","length"),E(_,"to_s","inspect"),E(_,"values","to_a")}("::",null,C)};Opal.modules["corelib/set"]=function(n){var A=n.freeze,h=n.klass,x=n.slice,I=n.defs,Q=n.truthy,W=n.eqeqeq,P=n.Kernel,K=n.send,p=n.def,B=n.eqeq,O=n.rb_lt,X=n.rb_le,U=n.alias,re=[],Z=n.nil,j=n.$$$;return n.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(y,z,N){var S=h(y,z,"Set"),L=[S].concat(N),E=n.$r(L),M=Z,C=S.$$prototype;C.hash=Z,S.$include(j("Enumerable")),I(S,"$[]",function(i){var l,b,_=this;return l=x(arguments),b=l,_.$new(b)},-1),p(S,"$initialize",function m(i){var l=m.$$p||Z,b=this;return m.$$p=null,i==null&&(i=Z),b.hash=new Map,Q(i["$nil?"]())?Z:(W(j("Enumerable"),i)||P.$raise(j("ArgumentError"),"value must be enumerable"),Q(l)?K(i,"each",[],function _(c){var o=_.$$s==null?this:_.$$s;return c==null&&(c=Z),o.$add(n.yield1(l,c))},{$$s:b}):b.$merge(i))},-1),p(S,"$dup",function(){var i=this,l=Z;return l=i.$class().$new(),l.$merge(i)}),p(S,"$-",function(i){var l=this;return Q(i["$respond_to?"]("each"))||P.$raise(j("ArgumentError"),"value must be enumerable"),l.$dup().$subtract(i)}),p(S,"$inspect",function(){var i=this;return"#<Set: {"+i.$to_a().$join(",")+"}>"}),p(S,"$==",function(i){var l=this;return Q(l["$equal?"](i))?!0:Q(i["$instance_of?"](l.$class()))?l.hash["$=="](i.$instance_variable_get("@hash")):Q(i["$is_a?"](j("Set")))&&B(l.$size(),i.$size())?K(i,"all?",[],function b(_){var c=b.$$s==null?this:b.$$s;return c.hash==null&&(c.hash=Z),_==null&&(_=Z),c.hash["$include?"](_)},{$$s:l}):!1}),p(S,"$add",function(i){var l=this;return l.hash["$[]="](i,!0),l}),p(S,"$classify",function m(){var i=m.$$p||Z,l=this,b=Z;return m.$$p=null,i===Z?l.$enum_for("classify"):(b=K(j("Hash"),"new",[],function _(c,o){var v,T=_.$$s==null?this:_.$$s;return c==null&&(c=Z),o==null&&(o=Z),v=[o,T.$class().$new()],K(c,"[]=",v),v[v.length-1]},{$$s:l}),K(l,"each",[],function(c){return c==null&&(c=Z),b["$[]"](n.yield1(i,c)).$add(c)}),b)}),p(S,"$collect!",function m(){var i=m.$$p||Z,l=this,b=Z;return m.$$p=null,i===Z?l.$enum_for("collect!"):(b=l.$class().$new(),K(l,"each",[],function(c){return c==null&&(c=Z),b["$<<"](n.yield1(i,c))}),l.$replace(b))}),p(S,"$compare_by_identity",function(){var i=this;return Q(i.hash["$respond_to?"]("compare_by_identity"))?(i.hash.$compare_by_identity(),i):i.$raise(E("NotImplementedError"),""+i.$class().$name()+"#compare_by_identity is not implemented")}),p(S,"$compare_by_identity?",function(){var i=this,l=Z;return Q(l=i.hash["$respond_to?"]("compare_by_identity?"))?i.hash["$compare_by_identity?"]():l}),p(S,"$delete",function(i){var l=this;return l.hash.$delete(i),l}),p(S,"$delete?",function(i){var l=this;return Q(l["$include?"](i))?(l.$delete(i),l):Z}),p(S,"$delete_if",function m(){var i=m.$$p||Z,l=this;return m.$$p=null,i===Z?l.$enum_for("delete_if"):(K(K(l,"select",[],function(_){return _==null&&(_=Z),n.yield1(i,_)}),"each",[],function b(_){var c=b.$$s==null?this:b.$$s;return c.hash==null&&(c.hash=Z),_==null&&(_=Z),c.hash.$delete(_)},{$$s:l}),l)}),p(S,"$freeze",function(){var i=this;return Q(i["$frozen?"]())?i:(i.hash.$freeze(),A(i))}),p(S,"$keep_if",function m(){var i=m.$$p||Z,l=this;return m.$$p=null,i===Z?l.$enum_for("keep_if"):(K(K(l,"reject",[],function(_){return _==null&&(_=Z),n.yield1(i,_)}),"each",[],function b(_){var c=b.$$s==null?this:b.$$s;return c.hash==null&&(c.hash=Z),_==null&&(_=Z),c.hash.$delete(_)},{$$s:l}),l)}),p(S,"$reject!",function m(){var i=m.$$p||Z,l=this,b=Z;return m.$$p=null,i===Z?l.$enum_for("reject!"):(b=l.$size(),K(l,"delete_if",[],i.$to_proc()),B(l.$size(),b)?Z:l)}),p(S,"$select!",function m(){var i=m.$$p||Z,l=this,b=Z;return m.$$p=null,i===Z?l.$enum_for("select!"):(b=l.$size(),K(l,"keep_if",[],i.$to_proc()),B(l.$size(),b)?Z:l)}),p(S,"$add?",function(i){var l=this;return Q(l["$include?"](i))?Z:l.$add(i)}),p(S,"$each",function m(){var i=m.$$p||Z,l=this;return m.$$p=null,i===Z?l.$enum_for("each"):(K(l.hash,"each_key",[],i.$to_proc()),l)}),p(S,"$empty?",function(){var i=this;return i.hash["$empty?"]()}),p(S,"$eql?",function(i){var l=this;return l.hash["$eql?"](K(i,"instance_eval",[],function b(){var _=b.$$s==null?this:b.$$s;return _.hash==null&&(_.hash=Z),_.hash},{$$s:l}))}),p(S,"$clear",function(){var i=this;return i.hash.$clear(),i}),p(S,"$include?",function(i){var l=this;return l.hash["$include?"](i)}),p(S,"$merge",function(i){var l=this;return K(i,"each",[],function b(_){var c=b.$$s==null?this:b.$$s;return _==null&&(_=Z),c.$add(_)},{$$s:l}),l}),p(S,"$replace",function(i){var l=this;return l.$clear(),l.$merge(i),l}),p(S,"$size",function(){var i=this;return i.hash.$size()}),p(S,"$subtract",function(i){var l=this;return K(i,"each",[],function b(_){var c=b.$$s==null?this:b.$$s;return _==null&&(_=Z),c.$delete(_)},{$$s:l}),l}),p(S,"$|",function(i){var l=this;return Q(i["$respond_to?"]("each"))||P.$raise(j("ArgumentError"),"value must be enumerable"),l.$dup().$merge(i)});function w(m){Q(M=m["$is_a?"](j("Set")))||P.$raise(j("ArgumentError"),"value must be a set")}return p(S,"$superset?",function(i){var l=this;return w(i),Q(O(l.$size(),i.$size()))?!1:K(i,"all?",[],function b(_){var c=b.$$s==null?this:b.$$s;return _==null&&(_=Z),c["$include?"](_)},{$$s:l})}),p(S,"$proper_superset?",function(i){var l=this;return w(i),Q(X(l.$size(),i.$size()))?!1:K(i,"all?",[],function b(_){var c=b.$$s==null?this:b.$$s;return _==null&&(_=Z),c["$include?"](_)},{$$s:l})}),p(S,"$subset?",function(i){var l=this;return w(i),Q(O(i.$size(),l.$size()))?!1:K(l,"all?",[],function(_){return _==null&&(_=Z),i["$include?"](_)})}),p(S,"$proper_subset?",function(i){var l=this;return w(i),Q(X(i.$size(),l.$size()))?!1:K(l,"all?",[],function(_){return _==null&&(_=Z),i["$include?"](_)})}),p(S,"$intersect?",function(i){var l=this;return w(i),Q(O(l.$size(),i.$size()))?K(l,"any?",[],function(_){return _==null&&(_=Z),i["$include?"](_)}):K(i,"any?",[],function b(_){var c=b.$$s==null?this:b.$$s;return _==null&&(_=Z),c["$include?"](_)},{$$s:l})}),p(S,"$disjoint?",function(i){var l=this;return l["$intersect?"](i)["$!"]()}),p(S,"$to_a",function(){var i=this;return i.hash.$keys()}),U(S,"+","|"),U(S,"<","proper_subset?"),U(S,"<<","add"),U(S,"<=","subset?"),U(S,">","proper_superset?"),U(S,">=","superset?"),U(S,"difference","-"),U(S,"filter!","select!"),U(S,"length","size"),U(S,"map!","collect!"),U(S,"member?","include?"),U(S,"union","|")}("::",null,re)};Opal.modules["corelib/dir"]=function(n){var A=n.klass,h=n.def,x=n.truthy,I=n.alias,Q=n.nil,W=n.$$$;return n.add_stubs("[],pwd"),function(P,K,p){var B=A(P,K,"Dir");return function(O,X){return h(O,"$chdir",function U(re){var Z=U.$$p||Q,j=Q;return U.$$p=null,function(){try{return j=n.current_dir,n.current_dir=re,n.yieldX(Z,[])}finally{n.current_dir=j}}()}),h(O,"$pwd",function(){return n.current_dir||"."}),h(O,"$home",function(){var re=Q;return x(re=W("ENV")["$[]"]("HOME"))?re:"."}),I(O,"getwd","pwd")}(n.get_singleton_class(B))}("::",null)};Opal.modules["corelib/file"]=function(n){var A=n.truthy,h=n.klass,x=n.const_set,I=n.Opal,Q=n.regexp,W=n.rb_plus,P=n.def,K=n.Kernel,p=n.eqeq,B=n.rb_lt,O=n.rb_minus,X=n.range,U=n.send,re=n.slice,Z=n.alias,j=[],y=n.nil,z=n.$$$;return n.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(N,S,L){var E=h(N,S,"File"),M=[E].concat(L),C=y;return x(M[0],"Separator",x(M[0],"SEPARATOR","/")),x(M[0],"ALT_SEPARATOR",y),x(M[0],"PATH_SEPARATOR",":"),x(M[0],"FNM_SYSCASE",0),C=/^[a-zA-Z]:(?:\\|\/)/,function(w,m){var i=[w].concat(m),l=n.$r(i);P(w,"$absolute_path",function(o,v){var T=y,d=y,a=y,$=y,r=y,e=y,t=y,s=y,u=y,f=y;v==null&&(v=y),T=l("SEPARATOR"),d=_(),a=[],o=A(o["$respond_to?"]("to_path"))?o.$to_path():o,o=I["$coerce_to!"](o,z("String"),"to_str"),v=A($=v)?$:z("Dir").$pwd(),r=o.substr(0,T.length)===T||C.test(o),e=v.substr(0,T.length)===T||C.test(v),A(r)?(t=o.$split(Q(["[",d,"]"])),s=C.test(o)?"":o.$sub(Q(["^([",d,"]+).*$"]),"\\1"),u=!0):(t=W(v.$split(Q(["[",d,"]"])),o.$split(Q(["[",d,"]"]))),s=C.test(v)?"":v.$sub(Q(["^([",d,"]+).*$"]),"\\1"),u=e);for(var q,R=0,H=t.length;R<H;R++)q=t[R],!(q===y||q===""&&(a.length===0||u)||q==="."&&(a.length===0||u))&&(q===".."?a.pop():a.push(q));return!u&&t[0]!=="."&&a.$unshift("."),f=a.$join(T),A(u)&&(f=W(s,f)),f},-2),P(w,"$expand_path",function(o,v){var T=this,d=y,a=y,$=y,r=y,e=y;return v==null&&(v=y),d=l("SEPARATOR"),a=_(),A(o[0]==="~"||v&&v[0]==="~")&&($=l("Dir").$home(),A($)||K.$raise(z("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),r=C.test($)?"":$.$sub(Q(["^([",a,"]+).*$"]),"\\1"),A($["$start_with?"](r))||K.$raise(z("ArgumentError"),"non-absolute home"),$=W($,d),e=Q(["^\\~(?:",d,"|$)"]),o=o.$sub(e,$),A(v)&&(v=v.$sub(e,$))),T.$absolute_path(o,v)},-2);function b(c){return A(c["$respond_to?"]("to_path"))&&(c=c.$to_path()),c=I["$coerce_to!"](c,z("String"),"to_str"),c}function _(){return l("ALT_SEPARATOR")===y?n.escape_regexp(l("SEPARATOR")):n.escape_regexp(W(l("SEPARATOR"),l("ALT_SEPARATOR")))}return P(w,"$dirname",function(o,v){var T=this,d=y;if(v==null&&(v=1),p(v,0))return o;A(B(v,0))&&K.$raise(z("ArgumentError"),"level can't be negative"),d=_(),o=b(o);var a=o.match(new RegExp("^["+d+"]")),$;return o=o.replace(new RegExp("["+d+"]+$"),""),o=o.replace(new RegExp("[^"+d+"]+$"),""),o=o.replace(new RegExp("["+d+"]+$"),""),o===""?$=a?"/":".":$=o,v==1?$:T.$dirname($,O(v,1))},-2),P(w,"$basename",function(o,v){var T=y;return v==null&&(v=y),T=_(),o=b(o),o.length==0||(v!==y?v=I["$coerce_to!"](v,z("String"),"to_str"):v=null,o=o.replace(new RegExp("(.)["+T+"]*$"),"$1"),o=o.replace(new RegExp("^(?:.*["+T+"])?([^"+T+"]+)$"),"$1"),v===".*"?o=o.replace(/\.[^\.]+$/,""):v!==null&&(v=n.escape_regexp(v),o=o.replace(new RegExp(""+v+"$"),""))),o},-2),P(w,"$extname",function(o){var v=this,T=y,d=y;return o=b(o),T=v.$basename(o),A(T["$empty?"]())||(d=T["$[]"](X(1,-1,!1)).$rindex("."),A(d["$nil?"]())||p(W(d,1),O(T.$length(),1)))?"":T["$[]"](n.Range.$new(W(d,1),-1,!1))}),P(w,"$exist?",function(o){return n.modules[o]!=null}),P(w,"$directory?",function(o){var v=y;v=[];for(var T in n.modules)v.push(T);return o=o.$gsub(Q(["(^.",l("SEPARATOR"),"+|",l("SEPARATOR"),"+$)"])),U(v,"find",[],function(a){return a==null&&(a=y),a["$=~"](Q(["^",o]))})}),P(w,"$join",function(o){var v,T,d=y;return v=re(arguments),T=v,A(T["$empty?"]())?"":(d="",T=U(T.$flatten().$each_with_index(),"map",[],function($,r){return $==null&&($=y),r==null&&(r=y),p(r,0)&&A($["$empty?"]())||p(T.$length(),W(r,1))&&A($["$empty?"]())?l("SEPARATOR"):$}),T=U(T,"reject",[],"empty?".$to_proc()),U(T,"each_with_index",[],function($,r){var e=y;return $==null&&($=y),r==null&&(r=y),e=T["$[]"](W(r,1)),A(e["$nil?"]())?d=""+d+$:(A($["$end_with?"](l("SEPARATOR")))&&A(e["$start_with?"](l("SEPARATOR")))&&($=$.$sub(Q([l("SEPARATOR"),"+$"]),"")),d=A($["$end_with?"](l("SEPARATOR")))||A(e["$start_with?"](l("SEPARATOR")))?""+d+$:""+d+$+l("SEPARATOR"))}),d)},-1),P(w,"$split",function(o){return o.$split(l("SEPARATOR"))}),Z(w,"realpath","expand_path"),Z(w,"exists?","exist?")}(n.get_singleton_class(E),M)}("::",z("IO"),j)};Opal.modules["corelib/process/base"]=function(n){var A=n.klass,h=n.slice,x=n.defs,I=n.return_val,Q=n.nil;return function(W,P){var K=A(W,P,"Signal");return x(K,"$trap",function(B){return h(arguments),Q},-1)}("::",null),function(W,P){var K=A(W,P,"GC");return x(K,"$start",I(Q))}("::",null)};Opal.modules["corelib/process"]=function(n){var A=n.module,h=n.defs,x=n.truthy,I=n.return_val,Q=n.Kernel,W=n.nil,P=n.$$$;return n.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(K){var p=A(K,"Process"),B=W;if(p.__clocks__=[],h(p,"$__register_clock__",function(U,re){var Z=this;return Z.__clocks__==null&&(Z.__clocks__=W),Z.$const_set(U,Z.__clocks__.$size()),Z.__clocks__["$<<"](re)}),p.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),B=!1,n.global.performance)B=function(){return performance.now()};else if(n.global.process&&process.hrtime){var O=process.hrtime();B=function(){var X=process.hrtime(O),U=X[1]/1e3|0;return X[0]*1e3+U/1e3}}return x(B)&&p.$__register_clock__("CLOCK_MONOTONIC",B),h(p,"$pid",I(0)),h(p,"$times",function(){var U=W;return U=P("Time").$now().$to_f(),P(P("Benchmark"),"Tms").$new(U,U,U,U,U)}),h(p,"$clock_gettime",function(U,re){var Z=this,j=W;Z.__clocks__==null&&(Z.__clocks__=W),re==null&&(re="float_second"),x(j=Z.__clocks__["$[]"](U))||Q.$raise(P(P("Errno"),"EINVAL"),"clock_gettime("+U+") "+Z.__clocks__["$[]"](U));var y=j();switch(re){case"float_second":return y/1e3;case"float_millisecond":return y/1;case"float_microsecond":return y*1e3;case"second":return y/1e3|0;case"millisecond":return y/1|0;case"microsecond":return y*1e3|0;case"nanosecond":return y*1e6|0;default:Q.$raise(P("ArgumentError"),"unexpected unit: "+re)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(n){var A=n.klass,h=n.module,x=n.def,I=n.range,Q=n.send,W=n.rb_divide,P=n.Kernel,K=n.Opal,p=[],B=n.nil,O=n.$$$;return n.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(X,U,re){var Z=A(X,U,"Random"),j=[Z].concat(re);return function(y,z){var N=h(y,"Formatter"),S=[N].concat(z),L=n.$r(S);return x(N,"$hex",function(M){var C=this;M==null&&(M=B),M=O("Random").$_verify_count(M);for(var w=C.$bytes(M),m="",i=0;i<M;i++)m+=w.charCodeAt(i).toString(16).padStart(2,"0");return m.$encode("US-ASCII")},-1),x(N,"$random_bytes",function(M){var C=this;return M==null&&(M=B),C.$bytes(M)},-1),x(N,"$base64",function(M){var C=this;return M==null&&(M=B),O("Base64").$strict_encode64(C.$random_bytes(M)).$encode("US-ASCII")},-1),x(N,"$urlsafe_base64",function(M,C){var w=this;return M==null&&(M=B),C==null&&(C=!1),O("Base64").$urlsafe_encode64(w.$random_bytes(M),C).$encode("US-ASCII")},-1),x(N,"$uuid",function(){var M=this,C=B;return C=M.$hex(16).$split(""),C["$[]="](12,"4"),C["$[]="](16,(parseInt(C["$[]"](16),16)&3|8).toString(16)),C=[C["$[]"](I(0,8,!0)),C["$[]"](I(8,12,!0)),C["$[]"](I(12,16,!0)),C["$[]"](I(16,20,!0)),C["$[]"](I(20,32,!0))],C=Q(C,"map",[],"join".$to_proc()),C.$join("-")}),x(N,"$random_float",function(){var M=this,C=B,w=B;return C=M.$bytes(4),w=0,Q(4,"times",[],function(i){return i==null&&(i=B),w=w["$<<"](8),w=w["$|"](C["$[]"](i).$ord())}),W(w.$abs(),2147483647)}),x(N,"$random_number",function(M){var C=this;function w(){return C.$random_float()}function m(l){return Math.floor(w()*l)}function i(){var l=M.begin,b=M.end;if(l===B||b===B)return B;var _=b-l;return _<0?B:_===0?l:(b%1===0&&l%1===0&&!M.excl&&_++,m(_)+l)}return M==null?w():M.$$is_range?i():M.$$is_number?(M<=0&&P.$raise(O("ArgumentError"),"invalid argument - "+M),M%1===0?m(M):w()*M):(M=K["$coerce_to!"](M,O("Integer"),"to_int"),M<=0&&P.$raise(O("ArgumentError"),"invalid argument - "+M),m(M))},-1),x(N,"$alphanumeric",function(M){var C=this,w=B;return M==null&&(M=B),M=L("Random").$_verify_count(M),w=Q([I("0","9",!1),I("a","z",!1),I("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),Q(O("Array"),"new",[M],function m(i){var l=m.$$s==null?this:m.$$s;return w["$[]"](l.$random_number(w.$length()))},{$$s:C}).$join()},-1)}(Z,j),Z.$include(O(O("Random"),"Formatter")),Z.$extend(O(O("Random"),"Formatter"))}("::",null,p)};Opal.modules["corelib/random/mersenne_twister"]=function(n){var A=n.klass,h=n.const_set,x=n.send,I=n.nil,Q=n.$$$,W=I;return n.add_stubs("generator="),W=function(){var P=624,K=397,p=2567483615,B=2147483648,O=2147483647,X=function(S,L){return S&B|L&O},U=function(S,L){return X(S,L)>>>1^(L&1?p:0)};function re(S){var L={left:0,next:P,state:new Array(P)};return Z(L,S),L}function Z(S,L){var E;for(S.state[0]=L>>>0,E=1;E<P;E++)S.state[E]=1812433253*(S.state[E-1]^S.state[E-1]>>30>>>0)+E,S.state[E]&=4294967295;S.left=1,S.next=P}function j(S){var L=0,E=S.state,M;for(S.left=P,S.next=0,M=P-K+1;--M;L++)E[L]=E[L+K]^U(E[L+0],E[L+1]);for(M=K;--M;L++)E[L]=E[L+(K-P)]^U(E[L+0],E[L+1]);E[L]=E[L+(K-P)]^U(E[L+0],E[0])}function y(S){var L;return--S.left<=0&&j(S),L=S.state[S.next++],L^=L>>>11,L^=L<<7&2636928640,L^=L<<15&4022730752,L^=L>>>18,L>>>0}function z(S,L){return S>>>=5,L>>>=6,(S*67108864+L)*(1/9007199254740992)}function N(S){var L=y(S),E=y(S);return z(L,E)}return{genrand_real:N,init:re}}(),function(P,K){var p=A(P,K,"Random"),B,O=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return h(p,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*O)},reseed:function(X){return W.init(X)},rand:function(X){return W.genrand_real(X)}}),B=[Q(p,"MERSENNE_TWISTER_GENERATOR")],x(p,"generator=",B),B[B.length-1]}("::",null)};Opal.modules["corelib/random"]=function(n){var A=n.truthy,h=n.klass,x=n.Kernel,I=n.defs,Q=n.Opal,W=n.def,P=n.eqeqeq,K=n.send,p=n.top,B=n.nil,O=n.$$$;return n.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),p.$require("corelib/random/formatter"),function(X,U){var re=h(X,U,"Random");return re.$attr_reader("seed","state"),I(re,"$_verify_count",function(j){return A(j)||(j=16),typeof j!="number"&&(j=j.$to_int()),j<0&&x.$raise(O("ArgumentError"),"negative string size (or size too big)"),j=Math.floor(j),j}),W(re,"$initialize",function(j){var y=this;return j==null&&(j=O("Random").$new_seed()),j=Q["$coerce_to!"](j,O("Integer"),"to_int"),y.state=j,y.$reseed(j)},-1),W(re,"$reseed",function(j){var y=this;return y.seed=j,y.$rng=n.$$rand.reseed(j)}),I(re,"$new_seed",function(){return n.$$rand.new_seed()}),I(re,"$rand",function(j){var y=this;return O(y,"DEFAULT").$rand(j)},-1),I(re,"$srand",function(j){var y=this,z=B;return j==null&&(j=O("Random").$new_seed()),j=Q["$coerce_to!"](j,O("Integer"),"to_int"),z=O(y,"DEFAULT").$seed(),O(y,"DEFAULT").$reseed(j),z},-1),I(re,"$urandom",function(j){return O("SecureRandom").$bytes(j)}),W(re,"$==",function(j){var y=this,z=B;return P(O("Random"),j)?A(z=y.$seed()["$=="](j.$seed()))?y.$state()["$=="](j.$state()):z:!1}),W(re,"$bytes",function(j){var y=this;return j=O("Random").$_verify_count(j),K(O("Array"),"new",[j],function z(){var N=z.$$s==null?this:z.$$s;return N.$rand(255).$chr()},{$$s:y}).$join().$encode("ASCII-8BIT")}),I(re,"$bytes",function(j){var y=this;return O(y,"DEFAULT").$bytes(j)}),W(re,"$rand",function(j){var y=this;return y.$random_number(j)},-1),W(re,"$random_float",function(){var j=this;return j.state++,n.$$rand.rand(j.$rng)}),I(re,"$random_float",function(){var j=this;return O(j,"DEFAULT").$random_float()}),I(re,"$generator=",function(j){var y=this;return n.$$rand=j,A(y["$const_defined?"]("DEFAULT"))?O(y,"DEFAULT").$reseed():y.$const_set("DEFAULT",y.$new(y.$new_seed()))})}("::",null),p.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(n){var A=n.Kernel,h=n.klass,x=n.send,I=n.slice,Q=n.module,W=n.def,P=n.return_val,K=n.alias,p=n.defs,B=n.top,O=[],X=n.nil,U=n.$$$;n.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var re={};function Z(y){switch(n.config.unsupported_features_severity){case"error":A.$raise(U("NotImplementedError"),y);break;case"warning":j(y);break}}function j(y){re[y]||(re[y]=!0,B.$warn(y))}return function(y,z){var N=h(y,z,"String"),S="String#%s not supported. Mutable String methods are not supported in Opal.";return x(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function L(E){var M=L.$$s==null?this:L.$$s;return E==null&&(E=X),x(M,"define_method",[E],function(w){return I(arguments),A.$raise(U("NotImplementedError"),S["$%"](E))},-1)},{$$s:N})}("::",null),function(y){var z=Q(y,"Kernel"),N="Object tainting is not supported by Opal";return W(z,"$taint",function(){var L=this;return Z(N),L}),W(z,"$untaint",function(){var L=this;return Z(N),L}),W(z,"$tainted?",function(){return Z(N),!1})}("::"),function(y,z){var N=h(y,z,"Module");return W(N,"$public",function(L){var E,M,C=this;return E=I(arguments),M=E,M.length===0?(C.$$module_function=!1,X):M.length===1?M[0]:M},-1),W(N,"$private_class_method",function(L){var E,M;return E=I(arguments),M=E,M.length===1?M[0]:M},-1),W(N,"$private_method_defined?",P(!1)),W(N,"$private_constant",function(L){return I(arguments),X},-1),K(N,"nesting","public"),K(N,"private","public"),K(N,"protected","public"),K(N,"protected_method_defined?","private_method_defined?"),K(N,"public_class_method","private_class_method"),K(N,"public_instance_method","instance_method"),K(N,"public_instance_methods","instance_methods"),K(N,"public_method_defined?","method_defined?")}("::",null),function(y){var z=Q(y,"Kernel");return W(z,"$private_methods",function(S){return I(arguments),[]},-1),K(z,"protected_methods","private_methods"),K(z,"private_instance_methods","private_methods"),K(z,"protected_instance_methods","private_methods")}("::"),function(y,z){var N=Q(y,"Kernel"),S=[N].concat(z),L=n.$r(S);return W(N,"$eval",function(M){return I(arguments),A.$raise(U("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+L("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",O),p(B,"$public",function(z){var N,S;return N=I(arguments),S=N,S.length===1?S[0]:S},-1),p(B,"$private",function(z){var N,S;return N=I(arguments),S=N,S.length===1?S[0]:S},-1)};Opal.modules["corelib/binding"]=function(n){var A=n.klass,h=n.truthy,x=n.def,I=n.slice,Q=n.send,W=n.to_a,P=n.Kernel,K=n.return_ivar,p=n.eqeq;n.thrower;var B=n.module,O=n.const_set,X=n.top,U=[],re=n.nil,Z=n.$$$;return n.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(j,y){var z=A(j,y,"Binding"),N=z.$$prototype;return N.jseval=N.scope_variables=re,x(z,"$initialize",function(L,E,M,C){var w,m=this;return E==null&&(E=[]),C==null&&(C=re),w=[L,E,M,C],m.jseval=w[0],m.scope_variables=w[1],m.receiver=w[2],m.source_location=w[3],h(typeof M!==void 0)?re:M=m.$js_eval("self")},-2),x(z,"$js_eval",function(L){var E,M,C=this;return E=I(arguments),M=E,h(C.jseval)?Q(C.jseval,"call",W(M)):P.$raise("Evaluation on a Proc#binding is not supported")},-1),x(z,"$local_variable_get",function(L){var E=this;try{return E.$js_eval(L)}catch(M){if(n.rescue(M,[Z("Exception")]))try{return P.$raise(Z("NameError"),"local variable `"+L+"' is not defined for "+E.$inspect())}finally{n.pop_exception(M)}else throw M}}),x(z,"$local_variable_set",function(L,E){var M=this;return n.Binding.tmp_value=E,M.$js_eval(""+L+" = Opal.Binding.tmp_value"),delete n.Binding.tmp_value,E}),x(z,"$local_variables",K("scope_variables")),x(z,"$local_variable_defined?",function(L){var E=this;return E.scope_variables["$include?"](L)}),x(z,"$eval",function(L,E,M){try{var C=this;return E==null&&(E=re),M==null&&(M=re),p(L,"self")?C.$receiver():P.$eval(L,C,E,M)}catch(w){if(w===n.t_eval_return)return w.$v;throw w}},-2),z.$attr_reader("receiver","source_location")}("::",null),function(j){var y=B(j,"Kernel");return x(y,"$binding",function(){return P.$raise("Opal doesn't support dynamic calls to binding")})}("::"),O(U[0],"TOPLEVEL_BINDING",Z("Binding").$new(function(j){return new Function("self","return "+j)(X)},[],X,["<main>",0]))};Opal.modules["corelib/irb"]=function(n){var A=n.module,h=n.truthy,x=n.Kernel,I=n.defs,Q=n.gvars,W=n.lambda,P=n.hash_rehash,K=n.send,p=n.rb_plus,B=n.const_set,O=n.klass,X=n.def,U=n.Opal,re=n.range,Z=n.eqeq,j=n.thrower,y=[],z=n.nil,N=n.$$$;n.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(S,L){var E=A(S,"Opal"),M=[E].concat(L);return function(C,w){var m=A(C,"IRB"),i=[m].concat(w),l=n.$r(i);return I(m,"$ensure_loaded",function(_){var c=z,o=z;if(h(n.loaded_features["$include?"](_)))return z;c=h(l("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":l("RUBY_ENGINE_VERSION"),o="https://cdn.opalrb.com/opal/"+c+"/"+_+".js";var v;if(typeof XMLHttpRequest<"u"){var T=new XMLHttpRequest;T.open("GET",o,!1),T.send(""),v=T.responseText}else x.$raise("You need to provision "+_+" yourself in this environment");return new Function("Opal",v)(n),n.require(_),h(n.loaded_features["$include?"](_))?z:x.$raise("Could not load "+_+" for some reason")}),m.$singleton_class().$attr_accessor("output"),I(m,"$prepare_console",function b(){var _=b.$$p||z,c,o=this,v=z,T=z;return Q.stdout==null&&(Q.stdout=z),Q.stderr==null&&(Q.stderr=z),Q.stdin==null&&(Q.stdin=z),b.$$p=null,function(){try{return o["$output="](""),v=P(new Map([[Q.stdout,W(function(a){return a==null&&(a=z),Q.stdout=a})],[Q.stderr,W(function(a){return a==null&&(a=z),Q.stderr=a})]])),h(o["$browser?"]())&&(K(v,"each",[],function d(a,$){var r=d.$$s==null?this:d.$$s,e=z;return a==null&&(a=z),$==null&&($=z),e=a.$dup(),e["$write_proc="](K(r,"proc",[],function t(s){var u=t.$$s==null?this:t.$$s;return s==null&&(s=z),u["$output="](p(u.$output(),s)),u["$output="](u.$output().$split(`
`).$last(30).$join(`
`)),h(s["$end_with?"](`
`))&&u["$output="](p(u.$output(),`
`)),a.$write_proc().$call(s)},{$$s:r})),e["$tty="](!1),$.$call(e)},{$$s:o}),T=Q.stdin.$read_proc(),Q.stdin["$read_proc="](function(d){var a=prompt(o.$output());return a!==null?a+`
`:z})),n.yieldX(_,[])}finally{K(v,"each",[],function(a,$){return a==null&&(a=z),$==null&&($=z),$.$call(a)}),c=[T],K(Q.stdin,"read_proc=",c),c[c.length-1],c=[""],K(o,"output=",c),c[c.length-1]}}()}),I(m,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),B(i[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(b,_){var c=O(b,_,"Silencer"),o=c.$$prototype;return o.collector=o.stderr=z,X(c,"$initialize",function(){var T=this;return Q.stderr==null&&(Q.stderr=z),T.stderr=Q.stderr}),X(c,"$silence",function v(){var T=v.$$p||z,d=this;return v.$$p=null,function(){try{return d.collector=N("StringIO").$new(),Q.stderr=d.collector,n.yieldX(T,[])}finally{Q.stderr=d.stderr}}()}),X(c,"$warnings",function(){var T=this;return T.collector.$string()})}(i[0],null)}(M[0],M)}(y[0],y),function(S,L,E){var M=O(S,L,"Binding"),C=[M].concat(E),w=n.$r(C);return X(M,"$irb",function(){try{var i=j("return"),l=this,b=z;return N(U,"IRB").$ensure_loaded("opal-replutils"),b=N(N(U,"IRB"),"Silencer").$new(),K(N(U,"IRB"),"prepare_console",[],function _(){var c=_.$$s==null?this:_.$$s;return function(){try{var o=j("break");return K(c,"loop",[],function v(){var T=v.$$s==null?this:v.$$s,d=z,a=z,$=z,r=z,e=z;T.$print(">> "),d=T.$gets(),h(d)||o.$throw(z,v.$$is_lambda),a="",h(N(U,"IRB")["$browser?"]())&&T.$puts(d),h(d["$start_with?"]("ls "))?(a=d["$[]"](re(3,-1,!1)),$="ls"):Z(d,`ls
`)?(a="self",$="ls"):h(d["$start_with?"]("show "))?(a=d["$[]"](re(5,-1,!1)),$="show"):(a=d,$="inspect"),r=z;do{try{K(b,"silence",[],function(){return r=n.compile(a,{irb:!0})})}catch(t){if(n.rescue(t,[w("SyntaxError")])){e=t;try{if(h(N(N(U,"IRB"),"LINEBREAKS")["$include?"](e.$message()))){T.$print(".. "),d=T.$gets(),h(d)||i.$throw(z,v.$$is_lambda),h(N(U,"IRB")["$browser?"]())&&T.$puts(d),a=p(a,d);continue}else h(b.$warnings()["$empty?"]())?T.$warn(e.$full_message()):T.$warn(b.$warnings())}finally{n.pop_exception(t)}}else throw t}break}while(!0);return Z($,"show")&&(T.$puts(r),i.$throw(z,v.$$is_lambda)),T.$puts(N("REPLUtils").$eval_and_print(r,$,!1,T))},{$$s:c,$$ret:i})}catch(v){if(v===o)return v.$v;throw v}finally{o.is_orphan=!0}}()},{$$s:l})}catch(_){if(_===i)return _.$v;throw _}finally{i.is_orphan=!0}})}("::",null,y),n.irb=function(S){N("Binding").$new(S).$irb()},n.load_parser=function(){n.Opal.IRB.$ensure_loaded("opal-parser")},typeof n.eval>"u"&&(n.eval=function(S){return n.load_parser(),n.eval(S)}),typeof n.compile>"u"&&(n.compile=function(S,L){return n.load_parser(),n.compile(S,L)})};Opal.modules.opal=function(n){var A=n.Object;return n.nil,n.add_stubs("require,autoload"),A.$require("opal/base"),A.$require("opal/mini"),A.$require("corelib/kernel/format"),A.$require("corelib/string/encoding"),A.$autoload("Math","corelib/math"),A.$require("corelib/complex/base"),A.$autoload("Complex","corelib/complex"),A.$require("corelib/rational/base"),A.$autoload("Rational","corelib/rational"),A.$require("corelib/time"),A.$autoload("Struct","corelib/struct"),A.$autoload("Set","corelib/set"),A.$autoload("Dir","corelib/dir"),A.$autoload("File","corelib/file"),A.$require("corelib/process/base"),A.$autoload("Process","corelib/process"),A.$autoload("Random","corelib/random"),A.$require("corelib/unsupported"),A.$require("corelib/binding"),A.$require("corelib/irb")};Opal.modules["js/proxy"]=function(n){var A=n.module,h=n.truthy,x=n.def,I=n.klass,Q=n.const_set,W=n.slice,P=n.range,K=n.send,p=n.to_a,B=n.gvars,O=n.top,X=[],U=n.nil;return n.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),O.$require("opal"),O.$require("native"),function(re,Z){var j=A(re,"JS"),y=[j].concat(Z),z=n.$r(y);return function(N,S){var L=A(N,"Helpers"),E=[L].concat(S),M=n.$r(E);return x(L,"$wrap_result",function(w){return h(w&&typeof w.then=="function")?M("Promise").$new(w):h(typeof w=="object"&&w!==null)?M("Proxy").$new(w):w}),x(L,"$native_methods",function(){var w=this,m=U;return w.native_methods==null&&(w.native_methods=U),w.native_methods=function(){if(h(m=w.native_methods))return m;{let i=w.$to_n();const l=new Set;for(;i!==null;){for(const b of Reflect.ownKeys(i)){const _=b.toString(),c=w.$to_rb_name(_);typeof b!="symbol"&&_!==c&&l.add(c),l.add(_)}i=Object.getPrototypeOf(i)}return Array.from(l)}}()})}(y[0],y),function(N,S,L){var E=I(N,S,"Proxy"),M=[E].concat(L),C=n.$r(M);return E.$include(C("Enumerable")),E.$include(C("Helpers")),E.$attr_accessor("native"),Q(M[0],"IRREGULARS",["html","url","uri"]),x(E,"$initialize",function(m){var i=this;return i.native=i.$Native(m)}),x(E,"$method_missing",function w(m,i){var l=w.$$p||U,b,_,c,o=this,v=U,T=U,d=U,a=U,$=U,r=U;return w.$$p=null,b=W(arguments,1),_=b,v=o.$to_js_name(m),h(o["$existing_property?"](v))||h(v["$end_with?"]("="))||o.$raise(C("NoMethodError"),"undefined method `"+m+"` for "+o),h(v["$end_with?"]("="))?(T=v["$[]"](P(0,-2,!1)),c=[T,_.$first()],K(o.$native(),"[]=",c),c[c.length-1]):(d=o.$native()["$[]"](v),h(typeof d=="function")?(a=_.$dup(),h(l)&&($=function(){let e=Array.prototype.slice.call(arguments);return K(l,"call",[o.$class().$new(this)].concat(p(e)))},a["$<<"]($)),r=d.apply(o.$to_n(),a.$to_n()),o.$wrap_result(r)):h(typeof d=="object"&&d!==null)?o.$wrap_result(d):d)},-2),x(E,"$to_str",function(){var m=this;return m.$to_n().toString()}),x(E,"$respond_to_missing?",function(m,i){return!0},-2),x(E,"$each",function w(){var m=w.$$p||U,i=this,l=U;return w.$$p=null,h(i["$respond_to?"]("length"))?(l=i.$length(),K(n.Range.$new(0,l,!0),"each",[],function b(_){var c=b.$$s==null?this:b.$$s;return _==null&&(_=U),n.yield1(m,c["$[]"](_))},{$$s:i})):i.$enum_for("each")}),x(E,"$[]",function(m){var i=this,l=U;return l=i.$native()["$[]"](m),i.$wrap_result(l)}),x(E,"$[]=",function(m,i){var l=this;return l.$native()["$[]="](m,i),l.$wrap_result(l.$native())}),x(E,"$to_n",function(){var m=this;return m.$native().$to_n()}),x(E,"$length",function(){var m=this;return m.$native().$length()}),E.$private(),x(E,"$to_js_name",function(m){return K(m.$to_s().$split("_").$map(),"with_index",[],function(l,b){return l==null&&(l=U),b==null&&(b=U),h(C("IRREGULARS")["$include?"](l.$gsub("=","").$downcase()))?l.$upcase():h(b["$zero?"]())?l:l.$capitalize()}).$join()}),x(E,"$to_rb_name",function(m){return K(m.$to_s(),"gsub",[/([A-Z]+)/],function(){var l;return"_"+((l=B["~"])===U?U:l["$[]"](1)).$downcase()}).$sub(/^_/,"")}),x(E,"$existing_property?",function(m){var i=this;return m in i.$to_n()})}(y[0],null,y),function(N,S,L){var E=I(N,S,"Promise"),M=[E].concat(L),C=n.$r(M);return E.$include(C("Helpers")),x(E,"$then",function w(){var m=w.$$p||U,i,l=this,b=U;return w.$$p=null,b=function(_){var c=m.$call(l.$wrap_result(_));return c&&typeof c.then=="function"?c:c&&typeof c.to_n=="function"?c.to_n():c},i=[l.$to_n().then(b)],K(l,"native=",i),i[i.length-1]}),x(E,"$catch",function w(){var m=w.$$p||U,i,l=this,b=U;return w.$$p=null,b=function(_){var c=m.$call(l.$wrap_result(_));return c&&typeof c.then=="function"?c:c&&typeof c.to_n=="function"?c.to_n():c},i=[l.$to_n().catch(b)],K(l,"native=",i),i[i.length-1]})}(y[0],z("Proxy"),y)}(X[0],X)};Opal.modules["opal_stimulus/stimulus_controller"]=function(n){var A=n.klass,h=n.const_set,x=n.Opal,I=n.defs,Q=n.truthy,W=n.send,P=n.gvars,K=n.return_val,p=n.thrower,B=n.rb_plus,O=n.eqeqeq,X=n.def,U=n.top,re=[],Z=n.nil,j=n.$$$;return n.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),U.$require("opal"),U.$require("native"),U.$require("js/proxy"),function(y,z,N){var S=A(y,z,"StimulusController"),L=[S].concat(N),E=n.$r(L),M=S.$$prototype;return M.window=M.document=Z,h(L[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),h(L[0],"DEFAULT_GETTERS",["element"]),I(S,"$inherited",function(w){return x.$bridge(w.$stimulus_controller(),w)}),I(S,"$stimulus_controller",function(){var w=this;return w.stimulus_controller==null&&(w.stimulus_controller=Z),Q(w.stimulus_controller)||(w.stimulus_controller=class extends Controller{}),w.stimulus_controller}),I(S,"$stimulus_name",function(){var w=this;return w.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),I(S,"$method_added",function(w){var m=this;if(Q(E("DEFAULT_GETTERS")["$include?"](w)))return Z;m.$stimulus_controller().prototype[w]=function(...i){try{var l=i.map(function(b){return b&&typeof b=="object"&&!b.$$class?n.JS.Proxy.$new(b):b});return this["$"+w].apply(this,l)}catch(b){console.error("Uncaught",b)}}}),I(S,"$to_ruby_name",function(w){return W(w.$to_s(),"gsub",[/([A-Z]+)/],function(){var i;return"_"+((i=P["~"])===Z?Z:i["$[]"](1)).$downcase()}).$sub(/^_/,"")}),I(S,"$register_all!",function(){try{var w=p("return"),m=this;return W(m.$subclasses(),"each",[],function i(l){return l==null&&(l=Z),W(l,"define_method",["dummy"],K(Z)),Q(application.controllers["$include?"](l.$stimulus_name()))&&w.$throw(Z,i.$$is_lambda),application.register(l.$stimulus_name(),l.$stimulus_controller())},{$$ret:w})}catch(i){if(i===w)return i.$v;throw i}finally{w.is_orphan=!0}}),I(S,"$targets=",function(w){var m=this;return w==null&&(w=[]),m.$stimulus_controller().targets=w,W(w,"each",[],function i(l){var b=i.$$s==null?this:i.$$s,_=Z,c=Z,o=Z,v=Z,T=Z,d=Z;l==null&&(l=Z),_=l.$to_s(),c=b.$to_ruby_name(l),W(b,"define_method",[B(c,"_target")],function(){return j(E("JS"),"Proxy").$new(this[B(_,"Target")])}),W(b,"define_method",[B(c,"_targets")],function(){return W(this[B(_,"Targets")],"map",[],function(r){return r==null&&(r=Z),j(E("JS"),"Proxy").$new(r)})}),W(b,"define_method",[B(B("has_",c),"_target")],function(){return this[B(B("has",_.$capitalize()),"Target")]}),o=B(c,"_target_connected"),v=B(_,"TargetConnected"),b.$stimulus_controller().prototype[v]=function(){if(this["$respond_to?"]&&this["$respond_to?"](o))return this["$"+o]()},T=B(c,"_target_disconnected"),d=B(_,"TargetDisconnected"),b.$stimulus_controller().prototype[d]=function(){if(this["$respond_to?"]&&this["$respond_to?"](T))return this["$"+T]()}},{$$s:m})},-1),I(S,"$outlets=",function(w){var m=this;return w==null&&(w=[]),m.$stimulus_controller().outlets=w,W(w,"each",[],function i(l){var b=i.$$s==null?this:i.$$s,_=Z,c=Z,o=Z,v=Z,T=Z,d=Z;l==null&&(l=Z),_=l.$to_s(),c=b.$to_ruby_name(l),W(b,"define_method",[B(c,"_outlet")],function(){return this[B(_,"Outlet")]}),W(b,"define_method",[B(c,"_outlets")],function(){return this[B(_,"Outlets")]}),W(b,"define_method",[B(B("has_",c),"_outlet")],function(){return this[B(B("has",_.$capitalize()),"Outlet")]}),o=B(c,"_outlet_connected"),v=B(_,"OutletConnected"),b.$stimulus_controller().prototype[v]=function(){if(this["$respond_to?"]&&this["$respond_to?"](o))return this["$"+o]()},T=B(c,"_outlet_disconnected"),d=B(_,"OutletDisconnected"),b.$stimulus_controller().prototype[d]=function(){if(this["$respond_to?"]&&this["$respond_to?"](T))return this["$"+T]()}},{$$s:m})},-1),I(S,"$values=",function(w){var m=this,i=Z;return w==null&&(w=new Map),i=new Map,W(w,"each",[],function l(b,_){var c=l.$$s==null?this:l.$$s,o=Z,v=Z,T=Z,d=Z;b==null&&(b=Z),_==null&&(_=Z),b=c.$to_ruby_name(b),o=O("string",v=_)?String:O("number",v)?Number:O("boolean",v)?Boolean:O("array",v)?Array:O("object",v)?Object:c.$raise(E("ArgumentError"),"Unsupported value type: "+_+", please use :string, :number, :boolean, :array, or :object"),i["$[]="](b,o),c.$stimulus_controller().values=i.$to_n(),W(c,"define_method",[B(b,"_value")],function a(){var $=a.$$s==null?this:a.$$s;return $.$Native(this[B(b,"Value")])},{$$s:c}),W(c,"define_method",[B(b,"_value=")],function a($){var r=a.$$s==null?this:a.$$s;return $==null&&($=Z),r.$Native(this[B(b,"Value")]=$)},{$$s:c}),W(c,"define_method",["has_"+b],function(){return this[B(B("has",b.$to_s().$capitalize()),"Value")]}),T=""+b+"_value_changed",d=""+b+"ValueChanged",c.$stimulus_controller().prototype[d]=function(a,$){if(_["$=="]("object")&&(a=JSON.stringify(a),$=JSON.stringify($)),this["$respond_to?"]&&this["$respond_to?"](T))return this["$"+T](a,$)}},{$$s:m})},-1),I(S,"$classes=",function(w){var m=this;return w==null&&(w=[]),m.$stimulus_controller().classes=w,W(w,"each",[],function i(l){var b=i.$$s==null?this:i.$$s,_=Z,c=Z;return l==null&&(l=Z),_=l.$to_s(),c=b.$to_ruby_name(l),W(b,"define_method",[""+c+"_class"],function(){return this[B(_,"Class")]}),W(b,"define_method",[""+c+"_classes"],function(){return this[B(_,"Classes")]}),W(b,"define_method",["has_"+c+"_class"],function(){return this[B(B("has",_.$capitalize()),"Class")]})},{$$s:m})},-1),X(S,"$element",function(){return j(E("JS"),"Proxy").$new(this.element)}),X(S,"$window",function(){var w=this,m=Z;return P.$==null&&(P.$=Z),w.window=Q(m=w.window)?m:j(E("JS"),"Proxy").$new(P.$.$window())}),X(S,"$document",function(){var w=this,m=Z;return P.$==null&&(P.$=Z),w.document=Q(m=w.document)?m:j(E("JS"),"Proxy").$new(P.$.$document())})}(re[0],Controller,re)};Opal.modules["opal_vite/concerns/v1/js_proxy_ex"]=function(n){var A=n.module,h=n.truthy,x=n.def,I=n.send,Q=n.klass,W=n.assign_ivar,P=n.return_ivar,K=n.slice,p=n.range,B=n.eqeq,O=n.lambda,X=n.to_a,U=n.eqeqeq,re=n.rb_plus,Z=n.defs,j=n.const_set,y=[],z=n.$r(y),N=n.nil,S=n.$$$;return n.add_stubs("new,to_n,nil?,respond_to?,times,<<,to_s,snake_to_camel,wrap_result,end_with?,[],!,==,call,map,===,length,enum_for,private,upcase,split,+,join,to_proc,test,js_array_to_ruby"),function(L,E){var M=A(L,"OpalVite"),C=[M].concat(E);return function(w,m){var i=A(w,"Concerns"),l=[i].concat(m);return function(b,_){var c=A(b,"V1"),o=[c].concat(_);return function(v,T){var d=A(v,"JsProxyEx"),a=[d].concat(T),$=n.$r(a);return x(d,"$local_storage",function(){var e=this,t=N;return e.local_storage==null&&(e.local_storage=N),e.local_storage=h(t=e.local_storage)?t:$("JsObject").$new(localStorage)}),x(d,"$session_storage",function(){var e=this,t=N;return e.session_storage==null&&(e.session_storage=N),e.session_storage=h(t=e.session_storage)?t:$("JsObject").$new(sessionStorage)}),x(d,"$js_json",function(){var e=this,t=N;return e.js_json==null&&(e.js_json=N),e.js_json=h(t=e.js_json)?t:$("JsonWrapper").$new()}),x(d,"$js_date",function(){return $("DateWrapper")}),x(d,"$js_console",function(){var e=this,t=N;return e.js_console==null&&(e.js_console=N),e.js_console=h(t=e.js_console)?t:$("JsObject").$new(console)}),x(d,"$new_event",function(e,t){return t==null&&(t=new Map),$("JsObject").$new(new Event(e,t.$to_n()))},-2),x(d,"$new_custom_event",function(e,t){return t==null&&(t=new Map),$("JsObject").$new(new CustomEvent(e,{detail:t.$to_n()}))},-2),x(d,"$new_url",function(e){return $("JsObject").$new(new URL(e))}),x(d,"$new_regexp",function(e,t){return t==null&&(t=""),$("RegExpWrapper").$new(e,t)},-2),x(d,"$new_date",function(e){return e==null&&(e=N),h(e)?$("JsObject").$new(new Date(e)):$("JsObject").$new(new Date)},-1),x(d,"$date_now",function(){return Date.now()}),x(d,"$wrap_js",function(e){var t=N;return h(e["$nil?"]())?N:(t=h(e["$respond_to?"]("to_n"))?e.$to_n():e,$("JsObject").$new(t))}),x(d,"$js_array_to_ruby",function(e){var t=N,s=N;return t=[],s=e.length,I(s,"times",[],function(f){var q=N;return f==null&&(f=N),q=e[f],t["$<<"]($("JsObject").$new(q))}),t}),x(d,"$new_js_array",function(){return $("JsObject").$new([])}),function(r,e,t){var s=Q(r,e,"JsObject"),u=[s].concat(t),f=n.$r(u),q=s.$$prototype;return q.native=N,x(s,"$initialize",W("native")),x(s,"$to_n",P("native")),x(s,"$[]",function(H){var D=this,G=N,te=N,ae=N;return G=H.$to_s(),te=D.$snake_to_camel(G),ae=D.native[te],D.$wrap_result(ae)}),x(s,"$[]=",function(H,D){var G=this,te=N,ae=N,le=N;return te=H.$to_s(),ae=G.$snake_to_camel(te),le=h(D["$respond_to?"]("to_n"))?D.$to_n():D,G.native[ae]=le}),x(s,"$method_missing",function R(H,D){var G=R.$$p||N,te,ae,le=this,fe=N,de=N,he=N,ve=N,me=N,be=N,ie=N,F=N,V=N,Y=N;return R.$$p=null,te=K(arguments,1),ae=te,fe=H.$to_s(),h(fe["$end_with?"]("="))?(de=fe["$[]"](p(0,-2,!1)),he=le.$snake_to_camel(de),ve=ae["$[]"](0),me=h(ve["$respond_to?"]("to_n"))?ve.$to_n():ve,le.native[he]=me,ve):h(fe["$end_with?"]("?"))?(de=fe["$[]"](p(0,-2,!1)),he=le.$snake_to_camel(de),le.native[he]["$!"]()["$!"]()):(he=le.$snake_to_camel(fe),be=typeof le.native[he]=="function",h(be)?B(he,"addEventListener")&&h(G)?(ie=O(function($e){return $e==null&&($e=N),G.$call(f("JsObject").$new($e))}),le.native.addEventListener(ae["$[]"](0),ie),N):(F=I(ae,"map",[],function($e){return $e==null&&($e=N),h($e["$respond_to?"]("to_n"))?$e.$to_n():$e}),h(G)&&(ie=O(function ee($e){var se,oe,ce=ee.$$s==null?this:ee.$$s,g=N;return se=K(arguments),oe=se,g=I(oe,"map",[],function k(J){var ne=k.$$s==null?this:k.$$s;return J==null&&(J=N),ne.$wrap_result(J)},{$$s:ce}),I(G,"call",X(g))},{$$arity:-1,$$s:le}),F["$<<"](ie)),V=U(0,Y=F.$length())?le.native[he]():U(1,Y)?le.native[he](F["$[]"](0)):U(2,Y)?le.native[he](F["$[]"](0),F["$[]"](1)):U(3,Y)?le.native[he](F["$[]"](0),F["$[]"](1),F["$[]"](2)):le.native[he].apply(le.native,F),le.$wrap_result(V)):(V=le.native[he],le.$wrap_result(V)))},-2),x(s,"$respond_to_missing?",function(H,D){return!0},-2),x(s,"$each",function R(){var H=R.$$p||N,D=this,G=N;return R.$$p=null,h(H)?(G=D.native.length,h(G)&&I(G,"times",[],function te(ae){var le=te.$$s==null?this:te.$$s,fe=N;return le.native==null&&(le.native=N),ae==null&&(ae=N),fe=le.native[ae],H.$call(le.$wrap_result(fe))},{$$s:D}),D):D.$enum_for("each")}),x(s,"$length",function(){var H=this;return H.native.length}),x(s,"$size",function(){var H=this;return H.$length()}),x(s,"$nil?",function(){var H=this;return H.native==null}),x(s,"$exists?",function(){var H=this;return H["$nil?"]()["$!"]()}),x(s,"$to_s",function(){var H=this;return String(H.native)}),x(s,"$inspect",function(){var H=this;return"#<JsObject: "+H.$to_s()+">"}),s.$private(),x(s,"$snake_to_camel",function(H){var D=N;return B(H,H.$upcase())||(D=H.$split("_"),B(D.$length(),1))?H:re(D["$[]"](0),I(D["$[]"](p(1,-1,!1)),"map",[],"capitalize".$to_proc()).$join())}),x(s,"$wrap_result",function(H){return h(H==null)?N:h(typeof H=="number")||h(typeof H=="string")||h(typeof H=="boolean")?H:f("JsObject").$new(H)})}(a[0],null,a),function(r,e,t){var s=Q(r,e,"JsonWrapper"),u=[s].concat(t),f=n.$r(u);return x(s,"$parse",function(R){var H=N;return H=JSON.parse(R),f("JsObject").$new(H)}),x(s,"$stringify",function(R){var H=N;return H=h(R["$respond_to?"]("to_n"))?R.$to_n():R,JSON.stringify(H)})}(a[0],null,a),function(r,e,t){var s=Q(r,e,"RegExpWrapper"),u=[s].concat(t),f=n.$r(u),q=s.$$prototype;return q.native=N,x(s,"$initialize",function(H,D){var G=this;return D==null&&(D=""),G.native=new RegExp(H,D)},-2),x(s,"$to_n",P("native")),x(s,"$test",function(H){var D=this;return D.native.test(H)}),x(s,"$match",function(H){var D=this,G=N;return G=H.match(D.native),h(G===null)?N:f("JsObject").$new(G)}),x(s,"$=~",function(H){var D=this;return D.$test(H)})}(a[0],null,a),function(r,e){var t=A(r,"DateWrapper"),s=[t].concat(e),u=n.$r(s);return Z(t,"$now",function(){return Date.now()}),Z(t,"$new",function(q){return q==null&&(q=N),h(q)?u("JsObject").$new(new Date(q)):u("JsObject").$new(new Date)},-1),Z(t,"$parse",function(q){return Date.parse(q)})}(a[0],a),x(d,"$has_target?",function(e){var t=this,s=N,u=N;return s=t.$snake_to_camel(e.$to_s()),u="has"+s["$[]"](0).$upcase()+s["$[]"](p(1,-1,!1))+"Target",this[u]}),x(d,"$target",function(e){var t=this,s=N,u=N,f=N;return s=t.$snake_to_camel(e.$to_s()),u=""+s+"Target",f=this[u],$("JsObject").$new(f)}),x(d,"$targets",function(e){var t=this,s=N,u=N,f=N;return s=t.$snake_to_camel(e.$to_s()),u=""+s+"Targets",f=this[u],t.$js_array_to_ruby(f)}),x(d,"$set_target_text",function(e,t){var s=this,u=N,f=N,q=N;u=s.$snake_to_camel(e.$to_s()),f="has"+u["$[]"](0).$upcase()+u["$[]"](p(1,-1,!1))+"Target",q=""+u+"Target",this[f]&&(this[q].textContent=t)}),x(d,"$set_target_class",function(e,t){var s=this,u=N,f=N,q=N;u=s.$snake_to_camel(e.$to_s()),f="has"+u["$[]"](0).$upcase()+u["$[]"](p(1,-1,!1))+"Target",q=""+u+"Target",this[f]&&(this[q].className=t)}),x(d,"$set_target_disabled",function(e,t){var s=this,u=N,f=N,q=N;u=s.$snake_to_camel(e.$to_s()),f="has"+u["$[]"](0).$upcase()+u["$[]"](p(1,-1,!1))+"Target",q=""+u+"Target",this[f]&&(this[q].disabled=t)}),d.$private(),x(d,"$snake_to_camel",function(e){var t=N;return B(e,e.$upcase())||(t=e.$to_s().$split("_"),B(t.$length(),1))?e:re(t["$[]"](0),I(t["$[]"](p(1,-1,!1)),"map",[],"capitalize".$to_proc()).$join())})}(o[0],o)}(l[0],l)}(C[0],C)}(y[0],y),j(y[0],"JsProxyEx",S(S(S(z("OpalVite"),"Concerns"),"V1"),"JsProxyEx"))};Opal.modules["opal_vite/concerns/v1/dom_helpers"]=function(n){var A=n.module,h=n.truthy,x=n.def,I=n.send,Q=n.const_set,W=[],P=n.$r(W),K=n.nil,p=n.$$$;return n.add_stubs("window,to_n,query_selector,element,nil?,query_selector_all,map,to_a,Native,add,class_list,remove,toggle,contains,set_timeout,!,element_exists?,set_style"),function(B,O){var X=A(B,"OpalVite"),U=[X].concat(O);return function(re,Z){var j=A(re,"Concerns"),y=[j].concat(Z);return function(z,N){var S=A(z,"V1"),L=[S].concat(N);return function(E){var M=A(E,"DomHelpers");return x(M,"$dispatch_custom_event",function(w,m,i){var l=this,b=K;m==null&&(m=new Map),i==null&&(i=K),i=h(b=i)?b:l.$window();const _=new CustomEvent(w,{detail:m.$to_n()});i.$to_n().dispatchEvent(_)},-2),x(M,"$create_event",function(w,m){return m==null&&(m=new Map([["bubbles",!0]])),new Event(w,m.$to_n())},-2),x(M,"$query",function(w){var m=this,i=K;return i=m.$element().$query_selector(w),h(i["$nil?"]())?K:i}),x(M,"$query_all",function(w){var m=this,i=K;return i=m.$element().$query_selector_all(w),I(m.$Native(Array.from(i.$to_n())).$to_a(),"map",[],function l(b){var _=l.$$s==null?this:l.$$s;return b==null&&(b=K),_.$Native(b)},{$$s:m})}),x(M,"$add_class",function(w,m){return w.$class_list().$add(m)}),x(M,"$remove_class",function(w,m){return w.$class_list().$remove(m)}),x(M,"$toggle_class",function(w,m){return w.$class_list().$toggle(m)}),x(M,"$has_class?",function(w,m){return w.$class_list().$contains(m)}),x(M,"$set_timeout",function C(w){var m=C.$$p||K,i=this;return C.$$p=null,i.$window().$set_timeout(m,w)}),x(M,"$element_exists?",function(w){var m=K;return h(m=w["$nil?"]()["$!"]())?w.$to_n():m}),x(M,"$set_style",function(w,m,i){var l=this;return h(l["$element_exists?"](w))?w.$to_n().style[m]=i:K}),x(M,"$get_style",function(w,m){var i=this;return h(i["$element_exists?"](w))?w.$to_n().style[m]:K}),x(M,"$show_element",function(w){var m=this;return m.$set_style(w,"display","block")}),x(M,"$hide_element",function(w){var m=this;return m.$set_style(w,"display","none")})}(L[0])}(y[0],y)}(U[0],U)}(W[0],W),Q(W[0],"DomHelpers",p(p(p(P("OpalVite"),"Concerns"),"V1"),"DomHelpers"))};Opal.modules["opal_vite/concerns/v1/toastable"]=function(n){var A=n.module,h=n.def,x=n.const_set,I=[],Q=n.$r(I);n.nil;var W=n.$$$;return n.add_stubs("dispatch_toast"),function(P,K){var p=A(P,"OpalVite"),B=[p].concat(K);return function(O,X){var U=A(O,"Concerns"),re=[U].concat(X);return function(Z,j){var y=A(Z,"V1"),z=[y].concat(j);return function(N){var S=A(N,"Toastable");return h(S,"$dispatch_toast",function(E,M){M==null&&(M="info");const C=new CustomEvent("show-toast",{detail:{message:E,type:M}});window.dispatchEvent(C)},-2),h(S,"$show_success",function(E){var M=this;return M.$dispatch_toast(E,"success")}),h(S,"$show_error",function(E){var M=this;return M.$dispatch_toast(E,"error")}),h(S,"$show_warning",function(E){var M=this;return M.$dispatch_toast(E,"warning")}),h(S,"$show_info",function(E){var M=this;return M.$dispatch_toast(E,"info")})}(z[0])}(re[0],re)}(B[0],B)}(I[0],I),x(I[0],"Toastable",W(W(W(Q("OpalVite"),"Concerns"),"V1"),"Toastable"))};Opal.modules["opal_vite/concerns/v1/storable"]=function(n){var A=n.module,h=n.truthy,x=n.def,I=n.const_set,Q=[],W=n.$r(Q),P=n.nil,K=n.$$$;return n.add_stubs("to_n"),function(p,B){var O=A(p,"OpalVite"),X=[O].concat(B);return function(U,re){var Z=A(U,"Concerns"),j=[Z].concat(re);return function(y,z){var N=A(y,"V1"),S=[N].concat(z);return function(L,E){var M=A(L,"Storable"),C=[M].concat(E),w=n.$r(C);return x(M,"$storage_get",function(i){var l=P;if(l=localStorage.getItem(i),!h(l))return P;try{return JSON.parse(l)}catch(b){if(n.rescue(b,[w("StandardError")]))try{return P}finally{n.pop_exception(b)}else throw b}}),x(M,"$storage_set",function(i,l){var b=P;return b=JSON.stringify(l.$to_n()),localStorage.setItem(i,b)}),x(M,"$storage_remove",function(i){return localStorage.removeItem(i)})}(S[0],S)}(j[0],j)}(X[0],X)}(Q[0],Q),I(Q[0],"Storable",K(K(K(W("OpalVite"),"Concerns"),"V1"),"Storable"))};Opal.modules["opal_vite/concerns/v1/stimulus_helpers"]=function(n){var A=n.module,h=n.def,x=n.truthy,I=n.eqeq,Q=n.send,W=n.slice,P=n.ensure_kwargs,K=n.get_kwarg,p=n.hash_get,B=n.rb_plus,O=n.rb_minus,X=n.to_a,U=n.range,re=n.const_set,Z=[],j=n.$r(Z),y=n.nil,z=n.$$$;return n.add_stubs("camelize,has_target?,target_set_value,target_set_html,set_target_style,get_target_style,==,show_target,hide_target,call,body_style,to_n,storage_get,is_a?,parse_int,event_data,to_native_element,Native,map,to_a,js_timestamp,is_nan?,parse_float,to_s,empty?,respond_to?,fetch_json_promise,fetch_json_safe,js_then,js_catch,console_error,set_stimulus_value,+,stimulus_value,-,!,get_class,get_classes,has_outlet?,get_outlet,js_call_on,each,get_outlets,nil?,stimulus_dispatch,action_param,[],[]=,flatten,to_proc,blank?,private,include?,upcase,downcase,split,join,first"),function(N,S){var L=A(N,"OpalVite"),E=[L].concat(S);return function(M,C){var w=A(M,"Concerns"),m=[w].concat(C);return function(i,l){var b=A(i,"V1"),_=[b].concat(l);return function(c,o){var v=A(c,"StimulusHelpers"),T=[v].concat(o),d=n.$r(T);return h(v,"$has_target?",function($){var r=this,e=y;return e="has"+r.$camelize($)+"Target",this[e]}),h(v,"$get_target",function($){var r=this,e=y;return x(r["$has_target?"]($))?(e=""+r.$camelize($,!1)+"Target",this[e]):y}),h(v,"$get_targets",function($){var r=this,e=y;return e=""+r.$camelize($,!1)+"Targets",Array.from(this[e]||[])}),h(v,"$target_value",function($){var r=this,e=y;return x(r["$has_target?"]($))?(e=""+r.$camelize($,!1)+"Target",this[e].value):y}),h(v,"$target_set_value",function($,r){var e=this,t=y;return x(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].value=r):y}),h(v,"$target_html",function($){var r=this,e=y;return x(r["$has_target?"]($))?(e=""+r.$camelize($,!1)+"Target",this[e].innerHTML):y}),h(v,"$target_set_html",function($,r){var e=this,t=y;return x(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].innerHTML=r):y}),h(v,"$target_text",function($){var r=this,e=y;return x(r["$has_target?"]($))?(e=""+r.$camelize($,!1)+"Target",this[e].textContent):y}),h(v,"$target_set_text",function($,r){var e=this,t=y;return x(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].textContent=r):y}),h(v,"$target_data",function($,r){var e=this,t=y;return x(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].getAttribute("data-"+r)):y}),h(v,"$target_set_data",function($,r,e){var t=this,s=y;return x(t["$has_target?"]($))?(s=""+t.$camelize($,!1)+"Target",this[s].setAttribute("data-"+r,e)):y}),h(v,"$target_clear",function($){var r=this;return r.$target_set_value($,"")}),h(v,"$target_clear_html",function($){var r=this;return r.$target_set_html($,"")}),h(v,"$set_target_style",function($,r,e){var t=this,s=y;return x(t["$has_target?"]($))?(s=""+t.$camelize($,!1)+"Target",this[s].style[r]=e):y}),h(v,"$get_target_style",function($,r){var e=this,t=y;return x(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].style[r]):y}),h(v,"$show_target",function($){var r=this;return r.$set_target_style($,"display","")}),h(v,"$hide_target",function($){var r=this;return r.$set_target_style($,"display","none")}),h(v,"$toggle_target_visibility",function($){var r=this,e=y;return e=r.$get_target_style($,"display"),I(e,"none")?r.$show_target($):r.$hide_target($)}),h(v,"$add_target_class",function($,r){var e=this,t=y;return x(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].classList.add(r)):y}),h(v,"$remove_target_class",function($,r){var e=this,t=y;return x(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].classList.remove(r)):y}),h(v,"$toggle_target_class",function($,r){var e=this,t=y;return x(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].classList.toggle(r)):y}),h(v,"$has_target_class?",function($,r){var e=this,t=y;return x(e["$has_target?"]($))?(t=""+e.$camelize($,!1)+"Target",this[t].classList.contains(r)):!1}),h(v,"$js_timestamp",function(){return Date.now()}),h(v,"$js_iso_date",function(){return new Date().toISOString()}),h(v,"$js_date",function($){return $==null&&($=y),x($)?new Date($):new Date},-1),h(v,"$js_regexp",function($,r){return r==null&&(r=""),new RegExp($,r)},-2),h(v,"$js_regexp_test",function($,r,e){return e==null&&(e=""),new RegExp($,e).test(r)},-3),h(v,"$set_timeout",function a($){var r=a.$$p||y;return a.$$p=null,setTimeout(function(){r.$call()},$)}),h(v,"$set_interval",function a($){var r=a.$$p||y;return a.$$p=null,setInterval(function(){r.$call()},$)}),h(v,"$clear_timeout",function($){return clearTimeout($)}),h(v,"$clear_interval",function($){return clearInterval($)}),h(v,"$body_style",function($,r){return document.body.style[$]=r}),h(v,"$lock_body_scroll",function(){var $=this;return $.$body_style("overflow","hidden")}),h(v,"$unlock_body_scroll",function(){var $=this;return $.$body_style("overflow","")}),h(v,"$js_array",function(){return[]}),h(v,"$js_array_push",function($,r){return $.push(r.$to_n())}),h(v,"$js_array_length",function($){return $.length}),h(v,"$js_array_at",function($,r){return $[r]}),h(v,"$storage_get",function($){return localStorage.getItem($)}),h(v,"$storage_set",function($,r){return localStorage.setItem($,r)}),h(v,"$storage_remove",function($){return localStorage.removeItem($)}),h(v,"$storage_get_json",function($,r){var e=this,t=y;return r==null&&(r=y),t=e.$storage_get($),x(t===null)?r:JSON.parse(t)},-2),h(v,"$storage_set_json",function($,r){return localStorage.setItem($,JSON.stringify(r.$to_n()))}),h(v,"$dispatch_window_event",function($,r){var e=y;r==null&&(r=new Map),e=x(r["$is_a?"](d("Hash")))?r.$to_n():r;const t=new CustomEvent($,{detail:e});window.dispatchEvent(t)},-2),h(v,"$dispatch_event",function($,r){var e=y;r==null&&(r=new Map),e=x(r["$is_a?"](d("Hash")))?r.$to_n():r;const t=new CustomEvent($,{detail:e});this.element.dispatchEvent(t)},-2),h(v,"$on_window_event",function a($){var r=a.$$p||y;return a.$$p=null,window.addEventListener($,r)}),h(v,"$off_window_event",function($,r){return window.removeEventListener($,r)}),h(v,"$on_document_event",function a($){var r=a.$$p||y;return a.$$p=null,document.addEventListener($,r)}),h(v,"$on_dom_ready",function a(){var $=a.$$p||y;return a.$$p=null,document.addEventListener("DOMContentLoaded",$)}),h(v,"$on_element_event",function a($,r){var e=a.$$p||y;return a.$$p=null,$.addEventListener(r,e)}),h(v,"$off_element_event",function($,r,e){return $.removeEventListener(r,e)}),h(v,"$on_controller_event",function a($){var r=a.$$p||y;return a.$$p=null,this.element.addEventListener($,r)}),h(v,"$event_target",function(){return event.currentTarget}),h(v,"$event_data",function($){return event.currentTarget.getAttribute("data-"+$)}),h(v,"$event_data_int",function($){var r=this;return r.$parse_int(r.$event_data($))}),h(v,"$prevent_default",function(){return event.preventDefault()}),h(v,"$event_key",function(){return event.key}),h(v,"$to_native_element",function($){return x(typeof $.$to_n=="function")?$.$to_n():$}),h(v,"$add_class",function($,r){var e=this,t=y;return t=e.$to_native_element($),t.classList.add(r)}),h(v,"$remove_class",function($,r){var e=this,t=y;return t=e.$to_native_element($),t.classList.remove(r)}),h(v,"$toggle_class",function($,r){var e=this,t=y;return t=e.$to_native_element($),t.classList.toggle(r)}),h(v,"$has_class?",function($,r){var e=this,t=y;return t=e.$to_native_element($),t.classList.contains(r)}),h(v,"$set_attr",function($,r,e){var t=this,s=y;return s=t.$to_native_element($),s.setAttribute(r,e)}),h(v,"$get_attr",function($,r){var e=this,t=y;return t=e.$to_native_element($),t.getAttribute(r)}),h(v,"$remove_attr",function($,r){var e=this,t=y;return t=e.$to_native_element($),t.removeAttribute(r)}),h(v,"$set_style",function($,r,e){var t=this,s=y;return s=t.$to_native_element($),s.style[r]=e}),h(v,"$set_html",function($,r){var e=this,t=y;return t=e.$to_native_element($),t.innerHTML=r}),h(v,"$set_text",function($,r){var e=this,t=y;return t=e.$to_native_element($),t.textContent=r}),h(v,"$get_value",function($){var r=this,e=y;return e=r.$to_native_element($),e.value}),h(v,"$set_value",function($,r){var e=this,t=y;return t=e.$to_native_element($),t.value=r}),h(v,"$focus",function($){var r=this,e=y;return e=r.$to_native_element($),e.focus()}),h(v,"$has_attr?",function($,r){var e=this,t=y;return t=e.$to_native_element($),t.hasAttribute(r)}),h(v,"$create_element",function($){return document.createElement($)}),h(v,"$append_child",function($,r){var e=this,t=y,s=y;return t=e.$to_native_element($),s=e.$to_native_element(r),t.appendChild(s)}),h(v,"$remove_element",function($){var r=this,e=y;return e=r.$to_native_element($),e.remove()}),h(v,"$next_sibling",function($){var r=this,e=y;return e=r.$to_native_element($),e.nextElementSibling}),h(v,"$prev_sibling",function($){var r=this,e=y;return e=r.$to_native_element($),e.previousElementSibling}),h(v,"$parent",function($){var r=this,e=y;return e=r.$to_native_element($),e.parentElement}),h(v,"$query",function($){var r=this,e=y;return e=document.querySelector($),x(e===null)?y:r.$Native(e)}),h(v,"$query_all",function($){var r=this,e=y;return e=Array.from(document.querySelectorAll($)),Q(r.$Native(e).$to_a(),"map",[],function t(s){var u=t.$$s==null?this:t.$$s;return s==null&&(s=y),u.$Native(s)},{$$s:r})}),h(v,"$query_element",function($){var r=this,e=y;return e=this.element.querySelector($),x(e===null)?y:r.$Native(e)}),h(v,"$query_all_element",function($){var r=this,e=y;return e=Array.from(this.element.querySelectorAll($)),Q(r.$Native(e).$to_a(),"map",[],function t(s){var u=t.$$s==null?this:t.$$s;return s==null&&(s=y),u.$Native(s)},{$$s:r})}),h(v,"$doc_root",function(){return document.documentElement}),h(v,"$set_root_attr",function($,r){return document.documentElement.setAttribute($,r)}),h(v,"$get_root_attr",function($){return document.documentElement.getAttribute($)}),h(v,"$clone_template",function($){var r=this,e=y;return e=""+r.$camelize($,!1)+"Target",this[e].content.cloneNode(!0)}),h(v,"$template_first_child",function($){return $.firstElementChild}),h(v,"$element_add_class",function($){return this.element.classList.add($)}),h(v,"$element_remove_class",function($){return this.element.classList.remove($)}),h(v,"$element_toggle_class",function($){return this.element.classList.toggle($)}),h(v,"$generate_id",function(){var $=this;return $.$js_timestamp()}),h(v,"$target_focus",function($){var r=this,e=y;return x(r["$has_target?"]($))?(e=""+r.$camelize($,!1)+"Target",this[e].focus()):y}),h(v,"$target_blur",function($){var r=this,e=y;return x(r["$has_target?"]($))?(e=""+r.$camelize($,!1)+"Target",this[e].blur()):y}),h(v,"$parse_int",function($,r){return r==null&&(r=10),parseInt($,r)},-2),h(v,"$parse_float",function($){return parseFloat($)}),h(v,"$is_nan?",function($){return Number.isNaN($)}),h(v,"$parse_int_or",function($,r){var e=this,t=y;return r==null&&(r=0),t=e.$parse_int($),x(e["$is_nan?"](t))?r:t},-2),h(v,"$parse_float_or",function($,r){var e=this,t=y;return r==null&&(r=0),t=e.$parse_float($),x(e["$is_nan?"](t))?r:t},-2),h(v,"$js_prop",function($){return this[$.$to_s()]}),h(v,"$js_set_prop",function($,r){return this[$.$to_s()]=r}),h(v,"$js_has_prop?",function($){return!!this[$.$to_s()]}),h(v,"$js_call",function($,r){var e,t,s=y;return e=W(arguments,1),t=e,x(t["$empty?"]())?this[$.$to_s()]():(s=Q(t,"map",[],function(f){return f==null&&(f=y),x(f["$respond_to?"]("to_n"))?f.$to_n():f}),this[$.$to_s()].apply(this,s))},-2),h(v,"$js_call_on",function($,r,e){var t,s,u=y;return t=W(arguments,2),s=t,x(s["$empty?"]())?$[r.$to_s()]():(u=Q(s,"map",[],function(q){return q==null&&(q=y),x(q["$respond_to?"]("to_n"))?q.$to_n():q}),$[r.$to_s()].apply($,u))},-3),h(v,"$js_get",function($,r){return $[r.$to_s()]}),h(v,"$js_set",function($,r,e){return $[r.$to_s()]=e}),h(v,"$json_parse",function($){return JSON.parse($)}),h(v,"$json_stringify",function($){var r=y;return r=x($["$respond_to?"]("to_n"))?$.$to_n():$,JSON.stringify(r)}),h(v,"$console_log",function($){var r,e;return r=W(arguments),e=r,console.log.apply(console,e)},-1),h(v,"$console_warn",function($){var r,e;return r=W(arguments),e=r,console.warn.apply(console,e)},-1),h(v,"$console_error",function($){var r,e;return r=W(arguments),e=r,console.error.apply(console,e)},-1),h(v,"$js_string_char_at",function($,r){return $.charAt(r)}),h(v,"$js_substring",function($,r,e){return e==null&&(e=y),x(e)?$.substring(r,e):$.substring(r)},-3),h(v,"$js_split",function($,r){return $.split(r)}),h(v,"$js_trim",function($){return $.trim()}),h(v,"$js_includes?",function($,r){return $.includes(r)}),h(v,"$js_equals?",function($,r){return $===r}),h(v,"$js_loose_equals?",function($,r){return $==r}),h(v,"$js_random",function(){return Math.random()}),h(v,"$js_min",function($,r){return Math.min($,r)}),h(v,"$js_max",function($,r){return Math.max($,r)}),h(v,"$js_abs",function($){return Math.abs($)}),h(v,"$js_round",function($){return Math.round($)}),h(v,"$js_ceil",function($){return Math.ceil($)}),h(v,"$js_to_fixed",function($,r){return $.toFixed(r)}),h(v,"$random_int",function($){return Math.floor(Math.random()*$)}),h(v,"$js_floor",function($){return Math.floor($)}),h(v,"$js_global_exists?",function($){return typeof window[$]<"u"}),h(v,"$js_global",function($){return window[$]}),h(v,"$js_new",function($,r){var e,t,s=y;return e=W(arguments,1),t=e,x(t["$empty?"]())?new $:(s=Q(t,"map",[],function(f){return f==null&&(f=y),f!=null&&typeof f.$to_n=="function"?f.$to_n():f}),Reflect.construct($,s))},-2),h(v,"$js_define_method",function a($){var r=a.$$p||y;return a.$$p=null,this[$.$to_s()]=r}),h(v,"$js_define_method_on",function a($,r){var e=a.$$p||y;return a.$$p=null,$[r.$to_s()]=e}),h(v,"$js_length",function($){return $.length}),h(v,"$js_map",function a($){var r=a.$$p||y;return a.$$p=null,$.map(r)}),h(v,"$js_filter",function a($){var r=a.$$p||y;return a.$$p=null,$.filter(r)}),h(v,"$js_reduce",function a($,r){var e=a.$$p||y;return a.$$p=null,$.reduce(e,r)}),h(v,"$js_each",function a($){var r=a.$$p||y;return a.$$p=null,$.forEach(r)}),h(v,"$js_slice",function($,r,e){return e==null&&(e=y),x(e)?$.slice(r,e):$.slice(r)},-3),h(v,"$js_object",function(){return{}}),h(v,"$js_keys",function($){return Object.keys($)}),h(v,"$js_values",function($){return Object.values($)}),h(v,"$js_entries",function($){return Object.entries($)}),h(v,"$js_unique_count",function($){return new Set($).size}),h(v,"$js_fetch",function($){return fetch($)}),h(v,"$fetch_json",function a($){var r=a.$$p||y;a.$$p=null,fetch($).then(e=>e.json()).then(e=>r.$call(e)).catch(e=>console.error("Fetch error:",e))}),h(v,"$fetch_json_promise",function($){return fetch($).then(r=>r.json())}),h(v,"$fetch_json_safe",function($){return fetch($).then(function(r){if(!r.ok)throw new Error("Network response was not ok: "+r.status);return r.json()})}),h(v,"$fetch_all_json",function($){var r=this,e=y;return e=Q($,"map",[],function t(s){var u=t.$$s==null?this:t.$$s;return s==null&&(s=y),u.$fetch_json_promise(s)},{$$s:r}),Promise.all(e)}),h(v,"$fetch_json_with_handlers",function($,r){var e,t,s=this,u=y;return r=P(r),e=K(r,"on_success"),t=p(r,"on_error"),t==null&&(t=y),u=s.$fetch_json_safe($),u=Q(s,"js_then",[u],function(q){return q==null&&(q=y),e.$call(q)}),x(t)?Q(s,"js_catch",[u],function(q){return q==null&&(q=y),t.$call(q)}):Q(s,"js_catch",[u],function f(q){var R=f.$$s==null?this:f.$$s;return q==null&&(q=y),R.$console_error("Fetch error:",q)},{$$s:s})}),h(v,"$promise_all",function($){return Promise.all($)}),h(v,"$promise_race",function($){return Promise.race($)}),h(v,"$promise_resolve",function($){var r=y;return r=x($["$respond_to?"]("to_n"))?$.$to_n():$,Promise.resolve(r)}),h(v,"$promise_reject",function($){return Promise.reject($)}),h(v,"$js_then",function a($){var r=a.$$p||y;return a.$$p=null,$.then(r)}),h(v,"$js_catch",function a($){var r=a.$$p||y;return a.$$p=null,$.catch(r)}),h(v,"$js_finally",function a($){var r=a.$$p||y;return a.$$p=null,$.finally(r)}),h(v,"$stimulus_value",function($){var r=this,e=y;return e=""+r.$camelize($,!1)+"Value",this[e]}),h(v,"$set_stimulus_value",function($,r){var e=this,t=y,s=y;return t=""+e.$camelize($,!1)+"Value",s=x(r["$respond_to?"]("to_n"))?r.$to_n():r,this[t]=s}),h(v,"$has_stimulus_value?",function($){var r=this,e=y;return e="has"+r.$camelize($)+"Value",this[e]}),h(v,"$increment_stimulus_value",function($,r){var e=this;return r==null&&(r=1),e.$set_stimulus_value($,B(e.$stimulus_value($),r))},-2),h(v,"$decrement_stimulus_value",function($,r){var e=this;return r==null&&(r=1),e.$set_stimulus_value($,O(e.$stimulus_value($),r))},-2),h(v,"$toggle_stimulus_value",function($){var r=this;return r.$set_stimulus_value($,r.$stimulus_value($)["$!"]())}),h(v,"$get_class",function($){var r=this,e=y;return e=""+r.$camelize($,!1)+"Class",this[e]}),h(v,"$get_classes",function($){var r=this,e=y;return e=""+r.$camelize($,!1)+"Classes",Array.from(this[e]||[])}),h(v,"$has_class_definition?",function($){var r=this,e=y;return e="has"+r.$camelize($)+"Class",this[e]}),h(v,"$apply_class",function($,r){var e=this,t=y,s=y;return t=e.$to_native_element($),s=e.$get_class(r),x(s)?t.classList.add(s):y}),h(v,"$apply_classes",function($,r){var e=this,t=y,s=y;return t=e.$to_native_element($),s=e.$get_classes(r),x(s)?t.classList.add(...s):y}),h(v,"$remove_applied_class",function($,r){var e=this,t=y,s=y;return t=e.$to_native_element($),s=e.$get_class(r),x(s)?t.classList.remove(s):y}),h(v,"$remove_applied_classes",function($,r){var e=this,t=y,s=y;return t=e.$to_native_element($),s=e.$get_classes(r),x(s)?t.classList.remove(...s):y}),h(v,"$has_outlet?",function($){var r=this,e=y;return e="has"+r.$camelize($)+"Outlet",this[e]}),h(v,"$get_outlet",function($){var r=this,e=y;return e=""+r.$camelize($,!1)+"Outlet",this[e]}),h(v,"$get_outlets",function($){var r=this,e=y;return e=""+r.$camelize($,!1)+"Outlets",Array.from(this[e]||[])}),h(v,"$get_outlet_element",function($){var r=this,e=y;return e=""+r.$camelize($,!1)+"OutletElement",this[e]}),h(v,"$get_outlet_elements",function($){var r=this,e=y;return e=""+r.$camelize($,!1)+"OutletElements",Array.from(this[e]||[])}),h(v,"$call_outlet",function($,r,e){var t,s,u=this,f=y;return t=W(arguments,2),s=t,x(u["$has_outlet?"]($))?(f=u.$get_outlet($),Q(u,"js_call_on",[f,r].concat(X(s)))):y},-3),h(v,"$call_all_outlets",function($,r,e){var t,s,u=this;return t=W(arguments,2),s=t,Q(u.$get_outlets($),"each",[],function f(q){var R=f.$$s==null?this:f.$$s;return q==null&&(q=y),Q(R,"js_call_on",[q,r].concat(X(s)))},{$$s:u})},-3),h(v,"$stimulus_dispatch",function($,r){var e,t,s,u,f,q=y,R=y;return r=P(r),e=p(r,"detail"),e==null&&(e=new Map),t=p(r,"target"),t==null&&(t=y),s=p(r,"prefix"),s==null&&(s=y),u=p(r,"bubbles"),u==null&&(u=!0),f=p(r,"cancelable"),f==null&&(f=!0),q=x(e["$respond_to?"]("to_n"))?e.$to_n():e,R={detail:q,bubbles:u,cancelable:f},x(t["$nil?"]())||(R.target=t),x(s["$nil?"]())||(R.prefix=s),this.dispatch($,R)},-2),h(v,"$stimulus_dispatch_confirm",function($,r){var e,t=this,s=y;return r=P(r),e=p(r,"detail"),e==null&&(e=new Map),s=t.$stimulus_dispatch($,new Map([["detail",e],["cancelable",!0]])),!s.defaultPrevented},-2),h(v,"$action_params",function(){return event.params||{}}),h(v,"$action_param",function($){return(event.params||{})[$.$to_s()]}),h(v,"$action_param_int",function($,r){var e=this,t=y,s=y;return r==null&&(r=0),t=e.$action_param($),s=e.$parse_int(t),x(e["$is_nan?"](s))?r:s},-2),h(v,"$action_param_bool",function($){var r=this,e=y;return e=r.$action_param($),!!e&&e!=="false"&&e!=="0"}),h(v,"$has_action_param?",function($){return(event.params||{}).hasOwnProperty($.$to_s())}),h(v,"$this_application",function(){return this.application}),h(v,"$this_identifier",function(){return this.identifier}),h(v,"$this_element",function(){return this.element}),h(v,"$get_controller",function($,r){var e=this,t=y;return t=e.$to_native_element($),this.application.getControllerForElementAndIdentifier(t,r)}),h(v,"$get_controllers",function($,r){var e=this,t=y;t=e.$to_native_element($),Array.from(t.querySelectorAll('[data-controller~="'+r+'"]')).map(s=>this.application.getControllerForElementAndIdentifier(s,r)).filter(s=>s!==null)}),h(v,"$this_scope",function(){return this.scope.element}),h(v,"$in_scope?",function($){var r=this,e=y;return e=r.$to_native_element($),this.element.contains(e)}),h(v,"$debounce",function a($){var r=a.$$p||y;a.$$p=null;var e;return function(...t){clearTimeout(e),e=setTimeout(()=>r.$call(),$)}}),h(v,"$throttle",function a($){var r=a.$$p||y;a.$$p=null;var e=0;return function(...t){var s=Date.now();s-e>=$&&(e=s,r.$call())}}),h(v,"$debounced",function a($,r){var e=a.$$p||y,t,s=this,u=y,f=y;return s._debounce_timers==null&&(s._debounce_timers=y),a.$$p=null,r==null&&(r="default"),s._debounce_timers=x(u=s._debounce_timers)?u:new Map,f="_debounce_"+r,clearTimeout(s._debounce_timers["$[]"](f)),t=[f,setTimeout(function(){e.$call()},$)],Q(s._debounce_timers,"[]=",t),t[t.length-1]},-2),h(v,"$throttled",function a($,r){var e=a.$$p||y,t=this,s=y,u=y,f=y,q=y;return t._throttle_times==null&&(t._throttle_times=y),a.$$p=null,r==null&&(r="default"),t._throttle_times=x(s=t._throttle_times)?s:new Map,u="_throttle_"+r,f=Date.now(),q=x(s=t._throttle_times["$[]"](u))?s:0,x(f-q>=$)?(t._throttle_times["$[]="](u,f),e.$call()):y},-2),h(v,"$copy_to_clipboard",function a($){var r=a.$$p||y;a.$$p=null,navigator.clipboard.writeText($).then(function(){x(r)&&r.$call()})}),h(v,"$read_from_clipboard",function a(){var $=a.$$p||y;a.$$p=null,navigator.clipboard.readText().then(function(r){$.$call(r)})}),h(v,"$deep_clone",function($){return JSON.parse(JSON.stringify($.$to_n()))}),h(v,"$deep_merge",function($,r){function e(t,s){var u=Object.assign({},t);for(var f in s)s.hasOwnProperty(f)&&(s[f]&&typeof s[f]=="object"&&!Array.isArray(s[f])?u[f]=e(u[f]||{},s[f]):u[f]=s[f]);return u}return e($.$to_n(),r.$to_n())}),h(v,"$pick",function($,r){var e,t,s=y;return e=W(arguments,1),t=e,s=new Map,Q(t.$flatten(),"each",[],function(f){var q,R=y,H=y;return f==null&&(f=y),R=f.$to_s(),H=$.$to_n(),x(H.hasOwnProperty(R))?(q=[R,H[R]],Q(s,"[]=",q),q[q.length-1]):y}),s},-2),h(v,"$omit",function($,r){var e,t,s,u=y,f=y,q=y;return e=W(arguments,1),t=e,u=Q(t.$flatten(),"map",[],"to_s".$to_proc()),f=new Map,q=$.$to_n(),Object.keys(q).forEach(function(R){u.includes(R)||(s=[R,q[R]],Q(f,"[]=",s),s[s.length-1])}),f},-2),h(v,"$unique",function($){return[...new Set($.$to_n())]}),h(v,"$intersection",function($,r){var e=y;return e=new Set(r.$to_n()),$.$to_n().filter(t=>e.has(t))}),h(v,"$difference",function($,r){var e=y;return e=new Set(r.$to_n()),$.$to_n().filter(t=>!e.has(t))}),h(v,"$union",function($,r){return[...new Set([...$.$to_n(),...r.$to_n()])]}),h(v,"$valid_email?",function($){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($)}),h(v,"$valid_url?",function($){try{return new URL($),!0}catch{return!1}}),h(v,"$valid_phone?",function($){var r=y;r=$.replace(/[\s\-\(\)\.]/g,"");var e=/^[\+]?[0-9]{10,15}$/;return e.test(r)}),h(v,"$blank?",function($){return x($["$nil?"]())?!0:x(typeof $=="string")?$.trim()==="":x(Array.isArray($))?$.length===0:!1}),h(v,"$present?",function($){var r=this;return r["$blank?"]($)["$!"]()}),h(v,"$min_length?",function($,r){return x($["$nil?"]())?!1:$.length>=r}),h(v,"$max_length?",function($,r){return x($["$nil?"]())?!1:$.length<=r}),h(v,"$matches_pattern?",function($,r){return x($["$nil?"]())?!1:new RegExp(r).test($)}),h(v,"$console_styled",function($,r){return r==null&&(r="color: blue; font-weight: bold;"),console.log("%c"+$,r)},-2),h(v,"$console_group",function a($,r){var e=a.$$p||y,t;return a.$$p=null,r=P(r),t=p(r,"collapsed"),t==null&&(t=!1),x(t)?console.groupCollapsed($):console.group($),e.$call(),console.groupEnd()},-2),h(v,"$console_table",function($){return console.table($.$to_n())}),h(v,"$console_time",function($){var r=y;return r=new Date().toISOString(),console.log("["+r+"] "+$)}),v.$private(),h(v,"$camelize",function($,r){var e=y,t=y;return r==null&&(r=!0),e=$.$to_s(),x(e["$include?"]("_"))?(t=e.$split("_"),x(r)?Q(t,"map",[],"capitalize".$to_proc()).$join():B([t.$first()],Q(t["$[]"](U(1,-1,!1)),"map",[],"capitalize".$to_proc())).$join()):x(r)?B(e["$[]"](0).$upcase(),e["$[]"](U(1,-1,!1)).$to_s()):B(e["$[]"](0).$downcase(),e["$[]"](U(1,-1,!1)).$to_s())},-2)}(_[0],_)}(m[0],m)}(E[0],E)}(Z[0],Z),re(Z[0],"StimulusHelpers",z(z(z(j("OpalVite"),"Concerns"),"V1"),"StimulusHelpers"))};Opal.modules["opal_vite/concerns/v1/vue_helpers"]=function(n){var A=n.module,h=n.def,x=n.lambda,I=n.send,Q=n.slice,W=n.to_a,P=n.truthy,K=n.const_set,p=[],B=n.$r(p),O=n.nil,X=n.$$$;return n.add_stubs("extend,Native,to_n,each,[]=,proc,call,map,to_a"),function(U,re){var Z=A(U,"OpalVite"),j=[Z].concat(re);return function(y,z){var N=A(y,"Concerns"),S=[N].concat(z);return function(L,E){var M=A(L,"V1"),C=[M].concat(E);return function(w){var m=A(w,"VueHelpers");return m.$extend(m),h(m,"$vue",function(){return window.Vue}),h(m,"$create_app",function(l){var b=this;return l==null&&(l=new Map),b.$Native(window.Vue.createApp(l.$to_n()))},-1),h(m,"$vue_ref",function(l){var b=this;return b.$Native(window.Vue.ref(l))}),h(m,"$vue_reactive",function(l){var b=this;return b.$Native(window.Vue.reactive(l.$to_n()))}),h(m,"$vue_computed",function i(){var l=i.$$p||O,b=this;return i.$$p=null,b.$Native(window.Vue.computed(l))}),h(m,"$vue_watch",function i(l){var b=i.$$p||O;return i.$$p=null,window.Vue.watch(l,b)}),h(m,"$data_fn",function(l){return x(function(){return l.$to_n()})}),h(m,"$methods_obj",function(l){var b=O;return b=new Map,I(l,"each",[],function(c,o){var v;return c==null&&(c=O),o==null&&(o=O),v=[c,o],I(b,"[]=",v),v[v.length-1]}),b.$to_n()}),h(m,"$computed_obj",function(l){var b=O;return b=new Map,I(l,"each",[],function(c,o){var v;return c==null&&(c=O),o==null&&(o=O),v=[c,o],I(b,"[]=",v),v[v.length-1]}),b.$to_n()}),h(m,"$vue_fn",function i(){var l=i.$$p||O;return i.$$p=null,function(){var b=l;return function(){return b.apply(this,arguments)}}()}),h(m,"$vue_method",function i(){var l=i.$$p||O,b=this,_=O;return i.$$p=null,_=I(b,"proc",[],function c(o){var v,T,d=c.$$s==null?this:c.$$s,a=O;return v=Q(arguments),T=v,a=d.$Native(this),I(l,"call",[a].concat(W(T)))},{$$arity:-1,$$s:b}),function(){var c=_;return function(){return c.apply(this,arguments)}}()}),h(m,"$vue_computed_fn",function i(){var l=i.$$p||O,b=this,_=O;return i.$$p=null,_=I(b,"proc",[],function c(){var o=c.$$s==null?this:c.$$s,v=O;return v=o.$Native(this),l.$call(v)},{$$s:b}),function(){var c=_;return function(){return c.apply(this,arguments)}}()}),h(m,"$vue_hook",function i(){var l=i.$$p||O,b=this,_=O;return i.$$p=null,_=I(b,"proc",[],function c(){var o=c.$$s==null?this:c.$$s,v=O;return v=o.$Native(this),l.$call(v)},{$$s:b}),function(){var c=_;return function(){return c.apply(this,arguments)}}()}),h(m,"$on_mounted",function i(){var l=i.$$p||O;return i.$$p=null,window.Vue.onMounted(l)}),h(m,"$on_unmounted",function i(){var l=i.$$p||O;return i.$$p=null,window.Vue.onUnmounted(l)}),h(m,"$on_updated",function i(){var l=i.$$p||O;return i.$$p=null,window.Vue.onUpdated(l)}),h(m,"$on_before_mount",function i(){var l=i.$$p||O;return i.$$p=null,window.Vue.onBeforeMount(l)}),h(m,"$on_before_unmount",function i(){var l=i.$$p||O;return i.$$p=null,window.Vue.onBeforeUnmount(l)}),h(m,"$window_get",function(l){return window[l]}),h(m,"$window_set",function(l,b){return window[l]=b}),h(m,"$console_log",function(l){var b,_;return b=Q(arguments),_=b,console.log(..._)},-1),h(m,"$console_warn",function(l){var b,_;return b=Q(arguments),_=b,console.warn(..._)},-1),h(m,"$console_error",function(l){var b,_;return b=Q(arguments),_=b,console.error(..._)},-1),h(m,"$on_dom_ready",function i(){var l=i.$$p||O;return i.$$p=null,document.addEventListener("DOMContentLoaded",l)}),h(m,"$query",function(l){var b=this,_=O;return _=document.querySelector(l),P(_===null)?O:b.$Native(_)}),h(m,"$query_all",function(l){var b=this,_=O;return _=Array.from(document.querySelectorAll(l)),I(b.$Native(_).$to_a(),"map",[],function c(o){var v=c.$$s==null?this:c.$$s;return o==null&&(o=O),v.$Native(o)},{$$s:b})}),h(m,"$get_element_by_id",function(l){var b=this,_=O;return _=document.getElementById(l),P(_===null)?O:b.$Native(_)}),h(m,"$set_timeout",function i(l){var b=i.$$p||O;return i.$$p=null,setTimeout(b,l)}),h(m,"$set_interval",function i(l){var b=i.$$p||O;return i.$$p=null,setInterval(b,l)}),h(m,"$clear_timeout",function(l){return clearTimeout(l)}),h(m,"$clear_interval",function(l){return clearInterval(l)}),h(m,"$storage_get",function(l){return localStorage.getItem(l)}),h(m,"$storage_set",function(l,b){return localStorage.setItem(l,b)}),h(m,"$storage_remove",function(l){return localStorage.removeItem(l)}),h(m,"$parse_json",function(l){return JSON.parse(l)}),h(m,"$to_json_string",function(l){return JSON.stringify(l)}),h(m,"$parse_int",function(l,b){return b==null&&(b=10),parseInt(l,b)},-2),h(m,"$parse_float",function(l){return parseFloat(l)}),h(m,"$is_nan?",function(l){return Number.isNaN(l)})}(C[0])}(S[0],S)}(j[0],j)}(p[0],p),K(p[0],"VueHelpers",X(X(X(B("OpalVite"),"Concerns"),"V1"),"VueHelpers"))};Opal.modules["opal_vite/concerns/v1/react_helpers"]=function(n){var A=n.module,h=n.def,x=n.slice,I=n.truthy,Q=n.send,W=n.to_a,P=n.const_set,K=[],p=n.$r(K),B=n.nil,O=n.$$$;return n.add_stubs("Native,map,to_a,createElement,react,call,to_n,parse_int,is_nan?,parse_float"),function(X,U){var re=A(X,"OpalVite"),Z=[re].concat(U);return function(j,y){var z=A(j,"Concerns"),N=[z].concat(y);return function(S,L){var E=A(S,"V1"),M=[E].concat(L);return function(C){var w=A(C,"ReactHelpers");return h(w,"$react",function(){var i=this;return i.$Native(window.React)}),h(w,"$react_dom",function(){var i=this;return i.$Native(window.ReactDOM)}),h(w,"$window_get",function(i){return window[i]}),h(w,"$window_set",function(i,l){return window[i]=l}),h(w,"$window_delete",function(i){return delete window[i]}),h(w,"$console_log",function(i){var l,b;return l=x(arguments),b=l,console.log(...b)},-1),h(w,"$console_warn",function(i){var l,b;return l=x(arguments),b=l,console.warn(...b)},-1),h(w,"$console_error",function(i){var l,b;return l=x(arguments),b=l,console.error(...b)},-1),h(w,"$alert_message",function(i){return alert(i)}),h(w,"$confirm_message",function(i){return confirm(i)}),h(w,"$prompt_message",function(i,l){return l==null&&(l=""),prompt(i,l)},-2),h(w,"$on_dom_ready",function m(){var i=m.$$p||B;return m.$$p=null,document.addEventListener("DOMContentLoaded",i)}),h(w,"$on_window_event",function m(i){var l=m.$$p||B;return m.$$p=null,window.addEventListener(i,l)}),h(w,"$off_window_event",function(i,l){return window.removeEventListener(i,l)}),h(w,"$query",function(i){var l=this,b=B;return b=document.querySelector(i),I(b===null)?B:l.$Native(b)}),h(w,"$query_all",function(i){var l=this,b=B;return b=Array.from(document.querySelectorAll(i)),Q(l.$Native(b).$to_a(),"map",[],function _(c){var o=_.$$s==null?this:_.$$s;return c==null&&(c=B),o.$Native(c)},{$$s:l})}),h(w,"$get_element_by_id",function(i){var l=this,b=B;return b=document.getElementById(i),I(b===null)?B:l.$Native(b)}),h(w,"$create_element",function(i){return document.createElement(i)}),h(w,"$set_html",function(i,l){return i.innerHTML=l}),h(w,"$set_text",function(i,l){return i.textContent=l}),h(w,"$add_class",function(i,l){var b,_;return b=x(arguments,1),_=b,i.classList.add(..._)},-2),h(w,"$remove_class",function(i,l){var b,_;return b=x(arguments,1),_=b,i.classList.remove(..._)},-2),h(w,"$el",function(i,l,b){var _,c,o,v=this;return _=x(arguments,1),_.length>0&&(c=_.shift()),c==null&&(c=B),o=_,Q(v.$react(),"createElement",[i,c].concat(W(o)))},-2),h(w,"$div",function m(i,l){var b=m.$$p||B,_,c,o,v=this;return m.$$p=null,_=x(arguments),_.length>0&&(c=_.shift()),c==null&&(c=B),o=_,b!==B?v.$react().$createElement("div",c,b.$call()):Q(v.$react(),"createElement",["div",c].concat(W(o)))},-1),h(w,"$span",function m(i,l){var b=m.$$p||B,_,c,o,v=this;return m.$$p=null,_=x(arguments),_.length>0&&(c=_.shift()),c==null&&(c=B),o=_,b!==B?v.$react().$createElement("span",c,b.$call()):Q(v.$react(),"createElement",["span",c].concat(W(o)))},-1),h(w,"$button",function m(i,l){var b=m.$$p||B,_,c,o,v=this;return m.$$p=null,_=x(arguments),_.length>0&&(c=_.shift()),c==null&&(c=B),o=_,b!==B?v.$react().$createElement("button",c,b.$call()):Q(v.$react(),"createElement",["button",c].concat(W(o)))},-1),h(w,"$paragraph",function m(i,l){var b=m.$$p||B,_,c,o,v=this;return m.$$p=null,_=x(arguments),_.length>0&&(c=_.shift()),c==null&&(c=B),o=_,b!==B?v.$react().$createElement("p",c,b.$call()):Q(v.$react(),"createElement",["p",c].concat(W(o)))},-1),h(w,"$h1",function(i,l){var b,_,c,o=this;return b=x(arguments),b.length>0&&(_=b.shift()),_==null&&(_=B),c=b,Q(o.$react(),"createElement",["h1",_].concat(W(c)))},-1),h(w,"$h2",function(i,l){var b,_,c,o=this;return b=x(arguments),b.length>0&&(_=b.shift()),_==null&&(_=B),c=b,Q(o.$react(),"createElement",["h2",_].concat(W(c)))},-1),h(w,"$h3",function(i,l){var b,_,c,o=this;return b=x(arguments),b.length>0&&(_=b.shift()),_==null&&(_=B),c=b,Q(o.$react(),"createElement",["h3",_].concat(W(c)))},-1),h(w,"$set_timeout",function m(i){var l=m.$$p||B;return m.$$p=null,setTimeout(l,i)}),h(w,"$set_interval",function m(i){var l=m.$$p||B;return m.$$p=null,setInterval(l,i)}),h(w,"$clear_timeout",function(i){return clearTimeout(i)}),h(w,"$clear_interval",function(i){return clearInterval(i)}),h(w,"$storage_get",function(i){return localStorage.getItem(i)}),h(w,"$storage_set",function(i,l){return localStorage.setItem(i,l)}),h(w,"$storage_remove",function(i){return localStorage.removeItem(i)}),h(w,"$fetch_url",function(i,l){var b=this;return l==null&&(l=B),I(l)?b.$Native(fetch(i,l.$to_n())):b.$Native(fetch(i))},-2),h(w,"$parse_json",function(i){return JSON.parse(i)}),h(w,"$to_json",function(i){return JSON.stringify(i)}),h(w,"$parse_int",function(i,l){return l==null&&(l=10),parseInt(i,l)},-2),h(w,"$parse_float",function(i){return parseFloat(i)}),h(w,"$is_nan?",function(i){return Number.isNaN(i)}),h(w,"$parse_int_or",function(i,l){var b=this,_=B;return l==null&&(l=0),_=b.$parse_int(i),I(b["$is_nan?"](_))?l:_},-2),h(w,"$parse_float_or",function(i,l){var b=this,_=B;return l==null&&(l=0),_=b.$parse_float(i),I(b["$is_nan?"](_))?l:_},-2)}(M[0])}(N[0],N)}(Z[0],Z)}(K[0],K),P(K[0],"ReactHelpers",O(O(O(p("OpalVite"),"Concerns"),"V1"),"ReactHelpers"))};Opal.modules["opal_vite/concerns/v1/uri_helpers"]=function(n){var A=n.module,h=n.def,x=n.truthy,I=n.send,Q=n.not,W=n.rb_plus,P=n.range,K=n.slice,p=n.const_set,B=[],O=n.$r(B),X=n.nil,U=n.$$$;return n.add_stubs("[]=,[],!,empty?,to_s,+,parse_url,each,url_set_param,url_to_string,start_with?,join,reject,map,gsub,to_proc,last,split,pop,path_basename,rindex"),function(re,Z){var j=A(re,"OpalVite"),y=[j].concat(Z);return function(z,N){var S=A(z,"Concerns"),L=[S].concat(N);return function(E,M){var C=A(E,"V1"),w=[C].concat(M);return function(m,i){var l=A(m,"URIHelpers"),b=[l].concat(i),_=n.$r(b);return h(l,"$parse_url",function(o){try{return new URL(o)}catch(v){if(n.rescue(v,[_("StandardError")]))try{return X}finally{n.pop_exception(v)}else throw v}}),h(l,"$parse_url_with_base",function(o,v){try{return new URL(o,v)}catch(T){if(n.rescue(T,[_("StandardError")]))try{return X}finally{n.pop_exception(T)}else throw T}}),h(l,"$current_url",function(){return new URL(window.location.href)}),h(l,"$url_protocol",function(o){return o.protocol}),h(l,"$url_hostname",function(o){return o.hostname}),h(l,"$url_host",function(o){return o.host}),h(l,"$url_port",function(o){return o.port}),h(l,"$url_pathname",function(o){return o.pathname}),h(l,"$url_search",function(o){return o.search}),h(l,"$url_hash",function(o){return o.hash}),h(l,"$url_origin",function(o){return o.origin}),h(l,"$url_to_string",function(o){return o.href}),h(l,"$url_param",function(o,v){var T=X;return T=o.searchParams.get(v),x(T===null)?X:T}),h(l,"$url_params",function(o,v){return Array.from(o.searchParams.getAll(v))}),h(l,"$url_has_param?",function(o,v){return o.searchParams.has(v)}),h(l,"$url_all_params",function(o){var v,T=X;return T=new Map,o.searchParams.forEach((d,a)=>{v=[a,d],I(T,"[]=",v),v[v.length-1]}),T}),h(l,"$url_set_param",function(o,v,T){return o.searchParams.set(v,T)}),h(l,"$url_append_param",function(o,v,T){return o.searchParams.append(v,T)}),h(l,"$url_delete_param",function(o,v){return o.searchParams.delete(v)}),h(l,"$build_url",function(o){var v=this,T=X,d=X,a=X,$=X,r=X,e=X,t=X,s=X,u=X;return o==null&&(o=new Map),T=x(d=o["$[]"]("protocol"))?d:"https:",a=x(d=o["$[]"]("hostname"))?d:"localhost",$=o["$[]"]("port"),r=x(d=o["$[]"]("pathname"))?d:"/",e=x(d=o["$[]"]("params"))?d:new Map,t=o["$[]"]("hash"),s=""+T+"//"+a,x($)&&Q($.$to_s()["$empty?"]())&&(s=W(s,":"+$)),s=W(s,r),u=v.$parse_url(s),x(u)?(I(e,"each",[],function f(q,R){var H=f.$$s==null?this:f.$$s;return q==null&&(q=X),R==null&&(R=X),H.$url_set_param(u,q.$to_s(),R.$to_s())},{$$s:v}),x(t)&&(u.hash=t),v.$url_to_string(u)):X},-1),h(l,"$encode_uri_component",function(o){return encodeURIComponent(o)}),h(l,"$decode_uri_component",function(o){try{return decodeURIComponent(o)}catch(v){if(n.rescue(v,[_("StandardError")]))try{return o}finally{n.pop_exception(v)}else throw v}}),h(l,"$encode_uri",function(o){return encodeURI(o)}),h(l,"$decode_uri",function(o){try{return decodeURI(o)}catch(v){if(n.rescue(v,[_("StandardError")]))try{return o}finally{n.pop_exception(v)}else throw v}}),h(l,"$parse_query_string",function(o){var v,T=X,d=X,a=X;return T=o.$to_s(),x(T["$start_with?"]("?"))&&(T=T["$[]"](P(1,-1,!1))),d=new Map,a=new URLSearchParams(T),a.forEach(($,r)=>{v=[r,$],I(d,"[]=",v),v[v.length-1]}),d}),h(l,"$build_query_string",function(o){var v=X;return v=new URLSearchParams,I(o,"each",[],function(d,a){return d==null&&(d=X),a==null&&(a=X),v.append(d.$to_s(),a.$to_s())}),v.toString()}),h(l,"$join_path",function(o){var v,T;return v=K(arguments),T=v,I(I(T,"map",[],function(a){return a==null&&(a=X),a.$to_s().$gsub(/^\/|\/$/,"")}),"reject",[],"empty?".$to_proc()).$join("/")},-1),h(l,"$path_basename",function(o){var v=X;return x(v=o.$to_s().$split("/").$last())?v:""}),h(l,"$path_dirname",function(o){var v=X,T=X;return v=o.$to_s().$split("/"),v.$pop(),x(T=v.$join("/"))?T:"/"}),h(l,"$path_extname",function(o){var v=this,T=X,d=X;return T=v.$path_basename(o),d=T.$rindex("."),x(d)?T["$[]"](n.Range.$new(d,-1,!1)):""})}(w[0],w)}(L[0],L)}(y[0],y)}(B[0],B),p(B[0],"URIHelpers",U(U(U(O("OpalVite"),"Concerns"),"V1"),"URIHelpers"))};Opal.modules["opal_vite/concerns/v1/base64_helpers"]=function(n){var A=n.module,h=n.def,x=n.truthy,I=n.rb_plus,Q=n.range,W=n.neqeq,P=n.rb_minus,K=n.rb_divide,p=n.rb_times,B=n.const_set,O=[],X=n.$r(O),U=n.nil,re=n.$$$;return n.add_stubs("base64_encode,gsub,%,length,+,base64_decode,base64_encode_unicode,start_with?,to_s,base64_decode_unicode,[],split,!=,base64_decode_urlsafe,decode_jwt_payload,empty?,nil?,end_with?,-,/,*"),function(Z,j){var y=A(Z,"OpalVite"),z=[y].concat(j);return function(N,S){var L=A(N,"Concerns"),E=[L].concat(S);return function(M,C){var w=A(M,"V1"),m=[w].concat(C);return function(i,l){var b=A(i,"Base64Helpers"),_=[b].concat(l),c=n.$r(_);return h(b,"$base64_encode",function(v){try{return btoa(v)}catch(T){if(n.rescue(T,[c("StandardError")]))try{return U}finally{n.pop_exception(T)}else throw T}}),h(b,"$base64_decode",function(v){try{return atob(v)}catch(T){if(n.rescue(T,[c("StandardError")]))try{return U}finally{n.pop_exception(T)}else throw T}}),h(b,"$base64_encode_urlsafe",function(v){var T=this,d=U;return d=T.$base64_encode(v),x(d)?d.$gsub("+","-").$gsub("/","_").$gsub("=",""):U}),h(b,"$base64_decode_urlsafe",function(v){var T=this,d=U;switch(d=v.$gsub("-","+").$gsub("_","/"),d.$length()["$%"](4).valueOf()){case 2:d=I(d,"==");break;case 3:d=I(d,"=");break}return T.$base64_decode(d)}),h(b,"$base64_encode_unicode",function(v){try{return btoa(unescape(encodeURIComponent(v)))}catch(T){if(n.rescue(T,[c("StandardError")]))try{return U}finally{n.pop_exception(T)}else throw T}}),h(b,"$base64_decode_unicode",function(v){try{return decodeURIComponent(escape(atob(v)))}catch(T){if(n.rescue(T,[c("StandardError")]))try{return U}finally{n.pop_exception(T)}else throw T}}),h(b,"$base64_encode_buffer",function(v){try{for(var T=new Uint8Array(v),d="",a=0;a<T.byteLength;a++)d+=String.fromCharCode(T[a]);return btoa(d)}catch($){if(n.rescue($,[c("StandardError")]))try{return U}finally{n.pop_exception($)}else throw $}}),h(b,"$base64_decode_to_buffer",function(v){try{for(var T=atob(v),d=new Uint8Array(T.length),a=0;a<T.length;a++)d[a]=T.charCodeAt(a);return d}catch($){if(n.rescue($,[c("StandardError")]))try{return U}finally{n.pop_exception($)}else throw $}}),h(b,"$to_data_url",function(v,T){var d=this,a=U;return T==null&&(T="text/plain"),a=d.$base64_encode_unicode(v),x(a)?"data:"+T+";base64,"+a:U},-2),h(b,"$parse_data_url",function(v){var T=this,d=U;return!x(v.$to_s()["$start_with?"]("data:"))||(d=v.match(/^data:([^;]+);base64,(.+)$/),x(d===null))?U:new Map([["mime_type",d[1]],["data",T.$base64_decode_unicode(d[2])]])}),h(b,"$basic_auth_header",function(v,T){var d=this,a=U,$=U;return a=""+v+":"+T,$=d.$base64_encode(a),"Basic "+$}),h(b,"$parse_basic_auth",function(v){var T=this,d=U,a=U,$=U;return!x(v.$to_s()["$start_with?"]("Basic "))||(d=v["$[]"](Q(6,-1,!1)),a=T.$base64_decode(d),!x(a))||($=a.$split(":",2),W($.$length(),2))?U:new Map([["username",$["$[]"](0)],["password",$["$[]"](1)]])}),h(b,"$decode_jwt_payload",function(v){var T=this,d=U,a=U,$=U;try{return d=v.$to_s().$split("."),W(d.$length(),3)||(a=d["$[]"](1),$=T.$base64_decode_urlsafe(a),!x($))?U:JSON.parse($)}catch(r){if(n.rescue(r,[c("StandardError")]))try{return U}finally{n.pop_exception(r)}else throw r}}),h(b,"$jwt_expired?",function(v){var T=this,d=U,a=U,$=U;return d=T.$decode_jwt_payload(v),x(d)?(a=d.exp,x(a==null)?!1:($=Math.floor(Date.now()/1e3),a<$)):!0}),h(b,"$jwt_expires_at",function(v){var T=this,d=U,a=U;return d=T.$decode_jwt_payload(v),!x(d)||(a=d.exp,x(a==null))?U:new Date(a*1e3)}),h(b,"$valid_base64?",function(v){if(x(v["$nil?"]())||x(v["$empty?"]()))return!1;var T=/^[A-Za-z0-9+/]*={0,2}$/;if(!T.test(v)||v.length%4!==0)return!1;try{return atob(v),!0}catch{return!1}}),h(b,"$base64_decoded_length",function(v){var T=U,d=U;return x(v["$nil?"]())||x(v["$empty?"]())?0:(T=v.$length(),d=x(v["$end_with?"]("=="))?2:x(v["$end_with?"]("="))?1:0,P(K(p(T,3),4),d))})}(m[0],m)}(E[0],E)}(z[0],z)}(O[0],O),B(O[0],"Base64Helpers",re(re(re(X("OpalVite"),"Concerns"),"V1"),"Base64Helpers"))};Opal.modules["opal_vite/concerns/v1/debug_helpers"]=function(n){var A=n.module,h=n.truthy,x=n.def,I=n.rb_minus,Q=n.const_set,W=[],P=n.$r(W),K=n.nil,p=n.$$$;return n.add_stubs("debug_enabled?,to_n,inspect,nil?,debug_log,-,round,respond_to?,class,stimulus_name,name"),function(B,O){var X=A(B,"OpalVite"),U=[X].concat(O);return function(re,Z){var j=A(re,"Concerns"),y=[j].concat(Z);return function(z,N){var S=A(z,"V1"),L=[S].concat(N);return function(E){var M=A(E,"DebugHelpers");return x(M,"$debug_log",function(w,m){var i=this;return m==null&&(m=K),h(i["$debug_enabled?"]())?h(m)?console.log("[DEBUG] "+w,m.$to_n()):console.log("[DEBUG] "+w):K},-2),x(M,"$debug_warn",function(w,m){var i=this;return m==null&&(m=K),h(i["$debug_enabled?"]())?h(m)?console.warn("[WARN] "+w,m.$to_n()):console.warn("[WARN] "+w):K},-2),x(M,"$debug_error",function(w,m){return m==null&&(m=K),h(m)?console.error("[ERROR] "+w,m.$to_n()):console.error("[ERROR] "+w)},-2),x(M,"$debug_group",function C(w){var m=C.$$p||K,i=this;return C.$$p=null,h(i["$debug_enabled?"]())?(console.group("[DEBUG] "+w),n.yieldX(m,[]),console.groupEnd()):n.yieldX(m,[])}),x(M,"$debug_group_collapsed",function C(w){var m=C.$$p||K,i=this;return C.$$p=null,h(i["$debug_enabled?"]())?(console.groupCollapsed("[DEBUG] "+w),n.yieldX(m,[]),console.groupEnd()):n.yieldX(m,[])}),x(M,"$debug_time",function(w){var m=this;return h(m["$debug_enabled?"]())?console.time("[TIMER] "+w):K}),x(M,"$debug_time_end",function(w){var m=this;return h(m["$debug_enabled?"]())?console.timeEnd("[TIMER] "+w):K}),x(M,"$debug_table",function(w){var m=this;return h(m["$debug_enabled?"]())?console.table(w.$to_n()):K}),x(M,"$debug_inspect",function(w,m){var i=this,l=K;return m==null&&(m=K),h(i["$debug_enabled?"]())?(l=w.$inspect(),h(m)?console.log("[INSPECT] "+m+":",l):console.log("[INSPECT]",l)):K},-2),x(M,"$debug_trace",function(w){var m=this;return w==null&&(w=K),h(m["$debug_enabled?"]())?h(w)?console.trace("[TRACE] "+w):console.trace("[TRACE]"):K},-1),x(M,"$debug_assert",function(w,m){return m==null&&(m="Assertion failed"),console.assert(w,"[ASSERT] "+m)},-2),x(M,"$debug_count",function(w){var m=this;return w==null&&(w="default"),h(m["$debug_enabled?"]())?console.count("[COUNT] "+w):K},-1),x(M,"$debug_count_reset",function(w){var m=this;return w==null&&(w="default"),h(m["$debug_enabled?"]())?console.countReset("[COUNT] "+w):K},-1),x(M,"$debug_enabled?",function(){var w=this;return w.debug_enabled==null&&(w.debug_enabled=K),h(w.debug_enabled["$nil?"]())?w.debug_enabled=typeof window<"u"&&(window.OPAL_DEBUG===!0||typeof localStorage<"u"&&localStorage.getItem("opal_debug")==="true"):w.debug_enabled}),x(M,"$debug_enable!",function(){var w=this;return w.debug_enabled=!0,typeof window<"u"&&(window.OPAL_DEBUG=!0,typeof localStorage<"u"&&localStorage.setItem("opal_debug","true")),w.$debug_log("Debug mode enabled")}),x(M,"$debug_disable!",function(){var w=this;w.$debug_log("Debug mode disabled"),w.debug_enabled=!1,typeof window<"u"&&(window.OPAL_DEBUG=!1,typeof localStorage<"u"&&localStorage.removeItem("opal_debug"))}),x(M,"$debug_measure",function C(w){var m=C.$$p||K,i=this,l=K,b=K,_=K,c=K;return C.$$p=null,h(i["$debug_enabled?"]())?(l=performance.now(),b=n.yieldX(m,[]),_=performance.now(),c=I(_,l),console.log("[PERF] "+w+": "+c.$round(2)+"ms"),b):n.yieldX(m,[])}),x(M,"$debug_stimulus_connect",function(w){var m=this,i=K,l=K,b=K;return w==null&&(w=K),h(m["$debug_enabled?"]())?(i=h(l=w)?l:m,b=h(i.$class()["$respond_to?"]("stimulus_name"))?i.$class().$stimulus_name():i.$class().$name(),console.log("[STIMULUS] Connected:",b)):K},-1),x(M,"$debug_stimulus_disconnect",function(w){var m=this,i=K,l=K,b=K;return w==null&&(w=K),h(m["$debug_enabled?"]())?(i=h(l=w)?l:m,b=h(i.$class()["$respond_to?"]("stimulus_name"))?i.$class().$stimulus_name():i.$class().$name(),console.log("[STIMULUS] Disconnected:",b)):K},-1),x(M,"$debug_stimulus_action",function(w,m){var i=this;return m==null&&(m=K),h(i["$debug_enabled?"]())?h(m)?console.log("[STIMULUS] Action:",w,"Event:",m.$to_n()):console.log("[STIMULUS] Action:",w):K},-2)}(L[0])}(y[0],y)}(U[0],U)}(W[0],W),Q(W[0],"DebugHelpers",p(p(p(P("OpalVite"),"Concerns"),"V1"),"DebugHelpers"))};Opal.modules["opal_vite/concerns/v1/action_cable_helpers"]=function(n){var A=n.module,h=n.def,x=n.return_ivar,I=n.truthy,Q=n.ensure_kwargs,W=n.hash_get,P=n.send,K=n.const_set,p=[],B=n.$r(p),O=n.nil,X=n.$$$;return n.add_stubs("raise,merge,to_n,cable_subscription_key,[]=,call,delete,[],default_subscription,perform_on,to_s,subscribe_to,on_cable_received,cable_data,nil?,cable_data_type,to_sym,private,join,map,sort,to_a,first,values"),function(U,re){var Z=A(U,"OpalVite"),j=[Z].concat(re);return function(y,z){var N=A(y,"Concerns"),S=[N].concat(z);return function(L,E){var M=A(L,"V1"),C=[M].concat(E);return function(w,m){var i=A(w,"ActionCableHelpers"),l=[i].concat(m),b=n.$r(l);return h(i,"$cable_connect",function(c){var o=this;return c==null&&(c="/cable"),o._cable_consumer=window.ActionCable.createConsumer(c)},-1),h(i,"$cable_consumer",x("_cable_consumer")),h(i,"$cable_disconnect",function(){var c=this;return c._cable_consumer==null&&(c._cable_consumer=O),I(c._cable_consumer)?(c._cable_consumer.disconnect(),c._cable_subscriptions=O,c._cable_consumer=O):O}),h(i,"$cable_connected?",function(){var c=this;return c._cable_consumer==null&&(c._cable_consumer=O),I(c._cable_consumer)?c._cable_consumer.connection.isOpen():!1}),h(i,"$subscribe_to",function _(c,o){var v=_.$$p||O,T=this,d=O,a=O,$=O,r=O,e=O;return T._cable_consumer==null&&(T._cable_consumer=O),T._cable_subscriptions==null&&(T._cable_subscriptions=O),_.$$p=null,o==null&&(o=new Map),I(T._cable_consumer)||T.$raise("Cable not connected. Call cable_connect first."),T._cable_subscriptions=I(d=T._cable_subscriptions)?d:new Map,a=new Map([["channel",c]]).$merge(o),$=a.$to_n(),r=T._cable_consumer.subscriptions.create($,{connected:function(){},disconnected:function(){},received:function(t){},rejected:function(){}}),e=T.$cable_subscription_key(c,o),T._cable_subscriptions["$[]="](e,r),I(v)&&v.$call(r),r},-2),h(i,"$unsubscribe_from",function(c,o){var v=this,T=O,d=O;return v._cable_subscriptions==null&&(v._cable_subscriptions=O),o==null&&(o=new Map),I(v._cable_subscriptions)?(T=v.$cable_subscription_key(c,o),d=v._cable_subscriptions.$delete(T),I(d)?d.unsubscribe():O):O},-2),h(i,"$get_subscription",function(c,o){var v=this,T=O;return v._cable_subscriptions==null&&(v._cable_subscriptions=O),o==null&&(o=new Map),I(v._cable_subscriptions)?(T=v.$cable_subscription_key(c,o),v._cable_subscriptions["$[]"](T)):O},-2),h(i,"$on_cable_connected",function _(c){var o=_.$$p||O;return _.$$p=null,c.connected=function(){o.$call()}}),h(i,"$on_cable_disconnected",function _(c){var o=_.$$p||O;return _.$$p=null,c.disconnected=function(){o.$call()}}),h(i,"$on_cable_received",function _(c){var o=_.$$p||O;return _.$$p=null,c.received=function(v){o.$call(v)}}),h(i,"$on_cable_rejected",function _(c){var o=_.$$p||O;return _.$$p=null,c.rejected=function(){o.$call()}}),h(i,"$cable_perform",function(c,o){var v=this,T=O;return o==null&&(o=new Map),T=v.$default_subscription(),I(T)||v.$raise("No active subscription"),v.$perform_on(T,c,o)},-2),h(i,"$perform_on",function(c,o,v){var T=O;return v==null&&(v=new Map),T=v.$to_n(),c.perform(o.$to_s(),T)},-3),h(i,"$cable_send",function(c,o){var v=O;return v=o.$to_n(),c.send(v)}),h(i,"$cable_subscribe",function(c,o){var v,T,d,a,$,r=this,e=O,t=O,s=O,u=O,f=O;return r._cable_consumer==null&&(r._cable_consumer=O),r._cable_subscriptions==null&&(r._cable_subscriptions=O),o=Q(o),v=W(o,"params"),v==null&&(v=new Map),T=W(o,"on_connected"),T==null&&(T=O),d=W(o,"on_disconnected"),d==null&&(d=O),a=W(o,"on_received"),a==null&&(a=O),$=W(o,"on_rejected"),$==null&&($=O),I(r._cable_consumer)||r.$raise("Cable not connected. Call cable_connect first."),r._cable_subscriptions=I(e=r._cable_subscriptions)?e:new Map,t=new Map([["channel",c]]).$merge(v),s=t.$to_n(),u=r._cable_consumer.subscriptions.create(s,{connected:function(){I(T)&&T.$call()},disconnected:function(){I(d)&&d.$call()},received:function(q){I(a)&&a.$call(q)},rejected:function(){I($)&&$.$call()}}),f=r.$cable_subscription_key(c,v),r._cable_subscriptions["$[]="](f,u),u},-2),h(i,"$quick_subscribe",function _(c,o){var v=_.$$p||O,T=this;return _.$$p=null,o==null&&(o=new Map),P(T,"subscribe_to",[c,o],function d(a){var $=d.$$s==null?this:d.$$s;return a==null&&(a=O),I(v)?P($,"on_cable_received",[a],function(e){return e==null&&(e=O),v.$call(e)}):O},{$$s:T})},-2),h(i,"$handle_html_broadcast",function(c,o,v){var T=O,d=O;if(v==null&&(v="append"),T=c.html||c.content||c.body||"",I(T==="")||(d=document.querySelector(o),!I(d)))return O;switch(v.valueOf()){case"append":return d.insertAdjacentHTML("beforeend",T);case"prepend":return d.insertAdjacentHTML("afterbegin",T);case"replace":return d.innerHTML=T;case"before":return d.insertAdjacentHTML("beforebegin",T);case"after":return d.insertAdjacentHTML("afterend",T);default:return O}},-3),h(i,"$handle_update_broadcast",function(c,o,v){var T=O,d=O,a=O;return o==null&&(o="id"),v==null&&(v="content"),T=c[o],d=c[v],I(T===void 0||d===void 0)?O:(a=document.getElementById(T),I(a)?a.innerHTML=d:O)},-2),h(i,"$handle_remove_broadcast",function(c,o){var v=O,T=O;return o==null&&(o="id"),v=c[o],I(v===void 0)?O:(T=document.getElementById(v),I(T)?T.remove():O)},-2),h(i,"$cable_data",function(c,o,v){var T=O,d=O;return v==null&&(v=O),T=o.$to_s(),d=c[T],I(d===void 0)?v:d},-3),h(i,"$cable_data_json",function(c,o){var v=this,T=O;try{return T=v.$cable_data(c,o),I(T["$nil?"]())?O:JSON.parse(T)}catch(d){if(n.rescue(d,[b("StandardError")]))try{return O}finally{n.pop_exception(d)}else throw d}}),h(i,"$cable_data_has?",function(c,o){var v=O;return v=o.$to_s(),c.hasOwnProperty(v)}),h(i,"$cable_data_type",function(c,o){var v=this;return o==null&&(o="type"),v.$cable_data(c,o)},-2),h(i,"$cable_route",function(c,o,v){var T,d=this,a=O,$=O,r=O;return v==null&&(v="type"),a=d.$cable_data_type(c,v),I(a)?($=I(r=o["$[]"](a))?r:o["$[]"](a.$to_sym()),T=$,T===O||T==null?O:T.$call()):O},-3),i.$private(),h(i,"$cable_subscription_key",function(c,o){return""+c+":"+P(o.$to_a().$sort(),"map",[],function(T,d){return T==null&&(T=O),d==null&&(d=O),""+T+"="+d}).$join(",")}),h(i,"$default_subscription",function(){var c=this;return c._cable_subscriptions==null&&(c._cable_subscriptions=O),I(c._cable_subscriptions)?c._cable_subscriptions.$values().$first():O})}(C[0],C)}(S[0],S)}(j[0],j)}(p[0],p),K(p[0],"ActionCableHelpers",X(X(X(B("OpalVite"),"Concerns"),"V1"),"ActionCableHelpers"))};Opal.modules["opal_vite/concerns/v1/turbo_helpers"]=function(n){var A=n.module,h=n.truthy,x=n.def,I=n.send,Q=n.klass,W=n.const_set,P=[],K=n.$r(P),p=n.nil,B=n.$$$;return n.add_stubs("to_n,empty?,turbo_visit,get_turbo_frame,frame_loading?,call,to_s,render_turbo_stream,turbo_stream,new,render,start_with?,on_turbo,to_proc,respond_to?,merge,<<,each"),function(O,X){var U=A(O,"OpalVite"),re=[U].concat(X);return function(Z,j){var y=A(Z,"Concerns"),z=[y].concat(j);return function(N,S){var L=A(N,"V1"),E=[L].concat(S);return function(M,C){var w=A(M,"TurboHelpers"),m=[w].concat(C),i=n.$r(m);return x(w,"$turbo_visit",function(b,_){var c=p;return _==null&&(_=new Map),c=_.$to_n(),h(_["$empty?"]())?window.Turbo.visit(b):window.Turbo.visit(b,c)},-2),x(w,"$turbo_replace",function(b){var _=this;return _.$turbo_visit(b,new Map([["action","replace"]]))}),x(w,"$turbo_clear_cache",function(){return window.Turbo.cache.clear()}),x(w,"$turbo_enable",function(){return document.documentElement.removeAttribute("data-turbo")}),x(w,"$turbo_disable",function(){return document.documentElement.setAttribute("data-turbo","false")}),x(w,"$turbo_enabled?",function(){return document.documentElement.getAttribute("data-turbo")!=="false"}),x(w,"$turbo_progress_delay",function(b){return window.Turbo.setProgressBarDelay(b)}),x(w,"$get_turbo_frame",function(b){var _=p;return _=document.querySelector("turbo-frame#"+b),h(_===null)?p:_}),x(w,"$reload_turbo_frame",function(b,_){var c=this,o=p,v=p;return _==null&&(_=p),o=c.$get_turbo_frame(b),h(o)?h(_)?o.src=_:(v=o.src,o.src=v):p},-2),x(w,"$set_frame_src",function(b,_){var c=this,o=p;return o=c.$get_turbo_frame(b),h(o)?o.src=_:p}),x(w,"$disable_turbo_frame",function(b){var _=this,c=p;return c=_.$get_turbo_frame(b),h(c)?c.setAttribute("disabled",""):p}),x(w,"$enable_turbo_frame",function(b){var _=this,c=p;return c=_.$get_turbo_frame(b),h(c)?c.removeAttribute("disabled"):p}),x(w,"$frame_loading?",function(b){var _=this,c=p;return c=_.$get_turbo_frame(b),h(c)?c.hasAttribute("busy"):!1}),x(w,"$on_frame_loaded",function l(b){var _=l.$$p||p,c=this,o=p;if(l.$$p=null,o=c.$get_turbo_frame(b),!h(o))return p;if(h(c["$frame_loading?"](b)))o.addEventListener("turbo:frame-load",function v(){o.removeEventListener("turbo:frame-load",v),_.$call()});else return _.$call()}),x(w,"$event_turbo_frame",function(){return event.target.closest("turbo-frame")}),x(w,"$turbo_stream",function(b,_,c){var o=this,v=p,T=p,d=p;return c==null&&(c=p),v=b.$to_s(),T=h(c)?"<template>"+c+"</template>":"",d='<turbo-stream action="'+v+'" target="'+_+'">'+T+"</turbo-stream>",o.$render_turbo_stream(d)},-3),x(w,"$render_turbo_stream",function(b){return window.Turbo.renderStreamMessage(b)}),x(w,"$turbo_append",function(b,_){var c=this;return c.$turbo_stream("append",b,_)}),x(w,"$turbo_prepend",function(b,_){var c=this;return c.$turbo_stream("prepend",b,_)}),x(w,"$turbo_replace_element",function(b,_){var c=this;return c.$turbo_stream("replace",b,_)}),x(w,"$turbo_update",function(b,_){var c=this;return c.$turbo_stream("update",b,_)}),x(w,"$turbo_remove",function(b){var _=this;return _.$turbo_stream("remove",b)}),x(w,"$turbo_before",function(b,_){var c=this;return c.$turbo_stream("before",b,_)}),x(w,"$turbo_after",function(b,_){var c=this;return c.$turbo_stream("after",b,_)}),x(w,"$turbo_streams",function l(){var b=l.$$p||p,_=p;return l.$$p=null,_=i("TurboStreamBuilder").$new(),b.$call(_),_.$render()}),x(w,"$on_turbo",function l(b){var _=l.$$p||p,c=p;return l.$$p=null,c=h(b["$start_with?"]("turbo:"))?b:"turbo:"+b,document.addEventListener(c,function(o){_.$call(o)})}),x(w,"$on_turbo_before_visit",function l(){var b=l.$$p||p,_=this;return l.$$p=null,I(_,"on_turbo",["before-visit"],b.$to_proc())}),x(w,"$on_turbo_visit",function l(){var b=l.$$p||p,_=this;return l.$$p=null,I(_,"on_turbo",["visit"],b.$to_proc())}),x(w,"$on_turbo_load",function l(){var b=l.$$p||p,_=this;return l.$$p=null,I(_,"on_turbo",["load"],b.$to_proc())}),x(w,"$on_turbo_render",function l(){var b=l.$$p||p,_=this;return l.$$p=null,I(_,"on_turbo",["render"],b.$to_proc())}),x(w,"$on_turbo_before_fetch",function l(){var b=l.$$p||p,_=this;return l.$$p=null,I(_,"on_turbo",["before-fetch-request"],b.$to_proc())}),x(w,"$on_turbo_submit_start",function l(){var b=l.$$p||p,_=this;return l.$$p=null,I(_,"on_turbo",["submit-start"],b.$to_proc())}),x(w,"$on_turbo_submit_end",function l(){var b=l.$$p||p,_=this;return l.$$p=null,I(_,"on_turbo",["submit-end"],b.$to_proc())}),x(w,"$on_turbo_frame_load",function l(){var b=l.$$p||p,_=this;return l.$$p=null,I(_,"on_turbo",["frame-load"],b.$to_proc())}),x(w,"$on_turbo_before_stream",function l(){var b=l.$$p||p,_=this;return l.$$p=null,I(_,"on_turbo",["before-stream-render"],b.$to_proc())}),x(w,"$turbo_submit",function(b){var _=p;return _=h(b["$respond_to?"]("to_n"))?b.$to_n():b,_.requestSubmit()}),x(w,"$turbo_submit_to_frame",function(b,_){var c=p;return c=h(b["$respond_to?"]("to_n"))?b.$to_n():b,c.setAttribute("data-turbo-frame",_),c.requestSubmit()}),x(w,"$disable_turbo_form",function(b){var _=p;return _=h(b["$respond_to?"]("to_n"))?b.$to_n():b,_.setAttribute("data-turbo","false")}),x(w,"$enable_turbo_form",function(b){var _=p;return _=h(b["$respond_to?"]("to_n"))?b.$to_n():b,_.removeAttribute("data-turbo")}),x(w,"$turbo_stream_from",function(b){return window.Turbo.connectStreamSource(new EventSource(b))}),x(w,"$turbo_stream_disconnect",function(b){return window.Turbo.disconnectStreamSource(b),b.close()}),x(w,"$turbo_confirm_method",function l(){var b=l.$$p||p;l.$$p=null,window.Turbo.setConfirmMethod(function(_,c,o){return b.$call(_,c,o)})}),x(w,"$turbo_refresh",function(b){var _=p;return b==null&&(b=new Map),h(b["$empty?"]())?window.Turbo.visit(window.location.href,{action:"replace"}):(_=b.$merge(new Map([["action","replace"]])).$to_n(),window.Turbo.visit(window.location.href,_))},-1),x(w,"$turbo_available?",function(){return typeof window.Turbo<"u"}),x(w,"$turbo_current_url",function(){var b;return(b=window.Turbo.navigator.location)==null?void 0:b.href}),x(w,"$turbo_cancel_visit",function(){return window.Turbo.navigator.stop()}),x(w,"$turbo_loading_class",function(b,_){var c=this,o=p;return _==null&&(_="turbo-loading"),o=h(b["$respond_to?"]("to_n"))?b.$to_n():b,I(c,"on_turbo",["before-fetch-request"],function(){return o.classList.add(_)}),I(c,"on_turbo",["before-fetch-response"],function(){return o.classList.remove(_)})},-2)}(E[0],E),function(M,C){var w=Q(M,C,"TurboStreamBuilder"),m=w.$$prototype;return m.streams=p,x(w,"$initialize",function(){var l=this;return l.streams=[]}),x(w,"$append",function(l,b){var _=this;return _.streams["$<<"]('<turbo-stream action="append" target="'+l+'"><template>'+b+"</template></turbo-stream>")}),x(w,"$prepend",function(l,b){var _=this;return _.streams["$<<"]('<turbo-stream action="prepend" target="'+l+'"><template>'+b+"</template></turbo-stream>")}),x(w,"$replace",function(l,b){var _=this;return _.streams["$<<"]('<turbo-stream action="replace" target="'+l+'"><template>'+b+"</template></turbo-stream>")}),x(w,"$update",function(l,b){var _=this;return _.streams["$<<"]('<turbo-stream action="update" target="'+l+'"><template>'+b+"</template></turbo-stream>")}),x(w,"$remove",function(l){var b=this;return b.streams["$<<"]('<turbo-stream action="remove" target="'+l+'"></turbo-stream>')}),x(w,"$before",function(l,b){var _=this;return _.streams["$<<"]('<turbo-stream action="before" target="'+l+'"><template>'+b+"</template></turbo-stream>")}),x(w,"$after",function(l,b){var _=this;return _.streams["$<<"]('<turbo-stream action="after" target="'+l+'"><template>'+b+"</template></turbo-stream>")}),x(w,"$render",function(){var l=this;return I(l.streams,"each",[],function(_){return _==null&&(_=p),window.Turbo.renderStreamMessage(_)})})}(E[0],null)}(z[0],z)}(re[0],re)}(P[0],P),W(P[0],"TurboHelpers",B(B(B(K("OpalVite"),"Concerns"),"V1"),"TurboHelpers"))};Opal.modules["opal_vite/concerns/v1"]=function(n){var A=n.top;return n.nil,n.add_stubs("require"),A.$require("opal_vite/concerns/v1/js_proxy_ex"),A.$require("opal_vite/concerns/v1/dom_helpers"),A.$require("opal_vite/concerns/v1/toastable"),A.$require("opal_vite/concerns/v1/storable"),A.$require("opal_vite/concerns/v1/stimulus_helpers"),A.$require("opal_vite/concerns/v1/vue_helpers"),A.$require("opal_vite/concerns/v1/react_helpers"),A.$require("opal_vite/concerns/v1/uri_helpers"),A.$require("opal_vite/concerns/v1/base64_helpers"),A.$require("opal_vite/concerns/v1/debug_helpers"),A.$require("opal_vite/concerns/v1/action_cable_helpers"),A.$require("opal_vite/concerns/v1/turbo_helpers")};Opal.modules["controllers/url_demo_controller"]=function(n){var A=n.klass,h=n.def,x=n.truthy,I=n.send,Q=n.rb_plus,W=n.eqeq,P=[],K=n.$r(P),p=n.nil,B=n.$$$;return n.add_stubs("include,targets=,puts,parse_current,target_value,blank?,parse_url,show_output,url_protocol,url_hostname,url_port,url_pathname,url_search,url_hash,url_origin,url_all_params,empty?,join,map,+,current_url,target_set_value,url_to_string,parse,url_set_param,build_url,encode_uri_component,decode_uri_component,parse_query_string,build_query_string,to_n,private,has_target?,==,target_set_html"),function(O,X,U){var re=A(O,X,"UrlDemoController"),Z=[re].concat(U),j=n.$r(Z);return re.$include(B(B(B(j("OpalVite"),"Concerns"),"V1"),"StimulusHelpers")),re.$include(B(B(B(j("OpalVite"),"Concerns"),"V1"),"URIHelpers")),re["$targets="](["urlInput","output","paramKey","paramValue"]),h(re,"$connect",function(){var z=this;return z.$puts("UrlDemoController connected"),z.$parse_current()}),h(re,"$parse",function(){var z=this,N=p,S=p,L=p,E=p,M=p,C=p;return N=z.$target_value("urlInput"),x(z["$blank?"](N))?p:(S=z.$parse_url(N),x(S)?(L=`<div class="space-y-2">
  <div><strong>Protocol:</strong> `+z.$url_protocol(S)+`</div>
  <div><strong>Hostname:</strong> `+z.$url_hostname(S)+`</div>
  <div><strong>Port:</strong> `+(x(E=z.$url_port(S))?E:"(default)")+`</div>
  <div><strong>Pathname:</strong> `+z.$url_pathname(S)+`</div>
  <div><strong>Search:</strong> `+(x(E=z.$url_search(S))?E:"(none)")+`</div>
  <div><strong>Hash:</strong> `+(x(E=z.$url_hash(S))?E:"(none)")+`</div>
  <div><strong>Origin:</strong> `+z.$url_origin(S)+`</div>
</div>
`,M=z.$url_all_params(S),x(M["$empty?"]())||(C=I(M,"map",[],function(m,i){return m==null&&(m=p),i==null&&(i=p),"<li><code>"+m+"</code> = <code>"+i+"</code></li>"}).$join(),L=Q(L,`<div class="mt-4">
  <strong>Query Parameters:</strong>
  <ul class="list-disc list-inside ml-4">`+C+`</ul>
</div>
`)),z.$show_output(L)):(z.$show_output("Invalid URL","error"),p))}),h(re,"$parse_current",function(){var z=this,N=p;return N=z.$current_url(),z.$target_set_value("urlInput",z.$url_to_string(N)),z.$parse()}),h(re,"$add_param",function(){var z=this,N=p,S=p,L=p,E=p,M=p;return N=z.$target_value("urlInput"),S=z.$target_value("paramKey"),L=z.$target_value("paramValue"),x(z["$blank?"](N))||x(z["$blank?"](S))||(E=z.$parse_url(N),!x(E))?p:(z.$url_set_param(E,S,x(M=L)?M:""),z.$target_set_value("urlInput",z.$url_to_string(E)),z.$target_set_value("paramKey",""),z.$target_set_value("paramValue",""),z.$parse())}),h(re,"$build_example",function(){var z=this,N=p;return N=z.$build_url(new Map([["protocol","https:"],["hostname","api.example.com"],["port","8080"],["pathname","/v1/users"],["params",new Map([["page","1"],["limit","10"],["sort","name"]])],["hash","#results"]])),z.$target_set_value("urlInput",N),z.$parse()}),h(re,"$encode_demo",function(){var z=this,N=p,S=p,L=p,E=p;return N="Hello World!  ",S=z.$encode_uri_component(N),L=z.$decode_uri_component(S),E=`<div class="space-y-2">
  <div><strong>Original:</strong> `+N+`</div>
  <div><strong>Encoded:</strong> <code>`+S+`</code></div>
  <div><strong>Decoded:</strong> `+L+`</div>
</div>
`,z.$show_output(E)}),h(re,"$query_string_demo",function(){var z=this,N=p,S=p,L=p,E=p;return N="name=John&age=30&tags=ruby&tags=javascript",S=z.$parse_query_string(N),L=z.$build_query_string(new Map([["name","Jane"],["age","25"],["city","Tokyo"]])),E=`<div class="space-y-4">
  <div>
    <strong>Parse "`+N+`":</strong>
    <pre class="bg-gray-100 p-2 rounded mt-1">`+JSON.stringify(S.$to_n(),null,2)+`</pre>
  </div>
  <div>
    <strong>Build from {name: 'Jane', age: '25', city: 'Tokyo'}:</strong>
    <pre class="bg-gray-100 p-2 rounded mt-1">`+L+`</pre>
  </div>
</div>
`,z.$show_output(E)}),re.$private(),h(re,"$show_output",function(z,N){var S=this,L=p;return N==null&&(N="success"),x(S["$has_target?"]("output"))?(L=W(N,"error")?"text-red-600":"text-gray-800",S.$target_set_html("output","<div class='"+L+"'>"+z+"</div>")):p},-2)}(P[0],K("StimulusController"),P)};Opal.modules["controllers/base64_demo_controller"]=function(n){var A=n.klass,h=n.return_val,x=n.defs,I=n.def,Q=n.truthy,W=n.eqeq,P=[],K=n.$r(P),p=n.nil,B=n.$$$;return n.add_stubs("include,targets=,puts,target_value,blank?,show_output,base64_encode,base64_decode,base64_encode_urlsafe,base64_decode_urlsafe,base64_encode_unicode,base64_decode_unicode,to_data_url,parse_data_url,[],target_set_value,decode_jwt_payload,jwt_expired?,jwt_expires_at,basic_auth_header,parse_basic_auth,valid_base64?,base64_decoded_length,private,has_target?,==,target_set_html"),function(O,X,U){var re=A(O,X,"Base64DemoController"),Z=[re].concat(U),j=n.$r(Z);return re.$include(B(B(B(j("OpalVite"),"Concerns"),"V1"),"StimulusHelpers")),re.$include(B(B(B(j("OpalVite"),"Concerns"),"V1"),"Base64Helpers")),x(re,"$stimulus_name",h("base64-demo")),re["$targets="](["input","output","jwtInput","authUser","authPass"]),I(re,"$connect",function(){var z=this;return z.$puts("Base64DemoController connected")}),I(re,"$encode",function(){var z=this,N=p,S=p;return N=z.$target_value("input"),Q(z["$blank?"](N))?(z.$show_output("Please enter text to encode","error"),p):(S=z.$base64_encode(N),Q(S)?z.$show_output("Encoded: <code class='bg-gray-100 px-2 py-1 rounded'>"+S+"</code>"):z.$show_output("Encoding failed","error"))}),I(re,"$decode",function(){var z=this,N=p,S=p;return N=z.$target_value("input"),Q(z["$blank?"](N))?p:(S=z.$base64_decode(N),Q(S)?z.$show_output("Decoded: <code class='bg-gray-100 px-2 py-1 rounded'>"+S+"</code>"):z.$show_output("Decoding failed - invalid Base64","error"))}),I(re,"$urlsafe_demo",function(){var z=this,N=p,S=p,L=p,E=p,M=p;return N=z.$target_value("input"),Q(z["$blank?"](N))&&(N="Hello+World/Test=="),S=z.$base64_encode(N),L=z.$base64_encode_urlsafe(N),E=z.$base64_decode_urlsafe(L),M=`<div class="space-y-2">
  <div><strong>Original:</strong> `+N+`</div>
  <div><strong>Standard Base64:</strong> <code>`+S+`</code></div>
  <div><strong>URL-safe Base64:</strong> <code>`+L+`</code></div>
  <div><strong>Decoded back:</strong> `+E+`</div>
</div>
`,z.$show_output(M)}),I(re,"$unicode_demo",function(){var z=this,N=p,S=p,L=p,E=p;return N="  mojis",S=z.$base64_encode_unicode(N),L=z.$base64_decode_unicode(S),E=`<div class="space-y-2">
  <div><strong>Original (Unicode):</strong> `+N+`</div>
  <div><strong>Base64 Encoded:</strong> <code>`+S+`</code></div>
  <div><strong>Decoded:</strong> `+L+`</div>
</div>
`,z.$show_output(E)}),I(re,"$data_url_demo",function(){var z=this,N=p,S=p,L=p,E=p;return N="<h1>Hello from Data URL!</h1><p>This is embedded content.</p>",S=z.$to_data_url(N,"text/html"),L=z.$parse_data_url(S),E=`<div class="space-y-4">
  <div>
    <strong>Original HTML:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+N+`</pre>
  </div>
  <div>
    <strong>Data URL:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm break-all">`+S+`</pre>
  </div>
  <div>
    <strong>Parsed back:</strong>
    <div>MIME Type: `+L["$[]"]("mime_type")+`</div>
    <div>Data: `+L["$[]"]("data")+`</div>
  </div>
  <div>
    <a href="`+S+`" target="_blank" class="text-blue-500 hover:underline">
      Open Data URL in new tab
    </a>
  </div>
</div>
`,z.$show_output(E)}),I(re,"$decode_jwt",function(){var z=this,N=p,S=p,L=p,E=p,M=p,C=p;return N=z.$target_value("jwtInput"),Q(z["$blank?"](N))&&(N="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiZXhwIjoxNzM1Njg5NjAwLCJpYXQiOjE1MTYyMzkwMjJ9.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",z.$target_set_value("jwtInput",N)),S=z.$decode_jwt_payload(N),Q(S)?(L=z["$jwt_expired?"](N),E=z.$jwt_expires_at(N),M=Q(E)?E.toISOString():"No expiration",C=`<div class="space-y-4">
  <div>
    <strong>Payload:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(S,null,2)+`</pre>
  </div>
  <div>
    <strong>Expired:</strong>
    <span class="`+(Q(L)?"text-red-600":"text-green-600")+`">
      `+(Q(L)?"Yes":"No")+`
    </span>
  </div>
  <div>
    <strong>Expires at:</strong> `+M+`
  </div>
</div>
`,z.$show_output(C)):(z.$show_output("Failed to decode JWT - invalid format","error"),p)}),I(re,"$basic_auth_demo",function(){var z=this,N=p,S=p,L=p,E=p,M=p;return N=z.$target_value("authUser"),S=z.$target_value("authPass"),Q(z["$blank?"](N))&&(N="admin"),Q(z["$blank?"](S))&&(S="secret123"),L=z.$basic_auth_header(N,S),E=z.$parse_basic_auth(L),M=`<div class="space-y-4">
  <div>
    <strong>Credentials:</strong> `+N+":"+S+`
  </div>
  <div>
    <strong>Authorization Header:</strong>
    <code class="bg-gray-100 px-2 py-1 rounded">`+L+`</code>
  </div>
  <div>
    <strong>Parsed back:</strong>
    <div>Username: `+E["$[]"]("username")+`</div>
    <div>Password: `+E["$[]"]("password")+`</div>
  </div>
</div>
`,z.$show_output(M)}),I(re,"$validate_base64",function(){var z=this,N=p,S=p,L=p,E=p;return N=z.$target_value("input"),Q(z["$blank?"](N))?p:(S=z["$valid_base64?"](N),L=Q(S)?z.$base64_decoded_length(N):0,E=`<div class="space-y-2">
  <div>
    <strong>Valid Base64:</strong>
    <span class="`+(Q(S)?"text-green-600":"text-red-600")+`">
      `+(Q(S)?"Yes":"No")+`
    </span>
  </div>
  `+(Q(S)?"<div><strong>Decoded length:</strong> "+L+" bytes</div>":"")+`
</div>
`,z.$show_output(E))}),re.$private(),I(re,"$show_output",function(z,N){var S=this,L=p;return N==null&&(N="success"),Q(S["$has_target?"]("output"))?(L=W(N,"error")?"text-red-600":"text-gray-800",S.$target_set_html("output","<div class='"+L+"'>"+z+"</div>")):p},-2)}(P[0],K("StimulusController"),P)};Opal.modules["controllers/validation_demo_controller"]=function(n){var A=n.klass,h=n.def,x=n.truthy,I=n.send,Q=n.eqeq,W=[],P=n.$r(W),K=n.nil,p=n.$$$;return n.add_stubs("include,targets=,puts,target_value,valid_email?,show_result,valid_url?,valid_phone?,blank?,present?,show_output,<<,min_length?,max_length?,join,map,[],matches_pattern?,nil?,private,has_target?,==,target_set_html"),function(B,O,X){var U=A(B,O,"ValidationDemoController"),re=[U].concat(X),Z=n.$r(re);return U.$include(p(p(p(Z("OpalVite"),"Concerns"),"V1"),"StimulusHelpers")),U["$targets="](["emailInput","urlInput","phoneInput","textInput","patternInput","output"]),h(U,"$connect",function(){var y=this;return y.$puts("ValidationDemoController connected")}),h(U,"$validate_email",function(){var y=this,z=K,N=K;return z=y.$target_value("emailInput"),N=y["$valid_email?"](z),y.$show_result("emailInput",N,x(N)?"Valid email address":"Invalid email format")}),h(U,"$validate_url",function(){var y=this,z=K,N=K;return z=y.$target_value("urlInput"),N=y["$valid_url?"](z),y.$show_result("urlInput",N,x(N)?"Valid URL":"Invalid URL format")}),h(U,"$validate_phone",function(){var y=this,z=K,N=K;return z=y.$target_value("phoneInput"),N=y["$valid_phone?"](z),y.$show_result("phoneInput",N,x(N)?"Valid phone number":"Invalid phone format")}),h(U,"$check_blank",function(){var y=this,z=K,N=K,S=K,L=K;return z=y.$target_value("textInput"),N=y["$blank?"](z),S=y["$present?"](z),L=`<div class="space-y-2">
  <div>
    <strong>blank?:</strong>
    <span class="`+(x(N)?"text-orange-600":"text-green-600")+'">'+N+`</span>
  </div>
  <div>
    <strong>present?:</strong>
    <span class="`+(x(S)?"text-green-600":"text-orange-600")+'">'+S+`</span>
  </div>
</div>
`,y.$show_output(L)}),h(U,"$check_length",function(){var y=this,z=K,N=K,S=K,L=K,E=K;return z=y.$target_value("textInput"),N=[],N["$<<"](new Map([["test","min_length?(3)"],["result",y["$min_length?"](z,3)]])),N["$<<"](new Map([["test","min_length?(10)"],["result",y["$min_length?"](z,10)]])),N["$<<"](new Map([["test","max_length?(50)"],["result",y["$max_length?"](z,50)]])),N["$<<"](new Map([["test","max_length?(5)"],["result",y["$max_length?"](z,5)]])),S=I(N,"map",[],function(C){var w=K;return C==null&&(C=K),w=x(C["$[]"]("result"))?"text-green-600":"text-red-600","<li><code>"+C["$[]"]("test")+"</code>: <span class='"+w+"'>"+C["$[]"]("result")+"</span></li>"}).$join(),L=x(z)?z.length:0,E=`<div class="space-y-2">
  <div><strong>Current length:</strong> `+L+`</div>
  <ul class="list-disc list-inside">`+S+`</ul>
</div>
`,y.$show_output(E)}),h(U,"$check_pattern",function(){var y=this,z=K,N=K,S=K,L=K;return z=y.$target_value("textInput"),N=y.$target_value("patternInput"),x(y["$blank?"](N))?(y.$show_output("Please enter a pattern","error"),K):(S=y["$matches_pattern?"](z,N),L=`<div class="space-y-2">
  <div><strong>Text:</strong> "`+z+`"</div>
  <div><strong>Pattern:</strong> /`+N+`/</div>
  <div>
    <strong>Matches:</strong>
    <span class="`+(x(S)?"text-green-600":"text-red-600")+'">'+S+`</span>
  </div>
</div>
`,y.$show_output(L))}),h(U,"$validate_all",function(){var y=this,z=K,N=K,S=K,L=K,E=K,M=K;return z=[],N=y.$target_value("emailInput"),z["$<<"](new Map([["field","Email"],["value",N],["valid",x(y["$present?"](N))?y["$valid_email?"](N):K]])),S=y.$target_value("urlInput"),z["$<<"](new Map([["field","URL"],["value",S],["valid",x(y["$present?"](S))?y["$valid_url?"](S):K]])),L=y.$target_value("phoneInput"),z["$<<"](new Map([["field","Phone"],["value",L],["valid",x(y["$present?"](L))?y["$valid_phone?"](L):K]])),E=I(z,"map",[],function(w){var m=K,i=K;return w==null&&(w=K),x(w["$[]"]("valid")["$nil?"]())?m="<span class='text-gray-400'>Empty</span>":x(w["$[]"]("valid"))?m="<span class='text-green-600'>Valid</span>":m="<span class='text-red-600'>Invalid</span>","<tr><td class='border px-2 py-1'>"+w["$[]"]("field")+"</td><td class='border px-2 py-1'>"+(x(i=w["$[]"]("value"))?i:"-")+"</td><td class='border px-2 py-1'>"+m+"</td></tr>"}).$join(),M=`<table class="w-full border-collapse">
  <thead>
    <tr class="bg-gray-100">
      <th class="border px-2 py-1 text-left">Field</th>
      <th class="border px-2 py-1 text-left">Value</th>
      <th class="border px-2 py-1 text-left">Status</th>
    </tr>
  </thead>
  <tbody>`+E+`</tbody>
</table>
`,y.$show_output(M)}),U.$private(),h(U,"$show_result",function(y,z,N){var S=this,L=K;return L=`<div class="flex items-center gap-2">
  <span class="`+(x(z)?"text-green-600":"text-red-600")+` text-xl">
    `+(x(z)?"":"")+`
  </span>
  <span>`+N+`</span>
</div>
`,S.$show_output(L)}),h(U,"$show_output",function(y,z){var N=this,S=K;return z==null&&(z="success"),x(N["$has_target?"]("output"))?(S=Q(z,"error")?"text-red-600":"text-gray-800",N.$target_set_html("output","<div class='"+S+"'>"+y+"</div>")):K},-2)}(W[0],P("StimulusController"),W)};Opal.modules["controllers/clipboard_demo_controller"]=function(n){var A=n.klass,h=n.def,x=n.truthy,I=n.send,Q=n.rb_plus,W=[],P=n.$r(W),K=n.nil,p=n.$$$;return n.add_stubs("include,targets=,puts,target_value,blank?,copy_to_clipboard,console_styled,show_toast,read_from_clipboard,target_set_value,debounced,+,target_set_html,throttled,console_time,unique,join,parse_array,union,intersection,difference,deep_clone,to_n,deep_merge,pick,omit,console_group,console_table,private,reject,map,split,to_proc,set_timeout"),function(B,O,X){var U=A(B,O,"ClipboardDemoController"),re=[U].concat(X),Z=n.$r(re);return U.$include(p(p(p(Z("OpalVite"),"Concerns"),"V1"),"StimulusHelpers")),U["$targets="](["copyInput","pasteOutput","searchInput","searchOutput","arr1","arr2","setOutput","obj1","obj2","objOutput"]),h(U,"$connect",function(){var y=this;return y.$puts("ClipboardDemoController connected"),y.search_count=0,y.throttle_count=0}),h(U,"$copy",function(){var y=this,z=K;return z=y.$target_value("copyInput"),x(y["$blank?"](z))?K:I(y,"copy_to_clipboard",[z],function N(){var S=N.$$s==null?this:N.$$s;return S.$console_styled("Copied to clipboard: "+z,"color: green;"),S.$show_toast("Copied!")},{$$s:y})}),h(U,"$paste",function(){var y=this;return I(y,"read_from_clipboard",[],function z(N){var S=z.$$s==null?this:z.$$s;return N==null&&(N=K),S.$target_set_value("pasteOutput",N),S.$console_styled("Pasted from clipboard","color: blue;")},{$$s:y})}),h(U,"$search_debounced",function(){var y=this;return I(y,"debounced",[300,"search"],function z(){var N=z.$$s==null?this:z.$$s,S=K;return N.search_count==null&&(N.search_count=K),N.search_count=Q(N.search_count,1),S=N.$target_value("searchInput"),N.$target_set_html("searchOutput","Searching for: <strong>"+S+"</strong><br>"+("<small>Search triggered "+N.search_count+" time(s)</small>"))},{$$s:y})}),h(U,"$throttled_action",function(){var y=this;return I(y,"throttled",[1e3,"click"],function z(){var N=z.$$s==null?this:z.$$s;return N.throttle_count==null&&(N.throttle_count=K),N.throttle_count=Q(N.throttle_count,1),N.$console_time("Throttled action executed ("+N.throttle_count+")"),N.$show_toast("Throttled! Count: "+N.throttle_count)},{$$s:y})}),h(U,"$unique_demo",function(){var y=this,z=K,N=K,S=K;return z=[1,2,2,3,3,3,4,5,5],N=y.$unique(z),S=`<div class="space-y-2">
  <div><strong>Original:</strong> [`+z.$join(", ")+`]</div>
  <div><strong>unique():</strong> [`+N.$join(", ")+`]</div>
</div>
`,y.$target_set_html("setOutput",S)}),h(U,"$set_operations",function(){var y=this,z=K,N=K,S=K,L=K,E=K,M=K,C=K,w=K;return z=y.$target_value("arr1"),N=y.$target_value("arr2"),S=y.$parse_array(z),L=y.$parse_array(N),E=y.$union(S,L),M=y.$intersection(S,L),C=y.$difference(S,L),w=`<div class="space-y-2">
  <div><strong>Array 1:</strong> [`+S.$join(", ")+`]</div>
  <div><strong>Array 2:</strong> [`+L.$join(", ")+`]</div>
  <hr class="my-2">
  <div><strong>union():</strong> [`+E.$join(", ")+`]</div>
  <div><strong>intersection():</strong> [`+M.$join(", ")+`]</div>
  <div><strong>difference():</strong> [`+C.$join(", ")+`]</div>
</div>
`,y.$target_set_html("setOutput",w)}),h(U,"$deep_clone_demo",function(){var y=this,z=K,N=K,S=K;return z=new Map([["name","John"],["nested",new Map([["city","Tokyo"],["data",[1,2,3]]])]]),N=y.$deep_clone(z),N.nested.city="Osaka",S=`<div class="space-y-2">
  <div>
    <strong>Original:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(z.$to_n(),null,2)+`</pre>
  </div>
  <div>
    <strong>Cloned (modified):</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(N,null,2)+`</pre>
  </div>
  <div class="text-sm text-gray-600">
    Note: Original is unchanged even after modifying the clone
  </div>
</div>
`,y.$target_set_html("objOutput",S)}),h(U,"$deep_merge_demo",function(){var y=this,z=K,N=K,S=K,L=K;return z=new Map([["name","John"],["address",new Map([["city","Tokyo"]])],["tags",["ruby"]]]),N=new Map([["age",30],["address",new Map([["zip","100-0001"]])],["tags",["javascript"]]]),S=y.$deep_merge(z,N),L=`<div class="space-y-2">
  <div>
    <strong>Target:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(z.$to_n(),null,2)+`</pre>
  </div>
  <div>
    <strong>Source:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(N.$to_n(),null,2)+`</pre>
  </div>
  <div>
    <strong>deep_merge():</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(S,null,2)+`</pre>
  </div>
</div>
`,y.$target_set_html("objOutput",L)}),h(U,"$pick_omit_demo",function(){var y=this,z=K,N=K,S=K,L=K;return z=new Map([["id",1],["name","John"],["email","john@example.com"],["password","secret"],["role","admin"]]),N=y.$pick(z,"id","name","email"),S=y.$omit(z,"password"),L=`<div class="space-y-2">
  <div>
    <strong>Original:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(z.$to_n(),null,2)+`</pre>
  </div>
  <div>
    <strong>pick(:id, :name, :email):</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(N.$to_n(),null,2)+`</pre>
  </div>
  <div>
    <strong>omit(:password):</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(S.$to_n(),null,2)+`</pre>
  </div>
</div>
`,y.$target_set_html("objOutput",L)}),h(U,"$console_demo",function(){var y=this;return y.$console_styled("This is a styled message!","color: purple; font-size: 16px;"),I(y,"console_group",["Group Demo",new Map([["collapsed",!1]])],function z(){var N=z.$$s==null?this:z.$$s;return N.$puts("Message 1"),N.$puts("Message 2"),N.$console_table([new Map([["name","Alice"],["age",25]]),new Map([["name","Bob"],["age",30]]),new Map([["name","Charlie"],["age",35]])])},{$$s:y}),y.$console_time("This message has a timestamp"),y.$show_toast("Check the browser console!")}),U.$private(),h(U,"$parse_array",function(y){var z=this;return x(z["$blank?"](y))?[]:I(I(y.$split(","),"map",[],"strip".$to_proc()),"reject",[],"empty?".$to_proc())}),h(U,"$show_toast",function(y){var z=this,N=K;return N=document.createElement("div"),N.className="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",N.textContent=y,document.body.appendChild(N),I(z,"set_timeout",[2e3],function(){return N.remove()})})}(W[0],P("StimulusController"),W)};Opal.queue(function(n){var A=n.top,h=[],x=n.$r(h);return n.nil,n.add_stubs("require,puts,register_all!"),A.$require("native"),A.$require("opal_stimulus/stimulus_controller"),A.$require("opal_vite/concerns/v1"),A.$require("controllers/url_demo_controller"),A.$require("controllers/base64_demo_controller"),A.$require("controllers/validation_demo_controller"),A.$require("controllers/clipboard_demo_controller"),A.$puts("Utilities App loaded!"),A.$puts("Ruby version: "+x("RUBY_VERSION")),x("StimulusController")["$register_all!"](),A.$puts("All controllers registered!")});
