Opal.modules.native=function(n){var A=n.hash_put,h=n.module,N=n.defs,M=n.slice,Q=n.truthy,W=n.send,L=n.Kernel,K=n.extract_kwargs,b=n.ensure_kwargs,B=n.hash_get,$e=n.range,Y=n.to_a,H=n.def,ee=n.return_ivar,Z=n.alias,R=n.klass,m=n.rb_minus,k=n.return_val,I=n.send2,z=n.find_super,U=n.eqeqeq,w=n.rb_ge,S=n.return_self,P=n.gvars,q=n.top,v=[],s=n.$r(v),f=n.nil,E=n.$$$;return n.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(g,c){var l=h(g,"Native"),p=[l].concat(c),C=n.$r(p);return N(l,"$is_a?",function(a,$){var t=this;try{return a instanceof t.$try_convert($)}catch{return!1}}),N(l,"$try_convert",function(a,$){var t=this;return $==null&&($=f),t["$native?"](a)?a:a["$respond_to?"]("to_n")?a.$to_n():$},-2),N(l,"$convert",function(a){var $=this;if($["$native?"](a))return a;if(a["$respond_to?"]("to_n"))return a.$to_n();$.$raise(C("ArgumentError"),""+a.$inspect()+" isn't native")}),N(l,"$call",function _(a,$,t){var e=_.$$p||f,r,i,u=this;_.$$p=null,r=M(arguments,2),i=r;var o=a[$];if(o instanceof Function){for(var y=new Array(i.length),j=0,D=i.length;j<D;j++){var F=i[j],G=u.$try_convert(F);y[j]=G===f?F:G}return e!==f&&y.push(e),u.$Native(o.apply(a,y))}else return u.$Native(o)},-3),N(l,"$proc",function _(){var a=_.$$p||f,$=this;return _.$$p=null,Q(a)||$.$raise(C("LocalJumpError"),"no block given"),W(L,"proc",[],function t(e){var r,i,u=t.$$s==null?this:t.$$s,o=f;if(r=M(arguments),i=r,W(i,"map!",[],function j(D){var F=j.$$s==null?this:j.$$s;return D==null&&(D=f),F.$Native(D)},{$$s:u}),o=u.$Native(this),this===n.global)return a.apply(u,i);var y=a.$$s;a.$$s=null;try{return a.apply(o,i)}finally{a.$$s=y}},{$$arity:-1,$$s:$})}),function(_,a){var $=h(_,"Helpers"),t=[$].concat(a),e=n.$r(t);return H($,"$alias_native",function r(i,u,o){var y,j,D,F;r.$$p;var G=this;return r.$$p=null,y=M(arguments,1),j=K(y),j=b(j),y.length>0&&(D=y.shift()),D==null&&(D=i),F=B(j,"as"),F==null&&(F=f),Q(D["$end_with?"]("="))?W(G,"define_method",[i],function re(ae){var le=re.$$s==null?this:re.$$s;return le.native==null&&(le.native=f),ae==null&&(ae=f),le.native[D["$[]"]($e(0,-2,!1))]=e("Native").$convert(ae),ae},{$$s:G}):Q(F)?W(G,"define_method",[i],function re(ae){var le=re.$$p||f,ce,de,he=re.$$s==null?this:re.$$s,ve=f;return he.native==null&&(he.native=f),re.$$p=null,ce=M(arguments),de=ce,ve=W(e("Native"),"call",[he.native,D].concat(Y(de)),le.$to_proc()),Q(ve)?F.$new(ve.$to_n()):f},{$$arity:-1,$$s:G}):W(G,"define_method",[i],function re(ae){var le=re.$$p||f,ce,de,he=re.$$s==null?this:re.$$s;return he.native==null&&(he.native=f),re.$$p=null,ce=M(arguments),de=ce,W(e("Native"),"call",[he.native,D].concat(Y(de)),le.$to_proc())},{$$arity:-1,$$s:G})},-2),H($,"$native_reader",function(i){var u,o,y=this;return u=M(arguments),o=u,W(o,"each",[],function j(D){var F=j.$$s==null?this:j.$$s;return D==null&&(D=f),W(F,"define_method",[D],function G(){var re=G.$$s==null?this:G.$$s;return re.native==null&&(re.native=f),re.$Native(re.native[D])},{$$s:F})},{$$s:y})},-1),H($,"$native_writer",function(i){var u,o,y=this;return u=M(arguments),o=u,W(o,"each",[],function j(D){var F=j.$$s==null?this:j.$$s;return D==null&&(D=f),W(F,"define_method",[""+D+"="],function G(re){var ae=G.$$s==null?this:G.$$s;return ae.native==null&&(ae.native=f),re==null&&(re=f),ae.$Native(ae.native[D]=re)},{$$s:F})},{$$s:y})},-1),H($,"$native_accessor",function(i){var u,o,y=this;return u=M(arguments),o=u,W(y,"native_reader",Y(o)),W(y,"native_writer",Y(o))},-1)}(p[0],p),function(_,a){var $=h(_,"Wrapper"),t=[$].concat(a),e=n.$r(t);return H($,"$initialize",function(i){var u=this;return Q(L["$native?"](i))||L.$raise(e("ArgumentError"),""+i.$inspect()+" isn't native"),u.native=i}),H($,"$to_n",ee("native")),N($,"$included",function(i){return i.$extend(e("Helpers"))})}(p[0],p),N(l,"$included",function(a){var $=this;return $.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),a.$include(C("Wrapper"))})}(v[0],v),function(g,c){var l=h(g,"Kernel"),p=[l].concat(c),C=n.$r(p);return H(l,"$native?",function(a){return a==null||!a.$$class}),H(l,"$Native",function _(a){_.$$p;var $=this;return _.$$p=null,Q(a==null)?f:Q($["$native?"](a))?E(C("Native"),"Object").$new(a):Q(a["$is_a?"](C("Array")))?W(a,"map",[],function t(e){var r=t.$$s==null?this:t.$$s;return e==null&&(e=f),r.$Native(e)},{$$s:$}):Q(a["$is_a?"](C("Proc")))?W($,"proc",[],function t(e){var r=t.$$p||f,i,u,o=t.$$s==null?this:t.$$s;return t.$$p=null,i=M(arguments),u=i,o.$Native(W(a,"call",Y(u),r.$to_proc()))},{$$arity:-1,$$s:$}):a}),Z(l,"_Array","Array"),H(l,"$Array",function _(a,$){var t=_.$$p||f,e,r,i=this;return _.$$p=null,e=M(arguments,1),r=e,Q(i["$native?"](a))?W(E(C("Native"),"Array"),"new",[a].concat(Y(r)),t.$to_proc()).$to_a():i.$_Array(a)},-2)}(v[0],v),function(g,c){var l=R(g,c,"Object"),p=l.$$prototype;return p.native=f,l.$include(E(E("Native"),"Wrapper")),H(l,"$==",function(_){var a=this;return a.native===E("Native").$try_convert(_)}),H(l,"$has_key?",function(_){var a=this;return n.hasOwnProperty.call(a.native,_)}),H(l,"$each",function C(_){var a,$,t=C.$$p||f,e=this;if(C.$$p=null,a=M(arguments),$=a,t!==f){for(var r in e.native)n.yieldX(t,[r,e.native[r]]);return e}else return W(e,"method_missing",["each"].concat(Y($)))},-1),H(l,"$[]",function(_){var a=this,$=a.native[_];return $ instanceof Function?$:E("Native").$call(a.native,_)}),H(l,"$[]=",function(_,a){var $=this,t=f;return t=E("Native").$try_convert(a),Q(t===f)?$.native[_]=a:$.native[_]=t}),H(l,"$merge!",function(_){var a=this;_=E("Native").$convert(_);for(var $ in _)a.native[$]=_[$];return a}),H(l,"$respond_to?",function(_,a){var $=this;return a==null&&(a=!1),L.$instance_method("respond_to?").$bind($).$call(_,a)},-2),H(l,"$respond_to_missing?",function(_,a){var $=this;return n.hasOwnProperty.call($.native,_)},-2),H(l,"$method_missing",function C(_,a){var $=C.$$p||f,t,e,r,i=this;return C.$$p=null,t=M(arguments,1),e=t,_.charAt(_.length-1)==="="?(r=[_.$slice(0,m(_.$length(),1)),e["$[]"](0)],W(i,"[]=",r),r[r.length-1]):W(E("Native"),"call",[i.native,_].concat(Y(e)),$.$to_proc())},-2),H(l,"$nil?",k(!1)),H(l,"$is_a?",function(_){var a=this;return n.is_a(a,_)}),H(l,"$instance_of?",function(_){var a=this;return a.$$class===_}),H(l,"$class",function(){var _=this;return _.$$class}),H(l,"$to_a",function C(_){var a=C.$$p||f,$=this;return C.$$p=null,_==null&&(_=new Map),W(E(E("Native"),"Array"),"new",[$.native,_],a.$to_proc()).$to_a()},-1),H(l,"$inspect",function(){var _=this;return"#<Native:"+String(_.native)+">"}),Z(l,"include?","has_key?"),Z(l,"key?","has_key?"),Z(l,"kind_of?","is_a?"),Z(l,"member?","has_key?")}(s("Native"),s("BasicObject")),function(g,c,l){var p=R(g,c,"Array"),C=[p].concat(l),_=n.$r(C),a=p.$$prototype;return a.named=a.native=a.get=a.block=a.set=a.length=f,p.$include(E(_("Native"),"Wrapper")),p.$include(_("Enumerable")),H(p,"$initialize",function $(t,e){var r=$.$$p||f,i=this,u=f;return $.$$p=null,e==null&&(e=new Map),I(i,z(i,"initialize",$,!1,!0),"initialize",[t],null),i.get=Q(u=e["$[]"]("get"))?u:e["$[]"]("access"),i.named=e["$[]"]("named"),i.set=Q(u=e["$[]"]("set"))?u:e["$[]"]("access"),i.length=Q(u=e["$[]"]("length"))?u:"length",i.block=r,Q(i.$length()==null)?i.$raise(_("ArgumentError"),"no length found on the array-like object"):f},-2),H(p,"$each",function $(){var t=$.$$p||f,e=this;if($.$$p=null,!Q(t))return e.$enum_for("each");for(var r=0,i=e.$length();r<i;r++)n.yield1(t,e["$[]"](r));return e}),H(p,"$[]",function(t){var e=this,r=f,i=f;return r=U(_("String"),i=t)||U(_("Symbol"),i)?Q(e.named)?e.native[e.named](t):e.native[t]:U(_("Integer"),i)?Q(e.get)?e.native[e.get](t):e.native[t]:f,Q(r)?Q(e.block)?e.block.$call(r):e.$Native(r):f}),H(p,"$[]=",function(t,e){var r=this;return Q(r.set)?r.native[r.set](t,_("Native").$convert(e)):r.native[t]=_("Native").$convert(e)}),H(p,"$last",function(t){var e=this,r=f,i=f;if(t==null&&(t=f),Q(t)){for(r=m(e.$length(),1),i=[];Q(w(r,0));)i["$<<"](e["$[]"](r)),r=m(r,1);return i}else return e["$[]"](m(e.$length(),1))},-1),H(p,"$length",function(){var t=this;return t.native[t.length]}),H(p,"$inspect",function(){var t=this;return t.$to_a().$inspect()}),Z(p,"to_ary","to_a")}(s("Native"),null,v),function(g,c){var l=R(g,c,"Numeric");return H(l,"$to_n",function(){var C=this;return C.valueOf()})}(v[0],null),function(g,c){var l=R(g,c,"Proc");return H(l,"$to_n",S)}(v[0],null),function(g,c){var l=R(g,c,"String");return H(l,"$to_n",function(){var C=this;return C.valueOf()})}(v[0],null),function(g,c){var l=R(g,c,"Regexp");return H(l,"$to_n",function(){var C=this;return C.valueOf()})}(v[0],null),function(g,c){var l=R(g,c,"MatchData");return H(l,"$to_n",ee("matches"))}(v[0],null),function(g,c,l){var p=R(g,c,"Struct"),C=[p].concat(l),_=n.$r(C);return H(p,"$to_n",function(){var $=this,t=f;return t={},W($,"each_pair",[],function(r,i){return r==null&&(r=f),i==null&&(i=f),t[r]=_("Native").$try_convert(i,i)}),t})}(v[0],null,v),function(g,c,l){var p=R(g,c,"Array"),C=[p].concat(l),_=n.$r(C);return H(p,"$to_n",function(){for(var $=this,t=[],e=0,r=$.length;e<r;e++){var i=$[e];t.push(_("Native").$try_convert(i,i))}return t})}(v[0],null,v),function(g,c){var l=R(g,c,"Boolean");return H(l,"$to_n",function(){var C=this;return C.valueOf()})}(v[0],null),function(g,c){var l=R(g,c,"Time");return H(l,"$to_n",S)}(v[0],null),function(g,c){var l=R(g,c,"NilClass");return H(l,"$to_n",function(){return null})}(v[0],null),Q(s("Hash")["$method_defined?"]("_initialize"))||function(g,c,l){var p=R(g,c,"Hash"),C=[p].concat(l),_=n.$r(C);Z(p,"_initialize","initialize");function a($,t,e){e&&(e.constructor===void 0||e.constructor===Object||e instanceof Map)?A($,t,_("Hash").$new(e)):e&&e.$$is_array?(e=e.map(function(r){return r&&(r.constructor===void 0||r.constructor===Object||e instanceof Map)?_("Hash").$new(r):p.$Native(r)}),A($,t,e)):A($,t,p.$Native(e))}return H(p,"$initialize",function $(t){var e=$.$$p||f,r=this;if($.$$p=null,t!=null)if(t.constructor===void 0||t.constructor===Object){var i,u;for(i in t)u=t[i],a(r,i,u);return r}else t instanceof Map&&n.hash_each(t,!1,function(o,y){return a(r,o,y),[!1,!1]});return W(r,"_initialize",[t],e.$to_proc())},-1),H(p,"$to_n",function(){var t=this,e={};return n.hash_each(t,!1,function(r,i){return e[_("Native").$try_convert(r,r)]=_("Native").$try_convert(i,i),[!1,!1]}),e})}(v[0],null,v),function(g,c){var l=R(g,c,"Module");return H(l,"$native_module",function(){var C=this;return n.global[C.$name()]=C})}(v[0],null),function(g,c,l){var p=R(g,c,"Class"),C=[p].concat(l),_=n.$r(C);return H(p,"$native_alias",function($,t){var e=this,r=e.prototype[n.jsid(t)];r||e.$raise(_("NameError").$new("undefined method `"+t+"' for class `"+e.$inspect()+"'",t)),e.prototype[$]=r}),H(p,"$native_class",function(){var $=this;return $.$native_module(),$.new=$.$new})}(v[0],null,v),P.$=P.global=q.$Native(n.global)};(function(n){var A;if(typeof globalThis<"u"?n=globalThis:typeof global<"u"?n=global:typeof window<"u"&&(n=window),n.console==null&&(n.console={}),typeof n.console=="object"?A=n.console:A={},"log"in A||(A.log=function(){}),"warn"in A||(A.warn=A.log),typeof n.Opal<"u")return A.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),n.Opal;var h,N,M,Q,W,L,K,b=n.Opal={};b.global=n,b.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var B=Function.prototype.call,$e=Function.prototype.bind,Y=Object.hasOwn||B.bind(Object.prototype.hasOwnProperty),H=Object.setPrototypeOf,ee=B.bind(Array.prototype.slice),Z=B.bind(Array.prototype.splice),R=4,m=R;function k(){return m+=2,m}b.uid=k,b.id=function(d){return d.$$is_number?d*2+1:(d.$$id==null&&w(d,"$$id",k()),d.$$id)};var I=b.gvars={};b.exit=function(d){I.DEBUG&&A.log("Exited with status "+d)},b.exceptions=[],b.pop_exception=function(d){var x=b.exceptions.pop();x===d||(x?I["!"]=x:I["!"]=h)};function z(d,x){if(d||(d=b.Exception||Error),K&&K.$raise)arguments.length>2?K.$raise(d.$new.apply(d,ee(arguments,1))):K.$raise(d,x);else throw d.$new?d.$new(x):new d(x)}var U={value:void 0,enumerable:!1,configurable:!0,writable:!0};function w(d,x,J){typeof d=="string"?d[x]=J:(U.value=J,Object.defineProperty(d,x,U))}b.prop=w,b.defineProperty=b.prop,b.slice=ee;var S=b.truthy=function(d){return d!==!1&&h!==d&&d!==void 0&&d!==null&&(!(d instanceof Boolean)||d.valueOf()===!0)};b.falsy=function(d){return!S(d)},b.type_error=function(d,x,J,te){d=d.$$class,te&&J?(te=te.$$class,z(b.TypeError,"can't convert "+d+" into "+x+" ("+d+"#"+J+" gives "+te+")")):z(b.TypeError,"no implicit conversion of "+d+" into "+x)},b.coerce_to=function(d,x,J,te){var ue;return J==="to_int"&&x===b.Integer&&d.$$is_number?d<0?Math.ceil(d):Math.floor(d):J==="to_str"&&x===b.String&&d.$$is_string||b.is_a(d,x)?d:d["$respond_to?"].$$pristine&&d.$method_missing.$$pristine?(ue=d[de(J)],(ue==null||ue.$$stub)&&b.type_error(d,x),ue.apply(d,te)):(d["$respond_to?"](J)||b.type_error(d,x),te==null&&(te=[]),b.send(d,J,te))},b.respond_to=function(d,x,J){if(d==null||!d.$$class)return!1;J=!!J;var te=d[x];if(d["$respond_to?"].$$pristine){if(typeof te=="function"&&!te.$$stub)return!0;if(!d["$respond_to_missing?"].$$pristine)return b.send(d,d["$respond_to_missing?"],[x.substr(1),J])}else return b.send(d,d["$respond_to?"],[x.substr(1),J])},b.trace_class=!1,b.tracers_for_class=[];function P(d){var x,J,te;for(x=0,J=b.tracers_for_class.length;x<J;x++)te=b.tracers_for_class[x],te.trace_object=d,te.block.$call(te)}function q(d,x){if(d.$$autoload[x].loaded){if(d.$$autoload[x].loaded&&!d.$$autoload[x].required&&d.$$autoload[x].exception)throw d.$$autoload[x].exception}else{d.$$autoload[x].loaded=!0;try{b.Kernel.$require(d.$$autoload[x].path)}catch(J){throw d.$$autoload[x].exception=J,J}if(d.$$autoload[x].required=!0,d.$$const[x]!=null)return d.$$autoload[x].success=!0,d.$$const[x]}}function v(d,x){if(d){if(d.$$const[x]!=null)return d.$$const[x];if(d.$$autoload&&d.$$autoload[x])return q(d,x)}}function s(d,x){var J,te,ue;if(d.length!==0)for(J=0,te=d.length;J<te;J++){if(ue=d[J].$$const[x],ue!=null)return ue;if(d[J].$$autoload&&d[J].$$autoload[x])return q(d[J],x)}}function f(d,x){var J,te,ue;if(d!=null)for(ue=G(d),J=0,te=ue.length;J<te;J++){if(ue[J].$$const&&Y(ue[J].$$const,x))return ue[J].$$const[x];if(ue[J].$$autoload&&ue[J].$$autoload[x])return q(ue[J],x)}}function E(d,x){if(d==null||d.$$is_module)return f(M,x)}function g(d,x){return(d||M).$const_missing(x)}b.const_get_local=function(d,x,J){var te;if(d!=null)return d==="::"&&(d=M),!d.$$is_module&&!d.$$is_class&&z(b.TypeError,d.toString()+" is not a class/module"),te=v(d,x),te!=null||J?te:g(d,x)},b.const_get_qualified=function(d,x,J){var te,ue,_e,ge=b.const_cache_version;if(x==null)return te=v(M,d),te??b.const_get_qualified(M,d,J);if(d!=null)return d==="::"&&(d=M),!d.$$is_module&&!d.$$is_class&&z(b.TypeError,d.toString()+" is not a class/module"),(ue=d.$$const_cache)==null&&(w(d,"$$const_cache",Object.create(null)),ue=d.$$const_cache),_e=ue[x],_e==null||_e[0]!==ge?((te=v(d,x))!=null||(te=f(d,x))!=null,ue[x]=[ge,te]):te=_e[1],te!=null||J?te:g(d,x)},b.const_cache_version=1,b.const_get_relative=function(d,x,J){var te=d[0],ue,_e=b.const_cache_version,ge,pe;return(ge=d.$$const_cache)==null&&(w(d,"$$const_cache",Object.create(null)),ge=d.$$const_cache),pe=ge[x],pe==null||pe[0]!==_e?((ue=v(te,x))!=null||(ue=s(d,x))!=null||(ue=f(te,x))!=null||(ue=E(te,x))!=null,ge[x]=[_e,ue]):ue=pe[1],ue!=null||J?ue:g(te,x)};function c(d,x,J){var te=!0;return(d==null||d==="::")&&(d=M),J.$$is_a_module&&((J.$$name==null||J.$$name===h)&&(J.$$name=x),J.$$base_module==null&&(J.$$base_module=d)),d.$$const=d.$$const||Object.create(null),(x in d.$$const||"$$autoload"in d&&x in d.$$autoload)&&(te=!1),d.$$const[x]=J,d.$$=d.$$const,b.const_cache_version++,d===M&&(b[x]=J),w(d,x,J),te&&d.$const_added&&!d.$const_added.$$pristine&&d.$const_added(x),J}b.const_set=c,b.constants=function(d,x){x==null&&(x=!0);var J,te=[d],ue,_e,ge={},pe;for(x&&(te=te.concat(G(d))),x&&d.$$is_module&&(te=te.concat([b.Object]).concat(G(b.Object))),ue=0,_e=te.length;ue<_e&&(J=te[ue],!(d!==M&&J==M));ue++){for(pe in J.$$const)ge[pe]=!0;if(J.$$autoload)for(pe in J.$$autoload)ge[pe]=!0}return Object.keys(ge)},b.const_remove=function(d,x){if(b.const_cache_version++,d.$$const[x]!=null){var J=d.$$const[x];return delete d.$$const[x],J}if(d.$$autoload&&d.$$autoload[x])return delete d.$$autoload[x],h;z(b.NameError,"constant "+d+"::"+d.$name()+" not defined")},b.const_get_relative_factory=function(d){return function(x,J){return b.$$(d,x,J)}},b.$$=b.const_get_relative,b.$$$=b.const_get_qualified,b.$r=b.const_get_relative_factory;function l(d){return d==null?!1:d.$$bridge?d:d.$$super?l(d.$$super):!1}function p(d,x,J){var te,ue;if((ue=l(x))?te=function(){var ye=new($e.apply(ue.$$constructor,he(null,arguments)));return H(ye,te.$$prototype),ye}:te=function(){},d&&d!==h&&w(te,"displayName","::"+d),w(te,"$$name",d),w(te,"$$constructor",te),w(te,"$$prototype",te.prototype),w(te,"$$const",{}),w(te,"$$is_class",!0),w(te,"$$is_a_module",!0),w(te,"$$super",x),w(te,"$$cvars",{}),w(te,"$$own_included_modules",[]),w(te,"$$own_prepended_modules",[]),w(te,"$$ancestors",[]),w(te,"$$ancestors_cache_version",null),w(te,"$$subclasses",[]),w(te,"$$cloned_from",[]),w(te.$$prototype,"$$class",te),b.Class&&H(te,b.Class.prototype),x!=null){if(H(te.$$prototype,x.$$prototype),J!==!0)if(typeof WeakRef<"u"){var _e,ge,pe=[];for(_e=0;_e<x.$$subclasses.length;_e++)ge=x.$$subclasses[_e],ge.deref()!==void 0&&pe.push(ge);pe.push(new WeakRef(te)),x.$$subclasses=pe}else x.$$subclasses.push(te);x.$$meta&&b.build_class_singleton_class(te)}return te}b.allocate_class=p;function C(d,x){var J=v(d,x);if(J)return J.$$is_class||z(b.TypeError,x+" is not a class"),J}function _(d,x){d.$$super!==x&&z(b.TypeError,"superclass mismatch for class "+d.$$name)}b.klass=function(d,x,J){var te;d==null||d=="::"?d=M:!d.$$is_class&&!d.$$is_module&&(d=d.$$class),x!=null&&(!x.hasOwnProperty||x.hasOwnProperty&&!x.hasOwnProperty("$$is_class"))&&(x.constructor&&x.constructor.name=="Function"?(te=x,x=M):z(b.TypeError,"superclass must be a Class ("+(x.constructor&&(x.constructor.name||x.constructor.$$name)||typeof x)+" given)"));var ue=C(d,J);return ue!=null?x&&_(ue,x):(x==null&&(x=M),ue=p(J,x),c(d,J,ue),x.$inherited&&x.$inherited(ue),te&&b.bridge(te,ue)),b.trace_class&&P(ue),ue};function a(d){var x=function(){},J=x;return d&&w(x,"displayName",d+".constructor"),w(J,"$$name",d),w(J,"$$prototype",x.prototype),w(J,"$$const",{}),w(J,"$$is_module",!0),w(J,"$$is_a_module",!0),w(J,"$$cvars",{}),w(J,"$$iclasses",[]),w(J,"$$own_included_modules",[]),w(J,"$$own_prepended_modules",[]),w(J,"$$ancestors",[J]),w(J,"$$ancestors_cache_version",null),w(J,"$$cloned_from",[]),H(J,b.Module.prototype),J}b.allocate_module=a;function $(d,x){var J=v(d,x);return J==null&&d===M&&(J=f(M,x)),J&&!J.$$is_module&&J!==M&&z(b.TypeError,x+" is not a module"),J}b.module=function(d,x){var J;return d==null||d=="::"?d=M:!d.$$is_class&&!d.$$is_module&&(d=d.$$class),J=$(d,x),J==null&&(J=a(x),c(d,x,J)),b.trace_class&&P(J),J},b.get_singleton_class=function(d){return d.$$is_number&&z(b.TypeError,"can't define singleton"),d.$$meta?d.$$meta:d.hasOwnProperty("$$is_class")?b.build_class_singleton_class(d):d.hasOwnProperty("$$is_module")?b.build_module_singleton_class(d):b.build_object_singleton_class(d)};function t(d,x){d.hasOwnProperty("$$meta")?d.$$meta=x:w(d,"$$meta",x),d.$$frozen?d.$$meta.$freeze():H(d,x.$$prototype)}b.build_class_singleton_class=function(d){if(d.$$meta)return d.$$meta;var x=d===N?W:b.get_singleton_class(d.$$super),J=p(null,x,!0);return w(J,"$$is_singleton",!0),w(J,"$$singleton_of",d),t(d,J),w(d,"$$class",b.Class),J},b.build_module_singleton_class=function(d){if(d.$$meta)return d.$$meta;var x=p(null,b.Module,!0);return w(x,"$$is_singleton",!0),w(x,"$$singleton_of",d),t(d,x),w(d,"$$class",b.Module),x},b.build_object_singleton_class=function(d){var x=d.$$class,J=p(h,x,!0);return w(J,"$$is_singleton",!0),w(J,"$$singleton_of",d),delete J.$$prototype.$$class,t(d,J),J},b.is_method=function(d){return d[0]==="$"&&d[1]!=="$"},b.instance_methods=function(d){for(var x=Object.create(null),J=[],te=G(d),ue=0,_e=te.length;ue<_e;ue++){var ge=te[ue],pe=ge.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ke=ye.length;we<ke;we++){var Ee=ye[we];if(!x[Ee]){if(b.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);J.push(qe)}}x[Ee]=!0}}}return J},b.own_instance_methods=function(d){var x=[],J=d.$$prototype;J.hasOwnProperty("$$dummy")&&(J=J.$$define_methods_on);for(var te=Object.getOwnPropertyNames(J),ue=0,_e=te.length;ue<_e;ue++){var ge=te[ue];if(b.is_method(ge)){var pe=J[ge];if(!pe.$$stub){var ye=ge.slice(1);x.push(ye)}}}return x},b.methods=function(d){return b.instance_methods(d.$$meta||d.$$class)},b.own_methods=function(d){return d.$$meta?b.own_instance_methods(d.$$meta):[]},b.receiver_methods=function(d){var x=b.get_singleton_class(d),J=b.own_instance_methods(x),te=b.own_instance_methods(x.$$super);return J.concat(te)},b.class_variables=function(d){var x=G(d),J,te=x.length,ue={};for(J=te-1;J>=0;J--){var _e=x[J];for(var ge in _e.$$cvars)ue[ge]=_e.$$cvars[ge]}return ue},b.class_variable_set=function(d,x,J){var te=G(d),ue,_e=te.length;for(ue=_e-2;ue>=0;ue--){var ge=te[ue];if(Y(ge.$$cvars,x))return ge.$$cvars[x]=J,J}return d.$$cvars[x]=J,J},b.class_variable_get=function(d,x,J){if(Y(d.$$cvars,x))return d.$$cvars[x];var te=G(d),ue,_e=te.length;for(ue=0;ue<_e;ue++){var ge=te[ue];if(Y(ge.$$cvars,x))return ge.$$cvars[x]}return J||z(b.NameError,"uninitialized class variable "+x+" in "+d.$name()),h};function e(d){return d.hasOwnProperty("$$iclass")&&d.hasOwnProperty("$$root")}function r(d){for(var x=[],J,te=Object.getPrototypeOf(d.$$prototype);te&&!te.hasOwnProperty("$$class");)J=D(te),J&&x.push(J),te=Object.getPrototypeOf(te);return x}function i(d){var x=[],J,te=Object.getPrototypeOf(d.$$prototype);if(d.$$prototype.hasOwnProperty("$$dummy"))for(;te&&te!==d.$$prototype.$$define_methods_on;)J=D(te),J&&x.push(J),te=Object.getPrototypeOf(te);return x}b.append_features=function(d,x){var J=G(d),te=[];J.indexOf(x)!==-1&&z(b.ArgumentError,"cyclic include detected");for(var ue=0,_e=J.length;ue<_e;ue++){var ge=J[ue],pe=o(ge);w(pe,"$$included",!0),te.push(pe)}var ye=G(x),we=j(te),ke,Ee;if(ye.indexOf(d)===-1)ke=x.$$prototype,Ee=Object.getPrototypeOf(x.$$prototype);else{for(var xe=x.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===d&&e(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var ze=Object.getPrototypeOf(qe);ze.hasOwnProperty("$$iclass")&&!e(ze);)ze=Object.getPrototypeOf(ze);ke=xe,Ee=ze}else ke=x.$$prototype,Ee=Object.getPrototypeOf(x.$$prototype)}H(ke,we.first),H(we.last,Ee),x.$$own_included_modules=r(x),b.const_cache_version++},b.prepend_features=function(d,x){var J=G(d),te=[];J.indexOf(x)!==-1&&z(b.ArgumentError,"cyclic prepend detected");for(var ue=0,_e=J.length;ue<_e;ue++){var ge=J[ue],pe=o(ge);w(pe,"$$prepended",!0),te.push(pe)}var ye=j(te),we=x.$$prototype,ke=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=y(x),u(x),w(we,"$$dummy",!0),w(we,"$$define_methods_on",Ee),H(we,Ee),H(Ee,ke));var ze=G(x);if(ze.indexOf(d)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else z(b.RuntimeError,"Prepending a module multiple times is not supported");H(xe,ye.first),H(ye.last,qe),x.$$own_prepended_modules=i(x),b.const_cache_version++};function u(d){for(var x=d.$$prototype,J=Object.getOwnPropertyNames(x),te=0;te<J.length;te++){var ue=J[te];b.is_method(ue)&&delete x[ue]}}function o(d){var x=y(d);return d.$$is_module&&d.$$iclasses.push(x),x}function y(d){var x={},J=d.$$prototype;J.hasOwnProperty("$$dummy")&&(J=J.$$define_methods_on);var te=Object.getOwnPropertyNames(J),ue=te.length,_e;for(_e=0;_e<ue;_e++){var ge=te[_e];w(x,ge,J[ge])}return w(x,"$$iclass",!0),w(x,"$$module",d),x}function j(d){var x=d.length,J=d[0];if(w(J,"$$root",!0),x===1)return{first:J,last:J};for(var te=J,ue=1;ue<x;ue++){var _e=d[ue];H(te,_e),te=_e}return{first:d[0],last:d[x-1]}}b.bridge=function(d,x){d.hasOwnProperty("$$bridge")&&z(b.ArgumentError,"already bridged"),w(d,"$$bridge",x),H(d.prototype,(x.$$super||b.Object).$$prototype),w(x,"$$prototype",d.prototype),w(x.$$prototype,"$$class",x),w(x,"$$constructor",d),w(x,"$$bridge",!0)};function D(d){if(!d.hasOwnProperty("$$dummy")){if(d.hasOwnProperty("$$iclass"))return d.$$module;if(d.hasOwnProperty("$$class"))return d.$$class}}function F(d){return d.$$own_prepended_modules.concat([d]).concat(d.$$own_included_modules)}function G(d){if(!d)return[];if(d.$$ancestors_cache_version===b.const_cache_version)return d.$$ancestors;var x=[],J,te,ue;for(J=0,te=F(d),ue=te.length;J<ue;J++)x.push(te[J]);if(d.$$super)for(J=0,te=G(d.$$super),ue=te.length;J<ue;J++)x.push(te[J]);return d.$$ancestors_cache_version=b.const_cache_version,d.$$ancestors=x,x}b.ancestors=G,b.included_modules=function(d){for(var x=[],J=null,te=Object.getPrototypeOf(d.$$prototype);te&&Object.getPrototypeOf(te);te=Object.getPrototypeOf(te))J=D(te),J&&J.$$is_module&&te.$$iclass&&te.$$included&&x.push(J);return x},b.add_stubs=function(d){var x=b.BasicObject.$$prototype,J,te;d=d.split(",");for(var ue=0,_e=d.length;ue<_e;ue++)J=de(d[ue]),te=x[J],(te==null||te.$$stub)&&b.add_stub_for(x,J)},b.add_stub_for=function(d,x){w(d,x,b.stub_for(x))},b.stub_for=function(d){function x(){return this.$method_missing.$$p=x.$$p,x.$$p=null,this.$method_missing.apply(this,he(d.slice(1),arguments))}return x.$$stub=!0,x},b.ac=function(d,x,J,te){var ue="";J.$$is_a_module?ue+=J.$$name+".":ue+=J.$$class.$$name+"#",ue+=te,z(b.ArgumentError,"["+ue+"] wrong number of arguments (given "+d+", expected "+x+")")},b.block_ac=function(d,x,J){var te="`block in "+J+"'";z(b.ArgumentError,te+": wrong number of arguments (given "+d+", expected "+x+")")};function re(d){return d.hasOwnProperty("$$meta")&&d.$$meta!==null?G(d.$$meta):G(d.$$class)}b.find_super=function(d,x,J,te,ue){var _e=de(x),ge,pe,ye,we,ke=-1,Ee;for(ge=re(d),we=J.$$owner,Ee=0;Ee<ge.length;Ee++)if(pe=ge[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ke=Ee;break}for(Ee=ke+1;Ee<ge.length;Ee++){pe=ge[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(_e)){ye=xe[_e];break}}return!te&&ye&&ye.$$stub&&d.$method_missing.$$pristine&&z(b.NoMethodError,"super: no superclass method `"+x+"' for "+d,x),ye.$$stub&&!ue?null:ye},b.find_block_super=function(d,x,J,te,ue){var _e=x;return J||z(b.RuntimeError,"super called outside of method"),ue&&J.$$define_meth&&z(b.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),J.$$def&&(_e=J.$$jsid),b.find_super(d,_e,J,te)},b.find_super_dispatcher=b.find_super,b.find_iter_super_dispatcher=b.find_block_super;function ae(d,x,J){try{d(x)}catch(te){if(te===J)return J.$v;throw te}}b.yield1=function(d,x){typeof d!="function"&&z(b.LocalJumpError,"no block given");var J=d.$$has_top_level_mlhs_arg,te=d.$$has_trailing_comma_in_args,ue=d.$$is_lambda&&d.$$ret;return(d.length>1||(J||te)&&d.length===1)&&(x=b.to_ary(x)),(d.length>1||te&&d.length===1)&&x.$$is_array?ue?ae(d.apply.bind(d,null),x,d.$$ret):d.apply(null,x):ue?ae(d,x,d.$$ret):d(x)},b.yieldX=function(d,x){return typeof d!="function"&&z(b.LocalJumpError,"no block given"),d.length>1&&x.length===1&&x[0].$$is_array&&(x=x[0]),d.$$is_lambda&&d.$$ret?ae(d.apply.bind(d,null),x,d.$$ret):d.apply(null,x)},b.rescue=function(d,x){for(var J=0;J<x.length;J++){var te=x[J];if(te.$$is_array){var ue=b.rescue(d,te);if(ue)return ue}else if(te===b.JS.Error||te["$==="](d))return te}return null},b.is_a=function(d,x){if(x!=null&&d.$$meta===x||d.$$class===x)return!0;if(d.$$is_number&&x.$$is_number_class)return x.$$is_integer_class?d%1===0:!0;var J=G(d.$$is_class?b.get_singleton_class(d):d.$$meta||d.$$class);return J.indexOf(x)!==-1},b.to_hash=function(d){if(d.$$is_hash)return d;if(d["$respond_to?"]("to_hash",!0)){var x=d.$to_hash();if(x.$$is_hash)return x;z(b.TypeError,"Can't convert "+d.$$class+" to Hash ("+d.$$class+"#to_hash gives "+x.$$class+")")}else z(b.TypeError,"no implicit conversion of "+d.$$class+" into Hash")},b.to_ary=function(d){if(d.$$is_array)return d;if(d["$respond_to?"]("to_ary",!0)){var x=d.$to_ary();if(x===h)return[d];if(x.$$is_array)return x;z(b.TypeError,"Can't convert "+d.$$class+" to Array ("+d.$$class+"#to_ary gives "+x.$$class+")")}else return[d]},b.to_a=function(d){if(d.$$is_array)return d.slice();if(d["$respond_to?"]("to_a",!0)){var x=d.$to_a();if(x===h)return[d];if(x.$$is_array)return x;z(b.TypeError,"Can't convert "+d.$$class+" to Array ("+d.$$class+"#to_a gives "+x.$$class+")")}else return[d]},b.extract_kwargs=function(d){var x=d[d.length-1];if(x!=null&&b.respond_to(x,"$to_hash",!0))return Z(d,d.length-1),x},b.kwrestargs=function(d,x){var J=new Map;return b.hash_each(d,!1,function(te,ue){return x[te]||b.hash_put(J,te,ue),[!1,!1]}),J};function le(d,x){typeof x=="number"?d.$$arity=x:typeof x=="object"&&Object.assign(d,x)}var ce=new Map;function de(d){var x=ce.get(d);return x||(x="$"+d,ce.set(d,x)),x}b.jsid=de;function he(d,x){return x.$$is_array||(x=ee(x)),[d].concat(x)}b.send=function(d,x,J,te,ue){var _e;return typeof x=="function"?(_e=x,x=null):typeof x=="string"?_e=d[de(x)]:z(b.NameError,"Passed method should be a string or a function"),b.send2(d,_e,x,J,te,ue)},b.send2=function(d,x,J,te,ue,_e){return x==null&&J!=null&&d.$method_missing&&(x=d.$method_missing,te=he(J,te)),le(ue,_e),typeof ue=="function"&&(x.$$p=ue),x.apply(d,te)},b.refined_send=function(d,x,J,te,ue,_e){var ge,pe,ye,we,ke,Ee,xe,qe,ze,Ae;for(we=re(x),ge=0;ge<we.length;ge++)for(ke=b.id(we[ge]),pe=0;pe<d.length;pe++)for(Ee=d[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ke]>"u")&&(ze=qe[ke],typeof ze.$$prototype[de(J)]<"u")))return Ae=ze.$$prototype[de(J)],b.send2(x,Ae,J,te,ue,_e);return b.send(x,J,te,ue,_e)},b.lambda=function(d,x){return d.$$is_lambda=!0,le(d,x),d},b.def=function(d,x,J,te){return le(J,te),d===b.top?b.defn(b.Object,x,J):!d.$$eval&&d.$$is_a_module?b.defn(d,x,J):b.defs(d,x,J)},b.defn=function(d,x,J){T(d),J.displayName=x,J.$$owner=d;var te=x.substr(1),ue=d.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),w(ue,x,J),d.$$is_module){d.$$module_function&&b.defs(d,x,J);for(var _e=0,ge=d.$$iclasses,pe=ge.length;_e<pe;_e++){var ye=ge[_e];w(ye,x,J)}}var we=d.$$singleton_of;return d.$method_added&&!d.$method_added.$$stub&&!we?d.$method_added(te):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(te),te},b.defs=function(d,x,J,te){return le(J,te),(d.$$is_string||d.$$is_number)&&z(b.TypeError,"can't define singleton"),b.defn(b.get_singleton_class(d),x,J)};function ve(d,x){if(d.$$is_module)for(var J=0,te=d.$$iclasses,ue=te.length;J<ue;J++){var _e=te[J];delete _e[x]}}b.rdef=function(d,x){Y(d.$$prototype,x)||z(b.NameError,"method '"+x.substr(1)+"' not defined in "+d.$name()),delete d.$$prototype[x],ve(d,x),d.$$is_singleton?d.$$prototype.$singleton_method_removed&&!d.$$prototype.$singleton_method_removed.$$stub&&d.$$prototype.$singleton_method_removed(x.substr(1)):d.$method_removed&&!d.$method_removed.$$stub&&d.$method_removed(x.substr(1))},b.udef=function(d,x){(!d.$$prototype[x]||d.$$prototype[x].$$stub)&&z(b.NameError,"method '"+x.substr(1)+"' not defined in "+d.$name()),b.add_stub_for(d.$$prototype,x),ve(d,x),d.$$is_singleton?d.$$prototype.$singleton_method_undefined&&!d.$$prototype.$singleton_method_undefined.$$stub&&d.$$prototype.$singleton_method_undefined(x.substr(1)):d.$method_undefined&&!d.$method_undefined.$$stub&&d.$method_undefined(x.substr(1))};function me(d){return typeof d=="function"&&!d.$$stub}b.alias=function(d,x,J){var te=de(x),ue=de(J),_e,ge;if(typeof d.$$prototype>"u"&&(d=b.Object),_e=d.$$prototype[ue],d.$$eval)return b.alias(b.get_singleton_class(d),x,J);if(!me(_e)){for(var pe=d.$$super;typeof _e!="function"&&pe;)_e=pe[ue],pe=pe.$$super;!me(_e)&&d.$$is_module&&(_e=b.Object.$$prototype[ue]),me(_e)||z(b.NameError,"undefined method `"+J+"' for class `"+d.$name()+"'")}return _e.$$alias_of&&(_e=_e.$$alias_of),ge=b.wrap_method_body(_e),ge.displayName=x,ge.$$alias_of=_e,ge.$$alias_name=x,b.defn(d,te,ge),d},b.wrap_method_body=function(d){var x=function(){var J=x.$$p;return x.$$p=null,b.send(this,d,arguments,J)};try{Object.defineProperty(x,"length",{value:d.length})}catch{}return x.$$arity=d.$$arity==null?d.length:d.$$arity,x.$$parameters=d.$$parameters,x.$$source_location=d.$$source_location,x},b.alias_gvar=function(d,x){return Object.defineProperty(I,d,{configurable:!0,enumerable:!0,get:function(){return I[x]},set:function(J){I[x]=J}}),h},b.alias_native=function(d,x,J){var te=de(x),ue=d.$$prototype[J];return(typeof ue!="function"||ue.$$stub)&&z(b.NameError,"undefined native method `"+J+"' for class `"+d.$name()+"'"),b.defn(d,te,ue),d},b.hash_init=function(d){A.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},b.hash_clone=function(d,x){return x.$$none=d.$$none,x.$$proc=d.$$proc,b.hash_each(d,x,function(J,te){return b.hash_put(x,J,te),[!1,x]})},b.hash_put=function(d,x,J){var te=typeof x;if(te==="string"||te==="symbol"||te==="number"||te==="boolean"||te==="bigint")d.set(x,J);else if(x.$$is_string)d.set(x.valueOf(),J);else{d.$$keys||(d.$$keys=new Map);var ue=x.$$is_string?x.valueOf():d.$$by_identity?b.id(x):x.$hash(),_e=d.$$keys;if(!_e.has(ue)){_e.set(ue,[x]),d.set(x,J);return}for(var ge=_e.get(ue),pe,ye=0;ye<ge.length;ye++)if(pe=ge[ye],x===pe||x["$eql?"](pe)){d.set(pe,J);return}ge.push(x),d.set(x,J)}},b.hash_get=function(d,x){var J=typeof x;if(J==="string"||J==="symbol"||J==="number"||J==="boolean"||J==="bigint")return d.get(x);if(d.$$keys){var te=x.$$is_string?x.valueOf():d.$$by_identity?b.id(x):x.$hash(),ue=d.$$keys.get(te),_e;if(ue!==void 0){for(var ge=0;ge<ue.length;ge++)if(_e=ue[ge],x===_e||x["$eql?"](_e))return d.get(_e)}else if(x.$$is_string)return d.get(te)}else if(x.$$is_string)return d.get(x.valueOf())};function be(d,x){var J=d.get(x);if(J!==void 0)return d.delete(x),J}b.hash_delete=function(d,x){var J=typeof x;if(J==="string"||J==="symbol"||J==="number"||J==="boolean"||J==="bigint")return be(d,x);if(d.$$keys){var te=x.$$is_string?x.valueOf():d.$$by_identity?b.id(x):x.$hash(),ue=d.$$keys.get(te),_e;if(ue!==void 0){for(var ge=0;ge<ue.length;ge++)if(_e=ue[ge],x===_e||x["$eql?"](_e))return ue.splice(ge,1),ue.length===0&&d.$$keys.delete(te),be(d,_e)}else if(x.$$is_string)return be(d,te)}else if(x.$$is_string)return be(d,x.valueOf())},b.hash_rehash=function(d){var x=d.$$keys;return x&&x.clear(),b.hash_each(d,!1,function(J,te){var ue=typeof J;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var _e=J.$$is_string?J.valueOf():d.$$by_identity?b.id(J):J.$hash();if(x||(d.$$keys=x=new Map),!x.has(_e))return x.set(_e,[J]),[!1,!1];for(var ge=x.get(_e),pe=ge.length===1?ge:ee(ge),ye,we=0;we<pe.length;we++)ye=pe[we],(J===ye||J["$eql?"](ye))&&(ge.splice(ge.indexOf(ye),1),d.delete(ye));return ge.push(J),[!1,!1]}),d},b.hash=function(){var d=arguments.length,x,J,te,ue,_e,ge;if(d===1&&arguments[0].$$is_hash)return arguments[0];if(J=new Map,d===1)if(x=arguments[0],arguments[0].$$is_array){for(ue=x.length,te=0;te<ue;te++)x[te].length!==2&&z(b.ArgumentError,"value not of length 2: "+x[te].$inspect()),_e=x[te][0],ge=x[te][1],b.hash_put(J,_e,ge);return J}else{x=arguments[0];for(_e in x)Y(x,_e)&&(ge=x[_e],b.hash_put(J,_e,ge));return J}for(d%2!==0&&z(b.ArgumentError,"odd number of arguments for Hash"),te=0;te<d;te+=2)_e=arguments[te],ge=arguments[te+1],b.hash_put(J,_e,ge);return J},b.hash2=function(d,x){A.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var J=new Map,te=0,ue=d.length;te<ue;te++)J.set(d[te],x[d[te]]);return J},b.hash_each=function(d,x,J){for(var te,ue=0,_e,ge=Array.from(d.entries()),pe=ge.length;ue<pe;ue++)if(_e=ge[ue],te=J(_e[0],_e[1]),te[0])return te[1];return te?te[1]:x},b.range=function(d,x,J){var te=new b.Range;return te.begin=d,te.end=x,te.excl=J,te};var ie=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];b.ivar=function(d){return ie.indexOf(d)!==-1&&(d+="$"),d};function T(d){d.$$frozen&&z(b.FrozenError,"can't modify frozen "+d.$class()+": "+d,new Map([["receiver",d]]))}b.deny_frozen_access=T,b.freeze=function(d){return w(d,"$$frozen",!0),d.hasOwnProperty("$$id")||w(d,"$$id",k()),d.hasOwnProperty("$$meta")?d.$$meta.$freeze():w(d,"$$meta",null),d.hasOwnProperty("$$comparable")||w(d,"$$comparable",null),Object.seal(d),d};function V(d,x){var J=Object.getOwnPropertyNames(d),te=J.length,ue,_e,ge;for(ue=0;ue<te;ue++)_e=J[ue],_e[0]!=="$"&&(ge=Object.getOwnPropertyDescriptor(d,_e),ge&&ge.enumerable&&x(_e,ge))}b.each_ivar=V,b.freeze_props=function(d){var x={get:null,set:function(J){T(d)},enumerable:!0};V(d,function(J,te){te.writable&&(x.get=se(te.value),Object.defineProperty(d,J,x))})},b.escape_regexp=function(d){return d.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},b.global_regexp=function(d){return d.global?d:(d.$$g==null?d.$$g=new RegExp(d.source,(d.multiline?"gm":"g")+(d.ignoreCase?"i":"")):d.$$g.lastIndex=null,d.$$g)},b.global_multiline_regexp=function(d){var x,J;return d.global&&d.multiline?d:(J="gm"+(d.ignoreCase?"i":""),d.multiline?(d.$$g==null&&(d.$$g=new RegExp(d.source,J)),x=d.$$g):(d.$$gm==null&&(d.$$gm=new RegExp(d.source,J)),x=d.$$gm),x.lastIndex=null,x)},b.regexp=function(d,x){for(var J,te=typeof x<"u"&&x&&x.indexOf("i")>=0,ue=0,_e=d.length;ue<_e;ue++)J=d[ue],J instanceof RegExp&&(J.ignoreCase!==te&&b.Kernel.$warn("ignore case doesn't match for "+J.source.$inspect(),new Map([["uplevel",1]])),J=J.source),J===""&&(J="(?:"+J+")"),d[ue]=J;return x?new RegExp(d.join(""),x):new RegExp(d.join(""))},b.modules={},b.loaded_features=["corelib/runtime"],b.current_dir=".",b.require_table={"corelib/runtime":!0},b.normalize=function(d){var x,J,te=[],ue="/";b.current_dir!=="."&&(d=b.current_dir.replace(/\/*$/,"/")+d),d=d.replace(/^\.\//,""),d=d.replace(/\.(rb|opal|js)$/,""),x=d.split(ue);for(var _e=0,ge=x.length;_e<ge;_e++)J=x[_e],J!==""&&(J===".."?te.pop():te.push(J));return te.join(ue)},b.loaded=function(d){var x,J,te;for(x=0,J=d.length;x<J;x++)te=b.normalize(d[x]),!b.require_table[te]&&(b.loaded_features.push(te),b.require_table[te]=!0)},b.load_normalized=function(d){b.loaded([d]);var x=b.modules[d];if(x){var J=x(b);if(typeof Promise<"u"&&J instanceof Promise)return J.then(se(!0))}else{var te=b.config.missing_require_severity,ue="cannot load such file -- "+d;te==="error"?z(b.LoadError,ue):te==="warning"&&A.warn("WARNING: LoadError: "+ue)}return!0},b.load=function(d){return d=b.normalize(d),b.load_normalized(d)},b.require=function(d){return d=b.normalize(d),b.require_table[d]?!1:b.load_normalized(d)},b.encodings=Object.create(null),b.set_encoding=function(d,x,J){typeof J>"u"&&(J="encoding"),(typeof d=="string"||d.$$frozen===!0)&&z(b.FrozenError,"can't modify frozen String");var te=b.find_encoding(x);return te===d[J]||(d[J]=te),d},b.find_encoding=function(d){var x=b.encodings,J=x[d]||x[d.toUpperCase()];return J||z(b.ArgumentError,"unknown encoding name - "+d),J},b.enc=function(d,x){var J=new String(d);return J=b.set_encoding(J,x),J.internal_encoding=J.encoding,J},b.binary=function(d){var x=new String(d);return b.set_encoding(x,"binary","internal_encoding")},b.last_promise=null,b.promise_unhandled_exception=!1,b.queue=function(d){if(b.last_promise)return b.last_promise=b.last_promise.then(function(){if(!b.promise_unhandled_exception)return d(b)}).catch(function(J){b.respond_to(J,"$full_message")&&(J=J.$full_message()),A.error(J),b.promise_unhandled_exception=!0,b.exit(1)}),b.last_promise;var x=d(b);return typeof Promise=="function"&&typeof x=="object"&&x instanceof Promise&&(b.last_promise=x),x};function X(d,x){return typeof d=="number"&&typeof x=="number"}b.rb_plus=function(d,x){return X(d,x)?d+x:d["$+"](x)},b.rb_minus=function(d,x){return X(d,x)?d-x:d["$-"](x)},b.rb_times=function(d,x){return X(d,x)?d*x:d["$*"](x)},b.rb_divide=function(d,x){return X(d,x)?d/x:d["$/"](x)},b.rb_lt=function(d,x){return X(d,x)?d<x:d["$<"](x)},b.rb_gt=function(d,x){return X(d,x)?d>x:d["$>"](x)},b.rb_le=function(d,x){return X(d,x)?d<=x:d["$<="](x)},b.rb_ge=function(d,x){return X(d,x)?d>=x:d["$>="](x)};function O(d,x){return typeof d=="number"&&typeof x=="number"||typeof d=="string"&&typeof x=="string"}function ne(d,x){return O(d,x)?d===x:S(d["$=="](x))}b.eqeq=ne,b.eqeqeq=function(d,x){return O(d,x)?d===x:S(d["$==="](x))},b.neqeq=function(d,x){return O(d,x)?d!==x:S(d["$!="](x))},b.not=function(d){return d==null||d===!1||h===d?!0:d===!0||d["$!"].$$pristine?!1:S(d["$!"]())};function se(d){return function(){return d}}b.return_val=se,b.return_self=function(){return this},b.return_ivar=function(d){return function(){return this[d]==null?h:this[d]}},b.assign_ivar=function(d){return function(x){return T(this),this[d]=x}},b.assign_ivar_val=function(d,x){return function(){return T(this),this[d]=x}},b.ensure_kwargs=function(d){if(d==null)return new Map;if(d.$$is_hash)return d;z(b.ArgumentError,"expected kwargs")},b.get_kwarg=function(d,x){var J=b.hash_get(d,x);return J===void 0&&z(b.ArgumentError,"missing keyword: "+x),J},b.large_array_unpack=function(d){var x=d.split(","),J=x.length,te;for(te=0;te<J;te++)switch(x[te][0]){case void 0:x[te]=h;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":x[te]=+x[te]}return x},b.opal32_init=se(1332765036);function oe(d,x){return d<<x|d>>>32-x}b.opal32_add=function(d,x){return d^=x,d=oe(d,1),d},b.BasicObject=N=p("BasicObject",null),b.Object=M=p("Object",b.BasicObject),b.Module=Q=p("Module",b.Object),b.Class=W=p("Class",b.Module),b.Opal=L=a("Opal"),b.Kernel=K=a("Kernel"),H(b.BasicObject,b.Class.$$prototype),H(b.Object,b.Class.$$prototype),H(b.Module,b.Class.$$prototype),H(b.Class,b.Class.$$prototype),N.$$const.BasicObject=N,c(M,"BasicObject",N),c(M,"Object",M),c(M,"Module",Q),c(M,"Class",W),c(M,"Opal",L),c(M,"Kernel",K),N.$$class=W,M.$$class=W,Q.$$class=W,W.$$class=W,L.$$class=Q,K.$$class=Q,w(M.$$prototype,"toString",function(){var d=this.$to_s();return d.$$is_string&&typeof d=="object"?d.valueOf():d}),w(M.$$prototype,"$require",b.require),b.top=new M,b.top.$to_s=b.top.$inspect=se("main"),b.top.$define_method=fe;function fe(){var d=fe.$$p;return fe.$$p=null,b.send(M,"define_method",arguments,d)}b.NilClass=p("NilClass",b.Object),c(M,"NilClass",b.NilClass),h=b.nil=new b.NilClass,h.$$id=R,h.call=h.apply=function(){z(b.LocalJumpError,"no block given")},h.$$frozen=!0,h.$$comparable=!1,Object.seal(h),b.thrower=function(d){var x={$thrower_type:d,$throw:function(J,te){throw J==null&&(J=h),this.is_orphan&&!te&&z(b.LocalJumpError,"unexpected "+d,J,d.$to_sym()),this.$v=J,this},is_orphan:!1};return x},Object.defineProperty(I,"@",{enumerable:!0,configurable:!0,get:function(){return S(I["!"])?I["!"].$backtrace():h},set:function(d){S(I["!"])?I["!"].$set_backtrace(d):z(b.ArgumentError,"$! not set")}}),b.t_eval_return=b.thrower("return"),TypeError.$$super=Error,b.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(n){var A=n.type_error,h=n.coerce_to,N=n.module,M=n.defs,Q=n.slice,W=n.eqeqeq,L=n.Kernel,K=n.truthy,b=n.Opal,B=n.nil,$e=n.$$$;return n.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(Y){var H=N(Y,"Opal");M(H,"$bridge",function(R,m){return n.bridge(R,m)}),M(H,"$coerce_to!",function(R,m,k,I){var z,U,w=B;return z=Q(arguments,3),U=z,w=h(R,m,k,U),W(m,w)||L.$raise(A(R,m,k,w)),w},-4),M(H,"$coerce_to?",function(R,m,k,I){var z,U,w=B;return z=Q(arguments,3),U=z,!K(R["$respond_to?"](k))||(w=h(R,m,k,U),K(w["$nil?"]()))?B:(W(m,w)||L.$raise(A(R,m,k,w)),w)},-4),M(H,"$try_convert",function(R,m,k){return W(m,R)?R:K(R["$respond_to?"](k))?R.$__send__(k):B}),M(H,"$compare",function(R,m){var k=B;return k=R["$<=>"](m),K(k===B)&&L.$raise($e("ArgumentError"),"comparison of "+R.$class()+" with "+m.$class()+" failed"),k}),M(H,"$destructure",function(R){if(R.length==1)return R[0];if(R.$$is_array)return R;for(var m=new Array(R.length),k=0,I=m.length;k<I;k++)m[k]=R[k];return m}),M(H,"$respond_to?",function(R,m,k){return k==null&&(k=!1),R==null||!R.$$class?!1:R["$respond_to?"](m,k)},-3),M(H,"$instance_variable_name!",function(R){return R=b["$coerce_to!"](R,$e("String"),"to_str"),K(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(R))||L.$raise($e("NameError").$new("'"+R+"' is not allowed as an instance variable name",R)),R}),M(H,"$class_variable_name!",function(R){return R=b["$coerce_to!"](R,$e("String"),"to_str"),K(R.length<3||R.slice(0,2)!=="@@")&&L.$raise($e("NameError").$new("`"+R+"' is not allowed as a class variable name",R)),R}),M(H,"$const_name?",function(R){return typeof R!="string"&&(R=b["$coerce_to!"](R,$e("String"),"to_str")),R[0]===R[0].toUpperCase()}),M(H,"$const_name!",function(R){var m=this;return K($e("::","String","skip_raise")?"constant":B)&&(R=b["$coerce_to!"](R,$e("String"),"to_str")),(!R||R[0]!=R[0].toUpperCase())&&m.$raise($e("NameError"),"wrong constant name "+R),R}),M(H,"$pristine",function(R,m){var k,I;k=Q(arguments,1),I=k;for(var z,U,w=I.length-1;w>=0;w--)z=I[w],U=R.$$prototype[n.jsid(z)],U&&!U.$$stub&&(U.$$pristine=!0);return B},-2);var ee=[];return M(H,"$inspect",function(R){var m=B,k=!1;return function(){try{try{return R===null?"null":R===void 0?"undefined":typeof R.$$class>"u"?Object.prototype.toString.apply(R):typeof R.$inspect!="function"||R.$inspect.$$stub||ee.indexOf(R.$__id__())!==-1?"#<"+R.$$class+":0x"+R.$__id__().$to_s(16)+">":(ee.push(R.$__id__()),k=!0,R.$inspect())}catch(I){if(n.rescue(I,[$e("Exception")])){m=I;try{return"#<"+R.$$class+":0x"+R.$__id__().$to_s(16)+">"}finally{n.pop_exception(I)}}else throw I}}finally{k&&ee.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(n){var A=n.truthy,h=n.coerce_to,N=n.const_set,M=n.Object,Q=n.return_ivar,W=n.assign_ivar,L=n.ivar,K=n.deny_frozen_access,b=n.freeze,B=n.prop,$e=n.jsid,Y=n.each_ivar,H=n.klass,ee=n.Opal,Z=n.Kernel,R=n.defs,m=n.send,k=n.def,I=n.eqeqeq,z=n.Module,U=n.rb_lt,w=n.rb_gt,S=n.slice,P=n.to_a,q=n.return_val,v=n.eqeq,s=n.not,f=n.rb_le,E=n.range,g=n.send2,c=n.find_super,l=n.alias,p=[],C=n.nil,_=n.$$$;return n.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(a,$,t){var e=H(a,$,"Module"),r=[e].concat(t),i=n.$r(r);function u(D){if(D.$$is_string)return D;var F=ee.$try_convert(D,_("String"),"to_str");if(F.$$is_string)return F;F===C?Z.$raise(_("TypeError"),""+D+" is not a symbol nor a string"):Z.$raise(_("TypeError"),"can't convert "+D.$class()+" to String ("+D.$class()+"#to_str gives "+F.$class())}R(e,"$allocate",function(){var F=this,G=n.allocate_module(C,function(){});return F!==n.Module&&Object.setPrototypeOf(G,F.$$prototype),G}),k(e,"$initialize",function D(){var F=D.$$p||C,G=this;return D.$$p=null,F!==C?m(G,"module_eval",[],F.$to_proc()):C}),k(e,"$===",function(F){var G=this;return A(F==null)?!1:n.is_a(F,G)}),k(e,"$<",function(F){var G=this;I(z,F)||Z.$raise(_("TypeError"),"compared with non class/module");var re=G,ae,le,ce;if(re===F)return!1;for(le=0,ae=n.ancestors(G),ce=ae.length;le<ce;le++)if(ae[le]===F)return!0;for(le=0,ae=n.ancestors(F),ce=ae.length;le<ce;le++)if(ae[le]===G)return!1;return C}),k(e,"$<=",function(F){var G=this,re=C;return A(re=G["$equal?"](F))?re:U(G,F)}),k(e,"$>",function(F){var G=this;return I(z,F)||Z.$raise(_("TypeError"),"compared with non class/module"),U(F,G)}),k(e,"$>=",function(F){var G=this,re=C;return A(re=G["$equal?"](F))?re:w(G,F)}),k(e,"$<=>",function(F){var G=this,re=C;return G===F?0:!I(z,F)||(re=U(G,F),A(re["$nil?"]()))?C:A(re)?-1:1}),k(e,"$alias_method",function(F,G){var re=this;return K(re),F=h(F,_("String"),"to_str"),G=h(G,_("String"),"to_str"),n.alias(re,F,G),re}),k(e,"$alias_native",function(F,G){var re=this;return G==null&&(G=F),K(re),n.alias_native(re,F,G),re},-2),k(e,"$ancestors",function(){var F=this;return n.ancestors(F)}),k(e,"$append_features",function(F){var G=this;return K(F),n.append_features(G,F),G}),k(e,"$attr_accessor",function(F){var G,re,ae=this;return G=S(arguments),re=G,m(ae,"attr_reader",P(re)),m(ae,"attr_writer",P(re))},-1),k(e,"$attr",function(F){var G,re,ae=this;return G=S(arguments),re=G,re.length==2&&(re[1]===!0||re[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),re[1]?ae.$attr_accessor(re[0]):ae.$attr_reader(re[0]),C):m(ae,"attr_reader",P(re))},-1),k(e,"$attr_reader",function(F){var G,re,ae=this;G=S(arguments),re=G,K(ae);for(var le=ae.$$prototype,ce=re.length-1;ce>=0;ce--){var de=re[ce],he=$e(de),ve=L(de),me=Q(ve);n.prop(le,ve,C),me.$$parameters=[],me.$$arity=0,n.defn(ae,he,me)}return C},-1),k(e,"$attr_writer",function(F){var G,re,ae=this;G=S(arguments),re=G,K(ae);for(var le=ae.$$prototype,ce=re.length-1;ce>=0;ce--){var de=re[ce],he=$e(de+"="),ve=L(de),me=W(ve);me.$$parameters=[["req"]],me.$$arity=1,n.prop(le,ve,C),n.defn(ae,he,me)}return C},-1),k(e,"$autoload",function(F,G){var re=this;return K(re),i("Opal")["$const_name?"](F)||Z.$raise(_("NameError"),"autoload must be constant name: "+F),G==""&&Z.$raise(_("ArgumentError"),"empty file name"),re.$$const.hasOwnProperty(F)||(re.$$autoload||(re.$$autoload={}),n.const_cache_version++,re.$$autoload[F]={path:G,loaded:!1,required:!1,success:!1,exception:!1},re.$const_added&&!re.$const_added.$$pristine&&re.$const_added(F)),C}),k(e,"$autoload?",function(F){var G=this;if(G.$$autoload&&G.$$autoload[F]&&!G.$$autoload[F].required&&!G.$$autoload[F].success)return G.$$autoload[F].path;for(var re=G.$ancestors(),ae=0,le=re.length;ae<le;ae++)if(re[ae].$$autoload&&re[ae].$$autoload[F]&&!re[ae].$$autoload[F].required&&!re[ae].$$autoload[F].success)return re[ae].$$autoload[F].path;return C}),k(e,"$class_variables",function(){var F=this;return Object.keys(n.class_variables(F))}),k(e,"$class_variable_get",function(F){var G=this;return F=ee["$class_variable_name!"](F),n.class_variable_get(G,F,!1)}),k(e,"$class_variable_set",function(F,G){var re=this;return K(re),F=ee["$class_variable_name!"](F),n.class_variable_set(re,F,G)}),k(e,"$class_variable_defined?",function(F){var G=this;return F=ee["$class_variable_name!"](F),n.class_variables(G).hasOwnProperty(F)}),k(e,"$const_added",q(C)),ee.$pristine(e,"const_added"),k(e,"$remove_class_variable",function(F){var G=this;if(K(G),F=ee["$class_variable_name!"](F),n.hasOwnProperty.call(G.$$cvars,F)){var re=G.$$cvars[F];return delete G.$$cvars[F],re}else Z.$raise(_("NameError"),"cannot remove "+F+" for "+G)}),k(e,"$constants",function(F){var G=this;return F==null&&(F=!0),n.constants(G,F)},-1),R(e,"$constants",function(F){var G=this;if(F==null){var re=(G.$$nesting||[]).concat(M),ae,le={},ce,de;for(ce=0,de=re.length;ce<de;ce++)for(ae in re[ce].$$const)le[ae]=!0;return Object.keys(le)}else return n.constants(G,F)},-1),R(e,"$nesting",function(){var F=this;return F.$$nesting||[]}),k(e,"$const_defined?",function(F,G){var re=this;G==null&&(G=!0),F=i("Opal")["$const_name!"](F),A(F["$=~"](_(ee,"CONST_NAME_REGEXP")))||Z.$raise(_("NameError").$new("wrong constant name "+F,F));var ae,le=[re],ce,de;for(G&&(le=le.concat(n.ancestors(re)),re.$$is_module&&(le=le.concat([M]).concat(n.ancestors(M)))),ce=0,de=le.length;ce<de;ce++)if(ae=le[ce],ae.$$const[F]!=null||ae.$$autoload&&ae.$$autoload[F]&&!ae.$$autoload[F].required&&!ae.$$autoload[F].success)return!0;return!1},-2),k(e,"$const_get",function(F,G){var re=this;return G==null&&(G=!0),F=i("Opal")["$const_name!"](F),F.indexOf("::")===0&&F!=="::"&&(F=F.slice(2)),A(F.indexOf("::")!=-1&&F!="::")?m(F.$split("::"),"inject",[re],function(le,ce){return le==null&&(le=C),ce==null&&(ce=C),le.$const_get(ce)}):(A(F["$=~"](_(ee,"CONST_NAME_REGEXP")))||Z.$raise(_("NameError").$new("wrong constant name "+F,F)),G?n.$$([re],F):n.const_get_local(re,F))},-2),k(e,"$const_missing",function(F){var G=this,re=C;return re=v(G,M)?F:""+G+"::"+F,Z.$raise(_("NameError").$new("uninitialized constant "+re,F))}),k(e,"$const_set",function(F,G){var re=this;return K(re),F=ee["$const_name!"](F),(A(F["$!~"](_(ee,"CONST_NAME_REGEXP")))||A(F["$start_with?"]("::")))&&Z.$raise(_("NameError").$new("wrong constant name "+F,F)),N(re,F,G),G}),k(e,"$public_constant",q(C)),k(e,"$define_method",function D(F,G){var re=D.$$p||C,ae=this,le=C,ce=C,de=C;return D.$$p=null,K(ae),G===void 0&&re===C&&Z.$raise(_("ArgumentError"),"tried to create a Proc object without a block"),F=u(F),A(G!==void 0)&&(re=I(_("Proc"),le=G)?G:I(_("Method"),le)?G.$to_proc().$$unbound:I(_("UnboundMethod"),le)?n.wrap_method_body(G.$$method):Z.$raise(_("TypeError"),"wrong argument type "+G.$class()+" (expected Proc/Method/UnboundMethod)"),A(!G.$$is_proc)&&(ce=G.$owner(),A(ce.$$is_class)&&s(f(ae,ce))&&(de=A(ce.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+ce,Z.$raise(_("TypeError"),de)))),typeof Proxy<"u"&&(re.$$proxy_target=re,re=new Proxy(re,{apply:function(he,ve,me){var be=he.$$jsid,ie=he.$$is_lambda;he.$$jsid=F,he.$$is_lambda=!0;try{return he.apply(ve,me)}catch(T){if(T===he.$$brk||T===he.$$ret)return T.$v;throw T}finally{he.$$jsid=be,he.$$is_lambda=ie}}})),re.$$jsid=F,re.$$s=null,re.$$def=re,re.$$define_meth=!0,n.defn(ae,$e(F),re)},-2),k(e,"$freeze",function(){var F=this;return A(F["$frozen?"]())?F:(F.hasOwnProperty("$$base_module")||B(F,"$$base_module",null),b(F))}),k(e,"$remove_method",function(F){var G,re,ae=this;G=S(arguments),re=G;for(var le=0;le<re.length;le++){var ce=u(re[le]);K(ae),n.rdef(ae,"$"+ce)}return ae},-1),k(e,"$singleton_class?",function(){var F=this;return!!F.$$is_singleton}),k(e,"$include",function(F){var G,re,ae=this;G=S(arguments),re=G;for(var le=re.length-1;le>=0;le--){var ce=re[le];ce.$$is_module||Z.$raise(_("TypeError"),"wrong argument type "+ce.$class()+" (expected Module)"),ce.$append_features(ae),ce.$included(ae)}return ae},-1),k(e,"$included_modules",function(){var F=this;return n.included_modules(F)}),k(e,"$include?",function(F){var G=this;F.$$is_module||Z.$raise(_("TypeError"),"wrong argument type "+F.$class()+" (expected Module)");var re,ae,le,ce=n.ancestors(G);for(re=0,ae=ce.length;re<ae;re++)if(le=ce[re],le===F&&le!==G)return!0;return!1}),k(e,"$instance_method",function(F){var G=this,re=G.$$prototype[$e(F)];return(!re||re.$$stub)&&Z.$raise(_("NameError").$new("undefined method `"+F+"' for class `"+G.$name()+"'",F)),_("UnboundMethod").$new(G,re.$$owner||G,re,F)}),k(e,"$instance_methods",function(F){var G=this;return F==null&&(F=!0),A(F)?n.instance_methods(G):n.own_instance_methods(G)},-1),k(e,"$included",q(C)),k(e,"$extended",q(C)),k(e,"$extend_object",function(F){return K(F),C}),k(e,"$method_added",function(F){return S(arguments),C},-1),k(e,"$method_removed",function(F){return S(arguments),C},-1),k(e,"$method_undefined",function(F){return S(arguments),C},-1),k(e,"$module_eval",function D(F){var G=D.$$p||C,re,ae,le,ce=this,de=C,he=C,ve=C,me=C,be=C,ie=C;D.$$p=null,re=S(arguments),ae=re,A(G["$nil?"]())&&A(!!n.compile)?(A(E(1,3,!1)["$cover?"](ae.$size()))||Z.$raise(_("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(P(ae)),de=le[0]==null?C:le[0],he=le[1]==null?C:le[1],le[2]==null||le[2],ve=new Map([["file",A(me=he)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),ie=ee.$compile(de,be),G=m(Z,"proc",[],function X(){var O=X.$$s==null?this:X.$$s;return new Function("Opal,self","return "+ie)(n,O)},{$$s:ce})):A(ae["$any?"]())&&Z.$raise(_("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var T=G.$$s,V;return G.$$s=null,V=G.apply(ce,[ce]),G.$$s=T,V},-1),k(e,"$module_exec",function D(F){var G=D.$$p||C,re,ae,le=this;D.$$p=null,re=S(arguments),ae=re,G===C&&Z.$raise(_("LocalJumpError"),"no block given");var ce=G.$$s,de;return G.$$s=null,de=G.apply(le,ae),G.$$s=ce,de},-1),k(e,"$method_defined?",function(F){var G=this,re=G.$$prototype[$e(F)];return!!re&&!re.$$stub}),k(e,"$module_function",function(F){var G,re,ae=this;if(G=S(arguments),re=G,K(ae),re.length===0)return ae.$$module_function=!0,C;for(var le=0,ce=re.length;le<ce;le++){var de=re[le],he=$e(de),ve=ae.$$prototype[he];n.defs(ae,he,ve)}return re.length===1?re[0]:re},-1),k(e,"$name",function(){var F=this;if(F.$$full_name)return F.$$full_name;for(var G=[],re=F;re;){if(re.$$name===C||re.$$name==null)return C;if(G.unshift(re.$$name),re=re.$$base_module,re===M)break}return G.length===0?C:F.$$full_name=G.join("::")}),k(e,"$prepend",function(F){var G,re,ae=this;G=S(arguments),re=G,re.length===0&&Z.$raise(_("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=re.length-1;le>=0;le--){var ce=re[le];ce.$$is_module||Z.$raise(_("TypeError"),"wrong argument type "+ce.$class()+" (expected Module)"),ce.$prepend_features(ae),ce.$prepended(ae)}return ae},-1),k(e,"$prepend_features",function(F){var G=this;return K(F),G.$$is_module||Z.$raise(_("TypeError"),"wrong argument type "+G.$class()+" (expected Module)"),n.prepend_features(G,F),G}),k(e,"$prepended",q(C)),k(e,"$remove_const",function(F){var G=this;return K(G),n.const_remove(G,F)}),k(e,"$to_s",function(){var F=this,G=C;return A(G=n.Module.$name.call(F))?G:"#<"+(F.$$is_module?"Module":"Class")+":0x"+F.$__id__().$to_s(16)+">"}),k(e,"$undef_method",function(F){var G,re,ae=this;G=S(arguments),re=G;for(var le=0;le<re.length;le++){var ce=u(re[le]);K(ae),n.udef(ae,"$"+ce)}return ae},-1),k(e,"$instance_variables",function(){var F=this,G=C;G=(n.Module.$$nesting=r,F.$constants());var re=[];return Y(F,function(ae){ae!=="constructor"&&!G["$include?"](ae)&&re.push("@"+ae)}),re});function o(D,F){var G,re=n.own_instance_methods(D);for(G=0;G<re.length;G++){var ae=re[G],le=$e(ae),ce=D.$$prototype[le],de=n.wrap_method_body(ce);de.$$jsid=ae,n.defn(F,le,de)}}function y(D,F){for(var G=D.$$own_included_modules,re=G.length-1;re>=0;re--)n.append_features(G[re],F)}function j(D,F){for(var G=D.$$own_prepended_modules,re=G.length-1;re>=0;re--)n.prepend_features(G[re],F)}return k(e,"$initialize_copy",function(F){var G=this;return o(F,G),y(F,G),j(F,G),G.$$cloned_from=F.$$cloned_from.concat(F),G.$copy_class_variables(F),G.$copy_constants(F)}),k(e,"$initialize_dup",function D(F){var G=D.$$p||C,re=this;return D.$$p=null,g(re,c(re,"initialize_dup",D,!1,!0),"initialize_dup",[F],G),re.$copy_singleton_methods(F)}),k(e,"$copy_class_variables",function(F){var G=this;for(var re in F.$$cvars)G.$$cvars[re]=F.$$cvars[re]}),k(e,"$copy_constants",function(F){var G=this,re,ae=F.$$const;for(re in ae)N(G,re,ae[re])}),k(e,"$refine",function D(F){var G=D.$$p||C,re,ae=this,le=C,ce=C,de=C;return D.$$p=null,re=[ae,C,C],le=re[0],ce=re[1],de=re[2],de=n.id(F),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?ce=ae.$$refine_modules[de]=_("Refinement").$new():ce=ae.$$refine_modules[de],ce.refinement_module=le,ce.refined_class=F,m(ce,"class_exec",[],G.$to_proc()),ce}),k(e,"$refinements",function(){var F=this,G=F.$$refine_modules,re=new Map;if(typeof G>"u")return re;for(var ae in G)re["$[]="](G[ae].refined_class,G[ae]);return re}),k(e,"$using",function(F){return Z.$raise("Module#using is not permitted in methods")}),l(e,"class_eval","module_eval"),l(e,"class_exec","module_exec"),l(e,"inspect","to_s")}("::",null,p),function(a,$){var t=H(a,$,"Refinement"),e=t.$$prototype;return e.refinement_module=e.refined_class=C,t.$attr_reader("refined_class"),k(t,"$inspect",function r(){var i=r.$$p||C,u=this;return r.$$p=null,A(u.refinement_module)?"#<refinement:"+u.refined_class.$inspect()+"@"+u.refinement_module.$inspect()+">":g(u,c(u,"inspect",r,!1,!0),"inspect",[],i)})}("::",z)};Opal.modules["corelib/class"]=function(n){var A=n.klass,h=n.send,N=n.defs,M=n.def,Q=n.ensure_kwargs,W=n.hash_get,L=n.eqeq,K=n.truthy,b=n.rb_plus,B=n.return_val,$e=n.slice,Y=n.send2,H=n.find_super,ee=n.Kernel,Z=n.alias,R=n.top,m=[],k=n.nil,I=n.$$$;return n.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),R.$require("corelib/module"),function(z,U,w){var S=A(z,U,"Class"),P=[S].concat(w),q=n.$r(P);return N(S,"$new",function v(s){var f=v.$$p||k;if(v.$$p=null,s==null&&(s=q("Object")),!s.$$is_class)throw n.TypeError.$new("superclass must be a Class");var E=n.allocate_class(k,s);return s.$inherited(E),f!==k&&h(E,"class_eval",[],f.$to_proc()),E},-1),M(S,"$allocate",function(){var s=this,f=new s.$$constructor;return f.$$id=n.uid(),f}),M(S,"$clone",function(s){var f,E=this,g=k;return s=Q(s),f=W(s,"freeze"),f==null&&(f=k),K(f["$nil?"]())||L(f,!0)||L(f,!1)||E.$raise(q("ArgumentError"),"unexpected value for freeze: "+f.$class()),g=n.allocate_class(k,E.$$super),g.$copy_instance_variables(E),g.$copy_singleton_methods(E),g.$initialize_clone(E,new Map([["freeze",f]])),(L(f,!0)||K(f["$nil?"]())&&K(E["$frozen?"]()))&&g.$freeze(),g},-1),M(S,"$dup",function(){var s=this,f=k;return f=n.allocate_class(k,s.$$super),f.$copy_instance_variables(s),f.$initialize_dup(s),f}),M(S,"$descendants",function(){var s=this;return b(s.$subclasses(),h(s.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),M(S,"$inherited",B(k)),M(S,"$new",function v(s){var f=v.$$p||k,E,g,c=this;v.$$p=null,E=$e(arguments),g=E;var l=c.$allocate();return n.send(l,l.$initialize,g,f),l},-1),M(S,"$subclasses",function(){var s=this;if(typeof WeakRef<"u"){var f,E,g=[];for(f=0;f<s.$$subclasses.length;f++)E=s.$$subclasses[f].deref(),E!==void 0&&g.push(E);return g}else return s.$$subclasses}),M(S,"$superclass",function(){var s=this;return s.$$super||k}),M(S,"$to_s",function v(){v.$$p;var s=this;v.$$p=null;var f=s.$$singleton_of;return f&&f.$$is_a_module?"#<Class:"+f.$name()+">":f?"#<Class:#<"+f.$$class.$name()+":0x"+n.id(f).$to_s(16)+">>":Y(s,H(s,"to_s",v,!1,!0),"to_s",[],null)}),M(S,"$attached_object",function(){var s=this;if(s.$$singleton_of!=null)return s.$$singleton_of;ee.$raise(I("TypeError"),"`"+s+"' is not a singleton class")}),Z(S,"inspect","to_s")}("::",null,m)};Opal.modules["corelib/basic_object"]=function(n){var A=n.klass,h=n.slice,N=n.def,M=n.alias,Q=n.return_val,W=n.Opal,L=n.truthy,K=n.range,b=n.Kernel,B=n.to_a,$e=n.send,Y=n.eqeq,H=n.rb_ge,ee=n.nil,Z=n.$$$;return n.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(R,m){var k=A(R,m,"BasicObject");return N(k,"$initialize",function(z){return h(arguments),ee},-1),N(k,"$==",function(z){var U=this;return U===z}),N(k,"$eql?",function(z){var U=this;return U["$=="](z)}),M(k,"equal?","=="),N(k,"$__id__",function(){var z=this;return z.$$id!=null||n.prop(z,"$$id",n.uid()),z.$$id}),N(k,"$__send__",function I(z,U){var w=I.$$p||ee,S,P,q=this;I.$$p=null,S=h(arguments,1),P=S,z.$$is_string||q.$raise(Z("TypeError"),""+q.$inspect()+" is not a symbol nor a string");var v=q[n.jsid(z)];return v?(w!==ee&&(v.$$p=w),v.apply(q,P)):(w!==ee&&(q.$method_missing.$$p=w),q.$method_missing.apply(q,[z].concat(P)))},-2),N(k,"$!",Q(!1)),W.$pristine("!"),N(k,"$!=",function(z){var U=this;return U["$=="](z)["$!"]()}),N(k,"$instance_eval",function I(z){var U=I.$$p||ee,w,S,P,q=this,v=ee,s=ee,f=ee,E=ee,g=ee,c=ee;if(I.$$p=null,w=h(arguments),S=w,L(U["$nil?"]())&&L(!!n.compile))L(K(1,3,!1)["$cover?"](S.$size()))||b.$raise(Z("ArgumentError"),"wrong number of arguments (0 for 1..3)"),P=[].concat(B(S)),v=P[0]==null?ee:P[0],s=P[1]==null?ee:P[1],P[2]==null||P[2],f=new Map([["file",L(E=s)?E:"(eval)"],["eval",!0]]),g=new Map([["arity_check",!1]]).$merge(f),c=W.$compile(v,g),U=$e(b,"proc",[],function C(){var _=C.$$s==null?this:C.$$s;return new Function("Opal,self","return "+c)(n,_)},{$$s:q});else{if(L(U["$nil?"]())&&L(H(S.$length(),1))&&Y(S.$first()["$[]"](0),"@"))return q.$instance_variable_get(S.$first());L(S["$any?"]())&&b.$raise(Z("ArgumentError"),"wrong number of arguments ("+S.$size()+" for 0)")}var l=U.$$s,p;if(U.$$s=null,q.$$is_a_module){q.$$eval=!0;try{p=U.call(q,q)}finally{q.$$eval=!1}}else p=U.call(q,q);return U.$$s=l,p},-1),N(k,"$instance_exec",function I(z){var U=I.$$p||ee,w,S,P=this;I.$$p=null,w=h(arguments),S=w,L(U)||b.$raise(Z("ArgumentError"),"no block given");var q=U.$$s,v;if(U.$$s=null,P.$$is_a_module){P.$$eval=!0;try{v=U.apply(P,S)}finally{P.$$eval=!1}}else v=U.apply(P,S);return U.$$s=q,v},-1),N(k,"$singleton_method_added",function(z){return h(arguments),ee},-1),N(k,"$singleton_method_removed",function(z){return h(arguments),ee},-1),N(k,"$singleton_method_undefined",function(z){return h(arguments),ee},-1),N(k,"$method_missing",function I(z,U){I.$$p;var w,S,P=this,q=ee;return I.$$p=null,w=h(arguments,1),S=w,q=W.$inspect(P),b.$raise(Z("NoMethodError").$new("undefined method `"+z+"' for "+q,z,S),ee,b.$caller(1))},-2),W.$pristine(k,"method_missing"),N(k,"$respond_to_missing?",function(z,U){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(n){var A=n.truthy,h=n.coerce_to,N=n.respond_to,M=n.Opal,Q=n.deny_frozen_access,W=n.freeze,L=n.freeze_props,K=n.jsid,b=n.each_ivar,B=n.module,$e=n.return_val,Y=n.def,H=n.Kernel,ee=n.gvars,Z=n.slice,R=n.send,m=n.to_a,k=n.ensure_kwargs,I=n.hash_get,z=n.eqeq,U=n.rb_plus,w=n.extract_kwargs,S=n.eqeqeq,P=n.return_self,q=n.rb_le,v=n.rb_lt,s=n.Object,f=n.alias,E=n.klass,g=[],c=n.nil,l=n.$$$;return n.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(p,C){var _=B(p,"Kernel"),a=[_].concat(C),$=n.$r(a);Y(_,"$=~",$e(!1)),Y(_,"$!~",function(r){var i=this;return i["$=~"](r)["$!"]()}),Y(_,"$===",function(r){var i=this,u=c;return A(u=i.$object_id()["$=="](r.$object_id()))?u:i["$=="](r)}),Y(_,"$<=>",function(r){var i=this;i.$$comparable=!0;var u=i["$=="](r);return u&&u!==c?0:c}),Y(_,"$method",function(r){var i=this,u=i[K(r)];return(!u||u.$$stub)&&H.$raise(l("NameError").$new("undefined method `"+r+"' for class `"+i.$class()+"'",r)),l("Method").$new(i,u.$$owner||i.$class(),u,r)}),Y(_,"$methods",function(r){var i=this;return r==null&&(r=!0),A(r)?n.methods(i):n.own_methods(i)},-1),Y(_,"$public_methods",function(r){var i=this;return r==null&&(r=!0),A(r)?n.methods(i):n.receiver_methods(i)},-1),Y(_,"$Array",function(r){var i;return r===c?[]:r.$$is_array?r:(i=M["$coerce_to?"](r,l("Array"),"to_ary"),i!==c||(i=M["$coerce_to?"](r,l("Array"),"to_a"),i!==c)?i:[r])}),Y(_,"$at_exit",function e(){var r=e.$$p||c,i=c;return ee.__at_exit__==null&&(ee.__at_exit__=c),e.$$p=null,ee.__at_exit__=A(i=ee.__at_exit__)?i:[],ee.__at_exit__["$<<"](r),r}),Y(_,"$caller",function(r,i){r==null&&(r=1),i==null&&(i=c);var u,o;u=new Error().$backtrace(),o=[];for(var y=r+1,j=u.length;y<j;y++)u[y].match(/runtime\.js/)||o.push(u[y]);return i!=c&&(o=o.slice(0,i)),o},-1),Y(_,"$caller_locations",function(r){var i,u,o=this;return i=Z(arguments),u=i,R(R(o,"caller",m(u)),"map",[],function(j){return j==null&&(j=c),l(l(l("Thread"),"Backtrace"),"Location").$new(j)})},-1),Y(_,"$class",function(){var r=this;return r.$$class}),Y(_,"$copy_instance_variables",function(r){var i=this,u=Object.keys(r),o,y,j;for(o=0,y=u.length;o<y;o++)j=u[o],j.charAt(0)!=="$"&&r.hasOwnProperty(j)&&(i[j]=r[j])}),Y(_,"$copy_singleton_methods",function(r){var i=this,u,o,y,j;if(r.hasOwnProperty("$$meta")&&r.$$meta!==null){var D=n.get_singleton_class(r),F=n.get_singleton_class(i);for(y=Object.getOwnPropertyNames(D.$$prototype),u=0,j=y.length;u<j;u++)o=y[u],n.is_method(o)&&(F.$$prototype[o]=D.$$prototype[o]);F.$$const=Object.assign({},D.$$const),Object.setPrototypeOf(F.$$prototype,Object.getPrototypeOf(D.$$prototype))}for(u=0,y=Object.getOwnPropertyNames(r),j=y.length;u<j;u++)o=y[u],o.charAt(0)==="$"&&o.charAt(1)!=="$"&&r.hasOwnProperty(o)&&(i[o]=r[o])}),Y(_,"$clone",function(r){var i,u=this,o=c;return r=k(r),i=I(r,"freeze"),i==null&&(i=c),A(i["$nil?"]())||z(i,!0)||z(i,!1)||u.$raise($("ArgumentError"),"unexpected value for freeze: "+i.$class()),o=u.$class().$allocate(),o.$copy_instance_variables(u),o.$copy_singleton_methods(u),o.$initialize_clone(u,new Map([["freeze",i]])),(z(i,!0)||A(i["$nil?"]())&&A(u["$frozen?"]()))&&o.$freeze(),o},-1),Y(_,"$initialize_clone",function(r,i){var u=this;return i=k(i),I(i,"freeze"),u.$initialize_copy(r),u},-2),Y(_,"$define_singleton_method",function e(r,i){var u=e.$$p||c,o=this;return e.$$p=null,R(o.$singleton_class(),"define_method",[r,i],u.$to_proc())},-2),Y(_,"$dup",function(){var r=this,i=c;return i=r.$class().$allocate(),i.$copy_instance_variables(r),i.$initialize_dup(r),i}),Y(_,"$initialize_dup",function(r){var i=this;return i.$initialize_copy(r)}),Y(_,"$enum_for",function e(r,i){var u=e.$$p||c,o,y,j,D=this;return e.$$p=null,o=Z(arguments),o.length>0&&(y=o.shift()),y==null&&(y="each"),j=o,R(l("Enumerator"),"for",[D,y].concat(m(j)),u.$to_proc())},-1),Y(_,"$equal?",function(r){var i=this;return i===r}),Y(_,"$exit",function(r){var i=c,u=c;for(ee.__at_exit__==null&&(ee.__at_exit__=c),r==null&&(r=!0),ee.__at_exit__=A(i=ee.__at_exit__)?i:[];!A(ee.__at_exit__["$empty?"]());)u=ee.__at_exit__.$pop(),u.$call();return r.$$is_boolean?r=r?0:1:r=h(r,l("Integer"),"to_int"),n.exit(r),c},-1),Y(_,"$extend",function(r){var i,u,o=this;i=Z(arguments),u=i,u.length==0&&o.$raise(l("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),Q(o);for(var y=o.$singleton_class(),j=u.length-1;j>=0;j--){var D=u[j];D.$$is_module||H.$raise(l("TypeError"),"wrong argument type "+D.$class()+" (expected Module)"),D.$append_features(y),D.$extend_object(o),D.$extended(o)}return o},-1),Y(_,"$freeze",function(){var r=this;return A(r["$frozen?"]())?r:typeof r=="object"?(L(r),W(r)):r}),Y(_,"$frozen?",function(){var r=this;switch(typeof r){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return r.$$frozen||!1;default:return!1}}),Y(_,"$gets",function(r){var i,u;return ee.stdin==null&&(ee.stdin=c),i=Z(arguments),u=i,R(ee.stdin,"gets",m(u))},-1),Y(_,"$hash",function(){var r=this;return r.$__id__()}),Y(_,"$initialize_copy",$e(c));var t=[];return Y(_,"$inspect",function(){var r=this,i=c,u=c,o=c,y=c;return function(){try{try{return i="",u=r.$__id__(),A(t["$include?"](u))?i=" ...":(t["$<<"](u),o=!0,R(r.$instance_variables(),"each",[],function j(D){var F=j.$$s==null?this:j.$$s,G=c,re=c;return D==null&&(D=c),G=F.$instance_variable_get(D),re=$("Opal").$inspect(G),i=U(i," "+D+"="+re)},{$$s:r})),"#<"+r.$class()+":0x"+u.$to_s(16)+i+">"}catch(j){if(n.rescue(j,[$("StandardError")])){y=j;try{return"#<"+r.$class()+":0x"+u.$to_s(16)+">"}finally{n.pop_exception(j)}}else throw j}}finally{A(o)&&t.$pop()}}()}),Y(_,"$instance_of?",function(r){var i=this;return!r.$$is_class&&!r.$$is_module&&H.$raise(l("TypeError"),"class or module required"),i.$$class===r}),Y(_,"$instance_variable_defined?",function(r){var i=this;return r=M["$instance_variable_name!"](r),n.hasOwnProperty.call(i,r.substr(1))}),Y(_,"$instance_variable_get",function(r){var i=this;r=M["$instance_variable_name!"](r);var u=i[n.ivar(r.substr(1))];return u??c}),Y(_,"$instance_variable_set",function(r,i){var u=this;return Q(u),r=M["$instance_variable_name!"](r),u[n.ivar(r.substr(1))]=i}),Y(_,"$remove_instance_variable",function(r){var i=this;r=M["$instance_variable_name!"](r);var u=n.ivar(r.substr(1)),o;return i.hasOwnProperty(u)?(o=i[u],delete i[u],o):H.$raise(l("NameError"),"instance variable "+r+" not defined")}),Y(_,"$instance_variables",function(){var r=this,i=[];return b(r,function(u){u.substr(-1)==="$"&&(u=u.slice(0,u.length-1)),i.push("@"+u)}),i}),Y(_,"$Integer",function(r,i,u){var o,y,j,D;o=Z(arguments,1),y=w(o),y=k(y),o.length>0&&(j=o.shift()),D=I(y,"exception"),D==null&&(D=!0);var F,G,re;if(D=A(D),!r.$$is_string){if(j!==void 0)if(D)H.$raise(l("ArgumentError"),"base specified for non string value");else return c;if(r===c)if(D)H.$raise(l("TypeError"),"can't convert nil into Integer");else return c;if(r.$$is_number){if(r===1/0||r===-1/0||isNaN(r))if(D)H.$raise(l("FloatDomainError"),r);else return c;return Math.floor(r)}if(r["$respond_to?"]("to_int")&&(F=r.$to_int(),n.is_a(F,l("Integer")))||r["$respond_to?"]("to_i")&&(F=r.$to_i(),n.is_a(F,l("Integer"))))return F;if(D)H.$raise(l("TypeError"),"can't convert "+r.$class()+" into Integer");else return c}if(r==="0")return 0;if(j===void 0)j=0;else if(j=h(j,l("Integer"),"to_int"),j===1||j<0||j>36)if(D)H.$raise(l("ArgumentError"),"invalid radix "+j);else return c;if(G=r.toLowerCase(),G=G.replace(/(\d)_(?=\d)/g,"$1"),G=G.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,le,ce){switch(ce){case"0b":if(j===0||j===2)return j=2,le;case"0":case"0o":if(j===0||j===8)return j=8,le;case"0d":if(j===0||j===10)return j=10,le;case"0x":if(j===0||j===16)return j=16,le}if(D)H.$raise(l("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return c}),j=j===0?10:j,re="0-"+(j<=10?j-1:"9a-"+String.fromCharCode(97+(j-11))),!new RegExp("^\\s*[+-]?["+re+"]+\\s*$").test(G))if(D)H.$raise(l("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return c;if(F=parseInt(G,j),isNaN(F))if(D)H.$raise(l("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return c;return F},-2),Y(_,"$Float",function(r,i){var u;i=k(i),u=I(i,"exception"),u==null&&(u=!0);var o;if(u=A(u),r===c)if(u)H.$raise(l("TypeError"),"can't convert nil into Float");else return c;if(r.$$is_string){if(o=r.toString(),o=o.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(o))return H.$Integer(o);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(o))if(u)H.$raise(l("ArgumentError"),'invalid value for Float(): "'+r+'"');else return c;return parseFloat(o)}return u?M["$coerce_to!"](r,l("Float"),"to_f"):h(r,l("Float"),"to_f")},-2),Y(_,"$Hash",function(r){return A(r["$nil?"]())||z(r,[])?new Map:S(l("Hash"),r)?r:M["$coerce_to!"](r,l("Hash"),"to_hash")}),Y(_,"$is_a?",function(r){var i=this;return!r.$$is_class&&!r.$$is_module&&H.$raise(l("TypeError"),"class or module required"),n.is_a(i,r)}),Y(_,"$itself",P),Y(_,"$lambda",function e(){var r=e.$$p||c;return e.$$p=null,n.lambda(r)}),Y(_,"$load",function(r){return r=M["$coerce_to!"](r,l("String"),"to_str"),n.load(r)}),Y(_,"$loop",function e(){var r=e.$$p||c,i=this,u=c;if(e.$$p=null,r===c)return R(i,"enum_for",["loop"],function(){return l(l("Float"),"INFINITY")});for(;A(!0);)try{n.yieldX(r,[])}catch(o){if(n.rescue(o,[l("StopIteration")])){u=o;try{return u.$result()}finally{n.pop_exception(o)}}else throw o}return i}),Y(_,"$nil?",$e(!1)),Y(_,"$printf",function(r){var i,u,o=this,y=c;return ee.stdout==null&&(ee.stdout=c),i=Z(arguments),u=i,A(u["$empty?"]())||(y=A(u[0].$$is_string)?ee.stdout:u.$shift(),y.$write(R(o,"format",m(u)))),c},-1),Y(_,"$proc",function e(){var r=e.$$p||c;return e.$$p=null,A(r)||H.$raise(l("ArgumentError"),"tried to create Proc object without a block"),r.$$is_lambda=!1,r}),Y(_,"$puts",function(r){var i,u;return ee.stdout==null&&(ee.stdout=c),i=Z(arguments),u=i,R(ee.stdout,"puts",m(u))},-1),Y(_,"$p",function(r){var i,u;return i=Z(arguments),u=i,R(u,"each",[],function(y){return ee.stdout==null&&(ee.stdout=c),y==null&&(y=c),ee.stdout.$puts(y.$inspect())}),A(q(u.$length(),1))?u["$[]"](0):u},-1),Y(_,"$print",function(r){var i,u;return ee.stdout==null&&(ee.stdout=c),i=Z(arguments),u=i,R(ee.stdout,"print",m(u))},-1),Y(_,"$readline",function(r){var i,u;return ee.stdin==null&&(ee.stdin=c),i=Z(arguments),u=i,R(ee.stdin,"readline",m(u))},-1),Y(_,"$warn",function(r,i){var u,o,y,j,D,F,G=this,re=c;return ee.VERBOSE==null&&(ee.VERBOSE=c),ee.stderr==null&&(ee.stderr=c),u=Z(arguments),o=w(u),o=k(o),y=u,j=I(o,"uplevel"),j==null&&(j=c),A(j)&&(j=M["$coerce_to!"](j,l("Integer"),"to_str"),A(v(j,0))&&H.$raise(l("ArgumentError"),"negative level ("+j+")"),re=(D=(F=G.$caller(U(j,1),1).$first(),F===c||F==null?c:F.$split(":in `")),D===c||D==null?c:D.$first()),A(re)&&(re=""+re+": "),y=R(y,"map",[],function(le){return le==null&&(le=c),""+re+"warning: "+le})),A(ee.VERBOSE["$nil?"]())||A(y["$empty?"]())?c:R(ee.stderr,"puts",m(y))},-1),Y(_,"$raise",function(r,i,u){throw ee["!"]==null&&(ee["!"]=c),i==null&&(i=c),u==null&&(u=c),r==null&&ee["!"]!==c?ee["!"]:(r==null?r=l("RuntimeError").$new(""):N(r,"$to_str")?r=l("RuntimeError").$new(r.$to_str()):r.$$is_class&&N(r,"$exception")?r=r.$exception(i):r.$$is_exception||(r=l("TypeError").$new("exception class/object expected")),u!==c&&r.$set_backtrace(u),ee["!"]!==c&&n.exceptions.push(ee["!"]),ee["!"]=r,r)},-1),Y(_,"$rand",function(r){return r===void 0?l(l("Random"),"DEFAULT").$rand():(r.$$is_number&&(r<0&&(r=Math.abs(r)),r%1!==0&&(r=r.$to_i()),r===0&&(r=void 0)),l(l("Random"),"DEFAULT").$rand(r))},-1),Y(_,"$respond_to?",function(r,i){var u=this;i==null&&(i=!1);var o=u[K(r)];return typeof o=="function"&&!o.$$stub?!0:u["$respond_to_missing?"].$$pristine===!0?!1:u["$respond_to_missing?"](r,i)},-2),Y(_,"$respond_to_missing?",function(r,i){return!1},-2),M.$pristine(_,"respond_to?","respond_to_missing?"),Y(_,"$require",function(r){return typeof r!="string"&&n.String&&n.Array&&(r=M["$coerce_to!"](r,l("String"),"to_str")),n.require(r)}),Y(_,"$require_relative",function(r){return M["$try_convert!"](r,l("String"),"to_str"),r=l("File").$expand_path(l("File").$join(n.current_file,"..",r)),n.require(r)}),Y(_,"$require_tree",function(r,i){var u;i=k(i),u=I(i,"autoload"),u==null&&(u=!1);var o=[];r=l("File").$expand_path(r),r=n.normalize(r),r==="."&&(r="");for(var y in n.modules)y["$start_with?"](r)&&(u?o.push([y,!0]):o.push([y,n.require(y)]));return o},-2),Y(_,"$singleton_class",function(){var r=this;return n.get_singleton_class(r)}),Y(_,"$sleep",function(r){r==null&&(r=c),r===c&&H.$raise(l("TypeError"),"can't convert NilClass into time interval"),r.$$is_number||H.$raise(l("TypeError"),"can't convert "+r.$class()+" into time interval"),r<0&&H.$raise(l("ArgumentError"),"time interval must be positive");for(var i=n.global.performance?function(){return performance.now()}:function(){return new Date},u=i();i()-u<=r*1e3;);return Math.round(r)},-1),Y(_,"$srand",function(r){return r==null&&(r=$("Random").$new_seed()),l("Random").$srand(r)},-1),Y(_,"$String",function(r){var i=c;return A(i=M["$coerce_to?"](r,l("String"),"to_str"))?i:M["$coerce_to!"](r,l("String"),"to_s")}),Y(_,"$tap",function e(){var r=e.$$p||c,i=this;return e.$$p=null,n.yield1(r,i),i}),Y(_,"$to_proc",P),Y(_,"$to_s",function(){var r=this;return"#<"+r.$class()+":0x"+r.$__id__().$to_s(16)+">"}),Y(_,"$catch",function e(r){var i=e.$$p||c,u=c,o=c;e.$$p=null,r==null&&(r=c);try{return r=A(u=r)?u:s.$new(),n.yield1(i,r)}catch(y){if(n.rescue(y,[l("UncaughtThrowError")])){o=y;try{return z(o.$tag(),r)?o.$value():H.$raise()}finally{n.pop_exception(y)}}else throw y}},-1),Y(_,"$throw",function(r,i){return i==null&&(i=c),H.$raise(l("UncaughtThrowError").$new(r,i))},-2),Y(_,"$open",function e(r){var i=e.$$p||c,u,o;return e.$$p=null,u=Z(arguments),o=u,R(l("File"),"open",m(o),i.$to_proc())},-1),Y(_,"$yield_self",function e(){var r=e.$$p||c,i=this;return e.$$p=null,r===c?R(i,"enum_for",["yield_self"],$e(1)):n.yield1(r,i)}),f(_,"fail","raise"),f(_,"kind_of?","is_a?"),f(_,"object_id","__id__"),f(_,"public_send","__send__"),f(_,"send","__send__"),f(_,"then","yield_self"),f(_,"to_enum","enum_for")}("::",g),function(p,C){var _=E(p,C,"Object");return delete s.$$prototype.$require,_.$include(H)}("::",null)};Opal.modules["corelib/main"]=function(n){var A=n.return_val,h=n.def,N=n.Object,M=n.slice,Q=n.Kernel,W=n.top;return n.nil,n.add_stubs("include,raise"),function(L,K){return h(L,"$to_s",A("main")),h(L,"$include",function(B){return N.$include(B)}),h(L,"$autoload",function(B){var $e,Y;return $e=M(arguments),Y=$e,n.Object.$autoload.apply(n.Object,Y)},-1),h(L,"$using",function(B){return Q.$raise("main.using is permitted only at toplevel")})}(n.get_singleton_class(W))};Opal.modules["corelib/error/errno"]=function(n){var A=n.module,h=n.truthy,N=n.rb_plus,M=n.send2,Q=n.find_super,W=n.def,L=n.klass,K=n.nil,b=n.$$$;return n.add_stubs("+,errno,class,attr_reader"),function(B,$e){var Y=A(B,"Errno"),H=K,ee=K;H=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],ee=K;var Z;for(Z=0;Z<H.length;Z++)(function(){var R=H[Z][0],m=H[Z][1],k=H[Z][2];ee=n.klass(Y,n.SystemCallError,R),ee.errno=k,function(I,z){return W(I,"$new",function U(w){U.$$p;var S=this,P=K;return U.$$p=null,w==null&&(w=K),P=m,h(w)&&(P=N(P," - "+w)),M(S,Q(S,"new",U,!1,!0),"new",[P],null)},-1)}(n.get_singleton_class(ee))})()}("::"),function(B,$e,Y){var H=L(B,$e,"SystemCallError");return W(H,"$errno",function(){var Z=this;return Z.$class().$errno()}),function(ee,Z){return ee.$attr_reader("errno")}(n.get_singleton_class(H))}("::",b("StandardError"))};Opal.modules["corelib/error"]=function(n){var A=n.klass,h=n.slice,N=n.gvars,M=n.defs,Q=n.send,W=n.to_a,L=n.def,K=n.send2,b=n.find_super,B=n.truthy,$e=n.Kernel,Y=n.not,H=n.rb_plus,ee=n.eqeq,Z=n.Object,R=n.ensure_kwargs,m=n.hash_get,k=n.module,I=[],z=n.nil,U=n.$$$;return n.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(w,S,P){var q=A(w,S,"Exception"),v=[q].concat(P),s=n.$r(v),f=q.$$prototype;f.message=z,n.prop(q.$$prototype,"$$is_exception",!0);var E;Error.stackTraceLimit=100,M(q,"$new",function(l){var p,C,_=this;N["!"]==null&&(N["!"]=z),p=h(arguments),C=p;var a=C.length>0?C[0]:z,$=new _.$$constructor(a);return $.name=_.$$name,$.message=a,$.cause=N["!"],n.send($,$.$initialize,C),n.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace($,E),$},-1),E=q.$new,M(q,"$exception",function(l){var p,C,_=this;return p=h(arguments),C=p,Q(_,"new",W(C))},-1),L(q,"$initialize",function(l){var p,C,_=this;return p=h(arguments),C=p,_.message=C.length>0?C[0]:z},-1),L(q,"$copy_instance_variables",function c(l){var p=c.$$p||z,C=this;c.$$p=null,K(C,b(C,"copy_instance_variables",c,!1,!0),"copy_instance_variables",[l],p),C.message=l.message,C.cause=l.cause,C.stack=l.stack});function g(c){for(var l=[],p,C=0;C<c.length;C++){var _=c[C];!_||!_.$$is_string||((p=_.match(/^    at (.*?) \((.*?)\)$/))?l.push(p[2]+":in `"+p[1]+"'"):(p=_.match(/^    at (.*?)$/))?l.push(p[1]+":in `undefined'"):(p=_.match(/^  from (.*?)$/))?l.push(p[1]):(p=_.match(/^(.*?)@(.*?)$/))&&l.push(p[2]+":in `"+p[1]+"'"))}return l}return L(q,"$backtrace",function(){var l=this;if(l.backtrace)return l.backtrace;var p=l.stack;return typeof p<"u"&&p.$$is_string?l.backtrace=g(p.split(`
`)):p?l.backtrace=g(p):[]}),L(q,"$backtrace_locations",function(){var l,p=this;return p.backtrace_locations||(p.backtrace_locations=(l=p.$backtrace(),l===z||l==null?z:Q(l,"map",[],function(_){return _==null&&(_=z),U(U(U("Thread"),"Backtrace"),"Location").$new(_)}))),p.backtrace_locations}),L(q,"$cause",function(){var l=this;return l.cause||z}),L(q,"$exception",function(l){var p=this;if(l==null&&(l=z),l===z||p===l)return p;var C=p.$clone();return C.message=l,p.backtrace&&(C.backtrace=p.backtrace.$dup()),C.stack=p.stack,C.cause=p.cause,C},-1),L(q,"$message",function(){var l=this;return l.$to_s()}),L(q,"$full_message",function(l){var p,C=this,_=z,a=z,$=z,t=z,e=z,r=z,i=z,u=z,o=z;return N.stderr==null&&(N.stderr=z),l==null&&(l=z),B(s("Hash","skip_raise")?"constant":z)?(l=new Map([["highlight",N.stderr["$tty?"]()],["order","top"]]).$merge(B(_=l)?_:new Map),p=[l["$[]"]("highlight"),l["$[]"]("order")],a=p[0],$=p[1],B([!0,!1]["$include?"](a))||$e.$raise(U("ArgumentError"),"expected true or false as highlight: "+a),B(["top","bottom"]["$include?"]($))||$e.$raise(U("ArgumentError"),"expected :top or :bottom as order: "+$),B(a)?(t="\x1B[1;4m",e="\x1B[1m",r="\x1B[m"):t=e=r="",i=C.$backtrace().$dup(),(Y(i)||B(i["$empty?"]()))&&(i=C.$caller()),u=i.$shift(),o=""+u+": ",o=H(o,""+e+C.$to_s()+" ("+t+C.$class()+r+e+")"+r+`
`),o=H(o,Q(i,"map",[],function(j){return j==null&&(j=z),"	from "+j+`
`}).$join()),B(C.$cause())&&(o=H(o,C.$cause().$full_message(new Map([["highlight",a]])))),ee($,"bottom")&&(o=o.$split(`
`).$reverse().$join(`
`),o=H(""+e+"Traceback"+r+` (most recent call last):
`,o)),o):""+C.message+`
`+C.stack},-1),L(q,"$inspect",function(){var l=this,p=z;return p=l.$to_s(),B(p["$empty?"]())?l.$class().$to_s():"#<"+l.$class().$to_s()+": "+l.$to_s()+">"}),L(q,"$set_backtrace",function(l){var p=this,C=!0,_,a;if(l===z)p.backtrace=z,p.stack="";else if(l.$$is_string)p.backtrace=[l],p.stack="  from "+l;else{if(l.$$is_array){for(_=0,a=l.length;_<a;_++)if(!l[_].$$is_string){C=!1;break}}else C=!1;C===!1&&$e.$raise(U("TypeError"),"backtrace must be Array of String"),p.backtrace=l,p.stack=Q(l,"map",[],function(t){return t==null&&(t=z),H("  from ",t)}).join(`
`)}return l}),L(q,"$to_s",function(){var l=this,p=z,C=z;return B(p=B(C=l.message)?l.message.$to_s():C)?p:l.$class().$to_s()})}("::",Error,I),A("::",U("Exception"),"ScriptError"),A("::",U("ScriptError"),"SyntaxError"),A("::",U("ScriptError"),"LoadError"),A("::",U("ScriptError"),"NotImplementedError"),A("::",U("Exception"),"SystemExit"),A("::",U("Exception"),"NoMemoryError"),A("::",U("Exception"),"SignalException"),A("::",U("SignalException"),"Interrupt"),A("::",U("Exception"),"SecurityError"),A("::",U("Exception"),"SystemStackError"),A("::",U("Exception"),"StandardError"),A("::",U("StandardError"),"EncodingError"),A("::",U("StandardError"),"ZeroDivisionError"),A("::",U("StandardError"),"NameError"),A("::",U("NameError"),"NoMethodError"),A("::",U("StandardError"),"RuntimeError"),A("::",U("RuntimeError"),"FrozenError"),A("::",U("StandardError"),"LocalJumpError"),A("::",U("StandardError"),"TypeError"),A("::",U("StandardError"),"ArgumentError"),A("::",U("ArgumentError"),"UncaughtThrowError"),A("::",U("StandardError"),"IndexError"),A("::",U("IndexError"),"StopIteration"),A("::",U("StopIteration"),"ClosedQueueError"),A("::",U("IndexError"),"KeyError"),A("::",U("StandardError"),"RangeError"),A("::",U("RangeError"),"FloatDomainError"),A("::",U("StandardError"),"IOError"),A("::",U("IOError"),"EOFError"),A("::",U("StandardError"),"SystemCallError"),A("::",U("StandardError"),"RegexpError"),A("::",U("StandardError"),"ThreadError"),A("::",U("StandardError"),"FiberError"),Z.$autoload("Errno","corelib/error/errno"),function(w,S){var P=A(w,S,"FrozenError");return P.$attr_reader("receiver"),L(P,"$initialize",function q(v,s){var f;q.$$p;var E=this;return q.$$p=null,s=R(s),f=m(s,"receiver"),f==null&&(f=z),K(E,b(E,"initialize",q,!1,!0),"initialize",[v],null),E.receiver=f},-2)}("::",U("RuntimeError")),function(w,S){var P=A(w,S,"UncaughtThrowError"),q=P.$$prototype;return q.tag=z,P.$attr_reader("tag","value"),L(P,"$initialize",function v(s,f){v.$$p;var E=this;return v.$$p=null,f==null&&(f=z),E.tag=s,E.value=f,K(E,b(E,"initialize",v,!1,!0),"initialize",["uncaught throw "+E.tag.$inspect()],null)},-2)}("::",U("ArgumentError")),function(w,S){var P=A(w,S,"NameError");return P.$attr_reader("name"),L(P,"$initialize",function q(v,s){q.$$p;var f=this;return q.$$p=null,s==null&&(s=z),K(f,b(f,"initialize",q,!1,!0),"initialize",[v],null),f.name=s},-2)}("::",null),function(w,S){var P=A(w,S,"NoMethodError");return P.$attr_reader("args"),L(P,"$initialize",function q(v,s,f){q.$$p;var E=this;return q.$$p=null,s==null&&(s=z),f==null&&(f=[]),K(E,b(E,"initialize",q,!1,!0),"initialize",[v,s],null),E.args=f},-2)}("::",null),function(w,S){var P=A(w,S,"StopIteration");return P.$attr_reader("result")}("::",null),function(w,S){var P=A(w,S,"KeyError"),q=P.$$prototype;return q.receiver=q.key=z,L(P,"$initialize",function v(s,f){var E,g;v.$$p;var c=this;return v.$$p=null,f=R(f),E=m(f,"receiver"),E==null&&(E=z),g=m(f,"key"),g==null&&(g=z),K(c,b(c,"initialize",v,!1,!0),"initialize",[s],null),c.receiver=E,c.key=g},-2),L(P,"$receiver",function(){var s=this,f=z;return B(f=s.receiver)?f:$e.$raise(U("ArgumentError"),"no receiver is available")}),L(P,"$key",function(){var s=this,f=z;return B(f=s.key)?f:$e.$raise(U("ArgumentError"),"no key is available")})}("::",null),function(w,S){var P=A(w,S,"LocalJumpError");return P.$attr_reader("exit_value","reason"),L(P,"$initialize",function q(v,s,f){q.$$p;var E=this;return q.$$p=null,s==null&&(s=z),f==null&&(f="noreason"),K(E,b(E,"initialize",q,!1,!0),"initialize",[v],null),E.exit_value=s,E.reason=f},-2)}("::",null),function(w,S){var P=k(w,"JS"),q=[P].concat(S);return A(q[0],null,"Error"),z}("::",I)};Opal.modules["corelib/constants"]=function(n){var A=n.const_set;n.nil;var h=n.$$$;return A("::","RUBY_PLATFORM","opal"),A("::","RUBY_ENGINE","opal"),A("::","RUBY_VERSION","3.2.0"),A("::","RUBY_ENGINE_VERSION","1.8.2"),A("::","RUBY_RELEASE_DATE","2023-11-23"),A("::","RUBY_PATCHLEVEL",0),A("::","RUBY_REVISION","0"),A("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),A("::","RUBY_DESCRIPTION","opal "+h("RUBY_ENGINE_VERSION")+" ("+h("RUBY_RELEASE_DATE")+" revision "+h("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(n){var A=n.Object;return n.nil,n.add_stubs("require"),A.$require("corelib/runtime"),A.$require("corelib/helpers"),A.$require("corelib/module"),A.$require("corelib/class"),A.$require("corelib/basic_object"),A.$require("corelib/kernel"),A.$require("corelib/main"),A.$require("corelib/error"),A.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(n){var A=n.klass,h=n.Kernel,N=n.def,M=n.return_val,Q=n.ensure_kwargs,W=n.hash_get,L=n.NilClass,K=n.slice,b=n.truthy,B=n.rb_gt,$e=n.alias,Y=n.nil,H=n.$$$;return n.add_stubs("raise,name,new,>,length,Rational,to_i"),function(ee,Z,R){var m=A(ee,Z,"NilClass");return m.$$prototype.$$meta=m,function(k,I){return N(k,"$allocate",function(){var U=this;return h.$raise(H("TypeError"),"allocator undefined for "+U.$name())}),n.udef(k,"$new"),Y}(n.get_singleton_class(m)),N(m,"$!",M(!0)),N(m,"$&",M(!1)),N(m,"$|",function(I){return I!==!1&&I!==Y}),N(m,"$^",function(I){return I!==!1&&I!==Y}),N(m,"$==",function(I){return I===Y}),N(m,"$dup",M(Y)),N(m,"$clone",function(I){return I=Q(I),W(I,"freeze"),Y},-1),N(m,"$inspect",M("nil")),N(m,"$nil?",M(!0)),N(m,"$singleton_class",function(){return L}),N(m,"$to_a",function(){return[]}),N(m,"$to_h",function(){return new Map}),N(m,"$to_i",M(0)),N(m,"$to_s",M("")),N(m,"$to_c",function(){return H("Complex").$new(0,0)}),N(m,"$rationalize",function(I){var z,U;return z=K(arguments),U=z,b(B(U.$length(),1))&&h.$raise(H("ArgumentError")),h.$Rational(0,1)},-1),N(m,"$to_r",function(){return h.$Rational(0,1)}),N(m,"$instance_variables",function(){return[]}),$e(m,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(n){var A=n.klass,h=n.Kernel,N=n.def,M=n.return_self,Q=n.ensure_kwargs,W=n.hash_get,L=n.slice,K=n.truthy,b=n.send2,B=n.find_super,$e=n.to_a,Y=n.alias,H=n.nil,ee=n.$$$;return n.add_stubs("raise,name,==,to_s,__id__"),function(Z,R,m){var k=A(Z,R,"Boolean");n.prop(k.$$prototype,"$$is_boolean",!0);for(var I=["$$class","$$meta"],z=0;z<I.length;z++)Object.defineProperty(k.$$prototype,I[z],{configurable:!0,enumerable:!1,get:function(){return this==!0?n.TrueClass:this==!1?n.FalseClass:n.Boolean}});return Object.defineProperty(k.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:H}}),function(U,w){return N(U,"$allocate",function(){var P=this;return h.$raise(ee("TypeError"),"allocator undefined for "+P.$name())}),n.udef(U,"$new"),H}(n.get_singleton_class(k)),N(k,"$__id__",function(){var w=this;return w.valueOf()?2:0}),N(k,"$!",function(){var w=this;return w!=!0}),N(k,"$&",function(w){var S=this;return S==!0?w!==!1&&w!==H:!1}),N(k,"$|",function(w){var S=this;return S==!0?!0:w!==!1&&w!==H}),N(k,"$^",function(w){var S=this;return S==!0?w===!1||w===H:w!==!1&&w!==H}),N(k,"$==",function(w){var S=this;return S==!0===w.valueOf()}),N(k,"$singleton_class",function(){var w=this;return w.$$meta}),N(k,"$to_s",function(){var w=this;return w==!0?"true":"false"}),N(k,"$dup",M),N(k,"$clone",function(w){var S=this;return w=Q(w),W(w,"freeze"),S},-1),N(k,"$method_missing",function U(w,S){var P=U.$$p||H,q,v,s=this;U.$$p=null,q=L(arguments,1),v=q;var f=s.$$class.$$prototype[n.jsid(w)];return K(typeof f<"u"&&!f.$$stub)||b(s,B(s,"method_missing",U,!1,!0),"method_missing",[w].concat($e(v)),P),n.send(s,f,v,P)},-2),N(k,"$respond_to_missing?",function(w,S){var P=this,q=P.$$class.$$prototype[n.jsid(w)];return typeof q<"u"&&!q.$$stub},-2),Y(k,"eql?","=="),Y(k,"equal?","=="),Y(k,"inspect","to_s"),Y(k,"object_id","__id__")}("::",Boolean),A("::",ee("Boolean"),"TrueClass"),A("::",ee("Boolean"),"FalseClass"),H};Opal.modules["corelib/comparable"]=function(n){var A=n.truthy,h=n.module,N=n.rb_gt,M=n.rb_lt,Q=n.eqeqeq,W=n.Kernel,L=n.def,K=n.nil,b=n.$$$;return n.add_stubs(">,<,===,raise,class,<=>,equal?"),function(B){var $e=h(B,"Comparable"),Y=K;function H(R){return n.is_a(R,n.Integer)?R:N(R,0)?1:M(R,0)?-1:0}function ee(R,m){var k;Q(K,Y=m)||Q(!0,Y)||Q(!1,Y)||Q(b("Integer"),Y)||Q(b("Float"),Y)?k=m.$inspect():k=m.$$class,W.$raise(b("ArgumentError"),"comparison of "+R.$class()+" with "+k+" failed")}function Z(R,m){var k=R["$<=>"](m);return A(k)||ee(R,m),H(k)}return L($e,"$==",function(m){var k=this,I=K;return A(k["$equal?"](m))?!0:k["$<=>"]==n.Kernel["$<=>"]?!1:k.$$comparable?(k.$$comparable=!1,!1):A(I=k["$<=>"](m))?H(I)==0:!1}),L($e,"$>",function(m){var k=this;return Z(k,m)>0}),L($e,"$>=",function(m){var k=this;return Z(k,m)>=0}),L($e,"$<",function(m){var k=this;return Z(k,m)<0}),L($e,"$<=",function(m){var k=this;return Z(k,m)<=0}),L($e,"$between?",function(m,k){var I=this;return!(A(M(I,m))||A(N(I,k)))}),L($e,"$clamp",function(m,k){var I=this;k==null&&(k=K);var z,U;if(k===K&&(n.is_a(m,n.Range)||W.$raise(b("TypeError"),"wrong argument type "+m.$class()+" (expected Range)"),U=m.excl,k=m.end,m=m.begin,k!==K&&U&&W.$raise(b("ArgumentError"),"cannot clamp with an exclusive range")),m!==K&&k!==K&&Z(m,k)>0&&W.$raise(b("ArgumentError"),"min argument must be smaller than max argument"),m!==K){if(z=Z(I,m),z==0)return I;if(z<0)return m}return k!==K&&(z=Z(I,k),z>0)?k:I},-2)}("::")};Opal.modules["corelib/regexp"]=function(n){var A=n.coerce_to,h=n.prop,N=n.freeze,M=n.klass,Q=n.const_set,W=n.send2,L=n.find_super,K=n.def,b=n.truthy,B=n.gvars,$e=n.slice,Y=n.Kernel,H=n.Opal,ee=n.alias,Z=n.send,R=n.regexp,m=n.rb_plus,k=n.ensure_kwargs,I=n.hash_get,z=n.rb_ge,U=n.to_a,w=n.eqeqeq,S=n.rb_minus,P=n.return_ivar,q=[],v=n.nil,s=n.$$$;return n.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),M("::",s("StandardError"),"RegexpError"),function(f,E,g){var c=M(f,E,"Regexp"),l=[c].concat(g),p=n.$r(l);return Q(c,"IGNORECASE",1),Q(c,"EXTENDED",2),Q(c,"MULTILINE",4),n.prop(c.$$prototype,"$$is_regexp",!0),function(C,_){var a=[C].concat(_),$=n.$r(a);return K(C,"$allocate",function t(){var e=t.$$p||v,r=this,i=v;return t.$$p=null,i=W(r,L(r,"allocate",t,!1,!0),"allocate",[],e),i.uninitialized=!0,i}),K(C,"$escape",function(e){return e=A(e,s("String"),"to_str"),n.escape_regexp(e)}),K(C,"$last_match",function(e){return B["~"]==null&&(B["~"]=v),e==null&&(e=v),b(e["$nil?"]())?B["~"]:b(B["~"])?B["~"]["$[]"](e):v},-1),K(C,"$union",function(e){var r,i,u=this;r=$e(arguments),i=r;var o,y,j,D,F;if(i.length==0)return/(?!)/;if(i.length==1&&i[0].$$is_regexp)return i[0];o=i[0].$$is_array,i.length>1&&o&&Y.$raise(s("TypeError"),"no implicit conversion of Array into String"),o&&(i=i[0]),D=void 0,y=[];for(var G=0;G<i.length;G++)j=i[G],j.$$is_string?y.push(u.$escape(j)):j.$$is_regexp?(F=j.$options(),D!=null&&D!=F&&Y.$raise(s("TypeError"),"All expressions must use the same options"),D=F,y.push("("+j.source+")")):y.push(u.$escape(j.$to_str()));return u.$new(y.$join("|"),D)},-1),K(C,"$new",function(e,r){if(e.$$is_regexp)return new RegExp(e);if(e=H["$coerce_to!"](e,s("String"),"to_str"),e.charAt(e.length-1)==="\\"&&e.charAt(e.length-2)!=="\\"&&Y.$raise(s("RegexpError"),"too short escape sequence: /"+e+"/"),e=e.replace("\\A","^").replace("\\z","$"),r===void 0||r["$!"]())return new RegExp(e);if(r.$$is_number){var i="";$("IGNORECASE")&r&&(i+="i"),$("MULTILINE")&r&&(i+="m"),r=i}else r="i";return new RegExp(e,r)},-2),ee(C,"compile","new"),ee(C,"quote","escape")}(n.get_singleton_class(c),l),K(c,"$==",function(_){var a=this;return _ instanceof RegExp&&a.toString()===_.toString()}),K(c,"$===",function(_){var a=this;return a.$match(H["$coerce_to?"](_,s("String"),"to_str"))!==v}),K(c,"$=~",function(_){var a=this,$=v;return B["~"]==null&&(B["~"]=v),b($=a.$match(_))?B["~"].$begin(0):$}),K(c,"$freeze",function(){var _=this;return b(_["$frozen?"]())?_:(_.hasOwnProperty("$$g")||h(_,"$$g",null),_.hasOwnProperty("$$gm")||h(_,"$$gm",null),N(_))}),K(c,"$inspect",function(){var _=this,a=/^\/(.*)\/([^\/]*)$/,$=_.toString(),t=a.exec($);if(t){for(var e=t[1],r=t[2],i=e.split(""),u=i.length,o=!1,y="",j=0;j<u;j++){var D=i[j];!o&&D=="/"&&(y=y.concat("\\")),y=y.concat(D),D=="\\"?o?o=!1:o=!0:o=!1}return"/"+y+"/"+r}else return $}),K(c,"$match",function C(_,a){var $=C.$$p||v,t=this;if(B["~"]==null&&(B["~"]=v),C.$$p=null,t.uninitialized&&Y.$raise(s("TypeError"),"uninitialized Regexp"),a===void 0){if(_===v)return B["~"]=v;var e=t.exec(A(_,s("String"),"to_str"));return e?(B["~"]=s("MatchData").$new(t,e),$===v?B["~"]:n.yield1($,B["~"])):B["~"]=v}if(a=A(a,s("Integer"),"to_int"),_===v||(_=A(_,s("String"),"to_str"),a<0&&(a+=_.length,a<0)))return B["~"]=v;for(var r,i=n.global_regexp(t);;){if(r=i.exec(_),r===null)return B["~"]=v;if(r.index>=a)return B["~"]=s("MatchData").$new(i,r),$===v?B["~"]:n.yield1($,B["~"]);i.lastIndex=r.index+1}},-2),K(c,"$match?",function(_,a){var $=this;if($.uninitialized&&Y.$raise(s("TypeError"),"uninitialized Regexp"),a===void 0)return _===v?!1:$.test(A(_,s("String"),"to_str"));if(a=A(a,s("Integer"),"to_int"),_===v||(_=A(_,s("String"),"to_str"),a<0&&(a+=_.length,a<0)))return!1;var t,e=n.global_regexp($);return t=e.exec(_),!(t===null||t.index<a)},-2),K(c,"$names",function(){var _=this;return Z(_.$source().$scan(R(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),K(c,"$named_captures",function(){var _=this;return Z(Z(Z(_.$source().$scan(R(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function($){return $==null&&($=v),Z($,"map",[],function(e){return e==null&&(e=v),m(e.$last(),1)})})}),K(c,"$~",function(){var _=this;return B._==null&&(B._=v),_["$=~"](B._)}),K(c,"$source",function(){var _=this;return _.source}),K(c,"$options",function(){var _=this;_.uninitialized&&Y.$raise(s("TypeError"),"uninitialized Regexp");var a=0;return _.multiline&&(a|=p("MULTILINE")),_.ignoreCase&&(a|=p("IGNORECASE")),a}),K(c,"$casefold?",function(){var _=this;return _.ignoreCase}),ee(c,"eql?","=="),ee(c,"to_s","source")}("::",RegExp,q),function(f,E,g){var c=M(f,E,"MatchData"),l=[c].concat(g),p=n.$r(l),C=c.$$prototype;return C.matches=v,c.$attr_reader("post_match","pre_match","regexp","string"),K(c,"$initialize",function(a,$,t){var e,r=this;t=k(t),e=I(t,"no_matchdata"),e==null&&(e=!1),b(e)||(B["~"]=r),r.regexp=a,r.begin=$.index,r.string=$.input,r.pre_match=$.input.slice(0,$.index),r.post_match=$.input.slice($.index+$[0].length),r.matches=[];for(var i=0,u=$.length;i<u;i++){var o=$[i];o==null?r.matches.push(v):r.matches.push(o)}},-3),K(c,"$match",function(a){var $=this,t=v;return b(t=$["$[]"](a))?t:b(a["$is_a?"](p("Integer")))&&b(z(a,$.$length()))?Y.$raise(s("IndexError"),"index "+a+" out of matches"):v}),K(c,"$match_length",function(a){var $,t=this;return $=t.$match(a),$===v||$==null?v:$.$length()}),K(c,"$[]",function(a){var $,t,e=this;return $=$e(arguments),t=$,t[0].$$is_string?(e.$regexp().$names()["$include?"](t["$[]"](0))["$!"]()&&Y.$raise(s("IndexError"),"undefined group name reference: "+t["$[]"](0)),e.$named_captures()["$[]"](t["$[]"](0))):Z(e.matches,"[]",U(t))},-1),K(c,"$offset",function(a){var $=this;return a!==0&&Y.$raise(s("ArgumentError"),"MatchData#offset only supports 0th element"),[$.begin,$.begin+$.matches[a].length]}),K(c,"$==",function(a){var $=this,t=v,e=v,r=v,i=v;return w(s("MatchData"),a)?b(t=b(e=b(r=b(i=$.string==a.string)?$.regexp.toString()==a.regexp.toString():i)?$.pre_match==a.pre_match:r)?$.post_match==a.post_match:e)?$.begin==a.begin:t:!1}),K(c,"$begin",function(a){var $=this;return a!==0&&Y.$raise(s("ArgumentError"),"MatchData#begin only supports 0th element"),$.begin}),K(c,"$end",function(a){var $=this;return a!==0&&Y.$raise(s("ArgumentError"),"MatchData#end only supports 0th element"),$.begin+$.matches[a].length}),K(c,"$captures",function(){var a=this;return a.matches.slice(1)}),K(c,"$named_captures",function(){var a=this,$=v;return $=a.$captures(),Z(a.$regexp().$named_captures(),"transform_values",[],function(e){return e==null&&(e=v),$["$[]"](S(e.$last(),1))})}),K(c,"$names",function(){var a=this;return a.$regexp().$names()}),K(c,"$inspect",function(){var a=this,$="#<MatchData "+a.matches[0].$inspect();if(a.$regexp().$names()["$empty?"]())for(var t=1,e=a.matches.length;t<e;t++)$+=" "+t+":"+a.matches[t].$inspect();else Z(a.$named_captures(),"each",[],function(i,u){return i==null&&(i=v),u==null&&(u=v),$+=" "+i+":"+u.$inspect()});return $+">"}),K(c,"$length",function(){var a=this;return a.matches.length}),K(c,"$to_a",P("matches")),K(c,"$to_s",function(){var a=this;return a.matches[0]}),K(c,"$values_at",function(a){var $,t,e=this;$=$e(arguments),t=$;var r,i,u,o=[];for(r=0;r<t.length;r++){if(t[r].$$is_range&&(i=t[r].$to_a(),i.unshift(r,1),Array.prototype.splice.apply(t,i)),u=H["$coerce_to!"](t[r],s("Integer"),"to_int"),u<0&&(u+=e.matches.length,u<0)){o.push(v);continue}o.push(e.matches[u])}return o},-1),ee(c,"eql?","=="),ee(c,"size","length")}(q[0],null,q)};Opal.modules["corelib/string"]=function(n){var A=n.coerce_to,h=n.respond_to,N=n.global_multiline_regexp,M=n.prop,Q=n.opal32_init,W=n.opal32_add,L=n.klass,K=n.send2,b=n.find_super,B=n.def,$e=n.Opal,Y=n.defs,H=n.slice,ee=n.send,Z=n.to_a,R=n.extract_kwargs,m=n.ensure_kwargs,k=n.hash_get,I=n.eqeqeq,z=n.Kernel,U=n.truthy,w=n.gvars,S=n.rb_divide,P=n.rb_plus,q=n.eqeq,v=n.alias,s=n.const_set,f=n.top,E=[],g=n.$r(E),c=n.nil,l=n.$$$;return n.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),f.$require("corelib/comparable"),f.$require("corelib/regexp"),function(p,C,_){var a=L(p,C,"String"),$=[a].concat(_),t=n.$r($);a.$include(l("Comparable")),n.prop(a.$$prototype,"$$is_string",!0);var e=new Map;(function(){B(a,"$__id__",function i(){var u=i.$$p||c,o=this;if(i.$$p=null,typeof o=="object")return K(o,b(o,"__id__",i,!1,!0),"__id__",[],u);if(e.has(o))return e.get(o);var y=n.uid();return e.set(o,y),y}),B(a,"$hash",function(){var u=this,o=Q(),y,j=u.length;for(o=W(o,5),o=W(o,j),y=0;y<j;y++)o=W(o,u.charCodeAt(y));return o})})(),Y(a,"$try_convert",function(u){return $e["$coerce_to?"](u,l("String"),"to_str")}),Y(a,"$new",function(u){var o,y,j=this;o=H(arguments),y=o;var D=y[0]||"",F=y[y.length-1];return D=A(D,l("String"),"to_str"),F&&F.$$is_hash&&F.has("encoding")&&(D=D.$force_encoding(F.get("encoding").value)),D=new j.$$constructor(D),D.$initialize.$$pristine||ee(D,"initialize",Z(y)),D},-1),B(a,"$initialize",function(u,o){var y,j;return y=H(arguments),j=R(y),j=m(j),y.length>0&&y.shift(),k(j,"encoding"),k(j,"capacity"),c},-1),B(a,"$%",function(u){var o=this;return I(l("Array"),u)?ee(o,"format",[o].concat(Z(u))):o.$format(o,u)}),B(a,"$*",function(u){var o=this;if(u=A(u,l("Integer"),"to_int"),u<0&&z.$raise(l("ArgumentError"),"negative argument"),u===0)return"";var y="",j=o.toString();for(j.length*u>=1<<28&&z.$raise(l("RangeError"),"multiply count must not overflow maximum string size");(u&1)===1&&(y+=j),u>>>=1,u!==0;)j+=j;return y}),B(a,"$+",function(u){var o=this;if(u=A(u,l("String"),"to_str"),u==""&&o.$$class===n.String)return o;if(o==""&&u.$$class===n.String)return u;var y=o+u;return o.encoding===y.encoding&&u.encoding===y.encoding||o.encoding.name==="UTF-8"||u.encoding.name==="UTF-8"?y:n.enc(y,o.encoding)}),B(a,"$<=>",function(u){var o=this;if(U(u["$respond_to?"]("to_str")))return u=u.$to_str().$to_s(),o>u?1:o<u?-1:0;var y=u["$<=>"](o);return y===c?c:y>0?-1:y<0?1:0}),B(a,"$==",function(u){var o=this;return u.$$is_string?o.toString()===u.toString():h(u,"$to_str")?u["$=="](o):!1}),B(a,"$=~",function(u){var o=this;return u.$$is_string&&z.$raise(l("TypeError"),"type mismatch: String given"),u["$=~"](o)}),B(a,"$[]",function(u,o){var y=this,j=y.length,D,F;if(u.$$is_range)return D=u.excl,F=u,o=u.end===c?-1:A(u.end,l("Integer"),"to_int"),u=u.begin===c?0:A(u.begin,l("Integer"),"to_int"),Math.abs(u)>j?c:(u<0&&(u+=j),o<0&&(o+=j),(!D||F.end===c)&&(o+=1),o=o-u,o<0&&(o=0),y.substr(u,o));if(u.$$is_string)return o!=null&&z.$raise(l("TypeError")),y.indexOf(u)!==-1?u:c;if(u.$$is_regexp){var G=y.match(u);return G===null?(w["~"]=c,c):(w["~"]=l("MatchData").$new(u,G),o==null?G[0]:(o=A(o,l("Integer"),"to_int"),o<0&&-o<G.length?G[o+=G.length]:o>=0&&o<G.length?G[o]:c))}return u=A(u,l("Integer"),"to_int"),u<0&&(u+=j),o==null?u>=j||u<0?c:y.substr(u,1):(o=A(o,l("Integer"),"to_int"),o<0||u>j||u<0?c:y.substr(u,o))},-2),B(a,"$b",function(){var u=this;return new String(u).$force_encoding("binary")}),B(a,"$capitalize",function(){var u=this;return u.charAt(0).toUpperCase()+u.substr(1).toLowerCase()}),B(a,"$casecmp",function(u){var o=this;if(!U(u["$respond_to?"]("to_str")))return c;u=A(u,l("String"),"to_str").$to_s();var y=/^[\x00-\x7F]*$/;return y.test(o)&&y.test(u)&&(o=o.toLowerCase(),u=u.toLowerCase()),o["$<=>"](u)}),B(a,"$casecmp?",function(u){var o=this,y=o.$casecmp(u);return y===c?c:y===0}),B(a,"$center",function(u,o){var y=this;if(o==null&&(o=" "),u=A(u,l("Integer"),"to_int"),o=A(o,l("String"),"to_str").$to_s(),U(o["$empty?"]())&&z.$raise(l("ArgumentError"),"zero width padding"),U(u<=y.length))return y;var j=y.$ljust(S(P(u,y.length),2).$ceil(),o),D=y.$rjust(S(P(u,y.length),2).$floor(),o);return D+j.slice(y.length)},-2),B(a,"$chomp",function(u){var o=this;if(w["/"]==null&&(w["/"]=c),u==null&&(u=w["/"]),U(u===c||o.length===0))return o;u=$e["$coerce_to!"](u,l("String"),"to_str").$to_s();var y;if(u===`
`)y=o.replace(/\r?\n?$/,"");else if(u==="")y=o.replace(/(\r?\n)+$/,"");else if(o.length>=u.length){var j=o.substr(o.length-u.length,u.length);j===u&&(y=o.substr(0,o.length-u.length))}return y??o},-1),B(a,"$chop",function(){var u=this,o=u.length,y;return o<=1?y="":u.charAt(o-1)===`
`&&u.charAt(o-2)==="\r"?y=u.substr(0,o-2):y=u.substr(0,o-1),y}),B(a,"$chr",function(){var u=this;return u.charAt(0)}),B(a,"$clone",function(u){var o,y=this,j=c;return u=m(u),o=k(u,"freeze"),o==null&&(o=c),U(o["$nil?"]())||q(o,!0)||q(o,!1)||y.$raise(t("ArgumentError"),"unexpected value for freeze: "+o.$class()),j=new String(y),j.$copy_singleton_methods(y),j.$initialize_clone(y,new Map([["freeze",o]])),q(o,!0)?j.$$frozen||(j.$$frozen=!0):U(o["$nil?"]())&&y.$$frozen&&(j.$$frozen=!0),j},-1),B(a,"$dup",function(){var u=this,o=c;return o=new String(u),o.$initialize_dup(u),o}),B(a,"$count",function(u){var o,y,j=this;o=H(arguments),y=o,y.length===0&&z.$raise(l("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var D=r(y);return D===null?0:j.length-j.replace(new RegExp(D,"g"),"").length},-1),B(a,"$delete",function(u){var o,y,j=this;o=H(arguments),y=o,y.length===0&&z.$raise(l("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var D=r(y);return D===null?j:j.replace(new RegExp(D,"g"),"")},-1),B(a,"$delete_prefix",function(u){var o=this;return u.$$is_string||(u=A(u,l("String"),"to_str")),o.slice(0,u.length)===u?o.slice(u.length):o}),B(a,"$delete_suffix",function(u){var o=this;return u.$$is_string||(u=A(u,l("String"),"to_str")),o.slice(o.length-u.length)===u?o.slice(0,o.length-u.length):o}),B(a,"$downcase",function(){var u=this;return u.toLowerCase()}),B(a,"$each_line",function i(u,o){var y=i.$$p||c,j,D,F,G,re=this;if(w["/"]==null&&(w["/"]=c),i.$$p=null,j=H(arguments),D=R(j),D=m(D),j.length>0&&(F=j.shift()),F==null&&(F=w["/"]),G=k(D,"chomp"),G==null&&(G=!1),y===c)return re.$enum_for("each_line",F,new Map([["chomp",G]]));if(F===c)return n.yield1(y,re),re;F=A(F,l("String"),"to_str");var ae,le,ce,de,he,ve,me,be;if(F.length===0){for(ae=re.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,ce=ae.length;le<ce;le+=2)(ae[le]||ae[le+1])&&(be=(ae[le]||"")+(ae[le+1]||""),G&&(be=be.$chomp(`
`)),n.yield1(y,be));return re}for(he=re.$chomp(F),ve=re.length!=he.length,me=he.split(F),le=0,de=me.length;le<de;le++)be=me[le],(le<de-1||ve)&&(be+=F),G&&(be=be.$chomp(F)),n.yield1(y,be);return re},-1),B(a,"$empty?",function(){var u=this;return u.length===0}),B(a,"$end_with?",function(u){var o,y,j=this;o=H(arguments),y=o;for(var D=0,F=y.length;D<F;D++){var G=A(y[D],l("String"),"to_str").$to_s();if(j.length>=G.length&&j.substr(j.length-G.length,G.length)==G)return!0}return!1},-1),B(a,"$gsub",function i(u,o){var y=i.$$p||c,j=this;if(i.$$p=null,o===void 0&&y===c)return j.$enum_for("gsub",u);var D="",F=c,G=0,re,ae;u.$$is_regexp?u=N(u):(u=A(u,l("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(re=u.exec(j),re===null){w["~"]=c,D+=j.slice(G);break}F=l("MatchData").$new(u,re),o===void 0?(le=u.lastIndex,ae=y(re[0]),u.lastIndex=le):o.$$is_hash?ae=o["$[]"](re[0]).$to_s():(o.$$is_string||(o=A(o,l("String"),"to_str")),ae=o.replace(/([\\]+)([0-9+&`'])/g,function(ce,de,he){if(de.length%2===0)return ce;switch(he){case"+":for(var ve=re.length-1;ve>0;ve--)if(re[ve]!==void 0)return de.slice(1)+re[ve];return"";case"&":return de.slice(1)+re[0];case"`":return de.slice(1)+j.slice(0,re.index);case"'":return de.slice(1)+j.slice(re.index+re[0].length);default:return de.slice(1)+(re[he]||"")}}).replace(/\\\\/g,"\\")),u.lastIndex===re.index?(D+=j.slice(G,re.index)+ae+(j[re.index]||""),u.lastIndex+=1):D+=j.slice(G,re.index)+ae,G=u.lastIndex}return w["~"]=F,D},-2),B(a,"$hex",function(){var u=this;return u.$to_i(16)}),B(a,"$include?",function(u){var o=this;return u.$$is_string||(u=A(u,l("String"),"to_str")),o.indexOf(u)!==-1}),B(a,"$index",function(u,o){var y=this,j,D,F;if(o===void 0)o=0;else if(o=A(o,l("Integer"),"to_int"),o<0&&(o+=y.length,o<0))return c;if(u.$$is_regexp)for(F=N(u);;){if(D=F.exec(y),D===null){w["~"]=c,j=-1;break}if(D.index>=o){w["~"]=l("MatchData").$new(F,D),j=D.index;break}F.lastIndex=D.index+1}else u=A(u,l("String"),"to_str"),u.length===0&&o>y.length?j=-1:j=y.indexOf(u,o);return j===-1?c:j},-2),B(a,"$inspect",function(){var u=this,o=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,y={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},j=u.replace(o,function(D){return y[D]?y[D]:(D=D.charCodeAt(0),D<=255&&(u.encoding["$binary?"]()||u.internal_encoding["$binary?"]())?"\\x"+("00"+D.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+D.toString(16).toUpperCase()).slice(-4))});return'"'+j.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),B(a,"$intern",function(){var u=this;return u.toString()}),B(a,"$length",function(){var u=this;return u.length}),v(a,"size","length"),B(a,"$lines",function i(u,o){var y=i.$$p||c,j,D,F,G,re=this,ae=c;return w["/"]==null&&(w["/"]=c),i.$$p=null,j=H(arguments),D=R(j),D=m(D),j.length>0&&(F=j.shift()),F==null&&(F=w["/"]),G=k(D,"chomp"),G==null&&(G=!1),ae=ee(re,"each_line",[F,new Map([["chomp",G]])],y.$to_proc()),U(y)?re:ae.$to_a()},-1),B(a,"$ljust",function(u,o){var y=this;if(o==null&&(o=" "),u=A(u,l("Integer"),"to_int"),o=A(o,l("String"),"to_str").$to_s(),U(o["$empty?"]())&&z.$raise(l("ArgumentError"),"zero width padding"),U(u<=y.length))return y;var j=-1,D="";for(u-=y.length;++j<u;)D+=o;return y+D.slice(0,u)},-2),B(a,"$lstrip",function(){var u=this;return u.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),B(a,"$ascii_only?",function(){var u=this;return u.encoding.ascii?/^[\x00-\x7F]*$/.test(u):!1}),B(a,"$match",function i(u,o){var y=i.$$p||c,j=this;return i.$$p=null,(I(t("String"),u)||U(u["$respond_to?"]("to_str")))&&(u=l("Regexp").$new(u.$to_str())),I(l("Regexp"),u)||z.$raise(l("TypeError"),"wrong argument type "+u.$class()+" (expected Regexp)"),ee(u,"match",[j,o],y.$to_proc())},-2),B(a,"$match?",function(u,o){var y=this;return(I(t("String"),u)||U(u["$respond_to?"]("to_str")))&&(u=l("Regexp").$new(u.$to_str())),I(l("Regexp"),u)||z.$raise(l("TypeError"),"wrong argument type "+u.$class()+" (expected Regexp)"),u["$match?"](y,o)},-2),B(a,"$next",function(){var u=this,o=u.length;if(o===0)return"";for(var y=u,j=u.search(/[a-zA-Z0-9]/),D=!1,F;o--;){if(F=u.charCodeAt(o),F>=48&&F<=57||F>=65&&F<=90||F>=97&&F<=122)switch(F){case 57:D=!0,F=48;break;case 90:D=!0,F=65;break;case 122:D=!0,F=97;break;default:D=!1,F+=1}else j===-1?F===255?(D=!0,F=0):(D=!1,F+=1):D=!0;if(y=y.slice(0,o)+String.fromCharCode(F)+y.slice(o+1),D&&(o===0||o===j)){switch(F){case 65:break;case 97:break;default:F+=1}o===0?y=String.fromCharCode(F)+y:y=y.slice(0,o)+String.fromCharCode(F)+y.slice(o),D=!1}if(!D)break}return y}),B(a,"$oct",function(){var u=this,o,y=u,j=8;return/^\s*_/.test(y)?0:(y=y.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(D,F,G,re){switch(re.charAt(0)){case"+":case"-":return D;case"0":if(re.charAt(1)==="x"&&G==="0x")return D}switch(G){case"0b":j=2;break;case"0":case"0o":j=8;break;case"0d":j=10;break;case"0x":j=16;break}return F+re}),o=parseInt(y.replace(/_(?!_)/g,""),j),isNaN(o)?0:o)}),B(a,"$ord",function(){var u=this;return typeof u.codePointAt=="function"?u.codePointAt(0):u.charCodeAt(0)}),B(a,"$partition",function(u){var o=this,y,j;return u.$$is_regexp?(j=u.exec(o),j===null?y=-1:(l("MatchData").$new(u,j),u=j[0],y=j.index)):(u=A(u,l("String"),"to_str"),y=o.indexOf(u)),y===-1?[o,"",""]:[o.slice(0,y),o.slice(y,y+u.length),o.slice(y+u.length)]}),B(a,"$reverse",function(){var u=this;return u.split("").reverse().join("")}),B(a,"$rindex",function(u,o){var y=this,j,D,F,G;if(o===void 0)o=y.length;else if(o=A(o,l("Integer"),"to_int"),o<0&&(o+=y.length,o<0))return c;if(u.$$is_regexp){for(D=null,F=N(u);G=F.exec(y),!(G===null||G.index>o);)D=G,F.lastIndex=D.index+1;D===null?(w["~"]=c,j=-1):(l("MatchData").$new(F,D),j=D.index)}else u=A(u,l("String"),"to_str"),j=y.lastIndexOf(u,o);return j===-1?c:j},-2),B(a,"$rjust",function(u,o){var y=this;if(o==null&&(o=" "),u=A(u,l("Integer"),"to_int"),o=A(o,l("String"),"to_str").$to_s(),U(o["$empty?"]())&&z.$raise(l("ArgumentError"),"zero width padding"),U(u<=y.length))return y;var j=Math.floor(u-y.length),D=Math.floor(j/o.length),F=Array(D+1).join(o),G=j-F.length;return F+o.slice(0,G)+y},-2),B(a,"$rpartition",function(u){var o=this,y,j,D,F;if(u.$$is_regexp){for(j=null,D=N(u);F=D.exec(o),F!==null;)j=F,D.lastIndex=j.index+1;j===null?y=-1:(l("MatchData").$new(D,j),u=j[0],y=j.index)}else u=A(u,l("String"),"to_str"),y=o.lastIndexOf(u);return y===-1?["","",o]:[o.slice(0,y),o.slice(y,y+u.length),o.slice(y+u.length)]}),B(a,"$rstrip",function(){var u=this;return u.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),B(a,"$scan",function i(u,o){var y=i.$$p||c,j,D=this;i.$$p=null,o=m(o),j=k(o,"no_matchdata"),j==null&&(j=!1);var F=[],G=c,re;for(u.$$is_regexp?u=N(u):(u=A(u,l("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(re=u.exec(D))!=null;)G=l("MatchData").$new(u,re,new Map([["no_matchdata",j]])),y===c?re.length==1?F.push(re[0]):F.push(G.$captures()):re.length==1?n.yield1(y,re[0]):n.yield1(y,G.$captures()),u.lastIndex===re.index&&(u.lastIndex+=1);return j||(w["~"]=G),y!==c?D:F},-2),B(a,"$singleton_class",function(){var u=this;return n.get_singleton_class(u)}),B(a,"$split",function(u,o){var y=this,j=c;if(w[";"]==null&&(w[";"]=c),y.length===0)return[];if(o===void 0)o=0;else if(o=$e["$coerce_to!"](o,l("Integer"),"to_int"),o===1)return[y];(u===void 0||u===c)&&(u=U(j=w[";"])?j:" ");var D=[],F=y.toString(),G=0,re,ae=0,le=0,ce,de;if(u.$$is_regexp?u=N(u):(u=A(u,l("String"),"to_str").$to_s(),u===" "&&(u=/\s+/gm,F=F.replace(/^\s+/,""))),D=F.split(u),D.length===1&&D[0]===F)return[D[0]];for(;(ce=D.indexOf(void 0))!==-1;)D.splice(ce,1);if(o===0){for(;D[D.length-1]==="";)D.pop();return D}if(u.$$is_regexp||(u=n.escape_regexp(u),u=new RegExp(u,"gm")),re=u.exec(F),o<0){if(re!==null&&re[0]===""&&u.source.indexOf("(?=")===-1)for(ce=0,de=re.length;ce<de;ce++)D.push("");return D}if(re!==null&&re[0]==="")return le=(re.length-1)*(o-1)+o,D.splice(le-1,D.length-1,D.slice(le-1).join("")),D;if(o>=D.length)return D;for(;re!==null&&(ae++,G=u.lastIndex,le+=re.length,ae+1!==o);)re=u.exec(F);return D.splice(le,D.length-1,F.slice(G)),D},-1),B(a,"$squeeze",function(u){var o,y,j=this;if(o=H(arguments),y=o,y.length===0)return j.replace(/(.)\1+/g,"$1");var D=r(y);return D===null?j:j.replace(new RegExp("("+D+")\\1+","g"),"$1")},-1),B(a,"$start_with?",function(u){var o,y,j=this;o=H(arguments),y=o;for(var D=0,F=y.length;D<F;D++)if(y[D].$$is_regexp){var G=y[D],re=G.exec(j);if(re!=null&&re.index===0)return w["~"]=l("MatchData").$new(G,re),!0;w["~"]=c}else{var ae=A(y[D],l("String"),"to_str").$to_s();if(j.length>=ae.length&&j.startsWith(ae))return!0}return!1},-1),B(a,"$strip",function(){var u=this;return u.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),B(a,"$sub",function i(u,o){var y=i.$$p||c,j=this;i.$$p=null,u.$$is_regexp||(u=A(u,l("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var D,F=u.exec(j);return F===null?(w["~"]=c,D=j.toString()):(l("MatchData").$new(u,F),o===void 0?(y===c&&z.$raise(l("ArgumentError"),"wrong number of arguments (1 for 2)"),D=j.slice(0,F.index)+y(F[0])+j.slice(F.index+F[0].length)):o.$$is_hash?D=j.slice(0,F.index)+o["$[]"](F[0]).$to_s()+j.slice(F.index+F[0].length):(o=A(o,l("String"),"to_str"),o=o.replace(/([\\]+)([0-9+&`'])/g,function(G,re,ae){if(re.length%2===0)return G;switch(ae){case"+":for(var le=F.length-1;le>0;le--)if(F[le]!==void 0)return re.slice(1)+F[le];return"";case"&":return re.slice(1)+F[0];case"`":return re.slice(1)+j.slice(0,F.index);case"'":return re.slice(1)+j.slice(F.index+F[0].length);default:return re.slice(1)+(F[ae]||"")}}).replace(/\\\\/g,"\\"),D=j.slice(0,F.index)+o+j.slice(F.index+F[0].length))),D},-2),B(a,"$sum",function(u){var o=this;u==null&&(u=16),u=A(u,l("Integer"),"to_int");for(var y=0,j=o.length,D=0;D<j;D++)y+=o.charCodeAt(D);return u<=0?y:y&Math.pow(2,u)-1},-1),B(a,"$swapcase",function(){var u=this,o=u.replace(/([a-z]+)|([A-Z]+)/g,function(y,j,D){return j?y.toUpperCase():y.toLowerCase()});return o}),B(a,"$to_f",function(){var u=this;if(u.charAt(0)==="_")return 0;var o=parseFloat(u.replace(/_/g,""));return isNaN(o)||o==1/0||o==-1/0?0:o}),B(a,"$to_i",function(u){var o=this;u==null&&(u=10);var y,j=o.toLowerCase(),D=A(u,l("Integer"),"to_int");return(D===1||D<0||D>36)&&z.$raise(l("ArgumentError"),"invalid radix "+D),/^\s*_/.test(j)?0:(j=j.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(F,G,re,ae){switch(ae.charAt(0)){case"+":case"-":return F;case"0":if(ae.charAt(1)==="x"&&re==="0x"&&(D===0||D===16))return F}switch(re){case"0b":if(D===0||D===2)return D=2,G+ae;break;case"0":case"0o":if(D===0||D===8)return D=8,G+ae;break;case"0d":if(D===0||D===10)return D=10,G+ae;break;case"0x":if(D===0||D===16)return D=16,G+ae;break}return F}),y=parseInt(j.replace(/_(?!_)/g,""),D),isNaN(y)?0:y)},-1),B(a,"$to_proc",function i(){i.$$p;var u=this,o=c,y=c,j=c;return i.$$p=null,o=u.valueOf(),y=n.jsid(o),j=ee(z,"proc",[],function D(F){var G=D.$$p||c,re,ae;D.$$p=null,re=H(arguments),ae=re,ae.length===0&&z.$raise(l("ArgumentError"),"no receiver given");var le=ae[0];le==null&&(le=c);var ce=le[y];return ce?ae=ae.slice(1):(ce=le.$method_missing,ae[0]=o),typeof G=="function"&&(ce.$$p=G),ae.length===0?ce.call(le):ce.apply(le,ae)},-1),j.$$source_location=c,j}),B(a,"$to_s",function(){var u=this;return u.toString()}),B(a,"$tr",function(u,o){var y=this;if(u=A(u,l("String"),"to_str").$to_s(),o=A(o,l("String"),"to_str").$to_s(),u.length==0||u===o)return y;var j,D,F,G,re,ae,le,ce={},de=u.split(""),he=de.length,ve=o.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],he-=1);var T=[],V=null;for(D=!1,j=0;j<he;j++)if(G=de[j],V==null)V=G,T.push(G);else if(G==="-")V==="-"?(T.push("-"),T.push("-")):j==he-1?T.push("-"):D=!0;else if(D){for(re=V.charCodeAt(0),ae=G.charCodeAt(0),re>ae&&z.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),F=re+1;F<ae;F++)T.push(String.fromCharCode(F));T.push(G),D=null,V=null}else T.push(G);if(de=T,he=de.length,be)for(j=0;j<he;j++)ce[de[j]]=!0;else{if(me>0){var X=[],O=null;for(D=!1,j=0;j<me;j++)if(G=ve[j],O==null)O=G,X.push(G);else if(G==="-")O==="-"?(X.push("-"),X.push("-")):j==me-1?X.push("-"):D=!0;else if(D){for(re=O.charCodeAt(0),ae=G.charCodeAt(0),re>ae&&z.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),F=re+1;F<ae;F++)X.push(String.fromCharCode(F));X.push(G),D=null,O=null}else X.push(G);ve=X,me=ve.length}var ne=he-me;if(ne>0){var se=me>0?ve[me-1]:"";for(j=0;j<ne;j++)ve.push(se)}for(j=0;j<he;j++)ce[de[j]]=ve[j]}var oe="";for(j=0,le=y.length;j<le;j++){G=y.charAt(j);var fe=ce[G];be?oe+=fe==null?ie:G:oe+=fe??G}return oe}),B(a,"$tr_s",function(u,o){var y=this;if(u=A(u,l("String"),"to_str").$to_s(),o=A(o,l("String"),"to_str").$to_s(),u.length==0)return y;var j,D,F,G,re,ae,le,ce={},de=u.split(""),he=de.length,ve=o.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],he-=1);var T=[],V=null;for(D=!1,j=0;j<he;j++)if(G=de[j],V==null)V=G,T.push(G);else if(G==="-")V==="-"?(T.push("-"),T.push("-")):j==he-1?T.push("-"):D=!0;else if(D){for(re=V.charCodeAt(0),ae=G.charCodeAt(0),re>ae&&z.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),F=re+1;F<ae;F++)T.push(String.fromCharCode(F));T.push(G),D=null,V=null}else T.push(G);if(de=T,he=de.length,be)for(j=0;j<he;j++)ce[de[j]]=!0;else{if(me>0){var X=[],O=null;for(D=!1,j=0;j<me;j++)if(G=ve[j],V==null)V=G,X.push(G);else if(G==="-")O==="-"?(X.push("-"),X.push("-")):j==me-1?X.push("-"):D=!0;else if(D){for(re=V.charCodeAt(0),ae=G.charCodeAt(0),re>ae&&z.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(re)+"-"+String.fromCharCode(ae)+'" in string transliteration'),F=re+1;F<ae;F++)X.push(String.fromCharCode(F));X.push(G),D=null,V=null}else X.push(G);ve=X,me=ve.length}var ne=he-me;if(ne>0){var se=me>0?ve[me-1]:"";for(j=0;j<ne;j++)ve.push(se)}for(j=0;j<he;j++)ce[de[j]]=ve[j]}var oe="",fe=null;for(j=0,le=y.length;j<le;j++){G=y.charAt(j);var d=ce[G];be?d==null?fe==null&&(oe+=ie,fe=!0):(oe+=G,fe=null):d!=null?(fe==null||fe!==d)&&(oe+=d,fe=d):(oe+=G,fe=null)}return oe}),B(a,"$upcase",function(){var u=this;return u.toUpperCase()}),B(a,"$upto",function i(u,o){var y=i.$$p||c,j=this;if(i.$$p=null,o==null&&(o=!1),y===c)return j.$enum_for("upto",u,o);var D,F,G=j.toString();if(u=A(u,l("String"),"to_str"),G.length===1&&u.length===1)for(D=G.charCodeAt(0),F=u.charCodeAt(0);D<=F&&!(o&&D===F);)y(String.fromCharCode(D)),D+=1;else if(parseInt(G,10).toString()===G&&parseInt(u,10).toString()===u)for(D=parseInt(G,10),F=parseInt(u,10);D<=F&&!(o&&D===F);)y(D.toString()),D+=1;else for(;G.length<=u.length&&G<=u&&!(o&&G===u);)y(G),G=G.$succ();return j},-2);function r(i){function u(ce){var de="",he,ve=ce.length,me,be,ie,T,V;for(he=0;he<ve;he++)if(me=ce.charAt(he),me==="-"&&he>0&&he<ve-1&&!be){for(ie=ce.charCodeAt(he-1),T=ce.charCodeAt(he+1),ie>T&&z.$raise(l("ArgumentError"),'invalid range "'+ie+"-"+T+'" in string transliteration'),V=ie+1;V<T+1;V++)de+=String.fromCharCode(V);be=!0,he++}else be=me==="\\",de+=me;return de}function o(ce,de){if(ce.length===0)return de;var he="",ve,me=ce.length,be;for(ve=0;ve<me;ve++)be=ce.charAt(ve),de.indexOf(be)!==-1&&(he+=be);return he}var y,j,D,F,G,re,ae="",le="";for(y=0,j=i.length;y<j;y++)D=A(i[y],l("String"),"to_str"),F=D.charAt(0)==="^"&&D.length>1,D=u(F?D.slice(1):D),F?le=o(le,D):ae=o(ae,D);if(ae.length>0&&le.length>0){for(re="",y=0,j=ae.length;y<j;y++)G=ae.charAt(y),le.indexOf(G)===-1&&(re+=G);ae=re,le=""}return ae.length>0?"["+l("Regexp").$escape(ae)+"]":le.length>0?"[^"+l("Regexp").$escape(le)+"]":null}return B(a,"$instance_variables",function(){return[]}),Y(a,"$_load",function(u){var o,y,j=this;return o=H(arguments),y=o,ee(j,"new",Z(y))},-1),B(a,"$unicode_normalize",function(u){var o=this;return u==null&&(u="nfc"),U(["nfc","nfd","nfkc","nfkd"]["$include?"](u))||z.$raise(l("ArgumentError"),"Invalid normalization form "+u),o.normalize(u.$upcase())},-1),B(a,"$unicode_normalized?",function(u){var o=this;return u==null&&(u="nfc"),o.$unicode_normalize(u)["$=="](o)},-1),B(a,"$unpack",function(u){return z.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),B(a,"$unpack1",function(u){return z.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),B(a,"$freeze",function(){var u=this;return typeof u=="string"||M(u,"$$frozen",!0),u}),B(a,"$-@",function(){var u=this;return typeof u=="string"||u.$$frozen?u:u.encoding.name=="UTF-8"&&u.internal_encoding.name=="UTF-8"?u.toString():u.$dup().$freeze()}),B(a,"$frozen?",function(){var u=this;return typeof u=="string"||u.$$frozen===!0}),v(a,"+@","dup"),v(a,"===","=="),v(a,"byteslice","[]"),v(a,"eql?","=="),v(a,"equal?","==="),v(a,"object_id","__id__"),v(a,"slice","[]"),v(a,"succ","next"),v(a,"to_str","to_s"),v(a,"to_sym","intern"),$e.$pristine(a,"initialize")}("::",String,E),s(E[0],"Symbol",g("String"))};Opal.modules["corelib/enumerable"]=function(n){var A=n.truthy,h=n.coerce_to,N=n.yield1,M=n.yieldX,Q=n.deny_frozen_access,W=n.module,L=n.send,K=n.slice,b=n.to_a,B=n.Opal,$e=n.thrower,Y=n.def,H=n.Kernel,ee=n.return_val,Z=n.rb_gt,R=n.rb_times,m=n.rb_lt,k=n.eqeq,I=n.rb_plus,z=n.rb_minus,U=n.rb_divide,w=n.rb_le,S=n.lambda,P=n.not,q=n.alias,v=[],s=n.nil,f=n.$$$;return n.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(E,g){var c=W(E,"Enumerable"),l=[c].concat(g),p=n.$r(l);function C(_){return _.length===0&&(_=[s]),_.length>1&&(_=[_]),_}return Y(c,"$all?",function _(a){try{var $=$e("return"),t=_.$$p||s,e=this;return _.$$p=null,A(a!==void 0)?L(e,"each",[],function r(i){var u,o,y=s;if(u=K(arguments),o=u,y=C(o),A(L(a,"public_send",["==="].concat(b(y)))))return s;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):t!==s?L(e,"each",[],function r(i){var u,o;if(u=K(arguments),o=u,A(n.yieldX(t,b(o))))return s;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):L(e,"each",[],function r(i){var u,o;if(u=K(arguments),o=u,A(B.$destructure(o)))return s;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),Y(c,"$any?",function _(a){try{var $=$e("return"),t=_.$$p||s,e=this;return _.$$p=null,A(a!==void 0)?L(e,"each",[],function r(i){var u,o,y=s;if(u=K(arguments),o=u,y=C(o),A(L(a,"public_send",["==="].concat(b(y)))))$.$throw(!0,r.$$is_lambda);else return s},{$$arity:-1,$$ret:$}):t!==s?L(e,"each",[],function r(i){var u,o;if(u=K(arguments),o=u,A(n.yieldX(t,b(o))))$.$throw(!0,r.$$is_lambda);else return s},{$$arity:-1,$$ret:$}):L(e,"each",[],function r(i){var u,o;if(u=K(arguments),o=u,A(B.$destructure(o)))$.$throw(!0,r.$$is_lambda);else return s},{$$arity:-1,$$ret:$}),!1}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),Y(c,"$chunk",function _(){var a=_.$$p||s,$=this;return _.$$p=null,a===s?L($,"to_enum",["chunk"],function t(){var e=t.$$s==null?this:t.$$s;return e.$enumerator_size()},{$$s:$}):L(f("Enumerator"),"new",[],function t(e){var r=t.$$s==null?this:t.$$s;e==null&&(e=s);var i=s,u=[];function o(){u.length>0&&e.$yield(i,u)}r.$each.$$p=function(y){var j=N(a,y);j===s?(o(),u=[],i=s):(i===s||i===j?u.push(y):(o(),u=[y]),i=j)},r.$each(),o()},{$$s:$})}),Y(c,"$chunk_while",function _(){var a=_.$$p||s,$=this;return _.$$p=null,a===s&&H.$raise(f("ArgumentError"),"no block given"),L($,"slice_when",[],function(e,r){return e==null&&(e=s),r==null&&(r=s),n.yieldX(a,[e,r])["$!"]()})}),Y(c,"$collect",function _(){var a=_.$$p||s,$=this;if(_.$$p=null,a===s)return L($,"enum_for",["collect"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$});var t=[];return $.$each.$$p=function(){var e=M(a,arguments);t.push(e)},$.$each(),t}),Y(c,"$collect_concat",function _(){var a=_.$$p||s,$=this;return _.$$p=null,a===s?L($,"enum_for",["collect_concat"],function t(){var e=t.$$s==null?this:t.$$s;return e.$enumerator_size()},{$$s:$}):L($,"map",[],a.$to_proc()).$flatten(1)}),Y(c,"$compact",function(){var a=this;return a.$to_a().$compact()}),Y(c,"$count",function _(a){var $=_.$$p||s,t=this,e=s;return _.$$p=null,e=0,a!=null&&$!==s&&t.$warn("warning: given block not used"),A(a!=null)?$=L(H,"proc",[],function(i){var u,o;return u=K(arguments),o=u,B.$destructure(o)["$=="](a)},-1):A($["$nil?"]())&&($=L(H,"proc",[],ee(!0))),L(t,"each",[],function(i){var u,o;return u=K(arguments),o=u,A(M($,o))?e++:s},-1),e},-1),Y(c,"$cycle",function _(a){var $=_.$$p||s,t=this;if(_.$$p=null,a==null&&(a=s),$===s)return L(t,"enum_for",["cycle",a],function u(){var o=u.$$s==null?this:u.$$s;return A(a["$nil?"]())?A(o["$respond_to?"]("size"))?f(f("Float"),"INFINITY"):s:(a=B["$coerce_to!"](a,f("Integer"),"to_int"),A(Z(a,0))?R(o.$enumerator_size(),a):0)},{$$s:t});if(!A(a["$nil?"]())&&(a=B["$coerce_to!"](a,f("Integer"),"to_int"),A(a<=0)))return s;var e=[],r,i;if(t.$each.$$p=function(){var u=B.$destructure(arguments);N($,u),e.push(u)},t.$each(),e.length===0)return s;if(a===s)for(;;)for(r=0,i=e.length;r<i;r++)N($,e[r]);else for(;a>1;){for(r=0,i=e.length;r<i;r++)N($,e[r]);a--}},-1),Y(c,"$detect",function _(a){try{var $=$e("return"),t=_.$$p||s,e=this;return _.$$p=null,t===s?e.$enum_for("detect",a):(L(e,"each",[],function r(i){var u,o,y=s;if(u=K(arguments),o=u,y=B.$destructure(o),A(n.yield1(t,y)))$.$throw(y,r.$$is_lambda);else return s},{$$arity:-1,$$ret:$}),a!==void 0?typeof a=="function"?a():a:s)}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),Y(c,"$drop",function(a){var $=this;a=h(a,f("Integer"),"to_int"),A(a<0)&&H.$raise(f("ArgumentError"),"attempt to drop negative size");var t=[],e=0;return $.$each.$$p=function(){a<=e&&t.push(B.$destructure(arguments)),e++},$.$each(),t}),Y(c,"$drop_while",function _(){var a=_.$$p||s,$=this;if(_.$$p=null,a===s)return $.$enum_for("drop_while");var t=[],e=!0;return $.$each.$$p=function(){var r=B.$destructure(arguments);if(e){var i=N(a,r);A(i)||(e=!1,t.push(r))}else t.push(r)},$.$each(),t}),Y(c,"$each_cons",function _(a){var $=_.$$p||s,t=this;if(_.$$p=null,A(arguments.length!=1)&&H.$raise(f("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),a=B.$try_convert(a,f("Integer"),"to_int"),A(a<=0)&&H.$raise(f("ArgumentError"),"invalid size"),$===s)return L(t,"enum_for",["each_cons",a],function r(){var i=r.$$s==null?this:r.$$s,u=s;return u=i.$enumerator_size(),A(u["$nil?"]())?s:k(u,0)||A(m(u,a))?0:I(z(u,a),1)},{$$s:t});var e=[];return t.$each.$$p=function(){var r=B.$destructure(arguments);e.push(r),e.length>a&&e.shift(),e.length==a&&N($,e.slice(0,a))},t.$each(),t}),Y(c,"$each_entry",function _(a){var $=_.$$p||s,t,e,r=this;return _.$$p=null,t=K(arguments),e=t,$===s?L(r,"to_enum",["each_entry"].concat(b(e)),function i(){var u=i.$$s==null?this:i.$$s;return u.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var i=B.$destructure(arguments);N($,i)},r.$each.apply(r,e),r)},-1),Y(c,"$each_slice",function _(a){var $=_.$$p||s,t=this;if(_.$$p=null,a=h(a,f("Integer"),"to_int"),A(a<=0)&&H.$raise(f("ArgumentError"),"invalid slice size"),$===s)return L(t,"enum_for",["each_slice",a],function r(){var i=r.$$s==null?this:r.$$s;return A(i["$respond_to?"]("size"))?U(i.$size(),a).$ceil():s},{$$s:t});var e=[];return t.$each.$$p=function(){var r=B.$destructure(arguments);e.push(r),e.length===a&&(N($,e),e=[])},t.$each(),e.length>0&&N($,e),t}),Y(c,"$each_with_index",function _(a){var $=_.$$p||s,t,e,r=this;if(_.$$p=null,t=K(arguments),e=t,$===s)return L(r,"enum_for",["each_with_index"].concat(b(e)),function u(){var o=u.$$s==null?this:u.$$s;return o.$enumerator_size()},{$$s:r});var i=0;return r.$each.$$p=function(){var u=B.$destructure(arguments);$(u,i),i++},r.$each.apply(r,e),r},-1),Y(c,"$each_with_object",function _(a){var $=_.$$p||s,t=this;return _.$$p=null,$===s?L(t,"enum_for",["each_with_object",a],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:t}):(t.$each.$$p=function(){var e=B.$destructure(arguments);$(e,a)},t.$each(),a)}),Y(c,"$entries",function(a){var $,t,e=this;$=K(arguments),t=$;var r=[];return e.$each.$$p=function(){r.push(B.$destructure(arguments))},e.$each.apply(e,t),r},-1),Y(c,"$filter_map",function _(){var a=_.$$p||s,$=this;return _.$$p=null,a===s?L($,"enum_for",["filter_map"],function t(){var e=t.$$s==null?this:t.$$s;return e.$enumerator_size()},{$$s:$}):L(L($,"map",[],a.$to_proc()),"select",[],"itself".$to_proc())}),Y(c,"$find_all",function _(){var a=_.$$p||s,$=this;if(_.$$p=null,a===s)return L($,"enum_for",["find_all"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$});var t=[];return $.$each.$$p=function(){var e=B.$destructure(arguments),r=N(a,e);A(r)&&t.push(e)},$.$each(),t}),Y(c,"$find_index",function _(a){try{var $=$e("return"),t=_.$$p||s,e=this,r=s;return _.$$p=null,A(a===void 0&&t===s)?e.$enum_for("find_index"):(a!=null&&t!==s&&e.$warn("warning: given block not used"),r=0,A(a!=null)?L(e,"each",[],function i(u){var o,y;return o=K(arguments),y=o,k(B.$destructure(y),a)&&$.$throw(r,i.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}):L(e,"each",[],function i(u){var o,y;return o=K(arguments),y=o,A(n.yieldX(t,b(y)))&&$.$throw(r,i.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}),s)}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),Y(c,"$first",function(a){try{var $=$e("return"),t=this,e=s,r=s;return A(a===void 0)?L(t,"each",[],function i(u){u==null&&(u=s),$.$throw(u,i.$$is_lambda)},{$$ret:$}):(e=[],a=h(a,f("Integer"),"to_int"),A(a<0)&&H.$raise(f("ArgumentError"),"attempt to take negative size"),A(a==0)?[]:(r=0,L(t,"each",[],function i(u){var o,y;if(o=K(arguments),y=o,e.push(B.$destructure(y)),A(a<=++r))$.$throw(e,i.$$is_lambda);else return s},{$$arity:-1,$$ret:$}),e))}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),Y(c,"$grep",function _(a){var $=_.$$p||s,t=this,e=s;return _.$$p=null,e=[],L(t,"each",[],function(i){var u,o,y=s;return u=K(arguments),o=u,y=C(o),A(L(a,"__send__",["==="].concat(b(y))))?($!==s?(A(Z(o.$length(),1))&&(o=[o]),o=n.yieldX($,b(o))):A(w(o.$length(),1))&&(o=o["$[]"](0)),e.$push(o)):s},-1),e}),Y(c,"$grep_v",function _(a){var $=_.$$p||s,t=this,e=s;return _.$$p=null,e=[],L(t,"each",[],function(i){var u,o,y=s;return u=K(arguments),o=u,y=C(o),A(L(a,"__send__",["==="].concat(b(y))))?s:($!==s?(A(Z(o.$length(),1))&&(o=[o]),o=n.yieldX($,b(o))):A(w(o.$length(),1))&&(o=o["$[]"](0)),e.$push(o))},-1),e}),Y(c,"$group_by",function _(){var a=_.$$p||s,$,t=this,e=s,r=s;return _.$$p=null,a===s?L(t,"enum_for",["group_by"],function i(){var u=i.$$s==null?this:i.$$s;return u.$enumerator_size()},{$$s:t}):(e=new Map,t.$each.$$p=function(){var i=B.$destructure(arguments),u=N(a,i);(A(r=e["$[]"](u))?r:($=[u,[]],L(e,"[]=",$),$[$.length-1]))["$<<"](i)},t.$each(),e)}),Y(c,"$include?",function(a){try{var $=$e("return"),t=this;return L(t,"each",[],function e(r){var i,u;if(i=K(arguments),u=i,k(B.$destructure(u),a))$.$throw(!0,e.$$is_lambda);else return s},{$$arity:-1,$$ret:$}),!1}catch(e){if(e===$)return e.$v;throw e}finally{$.is_orphan=!0}}),Y(c,"$inject",function _(a,$){var t=_.$$p||s,e=this;_.$$p=null;var r=a;return t!==s&&$===void 0?e.$each.$$p=function(){var i=B.$destructure(arguments);if(r===void 0){r=i;return}i=M(t,[r,i]),r=i}:($===void 0&&(f("Symbol")["$==="](a)||H.$raise(f("TypeError"),""+a.$inspect()+" is not a Symbol"),$=a,r=void 0),e.$each.$$p=function(){var i=B.$destructure(arguments);if(r===void 0){r=i;return}r=r.$__send__($,i)}),e.$each(),r??s},-1),Y(c,"$lazy",function(){var a=this;return L(f(f("Enumerator"),"Lazy"),"new",[a,a.$enumerator_size()],function(t,e){var r,i;return t==null&&(t=s),r=K(arguments,1),i=r,L(t,"yield",b(i))},-2)}),Y(c,"$enumerator_size",function(){var a=this;return A(a["$respond_to?"]("size"))?a.$size():s}),Y(c,"$max",function _(a){var $=_.$$p||s,t=this;if(_.$$p=null,a===void 0||a===s){var e,r;return t.$each.$$p=function(){var i=B.$destructure(arguments);if(e===void 0){e=i;return}$!==s?r=M($,[i,e]):r=i["$<=>"](e),r===s&&H.$raise(f("ArgumentError"),"comparison failed"),r>0&&(e=i)},t.$each(),e===void 0?s:e}return a=h(a,f("Integer"),"to_int"),L(t,"sort",[],$.$to_proc()).$reverse().$first(a)},-1),Y(c,"$max_by",function _(a){var $=_.$$p||s,t=this;if(_.$$p=null,a==null&&(a=s),!A($))return L(t,"enum_for",["max_by",a],function i(){var u=i.$$s==null?this:i.$$s;return u.$enumerator_size()},{$$s:t});if(!A(a["$nil?"]()))return L(t,"sort_by",[],$.$to_proc()).$reverse().$take(a);var e,r;return t.$each.$$p=function(){var i=B.$destructure(arguments),u=N($,i);if(e===void 0){e=i,r=u;return}u["$<=>"](r)>0&&(e=i,r=u)},t.$each(),e===void 0?s:e},-1),Y(c,"$min",function _(a){var $=_.$$p||s,t=this;if(_.$$p=null,a==null&&(a=s),!A(a["$nil?"]()))return $!==s?L(t,"sort",[],function(i,u){return i==null&&(i=s),u==null&&(u=s),n.yieldX($,[i,u])}).$take(a):t.$sort().$take(a);var e;return $!==s?t.$each.$$p=function(){var r=B.$destructure(arguments);if(e===void 0){e=r;return}var i=$(r,e);i===s&&H.$raise(f("ArgumentError"),"comparison failed"),i<0&&(e=r)}:t.$each.$$p=function(){var r=B.$destructure(arguments);if(e===void 0){e=r;return}B.$compare(r,e)<0&&(e=r)},t.$each(),e===void 0?s:e},-1),Y(c,"$min_by",function _(a){var $=_.$$p||s,t=this;if(_.$$p=null,a==null&&(a=s),!A($))return L(t,"enum_for",["min_by",a],function i(){var u=i.$$s==null?this:i.$$s;return u.$enumerator_size()},{$$s:t});if(!A(a["$nil?"]()))return L(t,"sort_by",[],$.$to_proc()).$take(a);var e,r;return t.$each.$$p=function(){var i=B.$destructure(arguments),u=N($,i);if(e===void 0){e=i,r=u;return}u["$<=>"](r)<0&&(e=i,r=u)},t.$each(),e===void 0?s:e},-1),Y(c,"$minmax",function _(){var a=_.$$p||s,$=this,t=s;_.$$p=null,a=A(t=a)?t:L(H,"proc",[],function(o,y){return o==null&&(o=s),y==null&&(y=s),o["$<=>"](y)});var e=s,r=s,i=!0;return $.$each.$$p=function(){var u=B.$destructure(arguments);if(i)e=r=u,i=!1;else{var o=a.$call(e,u);o===s?H.$raise(f("ArgumentError"),"comparison failed"):o>0&&(e=u);var y=a.$call(r,u);y===s?H.$raise(f("ArgumentError"),"comparison failed"):y<0&&(r=u)}},$.$each(),[e,r]}),Y(c,"$minmax_by",function _(){var a=_.$$p||s,$=this;if(_.$$p=null,!A(a))return L($,"enum_for",["minmax_by"],function u(){var o=u.$$s==null?this:u.$$s;return o.$enumerator_size()},{$$s:$});var t=s,e=s,r,i;return $.$each.$$p=function(){var u=B.$destructure(arguments),o=N(a,u);(r===void 0||o["$<=>"](r)<0)&&(t=u,r=o),(i===void 0||o["$<=>"](i)>0)&&(e=u,i=o)},$.$each(),[t,e]}),Y(c,"$none?",function _(a){try{var $=$e("return"),t=_.$$p||s,e=this;return _.$$p=null,A(a!==void 0)?L(e,"each",[],function r(i){var u,o,y=s;if(u=K(arguments),o=u,y=C(o),A(L(a,"public_send",["==="].concat(b(y)))))$.$throw(!1,r.$$is_lambda);else return s},{$$arity:-1,$$ret:$}):t!==s?L(e,"each",[],function r(i){var u,o;if(u=K(arguments),o=u,A(n.yieldX(t,b(o))))$.$throw(!1,r.$$is_lambda);else return s},{$$arity:-1,$$ret:$}):L(e,"each",[],function r(i){var u,o,y=s;if(u=K(arguments),o=u,y=B.$destructure(o),A(y))$.$throw(!1,r.$$is_lambda);else return s},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),Y(c,"$one?",function _(a){try{var $=$e("return"),t=_.$$p||s,e=this,r=s;return _.$$p=null,r=0,A(a!==void 0)?L(e,"each",[],function i(u){var o,y,j=s;if(o=K(arguments),y=o,j=C(y),A(L(a,"public_send",["==="].concat(b(j)))))if(r=I(r,1),A(Z(r,1)))$.$throw(!1,i.$$is_lambda);else return s;else return s},{$$arity:-1,$$ret:$}):t!==s?L(e,"each",[],function i(u){var o,y;if(o=K(arguments),y=o,!A(n.yieldX(t,b(y))))return s;if(r=I(r,1),A(Z(r,1)))$.$throw(!1,i.$$is_lambda);else return s},{$$arity:-1,$$ret:$}):L(e,"each",[],function i(u){var o,y;if(o=K(arguments),y=o,!A(B.$destructure(y)))return s;if(r=I(r,1),A(Z(r,1)))$.$throw(!1,i.$$is_lambda);else return s},{$$arity:-1,$$ret:$}),r["$=="](1)}catch(i){if(i===$)return i.$v;throw i}finally{$.is_orphan=!0}},-1),Y(c,"$partition",function _(){var a=_.$$p||s,$=this;if(_.$$p=null,a===s)return L($,"enum_for",["partition"],function r(){var i=r.$$s==null?this:r.$$s;return i.$enumerator_size()},{$$s:$});var t=[],e=[];return $.$each.$$p=function(){var r=B.$destructure(arguments),i=N(a,r);A(i)?t.push(r):e.push(r)},$.$each(),[t,e]}),Y(c,"$reject",function _(){var a=_.$$p||s,$=this;if(_.$$p=null,a===s)return L($,"enum_for",["reject"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$});var t=[];return $.$each.$$p=function(){var e=B.$destructure(arguments),r=N(a,e);A(r)||t.push(e)},$.$each(),t}),Y(c,"$reverse_each",function _(){var a=_.$$p||s,$=this;if(_.$$p=null,a===s)return L($,"enum_for",["reverse_each"],function r(){var i=r.$$s==null?this:r.$$s;return i.$enumerator_size()},{$$s:$});var t=[];$.$each.$$p=function(){t.push(arguments)},$.$each();for(var e=t.length-1;e>=0;e--)M(a,t[e]);return t}),Y(c,"$slice_before",function _(a){var $=_.$$p||s,t=this;return _.$$p=null,A(a===void 0&&$===s)&&H.$raise(f("ArgumentError"),"both pattern and block are given"),A(a!==void 0&&$!==s||arguments.length>1)&&H.$raise(f("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),L(f("Enumerator"),"new",[],function e(r){var i=e.$$s==null?this:e.$$s;r==null&&(r=s);var u=[];$!==s?a===void 0?i.$each.$$p=function(){var o=B.$destructure(arguments),y=N($,o);A(y)&&u.length>0&&(r["$<<"](u),u=[]),u.push(o)}:i.$each.$$p=function(){var o=B.$destructure(arguments),y=$(o,a.$dup());A(y)&&u.length>0&&(r["$<<"](u),u=[]),u.push(o)}:i.$each.$$p=function(){var o=B.$destructure(arguments),y=a["$==="](o);A(y)&&u.length>0&&(r["$<<"](u),u=[]),u.push(o)},i.$each(),u.length>0&&r["$<<"](u)},{$$s:t})},-1),Y(c,"$slice_after",function _(a){var $=_.$$p||s,t=this;return _.$$p=null,A(a===void 0&&$===s)&&H.$raise(f("ArgumentError"),"both pattern and block are given"),A(a!==void 0&&$!==s||arguments.length>1)&&H.$raise(f("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),A(a!==void 0)&&($=L(H,"proc",[],function(r){return r==null&&(r=s),a["$==="](r)})),L(f("Enumerator"),"new",[],function e(r){var i=e.$$s==null?this:e.$$s;r==null&&(r=s);var u;i.$each.$$p=function(){var o=B.$destructure(arguments),y=N($,o);u==null&&(u=[]),A(y)?(u.push(o),r.$yield(u),u=null):u.push(o)},i.$each(),u!=null&&r.$yield(u)},{$$s:t})},-1),Y(c,"$slice_when",function _(){var a=_.$$p||s,$=this;return _.$$p=null,a===s&&H.$raise(f("ArgumentError"),"wrong number of arguments (0 for 1)"),L(f("Enumerator"),"new",[],function t(e){var r=t.$$s==null?this:t.$$s;e==null&&(e=s);var i=s,u=s;r.$each_cons.$$p=function(){var o=B.$destructure(arguments),y=o[0],j=o[1],D=M(a,[y,j]);u=j,i===s&&(i=[]),A(D)?(i.push(y),e.$yield(i),i=[]):i.push(y)},r.$each_cons(2),i!==s&&(i.push(u),e.$yield(i))},{$$s:$})}),Y(c,"$sort",function _(){var a=_.$$p||s,$=this,t=s;return _.$$p=null,t=$.$to_a(),a===s&&(a=S(function(r,i){return r==null&&(r=s),i==null&&(i=s),r["$<=>"](i)})),L(t,"sort",[],a.$to_proc())}),Y(c,"$sort_by",function _(){var a=_.$$p||s,$=this,t=s;return _.$$p=null,a===s?L($,"enum_for",["sort_by"],function e(){var r=e.$$s==null?this:e.$$s;return r.$enumerator_size()},{$$s:$}):(t=L($,"map",[],function(){var r=s;return r=B.$destructure(arguments),[n.yield1(a,r),r]}),L(t,"sort!",[],function(r,i){return r==null&&(r=s),i==null&&(i=s),r[0]["$<=>"](i[0])}),L(t,"map!",[],function(r){return r==null&&(r=s),r[1]}))}),Y(c,"$sum",function _(a){var $=_.$$p||s,t=this,e=s,r=s;return _.$$p=null,a==null&&(a=0),e=a,r=0,L(t,"each",[],function(u){var o,y,j=s,D=s,F=s;return o=K(arguments),y=o,j=$!==s?n.yieldX($,b(y)):B.$destructure(y),P([f(f("Float"),"INFINITY"),f(f("Float"),"INFINITY")["$-@"]()]["$include?"](j))&&A(j["$respond_to?"]("-"))?(D=z(j,r),F=I(e,D),r=z(z(F,e),D),e=F):e=I(e,j)},-1),e},-1),Y(c,"$take",function(a){var $=this;return $.$first(a)}),Y(c,"$take_while",function _(){try{var a=$e("return"),$=_.$$p||s,t=this,e=s;return _.$$p=null,A($)?(e=[],L(t,"each",[],function r(i){var u,o,y=s;return u=K(arguments),o=u,y=B.$destructure(o),A(n.yield1($,y))||a.$throw(e,r.$$is_lambda),e.push(y)},{$$arity:-1,$$ret:a})):t.$enum_for("take_while")}catch(r){if(r===a)return r.$v;throw r}finally{a.is_orphan=!0}}),Y(c,"$uniq",function _(){var a=_.$$p||s,$=this,t=s;return _.$$p=null,t=new Map,L($,"each",[],function(r){var i,u,o,y=s,j=s;return i=K(arguments),u=i,y=B.$destructure(u),j=a!==s?n.yield1(a,y):y,A(t["$key?"](j))?s:(o=[j,y],L(t,"[]=",o),o[o.length-1])},-1),t.$values()}),Y(c,"$tally",function(a){var $=this,t=s;return a&&a!==s&&Q(a),t=L(L($,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),A(a)?(L(t,"each",[],function(r,i){var u;return r==null&&(r=s),i==null&&(i=s),u=[r,I(a.$fetch(r,0),i)],L(a,"[]=",u),u[u.length-1]}),a):t},-1),Y(c,"$to_h",function _(a){var $=_.$$p||s,t,e,r=this;if(_.$$p=null,t=K(arguments),e=t,$!==s)return L(L(r,"map",[],$.$to_proc()),"to_h",b(e));var i=new Map;return r.$each.$$p=function(){var u=B.$destructure(arguments),o=B["$coerce_to?"](u,f("Array"),"to_ary"),y,j;o.$$is_array||H.$raise(f("TypeError"),"wrong element type "+u.$class()+" (expected array)"),o.length!==2&&H.$raise(f("ArgumentError"),"element has wrong array length (expected 2, was "+o.$length()+")"),y=o[0],j=o[1],n.hash_put(i,y,j)},r.$each.apply(r,e),i},-1),Y(c,"$to_set",function _(a,$){var t=_.$$p||s,e,r,i,u=this;return _.$$p=null,e=K(arguments),e.length>0&&(r=e.shift()),r==null&&(r=p("Set")),i=e,L(r,"new",[u].concat(b(i)),t.$to_proc())},-1),Y(c,"$zip",function _(a){_.$$p;var $,t,e=this;return _.$$p=null,$=K(arguments),t=$,L(e.$to_a(),"zip",b(t))},-1),q(c,"find","detect"),q(c,"filter","find_all"),q(c,"flat_map","collect_concat"),q(c,"map","collect"),q(c,"member?","include?"),q(c,"reduce","inject"),q(c,"select","find_all"),q(c,"to_a","entries")}("::",v)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(n){var A=n.klass,h=n.truthy,N=n.to_a,M=n.eqeq,Q=n.Kernel,W=n.def,L=n.rb_gt,K=n.rb_lt,b=n.rb_le,B=n.rb_ge,$e=n.rb_plus,Y=n.rb_minus,H=n.eqeqeq,ee=n.not,Z=n.rb_times,R=n.rb_divide,m=n.alias,k=[],I=n.nil,z=n.$$$;return n.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(U,w,S){var P=A(U,w,"Enumerator"),q=[P].concat(S);return function(v,s,f){var E=A(v,s,"ArithmeticSequence"),g=[E].concat(f),c=n.$r(g),l=E.$$prototype;l.step_arg2=l.receiver_num=l.step_arg1=l.step=l.range=l.topfx=l.bypfx=l.creation_method=l.skipped_arg=I,n.prop(E.$$prototype,"$$is_arithmetic_seq",!0);var p=1/0;return W(E,"$initialize",function(_,a,$){var t,e=this,r=I;return $==null&&($="step"),e.creation_method=$,h(_["$is_a?"](z("Array")))?(t=[].concat(N(_)),e.step_arg1=t[0]==null?I:t[0],e.step_arg2=t[1]==null?I:t[1],e.topfx=t[2]==null?I:t[2],e.bypfx=t[3]==null?I:t[3],e.receiver_num=a,e.step=1,e.range=h(e.step_arg2)?(e.step=e.step_arg2,n.Range.$new(e.receiver_num,e.step_arg1,!1)):h(e.step_arg1)?n.Range.$new(e.receiver_num,e.step_arg1,!1):n.Range.$new(e.receiver_num,I,!1)):(h(a)||(e.skipped_arg=!0),t=[_,h(r=a)?r:1],e.range=t[0],e.step=t[1]),e.object=e,M(e.step,0)&&Q.$raise(c("ArgumentError"),"step can't be 0"),h(e.step["$respond_to?"]("to_int"))?I:Q.$raise(c("ArgumentError"),"no implicit conversion of "+e.step.$class()+" into Integer")},-2),E.$attr_reader("step"),W(E,"$begin",function(){var _=this;return _.range.$begin()}),W(E,"$end",function(){var _=this;return _.range.$end()}),W(E,"$exclude_end?",function(){var _=this;return _.range["$exclude_end?"]()}),W(E,"$_lesser_than_end?",function(_){var a=this,$=I,t=I;return $=h(t=a.$end())?t:p,h(L(a.$step(),0))?h(a["$exclude_end?"]())?K(_,$):b(_,$):h(a["$exclude_end?"]())?L(_,$):B(_,$)}),W(E,"$_greater_than_begin?",function(_){var a=this,$=I,t=I;return $=h(t=a.$begin())?t:p["$-@"](),h(L(a.$step(),0))?L(_,$):K(_,$)}),W(E,"$first",function(_){var a=this,$=I,t=I,e=I;if($=h(t=a.$begin())?t:p["$-@"](),!h(_))return h(a["$_lesser_than_end?"]($))?$:I;for(e=[];h(h(t=a["$_lesser_than_end?"]($))?L(_,0):t);)e["$<<"]($),$=$e($,a.$step()),_=Y(_,1);return e},-1),W(E,"$each",function C(){var _=C.$$p||I,a=this,$=I,t=I;if(C.$$p=null,_===I)return a;for(H(I,$=a.$begin())&&Q.$raise(c("TypeError"),"nil can't be coerced into Integer"),t=h($=a.$begin())?$:p["$-@"]();h(a["$_lesser_than_end?"](t));)n.yield1(_,t),t=$e(t,a.$step());return a}),W(E,"$last",function(_){var a=this,$=I,t=I,e=I;if(H(p,$=a.$end())||H(p["$-@"](),$)?Q.$raise(z("FloatDomainError"),a.$end()):H(I,$)&&Q.$raise(z("RangeError"),"cannot get the last element of endless arithmetic sequence"),t=Y(a.$end(),Y(a.$end(),a.$begin())["$%"](a.$step())),h(a["$_lesser_than_end?"](t))||(t=Y(t,a.$step())),!h(_))return h(a["$_greater_than_begin?"](t))?t:I;for(e=[];h(h($=a["$_greater_than_begin?"](t))?L(_,0):$);)e["$<<"](t),t=Y(t,a.$step()),_=Y(_,1);return e.$reverse()},-1),W(E,"$size",function(){var _=this,a=I,$=I;return a=h(L(_.$step(),0))?1:-1,ee(_["$_lesser_than_end?"](_.$begin()))?0:h([p["$-@"](),p]["$include?"](_.$step()))?1:h([Z(p["$-@"](),a),I]["$include?"](_.$begin()))||h([Z(p,a),I]["$include?"](_.$end()))?p:($=Y(_.$end(),Y(_.$end(),_.$begin())["$%"](_.$step())),h(_["$_lesser_than_end?"]($))||($=Y($,_.$step())),$e(R(Y($,_.$begin()),_.$step()).$abs().$to_i(),1))}),W(E,"$==",function(_){var a=this,$=I,t=I,e=I,r=I;return h($=h(t=h(e=h(r=a.$class()["$=="](_.$class()))?a.$begin()["$=="](_.$begin()):r)?a.$end()["$=="](_.$end()):e)?a.$step()["$=="](_.$step()):t)?a["$exclude_end?"]()["$=="](_["$exclude_end?"]()):$}),W(E,"$hash",function(){var _=this;return[c("ArithmeticSequence"),_.$begin(),_.$end(),_.$step(),_["$exclude_end?"]()].$hash()}),W(E,"$inspect",function(){var _=this,a=I;return h(_.receiver_num)?(a=h(_.step_arg2)?"("+_.topfx+_.step_arg1.$inspect()+", "+_.bypfx+_.step_arg2.$inspect()+")":h(_.step_arg1)?"("+_.topfx+_.step_arg1.$inspect()+")":I,"("+_.receiver_num.$inspect()+"."+_.creation_method+a+")"):(a=h(_.skipped_arg)?I:"("+_.step+")","(("+_.range.$inspect()+")."+_.creation_method+a+")")}),m(E,"===","=="),m(E,"eql?","==")}(P,P,q)}("::",null,k)};Opal.modules["corelib/enumerator/chain"]=function(n){var A=n.deny_frozen_access,h=n.klass,N=n.slice,M=n.def,Q=n.send,W=n.to_a,L=n.truthy,K=n.rb_plus,b=n.thrower,B=n.nil,$e=n.$$$;return n.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(Y,H){var ee=h(Y,H,"Enumerator");return function(Z,R){var m=h(Z,R,"Chain"),k=m.$$prototype;return k.enums=k.iterated=B,M(m,"$initialize",function(z){var U,w,S=this;return U=N(arguments),w=U,A(S),S.enums=w,S.iterated=[],S.object=S},-1),M(m,"$each",function I(z){var U=I.$$p||B,w,S,P=this;return I.$$p=null,w=N(arguments),S=w,U===B?Q(P,"to_enum",["each"].concat(W(S)),function q(){var v=q.$$s==null?this:q.$$s;return v.$size()},{$$s:P}):(Q(P.enums,"each",[],function q(v){var s=q.$$s==null?this:q.$$s;return s.iterated==null&&(s.iterated=B),v==null&&(v=B),s.iterated["$<<"](v),Q(v,"each",W(S),U.$to_proc())},{$$s:P}),P)},-1),M(m,"$size",function(z){try{var U=b("return"),w,S,P=this,q=B;return w=N(arguments),S=w,q=0,Q(P.enums,"each",[],function v(s){var f=B;return s==null&&(s=B),f=Q(s,"size",W(S)),L([B,$e($e("Float"),"INFINITY")]["$include?"](f))&&U.$throw(f,v.$$is_lambda),q=K(q,f)},{$$ret:U}),q}catch(v){if(v===U)return v.$v;throw v}finally{U.is_orphan=!0}},-1),M(m,"$rewind",function(){var z=this;return Q(z.iterated,"reverse_each",[],function(w){return w==null&&(w=B),L(w["$respond_to?"]("rewind"))?w.$rewind():B}),z.iterated=[],z}),M(m,"$inspect",function(){var z=this;return"#<Enumerator::Chain: "+z.enums.$inspect()+">"})}(ee,ee)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(n){var A=n.deny_frozen_access,h=n.klass,N=n.truthy,M=n.Kernel,Q=n.def,W=n.slice,L=n.send,K=[],b=n.nil,B=n.$$$;return n.add_stubs("include,raise,new,to_proc"),function($e,Y,H){var ee=h($e,Y,"Enumerator"),Z=[ee].concat(H);return function(R,m,k){var I=h(R,m,"Generator"),z=[I].concat(k),U=n.$r(z),w=I.$$prototype;return w.block=b,I.$include(B("Enumerable")),Q(I,"$initialize",function S(){var P=S.$$p||b,q=this;return S.$$p=null,A(q),N(P)||M.$raise(B("LocalJumpError"),"no block given"),q.block=P}),Q(I,"$each",function S(P){var q=S.$$p||b,v,s,f=this,E=b;S.$$p=null,v=W(arguments),s=v,E=L(U("Yielder"),"new",[],q.$to_proc());try{s.unshift(E),n.yieldX(f.block,s)}catch(g){if(g&&g.$thrower_type=="breaker")return g.$v;throw g}return f},-1)}(Z[0],null,Z)}(K[0],null,K)};Opal.modules["corelib/enumerator/lazy"]=function(n){var A=n.truthy,h=n.coerce_to,N=n.yield1,M=n.yieldX,Q=n.deny_frozen_access,W=n.klass,L=n.slice,K=n.send2,b=n.find_super,B=n.to_a,$e=n.defs,Y=n.Kernel,H=n.send,ee=n.def,Z=n.return_self,R=n.Opal,m=n.rb_lt,k=n.eqeqeq,I=n.rb_plus,z=n.alias,U=[],w=n.nil,S=n.$$$;return n.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(P,q,v){var s=W(P,q,"Enumerator"),f=[s].concat(v);return function(E,g,c){var l=W(E,g,"Lazy"),p=[l].concat(c),C=n.$r(p),_=l.$$prototype;return _.enumerator=w,W(l,S("Exception"),"StopLazyError"),$e(l,"$for",function a($,t){var e,r,i=a.$$p||w,u=this,o=w;return a.$$p=null,e=L(arguments,1),r=e,o=K(u,b(u,"for",a,!1,!0),"for",[$].concat(B(r)),i),o.enumerator=$,o},-2),ee(l,"$initialize",function a($,t){var e=a.$$p||w,r=this;return a.$$p=null,t==null&&(t=w),Q(r),e===w&&Y.$raise(S("ArgumentError"),"tried to call lazy new without a block"),r.enumerator=$,K(r,b(r,"initialize",a,!1,!0),"initialize",[t],function(u,o){var y,j;u==null&&(u=w),y=L(arguments,1),j=y;try{return H($,"each",B(j),function(F){var G,re;G=L(arguments),re=G,re.unshift(u),M(e,re)},-1)}catch(D){if(n.rescue(D,[C("StopLazyError")]))try{return w}finally{n.pop_exception(D)}else throw D}},-2)},-2),ee(l,"$lazy",Z),ee(l,"$collect",function a(){var $=a.$$p||w,t=this;return a.$$p=null,A($)||Y.$raise(S("ArgumentError"),"tried to call lazy map without a block"),H(C("Lazy"),"new",[t,t.$enumerator_size()],function(r,i){var u,o;r==null&&(r=w),u=L(arguments,1),o=u;var y=M($,o);r.$yield(y)},-2)}),ee(l,"$collect_concat",function a(){var $=a.$$p||w,t=this;return a.$$p=null,A($)||Y.$raise(S("ArgumentError"),"tried to call lazy map without a block"),H(C("Lazy"),"new",[t,w],function(r,i){var u,o;r==null&&(r=w),u=L(arguments,1),o=u;var y=M($,o);if(y["$respond_to?"]("force")&&y["$respond_to?"]("each"))H(y,"each",[],function(F){return F==null&&(F=w),r.$yield(F)});else{var j=R.$try_convert(y,S("Array"),"to_ary");j===w?r.$yield(y):H(y,"each",[],function(F){return F==null&&(F=w),r.$yield(F)})}},-2)}),ee(l,"$drop",function($){var t=this,e=w,r=w,i=w;return $=h($,S("Integer"),"to_int"),A(m($,0))&&Y.$raise(S("ArgumentError"),"attempt to drop negative size"),e=t.$enumerator_size(),r=k(S("Integer"),e)&&A(m($,e))?$:e,i=0,H(C("Lazy"),"new",[t,r],function(o,y){var j,D;return o==null&&(o=w),j=L(arguments,1),D=j,A(m(i,$))?i=I(i,1):H(o,"yield",B(D))},-2)}),ee(l,"$drop_while",function a(){var $=a.$$p||w,t=this,e=w;return a.$$p=null,A($)||Y.$raise(S("ArgumentError"),"tried to call lazy drop_while without a block"),e=!0,H(C("Lazy"),"new",[t,w],function(i,u){var o,y;if(i==null&&(i=w),o=L(arguments,1),y=o,A(e)){var j=M($,y);A(j)||(e=!1,H(i,"yield",B(y)))}else return H(i,"yield",B(y))},-2)}),ee(l,"$enum_for",function a($,t){var e=a.$$p||w,r,i,u,o=this;return a.$$p=null,r=L(arguments),r.length>0&&(i=r.shift()),i==null&&(i="each"),u=r,H(o.$class(),"for",[o,i].concat(B(u)),e.$to_proc())},-1),ee(l,"$find_all",function a(){var $=a.$$p||w,t=this;return a.$$p=null,A($)||Y.$raise(S("ArgumentError"),"tried to call lazy select without a block"),H(C("Lazy"),"new",[t,w],function(r,i){var u,o;r==null&&(r=w),u=L(arguments,1),o=u;var y=M($,o);A(y)&&H(r,"yield",B(o))},-2)}),ee(l,"$grep",function a($){var t=a.$$p||w,e=this;return a.$$p=null,A(t)?H(C("Lazy"),"new",[e,w],function(i,u){var o,y;i==null&&(i=w),o=L(arguments,1),y=o;var j=R.$destructure(y),D=$["$==="](j);A(D)&&(D=N(t,j),i.$yield(N(t,j)))},-2):H(C("Lazy"),"new",[e,w],function(i,u){var o,y;i==null&&(i=w),o=L(arguments,1),y=o;var j=R.$destructure(y),D=$["$==="](j);A(D)&&i.$yield(j)},-2)}),ee(l,"$reject",function a(){var $=a.$$p||w,t=this;return a.$$p=null,A($)||Y.$raise(S("ArgumentError"),"tried to call lazy reject without a block"),H(C("Lazy"),"new",[t,w],function(r,i){var u,o;r==null&&(r=w),u=L(arguments,1),o=u;var y=M($,o);A(y)||H(r,"yield",B(o))},-2)}),ee(l,"$take",function($){var t=this,e=w,r=w,i=w;return $=h($,S("Integer"),"to_int"),A(m($,0))&&Y.$raise(S("ArgumentError"),"attempt to take negative size"),e=t.$enumerator_size(),r=k(S("Integer"),e)&&A(m($,e))?$:e,i=0,H(C("Lazy"),"new",[t,r],function(o,y){var j,D;return o==null&&(o=w),j=L(arguments,1),D=j,A(m(i,$))?(H(o,"yield",B(D)),i=I(i,1)):Y.$raise(C("StopLazyError"))},-2)}),ee(l,"$take_while",function a(){var $=a.$$p||w,t=this;return a.$$p=null,A($)||Y.$raise(S("ArgumentError"),"tried to call lazy take_while without a block"),H(C("Lazy"),"new",[t,w],function(r,i){var u,o;r==null&&(r=w),u=L(arguments,1),o=u;var y=M($,o);A(y)?H(r,"yield",B(o)):Y.$raise(C("StopLazyError"))},-2)}),ee(l,"$inspect",function(){var $=this;return"#<"+$.$class()+": "+$.enumerator.$inspect()+">"}),z(l,"force","to_a"),z(l,"filter","find_all"),z(l,"flat_map","collect_concat"),z(l,"map","collect"),z(l,"select","find_all"),z(l,"to_enum","enum_for")}(s,s,f)}("::",null,U)};Opal.modules["corelib/enumerator/yielder"]=function(n){var A=n.klass,h=n.def,N=n.slice,M=n.send,Q=n.to_a,W=[],L=n.nil;return n.add_stubs("yield,proc"),function(K,b,B){var $e=A(K,b,"Enumerator"),Y=[$e].concat(B);return function(H,ee){var Z=A(H,ee,"Yielder"),R=Z.$$prototype;return R.block=L,h(Z,"$initialize",function m(){var k=m.$$p||L,I=this;return m.$$p=null,I.block=k,I}),h(Z,"$yield",function(k){var I,z,U=this;I=N(arguments),z=I;var w=n.yieldX(U.block,z);if(w&&w.$thrower_type=="break")throw w;return w},-1),h(Z,"$<<",function(k){var I=this;return I.$yield(k),I}),h(Z,"$to_proc",function(){var k=this;return M(k,"proc",[],function I(z){var U,w,S=I.$$s==null?this:I.$$s;return U=N(arguments),w=U,M(S,"yield",Q(w))},{$$arity:-1,$$s:k})})}(Y[0],null)}(W[0],null,W)};Opal.modules["corelib/enumerator"]=function(n){var A=n.slice,h=n.coerce_to,N=n.deny_frozen_access,M=n.klass,Q=n.defs,W=n.truthy,L=n.send,K=n.not,b=n.def,B=n.rb_plus,$e=n.to_a,Y=n.Opal,H=n.send2,ee=n.find_super,Z=n.rb_ge,R=n.Kernel,m=n.rb_le,k=n.alias,I=n.top,z=[],U=n.nil,w=n.$$$;return n.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),I.$require("corelib/enumerable"),function(S,P,q){var v=M(S,P,"Enumerator"),s=[v].concat(q),f=n.$r(s),E=v.$$prototype;return E.size=E.args=E.object=E.method=E.values=E.cursor=U,v.$include(w("Enumerable")),v.$$prototype.$$is_enumerator=!0,Q(v,"$for",function g(c,l,p){var C=g.$$p||U,_,a,$,t=this;g.$$p=null,_=A(arguments,1),_.length>0&&(a=_.shift()),a==null&&(a="each"),$=_;var e=t.$allocate();return e.object=c,e.size=C,e.method=a,e.args=$,e.cursor=0,e},-2),b(v,"$initialize",function g(c){var l=g.$$p||U,p=this;return g.$$p=null,A(arguments),N(p),p.cursor=0,W(l)?(p.object=L(f("Generator"),"new",[],l.$to_proc()),p.method="each",p.args=[],p.size=arguments[0]||U,W(p.size)&&K(p.size["$respond_to?"]("call"))?p.size=h(p.size,w("Integer"),"to_int"):U):(p.object=arguments[0],p.method=arguments[1]||"each",p.args=A(arguments,2),p.size=U)},-1),b(v,"$each",function g(c){var l=g.$$p||U,p,C,_=this;return g.$$p=null,p=A(arguments),C=p,W(l["$nil?"]())&&W(C["$empty?"]())?_:(C=B(_.args,C),W(l["$nil?"]())?L(_.$class(),"new",[_.object,_.method].concat($e(C))):L(_.object,"__send__",[_.method].concat($e(C)),l.$to_proc()))},-1),b(v,"$size",function(){var c=this;return W(c.size["$respond_to?"]("call"))?L(c.size,"call",$e(c.args)):c.size}),b(v,"$with_index",function g(c){var l=g.$$p||U,p=this;if(g.$$p=null,c==null&&(c=0),c=W(c)?h(c,w("Integer"),"to_int"):0,!W(l))return L(p,"enum_for",["with_index",c],function _(){var a=_.$$s==null?this:_.$$s;return a.$size()},{$$s:p});var C=c;return p.$each.$$p=function(){var _=Y.$destructure(arguments),a=l(_,C);return C++,a},p.$each()},-1),b(v,"$each_with_index",function g(){var c=g.$$p||U,l=this;return g.$$p=null,c===U?L(l,"enum_for",["each_with_index"],function p(){var C=p.$$s==null?this:p.$$s;return C.$size()},{$$s:l}):(H(l,ee(l,"each_with_index",g,!1,!0),"each_with_index",[],c),l.object)}),b(v,"$rewind",function(){var c=this;return c.cursor=0,c}),b(v,"$peek_values",function(){var c=this,l=U;return c.values=W(l=c.values)?l:L(c,"map",[],function(C){var _,a;return _=A(arguments),a=_,a},-1),W(Z(c.cursor,c.values.$length()))&&R.$raise(w("StopIteration"),"iteration reached an end"),c.values["$[]"](c.cursor)}),b(v,"$peek",function(){var c=this,l=U;return l=c.$peek_values(),W(m(l.$length(),1))?l["$[]"](0):l}),b(v,"$next_values",function(){var c=this,l=U;return l=c.$peek_values(),c.cursor=B(c.cursor,1),l}),b(v,"$next",function(){var c=this,l=U;return l=c.$next_values(),W(m(l.$length(),1))?l["$[]"](0):l}),b(v,"$feed",function(c){var l=this;return l.$raise(f("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),b(v,"$+",function(c){var l=this;return w(w("Enumerator"),"Chain").$new(l,c)}),b(v,"$inspect",function(){var c=this,l=U;return l="#<"+c.$class()+": "+c.object.$inspect()+":"+c.method,W(c.args["$any?"]())&&(l=B(l,"("+c.args.$inspect()["$[]"](w("Range").$new(1,-2))+")")),B(l,">")}),k(v,"with_object","each_with_object"),v.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),v.$autoload("Chain","corelib/enumerator/chain"),v.$autoload("Generator","corelib/enumerator/generator"),v.$autoload("Lazy","corelib/enumerator/lazy"),v.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,z)};Opal.modules["corelib/numeric"]=function(n){var A=n.klass,h=n.truthy,N=n.Kernel,M=n.def,Q=n.to_ary,W=n.return_self,L=n.rb_minus,K=n.rb_times,b=n.rb_lt,B=n.eqeq,$e=n.rb_divide,Y=n.return_val,H=n.Opal,ee=n.slice,Z=n.extract_kwargs,R=n.ensure_kwargs,m=n.hash_get,k=n.not,I=n.send,z=n.rb_ge,U=n.rb_le,w=n.rb_plus,S=n.rb_gt,P=n.alias,q=n.top,v=n.nil,s=n.$$$;return n.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),q.$require("corelib/comparable"),function(f,E){var g=A(f,E,"Numeric");return g.$include(s("Comparable")),M(g,"$coerce",function(l){var p=this;return h(l["$instance_of?"](p.$class()))?[l,p]:[N.$Float(l),N.$Float(p)]}),M(g,"$__coerced__",function(l,p){var C,_,a=this,$=v,t=v;if(h(p["$respond_to?"]("coerce")))return _=p.$coerce(a),C=Q(_),$=C[0]==null?v:C[0],t=C[1]==null?v:C[1],$.$__send__(l,t);switch(l.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return N.$raise(s("TypeError"),""+p.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return N.$raise(s("ArgumentError"),"comparison of "+a.$class()+" with "+p.$class()+" failed");default:return v}}),M(g,"$<=>",function(l){var p=this;return h(p["$equal?"](l))?0:v}),M(g,"$+@",W),M(g,"$-@",function(){var l=this;return L(0,l)}),M(g,"$%",function(l){var p=this;return L(p,K(l,p.$div(l)))}),M(g,"$abs",function(){var l=this;return h(b(l,0))?l["$-@"]():l}),M(g,"$abs2",function(){var l=this;return K(l,l)}),M(g,"$angle",function(){var l=this;return h(b(l,0))?s(s("Math"),"PI"):0}),M(g,"$ceil",function(l){var p=this;return l==null&&(l=0),p.$to_f().$ceil(l)},-1),M(g,"$conj",W),M(g,"$denominator",function(){var l=this;return l.$to_r().$denominator()}),M(g,"$div",function(l){var p=this;return B(l,0)&&N.$raise(s("ZeroDivisionError"),"divided by o"),$e(p,l).$floor()}),M(g,"$divmod",function(l){var p=this;return[p.$div(l),p["$%"](l)]}),M(g,"$fdiv",function(l){var p=this;return $e(p.$to_f(),l)}),M(g,"$floor",function(l){var p=this;return l==null&&(l=0),p.$to_f().$floor(l)},-1),M(g,"$i",function(){var l=this;return N.$Complex(0,l)}),M(g,"$imag",Y(0)),M(g,"$integer?",Y(!1)),M(g,"$nonzero?",function(){var l=this;return h(l["$zero?"]())?v:l}),M(g,"$numerator",function(){var l=this;return l.$to_r().$numerator()}),M(g,"$polar",function(){var l=this;return[l.$abs(),l.$arg()]}),M(g,"$quo",function(l){var p=this;return $e(H["$coerce_to!"](p,s("Rational"),"to_r"),l)}),M(g,"$real",W),M(g,"$real?",Y(!0)),M(g,"$rect",function(){var l=this;return[l,0]}),M(g,"$round",function(l){var p=this;return p.$to_f().$round(l)},-1),M(g,"$step",function c(l,p,C){var _=c.$$p||v,a,$,t,e,r,i,u=this,o=v;c.$$p=null,a=ee(arguments),$=Z(a),$=R($),a.length>0&&(t=a.shift()),a.length>0&&(e=a.shift()),r=m($,"to"),i=m($,"by"),t!==void 0&&r!==void 0&&N.$raise(s("ArgumentError"),"to is given twice"),e!==void 0&&i!==void 0&&N.$raise(s("ArgumentError"),"step is given twice"),r!==void 0&&(t=r),i!==void 0&&(e=i),t===void 0&&(t=v);function y(){e===v&&N.$raise(s("TypeError"),"step must be numeric"),e!=null&&e["$=="](0)&&N.$raise(s("ArgumentError"),"step can't be 0"),(e===v||e==null)&&(e=1);var he=e["$<=>"](0);he===v&&N.$raise(s("ArgumentError"),"0 can't be coerced into "+e.$class()),(t===v||t==null)&&(t=he>0?s(s("Float"),"INFINITY"):s(s("Float"),"INFINITY")["$-@"]()),H.$compare(u,t)}function j(){if(e>0&&u>t||e<0&&u<t)return 0;if(e===1/0||e===-1/0)return 1;var he=Math.abs,ve=Math.floor,me=(he(u)+he(t)+he(t-u))/he(e)*s(s("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((t-u)/e+me)+1)}function D(){if(y(),e===0)return 1/0;if(e%1!==0)return j();if(e>0&&u>t||e<0&&u<t)return 0;var he=Math.ceil,ve=Math.abs,me=ve(u-t)+1,be=ve(e);return he(me/be)}if(_===v)return(k(t)||h(t["$is_a?"](s("Numeric"))))&&(k(e)||h(e["$is_a?"](s("Numeric"))))?s(s("Enumerator"),"ArithmeticSequence").$new([t,e,h(r)?"to: ":v,h(i)?"by: ":v],u):I(u,"enum_for",["step",t,e],D.$to_proc());y();var F=e["$negative?"](),G=e["$=="](0)||t===1/0&&!F||t===-1/0&&F;if(u.$$is_number&&e.$$is_number&&t.$$is_number)if(u%1===0&&(G||t%1===0)&&e%1===0){var re=u;if(G)for(;;re+=e)_(re);else if(F)for(;re>=t;re+=e)_(re);else for(;re<=t;re+=e)_(re);return u}else{var ae=u.$to_f().valueOf();e=e.$to_f().valueOf(),t=t.$to_f().valueOf();var le=j();if(!isFinite(e))le!==0&&_(ae);else if(e===0)for(;;)_(ae);else for(var ce=0;ce<le;ce++){var de=ce*e+u;(e>=0?t<de:t>de)&&(de=t),_(de)}return u}for(o=u;h(F?z(o,t):U(o,t));)n.yield1(_,o),o=w(o,e)},-1),M(g,"$to_c",function(){var l=this;return N.$Complex(l,0)}),M(g,"$to_int",function(){var l=this;return l.$to_i()}),M(g,"$truncate",function(l){var p=this;return l==null&&(l=0),p.$to_f().$truncate(l)},-1),M(g,"$zero?",function(){var l=this;return l["$=="](0)}),M(g,"$positive?",function(){var l=this;return S(l,0)}),M(g,"$negative?",function(){var l=this;return b(l,0)}),M(g,"$dup",W),M(g,"$clone",function(l){var p=this;return l=R(l),m(l,"freeze"),p},-1),M(g,"$finite?",Y(!0)),M(g,"$infinite?",Y(v)),P(g,"arg","angle"),P(g,"conjugate","conj"),P(g,"imaginary","imag"),P(g,"magnitude","abs"),P(g,"modulo","%"),P(g,"phase","arg"),P(g,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(n){var A=n.truthy,h=n.falsy,N=n.yield1,M=n.hash_get,Q=n.hash_put,W=n.hash_delete,L=n.coerce_to,K=n.respond_to,b=n.deny_frozen_access,B=n.freeze,$e=n.opal32_init,Y=n.opal32_add,H=n.klass,ee=n.slice,Z=n.defs,R=n.Kernel,m=n.def,k=n.Opal,I=n.eqeqeq,z=n.send2,U=n.find_super,w=n.send,S=n.rb_gt,P=n.rb_times,q=n.eqeq,v=n.rb_minus,s=n.to_a,f=n.to_ary,E=n.gvars,g=n.rb_ge,c=n.assign_ivar,l=n.rb_lt,p=n.return_self,C=n.neqeq,_=n.alias,a=n.top,$=[],t=n.nil,e=n.$$$;return n.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),a.$require("corelib/enumerable"),a.$require("corelib/numeric"),function(r,i,u){var o=H(r,i,"Array"),y=[o].concat(u),j=n.$r(y);o.$include(e("Enumerable")),n.prop(o.$$prototype,"$$is_array",!0);function D(ie){for(var T=ie[0],V=1,X=ie.length;V<X;V++)ie[V-1]=ie[V];return ie.pop(),T}function F(ie,T){return T.$$name===n.Array?ie:T.$allocate().$replace(ie.$to_a())}function G(ie,T,V){for(var X,O=null,ne=new Array(ie.length),se=0,oe=0;se<ie.length;se++){if(!O)try{X=N(V,ie[se])}catch(fe){O=fe}(O||T(X))&&(ne[oe]=ie[se],oe+=1)}if(oe!==se&&(ie.splice.apply(ie,[0,ne.length].concat(ne)),ie.splice(oe,ne.length)),O)throw O}function re(ie){return ie.$$is_array||(ie=L(ie,e("Array"),"to_ary")),ie.$to_a()}function ae(ie,T){var V=T.length;if(V>6&&V<32767)ie.push.apply(ie,T);else for(var X=0;X<V;X++)ie.push(T[X])}Z(o,"$[]",function(T){var V,X,O=this;return V=ee(arguments),X=V,F(X,O)},-1),m(o,"$initialize",function ie(T,V){var X=ie.$$p||t,O=this;if(ie.$$p=null,T==null&&(T=t),V==null&&(V=t),b(O),V!==t&&X!==t&&R.$warn("warning: block supersedes default value argument"),T>e(e("Integer"),"MAX")&&R.$raise(e("ArgumentError"),"array size too big"),arguments.length>2&&R.$raise(e("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return O.length>0&&O.splice(0,O.length),O;if(arguments.length===1){if(T.$$is_array)return O.$replace(T.$to_a()),O;if(T["$respond_to?"]("to_ary"))return O.$replace(T.$to_ary()),O}T=L(T,e("Integer"),"to_int"),T<0&&R.$raise(e("ArgumentError"),"negative array size"),O.splice(0,O.length);var ne,se;if(X===t)for(ne=0;ne<T;ne++)O.push(V);else for(ne=0,se;ne<T;ne++)se=X(ne),O[ne]=se;return O},-1),Z(o,"$try_convert",function(T){return k["$coerce_to?"](T,e("Array"),"to_ary")}),m(o,"$&",function(T){var V=this;if(T=re(T),V.length===0||T.length===0)return[];var X=[],O=new Map,ne,se,oe;for(ne=0,se=T.length;ne<se;ne++)Q(O,T[ne],!0);for(ne=0,se=V.length;ne<se;ne++)oe=V[ne],W(O,oe)!==void 0&&X.push(oe);return X}),m(o,"$|",function(T){var V=this;T=re(T);var X=new Map,O,ne;for(O=0,ne=V.length;O<ne;O++)Q(X,V[O],!0);for(O=0,ne=T.length;O<ne;O++)Q(X,T[O],!0);return X.$keys()}),m(o,"$*",function(T){var V=this;if(A(T["$respond_to?"]("to_str")))return V.$join(T.$to_str());T=L(T,e("Integer"),"to_int"),A(T<0)&&R.$raise(e("ArgumentError"),"negative argument");for(var X=[],O=V.$to_a(),ne=0;ne<T;ne++)X=X.concat(O);return X}),m(o,"$+",function(T){var V=this;return T=re(T),V.concat(T)}),m(o,"$-",function(T){var V=this;if(T=re(T),A(V.length===0))return[];if(A(T.length===0))return V.slice();var X=[],O=new Map,ne,se,oe;for(ne=0,se=T.length;ne<se;ne++)Q(O,T[ne],!0);for(ne=0,se=V.length;ne<se;ne++)oe=V[ne],M(O,oe)===void 0&&X.push(oe);return X}),m(o,"$<<",function(T){var V=this;return b(V),V.push(T),V}),m(o,"$<=>",function(T){var V=this;if(I(e("Array"),T))T=T.$to_a();else if(A(T["$respond_to?"]("to_ary")))T=T.$to_ary().$to_a();else return t;if(V===T)return 0;for(var X=Math.min(V.length,T.length),O=0;O<X;O++){var ne=V[O]["$<=>"](T[O]);if(ne!==0)return ne}return V.length["$<=>"](T.length)}),m(o,"$==",function(T){var V=this,X={};function O(ne,se){var oe,fe,d,x;if(ne===se)return!0;if(!se.$$is_array)return K(se,"$to_ary")?se["$=="](ne):!1;if(ne.$$constructor!==Array&&(ne=ne.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),ne.length!==se.length)return!1;for(X[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(d=ne[oe],x=se[oe],d.$$is_array){if(x.$$is_array&&x.length!==d.length||!X.hasOwnProperty(d.$object_id())&&!O(d,x))return!1}else if(!d["$=="](x))return!1;return!0}return O(V,T)});function le(ie,T){var V=ie.length,X,O,ne,se;return X=T.excl,O=T.begin===t?0:L(T.begin,n.Integer,"to_int"),ne=T.end===t?-1:L(T.end,n.Integer,"to_int"),O<0&&(O+=V,O<0)||(T.excl_rev&&T.begin!==t&&(O+=1),O>V)?t:ne<0&&(ne+=V,ne<0)?[]:((!X||T.end===t)&&(ne+=1),se=ie.slice(O,ne),se)}function ce(ie,T){var V,X=[],O=0,ne;for(T.step<0?(ne={begin:T.range.end,end:T.range.begin,excl:!1,excl_rev:T.range.excl},V=le(ie,ne).$reverse()):V=le(ie,T.range);O<V.length;)X.push(V[O]),O+=Math.abs(T.step);return X}function de(ie,T,V){var X=ie.length,O;return T=L(T,n.Integer,"to_int"),T<0&&(T+=X,T<0)?t:V===void 0?T>=X||T<0?t:ie[T]:(V=L(V,n.Integer,"to_int"),V<0||T>X||T<0?t:(O=ie.slice(T,T+V),O))}m(o,"$[]",function(T,V){var X=this;return T.$$is_range?le(X,T):T.$$is_arithmetic_seq?ce(X,T):de(X,T,V)},-2),m(o,"$[]=",function(T,V,X){var O=this,ne=t,se=t;b(O),ne=t;var oe,fe=O.length;if(T.$$is_range){V.$$is_array?ne=V.$to_a():V["$respond_to?"]("to_ary")?ne=V.$to_ary().$to_a():ne=[V];var d=T.excl,x=T.begin===t?0:L(T.begin,n.Integer,"to_int"),J=T.end===t?-1:L(T.end,n.Integer,"to_int");if(x<0&&(x+=fe,x<0&&R.$raise(e("RangeError"),""+T.$inspect()+" out of range")),J<0&&(J+=fe),(!d||T.end===t)&&(J+=1),x>fe)for(oe=fe;oe<x;oe++)O[oe]=t;return J<0?O.splice.apply(O,[x,0].concat(ne)):O.splice.apply(O,[x,J-x].concat(ne)),V}else{X===void 0?se=1:(se=V,V=X,V.$$is_array?ne=V.$to_a():V["$respond_to?"]("to_ary")?ne=V.$to_ary().$to_a():ne=[V]);var te;if(T=L(T,e("Integer"),"to_int"),se=L(se,e("Integer"),"to_int"),T<0&&(te=T,T+=fe,T<0&&R.$raise(e("IndexError"),"index "+te+" too small for array; minimum "+-O.length)),se<0&&R.$raise(e("IndexError"),"negative length ("+se+")"),T>fe)for(oe=fe;oe<T;oe++)O[oe]=t;return X===void 0?O[T]=V:O.splice.apply(O,[T,se].concat(ne)),V}},-3),m(o,"$any?",function ie(T){var V=ie.$$p||t,X=this;return ie.$$p=null,X.length===0?!1:z(X,U(X,"any?",ie,!1,!0),"any?",[T],V)},-1),m(o,"$assoc",function(T){for(var V=this,X=0,O=V.length,ne;X<O;X++)if(ne=V[X],ne.length&&ne[0]["$=="](T))return ne;return t}),m(o,"$at",function(T){var V=this;return T=L(T,e("Integer"),"to_int"),T<0&&(T+=V.length),T<0||T>=V.length?t:V[T]}),m(o,"$bsearch_index",function ie(){var T=ie.$$p||t,V=this;if(ie.$$p=null,T===t)return V.$enum_for("bsearch_index");for(var X=0,O=V.length,ne,se,oe,fe=!1,d=t;X<O;){if(ne=X+Math.floor((O-X)/2),se=V[ne],oe=N(T,se),oe===!0)d=ne,fe=!0;else if(oe===!1||oe===t)fe=!1;else if(oe.$$is_number){if(oe===0)return ne;fe=oe<0}else R.$raise(e("TypeError"),"wrong argument type "+oe.$class()+" (must be numeric, true, false or nil)");fe?O=ne:X=ne+1}return d}),m(o,"$bsearch",function ie(){var T=ie.$$p||t,V=this,X=t;return ie.$$p=null,T===t?V.$enum_for("bsearch"):(X=w(V,"bsearch_index",[],T.$to_proc()),X!=null&&X.$$is_number?V[X]:X)}),m(o,"$cycle",function ie(T){var V=ie.$$p||t,X=this;if(ie.$$p=null,T==null&&(T=t),V===t)return w(X,"enum_for",["cycle",T],function se(){var oe=se.$$s==null?this:se.$$s;return A(T["$nil?"]())?e(e("Float"),"INFINITY"):(T=k["$coerce_to!"](T,e("Integer"),"to_int"),A(S(T,0))?P(oe.$enumerator_size(),T):0)},{$$s:X});if(A(X["$empty?"]())||q(T,0))return t;var O,ne;if(T===t)for(;;)for(O=0,ne=X.length;O<ne;O++)N(V,X[O]);else{if(T=k["$coerce_to!"](T,e("Integer"),"to_int"),T<=0)return X;for(;T>0;){for(O=0,ne=X.length;O<ne;O++)N(V,X[O]);T--}}return X},-1),m(o,"$clear",function(){var T=this;return b(T),T.splice(0,T.length),T}),m(o,"$count",function ie(T){var V=ie.$$p||t,X=this;return ie.$$p=null,A(T!==void 0)||A(V)?z(X,U(X,"count",ie,!1,!0),"count",[T],V):X.$size()},-1),m(o,"$initialize_copy",function(T){var V=this;return V.$replace(T)}),m(o,"$collect",function ie(){var T=ie.$$p||t,V=this;if(ie.$$p=null,T===t)return w(V,"enum_for",["collect"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:V});for(var X=[],O=0;O<V.length;O++){var ne=N(T,V[O]);X[O]=ne}return X}),m(o,"$collect!",function ie(){var T=ie.$$p||t,V=this;if(ie.$$p=null,T===t)return w(V,"enum_for",["collect!"],function ne(){var se=ne.$$s==null?this:ne.$$s;return se.$size()},{$$s:V});b(V);for(var X=0;X<V.length;X++){var O=N(T,V[X]);V[X]=O}return V});function he(ie,T){return ie===T||T===0?1:T>0&&ie>T?he(ie-1,T-1)+he(ie-1,T):0}m(o,"$combination",function ie(T){var V=ie.$$p||t,X=this,O=t;if(ie.$$p=null,O=k["$coerce_to!"](T,e("Integer"),"to_int"),V===t)return w(X,"enum_for",["combination",O],function te(){var ue=te.$$s==null?this:te.$$s;return he(ue.length,O)},{$$s:X});var ne,se,oe,fe,d,x,J;if(O===0)n.yield1(V,[]);else if(O===1)for(ne=0,se=X.length;ne<se;ne++)n.yield1(V,[X[ne]]);else if(O===X.length)n.yield1(V,X.slice());else if(O>=0&&O<X.length){for(oe=[],ne=0;ne<=O+1;ne++)oe.push(0);for(fe=[],d=0,x=!1,oe[0]=-1;!x;){for(fe[d]=X[oe[d+1]];d<O-1;)d++,J=oe[d+1]=oe[d]+1,fe[d]=X[J];n.yield1(V,fe.slice()),d++;do x=d===0,oe[d]++,d--;while(oe[d+1]+O===X.length+d+1)}}return X}),m(o,"$repeated_combination",function ie(T){var V=ie.$$p||t,X=this,O=t;if(ie.$$p=null,O=k["$coerce_to!"](T,e("Integer"),"to_int"),V===t)return w(X,"enum_for",["repeated_combination",O],function se(){var oe=se.$$s==null?this:se.$$s;return he(oe.length+O-1,O)},{$$s:X});function ne(se,oe,fe,d){if(fe.length==se){var x=fe.slice();n.yield1(V,x);return}for(var J=oe;J<d.length;J++)fe.push(d[J]),ne(se,J,fe,d),fe.pop()}return O>=0&&ne(O,0,[],X),X}),m(o,"$compact",function(){for(var T=this,V=[],X=0,O=T.length,ne;X<O;X++)(ne=T[X])!==t&&V.push(ne);return V}),m(o,"$compact!",function(){var T=this;b(T);for(var V=T.length,X=0,O=T.length;X<O;X++)T[X]===t&&(T.splice(X,1),O--,X--);return T.length===V?t:T}),m(o,"$concat",function(T){var V,X,O=this;return V=ee(arguments),X=V,b(O),X=w(X,"map",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;return se==null&&(se=t),se=re(se),A(se["$equal?"](oe))&&(se=se.$dup()),se},{$$s:O}),w(X,"each",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;se==null&&(se=t);for(var fe=0,d=se.length;fe<d;fe++)oe.push(se[fe])},{$$s:O}),O},-1),m(o,"$delete",function ie(T){var V=ie.$$p||t,X=this;ie.$$p=null;for(var O=X.length,ne=0,se=O;ne<se;ne++)X[ne]["$=="](T)&&(b(X),X.splice(ne,1),se--,ne--);return X.length===O?V!==t?n.yieldX(V,[]):t:T}),m(o,"$delete_at",function(T){var V=this;if(b(V),T=L(T,e("Integer"),"to_int"),T<0&&(T+=V.length),T<0||T>=V.length)return t;var X=V[T];return V.splice(T,1),X}),m(o,"$delete_if",function ie(){var T=ie.$$p||t,V=this;return ie.$$p=null,T===t?w(V,"enum_for",["delete_if"],function X(){var O=X.$$s==null?this:X.$$s;return O.$size()},{$$s:V}):(b(V),G(V,h,T),V)}),m(o,"$difference",function(T){var V,X,O=this;return V=ee(arguments),X=V,w(X,"reduce",[O.$to_a().$dup()],function(se,oe){return se==null&&(se=t),oe==null&&(oe=t),v(se,oe)})},-1),m(o,"$dig",function(T,V){var X,O,ne=this,se=t;return X=ee(arguments,1),O=X,se=ne["$[]"](T),se===t||O.length===0?se:(A(se["$respond_to?"]("dig"))||R.$raise(e("TypeError"),""+se.$class()+" does not have #dig method"),w(se,"dig",s(O)))},-2),m(o,"$drop",function(T){var V=this;return T=L(T,e("Integer"),"to_int"),T<0&&R.$raise(e("ArgumentError")),V.slice(T)}),m(o,"$dup",function ie(){var T=ie.$$p||t,V=this;return ie.$$p=null,V.$$class===n.Array&&V.$$class.$allocate.$$pristine&&V.$copy_instance_variables.$$pristine&&V.$initialize_dup.$$pristine?V.slice(0):z(V,U(V,"dup",ie,!1,!0),"dup",[],T)}),m(o,"$each",function ie(){var T=ie.$$p||t,V=this;if(ie.$$p=null,T===t)return w(V,"enum_for",["each"],function O(){var ne=O.$$s==null?this:O.$$s;return ne.$size()},{$$s:V});for(var X=0;X<V.length;X++)N(T,V[X]);return V}),m(o,"$each_index",function ie(){var T=ie.$$p||t,V=this;if(ie.$$p=null,T===t)return w(V,"enum_for",["each_index"],function O(){var ne=O.$$s==null?this:O.$$s;return ne.$size()},{$$s:V});for(var X=0;X<V.length;X++)N(T,X);return V}),m(o,"$empty?",function(){var T=this;return T.length===0}),m(o,"$eql?",function(T){var V=this,X={};function O(ne,se){var oe,fe,d,x;if(!se.$$is_array||(se=se.$to_a(),ne.length!==se.length))return!1;for(X[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(d=ne[oe],x=se[oe],d.$$is_array){if(x.$$is_array&&x.length!==d.length||!X.hasOwnProperty(d.$object_id())&&!O(d,x))return!1}else if(!d["$eql?"](x))return!1;return!0}return O(V,T)}),m(o,"$fetch",function ie(T,V){var X=ie.$$p||t,O=this;ie.$$p=null;var ne=T;if(T=L(T,e("Integer"),"to_int"),T<0&&(T+=O.length),T>=0&&T<O.length)return O[T];if(X!==t&&V!=null&&O.$warn("warning: block supersedes default value argument"),X!==t)return X(ne);if(V!=null)return V;O.length===0?R.$raise(e("IndexError"),"index "+ne+" outside of array bounds: 0...0"):R.$raise(e("IndexError"),"index "+ne+" outside of array bounds: -"+O.length+"..."+O.length)},-2),m(o,"$fill",function ie(T){var V=ie.$$p||t,X,O,ne,se,oe=this,fe=t,d=t,x=t,J=t,te=t;ie.$$p=null,X=ee(arguments),O=X,b(oe);var ue,_e;if(A(V)?(A(O.length>2)&&R.$raise(e("ArgumentError"),"wrong number of arguments ("+O.$length()+" for 0..2)"),se=O,ne=f(se),fe=ne[0]==null?t:ne[0],d=ne[1]==null?t:ne[1]):(A(O.length==0)?R.$raise(e("ArgumentError"),"wrong number of arguments (0 for 1..3)"):A(O.length>3)&&R.$raise(e("ArgumentError"),"wrong number of arguments ("+O.$length()+" for 1..3)"),se=O,ne=f(se),x=ne[0]==null?t:ne[0],fe=ne[1]==null?t:ne[1],d=ne[2]==null?t:ne[2]),I(e("Range"),fe)){if(A(d)&&R.$raise(e("TypeError"),"length invalid with range"),J=fe.begin===t?0:L(fe.begin,e("Integer"),"to_int"),A(J<0)&&(J+=this.length),A(J<0)&&R.$raise(e("RangeError"),""+fe.$inspect()+" out of range"),te=fe.end===t?-1:L(fe.end,e("Integer"),"to_int"),A(te<0)&&(te+=this.length),A(fe["$exclude_end?"]())||(te+=1),A(te<=J))return oe}else if(A(fe))if(J=L(fe,e("Integer"),"to_int"),A(J<0)&&(J+=this.length),A(J<0)&&(J=0),A(d)){if(te=L(d,e("Integer"),"to_int"),A(te==0))return oe;te+=J}else te=this.length;else J=0,te=this.length;if(A(J>this.length))for(ue=this.length;ue<te;ue++)oe[ue]=t;if(A(te>this.length)&&(this.length=te),A(V))for(this.length;J<te;J++)_e=V(J),oe[J]=_e;else for(this.length;J<te;J++)oe[J]=x;return oe},-1),m(o,"$first",function(T){var V=this;return T==null?V.length===0?t:V[0]:(T=L(T,e("Integer"),"to_int"),T<0&&R.$raise(e("ArgumentError"),"negative array size"),V.slice(0,T))},-1),m(o,"$flatten",function(T){var V=this;function X(O,ne){var se=[],oe,fe,d,x;for(O=O.$to_a(),oe=0,fe=O.length;oe<fe;oe++){if(d=O[oe],!K(d,"$to_ary",!0)){se.push(d);continue}if(x=d.$to_ary(),x===t){se.push(d);continue}switch(x.$$is_array||R.$raise(e("TypeError")),x===V&&R.$raise(e("ArgumentError")),ne){case void 0:se=se.concat(X(x));break;case 0:se.push(x);break;default:ae(se,X(x,ne-1))}}return se}return T!==void 0&&(T=L(T,e("Integer"),"to_int")),X(V,T)},-1),m(o,"$flatten!",function(T){var V=this;b(V);var X=V.$flatten(T);if(V.length==X.length){for(var O=0,ne=V.length;O<ne&&V[O]===X[O];O++);if(O==ne)return t}return V.$replace(X),V},-1),m(o,"$freeze",function(){var T=this;return A(T["$frozen?"]())?T:B(T)});var ve;m(o,"$hash",function(){var T=this,V=ve===void 0,X=$e(),O=T.$object_id(),ne,se,oe;if(X=Y(X,10),X=Y(X,T.length),V)ve=Object.create(null);else if(ve[O])return Y(X,16843009);try{for(oe in ve)if(ne=ve[oe],T["$eql?"](ne))return Y(X,16843009);for(ve[O]=T,se=0;se<T.length;se++)ne=T[se],X=Y(X,ne.$hash());return X}finally{V&&(ve=void 0)}}),m(o,"$include?",function(T){for(var V=this,X=0,O=V.length;X<O;X++)if(V[X]["$=="](T))return!0;return!1}),m(o,"$index",function ie(T){var V=ie.$$p||t,X=this;ie.$$p=null;var O,ne,se;if(T!=null&&V!==t&&X.$warn("warning: given block not used"),T!=null){for(O=0,ne=X.length;O<ne;O++)if(X[O]["$=="](T))return O}else if(V!==t){for(O=0;O<X.length;O++)if(se=V(X[O]),se!==!1&&se!==t)return O}else return X.$enum_for("index");return t},-1),m(o,"$insert",function(T,V){var X,O,ne=this;if(X=ee(arguments,1),O=X,b(ne),T=L(T,e("Integer"),"to_int"),O.length>0){if(T<0&&(T+=ne.length+1,T<0&&R.$raise(e("IndexError"),""+T+" is out of bounds")),T>ne.length)for(var se=ne.length;se<T;se++)ne.push(t);ne.splice.apply(ne,[T,0].concat(O))}return ne},-2);var me=[];m(o,"$inspect",function(){var T=this,V=[],X=T.$__id__(),O=!0;return function(){try{if(me.indexOf(X)!==-1)return O=!1,"[...]";me.push(X);for(var ne=0,se=T.length;ne<se;ne++){var oe=T["$[]"](ne);V.push(j("Opal").$inspect(oe))}return"["+V.join(", ")+"]"}finally{O&&me.pop()}}()}),m(o,"$intersection",function(T){var V,X,O=this,ne=t,se=t;return V=ee(arguments),X=V,X.length===0?O.$to_a().$dup():(X=X.map(re),O.length===0?[]:(X=w(X,"sort_by",[],"length".$to_proc()),A(O.length<X[0].length)?w(X,"reduce",[O],"&".$to_proc()):(ne=X.pop(),se=w(X,"reduce",[ne],"&".$to_proc()),O["$&"](se))))},-1),m(o,"$intersect?",function(T){var V=this,X,O,ne=new Map,se,oe;for(V.length<T.length?(X=V,O=T):(X=T,O=V),se=0,oe=X.length;se<oe;se++)Q(ne,X[se],!0);for(se=0,oe=O.length;se<oe;se++)if(M(ne,O[se]))return!0;return!1}),m(o,"$join",function(T){var V=this;if(E[","]==null&&(E[","]=t),T==null&&(T=t),A(V.length===0))return"";A(T===t)&&(T=E[","]);var X=[],O,ne,se,oe;for(O=0,ne=V.length;O<ne;O++){if(se=V[O],K(se,"$to_str")&&(oe=se.$to_str(),oe!==t)){X.push(oe.$to_s());continue}if(K(se,"$to_ary")&&(oe=se.$to_ary(),oe===V&&R.$raise(e("ArgumentError")),oe!==t)){X.push(oe.$join(T));continue}if(K(se,"$to_s")&&(oe=se.$to_s(),oe!==t)){X.push(oe);continue}R.$raise(e("NoMethodError").$new(""+j("Opal").$inspect(V.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return T===t?X.join(""):X.join(k["$coerce_to!"](T,e("String"),"to_str").$to_s())},-1),m(o,"$keep_if",function ie(){var T=ie.$$p||t,V=this;return ie.$$p=null,T===t?w(V,"enum_for",["keep_if"],function X(){var O=X.$$s==null?this:X.$$s;return O.$size()},{$$s:V}):(b(V),G(V,A,T),V)}),m(o,"$last",function(T){var V=this;return T==null?V.length===0?t:V[V.length-1]:(T=L(T,e("Integer"),"to_int"),T<0&&R.$raise(e("ArgumentError"),"negative array size"),T>V.length&&(T=V.length),V.slice(V.length-T,V.length))},-1),m(o,"$length",function(){var T=this;return T.length}),m(o,"$max",function ie(T){var V=ie.$$p||t,X=this;return ie.$$p=null,w(X.$each(),"max",[T],V.$to_proc())},-1),m(o,"$min",function ie(){var T=ie.$$p||t,V=this;return ie.$$p=null,w(V.$each(),"min",[],T.$to_proc())});function be(ie,T){for(var V=T>=0?1:0;T;)V*=ie,ie--,T--;return V}return m(o,"$permutation",function ie(T){var V=ie.$$p||t,X=this,O=t,ne=t;if(ie.$$p=null,V===t)return w(X,"enum_for",["permutation",T],function x(){var J=x.$$s==null?this:x.$$s;return be(J.length,T===void 0?J.length:T)},{$$s:X});var se,oe,fe;if(T===void 0?T=X.length:T=L(T,e("Integer"),"to_int"),!(T<0||X.length<T))if(T===0)n.yield1(V,[]);else if(T===1)for(var d=0;d<X.length;d++)n.yield1(V,[X[d]]);else O=j("Array").$new(T),ne=j("Array").$new(X.length,!1),se=function(x,J,te,ue,_e){X=this;for(var ge=0;ge<X.length;ge++)if(ue["$[]"](ge)["$!"]())if(J[te]=ge,te<x-1)ue[ge]=!0,se.call(X,x,J,te+1,ue,_e),ue[ge]=!1;else{fe=[];for(var pe=0;pe<J.length;pe++)fe.push(X[J[pe]]);N(_e,fe)}},V!==t?(oe=X.slice(),se.call(oe,T,O,0,ne,V)):se.call(X,T,O,0,ne,V);return X},-1),m(o,"$repeated_permutation",function ie(T){var V=ie.$$p||t,X=this,O=t;if(ie.$$p=null,O=k["$coerce_to!"](T,e("Integer"),"to_int"),V===t)return w(X,"enum_for",["repeated_permutation",O],function se(){var oe=se.$$s==null?this:se.$$s;return A(g(O,0))?oe.$size()["$**"](O):0},{$$s:X});function ne(se,oe,fe){if(oe.length==se){var d=oe.slice();n.yield1(V,d);return}for(var x=0;x<fe.length;x++)oe.push(fe[x]),ne(se,oe,fe),oe.pop()}return ne(O,[],X.slice()),X}),m(o,"$pop",function(T){var V=this;return b(V),A(T===void 0)?A(V.length===0)?t:V.pop():(T=L(T,e("Integer"),"to_int"),A(T<0)&&R.$raise(e("ArgumentError"),"negative array size"),A(V.length===0)?[]:A(T===1)?[V.pop()]:A(T>V.length)?V.splice(0,V.length):V.splice(V.length-T,V.length))},-1),m(o,"$product",function ie(T){var V=ie.$$p||t,X,O,ne=this;ie.$$p=null,X=ee(arguments),O=X;var se=V!==t?null:[],oe=O.length+1,fe=new Array(oe),d=new Array(oe),x=new Array(oe),J,te,ue,_e,ge=1;for(x[0]=ne,J=1;J<oe;J++)x[J]=L(O[J-1],e("Array"),"to_ary");for(J=0;J<oe;J++){if(_e=x[J].length,_e===0)return se||ne;ge*=_e,ge>2147483647&&R.$raise(e("RangeError"),"too big to product"),d[J]=_e,fe[J]=0}e:for(;;){for(ue=[],J=0;J<oe;J++)ue.push(x[J][fe[J]]);for(se?se.push(ue):n.yield1(V,ue),te=oe-1,fe[te]++;fe[te]===d[te];){if(fe[te]=0,--te<0)break e;fe[te]++}}return se||ne},-1),m(o,"$push",function(T){var V,X,O=this;return V=ee(arguments),X=V,b(O),ae(O,X),O},-1),m(o,"$rassoc",function(T){for(var V=this,X=0,O=V.length,ne;X<O;X++)if(ne=V[X],ne.length&&ne[1]!==void 0&&ne[1]["$=="](T))return ne;return t}),m(o,"$reject",function ie(){var T=ie.$$p||t,V=this;if(ie.$$p=null,T===t)return w(V,"enum_for",["reject"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:V});for(var X=[],O=0,ne;O<V.length;O++)ne=T(V[O]),(ne===!1||ne===t)&&X.push(V[O]);return X}),m(o,"$reject!",function ie(){var T=ie.$$p||t,V=this,X=t;return ie.$$p=null,T===t?w(V,"enum_for",["reject!"],function O(){var ne=O.$$s==null?this:O.$$s;return ne.$size()},{$$s:V}):(b(V),X=V.$length(),w(V,"delete_if",[],T.$to_proc()),q(V.$length(),X)?t:V)}),m(o,"$replace",function(T){var V=this;return b(V),T=re(T),V.length>0&&V.splice(0,V.length),ae(V,T),V}),m(o,"$reverse",function(){var T=this;return T.slice(0).reverse()}),m(o,"$reverse!",function(){var T=this;return b(T),T.reverse()}),m(o,"$reverse_each",function ie(){var T=ie.$$p||t,V=this;if(ie.$$p=null,T===t)return w(V,"enum_for",["reverse_each"],function O(){var ne=O.$$s==null?this:O.$$s;return ne.$size()},{$$s:V});for(var X=V.length-1;X>=0;X--)N(T,V[X]);return V}),m(o,"$rindex",function ie(T){var V=ie.$$p||t,X=this;ie.$$p=null;var O,ne;if(T!=null&&V!==t&&X.$warn("warning: given block not used"),T!=null){for(O=X.length-1;O>=0&&!(O>=X.length);O--)if(X[O]["$=="](T))return O}else if(V!==t){for(O=X.length-1;O>=0&&!(O>=X.length);O--)if(ne=V(X[O]),ne!==!1&&ne!==t)return O}else if(T==null)return X.$enum_for("rindex");return t},-1),m(o,"$rotate",function(T){var V=this;T==null&&(T=1);var X,O,ne,se;return T=L(T,e("Integer"),"to_int"),V.length===1?V.slice():V.length===0?[]:(X=V.slice(),O=T%X.length,ne=X.slice(O),se=X.slice(0,O),ne.concat(se))},-1),m(o,"$rotate!",function(T){var V=this,X=t;return T==null&&(T=1),b(V),V.length===0||V.length===1?V:(T=L(T,e("Integer"),"to_int"),X=V.$rotate(T),V.$replace(X))},-1),function(ie,T){var V=H(ie,T,"SampleRandom"),X=V.$$prototype;return X.rng=t,m(V,"$initialize",c("rng")),m(V,"$rand",function(ne){var se=this,oe=t;return oe=L(se.rng.$rand(ne),e("Integer"),"to_int"),A(oe<0)&&R.$raise(e("RangeError"),"random value must be >= 0"),A(oe<ne)||R.$raise(e("RangeError"),"random value must be less than Array size"),oe})}(o,null),m(o,"$sample",function(T,V){var X=this,O=t,ne=t;if(A(T===void 0))return X.$at(R.$rand(X.length));if(A(V===void 0)?A(O=k["$coerce_to?"](T,e("Hash"),"to_hash"))?(V=O,T=t):(V=t,T=L(T,e("Integer"),"to_int")):(T=L(T,e("Integer"),"to_int"),V=L(V,e("Hash"),"to_hash")),A(T)&&A(T<0)&&R.$raise(e("ArgumentError"),"count must be greater than 0"),A(V)&&(ne=V["$[]"]("random")),ne=A(ne)&&A(ne["$respond_to?"]("rand"))?j("SampleRandom").$new(ne):R,!A(T))return X[ne.$rand(X.length)];var se,oe,fe,d,x,J,te,ue;switch(T>X.length&&(T=X.length),T){case 0:return[];case 1:return[X[ne.$rand(X.length)]];case 2:return d=ne.$rand(X.length),x=ne.$rand(X.length-1),d<=x&&x++,[X[d],X[x]];default:if(X.length/T>3){for(se=!1,oe=0,fe=j("Array").$new(T),d=1,fe[0]=ne.$rand(X.length);d<T;){for(J=ne.$rand(X.length),x=0;x<d;){for(;J===fe[x];){if(oe++,oe>100){se=!0;break}J=ne.$rand(X.length)}if(se)break;x++}if(se)break;fe[d]=J,d++}if(!se){for(d=0;d<T;)fe[d]=X[fe[d]],d++;return fe}}fe=X.slice();for(var _e=0;_e<T;_e++)te=ne.$rand(X.length-_e)+_e,ue=fe[_e],fe[_e]=fe[te],fe[te]=ue;return T===X.length?fe:fe["$[]"](0,T)}},-1),m(o,"$select",function ie(){var T=ie.$$p||t,V=this;if(ie.$$p=null,T===t)return w(V,"enum_for",["select"],function oe(){var fe=oe.$$s==null?this:oe.$$s;return fe.$size()},{$$s:V});for(var X=[],O=0,ne,se;O<V.length;O++)ne=V[O],se=N(T,ne),A(se)&&X.push(ne);return X}),m(o,"$select!",function ie(){var T=ie.$$p||t,V=this;if(ie.$$p=null,T===t)return w(V,"enum_for",["select!"],function O(){var ne=O.$$s==null?this:O.$$s;return ne.$size()},{$$s:V});b(V);var X=V.length;return w(V,"keep_if",[],T.$to_proc()),V.length===X?t:V}),m(o,"$shift",function(T){var V=this;return b(V),A(T===void 0)?A(V.length===0)?t:D(V):(T=L(T,e("Integer"),"to_int"),A(T<0)&&R.$raise(e("ArgumentError"),"negative array size"),A(V.length===0)?[]:V.splice(0,T))},-1),m(o,"$shuffle",function(T){var V=this;return V.$dup().$to_a()["$shuffle!"](T)},-1),m(o,"$shuffle!",function(T){var V=this;b(V);var X,O=V.length,ne,se;for(T!==void 0&&(T=k["$coerce_to?"](T,e("Hash"),"to_hash"),T!==t&&(T=T["$[]"]("random"),T!==t&&T["$respond_to?"]("rand")&&(X=T)));O;)X?(ne=X.$rand(O).$to_int(),ne<0&&R.$raise(e("RangeError"),"random number too small "+ne),ne>=O&&R.$raise(e("RangeError"),"random number too big "+ne)):ne=V.$rand(O),se=V[--O],V[O]=V[ne],V[ne]=se;return V},-1),m(o,"$slice!",function(T,V){var X=this,O=t,ne=t,se=t,oe=t,fe=t;if(b(X),O=t,A(V===void 0))if(I(e("Range"),T)){ne=T,O=X["$[]"](ne),se=ne.begin===t?0:L(ne.begin,e("Integer"),"to_int"),oe=ne.end===t?-1:L(ne.end,e("Integer"),"to_int"),se<0&&(se+=X.length),oe<0?oe+=X.length:oe>=X.length&&(oe=X.length-1,ne.excl&&(oe+=1));var d=oe-se;ne.excl&&ne.end!==t?oe-=1:d+=1,se<X.length&&se>=0&&oe<X.length&&oe>=0&&d>0&&X.splice(se,d)}else{if(fe=L(T,e("Integer"),"to_int"),fe<0&&(fe+=X.length),fe<0||fe>=X.length)return t;O=X[fe],fe===0?X.shift():X.splice(fe,1)}else{if(fe=L(T,e("Integer"),"to_int"),V=L(V,e("Integer"),"to_int"),V<0)return t;O=X["$[]"](fe,V),fe<0&&(fe+=X.length),fe+V>X.length&&(V=X.length-fe),fe<X.length&&fe>=0&&X.splice(fe,V)}return O},-2),m(o,"$sort",function ie(){var T=ie.$$p||t,V=this;return ie.$$p=null,A(V.length>1)?(T===t&&(T=function(X,O){return X["$<=>"](O)}),V.slice().sort(function(X,O){var ne=T(X,O);return ne===t&&R.$raise(e("ArgumentError"),"comparison of "+X.$inspect()+" with "+O.$inspect()+" failed"),S(ne,0)?1:l(ne,0)?-1:0})):V}),m(o,"$sort!",function ie(){var T=ie.$$p||t,V=this;ie.$$p=null,b(V);var X;T!==t?X=w(V.slice(),"sort",[],T.$to_proc()):X=V.slice().$sort(),V.length=0;for(var O=0,ne=X.length;O<ne;O++)V.push(X[O]);return V}),m(o,"$sort_by!",function ie(){var T=ie.$$p||t,V=this;return ie.$$p=null,T===t?w(V,"enum_for",["sort_by!"],function X(){var O=X.$$s==null?this:X.$$s;return O.$size()},{$$s:V}):(b(V),V.$replace(w(V,"sort_by",[],T.$to_proc())))}),m(o,"$take",function(T){var V=this;return T<0&&R.$raise(e("ArgumentError")),V.slice(0,T)}),m(o,"$take_while",function ie(){var T=ie.$$p||t,V=this;ie.$$p=null;for(var X=[],O=0,ne,se;O<V.length;O++){if(ne=V[O],se=T(ne),se===!1||se===t)return X;X.push(ne)}return X}),m(o,"$to_a",function(){var T=this;return T.$$class===n.Array?T:n.Array.$new(T)}),m(o,"$to_ary",p),m(o,"$to_h",function ie(){var T=ie.$$p||t,V=this,X=t;ie.$$p=null,X=V,T!==t&&(X=w(X,"map",[],T.$to_proc()));var O,ne=X.length,se,oe,fe,d=new Map;for(O=0;O<ne;O++)se=k["$coerce_to?"](X[O],e("Array"),"to_ary"),se.$$is_array||R.$raise(e("TypeError"),"wrong element type "+X[O].$class()+" at "+O+" (expected array)"),se.length!==2&&R.$raise(e("ArgumentError"),"element has wrong array length at "+O+" (expected 2, was "+se.$length()+")"),oe=se[0],fe=se[1],Q(d,oe,fe);return d}),m(o,"$transpose",function(){var T=this,V=t,X=t;return A(T["$empty?"]())?[]:(V=[],X=t,w(T,"each",[],function(ne){var se=t;return ne==null&&(ne=t),ne=re(ne),X=A(se=X)?se:ne.length,C(ne.length,X)&&R.$raise(e("IndexError"),"element size differs ("+ne.length+" should be "+X+")"),w(ne.length,"times",[],function(fe){var d,x=t;return fe==null&&(fe=t),x=A(se=V["$[]"](fe))?se:(d=[fe,[]],w(V,"[]=",d),d[d.length-1]),x["$<<"](ne.$at(fe))})}),V)}),m(o,"$union",function(T){var V,X,O=this;return V=ee(arguments),X=V,w(X,"reduce",[O.$uniq()],function(se,oe){return se==null&&(se=t),oe==null&&(oe=t),se["$|"](oe)})},-1),m(o,"$uniq",function ie(){var T=ie.$$p||t,V=this;ie.$$p=null;var X=new Map,O,ne,se,oe;if(T===t)for(O=0,ne=V.length;O<ne;O++)se=V[O],M(X,se)===void 0&&Q(X,se,se);else for(O=0;O<V.length;O++)se=V[O],oe=N(T,se),M(X,oe)===void 0&&Q(X,oe,se);return X.$values()}),m(o,"$uniq!",function ie(){var T=ie.$$p||t,V=this;ie.$$p=null,b(V);var X=new Map,O,ne,se,oe=[];for(O=0;O<V.length;O++)ne=V[O],se=T===t?ne:N(T,ne),M(X,se)===void 0?Q(X,se,ne):oe.push(O);for(O=oe.length-1;O>=0;O--)V.splice(oe[O],1);return oe.length===0?t:V}),m(o,"$unshift",function(T){var V,X,O=this;V=ee(arguments),X=V,b(O);var ne=O.length,se=X.length;if(se==0)return O;for(var oe=ne-se,fe=0;fe<se;fe++)O.push(O[oe+fe]);for(var d=ne-1;d-se>=0;)O[d]=O[d-se],d--;for(var x=0;x<se;x++)O[x]=X[x];return O},-1),m(o,"$values_at",function(T){var V,X,O=this,ne=t;return V=ee(arguments),X=V,ne=[],w(X,"each",[],function se(oe){var fe=se.$$s==null?this:se.$$s,d=t,x=t,J=t;return oe==null&&(oe=t),A(oe["$is_a?"](e("Range")))?(d=oe.$end()===t?-1:L(oe.$end(),e("Integer"),"to_int"),x=oe.$begin()===t?0:L(oe.$begin(),e("Integer"),"to_int"),x<0?(x=x+fe.length,t):(d<0&&(d=d+fe.length),oe["$exclude_end?"]()&&oe.$end()!==t&&d--,d<x?t:w(x,"upto",[d],function te(ue){var _e=te.$$s==null?this:te.$$s;return ue==null&&(ue=t),ne["$<<"](_e.$at(ue))},{$$s:fe}))):(J=L(oe,e("Integer"),"to_int"),ne["$<<"](fe.$at(J)))},{$$s:O}),ne},-1),m(o,"$zip",function ie(T){var V=ie.$$p||t,X,O,ne=this,se=t;ie.$$p=null,X=ee(arguments),O=X;var oe=[],fe=ne.length,d,x,J,te,ue;for(te=0,ue=O.length;te<ue;te++)if(x=O[te],!x.$$is_array){if(x.$$is_range||x.$$is_enumerator){O[te]=x.$take(fe);continue}O[te]=(A(se=k["$coerce_to?"](x,e("Array"),"to_ary"))?se:k["$coerce_to!"](x,e("Enumerator"),"to_enum","each")).$to_a()}for(J=0;J<fe;J++){for(d=[ne[J]],te=0,ue=O.length;te<ue;te++)x=O[te][J],x==null&&(x=t),d[te+1]=x;oe[J]=d}if(V!==t){for(J=0;J<fe;J++)n.yield1(V,oe[J]);return t}return oe},-1),Z(o,"$inherited",function(T){T.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),m(o,"$instance_variables",function ie(){var T=ie.$$p||t,V=this;return ie.$$p=null,w(z(V,U(V,"instance_variables",ie,!1,!0),"instance_variables",[],T),"reject",[],function(O){var ne=t;return O==null&&(O=t),A(ne=/^@\d+$/.test(O))?ne:O["$=="]("@length")})}),m(o,"$pack",function(T){return ee(arguments),R.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),_(o,"append","push"),_(o,"filter","select"),_(o,"filter!","select!"),_(o,"map","collect"),_(o,"map!","collect!"),_(o,"prepend","unshift"),_(o,"size","length"),_(o,"slice","[]"),_(o,"to_s","inspect"),k.$pristine(o.$singleton_class(),"allocate"),k.$pristine(o,"copy_instance_variables","initialize_dup")}("::",Array,$)};Opal.modules["corelib/hash"]=function(n){var A=n.yield1,h=n.hash_clone,N=n.hash_delete,M=n.hash_each,Q=n.hash_get,W=n.hash_put,L=n.deny_frozen_access,K=n.freeze,b=n.opal32_init,B=n.opal32_add,$e=n.klass,Y=n.slice,H=n.Opal,ee=n.Kernel,Z=n.defs,R=n.def,m=n.send,k=n.rb_ge,I=n.rb_gt,z=n.truthy,U=n.to_a,w=n.return_self,S=n.not,P=n.alias,q=n.top,v=[],s=n.nil,f=n.$$$;return n.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),q.$require("corelib/enumerable"),function(E,g,c){var l=$e(E,g,"Hash"),p=[l].concat(c),C=n.$r(p);l.$include(f("Enumerable")),l.$$prototype.$$is_hash=!0,Z(l,"$[]",function(t){var e,r,i=this;e=Y(arguments),r=e;var u,o=r.length,y,j;if(o===1){if(u=H["$coerce_to?"](r["$[]"](0),f("Hash"),"to_hash"),u!==s)return i.$allocate()["$merge!"](u);for(r=H["$coerce_to?"](r["$[]"](0),f("Array"),"to_ary"),r===s&&ee.$raise(f("ArgumentError"),"odd number of arguments for Hash"),o=r.length,u=i.$allocate(),j=0;j<o;j++)y=r[j],y.$$is_array||ee.$raise(f("ArgumentError"),"invalid element "+y.$inspect()+" for Hash"),y.length===1?u.$store(y[0],s):y.length===2?u.$store(y[0],y[1]):ee.$raise(f("ArgumentError"),"invalid number of elements ("+y.length+" for "+y.$inspect()+"), must be 1..2");return u}for(o%2!==0&&ee.$raise(f("ArgumentError"),"odd number of arguments for Hash"),u=i.$allocate(),j=0;j<o;j+=2)u.$store(r[j],r[j+1]);return u},-1),Z(l,"$allocate",function(){var t=this,e=new t.$$constructor;return e.$$none=s,e.$$proc=s,e}),Z(l,"$try_convert",function(t){return H["$coerce_to?"](t,f("Hash"),"to_hash")}),R(l,"$initialize",function $(t){var e=$.$$p||s,r=this;return $.$$p=null,L(r),t!==void 0&&e!==s&&ee.$raise(f("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=t===void 0?s:t,r.$$proc=e,r},-1),R(l,"$==",function(t){var e=this;return e===t?!0:!t.$$is_hash||e.size!==t.size?!1:M(e,!0,function(r,i){var u=Q(t,r);return u===void 0||!i["$eql?"](u)?[!0,!1]:[!1,!0]})}),R(l,"$>=",function(t){var e=this,r=s;return t=H["$coerce_to!"](t,f("Hash"),"to_hash"),e.size<t.size?!1:(r=!0,m(t,"each",[],function i(u,o){var y=i.$$s==null?this:i.$$s,j=s;if(u==null&&(u=s),o==null&&(o=s),j=y.$fetch(u,null),j==null||j!==o){r=!1;return}},{$$s:e}),r)}),R(l,"$>",function(t){var e=this;return t=H["$coerce_to!"](t,f("Hash"),"to_hash"),e.size<=t.size?!1:k(e,t)}),R(l,"$<",function(t){var e=this;return t=H["$coerce_to!"](t,f("Hash"),"to_hash"),I(t,e)}),R(l,"$<=",function(t){var e=this;return t=H["$coerce_to!"](t,f("Hash"),"to_hash"),k(t,e)}),R(l,"$[]",function(t){var e=this,r=Q(e,t);return r!==void 0?r:e.$default(t)}),R(l,"$[]=",function(t,e){var r=this;return L(r),W(r,t,e),e}),R(l,"$assoc",function(t){var e=this;return M(e,s,function(r,i){return r["$=="](t)?[!0,[r,i]]:[!1,s]})}),R(l,"$clear",function(){var t=this;return L(t),t.clear(),t.$$keys&&t.$$keys.clear(),t}),R(l,"$clone",function(){var t=this,e=t.$class().$new();return h(t,e),t["$frozen?"]()?e.$freeze():e}),R(l,"$compact",function(){var t=this,e=new Map;return M(t,e,function(r,i){return i!==s&&W(e,r,i),[!1,e]})}),R(l,"$compact!",function(){var t=this;L(t);var e=s;return M(t,e,function(r,i){return i===s&&(N(t,r),e=t),[!1,e]})}),R(l,"$compare_by_identity",function(){var t=this;return L(t),t.$$by_identity||(t.$$by_identity=!0,t.size!==0&&n.hash_rehash(t)),t}),R(l,"$compare_by_identity?",function(){var t=this;return t.$$by_identity===!0}),R(l,"$default",function(t){var e=this;return t!==void 0&&e.$$proc!==s&&e.$$proc!==void 0?e.$$proc.$call(e,t):e.$$none===void 0?s:e.$$none},-1),R(l,"$default=",function(t){var e=this;return L(e),e.$$proc=s,e.$$none=t,t}),R(l,"$default_proc",function(){var t=this;return t.$$proc!==void 0?t.$$proc:s}),R(l,"$default_proc=",function(t){var e=this;L(e);var r=t;return r!==s&&(r=H["$coerce_to!"](r,f("Proc"),"to_proc"),r["$lambda?"]()&&r.$arity().$abs()!==2&&ee.$raise(f("TypeError"),"default_proc takes two arguments")),e.$$none=s,e.$$proc=r,t}),R(l,"$delete",function $(t){var e=$.$$p||s,r=this;$.$$p=null,L(r);var i=N(r,t);return i!==void 0?i:e!==s?n.yield1(e,t):s}),R(l,"$delete_if",function $(){var t=$.$$p||s,e=this;return $.$$p=null,z(t)?(L(e),M(e,e,function(r,i){var u=t(r,i);return u!==!1&&u!==s&&N(e,r),[!1,e]})):m(e,"enum_for",["delete_if"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),R(l,"$dig",function(t,e){var r,i,u=this,o=s;return r=Y(arguments,1),i=r,o=u["$[]"](t),o===s||i.length===0?o:(z(o["$respond_to?"]("dig"))||ee.$raise(f("TypeError"),""+o.$class()+" does not have #dig method"),m(o,"dig",U(i)))},-2),R(l,"$dup",function(){var t=this;return h(t,t.$class().$new())}),R(l,"$each",function $(){var t=$.$$p||s,e=this;return $.$$p=null,z(t)?M(e,e,function(r,i){return A(t,[r,i]),[!1,e]}):m(e,"enum_for",["each"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),R(l,"$each_key",function $(){var t=$.$$p||s,e=this;return $.$$p=null,z(t)?M(e,e,function(r,i){return t(r),[!1,e]}):m(e,"enum_for",["each_key"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),R(l,"$each_value",function $(){var t=$.$$p||s,e=this;return $.$$p=null,z(t)?M(e,e,function(r,i){return t(i),[!1,e]}):m(e,"enum_for",["each_value"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),R(l,"$empty?",function(){var t=this;return t.size===0}),R(l,"$except",function(t){var e,r,i=this;return e=Y(arguments),r=e,m(i.$dup(),"except!",U(r))},-1),R(l,"$except!",function(t){var e,r,i=this;return e=Y(arguments),r=e,m(r,"each",[],function u(o){var y=u.$$s==null?this:u.$$s;return o==null&&(o=s),y.$delete(o)},{$$s:i}),i},-1),R(l,"$fetch",function $(t,e){var r=$.$$p||s,i=this;$.$$p=null;var u=Q(i,t);return u!==void 0?u:r!==s?r(t):e!==void 0?e:ee.$raise(f("KeyError").$new("key not found: "+t.$inspect(),new Map([["key",t],["receiver",i]])))},-2),R(l,"$fetch_values",function $(t){var e=$.$$p||s,r,i,u=this;return $.$$p=null,r=Y(arguments),i=r,m(i,"map",[],function o(y){var j=o.$$s==null?this:o.$$s;return y==null&&(y=s),m(j,"fetch",[y],e.$to_proc())},{$$s:u})},-1),R(l,"$flatten",function(t){var e=this;t==null&&(t=1),t=H["$coerce_to!"](t,f("Integer"),"to_int");var r=[];return M(e,r,function(i,u){return r.push(i),u.$$is_array?t===1?(r.push(u),[!1,r]):(r=r.concat(u.$flatten(t-2)),[!1,r]):(r.push(u),[!1,r])})},-1),R(l,"$freeze",function(){var t=this;return z(t["$frozen?"]())?t:K(t)}),R(l,"$has_key?",function(t){var e=this;return Q(e,t)!==void 0}),R(l,"$has_value?",function(t){var e=this;return M(e,!1,function(r,i){return i["$=="](t)?[!0,!0]:[!1,!1]})});var _;R(l,"$hash",function(){var t=this,e=_===void 0,r=t.$object_id(),i=b(),u,o,y,j=t.size,D=new Int32Array(j);if(i=B(i,4),i=B(i,j),e)_=Object.create(null);else if(_[r])return B(i,16843009);try{for(u in _)if(o=_[u],t["$eql?"](o))return B(i,16843009);for(_[r]=t,y=0,M(t,!1,function(F,G){return D[y]=[1883326802,F,G].$hash(),y++,[!1,!1]}),D=D.sort(),y=0;y<D.length;y++)i=B(i,D[y]);return i}finally{e&&(_=void 0)}}),R(l,"$index",function(t){var e=this;return M(e,s,function(r,i){return i["$=="](t)?[!0,r]:[!1,s]})}),R(l,"$indexes",function(t){var e,r,i=this;e=Y(arguments),r=e;for(var u=[],o=0,y=r.length,j,D;o<y;o++){if(j=r[o],D=Q(i,j),D===void 0){u.push(i.$default());continue}u.push(D)}return u},-1);var a;return R(l,"$inspect",function(){var t=this,e=a===void 0,r=t.$object_id(),i=[];return function(){try{if(e&&(a={}),a.hasOwnProperty(r))return"{...}";return a[r]=!0,M(t,!1,function(u,o){return o=C("Opal").$inspect(o),u=C("Opal").$inspect(u),i.push(u+"=>"+o),[!1,!1]}),"{"+i.join(", ")+"}";return s}finally{e&&(a=void 0)}}()}),R(l,"$invert",function(){var t=this,e=new Map;return M(t,e,function(r,i){return W(e,i,r),[!1,e]})}),R(l,"$keep_if",function $(){var t=$.$$p||s,e=this;return $.$$p=null,z(t)?(L(e),M(e,e,function(r,i){var u=t(r,i);return(u===!1||u===s)&&N(e,r),[!1,e]})):m(e,"enum_for",["keep_if"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),R(l,"$keys",function(){var t=this;return Array.from(t.keys())}),R(l,"$length",function(){var t=this;return t.size}),R(l,"$merge",function $(t){var e=$.$$p||s,r,i,u=this;return $.$$p=null,r=Y(arguments),i=r,m(u.$dup(),"merge!",U(i),e.$to_proc())},-1),R(l,"$merge!",function $(t){var e=$.$$p||s,r,i,u=this;$.$$p=null,r=Y(arguments),i=r,L(u);var o,y;for(o=0;o<i.length;++o)y=H["$coerce_to!"](i[o],f("Hash"),"to_hash"),e===s?M(y,!1,function(j,D){return W(u,j,D),[!1,!1]}):M(y,!1,function(j,D){var F=Q(u,j);return F===void 0?(W(u,j,D),[!1,!1]):(W(u,j,e(j,F,D)),[!1,!1])});return u},-1),R(l,"$rassoc",function(t){var e=this;return M(e,s,function(r,i){return i["$=="](t)?[!0,[r,i]]:[!1,s]})}),R(l,"$rehash",function(){var t=this;return L(t),n.hash_rehash(t)}),R(l,"$reject",function $(){var t=$.$$p||s,e=this;if($.$$p=null,!z(t))return m(e,"enum_for",["reject"],function i(){var u=i.$$s==null?this:i.$$s;return u.$size()},{$$s:e});var r=new Map;return M(e,r,function(i,u){var o=t(i,u);return(o===!1||o===s)&&W(r,i,u),[!1,r]})}),R(l,"$reject!",function $(){var t=$.$$p||s,e=this;if($.$$p=null,!z(t))return m(e,"enum_for",["reject!"],function i(){var u=i.$$s==null?this:i.$$s;return u.$size()},{$$s:e});L(e);var r=s;return M(e,r,function(i,u){var o=t(i,u);return o!==!1&&o!==s&&(N(e,i),r=e),[!1,r]})}),R(l,"$replace",function(t){var e=this;return L(e),t=H["$coerce_to!"](t,f("Hash"),"to_hash"),e.$clear(),M(t,!1,function(r,i){return W(e,r,i),[!1,!1]}),z(t.$default_proc())?e["$default_proc="](t.$default_proc()):e["$default="](t.$default()),e}),R(l,"$select",function $(){var t=$.$$p||s,e=this;if($.$$p=null,!z(t))return m(e,"enum_for",["select"],function i(){var u=i.$$s==null?this:i.$$s;return u.$size()},{$$s:e});var r=new Map;return M(e,r,function(i,u){var o=t(i,u);return o!==!1&&o!==s&&W(r,i,u),[!1,r]})}),R(l,"$select!",function $(){var t=$.$$p||s,e=this;if($.$$p=null,!z(t))return m(e,"enum_for",["select!"],function i(){var u=i.$$s==null?this:i.$$s;return u.$size()},{$$s:e});L(e);var r=s;return M(e,r,function(i,u){var o=t(i,u);return(o===!1||o===s)&&(N(e,i),r=e),[!1,r]})}),R(l,"$shift",function(){var t=this;return L(t),M(t,s,function(e,r){return[!0,[e,N(t,e)]]})}),R(l,"$slice",function(t){var e,r,i=this;e=Y(arguments),r=e;for(var u=new Map,o=0,y=r.length;o<y;o++){var j=r[o],D=Q(i,j);D!==void 0&&W(u,j,D)}return u},-1),R(l,"$to_a",function(){var t=this,e=[];return M(t,e,function(r,i){return e.push([r,i]),[!1,e]})}),R(l,"$to_h",function $(){var t=$.$$p||s,e=this;if($.$$p=null,t!==s)return m(e,"map",[],t.$to_proc()).$to_h();if(e.$$class===n.Hash)return e;var r=new Map;return h(e,r),r}),R(l,"$to_hash",w),R(l,"$to_proc",function(){var t=this;return m(t,"proc",[],function e(r){var i=e.$$s==null?this:e.$$s;return r==null&&ee.$raise(f("ArgumentError"),"no key given"),i["$[]"](r)},{$$arity:-1,$$s:t})}),R(l,"$transform_keys",function $(t){var e=$.$$p||s,r=this;if($.$$p=null,t==null&&(t=s),S(e)&&S(t))return m(r,"enum_for",["transform_keys"],function u(){var o=u.$$s==null?this:u.$$s;return o.$size()},{$$s:r});var i=new Map;return M(r,i,function(u,o){var y;return t!==s&&(y=Q(t,u)),y===void 0&&e&&e!==s&&(y=e(u)),y===void 0&&(y=u),W(i,y,o),[!1,i]})},-1),R(l,"$transform_keys!",function $(t){var e=$.$$p||s,r=this;if($.$$p=null,t==null&&(t=s),S(e)&&S(t))return m(r,"enum_for",["transform_keys!"],function u(){var o=u.$$s==null?this:u.$$s;return o.$size()},{$$s:r});L(r);var i=new Map;return M(r,r,function(u,o){var y;return t!==s&&(y=Q(t,u)),y===void 0&&e&&e!==s&&(y=e(u)),y===void 0?[!1,r]:(Q(i,u)||N(r,u),W(r,y,o),W(i,y,!0),[!1,r])})},-1),R(l,"$transform_values",function $(){var t=$.$$p||s,e=this;if($.$$p=null,!z(t))return m(e,"enum_for",["transform_values"],function i(){var u=i.$$s==null?this:i.$$s;return u.$size()},{$$s:e});var r=new Map;return M(e,r,function(i,u){return W(r,i,t(u)),[!1,r]})}),R(l,"$transform_values!",function $(){var t=$.$$p||s,e=this;return $.$$p=null,z(t)?(L(e),M(e,e,function(r,i){return W(e,r,t(i)),[!1,e]})):m(e,"enum_for",["transform_values!"],function r(){var i=r.$$s==null?this:r.$$s;return i.$size()},{$$s:e})}),R(l,"$values",function(){var t=this;return Array.from(t.values())}),P(l,"each_pair","each"),P(l,"eql?","=="),P(l,"filter","select"),P(l,"filter!","select!"),P(l,"include?","has_key?"),P(l,"indices","indexes"),P(l,"key","index"),P(l,"key?","has_key?"),P(l,"member?","has_key?"),P(l,"size","length"),P(l,"store","[]="),P(l,"to_s","inspect"),P(l,"update","merge!"),P(l,"value?","has_value?"),P(l,"values_at","indexes")}("::",Map,v)};Opal.modules["corelib/number"]=function(n){var A=n.klass,h=n.Opal,N=n.Kernel,M=n.def,Q=n.eqeqeq,W=n.truthy,L=n.rb_gt,K=n.not,b=n.rb_lt,B=n.alias,$e=n.send2,Y=n.find_super,H=n.send,ee=n.rb_plus,Z=n.rb_minus,R=n.eqeq,m=n.return_self,k=n.rb_divide,I=n.to_ary,z=n.rb_times,U=n.rb_le,w=n.rb_ge,S=n.return_val,P=n.const_set,q=n.top,v=[],s=n.nil,f=n.$$$;return n.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),q.$require("corelib/numeric"),function(E,g,c){var l=A(E,g,"Number");h.$bridge(Number,l),n.prop(l.$$prototype,"$$is_number",!0),l.$$is_number_class=!0;var p=new Map;(function(e,r){return M(e,"$allocate",function(){var u=this;return N.$raise(f("TypeError"),"allocator undefined for "+u.$name())}),n.udef(e,"$new"),s})(n.get_singleton_class(l)),M(l,"$coerce",function(r){var i=this;if(r===s)N.$raise(f("TypeError"),"can't convert "+r.$class()+" into Float");else{if(r.$$is_string)return[N.$Float(r),i];if(r["$respond_to?"]("to_f"))return[h["$coerce_to!"](r,f("Float"),"to_f"),i];if(r.$$is_number)return[r,i];N.$raise(f("TypeError"),"can't convert "+r.$class()+" into Float")}}),M(l,"$__id__",function(){var r=this;if(r|r===0)return r*2+1;if(p.has(r))return p.get(r);var i=n.uid();return p.set(r,i),i}),M(l,"$hash",function(){var r=this;return r|r===0?r.$__id__():r.toString().$hash()}),M(l,"$+",function(r){var i=this;return r.$$is_number?i+r:i.$__coerced__("+",r)}),M(l,"$-",function(r){var i=this;return r.$$is_number?i-r:i.$__coerced__("-",r)}),M(l,"$*",function(r){var i=this;return r.$$is_number?i*r:i.$__coerced__("*",r)}),M(l,"$/",function(r){var i=this;return r.$$is_number?i/r:i.$__coerced__("/",r)}),M(l,"$%",function(r){var i=this;if(r.$$is_number){if(r==-1/0)return r;if(r==0)N.$raise(f("ZeroDivisionError"),"divided by 0");else return r<0||i<0?(i%r+r)%r:i%r}else return i.$__coerced__("%",r)}),M(l,"$&",function(r){var i=this;return r.$$is_number?i&r:i.$__coerced__("&",r)}),M(l,"$|",function(r){var i=this;return r.$$is_number?i|r:i.$__coerced__("|",r)}),M(l,"$^",function(r){var i=this;return r.$$is_number?i^r:i.$__coerced__("^",r)}),M(l,"$<",function(r){var i=this;return r.$$is_number?i<r:i.$__coerced__("<",r)}),M(l,"$<=",function(r){var i=this;return r.$$is_number?i<=r:i.$__coerced__("<=",r)}),M(l,"$>",function(r){var i=this;return r.$$is_number?i>r:i.$__coerced__(">",r)}),M(l,"$>=",function(r){var i=this;return r.$$is_number?i>=r:i.$__coerced__(">=",r)});var C=function(e,r){return r.$$is_number?isNaN(e)||isNaN(r)?s:e>r?1:e<r?-1:0:e.$__coerced__("<=>",r)};M(l,"$<=>",function(r){var i=this;try{return C(i,r)}catch(u){if(n.rescue(u,[f("ArgumentError")]))try{return s}finally{n.pop_exception(u)}else throw u}}),M(l,"$<<",function(r){var i=this;return r=h["$coerce_to!"](r,f("Integer"),"to_int"),r>0?i<<r:i>>-r}),M(l,"$>>",function(r){var i=this;return r=h["$coerce_to!"](r,f("Integer"),"to_int"),r>0?i>>r:i<<-r}),M(l,"$[]",function(r){var i=this;return r=h["$coerce_to!"](r,f("Integer"),"to_int"),r<0?0:r>=32?i<0?1:0:i>>r&1}),M(l,"$+@",function(){var r=this;return+r}),M(l,"$-@",function(){var r=this;return-r}),M(l,"$~",function(){var r=this;return~r}),M(l,"$**",function(r){var i=this;return Q(f("Integer"),r)?K(f("Integer")["$==="](i))||W(L(r,0))?Math.pow(i,r):f("Rational").$new(i,1)["$**"](r):W(b(i,0))&&(Q(f("Float"),r)||Q(f("Rational"),r))?f("Complex").$new(i,0)["$**"](r.$to_f()):W(r.$$is_number!=null)?Math.pow(i,r):i.$__coerced__("**",r)}),M(l,"$==",function(r){var i=this;return r.$$is_number?i.valueOf()===r.valueOf():r["$respond_to?"]("==")?r["$=="](i):!1}),B(l,"===","=="),M(l,"$abs",function(){var r=this;return Math.abs(r)}),M(l,"$abs2",function(){var r=this;return Math.abs(r*r)}),M(l,"$allbits?",function(r){var i=this;return r=h["$coerce_to!"](r,f("Integer"),"to_int"),(i&r)==r}),M(l,"$anybits?",function(r){var i=this;return r=h["$coerce_to!"](r,f("Integer"),"to_int"),(i&r)!==0}),M(l,"$angle",function(){var r=this;return W(r["$nan?"]())?r:r==0?1/r>0?0:Math.PI:r<0?Math.PI:0}),M(l,"$bit_length",function(){var r=this;if(Q(f("Integer"),r)||N.$raise(f("NoMethodError").$new("undefined method `bit_length` for "+r+":Float","bit_length")),r===0||r===-1)return 0;for(var i=0,u=r<0?~r:r;u!=0;)i+=1,u>>>=1;return i}),M(l,"$ceil",function(r){var i=this;r==null&&(r=0);var u=i.$to_f();if(u%1===0&&r>=0)return u;var o=Math.pow(10,r),y=Math.ceil(u*o)/o;return u%1===0&&(y=Math.round(y)),y},-1),M(l,"$chr",function(r){var i=this;return n.enc(String.fromCharCode(i),r||"BINARY")},-1),M(l,"$denominator",function e(){var r=e.$$p||s,i=this;return e.$$p=null,W(i["$nan?"]())||W(i["$infinite?"]())?1:$e(i,Y(i,"denominator",e,!1,!0),"denominator",[],r)}),M(l,"$downto",function e(r){var i=e.$$p||s,u=this;if(e.$$p=null,i===s)return H(u,"enum_for",["downto",r],function y(){var j=y.$$s==null?this:y.$$s;return Q(f("Numeric"),r)||N.$raise(f("ArgumentError"),"comparison of "+j.$class()+" with "+r.$class()+" failed"),W(L(r,j))?0:ee(Z(j,r),1)},{$$s:u});r.$$is_number||N.$raise(f("ArgumentError"),"comparison of "+u.$class()+" with "+r.$class()+" failed");for(var o=u;o>=r;o--)i(o);return u}),M(l,"$equal?",function(r){var i=this,u=s;return W(u=i["$=="](r))?u:isNaN(i)&&isNaN(r)}),M(l,"$even?",function(){var r=this;return r%2===0}),M(l,"$floor",function(r){var i=this;r==null&&(r=0);var u=i.$to_f();if(u%1===0&&r>=0)return u;var o=Math.pow(10,r),y=Math.floor(u*o)/o;return u%1===0&&(y=Math.round(y)),y},-1),M(l,"$gcd",function(r){var i=this;Q(f("Integer"),r)||N.$raise(f("TypeError"),"not an integer");for(var u=Math.abs(i),o=Math.abs(r);u>0;){var y=u;u=o%u,o=y}return o}),M(l,"$gcdlcm",function(r){var i=this;return[i.$gcd(r),i.$lcm(r)]}),M(l,"$integer?",function(){var r=this;return r%1===0}),M(l,"$is_a?",function e(r){var i=e.$$p||s,u=this;return e.$$p=null,R(r,f("Integer"))&&Q(f("Integer"),u)||R(r,f("Integer"))&&Q(f("Integer"),u)||R(r,f("Float"))&&Q(f("Float"),u)?!0:$e(u,Y(u,"is_a?",e,!1,!0),"is_a?",[r],i)}),M(l,"$instance_of?",function e(r){var i=e.$$p||s,u=this;return e.$$p=null,R(r,f("Integer"))&&Q(f("Integer"),u)||R(r,f("Integer"))&&Q(f("Integer"),u)||R(r,f("Float"))&&Q(f("Float"),u)?!0:$e(u,Y(u,"instance_of?",e,!1,!0),"instance_of?",[r],i)}),M(l,"$lcm",function(r){var i=this;return Q(f("Integer"),r)||N.$raise(f("TypeError"),"not an integer"),i==0||r==0?0:Math.abs(i*r/i.$gcd(r))}),M(l,"$next",function(){var r=this;return r+1}),M(l,"$nobits?",function(r){var i=this;return r=h["$coerce_to!"](r,f("Integer"),"to_int"),(i&r)==0}),M(l,"$nonzero?",function(){var r=this;return r==0?s:r}),M(l,"$numerator",function e(){var r=e.$$p||s,i=this;return e.$$p=null,W(i["$nan?"]())||W(i["$infinite?"]())?i:$e(i,Y(i,"numerator",e,!1,!0),"numerator",[],r)}),M(l,"$odd?",function(){var r=this;return r%2!==0}),M(l,"$ord",m),M(l,"$pow",function(r,i){var u=this;return u==0&&N.$raise(f("ZeroDivisionError"),"divided by 0"),i===void 0?u["$**"](r):(f("Integer")["$==="](r)||N.$raise(f("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),r<0&&N.$raise(f("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),f("Integer")["$==="](i)||N.$raise(f("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),i===0&&N.$raise(f("ZeroDivisionError"),"divided by 0"),u["$**"](r)["$%"](i))},-2),M(l,"$pred",function(){var r=this;return r-1}),M(l,"$quo",function e(r){var i=e.$$p||s,u=this;return e.$$p=null,Q(f("Integer"),u)?$e(u,Y(u,"quo",e,!1,!0),"quo",[r],i):k(u,r)}),M(l,"$rationalize",function(r){var i,u,o=this,y=s,j=s;return arguments.length>1&&N.$raise(f("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),Q(f("Integer"),o)?f("Rational").$new(o,1):W(o["$infinite?"]())?N.$raise(f("FloatDomainError"),"Infinity"):W(o["$nan?"]())?N.$raise(f("FloatDomainError"),"NaN"):W(r==null)?(u=f("Math").$frexp(o),i=I(u),y=i[0]==null?s:i[0],j=i[1]==null?s:i[1],y=f("Math").$ldexp(y,f(f("Float"),"MANT_DIG")).$to_i(),j=Z(j,f(f("Float"),"MANT_DIG")),f("Rational").$new(z(2,y),1["$<<"](Z(1,j))).$rationalize(f("Rational").$new(1,1["$<<"](Z(1,j))))):o.$to_r().$rationalize(r)},-1),M(l,"$remainder",function(r){var i=this;return Z(i,z(r,k(i,r).$truncate()))}),M(l,"$round",function(r){var i,u,o=this,y=s;if(Q(f("Integer"),o)){if(W(r==null)||(Q(f("Float"),r)&&W(r["$infinite?"]())&&N.$raise(f("RangeError"),"Infinity"),r=h["$coerce_to!"](r,f("Integer"),"to_int"),W(b(r,f(f("Integer"),"MIN")))&&N.$raise(f("RangeError"),"out of bounds"),W(r>=0)))return o;if(r=r["$-@"](),.415241*r-.125>o.$size())return 0;var j=Math.pow(10,r),D=Math.floor((Math.abs(o)+j/2)/j)*j;return o<0?-D:D}else{if(W(o["$nan?"]())&&W(r==null)&&N.$raise(f("FloatDomainError"),"NaN"),r=h["$coerce_to!"](r||0,f("Integer"),"to_int"),W(U(r,0)))W(o["$nan?"]())?N.$raise(f("RangeError"),"NaN"):W(o["$infinite?"]())&&N.$raise(f("FloatDomainError"),"Infinity");else{if(R(r,0))return Math.round(o);if(W(o["$nan?"]())||W(o["$infinite?"]()))return o}return u=f("Math").$frexp(o),i=I(u),i[0]==null||i[0],y=i[1]==null?s:i[1],W(w(r,Z(ee(f(f("Float"),"DIG"),2),W(L(y,0))?k(y,4):Z(k(y,3),1))))?o:W(b(r,(W(L(y,0))?ee(k(y,3),1):k(y,4))["$-@"]()))?0:Math.round(o*Math.pow(10,r))/Math.pow(10,r)}},-1),M(l,"$times",function e(){var r=e.$$p||s,i=this;if(e.$$p=null,!W(r))return H(i,"enum_for",["times"],function o(){var y=o.$$s==null?this:o.$$s;return y},{$$s:i});for(var u=0;u<i;u++)r(u);return i}),M(l,"$to_f",m),M(l,"$to_i",function(){var r=this;return r<0?Math.ceil(r):Math.floor(r)}),M(l,"$to_r",function(){var r,i,u=this,o=s,y=s;return Q(f("Integer"),u)?f("Rational").$new(u,1):(i=f("Math").$frexp(u),r=I(i),o=r[0]==null?s:r[0],y=r[1]==null?s:r[1],o=f("Math").$ldexp(o,f(f("Float"),"MANT_DIG")).$to_i(),y=Z(y,f(f("Float"),"MANT_DIG")),z(o,f(f("Float"),"RADIX")["$**"](y)).$to_r())}),M(l,"$to_s",function(r){var i=this;return r==null&&(r=10),r=h["$coerce_to!"](r,f("Integer"),"to_int"),(W(b(r,2))||W(L(r,36)))&&N.$raise(f("ArgumentError"),"invalid radix "+r),R(i,0)&&W(1/i===-1/0)?"-0.0":i.toString(r)},-1),M(l,"$truncate",function(r){var i=this;r==null&&(r=0);var u=i.$to_f();if(u%1===0&&r>=0)return u;var o=Math.pow(10,r),y=parseInt(u*o,10)/o;return u%1===0&&(y=Math.round(y)),y},-1),M(l,"$digits",function(r){var i=this;r==null&&(r=10),W(b(i,0))&&N.$raise(f(f("Math"),"DomainError"),"out of domain"),r=h["$coerce_to!"](r,f("Integer"),"to_int"),W(b(r,2))&&N.$raise(f("ArgumentError"),"invalid radix "+r),i!=parseInt(i)&&N.$raise(f("NoMethodError"),"undefined method `digits' for "+i.$inspect());var u=i,o=[];if(i==0)return[0];for(;u!=0;)o.push(u%r),u=parseInt(u/r,10);return o},-1),M(l,"$divmod",function e(r){var i=e.$$p||s,u=this;return e.$$p=null,W(u["$nan?"]())||W(r["$nan?"]())?N.$raise(f("FloatDomainError"),"NaN"):W(u["$infinite?"]())?N.$raise(f("FloatDomainError"),"Infinity"):$e(u,Y(u,"divmod",e,!1,!0),"divmod",[r],i)}),M(l,"$upto",function e(r){var i=e.$$p||s,u=this;if(e.$$p=null,i===s)return H(u,"enum_for",["upto",r],function y(){var j=y.$$s==null?this:y.$$s;return Q(f("Numeric"),r)||N.$raise(f("ArgumentError"),"comparison of "+j.$class()+" with "+r.$class()+" failed"),W(b(r,j))?0:ee(Z(r,j),1)},{$$s:u});r.$$is_number||N.$raise(f("ArgumentError"),"comparison of "+u.$class()+" with "+r.$class()+" failed");for(var o=u;o<=r;o++)i(o);return u}),M(l,"$zero?",function(){var r=this;return r==0}),M(l,"$size",S(4)),M(l,"$nan?",function(){var r=this;return isNaN(r)}),M(l,"$finite?",function(){var r=this;return r!=1/0&&r!=-1/0&&!isNaN(r)}),M(l,"$infinite?",function(){var r=this;return r==1/0?1:r==-1/0?-1:s}),M(l,"$positive?",function(){var r=this;return r!=0&&(r==1/0||1/r>0)}),M(l,"$negative?",function(){var r=this;return r==-1/0||1/r<0});function _(e){var r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),r}function a(e){return new DataView(e.buffer).getFloat64(0,!0)}function $(e){for(var r=_(e),i=0;i<r.length;i++)if(r[i]===255)r[i]=0;else{r[i]++;break}return a(r)}function t(e){for(var r=_(e),i=0;i<r.length;i++)if(r[i]===0)r[i]=255;else{r[i]--;break}return a(r)}return M(l,"$next_float",function(){var r=this;return R(r,f(f("Float"),"INFINITY"))?f(f("Float"),"INFINITY"):W(r["$nan?"]())?f(f("Float"),"NAN"):W(w(r,0))?$(Math.abs(r)):t(r)}),M(l,"$prev_float",function(){var r=this;return R(r,f(f("Float"),"INFINITY")["$-@"]())?f(f("Float"),"INFINITY")["$-@"]():W(r["$nan?"]())?f(f("Float"),"NAN"):W(L(r,0))?t(r):-$(Math.abs(r))}),B(l,"arg","angle"),B(l,"eql?","=="),B(l,"fdiv","/"),B(l,"inspect","to_s"),B(l,"kind_of?","is_a?"),B(l,"magnitude","abs"),B(l,"modulo","%"),B(l,"object_id","__id__"),B(l,"phase","angle"),B(l,"succ","next"),B(l,"to_int","to_i")}("::",f("Numeric")),P("::","Fixnum",f("Number")),function(E,g,c){var l=A(E,g,"Integer"),p=[l].concat(c);return l.$$is_number_class=!0,l.$$is_integer_class=!0,function(C,_){var a=[C].concat(_),$=n.$r(a);return M(C,"$allocate",function(){var e=this;return N.$raise(f("TypeError"),"allocator undefined for "+e.$name())}),n.udef(C,"$new"),M(C,"$sqrt",function(e){return e=h["$coerce_to!"](e,f("Integer"),"to_int"),e<0&&N.$raise(f(f("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(e),10)}),M(C,"$try_convert",function(e){var r=this;return $("Opal")["$coerce_to?"](e,r,"to_int")})}(n.get_singleton_class(l),p),P(l,"MAX",Math.pow(2,30)-1),P(l,"MIN",-Math.pow(2,30))}("::",f("Numeric"),v),function(E,g,c){var l=A(E,g,"Float");return l.$$is_number_class=!0,function(p,C){return M(p,"$allocate",function(){var a=this;return N.$raise(f("TypeError"),"allocator undefined for "+a.$name())}),n.udef(p,"$new"),M(p,"$===",function(a){return!!a.$$is_number})}(n.get_singleton_class(l)),P(l,"INFINITY",1/0),P(l,"MAX",Number.MAX_VALUE),P(l,"MIN",Number.MIN_VALUE),P(l,"NAN",NaN),P(l,"DIG",15),P(l,"MANT_DIG",53),P(l,"RADIX",2),P(l,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",f("Numeric"))};Opal.modules["corelib/range"]=function(n){var A=n.klass,h=n.truthy,N=n.Kernel,M=n.def,Q=n.not,W=n.send2,L=n.find_super,K=n.lambda,b=n.send,B=n.rb_ge,$e=n.rb_gt,Y=n.eqeq,H=n.rb_le,ee=n.rb_lt,Z=n.eqeqeq,R=n.return_ivar,m=n.rb_minus,k=n.Opal,I=n.rb_divide,z=n.rb_plus,U=n.rb_times,w=n.thrower,S=n.alias,P=n.top,q=[],v=n.nil,s=n.$$$;return n.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),P.$require("corelib/enumerable"),function(f,E,g){var c=A(f,E,"Range"),l=[c].concat(g),p=n.$r(l),C=c.$$prototype;C.begin=C.end=C.excl=v,c.$include(s("Enumerable")),c.$$prototype.$$is_range=!0,c.$attr_reader("begin","end"),M(c,"$initialize",function($,t,e){var r=this;return e==null&&(e=!1),h(r.begin)&&N.$raise(s("NameError"),"'initialize' called twice"),h($["$<=>"](t))||h($["$nil?"]())||h(t["$nil?"]())||N.$raise(s("ArgumentError"),"bad value for range"),r.begin=$,r.end=t,r.excl=e},-3),M(c,"$===",function($){var t=this;return h($.$$is_range)?!1:t["$cover?"]($)});function _(a){return a.begin===v||a.end===v||a.begin===-1/0||a.end===1/0||a.begin===1/0||a.end===-1/0}return M(c,"$count",function a(){var $=a.$$p||v,t=this;return a.$$p=null,Q($!==v)&&h(_(t))?s(s("Float"),"INFINITY"):W(t,L(t,"count",a,!1,!0),"count",[],$)}),M(c,"$to_a",function a(){var $=a.$$p||v,t=this;return a.$$p=null,h(_(t))&&N.$raise(s("TypeError"),"cannot convert endless range to an array"),W(t,L(t,"to_a",a,!1,!0),"to_a",[],$)}),M(c,"$cover?",function($){var t=this,e=v,r=v,i=v,u=v,o=v,y=v,j=v,D=v;return e=K(function(G,re){var ae=v;return G==null&&(G=v),re==null&&(re=v),h(ae=G["$<=>"](re))?ae:1}),h($.$$is_range)?(r=$.$begin(),i=$.$end(),u=$["$exclude_end?"](),h(t.begin)&&h(r["$nil?"]())||h(t.end)&&h(i["$nil?"]())||h(r)&&h(i)&&h(b(e.$call(r,i),"then",[],function(G){return G==null&&(G=v),h(u)?B(G,0):$e(G,0)}))||h(r)&&Q(t["$cover?"](r))?!1:(o=e.$call(t.end,i),Y(t.excl,u)?B(o,0):h(t.excl)?$e(o,0):h(B(o,0))?!0:(y=$.$max(),h(j=y["$nil?"]()["$!"]())?H(e.$call(y,t.end),0):j))):h(t.begin)&&h($e(e.$call(t.begin,$),0))?!1:h(t.end["$nil?"]())?!0:(D=e.$call($,t.end),h(t.excl)?ee(D,0):H(D,0))}),M(c,"$each",function a(){var $=a.$$p||v,t=this,e=v,r=v,i=v;if(a.$$p=null,$===v)return b(t,"enum_for",["each"],function y(){var j=y.$$s==null?this:y.$$s;return j.$size()},{$$s:t});var u,o;if(t.begin.$$is_number&&t.end.$$is_number){for((t.begin%1!==0||t.end%1!==0)&&N.$raise(s("TypeError"),"can't iterate from Float"),u=t.begin,o=t.end+(h(t.excl)?0:1);u<o;u++)$(u);return t}if(t.begin.$$is_string&&t.end.$$is_string)return b(t.begin,"upto",[t.end,t.excl],$.$to_proc()),t;for(e=t.begin,r=t.end,h(e["$respond_to?"]("succ"))||N.$raise(s("TypeError"),"can't iterate from "+e.$class());h(h(i=t.end["$nil?"]())?i:ee(e["$<=>"](r),0));)n.yield1($,e),e=e.$succ();return Q(t.excl)&&Y(e,r)&&n.yield1($,e),t}),M(c,"$eql?",function($){var t=this,e=v,r=v;return Z(s("Range"),$)?h(e=h(r=t.excl["$==="]($["$exclude_end?"]()))?t.begin["$eql?"]($.$begin()):r)?t.end["$eql?"]($.$end()):e:!1}),M(c,"$exclude_end?",R("excl")),M(c,"$first",function a($){var t=a.$$p||v,e=this;return a.$$p=null,h(e.begin["$nil?"]())&&N.$raise(s("RangeError"),"cannot get the minimum of beginless range"),h($==null)?e.begin:W(e,L(e,"first",a,!1,!0),"first",[$],t)},-1),M(c,"$include?",function a($){var t=a.$$p||v,e=this,r=v,i=v;if(a.$$p=null,h(e.begin.$$is_number||e.end.$$is_number)||h(e.begin["$is_a?"](s("Time")))||h(e.end["$is_a?"](s("Time")))||h(s("Integer").$try_convert(e.begin))||h(s("Integer").$try_convert(e.end)))return e["$cover?"]($);if(h(e.begin.$$is_string||e.end.$$is_string)){if(h(e.begin.$$is_string&&e.end.$$is_string))return b(e.begin.$upto(e.end,e.excl),"any?",[],function(o){return o==null&&(o=v),o["$=="]($)});if(h(e.begin["$nil?"]()))return r=$["$<=>"](e.end),h(i=r["$nil?"]()["$!"]())?h(e.excl)?ee(r,0):H(r,0):i;if(h(e.end["$nil?"]()))return r=e.begin["$<=>"]($),h(i=r["$nil?"]()["$!"]())?H(r,0):i}return W(e,L(e,"include?",a,!1,!0),"include?",[$],t)}),M(c,"$last",function($){var t=this;return h(t.end["$nil?"]())&&N.$raise(s("RangeError"),"cannot get the maximum of endless range"),h($==null)?t.end:t.$to_a().$last($)},-1),M(c,"$max",function a(){var $=a.$$p||v,t=this;return a.$$p=null,h(t.end["$nil?"]())?N.$raise(s("RangeError"),"cannot get the maximum of endless range"):$!==v?W(t,L(t,"max",a,!1,!0),"max",[],$):Q(t.begin["$nil?"]())&&(h($e(t.begin,t.end))||h(t.excl)&&Y(t.begin,t.end))?v:t.excl?t.end-1:t.end}),M(c,"$min",function a(){var $=a.$$p||v,t=this;return a.$$p=null,h(t.begin["$nil?"]())?N.$raise(s("RangeError"),"cannot get the minimum of beginless range"):$!==v?W(t,L(t,"min",a,!1,!0),"min",[],$):Q(t.end["$nil?"]())&&(h($e(t.begin,t.end))||h(t.excl)&&Y(t.begin,t.end))?v:t.begin}),M(c,"$size",function(){var $=this.begin,t=this.end;if(s("Numeric")["$==="]($)){if(s("Numeric")["$==="](t)){var e=m(t,$);return e<0?0:(this.excl||(e+=1),s("Float")["$==="]($)||s("Float")["$==="](t)?Math.floor(e):e)}else if(t===v)return 1/0}else if($===v&&s("Numeric")["$==="](t))return 1/0;return v}),M(c,"$step",function a($){var t=a.$$p||v,e=this,r=v,i=v;a.$$p=null;function u(){$==null?$=1:$.$$is_number||($=k["$coerce_to!"]($,s("Integer"),"to_int")),$<0?N.$raise(s("ArgumentError"),"step can't be negative"):$===0&&N.$raise(s("ArgumentError"),"step can't be 0")}function o(){if(!e.begin["$respond_to?"]("succ")||e.begin.$$is_string&&e.end.$$is_string)return v;if($%1===0)return I(e.$size(),$).$ceil();var y=e.begin,j=e.end,D=Math.abs,F=Math.floor,G=(D(y)+D(j)+D(j-y))/D($)*s(s("Float"),"EPSILON"),re;return G>.5&&(G=.5),e.excl?(re=F((j-y)/$-G),re*$+y<j&&re++):re=F((j-y)/$+G)+1,re}return t===v?(h(e.begin["$is_a?"](p("Numeric")))||h(e.begin["$nil?"]()))&&(h(e.end["$is_a?"](p("Numeric")))||h(e.end["$nil?"]()))&&Q(h(r=e.begin["$nil?"]())?e.end["$nil?"]():r)?s(s("Enumerator"),"ArithmeticSequence").$new(e,$,"step"):b(e,"enum_for",["step",$],function(){return u(),o()}):(u(),h(e.begin.$$is_number&&e.end.$$is_number)?(i=0,function(){try{var y=w("break");return b(e,"loop",[],function j(){var D=j.$$s==null?this:j.$$s,F=v;return D.begin==null&&(D.begin=v),D.excl==null&&(D.excl=v),D.end==null&&(D.end=v),F=z(D.begin,U(i,$)),h(D.excl)?h(B(F,D.end))&&y.$throw(v,j.$$is_lambda):h($e(F,D.end))&&y.$throw(v,j.$$is_lambda),n.yield1(t,F),i=z(i,1)},{$$s:e})}catch(j){if(j===y)return j.$v;throw j}finally{y.is_orphan=!0}}()):(e.begin.$$is_string&&e.end.$$is_string&&$%1!==0&&N.$raise(s("TypeError"),"no implicit conversion to float from string"),b(e,"each_with_index",[],function(j,D){return j==null&&(j=v),D==null&&(D=v),Y(D["$%"]($),0)?n.yield1(t,j):v})),e)},-1),M(c,"$%",function($){var t=this;return h(t.begin["$is_a?"](p("Numeric")))&&h(t.end["$is_a?"](p("Numeric")))?s(s("Enumerator"),"ArithmeticSequence").$new(t,$,"%"):t.$step($)}),M(c,"$bsearch",function a(){var $=a.$$p||v,t=this;return a.$$p=null,$===v?t.$enum_for("bsearch"):(h(_(t)&&(t.begin.$$is_number||t.end.$$is_number))&&N.$raise(s("NotImplementedError"),"Can't #bsearch an infinite range"),h(t.begin.$$is_number&&t.end.$$is_number)||N.$raise(s("TypeError"),"can't do binary search for "+t.begin.$class()),b(t.$to_a(),"bsearch",[],$.$to_proc()))}),M(c,"$to_s",function(){var $=this,t=v;return""+(h(t=$.begin)?t:"")+(h($.excl)?"...":"..")+(h(t=$.end)?t:"")}),M(c,"$inspect",function(){var $=this,t=v;return""+(h(t=$.begin)?$.begin.$inspect():t)+(h($.excl)?"...":"..")+(h(t=$.end)?$.end.$inspect():t)}),M(c,"$marshal_load",function($){var t=this;return t.begin=$["$[]"]("begin"),t.end=$["$[]"]("end"),t.excl=$["$[]"]("excl")}),M(c,"$hash",function(){var $=this;return[s("Range"),$.begin,$.end,$.excl].$hash()}),S(c,"==","eql?"),S(c,"member?","include?")}("::",null,q)};Opal.modules["corelib/proc"]=function(n){var A=n.slice,h=n.each_ivar,N=n.klass,M=n.truthy,Q=n.Kernel,W=n.defs,L=n.def,K=n.send,b=n.to_a,B=n.return_self,$e=n.ensure_kwargs,Y=n.hash_get,H=n.Opal,ee=n.alias,Z=n.nil,R=n.$$$;return n.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(m,k){var I=N(m,k,"Proc");n.prop(I.$$prototype,"$$is_proc",!0),n.prop(I.$$prototype,"$$is_lambda",!1),W(I,"$new",function w(){var S=w.$$p||Z;return w.$$p=null,M(S)||Q.$raise(R("ArgumentError"),"tried to create a Proc object without a block"),S});function z(w,S){if(w.$$ret)try{return w.apply(null,S)}catch(P){if(P===w.$$ret)return P.$v;throw P}else return w.apply(null,S)}function U(w,S){if(w.$$brk)try{return n.yieldX(w,S)}catch(P){if(P===w.$$brk)return P.$v;throw P}else return n.yieldX(w,S)}return L(I,"$call",function w(S){var P=w.$$p||Z,q,v,s=this;return w.$$p=null,q=A(arguments),v=q,P!==Z&&(s.$$p=P),s.$$is_lambda?z(s,v):U(s,v)},-1),L(I,"$>>",function w(S){w.$$p;var P=this;return w.$$p=null,K(Q,"proc",[],function q(v){var s=q.$$p||Z,f,E,g=q.$$s==null?this:q.$$s,c=Z;return q.$$p=null,f=A(arguments),E=f,c=K(g,"call",b(E),s.$to_proc()),S.$call(c)},{$$arity:-1,$$s:P})}),L(I,"$<<",function w(S){w.$$p;var P=this;return w.$$p=null,K(Q,"proc",[],function q(v){var s=q.$$p||Z,f,E,g=q.$$s==null?this:q.$$s,c=Z;return q.$$p=null,f=A(arguments),E=f,c=K(S,"call",b(E),s.$to_proc()),g.$call(c)},{$$arity:-1,$$s:P})}),L(I,"$to_proc",B),L(I,"$lambda?",function(){var S=this;return!!S.$$is_lambda}),L(I,"$arity",function(){var S=this;return S.$$is_curried?-1:S.$$arity!=null?S.$$arity:S.length}),L(I,"$source_location",function(){var S=this,P=Z;return S.$$is_curried?Z:M(P=S.$$source_location)?P:Z}),L(I,"$binding",function(){var S=this;return S.$$is_curried&&Q.$raise(R("ArgumentError"),"Can't create Binding"),M(R("::","Binding","skip_raise")?"constant":Z)?R("Binding").$new(Z,[],S.$$s,S.$source_location()):Z}),L(I,"$parameters",function(S){var P,q=this;if(S=$e(S),P=Y(S,"lambda"),q.$$is_curried)return[["rest"]];if(q.$$parameters){if(P??q.$$is_lambda)return q.$$parameters;var v=[],s,f;for(s=0,f=q.$$parameters.length;s<f;s++){var E=q.$$parameters[s];E[0]==="req"&&(E=["opt",E[1]]),v.push(E)}return v}else return[]},-1),L(I,"$curry",function(S){var P=this;S===void 0?S=P.length:(S=H["$coerce_to!"](S,R("Integer"),"to_int"),P.$$is_lambda&&S!==P.length&&Q.$raise(R("ArgumentError"),"wrong number of arguments ("+S+" for "+P.length+")"));function q(){var v=A(arguments),s=v.length,f;return s>S&&P.$$is_lambda&&!P.$$is_curried&&Q.$raise(R("ArgumentError"),"wrong number of arguments ("+s+" for "+S+")"),s>=S?P.$call.apply(P,v):(f=function(){return q.apply(null,v.concat(A(arguments)))},f.$$is_lambda=P.$$is_lambda,f.$$is_curried=!0,f)}return q.$$is_lambda=P.$$is_lambda,q.$$is_curried=!0,q},-1),L(I,"$dup",function(){var S=this,P=S.$$original_proc||S,q=function(){return P.apply(this,arguments)};return h(S,function(v){q[v]=S[v]}),q}),ee(I,"===","call"),ee(I,"clone","dup"),ee(I,"yield","call"),ee(I,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(n){var A=n.klass,h=n.def,N=n.truthy,M=n.slice,Q=n.alias,W=n.Kernel,L=n.send,K=n.to_a,b=n.nil,B=n.$$$;return n.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function($e,Y){var H=A($e,Y,"Method"),ee=H.$$prototype;return ee.method=ee.receiver=ee.owner=ee.name=b,H.$attr_reader("owner","receiver","name"),h(H,"$initialize",function(R,m,k,I){var z=this;return z.receiver=R,z.owner=m,z.name=I,z.method=k}),h(H,"$arity",function(){var R=this;return R.method.$arity()}),h(H,"$parameters",function(){var R=this;return R.method.$$parameters}),h(H,"$source_location",function(){var R=this,m=b;return N(m=R.method.$$source_location)?m:["(eval)",0]}),h(H,"$comments",function(){var R=this,m=b;return N(m=R.method.$$comments)?m:[]}),h(H,"$call",function Z(R){var m=Z.$$p||b,k,I,z=this;return Z.$$p=null,k=M(arguments),I=k,z.method.$$p=m,z.method.apply(z.receiver,I)},-1),h(H,"$curry",function(R){var m=this;return m.method.$curry(R)},-1),h(H,"$>>",function(R){var m=this;return m.method["$>>"](R)}),h(H,"$<<",function(R){var m=this;return m.method["$<<"](R)}),h(H,"$unbind",function(){var R=this;return B("UnboundMethod").$new(R.receiver.$class(),R.owner,R.method,R.name)}),h(H,"$to_proc",function(){var R=this,m=R.$call.bind(R);return m.$$unbound=R.method,m.$$is_lambda=!0,m.$$arity=R.method.$$arity==null?R.method.length:R.method.$$arity,m.$$parameters=R.method.$$parameters,m}),h(H,"$inspect",function(){var R=this;return"#<"+R.$class()+": "+R.receiver.$class()+"#"+R.name+" (defined in "+R.owner+" in "+R.$source_location().$join(":")+")>"}),Q(H,"[]","call"),Q(H,"===","call")}("::",null),function($e,Y){var H=A($e,Y,"UnboundMethod"),ee=H.$$prototype;return ee.method=ee.owner=ee.name=ee.source=b,H.$attr_reader("source","owner","name"),h(H,"$initialize",function(R,m,k,I){var z=this;return z.source=R,z.owner=m,z.method=k,z.name=I,z.$$method=k}),h(H,"$arity",function(){var R=this;return R.method.$arity()}),h(H,"$parameters",function(){var R=this;return R.method.$$parameters}),h(H,"$source_location",function(){var R=this,m=b;return N(m=R.method.$$source_location)?m:["(eval)",0]}),h(H,"$comments",function(){var R=this,m=b;return N(m=R.method.$$comments)?m:[]}),h(H,"$bind",function(R){var m=this;if(m.owner.$$is_module||n.is_a(R,m.owner))return B("Method").$new(R,m.owner,m.method,m.name);W.$raise(B("TypeError"),"can't bind singleton method to a different class (expected "+R+".kind_of?("+m.owner+" to be true)")}),h(H,"$bind_call",function Z(R,m){var k=Z.$$p||b,I,z,U=this;return Z.$$p=null,I=M(arguments,1),z=I,L(U.$bind(R),"call",K(z),k.$to_proc())},-2),h(H,"$inspect",function(){var R=this;return"#<"+R.$class()+": "+R.source+"#"+R.name+" (defined in "+R.owner+" in "+R.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(n){var A=n.gvars,h=n.const_set,N=n.Object,M=n.nil;return n.add_stubs("new"),A["&"]=A["~"]=A["`"]=A["'"]=M,A.LOADED_FEATURES=A['"']=n.loaded_features,A.LOAD_PATH=A[":"]=[],A["/"]=`
`,A[","]=M,h("::","ARGV",[]),h("::","ARGF",N.$new()),h("::","ENV",new Map),A.VERBOSE=!1,A.DEBUG=!1,A.SAFE=0};Opal.modules["corelib/io"]=function(n){var A=n.klass,h=n.const_set,N=n.not,M=n.truthy,Q=n.def,W=n.return_ivar,L=n.return_val,K=n.slice,b=n.Kernel,B=n.gvars,$e=n.send,Y=n.to_a,H=n.rb_plus,ee=n.neqeq,Z=n.range,R=n.eqeq,m=n.to_ary,k=n.rb_gt,I=n.assign_ivar_val,z=n.alias,U,w=n.nil,S=n.$$$;n.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(q,v){var s=A(q,v,"IO"),f=s.$$prototype;return f.read_buffer=f.closed=w,h(s,"SEEK_SET",0),h(s,"SEEK_CUR",1),h(s,"SEEK_END",2),h(s,"SEEK_DATA",3),h(s,"SEEK_HOLE",4),h(s,"READABLE",1),h(s,"WRITABLE",4),s.$attr_reader("eof"),s.$attr_accessor("read_proc","sync","tty","write_proc"),Q(s,"$initialize",function(g,c){var l=this;return c==null&&(c="r"),l.fd=g,l.flags=c,l.eof=!1,M(c["$include?"]("r"))&&N(c["$match?"](/[wa+]/))?l.closed="write":M(c["$match?"](/[wa]/))&&N(c["$match?"](/[r+]/))?l.closed="read":w},-2),Q(s,"$fileno",W("fd")),Q(s,"$tty?",function(){var g=this;return g.tty==!0}),Q(s,"$write",function(g){var c=this;return c.write_proc(g),g.$size()}),Q(s,"$flush",L(w)),Q(s,"$<<",function(g){var c=this;return c.$write(g),c}),Q(s,"$print",function(g){var c,l,p=this;B[","]==null&&(B[","]=w),c=K(arguments),l=c;for(var C=0,_=l.length;C<_;C++)l[C]=b.$String(l[C]);return p.$write(l.join(B[","])),w},-1),Q(s,"$puts",function(g){var c,l,p=this;c=K(arguments),l=c;var C;if(l.length===0)return p.$write(`
`),w;for(var _=0,a=l.length;_<a;_++)if(l[_].$$is_array){var $=l[_].$flatten();$.length>0&&$e(p,"puts",Y($))}else l[_].$$is_string?C=l[_].valueOf():C=b.$String(l[_]),C.endsWith(`
`)||(C+=`
`),p.$write(C);return w},-1),Q(s,"$getc",function(){var g=this,c=w,l=w,p=w;g.read_buffer=M(c=g.read_buffer)?c:"",l="";do if(g.read_buffer=H(g.read_buffer,l),ee(g.read_buffer,""))return p=g.read_buffer["$[]"](0),g.read_buffer=g.read_buffer["$[]"](Z(1,-1,!1)),p;while(M(l=g.$sysread_noraise(1)));return w}),Q(s,"$getbyte",function(){var g,c=this;return g=c.$getc(),g===w||g==null?w:g.$ord()}),Q(s,"$readbyte",function(){var g=this;return g.$readchar().$ord()}),Q(s,"$readchar",function(){var g=this,c=w;return M(c=g.$getc())?c:b.$raise(S("EOFError"),"end of file reached")}),Q(s,"$readline",function(g){var c,l,p=this,C=w;return c=K(arguments),l=c,M(C=$e(p,"gets",Y(l)))?C:b.$raise(S("EOFError"),"end of file reached")},-1),Q(s,"$gets",function(g,c,l){var p,C,_=this,a=w,$=w,t=w,e=w,r=w,i=w;B["/"]==null&&(B["/"]=w),g==null&&(g=!1),c==null&&(c=w),l==null&&(l=new Map),M(g.$$is_number)&&N(c)&&(p=[!1,g,c],g=p[0],c=p[1],l=p[2]),M(g.$$is_hash)&&N(c)&&R(l,new Map)?(p=[!1,w,g],g=p[0],c=p[1],l=p[2]):M(c.$$is_hash)&&R(l,new Map)&&(p=[g,w,c],g=p[0],c=p[1],l=p[2]),a=g,R(g,!1)&&(g=B["/"]),R(g,"")&&(g=/\r?\n\r?\n/),g=M($=g)?$:"",R(a,"")||(g=g.$to_str()),t=R(a,"")?2:g.$length(),R(g," ")&&(g=/ /),_.read_buffer=M($=_.read_buffer)?$:"",e="",r=w;do if(_.read_buffer=H(_.read_buffer,e),ee(g,"")&&M(M(g.$$is_regexp)?_.read_buffer["$match?"](g):_.read_buffer["$include?"](g))){i=_.read_buffer,C=_.read_buffer.$split(g,2),p=m(C),r=p[0]==null?w:p[0],_.read_buffer=p[1]==null?w:p[1],ee(r,i)&&(r=H(r,i["$[]"](r.$length(),t)));break}while(M(e=_.$sysread_noraise(R(g,"")?65536:1)));return M(r)||(p=[M($=_.read_buffer)?$:"",""],r=p[0],_.read_buffer=p[1],R(r,"")&&(r=w)),M(r)&&(M(c)&&(r=r["$[]"](n.Range.$new(0,c,!0)),_.read_buffer=H(r["$[]"](n.Range.$new(c,-1,!1)),_.read_buffer)),M(l["$[]"]("chomp"))&&(r=r.$sub(/\r?\n$/,"")),R(a,"")&&(r=r.$sub(/^[\r\n]+/,""))),R(a,!1)&&(B._=r),r},-1),Q(s,"$sysread",function(g){var c=this,l=w;return M(l=c.read_proc(g))?l:(c.eof=!0,b.$raise(S("EOFError"),"end of file reached"))}),Q(s,"$sysread_noraise",function(g){var c=this;try{return c.$sysread(g)}catch(l){if(n.rescue(l,[S("EOFError")]))try{return w}finally{n.pop_exception(l)}else throw l}}),Q(s,"$readpartial",function(g){var c,l=this,p=w,C=w,_=w;return l.read_buffer=M(p=l.read_buffer)?p:"",C=l.$sysread(g),c=[H(l.read_buffer,M(p=C)?p:""),""],_=c[0],l.read_buffer=c[1],R(_,"")&&(_=w),_}),Q(s,"$read",function(g){var c,l=this,p=w,C=w,_=w;g==null&&(g=w),l.read_buffer=M(p=l.read_buffer)?p:"",C="",_=w;do if(l.read_buffer=H(l.read_buffer,C),M(g)&&M(k(l.read_buffer.$length(),g)))return c=[l.read_buffer["$[]"](n.Range.$new(0,g,!0)),l.read_buffer["$[]"](n.Range.$new(g,-1,!1))],_=c[0],l.read_buffer=c[1],_;while(M(C=l.$sysread_noraise(M(p=g)?p:65536)));return c=[l.read_buffer,""],_=c[0],l.read_buffer=c[1],_},-1),Q(s,"$readlines",function(g){var c=this;return B["/"]==null&&(B["/"]=w),g==null&&(g=B["/"]),c.$each_line(g).$to_a()},-1),Q(s,"$each",function E(g,c){var l=E.$$p||w,p,C,_,a=this,$=w;if(B["/"]==null&&(B["/"]=w),E.$$p=null,p=K(arguments),p.length>0&&(C=p.shift()),C==null&&(C=B["/"]),_=p,l===w)return $e(a,"enum_for",["each",C].concat(Y(_)));for(;M($=$e(a,"gets",[C].concat(Y(_))));)n.yield1(l,$);return a},-1),Q(s,"$each_byte",function E(){var g=E.$$p||w,c=this,l=w;if(E.$$p=null,g===w)return c.$enum_for("each_byte");for(;M(l=c.$getbyte());)n.yield1(g,l);return c}),Q(s,"$each_char",function E(){var g=E.$$p||w,c=this,l=w;if(E.$$p=null,g===w)return c.$enum_for("each_char");for(;M(l=c.$getc());)n.yield1(g,l);return c}),Q(s,"$close",I("closed","both")),Q(s,"$close_read",function(){var g=this;return R(g.closed,"write")?g.closed="both":g.closed="read"}),Q(s,"$close_write",function(){var g=this;return R(g.closed,"read")?g.closed="both":g.closed="write"}),Q(s,"$closed?",function(){var g=this;return g.closed["$=="]("both")}),Q(s,"$closed_read?",function(){var g=this,c=w;return M(c=g.closed["$=="]("read"))?c:g.closed["$=="]("both")}),Q(s,"$closed_write?",function(){var g=this,c=w;return M(c=g.closed["$=="]("write"))?c:g.closed["$=="]("both")}),Q(s,"$check_writable",function(){var g=this;return M(g["$closed_write?"]())?b.$raise(S("IOError"),"not opened for writing"):w}),Q(s,"$check_readable",function(){var g=this;return M(g["$closed_read?"]())?b.$raise(S("IOError"),"not opened for reading"):w}),z(s,"each_line","each"),z(s,"eof?","eof")}("::",null),h("::","STDIN",B.stdin=S("IO").$new(0,"r")),h("::","STDOUT",B.stdout=S("IO").$new(1,"w")),h("::","STDERR",B.stderr=S("IO").$new(2,"w"));var P=n.global.console;return S("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(q){process.stdout.write(q)}:function(q){P.log(q)}),S("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(q){process.stderr.write(q)}:function(q){P.warn(q)}),U=[function(q){var v=prompt();return v!==null?v+`
`:w}],$e(S("STDIN"),"read_proc=",U),U[U.length-1]};Opal.modules["opal/regexp_anchors"]=function(n){var A=n.module,h=n.const_set,N=[];n.nil;var M=n.$$$;return n.add_stubs("new"),function(Q,W){var L=A(Q,"Opal"),K=[L].concat(W),b=n.$r(K);return h(L,"REGEXP_START","^"),h(L,"REGEXP_END","$"),h(L,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),h(L,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),h(L,"INLINE_IDENTIFIER_REGEXP",b("Regexp").$new("[^"+M(L,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+M(L,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),h(L,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),h(L,"CONST_NAME_REGEXP",b("Regexp").$new(""+M(L,"REGEXP_START")+"(::)?[A-Z][^"+M(L,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+M(L,"REGEXP_END")))}(N[0],N)};Opal.modules["opal/mini"]=function(n){var A=n.Object;return n.nil,n.add_stubs("require"),A.$require("opal/base"),A.$require("corelib/nil"),A.$require("corelib/boolean"),A.$require("corelib/string"),A.$require("corelib/comparable"),A.$require("corelib/enumerable"),A.$require("corelib/enumerator"),A.$require("corelib/array"),A.$require("corelib/hash"),A.$require("corelib/number"),A.$require("corelib/range"),A.$require("corelib/proc"),A.$require("corelib/method"),A.$require("corelib/regexp"),A.$require("corelib/variables"),A.$require("corelib/io"),A.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(n){var A=n.coerce_to,h=n.module,N=n.slice,M=n.truthy,Q=n.eqeq,W=n.Opal,L=n.Kernel,K=n.gvars,b=n.def,B=n.alias,$e=n.nil,Y=n.$$$;return n.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(H){var ee=h(H,"Kernel");return b(ee,"$format",function(R,m){var k,I,z=$e;K.DEBUG==null&&(K.DEBUG=$e),k=N(arguments,1),I=k,Q(I.$length(),1)&&M(I["$[]"](0)["$respond_to?"]("to_ary"))&&(z=W["$coerce_to?"](I["$[]"](0),Y("Array"),"to_ary"),M(z["$nil?"]())||(I=z.$to_a()));var U="",w=0,S,P,q=R.length,v,s,f,E,g,c,l,p,C,_,a,$,t,e=1,r=0,i,u=0,o=1,y=2,j=4,D=8,F=16,G=32,re=64,ae=128;function le(){i&G&&L.$raise(Y("ArgumentError"),"flag after width"),i&ae&&L.$raise(Y("ArgumentError"),"flag after precision")}function ce(){i&G&&L.$raise(Y("ArgumentError"),"width given twice"),i&ae&&L.$raise(Y("ArgumentError"),"width after precision")}function de(T){return T>=I.length&&L.$raise(Y("ArgumentError"),"too few arguments"),I[T]}function he(){switch(r){case-1:L.$raise(Y("ArgumentError"),"unnumbered("+e+") mixed with numbered");case-2:L.$raise(Y("ArgumentError"),"unnumbered("+e+") mixed with named")}return r=e++,de(r-1)}function ve(T){return r>0&&L.$raise(Y("ArgumentError"),"numbered("+T+") after unnumbered("+r+")"),r===-2&&L.$raise(Y("ArgumentError"),"numbered("+T+") after named"),T<1&&L.$raise(Y("ArgumentError"),"invalid index - "+T+"$"),r=-1,de(T-1)}function me(){return t===void 0?he():t}function be(T){for(var V,X="";;P++){if(P===q&&L.$raise(Y("ArgumentError"),"malformed format string - %*[0-9]"),R.charCodeAt(P)<48||R.charCodeAt(P)>57)return P--,V=parseInt(X,10)||0,V>2147483647&&L.$raise(Y("ArgumentError"),""+T+" too big"),V;X+=R.charAt(P)}}function ie(T){var V,X=be(T);return R.charAt(P+1)==="$"?(P++,V=ve(X)):V=he(),V.$to_int()}for(P=R.indexOf("%");P!==-1;P=R.indexOf("%",P)){switch(s=void 0,i=u,E=-1,g=-1,t=void 0,S=P,P++,R.charAt(P)){case"%":w=P;case"":case`
`:case"\0":P++;continue}e:for(;P<q;P++)switch(R.charAt(P)){case" ":le(),i|=F;continue e;case"#":le(),i|=o;continue e;case"+":le(),i|=j;continue e;case"-":le(),i|=y;continue e;case"0":le(),i|=D;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(c=be("width"),R.charAt(P+1)==="$"){if(P+2===q){s="%",P++;break e}t!==void 0&&L.$raise(Y("ArgumentError"),"value given twice - %"+c+"$"),t=ve(c),P++}else ce(),i|=G,E=c;continue e;case"<":case"{":for(p=R.charAt(P)==="<"?">":"}",l="",P++;;P++){if(P===q&&L.$raise(Y("ArgumentError"),"malformed name - unmatched parenthesis"),R.charAt(P)===p){if(r>0&&L.$raise(Y("ArgumentError"),"named "+l+" after unnumbered("+r+")"),r===-1&&L.$raise(Y("ArgumentError"),"named "+l+" after numbered"),r=-2,(I[0]===void 0||!I[0].$$is_hash)&&L.$raise(Y("ArgumentError"),"one hash required"),t=I[0].$fetch(l),p===">")continue e;if(s=t.toString(),g!==-1&&(s=s.slice(0,g)),i&y)for(;s.length<E;)s=s+" ";else for(;s.length<E;)s=" "+s;break e}l+=R.charAt(P)}case"*":P++,ce(),i|=G,E=ie("width"),E<0&&(i|=y,E=-E);continue e;case".":if(i&ae&&L.$raise(Y("ArgumentError"),"precision given twice"),i|=re|ae,g=0,P++,R.charAt(P)==="*"){P++,g=ie("precision"),g<0&&(i&=~re);continue e}g=be("precision");continue e;case"d":case"i":case"u":if(v=L.$Integer(me()),v>=0){for(s=v.toString();s.length<g;)s="0"+s;if(i&y)for((i&j||i&F)&&(s=(i&j?"+":" ")+s);s.length<E;)s=s+" ";else if(i&D&&g===-1){for(;s.length<E-(i&j||i&F?1:0);)s="0"+s;(i&j||i&F)&&(s=(i&j?"+":" ")+s)}else for((i&j||i&F)&&(s=(i&j?"+":" ")+s);s.length<E;)s=" "+s}else{for(s=(-v).toString();s.length<g;)s="0"+s;if(i&y)for(s="-"+s;s.length<E;)s=s+" ";else if(i&D&&g===-1){for(;s.length<E-1;)s="0"+s;s="-"+s}else for(s="-"+s;s.length<E;)s=" "+s}break e;case"b":case"B":case"o":case"x":case"X":switch(R.charAt(P)){case"b":case"B":C=2,_="0b",a=/^1+/,$="1";break;case"o":C=8,_="0",a=/^3?7+/,$="7";break;case"x":case"X":C=16,_="0x",a=/^f+/,$="f";break}if(v=L.$Integer(me()),v>=0){for(s=v.toString(C);s.length<g;)s="0"+s;if(i&y)for((i&j||i&F)&&(s=(i&j?"+":" ")+s),i&o&&v!==0&&(s=_+s);s.length<E;)s=s+" ";else if(i&D&&g===-1){for(;s.length<E-(i&j||i&F?1:0)-(i&o&&v!==0?_.length:0);)s="0"+s;i&o&&v!==0&&(s=_+s),(i&j||i&F)&&(s=(i&j?"+":" ")+s)}else for(i&o&&v!==0&&(s=_+s),(i&j||i&F)&&(s=(i&j?"+":" ")+s);s.length<E;)s=" "+s}else if(i&j||i&F){for(s=(-v).toString(C);s.length<g;)s="0"+s;if(i&y)for(i&o&&(s=_+s),s="-"+s;s.length<E;)s=s+" ";else if(i&D&&g===-1){for(;s.length<E-1-(i&o?2:0);)s="0"+s;i&o&&(s=_+s),s="-"+s}else for(i&o&&(s=_+s),s="-"+s;s.length<E;)s=" "+s}else{for(s=(v>>>0).toString(C).replace(a,$);s.length<g-2;)s=$+s;if(i&y)for(s=".."+s,i&o&&(s=_+s);s.length<E;)s=s+" ";else if(i&D&&g===-1){for(;s.length<E-2-(i&o?_.length:0);)s=$+s;s=".."+s,i&o&&(s=_+s)}else for(s=".."+s,i&o&&(s=_+s);s.length<E;)s=" "+s}R.charAt(P)===R.charAt(P).toUpperCase()&&(s=s.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(v=L.$Float(me()),v>=0||isNaN(v)){if(v===1/0)s="Inf";else switch(R.charAt(P)){case"f":s=v.toFixed(g===-1?6:g);break;case"e":case"E":s=v.toExponential(g===-1?6:g);break;case"g":case"G":s=v.toExponential(),f=parseInt(s.split("e")[1],10),f<-4||f>=(g===-1?6:g)||(s=v.toPrecision(g===-1?i&o?6:void 0:g));break}if(i&y)for((i&j||i&F)&&(s=(i&j?"+":" ")+s);s.length<E;)s=s+" ";else if(i&D&&v!==1/0&&!isNaN(v)){for(;s.length<E-(i&j||i&F?1:0);)s="0"+s;(i&j||i&F)&&(s=(i&j?"+":" ")+s)}else for((i&j||i&F)&&(s=(i&j?"+":" ")+s);s.length<E;)s=" "+s}else{if(v===-1/0)s="Inf";else switch(R.charAt(P)){case"f":s=(-v).toFixed(g===-1?6:g);break;case"e":case"E":s=(-v).toExponential(g===-1?6:g);break;case"g":case"G":s=(-v).toExponential(),f=parseInt(s.split("e")[1],10),f<-4||f>=(g===-1?6:g)||(s=(-v).toPrecision(g===-1?i&o?6:void 0:g));break}if(i&y)for(s="-"+s;s.length<E;)s=s+" ";else if(i&D&&v!==-1/0){for(;s.length<E-1;)s="0"+s;s="-"+s}else for(s="-"+s;s.length<E;)s=" "+s}R.charAt(P)===R.charAt(P).toUpperCase()&&v!==1/0&&v!==-1/0&&!isNaN(v)&&(s=s.toUpperCase()),s=s.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":L.$raise(Y("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(v=me(),v["$respond_to?"]("to_ary")&&(v=v.$to_ary()[0]),v["$respond_to?"]("to_str")?s=v.$to_str():s=String.fromCharCode(A(v,Y("Integer"),"to_int")),s.length!==1&&L.$raise(Y("ArgumentError"),"%c requires a character"),i&y)for(;s.length<E;)s=s+" ";else for(;s.length<E;)s=" "+s;break e;case"p":if(s=me().$inspect(),g!==-1&&(s=s.slice(0,g)),i&y)for(;s.length<E;)s=s+" ";else for(;s.length<E;)s=" "+s;break e;case"s":if(s=me().$to_s(),g!==-1&&(s=s.slice(0,g)),i&y)for(;s.length<E;)s=s+" ";else for(;s.length<E;)s=" "+s;break e;default:L.$raise(Y("ArgumentError"),"malformed format string - %"+R.charAt(P))}s===void 0&&L.$raise(Y("ArgumentError"),"malformed format string - %"),U+=R.slice(w,S)+s,w=P+1}return K.DEBUG&&r>=0&&e<I.length&&L.$raise(Y("ArgumentError"),"too many arguments for format string"),U+R.slice(w)},-2),B(ee,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(n){var A=n.klass,h=n.rb_plus,N=n.truthy,M=n.send,Q=n.defs,W=n.eqeq,L=n.def,K=n.return_ivar,b=n.return_val,B=n.slice,$e=n.Kernel,Y=n.Opal,H=n.rb_lt,ee,Z=n.top,R=[],m=n.$r(R),k=n.nil,I=n.$$$;return n.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),Z.$require("corelib/string"),function(z,U,w){var S=A(z,U,"Encoding"),P=[S].concat(w),q=S.$$prototype;return q.name=q.dummy=k,Q(S,"$register",function v(s,f){var E=v.$$p||k,g=this,c=k,l=k,p=k,C=k,_=k,a=k;return v.$$p=null,f==null&&(f=new Map),c=h([s],N(l=f["$[]"]("aliases"))?l:[]),p=N(l=f["$[]"]("ascii"))&&l,C=N(l=f["$[]"]("dummy"))&&l,N(f["$[]"]("inherits"))?(_=f["$[]"]("inherits").$clone(),_.$initialize(s,c,p,C)):_=g.$new(s,c,p,C),E!==k&&M(_,"instance_eval",[],E.$to_proc()),a=n.encodings,M(c,"each",[],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=k),e.$const_set(t.$tr("-","_"),_),a[t]=_},{$$s:g})},-2),Q(S,"$find",function(s){var f=this;return W(s,"default_external")?f.$default_external():n.find_encoding(s)}),S.$singleton_class().$attr_accessor("default_external"),S.$attr_reader("name","names"),L(S,"$initialize",function(s,f,E,g){var c=this;return c.name=s,c.names=f,c.ascii=E,c.dummy=g}),L(S,"$ascii_compatible?",K("ascii")),L(S,"$dummy?",K("dummy")),L(S,"$binary?",b(!1)),L(S,"$to_s",K("name")),L(S,"$inspect",function(){var s=this;return"#<Encoding:"+s.name+(N(s.dummy)?" (dummy)":k)+">"}),L(S,"$charsize",function(s){for(var f=0,E=0,g=s.length;E<g;E++){var c=s.charCodeAt(E);c>=55296&&c<=56319||f++}return f}),L(S,"$each_char",function v(s){var f=v.$$p||k;v.$$p=null;for(var E="",g=0,c=s.length;g<c;g++){var l=s.charCodeAt(g),p=s.charAt(g);if(l>=56320&&l<=57343){E=p;continue}else l>=55296&&l<=56319&&(p=E+p);s.encoding.name!="UTF-8"&&(p=new String(p),p.encoding=s.encoding),n.yield1(f,p)}}),L(S,"$each_byte",function(s){return B(arguments),$e.$raise(I("NotImplementedError"))},-1),L(S,"$bytesize",function(s){return B(arguments),$e.$raise(I("NotImplementedError"))},-1),A("::",I("StandardError"),"EncodingError"),A("::",I("EncodingError"),"CompatibilityError"),A(P[0],I("EncodingError"),"UndefinedConversionError"),k}("::",null,R),M(I("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function z(){var U=z.$$s==null?this:z.$$s;return L(U,"$each_byte",function w(S){var P=w.$$p||k;w.$$p=null;for(var q=1/0,v,s=S.length,f=null,E=0;E<s;++E){if(v=S.charCodeAt(E),v>55295&&v<57344){if(!f){if(v>56319){(q-=3)>-1&&(n.yield1(P,239),n.yield1(P,191),n.yield1(P,189));continue}else if(E+1===s){(q-=3)>-1&&(n.yield1(P,239),n.yield1(P,191),n.yield1(P,189));continue}f=v;continue}if(v<56320){(q-=3)>-1&&(n.yield1(P,239),n.yield1(P,191),n.yield1(P,189)),f=v;continue}v=(f-55296<<10|v-56320)+65536}else f&&(q-=3)>-1&&(n.yield1(P,239),n.yield1(P,191),n.yield1(P,189));if(f=null,v<128){if((q-=1)<0)break;n.yield1(P,v)}else if(v<2048){if((q-=2)<0)break;n.yield1(P,v>>6|192),n.yield1(P,v&63|128)}else if(v<65536){if((q-=3)<0)break;n.yield1(P,v>>12|224),n.yield1(P,v>>6&63|128),n.yield1(P,v&63|128)}else if(v<1114112){if((q-=4)<0)break;n.yield1(P,v>>18|240),n.yield1(P,v>>12&63|128),n.yield1(P,v>>6&63|128),n.yield1(P,v&63|128)}}}),L(U,"$bytesize",function(S){return S.$bytes().$length()})},{$$s:Z}),M(I("Encoding"),"register",["UTF-16LE"],function z(){var U=z.$$s==null?this:z.$$s;return L(U,"$each_byte",function w(S){var P=w.$$p||k;w.$$p=null;for(var q=0,v=S.length;q<v;q++){var s=S.charCodeAt(q);n.yield1(P,s&255),n.yield1(P,s>>8)}}),L(U,"$bytesize",function(S){return S.length*2})},{$$s:Z}),M(I("Encoding"),"register",["UTF-16BE",new Map([["inherits",I(I("Encoding"),"UTF_16LE")]])],function z(){var U=z.$$s==null?this:z.$$s;return L(U,"$each_byte",function w(S){var P=w.$$p||k;w.$$p=null;for(var q=0,v=S.length;q<v;q++){var s=S.charCodeAt(q);n.yield1(P,s>>8),n.yield1(P,s&255)}})},{$$s:Z}),M(I("Encoding"),"register",["UTF-32LE"],function z(){var U=z.$$s==null?this:z.$$s;return L(U,"$each_byte",function w(S){var P=w.$$p||k;w.$$p=null;for(var q=0,v=S.length;q<v;q++){var s=S.charCodeAt(q);n.yield1(P,s&255),n.yield1(P,s>>8),n.yield1(P,0),n.yield1(P,0)}}),L(U,"$bytesize",function(S){return S.length*4})},{$$s:Z}),M(I("Encoding"),"register",["UTF-32BE",new Map([["inherits",I(I("Encoding"),"UTF_32LE")]])],function z(){var U=z.$$s==null?this:z.$$s;return L(U,"$each_byte",function w(S){var P=w.$$p||k;w.$$p=null;for(var q=0,v=S.length;q<v;q++){var s=S.charCodeAt(q);n.yield1(P,0),n.yield1(P,0),n.yield1(P,s>>8),n.yield1(P,s&255)}})},{$$s:Z}),M(I("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function z(){var U=z.$$s==null?this:z.$$s;return L(U,"$each_char",function w(S){var P=w.$$p||k;w.$$p=null;for(var q=0,v=S.length;q<v;q++){var s=new String(S.charAt(q));s.encoding=S.encoding,n.yield1(P,s)}}),L(U,"$charsize",function(S){return S.length}),L(U,"$each_byte",function w(S){var P=w.$$p||k;w.$$p=null;for(var q=0,v=S.length;q<v;q++){var s=S.charCodeAt(q);n.yield1(P,s&255)}}),L(U,"$bytesize",function(S){return S.length}),L(U,"$binary?",b(!0))},{$$s:Z}),I("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",I(I("Encoding"),"ASCII_8BIT")]])),I("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",I(I("Encoding"),"ASCII_8BIT")]])),function(z,U){var w=A(z,U,"String"),S=w.$$prototype;return S.internal_encoding=S.bytes=S.encoding=k,w.$attr_reader("encoding"),w.$attr_reader("internal_encoding"),n.prop(String.prototype,"bytes",k),n.prop(String.prototype,"encoding",I(I("Encoding"),"UTF_8")),n.prop(String.prototype,"internal_encoding",I(I("Encoding"),"UTF_8")),L(w,"$b",function(){var q=this;return q.$dup().$force_encoding("binary")}),L(w,"$bytesize",function(){var q=this;return q.internal_encoding.$bytesize(q)}),L(w,"$each_byte",function P(){var q=P.$$p||k,v=this;return P.$$p=null,q===k?M(v,"enum_for",["each_byte"],function s(){var f=s.$$s==null?this:s.$$s;return f.$bytesize()},{$$s:v}):(M(v.internal_encoding,"each_byte",[v],q.$to_proc()),v)}),L(w,"$bytes",function(){var q=this,v=k;return typeof q=="string"?new String(q).$each_byte().$to_a():(q.bytes=N(v=q.bytes)?v:q.$each_byte().$to_a(),q.bytes.$dup())}),L(w,"$each_char",function P(){var q=P.$$p||k,v=this;return P.$$p=null,q===k?M(v,"enum_for",["each_char"],function s(){var f=s.$$s==null?this:s.$$s;return f.$length()},{$$s:v}):(M(v.encoding,"each_char",[v],q.$to_proc()),v)}),L(w,"$chars",function P(){var q=P.$$p||k,v=this;return P.$$p=null,N(q)?M(v,"each_char",[],q.$to_proc()):v.$each_char().$to_a()}),L(w,"$each_codepoint",function P(){var q=P.$$p||k,v=this;if(P.$$p=null,q===k)return v.$enum_for("each_codepoint");for(var s=0,f=v.length;s<f;s++)n.yield1(q,v.codePointAt(s));return v}),L(w,"$codepoints",function P(){var q=P.$$p||k,v=this;return P.$$p=null,q!==k?M(v,"each_codepoint",[],q.$to_proc()):v.$each_codepoint().$to_a()}),L(w,"$encode",function(q){var v=this;return n.enc(v,q)}),L(w,"$force_encoding",function(q){var v=this,s=v;return q===s.encoding||(q=Y["$coerce_to!"](q,I("String"),"to_s"),q=I("Encoding").$find(q),q===s.encoding)||(s=n.set_encoding(s,q)),s}),L(w,"$getbyte",function(q){var v=this,s=k;return s=v.$bytes(),q=Y["$coerce_to!"](q,I("Integer"),"to_int"),N(H(s.$length(),q))?k:s["$[]"](q)}),L(w,"$initialize_copy",function(q){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),L(w,"$valid_encoding?",b(!0))}("::",null),ee=[I(m("Encoding"),"UTF_8")],M(I("Encoding"),"default_external=",ee),ee[ee.length-1]};Opal.modules["corelib/math"]=function(n){var A=n.type_error,h=n.module,N=n.const_set,M=n.Class,Q=n.slice,W=n.Kernel,L=n.defs,K=n.truthy,b=n.send,B=n.def,$e=n.rb_minus,Y=n.eqeqeq,H=n.rb_divide,ee=[],Z=n.nil,R=n.$$$;return n.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(m,k){var I=h(m,"Math"),z=[I].concat(k),U=n.$r(z);return N(I,"E",Math.E),N(I,"PI",Math.PI),N(I,"DomainError",M.$new(R("StandardError"))),L(I,"$checked",function(S,P){var q,v;if(q=Q(arguments,1),v=q,isNaN(v[0])||v.length==2&&isNaN(v[1]))return NaN;var s=Math[S].apply(null,v);return isNaN(s)&&W.$raise(U("DomainError"),'Numerical argument is out of domain - "'+S+'"'),s},-2),L(I,"$float!",function(S){try{return W.$Float(S)}catch(P){if(n.rescue(P,[R("ArgumentError")]))try{return W.$raise(A(S,R("Float")))}finally{n.pop_exception(P)}else throw P}}),L(I,"$integer!",function(S){try{return W.$Integer(S)}catch(P){if(n.rescue(P,[R("ArgumentError")]))try{return W.$raise(A(S,R("Integer")))}finally{n.pop_exception(P)}else throw P}}),I.$module_function(),K(typeof Math.erf<"u")||n.prop(Math,"erf",function(w){var S=.254829592,P=-.284496736,q=1.421413741,v=-1.453152027,s=1.061405429,f=.3275911,E=1;w<0&&(E=-1),w=Math.abs(w);var g=1/(1+f*w),c=1-((((s*g+v)*g+q)*g+P)*g+S)*g*Math.exp(-w*w);return E*c}),K(typeof Math.erfc<"u")||n.prop(Math,"erfc",function(w){var S=Math.abs(w),P=1/(.5*S+1),q=P*.17087277+-.82215223,v=P*q+1.48851587,s=P*v+-1.13520398,f=P*s+.27886807,E=P*f+-.18628806,g=P*E+.09678418,c=P*g+.37409196,l=P*c+1.00002368,p=P*l,C=-S*S-1.26551223+p,_=P*Math.exp(C);return w<0?2-_:_}),b(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function w(S){var P=w.$$s==null?this:w.$$s;return S==null&&(S=Z),b(P,"define_method",[S],function(v){return v==null&&(v=Z),R("Math").$checked(S,R("Math")["$float!"](v))})},{$$s:I}),B(I,"$atan2",function(S,P){return R("Math").$checked("atan2",R("Math")["$float!"](S),R("Math")["$float!"](P))}),B(I,"$hypot",function(S,P){return R("Math").$checked("hypot",R("Math")["$float!"](S),R("Math")["$float!"](P))}),B(I,"$frexp",function(S){if(S=U("Math")["$float!"](S),isNaN(S))return[NaN,0];var P=Math.floor(Math.log(Math.abs(S))/Math.log(2))+1,q=S/Math.pow(2,P);return[q,P]}),B(I,"$gamma",function(S){S=U("Math")["$float!"](S);var P,q,v,s,f,E,g,c,l,p=4.7421875,C=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(S))return NaN;if(S===0&&1/S<0)return-1/0;if((S===-1||S===-1/0)&&W.$raise(U("DomainError"),'Numerical argument is out of domain - "gamma"'),U("Integer")["$==="](S)){if(S<=0)return isFinite(S)?1/0:NaN;if(S>171)return 1/0;for(s=S-2,f=S-1;s>1;)f*=s,s--;return f==0&&(f=1),f}if(S<.5)return Math.PI/(Math.sin(Math.PI*S)*R("Math").$gamma($e(1,S)));if(S>=171.35)return 1/0;if(S>85)return E=S*S,g=E*S,c=g*S,l=c*S,Math.sqrt(2*Math.PI/S)*Math.pow(S/Math.E,S)*(1+1/(12*S)+1/(288*E)-139/(51840*g)-571/(2488320*c)+163879/(209018880*l)+5246819/(75246796800*l*S));for(S-=1,v=C[0],P=1;P<C.length;++P)v+=C[P]/(S+P);return q=S+p+.5,Math.sqrt(2*Math.PI)*Math.pow(q,S+.5)*Math.exp(-q)*v}),B(I,"$ldexp",function(S,P){return S=U("Math")["$float!"](S),P=U("Math")["$integer!"](P),isNaN(P)&&W.$raise(R("RangeError"),"float NaN out of range of integer"),S*Math.pow(2,P)}),B(I,"$lgamma",function(S){return S==-1?[1/0,1]:[Math.log(Math.abs(R("Math").$gamma(S))),R("Math").$gamma(S)<0?-1:1]}),B(I,"$log",function(S,P){return Y(R("String"),S)&&W.$raise(A(S,R("Float"))),K(P==null)?R("Math").$checked("log",R("Math")["$float!"](S)):(Y(R("String"),P)&&W.$raise(A(P,R("Float"))),H(R("Math").$checked("log",R("Math")["$float!"](S)),R("Math").$checked("log",R("Math")["$float!"](P))))},-2),B(I,"$log10",function(S){return Y(R("String"),S)&&W.$raise(A(S,R("Float"))),R("Math").$checked("log10",R("Math")["$float!"](S))}),B(I,"$log2",function(S){return Y(R("String"),S)&&W.$raise(A(S,R("Float"))),R("Math").$checked("log2",R("Math")["$float!"](S))}),B(I,"$tan",function(S){return S=R("Math")["$float!"](S),K(S["$infinite?"]())?R(R("Float"),"NAN"):R("Math").$checked("tan",R("Math")["$float!"](S))})}("::",ee)};Opal.modules["corelib/complex/base"]=function(n){var A=n.module,h=n.truthy,N=n.def,M=n.klass,Q=[],W=n.nil;return n.add_stubs("new,from_string"),function(L,K){var b=A(L,"Kernel"),B=[b].concat(K),$e=n.$r(B);return N(b,"$Complex",function(H,ee){return ee==null&&(ee=W),h(ee)?$e("Complex").$new(H,ee):$e("Complex").$new(H,0)},-2)}("::",Q),function(L,K,b){var B=M(L,K,"String"),$e=[B].concat(b),Y=n.$r($e);return N(B,"$to_c",function(){var ee=this;return Y("Complex").$from_string(ee)})}("::",null,Q)};Opal.modules["corelib/complex"]=function(n){var A=n.klass,h=n.truthy,N=n.eqeqeq,M=n.Kernel,Q=n.defs,W=n.rb_times,L=n.def,K=n.rb_plus,b=n.rb_minus,B=n.rb_divide,$e=n.eqeq,Y=n.to_ary,H=n.rb_gt,ee=n.neqeq,Z=n.return_val,R=n.const_set,m=n.alias,k=n.top,I=[],z=n.nil,U=n.$$$;return n.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),k.$require("corelib/numeric"),k.$require("corelib/complex/base"),function(w,S,P){var q=A(w,S,"Complex"),v=[q].concat(P),s=n.$r(v),f=q.$$prototype;return f.real=f.imag=z,Q(q,"$rect",function(g,c){var l=this;return c==null&&(c=0),N(U("Numeric"),g)&&h(g["$real?"]())&&N(U("Numeric"),c)&&h(c["$real?"]())||M.$raise(U("TypeError"),"not a real"),l.$new(g,c)},-2),Q(q,"$polar",function(g,c){var l=this;return c==null&&(c=0),N(U("Numeric"),g)&&h(g["$real?"]())&&N(U("Numeric"),c)&&h(c["$real?"]())||M.$raise(U("TypeError"),"not a real"),l.$new(W(g,U("Math").$cos(c)),W(g,U("Math").$sin(c)))},-2),q.$attr_reader("real","imag"),L(q,"$initialize",function(g,c){var l=this;return c==null&&(c=0),l.real=g,l.imag=c,l.$freeze()},-2),L(q,"$coerce",function(g){var c=this;return N(U("Complex"),g)?[g,c]:N(U("Numeric"),g)&&h(g["$real?"]())?[U("Complex").$new(g,0),c]:M.$raise(U("TypeError"),""+g.$class()+" can't be coerced into Complex")}),L(q,"$==",function(g){var c=this,l=z;return N(U("Complex"),g)?h(l=c.real["$=="](g.$real()))?c.imag["$=="](g.$imag()):l:N(U("Numeric"),g)&&h(g["$real?"]())?h(l=c.real["$=="](g))?c.imag["$=="](0):l:g["$=="](c)}),L(q,"$-@",function(){var g=this;return M.$Complex(g.real["$-@"](),g.imag["$-@"]())}),L(q,"$+",function(g){var c=this;return N(U("Complex"),g)?M.$Complex(K(c.real,g.$real()),K(c.imag,g.$imag())):N(U("Numeric"),g)&&h(g["$real?"]())?M.$Complex(K(c.real,g),c.imag):c.$__coerced__("+",g)}),L(q,"$-",function(g){var c=this;return N(U("Complex"),g)?M.$Complex(b(c.real,g.$real()),b(c.imag,g.$imag())):N(U("Numeric"),g)&&h(g["$real?"]())?M.$Complex(b(c.real,g),c.imag):c.$__coerced__("-",g)}),L(q,"$*",function(g){var c=this;return N(U("Complex"),g)?M.$Complex(b(W(c.real,g.$real()),W(c.imag,g.$imag())),K(W(c.real,g.$imag()),W(c.imag,g.$real()))):N(U("Numeric"),g)&&h(g["$real?"]())?M.$Complex(W(c.real,g),W(c.imag,g)):c.$__coerced__("*",g)}),L(q,"$/",function(g){var c=this;return N(U("Complex"),g)?N(U("Number"),c.real)&&h(c.real["$nan?"]())||N(U("Number"),c.imag)&&h(c.imag["$nan?"]())||N(U("Number"),g.$real())&&h(g.$real()["$nan?"]())||N(U("Number"),g.$imag())&&h(g.$imag()["$nan?"]())?U("Complex").$new(U(U("Float"),"NAN"),U(U("Float"),"NAN")):B(W(c,g.$conj()),g.$abs2()):N(U("Numeric"),g)&&h(g["$real?"]())?M.$Complex(c.real.$quo(g),c.imag.$quo(g)):c.$__coerced__("/",g)}),L(q,"$**",function(g){var c,l,p=this,C=z,_=z,a=z,$=z,t=z,e=z,r=z,i=z,u=z,o=z,y=z;if($e(g,0))return U("Complex").$new(1,0);if(N(U("Complex"),g))return l=p.$polar(),c=Y(l),C=c[0]==null?z:c[0],_=c[1]==null?z:c[1],a=g.$real(),$=g.$imag(),t=U("Math").$exp(b(W(a,U("Math").$log(C)),W($,_))),e=K(W(_,a),W($,U("Math").$log(C))),U("Complex").$polar(t,e);if(N(U("Integer"),g))if(h(H(g,0))){for(r=p,i=r,u=b(g,1);ee(u,0);){for(l=u.$divmod(2),c=Y(l),o=c[0]==null?z:c[0],y=c[1]==null?z:c[1];$e(y,0);)r=M.$Complex(b(W(r.$real(),r.$real()),W(r.$imag(),r.$imag())),W(W(2,r.$real()),r.$imag())),u=o,l=u.$divmod(2),c=Y(l),o=c[0]==null?z:c[0],y=c[1]==null?z:c[1];i=W(i,r),u=b(u,1)}return i}else return B(U("Rational").$new(1,1),p)["$**"](g["$-@"]());else return N(U("Float"),g)||N(U("Rational"),g)?(l=p.$polar(),c=Y(l),C=c[0]==null?z:c[0],_=c[1]==null?z:c[1],U("Complex").$polar(C["$**"](g),W(_,g))):p.$__coerced__("**",g)}),L(q,"$abs",function(){var g=this;return U("Math").$hypot(g.real,g.imag)}),L(q,"$abs2",function(){var g=this;return K(W(g.real,g.real),W(g.imag,g.imag))}),L(q,"$angle",function(){var g=this;return U("Math").$atan2(g.imag,g.real)}),L(q,"$conj",function(){var g=this;return M.$Complex(g.real,g.imag["$-@"]())}),L(q,"$denominator",function(){var g=this;return g.real.$denominator().$lcm(g.imag.$denominator())}),L(q,"$eql?",function(g){var c=this,l=z,p=z;return h(l=h(p=s("Complex")["$==="](g))?c.real.$class()["$=="](c.imag.$class()):p)?c["$=="](g):l}),L(q,"$fdiv",function(g){var c=this;return N(U("Numeric"),g)||M.$raise(U("TypeError"),""+g.$class()+" can't be coerced into Complex"),B(c,g)}),L(q,"$finite?",function(){var g=this,c=z;return h(c=g.real["$finite?"]())?g.imag["$finite?"]():c}),L(q,"$hash",function(){var g=this;return[U("Complex"),g.real,g.imag].$hash()}),L(q,"$infinite?",function(){var g=this,c=z;return h(c=g.real["$infinite?"]())?c:g.imag["$infinite?"]()}),L(q,"$inspect",function(){var g=this;return"("+g+")"}),L(q,"$numerator",function(){var g=this,c=z;return c=g.$denominator(),M.$Complex(W(g.real.$numerator(),B(c,g.real.$denominator())),W(g.imag.$numerator(),B(c,g.imag.$denominator())))}),L(q,"$polar",function(){var g=this;return[g.$abs(),g.$arg()]}),L(q,"$rationalize",function(g){var c=this;return arguments.length>1&&M.$raise(U("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),ee(c.imag,0)&&M.$raise(U("RangeError"),"can't convert "+c+" into Rational"),c.$real().$rationalize(g)},-1),L(q,"$real?",Z(!1)),L(q,"$rect",function(){var g=this;return[g.real,g.imag]}),L(q,"$to_f",function(){var g=this;return $e(g.imag,0)||M.$raise(U("RangeError"),"can't convert "+g+" into Float"),g.real.$to_f()}),L(q,"$to_i",function(){var g=this;return $e(g.imag,0)||M.$raise(U("RangeError"),"can't convert "+g+" into Integer"),g.real.$to_i()}),L(q,"$to_r",function(){var g=this;return $e(g.imag,0)||M.$raise(U("RangeError"),"can't convert "+g+" into Rational"),g.real.$to_r()}),L(q,"$to_s",function(){var g=this,c=z;return c=g.real.$inspect(),c=K(c,N(U("Number"),g.imag)&&h(g.imag["$nan?"]())||h(g.imag["$positive?"]())||h(g.imag["$zero?"]())?"+":"-"),c=K(c,g.imag.$abs().$inspect()),N(U("Number"),g.imag)&&(h(g.imag["$nan?"]())||h(g.imag["$infinite?"]()))&&(c=K(c,"*")),K(c,"i")}),R(v[0],"I",q.$new(0,1)),Q(q,"$from_string",function(g){var c=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;g.match(c);var l,p;function C(){return c.test(g)}function _(){var $=g.match(c),t=$[0];return g=g.slice(t.length),t.replace(/_/g,"")}function a(){if(C()){var $=parseFloat(_());if(g[0]==="/")if(g=g.slice(1),C()){var t=parseFloat(_());return M.$Rational($,t)}else return g="/"+g,$;else return $}else return null}return l=a(),l?(p=a(),p?M.$Complex(l,p):g[0]==="i"?M.$Complex(0,l):M.$Complex(l,0)):g[0]==="i"?M.$Complex(0,1):g[0]==="-"&&g[1]==="i"?M.$Complex(0,-1):g[0]==="+"&&g[1]==="i"?M.$Complex(0,1):M.$Complex(0,0)}),function(E,g){return m(E,"rectangular","rect")}(n.get_singleton_class(q)),m(q,"arg","angle"),m(q,"conjugate","conj"),m(q,"divide","/"),m(q,"imaginary","imag"),m(q,"magnitude","abs"),m(q,"phase","arg"),m(q,"quo","/"),m(q,"rectangular","rect"),n.udef(q,"$negative?"),n.udef(q,"$positive?"),n.udef(q,"$step"),z}("::",U("Numeric"),I)};Opal.modules["corelib/rational/base"]=function(n){var A=n.module,h=n.def,N=n.klass;n.nil;var M=n.$$$;return n.add_stubs("convert,from_string"),function(Q){var W=A(Q,"Kernel");return h(W,"$Rational",function(K,b){return b==null&&(b=1),M("Rational").$convert(K,b)},-2)}("::"),function(Q,W){var L=N(Q,W,"String");return h(L,"$to_r",function(){var b=this;return M("Rational").$from_string(b)})}("::",null)};Opal.modules["corelib/rational"]=function(n){var A=n.klass,h=n.eqeq,N=n.Kernel,M=n.truthy,Q=n.rb_lt,W=n.rb_divide,L=n.defs,K=n.eqeqeq,b=n.not,B=n.Opal,$e=n.def,Y=n.return_ivar,H=n.rb_minus,ee=n.rb_times,Z=n.rb_plus,R=n.rb_gt,m=n.rb_le,k=n.return_self,I=n.alias,z=n.top,U=n.nil,w=n.$$$;return n.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),z.$require("corelib/numeric"),z.$require("corelib/rational/base"),function(S,P){var q=A(S,P,"Rational"),v=q.$$prototype;return v.num=v.den=U,L(q,"$reduce",function(f,E){var g=this,c=U;if(f=f.$to_i(),E=E.$to_i(),h(E,0))N.$raise(w("ZeroDivisionError"),"divided by 0");else if(M(Q(E,0)))f=f["$-@"](),E=E["$-@"]();else if(h(E,1))return g.$new(f,E);return c=f.$gcd(E),g.$new(W(f,c),W(E,c))}),L(q,"$convert",function(f,E){var g=this;return(M(f["$nil?"]())||M(E["$nil?"]()))&&N.$raise(w("TypeError"),"cannot convert nil into Rational"),K(w("Integer"),f)&&K(w("Integer"),E)?g.$reduce(f,E):((K(w("Float"),f)||K(w("String"),f)||K(w("Complex"),f))&&(f=f.$to_r()),(K(w("Float"),E)||K(w("String"),E)||K(w("Complex"),E))&&(E=E.$to_r()),M(E["$equal?"](1))&&b(w("Integer")["$==="](f))?B["$coerce_to!"](f,w("Rational"),"to_r"):K(w("Numeric"),f)&&K(w("Numeric"),E)?W(f,E):g.$reduce(f,E))}),$e(q,"$initialize",function(f,E){var g=this;return g.num=f,g.den=E,g.$freeze()}),$e(q,"$numerator",Y("num")),$e(q,"$denominator",Y("den")),$e(q,"$coerce",function(f){var E=this,g=U;return K(w("Rational"),g=f)?[f,E]:K(w("Integer"),g)?[f.$to_r(),E]:K(w("Float"),g)?[f,E.$to_f()]:U}),$e(q,"$==",function(f){var E=this,g=U,c=U;return K(w("Rational"),g=f)?M(c=E.num["$=="](f.$numerator()))?E.den["$=="](f.$denominator()):c:K(w("Integer"),g)?M(c=E.num["$=="](f))?E.den["$=="](1):c:K(w("Float"),g)?E.$to_f()["$=="](f):f["$=="](E)}),$e(q,"$<=>",function(f){var E=this,g=U;return K(w("Rational"),g=f)?H(ee(E.num,f.$denominator()),ee(E.den,f.$numerator()))["$<=>"](0):K(w("Integer"),g)?H(E.num,ee(E.den,f))["$<=>"](0):K(w("Float"),g)?E.$to_f()["$<=>"](f):E.$__coerced__("<=>",f)}),$e(q,"$+",function(f){var E=this,g=U,c=U,l=U;return K(w("Rational"),g=f)?(c=Z(ee(E.num,f.$denominator()),ee(E.den,f.$numerator())),l=ee(E.den,f.$denominator()),N.$Rational(c,l)):K(w("Integer"),g)?N.$Rational(Z(E.num,ee(f,E.den)),E.den):K(w("Float"),g)?Z(E.$to_f(),f):E.$__coerced__("+",f)}),$e(q,"$-",function(f){var E=this,g=U,c=U,l=U;return K(w("Rational"),g=f)?(c=H(ee(E.num,f.$denominator()),ee(E.den,f.$numerator())),l=ee(E.den,f.$denominator()),N.$Rational(c,l)):K(w("Integer"),g)?N.$Rational(H(E.num,ee(f,E.den)),E.den):K(w("Float"),g)?H(E.$to_f(),f):E.$__coerced__("-",f)}),$e(q,"$*",function(f){var E=this,g=U,c=U,l=U;return K(w("Rational"),g=f)?(c=ee(E.num,f.$numerator()),l=ee(E.den,f.$denominator()),N.$Rational(c,l)):K(w("Integer"),g)?N.$Rational(ee(E.num,f),E.den):K(w("Float"),g)?ee(E.$to_f(),f):E.$__coerced__("*",f)}),$e(q,"$/",function(f){var E=this,g=U,c=U,l=U;return K(w("Rational"),g=f)?(c=ee(E.num,f.$denominator()),l=ee(E.den,f.$numerator()),N.$Rational(c,l)):K(w("Integer"),g)?h(f,0)?W(E.$to_f(),0):N.$Rational(E.num,ee(E.den,f)):K(w("Float"),g)?W(E.$to_f(),f):E.$__coerced__("/",f)}),$e(q,"$**",function(f){var E=this,g=U;return K(w("Integer"),g=f)?h(E,0)&&M(Q(f,0))?w(w("Float"),"INFINITY"):M(R(f,0))?N.$Rational(E.num["$**"](f),E.den["$**"](f)):M(Q(f,0))?N.$Rational(E.den["$**"](f["$-@"]()),E.num["$**"](f["$-@"]())):N.$Rational(1,1):K(w("Float"),g)?E.$to_f()["$**"](f):K(w("Rational"),g)?h(f,0)?N.$Rational(1,1):h(f.$denominator(),1)?M(Q(f,0))?N.$Rational(E.den["$**"](f.$numerator().$abs()),E.num["$**"](f.$numerator().$abs())):N.$Rational(E.num["$**"](f.$numerator()),E.den["$**"](f.$numerator())):h(E,0)&&M(Q(f,0))?N.$raise(w("ZeroDivisionError"),"divided by 0"):E.$to_f()["$**"](f):E.$__coerced__("**",f)}),$e(q,"$abs",function(){var f=this;return N.$Rational(f.num.$abs(),f.den.$abs())}),$e(q,"$ceil",function(f){var E=this;return f==null&&(f=0),h(f,0)?W(E.num["$-@"](),E.den)["$-@"]().$ceil():E.$with_precision("ceil",f)},-1),$e(q,"$floor",function(f){var E=this;return f==null&&(f=0),h(f,0)?W(E.num["$-@"](),E.den)["$-@"]().$floor():E.$with_precision("floor",f)},-1),$e(q,"$hash",function(){var f=this;return[w("Rational"),f.num,f.den].$hash()}),$e(q,"$inspect",function(){var f=this;return"("+f+")"}),$e(q,"$rationalize",function(f){var E=this;if(arguments.length>1&&N.$raise(w("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),f==null)return E;for(var g=f.$abs(),c=H(E,g),l=Z(E,g),p=0,C=1,_=1,a=0,$,t,e,r,i;e=c.$ceil(),!m(e,l);)r=e-1,$=r*C+p,t=r*a+_,i=W(1,H(l,r)),l=W(1,H(c,r)),c=i,p=C,_=a,C=$,a=t;return N.$Rational(e*C+p,e*a+_)},-1),$e(q,"$round",function(f){var E=this,g=U,c=U,l=U;return f==null&&(f=0),h(f,0)?h(E.num,0)?0:h(E.den,1)?E.num:(g=Z(ee(E.num.$abs(),2),E.den),c=ee(E.den,2),l=W(g,c).$truncate(),M(Q(E.num,0))?l["$-@"]():l):E.$with_precision("round",f)},-1),$e(q,"$to_f",function(){var f=this;return W(f.num,f.den)}),$e(q,"$to_i",function(){var f=this;return f.$truncate()}),$e(q,"$to_r",k),$e(q,"$to_s",function(){var f=this;return""+f.num+"/"+f.den}),$e(q,"$truncate",function(f){var E=this;return f==null&&(f=0),h(f,0)?M(Q(E.num,0))?E.$ceil():E.$floor():E.$with_precision("truncate",f)},-1),$e(q,"$with_precision",function(f,E){var g=this,c=U,l=U;return K(w("Integer"),E)||N.$raise(w("TypeError"),"not an Integer"),c=10["$**"](E),l=ee(g,c),M(Q(E,1))?W(l.$send(f),c).$to_i():N.$Rational(l.$send(f),c)}),L(q,"$from_string",function(f){var E=f.trimLeft(),g=/^[+-]?[\d_]+(\.[\d_]+)?/;E.match(g);var c,l;function p(){return g.test(E)}function C(){var _=E.match(g),a=_[0];return E=E.slice(a.length),a.replace(/_/g,"")}return p()?(c=parseFloat(C()),E[0]==="/"?(E=E.slice(1),p()?(l=parseFloat(C()),N.$Rational(c,l)):N.$Rational(c,1)):N.$Rational(c,1)):N.$Rational(0,1)}),I(q,"divide","/"),I(q,"quo","/")}("::",w("Numeric"))};Opal.modules["corelib/time"]=function(n){var A=n.slice,h=n.deny_frozen_access,N=n.klass,M=n.Kernel,Q=n.Opal,W=n.defs,L=n.eqeqeq,K=n.def,b=n.truthy,B=n.rb_gt,$e=n.rb_lt,Y=n.send,H=n.rb_plus,ee=n.rb_divide,Z=n.rb_minus,R=n.range,m=n.neqeq,k=n.rb_le,I=n.eqeq,z=n.alias,U=n.top,w=[],S=n.nil,P=n.$$$;return n.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),U.$require("corelib/comparable"),function(q,v,s){var f=N(q,v,"Time"),E=[f].concat(s),g=n.$r(E);f.$include(P("Comparable"));var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],C=["January","February","March","April","May","June","July","August","September","October","November","December"];W(f,"$at",function($,t){var e;return P("Time")["$==="]($)?(t!==void 0&&M.$raise(P("TypeError"),"can't convert Time into an exact number"),e=new Date($.getTime()),e.timezone=$.timezone,e):($.$$is_number||($=Q["$coerce_to!"]($,P("Integer"),"to_int")),t===void 0?new Date($*1e3):(t.$$is_number||(t=Q["$coerce_to!"](t,P("Integer"),"to_int")),new Date($*1e3+t/1e3)))},-2);function _(a,$,t,e,r,i){if(a.$$is_string?a=parseInt(a,10):a=Q["$coerce_to!"](a,P("Integer"),"to_int"),$===S)$=1;else if(!$.$$is_number)if($["$respond_to?"]("to_str"))switch($=$.$to_str(),$.toLowerCase()){case"jan":$=1;break;case"feb":$=2;break;case"mar":$=3;break;case"apr":$=4;break;case"may":$=5;break;case"jun":$=6;break;case"jul":$=7;break;case"aug":$=8;break;case"sep":$=9;break;case"oct":$=10;break;case"nov":$=11;break;case"dec":$=12;break;default:$=$.$to_i()}else $=Q["$coerce_to!"]($,P("Integer"),"to_int");return($<1||$>12)&&M.$raise(P("ArgumentError"),"month out of range: "+$),$=$-1,t===S?t=1:t.$$is_string?t=parseInt(t,10):t=Q["$coerce_to!"](t,P("Integer"),"to_int"),(t<1||t>31)&&M.$raise(P("ArgumentError"),"day out of range: "+t),e===S?e=0:e.$$is_string?e=parseInt(e,10):e=Q["$coerce_to!"](e,P("Integer"),"to_int"),(e<0||e>24)&&M.$raise(P("ArgumentError"),"hour out of range: "+e),r===S?r=0:r.$$is_string?r=parseInt(r,10):r=Q["$coerce_to!"](r,P("Integer"),"to_int"),(r<0||r>59)&&M.$raise(P("ArgumentError"),"min out of range: "+r),i===S?i=0:i.$$is_number||(i.$$is_string?i=parseInt(i,10):i=Q["$coerce_to!"](i,P("Integer"),"to_int")),(i<0||i>60)&&M.$raise(P("ArgumentError"),"sec out of range: "+i),[a,$,t,e,r,i]}return W(f,"$new",function($,t,e,r,i,u,o){var y=this;t==null&&(t=S),e==null&&(e=S),r==null&&(r=S),i==null&&(i=S),u==null&&(u=S),o==null&&(o=S);var j,D,F,G;return $===void 0?new Date:(j=_($,t,e,r,i,u),$=j[0],t=j[1],e=j[2],r=j[3],i=j[4],u=j[5],o===S?(D=new Date($,t,e,r,i,0,u*1e3),$<100&&D.setFullYear($),D):(F=y.$_parse_offset(o),G=new Date(Date.UTC($,t,e,r,i,0,u*1e3)),$<100&&G.setUTCFullYear($),D=new Date(G.getTime()-F*36e5),D.timezone=F,D))},-1),W(f,"$_parse_offset",function($){var t;if($.$$is_string)if($=="UTC")t=0;else if(/^[+-]\d\d:[0-5]\d$/.test($)){var e,r,i;e=$[0],r=+($[1]+$[2]),i=+($[4]+$[5]),t=(e=="-"?-1:1)*(r+i/60)}else M.$raise(P("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+$);else $.$$is_number?t=$/3600:M.$raise(P("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return t}),W(f,"$local",function($,t,e,r,i,u,o,y,j,D){t==null&&(t=S),e==null&&(e=S),r==null&&(r=S),i==null&&(i=S),u==null&&(u=S),o==null&&(o=S),y==null&&(y=S),j==null&&(j=S),D==null&&(D=S);var F,G;return arguments.length===10&&(F=A(arguments),$=F[5],t=F[4],e=F[3],r=F[2],i=F[1],u=F[0]),F=_($,t,e,r,i,u),$=F[0],t=F[1],e=F[2],r=F[3],i=F[4],u=F[5],G=new Date($,t,e,r,i,0,u*1e3),$<100&&G.setFullYear($),G},-2),W(f,"$gm",function($,t,e,r,i,u,o,y,j,D){t==null&&(t=S),e==null&&(e=S),r==null&&(r=S),i==null&&(i=S),u==null&&(u=S),o==null&&(o=S),y==null&&(y=S),j==null&&(j=S),D==null&&(D=S);var F,G;return arguments.length===10&&(F=A(arguments),$=F[5],t=F[4],e=F[3],r=F[2],i=F[1],u=F[0]),F=_($,t,e,r,i,u),$=F[0],t=F[1],e=F[2],r=F[3],i=F[4],u=F[5],G=new Date(Date.UTC($,t,e,r,i,0,u*1e3)),$<100&&G.setUTCFullYear($),G.timezone=0,G},-2),W(f,"$now",function(){var $=this;return $.$new()}),K(f,"$+",function($){var t=this;L(P("Time"),$)&&M.$raise(P("TypeError"),"time + time?"),$.$$is_number||($=Q["$coerce_to!"]($,P("Integer"),"to_int"));var e=new Date(t.getTime()+$*1e3);return e.timezone=t.timezone,e}),K(f,"$-",function($){var t=this;if(L(P("Time"),$))return(t.getTime()-$.getTime())/1e3;$.$$is_number||($=Q["$coerce_to!"]($,P("Integer"),"to_int"));var e=new Date(t.getTime()-$*1e3);return e.timezone=t.timezone,e}),K(f,"$<=>",function($){var t=this,e=S;return L(P("Time"),$)?t.$to_f()["$<=>"]($.$to_f()):(e=$["$<=>"](t),b(e["$nil?"]())?S:b(B(e,0))?-1:b($e(e,0))?1:0)}),K(f,"$==",function($){var t=this,e=S;return b(e=P("Time")["$==="]($))?t.$to_f()===$.$to_f():e}),K(f,"$asctime",function(){var $=this;return $.$strftime("%a %b %e %H:%M:%S %Y")}),Y([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function a($,t,e,r){var i=a.$$s==null?this:a.$$s;return $==null&&($=S),t==null&&(t=S),e==null&&(e=S),r==null&&(r=0),Y(i,"define_method",[$],function u(){var o=u.$$s==null?this:u.$$s;return r+(o.timezone!=null?new Date(o.getTime()+o.timezone*36e5)[e]():o[t]())},{$$s:i})},{$$arity:-4,$$s:f}),K(f,"$yday",function(){var $=this,t=S,e=S,r=S;return t=g("Time").$new($.$year()).$to_i(),e=g("Time").$new($.$year(),$.$month(),$.$day()).$to_i(),r=86400,H(ee(Z(e,t),r).$round(),1)}),K(f,"$isdst",function(){var $=this,t=new Date($.getFullYear(),0,1),e=new Date($.getFullYear(),6,1);return $.getTimezoneOffset()<Math.max(t.getTimezoneOffset(),e.getTimezoneOffset())}),K(f,"$dup",function(){var $=this,t=S;return t=new Date($.getTime()),t.$copy_instance_variables($),t.$initialize_dup($),t}),K(f,"$eql?",function($){var t=this,e=S;return b(e=$["$is_a?"](P("Time")))?t["$<=>"]($)["$zero?"]():e}),Y([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function a($,t){var e=a.$$s==null?this:a.$$s;return $==null&&($=S),t==null&&(t=S),Y(e,"define_method",[$],function r(){var i=r.$$s==null?this:r.$$s;return i.$wday()===t},{$$s:e})},{$$s:f}),K(f,"$hash",function(){var $=this;return[P("Time"),$.getTime()].$hash()}),K(f,"$inspect",function(){var $=this;return b($["$utc?"]())?$.$strftime("%Y-%m-%d %H:%M:%S UTC"):$.$strftime("%Y-%m-%d %H:%M:%S %z")}),K(f,"$succ",function(){var $=this,t=new Date($.getTime()+1e3);return t.timezone=$.timezone,t}),K(f,"$usec",function(){var $=this;return $.getMilliseconds()*1e3}),K(f,"$zone",function(){var $=this;if($.timezone===0)return"UTC";if($.timezone!=null)return S;var t=$.toString(),e;return t.indexOf("(")==-1?e=t.match(/[A-Z]{3,4}/)[0]:e=t.match(/\((.+)\)(?:\s|$)/)[1],e=="GMT"&&/(GMT\W*\d{4})/.test(t)?RegExp.$1:e}),K(f,"$getgm",function(){var $=this,t=new Date($.getTime());return t.timezone=0,t}),K(f,"$gmtime",function(){var $=this;return $.timezone!==0&&(h($),$.timezone=0),$}),K(f,"$gmt?",function(){var $=this;return $.timezone===0}),K(f,"$gmt_offset",function(){var $=this;return $.timezone!=null?$.timezone*60:-$.getTimezoneOffset()*60}),K(f,"$strftime",function($){var t=this;return $.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,r,i,u,o){var y="",j,D,F,G=r.indexOf("0")!==-1,re=r.indexOf("-")===-1,ae=r.indexOf("_")!==-1,le=r.indexOf("^")!==-1,ce=r.indexOf("#")!==-1,de=(r.match(":")||[]).length;switch(i=parseInt(i,10),G&&ae&&(r.indexOf("0")<r.indexOf("_")?G=!1:ae=!1),o){case"Y":y+=t.$year();break;case"C":G=!ae,y+=Math.round(t.$year()/100);break;case"y":G=!ae,y+=t.$year()%100;break;case"m":G=!ae,y+=t.$mon();break;case"B":y+=C[t.$mon()-1];break;case"b":case"h":ae=!G,y+=p[t.$mon()-1];break;case"d":G=!ae,y+=t.$day();break;case"e":ae=!G,y+=t.$day();break;case"j":G=!ae,i=isNaN(i)?3:i,y+=t.$yday();break;case"H":G=!ae,y+=t.$hour();break;case"k":ae=!G,y+=t.$hour();break;case"I":G=!ae,y+=t.$hour()%12||12;break;case"l":ae=!G,y+=t.$hour()%12||12;break;case"P":y+=t.$hour()>=12?"pm":"am";break;case"p":y+=t.$hour()>=12?"PM":"AM";break;case"M":G=!ae,y+=t.$min();break;case"S":G=!ae,y+=t.$sec();break;case"L":G=!ae,i=isNaN(i)?3:i,y+=t.getMilliseconds();break;case"N":i=isNaN(i)?9:i,y+=t.getMilliseconds().toString().$rjust(3,"0"),y=y.$ljust(i,"0");break;case"z":var he=t.timezone==null?t.getTimezoneOffset():-t.timezone*60,ve=Math.floor(Math.abs(he)/60),me=Math.abs(he)%60;y+=he<0?"+":"-",y+=ve<10?"0":"",y+=ve,de>0&&(y+=":"),y+=me<10?"0":"",y+=me,de>1&&(y+=":00");break;case"Z":y+=t.$zone();break;case"A":y+=c[t.$wday()];break;case"a":y+=l[t.$wday()];break;case"u":y+=t.$wday()+1;break;case"w":y+=t.$wday();break;case"V":y+=t.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":y+=t.$cweek_cyear()["$[]"](1);break;case"g":y+=t.$cweek_cyear()["$[]"](1)["$[]"](R(-2,-1,!1));break;case"s":y+=t.$to_i();break;case"n":y+=`
`;break;case"t":y+="	";break;case"%":y+="%";break;case"c":y+=t.$strftime("%a %b %e %T %Y");break;case"D":case"x":y+=t.$strftime("%m/%d/%y");break;case"F":y+=t.$strftime("%Y-%m-%d");break;case"v":y+=t.$strftime("%e-%^b-%4Y");break;case"r":y+=t.$strftime("%I:%M:%S %p");break;case"R":y+=t.$strftime("%H:%M");break;case"T":case"X":y+=t.$strftime("%H:%M:%S");break;case"J":if(j=t.$to_date().$jd(),j<2405160){y+=t.$strftime("%Y-%m-%d");break}else j<2419614?(D="M",F=1867):j<2424875?(D="T",F=1911):j<2447535?(D="S",F=1925):j<2458605?(D="H",F=1988):(D="R",F=2018);y+=t.$format("%c%02d",D,Z(t.$year(),F)),y+=t.$strftime("-%m-%d");break;default:return e}return le&&(y=y.toUpperCase()),ce&&(y=y.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),re&&(G||ae)&&(y=y.$rjust(isNaN(i)?2:i,ae?" ":"0")),y})}),K(f,"$to_a",function(){var $=this;return[$.$sec(),$.$min(),$.$hour(),$.$day(),$.$month(),$.$year(),$.$wday(),$.$yday(),$.$isdst(),$.$zone()]}),K(f,"$to_f",function(){var $=this;return $.getTime()/1e3}),K(f,"$to_i",function(){var $=this;return parseInt($.getTime()/1e3,10)}),K(f,"$cweek_cyear",function(){var $=this,t=S,e=S,r=S,i=S,u=S,o=S,y=S;return t=P("Time").$new($.$year(),1,1),e=t.$wday(),r=$.$year(),b(k(e,4))&&m(e,0)?i=Z(e,1):(i=Z(Z(e,7),1),I(i,-8)&&(i=-1)),u=ee(H($.$yday(),i),7).$ceil(),b(k(u,0))?P("Time").$new(Z($.$year(),1),12,31).$cweek_cyear():(I(u,53)&&(o=P("Time").$new($.$year(),12,31),y=o.$wday(),b(k(y,3))&&m(y,0)&&(u=1,r=H(r,1))),[u,r])}),function(a,$){return z(a,"mktime","local"),z(a,"utc","gm")}(n.get_singleton_class(f)),z(f,"ctime","asctime"),z(f,"dst?","isdst"),z(f,"getutc","getgm"),z(f,"gmtoff","gmt_offset"),z(f,"mday","day"),z(f,"month","mon"),z(f,"to_s","inspect"),z(f,"tv_sec","to_i"),z(f,"tv_usec","usec"),z(f,"utc","gmtime"),z(f,"utc?","gmt?"),z(f,"utc_offset","gmt_offset")}("::",Date,w)};Opal.modules["corelib/struct"]=function(n){var A=n.klass,h=n.slice,N=n.extract_kwargs,M=n.ensure_kwargs,Q=n.hash_get,W=n.truthy,L=n.neqeq,K=n.eqeq,b=n.Opal,B=n.send,$e=n.Class,Y=n.to_a,H=n.def,ee=n.defs,Z=n.Kernel,R=n.rb_gt,m=n.rb_minus,k=n.eqeqeq,I=n.rb_lt,z=n.rb_ge,U=n.rb_plus,w=n.alias,S=n.top,P=[],q=n.nil,v=n.$$$;return n.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),S.$require("corelib/enumerable"),function(s,f,E){var g=A(s,f,"Struct"),c=[g].concat(E),l=n.$r(c);g.$include(v("Enumerable")),ee(g,"$new",function C(_,a,$){var t=C.$$p||q,e,r,i,u,o=this,y=q;if(C.$$p=null,e=h(arguments,1),r=N(e),r=M(r),i=e,u=Q(r,"keyword_init"),u==null&&(u=!1),W(_))if(K(_.$class(),v("String"))&&L(_["$[]"](0).$upcase(),_["$[]"](0)))i.$unshift(_),_=q;else try{_=b["$const_name!"](_)}catch(j){if(n.rescue(j,[v("TypeError"),v("NameError")]))try{i.$unshift(_),_=q}finally{n.pop_exception(j)}else throw j}return B(i,"map",[],function(D){return D==null&&(D=q),b["$coerce_to!"](D,v("String"),"to_str")}),y=B($e,"new",[o],function j(){var D=j.$$s==null?this:j.$$s;return B(i,"each",[],function F(G){var re=F.$$s==null?this:F.$$s;return G==null&&(G=q),re.$define_struct_attribute(G)},{$$s:D}),function(F,G){return H(F,"$new",function(ae){var le,ce,de=this,he=q;return le=h(arguments),ce=le,he=de.$allocate(),he.$$data={},B(he,"initialize",Y(ce)),he},-1),F.$alias_method("[]","new")}(n.get_singleton_class(D))},{$$s:o}),W(t)&&B(y,"module_eval",[],t.$to_proc()),y.$$keyword_init=u,W(_)&&v("Struct").$const_set(_,y),y},-2),ee(g,"$define_struct_attribute",function(_){var a=this;return K(a,v("Struct"))&&Z.$raise(v("ArgumentError"),"you cannot define attributes to the Struct class"),a.$members()["$<<"](_),B(a,"define_method",[_],function $(){var t=$.$$s==null?this:$.$$s;return t.$$data[_]},{$$s:a}),B(a,"define_method",[""+_+"="],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=q),e.$$data[_]=t},{$$s:a})}),ee(g,"$members",function(){var _=this,a=q;return _.members==null&&(_.members=q),K(_,v("Struct"))&&Z.$raise(v("ArgumentError"),"the Struct class has no members"),_.members=W(a=_.members)?a:[]}),ee(g,"$inherited",function(_){var a=this,$=q;return a.members==null&&(a.members=q),$=a.members,B(_,"instance_eval",[],function t(){var e=t.$$s==null?this:t.$$s;return e.members=$},{$$s:a})}),H(g,"$initialize",function(_){var a,$,t=this,e=q,r=q,i=q;return a=h(arguments),$=a,W(t.$class().$$keyword_init)?(e=W(r=$.$last())?r:new Map,(W(R($.$length(),1))||W($.length===1&&!e.$$is_hash))&&Z.$raise(v("ArgumentError"),"wrong number of arguments (given "+$.$length()+", expected 0)"),i=m(e.$keys(),t.$class().$members()),W(i["$any?"]())&&Z.$raise(v("ArgumentError"),"unknown keywords: "+i.$join(", ")),B(t.$class().$members(),"each",[],function u(o){var y,j=u.$$s==null?this:u.$$s;return o==null&&(o=q),y=[o,e["$[]"](o)],B(j,"[]=",y),y[y.length-1]},{$$s:t})):(W(R($.$length(),t.$class().$members().$length()))&&Z.$raise(v("ArgumentError"),"struct size differs"),B(t.$class().$members(),"each_with_index",[],function u(o,y){var j,D=u.$$s==null?this:u.$$s;return o==null&&(o=q),y==null&&(y=q),j=[o,$["$[]"](y)],B(D,"[]=",j),j[j.length-1]},{$$s:t}))},-1),H(g,"$initialize_copy",function(_){var a=this;a.$$data={};var $=Object.keys(_.$$data),t,e,r;for(t=0,e=$.length;t<e;t++)r=$[t],a.$$data[r]=_.$$data[r]}),ee(g,"$keyword_init?",function(){var _=this;return _.$$keyword_init}),H(g,"$members",function(){var _=this;return _.$class().$members()}),H(g,"$hash",function(){var _=this;return[_.$class(),_.$to_a()].$hash()}),H(g,"$[]",function(_){var a=this;return k(v("Integer"),_)?(W(I(_,a.$class().$members().$size()["$-@"]()))&&Z.$raise(v("IndexError"),"offset "+_+" too small for struct(size:"+a.$class().$members().$size()+")"),W(z(_,a.$class().$members().$size()))&&Z.$raise(v("IndexError"),"offset "+_+" too large for struct(size:"+a.$class().$members().$size()+")"),_=a.$class().$members()["$[]"](_)):k(v("String"),_)?a.$$data.hasOwnProperty(_)||Z.$raise(v("NameError").$new("no member '"+_+"' in struct",_)):Z.$raise(v("TypeError"),"no implicit conversion of "+_.$class()+" into Integer"),_=b["$coerce_to!"](_,v("String"),"to_str"),a.$$data[_]}),H(g,"$[]=",function(_,a){var $=this;return k(v("Integer"),_)?(W(I(_,$.$class().$members().$size()["$-@"]()))&&Z.$raise(v("IndexError"),"offset "+_+" too small for struct(size:"+$.$class().$members().$size()+")"),W(z(_,$.$class().$members().$size()))&&Z.$raise(v("IndexError"),"offset "+_+" too large for struct(size:"+$.$class().$members().$size()+")"),_=$.$class().$members()["$[]"](_)):k(v("String"),_)?W($.$class().$members()["$include?"](_.$to_sym()))||Z.$raise(v("NameError").$new("no member '"+_+"' in struct",_)):Z.$raise(v("TypeError"),"no implicit conversion of "+_.$class()+" into Integer"),_=b["$coerce_to!"](_,v("String"),"to_str"),$.$$data[_]=a}),H(g,"$==",function(_){var a=this;if(!W(_["$instance_of?"](a.$class())))return!1;var $={},t={};function e(r,i){var u,o,y;$[r.$__id__()]=!0,t[i.$__id__()]=!0;for(u in r.$$data)if(o=r.$$data[u],y=i.$$data[u],v("Struct")["$==="](o)){if((!$.hasOwnProperty(o.$__id__())||!t.hasOwnProperty(y.$__id__()))&&!e(o,y))return!1}else if(!o["$=="](y))return!1;return!0}return e(a,_)}),H(g,"$eql?",function(_){var a=this;if(!W(_["$instance_of?"](a.$class())))return!1;var $={},t={};function e(r,i){var u,o,y;$[r.$__id__()]=!0,t[i.$__id__()]=!0;for(u in r.$$data)if(o=r.$$data[u],y=i.$$data[u],v("Struct")["$==="](o)){if((!$.hasOwnProperty(o.$__id__())||!t.hasOwnProperty(y.$__id__()))&&!e(o,y))return!1}else if(!o["$eql?"](y))return!1;return!0}return e(a,_)}),H(g,"$each",function C(){var _=C.$$p||q,a=this;return C.$$p=null,_===q?B(a,"enum_for",["each"],function $(){var t=$.$$s==null?this:$.$$s;return t.$size()},{$$s:a}):(B(a.$class().$members(),"each",[],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=q),n.yield1(_,e["$[]"](t))},{$$s:a}),a)}),H(g,"$each_pair",function C(){var _=C.$$p||q,a=this;return C.$$p=null,_===q?B(a,"enum_for",["each_pair"],function $(){var t=$.$$s==null?this:$.$$s;return t.$size()},{$$s:a}):(B(a.$class().$members(),"each",[],function $(t){var e=$.$$s==null?this:$.$$s;return t==null&&(t=q),n.yield1(_,[t,e["$[]"](t)])},{$$s:a}),a)}),H(g,"$length",function(){var _=this;return _.$class().$members().$length()}),H(g,"$to_a",function(){var _=this;return B(_.$class().$members(),"map",[],function a($){var t=a.$$s==null?this:a.$$s;return $==null&&($=q),t["$[]"]($)},{$$s:_})});var p=[];return H(g,"$inspect",function(){var _=this,a=q,$=q;return function(){try{return a="#<struct ",W(p["$include?"](_.$__id__()))?U(a,":...>"):(p["$<<"](_.$__id__()),$=!0,k(v("Struct"),_)&&W(_.$class().$name())&&(a=U(a,""+_.$class()+" ")),a=U(a,B(_.$each_pair(),"map",[],function(e,r){return e==null&&(e=q),r==null&&(r=q),""+e+"="+l("Opal").$inspect(r)}).$join(", ")),a=U(a,">"),a)}finally{W($)&&p.pop()}}()}),H(g,"$to_h",function C(_){var a=C.$$p||q,$,t,e=this;return C.$$p=null,$=h(arguments),t=$,a!==q?B(B(e,"map",[],a.$to_proc()),"to_h",Y(t)):B(e.$class().$members(),"each_with_object",[new Map],function r(i,u){var o,y=r.$$s==null?this:r.$$s;return i==null&&(i=q),u==null&&(u=q),o=[i,y["$[]"](i)],B(u,"[]=",o),o[o.length-1]},{$$s:e})},-1),H(g,"$values_at",function(_){var a,$,t=this;a=h(arguments),$=a,$=B($,"map",[],function(o){return o==null&&(o=q),o.$$is_range?o.$to_a():o}).$flatten();for(var e=[],r=0,i=$.length;r<i;r++)$[r].$$is_number||Z.$raise(v("TypeError"),"no implicit conversion of "+$[r].$class()+" into Integer"),e.push(t["$[]"]($[r]));return e},-1),H(g,"$dig",function(_,a){var $,t,e=this,r=q;return $=h(arguments,1),t=$,r=W(_.$$is_string&&e.$$data.hasOwnProperty(_))&&e.$$data[_]||q,r===q||t.length===0?r:(W(r["$respond_to?"]("dig"))||Z.$raise(v("TypeError"),""+r.$class()+" does not have #dig method"),B(r,"dig",Y(t)))},-2),w(g,"size","length"),w(g,"to_s","inspect"),w(g,"values","to_a")}("::",null,P)};Opal.modules["corelib/set"]=function(n){var A=n.freeze,h=n.klass,N=n.slice,M=n.defs,Q=n.truthy,W=n.eqeqeq,L=n.Kernel,K=n.send,b=n.def,B=n.eqeq,$e=n.rb_lt,Y=n.rb_le,H=n.alias,ee=[],Z=n.nil,R=n.$$$;return n.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(m,k,I){var z=h(m,k,"Set"),U=[z].concat(I),w=n.$r(U),S=Z,P=z.$$prototype;P.hash=Z,z.$include(R("Enumerable")),M(z,"$[]",function(s){var f,E,g=this;return f=N(arguments),E=f,g.$new(E)},-1),b(z,"$initialize",function v(s){var f=v.$$p||Z,E=this;return v.$$p=null,s==null&&(s=Z),E.hash=new Map,Q(s["$nil?"]())?Z:(W(R("Enumerable"),s)||L.$raise(R("ArgumentError"),"value must be enumerable"),Q(f)?K(s,"each",[],function g(c){var l=g.$$s==null?this:g.$$s;return c==null&&(c=Z),l.$add(n.yield1(f,c))},{$$s:E}):E.$merge(s))},-1),b(z,"$dup",function(){var s=this,f=Z;return f=s.$class().$new(),f.$merge(s)}),b(z,"$-",function(s){var f=this;return Q(s["$respond_to?"]("each"))||L.$raise(R("ArgumentError"),"value must be enumerable"),f.$dup().$subtract(s)}),b(z,"$inspect",function(){var s=this;return"#<Set: {"+s.$to_a().$join(",")+"}>"}),b(z,"$==",function(s){var f=this;return Q(f["$equal?"](s))?!0:Q(s["$instance_of?"](f.$class()))?f.hash["$=="](s.$instance_variable_get("@hash")):Q(s["$is_a?"](R("Set")))&&B(f.$size(),s.$size())?K(s,"all?",[],function E(g){var c=E.$$s==null?this:E.$$s;return c.hash==null&&(c.hash=Z),g==null&&(g=Z),c.hash["$include?"](g)},{$$s:f}):!1}),b(z,"$add",function(s){var f=this;return f.hash["$[]="](s,!0),f}),b(z,"$classify",function v(){var s=v.$$p||Z,f=this,E=Z;return v.$$p=null,s===Z?f.$enum_for("classify"):(E=K(R("Hash"),"new",[],function g(c,l){var p,C=g.$$s==null?this:g.$$s;return c==null&&(c=Z),l==null&&(l=Z),p=[l,C.$class().$new()],K(c,"[]=",p),p[p.length-1]},{$$s:f}),K(f,"each",[],function(c){return c==null&&(c=Z),E["$[]"](n.yield1(s,c)).$add(c)}),E)}),b(z,"$collect!",function v(){var s=v.$$p||Z,f=this,E=Z;return v.$$p=null,s===Z?f.$enum_for("collect!"):(E=f.$class().$new(),K(f,"each",[],function(c){return c==null&&(c=Z),E["$<<"](n.yield1(s,c))}),f.$replace(E))}),b(z,"$compare_by_identity",function(){var s=this;return Q(s.hash["$respond_to?"]("compare_by_identity"))?(s.hash.$compare_by_identity(),s):s.$raise(w("NotImplementedError"),""+s.$class().$name()+"#compare_by_identity is not implemented")}),b(z,"$compare_by_identity?",function(){var s=this,f=Z;return Q(f=s.hash["$respond_to?"]("compare_by_identity?"))?s.hash["$compare_by_identity?"]():f}),b(z,"$delete",function(s){var f=this;return f.hash.$delete(s),f}),b(z,"$delete?",function(s){var f=this;return Q(f["$include?"](s))?(f.$delete(s),f):Z}),b(z,"$delete_if",function v(){var s=v.$$p||Z,f=this;return v.$$p=null,s===Z?f.$enum_for("delete_if"):(K(K(f,"select",[],function(g){return g==null&&(g=Z),n.yield1(s,g)}),"each",[],function E(g){var c=E.$$s==null?this:E.$$s;return c.hash==null&&(c.hash=Z),g==null&&(g=Z),c.hash.$delete(g)},{$$s:f}),f)}),b(z,"$freeze",function(){var s=this;return Q(s["$frozen?"]())?s:(s.hash.$freeze(),A(s))}),b(z,"$keep_if",function v(){var s=v.$$p||Z,f=this;return v.$$p=null,s===Z?f.$enum_for("keep_if"):(K(K(f,"reject",[],function(g){return g==null&&(g=Z),n.yield1(s,g)}),"each",[],function E(g){var c=E.$$s==null?this:E.$$s;return c.hash==null&&(c.hash=Z),g==null&&(g=Z),c.hash.$delete(g)},{$$s:f}),f)}),b(z,"$reject!",function v(){var s=v.$$p||Z,f=this,E=Z;return v.$$p=null,s===Z?f.$enum_for("reject!"):(E=f.$size(),K(f,"delete_if",[],s.$to_proc()),B(f.$size(),E)?Z:f)}),b(z,"$select!",function v(){var s=v.$$p||Z,f=this,E=Z;return v.$$p=null,s===Z?f.$enum_for("select!"):(E=f.$size(),K(f,"keep_if",[],s.$to_proc()),B(f.$size(),E)?Z:f)}),b(z,"$add?",function(s){var f=this;return Q(f["$include?"](s))?Z:f.$add(s)}),b(z,"$each",function v(){var s=v.$$p||Z,f=this;return v.$$p=null,s===Z?f.$enum_for("each"):(K(f.hash,"each_key",[],s.$to_proc()),f)}),b(z,"$empty?",function(){var s=this;return s.hash["$empty?"]()}),b(z,"$eql?",function(s){var f=this;return f.hash["$eql?"](K(s,"instance_eval",[],function E(){var g=E.$$s==null?this:E.$$s;return g.hash==null&&(g.hash=Z),g.hash},{$$s:f}))}),b(z,"$clear",function(){var s=this;return s.hash.$clear(),s}),b(z,"$include?",function(s){var f=this;return f.hash["$include?"](s)}),b(z,"$merge",function(s){var f=this;return K(s,"each",[],function E(g){var c=E.$$s==null?this:E.$$s;return g==null&&(g=Z),c.$add(g)},{$$s:f}),f}),b(z,"$replace",function(s){var f=this;return f.$clear(),f.$merge(s),f}),b(z,"$size",function(){var s=this;return s.hash.$size()}),b(z,"$subtract",function(s){var f=this;return K(s,"each",[],function E(g){var c=E.$$s==null?this:E.$$s;return g==null&&(g=Z),c.$delete(g)},{$$s:f}),f}),b(z,"$|",function(s){var f=this;return Q(s["$respond_to?"]("each"))||L.$raise(R("ArgumentError"),"value must be enumerable"),f.$dup().$merge(s)});function q(v){Q(S=v["$is_a?"](R("Set")))||L.$raise(R("ArgumentError"),"value must be a set")}return b(z,"$superset?",function(s){var f=this;return q(s),Q($e(f.$size(),s.$size()))?!1:K(s,"all?",[],function E(g){var c=E.$$s==null?this:E.$$s;return g==null&&(g=Z),c["$include?"](g)},{$$s:f})}),b(z,"$proper_superset?",function(s){var f=this;return q(s),Q(Y(f.$size(),s.$size()))?!1:K(s,"all?",[],function E(g){var c=E.$$s==null?this:E.$$s;return g==null&&(g=Z),c["$include?"](g)},{$$s:f})}),b(z,"$subset?",function(s){var f=this;return q(s),Q($e(s.$size(),f.$size()))?!1:K(f,"all?",[],function(g){return g==null&&(g=Z),s["$include?"](g)})}),b(z,"$proper_subset?",function(s){var f=this;return q(s),Q(Y(s.$size(),f.$size()))?!1:K(f,"all?",[],function(g){return g==null&&(g=Z),s["$include?"](g)})}),b(z,"$intersect?",function(s){var f=this;return q(s),Q($e(f.$size(),s.$size()))?K(f,"any?",[],function(g){return g==null&&(g=Z),s["$include?"](g)}):K(s,"any?",[],function E(g){var c=E.$$s==null?this:E.$$s;return g==null&&(g=Z),c["$include?"](g)},{$$s:f})}),b(z,"$disjoint?",function(s){var f=this;return f["$intersect?"](s)["$!"]()}),b(z,"$to_a",function(){var s=this;return s.hash.$keys()}),H(z,"+","|"),H(z,"<","proper_subset?"),H(z,"<<","add"),H(z,"<=","subset?"),H(z,">","proper_superset?"),H(z,">=","superset?"),H(z,"difference","-"),H(z,"filter!","select!"),H(z,"length","size"),H(z,"map!","collect!"),H(z,"member?","include?"),H(z,"union","|")}("::",null,ee)};Opal.modules["corelib/dir"]=function(n){var A=n.klass,h=n.def,N=n.truthy,M=n.alias,Q=n.nil,W=n.$$$;return n.add_stubs("[],pwd"),function(L,K,b){var B=A(L,K,"Dir");return function($e,Y){return h($e,"$chdir",function H(ee){var Z=H.$$p||Q,R=Q;return H.$$p=null,function(){try{return R=n.current_dir,n.current_dir=ee,n.yieldX(Z,[])}finally{n.current_dir=R}}()}),h($e,"$pwd",function(){return n.current_dir||"."}),h($e,"$home",function(){var ee=Q;return N(ee=W("ENV")["$[]"]("HOME"))?ee:"."}),M($e,"getwd","pwd")}(n.get_singleton_class(B))}("::",null)};Opal.modules["corelib/file"]=function(n){var A=n.truthy,h=n.klass,N=n.const_set,M=n.Opal,Q=n.regexp,W=n.rb_plus,L=n.def,K=n.Kernel,b=n.eqeq,B=n.rb_lt,$e=n.rb_minus,Y=n.range,H=n.send,ee=n.slice,Z=n.alias,R=[],m=n.nil,k=n.$$$;return n.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(I,z,U){var w=h(I,z,"File"),S=[w].concat(U),P=m;return N(S[0],"Separator",N(S[0],"SEPARATOR","/")),N(S[0],"ALT_SEPARATOR",m),N(S[0],"PATH_SEPARATOR",":"),N(S[0],"FNM_SYSCASE",0),P=/^[a-zA-Z]:(?:\\|\/)/,function(q,v){var s=[q].concat(v),f=n.$r(s);L(q,"$absolute_path",function(l,p){var C=m,_=m,a=m,$=m,t=m,e=m,r=m,i=m,u=m,o=m;p==null&&(p=m),C=f("SEPARATOR"),_=g(),a=[],l=A(l["$respond_to?"]("to_path"))?l.$to_path():l,l=M["$coerce_to!"](l,k("String"),"to_str"),p=A($=p)?$:k("Dir").$pwd(),t=l.substr(0,C.length)===C||P.test(l),e=p.substr(0,C.length)===C||P.test(p),A(t)?(r=l.$split(Q(["[",_,"]"])),i=P.test(l)?"":l.$sub(Q(["^([",_,"]+).*$"]),"\\1"),u=!0):(r=W(p.$split(Q(["[",_,"]"])),l.$split(Q(["[",_,"]"]))),i=P.test(p)?"":p.$sub(Q(["^([",_,"]+).*$"]),"\\1"),u=e);for(var y,j=0,D=r.length;j<D;j++)y=r[j],!(y===m||y===""&&(a.length===0||u)||y==="."&&(a.length===0||u))&&(y===".."?a.pop():a.push(y));return!u&&r[0]!=="."&&a.$unshift("."),o=a.$join(C),A(u)&&(o=W(i,o)),o},-2),L(q,"$expand_path",function(l,p){var C=this,_=m,a=m,$=m,t=m,e=m;return p==null&&(p=m),_=f("SEPARATOR"),a=g(),A(l[0]==="~"||p&&p[0]==="~")&&($=f("Dir").$home(),A($)||K.$raise(k("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),t=P.test($)?"":$.$sub(Q(["^([",a,"]+).*$"]),"\\1"),A($["$start_with?"](t))||K.$raise(k("ArgumentError"),"non-absolute home"),$=W($,_),e=Q(["^\\~(?:",_,"|$)"]),l=l.$sub(e,$),A(p)&&(p=p.$sub(e,$))),C.$absolute_path(l,p)},-2);function E(c){return A(c["$respond_to?"]("to_path"))&&(c=c.$to_path()),c=M["$coerce_to!"](c,k("String"),"to_str"),c}function g(){return f("ALT_SEPARATOR")===m?n.escape_regexp(f("SEPARATOR")):n.escape_regexp(W(f("SEPARATOR"),f("ALT_SEPARATOR")))}return L(q,"$dirname",function(l,p){var C=this,_=m;if(p==null&&(p=1),b(p,0))return l;A(B(p,0))&&K.$raise(k("ArgumentError"),"level can't be negative"),_=g(),l=E(l);var a=l.match(new RegExp("^["+_+"]")),$;return l=l.replace(new RegExp("["+_+"]+$"),""),l=l.replace(new RegExp("[^"+_+"]+$"),""),l=l.replace(new RegExp("["+_+"]+$"),""),l===""?$=a?"/":".":$=l,p==1?$:C.$dirname($,$e(p,1))},-2),L(q,"$basename",function(l,p){var C=m;return p==null&&(p=m),C=g(),l=E(l),l.length==0||(p!==m?p=M["$coerce_to!"](p,k("String"),"to_str"):p=null,l=l.replace(new RegExp("(.)["+C+"]*$"),"$1"),l=l.replace(new RegExp("^(?:.*["+C+"])?([^"+C+"]+)$"),"$1"),p===".*"?l=l.replace(/\.[^\.]+$/,""):p!==null&&(p=n.escape_regexp(p),l=l.replace(new RegExp(""+p+"$"),""))),l},-2),L(q,"$extname",function(l){var p=this,C=m,_=m;return l=E(l),C=p.$basename(l),A(C["$empty?"]())||(_=C["$[]"](Y(1,-1,!1)).$rindex("."),A(_["$nil?"]())||b(W(_,1),$e(C.$length(),1)))?"":C["$[]"](n.Range.$new(W(_,1),-1,!1))}),L(q,"$exist?",function(l){return n.modules[l]!=null}),L(q,"$directory?",function(l){var p=m;p=[];for(var C in n.modules)p.push(C);return l=l.$gsub(Q(["(^.",f("SEPARATOR"),"+|",f("SEPARATOR"),"+$)"])),H(p,"find",[],function(a){return a==null&&(a=m),a["$=~"](Q(["^",l]))})}),L(q,"$join",function(l){var p,C,_=m;return p=ee(arguments),C=p,A(C["$empty?"]())?"":(_="",C=H(C.$flatten().$each_with_index(),"map",[],function($,t){return $==null&&($=m),t==null&&(t=m),b(t,0)&&A($["$empty?"]())||b(C.$length(),W(t,1))&&A($["$empty?"]())?f("SEPARATOR"):$}),C=H(C,"reject",[],"empty?".$to_proc()),H(C,"each_with_index",[],function($,t){var e=m;return $==null&&($=m),t==null&&(t=m),e=C["$[]"](W(t,1)),A(e["$nil?"]())?_=""+_+$:(A($["$end_with?"](f("SEPARATOR")))&&A(e["$start_with?"](f("SEPARATOR")))&&($=$.$sub(Q([f("SEPARATOR"),"+$"]),"")),_=A($["$end_with?"](f("SEPARATOR")))||A(e["$start_with?"](f("SEPARATOR")))?""+_+$:""+_+$+f("SEPARATOR"))}),_)},-1),L(q,"$split",function(l){return l.$split(f("SEPARATOR"))}),Z(q,"realpath","expand_path"),Z(q,"exists?","exist?")}(n.get_singleton_class(w),S)}("::",k("IO"),R)};Opal.modules["corelib/process/base"]=function(n){var A=n.klass,h=n.slice,N=n.defs,M=n.return_val,Q=n.nil;return function(W,L){var K=A(W,L,"Signal");return N(K,"$trap",function(B){return h(arguments),Q},-1)}("::",null),function(W,L){var K=A(W,L,"GC");return N(K,"$start",M(Q))}("::",null)};Opal.modules["corelib/process"]=function(n){var A=n.module,h=n.defs,N=n.truthy,M=n.return_val,Q=n.Kernel,W=n.nil,L=n.$$$;return n.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(K){var b=A(K,"Process"),B=W;if(b.__clocks__=[],h(b,"$__register_clock__",function(H,ee){var Z=this;return Z.__clocks__==null&&(Z.__clocks__=W),Z.$const_set(H,Z.__clocks__.$size()),Z.__clocks__["$<<"](ee)}),b.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),B=!1,n.global.performance)B=function(){return performance.now()};else if(n.global.process&&process.hrtime){var $e=process.hrtime();B=function(){var Y=process.hrtime($e),H=Y[1]/1e3|0;return Y[0]*1e3+H/1e3}}return N(B)&&b.$__register_clock__("CLOCK_MONOTONIC",B),h(b,"$pid",M(0)),h(b,"$times",function(){var H=W;return H=L("Time").$now().$to_f(),L(L("Benchmark"),"Tms").$new(H,H,H,H,H)}),h(b,"$clock_gettime",function(H,ee){var Z=this,R=W;Z.__clocks__==null&&(Z.__clocks__=W),ee==null&&(ee="float_second"),N(R=Z.__clocks__["$[]"](H))||Q.$raise(L(L("Errno"),"EINVAL"),"clock_gettime("+H+") "+Z.__clocks__["$[]"](H));var m=R();switch(ee){case"float_second":return m/1e3;case"float_millisecond":return m/1;case"float_microsecond":return m*1e3;case"second":return m/1e3|0;case"millisecond":return m/1|0;case"microsecond":return m*1e3|0;case"nanosecond":return m*1e6|0;default:Q.$raise(L("ArgumentError"),"unexpected unit: "+ee)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(n){var A=n.klass,h=n.module,N=n.def,M=n.range,Q=n.send,W=n.rb_divide,L=n.Kernel,K=n.Opal,b=[],B=n.nil,$e=n.$$$;return n.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(Y,H,ee){var Z=A(Y,H,"Random"),R=[Z].concat(ee);return function(m,k){var I=h(m,"Formatter"),z=[I].concat(k),U=n.$r(z);return N(I,"$hex",function(S){var P=this;S==null&&(S=B),S=$e("Random").$_verify_count(S);for(var q=P.$bytes(S),v="",s=0;s<S;s++)v+=q.charCodeAt(s).toString(16).padStart(2,"0");return v.$encode("US-ASCII")},-1),N(I,"$random_bytes",function(S){var P=this;return S==null&&(S=B),P.$bytes(S)},-1),N(I,"$base64",function(S){var P=this;return S==null&&(S=B),$e("Base64").$strict_encode64(P.$random_bytes(S)).$encode("US-ASCII")},-1),N(I,"$urlsafe_base64",function(S,P){var q=this;return S==null&&(S=B),P==null&&(P=!1),$e("Base64").$urlsafe_encode64(q.$random_bytes(S),P).$encode("US-ASCII")},-1),N(I,"$uuid",function(){var S=this,P=B;return P=S.$hex(16).$split(""),P["$[]="](12,"4"),P["$[]="](16,(parseInt(P["$[]"](16),16)&3|8).toString(16)),P=[P["$[]"](M(0,8,!0)),P["$[]"](M(8,12,!0)),P["$[]"](M(12,16,!0)),P["$[]"](M(16,20,!0)),P["$[]"](M(20,32,!0))],P=Q(P,"map",[],"join".$to_proc()),P.$join("-")}),N(I,"$random_float",function(){var S=this,P=B,q=B;return P=S.$bytes(4),q=0,Q(4,"times",[],function(s){return s==null&&(s=B),q=q["$<<"](8),q=q["$|"](P["$[]"](s).$ord())}),W(q.$abs(),2147483647)}),N(I,"$random_number",function(S){var P=this;function q(){return P.$random_float()}function v(f){return Math.floor(q()*f)}function s(){var f=S.begin,E=S.end;if(f===B||E===B)return B;var g=E-f;return g<0?B:g===0?f:(E%1===0&&f%1===0&&!S.excl&&g++,v(g)+f)}return S==null?q():S.$$is_range?s():S.$$is_number?(S<=0&&L.$raise($e("ArgumentError"),"invalid argument - "+S),S%1===0?v(S):q()*S):(S=K["$coerce_to!"](S,$e("Integer"),"to_int"),S<=0&&L.$raise($e("ArgumentError"),"invalid argument - "+S),v(S))},-1),N(I,"$alphanumeric",function(S){var P=this,q=B;return S==null&&(S=B),S=U("Random").$_verify_count(S),q=Q([M("0","9",!1),M("a","z",!1),M("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),Q($e("Array"),"new",[S],function v(s){var f=v.$$s==null?this:v.$$s;return q["$[]"](f.$random_number(q.$length()))},{$$s:P}).$join()},-1)}(Z,R),Z.$include($e($e("Random"),"Formatter")),Z.$extend($e($e("Random"),"Formatter"))}("::",null,b)};Opal.modules["corelib/random/mersenne_twister"]=function(n){var A=n.klass,h=n.const_set,N=n.send,M=n.nil,Q=n.$$$,W=M;return n.add_stubs("generator="),W=function(){var L=624,K=397,b=2567483615,B=2147483648,$e=2147483647,Y=function(z,U){return z&B|U&$e},H=function(z,U){return Y(z,U)>>>1^(U&1?b:0)};function ee(z){var U={left:0,next:L,state:new Array(L)};return Z(U,z),U}function Z(z,U){var w;for(z.state[0]=U>>>0,w=1;w<L;w++)z.state[w]=1812433253*(z.state[w-1]^z.state[w-1]>>30>>>0)+w,z.state[w]&=4294967295;z.left=1,z.next=L}function R(z){var U=0,w=z.state,S;for(z.left=L,z.next=0,S=L-K+1;--S;U++)w[U]=w[U+K]^H(w[U+0],w[U+1]);for(S=K;--S;U++)w[U]=w[U+(K-L)]^H(w[U+0],w[U+1]);w[U]=w[U+(K-L)]^H(w[U+0],w[0])}function m(z){var U;return--z.left<=0&&R(z),U=z.state[z.next++],U^=U>>>11,U^=U<<7&2636928640,U^=U<<15&4022730752,U^=U>>>18,U>>>0}function k(z,U){return z>>>=5,U>>>=6,(z*67108864+U)*(1/9007199254740992)}function I(z){var U=m(z),w=m(z);return k(U,w)}return{genrand_real:I,init:ee}}(),function(L,K){var b=A(L,K,"Random"),B,$e=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return h(b,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*$e)},reseed:function(Y){return W.init(Y)},rand:function(Y){return W.genrand_real(Y)}}),B=[Q(b,"MERSENNE_TWISTER_GENERATOR")],N(b,"generator=",B),B[B.length-1]}("::",null)};Opal.modules["corelib/random"]=function(n){var A=n.truthy,h=n.klass,N=n.Kernel,M=n.defs,Q=n.Opal,W=n.def,L=n.eqeqeq,K=n.send,b=n.top,B=n.nil,$e=n.$$$;return n.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),b.$require("corelib/random/formatter"),function(Y,H){var ee=h(Y,H,"Random");return ee.$attr_reader("seed","state"),M(ee,"$_verify_count",function(R){return A(R)||(R=16),typeof R!="number"&&(R=R.$to_int()),R<0&&N.$raise($e("ArgumentError"),"negative string size (or size too big)"),R=Math.floor(R),R}),W(ee,"$initialize",function(R){var m=this;return R==null&&(R=$e("Random").$new_seed()),R=Q["$coerce_to!"](R,$e("Integer"),"to_int"),m.state=R,m.$reseed(R)},-1),W(ee,"$reseed",function(R){var m=this;return m.seed=R,m.$rng=n.$$rand.reseed(R)}),M(ee,"$new_seed",function(){return n.$$rand.new_seed()}),M(ee,"$rand",function(R){var m=this;return $e(m,"DEFAULT").$rand(R)},-1),M(ee,"$srand",function(R){var m=this,k=B;return R==null&&(R=$e("Random").$new_seed()),R=Q["$coerce_to!"](R,$e("Integer"),"to_int"),k=$e(m,"DEFAULT").$seed(),$e(m,"DEFAULT").$reseed(R),k},-1),M(ee,"$urandom",function(R){return $e("SecureRandom").$bytes(R)}),W(ee,"$==",function(R){var m=this,k=B;return L($e("Random"),R)?A(k=m.$seed()["$=="](R.$seed()))?m.$state()["$=="](R.$state()):k:!1}),W(ee,"$bytes",function(R){var m=this;return R=$e("Random").$_verify_count(R),K($e("Array"),"new",[R],function k(){var I=k.$$s==null?this:k.$$s;return I.$rand(255).$chr()},{$$s:m}).$join().$encode("ASCII-8BIT")}),M(ee,"$bytes",function(R){var m=this;return $e(m,"DEFAULT").$bytes(R)}),W(ee,"$rand",function(R){var m=this;return m.$random_number(R)},-1),W(ee,"$random_float",function(){var R=this;return R.state++,n.$$rand.rand(R.$rng)}),M(ee,"$random_float",function(){var R=this;return $e(R,"DEFAULT").$random_float()}),M(ee,"$generator=",function(R){var m=this;return n.$$rand=R,A(m["$const_defined?"]("DEFAULT"))?$e(m,"DEFAULT").$reseed():m.$const_set("DEFAULT",m.$new(m.$new_seed()))})}("::",null),b.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(n){var A=n.Kernel,h=n.klass,N=n.send,M=n.slice,Q=n.module,W=n.def,L=n.return_val,K=n.alias,b=n.defs,B=n.top,$e=[],Y=n.nil,H=n.$$$;n.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var ee={};function Z(m){switch(n.config.unsupported_features_severity){case"error":A.$raise(H("NotImplementedError"),m);break;case"warning":R(m);break}}function R(m){ee[m]||(ee[m]=!0,B.$warn(m))}return function(m,k){var I=h(m,k,"String"),z="String#%s not supported. Mutable String methods are not supported in Opal.";return N(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function U(w){var S=U.$$s==null?this:U.$$s;return w==null&&(w=Y),N(S,"define_method",[w],function(q){return M(arguments),A.$raise(H("NotImplementedError"),z["$%"](w))},-1)},{$$s:I})}("::",null),function(m){var k=Q(m,"Kernel"),I="Object tainting is not supported by Opal";return W(k,"$taint",function(){var U=this;return Z(I),U}),W(k,"$untaint",function(){var U=this;return Z(I),U}),W(k,"$tainted?",function(){return Z(I),!1})}("::"),function(m,k){var I=h(m,k,"Module");return W(I,"$public",function(U){var w,S,P=this;return w=M(arguments),S=w,S.length===0?(P.$$module_function=!1,Y):S.length===1?S[0]:S},-1),W(I,"$private_class_method",function(U){var w,S;return w=M(arguments),S=w,S.length===1?S[0]:S},-1),W(I,"$private_method_defined?",L(!1)),W(I,"$private_constant",function(U){return M(arguments),Y},-1),K(I,"nesting","public"),K(I,"private","public"),K(I,"protected","public"),K(I,"protected_method_defined?","private_method_defined?"),K(I,"public_class_method","private_class_method"),K(I,"public_instance_method","instance_method"),K(I,"public_instance_methods","instance_methods"),K(I,"public_method_defined?","method_defined?")}("::",null),function(m){var k=Q(m,"Kernel");return W(k,"$private_methods",function(z){return M(arguments),[]},-1),K(k,"protected_methods","private_methods"),K(k,"private_instance_methods","private_methods"),K(k,"protected_instance_methods","private_methods")}("::"),function(m,k){var I=Q(m,"Kernel"),z=[I].concat(k),U=n.$r(z);return W(I,"$eval",function(S){return M(arguments),A.$raise(H("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+U("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",$e),b(B,"$public",function(k){var I,z;return I=M(arguments),z=I,z.length===1?z[0]:z},-1),b(B,"$private",function(k){var I,z;return I=M(arguments),z=I,z.length===1?z[0]:z},-1)};Opal.modules["corelib/binding"]=function(n){var A=n.klass,h=n.truthy,N=n.def,M=n.slice,Q=n.send,W=n.to_a,L=n.Kernel,K=n.return_ivar,b=n.eqeq;n.thrower;var B=n.module,$e=n.const_set,Y=n.top,H=[],ee=n.nil,Z=n.$$$;return n.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(R,m){var k=A(R,m,"Binding"),I=k.$$prototype;return I.jseval=I.scope_variables=ee,N(k,"$initialize",function(U,w,S,P){var q,v=this;return w==null&&(w=[]),P==null&&(P=ee),q=[U,w,S,P],v.jseval=q[0],v.scope_variables=q[1],v.receiver=q[2],v.source_location=q[3],h(typeof S!==void 0)?ee:S=v.$js_eval("self")},-2),N(k,"$js_eval",function(U){var w,S,P=this;return w=M(arguments),S=w,h(P.jseval)?Q(P.jseval,"call",W(S)):L.$raise("Evaluation on a Proc#binding is not supported")},-1),N(k,"$local_variable_get",function(U){var w=this;try{return w.$js_eval(U)}catch(S){if(n.rescue(S,[Z("Exception")]))try{return L.$raise(Z("NameError"),"local variable `"+U+"' is not defined for "+w.$inspect())}finally{n.pop_exception(S)}else throw S}}),N(k,"$local_variable_set",function(U,w){var S=this;return n.Binding.tmp_value=w,S.$js_eval(""+U+" = Opal.Binding.tmp_value"),delete n.Binding.tmp_value,w}),N(k,"$local_variables",K("scope_variables")),N(k,"$local_variable_defined?",function(U){var w=this;return w.scope_variables["$include?"](U)}),N(k,"$eval",function(U,w,S){try{var P=this;return w==null&&(w=ee),S==null&&(S=ee),b(U,"self")?P.$receiver():L.$eval(U,P,w,S)}catch(q){if(q===n.t_eval_return)return q.$v;throw q}},-2),k.$attr_reader("receiver","source_location")}("::",null),function(R){var m=B(R,"Kernel");return N(m,"$binding",function(){return L.$raise("Opal doesn't support dynamic calls to binding")})}("::"),$e(H[0],"TOPLEVEL_BINDING",Z("Binding").$new(function(R){return new Function("self","return "+R)(Y)},[],Y,["<main>",0]))};Opal.modules["corelib/irb"]=function(n){var A=n.module,h=n.truthy,N=n.Kernel,M=n.defs,Q=n.gvars,W=n.lambda,L=n.hash_rehash,K=n.send,b=n.rb_plus,B=n.const_set,$e=n.klass,Y=n.def,H=n.Opal,ee=n.range,Z=n.eqeq,R=n.thrower,m=[],k=n.nil,I=n.$$$;n.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(z,U){var w=A(z,"Opal"),S=[w].concat(U);return function(P,q){var v=A(P,"IRB"),s=[v].concat(q),f=n.$r(s);return M(v,"$ensure_loaded",function(g){var c=k,l=k;if(h(n.loaded_features["$include?"](g)))return k;c=h(f("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":f("RUBY_ENGINE_VERSION"),l="https://cdn.opalrb.com/opal/"+c+"/"+g+".js";var p;if(typeof XMLHttpRequest<"u"){var C=new XMLHttpRequest;C.open("GET",l,!1),C.send(""),p=C.responseText}else N.$raise("You need to provision "+g+" yourself in this environment");return new Function("Opal",p)(n),n.require(g),h(n.loaded_features["$include?"](g))?k:N.$raise("Could not load "+g+" for some reason")}),v.$singleton_class().$attr_accessor("output"),M(v,"$prepare_console",function E(){var g=E.$$p||k,c,l=this,p=k,C=k;return Q.stdout==null&&(Q.stdout=k),Q.stderr==null&&(Q.stderr=k),Q.stdin==null&&(Q.stdin=k),E.$$p=null,function(){try{return l["$output="](""),p=L(new Map([[Q.stdout,W(function(a){return a==null&&(a=k),Q.stdout=a})],[Q.stderr,W(function(a){return a==null&&(a=k),Q.stderr=a})]])),h(l["$browser?"]())&&(K(p,"each",[],function _(a,$){var t=_.$$s==null?this:_.$$s,e=k;return a==null&&(a=k),$==null&&($=k),e=a.$dup(),e["$write_proc="](K(t,"proc",[],function r(i){var u=r.$$s==null?this:r.$$s;return i==null&&(i=k),u["$output="](b(u.$output(),i)),u["$output="](u.$output().$split(`
`).$last(30).$join(`
`)),h(i["$end_with?"](`
`))&&u["$output="](b(u.$output(),`
`)),a.$write_proc().$call(i)},{$$s:t})),e["$tty="](!1),$.$call(e)},{$$s:l}),C=Q.stdin.$read_proc(),Q.stdin["$read_proc="](function(_){var a=prompt(l.$output());return a!==null?a+`
`:k})),n.yieldX(g,[])}finally{K(p,"each",[],function(a,$){return a==null&&(a=k),$==null&&($=k),$.$call(a)}),c=[C],K(Q.stdin,"read_proc=",c),c[c.length-1],c=[""],K(l,"output=",c),c[c.length-1]}}()}),M(v,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),B(s[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(E,g){var c=$e(E,g,"Silencer"),l=c.$$prototype;return l.collector=l.stderr=k,Y(c,"$initialize",function(){var C=this;return Q.stderr==null&&(Q.stderr=k),C.stderr=Q.stderr}),Y(c,"$silence",function p(){var C=p.$$p||k,_=this;return p.$$p=null,function(){try{return _.collector=I("StringIO").$new(),Q.stderr=_.collector,n.yieldX(C,[])}finally{Q.stderr=_.stderr}}()}),Y(c,"$warnings",function(){var C=this;return C.collector.$string()})}(s[0],null)}(S[0],S)}(m[0],m),function(z,U,w){var S=$e(z,U,"Binding"),P=[S].concat(w),q=n.$r(P);return Y(S,"$irb",function(){try{var s=R("return"),f=this,E=k;return I(H,"IRB").$ensure_loaded("opal-replutils"),E=I(I(H,"IRB"),"Silencer").$new(),K(I(H,"IRB"),"prepare_console",[],function g(){var c=g.$$s==null?this:g.$$s;return function(){try{var l=R("break");return K(c,"loop",[],function p(){var C=p.$$s==null?this:p.$$s,_=k,a=k,$=k,t=k,e=k;C.$print(">> "),_=C.$gets(),h(_)||l.$throw(k,p.$$is_lambda),a="",h(I(H,"IRB")["$browser?"]())&&C.$puts(_),h(_["$start_with?"]("ls "))?(a=_["$[]"](ee(3,-1,!1)),$="ls"):Z(_,`ls
`)?(a="self",$="ls"):h(_["$start_with?"]("show "))?(a=_["$[]"](ee(5,-1,!1)),$="show"):(a=_,$="inspect"),t=k;do{try{K(E,"silence",[],function(){return t=n.compile(a,{irb:!0})})}catch(r){if(n.rescue(r,[q("SyntaxError")])){e=r;try{if(h(I(I(H,"IRB"),"LINEBREAKS")["$include?"](e.$message()))){C.$print(".. "),_=C.$gets(),h(_)||s.$throw(k,p.$$is_lambda),h(I(H,"IRB")["$browser?"]())&&C.$puts(_),a=b(a,_);continue}else h(E.$warnings()["$empty?"]())?C.$warn(e.$full_message()):C.$warn(E.$warnings())}finally{n.pop_exception(r)}}else throw r}break}while(!0);return Z($,"show")&&(C.$puts(t),s.$throw(k,p.$$is_lambda)),C.$puts(I("REPLUtils").$eval_and_print(t,$,!1,C))},{$$s:c,$$ret:s})}catch(p){if(p===l)return p.$v;throw p}finally{l.is_orphan=!0}}()},{$$s:f})}catch(g){if(g===s)return g.$v;throw g}finally{s.is_orphan=!0}})}("::",null,m),n.irb=function(z){I("Binding").$new(z).$irb()},n.load_parser=function(){n.Opal.IRB.$ensure_loaded("opal-parser")},typeof n.eval>"u"&&(n.eval=function(z){return n.load_parser(),n.eval(z)}),typeof n.compile>"u"&&(n.compile=function(z,U){return n.load_parser(),n.compile(z,U)})};Opal.modules.opal=function(n){var A=n.Object;return n.nil,n.add_stubs("require,autoload"),A.$require("opal/base"),A.$require("opal/mini"),A.$require("corelib/kernel/format"),A.$require("corelib/string/encoding"),A.$autoload("Math","corelib/math"),A.$require("corelib/complex/base"),A.$autoload("Complex","corelib/complex"),A.$require("corelib/rational/base"),A.$autoload("Rational","corelib/rational"),A.$require("corelib/time"),A.$autoload("Struct","corelib/struct"),A.$autoload("Set","corelib/set"),A.$autoload("Dir","corelib/dir"),A.$autoload("File","corelib/file"),A.$require("corelib/process/base"),A.$autoload("Process","corelib/process"),A.$autoload("Random","corelib/random"),A.$require("corelib/unsupported"),A.$require("corelib/binding"),A.$require("corelib/irb")};Opal.modules["js/proxy"]=function(n){var A=n.module,h=n.truthy,N=n.def,M=n.klass,Q=n.const_set,W=n.slice,L=n.range,K=n.send,b=n.to_a,B=n.gvars,$e=n.top,Y=[],H=n.nil;return n.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),$e.$require("opal"),$e.$require("native"),function(ee,Z){var R=A(ee,"JS"),m=[R].concat(Z),k=n.$r(m);return function(I,z){var U=A(I,"Helpers"),w=[U].concat(z),S=n.$r(w);return N(U,"$wrap_result",function(q){return h(q&&typeof q.then=="function")?S("Promise").$new(q):h(typeof q=="object"&&q!==null)?S("Proxy").$new(q):q}),N(U,"$native_methods",function(){var q=this,v=H;return q.native_methods==null&&(q.native_methods=H),q.native_methods=function(){if(h(v=q.native_methods))return v;{let s=q.$to_n();const f=new Set;for(;s!==null;){for(const E of Reflect.ownKeys(s)){const g=E.toString(),c=q.$to_rb_name(g);typeof E!="symbol"&&g!==c&&f.add(c),f.add(g)}s=Object.getPrototypeOf(s)}return Array.from(f)}}()})}(m[0],m),function(I,z,U){var w=M(I,z,"Proxy"),S=[w].concat(U),P=n.$r(S);return w.$include(P("Enumerable")),w.$include(P("Helpers")),w.$attr_accessor("native"),Q(S[0],"IRREGULARS",["html","url","uri"]),N(w,"$initialize",function(v){var s=this;return s.native=s.$Native(v)}),N(w,"$method_missing",function q(v,s){var f=q.$$p||H,E,g,c,l=this,p=H,C=H,_=H,a=H,$=H,t=H;return q.$$p=null,E=W(arguments,1),g=E,p=l.$to_js_name(v),h(l["$existing_property?"](p))||h(p["$end_with?"]("="))||l.$raise(P("NoMethodError"),"undefined method `"+v+"` for "+l),h(p["$end_with?"]("="))?(C=p["$[]"](L(0,-2,!1)),c=[C,g.$first()],K(l.$native(),"[]=",c),c[c.length-1]):(_=l.$native()["$[]"](p),h(typeof _=="function")?(a=g.$dup(),h(f)&&($=function(){let e=Array.prototype.slice.call(arguments);return K(f,"call",[l.$class().$new(this)].concat(b(e)))},a["$<<"]($)),t=_.apply(l.$to_n(),a.$to_n()),l.$wrap_result(t)):h(typeof _=="object"&&_!==null)?l.$wrap_result(_):_)},-2),N(w,"$to_str",function(){var v=this;return v.$to_n().toString()}),N(w,"$respond_to_missing?",function(v,s){return!0},-2),N(w,"$each",function q(){var v=q.$$p||H,s=this,f=H;return q.$$p=null,h(s["$respond_to?"]("length"))?(f=s.$length(),K(n.Range.$new(0,f,!0),"each",[],function E(g){var c=E.$$s==null?this:E.$$s;return g==null&&(g=H),n.yield1(v,c["$[]"](g))},{$$s:s})):s.$enum_for("each")}),N(w,"$[]",function(v){var s=this,f=H;return f=s.$native()["$[]"](v),s.$wrap_result(f)}),N(w,"$[]=",function(v,s){var f=this;return f.$native()["$[]="](v,s),f.$wrap_result(f.$native())}),N(w,"$to_n",function(){var v=this;return v.$native().$to_n()}),N(w,"$length",function(){var v=this;return v.$native().$length()}),w.$private(),N(w,"$to_js_name",function(v){return K(v.$to_s().$split("_").$map(),"with_index",[],function(f,E){return f==null&&(f=H),E==null&&(E=H),h(P("IRREGULARS")["$include?"](f.$gsub("=","").$downcase()))?f.$upcase():h(E["$zero?"]())?f:f.$capitalize()}).$join()}),N(w,"$to_rb_name",function(v){return K(v.$to_s(),"gsub",[/([A-Z]+)/],function(){var f;return"_"+((f=B["~"])===H?H:f["$[]"](1)).$downcase()}).$sub(/^_/,"")}),N(w,"$existing_property?",function(v){var s=this;return v in s.$to_n()})}(m[0],null,m),function(I,z,U){var w=M(I,z,"Promise"),S=[w].concat(U),P=n.$r(S);return w.$include(P("Helpers")),N(w,"$then",function q(){var v=q.$$p||H,s,f=this,E=H;return q.$$p=null,E=function(g){var c=v.$call(f.$wrap_result(g));return c&&typeof c.then=="function"?c:c&&typeof c.to_n=="function"?c.to_n():c},s=[f.$to_n().then(E)],K(f,"native=",s),s[s.length-1]}),N(w,"$catch",function q(){var v=q.$$p||H,s,f=this,E=H;return q.$$p=null,E=function(g){var c=v.$call(f.$wrap_result(g));return c&&typeof c.then=="function"?c:c&&typeof c.to_n=="function"?c.to_n():c},s=[f.$to_n().catch(E)],K(f,"native=",s),s[s.length-1]})}(m[0],k("Proxy"),m)}(Y[0],Y)};Opal.modules["opal_stimulus/stimulus_controller"]=function(n){var A=n.klass,h=n.const_set,N=n.Opal,M=n.defs,Q=n.truthy,W=n.send,L=n.gvars,K=n.return_val,b=n.thrower,B=n.rb_plus,$e=n.eqeqeq,Y=n.def,H=n.top,ee=[],Z=n.nil,R=n.$$$;return n.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),H.$require("opal"),H.$require("native"),H.$require("js/proxy"),function(m,k,I){var z=A(m,k,"StimulusController"),U=[z].concat(I),w=n.$r(U),S=z.$$prototype;return S.window=S.document=Z,h(U[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),h(U[0],"DEFAULT_GETTERS",["element"]),M(z,"$inherited",function(q){return N.$bridge(q.$stimulus_controller(),q)}),M(z,"$stimulus_controller",function(){var q=this;return q.stimulus_controller==null&&(q.stimulus_controller=Z),Q(q.stimulus_controller)||(q.stimulus_controller=class extends Controller{}),q.stimulus_controller}),M(z,"$stimulus_name",function(){var q=this;return q.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),M(z,"$method_added",function(q){var v=this;if(Q(w("DEFAULT_GETTERS")["$include?"](q)))return Z;v.$stimulus_controller().prototype[q]=function(...s){try{var f=s.map(function(E){return E&&typeof E=="object"&&!E.$$class?n.JS.Proxy.$new(E):E});return this["$"+q].apply(this,f)}catch(E){console.error("Uncaught",E)}}}),M(z,"$to_ruby_name",function(q){return W(q.$to_s(),"gsub",[/([A-Z]+)/],function(){var s;return"_"+((s=L["~"])===Z?Z:s["$[]"](1)).$downcase()}).$sub(/^_/,"")}),M(z,"$register_all!",function(){try{var q=b("return"),v=this;return W(v.$subclasses(),"each",[],function s(f){return f==null&&(f=Z),W(f,"define_method",["dummy"],K(Z)),Q(application.controllers["$include?"](f.$stimulus_name()))&&q.$throw(Z,s.$$is_lambda),application.register(f.$stimulus_name(),f.$stimulus_controller())},{$$ret:q})}catch(s){if(s===q)return s.$v;throw s}finally{q.is_orphan=!0}}),M(z,"$targets=",function(q){var v=this;return q==null&&(q=[]),v.$stimulus_controller().targets=q,W(q,"each",[],function s(f){var E=s.$$s==null?this:s.$$s,g=Z,c=Z,l=Z,p=Z,C=Z,_=Z;f==null&&(f=Z),g=f.$to_s(),c=E.$to_ruby_name(f),W(E,"define_method",[B(c,"_target")],function(){return R(w("JS"),"Proxy").$new(this[B(g,"Target")])}),W(E,"define_method",[B(c,"_targets")],function(){return W(this[B(g,"Targets")],"map",[],function(t){return t==null&&(t=Z),R(w("JS"),"Proxy").$new(t)})}),W(E,"define_method",[B(B("has_",c),"_target")],function(){return this[B(B("has",g.$capitalize()),"Target")]}),l=B(c,"_target_connected"),p=B(g,"TargetConnected"),E.$stimulus_controller().prototype[p]=function(){if(this["$respond_to?"]&&this["$respond_to?"](l))return this["$"+l]()},C=B(c,"_target_disconnected"),_=B(g,"TargetDisconnected"),E.$stimulus_controller().prototype[_]=function(){if(this["$respond_to?"]&&this["$respond_to?"](C))return this["$"+C]()}},{$$s:v})},-1),M(z,"$outlets=",function(q){var v=this;return q==null&&(q=[]),v.$stimulus_controller().outlets=q,W(q,"each",[],function s(f){var E=s.$$s==null?this:s.$$s,g=Z,c=Z,l=Z,p=Z,C=Z,_=Z;f==null&&(f=Z),g=f.$to_s(),c=E.$to_ruby_name(f),W(E,"define_method",[B(c,"_outlet")],function(){return this[B(g,"Outlet")]}),W(E,"define_method",[B(c,"_outlets")],function(){return this[B(g,"Outlets")]}),W(E,"define_method",[B(B("has_",c),"_outlet")],function(){return this[B(B("has",g.$capitalize()),"Outlet")]}),l=B(c,"_outlet_connected"),p=B(g,"OutletConnected"),E.$stimulus_controller().prototype[p]=function(){if(this["$respond_to?"]&&this["$respond_to?"](l))return this["$"+l]()},C=B(c,"_outlet_disconnected"),_=B(g,"OutletDisconnected"),E.$stimulus_controller().prototype[_]=function(){if(this["$respond_to?"]&&this["$respond_to?"](C))return this["$"+C]()}},{$$s:v})},-1),M(z,"$values=",function(q){var v=this,s=Z;return q==null&&(q=new Map),s=new Map,W(q,"each",[],function f(E,g){var c=f.$$s==null?this:f.$$s,l=Z,p=Z,C=Z,_=Z;E==null&&(E=Z),g==null&&(g=Z),E=c.$to_ruby_name(E),l=$e("string",p=g)?String:$e("number",p)?Number:$e("boolean",p)?Boolean:$e("array",p)?Array:$e("object",p)?Object:c.$raise(w("ArgumentError"),"Unsupported value type: "+g+", please use :string, :number, :boolean, :array, or :object"),s["$[]="](E,l),c.$stimulus_controller().values=s.$to_n(),W(c,"define_method",[B(E,"_value")],function a(){var $=a.$$s==null?this:a.$$s;return $.$Native(this[B(E,"Value")])},{$$s:c}),W(c,"define_method",[B(E,"_value=")],function a($){var t=a.$$s==null?this:a.$$s;return $==null&&($=Z),t.$Native(this[B(E,"Value")]=$)},{$$s:c}),W(c,"define_method",["has_"+E],function(){return this[B(B("has",E.$to_s().$capitalize()),"Value")]}),C=""+E+"_value_changed",_=""+E+"ValueChanged",c.$stimulus_controller().prototype[_]=function(a,$){if(g["$=="]("object")&&(a=JSON.stringify(a),$=JSON.stringify($)),this["$respond_to?"]&&this["$respond_to?"](C))return this["$"+C](a,$)}},{$$s:v})},-1),M(z,"$classes=",function(q){var v=this;return q==null&&(q=[]),v.$stimulus_controller().classes=q,W(q,"each",[],function s(f){var E=s.$$s==null?this:s.$$s,g=Z,c=Z;return f==null&&(f=Z),g=f.$to_s(),c=E.$to_ruby_name(f),W(E,"define_method",[""+c+"_class"],function(){return this[B(g,"Class")]}),W(E,"define_method",[""+c+"_classes"],function(){return this[B(g,"Classes")]}),W(E,"define_method",["has_"+c+"_class"],function(){return this[B(B("has",g.$capitalize()),"Class")]})},{$$s:v})},-1),Y(z,"$element",function(){return R(w("JS"),"Proxy").$new(this.element)}),Y(z,"$window",function(){var q=this,v=Z;return L.$==null&&(L.$=Z),q.window=Q(v=q.window)?v:R(w("JS"),"Proxy").$new(L.$.$window())}),Y(z,"$document",function(){var q=this,v=Z;return L.$==null&&(L.$=Z),q.document=Q(v=q.document)?v:R(w("JS"),"Proxy").$new(L.$.$document())})}(ee[0],Controller,ee)};Opal.modules["opal_vite/concerns/v1/js_proxy_ex"]=function(n){var A=n.module,h=n.truthy,N=n.def,M=n.send,Q=n.klass,W=n.assign_ivar,L=n.return_ivar,K=n.slice,b=n.range,B=n.eqeq,$e=n.lambda,Y=n.to_a,H=n.eqeqeq,ee=n.rb_plus,Z=n.defs,R=n.const_set,m=[],k=n.$r(m),I=n.nil,z=n.$$$;return n.add_stubs("new,to_n,nil?,respond_to?,times,<<,to_s,snake_to_camel,wrap_result,end_with?,[],!,==,call,map,===,length,enum_for,private,upcase,split,+,join,to_proc,test,js_array_to_ruby"),function(U,w){var S=A(U,"OpalVite"),P=[S].concat(w);return function(q,v){var s=A(q,"Concerns"),f=[s].concat(v);return function(E,g){var c=A(E,"V1"),l=[c].concat(g);return function(p,C){var _=A(p,"JsProxyEx"),a=[_].concat(C),$=n.$r(a);return N(_,"$local_storage",function(){var e=this,r=I;return e.local_storage==null&&(e.local_storage=I),e.local_storage=h(r=e.local_storage)?r:$("JsObject").$new(localStorage)}),N(_,"$session_storage",function(){var e=this,r=I;return e.session_storage==null&&(e.session_storage=I),e.session_storage=h(r=e.session_storage)?r:$("JsObject").$new(sessionStorage)}),N(_,"$js_json",function(){var e=this,r=I;return e.js_json==null&&(e.js_json=I),e.js_json=h(r=e.js_json)?r:$("JsonWrapper").$new()}),N(_,"$js_date",function(){return $("DateWrapper")}),N(_,"$js_console",function(){var e=this,r=I;return e.js_console==null&&(e.js_console=I),e.js_console=h(r=e.js_console)?r:$("JsObject").$new(console)}),N(_,"$new_event",function(e,r){return r==null&&(r=new Map),$("JsObject").$new(new Event(e,r.$to_n()))},-2),N(_,"$new_custom_event",function(e,r){return r==null&&(r=new Map),$("JsObject").$new(new CustomEvent(e,{detail:r.$to_n()}))},-2),N(_,"$new_url",function(e){return $("JsObject").$new(new URL(e))}),N(_,"$new_regexp",function(e,r){return r==null&&(r=""),$("RegExpWrapper").$new(e,r)},-2),N(_,"$new_date",function(e){return e==null&&(e=I),h(e)?$("JsObject").$new(new Date(e)):$("JsObject").$new(new Date)},-1),N(_,"$date_now",function(){return Date.now()}),N(_,"$wrap_js",function(e){var r=I;return h(e["$nil?"]())?I:(r=h(e["$respond_to?"]("to_n"))?e.$to_n():e,$("JsObject").$new(r))}),N(_,"$js_array_to_ruby",function(e){var r=I,i=I;return r=[],i=e.length,M(i,"times",[],function(o){var y=I;return o==null&&(o=I),y=e[o],r["$<<"]($("JsObject").$new(y))}),r}),N(_,"$new_js_array",function(){return $("JsObject").$new([])}),function(t,e,r){var i=Q(t,e,"JsObject"),u=[i].concat(r),o=n.$r(u),y=i.$$prototype;return y.native=I,N(i,"$initialize",W("native")),N(i,"$to_n",L("native")),N(i,"$[]",function(D){var F=this,G=I,re=I,ae=I;return G=D.$to_s(),re=F.$snake_to_camel(G),ae=F.native[re],F.$wrap_result(ae)}),N(i,"$[]=",function(D,F){var G=this,re=I,ae=I,le=I;return re=D.$to_s(),ae=G.$snake_to_camel(re),le=h(F["$respond_to?"]("to_n"))?F.$to_n():F,G.native[ae]=le}),N(i,"$method_missing",function j(D,F){var G=j.$$p||I,re,ae,le=this,ce=I,de=I,he=I,ve=I,me=I,be=I,ie=I,T=I,V=I,X=I;return j.$$p=null,re=K(arguments,1),ae=re,ce=D.$to_s(),h(ce["$end_with?"]("="))?(de=ce["$[]"](b(0,-2,!1)),he=le.$snake_to_camel(de),ve=ae["$[]"](0),me=h(ve["$respond_to?"]("to_n"))?ve.$to_n():ve,le.native[he]=me,ve):h(ce["$end_with?"]("?"))?(de=ce["$[]"](b(0,-2,!1)),he=le.$snake_to_camel(de),le.native[he]["$!"]()["$!"]()):(he=le.$snake_to_camel(ce),be=typeof le.native[he]=="function",h(be)?B(he,"addEventListener")&&h(G)?(ie=$e(function(ne){return ne==null&&(ne=I),G.$call(o("JsObject").$new(ne))}),le.native.addEventListener(ae["$[]"](0),ie),I):(T=M(ae,"map",[],function(ne){return ne==null&&(ne=I),h(ne["$respond_to?"]("to_n"))?ne.$to_n():ne}),h(G)&&(ie=$e(function O(ne){var se,oe,fe=O.$$s==null?this:O.$$s,d=I;return se=K(arguments),oe=se,d=M(oe,"map",[],function x(J){var te=x.$$s==null?this:x.$$s;return J==null&&(J=I),te.$wrap_result(J)},{$$s:fe}),M(G,"call",Y(d))},{$$arity:-1,$$s:le}),T["$<<"](ie)),V=H(0,X=T.$length())?le.native[he]():H(1,X)?le.native[he](T["$[]"](0)):H(2,X)?le.native[he](T["$[]"](0),T["$[]"](1)):H(3,X)?le.native[he](T["$[]"](0),T["$[]"](1),T["$[]"](2)):le.native[he].apply(le.native,T),le.$wrap_result(V)):(V=le.native[he],le.$wrap_result(V)))},-2),N(i,"$respond_to_missing?",function(D,F){return!0},-2),N(i,"$each",function j(){var D=j.$$p||I,F=this,G=I;return j.$$p=null,h(D)?(G=F.native.length,h(G)&&M(G,"times",[],function re(ae){var le=re.$$s==null?this:re.$$s,ce=I;return le.native==null&&(le.native=I),ae==null&&(ae=I),ce=le.native[ae],D.$call(le.$wrap_result(ce))},{$$s:F}),F):F.$enum_for("each")}),N(i,"$length",function(){var D=this;return D.native.length}),N(i,"$size",function(){var D=this;return D.$length()}),N(i,"$nil?",function(){var D=this;return D.native==null}),N(i,"$exists?",function(){var D=this;return D["$nil?"]()["$!"]()}),N(i,"$to_s",function(){var D=this;return String(D.native)}),N(i,"$inspect",function(){var D=this;return"#<JsObject: "+D.$to_s()+">"}),i.$private(),N(i,"$snake_to_camel",function(D){var F=I;return B(D,D.$upcase())||(F=D.$split("_"),B(F.$length(),1))?D:ee(F["$[]"](0),M(F["$[]"](b(1,-1,!1)),"map",[],"capitalize".$to_proc()).$join())}),N(i,"$wrap_result",function(D){return h(D==null)?I:h(typeof D=="number")||h(typeof D=="string")||h(typeof D=="boolean")?D:o("JsObject").$new(D)})}(a[0],null,a),function(t,e,r){var i=Q(t,e,"JsonWrapper"),u=[i].concat(r),o=n.$r(u);return N(i,"$parse",function(j){var D=I;return D=JSON.parse(j),o("JsObject").$new(D)}),N(i,"$stringify",function(j){var D=I;return D=h(j["$respond_to?"]("to_n"))?j.$to_n():j,JSON.stringify(D)})}(a[0],null,a),function(t,e,r){var i=Q(t,e,"RegExpWrapper"),u=[i].concat(r),o=n.$r(u),y=i.$$prototype;return y.native=I,N(i,"$initialize",function(D,F){var G=this;return F==null&&(F=""),G.native=new RegExp(D,F)},-2),N(i,"$to_n",L("native")),N(i,"$test",function(D){var F=this;return F.native.test(D)}),N(i,"$match",function(D){var F=this,G=I;return G=D.match(F.native),h(G===null)?I:o("JsObject").$new(G)}),N(i,"$=~",function(D){var F=this;return F.$test(D)})}(a[0],null,a),function(t,e){var r=A(t,"DateWrapper"),i=[r].concat(e),u=n.$r(i);return Z(r,"$now",function(){return Date.now()}),Z(r,"$new",function(y){return y==null&&(y=I),h(y)?u("JsObject").$new(new Date(y)):u("JsObject").$new(new Date)},-1),Z(r,"$parse",function(y){return Date.parse(y)})}(a[0],a),N(_,"$has_target?",function(e){var r=this,i=I,u=I;return i=r.$snake_to_camel(e.$to_s()),u="has"+i["$[]"](0).$upcase()+i["$[]"](b(1,-1,!1))+"Target",this[u]}),N(_,"$target",function(e){var r=this,i=I,u=I,o=I;return i=r.$snake_to_camel(e.$to_s()),u=""+i+"Target",o=this[u],$("JsObject").$new(o)}),N(_,"$targets",function(e){var r=this,i=I,u=I,o=I;return i=r.$snake_to_camel(e.$to_s()),u=""+i+"Targets",o=this[u],r.$js_array_to_ruby(o)}),N(_,"$set_target_text",function(e,r){var i=this,u=I,o=I,y=I;u=i.$snake_to_camel(e.$to_s()),o="has"+u["$[]"](0).$upcase()+u["$[]"](b(1,-1,!1))+"Target",y=""+u+"Target",this[o]&&(this[y].textContent=r)}),N(_,"$set_target_class",function(e,r){var i=this,u=I,o=I,y=I;u=i.$snake_to_camel(e.$to_s()),o="has"+u["$[]"](0).$upcase()+u["$[]"](b(1,-1,!1))+"Target",y=""+u+"Target",this[o]&&(this[y].className=r)}),N(_,"$set_target_disabled",function(e,r){var i=this,u=I,o=I,y=I;u=i.$snake_to_camel(e.$to_s()),o="has"+u["$[]"](0).$upcase()+u["$[]"](b(1,-1,!1))+"Target",y=""+u+"Target",this[o]&&(this[y].disabled=r)}),_.$private(),N(_,"$snake_to_camel",function(e){var r=I;return B(e,e.$upcase())||(r=e.$to_s().$split("_"),B(r.$length(),1))?e:ee(r["$[]"](0),M(r["$[]"](b(1,-1,!1)),"map",[],"capitalize".$to_proc()).$join())})}(l[0],l)}(f[0],f)}(P[0],P)}(m[0],m),R(m[0],"JsProxyEx",z(z(z(k("OpalVite"),"Concerns"),"V1"),"JsProxyEx"))};Opal.modules["opal_vite/concerns/v1/dom_helpers"]=function(n){var A=n.module,h=n.truthy,N=n.def,M=n.send,Q=n.const_set,W=[],L=n.$r(W),K=n.nil,b=n.$$$;return n.add_stubs("window,to_n,query_selector,element,nil?,query_selector_all,map,to_a,Native,add,class_list,remove,toggle,contains,set_timeout,!,element_exists?,set_style"),function(B,$e){var Y=A(B,"OpalVite"),H=[Y].concat($e);return function(ee,Z){var R=A(ee,"Concerns"),m=[R].concat(Z);return function(k,I){var z=A(k,"V1"),U=[z].concat(I);return function(w){var S=A(w,"DomHelpers");return N(S,"$dispatch_custom_event",function(q,v,s){var f=this,E=K;v==null&&(v=new Map),s==null&&(s=K),s=h(E=s)?E:f.$window();const g=new CustomEvent(q,{detail:v.$to_n()});s.$to_n().dispatchEvent(g)},-2),N(S,"$create_event",function(q,v){return v==null&&(v=new Map([["bubbles",!0]])),new Event(q,v.$to_n())},-2),N(S,"$query",function(q){var v=this,s=K;return s=v.$element().$query_selector(q),h(s["$nil?"]())?K:s}),N(S,"$query_all",function(q){var v=this,s=K;return s=v.$element().$query_selector_all(q),M(v.$Native(Array.from(s.$to_n())).$to_a(),"map",[],function f(E){var g=f.$$s==null?this:f.$$s;return E==null&&(E=K),g.$Native(E)},{$$s:v})}),N(S,"$add_class",function(q,v){return q.$class_list().$add(v)}),N(S,"$remove_class",function(q,v){return q.$class_list().$remove(v)}),N(S,"$toggle_class",function(q,v){return q.$class_list().$toggle(v)}),N(S,"$has_class?",function(q,v){return q.$class_list().$contains(v)}),N(S,"$set_timeout",function P(q){var v=P.$$p||K,s=this;return P.$$p=null,s.$window().$set_timeout(v,q)}),N(S,"$element_exists?",function(q){var v=K;return h(v=q["$nil?"]()["$!"]())?q.$to_n():v}),N(S,"$set_style",function(q,v,s){var f=this;return h(f["$element_exists?"](q))?q.$to_n().style[v]=s:K}),N(S,"$get_style",function(q,v){var s=this;return h(s["$element_exists?"](q))?q.$to_n().style[v]:K}),N(S,"$show_element",function(q){var v=this;return v.$set_style(q,"display","block")}),N(S,"$hide_element",function(q){var v=this;return v.$set_style(q,"display","none")})}(U[0])}(m[0],m)}(H[0],H)}(W[0],W),Q(W[0],"DomHelpers",b(b(b(L("OpalVite"),"Concerns"),"V1"),"DomHelpers"))};Opal.modules["opal_vite/concerns/v1/toastable"]=function(n){var A=n.module,h=n.def,N=n.const_set,M=[],Q=n.$r(M);n.nil;var W=n.$$$;return n.add_stubs("dispatch_toast"),function(L,K){var b=A(L,"OpalVite"),B=[b].concat(K);return function($e,Y){var H=A($e,"Concerns"),ee=[H].concat(Y);return function(Z,R){var m=A(Z,"V1"),k=[m].concat(R);return function(I){var z=A(I,"Toastable");return h(z,"$dispatch_toast",function(w,S){S==null&&(S="info");const P=new CustomEvent("show-toast",{detail:{message:w,type:S}});window.dispatchEvent(P)},-2),h(z,"$show_success",function(w){var S=this;return S.$dispatch_toast(w,"success")}),h(z,"$show_error",function(w){var S=this;return S.$dispatch_toast(w,"error")}),h(z,"$show_warning",function(w){var S=this;return S.$dispatch_toast(w,"warning")}),h(z,"$show_info",function(w){var S=this;return S.$dispatch_toast(w,"info")})}(k[0])}(ee[0],ee)}(B[0],B)}(M[0],M),N(M[0],"Toastable",W(W(W(Q("OpalVite"),"Concerns"),"V1"),"Toastable"))};Opal.modules["opal_vite/concerns/v1/storable"]=function(n){var A=n.module,h=n.truthy,N=n.def,M=n.const_set,Q=[],W=n.$r(Q),L=n.nil,K=n.$$$;return n.add_stubs("to_n"),function(b,B){var $e=A(b,"OpalVite"),Y=[$e].concat(B);return function(H,ee){var Z=A(H,"Concerns"),R=[Z].concat(ee);return function(m,k){var I=A(m,"V1"),z=[I].concat(k);return function(U,w){var S=A(U,"Storable"),P=[S].concat(w),q=n.$r(P);return N(S,"$storage_get",function(s){var f=L;if(f=localStorage.getItem(s),!h(f))return L;try{return JSON.parse(f)}catch(E){if(n.rescue(E,[q("StandardError")]))try{return L}finally{n.pop_exception(E)}else throw E}}),N(S,"$storage_set",function(s,f){var E=L;return E=JSON.stringify(f.$to_n()),localStorage.setItem(s,E)}),N(S,"$storage_remove",function(s){return localStorage.removeItem(s)})}(z[0],z)}(R[0],R)}(Y[0],Y)}(Q[0],Q),M(Q[0],"Storable",K(K(K(W("OpalVite"),"Concerns"),"V1"),"Storable"))};Opal.modules["opal_vite/concerns/v1/stimulus_helpers"]=function(n){var A=n.module,h=n.def,N=n.truthy,M=n.eqeq,Q=n.send,W=n.slice,L=n.ensure_kwargs,K=n.get_kwarg,b=n.hash_get,B=n.rb_plus,$e=n.rb_minus,Y=n.to_a,H=n.range,ee=n.const_set,Z=[],R=n.$r(Z),m=n.nil,k=n.$$$;return n.add_stubs("camelize,has_target?,target_set_value,target_set_html,set_target_style,get_target_style,==,show_target,hide_target,call,body_style,to_n,storage_get,is_a?,parse_int,event_data,to_native_element,Native,map,to_a,js_timestamp,is_nan?,parse_float,to_s,empty?,respond_to?,fetch_json_promise,fetch_json_safe,js_then,js_catch,console_error,set_stimulus_value,+,stimulus_value,-,!,get_class,get_classes,has_outlet?,get_outlet,js_call_on,each,get_outlets,nil?,stimulus_dispatch,action_param,[],[]=,flatten,to_proc,blank?,private,include?,upcase,downcase,split,join,first"),function(I,z){var U=A(I,"OpalVite"),w=[U].concat(z);return function(S,P){var q=A(S,"Concerns"),v=[q].concat(P);return function(s,f){var E=A(s,"V1"),g=[E].concat(f);return function(c,l){var p=A(c,"StimulusHelpers"),C=[p].concat(l),_=n.$r(C);return h(p,"$has_target?",function($){var t=this,e=m;return e="has"+t.$camelize($)+"Target",this[e]}),h(p,"$get_target",function($){var t=this,e=m;return N(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e]):m}),h(p,"$get_targets",function($){var t=this,e=m;return e=""+t.$camelize($,!1)+"Targets",Array.from(this[e]||[])}),h(p,"$target_value",function($){var t=this,e=m;return N(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].value):m}),h(p,"$target_set_value",function($,t){var e=this,r=m;return N(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].value=t):m}),h(p,"$target_html",function($){var t=this,e=m;return N(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].innerHTML):m}),h(p,"$target_set_html",function($,t){var e=this,r=m;return N(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].innerHTML=t):m}),h(p,"$target_text",function($){var t=this,e=m;return N(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].textContent):m}),h(p,"$target_set_text",function($,t){var e=this,r=m;return N(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].textContent=t):m}),h(p,"$target_data",function($,t){var e=this,r=m;return N(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].getAttribute("data-"+t)):m}),h(p,"$target_set_data",function($,t,e){var r=this,i=m;return N(r["$has_target?"]($))?(i=""+r.$camelize($,!1)+"Target",this[i].setAttribute("data-"+t,e)):m}),h(p,"$target_clear",function($){var t=this;return t.$target_set_value($,"")}),h(p,"$target_clear_html",function($){var t=this;return t.$target_set_html($,"")}),h(p,"$set_target_style",function($,t,e){var r=this,i=m;return N(r["$has_target?"]($))?(i=""+r.$camelize($,!1)+"Target",this[i].style[t]=e):m}),h(p,"$get_target_style",function($,t){var e=this,r=m;return N(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].style[t]):m}),h(p,"$show_target",function($){var t=this;return t.$set_target_style($,"display","")}),h(p,"$hide_target",function($){var t=this;return t.$set_target_style($,"display","none")}),h(p,"$toggle_target_visibility",function($){var t=this,e=m;return e=t.$get_target_style($,"display"),M(e,"none")?t.$show_target($):t.$hide_target($)}),h(p,"$add_target_class",function($,t){var e=this,r=m;return N(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.add(t)):m}),h(p,"$remove_target_class",function($,t){var e=this,r=m;return N(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.remove(t)):m}),h(p,"$toggle_target_class",function($,t){var e=this,r=m;return N(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.toggle(t)):m}),h(p,"$has_target_class?",function($,t){var e=this,r=m;return N(e["$has_target?"]($))?(r=""+e.$camelize($,!1)+"Target",this[r].classList.contains(t)):!1}),h(p,"$js_timestamp",function(){return Date.now()}),h(p,"$js_iso_date",function(){return new Date().toISOString()}),h(p,"$js_date",function($){return $==null&&($=m),N($)?new Date($):new Date},-1),h(p,"$js_regexp",function($,t){return t==null&&(t=""),new RegExp($,t)},-2),h(p,"$js_regexp_test",function($,t,e){return e==null&&(e=""),new RegExp($,e).test(t)},-3),h(p,"$set_timeout",function a($){var t=a.$$p||m;return a.$$p=null,setTimeout(function(){t.$call()},$)}),h(p,"$set_interval",function a($){var t=a.$$p||m;return a.$$p=null,setInterval(function(){t.$call()},$)}),h(p,"$clear_timeout",function($){return clearTimeout($)}),h(p,"$clear_interval",function($){return clearInterval($)}),h(p,"$body_style",function($,t){return document.body.style[$]=t}),h(p,"$lock_body_scroll",function(){var $=this;return $.$body_style("overflow","hidden")}),h(p,"$unlock_body_scroll",function(){var $=this;return $.$body_style("overflow","")}),h(p,"$js_array",function(){return[]}),h(p,"$js_array_push",function($,t){return $.push(t.$to_n())}),h(p,"$js_array_length",function($){return $.length}),h(p,"$js_array_at",function($,t){return $[t]}),h(p,"$storage_get",function($){return localStorage.getItem($)}),h(p,"$storage_set",function($,t){return localStorage.setItem($,t)}),h(p,"$storage_remove",function($){return localStorage.removeItem($)}),h(p,"$storage_get_json",function($,t){var e=this,r=m;return t==null&&(t=m),r=e.$storage_get($),N(r===null)?t:JSON.parse(r)},-2),h(p,"$storage_set_json",function($,t){return localStorage.setItem($,JSON.stringify(t.$to_n()))}),h(p,"$dispatch_window_event",function($,t){var e=m;t==null&&(t=new Map),e=N(t["$is_a?"](_("Hash")))?t.$to_n():t;const r=new CustomEvent($,{detail:e});window.dispatchEvent(r)},-2),h(p,"$dispatch_event",function($,t){var e=m;t==null&&(t=new Map),e=N(t["$is_a?"](_("Hash")))?t.$to_n():t;const r=new CustomEvent($,{detail:e});this.element.dispatchEvent(r)},-2),h(p,"$on_window_event",function a($){var t=a.$$p||m;return a.$$p=null,window.addEventListener($,t)}),h(p,"$off_window_event",function($,t){return window.removeEventListener($,t)}),h(p,"$on_document_event",function a($){var t=a.$$p||m;return a.$$p=null,document.addEventListener($,t)}),h(p,"$on_dom_ready",function a(){var $=a.$$p||m;return a.$$p=null,document.addEventListener("DOMContentLoaded",$)}),h(p,"$on_element_event",function a($,t){var e=a.$$p||m;return a.$$p=null,$.addEventListener(t,e)}),h(p,"$off_element_event",function($,t,e){return $.removeEventListener(t,e)}),h(p,"$on_controller_event",function a($){var t=a.$$p||m;return a.$$p=null,this.element.addEventListener($,t)}),h(p,"$event_target",function(){return event.currentTarget}),h(p,"$event_data",function($){return event.currentTarget.getAttribute("data-"+$)}),h(p,"$event_data_int",function($){var t=this;return t.$parse_int(t.$event_data($))}),h(p,"$prevent_default",function(){return event.preventDefault()}),h(p,"$event_key",function(){return event.key}),h(p,"$to_native_element",function($){return N(typeof $.$to_n=="function")?$.$to_n():$}),h(p,"$add_class",function($,t){var e=this,r=m;return r=e.$to_native_element($),r.classList.add(t)}),h(p,"$remove_class",function($,t){var e=this,r=m;return r=e.$to_native_element($),r.classList.remove(t)}),h(p,"$toggle_class",function($,t){var e=this,r=m;return r=e.$to_native_element($),r.classList.toggle(t)}),h(p,"$has_class?",function($,t){var e=this,r=m;return r=e.$to_native_element($),r.classList.contains(t)}),h(p,"$set_attr",function($,t,e){var r=this,i=m;return i=r.$to_native_element($),i.setAttribute(t,e)}),h(p,"$get_attr",function($,t){var e=this,r=m;return r=e.$to_native_element($),r.getAttribute(t)}),h(p,"$remove_attr",function($,t){var e=this,r=m;return r=e.$to_native_element($),r.removeAttribute(t)}),h(p,"$set_style",function($,t,e){var r=this,i=m;return i=r.$to_native_element($),i.style[t]=e}),h(p,"$set_html",function($,t){var e=this,r=m;return r=e.$to_native_element($),r.innerHTML=t}),h(p,"$set_text",function($,t){var e=this,r=m;return r=e.$to_native_element($),r.textContent=t}),h(p,"$get_value",function($){var t=this,e=m;return e=t.$to_native_element($),e.value}),h(p,"$set_value",function($,t){var e=this,r=m;return r=e.$to_native_element($),r.value=t}),h(p,"$focus",function($){var t=this,e=m;return e=t.$to_native_element($),e.focus()}),h(p,"$has_attr?",function($,t){var e=this,r=m;return r=e.$to_native_element($),r.hasAttribute(t)}),h(p,"$create_element",function($){return document.createElement($)}),h(p,"$append_child",function($,t){var e=this,r=m,i=m;return r=e.$to_native_element($),i=e.$to_native_element(t),r.appendChild(i)}),h(p,"$remove_element",function($){var t=this,e=m;return e=t.$to_native_element($),e.remove()}),h(p,"$next_sibling",function($){var t=this,e=m;return e=t.$to_native_element($),e.nextElementSibling}),h(p,"$prev_sibling",function($){var t=this,e=m;return e=t.$to_native_element($),e.previousElementSibling}),h(p,"$parent",function($){var t=this,e=m;return e=t.$to_native_element($),e.parentElement}),h(p,"$query",function($){var t=this,e=m;return e=document.querySelector($),N(e===null)?m:t.$Native(e)}),h(p,"$query_all",function($){var t=this,e=m;return e=Array.from(document.querySelectorAll($)),Q(t.$Native(e).$to_a(),"map",[],function r(i){var u=r.$$s==null?this:r.$$s;return i==null&&(i=m),u.$Native(i)},{$$s:t})}),h(p,"$query_element",function($){var t=this,e=m;return e=this.element.querySelector($),N(e===null)?m:t.$Native(e)}),h(p,"$query_all_element",function($){var t=this,e=m;return e=Array.from(this.element.querySelectorAll($)),Q(t.$Native(e).$to_a(),"map",[],function r(i){var u=r.$$s==null?this:r.$$s;return i==null&&(i=m),u.$Native(i)},{$$s:t})}),h(p,"$doc_root",function(){return document.documentElement}),h(p,"$set_root_attr",function($,t){return document.documentElement.setAttribute($,t)}),h(p,"$get_root_attr",function($){return document.documentElement.getAttribute($)}),h(p,"$clone_template",function($){var t=this,e=m;return e=""+t.$camelize($,!1)+"Target",this[e].content.cloneNode(!0)}),h(p,"$template_first_child",function($){return $.firstElementChild}),h(p,"$element_add_class",function($){return this.element.classList.add($)}),h(p,"$element_remove_class",function($){return this.element.classList.remove($)}),h(p,"$element_toggle_class",function($){return this.element.classList.toggle($)}),h(p,"$generate_id",function(){var $=this;return $.$js_timestamp()}),h(p,"$target_focus",function($){var t=this,e=m;return N(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].focus()):m}),h(p,"$target_blur",function($){var t=this,e=m;return N(t["$has_target?"]($))?(e=""+t.$camelize($,!1)+"Target",this[e].blur()):m}),h(p,"$parse_int",function($,t){return t==null&&(t=10),parseInt($,t)},-2),h(p,"$parse_float",function($){return parseFloat($)}),h(p,"$is_nan?",function($){return Number.isNaN($)}),h(p,"$parse_int_or",function($,t){var e=this,r=m;return t==null&&(t=0),r=e.$parse_int($),N(e["$is_nan?"](r))?t:r},-2),h(p,"$parse_float_or",function($,t){var e=this,r=m;return t==null&&(t=0),r=e.$parse_float($),N(e["$is_nan?"](r))?t:r},-2),h(p,"$js_prop",function($){return this[$.$to_s()]}),h(p,"$js_set_prop",function($,t){return this[$.$to_s()]=t}),h(p,"$js_has_prop?",function($){return!!this[$.$to_s()]}),h(p,"$js_call",function($,t){var e,r,i=m;return e=W(arguments,1),r=e,N(r["$empty?"]())?this[$.$to_s()]():(i=Q(r,"map",[],function(o){return o==null&&(o=m),N(o["$respond_to?"]("to_n"))?o.$to_n():o}),this[$.$to_s()].apply(this,i))},-2),h(p,"$js_call_on",function($,t,e){var r,i,u=m;return r=W(arguments,2),i=r,N(i["$empty?"]())?$[t.$to_s()]():(u=Q(i,"map",[],function(y){return y==null&&(y=m),N(y["$respond_to?"]("to_n"))?y.$to_n():y}),$[t.$to_s()].apply($,u))},-3),h(p,"$js_get",function($,t){return $[t.$to_s()]}),h(p,"$js_set",function($,t,e){return $[t.$to_s()]=e}),h(p,"$json_parse",function($){return JSON.parse($)}),h(p,"$json_stringify",function($){var t=m;return t=N($["$respond_to?"]("to_n"))?$.$to_n():$,JSON.stringify(t)}),h(p,"$console_log",function($){var t,e;return t=W(arguments),e=t,console.log.apply(console,e)},-1),h(p,"$console_warn",function($){var t,e;return t=W(arguments),e=t,console.warn.apply(console,e)},-1),h(p,"$console_error",function($){var t,e;return t=W(arguments),e=t,console.error.apply(console,e)},-1),h(p,"$js_string_char_at",function($,t){return $.charAt(t)}),h(p,"$js_substring",function($,t,e){return e==null&&(e=m),N(e)?$.substring(t,e):$.substring(t)},-3),h(p,"$js_split",function($,t){return $.split(t)}),h(p,"$js_trim",function($){return $.trim()}),h(p,"$js_includes?",function($,t){return $.includes(t)}),h(p,"$js_equals?",function($,t){return $===t}),h(p,"$js_loose_equals?",function($,t){return $==t}),h(p,"$js_random",function(){return Math.random()}),h(p,"$js_min",function($,t){return Math.min($,t)}),h(p,"$js_max",function($,t){return Math.max($,t)}),h(p,"$js_abs",function($){return Math.abs($)}),h(p,"$js_round",function($){return Math.round($)}),h(p,"$js_ceil",function($){return Math.ceil($)}),h(p,"$js_to_fixed",function($,t){return $.toFixed(t)}),h(p,"$random_int",function($){return Math.floor(Math.random()*$)}),h(p,"$js_floor",function($){return Math.floor($)}),h(p,"$js_global_exists?",function($){return typeof window[$]<"u"}),h(p,"$js_global",function($){return window[$]}),h(p,"$js_new",function($,t){var e,r,i=m;return e=W(arguments,1),r=e,N(r["$empty?"]())?new $:(i=Q(r,"map",[],function(o){return o==null&&(o=m),o!=null&&typeof o.$to_n=="function"?o.$to_n():o}),Reflect.construct($,i))},-2),h(p,"$js_define_method",function a($){var t=a.$$p||m;return a.$$p=null,this[$.$to_s()]=t}),h(p,"$js_define_method_on",function a($,t){var e=a.$$p||m;return a.$$p=null,$[t.$to_s()]=e}),h(p,"$js_length",function($){return $.length}),h(p,"$js_map",function a($){var t=a.$$p||m;return a.$$p=null,$.map(t)}),h(p,"$js_filter",function a($){var t=a.$$p||m;return a.$$p=null,$.filter(t)}),h(p,"$js_reduce",function a($,t){var e=a.$$p||m;return a.$$p=null,$.reduce(e,t)}),h(p,"$js_each",function a($){var t=a.$$p||m;return a.$$p=null,$.forEach(t)}),h(p,"$js_slice",function($,t,e){return e==null&&(e=m),N(e)?$.slice(t,e):$.slice(t)},-3),h(p,"$js_object",function(){return{}}),h(p,"$js_keys",function($){return Object.keys($)}),h(p,"$js_values",function($){return Object.values($)}),h(p,"$js_entries",function($){return Object.entries($)}),h(p,"$js_unique_count",function($){return new Set($).size}),h(p,"$js_fetch",function($){return fetch($)}),h(p,"$fetch_json",function a($){var t=a.$$p||m;a.$$p=null,fetch($).then(e=>e.json()).then(e=>t.$call(e)).catch(e=>console.error("Fetch error:",e))}),h(p,"$fetch_json_promise",function($){return fetch($).then(t=>t.json())}),h(p,"$fetch_json_safe",function($){return fetch($).then(function(t){if(!t.ok)throw new Error("Network response was not ok: "+t.status);return t.json()})}),h(p,"$fetch_all_json",function($){var t=this,e=m;return e=Q($,"map",[],function r(i){var u=r.$$s==null?this:r.$$s;return i==null&&(i=m),u.$fetch_json_promise(i)},{$$s:t}),Promise.all(e)}),h(p,"$fetch_json_with_handlers",function($,t){var e,r,i=this,u=m;return t=L(t),e=K(t,"on_success"),r=b(t,"on_error"),r==null&&(r=m),u=i.$fetch_json_safe($),u=Q(i,"js_then",[u],function(y){return y==null&&(y=m),e.$call(y)}),N(r)?Q(i,"js_catch",[u],function(y){return y==null&&(y=m),r.$call(y)}):Q(i,"js_catch",[u],function o(y){var j=o.$$s==null?this:o.$$s;return y==null&&(y=m),j.$console_error("Fetch error:",y)},{$$s:i})}),h(p,"$promise_all",function($){return Promise.all($)}),h(p,"$promise_race",function($){return Promise.race($)}),h(p,"$promise_resolve",function($){var t=m;return t=N($["$respond_to?"]("to_n"))?$.$to_n():$,Promise.resolve(t)}),h(p,"$promise_reject",function($){return Promise.reject($)}),h(p,"$js_then",function a($){var t=a.$$p||m;return a.$$p=null,$.then(t)}),h(p,"$js_catch",function a($){var t=a.$$p||m;return a.$$p=null,$.catch(t)}),h(p,"$js_finally",function a($){var t=a.$$p||m;return a.$$p=null,$.finally(t)}),h(p,"$stimulus_value",function($){var t=this,e=m;return e=""+t.$camelize($,!1)+"Value",this[e]}),h(p,"$set_stimulus_value",function($,t){var e=this,r=m,i=m;return r=""+e.$camelize($,!1)+"Value",i=N(t["$respond_to?"]("to_n"))?t.$to_n():t,this[r]=i}),h(p,"$has_stimulus_value?",function($){var t=this,e=m;return e="has"+t.$camelize($)+"Value",this[e]}),h(p,"$increment_stimulus_value",function($,t){var e=this;return t==null&&(t=1),e.$set_stimulus_value($,B(e.$stimulus_value($),t))},-2),h(p,"$decrement_stimulus_value",function($,t){var e=this;return t==null&&(t=1),e.$set_stimulus_value($,$e(e.$stimulus_value($),t))},-2),h(p,"$toggle_stimulus_value",function($){var t=this;return t.$set_stimulus_value($,t.$stimulus_value($)["$!"]())}),h(p,"$get_class",function($){var t=this,e=m;return e=""+t.$camelize($,!1)+"Class",this[e]}),h(p,"$get_classes",function($){var t=this,e=m;return e=""+t.$camelize($,!1)+"Classes",Array.from(this[e]||[])}),h(p,"$has_class_definition?",function($){var t=this,e=m;return e="has"+t.$camelize($)+"Class",this[e]}),h(p,"$apply_class",function($,t){var e=this,r=m,i=m;return r=e.$to_native_element($),i=e.$get_class(t),N(i)?r.classList.add(i):m}),h(p,"$apply_classes",function($,t){var e=this,r=m,i=m;return r=e.$to_native_element($),i=e.$get_classes(t),N(i)?r.classList.add(...i):m}),h(p,"$remove_applied_class",function($,t){var e=this,r=m,i=m;return r=e.$to_native_element($),i=e.$get_class(t),N(i)?r.classList.remove(i):m}),h(p,"$remove_applied_classes",function($,t){var e=this,r=m,i=m;return r=e.$to_native_element($),i=e.$get_classes(t),N(i)?r.classList.remove(...i):m}),h(p,"$has_outlet?",function($){var t=this,e=m;return e="has"+t.$camelize($)+"Outlet",this[e]}),h(p,"$get_outlet",function($){var t=this,e=m;return e=""+t.$camelize($,!1)+"Outlet",this[e]}),h(p,"$get_outlets",function($){var t=this,e=m;return e=""+t.$camelize($,!1)+"Outlets",Array.from(this[e]||[])}),h(p,"$get_outlet_element",function($){var t=this,e=m;return e=""+t.$camelize($,!1)+"OutletElement",this[e]}),h(p,"$get_outlet_elements",function($){var t=this,e=m;return e=""+t.$camelize($,!1)+"OutletElements",Array.from(this[e]||[])}),h(p,"$call_outlet",function($,t,e){var r,i,u=this,o=m;return r=W(arguments,2),i=r,N(u["$has_outlet?"]($))?(o=u.$get_outlet($),Q(u,"js_call_on",[o,t].concat(Y(i)))):m},-3),h(p,"$call_all_outlets",function($,t,e){var r,i,u=this;return r=W(arguments,2),i=r,Q(u.$get_outlets($),"each",[],function o(y){var j=o.$$s==null?this:o.$$s;return y==null&&(y=m),Q(j,"js_call_on",[y,t].concat(Y(i)))},{$$s:u})},-3),h(p,"$stimulus_dispatch",function($,t){var e,r,i,u,o,y=m,j=m;return t=L(t),e=b(t,"detail"),e==null&&(e=new Map),r=b(t,"target"),r==null&&(r=m),i=b(t,"prefix"),i==null&&(i=m),u=b(t,"bubbles"),u==null&&(u=!0),o=b(t,"cancelable"),o==null&&(o=!0),y=N(e["$respond_to?"]("to_n"))?e.$to_n():e,j={detail:y,bubbles:u,cancelable:o},N(r["$nil?"]())||(j.target=r),N(i["$nil?"]())||(j.prefix=i),this.dispatch($,j)},-2),h(p,"$stimulus_dispatch_confirm",function($,t){var e,r=this,i=m;return t=L(t),e=b(t,"detail"),e==null&&(e=new Map),i=r.$stimulus_dispatch($,new Map([["detail",e],["cancelable",!0]])),!i.defaultPrevented},-2),h(p,"$action_params",function(){return event.params||{}}),h(p,"$action_param",function($){return(event.params||{})[$.$to_s()]}),h(p,"$action_param_int",function($,t){var e=this,r=m,i=m;return t==null&&(t=0),r=e.$action_param($),i=e.$parse_int(r),N(e["$is_nan?"](i))?t:i},-2),h(p,"$action_param_bool",function($){var t=this,e=m;return e=t.$action_param($),!!e&&e!=="false"&&e!=="0"}),h(p,"$has_action_param?",function($){return(event.params||{}).hasOwnProperty($.$to_s())}),h(p,"$this_application",function(){return this.application}),h(p,"$this_identifier",function(){return this.identifier}),h(p,"$this_element",function(){return this.element}),h(p,"$get_controller",function($,t){var e=this,r=m;return r=e.$to_native_element($),this.application.getControllerForElementAndIdentifier(r,t)}),h(p,"$get_controllers",function($,t){var e=this,r=m;r=e.$to_native_element($),Array.from(r.querySelectorAll('[data-controller~="'+t+'"]')).map(i=>this.application.getControllerForElementAndIdentifier(i,t)).filter(i=>i!==null)}),h(p,"$this_scope",function(){return this.scope.element}),h(p,"$in_scope?",function($){var t=this,e=m;return e=t.$to_native_element($),this.element.contains(e)}),h(p,"$debounce",function a($){var t=a.$$p||m;a.$$p=null;var e;return function(...r){clearTimeout(e),e=setTimeout(()=>t.$call(),$)}}),h(p,"$throttle",function a($){var t=a.$$p||m;a.$$p=null;var e=0;return function(...r){var i=Date.now();i-e>=$&&(e=i,t.$call())}}),h(p,"$debounced",function a($,t){var e=a.$$p||m,r,i=this,u=m,o=m;return i._debounce_timers==null&&(i._debounce_timers=m),a.$$p=null,t==null&&(t="default"),i._debounce_timers=N(u=i._debounce_timers)?u:new Map,o="_debounce_"+t,clearTimeout(i._debounce_timers["$[]"](o)),r=[o,setTimeout(function(){e.$call()},$)],Q(i._debounce_timers,"[]=",r),r[r.length-1]},-2),h(p,"$throttled",function a($,t){var e=a.$$p||m,r=this,i=m,u=m,o=m,y=m;return r._throttle_times==null&&(r._throttle_times=m),a.$$p=null,t==null&&(t="default"),r._throttle_times=N(i=r._throttle_times)?i:new Map,u="_throttle_"+t,o=Date.now(),y=N(i=r._throttle_times["$[]"](u))?i:0,N(o-y>=$)?(r._throttle_times["$[]="](u,o),e.$call()):m},-2),h(p,"$copy_to_clipboard",function a($){var t=a.$$p||m;a.$$p=null,navigator.clipboard.writeText($).then(function(){N(t)&&t.$call()})}),h(p,"$read_from_clipboard",function a(){var $=a.$$p||m;a.$$p=null,navigator.clipboard.readText().then(function(t){$.$call(t)})}),h(p,"$deep_clone",function($){return JSON.parse(JSON.stringify($.$to_n()))}),h(p,"$deep_merge",function($,t){function e(r,i){var u=Object.assign({},r);for(var o in i)i.hasOwnProperty(o)&&(i[o]&&typeof i[o]=="object"&&!Array.isArray(i[o])?u[o]=e(u[o]||{},i[o]):u[o]=i[o]);return u}return e($.$to_n(),t.$to_n())}),h(p,"$pick",function($,t){var e,r,i=m;return e=W(arguments,1),r=e,i=new Map,Q(r.$flatten(),"each",[],function(o){var y,j=m,D=m;return o==null&&(o=m),j=o.$to_s(),D=$.$to_n(),N(D.hasOwnProperty(j))?(y=[j,D[j]],Q(i,"[]=",y),y[y.length-1]):m}),i},-2),h(p,"$omit",function($,t){var e,r,i,u=m,o=m,y=m;return e=W(arguments,1),r=e,u=Q(r.$flatten(),"map",[],"to_s".$to_proc()),o=new Map,y=$.$to_n(),Object.keys(y).forEach(function(j){u.includes(j)||(i=[j,y[j]],Q(o,"[]=",i),i[i.length-1])}),o},-2),h(p,"$unique",function($){return[...new Set($.$to_n())]}),h(p,"$intersection",function($,t){var e=m;return e=new Set(t.$to_n()),$.$to_n().filter(r=>e.has(r))}),h(p,"$difference",function($,t){var e=m;return e=new Set(t.$to_n()),$.$to_n().filter(r=>!e.has(r))}),h(p,"$union",function($,t){return[...new Set([...$.$to_n(),...t.$to_n()])]}),h(p,"$valid_email?",function($){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($)}),h(p,"$valid_url?",function($){try{return new URL($),!0}catch{return!1}}),h(p,"$valid_phone?",function($){var t=m;t=$.replace(/[\s\-\(\)\.]/g,"");var e=/^[\+]?[0-9]{10,15}$/;return e.test(t)}),h(p,"$blank?",function($){return N($["$nil?"]())?!0:N(typeof $=="string")?$.trim()==="":N(Array.isArray($))?$.length===0:!1}),h(p,"$present?",function($){var t=this;return t["$blank?"]($)["$!"]()}),h(p,"$min_length?",function($,t){return N($["$nil?"]())?!1:$.length>=t}),h(p,"$max_length?",function($,t){return N($["$nil?"]())?!1:$.length<=t}),h(p,"$matches_pattern?",function($,t){return N($["$nil?"]())?!1:new RegExp(t).test($)}),h(p,"$console_styled",function($,t){return t==null&&(t="color: blue; font-weight: bold;"),console.log("%c"+$,t)},-2),h(p,"$console_group",function a($,t){var e=a.$$p||m,r;return a.$$p=null,t=L(t),r=b(t,"collapsed"),r==null&&(r=!1),N(r)?console.groupCollapsed($):console.group($),e.$call(),console.groupEnd()},-2),h(p,"$console_table",function($){return console.table($.$to_n())}),h(p,"$console_time",function($){var t=m;return t=new Date().toISOString(),console.log("["+t+"] "+$)}),p.$private(),h(p,"$camelize",function($,t){var e=m,r=m;return t==null&&(t=!0),e=$.$to_s(),N(e["$include?"]("_"))?(r=e.$split("_"),N(t)?Q(r,"map",[],"capitalize".$to_proc()).$join():B([r.$first()],Q(r["$[]"](H(1,-1,!1)),"map",[],"capitalize".$to_proc())).$join()):N(t)?B(e["$[]"](0).$upcase(),e["$[]"](H(1,-1,!1)).$to_s()):B(e["$[]"](0).$downcase(),e["$[]"](H(1,-1,!1)).$to_s())},-2)}(g[0],g)}(v[0],v)}(w[0],w)}(Z[0],Z),ee(Z[0],"StimulusHelpers",k(k(k(R("OpalVite"),"Concerns"),"V1"),"StimulusHelpers"))};Opal.modules["opal_vite/concerns/v1/vue_helpers"]=function(n){var A=n.module,h=n.def,N=n.lambda,M=n.send,Q=n.slice,W=n.to_a,L=n.truthy,K=n.const_set,b=[],B=n.$r(b),$e=n.nil,Y=n.$$$;return n.add_stubs("extend,Native,to_n,each,[]=,proc,call,map,to_a"),function(H,ee){var Z=A(H,"OpalVite"),R=[Z].concat(ee);return function(m,k){var I=A(m,"Concerns"),z=[I].concat(k);return function(U,w){var S=A(U,"V1"),P=[S].concat(w);return function(q){var v=A(q,"VueHelpers");return v.$extend(v),h(v,"$vue",function(){return window.Vue}),h(v,"$create_app",function(f){var E=this;return f==null&&(f=new Map),E.$Native(window.Vue.createApp(f.$to_n()))},-1),h(v,"$vue_ref",function(f){var E=this;return E.$Native(window.Vue.ref(f))}),h(v,"$vue_reactive",function(f){var E=this;return E.$Native(window.Vue.reactive(f.$to_n()))}),h(v,"$vue_computed",function s(){var f=s.$$p||$e,E=this;return s.$$p=null,E.$Native(window.Vue.computed(f))}),h(v,"$vue_watch",function s(f){var E=s.$$p||$e;return s.$$p=null,window.Vue.watch(f,E)}),h(v,"$data_fn",function(f){return N(function(){return f.$to_n()})}),h(v,"$methods_obj",function(f){var E=$e;return E=new Map,M(f,"each",[],function(c,l){var p;return c==null&&(c=$e),l==null&&(l=$e),p=[c,l],M(E,"[]=",p),p[p.length-1]}),E.$to_n()}),h(v,"$computed_obj",function(f){var E=$e;return E=new Map,M(f,"each",[],function(c,l){var p;return c==null&&(c=$e),l==null&&(l=$e),p=[c,l],M(E,"[]=",p),p[p.length-1]}),E.$to_n()}),h(v,"$vue_fn",function s(){var f=s.$$p||$e;return s.$$p=null,function(){var E=f;return function(){return E.apply(this,arguments)}}()}),h(v,"$vue_method",function s(){var f=s.$$p||$e,E=this,g=$e;return s.$$p=null,g=M(E,"proc",[],function c(l){var p,C,_=c.$$s==null?this:c.$$s,a=$e;return p=Q(arguments),C=p,a=_.$Native(this),M(f,"call",[a].concat(W(C)))},{$$arity:-1,$$s:E}),function(){var c=g;return function(){return c.apply(this,arguments)}}()}),h(v,"$vue_computed_fn",function s(){var f=s.$$p||$e,E=this,g=$e;return s.$$p=null,g=M(E,"proc",[],function c(){var l=c.$$s==null?this:c.$$s,p=$e;return p=l.$Native(this),f.$call(p)},{$$s:E}),function(){var c=g;return function(){return c.apply(this,arguments)}}()}),h(v,"$vue_hook",function s(){var f=s.$$p||$e,E=this,g=$e;return s.$$p=null,g=M(E,"proc",[],function c(){var l=c.$$s==null?this:c.$$s,p=$e;return p=l.$Native(this),f.$call(p)},{$$s:E}),function(){var c=g;return function(){return c.apply(this,arguments)}}()}),h(v,"$on_mounted",function s(){var f=s.$$p||$e;return s.$$p=null,window.Vue.onMounted(f)}),h(v,"$on_unmounted",function s(){var f=s.$$p||$e;return s.$$p=null,window.Vue.onUnmounted(f)}),h(v,"$on_updated",function s(){var f=s.$$p||$e;return s.$$p=null,window.Vue.onUpdated(f)}),h(v,"$on_before_mount",function s(){var f=s.$$p||$e;return s.$$p=null,window.Vue.onBeforeMount(f)}),h(v,"$on_before_unmount",function s(){var f=s.$$p||$e;return s.$$p=null,window.Vue.onBeforeUnmount(f)}),h(v,"$window_get",function(f){return window[f]}),h(v,"$window_set",function(f,E){return window[f]=E}),h(v,"$console_log",function(f){var E,g;return E=Q(arguments),g=E,console.log(...g)},-1),h(v,"$console_warn",function(f){var E,g;return E=Q(arguments),g=E,console.warn(...g)},-1),h(v,"$console_error",function(f){var E,g;return E=Q(arguments),g=E,console.error(...g)},-1),h(v,"$on_dom_ready",function s(){var f=s.$$p||$e;return s.$$p=null,document.addEventListener("DOMContentLoaded",f)}),h(v,"$query",function(f){var E=this,g=$e;return g=document.querySelector(f),L(g===null)?$e:E.$Native(g)}),h(v,"$query_all",function(f){var E=this,g=$e;return g=Array.from(document.querySelectorAll(f)),M(E.$Native(g).$to_a(),"map",[],function c(l){var p=c.$$s==null?this:c.$$s;return l==null&&(l=$e),p.$Native(l)},{$$s:E})}),h(v,"$get_element_by_id",function(f){var E=this,g=$e;return g=document.getElementById(f),L(g===null)?$e:E.$Native(g)}),h(v,"$set_timeout",function s(f){var E=s.$$p||$e;return s.$$p=null,setTimeout(E,f)}),h(v,"$set_interval",function s(f){var E=s.$$p||$e;return s.$$p=null,setInterval(E,f)}),h(v,"$clear_timeout",function(f){return clearTimeout(f)}),h(v,"$clear_interval",function(f){return clearInterval(f)}),h(v,"$storage_get",function(f){return localStorage.getItem(f)}),h(v,"$storage_set",function(f,E){return localStorage.setItem(f,E)}),h(v,"$storage_remove",function(f){return localStorage.removeItem(f)}),h(v,"$parse_json",function(f){return JSON.parse(f)}),h(v,"$to_json_string",function(f){return JSON.stringify(f)}),h(v,"$parse_int",function(f,E){return E==null&&(E=10),parseInt(f,E)},-2),h(v,"$parse_float",function(f){return parseFloat(f)}),h(v,"$is_nan?",function(f){return Number.isNaN(f)})}(P[0])}(z[0],z)}(R[0],R)}(b[0],b),K(b[0],"VueHelpers",Y(Y(Y(B("OpalVite"),"Concerns"),"V1"),"VueHelpers"))};Opal.modules["opal_vite/concerns/v1/react_helpers"]=function(n){var A=n.module,h=n.def,N=n.slice,M=n.truthy,Q=n.send,W=n.to_a,L=n.const_set,K=[],b=n.$r(K),B=n.nil,$e=n.$$$;return n.add_stubs("Native,map,to_a,createElement,react,call,to_n,parse_int,is_nan?,parse_float"),function(Y,H){var ee=A(Y,"OpalVite"),Z=[ee].concat(H);return function(R,m){var k=A(R,"Concerns"),I=[k].concat(m);return function(z,U){var w=A(z,"V1"),S=[w].concat(U);return function(P){var q=A(P,"ReactHelpers");return h(q,"$react",function(){var s=this;return s.$Native(window.React)}),h(q,"$react_dom",function(){var s=this;return s.$Native(window.ReactDOM)}),h(q,"$window_get",function(s){return window[s]}),h(q,"$window_set",function(s,f){return window[s]=f}),h(q,"$window_delete",function(s){return delete window[s]}),h(q,"$console_log",function(s){var f,E;return f=N(arguments),E=f,console.log(...E)},-1),h(q,"$console_warn",function(s){var f,E;return f=N(arguments),E=f,console.warn(...E)},-1),h(q,"$console_error",function(s){var f,E;return f=N(arguments),E=f,console.error(...E)},-1),h(q,"$alert_message",function(s){return alert(s)}),h(q,"$confirm_message",function(s){return confirm(s)}),h(q,"$prompt_message",function(s,f){return f==null&&(f=""),prompt(s,f)},-2),h(q,"$on_dom_ready",function v(){var s=v.$$p||B;return v.$$p=null,document.addEventListener("DOMContentLoaded",s)}),h(q,"$on_window_event",function v(s){var f=v.$$p||B;return v.$$p=null,window.addEventListener(s,f)}),h(q,"$off_window_event",function(s,f){return window.removeEventListener(s,f)}),h(q,"$query",function(s){var f=this,E=B;return E=document.querySelector(s),M(E===null)?B:f.$Native(E)}),h(q,"$query_all",function(s){var f=this,E=B;return E=Array.from(document.querySelectorAll(s)),Q(f.$Native(E).$to_a(),"map",[],function g(c){var l=g.$$s==null?this:g.$$s;return c==null&&(c=B),l.$Native(c)},{$$s:f})}),h(q,"$get_element_by_id",function(s){var f=this,E=B;return E=document.getElementById(s),M(E===null)?B:f.$Native(E)}),h(q,"$create_element",function(s){return document.createElement(s)}),h(q,"$set_html",function(s,f){return s.innerHTML=f}),h(q,"$set_text",function(s,f){return s.textContent=f}),h(q,"$add_class",function(s,f){var E,g;return E=N(arguments,1),g=E,s.classList.add(...g)},-2),h(q,"$remove_class",function(s,f){var E,g;return E=N(arguments,1),g=E,s.classList.remove(...g)},-2),h(q,"$el",function(s,f,E){var g,c,l,p=this;return g=N(arguments,1),g.length>0&&(c=g.shift()),c==null&&(c=B),l=g,Q(p.$react(),"createElement",[s,c].concat(W(l)))},-2),h(q,"$div",function v(s,f){var E=v.$$p||B,g,c,l,p=this;return v.$$p=null,g=N(arguments),g.length>0&&(c=g.shift()),c==null&&(c=B),l=g,E!==B?p.$react().$createElement("div",c,E.$call()):Q(p.$react(),"createElement",["div",c].concat(W(l)))},-1),h(q,"$span",function v(s,f){var E=v.$$p||B,g,c,l,p=this;return v.$$p=null,g=N(arguments),g.length>0&&(c=g.shift()),c==null&&(c=B),l=g,E!==B?p.$react().$createElement("span",c,E.$call()):Q(p.$react(),"createElement",["span",c].concat(W(l)))},-1),h(q,"$button",function v(s,f){var E=v.$$p||B,g,c,l,p=this;return v.$$p=null,g=N(arguments),g.length>0&&(c=g.shift()),c==null&&(c=B),l=g,E!==B?p.$react().$createElement("button",c,E.$call()):Q(p.$react(),"createElement",["button",c].concat(W(l)))},-1),h(q,"$paragraph",function v(s,f){var E=v.$$p||B,g,c,l,p=this;return v.$$p=null,g=N(arguments),g.length>0&&(c=g.shift()),c==null&&(c=B),l=g,E!==B?p.$react().$createElement("p",c,E.$call()):Q(p.$react(),"createElement",["p",c].concat(W(l)))},-1),h(q,"$h1",function(s,f){var E,g,c,l=this;return E=N(arguments),E.length>0&&(g=E.shift()),g==null&&(g=B),c=E,Q(l.$react(),"createElement",["h1",g].concat(W(c)))},-1),h(q,"$h2",function(s,f){var E,g,c,l=this;return E=N(arguments),E.length>0&&(g=E.shift()),g==null&&(g=B),c=E,Q(l.$react(),"createElement",["h2",g].concat(W(c)))},-1),h(q,"$h3",function(s,f){var E,g,c,l=this;return E=N(arguments),E.length>0&&(g=E.shift()),g==null&&(g=B),c=E,Q(l.$react(),"createElement",["h3",g].concat(W(c)))},-1),h(q,"$set_timeout",function v(s){var f=v.$$p||B;return v.$$p=null,setTimeout(f,s)}),h(q,"$set_interval",function v(s){var f=v.$$p||B;return v.$$p=null,setInterval(f,s)}),h(q,"$clear_timeout",function(s){return clearTimeout(s)}),h(q,"$clear_interval",function(s){return clearInterval(s)}),h(q,"$storage_get",function(s){return localStorage.getItem(s)}),h(q,"$storage_set",function(s,f){return localStorage.setItem(s,f)}),h(q,"$storage_remove",function(s){return localStorage.removeItem(s)}),h(q,"$fetch_url",function(s,f){var E=this;return f==null&&(f=B),M(f)?E.$Native(fetch(s,f.$to_n())):E.$Native(fetch(s))},-2),h(q,"$parse_json",function(s){return JSON.parse(s)}),h(q,"$to_json",function(s){return JSON.stringify(s)}),h(q,"$parse_int",function(s,f){return f==null&&(f=10),parseInt(s,f)},-2),h(q,"$parse_float",function(s){return parseFloat(s)}),h(q,"$is_nan?",function(s){return Number.isNaN(s)}),h(q,"$parse_int_or",function(s,f){var E=this,g=B;return f==null&&(f=0),g=E.$parse_int(s),M(E["$is_nan?"](g))?f:g},-2),h(q,"$parse_float_or",function(s,f){var E=this,g=B;return f==null&&(f=0),g=E.$parse_float(s),M(E["$is_nan?"](g))?f:g},-2)}(S[0])}(I[0],I)}(Z[0],Z)}(K[0],K),L(K[0],"ReactHelpers",$e($e($e(b("OpalVite"),"Concerns"),"V1"),"ReactHelpers"))};Opal.modules["opal_vite/concerns/v1/uri_helpers"]=function(n){var A=n.module,h=n.def,N=n.truthy,M=n.send,Q=n.not,W=n.rb_plus,L=n.range,K=n.slice,b=n.const_set,B=[],$e=n.$r(B),Y=n.nil,H=n.$$$;return n.add_stubs("[]=,[],!,empty?,to_s,+,parse_url,each,url_set_param,url_to_string,start_with?,join,reject,map,gsub,to_proc,last,split,pop,path_basename,rindex"),function(ee,Z){var R=A(ee,"OpalVite"),m=[R].concat(Z);return function(k,I){var z=A(k,"Concerns"),U=[z].concat(I);return function(w,S){var P=A(w,"V1"),q=[P].concat(S);return function(v,s){var f=A(v,"URIHelpers"),E=[f].concat(s),g=n.$r(E);return h(f,"$parse_url",function(l){try{return new URL(l)}catch(p){if(n.rescue(p,[g("StandardError")]))try{return Y}finally{n.pop_exception(p)}else throw p}}),h(f,"$parse_url_with_base",function(l,p){try{return new URL(l,p)}catch(C){if(n.rescue(C,[g("StandardError")]))try{return Y}finally{n.pop_exception(C)}else throw C}}),h(f,"$current_url",function(){return new URL(window.location.href)}),h(f,"$url_protocol",function(l){return l.protocol}),h(f,"$url_hostname",function(l){return l.hostname}),h(f,"$url_host",function(l){return l.host}),h(f,"$url_port",function(l){return l.port}),h(f,"$url_pathname",function(l){return l.pathname}),h(f,"$url_search",function(l){return l.search}),h(f,"$url_hash",function(l){return l.hash}),h(f,"$url_origin",function(l){return l.origin}),h(f,"$url_to_string",function(l){return l.href}),h(f,"$url_param",function(l,p){var C=Y;return C=l.searchParams.get(p),N(C===null)?Y:C}),h(f,"$url_params",function(l,p){return Array.from(l.searchParams.getAll(p))}),h(f,"$url_has_param?",function(l,p){return l.searchParams.has(p)}),h(f,"$url_all_params",function(l){var p,C=Y;return C=new Map,l.searchParams.forEach((_,a)=>{p=[a,_],M(C,"[]=",p),p[p.length-1]}),C}),h(f,"$url_set_param",function(l,p,C){return l.searchParams.set(p,C)}),h(f,"$url_append_param",function(l,p,C){return l.searchParams.append(p,C)}),h(f,"$url_delete_param",function(l,p){return l.searchParams.delete(p)}),h(f,"$build_url",function(l){var p=this,C=Y,_=Y,a=Y,$=Y,t=Y,e=Y,r=Y,i=Y,u=Y;return l==null&&(l=new Map),C=N(_=l["$[]"]("protocol"))?_:"https:",a=N(_=l["$[]"]("hostname"))?_:"localhost",$=l["$[]"]("port"),t=N(_=l["$[]"]("pathname"))?_:"/",e=N(_=l["$[]"]("params"))?_:new Map,r=l["$[]"]("hash"),i=""+C+"//"+a,N($)&&Q($.$to_s()["$empty?"]())&&(i=W(i,":"+$)),i=W(i,t),u=p.$parse_url(i),N(u)?(M(e,"each",[],function o(y,j){var D=o.$$s==null?this:o.$$s;return y==null&&(y=Y),j==null&&(j=Y),D.$url_set_param(u,y.$to_s(),j.$to_s())},{$$s:p}),N(r)&&(u.hash=r),p.$url_to_string(u)):Y},-1),h(f,"$encode_uri_component",function(l){return encodeURIComponent(l)}),h(f,"$decode_uri_component",function(l){try{return decodeURIComponent(l)}catch(p){if(n.rescue(p,[g("StandardError")]))try{return l}finally{n.pop_exception(p)}else throw p}}),h(f,"$encode_uri",function(l){return encodeURI(l)}),h(f,"$decode_uri",function(l){try{return decodeURI(l)}catch(p){if(n.rescue(p,[g("StandardError")]))try{return l}finally{n.pop_exception(p)}else throw p}}),h(f,"$parse_query_string",function(l){var p,C=Y,_=Y,a=Y;return C=l.$to_s(),N(C["$start_with?"]("?"))&&(C=C["$[]"](L(1,-1,!1))),_=new Map,a=new URLSearchParams(C),a.forEach(($,t)=>{p=[t,$],M(_,"[]=",p),p[p.length-1]}),_}),h(f,"$build_query_string",function(l){var p=Y;return p=new URLSearchParams,M(l,"each",[],function(_,a){return _==null&&(_=Y),a==null&&(a=Y),p.append(_.$to_s(),a.$to_s())}),p.toString()}),h(f,"$join_path",function(l){var p,C;return p=K(arguments),C=p,M(M(C,"map",[],function(a){return a==null&&(a=Y),a.$to_s().$gsub(/^\/|\/$/,"")}),"reject",[],"empty?".$to_proc()).$join("/")},-1),h(f,"$path_basename",function(l){var p=Y;return N(p=l.$to_s().$split("/").$last())?p:""}),h(f,"$path_dirname",function(l){var p=Y,C=Y;return p=l.$to_s().$split("/"),p.$pop(),N(C=p.$join("/"))?C:"/"}),h(f,"$path_extname",function(l){var p=this,C=Y,_=Y;return C=p.$path_basename(l),_=C.$rindex("."),N(_)?C["$[]"](n.Range.$new(_,-1,!1)):""})}(q[0],q)}(U[0],U)}(m[0],m)}(B[0],B),b(B[0],"URIHelpers",H(H(H($e("OpalVite"),"Concerns"),"V1"),"URIHelpers"))};Opal.modules["opal_vite/concerns/v1/base64_helpers"]=function(n){var A=n.module,h=n.def,N=n.truthy,M=n.rb_plus,Q=n.range,W=n.neqeq,L=n.rb_minus,K=n.rb_divide,b=n.rb_times,B=n.const_set,$e=[],Y=n.$r($e),H=n.nil,ee=n.$$$;return n.add_stubs("base64_encode,gsub,%,length,+,base64_decode,base64_encode_unicode,start_with?,to_s,base64_decode_unicode,[],split,!=,base64_decode_urlsafe,decode_jwt_payload,empty?,nil?,end_with?,-,/,*"),function(Z,R){var m=A(Z,"OpalVite"),k=[m].concat(R);return function(I,z){var U=A(I,"Concerns"),w=[U].concat(z);return function(S,P){var q=A(S,"V1"),v=[q].concat(P);return function(s,f){var E=A(s,"Base64Helpers"),g=[E].concat(f),c=n.$r(g);return h(E,"$base64_encode",function(p){try{return btoa(p)}catch(C){if(n.rescue(C,[c("StandardError")]))try{return H}finally{n.pop_exception(C)}else throw C}}),h(E,"$base64_decode",function(p){try{return atob(p)}catch(C){if(n.rescue(C,[c("StandardError")]))try{return H}finally{n.pop_exception(C)}else throw C}}),h(E,"$base64_encode_urlsafe",function(p){var C=this,_=H;return _=C.$base64_encode(p),N(_)?_.$gsub("+","-").$gsub("/","_").$gsub("=",""):H}),h(E,"$base64_decode_urlsafe",function(p){var C=this,_=H;switch(_=p.$gsub("-","+").$gsub("_","/"),_.$length()["$%"](4).valueOf()){case 2:_=M(_,"==");break;case 3:_=M(_,"=");break}return C.$base64_decode(_)}),h(E,"$base64_encode_unicode",function(p){try{return btoa(unescape(encodeURIComponent(p)))}catch(C){if(n.rescue(C,[c("StandardError")]))try{return H}finally{n.pop_exception(C)}else throw C}}),h(E,"$base64_decode_unicode",function(p){try{return decodeURIComponent(escape(atob(p)))}catch(C){if(n.rescue(C,[c("StandardError")]))try{return H}finally{n.pop_exception(C)}else throw C}}),h(E,"$base64_encode_buffer",function(p){try{for(var C=new Uint8Array(p),_="",a=0;a<C.byteLength;a++)_+=String.fromCharCode(C[a]);return btoa(_)}catch($){if(n.rescue($,[c("StandardError")]))try{return H}finally{n.pop_exception($)}else throw $}}),h(E,"$base64_decode_to_buffer",function(p){try{for(var C=atob(p),_=new Uint8Array(C.length),a=0;a<C.length;a++)_[a]=C.charCodeAt(a);return _}catch($){if(n.rescue($,[c("StandardError")]))try{return H}finally{n.pop_exception($)}else throw $}}),h(E,"$to_data_url",function(p,C){var _=this,a=H;return C==null&&(C="text/plain"),a=_.$base64_encode_unicode(p),N(a)?"data:"+C+";base64,"+a:H},-2),h(E,"$parse_data_url",function(p){var C=this,_=H;return!N(p.$to_s()["$start_with?"]("data:"))||(_=p.match(/^data:([^;]+);base64,(.+)$/),N(_===null))?H:new Map([["mime_type",_[1]],["data",C.$base64_decode_unicode(_[2])]])}),h(E,"$basic_auth_header",function(p,C){var _=this,a=H,$=H;return a=""+p+":"+C,$=_.$base64_encode(a),"Basic "+$}),h(E,"$parse_basic_auth",function(p){var C=this,_=H,a=H,$=H;return!N(p.$to_s()["$start_with?"]("Basic "))||(_=p["$[]"](Q(6,-1,!1)),a=C.$base64_decode(_),!N(a))||($=a.$split(":",2),W($.$length(),2))?H:new Map([["username",$["$[]"](0)],["password",$["$[]"](1)]])}),h(E,"$decode_jwt_payload",function(p){var C=this,_=H,a=H,$=H;try{return _=p.$to_s().$split("."),W(_.$length(),3)||(a=_["$[]"](1),$=C.$base64_decode_urlsafe(a),!N($))?H:JSON.parse($)}catch(t){if(n.rescue(t,[c("StandardError")]))try{return H}finally{n.pop_exception(t)}else throw t}}),h(E,"$jwt_expired?",function(p){var C=this,_=H,a=H,$=H;return _=C.$decode_jwt_payload(p),N(_)?(a=_.exp,N(a==null)?!1:($=Math.floor(Date.now()/1e3),a<$)):!0}),h(E,"$jwt_expires_at",function(p){var C=this,_=H,a=H;return _=C.$decode_jwt_payload(p),!N(_)||(a=_.exp,N(a==null))?H:new Date(a*1e3)}),h(E,"$valid_base64?",function(p){if(N(p["$nil?"]())||N(p["$empty?"]()))return!1;var C=/^[A-Za-z0-9+/]*={0,2}$/;if(!C.test(p)||p.length%4!==0)return!1;try{return atob(p),!0}catch{return!1}}),h(E,"$base64_decoded_length",function(p){var C=H,_=H;return N(p["$nil?"]())||N(p["$empty?"]())?0:(C=p.$length(),_=N(p["$end_with?"]("=="))?2:N(p["$end_with?"]("="))?1:0,L(K(b(C,3),4),_))})}(v[0],v)}(w[0],w)}(k[0],k)}($e[0],$e),B($e[0],"Base64Helpers",ee(ee(ee(Y("OpalVite"),"Concerns"),"V1"),"Base64Helpers"))};Opal.modules["opal_vite/concerns/v1/debug_helpers"]=function(n){var A=n.module,h=n.truthy,N=n.def,M=n.rb_minus,Q=n.const_set,W=[],L=n.$r(W),K=n.nil,b=n.$$$;return n.add_stubs("debug_enabled?,to_n,inspect,nil?,debug_log,-,round,respond_to?,class,stimulus_name,name"),function(B,$e){var Y=A(B,"OpalVite"),H=[Y].concat($e);return function(ee,Z){var R=A(ee,"Concerns"),m=[R].concat(Z);return function(k,I){var z=A(k,"V1"),U=[z].concat(I);return function(w){var S=A(w,"DebugHelpers");return N(S,"$debug_log",function(q,v){var s=this;return v==null&&(v=K),h(s["$debug_enabled?"]())?h(v)?console.log("[DEBUG] "+q,v.$to_n()):console.log("[DEBUG] "+q):K},-2),N(S,"$debug_warn",function(q,v){var s=this;return v==null&&(v=K),h(s["$debug_enabled?"]())?h(v)?console.warn("[WARN] "+q,v.$to_n()):console.warn("[WARN] "+q):K},-2),N(S,"$debug_error",function(q,v){return v==null&&(v=K),h(v)?console.error("[ERROR] "+q,v.$to_n()):console.error("[ERROR] "+q)},-2),N(S,"$debug_group",function P(q){var v=P.$$p||K,s=this;return P.$$p=null,h(s["$debug_enabled?"]())?(console.group("[DEBUG] "+q),n.yieldX(v,[]),console.groupEnd()):n.yieldX(v,[])}),N(S,"$debug_group_collapsed",function P(q){var v=P.$$p||K,s=this;return P.$$p=null,h(s["$debug_enabled?"]())?(console.groupCollapsed("[DEBUG] "+q),n.yieldX(v,[]),console.groupEnd()):n.yieldX(v,[])}),N(S,"$debug_time",function(q){var v=this;return h(v["$debug_enabled?"]())?console.time("[TIMER] "+q):K}),N(S,"$debug_time_end",function(q){var v=this;return h(v["$debug_enabled?"]())?console.timeEnd("[TIMER] "+q):K}),N(S,"$debug_table",function(q){var v=this;return h(v["$debug_enabled?"]())?console.table(q.$to_n()):K}),N(S,"$debug_inspect",function(q,v){var s=this,f=K;return v==null&&(v=K),h(s["$debug_enabled?"]())?(f=q.$inspect(),h(v)?console.log("[INSPECT] "+v+":",f):console.log("[INSPECT]",f)):K},-2),N(S,"$debug_trace",function(q){var v=this;return q==null&&(q=K),h(v["$debug_enabled?"]())?h(q)?console.trace("[TRACE] "+q):console.trace("[TRACE]"):K},-1),N(S,"$debug_assert",function(q,v){return v==null&&(v="Assertion failed"),console.assert(q,"[ASSERT] "+v)},-2),N(S,"$debug_count",function(q){var v=this;return q==null&&(q="default"),h(v["$debug_enabled?"]())?console.count("[COUNT] "+q):K},-1),N(S,"$debug_count_reset",function(q){var v=this;return q==null&&(q="default"),h(v["$debug_enabled?"]())?console.countReset("[COUNT] "+q):K},-1),N(S,"$debug_enabled?",function(){var q=this;return q.debug_enabled==null&&(q.debug_enabled=K),h(q.debug_enabled["$nil?"]())?q.debug_enabled=typeof window<"u"&&(window.OPAL_DEBUG===!0||typeof localStorage<"u"&&localStorage.getItem("opal_debug")==="true"):q.debug_enabled}),N(S,"$debug_enable!",function(){var q=this;return q.debug_enabled=!0,typeof window<"u"&&(window.OPAL_DEBUG=!0,typeof localStorage<"u"&&localStorage.setItem("opal_debug","true")),q.$debug_log("Debug mode enabled")}),N(S,"$debug_disable!",function(){var q=this;q.$debug_log("Debug mode disabled"),q.debug_enabled=!1,typeof window<"u"&&(window.OPAL_DEBUG=!1,typeof localStorage<"u"&&localStorage.removeItem("opal_debug"))}),N(S,"$debug_measure",function P(q){var v=P.$$p||K,s=this,f=K,E=K,g=K,c=K;return P.$$p=null,h(s["$debug_enabled?"]())?(f=performance.now(),E=n.yieldX(v,[]),g=performance.now(),c=M(g,f),console.log("[PERF] "+q+": "+c.$round(2)+"ms"),E):n.yieldX(v,[])}),N(S,"$debug_stimulus_connect",function(q){var v=this,s=K,f=K,E=K;return q==null&&(q=K),h(v["$debug_enabled?"]())?(s=h(f=q)?f:v,E=h(s.$class()["$respond_to?"]("stimulus_name"))?s.$class().$stimulus_name():s.$class().$name(),console.log("[STIMULUS] Connected:",E)):K},-1),N(S,"$debug_stimulus_disconnect",function(q){var v=this,s=K,f=K,E=K;return q==null&&(q=K),h(v["$debug_enabled?"]())?(s=h(f=q)?f:v,E=h(s.$class()["$respond_to?"]("stimulus_name"))?s.$class().$stimulus_name():s.$class().$name(),console.log("[STIMULUS] Disconnected:",E)):K},-1),N(S,"$debug_stimulus_action",function(q,v){var s=this;return v==null&&(v=K),h(s["$debug_enabled?"]())?h(v)?console.log("[STIMULUS] Action:",q,"Event:",v.$to_n()):console.log("[STIMULUS] Action:",q):K},-2)}(U[0])}(m[0],m)}(H[0],H)}(W[0],W),Q(W[0],"DebugHelpers",b(b(b(L("OpalVite"),"Concerns"),"V1"),"DebugHelpers"))};Opal.modules["opal_vite/concerns/v1"]=function(n){var A=n.top;return n.nil,n.add_stubs("require"),A.$require("opal_vite/concerns/v1/js_proxy_ex"),A.$require("opal_vite/concerns/v1/dom_helpers"),A.$require("opal_vite/concerns/v1/toastable"),A.$require("opal_vite/concerns/v1/storable"),A.$require("opal_vite/concerns/v1/stimulus_helpers"),A.$require("opal_vite/concerns/v1/vue_helpers"),A.$require("opal_vite/concerns/v1/react_helpers"),A.$require("opal_vite/concerns/v1/uri_helpers"),A.$require("opal_vite/concerns/v1/base64_helpers"),A.$require("opal_vite/concerns/v1/debug_helpers")};Opal.modules["controllers/url_demo_controller"]=function(n){var A=n.klass,h=n.def,N=n.truthy,M=n.send,Q=n.rb_plus,W=n.eqeq,L=[],K=n.$r(L),b=n.nil,B=n.$$$;return n.add_stubs("include,targets=,puts,parse_current,target_value,blank?,parse_url,show_output,url_protocol,url_hostname,url_port,url_pathname,url_search,url_hash,url_origin,url_all_params,empty?,join,map,+,current_url,target_set_value,url_to_string,parse,url_set_param,build_url,encode_uri_component,decode_uri_component,parse_query_string,build_query_string,to_n,private,has_target?,==,target_set_html"),function($e,Y,H){var ee=A($e,Y,"UrlDemoController"),Z=[ee].concat(H),R=n.$r(Z);return ee.$include(B(B(B(R("OpalVite"),"Concerns"),"V1"),"StimulusHelpers")),ee.$include(B(B(B(R("OpalVite"),"Concerns"),"V1"),"URIHelpers")),ee["$targets="](["urlInput","output","paramKey","paramValue"]),h(ee,"$connect",function(){var k=this;return k.$puts("UrlDemoController connected"),k.$parse_current()}),h(ee,"$parse",function(){var k=this,I=b,z=b,U=b,w=b,S=b,P=b;return I=k.$target_value("urlInput"),N(k["$blank?"](I))?b:(z=k.$parse_url(I),N(z)?(U=`<div class="space-y-2">
  <div><strong>Protocol:</strong> `+k.$url_protocol(z)+`</div>
  <div><strong>Hostname:</strong> `+k.$url_hostname(z)+`</div>
  <div><strong>Port:</strong> `+(N(w=k.$url_port(z))?w:"(default)")+`</div>
  <div><strong>Pathname:</strong> `+k.$url_pathname(z)+`</div>
  <div><strong>Search:</strong> `+(N(w=k.$url_search(z))?w:"(none)")+`</div>
  <div><strong>Hash:</strong> `+(N(w=k.$url_hash(z))?w:"(none)")+`</div>
  <div><strong>Origin:</strong> `+k.$url_origin(z)+`</div>
</div>
`,S=k.$url_all_params(z),N(S["$empty?"]())||(P=M(S,"map",[],function(v,s){return v==null&&(v=b),s==null&&(s=b),"<li><code>"+v+"</code> = <code>"+s+"</code></li>"}).$join(),U=Q(U,`<div class="mt-4">
  <strong>Query Parameters:</strong>
  <ul class="list-disc list-inside ml-4">`+P+`</ul>
</div>
`)),k.$show_output(U)):(k.$show_output("Invalid URL","error"),b))}),h(ee,"$parse_current",function(){var k=this,I=b;return I=k.$current_url(),k.$target_set_value("urlInput",k.$url_to_string(I)),k.$parse()}),h(ee,"$add_param",function(){var k=this,I=b,z=b,U=b,w=b,S=b;return I=k.$target_value("urlInput"),z=k.$target_value("paramKey"),U=k.$target_value("paramValue"),N(k["$blank?"](I))||N(k["$blank?"](z))||(w=k.$parse_url(I),!N(w))?b:(k.$url_set_param(w,z,N(S=U)?S:""),k.$target_set_value("urlInput",k.$url_to_string(w)),k.$target_set_value("paramKey",""),k.$target_set_value("paramValue",""),k.$parse())}),h(ee,"$build_example",function(){var k=this,I=b;return I=k.$build_url(new Map([["protocol","https:"],["hostname","api.example.com"],["port","8080"],["pathname","/v1/users"],["params",new Map([["page","1"],["limit","10"],["sort","name"]])],["hash","#results"]])),k.$target_set_value("urlInput",I),k.$parse()}),h(ee,"$encode_demo",function(){var k=this,I=b,z=b,U=b,w=b;return I="Hello World!  ",z=k.$encode_uri_component(I),U=k.$decode_uri_component(z),w=`<div class="space-y-2">
  <div><strong>Original:</strong> `+I+`</div>
  <div><strong>Encoded:</strong> <code>`+z+`</code></div>
  <div><strong>Decoded:</strong> `+U+`</div>
</div>
`,k.$show_output(w)}),h(ee,"$query_string_demo",function(){var k=this,I=b,z=b,U=b,w=b;return I="name=John&age=30&tags=ruby&tags=javascript",z=k.$parse_query_string(I),U=k.$build_query_string(new Map([["name","Jane"],["age","25"],["city","Tokyo"]])),w=`<div class="space-y-4">
  <div>
    <strong>Parse "`+I+`":</strong>
    <pre class="bg-gray-100 p-2 rounded mt-1">`+JSON.stringify(z.$to_n(),null,2)+`</pre>
  </div>
  <div>
    <strong>Build from {name: 'Jane', age: '25', city: 'Tokyo'}:</strong>
    <pre class="bg-gray-100 p-2 rounded mt-1">`+U+`</pre>
  </div>
</div>
`,k.$show_output(w)}),ee.$private(),h(ee,"$show_output",function(k,I){var z=this,U=b;return I==null&&(I="success"),N(z["$has_target?"]("output"))?(U=W(I,"error")?"text-red-600":"text-gray-800",z.$target_set_html("output","<div class='"+U+"'>"+k+"</div>")):b},-2)}(L[0],K("StimulusController"),L)};Opal.modules["controllers/base64_demo_controller"]=function(n){var A=n.klass,h=n.return_val,N=n.defs,M=n.def,Q=n.truthy,W=n.eqeq,L=[],K=n.$r(L),b=n.nil,B=n.$$$;return n.add_stubs("include,targets=,puts,target_value,blank?,show_output,base64_encode,base64_decode,base64_encode_urlsafe,base64_decode_urlsafe,base64_encode_unicode,base64_decode_unicode,to_data_url,parse_data_url,[],target_set_value,decode_jwt_payload,jwt_expired?,jwt_expires_at,basic_auth_header,parse_basic_auth,valid_base64?,base64_decoded_length,private,has_target?,==,target_set_html"),function($e,Y,H){var ee=A($e,Y,"Base64DemoController"),Z=[ee].concat(H),R=n.$r(Z);return ee.$include(B(B(B(R("OpalVite"),"Concerns"),"V1"),"StimulusHelpers")),ee.$include(B(B(B(R("OpalVite"),"Concerns"),"V1"),"Base64Helpers")),N(ee,"$stimulus_name",h("base64-demo")),ee["$targets="](["input","output","jwtInput","authUser","authPass"]),M(ee,"$connect",function(){var k=this;return k.$puts("Base64DemoController connected")}),M(ee,"$encode",function(){var k=this,I=b,z=b;return I=k.$target_value("input"),Q(k["$blank?"](I))?(k.$show_output("Please enter text to encode","error"),b):(z=k.$base64_encode(I),Q(z)?k.$show_output("Encoded: <code class='bg-gray-100 px-2 py-1 rounded'>"+z+"</code>"):k.$show_output("Encoding failed","error"))}),M(ee,"$decode",function(){var k=this,I=b,z=b;return I=k.$target_value("input"),Q(k["$blank?"](I))?b:(z=k.$base64_decode(I),Q(z)?k.$show_output("Decoded: <code class='bg-gray-100 px-2 py-1 rounded'>"+z+"</code>"):k.$show_output("Decoding failed - invalid Base64","error"))}),M(ee,"$urlsafe_demo",function(){var k=this,I=b,z=b,U=b,w=b,S=b;return I=k.$target_value("input"),Q(k["$blank?"](I))&&(I="Hello+World/Test=="),z=k.$base64_encode(I),U=k.$base64_encode_urlsafe(I),w=k.$base64_decode_urlsafe(U),S=`<div class="space-y-2">
  <div><strong>Original:</strong> `+I+`</div>
  <div><strong>Standard Base64:</strong> <code>`+z+`</code></div>
  <div><strong>URL-safe Base64:</strong> <code>`+U+`</code></div>
  <div><strong>Decoded back:</strong> `+w+`</div>
</div>
`,k.$show_output(S)}),M(ee,"$unicode_demo",function(){var k=this,I=b,z=b,U=b,w=b;return I="  mojis",z=k.$base64_encode_unicode(I),U=k.$base64_decode_unicode(z),w=`<div class="space-y-2">
  <div><strong>Original (Unicode):</strong> `+I+`</div>
  <div><strong>Base64 Encoded:</strong> <code>`+z+`</code></div>
  <div><strong>Decoded:</strong> `+U+`</div>
</div>
`,k.$show_output(w)}),M(ee,"$data_url_demo",function(){var k=this,I=b,z=b,U=b,w=b;return I="<h1>Hello from Data URL!</h1><p>This is embedded content.</p>",z=k.$to_data_url(I,"text/html"),U=k.$parse_data_url(z),w=`<div class="space-y-4">
  <div>
    <strong>Original HTML:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+I+`</pre>
  </div>
  <div>
    <strong>Data URL:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm break-all">`+z+`</pre>
  </div>
  <div>
    <strong>Parsed back:</strong>
    <div>MIME Type: `+U["$[]"]("mime_type")+`</div>
    <div>Data: `+U["$[]"]("data")+`</div>
  </div>
  <div>
    <a href="`+z+`" target="_blank" class="text-blue-500 hover:underline">
      Open Data URL in new tab
    </a>
  </div>
</div>
`,k.$show_output(w)}),M(ee,"$decode_jwt",function(){var k=this,I=b,z=b,U=b,w=b,S=b,P=b;return I=k.$target_value("jwtInput"),Q(k["$blank?"](I))&&(I="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiZXhwIjoxNzM1Njg5NjAwLCJpYXQiOjE1MTYyMzkwMjJ9.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",k.$target_set_value("jwtInput",I)),z=k.$decode_jwt_payload(I),Q(z)?(U=k["$jwt_expired?"](I),w=k.$jwt_expires_at(I),S=Q(w)?w.toISOString():"No expiration",P=`<div class="space-y-4">
  <div>
    <strong>Payload:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(z,null,2)+`</pre>
  </div>
  <div>
    <strong>Expired:</strong>
    <span class="`+(Q(U)?"text-red-600":"text-green-600")+`">
      `+(Q(U)?"Yes":"No")+`
    </span>
  </div>
  <div>
    <strong>Expires at:</strong> `+S+`
  </div>
</div>
`,k.$show_output(P)):(k.$show_output("Failed to decode JWT - invalid format","error"),b)}),M(ee,"$basic_auth_demo",function(){var k=this,I=b,z=b,U=b,w=b,S=b;return I=k.$target_value("authUser"),z=k.$target_value("authPass"),Q(k["$blank?"](I))&&(I="admin"),Q(k["$blank?"](z))&&(z="secret123"),U=k.$basic_auth_header(I,z),w=k.$parse_basic_auth(U),S=`<div class="space-y-4">
  <div>
    <strong>Credentials:</strong> `+I+":"+z+`
  </div>
  <div>
    <strong>Authorization Header:</strong>
    <code class="bg-gray-100 px-2 py-1 rounded">`+U+`</code>
  </div>
  <div>
    <strong>Parsed back:</strong>
    <div>Username: `+w["$[]"]("username")+`</div>
    <div>Password: `+w["$[]"]("password")+`</div>
  </div>
</div>
`,k.$show_output(S)}),M(ee,"$validate_base64",function(){var k=this,I=b,z=b,U=b,w=b;return I=k.$target_value("input"),Q(k["$blank?"](I))?b:(z=k["$valid_base64?"](I),U=Q(z)?k.$base64_decoded_length(I):0,w=`<div class="space-y-2">
  <div>
    <strong>Valid Base64:</strong>
    <span class="`+(Q(z)?"text-green-600":"text-red-600")+`">
      `+(Q(z)?"Yes":"No")+`
    </span>
  </div>
  `+(Q(z)?"<div><strong>Decoded length:</strong> "+U+" bytes</div>":"")+`
</div>
`,k.$show_output(w))}),ee.$private(),M(ee,"$show_output",function(k,I){var z=this,U=b;return I==null&&(I="success"),Q(z["$has_target?"]("output"))?(U=W(I,"error")?"text-red-600":"text-gray-800",z.$target_set_html("output","<div class='"+U+"'>"+k+"</div>")):b},-2)}(L[0],K("StimulusController"),L)};Opal.modules["controllers/validation_demo_controller"]=function(n){var A=n.klass,h=n.def,N=n.truthy,M=n.send,Q=n.eqeq,W=[],L=n.$r(W),K=n.nil,b=n.$$$;return n.add_stubs("include,targets=,puts,target_value,valid_email?,show_result,valid_url?,valid_phone?,blank?,present?,show_output,<<,min_length?,max_length?,join,map,[],matches_pattern?,nil?,private,has_target?,==,target_set_html"),function(B,$e,Y){var H=A(B,$e,"ValidationDemoController"),ee=[H].concat(Y),Z=n.$r(ee);return H.$include(b(b(b(Z("OpalVite"),"Concerns"),"V1"),"StimulusHelpers")),H["$targets="](["emailInput","urlInput","phoneInput","textInput","patternInput","output"]),h(H,"$connect",function(){var m=this;return m.$puts("ValidationDemoController connected")}),h(H,"$validate_email",function(){var m=this,k=K,I=K;return k=m.$target_value("emailInput"),I=m["$valid_email?"](k),m.$show_result("emailInput",I,N(I)?"Valid email address":"Invalid email format")}),h(H,"$validate_url",function(){var m=this,k=K,I=K;return k=m.$target_value("urlInput"),I=m["$valid_url?"](k),m.$show_result("urlInput",I,N(I)?"Valid URL":"Invalid URL format")}),h(H,"$validate_phone",function(){var m=this,k=K,I=K;return k=m.$target_value("phoneInput"),I=m["$valid_phone?"](k),m.$show_result("phoneInput",I,N(I)?"Valid phone number":"Invalid phone format")}),h(H,"$check_blank",function(){var m=this,k=K,I=K,z=K,U=K;return k=m.$target_value("textInput"),I=m["$blank?"](k),z=m["$present?"](k),U=`<div class="space-y-2">
  <div>
    <strong>blank?:</strong>
    <span class="`+(N(I)?"text-orange-600":"text-green-600")+'">'+I+`</span>
  </div>
  <div>
    <strong>present?:</strong>
    <span class="`+(N(z)?"text-green-600":"text-orange-600")+'">'+z+`</span>
  </div>
</div>
`,m.$show_output(U)}),h(H,"$check_length",function(){var m=this,k=K,I=K,z=K,U=K,w=K;return k=m.$target_value("textInput"),I=[],I["$<<"](new Map([["test","min_length?(3)"],["result",m["$min_length?"](k,3)]])),I["$<<"](new Map([["test","min_length?(10)"],["result",m["$min_length?"](k,10)]])),I["$<<"](new Map([["test","max_length?(50)"],["result",m["$max_length?"](k,50)]])),I["$<<"](new Map([["test","max_length?(5)"],["result",m["$max_length?"](k,5)]])),z=M(I,"map",[],function(P){var q=K;return P==null&&(P=K),q=N(P["$[]"]("result"))?"text-green-600":"text-red-600","<li><code>"+P["$[]"]("test")+"</code>: <span class='"+q+"'>"+P["$[]"]("result")+"</span></li>"}).$join(),U=N(k)?k.length:0,w=`<div class="space-y-2">
  <div><strong>Current length:</strong> `+U+`</div>
  <ul class="list-disc list-inside">`+z+`</ul>
</div>
`,m.$show_output(w)}),h(H,"$check_pattern",function(){var m=this,k=K,I=K,z=K,U=K;return k=m.$target_value("textInput"),I=m.$target_value("patternInput"),N(m["$blank?"](I))?(m.$show_output("Please enter a pattern","error"),K):(z=m["$matches_pattern?"](k,I),U=`<div class="space-y-2">
  <div><strong>Text:</strong> "`+k+`"</div>
  <div><strong>Pattern:</strong> /`+I+`/</div>
  <div>
    <strong>Matches:</strong>
    <span class="`+(N(z)?"text-green-600":"text-red-600")+'">'+z+`</span>
  </div>
</div>
`,m.$show_output(U))}),h(H,"$validate_all",function(){var m=this,k=K,I=K,z=K,U=K,w=K,S=K;return k=[],I=m.$target_value("emailInput"),k["$<<"](new Map([["field","Email"],["value",I],["valid",N(m["$present?"](I))?m["$valid_email?"](I):K]])),z=m.$target_value("urlInput"),k["$<<"](new Map([["field","URL"],["value",z],["valid",N(m["$present?"](z))?m["$valid_url?"](z):K]])),U=m.$target_value("phoneInput"),k["$<<"](new Map([["field","Phone"],["value",U],["valid",N(m["$present?"](U))?m["$valid_phone?"](U):K]])),w=M(k,"map",[],function(q){var v=K,s=K;return q==null&&(q=K),N(q["$[]"]("valid")["$nil?"]())?v="<span class='text-gray-400'>Empty</span>":N(q["$[]"]("valid"))?v="<span class='text-green-600'>Valid</span>":v="<span class='text-red-600'>Invalid</span>","<tr><td class='border px-2 py-1'>"+q["$[]"]("field")+"</td><td class='border px-2 py-1'>"+(N(s=q["$[]"]("value"))?s:"-")+"</td><td class='border px-2 py-1'>"+v+"</td></tr>"}).$join(),S=`<table class="w-full border-collapse">
  <thead>
    <tr class="bg-gray-100">
      <th class="border px-2 py-1 text-left">Field</th>
      <th class="border px-2 py-1 text-left">Value</th>
      <th class="border px-2 py-1 text-left">Status</th>
    </tr>
  </thead>
  <tbody>`+w+`</tbody>
</table>
`,m.$show_output(S)}),H.$private(),h(H,"$show_result",function(m,k,I){var z=this,U=K;return U=`<div class="flex items-center gap-2">
  <span class="`+(N(k)?"text-green-600":"text-red-600")+` text-xl">
    `+(N(k)?"":"")+`
  </span>
  <span>`+I+`</span>
</div>
`,z.$show_output(U)}),h(H,"$show_output",function(m,k){var I=this,z=K;return k==null&&(k="success"),N(I["$has_target?"]("output"))?(z=Q(k,"error")?"text-red-600":"text-gray-800",I.$target_set_html("output","<div class='"+z+"'>"+m+"</div>")):K},-2)}(W[0],L("StimulusController"),W)};Opal.modules["controllers/clipboard_demo_controller"]=function(n){var A=n.klass,h=n.def,N=n.truthy,M=n.send,Q=n.rb_plus,W=[],L=n.$r(W),K=n.nil,b=n.$$$;return n.add_stubs("include,targets=,puts,target_value,blank?,copy_to_clipboard,console_styled,show_toast,read_from_clipboard,target_set_value,debounced,+,target_set_html,throttled,console_time,unique,join,parse_array,union,intersection,difference,deep_clone,to_n,deep_merge,pick,omit,console_group,console_table,private,reject,map,split,to_proc,set_timeout"),function(B,$e,Y){var H=A(B,$e,"ClipboardDemoController"),ee=[H].concat(Y),Z=n.$r(ee);return H.$include(b(b(b(Z("OpalVite"),"Concerns"),"V1"),"StimulusHelpers")),H["$targets="](["copyInput","pasteOutput","searchInput","searchOutput","arr1","arr2","setOutput","obj1","obj2","objOutput"]),h(H,"$connect",function(){var m=this;return m.$puts("ClipboardDemoController connected"),m.search_count=0,m.throttle_count=0}),h(H,"$copy",function(){var m=this,k=K;return k=m.$target_value("copyInput"),N(m["$blank?"](k))?K:M(m,"copy_to_clipboard",[k],function I(){var z=I.$$s==null?this:I.$$s;return z.$console_styled("Copied to clipboard: "+k,"color: green;"),z.$show_toast("Copied!")},{$$s:m})}),h(H,"$paste",function(){var m=this;return M(m,"read_from_clipboard",[],function k(I){var z=k.$$s==null?this:k.$$s;return I==null&&(I=K),z.$target_set_value("pasteOutput",I),z.$console_styled("Pasted from clipboard","color: blue;")},{$$s:m})}),h(H,"$search_debounced",function(){var m=this;return M(m,"debounced",[300,"search"],function k(){var I=k.$$s==null?this:k.$$s,z=K;return I.search_count==null&&(I.search_count=K),I.search_count=Q(I.search_count,1),z=I.$target_value("searchInput"),I.$target_set_html("searchOutput","Searching for: <strong>"+z+"</strong><br>"+("<small>Search triggered "+I.search_count+" time(s)</small>"))},{$$s:m})}),h(H,"$throttled_action",function(){var m=this;return M(m,"throttled",[1e3,"click"],function k(){var I=k.$$s==null?this:k.$$s;return I.throttle_count==null&&(I.throttle_count=K),I.throttle_count=Q(I.throttle_count,1),I.$console_time("Throttled action executed ("+I.throttle_count+")"),I.$show_toast("Throttled! Count: "+I.throttle_count)},{$$s:m})}),h(H,"$unique_demo",function(){var m=this,k=K,I=K,z=K;return k=[1,2,2,3,3,3,4,5,5],I=m.$unique(k),z=`<div class="space-y-2">
  <div><strong>Original:</strong> [`+k.$join(", ")+`]</div>
  <div><strong>unique():</strong> [`+I.$join(", ")+`]</div>
</div>
`,m.$target_set_html("setOutput",z)}),h(H,"$set_operations",function(){var m=this,k=K,I=K,z=K,U=K,w=K,S=K,P=K,q=K;return k=m.$target_value("arr1"),I=m.$target_value("arr2"),z=m.$parse_array(k),U=m.$parse_array(I),w=m.$union(z,U),S=m.$intersection(z,U),P=m.$difference(z,U),q=`<div class="space-y-2">
  <div><strong>Array 1:</strong> [`+z.$join(", ")+`]</div>
  <div><strong>Array 2:</strong> [`+U.$join(", ")+`]</div>
  <hr class="my-2">
  <div><strong>union():</strong> [`+w.$join(", ")+`]</div>
  <div><strong>intersection():</strong> [`+S.$join(", ")+`]</div>
  <div><strong>difference():</strong> [`+P.$join(", ")+`]</div>
</div>
`,m.$target_set_html("setOutput",q)}),h(H,"$deep_clone_demo",function(){var m=this,k=K,I=K,z=K;return k=new Map([["name","John"],["nested",new Map([["city","Tokyo"],["data",[1,2,3]]])]]),I=m.$deep_clone(k),I.nested.city="Osaka",z=`<div class="space-y-2">
  <div>
    <strong>Original:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(k.$to_n(),null,2)+`</pre>
  </div>
  <div>
    <strong>Cloned (modified):</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(I,null,2)+`</pre>
  </div>
  <div class="text-sm text-gray-600">
    Note: Original is unchanged even after modifying the clone
  </div>
</div>
`,m.$target_set_html("objOutput",z)}),h(H,"$deep_merge_demo",function(){var m=this,k=K,I=K,z=K,U=K;return k=new Map([["name","John"],["address",new Map([["city","Tokyo"]])],["tags",["ruby"]]]),I=new Map([["age",30],["address",new Map([["zip","100-0001"]])],["tags",["javascript"]]]),z=m.$deep_merge(k,I),U=`<div class="space-y-2">
  <div>
    <strong>Target:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(k.$to_n(),null,2)+`</pre>
  </div>
  <div>
    <strong>Source:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(I.$to_n(),null,2)+`</pre>
  </div>
  <div>
    <strong>deep_merge():</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(z,null,2)+`</pre>
  </div>
</div>
`,m.$target_set_html("objOutput",U)}),h(H,"$pick_omit_demo",function(){var m=this,k=K,I=K,z=K,U=K;return k=new Map([["id",1],["name","John"],["email","john@example.com"],["password","secret"],["role","admin"]]),I=m.$pick(k,"id","name","email"),z=m.$omit(k,"password"),U=`<div class="space-y-2">
  <div>
    <strong>Original:</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(k.$to_n(),null,2)+`</pre>
  </div>
  <div>
    <strong>pick(:id, :name, :email):</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(I.$to_n(),null,2)+`</pre>
  </div>
  <div>
    <strong>omit(:password):</strong>
    <pre class="bg-gray-100 p-2 rounded text-sm">`+JSON.stringify(z.$to_n(),null,2)+`</pre>
  </div>
</div>
`,m.$target_set_html("objOutput",U)}),h(H,"$console_demo",function(){var m=this;return m.$console_styled("This is a styled message!","color: purple; font-size: 16px;"),M(m,"console_group",["Group Demo",new Map([["collapsed",!1]])],function k(){var I=k.$$s==null?this:k.$$s;return I.$puts("Message 1"),I.$puts("Message 2"),I.$console_table([new Map([["name","Alice"],["age",25]]),new Map([["name","Bob"],["age",30]]),new Map([["name","Charlie"],["age",35]])])},{$$s:m}),m.$console_time("This message has a timestamp"),m.$show_toast("Check the browser console!")}),H.$private(),h(H,"$parse_array",function(m){var k=this;return N(k["$blank?"](m))?[]:M(M(m.$split(","),"map",[],"strip".$to_proc()),"reject",[],"empty?".$to_proc())}),h(H,"$show_toast",function(m){var k=this,I=K;return I=document.createElement("div"),I.className="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",I.textContent=m,document.body.appendChild(I),M(k,"set_timeout",[2e3],function(){return I.remove()})})}(W[0],L("StimulusController"),W)};Opal.queue(function(n){var A=n.top,h=[],N=n.$r(h);return n.nil,n.add_stubs("require,puts,register_all!"),A.$require("native"),A.$require("opal_stimulus/stimulus_controller"),A.$require("opal_vite/concerns/v1"),A.$require("controllers/url_demo_controller"),A.$require("controllers/base64_demo_controller"),A.$require("controllers/validation_demo_controller"),A.$require("controllers/clipboard_demo_controller"),A.$puts("Utilities App loaded!"),A.$puts("Ruby version: "+N("RUBY_VERSION")),N("StimulusController")["$register_all!"](),A.$puts("All controllers registered!")});
