Opal.modules.native=function($){var z=$.hash_put,b=$.module,L=$.defs,S=$.slice,re=$.truthy,Z=$.send,T=$.Kernel,W=$.extract_kwargs,p=$.ensure_kwargs,D=$.hash_get,$e=$.range,J=$.to_a,G=$.def,O=$.return_ivar,Y=$.alias,q=$.klass,h=$.rb_minus,R=$.return_val,H=$.send2,k=$.find_super,F=$.eqeqeq,m=$.rb_ge,A=$.return_self,C=$.gvars,x=$.top,E=[],u=$.$r(E),d=$.nil,I=$.$$$;return $.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(g,c){var o=b(g,"Native"),w=[o].concat(c),B=$.$r(w);return L(o,"$is_a?",function(s,n){var r=this;try{return s instanceof r.$try_convert(n)}catch{return!1}}),L(o,"$try_convert",function(s,n){var r=this;return n==null&&(n=d),r["$native?"](s)?s:s["$respond_to?"]("to_n")?s.$to_n():n},-2),L(o,"$convert",function(s){var n=this;if(n["$native?"](s))return s;if(s["$respond_to?"]("to_n"))return s.$to_n();n.$raise(B("ArgumentError"),""+s.$inspect()+" isn't native")}),L(o,"$call",function _(s,n,r){var e=_.$$p||d,t,i,a=this;_.$$p=null,t=S(arguments,2),i=t;var l=s[n];if(l instanceof Function){for(var v=new Array(i.length),N=0,P=i.length;N<P;N++){var j=i[N],V=a.$try_convert(j);v[N]=V===d?j:V}return e!==d&&v.push(e),a.$Native(l.apply(s,v))}else return a.$Native(l)},-3),L(o,"$proc",function _(){var s=_.$$p||d,n=this;return _.$$p=null,re(s)||n.$raise(B("LocalJumpError"),"no block given"),Z(T,"proc",[],function r(e){var t,i,a=r.$$s==null?this:r.$$s,l=d;if(t=S(arguments),i=t,Z(i,"map!",[],function N(P){var j=N.$$s==null?this:N.$$s;return P==null&&(P=d),j.$Native(P)},{$$s:a}),l=a.$Native(this),this===$.global)return s.apply(a,i);var v=s.$$s;s.$$s=null;try{return s.apply(l,i)}finally{s.$$s=v}},{$$arity:-1,$$s:n})}),function(_,s){var n=b(_,"Helpers"),r=[n].concat(s),e=$.$r(r);return G(n,"$alias_native",function t(i,a,l){var v,N,P,j;t.$$p;var V=this;return t.$$p=null,v=S(arguments,1),N=W(v),N=p(N),v.length>0&&(P=v.shift()),P==null&&(P=i),j=D(N,"as"),j==null&&(j=d),re(P["$end_with?"]("="))?Z(V,"define_method",[i],function ee(ae){var oe=ee.$$s==null?this:ee.$$s;return oe.native==null&&(oe.native=d),ae==null&&(ae=d),oe.native[P["$[]"]($e(0,-2,!1))]=e("Native").$convert(ae),ae},{$$s:V}):re(j)?Z(V,"define_method",[i],function ee(ae){var oe=ee.$$p||d,_e,de,ge=ee.$$s==null?this:ee.$$s,ve=d;return ge.native==null&&(ge.native=d),ee.$$p=null,_e=S(arguments),de=_e,ve=Z(e("Native"),"call",[ge.native,P].concat(J(de)),oe.$to_proc()),re(ve)?j.$new(ve.$to_n()):d},{$$arity:-1,$$s:V}):Z(V,"define_method",[i],function ee(ae){var oe=ee.$$p||d,_e,de,ge=ee.$$s==null?this:ee.$$s;return ge.native==null&&(ge.native=d),ee.$$p=null,_e=S(arguments),de=_e,Z(e("Native"),"call",[ge.native,P].concat(J(de)),oe.$to_proc())},{$$arity:-1,$$s:V})},-2),G(n,"$native_reader",function(i){var a,l,v=this;return a=S(arguments),l=a,Z(l,"each",[],function N(P){var j=N.$$s==null?this:N.$$s;return P==null&&(P=d),Z(j,"define_method",[P],function V(){var ee=V.$$s==null?this:V.$$s;return ee.native==null&&(ee.native=d),ee.$Native(ee.native[P])},{$$s:j})},{$$s:v})},-1),G(n,"$native_writer",function(i){var a,l,v=this;return a=S(arguments),l=a,Z(l,"each",[],function N(P){var j=N.$$s==null?this:N.$$s;return P==null&&(P=d),Z(j,"define_method",[""+P+"="],function V(ee){var ae=V.$$s==null?this:V.$$s;return ae.native==null&&(ae.native=d),ee==null&&(ee=d),ae.$Native(ae.native[P]=ee)},{$$s:j})},{$$s:v})},-1),G(n,"$native_accessor",function(i){var a,l,v=this;return a=S(arguments),l=a,Z(v,"native_reader",J(l)),Z(v,"native_writer",J(l))},-1)}(w[0],w),function(_,s){var n=b(_,"Wrapper"),r=[n].concat(s),e=$.$r(r);return G(n,"$initialize",function(i){var a=this;return re(T["$native?"](i))||T.$raise(e("ArgumentError"),""+i.$inspect()+" isn't native"),a.native=i}),G(n,"$to_n",O("native")),L(n,"$included",function(i){return i.$extend(e("Helpers"))})}(w[0],w),L(o,"$included",function(s){var n=this;return n.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),s.$include(B("Wrapper"))})}(E[0],E),function(g,c){var o=b(g,"Kernel"),w=[o].concat(c),B=$.$r(w);return G(o,"$native?",function(s){return s==null||!s.$$class}),G(o,"$Native",function _(s){_.$$p;var n=this;return _.$$p=null,re(s==null)?d:re(n["$native?"](s))?I(B("Native"),"Object").$new(s):re(s["$is_a?"](B("Array")))?Z(s,"map",[],function r(e){var t=r.$$s==null?this:r.$$s;return e==null&&(e=d),t.$Native(e)},{$$s:n}):re(s["$is_a?"](B("Proc")))?Z(n,"proc",[],function r(e){var t=r.$$p||d,i,a,l=r.$$s==null?this:r.$$s;return r.$$p=null,i=S(arguments),a=i,l.$Native(Z(s,"call",J(a),t.$to_proc()))},{$$arity:-1,$$s:n}):s}),Y(o,"_Array","Array"),G(o,"$Array",function _(s,n){var r=_.$$p||d,e,t,i=this;return _.$$p=null,e=S(arguments,1),t=e,re(i["$native?"](s))?Z(I(B("Native"),"Array"),"new",[s].concat(J(t)),r.$to_proc()).$to_a():i.$_Array(s)},-2)}(E[0],E),function(g,c){var o=q(g,c,"Object"),w=o.$$prototype;return w.native=d,o.$include(I(I("Native"),"Wrapper")),G(o,"$==",function(_){var s=this;return s.native===I("Native").$try_convert(_)}),G(o,"$has_key?",function(_){var s=this;return $.hasOwnProperty.call(s.native,_)}),G(o,"$each",function B(_){var s,n,r=B.$$p||d,e=this;if(B.$$p=null,s=S(arguments),n=s,r!==d){for(var t in e.native)$.yieldX(r,[t,e.native[t]]);return e}else return Z(e,"method_missing",["each"].concat(J(n)))},-1),G(o,"$[]",function(_){var s=this,n=s.native[_];return n instanceof Function?n:I("Native").$call(s.native,_)}),G(o,"$[]=",function(_,s){var n=this,r=d;return r=I("Native").$try_convert(s),re(r===d)?n.native[_]=s:n.native[_]=r}),G(o,"$merge!",function(_){var s=this;_=I("Native").$convert(_);for(var n in _)s.native[n]=_[n];return s}),G(o,"$respond_to?",function(_,s){var n=this;return s==null&&(s=!1),T.$instance_method("respond_to?").$bind(n).$call(_,s)},-2),G(o,"$respond_to_missing?",function(_,s){var n=this;return $.hasOwnProperty.call(n.native,_)},-2),G(o,"$method_missing",function B(_,s){var n=B.$$p||d,r,e,t,i=this;return B.$$p=null,r=S(arguments,1),e=r,_.charAt(_.length-1)==="="?(t=[_.$slice(0,h(_.$length(),1)),e["$[]"](0)],Z(i,"[]=",t),t[t.length-1]):Z(I("Native"),"call",[i.native,_].concat(J(e)),n.$to_proc())},-2),G(o,"$nil?",R(!1)),G(o,"$is_a?",function(_){var s=this;return $.is_a(s,_)}),G(o,"$instance_of?",function(_){var s=this;return s.$$class===_}),G(o,"$class",function(){var _=this;return _.$$class}),G(o,"$to_a",function B(_){var s=B.$$p||d,n=this;return B.$$p=null,_==null&&(_=new Map),Z(I(I("Native"),"Array"),"new",[n.native,_],s.$to_proc()).$to_a()},-1),G(o,"$inspect",function(){var _=this;return"#<Native:"+String(_.native)+">"}),Y(o,"include?","has_key?"),Y(o,"key?","has_key?"),Y(o,"kind_of?","is_a?"),Y(o,"member?","has_key?")}(u("Native"),u("BasicObject")),function(g,c,o){var w=q(g,c,"Array"),B=[w].concat(o),_=$.$r(B),s=w.$$prototype;return s.named=s.native=s.get=s.block=s.set=s.length=d,w.$include(I(_("Native"),"Wrapper")),w.$include(_("Enumerable")),G(w,"$initialize",function n(r,e){var t=n.$$p||d,i=this,a=d;return n.$$p=null,e==null&&(e=new Map),H(i,k(i,"initialize",n,!1,!0),"initialize",[r],null),i.get=re(a=e["$[]"]("get"))?a:e["$[]"]("access"),i.named=e["$[]"]("named"),i.set=re(a=e["$[]"]("set"))?a:e["$[]"]("access"),i.length=re(a=e["$[]"]("length"))?a:"length",i.block=t,re(i.$length()==null)?i.$raise(_("ArgumentError"),"no length found on the array-like object"):d},-2),G(w,"$each",function n(){var r=n.$$p||d,e=this;if(n.$$p=null,!re(r))return e.$enum_for("each");for(var t=0,i=e.$length();t<i;t++)$.yield1(r,e["$[]"](t));return e}),G(w,"$[]",function(r){var e=this,t=d,i=d;return t=F(_("String"),i=r)||F(_("Symbol"),i)?re(e.named)?e.native[e.named](r):e.native[r]:F(_("Integer"),i)?re(e.get)?e.native[e.get](r):e.native[r]:d,re(t)?re(e.block)?e.block.$call(t):e.$Native(t):d}),G(w,"$[]=",function(r,e){var t=this;return re(t.set)?t.native[t.set](r,_("Native").$convert(e)):t.native[r]=_("Native").$convert(e)}),G(w,"$last",function(r){var e=this,t=d,i=d;if(r==null&&(r=d),re(r)){for(t=h(e.$length(),1),i=[];re(m(t,0));)i["$<<"](e["$[]"](t)),t=h(t,1);return i}else return e["$[]"](h(e.$length(),1))},-1),G(w,"$length",function(){var r=this;return r.native[r.length]}),G(w,"$inspect",function(){var r=this;return r.$to_a().$inspect()}),Y(w,"to_ary","to_a")}(u("Native"),null,E),function(g,c){var o=q(g,c,"Numeric");return G(o,"$to_n",function(){var B=this;return B.valueOf()})}(E[0],null),function(g,c){var o=q(g,c,"Proc");return G(o,"$to_n",A)}(E[0],null),function(g,c){var o=q(g,c,"String");return G(o,"$to_n",function(){var B=this;return B.valueOf()})}(E[0],null),function(g,c){var o=q(g,c,"Regexp");return G(o,"$to_n",function(){var B=this;return B.valueOf()})}(E[0],null),function(g,c){var o=q(g,c,"MatchData");return G(o,"$to_n",O("matches"))}(E[0],null),function(g,c,o){var w=q(g,c,"Struct"),B=[w].concat(o),_=$.$r(B);return G(w,"$to_n",function(){var n=this,r=d;return r={},Z(n,"each_pair",[],function(t,i){return t==null&&(t=d),i==null&&(i=d),r[t]=_("Native").$try_convert(i,i)}),r})}(E[0],null,E),function(g,c,o){var w=q(g,c,"Array"),B=[w].concat(o),_=$.$r(B);return G(w,"$to_n",function(){for(var n=this,r=[],e=0,t=n.length;e<t;e++){var i=n[e];r.push(_("Native").$try_convert(i,i))}return r})}(E[0],null,E),function(g,c){var o=q(g,c,"Boolean");return G(o,"$to_n",function(){var B=this;return B.valueOf()})}(E[0],null),function(g,c){var o=q(g,c,"Time");return G(o,"$to_n",A)}(E[0],null),function(g,c){var o=q(g,c,"NilClass");return G(o,"$to_n",function(){return null})}(E[0],null),re(u("Hash")["$method_defined?"]("_initialize"))||function(g,c,o){var w=q(g,c,"Hash"),B=[w].concat(o),_=$.$r(B);Y(w,"_initialize","initialize");function s(n,r,e){e&&(e.constructor===void 0||e.constructor===Object||e instanceof Map)?z(n,r,_("Hash").$new(e)):e&&e.$$is_array?(e=e.map(function(t){return t&&(t.constructor===void 0||t.constructor===Object||e instanceof Map)?_("Hash").$new(t):w.$Native(t)}),z(n,r,e)):z(n,r,w.$Native(e))}return G(w,"$initialize",function n(r){var e=n.$$p||d,t=this;if(n.$$p=null,r!=null)if(r.constructor===void 0||r.constructor===Object){var i,a;for(i in r)a=r[i],s(t,i,a);return t}else r instanceof Map&&$.hash_each(r,!1,function(l,v){return s(t,l,v),[!1,!1]});return Z(t,"_initialize",[r],e.$to_proc())},-1),G(w,"$to_n",function(){var r=this,e={};return $.hash_each(r,!1,function(t,i){return e[_("Native").$try_convert(t,t)]=_("Native").$try_convert(i,i),[!1,!1]}),e})}(E[0],null,E),function(g,c){var o=q(g,c,"Module");return G(o,"$native_module",function(){var B=this;return $.global[B.$name()]=B})}(E[0],null),function(g,c,o){var w=q(g,c,"Class"),B=[w].concat(o),_=$.$r(B);return G(w,"$native_alias",function(n,r){var e=this,t=e.prototype[$.jsid(r)];t||e.$raise(_("NameError").$new("undefined method `"+r+"' for class `"+e.$inspect()+"'",r)),e.prototype[n]=t}),G(w,"$native_class",function(){var n=this;return n.$native_module(),n.new=n.$new})}(E[0],null,E),C.$=C.global=x.$Native($.global)};(function($){var z;if(typeof globalThis<"u"?$=globalThis:typeof global<"u"?$=global:typeof window<"u"&&($=window),$.console==null&&($.console={}),typeof $.console=="object"?z=$.console:z={},"log"in z||(z.log=function(){}),"warn"in z||(z.warn=z.log),typeof $.Opal<"u")return z.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),$.Opal;var b,L,S,re,Z,T,W,p=$.Opal={};p.global=$,p.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var D=Function.prototype.call,$e=Function.prototype.bind,J=Object.hasOwn||D.bind(Object.prototype.hasOwnProperty),G=Object.setPrototypeOf,O=D.bind(Array.prototype.slice),Y=D.bind(Array.prototype.splice),q=4,h=q;function R(){return h+=2,h}p.uid=R,p.id=function(f){return f.$$is_number?f*2+1:(f.$$id==null&&m(f,"$$id",R()),f.$$id)};var H=p.gvars={};p.exit=function(f){H.DEBUG&&z.log("Exited with status "+f)},p.exceptions=[],p.pop_exception=function(f){var y=p.exceptions.pop();y===f||(y?H["!"]=y:H["!"]=b)};function k(f,y){if(f||(f=p.Exception||Error),W&&W.$raise)arguments.length>2?W.$raise(f.$new.apply(f,O(arguments,1))):W.$raise(f,y);else throw f.$new?f.$new(y):new f(y)}var F={value:void 0,enumerable:!1,configurable:!0,writable:!0};function m(f,y,U){typeof f=="string"?f[y]=U:(F.value=U,Object.defineProperty(f,y,F))}p.prop=m,p.defineProperty=p.prop,p.slice=O;var A=p.truthy=function(f){return f!==!1&&b!==f&&f!==void 0&&f!==null&&(!(f instanceof Boolean)||f.valueOf()===!0)};p.falsy=function(f){return!A(f)},p.type_error=function(f,y,U,te){f=f.$$class,te&&U?(te=te.$$class,k(p.TypeError,"can't convert "+f+" into "+y+" ("+f+"#"+U+" gives "+te+")")):k(p.TypeError,"no implicit conversion of "+f+" into "+y)},p.coerce_to=function(f,y,U,te){var ue;return U==="to_int"&&y===p.Integer&&f.$$is_number?f<0?Math.ceil(f):Math.floor(f):U==="to_str"&&y===p.String&&f.$$is_string||p.is_a(f,y)?f:f["$respond_to?"].$$pristine&&f.$method_missing.$$pristine?(ue=f[de(U)],(ue==null||ue.$$stub)&&p.type_error(f,y),ue.apply(f,te)):(f["$respond_to?"](U)||p.type_error(f,y),te==null&&(te=[]),p.send(f,U,te))},p.respond_to=function(f,y,U){if(f==null||!f.$$class)return!1;U=!!U;var te=f[y];if(f["$respond_to?"].$$pristine){if(typeof te=="function"&&!te.$$stub)return!0;if(!f["$respond_to_missing?"].$$pristine)return p.send(f,f["$respond_to_missing?"],[y.substr(1),U])}else return p.send(f,f["$respond_to?"],[y.substr(1),U])},p.trace_class=!1,p.tracers_for_class=[];function C(f){var y,U,te;for(y=0,U=p.tracers_for_class.length;y<U;y++)te=p.tracers_for_class[y],te.trace_object=f,te.block.$call(te)}function x(f,y){if(f.$$autoload[y].loaded){if(f.$$autoload[y].loaded&&!f.$$autoload[y].required&&f.$$autoload[y].exception)throw f.$$autoload[y].exception}else{f.$$autoload[y].loaded=!0;try{p.Kernel.$require(f.$$autoload[y].path)}catch(U){throw f.$$autoload[y].exception=U,U}if(f.$$autoload[y].required=!0,f.$$const[y]!=null)return f.$$autoload[y].success=!0,f.$$const[y]}}function E(f,y){if(f){if(f.$$const[y]!=null)return f.$$const[y];if(f.$$autoload&&f.$$autoload[y])return x(f,y)}}function u(f,y){var U,te,ue;if(f.length!==0)for(U=0,te=f.length;U<te;U++){if(ue=f[U].$$const[y],ue!=null)return ue;if(f[U].$$autoload&&f[U].$$autoload[y])return x(f[U],y)}}function d(f,y){var U,te,ue;if(f!=null)for(ue=V(f),U=0,te=ue.length;U<te;U++){if(ue[U].$$const&&J(ue[U].$$const,y))return ue[U].$$const[y];if(ue[U].$$autoload&&ue[U].$$autoload[y])return x(ue[U],y)}}function I(f,y){if(f==null||f.$$is_module)return d(S,y)}function g(f,y){return(f||S).$const_missing(y)}p.const_get_local=function(f,y,U){var te;if(f!=null)return f==="::"&&(f=S),!f.$$is_module&&!f.$$is_class&&k(p.TypeError,f.toString()+" is not a class/module"),te=E(f,y),te!=null||U?te:g(f,y)},p.const_get_qualified=function(f,y,U){var te,ue,ce,he=p.const_cache_version;if(y==null)return te=E(S,f),te??p.const_get_qualified(S,f,U);if(f!=null)return f==="::"&&(f=S),!f.$$is_module&&!f.$$is_class&&k(p.TypeError,f.toString()+" is not a class/module"),(ue=f.$$const_cache)==null&&(m(f,"$$const_cache",Object.create(null)),ue=f.$$const_cache),ce=ue[y],ce==null||ce[0]!==he?((te=E(f,y))!=null||(te=d(f,y))!=null,ue[y]=[he,te]):te=ce[1],te!=null||U?te:g(f,y)},p.const_cache_version=1,p.const_get_relative=function(f,y,U){var te=f[0],ue,ce=p.const_cache_version,he,pe;return(he=f.$$const_cache)==null&&(m(f,"$$const_cache",Object.create(null)),he=f.$$const_cache),pe=he[y],pe==null||pe[0]!==ce?((ue=E(te,y))!=null||(ue=u(f,y))!=null||(ue=d(te,y))!=null||(ue=I(te,y))!=null,he[y]=[ce,ue]):ue=pe[1],ue!=null||U?ue:g(te,y)};function c(f,y,U){var te=!0;return(f==null||f==="::")&&(f=S),U.$$is_a_module&&((U.$$name==null||U.$$name===b)&&(U.$$name=y),U.$$base_module==null&&(U.$$base_module=f)),f.$$const=f.$$const||Object.create(null),(y in f.$$const||"$$autoload"in f&&y in f.$$autoload)&&(te=!1),f.$$const[y]=U,f.$$=f.$$const,p.const_cache_version++,f===S&&(p[y]=U),m(f,y,U),te&&f.$const_added&&!f.$const_added.$$pristine&&f.$const_added(y),U}p.const_set=c,p.constants=function(f,y){y==null&&(y=!0);var U,te=[f],ue,ce,he={},pe;for(y&&(te=te.concat(V(f))),y&&f.$$is_module&&(te=te.concat([p.Object]).concat(V(p.Object))),ue=0,ce=te.length;ue<ce&&(U=te[ue],!(f!==S&&U==S));ue++){for(pe in U.$$const)he[pe]=!0;if(U.$$autoload)for(pe in U.$$autoload)he[pe]=!0}return Object.keys(he)},p.const_remove=function(f,y){if(p.const_cache_version++,f.$$const[y]!=null){var U=f.$$const[y];return delete f.$$const[y],U}if(f.$$autoload&&f.$$autoload[y])return delete f.$$autoload[y],b;k(p.NameError,"constant "+f+"::"+f.$name()+" not defined")},p.const_get_relative_factory=function(f){return function(y,U){return p.$$(f,y,U)}},p.$$=p.const_get_relative,p.$$$=p.const_get_qualified,p.$r=p.const_get_relative_factory;function o(f){return f==null?!1:f.$$bridge?f:f.$$super?o(f.$$super):!1}function w(f,y,U){var te,ue;if((ue=o(y))?te=function(){var ye=new($e.apply(ue.$$constructor,ge(null,arguments)));return G(ye,te.$$prototype),ye}:te=function(){},f&&f!==b&&m(te,"displayName","::"+f),m(te,"$$name",f),m(te,"$$constructor",te),m(te,"$$prototype",te.prototype),m(te,"$$const",{}),m(te,"$$is_class",!0),m(te,"$$is_a_module",!0),m(te,"$$super",y),m(te,"$$cvars",{}),m(te,"$$own_included_modules",[]),m(te,"$$own_prepended_modules",[]),m(te,"$$ancestors",[]),m(te,"$$ancestors_cache_version",null),m(te,"$$subclasses",[]),m(te,"$$cloned_from",[]),m(te.$$prototype,"$$class",te),p.Class&&G(te,p.Class.prototype),y!=null){if(G(te.$$prototype,y.$$prototype),U!==!0)if(typeof WeakRef<"u"){var ce,he,pe=[];for(ce=0;ce<y.$$subclasses.length;ce++)he=y.$$subclasses[ce],he.deref()!==void 0&&pe.push(he);pe.push(new WeakRef(te)),y.$$subclasses=pe}else y.$$subclasses.push(te);y.$$meta&&p.build_class_singleton_class(te)}return te}p.allocate_class=w;function B(f,y){var U=E(f,y);if(U)return U.$$is_class||k(p.TypeError,y+" is not a class"),U}function _(f,y){f.$$super!==y&&k(p.TypeError,"superclass mismatch for class "+f.$$name)}p.klass=function(f,y,U){var te;f==null||f=="::"?f=S:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),y!=null&&(!y.hasOwnProperty||y.hasOwnProperty&&!y.hasOwnProperty("$$is_class"))&&(y.constructor&&y.constructor.name=="Function"?(te=y,y=S):k(p.TypeError,"superclass must be a Class ("+(y.constructor&&(y.constructor.name||y.constructor.$$name)||typeof y)+" given)"));var ue=B(f,U);return ue!=null?y&&_(ue,y):(y==null&&(y=S),ue=w(U,y),c(f,U,ue),y.$inherited&&y.$inherited(ue),te&&p.bridge(te,ue)),p.trace_class&&C(ue),ue};function s(f){var y=function(){},U=y;return f&&m(y,"displayName",f+".constructor"),m(U,"$$name",f),m(U,"$$prototype",y.prototype),m(U,"$$const",{}),m(U,"$$is_module",!0),m(U,"$$is_a_module",!0),m(U,"$$cvars",{}),m(U,"$$iclasses",[]),m(U,"$$own_included_modules",[]),m(U,"$$own_prepended_modules",[]),m(U,"$$ancestors",[U]),m(U,"$$ancestors_cache_version",null),m(U,"$$cloned_from",[]),G(U,p.Module.prototype),U}p.allocate_module=s;function n(f,y){var U=E(f,y);return U==null&&f===S&&(U=d(S,y)),U&&!U.$$is_module&&U!==S&&k(p.TypeError,y+" is not a module"),U}p.module=function(f,y){var U;return f==null||f=="::"?f=S:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),U=n(f,y),U==null&&(U=s(y),c(f,y,U)),p.trace_class&&C(U),U},p.get_singleton_class=function(f){return f.$$is_number&&k(p.TypeError,"can't define singleton"),f.$$meta?f.$$meta:f.hasOwnProperty("$$is_class")?p.build_class_singleton_class(f):f.hasOwnProperty("$$is_module")?p.build_module_singleton_class(f):p.build_object_singleton_class(f)};function r(f,y){f.hasOwnProperty("$$meta")?f.$$meta=y:m(f,"$$meta",y),f.$$frozen?f.$$meta.$freeze():G(f,y.$$prototype)}p.build_class_singleton_class=function(f){if(f.$$meta)return f.$$meta;var y=f===L?Z:p.get_singleton_class(f.$$super),U=w(null,y,!0);return m(U,"$$is_singleton",!0),m(U,"$$singleton_of",f),r(f,U),m(f,"$$class",p.Class),U},p.build_module_singleton_class=function(f){if(f.$$meta)return f.$$meta;var y=w(null,p.Module,!0);return m(y,"$$is_singleton",!0),m(y,"$$singleton_of",f),r(f,y),m(f,"$$class",p.Module),y},p.build_object_singleton_class=function(f){var y=f.$$class,U=w(b,y,!0);return m(U,"$$is_singleton",!0),m(U,"$$singleton_of",f),delete U.$$prototype.$$class,r(f,U),U},p.is_method=function(f){return f[0]==="$"&&f[1]!=="$"},p.instance_methods=function(f){for(var y=Object.create(null),U=[],te=V(f),ue=0,ce=te.length;ue<ce;ue++){var he=te[ue],pe=he.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ze=ye.length;we<ze;we++){var Ee=ye[we];if(!y[Ee]){if(p.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);U.push(qe)}}y[Ee]=!0}}}return U},p.own_instance_methods=function(f){var y=[],U=f.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);for(var te=Object.getOwnPropertyNames(U),ue=0,ce=te.length;ue<ce;ue++){var he=te[ue];if(p.is_method(he)){var pe=U[he];if(!pe.$$stub){var ye=he.slice(1);y.push(ye)}}}return y},p.methods=function(f){return p.instance_methods(f.$$meta||f.$$class)},p.own_methods=function(f){return f.$$meta?p.own_instance_methods(f.$$meta):[]},p.receiver_methods=function(f){var y=p.get_singleton_class(f),U=p.own_instance_methods(y),te=p.own_instance_methods(y.$$super);return U.concat(te)},p.class_variables=function(f){var y=V(f),U,te=y.length,ue={};for(U=te-1;U>=0;U--){var ce=y[U];for(var he in ce.$$cvars)ue[he]=ce.$$cvars[he]}return ue},p.class_variable_set=function(f,y,U){var te=V(f),ue,ce=te.length;for(ue=ce-2;ue>=0;ue--){var he=te[ue];if(J(he.$$cvars,y))return he.$$cvars[y]=U,U}return f.$$cvars[y]=U,U},p.class_variable_get=function(f,y,U){if(J(f.$$cvars,y))return f.$$cvars[y];var te=V(f),ue,ce=te.length;for(ue=0;ue<ce;ue++){var he=te[ue];if(J(he.$$cvars,y))return he.$$cvars[y]}return U||k(p.NameError,"uninitialized class variable "+y+" in "+f.$name()),b};function e(f){return f.hasOwnProperty("$$iclass")&&f.hasOwnProperty("$$root")}function t(f){for(var y=[],U,te=Object.getPrototypeOf(f.$$prototype);te&&!te.hasOwnProperty("$$class");)U=P(te),U&&y.push(U),te=Object.getPrototypeOf(te);return y}function i(f){var y=[],U,te=Object.getPrototypeOf(f.$$prototype);if(f.$$prototype.hasOwnProperty("$$dummy"))for(;te&&te!==f.$$prototype.$$define_methods_on;)U=P(te),U&&y.push(U),te=Object.getPrototypeOf(te);return y}p.append_features=function(f,y){var U=V(f),te=[];U.indexOf(y)!==-1&&k(p.ArgumentError,"cyclic include detected");for(var ue=0,ce=U.length;ue<ce;ue++){var he=U[ue],pe=l(he);m(pe,"$$included",!0),te.push(pe)}var ye=V(y),we=N(te),ze,Ee;if(ye.indexOf(f)===-1)ze=y.$$prototype,Ee=Object.getPrototypeOf(y.$$prototype);else{for(var xe=y.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===f&&e(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var Ae=Object.getPrototypeOf(qe);Ae.hasOwnProperty("$$iclass")&&!e(Ae);)Ae=Object.getPrototypeOf(Ae);ze=xe,Ee=Ae}else ze=y.$$prototype,Ee=Object.getPrototypeOf(y.$$prototype)}G(ze,we.first),G(we.last,Ee),y.$$own_included_modules=t(y),p.const_cache_version++},p.prepend_features=function(f,y){var U=V(f),te=[];U.indexOf(y)!==-1&&k(p.ArgumentError,"cyclic prepend detected");for(var ue=0,ce=U.length;ue<ce;ue++){var he=U[ue],pe=l(he);m(pe,"$$prepended",!0),te.push(pe)}var ye=N(te),we=y.$$prototype,ze=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=v(y),a(y),m(we,"$$dummy",!0),m(we,"$$define_methods_on",Ee),G(we,Ee),G(Ee,ze));var Ae=V(y);if(Ae.indexOf(f)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else k(p.RuntimeError,"Prepending a module multiple times is not supported");G(xe,ye.first),G(ye.last,qe),y.$$own_prepended_modules=i(y),p.const_cache_version++};function a(f){for(var y=f.$$prototype,U=Object.getOwnPropertyNames(y),te=0;te<U.length;te++){var ue=U[te];p.is_method(ue)&&delete y[ue]}}function l(f){var y=v(f);return f.$$is_module&&f.$$iclasses.push(y),y}function v(f){var y={},U=f.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);var te=Object.getOwnPropertyNames(U),ue=te.length,ce;for(ce=0;ce<ue;ce++){var he=te[ce];m(y,he,U[he])}return m(y,"$$iclass",!0),m(y,"$$module",f),y}function N(f){var y=f.length,U=f[0];if(m(U,"$$root",!0),y===1)return{first:U,last:U};for(var te=U,ue=1;ue<y;ue++){var ce=f[ue];G(te,ce),te=ce}return{first:f[0],last:f[y-1]}}p.bridge=function(f,y){f.hasOwnProperty("$$bridge")&&k(p.ArgumentError,"already bridged"),m(f,"$$bridge",y),G(f.prototype,(y.$$super||p.Object).$$prototype),m(y,"$$prototype",f.prototype),m(y.$$prototype,"$$class",y),m(y,"$$constructor",f),m(y,"$$bridge",!0)};function P(f){if(!f.hasOwnProperty("$$dummy")){if(f.hasOwnProperty("$$iclass"))return f.$$module;if(f.hasOwnProperty("$$class"))return f.$$class}}function j(f){return f.$$own_prepended_modules.concat([f]).concat(f.$$own_included_modules)}function V(f){if(!f)return[];if(f.$$ancestors_cache_version===p.const_cache_version)return f.$$ancestors;var y=[],U,te,ue;for(U=0,te=j(f),ue=te.length;U<ue;U++)y.push(te[U]);if(f.$$super)for(U=0,te=V(f.$$super),ue=te.length;U<ue;U++)y.push(te[U]);return f.$$ancestors_cache_version=p.const_cache_version,f.$$ancestors=y,y}p.ancestors=V,p.included_modules=function(f){for(var y=[],U=null,te=Object.getPrototypeOf(f.$$prototype);te&&Object.getPrototypeOf(te);te=Object.getPrototypeOf(te))U=P(te),U&&U.$$is_module&&te.$$iclass&&te.$$included&&y.push(U);return y},p.add_stubs=function(f){var y=p.BasicObject.$$prototype,U,te;f=f.split(",");for(var ue=0,ce=f.length;ue<ce;ue++)U=de(f[ue]),te=y[U],(te==null||te.$$stub)&&p.add_stub_for(y,U)},p.add_stub_for=function(f,y){m(f,y,p.stub_for(y))},p.stub_for=function(f){function y(){return this.$method_missing.$$p=y.$$p,y.$$p=null,this.$method_missing.apply(this,ge(f.slice(1),arguments))}return y.$$stub=!0,y},p.ac=function(f,y,U,te){var ue="";U.$$is_a_module?ue+=U.$$name+".":ue+=U.$$class.$$name+"#",ue+=te,k(p.ArgumentError,"["+ue+"] wrong number of arguments (given "+f+", expected "+y+")")},p.block_ac=function(f,y,U){var te="`block in "+U+"'";k(p.ArgumentError,te+": wrong number of arguments (given "+f+", expected "+y+")")};function ee(f){return f.hasOwnProperty("$$meta")&&f.$$meta!==null?V(f.$$meta):V(f.$$class)}p.find_super=function(f,y,U,te,ue){var ce=de(y),he,pe,ye,we,ze=-1,Ee;for(he=ee(f),we=U.$$owner,Ee=0;Ee<he.length;Ee++)if(pe=he[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ze=Ee;break}for(Ee=ze+1;Ee<he.length;Ee++){pe=he[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(ce)){ye=xe[ce];break}}return!te&&ye&&ye.$$stub&&f.$method_missing.$$pristine&&k(p.NoMethodError,"super: no superclass method `"+y+"' for "+f,y),ye.$$stub&&!ue?null:ye},p.find_block_super=function(f,y,U,te,ue){var ce=y;return U||k(p.RuntimeError,"super called outside of method"),ue&&U.$$define_meth&&k(p.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),U.$$def&&(ce=U.$$jsid),p.find_super(f,ce,U,te)},p.find_super_dispatcher=p.find_super,p.find_iter_super_dispatcher=p.find_block_super;function ae(f,y,U){try{f(y)}catch(te){if(te===U)return U.$v;throw te}}p.yield1=function(f,y){typeof f!="function"&&k(p.LocalJumpError,"no block given");var U=f.$$has_top_level_mlhs_arg,te=f.$$has_trailing_comma_in_args,ue=f.$$is_lambda&&f.$$ret;return(f.length>1||(U||te)&&f.length===1)&&(y=p.to_ary(y)),(f.length>1||te&&f.length===1)&&y.$$is_array?ue?ae(f.apply.bind(f,null),y,f.$$ret):f.apply(null,y):ue?ae(f,y,f.$$ret):f(y)},p.yieldX=function(f,y){return typeof f!="function"&&k(p.LocalJumpError,"no block given"),f.length>1&&y.length===1&&y[0].$$is_array&&(y=y[0]),f.$$is_lambda&&f.$$ret?ae(f.apply.bind(f,null),y,f.$$ret):f.apply(null,y)},p.rescue=function(f,y){for(var U=0;U<y.length;U++){var te=y[U];if(te.$$is_array){var ue=p.rescue(f,te);if(ue)return ue}else if(te===p.JS.Error||te["$==="](f))return te}return null},p.is_a=function(f,y){if(y!=null&&f.$$meta===y||f.$$class===y)return!0;if(f.$$is_number&&y.$$is_number_class)return y.$$is_integer_class?f%1===0:!0;var U=V(f.$$is_class?p.get_singleton_class(f):f.$$meta||f.$$class);return U.indexOf(y)!==-1},p.to_hash=function(f){if(f.$$is_hash)return f;if(f["$respond_to?"]("to_hash",!0)){var y=f.$to_hash();if(y.$$is_hash)return y;k(p.TypeError,"Can't convert "+f.$$class+" to Hash ("+f.$$class+"#to_hash gives "+y.$$class+")")}else k(p.TypeError,"no implicit conversion of "+f.$$class+" into Hash")},p.to_ary=function(f){if(f.$$is_array)return f;if(f["$respond_to?"]("to_ary",!0)){var y=f.$to_ary();if(y===b)return[f];if(y.$$is_array)return y;k(p.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_ary gives "+y.$$class+")")}else return[f]},p.to_a=function(f){if(f.$$is_array)return f.slice();if(f["$respond_to?"]("to_a",!0)){var y=f.$to_a();if(y===b)return[f];if(y.$$is_array)return y;k(p.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_a gives "+y.$$class+")")}else return[f]},p.extract_kwargs=function(f){var y=f[f.length-1];if(y!=null&&p.respond_to(y,"$to_hash",!0))return Y(f,f.length-1),y},p.kwrestargs=function(f,y){var U=new Map;return p.hash_each(f,!1,function(te,ue){return y[te]||p.hash_put(U,te,ue),[!1,!1]}),U};function oe(f,y){typeof y=="number"?f.$$arity=y:typeof y=="object"&&Object.assign(f,y)}var _e=new Map;function de(f){var y=_e.get(f);return y||(y="$"+f,_e.set(f,y)),y}p.jsid=de;function ge(f,y){return y.$$is_array||(y=O(y)),[f].concat(y)}p.send=function(f,y,U,te,ue){var ce;return typeof y=="function"?(ce=y,y=null):typeof y=="string"?ce=f[de(y)]:k(p.NameError,"Passed method should be a string or a function"),p.send2(f,ce,y,U,te,ue)},p.send2=function(f,y,U,te,ue,ce){return y==null&&U!=null&&f.$method_missing&&(y=f.$method_missing,te=ge(U,te)),oe(ue,ce),typeof ue=="function"&&(y.$$p=ue),y.apply(f,te)},p.refined_send=function(f,y,U,te,ue,ce){var he,pe,ye,we,ze,Ee,xe,qe,Ae,ke;for(we=ee(y),he=0;he<we.length;he++)for(ze=p.id(we[he]),pe=0;pe<f.length;pe++)for(Ee=f[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ze]>"u")&&(Ae=qe[ze],typeof Ae.$$prototype[de(U)]<"u")))return ke=Ae.$$prototype[de(U)],p.send2(y,ke,U,te,ue,ce);return p.send(y,U,te,ue,ce)},p.lambda=function(f,y){return f.$$is_lambda=!0,oe(f,y),f},p.def=function(f,y,U,te){return oe(U,te),f===p.top?p.defn(p.Object,y,U):!f.$$eval&&f.$$is_a_module?p.defn(f,y,U):p.defs(f,y,U)},p.defn=function(f,y,U){M(f),U.displayName=y,U.$$owner=f;var te=y.substr(1),ue=f.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),m(ue,y,U),f.$$is_module){f.$$module_function&&p.defs(f,y,U);for(var ce=0,he=f.$$iclasses,pe=he.length;ce<pe;ce++){var ye=he[ce];m(ye,y,U)}}var we=f.$$singleton_of;return f.$method_added&&!f.$method_added.$$stub&&!we?f.$method_added(te):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(te),te},p.defs=function(f,y,U,te){return oe(U,te),(f.$$is_string||f.$$is_number)&&k(p.TypeError,"can't define singleton"),p.defn(p.get_singleton_class(f),y,U)};function ve(f,y){if(f.$$is_module)for(var U=0,te=f.$$iclasses,ue=te.length;U<ue;U++){var ce=te[U];delete ce[y]}}p.rdef=function(f,y){J(f.$$prototype,y)||k(p.NameError,"method '"+y.substr(1)+"' not defined in "+f.$name()),delete f.$$prototype[y],ve(f,y),f.$$is_singleton?f.$$prototype.$singleton_method_removed&&!f.$$prototype.$singleton_method_removed.$$stub&&f.$$prototype.$singleton_method_removed(y.substr(1)):f.$method_removed&&!f.$method_removed.$$stub&&f.$method_removed(y.substr(1))},p.udef=function(f,y){(!f.$$prototype[y]||f.$$prototype[y].$$stub)&&k(p.NameError,"method '"+y.substr(1)+"' not defined in "+f.$name()),p.add_stub_for(f.$$prototype,y),ve(f,y),f.$$is_singleton?f.$$prototype.$singleton_method_undefined&&!f.$$prototype.$singleton_method_undefined.$$stub&&f.$$prototype.$singleton_method_undefined(y.substr(1)):f.$method_undefined&&!f.$method_undefined.$$stub&&f.$method_undefined(y.substr(1))};function me(f){return typeof f=="function"&&!f.$$stub}p.alias=function(f,y,U){var te=de(y),ue=de(U),ce,he;if(typeof f.$$prototype>"u"&&(f=p.Object),ce=f.$$prototype[ue],f.$$eval)return p.alias(p.get_singleton_class(f),y,U);if(!me(ce)){for(var pe=f.$$super;typeof ce!="function"&&pe;)ce=pe[ue],pe=pe.$$super;!me(ce)&&f.$$is_module&&(ce=p.Object.$$prototype[ue]),me(ce)||k(p.NameError,"undefined method `"+U+"' for class `"+f.$name()+"'")}return ce.$$alias_of&&(ce=ce.$$alias_of),he=p.wrap_method_body(ce),he.displayName=y,he.$$alias_of=ce,he.$$alias_name=y,p.defn(f,te,he),f},p.wrap_method_body=function(f){var y=function(){var U=y.$$p;return y.$$p=null,p.send(this,f,arguments,U)};try{Object.defineProperty(y,"length",{value:f.length})}catch{}return y.$$arity=f.$$arity==null?f.length:f.$$arity,y.$$parameters=f.$$parameters,y.$$source_location=f.$$source_location,y},p.alias_gvar=function(f,y){return Object.defineProperty(H,f,{configurable:!0,enumerable:!0,get:function(){return H[y]},set:function(U){H[y]=U}}),b},p.alias_native=function(f,y,U){var te=de(y),ue=f.$$prototype[U];return(typeof ue!="function"||ue.$$stub)&&k(p.NameError,"undefined native method `"+U+"' for class `"+f.$name()+"'"),p.defn(f,te,ue),f},p.hash_init=function(f){z.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},p.hash_clone=function(f,y){return y.$$none=f.$$none,y.$$proc=f.$$proc,p.hash_each(f,y,function(U,te){return p.hash_put(y,U,te),[!1,y]})},p.hash_put=function(f,y,U){var te=typeof y;if(te==="string"||te==="symbol"||te==="number"||te==="boolean"||te==="bigint")f.set(y,U);else if(y.$$is_string)f.set(y.valueOf(),U);else{f.$$keys||(f.$$keys=new Map);var ue=y.$$is_string?y.valueOf():f.$$by_identity?p.id(y):y.$hash(),ce=f.$$keys;if(!ce.has(ue)){ce.set(ue,[y]),f.set(y,U);return}for(var he=ce.get(ue),pe,ye=0;ye<he.length;ye++)if(pe=he[ye],y===pe||y["$eql?"](pe)){f.set(pe,U);return}he.push(y),f.set(y,U)}},p.hash_get=function(f,y){var U=typeof y;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return f.get(y);if(f.$$keys){var te=y.$$is_string?y.valueOf():f.$$by_identity?p.id(y):y.$hash(),ue=f.$$keys.get(te),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],y===ce||y["$eql?"](ce))return f.get(ce)}else if(y.$$is_string)return f.get(te)}else if(y.$$is_string)return f.get(y.valueOf())};function be(f,y){var U=f.get(y);if(U!==void 0)return f.delete(y),U}p.hash_delete=function(f,y){var U=typeof y;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return be(f,y);if(f.$$keys){var te=y.$$is_string?y.valueOf():f.$$by_identity?p.id(y):y.$hash(),ue=f.$$keys.get(te),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],y===ce||y["$eql?"](ce))return ue.splice(he,1),ue.length===0&&f.$$keys.delete(te),be(f,ce)}else if(y.$$is_string)return be(f,te)}else if(y.$$is_string)return be(f,y.valueOf())},p.hash_rehash=function(f){var y=f.$$keys;return y&&y.clear(),p.hash_each(f,!1,function(U,te){var ue=typeof U;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var ce=U.$$is_string?U.valueOf():f.$$by_identity?p.id(U):U.$hash();if(y||(f.$$keys=y=new Map),!y.has(ce))return y.set(ce,[U]),[!1,!1];for(var he=y.get(ce),pe=he.length===1?he:O(he),ye,we=0;we<pe.length;we++)ye=pe[we],(U===ye||U["$eql?"](ye))&&(he.splice(he.indexOf(ye),1),f.delete(ye));return he.push(U),[!1,!1]}),f},p.hash=function(){var f=arguments.length,y,U,te,ue,ce,he;if(f===1&&arguments[0].$$is_hash)return arguments[0];if(U=new Map,f===1)if(y=arguments[0],arguments[0].$$is_array){for(ue=y.length,te=0;te<ue;te++)y[te].length!==2&&k(p.ArgumentError,"value not of length 2: "+y[te].$inspect()),ce=y[te][0],he=y[te][1],p.hash_put(U,ce,he);return U}else{y=arguments[0];for(ce in y)J(y,ce)&&(he=y[ce],p.hash_put(U,ce,he));return U}for(f%2!==0&&k(p.ArgumentError,"odd number of arguments for Hash"),te=0;te<f;te+=2)ce=arguments[te],he=arguments[te+1],p.hash_put(U,ce,he);return U},p.hash2=function(f,y){z.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var U=new Map,te=0,ue=f.length;te<ue;te++)U.set(f[te],y[f[te]]);return U},p.hash_each=function(f,y,U){for(var te,ue=0,ce,he=Array.from(f.entries()),pe=he.length;ue<pe;ue++)if(ce=he[ue],te=U(ce[0],ce[1]),te[0])return te[1];return te?te[1]:y},p.range=function(f,y,U){var te=new p.Range;return te.begin=f,te.end=y,te.excl=U,te};var ie=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];p.ivar=function(f){return ie.indexOf(f)!==-1&&(f+="$"),f};function M(f){f.$$frozen&&k(p.FrozenError,"can't modify frozen "+f.$class()+": "+f,new Map([["receiver",f]]))}p.deny_frozen_access=M,p.freeze=function(f){return m(f,"$$frozen",!0),f.hasOwnProperty("$$id")||m(f,"$$id",R()),f.hasOwnProperty("$$meta")?f.$$meta.$freeze():m(f,"$$meta",null),f.hasOwnProperty("$$comparable")||m(f,"$$comparable",null),Object.seal(f),f};function K(f,y){var U=Object.getOwnPropertyNames(f),te=U.length,ue,ce,he;for(ue=0;ue<te;ue++)ce=U[ue],ce[0]!=="$"&&(he=Object.getOwnPropertyDescriptor(f,ce),he&&he.enumerable&&y(ce,he))}p.each_ivar=K,p.freeze_props=function(f){var y={get:null,set:function(U){M(f)},enumerable:!0};K(f,function(U,te){te.writable&&(y.get=se(te.value),Object.defineProperty(f,U,y))})},p.escape_regexp=function(f){return f.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},p.global_regexp=function(f){return f.global?f:(f.$$g==null?f.$$g=new RegExp(f.source,(f.multiline?"gm":"g")+(f.ignoreCase?"i":"")):f.$$g.lastIndex=null,f.$$g)},p.global_multiline_regexp=function(f){var y,U;return f.global&&f.multiline?f:(U="gm"+(f.ignoreCase?"i":""),f.multiline?(f.$$g==null&&(f.$$g=new RegExp(f.source,U)),y=f.$$g):(f.$$gm==null&&(f.$$gm=new RegExp(f.source,U)),y=f.$$gm),y.lastIndex=null,y)},p.regexp=function(f,y){for(var U,te=typeof y<"u"&&y&&y.indexOf("i")>=0,ue=0,ce=f.length;ue<ce;ue++)U=f[ue],U instanceof RegExp&&(U.ignoreCase!==te&&p.Kernel.$warn("ignore case doesn't match for "+U.source.$inspect(),new Map([["uplevel",1]])),U=U.source),U===""&&(U="(?:"+U+")"),f[ue]=U;return y?new RegExp(f.join(""),y):new RegExp(f.join(""))},p.modules={},p.loaded_features=["corelib/runtime"],p.current_dir=".",p.require_table={"corelib/runtime":!0},p.normalize=function(f){var y,U,te=[],ue="/";p.current_dir!=="."&&(f=p.current_dir.replace(/\/*$/,"/")+f),f=f.replace(/^\.\//,""),f=f.replace(/\.(rb|opal|js)$/,""),y=f.split(ue);for(var ce=0,he=y.length;ce<he;ce++)U=y[ce],U!==""&&(U===".."?te.pop():te.push(U));return te.join(ue)},p.loaded=function(f){var y,U,te;for(y=0,U=f.length;y<U;y++)te=p.normalize(f[y]),!p.require_table[te]&&(p.loaded_features.push(te),p.require_table[te]=!0)},p.load_normalized=function(f){p.loaded([f]);var y=p.modules[f];if(y){var U=y(p);if(typeof Promise<"u"&&U instanceof Promise)return U.then(se(!0))}else{var te=p.config.missing_require_severity,ue="cannot load such file -- "+f;te==="error"?k(p.LoadError,ue):te==="warning"&&z.warn("WARNING: LoadError: "+ue)}return!0},p.load=function(f){return f=p.normalize(f),p.load_normalized(f)},p.require=function(f){return f=p.normalize(f),p.require_table[f]?!1:p.load_normalized(f)},p.encodings=Object.create(null),p.set_encoding=function(f,y,U){typeof U>"u"&&(U="encoding"),(typeof f=="string"||f.$$frozen===!0)&&k(p.FrozenError,"can't modify frozen String");var te=p.find_encoding(y);return te===f[U]||(f[U]=te),f},p.find_encoding=function(f){var y=p.encodings,U=y[f]||y[f.toUpperCase()];return U||k(p.ArgumentError,"unknown encoding name - "+f),U},p.enc=function(f,y){var U=new String(f);return U=p.set_encoding(U,y),U.internal_encoding=U.encoding,U},p.binary=function(f){var y=new String(f);return p.set_encoding(y,"binary","internal_encoding")},p.last_promise=null,p.promise_unhandled_exception=!1,p.queue=function(f){if(p.last_promise)return p.last_promise=p.last_promise.then(function(){if(!p.promise_unhandled_exception)return f(p)}).catch(function(U){p.respond_to(U,"$full_message")&&(U=U.$full_message()),z.error(U),p.promise_unhandled_exception=!0,p.exit(1)}),p.last_promise;var y=f(p);return typeof Promise=="function"&&typeof y=="object"&&y instanceof Promise&&(p.last_promise=y),y};function X(f,y){return typeof f=="number"&&typeof y=="number"}p.rb_plus=function(f,y){return X(f,y)?f+y:f["$+"](y)},p.rb_minus=function(f,y){return X(f,y)?f-y:f["$-"](y)},p.rb_times=function(f,y){return X(f,y)?f*y:f["$*"](y)},p.rb_divide=function(f,y){return X(f,y)?f/y:f["$/"](y)},p.rb_lt=function(f,y){return X(f,y)?f<y:f["$<"](y)},p.rb_gt=function(f,y){return X(f,y)?f>y:f["$>"](y)},p.rb_le=function(f,y){return X(f,y)?f<=y:f["$<="](y)},p.rb_ge=function(f,y){return X(f,y)?f>=y:f["$>="](y)};function Q(f,y){return typeof f=="number"&&typeof y=="number"||typeof f=="string"&&typeof y=="string"}function ne(f,y){return Q(f,y)?f===y:A(f["$=="](y))}p.eqeq=ne,p.eqeqeq=function(f,y){return Q(f,y)?f===y:A(f["$==="](y))},p.neqeq=function(f,y){return Q(f,y)?f!==y:A(f["$!="](y))},p.not=function(f){return f==null||f===!1||b===f?!0:f===!0||f["$!"].$$pristine?!1:A(f["$!"]())};function se(f){return function(){return f}}p.return_val=se,p.return_self=function(){return this},p.return_ivar=function(f){return function(){return this[f]==null?b:this[f]}},p.assign_ivar=function(f){return function(y){return M(this),this[f]=y}},p.assign_ivar_val=function(f,y){return function(){return M(this),this[f]=y}},p.ensure_kwargs=function(f){if(f==null)return new Map;if(f.$$is_hash)return f;k(p.ArgumentError,"expected kwargs")},p.get_kwarg=function(f,y){var U=p.hash_get(f,y);return U===void 0&&k(p.ArgumentError,"missing keyword: "+y),U},p.large_array_unpack=function(f){var y=f.split(","),U=y.length,te;for(te=0;te<U;te++)switch(y[te][0]){case void 0:y[te]=b;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":y[te]=+y[te]}return y},p.opal32_init=se(1332765036);function le(f,y){return f<<y|f>>>32-y}p.opal32_add=function(f,y){return f^=y,f=le(f,1),f},p.BasicObject=L=w("BasicObject",null),p.Object=S=w("Object",p.BasicObject),p.Module=re=w("Module",p.Object),p.Class=Z=w("Class",p.Module),p.Opal=T=s("Opal"),p.Kernel=W=s("Kernel"),G(p.BasicObject,p.Class.$$prototype),G(p.Object,p.Class.$$prototype),G(p.Module,p.Class.$$prototype),G(p.Class,p.Class.$$prototype),L.$$const.BasicObject=L,c(S,"BasicObject",L),c(S,"Object",S),c(S,"Module",re),c(S,"Class",Z),c(S,"Opal",T),c(S,"Kernel",W),L.$$class=Z,S.$$class=Z,re.$$class=Z,Z.$$class=Z,T.$$class=re,W.$$class=re,m(S.$$prototype,"toString",function(){var f=this.$to_s();return f.$$is_string&&typeof f=="object"?f.valueOf():f}),m(S.$$prototype,"$require",p.require),p.top=new S,p.top.$to_s=p.top.$inspect=se("main"),p.top.$define_method=fe;function fe(){var f=fe.$$p;return fe.$$p=null,p.send(S,"define_method",arguments,f)}p.NilClass=w("NilClass",p.Object),c(S,"NilClass",p.NilClass),b=p.nil=new p.NilClass,b.$$id=q,b.call=b.apply=function(){k(p.LocalJumpError,"no block given")},b.$$frozen=!0,b.$$comparable=!1,Object.seal(b),p.thrower=function(f){var y={$thrower_type:f,$throw:function(U,te){throw U==null&&(U=b),this.is_orphan&&!te&&k(p.LocalJumpError,"unexpected "+f,U,f.$to_sym()),this.$v=U,this},is_orphan:!1};return y},Object.defineProperty(H,"@",{enumerable:!0,configurable:!0,get:function(){return A(H["!"])?H["!"].$backtrace():b},set:function(f){A(H["!"])?H["!"].$set_backtrace(f):k(p.ArgumentError,"$! not set")}}),p.t_eval_return=p.thrower("return"),TypeError.$$super=Error,p.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function($){var z=$.type_error,b=$.coerce_to,L=$.module,S=$.defs,re=$.slice,Z=$.eqeqeq,T=$.Kernel,W=$.truthy,p=$.Opal,D=$.nil,$e=$.$$$;return $.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(J){var G=L(J,"Opal");S(G,"$bridge",function(q,h){return $.bridge(q,h)}),S(G,"$coerce_to!",function(q,h,R,H){var k,F,m=D;return k=re(arguments,3),F=k,m=b(q,h,R,F),Z(h,m)||T.$raise(z(q,h,R,m)),m},-4),S(G,"$coerce_to?",function(q,h,R,H){var k,F,m=D;return k=re(arguments,3),F=k,!W(q["$respond_to?"](R))||(m=b(q,h,R,F),W(m["$nil?"]()))?D:(Z(h,m)||T.$raise(z(q,h,R,m)),m)},-4),S(G,"$try_convert",function(q,h,R){return Z(h,q)?q:W(q["$respond_to?"](R))?q.$__send__(R):D}),S(G,"$compare",function(q,h){var R=D;return R=q["$<=>"](h),W(R===D)&&T.$raise($e("ArgumentError"),"comparison of "+q.$class()+" with "+h.$class()+" failed"),R}),S(G,"$destructure",function(q){if(q.length==1)return q[0];if(q.$$is_array)return q;for(var h=new Array(q.length),R=0,H=h.length;R<H;R++)h[R]=q[R];return h}),S(G,"$respond_to?",function(q,h,R){return R==null&&(R=!1),q==null||!q.$$class?!1:q["$respond_to?"](h,R)},-3),S(G,"$instance_variable_name!",function(q){return q=p["$coerce_to!"](q,$e("String"),"to_str"),W(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(q))||T.$raise($e("NameError").$new("'"+q+"' is not allowed as an instance variable name",q)),q}),S(G,"$class_variable_name!",function(q){return q=p["$coerce_to!"](q,$e("String"),"to_str"),W(q.length<3||q.slice(0,2)!=="@@")&&T.$raise($e("NameError").$new("`"+q+"' is not allowed as a class variable name",q)),q}),S(G,"$const_name?",function(q){return typeof q!="string"&&(q=p["$coerce_to!"](q,$e("String"),"to_str")),q[0]===q[0].toUpperCase()}),S(G,"$const_name!",function(q){var h=this;return W($e("::","String","skip_raise")?"constant":D)&&(q=p["$coerce_to!"](q,$e("String"),"to_str")),(!q||q[0]!=q[0].toUpperCase())&&h.$raise($e("NameError"),"wrong constant name "+q),q}),S(G,"$pristine",function(q,h){var R,H;R=re(arguments,1),H=R;for(var k,F,m=H.length-1;m>=0;m--)k=H[m],F=q.$$prototype[$.jsid(k)],F&&!F.$$stub&&(F.$$pristine=!0);return D},-2);var O=[];return S(G,"$inspect",function(q){var h=D,R=!1;return function(){try{try{return q===null?"null":q===void 0?"undefined":typeof q.$$class>"u"?Object.prototype.toString.apply(q):typeof q.$inspect!="function"||q.$inspect.$$stub||O.indexOf(q.$__id__())!==-1?"#<"+q.$$class+":0x"+q.$__id__().$to_s(16)+">":(O.push(q.$__id__()),R=!0,q.$inspect())}catch(H){if($.rescue(H,[$e("Exception")])){h=H;try{return"#<"+q.$$class+":0x"+q.$__id__().$to_s(16)+">"}finally{$.pop_exception(H)}}else throw H}}finally{R&&O.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function($){var z=$.truthy,b=$.coerce_to,L=$.const_set,S=$.Object,re=$.return_ivar,Z=$.assign_ivar,T=$.ivar,W=$.deny_frozen_access,p=$.freeze,D=$.prop,$e=$.jsid,J=$.each_ivar,G=$.klass,O=$.Opal,Y=$.Kernel,q=$.defs,h=$.send,R=$.def,H=$.eqeqeq,k=$.Module,F=$.rb_lt,m=$.rb_gt,A=$.slice,C=$.to_a,x=$.return_val,E=$.eqeq,u=$.not,d=$.rb_le,I=$.range,g=$.send2,c=$.find_super,o=$.alias,w=[],B=$.nil,_=$.$$$;return $.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(s,n,r){var e=G(s,n,"Module"),t=[e].concat(r),i=$.$r(t);function a(P){if(P.$$is_string)return P;var j=O.$try_convert(P,_("String"),"to_str");if(j.$$is_string)return j;j===B?Y.$raise(_("TypeError"),""+P+" is not a symbol nor a string"):Y.$raise(_("TypeError"),"can't convert "+P.$class()+" to String ("+P.$class()+"#to_str gives "+j.$class())}q(e,"$allocate",function(){var j=this,V=$.allocate_module(B,function(){});return j!==$.Module&&Object.setPrototypeOf(V,j.$$prototype),V}),R(e,"$initialize",function P(){var j=P.$$p||B,V=this;return P.$$p=null,j!==B?h(V,"module_eval",[],j.$to_proc()):B}),R(e,"$===",function(j){var V=this;return z(j==null)?!1:$.is_a(j,V)}),R(e,"$<",function(j){var V=this;H(k,j)||Y.$raise(_("TypeError"),"compared with non class/module");var ee=V,ae,oe,_e;if(ee===j)return!1;for(oe=0,ae=$.ancestors(V),_e=ae.length;oe<_e;oe++)if(ae[oe]===j)return!0;for(oe=0,ae=$.ancestors(j),_e=ae.length;oe<_e;oe++)if(ae[oe]===V)return!1;return B}),R(e,"$<=",function(j){var V=this,ee=B;return z(ee=V["$equal?"](j))?ee:F(V,j)}),R(e,"$>",function(j){var V=this;return H(k,j)||Y.$raise(_("TypeError"),"compared with non class/module"),F(j,V)}),R(e,"$>=",function(j){var V=this,ee=B;return z(ee=V["$equal?"](j))?ee:m(V,j)}),R(e,"$<=>",function(j){var V=this,ee=B;return V===j?0:!H(k,j)||(ee=F(V,j),z(ee["$nil?"]()))?B:z(ee)?-1:1}),R(e,"$alias_method",function(j,V){var ee=this;return W(ee),j=b(j,_("String"),"to_str"),V=b(V,_("String"),"to_str"),$.alias(ee,j,V),ee}),R(e,"$alias_native",function(j,V){var ee=this;return V==null&&(V=j),W(ee),$.alias_native(ee,j,V),ee},-2),R(e,"$ancestors",function(){var j=this;return $.ancestors(j)}),R(e,"$append_features",function(j){var V=this;return W(j),$.append_features(V,j),V}),R(e,"$attr_accessor",function(j){var V,ee,ae=this;return V=A(arguments),ee=V,h(ae,"attr_reader",C(ee)),h(ae,"attr_writer",C(ee))},-1),R(e,"$attr",function(j){var V,ee,ae=this;return V=A(arguments),ee=V,ee.length==2&&(ee[1]===!0||ee[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),ee[1]?ae.$attr_accessor(ee[0]):ae.$attr_reader(ee[0]),B):h(ae,"attr_reader",C(ee))},-1),R(e,"$attr_reader",function(j){var V,ee,ae=this;V=A(arguments),ee=V,W(ae);for(var oe=ae.$$prototype,_e=ee.length-1;_e>=0;_e--){var de=ee[_e],ge=$e(de),ve=T(de),me=re(ve);$.prop(oe,ve,B),me.$$parameters=[],me.$$arity=0,$.defn(ae,ge,me)}return B},-1),R(e,"$attr_writer",function(j){var V,ee,ae=this;V=A(arguments),ee=V,W(ae);for(var oe=ae.$$prototype,_e=ee.length-1;_e>=0;_e--){var de=ee[_e],ge=$e(de+"="),ve=T(de),me=Z(ve);me.$$parameters=[["req"]],me.$$arity=1,$.prop(oe,ve,B),$.defn(ae,ge,me)}return B},-1),R(e,"$autoload",function(j,V){var ee=this;return W(ee),i("Opal")["$const_name?"](j)||Y.$raise(_("NameError"),"autoload must be constant name: "+j),V==""&&Y.$raise(_("ArgumentError"),"empty file name"),ee.$$const.hasOwnProperty(j)||(ee.$$autoload||(ee.$$autoload={}),$.const_cache_version++,ee.$$autoload[j]={path:V,loaded:!1,required:!1,success:!1,exception:!1},ee.$const_added&&!ee.$const_added.$$pristine&&ee.$const_added(j)),B}),R(e,"$autoload?",function(j){var V=this;if(V.$$autoload&&V.$$autoload[j]&&!V.$$autoload[j].required&&!V.$$autoload[j].success)return V.$$autoload[j].path;for(var ee=V.$ancestors(),ae=0,oe=ee.length;ae<oe;ae++)if(ee[ae].$$autoload&&ee[ae].$$autoload[j]&&!ee[ae].$$autoload[j].required&&!ee[ae].$$autoload[j].success)return ee[ae].$$autoload[j].path;return B}),R(e,"$class_variables",function(){var j=this;return Object.keys($.class_variables(j))}),R(e,"$class_variable_get",function(j){var V=this;return j=O["$class_variable_name!"](j),$.class_variable_get(V,j,!1)}),R(e,"$class_variable_set",function(j,V){var ee=this;return W(ee),j=O["$class_variable_name!"](j),$.class_variable_set(ee,j,V)}),R(e,"$class_variable_defined?",function(j){var V=this;return j=O["$class_variable_name!"](j),$.class_variables(V).hasOwnProperty(j)}),R(e,"$const_added",x(B)),O.$pristine(e,"const_added"),R(e,"$remove_class_variable",function(j){var V=this;if(W(V),j=O["$class_variable_name!"](j),$.hasOwnProperty.call(V.$$cvars,j)){var ee=V.$$cvars[j];return delete V.$$cvars[j],ee}else Y.$raise(_("NameError"),"cannot remove "+j+" for "+V)}),R(e,"$constants",function(j){var V=this;return j==null&&(j=!0),$.constants(V,j)},-1),q(e,"$constants",function(j){var V=this;if(j==null){var ee=(V.$$nesting||[]).concat(S),ae,oe={},_e,de;for(_e=0,de=ee.length;_e<de;_e++)for(ae in ee[_e].$$const)oe[ae]=!0;return Object.keys(oe)}else return $.constants(V,j)},-1),q(e,"$nesting",function(){var j=this;return j.$$nesting||[]}),R(e,"$const_defined?",function(j,V){var ee=this;V==null&&(V=!0),j=i("Opal")["$const_name!"](j),z(j["$=~"](_(O,"CONST_NAME_REGEXP")))||Y.$raise(_("NameError").$new("wrong constant name "+j,j));var ae,oe=[ee],_e,de;for(V&&(oe=oe.concat($.ancestors(ee)),ee.$$is_module&&(oe=oe.concat([S]).concat($.ancestors(S)))),_e=0,de=oe.length;_e<de;_e++)if(ae=oe[_e],ae.$$const[j]!=null||ae.$$autoload&&ae.$$autoload[j]&&!ae.$$autoload[j].required&&!ae.$$autoload[j].success)return!0;return!1},-2),R(e,"$const_get",function(j,V){var ee=this;return V==null&&(V=!0),j=i("Opal")["$const_name!"](j),j.indexOf("::")===0&&j!=="::"&&(j=j.slice(2)),z(j.indexOf("::")!=-1&&j!="::")?h(j.$split("::"),"inject",[ee],function(oe,_e){return oe==null&&(oe=B),_e==null&&(_e=B),oe.$const_get(_e)}):(z(j["$=~"](_(O,"CONST_NAME_REGEXP")))||Y.$raise(_("NameError").$new("wrong constant name "+j,j)),V?$.$$([ee],j):$.const_get_local(ee,j))},-2),R(e,"$const_missing",function(j){var V=this,ee=B;return ee=E(V,S)?j:""+V+"::"+j,Y.$raise(_("NameError").$new("uninitialized constant "+ee,j))}),R(e,"$const_set",function(j,V){var ee=this;return W(ee),j=O["$const_name!"](j),(z(j["$!~"](_(O,"CONST_NAME_REGEXP")))||z(j["$start_with?"]("::")))&&Y.$raise(_("NameError").$new("wrong constant name "+j,j)),L(ee,j,V),V}),R(e,"$public_constant",x(B)),R(e,"$define_method",function P(j,V){var ee=P.$$p||B,ae=this,oe=B,_e=B,de=B;return P.$$p=null,W(ae),V===void 0&&ee===B&&Y.$raise(_("ArgumentError"),"tried to create a Proc object without a block"),j=a(j),z(V!==void 0)&&(ee=H(_("Proc"),oe=V)?V:H(_("Method"),oe)?V.$to_proc().$$unbound:H(_("UnboundMethod"),oe)?$.wrap_method_body(V.$$method):Y.$raise(_("TypeError"),"wrong argument type "+V.$class()+" (expected Proc/Method/UnboundMethod)"),z(!V.$$is_proc)&&(_e=V.$owner(),z(_e.$$is_class)&&u(d(ae,_e))&&(de=z(_e.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+_e,Y.$raise(_("TypeError"),de)))),typeof Proxy<"u"&&(ee.$$proxy_target=ee,ee=new Proxy(ee,{apply:function(ge,ve,me){var be=ge.$$jsid,ie=ge.$$is_lambda;ge.$$jsid=j,ge.$$is_lambda=!0;try{return ge.apply(ve,me)}catch(M){if(M===ge.$$brk||M===ge.$$ret)return M.$v;throw M}finally{ge.$$jsid=be,ge.$$is_lambda=ie}}})),ee.$$jsid=j,ee.$$s=null,ee.$$def=ee,ee.$$define_meth=!0,$.defn(ae,$e(j),ee)},-2),R(e,"$freeze",function(){var j=this;return z(j["$frozen?"]())?j:(j.hasOwnProperty("$$base_module")||D(j,"$$base_module",null),p(j))}),R(e,"$remove_method",function(j){var V,ee,ae=this;V=A(arguments),ee=V;for(var oe=0;oe<ee.length;oe++){var _e=a(ee[oe]);W(ae),$.rdef(ae,"$"+_e)}return ae},-1),R(e,"$singleton_class?",function(){var j=this;return!!j.$$is_singleton}),R(e,"$include",function(j){var V,ee,ae=this;V=A(arguments),ee=V;for(var oe=ee.length-1;oe>=0;oe--){var _e=ee[oe];_e.$$is_module||Y.$raise(_("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$append_features(ae),_e.$included(ae)}return ae},-1),R(e,"$included_modules",function(){var j=this;return $.included_modules(j)}),R(e,"$include?",function(j){var V=this;j.$$is_module||Y.$raise(_("TypeError"),"wrong argument type "+j.$class()+" (expected Module)");var ee,ae,oe,_e=$.ancestors(V);for(ee=0,ae=_e.length;ee<ae;ee++)if(oe=_e[ee],oe===j&&oe!==V)return!0;return!1}),R(e,"$instance_method",function(j){var V=this,ee=V.$$prototype[$e(j)];return(!ee||ee.$$stub)&&Y.$raise(_("NameError").$new("undefined method `"+j+"' for class `"+V.$name()+"'",j)),_("UnboundMethod").$new(V,ee.$$owner||V,ee,j)}),R(e,"$instance_methods",function(j){var V=this;return j==null&&(j=!0),z(j)?$.instance_methods(V):$.own_instance_methods(V)},-1),R(e,"$included",x(B)),R(e,"$extended",x(B)),R(e,"$extend_object",function(j){return W(j),B}),R(e,"$method_added",function(j){return A(arguments),B},-1),R(e,"$method_removed",function(j){return A(arguments),B},-1),R(e,"$method_undefined",function(j){return A(arguments),B},-1),R(e,"$module_eval",function P(j){var V=P.$$p||B,ee,ae,oe,_e=this,de=B,ge=B,ve=B,me=B,be=B,ie=B;P.$$p=null,ee=A(arguments),ae=ee,z(V["$nil?"]())&&z(!!$.compile)?(z(I(1,3,!1)["$cover?"](ae.$size()))||Y.$raise(_("ArgumentError"),"wrong number of arguments (0 for 1..3)"),oe=[].concat(C(ae)),de=oe[0]==null?B:oe[0],ge=oe[1]==null?B:oe[1],oe[2]==null||oe[2],ve=new Map([["file",z(me=ge)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),ie=O.$compile(de,be),V=h(Y,"proc",[],function X(){var Q=X.$$s==null?this:X.$$s;return new Function("Opal,self","return "+ie)($,Q)},{$$s:_e})):z(ae["$any?"]())&&Y.$raise(_("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var M=V.$$s,K;return V.$$s=null,K=V.apply(_e,[_e]),V.$$s=M,K},-1),R(e,"$module_exec",function P(j){var V=P.$$p||B,ee,ae,oe=this;P.$$p=null,ee=A(arguments),ae=ee,V===B&&Y.$raise(_("LocalJumpError"),"no block given");var _e=V.$$s,de;return V.$$s=null,de=V.apply(oe,ae),V.$$s=_e,de},-1),R(e,"$method_defined?",function(j){var V=this,ee=V.$$prototype[$e(j)];return!!ee&&!ee.$$stub}),R(e,"$module_function",function(j){var V,ee,ae=this;if(V=A(arguments),ee=V,W(ae),ee.length===0)return ae.$$module_function=!0,B;for(var oe=0,_e=ee.length;oe<_e;oe++){var de=ee[oe],ge=$e(de),ve=ae.$$prototype[ge];$.defs(ae,ge,ve)}return ee.length===1?ee[0]:ee},-1),R(e,"$name",function(){var j=this;if(j.$$full_name)return j.$$full_name;for(var V=[],ee=j;ee;){if(ee.$$name===B||ee.$$name==null)return B;if(V.unshift(ee.$$name),ee=ee.$$base_module,ee===S)break}return V.length===0?B:j.$$full_name=V.join("::")}),R(e,"$prepend",function(j){var V,ee,ae=this;V=A(arguments),ee=V,ee.length===0&&Y.$raise(_("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var oe=ee.length-1;oe>=0;oe--){var _e=ee[oe];_e.$$is_module||Y.$raise(_("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$prepend_features(ae),_e.$prepended(ae)}return ae},-1),R(e,"$prepend_features",function(j){var V=this;return W(j),V.$$is_module||Y.$raise(_("TypeError"),"wrong argument type "+V.$class()+" (expected Module)"),$.prepend_features(V,j),V}),R(e,"$prepended",x(B)),R(e,"$remove_const",function(j){var V=this;return W(V),$.const_remove(V,j)}),R(e,"$to_s",function(){var j=this,V=B;return z(V=$.Module.$name.call(j))?V:"#<"+(j.$$is_module?"Module":"Class")+":0x"+j.$__id__().$to_s(16)+">"}),R(e,"$undef_method",function(j){var V,ee,ae=this;V=A(arguments),ee=V;for(var oe=0;oe<ee.length;oe++){var _e=a(ee[oe]);W(ae),$.udef(ae,"$"+_e)}return ae},-1),R(e,"$instance_variables",function(){var j=this,V=B;V=($.Module.$$nesting=t,j.$constants());var ee=[];return J(j,function(ae){ae!=="constructor"&&!V["$include?"](ae)&&ee.push("@"+ae)}),ee});function l(P,j){var V,ee=$.own_instance_methods(P);for(V=0;V<ee.length;V++){var ae=ee[V],oe=$e(ae),_e=P.$$prototype[oe],de=$.wrap_method_body(_e);de.$$jsid=ae,$.defn(j,oe,de)}}function v(P,j){for(var V=P.$$own_included_modules,ee=V.length-1;ee>=0;ee--)$.append_features(V[ee],j)}function N(P,j){for(var V=P.$$own_prepended_modules,ee=V.length-1;ee>=0;ee--)$.prepend_features(V[ee],j)}return R(e,"$initialize_copy",function(j){var V=this;return l(j,V),v(j,V),N(j,V),V.$$cloned_from=j.$$cloned_from.concat(j),V.$copy_class_variables(j),V.$copy_constants(j)}),R(e,"$initialize_dup",function P(j){var V=P.$$p||B,ee=this;return P.$$p=null,g(ee,c(ee,"initialize_dup",P,!1,!0),"initialize_dup",[j],V),ee.$copy_singleton_methods(j)}),R(e,"$copy_class_variables",function(j){var V=this;for(var ee in j.$$cvars)V.$$cvars[ee]=j.$$cvars[ee]}),R(e,"$copy_constants",function(j){var V=this,ee,ae=j.$$const;for(ee in ae)L(V,ee,ae[ee])}),R(e,"$refine",function P(j){var V=P.$$p||B,ee,ae=this,oe=B,_e=B,de=B;return P.$$p=null,ee=[ae,B,B],oe=ee[0],_e=ee[1],de=ee[2],de=$.id(j),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?_e=ae.$$refine_modules[de]=_("Refinement").$new():_e=ae.$$refine_modules[de],_e.refinement_module=oe,_e.refined_class=j,h(_e,"class_exec",[],V.$to_proc()),_e}),R(e,"$refinements",function(){var j=this,V=j.$$refine_modules,ee=new Map;if(typeof V>"u")return ee;for(var ae in V)ee["$[]="](V[ae].refined_class,V[ae]);return ee}),R(e,"$using",function(j){return Y.$raise("Module#using is not permitted in methods")}),o(e,"class_eval","module_eval"),o(e,"class_exec","module_exec"),o(e,"inspect","to_s")}("::",null,w),function(s,n){var r=G(s,n,"Refinement"),e=r.$$prototype;return e.refinement_module=e.refined_class=B,r.$attr_reader("refined_class"),R(r,"$inspect",function t(){var i=t.$$p||B,a=this;return t.$$p=null,z(a.refinement_module)?"#<refinement:"+a.refined_class.$inspect()+"@"+a.refinement_module.$inspect()+">":g(a,c(a,"inspect",t,!1,!0),"inspect",[],i)})}("::",k)};Opal.modules["corelib/class"]=function($){var z=$.klass,b=$.send,L=$.defs,S=$.def,re=$.ensure_kwargs,Z=$.hash_get,T=$.eqeq,W=$.truthy,p=$.rb_plus,D=$.return_val,$e=$.slice,J=$.send2,G=$.find_super,O=$.Kernel,Y=$.alias,q=$.top,h=[],R=$.nil,H=$.$$$;return $.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),q.$require("corelib/module"),function(k,F,m){var A=z(k,F,"Class"),C=[A].concat(m),x=$.$r(C);return L(A,"$new",function E(u){var d=E.$$p||R;if(E.$$p=null,u==null&&(u=x("Object")),!u.$$is_class)throw $.TypeError.$new("superclass must be a Class");var I=$.allocate_class(R,u);return u.$inherited(I),d!==R&&b(I,"class_eval",[],d.$to_proc()),I},-1),S(A,"$allocate",function(){var u=this,d=new u.$$constructor;return d.$$id=$.uid(),d}),S(A,"$clone",function(u){var d,I=this,g=R;return u=re(u),d=Z(u,"freeze"),d==null&&(d=R),W(d["$nil?"]())||T(d,!0)||T(d,!1)||I.$raise(x("ArgumentError"),"unexpected value for freeze: "+d.$class()),g=$.allocate_class(R,I.$$super),g.$copy_instance_variables(I),g.$copy_singleton_methods(I),g.$initialize_clone(I,new Map([["freeze",d]])),(T(d,!0)||W(d["$nil?"]())&&W(I["$frozen?"]()))&&g.$freeze(),g},-1),S(A,"$dup",function(){var u=this,d=R;return d=$.allocate_class(R,u.$$super),d.$copy_instance_variables(u),d.$initialize_dup(u),d}),S(A,"$descendants",function(){var u=this;return p(u.$subclasses(),b(u.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),S(A,"$inherited",D(R)),S(A,"$new",function E(u){var d=E.$$p||R,I,g,c=this;E.$$p=null,I=$e(arguments),g=I;var o=c.$allocate();return $.send(o,o.$initialize,g,d),o},-1),S(A,"$subclasses",function(){var u=this;if(typeof WeakRef<"u"){var d,I,g=[];for(d=0;d<u.$$subclasses.length;d++)I=u.$$subclasses[d].deref(),I!==void 0&&g.push(I);return g}else return u.$$subclasses}),S(A,"$superclass",function(){var u=this;return u.$$super||R}),S(A,"$to_s",function E(){E.$$p;var u=this;E.$$p=null;var d=u.$$singleton_of;return d&&d.$$is_a_module?"#<Class:"+d.$name()+">":d?"#<Class:#<"+d.$$class.$name()+":0x"+$.id(d).$to_s(16)+">>":J(u,G(u,"to_s",E,!1,!0),"to_s",[],null)}),S(A,"$attached_object",function(){var u=this;if(u.$$singleton_of!=null)return u.$$singleton_of;O.$raise(H("TypeError"),"`"+u+"' is not a singleton class")}),Y(A,"inspect","to_s")}("::",null,h)};Opal.modules["corelib/basic_object"]=function($){var z=$.klass,b=$.slice,L=$.def,S=$.alias,re=$.return_val,Z=$.Opal,T=$.truthy,W=$.range,p=$.Kernel,D=$.to_a,$e=$.send,J=$.eqeq,G=$.rb_ge,O=$.nil,Y=$.$$$;return $.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(q,h){var R=z(q,h,"BasicObject");return L(R,"$initialize",function(k){return b(arguments),O},-1),L(R,"$==",function(k){var F=this;return F===k}),L(R,"$eql?",function(k){var F=this;return F["$=="](k)}),S(R,"equal?","=="),L(R,"$__id__",function(){var k=this;return k.$$id!=null||$.prop(k,"$$id",$.uid()),k.$$id}),L(R,"$__send__",function H(k,F){var m=H.$$p||O,A,C,x=this;H.$$p=null,A=b(arguments,1),C=A,k.$$is_string||x.$raise(Y("TypeError"),""+x.$inspect()+" is not a symbol nor a string");var E=x[$.jsid(k)];return E?(m!==O&&(E.$$p=m),E.apply(x,C)):(m!==O&&(x.$method_missing.$$p=m),x.$method_missing.apply(x,[k].concat(C)))},-2),L(R,"$!",re(!1)),Z.$pristine("!"),L(R,"$!=",function(k){var F=this;return F["$=="](k)["$!"]()}),L(R,"$instance_eval",function H(k){var F=H.$$p||O,m,A,C,x=this,E=O,u=O,d=O,I=O,g=O,c=O;if(H.$$p=null,m=b(arguments),A=m,T(F["$nil?"]())&&T(!!$.compile))T(W(1,3,!1)["$cover?"](A.$size()))||p.$raise(Y("ArgumentError"),"wrong number of arguments (0 for 1..3)"),C=[].concat(D(A)),E=C[0]==null?O:C[0],u=C[1]==null?O:C[1],C[2]==null||C[2],d=new Map([["file",T(I=u)?I:"(eval)"],["eval",!0]]),g=new Map([["arity_check",!1]]).$merge(d),c=Z.$compile(E,g),F=$e(p,"proc",[],function B(){var _=B.$$s==null?this:B.$$s;return new Function("Opal,self","return "+c)($,_)},{$$s:x});else{if(T(F["$nil?"]())&&T(G(A.$length(),1))&&J(A.$first()["$[]"](0),"@"))return x.$instance_variable_get(A.$first());T(A["$any?"]())&&p.$raise(Y("ArgumentError"),"wrong number of arguments ("+A.$size()+" for 0)")}var o=F.$$s,w;if(F.$$s=null,x.$$is_a_module){x.$$eval=!0;try{w=F.call(x,x)}finally{x.$$eval=!1}}else w=F.call(x,x);return F.$$s=o,w},-1),L(R,"$instance_exec",function H(k){var F=H.$$p||O,m,A,C=this;H.$$p=null,m=b(arguments),A=m,T(F)||p.$raise(Y("ArgumentError"),"no block given");var x=F.$$s,E;if(F.$$s=null,C.$$is_a_module){C.$$eval=!0;try{E=F.apply(C,A)}finally{C.$$eval=!1}}else E=F.apply(C,A);return F.$$s=x,E},-1),L(R,"$singleton_method_added",function(k){return b(arguments),O},-1),L(R,"$singleton_method_removed",function(k){return b(arguments),O},-1),L(R,"$singleton_method_undefined",function(k){return b(arguments),O},-1),L(R,"$method_missing",function H(k,F){H.$$p;var m,A,C=this,x=O;return H.$$p=null,m=b(arguments,1),A=m,x=Z.$inspect(C),p.$raise(Y("NoMethodError").$new("undefined method `"+k+"' for "+x,k,A),O,p.$caller(1))},-2),Z.$pristine(R,"method_missing"),L(R,"$respond_to_missing?",function(k,F){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function($){var z=$.truthy,b=$.coerce_to,L=$.respond_to,S=$.Opal,re=$.deny_frozen_access,Z=$.freeze,T=$.freeze_props,W=$.jsid,p=$.each_ivar,D=$.module,$e=$.return_val,J=$.def,G=$.Kernel,O=$.gvars,Y=$.slice,q=$.send,h=$.to_a,R=$.ensure_kwargs,H=$.hash_get,k=$.eqeq,F=$.rb_plus,m=$.extract_kwargs,A=$.eqeqeq,C=$.return_self,x=$.rb_le,E=$.rb_lt,u=$.Object,d=$.alias,I=$.klass,g=[],c=$.nil,o=$.$$$;return $.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(w,B){var _=D(w,"Kernel"),s=[_].concat(B),n=$.$r(s);J(_,"$=~",$e(!1)),J(_,"$!~",function(t){var i=this;return i["$=~"](t)["$!"]()}),J(_,"$===",function(t){var i=this,a=c;return z(a=i.$object_id()["$=="](t.$object_id()))?a:i["$=="](t)}),J(_,"$<=>",function(t){var i=this;i.$$comparable=!0;var a=i["$=="](t);return a&&a!==c?0:c}),J(_,"$method",function(t){var i=this,a=i[W(t)];return(!a||a.$$stub)&&G.$raise(o("NameError").$new("undefined method `"+t+"' for class `"+i.$class()+"'",t)),o("Method").$new(i,a.$$owner||i.$class(),a,t)}),J(_,"$methods",function(t){var i=this;return t==null&&(t=!0),z(t)?$.methods(i):$.own_methods(i)},-1),J(_,"$public_methods",function(t){var i=this;return t==null&&(t=!0),z(t)?$.methods(i):$.receiver_methods(i)},-1),J(_,"$Array",function(t){var i;return t===c?[]:t.$$is_array?t:(i=S["$coerce_to?"](t,o("Array"),"to_ary"),i!==c||(i=S["$coerce_to?"](t,o("Array"),"to_a"),i!==c)?i:[t])}),J(_,"$at_exit",function e(){var t=e.$$p||c,i=c;return O.__at_exit__==null&&(O.__at_exit__=c),e.$$p=null,O.__at_exit__=z(i=O.__at_exit__)?i:[],O.__at_exit__["$<<"](t),t}),J(_,"$caller",function(t,i){t==null&&(t=1),i==null&&(i=c);var a,l;a=new Error().$backtrace(),l=[];for(var v=t+1,N=a.length;v<N;v++)a[v].match(/runtime\.js/)||l.push(a[v]);return i!=c&&(l=l.slice(0,i)),l},-1),J(_,"$caller_locations",function(t){var i,a,l=this;return i=Y(arguments),a=i,q(q(l,"caller",h(a)),"map",[],function(N){return N==null&&(N=c),o(o(o("Thread"),"Backtrace"),"Location").$new(N)})},-1),J(_,"$class",function(){var t=this;return t.$$class}),J(_,"$copy_instance_variables",function(t){var i=this,a=Object.keys(t),l,v,N;for(l=0,v=a.length;l<v;l++)N=a[l],N.charAt(0)!=="$"&&t.hasOwnProperty(N)&&(i[N]=t[N])}),J(_,"$copy_singleton_methods",function(t){var i=this,a,l,v,N;if(t.hasOwnProperty("$$meta")&&t.$$meta!==null){var P=$.get_singleton_class(t),j=$.get_singleton_class(i);for(v=Object.getOwnPropertyNames(P.$$prototype),a=0,N=v.length;a<N;a++)l=v[a],$.is_method(l)&&(j.$$prototype[l]=P.$$prototype[l]);j.$$const=Object.assign({},P.$$const),Object.setPrototypeOf(j.$$prototype,Object.getPrototypeOf(P.$$prototype))}for(a=0,v=Object.getOwnPropertyNames(t),N=v.length;a<N;a++)l=v[a],l.charAt(0)==="$"&&l.charAt(1)!=="$"&&t.hasOwnProperty(l)&&(i[l]=t[l])}),J(_,"$clone",function(t){var i,a=this,l=c;return t=R(t),i=H(t,"freeze"),i==null&&(i=c),z(i["$nil?"]())||k(i,!0)||k(i,!1)||a.$raise(n("ArgumentError"),"unexpected value for freeze: "+i.$class()),l=a.$class().$allocate(),l.$copy_instance_variables(a),l.$copy_singleton_methods(a),l.$initialize_clone(a,new Map([["freeze",i]])),(k(i,!0)||z(i["$nil?"]())&&z(a["$frozen?"]()))&&l.$freeze(),l},-1),J(_,"$initialize_clone",function(t,i){var a=this;return i=R(i),H(i,"freeze"),a.$initialize_copy(t),a},-2),J(_,"$define_singleton_method",function e(t,i){var a=e.$$p||c,l=this;return e.$$p=null,q(l.$singleton_class(),"define_method",[t,i],a.$to_proc())},-2),J(_,"$dup",function(){var t=this,i=c;return i=t.$class().$allocate(),i.$copy_instance_variables(t),i.$initialize_dup(t),i}),J(_,"$initialize_dup",function(t){var i=this;return i.$initialize_copy(t)}),J(_,"$enum_for",function e(t,i){var a=e.$$p||c,l,v,N,P=this;return e.$$p=null,l=Y(arguments),l.length>0&&(v=l.shift()),v==null&&(v="each"),N=l,q(o("Enumerator"),"for",[P,v].concat(h(N)),a.$to_proc())},-1),J(_,"$equal?",function(t){var i=this;return i===t}),J(_,"$exit",function(t){var i=c,a=c;for(O.__at_exit__==null&&(O.__at_exit__=c),t==null&&(t=!0),O.__at_exit__=z(i=O.__at_exit__)?i:[];!z(O.__at_exit__["$empty?"]());)a=O.__at_exit__.$pop(),a.$call();return t.$$is_boolean?t=t?0:1:t=b(t,o("Integer"),"to_int"),$.exit(t),c},-1),J(_,"$extend",function(t){var i,a,l=this;i=Y(arguments),a=i,a.length==0&&l.$raise(o("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),re(l);for(var v=l.$singleton_class(),N=a.length-1;N>=0;N--){var P=a[N];P.$$is_module||G.$raise(o("TypeError"),"wrong argument type "+P.$class()+" (expected Module)"),P.$append_features(v),P.$extend_object(l),P.$extended(l)}return l},-1),J(_,"$freeze",function(){var t=this;return z(t["$frozen?"]())?t:typeof t=="object"?(T(t),Z(t)):t}),J(_,"$frozen?",function(){var t=this;switch(typeof t){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return t.$$frozen||!1;default:return!1}}),J(_,"$gets",function(t){var i,a;return O.stdin==null&&(O.stdin=c),i=Y(arguments),a=i,q(O.stdin,"gets",h(a))},-1),J(_,"$hash",function(){var t=this;return t.$__id__()}),J(_,"$initialize_copy",$e(c));var r=[];return J(_,"$inspect",function(){var t=this,i=c,a=c,l=c,v=c;return function(){try{try{return i="",a=t.$__id__(),z(r["$include?"](a))?i=" ...":(r["$<<"](a),l=!0,q(t.$instance_variables(),"each",[],function N(P){var j=N.$$s==null?this:N.$$s,V=c,ee=c;return P==null&&(P=c),V=j.$instance_variable_get(P),ee=n("Opal").$inspect(V),i=F(i," "+P+"="+ee)},{$$s:t})),"#<"+t.$class()+":0x"+a.$to_s(16)+i+">"}catch(N){if($.rescue(N,[n("StandardError")])){v=N;try{return"#<"+t.$class()+":0x"+a.$to_s(16)+">"}finally{$.pop_exception(N)}}else throw N}}finally{z(l)&&r.$pop()}}()}),J(_,"$instance_of?",function(t){var i=this;return!t.$$is_class&&!t.$$is_module&&G.$raise(o("TypeError"),"class or module required"),i.$$class===t}),J(_,"$instance_variable_defined?",function(t){var i=this;return t=S["$instance_variable_name!"](t),$.hasOwnProperty.call(i,t.substr(1))}),J(_,"$instance_variable_get",function(t){var i=this;t=S["$instance_variable_name!"](t);var a=i[$.ivar(t.substr(1))];return a??c}),J(_,"$instance_variable_set",function(t,i){var a=this;return re(a),t=S["$instance_variable_name!"](t),a[$.ivar(t.substr(1))]=i}),J(_,"$remove_instance_variable",function(t){var i=this;t=S["$instance_variable_name!"](t);var a=$.ivar(t.substr(1)),l;return i.hasOwnProperty(a)?(l=i[a],delete i[a],l):G.$raise(o("NameError"),"instance variable "+t+" not defined")}),J(_,"$instance_variables",function(){var t=this,i=[];return p(t,function(a){a.substr(-1)==="$"&&(a=a.slice(0,a.length-1)),i.push("@"+a)}),i}),J(_,"$Integer",function(t,i,a){var l,v,N,P;l=Y(arguments,1),v=m(l),v=R(v),l.length>0&&(N=l.shift()),P=H(v,"exception"),P==null&&(P=!0);var j,V,ee;if(P=z(P),!t.$$is_string){if(N!==void 0)if(P)G.$raise(o("ArgumentError"),"base specified for non string value");else return c;if(t===c)if(P)G.$raise(o("TypeError"),"can't convert nil into Integer");else return c;if(t.$$is_number){if(t===1/0||t===-1/0||isNaN(t))if(P)G.$raise(o("FloatDomainError"),t);else return c;return Math.floor(t)}if(t["$respond_to?"]("to_int")&&(j=t.$to_int(),$.is_a(j,o("Integer")))||t["$respond_to?"]("to_i")&&(j=t.$to_i(),$.is_a(j,o("Integer"))))return j;if(P)G.$raise(o("TypeError"),"can't convert "+t.$class()+" into Integer");else return c}if(t==="0")return 0;if(N===void 0)N=0;else if(N=b(N,o("Integer"),"to_int"),N===1||N<0||N>36)if(P)G.$raise(o("ArgumentError"),"invalid radix "+N);else return c;if(V=t.toLowerCase(),V=V.replace(/(\d)_(?=\d)/g,"$1"),V=V.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,oe,_e){switch(_e){case"0b":if(N===0||N===2)return N=2,oe;case"0":case"0o":if(N===0||N===8)return N=8,oe;case"0d":if(N===0||N===10)return N=10,oe;case"0x":if(N===0||N===16)return N=16,oe}if(P)G.$raise(o("ArgumentError"),'invalid value for Integer(): "'+t+'"');else return c}),N=N===0?10:N,ee="0-"+(N<=10?N-1:"9a-"+String.fromCharCode(97+(N-11))),!new RegExp("^\\s*[+-]?["+ee+"]+\\s*$").test(V))if(P)G.$raise(o("ArgumentError"),'invalid value for Integer(): "'+t+'"');else return c;if(j=parseInt(V,N),isNaN(j))if(P)G.$raise(o("ArgumentError"),'invalid value for Integer(): "'+t+'"');else return c;return j},-2),J(_,"$Float",function(t,i){var a;i=R(i),a=H(i,"exception"),a==null&&(a=!0);var l;if(a=z(a),t===c)if(a)G.$raise(o("TypeError"),"can't convert nil into Float");else return c;if(t.$$is_string){if(l=t.toString(),l=l.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(l))return G.$Integer(l);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(l))if(a)G.$raise(o("ArgumentError"),'invalid value for Float(): "'+t+'"');else return c;return parseFloat(l)}return a?S["$coerce_to!"](t,o("Float"),"to_f"):b(t,o("Float"),"to_f")},-2),J(_,"$Hash",function(t){return z(t["$nil?"]())||k(t,[])?new Map:A(o("Hash"),t)?t:S["$coerce_to!"](t,o("Hash"),"to_hash")}),J(_,"$is_a?",function(t){var i=this;return!t.$$is_class&&!t.$$is_module&&G.$raise(o("TypeError"),"class or module required"),$.is_a(i,t)}),J(_,"$itself",C),J(_,"$lambda",function e(){var t=e.$$p||c;return e.$$p=null,$.lambda(t)}),J(_,"$load",function(t){return t=S["$coerce_to!"](t,o("String"),"to_str"),$.load(t)}),J(_,"$loop",function e(){var t=e.$$p||c,i=this,a=c;if(e.$$p=null,t===c)return q(i,"enum_for",["loop"],function(){return o(o("Float"),"INFINITY")});for(;z(!0);)try{$.yieldX(t,[])}catch(l){if($.rescue(l,[o("StopIteration")])){a=l;try{return a.$result()}finally{$.pop_exception(l)}}else throw l}return i}),J(_,"$nil?",$e(!1)),J(_,"$printf",function(t){var i,a,l=this,v=c;return O.stdout==null&&(O.stdout=c),i=Y(arguments),a=i,z(a["$empty?"]())||(v=z(a[0].$$is_string)?O.stdout:a.$shift(),v.$write(q(l,"format",h(a)))),c},-1),J(_,"$proc",function e(){var t=e.$$p||c;return e.$$p=null,z(t)||G.$raise(o("ArgumentError"),"tried to create Proc object without a block"),t.$$is_lambda=!1,t}),J(_,"$puts",function(t){var i,a;return O.stdout==null&&(O.stdout=c),i=Y(arguments),a=i,q(O.stdout,"puts",h(a))},-1),J(_,"$p",function(t){var i,a;return i=Y(arguments),a=i,q(a,"each",[],function(v){return O.stdout==null&&(O.stdout=c),v==null&&(v=c),O.stdout.$puts(v.$inspect())}),z(x(a.$length(),1))?a["$[]"](0):a},-1),J(_,"$print",function(t){var i,a;return O.stdout==null&&(O.stdout=c),i=Y(arguments),a=i,q(O.stdout,"print",h(a))},-1),J(_,"$readline",function(t){var i,a;return O.stdin==null&&(O.stdin=c),i=Y(arguments),a=i,q(O.stdin,"readline",h(a))},-1),J(_,"$warn",function(t,i){var a,l,v,N,P,j,V=this,ee=c;return O.VERBOSE==null&&(O.VERBOSE=c),O.stderr==null&&(O.stderr=c),a=Y(arguments),l=m(a),l=R(l),v=a,N=H(l,"uplevel"),N==null&&(N=c),z(N)&&(N=S["$coerce_to!"](N,o("Integer"),"to_str"),z(E(N,0))&&G.$raise(o("ArgumentError"),"negative level ("+N+")"),ee=(P=(j=V.$caller(F(N,1),1).$first(),j===c||j==null?c:j.$split(":in `")),P===c||P==null?c:P.$first()),z(ee)&&(ee=""+ee+": "),v=q(v,"map",[],function(oe){return oe==null&&(oe=c),""+ee+"warning: "+oe})),z(O.VERBOSE["$nil?"]())||z(v["$empty?"]())?c:q(O.stderr,"puts",h(v))},-1),J(_,"$raise",function(t,i,a){throw O["!"]==null&&(O["!"]=c),i==null&&(i=c),a==null&&(a=c),t==null&&O["!"]!==c?O["!"]:(t==null?t=o("RuntimeError").$new(""):L(t,"$to_str")?t=o("RuntimeError").$new(t.$to_str()):t.$$is_class&&L(t,"$exception")?t=t.$exception(i):t.$$is_exception||(t=o("TypeError").$new("exception class/object expected")),a!==c&&t.$set_backtrace(a),O["!"]!==c&&$.exceptions.push(O["!"]),O["!"]=t,t)},-1),J(_,"$rand",function(t){return t===void 0?o(o("Random"),"DEFAULT").$rand():(t.$$is_number&&(t<0&&(t=Math.abs(t)),t%1!==0&&(t=t.$to_i()),t===0&&(t=void 0)),o(o("Random"),"DEFAULT").$rand(t))},-1),J(_,"$respond_to?",function(t,i){var a=this;i==null&&(i=!1);var l=a[W(t)];return typeof l=="function"&&!l.$$stub?!0:a["$respond_to_missing?"].$$pristine===!0?!1:a["$respond_to_missing?"](t,i)},-2),J(_,"$respond_to_missing?",function(t,i){return!1},-2),S.$pristine(_,"respond_to?","respond_to_missing?"),J(_,"$require",function(t){return typeof t!="string"&&$.String&&$.Array&&(t=S["$coerce_to!"](t,o("String"),"to_str")),$.require(t)}),J(_,"$require_relative",function(t){return S["$try_convert!"](t,o("String"),"to_str"),t=o("File").$expand_path(o("File").$join($.current_file,"..",t)),$.require(t)}),J(_,"$require_tree",function(t,i){var a;i=R(i),a=H(i,"autoload"),a==null&&(a=!1);var l=[];t=o("File").$expand_path(t),t=$.normalize(t),t==="."&&(t="");for(var v in $.modules)v["$start_with?"](t)&&(a?l.push([v,!0]):l.push([v,$.require(v)]));return l},-2),J(_,"$singleton_class",function(){var t=this;return $.get_singleton_class(t)}),J(_,"$sleep",function(t){t==null&&(t=c),t===c&&G.$raise(o("TypeError"),"can't convert NilClass into time interval"),t.$$is_number||G.$raise(o("TypeError"),"can't convert "+t.$class()+" into time interval"),t<0&&G.$raise(o("ArgumentError"),"time interval must be positive");for(var i=$.global.performance?function(){return performance.now()}:function(){return new Date},a=i();i()-a<=t*1e3;);return Math.round(t)},-1),J(_,"$srand",function(t){return t==null&&(t=n("Random").$new_seed()),o("Random").$srand(t)},-1),J(_,"$String",function(t){var i=c;return z(i=S["$coerce_to?"](t,o("String"),"to_str"))?i:S["$coerce_to!"](t,o("String"),"to_s")}),J(_,"$tap",function e(){var t=e.$$p||c,i=this;return e.$$p=null,$.yield1(t,i),i}),J(_,"$to_proc",C),J(_,"$to_s",function(){var t=this;return"#<"+t.$class()+":0x"+t.$__id__().$to_s(16)+">"}),J(_,"$catch",function e(t){var i=e.$$p||c,a=c,l=c;e.$$p=null,t==null&&(t=c);try{return t=z(a=t)?a:u.$new(),$.yield1(i,t)}catch(v){if($.rescue(v,[o("UncaughtThrowError")])){l=v;try{return k(l.$tag(),t)?l.$value():G.$raise()}finally{$.pop_exception(v)}}else throw v}},-1),J(_,"$throw",function(t,i){return i==null&&(i=c),G.$raise(o("UncaughtThrowError").$new(t,i))},-2),J(_,"$open",function e(t){var i=e.$$p||c,a,l;return e.$$p=null,a=Y(arguments),l=a,q(o("File"),"open",h(l),i.$to_proc())},-1),J(_,"$yield_self",function e(){var t=e.$$p||c,i=this;return e.$$p=null,t===c?q(i,"enum_for",["yield_self"],$e(1)):$.yield1(t,i)}),d(_,"fail","raise"),d(_,"kind_of?","is_a?"),d(_,"object_id","__id__"),d(_,"public_send","__send__"),d(_,"send","__send__"),d(_,"then","yield_self"),d(_,"to_enum","enum_for")}("::",g),function(w,B){var _=I(w,B,"Object");return delete u.$$prototype.$require,_.$include(G)}("::",null)};Opal.modules["corelib/main"]=function($){var z=$.return_val,b=$.def,L=$.Object,S=$.slice,re=$.Kernel,Z=$.top;return $.nil,$.add_stubs("include,raise"),function(T,W){return b(T,"$to_s",z("main")),b(T,"$include",function(D){return L.$include(D)}),b(T,"$autoload",function(D){var $e,J;return $e=S(arguments),J=$e,$.Object.$autoload.apply($.Object,J)},-1),b(T,"$using",function(D){return re.$raise("main.using is permitted only at toplevel")})}($.get_singleton_class(Z))};Opal.modules["corelib/error/errno"]=function($){var z=$.module,b=$.truthy,L=$.rb_plus,S=$.send2,re=$.find_super,Z=$.def,T=$.klass,W=$.nil,p=$.$$$;return $.add_stubs("+,errno,class,attr_reader"),function(D,$e){var J=z(D,"Errno"),G=W,O=W;G=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],O=W;var Y;for(Y=0;Y<G.length;Y++)(function(){var q=G[Y][0],h=G[Y][1],R=G[Y][2];O=$.klass(J,$.SystemCallError,q),O.errno=R,function(H,k){return Z(H,"$new",function F(m){F.$$p;var A=this,C=W;return F.$$p=null,m==null&&(m=W),C=h,b(m)&&(C=L(C," - "+m)),S(A,re(A,"new",F,!1,!0),"new",[C],null)},-1)}($.get_singleton_class(O))})()}("::"),function(D,$e,J){var G=T(D,$e,"SystemCallError");return Z(G,"$errno",function(){var Y=this;return Y.$class().$errno()}),function(O,Y){return O.$attr_reader("errno")}($.get_singleton_class(G))}("::",p("StandardError"))};Opal.modules["corelib/error"]=function($){var z=$.klass,b=$.slice,L=$.gvars,S=$.defs,re=$.send,Z=$.to_a,T=$.def,W=$.send2,p=$.find_super,D=$.truthy,$e=$.Kernel,J=$.not,G=$.rb_plus,O=$.eqeq,Y=$.Object,q=$.ensure_kwargs,h=$.hash_get,R=$.module,H=[],k=$.nil,F=$.$$$;return $.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(m,A,C){var x=z(m,A,"Exception"),E=[x].concat(C),u=$.$r(E),d=x.$$prototype;d.message=k,$.prop(x.$$prototype,"$$is_exception",!0);var I;Error.stackTraceLimit=100,S(x,"$new",function(o){var w,B,_=this;L["!"]==null&&(L["!"]=k),w=b(arguments),B=w;var s=B.length>0?B[0]:k,n=new _.$$constructor(s);return n.name=_.$$name,n.message=s,n.cause=L["!"],$.send(n,n.$initialize,B),$.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace(n,I),n},-1),I=x.$new,S(x,"$exception",function(o){var w,B,_=this;return w=b(arguments),B=w,re(_,"new",Z(B))},-1),T(x,"$initialize",function(o){var w,B,_=this;return w=b(arguments),B=w,_.message=B.length>0?B[0]:k},-1),T(x,"$copy_instance_variables",function c(o){var w=c.$$p||k,B=this;c.$$p=null,W(B,p(B,"copy_instance_variables",c,!1,!0),"copy_instance_variables",[o],w),B.message=o.message,B.cause=o.cause,B.stack=o.stack});function g(c){for(var o=[],w,B=0;B<c.length;B++){var _=c[B];!_||!_.$$is_string||((w=_.match(/^    at (.*?) \((.*?)\)$/))?o.push(w[2]+":in `"+w[1]+"'"):(w=_.match(/^    at (.*?)$/))?o.push(w[1]+":in `undefined'"):(w=_.match(/^  from (.*?)$/))?o.push(w[1]):(w=_.match(/^(.*?)@(.*?)$/))&&o.push(w[2]+":in `"+w[1]+"'"))}return o}return T(x,"$backtrace",function(){var o=this;if(o.backtrace)return o.backtrace;var w=o.stack;return typeof w<"u"&&w.$$is_string?o.backtrace=g(w.split(`
`)):w?o.backtrace=g(w):[]}),T(x,"$backtrace_locations",function(){var o,w=this;return w.backtrace_locations||(w.backtrace_locations=(o=w.$backtrace(),o===k||o==null?k:re(o,"map",[],function(_){return _==null&&(_=k),F(F(F("Thread"),"Backtrace"),"Location").$new(_)}))),w.backtrace_locations}),T(x,"$cause",function(){var o=this;return o.cause||k}),T(x,"$exception",function(o){var w=this;if(o==null&&(o=k),o===k||w===o)return w;var B=w.$clone();return B.message=o,w.backtrace&&(B.backtrace=w.backtrace.$dup()),B.stack=w.stack,B.cause=w.cause,B},-1),T(x,"$message",function(){var o=this;return o.$to_s()}),T(x,"$full_message",function(o){var w,B=this,_=k,s=k,n=k,r=k,e=k,t=k,i=k,a=k,l=k;return L.stderr==null&&(L.stderr=k),o==null&&(o=k),D(u("Hash","skip_raise")?"constant":k)?(o=new Map([["highlight",L.stderr["$tty?"]()],["order","top"]]).$merge(D(_=o)?_:new Map),w=[o["$[]"]("highlight"),o["$[]"]("order")],s=w[0],n=w[1],D([!0,!1]["$include?"](s))||$e.$raise(F("ArgumentError"),"expected true or false as highlight: "+s),D(["top","bottom"]["$include?"](n))||$e.$raise(F("ArgumentError"),"expected :top or :bottom as order: "+n),D(s)?(r="\x1B[1;4m",e="\x1B[1m",t="\x1B[m"):r=e=t="",i=B.$backtrace().$dup(),(J(i)||D(i["$empty?"]()))&&(i=B.$caller()),a=i.$shift(),l=""+a+": ",l=G(l,""+e+B.$to_s()+" ("+r+B.$class()+t+e+")"+t+`
`),l=G(l,re(i,"map",[],function(N){return N==null&&(N=k),"	from "+N+`
`}).$join()),D(B.$cause())&&(l=G(l,B.$cause().$full_message(new Map([["highlight",s]])))),O(n,"bottom")&&(l=l.$split(`
`).$reverse().$join(`
`),l=G(""+e+"Traceback"+t+` (most recent call last):
`,l)),l):""+B.message+`
`+B.stack},-1),T(x,"$inspect",function(){var o=this,w=k;return w=o.$to_s(),D(w["$empty?"]())?o.$class().$to_s():"#<"+o.$class().$to_s()+": "+o.$to_s()+">"}),T(x,"$set_backtrace",function(o){var w=this,B=!0,_,s;if(o===k)w.backtrace=k,w.stack="";else if(o.$$is_string)w.backtrace=[o],w.stack="  from "+o;else{if(o.$$is_array){for(_=0,s=o.length;_<s;_++)if(!o[_].$$is_string){B=!1;break}}else B=!1;B===!1&&$e.$raise(F("TypeError"),"backtrace must be Array of String"),w.backtrace=o,w.stack=re(o,"map",[],function(r){return r==null&&(r=k),G("  from ",r)}).join(`
`)}return o}),T(x,"$to_s",function(){var o=this,w=k,B=k;return D(w=D(B=o.message)?o.message.$to_s():B)?w:o.$class().$to_s()})}("::",Error,H),z("::",F("Exception"),"ScriptError"),z("::",F("ScriptError"),"SyntaxError"),z("::",F("ScriptError"),"LoadError"),z("::",F("ScriptError"),"NotImplementedError"),z("::",F("Exception"),"SystemExit"),z("::",F("Exception"),"NoMemoryError"),z("::",F("Exception"),"SignalException"),z("::",F("SignalException"),"Interrupt"),z("::",F("Exception"),"SecurityError"),z("::",F("Exception"),"SystemStackError"),z("::",F("Exception"),"StandardError"),z("::",F("StandardError"),"EncodingError"),z("::",F("StandardError"),"ZeroDivisionError"),z("::",F("StandardError"),"NameError"),z("::",F("NameError"),"NoMethodError"),z("::",F("StandardError"),"RuntimeError"),z("::",F("RuntimeError"),"FrozenError"),z("::",F("StandardError"),"LocalJumpError"),z("::",F("StandardError"),"TypeError"),z("::",F("StandardError"),"ArgumentError"),z("::",F("ArgumentError"),"UncaughtThrowError"),z("::",F("StandardError"),"IndexError"),z("::",F("IndexError"),"StopIteration"),z("::",F("StopIteration"),"ClosedQueueError"),z("::",F("IndexError"),"KeyError"),z("::",F("StandardError"),"RangeError"),z("::",F("RangeError"),"FloatDomainError"),z("::",F("StandardError"),"IOError"),z("::",F("IOError"),"EOFError"),z("::",F("StandardError"),"SystemCallError"),z("::",F("StandardError"),"RegexpError"),z("::",F("StandardError"),"ThreadError"),z("::",F("StandardError"),"FiberError"),Y.$autoload("Errno","corelib/error/errno"),function(m,A){var C=z(m,A,"FrozenError");return C.$attr_reader("receiver"),T(C,"$initialize",function x(E,u){var d;x.$$p;var I=this;return x.$$p=null,u=q(u),d=h(u,"receiver"),d==null&&(d=k),W(I,p(I,"initialize",x,!1,!0),"initialize",[E],null),I.receiver=d},-2)}("::",F("RuntimeError")),function(m,A){var C=z(m,A,"UncaughtThrowError"),x=C.$$prototype;return x.tag=k,C.$attr_reader("tag","value"),T(C,"$initialize",function E(u,d){E.$$p;var I=this;return E.$$p=null,d==null&&(d=k),I.tag=u,I.value=d,W(I,p(I,"initialize",E,!1,!0),"initialize",["uncaught throw "+I.tag.$inspect()],null)},-2)}("::",F("ArgumentError")),function(m,A){var C=z(m,A,"NameError");return C.$attr_reader("name"),T(C,"$initialize",function x(E,u){x.$$p;var d=this;return x.$$p=null,u==null&&(u=k),W(d,p(d,"initialize",x,!1,!0),"initialize",[E],null),d.name=u},-2)}("::",null),function(m,A){var C=z(m,A,"NoMethodError");return C.$attr_reader("args"),T(C,"$initialize",function x(E,u,d){x.$$p;var I=this;return x.$$p=null,u==null&&(u=k),d==null&&(d=[]),W(I,p(I,"initialize",x,!1,!0),"initialize",[E,u],null),I.args=d},-2)}("::",null),function(m,A){var C=z(m,A,"StopIteration");return C.$attr_reader("result")}("::",null),function(m,A){var C=z(m,A,"KeyError"),x=C.$$prototype;return x.receiver=x.key=k,T(C,"$initialize",function E(u,d){var I,g;E.$$p;var c=this;return E.$$p=null,d=q(d),I=h(d,"receiver"),I==null&&(I=k),g=h(d,"key"),g==null&&(g=k),W(c,p(c,"initialize",E,!1,!0),"initialize",[u],null),c.receiver=I,c.key=g},-2),T(C,"$receiver",function(){var u=this,d=k;return D(d=u.receiver)?d:$e.$raise(F("ArgumentError"),"no receiver is available")}),T(C,"$key",function(){var u=this,d=k;return D(d=u.key)?d:$e.$raise(F("ArgumentError"),"no key is available")})}("::",null),function(m,A){var C=z(m,A,"LocalJumpError");return C.$attr_reader("exit_value","reason"),T(C,"$initialize",function x(E,u,d){x.$$p;var I=this;return x.$$p=null,u==null&&(u=k),d==null&&(d="noreason"),W(I,p(I,"initialize",x,!1,!0),"initialize",[E],null),I.exit_value=u,I.reason=d},-2)}("::",null),function(m,A){var C=R(m,"JS"),x=[C].concat(A);return z(x[0],null,"Error"),k}("::",H)};Opal.modules["corelib/constants"]=function($){var z=$.const_set;$.nil;var b=$.$$$;return z("::","RUBY_PLATFORM","opal"),z("::","RUBY_ENGINE","opal"),z("::","RUBY_VERSION","3.2.0"),z("::","RUBY_ENGINE_VERSION","1.8.2"),z("::","RUBY_RELEASE_DATE","2023-11-23"),z("::","RUBY_PATCHLEVEL",0),z("::","RUBY_REVISION","0"),z("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),z("::","RUBY_DESCRIPTION","opal "+b("RUBY_ENGINE_VERSION")+" ("+b("RUBY_RELEASE_DATE")+" revision "+b("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function($){var z=$.Object;return $.nil,$.add_stubs("require"),z.$require("corelib/runtime"),z.$require("corelib/helpers"),z.$require("corelib/module"),z.$require("corelib/class"),z.$require("corelib/basic_object"),z.$require("corelib/kernel"),z.$require("corelib/main"),z.$require("corelib/error"),z.$require("corelib/constants")};Opal.modules["corelib/nil"]=function($){var z=$.klass,b=$.Kernel,L=$.def,S=$.return_val,re=$.ensure_kwargs,Z=$.hash_get,T=$.NilClass,W=$.slice,p=$.truthy,D=$.rb_gt,$e=$.alias,J=$.nil,G=$.$$$;return $.add_stubs("raise,name,new,>,length,Rational,to_i"),function(O,Y,q){var h=z(O,Y,"NilClass");return h.$$prototype.$$meta=h,function(R,H){return L(R,"$allocate",function(){var F=this;return b.$raise(G("TypeError"),"allocator undefined for "+F.$name())}),$.udef(R,"$new"),J}($.get_singleton_class(h)),L(h,"$!",S(!0)),L(h,"$&",S(!1)),L(h,"$|",function(H){return H!==!1&&H!==J}),L(h,"$^",function(H){return H!==!1&&H!==J}),L(h,"$==",function(H){return H===J}),L(h,"$dup",S(J)),L(h,"$clone",function(H){return H=re(H),Z(H,"freeze"),J},-1),L(h,"$inspect",S("nil")),L(h,"$nil?",S(!0)),L(h,"$singleton_class",function(){return T}),L(h,"$to_a",function(){return[]}),L(h,"$to_h",function(){return new Map}),L(h,"$to_i",S(0)),L(h,"$to_s",S("")),L(h,"$to_c",function(){return G("Complex").$new(0,0)}),L(h,"$rationalize",function(H){var k,F;return k=W(arguments),F=k,p(D(F.$length(),1))&&b.$raise(G("ArgumentError")),b.$Rational(0,1)},-1),L(h,"$to_r",function(){return b.$Rational(0,1)}),L(h,"$instance_variables",function(){return[]}),$e(h,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function($){var z=$.klass,b=$.Kernel,L=$.def,S=$.return_self,re=$.ensure_kwargs,Z=$.hash_get,T=$.slice,W=$.truthy,p=$.send2,D=$.find_super,$e=$.to_a,J=$.alias,G=$.nil,O=$.$$$;return $.add_stubs("raise,name,==,to_s,__id__"),function(Y,q,h){var R=z(Y,q,"Boolean");$.prop(R.$$prototype,"$$is_boolean",!0);for(var H=["$$class","$$meta"],k=0;k<H.length;k++)Object.defineProperty(R.$$prototype,H[k],{configurable:!0,enumerable:!1,get:function(){return this==!0?$.TrueClass:this==!1?$.FalseClass:$.Boolean}});return Object.defineProperty(R.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:G}}),function(F,m){return L(F,"$allocate",function(){var C=this;return b.$raise(O("TypeError"),"allocator undefined for "+C.$name())}),$.udef(F,"$new"),G}($.get_singleton_class(R)),L(R,"$__id__",function(){var m=this;return m.valueOf()?2:0}),L(R,"$!",function(){var m=this;return m!=!0}),L(R,"$&",function(m){var A=this;return A==!0?m!==!1&&m!==G:!1}),L(R,"$|",function(m){var A=this;return A==!0?!0:m!==!1&&m!==G}),L(R,"$^",function(m){var A=this;return A==!0?m===!1||m===G:m!==!1&&m!==G}),L(R,"$==",function(m){var A=this;return A==!0===m.valueOf()}),L(R,"$singleton_class",function(){var m=this;return m.$$meta}),L(R,"$to_s",function(){var m=this;return m==!0?"true":"false"}),L(R,"$dup",S),L(R,"$clone",function(m){var A=this;return m=re(m),Z(m,"freeze"),A},-1),L(R,"$method_missing",function F(m,A){var C=F.$$p||G,x,E,u=this;F.$$p=null,x=T(arguments,1),E=x;var d=u.$$class.$$prototype[$.jsid(m)];return W(typeof d<"u"&&!d.$$stub)||p(u,D(u,"method_missing",F,!1,!0),"method_missing",[m].concat($e(E)),C),$.send(u,d,E,C)},-2),L(R,"$respond_to_missing?",function(m,A){var C=this,x=C.$$class.$$prototype[$.jsid(m)];return typeof x<"u"&&!x.$$stub},-2),J(R,"eql?","=="),J(R,"equal?","=="),J(R,"inspect","to_s"),J(R,"object_id","__id__")}("::",Boolean),z("::",O("Boolean"),"TrueClass"),z("::",O("Boolean"),"FalseClass"),G};Opal.modules["corelib/comparable"]=function($){var z=$.truthy,b=$.module,L=$.rb_gt,S=$.rb_lt,re=$.eqeqeq,Z=$.Kernel,T=$.def,W=$.nil,p=$.$$$;return $.add_stubs(">,<,===,raise,class,<=>,equal?"),function(D){var $e=b(D,"Comparable"),J=W;function G(q){return $.is_a(q,$.Integer)?q:L(q,0)?1:S(q,0)?-1:0}function O(q,h){var R;re(W,J=h)||re(!0,J)||re(!1,J)||re(p("Integer"),J)||re(p("Float"),J)?R=h.$inspect():R=h.$$class,Z.$raise(p("ArgumentError"),"comparison of "+q.$class()+" with "+R+" failed")}function Y(q,h){var R=q["$<=>"](h);return z(R)||O(q,h),G(R)}return T($e,"$==",function(h){var R=this,H=W;return z(R["$equal?"](h))?!0:R["$<=>"]==$.Kernel["$<=>"]?!1:R.$$comparable?(R.$$comparable=!1,!1):z(H=R["$<=>"](h))?G(H)==0:!1}),T($e,"$>",function(h){var R=this;return Y(R,h)>0}),T($e,"$>=",function(h){var R=this;return Y(R,h)>=0}),T($e,"$<",function(h){var R=this;return Y(R,h)<0}),T($e,"$<=",function(h){var R=this;return Y(R,h)<=0}),T($e,"$between?",function(h,R){var H=this;return!(z(S(H,h))||z(L(H,R)))}),T($e,"$clamp",function(h,R){var H=this;R==null&&(R=W);var k,F;if(R===W&&($.is_a(h,$.Range)||Z.$raise(p("TypeError"),"wrong argument type "+h.$class()+" (expected Range)"),F=h.excl,R=h.end,h=h.begin,R!==W&&F&&Z.$raise(p("ArgumentError"),"cannot clamp with an exclusive range")),h!==W&&R!==W&&Y(h,R)>0&&Z.$raise(p("ArgumentError"),"min argument must be smaller than max argument"),h!==W){if(k=Y(H,h),k==0)return H;if(k<0)return h}return R!==W&&(k=Y(H,R),k>0)?R:H},-2)}("::")};Opal.modules["corelib/regexp"]=function($){var z=$.coerce_to,b=$.prop,L=$.freeze,S=$.klass,re=$.const_set,Z=$.send2,T=$.find_super,W=$.def,p=$.truthy,D=$.gvars,$e=$.slice,J=$.Kernel,G=$.Opal,O=$.alias,Y=$.send,q=$.regexp,h=$.rb_plus,R=$.ensure_kwargs,H=$.hash_get,k=$.rb_ge,F=$.to_a,m=$.eqeqeq,A=$.rb_minus,C=$.return_ivar,x=[],E=$.nil,u=$.$$$;return $.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),S("::",u("StandardError"),"RegexpError"),function(d,I,g){var c=S(d,I,"Regexp"),o=[c].concat(g),w=$.$r(o);return re(c,"IGNORECASE",1),re(c,"EXTENDED",2),re(c,"MULTILINE",4),$.prop(c.$$prototype,"$$is_regexp",!0),function(B,_){var s=[B].concat(_),n=$.$r(s);return W(B,"$allocate",function r(){var e=r.$$p||E,t=this,i=E;return r.$$p=null,i=Z(t,T(t,"allocate",r,!1,!0),"allocate",[],e),i.uninitialized=!0,i}),W(B,"$escape",function(e){return e=z(e,u("String"),"to_str"),$.escape_regexp(e)}),W(B,"$last_match",function(e){return D["~"]==null&&(D["~"]=E),e==null&&(e=E),p(e["$nil?"]())?D["~"]:p(D["~"])?D["~"]["$[]"](e):E},-1),W(B,"$union",function(e){var t,i,a=this;t=$e(arguments),i=t;var l,v,N,P,j;if(i.length==0)return/(?!)/;if(i.length==1&&i[0].$$is_regexp)return i[0];l=i[0].$$is_array,i.length>1&&l&&J.$raise(u("TypeError"),"no implicit conversion of Array into String"),l&&(i=i[0]),P=void 0,v=[];for(var V=0;V<i.length;V++)N=i[V],N.$$is_string?v.push(a.$escape(N)):N.$$is_regexp?(j=N.$options(),P!=null&&P!=j&&J.$raise(u("TypeError"),"All expressions must use the same options"),P=j,v.push("("+N.source+")")):v.push(a.$escape(N.$to_str()));return a.$new(v.$join("|"),P)},-1),W(B,"$new",function(e,t){if(e.$$is_regexp)return new RegExp(e);if(e=G["$coerce_to!"](e,u("String"),"to_str"),e.charAt(e.length-1)==="\\"&&e.charAt(e.length-2)!=="\\"&&J.$raise(u("RegexpError"),"too short escape sequence: /"+e+"/"),e=e.replace("\\A","^").replace("\\z","$"),t===void 0||t["$!"]())return new RegExp(e);if(t.$$is_number){var i="";n("IGNORECASE")&t&&(i+="i"),n("MULTILINE")&t&&(i+="m"),t=i}else t="i";return new RegExp(e,t)},-2),O(B,"compile","new"),O(B,"quote","escape")}($.get_singleton_class(c),o),W(c,"$==",function(_){var s=this;return _ instanceof RegExp&&s.toString()===_.toString()}),W(c,"$===",function(_){var s=this;return s.$match(G["$coerce_to?"](_,u("String"),"to_str"))!==E}),W(c,"$=~",function(_){var s=this,n=E;return D["~"]==null&&(D["~"]=E),p(n=s.$match(_))?D["~"].$begin(0):n}),W(c,"$freeze",function(){var _=this;return p(_["$frozen?"]())?_:(_.hasOwnProperty("$$g")||b(_,"$$g",null),_.hasOwnProperty("$$gm")||b(_,"$$gm",null),L(_))}),W(c,"$inspect",function(){var _=this,s=/^\/(.*)\/([^\/]*)$/,n=_.toString(),r=s.exec(n);if(r){for(var e=r[1],t=r[2],i=e.split(""),a=i.length,l=!1,v="",N=0;N<a;N++){var P=i[N];!l&&P=="/"&&(v=v.concat("\\")),v=v.concat(P),P=="\\"?l?l=!1:l=!0:l=!1}return"/"+v+"/"+t}else return n}),W(c,"$match",function B(_,s){var n=B.$$p||E,r=this;if(D["~"]==null&&(D["~"]=E),B.$$p=null,r.uninitialized&&J.$raise(u("TypeError"),"uninitialized Regexp"),s===void 0){if(_===E)return D["~"]=E;var e=r.exec(z(_,u("String"),"to_str"));return e?(D["~"]=u("MatchData").$new(r,e),n===E?D["~"]:$.yield1(n,D["~"])):D["~"]=E}if(s=z(s,u("Integer"),"to_int"),_===E||(_=z(_,u("String"),"to_str"),s<0&&(s+=_.length,s<0)))return D["~"]=E;for(var t,i=$.global_regexp(r);;){if(t=i.exec(_),t===null)return D["~"]=E;if(t.index>=s)return D["~"]=u("MatchData").$new(i,t),n===E?D["~"]:$.yield1(n,D["~"]);i.lastIndex=t.index+1}},-2),W(c,"$match?",function(_,s){var n=this;if(n.uninitialized&&J.$raise(u("TypeError"),"uninitialized Regexp"),s===void 0)return _===E?!1:n.test(z(_,u("String"),"to_str"));if(s=z(s,u("Integer"),"to_int"),_===E||(_=z(_,u("String"),"to_str"),s<0&&(s+=_.length,s<0)))return!1;var r,e=$.global_regexp(n);return r=e.exec(_),!(r===null||r.index<s)},-2),W(c,"$names",function(){var _=this;return Y(_.$source().$scan(q(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),W(c,"$named_captures",function(){var _=this;return Y(Y(Y(_.$source().$scan(q(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function(n){return n==null&&(n=E),Y(n,"map",[],function(e){return e==null&&(e=E),h(e.$last(),1)})})}),W(c,"$~",function(){var _=this;return D._==null&&(D._=E),_["$=~"](D._)}),W(c,"$source",function(){var _=this;return _.source}),W(c,"$options",function(){var _=this;_.uninitialized&&J.$raise(u("TypeError"),"uninitialized Regexp");var s=0;return _.multiline&&(s|=w("MULTILINE")),_.ignoreCase&&(s|=w("IGNORECASE")),s}),W(c,"$casefold?",function(){var _=this;return _.ignoreCase}),O(c,"eql?","=="),O(c,"to_s","source")}("::",RegExp,x),function(d,I,g){var c=S(d,I,"MatchData"),o=[c].concat(g),w=$.$r(o),B=c.$$prototype;return B.matches=E,c.$attr_reader("post_match","pre_match","regexp","string"),W(c,"$initialize",function(s,n,r){var e,t=this;r=R(r),e=H(r,"no_matchdata"),e==null&&(e=!1),p(e)||(D["~"]=t),t.regexp=s,t.begin=n.index,t.string=n.input,t.pre_match=n.input.slice(0,n.index),t.post_match=n.input.slice(n.index+n[0].length),t.matches=[];for(var i=0,a=n.length;i<a;i++){var l=n[i];l==null?t.matches.push(E):t.matches.push(l)}},-3),W(c,"$match",function(s){var n=this,r=E;return p(r=n["$[]"](s))?r:p(s["$is_a?"](w("Integer")))&&p(k(s,n.$length()))?J.$raise(u("IndexError"),"index "+s+" out of matches"):E}),W(c,"$match_length",function(s){var n,r=this;return n=r.$match(s),n===E||n==null?E:n.$length()}),W(c,"$[]",function(s){var n,r,e=this;return n=$e(arguments),r=n,r[0].$$is_string?(e.$regexp().$names()["$include?"](r["$[]"](0))["$!"]()&&J.$raise(u("IndexError"),"undefined group name reference: "+r["$[]"](0)),e.$named_captures()["$[]"](r["$[]"](0))):Y(e.matches,"[]",F(r))},-1),W(c,"$offset",function(s){var n=this;return s!==0&&J.$raise(u("ArgumentError"),"MatchData#offset only supports 0th element"),[n.begin,n.begin+n.matches[s].length]}),W(c,"$==",function(s){var n=this,r=E,e=E,t=E,i=E;return m(u("MatchData"),s)?p(r=p(e=p(t=p(i=n.string==s.string)?n.regexp.toString()==s.regexp.toString():i)?n.pre_match==s.pre_match:t)?n.post_match==s.post_match:e)?n.begin==s.begin:r:!1}),W(c,"$begin",function(s){var n=this;return s!==0&&J.$raise(u("ArgumentError"),"MatchData#begin only supports 0th element"),n.begin}),W(c,"$end",function(s){var n=this;return s!==0&&J.$raise(u("ArgumentError"),"MatchData#end only supports 0th element"),n.begin+n.matches[s].length}),W(c,"$captures",function(){var s=this;return s.matches.slice(1)}),W(c,"$named_captures",function(){var s=this,n=E;return n=s.$captures(),Y(s.$regexp().$named_captures(),"transform_values",[],function(e){return e==null&&(e=E),n["$[]"](A(e.$last(),1))})}),W(c,"$names",function(){var s=this;return s.$regexp().$names()}),W(c,"$inspect",function(){var s=this,n="#<MatchData "+s.matches[0].$inspect();if(s.$regexp().$names()["$empty?"]())for(var r=1,e=s.matches.length;r<e;r++)n+=" "+r+":"+s.matches[r].$inspect();else Y(s.$named_captures(),"each",[],function(i,a){return i==null&&(i=E),a==null&&(a=E),n+=" "+i+":"+a.$inspect()});return n+">"}),W(c,"$length",function(){var s=this;return s.matches.length}),W(c,"$to_a",C("matches")),W(c,"$to_s",function(){var s=this;return s.matches[0]}),W(c,"$values_at",function(s){var n,r,e=this;n=$e(arguments),r=n;var t,i,a,l=[];for(t=0;t<r.length;t++){if(r[t].$$is_range&&(i=r[t].$to_a(),i.unshift(t,1),Array.prototype.splice.apply(r,i)),a=G["$coerce_to!"](r[t],u("Integer"),"to_int"),a<0&&(a+=e.matches.length,a<0)){l.push(E);continue}l.push(e.matches[a])}return l},-1),O(c,"eql?","=="),O(c,"size","length")}(x[0],null,x)};Opal.modules["corelib/string"]=function($){var z=$.coerce_to,b=$.respond_to,L=$.global_multiline_regexp,S=$.prop,re=$.opal32_init,Z=$.opal32_add,T=$.klass,W=$.send2,p=$.find_super,D=$.def,$e=$.Opal,J=$.defs,G=$.slice,O=$.send,Y=$.to_a,q=$.extract_kwargs,h=$.ensure_kwargs,R=$.hash_get,H=$.eqeqeq,k=$.Kernel,F=$.truthy,m=$.gvars,A=$.rb_divide,C=$.rb_plus,x=$.eqeq,E=$.alias,u=$.const_set,d=$.top,I=[],g=$.$r(I),c=$.nil,o=$.$$$;return $.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),d.$require("corelib/comparable"),d.$require("corelib/regexp"),function(w,B,_){var s=T(w,B,"String"),n=[s].concat(_),r=$.$r(n);s.$include(o("Comparable")),$.prop(s.$$prototype,"$$is_string",!0);var e=new Map;(function(){D(s,"$__id__",function i(){var a=i.$$p||c,l=this;if(i.$$p=null,typeof l=="object")return W(l,p(l,"__id__",i,!1,!0),"__id__",[],a);if(e.has(l))return e.get(l);var v=$.uid();return e.set(l,v),v}),D(s,"$hash",function(){var a=this,l=re(),v,N=a.length;for(l=Z(l,5),l=Z(l,N),v=0;v<N;v++)l=Z(l,a.charCodeAt(v));return l})})(),J(s,"$try_convert",function(a){return $e["$coerce_to?"](a,o("String"),"to_str")}),J(s,"$new",function(a){var l,v,N=this;l=G(arguments),v=l;var P=v[0]||"",j=v[v.length-1];return P=z(P,o("String"),"to_str"),j&&j.$$is_hash&&j.has("encoding")&&(P=P.$force_encoding(j.get("encoding").value)),P=new N.$$constructor(P),P.$initialize.$$pristine||O(P,"initialize",Y(v)),P},-1),D(s,"$initialize",function(a,l){var v,N;return v=G(arguments),N=q(v),N=h(N),v.length>0&&v.shift(),R(N,"encoding"),R(N,"capacity"),c},-1),D(s,"$%",function(a){var l=this;return H(o("Array"),a)?O(l,"format",[l].concat(Y(a))):l.$format(l,a)}),D(s,"$*",function(a){var l=this;if(a=z(a,o("Integer"),"to_int"),a<0&&k.$raise(o("ArgumentError"),"negative argument"),a===0)return"";var v="",N=l.toString();for(N.length*a>=1<<28&&k.$raise(o("RangeError"),"multiply count must not overflow maximum string size");(a&1)===1&&(v+=N),a>>>=1,a!==0;)N+=N;return v}),D(s,"$+",function(a){var l=this;if(a=z(a,o("String"),"to_str"),a==""&&l.$$class===$.String)return l;if(l==""&&a.$$class===$.String)return a;var v=l+a;return l.encoding===v.encoding&&a.encoding===v.encoding||l.encoding.name==="UTF-8"||a.encoding.name==="UTF-8"?v:$.enc(v,l.encoding)}),D(s,"$<=>",function(a){var l=this;if(F(a["$respond_to?"]("to_str")))return a=a.$to_str().$to_s(),l>a?1:l<a?-1:0;var v=a["$<=>"](l);return v===c?c:v>0?-1:v<0?1:0}),D(s,"$==",function(a){var l=this;return a.$$is_string?l.toString()===a.toString():b(a,"$to_str")?a["$=="](l):!1}),D(s,"$=~",function(a){var l=this;return a.$$is_string&&k.$raise(o("TypeError"),"type mismatch: String given"),a["$=~"](l)}),D(s,"$[]",function(a,l){var v=this,N=v.length,P,j;if(a.$$is_range)return P=a.excl,j=a,l=a.end===c?-1:z(a.end,o("Integer"),"to_int"),a=a.begin===c?0:z(a.begin,o("Integer"),"to_int"),Math.abs(a)>N?c:(a<0&&(a+=N),l<0&&(l+=N),(!P||j.end===c)&&(l+=1),l=l-a,l<0&&(l=0),v.substr(a,l));if(a.$$is_string)return l!=null&&k.$raise(o("TypeError")),v.indexOf(a)!==-1?a:c;if(a.$$is_regexp){var V=v.match(a);return V===null?(m["~"]=c,c):(m["~"]=o("MatchData").$new(a,V),l==null?V[0]:(l=z(l,o("Integer"),"to_int"),l<0&&-l<V.length?V[l+=V.length]:l>=0&&l<V.length?V[l]:c))}return a=z(a,o("Integer"),"to_int"),a<0&&(a+=N),l==null?a>=N||a<0?c:v.substr(a,1):(l=z(l,o("Integer"),"to_int"),l<0||a>N||a<0?c:v.substr(a,l))},-2),D(s,"$b",function(){var a=this;return new String(a).$force_encoding("binary")}),D(s,"$capitalize",function(){var a=this;return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}),D(s,"$casecmp",function(a){var l=this;if(!F(a["$respond_to?"]("to_str")))return c;a=z(a,o("String"),"to_str").$to_s();var v=/^[\x00-\x7F]*$/;return v.test(l)&&v.test(a)&&(l=l.toLowerCase(),a=a.toLowerCase()),l["$<=>"](a)}),D(s,"$casecmp?",function(a){var l=this,v=l.$casecmp(a);return v===c?c:v===0}),D(s,"$center",function(a,l){var v=this;if(l==null&&(l=" "),a=z(a,o("Integer"),"to_int"),l=z(l,o("String"),"to_str").$to_s(),F(l["$empty?"]())&&k.$raise(o("ArgumentError"),"zero width padding"),F(a<=v.length))return v;var N=v.$ljust(A(C(a,v.length),2).$ceil(),l),P=v.$rjust(A(C(a,v.length),2).$floor(),l);return P+N.slice(v.length)},-2),D(s,"$chomp",function(a){var l=this;if(m["/"]==null&&(m["/"]=c),a==null&&(a=m["/"]),F(a===c||l.length===0))return l;a=$e["$coerce_to!"](a,o("String"),"to_str").$to_s();var v;if(a===`
`)v=l.replace(/\r?\n?$/,"");else if(a==="")v=l.replace(/(\r?\n)+$/,"");else if(l.length>=a.length){var N=l.substr(l.length-a.length,a.length);N===a&&(v=l.substr(0,l.length-a.length))}return v??l},-1),D(s,"$chop",function(){var a=this,l=a.length,v;return l<=1?v="":a.charAt(l-1)===`
`&&a.charAt(l-2)==="\r"?v=a.substr(0,l-2):v=a.substr(0,l-1),v}),D(s,"$chr",function(){var a=this;return a.charAt(0)}),D(s,"$clone",function(a){var l,v=this,N=c;return a=h(a),l=R(a,"freeze"),l==null&&(l=c),F(l["$nil?"]())||x(l,!0)||x(l,!1)||v.$raise(r("ArgumentError"),"unexpected value for freeze: "+l.$class()),N=new String(v),N.$copy_singleton_methods(v),N.$initialize_clone(v,new Map([["freeze",l]])),x(l,!0)?N.$$frozen||(N.$$frozen=!0):F(l["$nil?"]())&&v.$$frozen&&(N.$$frozen=!0),N},-1),D(s,"$dup",function(){var a=this,l=c;return l=new String(a),l.$initialize_dup(a),l}),D(s,"$count",function(a){var l,v,N=this;l=G(arguments),v=l,v.length===0&&k.$raise(o("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var P=t(v);return P===null?0:N.length-N.replace(new RegExp(P,"g"),"").length},-1),D(s,"$delete",function(a){var l,v,N=this;l=G(arguments),v=l,v.length===0&&k.$raise(o("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var P=t(v);return P===null?N:N.replace(new RegExp(P,"g"),"")},-1),D(s,"$delete_prefix",function(a){var l=this;return a.$$is_string||(a=z(a,o("String"),"to_str")),l.slice(0,a.length)===a?l.slice(a.length):l}),D(s,"$delete_suffix",function(a){var l=this;return a.$$is_string||(a=z(a,o("String"),"to_str")),l.slice(l.length-a.length)===a?l.slice(0,l.length-a.length):l}),D(s,"$downcase",function(){var a=this;return a.toLowerCase()}),D(s,"$each_line",function i(a,l){var v=i.$$p||c,N,P,j,V,ee=this;if(m["/"]==null&&(m["/"]=c),i.$$p=null,N=G(arguments),P=q(N),P=h(P),N.length>0&&(j=N.shift()),j==null&&(j=m["/"]),V=R(P,"chomp"),V==null&&(V=!1),v===c)return ee.$enum_for("each_line",j,new Map([["chomp",V]]));if(j===c)return $.yield1(v,ee),ee;j=z(j,o("String"),"to_str");var ae,oe,_e,de,ge,ve,me,be;if(j.length===0){for(ae=ee.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),oe=0,_e=ae.length;oe<_e;oe+=2)(ae[oe]||ae[oe+1])&&(be=(ae[oe]||"")+(ae[oe+1]||""),V&&(be=be.$chomp(`
`)),$.yield1(v,be));return ee}for(ge=ee.$chomp(j),ve=ee.length!=ge.length,me=ge.split(j),oe=0,de=me.length;oe<de;oe++)be=me[oe],(oe<de-1||ve)&&(be+=j),V&&(be=be.$chomp(j)),$.yield1(v,be);return ee},-1),D(s,"$empty?",function(){var a=this;return a.length===0}),D(s,"$end_with?",function(a){var l,v,N=this;l=G(arguments),v=l;for(var P=0,j=v.length;P<j;P++){var V=z(v[P],o("String"),"to_str").$to_s();if(N.length>=V.length&&N.substr(N.length-V.length,V.length)==V)return!0}return!1},-1),D(s,"$gsub",function i(a,l){var v=i.$$p||c,N=this;if(i.$$p=null,l===void 0&&v===c)return N.$enum_for("gsub",a);var P="",j=c,V=0,ee,ae;a.$$is_regexp?a=L(a):(a=z(a,o("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var oe;;){if(ee=a.exec(N),ee===null){m["~"]=c,P+=N.slice(V);break}j=o("MatchData").$new(a,ee),l===void 0?(oe=a.lastIndex,ae=v(ee[0]),a.lastIndex=oe):l.$$is_hash?ae=l["$[]"](ee[0]).$to_s():(l.$$is_string||(l=z(l,o("String"),"to_str")),ae=l.replace(/([\\]+)([0-9+&`'])/g,function(_e,de,ge){if(de.length%2===0)return _e;switch(ge){case"+":for(var ve=ee.length-1;ve>0;ve--)if(ee[ve]!==void 0)return de.slice(1)+ee[ve];return"";case"&":return de.slice(1)+ee[0];case"`":return de.slice(1)+N.slice(0,ee.index);case"'":return de.slice(1)+N.slice(ee.index+ee[0].length);default:return de.slice(1)+(ee[ge]||"")}}).replace(/\\\\/g,"\\")),a.lastIndex===ee.index?(P+=N.slice(V,ee.index)+ae+(N[ee.index]||""),a.lastIndex+=1):P+=N.slice(V,ee.index)+ae,V=a.lastIndex}return m["~"]=j,P},-2),D(s,"$hex",function(){var a=this;return a.$to_i(16)}),D(s,"$include?",function(a){var l=this;return a.$$is_string||(a=z(a,o("String"),"to_str")),l.indexOf(a)!==-1}),D(s,"$index",function(a,l){var v=this,N,P,j;if(l===void 0)l=0;else if(l=z(l,o("Integer"),"to_int"),l<0&&(l+=v.length,l<0))return c;if(a.$$is_regexp)for(j=L(a);;){if(P=j.exec(v),P===null){m["~"]=c,N=-1;break}if(P.index>=l){m["~"]=o("MatchData").$new(j,P),N=P.index;break}j.lastIndex=P.index+1}else a=z(a,o("String"),"to_str"),a.length===0&&l>v.length?N=-1:N=v.indexOf(a,l);return N===-1?c:N},-2),D(s,"$inspect",function(){var a=this,l=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,v={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},N=a.replace(l,function(P){return v[P]?v[P]:(P=P.charCodeAt(0),P<=255&&(a.encoding["$binary?"]()||a.internal_encoding["$binary?"]())?"\\x"+("00"+P.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+P.toString(16).toUpperCase()).slice(-4))});return'"'+N.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),D(s,"$intern",function(){var a=this;return a.toString()}),D(s,"$length",function(){var a=this;return a.length}),E(s,"size","length"),D(s,"$lines",function i(a,l){var v=i.$$p||c,N,P,j,V,ee=this,ae=c;return m["/"]==null&&(m["/"]=c),i.$$p=null,N=G(arguments),P=q(N),P=h(P),N.length>0&&(j=N.shift()),j==null&&(j=m["/"]),V=R(P,"chomp"),V==null&&(V=!1),ae=O(ee,"each_line",[j,new Map([["chomp",V]])],v.$to_proc()),F(v)?ee:ae.$to_a()},-1),D(s,"$ljust",function(a,l){var v=this;if(l==null&&(l=" "),a=z(a,o("Integer"),"to_int"),l=z(l,o("String"),"to_str").$to_s(),F(l["$empty?"]())&&k.$raise(o("ArgumentError"),"zero width padding"),F(a<=v.length))return v;var N=-1,P="";for(a-=v.length;++N<a;)P+=l;return v+P.slice(0,a)},-2),D(s,"$lstrip",function(){var a=this;return a.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),D(s,"$ascii_only?",function(){var a=this;return a.encoding.ascii?/^[\x00-\x7F]*$/.test(a):!1}),D(s,"$match",function i(a,l){var v=i.$$p||c,N=this;return i.$$p=null,(H(r("String"),a)||F(a["$respond_to?"]("to_str")))&&(a=o("Regexp").$new(a.$to_str())),H(o("Regexp"),a)||k.$raise(o("TypeError"),"wrong argument type "+a.$class()+" (expected Regexp)"),O(a,"match",[N,l],v.$to_proc())},-2),D(s,"$match?",function(a,l){var v=this;return(H(r("String"),a)||F(a["$respond_to?"]("to_str")))&&(a=o("Regexp").$new(a.$to_str())),H(o("Regexp"),a)||k.$raise(o("TypeError"),"wrong argument type "+a.$class()+" (expected Regexp)"),a["$match?"](v,l)},-2),D(s,"$next",function(){var a=this,l=a.length;if(l===0)return"";for(var v=a,N=a.search(/[a-zA-Z0-9]/),P=!1,j;l--;){if(j=a.charCodeAt(l),j>=48&&j<=57||j>=65&&j<=90||j>=97&&j<=122)switch(j){case 57:P=!0,j=48;break;case 90:P=!0,j=65;break;case 122:P=!0,j=97;break;default:P=!1,j+=1}else N===-1?j===255?(P=!0,j=0):(P=!1,j+=1):P=!0;if(v=v.slice(0,l)+String.fromCharCode(j)+v.slice(l+1),P&&(l===0||l===N)){switch(j){case 65:break;case 97:break;default:j+=1}l===0?v=String.fromCharCode(j)+v:v=v.slice(0,l)+String.fromCharCode(j)+v.slice(l),P=!1}if(!P)break}return v}),D(s,"$oct",function(){var a=this,l,v=a,N=8;return/^\s*_/.test(v)?0:(v=v.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(P,j,V,ee){switch(ee.charAt(0)){case"+":case"-":return P;case"0":if(ee.charAt(1)==="x"&&V==="0x")return P}switch(V){case"0b":N=2;break;case"0":case"0o":N=8;break;case"0d":N=10;break;case"0x":N=16;break}return j+ee}),l=parseInt(v.replace(/_(?!_)/g,""),N),isNaN(l)?0:l)}),D(s,"$ord",function(){var a=this;return typeof a.codePointAt=="function"?a.codePointAt(0):a.charCodeAt(0)}),D(s,"$partition",function(a){var l=this,v,N;return a.$$is_regexp?(N=a.exec(l),N===null?v=-1:(o("MatchData").$new(a,N),a=N[0],v=N.index)):(a=z(a,o("String"),"to_str"),v=l.indexOf(a)),v===-1?[l,"",""]:[l.slice(0,v),l.slice(v,v+a.length),l.slice(v+a.length)]}),D(s,"$reverse",function(){var a=this;return a.split("").reverse().join("")}),D(s,"$rindex",function(a,l){var v=this,N,P,j,V;if(l===void 0)l=v.length;else if(l=z(l,o("Integer"),"to_int"),l<0&&(l+=v.length,l<0))return c;if(a.$$is_regexp){for(P=null,j=L(a);V=j.exec(v),!(V===null||V.index>l);)P=V,j.lastIndex=P.index+1;P===null?(m["~"]=c,N=-1):(o("MatchData").$new(j,P),N=P.index)}else a=z(a,o("String"),"to_str"),N=v.lastIndexOf(a,l);return N===-1?c:N},-2),D(s,"$rjust",function(a,l){var v=this;if(l==null&&(l=" "),a=z(a,o("Integer"),"to_int"),l=z(l,o("String"),"to_str").$to_s(),F(l["$empty?"]())&&k.$raise(o("ArgumentError"),"zero width padding"),F(a<=v.length))return v;var N=Math.floor(a-v.length),P=Math.floor(N/l.length),j=Array(P+1).join(l),V=N-j.length;return j+l.slice(0,V)+v},-2),D(s,"$rpartition",function(a){var l=this,v,N,P,j;if(a.$$is_regexp){for(N=null,P=L(a);j=P.exec(l),j!==null;)N=j,P.lastIndex=N.index+1;N===null?v=-1:(o("MatchData").$new(P,N),a=N[0],v=N.index)}else a=z(a,o("String"),"to_str"),v=l.lastIndexOf(a);return v===-1?["","",l]:[l.slice(0,v),l.slice(v,v+a.length),l.slice(v+a.length)]}),D(s,"$rstrip",function(){var a=this;return a.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),D(s,"$scan",function i(a,l){var v=i.$$p||c,N,P=this;i.$$p=null,l=h(l),N=R(l,"no_matchdata"),N==null&&(N=!1);var j=[],V=c,ee;for(a.$$is_regexp?a=L(a):(a=z(a,o("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(ee=a.exec(P))!=null;)V=o("MatchData").$new(a,ee,new Map([["no_matchdata",N]])),v===c?ee.length==1?j.push(ee[0]):j.push(V.$captures()):ee.length==1?$.yield1(v,ee[0]):$.yield1(v,V.$captures()),a.lastIndex===ee.index&&(a.lastIndex+=1);return N||(m["~"]=V),v!==c?P:j},-2),D(s,"$singleton_class",function(){var a=this;return $.get_singleton_class(a)}),D(s,"$split",function(a,l){var v=this,N=c;if(m[";"]==null&&(m[";"]=c),v.length===0)return[];if(l===void 0)l=0;else if(l=$e["$coerce_to!"](l,o("Integer"),"to_int"),l===1)return[v];(a===void 0||a===c)&&(a=F(N=m[";"])?N:" ");var P=[],j=v.toString(),V=0,ee,ae=0,oe=0,_e,de;if(a.$$is_regexp?a=L(a):(a=z(a,o("String"),"to_str").$to_s(),a===" "&&(a=/\s+/gm,j=j.replace(/^\s+/,""))),P=j.split(a),P.length===1&&P[0]===j)return[P[0]];for(;(_e=P.indexOf(void 0))!==-1;)P.splice(_e,1);if(l===0){for(;P[P.length-1]==="";)P.pop();return P}if(a.$$is_regexp||(a=$.escape_regexp(a),a=new RegExp(a,"gm")),ee=a.exec(j),l<0){if(ee!==null&&ee[0]===""&&a.source.indexOf("(?=")===-1)for(_e=0,de=ee.length;_e<de;_e++)P.push("");return P}if(ee!==null&&ee[0]==="")return oe=(ee.length-1)*(l-1)+l,P.splice(oe-1,P.length-1,P.slice(oe-1).join("")),P;if(l>=P.length)return P;for(;ee!==null&&(ae++,V=a.lastIndex,oe+=ee.length,ae+1!==l);)ee=a.exec(j);return P.splice(oe,P.length-1,j.slice(V)),P},-1),D(s,"$squeeze",function(a){var l,v,N=this;if(l=G(arguments),v=l,v.length===0)return N.replace(/(.)\1+/g,"$1");var P=t(v);return P===null?N:N.replace(new RegExp("("+P+")\\1+","g"),"$1")},-1),D(s,"$start_with?",function(a){var l,v,N=this;l=G(arguments),v=l;for(var P=0,j=v.length;P<j;P++)if(v[P].$$is_regexp){var V=v[P],ee=V.exec(N);if(ee!=null&&ee.index===0)return m["~"]=o("MatchData").$new(V,ee),!0;m["~"]=c}else{var ae=z(v[P],o("String"),"to_str").$to_s();if(N.length>=ae.length&&N.startsWith(ae))return!0}return!1},-1),D(s,"$strip",function(){var a=this;return a.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),D(s,"$sub",function i(a,l){var v=i.$$p||c,N=this;i.$$p=null,a.$$is_regexp||(a=z(a,o("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var P,j=a.exec(N);return j===null?(m["~"]=c,P=N.toString()):(o("MatchData").$new(a,j),l===void 0?(v===c&&k.$raise(o("ArgumentError"),"wrong number of arguments (1 for 2)"),P=N.slice(0,j.index)+v(j[0])+N.slice(j.index+j[0].length)):l.$$is_hash?P=N.slice(0,j.index)+l["$[]"](j[0]).$to_s()+N.slice(j.index+j[0].length):(l=z(l,o("String"),"to_str"),l=l.replace(/([\\]+)([0-9+&`'])/g,function(V,ee,ae){if(ee.length%2===0)return V;switch(ae){case"+":for(var oe=j.length-1;oe>0;oe--)if(j[oe]!==void 0)return ee.slice(1)+j[oe];return"";case"&":return ee.slice(1)+j[0];case"`":return ee.slice(1)+N.slice(0,j.index);case"'":return ee.slice(1)+N.slice(j.index+j[0].length);default:return ee.slice(1)+(j[ae]||"")}}).replace(/\\\\/g,"\\"),P=N.slice(0,j.index)+l+N.slice(j.index+j[0].length))),P},-2),D(s,"$sum",function(a){var l=this;a==null&&(a=16),a=z(a,o("Integer"),"to_int");for(var v=0,N=l.length,P=0;P<N;P++)v+=l.charCodeAt(P);return a<=0?v:v&Math.pow(2,a)-1},-1),D(s,"$swapcase",function(){var a=this,l=a.replace(/([a-z]+)|([A-Z]+)/g,function(v,N,P){return N?v.toUpperCase():v.toLowerCase()});return l}),D(s,"$to_f",function(){var a=this;if(a.charAt(0)==="_")return 0;var l=parseFloat(a.replace(/_/g,""));return isNaN(l)||l==1/0||l==-1/0?0:l}),D(s,"$to_i",function(a){var l=this;a==null&&(a=10);var v,N=l.toLowerCase(),P=z(a,o("Integer"),"to_int");return(P===1||P<0||P>36)&&k.$raise(o("ArgumentError"),"invalid radix "+P),/^\s*_/.test(N)?0:(N=N.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(j,V,ee,ae){switch(ae.charAt(0)){case"+":case"-":return j;case"0":if(ae.charAt(1)==="x"&&ee==="0x"&&(P===0||P===16))return j}switch(ee){case"0b":if(P===0||P===2)return P=2,V+ae;break;case"0":case"0o":if(P===0||P===8)return P=8,V+ae;break;case"0d":if(P===0||P===10)return P=10,V+ae;break;case"0x":if(P===0||P===16)return P=16,V+ae;break}return j}),v=parseInt(N.replace(/_(?!_)/g,""),P),isNaN(v)?0:v)},-1),D(s,"$to_proc",function i(){i.$$p;var a=this,l=c,v=c,N=c;return i.$$p=null,l=a.valueOf(),v=$.jsid(l),N=O(k,"proc",[],function P(j){var V=P.$$p||c,ee,ae;P.$$p=null,ee=G(arguments),ae=ee,ae.length===0&&k.$raise(o("ArgumentError"),"no receiver given");var oe=ae[0];oe==null&&(oe=c);var _e=oe[v];return _e?ae=ae.slice(1):(_e=oe.$method_missing,ae[0]=l),typeof V=="function"&&(_e.$$p=V),ae.length===0?_e.call(oe):_e.apply(oe,ae)},-1),N.$$source_location=c,N}),D(s,"$to_s",function(){var a=this;return a.toString()}),D(s,"$tr",function(a,l){var v=this;if(a=z(a,o("String"),"to_str").$to_s(),l=z(l,o("String"),"to_str").$to_s(),a.length==0||a===l)return v;var N,P,j,V,ee,ae,oe,_e={},de=a.split(""),ge=de.length,ve=l.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],ge-=1);var M=[],K=null;for(P=!1,N=0;N<ge;N++)if(V=de[N],K==null)K=V,M.push(V);else if(V==="-")K==="-"?(M.push("-"),M.push("-")):N==ge-1?M.push("-"):P=!0;else if(P){for(ee=K.charCodeAt(0),ae=V.charCodeAt(0),ee>ae&&k.$raise(o("ArgumentError"),'invalid range "'+String.fromCharCode(ee)+"-"+String.fromCharCode(ae)+'" in string transliteration'),j=ee+1;j<ae;j++)M.push(String.fromCharCode(j));M.push(V),P=null,K=null}else M.push(V);if(de=M,ge=de.length,be)for(N=0;N<ge;N++)_e[de[N]]=!0;else{if(me>0){var X=[],Q=null;for(P=!1,N=0;N<me;N++)if(V=ve[N],Q==null)Q=V,X.push(V);else if(V==="-")Q==="-"?(X.push("-"),X.push("-")):N==me-1?X.push("-"):P=!0;else if(P){for(ee=Q.charCodeAt(0),ae=V.charCodeAt(0),ee>ae&&k.$raise(o("ArgumentError"),'invalid range "'+String.fromCharCode(ee)+"-"+String.fromCharCode(ae)+'" in string transliteration'),j=ee+1;j<ae;j++)X.push(String.fromCharCode(j));X.push(V),P=null,Q=null}else X.push(V);ve=X,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(N=0;N<ne;N++)ve.push(se)}for(N=0;N<ge;N++)_e[de[N]]=ve[N]}var le="";for(N=0,oe=v.length;N<oe;N++){V=v.charAt(N);var fe=_e[V];be?le+=fe==null?ie:V:le+=fe??V}return le}),D(s,"$tr_s",function(a,l){var v=this;if(a=z(a,o("String"),"to_str").$to_s(),l=z(l,o("String"),"to_str").$to_s(),a.length==0)return v;var N,P,j,V,ee,ae,oe,_e={},de=a.split(""),ge=de.length,ve=l.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],ge-=1);var M=[],K=null;for(P=!1,N=0;N<ge;N++)if(V=de[N],K==null)K=V,M.push(V);else if(V==="-")K==="-"?(M.push("-"),M.push("-")):N==ge-1?M.push("-"):P=!0;else if(P){for(ee=K.charCodeAt(0),ae=V.charCodeAt(0),ee>ae&&k.$raise(o("ArgumentError"),'invalid range "'+String.fromCharCode(ee)+"-"+String.fromCharCode(ae)+'" in string transliteration'),j=ee+1;j<ae;j++)M.push(String.fromCharCode(j));M.push(V),P=null,K=null}else M.push(V);if(de=M,ge=de.length,be)for(N=0;N<ge;N++)_e[de[N]]=!0;else{if(me>0){var X=[],Q=null;for(P=!1,N=0;N<me;N++)if(V=ve[N],K==null)K=V,X.push(V);else if(V==="-")Q==="-"?(X.push("-"),X.push("-")):N==me-1?X.push("-"):P=!0;else if(P){for(ee=K.charCodeAt(0),ae=V.charCodeAt(0),ee>ae&&k.$raise(o("ArgumentError"),'invalid range "'+String.fromCharCode(ee)+"-"+String.fromCharCode(ae)+'" in string transliteration'),j=ee+1;j<ae;j++)X.push(String.fromCharCode(j));X.push(V),P=null,K=null}else X.push(V);ve=X,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(N=0;N<ne;N++)ve.push(se)}for(N=0;N<ge;N++)_e[de[N]]=ve[N]}var le="",fe=null;for(N=0,oe=v.length;N<oe;N++){V=v.charAt(N);var f=_e[V];be?f==null?fe==null&&(le+=ie,fe=!0):(le+=V,fe=null):f!=null?(fe==null||fe!==f)&&(le+=f,fe=f):(le+=V,fe=null)}return le}),D(s,"$upcase",function(){var a=this;return a.toUpperCase()}),D(s,"$upto",function i(a,l){var v=i.$$p||c,N=this;if(i.$$p=null,l==null&&(l=!1),v===c)return N.$enum_for("upto",a,l);var P,j,V=N.toString();if(a=z(a,o("String"),"to_str"),V.length===1&&a.length===1)for(P=V.charCodeAt(0),j=a.charCodeAt(0);P<=j&&!(l&&P===j);)v(String.fromCharCode(P)),P+=1;else if(parseInt(V,10).toString()===V&&parseInt(a,10).toString()===a)for(P=parseInt(V,10),j=parseInt(a,10);P<=j&&!(l&&P===j);)v(P.toString()),P+=1;else for(;V.length<=a.length&&V<=a&&!(l&&V===a);)v(V),V=V.$succ();return N},-2);function t(i){function a(_e){var de="",ge,ve=_e.length,me,be,ie,M,K;for(ge=0;ge<ve;ge++)if(me=_e.charAt(ge),me==="-"&&ge>0&&ge<ve-1&&!be){for(ie=_e.charCodeAt(ge-1),M=_e.charCodeAt(ge+1),ie>M&&k.$raise(o("ArgumentError"),'invalid range "'+ie+"-"+M+'" in string transliteration'),K=ie+1;K<M+1;K++)de+=String.fromCharCode(K);be=!0,ge++}else be=me==="\\",de+=me;return de}function l(_e,de){if(_e.length===0)return de;var ge="",ve,me=_e.length,be;for(ve=0;ve<me;ve++)be=_e.charAt(ve),de.indexOf(be)!==-1&&(ge+=be);return ge}var v,N,P,j,V,ee,ae="",oe="";for(v=0,N=i.length;v<N;v++)P=z(i[v],o("String"),"to_str"),j=P.charAt(0)==="^"&&P.length>1,P=a(j?P.slice(1):P),j?oe=l(oe,P):ae=l(ae,P);if(ae.length>0&&oe.length>0){for(ee="",v=0,N=ae.length;v<N;v++)V=ae.charAt(v),oe.indexOf(V)===-1&&(ee+=V);ae=ee,oe=""}return ae.length>0?"["+o("Regexp").$escape(ae)+"]":oe.length>0?"[^"+o("Regexp").$escape(oe)+"]":null}return D(s,"$instance_variables",function(){return[]}),J(s,"$_load",function(a){var l,v,N=this;return l=G(arguments),v=l,O(N,"new",Y(v))},-1),D(s,"$unicode_normalize",function(a){var l=this;return a==null&&(a="nfc"),F(["nfc","nfd","nfkc","nfkd"]["$include?"](a))||k.$raise(o("ArgumentError"),"Invalid normalization form "+a),l.normalize(a.$upcase())},-1),D(s,"$unicode_normalized?",function(a){var l=this;return a==null&&(a="nfc"),l.$unicode_normalize(a)["$=="](l)},-1),D(s,"$unpack",function(a){return k.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),D(s,"$unpack1",function(a){return k.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),D(s,"$freeze",function(){var a=this;return typeof a=="string"||S(a,"$$frozen",!0),a}),D(s,"$-@",function(){var a=this;return typeof a=="string"||a.$$frozen?a:a.encoding.name=="UTF-8"&&a.internal_encoding.name=="UTF-8"?a.toString():a.$dup().$freeze()}),D(s,"$frozen?",function(){var a=this;return typeof a=="string"||a.$$frozen===!0}),E(s,"+@","dup"),E(s,"===","=="),E(s,"byteslice","[]"),E(s,"eql?","=="),E(s,"equal?","==="),E(s,"object_id","__id__"),E(s,"slice","[]"),E(s,"succ","next"),E(s,"to_str","to_s"),E(s,"to_sym","intern"),$e.$pristine(s,"initialize")}("::",String,I),u(I[0],"Symbol",g("String"))};Opal.modules["corelib/enumerable"]=function($){var z=$.truthy,b=$.coerce_to,L=$.yield1,S=$.yieldX,re=$.deny_frozen_access,Z=$.module,T=$.send,W=$.slice,p=$.to_a,D=$.Opal,$e=$.thrower,J=$.def,G=$.Kernel,O=$.return_val,Y=$.rb_gt,q=$.rb_times,h=$.rb_lt,R=$.eqeq,H=$.rb_plus,k=$.rb_minus,F=$.rb_divide,m=$.rb_le,A=$.lambda,C=$.not,x=$.alias,E=[],u=$.nil,d=$.$$$;return $.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(I,g){var c=Z(I,"Enumerable"),o=[c].concat(g),w=$.$r(o);function B(_){return _.length===0&&(_=[u]),_.length>1&&(_=[_]),_}return J(c,"$all?",function _(s){try{var n=$e("return"),r=_.$$p||u,e=this;return _.$$p=null,z(s!==void 0)?T(e,"each",[],function t(i){var a,l,v=u;if(a=W(arguments),l=a,v=B(l),z(T(s,"public_send",["==="].concat(p(v)))))return u;n.$throw(!1,t.$$is_lambda)},{$$arity:-1,$$ret:n}):r!==u?T(e,"each",[],function t(i){var a,l;if(a=W(arguments),l=a,z($.yieldX(r,p(l))))return u;n.$throw(!1,t.$$is_lambda)},{$$arity:-1,$$ret:n}):T(e,"each",[],function t(i){var a,l;if(a=W(arguments),l=a,z(D.$destructure(l)))return u;n.$throw(!1,t.$$is_lambda)},{$$arity:-1,$$ret:n}),!0}catch(t){if(t===n)return t.$v;throw t}finally{n.is_orphan=!0}},-1),J(c,"$any?",function _(s){try{var n=$e("return"),r=_.$$p||u,e=this;return _.$$p=null,z(s!==void 0)?T(e,"each",[],function t(i){var a,l,v=u;if(a=W(arguments),l=a,v=B(l),z(T(s,"public_send",["==="].concat(p(v)))))n.$throw(!0,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}):r!==u?T(e,"each",[],function t(i){var a,l;if(a=W(arguments),l=a,z($.yieldX(r,p(l))))n.$throw(!0,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}):T(e,"each",[],function t(i){var a,l;if(a=W(arguments),l=a,z(D.$destructure(l)))n.$throw(!0,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}),!1}catch(t){if(t===n)return t.$v;throw t}finally{n.is_orphan=!0}},-1),J(c,"$chunk",function _(){var s=_.$$p||u,n=this;return _.$$p=null,s===u?T(n,"to_enum",["chunk"],function r(){var e=r.$$s==null?this:r.$$s;return e.$enumerator_size()},{$$s:n}):T(d("Enumerator"),"new",[],function r(e){var t=r.$$s==null?this:r.$$s;e==null&&(e=u);var i=u,a=[];function l(){a.length>0&&e.$yield(i,a)}t.$each.$$p=function(v){var N=L(s,v);N===u?(l(),a=[],i=u):(i===u||i===N?a.push(v):(l(),a=[v]),i=N)},t.$each(),l()},{$$s:n})}),J(c,"$chunk_while",function _(){var s=_.$$p||u,n=this;return _.$$p=null,s===u&&G.$raise(d("ArgumentError"),"no block given"),T(n,"slice_when",[],function(e,t){return e==null&&(e=u),t==null&&(t=u),$.yieldX(s,[e,t])["$!"]()})}),J(c,"$collect",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,s===u)return T(n,"enum_for",["collect"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:n});var r=[];return n.$each.$$p=function(){var e=S(s,arguments);r.push(e)},n.$each(),r}),J(c,"$collect_concat",function _(){var s=_.$$p||u,n=this;return _.$$p=null,s===u?T(n,"enum_for",["collect_concat"],function r(){var e=r.$$s==null?this:r.$$s;return e.$enumerator_size()},{$$s:n}):T(n,"map",[],s.$to_proc()).$flatten(1)}),J(c,"$compact",function(){var s=this;return s.$to_a().$compact()}),J(c,"$count",function _(s){var n=_.$$p||u,r=this,e=u;return _.$$p=null,e=0,s!=null&&n!==u&&r.$warn("warning: given block not used"),z(s!=null)?n=T(G,"proc",[],function(i){var a,l;return a=W(arguments),l=a,D.$destructure(l)["$=="](s)},-1):z(n["$nil?"]())&&(n=T(G,"proc",[],O(!0))),T(r,"each",[],function(i){var a,l;return a=W(arguments),l=a,z(S(n,l))?e++:u},-1),e},-1),J(c,"$cycle",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,s==null&&(s=u),n===u)return T(r,"enum_for",["cycle",s],function a(){var l=a.$$s==null?this:a.$$s;return z(s["$nil?"]())?z(l["$respond_to?"]("size"))?d(d("Float"),"INFINITY"):u:(s=D["$coerce_to!"](s,d("Integer"),"to_int"),z(Y(s,0))?q(l.$enumerator_size(),s):0)},{$$s:r});if(!z(s["$nil?"]())&&(s=D["$coerce_to!"](s,d("Integer"),"to_int"),z(s<=0)))return u;var e=[],t,i;if(r.$each.$$p=function(){var a=D.$destructure(arguments);L(n,a),e.push(a)},r.$each(),e.length===0)return u;if(s===u)for(;;)for(t=0,i=e.length;t<i;t++)L(n,e[t]);else for(;s>1;){for(t=0,i=e.length;t<i;t++)L(n,e[t]);s--}},-1),J(c,"$detect",function _(s){try{var n=$e("return"),r=_.$$p||u,e=this;return _.$$p=null,r===u?e.$enum_for("detect",s):(T(e,"each",[],function t(i){var a,l,v=u;if(a=W(arguments),l=a,v=D.$destructure(l),z($.yield1(r,v)))n.$throw(v,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}),s!==void 0?typeof s=="function"?s():s:u)}catch(t){if(t===n)return t.$v;throw t}finally{n.is_orphan=!0}},-1),J(c,"$drop",function(s){var n=this;s=b(s,d("Integer"),"to_int"),z(s<0)&&G.$raise(d("ArgumentError"),"attempt to drop negative size");var r=[],e=0;return n.$each.$$p=function(){s<=e&&r.push(D.$destructure(arguments)),e++},n.$each(),r}),J(c,"$drop_while",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,s===u)return n.$enum_for("drop_while");var r=[],e=!0;return n.$each.$$p=function(){var t=D.$destructure(arguments);if(e){var i=L(s,t);z(i)||(e=!1,r.push(t))}else r.push(t)},n.$each(),r}),J(c,"$each_cons",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,z(arguments.length!=1)&&G.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),s=D.$try_convert(s,d("Integer"),"to_int"),z(s<=0)&&G.$raise(d("ArgumentError"),"invalid size"),n===u)return T(r,"enum_for",["each_cons",s],function t(){var i=t.$$s==null?this:t.$$s,a=u;return a=i.$enumerator_size(),z(a["$nil?"]())?u:R(a,0)||z(h(a,s))?0:H(k(a,s),1)},{$$s:r});var e=[];return r.$each.$$p=function(){var t=D.$destructure(arguments);e.push(t),e.length>s&&e.shift(),e.length==s&&L(n,e.slice(0,s))},r.$each(),r}),J(c,"$each_entry",function _(s){var n=_.$$p||u,r,e,t=this;return _.$$p=null,r=W(arguments),e=r,n===u?T(t,"to_enum",["each_entry"].concat(p(e)),function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:t}):(t.$each.$$p=function(){var i=D.$destructure(arguments);L(n,i)},t.$each.apply(t,e),t)},-1),J(c,"$each_slice",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,s=b(s,d("Integer"),"to_int"),z(s<=0)&&G.$raise(d("ArgumentError"),"invalid slice size"),n===u)return T(r,"enum_for",["each_slice",s],function t(){var i=t.$$s==null?this:t.$$s;return z(i["$respond_to?"]("size"))?F(i.$size(),s).$ceil():u},{$$s:r});var e=[];return r.$each.$$p=function(){var t=D.$destructure(arguments);e.push(t),e.length===s&&(L(n,e),e=[])},r.$each(),e.length>0&&L(n,e),r}),J(c,"$each_with_index",function _(s){var n=_.$$p||u,r,e,t=this;if(_.$$p=null,r=W(arguments),e=r,n===u)return T(t,"enum_for",["each_with_index"].concat(p(e)),function a(){var l=a.$$s==null?this:a.$$s;return l.$enumerator_size()},{$$s:t});var i=0;return t.$each.$$p=function(){var a=D.$destructure(arguments);n(a,i),i++},t.$each.apply(t,e),t},-1),J(c,"$each_with_object",function _(s){var n=_.$$p||u,r=this;return _.$$p=null,n===u?T(r,"enum_for",["each_with_object",s],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var e=D.$destructure(arguments);n(e,s)},r.$each(),s)}),J(c,"$entries",function(s){var n,r,e=this;n=W(arguments),r=n;var t=[];return e.$each.$$p=function(){t.push(D.$destructure(arguments))},e.$each.apply(e,r),t},-1),J(c,"$filter_map",function _(){var s=_.$$p||u,n=this;return _.$$p=null,s===u?T(n,"enum_for",["filter_map"],function r(){var e=r.$$s==null?this:r.$$s;return e.$enumerator_size()},{$$s:n}):T(T(n,"map",[],s.$to_proc()),"select",[],"itself".$to_proc())}),J(c,"$find_all",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,s===u)return T(n,"enum_for",["find_all"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:n});var r=[];return n.$each.$$p=function(){var e=D.$destructure(arguments),t=L(s,e);z(t)&&r.push(e)},n.$each(),r}),J(c,"$find_index",function _(s){try{var n=$e("return"),r=_.$$p||u,e=this,t=u;return _.$$p=null,z(s===void 0&&r===u)?e.$enum_for("find_index"):(s!=null&&r!==u&&e.$warn("warning: given block not used"),t=0,z(s!=null)?T(e,"each",[],function i(a){var l,v;return l=W(arguments),v=l,R(D.$destructure(v),s)&&n.$throw(t,i.$$is_lambda),t+=1},{$$arity:-1,$$ret:n}):T(e,"each",[],function i(a){var l,v;return l=W(arguments),v=l,z($.yieldX(r,p(v)))&&n.$throw(t,i.$$is_lambda),t+=1},{$$arity:-1,$$ret:n}),u)}catch(i){if(i===n)return i.$v;throw i}finally{n.is_orphan=!0}},-1),J(c,"$first",function(s){try{var n=$e("return"),r=this,e=u,t=u;return z(s===void 0)?T(r,"each",[],function i(a){a==null&&(a=u),n.$throw(a,i.$$is_lambda)},{$$ret:n}):(e=[],s=b(s,d("Integer"),"to_int"),z(s<0)&&G.$raise(d("ArgumentError"),"attempt to take negative size"),z(s==0)?[]:(t=0,T(r,"each",[],function i(a){var l,v;if(l=W(arguments),v=l,e.push(D.$destructure(v)),z(s<=++t))n.$throw(e,i.$$is_lambda);else return u},{$$arity:-1,$$ret:n}),e))}catch(i){if(i===n)return i.$v;throw i}finally{n.is_orphan=!0}},-1),J(c,"$grep",function _(s){var n=_.$$p||u,r=this,e=u;return _.$$p=null,e=[],T(r,"each",[],function(i){var a,l,v=u;return a=W(arguments),l=a,v=B(l),z(T(s,"__send__",["==="].concat(p(v))))?(n!==u?(z(Y(l.$length(),1))&&(l=[l]),l=$.yieldX(n,p(l))):z(m(l.$length(),1))&&(l=l["$[]"](0)),e.$push(l)):u},-1),e}),J(c,"$grep_v",function _(s){var n=_.$$p||u,r=this,e=u;return _.$$p=null,e=[],T(r,"each",[],function(i){var a,l,v=u;return a=W(arguments),l=a,v=B(l),z(T(s,"__send__",["==="].concat(p(v))))?u:(n!==u?(z(Y(l.$length(),1))&&(l=[l]),l=$.yieldX(n,p(l))):z(m(l.$length(),1))&&(l=l["$[]"](0)),e.$push(l))},-1),e}),J(c,"$group_by",function _(){var s=_.$$p||u,n,r=this,e=u,t=u;return _.$$p=null,s===u?T(r,"enum_for",["group_by"],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:r}):(e=new Map,r.$each.$$p=function(){var i=D.$destructure(arguments),a=L(s,i);(z(t=e["$[]"](a))?t:(n=[a,[]],T(e,"[]=",n),n[n.length-1]))["$<<"](i)},r.$each(),e)}),J(c,"$include?",function(s){try{var n=$e("return"),r=this;return T(r,"each",[],function e(t){var i,a;if(i=W(arguments),a=i,R(D.$destructure(a),s))n.$throw(!0,e.$$is_lambda);else return u},{$$arity:-1,$$ret:n}),!1}catch(e){if(e===n)return e.$v;throw e}finally{n.is_orphan=!0}}),J(c,"$inject",function _(s,n){var r=_.$$p||u,e=this;_.$$p=null;var t=s;return r!==u&&n===void 0?e.$each.$$p=function(){var i=D.$destructure(arguments);if(t===void 0){t=i;return}i=S(r,[t,i]),t=i}:(n===void 0&&(d("Symbol")["$==="](s)||G.$raise(d("TypeError"),""+s.$inspect()+" is not a Symbol"),n=s,t=void 0),e.$each.$$p=function(){var i=D.$destructure(arguments);if(t===void 0){t=i;return}t=t.$__send__(n,i)}),e.$each(),t??u},-1),J(c,"$lazy",function(){var s=this;return T(d(d("Enumerator"),"Lazy"),"new",[s,s.$enumerator_size()],function(r,e){var t,i;return r==null&&(r=u),t=W(arguments,1),i=t,T(r,"yield",p(i))},-2)}),J(c,"$enumerator_size",function(){var s=this;return z(s["$respond_to?"]("size"))?s.$size():u}),J(c,"$max",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,s===void 0||s===u){var e,t;return r.$each.$$p=function(){var i=D.$destructure(arguments);if(e===void 0){e=i;return}n!==u?t=S(n,[i,e]):t=i["$<=>"](e),t===u&&G.$raise(d("ArgumentError"),"comparison failed"),t>0&&(e=i)},r.$each(),e===void 0?u:e}return s=b(s,d("Integer"),"to_int"),T(r,"sort",[],n.$to_proc()).$reverse().$first(s)},-1),J(c,"$max_by",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,s==null&&(s=u),!z(n))return T(r,"enum_for",["max_by",s],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:r});if(!z(s["$nil?"]()))return T(r,"sort_by",[],n.$to_proc()).$reverse().$take(s);var e,t;return r.$each.$$p=function(){var i=D.$destructure(arguments),a=L(n,i);if(e===void 0){e=i,t=a;return}a["$<=>"](t)>0&&(e=i,t=a)},r.$each(),e===void 0?u:e},-1),J(c,"$min",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,s==null&&(s=u),!z(s["$nil?"]()))return n!==u?T(r,"sort",[],function(i,a){return i==null&&(i=u),a==null&&(a=u),$.yieldX(n,[i,a])}).$take(s):r.$sort().$take(s);var e;return n!==u?r.$each.$$p=function(){var t=D.$destructure(arguments);if(e===void 0){e=t;return}var i=n(t,e);i===u&&G.$raise(d("ArgumentError"),"comparison failed"),i<0&&(e=t)}:r.$each.$$p=function(){var t=D.$destructure(arguments);if(e===void 0){e=t;return}D.$compare(t,e)<0&&(e=t)},r.$each(),e===void 0?u:e},-1),J(c,"$min_by",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,s==null&&(s=u),!z(n))return T(r,"enum_for",["min_by",s],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:r});if(!z(s["$nil?"]()))return T(r,"sort_by",[],n.$to_proc()).$take(s);var e,t;return r.$each.$$p=function(){var i=D.$destructure(arguments),a=L(n,i);if(e===void 0){e=i,t=a;return}a["$<=>"](t)<0&&(e=i,t=a)},r.$each(),e===void 0?u:e},-1),J(c,"$minmax",function _(){var s=_.$$p||u,n=this,r=u;_.$$p=null,s=z(r=s)?r:T(G,"proc",[],function(l,v){return l==null&&(l=u),v==null&&(v=u),l["$<=>"](v)});var e=u,t=u,i=!0;return n.$each.$$p=function(){var a=D.$destructure(arguments);if(i)e=t=a,i=!1;else{var l=s.$call(e,a);l===u?G.$raise(d("ArgumentError"),"comparison failed"):l>0&&(e=a);var v=s.$call(t,a);v===u?G.$raise(d("ArgumentError"),"comparison failed"):v<0&&(t=a)}},n.$each(),[e,t]}),J(c,"$minmax_by",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,!z(s))return T(n,"enum_for",["minmax_by"],function a(){var l=a.$$s==null?this:a.$$s;return l.$enumerator_size()},{$$s:n});var r=u,e=u,t,i;return n.$each.$$p=function(){var a=D.$destructure(arguments),l=L(s,a);(t===void 0||l["$<=>"](t)<0)&&(r=a,t=l),(i===void 0||l["$<=>"](i)>0)&&(e=a,i=l)},n.$each(),[r,e]}),J(c,"$none?",function _(s){try{var n=$e("return"),r=_.$$p||u,e=this;return _.$$p=null,z(s!==void 0)?T(e,"each",[],function t(i){var a,l,v=u;if(a=W(arguments),l=a,v=B(l),z(T(s,"public_send",["==="].concat(p(v)))))n.$throw(!1,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}):r!==u?T(e,"each",[],function t(i){var a,l;if(a=W(arguments),l=a,z($.yieldX(r,p(l))))n.$throw(!1,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}):T(e,"each",[],function t(i){var a,l,v=u;if(a=W(arguments),l=a,v=D.$destructure(l),z(v))n.$throw(!1,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}),!0}catch(t){if(t===n)return t.$v;throw t}finally{n.is_orphan=!0}},-1),J(c,"$one?",function _(s){try{var n=$e("return"),r=_.$$p||u,e=this,t=u;return _.$$p=null,t=0,z(s!==void 0)?T(e,"each",[],function i(a){var l,v,N=u;if(l=W(arguments),v=l,N=B(v),z(T(s,"public_send",["==="].concat(p(N)))))if(t=H(t,1),z(Y(t,1)))n.$throw(!1,i.$$is_lambda);else return u;else return u},{$$arity:-1,$$ret:n}):r!==u?T(e,"each",[],function i(a){var l,v;if(l=W(arguments),v=l,!z($.yieldX(r,p(v))))return u;if(t=H(t,1),z(Y(t,1)))n.$throw(!1,i.$$is_lambda);else return u},{$$arity:-1,$$ret:n}):T(e,"each",[],function i(a){var l,v;if(l=W(arguments),v=l,!z(D.$destructure(v)))return u;if(t=H(t,1),z(Y(t,1)))n.$throw(!1,i.$$is_lambda);else return u},{$$arity:-1,$$ret:n}),t["$=="](1)}catch(i){if(i===n)return i.$v;throw i}finally{n.is_orphan=!0}},-1),J(c,"$partition",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,s===u)return T(n,"enum_for",["partition"],function t(){var i=t.$$s==null?this:t.$$s;return i.$enumerator_size()},{$$s:n});var r=[],e=[];return n.$each.$$p=function(){var t=D.$destructure(arguments),i=L(s,t);z(i)?r.push(t):e.push(t)},n.$each(),[r,e]}),J(c,"$reject",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,s===u)return T(n,"enum_for",["reject"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:n});var r=[];return n.$each.$$p=function(){var e=D.$destructure(arguments),t=L(s,e);z(t)||r.push(e)},n.$each(),r}),J(c,"$reverse_each",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,s===u)return T(n,"enum_for",["reverse_each"],function t(){var i=t.$$s==null?this:t.$$s;return i.$enumerator_size()},{$$s:n});var r=[];n.$each.$$p=function(){r.push(arguments)},n.$each();for(var e=r.length-1;e>=0;e--)S(s,r[e]);return r}),J(c,"$slice_before",function _(s){var n=_.$$p||u,r=this;return _.$$p=null,z(s===void 0&&n===u)&&G.$raise(d("ArgumentError"),"both pattern and block are given"),z(s!==void 0&&n!==u||arguments.length>1)&&G.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),T(d("Enumerator"),"new",[],function e(t){var i=e.$$s==null?this:e.$$s;t==null&&(t=u);var a=[];n!==u?s===void 0?i.$each.$$p=function(){var l=D.$destructure(arguments),v=L(n,l);z(v)&&a.length>0&&(t["$<<"](a),a=[]),a.push(l)}:i.$each.$$p=function(){var l=D.$destructure(arguments),v=n(l,s.$dup());z(v)&&a.length>0&&(t["$<<"](a),a=[]),a.push(l)}:i.$each.$$p=function(){var l=D.$destructure(arguments),v=s["$==="](l);z(v)&&a.length>0&&(t["$<<"](a),a=[]),a.push(l)},i.$each(),a.length>0&&t["$<<"](a)},{$$s:r})},-1),J(c,"$slice_after",function _(s){var n=_.$$p||u,r=this;return _.$$p=null,z(s===void 0&&n===u)&&G.$raise(d("ArgumentError"),"both pattern and block are given"),z(s!==void 0&&n!==u||arguments.length>1)&&G.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),z(s!==void 0)&&(n=T(G,"proc",[],function(t){return t==null&&(t=u),s["$==="](t)})),T(d("Enumerator"),"new",[],function e(t){var i=e.$$s==null?this:e.$$s;t==null&&(t=u);var a;i.$each.$$p=function(){var l=D.$destructure(arguments),v=L(n,l);a==null&&(a=[]),z(v)?(a.push(l),t.$yield(a),a=null):a.push(l)},i.$each(),a!=null&&t.$yield(a)},{$$s:r})},-1),J(c,"$slice_when",function _(){var s=_.$$p||u,n=this;return _.$$p=null,s===u&&G.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1)"),T(d("Enumerator"),"new",[],function r(e){var t=r.$$s==null?this:r.$$s;e==null&&(e=u);var i=u,a=u;t.$each_cons.$$p=function(){var l=D.$destructure(arguments),v=l[0],N=l[1],P=S(s,[v,N]);a=N,i===u&&(i=[]),z(P)?(i.push(v),e.$yield(i),i=[]):i.push(v)},t.$each_cons(2),i!==u&&(i.push(a),e.$yield(i))},{$$s:n})}),J(c,"$sort",function _(){var s=_.$$p||u,n=this,r=u;return _.$$p=null,r=n.$to_a(),s===u&&(s=A(function(t,i){return t==null&&(t=u),i==null&&(i=u),t["$<=>"](i)})),T(r,"sort",[],s.$to_proc())}),J(c,"$sort_by",function _(){var s=_.$$p||u,n=this,r=u;return _.$$p=null,s===u?T(n,"enum_for",["sort_by"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:n}):(r=T(n,"map",[],function(){var t=u;return t=D.$destructure(arguments),[$.yield1(s,t),t]}),T(r,"sort!",[],function(t,i){return t==null&&(t=u),i==null&&(i=u),t[0]["$<=>"](i[0])}),T(r,"map!",[],function(t){return t==null&&(t=u),t[1]}))}),J(c,"$sum",function _(s){var n=_.$$p||u,r=this,e=u,t=u;return _.$$p=null,s==null&&(s=0),e=s,t=0,T(r,"each",[],function(a){var l,v,N=u,P=u,j=u;return l=W(arguments),v=l,N=n!==u?$.yieldX(n,p(v)):D.$destructure(v),C([d(d("Float"),"INFINITY"),d(d("Float"),"INFINITY")["$-@"]()]["$include?"](N))&&z(N["$respond_to?"]("-"))?(P=k(N,t),j=H(e,P),t=k(k(j,e),P),e=j):e=H(e,N)},-1),e},-1),J(c,"$take",function(s){var n=this;return n.$first(s)}),J(c,"$take_while",function _(){try{var s=$e("return"),n=_.$$p||u,r=this,e=u;return _.$$p=null,z(n)?(e=[],T(r,"each",[],function t(i){var a,l,v=u;return a=W(arguments),l=a,v=D.$destructure(l),z($.yield1(n,v))||s.$throw(e,t.$$is_lambda),e.push(v)},{$$arity:-1,$$ret:s})):r.$enum_for("take_while")}catch(t){if(t===s)return t.$v;throw t}finally{s.is_orphan=!0}}),J(c,"$uniq",function _(){var s=_.$$p||u,n=this,r=u;return _.$$p=null,r=new Map,T(n,"each",[],function(t){var i,a,l,v=u,N=u;return i=W(arguments),a=i,v=D.$destructure(a),N=s!==u?$.yield1(s,v):v,z(r["$key?"](N))?u:(l=[N,v],T(r,"[]=",l),l[l.length-1])},-1),r.$values()}),J(c,"$tally",function(s){var n=this,r=u;return s&&s!==u&&re(s),r=T(T(n,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),z(s)?(T(r,"each",[],function(t,i){var a;return t==null&&(t=u),i==null&&(i=u),a=[t,H(s.$fetch(t,0),i)],T(s,"[]=",a),a[a.length-1]}),s):r},-1),J(c,"$to_h",function _(s){var n=_.$$p||u,r,e,t=this;if(_.$$p=null,r=W(arguments),e=r,n!==u)return T(T(t,"map",[],n.$to_proc()),"to_h",p(e));var i=new Map;return t.$each.$$p=function(){var a=D.$destructure(arguments),l=D["$coerce_to?"](a,d("Array"),"to_ary"),v,N;l.$$is_array||G.$raise(d("TypeError"),"wrong element type "+a.$class()+" (expected array)"),l.length!==2&&G.$raise(d("ArgumentError"),"element has wrong array length (expected 2, was "+l.$length()+")"),v=l[0],N=l[1],$.hash_put(i,v,N)},t.$each.apply(t,e),i},-1),J(c,"$to_set",function _(s,n){var r=_.$$p||u,e,t,i,a=this;return _.$$p=null,e=W(arguments),e.length>0&&(t=e.shift()),t==null&&(t=w("Set")),i=e,T(t,"new",[a].concat(p(i)),r.$to_proc())},-1),J(c,"$zip",function _(s){_.$$p;var n,r,e=this;return _.$$p=null,n=W(arguments),r=n,T(e.$to_a(),"zip",p(r))},-1),x(c,"find","detect"),x(c,"filter","find_all"),x(c,"flat_map","collect_concat"),x(c,"map","collect"),x(c,"member?","include?"),x(c,"reduce","inject"),x(c,"select","find_all"),x(c,"to_a","entries")}("::",E)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function($){var z=$.klass,b=$.truthy,L=$.to_a,S=$.eqeq,re=$.Kernel,Z=$.def,T=$.rb_gt,W=$.rb_lt,p=$.rb_le,D=$.rb_ge,$e=$.rb_plus,J=$.rb_minus,G=$.eqeqeq,O=$.not,Y=$.rb_times,q=$.rb_divide,h=$.alias,R=[],H=$.nil,k=$.$$$;return $.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(F,m,A){var C=z(F,m,"Enumerator"),x=[C].concat(A);return function(E,u,d){var I=z(E,u,"ArithmeticSequence"),g=[I].concat(d),c=$.$r(g),o=I.$$prototype;o.step_arg2=o.receiver_num=o.step_arg1=o.step=o.range=o.topfx=o.bypfx=o.creation_method=o.skipped_arg=H,$.prop(I.$$prototype,"$$is_arithmetic_seq",!0);var w=1/0;return Z(I,"$initialize",function(_,s,n){var r,e=this,t=H;return n==null&&(n="step"),e.creation_method=n,b(_["$is_a?"](k("Array")))?(r=[].concat(L(_)),e.step_arg1=r[0]==null?H:r[0],e.step_arg2=r[1]==null?H:r[1],e.topfx=r[2]==null?H:r[2],e.bypfx=r[3]==null?H:r[3],e.receiver_num=s,e.step=1,e.range=b(e.step_arg2)?(e.step=e.step_arg2,$.Range.$new(e.receiver_num,e.step_arg1,!1)):b(e.step_arg1)?$.Range.$new(e.receiver_num,e.step_arg1,!1):$.Range.$new(e.receiver_num,H,!1)):(b(s)||(e.skipped_arg=!0),r=[_,b(t=s)?t:1],e.range=r[0],e.step=r[1]),e.object=e,S(e.step,0)&&re.$raise(c("ArgumentError"),"step can't be 0"),b(e.step["$respond_to?"]("to_int"))?H:re.$raise(c("ArgumentError"),"no implicit conversion of "+e.step.$class()+" into Integer")},-2),I.$attr_reader("step"),Z(I,"$begin",function(){var _=this;return _.range.$begin()}),Z(I,"$end",function(){var _=this;return _.range.$end()}),Z(I,"$exclude_end?",function(){var _=this;return _.range["$exclude_end?"]()}),Z(I,"$_lesser_than_end?",function(_){var s=this,n=H,r=H;return n=b(r=s.$end())?r:w,b(T(s.$step(),0))?b(s["$exclude_end?"]())?W(_,n):p(_,n):b(s["$exclude_end?"]())?T(_,n):D(_,n)}),Z(I,"$_greater_than_begin?",function(_){var s=this,n=H,r=H;return n=b(r=s.$begin())?r:w["$-@"](),b(T(s.$step(),0))?T(_,n):W(_,n)}),Z(I,"$first",function(_){var s=this,n=H,r=H,e=H;if(n=b(r=s.$begin())?r:w["$-@"](),!b(_))return b(s["$_lesser_than_end?"](n))?n:H;for(e=[];b(b(r=s["$_lesser_than_end?"](n))?T(_,0):r);)e["$<<"](n),n=$e(n,s.$step()),_=J(_,1);return e},-1),Z(I,"$each",function B(){var _=B.$$p||H,s=this,n=H,r=H;if(B.$$p=null,_===H)return s;for(G(H,n=s.$begin())&&re.$raise(c("TypeError"),"nil can't be coerced into Integer"),r=b(n=s.$begin())?n:w["$-@"]();b(s["$_lesser_than_end?"](r));)$.yield1(_,r),r=$e(r,s.$step());return s}),Z(I,"$last",function(_){var s=this,n=H,r=H,e=H;if(G(w,n=s.$end())||G(w["$-@"](),n)?re.$raise(k("FloatDomainError"),s.$end()):G(H,n)&&re.$raise(k("RangeError"),"cannot get the last element of endless arithmetic sequence"),r=J(s.$end(),J(s.$end(),s.$begin())["$%"](s.$step())),b(s["$_lesser_than_end?"](r))||(r=J(r,s.$step())),!b(_))return b(s["$_greater_than_begin?"](r))?r:H;for(e=[];b(b(n=s["$_greater_than_begin?"](r))?T(_,0):n);)e["$<<"](r),r=J(r,s.$step()),_=J(_,1);return e.$reverse()},-1),Z(I,"$size",function(){var _=this,s=H,n=H;return s=b(T(_.$step(),0))?1:-1,O(_["$_lesser_than_end?"](_.$begin()))?0:b([w["$-@"](),w]["$include?"](_.$step()))?1:b([Y(w["$-@"](),s),H]["$include?"](_.$begin()))||b([Y(w,s),H]["$include?"](_.$end()))?w:(n=J(_.$end(),J(_.$end(),_.$begin())["$%"](_.$step())),b(_["$_lesser_than_end?"](n))||(n=J(n,_.$step())),$e(q(J(n,_.$begin()),_.$step()).$abs().$to_i(),1))}),Z(I,"$==",function(_){var s=this,n=H,r=H,e=H,t=H;return b(n=b(r=b(e=b(t=s.$class()["$=="](_.$class()))?s.$begin()["$=="](_.$begin()):t)?s.$end()["$=="](_.$end()):e)?s.$step()["$=="](_.$step()):r)?s["$exclude_end?"]()["$=="](_["$exclude_end?"]()):n}),Z(I,"$hash",function(){var _=this;return[c("ArithmeticSequence"),_.$begin(),_.$end(),_.$step(),_["$exclude_end?"]()].$hash()}),Z(I,"$inspect",function(){var _=this,s=H;return b(_.receiver_num)?(s=b(_.step_arg2)?"("+_.topfx+_.step_arg1.$inspect()+", "+_.bypfx+_.step_arg2.$inspect()+")":b(_.step_arg1)?"("+_.topfx+_.step_arg1.$inspect()+")":H,"("+_.receiver_num.$inspect()+"."+_.creation_method+s+")"):(s=b(_.skipped_arg)?H:"("+_.step+")","(("+_.range.$inspect()+")."+_.creation_method+s+")")}),h(I,"===","=="),h(I,"eql?","==")}(C,C,x)}("::",null,R)};Opal.modules["corelib/enumerator/chain"]=function($){var z=$.deny_frozen_access,b=$.klass,L=$.slice,S=$.def,re=$.send,Z=$.to_a,T=$.truthy,W=$.rb_plus,p=$.thrower,D=$.nil,$e=$.$$$;return $.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(J,G){var O=b(J,G,"Enumerator");return function(Y,q){var h=b(Y,q,"Chain"),R=h.$$prototype;return R.enums=R.iterated=D,S(h,"$initialize",function(k){var F,m,A=this;return F=L(arguments),m=F,z(A),A.enums=m,A.iterated=[],A.object=A},-1),S(h,"$each",function H(k){var F=H.$$p||D,m,A,C=this;return H.$$p=null,m=L(arguments),A=m,F===D?re(C,"to_enum",["each"].concat(Z(A)),function x(){var E=x.$$s==null?this:x.$$s;return E.$size()},{$$s:C}):(re(C.enums,"each",[],function x(E){var u=x.$$s==null?this:x.$$s;return u.iterated==null&&(u.iterated=D),E==null&&(E=D),u.iterated["$<<"](E),re(E,"each",Z(A),F.$to_proc())},{$$s:C}),C)},-1),S(h,"$size",function(k){try{var F=p("return"),m,A,C=this,x=D;return m=L(arguments),A=m,x=0,re(C.enums,"each",[],function E(u){var d=D;return u==null&&(u=D),d=re(u,"size",Z(A)),T([D,$e($e("Float"),"INFINITY")]["$include?"](d))&&F.$throw(d,E.$$is_lambda),x=W(x,d)},{$$ret:F}),x}catch(E){if(E===F)return E.$v;throw E}finally{F.is_orphan=!0}},-1),S(h,"$rewind",function(){var k=this;return re(k.iterated,"reverse_each",[],function(m){return m==null&&(m=D),T(m["$respond_to?"]("rewind"))?m.$rewind():D}),k.iterated=[],k}),S(h,"$inspect",function(){var k=this;return"#<Enumerator::Chain: "+k.enums.$inspect()+">"})}(O,O)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function($){var z=$.deny_frozen_access,b=$.klass,L=$.truthy,S=$.Kernel,re=$.def,Z=$.slice,T=$.send,W=[],p=$.nil,D=$.$$$;return $.add_stubs("include,raise,new,to_proc"),function($e,J,G){var O=b($e,J,"Enumerator"),Y=[O].concat(G);return function(q,h,R){var H=b(q,h,"Generator"),k=[H].concat(R),F=$.$r(k),m=H.$$prototype;return m.block=p,H.$include(D("Enumerable")),re(H,"$initialize",function A(){var C=A.$$p||p,x=this;return A.$$p=null,z(x),L(C)||S.$raise(D("LocalJumpError"),"no block given"),x.block=C}),re(H,"$each",function A(C){var x=A.$$p||p,E,u,d=this,I=p;A.$$p=null,E=Z(arguments),u=E,I=T(F("Yielder"),"new",[],x.$to_proc());try{u.unshift(I),$.yieldX(d.block,u)}catch(g){if(g&&g.$thrower_type=="breaker")return g.$v;throw g}return d},-1)}(Y[0],null,Y)}(W[0],null,W)};Opal.modules["corelib/enumerator/lazy"]=function($){var z=$.truthy,b=$.coerce_to,L=$.yield1,S=$.yieldX,re=$.deny_frozen_access,Z=$.klass,T=$.slice,W=$.send2,p=$.find_super,D=$.to_a,$e=$.defs,J=$.Kernel,G=$.send,O=$.def,Y=$.return_self,q=$.Opal,h=$.rb_lt,R=$.eqeqeq,H=$.rb_plus,k=$.alias,F=[],m=$.nil,A=$.$$$;return $.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(C,x,E){var u=Z(C,x,"Enumerator"),d=[u].concat(E);return function(I,g,c){var o=Z(I,g,"Lazy"),w=[o].concat(c),B=$.$r(w),_=o.$$prototype;return _.enumerator=m,Z(o,A("Exception"),"StopLazyError"),$e(o,"$for",function s(n,r){var e,t,i=s.$$p||m,a=this,l=m;return s.$$p=null,e=T(arguments,1),t=e,l=W(a,p(a,"for",s,!1,!0),"for",[n].concat(D(t)),i),l.enumerator=n,l},-2),O(o,"$initialize",function s(n,r){var e=s.$$p||m,t=this;return s.$$p=null,r==null&&(r=m),re(t),e===m&&J.$raise(A("ArgumentError"),"tried to call lazy new without a block"),t.enumerator=n,W(t,p(t,"initialize",s,!1,!0),"initialize",[r],function(a,l){var v,N;a==null&&(a=m),v=T(arguments,1),N=v;try{return G(n,"each",D(N),function(j){var V,ee;V=T(arguments),ee=V,ee.unshift(a),S(e,ee)},-1)}catch(P){if($.rescue(P,[B("StopLazyError")]))try{return m}finally{$.pop_exception(P)}else throw P}},-2)},-2),O(o,"$lazy",Y),O(o,"$collect",function s(){var n=s.$$p||m,r=this;return s.$$p=null,z(n)||J.$raise(A("ArgumentError"),"tried to call lazy map without a block"),G(B("Lazy"),"new",[r,r.$enumerator_size()],function(t,i){var a,l;t==null&&(t=m),a=T(arguments,1),l=a;var v=S(n,l);t.$yield(v)},-2)}),O(o,"$collect_concat",function s(){var n=s.$$p||m,r=this;return s.$$p=null,z(n)||J.$raise(A("ArgumentError"),"tried to call lazy map without a block"),G(B("Lazy"),"new",[r,m],function(t,i){var a,l;t==null&&(t=m),a=T(arguments,1),l=a;var v=S(n,l);if(v["$respond_to?"]("force")&&v["$respond_to?"]("each"))G(v,"each",[],function(j){return j==null&&(j=m),t.$yield(j)});else{var N=q.$try_convert(v,A("Array"),"to_ary");N===m?t.$yield(v):G(v,"each",[],function(j){return j==null&&(j=m),t.$yield(j)})}},-2)}),O(o,"$drop",function(n){var r=this,e=m,t=m,i=m;return n=b(n,A("Integer"),"to_int"),z(h(n,0))&&J.$raise(A("ArgumentError"),"attempt to drop negative size"),e=r.$enumerator_size(),t=R(A("Integer"),e)&&z(h(n,e))?n:e,i=0,G(B("Lazy"),"new",[r,t],function(l,v){var N,P;return l==null&&(l=m),N=T(arguments,1),P=N,z(h(i,n))?i=H(i,1):G(l,"yield",D(P))},-2)}),O(o,"$drop_while",function s(){var n=s.$$p||m,r=this,e=m;return s.$$p=null,z(n)||J.$raise(A("ArgumentError"),"tried to call lazy drop_while without a block"),e=!0,G(B("Lazy"),"new",[r,m],function(i,a){var l,v;if(i==null&&(i=m),l=T(arguments,1),v=l,z(e)){var N=S(n,v);z(N)||(e=!1,G(i,"yield",D(v)))}else return G(i,"yield",D(v))},-2)}),O(o,"$enum_for",function s(n,r){var e=s.$$p||m,t,i,a,l=this;return s.$$p=null,t=T(arguments),t.length>0&&(i=t.shift()),i==null&&(i="each"),a=t,G(l.$class(),"for",[l,i].concat(D(a)),e.$to_proc())},-1),O(o,"$find_all",function s(){var n=s.$$p||m,r=this;return s.$$p=null,z(n)||J.$raise(A("ArgumentError"),"tried to call lazy select without a block"),G(B("Lazy"),"new",[r,m],function(t,i){var a,l;t==null&&(t=m),a=T(arguments,1),l=a;var v=S(n,l);z(v)&&G(t,"yield",D(l))},-2)}),O(o,"$grep",function s(n){var r=s.$$p||m,e=this;return s.$$p=null,z(r)?G(B("Lazy"),"new",[e,m],function(i,a){var l,v;i==null&&(i=m),l=T(arguments,1),v=l;var N=q.$destructure(v),P=n["$==="](N);z(P)&&(P=L(r,N),i.$yield(L(r,N)))},-2):G(B("Lazy"),"new",[e,m],function(i,a){var l,v;i==null&&(i=m),l=T(arguments,1),v=l;var N=q.$destructure(v),P=n["$==="](N);z(P)&&i.$yield(N)},-2)}),O(o,"$reject",function s(){var n=s.$$p||m,r=this;return s.$$p=null,z(n)||J.$raise(A("ArgumentError"),"tried to call lazy reject without a block"),G(B("Lazy"),"new",[r,m],function(t,i){var a,l;t==null&&(t=m),a=T(arguments,1),l=a;var v=S(n,l);z(v)||G(t,"yield",D(l))},-2)}),O(o,"$take",function(n){var r=this,e=m,t=m,i=m;return n=b(n,A("Integer"),"to_int"),z(h(n,0))&&J.$raise(A("ArgumentError"),"attempt to take negative size"),e=r.$enumerator_size(),t=R(A("Integer"),e)&&z(h(n,e))?n:e,i=0,G(B("Lazy"),"new",[r,t],function(l,v){var N,P;return l==null&&(l=m),N=T(arguments,1),P=N,z(h(i,n))?(G(l,"yield",D(P)),i=H(i,1)):J.$raise(B("StopLazyError"))},-2)}),O(o,"$take_while",function s(){var n=s.$$p||m,r=this;return s.$$p=null,z(n)||J.$raise(A("ArgumentError"),"tried to call lazy take_while without a block"),G(B("Lazy"),"new",[r,m],function(t,i){var a,l;t==null&&(t=m),a=T(arguments,1),l=a;var v=S(n,l);z(v)?G(t,"yield",D(l)):J.$raise(B("StopLazyError"))},-2)}),O(o,"$inspect",function(){var n=this;return"#<"+n.$class()+": "+n.enumerator.$inspect()+">"}),k(o,"force","to_a"),k(o,"filter","find_all"),k(o,"flat_map","collect_concat"),k(o,"map","collect"),k(o,"select","find_all"),k(o,"to_enum","enum_for")}(u,u,d)}("::",null,F)};Opal.modules["corelib/enumerator/yielder"]=function($){var z=$.klass,b=$.def,L=$.slice,S=$.send,re=$.to_a,Z=[],T=$.nil;return $.add_stubs("yield,proc"),function(W,p,D){var $e=z(W,p,"Enumerator"),J=[$e].concat(D);return function(G,O){var Y=z(G,O,"Yielder"),q=Y.$$prototype;return q.block=T,b(Y,"$initialize",function h(){var R=h.$$p||T,H=this;return h.$$p=null,H.block=R,H}),b(Y,"$yield",function(R){var H,k,F=this;H=L(arguments),k=H;var m=$.yieldX(F.block,k);if(m&&m.$thrower_type=="break")throw m;return m},-1),b(Y,"$<<",function(R){var H=this;return H.$yield(R),H}),b(Y,"$to_proc",function(){var R=this;return S(R,"proc",[],function H(k){var F,m,A=H.$$s==null?this:H.$$s;return F=L(arguments),m=F,S(A,"yield",re(m))},{$$arity:-1,$$s:R})})}(J[0],null)}(Z[0],null,Z)};Opal.modules["corelib/enumerator"]=function($){var z=$.slice,b=$.coerce_to,L=$.deny_frozen_access,S=$.klass,re=$.defs,Z=$.truthy,T=$.send,W=$.not,p=$.def,D=$.rb_plus,$e=$.to_a,J=$.Opal,G=$.send2,O=$.find_super,Y=$.rb_ge,q=$.Kernel,h=$.rb_le,R=$.alias,H=$.top,k=[],F=$.nil,m=$.$$$;return $.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),H.$require("corelib/enumerable"),function(A,C,x){var E=S(A,C,"Enumerator"),u=[E].concat(x),d=$.$r(u),I=E.$$prototype;return I.size=I.args=I.object=I.method=I.values=I.cursor=F,E.$include(m("Enumerable")),E.$$prototype.$$is_enumerator=!0,re(E,"$for",function g(c,o,w){var B=g.$$p||F,_,s,n,r=this;g.$$p=null,_=z(arguments,1),_.length>0&&(s=_.shift()),s==null&&(s="each"),n=_;var e=r.$allocate();return e.object=c,e.size=B,e.method=s,e.args=n,e.cursor=0,e},-2),p(E,"$initialize",function g(c){var o=g.$$p||F,w=this;return g.$$p=null,z(arguments),L(w),w.cursor=0,Z(o)?(w.object=T(d("Generator"),"new",[],o.$to_proc()),w.method="each",w.args=[],w.size=arguments[0]||F,Z(w.size)&&W(w.size["$respond_to?"]("call"))?w.size=b(w.size,m("Integer"),"to_int"):F):(w.object=arguments[0],w.method=arguments[1]||"each",w.args=z(arguments,2),w.size=F)},-1),p(E,"$each",function g(c){var o=g.$$p||F,w,B,_=this;return g.$$p=null,w=z(arguments),B=w,Z(o["$nil?"]())&&Z(B["$empty?"]())?_:(B=D(_.args,B),Z(o["$nil?"]())?T(_.$class(),"new",[_.object,_.method].concat($e(B))):T(_.object,"__send__",[_.method].concat($e(B)),o.$to_proc()))},-1),p(E,"$size",function(){var c=this;return Z(c.size["$respond_to?"]("call"))?T(c.size,"call",$e(c.args)):c.size}),p(E,"$with_index",function g(c){var o=g.$$p||F,w=this;if(g.$$p=null,c==null&&(c=0),c=Z(c)?b(c,m("Integer"),"to_int"):0,!Z(o))return T(w,"enum_for",["with_index",c],function _(){var s=_.$$s==null?this:_.$$s;return s.$size()},{$$s:w});var B=c;return w.$each.$$p=function(){var _=J.$destructure(arguments),s=o(_,B);return B++,s},w.$each()},-1),p(E,"$each_with_index",function g(){var c=g.$$p||F,o=this;return g.$$p=null,c===F?T(o,"enum_for",["each_with_index"],function w(){var B=w.$$s==null?this:w.$$s;return B.$size()},{$$s:o}):(G(o,O(o,"each_with_index",g,!1,!0),"each_with_index",[],c),o.object)}),p(E,"$rewind",function(){var c=this;return c.cursor=0,c}),p(E,"$peek_values",function(){var c=this,o=F;return c.values=Z(o=c.values)?o:T(c,"map",[],function(B){var _,s;return _=z(arguments),s=_,s},-1),Z(Y(c.cursor,c.values.$length()))&&q.$raise(m("StopIteration"),"iteration reached an end"),c.values["$[]"](c.cursor)}),p(E,"$peek",function(){var c=this,o=F;return o=c.$peek_values(),Z(h(o.$length(),1))?o["$[]"](0):o}),p(E,"$next_values",function(){var c=this,o=F;return o=c.$peek_values(),c.cursor=D(c.cursor,1),o}),p(E,"$next",function(){var c=this,o=F;return o=c.$next_values(),Z(h(o.$length(),1))?o["$[]"](0):o}),p(E,"$feed",function(c){var o=this;return o.$raise(d("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),p(E,"$+",function(c){var o=this;return m(m("Enumerator"),"Chain").$new(o,c)}),p(E,"$inspect",function(){var c=this,o=F;return o="#<"+c.$class()+": "+c.object.$inspect()+":"+c.method,Z(c.args["$any?"]())&&(o=D(o,"("+c.args.$inspect()["$[]"](m("Range").$new(1,-2))+")")),D(o,">")}),R(E,"with_object","each_with_object"),E.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),E.$autoload("Chain","corelib/enumerator/chain"),E.$autoload("Generator","corelib/enumerator/generator"),E.$autoload("Lazy","corelib/enumerator/lazy"),E.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,k)};Opal.modules["corelib/numeric"]=function($){var z=$.klass,b=$.truthy,L=$.Kernel,S=$.def,re=$.to_ary,Z=$.return_self,T=$.rb_minus,W=$.rb_times,p=$.rb_lt,D=$.eqeq,$e=$.rb_divide,J=$.return_val,G=$.Opal,O=$.slice,Y=$.extract_kwargs,q=$.ensure_kwargs,h=$.hash_get,R=$.not,H=$.send,k=$.rb_ge,F=$.rb_le,m=$.rb_plus,A=$.rb_gt,C=$.alias,x=$.top,E=$.nil,u=$.$$$;return $.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),x.$require("corelib/comparable"),function(d,I){var g=z(d,I,"Numeric");return g.$include(u("Comparable")),S(g,"$coerce",function(o){var w=this;return b(o["$instance_of?"](w.$class()))?[o,w]:[L.$Float(o),L.$Float(w)]}),S(g,"$__coerced__",function(o,w){var B,_,s=this,n=E,r=E;if(b(w["$respond_to?"]("coerce")))return _=w.$coerce(s),B=re(_),n=B[0]==null?E:B[0],r=B[1]==null?E:B[1],n.$__send__(o,r);switch(o.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return L.$raise(u("TypeError"),""+w.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return L.$raise(u("ArgumentError"),"comparison of "+s.$class()+" with "+w.$class()+" failed");default:return E}}),S(g,"$<=>",function(o){var w=this;return b(w["$equal?"](o))?0:E}),S(g,"$+@",Z),S(g,"$-@",function(){var o=this;return T(0,o)}),S(g,"$%",function(o){var w=this;return T(w,W(o,w.$div(o)))}),S(g,"$abs",function(){var o=this;return b(p(o,0))?o["$-@"]():o}),S(g,"$abs2",function(){var o=this;return W(o,o)}),S(g,"$angle",function(){var o=this;return b(p(o,0))?u(u("Math"),"PI"):0}),S(g,"$ceil",function(o){var w=this;return o==null&&(o=0),w.$to_f().$ceil(o)},-1),S(g,"$conj",Z),S(g,"$denominator",function(){var o=this;return o.$to_r().$denominator()}),S(g,"$div",function(o){var w=this;return D(o,0)&&L.$raise(u("ZeroDivisionError"),"divided by o"),$e(w,o).$floor()}),S(g,"$divmod",function(o){var w=this;return[w.$div(o),w["$%"](o)]}),S(g,"$fdiv",function(o){var w=this;return $e(w.$to_f(),o)}),S(g,"$floor",function(o){var w=this;return o==null&&(o=0),w.$to_f().$floor(o)},-1),S(g,"$i",function(){var o=this;return L.$Complex(0,o)}),S(g,"$imag",J(0)),S(g,"$integer?",J(!1)),S(g,"$nonzero?",function(){var o=this;return b(o["$zero?"]())?E:o}),S(g,"$numerator",function(){var o=this;return o.$to_r().$numerator()}),S(g,"$polar",function(){var o=this;return[o.$abs(),o.$arg()]}),S(g,"$quo",function(o){var w=this;return $e(G["$coerce_to!"](w,u("Rational"),"to_r"),o)}),S(g,"$real",Z),S(g,"$real?",J(!0)),S(g,"$rect",function(){var o=this;return[o,0]}),S(g,"$round",function(o){var w=this;return w.$to_f().$round(o)},-1),S(g,"$step",function c(o,w,B){var _=c.$$p||E,s,n,r,e,t,i,a=this,l=E;c.$$p=null,s=O(arguments),n=Y(s),n=q(n),s.length>0&&(r=s.shift()),s.length>0&&(e=s.shift()),t=h(n,"to"),i=h(n,"by"),r!==void 0&&t!==void 0&&L.$raise(u("ArgumentError"),"to is given twice"),e!==void 0&&i!==void 0&&L.$raise(u("ArgumentError"),"step is given twice"),t!==void 0&&(r=t),i!==void 0&&(e=i),r===void 0&&(r=E);function v(){e===E&&L.$raise(u("TypeError"),"step must be numeric"),e!=null&&e["$=="](0)&&L.$raise(u("ArgumentError"),"step can't be 0"),(e===E||e==null)&&(e=1);var ge=e["$<=>"](0);ge===E&&L.$raise(u("ArgumentError"),"0 can't be coerced into "+e.$class()),(r===E||r==null)&&(r=ge>0?u(u("Float"),"INFINITY"):u(u("Float"),"INFINITY")["$-@"]()),G.$compare(a,r)}function N(){if(e>0&&a>r||e<0&&a<r)return 0;if(e===1/0||e===-1/0)return 1;var ge=Math.abs,ve=Math.floor,me=(ge(a)+ge(r)+ge(r-a))/ge(e)*u(u("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((r-a)/e+me)+1)}function P(){if(v(),e===0)return 1/0;if(e%1!==0)return N();if(e>0&&a>r||e<0&&a<r)return 0;var ge=Math.ceil,ve=Math.abs,me=ve(a-r)+1,be=ve(e);return ge(me/be)}if(_===E)return(R(r)||b(r["$is_a?"](u("Numeric"))))&&(R(e)||b(e["$is_a?"](u("Numeric"))))?u(u("Enumerator"),"ArithmeticSequence").$new([r,e,b(t)?"to: ":E,b(i)?"by: ":E],a):H(a,"enum_for",["step",r,e],P.$to_proc());v();var j=e["$negative?"](),V=e["$=="](0)||r===1/0&&!j||r===-1/0&&j;if(a.$$is_number&&e.$$is_number&&r.$$is_number)if(a%1===0&&(V||r%1===0)&&e%1===0){var ee=a;if(V)for(;;ee+=e)_(ee);else if(j)for(;ee>=r;ee+=e)_(ee);else for(;ee<=r;ee+=e)_(ee);return a}else{var ae=a.$to_f().valueOf();e=e.$to_f().valueOf(),r=r.$to_f().valueOf();var oe=N();if(!isFinite(e))oe!==0&&_(ae);else if(e===0)for(;;)_(ae);else for(var _e=0;_e<oe;_e++){var de=_e*e+a;(e>=0?r<de:r>de)&&(de=r),_(de)}return a}for(l=a;b(j?k(l,r):F(l,r));)$.yield1(_,l),l=m(l,e)},-1),S(g,"$to_c",function(){var o=this;return L.$Complex(o,0)}),S(g,"$to_int",function(){var o=this;return o.$to_i()}),S(g,"$truncate",function(o){var w=this;return o==null&&(o=0),w.$to_f().$truncate(o)},-1),S(g,"$zero?",function(){var o=this;return o["$=="](0)}),S(g,"$positive?",function(){var o=this;return A(o,0)}),S(g,"$negative?",function(){var o=this;return p(o,0)}),S(g,"$dup",Z),S(g,"$clone",function(o){var w=this;return o=q(o),h(o,"freeze"),w},-1),S(g,"$finite?",J(!0)),S(g,"$infinite?",J(E)),C(g,"arg","angle"),C(g,"conjugate","conj"),C(g,"imaginary","imag"),C(g,"magnitude","abs"),C(g,"modulo","%"),C(g,"phase","arg"),C(g,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function($){var z=$.truthy,b=$.falsy,L=$.yield1,S=$.hash_get,re=$.hash_put,Z=$.hash_delete,T=$.coerce_to,W=$.respond_to,p=$.deny_frozen_access,D=$.freeze,$e=$.opal32_init,J=$.opal32_add,G=$.klass,O=$.slice,Y=$.defs,q=$.Kernel,h=$.def,R=$.Opal,H=$.eqeqeq,k=$.send2,F=$.find_super,m=$.send,A=$.rb_gt,C=$.rb_times,x=$.eqeq,E=$.rb_minus,u=$.to_a,d=$.to_ary,I=$.gvars,g=$.rb_ge,c=$.assign_ivar,o=$.rb_lt,w=$.return_self,B=$.neqeq,_=$.alias,s=$.top,n=[],r=$.nil,e=$.$$$;return $.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),s.$require("corelib/enumerable"),s.$require("corelib/numeric"),function(t,i,a){var l=G(t,i,"Array"),v=[l].concat(a),N=$.$r(v);l.$include(e("Enumerable")),$.prop(l.$$prototype,"$$is_array",!0);function P(ie){for(var M=ie[0],K=1,X=ie.length;K<X;K++)ie[K-1]=ie[K];return ie.pop(),M}function j(ie,M){return M.$$name===$.Array?ie:M.$allocate().$replace(ie.$to_a())}function V(ie,M,K){for(var X,Q=null,ne=new Array(ie.length),se=0,le=0;se<ie.length;se++){if(!Q)try{X=L(K,ie[se])}catch(fe){Q=fe}(Q||M(X))&&(ne[le]=ie[se],le+=1)}if(le!==se&&(ie.splice.apply(ie,[0,ne.length].concat(ne)),ie.splice(le,ne.length)),Q)throw Q}function ee(ie){return ie.$$is_array||(ie=T(ie,e("Array"),"to_ary")),ie.$to_a()}function ae(ie,M){var K=M.length;if(K>6&&K<32767)ie.push.apply(ie,M);else for(var X=0;X<K;X++)ie.push(M[X])}Y(l,"$[]",function(M){var K,X,Q=this;return K=O(arguments),X=K,j(X,Q)},-1),h(l,"$initialize",function ie(M,K){var X=ie.$$p||r,Q=this;if(ie.$$p=null,M==null&&(M=r),K==null&&(K=r),p(Q),K!==r&&X!==r&&q.$warn("warning: block supersedes default value argument"),M>e(e("Integer"),"MAX")&&q.$raise(e("ArgumentError"),"array size too big"),arguments.length>2&&q.$raise(e("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return Q.length>0&&Q.splice(0,Q.length),Q;if(arguments.length===1){if(M.$$is_array)return Q.$replace(M.$to_a()),Q;if(M["$respond_to?"]("to_ary"))return Q.$replace(M.$to_ary()),Q}M=T(M,e("Integer"),"to_int"),M<0&&q.$raise(e("ArgumentError"),"negative array size"),Q.splice(0,Q.length);var ne,se;if(X===r)for(ne=0;ne<M;ne++)Q.push(K);else for(ne=0,se;ne<M;ne++)se=X(ne),Q[ne]=se;return Q},-1),Y(l,"$try_convert",function(M){return R["$coerce_to?"](M,e("Array"),"to_ary")}),h(l,"$&",function(M){var K=this;if(M=ee(M),K.length===0||M.length===0)return[];var X=[],Q=new Map,ne,se,le;for(ne=0,se=M.length;ne<se;ne++)re(Q,M[ne],!0);for(ne=0,se=K.length;ne<se;ne++)le=K[ne],Z(Q,le)!==void 0&&X.push(le);return X}),h(l,"$|",function(M){var K=this;M=ee(M);var X=new Map,Q,ne;for(Q=0,ne=K.length;Q<ne;Q++)re(X,K[Q],!0);for(Q=0,ne=M.length;Q<ne;Q++)re(X,M[Q],!0);return X.$keys()}),h(l,"$*",function(M){var K=this;if(z(M["$respond_to?"]("to_str")))return K.$join(M.$to_str());M=T(M,e("Integer"),"to_int"),z(M<0)&&q.$raise(e("ArgumentError"),"negative argument");for(var X=[],Q=K.$to_a(),ne=0;ne<M;ne++)X=X.concat(Q);return X}),h(l,"$+",function(M){var K=this;return M=ee(M),K.concat(M)}),h(l,"$-",function(M){var K=this;if(M=ee(M),z(K.length===0))return[];if(z(M.length===0))return K.slice();var X=[],Q=new Map,ne,se,le;for(ne=0,se=M.length;ne<se;ne++)re(Q,M[ne],!0);for(ne=0,se=K.length;ne<se;ne++)le=K[ne],S(Q,le)===void 0&&X.push(le);return X}),h(l,"$<<",function(M){var K=this;return p(K),K.push(M),K}),h(l,"$<=>",function(M){var K=this;if(H(e("Array"),M))M=M.$to_a();else if(z(M["$respond_to?"]("to_ary")))M=M.$to_ary().$to_a();else return r;if(K===M)return 0;for(var X=Math.min(K.length,M.length),Q=0;Q<X;Q++){var ne=K[Q]["$<=>"](M[Q]);if(ne!==0)return ne}return K.length["$<=>"](M.length)}),h(l,"$==",function(M){var K=this,X={};function Q(ne,se){var le,fe,f,y;if(ne===se)return!0;if(!se.$$is_array)return W(se,"$to_ary")?se["$=="](ne):!1;if(ne.$$constructor!==Array&&(ne=ne.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),ne.length!==se.length)return!1;for(X[ne.$object_id()]=!0,le=0,fe=ne.length;le<fe;le++)if(f=ne[le],y=se[le],f.$$is_array){if(y.$$is_array&&y.length!==f.length||!X.hasOwnProperty(f.$object_id())&&!Q(f,y))return!1}else if(!f["$=="](y))return!1;return!0}return Q(K,M)});function oe(ie,M){var K=ie.length,X,Q,ne,se;return X=M.excl,Q=M.begin===r?0:T(M.begin,$.Integer,"to_int"),ne=M.end===r?-1:T(M.end,$.Integer,"to_int"),Q<0&&(Q+=K,Q<0)||(M.excl_rev&&M.begin!==r&&(Q+=1),Q>K)?r:ne<0&&(ne+=K,ne<0)?[]:((!X||M.end===r)&&(ne+=1),se=ie.slice(Q,ne),se)}function _e(ie,M){var K,X=[],Q=0,ne;for(M.step<0?(ne={begin:M.range.end,end:M.range.begin,excl:!1,excl_rev:M.range.excl},K=oe(ie,ne).$reverse()):K=oe(ie,M.range);Q<K.length;)X.push(K[Q]),Q+=Math.abs(M.step);return X}function de(ie,M,K){var X=ie.length,Q;return M=T(M,$.Integer,"to_int"),M<0&&(M+=X,M<0)?r:K===void 0?M>=X||M<0?r:ie[M]:(K=T(K,$.Integer,"to_int"),K<0||M>X||M<0?r:(Q=ie.slice(M,M+K),Q))}h(l,"$[]",function(M,K){var X=this;return M.$$is_range?oe(X,M):M.$$is_arithmetic_seq?_e(X,M):de(X,M,K)},-2),h(l,"$[]=",function(M,K,X){var Q=this,ne=r,se=r;p(Q),ne=r;var le,fe=Q.length;if(M.$$is_range){K.$$is_array?ne=K.$to_a():K["$respond_to?"]("to_ary")?ne=K.$to_ary().$to_a():ne=[K];var f=M.excl,y=M.begin===r?0:T(M.begin,$.Integer,"to_int"),U=M.end===r?-1:T(M.end,$.Integer,"to_int");if(y<0&&(y+=fe,y<0&&q.$raise(e("RangeError"),""+M.$inspect()+" out of range")),U<0&&(U+=fe),(!f||M.end===r)&&(U+=1),y>fe)for(le=fe;le<y;le++)Q[le]=r;return U<0?Q.splice.apply(Q,[y,0].concat(ne)):Q.splice.apply(Q,[y,U-y].concat(ne)),K}else{X===void 0?se=1:(se=K,K=X,K.$$is_array?ne=K.$to_a():K["$respond_to?"]("to_ary")?ne=K.$to_ary().$to_a():ne=[K]);var te;if(M=T(M,e("Integer"),"to_int"),se=T(se,e("Integer"),"to_int"),M<0&&(te=M,M+=fe,M<0&&q.$raise(e("IndexError"),"index "+te+" too small for array; minimum "+-Q.length)),se<0&&q.$raise(e("IndexError"),"negative length ("+se+")"),M>fe)for(le=fe;le<M;le++)Q[le]=r;return X===void 0?Q[M]=K:Q.splice.apply(Q,[M,se].concat(ne)),K}},-3),h(l,"$any?",function ie(M){var K=ie.$$p||r,X=this;return ie.$$p=null,X.length===0?!1:k(X,F(X,"any?",ie,!1,!0),"any?",[M],K)},-1),h(l,"$assoc",function(M){for(var K=this,X=0,Q=K.length,ne;X<Q;X++)if(ne=K[X],ne.length&&ne[0]["$=="](M))return ne;return r}),h(l,"$at",function(M){var K=this;return M=T(M,e("Integer"),"to_int"),M<0&&(M+=K.length),M<0||M>=K.length?r:K[M]}),h(l,"$bsearch_index",function ie(){var M=ie.$$p||r,K=this;if(ie.$$p=null,M===r)return K.$enum_for("bsearch_index");for(var X=0,Q=K.length,ne,se,le,fe=!1,f=r;X<Q;){if(ne=X+Math.floor((Q-X)/2),se=K[ne],le=L(M,se),le===!0)f=ne,fe=!0;else if(le===!1||le===r)fe=!1;else if(le.$$is_number){if(le===0)return ne;fe=le<0}else q.$raise(e("TypeError"),"wrong argument type "+le.$class()+" (must be numeric, true, false or nil)");fe?Q=ne:X=ne+1}return f}),h(l,"$bsearch",function ie(){var M=ie.$$p||r,K=this,X=r;return ie.$$p=null,M===r?K.$enum_for("bsearch"):(X=m(K,"bsearch_index",[],M.$to_proc()),X!=null&&X.$$is_number?K[X]:X)}),h(l,"$cycle",function ie(M){var K=ie.$$p||r,X=this;if(ie.$$p=null,M==null&&(M=r),K===r)return m(X,"enum_for",["cycle",M],function se(){var le=se.$$s==null?this:se.$$s;return z(M["$nil?"]())?e(e("Float"),"INFINITY"):(M=R["$coerce_to!"](M,e("Integer"),"to_int"),z(A(M,0))?C(le.$enumerator_size(),M):0)},{$$s:X});if(z(X["$empty?"]())||x(M,0))return r;var Q,ne;if(M===r)for(;;)for(Q=0,ne=X.length;Q<ne;Q++)L(K,X[Q]);else{if(M=R["$coerce_to!"](M,e("Integer"),"to_int"),M<=0)return X;for(;M>0;){for(Q=0,ne=X.length;Q<ne;Q++)L(K,X[Q]);M--}}return X},-1),h(l,"$clear",function(){var M=this;return p(M),M.splice(0,M.length),M}),h(l,"$count",function ie(M){var K=ie.$$p||r,X=this;return ie.$$p=null,z(M!==void 0)||z(K)?k(X,F(X,"count",ie,!1,!0),"count",[M],K):X.$size()},-1),h(l,"$initialize_copy",function(M){var K=this;return K.$replace(M)}),h(l,"$collect",function ie(){var M=ie.$$p||r,K=this;if(ie.$$p=null,M===r)return m(K,"enum_for",["collect"],function se(){var le=se.$$s==null?this:se.$$s;return le.$size()},{$$s:K});for(var X=[],Q=0;Q<K.length;Q++){var ne=L(M,K[Q]);X[Q]=ne}return X}),h(l,"$collect!",function ie(){var M=ie.$$p||r,K=this;if(ie.$$p=null,M===r)return m(K,"enum_for",["collect!"],function ne(){var se=ne.$$s==null?this:ne.$$s;return se.$size()},{$$s:K});p(K);for(var X=0;X<K.length;X++){var Q=L(M,K[X]);K[X]=Q}return K});function ge(ie,M){return ie===M||M===0?1:M>0&&ie>M?ge(ie-1,M-1)+ge(ie-1,M):0}h(l,"$combination",function ie(M){var K=ie.$$p||r,X=this,Q=r;if(ie.$$p=null,Q=R["$coerce_to!"](M,e("Integer"),"to_int"),K===r)return m(X,"enum_for",["combination",Q],function te(){var ue=te.$$s==null?this:te.$$s;return ge(ue.length,Q)},{$$s:X});var ne,se,le,fe,f,y,U;if(Q===0)$.yield1(K,[]);else if(Q===1)for(ne=0,se=X.length;ne<se;ne++)$.yield1(K,[X[ne]]);else if(Q===X.length)$.yield1(K,X.slice());else if(Q>=0&&Q<X.length){for(le=[],ne=0;ne<=Q+1;ne++)le.push(0);for(fe=[],f=0,y=!1,le[0]=-1;!y;){for(fe[f]=X[le[f+1]];f<Q-1;)f++,U=le[f+1]=le[f]+1,fe[f]=X[U];$.yield1(K,fe.slice()),f++;do y=f===0,le[f]++,f--;while(le[f+1]+Q===X.length+f+1)}}return X}),h(l,"$repeated_combination",function ie(M){var K=ie.$$p||r,X=this,Q=r;if(ie.$$p=null,Q=R["$coerce_to!"](M,e("Integer"),"to_int"),K===r)return m(X,"enum_for",["repeated_combination",Q],function se(){var le=se.$$s==null?this:se.$$s;return ge(le.length+Q-1,Q)},{$$s:X});function ne(se,le,fe,f){if(fe.length==se){var y=fe.slice();$.yield1(K,y);return}for(var U=le;U<f.length;U++)fe.push(f[U]),ne(se,U,fe,f),fe.pop()}return Q>=0&&ne(Q,0,[],X),X}),h(l,"$compact",function(){for(var M=this,K=[],X=0,Q=M.length,ne;X<Q;X++)(ne=M[X])!==r&&K.push(ne);return K}),h(l,"$compact!",function(){var M=this;p(M);for(var K=M.length,X=0,Q=M.length;X<Q;X++)M[X]===r&&(M.splice(X,1),Q--,X--);return M.length===K?r:M}),h(l,"$concat",function(M){var K,X,Q=this;return K=O(arguments),X=K,p(Q),X=m(X,"map",[],function ne(se){var le=ne.$$s==null?this:ne.$$s;return se==null&&(se=r),se=ee(se),z(se["$equal?"](le))&&(se=se.$dup()),se},{$$s:Q}),m(X,"each",[],function ne(se){var le=ne.$$s==null?this:ne.$$s;se==null&&(se=r);for(var fe=0,f=se.length;fe<f;fe++)le.push(se[fe])},{$$s:Q}),Q},-1),h(l,"$delete",function ie(M){var K=ie.$$p||r,X=this;ie.$$p=null;for(var Q=X.length,ne=0,se=Q;ne<se;ne++)X[ne]["$=="](M)&&(p(X),X.splice(ne,1),se--,ne--);return X.length===Q?K!==r?$.yieldX(K,[]):r:M}),h(l,"$delete_at",function(M){var K=this;if(p(K),M=T(M,e("Integer"),"to_int"),M<0&&(M+=K.length),M<0||M>=K.length)return r;var X=K[M];return K.splice(M,1),X}),h(l,"$delete_if",function ie(){var M=ie.$$p||r,K=this;return ie.$$p=null,M===r?m(K,"enum_for",["delete_if"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:K}):(p(K),V(K,b,M),K)}),h(l,"$difference",function(M){var K,X,Q=this;return K=O(arguments),X=K,m(X,"reduce",[Q.$to_a().$dup()],function(se,le){return se==null&&(se=r),le==null&&(le=r),E(se,le)})},-1),h(l,"$dig",function(M,K){var X,Q,ne=this,se=r;return X=O(arguments,1),Q=X,se=ne["$[]"](M),se===r||Q.length===0?se:(z(se["$respond_to?"]("dig"))||q.$raise(e("TypeError"),""+se.$class()+" does not have #dig method"),m(se,"dig",u(Q)))},-2),h(l,"$drop",function(M){var K=this;return M=T(M,e("Integer"),"to_int"),M<0&&q.$raise(e("ArgumentError")),K.slice(M)}),h(l,"$dup",function ie(){var M=ie.$$p||r,K=this;return ie.$$p=null,K.$$class===$.Array&&K.$$class.$allocate.$$pristine&&K.$copy_instance_variables.$$pristine&&K.$initialize_dup.$$pristine?K.slice(0):k(K,F(K,"dup",ie,!1,!0),"dup",[],M)}),h(l,"$each",function ie(){var M=ie.$$p||r,K=this;if(ie.$$p=null,M===r)return m(K,"enum_for",["each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:K});for(var X=0;X<K.length;X++)L(M,K[X]);return K}),h(l,"$each_index",function ie(){var M=ie.$$p||r,K=this;if(ie.$$p=null,M===r)return m(K,"enum_for",["each_index"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:K});for(var X=0;X<K.length;X++)L(M,X);return K}),h(l,"$empty?",function(){var M=this;return M.length===0}),h(l,"$eql?",function(M){var K=this,X={};function Q(ne,se){var le,fe,f,y;if(!se.$$is_array||(se=se.$to_a(),ne.length!==se.length))return!1;for(X[ne.$object_id()]=!0,le=0,fe=ne.length;le<fe;le++)if(f=ne[le],y=se[le],f.$$is_array){if(y.$$is_array&&y.length!==f.length||!X.hasOwnProperty(f.$object_id())&&!Q(f,y))return!1}else if(!f["$eql?"](y))return!1;return!0}return Q(K,M)}),h(l,"$fetch",function ie(M,K){var X=ie.$$p||r,Q=this;ie.$$p=null;var ne=M;if(M=T(M,e("Integer"),"to_int"),M<0&&(M+=Q.length),M>=0&&M<Q.length)return Q[M];if(X!==r&&K!=null&&Q.$warn("warning: block supersedes default value argument"),X!==r)return X(ne);if(K!=null)return K;Q.length===0?q.$raise(e("IndexError"),"index "+ne+" outside of array bounds: 0...0"):q.$raise(e("IndexError"),"index "+ne+" outside of array bounds: -"+Q.length+"..."+Q.length)},-2),h(l,"$fill",function ie(M){var K=ie.$$p||r,X,Q,ne,se,le=this,fe=r,f=r,y=r,U=r,te=r;ie.$$p=null,X=O(arguments),Q=X,p(le);var ue,ce;if(z(K)?(z(Q.length>2)&&q.$raise(e("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 0..2)"),se=Q,ne=d(se),fe=ne[0]==null?r:ne[0],f=ne[1]==null?r:ne[1]):(z(Q.length==0)?q.$raise(e("ArgumentError"),"wrong number of arguments (0 for 1..3)"):z(Q.length>3)&&q.$raise(e("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 1..3)"),se=Q,ne=d(se),y=ne[0]==null?r:ne[0],fe=ne[1]==null?r:ne[1],f=ne[2]==null?r:ne[2]),H(e("Range"),fe)){if(z(f)&&q.$raise(e("TypeError"),"length invalid with range"),U=fe.begin===r?0:T(fe.begin,e("Integer"),"to_int"),z(U<0)&&(U+=this.length),z(U<0)&&q.$raise(e("RangeError"),""+fe.$inspect()+" out of range"),te=fe.end===r?-1:T(fe.end,e("Integer"),"to_int"),z(te<0)&&(te+=this.length),z(fe["$exclude_end?"]())||(te+=1),z(te<=U))return le}else if(z(fe))if(U=T(fe,e("Integer"),"to_int"),z(U<0)&&(U+=this.length),z(U<0)&&(U=0),z(f)){if(te=T(f,e("Integer"),"to_int"),z(te==0))return le;te+=U}else te=this.length;else U=0,te=this.length;if(z(U>this.length))for(ue=this.length;ue<te;ue++)le[ue]=r;if(z(te>this.length)&&(this.length=te),z(K))for(this.length;U<te;U++)ce=K(U),le[U]=ce;else for(this.length;U<te;U++)le[U]=y;return le},-1),h(l,"$first",function(M){var K=this;return M==null?K.length===0?r:K[0]:(M=T(M,e("Integer"),"to_int"),M<0&&q.$raise(e("ArgumentError"),"negative array size"),K.slice(0,M))},-1),h(l,"$flatten",function(M){var K=this;function X(Q,ne){var se=[],le,fe,f,y;for(Q=Q.$to_a(),le=0,fe=Q.length;le<fe;le++){if(f=Q[le],!W(f,"$to_ary",!0)){se.push(f);continue}if(y=f.$to_ary(),y===r){se.push(f);continue}switch(y.$$is_array||q.$raise(e("TypeError")),y===K&&q.$raise(e("ArgumentError")),ne){case void 0:se=se.concat(X(y));break;case 0:se.push(y);break;default:ae(se,X(y,ne-1))}}return se}return M!==void 0&&(M=T(M,e("Integer"),"to_int")),X(K,M)},-1),h(l,"$flatten!",function(M){var K=this;p(K);var X=K.$flatten(M);if(K.length==X.length){for(var Q=0,ne=K.length;Q<ne&&K[Q]===X[Q];Q++);if(Q==ne)return r}return K.$replace(X),K},-1),h(l,"$freeze",function(){var M=this;return z(M["$frozen?"]())?M:D(M)});var ve;h(l,"$hash",function(){var M=this,K=ve===void 0,X=$e(),Q=M.$object_id(),ne,se,le;if(X=J(X,10),X=J(X,M.length),K)ve=Object.create(null);else if(ve[Q])return J(X,16843009);try{for(le in ve)if(ne=ve[le],M["$eql?"](ne))return J(X,16843009);for(ve[Q]=M,se=0;se<M.length;se++)ne=M[se],X=J(X,ne.$hash());return X}finally{K&&(ve=void 0)}}),h(l,"$include?",function(M){for(var K=this,X=0,Q=K.length;X<Q;X++)if(K[X]["$=="](M))return!0;return!1}),h(l,"$index",function ie(M){var K=ie.$$p||r,X=this;ie.$$p=null;var Q,ne,se;if(M!=null&&K!==r&&X.$warn("warning: given block not used"),M!=null){for(Q=0,ne=X.length;Q<ne;Q++)if(X[Q]["$=="](M))return Q}else if(K!==r){for(Q=0;Q<X.length;Q++)if(se=K(X[Q]),se!==!1&&se!==r)return Q}else return X.$enum_for("index");return r},-1),h(l,"$insert",function(M,K){var X,Q,ne=this;if(X=O(arguments,1),Q=X,p(ne),M=T(M,e("Integer"),"to_int"),Q.length>0){if(M<0&&(M+=ne.length+1,M<0&&q.$raise(e("IndexError"),""+M+" is out of bounds")),M>ne.length)for(var se=ne.length;se<M;se++)ne.push(r);ne.splice.apply(ne,[M,0].concat(Q))}return ne},-2);var me=[];h(l,"$inspect",function(){var M=this,K=[],X=M.$__id__(),Q=!0;return function(){try{if(me.indexOf(X)!==-1)return Q=!1,"[...]";me.push(X);for(var ne=0,se=M.length;ne<se;ne++){var le=M["$[]"](ne);K.push(N("Opal").$inspect(le))}return"["+K.join(", ")+"]"}finally{Q&&me.pop()}}()}),h(l,"$intersection",function(M){var K,X,Q=this,ne=r,se=r;return K=O(arguments),X=K,X.length===0?Q.$to_a().$dup():(X=X.map(ee),Q.length===0?[]:(X=m(X,"sort_by",[],"length".$to_proc()),z(Q.length<X[0].length)?m(X,"reduce",[Q],"&".$to_proc()):(ne=X.pop(),se=m(X,"reduce",[ne],"&".$to_proc()),Q["$&"](se))))},-1),h(l,"$intersect?",function(M){var K=this,X,Q,ne=new Map,se,le;for(K.length<M.length?(X=K,Q=M):(X=M,Q=K),se=0,le=X.length;se<le;se++)re(ne,X[se],!0);for(se=0,le=Q.length;se<le;se++)if(S(ne,Q[se]))return!0;return!1}),h(l,"$join",function(M){var K=this;if(I[","]==null&&(I[","]=r),M==null&&(M=r),z(K.length===0))return"";z(M===r)&&(M=I[","]);var X=[],Q,ne,se,le;for(Q=0,ne=K.length;Q<ne;Q++){if(se=K[Q],W(se,"$to_str")&&(le=se.$to_str(),le!==r)){X.push(le.$to_s());continue}if(W(se,"$to_ary")&&(le=se.$to_ary(),le===K&&q.$raise(e("ArgumentError")),le!==r)){X.push(le.$join(M));continue}if(W(se,"$to_s")&&(le=se.$to_s(),le!==r)){X.push(le);continue}q.$raise(e("NoMethodError").$new(""+N("Opal").$inspect(K.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return M===r?X.join(""):X.join(R["$coerce_to!"](M,e("String"),"to_str").$to_s())},-1),h(l,"$keep_if",function ie(){var M=ie.$$p||r,K=this;return ie.$$p=null,M===r?m(K,"enum_for",["keep_if"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:K}):(p(K),V(K,z,M),K)}),h(l,"$last",function(M){var K=this;return M==null?K.length===0?r:K[K.length-1]:(M=T(M,e("Integer"),"to_int"),M<0&&q.$raise(e("ArgumentError"),"negative array size"),M>K.length&&(M=K.length),K.slice(K.length-M,K.length))},-1),h(l,"$length",function(){var M=this;return M.length}),h(l,"$max",function ie(M){var K=ie.$$p||r,X=this;return ie.$$p=null,m(X.$each(),"max",[M],K.$to_proc())},-1),h(l,"$min",function ie(){var M=ie.$$p||r,K=this;return ie.$$p=null,m(K.$each(),"min",[],M.$to_proc())});function be(ie,M){for(var K=M>=0?1:0;M;)K*=ie,ie--,M--;return K}return h(l,"$permutation",function ie(M){var K=ie.$$p||r,X=this,Q=r,ne=r;if(ie.$$p=null,K===r)return m(X,"enum_for",["permutation",M],function y(){var U=y.$$s==null?this:y.$$s;return be(U.length,M===void 0?U.length:M)},{$$s:X});var se,le,fe;if(M===void 0?M=X.length:M=T(M,e("Integer"),"to_int"),!(M<0||X.length<M))if(M===0)$.yield1(K,[]);else if(M===1)for(var f=0;f<X.length;f++)$.yield1(K,[X[f]]);else Q=N("Array").$new(M),ne=N("Array").$new(X.length,!1),se=function(y,U,te,ue,ce){X=this;for(var he=0;he<X.length;he++)if(ue["$[]"](he)["$!"]())if(U[te]=he,te<y-1)ue[he]=!0,se.call(X,y,U,te+1,ue,ce),ue[he]=!1;else{fe=[];for(var pe=0;pe<U.length;pe++)fe.push(X[U[pe]]);L(ce,fe)}},K!==r?(le=X.slice(),se.call(le,M,Q,0,ne,K)):se.call(X,M,Q,0,ne,K);return X},-1),h(l,"$repeated_permutation",function ie(M){var K=ie.$$p||r,X=this,Q=r;if(ie.$$p=null,Q=R["$coerce_to!"](M,e("Integer"),"to_int"),K===r)return m(X,"enum_for",["repeated_permutation",Q],function se(){var le=se.$$s==null?this:se.$$s;return z(g(Q,0))?le.$size()["$**"](Q):0},{$$s:X});function ne(se,le,fe){if(le.length==se){var f=le.slice();$.yield1(K,f);return}for(var y=0;y<fe.length;y++)le.push(fe[y]),ne(se,le,fe),le.pop()}return ne(Q,[],X.slice()),X}),h(l,"$pop",function(M){var K=this;return p(K),z(M===void 0)?z(K.length===0)?r:K.pop():(M=T(M,e("Integer"),"to_int"),z(M<0)&&q.$raise(e("ArgumentError"),"negative array size"),z(K.length===0)?[]:z(M===1)?[K.pop()]:z(M>K.length)?K.splice(0,K.length):K.splice(K.length-M,K.length))},-1),h(l,"$product",function ie(M){var K=ie.$$p||r,X,Q,ne=this;ie.$$p=null,X=O(arguments),Q=X;var se=K!==r?null:[],le=Q.length+1,fe=new Array(le),f=new Array(le),y=new Array(le),U,te,ue,ce,he=1;for(y[0]=ne,U=1;U<le;U++)y[U]=T(Q[U-1],e("Array"),"to_ary");for(U=0;U<le;U++){if(ce=y[U].length,ce===0)return se||ne;he*=ce,he>2147483647&&q.$raise(e("RangeError"),"too big to product"),f[U]=ce,fe[U]=0}e:for(;;){for(ue=[],U=0;U<le;U++)ue.push(y[U][fe[U]]);for(se?se.push(ue):$.yield1(K,ue),te=le-1,fe[te]++;fe[te]===f[te];){if(fe[te]=0,--te<0)break e;fe[te]++}}return se||ne},-1),h(l,"$push",function(M){var K,X,Q=this;return K=O(arguments),X=K,p(Q),ae(Q,X),Q},-1),h(l,"$rassoc",function(M){for(var K=this,X=0,Q=K.length,ne;X<Q;X++)if(ne=K[X],ne.length&&ne[1]!==void 0&&ne[1]["$=="](M))return ne;return r}),h(l,"$reject",function ie(){var M=ie.$$p||r,K=this;if(ie.$$p=null,M===r)return m(K,"enum_for",["reject"],function se(){var le=se.$$s==null?this:se.$$s;return le.$size()},{$$s:K});for(var X=[],Q=0,ne;Q<K.length;Q++)ne=M(K[Q]),(ne===!1||ne===r)&&X.push(K[Q]);return X}),h(l,"$reject!",function ie(){var M=ie.$$p||r,K=this,X=r;return ie.$$p=null,M===r?m(K,"enum_for",["reject!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:K}):(p(K),X=K.$length(),m(K,"delete_if",[],M.$to_proc()),x(K.$length(),X)?r:K)}),h(l,"$replace",function(M){var K=this;return p(K),M=ee(M),K.length>0&&K.splice(0,K.length),ae(K,M),K}),h(l,"$reverse",function(){var M=this;return M.slice(0).reverse()}),h(l,"$reverse!",function(){var M=this;return p(M),M.reverse()}),h(l,"$reverse_each",function ie(){var M=ie.$$p||r,K=this;if(ie.$$p=null,M===r)return m(K,"enum_for",["reverse_each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:K});for(var X=K.length-1;X>=0;X--)L(M,K[X]);return K}),h(l,"$rindex",function ie(M){var K=ie.$$p||r,X=this;ie.$$p=null;var Q,ne;if(M!=null&&K!==r&&X.$warn("warning: given block not used"),M!=null){for(Q=X.length-1;Q>=0&&!(Q>=X.length);Q--)if(X[Q]["$=="](M))return Q}else if(K!==r){for(Q=X.length-1;Q>=0&&!(Q>=X.length);Q--)if(ne=K(X[Q]),ne!==!1&&ne!==r)return Q}else if(M==null)return X.$enum_for("rindex");return r},-1),h(l,"$rotate",function(M){var K=this;M==null&&(M=1);var X,Q,ne,se;return M=T(M,e("Integer"),"to_int"),K.length===1?K.slice():K.length===0?[]:(X=K.slice(),Q=M%X.length,ne=X.slice(Q),se=X.slice(0,Q),ne.concat(se))},-1),h(l,"$rotate!",function(M){var K=this,X=r;return M==null&&(M=1),p(K),K.length===0||K.length===1?K:(M=T(M,e("Integer"),"to_int"),X=K.$rotate(M),K.$replace(X))},-1),function(ie,M){var K=G(ie,M,"SampleRandom"),X=K.$$prototype;return X.rng=r,h(K,"$initialize",c("rng")),h(K,"$rand",function(ne){var se=this,le=r;return le=T(se.rng.$rand(ne),e("Integer"),"to_int"),z(le<0)&&q.$raise(e("RangeError"),"random value must be >= 0"),z(le<ne)||q.$raise(e("RangeError"),"random value must be less than Array size"),le})}(l,null),h(l,"$sample",function(M,K){var X=this,Q=r,ne=r;if(z(M===void 0))return X.$at(q.$rand(X.length));if(z(K===void 0)?z(Q=R["$coerce_to?"](M,e("Hash"),"to_hash"))?(K=Q,M=r):(K=r,M=T(M,e("Integer"),"to_int")):(M=T(M,e("Integer"),"to_int"),K=T(K,e("Hash"),"to_hash")),z(M)&&z(M<0)&&q.$raise(e("ArgumentError"),"count must be greater than 0"),z(K)&&(ne=K["$[]"]("random")),ne=z(ne)&&z(ne["$respond_to?"]("rand"))?N("SampleRandom").$new(ne):q,!z(M))return X[ne.$rand(X.length)];var se,le,fe,f,y,U,te,ue;switch(M>X.length&&(M=X.length),M){case 0:return[];case 1:return[X[ne.$rand(X.length)]];case 2:return f=ne.$rand(X.length),y=ne.$rand(X.length-1),f<=y&&y++,[X[f],X[y]];default:if(X.length/M>3){for(se=!1,le=0,fe=N("Array").$new(M),f=1,fe[0]=ne.$rand(X.length);f<M;){for(U=ne.$rand(X.length),y=0;y<f;){for(;U===fe[y];){if(le++,le>100){se=!0;break}U=ne.$rand(X.length)}if(se)break;y++}if(se)break;fe[f]=U,f++}if(!se){for(f=0;f<M;)fe[f]=X[fe[f]],f++;return fe}}fe=X.slice();for(var ce=0;ce<M;ce++)te=ne.$rand(X.length-ce)+ce,ue=fe[ce],fe[ce]=fe[te],fe[te]=ue;return M===X.length?fe:fe["$[]"](0,M)}},-1),h(l,"$select",function ie(){var M=ie.$$p||r,K=this;if(ie.$$p=null,M===r)return m(K,"enum_for",["select"],function le(){var fe=le.$$s==null?this:le.$$s;return fe.$size()},{$$s:K});for(var X=[],Q=0,ne,se;Q<K.length;Q++)ne=K[Q],se=L(M,ne),z(se)&&X.push(ne);return X}),h(l,"$select!",function ie(){var M=ie.$$p||r,K=this;if(ie.$$p=null,M===r)return m(K,"enum_for",["select!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:K});p(K);var X=K.length;return m(K,"keep_if",[],M.$to_proc()),K.length===X?r:K}),h(l,"$shift",function(M){var K=this;return p(K),z(M===void 0)?z(K.length===0)?r:P(K):(M=T(M,e("Integer"),"to_int"),z(M<0)&&q.$raise(e("ArgumentError"),"negative array size"),z(K.length===0)?[]:K.splice(0,M))},-1),h(l,"$shuffle",function(M){var K=this;return K.$dup().$to_a()["$shuffle!"](M)},-1),h(l,"$shuffle!",function(M){var K=this;p(K);var X,Q=K.length,ne,se;for(M!==void 0&&(M=R["$coerce_to?"](M,e("Hash"),"to_hash"),M!==r&&(M=M["$[]"]("random"),M!==r&&M["$respond_to?"]("rand")&&(X=M)));Q;)X?(ne=X.$rand(Q).$to_int(),ne<0&&q.$raise(e("RangeError"),"random number too small "+ne),ne>=Q&&q.$raise(e("RangeError"),"random number too big "+ne)):ne=K.$rand(Q),se=K[--Q],K[Q]=K[ne],K[ne]=se;return K},-1),h(l,"$slice!",function(M,K){var X=this,Q=r,ne=r,se=r,le=r,fe=r;if(p(X),Q=r,z(K===void 0))if(H(e("Range"),M)){ne=M,Q=X["$[]"](ne),se=ne.begin===r?0:T(ne.begin,e("Integer"),"to_int"),le=ne.end===r?-1:T(ne.end,e("Integer"),"to_int"),se<0&&(se+=X.length),le<0?le+=X.length:le>=X.length&&(le=X.length-1,ne.excl&&(le+=1));var f=le-se;ne.excl&&ne.end!==r?le-=1:f+=1,se<X.length&&se>=0&&le<X.length&&le>=0&&f>0&&X.splice(se,f)}else{if(fe=T(M,e("Integer"),"to_int"),fe<0&&(fe+=X.length),fe<0||fe>=X.length)return r;Q=X[fe],fe===0?X.shift():X.splice(fe,1)}else{if(fe=T(M,e("Integer"),"to_int"),K=T(K,e("Integer"),"to_int"),K<0)return r;Q=X["$[]"](fe,K),fe<0&&(fe+=X.length),fe+K>X.length&&(K=X.length-fe),fe<X.length&&fe>=0&&X.splice(fe,K)}return Q},-2),h(l,"$sort",function ie(){var M=ie.$$p||r,K=this;return ie.$$p=null,z(K.length>1)?(M===r&&(M=function(X,Q){return X["$<=>"](Q)}),K.slice().sort(function(X,Q){var ne=M(X,Q);return ne===r&&q.$raise(e("ArgumentError"),"comparison of "+X.$inspect()+" with "+Q.$inspect()+" failed"),A(ne,0)?1:o(ne,0)?-1:0})):K}),h(l,"$sort!",function ie(){var M=ie.$$p||r,K=this;ie.$$p=null,p(K);var X;M!==r?X=m(K.slice(),"sort",[],M.$to_proc()):X=K.slice().$sort(),K.length=0;for(var Q=0,ne=X.length;Q<ne;Q++)K.push(X[Q]);return K}),h(l,"$sort_by!",function ie(){var M=ie.$$p||r,K=this;return ie.$$p=null,M===r?m(K,"enum_for",["sort_by!"],function X(){var Q=X.$$s==null?this:X.$$s;return Q.$size()},{$$s:K}):(p(K),K.$replace(m(K,"sort_by",[],M.$to_proc())))}),h(l,"$take",function(M){var K=this;return M<0&&q.$raise(e("ArgumentError")),K.slice(0,M)}),h(l,"$take_while",function ie(){var M=ie.$$p||r,K=this;ie.$$p=null;for(var X=[],Q=0,ne,se;Q<K.length;Q++){if(ne=K[Q],se=M(ne),se===!1||se===r)return X;X.push(ne)}return X}),h(l,"$to_a",function(){var M=this;return M.$$class===$.Array?M:$.Array.$new(M)}),h(l,"$to_ary",w),h(l,"$to_h",function ie(){var M=ie.$$p||r,K=this,X=r;ie.$$p=null,X=K,M!==r&&(X=m(X,"map",[],M.$to_proc()));var Q,ne=X.length,se,le,fe,f=new Map;for(Q=0;Q<ne;Q++)se=R["$coerce_to?"](X[Q],e("Array"),"to_ary"),se.$$is_array||q.$raise(e("TypeError"),"wrong element type "+X[Q].$class()+" at "+Q+" (expected array)"),se.length!==2&&q.$raise(e("ArgumentError"),"element has wrong array length at "+Q+" (expected 2, was "+se.$length()+")"),le=se[0],fe=se[1],re(f,le,fe);return f}),h(l,"$transpose",function(){var M=this,K=r,X=r;return z(M["$empty?"]())?[]:(K=[],X=r,m(M,"each",[],function(ne){var se=r;return ne==null&&(ne=r),ne=ee(ne),X=z(se=X)?se:ne.length,B(ne.length,X)&&q.$raise(e("IndexError"),"element size differs ("+ne.length+" should be "+X+")"),m(ne.length,"times",[],function(fe){var f,y=r;return fe==null&&(fe=r),y=z(se=K["$[]"](fe))?se:(f=[fe,[]],m(K,"[]=",f),f[f.length-1]),y["$<<"](ne.$at(fe))})}),K)}),h(l,"$union",function(M){var K,X,Q=this;return K=O(arguments),X=K,m(X,"reduce",[Q.$uniq()],function(se,le){return se==null&&(se=r),le==null&&(le=r),se["$|"](le)})},-1),h(l,"$uniq",function ie(){var M=ie.$$p||r,K=this;ie.$$p=null;var X=new Map,Q,ne,se,le;if(M===r)for(Q=0,ne=K.length;Q<ne;Q++)se=K[Q],S(X,se)===void 0&&re(X,se,se);else for(Q=0;Q<K.length;Q++)se=K[Q],le=L(M,se),S(X,le)===void 0&&re(X,le,se);return X.$values()}),h(l,"$uniq!",function ie(){var M=ie.$$p||r,K=this;ie.$$p=null,p(K);var X=new Map,Q,ne,se,le=[];for(Q=0;Q<K.length;Q++)ne=K[Q],se=M===r?ne:L(M,ne),S(X,se)===void 0?re(X,se,ne):le.push(Q);for(Q=le.length-1;Q>=0;Q--)K.splice(le[Q],1);return le.length===0?r:K}),h(l,"$unshift",function(M){var K,X,Q=this;K=O(arguments),X=K,p(Q);var ne=Q.length,se=X.length;if(se==0)return Q;for(var le=ne-se,fe=0;fe<se;fe++)Q.push(Q[le+fe]);for(var f=ne-1;f-se>=0;)Q[f]=Q[f-se],f--;for(var y=0;y<se;y++)Q[y]=X[y];return Q},-1),h(l,"$values_at",function(M){var K,X,Q=this,ne=r;return K=O(arguments),X=K,ne=[],m(X,"each",[],function se(le){var fe=se.$$s==null?this:se.$$s,f=r,y=r,U=r;return le==null&&(le=r),z(le["$is_a?"](e("Range")))?(f=le.$end()===r?-1:T(le.$end(),e("Integer"),"to_int"),y=le.$begin()===r?0:T(le.$begin(),e("Integer"),"to_int"),y<0?(y=y+fe.length,r):(f<0&&(f=f+fe.length),le["$exclude_end?"]()&&le.$end()!==r&&f--,f<y?r:m(y,"upto",[f],function te(ue){var ce=te.$$s==null?this:te.$$s;return ue==null&&(ue=r),ne["$<<"](ce.$at(ue))},{$$s:fe}))):(U=T(le,e("Integer"),"to_int"),ne["$<<"](fe.$at(U)))},{$$s:Q}),ne},-1),h(l,"$zip",function ie(M){var K=ie.$$p||r,X,Q,ne=this,se=r;ie.$$p=null,X=O(arguments),Q=X;var le=[],fe=ne.length,f,y,U,te,ue;for(te=0,ue=Q.length;te<ue;te++)if(y=Q[te],!y.$$is_array){if(y.$$is_range||y.$$is_enumerator){Q[te]=y.$take(fe);continue}Q[te]=(z(se=R["$coerce_to?"](y,e("Array"),"to_ary"))?se:R["$coerce_to!"](y,e("Enumerator"),"to_enum","each")).$to_a()}for(U=0;U<fe;U++){for(f=[ne[U]],te=0,ue=Q.length;te<ue;te++)y=Q[te][U],y==null&&(y=r),f[te+1]=y;le[U]=f}if(K!==r){for(U=0;U<fe;U++)$.yield1(K,le[U]);return r}return le},-1),Y(l,"$inherited",function(M){M.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),h(l,"$instance_variables",function ie(){var M=ie.$$p||r,K=this;return ie.$$p=null,m(k(K,F(K,"instance_variables",ie,!1,!0),"instance_variables",[],M),"reject",[],function(Q){var ne=r;return Q==null&&(Q=r),z(ne=/^@\d+$/.test(Q))?ne:Q["$=="]("@length")})}),h(l,"$pack",function(M){return O(arguments),q.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),_(l,"append","push"),_(l,"filter","select"),_(l,"filter!","select!"),_(l,"map","collect"),_(l,"map!","collect!"),_(l,"prepend","unshift"),_(l,"size","length"),_(l,"slice","[]"),_(l,"to_s","inspect"),R.$pristine(l.$singleton_class(),"allocate"),R.$pristine(l,"copy_instance_variables","initialize_dup")}("::",Array,n)};Opal.modules["corelib/hash"]=function($){var z=$.yield1,b=$.hash_clone,L=$.hash_delete,S=$.hash_each,re=$.hash_get,Z=$.hash_put,T=$.deny_frozen_access,W=$.freeze,p=$.opal32_init,D=$.opal32_add,$e=$.klass,J=$.slice,G=$.Opal,O=$.Kernel,Y=$.defs,q=$.def,h=$.send,R=$.rb_ge,H=$.rb_gt,k=$.truthy,F=$.to_a,m=$.return_self,A=$.not,C=$.alias,x=$.top,E=[],u=$.nil,d=$.$$$;return $.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),x.$require("corelib/enumerable"),function(I,g,c){var o=$e(I,g,"Hash"),w=[o].concat(c),B=$.$r(w);o.$include(d("Enumerable")),o.$$prototype.$$is_hash=!0,Y(o,"$[]",function(r){var e,t,i=this;e=J(arguments),t=e;var a,l=t.length,v,N;if(l===1){if(a=G["$coerce_to?"](t["$[]"](0),d("Hash"),"to_hash"),a!==u)return i.$allocate()["$merge!"](a);for(t=G["$coerce_to?"](t["$[]"](0),d("Array"),"to_ary"),t===u&&O.$raise(d("ArgumentError"),"odd number of arguments for Hash"),l=t.length,a=i.$allocate(),N=0;N<l;N++)v=t[N],v.$$is_array||O.$raise(d("ArgumentError"),"invalid element "+v.$inspect()+" for Hash"),v.length===1?a.$store(v[0],u):v.length===2?a.$store(v[0],v[1]):O.$raise(d("ArgumentError"),"invalid number of elements ("+v.length+" for "+v.$inspect()+"), must be 1..2");return a}for(l%2!==0&&O.$raise(d("ArgumentError"),"odd number of arguments for Hash"),a=i.$allocate(),N=0;N<l;N+=2)a.$store(t[N],t[N+1]);return a},-1),Y(o,"$allocate",function(){var r=this,e=new r.$$constructor;return e.$$none=u,e.$$proc=u,e}),Y(o,"$try_convert",function(r){return G["$coerce_to?"](r,d("Hash"),"to_hash")}),q(o,"$initialize",function n(r){var e=n.$$p||u,t=this;return n.$$p=null,T(t),r!==void 0&&e!==u&&O.$raise(d("ArgumentError"),"wrong number of arguments (1 for 0)"),t.$$none=r===void 0?u:r,t.$$proc=e,t},-1),q(o,"$==",function(r){var e=this;return e===r?!0:!r.$$is_hash||e.size!==r.size?!1:S(e,!0,function(t,i){var a=re(r,t);return a===void 0||!i["$eql?"](a)?[!0,!1]:[!1,!0]})}),q(o,"$>=",function(r){var e=this,t=u;return r=G["$coerce_to!"](r,d("Hash"),"to_hash"),e.size<r.size?!1:(t=!0,h(r,"each",[],function i(a,l){var v=i.$$s==null?this:i.$$s,N=u;if(a==null&&(a=u),l==null&&(l=u),N=v.$fetch(a,null),N==null||N!==l){t=!1;return}},{$$s:e}),t)}),q(o,"$>",function(r){var e=this;return r=G["$coerce_to!"](r,d("Hash"),"to_hash"),e.size<=r.size?!1:R(e,r)}),q(o,"$<",function(r){var e=this;return r=G["$coerce_to!"](r,d("Hash"),"to_hash"),H(r,e)}),q(o,"$<=",function(r){var e=this;return r=G["$coerce_to!"](r,d("Hash"),"to_hash"),R(r,e)}),q(o,"$[]",function(r){var e=this,t=re(e,r);return t!==void 0?t:e.$default(r)}),q(o,"$[]=",function(r,e){var t=this;return T(t),Z(t,r,e),e}),q(o,"$assoc",function(r){var e=this;return S(e,u,function(t,i){return t["$=="](r)?[!0,[t,i]]:[!1,u]})}),q(o,"$clear",function(){var r=this;return T(r),r.clear(),r.$$keys&&r.$$keys.clear(),r}),q(o,"$clone",function(){var r=this,e=r.$class().$new();return b(r,e),r["$frozen?"]()?e.$freeze():e}),q(o,"$compact",function(){var r=this,e=new Map;return S(r,e,function(t,i){return i!==u&&Z(e,t,i),[!1,e]})}),q(o,"$compact!",function(){var r=this;T(r);var e=u;return S(r,e,function(t,i){return i===u&&(L(r,t),e=r),[!1,e]})}),q(o,"$compare_by_identity",function(){var r=this;return T(r),r.$$by_identity||(r.$$by_identity=!0,r.size!==0&&$.hash_rehash(r)),r}),q(o,"$compare_by_identity?",function(){var r=this;return r.$$by_identity===!0}),q(o,"$default",function(r){var e=this;return r!==void 0&&e.$$proc!==u&&e.$$proc!==void 0?e.$$proc.$call(e,r):e.$$none===void 0?u:e.$$none},-1),q(o,"$default=",function(r){var e=this;return T(e),e.$$proc=u,e.$$none=r,r}),q(o,"$default_proc",function(){var r=this;return r.$$proc!==void 0?r.$$proc:u}),q(o,"$default_proc=",function(r){var e=this;T(e);var t=r;return t!==u&&(t=G["$coerce_to!"](t,d("Proc"),"to_proc"),t["$lambda?"]()&&t.$arity().$abs()!==2&&O.$raise(d("TypeError"),"default_proc takes two arguments")),e.$$none=u,e.$$proc=t,r}),q(o,"$delete",function n(r){var e=n.$$p||u,t=this;n.$$p=null,T(t);var i=L(t,r);return i!==void 0?i:e!==u?$.yield1(e,r):u}),q(o,"$delete_if",function n(){var r=n.$$p||u,e=this;return n.$$p=null,k(r)?(T(e),S(e,e,function(t,i){var a=r(t,i);return a!==!1&&a!==u&&L(e,t),[!1,e]})):h(e,"enum_for",["delete_if"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),q(o,"$dig",function(r,e){var t,i,a=this,l=u;return t=J(arguments,1),i=t,l=a["$[]"](r),l===u||i.length===0?l:(k(l["$respond_to?"]("dig"))||O.$raise(d("TypeError"),""+l.$class()+" does not have #dig method"),h(l,"dig",F(i)))},-2),q(o,"$dup",function(){var r=this;return b(r,r.$class().$new())}),q(o,"$each",function n(){var r=n.$$p||u,e=this;return n.$$p=null,k(r)?S(e,e,function(t,i){return z(r,[t,i]),[!1,e]}):h(e,"enum_for",["each"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),q(o,"$each_key",function n(){var r=n.$$p||u,e=this;return n.$$p=null,k(r)?S(e,e,function(t,i){return r(t),[!1,e]}):h(e,"enum_for",["each_key"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),q(o,"$each_value",function n(){var r=n.$$p||u,e=this;return n.$$p=null,k(r)?S(e,e,function(t,i){return r(i),[!1,e]}):h(e,"enum_for",["each_value"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),q(o,"$empty?",function(){var r=this;return r.size===0}),q(o,"$except",function(r){var e,t,i=this;return e=J(arguments),t=e,h(i.$dup(),"except!",F(t))},-1),q(o,"$except!",function(r){var e,t,i=this;return e=J(arguments),t=e,h(t,"each",[],function a(l){var v=a.$$s==null?this:a.$$s;return l==null&&(l=u),v.$delete(l)},{$$s:i}),i},-1),q(o,"$fetch",function n(r,e){var t=n.$$p||u,i=this;n.$$p=null;var a=re(i,r);return a!==void 0?a:t!==u?t(r):e!==void 0?e:O.$raise(d("KeyError").$new("key not found: "+r.$inspect(),new Map([["key",r],["receiver",i]])))},-2),q(o,"$fetch_values",function n(r){var e=n.$$p||u,t,i,a=this;return n.$$p=null,t=J(arguments),i=t,h(i,"map",[],function l(v){var N=l.$$s==null?this:l.$$s;return v==null&&(v=u),h(N,"fetch",[v],e.$to_proc())},{$$s:a})},-1),q(o,"$flatten",function(r){var e=this;r==null&&(r=1),r=G["$coerce_to!"](r,d("Integer"),"to_int");var t=[];return S(e,t,function(i,a){return t.push(i),a.$$is_array?r===1?(t.push(a),[!1,t]):(t=t.concat(a.$flatten(r-2)),[!1,t]):(t.push(a),[!1,t])})},-1),q(o,"$freeze",function(){var r=this;return k(r["$frozen?"]())?r:W(r)}),q(o,"$has_key?",function(r){var e=this;return re(e,r)!==void 0}),q(o,"$has_value?",function(r){var e=this;return S(e,!1,function(t,i){return i["$=="](r)?[!0,!0]:[!1,!1]})});var _;q(o,"$hash",function(){var r=this,e=_===void 0,t=r.$object_id(),i=p(),a,l,v,N=r.size,P=new Int32Array(N);if(i=D(i,4),i=D(i,N),e)_=Object.create(null);else if(_[t])return D(i,16843009);try{for(a in _)if(l=_[a],r["$eql?"](l))return D(i,16843009);for(_[t]=r,v=0,S(r,!1,function(j,V){return P[v]=[1883326802,j,V].$hash(),v++,[!1,!1]}),P=P.sort(),v=0;v<P.length;v++)i=D(i,P[v]);return i}finally{e&&(_=void 0)}}),q(o,"$index",function(r){var e=this;return S(e,u,function(t,i){return i["$=="](r)?[!0,t]:[!1,u]})}),q(o,"$indexes",function(r){var e,t,i=this;e=J(arguments),t=e;for(var a=[],l=0,v=t.length,N,P;l<v;l++){if(N=t[l],P=re(i,N),P===void 0){a.push(i.$default());continue}a.push(P)}return a},-1);var s;return q(o,"$inspect",function(){var r=this,e=s===void 0,t=r.$object_id(),i=[];return function(){try{if(e&&(s={}),s.hasOwnProperty(t))return"{...}";return s[t]=!0,S(r,!1,function(a,l){return l=B("Opal").$inspect(l),a=B("Opal").$inspect(a),i.push(a+"=>"+l),[!1,!1]}),"{"+i.join(", ")+"}";return u}finally{e&&(s=void 0)}}()}),q(o,"$invert",function(){var r=this,e=new Map;return S(r,e,function(t,i){return Z(e,i,t),[!1,e]})}),q(o,"$keep_if",function n(){var r=n.$$p||u,e=this;return n.$$p=null,k(r)?(T(e),S(e,e,function(t,i){var a=r(t,i);return(a===!1||a===u)&&L(e,t),[!1,e]})):h(e,"enum_for",["keep_if"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),q(o,"$keys",function(){var r=this;return Array.from(r.keys())}),q(o,"$length",function(){var r=this;return r.size}),q(o,"$merge",function n(r){var e=n.$$p||u,t,i,a=this;return n.$$p=null,t=J(arguments),i=t,h(a.$dup(),"merge!",F(i),e.$to_proc())},-1),q(o,"$merge!",function n(r){var e=n.$$p||u,t,i,a=this;n.$$p=null,t=J(arguments),i=t,T(a);var l,v;for(l=0;l<i.length;++l)v=G["$coerce_to!"](i[l],d("Hash"),"to_hash"),e===u?S(v,!1,function(N,P){return Z(a,N,P),[!1,!1]}):S(v,!1,function(N,P){var j=re(a,N);return j===void 0?(Z(a,N,P),[!1,!1]):(Z(a,N,e(N,j,P)),[!1,!1])});return a},-1),q(o,"$rassoc",function(r){var e=this;return S(e,u,function(t,i){return i["$=="](r)?[!0,[t,i]]:[!1,u]})}),q(o,"$rehash",function(){var r=this;return T(r),$.hash_rehash(r)}),q(o,"$reject",function n(){var r=n.$$p||u,e=this;if(n.$$p=null,!k(r))return h(e,"enum_for",["reject"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var t=new Map;return S(e,t,function(i,a){var l=r(i,a);return(l===!1||l===u)&&Z(t,i,a),[!1,t]})}),q(o,"$reject!",function n(){var r=n.$$p||u,e=this;if(n.$$p=null,!k(r))return h(e,"enum_for",["reject!"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});T(e);var t=u;return S(e,t,function(i,a){var l=r(i,a);return l!==!1&&l!==u&&(L(e,i),t=e),[!1,t]})}),q(o,"$replace",function(r){var e=this;return T(e),r=G["$coerce_to!"](r,d("Hash"),"to_hash"),e.$clear(),S(r,!1,function(t,i){return Z(e,t,i),[!1,!1]}),k(r.$default_proc())?e["$default_proc="](r.$default_proc()):e["$default="](r.$default()),e}),q(o,"$select",function n(){var r=n.$$p||u,e=this;if(n.$$p=null,!k(r))return h(e,"enum_for",["select"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var t=new Map;return S(e,t,function(i,a){var l=r(i,a);return l!==!1&&l!==u&&Z(t,i,a),[!1,t]})}),q(o,"$select!",function n(){var r=n.$$p||u,e=this;if(n.$$p=null,!k(r))return h(e,"enum_for",["select!"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});T(e);var t=u;return S(e,t,function(i,a){var l=r(i,a);return(l===!1||l===u)&&(L(e,i),t=e),[!1,t]})}),q(o,"$shift",function(){var r=this;return T(r),S(r,u,function(e,t){return[!0,[e,L(r,e)]]})}),q(o,"$slice",function(r){var e,t,i=this;e=J(arguments),t=e;for(var a=new Map,l=0,v=t.length;l<v;l++){var N=t[l],P=re(i,N);P!==void 0&&Z(a,N,P)}return a},-1),q(o,"$to_a",function(){var r=this,e=[];return S(r,e,function(t,i){return e.push([t,i]),[!1,e]})}),q(o,"$to_h",function n(){var r=n.$$p||u,e=this;if(n.$$p=null,r!==u)return h(e,"map",[],r.$to_proc()).$to_h();if(e.$$class===$.Hash)return e;var t=new Map;return b(e,t),t}),q(o,"$to_hash",m),q(o,"$to_proc",function(){var r=this;return h(r,"proc",[],function e(t){var i=e.$$s==null?this:e.$$s;return t==null&&O.$raise(d("ArgumentError"),"no key given"),i["$[]"](t)},{$$arity:-1,$$s:r})}),q(o,"$transform_keys",function n(r){var e=n.$$p||u,t=this;if(n.$$p=null,r==null&&(r=u),A(e)&&A(r))return h(t,"enum_for",["transform_keys"],function a(){var l=a.$$s==null?this:a.$$s;return l.$size()},{$$s:t});var i=new Map;return S(t,i,function(a,l){var v;return r!==u&&(v=re(r,a)),v===void 0&&e&&e!==u&&(v=e(a)),v===void 0&&(v=a),Z(i,v,l),[!1,i]})},-1),q(o,"$transform_keys!",function n(r){var e=n.$$p||u,t=this;if(n.$$p=null,r==null&&(r=u),A(e)&&A(r))return h(t,"enum_for",["transform_keys!"],function a(){var l=a.$$s==null?this:a.$$s;return l.$size()},{$$s:t});T(t);var i=new Map;return S(t,t,function(a,l){var v;return r!==u&&(v=re(r,a)),v===void 0&&e&&e!==u&&(v=e(a)),v===void 0?[!1,t]:(re(i,a)||L(t,a),Z(t,v,l),Z(i,v,!0),[!1,t])})},-1),q(o,"$transform_values",function n(){var r=n.$$p||u,e=this;if(n.$$p=null,!k(r))return h(e,"enum_for",["transform_values"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var t=new Map;return S(e,t,function(i,a){return Z(t,i,r(a)),[!1,t]})}),q(o,"$transform_values!",function n(){var r=n.$$p||u,e=this;return n.$$p=null,k(r)?(T(e),S(e,e,function(t,i){return Z(e,t,r(i)),[!1,e]})):h(e,"enum_for",["transform_values!"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),q(o,"$values",function(){var r=this;return Array.from(r.values())}),C(o,"each_pair","each"),C(o,"eql?","=="),C(o,"filter","select"),C(o,"filter!","select!"),C(o,"include?","has_key?"),C(o,"indices","indexes"),C(o,"key","index"),C(o,"key?","has_key?"),C(o,"member?","has_key?"),C(o,"size","length"),C(o,"store","[]="),C(o,"to_s","inspect"),C(o,"update","merge!"),C(o,"value?","has_value?"),C(o,"values_at","indexes")}("::",Map,E)};Opal.modules["corelib/number"]=function($){var z=$.klass,b=$.Opal,L=$.Kernel,S=$.def,re=$.eqeqeq,Z=$.truthy,T=$.rb_gt,W=$.not,p=$.rb_lt,D=$.alias,$e=$.send2,J=$.find_super,G=$.send,O=$.rb_plus,Y=$.rb_minus,q=$.eqeq,h=$.return_self,R=$.rb_divide,H=$.to_ary,k=$.rb_times,F=$.rb_le,m=$.rb_ge,A=$.return_val,C=$.const_set,x=$.top,E=[],u=$.nil,d=$.$$$;return $.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),x.$require("corelib/numeric"),function(I,g,c){var o=z(I,g,"Number");b.$bridge(Number,o),$.prop(o.$$prototype,"$$is_number",!0),o.$$is_number_class=!0;var w=new Map;(function(e,t){return S(e,"$allocate",function(){var a=this;return L.$raise(d("TypeError"),"allocator undefined for "+a.$name())}),$.udef(e,"$new"),u})($.get_singleton_class(o)),S(o,"$coerce",function(t){var i=this;if(t===u)L.$raise(d("TypeError"),"can't convert "+t.$class()+" into Float");else{if(t.$$is_string)return[L.$Float(t),i];if(t["$respond_to?"]("to_f"))return[b["$coerce_to!"](t,d("Float"),"to_f"),i];if(t.$$is_number)return[t,i];L.$raise(d("TypeError"),"can't convert "+t.$class()+" into Float")}}),S(o,"$__id__",function(){var t=this;if(t|t===0)return t*2+1;if(w.has(t))return w.get(t);var i=$.uid();return w.set(t,i),i}),S(o,"$hash",function(){var t=this;return t|t===0?t.$__id__():t.toString().$hash()}),S(o,"$+",function(t){var i=this;return t.$$is_number?i+t:i.$__coerced__("+",t)}),S(o,"$-",function(t){var i=this;return t.$$is_number?i-t:i.$__coerced__("-",t)}),S(o,"$*",function(t){var i=this;return t.$$is_number?i*t:i.$__coerced__("*",t)}),S(o,"$/",function(t){var i=this;return t.$$is_number?i/t:i.$__coerced__("/",t)}),S(o,"$%",function(t){var i=this;if(t.$$is_number){if(t==-1/0)return t;if(t==0)L.$raise(d("ZeroDivisionError"),"divided by 0");else return t<0||i<0?(i%t+t)%t:i%t}else return i.$__coerced__("%",t)}),S(o,"$&",function(t){var i=this;return t.$$is_number?i&t:i.$__coerced__("&",t)}),S(o,"$|",function(t){var i=this;return t.$$is_number?i|t:i.$__coerced__("|",t)}),S(o,"$^",function(t){var i=this;return t.$$is_number?i^t:i.$__coerced__("^",t)}),S(o,"$<",function(t){var i=this;return t.$$is_number?i<t:i.$__coerced__("<",t)}),S(o,"$<=",function(t){var i=this;return t.$$is_number?i<=t:i.$__coerced__("<=",t)}),S(o,"$>",function(t){var i=this;return t.$$is_number?i>t:i.$__coerced__(">",t)}),S(o,"$>=",function(t){var i=this;return t.$$is_number?i>=t:i.$__coerced__(">=",t)});var B=function(e,t){return t.$$is_number?isNaN(e)||isNaN(t)?u:e>t?1:e<t?-1:0:e.$__coerced__("<=>",t)};S(o,"$<=>",function(t){var i=this;try{return B(i,t)}catch(a){if($.rescue(a,[d("ArgumentError")]))try{return u}finally{$.pop_exception(a)}else throw a}}),S(o,"$<<",function(t){var i=this;return t=b["$coerce_to!"](t,d("Integer"),"to_int"),t>0?i<<t:i>>-t}),S(o,"$>>",function(t){var i=this;return t=b["$coerce_to!"](t,d("Integer"),"to_int"),t>0?i>>t:i<<-t}),S(o,"$[]",function(t){var i=this;return t=b["$coerce_to!"](t,d("Integer"),"to_int"),t<0?0:t>=32?i<0?1:0:i>>t&1}),S(o,"$+@",function(){var t=this;return+t}),S(o,"$-@",function(){var t=this;return-t}),S(o,"$~",function(){var t=this;return~t}),S(o,"$**",function(t){var i=this;return re(d("Integer"),t)?W(d("Integer")["$==="](i))||Z(T(t,0))?Math.pow(i,t):d("Rational").$new(i,1)["$**"](t):Z(p(i,0))&&(re(d("Float"),t)||re(d("Rational"),t))?d("Complex").$new(i,0)["$**"](t.$to_f()):Z(t.$$is_number!=null)?Math.pow(i,t):i.$__coerced__("**",t)}),S(o,"$==",function(t){var i=this;return t.$$is_number?i.valueOf()===t.valueOf():t["$respond_to?"]("==")?t["$=="](i):!1}),D(o,"===","=="),S(o,"$abs",function(){var t=this;return Math.abs(t)}),S(o,"$abs2",function(){var t=this;return Math.abs(t*t)}),S(o,"$allbits?",function(t){var i=this;return t=b["$coerce_to!"](t,d("Integer"),"to_int"),(i&t)==t}),S(o,"$anybits?",function(t){var i=this;return t=b["$coerce_to!"](t,d("Integer"),"to_int"),(i&t)!==0}),S(o,"$angle",function(){var t=this;return Z(t["$nan?"]())?t:t==0?1/t>0?0:Math.PI:t<0?Math.PI:0}),S(o,"$bit_length",function(){var t=this;if(re(d("Integer"),t)||L.$raise(d("NoMethodError").$new("undefined method `bit_length` for "+t+":Float","bit_length")),t===0||t===-1)return 0;for(var i=0,a=t<0?~t:t;a!=0;)i+=1,a>>>=1;return i}),S(o,"$ceil",function(t){var i=this;t==null&&(t=0);var a=i.$to_f();if(a%1===0&&t>=0)return a;var l=Math.pow(10,t),v=Math.ceil(a*l)/l;return a%1===0&&(v=Math.round(v)),v},-1),S(o,"$chr",function(t){var i=this;return $.enc(String.fromCharCode(i),t||"BINARY")},-1),S(o,"$denominator",function e(){var t=e.$$p||u,i=this;return e.$$p=null,Z(i["$nan?"]())||Z(i["$infinite?"]())?1:$e(i,J(i,"denominator",e,!1,!0),"denominator",[],t)}),S(o,"$downto",function e(t){var i=e.$$p||u,a=this;if(e.$$p=null,i===u)return G(a,"enum_for",["downto",t],function v(){var N=v.$$s==null?this:v.$$s;return re(d("Numeric"),t)||L.$raise(d("ArgumentError"),"comparison of "+N.$class()+" with "+t.$class()+" failed"),Z(T(t,N))?0:O(Y(N,t),1)},{$$s:a});t.$$is_number||L.$raise(d("ArgumentError"),"comparison of "+a.$class()+" with "+t.$class()+" failed");for(var l=a;l>=t;l--)i(l);return a}),S(o,"$equal?",function(t){var i=this,a=u;return Z(a=i["$=="](t))?a:isNaN(i)&&isNaN(t)}),S(o,"$even?",function(){var t=this;return t%2===0}),S(o,"$floor",function(t){var i=this;t==null&&(t=0);var a=i.$to_f();if(a%1===0&&t>=0)return a;var l=Math.pow(10,t),v=Math.floor(a*l)/l;return a%1===0&&(v=Math.round(v)),v},-1),S(o,"$gcd",function(t){var i=this;re(d("Integer"),t)||L.$raise(d("TypeError"),"not an integer");for(var a=Math.abs(i),l=Math.abs(t);a>0;){var v=a;a=l%a,l=v}return l}),S(o,"$gcdlcm",function(t){var i=this;return[i.$gcd(t),i.$lcm(t)]}),S(o,"$integer?",function(){var t=this;return t%1===0}),S(o,"$is_a?",function e(t){var i=e.$$p||u,a=this;return e.$$p=null,q(t,d("Integer"))&&re(d("Integer"),a)||q(t,d("Integer"))&&re(d("Integer"),a)||q(t,d("Float"))&&re(d("Float"),a)?!0:$e(a,J(a,"is_a?",e,!1,!0),"is_a?",[t],i)}),S(o,"$instance_of?",function e(t){var i=e.$$p||u,a=this;return e.$$p=null,q(t,d("Integer"))&&re(d("Integer"),a)||q(t,d("Integer"))&&re(d("Integer"),a)||q(t,d("Float"))&&re(d("Float"),a)?!0:$e(a,J(a,"instance_of?",e,!1,!0),"instance_of?",[t],i)}),S(o,"$lcm",function(t){var i=this;return re(d("Integer"),t)||L.$raise(d("TypeError"),"not an integer"),i==0||t==0?0:Math.abs(i*t/i.$gcd(t))}),S(o,"$next",function(){var t=this;return t+1}),S(o,"$nobits?",function(t){var i=this;return t=b["$coerce_to!"](t,d("Integer"),"to_int"),(i&t)==0}),S(o,"$nonzero?",function(){var t=this;return t==0?u:t}),S(o,"$numerator",function e(){var t=e.$$p||u,i=this;return e.$$p=null,Z(i["$nan?"]())||Z(i["$infinite?"]())?i:$e(i,J(i,"numerator",e,!1,!0),"numerator",[],t)}),S(o,"$odd?",function(){var t=this;return t%2!==0}),S(o,"$ord",h),S(o,"$pow",function(t,i){var a=this;return a==0&&L.$raise(d("ZeroDivisionError"),"divided by 0"),i===void 0?a["$**"](t):(d("Integer")["$==="](t)||L.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),t<0&&L.$raise(d("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),d("Integer")["$==="](i)||L.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),i===0&&L.$raise(d("ZeroDivisionError"),"divided by 0"),a["$**"](t)["$%"](i))},-2),S(o,"$pred",function(){var t=this;return t-1}),S(o,"$quo",function e(t){var i=e.$$p||u,a=this;return e.$$p=null,re(d("Integer"),a)?$e(a,J(a,"quo",e,!1,!0),"quo",[t],i):R(a,t)}),S(o,"$rationalize",function(t){var i,a,l=this,v=u,N=u;return arguments.length>1&&L.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),re(d("Integer"),l)?d("Rational").$new(l,1):Z(l["$infinite?"]())?L.$raise(d("FloatDomainError"),"Infinity"):Z(l["$nan?"]())?L.$raise(d("FloatDomainError"),"NaN"):Z(t==null)?(a=d("Math").$frexp(l),i=H(a),v=i[0]==null?u:i[0],N=i[1]==null?u:i[1],v=d("Math").$ldexp(v,d(d("Float"),"MANT_DIG")).$to_i(),N=Y(N,d(d("Float"),"MANT_DIG")),d("Rational").$new(k(2,v),1["$<<"](Y(1,N))).$rationalize(d("Rational").$new(1,1["$<<"](Y(1,N))))):l.$to_r().$rationalize(t)},-1),S(o,"$remainder",function(t){var i=this;return Y(i,k(t,R(i,t).$truncate()))}),S(o,"$round",function(t){var i,a,l=this,v=u;if(re(d("Integer"),l)){if(Z(t==null)||(re(d("Float"),t)&&Z(t["$infinite?"]())&&L.$raise(d("RangeError"),"Infinity"),t=b["$coerce_to!"](t,d("Integer"),"to_int"),Z(p(t,d(d("Integer"),"MIN")))&&L.$raise(d("RangeError"),"out of bounds"),Z(t>=0)))return l;if(t=t["$-@"](),.415241*t-.125>l.$size())return 0;var N=Math.pow(10,t),P=Math.floor((Math.abs(l)+N/2)/N)*N;return l<0?-P:P}else{if(Z(l["$nan?"]())&&Z(t==null)&&L.$raise(d("FloatDomainError"),"NaN"),t=b["$coerce_to!"](t||0,d("Integer"),"to_int"),Z(F(t,0)))Z(l["$nan?"]())?L.$raise(d("RangeError"),"NaN"):Z(l["$infinite?"]())&&L.$raise(d("FloatDomainError"),"Infinity");else{if(q(t,0))return Math.round(l);if(Z(l["$nan?"]())||Z(l["$infinite?"]()))return l}return a=d("Math").$frexp(l),i=H(a),i[0]==null||i[0],v=i[1]==null?u:i[1],Z(m(t,Y(O(d(d("Float"),"DIG"),2),Z(T(v,0))?R(v,4):Y(R(v,3),1))))?l:Z(p(t,(Z(T(v,0))?O(R(v,3),1):R(v,4))["$-@"]()))?0:Math.round(l*Math.pow(10,t))/Math.pow(10,t)}},-1),S(o,"$times",function e(){var t=e.$$p||u,i=this;if(e.$$p=null,!Z(t))return G(i,"enum_for",["times"],function l(){var v=l.$$s==null?this:l.$$s;return v},{$$s:i});for(var a=0;a<i;a++)t(a);return i}),S(o,"$to_f",h),S(o,"$to_i",function(){var t=this;return t<0?Math.ceil(t):Math.floor(t)}),S(o,"$to_r",function(){var t,i,a=this,l=u,v=u;return re(d("Integer"),a)?d("Rational").$new(a,1):(i=d("Math").$frexp(a),t=H(i),l=t[0]==null?u:t[0],v=t[1]==null?u:t[1],l=d("Math").$ldexp(l,d(d("Float"),"MANT_DIG")).$to_i(),v=Y(v,d(d("Float"),"MANT_DIG")),k(l,d(d("Float"),"RADIX")["$**"](v)).$to_r())}),S(o,"$to_s",function(t){var i=this;return t==null&&(t=10),t=b["$coerce_to!"](t,d("Integer"),"to_int"),(Z(p(t,2))||Z(T(t,36)))&&L.$raise(d("ArgumentError"),"invalid radix "+t),q(i,0)&&Z(1/i===-1/0)?"-0.0":i.toString(t)},-1),S(o,"$truncate",function(t){var i=this;t==null&&(t=0);var a=i.$to_f();if(a%1===0&&t>=0)return a;var l=Math.pow(10,t),v=parseInt(a*l,10)/l;return a%1===0&&(v=Math.round(v)),v},-1),S(o,"$digits",function(t){var i=this;t==null&&(t=10),Z(p(i,0))&&L.$raise(d(d("Math"),"DomainError"),"out of domain"),t=b["$coerce_to!"](t,d("Integer"),"to_int"),Z(p(t,2))&&L.$raise(d("ArgumentError"),"invalid radix "+t),i!=parseInt(i)&&L.$raise(d("NoMethodError"),"undefined method `digits' for "+i.$inspect());var a=i,l=[];if(i==0)return[0];for(;a!=0;)l.push(a%t),a=parseInt(a/t,10);return l},-1),S(o,"$divmod",function e(t){var i=e.$$p||u,a=this;return e.$$p=null,Z(a["$nan?"]())||Z(t["$nan?"]())?L.$raise(d("FloatDomainError"),"NaN"):Z(a["$infinite?"]())?L.$raise(d("FloatDomainError"),"Infinity"):$e(a,J(a,"divmod",e,!1,!0),"divmod",[t],i)}),S(o,"$upto",function e(t){var i=e.$$p||u,a=this;if(e.$$p=null,i===u)return G(a,"enum_for",["upto",t],function v(){var N=v.$$s==null?this:v.$$s;return re(d("Numeric"),t)||L.$raise(d("ArgumentError"),"comparison of "+N.$class()+" with "+t.$class()+" failed"),Z(p(t,N))?0:O(Y(t,N),1)},{$$s:a});t.$$is_number||L.$raise(d("ArgumentError"),"comparison of "+a.$class()+" with "+t.$class()+" failed");for(var l=a;l<=t;l++)i(l);return a}),S(o,"$zero?",function(){var t=this;return t==0}),S(o,"$size",A(4)),S(o,"$nan?",function(){var t=this;return isNaN(t)}),S(o,"$finite?",function(){var t=this;return t!=1/0&&t!=-1/0&&!isNaN(t)}),S(o,"$infinite?",function(){var t=this;return t==1/0?1:t==-1/0?-1:u}),S(o,"$positive?",function(){var t=this;return t!=0&&(t==1/0||1/t>0)}),S(o,"$negative?",function(){var t=this;return t==-1/0||1/t<0});function _(e){var t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}function s(e){return new DataView(e.buffer).getFloat64(0,!0)}function n(e){for(var t=_(e),i=0;i<t.length;i++)if(t[i]===255)t[i]=0;else{t[i]++;break}return s(t)}function r(e){for(var t=_(e),i=0;i<t.length;i++)if(t[i]===0)t[i]=255;else{t[i]--;break}return s(t)}return S(o,"$next_float",function(){var t=this;return q(t,d(d("Float"),"INFINITY"))?d(d("Float"),"INFINITY"):Z(t["$nan?"]())?d(d("Float"),"NAN"):Z(m(t,0))?n(Math.abs(t)):r(t)}),S(o,"$prev_float",function(){var t=this;return q(t,d(d("Float"),"INFINITY")["$-@"]())?d(d("Float"),"INFINITY")["$-@"]():Z(t["$nan?"]())?d(d("Float"),"NAN"):Z(T(t,0))?r(t):-n(Math.abs(t))}),D(o,"arg","angle"),D(o,"eql?","=="),D(o,"fdiv","/"),D(o,"inspect","to_s"),D(o,"kind_of?","is_a?"),D(o,"magnitude","abs"),D(o,"modulo","%"),D(o,"object_id","__id__"),D(o,"phase","angle"),D(o,"succ","next"),D(o,"to_int","to_i")}("::",d("Numeric")),C("::","Fixnum",d("Number")),function(I,g,c){var o=z(I,g,"Integer"),w=[o].concat(c);return o.$$is_number_class=!0,o.$$is_integer_class=!0,function(B,_){var s=[B].concat(_),n=$.$r(s);return S(B,"$allocate",function(){var e=this;return L.$raise(d("TypeError"),"allocator undefined for "+e.$name())}),$.udef(B,"$new"),S(B,"$sqrt",function(e){return e=b["$coerce_to!"](e,d("Integer"),"to_int"),e<0&&L.$raise(d(d("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(e),10)}),S(B,"$try_convert",function(e){var t=this;return n("Opal")["$coerce_to?"](e,t,"to_int")})}($.get_singleton_class(o),w),C(o,"MAX",Math.pow(2,30)-1),C(o,"MIN",-Math.pow(2,30))}("::",d("Numeric"),E),function(I,g,c){var o=z(I,g,"Float");return o.$$is_number_class=!0,function(w,B){return S(w,"$allocate",function(){var s=this;return L.$raise(d("TypeError"),"allocator undefined for "+s.$name())}),$.udef(w,"$new"),S(w,"$===",function(s){return!!s.$$is_number})}($.get_singleton_class(o)),C(o,"INFINITY",1/0),C(o,"MAX",Number.MAX_VALUE),C(o,"MIN",Number.MIN_VALUE),C(o,"NAN",NaN),C(o,"DIG",15),C(o,"MANT_DIG",53),C(o,"RADIX",2),C(o,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",d("Numeric"))};Opal.modules["corelib/range"]=function($){var z=$.klass,b=$.truthy,L=$.Kernel,S=$.def,re=$.not,Z=$.send2,T=$.find_super,W=$.lambda,p=$.send,D=$.rb_ge,$e=$.rb_gt,J=$.eqeq,G=$.rb_le,O=$.rb_lt,Y=$.eqeqeq,q=$.return_ivar,h=$.rb_minus,R=$.Opal,H=$.rb_divide,k=$.rb_plus,F=$.rb_times,m=$.thrower,A=$.alias,C=$.top,x=[],E=$.nil,u=$.$$$;return $.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),C.$require("corelib/enumerable"),function(d,I,g){var c=z(d,I,"Range"),o=[c].concat(g),w=$.$r(o),B=c.$$prototype;B.begin=B.end=B.excl=E,c.$include(u("Enumerable")),c.$$prototype.$$is_range=!0,c.$attr_reader("begin","end"),S(c,"$initialize",function(n,r,e){var t=this;return e==null&&(e=!1),b(t.begin)&&L.$raise(u("NameError"),"'initialize' called twice"),b(n["$<=>"](r))||b(n["$nil?"]())||b(r["$nil?"]())||L.$raise(u("ArgumentError"),"bad value for range"),t.begin=n,t.end=r,t.excl=e},-3),S(c,"$===",function(n){var r=this;return b(n.$$is_range)?!1:r["$cover?"](n)});function _(s){return s.begin===E||s.end===E||s.begin===-1/0||s.end===1/0||s.begin===1/0||s.end===-1/0}return S(c,"$count",function s(){var n=s.$$p||E,r=this;return s.$$p=null,re(n!==E)&&b(_(r))?u(u("Float"),"INFINITY"):Z(r,T(r,"count",s,!1,!0),"count",[],n)}),S(c,"$to_a",function s(){var n=s.$$p||E,r=this;return s.$$p=null,b(_(r))&&L.$raise(u("TypeError"),"cannot convert endless range to an array"),Z(r,T(r,"to_a",s,!1,!0),"to_a",[],n)}),S(c,"$cover?",function(n){var r=this,e=E,t=E,i=E,a=E,l=E,v=E,N=E,P=E;return e=W(function(V,ee){var ae=E;return V==null&&(V=E),ee==null&&(ee=E),b(ae=V["$<=>"](ee))?ae:1}),b(n.$$is_range)?(t=n.$begin(),i=n.$end(),a=n["$exclude_end?"](),b(r.begin)&&b(t["$nil?"]())||b(r.end)&&b(i["$nil?"]())||b(t)&&b(i)&&b(p(e.$call(t,i),"then",[],function(V){return V==null&&(V=E),b(a)?D(V,0):$e(V,0)}))||b(t)&&re(r["$cover?"](t))?!1:(l=e.$call(r.end,i),J(r.excl,a)?D(l,0):b(r.excl)?$e(l,0):b(D(l,0))?!0:(v=n.$max(),b(N=v["$nil?"]()["$!"]())?G(e.$call(v,r.end),0):N))):b(r.begin)&&b($e(e.$call(r.begin,n),0))?!1:b(r.end["$nil?"]())?!0:(P=e.$call(n,r.end),b(r.excl)?O(P,0):G(P,0))}),S(c,"$each",function s(){var n=s.$$p||E,r=this,e=E,t=E,i=E;if(s.$$p=null,n===E)return p(r,"enum_for",["each"],function v(){var N=v.$$s==null?this:v.$$s;return N.$size()},{$$s:r});var a,l;if(r.begin.$$is_number&&r.end.$$is_number){for((r.begin%1!==0||r.end%1!==0)&&L.$raise(u("TypeError"),"can't iterate from Float"),a=r.begin,l=r.end+(b(r.excl)?0:1);a<l;a++)n(a);return r}if(r.begin.$$is_string&&r.end.$$is_string)return p(r.begin,"upto",[r.end,r.excl],n.$to_proc()),r;for(e=r.begin,t=r.end,b(e["$respond_to?"]("succ"))||L.$raise(u("TypeError"),"can't iterate from "+e.$class());b(b(i=r.end["$nil?"]())?i:O(e["$<=>"](t),0));)$.yield1(n,e),e=e.$succ();return re(r.excl)&&J(e,t)&&$.yield1(n,e),r}),S(c,"$eql?",function(n){var r=this,e=E,t=E;return Y(u("Range"),n)?b(e=b(t=r.excl["$==="](n["$exclude_end?"]()))?r.begin["$eql?"](n.$begin()):t)?r.end["$eql?"](n.$end()):e:!1}),S(c,"$exclude_end?",q("excl")),S(c,"$first",function s(n){var r=s.$$p||E,e=this;return s.$$p=null,b(e.begin["$nil?"]())&&L.$raise(u("RangeError"),"cannot get the minimum of beginless range"),b(n==null)?e.begin:Z(e,T(e,"first",s,!1,!0),"first",[n],r)},-1),S(c,"$include?",function s(n){var r=s.$$p||E,e=this,t=E,i=E;if(s.$$p=null,b(e.begin.$$is_number||e.end.$$is_number)||b(e.begin["$is_a?"](u("Time")))||b(e.end["$is_a?"](u("Time")))||b(u("Integer").$try_convert(e.begin))||b(u("Integer").$try_convert(e.end)))return e["$cover?"](n);if(b(e.begin.$$is_string||e.end.$$is_string)){if(b(e.begin.$$is_string&&e.end.$$is_string))return p(e.begin.$upto(e.end,e.excl),"any?",[],function(l){return l==null&&(l=E),l["$=="](n)});if(b(e.begin["$nil?"]()))return t=n["$<=>"](e.end),b(i=t["$nil?"]()["$!"]())?b(e.excl)?O(t,0):G(t,0):i;if(b(e.end["$nil?"]()))return t=e.begin["$<=>"](n),b(i=t["$nil?"]()["$!"]())?G(t,0):i}return Z(e,T(e,"include?",s,!1,!0),"include?",[n],r)}),S(c,"$last",function(n){var r=this;return b(r.end["$nil?"]())&&L.$raise(u("RangeError"),"cannot get the maximum of endless range"),b(n==null)?r.end:r.$to_a().$last(n)},-1),S(c,"$max",function s(){var n=s.$$p||E,r=this;return s.$$p=null,b(r.end["$nil?"]())?L.$raise(u("RangeError"),"cannot get the maximum of endless range"):n!==E?Z(r,T(r,"max",s,!1,!0),"max",[],n):re(r.begin["$nil?"]())&&(b($e(r.begin,r.end))||b(r.excl)&&J(r.begin,r.end))?E:r.excl?r.end-1:r.end}),S(c,"$min",function s(){var n=s.$$p||E,r=this;return s.$$p=null,b(r.begin["$nil?"]())?L.$raise(u("RangeError"),"cannot get the minimum of beginless range"):n!==E?Z(r,T(r,"min",s,!1,!0),"min",[],n):re(r.end["$nil?"]())&&(b($e(r.begin,r.end))||b(r.excl)&&J(r.begin,r.end))?E:r.begin}),S(c,"$size",function(){var n=this.begin,r=this.end;if(u("Numeric")["$==="](n)){if(u("Numeric")["$==="](r)){var e=h(r,n);return e<0?0:(this.excl||(e+=1),u("Float")["$==="](n)||u("Float")["$==="](r)?Math.floor(e):e)}else if(r===E)return 1/0}else if(n===E&&u("Numeric")["$==="](r))return 1/0;return E}),S(c,"$step",function s(n){var r=s.$$p||E,e=this,t=E,i=E;s.$$p=null;function a(){n==null?n=1:n.$$is_number||(n=R["$coerce_to!"](n,u("Integer"),"to_int")),n<0?L.$raise(u("ArgumentError"),"step can't be negative"):n===0&&L.$raise(u("ArgumentError"),"step can't be 0")}function l(){if(!e.begin["$respond_to?"]("succ")||e.begin.$$is_string&&e.end.$$is_string)return E;if(n%1===0)return H(e.$size(),n).$ceil();var v=e.begin,N=e.end,P=Math.abs,j=Math.floor,V=(P(v)+P(N)+P(N-v))/P(n)*u(u("Float"),"EPSILON"),ee;return V>.5&&(V=.5),e.excl?(ee=j((N-v)/n-V),ee*n+v<N&&ee++):ee=j((N-v)/n+V)+1,ee}return r===E?(b(e.begin["$is_a?"](w("Numeric")))||b(e.begin["$nil?"]()))&&(b(e.end["$is_a?"](w("Numeric")))||b(e.end["$nil?"]()))&&re(b(t=e.begin["$nil?"]())?e.end["$nil?"]():t)?u(u("Enumerator"),"ArithmeticSequence").$new(e,n,"step"):p(e,"enum_for",["step",n],function(){return a(),l()}):(a(),b(e.begin.$$is_number&&e.end.$$is_number)?(i=0,function(){try{var v=m("break");return p(e,"loop",[],function N(){var P=N.$$s==null?this:N.$$s,j=E;return P.begin==null&&(P.begin=E),P.excl==null&&(P.excl=E),P.end==null&&(P.end=E),j=k(P.begin,F(i,n)),b(P.excl)?b(D(j,P.end))&&v.$throw(E,N.$$is_lambda):b($e(j,P.end))&&v.$throw(E,N.$$is_lambda),$.yield1(r,j),i=k(i,1)},{$$s:e})}catch(N){if(N===v)return N.$v;throw N}finally{v.is_orphan=!0}}()):(e.begin.$$is_string&&e.end.$$is_string&&n%1!==0&&L.$raise(u("TypeError"),"no implicit conversion to float from string"),p(e,"each_with_index",[],function(N,P){return N==null&&(N=E),P==null&&(P=E),J(P["$%"](n),0)?$.yield1(r,N):E})),e)},-1),S(c,"$%",function(n){var r=this;return b(r.begin["$is_a?"](w("Numeric")))&&b(r.end["$is_a?"](w("Numeric")))?u(u("Enumerator"),"ArithmeticSequence").$new(r,n,"%"):r.$step(n)}),S(c,"$bsearch",function s(){var n=s.$$p||E,r=this;return s.$$p=null,n===E?r.$enum_for("bsearch"):(b(_(r)&&(r.begin.$$is_number||r.end.$$is_number))&&L.$raise(u("NotImplementedError"),"Can't #bsearch an infinite range"),b(r.begin.$$is_number&&r.end.$$is_number)||L.$raise(u("TypeError"),"can't do binary search for "+r.begin.$class()),p(r.$to_a(),"bsearch",[],n.$to_proc()))}),S(c,"$to_s",function(){var n=this,r=E;return""+(b(r=n.begin)?r:"")+(b(n.excl)?"...":"..")+(b(r=n.end)?r:"")}),S(c,"$inspect",function(){var n=this,r=E;return""+(b(r=n.begin)?n.begin.$inspect():r)+(b(n.excl)?"...":"..")+(b(r=n.end)?n.end.$inspect():r)}),S(c,"$marshal_load",function(n){var r=this;return r.begin=n["$[]"]("begin"),r.end=n["$[]"]("end"),r.excl=n["$[]"]("excl")}),S(c,"$hash",function(){var n=this;return[u("Range"),n.begin,n.end,n.excl].$hash()}),A(c,"==","eql?"),A(c,"member?","include?")}("::",null,x)};Opal.modules["corelib/proc"]=function($){var z=$.slice,b=$.each_ivar,L=$.klass,S=$.truthy,re=$.Kernel,Z=$.defs,T=$.def,W=$.send,p=$.to_a,D=$.return_self,$e=$.ensure_kwargs,J=$.hash_get,G=$.Opal,O=$.alias,Y=$.nil,q=$.$$$;return $.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(h,R){var H=L(h,R,"Proc");$.prop(H.$$prototype,"$$is_proc",!0),$.prop(H.$$prototype,"$$is_lambda",!1),Z(H,"$new",function m(){var A=m.$$p||Y;return m.$$p=null,S(A)||re.$raise(q("ArgumentError"),"tried to create a Proc object without a block"),A});function k(m,A){if(m.$$ret)try{return m.apply(null,A)}catch(C){if(C===m.$$ret)return C.$v;throw C}else return m.apply(null,A)}function F(m,A){if(m.$$brk)try{return $.yieldX(m,A)}catch(C){if(C===m.$$brk)return C.$v;throw C}else return $.yieldX(m,A)}return T(H,"$call",function m(A){var C=m.$$p||Y,x,E,u=this;return m.$$p=null,x=z(arguments),E=x,C!==Y&&(u.$$p=C),u.$$is_lambda?k(u,E):F(u,E)},-1),T(H,"$>>",function m(A){m.$$p;var C=this;return m.$$p=null,W(re,"proc",[],function x(E){var u=x.$$p||Y,d,I,g=x.$$s==null?this:x.$$s,c=Y;return x.$$p=null,d=z(arguments),I=d,c=W(g,"call",p(I),u.$to_proc()),A.$call(c)},{$$arity:-1,$$s:C})}),T(H,"$<<",function m(A){m.$$p;var C=this;return m.$$p=null,W(re,"proc",[],function x(E){var u=x.$$p||Y,d,I,g=x.$$s==null?this:x.$$s,c=Y;return x.$$p=null,d=z(arguments),I=d,c=W(A,"call",p(I),u.$to_proc()),g.$call(c)},{$$arity:-1,$$s:C})}),T(H,"$to_proc",D),T(H,"$lambda?",function(){var A=this;return!!A.$$is_lambda}),T(H,"$arity",function(){var A=this;return A.$$is_curried?-1:A.$$arity!=null?A.$$arity:A.length}),T(H,"$source_location",function(){var A=this,C=Y;return A.$$is_curried?Y:S(C=A.$$source_location)?C:Y}),T(H,"$binding",function(){var A=this;return A.$$is_curried&&re.$raise(q("ArgumentError"),"Can't create Binding"),S(q("::","Binding","skip_raise")?"constant":Y)?q("Binding").$new(Y,[],A.$$s,A.$source_location()):Y}),T(H,"$parameters",function(A){var C,x=this;if(A=$e(A),C=J(A,"lambda"),x.$$is_curried)return[["rest"]];if(x.$$parameters){if(C??x.$$is_lambda)return x.$$parameters;var E=[],u,d;for(u=0,d=x.$$parameters.length;u<d;u++){var I=x.$$parameters[u];I[0]==="req"&&(I=["opt",I[1]]),E.push(I)}return E}else return[]},-1),T(H,"$curry",function(A){var C=this;A===void 0?A=C.length:(A=G["$coerce_to!"](A,q("Integer"),"to_int"),C.$$is_lambda&&A!==C.length&&re.$raise(q("ArgumentError"),"wrong number of arguments ("+A+" for "+C.length+")"));function x(){var E=z(arguments),u=E.length,d;return u>A&&C.$$is_lambda&&!C.$$is_curried&&re.$raise(q("ArgumentError"),"wrong number of arguments ("+u+" for "+A+")"),u>=A?C.$call.apply(C,E):(d=function(){return x.apply(null,E.concat(z(arguments)))},d.$$is_lambda=C.$$is_lambda,d.$$is_curried=!0,d)}return x.$$is_lambda=C.$$is_lambda,x.$$is_curried=!0,x},-1),T(H,"$dup",function(){var A=this,C=A.$$original_proc||A,x=function(){return C.apply(this,arguments)};return b(A,function(E){x[E]=A[E]}),x}),O(H,"===","call"),O(H,"clone","dup"),O(H,"yield","call"),O(H,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function($){var z=$.klass,b=$.def,L=$.truthy,S=$.slice,re=$.alias,Z=$.Kernel,T=$.send,W=$.to_a,p=$.nil,D=$.$$$;return $.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function($e,J){var G=z($e,J,"Method"),O=G.$$prototype;return O.method=O.receiver=O.owner=O.name=p,G.$attr_reader("owner","receiver","name"),b(G,"$initialize",function(q,h,R,H){var k=this;return k.receiver=q,k.owner=h,k.name=H,k.method=R}),b(G,"$arity",function(){var q=this;return q.method.$arity()}),b(G,"$parameters",function(){var q=this;return q.method.$$parameters}),b(G,"$source_location",function(){var q=this,h=p;return L(h=q.method.$$source_location)?h:["(eval)",0]}),b(G,"$comments",function(){var q=this,h=p;return L(h=q.method.$$comments)?h:[]}),b(G,"$call",function Y(q){var h=Y.$$p||p,R,H,k=this;return Y.$$p=null,R=S(arguments),H=R,k.method.$$p=h,k.method.apply(k.receiver,H)},-1),b(G,"$curry",function(q){var h=this;return h.method.$curry(q)},-1),b(G,"$>>",function(q){var h=this;return h.method["$>>"](q)}),b(G,"$<<",function(q){var h=this;return h.method["$<<"](q)}),b(G,"$unbind",function(){var q=this;return D("UnboundMethod").$new(q.receiver.$class(),q.owner,q.method,q.name)}),b(G,"$to_proc",function(){var q=this,h=q.$call.bind(q);return h.$$unbound=q.method,h.$$is_lambda=!0,h.$$arity=q.method.$$arity==null?q.method.length:q.method.$$arity,h.$$parameters=q.method.$$parameters,h}),b(G,"$inspect",function(){var q=this;return"#<"+q.$class()+": "+q.receiver.$class()+"#"+q.name+" (defined in "+q.owner+" in "+q.$source_location().$join(":")+")>"}),re(G,"[]","call"),re(G,"===","call")}("::",null),function($e,J){var G=z($e,J,"UnboundMethod"),O=G.$$prototype;return O.method=O.owner=O.name=O.source=p,G.$attr_reader("source","owner","name"),b(G,"$initialize",function(q,h,R,H){var k=this;return k.source=q,k.owner=h,k.method=R,k.name=H,k.$$method=R}),b(G,"$arity",function(){var q=this;return q.method.$arity()}),b(G,"$parameters",function(){var q=this;return q.method.$$parameters}),b(G,"$source_location",function(){var q=this,h=p;return L(h=q.method.$$source_location)?h:["(eval)",0]}),b(G,"$comments",function(){var q=this,h=p;return L(h=q.method.$$comments)?h:[]}),b(G,"$bind",function(q){var h=this;if(h.owner.$$is_module||$.is_a(q,h.owner))return D("Method").$new(q,h.owner,h.method,h.name);Z.$raise(D("TypeError"),"can't bind singleton method to a different class (expected "+q+".kind_of?("+h.owner+" to be true)")}),b(G,"$bind_call",function Y(q,h){var R=Y.$$p||p,H,k,F=this;return Y.$$p=null,H=S(arguments,1),k=H,T(F.$bind(q),"call",W(k),R.$to_proc())},-2),b(G,"$inspect",function(){var q=this;return"#<"+q.$class()+": "+q.source+"#"+q.name+" (defined in "+q.owner+" in "+q.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function($){var z=$.gvars,b=$.const_set,L=$.Object,S=$.nil;return $.add_stubs("new"),z["&"]=z["~"]=z["`"]=z["'"]=S,z.LOADED_FEATURES=z['"']=$.loaded_features,z.LOAD_PATH=z[":"]=[],z["/"]=`
`,z[","]=S,b("::","ARGV",[]),b("::","ARGF",L.$new()),b("::","ENV",new Map),z.VERBOSE=!1,z.DEBUG=!1,z.SAFE=0};Opal.modules["corelib/io"]=function($){var z=$.klass,b=$.const_set,L=$.not,S=$.truthy,re=$.def,Z=$.return_ivar,T=$.return_val,W=$.slice,p=$.Kernel,D=$.gvars,$e=$.send,J=$.to_a,G=$.rb_plus,O=$.neqeq,Y=$.range,q=$.eqeq,h=$.to_ary,R=$.rb_gt,H=$.assign_ivar_val,k=$.alias,F,m=$.nil,A=$.$$$;$.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(x,E){var u=z(x,E,"IO"),d=u.$$prototype;return d.read_buffer=d.closed=m,b(u,"SEEK_SET",0),b(u,"SEEK_CUR",1),b(u,"SEEK_END",2),b(u,"SEEK_DATA",3),b(u,"SEEK_HOLE",4),b(u,"READABLE",1),b(u,"WRITABLE",4),u.$attr_reader("eof"),u.$attr_accessor("read_proc","sync","tty","write_proc"),re(u,"$initialize",function(g,c){var o=this;return c==null&&(c="r"),o.fd=g,o.flags=c,o.eof=!1,S(c["$include?"]("r"))&&L(c["$match?"](/[wa+]/))?o.closed="write":S(c["$match?"](/[wa]/))&&L(c["$match?"](/[r+]/))?o.closed="read":m},-2),re(u,"$fileno",Z("fd")),re(u,"$tty?",function(){var g=this;return g.tty==!0}),re(u,"$write",function(g){var c=this;return c.write_proc(g),g.$size()}),re(u,"$flush",T(m)),re(u,"$<<",function(g){var c=this;return c.$write(g),c}),re(u,"$print",function(g){var c,o,w=this;D[","]==null&&(D[","]=m),c=W(arguments),o=c;for(var B=0,_=o.length;B<_;B++)o[B]=p.$String(o[B]);return w.$write(o.join(D[","])),m},-1),re(u,"$puts",function(g){var c,o,w=this;c=W(arguments),o=c;var B;if(o.length===0)return w.$write(`
`),m;for(var _=0,s=o.length;_<s;_++)if(o[_].$$is_array){var n=o[_].$flatten();n.length>0&&$e(w,"puts",J(n))}else o[_].$$is_string?B=o[_].valueOf():B=p.$String(o[_]),B.endsWith(`
`)||(B+=`
`),w.$write(B);return m},-1),re(u,"$getc",function(){var g=this,c=m,o=m,w=m;g.read_buffer=S(c=g.read_buffer)?c:"",o="";do if(g.read_buffer=G(g.read_buffer,o),O(g.read_buffer,""))return w=g.read_buffer["$[]"](0),g.read_buffer=g.read_buffer["$[]"](Y(1,-1,!1)),w;while(S(o=g.$sysread_noraise(1)));return m}),re(u,"$getbyte",function(){var g,c=this;return g=c.$getc(),g===m||g==null?m:g.$ord()}),re(u,"$readbyte",function(){var g=this;return g.$readchar().$ord()}),re(u,"$readchar",function(){var g=this,c=m;return S(c=g.$getc())?c:p.$raise(A("EOFError"),"end of file reached")}),re(u,"$readline",function(g){var c,o,w=this,B=m;return c=W(arguments),o=c,S(B=$e(w,"gets",J(o)))?B:p.$raise(A("EOFError"),"end of file reached")},-1),re(u,"$gets",function(g,c,o){var w,B,_=this,s=m,n=m,r=m,e=m,t=m,i=m;D["/"]==null&&(D["/"]=m),g==null&&(g=!1),c==null&&(c=m),o==null&&(o=new Map),S(g.$$is_number)&&L(c)&&(w=[!1,g,c],g=w[0],c=w[1],o=w[2]),S(g.$$is_hash)&&L(c)&&q(o,new Map)?(w=[!1,m,g],g=w[0],c=w[1],o=w[2]):S(c.$$is_hash)&&q(o,new Map)&&(w=[g,m,c],g=w[0],c=w[1],o=w[2]),s=g,q(g,!1)&&(g=D["/"]),q(g,"")&&(g=/\r?\n\r?\n/),g=S(n=g)?n:"",q(s,"")||(g=g.$to_str()),r=q(s,"")?2:g.$length(),q(g," ")&&(g=/ /),_.read_buffer=S(n=_.read_buffer)?n:"",e="",t=m;do if(_.read_buffer=G(_.read_buffer,e),O(g,"")&&S(S(g.$$is_regexp)?_.read_buffer["$match?"](g):_.read_buffer["$include?"](g))){i=_.read_buffer,B=_.read_buffer.$split(g,2),w=h(B),t=w[0]==null?m:w[0],_.read_buffer=w[1]==null?m:w[1],O(t,i)&&(t=G(t,i["$[]"](t.$length(),r)));break}while(S(e=_.$sysread_noraise(q(g,"")?65536:1)));return S(t)||(w=[S(n=_.read_buffer)?n:"",""],t=w[0],_.read_buffer=w[1],q(t,"")&&(t=m)),S(t)&&(S(c)&&(t=t["$[]"]($.Range.$new(0,c,!0)),_.read_buffer=G(t["$[]"]($.Range.$new(c,-1,!1)),_.read_buffer)),S(o["$[]"]("chomp"))&&(t=t.$sub(/\r?\n$/,"")),q(s,"")&&(t=t.$sub(/^[\r\n]+/,""))),q(s,!1)&&(D._=t),t},-1),re(u,"$sysread",function(g){var c=this,o=m;return S(o=c.read_proc(g))?o:(c.eof=!0,p.$raise(A("EOFError"),"end of file reached"))}),re(u,"$sysread_noraise",function(g){var c=this;try{return c.$sysread(g)}catch(o){if($.rescue(o,[A("EOFError")]))try{return m}finally{$.pop_exception(o)}else throw o}}),re(u,"$readpartial",function(g){var c,o=this,w=m,B=m,_=m;return o.read_buffer=S(w=o.read_buffer)?w:"",B=o.$sysread(g),c=[G(o.read_buffer,S(w=B)?w:""),""],_=c[0],o.read_buffer=c[1],q(_,"")&&(_=m),_}),re(u,"$read",function(g){var c,o=this,w=m,B=m,_=m;g==null&&(g=m),o.read_buffer=S(w=o.read_buffer)?w:"",B="",_=m;do if(o.read_buffer=G(o.read_buffer,B),S(g)&&S(R(o.read_buffer.$length(),g)))return c=[o.read_buffer["$[]"]($.Range.$new(0,g,!0)),o.read_buffer["$[]"]($.Range.$new(g,-1,!1))],_=c[0],o.read_buffer=c[1],_;while(S(B=o.$sysread_noraise(S(w=g)?w:65536)));return c=[o.read_buffer,""],_=c[0],o.read_buffer=c[1],_},-1),re(u,"$readlines",function(g){var c=this;return D["/"]==null&&(D["/"]=m),g==null&&(g=D["/"]),c.$each_line(g).$to_a()},-1),re(u,"$each",function I(g,c){var o=I.$$p||m,w,B,_,s=this,n=m;if(D["/"]==null&&(D["/"]=m),I.$$p=null,w=W(arguments),w.length>0&&(B=w.shift()),B==null&&(B=D["/"]),_=w,o===m)return $e(s,"enum_for",["each",B].concat(J(_)));for(;S(n=$e(s,"gets",[B].concat(J(_))));)$.yield1(o,n);return s},-1),re(u,"$each_byte",function I(){var g=I.$$p||m,c=this,o=m;if(I.$$p=null,g===m)return c.$enum_for("each_byte");for(;S(o=c.$getbyte());)$.yield1(g,o);return c}),re(u,"$each_char",function I(){var g=I.$$p||m,c=this,o=m;if(I.$$p=null,g===m)return c.$enum_for("each_char");for(;S(o=c.$getc());)$.yield1(g,o);return c}),re(u,"$close",H("closed","both")),re(u,"$close_read",function(){var g=this;return q(g.closed,"write")?g.closed="both":g.closed="read"}),re(u,"$close_write",function(){var g=this;return q(g.closed,"read")?g.closed="both":g.closed="write"}),re(u,"$closed?",function(){var g=this;return g.closed["$=="]("both")}),re(u,"$closed_read?",function(){var g=this,c=m;return S(c=g.closed["$=="]("read"))?c:g.closed["$=="]("both")}),re(u,"$closed_write?",function(){var g=this,c=m;return S(c=g.closed["$=="]("write"))?c:g.closed["$=="]("both")}),re(u,"$check_writable",function(){var g=this;return S(g["$closed_write?"]())?p.$raise(A("IOError"),"not opened for writing"):m}),re(u,"$check_readable",function(){var g=this;return S(g["$closed_read?"]())?p.$raise(A("IOError"),"not opened for reading"):m}),k(u,"each_line","each"),k(u,"eof?","eof")}("::",null),b("::","STDIN",D.stdin=A("IO").$new(0,"r")),b("::","STDOUT",D.stdout=A("IO").$new(1,"w")),b("::","STDERR",D.stderr=A("IO").$new(2,"w"));var C=$.global.console;return A("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(x){process.stdout.write(x)}:function(x){C.log(x)}),A("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(x){process.stderr.write(x)}:function(x){C.warn(x)}),F=[function(x){var E=prompt();return E!==null?E+`
`:m}],$e(A("STDIN"),"read_proc=",F),F[F.length-1]};Opal.modules["opal/regexp_anchors"]=function($){var z=$.module,b=$.const_set,L=[];$.nil;var S=$.$$$;return $.add_stubs("new"),function(re,Z){var T=z(re,"Opal"),W=[T].concat(Z),p=$.$r(W);return b(T,"REGEXP_START","^"),b(T,"REGEXP_END","$"),b(T,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),b(T,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),b(T,"INLINE_IDENTIFIER_REGEXP",p("Regexp").$new("[^"+S(T,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+S(T,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),b(T,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),b(T,"CONST_NAME_REGEXP",p("Regexp").$new(""+S(T,"REGEXP_START")+"(::)?[A-Z][^"+S(T,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+S(T,"REGEXP_END")))}(L[0],L)};Opal.modules["opal/mini"]=function($){var z=$.Object;return $.nil,$.add_stubs("require"),z.$require("opal/base"),z.$require("corelib/nil"),z.$require("corelib/boolean"),z.$require("corelib/string"),z.$require("corelib/comparable"),z.$require("corelib/enumerable"),z.$require("corelib/enumerator"),z.$require("corelib/array"),z.$require("corelib/hash"),z.$require("corelib/number"),z.$require("corelib/range"),z.$require("corelib/proc"),z.$require("corelib/method"),z.$require("corelib/regexp"),z.$require("corelib/variables"),z.$require("corelib/io"),z.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function($){var z=$.coerce_to,b=$.module,L=$.slice,S=$.truthy,re=$.eqeq,Z=$.Opal,T=$.Kernel,W=$.gvars,p=$.def,D=$.alias,$e=$.nil,J=$.$$$;return $.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(G){var O=b(G,"Kernel");return p(O,"$format",function(q,h){var R,H,k=$e;W.DEBUG==null&&(W.DEBUG=$e),R=L(arguments,1),H=R,re(H.$length(),1)&&S(H["$[]"](0)["$respond_to?"]("to_ary"))&&(k=Z["$coerce_to?"](H["$[]"](0),J("Array"),"to_ary"),S(k["$nil?"]())||(H=k.$to_a()));var F="",m=0,A,C,x=q.length,E,u,d,I,g,c,o,w,B,_,s,n,r,e=1,t=0,i,a=0,l=1,v=2,N=4,P=8,j=16,V=32,ee=64,ae=128;function oe(){i&V&&T.$raise(J("ArgumentError"),"flag after width"),i&ae&&T.$raise(J("ArgumentError"),"flag after precision")}function _e(){i&V&&T.$raise(J("ArgumentError"),"width given twice"),i&ae&&T.$raise(J("ArgumentError"),"width after precision")}function de(M){return M>=H.length&&T.$raise(J("ArgumentError"),"too few arguments"),H[M]}function ge(){switch(t){case-1:T.$raise(J("ArgumentError"),"unnumbered("+e+") mixed with numbered");case-2:T.$raise(J("ArgumentError"),"unnumbered("+e+") mixed with named")}return t=e++,de(t-1)}function ve(M){return t>0&&T.$raise(J("ArgumentError"),"numbered("+M+") after unnumbered("+t+")"),t===-2&&T.$raise(J("ArgumentError"),"numbered("+M+") after named"),M<1&&T.$raise(J("ArgumentError"),"invalid index - "+M+"$"),t=-1,de(M-1)}function me(){return r===void 0?ge():r}function be(M){for(var K,X="";;C++){if(C===x&&T.$raise(J("ArgumentError"),"malformed format string - %*[0-9]"),q.charCodeAt(C)<48||q.charCodeAt(C)>57)return C--,K=parseInt(X,10)||0,K>2147483647&&T.$raise(J("ArgumentError"),""+M+" too big"),K;X+=q.charAt(C)}}function ie(M){var K,X=be(M);return q.charAt(C+1)==="$"?(C++,K=ve(X)):K=ge(),K.$to_int()}for(C=q.indexOf("%");C!==-1;C=q.indexOf("%",C)){switch(u=void 0,i=a,I=-1,g=-1,r=void 0,A=C,C++,q.charAt(C)){case"%":m=C;case"":case`
`:case"\0":C++;continue}e:for(;C<x;C++)switch(q.charAt(C)){case" ":oe(),i|=j;continue e;case"#":oe(),i|=l;continue e;case"+":oe(),i|=N;continue e;case"-":oe(),i|=v;continue e;case"0":oe(),i|=P;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(c=be("width"),q.charAt(C+1)==="$"){if(C+2===x){u="%",C++;break e}r!==void 0&&T.$raise(J("ArgumentError"),"value given twice - %"+c+"$"),r=ve(c),C++}else _e(),i|=V,I=c;continue e;case"<":case"{":for(w=q.charAt(C)==="<"?">":"}",o="",C++;;C++){if(C===x&&T.$raise(J("ArgumentError"),"malformed name - unmatched parenthesis"),q.charAt(C)===w){if(t>0&&T.$raise(J("ArgumentError"),"named "+o+" after unnumbered("+t+")"),t===-1&&T.$raise(J("ArgumentError"),"named "+o+" after numbered"),t=-2,(H[0]===void 0||!H[0].$$is_hash)&&T.$raise(J("ArgumentError"),"one hash required"),r=H[0].$fetch(o),w===">")continue e;if(u=r.toString(),g!==-1&&(u=u.slice(0,g)),i&v)for(;u.length<I;)u=u+" ";else for(;u.length<I;)u=" "+u;break e}o+=q.charAt(C)}case"*":C++,_e(),i|=V,I=ie("width"),I<0&&(i|=v,I=-I);continue e;case".":if(i&ae&&T.$raise(J("ArgumentError"),"precision given twice"),i|=ee|ae,g=0,C++,q.charAt(C)==="*"){C++,g=ie("precision"),g<0&&(i&=~ee);continue e}g=be("precision");continue e;case"d":case"i":case"u":if(E=T.$Integer(me()),E>=0){for(u=E.toString();u.length<g;)u="0"+u;if(i&v)for((i&N||i&j)&&(u=(i&N?"+":" ")+u);u.length<I;)u=u+" ";else if(i&P&&g===-1){for(;u.length<I-(i&N||i&j?1:0);)u="0"+u;(i&N||i&j)&&(u=(i&N?"+":" ")+u)}else for((i&N||i&j)&&(u=(i&N?"+":" ")+u);u.length<I;)u=" "+u}else{for(u=(-E).toString();u.length<g;)u="0"+u;if(i&v)for(u="-"+u;u.length<I;)u=u+" ";else if(i&P&&g===-1){for(;u.length<I-1;)u="0"+u;u="-"+u}else for(u="-"+u;u.length<I;)u=" "+u}break e;case"b":case"B":case"o":case"x":case"X":switch(q.charAt(C)){case"b":case"B":B=2,_="0b",s=/^1+/,n="1";break;case"o":B=8,_="0",s=/^3?7+/,n="7";break;case"x":case"X":B=16,_="0x",s=/^f+/,n="f";break}if(E=T.$Integer(me()),E>=0){for(u=E.toString(B);u.length<g;)u="0"+u;if(i&v)for((i&N||i&j)&&(u=(i&N?"+":" ")+u),i&l&&E!==0&&(u=_+u);u.length<I;)u=u+" ";else if(i&P&&g===-1){for(;u.length<I-(i&N||i&j?1:0)-(i&l&&E!==0?_.length:0);)u="0"+u;i&l&&E!==0&&(u=_+u),(i&N||i&j)&&(u=(i&N?"+":" ")+u)}else for(i&l&&E!==0&&(u=_+u),(i&N||i&j)&&(u=(i&N?"+":" ")+u);u.length<I;)u=" "+u}else if(i&N||i&j){for(u=(-E).toString(B);u.length<g;)u="0"+u;if(i&v)for(i&l&&(u=_+u),u="-"+u;u.length<I;)u=u+" ";else if(i&P&&g===-1){for(;u.length<I-1-(i&l?2:0);)u="0"+u;i&l&&(u=_+u),u="-"+u}else for(i&l&&(u=_+u),u="-"+u;u.length<I;)u=" "+u}else{for(u=(E>>>0).toString(B).replace(s,n);u.length<g-2;)u=n+u;if(i&v)for(u=".."+u,i&l&&(u=_+u);u.length<I;)u=u+" ";else if(i&P&&g===-1){for(;u.length<I-2-(i&l?_.length:0);)u=n+u;u=".."+u,i&l&&(u=_+u)}else for(u=".."+u,i&l&&(u=_+u);u.length<I;)u=" "+u}q.charAt(C)===q.charAt(C).toUpperCase()&&(u=u.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(E=T.$Float(me()),E>=0||isNaN(E)){if(E===1/0)u="Inf";else switch(q.charAt(C)){case"f":u=E.toFixed(g===-1?6:g);break;case"e":case"E":u=E.toExponential(g===-1?6:g);break;case"g":case"G":u=E.toExponential(),d=parseInt(u.split("e")[1],10),d<-4||d>=(g===-1?6:g)||(u=E.toPrecision(g===-1?i&l?6:void 0:g));break}if(i&v)for((i&N||i&j)&&(u=(i&N?"+":" ")+u);u.length<I;)u=u+" ";else if(i&P&&E!==1/0&&!isNaN(E)){for(;u.length<I-(i&N||i&j?1:0);)u="0"+u;(i&N||i&j)&&(u=(i&N?"+":" ")+u)}else for((i&N||i&j)&&(u=(i&N?"+":" ")+u);u.length<I;)u=" "+u}else{if(E===-1/0)u="Inf";else switch(q.charAt(C)){case"f":u=(-E).toFixed(g===-1?6:g);break;case"e":case"E":u=(-E).toExponential(g===-1?6:g);break;case"g":case"G":u=(-E).toExponential(),d=parseInt(u.split("e")[1],10),d<-4||d>=(g===-1?6:g)||(u=(-E).toPrecision(g===-1?i&l?6:void 0:g));break}if(i&v)for(u="-"+u;u.length<I;)u=u+" ";else if(i&P&&E!==-1/0){for(;u.length<I-1;)u="0"+u;u="-"+u}else for(u="-"+u;u.length<I;)u=" "+u}q.charAt(C)===q.charAt(C).toUpperCase()&&E!==1/0&&E!==-1/0&&!isNaN(E)&&(u=u.toUpperCase()),u=u.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":T.$raise(J("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(E=me(),E["$respond_to?"]("to_ary")&&(E=E.$to_ary()[0]),E["$respond_to?"]("to_str")?u=E.$to_str():u=String.fromCharCode(z(E,J("Integer"),"to_int")),u.length!==1&&T.$raise(J("ArgumentError"),"%c requires a character"),i&v)for(;u.length<I;)u=u+" ";else for(;u.length<I;)u=" "+u;break e;case"p":if(u=me().$inspect(),g!==-1&&(u=u.slice(0,g)),i&v)for(;u.length<I;)u=u+" ";else for(;u.length<I;)u=" "+u;break e;case"s":if(u=me().$to_s(),g!==-1&&(u=u.slice(0,g)),i&v)for(;u.length<I;)u=u+" ";else for(;u.length<I;)u=" "+u;break e;default:T.$raise(J("ArgumentError"),"malformed format string - %"+q.charAt(C))}u===void 0&&T.$raise(J("ArgumentError"),"malformed format string - %"),F+=q.slice(m,A)+u,m=C+1}return W.DEBUG&&t>=0&&e<H.length&&T.$raise(J("ArgumentError"),"too many arguments for format string"),F+q.slice(m)},-2),D(O,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function($){var z=$.klass,b=$.rb_plus,L=$.truthy,S=$.send,re=$.defs,Z=$.eqeq,T=$.def,W=$.return_ivar,p=$.return_val,D=$.slice,$e=$.Kernel,J=$.Opal,G=$.rb_lt,O,Y=$.top,q=[],h=$.$r(q),R=$.nil,H=$.$$$;return $.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),Y.$require("corelib/string"),function(k,F,m){var A=z(k,F,"Encoding"),C=[A].concat(m),x=A.$$prototype;return x.name=x.dummy=R,re(A,"$register",function E(u,d){var I=E.$$p||R,g=this,c=R,o=R,w=R,B=R,_=R,s=R;return E.$$p=null,d==null&&(d=new Map),c=b([u],L(o=d["$[]"]("aliases"))?o:[]),w=L(o=d["$[]"]("ascii"))&&o,B=L(o=d["$[]"]("dummy"))&&o,L(d["$[]"]("inherits"))?(_=d["$[]"]("inherits").$clone(),_.$initialize(u,c,w,B)):_=g.$new(u,c,w,B),I!==R&&S(_,"instance_eval",[],I.$to_proc()),s=$.encodings,S(c,"each",[],function n(r){var e=n.$$s==null?this:n.$$s;return r==null&&(r=R),e.$const_set(r.$tr("-","_"),_),s[r]=_},{$$s:g})},-2),re(A,"$find",function(u){var d=this;return Z(u,"default_external")?d.$default_external():$.find_encoding(u)}),A.$singleton_class().$attr_accessor("default_external"),A.$attr_reader("name","names"),T(A,"$initialize",function(u,d,I,g){var c=this;return c.name=u,c.names=d,c.ascii=I,c.dummy=g}),T(A,"$ascii_compatible?",W("ascii")),T(A,"$dummy?",W("dummy")),T(A,"$binary?",p(!1)),T(A,"$to_s",W("name")),T(A,"$inspect",function(){var u=this;return"#<Encoding:"+u.name+(L(u.dummy)?" (dummy)":R)+">"}),T(A,"$charsize",function(u){for(var d=0,I=0,g=u.length;I<g;I++){var c=u.charCodeAt(I);c>=55296&&c<=56319||d++}return d}),T(A,"$each_char",function E(u){var d=E.$$p||R;E.$$p=null;for(var I="",g=0,c=u.length;g<c;g++){var o=u.charCodeAt(g),w=u.charAt(g);if(o>=56320&&o<=57343){I=w;continue}else o>=55296&&o<=56319&&(w=I+w);u.encoding.name!="UTF-8"&&(w=new String(w),w.encoding=u.encoding),$.yield1(d,w)}}),T(A,"$each_byte",function(u){return D(arguments),$e.$raise(H("NotImplementedError"))},-1),T(A,"$bytesize",function(u){return D(arguments),$e.$raise(H("NotImplementedError"))},-1),z("::",H("StandardError"),"EncodingError"),z("::",H("EncodingError"),"CompatibilityError"),z(C[0],H("EncodingError"),"UndefinedConversionError"),R}("::",null,q),S(H("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function k(){var F=k.$$s==null?this:k.$$s;return T(F,"$each_byte",function m(A){var C=m.$$p||R;m.$$p=null;for(var x=1/0,E,u=A.length,d=null,I=0;I<u;++I){if(E=A.charCodeAt(I),E>55295&&E<57344){if(!d){if(E>56319){(x-=3)>-1&&($.yield1(C,239),$.yield1(C,191),$.yield1(C,189));continue}else if(I+1===u){(x-=3)>-1&&($.yield1(C,239),$.yield1(C,191),$.yield1(C,189));continue}d=E;continue}if(E<56320){(x-=3)>-1&&($.yield1(C,239),$.yield1(C,191),$.yield1(C,189)),d=E;continue}E=(d-55296<<10|E-56320)+65536}else d&&(x-=3)>-1&&($.yield1(C,239),$.yield1(C,191),$.yield1(C,189));if(d=null,E<128){if((x-=1)<0)break;$.yield1(C,E)}else if(E<2048){if((x-=2)<0)break;$.yield1(C,E>>6|192),$.yield1(C,E&63|128)}else if(E<65536){if((x-=3)<0)break;$.yield1(C,E>>12|224),$.yield1(C,E>>6&63|128),$.yield1(C,E&63|128)}else if(E<1114112){if((x-=4)<0)break;$.yield1(C,E>>18|240),$.yield1(C,E>>12&63|128),$.yield1(C,E>>6&63|128),$.yield1(C,E&63|128)}}}),T(F,"$bytesize",function(A){return A.$bytes().$length()})},{$$s:Y}),S(H("Encoding"),"register",["UTF-16LE"],function k(){var F=k.$$s==null?this:k.$$s;return T(F,"$each_byte",function m(A){var C=m.$$p||R;m.$$p=null;for(var x=0,E=A.length;x<E;x++){var u=A.charCodeAt(x);$.yield1(C,u&255),$.yield1(C,u>>8)}}),T(F,"$bytesize",function(A){return A.length*2})},{$$s:Y}),S(H("Encoding"),"register",["UTF-16BE",new Map([["inherits",H(H("Encoding"),"UTF_16LE")]])],function k(){var F=k.$$s==null?this:k.$$s;return T(F,"$each_byte",function m(A){var C=m.$$p||R;m.$$p=null;for(var x=0,E=A.length;x<E;x++){var u=A.charCodeAt(x);$.yield1(C,u>>8),$.yield1(C,u&255)}})},{$$s:Y}),S(H("Encoding"),"register",["UTF-32LE"],function k(){var F=k.$$s==null?this:k.$$s;return T(F,"$each_byte",function m(A){var C=m.$$p||R;m.$$p=null;for(var x=0,E=A.length;x<E;x++){var u=A.charCodeAt(x);$.yield1(C,u&255),$.yield1(C,u>>8),$.yield1(C,0),$.yield1(C,0)}}),T(F,"$bytesize",function(A){return A.length*4})},{$$s:Y}),S(H("Encoding"),"register",["UTF-32BE",new Map([["inherits",H(H("Encoding"),"UTF_32LE")]])],function k(){var F=k.$$s==null?this:k.$$s;return T(F,"$each_byte",function m(A){var C=m.$$p||R;m.$$p=null;for(var x=0,E=A.length;x<E;x++){var u=A.charCodeAt(x);$.yield1(C,0),$.yield1(C,0),$.yield1(C,u>>8),$.yield1(C,u&255)}})},{$$s:Y}),S(H("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function k(){var F=k.$$s==null?this:k.$$s;return T(F,"$each_char",function m(A){var C=m.$$p||R;m.$$p=null;for(var x=0,E=A.length;x<E;x++){var u=new String(A.charAt(x));u.encoding=A.encoding,$.yield1(C,u)}}),T(F,"$charsize",function(A){return A.length}),T(F,"$each_byte",function m(A){var C=m.$$p||R;m.$$p=null;for(var x=0,E=A.length;x<E;x++){var u=A.charCodeAt(x);$.yield1(C,u&255)}}),T(F,"$bytesize",function(A){return A.length}),T(F,"$binary?",p(!0))},{$$s:Y}),H("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",H(H("Encoding"),"ASCII_8BIT")]])),H("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",H(H("Encoding"),"ASCII_8BIT")]])),function(k,F){var m=z(k,F,"String"),A=m.$$prototype;return A.internal_encoding=A.bytes=A.encoding=R,m.$attr_reader("encoding"),m.$attr_reader("internal_encoding"),$.prop(String.prototype,"bytes",R),$.prop(String.prototype,"encoding",H(H("Encoding"),"UTF_8")),$.prop(String.prototype,"internal_encoding",H(H("Encoding"),"UTF_8")),T(m,"$b",function(){var x=this;return x.$dup().$force_encoding("binary")}),T(m,"$bytesize",function(){var x=this;return x.internal_encoding.$bytesize(x)}),T(m,"$each_byte",function C(){var x=C.$$p||R,E=this;return C.$$p=null,x===R?S(E,"enum_for",["each_byte"],function u(){var d=u.$$s==null?this:u.$$s;return d.$bytesize()},{$$s:E}):(S(E.internal_encoding,"each_byte",[E],x.$to_proc()),E)}),T(m,"$bytes",function(){var x=this,E=R;return typeof x=="string"?new String(x).$each_byte().$to_a():(x.bytes=L(E=x.bytes)?E:x.$each_byte().$to_a(),x.bytes.$dup())}),T(m,"$each_char",function C(){var x=C.$$p||R,E=this;return C.$$p=null,x===R?S(E,"enum_for",["each_char"],function u(){var d=u.$$s==null?this:u.$$s;return d.$length()},{$$s:E}):(S(E.encoding,"each_char",[E],x.$to_proc()),E)}),T(m,"$chars",function C(){var x=C.$$p||R,E=this;return C.$$p=null,L(x)?S(E,"each_char",[],x.$to_proc()):E.$each_char().$to_a()}),T(m,"$each_codepoint",function C(){var x=C.$$p||R,E=this;if(C.$$p=null,x===R)return E.$enum_for("each_codepoint");for(var u=0,d=E.length;u<d;u++)$.yield1(x,E.codePointAt(u));return E}),T(m,"$codepoints",function C(){var x=C.$$p||R,E=this;return C.$$p=null,x!==R?S(E,"each_codepoint",[],x.$to_proc()):E.$each_codepoint().$to_a()}),T(m,"$encode",function(x){var E=this;return $.enc(E,x)}),T(m,"$force_encoding",function(x){var E=this,u=E;return x===u.encoding||(x=J["$coerce_to!"](x,H("String"),"to_s"),x=H("Encoding").$find(x),x===u.encoding)||(u=$.set_encoding(u,x)),u}),T(m,"$getbyte",function(x){var E=this,u=R;return u=E.$bytes(),x=J["$coerce_to!"](x,H("Integer"),"to_int"),L(G(u.$length(),x))?R:u["$[]"](x)}),T(m,"$initialize_copy",function(x){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),T(m,"$valid_encoding?",p(!0))}("::",null),O=[H(h("Encoding"),"UTF_8")],S(H("Encoding"),"default_external=",O),O[O.length-1]};Opal.modules["corelib/math"]=function($){var z=$.type_error,b=$.module,L=$.const_set,S=$.Class,re=$.slice,Z=$.Kernel,T=$.defs,W=$.truthy,p=$.send,D=$.def,$e=$.rb_minus,J=$.eqeqeq,G=$.rb_divide,O=[],Y=$.nil,q=$.$$$;return $.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(h,R){var H=b(h,"Math"),k=[H].concat(R),F=$.$r(k);return L(H,"E",Math.E),L(H,"PI",Math.PI),L(H,"DomainError",S.$new(q("StandardError"))),T(H,"$checked",function(A,C){var x,E;if(x=re(arguments,1),E=x,isNaN(E[0])||E.length==2&&isNaN(E[1]))return NaN;var u=Math[A].apply(null,E);return isNaN(u)&&Z.$raise(F("DomainError"),'Numerical argument is out of domain - "'+A+'"'),u},-2),T(H,"$float!",function(A){try{return Z.$Float(A)}catch(C){if($.rescue(C,[q("ArgumentError")]))try{return Z.$raise(z(A,q("Float")))}finally{$.pop_exception(C)}else throw C}}),T(H,"$integer!",function(A){try{return Z.$Integer(A)}catch(C){if($.rescue(C,[q("ArgumentError")]))try{return Z.$raise(z(A,q("Integer")))}finally{$.pop_exception(C)}else throw C}}),H.$module_function(),W(typeof Math.erf<"u")||$.prop(Math,"erf",function(m){var A=.254829592,C=-.284496736,x=1.421413741,E=-1.453152027,u=1.061405429,d=.3275911,I=1;m<0&&(I=-1),m=Math.abs(m);var g=1/(1+d*m),c=1-((((u*g+E)*g+x)*g+C)*g+A)*g*Math.exp(-m*m);return I*c}),W(typeof Math.erfc<"u")||$.prop(Math,"erfc",function(m){var A=Math.abs(m),C=1/(.5*A+1),x=C*.17087277+-.82215223,E=C*x+1.48851587,u=C*E+-1.13520398,d=C*u+.27886807,I=C*d+-.18628806,g=C*I+.09678418,c=C*g+.37409196,o=C*c+1.00002368,w=C*o,B=-A*A-1.26551223+w,_=C*Math.exp(B);return m<0?2-_:_}),p(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function m(A){var C=m.$$s==null?this:m.$$s;return A==null&&(A=Y),p(C,"define_method",[A],function(E){return E==null&&(E=Y),q("Math").$checked(A,q("Math")["$float!"](E))})},{$$s:H}),D(H,"$atan2",function(A,C){return q("Math").$checked("atan2",q("Math")["$float!"](A),q("Math")["$float!"](C))}),D(H,"$hypot",function(A,C){return q("Math").$checked("hypot",q("Math")["$float!"](A),q("Math")["$float!"](C))}),D(H,"$frexp",function(A){if(A=F("Math")["$float!"](A),isNaN(A))return[NaN,0];var C=Math.floor(Math.log(Math.abs(A))/Math.log(2))+1,x=A/Math.pow(2,C);return[x,C]}),D(H,"$gamma",function(A){A=F("Math")["$float!"](A);var C,x,E,u,d,I,g,c,o,w=4.7421875,B=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(A))return NaN;if(A===0&&1/A<0)return-1/0;if((A===-1||A===-1/0)&&Z.$raise(F("DomainError"),'Numerical argument is out of domain - "gamma"'),F("Integer")["$==="](A)){if(A<=0)return isFinite(A)?1/0:NaN;if(A>171)return 1/0;for(u=A-2,d=A-1;u>1;)d*=u,u--;return d==0&&(d=1),d}if(A<.5)return Math.PI/(Math.sin(Math.PI*A)*q("Math").$gamma($e(1,A)));if(A>=171.35)return 1/0;if(A>85)return I=A*A,g=I*A,c=g*A,o=c*A,Math.sqrt(2*Math.PI/A)*Math.pow(A/Math.E,A)*(1+1/(12*A)+1/(288*I)-139/(51840*g)-571/(2488320*c)+163879/(209018880*o)+5246819/(75246796800*o*A));for(A-=1,E=B[0],C=1;C<B.length;++C)E+=B[C]/(A+C);return x=A+w+.5,Math.sqrt(2*Math.PI)*Math.pow(x,A+.5)*Math.exp(-x)*E}),D(H,"$ldexp",function(A,C){return A=F("Math")["$float!"](A),C=F("Math")["$integer!"](C),isNaN(C)&&Z.$raise(q("RangeError"),"float NaN out of range of integer"),A*Math.pow(2,C)}),D(H,"$lgamma",function(A){return A==-1?[1/0,1]:[Math.log(Math.abs(q("Math").$gamma(A))),q("Math").$gamma(A)<0?-1:1]}),D(H,"$log",function(A,C){return J(q("String"),A)&&Z.$raise(z(A,q("Float"))),W(C==null)?q("Math").$checked("log",q("Math")["$float!"](A)):(J(q("String"),C)&&Z.$raise(z(C,q("Float"))),G(q("Math").$checked("log",q("Math")["$float!"](A)),q("Math").$checked("log",q("Math")["$float!"](C))))},-2),D(H,"$log10",function(A){return J(q("String"),A)&&Z.$raise(z(A,q("Float"))),q("Math").$checked("log10",q("Math")["$float!"](A))}),D(H,"$log2",function(A){return J(q("String"),A)&&Z.$raise(z(A,q("Float"))),q("Math").$checked("log2",q("Math")["$float!"](A))}),D(H,"$tan",function(A){return A=q("Math")["$float!"](A),W(A["$infinite?"]())?q(q("Float"),"NAN"):q("Math").$checked("tan",q("Math")["$float!"](A))})}("::",O)};Opal.modules["corelib/complex/base"]=function($){var z=$.module,b=$.truthy,L=$.def,S=$.klass,re=[],Z=$.nil;return $.add_stubs("new,from_string"),function(T,W){var p=z(T,"Kernel"),D=[p].concat(W),$e=$.$r(D);return L(p,"$Complex",function(G,O){return O==null&&(O=Z),b(O)?$e("Complex").$new(G,O):$e("Complex").$new(G,0)},-2)}("::",re),function(T,W,p){var D=S(T,W,"String"),$e=[D].concat(p),J=$.$r($e);return L(D,"$to_c",function(){var O=this;return J("Complex").$from_string(O)})}("::",null,re)};Opal.modules["corelib/complex"]=function($){var z=$.klass,b=$.truthy,L=$.eqeqeq,S=$.Kernel,re=$.defs,Z=$.rb_times,T=$.def,W=$.rb_plus,p=$.rb_minus,D=$.rb_divide,$e=$.eqeq,J=$.to_ary,G=$.rb_gt,O=$.neqeq,Y=$.return_val,q=$.const_set,h=$.alias,R=$.top,H=[],k=$.nil,F=$.$$$;return $.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),R.$require("corelib/numeric"),R.$require("corelib/complex/base"),function(m,A,C){var x=z(m,A,"Complex"),E=[x].concat(C),u=$.$r(E),d=x.$$prototype;return d.real=d.imag=k,re(x,"$rect",function(g,c){var o=this;return c==null&&(c=0),L(F("Numeric"),g)&&b(g["$real?"]())&&L(F("Numeric"),c)&&b(c["$real?"]())||S.$raise(F("TypeError"),"not a real"),o.$new(g,c)},-2),re(x,"$polar",function(g,c){var o=this;return c==null&&(c=0),L(F("Numeric"),g)&&b(g["$real?"]())&&L(F("Numeric"),c)&&b(c["$real?"]())||S.$raise(F("TypeError"),"not a real"),o.$new(Z(g,F("Math").$cos(c)),Z(g,F("Math").$sin(c)))},-2),x.$attr_reader("real","imag"),T(x,"$initialize",function(g,c){var o=this;return c==null&&(c=0),o.real=g,o.imag=c,o.$freeze()},-2),T(x,"$coerce",function(g){var c=this;return L(F("Complex"),g)?[g,c]:L(F("Numeric"),g)&&b(g["$real?"]())?[F("Complex").$new(g,0),c]:S.$raise(F("TypeError"),""+g.$class()+" can't be coerced into Complex")}),T(x,"$==",function(g){var c=this,o=k;return L(F("Complex"),g)?b(o=c.real["$=="](g.$real()))?c.imag["$=="](g.$imag()):o:L(F("Numeric"),g)&&b(g["$real?"]())?b(o=c.real["$=="](g))?c.imag["$=="](0):o:g["$=="](c)}),T(x,"$-@",function(){var g=this;return S.$Complex(g.real["$-@"](),g.imag["$-@"]())}),T(x,"$+",function(g){var c=this;return L(F("Complex"),g)?S.$Complex(W(c.real,g.$real()),W(c.imag,g.$imag())):L(F("Numeric"),g)&&b(g["$real?"]())?S.$Complex(W(c.real,g),c.imag):c.$__coerced__("+",g)}),T(x,"$-",function(g){var c=this;return L(F("Complex"),g)?S.$Complex(p(c.real,g.$real()),p(c.imag,g.$imag())):L(F("Numeric"),g)&&b(g["$real?"]())?S.$Complex(p(c.real,g),c.imag):c.$__coerced__("-",g)}),T(x,"$*",function(g){var c=this;return L(F("Complex"),g)?S.$Complex(p(Z(c.real,g.$real()),Z(c.imag,g.$imag())),W(Z(c.real,g.$imag()),Z(c.imag,g.$real()))):L(F("Numeric"),g)&&b(g["$real?"]())?S.$Complex(Z(c.real,g),Z(c.imag,g)):c.$__coerced__("*",g)}),T(x,"$/",function(g){var c=this;return L(F("Complex"),g)?L(F("Number"),c.real)&&b(c.real["$nan?"]())||L(F("Number"),c.imag)&&b(c.imag["$nan?"]())||L(F("Number"),g.$real())&&b(g.$real()["$nan?"]())||L(F("Number"),g.$imag())&&b(g.$imag()["$nan?"]())?F("Complex").$new(F(F("Float"),"NAN"),F(F("Float"),"NAN")):D(Z(c,g.$conj()),g.$abs2()):L(F("Numeric"),g)&&b(g["$real?"]())?S.$Complex(c.real.$quo(g),c.imag.$quo(g)):c.$__coerced__("/",g)}),T(x,"$**",function(g){var c,o,w=this,B=k,_=k,s=k,n=k,r=k,e=k,t=k,i=k,a=k,l=k,v=k;if($e(g,0))return F("Complex").$new(1,0);if(L(F("Complex"),g))return o=w.$polar(),c=J(o),B=c[0]==null?k:c[0],_=c[1]==null?k:c[1],s=g.$real(),n=g.$imag(),r=F("Math").$exp(p(Z(s,F("Math").$log(B)),Z(n,_))),e=W(Z(_,s),Z(n,F("Math").$log(B))),F("Complex").$polar(r,e);if(L(F("Integer"),g))if(b(G(g,0))){for(t=w,i=t,a=p(g,1);O(a,0);){for(o=a.$divmod(2),c=J(o),l=c[0]==null?k:c[0],v=c[1]==null?k:c[1];$e(v,0);)t=S.$Complex(p(Z(t.$real(),t.$real()),Z(t.$imag(),t.$imag())),Z(Z(2,t.$real()),t.$imag())),a=l,o=a.$divmod(2),c=J(o),l=c[0]==null?k:c[0],v=c[1]==null?k:c[1];i=Z(i,t),a=p(a,1)}return i}else return D(F("Rational").$new(1,1),w)["$**"](g["$-@"]());else return L(F("Float"),g)||L(F("Rational"),g)?(o=w.$polar(),c=J(o),B=c[0]==null?k:c[0],_=c[1]==null?k:c[1],F("Complex").$polar(B["$**"](g),Z(_,g))):w.$__coerced__("**",g)}),T(x,"$abs",function(){var g=this;return F("Math").$hypot(g.real,g.imag)}),T(x,"$abs2",function(){var g=this;return W(Z(g.real,g.real),Z(g.imag,g.imag))}),T(x,"$angle",function(){var g=this;return F("Math").$atan2(g.imag,g.real)}),T(x,"$conj",function(){var g=this;return S.$Complex(g.real,g.imag["$-@"]())}),T(x,"$denominator",function(){var g=this;return g.real.$denominator().$lcm(g.imag.$denominator())}),T(x,"$eql?",function(g){var c=this,o=k,w=k;return b(o=b(w=u("Complex")["$==="](g))?c.real.$class()["$=="](c.imag.$class()):w)?c["$=="](g):o}),T(x,"$fdiv",function(g){var c=this;return L(F("Numeric"),g)||S.$raise(F("TypeError"),""+g.$class()+" can't be coerced into Complex"),D(c,g)}),T(x,"$finite?",function(){var g=this,c=k;return b(c=g.real["$finite?"]())?g.imag["$finite?"]():c}),T(x,"$hash",function(){var g=this;return[F("Complex"),g.real,g.imag].$hash()}),T(x,"$infinite?",function(){var g=this,c=k;return b(c=g.real["$infinite?"]())?c:g.imag["$infinite?"]()}),T(x,"$inspect",function(){var g=this;return"("+g+")"}),T(x,"$numerator",function(){var g=this,c=k;return c=g.$denominator(),S.$Complex(Z(g.real.$numerator(),D(c,g.real.$denominator())),Z(g.imag.$numerator(),D(c,g.imag.$denominator())))}),T(x,"$polar",function(){var g=this;return[g.$abs(),g.$arg()]}),T(x,"$rationalize",function(g){var c=this;return arguments.length>1&&S.$raise(F("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),O(c.imag,0)&&S.$raise(F("RangeError"),"can't convert "+c+" into Rational"),c.$real().$rationalize(g)},-1),T(x,"$real?",Y(!1)),T(x,"$rect",function(){var g=this;return[g.real,g.imag]}),T(x,"$to_f",function(){var g=this;return $e(g.imag,0)||S.$raise(F("RangeError"),"can't convert "+g+" into Float"),g.real.$to_f()}),T(x,"$to_i",function(){var g=this;return $e(g.imag,0)||S.$raise(F("RangeError"),"can't convert "+g+" into Integer"),g.real.$to_i()}),T(x,"$to_r",function(){var g=this;return $e(g.imag,0)||S.$raise(F("RangeError"),"can't convert "+g+" into Rational"),g.real.$to_r()}),T(x,"$to_s",function(){var g=this,c=k;return c=g.real.$inspect(),c=W(c,L(F("Number"),g.imag)&&b(g.imag["$nan?"]())||b(g.imag["$positive?"]())||b(g.imag["$zero?"]())?"+":"-"),c=W(c,g.imag.$abs().$inspect()),L(F("Number"),g.imag)&&(b(g.imag["$nan?"]())||b(g.imag["$infinite?"]()))&&(c=W(c,"*")),W(c,"i")}),q(E[0],"I",x.$new(0,1)),re(x,"$from_string",function(g){var c=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;g.match(c);var o,w;function B(){return c.test(g)}function _(){var n=g.match(c),r=n[0];return g=g.slice(r.length),r.replace(/_/g,"")}function s(){if(B()){var n=parseFloat(_());if(g[0]==="/")if(g=g.slice(1),B()){var r=parseFloat(_());return S.$Rational(n,r)}else return g="/"+g,n;else return n}else return null}return o=s(),o?(w=s(),w?S.$Complex(o,w):g[0]==="i"?S.$Complex(0,o):S.$Complex(o,0)):g[0]==="i"?S.$Complex(0,1):g[0]==="-"&&g[1]==="i"?S.$Complex(0,-1):g[0]==="+"&&g[1]==="i"?S.$Complex(0,1):S.$Complex(0,0)}),function(I,g){return h(I,"rectangular","rect")}($.get_singleton_class(x)),h(x,"arg","angle"),h(x,"conjugate","conj"),h(x,"divide","/"),h(x,"imaginary","imag"),h(x,"magnitude","abs"),h(x,"phase","arg"),h(x,"quo","/"),h(x,"rectangular","rect"),$.udef(x,"$negative?"),$.udef(x,"$positive?"),$.udef(x,"$step"),k}("::",F("Numeric"),H)};Opal.modules["corelib/rational/base"]=function($){var z=$.module,b=$.def,L=$.klass;$.nil;var S=$.$$$;return $.add_stubs("convert,from_string"),function(re){var Z=z(re,"Kernel");return b(Z,"$Rational",function(W,p){return p==null&&(p=1),S("Rational").$convert(W,p)},-2)}("::"),function(re,Z){var T=L(re,Z,"String");return b(T,"$to_r",function(){var p=this;return S("Rational").$from_string(p)})}("::",null)};Opal.modules["corelib/rational"]=function($){var z=$.klass,b=$.eqeq,L=$.Kernel,S=$.truthy,re=$.rb_lt,Z=$.rb_divide,T=$.defs,W=$.eqeqeq,p=$.not,D=$.Opal,$e=$.def,J=$.return_ivar,G=$.rb_minus,O=$.rb_times,Y=$.rb_plus,q=$.rb_gt,h=$.rb_le,R=$.return_self,H=$.alias,k=$.top,F=$.nil,m=$.$$$;return $.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),k.$require("corelib/numeric"),k.$require("corelib/rational/base"),function(A,C){var x=z(A,C,"Rational"),E=x.$$prototype;return E.num=E.den=F,T(x,"$reduce",function(d,I){var g=this,c=F;if(d=d.$to_i(),I=I.$to_i(),b(I,0))L.$raise(m("ZeroDivisionError"),"divided by 0");else if(S(re(I,0)))d=d["$-@"](),I=I["$-@"]();else if(b(I,1))return g.$new(d,I);return c=d.$gcd(I),g.$new(Z(d,c),Z(I,c))}),T(x,"$convert",function(d,I){var g=this;return(S(d["$nil?"]())||S(I["$nil?"]()))&&L.$raise(m("TypeError"),"cannot convert nil into Rational"),W(m("Integer"),d)&&W(m("Integer"),I)?g.$reduce(d,I):((W(m("Float"),d)||W(m("String"),d)||W(m("Complex"),d))&&(d=d.$to_r()),(W(m("Float"),I)||W(m("String"),I)||W(m("Complex"),I))&&(I=I.$to_r()),S(I["$equal?"](1))&&p(m("Integer")["$==="](d))?D["$coerce_to!"](d,m("Rational"),"to_r"):W(m("Numeric"),d)&&W(m("Numeric"),I)?Z(d,I):g.$reduce(d,I))}),$e(x,"$initialize",function(d,I){var g=this;return g.num=d,g.den=I,g.$freeze()}),$e(x,"$numerator",J("num")),$e(x,"$denominator",J("den")),$e(x,"$coerce",function(d){var I=this,g=F;return W(m("Rational"),g=d)?[d,I]:W(m("Integer"),g)?[d.$to_r(),I]:W(m("Float"),g)?[d,I.$to_f()]:F}),$e(x,"$==",function(d){var I=this,g=F,c=F;return W(m("Rational"),g=d)?S(c=I.num["$=="](d.$numerator()))?I.den["$=="](d.$denominator()):c:W(m("Integer"),g)?S(c=I.num["$=="](d))?I.den["$=="](1):c:W(m("Float"),g)?I.$to_f()["$=="](d):d["$=="](I)}),$e(x,"$<=>",function(d){var I=this,g=F;return W(m("Rational"),g=d)?G(O(I.num,d.$denominator()),O(I.den,d.$numerator()))["$<=>"](0):W(m("Integer"),g)?G(I.num,O(I.den,d))["$<=>"](0):W(m("Float"),g)?I.$to_f()["$<=>"](d):I.$__coerced__("<=>",d)}),$e(x,"$+",function(d){var I=this,g=F,c=F,o=F;return W(m("Rational"),g=d)?(c=Y(O(I.num,d.$denominator()),O(I.den,d.$numerator())),o=O(I.den,d.$denominator()),L.$Rational(c,o)):W(m("Integer"),g)?L.$Rational(Y(I.num,O(d,I.den)),I.den):W(m("Float"),g)?Y(I.$to_f(),d):I.$__coerced__("+",d)}),$e(x,"$-",function(d){var I=this,g=F,c=F,o=F;return W(m("Rational"),g=d)?(c=G(O(I.num,d.$denominator()),O(I.den,d.$numerator())),o=O(I.den,d.$denominator()),L.$Rational(c,o)):W(m("Integer"),g)?L.$Rational(G(I.num,O(d,I.den)),I.den):W(m("Float"),g)?G(I.$to_f(),d):I.$__coerced__("-",d)}),$e(x,"$*",function(d){var I=this,g=F,c=F,o=F;return W(m("Rational"),g=d)?(c=O(I.num,d.$numerator()),o=O(I.den,d.$denominator()),L.$Rational(c,o)):W(m("Integer"),g)?L.$Rational(O(I.num,d),I.den):W(m("Float"),g)?O(I.$to_f(),d):I.$__coerced__("*",d)}),$e(x,"$/",function(d){var I=this,g=F,c=F,o=F;return W(m("Rational"),g=d)?(c=O(I.num,d.$denominator()),o=O(I.den,d.$numerator()),L.$Rational(c,o)):W(m("Integer"),g)?b(d,0)?Z(I.$to_f(),0):L.$Rational(I.num,O(I.den,d)):W(m("Float"),g)?Z(I.$to_f(),d):I.$__coerced__("/",d)}),$e(x,"$**",function(d){var I=this,g=F;return W(m("Integer"),g=d)?b(I,0)&&S(re(d,0))?m(m("Float"),"INFINITY"):S(q(d,0))?L.$Rational(I.num["$**"](d),I.den["$**"](d)):S(re(d,0))?L.$Rational(I.den["$**"](d["$-@"]()),I.num["$**"](d["$-@"]())):L.$Rational(1,1):W(m("Float"),g)?I.$to_f()["$**"](d):W(m("Rational"),g)?b(d,0)?L.$Rational(1,1):b(d.$denominator(),1)?S(re(d,0))?L.$Rational(I.den["$**"](d.$numerator().$abs()),I.num["$**"](d.$numerator().$abs())):L.$Rational(I.num["$**"](d.$numerator()),I.den["$**"](d.$numerator())):b(I,0)&&S(re(d,0))?L.$raise(m("ZeroDivisionError"),"divided by 0"):I.$to_f()["$**"](d):I.$__coerced__("**",d)}),$e(x,"$abs",function(){var d=this;return L.$Rational(d.num.$abs(),d.den.$abs())}),$e(x,"$ceil",function(d){var I=this;return d==null&&(d=0),b(d,0)?Z(I.num["$-@"](),I.den)["$-@"]().$ceil():I.$with_precision("ceil",d)},-1),$e(x,"$floor",function(d){var I=this;return d==null&&(d=0),b(d,0)?Z(I.num["$-@"](),I.den)["$-@"]().$floor():I.$with_precision("floor",d)},-1),$e(x,"$hash",function(){var d=this;return[m("Rational"),d.num,d.den].$hash()}),$e(x,"$inspect",function(){var d=this;return"("+d+")"}),$e(x,"$rationalize",function(d){var I=this;if(arguments.length>1&&L.$raise(m("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),d==null)return I;for(var g=d.$abs(),c=G(I,g),o=Y(I,g),w=0,B=1,_=1,s=0,n,r,e,t,i;e=c.$ceil(),!h(e,o);)t=e-1,n=t*B+w,r=t*s+_,i=Z(1,G(o,t)),o=Z(1,G(c,t)),c=i,w=B,_=s,B=n,s=r;return L.$Rational(e*B+w,e*s+_)},-1),$e(x,"$round",function(d){var I=this,g=F,c=F,o=F;return d==null&&(d=0),b(d,0)?b(I.num,0)?0:b(I.den,1)?I.num:(g=Y(O(I.num.$abs(),2),I.den),c=O(I.den,2),o=Z(g,c).$truncate(),S(re(I.num,0))?o["$-@"]():o):I.$with_precision("round",d)},-1),$e(x,"$to_f",function(){var d=this;return Z(d.num,d.den)}),$e(x,"$to_i",function(){var d=this;return d.$truncate()}),$e(x,"$to_r",R),$e(x,"$to_s",function(){var d=this;return""+d.num+"/"+d.den}),$e(x,"$truncate",function(d){var I=this;return d==null&&(d=0),b(d,0)?S(re(I.num,0))?I.$ceil():I.$floor():I.$with_precision("truncate",d)},-1),$e(x,"$with_precision",function(d,I){var g=this,c=F,o=F;return W(m("Integer"),I)||L.$raise(m("TypeError"),"not an Integer"),c=10["$**"](I),o=O(g,c),S(re(I,1))?Z(o.$send(d),c).$to_i():L.$Rational(o.$send(d),c)}),T(x,"$from_string",function(d){var I=d.trimLeft(),g=/^[+-]?[\d_]+(\.[\d_]+)?/;I.match(g);var c,o;function w(){return g.test(I)}function B(){var _=I.match(g),s=_[0];return I=I.slice(s.length),s.replace(/_/g,"")}return w()?(c=parseFloat(B()),I[0]==="/"?(I=I.slice(1),w()?(o=parseFloat(B()),L.$Rational(c,o)):L.$Rational(c,1)):L.$Rational(c,1)):L.$Rational(0,1)}),H(x,"divide","/"),H(x,"quo","/")}("::",m("Numeric"))};Opal.modules["corelib/time"]=function($){var z=$.slice,b=$.deny_frozen_access,L=$.klass,S=$.Kernel,re=$.Opal,Z=$.defs,T=$.eqeqeq,W=$.def,p=$.truthy,D=$.rb_gt,$e=$.rb_lt,J=$.send,G=$.rb_plus,O=$.rb_divide,Y=$.rb_minus,q=$.range,h=$.neqeq,R=$.rb_le,H=$.eqeq,k=$.alias,F=$.top,m=[],A=$.nil,C=$.$$$;return $.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),F.$require("corelib/comparable"),function(x,E,u){var d=L(x,E,"Time"),I=[d].concat(u),g=$.$r(I);d.$include(C("Comparable"));var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B=["January","February","March","April","May","June","July","August","September","October","November","December"];Z(d,"$at",function(n,r){var e;return C("Time")["$==="](n)?(r!==void 0&&S.$raise(C("TypeError"),"can't convert Time into an exact number"),e=new Date(n.getTime()),e.timezone=n.timezone,e):(n.$$is_number||(n=re["$coerce_to!"](n,C("Integer"),"to_int")),r===void 0?new Date(n*1e3):(r.$$is_number||(r=re["$coerce_to!"](r,C("Integer"),"to_int")),new Date(n*1e3+r/1e3)))},-2);function _(s,n,r,e,t,i){if(s.$$is_string?s=parseInt(s,10):s=re["$coerce_to!"](s,C("Integer"),"to_int"),n===A)n=1;else if(!n.$$is_number)if(n["$respond_to?"]("to_str"))switch(n=n.$to_str(),n.toLowerCase()){case"jan":n=1;break;case"feb":n=2;break;case"mar":n=3;break;case"apr":n=4;break;case"may":n=5;break;case"jun":n=6;break;case"jul":n=7;break;case"aug":n=8;break;case"sep":n=9;break;case"oct":n=10;break;case"nov":n=11;break;case"dec":n=12;break;default:n=n.$to_i()}else n=re["$coerce_to!"](n,C("Integer"),"to_int");return(n<1||n>12)&&S.$raise(C("ArgumentError"),"month out of range: "+n),n=n-1,r===A?r=1:r.$$is_string?r=parseInt(r,10):r=re["$coerce_to!"](r,C("Integer"),"to_int"),(r<1||r>31)&&S.$raise(C("ArgumentError"),"day out of range: "+r),e===A?e=0:e.$$is_string?e=parseInt(e,10):e=re["$coerce_to!"](e,C("Integer"),"to_int"),(e<0||e>24)&&S.$raise(C("ArgumentError"),"hour out of range: "+e),t===A?t=0:t.$$is_string?t=parseInt(t,10):t=re["$coerce_to!"](t,C("Integer"),"to_int"),(t<0||t>59)&&S.$raise(C("ArgumentError"),"min out of range: "+t),i===A?i=0:i.$$is_number||(i.$$is_string?i=parseInt(i,10):i=re["$coerce_to!"](i,C("Integer"),"to_int")),(i<0||i>60)&&S.$raise(C("ArgumentError"),"sec out of range: "+i),[s,n,r,e,t,i]}return Z(d,"$new",function(n,r,e,t,i,a,l){var v=this;r==null&&(r=A),e==null&&(e=A),t==null&&(t=A),i==null&&(i=A),a==null&&(a=A),l==null&&(l=A);var N,P,j,V;return n===void 0?new Date:(N=_(n,r,e,t,i,a),n=N[0],r=N[1],e=N[2],t=N[3],i=N[4],a=N[5],l===A?(P=new Date(n,r,e,t,i,0,a*1e3),n<100&&P.setFullYear(n),P):(j=v.$_parse_offset(l),V=new Date(Date.UTC(n,r,e,t,i,0,a*1e3)),n<100&&V.setUTCFullYear(n),P=new Date(V.getTime()-j*36e5),P.timezone=j,P))},-1),Z(d,"$_parse_offset",function(n){var r;if(n.$$is_string)if(n=="UTC")r=0;else if(/^[+-]\d\d:[0-5]\d$/.test(n)){var e,t,i;e=n[0],t=+(n[1]+n[2]),i=+(n[4]+n[5]),r=(e=="-"?-1:1)*(t+i/60)}else S.$raise(C("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+n);else n.$$is_number?r=n/3600:S.$raise(C("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return r}),Z(d,"$local",function(n,r,e,t,i,a,l,v,N,P){r==null&&(r=A),e==null&&(e=A),t==null&&(t=A),i==null&&(i=A),a==null&&(a=A),l==null&&(l=A),v==null&&(v=A),N==null&&(N=A),P==null&&(P=A);var j,V;return arguments.length===10&&(j=z(arguments),n=j[5],r=j[4],e=j[3],t=j[2],i=j[1],a=j[0]),j=_(n,r,e,t,i,a),n=j[0],r=j[1],e=j[2],t=j[3],i=j[4],a=j[5],V=new Date(n,r,e,t,i,0,a*1e3),n<100&&V.setFullYear(n),V},-2),Z(d,"$gm",function(n,r,e,t,i,a,l,v,N,P){r==null&&(r=A),e==null&&(e=A),t==null&&(t=A),i==null&&(i=A),a==null&&(a=A),l==null&&(l=A),v==null&&(v=A),N==null&&(N=A),P==null&&(P=A);var j,V;return arguments.length===10&&(j=z(arguments),n=j[5],r=j[4],e=j[3],t=j[2],i=j[1],a=j[0]),j=_(n,r,e,t,i,a),n=j[0],r=j[1],e=j[2],t=j[3],i=j[4],a=j[5],V=new Date(Date.UTC(n,r,e,t,i,0,a*1e3)),n<100&&V.setUTCFullYear(n),V.timezone=0,V},-2),Z(d,"$now",function(){var n=this;return n.$new()}),W(d,"$+",function(n){var r=this;T(C("Time"),n)&&S.$raise(C("TypeError"),"time + time?"),n.$$is_number||(n=re["$coerce_to!"](n,C("Integer"),"to_int"));var e=new Date(r.getTime()+n*1e3);return e.timezone=r.timezone,e}),W(d,"$-",function(n){var r=this;if(T(C("Time"),n))return(r.getTime()-n.getTime())/1e3;n.$$is_number||(n=re["$coerce_to!"](n,C("Integer"),"to_int"));var e=new Date(r.getTime()-n*1e3);return e.timezone=r.timezone,e}),W(d,"$<=>",function(n){var r=this,e=A;return T(C("Time"),n)?r.$to_f()["$<=>"](n.$to_f()):(e=n["$<=>"](r),p(e["$nil?"]())?A:p(D(e,0))?-1:p($e(e,0))?1:0)}),W(d,"$==",function(n){var r=this,e=A;return p(e=C("Time")["$==="](n))?r.$to_f()===n.$to_f():e}),W(d,"$asctime",function(){var n=this;return n.$strftime("%a %b %e %H:%M:%S %Y")}),J([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function s(n,r,e,t){var i=s.$$s==null?this:s.$$s;return n==null&&(n=A),r==null&&(r=A),e==null&&(e=A),t==null&&(t=0),J(i,"define_method",[n],function a(){var l=a.$$s==null?this:a.$$s;return t+(l.timezone!=null?new Date(l.getTime()+l.timezone*36e5)[e]():l[r]())},{$$s:i})},{$$arity:-4,$$s:d}),W(d,"$yday",function(){var n=this,r=A,e=A,t=A;return r=g("Time").$new(n.$year()).$to_i(),e=g("Time").$new(n.$year(),n.$month(),n.$day()).$to_i(),t=86400,G(O(Y(e,r),t).$round(),1)}),W(d,"$isdst",function(){var n=this,r=new Date(n.getFullYear(),0,1),e=new Date(n.getFullYear(),6,1);return n.getTimezoneOffset()<Math.max(r.getTimezoneOffset(),e.getTimezoneOffset())}),W(d,"$dup",function(){var n=this,r=A;return r=new Date(n.getTime()),r.$copy_instance_variables(n),r.$initialize_dup(n),r}),W(d,"$eql?",function(n){var r=this,e=A;return p(e=n["$is_a?"](C("Time")))?r["$<=>"](n)["$zero?"]():e}),J([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function s(n,r){var e=s.$$s==null?this:s.$$s;return n==null&&(n=A),r==null&&(r=A),J(e,"define_method",[n],function t(){var i=t.$$s==null?this:t.$$s;return i.$wday()===r},{$$s:e})},{$$s:d}),W(d,"$hash",function(){var n=this;return[C("Time"),n.getTime()].$hash()}),W(d,"$inspect",function(){var n=this;return p(n["$utc?"]())?n.$strftime("%Y-%m-%d %H:%M:%S UTC"):n.$strftime("%Y-%m-%d %H:%M:%S %z")}),W(d,"$succ",function(){var n=this,r=new Date(n.getTime()+1e3);return r.timezone=n.timezone,r}),W(d,"$usec",function(){var n=this;return n.getMilliseconds()*1e3}),W(d,"$zone",function(){var n=this;if(n.timezone===0)return"UTC";if(n.timezone!=null)return A;var r=n.toString(),e;return r.indexOf("(")==-1?e=r.match(/[A-Z]{3,4}/)[0]:e=r.match(/\((.+)\)(?:\s|$)/)[1],e=="GMT"&&/(GMT\W*\d{4})/.test(r)?RegExp.$1:e}),W(d,"$getgm",function(){var n=this,r=new Date(n.getTime());return r.timezone=0,r}),W(d,"$gmtime",function(){var n=this;return n.timezone!==0&&(b(n),n.timezone=0),n}),W(d,"$gmt?",function(){var n=this;return n.timezone===0}),W(d,"$gmt_offset",function(){var n=this;return n.timezone!=null?n.timezone*60:-n.getTimezoneOffset()*60}),W(d,"$strftime",function(n){var r=this;return n.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,t,i,a,l){var v="",N,P,j,V=t.indexOf("0")!==-1,ee=t.indexOf("-")===-1,ae=t.indexOf("_")!==-1,oe=t.indexOf("^")!==-1,_e=t.indexOf("#")!==-1,de=(t.match(":")||[]).length;switch(i=parseInt(i,10),V&&ae&&(t.indexOf("0")<t.indexOf("_")?V=!1:ae=!1),l){case"Y":v+=r.$year();break;case"C":V=!ae,v+=Math.round(r.$year()/100);break;case"y":V=!ae,v+=r.$year()%100;break;case"m":V=!ae,v+=r.$mon();break;case"B":v+=B[r.$mon()-1];break;case"b":case"h":ae=!V,v+=w[r.$mon()-1];break;case"d":V=!ae,v+=r.$day();break;case"e":ae=!V,v+=r.$day();break;case"j":V=!ae,i=isNaN(i)?3:i,v+=r.$yday();break;case"H":V=!ae,v+=r.$hour();break;case"k":ae=!V,v+=r.$hour();break;case"I":V=!ae,v+=r.$hour()%12||12;break;case"l":ae=!V,v+=r.$hour()%12||12;break;case"P":v+=r.$hour()>=12?"pm":"am";break;case"p":v+=r.$hour()>=12?"PM":"AM";break;case"M":V=!ae,v+=r.$min();break;case"S":V=!ae,v+=r.$sec();break;case"L":V=!ae,i=isNaN(i)?3:i,v+=r.getMilliseconds();break;case"N":i=isNaN(i)?9:i,v+=r.getMilliseconds().toString().$rjust(3,"0"),v=v.$ljust(i,"0");break;case"z":var ge=r.timezone==null?r.getTimezoneOffset():-r.timezone*60,ve=Math.floor(Math.abs(ge)/60),me=Math.abs(ge)%60;v+=ge<0?"+":"-",v+=ve<10?"0":"",v+=ve,de>0&&(v+=":"),v+=me<10?"0":"",v+=me,de>1&&(v+=":00");break;case"Z":v+=r.$zone();break;case"A":v+=c[r.$wday()];break;case"a":v+=o[r.$wday()];break;case"u":v+=r.$wday()+1;break;case"w":v+=r.$wday();break;case"V":v+=r.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":v+=r.$cweek_cyear()["$[]"](1);break;case"g":v+=r.$cweek_cyear()["$[]"](1)["$[]"](q(-2,-1,!1));break;case"s":v+=r.$to_i();break;case"n":v+=`
`;break;case"t":v+="	";break;case"%":v+="%";break;case"c":v+=r.$strftime("%a %b %e %T %Y");break;case"D":case"x":v+=r.$strftime("%m/%d/%y");break;case"F":v+=r.$strftime("%Y-%m-%d");break;case"v":v+=r.$strftime("%e-%^b-%4Y");break;case"r":v+=r.$strftime("%I:%M:%S %p");break;case"R":v+=r.$strftime("%H:%M");break;case"T":case"X":v+=r.$strftime("%H:%M:%S");break;case"J":if(N=r.$to_date().$jd(),N<2405160){v+=r.$strftime("%Y-%m-%d");break}else N<2419614?(P="M",j=1867):N<2424875?(P="T",j=1911):N<2447535?(P="S",j=1925):N<2458605?(P="H",j=1988):(P="R",j=2018);v+=r.$format("%c%02d",P,Y(r.$year(),j)),v+=r.$strftime("-%m-%d");break;default:return e}return oe&&(v=v.toUpperCase()),_e&&(v=v.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),ee&&(V||ae)&&(v=v.$rjust(isNaN(i)?2:i,ae?" ":"0")),v})}),W(d,"$to_a",function(){var n=this;return[n.$sec(),n.$min(),n.$hour(),n.$day(),n.$month(),n.$year(),n.$wday(),n.$yday(),n.$isdst(),n.$zone()]}),W(d,"$to_f",function(){var n=this;return n.getTime()/1e3}),W(d,"$to_i",function(){var n=this;return parseInt(n.getTime()/1e3,10)}),W(d,"$cweek_cyear",function(){var n=this,r=A,e=A,t=A,i=A,a=A,l=A,v=A;return r=C("Time").$new(n.$year(),1,1),e=r.$wday(),t=n.$year(),p(R(e,4))&&h(e,0)?i=Y(e,1):(i=Y(Y(e,7),1),H(i,-8)&&(i=-1)),a=O(G(n.$yday(),i),7).$ceil(),p(R(a,0))?C("Time").$new(Y(n.$year(),1),12,31).$cweek_cyear():(H(a,53)&&(l=C("Time").$new(n.$year(),12,31),v=l.$wday(),p(R(v,3))&&h(v,0)&&(a=1,t=G(t,1))),[a,t])}),function(s,n){return k(s,"mktime","local"),k(s,"utc","gm")}($.get_singleton_class(d)),k(d,"ctime","asctime"),k(d,"dst?","isdst"),k(d,"getutc","getgm"),k(d,"gmtoff","gmt_offset"),k(d,"mday","day"),k(d,"month","mon"),k(d,"to_s","inspect"),k(d,"tv_sec","to_i"),k(d,"tv_usec","usec"),k(d,"utc","gmtime"),k(d,"utc?","gmt?"),k(d,"utc_offset","gmt_offset")}("::",Date,m)};Opal.modules["corelib/struct"]=function($){var z=$.klass,b=$.slice,L=$.extract_kwargs,S=$.ensure_kwargs,re=$.hash_get,Z=$.truthy,T=$.neqeq,W=$.eqeq,p=$.Opal,D=$.send,$e=$.Class,J=$.to_a,G=$.def,O=$.defs,Y=$.Kernel,q=$.rb_gt,h=$.rb_minus,R=$.eqeqeq,H=$.rb_lt,k=$.rb_ge,F=$.rb_plus,m=$.alias,A=$.top,C=[],x=$.nil,E=$.$$$;return $.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),A.$require("corelib/enumerable"),function(u,d,I){var g=z(u,d,"Struct"),c=[g].concat(I),o=$.$r(c);g.$include(E("Enumerable")),O(g,"$new",function B(_,s,n){var r=B.$$p||x,e,t,i,a,l=this,v=x;if(B.$$p=null,e=b(arguments,1),t=L(e),t=S(t),i=e,a=re(t,"keyword_init"),a==null&&(a=!1),Z(_))if(W(_.$class(),E("String"))&&T(_["$[]"](0).$upcase(),_["$[]"](0)))i.$unshift(_),_=x;else try{_=p["$const_name!"](_)}catch(N){if($.rescue(N,[E("TypeError"),E("NameError")]))try{i.$unshift(_),_=x}finally{$.pop_exception(N)}else throw N}return D(i,"map",[],function(P){return P==null&&(P=x),p["$coerce_to!"](P,E("String"),"to_str")}),v=D($e,"new",[l],function N(){var P=N.$$s==null?this:N.$$s;return D(i,"each",[],function j(V){var ee=j.$$s==null?this:j.$$s;return V==null&&(V=x),ee.$define_struct_attribute(V)},{$$s:P}),function(j,V){return G(j,"$new",function(ae){var oe,_e,de=this,ge=x;return oe=b(arguments),_e=oe,ge=de.$allocate(),ge.$$data={},D(ge,"initialize",J(_e)),ge},-1),j.$alias_method("[]","new")}($.get_singleton_class(P))},{$$s:l}),Z(r)&&D(v,"module_eval",[],r.$to_proc()),v.$$keyword_init=a,Z(_)&&E("Struct").$const_set(_,v),v},-2),O(g,"$define_struct_attribute",function(_){var s=this;return W(s,E("Struct"))&&Y.$raise(E("ArgumentError"),"you cannot define attributes to the Struct class"),s.$members()["$<<"](_),D(s,"define_method",[_],function n(){var r=n.$$s==null?this:n.$$s;return r.$$data[_]},{$$s:s}),D(s,"define_method",[""+_+"="],function n(r){var e=n.$$s==null?this:n.$$s;return r==null&&(r=x),e.$$data[_]=r},{$$s:s})}),O(g,"$members",function(){var _=this,s=x;return _.members==null&&(_.members=x),W(_,E("Struct"))&&Y.$raise(E("ArgumentError"),"the Struct class has no members"),_.members=Z(s=_.members)?s:[]}),O(g,"$inherited",function(_){var s=this,n=x;return s.members==null&&(s.members=x),n=s.members,D(_,"instance_eval",[],function r(){var e=r.$$s==null?this:r.$$s;return e.members=n},{$$s:s})}),G(g,"$initialize",function(_){var s,n,r=this,e=x,t=x,i=x;return s=b(arguments),n=s,Z(r.$class().$$keyword_init)?(e=Z(t=n.$last())?t:new Map,(Z(q(n.$length(),1))||Z(n.length===1&&!e.$$is_hash))&&Y.$raise(E("ArgumentError"),"wrong number of arguments (given "+n.$length()+", expected 0)"),i=h(e.$keys(),r.$class().$members()),Z(i["$any?"]())&&Y.$raise(E("ArgumentError"),"unknown keywords: "+i.$join(", ")),D(r.$class().$members(),"each",[],function a(l){var v,N=a.$$s==null?this:a.$$s;return l==null&&(l=x),v=[l,e["$[]"](l)],D(N,"[]=",v),v[v.length-1]},{$$s:r})):(Z(q(n.$length(),r.$class().$members().$length()))&&Y.$raise(E("ArgumentError"),"struct size differs"),D(r.$class().$members(),"each_with_index",[],function a(l,v){var N,P=a.$$s==null?this:a.$$s;return l==null&&(l=x),v==null&&(v=x),N=[l,n["$[]"](v)],D(P,"[]=",N),N[N.length-1]},{$$s:r}))},-1),G(g,"$initialize_copy",function(_){var s=this;s.$$data={};var n=Object.keys(_.$$data),r,e,t;for(r=0,e=n.length;r<e;r++)t=n[r],s.$$data[t]=_.$$data[t]}),O(g,"$keyword_init?",function(){var _=this;return _.$$keyword_init}),G(g,"$members",function(){var _=this;return _.$class().$members()}),G(g,"$hash",function(){var _=this;return[_.$class(),_.$to_a()].$hash()}),G(g,"$[]",function(_){var s=this;return R(E("Integer"),_)?(Z(H(_,s.$class().$members().$size()["$-@"]()))&&Y.$raise(E("IndexError"),"offset "+_+" too small for struct(size:"+s.$class().$members().$size()+")"),Z(k(_,s.$class().$members().$size()))&&Y.$raise(E("IndexError"),"offset "+_+" too large for struct(size:"+s.$class().$members().$size()+")"),_=s.$class().$members()["$[]"](_)):R(E("String"),_)?s.$$data.hasOwnProperty(_)||Y.$raise(E("NameError").$new("no member '"+_+"' in struct",_)):Y.$raise(E("TypeError"),"no implicit conversion of "+_.$class()+" into Integer"),_=p["$coerce_to!"](_,E("String"),"to_str"),s.$$data[_]}),G(g,"$[]=",function(_,s){var n=this;return R(E("Integer"),_)?(Z(H(_,n.$class().$members().$size()["$-@"]()))&&Y.$raise(E("IndexError"),"offset "+_+" too small for struct(size:"+n.$class().$members().$size()+")"),Z(k(_,n.$class().$members().$size()))&&Y.$raise(E("IndexError"),"offset "+_+" too large for struct(size:"+n.$class().$members().$size()+")"),_=n.$class().$members()["$[]"](_)):R(E("String"),_)?Z(n.$class().$members()["$include?"](_.$to_sym()))||Y.$raise(E("NameError").$new("no member '"+_+"' in struct",_)):Y.$raise(E("TypeError"),"no implicit conversion of "+_.$class()+" into Integer"),_=p["$coerce_to!"](_,E("String"),"to_str"),n.$$data[_]=s}),G(g,"$==",function(_){var s=this;if(!Z(_["$instance_of?"](s.$class())))return!1;var n={},r={};function e(t,i){var a,l,v;n[t.$__id__()]=!0,r[i.$__id__()]=!0;for(a in t.$$data)if(l=t.$$data[a],v=i.$$data[a],E("Struct")["$==="](l)){if((!n.hasOwnProperty(l.$__id__())||!r.hasOwnProperty(v.$__id__()))&&!e(l,v))return!1}else if(!l["$=="](v))return!1;return!0}return e(s,_)}),G(g,"$eql?",function(_){var s=this;if(!Z(_["$instance_of?"](s.$class())))return!1;var n={},r={};function e(t,i){var a,l,v;n[t.$__id__()]=!0,r[i.$__id__()]=!0;for(a in t.$$data)if(l=t.$$data[a],v=i.$$data[a],E("Struct")["$==="](l)){if((!n.hasOwnProperty(l.$__id__())||!r.hasOwnProperty(v.$__id__()))&&!e(l,v))return!1}else if(!l["$eql?"](v))return!1;return!0}return e(s,_)}),G(g,"$each",function B(){var _=B.$$p||x,s=this;return B.$$p=null,_===x?D(s,"enum_for",["each"],function n(){var r=n.$$s==null?this:n.$$s;return r.$size()},{$$s:s}):(D(s.$class().$members(),"each",[],function n(r){var e=n.$$s==null?this:n.$$s;return r==null&&(r=x),$.yield1(_,e["$[]"](r))},{$$s:s}),s)}),G(g,"$each_pair",function B(){var _=B.$$p||x,s=this;return B.$$p=null,_===x?D(s,"enum_for",["each_pair"],function n(){var r=n.$$s==null?this:n.$$s;return r.$size()},{$$s:s}):(D(s.$class().$members(),"each",[],function n(r){var e=n.$$s==null?this:n.$$s;return r==null&&(r=x),$.yield1(_,[r,e["$[]"](r)])},{$$s:s}),s)}),G(g,"$length",function(){var _=this;return _.$class().$members().$length()}),G(g,"$to_a",function(){var _=this;return D(_.$class().$members(),"map",[],function s(n){var r=s.$$s==null?this:s.$$s;return n==null&&(n=x),r["$[]"](n)},{$$s:_})});var w=[];return G(g,"$inspect",function(){var _=this,s=x,n=x;return function(){try{return s="#<struct ",Z(w["$include?"](_.$__id__()))?F(s,":...>"):(w["$<<"](_.$__id__()),n=!0,R(E("Struct"),_)&&Z(_.$class().$name())&&(s=F(s,""+_.$class()+" ")),s=F(s,D(_.$each_pair(),"map",[],function(e,t){return e==null&&(e=x),t==null&&(t=x),""+e+"="+o("Opal").$inspect(t)}).$join(", ")),s=F(s,">"),s)}finally{Z(n)&&w.pop()}}()}),G(g,"$to_h",function B(_){var s=B.$$p||x,n,r,e=this;return B.$$p=null,n=b(arguments),r=n,s!==x?D(D(e,"map",[],s.$to_proc()),"to_h",J(r)):D(e.$class().$members(),"each_with_object",[new Map],function t(i,a){var l,v=t.$$s==null?this:t.$$s;return i==null&&(i=x),a==null&&(a=x),l=[i,v["$[]"](i)],D(a,"[]=",l),l[l.length-1]},{$$s:e})},-1),G(g,"$values_at",function(_){var s,n,r=this;s=b(arguments),n=s,n=D(n,"map",[],function(l){return l==null&&(l=x),l.$$is_range?l.$to_a():l}).$flatten();for(var e=[],t=0,i=n.length;t<i;t++)n[t].$$is_number||Y.$raise(E("TypeError"),"no implicit conversion of "+n[t].$class()+" into Integer"),e.push(r["$[]"](n[t]));return e},-1),G(g,"$dig",function(_,s){var n,r,e=this,t=x;return n=b(arguments,1),r=n,t=Z(_.$$is_string&&e.$$data.hasOwnProperty(_))&&e.$$data[_]||x,t===x||r.length===0?t:(Z(t["$respond_to?"]("dig"))||Y.$raise(E("TypeError"),""+t.$class()+" does not have #dig method"),D(t,"dig",J(r)))},-2),m(g,"size","length"),m(g,"to_s","inspect"),m(g,"values","to_a")}("::",null,C)};Opal.modules["corelib/set"]=function($){var z=$.freeze,b=$.klass,L=$.slice,S=$.defs,re=$.truthy,Z=$.eqeqeq,T=$.Kernel,W=$.send,p=$.def,D=$.eqeq,$e=$.rb_lt,J=$.rb_le,G=$.alias,O=[],Y=$.nil,q=$.$$$;return $.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(h,R,H){var k=b(h,R,"Set"),F=[k].concat(H),m=$.$r(F),A=Y,C=k.$$prototype;C.hash=Y,k.$include(q("Enumerable")),S(k,"$[]",function(u){var d,I,g=this;return d=L(arguments),I=d,g.$new(I)},-1),p(k,"$initialize",function E(u){var d=E.$$p||Y,I=this;return E.$$p=null,u==null&&(u=Y),I.hash=new Map,re(u["$nil?"]())?Y:(Z(q("Enumerable"),u)||T.$raise(q("ArgumentError"),"value must be enumerable"),re(d)?W(u,"each",[],function g(c){var o=g.$$s==null?this:g.$$s;return c==null&&(c=Y),o.$add($.yield1(d,c))},{$$s:I}):I.$merge(u))},-1),p(k,"$dup",function(){var u=this,d=Y;return d=u.$class().$new(),d.$merge(u)}),p(k,"$-",function(u){var d=this;return re(u["$respond_to?"]("each"))||T.$raise(q("ArgumentError"),"value must be enumerable"),d.$dup().$subtract(u)}),p(k,"$inspect",function(){var u=this;return"#<Set: {"+u.$to_a().$join(",")+"}>"}),p(k,"$==",function(u){var d=this;return re(d["$equal?"](u))?!0:re(u["$instance_of?"](d.$class()))?d.hash["$=="](u.$instance_variable_get("@hash")):re(u["$is_a?"](q("Set")))&&D(d.$size(),u.$size())?W(u,"all?",[],function I(g){var c=I.$$s==null?this:I.$$s;return c.hash==null&&(c.hash=Y),g==null&&(g=Y),c.hash["$include?"](g)},{$$s:d}):!1}),p(k,"$add",function(u){var d=this;return d.hash["$[]="](u,!0),d}),p(k,"$classify",function E(){var u=E.$$p||Y,d=this,I=Y;return E.$$p=null,u===Y?d.$enum_for("classify"):(I=W(q("Hash"),"new",[],function g(c,o){var w,B=g.$$s==null?this:g.$$s;return c==null&&(c=Y),o==null&&(o=Y),w=[o,B.$class().$new()],W(c,"[]=",w),w[w.length-1]},{$$s:d}),W(d,"each",[],function(c){return c==null&&(c=Y),I["$[]"]($.yield1(u,c)).$add(c)}),I)}),p(k,"$collect!",function E(){var u=E.$$p||Y,d=this,I=Y;return E.$$p=null,u===Y?d.$enum_for("collect!"):(I=d.$class().$new(),W(d,"each",[],function(c){return c==null&&(c=Y),I["$<<"]($.yield1(u,c))}),d.$replace(I))}),p(k,"$compare_by_identity",function(){var u=this;return re(u.hash["$respond_to?"]("compare_by_identity"))?(u.hash.$compare_by_identity(),u):u.$raise(m("NotImplementedError"),""+u.$class().$name()+"#compare_by_identity is not implemented")}),p(k,"$compare_by_identity?",function(){var u=this,d=Y;return re(d=u.hash["$respond_to?"]("compare_by_identity?"))?u.hash["$compare_by_identity?"]():d}),p(k,"$delete",function(u){var d=this;return d.hash.$delete(u),d}),p(k,"$delete?",function(u){var d=this;return re(d["$include?"](u))?(d.$delete(u),d):Y}),p(k,"$delete_if",function E(){var u=E.$$p||Y,d=this;return E.$$p=null,u===Y?d.$enum_for("delete_if"):(W(W(d,"select",[],function(g){return g==null&&(g=Y),$.yield1(u,g)}),"each",[],function I(g){var c=I.$$s==null?this:I.$$s;return c.hash==null&&(c.hash=Y),g==null&&(g=Y),c.hash.$delete(g)},{$$s:d}),d)}),p(k,"$freeze",function(){var u=this;return re(u["$frozen?"]())?u:(u.hash.$freeze(),z(u))}),p(k,"$keep_if",function E(){var u=E.$$p||Y,d=this;return E.$$p=null,u===Y?d.$enum_for("keep_if"):(W(W(d,"reject",[],function(g){return g==null&&(g=Y),$.yield1(u,g)}),"each",[],function I(g){var c=I.$$s==null?this:I.$$s;return c.hash==null&&(c.hash=Y),g==null&&(g=Y),c.hash.$delete(g)},{$$s:d}),d)}),p(k,"$reject!",function E(){var u=E.$$p||Y,d=this,I=Y;return E.$$p=null,u===Y?d.$enum_for("reject!"):(I=d.$size(),W(d,"delete_if",[],u.$to_proc()),D(d.$size(),I)?Y:d)}),p(k,"$select!",function E(){var u=E.$$p||Y,d=this,I=Y;return E.$$p=null,u===Y?d.$enum_for("select!"):(I=d.$size(),W(d,"keep_if",[],u.$to_proc()),D(d.$size(),I)?Y:d)}),p(k,"$add?",function(u){var d=this;return re(d["$include?"](u))?Y:d.$add(u)}),p(k,"$each",function E(){var u=E.$$p||Y,d=this;return E.$$p=null,u===Y?d.$enum_for("each"):(W(d.hash,"each_key",[],u.$to_proc()),d)}),p(k,"$empty?",function(){var u=this;return u.hash["$empty?"]()}),p(k,"$eql?",function(u){var d=this;return d.hash["$eql?"](W(u,"instance_eval",[],function I(){var g=I.$$s==null?this:I.$$s;return g.hash==null&&(g.hash=Y),g.hash},{$$s:d}))}),p(k,"$clear",function(){var u=this;return u.hash.$clear(),u}),p(k,"$include?",function(u){var d=this;return d.hash["$include?"](u)}),p(k,"$merge",function(u){var d=this;return W(u,"each",[],function I(g){var c=I.$$s==null?this:I.$$s;return g==null&&(g=Y),c.$add(g)},{$$s:d}),d}),p(k,"$replace",function(u){var d=this;return d.$clear(),d.$merge(u),d}),p(k,"$size",function(){var u=this;return u.hash.$size()}),p(k,"$subtract",function(u){var d=this;return W(u,"each",[],function I(g){var c=I.$$s==null?this:I.$$s;return g==null&&(g=Y),c.$delete(g)},{$$s:d}),d}),p(k,"$|",function(u){var d=this;return re(u["$respond_to?"]("each"))||T.$raise(q("ArgumentError"),"value must be enumerable"),d.$dup().$merge(u)});function x(E){re(A=E["$is_a?"](q("Set")))||T.$raise(q("ArgumentError"),"value must be a set")}return p(k,"$superset?",function(u){var d=this;return x(u),re($e(d.$size(),u.$size()))?!1:W(u,"all?",[],function I(g){var c=I.$$s==null?this:I.$$s;return g==null&&(g=Y),c["$include?"](g)},{$$s:d})}),p(k,"$proper_superset?",function(u){var d=this;return x(u),re(J(d.$size(),u.$size()))?!1:W(u,"all?",[],function I(g){var c=I.$$s==null?this:I.$$s;return g==null&&(g=Y),c["$include?"](g)},{$$s:d})}),p(k,"$subset?",function(u){var d=this;return x(u),re($e(u.$size(),d.$size()))?!1:W(d,"all?",[],function(g){return g==null&&(g=Y),u["$include?"](g)})}),p(k,"$proper_subset?",function(u){var d=this;return x(u),re(J(u.$size(),d.$size()))?!1:W(d,"all?",[],function(g){return g==null&&(g=Y),u["$include?"](g)})}),p(k,"$intersect?",function(u){var d=this;return x(u),re($e(d.$size(),u.$size()))?W(d,"any?",[],function(g){return g==null&&(g=Y),u["$include?"](g)}):W(u,"any?",[],function I(g){var c=I.$$s==null?this:I.$$s;return g==null&&(g=Y),c["$include?"](g)},{$$s:d})}),p(k,"$disjoint?",function(u){var d=this;return d["$intersect?"](u)["$!"]()}),p(k,"$to_a",function(){var u=this;return u.hash.$keys()}),G(k,"+","|"),G(k,"<","proper_subset?"),G(k,"<<","add"),G(k,"<=","subset?"),G(k,">","proper_superset?"),G(k,">=","superset?"),G(k,"difference","-"),G(k,"filter!","select!"),G(k,"length","size"),G(k,"map!","collect!"),G(k,"member?","include?"),G(k,"union","|")}("::",null,O)};Opal.modules["corelib/dir"]=function($){var z=$.klass,b=$.def,L=$.truthy,S=$.alias,re=$.nil,Z=$.$$$;return $.add_stubs("[],pwd"),function(T,W,p){var D=z(T,W,"Dir");return function($e,J){return b($e,"$chdir",function G(O){var Y=G.$$p||re,q=re;return G.$$p=null,function(){try{return q=$.current_dir,$.current_dir=O,$.yieldX(Y,[])}finally{$.current_dir=q}}()}),b($e,"$pwd",function(){return $.current_dir||"."}),b($e,"$home",function(){var O=re;return L(O=Z("ENV")["$[]"]("HOME"))?O:"."}),S($e,"getwd","pwd")}($.get_singleton_class(D))}("::",null)};Opal.modules["corelib/file"]=function($){var z=$.truthy,b=$.klass,L=$.const_set,S=$.Opal,re=$.regexp,Z=$.rb_plus,T=$.def,W=$.Kernel,p=$.eqeq,D=$.rb_lt,$e=$.rb_minus,J=$.range,G=$.send,O=$.slice,Y=$.alias,q=[],h=$.nil,R=$.$$$;return $.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(H,k,F){var m=b(H,k,"File"),A=[m].concat(F),C=h;return L(A[0],"Separator",L(A[0],"SEPARATOR","/")),L(A[0],"ALT_SEPARATOR",h),L(A[0],"PATH_SEPARATOR",":"),L(A[0],"FNM_SYSCASE",0),C=/^[a-zA-Z]:(?:\\|\/)/,function(x,E){var u=[x].concat(E),d=$.$r(u);T(x,"$absolute_path",function(o,w){var B=h,_=h,s=h,n=h,r=h,e=h,t=h,i=h,a=h,l=h;w==null&&(w=h),B=d("SEPARATOR"),_=g(),s=[],o=z(o["$respond_to?"]("to_path"))?o.$to_path():o,o=S["$coerce_to!"](o,R("String"),"to_str"),w=z(n=w)?n:R("Dir").$pwd(),r=o.substr(0,B.length)===B||C.test(o),e=w.substr(0,B.length)===B||C.test(w),z(r)?(t=o.$split(re(["[",_,"]"])),i=C.test(o)?"":o.$sub(re(["^([",_,"]+).*$"]),"\\1"),a=!0):(t=Z(w.$split(re(["[",_,"]"])),o.$split(re(["[",_,"]"]))),i=C.test(w)?"":w.$sub(re(["^([",_,"]+).*$"]),"\\1"),a=e);for(var v,N=0,P=t.length;N<P;N++)v=t[N],!(v===h||v===""&&(s.length===0||a)||v==="."&&(s.length===0||a))&&(v===".."?s.pop():s.push(v));return!a&&t[0]!=="."&&s.$unshift("."),l=s.$join(B),z(a)&&(l=Z(i,l)),l},-2),T(x,"$expand_path",function(o,w){var B=this,_=h,s=h,n=h,r=h,e=h;return w==null&&(w=h),_=d("SEPARATOR"),s=g(),z(o[0]==="~"||w&&w[0]==="~")&&(n=d("Dir").$home(),z(n)||W.$raise(R("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),r=C.test(n)?"":n.$sub(re(["^([",s,"]+).*$"]),"\\1"),z(n["$start_with?"](r))||W.$raise(R("ArgumentError"),"non-absolute home"),n=Z(n,_),e=re(["^\\~(?:",_,"|$)"]),o=o.$sub(e,n),z(w)&&(w=w.$sub(e,n))),B.$absolute_path(o,w)},-2);function I(c){return z(c["$respond_to?"]("to_path"))&&(c=c.$to_path()),c=S["$coerce_to!"](c,R("String"),"to_str"),c}function g(){return d("ALT_SEPARATOR")===h?$.escape_regexp(d("SEPARATOR")):$.escape_regexp(Z(d("SEPARATOR"),d("ALT_SEPARATOR")))}return T(x,"$dirname",function(o,w){var B=this,_=h;if(w==null&&(w=1),p(w,0))return o;z(D(w,0))&&W.$raise(R("ArgumentError"),"level can't be negative"),_=g(),o=I(o);var s=o.match(new RegExp("^["+_+"]")),n;return o=o.replace(new RegExp("["+_+"]+$"),""),o=o.replace(new RegExp("[^"+_+"]+$"),""),o=o.replace(new RegExp("["+_+"]+$"),""),o===""?n=s?"/":".":n=o,w==1?n:B.$dirname(n,$e(w,1))},-2),T(x,"$basename",function(o,w){var B=h;return w==null&&(w=h),B=g(),o=I(o),o.length==0||(w!==h?w=S["$coerce_to!"](w,R("String"),"to_str"):w=null,o=o.replace(new RegExp("(.)["+B+"]*$"),"$1"),o=o.replace(new RegExp("^(?:.*["+B+"])?([^"+B+"]+)$"),"$1"),w===".*"?o=o.replace(/\.[^\.]+$/,""):w!==null&&(w=$.escape_regexp(w),o=o.replace(new RegExp(""+w+"$"),""))),o},-2),T(x,"$extname",function(o){var w=this,B=h,_=h;return o=I(o),B=w.$basename(o),z(B["$empty?"]())||(_=B["$[]"](J(1,-1,!1)).$rindex("."),z(_["$nil?"]())||p(Z(_,1),$e(B.$length(),1)))?"":B["$[]"]($.Range.$new(Z(_,1),-1,!1))}),T(x,"$exist?",function(o){return $.modules[o]!=null}),T(x,"$directory?",function(o){var w=h;w=[];for(var B in $.modules)w.push(B);return o=o.$gsub(re(["(^.",d("SEPARATOR"),"+|",d("SEPARATOR"),"+$)"])),G(w,"find",[],function(s){return s==null&&(s=h),s["$=~"](re(["^",o]))})}),T(x,"$join",function(o){var w,B,_=h;return w=O(arguments),B=w,z(B["$empty?"]())?"":(_="",B=G(B.$flatten().$each_with_index(),"map",[],function(n,r){return n==null&&(n=h),r==null&&(r=h),p(r,0)&&z(n["$empty?"]())||p(B.$length(),Z(r,1))&&z(n["$empty?"]())?d("SEPARATOR"):n}),B=G(B,"reject",[],"empty?".$to_proc()),G(B,"each_with_index",[],function(n,r){var e=h;return n==null&&(n=h),r==null&&(r=h),e=B["$[]"](Z(r,1)),z(e["$nil?"]())?_=""+_+n:(z(n["$end_with?"](d("SEPARATOR")))&&z(e["$start_with?"](d("SEPARATOR")))&&(n=n.$sub(re([d("SEPARATOR"),"+$"]),"")),_=z(n["$end_with?"](d("SEPARATOR")))||z(e["$start_with?"](d("SEPARATOR")))?""+_+n:""+_+n+d("SEPARATOR"))}),_)},-1),T(x,"$split",function(o){return o.$split(d("SEPARATOR"))}),Y(x,"realpath","expand_path"),Y(x,"exists?","exist?")}($.get_singleton_class(m),A)}("::",R("IO"),q)};Opal.modules["corelib/process/base"]=function($){var z=$.klass,b=$.slice,L=$.defs,S=$.return_val,re=$.nil;return function(Z,T){var W=z(Z,T,"Signal");return L(W,"$trap",function(D){return b(arguments),re},-1)}("::",null),function(Z,T){var W=z(Z,T,"GC");return L(W,"$start",S(re))}("::",null)};Opal.modules["corelib/process"]=function($){var z=$.module,b=$.defs,L=$.truthy,S=$.return_val,re=$.Kernel,Z=$.nil,T=$.$$$;return $.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(W){var p=z(W,"Process"),D=Z;if(p.__clocks__=[],b(p,"$__register_clock__",function(G,O){var Y=this;return Y.__clocks__==null&&(Y.__clocks__=Z),Y.$const_set(G,Y.__clocks__.$size()),Y.__clocks__["$<<"](O)}),p.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),D=!1,$.global.performance)D=function(){return performance.now()};else if($.global.process&&process.hrtime){var $e=process.hrtime();D=function(){var J=process.hrtime($e),G=J[1]/1e3|0;return J[0]*1e3+G/1e3}}return L(D)&&p.$__register_clock__("CLOCK_MONOTONIC",D),b(p,"$pid",S(0)),b(p,"$times",function(){var G=Z;return G=T("Time").$now().$to_f(),T(T("Benchmark"),"Tms").$new(G,G,G,G,G)}),b(p,"$clock_gettime",function(G,O){var Y=this,q=Z;Y.__clocks__==null&&(Y.__clocks__=Z),O==null&&(O="float_second"),L(q=Y.__clocks__["$[]"](G))||re.$raise(T(T("Errno"),"EINVAL"),"clock_gettime("+G+") "+Y.__clocks__["$[]"](G));var h=q();switch(O){case"float_second":return h/1e3;case"float_millisecond":return h/1;case"float_microsecond":return h*1e3;case"second":return h/1e3|0;case"millisecond":return h/1|0;case"microsecond":return h*1e3|0;case"nanosecond":return h*1e6|0;default:re.$raise(T("ArgumentError"),"unexpected unit: "+O)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function($){var z=$.klass,b=$.module,L=$.def,S=$.range,re=$.send,Z=$.rb_divide,T=$.Kernel,W=$.Opal,p=[],D=$.nil,$e=$.$$$;return $.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(J,G,O){var Y=z(J,G,"Random"),q=[Y].concat(O);return function(h,R){var H=b(h,"Formatter"),k=[H].concat(R),F=$.$r(k);return L(H,"$hex",function(A){var C=this;A==null&&(A=D),A=$e("Random").$_verify_count(A);for(var x=C.$bytes(A),E="",u=0;u<A;u++)E+=x.charCodeAt(u).toString(16).padStart(2,"0");return E.$encode("US-ASCII")},-1),L(H,"$random_bytes",function(A){var C=this;return A==null&&(A=D),C.$bytes(A)},-1),L(H,"$base64",function(A){var C=this;return A==null&&(A=D),$e("Base64").$strict_encode64(C.$random_bytes(A)).$encode("US-ASCII")},-1),L(H,"$urlsafe_base64",function(A,C){var x=this;return A==null&&(A=D),C==null&&(C=!1),$e("Base64").$urlsafe_encode64(x.$random_bytes(A),C).$encode("US-ASCII")},-1),L(H,"$uuid",function(){var A=this,C=D;return C=A.$hex(16).$split(""),C["$[]="](12,"4"),C["$[]="](16,(parseInt(C["$[]"](16),16)&3|8).toString(16)),C=[C["$[]"](S(0,8,!0)),C["$[]"](S(8,12,!0)),C["$[]"](S(12,16,!0)),C["$[]"](S(16,20,!0)),C["$[]"](S(20,32,!0))],C=re(C,"map",[],"join".$to_proc()),C.$join("-")}),L(H,"$random_float",function(){var A=this,C=D,x=D;return C=A.$bytes(4),x=0,re(4,"times",[],function(u){return u==null&&(u=D),x=x["$<<"](8),x=x["$|"](C["$[]"](u).$ord())}),Z(x.$abs(),2147483647)}),L(H,"$random_number",function(A){var C=this;function x(){return C.$random_float()}function E(d){return Math.floor(x()*d)}function u(){var d=A.begin,I=A.end;if(d===D||I===D)return D;var g=I-d;return g<0?D:g===0?d:(I%1===0&&d%1===0&&!A.excl&&g++,E(g)+d)}return A==null?x():A.$$is_range?u():A.$$is_number?(A<=0&&T.$raise($e("ArgumentError"),"invalid argument - "+A),A%1===0?E(A):x()*A):(A=W["$coerce_to!"](A,$e("Integer"),"to_int"),A<=0&&T.$raise($e("ArgumentError"),"invalid argument - "+A),E(A))},-1),L(H,"$alphanumeric",function(A){var C=this,x=D;return A==null&&(A=D),A=F("Random").$_verify_count(A),x=re([S("0","9",!1),S("a","z",!1),S("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),re($e("Array"),"new",[A],function E(u){var d=E.$$s==null?this:E.$$s;return x["$[]"](d.$random_number(x.$length()))},{$$s:C}).$join()},-1)}(Y,q),Y.$include($e($e("Random"),"Formatter")),Y.$extend($e($e("Random"),"Formatter"))}("::",null,p)};Opal.modules["corelib/random/mersenne_twister"]=function($){var z=$.klass,b=$.const_set,L=$.send,S=$.nil,re=$.$$$,Z=S;return $.add_stubs("generator="),Z=function(){var T=624,W=397,p=2567483615,D=2147483648,$e=2147483647,J=function(k,F){return k&D|F&$e},G=function(k,F){return J(k,F)>>>1^(F&1?p:0)};function O(k){var F={left:0,next:T,state:new Array(T)};return Y(F,k),F}function Y(k,F){var m;for(k.state[0]=F>>>0,m=1;m<T;m++)k.state[m]=1812433253*(k.state[m-1]^k.state[m-1]>>30>>>0)+m,k.state[m]&=4294967295;k.left=1,k.next=T}function q(k){var F=0,m=k.state,A;for(k.left=T,k.next=0,A=T-W+1;--A;F++)m[F]=m[F+W]^G(m[F+0],m[F+1]);for(A=W;--A;F++)m[F]=m[F+(W-T)]^G(m[F+0],m[F+1]);m[F]=m[F+(W-T)]^G(m[F+0],m[0])}function h(k){var F;return--k.left<=0&&q(k),F=k.state[k.next++],F^=F>>>11,F^=F<<7&2636928640,F^=F<<15&4022730752,F^=F>>>18,F>>>0}function R(k,F){return k>>>=5,F>>>=6,(k*67108864+F)*(1/9007199254740992)}function H(k){var F=h(k),m=h(k);return R(F,m)}return{genrand_real:H,init:O}}(),function(T,W){var p=z(T,W,"Random"),D,$e=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return b(p,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*$e)},reseed:function(J){return Z.init(J)},rand:function(J){return Z.genrand_real(J)}}),D=[re(p,"MERSENNE_TWISTER_GENERATOR")],L(p,"generator=",D),D[D.length-1]}("::",null)};Opal.modules["corelib/random"]=function($){var z=$.truthy,b=$.klass,L=$.Kernel,S=$.defs,re=$.Opal,Z=$.def,T=$.eqeqeq,W=$.send,p=$.top,D=$.nil,$e=$.$$$;return $.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),p.$require("corelib/random/formatter"),function(J,G){var O=b(J,G,"Random");return O.$attr_reader("seed","state"),S(O,"$_verify_count",function(q){return z(q)||(q=16),typeof q!="number"&&(q=q.$to_int()),q<0&&L.$raise($e("ArgumentError"),"negative string size (or size too big)"),q=Math.floor(q),q}),Z(O,"$initialize",function(q){var h=this;return q==null&&(q=$e("Random").$new_seed()),q=re["$coerce_to!"](q,$e("Integer"),"to_int"),h.state=q,h.$reseed(q)},-1),Z(O,"$reseed",function(q){var h=this;return h.seed=q,h.$rng=$.$$rand.reseed(q)}),S(O,"$new_seed",function(){return $.$$rand.new_seed()}),S(O,"$rand",function(q){var h=this;return $e(h,"DEFAULT").$rand(q)},-1),S(O,"$srand",function(q){var h=this,R=D;return q==null&&(q=$e("Random").$new_seed()),q=re["$coerce_to!"](q,$e("Integer"),"to_int"),R=$e(h,"DEFAULT").$seed(),$e(h,"DEFAULT").$reseed(q),R},-1),S(O,"$urandom",function(q){return $e("SecureRandom").$bytes(q)}),Z(O,"$==",function(q){var h=this,R=D;return T($e("Random"),q)?z(R=h.$seed()["$=="](q.$seed()))?h.$state()["$=="](q.$state()):R:!1}),Z(O,"$bytes",function(q){var h=this;return q=$e("Random").$_verify_count(q),W($e("Array"),"new",[q],function R(){var H=R.$$s==null?this:R.$$s;return H.$rand(255).$chr()},{$$s:h}).$join().$encode("ASCII-8BIT")}),S(O,"$bytes",function(q){var h=this;return $e(h,"DEFAULT").$bytes(q)}),Z(O,"$rand",function(q){var h=this;return h.$random_number(q)},-1),Z(O,"$random_float",function(){var q=this;return q.state++,$.$$rand.rand(q.$rng)}),S(O,"$random_float",function(){var q=this;return $e(q,"DEFAULT").$random_float()}),S(O,"$generator=",function(q){var h=this;return $.$$rand=q,z(h["$const_defined?"]("DEFAULT"))?$e(h,"DEFAULT").$reseed():h.$const_set("DEFAULT",h.$new(h.$new_seed()))})}("::",null),p.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function($){var z=$.Kernel,b=$.klass,L=$.send,S=$.slice,re=$.module,Z=$.def,T=$.return_val,W=$.alias,p=$.defs,D=$.top,$e=[],J=$.nil,G=$.$$$;$.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var O={};function Y(h){switch($.config.unsupported_features_severity){case"error":z.$raise(G("NotImplementedError"),h);break;case"warning":q(h);break}}function q(h){O[h]||(O[h]=!0,D.$warn(h))}return function(h,R){var H=b(h,R,"String"),k="String#%s not supported. Mutable String methods are not supported in Opal.";return L(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function F(m){var A=F.$$s==null?this:F.$$s;return m==null&&(m=J),L(A,"define_method",[m],function(x){return S(arguments),z.$raise(G("NotImplementedError"),k["$%"](m))},-1)},{$$s:H})}("::",null),function(h){var R=re(h,"Kernel"),H="Object tainting is not supported by Opal";return Z(R,"$taint",function(){var F=this;return Y(H),F}),Z(R,"$untaint",function(){var F=this;return Y(H),F}),Z(R,"$tainted?",function(){return Y(H),!1})}("::"),function(h,R){var H=b(h,R,"Module");return Z(H,"$public",function(F){var m,A,C=this;return m=S(arguments),A=m,A.length===0?(C.$$module_function=!1,J):A.length===1?A[0]:A},-1),Z(H,"$private_class_method",function(F){var m,A;return m=S(arguments),A=m,A.length===1?A[0]:A},-1),Z(H,"$private_method_defined?",T(!1)),Z(H,"$private_constant",function(F){return S(arguments),J},-1),W(H,"nesting","public"),W(H,"private","public"),W(H,"protected","public"),W(H,"protected_method_defined?","private_method_defined?"),W(H,"public_class_method","private_class_method"),W(H,"public_instance_method","instance_method"),W(H,"public_instance_methods","instance_methods"),W(H,"public_method_defined?","method_defined?")}("::",null),function(h){var R=re(h,"Kernel");return Z(R,"$private_methods",function(k){return S(arguments),[]},-1),W(R,"protected_methods","private_methods"),W(R,"private_instance_methods","private_methods"),W(R,"protected_instance_methods","private_methods")}("::"),function(h,R){var H=re(h,"Kernel"),k=[H].concat(R),F=$.$r(k);return Z(H,"$eval",function(A){return S(arguments),z.$raise(G("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+F("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",$e),p(D,"$public",function(R){var H,k;return H=S(arguments),k=H,k.length===1?k[0]:k},-1),p(D,"$private",function(R){var H,k;return H=S(arguments),k=H,k.length===1?k[0]:k},-1)};Opal.modules["corelib/binding"]=function($){var z=$.klass,b=$.truthy,L=$.def,S=$.slice,re=$.send,Z=$.to_a,T=$.Kernel,W=$.return_ivar,p=$.eqeq;$.thrower;var D=$.module,$e=$.const_set,J=$.top,G=[],O=$.nil,Y=$.$$$;return $.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(q,h){var R=z(q,h,"Binding"),H=R.$$prototype;return H.jseval=H.scope_variables=O,L(R,"$initialize",function(F,m,A,C){var x,E=this;return m==null&&(m=[]),C==null&&(C=O),x=[F,m,A,C],E.jseval=x[0],E.scope_variables=x[1],E.receiver=x[2],E.source_location=x[3],b(typeof A!==void 0)?O:A=E.$js_eval("self")},-2),L(R,"$js_eval",function(F){var m,A,C=this;return m=S(arguments),A=m,b(C.jseval)?re(C.jseval,"call",Z(A)):T.$raise("Evaluation on a Proc#binding is not supported")},-1),L(R,"$local_variable_get",function(F){var m=this;try{return m.$js_eval(F)}catch(A){if($.rescue(A,[Y("Exception")]))try{return T.$raise(Y("NameError"),"local variable `"+F+"' is not defined for "+m.$inspect())}finally{$.pop_exception(A)}else throw A}}),L(R,"$local_variable_set",function(F,m){var A=this;return $.Binding.tmp_value=m,A.$js_eval(""+F+" = Opal.Binding.tmp_value"),delete $.Binding.tmp_value,m}),L(R,"$local_variables",W("scope_variables")),L(R,"$local_variable_defined?",function(F){var m=this;return m.scope_variables["$include?"](F)}),L(R,"$eval",function(F,m,A){try{var C=this;return m==null&&(m=O),A==null&&(A=O),p(F,"self")?C.$receiver():T.$eval(F,C,m,A)}catch(x){if(x===$.t_eval_return)return x.$v;throw x}},-2),R.$attr_reader("receiver","source_location")}("::",null),function(q){var h=D(q,"Kernel");return L(h,"$binding",function(){return T.$raise("Opal doesn't support dynamic calls to binding")})}("::"),$e(G[0],"TOPLEVEL_BINDING",Y("Binding").$new(function(q){return new Function("self","return "+q)(J)},[],J,["<main>",0]))};Opal.modules["corelib/irb"]=function($){var z=$.module,b=$.truthy,L=$.Kernel,S=$.defs,re=$.gvars,Z=$.lambda,T=$.hash_rehash,W=$.send,p=$.rb_plus,D=$.const_set,$e=$.klass,J=$.def,G=$.Opal,O=$.range,Y=$.eqeq,q=$.thrower,h=[],R=$.nil,H=$.$$$;$.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(k,F){var m=z(k,"Opal"),A=[m].concat(F);return function(C,x){var E=z(C,"IRB"),u=[E].concat(x),d=$.$r(u);return S(E,"$ensure_loaded",function(g){var c=R,o=R;if(b($.loaded_features["$include?"](g)))return R;c=b(d("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":d("RUBY_ENGINE_VERSION"),o="https://cdn.opalrb.com/opal/"+c+"/"+g+".js";var w;if(typeof XMLHttpRequest<"u"){var B=new XMLHttpRequest;B.open("GET",o,!1),B.send(""),w=B.responseText}else L.$raise("You need to provision "+g+" yourself in this environment");return new Function("Opal",w)($),$.require(g),b($.loaded_features["$include?"](g))?R:L.$raise("Could not load "+g+" for some reason")}),E.$singleton_class().$attr_accessor("output"),S(E,"$prepare_console",function I(){var g=I.$$p||R,c,o=this,w=R,B=R;return re.stdout==null&&(re.stdout=R),re.stderr==null&&(re.stderr=R),re.stdin==null&&(re.stdin=R),I.$$p=null,function(){try{return o["$output="](""),w=T(new Map([[re.stdout,Z(function(s){return s==null&&(s=R),re.stdout=s})],[re.stderr,Z(function(s){return s==null&&(s=R),re.stderr=s})]])),b(o["$browser?"]())&&(W(w,"each",[],function _(s,n){var r=_.$$s==null?this:_.$$s,e=R;return s==null&&(s=R),n==null&&(n=R),e=s.$dup(),e["$write_proc="](W(r,"proc",[],function t(i){var a=t.$$s==null?this:t.$$s;return i==null&&(i=R),a["$output="](p(a.$output(),i)),a["$output="](a.$output().$split(`
`).$last(30).$join(`
`)),b(i["$end_with?"](`
`))&&a["$output="](p(a.$output(),`
`)),s.$write_proc().$call(i)},{$$s:r})),e["$tty="](!1),n.$call(e)},{$$s:o}),B=re.stdin.$read_proc(),re.stdin["$read_proc="](function(_){var s=prompt(o.$output());return s!==null?s+`
`:R})),$.yieldX(g,[])}finally{W(w,"each",[],function(s,n){return s==null&&(s=R),n==null&&(n=R),n.$call(s)}),c=[B],W(re.stdin,"read_proc=",c),c[c.length-1],c=[""],W(o,"output=",c),c[c.length-1]}}()}),S(E,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),D(u[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(I,g){var c=$e(I,g,"Silencer"),o=c.$$prototype;return o.collector=o.stderr=R,J(c,"$initialize",function(){var B=this;return re.stderr==null&&(re.stderr=R),B.stderr=re.stderr}),J(c,"$silence",function w(){var B=w.$$p||R,_=this;return w.$$p=null,function(){try{return _.collector=H("StringIO").$new(),re.stderr=_.collector,$.yieldX(B,[])}finally{re.stderr=_.stderr}}()}),J(c,"$warnings",function(){var B=this;return B.collector.$string()})}(u[0],null)}(A[0],A)}(h[0],h),function(k,F,m){var A=$e(k,F,"Binding"),C=[A].concat(m),x=$.$r(C);return J(A,"$irb",function(){try{var u=q("return"),d=this,I=R;return H(G,"IRB").$ensure_loaded("opal-replutils"),I=H(H(G,"IRB"),"Silencer").$new(),W(H(G,"IRB"),"prepare_console",[],function g(){var c=g.$$s==null?this:g.$$s;return function(){try{var o=q("break");return W(c,"loop",[],function w(){var B=w.$$s==null?this:w.$$s,_=R,s=R,n=R,r=R,e=R;B.$print(">> "),_=B.$gets(),b(_)||o.$throw(R,w.$$is_lambda),s="",b(H(G,"IRB")["$browser?"]())&&B.$puts(_),b(_["$start_with?"]("ls "))?(s=_["$[]"](O(3,-1,!1)),n="ls"):Y(_,`ls
`)?(s="self",n="ls"):b(_["$start_with?"]("show "))?(s=_["$[]"](O(5,-1,!1)),n="show"):(s=_,n="inspect"),r=R;do{try{W(I,"silence",[],function(){return r=$.compile(s,{irb:!0})})}catch(t){if($.rescue(t,[x("SyntaxError")])){e=t;try{if(b(H(H(G,"IRB"),"LINEBREAKS")["$include?"](e.$message()))){B.$print(".. "),_=B.$gets(),b(_)||u.$throw(R,w.$$is_lambda),b(H(G,"IRB")["$browser?"]())&&B.$puts(_),s=p(s,_);continue}else b(I.$warnings()["$empty?"]())?B.$warn(e.$full_message()):B.$warn(I.$warnings())}finally{$.pop_exception(t)}}else throw t}break}while(!0);return Y(n,"show")&&(B.$puts(r),u.$throw(R,w.$$is_lambda)),B.$puts(H("REPLUtils").$eval_and_print(r,n,!1,B))},{$$s:c,$$ret:u})}catch(w){if(w===o)return w.$v;throw w}finally{o.is_orphan=!0}}()},{$$s:d})}catch(g){if(g===u)return g.$v;throw g}finally{u.is_orphan=!0}})}("::",null,h),$.irb=function(k){H("Binding").$new(k).$irb()},$.load_parser=function(){$.Opal.IRB.$ensure_loaded("opal-parser")},typeof $.eval>"u"&&($.eval=function(k){return $.load_parser(),$.eval(k)}),typeof $.compile>"u"&&($.compile=function(k,F){return $.load_parser(),$.compile(k,F)})};Opal.modules.opal=function($){var z=$.Object;return $.nil,$.add_stubs("require,autoload"),z.$require("opal/base"),z.$require("opal/mini"),z.$require("corelib/kernel/format"),z.$require("corelib/string/encoding"),z.$autoload("Math","corelib/math"),z.$require("corelib/complex/base"),z.$autoload("Complex","corelib/complex"),z.$require("corelib/rational/base"),z.$autoload("Rational","corelib/rational"),z.$require("corelib/time"),z.$autoload("Struct","corelib/struct"),z.$autoload("Set","corelib/set"),z.$autoload("Dir","corelib/dir"),z.$autoload("File","corelib/file"),z.$require("corelib/process/base"),z.$autoload("Process","corelib/process"),z.$autoload("Random","corelib/random"),z.$require("corelib/unsupported"),z.$require("corelib/binding"),z.$require("corelib/irb")};Opal.modules["js/proxy"]=function($){var z=$.module,b=$.truthy,L=$.def,S=$.klass,re=$.const_set,Z=$.slice,T=$.range,W=$.send,p=$.to_a,D=$.gvars,$e=$.top,J=[],G=$.nil;return $.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),$e.$require("opal"),$e.$require("native"),function(O,Y){var q=z(O,"JS"),h=[q].concat(Y),R=$.$r(h);return function(H,k){var F=z(H,"Helpers"),m=[F].concat(k),A=$.$r(m);return L(F,"$wrap_result",function(x){return b(x&&typeof x.then=="function")?A("Promise").$new(x):b(typeof x=="object"&&x!==null)?A("Proxy").$new(x):x}),L(F,"$native_methods",function(){var x=this,E=G;return x.native_methods==null&&(x.native_methods=G),x.native_methods=function(){if(b(E=x.native_methods))return E;{let u=x.$to_n();const d=new Set;for(;u!==null;){for(const I of Reflect.ownKeys(u)){const g=I.toString(),c=x.$to_rb_name(g);typeof I!="symbol"&&g!==c&&d.add(c),d.add(g)}u=Object.getPrototypeOf(u)}return Array.from(d)}}()})}(h[0],h),function(H,k,F){var m=S(H,k,"Proxy"),A=[m].concat(F),C=$.$r(A);return m.$include(C("Enumerable")),m.$include(C("Helpers")),m.$attr_accessor("native"),re(A[0],"IRREGULARS",["html","url","uri"]),L(m,"$initialize",function(E){var u=this;return u.native=u.$Native(E)}),L(m,"$method_missing",function x(E,u){var d=x.$$p||G,I,g,c,o=this,w=G,B=G,_=G,s=G,n=G,r=G;return x.$$p=null,I=Z(arguments,1),g=I,w=o.$to_js_name(E),b(o["$existing_property?"](w))||b(w["$end_with?"]("="))||o.$raise(C("NoMethodError"),"undefined method `"+E+"` for "+o),b(w["$end_with?"]("="))?(B=w["$[]"](T(0,-2,!1)),c=[B,g.$first()],W(o.$native(),"[]=",c),c[c.length-1]):(_=o.$native()["$[]"](w),b(typeof _=="function")?(s=g.$dup(),b(d)&&(n=function(){let e=Array.prototype.slice.call(arguments);return W(d,"call",[o.$class().$new(this)].concat(p(e)))},s["$<<"](n)),r=_.apply(o.$to_n(),s.$to_n()),o.$wrap_result(r)):b(typeof _=="object"&&_!==null)?o.$wrap_result(_):_)},-2),L(m,"$to_str",function(){var E=this;return E.$to_n().toString()}),L(m,"$respond_to_missing?",function(E,u){return!0},-2),L(m,"$each",function x(){var E=x.$$p||G,u=this,d=G;return x.$$p=null,b(u["$respond_to?"]("length"))?(d=u.$length(),W($.Range.$new(0,d,!0),"each",[],function I(g){var c=I.$$s==null?this:I.$$s;return g==null&&(g=G),$.yield1(E,c["$[]"](g))},{$$s:u})):u.$enum_for("each")}),L(m,"$[]",function(E){var u=this,d=G;return d=u.$native()["$[]"](E),u.$wrap_result(d)}),L(m,"$[]=",function(E,u){var d=this;return d.$native()["$[]="](E,u),d.$wrap_result(d.$native())}),L(m,"$to_n",function(){var E=this;return E.$native().$to_n()}),L(m,"$length",function(){var E=this;return E.$native().$length()}),m.$private(),L(m,"$to_js_name",function(E){return W(E.$to_s().$split("_").$map(),"with_index",[],function(d,I){return d==null&&(d=G),I==null&&(I=G),b(C("IRREGULARS")["$include?"](d.$gsub("=","").$downcase()))?d.$upcase():b(I["$zero?"]())?d:d.$capitalize()}).$join()}),L(m,"$to_rb_name",function(E){return W(E.$to_s(),"gsub",[/([A-Z]+)/],function(){var d;return"_"+((d=D["~"])===G?G:d["$[]"](1)).$downcase()}).$sub(/^_/,"")}),L(m,"$existing_property?",function(E){var u=this;return E in u.$to_n()})}(h[0],null,h),function(H,k,F){var m=S(H,k,"Promise"),A=[m].concat(F),C=$.$r(A);return m.$include(C("Helpers")),L(m,"$then",function x(){var E=x.$$p||G,u,d=this,I=G;return x.$$p=null,I=function(g){var c=E.$call(d.$wrap_result(g));return c&&typeof c.then=="function"?c:c&&typeof c.to_n=="function"?c.to_n():c},u=[d.$to_n().then(I)],W(d,"native=",u),u[u.length-1]}),L(m,"$catch",function x(){var E=x.$$p||G,u,d=this,I=G;return x.$$p=null,I=function(g){var c=E.$call(d.$wrap_result(g));return c&&typeof c.then=="function"?c:c&&typeof c.to_n=="function"?c.to_n():c},u=[d.$to_n().catch(I)],W(d,"native=",u),u[u.length-1]})}(h[0],R("Proxy"),h)}(J[0],J)};Opal.modules["opal_stimulus/stimulus_controller"]=function($){var z=$.klass,b=$.const_set,L=$.Opal,S=$.defs,re=$.truthy,Z=$.send,T=$.gvars,W=$.return_val,p=$.thrower,D=$.rb_plus,$e=$.eqeqeq,J=$.def,G=$.top,O=[],Y=$.nil,q=$.$$$;return $.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),G.$require("opal"),G.$require("native"),G.$require("js/proxy"),function(h,R,H){var k=z(h,R,"StimulusController"),F=[k].concat(H),m=$.$r(F),A=k.$$prototype;return A.window=A.document=Y,b(F[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),b(F[0],"DEFAULT_GETTERS",["element"]),S(k,"$inherited",function(x){return L.$bridge(x.$stimulus_controller(),x)}),S(k,"$stimulus_controller",function(){var x=this;return x.stimulus_controller==null&&(x.stimulus_controller=Y),re(x.stimulus_controller)||(x.stimulus_controller=class extends Controller{}),x.stimulus_controller}),S(k,"$stimulus_name",function(){var x=this;return x.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),S(k,"$method_added",function(x){var E=this;if(re(m("DEFAULT_GETTERS")["$include?"](x)))return Y;E.$stimulus_controller().prototype[x]=function(...u){try{var d=u.map(function(I){return I&&typeof I=="object"&&!I.$$class?$.JS.Proxy.$new(I):I});return this["$"+x].apply(this,d)}catch(I){console.error("Uncaught",I)}}}),S(k,"$to_ruby_name",function(x){return Z(x.$to_s(),"gsub",[/([A-Z]+)/],function(){var u;return"_"+((u=T["~"])===Y?Y:u["$[]"](1)).$downcase()}).$sub(/^_/,"")}),S(k,"$register_all!",function(){try{var x=p("return"),E=this;return Z(E.$subclasses(),"each",[],function u(d){return d==null&&(d=Y),Z(d,"define_method",["dummy"],W(Y)),re(application.controllers["$include?"](d.$stimulus_name()))&&x.$throw(Y,u.$$is_lambda),application.register(d.$stimulus_name(),d.$stimulus_controller())},{$$ret:x})}catch(u){if(u===x)return u.$v;throw u}finally{x.is_orphan=!0}}),S(k,"$targets=",function(x){var E=this;return x==null&&(x=[]),E.$stimulus_controller().targets=x,Z(x,"each",[],function u(d){var I=u.$$s==null?this:u.$$s,g=Y,c=Y,o=Y,w=Y,B=Y,_=Y;d==null&&(d=Y),g=d.$to_s(),c=I.$to_ruby_name(d),Z(I,"define_method",[D(c,"_target")],function(){return q(m("JS"),"Proxy").$new(this[D(g,"Target")])}),Z(I,"define_method",[D(c,"_targets")],function(){return Z(this[D(g,"Targets")],"map",[],function(r){return r==null&&(r=Y),q(m("JS"),"Proxy").$new(r)})}),Z(I,"define_method",[D(D("has_",c),"_target")],function(){return this[D(D("has",g.$capitalize()),"Target")]}),o=D(c,"_target_connected"),w=D(g,"TargetConnected"),I.$stimulus_controller().prototype[w]=function(){if(this["$respond_to?"]&&this["$respond_to?"](o))return this["$"+o]()},B=D(c,"_target_disconnected"),_=D(g,"TargetDisconnected"),I.$stimulus_controller().prototype[_]=function(){if(this["$respond_to?"]&&this["$respond_to?"](B))return this["$"+B]()}},{$$s:E})},-1),S(k,"$outlets=",function(x){var E=this;return x==null&&(x=[]),E.$stimulus_controller().outlets=x,Z(x,"each",[],function u(d){var I=u.$$s==null?this:u.$$s,g=Y,c=Y,o=Y,w=Y,B=Y,_=Y;d==null&&(d=Y),g=d.$to_s(),c=I.$to_ruby_name(d),Z(I,"define_method",[D(c,"_outlet")],function(){return this[D(g,"Outlet")]}),Z(I,"define_method",[D(c,"_outlets")],function(){return this[D(g,"Outlets")]}),Z(I,"define_method",[D(D("has_",c),"_outlet")],function(){return this[D(D("has",g.$capitalize()),"Outlet")]}),o=D(c,"_outlet_connected"),w=D(g,"OutletConnected"),I.$stimulus_controller().prototype[w]=function(){if(this["$respond_to?"]&&this["$respond_to?"](o))return this["$"+o]()},B=D(c,"_outlet_disconnected"),_=D(g,"OutletDisconnected"),I.$stimulus_controller().prototype[_]=function(){if(this["$respond_to?"]&&this["$respond_to?"](B))return this["$"+B]()}},{$$s:E})},-1),S(k,"$values=",function(x){var E=this,u=Y;return x==null&&(x=new Map),u=new Map,Z(x,"each",[],function d(I,g){var c=d.$$s==null?this:d.$$s,o=Y,w=Y,B=Y,_=Y;I==null&&(I=Y),g==null&&(g=Y),I=c.$to_ruby_name(I),o=$e("string",w=g)?String:$e("number",w)?Number:$e("boolean",w)?Boolean:$e("array",w)?Array:$e("object",w)?Object:c.$raise(m("ArgumentError"),"Unsupported value type: "+g+", please use :string, :number, :boolean, :array, or :object"),u["$[]="](I,o),c.$stimulus_controller().values=u.$to_n(),Z(c,"define_method",[D(I,"_value")],function s(){var n=s.$$s==null?this:s.$$s;return n.$Native(this[D(I,"Value")])},{$$s:c}),Z(c,"define_method",[D(I,"_value=")],function s(n){var r=s.$$s==null?this:s.$$s;return n==null&&(n=Y),r.$Native(this[D(I,"Value")]=n)},{$$s:c}),Z(c,"define_method",["has_"+I],function(){return this[D(D("has",I.$to_s().$capitalize()),"Value")]}),B=""+I+"_value_changed",_=""+I+"ValueChanged",c.$stimulus_controller().prototype[_]=function(s,n){if(g["$=="]("object")&&(s=JSON.stringify(s),n=JSON.stringify(n)),this["$respond_to?"]&&this["$respond_to?"](B))return this["$"+B](s,n)}},{$$s:E})},-1),S(k,"$classes=",function(x){var E=this;return x==null&&(x=[]),E.$stimulus_controller().classes=x,Z(x,"each",[],function u(d){var I=u.$$s==null?this:u.$$s,g=Y,c=Y;return d==null&&(d=Y),g=d.$to_s(),c=I.$to_ruby_name(d),Z(I,"define_method",[""+c+"_class"],function(){return this[D(g,"Class")]}),Z(I,"define_method",[""+c+"_classes"],function(){return this[D(g,"Classes")]}),Z(I,"define_method",["has_"+c+"_class"],function(){return this[D(D("has",g.$capitalize()),"Class")]})},{$$s:E})},-1),J(k,"$element",function(){return q(m("JS"),"Proxy").$new(this.element)}),J(k,"$window",function(){var x=this,E=Y;return T.$==null&&(T.$=Y),x.window=re(E=x.window)?E:q(m("JS"),"Proxy").$new(T.$.$window())}),J(k,"$document",function(){var x=this,E=Y;return T.$==null&&(T.$=Y),x.document=re(E=x.document)?E:q(m("JS"),"Proxy").$new(T.$.$document())})}(O[0],Controller,O)};Opal.modules["opal_vite/concerns/v1/stimulus_helpers"]=function($){var z=$.module,b=$.def,L=$.truthy,S=$.eqeq,re=$.send,Z=$.slice,T=$.ensure_kwargs,W=$.get_kwarg,p=$.hash_get,D=$.rb_plus,$e=$.rb_minus,J=$.to_a,G=$.range,O=$.const_set,Y=[],q=$.$r(Y),h=$.nil,R=$.$$$;return $.add_stubs("camelize,has_target?,target_set_value,target_set_html,set_target_style,get_target_style,==,show_target,hide_target,call,body_style,to_n,storage_get,is_a?,parse_int,event_data,to_native_element,Native,map,to_a,js_timestamp,is_nan?,parse_float,to_s,empty?,respond_to?,fetch_json_promise,fetch_json_safe,js_then,js_catch,console_error,set_stimulus_value,+,stimulus_value,-,!,get_class,get_classes,has_outlet?,get_outlet,js_call_on,each,get_outlets,nil?,stimulus_dispatch,action_param,[],[]=,flatten,to_proc,blank?,private,include?,upcase,downcase,split,join,first"),function(H,k){var F=z(H,"OpalVite"),m=[F].concat(k);return function(A,C){var x=z(A,"Concerns"),E=[x].concat(C);return function(u,d){var I=z(u,"V1"),g=[I].concat(d);return function(c,o){var w=z(c,"StimulusHelpers"),B=[w].concat(o),_=$.$r(B);return b(w,"$has_target?",function(n){var r=this,e=h;return e="has"+r.$camelize(n)+"Target",this[e]}),b(w,"$get_target",function(n){var r=this,e=h;return L(r["$has_target?"](n))?(e=""+r.$camelize(n,!1)+"Target",this[e]):h}),b(w,"$get_targets",function(n){var r=this,e=h;return e=""+r.$camelize(n,!1)+"Targets",Array.from(this[e]||[])}),b(w,"$target_value",function(n){var r=this,e=h;return L(r["$has_target?"](n))?(e=""+r.$camelize(n,!1)+"Target",this[e].value):h}),b(w,"$target_set_value",function(n,r){var e=this,t=h;return L(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].value=r):h}),b(w,"$target_html",function(n){var r=this,e=h;return L(r["$has_target?"](n))?(e=""+r.$camelize(n,!1)+"Target",this[e].innerHTML):h}),b(w,"$target_set_html",function(n,r){var e=this,t=h;return L(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].innerHTML=r):h}),b(w,"$target_text",function(n){var r=this,e=h;return L(r["$has_target?"](n))?(e=""+r.$camelize(n,!1)+"Target",this[e].textContent):h}),b(w,"$target_set_text",function(n,r){var e=this,t=h;return L(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].textContent=r):h}),b(w,"$target_data",function(n,r){var e=this,t=h;return L(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].getAttribute("data-"+r)):h}),b(w,"$target_set_data",function(n,r,e){var t=this,i=h;return L(t["$has_target?"](n))?(i=""+t.$camelize(n,!1)+"Target",this[i].setAttribute("data-"+r,e)):h}),b(w,"$target_clear",function(n){var r=this;return r.$target_set_value(n,"")}),b(w,"$target_clear_html",function(n){var r=this;return r.$target_set_html(n,"")}),b(w,"$set_target_style",function(n,r,e){var t=this,i=h;return L(t["$has_target?"](n))?(i=""+t.$camelize(n,!1)+"Target",this[i].style[r]=e):h}),b(w,"$get_target_style",function(n,r){var e=this,t=h;return L(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].style[r]):h}),b(w,"$show_target",function(n){var r=this;return r.$set_target_style(n,"display","")}),b(w,"$hide_target",function(n){var r=this;return r.$set_target_style(n,"display","none")}),b(w,"$toggle_target_visibility",function(n){var r=this,e=h;return e=r.$get_target_style(n,"display"),S(e,"none")?r.$show_target(n):r.$hide_target(n)}),b(w,"$add_target_class",function(n,r){var e=this,t=h;return L(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].classList.add(r)):h}),b(w,"$remove_target_class",function(n,r){var e=this,t=h;return L(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].classList.remove(r)):h}),b(w,"$toggle_target_class",function(n,r){var e=this,t=h;return L(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].classList.toggle(r)):h}),b(w,"$has_target_class?",function(n,r){var e=this,t=h;return L(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].classList.contains(r)):!1}),b(w,"$js_timestamp",function(){return Date.now()}),b(w,"$js_iso_date",function(){return new Date().toISOString()}),b(w,"$js_date",function(n){return n==null&&(n=h),L(n)?new Date(n):new Date},-1),b(w,"$js_regexp",function(n,r){return r==null&&(r=""),new RegExp(n,r)},-2),b(w,"$js_regexp_test",function(n,r,e){return e==null&&(e=""),new RegExp(n,e).test(r)},-3),b(w,"$set_timeout",function s(n){var r=s.$$p||h;return s.$$p=null,setTimeout(function(){r.$call()},n)}),b(w,"$set_interval",function s(n){var r=s.$$p||h;return s.$$p=null,setInterval(function(){r.$call()},n)}),b(w,"$clear_timeout",function(n){return clearTimeout(n)}),b(w,"$clear_interval",function(n){return clearInterval(n)}),b(w,"$body_style",function(n,r){return document.body.style[n]=r}),b(w,"$lock_body_scroll",function(){var n=this;return n.$body_style("overflow","hidden")}),b(w,"$unlock_body_scroll",function(){var n=this;return n.$body_style("overflow","")}),b(w,"$js_array",function(){return[]}),b(w,"$js_array_push",function(n,r){return n.push(r.$to_n())}),b(w,"$js_array_length",function(n){return n.length}),b(w,"$js_array_at",function(n,r){return n[r]}),b(w,"$storage_get",function(n){return localStorage.getItem(n)}),b(w,"$storage_set",function(n,r){return localStorage.setItem(n,r)}),b(w,"$storage_remove",function(n){return localStorage.removeItem(n)}),b(w,"$storage_get_json",function(n,r){var e=this,t=h;return r==null&&(r=h),t=e.$storage_get(n),L(t===null)?r:JSON.parse(t)},-2),b(w,"$storage_set_json",function(n,r){return localStorage.setItem(n,JSON.stringify(r.$to_n()))}),b(w,"$dispatch_window_event",function(n,r){var e=h;r==null&&(r=new Map),e=L(r["$is_a?"](_("Hash")))?r.$to_n():r;const t=new CustomEvent(n,{detail:e});window.dispatchEvent(t)},-2),b(w,"$dispatch_event",function(n,r){var e=h;r==null&&(r=new Map),e=L(r["$is_a?"](_("Hash")))?r.$to_n():r;const t=new CustomEvent(n,{detail:e});this.element.dispatchEvent(t)},-2),b(w,"$on_window_event",function s(n){var r=s.$$p||h;return s.$$p=null,window.addEventListener(n,r)}),b(w,"$off_window_event",function(n,r){return window.removeEventListener(n,r)}),b(w,"$on_document_event",function s(n){var r=s.$$p||h;return s.$$p=null,document.addEventListener(n,r)}),b(w,"$on_dom_ready",function s(){var n=s.$$p||h;return s.$$p=null,document.addEventListener("DOMContentLoaded",n)}),b(w,"$on_element_event",function s(n,r){var e=s.$$p||h;return s.$$p=null,n.addEventListener(r,e)}),b(w,"$off_element_event",function(n,r,e){return n.removeEventListener(r,e)}),b(w,"$on_controller_event",function s(n){var r=s.$$p||h;return s.$$p=null,this.element.addEventListener(n,r)}),b(w,"$event_target",function(){return event.currentTarget}),b(w,"$event_data",function(n){return event.currentTarget.getAttribute("data-"+n)}),b(w,"$event_data_int",function(n){var r=this;return r.$parse_int(r.$event_data(n))}),b(w,"$prevent_default",function(){return event.preventDefault()}),b(w,"$event_key",function(){return event.key}),b(w,"$to_native_element",function(n){return L(typeof n.$to_n=="function")?n.$to_n():n}),b(w,"$add_class",function(n,r){var e=this,t=h;return t=e.$to_native_element(n),t.classList.add(r)}),b(w,"$remove_class",function(n,r){var e=this,t=h;return t=e.$to_native_element(n),t.classList.remove(r)}),b(w,"$toggle_class",function(n,r){var e=this,t=h;return t=e.$to_native_element(n),t.classList.toggle(r)}),b(w,"$has_class?",function(n,r){var e=this,t=h;return t=e.$to_native_element(n),t.classList.contains(r)}),b(w,"$set_attr",function(n,r,e){var t=this,i=h;return i=t.$to_native_element(n),i.setAttribute(r,e)}),b(w,"$get_attr",function(n,r){var e=this,t=h;return t=e.$to_native_element(n),t.getAttribute(r)}),b(w,"$remove_attr",function(n,r){var e=this,t=h;return t=e.$to_native_element(n),t.removeAttribute(r)}),b(w,"$set_style",function(n,r,e){var t=this,i=h;return i=t.$to_native_element(n),i.style[r]=e}),b(w,"$set_html",function(n,r){var e=this,t=h;return t=e.$to_native_element(n),t.innerHTML=r}),b(w,"$set_text",function(n,r){var e=this,t=h;return t=e.$to_native_element(n),t.textContent=r}),b(w,"$get_value",function(n){var r=this,e=h;return e=r.$to_native_element(n),e.value}),b(w,"$set_value",function(n,r){var e=this,t=h;return t=e.$to_native_element(n),t.value=r}),b(w,"$focus",function(n){var r=this,e=h;return e=r.$to_native_element(n),e.focus()}),b(w,"$has_attr?",function(n,r){var e=this,t=h;return t=e.$to_native_element(n),t.hasAttribute(r)}),b(w,"$create_element",function(n){return document.createElement(n)}),b(w,"$append_child",function(n,r){var e=this,t=h,i=h;return t=e.$to_native_element(n),i=e.$to_native_element(r),t.appendChild(i)}),b(w,"$remove_element",function(n){var r=this,e=h;return e=r.$to_native_element(n),e.remove()}),b(w,"$next_sibling",function(n){var r=this,e=h;return e=r.$to_native_element(n),e.nextElementSibling}),b(w,"$prev_sibling",function(n){var r=this,e=h;return e=r.$to_native_element(n),e.previousElementSibling}),b(w,"$parent",function(n){var r=this,e=h;return e=r.$to_native_element(n),e.parentElement}),b(w,"$query",function(n){var r=this,e=h;return e=document.querySelector(n),L(e===null)?h:r.$Native(e)}),b(w,"$query_all",function(n){var r=this,e=h;return e=Array.from(document.querySelectorAll(n)),re(r.$Native(e).$to_a(),"map",[],function t(i){var a=t.$$s==null?this:t.$$s;return i==null&&(i=h),a.$Native(i)},{$$s:r})}),b(w,"$query_element",function(n){var r=this,e=h;return e=this.element.querySelector(n),L(e===null)?h:r.$Native(e)}),b(w,"$query_all_element",function(n){var r=this,e=h;return e=Array.from(this.element.querySelectorAll(n)),re(r.$Native(e).$to_a(),"map",[],function t(i){var a=t.$$s==null?this:t.$$s;return i==null&&(i=h),a.$Native(i)},{$$s:r})}),b(w,"$doc_root",function(){return document.documentElement}),b(w,"$set_root_attr",function(n,r){return document.documentElement.setAttribute(n,r)}),b(w,"$get_root_attr",function(n){return document.documentElement.getAttribute(n)}),b(w,"$clone_template",function(n){var r=this,e=h;return e=""+r.$camelize(n,!1)+"Target",this[e].content.cloneNode(!0)}),b(w,"$template_first_child",function(n){return n.firstElementChild}),b(w,"$element_add_class",function(n){return this.element.classList.add(n)}),b(w,"$element_remove_class",function(n){return this.element.classList.remove(n)}),b(w,"$element_toggle_class",function(n){return this.element.classList.toggle(n)}),b(w,"$generate_id",function(){var n=this;return n.$js_timestamp()}),b(w,"$target_focus",function(n){var r=this,e=h;return L(r["$has_target?"](n))?(e=""+r.$camelize(n,!1)+"Target",this[e].focus()):h}),b(w,"$target_blur",function(n){var r=this,e=h;return L(r["$has_target?"](n))?(e=""+r.$camelize(n,!1)+"Target",this[e].blur()):h}),b(w,"$parse_int",function(n,r){return r==null&&(r=10),parseInt(n,r)},-2),b(w,"$parse_float",function(n){return parseFloat(n)}),b(w,"$is_nan?",function(n){return Number.isNaN(n)}),b(w,"$parse_int_or",function(n,r){var e=this,t=h;return r==null&&(r=0),t=e.$parse_int(n),L(e["$is_nan?"](t))?r:t},-2),b(w,"$parse_float_or",function(n,r){var e=this,t=h;return r==null&&(r=0),t=e.$parse_float(n),L(e["$is_nan?"](t))?r:t},-2),b(w,"$js_prop",function(n){return this[n.$to_s()]}),b(w,"$js_set_prop",function(n,r){return this[n.$to_s()]=r}),b(w,"$js_has_prop?",function(n){return!!this[n.$to_s()]}),b(w,"$js_call",function(n,r){var e,t,i=h;return e=Z(arguments,1),t=e,L(t["$empty?"]())?this[n.$to_s()]():(i=re(t,"map",[],function(l){return l==null&&(l=h),L(l["$respond_to?"]("to_n"))?l.$to_n():l}),this[n.$to_s()].apply(this,i))},-2),b(w,"$js_call_on",function(n,r,e){var t,i,a=h;return t=Z(arguments,2),i=t,L(i["$empty?"]())?n[r.$to_s()]():(a=re(i,"map",[],function(v){return v==null&&(v=h),L(v["$respond_to?"]("to_n"))?v.$to_n():v}),n[r.$to_s()].apply(n,a))},-3),b(w,"$js_get",function(n,r){return n[r.$to_s()]}),b(w,"$js_set",function(n,r,e){return n[r.$to_s()]=e}),b(w,"$json_parse",function(n){return JSON.parse(n)}),b(w,"$json_stringify",function(n){var r=h;return r=L(n["$respond_to?"]("to_n"))?n.$to_n():n,JSON.stringify(r)}),b(w,"$console_log",function(n){var r,e;return r=Z(arguments),e=r,console.log.apply(console,e)},-1),b(w,"$console_warn",function(n){var r,e;return r=Z(arguments),e=r,console.warn.apply(console,e)},-1),b(w,"$console_error",function(n){var r,e;return r=Z(arguments),e=r,console.error.apply(console,e)},-1),b(w,"$js_string_char_at",function(n,r){return n.charAt(r)}),b(w,"$js_substring",function(n,r,e){return e==null&&(e=h),L(e)?n.substring(r,e):n.substring(r)},-3),b(w,"$js_split",function(n,r){return n.split(r)}),b(w,"$js_trim",function(n){return n.trim()}),b(w,"$js_includes?",function(n,r){return n.includes(r)}),b(w,"$js_equals?",function(n,r){return n===r}),b(w,"$js_loose_equals?",function(n,r){return n==r}),b(w,"$js_random",function(){return Math.random()}),b(w,"$js_min",function(n,r){return Math.min(n,r)}),b(w,"$js_max",function(n,r){return Math.max(n,r)}),b(w,"$js_abs",function(n){return Math.abs(n)}),b(w,"$js_round",function(n){return Math.round(n)}),b(w,"$js_ceil",function(n){return Math.ceil(n)}),b(w,"$js_to_fixed",function(n,r){return n.toFixed(r)}),b(w,"$random_int",function(n){return Math.floor(Math.random()*n)}),b(w,"$js_floor",function(n){return Math.floor(n)}),b(w,"$js_global_exists?",function(n){return typeof window[n]<"u"}),b(w,"$js_global",function(n){return window[n]}),b(w,"$js_new",function(n,r){var e,t,i=h;return e=Z(arguments,1),t=e,L(t["$empty?"]())?new n:(i=re(t,"map",[],function(l){return l==null&&(l=h),l!=null&&typeof l.$to_n=="function"?l.$to_n():l}),Reflect.construct(n,i))},-2),b(w,"$js_define_method",function s(n){var r=s.$$p||h;return s.$$p=null,this[n.$to_s()]=r}),b(w,"$js_define_method_on",function s(n,r){var e=s.$$p||h;return s.$$p=null,n[r.$to_s()]=e}),b(w,"$js_length",function(n){return n.length}),b(w,"$js_map",function s(n){var r=s.$$p||h;return s.$$p=null,n.map(r)}),b(w,"$js_filter",function s(n){var r=s.$$p||h;return s.$$p=null,n.filter(r)}),b(w,"$js_reduce",function s(n,r){var e=s.$$p||h;return s.$$p=null,n.reduce(e,r)}),b(w,"$js_each",function s(n){var r=s.$$p||h;return s.$$p=null,n.forEach(r)}),b(w,"$js_slice",function(n,r,e){return e==null&&(e=h),L(e)?n.slice(r,e):n.slice(r)},-3),b(w,"$js_object",function(){return{}}),b(w,"$js_keys",function(n){return Object.keys(n)}),b(w,"$js_values",function(n){return Object.values(n)}),b(w,"$js_entries",function(n){return Object.entries(n)}),b(w,"$js_unique_count",function(n){return new Set(n).size}),b(w,"$js_fetch",function(n){return fetch(n)}),b(w,"$fetch_json",function s(n){var r=s.$$p||h;s.$$p=null,fetch(n).then(e=>e.json()).then(e=>r.$call(e)).catch(e=>console.error("Fetch error:",e))}),b(w,"$fetch_json_promise",function(n){return fetch(n).then(r=>r.json())}),b(w,"$fetch_json_safe",function(n){return fetch(n).then(function(r){if(!r.ok)throw new Error("Network response was not ok: "+r.status);return r.json()})}),b(w,"$fetch_all_json",function(n){var r=this,e=h;return e=re(n,"map",[],function t(i){var a=t.$$s==null?this:t.$$s;return i==null&&(i=h),a.$fetch_json_promise(i)},{$$s:r}),Promise.all(e)}),b(w,"$fetch_json_with_handlers",function(n,r){var e,t,i=this,a=h;return r=T(r),e=W(r,"on_success"),t=p(r,"on_error"),t==null&&(t=h),a=i.$fetch_json_safe(n),a=re(i,"js_then",[a],function(v){return v==null&&(v=h),e.$call(v)}),L(t)?re(i,"js_catch",[a],function(v){return v==null&&(v=h),t.$call(v)}):re(i,"js_catch",[a],function l(v){var N=l.$$s==null?this:l.$$s;return v==null&&(v=h),N.$console_error("Fetch error:",v)},{$$s:i})}),b(w,"$promise_all",function(n){return Promise.all(n)}),b(w,"$promise_race",function(n){return Promise.race(n)}),b(w,"$promise_resolve",function(n){var r=h;return r=L(n["$respond_to?"]("to_n"))?n.$to_n():n,Promise.resolve(r)}),b(w,"$promise_reject",function(n){return Promise.reject(n)}),b(w,"$js_then",function s(n){var r=s.$$p||h;return s.$$p=null,n.then(r)}),b(w,"$js_catch",function s(n){var r=s.$$p||h;return s.$$p=null,n.catch(r)}),b(w,"$js_finally",function s(n){var r=s.$$p||h;return s.$$p=null,n.finally(r)}),b(w,"$stimulus_value",function(n){var r=this,e=h;return e=""+r.$camelize(n,!1)+"Value",this[e]}),b(w,"$set_stimulus_value",function(n,r){var e=this,t=h,i=h;return t=""+e.$camelize(n,!1)+"Value",i=L(r["$respond_to?"]("to_n"))?r.$to_n():r,this[t]=i}),b(w,"$has_stimulus_value?",function(n){var r=this,e=h;return e="has"+r.$camelize(n)+"Value",this[e]}),b(w,"$increment_stimulus_value",function(n,r){var e=this;return r==null&&(r=1),e.$set_stimulus_value(n,D(e.$stimulus_value(n),r))},-2),b(w,"$decrement_stimulus_value",function(n,r){var e=this;return r==null&&(r=1),e.$set_stimulus_value(n,$e(e.$stimulus_value(n),r))},-2),b(w,"$toggle_stimulus_value",function(n){var r=this;return r.$set_stimulus_value(n,r.$stimulus_value(n)["$!"]())}),b(w,"$get_class",function(n){var r=this,e=h;return e=""+r.$camelize(n,!1)+"Class",this[e]}),b(w,"$get_classes",function(n){var r=this,e=h;return e=""+r.$camelize(n,!1)+"Classes",Array.from(this[e]||[])}),b(w,"$has_class_definition?",function(n){var r=this,e=h;return e="has"+r.$camelize(n)+"Class",this[e]}),b(w,"$apply_class",function(n,r){var e=this,t=h,i=h;return t=e.$to_native_element(n),i=e.$get_class(r),L(i)?t.classList.add(i):h}),b(w,"$apply_classes",function(n,r){var e=this,t=h,i=h;return t=e.$to_native_element(n),i=e.$get_classes(r),L(i)?t.classList.add(...i):h}),b(w,"$remove_applied_class",function(n,r){var e=this,t=h,i=h;return t=e.$to_native_element(n),i=e.$get_class(r),L(i)?t.classList.remove(i):h}),b(w,"$remove_applied_classes",function(n,r){var e=this,t=h,i=h;return t=e.$to_native_element(n),i=e.$get_classes(r),L(i)?t.classList.remove(...i):h}),b(w,"$has_outlet?",function(n){var r=this,e=h;return e="has"+r.$camelize(n)+"Outlet",this[e]}),b(w,"$get_outlet",function(n){var r=this,e=h;return e=""+r.$camelize(n,!1)+"Outlet",this[e]}),b(w,"$get_outlets",function(n){var r=this,e=h;return e=""+r.$camelize(n,!1)+"Outlets",Array.from(this[e]||[])}),b(w,"$get_outlet_element",function(n){var r=this,e=h;return e=""+r.$camelize(n,!1)+"OutletElement",this[e]}),b(w,"$get_outlet_elements",function(n){var r=this,e=h;return e=""+r.$camelize(n,!1)+"OutletElements",Array.from(this[e]||[])}),b(w,"$call_outlet",function(n,r,e){var t,i,a=this,l=h;return t=Z(arguments,2),i=t,L(a["$has_outlet?"](n))?(l=a.$get_outlet(n),re(a,"js_call_on",[l,r].concat(J(i)))):h},-3),b(w,"$call_all_outlets",function(n,r,e){var t,i,a=this;return t=Z(arguments,2),i=t,re(a.$get_outlets(n),"each",[],function l(v){var N=l.$$s==null?this:l.$$s;return v==null&&(v=h),re(N,"js_call_on",[v,r].concat(J(i)))},{$$s:a})},-3),b(w,"$stimulus_dispatch",function(n,r){var e,t,i,a,l,v=h,N=h;return r=T(r),e=p(r,"detail"),e==null&&(e=new Map),t=p(r,"target"),t==null&&(t=h),i=p(r,"prefix"),i==null&&(i=h),a=p(r,"bubbles"),a==null&&(a=!0),l=p(r,"cancelable"),l==null&&(l=!0),v=L(e["$respond_to?"]("to_n"))?e.$to_n():e,N={detail:v,bubbles:a,cancelable:l},L(t["$nil?"]())||(N.target=t),L(i["$nil?"]())||(N.prefix=i),this.dispatch(n,N)},-2),b(w,"$stimulus_dispatch_confirm",function(n,r){var e,t=this,i=h;return r=T(r),e=p(r,"detail"),e==null&&(e=new Map),i=t.$stimulus_dispatch(n,new Map([["detail",e],["cancelable",!0]])),!i.defaultPrevented},-2),b(w,"$action_params",function(){return event.params||{}}),b(w,"$action_param",function(n){return(event.params||{})[n.$to_s()]}),b(w,"$action_param_int",function(n,r){var e=this,t=h,i=h;return r==null&&(r=0),t=e.$action_param(n),i=e.$parse_int(t),L(e["$is_nan?"](i))?r:i},-2),b(w,"$action_param_bool",function(n){var r=this,e=h;return e=r.$action_param(n),!!e&&e!=="false"&&e!=="0"}),b(w,"$has_action_param?",function(n){return(event.params||{}).hasOwnProperty(n.$to_s())}),b(w,"$this_application",function(){return this.application}),b(w,"$this_identifier",function(){return this.identifier}),b(w,"$this_element",function(){return this.element}),b(w,"$get_controller",function(n,r){var e=this,t=h;return t=e.$to_native_element(n),this.application.getControllerForElementAndIdentifier(t,r)}),b(w,"$get_controllers",function(n,r){var e=this,t=h;t=e.$to_native_element(n),Array.from(t.querySelectorAll('[data-controller~="'+r+'"]')).map(i=>this.application.getControllerForElementAndIdentifier(i,r)).filter(i=>i!==null)}),b(w,"$this_scope",function(){return this.scope.element}),b(w,"$in_scope?",function(n){var r=this,e=h;return e=r.$to_native_element(n),this.element.contains(e)}),b(w,"$debounce",function s(n){var r=s.$$p||h;s.$$p=null;var e;return function(...t){clearTimeout(e),e=setTimeout(()=>r.$call(),n)}}),b(w,"$throttle",function s(n){var r=s.$$p||h;s.$$p=null;var e=0;return function(...t){var i=Date.now();i-e>=n&&(e=i,r.$call())}}),b(w,"$debounced",function s(n,r){var e=s.$$p||h,t,i=this,a=h,l=h;return i._debounce_timers==null&&(i._debounce_timers=h),s.$$p=null,r==null&&(r="default"),i._debounce_timers=L(a=i._debounce_timers)?a:new Map,l="_debounce_"+r,clearTimeout(i._debounce_timers["$[]"](l)),t=[l,setTimeout(function(){e.$call()},n)],re(i._debounce_timers,"[]=",t),t[t.length-1]},-2),b(w,"$throttled",function s(n,r){var e=s.$$p||h,t=this,i=h,a=h,l=h,v=h;return t._throttle_times==null&&(t._throttle_times=h),s.$$p=null,r==null&&(r="default"),t._throttle_times=L(i=t._throttle_times)?i:new Map,a="_throttle_"+r,l=Date.now(),v=L(i=t._throttle_times["$[]"](a))?i:0,L(l-v>=n)?(t._throttle_times["$[]="](a,l),e.$call()):h},-2),b(w,"$copy_to_clipboard",function s(n){var r=s.$$p||h;s.$$p=null,navigator.clipboard.writeText(n).then(function(){L(r)&&r.$call()})}),b(w,"$read_from_clipboard",function s(){var n=s.$$p||h;s.$$p=null,navigator.clipboard.readText().then(function(r){n.$call(r)})}),b(w,"$deep_clone",function(n){return JSON.parse(JSON.stringify(n.$to_n()))}),b(w,"$deep_merge",function(n,r){function e(t,i){var a=Object.assign({},t);for(var l in i)i.hasOwnProperty(l)&&(i[l]&&typeof i[l]=="object"&&!Array.isArray(i[l])?a[l]=e(a[l]||{},i[l]):a[l]=i[l]);return a}return e(n.$to_n(),r.$to_n())}),b(w,"$pick",function(n,r){var e,t,i=h;return e=Z(arguments,1),t=e,i=new Map,re(t.$flatten(),"each",[],function(l){var v,N=h,P=h;return l==null&&(l=h),N=l.$to_s(),P=n.$to_n(),L(P.hasOwnProperty(N))?(v=[N,P[N]],re(i,"[]=",v),v[v.length-1]):h}),i},-2),b(w,"$omit",function(n,r){var e,t,i,a=h,l=h,v=h;return e=Z(arguments,1),t=e,a=re(t.$flatten(),"map",[],"to_s".$to_proc()),l=new Map,v=n.$to_n(),Object.keys(v).forEach(function(N){a.includes(N)||(i=[N,v[N]],re(l,"[]=",i),i[i.length-1])}),l},-2),b(w,"$unique",function(n){return[...new Set(n.$to_n())]}),b(w,"$intersection",function(n,r){var e=h;return e=new Set(r.$to_n()),n.$to_n().filter(t=>e.has(t))}),b(w,"$difference",function(n,r){var e=h;return e=new Set(r.$to_n()),n.$to_n().filter(t=>!e.has(t))}),b(w,"$union",function(n,r){return[...new Set([...n.$to_n(),...r.$to_n()])]}),b(w,"$valid_email?",function(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}),b(w,"$valid_url?",function(n){try{return new URL(n),!0}catch{return!1}}),b(w,"$valid_phone?",function(n){var r=h;r=n.replace(/[\s\-\(\)\.]/g,"");var e=/^[\+]?[0-9]{10,15}$/;return e.test(r)}),b(w,"$blank?",function(n){return L(n["$nil?"]())?!0:L(typeof n=="string")?n.trim()==="":L(Array.isArray(n))?n.length===0:!1}),b(w,"$present?",function(n){var r=this;return r["$blank?"](n)["$!"]()}),b(w,"$min_length?",function(n,r){return L(n["$nil?"]())?!1:n.length>=r}),b(w,"$max_length?",function(n,r){return L(n["$nil?"]())?!1:n.length<=r}),b(w,"$matches_pattern?",function(n,r){return L(n["$nil?"]())?!1:new RegExp(r).test(n)}),b(w,"$console_styled",function(n,r){return r==null&&(r="color: blue; font-weight: bold;"),console.log("%c"+n,r)},-2),b(w,"$console_group",function s(n,r){var e=s.$$p||h,t;return s.$$p=null,r=T(r),t=p(r,"collapsed"),t==null&&(t=!1),L(t)?console.groupCollapsed(n):console.group(n),e.$call(),console.groupEnd()},-2),b(w,"$console_table",function(n){return console.table(n.$to_n())}),b(w,"$console_time",function(n){var r=h;return r=new Date().toISOString(),console.log("["+r+"] "+n)}),w.$private(),b(w,"$camelize",function(n,r){var e=h,t=h;return r==null&&(r=!0),e=n.$to_s(),L(e["$include?"]("_"))?(t=e.$split("_"),L(r)?re(t,"map",[],"capitalize".$to_proc()).$join():D([t.$first()],re(t["$[]"](G(1,-1,!1)),"map",[],"capitalize".$to_proc())).$join()):L(r)?D(e["$[]"](0).$upcase(),e["$[]"](G(1,-1,!1)).$to_s()):D(e["$[]"](0).$downcase(),e["$[]"](G(1,-1,!1)).$to_s())},-2)}(g[0],g)}(E[0],E)}(m[0],m)}(Y[0],Y),O(Y[0],"StimulusHelpers",R(R(R(q("OpalVite"),"Concerns"),"V1"),"StimulusHelpers"))};Opal.modules["services/user_service"]=function($){var z=$.klass,b=$.const_set,L=$.ensure_kwargs,S=$.get_kwarg,re=$.hash_get,Z=$.send,T=$.truthy,W=$.def,p=[],D=$.nil;return $.add_stubs("include,freeze,fetch_json_safe,js_then,call,js_catch,console_error,fetch_all_json,js_array_at"),function($e,J,G){var O=z($e,J,"UserService"),Y=[O].concat(G),q=$.$r(Y);return O.$include(q("StimulusHelpers")),b(Y[0],"API_BASE","https://jsonplaceholder.typicode.com".$freeze()),W(O,"$fetch_all",function(R){var H,k,F=this,m=D;return R=L(R),H=S(R,"on_success"),k=re(R,"on_error"),k==null&&(k=D),m=F.$fetch_json_safe(""+q("API_BASE")+"/users"),m=Z(F,"js_then",[m],function(C){return C==null&&(C=D),H.$call(C)}),Z(F,"js_catch",[m],function A(C){var x=A.$$s==null?this:A.$$s;return C==null&&(C=D),T(k)?k.$call(C):x.$console_error("UserService: Error fetching users",C)},{$$s:F})}),W(O,"$fetch_with_posts",function(R,H){var k,F,m=this,A=D,C=D;return H=L(H),k=S(H,"on_success"),F=re(H,"on_error"),F==null&&(F=D),A=[""+q("API_BASE")+"/users/"+R,""+q("API_BASE")+"/posts?userId="+R],C=m.$fetch_all_json(A),C=Z(m,"js_then",[C],function x(E){var u=x.$$s==null?this:x.$$s,d=D,I=D;return E==null&&(E=D),d=u.$js_array_at(E,0),I=u.$js_array_at(E,1),k.$call(new Map([["user",d],["posts",I]]))},{$$s:m}),Z(m,"js_catch",[C],function x(E){var u=x.$$s==null?this:x.$$s;return E==null&&(E=D),T(F)?F.$call(E):u.$console_error("UserService: Error fetching user with posts",E)},{$$s:m})}),W(O,"$fetch_one",function(R,H){var k,F,m=this,A=D;return H=L(H),k=S(H,"on_success"),F=re(H,"on_error"),F==null&&(F=D),A=m.$fetch_json_safe(""+q("API_BASE")+"/users/"+R),A=Z(m,"js_then",[A],function(x){return x==null&&(x=D),k.$call(x)}),Z(m,"js_catch",[A],function C(x){var E=C.$$s==null?this:C.$$s;return x==null&&(x=D),T(F)?F.$call(x):E.$console_error("UserService: Error fetching user",x)},{$$s:m})}),W(O,"$fetch_posts",function(R,H){var k,F,m=this,A=D;return H=L(H),k=S(H,"on_success"),F=re(H,"on_error"),F==null&&(F=D),A=m.$fetch_json_safe(""+q("API_BASE")+"/posts?userId="+R),A=Z(m,"js_then",[A],function(x){return x==null&&(x=D),k.$call(x)}),Z(m,"js_catch",[A],function C(x){var E=C.$$s==null?this:C.$$s;return x==null&&(x=D),T(F)?F.$call(x):E.$console_error("UserService: Error fetching posts",x)},{$$s:m})})}(p[0],null,p)};Opal.modules["presenters/user_presenter"]=function($){var z=$.klass,b=$.truthy,L=$.send,S=$.def,re=[],Z=$.nil;return $.add_stubs("include,create_element,add_class,js_get,set_attr,js_define_method_on,call,set_html,build_card_html,js_each,render_card,to_proc,append_child,js_string_char_at,private,extract_display_data,[]"),function(T,W,p){var D=z(T,W,"UserPresenter"),$e=[D].concat(p),J=$.$r($e);return D.$include(J("StimulusHelpers")),S(D,"$render_card",function G(O){var Y=G.$$p||Z,q=this,h=Z,R=Z;return G.$$p=null,h=q.$create_element("div"),q.$add_class(h,"user-card"),R=q.$js_get(O,"id"),q.$set_attr(h,"data-user-id",R),b(Y)&&L(q,"js_define_method_on",[h,"onclick"],function(){return Y.$call(R)}),q.$set_html(h,q.$build_card_html(O)),h}),S(D,"$render_list",function G(O,Y){var q=G.$$p||Z,h=this;return G.$$p=null,h.$set_html(O,""),L(h,"js_each",[Y],function R(H){var k=R.$$s==null?this:R.$$s,F=Z;return H==null&&(H=Z),F=L(k,"render_card",[H],q.$to_proc()),k.$append_child(O,F)},{$$s:h})}),S(D,"$append_to",function(O,Y){var q=this;return q.$append_child(O,Y)}),S(D,"$extract_display_data",function(O){var Y=this;return new Map([["id",Y.$js_get(O,"id")],["name",Y.$js_get(O,"name")],["email",Y.$js_get(O,"email")],["phone",Y.$js_get(O,"phone")],["website",Y.$js_get(O,"website")],["company",Y.$js_get(Y.$js_get(O,"company"),"name")],["city",Y.$js_get(Y.$js_get(O,"address"),"city")],["street",Y.$js_get(Y.$js_get(O,"address"),"street")],["initial",Y.$js_string_char_at(Y.$js_get(O,"name"),0)]])}),S(D,"$format_address",function(O){var Y=this,q=Z,h=Z,R=Z;return q=Y.$js_get(O,"address"),h=Y.$js_get(q,"street"),R=Y.$js_get(q,"city"),""+h+", "+R}),D.$private(),S(D,"$build_card_html",function(O){var Y=this,q=Z;return q=Y.$extract_display_data(O),`<div class="user-header">
  <div class="user-avatar">`+q["$[]"]("initial")+`</div>
  <div class="user-info">
    <h3>`+q["$[]"]("name")+`</h3>
    <p class="user-email">`+q["$[]"]("email")+`</p>
  </div>
</div>
<div class="user-details">
  <div class="detail-item">
    <span class="detail-label">Company:</span>
    <span class="detail-value">`+q["$[]"]("company")+`</span>
  </div>
  <div class="detail-item">
    <span class="detail-label">City:</span>
    <span class="detail-value">`+q["$[]"]("city")+`</span>
  </div>
  <div class="detail-item">
    <span class="detail-label">Phone:</span>
    <span class="detail-value">`+q["$[]"]("phone")+`</span>
  </div>
</div>
`})}(re[0],null,re)};Opal.modules["presenters/post_presenter"]=function($){var z=$.klass,b=$.const_set,L=$.ensure_kwargs,S=$.hash_get,re=$.eqeq,Z=$.truthy,T=$.rb_gt,W=$.def,p=$.send,D=$.rb_minus,$e=[],J=$.nil;return $.add_stubs("include,set_html,js_length,==,render_empty_state,render_posts,>,render_more_indicator,create_element,add_class,js_get,build_post_html,private,js_min,times,js_array_at,render_item,append_child,-,set_text"),function(G,O,Y){var q=z(G,O,"PostPresenter"),h=[q].concat(Y),R=$.$r(h);return q.$include(R("StimulusHelpers")),b(h[0],"DEFAULT_MAX_POSTS",5),W(q,"$render_list",function(k,F,m){var A,C=this,x=J;return m=L(m),A=S(m,"max"),A==null&&(A=R("DEFAULT_MAX_POSTS")),C.$set_html(k,""),x=C.$js_length(F),re(x,0)?C.$render_empty_state(k):(C.$render_posts(k,F,x,A),Z(T(x,A))?C.$render_more_indicator(k,x,A):J)},-3),W(q,"$render_item",function(k){var F=this,m=J,A=J,C=J;return m=F.$create_element("div"),F.$add_class(m,"post-item"),A=F.$js_get(k,"title"),C=F.$js_get(k,"body"),F.$set_html(m,F.$build_post_html(A,C)),m}),W(q,"$extract_display_data",function(k){var F=this;return new Map([["id",F.$js_get(k,"id")],["user_id",F.$js_get(k,"userId")],["title",F.$js_get(k,"title")],["body",F.$js_get(k,"body")]])}),q.$private(),W(q,"$render_empty_state",function(k){var F=this;return F.$set_html(k,'<p class="no-posts">No posts yet</p>')}),W(q,"$render_posts",function(k,F,m,A){var C=this,x=J;return x=C.$js_min(m,A),p(x,"times",[],function E(u){var d=E.$$s==null?this:E.$$s,I=J,g=J;return u==null&&(u=J),I=d.$js_array_at(F,u),g=d.$render_item(I),d.$append_child(k,g)},{$$s:C})}),W(q,"$render_more_indicator",function(k,F,m){var A=this,C=J,x=J;return C=A.$create_element("p"),A.$add_class(C,"more-posts"),x=D(F,m),A.$set_text(C,"+ "+x+" more posts"),A.$append_child(k,C)}),W(q,"$build_post_html",function(k,F){return"<h4>"+k+"</h4><p>"+F+"</p>"})}($e[0],null,$e)};Opal.modules["controllers/users_controller"]=function($){var z=$.klass,b=$.def,L=$.lambda,S=$.truthy,re=$.send,Z=[],T=$.$r(Z),W=$.nil;return $.add_stubs("include,targets=,puts,new,load_users,event_data_int,fetch_and_show_user,private,show_loading,hide_error,clear_list,fetch_all,handle_users_loaded,handle_load_error,hide_loading,render_users,console_error,show_error,has_target?,get_target,render_list,fetch_with_posts,show_user_modal,handle_user_fetch_error,dispatch_window_event,[],target_set_html,show_target,hide_target,target_set_text"),function(p,D,$e){var J=z(p,D,"UsersController"),G=[J].concat($e),O=$.$r(G),Y=J.$$prototype;return Y.user_service=Y.user_presenter=W,J.$include(O("StimulusHelpers")),J["$targets="](["list","loading","error"]),b(J,"$connect",function(){var h=this;return h.$puts("Users controller connected!"),h.user_service=O("UserService").$new(),h.user_presenter=O("UserPresenter").$new(),h.$load_users()}),b(J,"$reload",function(){var h=this;return h.$load_users()}),b(J,"$show_user",function(){var h=this,R=W;return R=h.$event_data_int("user-id"),h.$fetch_and_show_user(R)}),J.$private(),b(J,"$load_users",function(){var h=this;return h.$show_loading(),h.$hide_error(),h.$clear_list(),h.user_service.$fetch_all(new Map([["on_success",L(function R(H){var k=R.$$s==null?this:R.$$s;return H==null&&(H=W),k.$handle_users_loaded(H)},{$$s:h})],["on_error",L(function R(H){var k=R.$$s==null?this:R.$$s;return H==null&&(H=W),k.$handle_load_error(H)},{$$s:h})]]))}),b(J,"$handle_users_loaded",function(h){var R=this;return R.$hide_loading(),R.$render_users(h)}),b(J,"$handle_load_error",function(h){var R=this;return R.$console_error("Error fetching users:",h),R.$hide_loading(),R.$show_error("Failed to load users. Please try again.")}),b(J,"$render_users",function(h){var R=this,H=W;return S(R["$has_target?"]("list"))?(H=R.$get_target("list"),re(R.user_presenter,"render_list",[H,h],function k(F){var m=k.$$s==null?this:k.$$s;return F==null&&(F=W),m.$fetch_and_show_user(F)},{$$s:R})):W}),b(J,"$fetch_and_show_user",function(h){var R=this;return R.user_service.$fetch_with_posts(h,new Map([["on_success",L(function H(k){var F=H.$$s==null?this:H.$$s;return k==null&&(k=W),F.$show_user_modal(k)},{$$s:R})],["on_error",L(function H(k){var F=H.$$s==null?this:H.$$s;return k==null&&(k=W),F.$handle_user_fetch_error(k)},{$$s:R})]]))}),b(J,"$show_user_modal",function(h){var R=this;return R.$dispatch_window_event("show-user-modal",new Map([["user",h["$[]"]("user")],["posts",h["$[]"]("posts")]]))}),b(J,"$handle_user_fetch_error",function(h){var R=this;return R.$console_error("Error fetching user details:",h),alert("Failed to load user details")}),b(J,"$clear_list",function(){var h=this;return S(h["$has_target?"]("list"))?h.$target_set_html("list",""):W}),b(J,"$show_loading",function(){var h=this;return S(h["$has_target?"]("loading"))?h.$show_target("loading"):W}),b(J,"$hide_loading",function(){var h=this;return S(h["$has_target?"]("loading"))?h.$hide_target("loading"):W}),b(J,"$show_error",function(h){var R=this;return S(R["$has_target?"]("error"))?(R.$target_set_text("error",h),R.$show_target("error")):W}),b(J,"$hide_error",function(){var h=this;return S(h["$has_target?"]("error"))?h.$hide_target("error"):W})}(Z[0],T("StimulusController"),Z)};Opal.modules["controllers/user_modal_controller"]=function($){var z=$.klass,b=$.def,L=$.truthy,S=$.eqeq,re=$.send,Z=[],T=$.$r(Z),W=$.nil;return $.add_stubs("include,targets=,puts,new,setup_event_listener,element_add_class,add_target_class,lock_body_scroll,element_remove_class,remove_target_class,unlock_body_scroll,event_target,get_target,js_equals?,close,==,event_key,private,on_window_event,js_get,display_user,open,display_user_info,display_user_posts,extract_display_data,has_target?,target_set_text,[],format_address,render_list"),function(p,D,$e){var J=z(p,D,"UserModalController"),G=[J].concat($e),O=$.$r(G),Y=J.$$prototype;return Y.user_presenter=Y.post_presenter=W,J.$include(O("StimulusHelpers")),J["$targets="](["overlay","content","userName","userEmail","userCompany","userAddress","userPhone","userWebsite","postsList"]),b(J,"$connect",function(){var h=this;return h.$puts("User modal controller connected!"),h.user_presenter=O("UserPresenter").$new(),h.post_presenter=O("PostPresenter").$new(),h.$setup_event_listener()}),b(J,"$open",function(){var h=this;return h.$element_add_class("active"),h.$add_target_class("overlay","active"),h.$add_target_class("content","active"),h.$lock_body_scroll()}),b(J,"$close",function(){var h=this;return h.$element_remove_class("active"),h.$remove_target_class("overlay","active"),h.$remove_target_class("content","active"),h.$unlock_body_scroll()}),b(J,"$close_on_overlay",function(){var h=this,R=W,H=W;return R=h.$event_target(),H=h.$get_target("overlay"),L(h["$js_equals?"](R,H))?h.$close():W}),b(J,"$close_on_escape",function(){var h=this;return S(h.$event_key(),"Escape")?h.$close():W}),J.$private(),b(J,"$setup_event_listener",function(){var h=this;return re(h,"on_window_event",["show-user-modal"],function R(H){var k=R.$$s==null?this:R.$$s,F=W,m=W,A=W;return H==null&&(H=W),F=k.$js_get(H,"detail"),m=k.$js_get(F,"user"),A=k.$js_get(F,"posts"),k.$display_user(m,A),k.$open()},{$$s:h})}),b(J,"$display_user",function(h,R){var H=this;return H.$display_user_info(h),H.$display_user_posts(R)}),b(J,"$display_user_info",function(h){var R=this,H=W,k=W;return H=R.user_presenter.$extract_display_data(h),L(R["$has_target?"]("userName"))&&R.$target_set_text("userName",H["$[]"]("name")),L(R["$has_target?"]("userEmail"))&&R.$target_set_text("userEmail",H["$[]"]("email")),L(R["$has_target?"]("userCompany"))&&R.$target_set_text("userCompany",H["$[]"]("company")),L(R["$has_target?"]("userPhone"))&&R.$target_set_text("userPhone",H["$[]"]("phone")),L(R["$has_target?"]("userWebsite"))&&R.$target_set_text("userWebsite",H["$[]"]("website")),L(R["$has_target?"]("userAddress"))?(k=R.user_presenter.$format_address(h),R.$target_set_text("userAddress",k)):W}),b(J,"$display_user_posts",function(h){var R=this,H=W;return L(R["$has_target?"]("postsList"))?(H=R.$get_target("postsList"),R.post_presenter.$render_list(H,h,new Map([["max",5]]))):W})}(Z[0],T("StimulusController"),Z)};Opal.queue(function($){var z=$.top,b=[],L=$.$r(b);return $.nil,$.add_stubs("require,puts,register_all!"),z.$require("native"),z.$require("opal_stimulus/stimulus_controller"),z.$require("opal_vite/concerns/v1/stimulus_helpers"),z.$require("services/user_service"),z.$require("presenters/user_presenter"),z.$require("presenters/post_presenter"),z.$require("controllers/users_controller"),z.$require("controllers/user_modal_controller"),z.$puts("API Example - Opal + Fetch API"),z.$puts("Ruby version: "+L("RUBY_VERSION")),z.$puts("Architecture: Service + Presenter pattern"),L("StimulusController")["$register_all!"](),z.$puts("All controllers registered!")});
