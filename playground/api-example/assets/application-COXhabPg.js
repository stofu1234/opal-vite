Opal.modules.native=function(e){var x=e.hash_put,E=e.module,B=e.defs,I=e.slice,re=e.truthy,Z=e.send,C=e.Kernel,W=e.extract_kwargs,v=e.ensure_kwargs,D=e.hash_get,$e=e.range,V=e.to_a,G=e.def,O=e.return_ivar,j=e.alias,w=e.klass,A=e.rb_minus,M=e.return_val,H=e.send2,k=e.find_super,P=e.eqeqeq,g=e.rb_ge,z=e.return_self,F=e.gvars,q=e.top,y=[],o=e.$r(y),d=e.nil,S=e.$$$;return e.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(h,l){var c=E(h,"Native"),X=[c].concat(l),b=e.$r(X);return B(c,"$is_a?",function(a,$){var n=this;try{return a instanceof n.$try_convert($)}catch{return!1}}),B(c,"$try_convert",function(a,$){var n=this;return $==null&&($=d),n["$native?"](a)?a:a["$respond_to?"]("to_n")?a.$to_n():$},-2),B(c,"$convert",function(a){var $=this;if($["$native?"](a))return a;if(a["$respond_to?"]("to_n"))return a.$to_n();$.$raise(b("ArgumentError"),""+a.$inspect()+" isn't native")}),B(c,"$call",function i(a,$,n){var t=i.$$p||d,r,s,u=this;i.$$p=null,r=I(arguments,2),s=r;var f=a[$];if(f instanceof Function){for(var p=new Array(s.length),R=0,L=s.length;R<L;R++){var T=s[R],J=u.$try_convert(T);p[R]=J===d?T:J}return t!==d&&p.push(t),u.$Native(f.apply(a,p))}else return u.$Native(f)},-3),B(c,"$proc",function i(){var a=i.$$p||d,$=this;return i.$$p=null,re(a)||$.$raise(b("LocalJumpError"),"no block given"),Z(C,"proc",[],function n(t){var r,s,u=n.$$s==null?this:n.$$s,f=d;if(r=I(arguments),s=r,Z(s,"map!",[],function R(L){var T=R.$$s==null?this:R.$$s;return L==null&&(L=d),T.$Native(L)},{$$s:u}),f=u.$Native(this),this===e.global)return a.apply(u,s);var p=a.$$s;a.$$s=null;try{return a.apply(f,s)}finally{a.$$s=p}},{$$arity:-1,$$s:$})}),function(i,a){var $=E(i,"Helpers"),n=[$].concat(a),t=e.$r(n);return G($,"$alias_native",function r(s,u,f){var p,R,L,T;r.$$p;var J=this;return r.$$p=null,p=I(arguments,1),R=W(p),R=v(R),p.length>0&&(L=p.shift()),L==null&&(L=s),T=D(R,"as"),T==null&&(T=d),re(L["$end_with?"]("="))?Z(J,"define_method",[s],function ee(ae){var le=ee.$$s==null?this:ee.$$s;return le.native==null&&(le.native=d),ae==null&&(ae=d),le.native[L["$[]"]($e(0,-2,!1))]=t("Native").$convert(ae),ae},{$$s:J}):re(T)?Z(J,"define_method",[s],function ee(ae){var le=ee.$$p||d,_e,de,ge=ee.$$s==null?this:ee.$$s,ve=d;return ge.native==null&&(ge.native=d),ee.$$p=null,_e=I(arguments),de=_e,ve=Z(t("Native"),"call",[ge.native,L].concat(V(de)),le.$to_proc()),re(ve)?T.$new(ve.$to_n()):d},{$$arity:-1,$$s:J}):Z(J,"define_method",[s],function ee(ae){var le=ee.$$p||d,_e,de,ge=ee.$$s==null?this:ee.$$s;return ge.native==null&&(ge.native=d),ee.$$p=null,_e=I(arguments),de=_e,Z(t("Native"),"call",[ge.native,L].concat(V(de)),le.$to_proc())},{$$arity:-1,$$s:J})},-2),G($,"$native_reader",function(s){var u,f,p=this;return u=I(arguments),f=u,Z(f,"each",[],function R(L){var T=R.$$s==null?this:R.$$s;return L==null&&(L=d),Z(T,"define_method",[L],function J(){var ee=J.$$s==null?this:J.$$s;return ee.native==null&&(ee.native=d),ee.$Native(ee.native[L])},{$$s:T})},{$$s:p})},-1),G($,"$native_writer",function(s){var u,f,p=this;return u=I(arguments),f=u,Z(f,"each",[],function R(L){var T=R.$$s==null?this:R.$$s;return L==null&&(L=d),Z(T,"define_method",[""+L+"="],function J(ee){var ae=J.$$s==null?this:J.$$s;return ae.native==null&&(ae.native=d),ee==null&&(ee=d),ae.$Native(ae.native[L]=ee)},{$$s:T})},{$$s:p})},-1),G($,"$native_accessor",function(s){var u,f,p=this;return u=I(arguments),f=u,Z(p,"native_reader",V(f)),Z(p,"native_writer",V(f))},-1)}(X[0],X),function(i,a){var $=E(i,"Wrapper"),n=[$].concat(a),t=e.$r(n);return G($,"$initialize",function(s){var u=this;return re(C["$native?"](s))||C.$raise(t("ArgumentError"),""+s.$inspect()+" isn't native"),u.native=s}),G($,"$to_n",O("native")),B($,"$included",function(s){return s.$extend(t("Helpers"))})}(X[0],X),B(c,"$included",function(a){var $=this;return $.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),a.$include(b("Wrapper"))})}(y[0],y),function(h,l){var c=E(h,"Kernel"),X=[c].concat(l),b=e.$r(X);return G(c,"$native?",function(a){return a==null||!a.$$class}),G(c,"$Native",function i(a){i.$$p;var $=this;return i.$$p=null,re(a==null)?d:re($["$native?"](a))?S(b("Native"),"Object").$new(a):re(a["$is_a?"](b("Array")))?Z(a,"map",[],function n(t){var r=n.$$s==null?this:n.$$s;return t==null&&(t=d),r.$Native(t)},{$$s:$}):re(a["$is_a?"](b("Proc")))?Z($,"proc",[],function n(t){var r=n.$$p||d,s,u,f=n.$$s==null?this:n.$$s;return n.$$p=null,s=I(arguments),u=s,f.$Native(Z(a,"call",V(u),r.$to_proc()))},{$$arity:-1,$$s:$}):a}),j(c,"_Array","Array"),G(c,"$Array",function i(a,$){var n=i.$$p||d,t,r,s=this;return i.$$p=null,t=I(arguments,1),r=t,re(s["$native?"](a))?Z(S(b("Native"),"Array"),"new",[a].concat(V(r)),n.$to_proc()).$to_a():s.$_Array(a)},-2)}(y[0],y),function(h,l){var c=w(h,l,"Object"),X=c.$$prototype;return X.native=d,c.$include(S(S("Native"),"Wrapper")),G(c,"$==",function(i){var a=this;return a.native===S("Native").$try_convert(i)}),G(c,"$has_key?",function(i){var a=this;return e.hasOwnProperty.call(a.native,i)}),G(c,"$each",function b(i){var a,$,n=b.$$p||d,t=this;if(b.$$p=null,a=I(arguments),$=a,n!==d){for(var r in t.native)e.yieldX(n,[r,t.native[r]]);return t}else return Z(t,"method_missing",["each"].concat(V($)))},-1),G(c,"$[]",function(i){var a=this,$=a.native[i];return $ instanceof Function?$:S("Native").$call(a.native,i)}),G(c,"$[]=",function(i,a){var $=this,n=d;return n=S("Native").$try_convert(a),re(n===d)?$.native[i]=a:$.native[i]=n}),G(c,"$merge!",function(i){var a=this;i=S("Native").$convert(i);for(var $ in i)a.native[$]=i[$];return a}),G(c,"$respond_to?",function(i,a){var $=this;return a==null&&(a=!1),C.$instance_method("respond_to?").$bind($).$call(i,a)},-2),G(c,"$respond_to_missing?",function(i,a){var $=this;return e.hasOwnProperty.call($.native,i)},-2),G(c,"$method_missing",function b(i,a){var $=b.$$p||d,n,t,r,s=this;return b.$$p=null,n=I(arguments,1),t=n,i.charAt(i.length-1)==="="?(r=[i.$slice(0,A(i.$length(),1)),t["$[]"](0)],Z(s,"[]=",r),r[r.length-1]):Z(S("Native"),"call",[s.native,i].concat(V(t)),$.$to_proc())},-2),G(c,"$nil?",M(!1)),G(c,"$is_a?",function(i){var a=this;return e.is_a(a,i)}),G(c,"$instance_of?",function(i){var a=this;return a.$$class===i}),G(c,"$class",function(){var i=this;return i.$$class}),G(c,"$to_a",function b(i){var a=b.$$p||d,$=this;return b.$$p=null,i==null&&(i=new Map),Z(S(S("Native"),"Array"),"new",[$.native,i],a.$to_proc()).$to_a()},-1),G(c,"$inspect",function(){var i=this;return"#<Native:"+String(i.native)+">"}),j(c,"include?","has_key?"),j(c,"key?","has_key?"),j(c,"kind_of?","is_a?"),j(c,"member?","has_key?")}(o("Native"),o("BasicObject")),function(h,l,c){var X=w(h,l,"Array"),b=[X].concat(c),i=e.$r(b),a=X.$$prototype;return a.named=a.native=a.get=a.block=a.set=a.length=d,X.$include(S(i("Native"),"Wrapper")),X.$include(i("Enumerable")),G(X,"$initialize",function $(n,t){var r=$.$$p||d,s=this,u=d;return $.$$p=null,t==null&&(t=new Map),H(s,k(s,"initialize",$,!1,!0),"initialize",[n],null),s.get=re(u=t["$[]"]("get"))?u:t["$[]"]("access"),s.named=t["$[]"]("named"),s.set=re(u=t["$[]"]("set"))?u:t["$[]"]("access"),s.length=re(u=t["$[]"]("length"))?u:"length",s.block=r,re(s.$length()==null)?s.$raise(i("ArgumentError"),"no length found on the array-like object"):d},-2),G(X,"$each",function $(){var n=$.$$p||d,t=this;if($.$$p=null,!re(n))return t.$enum_for("each");for(var r=0,s=t.$length();r<s;r++)e.yield1(n,t["$[]"](r));return t}),G(X,"$[]",function(n){var t=this,r=d,s=d;return r=P(i("String"),s=n)||P(i("Symbol"),s)?re(t.named)?t.native[t.named](n):t.native[n]:P(i("Integer"),s)?re(t.get)?t.native[t.get](n):t.native[n]:d,re(r)?re(t.block)?t.block.$call(r):t.$Native(r):d}),G(X,"$[]=",function(n,t){var r=this;return re(r.set)?r.native[r.set](n,i("Native").$convert(t)):r.native[n]=i("Native").$convert(t)}),G(X,"$last",function(n){var t=this,r=d,s=d;if(n==null&&(n=d),re(n)){for(r=A(t.$length(),1),s=[];re(g(r,0));)s["$<<"](t["$[]"](r)),r=A(r,1);return s}else return t["$[]"](A(t.$length(),1))},-1),G(X,"$length",function(){var n=this;return n.native[n.length]}),G(X,"$inspect",function(){var n=this;return n.$to_a().$inspect()}),j(X,"to_ary","to_a")}(o("Native"),null,y),function(h,l){var c=w(h,l,"Numeric");return G(c,"$to_n",function(){var b=this;return b.valueOf()})}(y[0],null),function(h,l){var c=w(h,l,"Proc");return G(c,"$to_n",z)}(y[0],null),function(h,l){var c=w(h,l,"String");return G(c,"$to_n",function(){var b=this;return b.valueOf()})}(y[0],null),function(h,l){var c=w(h,l,"Regexp");return G(c,"$to_n",function(){var b=this;return b.valueOf()})}(y[0],null),function(h,l){var c=w(h,l,"MatchData");return G(c,"$to_n",O("matches"))}(y[0],null),function(h,l,c){var X=w(h,l,"Struct"),b=[X].concat(c),i=e.$r(b);return G(X,"$to_n",function(){var $=this,n=d;return n={},Z($,"each_pair",[],function(r,s){return r==null&&(r=d),s==null&&(s=d),n[r]=i("Native").$try_convert(s,s)}),n})}(y[0],null,y),function(h,l,c){var X=w(h,l,"Array"),b=[X].concat(c),i=e.$r(b);return G(X,"$to_n",function(){for(var $=this,n=[],t=0,r=$.length;t<r;t++){var s=$[t];n.push(i("Native").$try_convert(s,s))}return n})}(y[0],null,y),function(h,l){var c=w(h,l,"Boolean");return G(c,"$to_n",function(){var b=this;return b.valueOf()})}(y[0],null),function(h,l){var c=w(h,l,"Time");return G(c,"$to_n",z)}(y[0],null),function(h,l){var c=w(h,l,"NilClass");return G(c,"$to_n",function(){return null})}(y[0],null),re(o("Hash")["$method_defined?"]("_initialize"))||function(h,l,c){var X=w(h,l,"Hash"),b=[X].concat(c),i=e.$r(b);j(X,"_initialize","initialize");function a($,n,t){t&&(t.constructor===void 0||t.constructor===Object||t instanceof Map)?x($,n,i("Hash").$new(t)):t&&t.$$is_array?(t=t.map(function(r){return r&&(r.constructor===void 0||r.constructor===Object||t instanceof Map)?i("Hash").$new(r):X.$Native(r)}),x($,n,t)):x($,n,X.$Native(t))}return G(X,"$initialize",function $(n){var t=$.$$p||d,r=this;if($.$$p=null,n!=null)if(n.constructor===void 0||n.constructor===Object){var s,u;for(s in n)u=n[s],a(r,s,u);return r}else n instanceof Map&&e.hash_each(n,!1,function(f,p){return a(r,f,p),[!1,!1]});return Z(r,"_initialize",[n],t.$to_proc())},-1),G(X,"$to_n",function(){var n=this,t={};return e.hash_each(n,!1,function(r,s){return t[i("Native").$try_convert(r,r)]=i("Native").$try_convert(s,s),[!1,!1]}),t})}(y[0],null,y),function(h,l){var c=w(h,l,"Module");return G(c,"$native_module",function(){var b=this;return e.global[b.$name()]=b})}(y[0],null),function(h,l,c){var X=w(h,l,"Class"),b=[X].concat(c),i=e.$r(b);return G(X,"$native_alias",function($,n){var t=this,r=t.prototype[e.jsid(n)];r||t.$raise(i("NameError").$new("undefined method `"+n+"' for class `"+t.$inspect()+"'",n)),t.prototype[$]=r}),G(X,"$native_class",function(){var $=this;return $.$native_module(),$.new=$.$new})}(y[0],null,y),F.$=F.global=q.$Native(e.global)};(function(e){var x;if(typeof globalThis<"u"?e=globalThis:typeof global<"u"?e=global:typeof window<"u"&&(e=window),e.console==null&&(e.console={}),typeof e.console=="object"?x=e.console:x={},"log"in x||(x.log=function(){}),"warn"in x||(x.warn=x.log),typeof e.Opal<"u")return x.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),e.Opal;var E,B,I,re,Z,C,W,v=e.Opal={};v.global=e,v.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var D=Function.prototype.call,$e=Function.prototype.bind,V=Object.hasOwn||D.bind(Object.prototype.hasOwnProperty),G=Object.setPrototypeOf,O=D.bind(Array.prototype.slice),j=D.bind(Array.prototype.splice),w=4,A=w;function M(){return A+=2,A}v.uid=M,v.id=function(_){return _.$$is_number?_*2+1:(_.$$id==null&&g(_,"$$id",M()),_.$$id)};var H=v.gvars={};v.exit=function(_){H.DEBUG&&x.log("Exited with status "+_)},v.exceptions=[],v.pop_exception=function(_){var m=v.exceptions.pop();m===_||(m?H["!"]=m:H["!"]=E)};function k(_,m){if(_||(_=v.Exception||Error),W&&W.$raise)arguments.length>2?W.$raise(_.$new.apply(_,O(arguments,1))):W.$raise(_,m);else throw _.$new?_.$new(m):new _(m)}var P={value:void 0,enumerable:!1,configurable:!0,writable:!0};function g(_,m,U){typeof _=="string"?_[m]=U:(P.value=U,Object.defineProperty(_,m,P))}v.prop=g,v.defineProperty=v.prop,v.slice=O;var z=v.truthy=function(_){return _!==!1&&E!==_&&_!==void 0&&_!==null&&(!(_ instanceof Boolean)||_.valueOf()===!0)};v.falsy=function(_){return!z(_)},v.type_error=function(_,m,U,te){_=_.$$class,te&&U?(te=te.$$class,k(v.TypeError,"can't convert "+_+" into "+m+" ("+_+"#"+U+" gives "+te+")")):k(v.TypeError,"no implicit conversion of "+_+" into "+m)},v.coerce_to=function(_,m,U,te){var ue;return U==="to_int"&&m===v.Integer&&_.$$is_number?_<0?Math.ceil(_):Math.floor(_):U==="to_str"&&m===v.String&&_.$$is_string||v.is_a(_,m)?_:_["$respond_to?"].$$pristine&&_.$method_missing.$$pristine?(ue=_[de(U)],(ue==null||ue.$$stub)&&v.type_error(_,m),ue.apply(_,te)):(_["$respond_to?"](U)||v.type_error(_,m),te==null&&(te=[]),v.send(_,U,te))},v.respond_to=function(_,m,U){if(_==null||!_.$$class)return!1;U=!!U;var te=_[m];if(_["$respond_to?"].$$pristine){if(typeof te=="function"&&!te.$$stub)return!0;if(!_["$respond_to_missing?"].$$pristine)return v.send(_,_["$respond_to_missing?"],[m.substr(1),U])}else return v.send(_,_["$respond_to?"],[m.substr(1),U])},v.trace_class=!1,v.tracers_for_class=[];function F(_){var m,U,te;for(m=0,U=v.tracers_for_class.length;m<U;m++)te=v.tracers_for_class[m],te.trace_object=_,te.block.$call(te)}function q(_,m){if(_.$$autoload[m].loaded){if(_.$$autoload[m].loaded&&!_.$$autoload[m].required&&_.$$autoload[m].exception)throw _.$$autoload[m].exception}else{_.$$autoload[m].loaded=!0;try{v.Kernel.$require(_.$$autoload[m].path)}catch(U){throw _.$$autoload[m].exception=U,U}if(_.$$autoload[m].required=!0,_.$$const[m]!=null)return _.$$autoload[m].success=!0,_.$$const[m]}}function y(_,m){if(_){if(_.$$const[m]!=null)return _.$$const[m];if(_.$$autoload&&_.$$autoload[m])return q(_,m)}}function o(_,m){var U,te,ue;if(_.length!==0)for(U=0,te=_.length;U<te;U++){if(ue=_[U].$$const[m],ue!=null)return ue;if(_[U].$$autoload&&_[U].$$autoload[m])return q(_[U],m)}}function d(_,m){var U,te,ue;if(_!=null)for(ue=J(_),U=0,te=ue.length;U<te;U++){if(ue[U].$$const&&V(ue[U].$$const,m))return ue[U].$$const[m];if(ue[U].$$autoload&&ue[U].$$autoload[m])return q(ue[U],m)}}function S(_,m){if(_==null||_.$$is_module)return d(I,m)}function h(_,m){return(_||I).$const_missing(m)}v.const_get_local=function(_,m,U){var te;if(_!=null)return _==="::"&&(_=I),!_.$$is_module&&!_.$$is_class&&k(v.TypeError,_.toString()+" is not a class/module"),te=y(_,m),te!=null||U?te:h(_,m)},v.const_get_qualified=function(_,m,U){var te,ue,ce,he=v.const_cache_version;if(m==null)return te=y(I,_),te??v.const_get_qualified(I,_,U);if(_!=null)return _==="::"&&(_=I),!_.$$is_module&&!_.$$is_class&&k(v.TypeError,_.toString()+" is not a class/module"),(ue=_.$$const_cache)==null&&(g(_,"$$const_cache",Object.create(null)),ue=_.$$const_cache),ce=ue[m],ce==null||ce[0]!==he?((te=y(_,m))!=null||(te=d(_,m))!=null,ue[m]=[he,te]):te=ce[1],te!=null||U?te:h(_,m)},v.const_cache_version=1,v.const_get_relative=function(_,m,U){var te=_[0],ue,ce=v.const_cache_version,he,pe;return(he=_.$$const_cache)==null&&(g(_,"$$const_cache",Object.create(null)),he=_.$$const_cache),pe=he[m],pe==null||pe[0]!==ce?((ue=y(te,m))!=null||(ue=o(_,m))!=null||(ue=d(te,m))!=null||(ue=S(te,m))!=null,he[m]=[ce,ue]):ue=pe[1],ue!=null||U?ue:h(te,m)};function l(_,m,U){var te=!0;return(_==null||_==="::")&&(_=I),U.$$is_a_module&&((U.$$name==null||U.$$name===E)&&(U.$$name=m),U.$$base_module==null&&(U.$$base_module=_)),_.$$const=_.$$const||Object.create(null),(m in _.$$const||"$$autoload"in _&&m in _.$$autoload)&&(te=!1),_.$$const[m]=U,_.$$=_.$$const,v.const_cache_version++,_===I&&(v[m]=U),g(_,m,U),te&&_.$const_added&&!_.$const_added.$$pristine&&_.$const_added(m),U}v.const_set=l,v.constants=function(_,m){m==null&&(m=!0);var U,te=[_],ue,ce,he={},pe;for(m&&(te=te.concat(J(_))),m&&_.$$is_module&&(te=te.concat([v.Object]).concat(J(v.Object))),ue=0,ce=te.length;ue<ce&&(U=te[ue],!(_!==I&&U==I));ue++){for(pe in U.$$const)he[pe]=!0;if(U.$$autoload)for(pe in U.$$autoload)he[pe]=!0}return Object.keys(he)},v.const_remove=function(_,m){if(v.const_cache_version++,_.$$const[m]!=null){var U=_.$$const[m];return delete _.$$const[m],U}if(_.$$autoload&&_.$$autoload[m])return delete _.$$autoload[m],E;k(v.NameError,"constant "+_+"::"+_.$name()+" not defined")},v.const_get_relative_factory=function(_){return function(m,U){return v.$$(_,m,U)}},v.$$=v.const_get_relative,v.$$$=v.const_get_qualified,v.$r=v.const_get_relative_factory;function c(_){return _==null?!1:_.$$bridge?_:_.$$super?c(_.$$super):!1}function X(_,m,U){var te,ue;if((ue=c(m))?te=function(){var ye=new($e.apply(ue.$$constructor,ge(null,arguments)));return G(ye,te.$$prototype),ye}:te=function(){},_&&_!==E&&g(te,"displayName","::"+_),g(te,"$$name",_),g(te,"$$constructor",te),g(te,"$$prototype",te.prototype),g(te,"$$const",{}),g(te,"$$is_class",!0),g(te,"$$is_a_module",!0),g(te,"$$super",m),g(te,"$$cvars",{}),g(te,"$$own_included_modules",[]),g(te,"$$own_prepended_modules",[]),g(te,"$$ancestors",[]),g(te,"$$ancestors_cache_version",null),g(te,"$$subclasses",[]),g(te,"$$cloned_from",[]),g(te.$$prototype,"$$class",te),v.Class&&G(te,v.Class.prototype),m!=null){if(G(te.$$prototype,m.$$prototype),U!==!0)if(typeof WeakRef<"u"){var ce,he,pe=[];for(ce=0;ce<m.$$subclasses.length;ce++)he=m.$$subclasses[ce],he.deref()!==void 0&&pe.push(he);pe.push(new WeakRef(te)),m.$$subclasses=pe}else m.$$subclasses.push(te);m.$$meta&&v.build_class_singleton_class(te)}return te}v.allocate_class=X;function b(_,m){var U=y(_,m);if(U)return U.$$is_class||k(v.TypeError,m+" is not a class"),U}function i(_,m){_.$$super!==m&&k(v.TypeError,"superclass mismatch for class "+_.$$name)}v.klass=function(_,m,U){var te;_==null||_=="::"?_=I:!_.$$is_class&&!_.$$is_module&&(_=_.$$class),m!=null&&(!m.hasOwnProperty||m.hasOwnProperty&&!m.hasOwnProperty("$$is_class"))&&(m.constructor&&m.constructor.name=="Function"?(te=m,m=I):k(v.TypeError,"superclass must be a Class ("+(m.constructor&&(m.constructor.name||m.constructor.$$name)||typeof m)+" given)"));var ue=b(_,U);return ue!=null?m&&i(ue,m):(m==null&&(m=I),ue=X(U,m),l(_,U,ue),m.$inherited&&m.$inherited(ue),te&&v.bridge(te,ue)),v.trace_class&&F(ue),ue};function a(_){var m=function(){},U=m;return _&&g(m,"displayName",_+".constructor"),g(U,"$$name",_),g(U,"$$prototype",m.prototype),g(U,"$$const",{}),g(U,"$$is_module",!0),g(U,"$$is_a_module",!0),g(U,"$$cvars",{}),g(U,"$$iclasses",[]),g(U,"$$own_included_modules",[]),g(U,"$$own_prepended_modules",[]),g(U,"$$ancestors",[U]),g(U,"$$ancestors_cache_version",null),g(U,"$$cloned_from",[]),G(U,v.Module.prototype),U}v.allocate_module=a;function $(_,m){var U=y(_,m);return U==null&&_===I&&(U=d(I,m)),U&&!U.$$is_module&&U!==I&&k(v.TypeError,m+" is not a module"),U}v.module=function(_,m){var U;return _==null||_=="::"?_=I:!_.$$is_class&&!_.$$is_module&&(_=_.$$class),U=$(_,m),U==null&&(U=a(m),l(_,m,U)),v.trace_class&&F(U),U},v.get_singleton_class=function(_){return _.$$is_number&&k(v.TypeError,"can't define singleton"),_.$$meta?_.$$meta:_.hasOwnProperty("$$is_class")?v.build_class_singleton_class(_):_.hasOwnProperty("$$is_module")?v.build_module_singleton_class(_):v.build_object_singleton_class(_)};function n(_,m){_.hasOwnProperty("$$meta")?_.$$meta=m:g(_,"$$meta",m),_.$$frozen?_.$$meta.$freeze():G(_,m.$$prototype)}v.build_class_singleton_class=function(_){if(_.$$meta)return _.$$meta;var m=_===B?Z:v.get_singleton_class(_.$$super),U=X(null,m,!0);return g(U,"$$is_singleton",!0),g(U,"$$singleton_of",_),n(_,U),g(_,"$$class",v.Class),U},v.build_module_singleton_class=function(_){if(_.$$meta)return _.$$meta;var m=X(null,v.Module,!0);return g(m,"$$is_singleton",!0),g(m,"$$singleton_of",_),n(_,m),g(_,"$$class",v.Module),m},v.build_object_singleton_class=function(_){var m=_.$$class,U=X(E,m,!0);return g(U,"$$is_singleton",!0),g(U,"$$singleton_of",_),delete U.$$prototype.$$class,n(_,U),U},v.is_method=function(_){return _[0]==="$"&&_[1]!=="$"},v.instance_methods=function(_){for(var m=Object.create(null),U=[],te=J(_),ue=0,ce=te.length;ue<ce;ue++){var he=te[ue],pe=he.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ze=ye.length;we<ze;we++){var Ee=ye[we];if(!m[Ee]){if(v.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);U.push(qe)}}m[Ee]=!0}}}return U},v.own_instance_methods=function(_){var m=[],U=_.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);for(var te=Object.getOwnPropertyNames(U),ue=0,ce=te.length;ue<ce;ue++){var he=te[ue];if(v.is_method(he)){var pe=U[he];if(!pe.$$stub){var ye=he.slice(1);m.push(ye)}}}return m},v.methods=function(_){return v.instance_methods(_.$$meta||_.$$class)},v.own_methods=function(_){return _.$$meta?v.own_instance_methods(_.$$meta):[]},v.receiver_methods=function(_){var m=v.get_singleton_class(_),U=v.own_instance_methods(m),te=v.own_instance_methods(m.$$super);return U.concat(te)},v.class_variables=function(_){var m=J(_),U,te=m.length,ue={};for(U=te-1;U>=0;U--){var ce=m[U];for(var he in ce.$$cvars)ue[he]=ce.$$cvars[he]}return ue},v.class_variable_set=function(_,m,U){var te=J(_),ue,ce=te.length;for(ue=ce-2;ue>=0;ue--){var he=te[ue];if(V(he.$$cvars,m))return he.$$cvars[m]=U,U}return _.$$cvars[m]=U,U},v.class_variable_get=function(_,m,U){if(V(_.$$cvars,m))return _.$$cvars[m];var te=J(_),ue,ce=te.length;for(ue=0;ue<ce;ue++){var he=te[ue];if(V(he.$$cvars,m))return he.$$cvars[m]}return U||k(v.NameError,"uninitialized class variable "+m+" in "+_.$name()),E};function t(_){return _.hasOwnProperty("$$iclass")&&_.hasOwnProperty("$$root")}function r(_){for(var m=[],U,te=Object.getPrototypeOf(_.$$prototype);te&&!te.hasOwnProperty("$$class");)U=L(te),U&&m.push(U),te=Object.getPrototypeOf(te);return m}function s(_){var m=[],U,te=Object.getPrototypeOf(_.$$prototype);if(_.$$prototype.hasOwnProperty("$$dummy"))for(;te&&te!==_.$$prototype.$$define_methods_on;)U=L(te),U&&m.push(U),te=Object.getPrototypeOf(te);return m}v.append_features=function(_,m){var U=J(_),te=[];U.indexOf(m)!==-1&&k(v.ArgumentError,"cyclic include detected");for(var ue=0,ce=U.length;ue<ce;ue++){var he=U[ue],pe=f(he);g(pe,"$$included",!0),te.push(pe)}var ye=J(m),we=R(te),ze,Ee;if(ye.indexOf(_)===-1)ze=m.$$prototype,Ee=Object.getPrototypeOf(m.$$prototype);else{for(var xe=m.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===_&&t(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var Ae=Object.getPrototypeOf(qe);Ae.hasOwnProperty("$$iclass")&&!t(Ae);)Ae=Object.getPrototypeOf(Ae);ze=xe,Ee=Ae}else ze=m.$$prototype,Ee=Object.getPrototypeOf(m.$$prototype)}G(ze,we.first),G(we.last,Ee),m.$$own_included_modules=r(m),v.const_cache_version++},v.prepend_features=function(_,m){var U=J(_),te=[];U.indexOf(m)!==-1&&k(v.ArgumentError,"cyclic prepend detected");for(var ue=0,ce=U.length;ue<ce;ue++){var he=U[ue],pe=f(he);g(pe,"$$prepended",!0),te.push(pe)}var ye=R(te),we=m.$$prototype,ze=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=p(m),u(m),g(we,"$$dummy",!0),g(we,"$$define_methods_on",Ee),G(we,Ee),G(Ee,ze));var Ae=J(m);if(Ae.indexOf(_)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else k(v.RuntimeError,"Prepending a module multiple times is not supported");G(xe,ye.first),G(ye.last,qe),m.$$own_prepended_modules=s(m),v.const_cache_version++};function u(_){for(var m=_.$$prototype,U=Object.getOwnPropertyNames(m),te=0;te<U.length;te++){var ue=U[te];v.is_method(ue)&&delete m[ue]}}function f(_){var m=p(_);return _.$$is_module&&_.$$iclasses.push(m),m}function p(_){var m={},U=_.$$prototype;U.hasOwnProperty("$$dummy")&&(U=U.$$define_methods_on);var te=Object.getOwnPropertyNames(U),ue=te.length,ce;for(ce=0;ce<ue;ce++){var he=te[ce];g(m,he,U[he])}return g(m,"$$iclass",!0),g(m,"$$module",_),m}function R(_){var m=_.length,U=_[0];if(g(U,"$$root",!0),m===1)return{first:U,last:U};for(var te=U,ue=1;ue<m;ue++){var ce=_[ue];G(te,ce),te=ce}return{first:_[0],last:_[m-1]}}v.bridge=function(_,m){_.hasOwnProperty("$$bridge")&&k(v.ArgumentError,"already bridged"),g(_,"$$bridge",m),G(_.prototype,(m.$$super||v.Object).$$prototype),g(m,"$$prototype",_.prototype),g(m.$$prototype,"$$class",m),g(m,"$$constructor",_),g(m,"$$bridge",!0)};function L(_){if(!_.hasOwnProperty("$$dummy")){if(_.hasOwnProperty("$$iclass"))return _.$$module;if(_.hasOwnProperty("$$class"))return _.$$class}}function T(_){return _.$$own_prepended_modules.concat([_]).concat(_.$$own_included_modules)}function J(_){if(!_)return[];if(_.$$ancestors_cache_version===v.const_cache_version)return _.$$ancestors;var m=[],U,te,ue;for(U=0,te=T(_),ue=te.length;U<ue;U++)m.push(te[U]);if(_.$$super)for(U=0,te=J(_.$$super),ue=te.length;U<ue;U++)m.push(te[U]);return _.$$ancestors_cache_version=v.const_cache_version,_.$$ancestors=m,m}v.ancestors=J,v.included_modules=function(_){for(var m=[],U=null,te=Object.getPrototypeOf(_.$$prototype);te&&Object.getPrototypeOf(te);te=Object.getPrototypeOf(te))U=L(te),U&&U.$$is_module&&te.$$iclass&&te.$$included&&m.push(U);return m},v.add_stubs=function(_){var m=v.BasicObject.$$prototype,U,te;_=_.split(",");for(var ue=0,ce=_.length;ue<ce;ue++)U=de(_[ue]),te=m[U],(te==null||te.$$stub)&&v.add_stub_for(m,U)},v.add_stub_for=function(_,m){g(_,m,v.stub_for(m))},v.stub_for=function(_){function m(){return this.$method_missing.$$p=m.$$p,m.$$p=null,this.$method_missing.apply(this,ge(_.slice(1),arguments))}return m.$$stub=!0,m},v.ac=function(_,m,U,te){var ue="";U.$$is_a_module?ue+=U.$$name+".":ue+=U.$$class.$$name+"#",ue+=te,k(v.ArgumentError,"["+ue+"] wrong number of arguments (given "+_+", expected "+m+")")},v.block_ac=function(_,m,U){var te="`block in "+U+"'";k(v.ArgumentError,te+": wrong number of arguments (given "+_+", expected "+m+")")};function ee(_){return _.hasOwnProperty("$$meta")&&_.$$meta!==null?J(_.$$meta):J(_.$$class)}v.find_super=function(_,m,U,te,ue){var ce=de(m),he,pe,ye,we,ze=-1,Ee;for(he=ee(_),we=U.$$owner,Ee=0;Ee<he.length;Ee++)if(pe=he[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ze=Ee;break}for(Ee=ze+1;Ee<he.length;Ee++){pe=he[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(ce)){ye=xe[ce];break}}return!te&&ye&&ye.$$stub&&_.$method_missing.$$pristine&&k(v.NoMethodError,"super: no superclass method `"+m+"' for "+_,m),ye.$$stub&&!ue?null:ye},v.find_block_super=function(_,m,U,te,ue){var ce=m;return U||k(v.RuntimeError,"super called outside of method"),ue&&U.$$define_meth&&k(v.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),U.$$def&&(ce=U.$$jsid),v.find_super(_,ce,U,te)},v.find_super_dispatcher=v.find_super,v.find_iter_super_dispatcher=v.find_block_super;function ae(_,m,U){try{_(m)}catch(te){if(te===U)return U.$v;throw te}}v.yield1=function(_,m){typeof _!="function"&&k(v.LocalJumpError,"no block given");var U=_.$$has_top_level_mlhs_arg,te=_.$$has_trailing_comma_in_args,ue=_.$$is_lambda&&_.$$ret;return(_.length>1||(U||te)&&_.length===1)&&(m=v.to_ary(m)),(_.length>1||te&&_.length===1)&&m.$$is_array?ue?ae(_.apply.bind(_,null),m,_.$$ret):_.apply(null,m):ue?ae(_,m,_.$$ret):_(m)},v.yieldX=function(_,m){return typeof _!="function"&&k(v.LocalJumpError,"no block given"),_.length>1&&m.length===1&&m[0].$$is_array&&(m=m[0]),_.$$is_lambda&&_.$$ret?ae(_.apply.bind(_,null),m,_.$$ret):_.apply(null,m)},v.rescue=function(_,m){for(var U=0;U<m.length;U++){var te=m[U];if(te.$$is_array){var ue=v.rescue(_,te);if(ue)return ue}else if(te===v.JS.Error||te["$==="](_))return te}return null},v.is_a=function(_,m){if(m!=null&&_.$$meta===m||_.$$class===m)return!0;if(_.$$is_number&&m.$$is_number_class)return m.$$is_integer_class?_%1===0:!0;var U=J(_.$$is_class?v.get_singleton_class(_):_.$$meta||_.$$class);return U.indexOf(m)!==-1},v.to_hash=function(_){if(_.$$is_hash)return _;if(_["$respond_to?"]("to_hash",!0)){var m=_.$to_hash();if(m.$$is_hash)return m;k(v.TypeError,"Can't convert "+_.$$class+" to Hash ("+_.$$class+"#to_hash gives "+m.$$class+")")}else k(v.TypeError,"no implicit conversion of "+_.$$class+" into Hash")},v.to_ary=function(_){if(_.$$is_array)return _;if(_["$respond_to?"]("to_ary",!0)){var m=_.$to_ary();if(m===E)return[_];if(m.$$is_array)return m;k(v.TypeError,"Can't convert "+_.$$class+" to Array ("+_.$$class+"#to_ary gives "+m.$$class+")")}else return[_]},v.to_a=function(_){if(_.$$is_array)return _.slice();if(_["$respond_to?"]("to_a",!0)){var m=_.$to_a();if(m===E)return[_];if(m.$$is_array)return m;k(v.TypeError,"Can't convert "+_.$$class+" to Array ("+_.$$class+"#to_a gives "+m.$$class+")")}else return[_]},v.extract_kwargs=function(_){var m=_[_.length-1];if(m!=null&&v.respond_to(m,"$to_hash",!0))return j(_,_.length-1),m},v.kwrestargs=function(_,m){var U=new Map;return v.hash_each(_,!1,function(te,ue){return m[te]||v.hash_put(U,te,ue),[!1,!1]}),U};function le(_,m){typeof m=="number"?_.$$arity=m:typeof m=="object"&&Object.assign(_,m)}var _e=new Map;function de(_){var m=_e.get(_);return m||(m="$"+_,_e.set(_,m)),m}v.jsid=de;function ge(_,m){return m.$$is_array||(m=O(m)),[_].concat(m)}v.send=function(_,m,U,te,ue){var ce;return typeof m=="function"?(ce=m,m=null):typeof m=="string"?ce=_[de(m)]:k(v.NameError,"Passed method should be a string or a function"),v.send2(_,ce,m,U,te,ue)},v.send2=function(_,m,U,te,ue,ce){return m==null&&U!=null&&_.$method_missing&&(m=_.$method_missing,te=ge(U,te)),le(ue,ce),typeof ue=="function"&&(m.$$p=ue),m.apply(_,te)},v.refined_send=function(_,m,U,te,ue,ce){var he,pe,ye,we,ze,Ee,xe,qe,Ae,ke;for(we=ee(m),he=0;he<we.length;he++)for(ze=v.id(we[he]),pe=0;pe<_.length;pe++)for(Ee=_[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ze]>"u")&&(Ae=qe[ze],typeof Ae.$$prototype[de(U)]<"u")))return ke=Ae.$$prototype[de(U)],v.send2(m,ke,U,te,ue,ce);return v.send(m,U,te,ue,ce)},v.lambda=function(_,m){return _.$$is_lambda=!0,le(_,m),_},v.def=function(_,m,U,te){return le(U,te),_===v.top?v.defn(v.Object,m,U):!_.$$eval&&_.$$is_a_module?v.defn(_,m,U):v.defs(_,m,U)},v.defn=function(_,m,U){N(_),U.displayName=m,U.$$owner=_;var te=m.substr(1),ue=_.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),g(ue,m,U),_.$$is_module){_.$$module_function&&v.defs(_,m,U);for(var ce=0,he=_.$$iclasses,pe=he.length;ce<pe;ce++){var ye=he[ce];g(ye,m,U)}}var we=_.$$singleton_of;return _.$method_added&&!_.$method_added.$$stub&&!we?_.$method_added(te):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(te),te},v.defs=function(_,m,U,te){return le(U,te),(_.$$is_string||_.$$is_number)&&k(v.TypeError,"can't define singleton"),v.defn(v.get_singleton_class(_),m,U)};function ve(_,m){if(_.$$is_module)for(var U=0,te=_.$$iclasses,ue=te.length;U<ue;U++){var ce=te[U];delete ce[m]}}v.rdef=function(_,m){V(_.$$prototype,m)||k(v.NameError,"method '"+m.substr(1)+"' not defined in "+_.$name()),delete _.$$prototype[m],ve(_,m),_.$$is_singleton?_.$$prototype.$singleton_method_removed&&!_.$$prototype.$singleton_method_removed.$$stub&&_.$$prototype.$singleton_method_removed(m.substr(1)):_.$method_removed&&!_.$method_removed.$$stub&&_.$method_removed(m.substr(1))},v.udef=function(_,m){(!_.$$prototype[m]||_.$$prototype[m].$$stub)&&k(v.NameError,"method '"+m.substr(1)+"' not defined in "+_.$name()),v.add_stub_for(_.$$prototype,m),ve(_,m),_.$$is_singleton?_.$$prototype.$singleton_method_undefined&&!_.$$prototype.$singleton_method_undefined.$$stub&&_.$$prototype.$singleton_method_undefined(m.substr(1)):_.$method_undefined&&!_.$method_undefined.$$stub&&_.$method_undefined(m.substr(1))};function me(_){return typeof _=="function"&&!_.$$stub}v.alias=function(_,m,U){var te=de(m),ue=de(U),ce,he;if(typeof _.$$prototype>"u"&&(_=v.Object),ce=_.$$prototype[ue],_.$$eval)return v.alias(v.get_singleton_class(_),m,U);if(!me(ce)){for(var pe=_.$$super;typeof ce!="function"&&pe;)ce=pe[ue],pe=pe.$$super;!me(ce)&&_.$$is_module&&(ce=v.Object.$$prototype[ue]),me(ce)||k(v.NameError,"undefined method `"+U+"' for class `"+_.$name()+"'")}return ce.$$alias_of&&(ce=ce.$$alias_of),he=v.wrap_method_body(ce),he.displayName=m,he.$$alias_of=ce,he.$$alias_name=m,v.defn(_,te,he),_},v.wrap_method_body=function(_){var m=function(){var U=m.$$p;return m.$$p=null,v.send(this,_,arguments,U)};try{Object.defineProperty(m,"length",{value:_.length})}catch{}return m.$$arity=_.$$arity==null?_.length:_.$$arity,m.$$parameters=_.$$parameters,m.$$source_location=_.$$source_location,m},v.alias_gvar=function(_,m){return Object.defineProperty(H,_,{configurable:!0,enumerable:!0,get:function(){return H[m]},set:function(U){H[m]=U}}),E},v.alias_native=function(_,m,U){var te=de(m),ue=_.$$prototype[U];return(typeof ue!="function"||ue.$$stub)&&k(v.NameError,"undefined native method `"+U+"' for class `"+_.$name()+"'"),v.defn(_,te,ue),_},v.hash_init=function(_){x.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},v.hash_clone=function(_,m){return m.$$none=_.$$none,m.$$proc=_.$$proc,v.hash_each(_,m,function(U,te){return v.hash_put(m,U,te),[!1,m]})},v.hash_put=function(_,m,U){var te=typeof m;if(te==="string"||te==="symbol"||te==="number"||te==="boolean"||te==="bigint")_.set(m,U);else if(m.$$is_string)_.set(m.valueOf(),U);else{_.$$keys||(_.$$keys=new Map);var ue=m.$$is_string?m.valueOf():_.$$by_identity?v.id(m):m.$hash(),ce=_.$$keys;if(!ce.has(ue)){ce.set(ue,[m]),_.set(m,U);return}for(var he=ce.get(ue),pe,ye=0;ye<he.length;ye++)if(pe=he[ye],m===pe||m["$eql?"](pe)){_.set(pe,U);return}he.push(m),_.set(m,U)}},v.hash_get=function(_,m){var U=typeof m;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return _.get(m);if(_.$$keys){var te=m.$$is_string?m.valueOf():_.$$by_identity?v.id(m):m.$hash(),ue=_.$$keys.get(te),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],m===ce||m["$eql?"](ce))return _.get(ce)}else if(m.$$is_string)return _.get(te)}else if(m.$$is_string)return _.get(m.valueOf())};function be(_,m){var U=_.get(m);if(U!==void 0)return _.delete(m),U}v.hash_delete=function(_,m){var U=typeof m;if(U==="string"||U==="symbol"||U==="number"||U==="boolean"||U==="bigint")return be(_,m);if(_.$$keys){var te=m.$$is_string?m.valueOf():_.$$by_identity?v.id(m):m.$hash(),ue=_.$$keys.get(te),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],m===ce||m["$eql?"](ce))return ue.splice(he,1),ue.length===0&&_.$$keys.delete(te),be(_,ce)}else if(m.$$is_string)return be(_,te)}else if(m.$$is_string)return be(_,m.valueOf())},v.hash_rehash=function(_){var m=_.$$keys;return m&&m.clear(),v.hash_each(_,!1,function(U,te){var ue=typeof U;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var ce=U.$$is_string?U.valueOf():_.$$by_identity?v.id(U):U.$hash();if(m||(_.$$keys=m=new Map),!m.has(ce))return m.set(ce,[U]),[!1,!1];for(var he=m.get(ce),pe=he.length===1?he:O(he),ye,we=0;we<pe.length;we++)ye=pe[we],(U===ye||U["$eql?"](ye))&&(he.splice(he.indexOf(ye),1),_.delete(ye));return he.push(U),[!1,!1]}),_},v.hash=function(){var _=arguments.length,m,U,te,ue,ce,he;if(_===1&&arguments[0].$$is_hash)return arguments[0];if(U=new Map,_===1)if(m=arguments[0],arguments[0].$$is_array){for(ue=m.length,te=0;te<ue;te++)m[te].length!==2&&k(v.ArgumentError,"value not of length 2: "+m[te].$inspect()),ce=m[te][0],he=m[te][1],v.hash_put(U,ce,he);return U}else{m=arguments[0];for(ce in m)V(m,ce)&&(he=m[ce],v.hash_put(U,ce,he));return U}for(_%2!==0&&k(v.ArgumentError,"odd number of arguments for Hash"),te=0;te<_;te+=2)ce=arguments[te],he=arguments[te+1],v.hash_put(U,ce,he);return U},v.hash2=function(_,m){x.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var U=new Map,te=0,ue=_.length;te<ue;te++)U.set(_[te],m[_[te]]);return U},v.hash_each=function(_,m,U){for(var te,ue=0,ce,he=Array.from(_.entries()),pe=he.length;ue<pe;ue++)if(ce=he[ue],te=U(ce[0],ce[1]),te[0])return te[1];return te?te[1]:m},v.range=function(_,m,U){var te=new v.Range;return te.begin=_,te.end=m,te.excl=U,te};var ie=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];v.ivar=function(_){return ie.indexOf(_)!==-1&&(_+="$"),_};function N(_){_.$$frozen&&k(v.FrozenError,"can't modify frozen "+_.$class()+": "+_,new Map([["receiver",_]]))}v.deny_frozen_access=N,v.freeze=function(_){return g(_,"$$frozen",!0),_.hasOwnProperty("$$id")||g(_,"$$id",M()),_.hasOwnProperty("$$meta")?_.$$meta.$freeze():g(_,"$$meta",null),_.hasOwnProperty("$$comparable")||g(_,"$$comparable",null),Object.seal(_),_};function K(_,m){var U=Object.getOwnPropertyNames(_),te=U.length,ue,ce,he;for(ue=0;ue<te;ue++)ce=U[ue],ce[0]!=="$"&&(he=Object.getOwnPropertyDescriptor(_,ce),he&&he.enumerable&&m(ce,he))}v.each_ivar=K,v.freeze_props=function(_){var m={get:null,set:function(U){N(_)},enumerable:!0};K(_,function(U,te){te.writable&&(m.get=se(te.value),Object.defineProperty(_,U,m))})},v.escape_regexp=function(_){return _.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},v.global_regexp=function(_){return _.global?_:(_.$$g==null?_.$$g=new RegExp(_.source,(_.multiline?"gm":"g")+(_.ignoreCase?"i":"")):_.$$g.lastIndex=null,_.$$g)},v.global_multiline_regexp=function(_){var m,U;return _.global&&_.multiline?_:(U="gm"+(_.ignoreCase?"i":""),_.multiline?(_.$$g==null&&(_.$$g=new RegExp(_.source,U)),m=_.$$g):(_.$$gm==null&&(_.$$gm=new RegExp(_.source,U)),m=_.$$gm),m.lastIndex=null,m)},v.regexp=function(_,m){for(var U,te=typeof m<"u"&&m&&m.indexOf("i")>=0,ue=0,ce=_.length;ue<ce;ue++)U=_[ue],U instanceof RegExp&&(U.ignoreCase!==te&&v.Kernel.$warn("ignore case doesn't match for "+U.source.$inspect(),new Map([["uplevel",1]])),U=U.source),U===""&&(U="(?:"+U+")"),_[ue]=U;return m?new RegExp(_.join(""),m):new RegExp(_.join(""))},v.modules={},v.loaded_features=["corelib/runtime"],v.current_dir=".",v.require_table={"corelib/runtime":!0},v.normalize=function(_){var m,U,te=[],ue="/";v.current_dir!=="."&&(_=v.current_dir.replace(/\/*$/,"/")+_),_=_.replace(/^\.\//,""),_=_.replace(/\.(rb|opal|js)$/,""),m=_.split(ue);for(var ce=0,he=m.length;ce<he;ce++)U=m[ce],U!==""&&(U===".."?te.pop():te.push(U));return te.join(ue)},v.loaded=function(_){var m,U,te;for(m=0,U=_.length;m<U;m++)te=v.normalize(_[m]),!v.require_table[te]&&(v.loaded_features.push(te),v.require_table[te]=!0)},v.load_normalized=function(_){v.loaded([_]);var m=v.modules[_];if(m){var U=m(v);if(typeof Promise<"u"&&U instanceof Promise)return U.then(se(!0))}else{var te=v.config.missing_require_severity,ue="cannot load such file -- "+_;te==="error"?k(v.LoadError,ue):te==="warning"&&x.warn("WARNING: LoadError: "+ue)}return!0},v.load=function(_){return _=v.normalize(_),v.load_normalized(_)},v.require=function(_){return _=v.normalize(_),v.require_table[_]?!1:v.load_normalized(_)},v.encodings=Object.create(null),v.set_encoding=function(_,m,U){typeof U>"u"&&(U="encoding"),(typeof _=="string"||_.$$frozen===!0)&&k(v.FrozenError,"can't modify frozen String");var te=v.find_encoding(m);return te===_[U]||(_[U]=te),_},v.find_encoding=function(_){var m=v.encodings,U=m[_]||m[_.toUpperCase()];return U||k(v.ArgumentError,"unknown encoding name - "+_),U},v.enc=function(_,m){var U=new String(_);return U=v.set_encoding(U,m),U.internal_encoding=U.encoding,U},v.binary=function(_){var m=new String(_);return v.set_encoding(m,"binary","internal_encoding")},v.last_promise=null,v.promise_unhandled_exception=!1,v.queue=function(_){if(v.last_promise)return v.last_promise=v.last_promise.then(function(){if(!v.promise_unhandled_exception)return _(v)}).catch(function(U){v.respond_to(U,"$full_message")&&(U=U.$full_message()),x.error(U),v.promise_unhandled_exception=!0,v.exit(1)}),v.last_promise;var m=_(v);return typeof Promise=="function"&&typeof m=="object"&&m instanceof Promise&&(v.last_promise=m),m};function Y(_,m){return typeof _=="number"&&typeof m=="number"}v.rb_plus=function(_,m){return Y(_,m)?_+m:_["$+"](m)},v.rb_minus=function(_,m){return Y(_,m)?_-m:_["$-"](m)},v.rb_times=function(_,m){return Y(_,m)?_*m:_["$*"](m)},v.rb_divide=function(_,m){return Y(_,m)?_/m:_["$/"](m)},v.rb_lt=function(_,m){return Y(_,m)?_<m:_["$<"](m)},v.rb_gt=function(_,m){return Y(_,m)?_>m:_["$>"](m)},v.rb_le=function(_,m){return Y(_,m)?_<=m:_["$<="](m)},v.rb_ge=function(_,m){return Y(_,m)?_>=m:_["$>="](m)};function Q(_,m){return typeof _=="number"&&typeof m=="number"||typeof _=="string"&&typeof m=="string"}function ne(_,m){return Q(_,m)?_===m:z(_["$=="](m))}v.eqeq=ne,v.eqeqeq=function(_,m){return Q(_,m)?_===m:z(_["$==="](m))},v.neqeq=function(_,m){return Q(_,m)?_!==m:z(_["$!="](m))},v.not=function(_){return _==null||_===!1||E===_?!0:_===!0||_["$!"].$$pristine?!1:z(_["$!"]())};function se(_){return function(){return _}}v.return_val=se,v.return_self=function(){return this},v.return_ivar=function(_){return function(){return this[_]==null?E:this[_]}},v.assign_ivar=function(_){return function(m){return N(this),this[_]=m}},v.assign_ivar_val=function(_,m){return function(){return N(this),this[_]=m}},v.ensure_kwargs=function(_){if(_==null)return new Map;if(_.$$is_hash)return _;k(v.ArgumentError,"expected kwargs")},v.get_kwarg=function(_,m){var U=v.hash_get(_,m);return U===void 0&&k(v.ArgumentError,"missing keyword: "+m),U},v.large_array_unpack=function(_){var m=_.split(","),U=m.length,te;for(te=0;te<U;te++)switch(m[te][0]){case void 0:m[te]=E;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":m[te]=+m[te]}return m},v.opal32_init=se(1332765036);function oe(_,m){return _<<m|_>>>32-m}v.opal32_add=function(_,m){return _^=m,_=oe(_,1),_},v.BasicObject=B=X("BasicObject",null),v.Object=I=X("Object",v.BasicObject),v.Module=re=X("Module",v.Object),v.Class=Z=X("Class",v.Module),v.Opal=C=a("Opal"),v.Kernel=W=a("Kernel"),G(v.BasicObject,v.Class.$$prototype),G(v.Object,v.Class.$$prototype),G(v.Module,v.Class.$$prototype),G(v.Class,v.Class.$$prototype),B.$$const.BasicObject=B,l(I,"BasicObject",B),l(I,"Object",I),l(I,"Module",re),l(I,"Class",Z),l(I,"Opal",C),l(I,"Kernel",W),B.$$class=Z,I.$$class=Z,re.$$class=Z,Z.$$class=Z,C.$$class=re,W.$$class=re,g(I.$$prototype,"toString",function(){var _=this.$to_s();return _.$$is_string&&typeof _=="object"?_.valueOf():_}),g(I.$$prototype,"$require",v.require),v.top=new I,v.top.$to_s=v.top.$inspect=se("main"),v.top.$define_method=fe;function fe(){var _=fe.$$p;return fe.$$p=null,v.send(I,"define_method",arguments,_)}v.NilClass=X("NilClass",v.Object),l(I,"NilClass",v.NilClass),E=v.nil=new v.NilClass,E.$$id=w,E.call=E.apply=function(){k(v.LocalJumpError,"no block given")},E.$$frozen=!0,E.$$comparable=!1,Object.seal(E),v.thrower=function(_){var m={$thrower_type:_,$throw:function(U,te){throw U==null&&(U=E),this.is_orphan&&!te&&k(v.LocalJumpError,"unexpected "+_,U,_.$to_sym()),this.$v=U,this},is_orphan:!1};return m},Object.defineProperty(H,"@",{enumerable:!0,configurable:!0,get:function(){return z(H["!"])?H["!"].$backtrace():E},set:function(_){z(H["!"])?H["!"].$set_backtrace(_):k(v.ArgumentError,"$! not set")}}),v.t_eval_return=v.thrower("return"),TypeError.$$super=Error,v.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function(e){var x=e.type_error,E=e.coerce_to,B=e.module,I=e.defs,re=e.slice,Z=e.eqeqeq,C=e.Kernel,W=e.truthy,v=e.Opal,D=e.nil,$e=e.$$$;return e.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(V){var G=B(V,"Opal");I(G,"$bridge",function(w,A){return e.bridge(w,A)}),I(G,"$coerce_to!",function(w,A,M,H){var k,P,g=D;return k=re(arguments,3),P=k,g=E(w,A,M,P),Z(A,g)||C.$raise(x(w,A,M,g)),g},-4),I(G,"$coerce_to?",function(w,A,M,H){var k,P,g=D;return k=re(arguments,3),P=k,!W(w["$respond_to?"](M))||(g=E(w,A,M,P),W(g["$nil?"]()))?D:(Z(A,g)||C.$raise(x(w,A,M,g)),g)},-4),I(G,"$try_convert",function(w,A,M){return Z(A,w)?w:W(w["$respond_to?"](M))?w.$__send__(M):D}),I(G,"$compare",function(w,A){var M=D;return M=w["$<=>"](A),W(M===D)&&C.$raise($e("ArgumentError"),"comparison of "+w.$class()+" with "+A.$class()+" failed"),M}),I(G,"$destructure",function(w){if(w.length==1)return w[0];if(w.$$is_array)return w;for(var A=new Array(w.length),M=0,H=A.length;M<H;M++)A[M]=w[M];return A}),I(G,"$respond_to?",function(w,A,M){return M==null&&(M=!1),w==null||!w.$$class?!1:w["$respond_to?"](A,M)},-3),I(G,"$instance_variable_name!",function(w){return w=v["$coerce_to!"](w,$e("String"),"to_str"),W(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(w))||C.$raise($e("NameError").$new("'"+w+"' is not allowed as an instance variable name",w)),w}),I(G,"$class_variable_name!",function(w){return w=v["$coerce_to!"](w,$e("String"),"to_str"),W(w.length<3||w.slice(0,2)!=="@@")&&C.$raise($e("NameError").$new("`"+w+"' is not allowed as a class variable name",w)),w}),I(G,"$const_name?",function(w){return typeof w!="string"&&(w=v["$coerce_to!"](w,$e("String"),"to_str")),w[0]===w[0].toUpperCase()}),I(G,"$const_name!",function(w){var A=this;return W($e("::","String","skip_raise")?"constant":D)&&(w=v["$coerce_to!"](w,$e("String"),"to_str")),(!w||w[0]!=w[0].toUpperCase())&&A.$raise($e("NameError"),"wrong constant name "+w),w}),I(G,"$pristine",function(w,A){var M,H;M=re(arguments,1),H=M;for(var k,P,g=H.length-1;g>=0;g--)k=H[g],P=w.$$prototype[e.jsid(k)],P&&!P.$$stub&&(P.$$pristine=!0);return D},-2);var O=[];return I(G,"$inspect",function(w){var A=D,M=!1;return function(){try{try{return w===null?"null":w===void 0?"undefined":typeof w.$$class>"u"?Object.prototype.toString.apply(w):typeof w.$inspect!="function"||w.$inspect.$$stub||O.indexOf(w.$__id__())!==-1?"#<"+w.$$class+":0x"+w.$__id__().$to_s(16)+">":(O.push(w.$__id__()),M=!0,w.$inspect())}catch(H){if(e.rescue(H,[$e("Exception")])){A=H;try{return"#<"+w.$$class+":0x"+w.$__id__().$to_s(16)+">"}finally{e.pop_exception(H)}}else throw H}}finally{M&&O.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function(e){var x=e.truthy,E=e.coerce_to,B=e.const_set,I=e.Object,re=e.return_ivar,Z=e.assign_ivar,C=e.ivar,W=e.deny_frozen_access,v=e.freeze,D=e.prop,$e=e.jsid,V=e.each_ivar,G=e.klass,O=e.Opal,j=e.Kernel,w=e.defs,A=e.send,M=e.def,H=e.eqeqeq,k=e.Module,P=e.rb_lt,g=e.rb_gt,z=e.slice,F=e.to_a,q=e.return_val,y=e.eqeq,o=e.not,d=e.rb_le,S=e.range,h=e.send2,l=e.find_super,c=e.alias,X=[],b=e.nil,i=e.$$$;return e.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(a,$,n){var t=G(a,$,"Module"),r=[t].concat(n),s=e.$r(r);function u(L){if(L.$$is_string)return L;var T=O.$try_convert(L,i("String"),"to_str");if(T.$$is_string)return T;T===b?j.$raise(i("TypeError"),""+L+" is not a symbol nor a string"):j.$raise(i("TypeError"),"can't convert "+L.$class()+" to String ("+L.$class()+"#to_str gives "+T.$class())}w(t,"$allocate",function(){var T=this,J=e.allocate_module(b,function(){});return T!==e.Module&&Object.setPrototypeOf(J,T.$$prototype),J}),M(t,"$initialize",function L(){var T=L.$$p||b,J=this;return L.$$p=null,T!==b?A(J,"module_eval",[],T.$to_proc()):b}),M(t,"$===",function(T){var J=this;return x(T==null)?!1:e.is_a(T,J)}),M(t,"$<",function(T){var J=this;H(k,T)||j.$raise(i("TypeError"),"compared with non class/module");var ee=J,ae,le,_e;if(ee===T)return!1;for(le=0,ae=e.ancestors(J),_e=ae.length;le<_e;le++)if(ae[le]===T)return!0;for(le=0,ae=e.ancestors(T),_e=ae.length;le<_e;le++)if(ae[le]===J)return!1;return b}),M(t,"$<=",function(T){var J=this,ee=b;return x(ee=J["$equal?"](T))?ee:P(J,T)}),M(t,"$>",function(T){var J=this;return H(k,T)||j.$raise(i("TypeError"),"compared with non class/module"),P(T,J)}),M(t,"$>=",function(T){var J=this,ee=b;return x(ee=J["$equal?"](T))?ee:g(J,T)}),M(t,"$<=>",function(T){var J=this,ee=b;return J===T?0:!H(k,T)||(ee=P(J,T),x(ee["$nil?"]()))?b:x(ee)?-1:1}),M(t,"$alias_method",function(T,J){var ee=this;return W(ee),T=E(T,i("String"),"to_str"),J=E(J,i("String"),"to_str"),e.alias(ee,T,J),ee}),M(t,"$alias_native",function(T,J){var ee=this;return J==null&&(J=T),W(ee),e.alias_native(ee,T,J),ee},-2),M(t,"$ancestors",function(){var T=this;return e.ancestors(T)}),M(t,"$append_features",function(T){var J=this;return W(T),e.append_features(J,T),J}),M(t,"$attr_accessor",function(T){var J,ee,ae=this;return J=z(arguments),ee=J,A(ae,"attr_reader",F(ee)),A(ae,"attr_writer",F(ee))},-1),M(t,"$attr",function(T){var J,ee,ae=this;return J=z(arguments),ee=J,ee.length==2&&(ee[1]===!0||ee[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),ee[1]?ae.$attr_accessor(ee[0]):ae.$attr_reader(ee[0]),b):A(ae,"attr_reader",F(ee))},-1),M(t,"$attr_reader",function(T){var J,ee,ae=this;J=z(arguments),ee=J,W(ae);for(var le=ae.$$prototype,_e=ee.length-1;_e>=0;_e--){var de=ee[_e],ge=$e(de),ve=C(de),me=re(ve);e.prop(le,ve,b),me.$$parameters=[],me.$$arity=0,e.defn(ae,ge,me)}return b},-1),M(t,"$attr_writer",function(T){var J,ee,ae=this;J=z(arguments),ee=J,W(ae);for(var le=ae.$$prototype,_e=ee.length-1;_e>=0;_e--){var de=ee[_e],ge=$e(de+"="),ve=C(de),me=Z(ve);me.$$parameters=[["req"]],me.$$arity=1,e.prop(le,ve,b),e.defn(ae,ge,me)}return b},-1),M(t,"$autoload",function(T,J){var ee=this;return W(ee),s("Opal")["$const_name?"](T)||j.$raise(i("NameError"),"autoload must be constant name: "+T),J==""&&j.$raise(i("ArgumentError"),"empty file name"),ee.$$const.hasOwnProperty(T)||(ee.$$autoload||(ee.$$autoload={}),e.const_cache_version++,ee.$$autoload[T]={path:J,loaded:!1,required:!1,success:!1,exception:!1},ee.$const_added&&!ee.$const_added.$$pristine&&ee.$const_added(T)),b}),M(t,"$autoload?",function(T){var J=this;if(J.$$autoload&&J.$$autoload[T]&&!J.$$autoload[T].required&&!J.$$autoload[T].success)return J.$$autoload[T].path;for(var ee=J.$ancestors(),ae=0,le=ee.length;ae<le;ae++)if(ee[ae].$$autoload&&ee[ae].$$autoload[T]&&!ee[ae].$$autoload[T].required&&!ee[ae].$$autoload[T].success)return ee[ae].$$autoload[T].path;return b}),M(t,"$class_variables",function(){var T=this;return Object.keys(e.class_variables(T))}),M(t,"$class_variable_get",function(T){var J=this;return T=O["$class_variable_name!"](T),e.class_variable_get(J,T,!1)}),M(t,"$class_variable_set",function(T,J){var ee=this;return W(ee),T=O["$class_variable_name!"](T),e.class_variable_set(ee,T,J)}),M(t,"$class_variable_defined?",function(T){var J=this;return T=O["$class_variable_name!"](T),e.class_variables(J).hasOwnProperty(T)}),M(t,"$const_added",q(b)),O.$pristine(t,"const_added"),M(t,"$remove_class_variable",function(T){var J=this;if(W(J),T=O["$class_variable_name!"](T),e.hasOwnProperty.call(J.$$cvars,T)){var ee=J.$$cvars[T];return delete J.$$cvars[T],ee}else j.$raise(i("NameError"),"cannot remove "+T+" for "+J)}),M(t,"$constants",function(T){var J=this;return T==null&&(T=!0),e.constants(J,T)},-1),w(t,"$constants",function(T){var J=this;if(T==null){var ee=(J.$$nesting||[]).concat(I),ae,le={},_e,de;for(_e=0,de=ee.length;_e<de;_e++)for(ae in ee[_e].$$const)le[ae]=!0;return Object.keys(le)}else return e.constants(J,T)},-1),w(t,"$nesting",function(){var T=this;return T.$$nesting||[]}),M(t,"$const_defined?",function(T,J){var ee=this;J==null&&(J=!0),T=s("Opal")["$const_name!"](T),x(T["$=~"](i(O,"CONST_NAME_REGEXP")))||j.$raise(i("NameError").$new("wrong constant name "+T,T));var ae,le=[ee],_e,de;for(J&&(le=le.concat(e.ancestors(ee)),ee.$$is_module&&(le=le.concat([I]).concat(e.ancestors(I)))),_e=0,de=le.length;_e<de;_e++)if(ae=le[_e],ae.$$const[T]!=null||ae.$$autoload&&ae.$$autoload[T]&&!ae.$$autoload[T].required&&!ae.$$autoload[T].success)return!0;return!1},-2),M(t,"$const_get",function(T,J){var ee=this;return J==null&&(J=!0),T=s("Opal")["$const_name!"](T),T.indexOf("::")===0&&T!=="::"&&(T=T.slice(2)),x(T.indexOf("::")!=-1&&T!="::")?A(T.$split("::"),"inject",[ee],function(le,_e){return le==null&&(le=b),_e==null&&(_e=b),le.$const_get(_e)}):(x(T["$=~"](i(O,"CONST_NAME_REGEXP")))||j.$raise(i("NameError").$new("wrong constant name "+T,T)),J?e.$$([ee],T):e.const_get_local(ee,T))},-2),M(t,"$const_missing",function(T){var J=this,ee=b;return ee=y(J,I)?T:""+J+"::"+T,j.$raise(i("NameError").$new("uninitialized constant "+ee,T))}),M(t,"$const_set",function(T,J){var ee=this;return W(ee),T=O["$const_name!"](T),(x(T["$!~"](i(O,"CONST_NAME_REGEXP")))||x(T["$start_with?"]("::")))&&j.$raise(i("NameError").$new("wrong constant name "+T,T)),B(ee,T,J),J}),M(t,"$public_constant",q(b)),M(t,"$define_method",function L(T,J){var ee=L.$$p||b,ae=this,le=b,_e=b,de=b;return L.$$p=null,W(ae),J===void 0&&ee===b&&j.$raise(i("ArgumentError"),"tried to create a Proc object without a block"),T=u(T),x(J!==void 0)&&(ee=H(i("Proc"),le=J)?J:H(i("Method"),le)?J.$to_proc().$$unbound:H(i("UnboundMethod"),le)?e.wrap_method_body(J.$$method):j.$raise(i("TypeError"),"wrong argument type "+J.$class()+" (expected Proc/Method/UnboundMethod)"),x(!J.$$is_proc)&&(_e=J.$owner(),x(_e.$$is_class)&&o(d(ae,_e))&&(de=x(_e.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+_e,j.$raise(i("TypeError"),de)))),typeof Proxy<"u"&&(ee.$$proxy_target=ee,ee=new Proxy(ee,{apply:function(ge,ve,me){var be=ge.$$jsid,ie=ge.$$is_lambda;ge.$$jsid=T,ge.$$is_lambda=!0;try{return ge.apply(ve,me)}catch(N){if(N===ge.$$brk||N===ge.$$ret)return N.$v;throw N}finally{ge.$$jsid=be,ge.$$is_lambda=ie}}})),ee.$$jsid=T,ee.$$s=null,ee.$$def=ee,ee.$$define_meth=!0,e.defn(ae,$e(T),ee)},-2),M(t,"$freeze",function(){var T=this;return x(T["$frozen?"]())?T:(T.hasOwnProperty("$$base_module")||D(T,"$$base_module",null),v(T))}),M(t,"$remove_method",function(T){var J,ee,ae=this;J=z(arguments),ee=J;for(var le=0;le<ee.length;le++){var _e=u(ee[le]);W(ae),e.rdef(ae,"$"+_e)}return ae},-1),M(t,"$singleton_class?",function(){var T=this;return!!T.$$is_singleton}),M(t,"$include",function(T){var J,ee,ae=this;J=z(arguments),ee=J;for(var le=ee.length-1;le>=0;le--){var _e=ee[le];_e.$$is_module||j.$raise(i("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$append_features(ae),_e.$included(ae)}return ae},-1),M(t,"$included_modules",function(){var T=this;return e.included_modules(T)}),M(t,"$include?",function(T){var J=this;T.$$is_module||j.$raise(i("TypeError"),"wrong argument type "+T.$class()+" (expected Module)");var ee,ae,le,_e=e.ancestors(J);for(ee=0,ae=_e.length;ee<ae;ee++)if(le=_e[ee],le===T&&le!==J)return!0;return!1}),M(t,"$instance_method",function(T){var J=this,ee=J.$$prototype[$e(T)];return(!ee||ee.$$stub)&&j.$raise(i("NameError").$new("undefined method `"+T+"' for class `"+J.$name()+"'",T)),i("UnboundMethod").$new(J,ee.$$owner||J,ee,T)}),M(t,"$instance_methods",function(T){var J=this;return T==null&&(T=!0),x(T)?e.instance_methods(J):e.own_instance_methods(J)},-1),M(t,"$included",q(b)),M(t,"$extended",q(b)),M(t,"$extend_object",function(T){return W(T),b}),M(t,"$method_added",function(T){return z(arguments),b},-1),M(t,"$method_removed",function(T){return z(arguments),b},-1),M(t,"$method_undefined",function(T){return z(arguments),b},-1),M(t,"$module_eval",function L(T){var J=L.$$p||b,ee,ae,le,_e=this,de=b,ge=b,ve=b,me=b,be=b,ie=b;L.$$p=null,ee=z(arguments),ae=ee,x(J["$nil?"]())&&x(!!e.compile)?(x(S(1,3,!1)["$cover?"](ae.$size()))||j.$raise(i("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(F(ae)),de=le[0]==null?b:le[0],ge=le[1]==null?b:le[1],le[2]==null||le[2],ve=new Map([["file",x(me=ge)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),ie=O.$compile(de,be),J=A(j,"proc",[],function Y(){var Q=Y.$$s==null?this:Y.$$s;return new Function("Opal,self","return "+ie)(e,Q)},{$$s:_e})):x(ae["$any?"]())&&j.$raise(i("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var N=J.$$s,K;return J.$$s=null,K=J.apply(_e,[_e]),J.$$s=N,K},-1),M(t,"$module_exec",function L(T){var J=L.$$p||b,ee,ae,le=this;L.$$p=null,ee=z(arguments),ae=ee,J===b&&j.$raise(i("LocalJumpError"),"no block given");var _e=J.$$s,de;return J.$$s=null,de=J.apply(le,ae),J.$$s=_e,de},-1),M(t,"$method_defined?",function(T){var J=this,ee=J.$$prototype[$e(T)];return!!ee&&!ee.$$stub}),M(t,"$module_function",function(T){var J,ee,ae=this;if(J=z(arguments),ee=J,W(ae),ee.length===0)return ae.$$module_function=!0,b;for(var le=0,_e=ee.length;le<_e;le++){var de=ee[le],ge=$e(de),ve=ae.$$prototype[ge];e.defs(ae,ge,ve)}return ee.length===1?ee[0]:ee},-1),M(t,"$name",function(){var T=this;if(T.$$full_name)return T.$$full_name;for(var J=[],ee=T;ee;){if(ee.$$name===b||ee.$$name==null)return b;if(J.unshift(ee.$$name),ee=ee.$$base_module,ee===I)break}return J.length===0?b:T.$$full_name=J.join("::")}),M(t,"$prepend",function(T){var J,ee,ae=this;J=z(arguments),ee=J,ee.length===0&&j.$raise(i("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=ee.length-1;le>=0;le--){var _e=ee[le];_e.$$is_module||j.$raise(i("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$prepend_features(ae),_e.$prepended(ae)}return ae},-1),M(t,"$prepend_features",function(T){var J=this;return W(T),J.$$is_module||j.$raise(i("TypeError"),"wrong argument type "+J.$class()+" (expected Module)"),e.prepend_features(J,T),J}),M(t,"$prepended",q(b)),M(t,"$remove_const",function(T){var J=this;return W(J),e.const_remove(J,T)}),M(t,"$to_s",function(){var T=this,J=b;return x(J=e.Module.$name.call(T))?J:"#<"+(T.$$is_module?"Module":"Class")+":0x"+T.$__id__().$to_s(16)+">"}),M(t,"$undef_method",function(T){var J,ee,ae=this;J=z(arguments),ee=J;for(var le=0;le<ee.length;le++){var _e=u(ee[le]);W(ae),e.udef(ae,"$"+_e)}return ae},-1),M(t,"$instance_variables",function(){var T=this,J=b;J=(e.Module.$$nesting=r,T.$constants());var ee=[];return V(T,function(ae){ae!=="constructor"&&!J["$include?"](ae)&&ee.push("@"+ae)}),ee});function f(L,T){var J,ee=e.own_instance_methods(L);for(J=0;J<ee.length;J++){var ae=ee[J],le=$e(ae),_e=L.$$prototype[le],de=e.wrap_method_body(_e);de.$$jsid=ae,e.defn(T,le,de)}}function p(L,T){for(var J=L.$$own_included_modules,ee=J.length-1;ee>=0;ee--)e.append_features(J[ee],T)}function R(L,T){for(var J=L.$$own_prepended_modules,ee=J.length-1;ee>=0;ee--)e.prepend_features(J[ee],T)}return M(t,"$initialize_copy",function(T){var J=this;return f(T,J),p(T,J),R(T,J),J.$$cloned_from=T.$$cloned_from.concat(T),J.$copy_class_variables(T),J.$copy_constants(T)}),M(t,"$initialize_dup",function L(T){var J=L.$$p||b,ee=this;return L.$$p=null,h(ee,l(ee,"initialize_dup",L,!1,!0),"initialize_dup",[T],J),ee.$copy_singleton_methods(T)}),M(t,"$copy_class_variables",function(T){var J=this;for(var ee in T.$$cvars)J.$$cvars[ee]=T.$$cvars[ee]}),M(t,"$copy_constants",function(T){var J=this,ee,ae=T.$$const;for(ee in ae)B(J,ee,ae[ee])}),M(t,"$refine",function L(T){var J=L.$$p||b,ee,ae=this,le=b,_e=b,de=b;return L.$$p=null,ee=[ae,b,b],le=ee[0],_e=ee[1],de=ee[2],de=e.id(T),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?_e=ae.$$refine_modules[de]=i("Refinement").$new():_e=ae.$$refine_modules[de],_e.refinement_module=le,_e.refined_class=T,A(_e,"class_exec",[],J.$to_proc()),_e}),M(t,"$refinements",function(){var T=this,J=T.$$refine_modules,ee=new Map;if(typeof J>"u")return ee;for(var ae in J)ee["$[]="](J[ae].refined_class,J[ae]);return ee}),M(t,"$using",function(T){return j.$raise("Module#using is not permitted in methods")}),c(t,"class_eval","module_eval"),c(t,"class_exec","module_exec"),c(t,"inspect","to_s")}("::",null,X),function(a,$){var n=G(a,$,"Refinement"),t=n.$$prototype;return t.refinement_module=t.refined_class=b,n.$attr_reader("refined_class"),M(n,"$inspect",function r(){var s=r.$$p||b,u=this;return r.$$p=null,x(u.refinement_module)?"#<refinement:"+u.refined_class.$inspect()+"@"+u.refinement_module.$inspect()+">":h(u,l(u,"inspect",r,!1,!0),"inspect",[],s)})}("::",k)};Opal.modules["corelib/class"]=function(e){var x=e.klass,E=e.send,B=e.defs,I=e.def,re=e.ensure_kwargs,Z=e.hash_get,C=e.eqeq,W=e.truthy,v=e.rb_plus,D=e.return_val,$e=e.slice,V=e.send2,G=e.find_super,O=e.Kernel,j=e.alias,w=e.top,A=[],M=e.nil,H=e.$$$;return e.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),w.$require("corelib/module"),function(k,P,g){var z=x(k,P,"Class"),F=[z].concat(g),q=e.$r(F);return B(z,"$new",function y(o){var d=y.$$p||M;if(y.$$p=null,o==null&&(o=q("Object")),!o.$$is_class)throw e.TypeError.$new("superclass must be a Class");var S=e.allocate_class(M,o);return o.$inherited(S),d!==M&&E(S,"class_eval",[],d.$to_proc()),S},-1),I(z,"$allocate",function(){var o=this,d=new o.$$constructor;return d.$$id=e.uid(),d}),I(z,"$clone",function(o){var d,S=this,h=M;return o=re(o),d=Z(o,"freeze"),d==null&&(d=M),W(d["$nil?"]())||C(d,!0)||C(d,!1)||S.$raise(q("ArgumentError"),"unexpected value for freeze: "+d.$class()),h=e.allocate_class(M,S.$$super),h.$copy_instance_variables(S),h.$copy_singleton_methods(S),h.$initialize_clone(S,new Map([["freeze",d]])),(C(d,!0)||W(d["$nil?"]())&&W(S["$frozen?"]()))&&h.$freeze(),h},-1),I(z,"$dup",function(){var o=this,d=M;return d=e.allocate_class(M,o.$$super),d.$copy_instance_variables(o),d.$initialize_dup(o),d}),I(z,"$descendants",function(){var o=this;return v(o.$subclasses(),E(o.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),I(z,"$inherited",D(M)),I(z,"$new",function y(o){var d=y.$$p||M,S,h,l=this;y.$$p=null,S=$e(arguments),h=S;var c=l.$allocate();return e.send(c,c.$initialize,h,d),c},-1),I(z,"$subclasses",function(){var o=this;if(typeof WeakRef<"u"){var d,S,h=[];for(d=0;d<o.$$subclasses.length;d++)S=o.$$subclasses[d].deref(),S!==void 0&&h.push(S);return h}else return o.$$subclasses}),I(z,"$superclass",function(){var o=this;return o.$$super||M}),I(z,"$to_s",function y(){y.$$p;var o=this;y.$$p=null;var d=o.$$singleton_of;return d&&d.$$is_a_module?"#<Class:"+d.$name()+">":d?"#<Class:#<"+d.$$class.$name()+":0x"+e.id(d).$to_s(16)+">>":V(o,G(o,"to_s",y,!1,!0),"to_s",[],null)}),I(z,"$attached_object",function(){var o=this;if(o.$$singleton_of!=null)return o.$$singleton_of;O.$raise(H("TypeError"),"`"+o+"' is not a singleton class")}),j(z,"inspect","to_s")}("::",null,A)};Opal.modules["corelib/basic_object"]=function(e){var x=e.klass,E=e.slice,B=e.def,I=e.alias,re=e.return_val,Z=e.Opal,C=e.truthy,W=e.range,v=e.Kernel,D=e.to_a,$e=e.send,V=e.eqeq,G=e.rb_ge,O=e.nil,j=e.$$$;return e.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(w,A){var M=x(w,A,"BasicObject");return B(M,"$initialize",function(k){return E(arguments),O},-1),B(M,"$==",function(k){var P=this;return P===k}),B(M,"$eql?",function(k){var P=this;return P["$=="](k)}),I(M,"equal?","=="),B(M,"$__id__",function(){var k=this;return k.$$id!=null||e.prop(k,"$$id",e.uid()),k.$$id}),B(M,"$__send__",function H(k,P){var g=H.$$p||O,z,F,q=this;H.$$p=null,z=E(arguments,1),F=z,k.$$is_string||q.$raise(j("TypeError"),""+q.$inspect()+" is not a symbol nor a string");var y=q[e.jsid(k)];return y?(g!==O&&(y.$$p=g),y.apply(q,F)):(g!==O&&(q.$method_missing.$$p=g),q.$method_missing.apply(q,[k].concat(F)))},-2),B(M,"$!",re(!1)),Z.$pristine("!"),B(M,"$!=",function(k){var P=this;return P["$=="](k)["$!"]()}),B(M,"$instance_eval",function H(k){var P=H.$$p||O,g,z,F,q=this,y=O,o=O,d=O,S=O,h=O,l=O;if(H.$$p=null,g=E(arguments),z=g,C(P["$nil?"]())&&C(!!e.compile))C(W(1,3,!1)["$cover?"](z.$size()))||v.$raise(j("ArgumentError"),"wrong number of arguments (0 for 1..3)"),F=[].concat(D(z)),y=F[0]==null?O:F[0],o=F[1]==null?O:F[1],F[2]==null||F[2],d=new Map([["file",C(S=o)?S:"(eval)"],["eval",!0]]),h=new Map([["arity_check",!1]]).$merge(d),l=Z.$compile(y,h),P=$e(v,"proc",[],function b(){var i=b.$$s==null?this:b.$$s;return new Function("Opal,self","return "+l)(e,i)},{$$s:q});else{if(C(P["$nil?"]())&&C(G(z.$length(),1))&&V(z.$first()["$[]"](0),"@"))return q.$instance_variable_get(z.$first());C(z["$any?"]())&&v.$raise(j("ArgumentError"),"wrong number of arguments ("+z.$size()+" for 0)")}var c=P.$$s,X;if(P.$$s=null,q.$$is_a_module){q.$$eval=!0;try{X=P.call(q,q)}finally{q.$$eval=!1}}else X=P.call(q,q);return P.$$s=c,X},-1),B(M,"$instance_exec",function H(k){var P=H.$$p||O,g,z,F=this;H.$$p=null,g=E(arguments),z=g,C(P)||v.$raise(j("ArgumentError"),"no block given");var q=P.$$s,y;if(P.$$s=null,F.$$is_a_module){F.$$eval=!0;try{y=P.apply(F,z)}finally{F.$$eval=!1}}else y=P.apply(F,z);return P.$$s=q,y},-1),B(M,"$singleton_method_added",function(k){return E(arguments),O},-1),B(M,"$singleton_method_removed",function(k){return E(arguments),O},-1),B(M,"$singleton_method_undefined",function(k){return E(arguments),O},-1),B(M,"$method_missing",function H(k,P){H.$$p;var g,z,F=this,q=O;return H.$$p=null,g=E(arguments,1),z=g,q=Z.$inspect(F),v.$raise(j("NoMethodError").$new("undefined method `"+k+"' for "+q,k,z),O,v.$caller(1))},-2),Z.$pristine(M,"method_missing"),B(M,"$respond_to_missing?",function(k,P){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function(e){var x=e.truthy,E=e.coerce_to,B=e.respond_to,I=e.Opal,re=e.deny_frozen_access,Z=e.freeze,C=e.freeze_props,W=e.jsid,v=e.each_ivar,D=e.module,$e=e.return_val,V=e.def,G=e.Kernel,O=e.gvars,j=e.slice,w=e.send,A=e.to_a,M=e.ensure_kwargs,H=e.hash_get,k=e.eqeq,P=e.rb_plus,g=e.extract_kwargs,z=e.eqeqeq,F=e.return_self,q=e.rb_le,y=e.rb_lt,o=e.Object,d=e.alias,S=e.klass,h=[],l=e.nil,c=e.$$$;return e.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(X,b){var i=D(X,"Kernel"),a=[i].concat(b),$=e.$r(a);V(i,"$=~",$e(!1)),V(i,"$!~",function(r){var s=this;return s["$=~"](r)["$!"]()}),V(i,"$===",function(r){var s=this,u=l;return x(u=s.$object_id()["$=="](r.$object_id()))?u:s["$=="](r)}),V(i,"$<=>",function(r){var s=this;s.$$comparable=!0;var u=s["$=="](r);return u&&u!==l?0:l}),V(i,"$method",function(r){var s=this,u=s[W(r)];return(!u||u.$$stub)&&G.$raise(c("NameError").$new("undefined method `"+r+"' for class `"+s.$class()+"'",r)),c("Method").$new(s,u.$$owner||s.$class(),u,r)}),V(i,"$methods",function(r){var s=this;return r==null&&(r=!0),x(r)?e.methods(s):e.own_methods(s)},-1),V(i,"$public_methods",function(r){var s=this;return r==null&&(r=!0),x(r)?e.methods(s):e.receiver_methods(s)},-1),V(i,"$Array",function(r){var s;return r===l?[]:r.$$is_array?r:(s=I["$coerce_to?"](r,c("Array"),"to_ary"),s!==l||(s=I["$coerce_to?"](r,c("Array"),"to_a"),s!==l)?s:[r])}),V(i,"$at_exit",function t(){var r=t.$$p||l,s=l;return O.__at_exit__==null&&(O.__at_exit__=l),t.$$p=null,O.__at_exit__=x(s=O.__at_exit__)?s:[],O.__at_exit__["$<<"](r),r}),V(i,"$caller",function(r,s){r==null&&(r=1),s==null&&(s=l);var u,f;u=new Error().$backtrace(),f=[];for(var p=r+1,R=u.length;p<R;p++)u[p].match(/runtime\.js/)||f.push(u[p]);return s!=l&&(f=f.slice(0,s)),f},-1),V(i,"$caller_locations",function(r){var s,u,f=this;return s=j(arguments),u=s,w(w(f,"caller",A(u)),"map",[],function(R){return R==null&&(R=l),c(c(c("Thread"),"Backtrace"),"Location").$new(R)})},-1),V(i,"$class",function(){var r=this;return r.$$class}),V(i,"$copy_instance_variables",function(r){var s=this,u=Object.keys(r),f,p,R;for(f=0,p=u.length;f<p;f++)R=u[f],R.charAt(0)!=="$"&&r.hasOwnProperty(R)&&(s[R]=r[R])}),V(i,"$copy_singleton_methods",function(r){var s=this,u,f,p,R;if(r.hasOwnProperty("$$meta")&&r.$$meta!==null){var L=e.get_singleton_class(r),T=e.get_singleton_class(s);for(p=Object.getOwnPropertyNames(L.$$prototype),u=0,R=p.length;u<R;u++)f=p[u],e.is_method(f)&&(T.$$prototype[f]=L.$$prototype[f]);T.$$const=Object.assign({},L.$$const),Object.setPrototypeOf(T.$$prototype,Object.getPrototypeOf(L.$$prototype))}for(u=0,p=Object.getOwnPropertyNames(r),R=p.length;u<R;u++)f=p[u],f.charAt(0)==="$"&&f.charAt(1)!=="$"&&r.hasOwnProperty(f)&&(s[f]=r[f])}),V(i,"$clone",function(r){var s,u=this,f=l;return r=M(r),s=H(r,"freeze"),s==null&&(s=l),x(s["$nil?"]())||k(s,!0)||k(s,!1)||u.$raise($("ArgumentError"),"unexpected value for freeze: "+s.$class()),f=u.$class().$allocate(),f.$copy_instance_variables(u),f.$copy_singleton_methods(u),f.$initialize_clone(u,new Map([["freeze",s]])),(k(s,!0)||x(s["$nil?"]())&&x(u["$frozen?"]()))&&f.$freeze(),f},-1),V(i,"$initialize_clone",function(r,s){var u=this;return s=M(s),H(s,"freeze"),u.$initialize_copy(r),u},-2),V(i,"$define_singleton_method",function t(r,s){var u=t.$$p||l,f=this;return t.$$p=null,w(f.$singleton_class(),"define_method",[r,s],u.$to_proc())},-2),V(i,"$dup",function(){var r=this,s=l;return s=r.$class().$allocate(),s.$copy_instance_variables(r),s.$initialize_dup(r),s}),V(i,"$initialize_dup",function(r){var s=this;return s.$initialize_copy(r)}),V(i,"$enum_for",function t(r,s){var u=t.$$p||l,f,p,R,L=this;return t.$$p=null,f=j(arguments),f.length>0&&(p=f.shift()),p==null&&(p="each"),R=f,w(c("Enumerator"),"for",[L,p].concat(A(R)),u.$to_proc())},-1),V(i,"$equal?",function(r){var s=this;return s===r}),V(i,"$exit",function(r){var s=l,u=l;for(O.__at_exit__==null&&(O.__at_exit__=l),r==null&&(r=!0),O.__at_exit__=x(s=O.__at_exit__)?s:[];!x(O.__at_exit__["$empty?"]());)u=O.__at_exit__.$pop(),u.$call();return r.$$is_boolean?r=r?0:1:r=E(r,c("Integer"),"to_int"),e.exit(r),l},-1),V(i,"$extend",function(r){var s,u,f=this;s=j(arguments),u=s,u.length==0&&f.$raise(c("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),re(f);for(var p=f.$singleton_class(),R=u.length-1;R>=0;R--){var L=u[R];L.$$is_module||G.$raise(c("TypeError"),"wrong argument type "+L.$class()+" (expected Module)"),L.$append_features(p),L.$extend_object(f),L.$extended(f)}return f},-1),V(i,"$freeze",function(){var r=this;return x(r["$frozen?"]())?r:typeof r=="object"?(C(r),Z(r)):r}),V(i,"$frozen?",function(){var r=this;switch(typeof r){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return r.$$frozen||!1;default:return!1}}),V(i,"$gets",function(r){var s,u;return O.stdin==null&&(O.stdin=l),s=j(arguments),u=s,w(O.stdin,"gets",A(u))},-1),V(i,"$hash",function(){var r=this;return r.$__id__()}),V(i,"$initialize_copy",$e(l));var n=[];return V(i,"$inspect",function(){var r=this,s=l,u=l,f=l,p=l;return function(){try{try{return s="",u=r.$__id__(),x(n["$include?"](u))?s=" ...":(n["$<<"](u),f=!0,w(r.$instance_variables(),"each",[],function R(L){var T=R.$$s==null?this:R.$$s,J=l,ee=l;return L==null&&(L=l),J=T.$instance_variable_get(L),ee=$("Opal").$inspect(J),s=P(s," "+L+"="+ee)},{$$s:r})),"#<"+r.$class()+":0x"+u.$to_s(16)+s+">"}catch(R){if(e.rescue(R,[$("StandardError")])){p=R;try{return"#<"+r.$class()+":0x"+u.$to_s(16)+">"}finally{e.pop_exception(R)}}else throw R}}finally{x(f)&&n.$pop()}}()}),V(i,"$instance_of?",function(r){var s=this;return!r.$$is_class&&!r.$$is_module&&G.$raise(c("TypeError"),"class or module required"),s.$$class===r}),V(i,"$instance_variable_defined?",function(r){var s=this;return r=I["$instance_variable_name!"](r),e.hasOwnProperty.call(s,r.substr(1))}),V(i,"$instance_variable_get",function(r){var s=this;r=I["$instance_variable_name!"](r);var u=s[e.ivar(r.substr(1))];return u??l}),V(i,"$instance_variable_set",function(r,s){var u=this;return re(u),r=I["$instance_variable_name!"](r),u[e.ivar(r.substr(1))]=s}),V(i,"$remove_instance_variable",function(r){var s=this;r=I["$instance_variable_name!"](r);var u=e.ivar(r.substr(1)),f;return s.hasOwnProperty(u)?(f=s[u],delete s[u],f):G.$raise(c("NameError"),"instance variable "+r+" not defined")}),V(i,"$instance_variables",function(){var r=this,s=[];return v(r,function(u){u.substr(-1)==="$"&&(u=u.slice(0,u.length-1)),s.push("@"+u)}),s}),V(i,"$Integer",function(r,s,u){var f,p,R,L;f=j(arguments,1),p=g(f),p=M(p),f.length>0&&(R=f.shift()),L=H(p,"exception"),L==null&&(L=!0);var T,J,ee;if(L=x(L),!r.$$is_string){if(R!==void 0)if(L)G.$raise(c("ArgumentError"),"base specified for non string value");else return l;if(r===l)if(L)G.$raise(c("TypeError"),"can't convert nil into Integer");else return l;if(r.$$is_number){if(r===1/0||r===-1/0||isNaN(r))if(L)G.$raise(c("FloatDomainError"),r);else return l;return Math.floor(r)}if(r["$respond_to?"]("to_int")&&(T=r.$to_int(),e.is_a(T,c("Integer")))||r["$respond_to?"]("to_i")&&(T=r.$to_i(),e.is_a(T,c("Integer"))))return T;if(L)G.$raise(c("TypeError"),"can't convert "+r.$class()+" into Integer");else return l}if(r==="0")return 0;if(R===void 0)R=0;else if(R=E(R,c("Integer"),"to_int"),R===1||R<0||R>36)if(L)G.$raise(c("ArgumentError"),"invalid radix "+R);else return l;if(J=r.toLowerCase(),J=J.replace(/(\d)_(?=\d)/g,"$1"),J=J.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,le,_e){switch(_e){case"0b":if(R===0||R===2)return R=2,le;case"0":case"0o":if(R===0||R===8)return R=8,le;case"0d":if(R===0||R===10)return R=10,le;case"0x":if(R===0||R===16)return R=16,le}if(L)G.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return l}),R=R===0?10:R,ee="0-"+(R<=10?R-1:"9a-"+String.fromCharCode(97+(R-11))),!new RegExp("^\\s*[+-]?["+ee+"]+\\s*$").test(J))if(L)G.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return l;if(T=parseInt(J,R),isNaN(T))if(L)G.$raise(c("ArgumentError"),'invalid value for Integer(): "'+r+'"');else return l;return T},-2),V(i,"$Float",function(r,s){var u;s=M(s),u=H(s,"exception"),u==null&&(u=!0);var f;if(u=x(u),r===l)if(u)G.$raise(c("TypeError"),"can't convert nil into Float");else return l;if(r.$$is_string){if(f=r.toString(),f=f.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(f))return G.$Integer(f);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(f))if(u)G.$raise(c("ArgumentError"),'invalid value for Float(): "'+r+'"');else return l;return parseFloat(f)}return u?I["$coerce_to!"](r,c("Float"),"to_f"):E(r,c("Float"),"to_f")},-2),V(i,"$Hash",function(r){return x(r["$nil?"]())||k(r,[])?new Map:z(c("Hash"),r)?r:I["$coerce_to!"](r,c("Hash"),"to_hash")}),V(i,"$is_a?",function(r){var s=this;return!r.$$is_class&&!r.$$is_module&&G.$raise(c("TypeError"),"class or module required"),e.is_a(s,r)}),V(i,"$itself",F),V(i,"$lambda",function t(){var r=t.$$p||l;return t.$$p=null,e.lambda(r)}),V(i,"$load",function(r){return r=I["$coerce_to!"](r,c("String"),"to_str"),e.load(r)}),V(i,"$loop",function t(){var r=t.$$p||l,s=this,u=l;if(t.$$p=null,r===l)return w(s,"enum_for",["loop"],function(){return c(c("Float"),"INFINITY")});for(;x(!0);)try{e.yieldX(r,[])}catch(f){if(e.rescue(f,[c("StopIteration")])){u=f;try{return u.$result()}finally{e.pop_exception(f)}}else throw f}return s}),V(i,"$nil?",$e(!1)),V(i,"$printf",function(r){var s,u,f=this,p=l;return O.stdout==null&&(O.stdout=l),s=j(arguments),u=s,x(u["$empty?"]())||(p=x(u[0].$$is_string)?O.stdout:u.$shift(),p.$write(w(f,"format",A(u)))),l},-1),V(i,"$proc",function t(){var r=t.$$p||l;return t.$$p=null,x(r)||G.$raise(c("ArgumentError"),"tried to create Proc object without a block"),r.$$is_lambda=!1,r}),V(i,"$puts",function(r){var s,u;return O.stdout==null&&(O.stdout=l),s=j(arguments),u=s,w(O.stdout,"puts",A(u))},-1),V(i,"$p",function(r){var s,u;return s=j(arguments),u=s,w(u,"each",[],function(p){return O.stdout==null&&(O.stdout=l),p==null&&(p=l),O.stdout.$puts(p.$inspect())}),x(q(u.$length(),1))?u["$[]"](0):u},-1),V(i,"$print",function(r){var s,u;return O.stdout==null&&(O.stdout=l),s=j(arguments),u=s,w(O.stdout,"print",A(u))},-1),V(i,"$readline",function(r){var s,u;return O.stdin==null&&(O.stdin=l),s=j(arguments),u=s,w(O.stdin,"readline",A(u))},-1),V(i,"$warn",function(r,s){var u,f,p,R,L,T,J=this,ee=l;return O.VERBOSE==null&&(O.VERBOSE=l),O.stderr==null&&(O.stderr=l),u=j(arguments),f=g(u),f=M(f),p=u,R=H(f,"uplevel"),R==null&&(R=l),x(R)&&(R=I["$coerce_to!"](R,c("Integer"),"to_str"),x(y(R,0))&&G.$raise(c("ArgumentError"),"negative level ("+R+")"),ee=(L=(T=J.$caller(P(R,1),1).$first(),T===l||T==null?l:T.$split(":in `")),L===l||L==null?l:L.$first()),x(ee)&&(ee=""+ee+": "),p=w(p,"map",[],function(le){return le==null&&(le=l),""+ee+"warning: "+le})),x(O.VERBOSE["$nil?"]())||x(p["$empty?"]())?l:w(O.stderr,"puts",A(p))},-1),V(i,"$raise",function(r,s,u){throw O["!"]==null&&(O["!"]=l),s==null&&(s=l),u==null&&(u=l),r==null&&O["!"]!==l?O["!"]:(r==null?r=c("RuntimeError").$new(""):B(r,"$to_str")?r=c("RuntimeError").$new(r.$to_str()):r.$$is_class&&B(r,"$exception")?r=r.$exception(s):r.$$is_exception||(r=c("TypeError").$new("exception class/object expected")),u!==l&&r.$set_backtrace(u),O["!"]!==l&&e.exceptions.push(O["!"]),O["!"]=r,r)},-1),V(i,"$rand",function(r){return r===void 0?c(c("Random"),"DEFAULT").$rand():(r.$$is_number&&(r<0&&(r=Math.abs(r)),r%1!==0&&(r=r.$to_i()),r===0&&(r=void 0)),c(c("Random"),"DEFAULT").$rand(r))},-1),V(i,"$respond_to?",function(r,s){var u=this;s==null&&(s=!1);var f=u[W(r)];return typeof f=="function"&&!f.$$stub?!0:u["$respond_to_missing?"].$$pristine===!0?!1:u["$respond_to_missing?"](r,s)},-2),V(i,"$respond_to_missing?",function(r,s){return!1},-2),I.$pristine(i,"respond_to?","respond_to_missing?"),V(i,"$require",function(r){return typeof r!="string"&&e.String&&e.Array&&(r=I["$coerce_to!"](r,c("String"),"to_str")),e.require(r)}),V(i,"$require_relative",function(r){return I["$try_convert!"](r,c("String"),"to_str"),r=c("File").$expand_path(c("File").$join(e.current_file,"..",r)),e.require(r)}),V(i,"$require_tree",function(r,s){var u;s=M(s),u=H(s,"autoload"),u==null&&(u=!1);var f=[];r=c("File").$expand_path(r),r=e.normalize(r),r==="."&&(r="");for(var p in e.modules)p["$start_with?"](r)&&(u?f.push([p,!0]):f.push([p,e.require(p)]));return f},-2),V(i,"$singleton_class",function(){var r=this;return e.get_singleton_class(r)}),V(i,"$sleep",function(r){r==null&&(r=l),r===l&&G.$raise(c("TypeError"),"can't convert NilClass into time interval"),r.$$is_number||G.$raise(c("TypeError"),"can't convert "+r.$class()+" into time interval"),r<0&&G.$raise(c("ArgumentError"),"time interval must be positive");for(var s=e.global.performance?function(){return performance.now()}:function(){return new Date},u=s();s()-u<=r*1e3;);return Math.round(r)},-1),V(i,"$srand",function(r){return r==null&&(r=$("Random").$new_seed()),c("Random").$srand(r)},-1),V(i,"$String",function(r){var s=l;return x(s=I["$coerce_to?"](r,c("String"),"to_str"))?s:I["$coerce_to!"](r,c("String"),"to_s")}),V(i,"$tap",function t(){var r=t.$$p||l,s=this;return t.$$p=null,e.yield1(r,s),s}),V(i,"$to_proc",F),V(i,"$to_s",function(){var r=this;return"#<"+r.$class()+":0x"+r.$__id__().$to_s(16)+">"}),V(i,"$catch",function t(r){var s=t.$$p||l,u=l,f=l;t.$$p=null,r==null&&(r=l);try{return r=x(u=r)?u:o.$new(),e.yield1(s,r)}catch(p){if(e.rescue(p,[c("UncaughtThrowError")])){f=p;try{return k(f.$tag(),r)?f.$value():G.$raise()}finally{e.pop_exception(p)}}else throw p}},-1),V(i,"$throw",function(r,s){return s==null&&(s=l),G.$raise(c("UncaughtThrowError").$new(r,s))},-2),V(i,"$open",function t(r){var s=t.$$p||l,u,f;return t.$$p=null,u=j(arguments),f=u,w(c("File"),"open",A(f),s.$to_proc())},-1),V(i,"$yield_self",function t(){var r=t.$$p||l,s=this;return t.$$p=null,r===l?w(s,"enum_for",["yield_self"],$e(1)):e.yield1(r,s)}),d(i,"fail","raise"),d(i,"kind_of?","is_a?"),d(i,"object_id","__id__"),d(i,"public_send","__send__"),d(i,"send","__send__"),d(i,"then","yield_self"),d(i,"to_enum","enum_for")}("::",h),function(X,b){var i=S(X,b,"Object");return delete o.$$prototype.$require,i.$include(G)}("::",null)};Opal.modules["corelib/main"]=function(e){var x=e.return_val,E=e.def,B=e.Object,I=e.slice,re=e.Kernel,Z=e.top;return e.nil,e.add_stubs("include,raise"),function(C,W){return E(C,"$to_s",x("main")),E(C,"$include",function(D){return B.$include(D)}),E(C,"$autoload",function(D){var $e,V;return $e=I(arguments),V=$e,e.Object.$autoload.apply(e.Object,V)},-1),E(C,"$using",function(D){return re.$raise("main.using is permitted only at toplevel")})}(e.get_singleton_class(Z))};Opal.modules["corelib/error/errno"]=function(e){var x=e.module,E=e.truthy,B=e.rb_plus,I=e.send2,re=e.find_super,Z=e.def,C=e.klass,W=e.nil,v=e.$$$;return e.add_stubs("+,errno,class,attr_reader"),function(D,$e){var V=x(D,"Errno"),G=W,O=W;G=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],O=W;var j;for(j=0;j<G.length;j++)(function(){var w=G[j][0],A=G[j][1],M=G[j][2];O=e.klass(V,e.SystemCallError,w),O.errno=M,function(H,k){return Z(H,"$new",function P(g){P.$$p;var z=this,F=W;return P.$$p=null,g==null&&(g=W),F=A,E(g)&&(F=B(F," - "+g)),I(z,re(z,"new",P,!1,!0),"new",[F],null)},-1)}(e.get_singleton_class(O))})()}("::"),function(D,$e,V){var G=C(D,$e,"SystemCallError");return Z(G,"$errno",function(){var j=this;return j.$class().$errno()}),function(O,j){return O.$attr_reader("errno")}(e.get_singleton_class(G))}("::",v("StandardError"))};Opal.modules["corelib/error"]=function(e){var x=e.klass,E=e.slice,B=e.gvars,I=e.defs,re=e.send,Z=e.to_a,C=e.def,W=e.send2,v=e.find_super,D=e.truthy,$e=e.Kernel,V=e.not,G=e.rb_plus,O=e.eqeq,j=e.Object,w=e.ensure_kwargs,A=e.hash_get,M=e.module,H=[],k=e.nil,P=e.$$$;return e.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(g,z,F){var q=x(g,z,"Exception"),y=[q].concat(F),o=e.$r(y),d=q.$$prototype;d.message=k,e.prop(q.$$prototype,"$$is_exception",!0);var S;Error.stackTraceLimit=100,I(q,"$new",function(c){var X,b,i=this;B["!"]==null&&(B["!"]=k),X=E(arguments),b=X;var a=b.length>0?b[0]:k,$=new i.$$constructor(a);return $.name=i.$$name,$.message=a,$.cause=B["!"],e.send($,$.$initialize,b),e.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace($,S),$},-1),S=q.$new,I(q,"$exception",function(c){var X,b,i=this;return X=E(arguments),b=X,re(i,"new",Z(b))},-1),C(q,"$initialize",function(c){var X,b,i=this;return X=E(arguments),b=X,i.message=b.length>0?b[0]:k},-1),C(q,"$copy_instance_variables",function l(c){var X=l.$$p||k,b=this;l.$$p=null,W(b,v(b,"copy_instance_variables",l,!1,!0),"copy_instance_variables",[c],X),b.message=c.message,b.cause=c.cause,b.stack=c.stack});function h(l){for(var c=[],X,b=0;b<l.length;b++){var i=l[b];!i||!i.$$is_string||((X=i.match(/^    at (.*?) \((.*?)\)$/))?c.push(X[2]+":in `"+X[1]+"'"):(X=i.match(/^    at (.*?)$/))?c.push(X[1]+":in `undefined'"):(X=i.match(/^  from (.*?)$/))?c.push(X[1]):(X=i.match(/^(.*?)@(.*?)$/))&&c.push(X[2]+":in `"+X[1]+"'"))}return c}return C(q,"$backtrace",function(){var c=this;if(c.backtrace)return c.backtrace;var X=c.stack;return typeof X<"u"&&X.$$is_string?c.backtrace=h(X.split(`
`)):X?c.backtrace=h(X):[]}),C(q,"$backtrace_locations",function(){var c,X=this;return X.backtrace_locations||(X.backtrace_locations=(c=X.$backtrace(),c===k||c==null?k:re(c,"map",[],function(i){return i==null&&(i=k),P(P(P("Thread"),"Backtrace"),"Location").$new(i)}))),X.backtrace_locations}),C(q,"$cause",function(){var c=this;return c.cause||k}),C(q,"$exception",function(c){var X=this;if(c==null&&(c=k),c===k||X===c)return X;var b=X.$clone();return b.message=c,X.backtrace&&(b.backtrace=X.backtrace.$dup()),b.stack=X.stack,b.cause=X.cause,b},-1),C(q,"$message",function(){var c=this;return c.$to_s()}),C(q,"$full_message",function(c){var X,b=this,i=k,a=k,$=k,n=k,t=k,r=k,s=k,u=k,f=k;return B.stderr==null&&(B.stderr=k),c==null&&(c=k),D(o("Hash","skip_raise")?"constant":k)?(c=new Map([["highlight",B.stderr["$tty?"]()],["order","top"]]).$merge(D(i=c)?i:new Map),X=[c["$[]"]("highlight"),c["$[]"]("order")],a=X[0],$=X[1],D([!0,!1]["$include?"](a))||$e.$raise(P("ArgumentError"),"expected true or false as highlight: "+a),D(["top","bottom"]["$include?"]($))||$e.$raise(P("ArgumentError"),"expected :top or :bottom as order: "+$),D(a)?(n="\x1B[1;4m",t="\x1B[1m",r="\x1B[m"):n=t=r="",s=b.$backtrace().$dup(),(V(s)||D(s["$empty?"]()))&&(s=b.$caller()),u=s.$shift(),f=""+u+": ",f=G(f,""+t+b.$to_s()+" ("+n+b.$class()+r+t+")"+r+`
`),f=G(f,re(s,"map",[],function(R){return R==null&&(R=k),"	from "+R+`
`}).$join()),D(b.$cause())&&(f=G(f,b.$cause().$full_message(new Map([["highlight",a]])))),O($,"bottom")&&(f=f.$split(`
`).$reverse().$join(`
`),f=G(""+t+"Traceback"+r+` (most recent call last):
`,f)),f):""+b.message+`
`+b.stack},-1),C(q,"$inspect",function(){var c=this,X=k;return X=c.$to_s(),D(X["$empty?"]())?c.$class().$to_s():"#<"+c.$class().$to_s()+": "+c.$to_s()+">"}),C(q,"$set_backtrace",function(c){var X=this,b=!0,i,a;if(c===k)X.backtrace=k,X.stack="";else if(c.$$is_string)X.backtrace=[c],X.stack="  from "+c;else{if(c.$$is_array){for(i=0,a=c.length;i<a;i++)if(!c[i].$$is_string){b=!1;break}}else b=!1;b===!1&&$e.$raise(P("TypeError"),"backtrace must be Array of String"),X.backtrace=c,X.stack=re(c,"map",[],function(n){return n==null&&(n=k),G("  from ",n)}).join(`
`)}return c}),C(q,"$to_s",function(){var c=this,X=k,b=k;return D(X=D(b=c.message)?c.message.$to_s():b)?X:c.$class().$to_s()})}("::",Error,H),x("::",P("Exception"),"ScriptError"),x("::",P("ScriptError"),"SyntaxError"),x("::",P("ScriptError"),"LoadError"),x("::",P("ScriptError"),"NotImplementedError"),x("::",P("Exception"),"SystemExit"),x("::",P("Exception"),"NoMemoryError"),x("::",P("Exception"),"SignalException"),x("::",P("SignalException"),"Interrupt"),x("::",P("Exception"),"SecurityError"),x("::",P("Exception"),"SystemStackError"),x("::",P("Exception"),"StandardError"),x("::",P("StandardError"),"EncodingError"),x("::",P("StandardError"),"ZeroDivisionError"),x("::",P("StandardError"),"NameError"),x("::",P("NameError"),"NoMethodError"),x("::",P("StandardError"),"RuntimeError"),x("::",P("RuntimeError"),"FrozenError"),x("::",P("StandardError"),"LocalJumpError"),x("::",P("StandardError"),"TypeError"),x("::",P("StandardError"),"ArgumentError"),x("::",P("ArgumentError"),"UncaughtThrowError"),x("::",P("StandardError"),"IndexError"),x("::",P("IndexError"),"StopIteration"),x("::",P("StopIteration"),"ClosedQueueError"),x("::",P("IndexError"),"KeyError"),x("::",P("StandardError"),"RangeError"),x("::",P("RangeError"),"FloatDomainError"),x("::",P("StandardError"),"IOError"),x("::",P("IOError"),"EOFError"),x("::",P("StandardError"),"SystemCallError"),x("::",P("StandardError"),"RegexpError"),x("::",P("StandardError"),"ThreadError"),x("::",P("StandardError"),"FiberError"),j.$autoload("Errno","corelib/error/errno"),function(g,z){var F=x(g,z,"FrozenError");return F.$attr_reader("receiver"),C(F,"$initialize",function q(y,o){var d;q.$$p;var S=this;return q.$$p=null,o=w(o),d=A(o,"receiver"),d==null&&(d=k),W(S,v(S,"initialize",q,!1,!0),"initialize",[y],null),S.receiver=d},-2)}("::",P("RuntimeError")),function(g,z){var F=x(g,z,"UncaughtThrowError"),q=F.$$prototype;return q.tag=k,F.$attr_reader("tag","value"),C(F,"$initialize",function y(o,d){y.$$p;var S=this;return y.$$p=null,d==null&&(d=k),S.tag=o,S.value=d,W(S,v(S,"initialize",y,!1,!0),"initialize",["uncaught throw "+S.tag.$inspect()],null)},-2)}("::",P("ArgumentError")),function(g,z){var F=x(g,z,"NameError");return F.$attr_reader("name"),C(F,"$initialize",function q(y,o){q.$$p;var d=this;return q.$$p=null,o==null&&(o=k),W(d,v(d,"initialize",q,!1,!0),"initialize",[y],null),d.name=o},-2)}("::",null),function(g,z){var F=x(g,z,"NoMethodError");return F.$attr_reader("args"),C(F,"$initialize",function q(y,o,d){q.$$p;var S=this;return q.$$p=null,o==null&&(o=k),d==null&&(d=[]),W(S,v(S,"initialize",q,!1,!0),"initialize",[y,o],null),S.args=d},-2)}("::",null),function(g,z){var F=x(g,z,"StopIteration");return F.$attr_reader("result")}("::",null),function(g,z){var F=x(g,z,"KeyError"),q=F.$$prototype;return q.receiver=q.key=k,C(F,"$initialize",function y(o,d){var S,h;y.$$p;var l=this;return y.$$p=null,d=w(d),S=A(d,"receiver"),S==null&&(S=k),h=A(d,"key"),h==null&&(h=k),W(l,v(l,"initialize",y,!1,!0),"initialize",[o],null),l.receiver=S,l.key=h},-2),C(F,"$receiver",function(){var o=this,d=k;return D(d=o.receiver)?d:$e.$raise(P("ArgumentError"),"no receiver is available")}),C(F,"$key",function(){var o=this,d=k;return D(d=o.key)?d:$e.$raise(P("ArgumentError"),"no key is available")})}("::",null),function(g,z){var F=x(g,z,"LocalJumpError");return F.$attr_reader("exit_value","reason"),C(F,"$initialize",function q(y,o,d){q.$$p;var S=this;return q.$$p=null,o==null&&(o=k),d==null&&(d="noreason"),W(S,v(S,"initialize",q,!1,!0),"initialize",[y],null),S.exit_value=o,S.reason=d},-2)}("::",null),function(g,z){var F=M(g,"JS"),q=[F].concat(z);return x(q[0],null,"Error"),k}("::",H)};Opal.modules["corelib/constants"]=function(e){var x=e.const_set;e.nil;var E=e.$$$;return x("::","RUBY_PLATFORM","opal"),x("::","RUBY_ENGINE","opal"),x("::","RUBY_VERSION","3.2.0"),x("::","RUBY_ENGINE_VERSION","1.8.2"),x("::","RUBY_RELEASE_DATE","2023-11-23"),x("::","RUBY_PATCHLEVEL",0),x("::","RUBY_REVISION","0"),x("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),x("::","RUBY_DESCRIPTION","opal "+E("RUBY_ENGINE_VERSION")+" ("+E("RUBY_RELEASE_DATE")+" revision "+E("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function(e){var x=e.Object;return e.nil,e.add_stubs("require"),x.$require("corelib/runtime"),x.$require("corelib/helpers"),x.$require("corelib/module"),x.$require("corelib/class"),x.$require("corelib/basic_object"),x.$require("corelib/kernel"),x.$require("corelib/main"),x.$require("corelib/error"),x.$require("corelib/constants")};Opal.modules["corelib/nil"]=function(e){var x=e.klass,E=e.Kernel,B=e.def,I=e.return_val,re=e.ensure_kwargs,Z=e.hash_get,C=e.NilClass,W=e.slice,v=e.truthy,D=e.rb_gt,$e=e.alias,V=e.nil,G=e.$$$;return e.add_stubs("raise,name,new,>,length,Rational,to_i"),function(O,j,w){var A=x(O,j,"NilClass");return A.$$prototype.$$meta=A,function(M,H){return B(M,"$allocate",function(){var P=this;return E.$raise(G("TypeError"),"allocator undefined for "+P.$name())}),e.udef(M,"$new"),V}(e.get_singleton_class(A)),B(A,"$!",I(!0)),B(A,"$&",I(!1)),B(A,"$|",function(H){return H!==!1&&H!==V}),B(A,"$^",function(H){return H!==!1&&H!==V}),B(A,"$==",function(H){return H===V}),B(A,"$dup",I(V)),B(A,"$clone",function(H){return H=re(H),Z(H,"freeze"),V},-1),B(A,"$inspect",I("nil")),B(A,"$nil?",I(!0)),B(A,"$singleton_class",function(){return C}),B(A,"$to_a",function(){return[]}),B(A,"$to_h",function(){return new Map}),B(A,"$to_i",I(0)),B(A,"$to_s",I("")),B(A,"$to_c",function(){return G("Complex").$new(0,0)}),B(A,"$rationalize",function(H){var k,P;return k=W(arguments),P=k,v(D(P.$length(),1))&&E.$raise(G("ArgumentError")),E.$Rational(0,1)},-1),B(A,"$to_r",function(){return E.$Rational(0,1)}),B(A,"$instance_variables",function(){return[]}),$e(A,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function(e){var x=e.klass,E=e.Kernel,B=e.def,I=e.return_self,re=e.ensure_kwargs,Z=e.hash_get,C=e.slice,W=e.truthy,v=e.send2,D=e.find_super,$e=e.to_a,V=e.alias,G=e.nil,O=e.$$$;return e.add_stubs("raise,name,==,to_s,__id__"),function(j,w,A){var M=x(j,w,"Boolean");e.prop(M.$$prototype,"$$is_boolean",!0);for(var H=["$$class","$$meta"],k=0;k<H.length;k++)Object.defineProperty(M.$$prototype,H[k],{configurable:!0,enumerable:!1,get:function(){return this==!0?e.TrueClass:this==!1?e.FalseClass:e.Boolean}});return Object.defineProperty(M.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:G}}),function(P,g){return B(P,"$allocate",function(){var F=this;return E.$raise(O("TypeError"),"allocator undefined for "+F.$name())}),e.udef(P,"$new"),G}(e.get_singleton_class(M)),B(M,"$__id__",function(){var g=this;return g.valueOf()?2:0}),B(M,"$!",function(){var g=this;return g!=!0}),B(M,"$&",function(g){var z=this;return z==!0?g!==!1&&g!==G:!1}),B(M,"$|",function(g){var z=this;return z==!0?!0:g!==!1&&g!==G}),B(M,"$^",function(g){var z=this;return z==!0?g===!1||g===G:g!==!1&&g!==G}),B(M,"$==",function(g){var z=this;return z==!0===g.valueOf()}),B(M,"$singleton_class",function(){var g=this;return g.$$meta}),B(M,"$to_s",function(){var g=this;return g==!0?"true":"false"}),B(M,"$dup",I),B(M,"$clone",function(g){var z=this;return g=re(g),Z(g,"freeze"),z},-1),B(M,"$method_missing",function P(g,z){var F=P.$$p||G,q,y,o=this;P.$$p=null,q=C(arguments,1),y=q;var d=o.$$class.$$prototype[e.jsid(g)];return W(typeof d<"u"&&!d.$$stub)||v(o,D(o,"method_missing",P,!1,!0),"method_missing",[g].concat($e(y)),F),e.send(o,d,y,F)},-2),B(M,"$respond_to_missing?",function(g,z){var F=this,q=F.$$class.$$prototype[e.jsid(g)];return typeof q<"u"&&!q.$$stub},-2),V(M,"eql?","=="),V(M,"equal?","=="),V(M,"inspect","to_s"),V(M,"object_id","__id__")}("::",Boolean),x("::",O("Boolean"),"TrueClass"),x("::",O("Boolean"),"FalseClass"),G};Opal.modules["corelib/comparable"]=function(e){var x=e.truthy,E=e.module,B=e.rb_gt,I=e.rb_lt,re=e.eqeqeq,Z=e.Kernel,C=e.def,W=e.nil,v=e.$$$;return e.add_stubs(">,<,===,raise,class,<=>,equal?"),function(D){var $e=E(D,"Comparable"),V=W;function G(w){return e.is_a(w,e.Integer)?w:B(w,0)?1:I(w,0)?-1:0}function O(w,A){var M;re(W,V=A)||re(!0,V)||re(!1,V)||re(v("Integer"),V)||re(v("Float"),V)?M=A.$inspect():M=A.$$class,Z.$raise(v("ArgumentError"),"comparison of "+w.$class()+" with "+M+" failed")}function j(w,A){var M=w["$<=>"](A);return x(M)||O(w,A),G(M)}return C($e,"$==",function(A){var M=this,H=W;return x(M["$equal?"](A))?!0:M["$<=>"]==e.Kernel["$<=>"]?!1:M.$$comparable?(M.$$comparable=!1,!1):x(H=M["$<=>"](A))?G(H)==0:!1}),C($e,"$>",function(A){var M=this;return j(M,A)>0}),C($e,"$>=",function(A){var M=this;return j(M,A)>=0}),C($e,"$<",function(A){var M=this;return j(M,A)<0}),C($e,"$<=",function(A){var M=this;return j(M,A)<=0}),C($e,"$between?",function(A,M){var H=this;return!(x(I(H,A))||x(B(H,M)))}),C($e,"$clamp",function(A,M){var H=this;M==null&&(M=W);var k,P;if(M===W&&(e.is_a(A,e.Range)||Z.$raise(v("TypeError"),"wrong argument type "+A.$class()+" (expected Range)"),P=A.excl,M=A.end,A=A.begin,M!==W&&P&&Z.$raise(v("ArgumentError"),"cannot clamp with an exclusive range")),A!==W&&M!==W&&j(A,M)>0&&Z.$raise(v("ArgumentError"),"min argument must be smaller than max argument"),A!==W){if(k=j(H,A),k==0)return H;if(k<0)return A}return M!==W&&(k=j(H,M),k>0)?M:H},-2)}("::")};Opal.modules["corelib/regexp"]=function(e){var x=e.coerce_to,E=e.prop,B=e.freeze,I=e.klass,re=e.const_set,Z=e.send2,C=e.find_super,W=e.def,v=e.truthy,D=e.gvars,$e=e.slice,V=e.Kernel,G=e.Opal,O=e.alias,j=e.send,w=e.regexp,A=e.rb_plus,M=e.ensure_kwargs,H=e.hash_get,k=e.rb_ge,P=e.to_a,g=e.eqeqeq,z=e.rb_minus,F=e.return_ivar,q=[],y=e.nil,o=e.$$$;return e.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),I("::",o("StandardError"),"RegexpError"),function(d,S,h){var l=I(d,S,"Regexp"),c=[l].concat(h),X=e.$r(c);return re(l,"IGNORECASE",1),re(l,"EXTENDED",2),re(l,"MULTILINE",4),e.prop(l.$$prototype,"$$is_regexp",!0),function(b,i){var a=[b].concat(i),$=e.$r(a);return W(b,"$allocate",function n(){var t=n.$$p||y,r=this,s=y;return n.$$p=null,s=Z(r,C(r,"allocate",n,!1,!0),"allocate",[],t),s.uninitialized=!0,s}),W(b,"$escape",function(t){return t=x(t,o("String"),"to_str"),e.escape_regexp(t)}),W(b,"$last_match",function(t){return D["~"]==null&&(D["~"]=y),t==null&&(t=y),v(t["$nil?"]())?D["~"]:v(D["~"])?D["~"]["$[]"](t):y},-1),W(b,"$union",function(t){var r,s,u=this;r=$e(arguments),s=r;var f,p,R,L,T;if(s.length==0)return/(?!)/;if(s.length==1&&s[0].$$is_regexp)return s[0];f=s[0].$$is_array,s.length>1&&f&&V.$raise(o("TypeError"),"no implicit conversion of Array into String"),f&&(s=s[0]),L=void 0,p=[];for(var J=0;J<s.length;J++)R=s[J],R.$$is_string?p.push(u.$escape(R)):R.$$is_regexp?(T=R.$options(),L!=null&&L!=T&&V.$raise(o("TypeError"),"All expressions must use the same options"),L=T,p.push("("+R.source+")")):p.push(u.$escape(R.$to_str()));return u.$new(p.$join("|"),L)},-1),W(b,"$new",function(t,r){if(t.$$is_regexp)return new RegExp(t);if(t=G["$coerce_to!"](t,o("String"),"to_str"),t.charAt(t.length-1)==="\\"&&t.charAt(t.length-2)!=="\\"&&V.$raise(o("RegexpError"),"too short escape sequence: /"+t+"/"),t=t.replace("\\A","^").replace("\\z","$"),r===void 0||r["$!"]())return new RegExp(t);if(r.$$is_number){var s="";$("IGNORECASE")&r&&(s+="i"),$("MULTILINE")&r&&(s+="m"),r=s}else r="i";return new RegExp(t,r)},-2),O(b,"compile","new"),O(b,"quote","escape")}(e.get_singleton_class(l),c),W(l,"$==",function(i){var a=this;return i instanceof RegExp&&a.toString()===i.toString()}),W(l,"$===",function(i){var a=this;return a.$match(G["$coerce_to?"](i,o("String"),"to_str"))!==y}),W(l,"$=~",function(i){var a=this,$=y;return D["~"]==null&&(D["~"]=y),v($=a.$match(i))?D["~"].$begin(0):$}),W(l,"$freeze",function(){var i=this;return v(i["$frozen?"]())?i:(i.hasOwnProperty("$$g")||E(i,"$$g",null),i.hasOwnProperty("$$gm")||E(i,"$$gm",null),B(i))}),W(l,"$inspect",function(){var i=this,a=/^\/(.*)\/([^\/]*)$/,$=i.toString(),n=a.exec($);if(n){for(var t=n[1],r=n[2],s=t.split(""),u=s.length,f=!1,p="",R=0;R<u;R++){var L=s[R];!f&&L=="/"&&(p=p.concat("\\")),p=p.concat(L),L=="\\"?f?f=!1:f=!0:f=!1}return"/"+p+"/"+r}else return $}),W(l,"$match",function b(i,a){var $=b.$$p||y,n=this;if(D["~"]==null&&(D["~"]=y),b.$$p=null,n.uninitialized&&V.$raise(o("TypeError"),"uninitialized Regexp"),a===void 0){if(i===y)return D["~"]=y;var t=n.exec(x(i,o("String"),"to_str"));return t?(D["~"]=o("MatchData").$new(n,t),$===y?D["~"]:e.yield1($,D["~"])):D["~"]=y}if(a=x(a,o("Integer"),"to_int"),i===y||(i=x(i,o("String"),"to_str"),a<0&&(a+=i.length,a<0)))return D["~"]=y;for(var r,s=e.global_regexp(n);;){if(r=s.exec(i),r===null)return D["~"]=y;if(r.index>=a)return D["~"]=o("MatchData").$new(s,r),$===y?D["~"]:e.yield1($,D["~"]);s.lastIndex=r.index+1}},-2),W(l,"$match?",function(i,a){var $=this;if($.uninitialized&&V.$raise(o("TypeError"),"uninitialized Regexp"),a===void 0)return i===y?!1:$.test(x(i,o("String"),"to_str"));if(a=x(a,o("Integer"),"to_int"),i===y||(i=x(i,o("String"),"to_str"),a<0&&(a+=i.length,a<0)))return!1;var n,t=e.global_regexp($);return n=t.exec(i),!(n===null||n.index<a)},-2),W(l,"$names",function(){var i=this;return j(i.$source().$scan(w(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),W(l,"$named_captures",function(){var i=this;return j(j(j(i.$source().$scan(w(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function($){return $==null&&($=y),j($,"map",[],function(t){return t==null&&(t=y),A(t.$last(),1)})})}),W(l,"$~",function(){var i=this;return D._==null&&(D._=y),i["$=~"](D._)}),W(l,"$source",function(){var i=this;return i.source}),W(l,"$options",function(){var i=this;i.uninitialized&&V.$raise(o("TypeError"),"uninitialized Regexp");var a=0;return i.multiline&&(a|=X("MULTILINE")),i.ignoreCase&&(a|=X("IGNORECASE")),a}),W(l,"$casefold?",function(){var i=this;return i.ignoreCase}),O(l,"eql?","=="),O(l,"to_s","source")}("::",RegExp,q),function(d,S,h){var l=I(d,S,"MatchData"),c=[l].concat(h),X=e.$r(c),b=l.$$prototype;return b.matches=y,l.$attr_reader("post_match","pre_match","regexp","string"),W(l,"$initialize",function(a,$,n){var t,r=this;n=M(n),t=H(n,"no_matchdata"),t==null&&(t=!1),v(t)||(D["~"]=r),r.regexp=a,r.begin=$.index,r.string=$.input,r.pre_match=$.input.slice(0,$.index),r.post_match=$.input.slice($.index+$[0].length),r.matches=[];for(var s=0,u=$.length;s<u;s++){var f=$[s];f==null?r.matches.push(y):r.matches.push(f)}},-3),W(l,"$match",function(a){var $=this,n=y;return v(n=$["$[]"](a))?n:v(a["$is_a?"](X("Integer")))&&v(k(a,$.$length()))?V.$raise(o("IndexError"),"index "+a+" out of matches"):y}),W(l,"$match_length",function(a){var $,n=this;return $=n.$match(a),$===y||$==null?y:$.$length()}),W(l,"$[]",function(a){var $,n,t=this;return $=$e(arguments),n=$,n[0].$$is_string?(t.$regexp().$names()["$include?"](n["$[]"](0))["$!"]()&&V.$raise(o("IndexError"),"undefined group name reference: "+n["$[]"](0)),t.$named_captures()["$[]"](n["$[]"](0))):j(t.matches,"[]",P(n))},-1),W(l,"$offset",function(a){var $=this;return a!==0&&V.$raise(o("ArgumentError"),"MatchData#offset only supports 0th element"),[$.begin,$.begin+$.matches[a].length]}),W(l,"$==",function(a){var $=this,n=y,t=y,r=y,s=y;return g(o("MatchData"),a)?v(n=v(t=v(r=v(s=$.string==a.string)?$.regexp.toString()==a.regexp.toString():s)?$.pre_match==a.pre_match:r)?$.post_match==a.post_match:t)?$.begin==a.begin:n:!1}),W(l,"$begin",function(a){var $=this;return a!==0&&V.$raise(o("ArgumentError"),"MatchData#begin only supports 0th element"),$.begin}),W(l,"$end",function(a){var $=this;return a!==0&&V.$raise(o("ArgumentError"),"MatchData#end only supports 0th element"),$.begin+$.matches[a].length}),W(l,"$captures",function(){var a=this;return a.matches.slice(1)}),W(l,"$named_captures",function(){var a=this,$=y;return $=a.$captures(),j(a.$regexp().$named_captures(),"transform_values",[],function(t){return t==null&&(t=y),$["$[]"](z(t.$last(),1))})}),W(l,"$names",function(){var a=this;return a.$regexp().$names()}),W(l,"$inspect",function(){var a=this,$="#<MatchData "+a.matches[0].$inspect();if(a.$regexp().$names()["$empty?"]())for(var n=1,t=a.matches.length;n<t;n++)$+=" "+n+":"+a.matches[n].$inspect();else j(a.$named_captures(),"each",[],function(s,u){return s==null&&(s=y),u==null&&(u=y),$+=" "+s+":"+u.$inspect()});return $+">"}),W(l,"$length",function(){var a=this;return a.matches.length}),W(l,"$to_a",F("matches")),W(l,"$to_s",function(){var a=this;return a.matches[0]}),W(l,"$values_at",function(a){var $,n,t=this;$=$e(arguments),n=$;var r,s,u,f=[];for(r=0;r<n.length;r++){if(n[r].$$is_range&&(s=n[r].$to_a(),s.unshift(r,1),Array.prototype.splice.apply(n,s)),u=G["$coerce_to!"](n[r],o("Integer"),"to_int"),u<0&&(u+=t.matches.length,u<0)){f.push(y);continue}f.push(t.matches[u])}return f},-1),O(l,"eql?","=="),O(l,"size","length")}(q[0],null,q)};Opal.modules["corelib/string"]=function(e){var x=e.coerce_to,E=e.respond_to,B=e.global_multiline_regexp,I=e.prop,re=e.opal32_init,Z=e.opal32_add,C=e.klass,W=e.send2,v=e.find_super,D=e.def,$e=e.Opal,V=e.defs,G=e.slice,O=e.send,j=e.to_a,w=e.extract_kwargs,A=e.ensure_kwargs,M=e.hash_get,H=e.eqeqeq,k=e.Kernel,P=e.truthy,g=e.gvars,z=e.rb_divide,F=e.rb_plus,q=e.eqeq,y=e.alias,o=e.const_set,d=e.top,S=[],h=e.$r(S),l=e.nil,c=e.$$$;return e.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),d.$require("corelib/comparable"),d.$require("corelib/regexp"),function(X,b,i){var a=C(X,b,"String"),$=[a].concat(i),n=e.$r($);a.$include(c("Comparable")),e.prop(a.$$prototype,"$$is_string",!0);var t=new Map;(function(){D(a,"$__id__",function s(){var u=s.$$p||l,f=this;if(s.$$p=null,typeof f=="object")return W(f,v(f,"__id__",s,!1,!0),"__id__",[],u);if(t.has(f))return t.get(f);var p=e.uid();return t.set(f,p),p}),D(a,"$hash",function(){var u=this,f=re(),p,R=u.length;for(f=Z(f,5),f=Z(f,R),p=0;p<R;p++)f=Z(f,u.charCodeAt(p));return f})})(),V(a,"$try_convert",function(u){return $e["$coerce_to?"](u,c("String"),"to_str")}),V(a,"$new",function(u){var f,p,R=this;f=G(arguments),p=f;var L=p[0]||"",T=p[p.length-1];return L=x(L,c("String"),"to_str"),T&&T.$$is_hash&&T.has("encoding")&&(L=L.$force_encoding(T.get("encoding").value)),L=new R.$$constructor(L),L.$initialize.$$pristine||O(L,"initialize",j(p)),L},-1),D(a,"$initialize",function(u,f){var p,R;return p=G(arguments),R=w(p),R=A(R),p.length>0&&p.shift(),M(R,"encoding"),M(R,"capacity"),l},-1),D(a,"$%",function(u){var f=this;return H(c("Array"),u)?O(f,"format",[f].concat(j(u))):f.$format(f,u)}),D(a,"$*",function(u){var f=this;if(u=x(u,c("Integer"),"to_int"),u<0&&k.$raise(c("ArgumentError"),"negative argument"),u===0)return"";var p="",R=f.toString();for(R.length*u>=1<<28&&k.$raise(c("RangeError"),"multiply count must not overflow maximum string size");(u&1)===1&&(p+=R),u>>>=1,u!==0;)R+=R;return p}),D(a,"$+",function(u){var f=this;if(u=x(u,c("String"),"to_str"),u==""&&f.$$class===e.String)return f;if(f==""&&u.$$class===e.String)return u;var p=f+u;return f.encoding===p.encoding&&u.encoding===p.encoding||f.encoding.name==="UTF-8"||u.encoding.name==="UTF-8"?p:e.enc(p,f.encoding)}),D(a,"$<=>",function(u){var f=this;if(P(u["$respond_to?"]("to_str")))return u=u.$to_str().$to_s(),f>u?1:f<u?-1:0;var p=u["$<=>"](f);return p===l?l:p>0?-1:p<0?1:0}),D(a,"$==",function(u){var f=this;return u.$$is_string?f.toString()===u.toString():E(u,"$to_str")?u["$=="](f):!1}),D(a,"$=~",function(u){var f=this;return u.$$is_string&&k.$raise(c("TypeError"),"type mismatch: String given"),u["$=~"](f)}),D(a,"$[]",function(u,f){var p=this,R=p.length,L,T;if(u.$$is_range)return L=u.excl,T=u,f=u.end===l?-1:x(u.end,c("Integer"),"to_int"),u=u.begin===l?0:x(u.begin,c("Integer"),"to_int"),Math.abs(u)>R?l:(u<0&&(u+=R),f<0&&(f+=R),(!L||T.end===l)&&(f+=1),f=f-u,f<0&&(f=0),p.substr(u,f));if(u.$$is_string)return f!=null&&k.$raise(c("TypeError")),p.indexOf(u)!==-1?u:l;if(u.$$is_regexp){var J=p.match(u);return J===null?(g["~"]=l,l):(g["~"]=c("MatchData").$new(u,J),f==null?J[0]:(f=x(f,c("Integer"),"to_int"),f<0&&-f<J.length?J[f+=J.length]:f>=0&&f<J.length?J[f]:l))}return u=x(u,c("Integer"),"to_int"),u<0&&(u+=R),f==null?u>=R||u<0?l:p.substr(u,1):(f=x(f,c("Integer"),"to_int"),f<0||u>R||u<0?l:p.substr(u,f))},-2),D(a,"$b",function(){var u=this;return new String(u).$force_encoding("binary")}),D(a,"$capitalize",function(){var u=this;return u.charAt(0).toUpperCase()+u.substr(1).toLowerCase()}),D(a,"$casecmp",function(u){var f=this;if(!P(u["$respond_to?"]("to_str")))return l;u=x(u,c("String"),"to_str").$to_s();var p=/^[\x00-\x7F]*$/;return p.test(f)&&p.test(u)&&(f=f.toLowerCase(),u=u.toLowerCase()),f["$<=>"](u)}),D(a,"$casecmp?",function(u){var f=this,p=f.$casecmp(u);return p===l?l:p===0}),D(a,"$center",function(u,f){var p=this;if(f==null&&(f=" "),u=x(u,c("Integer"),"to_int"),f=x(f,c("String"),"to_str").$to_s(),P(f["$empty?"]())&&k.$raise(c("ArgumentError"),"zero width padding"),P(u<=p.length))return p;var R=p.$ljust(z(F(u,p.length),2).$ceil(),f),L=p.$rjust(z(F(u,p.length),2).$floor(),f);return L+R.slice(p.length)},-2),D(a,"$chomp",function(u){var f=this;if(g["/"]==null&&(g["/"]=l),u==null&&(u=g["/"]),P(u===l||f.length===0))return f;u=$e["$coerce_to!"](u,c("String"),"to_str").$to_s();var p;if(u===`
`)p=f.replace(/\r?\n?$/,"");else if(u==="")p=f.replace(/(\r?\n)+$/,"");else if(f.length>=u.length){var R=f.substr(f.length-u.length,u.length);R===u&&(p=f.substr(0,f.length-u.length))}return p??f},-1),D(a,"$chop",function(){var u=this,f=u.length,p;return f<=1?p="":u.charAt(f-1)===`
`&&u.charAt(f-2)==="\r"?p=u.substr(0,f-2):p=u.substr(0,f-1),p}),D(a,"$chr",function(){var u=this;return u.charAt(0)}),D(a,"$clone",function(u){var f,p=this,R=l;return u=A(u),f=M(u,"freeze"),f==null&&(f=l),P(f["$nil?"]())||q(f,!0)||q(f,!1)||p.$raise(n("ArgumentError"),"unexpected value for freeze: "+f.$class()),R=new String(p),R.$copy_singleton_methods(p),R.$initialize_clone(p,new Map([["freeze",f]])),q(f,!0)?R.$$frozen||(R.$$frozen=!0):P(f["$nil?"]())&&p.$$frozen&&(R.$$frozen=!0),R},-1),D(a,"$dup",function(){var u=this,f=l;return f=new String(u),f.$initialize_dup(u),f}),D(a,"$count",function(u){var f,p,R=this;f=G(arguments),p=f,p.length===0&&k.$raise(c("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var L=r(p);return L===null?0:R.length-R.replace(new RegExp(L,"g"),"").length},-1),D(a,"$delete",function(u){var f,p,R=this;f=G(arguments),p=f,p.length===0&&k.$raise(c("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var L=r(p);return L===null?R:R.replace(new RegExp(L,"g"),"")},-1),D(a,"$delete_prefix",function(u){var f=this;return u.$$is_string||(u=x(u,c("String"),"to_str")),f.slice(0,u.length)===u?f.slice(u.length):f}),D(a,"$delete_suffix",function(u){var f=this;return u.$$is_string||(u=x(u,c("String"),"to_str")),f.slice(f.length-u.length)===u?f.slice(0,f.length-u.length):f}),D(a,"$downcase",function(){var u=this;return u.toLowerCase()}),D(a,"$each_line",function s(u,f){var p=s.$$p||l,R,L,T,J,ee=this;if(g["/"]==null&&(g["/"]=l),s.$$p=null,R=G(arguments),L=w(R),L=A(L),R.length>0&&(T=R.shift()),T==null&&(T=g["/"]),J=M(L,"chomp"),J==null&&(J=!1),p===l)return ee.$enum_for("each_line",T,new Map([["chomp",J]]));if(T===l)return e.yield1(p,ee),ee;T=x(T,c("String"),"to_str");var ae,le,_e,de,ge,ve,me,be;if(T.length===0){for(ae=ee.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,_e=ae.length;le<_e;le+=2)(ae[le]||ae[le+1])&&(be=(ae[le]||"")+(ae[le+1]||""),J&&(be=be.$chomp(`
`)),e.yield1(p,be));return ee}for(ge=ee.$chomp(T),ve=ee.length!=ge.length,me=ge.split(T),le=0,de=me.length;le<de;le++)be=me[le],(le<de-1||ve)&&(be+=T),J&&(be=be.$chomp(T)),e.yield1(p,be);return ee},-1),D(a,"$empty?",function(){var u=this;return u.length===0}),D(a,"$end_with?",function(u){var f,p,R=this;f=G(arguments),p=f;for(var L=0,T=p.length;L<T;L++){var J=x(p[L],c("String"),"to_str").$to_s();if(R.length>=J.length&&R.substr(R.length-J.length,J.length)==J)return!0}return!1},-1),D(a,"$gsub",function s(u,f){var p=s.$$p||l,R=this;if(s.$$p=null,f===void 0&&p===l)return R.$enum_for("gsub",u);var L="",T=l,J=0,ee,ae;u.$$is_regexp?u=B(u):(u=x(u,c("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(ee=u.exec(R),ee===null){g["~"]=l,L+=R.slice(J);break}T=c("MatchData").$new(u,ee),f===void 0?(le=u.lastIndex,ae=p(ee[0]),u.lastIndex=le):f.$$is_hash?ae=f["$[]"](ee[0]).$to_s():(f.$$is_string||(f=x(f,c("String"),"to_str")),ae=f.replace(/([\\]+)([0-9+&`'])/g,function(_e,de,ge){if(de.length%2===0)return _e;switch(ge){case"+":for(var ve=ee.length-1;ve>0;ve--)if(ee[ve]!==void 0)return de.slice(1)+ee[ve];return"";case"&":return de.slice(1)+ee[0];case"`":return de.slice(1)+R.slice(0,ee.index);case"'":return de.slice(1)+R.slice(ee.index+ee[0].length);default:return de.slice(1)+(ee[ge]||"")}}).replace(/\\\\/g,"\\")),u.lastIndex===ee.index?(L+=R.slice(J,ee.index)+ae+(R[ee.index]||""),u.lastIndex+=1):L+=R.slice(J,ee.index)+ae,J=u.lastIndex}return g["~"]=T,L},-2),D(a,"$hex",function(){var u=this;return u.$to_i(16)}),D(a,"$include?",function(u){var f=this;return u.$$is_string||(u=x(u,c("String"),"to_str")),f.indexOf(u)!==-1}),D(a,"$index",function(u,f){var p=this,R,L,T;if(f===void 0)f=0;else if(f=x(f,c("Integer"),"to_int"),f<0&&(f+=p.length,f<0))return l;if(u.$$is_regexp)for(T=B(u);;){if(L=T.exec(p),L===null){g["~"]=l,R=-1;break}if(L.index>=f){g["~"]=c("MatchData").$new(T,L),R=L.index;break}T.lastIndex=L.index+1}else u=x(u,c("String"),"to_str"),u.length===0&&f>p.length?R=-1:R=p.indexOf(u,f);return R===-1?l:R},-2),D(a,"$inspect",function(){var u=this,f=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},R=u.replace(f,function(L){return p[L]?p[L]:(L=L.charCodeAt(0),L<=255&&(u.encoding["$binary?"]()||u.internal_encoding["$binary?"]())?"\\x"+("00"+L.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+L.toString(16).toUpperCase()).slice(-4))});return'"'+R.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),D(a,"$intern",function(){var u=this;return u.toString()}),D(a,"$length",function(){var u=this;return u.length}),y(a,"size","length"),D(a,"$lines",function s(u,f){var p=s.$$p||l,R,L,T,J,ee=this,ae=l;return g["/"]==null&&(g["/"]=l),s.$$p=null,R=G(arguments),L=w(R),L=A(L),R.length>0&&(T=R.shift()),T==null&&(T=g["/"]),J=M(L,"chomp"),J==null&&(J=!1),ae=O(ee,"each_line",[T,new Map([["chomp",J]])],p.$to_proc()),P(p)?ee:ae.$to_a()},-1),D(a,"$ljust",function(u,f){var p=this;if(f==null&&(f=" "),u=x(u,c("Integer"),"to_int"),f=x(f,c("String"),"to_str").$to_s(),P(f["$empty?"]())&&k.$raise(c("ArgumentError"),"zero width padding"),P(u<=p.length))return p;var R=-1,L="";for(u-=p.length;++R<u;)L+=f;return p+L.slice(0,u)},-2),D(a,"$lstrip",function(){var u=this;return u.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),D(a,"$ascii_only?",function(){var u=this;return u.encoding.ascii?/^[\x00-\x7F]*$/.test(u):!1}),D(a,"$match",function s(u,f){var p=s.$$p||l,R=this;return s.$$p=null,(H(n("String"),u)||P(u["$respond_to?"]("to_str")))&&(u=c("Regexp").$new(u.$to_str())),H(c("Regexp"),u)||k.$raise(c("TypeError"),"wrong argument type "+u.$class()+" (expected Regexp)"),O(u,"match",[R,f],p.$to_proc())},-2),D(a,"$match?",function(u,f){var p=this;return(H(n("String"),u)||P(u["$respond_to?"]("to_str")))&&(u=c("Regexp").$new(u.$to_str())),H(c("Regexp"),u)||k.$raise(c("TypeError"),"wrong argument type "+u.$class()+" (expected Regexp)"),u["$match?"](p,f)},-2),D(a,"$next",function(){var u=this,f=u.length;if(f===0)return"";for(var p=u,R=u.search(/[a-zA-Z0-9]/),L=!1,T;f--;){if(T=u.charCodeAt(f),T>=48&&T<=57||T>=65&&T<=90||T>=97&&T<=122)switch(T){case 57:L=!0,T=48;break;case 90:L=!0,T=65;break;case 122:L=!0,T=97;break;default:L=!1,T+=1}else R===-1?T===255?(L=!0,T=0):(L=!1,T+=1):L=!0;if(p=p.slice(0,f)+String.fromCharCode(T)+p.slice(f+1),L&&(f===0||f===R)){switch(T){case 65:break;case 97:break;default:T+=1}f===0?p=String.fromCharCode(T)+p:p=p.slice(0,f)+String.fromCharCode(T)+p.slice(f),L=!1}if(!L)break}return p}),D(a,"$oct",function(){var u=this,f,p=u,R=8;return/^\s*_/.test(p)?0:(p=p.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(L,T,J,ee){switch(ee.charAt(0)){case"+":case"-":return L;case"0":if(ee.charAt(1)==="x"&&J==="0x")return L}switch(J){case"0b":R=2;break;case"0":case"0o":R=8;break;case"0d":R=10;break;case"0x":R=16;break}return T+ee}),f=parseInt(p.replace(/_(?!_)/g,""),R),isNaN(f)?0:f)}),D(a,"$ord",function(){var u=this;return typeof u.codePointAt=="function"?u.codePointAt(0):u.charCodeAt(0)}),D(a,"$partition",function(u){var f=this,p,R;return u.$$is_regexp?(R=u.exec(f),R===null?p=-1:(c("MatchData").$new(u,R),u=R[0],p=R.index)):(u=x(u,c("String"),"to_str"),p=f.indexOf(u)),p===-1?[f,"",""]:[f.slice(0,p),f.slice(p,p+u.length),f.slice(p+u.length)]}),D(a,"$reverse",function(){var u=this;return u.split("").reverse().join("")}),D(a,"$rindex",function(u,f){var p=this,R,L,T,J;if(f===void 0)f=p.length;else if(f=x(f,c("Integer"),"to_int"),f<0&&(f+=p.length,f<0))return l;if(u.$$is_regexp){for(L=null,T=B(u);J=T.exec(p),!(J===null||J.index>f);)L=J,T.lastIndex=L.index+1;L===null?(g["~"]=l,R=-1):(c("MatchData").$new(T,L),R=L.index)}else u=x(u,c("String"),"to_str"),R=p.lastIndexOf(u,f);return R===-1?l:R},-2),D(a,"$rjust",function(u,f){var p=this;if(f==null&&(f=" "),u=x(u,c("Integer"),"to_int"),f=x(f,c("String"),"to_str").$to_s(),P(f["$empty?"]())&&k.$raise(c("ArgumentError"),"zero width padding"),P(u<=p.length))return p;var R=Math.floor(u-p.length),L=Math.floor(R/f.length),T=Array(L+1).join(f),J=R-T.length;return T+f.slice(0,J)+p},-2),D(a,"$rpartition",function(u){var f=this,p,R,L,T;if(u.$$is_regexp){for(R=null,L=B(u);T=L.exec(f),T!==null;)R=T,L.lastIndex=R.index+1;R===null?p=-1:(c("MatchData").$new(L,R),u=R[0],p=R.index)}else u=x(u,c("String"),"to_str"),p=f.lastIndexOf(u);return p===-1?["","",f]:[f.slice(0,p),f.slice(p,p+u.length),f.slice(p+u.length)]}),D(a,"$rstrip",function(){var u=this;return u.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),D(a,"$scan",function s(u,f){var p=s.$$p||l,R,L=this;s.$$p=null,f=A(f),R=M(f,"no_matchdata"),R==null&&(R=!1);var T=[],J=l,ee;for(u.$$is_regexp?u=B(u):(u=x(u,c("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(ee=u.exec(L))!=null;)J=c("MatchData").$new(u,ee,new Map([["no_matchdata",R]])),p===l?ee.length==1?T.push(ee[0]):T.push(J.$captures()):ee.length==1?e.yield1(p,ee[0]):e.yield1(p,J.$captures()),u.lastIndex===ee.index&&(u.lastIndex+=1);return R||(g["~"]=J),p!==l?L:T},-2),D(a,"$singleton_class",function(){var u=this;return e.get_singleton_class(u)}),D(a,"$split",function(u,f){var p=this,R=l;if(g[";"]==null&&(g[";"]=l),p.length===0)return[];if(f===void 0)f=0;else if(f=$e["$coerce_to!"](f,c("Integer"),"to_int"),f===1)return[p];(u===void 0||u===l)&&(u=P(R=g[";"])?R:" ");var L=[],T=p.toString(),J=0,ee,ae=0,le=0,_e,de;if(u.$$is_regexp?u=B(u):(u=x(u,c("String"),"to_str").$to_s(),u===" "&&(u=/\s+/gm,T=T.replace(/^\s+/,""))),L=T.split(u),L.length===1&&L[0]===T)return[L[0]];for(;(_e=L.indexOf(void 0))!==-1;)L.splice(_e,1);if(f===0){for(;L[L.length-1]==="";)L.pop();return L}if(u.$$is_regexp||(u=e.escape_regexp(u),u=new RegExp(u,"gm")),ee=u.exec(T),f<0){if(ee!==null&&ee[0]===""&&u.source.indexOf("(?=")===-1)for(_e=0,de=ee.length;_e<de;_e++)L.push("");return L}if(ee!==null&&ee[0]==="")return le=(ee.length-1)*(f-1)+f,L.splice(le-1,L.length-1,L.slice(le-1).join("")),L;if(f>=L.length)return L;for(;ee!==null&&(ae++,J=u.lastIndex,le+=ee.length,ae+1!==f);)ee=u.exec(T);return L.splice(le,L.length-1,T.slice(J)),L},-1),D(a,"$squeeze",function(u){var f,p,R=this;if(f=G(arguments),p=f,p.length===0)return R.replace(/(.)\1+/g,"$1");var L=r(p);return L===null?R:R.replace(new RegExp("("+L+")\\1+","g"),"$1")},-1),D(a,"$start_with?",function(u){var f,p,R=this;f=G(arguments),p=f;for(var L=0,T=p.length;L<T;L++)if(p[L].$$is_regexp){var J=p[L],ee=J.exec(R);if(ee!=null&&ee.index===0)return g["~"]=c("MatchData").$new(J,ee),!0;g["~"]=l}else{var ae=x(p[L],c("String"),"to_str").$to_s();if(R.length>=ae.length&&R.startsWith(ae))return!0}return!1},-1),D(a,"$strip",function(){var u=this;return u.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),D(a,"$sub",function s(u,f){var p=s.$$p||l,R=this;s.$$p=null,u.$$is_regexp||(u=x(u,c("String"),"to_str"),u=new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var L,T=u.exec(R);return T===null?(g["~"]=l,L=R.toString()):(c("MatchData").$new(u,T),f===void 0?(p===l&&k.$raise(c("ArgumentError"),"wrong number of arguments (1 for 2)"),L=R.slice(0,T.index)+p(T[0])+R.slice(T.index+T[0].length)):f.$$is_hash?L=R.slice(0,T.index)+f["$[]"](T[0]).$to_s()+R.slice(T.index+T[0].length):(f=x(f,c("String"),"to_str"),f=f.replace(/([\\]+)([0-9+&`'])/g,function(J,ee,ae){if(ee.length%2===0)return J;switch(ae){case"+":for(var le=T.length-1;le>0;le--)if(T[le]!==void 0)return ee.slice(1)+T[le];return"";case"&":return ee.slice(1)+T[0];case"`":return ee.slice(1)+R.slice(0,T.index);case"'":return ee.slice(1)+R.slice(T.index+T[0].length);default:return ee.slice(1)+(T[ae]||"")}}).replace(/\\\\/g,"\\"),L=R.slice(0,T.index)+f+R.slice(T.index+T[0].length))),L},-2),D(a,"$sum",function(u){var f=this;u==null&&(u=16),u=x(u,c("Integer"),"to_int");for(var p=0,R=f.length,L=0;L<R;L++)p+=f.charCodeAt(L);return u<=0?p:p&Math.pow(2,u)-1},-1),D(a,"$swapcase",function(){var u=this,f=u.replace(/([a-z]+)|([A-Z]+)/g,function(p,R,L){return R?p.toUpperCase():p.toLowerCase()});return f}),D(a,"$to_f",function(){var u=this;if(u.charAt(0)==="_")return 0;var f=parseFloat(u.replace(/_/g,""));return isNaN(f)||f==1/0||f==-1/0?0:f}),D(a,"$to_i",function(u){var f=this;u==null&&(u=10);var p,R=f.toLowerCase(),L=x(u,c("Integer"),"to_int");return(L===1||L<0||L>36)&&k.$raise(c("ArgumentError"),"invalid radix "+L),/^\s*_/.test(R)?0:(R=R.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(T,J,ee,ae){switch(ae.charAt(0)){case"+":case"-":return T;case"0":if(ae.charAt(1)==="x"&&ee==="0x"&&(L===0||L===16))return T}switch(ee){case"0b":if(L===0||L===2)return L=2,J+ae;break;case"0":case"0o":if(L===0||L===8)return L=8,J+ae;break;case"0d":if(L===0||L===10)return L=10,J+ae;break;case"0x":if(L===0||L===16)return L=16,J+ae;break}return T}),p=parseInt(R.replace(/_(?!_)/g,""),L),isNaN(p)?0:p)},-1),D(a,"$to_proc",function s(){s.$$p;var u=this,f=l,p=l,R=l;return s.$$p=null,f=u.valueOf(),p=e.jsid(f),R=O(k,"proc",[],function L(T){var J=L.$$p||l,ee,ae;L.$$p=null,ee=G(arguments),ae=ee,ae.length===0&&k.$raise(c("ArgumentError"),"no receiver given");var le=ae[0];le==null&&(le=l);var _e=le[p];return _e?ae=ae.slice(1):(_e=le.$method_missing,ae[0]=f),typeof J=="function"&&(_e.$$p=J),ae.length===0?_e.call(le):_e.apply(le,ae)},-1),R.$$source_location=l,R}),D(a,"$to_s",function(){var u=this;return u.toString()}),D(a,"$tr",function(u,f){var p=this;if(u=x(u,c("String"),"to_str").$to_s(),f=x(f,c("String"),"to_str").$to_s(),u.length==0||u===f)return p;var R,L,T,J,ee,ae,le,_e={},de=u.split(""),ge=de.length,ve=f.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],ge-=1);var N=[],K=null;for(L=!1,R=0;R<ge;R++)if(J=de[R],K==null)K=J,N.push(J);else if(J==="-")K==="-"?(N.push("-"),N.push("-")):R==ge-1?N.push("-"):L=!0;else if(L){for(ee=K.charCodeAt(0),ae=J.charCodeAt(0),ee>ae&&k.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(ee)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=ee+1;T<ae;T++)N.push(String.fromCharCode(T));N.push(J),L=null,K=null}else N.push(J);if(de=N,ge=de.length,be)for(R=0;R<ge;R++)_e[de[R]]=!0;else{if(me>0){var Y=[],Q=null;for(L=!1,R=0;R<me;R++)if(J=ve[R],Q==null)Q=J,Y.push(J);else if(J==="-")Q==="-"?(Y.push("-"),Y.push("-")):R==me-1?Y.push("-"):L=!0;else if(L){for(ee=Q.charCodeAt(0),ae=J.charCodeAt(0),ee>ae&&k.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(ee)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=ee+1;T<ae;T++)Y.push(String.fromCharCode(T));Y.push(J),L=null,Q=null}else Y.push(J);ve=Y,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(R=0;R<ne;R++)ve.push(se)}for(R=0;R<ge;R++)_e[de[R]]=ve[R]}var oe="";for(R=0,le=p.length;R<le;R++){J=p.charAt(R);var fe=_e[J];be?oe+=fe==null?ie:J:oe+=fe??J}return oe}),D(a,"$tr_s",function(u,f){var p=this;if(u=x(u,c("String"),"to_str").$to_s(),f=x(f,c("String"),"to_str").$to_s(),u.length==0)return p;var R,L,T,J,ee,ae,le,_e={},de=u.split(""),ge=de.length,ve=f.split(""),me=ve.length,be=!1,ie=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),ie=ve[me-1],ge-=1);var N=[],K=null;for(L=!1,R=0;R<ge;R++)if(J=de[R],K==null)K=J,N.push(J);else if(J==="-")K==="-"?(N.push("-"),N.push("-")):R==ge-1?N.push("-"):L=!0;else if(L){for(ee=K.charCodeAt(0),ae=J.charCodeAt(0),ee>ae&&k.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(ee)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=ee+1;T<ae;T++)N.push(String.fromCharCode(T));N.push(J),L=null,K=null}else N.push(J);if(de=N,ge=de.length,be)for(R=0;R<ge;R++)_e[de[R]]=!0;else{if(me>0){var Y=[],Q=null;for(L=!1,R=0;R<me;R++)if(J=ve[R],K==null)K=J,Y.push(J);else if(J==="-")Q==="-"?(Y.push("-"),Y.push("-")):R==me-1?Y.push("-"):L=!0;else if(L){for(ee=K.charCodeAt(0),ae=J.charCodeAt(0),ee>ae&&k.$raise(c("ArgumentError"),'invalid range "'+String.fromCharCode(ee)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=ee+1;T<ae;T++)Y.push(String.fromCharCode(T));Y.push(J),L=null,K=null}else Y.push(J);ve=Y,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(R=0;R<ne;R++)ve.push(se)}for(R=0;R<ge;R++)_e[de[R]]=ve[R]}var oe="",fe=null;for(R=0,le=p.length;R<le;R++){J=p.charAt(R);var _=_e[J];be?_==null?fe==null&&(oe+=ie,fe=!0):(oe+=J,fe=null):_!=null?(fe==null||fe!==_)&&(oe+=_,fe=_):(oe+=J,fe=null)}return oe}),D(a,"$upcase",function(){var u=this;return u.toUpperCase()}),D(a,"$upto",function s(u,f){var p=s.$$p||l,R=this;if(s.$$p=null,f==null&&(f=!1),p===l)return R.$enum_for("upto",u,f);var L,T,J=R.toString();if(u=x(u,c("String"),"to_str"),J.length===1&&u.length===1)for(L=J.charCodeAt(0),T=u.charCodeAt(0);L<=T&&!(f&&L===T);)p(String.fromCharCode(L)),L+=1;else if(parseInt(J,10).toString()===J&&parseInt(u,10).toString()===u)for(L=parseInt(J,10),T=parseInt(u,10);L<=T&&!(f&&L===T);)p(L.toString()),L+=1;else for(;J.length<=u.length&&J<=u&&!(f&&J===u);)p(J),J=J.$succ();return R},-2);function r(s){function u(_e){var de="",ge,ve=_e.length,me,be,ie,N,K;for(ge=0;ge<ve;ge++)if(me=_e.charAt(ge),me==="-"&&ge>0&&ge<ve-1&&!be){for(ie=_e.charCodeAt(ge-1),N=_e.charCodeAt(ge+1),ie>N&&k.$raise(c("ArgumentError"),'invalid range "'+ie+"-"+N+'" in string transliteration'),K=ie+1;K<N+1;K++)de+=String.fromCharCode(K);be=!0,ge++}else be=me==="\\",de+=me;return de}function f(_e,de){if(_e.length===0)return de;var ge="",ve,me=_e.length,be;for(ve=0;ve<me;ve++)be=_e.charAt(ve),de.indexOf(be)!==-1&&(ge+=be);return ge}var p,R,L,T,J,ee,ae="",le="";for(p=0,R=s.length;p<R;p++)L=x(s[p],c("String"),"to_str"),T=L.charAt(0)==="^"&&L.length>1,L=u(T?L.slice(1):L),T?le=f(le,L):ae=f(ae,L);if(ae.length>0&&le.length>0){for(ee="",p=0,R=ae.length;p<R;p++)J=ae.charAt(p),le.indexOf(J)===-1&&(ee+=J);ae=ee,le=""}return ae.length>0?"["+c("Regexp").$escape(ae)+"]":le.length>0?"[^"+c("Regexp").$escape(le)+"]":null}return D(a,"$instance_variables",function(){return[]}),V(a,"$_load",function(u){var f,p,R=this;return f=G(arguments),p=f,O(R,"new",j(p))},-1),D(a,"$unicode_normalize",function(u){var f=this;return u==null&&(u="nfc"),P(["nfc","nfd","nfkc","nfkd"]["$include?"](u))||k.$raise(c("ArgumentError"),"Invalid normalization form "+u),f.normalize(u.$upcase())},-1),D(a,"$unicode_normalized?",function(u){var f=this;return u==null&&(u="nfc"),f.$unicode_normalize(u)["$=="](f)},-1),D(a,"$unpack",function(u){return k.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),D(a,"$unpack1",function(u){return k.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),D(a,"$freeze",function(){var u=this;return typeof u=="string"||I(u,"$$frozen",!0),u}),D(a,"$-@",function(){var u=this;return typeof u=="string"||u.$$frozen?u:u.encoding.name=="UTF-8"&&u.internal_encoding.name=="UTF-8"?u.toString():u.$dup().$freeze()}),D(a,"$frozen?",function(){var u=this;return typeof u=="string"||u.$$frozen===!0}),y(a,"+@","dup"),y(a,"===","=="),y(a,"byteslice","[]"),y(a,"eql?","=="),y(a,"equal?","==="),y(a,"object_id","__id__"),y(a,"slice","[]"),y(a,"succ","next"),y(a,"to_str","to_s"),y(a,"to_sym","intern"),$e.$pristine(a,"initialize")}("::",String,S),o(S[0],"Symbol",h("String"))};Opal.modules["corelib/enumerable"]=function(e){var x=e.truthy,E=e.coerce_to,B=e.yield1,I=e.yieldX,re=e.deny_frozen_access,Z=e.module,C=e.send,W=e.slice,v=e.to_a,D=e.Opal,$e=e.thrower,V=e.def,G=e.Kernel,O=e.return_val,j=e.rb_gt,w=e.rb_times,A=e.rb_lt,M=e.eqeq,H=e.rb_plus,k=e.rb_minus,P=e.rb_divide,g=e.rb_le,z=e.lambda,F=e.not,q=e.alias,y=[],o=e.nil,d=e.$$$;return e.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(S,h){var l=Z(S,"Enumerable"),c=[l].concat(h),X=e.$r(c);function b(i){return i.length===0&&(i=[o]),i.length>1&&(i=[i]),i}return V(l,"$all?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,x(a!==void 0)?C(t,"each",[],function r(s){var u,f,p=o;if(u=W(arguments),f=u,p=b(f),x(C(a,"public_send",["==="].concat(v(p)))))return o;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):n!==o?C(t,"each",[],function r(s){var u,f;if(u=W(arguments),f=u,x(e.yieldX(n,v(f))))return o;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}):C(t,"each",[],function r(s){var u,f;if(u=W(arguments),f=u,x(D.$destructure(f)))return o;$.$throw(!1,r.$$is_lambda)},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),V(l,"$any?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,x(a!==void 0)?C(t,"each",[],function r(s){var u,f,p=o;if(u=W(arguments),f=u,p=b(f),x(C(a,"public_send",["==="].concat(v(p)))))$.$throw(!0,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):n!==o?C(t,"each",[],function r(s){var u,f;if(u=W(arguments),f=u,x(e.yieldX(n,v(f))))$.$throw(!0,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):C(t,"each",[],function r(s){var u,f;if(u=W(arguments),f=u,x(D.$destructure(f)))$.$throw(!0,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),!1}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),V(l,"$chunk",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o?C($,"to_enum",["chunk"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:$}):C(d("Enumerator"),"new",[],function n(t){var r=n.$$s==null?this:n.$$s;t==null&&(t=o);var s=o,u=[];function f(){u.length>0&&t.$yield(s,u)}r.$each.$$p=function(p){var R=B(a,p);R===o?(f(),u=[],s=o):(s===o||s===R?u.push(p):(f(),u=[p]),s=R)},r.$each(),f()},{$$s:$})}),V(l,"$chunk_while",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o&&G.$raise(d("ArgumentError"),"no block given"),C($,"slice_when",[],function(t,r){return t==null&&(t=o),r==null&&(r=o),e.yieldX(a,[t,r])["$!"]()})}),V(l,"$collect",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return C($,"enum_for",["collect"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$});var n=[];return $.$each.$$p=function(){var t=I(a,arguments);n.push(t)},$.$each(),n}),V(l,"$collect_concat",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o?C($,"enum_for",["collect_concat"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:$}):C($,"map",[],a.$to_proc()).$flatten(1)}),V(l,"$compact",function(){var a=this;return a.$to_a().$compact()}),V(l,"$count",function i(a){var $=i.$$p||o,n=this,t=o;return i.$$p=null,t=0,a!=null&&$!==o&&n.$warn("warning: given block not used"),x(a!=null)?$=C(G,"proc",[],function(s){var u,f;return u=W(arguments),f=u,D.$destructure(f)["$=="](a)},-1):x($["$nil?"]())&&($=C(G,"proc",[],O(!0))),C(n,"each",[],function(s){var u,f;return u=W(arguments),f=u,x(I($,f))?t++:o},-1),t},-1),V(l,"$cycle",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),$===o)return C(n,"enum_for",["cycle",a],function u(){var f=u.$$s==null?this:u.$$s;return x(a["$nil?"]())?x(f["$respond_to?"]("size"))?d(d("Float"),"INFINITY"):o:(a=D["$coerce_to!"](a,d("Integer"),"to_int"),x(j(a,0))?w(f.$enumerator_size(),a):0)},{$$s:n});if(!x(a["$nil?"]())&&(a=D["$coerce_to!"](a,d("Integer"),"to_int"),x(a<=0)))return o;var t=[],r,s;if(n.$each.$$p=function(){var u=D.$destructure(arguments);B($,u),t.push(u)},n.$each(),t.length===0)return o;if(a===o)for(;;)for(r=0,s=t.length;r<s;r++)B($,t[r]);else for(;a>1;){for(r=0,s=t.length;r<s;r++)B($,t[r]);a--}},-1),V(l,"$detect",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,n===o?t.$enum_for("detect",a):(C(t,"each",[],function r(s){var u,f,p=o;if(u=W(arguments),f=u,p=D.$destructure(f),x(e.yield1(n,p)))$.$throw(p,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),a!==void 0?typeof a=="function"?a():a:o)}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),V(l,"$drop",function(a){var $=this;a=E(a,d("Integer"),"to_int"),x(a<0)&&G.$raise(d("ArgumentError"),"attempt to drop negative size");var n=[],t=0;return $.$each.$$p=function(){a<=t&&n.push(D.$destructure(arguments)),t++},$.$each(),n}),V(l,"$drop_while",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return $.$enum_for("drop_while");var n=[],t=!0;return $.$each.$$p=function(){var r=D.$destructure(arguments);if(t){var s=B(a,r);x(s)||(t=!1,n.push(r))}else n.push(r)},$.$each(),n}),V(l,"$each_cons",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,x(arguments.length!=1)&&G.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),a=D.$try_convert(a,d("Integer"),"to_int"),x(a<=0)&&G.$raise(d("ArgumentError"),"invalid size"),$===o)return C(n,"enum_for",["each_cons",a],function r(){var s=r.$$s==null?this:r.$$s,u=o;return u=s.$enumerator_size(),x(u["$nil?"]())?o:M(u,0)||x(A(u,a))?0:H(k(u,a),1)},{$$s:n});var t=[];return n.$each.$$p=function(){var r=D.$destructure(arguments);t.push(r),t.length>a&&t.shift(),t.length==a&&B($,t.slice(0,a))},n.$each(),n}),V(l,"$each_entry",function i(a){var $=i.$$p||o,n,t,r=this;return i.$$p=null,n=W(arguments),t=n,$===o?C(r,"to_enum",["each_entry"].concat(v(t)),function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var s=D.$destructure(arguments);B($,s)},r.$each.apply(r,t),r)},-1),V(l,"$each_slice",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a=E(a,d("Integer"),"to_int"),x(a<=0)&&G.$raise(d("ArgumentError"),"invalid slice size"),$===o)return C(n,"enum_for",["each_slice",a],function r(){var s=r.$$s==null?this:r.$$s;return x(s["$respond_to?"]("size"))?P(s.$size(),a).$ceil():o},{$$s:n});var t=[];return n.$each.$$p=function(){var r=D.$destructure(arguments);t.push(r),t.length===a&&(B($,t),t=[])},n.$each(),t.length>0&&B($,t),n}),V(l,"$each_with_index",function i(a){var $=i.$$p||o,n,t,r=this;if(i.$$p=null,n=W(arguments),t=n,$===o)return C(r,"enum_for",["each_with_index"].concat(v(t)),function u(){var f=u.$$s==null?this:u.$$s;return f.$enumerator_size()},{$$s:r});var s=0;return r.$each.$$p=function(){var u=D.$destructure(arguments);$(u,s),s++},r.$each.apply(r,t),r},-1),V(l,"$each_with_object",function i(a){var $=i.$$p||o,n=this;return i.$$p=null,$===o?C(n,"enum_for",["each_with_object",a],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:n}):(n.$each.$$p=function(){var t=D.$destructure(arguments);$(t,a)},n.$each(),a)}),V(l,"$entries",function(a){var $,n,t=this;$=W(arguments),n=$;var r=[];return t.$each.$$p=function(){r.push(D.$destructure(arguments))},t.$each.apply(t,n),r},-1),V(l,"$filter_map",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o?C($,"enum_for",["filter_map"],function n(){var t=n.$$s==null?this:n.$$s;return t.$enumerator_size()},{$$s:$}):C(C($,"map",[],a.$to_proc()),"select",[],"itself".$to_proc())}),V(l,"$find_all",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return C($,"enum_for",["find_all"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$});var n=[];return $.$each.$$p=function(){var t=D.$destructure(arguments),r=B(a,t);x(r)&&n.push(t)},$.$each(),n}),V(l,"$find_index",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this,r=o;return i.$$p=null,x(a===void 0&&n===o)?t.$enum_for("find_index"):(a!=null&&n!==o&&t.$warn("warning: given block not used"),r=0,x(a!=null)?C(t,"each",[],function s(u){var f,p;return f=W(arguments),p=f,M(D.$destructure(p),a)&&$.$throw(r,s.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}):C(t,"each",[],function s(u){var f,p;return f=W(arguments),p=f,x(e.yieldX(n,v(p)))&&$.$throw(r,s.$$is_lambda),r+=1},{$$arity:-1,$$ret:$}),o)}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),V(l,"$first",function(a){try{var $=$e("return"),n=this,t=o,r=o;return x(a===void 0)?C(n,"each",[],function s(u){u==null&&(u=o),$.$throw(u,s.$$is_lambda)},{$$ret:$}):(t=[],a=E(a,d("Integer"),"to_int"),x(a<0)&&G.$raise(d("ArgumentError"),"attempt to take negative size"),x(a==0)?[]:(r=0,C(n,"each",[],function s(u){var f,p;if(f=W(arguments),p=f,t.push(D.$destructure(p)),x(a<=++r))$.$throw(t,s.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),t))}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),V(l,"$grep",function i(a){var $=i.$$p||o,n=this,t=o;return i.$$p=null,t=[],C(n,"each",[],function(s){var u,f,p=o;return u=W(arguments),f=u,p=b(f),x(C(a,"__send__",["==="].concat(v(p))))?($!==o?(x(j(f.$length(),1))&&(f=[f]),f=e.yieldX($,v(f))):x(g(f.$length(),1))&&(f=f["$[]"](0)),t.$push(f)):o},-1),t}),V(l,"$grep_v",function i(a){var $=i.$$p||o,n=this,t=o;return i.$$p=null,t=[],C(n,"each",[],function(s){var u,f,p=o;return u=W(arguments),f=u,p=b(f),x(C(a,"__send__",["==="].concat(v(p))))?o:($!==o?(x(j(f.$length(),1))&&(f=[f]),f=e.yieldX($,v(f))):x(g(f.$length(),1))&&(f=f["$[]"](0)),t.$push(f))},-1),t}),V(l,"$group_by",function i(){var a=i.$$p||o,$,n=this,t=o,r=o;return i.$$p=null,a===o?C(n,"enum_for",["group_by"],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:n}):(t=new Map,n.$each.$$p=function(){var s=D.$destructure(arguments),u=B(a,s);(x(r=t["$[]"](u))?r:($=[u,[]],C(t,"[]=",$),$[$.length-1]))["$<<"](s)},n.$each(),t)}),V(l,"$include?",function(a){try{var $=$e("return"),n=this;return C(n,"each",[],function t(r){var s,u;if(s=W(arguments),u=s,M(D.$destructure(u),a))$.$throw(!0,t.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),!1}catch(t){if(t===$)return t.$v;throw t}finally{$.is_orphan=!0}}),V(l,"$inject",function i(a,$){var n=i.$$p||o,t=this;i.$$p=null;var r=a;return n!==o&&$===void 0?t.$each.$$p=function(){var s=D.$destructure(arguments);if(r===void 0){r=s;return}s=I(n,[r,s]),r=s}:($===void 0&&(d("Symbol")["$==="](a)||G.$raise(d("TypeError"),""+a.$inspect()+" is not a Symbol"),$=a,r=void 0),t.$each.$$p=function(){var s=D.$destructure(arguments);if(r===void 0){r=s;return}r=r.$__send__($,s)}),t.$each(),r??o},-1),V(l,"$lazy",function(){var a=this;return C(d(d("Enumerator"),"Lazy"),"new",[a,a.$enumerator_size()],function(n,t){var r,s;return n==null&&(n=o),r=W(arguments,1),s=r,C(n,"yield",v(s))},-2)}),V(l,"$enumerator_size",function(){var a=this;return x(a["$respond_to?"]("size"))?a.$size():o}),V(l,"$max",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a===void 0||a===o){var t,r;return n.$each.$$p=function(){var s=D.$destructure(arguments);if(t===void 0){t=s;return}$!==o?r=I($,[s,t]):r=s["$<=>"](t),r===o&&G.$raise(d("ArgumentError"),"comparison failed"),r>0&&(t=s)},n.$each(),t===void 0?o:t}return a=E(a,d("Integer"),"to_int"),C(n,"sort",[],$.$to_proc()).$reverse().$first(a)},-1),V(l,"$max_by",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),!x($))return C(n,"enum_for",["max_by",a],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:n});if(!x(a["$nil?"]()))return C(n,"sort_by",[],$.$to_proc()).$reverse().$take(a);var t,r;return n.$each.$$p=function(){var s=D.$destructure(arguments),u=B($,s);if(t===void 0){t=s,r=u;return}u["$<=>"](r)>0&&(t=s,r=u)},n.$each(),t===void 0?o:t},-1),V(l,"$min",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),!x(a["$nil?"]()))return $!==o?C(n,"sort",[],function(s,u){return s==null&&(s=o),u==null&&(u=o),e.yieldX($,[s,u])}).$take(a):n.$sort().$take(a);var t;return $!==o?n.$each.$$p=function(){var r=D.$destructure(arguments);if(t===void 0){t=r;return}var s=$(r,t);s===o&&G.$raise(d("ArgumentError"),"comparison failed"),s<0&&(t=r)}:n.$each.$$p=function(){var r=D.$destructure(arguments);if(t===void 0){t=r;return}D.$compare(r,t)<0&&(t=r)},n.$each(),t===void 0?o:t},-1),V(l,"$min_by",function i(a){var $=i.$$p||o,n=this;if(i.$$p=null,a==null&&(a=o),!x($))return C(n,"enum_for",["min_by",a],function s(){var u=s.$$s==null?this:s.$$s;return u.$enumerator_size()},{$$s:n});if(!x(a["$nil?"]()))return C(n,"sort_by",[],$.$to_proc()).$take(a);var t,r;return n.$each.$$p=function(){var s=D.$destructure(arguments),u=B($,s);if(t===void 0){t=s,r=u;return}u["$<=>"](r)<0&&(t=s,r=u)},n.$each(),t===void 0?o:t},-1),V(l,"$minmax",function i(){var a=i.$$p||o,$=this,n=o;i.$$p=null,a=x(n=a)?n:C(G,"proc",[],function(f,p){return f==null&&(f=o),p==null&&(p=o),f["$<=>"](p)});var t=o,r=o,s=!0;return $.$each.$$p=function(){var u=D.$destructure(arguments);if(s)t=r=u,s=!1;else{var f=a.$call(t,u);f===o?G.$raise(d("ArgumentError"),"comparison failed"):f>0&&(t=u);var p=a.$call(r,u);p===o?G.$raise(d("ArgumentError"),"comparison failed"):p<0&&(r=u)}},$.$each(),[t,r]}),V(l,"$minmax_by",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,!x(a))return C($,"enum_for",["minmax_by"],function u(){var f=u.$$s==null?this:u.$$s;return f.$enumerator_size()},{$$s:$});var n=o,t=o,r,s;return $.$each.$$p=function(){var u=D.$destructure(arguments),f=B(a,u);(r===void 0||f["$<=>"](r)<0)&&(n=u,r=f),(s===void 0||f["$<=>"](s)>0)&&(t=u,s=f)},$.$each(),[n,t]}),V(l,"$none?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this;return i.$$p=null,x(a!==void 0)?C(t,"each",[],function r(s){var u,f,p=o;if(u=W(arguments),f=u,p=b(f),x(C(a,"public_send",["==="].concat(v(p)))))$.$throw(!1,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):n!==o?C(t,"each",[],function r(s){var u,f;if(u=W(arguments),f=u,x(e.yieldX(n,v(f))))$.$throw(!1,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):C(t,"each",[],function r(s){var u,f,p=o;if(u=W(arguments),f=u,p=D.$destructure(f),x(p))$.$throw(!1,r.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),!0}catch(r){if(r===$)return r.$v;throw r}finally{$.is_orphan=!0}},-1),V(l,"$one?",function i(a){try{var $=$e("return"),n=i.$$p||o,t=this,r=o;return i.$$p=null,r=0,x(a!==void 0)?C(t,"each",[],function s(u){var f,p,R=o;if(f=W(arguments),p=f,R=b(p),x(C(a,"public_send",["==="].concat(v(R)))))if(r=H(r,1),x(j(r,1)))$.$throw(!1,s.$$is_lambda);else return o;else return o},{$$arity:-1,$$ret:$}):n!==o?C(t,"each",[],function s(u){var f,p;if(f=W(arguments),p=f,!x(e.yieldX(n,v(p))))return o;if(r=H(r,1),x(j(r,1)))$.$throw(!1,s.$$is_lambda);else return o},{$$arity:-1,$$ret:$}):C(t,"each",[],function s(u){var f,p;if(f=W(arguments),p=f,!x(D.$destructure(p)))return o;if(r=H(r,1),x(j(r,1)))$.$throw(!1,s.$$is_lambda);else return o},{$$arity:-1,$$ret:$}),r["$=="](1)}catch(s){if(s===$)return s.$v;throw s}finally{$.is_orphan=!0}},-1),V(l,"$partition",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return C($,"enum_for",["partition"],function r(){var s=r.$$s==null?this:r.$$s;return s.$enumerator_size()},{$$s:$});var n=[],t=[];return $.$each.$$p=function(){var r=D.$destructure(arguments),s=B(a,r);x(s)?n.push(r):t.push(r)},$.$each(),[n,t]}),V(l,"$reject",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return C($,"enum_for",["reject"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$});var n=[];return $.$each.$$p=function(){var t=D.$destructure(arguments),r=B(a,t);x(r)||n.push(t)},$.$each(),n}),V(l,"$reverse_each",function i(){var a=i.$$p||o,$=this;if(i.$$p=null,a===o)return C($,"enum_for",["reverse_each"],function r(){var s=r.$$s==null?this:r.$$s;return s.$enumerator_size()},{$$s:$});var n=[];$.$each.$$p=function(){n.push(arguments)},$.$each();for(var t=n.length-1;t>=0;t--)I(a,n[t]);return n}),V(l,"$slice_before",function i(a){var $=i.$$p||o,n=this;return i.$$p=null,x(a===void 0&&$===o)&&G.$raise(d("ArgumentError"),"both pattern and block are given"),x(a!==void 0&&$!==o||arguments.length>1)&&G.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),C(d("Enumerator"),"new",[],function t(r){var s=t.$$s==null?this:t.$$s;r==null&&(r=o);var u=[];$!==o?a===void 0?s.$each.$$p=function(){var f=D.$destructure(arguments),p=B($,f);x(p)&&u.length>0&&(r["$<<"](u),u=[]),u.push(f)}:s.$each.$$p=function(){var f=D.$destructure(arguments),p=$(f,a.$dup());x(p)&&u.length>0&&(r["$<<"](u),u=[]),u.push(f)}:s.$each.$$p=function(){var f=D.$destructure(arguments),p=a["$==="](f);x(p)&&u.length>0&&(r["$<<"](u),u=[]),u.push(f)},s.$each(),u.length>0&&r["$<<"](u)},{$$s:n})},-1),V(l,"$slice_after",function i(a){var $=i.$$p||o,n=this;return i.$$p=null,x(a===void 0&&$===o)&&G.$raise(d("ArgumentError"),"both pattern and block are given"),x(a!==void 0&&$!==o||arguments.length>1)&&G.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),x(a!==void 0)&&($=C(G,"proc",[],function(r){return r==null&&(r=o),a["$==="](r)})),C(d("Enumerator"),"new",[],function t(r){var s=t.$$s==null?this:t.$$s;r==null&&(r=o);var u;s.$each.$$p=function(){var f=D.$destructure(arguments),p=B($,f);u==null&&(u=[]),x(p)?(u.push(f),r.$yield(u),u=null):u.push(f)},s.$each(),u!=null&&r.$yield(u)},{$$s:n})},-1),V(l,"$slice_when",function i(){var a=i.$$p||o,$=this;return i.$$p=null,a===o&&G.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1)"),C(d("Enumerator"),"new",[],function n(t){var r=n.$$s==null?this:n.$$s;t==null&&(t=o);var s=o,u=o;r.$each_cons.$$p=function(){var f=D.$destructure(arguments),p=f[0],R=f[1],L=I(a,[p,R]);u=R,s===o&&(s=[]),x(L)?(s.push(p),t.$yield(s),s=[]):s.push(p)},r.$each_cons(2),s!==o&&(s.push(u),t.$yield(s))},{$$s:$})}),V(l,"$sort",function i(){var a=i.$$p||o,$=this,n=o;return i.$$p=null,n=$.$to_a(),a===o&&(a=z(function(r,s){return r==null&&(r=o),s==null&&(s=o),r["$<=>"](s)})),C(n,"sort",[],a.$to_proc())}),V(l,"$sort_by",function i(){var a=i.$$p||o,$=this,n=o;return i.$$p=null,a===o?C($,"enum_for",["sort_by"],function t(){var r=t.$$s==null?this:t.$$s;return r.$enumerator_size()},{$$s:$}):(n=C($,"map",[],function(){var r=o;return r=D.$destructure(arguments),[e.yield1(a,r),r]}),C(n,"sort!",[],function(r,s){return r==null&&(r=o),s==null&&(s=o),r[0]["$<=>"](s[0])}),C(n,"map!",[],function(r){return r==null&&(r=o),r[1]}))}),V(l,"$sum",function i(a){var $=i.$$p||o,n=this,t=o,r=o;return i.$$p=null,a==null&&(a=0),t=a,r=0,C(n,"each",[],function(u){var f,p,R=o,L=o,T=o;return f=W(arguments),p=f,R=$!==o?e.yieldX($,v(p)):D.$destructure(p),F([d(d("Float"),"INFINITY"),d(d("Float"),"INFINITY")["$-@"]()]["$include?"](R))&&x(R["$respond_to?"]("-"))?(L=k(R,r),T=H(t,L),r=k(k(T,t),L),t=T):t=H(t,R)},-1),t},-1),V(l,"$take",function(a){var $=this;return $.$first(a)}),V(l,"$take_while",function i(){try{var a=$e("return"),$=i.$$p||o,n=this,t=o;return i.$$p=null,x($)?(t=[],C(n,"each",[],function r(s){var u,f,p=o;return u=W(arguments),f=u,p=D.$destructure(f),x(e.yield1($,p))||a.$throw(t,r.$$is_lambda),t.push(p)},{$$arity:-1,$$ret:a})):n.$enum_for("take_while")}catch(r){if(r===a)return r.$v;throw r}finally{a.is_orphan=!0}}),V(l,"$uniq",function i(){var a=i.$$p||o,$=this,n=o;return i.$$p=null,n=new Map,C($,"each",[],function(r){var s,u,f,p=o,R=o;return s=W(arguments),u=s,p=D.$destructure(u),R=a!==o?e.yield1(a,p):p,x(n["$key?"](R))?o:(f=[R,p],C(n,"[]=",f),f[f.length-1])},-1),n.$values()}),V(l,"$tally",function(a){var $=this,n=o;return a&&a!==o&&re(a),n=C(C($,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),x(a)?(C(n,"each",[],function(r,s){var u;return r==null&&(r=o),s==null&&(s=o),u=[r,H(a.$fetch(r,0),s)],C(a,"[]=",u),u[u.length-1]}),a):n},-1),V(l,"$to_h",function i(a){var $=i.$$p||o,n,t,r=this;if(i.$$p=null,n=W(arguments),t=n,$!==o)return C(C(r,"map",[],$.$to_proc()),"to_h",v(t));var s=new Map;return r.$each.$$p=function(){var u=D.$destructure(arguments),f=D["$coerce_to?"](u,d("Array"),"to_ary"),p,R;f.$$is_array||G.$raise(d("TypeError"),"wrong element type "+u.$class()+" (expected array)"),f.length!==2&&G.$raise(d("ArgumentError"),"element has wrong array length (expected 2, was "+f.$length()+")"),p=f[0],R=f[1],e.hash_put(s,p,R)},r.$each.apply(r,t),s},-1),V(l,"$to_set",function i(a,$){var n=i.$$p||o,t,r,s,u=this;return i.$$p=null,t=W(arguments),t.length>0&&(r=t.shift()),r==null&&(r=X("Set")),s=t,C(r,"new",[u].concat(v(s)),n.$to_proc())},-1),V(l,"$zip",function i(a){i.$$p;var $,n,t=this;return i.$$p=null,$=W(arguments),n=$,C(t.$to_a(),"zip",v(n))},-1),q(l,"find","detect"),q(l,"filter","find_all"),q(l,"flat_map","collect_concat"),q(l,"map","collect"),q(l,"member?","include?"),q(l,"reduce","inject"),q(l,"select","find_all"),q(l,"to_a","entries")}("::",y)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(e){var x=e.klass,E=e.truthy,B=e.to_a,I=e.eqeq,re=e.Kernel,Z=e.def,C=e.rb_gt,W=e.rb_lt,v=e.rb_le,D=e.rb_ge,$e=e.rb_plus,V=e.rb_minus,G=e.eqeqeq,O=e.not,j=e.rb_times,w=e.rb_divide,A=e.alias,M=[],H=e.nil,k=e.$$$;return e.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(P,g,z){var F=x(P,g,"Enumerator"),q=[F].concat(z);return function(y,o,d){var S=x(y,o,"ArithmeticSequence"),h=[S].concat(d),l=e.$r(h),c=S.$$prototype;c.step_arg2=c.receiver_num=c.step_arg1=c.step=c.range=c.topfx=c.bypfx=c.creation_method=c.skipped_arg=H,e.prop(S.$$prototype,"$$is_arithmetic_seq",!0);var X=1/0;return Z(S,"$initialize",function(i,a,$){var n,t=this,r=H;return $==null&&($="step"),t.creation_method=$,E(i["$is_a?"](k("Array")))?(n=[].concat(B(i)),t.step_arg1=n[0]==null?H:n[0],t.step_arg2=n[1]==null?H:n[1],t.topfx=n[2]==null?H:n[2],t.bypfx=n[3]==null?H:n[3],t.receiver_num=a,t.step=1,t.range=E(t.step_arg2)?(t.step=t.step_arg2,e.Range.$new(t.receiver_num,t.step_arg1,!1)):E(t.step_arg1)?e.Range.$new(t.receiver_num,t.step_arg1,!1):e.Range.$new(t.receiver_num,H,!1)):(E(a)||(t.skipped_arg=!0),n=[i,E(r=a)?r:1],t.range=n[0],t.step=n[1]),t.object=t,I(t.step,0)&&re.$raise(l("ArgumentError"),"step can't be 0"),E(t.step["$respond_to?"]("to_int"))?H:re.$raise(l("ArgumentError"),"no implicit conversion of "+t.step.$class()+" into Integer")},-2),S.$attr_reader("step"),Z(S,"$begin",function(){var i=this;return i.range.$begin()}),Z(S,"$end",function(){var i=this;return i.range.$end()}),Z(S,"$exclude_end?",function(){var i=this;return i.range["$exclude_end?"]()}),Z(S,"$_lesser_than_end?",function(i){var a=this,$=H,n=H;return $=E(n=a.$end())?n:X,E(C(a.$step(),0))?E(a["$exclude_end?"]())?W(i,$):v(i,$):E(a["$exclude_end?"]())?C(i,$):D(i,$)}),Z(S,"$_greater_than_begin?",function(i){var a=this,$=H,n=H;return $=E(n=a.$begin())?n:X["$-@"](),E(C(a.$step(),0))?C(i,$):W(i,$)}),Z(S,"$first",function(i){var a=this,$=H,n=H,t=H;if($=E(n=a.$begin())?n:X["$-@"](),!E(i))return E(a["$_lesser_than_end?"]($))?$:H;for(t=[];E(E(n=a["$_lesser_than_end?"]($))?C(i,0):n);)t["$<<"]($),$=$e($,a.$step()),i=V(i,1);return t},-1),Z(S,"$each",function b(){var i=b.$$p||H,a=this,$=H,n=H;if(b.$$p=null,i===H)return a;for(G(H,$=a.$begin())&&re.$raise(l("TypeError"),"nil can't be coerced into Integer"),n=E($=a.$begin())?$:X["$-@"]();E(a["$_lesser_than_end?"](n));)e.yield1(i,n),n=$e(n,a.$step());return a}),Z(S,"$last",function(i){var a=this,$=H,n=H,t=H;if(G(X,$=a.$end())||G(X["$-@"](),$)?re.$raise(k("FloatDomainError"),a.$end()):G(H,$)&&re.$raise(k("RangeError"),"cannot get the last element of endless arithmetic sequence"),n=V(a.$end(),V(a.$end(),a.$begin())["$%"](a.$step())),E(a["$_lesser_than_end?"](n))||(n=V(n,a.$step())),!E(i))return E(a["$_greater_than_begin?"](n))?n:H;for(t=[];E(E($=a["$_greater_than_begin?"](n))?C(i,0):$);)t["$<<"](n),n=V(n,a.$step()),i=V(i,1);return t.$reverse()},-1),Z(S,"$size",function(){var i=this,a=H,$=H;return a=E(C(i.$step(),0))?1:-1,O(i["$_lesser_than_end?"](i.$begin()))?0:E([X["$-@"](),X]["$include?"](i.$step()))?1:E([j(X["$-@"](),a),H]["$include?"](i.$begin()))||E([j(X,a),H]["$include?"](i.$end()))?X:($=V(i.$end(),V(i.$end(),i.$begin())["$%"](i.$step())),E(i["$_lesser_than_end?"]($))||($=V($,i.$step())),$e(w(V($,i.$begin()),i.$step()).$abs().$to_i(),1))}),Z(S,"$==",function(i){var a=this,$=H,n=H,t=H,r=H;return E($=E(n=E(t=E(r=a.$class()["$=="](i.$class()))?a.$begin()["$=="](i.$begin()):r)?a.$end()["$=="](i.$end()):t)?a.$step()["$=="](i.$step()):n)?a["$exclude_end?"]()["$=="](i["$exclude_end?"]()):$}),Z(S,"$hash",function(){var i=this;return[l("ArithmeticSequence"),i.$begin(),i.$end(),i.$step(),i["$exclude_end?"]()].$hash()}),Z(S,"$inspect",function(){var i=this,a=H;return E(i.receiver_num)?(a=E(i.step_arg2)?"("+i.topfx+i.step_arg1.$inspect()+", "+i.bypfx+i.step_arg2.$inspect()+")":E(i.step_arg1)?"("+i.topfx+i.step_arg1.$inspect()+")":H,"("+i.receiver_num.$inspect()+"."+i.creation_method+a+")"):(a=E(i.skipped_arg)?H:"("+i.step+")","(("+i.range.$inspect()+")."+i.creation_method+a+")")}),A(S,"===","=="),A(S,"eql?","==")}(F,F,q)}("::",null,M)};Opal.modules["corelib/enumerator/chain"]=function(e){var x=e.deny_frozen_access,E=e.klass,B=e.slice,I=e.def,re=e.send,Z=e.to_a,C=e.truthy,W=e.rb_plus,v=e.thrower,D=e.nil,$e=e.$$$;return e.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(V,G){var O=E(V,G,"Enumerator");return function(j,w){var A=E(j,w,"Chain"),M=A.$$prototype;return M.enums=M.iterated=D,I(A,"$initialize",function(k){var P,g,z=this;return P=B(arguments),g=P,x(z),z.enums=g,z.iterated=[],z.object=z},-1),I(A,"$each",function H(k){var P=H.$$p||D,g,z,F=this;return H.$$p=null,g=B(arguments),z=g,P===D?re(F,"to_enum",["each"].concat(Z(z)),function q(){var y=q.$$s==null?this:q.$$s;return y.$size()},{$$s:F}):(re(F.enums,"each",[],function q(y){var o=q.$$s==null?this:q.$$s;return o.iterated==null&&(o.iterated=D),y==null&&(y=D),o.iterated["$<<"](y),re(y,"each",Z(z),P.$to_proc())},{$$s:F}),F)},-1),I(A,"$size",function(k){try{var P=v("return"),g,z,F=this,q=D;return g=B(arguments),z=g,q=0,re(F.enums,"each",[],function y(o){var d=D;return o==null&&(o=D),d=re(o,"size",Z(z)),C([D,$e($e("Float"),"INFINITY")]["$include?"](d))&&P.$throw(d,y.$$is_lambda),q=W(q,d)},{$$ret:P}),q}catch(y){if(y===P)return y.$v;throw y}finally{P.is_orphan=!0}},-1),I(A,"$rewind",function(){var k=this;return re(k.iterated,"reverse_each",[],function(g){return g==null&&(g=D),C(g["$respond_to?"]("rewind"))?g.$rewind():D}),k.iterated=[],k}),I(A,"$inspect",function(){var k=this;return"#<Enumerator::Chain: "+k.enums.$inspect()+">"})}(O,O)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function(e){var x=e.deny_frozen_access,E=e.klass,B=e.truthy,I=e.Kernel,re=e.def,Z=e.slice,C=e.send,W=[],v=e.nil,D=e.$$$;return e.add_stubs("include,raise,new,to_proc"),function($e,V,G){var O=E($e,V,"Enumerator"),j=[O].concat(G);return function(w,A,M){var H=E(w,A,"Generator"),k=[H].concat(M),P=e.$r(k),g=H.$$prototype;return g.block=v,H.$include(D("Enumerable")),re(H,"$initialize",function z(){var F=z.$$p||v,q=this;return z.$$p=null,x(q),B(F)||I.$raise(D("LocalJumpError"),"no block given"),q.block=F}),re(H,"$each",function z(F){var q=z.$$p||v,y,o,d=this,S=v;z.$$p=null,y=Z(arguments),o=y,S=C(P("Yielder"),"new",[],q.$to_proc());try{o.unshift(S),e.yieldX(d.block,o)}catch(h){if(h&&h.$thrower_type=="breaker")return h.$v;throw h}return d},-1)}(j[0],null,j)}(W[0],null,W)};Opal.modules["corelib/enumerator/lazy"]=function(e){var x=e.truthy,E=e.coerce_to,B=e.yield1,I=e.yieldX,re=e.deny_frozen_access,Z=e.klass,C=e.slice,W=e.send2,v=e.find_super,D=e.to_a,$e=e.defs,V=e.Kernel,G=e.send,O=e.def,j=e.return_self,w=e.Opal,A=e.rb_lt,M=e.eqeqeq,H=e.rb_plus,k=e.alias,P=[],g=e.nil,z=e.$$$;return e.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(F,q,y){var o=Z(F,q,"Enumerator"),d=[o].concat(y);return function(S,h,l){var c=Z(S,h,"Lazy"),X=[c].concat(l),b=e.$r(X),i=c.$$prototype;return i.enumerator=g,Z(c,z("Exception"),"StopLazyError"),$e(c,"$for",function a($,n){var t,r,s=a.$$p||g,u=this,f=g;return a.$$p=null,t=C(arguments,1),r=t,f=W(u,v(u,"for",a,!1,!0),"for",[$].concat(D(r)),s),f.enumerator=$,f},-2),O(c,"$initialize",function a($,n){var t=a.$$p||g,r=this;return a.$$p=null,n==null&&(n=g),re(r),t===g&&V.$raise(z("ArgumentError"),"tried to call lazy new without a block"),r.enumerator=$,W(r,v(r,"initialize",a,!1,!0),"initialize",[n],function(u,f){var p,R;u==null&&(u=g),p=C(arguments,1),R=p;try{return G($,"each",D(R),function(T){var J,ee;J=C(arguments),ee=J,ee.unshift(u),I(t,ee)},-1)}catch(L){if(e.rescue(L,[b("StopLazyError")]))try{return g}finally{e.pop_exception(L)}else throw L}},-2)},-2),O(c,"$lazy",j),O(c,"$collect",function a(){var $=a.$$p||g,n=this;return a.$$p=null,x($)||V.$raise(z("ArgumentError"),"tried to call lazy map without a block"),G(b("Lazy"),"new",[n,n.$enumerator_size()],function(r,s){var u,f;r==null&&(r=g),u=C(arguments,1),f=u;var p=I($,f);r.$yield(p)},-2)}),O(c,"$collect_concat",function a(){var $=a.$$p||g,n=this;return a.$$p=null,x($)||V.$raise(z("ArgumentError"),"tried to call lazy map without a block"),G(b("Lazy"),"new",[n,g],function(r,s){var u,f;r==null&&(r=g),u=C(arguments,1),f=u;var p=I($,f);if(p["$respond_to?"]("force")&&p["$respond_to?"]("each"))G(p,"each",[],function(T){return T==null&&(T=g),r.$yield(T)});else{var R=w.$try_convert(p,z("Array"),"to_ary");R===g?r.$yield(p):G(p,"each",[],function(T){return T==null&&(T=g),r.$yield(T)})}},-2)}),O(c,"$drop",function($){var n=this,t=g,r=g,s=g;return $=E($,z("Integer"),"to_int"),x(A($,0))&&V.$raise(z("ArgumentError"),"attempt to drop negative size"),t=n.$enumerator_size(),r=M(z("Integer"),t)&&x(A($,t))?$:t,s=0,G(b("Lazy"),"new",[n,r],function(f,p){var R,L;return f==null&&(f=g),R=C(arguments,1),L=R,x(A(s,$))?s=H(s,1):G(f,"yield",D(L))},-2)}),O(c,"$drop_while",function a(){var $=a.$$p||g,n=this,t=g;return a.$$p=null,x($)||V.$raise(z("ArgumentError"),"tried to call lazy drop_while without a block"),t=!0,G(b("Lazy"),"new",[n,g],function(s,u){var f,p;if(s==null&&(s=g),f=C(arguments,1),p=f,x(t)){var R=I($,p);x(R)||(t=!1,G(s,"yield",D(p)))}else return G(s,"yield",D(p))},-2)}),O(c,"$enum_for",function a($,n){var t=a.$$p||g,r,s,u,f=this;return a.$$p=null,r=C(arguments),r.length>0&&(s=r.shift()),s==null&&(s="each"),u=r,G(f.$class(),"for",[f,s].concat(D(u)),t.$to_proc())},-1),O(c,"$find_all",function a(){var $=a.$$p||g,n=this;return a.$$p=null,x($)||V.$raise(z("ArgumentError"),"tried to call lazy select without a block"),G(b("Lazy"),"new",[n,g],function(r,s){var u,f;r==null&&(r=g),u=C(arguments,1),f=u;var p=I($,f);x(p)&&G(r,"yield",D(f))},-2)}),O(c,"$grep",function a($){var n=a.$$p||g,t=this;return a.$$p=null,x(n)?G(b("Lazy"),"new",[t,g],function(s,u){var f,p;s==null&&(s=g),f=C(arguments,1),p=f;var R=w.$destructure(p),L=$["$==="](R);x(L)&&(L=B(n,R),s.$yield(B(n,R)))},-2):G(b("Lazy"),"new",[t,g],function(s,u){var f,p;s==null&&(s=g),f=C(arguments,1),p=f;var R=w.$destructure(p),L=$["$==="](R);x(L)&&s.$yield(R)},-2)}),O(c,"$reject",function a(){var $=a.$$p||g,n=this;return a.$$p=null,x($)||V.$raise(z("ArgumentError"),"tried to call lazy reject without a block"),G(b("Lazy"),"new",[n,g],function(r,s){var u,f;r==null&&(r=g),u=C(arguments,1),f=u;var p=I($,f);x(p)||G(r,"yield",D(f))},-2)}),O(c,"$take",function($){var n=this,t=g,r=g,s=g;return $=E($,z("Integer"),"to_int"),x(A($,0))&&V.$raise(z("ArgumentError"),"attempt to take negative size"),t=n.$enumerator_size(),r=M(z("Integer"),t)&&x(A($,t))?$:t,s=0,G(b("Lazy"),"new",[n,r],function(f,p){var R,L;return f==null&&(f=g),R=C(arguments,1),L=R,x(A(s,$))?(G(f,"yield",D(L)),s=H(s,1)):V.$raise(b("StopLazyError"))},-2)}),O(c,"$take_while",function a(){var $=a.$$p||g,n=this;return a.$$p=null,x($)||V.$raise(z("ArgumentError"),"tried to call lazy take_while without a block"),G(b("Lazy"),"new",[n,g],function(r,s){var u,f;r==null&&(r=g),u=C(arguments,1),f=u;var p=I($,f);x(p)?G(r,"yield",D(f)):V.$raise(b("StopLazyError"))},-2)}),O(c,"$inspect",function(){var $=this;return"#<"+$.$class()+": "+$.enumerator.$inspect()+">"}),k(c,"force","to_a"),k(c,"filter","find_all"),k(c,"flat_map","collect_concat"),k(c,"map","collect"),k(c,"select","find_all"),k(c,"to_enum","enum_for")}(o,o,d)}("::",null,P)};Opal.modules["corelib/enumerator/yielder"]=function(e){var x=e.klass,E=e.def,B=e.slice,I=e.send,re=e.to_a,Z=[],C=e.nil;return e.add_stubs("yield,proc"),function(W,v,D){var $e=x(W,v,"Enumerator"),V=[$e].concat(D);return function(G,O){var j=x(G,O,"Yielder"),w=j.$$prototype;return w.block=C,E(j,"$initialize",function A(){var M=A.$$p||C,H=this;return A.$$p=null,H.block=M,H}),E(j,"$yield",function(M){var H,k,P=this;H=B(arguments),k=H;var g=e.yieldX(P.block,k);if(g&&g.$thrower_type=="break")throw g;return g},-1),E(j,"$<<",function(M){var H=this;return H.$yield(M),H}),E(j,"$to_proc",function(){var M=this;return I(M,"proc",[],function H(k){var P,g,z=H.$$s==null?this:H.$$s;return P=B(arguments),g=P,I(z,"yield",re(g))},{$$arity:-1,$$s:M})})}(V[0],null)}(Z[0],null,Z)};Opal.modules["corelib/enumerator"]=function(e){var x=e.slice,E=e.coerce_to,B=e.deny_frozen_access,I=e.klass,re=e.defs,Z=e.truthy,C=e.send,W=e.not,v=e.def,D=e.rb_plus,$e=e.to_a,V=e.Opal,G=e.send2,O=e.find_super,j=e.rb_ge,w=e.Kernel,A=e.rb_le,M=e.alias,H=e.top,k=[],P=e.nil,g=e.$$$;return e.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),H.$require("corelib/enumerable"),function(z,F,q){var y=I(z,F,"Enumerator"),o=[y].concat(q),d=e.$r(o),S=y.$$prototype;return S.size=S.args=S.object=S.method=S.values=S.cursor=P,y.$include(g("Enumerable")),y.$$prototype.$$is_enumerator=!0,re(y,"$for",function h(l,c,X){var b=h.$$p||P,i,a,$,n=this;h.$$p=null,i=x(arguments,1),i.length>0&&(a=i.shift()),a==null&&(a="each"),$=i;var t=n.$allocate();return t.object=l,t.size=b,t.method=a,t.args=$,t.cursor=0,t},-2),v(y,"$initialize",function h(l){var c=h.$$p||P,X=this;return h.$$p=null,x(arguments),B(X),X.cursor=0,Z(c)?(X.object=C(d("Generator"),"new",[],c.$to_proc()),X.method="each",X.args=[],X.size=arguments[0]||P,Z(X.size)&&W(X.size["$respond_to?"]("call"))?X.size=E(X.size,g("Integer"),"to_int"):P):(X.object=arguments[0],X.method=arguments[1]||"each",X.args=x(arguments,2),X.size=P)},-1),v(y,"$each",function h(l){var c=h.$$p||P,X,b,i=this;return h.$$p=null,X=x(arguments),b=X,Z(c["$nil?"]())&&Z(b["$empty?"]())?i:(b=D(i.args,b),Z(c["$nil?"]())?C(i.$class(),"new",[i.object,i.method].concat($e(b))):C(i.object,"__send__",[i.method].concat($e(b)),c.$to_proc()))},-1),v(y,"$size",function(){var l=this;return Z(l.size["$respond_to?"]("call"))?C(l.size,"call",$e(l.args)):l.size}),v(y,"$with_index",function h(l){var c=h.$$p||P,X=this;if(h.$$p=null,l==null&&(l=0),l=Z(l)?E(l,g("Integer"),"to_int"):0,!Z(c))return C(X,"enum_for",["with_index",l],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:X});var b=l;return X.$each.$$p=function(){var i=V.$destructure(arguments),a=c(i,b);return b++,a},X.$each()},-1),v(y,"$each_with_index",function h(){var l=h.$$p||P,c=this;return h.$$p=null,l===P?C(c,"enum_for",["each_with_index"],function X(){var b=X.$$s==null?this:X.$$s;return b.$size()},{$$s:c}):(G(c,O(c,"each_with_index",h,!1,!0),"each_with_index",[],l),c.object)}),v(y,"$rewind",function(){var l=this;return l.cursor=0,l}),v(y,"$peek_values",function(){var l=this,c=P;return l.values=Z(c=l.values)?c:C(l,"map",[],function(b){var i,a;return i=x(arguments),a=i,a},-1),Z(j(l.cursor,l.values.$length()))&&w.$raise(g("StopIteration"),"iteration reached an end"),l.values["$[]"](l.cursor)}),v(y,"$peek",function(){var l=this,c=P;return c=l.$peek_values(),Z(A(c.$length(),1))?c["$[]"](0):c}),v(y,"$next_values",function(){var l=this,c=P;return c=l.$peek_values(),l.cursor=D(l.cursor,1),c}),v(y,"$next",function(){var l=this,c=P;return c=l.$next_values(),Z(A(c.$length(),1))?c["$[]"](0):c}),v(y,"$feed",function(l){var c=this;return c.$raise(d("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),v(y,"$+",function(l){var c=this;return g(g("Enumerator"),"Chain").$new(c,l)}),v(y,"$inspect",function(){var l=this,c=P;return c="#<"+l.$class()+": "+l.object.$inspect()+":"+l.method,Z(l.args["$any?"]())&&(c=D(c,"("+l.args.$inspect()["$[]"](g("Range").$new(1,-2))+")")),D(c,">")}),M(y,"with_object","each_with_object"),y.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),y.$autoload("Chain","corelib/enumerator/chain"),y.$autoload("Generator","corelib/enumerator/generator"),y.$autoload("Lazy","corelib/enumerator/lazy"),y.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,k)};Opal.modules["corelib/numeric"]=function(e){var x=e.klass,E=e.truthy,B=e.Kernel,I=e.def,re=e.to_ary,Z=e.return_self,C=e.rb_minus,W=e.rb_times,v=e.rb_lt,D=e.eqeq,$e=e.rb_divide,V=e.return_val,G=e.Opal,O=e.slice,j=e.extract_kwargs,w=e.ensure_kwargs,A=e.hash_get,M=e.not,H=e.send,k=e.rb_ge,P=e.rb_le,g=e.rb_plus,z=e.rb_gt,F=e.alias,q=e.top,y=e.nil,o=e.$$$;return e.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),q.$require("corelib/comparable"),function(d,S){var h=x(d,S,"Numeric");return h.$include(o("Comparable")),I(h,"$coerce",function(c){var X=this;return E(c["$instance_of?"](X.$class()))?[c,X]:[B.$Float(c),B.$Float(X)]}),I(h,"$__coerced__",function(c,X){var b,i,a=this,$=y,n=y;if(E(X["$respond_to?"]("coerce")))return i=X.$coerce(a),b=re(i),$=b[0]==null?y:b[0],n=b[1]==null?y:b[1],$.$__send__(c,n);switch(c.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return B.$raise(o("TypeError"),""+X.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return B.$raise(o("ArgumentError"),"comparison of "+a.$class()+" with "+X.$class()+" failed");default:return y}}),I(h,"$<=>",function(c){var X=this;return E(X["$equal?"](c))?0:y}),I(h,"$+@",Z),I(h,"$-@",function(){var c=this;return C(0,c)}),I(h,"$%",function(c){var X=this;return C(X,W(c,X.$div(c)))}),I(h,"$abs",function(){var c=this;return E(v(c,0))?c["$-@"]():c}),I(h,"$abs2",function(){var c=this;return W(c,c)}),I(h,"$angle",function(){var c=this;return E(v(c,0))?o(o("Math"),"PI"):0}),I(h,"$ceil",function(c){var X=this;return c==null&&(c=0),X.$to_f().$ceil(c)},-1),I(h,"$conj",Z),I(h,"$denominator",function(){var c=this;return c.$to_r().$denominator()}),I(h,"$div",function(c){var X=this;return D(c,0)&&B.$raise(o("ZeroDivisionError"),"divided by o"),$e(X,c).$floor()}),I(h,"$divmod",function(c){var X=this;return[X.$div(c),X["$%"](c)]}),I(h,"$fdiv",function(c){var X=this;return $e(X.$to_f(),c)}),I(h,"$floor",function(c){var X=this;return c==null&&(c=0),X.$to_f().$floor(c)},-1),I(h,"$i",function(){var c=this;return B.$Complex(0,c)}),I(h,"$imag",V(0)),I(h,"$integer?",V(!1)),I(h,"$nonzero?",function(){var c=this;return E(c["$zero?"]())?y:c}),I(h,"$numerator",function(){var c=this;return c.$to_r().$numerator()}),I(h,"$polar",function(){var c=this;return[c.$abs(),c.$arg()]}),I(h,"$quo",function(c){var X=this;return $e(G["$coerce_to!"](X,o("Rational"),"to_r"),c)}),I(h,"$real",Z),I(h,"$real?",V(!0)),I(h,"$rect",function(){var c=this;return[c,0]}),I(h,"$round",function(c){var X=this;return X.$to_f().$round(c)},-1),I(h,"$step",function l(c,X,b){var i=l.$$p||y,a,$,n,t,r,s,u=this,f=y;l.$$p=null,a=O(arguments),$=j(a),$=w($),a.length>0&&(n=a.shift()),a.length>0&&(t=a.shift()),r=A($,"to"),s=A($,"by"),n!==void 0&&r!==void 0&&B.$raise(o("ArgumentError"),"to is given twice"),t!==void 0&&s!==void 0&&B.$raise(o("ArgumentError"),"step is given twice"),r!==void 0&&(n=r),s!==void 0&&(t=s),n===void 0&&(n=y);function p(){t===y&&B.$raise(o("TypeError"),"step must be numeric"),t!=null&&t["$=="](0)&&B.$raise(o("ArgumentError"),"step can't be 0"),(t===y||t==null)&&(t=1);var ge=t["$<=>"](0);ge===y&&B.$raise(o("ArgumentError"),"0 can't be coerced into "+t.$class()),(n===y||n==null)&&(n=ge>0?o(o("Float"),"INFINITY"):o(o("Float"),"INFINITY")["$-@"]()),G.$compare(u,n)}function R(){if(t>0&&u>n||t<0&&u<n)return 0;if(t===1/0||t===-1/0)return 1;var ge=Math.abs,ve=Math.floor,me=(ge(u)+ge(n)+ge(n-u))/ge(t)*o(o("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((n-u)/t+me)+1)}function L(){if(p(),t===0)return 1/0;if(t%1!==0)return R();if(t>0&&u>n||t<0&&u<n)return 0;var ge=Math.ceil,ve=Math.abs,me=ve(u-n)+1,be=ve(t);return ge(me/be)}if(i===y)return(M(n)||E(n["$is_a?"](o("Numeric"))))&&(M(t)||E(t["$is_a?"](o("Numeric"))))?o(o("Enumerator"),"ArithmeticSequence").$new([n,t,E(r)?"to: ":y,E(s)?"by: ":y],u):H(u,"enum_for",["step",n,t],L.$to_proc());p();var T=t["$negative?"](),J=t["$=="](0)||n===1/0&&!T||n===-1/0&&T;if(u.$$is_number&&t.$$is_number&&n.$$is_number)if(u%1===0&&(J||n%1===0)&&t%1===0){var ee=u;if(J)for(;;ee+=t)i(ee);else if(T)for(;ee>=n;ee+=t)i(ee);else for(;ee<=n;ee+=t)i(ee);return u}else{var ae=u.$to_f().valueOf();t=t.$to_f().valueOf(),n=n.$to_f().valueOf();var le=R();if(!isFinite(t))le!==0&&i(ae);else if(t===0)for(;;)i(ae);else for(var _e=0;_e<le;_e++){var de=_e*t+u;(t>=0?n<de:n>de)&&(de=n),i(de)}return u}for(f=u;E(T?k(f,n):P(f,n));)e.yield1(i,f),f=g(f,t)},-1),I(h,"$to_c",function(){var c=this;return B.$Complex(c,0)}),I(h,"$to_int",function(){var c=this;return c.$to_i()}),I(h,"$truncate",function(c){var X=this;return c==null&&(c=0),X.$to_f().$truncate(c)},-1),I(h,"$zero?",function(){var c=this;return c["$=="](0)}),I(h,"$positive?",function(){var c=this;return z(c,0)}),I(h,"$negative?",function(){var c=this;return v(c,0)}),I(h,"$dup",Z),I(h,"$clone",function(c){var X=this;return c=w(c),A(c,"freeze"),X},-1),I(h,"$finite?",V(!0)),I(h,"$infinite?",V(y)),F(h,"arg","angle"),F(h,"conjugate","conj"),F(h,"imaginary","imag"),F(h,"magnitude","abs"),F(h,"modulo","%"),F(h,"phase","arg"),F(h,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function(e){var x=e.truthy,E=e.falsy,B=e.yield1,I=e.hash_get,re=e.hash_put,Z=e.hash_delete,C=e.coerce_to,W=e.respond_to,v=e.deny_frozen_access,D=e.freeze,$e=e.opal32_init,V=e.opal32_add,G=e.klass,O=e.slice,j=e.defs,w=e.Kernel,A=e.def,M=e.Opal,H=e.eqeqeq,k=e.send2,P=e.find_super,g=e.send,z=e.rb_gt,F=e.rb_times,q=e.eqeq,y=e.rb_minus,o=e.to_a,d=e.to_ary,S=e.gvars,h=e.rb_ge,l=e.assign_ivar,c=e.rb_lt,X=e.return_self,b=e.neqeq,i=e.alias,a=e.top,$=[],n=e.nil,t=e.$$$;return e.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),a.$require("corelib/enumerable"),a.$require("corelib/numeric"),function(r,s,u){var f=G(r,s,"Array"),p=[f].concat(u),R=e.$r(p);f.$include(t("Enumerable")),e.prop(f.$$prototype,"$$is_array",!0);function L(ie){for(var N=ie[0],K=1,Y=ie.length;K<Y;K++)ie[K-1]=ie[K];return ie.pop(),N}function T(ie,N){return N.$$name===e.Array?ie:N.$allocate().$replace(ie.$to_a())}function J(ie,N,K){for(var Y,Q=null,ne=new Array(ie.length),se=0,oe=0;se<ie.length;se++){if(!Q)try{Y=B(K,ie[se])}catch(fe){Q=fe}(Q||N(Y))&&(ne[oe]=ie[se],oe+=1)}if(oe!==se&&(ie.splice.apply(ie,[0,ne.length].concat(ne)),ie.splice(oe,ne.length)),Q)throw Q}function ee(ie){return ie.$$is_array||(ie=C(ie,t("Array"),"to_ary")),ie.$to_a()}function ae(ie,N){var K=N.length;if(K>6&&K<32767)ie.push.apply(ie,N);else for(var Y=0;Y<K;Y++)ie.push(N[Y])}j(f,"$[]",function(N){var K,Y,Q=this;return K=O(arguments),Y=K,T(Y,Q)},-1),A(f,"$initialize",function ie(N,K){var Y=ie.$$p||n,Q=this;if(ie.$$p=null,N==null&&(N=n),K==null&&(K=n),v(Q),K!==n&&Y!==n&&w.$warn("warning: block supersedes default value argument"),N>t(t("Integer"),"MAX")&&w.$raise(t("ArgumentError"),"array size too big"),arguments.length>2&&w.$raise(t("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return Q.length>0&&Q.splice(0,Q.length),Q;if(arguments.length===1){if(N.$$is_array)return Q.$replace(N.$to_a()),Q;if(N["$respond_to?"]("to_ary"))return Q.$replace(N.$to_ary()),Q}N=C(N,t("Integer"),"to_int"),N<0&&w.$raise(t("ArgumentError"),"negative array size"),Q.splice(0,Q.length);var ne,se;if(Y===n)for(ne=0;ne<N;ne++)Q.push(K);else for(ne=0,se;ne<N;ne++)se=Y(ne),Q[ne]=se;return Q},-1),j(f,"$try_convert",function(N){return M["$coerce_to?"](N,t("Array"),"to_ary")}),A(f,"$&",function(N){var K=this;if(N=ee(N),K.length===0||N.length===0)return[];var Y=[],Q=new Map,ne,se,oe;for(ne=0,se=N.length;ne<se;ne++)re(Q,N[ne],!0);for(ne=0,se=K.length;ne<se;ne++)oe=K[ne],Z(Q,oe)!==void 0&&Y.push(oe);return Y}),A(f,"$|",function(N){var K=this;N=ee(N);var Y=new Map,Q,ne;for(Q=0,ne=K.length;Q<ne;Q++)re(Y,K[Q],!0);for(Q=0,ne=N.length;Q<ne;Q++)re(Y,N[Q],!0);return Y.$keys()}),A(f,"$*",function(N){var K=this;if(x(N["$respond_to?"]("to_str")))return K.$join(N.$to_str());N=C(N,t("Integer"),"to_int"),x(N<0)&&w.$raise(t("ArgumentError"),"negative argument");for(var Y=[],Q=K.$to_a(),ne=0;ne<N;ne++)Y=Y.concat(Q);return Y}),A(f,"$+",function(N){var K=this;return N=ee(N),K.concat(N)}),A(f,"$-",function(N){var K=this;if(N=ee(N),x(K.length===0))return[];if(x(N.length===0))return K.slice();var Y=[],Q=new Map,ne,se,oe;for(ne=0,se=N.length;ne<se;ne++)re(Q,N[ne],!0);for(ne=0,se=K.length;ne<se;ne++)oe=K[ne],I(Q,oe)===void 0&&Y.push(oe);return Y}),A(f,"$<<",function(N){var K=this;return v(K),K.push(N),K}),A(f,"$<=>",function(N){var K=this;if(H(t("Array"),N))N=N.$to_a();else if(x(N["$respond_to?"]("to_ary")))N=N.$to_ary().$to_a();else return n;if(K===N)return 0;for(var Y=Math.min(K.length,N.length),Q=0;Q<Y;Q++){var ne=K[Q]["$<=>"](N[Q]);if(ne!==0)return ne}return K.length["$<=>"](N.length)}),A(f,"$==",function(N){var K=this,Y={};function Q(ne,se){var oe,fe,_,m;if(ne===se)return!0;if(!se.$$is_array)return W(se,"$to_ary")?se["$=="](ne):!1;if(ne.$$constructor!==Array&&(ne=ne.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),ne.length!==se.length)return!1;for(Y[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(_=ne[oe],m=se[oe],_.$$is_array){if(m.$$is_array&&m.length!==_.length||!Y.hasOwnProperty(_.$object_id())&&!Q(_,m))return!1}else if(!_["$=="](m))return!1;return!0}return Q(K,N)});function le(ie,N){var K=ie.length,Y,Q,ne,se;return Y=N.excl,Q=N.begin===n?0:C(N.begin,e.Integer,"to_int"),ne=N.end===n?-1:C(N.end,e.Integer,"to_int"),Q<0&&(Q+=K,Q<0)||(N.excl_rev&&N.begin!==n&&(Q+=1),Q>K)?n:ne<0&&(ne+=K,ne<0)?[]:((!Y||N.end===n)&&(ne+=1),se=ie.slice(Q,ne),se)}function _e(ie,N){var K,Y=[],Q=0,ne;for(N.step<0?(ne={begin:N.range.end,end:N.range.begin,excl:!1,excl_rev:N.range.excl},K=le(ie,ne).$reverse()):K=le(ie,N.range);Q<K.length;)Y.push(K[Q]),Q+=Math.abs(N.step);return Y}function de(ie,N,K){var Y=ie.length,Q;return N=C(N,e.Integer,"to_int"),N<0&&(N+=Y,N<0)?n:K===void 0?N>=Y||N<0?n:ie[N]:(K=C(K,e.Integer,"to_int"),K<0||N>Y||N<0?n:(Q=ie.slice(N,N+K),Q))}A(f,"$[]",function(N,K){var Y=this;return N.$$is_range?le(Y,N):N.$$is_arithmetic_seq?_e(Y,N):de(Y,N,K)},-2),A(f,"$[]=",function(N,K,Y){var Q=this,ne=n,se=n;v(Q),ne=n;var oe,fe=Q.length;if(N.$$is_range){K.$$is_array?ne=K.$to_a():K["$respond_to?"]("to_ary")?ne=K.$to_ary().$to_a():ne=[K];var _=N.excl,m=N.begin===n?0:C(N.begin,e.Integer,"to_int"),U=N.end===n?-1:C(N.end,e.Integer,"to_int");if(m<0&&(m+=fe,m<0&&w.$raise(t("RangeError"),""+N.$inspect()+" out of range")),U<0&&(U+=fe),(!_||N.end===n)&&(U+=1),m>fe)for(oe=fe;oe<m;oe++)Q[oe]=n;return U<0?Q.splice.apply(Q,[m,0].concat(ne)):Q.splice.apply(Q,[m,U-m].concat(ne)),K}else{Y===void 0?se=1:(se=K,K=Y,K.$$is_array?ne=K.$to_a():K["$respond_to?"]("to_ary")?ne=K.$to_ary().$to_a():ne=[K]);var te;if(N=C(N,t("Integer"),"to_int"),se=C(se,t("Integer"),"to_int"),N<0&&(te=N,N+=fe,N<0&&w.$raise(t("IndexError"),"index "+te+" too small for array; minimum "+-Q.length)),se<0&&w.$raise(t("IndexError"),"negative length ("+se+")"),N>fe)for(oe=fe;oe<N;oe++)Q[oe]=n;return Y===void 0?Q[N]=K:Q.splice.apply(Q,[N,se].concat(ne)),K}},-3),A(f,"$any?",function ie(N){var K=ie.$$p||n,Y=this;return ie.$$p=null,Y.length===0?!1:k(Y,P(Y,"any?",ie,!1,!0),"any?",[N],K)},-1),A(f,"$assoc",function(N){for(var K=this,Y=0,Q=K.length,ne;Y<Q;Y++)if(ne=K[Y],ne.length&&ne[0]["$=="](N))return ne;return n}),A(f,"$at",function(N){var K=this;return N=C(N,t("Integer"),"to_int"),N<0&&(N+=K.length),N<0||N>=K.length?n:K[N]}),A(f,"$bsearch_index",function ie(){var N=ie.$$p||n,K=this;if(ie.$$p=null,N===n)return K.$enum_for("bsearch_index");for(var Y=0,Q=K.length,ne,se,oe,fe=!1,_=n;Y<Q;){if(ne=Y+Math.floor((Q-Y)/2),se=K[ne],oe=B(N,se),oe===!0)_=ne,fe=!0;else if(oe===!1||oe===n)fe=!1;else if(oe.$$is_number){if(oe===0)return ne;fe=oe<0}else w.$raise(t("TypeError"),"wrong argument type "+oe.$class()+" (must be numeric, true, false or nil)");fe?Q=ne:Y=ne+1}return _}),A(f,"$bsearch",function ie(){var N=ie.$$p||n,K=this,Y=n;return ie.$$p=null,N===n?K.$enum_for("bsearch"):(Y=g(K,"bsearch_index",[],N.$to_proc()),Y!=null&&Y.$$is_number?K[Y]:Y)}),A(f,"$cycle",function ie(N){var K=ie.$$p||n,Y=this;if(ie.$$p=null,N==null&&(N=n),K===n)return g(Y,"enum_for",["cycle",N],function se(){var oe=se.$$s==null?this:se.$$s;return x(N["$nil?"]())?t(t("Float"),"INFINITY"):(N=M["$coerce_to!"](N,t("Integer"),"to_int"),x(z(N,0))?F(oe.$enumerator_size(),N):0)},{$$s:Y});if(x(Y["$empty?"]())||q(N,0))return n;var Q,ne;if(N===n)for(;;)for(Q=0,ne=Y.length;Q<ne;Q++)B(K,Y[Q]);else{if(N=M["$coerce_to!"](N,t("Integer"),"to_int"),N<=0)return Y;for(;N>0;){for(Q=0,ne=Y.length;Q<ne;Q++)B(K,Y[Q]);N--}}return Y},-1),A(f,"$clear",function(){var N=this;return v(N),N.splice(0,N.length),N}),A(f,"$count",function ie(N){var K=ie.$$p||n,Y=this;return ie.$$p=null,x(N!==void 0)||x(K)?k(Y,P(Y,"count",ie,!1,!0),"count",[N],K):Y.$size()},-1),A(f,"$initialize_copy",function(N){var K=this;return K.$replace(N)}),A(f,"$collect",function ie(){var N=ie.$$p||n,K=this;if(ie.$$p=null,N===n)return g(K,"enum_for",["collect"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:K});for(var Y=[],Q=0;Q<K.length;Q++){var ne=B(N,K[Q]);Y[Q]=ne}return Y}),A(f,"$collect!",function ie(){var N=ie.$$p||n,K=this;if(ie.$$p=null,N===n)return g(K,"enum_for",["collect!"],function ne(){var se=ne.$$s==null?this:ne.$$s;return se.$size()},{$$s:K});v(K);for(var Y=0;Y<K.length;Y++){var Q=B(N,K[Y]);K[Y]=Q}return K});function ge(ie,N){return ie===N||N===0?1:N>0&&ie>N?ge(ie-1,N-1)+ge(ie-1,N):0}A(f,"$combination",function ie(N){var K=ie.$$p||n,Y=this,Q=n;if(ie.$$p=null,Q=M["$coerce_to!"](N,t("Integer"),"to_int"),K===n)return g(Y,"enum_for",["combination",Q],function te(){var ue=te.$$s==null?this:te.$$s;return ge(ue.length,Q)},{$$s:Y});var ne,se,oe,fe,_,m,U;if(Q===0)e.yield1(K,[]);else if(Q===1)for(ne=0,se=Y.length;ne<se;ne++)e.yield1(K,[Y[ne]]);else if(Q===Y.length)e.yield1(K,Y.slice());else if(Q>=0&&Q<Y.length){for(oe=[],ne=0;ne<=Q+1;ne++)oe.push(0);for(fe=[],_=0,m=!1,oe[0]=-1;!m;){for(fe[_]=Y[oe[_+1]];_<Q-1;)_++,U=oe[_+1]=oe[_]+1,fe[_]=Y[U];e.yield1(K,fe.slice()),_++;do m=_===0,oe[_]++,_--;while(oe[_+1]+Q===Y.length+_+1)}}return Y}),A(f,"$repeated_combination",function ie(N){var K=ie.$$p||n,Y=this,Q=n;if(ie.$$p=null,Q=M["$coerce_to!"](N,t("Integer"),"to_int"),K===n)return g(Y,"enum_for",["repeated_combination",Q],function se(){var oe=se.$$s==null?this:se.$$s;return ge(oe.length+Q-1,Q)},{$$s:Y});function ne(se,oe,fe,_){if(fe.length==se){var m=fe.slice();e.yield1(K,m);return}for(var U=oe;U<_.length;U++)fe.push(_[U]),ne(se,U,fe,_),fe.pop()}return Q>=0&&ne(Q,0,[],Y),Y}),A(f,"$compact",function(){for(var N=this,K=[],Y=0,Q=N.length,ne;Y<Q;Y++)(ne=N[Y])!==n&&K.push(ne);return K}),A(f,"$compact!",function(){var N=this;v(N);for(var K=N.length,Y=0,Q=N.length;Y<Q;Y++)N[Y]===n&&(N.splice(Y,1),Q--,Y--);return N.length===K?n:N}),A(f,"$concat",function(N){var K,Y,Q=this;return K=O(arguments),Y=K,v(Q),Y=g(Y,"map",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;return se==null&&(se=n),se=ee(se),x(se["$equal?"](oe))&&(se=se.$dup()),se},{$$s:Q}),g(Y,"each",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;se==null&&(se=n);for(var fe=0,_=se.length;fe<_;fe++)oe.push(se[fe])},{$$s:Q}),Q},-1),A(f,"$delete",function ie(N){var K=ie.$$p||n,Y=this;ie.$$p=null;for(var Q=Y.length,ne=0,se=Q;ne<se;ne++)Y[ne]["$=="](N)&&(v(Y),Y.splice(ne,1),se--,ne--);return Y.length===Q?K!==n?e.yieldX(K,[]):n:N}),A(f,"$delete_at",function(N){var K=this;if(v(K),N=C(N,t("Integer"),"to_int"),N<0&&(N+=K.length),N<0||N>=K.length)return n;var Y=K[N];return K.splice(N,1),Y}),A(f,"$delete_if",function ie(){var N=ie.$$p||n,K=this;return ie.$$p=null,N===n?g(K,"enum_for",["delete_if"],function Y(){var Q=Y.$$s==null?this:Y.$$s;return Q.$size()},{$$s:K}):(v(K),J(K,E,N),K)}),A(f,"$difference",function(N){var K,Y,Q=this;return K=O(arguments),Y=K,g(Y,"reduce",[Q.$to_a().$dup()],function(se,oe){return se==null&&(se=n),oe==null&&(oe=n),y(se,oe)})},-1),A(f,"$dig",function(N,K){var Y,Q,ne=this,se=n;return Y=O(arguments,1),Q=Y,se=ne["$[]"](N),se===n||Q.length===0?se:(x(se["$respond_to?"]("dig"))||w.$raise(t("TypeError"),""+se.$class()+" does not have #dig method"),g(se,"dig",o(Q)))},-2),A(f,"$drop",function(N){var K=this;return N=C(N,t("Integer"),"to_int"),N<0&&w.$raise(t("ArgumentError")),K.slice(N)}),A(f,"$dup",function ie(){var N=ie.$$p||n,K=this;return ie.$$p=null,K.$$class===e.Array&&K.$$class.$allocate.$$pristine&&K.$copy_instance_variables.$$pristine&&K.$initialize_dup.$$pristine?K.slice(0):k(K,P(K,"dup",ie,!1,!0),"dup",[],N)}),A(f,"$each",function ie(){var N=ie.$$p||n,K=this;if(ie.$$p=null,N===n)return g(K,"enum_for",["each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:K});for(var Y=0;Y<K.length;Y++)B(N,K[Y]);return K}),A(f,"$each_index",function ie(){var N=ie.$$p||n,K=this;if(ie.$$p=null,N===n)return g(K,"enum_for",["each_index"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:K});for(var Y=0;Y<K.length;Y++)B(N,Y);return K}),A(f,"$empty?",function(){var N=this;return N.length===0}),A(f,"$eql?",function(N){var K=this,Y={};function Q(ne,se){var oe,fe,_,m;if(!se.$$is_array||(se=se.$to_a(),ne.length!==se.length))return!1;for(Y[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(_=ne[oe],m=se[oe],_.$$is_array){if(m.$$is_array&&m.length!==_.length||!Y.hasOwnProperty(_.$object_id())&&!Q(_,m))return!1}else if(!_["$eql?"](m))return!1;return!0}return Q(K,N)}),A(f,"$fetch",function ie(N,K){var Y=ie.$$p||n,Q=this;ie.$$p=null;var ne=N;if(N=C(N,t("Integer"),"to_int"),N<0&&(N+=Q.length),N>=0&&N<Q.length)return Q[N];if(Y!==n&&K!=null&&Q.$warn("warning: block supersedes default value argument"),Y!==n)return Y(ne);if(K!=null)return K;Q.length===0?w.$raise(t("IndexError"),"index "+ne+" outside of array bounds: 0...0"):w.$raise(t("IndexError"),"index "+ne+" outside of array bounds: -"+Q.length+"..."+Q.length)},-2),A(f,"$fill",function ie(N){var K=ie.$$p||n,Y,Q,ne,se,oe=this,fe=n,_=n,m=n,U=n,te=n;ie.$$p=null,Y=O(arguments),Q=Y,v(oe);var ue,ce;if(x(K)?(x(Q.length>2)&&w.$raise(t("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 0..2)"),se=Q,ne=d(se),fe=ne[0]==null?n:ne[0],_=ne[1]==null?n:ne[1]):(x(Q.length==0)?w.$raise(t("ArgumentError"),"wrong number of arguments (0 for 1..3)"):x(Q.length>3)&&w.$raise(t("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 1..3)"),se=Q,ne=d(se),m=ne[0]==null?n:ne[0],fe=ne[1]==null?n:ne[1],_=ne[2]==null?n:ne[2]),H(t("Range"),fe)){if(x(_)&&w.$raise(t("TypeError"),"length invalid with range"),U=fe.begin===n?0:C(fe.begin,t("Integer"),"to_int"),x(U<0)&&(U+=this.length),x(U<0)&&w.$raise(t("RangeError"),""+fe.$inspect()+" out of range"),te=fe.end===n?-1:C(fe.end,t("Integer"),"to_int"),x(te<0)&&(te+=this.length),x(fe["$exclude_end?"]())||(te+=1),x(te<=U))return oe}else if(x(fe))if(U=C(fe,t("Integer"),"to_int"),x(U<0)&&(U+=this.length),x(U<0)&&(U=0),x(_)){if(te=C(_,t("Integer"),"to_int"),x(te==0))return oe;te+=U}else te=this.length;else U=0,te=this.length;if(x(U>this.length))for(ue=this.length;ue<te;ue++)oe[ue]=n;if(x(te>this.length)&&(this.length=te),x(K))for(this.length;U<te;U++)ce=K(U),oe[U]=ce;else for(this.length;U<te;U++)oe[U]=m;return oe},-1),A(f,"$first",function(N){var K=this;return N==null?K.length===0?n:K[0]:(N=C(N,t("Integer"),"to_int"),N<0&&w.$raise(t("ArgumentError"),"negative array size"),K.slice(0,N))},-1),A(f,"$flatten",function(N){var K=this;function Y(Q,ne){var se=[],oe,fe,_,m;for(Q=Q.$to_a(),oe=0,fe=Q.length;oe<fe;oe++){if(_=Q[oe],!W(_,"$to_ary",!0)){se.push(_);continue}if(m=_.$to_ary(),m===n){se.push(_);continue}switch(m.$$is_array||w.$raise(t("TypeError")),m===K&&w.$raise(t("ArgumentError")),ne){case void 0:se=se.concat(Y(m));break;case 0:se.push(m);break;default:ae(se,Y(m,ne-1))}}return se}return N!==void 0&&(N=C(N,t("Integer"),"to_int")),Y(K,N)},-1),A(f,"$flatten!",function(N){var K=this;v(K);var Y=K.$flatten(N);if(K.length==Y.length){for(var Q=0,ne=K.length;Q<ne&&K[Q]===Y[Q];Q++);if(Q==ne)return n}return K.$replace(Y),K},-1),A(f,"$freeze",function(){var N=this;return x(N["$frozen?"]())?N:D(N)});var ve;A(f,"$hash",function(){var N=this,K=ve===void 0,Y=$e(),Q=N.$object_id(),ne,se,oe;if(Y=V(Y,10),Y=V(Y,N.length),K)ve=Object.create(null);else if(ve[Q])return V(Y,16843009);try{for(oe in ve)if(ne=ve[oe],N["$eql?"](ne))return V(Y,16843009);for(ve[Q]=N,se=0;se<N.length;se++)ne=N[se],Y=V(Y,ne.$hash());return Y}finally{K&&(ve=void 0)}}),A(f,"$include?",function(N){for(var K=this,Y=0,Q=K.length;Y<Q;Y++)if(K[Y]["$=="](N))return!0;return!1}),A(f,"$index",function ie(N){var K=ie.$$p||n,Y=this;ie.$$p=null;var Q,ne,se;if(N!=null&&K!==n&&Y.$warn("warning: given block not used"),N!=null){for(Q=0,ne=Y.length;Q<ne;Q++)if(Y[Q]["$=="](N))return Q}else if(K!==n){for(Q=0;Q<Y.length;Q++)if(se=K(Y[Q]),se!==!1&&se!==n)return Q}else return Y.$enum_for("index");return n},-1),A(f,"$insert",function(N,K){var Y,Q,ne=this;if(Y=O(arguments,1),Q=Y,v(ne),N=C(N,t("Integer"),"to_int"),Q.length>0){if(N<0&&(N+=ne.length+1,N<0&&w.$raise(t("IndexError"),""+N+" is out of bounds")),N>ne.length)for(var se=ne.length;se<N;se++)ne.push(n);ne.splice.apply(ne,[N,0].concat(Q))}return ne},-2);var me=[];A(f,"$inspect",function(){var N=this,K=[],Y=N.$__id__(),Q=!0;return function(){try{if(me.indexOf(Y)!==-1)return Q=!1,"[...]";me.push(Y);for(var ne=0,se=N.length;ne<se;ne++){var oe=N["$[]"](ne);K.push(R("Opal").$inspect(oe))}return"["+K.join(", ")+"]"}finally{Q&&me.pop()}}()}),A(f,"$intersection",function(N){var K,Y,Q=this,ne=n,se=n;return K=O(arguments),Y=K,Y.length===0?Q.$to_a().$dup():(Y=Y.map(ee),Q.length===0?[]:(Y=g(Y,"sort_by",[],"length".$to_proc()),x(Q.length<Y[0].length)?g(Y,"reduce",[Q],"&".$to_proc()):(ne=Y.pop(),se=g(Y,"reduce",[ne],"&".$to_proc()),Q["$&"](se))))},-1),A(f,"$intersect?",function(N){var K=this,Y,Q,ne=new Map,se,oe;for(K.length<N.length?(Y=K,Q=N):(Y=N,Q=K),se=0,oe=Y.length;se<oe;se++)re(ne,Y[se],!0);for(se=0,oe=Q.length;se<oe;se++)if(I(ne,Q[se]))return!0;return!1}),A(f,"$join",function(N){var K=this;if(S[","]==null&&(S[","]=n),N==null&&(N=n),x(K.length===0))return"";x(N===n)&&(N=S[","]);var Y=[],Q,ne,se,oe;for(Q=0,ne=K.length;Q<ne;Q++){if(se=K[Q],W(se,"$to_str")&&(oe=se.$to_str(),oe!==n)){Y.push(oe.$to_s());continue}if(W(se,"$to_ary")&&(oe=se.$to_ary(),oe===K&&w.$raise(t("ArgumentError")),oe!==n)){Y.push(oe.$join(N));continue}if(W(se,"$to_s")&&(oe=se.$to_s(),oe!==n)){Y.push(oe);continue}w.$raise(t("NoMethodError").$new(""+R("Opal").$inspect(K.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return N===n?Y.join(""):Y.join(M["$coerce_to!"](N,t("String"),"to_str").$to_s())},-1),A(f,"$keep_if",function ie(){var N=ie.$$p||n,K=this;return ie.$$p=null,N===n?g(K,"enum_for",["keep_if"],function Y(){var Q=Y.$$s==null?this:Y.$$s;return Q.$size()},{$$s:K}):(v(K),J(K,x,N),K)}),A(f,"$last",function(N){var K=this;return N==null?K.length===0?n:K[K.length-1]:(N=C(N,t("Integer"),"to_int"),N<0&&w.$raise(t("ArgumentError"),"negative array size"),N>K.length&&(N=K.length),K.slice(K.length-N,K.length))},-1),A(f,"$length",function(){var N=this;return N.length}),A(f,"$max",function ie(N){var K=ie.$$p||n,Y=this;return ie.$$p=null,g(Y.$each(),"max",[N],K.$to_proc())},-1),A(f,"$min",function ie(){var N=ie.$$p||n,K=this;return ie.$$p=null,g(K.$each(),"min",[],N.$to_proc())});function be(ie,N){for(var K=N>=0?1:0;N;)K*=ie,ie--,N--;return K}return A(f,"$permutation",function ie(N){var K=ie.$$p||n,Y=this,Q=n,ne=n;if(ie.$$p=null,K===n)return g(Y,"enum_for",["permutation",N],function m(){var U=m.$$s==null?this:m.$$s;return be(U.length,N===void 0?U.length:N)},{$$s:Y});var se,oe,fe;if(N===void 0?N=Y.length:N=C(N,t("Integer"),"to_int"),!(N<0||Y.length<N))if(N===0)e.yield1(K,[]);else if(N===1)for(var _=0;_<Y.length;_++)e.yield1(K,[Y[_]]);else Q=R("Array").$new(N),ne=R("Array").$new(Y.length,!1),se=function(m,U,te,ue,ce){Y=this;for(var he=0;he<Y.length;he++)if(ue["$[]"](he)["$!"]())if(U[te]=he,te<m-1)ue[he]=!0,se.call(Y,m,U,te+1,ue,ce),ue[he]=!1;else{fe=[];for(var pe=0;pe<U.length;pe++)fe.push(Y[U[pe]]);B(ce,fe)}},K!==n?(oe=Y.slice(),se.call(oe,N,Q,0,ne,K)):se.call(Y,N,Q,0,ne,K);return Y},-1),A(f,"$repeated_permutation",function ie(N){var K=ie.$$p||n,Y=this,Q=n;if(ie.$$p=null,Q=M["$coerce_to!"](N,t("Integer"),"to_int"),K===n)return g(Y,"enum_for",["repeated_permutation",Q],function se(){var oe=se.$$s==null?this:se.$$s;return x(h(Q,0))?oe.$size()["$**"](Q):0},{$$s:Y});function ne(se,oe,fe){if(oe.length==se){var _=oe.slice();e.yield1(K,_);return}for(var m=0;m<fe.length;m++)oe.push(fe[m]),ne(se,oe,fe),oe.pop()}return ne(Q,[],Y.slice()),Y}),A(f,"$pop",function(N){var K=this;return v(K),x(N===void 0)?x(K.length===0)?n:K.pop():(N=C(N,t("Integer"),"to_int"),x(N<0)&&w.$raise(t("ArgumentError"),"negative array size"),x(K.length===0)?[]:x(N===1)?[K.pop()]:x(N>K.length)?K.splice(0,K.length):K.splice(K.length-N,K.length))},-1),A(f,"$product",function ie(N){var K=ie.$$p||n,Y,Q,ne=this;ie.$$p=null,Y=O(arguments),Q=Y;var se=K!==n?null:[],oe=Q.length+1,fe=new Array(oe),_=new Array(oe),m=new Array(oe),U,te,ue,ce,he=1;for(m[0]=ne,U=1;U<oe;U++)m[U]=C(Q[U-1],t("Array"),"to_ary");for(U=0;U<oe;U++){if(ce=m[U].length,ce===0)return se||ne;he*=ce,he>2147483647&&w.$raise(t("RangeError"),"too big to product"),_[U]=ce,fe[U]=0}e:for(;;){for(ue=[],U=0;U<oe;U++)ue.push(m[U][fe[U]]);for(se?se.push(ue):e.yield1(K,ue),te=oe-1,fe[te]++;fe[te]===_[te];){if(fe[te]=0,--te<0)break e;fe[te]++}}return se||ne},-1),A(f,"$push",function(N){var K,Y,Q=this;return K=O(arguments),Y=K,v(Q),ae(Q,Y),Q},-1),A(f,"$rassoc",function(N){for(var K=this,Y=0,Q=K.length,ne;Y<Q;Y++)if(ne=K[Y],ne.length&&ne[1]!==void 0&&ne[1]["$=="](N))return ne;return n}),A(f,"$reject",function ie(){var N=ie.$$p||n,K=this;if(ie.$$p=null,N===n)return g(K,"enum_for",["reject"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:K});for(var Y=[],Q=0,ne;Q<K.length;Q++)ne=N(K[Q]),(ne===!1||ne===n)&&Y.push(K[Q]);return Y}),A(f,"$reject!",function ie(){var N=ie.$$p||n,K=this,Y=n;return ie.$$p=null,N===n?g(K,"enum_for",["reject!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:K}):(v(K),Y=K.$length(),g(K,"delete_if",[],N.$to_proc()),q(K.$length(),Y)?n:K)}),A(f,"$replace",function(N){var K=this;return v(K),N=ee(N),K.length>0&&K.splice(0,K.length),ae(K,N),K}),A(f,"$reverse",function(){var N=this;return N.slice(0).reverse()}),A(f,"$reverse!",function(){var N=this;return v(N),N.reverse()}),A(f,"$reverse_each",function ie(){var N=ie.$$p||n,K=this;if(ie.$$p=null,N===n)return g(K,"enum_for",["reverse_each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:K});for(var Y=K.length-1;Y>=0;Y--)B(N,K[Y]);return K}),A(f,"$rindex",function ie(N){var K=ie.$$p||n,Y=this;ie.$$p=null;var Q,ne;if(N!=null&&K!==n&&Y.$warn("warning: given block not used"),N!=null){for(Q=Y.length-1;Q>=0&&!(Q>=Y.length);Q--)if(Y[Q]["$=="](N))return Q}else if(K!==n){for(Q=Y.length-1;Q>=0&&!(Q>=Y.length);Q--)if(ne=K(Y[Q]),ne!==!1&&ne!==n)return Q}else if(N==null)return Y.$enum_for("rindex");return n},-1),A(f,"$rotate",function(N){var K=this;N==null&&(N=1);var Y,Q,ne,se;return N=C(N,t("Integer"),"to_int"),K.length===1?K.slice():K.length===0?[]:(Y=K.slice(),Q=N%Y.length,ne=Y.slice(Q),se=Y.slice(0,Q),ne.concat(se))},-1),A(f,"$rotate!",function(N){var K=this,Y=n;return N==null&&(N=1),v(K),K.length===0||K.length===1?K:(N=C(N,t("Integer"),"to_int"),Y=K.$rotate(N),K.$replace(Y))},-1),function(ie,N){var K=G(ie,N,"SampleRandom"),Y=K.$$prototype;return Y.rng=n,A(K,"$initialize",l("rng")),A(K,"$rand",function(ne){var se=this,oe=n;return oe=C(se.rng.$rand(ne),t("Integer"),"to_int"),x(oe<0)&&w.$raise(t("RangeError"),"random value must be >= 0"),x(oe<ne)||w.$raise(t("RangeError"),"random value must be less than Array size"),oe})}(f,null),A(f,"$sample",function(N,K){var Y=this,Q=n,ne=n;if(x(N===void 0))return Y.$at(w.$rand(Y.length));if(x(K===void 0)?x(Q=M["$coerce_to?"](N,t("Hash"),"to_hash"))?(K=Q,N=n):(K=n,N=C(N,t("Integer"),"to_int")):(N=C(N,t("Integer"),"to_int"),K=C(K,t("Hash"),"to_hash")),x(N)&&x(N<0)&&w.$raise(t("ArgumentError"),"count must be greater than 0"),x(K)&&(ne=K["$[]"]("random")),ne=x(ne)&&x(ne["$respond_to?"]("rand"))?R("SampleRandom").$new(ne):w,!x(N))return Y[ne.$rand(Y.length)];var se,oe,fe,_,m,U,te,ue;switch(N>Y.length&&(N=Y.length),N){case 0:return[];case 1:return[Y[ne.$rand(Y.length)]];case 2:return _=ne.$rand(Y.length),m=ne.$rand(Y.length-1),_<=m&&m++,[Y[_],Y[m]];default:if(Y.length/N>3){for(se=!1,oe=0,fe=R("Array").$new(N),_=1,fe[0]=ne.$rand(Y.length);_<N;){for(U=ne.$rand(Y.length),m=0;m<_;){for(;U===fe[m];){if(oe++,oe>100){se=!0;break}U=ne.$rand(Y.length)}if(se)break;m++}if(se)break;fe[_]=U,_++}if(!se){for(_=0;_<N;)fe[_]=Y[fe[_]],_++;return fe}}fe=Y.slice();for(var ce=0;ce<N;ce++)te=ne.$rand(Y.length-ce)+ce,ue=fe[ce],fe[ce]=fe[te],fe[te]=ue;return N===Y.length?fe:fe["$[]"](0,N)}},-1),A(f,"$select",function ie(){var N=ie.$$p||n,K=this;if(ie.$$p=null,N===n)return g(K,"enum_for",["select"],function oe(){var fe=oe.$$s==null?this:oe.$$s;return fe.$size()},{$$s:K});for(var Y=[],Q=0,ne,se;Q<K.length;Q++)ne=K[Q],se=B(N,ne),x(se)&&Y.push(ne);return Y}),A(f,"$select!",function ie(){var N=ie.$$p||n,K=this;if(ie.$$p=null,N===n)return g(K,"enum_for",["select!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:K});v(K);var Y=K.length;return g(K,"keep_if",[],N.$to_proc()),K.length===Y?n:K}),A(f,"$shift",function(N){var K=this;return v(K),x(N===void 0)?x(K.length===0)?n:L(K):(N=C(N,t("Integer"),"to_int"),x(N<0)&&w.$raise(t("ArgumentError"),"negative array size"),x(K.length===0)?[]:K.splice(0,N))},-1),A(f,"$shuffle",function(N){var K=this;return K.$dup().$to_a()["$shuffle!"](N)},-1),A(f,"$shuffle!",function(N){var K=this;v(K);var Y,Q=K.length,ne,se;for(N!==void 0&&(N=M["$coerce_to?"](N,t("Hash"),"to_hash"),N!==n&&(N=N["$[]"]("random"),N!==n&&N["$respond_to?"]("rand")&&(Y=N)));Q;)Y?(ne=Y.$rand(Q).$to_int(),ne<0&&w.$raise(t("RangeError"),"random number too small "+ne),ne>=Q&&w.$raise(t("RangeError"),"random number too big "+ne)):ne=K.$rand(Q),se=K[--Q],K[Q]=K[ne],K[ne]=se;return K},-1),A(f,"$slice!",function(N,K){var Y=this,Q=n,ne=n,se=n,oe=n,fe=n;if(v(Y),Q=n,x(K===void 0))if(H(t("Range"),N)){ne=N,Q=Y["$[]"](ne),se=ne.begin===n?0:C(ne.begin,t("Integer"),"to_int"),oe=ne.end===n?-1:C(ne.end,t("Integer"),"to_int"),se<0&&(se+=Y.length),oe<0?oe+=Y.length:oe>=Y.length&&(oe=Y.length-1,ne.excl&&(oe+=1));var _=oe-se;ne.excl&&ne.end!==n?oe-=1:_+=1,se<Y.length&&se>=0&&oe<Y.length&&oe>=0&&_>0&&Y.splice(se,_)}else{if(fe=C(N,t("Integer"),"to_int"),fe<0&&(fe+=Y.length),fe<0||fe>=Y.length)return n;Q=Y[fe],fe===0?Y.shift():Y.splice(fe,1)}else{if(fe=C(N,t("Integer"),"to_int"),K=C(K,t("Integer"),"to_int"),K<0)return n;Q=Y["$[]"](fe,K),fe<0&&(fe+=Y.length),fe+K>Y.length&&(K=Y.length-fe),fe<Y.length&&fe>=0&&Y.splice(fe,K)}return Q},-2),A(f,"$sort",function ie(){var N=ie.$$p||n,K=this;return ie.$$p=null,x(K.length>1)?(N===n&&(N=function(Y,Q){return Y["$<=>"](Q)}),K.slice().sort(function(Y,Q){var ne=N(Y,Q);return ne===n&&w.$raise(t("ArgumentError"),"comparison of "+Y.$inspect()+" with "+Q.$inspect()+" failed"),z(ne,0)?1:c(ne,0)?-1:0})):K}),A(f,"$sort!",function ie(){var N=ie.$$p||n,K=this;ie.$$p=null,v(K);var Y;N!==n?Y=g(K.slice(),"sort",[],N.$to_proc()):Y=K.slice().$sort(),K.length=0;for(var Q=0,ne=Y.length;Q<ne;Q++)K.push(Y[Q]);return K}),A(f,"$sort_by!",function ie(){var N=ie.$$p||n,K=this;return ie.$$p=null,N===n?g(K,"enum_for",["sort_by!"],function Y(){var Q=Y.$$s==null?this:Y.$$s;return Q.$size()},{$$s:K}):(v(K),K.$replace(g(K,"sort_by",[],N.$to_proc())))}),A(f,"$take",function(N){var K=this;return N<0&&w.$raise(t("ArgumentError")),K.slice(0,N)}),A(f,"$take_while",function ie(){var N=ie.$$p||n,K=this;ie.$$p=null;for(var Y=[],Q=0,ne,se;Q<K.length;Q++){if(ne=K[Q],se=N(ne),se===!1||se===n)return Y;Y.push(ne)}return Y}),A(f,"$to_a",function(){var N=this;return N.$$class===e.Array?N:e.Array.$new(N)}),A(f,"$to_ary",X),A(f,"$to_h",function ie(){var N=ie.$$p||n,K=this,Y=n;ie.$$p=null,Y=K,N!==n&&(Y=g(Y,"map",[],N.$to_proc()));var Q,ne=Y.length,se,oe,fe,_=new Map;for(Q=0;Q<ne;Q++)se=M["$coerce_to?"](Y[Q],t("Array"),"to_ary"),se.$$is_array||w.$raise(t("TypeError"),"wrong element type "+Y[Q].$class()+" at "+Q+" (expected array)"),se.length!==2&&w.$raise(t("ArgumentError"),"element has wrong array length at "+Q+" (expected 2, was "+se.$length()+")"),oe=se[0],fe=se[1],re(_,oe,fe);return _}),A(f,"$transpose",function(){var N=this,K=n,Y=n;return x(N["$empty?"]())?[]:(K=[],Y=n,g(N,"each",[],function(ne){var se=n;return ne==null&&(ne=n),ne=ee(ne),Y=x(se=Y)?se:ne.length,b(ne.length,Y)&&w.$raise(t("IndexError"),"element size differs ("+ne.length+" should be "+Y+")"),g(ne.length,"times",[],function(fe){var _,m=n;return fe==null&&(fe=n),m=x(se=K["$[]"](fe))?se:(_=[fe,[]],g(K,"[]=",_),_[_.length-1]),m["$<<"](ne.$at(fe))})}),K)}),A(f,"$union",function(N){var K,Y,Q=this;return K=O(arguments),Y=K,g(Y,"reduce",[Q.$uniq()],function(se,oe){return se==null&&(se=n),oe==null&&(oe=n),se["$|"](oe)})},-1),A(f,"$uniq",function ie(){var N=ie.$$p||n,K=this;ie.$$p=null;var Y=new Map,Q,ne,se,oe;if(N===n)for(Q=0,ne=K.length;Q<ne;Q++)se=K[Q],I(Y,se)===void 0&&re(Y,se,se);else for(Q=0;Q<K.length;Q++)se=K[Q],oe=B(N,se),I(Y,oe)===void 0&&re(Y,oe,se);return Y.$values()}),A(f,"$uniq!",function ie(){var N=ie.$$p||n,K=this;ie.$$p=null,v(K);var Y=new Map,Q,ne,se,oe=[];for(Q=0;Q<K.length;Q++)ne=K[Q],se=N===n?ne:B(N,ne),I(Y,se)===void 0?re(Y,se,ne):oe.push(Q);for(Q=oe.length-1;Q>=0;Q--)K.splice(oe[Q],1);return oe.length===0?n:K}),A(f,"$unshift",function(N){var K,Y,Q=this;K=O(arguments),Y=K,v(Q);var ne=Q.length,se=Y.length;if(se==0)return Q;for(var oe=ne-se,fe=0;fe<se;fe++)Q.push(Q[oe+fe]);for(var _=ne-1;_-se>=0;)Q[_]=Q[_-se],_--;for(var m=0;m<se;m++)Q[m]=Y[m];return Q},-1),A(f,"$values_at",function(N){var K,Y,Q=this,ne=n;return K=O(arguments),Y=K,ne=[],g(Y,"each",[],function se(oe){var fe=se.$$s==null?this:se.$$s,_=n,m=n,U=n;return oe==null&&(oe=n),x(oe["$is_a?"](t("Range")))?(_=oe.$end()===n?-1:C(oe.$end(),t("Integer"),"to_int"),m=oe.$begin()===n?0:C(oe.$begin(),t("Integer"),"to_int"),m<0?(m=m+fe.length,n):(_<0&&(_=_+fe.length),oe["$exclude_end?"]()&&oe.$end()!==n&&_--,_<m?n:g(m,"upto",[_],function te(ue){var ce=te.$$s==null?this:te.$$s;return ue==null&&(ue=n),ne["$<<"](ce.$at(ue))},{$$s:fe}))):(U=C(oe,t("Integer"),"to_int"),ne["$<<"](fe.$at(U)))},{$$s:Q}),ne},-1),A(f,"$zip",function ie(N){var K=ie.$$p||n,Y,Q,ne=this,se=n;ie.$$p=null,Y=O(arguments),Q=Y;var oe=[],fe=ne.length,_,m,U,te,ue;for(te=0,ue=Q.length;te<ue;te++)if(m=Q[te],!m.$$is_array){if(m.$$is_range||m.$$is_enumerator){Q[te]=m.$take(fe);continue}Q[te]=(x(se=M["$coerce_to?"](m,t("Array"),"to_ary"))?se:M["$coerce_to!"](m,t("Enumerator"),"to_enum","each")).$to_a()}for(U=0;U<fe;U++){for(_=[ne[U]],te=0,ue=Q.length;te<ue;te++)m=Q[te][U],m==null&&(m=n),_[te+1]=m;oe[U]=_}if(K!==n){for(U=0;U<fe;U++)e.yield1(K,oe[U]);return n}return oe},-1),j(f,"$inherited",function(N){N.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),A(f,"$instance_variables",function ie(){var N=ie.$$p||n,K=this;return ie.$$p=null,g(k(K,P(K,"instance_variables",ie,!1,!0),"instance_variables",[],N),"reject",[],function(Q){var ne=n;return Q==null&&(Q=n),x(ne=/^@\d+$/.test(Q))?ne:Q["$=="]("@length")})}),A(f,"$pack",function(N){return O(arguments),w.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),i(f,"append","push"),i(f,"filter","select"),i(f,"filter!","select!"),i(f,"map","collect"),i(f,"map!","collect!"),i(f,"prepend","unshift"),i(f,"size","length"),i(f,"slice","[]"),i(f,"to_s","inspect"),M.$pristine(f.$singleton_class(),"allocate"),M.$pristine(f,"copy_instance_variables","initialize_dup")}("::",Array,$)};Opal.modules["corelib/hash"]=function(e){var x=e.yield1,E=e.hash_clone,B=e.hash_delete,I=e.hash_each,re=e.hash_get,Z=e.hash_put,C=e.deny_frozen_access,W=e.freeze,v=e.opal32_init,D=e.opal32_add,$e=e.klass,V=e.slice,G=e.Opal,O=e.Kernel,j=e.defs,w=e.def,A=e.send,M=e.rb_ge,H=e.rb_gt,k=e.truthy,P=e.to_a,g=e.return_self,z=e.not,F=e.alias,q=e.top,y=[],o=e.nil,d=e.$$$;return e.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),q.$require("corelib/enumerable"),function(S,h,l){var c=$e(S,h,"Hash"),X=[c].concat(l),b=e.$r(X);c.$include(d("Enumerable")),c.$$prototype.$$is_hash=!0,j(c,"$[]",function(n){var t,r,s=this;t=V(arguments),r=t;var u,f=r.length,p,R;if(f===1){if(u=G["$coerce_to?"](r["$[]"](0),d("Hash"),"to_hash"),u!==o)return s.$allocate()["$merge!"](u);for(r=G["$coerce_to?"](r["$[]"](0),d("Array"),"to_ary"),r===o&&O.$raise(d("ArgumentError"),"odd number of arguments for Hash"),f=r.length,u=s.$allocate(),R=0;R<f;R++)p=r[R],p.$$is_array||O.$raise(d("ArgumentError"),"invalid element "+p.$inspect()+" for Hash"),p.length===1?u.$store(p[0],o):p.length===2?u.$store(p[0],p[1]):O.$raise(d("ArgumentError"),"invalid number of elements ("+p.length+" for "+p.$inspect()+"), must be 1..2");return u}for(f%2!==0&&O.$raise(d("ArgumentError"),"odd number of arguments for Hash"),u=s.$allocate(),R=0;R<f;R+=2)u.$store(r[R],r[R+1]);return u},-1),j(c,"$allocate",function(){var n=this,t=new n.$$constructor;return t.$$none=o,t.$$proc=o,t}),j(c,"$try_convert",function(n){return G["$coerce_to?"](n,d("Hash"),"to_hash")}),w(c,"$initialize",function $(n){var t=$.$$p||o,r=this;return $.$$p=null,C(r),n!==void 0&&t!==o&&O.$raise(d("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=n===void 0?o:n,r.$$proc=t,r},-1),w(c,"$==",function(n){var t=this;return t===n?!0:!n.$$is_hash||t.size!==n.size?!1:I(t,!0,function(r,s){var u=re(n,r);return u===void 0||!s["$eql?"](u)?[!0,!1]:[!1,!0]})}),w(c,"$>=",function(n){var t=this,r=o;return n=G["$coerce_to!"](n,d("Hash"),"to_hash"),t.size<n.size?!1:(r=!0,A(n,"each",[],function s(u,f){var p=s.$$s==null?this:s.$$s,R=o;if(u==null&&(u=o),f==null&&(f=o),R=p.$fetch(u,null),R==null||R!==f){r=!1;return}},{$$s:t}),r)}),w(c,"$>",function(n){var t=this;return n=G["$coerce_to!"](n,d("Hash"),"to_hash"),t.size<=n.size?!1:M(t,n)}),w(c,"$<",function(n){var t=this;return n=G["$coerce_to!"](n,d("Hash"),"to_hash"),H(n,t)}),w(c,"$<=",function(n){var t=this;return n=G["$coerce_to!"](n,d("Hash"),"to_hash"),M(n,t)}),w(c,"$[]",function(n){var t=this,r=re(t,n);return r!==void 0?r:t.$default(n)}),w(c,"$[]=",function(n,t){var r=this;return C(r),Z(r,n,t),t}),w(c,"$assoc",function(n){var t=this;return I(t,o,function(r,s){return r["$=="](n)?[!0,[r,s]]:[!1,o]})}),w(c,"$clear",function(){var n=this;return C(n),n.clear(),n.$$keys&&n.$$keys.clear(),n}),w(c,"$clone",function(){var n=this,t=n.$class().$new();return E(n,t),n["$frozen?"]()?t.$freeze():t}),w(c,"$compact",function(){var n=this,t=new Map;return I(n,t,function(r,s){return s!==o&&Z(t,r,s),[!1,t]})}),w(c,"$compact!",function(){var n=this;C(n);var t=o;return I(n,t,function(r,s){return s===o&&(B(n,r),t=n),[!1,t]})}),w(c,"$compare_by_identity",function(){var n=this;return C(n),n.$$by_identity||(n.$$by_identity=!0,n.size!==0&&e.hash_rehash(n)),n}),w(c,"$compare_by_identity?",function(){var n=this;return n.$$by_identity===!0}),w(c,"$default",function(n){var t=this;return n!==void 0&&t.$$proc!==o&&t.$$proc!==void 0?t.$$proc.$call(t,n):t.$$none===void 0?o:t.$$none},-1),w(c,"$default=",function(n){var t=this;return C(t),t.$$proc=o,t.$$none=n,n}),w(c,"$default_proc",function(){var n=this;return n.$$proc!==void 0?n.$$proc:o}),w(c,"$default_proc=",function(n){var t=this;C(t);var r=n;return r!==o&&(r=G["$coerce_to!"](r,d("Proc"),"to_proc"),r["$lambda?"]()&&r.$arity().$abs()!==2&&O.$raise(d("TypeError"),"default_proc takes two arguments")),t.$$none=o,t.$$proc=r,n}),w(c,"$delete",function $(n){var t=$.$$p||o,r=this;$.$$p=null,C(r);var s=B(r,n);return s!==void 0?s:t!==o?e.yield1(t,n):o}),w(c,"$delete_if",function $(){var n=$.$$p||o,t=this;return $.$$p=null,k(n)?(C(t),I(t,t,function(r,s){var u=n(r,s);return u!==!1&&u!==o&&B(t,r),[!1,t]})):A(t,"enum_for",["delete_if"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),w(c,"$dig",function(n,t){var r,s,u=this,f=o;return r=V(arguments,1),s=r,f=u["$[]"](n),f===o||s.length===0?f:(k(f["$respond_to?"]("dig"))||O.$raise(d("TypeError"),""+f.$class()+" does not have #dig method"),A(f,"dig",P(s)))},-2),w(c,"$dup",function(){var n=this;return E(n,n.$class().$new())}),w(c,"$each",function $(){var n=$.$$p||o,t=this;return $.$$p=null,k(n)?I(t,t,function(r,s){return x(n,[r,s]),[!1,t]}):A(t,"enum_for",["each"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),w(c,"$each_key",function $(){var n=$.$$p||o,t=this;return $.$$p=null,k(n)?I(t,t,function(r,s){return n(r),[!1,t]}):A(t,"enum_for",["each_key"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),w(c,"$each_value",function $(){var n=$.$$p||o,t=this;return $.$$p=null,k(n)?I(t,t,function(r,s){return n(s),[!1,t]}):A(t,"enum_for",["each_value"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),w(c,"$empty?",function(){var n=this;return n.size===0}),w(c,"$except",function(n){var t,r,s=this;return t=V(arguments),r=t,A(s.$dup(),"except!",P(r))},-1),w(c,"$except!",function(n){var t,r,s=this;return t=V(arguments),r=t,A(r,"each",[],function u(f){var p=u.$$s==null?this:u.$$s;return f==null&&(f=o),p.$delete(f)},{$$s:s}),s},-1),w(c,"$fetch",function $(n,t){var r=$.$$p||o,s=this;$.$$p=null;var u=re(s,n);return u!==void 0?u:r!==o?r(n):t!==void 0?t:O.$raise(d("KeyError").$new("key not found: "+n.$inspect(),new Map([["key",n],["receiver",s]])))},-2),w(c,"$fetch_values",function $(n){var t=$.$$p||o,r,s,u=this;return $.$$p=null,r=V(arguments),s=r,A(s,"map",[],function f(p){var R=f.$$s==null?this:f.$$s;return p==null&&(p=o),A(R,"fetch",[p],t.$to_proc())},{$$s:u})},-1),w(c,"$flatten",function(n){var t=this;n==null&&(n=1),n=G["$coerce_to!"](n,d("Integer"),"to_int");var r=[];return I(t,r,function(s,u){return r.push(s),u.$$is_array?n===1?(r.push(u),[!1,r]):(r=r.concat(u.$flatten(n-2)),[!1,r]):(r.push(u),[!1,r])})},-1),w(c,"$freeze",function(){var n=this;return k(n["$frozen?"]())?n:W(n)}),w(c,"$has_key?",function(n){var t=this;return re(t,n)!==void 0}),w(c,"$has_value?",function(n){var t=this;return I(t,!1,function(r,s){return s["$=="](n)?[!0,!0]:[!1,!1]})});var i;w(c,"$hash",function(){var n=this,t=i===void 0,r=n.$object_id(),s=v(),u,f,p,R=n.size,L=new Int32Array(R);if(s=D(s,4),s=D(s,R),t)i=Object.create(null);else if(i[r])return D(s,16843009);try{for(u in i)if(f=i[u],n["$eql?"](f))return D(s,16843009);for(i[r]=n,p=0,I(n,!1,function(T,J){return L[p]=[1883326802,T,J].$hash(),p++,[!1,!1]}),L=L.sort(),p=0;p<L.length;p++)s=D(s,L[p]);return s}finally{t&&(i=void 0)}}),w(c,"$index",function(n){var t=this;return I(t,o,function(r,s){return s["$=="](n)?[!0,r]:[!1,o]})}),w(c,"$indexes",function(n){var t,r,s=this;t=V(arguments),r=t;for(var u=[],f=0,p=r.length,R,L;f<p;f++){if(R=r[f],L=re(s,R),L===void 0){u.push(s.$default());continue}u.push(L)}return u},-1);var a;return w(c,"$inspect",function(){var n=this,t=a===void 0,r=n.$object_id(),s=[];return function(){try{if(t&&(a={}),a.hasOwnProperty(r))return"{...}";return a[r]=!0,I(n,!1,function(u,f){return f=b("Opal").$inspect(f),u=b("Opal").$inspect(u),s.push(u+"=>"+f),[!1,!1]}),"{"+s.join(", ")+"}";return o}finally{t&&(a=void 0)}}()}),w(c,"$invert",function(){var n=this,t=new Map;return I(n,t,function(r,s){return Z(t,s,r),[!1,t]})}),w(c,"$keep_if",function $(){var n=$.$$p||o,t=this;return $.$$p=null,k(n)?(C(t),I(t,t,function(r,s){var u=n(r,s);return(u===!1||u===o)&&B(t,r),[!1,t]})):A(t,"enum_for",["keep_if"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),w(c,"$keys",function(){var n=this;return Array.from(n.keys())}),w(c,"$length",function(){var n=this;return n.size}),w(c,"$merge",function $(n){var t=$.$$p||o,r,s,u=this;return $.$$p=null,r=V(arguments),s=r,A(u.$dup(),"merge!",P(s),t.$to_proc())},-1),w(c,"$merge!",function $(n){var t=$.$$p||o,r,s,u=this;$.$$p=null,r=V(arguments),s=r,C(u);var f,p;for(f=0;f<s.length;++f)p=G["$coerce_to!"](s[f],d("Hash"),"to_hash"),t===o?I(p,!1,function(R,L){return Z(u,R,L),[!1,!1]}):I(p,!1,function(R,L){var T=re(u,R);return T===void 0?(Z(u,R,L),[!1,!1]):(Z(u,R,t(R,T,L)),[!1,!1])});return u},-1),w(c,"$rassoc",function(n){var t=this;return I(t,o,function(r,s){return s["$=="](n)?[!0,[r,s]]:[!1,o]})}),w(c,"$rehash",function(){var n=this;return C(n),e.hash_rehash(n)}),w(c,"$reject",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!k(n))return A(t,"enum_for",["reject"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});var r=new Map;return I(t,r,function(s,u){var f=n(s,u);return(f===!1||f===o)&&Z(r,s,u),[!1,r]})}),w(c,"$reject!",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!k(n))return A(t,"enum_for",["reject!"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});C(t);var r=o;return I(t,r,function(s,u){var f=n(s,u);return f!==!1&&f!==o&&(B(t,s),r=t),[!1,r]})}),w(c,"$replace",function(n){var t=this;return C(t),n=G["$coerce_to!"](n,d("Hash"),"to_hash"),t.$clear(),I(n,!1,function(r,s){return Z(t,r,s),[!1,!1]}),k(n.$default_proc())?t["$default_proc="](n.$default_proc()):t["$default="](n.$default()),t}),w(c,"$select",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!k(n))return A(t,"enum_for",["select"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});var r=new Map;return I(t,r,function(s,u){var f=n(s,u);return f!==!1&&f!==o&&Z(r,s,u),[!1,r]})}),w(c,"$select!",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!k(n))return A(t,"enum_for",["select!"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});C(t);var r=o;return I(t,r,function(s,u){var f=n(s,u);return(f===!1||f===o)&&(B(t,s),r=t),[!1,r]})}),w(c,"$shift",function(){var n=this;return C(n),I(n,o,function(t,r){return[!0,[t,B(n,t)]]})}),w(c,"$slice",function(n){var t,r,s=this;t=V(arguments),r=t;for(var u=new Map,f=0,p=r.length;f<p;f++){var R=r[f],L=re(s,R);L!==void 0&&Z(u,R,L)}return u},-1),w(c,"$to_a",function(){var n=this,t=[];return I(n,t,function(r,s){return t.push([r,s]),[!1,t]})}),w(c,"$to_h",function $(){var n=$.$$p||o,t=this;if($.$$p=null,n!==o)return A(t,"map",[],n.$to_proc()).$to_h();if(t.$$class===e.Hash)return t;var r=new Map;return E(t,r),r}),w(c,"$to_hash",g),w(c,"$to_proc",function(){var n=this;return A(n,"proc",[],function t(r){var s=t.$$s==null?this:t.$$s;return r==null&&O.$raise(d("ArgumentError"),"no key given"),s["$[]"](r)},{$$arity:-1,$$s:n})}),w(c,"$transform_keys",function $(n){var t=$.$$p||o,r=this;if($.$$p=null,n==null&&(n=o),z(t)&&z(n))return A(r,"enum_for",["transform_keys"],function u(){var f=u.$$s==null?this:u.$$s;return f.$size()},{$$s:r});var s=new Map;return I(r,s,function(u,f){var p;return n!==o&&(p=re(n,u)),p===void 0&&t&&t!==o&&(p=t(u)),p===void 0&&(p=u),Z(s,p,f),[!1,s]})},-1),w(c,"$transform_keys!",function $(n){var t=$.$$p||o,r=this;if($.$$p=null,n==null&&(n=o),z(t)&&z(n))return A(r,"enum_for",["transform_keys!"],function u(){var f=u.$$s==null?this:u.$$s;return f.$size()},{$$s:r});C(r);var s=new Map;return I(r,r,function(u,f){var p;return n!==o&&(p=re(n,u)),p===void 0&&t&&t!==o&&(p=t(u)),p===void 0?[!1,r]:(re(s,u)||B(r,u),Z(r,p,f),Z(s,p,!0),[!1,r])})},-1),w(c,"$transform_values",function $(){var n=$.$$p||o,t=this;if($.$$p=null,!k(n))return A(t,"enum_for",["transform_values"],function s(){var u=s.$$s==null?this:s.$$s;return u.$size()},{$$s:t});var r=new Map;return I(t,r,function(s,u){return Z(r,s,n(u)),[!1,r]})}),w(c,"$transform_values!",function $(){var n=$.$$p||o,t=this;return $.$$p=null,k(n)?(C(t),I(t,t,function(r,s){return Z(t,r,n(s)),[!1,t]})):A(t,"enum_for",["transform_values!"],function r(){var s=r.$$s==null?this:r.$$s;return s.$size()},{$$s:t})}),w(c,"$values",function(){var n=this;return Array.from(n.values())}),F(c,"each_pair","each"),F(c,"eql?","=="),F(c,"filter","select"),F(c,"filter!","select!"),F(c,"include?","has_key?"),F(c,"indices","indexes"),F(c,"key","index"),F(c,"key?","has_key?"),F(c,"member?","has_key?"),F(c,"size","length"),F(c,"store","[]="),F(c,"to_s","inspect"),F(c,"update","merge!"),F(c,"value?","has_value?"),F(c,"values_at","indexes")}("::",Map,y)};Opal.modules["corelib/number"]=function(e){var x=e.klass,E=e.Opal,B=e.Kernel,I=e.def,re=e.eqeqeq,Z=e.truthy,C=e.rb_gt,W=e.not,v=e.rb_lt,D=e.alias,$e=e.send2,V=e.find_super,G=e.send,O=e.rb_plus,j=e.rb_minus,w=e.eqeq,A=e.return_self,M=e.rb_divide,H=e.to_ary,k=e.rb_times,P=e.rb_le,g=e.rb_ge,z=e.return_val,F=e.const_set,q=e.top,y=[],o=e.nil,d=e.$$$;return e.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),q.$require("corelib/numeric"),function(S,h,l){var c=x(S,h,"Number");E.$bridge(Number,c),e.prop(c.$$prototype,"$$is_number",!0),c.$$is_number_class=!0;var X=new Map;(function(t,r){return I(t,"$allocate",function(){var u=this;return B.$raise(d("TypeError"),"allocator undefined for "+u.$name())}),e.udef(t,"$new"),o})(e.get_singleton_class(c)),I(c,"$coerce",function(r){var s=this;if(r===o)B.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float");else{if(r.$$is_string)return[B.$Float(r),s];if(r["$respond_to?"]("to_f"))return[E["$coerce_to!"](r,d("Float"),"to_f"),s];if(r.$$is_number)return[r,s];B.$raise(d("TypeError"),"can't convert "+r.$class()+" into Float")}}),I(c,"$__id__",function(){var r=this;if(r|r===0)return r*2+1;if(X.has(r))return X.get(r);var s=e.uid();return X.set(r,s),s}),I(c,"$hash",function(){var r=this;return r|r===0?r.$__id__():r.toString().$hash()}),I(c,"$+",function(r){var s=this;return r.$$is_number?s+r:s.$__coerced__("+",r)}),I(c,"$-",function(r){var s=this;return r.$$is_number?s-r:s.$__coerced__("-",r)}),I(c,"$*",function(r){var s=this;return r.$$is_number?s*r:s.$__coerced__("*",r)}),I(c,"$/",function(r){var s=this;return r.$$is_number?s/r:s.$__coerced__("/",r)}),I(c,"$%",function(r){var s=this;if(r.$$is_number){if(r==-1/0)return r;if(r==0)B.$raise(d("ZeroDivisionError"),"divided by 0");else return r<0||s<0?(s%r+r)%r:s%r}else return s.$__coerced__("%",r)}),I(c,"$&",function(r){var s=this;return r.$$is_number?s&r:s.$__coerced__("&",r)}),I(c,"$|",function(r){var s=this;return r.$$is_number?s|r:s.$__coerced__("|",r)}),I(c,"$^",function(r){var s=this;return r.$$is_number?s^r:s.$__coerced__("^",r)}),I(c,"$<",function(r){var s=this;return r.$$is_number?s<r:s.$__coerced__("<",r)}),I(c,"$<=",function(r){var s=this;return r.$$is_number?s<=r:s.$__coerced__("<=",r)}),I(c,"$>",function(r){var s=this;return r.$$is_number?s>r:s.$__coerced__(">",r)}),I(c,"$>=",function(r){var s=this;return r.$$is_number?s>=r:s.$__coerced__(">=",r)});var b=function(t,r){return r.$$is_number?isNaN(t)||isNaN(r)?o:t>r?1:t<r?-1:0:t.$__coerced__("<=>",r)};I(c,"$<=>",function(r){var s=this;try{return b(s,r)}catch(u){if(e.rescue(u,[d("ArgumentError")]))try{return o}finally{e.pop_exception(u)}else throw u}}),I(c,"$<<",function(r){var s=this;return r=E["$coerce_to!"](r,d("Integer"),"to_int"),r>0?s<<r:s>>-r}),I(c,"$>>",function(r){var s=this;return r=E["$coerce_to!"](r,d("Integer"),"to_int"),r>0?s>>r:s<<-r}),I(c,"$[]",function(r){var s=this;return r=E["$coerce_to!"](r,d("Integer"),"to_int"),r<0?0:r>=32?s<0?1:0:s>>r&1}),I(c,"$+@",function(){var r=this;return+r}),I(c,"$-@",function(){var r=this;return-r}),I(c,"$~",function(){var r=this;return~r}),I(c,"$**",function(r){var s=this;return re(d("Integer"),r)?W(d("Integer")["$==="](s))||Z(C(r,0))?Math.pow(s,r):d("Rational").$new(s,1)["$**"](r):Z(v(s,0))&&(re(d("Float"),r)||re(d("Rational"),r))?d("Complex").$new(s,0)["$**"](r.$to_f()):Z(r.$$is_number!=null)?Math.pow(s,r):s.$__coerced__("**",r)}),I(c,"$==",function(r){var s=this;return r.$$is_number?s.valueOf()===r.valueOf():r["$respond_to?"]("==")?r["$=="](s):!1}),D(c,"===","=="),I(c,"$abs",function(){var r=this;return Math.abs(r)}),I(c,"$abs2",function(){var r=this;return Math.abs(r*r)}),I(c,"$allbits?",function(r){var s=this;return r=E["$coerce_to!"](r,d("Integer"),"to_int"),(s&r)==r}),I(c,"$anybits?",function(r){var s=this;return r=E["$coerce_to!"](r,d("Integer"),"to_int"),(s&r)!==0}),I(c,"$angle",function(){var r=this;return Z(r["$nan?"]())?r:r==0?1/r>0?0:Math.PI:r<0?Math.PI:0}),I(c,"$bit_length",function(){var r=this;if(re(d("Integer"),r)||B.$raise(d("NoMethodError").$new("undefined method `bit_length` for "+r+":Float","bit_length")),r===0||r===-1)return 0;for(var s=0,u=r<0?~r:r;u!=0;)s+=1,u>>>=1;return s}),I(c,"$ceil",function(r){var s=this;r==null&&(r=0);var u=s.$to_f();if(u%1===0&&r>=0)return u;var f=Math.pow(10,r),p=Math.ceil(u*f)/f;return u%1===0&&(p=Math.round(p)),p},-1),I(c,"$chr",function(r){var s=this;return e.enc(String.fromCharCode(s),r||"BINARY")},-1),I(c,"$denominator",function t(){var r=t.$$p||o,s=this;return t.$$p=null,Z(s["$nan?"]())||Z(s["$infinite?"]())?1:$e(s,V(s,"denominator",t,!1,!0),"denominator",[],r)}),I(c,"$downto",function t(r){var s=t.$$p||o,u=this;if(t.$$p=null,s===o)return G(u,"enum_for",["downto",r],function p(){var R=p.$$s==null?this:p.$$s;return re(d("Numeric"),r)||B.$raise(d("ArgumentError"),"comparison of "+R.$class()+" with "+r.$class()+" failed"),Z(C(r,R))?0:O(j(R,r),1)},{$$s:u});r.$$is_number||B.$raise(d("ArgumentError"),"comparison of "+u.$class()+" with "+r.$class()+" failed");for(var f=u;f>=r;f--)s(f);return u}),I(c,"$equal?",function(r){var s=this,u=o;return Z(u=s["$=="](r))?u:isNaN(s)&&isNaN(r)}),I(c,"$even?",function(){var r=this;return r%2===0}),I(c,"$floor",function(r){var s=this;r==null&&(r=0);var u=s.$to_f();if(u%1===0&&r>=0)return u;var f=Math.pow(10,r),p=Math.floor(u*f)/f;return u%1===0&&(p=Math.round(p)),p},-1),I(c,"$gcd",function(r){var s=this;re(d("Integer"),r)||B.$raise(d("TypeError"),"not an integer");for(var u=Math.abs(s),f=Math.abs(r);u>0;){var p=u;u=f%u,f=p}return f}),I(c,"$gcdlcm",function(r){var s=this;return[s.$gcd(r),s.$lcm(r)]}),I(c,"$integer?",function(){var r=this;return r%1===0}),I(c,"$is_a?",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,w(r,d("Integer"))&&re(d("Integer"),u)||w(r,d("Integer"))&&re(d("Integer"),u)||w(r,d("Float"))&&re(d("Float"),u)?!0:$e(u,V(u,"is_a?",t,!1,!0),"is_a?",[r],s)}),I(c,"$instance_of?",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,w(r,d("Integer"))&&re(d("Integer"),u)||w(r,d("Integer"))&&re(d("Integer"),u)||w(r,d("Float"))&&re(d("Float"),u)?!0:$e(u,V(u,"instance_of?",t,!1,!0),"instance_of?",[r],s)}),I(c,"$lcm",function(r){var s=this;return re(d("Integer"),r)||B.$raise(d("TypeError"),"not an integer"),s==0||r==0?0:Math.abs(s*r/s.$gcd(r))}),I(c,"$next",function(){var r=this;return r+1}),I(c,"$nobits?",function(r){var s=this;return r=E["$coerce_to!"](r,d("Integer"),"to_int"),(s&r)==0}),I(c,"$nonzero?",function(){var r=this;return r==0?o:r}),I(c,"$numerator",function t(){var r=t.$$p||o,s=this;return t.$$p=null,Z(s["$nan?"]())||Z(s["$infinite?"]())?s:$e(s,V(s,"numerator",t,!1,!0),"numerator",[],r)}),I(c,"$odd?",function(){var r=this;return r%2!==0}),I(c,"$ord",A),I(c,"$pow",function(r,s){var u=this;return u==0&&B.$raise(d("ZeroDivisionError"),"divided by 0"),s===void 0?u["$**"](r):(d("Integer")["$==="](r)||B.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),r<0&&B.$raise(d("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),d("Integer")["$==="](s)||B.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),s===0&&B.$raise(d("ZeroDivisionError"),"divided by 0"),u["$**"](r)["$%"](s))},-2),I(c,"$pred",function(){var r=this;return r-1}),I(c,"$quo",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,re(d("Integer"),u)?$e(u,V(u,"quo",t,!1,!0),"quo",[r],s):M(u,r)}),I(c,"$rationalize",function(r){var s,u,f=this,p=o,R=o;return arguments.length>1&&B.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),re(d("Integer"),f)?d("Rational").$new(f,1):Z(f["$infinite?"]())?B.$raise(d("FloatDomainError"),"Infinity"):Z(f["$nan?"]())?B.$raise(d("FloatDomainError"),"NaN"):Z(r==null)?(u=d("Math").$frexp(f),s=H(u),p=s[0]==null?o:s[0],R=s[1]==null?o:s[1],p=d("Math").$ldexp(p,d(d("Float"),"MANT_DIG")).$to_i(),R=j(R,d(d("Float"),"MANT_DIG")),d("Rational").$new(k(2,p),1["$<<"](j(1,R))).$rationalize(d("Rational").$new(1,1["$<<"](j(1,R))))):f.$to_r().$rationalize(r)},-1),I(c,"$remainder",function(r){var s=this;return j(s,k(r,M(s,r).$truncate()))}),I(c,"$round",function(r){var s,u,f=this,p=o;if(re(d("Integer"),f)){if(Z(r==null)||(re(d("Float"),r)&&Z(r["$infinite?"]())&&B.$raise(d("RangeError"),"Infinity"),r=E["$coerce_to!"](r,d("Integer"),"to_int"),Z(v(r,d(d("Integer"),"MIN")))&&B.$raise(d("RangeError"),"out of bounds"),Z(r>=0)))return f;if(r=r["$-@"](),.415241*r-.125>f.$size())return 0;var R=Math.pow(10,r),L=Math.floor((Math.abs(f)+R/2)/R)*R;return f<0?-L:L}else{if(Z(f["$nan?"]())&&Z(r==null)&&B.$raise(d("FloatDomainError"),"NaN"),r=E["$coerce_to!"](r||0,d("Integer"),"to_int"),Z(P(r,0)))Z(f["$nan?"]())?B.$raise(d("RangeError"),"NaN"):Z(f["$infinite?"]())&&B.$raise(d("FloatDomainError"),"Infinity");else{if(w(r,0))return Math.round(f);if(Z(f["$nan?"]())||Z(f["$infinite?"]()))return f}return u=d("Math").$frexp(f),s=H(u),s[0]==null||s[0],p=s[1]==null?o:s[1],Z(g(r,j(O(d(d("Float"),"DIG"),2),Z(C(p,0))?M(p,4):j(M(p,3),1))))?f:Z(v(r,(Z(C(p,0))?O(M(p,3),1):M(p,4))["$-@"]()))?0:Math.round(f*Math.pow(10,r))/Math.pow(10,r)}},-1),I(c,"$times",function t(){var r=t.$$p||o,s=this;if(t.$$p=null,!Z(r))return G(s,"enum_for",["times"],function f(){var p=f.$$s==null?this:f.$$s;return p},{$$s:s});for(var u=0;u<s;u++)r(u);return s}),I(c,"$to_f",A),I(c,"$to_i",function(){var r=this;return r<0?Math.ceil(r):Math.floor(r)}),I(c,"$to_r",function(){var r,s,u=this,f=o,p=o;return re(d("Integer"),u)?d("Rational").$new(u,1):(s=d("Math").$frexp(u),r=H(s),f=r[0]==null?o:r[0],p=r[1]==null?o:r[1],f=d("Math").$ldexp(f,d(d("Float"),"MANT_DIG")).$to_i(),p=j(p,d(d("Float"),"MANT_DIG")),k(f,d(d("Float"),"RADIX")["$**"](p)).$to_r())}),I(c,"$to_s",function(r){var s=this;return r==null&&(r=10),r=E["$coerce_to!"](r,d("Integer"),"to_int"),(Z(v(r,2))||Z(C(r,36)))&&B.$raise(d("ArgumentError"),"invalid radix "+r),w(s,0)&&Z(1/s===-1/0)?"-0.0":s.toString(r)},-1),I(c,"$truncate",function(r){var s=this;r==null&&(r=0);var u=s.$to_f();if(u%1===0&&r>=0)return u;var f=Math.pow(10,r),p=parseInt(u*f,10)/f;return u%1===0&&(p=Math.round(p)),p},-1),I(c,"$digits",function(r){var s=this;r==null&&(r=10),Z(v(s,0))&&B.$raise(d(d("Math"),"DomainError"),"out of domain"),r=E["$coerce_to!"](r,d("Integer"),"to_int"),Z(v(r,2))&&B.$raise(d("ArgumentError"),"invalid radix "+r),s!=parseInt(s)&&B.$raise(d("NoMethodError"),"undefined method `digits' for "+s.$inspect());var u=s,f=[];if(s==0)return[0];for(;u!=0;)f.push(u%r),u=parseInt(u/r,10);return f},-1),I(c,"$divmod",function t(r){var s=t.$$p||o,u=this;return t.$$p=null,Z(u["$nan?"]())||Z(r["$nan?"]())?B.$raise(d("FloatDomainError"),"NaN"):Z(u["$infinite?"]())?B.$raise(d("FloatDomainError"),"Infinity"):$e(u,V(u,"divmod",t,!1,!0),"divmod",[r],s)}),I(c,"$upto",function t(r){var s=t.$$p||o,u=this;if(t.$$p=null,s===o)return G(u,"enum_for",["upto",r],function p(){var R=p.$$s==null?this:p.$$s;return re(d("Numeric"),r)||B.$raise(d("ArgumentError"),"comparison of "+R.$class()+" with "+r.$class()+" failed"),Z(v(r,R))?0:O(j(r,R),1)},{$$s:u});r.$$is_number||B.$raise(d("ArgumentError"),"comparison of "+u.$class()+" with "+r.$class()+" failed");for(var f=u;f<=r;f++)s(f);return u}),I(c,"$zero?",function(){var r=this;return r==0}),I(c,"$size",z(4)),I(c,"$nan?",function(){var r=this;return isNaN(r)}),I(c,"$finite?",function(){var r=this;return r!=1/0&&r!=-1/0&&!isNaN(r)}),I(c,"$infinite?",function(){var r=this;return r==1/0?1:r==-1/0?-1:o}),I(c,"$positive?",function(){var r=this;return r!=0&&(r==1/0||1/r>0)}),I(c,"$negative?",function(){var r=this;return r==-1/0||1/r<0});function i(t){var r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,t,!0),r}function a(t){return new DataView(t.buffer).getFloat64(0,!0)}function $(t){for(var r=i(t),s=0;s<r.length;s++)if(r[s]===255)r[s]=0;else{r[s]++;break}return a(r)}function n(t){for(var r=i(t),s=0;s<r.length;s++)if(r[s]===0)r[s]=255;else{r[s]--;break}return a(r)}return I(c,"$next_float",function(){var r=this;return w(r,d(d("Float"),"INFINITY"))?d(d("Float"),"INFINITY"):Z(r["$nan?"]())?d(d("Float"),"NAN"):Z(g(r,0))?$(Math.abs(r)):n(r)}),I(c,"$prev_float",function(){var r=this;return w(r,d(d("Float"),"INFINITY")["$-@"]())?d(d("Float"),"INFINITY")["$-@"]():Z(r["$nan?"]())?d(d("Float"),"NAN"):Z(C(r,0))?n(r):-$(Math.abs(r))}),D(c,"arg","angle"),D(c,"eql?","=="),D(c,"fdiv","/"),D(c,"inspect","to_s"),D(c,"kind_of?","is_a?"),D(c,"magnitude","abs"),D(c,"modulo","%"),D(c,"object_id","__id__"),D(c,"phase","angle"),D(c,"succ","next"),D(c,"to_int","to_i")}("::",d("Numeric")),F("::","Fixnum",d("Number")),function(S,h,l){var c=x(S,h,"Integer"),X=[c].concat(l);return c.$$is_number_class=!0,c.$$is_integer_class=!0,function(b,i){var a=[b].concat(i),$=e.$r(a);return I(b,"$allocate",function(){var t=this;return B.$raise(d("TypeError"),"allocator undefined for "+t.$name())}),e.udef(b,"$new"),I(b,"$sqrt",function(t){return t=E["$coerce_to!"](t,d("Integer"),"to_int"),t<0&&B.$raise(d(d("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(t),10)}),I(b,"$try_convert",function(t){var r=this;return $("Opal")["$coerce_to?"](t,r,"to_int")})}(e.get_singleton_class(c),X),F(c,"MAX",Math.pow(2,30)-1),F(c,"MIN",-Math.pow(2,30))}("::",d("Numeric"),y),function(S,h,l){var c=x(S,h,"Float");return c.$$is_number_class=!0,function(X,b){return I(X,"$allocate",function(){var a=this;return B.$raise(d("TypeError"),"allocator undefined for "+a.$name())}),e.udef(X,"$new"),I(X,"$===",function(a){return!!a.$$is_number})}(e.get_singleton_class(c)),F(c,"INFINITY",1/0),F(c,"MAX",Number.MAX_VALUE),F(c,"MIN",Number.MIN_VALUE),F(c,"NAN",NaN),F(c,"DIG",15),F(c,"MANT_DIG",53),F(c,"RADIX",2),F(c,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",d("Numeric"))};Opal.modules["corelib/range"]=function(e){var x=e.klass,E=e.truthy,B=e.Kernel,I=e.def,re=e.not,Z=e.send2,C=e.find_super,W=e.lambda,v=e.send,D=e.rb_ge,$e=e.rb_gt,V=e.eqeq,G=e.rb_le,O=e.rb_lt,j=e.eqeqeq,w=e.return_ivar,A=e.rb_minus,M=e.Opal,H=e.rb_divide,k=e.rb_plus,P=e.rb_times,g=e.thrower,z=e.alias,F=e.top,q=[],y=e.nil,o=e.$$$;return e.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),F.$require("corelib/enumerable"),function(d,S,h){var l=x(d,S,"Range"),c=[l].concat(h),X=e.$r(c),b=l.$$prototype;b.begin=b.end=b.excl=y,l.$include(o("Enumerable")),l.$$prototype.$$is_range=!0,l.$attr_reader("begin","end"),I(l,"$initialize",function($,n,t){var r=this;return t==null&&(t=!1),E(r.begin)&&B.$raise(o("NameError"),"'initialize' called twice"),E($["$<=>"](n))||E($["$nil?"]())||E(n["$nil?"]())||B.$raise(o("ArgumentError"),"bad value for range"),r.begin=$,r.end=n,r.excl=t},-3),I(l,"$===",function($){var n=this;return E($.$$is_range)?!1:n["$cover?"]($)});function i(a){return a.begin===y||a.end===y||a.begin===-1/0||a.end===1/0||a.begin===1/0||a.end===-1/0}return I(l,"$count",function a(){var $=a.$$p||y,n=this;return a.$$p=null,re($!==y)&&E(i(n))?o(o("Float"),"INFINITY"):Z(n,C(n,"count",a,!1,!0),"count",[],$)}),I(l,"$to_a",function a(){var $=a.$$p||y,n=this;return a.$$p=null,E(i(n))&&B.$raise(o("TypeError"),"cannot convert endless range to an array"),Z(n,C(n,"to_a",a,!1,!0),"to_a",[],$)}),I(l,"$cover?",function($){var n=this,t=y,r=y,s=y,u=y,f=y,p=y,R=y,L=y;return t=W(function(J,ee){var ae=y;return J==null&&(J=y),ee==null&&(ee=y),E(ae=J["$<=>"](ee))?ae:1}),E($.$$is_range)?(r=$.$begin(),s=$.$end(),u=$["$exclude_end?"](),E(n.begin)&&E(r["$nil?"]())||E(n.end)&&E(s["$nil?"]())||E(r)&&E(s)&&E(v(t.$call(r,s),"then",[],function(J){return J==null&&(J=y),E(u)?D(J,0):$e(J,0)}))||E(r)&&re(n["$cover?"](r))?!1:(f=t.$call(n.end,s),V(n.excl,u)?D(f,0):E(n.excl)?$e(f,0):E(D(f,0))?!0:(p=$.$max(),E(R=p["$nil?"]()["$!"]())?G(t.$call(p,n.end),0):R))):E(n.begin)&&E($e(t.$call(n.begin,$),0))?!1:E(n.end["$nil?"]())?!0:(L=t.$call($,n.end),E(n.excl)?O(L,0):G(L,0))}),I(l,"$each",function a(){var $=a.$$p||y,n=this,t=y,r=y,s=y;if(a.$$p=null,$===y)return v(n,"enum_for",["each"],function p(){var R=p.$$s==null?this:p.$$s;return R.$size()},{$$s:n});var u,f;if(n.begin.$$is_number&&n.end.$$is_number){for((n.begin%1!==0||n.end%1!==0)&&B.$raise(o("TypeError"),"can't iterate from Float"),u=n.begin,f=n.end+(E(n.excl)?0:1);u<f;u++)$(u);return n}if(n.begin.$$is_string&&n.end.$$is_string)return v(n.begin,"upto",[n.end,n.excl],$.$to_proc()),n;for(t=n.begin,r=n.end,E(t["$respond_to?"]("succ"))||B.$raise(o("TypeError"),"can't iterate from "+t.$class());E(E(s=n.end["$nil?"]())?s:O(t["$<=>"](r),0));)e.yield1($,t),t=t.$succ();return re(n.excl)&&V(t,r)&&e.yield1($,t),n}),I(l,"$eql?",function($){var n=this,t=y,r=y;return j(o("Range"),$)?E(t=E(r=n.excl["$==="]($["$exclude_end?"]()))?n.begin["$eql?"]($.$begin()):r)?n.end["$eql?"]($.$end()):t:!1}),I(l,"$exclude_end?",w("excl")),I(l,"$first",function a($){var n=a.$$p||y,t=this;return a.$$p=null,E(t.begin["$nil?"]())&&B.$raise(o("RangeError"),"cannot get the minimum of beginless range"),E($==null)?t.begin:Z(t,C(t,"first",a,!1,!0),"first",[$],n)},-1),I(l,"$include?",function a($){var n=a.$$p||y,t=this,r=y,s=y;if(a.$$p=null,E(t.begin.$$is_number||t.end.$$is_number)||E(t.begin["$is_a?"](o("Time")))||E(t.end["$is_a?"](o("Time")))||E(o("Integer").$try_convert(t.begin))||E(o("Integer").$try_convert(t.end)))return t["$cover?"]($);if(E(t.begin.$$is_string||t.end.$$is_string)){if(E(t.begin.$$is_string&&t.end.$$is_string))return v(t.begin.$upto(t.end,t.excl),"any?",[],function(f){return f==null&&(f=y),f["$=="]($)});if(E(t.begin["$nil?"]()))return r=$["$<=>"](t.end),E(s=r["$nil?"]()["$!"]())?E(t.excl)?O(r,0):G(r,0):s;if(E(t.end["$nil?"]()))return r=t.begin["$<=>"]($),E(s=r["$nil?"]()["$!"]())?G(r,0):s}return Z(t,C(t,"include?",a,!1,!0),"include?",[$],n)}),I(l,"$last",function($){var n=this;return E(n.end["$nil?"]())&&B.$raise(o("RangeError"),"cannot get the maximum of endless range"),E($==null)?n.end:n.$to_a().$last($)},-1),I(l,"$max",function a(){var $=a.$$p||y,n=this;return a.$$p=null,E(n.end["$nil?"]())?B.$raise(o("RangeError"),"cannot get the maximum of endless range"):$!==y?Z(n,C(n,"max",a,!1,!0),"max",[],$):re(n.begin["$nil?"]())&&(E($e(n.begin,n.end))||E(n.excl)&&V(n.begin,n.end))?y:n.excl?n.end-1:n.end}),I(l,"$min",function a(){var $=a.$$p||y,n=this;return a.$$p=null,E(n.begin["$nil?"]())?B.$raise(o("RangeError"),"cannot get the minimum of beginless range"):$!==y?Z(n,C(n,"min",a,!1,!0),"min",[],$):re(n.end["$nil?"]())&&(E($e(n.begin,n.end))||E(n.excl)&&V(n.begin,n.end))?y:n.begin}),I(l,"$size",function(){var $=this.begin,n=this.end;if(o("Numeric")["$==="]($)){if(o("Numeric")["$==="](n)){var t=A(n,$);return t<0?0:(this.excl||(t+=1),o("Float")["$==="]($)||o("Float")["$==="](n)?Math.floor(t):t)}else if(n===y)return 1/0}else if($===y&&o("Numeric")["$==="](n))return 1/0;return y}),I(l,"$step",function a($){var n=a.$$p||y,t=this,r=y,s=y;a.$$p=null;function u(){$==null?$=1:$.$$is_number||($=M["$coerce_to!"]($,o("Integer"),"to_int")),$<0?B.$raise(o("ArgumentError"),"step can't be negative"):$===0&&B.$raise(o("ArgumentError"),"step can't be 0")}function f(){if(!t.begin["$respond_to?"]("succ")||t.begin.$$is_string&&t.end.$$is_string)return y;if($%1===0)return H(t.$size(),$).$ceil();var p=t.begin,R=t.end,L=Math.abs,T=Math.floor,J=(L(p)+L(R)+L(R-p))/L($)*o(o("Float"),"EPSILON"),ee;return J>.5&&(J=.5),t.excl?(ee=T((R-p)/$-J),ee*$+p<R&&ee++):ee=T((R-p)/$+J)+1,ee}return n===y?(E(t.begin["$is_a?"](X("Numeric")))||E(t.begin["$nil?"]()))&&(E(t.end["$is_a?"](X("Numeric")))||E(t.end["$nil?"]()))&&re(E(r=t.begin["$nil?"]())?t.end["$nil?"]():r)?o(o("Enumerator"),"ArithmeticSequence").$new(t,$,"step"):v(t,"enum_for",["step",$],function(){return u(),f()}):(u(),E(t.begin.$$is_number&&t.end.$$is_number)?(s=0,function(){try{var p=g("break");return v(t,"loop",[],function R(){var L=R.$$s==null?this:R.$$s,T=y;return L.begin==null&&(L.begin=y),L.excl==null&&(L.excl=y),L.end==null&&(L.end=y),T=k(L.begin,P(s,$)),E(L.excl)?E(D(T,L.end))&&p.$throw(y,R.$$is_lambda):E($e(T,L.end))&&p.$throw(y,R.$$is_lambda),e.yield1(n,T),s=k(s,1)},{$$s:t})}catch(R){if(R===p)return R.$v;throw R}finally{p.is_orphan=!0}}()):(t.begin.$$is_string&&t.end.$$is_string&&$%1!==0&&B.$raise(o("TypeError"),"no implicit conversion to float from string"),v(t,"each_with_index",[],function(R,L){return R==null&&(R=y),L==null&&(L=y),V(L["$%"]($),0)?e.yield1(n,R):y})),t)},-1),I(l,"$%",function($){var n=this;return E(n.begin["$is_a?"](X("Numeric")))&&E(n.end["$is_a?"](X("Numeric")))?o(o("Enumerator"),"ArithmeticSequence").$new(n,$,"%"):n.$step($)}),I(l,"$bsearch",function a(){var $=a.$$p||y,n=this;return a.$$p=null,$===y?n.$enum_for("bsearch"):(E(i(n)&&(n.begin.$$is_number||n.end.$$is_number))&&B.$raise(o("NotImplementedError"),"Can't #bsearch an infinite range"),E(n.begin.$$is_number&&n.end.$$is_number)||B.$raise(o("TypeError"),"can't do binary search for "+n.begin.$class()),v(n.$to_a(),"bsearch",[],$.$to_proc()))}),I(l,"$to_s",function(){var $=this,n=y;return""+(E(n=$.begin)?n:"")+(E($.excl)?"...":"..")+(E(n=$.end)?n:"")}),I(l,"$inspect",function(){var $=this,n=y;return""+(E(n=$.begin)?$.begin.$inspect():n)+(E($.excl)?"...":"..")+(E(n=$.end)?$.end.$inspect():n)}),I(l,"$marshal_load",function($){var n=this;return n.begin=$["$[]"]("begin"),n.end=$["$[]"]("end"),n.excl=$["$[]"]("excl")}),I(l,"$hash",function(){var $=this;return[o("Range"),$.begin,$.end,$.excl].$hash()}),z(l,"==","eql?"),z(l,"member?","include?")}("::",null,q)};Opal.modules["corelib/proc"]=function(e){var x=e.slice,E=e.each_ivar,B=e.klass,I=e.truthy,re=e.Kernel,Z=e.defs,C=e.def,W=e.send,v=e.to_a,D=e.return_self,$e=e.ensure_kwargs,V=e.hash_get,G=e.Opal,O=e.alias,j=e.nil,w=e.$$$;return e.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(A,M){var H=B(A,M,"Proc");e.prop(H.$$prototype,"$$is_proc",!0),e.prop(H.$$prototype,"$$is_lambda",!1),Z(H,"$new",function g(){var z=g.$$p||j;return g.$$p=null,I(z)||re.$raise(w("ArgumentError"),"tried to create a Proc object without a block"),z});function k(g,z){if(g.$$ret)try{return g.apply(null,z)}catch(F){if(F===g.$$ret)return F.$v;throw F}else return g.apply(null,z)}function P(g,z){if(g.$$brk)try{return e.yieldX(g,z)}catch(F){if(F===g.$$brk)return F.$v;throw F}else return e.yieldX(g,z)}return C(H,"$call",function g(z){var F=g.$$p||j,q,y,o=this;return g.$$p=null,q=x(arguments),y=q,F!==j&&(o.$$p=F),o.$$is_lambda?k(o,y):P(o,y)},-1),C(H,"$>>",function g(z){g.$$p;var F=this;return g.$$p=null,W(re,"proc",[],function q(y){var o=q.$$p||j,d,S,h=q.$$s==null?this:q.$$s,l=j;return q.$$p=null,d=x(arguments),S=d,l=W(h,"call",v(S),o.$to_proc()),z.$call(l)},{$$arity:-1,$$s:F})}),C(H,"$<<",function g(z){g.$$p;var F=this;return g.$$p=null,W(re,"proc",[],function q(y){var o=q.$$p||j,d,S,h=q.$$s==null?this:q.$$s,l=j;return q.$$p=null,d=x(arguments),S=d,l=W(z,"call",v(S),o.$to_proc()),h.$call(l)},{$$arity:-1,$$s:F})}),C(H,"$to_proc",D),C(H,"$lambda?",function(){var z=this;return!!z.$$is_lambda}),C(H,"$arity",function(){var z=this;return z.$$is_curried?-1:z.$$arity!=null?z.$$arity:z.length}),C(H,"$source_location",function(){var z=this,F=j;return z.$$is_curried?j:I(F=z.$$source_location)?F:j}),C(H,"$binding",function(){var z=this;return z.$$is_curried&&re.$raise(w("ArgumentError"),"Can't create Binding"),I(w("::","Binding","skip_raise")?"constant":j)?w("Binding").$new(j,[],z.$$s,z.$source_location()):j}),C(H,"$parameters",function(z){var F,q=this;if(z=$e(z),F=V(z,"lambda"),q.$$is_curried)return[["rest"]];if(q.$$parameters){if(F??q.$$is_lambda)return q.$$parameters;var y=[],o,d;for(o=0,d=q.$$parameters.length;o<d;o++){var S=q.$$parameters[o];S[0]==="req"&&(S=["opt",S[1]]),y.push(S)}return y}else return[]},-1),C(H,"$curry",function(z){var F=this;z===void 0?z=F.length:(z=G["$coerce_to!"](z,w("Integer"),"to_int"),F.$$is_lambda&&z!==F.length&&re.$raise(w("ArgumentError"),"wrong number of arguments ("+z+" for "+F.length+")"));function q(){var y=x(arguments),o=y.length,d;return o>z&&F.$$is_lambda&&!F.$$is_curried&&re.$raise(w("ArgumentError"),"wrong number of arguments ("+o+" for "+z+")"),o>=z?F.$call.apply(F,y):(d=function(){return q.apply(null,y.concat(x(arguments)))},d.$$is_lambda=F.$$is_lambda,d.$$is_curried=!0,d)}return q.$$is_lambda=F.$$is_lambda,q.$$is_curried=!0,q},-1),C(H,"$dup",function(){var z=this,F=z.$$original_proc||z,q=function(){return F.apply(this,arguments)};return E(z,function(y){q[y]=z[y]}),q}),O(H,"===","call"),O(H,"clone","dup"),O(H,"yield","call"),O(H,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function(e){var x=e.klass,E=e.def,B=e.truthy,I=e.slice,re=e.alias,Z=e.Kernel,C=e.send,W=e.to_a,v=e.nil,D=e.$$$;return e.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function($e,V){var G=x($e,V,"Method"),O=G.$$prototype;return O.method=O.receiver=O.owner=O.name=v,G.$attr_reader("owner","receiver","name"),E(G,"$initialize",function(w,A,M,H){var k=this;return k.receiver=w,k.owner=A,k.name=H,k.method=M}),E(G,"$arity",function(){var w=this;return w.method.$arity()}),E(G,"$parameters",function(){var w=this;return w.method.$$parameters}),E(G,"$source_location",function(){var w=this,A=v;return B(A=w.method.$$source_location)?A:["(eval)",0]}),E(G,"$comments",function(){var w=this,A=v;return B(A=w.method.$$comments)?A:[]}),E(G,"$call",function j(w){var A=j.$$p||v,M,H,k=this;return j.$$p=null,M=I(arguments),H=M,k.method.$$p=A,k.method.apply(k.receiver,H)},-1),E(G,"$curry",function(w){var A=this;return A.method.$curry(w)},-1),E(G,"$>>",function(w){var A=this;return A.method["$>>"](w)}),E(G,"$<<",function(w){var A=this;return A.method["$<<"](w)}),E(G,"$unbind",function(){var w=this;return D("UnboundMethod").$new(w.receiver.$class(),w.owner,w.method,w.name)}),E(G,"$to_proc",function(){var w=this,A=w.$call.bind(w);return A.$$unbound=w.method,A.$$is_lambda=!0,A.$$arity=w.method.$$arity==null?w.method.length:w.method.$$arity,A.$$parameters=w.method.$$parameters,A}),E(G,"$inspect",function(){var w=this;return"#<"+w.$class()+": "+w.receiver.$class()+"#"+w.name+" (defined in "+w.owner+" in "+w.$source_location().$join(":")+")>"}),re(G,"[]","call"),re(G,"===","call")}("::",null),function($e,V){var G=x($e,V,"UnboundMethod"),O=G.$$prototype;return O.method=O.owner=O.name=O.source=v,G.$attr_reader("source","owner","name"),E(G,"$initialize",function(w,A,M,H){var k=this;return k.source=w,k.owner=A,k.method=M,k.name=H,k.$$method=M}),E(G,"$arity",function(){var w=this;return w.method.$arity()}),E(G,"$parameters",function(){var w=this;return w.method.$$parameters}),E(G,"$source_location",function(){var w=this,A=v;return B(A=w.method.$$source_location)?A:["(eval)",0]}),E(G,"$comments",function(){var w=this,A=v;return B(A=w.method.$$comments)?A:[]}),E(G,"$bind",function(w){var A=this;if(A.owner.$$is_module||e.is_a(w,A.owner))return D("Method").$new(w,A.owner,A.method,A.name);Z.$raise(D("TypeError"),"can't bind singleton method to a different class (expected "+w+".kind_of?("+A.owner+" to be true)")}),E(G,"$bind_call",function j(w,A){var M=j.$$p||v,H,k,P=this;return j.$$p=null,H=I(arguments,1),k=H,C(P.$bind(w),"call",W(k),M.$to_proc())},-2),E(G,"$inspect",function(){var w=this;return"#<"+w.$class()+": "+w.source+"#"+w.name+" (defined in "+w.owner+" in "+w.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function(e){var x=e.gvars,E=e.const_set,B=e.Object,I=e.nil;return e.add_stubs("new"),x["&"]=x["~"]=x["`"]=x["'"]=I,x.LOADED_FEATURES=x['"']=e.loaded_features,x.LOAD_PATH=x[":"]=[],x["/"]=`
`,x[","]=I,E("::","ARGV",[]),E("::","ARGF",B.$new()),E("::","ENV",new Map),x.VERBOSE=!1,x.DEBUG=!1,x.SAFE=0};Opal.modules["corelib/io"]=function(e){var x=e.klass,E=e.const_set,B=e.not,I=e.truthy,re=e.def,Z=e.return_ivar,C=e.return_val,W=e.slice,v=e.Kernel,D=e.gvars,$e=e.send,V=e.to_a,G=e.rb_plus,O=e.neqeq,j=e.range,w=e.eqeq,A=e.to_ary,M=e.rb_gt,H=e.assign_ivar_val,k=e.alias,P,g=e.nil,z=e.$$$;e.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(q,y){var o=x(q,y,"IO"),d=o.$$prototype;return d.read_buffer=d.closed=g,E(o,"SEEK_SET",0),E(o,"SEEK_CUR",1),E(o,"SEEK_END",2),E(o,"SEEK_DATA",3),E(o,"SEEK_HOLE",4),E(o,"READABLE",1),E(o,"WRITABLE",4),o.$attr_reader("eof"),o.$attr_accessor("read_proc","sync","tty","write_proc"),re(o,"$initialize",function(h,l){var c=this;return l==null&&(l="r"),c.fd=h,c.flags=l,c.eof=!1,I(l["$include?"]("r"))&&B(l["$match?"](/[wa+]/))?c.closed="write":I(l["$match?"](/[wa]/))&&B(l["$match?"](/[r+]/))?c.closed="read":g},-2),re(o,"$fileno",Z("fd")),re(o,"$tty?",function(){var h=this;return h.tty==!0}),re(o,"$write",function(h){var l=this;return l.write_proc(h),h.$size()}),re(o,"$flush",C(g)),re(o,"$<<",function(h){var l=this;return l.$write(h),l}),re(o,"$print",function(h){var l,c,X=this;D[","]==null&&(D[","]=g),l=W(arguments),c=l;for(var b=0,i=c.length;b<i;b++)c[b]=v.$String(c[b]);return X.$write(c.join(D[","])),g},-1),re(o,"$puts",function(h){var l,c,X=this;l=W(arguments),c=l;var b;if(c.length===0)return X.$write(`
`),g;for(var i=0,a=c.length;i<a;i++)if(c[i].$$is_array){var $=c[i].$flatten();$.length>0&&$e(X,"puts",V($))}else c[i].$$is_string?b=c[i].valueOf():b=v.$String(c[i]),b.endsWith(`
`)||(b+=`
`),X.$write(b);return g},-1),re(o,"$getc",function(){var h=this,l=g,c=g,X=g;h.read_buffer=I(l=h.read_buffer)?l:"",c="";do if(h.read_buffer=G(h.read_buffer,c),O(h.read_buffer,""))return X=h.read_buffer["$[]"](0),h.read_buffer=h.read_buffer["$[]"](j(1,-1,!1)),X;while(I(c=h.$sysread_noraise(1)));return g}),re(o,"$getbyte",function(){var h,l=this;return h=l.$getc(),h===g||h==null?g:h.$ord()}),re(o,"$readbyte",function(){var h=this;return h.$readchar().$ord()}),re(o,"$readchar",function(){var h=this,l=g;return I(l=h.$getc())?l:v.$raise(z("EOFError"),"end of file reached")}),re(o,"$readline",function(h){var l,c,X=this,b=g;return l=W(arguments),c=l,I(b=$e(X,"gets",V(c)))?b:v.$raise(z("EOFError"),"end of file reached")},-1),re(o,"$gets",function(h,l,c){var X,b,i=this,a=g,$=g,n=g,t=g,r=g,s=g;D["/"]==null&&(D["/"]=g),h==null&&(h=!1),l==null&&(l=g),c==null&&(c=new Map),I(h.$$is_number)&&B(l)&&(X=[!1,h,l],h=X[0],l=X[1],c=X[2]),I(h.$$is_hash)&&B(l)&&w(c,new Map)?(X=[!1,g,h],h=X[0],l=X[1],c=X[2]):I(l.$$is_hash)&&w(c,new Map)&&(X=[h,g,l],h=X[0],l=X[1],c=X[2]),a=h,w(h,!1)&&(h=D["/"]),w(h,"")&&(h=/\r?\n\r?\n/),h=I($=h)?$:"",w(a,"")||(h=h.$to_str()),n=w(a,"")?2:h.$length(),w(h," ")&&(h=/ /),i.read_buffer=I($=i.read_buffer)?$:"",t="",r=g;do if(i.read_buffer=G(i.read_buffer,t),O(h,"")&&I(I(h.$$is_regexp)?i.read_buffer["$match?"](h):i.read_buffer["$include?"](h))){s=i.read_buffer,b=i.read_buffer.$split(h,2),X=A(b),r=X[0]==null?g:X[0],i.read_buffer=X[1]==null?g:X[1],O(r,s)&&(r=G(r,s["$[]"](r.$length(),n)));break}while(I(t=i.$sysread_noraise(w(h,"")?65536:1)));return I(r)||(X=[I($=i.read_buffer)?$:"",""],r=X[0],i.read_buffer=X[1],w(r,"")&&(r=g)),I(r)&&(I(l)&&(r=r["$[]"](e.Range.$new(0,l,!0)),i.read_buffer=G(r["$[]"](e.Range.$new(l,-1,!1)),i.read_buffer)),I(c["$[]"]("chomp"))&&(r=r.$sub(/\r?\n$/,"")),w(a,"")&&(r=r.$sub(/^[\r\n]+/,""))),w(a,!1)&&(D._=r),r},-1),re(o,"$sysread",function(h){var l=this,c=g;return I(c=l.read_proc(h))?c:(l.eof=!0,v.$raise(z("EOFError"),"end of file reached"))}),re(o,"$sysread_noraise",function(h){var l=this;try{return l.$sysread(h)}catch(c){if(e.rescue(c,[z("EOFError")]))try{return g}finally{e.pop_exception(c)}else throw c}}),re(o,"$readpartial",function(h){var l,c=this,X=g,b=g,i=g;return c.read_buffer=I(X=c.read_buffer)?X:"",b=c.$sysread(h),l=[G(c.read_buffer,I(X=b)?X:""),""],i=l[0],c.read_buffer=l[1],w(i,"")&&(i=g),i}),re(o,"$read",function(h){var l,c=this,X=g,b=g,i=g;h==null&&(h=g),c.read_buffer=I(X=c.read_buffer)?X:"",b="",i=g;do if(c.read_buffer=G(c.read_buffer,b),I(h)&&I(M(c.read_buffer.$length(),h)))return l=[c.read_buffer["$[]"](e.Range.$new(0,h,!0)),c.read_buffer["$[]"](e.Range.$new(h,-1,!1))],i=l[0],c.read_buffer=l[1],i;while(I(b=c.$sysread_noraise(I(X=h)?X:65536)));return l=[c.read_buffer,""],i=l[0],c.read_buffer=l[1],i},-1),re(o,"$readlines",function(h){var l=this;return D["/"]==null&&(D["/"]=g),h==null&&(h=D["/"]),l.$each_line(h).$to_a()},-1),re(o,"$each",function S(h,l){var c=S.$$p||g,X,b,i,a=this,$=g;if(D["/"]==null&&(D["/"]=g),S.$$p=null,X=W(arguments),X.length>0&&(b=X.shift()),b==null&&(b=D["/"]),i=X,c===g)return $e(a,"enum_for",["each",b].concat(V(i)));for(;I($=$e(a,"gets",[b].concat(V(i))));)e.yield1(c,$);return a},-1),re(o,"$each_byte",function S(){var h=S.$$p||g,l=this,c=g;if(S.$$p=null,h===g)return l.$enum_for("each_byte");for(;I(c=l.$getbyte());)e.yield1(h,c);return l}),re(o,"$each_char",function S(){var h=S.$$p||g,l=this,c=g;if(S.$$p=null,h===g)return l.$enum_for("each_char");for(;I(c=l.$getc());)e.yield1(h,c);return l}),re(o,"$close",H("closed","both")),re(o,"$close_read",function(){var h=this;return w(h.closed,"write")?h.closed="both":h.closed="read"}),re(o,"$close_write",function(){var h=this;return w(h.closed,"read")?h.closed="both":h.closed="write"}),re(o,"$closed?",function(){var h=this;return h.closed["$=="]("both")}),re(o,"$closed_read?",function(){var h=this,l=g;return I(l=h.closed["$=="]("read"))?l:h.closed["$=="]("both")}),re(o,"$closed_write?",function(){var h=this,l=g;return I(l=h.closed["$=="]("write"))?l:h.closed["$=="]("both")}),re(o,"$check_writable",function(){var h=this;return I(h["$closed_write?"]())?v.$raise(z("IOError"),"not opened for writing"):g}),re(o,"$check_readable",function(){var h=this;return I(h["$closed_read?"]())?v.$raise(z("IOError"),"not opened for reading"):g}),k(o,"each_line","each"),k(o,"eof?","eof")}("::",null),E("::","STDIN",D.stdin=z("IO").$new(0,"r")),E("::","STDOUT",D.stdout=z("IO").$new(1,"w")),E("::","STDERR",D.stderr=z("IO").$new(2,"w"));var F=e.global.console;return z("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(q){process.stdout.write(q)}:function(q){F.log(q)}),z("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(q){process.stderr.write(q)}:function(q){F.warn(q)}),P=[function(q){var y=prompt();return y!==null?y+`
`:g}],$e(z("STDIN"),"read_proc=",P),P[P.length-1]};Opal.modules["opal/regexp_anchors"]=function(e){var x=e.module,E=e.const_set,B=[];e.nil;var I=e.$$$;return e.add_stubs("new"),function(re,Z){var C=x(re,"Opal"),W=[C].concat(Z),v=e.$r(W);return E(C,"REGEXP_START","^"),E(C,"REGEXP_END","$"),E(C,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),E(C,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),E(C,"INLINE_IDENTIFIER_REGEXP",v("Regexp").$new("[^"+I(C,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+I(C,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),E(C,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),E(C,"CONST_NAME_REGEXP",v("Regexp").$new(""+I(C,"REGEXP_START")+"(::)?[A-Z][^"+I(C,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+I(C,"REGEXP_END")))}(B[0],B)};Opal.modules["opal/mini"]=function(e){var x=e.Object;return e.nil,e.add_stubs("require"),x.$require("opal/base"),x.$require("corelib/nil"),x.$require("corelib/boolean"),x.$require("corelib/string"),x.$require("corelib/comparable"),x.$require("corelib/enumerable"),x.$require("corelib/enumerator"),x.$require("corelib/array"),x.$require("corelib/hash"),x.$require("corelib/number"),x.$require("corelib/range"),x.$require("corelib/proc"),x.$require("corelib/method"),x.$require("corelib/regexp"),x.$require("corelib/variables"),x.$require("corelib/io"),x.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function(e){var x=e.coerce_to,E=e.module,B=e.slice,I=e.truthy,re=e.eqeq,Z=e.Opal,C=e.Kernel,W=e.gvars,v=e.def,D=e.alias,$e=e.nil,V=e.$$$;return e.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(G){var O=E(G,"Kernel");return v(O,"$format",function(w,A){var M,H,k=$e;W.DEBUG==null&&(W.DEBUG=$e),M=B(arguments,1),H=M,re(H.$length(),1)&&I(H["$[]"](0)["$respond_to?"]("to_ary"))&&(k=Z["$coerce_to?"](H["$[]"](0),V("Array"),"to_ary"),I(k["$nil?"]())||(H=k.$to_a()));var P="",g=0,z,F,q=w.length,y,o,d,S,h,l,c,X,b,i,a,$,n,t=1,r=0,s,u=0,f=1,p=2,R=4,L=8,T=16,J=32,ee=64,ae=128;function le(){s&J&&C.$raise(V("ArgumentError"),"flag after width"),s&ae&&C.$raise(V("ArgumentError"),"flag after precision")}function _e(){s&J&&C.$raise(V("ArgumentError"),"width given twice"),s&ae&&C.$raise(V("ArgumentError"),"width after precision")}function de(N){return N>=H.length&&C.$raise(V("ArgumentError"),"too few arguments"),H[N]}function ge(){switch(r){case-1:C.$raise(V("ArgumentError"),"unnumbered("+t+") mixed with numbered");case-2:C.$raise(V("ArgumentError"),"unnumbered("+t+") mixed with named")}return r=t++,de(r-1)}function ve(N){return r>0&&C.$raise(V("ArgumentError"),"numbered("+N+") after unnumbered("+r+")"),r===-2&&C.$raise(V("ArgumentError"),"numbered("+N+") after named"),N<1&&C.$raise(V("ArgumentError"),"invalid index - "+N+"$"),r=-1,de(N-1)}function me(){return n===void 0?ge():n}function be(N){for(var K,Y="";;F++){if(F===q&&C.$raise(V("ArgumentError"),"malformed format string - %*[0-9]"),w.charCodeAt(F)<48||w.charCodeAt(F)>57)return F--,K=parseInt(Y,10)||0,K>2147483647&&C.$raise(V("ArgumentError"),""+N+" too big"),K;Y+=w.charAt(F)}}function ie(N){var K,Y=be(N);return w.charAt(F+1)==="$"?(F++,K=ve(Y)):K=ge(),K.$to_int()}for(F=w.indexOf("%");F!==-1;F=w.indexOf("%",F)){switch(o=void 0,s=u,S=-1,h=-1,n=void 0,z=F,F++,w.charAt(F)){case"%":g=F;case"":case`
`:case"\0":F++;continue}e:for(;F<q;F++)switch(w.charAt(F)){case" ":le(),s|=T;continue e;case"#":le(),s|=f;continue e;case"+":le(),s|=R;continue e;case"-":le(),s|=p;continue e;case"0":le(),s|=L;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(l=be("width"),w.charAt(F+1)==="$"){if(F+2===q){o="%",F++;break e}n!==void 0&&C.$raise(V("ArgumentError"),"value given twice - %"+l+"$"),n=ve(l),F++}else _e(),s|=J,S=l;continue e;case"<":case"{":for(X=w.charAt(F)==="<"?">":"}",c="",F++;;F++){if(F===q&&C.$raise(V("ArgumentError"),"malformed name - unmatched parenthesis"),w.charAt(F)===X){if(r>0&&C.$raise(V("ArgumentError"),"named "+c+" after unnumbered("+r+")"),r===-1&&C.$raise(V("ArgumentError"),"named "+c+" after numbered"),r=-2,(H[0]===void 0||!H[0].$$is_hash)&&C.$raise(V("ArgumentError"),"one hash required"),n=H[0].$fetch(c),X===">")continue e;if(o=n.toString(),h!==-1&&(o=o.slice(0,h)),s&p)for(;o.length<S;)o=o+" ";else for(;o.length<S;)o=" "+o;break e}c+=w.charAt(F)}case"*":F++,_e(),s|=J,S=ie("width"),S<0&&(s|=p,S=-S);continue e;case".":if(s&ae&&C.$raise(V("ArgumentError"),"precision given twice"),s|=ee|ae,h=0,F++,w.charAt(F)==="*"){F++,h=ie("precision"),h<0&&(s&=~ee);continue e}h=be("precision");continue e;case"d":case"i":case"u":if(y=C.$Integer(me()),y>=0){for(o=y.toString();o.length<h;)o="0"+o;if(s&p)for((s&R||s&T)&&(o=(s&R?"+":" ")+o);o.length<S;)o=o+" ";else if(s&L&&h===-1){for(;o.length<S-(s&R||s&T?1:0);)o="0"+o;(s&R||s&T)&&(o=(s&R?"+":" ")+o)}else for((s&R||s&T)&&(o=(s&R?"+":" ")+o);o.length<S;)o=" "+o}else{for(o=(-y).toString();o.length<h;)o="0"+o;if(s&p)for(o="-"+o;o.length<S;)o=o+" ";else if(s&L&&h===-1){for(;o.length<S-1;)o="0"+o;o="-"+o}else for(o="-"+o;o.length<S;)o=" "+o}break e;case"b":case"B":case"o":case"x":case"X":switch(w.charAt(F)){case"b":case"B":b=2,i="0b",a=/^1+/,$="1";break;case"o":b=8,i="0",a=/^3?7+/,$="7";break;case"x":case"X":b=16,i="0x",a=/^f+/,$="f";break}if(y=C.$Integer(me()),y>=0){for(o=y.toString(b);o.length<h;)o="0"+o;if(s&p)for((s&R||s&T)&&(o=(s&R?"+":" ")+o),s&f&&y!==0&&(o=i+o);o.length<S;)o=o+" ";else if(s&L&&h===-1){for(;o.length<S-(s&R||s&T?1:0)-(s&f&&y!==0?i.length:0);)o="0"+o;s&f&&y!==0&&(o=i+o),(s&R||s&T)&&(o=(s&R?"+":" ")+o)}else for(s&f&&y!==0&&(o=i+o),(s&R||s&T)&&(o=(s&R?"+":" ")+o);o.length<S;)o=" "+o}else if(s&R||s&T){for(o=(-y).toString(b);o.length<h;)o="0"+o;if(s&p)for(s&f&&(o=i+o),o="-"+o;o.length<S;)o=o+" ";else if(s&L&&h===-1){for(;o.length<S-1-(s&f?2:0);)o="0"+o;s&f&&(o=i+o),o="-"+o}else for(s&f&&(o=i+o),o="-"+o;o.length<S;)o=" "+o}else{for(o=(y>>>0).toString(b).replace(a,$);o.length<h-2;)o=$+o;if(s&p)for(o=".."+o,s&f&&(o=i+o);o.length<S;)o=o+" ";else if(s&L&&h===-1){for(;o.length<S-2-(s&f?i.length:0);)o=$+o;o=".."+o,s&f&&(o=i+o)}else for(o=".."+o,s&f&&(o=i+o);o.length<S;)o=" "+o}w.charAt(F)===w.charAt(F).toUpperCase()&&(o=o.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(y=C.$Float(me()),y>=0||isNaN(y)){if(y===1/0)o="Inf";else switch(w.charAt(F)){case"f":o=y.toFixed(h===-1?6:h);break;case"e":case"E":o=y.toExponential(h===-1?6:h);break;case"g":case"G":o=y.toExponential(),d=parseInt(o.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(o=y.toPrecision(h===-1?s&f?6:void 0:h));break}if(s&p)for((s&R||s&T)&&(o=(s&R?"+":" ")+o);o.length<S;)o=o+" ";else if(s&L&&y!==1/0&&!isNaN(y)){for(;o.length<S-(s&R||s&T?1:0);)o="0"+o;(s&R||s&T)&&(o=(s&R?"+":" ")+o)}else for((s&R||s&T)&&(o=(s&R?"+":" ")+o);o.length<S;)o=" "+o}else{if(y===-1/0)o="Inf";else switch(w.charAt(F)){case"f":o=(-y).toFixed(h===-1?6:h);break;case"e":case"E":o=(-y).toExponential(h===-1?6:h);break;case"g":case"G":o=(-y).toExponential(),d=parseInt(o.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(o=(-y).toPrecision(h===-1?s&f?6:void 0:h));break}if(s&p)for(o="-"+o;o.length<S;)o=o+" ";else if(s&L&&y!==-1/0){for(;o.length<S-1;)o="0"+o;o="-"+o}else for(o="-"+o;o.length<S;)o=" "+o}w.charAt(F)===w.charAt(F).toUpperCase()&&y!==1/0&&y!==-1/0&&!isNaN(y)&&(o=o.toUpperCase()),o=o.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":C.$raise(V("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(y=me(),y["$respond_to?"]("to_ary")&&(y=y.$to_ary()[0]),y["$respond_to?"]("to_str")?o=y.$to_str():o=String.fromCharCode(x(y,V("Integer"),"to_int")),o.length!==1&&C.$raise(V("ArgumentError"),"%c requires a character"),s&p)for(;o.length<S;)o=o+" ";else for(;o.length<S;)o=" "+o;break e;case"p":if(o=me().$inspect(),h!==-1&&(o=o.slice(0,h)),s&p)for(;o.length<S;)o=o+" ";else for(;o.length<S;)o=" "+o;break e;case"s":if(o=me().$to_s(),h!==-1&&(o=o.slice(0,h)),s&p)for(;o.length<S;)o=o+" ";else for(;o.length<S;)o=" "+o;break e;default:C.$raise(V("ArgumentError"),"malformed format string - %"+w.charAt(F))}o===void 0&&C.$raise(V("ArgumentError"),"malformed format string - %"),P+=w.slice(g,z)+o,g=F+1}return W.DEBUG&&r>=0&&t<H.length&&C.$raise(V("ArgumentError"),"too many arguments for format string"),P+w.slice(g)},-2),D(O,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function(e){var x=e.klass,E=e.rb_plus,B=e.truthy,I=e.send,re=e.defs,Z=e.eqeq,C=e.def,W=e.return_ivar,v=e.return_val,D=e.slice,$e=e.Kernel,V=e.Opal,G=e.rb_lt,O,j=e.top,w=[],A=e.$r(w),M=e.nil,H=e.$$$;return e.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),j.$require("corelib/string"),function(k,P,g){var z=x(k,P,"Encoding"),F=[z].concat(g),q=z.$$prototype;return q.name=q.dummy=M,re(z,"$register",function y(o,d){var S=y.$$p||M,h=this,l=M,c=M,X=M,b=M,i=M,a=M;return y.$$p=null,d==null&&(d=new Map),l=E([o],B(c=d["$[]"]("aliases"))?c:[]),X=B(c=d["$[]"]("ascii"))&&c,b=B(c=d["$[]"]("dummy"))&&c,B(d["$[]"]("inherits"))?(i=d["$[]"]("inherits").$clone(),i.$initialize(o,l,X,b)):i=h.$new(o,l,X,b),S!==M&&I(i,"instance_eval",[],S.$to_proc()),a=e.encodings,I(l,"each",[],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=M),t.$const_set(n.$tr("-","_"),i),a[n]=i},{$$s:h})},-2),re(z,"$find",function(o){var d=this;return Z(o,"default_external")?d.$default_external():e.find_encoding(o)}),z.$singleton_class().$attr_accessor("default_external"),z.$attr_reader("name","names"),C(z,"$initialize",function(o,d,S,h){var l=this;return l.name=o,l.names=d,l.ascii=S,l.dummy=h}),C(z,"$ascii_compatible?",W("ascii")),C(z,"$dummy?",W("dummy")),C(z,"$binary?",v(!1)),C(z,"$to_s",W("name")),C(z,"$inspect",function(){var o=this;return"#<Encoding:"+o.name+(B(o.dummy)?" (dummy)":M)+">"}),C(z,"$charsize",function(o){for(var d=0,S=0,h=o.length;S<h;S++){var l=o.charCodeAt(S);l>=55296&&l<=56319||d++}return d}),C(z,"$each_char",function y(o){var d=y.$$p||M;y.$$p=null;for(var S="",h=0,l=o.length;h<l;h++){var c=o.charCodeAt(h),X=o.charAt(h);if(c>=56320&&c<=57343){S=X;continue}else c>=55296&&c<=56319&&(X=S+X);o.encoding.name!="UTF-8"&&(X=new String(X),X.encoding=o.encoding),e.yield1(d,X)}}),C(z,"$each_byte",function(o){return D(arguments),$e.$raise(H("NotImplementedError"))},-1),C(z,"$bytesize",function(o){return D(arguments),$e.$raise(H("NotImplementedError"))},-1),x("::",H("StandardError"),"EncodingError"),x("::",H("EncodingError"),"CompatibilityError"),x(F[0],H("EncodingError"),"UndefinedConversionError"),M}("::",null,w),I(H("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function k(){var P=k.$$s==null?this:k.$$s;return C(P,"$each_byte",function g(z){var F=g.$$p||M;g.$$p=null;for(var q=1/0,y,o=z.length,d=null,S=0;S<o;++S){if(y=z.charCodeAt(S),y>55295&&y<57344){if(!d){if(y>56319){(q-=3)>-1&&(e.yield1(F,239),e.yield1(F,191),e.yield1(F,189));continue}else if(S+1===o){(q-=3)>-1&&(e.yield1(F,239),e.yield1(F,191),e.yield1(F,189));continue}d=y;continue}if(y<56320){(q-=3)>-1&&(e.yield1(F,239),e.yield1(F,191),e.yield1(F,189)),d=y;continue}y=(d-55296<<10|y-56320)+65536}else d&&(q-=3)>-1&&(e.yield1(F,239),e.yield1(F,191),e.yield1(F,189));if(d=null,y<128){if((q-=1)<0)break;e.yield1(F,y)}else if(y<2048){if((q-=2)<0)break;e.yield1(F,y>>6|192),e.yield1(F,y&63|128)}else if(y<65536){if((q-=3)<0)break;e.yield1(F,y>>12|224),e.yield1(F,y>>6&63|128),e.yield1(F,y&63|128)}else if(y<1114112){if((q-=4)<0)break;e.yield1(F,y>>18|240),e.yield1(F,y>>12&63|128),e.yield1(F,y>>6&63|128),e.yield1(F,y&63|128)}}}),C(P,"$bytesize",function(z){return z.$bytes().$length()})},{$$s:j}),I(H("Encoding"),"register",["UTF-16LE"],function k(){var P=k.$$s==null?this:k.$$s;return C(P,"$each_byte",function g(z){var F=g.$$p||M;g.$$p=null;for(var q=0,y=z.length;q<y;q++){var o=z.charCodeAt(q);e.yield1(F,o&255),e.yield1(F,o>>8)}}),C(P,"$bytesize",function(z){return z.length*2})},{$$s:j}),I(H("Encoding"),"register",["UTF-16BE",new Map([["inherits",H(H("Encoding"),"UTF_16LE")]])],function k(){var P=k.$$s==null?this:k.$$s;return C(P,"$each_byte",function g(z){var F=g.$$p||M;g.$$p=null;for(var q=0,y=z.length;q<y;q++){var o=z.charCodeAt(q);e.yield1(F,o>>8),e.yield1(F,o&255)}})},{$$s:j}),I(H("Encoding"),"register",["UTF-32LE"],function k(){var P=k.$$s==null?this:k.$$s;return C(P,"$each_byte",function g(z){var F=g.$$p||M;g.$$p=null;for(var q=0,y=z.length;q<y;q++){var o=z.charCodeAt(q);e.yield1(F,o&255),e.yield1(F,o>>8),e.yield1(F,0),e.yield1(F,0)}}),C(P,"$bytesize",function(z){return z.length*4})},{$$s:j}),I(H("Encoding"),"register",["UTF-32BE",new Map([["inherits",H(H("Encoding"),"UTF_32LE")]])],function k(){var P=k.$$s==null?this:k.$$s;return C(P,"$each_byte",function g(z){var F=g.$$p||M;g.$$p=null;for(var q=0,y=z.length;q<y;q++){var o=z.charCodeAt(q);e.yield1(F,0),e.yield1(F,0),e.yield1(F,o>>8),e.yield1(F,o&255)}})},{$$s:j}),I(H("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function k(){var P=k.$$s==null?this:k.$$s;return C(P,"$each_char",function g(z){var F=g.$$p||M;g.$$p=null;for(var q=0,y=z.length;q<y;q++){var o=new String(z.charAt(q));o.encoding=z.encoding,e.yield1(F,o)}}),C(P,"$charsize",function(z){return z.length}),C(P,"$each_byte",function g(z){var F=g.$$p||M;g.$$p=null;for(var q=0,y=z.length;q<y;q++){var o=z.charCodeAt(q);e.yield1(F,o&255)}}),C(P,"$bytesize",function(z){return z.length}),C(P,"$binary?",v(!0))},{$$s:j}),H("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",H(H("Encoding"),"ASCII_8BIT")]])),H("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",H(H("Encoding"),"ASCII_8BIT")]])),function(k,P){var g=x(k,P,"String"),z=g.$$prototype;return z.internal_encoding=z.bytes=z.encoding=M,g.$attr_reader("encoding"),g.$attr_reader("internal_encoding"),e.prop(String.prototype,"bytes",M),e.prop(String.prototype,"encoding",H(H("Encoding"),"UTF_8")),e.prop(String.prototype,"internal_encoding",H(H("Encoding"),"UTF_8")),C(g,"$b",function(){var q=this;return q.$dup().$force_encoding("binary")}),C(g,"$bytesize",function(){var q=this;return q.internal_encoding.$bytesize(q)}),C(g,"$each_byte",function F(){var q=F.$$p||M,y=this;return F.$$p=null,q===M?I(y,"enum_for",["each_byte"],function o(){var d=o.$$s==null?this:o.$$s;return d.$bytesize()},{$$s:y}):(I(y.internal_encoding,"each_byte",[y],q.$to_proc()),y)}),C(g,"$bytes",function(){var q=this,y=M;return typeof q=="string"?new String(q).$each_byte().$to_a():(q.bytes=B(y=q.bytes)?y:q.$each_byte().$to_a(),q.bytes.$dup())}),C(g,"$each_char",function F(){var q=F.$$p||M,y=this;return F.$$p=null,q===M?I(y,"enum_for",["each_char"],function o(){var d=o.$$s==null?this:o.$$s;return d.$length()},{$$s:y}):(I(y.encoding,"each_char",[y],q.$to_proc()),y)}),C(g,"$chars",function F(){var q=F.$$p||M,y=this;return F.$$p=null,B(q)?I(y,"each_char",[],q.$to_proc()):y.$each_char().$to_a()}),C(g,"$each_codepoint",function F(){var q=F.$$p||M,y=this;if(F.$$p=null,q===M)return y.$enum_for("each_codepoint");for(var o=0,d=y.length;o<d;o++)e.yield1(q,y.codePointAt(o));return y}),C(g,"$codepoints",function F(){var q=F.$$p||M,y=this;return F.$$p=null,q!==M?I(y,"each_codepoint",[],q.$to_proc()):y.$each_codepoint().$to_a()}),C(g,"$encode",function(q){var y=this;return e.enc(y,q)}),C(g,"$force_encoding",function(q){var y=this,o=y;return q===o.encoding||(q=V["$coerce_to!"](q,H("String"),"to_s"),q=H("Encoding").$find(q),q===o.encoding)||(o=e.set_encoding(o,q)),o}),C(g,"$getbyte",function(q){var y=this,o=M;return o=y.$bytes(),q=V["$coerce_to!"](q,H("Integer"),"to_int"),B(G(o.$length(),q))?M:o["$[]"](q)}),C(g,"$initialize_copy",function(q){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),C(g,"$valid_encoding?",v(!0))}("::",null),O=[H(A("Encoding"),"UTF_8")],I(H("Encoding"),"default_external=",O),O[O.length-1]};Opal.modules["corelib/math"]=function(e){var x=e.type_error,E=e.module,B=e.const_set,I=e.Class,re=e.slice,Z=e.Kernel,C=e.defs,W=e.truthy,v=e.send,D=e.def,$e=e.rb_minus,V=e.eqeqeq,G=e.rb_divide,O=[],j=e.nil,w=e.$$$;return e.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(A,M){var H=E(A,"Math"),k=[H].concat(M),P=e.$r(k);return B(H,"E",Math.E),B(H,"PI",Math.PI),B(H,"DomainError",I.$new(w("StandardError"))),C(H,"$checked",function(z,F){var q,y;if(q=re(arguments,1),y=q,isNaN(y[0])||y.length==2&&isNaN(y[1]))return NaN;var o=Math[z].apply(null,y);return isNaN(o)&&Z.$raise(P("DomainError"),'Numerical argument is out of domain - "'+z+'"'),o},-2),C(H,"$float!",function(z){try{return Z.$Float(z)}catch(F){if(e.rescue(F,[w("ArgumentError")]))try{return Z.$raise(x(z,w("Float")))}finally{e.pop_exception(F)}else throw F}}),C(H,"$integer!",function(z){try{return Z.$Integer(z)}catch(F){if(e.rescue(F,[w("ArgumentError")]))try{return Z.$raise(x(z,w("Integer")))}finally{e.pop_exception(F)}else throw F}}),H.$module_function(),W(typeof Math.erf<"u")||e.prop(Math,"erf",function(g){var z=.254829592,F=-.284496736,q=1.421413741,y=-1.453152027,o=1.061405429,d=.3275911,S=1;g<0&&(S=-1),g=Math.abs(g);var h=1/(1+d*g),l=1-((((o*h+y)*h+q)*h+F)*h+z)*h*Math.exp(-g*g);return S*l}),W(typeof Math.erfc<"u")||e.prop(Math,"erfc",function(g){var z=Math.abs(g),F=1/(.5*z+1),q=F*.17087277+-.82215223,y=F*q+1.48851587,o=F*y+-1.13520398,d=F*o+.27886807,S=F*d+-.18628806,h=F*S+.09678418,l=F*h+.37409196,c=F*l+1.00002368,X=F*c,b=-z*z-1.26551223+X,i=F*Math.exp(b);return g<0?2-i:i}),v(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function g(z){var F=g.$$s==null?this:g.$$s;return z==null&&(z=j),v(F,"define_method",[z],function(y){return y==null&&(y=j),w("Math").$checked(z,w("Math")["$float!"](y))})},{$$s:H}),D(H,"$atan2",function(z,F){return w("Math").$checked("atan2",w("Math")["$float!"](z),w("Math")["$float!"](F))}),D(H,"$hypot",function(z,F){return w("Math").$checked("hypot",w("Math")["$float!"](z),w("Math")["$float!"](F))}),D(H,"$frexp",function(z){if(z=P("Math")["$float!"](z),isNaN(z))return[NaN,0];var F=Math.floor(Math.log(Math.abs(z))/Math.log(2))+1,q=z/Math.pow(2,F);return[q,F]}),D(H,"$gamma",function(z){z=P("Math")["$float!"](z);var F,q,y,o,d,S,h,l,c,X=4.7421875,b=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(z))return NaN;if(z===0&&1/z<0)return-1/0;if((z===-1||z===-1/0)&&Z.$raise(P("DomainError"),'Numerical argument is out of domain - "gamma"'),P("Integer")["$==="](z)){if(z<=0)return isFinite(z)?1/0:NaN;if(z>171)return 1/0;for(o=z-2,d=z-1;o>1;)d*=o,o--;return d==0&&(d=1),d}if(z<.5)return Math.PI/(Math.sin(Math.PI*z)*w("Math").$gamma($e(1,z)));if(z>=171.35)return 1/0;if(z>85)return S=z*z,h=S*z,l=h*z,c=l*z,Math.sqrt(2*Math.PI/z)*Math.pow(z/Math.E,z)*(1+1/(12*z)+1/(288*S)-139/(51840*h)-571/(2488320*l)+163879/(209018880*c)+5246819/(75246796800*c*z));for(z-=1,y=b[0],F=1;F<b.length;++F)y+=b[F]/(z+F);return q=z+X+.5,Math.sqrt(2*Math.PI)*Math.pow(q,z+.5)*Math.exp(-q)*y}),D(H,"$ldexp",function(z,F){return z=P("Math")["$float!"](z),F=P("Math")["$integer!"](F),isNaN(F)&&Z.$raise(w("RangeError"),"float NaN out of range of integer"),z*Math.pow(2,F)}),D(H,"$lgamma",function(z){return z==-1?[1/0,1]:[Math.log(Math.abs(w("Math").$gamma(z))),w("Math").$gamma(z)<0?-1:1]}),D(H,"$log",function(z,F){return V(w("String"),z)&&Z.$raise(x(z,w("Float"))),W(F==null)?w("Math").$checked("log",w("Math")["$float!"](z)):(V(w("String"),F)&&Z.$raise(x(F,w("Float"))),G(w("Math").$checked("log",w("Math")["$float!"](z)),w("Math").$checked("log",w("Math")["$float!"](F))))},-2),D(H,"$log10",function(z){return V(w("String"),z)&&Z.$raise(x(z,w("Float"))),w("Math").$checked("log10",w("Math")["$float!"](z))}),D(H,"$log2",function(z){return V(w("String"),z)&&Z.$raise(x(z,w("Float"))),w("Math").$checked("log2",w("Math")["$float!"](z))}),D(H,"$tan",function(z){return z=w("Math")["$float!"](z),W(z["$infinite?"]())?w(w("Float"),"NAN"):w("Math").$checked("tan",w("Math")["$float!"](z))})}("::",O)};Opal.modules["corelib/complex/base"]=function(e){var x=e.module,E=e.truthy,B=e.def,I=e.klass,re=[],Z=e.nil;return e.add_stubs("new,from_string"),function(C,W){var v=x(C,"Kernel"),D=[v].concat(W),$e=e.$r(D);return B(v,"$Complex",function(G,O){return O==null&&(O=Z),E(O)?$e("Complex").$new(G,O):$e("Complex").$new(G,0)},-2)}("::",re),function(C,W,v){var D=I(C,W,"String"),$e=[D].concat(v),V=e.$r($e);return B(D,"$to_c",function(){var O=this;return V("Complex").$from_string(O)})}("::",null,re)};Opal.modules["corelib/complex"]=function(e){var x=e.klass,E=e.truthy,B=e.eqeqeq,I=e.Kernel,re=e.defs,Z=e.rb_times,C=e.def,W=e.rb_plus,v=e.rb_minus,D=e.rb_divide,$e=e.eqeq,V=e.to_ary,G=e.rb_gt,O=e.neqeq,j=e.return_val,w=e.const_set,A=e.alias,M=e.top,H=[],k=e.nil,P=e.$$$;return e.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),M.$require("corelib/numeric"),M.$require("corelib/complex/base"),function(g,z,F){var q=x(g,z,"Complex"),y=[q].concat(F),o=e.$r(y),d=q.$$prototype;return d.real=d.imag=k,re(q,"$rect",function(h,l){var c=this;return l==null&&(l=0),B(P("Numeric"),h)&&E(h["$real?"]())&&B(P("Numeric"),l)&&E(l["$real?"]())||I.$raise(P("TypeError"),"not a real"),c.$new(h,l)},-2),re(q,"$polar",function(h,l){var c=this;return l==null&&(l=0),B(P("Numeric"),h)&&E(h["$real?"]())&&B(P("Numeric"),l)&&E(l["$real?"]())||I.$raise(P("TypeError"),"not a real"),c.$new(Z(h,P("Math").$cos(l)),Z(h,P("Math").$sin(l)))},-2),q.$attr_reader("real","imag"),C(q,"$initialize",function(h,l){var c=this;return l==null&&(l=0),c.real=h,c.imag=l,c.$freeze()},-2),C(q,"$coerce",function(h){var l=this;return B(P("Complex"),h)?[h,l]:B(P("Numeric"),h)&&E(h["$real?"]())?[P("Complex").$new(h,0),l]:I.$raise(P("TypeError"),""+h.$class()+" can't be coerced into Complex")}),C(q,"$==",function(h){var l=this,c=k;return B(P("Complex"),h)?E(c=l.real["$=="](h.$real()))?l.imag["$=="](h.$imag()):c:B(P("Numeric"),h)&&E(h["$real?"]())?E(c=l.real["$=="](h))?l.imag["$=="](0):c:h["$=="](l)}),C(q,"$-@",function(){var h=this;return I.$Complex(h.real["$-@"](),h.imag["$-@"]())}),C(q,"$+",function(h){var l=this;return B(P("Complex"),h)?I.$Complex(W(l.real,h.$real()),W(l.imag,h.$imag())):B(P("Numeric"),h)&&E(h["$real?"]())?I.$Complex(W(l.real,h),l.imag):l.$__coerced__("+",h)}),C(q,"$-",function(h){var l=this;return B(P("Complex"),h)?I.$Complex(v(l.real,h.$real()),v(l.imag,h.$imag())):B(P("Numeric"),h)&&E(h["$real?"]())?I.$Complex(v(l.real,h),l.imag):l.$__coerced__("-",h)}),C(q,"$*",function(h){var l=this;return B(P("Complex"),h)?I.$Complex(v(Z(l.real,h.$real()),Z(l.imag,h.$imag())),W(Z(l.real,h.$imag()),Z(l.imag,h.$real()))):B(P("Numeric"),h)&&E(h["$real?"]())?I.$Complex(Z(l.real,h),Z(l.imag,h)):l.$__coerced__("*",h)}),C(q,"$/",function(h){var l=this;return B(P("Complex"),h)?B(P("Number"),l.real)&&E(l.real["$nan?"]())||B(P("Number"),l.imag)&&E(l.imag["$nan?"]())||B(P("Number"),h.$real())&&E(h.$real()["$nan?"]())||B(P("Number"),h.$imag())&&E(h.$imag()["$nan?"]())?P("Complex").$new(P(P("Float"),"NAN"),P(P("Float"),"NAN")):D(Z(l,h.$conj()),h.$abs2()):B(P("Numeric"),h)&&E(h["$real?"]())?I.$Complex(l.real.$quo(h),l.imag.$quo(h)):l.$__coerced__("/",h)}),C(q,"$**",function(h){var l,c,X=this,b=k,i=k,a=k,$=k,n=k,t=k,r=k,s=k,u=k,f=k,p=k;if($e(h,0))return P("Complex").$new(1,0);if(B(P("Complex"),h))return c=X.$polar(),l=V(c),b=l[0]==null?k:l[0],i=l[1]==null?k:l[1],a=h.$real(),$=h.$imag(),n=P("Math").$exp(v(Z(a,P("Math").$log(b)),Z($,i))),t=W(Z(i,a),Z($,P("Math").$log(b))),P("Complex").$polar(n,t);if(B(P("Integer"),h))if(E(G(h,0))){for(r=X,s=r,u=v(h,1);O(u,0);){for(c=u.$divmod(2),l=V(c),f=l[0]==null?k:l[0],p=l[1]==null?k:l[1];$e(p,0);)r=I.$Complex(v(Z(r.$real(),r.$real()),Z(r.$imag(),r.$imag())),Z(Z(2,r.$real()),r.$imag())),u=f,c=u.$divmod(2),l=V(c),f=l[0]==null?k:l[0],p=l[1]==null?k:l[1];s=Z(s,r),u=v(u,1)}return s}else return D(P("Rational").$new(1,1),X)["$**"](h["$-@"]());else return B(P("Float"),h)||B(P("Rational"),h)?(c=X.$polar(),l=V(c),b=l[0]==null?k:l[0],i=l[1]==null?k:l[1],P("Complex").$polar(b["$**"](h),Z(i,h))):X.$__coerced__("**",h)}),C(q,"$abs",function(){var h=this;return P("Math").$hypot(h.real,h.imag)}),C(q,"$abs2",function(){var h=this;return W(Z(h.real,h.real),Z(h.imag,h.imag))}),C(q,"$angle",function(){var h=this;return P("Math").$atan2(h.imag,h.real)}),C(q,"$conj",function(){var h=this;return I.$Complex(h.real,h.imag["$-@"]())}),C(q,"$denominator",function(){var h=this;return h.real.$denominator().$lcm(h.imag.$denominator())}),C(q,"$eql?",function(h){var l=this,c=k,X=k;return E(c=E(X=o("Complex")["$==="](h))?l.real.$class()["$=="](l.imag.$class()):X)?l["$=="](h):c}),C(q,"$fdiv",function(h){var l=this;return B(P("Numeric"),h)||I.$raise(P("TypeError"),""+h.$class()+" can't be coerced into Complex"),D(l,h)}),C(q,"$finite?",function(){var h=this,l=k;return E(l=h.real["$finite?"]())?h.imag["$finite?"]():l}),C(q,"$hash",function(){var h=this;return[P("Complex"),h.real,h.imag].$hash()}),C(q,"$infinite?",function(){var h=this,l=k;return E(l=h.real["$infinite?"]())?l:h.imag["$infinite?"]()}),C(q,"$inspect",function(){var h=this;return"("+h+")"}),C(q,"$numerator",function(){var h=this,l=k;return l=h.$denominator(),I.$Complex(Z(h.real.$numerator(),D(l,h.real.$denominator())),Z(h.imag.$numerator(),D(l,h.imag.$denominator())))}),C(q,"$polar",function(){var h=this;return[h.$abs(),h.$arg()]}),C(q,"$rationalize",function(h){var l=this;return arguments.length>1&&I.$raise(P("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),O(l.imag,0)&&I.$raise(P("RangeError"),"can't convert "+l+" into Rational"),l.$real().$rationalize(h)},-1),C(q,"$real?",j(!1)),C(q,"$rect",function(){var h=this;return[h.real,h.imag]}),C(q,"$to_f",function(){var h=this;return $e(h.imag,0)||I.$raise(P("RangeError"),"can't convert "+h+" into Float"),h.real.$to_f()}),C(q,"$to_i",function(){var h=this;return $e(h.imag,0)||I.$raise(P("RangeError"),"can't convert "+h+" into Integer"),h.real.$to_i()}),C(q,"$to_r",function(){var h=this;return $e(h.imag,0)||I.$raise(P("RangeError"),"can't convert "+h+" into Rational"),h.real.$to_r()}),C(q,"$to_s",function(){var h=this,l=k;return l=h.real.$inspect(),l=W(l,B(P("Number"),h.imag)&&E(h.imag["$nan?"]())||E(h.imag["$positive?"]())||E(h.imag["$zero?"]())?"+":"-"),l=W(l,h.imag.$abs().$inspect()),B(P("Number"),h.imag)&&(E(h.imag["$nan?"]())||E(h.imag["$infinite?"]()))&&(l=W(l,"*")),W(l,"i")}),w(y[0],"I",q.$new(0,1)),re(q,"$from_string",function(h){var l=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;h.match(l);var c,X;function b(){return l.test(h)}function i(){var $=h.match(l),n=$[0];return h=h.slice(n.length),n.replace(/_/g,"")}function a(){if(b()){var $=parseFloat(i());if(h[0]==="/")if(h=h.slice(1),b()){var n=parseFloat(i());return I.$Rational($,n)}else return h="/"+h,$;else return $}else return null}return c=a(),c?(X=a(),X?I.$Complex(c,X):h[0]==="i"?I.$Complex(0,c):I.$Complex(c,0)):h[0]==="i"?I.$Complex(0,1):h[0]==="-"&&h[1]==="i"?I.$Complex(0,-1):h[0]==="+"&&h[1]==="i"?I.$Complex(0,1):I.$Complex(0,0)}),function(S,h){return A(S,"rectangular","rect")}(e.get_singleton_class(q)),A(q,"arg","angle"),A(q,"conjugate","conj"),A(q,"divide","/"),A(q,"imaginary","imag"),A(q,"magnitude","abs"),A(q,"phase","arg"),A(q,"quo","/"),A(q,"rectangular","rect"),e.udef(q,"$negative?"),e.udef(q,"$positive?"),e.udef(q,"$step"),k}("::",P("Numeric"),H)};Opal.modules["corelib/rational/base"]=function(e){var x=e.module,E=e.def,B=e.klass;e.nil;var I=e.$$$;return e.add_stubs("convert,from_string"),function(re){var Z=x(re,"Kernel");return E(Z,"$Rational",function(W,v){return v==null&&(v=1),I("Rational").$convert(W,v)},-2)}("::"),function(re,Z){var C=B(re,Z,"String");return E(C,"$to_r",function(){var v=this;return I("Rational").$from_string(v)})}("::",null)};Opal.modules["corelib/rational"]=function(e){var x=e.klass,E=e.eqeq,B=e.Kernel,I=e.truthy,re=e.rb_lt,Z=e.rb_divide,C=e.defs,W=e.eqeqeq,v=e.not,D=e.Opal,$e=e.def,V=e.return_ivar,G=e.rb_minus,O=e.rb_times,j=e.rb_plus,w=e.rb_gt,A=e.rb_le,M=e.return_self,H=e.alias,k=e.top,P=e.nil,g=e.$$$;return e.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),k.$require("corelib/numeric"),k.$require("corelib/rational/base"),function(z,F){var q=x(z,F,"Rational"),y=q.$$prototype;return y.num=y.den=P,C(q,"$reduce",function(d,S){var h=this,l=P;if(d=d.$to_i(),S=S.$to_i(),E(S,0))B.$raise(g("ZeroDivisionError"),"divided by 0");else if(I(re(S,0)))d=d["$-@"](),S=S["$-@"]();else if(E(S,1))return h.$new(d,S);return l=d.$gcd(S),h.$new(Z(d,l),Z(S,l))}),C(q,"$convert",function(d,S){var h=this;return(I(d["$nil?"]())||I(S["$nil?"]()))&&B.$raise(g("TypeError"),"cannot convert nil into Rational"),W(g("Integer"),d)&&W(g("Integer"),S)?h.$reduce(d,S):((W(g("Float"),d)||W(g("String"),d)||W(g("Complex"),d))&&(d=d.$to_r()),(W(g("Float"),S)||W(g("String"),S)||W(g("Complex"),S))&&(S=S.$to_r()),I(S["$equal?"](1))&&v(g("Integer")["$==="](d))?D["$coerce_to!"](d,g("Rational"),"to_r"):W(g("Numeric"),d)&&W(g("Numeric"),S)?Z(d,S):h.$reduce(d,S))}),$e(q,"$initialize",function(d,S){var h=this;return h.num=d,h.den=S,h.$freeze()}),$e(q,"$numerator",V("num")),$e(q,"$denominator",V("den")),$e(q,"$coerce",function(d){var S=this,h=P;return W(g("Rational"),h=d)?[d,S]:W(g("Integer"),h)?[d.$to_r(),S]:W(g("Float"),h)?[d,S.$to_f()]:P}),$e(q,"$==",function(d){var S=this,h=P,l=P;return W(g("Rational"),h=d)?I(l=S.num["$=="](d.$numerator()))?S.den["$=="](d.$denominator()):l:W(g("Integer"),h)?I(l=S.num["$=="](d))?S.den["$=="](1):l:W(g("Float"),h)?S.$to_f()["$=="](d):d["$=="](S)}),$e(q,"$<=>",function(d){var S=this,h=P;return W(g("Rational"),h=d)?G(O(S.num,d.$denominator()),O(S.den,d.$numerator()))["$<=>"](0):W(g("Integer"),h)?G(S.num,O(S.den,d))["$<=>"](0):W(g("Float"),h)?S.$to_f()["$<=>"](d):S.$__coerced__("<=>",d)}),$e(q,"$+",function(d){var S=this,h=P,l=P,c=P;return W(g("Rational"),h=d)?(l=j(O(S.num,d.$denominator()),O(S.den,d.$numerator())),c=O(S.den,d.$denominator()),B.$Rational(l,c)):W(g("Integer"),h)?B.$Rational(j(S.num,O(d,S.den)),S.den):W(g("Float"),h)?j(S.$to_f(),d):S.$__coerced__("+",d)}),$e(q,"$-",function(d){var S=this,h=P,l=P,c=P;return W(g("Rational"),h=d)?(l=G(O(S.num,d.$denominator()),O(S.den,d.$numerator())),c=O(S.den,d.$denominator()),B.$Rational(l,c)):W(g("Integer"),h)?B.$Rational(G(S.num,O(d,S.den)),S.den):W(g("Float"),h)?G(S.$to_f(),d):S.$__coerced__("-",d)}),$e(q,"$*",function(d){var S=this,h=P,l=P,c=P;return W(g("Rational"),h=d)?(l=O(S.num,d.$numerator()),c=O(S.den,d.$denominator()),B.$Rational(l,c)):W(g("Integer"),h)?B.$Rational(O(S.num,d),S.den):W(g("Float"),h)?O(S.$to_f(),d):S.$__coerced__("*",d)}),$e(q,"$/",function(d){var S=this,h=P,l=P,c=P;return W(g("Rational"),h=d)?(l=O(S.num,d.$denominator()),c=O(S.den,d.$numerator()),B.$Rational(l,c)):W(g("Integer"),h)?E(d,0)?Z(S.$to_f(),0):B.$Rational(S.num,O(S.den,d)):W(g("Float"),h)?Z(S.$to_f(),d):S.$__coerced__("/",d)}),$e(q,"$**",function(d){var S=this,h=P;return W(g("Integer"),h=d)?E(S,0)&&I(re(d,0))?g(g("Float"),"INFINITY"):I(w(d,0))?B.$Rational(S.num["$**"](d),S.den["$**"](d)):I(re(d,0))?B.$Rational(S.den["$**"](d["$-@"]()),S.num["$**"](d["$-@"]())):B.$Rational(1,1):W(g("Float"),h)?S.$to_f()["$**"](d):W(g("Rational"),h)?E(d,0)?B.$Rational(1,1):E(d.$denominator(),1)?I(re(d,0))?B.$Rational(S.den["$**"](d.$numerator().$abs()),S.num["$**"](d.$numerator().$abs())):B.$Rational(S.num["$**"](d.$numerator()),S.den["$**"](d.$numerator())):E(S,0)&&I(re(d,0))?B.$raise(g("ZeroDivisionError"),"divided by 0"):S.$to_f()["$**"](d):S.$__coerced__("**",d)}),$e(q,"$abs",function(){var d=this;return B.$Rational(d.num.$abs(),d.den.$abs())}),$e(q,"$ceil",function(d){var S=this;return d==null&&(d=0),E(d,0)?Z(S.num["$-@"](),S.den)["$-@"]().$ceil():S.$with_precision("ceil",d)},-1),$e(q,"$floor",function(d){var S=this;return d==null&&(d=0),E(d,0)?Z(S.num["$-@"](),S.den)["$-@"]().$floor():S.$with_precision("floor",d)},-1),$e(q,"$hash",function(){var d=this;return[g("Rational"),d.num,d.den].$hash()}),$e(q,"$inspect",function(){var d=this;return"("+d+")"}),$e(q,"$rationalize",function(d){var S=this;if(arguments.length>1&&B.$raise(g("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),d==null)return S;for(var h=d.$abs(),l=G(S,h),c=j(S,h),X=0,b=1,i=1,a=0,$,n,t,r,s;t=l.$ceil(),!A(t,c);)r=t-1,$=r*b+X,n=r*a+i,s=Z(1,G(c,r)),c=Z(1,G(l,r)),l=s,X=b,i=a,b=$,a=n;return B.$Rational(t*b+X,t*a+i)},-1),$e(q,"$round",function(d){var S=this,h=P,l=P,c=P;return d==null&&(d=0),E(d,0)?E(S.num,0)?0:E(S.den,1)?S.num:(h=j(O(S.num.$abs(),2),S.den),l=O(S.den,2),c=Z(h,l).$truncate(),I(re(S.num,0))?c["$-@"]():c):S.$with_precision("round",d)},-1),$e(q,"$to_f",function(){var d=this;return Z(d.num,d.den)}),$e(q,"$to_i",function(){var d=this;return d.$truncate()}),$e(q,"$to_r",M),$e(q,"$to_s",function(){var d=this;return""+d.num+"/"+d.den}),$e(q,"$truncate",function(d){var S=this;return d==null&&(d=0),E(d,0)?I(re(S.num,0))?S.$ceil():S.$floor():S.$with_precision("truncate",d)},-1),$e(q,"$with_precision",function(d,S){var h=this,l=P,c=P;return W(g("Integer"),S)||B.$raise(g("TypeError"),"not an Integer"),l=10["$**"](S),c=O(h,l),I(re(S,1))?Z(c.$send(d),l).$to_i():B.$Rational(c.$send(d),l)}),C(q,"$from_string",function(d){var S=d.trimLeft(),h=/^[+-]?[\d_]+(\.[\d_]+)?/;S.match(h);var l,c;function X(){return h.test(S)}function b(){var i=S.match(h),a=i[0];return S=S.slice(a.length),a.replace(/_/g,"")}return X()?(l=parseFloat(b()),S[0]==="/"?(S=S.slice(1),X()?(c=parseFloat(b()),B.$Rational(l,c)):B.$Rational(l,1)):B.$Rational(l,1)):B.$Rational(0,1)}),H(q,"divide","/"),H(q,"quo","/")}("::",g("Numeric"))};Opal.modules["corelib/time"]=function(e){var x=e.slice,E=e.deny_frozen_access,B=e.klass,I=e.Kernel,re=e.Opal,Z=e.defs,C=e.eqeqeq,W=e.def,v=e.truthy,D=e.rb_gt,$e=e.rb_lt,V=e.send,G=e.rb_plus,O=e.rb_divide,j=e.rb_minus,w=e.range,A=e.neqeq,M=e.rb_le,H=e.eqeq,k=e.alias,P=e.top,g=[],z=e.nil,F=e.$$$;return e.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),P.$require("corelib/comparable"),function(q,y,o){var d=B(q,y,"Time"),S=[d].concat(o),h=e.$r(S);d.$include(F("Comparable"));var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],X=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b=["January","February","March","April","May","June","July","August","September","October","November","December"];Z(d,"$at",function($,n){var t;return F("Time")["$==="]($)?(n!==void 0&&I.$raise(F("TypeError"),"can't convert Time into an exact number"),t=new Date($.getTime()),t.timezone=$.timezone,t):($.$$is_number||($=re["$coerce_to!"]($,F("Integer"),"to_int")),n===void 0?new Date($*1e3):(n.$$is_number||(n=re["$coerce_to!"](n,F("Integer"),"to_int")),new Date($*1e3+n/1e3)))},-2);function i(a,$,n,t,r,s){if(a.$$is_string?a=parseInt(a,10):a=re["$coerce_to!"](a,F("Integer"),"to_int"),$===z)$=1;else if(!$.$$is_number)if($["$respond_to?"]("to_str"))switch($=$.$to_str(),$.toLowerCase()){case"jan":$=1;break;case"feb":$=2;break;case"mar":$=3;break;case"apr":$=4;break;case"may":$=5;break;case"jun":$=6;break;case"jul":$=7;break;case"aug":$=8;break;case"sep":$=9;break;case"oct":$=10;break;case"nov":$=11;break;case"dec":$=12;break;default:$=$.$to_i()}else $=re["$coerce_to!"]($,F("Integer"),"to_int");return($<1||$>12)&&I.$raise(F("ArgumentError"),"month out of range: "+$),$=$-1,n===z?n=1:n.$$is_string?n=parseInt(n,10):n=re["$coerce_to!"](n,F("Integer"),"to_int"),(n<1||n>31)&&I.$raise(F("ArgumentError"),"day out of range: "+n),t===z?t=0:t.$$is_string?t=parseInt(t,10):t=re["$coerce_to!"](t,F("Integer"),"to_int"),(t<0||t>24)&&I.$raise(F("ArgumentError"),"hour out of range: "+t),r===z?r=0:r.$$is_string?r=parseInt(r,10):r=re["$coerce_to!"](r,F("Integer"),"to_int"),(r<0||r>59)&&I.$raise(F("ArgumentError"),"min out of range: "+r),s===z?s=0:s.$$is_number||(s.$$is_string?s=parseInt(s,10):s=re["$coerce_to!"](s,F("Integer"),"to_int")),(s<0||s>60)&&I.$raise(F("ArgumentError"),"sec out of range: "+s),[a,$,n,t,r,s]}return Z(d,"$new",function($,n,t,r,s,u,f){var p=this;n==null&&(n=z),t==null&&(t=z),r==null&&(r=z),s==null&&(s=z),u==null&&(u=z),f==null&&(f=z);var R,L,T,J;return $===void 0?new Date:(R=i($,n,t,r,s,u),$=R[0],n=R[1],t=R[2],r=R[3],s=R[4],u=R[5],f===z?(L=new Date($,n,t,r,s,0,u*1e3),$<100&&L.setFullYear($),L):(T=p.$_parse_offset(f),J=new Date(Date.UTC($,n,t,r,s,0,u*1e3)),$<100&&J.setUTCFullYear($),L=new Date(J.getTime()-T*36e5),L.timezone=T,L))},-1),Z(d,"$_parse_offset",function($){var n;if($.$$is_string)if($=="UTC")n=0;else if(/^[+-]\d\d:[0-5]\d$/.test($)){var t,r,s;t=$[0],r=+($[1]+$[2]),s=+($[4]+$[5]),n=(t=="-"?-1:1)*(r+s/60)}else I.$raise(F("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+$);else $.$$is_number?n=$/3600:I.$raise(F("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return n}),Z(d,"$local",function($,n,t,r,s,u,f,p,R,L){n==null&&(n=z),t==null&&(t=z),r==null&&(r=z),s==null&&(s=z),u==null&&(u=z),f==null&&(f=z),p==null&&(p=z),R==null&&(R=z),L==null&&(L=z);var T,J;return arguments.length===10&&(T=x(arguments),$=T[5],n=T[4],t=T[3],r=T[2],s=T[1],u=T[0]),T=i($,n,t,r,s,u),$=T[0],n=T[1],t=T[2],r=T[3],s=T[4],u=T[5],J=new Date($,n,t,r,s,0,u*1e3),$<100&&J.setFullYear($),J},-2),Z(d,"$gm",function($,n,t,r,s,u,f,p,R,L){n==null&&(n=z),t==null&&(t=z),r==null&&(r=z),s==null&&(s=z),u==null&&(u=z),f==null&&(f=z),p==null&&(p=z),R==null&&(R=z),L==null&&(L=z);var T,J;return arguments.length===10&&(T=x(arguments),$=T[5],n=T[4],t=T[3],r=T[2],s=T[1],u=T[0]),T=i($,n,t,r,s,u),$=T[0],n=T[1],t=T[2],r=T[3],s=T[4],u=T[5],J=new Date(Date.UTC($,n,t,r,s,0,u*1e3)),$<100&&J.setUTCFullYear($),J.timezone=0,J},-2),Z(d,"$now",function(){var $=this;return $.$new()}),W(d,"$+",function($){var n=this;C(F("Time"),$)&&I.$raise(F("TypeError"),"time + time?"),$.$$is_number||($=re["$coerce_to!"]($,F("Integer"),"to_int"));var t=new Date(n.getTime()+$*1e3);return t.timezone=n.timezone,t}),W(d,"$-",function($){var n=this;if(C(F("Time"),$))return(n.getTime()-$.getTime())/1e3;$.$$is_number||($=re["$coerce_to!"]($,F("Integer"),"to_int"));var t=new Date(n.getTime()-$*1e3);return t.timezone=n.timezone,t}),W(d,"$<=>",function($){var n=this,t=z;return C(F("Time"),$)?n.$to_f()["$<=>"]($.$to_f()):(t=$["$<=>"](n),v(t["$nil?"]())?z:v(D(t,0))?-1:v($e(t,0))?1:0)}),W(d,"$==",function($){var n=this,t=z;return v(t=F("Time")["$==="]($))?n.$to_f()===$.$to_f():t}),W(d,"$asctime",function(){var $=this;return $.$strftime("%a %b %e %H:%M:%S %Y")}),V([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function a($,n,t,r){var s=a.$$s==null?this:a.$$s;return $==null&&($=z),n==null&&(n=z),t==null&&(t=z),r==null&&(r=0),V(s,"define_method",[$],function u(){var f=u.$$s==null?this:u.$$s;return r+(f.timezone!=null?new Date(f.getTime()+f.timezone*36e5)[t]():f[n]())},{$$s:s})},{$$arity:-4,$$s:d}),W(d,"$yday",function(){var $=this,n=z,t=z,r=z;return n=h("Time").$new($.$year()).$to_i(),t=h("Time").$new($.$year(),$.$month(),$.$day()).$to_i(),r=86400,G(O(j(t,n),r).$round(),1)}),W(d,"$isdst",function(){var $=this,n=new Date($.getFullYear(),0,1),t=new Date($.getFullYear(),6,1);return $.getTimezoneOffset()<Math.max(n.getTimezoneOffset(),t.getTimezoneOffset())}),W(d,"$dup",function(){var $=this,n=z;return n=new Date($.getTime()),n.$copy_instance_variables($),n.$initialize_dup($),n}),W(d,"$eql?",function($){var n=this,t=z;return v(t=$["$is_a?"](F("Time")))?n["$<=>"]($)["$zero?"]():t}),V([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function a($,n){var t=a.$$s==null?this:a.$$s;return $==null&&($=z),n==null&&(n=z),V(t,"define_method",[$],function r(){var s=r.$$s==null?this:r.$$s;return s.$wday()===n},{$$s:t})},{$$s:d}),W(d,"$hash",function(){var $=this;return[F("Time"),$.getTime()].$hash()}),W(d,"$inspect",function(){var $=this;return v($["$utc?"]())?$.$strftime("%Y-%m-%d %H:%M:%S UTC"):$.$strftime("%Y-%m-%d %H:%M:%S %z")}),W(d,"$succ",function(){var $=this,n=new Date($.getTime()+1e3);return n.timezone=$.timezone,n}),W(d,"$usec",function(){var $=this;return $.getMilliseconds()*1e3}),W(d,"$zone",function(){var $=this;if($.timezone===0)return"UTC";if($.timezone!=null)return z;var n=$.toString(),t;return n.indexOf("(")==-1?t=n.match(/[A-Z]{3,4}/)[0]:t=n.match(/\((.+)\)(?:\s|$)/)[1],t=="GMT"&&/(GMT\W*\d{4})/.test(n)?RegExp.$1:t}),W(d,"$getgm",function(){var $=this,n=new Date($.getTime());return n.timezone=0,n}),W(d,"$gmtime",function(){var $=this;return $.timezone!==0&&(E($),$.timezone=0),$}),W(d,"$gmt?",function(){var $=this;return $.timezone===0}),W(d,"$gmt_offset",function(){var $=this;return $.timezone!=null?$.timezone*60:-$.getTimezoneOffset()*60}),W(d,"$strftime",function($){var n=this;return $.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(t,r,s,u,f){var p="",R,L,T,J=r.indexOf("0")!==-1,ee=r.indexOf("-")===-1,ae=r.indexOf("_")!==-1,le=r.indexOf("^")!==-1,_e=r.indexOf("#")!==-1,de=(r.match(":")||[]).length;switch(s=parseInt(s,10),J&&ae&&(r.indexOf("0")<r.indexOf("_")?J=!1:ae=!1),f){case"Y":p+=n.$year();break;case"C":J=!ae,p+=Math.round(n.$year()/100);break;case"y":J=!ae,p+=n.$year()%100;break;case"m":J=!ae,p+=n.$mon();break;case"B":p+=b[n.$mon()-1];break;case"b":case"h":ae=!J,p+=X[n.$mon()-1];break;case"d":J=!ae,p+=n.$day();break;case"e":ae=!J,p+=n.$day();break;case"j":J=!ae,s=isNaN(s)?3:s,p+=n.$yday();break;case"H":J=!ae,p+=n.$hour();break;case"k":ae=!J,p+=n.$hour();break;case"I":J=!ae,p+=n.$hour()%12||12;break;case"l":ae=!J,p+=n.$hour()%12||12;break;case"P":p+=n.$hour()>=12?"pm":"am";break;case"p":p+=n.$hour()>=12?"PM":"AM";break;case"M":J=!ae,p+=n.$min();break;case"S":J=!ae,p+=n.$sec();break;case"L":J=!ae,s=isNaN(s)?3:s,p+=n.getMilliseconds();break;case"N":s=isNaN(s)?9:s,p+=n.getMilliseconds().toString().$rjust(3,"0"),p=p.$ljust(s,"0");break;case"z":var ge=n.timezone==null?n.getTimezoneOffset():-n.timezone*60,ve=Math.floor(Math.abs(ge)/60),me=Math.abs(ge)%60;p+=ge<0?"+":"-",p+=ve<10?"0":"",p+=ve,de>0&&(p+=":"),p+=me<10?"0":"",p+=me,de>1&&(p+=":00");break;case"Z":p+=n.$zone();break;case"A":p+=l[n.$wday()];break;case"a":p+=c[n.$wday()];break;case"u":p+=n.$wday()+1;break;case"w":p+=n.$wday();break;case"V":p+=n.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":p+=n.$cweek_cyear()["$[]"](1);break;case"g":p+=n.$cweek_cyear()["$[]"](1)["$[]"](w(-2,-1,!1));break;case"s":p+=n.$to_i();break;case"n":p+=`
`;break;case"t":p+="	";break;case"%":p+="%";break;case"c":p+=n.$strftime("%a %b %e %T %Y");break;case"D":case"x":p+=n.$strftime("%m/%d/%y");break;case"F":p+=n.$strftime("%Y-%m-%d");break;case"v":p+=n.$strftime("%e-%^b-%4Y");break;case"r":p+=n.$strftime("%I:%M:%S %p");break;case"R":p+=n.$strftime("%H:%M");break;case"T":case"X":p+=n.$strftime("%H:%M:%S");break;case"J":if(R=n.$to_date().$jd(),R<2405160){p+=n.$strftime("%Y-%m-%d");break}else R<2419614?(L="M",T=1867):R<2424875?(L="T",T=1911):R<2447535?(L="S",T=1925):R<2458605?(L="H",T=1988):(L="R",T=2018);p+=n.$format("%c%02d",L,j(n.$year(),T)),p+=n.$strftime("-%m-%d");break;default:return t}return le&&(p=p.toUpperCase()),_e&&(p=p.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),ee&&(J||ae)&&(p=p.$rjust(isNaN(s)?2:s,ae?" ":"0")),p})}),W(d,"$to_a",function(){var $=this;return[$.$sec(),$.$min(),$.$hour(),$.$day(),$.$month(),$.$year(),$.$wday(),$.$yday(),$.$isdst(),$.$zone()]}),W(d,"$to_f",function(){var $=this;return $.getTime()/1e3}),W(d,"$to_i",function(){var $=this;return parseInt($.getTime()/1e3,10)}),W(d,"$cweek_cyear",function(){var $=this,n=z,t=z,r=z,s=z,u=z,f=z,p=z;return n=F("Time").$new($.$year(),1,1),t=n.$wday(),r=$.$year(),v(M(t,4))&&A(t,0)?s=j(t,1):(s=j(j(t,7),1),H(s,-8)&&(s=-1)),u=O(G($.$yday(),s),7).$ceil(),v(M(u,0))?F("Time").$new(j($.$year(),1),12,31).$cweek_cyear():(H(u,53)&&(f=F("Time").$new($.$year(),12,31),p=f.$wday(),v(M(p,3))&&A(p,0)&&(u=1,r=G(r,1))),[u,r])}),function(a,$){return k(a,"mktime","local"),k(a,"utc","gm")}(e.get_singleton_class(d)),k(d,"ctime","asctime"),k(d,"dst?","isdst"),k(d,"getutc","getgm"),k(d,"gmtoff","gmt_offset"),k(d,"mday","day"),k(d,"month","mon"),k(d,"to_s","inspect"),k(d,"tv_sec","to_i"),k(d,"tv_usec","usec"),k(d,"utc","gmtime"),k(d,"utc?","gmt?"),k(d,"utc_offset","gmt_offset")}("::",Date,g)};Opal.modules["corelib/struct"]=function(e){var x=e.klass,E=e.slice,B=e.extract_kwargs,I=e.ensure_kwargs,re=e.hash_get,Z=e.truthy,C=e.neqeq,W=e.eqeq,v=e.Opal,D=e.send,$e=e.Class,V=e.to_a,G=e.def,O=e.defs,j=e.Kernel,w=e.rb_gt,A=e.rb_minus,M=e.eqeqeq,H=e.rb_lt,k=e.rb_ge,P=e.rb_plus,g=e.alias,z=e.top,F=[],q=e.nil,y=e.$$$;return e.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),z.$require("corelib/enumerable"),function(o,d,S){var h=x(o,d,"Struct"),l=[h].concat(S),c=e.$r(l);h.$include(y("Enumerable")),O(h,"$new",function b(i,a,$){var n=b.$$p||q,t,r,s,u,f=this,p=q;if(b.$$p=null,t=E(arguments,1),r=B(t),r=I(r),s=t,u=re(r,"keyword_init"),u==null&&(u=!1),Z(i))if(W(i.$class(),y("String"))&&C(i["$[]"](0).$upcase(),i["$[]"](0)))s.$unshift(i),i=q;else try{i=v["$const_name!"](i)}catch(R){if(e.rescue(R,[y("TypeError"),y("NameError")]))try{s.$unshift(i),i=q}finally{e.pop_exception(R)}else throw R}return D(s,"map",[],function(L){return L==null&&(L=q),v["$coerce_to!"](L,y("String"),"to_str")}),p=D($e,"new",[f],function R(){var L=R.$$s==null?this:R.$$s;return D(s,"each",[],function T(J){var ee=T.$$s==null?this:T.$$s;return J==null&&(J=q),ee.$define_struct_attribute(J)},{$$s:L}),function(T,J){return G(T,"$new",function(ae){var le,_e,de=this,ge=q;return le=E(arguments),_e=le,ge=de.$allocate(),ge.$$data={},D(ge,"initialize",V(_e)),ge},-1),T.$alias_method("[]","new")}(e.get_singleton_class(L))},{$$s:f}),Z(n)&&D(p,"module_eval",[],n.$to_proc()),p.$$keyword_init=u,Z(i)&&y("Struct").$const_set(i,p),p},-2),O(h,"$define_struct_attribute",function(i){var a=this;return W(a,y("Struct"))&&j.$raise(y("ArgumentError"),"you cannot define attributes to the Struct class"),a.$members()["$<<"](i),D(a,"define_method",[i],function $(){var n=$.$$s==null?this:$.$$s;return n.$$data[i]},{$$s:a}),D(a,"define_method",[""+i+"="],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=q),t.$$data[i]=n},{$$s:a})}),O(h,"$members",function(){var i=this,a=q;return i.members==null&&(i.members=q),W(i,y("Struct"))&&j.$raise(y("ArgumentError"),"the Struct class has no members"),i.members=Z(a=i.members)?a:[]}),O(h,"$inherited",function(i){var a=this,$=q;return a.members==null&&(a.members=q),$=a.members,D(i,"instance_eval",[],function n(){var t=n.$$s==null?this:n.$$s;return t.members=$},{$$s:a})}),G(h,"$initialize",function(i){var a,$,n=this,t=q,r=q,s=q;return a=E(arguments),$=a,Z(n.$class().$$keyword_init)?(t=Z(r=$.$last())?r:new Map,(Z(w($.$length(),1))||Z($.length===1&&!t.$$is_hash))&&j.$raise(y("ArgumentError"),"wrong number of arguments (given "+$.$length()+", expected 0)"),s=A(t.$keys(),n.$class().$members()),Z(s["$any?"]())&&j.$raise(y("ArgumentError"),"unknown keywords: "+s.$join(", ")),D(n.$class().$members(),"each",[],function u(f){var p,R=u.$$s==null?this:u.$$s;return f==null&&(f=q),p=[f,t["$[]"](f)],D(R,"[]=",p),p[p.length-1]},{$$s:n})):(Z(w($.$length(),n.$class().$members().$length()))&&j.$raise(y("ArgumentError"),"struct size differs"),D(n.$class().$members(),"each_with_index",[],function u(f,p){var R,L=u.$$s==null?this:u.$$s;return f==null&&(f=q),p==null&&(p=q),R=[f,$["$[]"](p)],D(L,"[]=",R),R[R.length-1]},{$$s:n}))},-1),G(h,"$initialize_copy",function(i){var a=this;a.$$data={};var $=Object.keys(i.$$data),n,t,r;for(n=0,t=$.length;n<t;n++)r=$[n],a.$$data[r]=i.$$data[r]}),O(h,"$keyword_init?",function(){var i=this;return i.$$keyword_init}),G(h,"$members",function(){var i=this;return i.$class().$members()}),G(h,"$hash",function(){var i=this;return[i.$class(),i.$to_a()].$hash()}),G(h,"$[]",function(i){var a=this;return M(y("Integer"),i)?(Z(H(i,a.$class().$members().$size()["$-@"]()))&&j.$raise(y("IndexError"),"offset "+i+" too small for struct(size:"+a.$class().$members().$size()+")"),Z(k(i,a.$class().$members().$size()))&&j.$raise(y("IndexError"),"offset "+i+" too large for struct(size:"+a.$class().$members().$size()+")"),i=a.$class().$members()["$[]"](i)):M(y("String"),i)?a.$$data.hasOwnProperty(i)||j.$raise(y("NameError").$new("no member '"+i+"' in struct",i)):j.$raise(y("TypeError"),"no implicit conversion of "+i.$class()+" into Integer"),i=v["$coerce_to!"](i,y("String"),"to_str"),a.$$data[i]}),G(h,"$[]=",function(i,a){var $=this;return M(y("Integer"),i)?(Z(H(i,$.$class().$members().$size()["$-@"]()))&&j.$raise(y("IndexError"),"offset "+i+" too small for struct(size:"+$.$class().$members().$size()+")"),Z(k(i,$.$class().$members().$size()))&&j.$raise(y("IndexError"),"offset "+i+" too large for struct(size:"+$.$class().$members().$size()+")"),i=$.$class().$members()["$[]"](i)):M(y("String"),i)?Z($.$class().$members()["$include?"](i.$to_sym()))||j.$raise(y("NameError").$new("no member '"+i+"' in struct",i)):j.$raise(y("TypeError"),"no implicit conversion of "+i.$class()+" into Integer"),i=v["$coerce_to!"](i,y("String"),"to_str"),$.$$data[i]=a}),G(h,"$==",function(i){var a=this;if(!Z(i["$instance_of?"](a.$class())))return!1;var $={},n={};function t(r,s){var u,f,p;$[r.$__id__()]=!0,n[s.$__id__()]=!0;for(u in r.$$data)if(f=r.$$data[u],p=s.$$data[u],y("Struct")["$==="](f)){if((!$.hasOwnProperty(f.$__id__())||!n.hasOwnProperty(p.$__id__()))&&!t(f,p))return!1}else if(!f["$=="](p))return!1;return!0}return t(a,i)}),G(h,"$eql?",function(i){var a=this;if(!Z(i["$instance_of?"](a.$class())))return!1;var $={},n={};function t(r,s){var u,f,p;$[r.$__id__()]=!0,n[s.$__id__()]=!0;for(u in r.$$data)if(f=r.$$data[u],p=s.$$data[u],y("Struct")["$==="](f)){if((!$.hasOwnProperty(f.$__id__())||!n.hasOwnProperty(p.$__id__()))&&!t(f,p))return!1}else if(!f["$eql?"](p))return!1;return!0}return t(a,i)}),G(h,"$each",function b(){var i=b.$$p||q,a=this;return b.$$p=null,i===q?D(a,"enum_for",["each"],function $(){var n=$.$$s==null?this:$.$$s;return n.$size()},{$$s:a}):(D(a.$class().$members(),"each",[],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=q),e.yield1(i,t["$[]"](n))},{$$s:a}),a)}),G(h,"$each_pair",function b(){var i=b.$$p||q,a=this;return b.$$p=null,i===q?D(a,"enum_for",["each_pair"],function $(){var n=$.$$s==null?this:$.$$s;return n.$size()},{$$s:a}):(D(a.$class().$members(),"each",[],function $(n){var t=$.$$s==null?this:$.$$s;return n==null&&(n=q),e.yield1(i,[n,t["$[]"](n)])},{$$s:a}),a)}),G(h,"$length",function(){var i=this;return i.$class().$members().$length()}),G(h,"$to_a",function(){var i=this;return D(i.$class().$members(),"map",[],function a($){var n=a.$$s==null?this:a.$$s;return $==null&&($=q),n["$[]"]($)},{$$s:i})});var X=[];return G(h,"$inspect",function(){var i=this,a=q,$=q;return function(){try{return a="#<struct ",Z(X["$include?"](i.$__id__()))?P(a,":...>"):(X["$<<"](i.$__id__()),$=!0,M(y("Struct"),i)&&Z(i.$class().$name())&&(a=P(a,""+i.$class()+" ")),a=P(a,D(i.$each_pair(),"map",[],function(t,r){return t==null&&(t=q),r==null&&(r=q),""+t+"="+c("Opal").$inspect(r)}).$join(", ")),a=P(a,">"),a)}finally{Z($)&&X.pop()}}()}),G(h,"$to_h",function b(i){var a=b.$$p||q,$,n,t=this;return b.$$p=null,$=E(arguments),n=$,a!==q?D(D(t,"map",[],a.$to_proc()),"to_h",V(n)):D(t.$class().$members(),"each_with_object",[new Map],function r(s,u){var f,p=r.$$s==null?this:r.$$s;return s==null&&(s=q),u==null&&(u=q),f=[s,p["$[]"](s)],D(u,"[]=",f),f[f.length-1]},{$$s:t})},-1),G(h,"$values_at",function(i){var a,$,n=this;a=E(arguments),$=a,$=D($,"map",[],function(f){return f==null&&(f=q),f.$$is_range?f.$to_a():f}).$flatten();for(var t=[],r=0,s=$.length;r<s;r++)$[r].$$is_number||j.$raise(y("TypeError"),"no implicit conversion of "+$[r].$class()+" into Integer"),t.push(n["$[]"]($[r]));return t},-1),G(h,"$dig",function(i,a){var $,n,t=this,r=q;return $=E(arguments,1),n=$,r=Z(i.$$is_string&&t.$$data.hasOwnProperty(i))&&t.$$data[i]||q,r===q||n.length===0?r:(Z(r["$respond_to?"]("dig"))||j.$raise(y("TypeError"),""+r.$class()+" does not have #dig method"),D(r,"dig",V(n)))},-2),g(h,"size","length"),g(h,"to_s","inspect"),g(h,"values","to_a")}("::",null,F)};Opal.modules["corelib/set"]=function(e){var x=e.freeze,E=e.klass,B=e.slice,I=e.defs,re=e.truthy,Z=e.eqeqeq,C=e.Kernel,W=e.send,v=e.def,D=e.eqeq,$e=e.rb_lt,V=e.rb_le,G=e.alias,O=[],j=e.nil,w=e.$$$;return e.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(A,M,H){var k=E(A,M,"Set"),P=[k].concat(H),g=e.$r(P),z=j,F=k.$$prototype;F.hash=j,k.$include(w("Enumerable")),I(k,"$[]",function(o){var d,S,h=this;return d=B(arguments),S=d,h.$new(S)},-1),v(k,"$initialize",function y(o){var d=y.$$p||j,S=this;return y.$$p=null,o==null&&(o=j),S.hash=new Map,re(o["$nil?"]())?j:(Z(w("Enumerable"),o)||C.$raise(w("ArgumentError"),"value must be enumerable"),re(d)?W(o,"each",[],function h(l){var c=h.$$s==null?this:h.$$s;return l==null&&(l=j),c.$add(e.yield1(d,l))},{$$s:S}):S.$merge(o))},-1),v(k,"$dup",function(){var o=this,d=j;return d=o.$class().$new(),d.$merge(o)}),v(k,"$-",function(o){var d=this;return re(o["$respond_to?"]("each"))||C.$raise(w("ArgumentError"),"value must be enumerable"),d.$dup().$subtract(o)}),v(k,"$inspect",function(){var o=this;return"#<Set: {"+o.$to_a().$join(",")+"}>"}),v(k,"$==",function(o){var d=this;return re(d["$equal?"](o))?!0:re(o["$instance_of?"](d.$class()))?d.hash["$=="](o.$instance_variable_get("@hash")):re(o["$is_a?"](w("Set")))&&D(d.$size(),o.$size())?W(o,"all?",[],function S(h){var l=S.$$s==null?this:S.$$s;return l.hash==null&&(l.hash=j),h==null&&(h=j),l.hash["$include?"](h)},{$$s:d}):!1}),v(k,"$add",function(o){var d=this;return d.hash["$[]="](o,!0),d}),v(k,"$classify",function y(){var o=y.$$p||j,d=this,S=j;return y.$$p=null,o===j?d.$enum_for("classify"):(S=W(w("Hash"),"new",[],function h(l,c){var X,b=h.$$s==null?this:h.$$s;return l==null&&(l=j),c==null&&(c=j),X=[c,b.$class().$new()],W(l,"[]=",X),X[X.length-1]},{$$s:d}),W(d,"each",[],function(l){return l==null&&(l=j),S["$[]"](e.yield1(o,l)).$add(l)}),S)}),v(k,"$collect!",function y(){var o=y.$$p||j,d=this,S=j;return y.$$p=null,o===j?d.$enum_for("collect!"):(S=d.$class().$new(),W(d,"each",[],function(l){return l==null&&(l=j),S["$<<"](e.yield1(o,l))}),d.$replace(S))}),v(k,"$compare_by_identity",function(){var o=this;return re(o.hash["$respond_to?"]("compare_by_identity"))?(o.hash.$compare_by_identity(),o):o.$raise(g("NotImplementedError"),""+o.$class().$name()+"#compare_by_identity is not implemented")}),v(k,"$compare_by_identity?",function(){var o=this,d=j;return re(d=o.hash["$respond_to?"]("compare_by_identity?"))?o.hash["$compare_by_identity?"]():d}),v(k,"$delete",function(o){var d=this;return d.hash.$delete(o),d}),v(k,"$delete?",function(o){var d=this;return re(d["$include?"](o))?(d.$delete(o),d):j}),v(k,"$delete_if",function y(){var o=y.$$p||j,d=this;return y.$$p=null,o===j?d.$enum_for("delete_if"):(W(W(d,"select",[],function(h){return h==null&&(h=j),e.yield1(o,h)}),"each",[],function S(h){var l=S.$$s==null?this:S.$$s;return l.hash==null&&(l.hash=j),h==null&&(h=j),l.hash.$delete(h)},{$$s:d}),d)}),v(k,"$freeze",function(){var o=this;return re(o["$frozen?"]())?o:(o.hash.$freeze(),x(o))}),v(k,"$keep_if",function y(){var o=y.$$p||j,d=this;return y.$$p=null,o===j?d.$enum_for("keep_if"):(W(W(d,"reject",[],function(h){return h==null&&(h=j),e.yield1(o,h)}),"each",[],function S(h){var l=S.$$s==null?this:S.$$s;return l.hash==null&&(l.hash=j),h==null&&(h=j),l.hash.$delete(h)},{$$s:d}),d)}),v(k,"$reject!",function y(){var o=y.$$p||j,d=this,S=j;return y.$$p=null,o===j?d.$enum_for("reject!"):(S=d.$size(),W(d,"delete_if",[],o.$to_proc()),D(d.$size(),S)?j:d)}),v(k,"$select!",function y(){var o=y.$$p||j,d=this,S=j;return y.$$p=null,o===j?d.$enum_for("select!"):(S=d.$size(),W(d,"keep_if",[],o.$to_proc()),D(d.$size(),S)?j:d)}),v(k,"$add?",function(o){var d=this;return re(d["$include?"](o))?j:d.$add(o)}),v(k,"$each",function y(){var o=y.$$p||j,d=this;return y.$$p=null,o===j?d.$enum_for("each"):(W(d.hash,"each_key",[],o.$to_proc()),d)}),v(k,"$empty?",function(){var o=this;return o.hash["$empty?"]()}),v(k,"$eql?",function(o){var d=this;return d.hash["$eql?"](W(o,"instance_eval",[],function S(){var h=S.$$s==null?this:S.$$s;return h.hash==null&&(h.hash=j),h.hash},{$$s:d}))}),v(k,"$clear",function(){var o=this;return o.hash.$clear(),o}),v(k,"$include?",function(o){var d=this;return d.hash["$include?"](o)}),v(k,"$merge",function(o){var d=this;return W(o,"each",[],function S(h){var l=S.$$s==null?this:S.$$s;return h==null&&(h=j),l.$add(h)},{$$s:d}),d}),v(k,"$replace",function(o){var d=this;return d.$clear(),d.$merge(o),d}),v(k,"$size",function(){var o=this;return o.hash.$size()}),v(k,"$subtract",function(o){var d=this;return W(o,"each",[],function S(h){var l=S.$$s==null?this:S.$$s;return h==null&&(h=j),l.$delete(h)},{$$s:d}),d}),v(k,"$|",function(o){var d=this;return re(o["$respond_to?"]("each"))||C.$raise(w("ArgumentError"),"value must be enumerable"),d.$dup().$merge(o)});function q(y){re(z=y["$is_a?"](w("Set")))||C.$raise(w("ArgumentError"),"value must be a set")}return v(k,"$superset?",function(o){var d=this;return q(o),re($e(d.$size(),o.$size()))?!1:W(o,"all?",[],function S(h){var l=S.$$s==null?this:S.$$s;return h==null&&(h=j),l["$include?"](h)},{$$s:d})}),v(k,"$proper_superset?",function(o){var d=this;return q(o),re(V(d.$size(),o.$size()))?!1:W(o,"all?",[],function S(h){var l=S.$$s==null?this:S.$$s;return h==null&&(h=j),l["$include?"](h)},{$$s:d})}),v(k,"$subset?",function(o){var d=this;return q(o),re($e(o.$size(),d.$size()))?!1:W(d,"all?",[],function(h){return h==null&&(h=j),o["$include?"](h)})}),v(k,"$proper_subset?",function(o){var d=this;return q(o),re(V(o.$size(),d.$size()))?!1:W(d,"all?",[],function(h){return h==null&&(h=j),o["$include?"](h)})}),v(k,"$intersect?",function(o){var d=this;return q(o),re($e(d.$size(),o.$size()))?W(d,"any?",[],function(h){return h==null&&(h=j),o["$include?"](h)}):W(o,"any?",[],function S(h){var l=S.$$s==null?this:S.$$s;return h==null&&(h=j),l["$include?"](h)},{$$s:d})}),v(k,"$disjoint?",function(o){var d=this;return d["$intersect?"](o)["$!"]()}),v(k,"$to_a",function(){var o=this;return o.hash.$keys()}),G(k,"+","|"),G(k,"<","proper_subset?"),G(k,"<<","add"),G(k,"<=","subset?"),G(k,">","proper_superset?"),G(k,">=","superset?"),G(k,"difference","-"),G(k,"filter!","select!"),G(k,"length","size"),G(k,"map!","collect!"),G(k,"member?","include?"),G(k,"union","|")}("::",null,O)};Opal.modules["corelib/dir"]=function(e){var x=e.klass,E=e.def,B=e.truthy,I=e.alias,re=e.nil,Z=e.$$$;return e.add_stubs("[],pwd"),function(C,W,v){var D=x(C,W,"Dir");return function($e,V){return E($e,"$chdir",function G(O){var j=G.$$p||re,w=re;return G.$$p=null,function(){try{return w=e.current_dir,e.current_dir=O,e.yieldX(j,[])}finally{e.current_dir=w}}()}),E($e,"$pwd",function(){return e.current_dir||"."}),E($e,"$home",function(){var O=re;return B(O=Z("ENV")["$[]"]("HOME"))?O:"."}),I($e,"getwd","pwd")}(e.get_singleton_class(D))}("::",null)};Opal.modules["corelib/file"]=function(e){var x=e.truthy,E=e.klass,B=e.const_set,I=e.Opal,re=e.regexp,Z=e.rb_plus,C=e.def,W=e.Kernel,v=e.eqeq,D=e.rb_lt,$e=e.rb_minus,V=e.range,G=e.send,O=e.slice,j=e.alias,w=[],A=e.nil,M=e.$$$;return e.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(H,k,P){var g=E(H,k,"File"),z=[g].concat(P),F=A;return B(z[0],"Separator",B(z[0],"SEPARATOR","/")),B(z[0],"ALT_SEPARATOR",A),B(z[0],"PATH_SEPARATOR",":"),B(z[0],"FNM_SYSCASE",0),F=/^[a-zA-Z]:(?:\\|\/)/,function(q,y){var o=[q].concat(y),d=e.$r(o);C(q,"$absolute_path",function(c,X){var b=A,i=A,a=A,$=A,n=A,t=A,r=A,s=A,u=A,f=A;X==null&&(X=A),b=d("SEPARATOR"),i=h(),a=[],c=x(c["$respond_to?"]("to_path"))?c.$to_path():c,c=I["$coerce_to!"](c,M("String"),"to_str"),X=x($=X)?$:M("Dir").$pwd(),n=c.substr(0,b.length)===b||F.test(c),t=X.substr(0,b.length)===b||F.test(X),x(n)?(r=c.$split(re(["[",i,"]"])),s=F.test(c)?"":c.$sub(re(["^([",i,"]+).*$"]),"\\1"),u=!0):(r=Z(X.$split(re(["[",i,"]"])),c.$split(re(["[",i,"]"]))),s=F.test(X)?"":X.$sub(re(["^([",i,"]+).*$"]),"\\1"),u=t);for(var p,R=0,L=r.length;R<L;R++)p=r[R],!(p===A||p===""&&(a.length===0||u)||p==="."&&(a.length===0||u))&&(p===".."?a.pop():a.push(p));return!u&&r[0]!=="."&&a.$unshift("."),f=a.$join(b),x(u)&&(f=Z(s,f)),f},-2),C(q,"$expand_path",function(c,X){var b=this,i=A,a=A,$=A,n=A,t=A;return X==null&&(X=A),i=d("SEPARATOR"),a=h(),x(c[0]==="~"||X&&X[0]==="~")&&($=d("Dir").$home(),x($)||W.$raise(M("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),n=F.test($)?"":$.$sub(re(["^([",a,"]+).*$"]),"\\1"),x($["$start_with?"](n))||W.$raise(M("ArgumentError"),"non-absolute home"),$=Z($,i),t=re(["^\\~(?:",i,"|$)"]),c=c.$sub(t,$),x(X)&&(X=X.$sub(t,$))),b.$absolute_path(c,X)},-2);function S(l){return x(l["$respond_to?"]("to_path"))&&(l=l.$to_path()),l=I["$coerce_to!"](l,M("String"),"to_str"),l}function h(){return d("ALT_SEPARATOR")===A?e.escape_regexp(d("SEPARATOR")):e.escape_regexp(Z(d("SEPARATOR"),d("ALT_SEPARATOR")))}return C(q,"$dirname",function(c,X){var b=this,i=A;if(X==null&&(X=1),v(X,0))return c;x(D(X,0))&&W.$raise(M("ArgumentError"),"level can't be negative"),i=h(),c=S(c);var a=c.match(new RegExp("^["+i+"]")),$;return c=c.replace(new RegExp("["+i+"]+$"),""),c=c.replace(new RegExp("[^"+i+"]+$"),""),c=c.replace(new RegExp("["+i+"]+$"),""),c===""?$=a?"/":".":$=c,X==1?$:b.$dirname($,$e(X,1))},-2),C(q,"$basename",function(c,X){var b=A;return X==null&&(X=A),b=h(),c=S(c),c.length==0||(X!==A?X=I["$coerce_to!"](X,M("String"),"to_str"):X=null,c=c.replace(new RegExp("(.)["+b+"]*$"),"$1"),c=c.replace(new RegExp("^(?:.*["+b+"])?([^"+b+"]+)$"),"$1"),X===".*"?c=c.replace(/\.[^\.]+$/,""):X!==null&&(X=e.escape_regexp(X),c=c.replace(new RegExp(""+X+"$"),""))),c},-2),C(q,"$extname",function(c){var X=this,b=A,i=A;return c=S(c),b=X.$basename(c),x(b["$empty?"]())||(i=b["$[]"](V(1,-1,!1)).$rindex("."),x(i["$nil?"]())||v(Z(i,1),$e(b.$length(),1)))?"":b["$[]"](e.Range.$new(Z(i,1),-1,!1))}),C(q,"$exist?",function(c){return e.modules[c]!=null}),C(q,"$directory?",function(c){var X=A;X=[];for(var b in e.modules)X.push(b);return c=c.$gsub(re(["(^.",d("SEPARATOR"),"+|",d("SEPARATOR"),"+$)"])),G(X,"find",[],function(a){return a==null&&(a=A),a["$=~"](re(["^",c]))})}),C(q,"$join",function(c){var X,b,i=A;return X=O(arguments),b=X,x(b["$empty?"]())?"":(i="",b=G(b.$flatten().$each_with_index(),"map",[],function($,n){return $==null&&($=A),n==null&&(n=A),v(n,0)&&x($["$empty?"]())||v(b.$length(),Z(n,1))&&x($["$empty?"]())?d("SEPARATOR"):$}),b=G(b,"reject",[],"empty?".$to_proc()),G(b,"each_with_index",[],function($,n){var t=A;return $==null&&($=A),n==null&&(n=A),t=b["$[]"](Z(n,1)),x(t["$nil?"]())?i=""+i+$:(x($["$end_with?"](d("SEPARATOR")))&&x(t["$start_with?"](d("SEPARATOR")))&&($=$.$sub(re([d("SEPARATOR"),"+$"]),"")),i=x($["$end_with?"](d("SEPARATOR")))||x(t["$start_with?"](d("SEPARATOR")))?""+i+$:""+i+$+d("SEPARATOR"))}),i)},-1),C(q,"$split",function(c){return c.$split(d("SEPARATOR"))}),j(q,"realpath","expand_path"),j(q,"exists?","exist?")}(e.get_singleton_class(g),z)}("::",M("IO"),w)};Opal.modules["corelib/process/base"]=function(e){var x=e.klass,E=e.slice,B=e.defs,I=e.return_val,re=e.nil;return function(Z,C){var W=x(Z,C,"Signal");return B(W,"$trap",function(D){return E(arguments),re},-1)}("::",null),function(Z,C){var W=x(Z,C,"GC");return B(W,"$start",I(re))}("::",null)};Opal.modules["corelib/process"]=function(e){var x=e.module,E=e.defs,B=e.truthy,I=e.return_val,re=e.Kernel,Z=e.nil,C=e.$$$;return e.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(W){var v=x(W,"Process"),D=Z;if(v.__clocks__=[],E(v,"$__register_clock__",function(G,O){var j=this;return j.__clocks__==null&&(j.__clocks__=Z),j.$const_set(G,j.__clocks__.$size()),j.__clocks__["$<<"](O)}),v.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),D=!1,e.global.performance)D=function(){return performance.now()};else if(e.global.process&&process.hrtime){var $e=process.hrtime();D=function(){var V=process.hrtime($e),G=V[1]/1e3|0;return V[0]*1e3+G/1e3}}return B(D)&&v.$__register_clock__("CLOCK_MONOTONIC",D),E(v,"$pid",I(0)),E(v,"$times",function(){var G=Z;return G=C("Time").$now().$to_f(),C(C("Benchmark"),"Tms").$new(G,G,G,G,G)}),E(v,"$clock_gettime",function(G,O){var j=this,w=Z;j.__clocks__==null&&(j.__clocks__=Z),O==null&&(O="float_second"),B(w=j.__clocks__["$[]"](G))||re.$raise(C(C("Errno"),"EINVAL"),"clock_gettime("+G+") "+j.__clocks__["$[]"](G));var A=w();switch(O){case"float_second":return A/1e3;case"float_millisecond":return A/1;case"float_microsecond":return A*1e3;case"second":return A/1e3|0;case"millisecond":return A/1|0;case"microsecond":return A*1e3|0;case"nanosecond":return A*1e6|0;default:re.$raise(C("ArgumentError"),"unexpected unit: "+O)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function(e){var x=e.klass,E=e.module,B=e.def,I=e.range,re=e.send,Z=e.rb_divide,C=e.Kernel,W=e.Opal,v=[],D=e.nil,$e=e.$$$;return e.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(V,G,O){var j=x(V,G,"Random"),w=[j].concat(O);return function(A,M){var H=E(A,"Formatter"),k=[H].concat(M),P=e.$r(k);return B(H,"$hex",function(z){var F=this;z==null&&(z=D),z=$e("Random").$_verify_count(z);for(var q=F.$bytes(z),y="",o=0;o<z;o++)y+=q.charCodeAt(o).toString(16).padStart(2,"0");return y.$encode("US-ASCII")},-1),B(H,"$random_bytes",function(z){var F=this;return z==null&&(z=D),F.$bytes(z)},-1),B(H,"$base64",function(z){var F=this;return z==null&&(z=D),$e("Base64").$strict_encode64(F.$random_bytes(z)).$encode("US-ASCII")},-1),B(H,"$urlsafe_base64",function(z,F){var q=this;return z==null&&(z=D),F==null&&(F=!1),$e("Base64").$urlsafe_encode64(q.$random_bytes(z),F).$encode("US-ASCII")},-1),B(H,"$uuid",function(){var z=this,F=D;return F=z.$hex(16).$split(""),F["$[]="](12,"4"),F["$[]="](16,(parseInt(F["$[]"](16),16)&3|8).toString(16)),F=[F["$[]"](I(0,8,!0)),F["$[]"](I(8,12,!0)),F["$[]"](I(12,16,!0)),F["$[]"](I(16,20,!0)),F["$[]"](I(20,32,!0))],F=re(F,"map",[],"join".$to_proc()),F.$join("-")}),B(H,"$random_float",function(){var z=this,F=D,q=D;return F=z.$bytes(4),q=0,re(4,"times",[],function(o){return o==null&&(o=D),q=q["$<<"](8),q=q["$|"](F["$[]"](o).$ord())}),Z(q.$abs(),2147483647)}),B(H,"$random_number",function(z){var F=this;function q(){return F.$random_float()}function y(d){return Math.floor(q()*d)}function o(){var d=z.begin,S=z.end;if(d===D||S===D)return D;var h=S-d;return h<0?D:h===0?d:(S%1===0&&d%1===0&&!z.excl&&h++,y(h)+d)}return z==null?q():z.$$is_range?o():z.$$is_number?(z<=0&&C.$raise($e("ArgumentError"),"invalid argument - "+z),z%1===0?y(z):q()*z):(z=W["$coerce_to!"](z,$e("Integer"),"to_int"),z<=0&&C.$raise($e("ArgumentError"),"invalid argument - "+z),y(z))},-1),B(H,"$alphanumeric",function(z){var F=this,q=D;return z==null&&(z=D),z=P("Random").$_verify_count(z),q=re([I("0","9",!1),I("a","z",!1),I("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),re($e("Array"),"new",[z],function y(o){var d=y.$$s==null?this:y.$$s;return q["$[]"](d.$random_number(q.$length()))},{$$s:F}).$join()},-1)}(j,w),j.$include($e($e("Random"),"Formatter")),j.$extend($e($e("Random"),"Formatter"))}("::",null,v)};Opal.modules["corelib/random/mersenne_twister"]=function(e){var x=e.klass,E=e.const_set,B=e.send,I=e.nil,re=e.$$$,Z=I;return e.add_stubs("generator="),Z=function(){var C=624,W=397,v=2567483615,D=2147483648,$e=2147483647,V=function(k,P){return k&D|P&$e},G=function(k,P){return V(k,P)>>>1^(P&1?v:0)};function O(k){var P={left:0,next:C,state:new Array(C)};return j(P,k),P}function j(k,P){var g;for(k.state[0]=P>>>0,g=1;g<C;g++)k.state[g]=1812433253*(k.state[g-1]^k.state[g-1]>>30>>>0)+g,k.state[g]&=4294967295;k.left=1,k.next=C}function w(k){var P=0,g=k.state,z;for(k.left=C,k.next=0,z=C-W+1;--z;P++)g[P]=g[P+W]^G(g[P+0],g[P+1]);for(z=W;--z;P++)g[P]=g[P+(W-C)]^G(g[P+0],g[P+1]);g[P]=g[P+(W-C)]^G(g[P+0],g[0])}function A(k){var P;return--k.left<=0&&w(k),P=k.state[k.next++],P^=P>>>11,P^=P<<7&2636928640,P^=P<<15&4022730752,P^=P>>>18,P>>>0}function M(k,P){return k>>>=5,P>>>=6,(k*67108864+P)*(1/9007199254740992)}function H(k){var P=A(k),g=A(k);return M(P,g)}return{genrand_real:H,init:O}}(),function(C,W){var v=x(C,W,"Random"),D,$e=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return E(v,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*$e)},reseed:function(V){return Z.init(V)},rand:function(V){return Z.genrand_real(V)}}),D=[re(v,"MERSENNE_TWISTER_GENERATOR")],B(v,"generator=",D),D[D.length-1]}("::",null)};Opal.modules["corelib/random"]=function(e){var x=e.truthy,E=e.klass,B=e.Kernel,I=e.defs,re=e.Opal,Z=e.def,C=e.eqeqeq,W=e.send,v=e.top,D=e.nil,$e=e.$$$;return e.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),v.$require("corelib/random/formatter"),function(V,G){var O=E(V,G,"Random");return O.$attr_reader("seed","state"),I(O,"$_verify_count",function(w){return x(w)||(w=16),typeof w!="number"&&(w=w.$to_int()),w<0&&B.$raise($e("ArgumentError"),"negative string size (or size too big)"),w=Math.floor(w),w}),Z(O,"$initialize",function(w){var A=this;return w==null&&(w=$e("Random").$new_seed()),w=re["$coerce_to!"](w,$e("Integer"),"to_int"),A.state=w,A.$reseed(w)},-1),Z(O,"$reseed",function(w){var A=this;return A.seed=w,A.$rng=e.$$rand.reseed(w)}),I(O,"$new_seed",function(){return e.$$rand.new_seed()}),I(O,"$rand",function(w){var A=this;return $e(A,"DEFAULT").$rand(w)},-1),I(O,"$srand",function(w){var A=this,M=D;return w==null&&(w=$e("Random").$new_seed()),w=re["$coerce_to!"](w,$e("Integer"),"to_int"),M=$e(A,"DEFAULT").$seed(),$e(A,"DEFAULT").$reseed(w),M},-1),I(O,"$urandom",function(w){return $e("SecureRandom").$bytes(w)}),Z(O,"$==",function(w){var A=this,M=D;return C($e("Random"),w)?x(M=A.$seed()["$=="](w.$seed()))?A.$state()["$=="](w.$state()):M:!1}),Z(O,"$bytes",function(w){var A=this;return w=$e("Random").$_verify_count(w),W($e("Array"),"new",[w],function M(){var H=M.$$s==null?this:M.$$s;return H.$rand(255).$chr()},{$$s:A}).$join().$encode("ASCII-8BIT")}),I(O,"$bytes",function(w){var A=this;return $e(A,"DEFAULT").$bytes(w)}),Z(O,"$rand",function(w){var A=this;return A.$random_number(w)},-1),Z(O,"$random_float",function(){var w=this;return w.state++,e.$$rand.rand(w.$rng)}),I(O,"$random_float",function(){var w=this;return $e(w,"DEFAULT").$random_float()}),I(O,"$generator=",function(w){var A=this;return e.$$rand=w,x(A["$const_defined?"]("DEFAULT"))?$e(A,"DEFAULT").$reseed():A.$const_set("DEFAULT",A.$new(A.$new_seed()))})}("::",null),v.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function(e){var x=e.Kernel,E=e.klass,B=e.send,I=e.slice,re=e.module,Z=e.def,C=e.return_val,W=e.alias,v=e.defs,D=e.top,$e=[],V=e.nil,G=e.$$$;e.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var O={};function j(A){switch(e.config.unsupported_features_severity){case"error":x.$raise(G("NotImplementedError"),A);break;case"warning":w(A);break}}function w(A){O[A]||(O[A]=!0,D.$warn(A))}return function(A,M){var H=E(A,M,"String"),k="String#%s not supported. Mutable String methods are not supported in Opal.";return B(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function P(g){var z=P.$$s==null?this:P.$$s;return g==null&&(g=V),B(z,"define_method",[g],function(q){return I(arguments),x.$raise(G("NotImplementedError"),k["$%"](g))},-1)},{$$s:H})}("::",null),function(A){var M=re(A,"Kernel"),H="Object tainting is not supported by Opal";return Z(M,"$taint",function(){var P=this;return j(H),P}),Z(M,"$untaint",function(){var P=this;return j(H),P}),Z(M,"$tainted?",function(){return j(H),!1})}("::"),function(A,M){var H=E(A,M,"Module");return Z(H,"$public",function(P){var g,z,F=this;return g=I(arguments),z=g,z.length===0?(F.$$module_function=!1,V):z.length===1?z[0]:z},-1),Z(H,"$private_class_method",function(P){var g,z;return g=I(arguments),z=g,z.length===1?z[0]:z},-1),Z(H,"$private_method_defined?",C(!1)),Z(H,"$private_constant",function(P){return I(arguments),V},-1),W(H,"nesting","public"),W(H,"private","public"),W(H,"protected","public"),W(H,"protected_method_defined?","private_method_defined?"),W(H,"public_class_method","private_class_method"),W(H,"public_instance_method","instance_method"),W(H,"public_instance_methods","instance_methods"),W(H,"public_method_defined?","method_defined?")}("::",null),function(A){var M=re(A,"Kernel");return Z(M,"$private_methods",function(k){return I(arguments),[]},-1),W(M,"protected_methods","private_methods"),W(M,"private_instance_methods","private_methods"),W(M,"protected_instance_methods","private_methods")}("::"),function(A,M){var H=re(A,"Kernel"),k=[H].concat(M),P=e.$r(k);return Z(H,"$eval",function(z){return I(arguments),x.$raise(G("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+P("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",$e),v(D,"$public",function(M){var H,k;return H=I(arguments),k=H,k.length===1?k[0]:k},-1),v(D,"$private",function(M){var H,k;return H=I(arguments),k=H,k.length===1?k[0]:k},-1)};Opal.modules["corelib/binding"]=function(e){var x=e.klass,E=e.truthy,B=e.def,I=e.slice,re=e.send,Z=e.to_a,C=e.Kernel,W=e.return_ivar,v=e.eqeq;e.thrower;var D=e.module,$e=e.const_set,V=e.top,G=[],O=e.nil,j=e.$$$;return e.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(w,A){var M=x(w,A,"Binding"),H=M.$$prototype;return H.jseval=H.scope_variables=O,B(M,"$initialize",function(P,g,z,F){var q,y=this;return g==null&&(g=[]),F==null&&(F=O),q=[P,g,z,F],y.jseval=q[0],y.scope_variables=q[1],y.receiver=q[2],y.source_location=q[3],E(typeof z!==void 0)?O:z=y.$js_eval("self")},-2),B(M,"$js_eval",function(P){var g,z,F=this;return g=I(arguments),z=g,E(F.jseval)?re(F.jseval,"call",Z(z)):C.$raise("Evaluation on a Proc#binding is not supported")},-1),B(M,"$local_variable_get",function(P){var g=this;try{return g.$js_eval(P)}catch(z){if(e.rescue(z,[j("Exception")]))try{return C.$raise(j("NameError"),"local variable `"+P+"' is not defined for "+g.$inspect())}finally{e.pop_exception(z)}else throw z}}),B(M,"$local_variable_set",function(P,g){var z=this;return e.Binding.tmp_value=g,z.$js_eval(""+P+" = Opal.Binding.tmp_value"),delete e.Binding.tmp_value,g}),B(M,"$local_variables",W("scope_variables")),B(M,"$local_variable_defined?",function(P){var g=this;return g.scope_variables["$include?"](P)}),B(M,"$eval",function(P,g,z){try{var F=this;return g==null&&(g=O),z==null&&(z=O),v(P,"self")?F.$receiver():C.$eval(P,F,g,z)}catch(q){if(q===e.t_eval_return)return q.$v;throw q}},-2),M.$attr_reader("receiver","source_location")}("::",null),function(w){var A=D(w,"Kernel");return B(A,"$binding",function(){return C.$raise("Opal doesn't support dynamic calls to binding")})}("::"),$e(G[0],"TOPLEVEL_BINDING",j("Binding").$new(function(w){return new Function("self","return "+w)(V)},[],V,["<main>",0]))};Opal.modules["corelib/irb"]=function(e){var x=e.module,E=e.truthy,B=e.Kernel,I=e.defs,re=e.gvars,Z=e.lambda,C=e.hash_rehash,W=e.send,v=e.rb_plus,D=e.const_set,$e=e.klass,V=e.def,G=e.Opal,O=e.range,j=e.eqeq,w=e.thrower,A=[],M=e.nil,H=e.$$$;e.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(k,P){var g=x(k,"Opal"),z=[g].concat(P);return function(F,q){var y=x(F,"IRB"),o=[y].concat(q),d=e.$r(o);return I(y,"$ensure_loaded",function(h){var l=M,c=M;if(E(e.loaded_features["$include?"](h)))return M;l=E(d("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":d("RUBY_ENGINE_VERSION"),c="https://cdn.opalrb.com/opal/"+l+"/"+h+".js";var X;if(typeof XMLHttpRequest<"u"){var b=new XMLHttpRequest;b.open("GET",c,!1),b.send(""),X=b.responseText}else B.$raise("You need to provision "+h+" yourself in this environment");return new Function("Opal",X)(e),e.require(h),E(e.loaded_features["$include?"](h))?M:B.$raise("Could not load "+h+" for some reason")}),y.$singleton_class().$attr_accessor("output"),I(y,"$prepare_console",function S(){var h=S.$$p||M,l,c=this,X=M,b=M;return re.stdout==null&&(re.stdout=M),re.stderr==null&&(re.stderr=M),re.stdin==null&&(re.stdin=M),S.$$p=null,function(){try{return c["$output="](""),X=C(new Map([[re.stdout,Z(function(a){return a==null&&(a=M),re.stdout=a})],[re.stderr,Z(function(a){return a==null&&(a=M),re.stderr=a})]])),E(c["$browser?"]())&&(W(X,"each",[],function i(a,$){var n=i.$$s==null?this:i.$$s,t=M;return a==null&&(a=M),$==null&&($=M),t=a.$dup(),t["$write_proc="](W(n,"proc",[],function r(s){var u=r.$$s==null?this:r.$$s;return s==null&&(s=M),u["$output="](v(u.$output(),s)),u["$output="](u.$output().$split(`
`).$last(30).$join(`
`)),E(s["$end_with?"](`
`))&&u["$output="](v(u.$output(),`
`)),a.$write_proc().$call(s)},{$$s:n})),t["$tty="](!1),$.$call(t)},{$$s:c}),b=re.stdin.$read_proc(),re.stdin["$read_proc="](function(i){var a=prompt(c.$output());return a!==null?a+`
`:M})),e.yieldX(h,[])}finally{W(X,"each",[],function(a,$){return a==null&&(a=M),$==null&&($=M),$.$call(a)}),l=[b],W(re.stdin,"read_proc=",l),l[l.length-1],l=[""],W(c,"output=",l),l[l.length-1]}}()}),I(y,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),D(o[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(S,h){var l=$e(S,h,"Silencer"),c=l.$$prototype;return c.collector=c.stderr=M,V(l,"$initialize",function(){var b=this;return re.stderr==null&&(re.stderr=M),b.stderr=re.stderr}),V(l,"$silence",function X(){var b=X.$$p||M,i=this;return X.$$p=null,function(){try{return i.collector=H("StringIO").$new(),re.stderr=i.collector,e.yieldX(b,[])}finally{re.stderr=i.stderr}}()}),V(l,"$warnings",function(){var b=this;return b.collector.$string()})}(o[0],null)}(z[0],z)}(A[0],A),function(k,P,g){var z=$e(k,P,"Binding"),F=[z].concat(g),q=e.$r(F);return V(z,"$irb",function(){try{var o=w("return"),d=this,S=M;return H(G,"IRB").$ensure_loaded("opal-replutils"),S=H(H(G,"IRB"),"Silencer").$new(),W(H(G,"IRB"),"prepare_console",[],function h(){var l=h.$$s==null?this:h.$$s;return function(){try{var c=w("break");return W(l,"loop",[],function X(){var b=X.$$s==null?this:X.$$s,i=M,a=M,$=M,n=M,t=M;b.$print(">> "),i=b.$gets(),E(i)||c.$throw(M,X.$$is_lambda),a="",E(H(G,"IRB")["$browser?"]())&&b.$puts(i),E(i["$start_with?"]("ls "))?(a=i["$[]"](O(3,-1,!1)),$="ls"):j(i,`ls
`)?(a="self",$="ls"):E(i["$start_with?"]("show "))?(a=i["$[]"](O(5,-1,!1)),$="show"):(a=i,$="inspect"),n=M;do{try{W(S,"silence",[],function(){return n=e.compile(a,{irb:!0})})}catch(r){if(e.rescue(r,[q("SyntaxError")])){t=r;try{if(E(H(H(G,"IRB"),"LINEBREAKS")["$include?"](t.$message()))){b.$print(".. "),i=b.$gets(),E(i)||o.$throw(M,X.$$is_lambda),E(H(G,"IRB")["$browser?"]())&&b.$puts(i),a=v(a,i);continue}else E(S.$warnings()["$empty?"]())?b.$warn(t.$full_message()):b.$warn(S.$warnings())}finally{e.pop_exception(r)}}else throw r}break}while(!0);return j($,"show")&&(b.$puts(n),o.$throw(M,X.$$is_lambda)),b.$puts(H("REPLUtils").$eval_and_print(n,$,!1,b))},{$$s:l,$$ret:o})}catch(X){if(X===c)return X.$v;throw X}finally{c.is_orphan=!0}}()},{$$s:d})}catch(h){if(h===o)return h.$v;throw h}finally{o.is_orphan=!0}})}("::",null,A),e.irb=function(k){H("Binding").$new(k).$irb()},e.load_parser=function(){e.Opal.IRB.$ensure_loaded("opal-parser")},typeof e.eval>"u"&&(e.eval=function(k){return e.load_parser(),e.eval(k)}),typeof e.compile>"u"&&(e.compile=function(k,P){return e.load_parser(),e.compile(k,P)})};Opal.modules.opal=function(e){var x=e.Object;return e.nil,e.add_stubs("require,autoload"),x.$require("opal/base"),x.$require("opal/mini"),x.$require("corelib/kernel/format"),x.$require("corelib/string/encoding"),x.$autoload("Math","corelib/math"),x.$require("corelib/complex/base"),x.$autoload("Complex","corelib/complex"),x.$require("corelib/rational/base"),x.$autoload("Rational","corelib/rational"),x.$require("corelib/time"),x.$autoload("Struct","corelib/struct"),x.$autoload("Set","corelib/set"),x.$autoload("Dir","corelib/dir"),x.$autoload("File","corelib/file"),x.$require("corelib/process/base"),x.$autoload("Process","corelib/process"),x.$autoload("Random","corelib/random"),x.$require("corelib/unsupported"),x.$require("corelib/binding"),x.$require("corelib/irb")};Opal.modules["js/proxy"]=function(e){var x=e.module,E=e.truthy,B=e.def,I=e.klass,re=e.const_set,Z=e.slice,C=e.range,W=e.send,v=e.to_a,D=e.gvars,$e=e.top,V=[],G=e.nil;return e.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),$e.$require("opal"),$e.$require("native"),function(O,j){var w=x(O,"JS"),A=[w].concat(j),M=e.$r(A);return function(H,k){var P=x(H,"Helpers"),g=[P].concat(k),z=e.$r(g);return B(P,"$wrap_result",function(q){return E(q&&typeof q.then=="function")?z("Promise").$new(q):E(typeof q=="object"&&q!==null)?z("Proxy").$new(q):q}),B(P,"$native_methods",function(){var q=this,y=G;return q.native_methods==null&&(q.native_methods=G),q.native_methods=function(){if(E(y=q.native_methods))return y;{let o=q.$to_n();const d=new Set;for(;o!==null;){for(const S of Reflect.ownKeys(o)){const h=S.toString(),l=q.$to_rb_name(h);typeof S!="symbol"&&h!==l&&d.add(l),d.add(h)}o=Object.getPrototypeOf(o)}return Array.from(d)}}()})}(A[0],A),function(H,k,P){var g=I(H,k,"Proxy"),z=[g].concat(P),F=e.$r(z);return g.$include(F("Enumerable")),g.$include(F("Helpers")),g.$attr_accessor("native"),re(z[0],"IRREGULARS",["html","url","uri"]),B(g,"$initialize",function(y){var o=this;return o.native=o.$Native(y)}),B(g,"$method_missing",function q(y,o){var d=q.$$p||G,S,h,l,c=this,X=G,b=G,i=G,a=G,$=G,n=G;return q.$$p=null,S=Z(arguments,1),h=S,X=c.$to_js_name(y),E(c["$existing_property?"](X))||E(X["$end_with?"]("="))||c.$raise(F("NoMethodError"),"undefined method `"+y+"` for "+c),E(X["$end_with?"]("="))?(b=X["$[]"](C(0,-2,!1)),l=[b,h.$first()],W(c.$native(),"[]=",l),l[l.length-1]):(i=c.$native()["$[]"](X),E(typeof i=="function")?(a=h.$dup(),E(d)&&($=function(){let t=Array.prototype.slice.call(arguments);return W(d,"call",[c.$class().$new(this)].concat(v(t)))},a["$<<"]($)),n=i.apply(c.$to_n(),a.$to_n()),c.$wrap_result(n)):E(typeof i=="object"&&i!==null)?c.$wrap_result(i):i)},-2),B(g,"$to_str",function(){var y=this;return y.$to_n().toString()}),B(g,"$respond_to_missing?",function(y,o){return!0},-2),B(g,"$each",function q(){var y=q.$$p||G,o=this,d=G;return q.$$p=null,E(o["$respond_to?"]("length"))?(d=o.$length(),W(e.Range.$new(0,d,!0),"each",[],function S(h){var l=S.$$s==null?this:S.$$s;return h==null&&(h=G),e.yield1(y,l["$[]"](h))},{$$s:o})):o.$enum_for("each")}),B(g,"$[]",function(y){var o=this,d=G;return d=o.$native()["$[]"](y),o.$wrap_result(d)}),B(g,"$[]=",function(y,o){var d=this;return d.$native()["$[]="](y,o),d.$wrap_result(d.$native())}),B(g,"$to_n",function(){var y=this;return y.$native().$to_n()}),B(g,"$length",function(){var y=this;return y.$native().$length()}),g.$private(),B(g,"$to_js_name",function(y){return W(y.$to_s().$split("_").$map(),"with_index",[],function(d,S){return d==null&&(d=G),S==null&&(S=G),E(F("IRREGULARS")["$include?"](d.$gsub("=","").$downcase()))?d.$upcase():E(S["$zero?"]())?d:d.$capitalize()}).$join()}),B(g,"$to_rb_name",function(y){return W(y.$to_s(),"gsub",[/([A-Z]+)/],function(){var d;return"_"+((d=D["~"])===G?G:d["$[]"](1)).$downcase()}).$sub(/^_/,"")}),B(g,"$existing_property?",function(y){var o=this;return y in o.$to_n()})}(A[0],null,A),function(H,k,P){var g=I(H,k,"Promise"),z=[g].concat(P),F=e.$r(z);return g.$include(F("Helpers")),B(g,"$then",function q(){var y=q.$$p||G,o,d=this,S=G;return q.$$p=null,S=function(h){var l=y.$call(d.$wrap_result(h));return l&&typeof l.then=="function"?l:l&&typeof l.to_n=="function"?l.to_n():l},o=[d.$to_n().then(S)],W(d,"native=",o),o[o.length-1]}),B(g,"$catch",function q(){var y=q.$$p||G,o,d=this,S=G;return q.$$p=null,S=function(h){var l=y.$call(d.$wrap_result(h));return l&&typeof l.then=="function"?l:l&&typeof l.to_n=="function"?l.to_n():l},o=[d.$to_n().catch(S)],W(d,"native=",o),o[o.length-1]})}(A[0],M("Proxy"),A)}(V[0],V)};Opal.modules["opal_stimulus/stimulus_controller"]=function(e){var x=e.klass,E=e.const_set,B=e.Opal,I=e.defs,re=e.truthy,Z=e.send,C=e.gvars,W=e.return_val,v=e.thrower,D=e.rb_plus,$e=e.eqeqeq,V=e.def,G=e.top,O=[],j=e.nil,w=e.$$$;return e.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),G.$require("opal"),G.$require("native"),G.$require("js/proxy"),function(A,M,H){var k=x(A,M,"StimulusController"),P=[k].concat(H),g=e.$r(P),z=k.$$prototype;return z.window=z.document=j,E(P[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),E(P[0],"DEFAULT_GETTERS",["element"]),I(k,"$inherited",function(q){return B.$bridge(q.$stimulus_controller(),q)}),I(k,"$stimulus_controller",function(){var q=this;return q.stimulus_controller==null&&(q.stimulus_controller=j),re(q.stimulus_controller)||(q.stimulus_controller=class extends Controller{}),q.stimulus_controller}),I(k,"$stimulus_name",function(){var q=this;return q.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),I(k,"$method_added",function(q){var y=this;if(re(g("DEFAULT_GETTERS")["$include?"](q)))return j;y.$stimulus_controller().prototype[q]=function(...o){try{var d=o.map(function(S){return S&&typeof S=="object"&&!S.$$class?e.JS.Proxy.$new(S):S});return this["$"+q].apply(this,d)}catch(S){console.error("Uncaught",S)}}}),I(k,"$to_ruby_name",function(q){return Z(q.$to_s(),"gsub",[/([A-Z]+)/],function(){var o;return"_"+((o=C["~"])===j?j:o["$[]"](1)).$downcase()}).$sub(/^_/,"")}),I(k,"$register_all!",function(){try{var q=v("return"),y=this;return Z(y.$subclasses(),"each",[],function o(d){return d==null&&(d=j),Z(d,"define_method",["dummy"],W(j)),re(application.controllers["$include?"](d.$stimulus_name()))&&q.$throw(j,o.$$is_lambda),application.register(d.$stimulus_name(),d.$stimulus_controller())},{$$ret:q})}catch(o){if(o===q)return o.$v;throw o}finally{q.is_orphan=!0}}),I(k,"$targets=",function(q){var y=this;return q==null&&(q=[]),y.$stimulus_controller().targets=q,Z(q,"each",[],function o(d){var S=o.$$s==null?this:o.$$s,h=j,l=j,c=j,X=j,b=j,i=j;d==null&&(d=j),h=d.$to_s(),l=S.$to_ruby_name(d),Z(S,"define_method",[D(l,"_target")],function(){return w(g("JS"),"Proxy").$new(this[D(h,"Target")])}),Z(S,"define_method",[D(l,"_targets")],function(){return Z(this[D(h,"Targets")],"map",[],function(n){return n==null&&(n=j),w(g("JS"),"Proxy").$new(n)})}),Z(S,"define_method",[D(D("has_",l),"_target")],function(){return this[D(D("has",h.$capitalize()),"Target")]}),c=D(l,"_target_connected"),X=D(h,"TargetConnected"),S.$stimulus_controller().prototype[X]=function(){if(this["$respond_to?"]&&this["$respond_to?"](c))return this["$"+c]()},b=D(l,"_target_disconnected"),i=D(h,"TargetDisconnected"),S.$stimulus_controller().prototype[i]=function(){if(this["$respond_to?"]&&this["$respond_to?"](b))return this["$"+b]()}},{$$s:y})},-1),I(k,"$outlets=",function(q){var y=this;return q==null&&(q=[]),y.$stimulus_controller().outlets=q,Z(q,"each",[],function o(d){var S=o.$$s==null?this:o.$$s,h=j,l=j,c=j,X=j,b=j,i=j;d==null&&(d=j),h=d.$to_s(),l=S.$to_ruby_name(d),Z(S,"define_method",[D(l,"_outlet")],function(){return this[D(h,"Outlet")]}),Z(S,"define_method",[D(l,"_outlets")],function(){return this[D(h,"Outlets")]}),Z(S,"define_method",[D(D("has_",l),"_outlet")],function(){return this[D(D("has",h.$capitalize()),"Outlet")]}),c=D(l,"_outlet_connected"),X=D(h,"OutletConnected"),S.$stimulus_controller().prototype[X]=function(){if(this["$respond_to?"]&&this["$respond_to?"](c))return this["$"+c]()},b=D(l,"_outlet_disconnected"),i=D(h,"OutletDisconnected"),S.$stimulus_controller().prototype[i]=function(){if(this["$respond_to?"]&&this["$respond_to?"](b))return this["$"+b]()}},{$$s:y})},-1),I(k,"$values=",function(q){var y=this,o=j;return q==null&&(q=new Map),o=new Map,Z(q,"each",[],function d(S,h){var l=d.$$s==null?this:d.$$s,c=j,X=j,b=j,i=j;S==null&&(S=j),h==null&&(h=j),S=l.$to_ruby_name(S),c=$e("string",X=h)?String:$e("number",X)?Number:$e("boolean",X)?Boolean:$e("array",X)?Array:$e("object",X)?Object:l.$raise(g("ArgumentError"),"Unsupported value type: "+h+", please use :string, :number, :boolean, :array, or :object"),o["$[]="](S,c),l.$stimulus_controller().values=o.$to_n(),Z(l,"define_method",[D(S,"_value")],function a(){var $=a.$$s==null?this:a.$$s;return $.$Native(this[D(S,"Value")])},{$$s:l}),Z(l,"define_method",[D(S,"_value=")],function a($){var n=a.$$s==null?this:a.$$s;return $==null&&($=j),n.$Native(this[D(S,"Value")]=$)},{$$s:l}),Z(l,"define_method",["has_"+S],function(){return this[D(D("has",S.$to_s().$capitalize()),"Value")]}),b=""+S+"_value_changed",i=""+S+"ValueChanged",l.$stimulus_controller().prototype[i]=function(a,$){if(h["$=="]("object")&&(a=JSON.stringify(a),$=JSON.stringify($)),this["$respond_to?"]&&this["$respond_to?"](b))return this["$"+b](a,$)}},{$$s:y})},-1),I(k,"$classes=",function(q){var y=this;return q==null&&(q=[]),y.$stimulus_controller().classes=q,Z(q,"each",[],function o(d){var S=o.$$s==null?this:o.$$s,h=j,l=j;return d==null&&(d=j),h=d.$to_s(),l=S.$to_ruby_name(d),Z(S,"define_method",[""+l+"_class"],function(){return this[D(h,"Class")]}),Z(S,"define_method",[""+l+"_classes"],function(){return this[D(h,"Classes")]}),Z(S,"define_method",["has_"+l+"_class"],function(){return this[D(D("has",h.$capitalize()),"Class")]})},{$$s:y})},-1),V(k,"$element",function(){return w(g("JS"),"Proxy").$new(this.element)}),V(k,"$window",function(){var q=this,y=j;return C.$==null&&(C.$=j),q.window=re(y=q.window)?y:w(g("JS"),"Proxy").$new(C.$.$window())}),V(k,"$document",function(){var q=this,y=j;return C.$==null&&(C.$=j),q.document=re(y=q.document)?y:w(g("JS"),"Proxy").$new(C.$.$document())})}(O[0],Controller,O)};Opal.modules["opal_vite/concerns/v1/stimulus_helpers"]=function(e){var x=e.module,E=e.def,B=e.truthy,I=e.eqeq,re=e.slice,Z=e.send,C=e.ensure_kwargs,W=e.get_kwarg,v=e.hash_get,D=e.rb_plus,$e=e.range,V=e.const_set,G=[],O=e.$r(G),j=e.nil,w=e.$$$;return e.add_stubs("camelize,has_target?,target_set_value,target_set_html,set_target_style,get_target_style,==,show_target,hide_target,call,body_style,to_n,storage_get,is_a?,parse_int,event_data,js_timestamp,is_nan?,parse_float,to_s,empty?,map,respond_to?,fetch_json_promise,fetch_json_safe,js_then,js_catch,console_error,private,include?,+,upcase,[],downcase,split,join,to_proc,first"),function(A,M){var H=x(A,"OpalVite"),k=[H].concat(M);return function(P,g){var z=x(P,"Concerns"),F=[z].concat(g);return function(q,y){var o=x(q,"V1"),d=[o].concat(y);return function(S,h){var l=x(S,"StimulusHelpers"),c=[l].concat(h),X=e.$r(c);return E(l,"$has_target?",function(i){var a=this,$=j;return $="has"+a.$camelize(i)+"Target",this[$]}),E(l,"$get_target",function(i){var a=this,$=j;return B(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$]):j}),E(l,"$get_targets",function(i){var a=this,$=j;return $=""+a.$camelize(i,!1)+"Targets",Array.from(this[$]||[])}),E(l,"$target_value",function(i){var a=this,$=j;return B(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].value):j}),E(l,"$target_set_value",function(i,a){var $=this,n=j;return B($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].value=a):j}),E(l,"$target_html",function(i){var a=this,$=j;return B(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].innerHTML):j}),E(l,"$target_set_html",function(i,a){var $=this,n=j;return B($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].innerHTML=a):j}),E(l,"$target_text",function(i){var a=this,$=j;return B(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].textContent):j}),E(l,"$target_set_text",function(i,a){var $=this,n=j;return B($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].textContent=a):j}),E(l,"$target_data",function(i,a){var $=this,n=j;return B($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].getAttribute("data-"+a)):j}),E(l,"$target_set_data",function(i,a,$){var n=this,t=j;return B(n["$has_target?"](i))?(t=""+n.$camelize(i,!1)+"Target",this[t].setAttribute("data-"+a,$)):j}),E(l,"$target_clear",function(i){var a=this;return a.$target_set_value(i,"")}),E(l,"$target_clear_html",function(i){var a=this;return a.$target_set_html(i,"")}),E(l,"$set_target_style",function(i,a,$){var n=this,t=j;return B(n["$has_target?"](i))?(t=""+n.$camelize(i,!1)+"Target",this[t].style[a]=$):j}),E(l,"$get_target_style",function(i,a){var $=this,n=j;return B($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].style[a]):j}),E(l,"$show_target",function(i){var a=this;return a.$set_target_style(i,"display","")}),E(l,"$hide_target",function(i){var a=this;return a.$set_target_style(i,"display","none")}),E(l,"$toggle_target_visibility",function(i){var a=this,$=j;return $=a.$get_target_style(i,"display"),I($,"none")?a.$show_target(i):a.$hide_target(i)}),E(l,"$add_target_class",function(i,a){var $=this,n=j;return B($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.add(a)):j}),E(l,"$remove_target_class",function(i,a){var $=this,n=j;return B($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.remove(a)):j}),E(l,"$toggle_target_class",function(i,a){var $=this,n=j;return B($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.toggle(a)):j}),E(l,"$has_target_class?",function(i,a){var $=this,n=j;return B($["$has_target?"](i))?(n=""+$.$camelize(i,!1)+"Target",this[n].classList.contains(a)):!1}),E(l,"$js_timestamp",function(){return Date.now()}),E(l,"$js_iso_date",function(){return new Date().toISOString()}),E(l,"$js_date",function(i){return i==null&&(i=j),B(i)?new Date(i):new Date},-1),E(l,"$js_regexp",function(i,a){return a==null&&(a=""),new RegExp(i,a)},-2),E(l,"$js_regexp_test",function(i,a,$){return $==null&&($=""),new RegExp(i,$).test(a)},-3),E(l,"$set_timeout",function b(i){var a=b.$$p||j;return b.$$p=null,setTimeout(function(){a.$call()},i)}),E(l,"$set_interval",function b(i){var a=b.$$p||j;return b.$$p=null,setInterval(function(){a.$call()},i)}),E(l,"$clear_timeout",function(i){return clearTimeout(i)}),E(l,"$clear_interval",function(i){return clearInterval(i)}),E(l,"$body_style",function(i,a){return document.body.style[i]=a}),E(l,"$lock_body_scroll",function(){var i=this;return i.$body_style("overflow","hidden")}),E(l,"$unlock_body_scroll",function(){var i=this;return i.$body_style("overflow","")}),E(l,"$js_array",function(){return[]}),E(l,"$js_array_push",function(i,a){return i.push(a.$to_n())}),E(l,"$js_array_length",function(i){return i.length}),E(l,"$js_array_at",function(i,a){return i[a]}),E(l,"$storage_get",function(i){return localStorage.getItem(i)}),E(l,"$storage_set",function(i,a){return localStorage.setItem(i,a)}),E(l,"$storage_remove",function(i){return localStorage.removeItem(i)}),E(l,"$storage_get_json",function(i,a){var $=this,n=j;return a==null&&(a=j),n=$.$storage_get(i),B(n===null)?a:JSON.parse(n)},-2),E(l,"$storage_set_json",function(i,a){return localStorage.setItem(i,JSON.stringify(a.$to_n()))}),E(l,"$dispatch_window_event",function(i,a){var $=j;a==null&&(a=new Map),$=B(a["$is_a?"](X("Hash")))?a.$to_n():a;const n=new CustomEvent(i,{detail:$});window.dispatchEvent(n)},-2),E(l,"$dispatch_event",function(i,a){var $=j;a==null&&(a=new Map),$=B(a["$is_a?"](X("Hash")))?a.$to_n():a;const n=new CustomEvent(i,{detail:$});this.element.dispatchEvent(n)},-2),E(l,"$on_window_event",function b(i){var a=b.$$p||j;return b.$$p=null,window.addEventListener(i,a)}),E(l,"$off_window_event",function(i,a){return window.removeEventListener(i,a)}),E(l,"$on_document_event",function b(i){var a=b.$$p||j;return b.$$p=null,document.addEventListener(i,a)}),E(l,"$on_dom_ready",function b(){var i=b.$$p||j;return b.$$p=null,document.addEventListener("DOMContentLoaded",i)}),E(l,"$on_element_event",function b(i,a){var $=b.$$p||j;return b.$$p=null,i.addEventListener(a,$)}),E(l,"$off_element_event",function(i,a,$){return i.removeEventListener(a,$)}),E(l,"$on_controller_event",function b(i){var a=b.$$p||j;b.$$p=null;const $=a;this.element.addEventListener(i,function(n){$(n)})}),E(l,"$event_target",function(){return event.currentTarget}),E(l,"$event_data",function(i){return event.currentTarget.getAttribute("data-"+i)}),E(l,"$event_data_int",function(i){var a=this;return a.$parse_int(a.$event_data(i))}),E(l,"$prevent_default",function(){return event.preventDefault()}),E(l,"$event_key",function(){return event.key}),E(l,"$add_class",function(i,a){return i.classList.add(a)}),E(l,"$remove_class",function(i,a){return i.classList.remove(a)}),E(l,"$toggle_class",function(i,a){return i.classList.toggle(a)}),E(l,"$has_class?",function(i,a){return i.classList.contains(a)}),E(l,"$set_attr",function(i,a,$){return i.setAttribute(a,$)}),E(l,"$get_attr",function(i,a){return i.getAttribute(a)}),E(l,"$remove_attr",function(i,a){return i.removeAttribute(a)}),E(l,"$set_style",function(i,a,$){return i.style[a]=$}),E(l,"$set_html",function(i,a){return i.innerHTML=a}),E(l,"$set_text",function(i,a){return i.textContent=a}),E(l,"$get_value",function(i){return i.value}),E(l,"$set_value",function(i,a){return i.value=a}),E(l,"$focus",function(i){return i.focus()}),E(l,"$has_attr?",function(i,a){return i.hasAttribute(a)}),E(l,"$create_element",function(i){return document.createElement(i)}),E(l,"$append_child",function(i,a){return i.appendChild(a)}),E(l,"$remove_element",function(i){return i.remove()}),E(l,"$next_sibling",function(i){return i.nextElementSibling}),E(l,"$prev_sibling",function(i){return i.previousElementSibling}),E(l,"$parent",function(i){return i.parentElement}),E(l,"$query",function(i){return document.querySelector(i)}),E(l,"$query_all",function(i){return Array.from(document.querySelectorAll(i))}),E(l,"$query_element",function(i){return this.element.querySelector(i)}),E(l,"$query_all_element",function(i){return Array.from(this.element.querySelectorAll(i))}),E(l,"$doc_root",function(){return document.documentElement}),E(l,"$set_root_attr",function(i,a){return document.documentElement.setAttribute(i,a)}),E(l,"$get_root_attr",function(i){return document.documentElement.getAttribute(i)}),E(l,"$clone_template",function(i){var a=this,$=j;return $=""+a.$camelize(i,!1)+"Target",this[$].content.cloneNode(!0)}),E(l,"$template_first_child",function(i){return i.firstElementChild}),E(l,"$element_add_class",function(i){return this.element.classList.add(i)}),E(l,"$element_remove_class",function(i){return this.element.classList.remove(i)}),E(l,"$element_toggle_class",function(i){return this.element.classList.toggle(i)}),E(l,"$generate_id",function(){var i=this;return i.$js_timestamp()}),E(l,"$target_focus",function(i){var a=this,$=j;return B(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].focus()):j}),E(l,"$target_blur",function(i){var a=this,$=j;return B(a["$has_target?"](i))?($=""+a.$camelize(i,!1)+"Target",this[$].blur()):j}),E(l,"$parse_int",function(i,a){return a==null&&(a=10),parseInt(i,a)},-2),E(l,"$parse_float",function(i){return parseFloat(i)}),E(l,"$is_nan?",function(i){return Number.isNaN(i)}),E(l,"$parse_int_or",function(i,a){var $=this,n=j;return a==null&&(a=0),n=$.$parse_int(i),B($["$is_nan?"](n))?a:n},-2),E(l,"$parse_float_or",function(i,a){var $=this,n=j;return a==null&&(a=0),n=$.$parse_float(i),B($["$is_nan?"](n))?a:n},-2),E(l,"$js_prop",function(i){return this[i.$to_s()]}),E(l,"$js_set_prop",function(i,a){return this[i.$to_s()]=a}),E(l,"$js_has_prop?",function(i){return!!this[i.$to_s()]}),E(l,"$js_call",function(i,a){var $,n,t=j;return $=re(arguments,1),n=$,B(n["$empty?"]())?this[i.$to_s()]():(t=Z(n,"map",[],function(s){return s==null&&(s=j),B(s["$respond_to?"]("to_n"))?s.$to_n():s}),this[i.$to_s()].apply(this,t))},-2),E(l,"$js_call_on",function(i,a,$){var n,t,r=j;return n=re(arguments,2),t=n,B(t["$empty?"]())?i[a.$to_s()]():(r=Z(t,"map",[],function(u){return u==null&&(u=j),B(u["$respond_to?"]("to_n"))?u.$to_n():u}),i[a.$to_s()].apply(i,r))},-3),E(l,"$js_get",function(i,a){return i[a.$to_s()]}),E(l,"$js_set",function(i,a,$){return i[a.$to_s()]=$}),E(l,"$json_parse",function(i){return JSON.parse(i)}),E(l,"$json_stringify",function(i){var a=j;return a=B(i["$respond_to?"]("to_n"))?i.$to_n():i,JSON.stringify(a)}),E(l,"$console_log",function(i){var a,$;return a=re(arguments),$=a,console.log.apply(console,$)},-1),E(l,"$console_warn",function(i){var a,$;return a=re(arguments),$=a,console.warn.apply(console,$)},-1),E(l,"$console_error",function(i){var a,$;return a=re(arguments),$=a,console.error.apply(console,$)},-1),E(l,"$js_string_char_at",function(i,a){return i.charAt(a)}),E(l,"$js_substring",function(i,a,$){return $==null&&($=j),B($)?i.substring(a,$):i.substring(a)},-3),E(l,"$js_split",function(i,a){return i.split(a)}),E(l,"$js_trim",function(i){return i.trim()}),E(l,"$js_includes?",function(i,a){return i.includes(a)}),E(l,"$js_equals?",function(i,a){return i===a}),E(l,"$js_loose_equals?",function(i,a){return i==a}),E(l,"$js_random",function(){return Math.random()}),E(l,"$js_min",function(i,a){return Math.min(i,a)}),E(l,"$js_max",function(i,a){return Math.max(i,a)}),E(l,"$js_abs",function(i){return Math.abs(i)}),E(l,"$js_round",function(i){return Math.round(i)}),E(l,"$js_ceil",function(i){return Math.ceil(i)}),E(l,"$js_to_fixed",function(i,a){return i.toFixed(a)}),E(l,"$random_int",function(i){return Math.floor(Math.random()*i)}),E(l,"$js_floor",function(i){return Math.floor(i)}),E(l,"$js_global_exists?",function(i){return typeof window[i]<"u"}),E(l,"$js_global",function(i){return window[i]}),E(l,"$js_new",function(i,a){var $,n,t=j;return $=re(arguments,1),n=$,B(n["$empty?"]())?new i:(t=Z(n,"map",[],function(s){return s==null&&(s=j),s!=null&&typeof s.$to_n=="function"?s.$to_n():s}),Reflect.construct(i,t))},-2),E(l,"$js_define_method",function b(i){var a=b.$$p||j;return b.$$p=null,this[i.$to_s()]=a}),E(l,"$js_define_method_on",function b(i,a){var $=b.$$p||j;return b.$$p=null,i[a.$to_s()]=$}),E(l,"$js_length",function(i){return i.length}),E(l,"$js_map",function b(i){var a=b.$$p||j;return b.$$p=null,i.map(a)}),E(l,"$js_filter",function b(i){var a=b.$$p||j;return b.$$p=null,i.filter(a)}),E(l,"$js_reduce",function b(i,a){var $=b.$$p||j;return b.$$p=null,i.reduce($,a)}),E(l,"$js_each",function b(i){var a=b.$$p||j;return b.$$p=null,i.forEach(a)}),E(l,"$js_slice",function(i,a,$){return $==null&&($=j),B($)?i.slice(a,$):i.slice(a)},-3),E(l,"$js_object",function(){return{}}),E(l,"$js_keys",function(i){return Object.keys(i)}),E(l,"$js_values",function(i){return Object.values(i)}),E(l,"$js_entries",function(i){return Object.entries(i)}),E(l,"$js_unique_count",function(i){return new Set(i).size}),E(l,"$js_fetch",function(i){return fetch(i)}),E(l,"$fetch_json",function b(i){var a=b.$$p||j;b.$$p=null,fetch(i).then($=>$.json()).then($=>a.$call($)).catch($=>console.error("Fetch error:",$))}),E(l,"$fetch_json_promise",function(i){return fetch(i).then(a=>a.json())}),E(l,"$fetch_json_safe",function(i){return fetch(i).then(function(a){if(!a.ok)throw new Error("Network response was not ok: "+a.status);return a.json()})}),E(l,"$fetch_all_json",function(i){var a=this,$=j;return $=Z(i,"map",[],function n(t){var r=n.$$s==null?this:n.$$s;return t==null&&(t=j),r.$fetch_json_promise(t)},{$$s:a}),Promise.all($)}),E(l,"$fetch_json_with_handlers",function(i,a){var $,n,t=this,r=j;return a=C(a),$=W(a,"on_success"),n=v(a,"on_error"),n==null&&(n=j),r=t.$fetch_json_safe(i),r=Z(t,"js_then",[r],function(u){return u==null&&(u=j),$.$call(u)}),B(n)?Z(t,"js_catch",[r],function(u){return u==null&&(u=j),n.$call(u)}):Z(t,"js_catch",[r],function s(u){var f=s.$$s==null?this:s.$$s;return u==null&&(u=j),f.$console_error("Fetch error:",u)},{$$s:t})}),E(l,"$promise_all",function(i){return Promise.all(i)}),E(l,"$promise_race",function(i){return Promise.race(i)}),E(l,"$promise_resolve",function(i){var a=j;return a=B(i["$respond_to?"]("to_n"))?i.$to_n():i,Promise.resolve(a)}),E(l,"$promise_reject",function(i){return Promise.reject(i)}),E(l,"$js_then",function b(i){var a=b.$$p||j;return b.$$p=null,i.then(a)}),E(l,"$js_catch",function b(i){var a=b.$$p||j;return b.$$p=null,i.catch(a)}),E(l,"$js_finally",function b(i){var a=b.$$p||j;return b.$$p=null,i.finally(a)}),l.$private(),E(l,"$camelize",function(i,a){var $=j,n=j;return a==null&&(a=!0),$=i.$to_s(),B($["$include?"]("_"))?(n=$.$split("_"),B(a)?Z(n,"map",[],"capitalize".$to_proc()).$join():D([n.$first()],Z(n["$[]"]($e(1,-1,!1)),"map",[],"capitalize".$to_proc())).$join()):B(a)?D($["$[]"](0).$upcase(),$["$[]"]($e(1,-1,!1)).$to_s()):D($["$[]"](0).$downcase(),$["$[]"]($e(1,-1,!1)).$to_s())},-2)}(d[0],d)}(F[0],F)}(k[0],k)}(G[0],G),V(G[0],"StimulusHelpers",w(w(w(O("OpalVite"),"Concerns"),"V1"),"StimulusHelpers"))};Opal.modules["services/user_service"]=function(e){var x=e.klass,E=e.const_set,B=e.ensure_kwargs,I=e.get_kwarg,re=e.hash_get,Z=e.send,C=e.truthy,W=e.def,v=[],D=e.nil;return e.add_stubs("include,freeze,fetch_json_safe,js_then,call,js_catch,console_error,fetch_all_json,js_array_at"),function($e,V,G){var O=x($e,V,"UserService"),j=[O].concat(G),w=e.$r(j);return O.$include(w("StimulusHelpers")),E(j[0],"API_BASE","https://jsonplaceholder.typicode.com".$freeze()),W(O,"$fetch_all",function(M){var H,k,P=this,g=D;return M=B(M),H=I(M,"on_success"),k=re(M,"on_error"),k==null&&(k=D),g=P.$fetch_json_safe(""+w("API_BASE")+"/users"),g=Z(P,"js_then",[g],function(F){return F==null&&(F=D),H.$call(F)}),Z(P,"js_catch",[g],function z(F){var q=z.$$s==null?this:z.$$s;return F==null&&(F=D),C(k)?k.$call(F):q.$console_error("UserService: Error fetching users",F)},{$$s:P})}),W(O,"$fetch_with_posts",function(M,H){var k,P,g=this,z=D,F=D;return H=B(H),k=I(H,"on_success"),P=re(H,"on_error"),P==null&&(P=D),z=[""+w("API_BASE")+"/users/"+M,""+w("API_BASE")+"/posts?userId="+M],F=g.$fetch_all_json(z),F=Z(g,"js_then",[F],function q(y){var o=q.$$s==null?this:q.$$s,d=D,S=D;return y==null&&(y=D),d=o.$js_array_at(y,0),S=o.$js_array_at(y,1),k.$call(new Map([["user",d],["posts",S]]))},{$$s:g}),Z(g,"js_catch",[F],function q(y){var o=q.$$s==null?this:q.$$s;return y==null&&(y=D),C(P)?P.$call(y):o.$console_error("UserService: Error fetching user with posts",y)},{$$s:g})}),W(O,"$fetch_one",function(M,H){var k,P,g=this,z=D;return H=B(H),k=I(H,"on_success"),P=re(H,"on_error"),P==null&&(P=D),z=g.$fetch_json_safe(""+w("API_BASE")+"/users/"+M),z=Z(g,"js_then",[z],function(q){return q==null&&(q=D),k.$call(q)}),Z(g,"js_catch",[z],function F(q){var y=F.$$s==null?this:F.$$s;return q==null&&(q=D),C(P)?P.$call(q):y.$console_error("UserService: Error fetching user",q)},{$$s:g})}),W(O,"$fetch_posts",function(M,H){var k,P,g=this,z=D;return H=B(H),k=I(H,"on_success"),P=re(H,"on_error"),P==null&&(P=D),z=g.$fetch_json_safe(""+w("API_BASE")+"/posts?userId="+M),z=Z(g,"js_then",[z],function(q){return q==null&&(q=D),k.$call(q)}),Z(g,"js_catch",[z],function F(q){var y=F.$$s==null?this:F.$$s;return q==null&&(q=D),C(P)?P.$call(q):y.$console_error("UserService: Error fetching posts",q)},{$$s:g})})}(v[0],null,v)};Opal.modules["presenters/user_presenter"]=function(e){var x=e.klass,E=e.truthy,B=e.send,I=e.def,re=[],Z=e.nil;return e.add_stubs("include,create_element,add_class,js_get,set_attr,js_define_method_on,call,set_html,build_card_html,js_each,render_card,to_proc,append_child,js_string_char_at,private,extract_display_data,[]"),function(C,W,v){var D=x(C,W,"UserPresenter"),$e=[D].concat(v),V=e.$r($e);return D.$include(V("StimulusHelpers")),I(D,"$render_card",function G(O){var j=G.$$p||Z,w=this,A=Z,M=Z;return G.$$p=null,A=w.$create_element("div"),w.$add_class(A,"user-card"),M=w.$js_get(O,"id"),w.$set_attr(A,"data-user-id",M),E(j)&&B(w,"js_define_method_on",[A,"onclick"],function(){return j.$call(M)}),w.$set_html(A,w.$build_card_html(O)),A}),I(D,"$render_list",function G(O,j){var w=G.$$p||Z,A=this;return G.$$p=null,A.$set_html(O,""),B(A,"js_each",[j],function M(H){var k=M.$$s==null?this:M.$$s,P=Z;return H==null&&(H=Z),P=B(k,"render_card",[H],w.$to_proc()),k.$append_child(O,P)},{$$s:A})}),I(D,"$append_to",function(O,j){var w=this;return w.$append_child(O,j)}),I(D,"$extract_display_data",function(O){var j=this;return new Map([["id",j.$js_get(O,"id")],["name",j.$js_get(O,"name")],["email",j.$js_get(O,"email")],["phone",j.$js_get(O,"phone")],["website",j.$js_get(O,"website")],["company",j.$js_get(j.$js_get(O,"company"),"name")],["city",j.$js_get(j.$js_get(O,"address"),"city")],["street",j.$js_get(j.$js_get(O,"address"),"street")],["initial",j.$js_string_char_at(j.$js_get(O,"name"),0)]])}),I(D,"$format_address",function(O){var j=this,w=Z,A=Z,M=Z;return w=j.$js_get(O,"address"),A=j.$js_get(w,"street"),M=j.$js_get(w,"city"),""+A+", "+M}),D.$private(),I(D,"$build_card_html",function(O){var j=this,w=Z;return w=j.$extract_display_data(O),`<div class="user-header">
  <div class="user-avatar">`+w["$[]"]("initial")+`</div>
  <div class="user-info">
    <h3>`+w["$[]"]("name")+`</h3>
    <p class="user-email">`+w["$[]"]("email")+`</p>
  </div>
</div>
<div class="user-details">
  <div class="detail-item">
    <span class="detail-label">Company:</span>
    <span class="detail-value">`+w["$[]"]("company")+`</span>
  </div>
  <div class="detail-item">
    <span class="detail-label">City:</span>
    <span class="detail-value">`+w["$[]"]("city")+`</span>
  </div>
  <div class="detail-item">
    <span class="detail-label">Phone:</span>
    <span class="detail-value">`+w["$[]"]("phone")+`</span>
  </div>
</div>
`})}(re[0],null,re)};Opal.modules["presenters/post_presenter"]=function(e){var x=e.klass,E=e.const_set,B=e.ensure_kwargs,I=e.hash_get,re=e.eqeq,Z=e.truthy,C=e.rb_gt,W=e.def,v=e.send,D=e.rb_minus,$e=[],V=e.nil;return e.add_stubs("include,set_html,js_length,==,render_empty_state,render_posts,>,render_more_indicator,create_element,add_class,js_get,build_post_html,private,js_min,times,js_array_at,render_item,append_child,-,set_text"),function(G,O,j){var w=x(G,O,"PostPresenter"),A=[w].concat(j),M=e.$r(A);return w.$include(M("StimulusHelpers")),E(A[0],"DEFAULT_MAX_POSTS",5),W(w,"$render_list",function(k,P,g){var z,F=this,q=V;return g=B(g),z=I(g,"max"),z==null&&(z=M("DEFAULT_MAX_POSTS")),F.$set_html(k,""),q=F.$js_length(P),re(q,0)?F.$render_empty_state(k):(F.$render_posts(k,P,q,z),Z(C(q,z))?F.$render_more_indicator(k,q,z):V)},-3),W(w,"$render_item",function(k){var P=this,g=V,z=V,F=V;return g=P.$create_element("div"),P.$add_class(g,"post-item"),z=P.$js_get(k,"title"),F=P.$js_get(k,"body"),P.$set_html(g,P.$build_post_html(z,F)),g}),W(w,"$extract_display_data",function(k){var P=this;return new Map([["id",P.$js_get(k,"id")],["user_id",P.$js_get(k,"userId")],["title",P.$js_get(k,"title")],["body",P.$js_get(k,"body")]])}),w.$private(),W(w,"$render_empty_state",function(k){var P=this;return P.$set_html(k,'<p class="no-posts">No posts yet</p>')}),W(w,"$render_posts",function(k,P,g,z){var F=this,q=V;return q=F.$js_min(g,z),v(q,"times",[],function y(o){var d=y.$$s==null?this:y.$$s,S=V,h=V;return o==null&&(o=V),S=d.$js_array_at(P,o),h=d.$render_item(S),d.$append_child(k,h)},{$$s:F})}),W(w,"$render_more_indicator",function(k,P,g){var z=this,F=V,q=V;return F=z.$create_element("p"),z.$add_class(F,"more-posts"),q=D(P,g),z.$set_text(F,"+ "+q+" more posts"),z.$append_child(k,F)}),W(w,"$build_post_html",function(k,P){return"<h4>"+k+"</h4><p>"+P+"</p>"})}($e[0],null,$e)};Opal.modules["controllers/users_controller"]=function(e){var x=e.klass,E=e.def,B=e.lambda,I=e.truthy,re=e.send,Z=[],C=e.$r(Z),W=e.nil;return e.add_stubs("include,targets=,puts,new,load_users,event_data_int,fetch_and_show_user,private,show_loading,hide_error,clear_list,fetch_all,handle_users_loaded,handle_load_error,hide_loading,render_users,console_error,show_error,has_target?,get_target,render_list,fetch_with_posts,show_user_modal,handle_user_fetch_error,dispatch_window_event,[],target_set_html,show_target,hide_target,target_set_text"),function(v,D,$e){var V=x(v,D,"UsersController"),G=[V].concat($e),O=e.$r(G),j=V.$$prototype;return j.user_service=j.user_presenter=W,V.$include(O("StimulusHelpers")),V["$targets="](["list","loading","error"]),E(V,"$connect",function(){var A=this;return A.$puts("Users controller connected!"),A.user_service=O("UserService").$new(),A.user_presenter=O("UserPresenter").$new(),A.$load_users()}),E(V,"$reload",function(){var A=this;return A.$load_users()}),E(V,"$show_user",function(){var A=this,M=W;return M=A.$event_data_int("user-id"),A.$fetch_and_show_user(M)}),V.$private(),E(V,"$load_users",function(){var A=this;return A.$show_loading(),A.$hide_error(),A.$clear_list(),A.user_service.$fetch_all(new Map([["on_success",B(function M(H){var k=M.$$s==null?this:M.$$s;return H==null&&(H=W),k.$handle_users_loaded(H)},{$$s:A})],["on_error",B(function M(H){var k=M.$$s==null?this:M.$$s;return H==null&&(H=W),k.$handle_load_error(H)},{$$s:A})]]))}),E(V,"$handle_users_loaded",function(A){var M=this;return M.$hide_loading(),M.$render_users(A)}),E(V,"$handle_load_error",function(A){var M=this;return M.$console_error("Error fetching users:",A),M.$hide_loading(),M.$show_error("Failed to load users. Please try again.")}),E(V,"$render_users",function(A){var M=this,H=W;return I(M["$has_target?"]("list"))?(H=M.$get_target("list"),re(M.user_presenter,"render_list",[H,A],function k(P){var g=k.$$s==null?this:k.$$s;return P==null&&(P=W),g.$fetch_and_show_user(P)},{$$s:M})):W}),E(V,"$fetch_and_show_user",function(A){var M=this;return M.user_service.$fetch_with_posts(A,new Map([["on_success",B(function H(k){var P=H.$$s==null?this:H.$$s;return k==null&&(k=W),P.$show_user_modal(k)},{$$s:M})],["on_error",B(function H(k){var P=H.$$s==null?this:H.$$s;return k==null&&(k=W),P.$handle_user_fetch_error(k)},{$$s:M})]]))}),E(V,"$show_user_modal",function(A){var M=this;return M.$dispatch_window_event("show-user-modal",new Map([["user",A["$[]"]("user")],["posts",A["$[]"]("posts")]]))}),E(V,"$handle_user_fetch_error",function(A){var M=this;return M.$console_error("Error fetching user details:",A),alert("Failed to load user details")}),E(V,"$clear_list",function(){var A=this;return I(A["$has_target?"]("list"))?A.$target_set_html("list",""):W}),E(V,"$show_loading",function(){var A=this;return I(A["$has_target?"]("loading"))?A.$show_target("loading"):W}),E(V,"$hide_loading",function(){var A=this;return I(A["$has_target?"]("loading"))?A.$hide_target("loading"):W}),E(V,"$show_error",function(A){var M=this;return I(M["$has_target?"]("error"))?(M.$target_set_text("error",A),M.$show_target("error")):W}),E(V,"$hide_error",function(){var A=this;return I(A["$has_target?"]("error"))?A.$hide_target("error"):W})}(Z[0],C("StimulusController"),Z)};Opal.modules["controllers/user_modal_controller"]=function(e){var x=e.klass,E=e.def,B=e.truthy,I=e.eqeq,re=e.send,Z=[],C=e.$r(Z),W=e.nil;return e.add_stubs("include,targets=,puts,new,setup_event_listener,element_add_class,add_target_class,lock_body_scroll,element_remove_class,remove_target_class,unlock_body_scroll,event_target,get_target,js_equals?,close,==,event_key,private,on_window_event,js_get,display_user,open,display_user_info,display_user_posts,extract_display_data,has_target?,target_set_text,[],format_address,render_list"),function(v,D,$e){var V=x(v,D,"UserModalController"),G=[V].concat($e),O=e.$r(G),j=V.$$prototype;return j.user_presenter=j.post_presenter=W,V.$include(O("StimulusHelpers")),V["$targets="](["overlay","content","userName","userEmail","userCompany","userAddress","userPhone","userWebsite","postsList"]),E(V,"$connect",function(){var A=this;return A.$puts("User modal controller connected!"),A.user_presenter=O("UserPresenter").$new(),A.post_presenter=O("PostPresenter").$new(),A.$setup_event_listener()}),E(V,"$open",function(){var A=this;return A.$element_add_class("active"),A.$add_target_class("overlay","active"),A.$add_target_class("content","active"),A.$lock_body_scroll()}),E(V,"$close",function(){var A=this;return A.$element_remove_class("active"),A.$remove_target_class("overlay","active"),A.$remove_target_class("content","active"),A.$unlock_body_scroll()}),E(V,"$close_on_overlay",function(){var A=this,M=W,H=W;return M=A.$event_target(),H=A.$get_target("overlay"),B(A["$js_equals?"](M,H))?A.$close():W}),E(V,"$close_on_escape",function(){var A=this;return I(A.$event_key(),"Escape")?A.$close():W}),V.$private(),E(V,"$setup_event_listener",function(){var A=this;return re(A,"on_window_event",["show-user-modal"],function M(H){var k=M.$$s==null?this:M.$$s,P=W,g=W,z=W;return H==null&&(H=W),P=k.$js_get(H,"detail"),g=k.$js_get(P,"user"),z=k.$js_get(P,"posts"),k.$display_user(g,z),k.$open()},{$$s:A})}),E(V,"$display_user",function(A,M){var H=this;return H.$display_user_info(A),H.$display_user_posts(M)}),E(V,"$display_user_info",function(A){var M=this,H=W,k=W;return H=M.user_presenter.$extract_display_data(A),B(M["$has_target?"]("userName"))&&M.$target_set_text("userName",H["$[]"]("name")),B(M["$has_target?"]("userEmail"))&&M.$target_set_text("userEmail",H["$[]"]("email")),B(M["$has_target?"]("userCompany"))&&M.$target_set_text("userCompany",H["$[]"]("company")),B(M["$has_target?"]("userPhone"))&&M.$target_set_text("userPhone",H["$[]"]("phone")),B(M["$has_target?"]("userWebsite"))&&M.$target_set_text("userWebsite",H["$[]"]("website")),B(M["$has_target?"]("userAddress"))?(k=M.user_presenter.$format_address(A),M.$target_set_text("userAddress",k)):W}),E(V,"$display_user_posts",function(A){var M=this,H=W;return B(M["$has_target?"]("postsList"))?(H=M.$get_target("postsList"),M.post_presenter.$render_list(H,A,new Map([["max",5]]))):W})}(Z[0],C("StimulusController"),Z)};Opal.queue(function(e){var x=e.top,E=[],B=e.$r(E);return e.nil,e.add_stubs("require,puts,register_all!"),x.$require("native"),x.$require("opal_stimulus/stimulus_controller"),x.$require("opal_vite/concerns/v1/stimulus_helpers"),x.$require("services/user_service"),x.$require("presenters/user_presenter"),x.$require("presenters/post_presenter"),x.$require("controllers/users_controller"),x.$require("controllers/user_modal_controller"),x.$puts("API Example - Opal + Fetch API"),x.$puts("Ruby version: "+B("RUBY_VERSION")),x.$puts("Architecture: Service + Presenter pattern"),B("StimulusController")["$register_all!"](),x.$puts("All controllers registered!")});
