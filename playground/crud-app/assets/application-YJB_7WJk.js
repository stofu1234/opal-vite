Opal.modules.native=function($){var z=$.hash_put,w=$.module,D=$.defs,k=$.slice,ee=$.truthy,J=$.send,C=$.Kernel,W=$.extract_kwargs,m=$.ensure_kwargs,B=$.hash_get,ie=$.range,X=$.to_a,U=$.def,te=$.return_ivar,Z=$.alias,A=$.klass,p=$.rb_minus,P=$.return_val,V=$.send2,M=$.find_super,L=$.eqeqeq,g=$.rb_ge,q=$.return_self,R=$.gvars,x=$.top,E=[],u=$.$r(E),d=$.nil,I=$.$$$;return $.add_stubs("try_convert,native?,respond_to?,to_n,raise,inspect,Native,proc,map!,end_with?,define_method,[],convert,call,to_proc,new,each,native_reader,native_writer,extend,warn,include,is_a?,map,Array,to_a,_Array,method_missing,bind,instance_method,[]=,slice,-,length,has_key?,enum_for,===,>=,<<,each_pair,method_defined?,initialize,_initialize,name,native_module"),function(h,c){var l=w(h,"Native"),y=[l].concat(c),K=$.$r(y);return D(l,"$is_a?",function(s,n){var r=this;try{return s instanceof r.$try_convert(n)}catch{return!1}}),D(l,"$try_convert",function(s,n){var r=this;return n==null&&(n=d),r["$native?"](s)?s:s["$respond_to?"]("to_n")?s.$to_n():n},-2),D(l,"$convert",function(s){var n=this;if(n["$native?"](s))return s;if(s["$respond_to?"]("to_n"))return s.$to_n();n.$raise(K("ArgumentError"),""+s.$inspect()+" isn't native")}),D(l,"$call",function _(s,n,r){var e=_.$$p||d,t,i,a=this;_.$$p=null,t=k(arguments,2),i=t;var o=s[n];if(o instanceof Function){for(var v=new Array(i.length),S=0,j=i.length;S<j;S++){var T=i[S],Y=a.$try_convert(T);v[S]=Y===d?T:Y}return e!==d&&v.push(e),a.$Native(o.apply(s,v))}else return a.$Native(o)},-3),D(l,"$proc",function _(){var s=_.$$p||d,n=this;return _.$$p=null,ee(s)||n.$raise(K("LocalJumpError"),"no block given"),J(C,"proc",[],function r(e){var t,i,a=r.$$s==null?this:r.$$s,o=d;if(t=k(arguments),i=t,J(i,"map!",[],function S(j){var T=S.$$s==null?this:S.$$s;return j==null&&(j=d),T.$Native(j)},{$$s:a}),o=a.$Native(this),this===$.global)return s.apply(a,i);var v=s.$$s;s.$$s=null;try{return s.apply(o,i)}finally{s.$$s=v}},{$$arity:-1,$$s:n})}),function(_,s){var n=w(_,"Helpers"),r=[n].concat(s),e=$.$r(r);return U(n,"$alias_native",function t(i,a,o){var v,S,j,T;t.$$p;var Y=this;return t.$$p=null,v=k(arguments,1),S=W(v),S=m(S),v.length>0&&(j=v.shift()),j==null&&(j=i),T=B(S,"as"),T==null&&(T=d),ee(j["$end_with?"]("="))?J(Y,"define_method",[i],function O(ae){var le=O.$$s==null?this:O.$$s;return le.native==null&&(le.native=d),ae==null&&(ae=d),le.native[j["$[]"](ie(0,-2,!1))]=e("Native").$convert(ae),ae},{$$s:Y}):ee(T)?J(Y,"define_method",[i],function O(ae){var le=O.$$p||d,_e,de,ge=O.$$s==null?this:O.$$s,ve=d;return ge.native==null&&(ge.native=d),O.$$p=null,_e=k(arguments),de=_e,ve=J(e("Native"),"call",[ge.native,j].concat(X(de)),le.$to_proc()),ee(ve)?T.$new(ve.$to_n()):d},{$$arity:-1,$$s:Y}):J(Y,"define_method",[i],function O(ae){var le=O.$$p||d,_e,de,ge=O.$$s==null?this:O.$$s;return ge.native==null&&(ge.native=d),O.$$p=null,_e=k(arguments),de=_e,J(e("Native"),"call",[ge.native,j].concat(X(de)),le.$to_proc())},{$$arity:-1,$$s:Y})},-2),U(n,"$native_reader",function(i){var a,o,v=this;return a=k(arguments),o=a,J(o,"each",[],function S(j){var T=S.$$s==null?this:S.$$s;return j==null&&(j=d),J(T,"define_method",[j],function Y(){var O=Y.$$s==null?this:Y.$$s;return O.native==null&&(O.native=d),O.$Native(O.native[j])},{$$s:T})},{$$s:v})},-1),U(n,"$native_writer",function(i){var a,o,v=this;return a=k(arguments),o=a,J(o,"each",[],function S(j){var T=S.$$s==null?this:S.$$s;return j==null&&(j=d),J(T,"define_method",[""+j+"="],function Y(O){var ae=Y.$$s==null?this:Y.$$s;return ae.native==null&&(ae.native=d),O==null&&(O=d),ae.$Native(ae.native[j]=O)},{$$s:T})},{$$s:v})},-1),U(n,"$native_accessor",function(i){var a,o,v=this;return a=k(arguments),o=a,J(v,"native_reader",X(o)),J(v,"native_writer",X(o))},-1)}(y[0],y),function(_,s){var n=w(_,"Wrapper"),r=[n].concat(s),e=$.$r(r);return U(n,"$initialize",function(i){var a=this;return ee(C["$native?"](i))||C.$raise(e("ArgumentError"),""+i.$inspect()+" isn't native"),a.native=i}),U(n,"$to_n",te("native")),D(n,"$included",function(i){return i.$extend(e("Helpers"))})}(y[0],y),D(l,"$included",function(s){var n=this;return n.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),s.$include(K("Wrapper"))})}(E[0],E),function(h,c){var l=w(h,"Kernel"),y=[l].concat(c),K=$.$r(y);return U(l,"$native?",function(s){return s==null||!s.$$class}),U(l,"$Native",function _(s){_.$$p;var n=this;return _.$$p=null,ee(s==null)?d:ee(n["$native?"](s))?I(K("Native"),"Object").$new(s):ee(s["$is_a?"](K("Array")))?J(s,"map",[],function r(e){var t=r.$$s==null?this:r.$$s;return e==null&&(e=d),t.$Native(e)},{$$s:n}):ee(s["$is_a?"](K("Proc")))?J(n,"proc",[],function r(e){var t=r.$$p||d,i,a,o=r.$$s==null?this:r.$$s;return r.$$p=null,i=k(arguments),a=i,o.$Native(J(s,"call",X(a),t.$to_proc()))},{$$arity:-1,$$s:n}):s}),Z(l,"_Array","Array"),U(l,"$Array",function _(s,n){var r=_.$$p||d,e,t,i=this;return _.$$p=null,e=k(arguments,1),t=e,ee(i["$native?"](s))?J(I(K("Native"),"Array"),"new",[s].concat(X(t)),r.$to_proc()).$to_a():i.$_Array(s)},-2)}(E[0],E),function(h,c){var l=A(h,c,"Object"),y=l.$$prototype;return y.native=d,l.$include(I(I("Native"),"Wrapper")),U(l,"$==",function(_){var s=this;return s.native===I("Native").$try_convert(_)}),U(l,"$has_key?",function(_){var s=this;return $.hasOwnProperty.call(s.native,_)}),U(l,"$each",function K(_){var s,n,r=K.$$p||d,e=this;if(K.$$p=null,s=k(arguments),n=s,r!==d){for(var t in e.native)$.yieldX(r,[t,e.native[t]]);return e}else return J(e,"method_missing",["each"].concat(X(n)))},-1),U(l,"$[]",function(_){var s=this,n=s.native[_];return n instanceof Function?n:I("Native").$call(s.native,_)}),U(l,"$[]=",function(_,s){var n=this,r=d;return r=I("Native").$try_convert(s),ee(r===d)?n.native[_]=s:n.native[_]=r}),U(l,"$merge!",function(_){var s=this;_=I("Native").$convert(_);for(var n in _)s.native[n]=_[n];return s}),U(l,"$respond_to?",function(_,s){var n=this;return s==null&&(s=!1),C.$instance_method("respond_to?").$bind(n).$call(_,s)},-2),U(l,"$respond_to_missing?",function(_,s){var n=this;return $.hasOwnProperty.call(n.native,_)},-2),U(l,"$method_missing",function K(_,s){var n=K.$$p||d,r,e,t,i=this;return K.$$p=null,r=k(arguments,1),e=r,_.charAt(_.length-1)==="="?(t=[_.$slice(0,p(_.$length(),1)),e["$[]"](0)],J(i,"[]=",t),t[t.length-1]):J(I("Native"),"call",[i.native,_].concat(X(e)),n.$to_proc())},-2),U(l,"$nil?",P(!1)),U(l,"$is_a?",function(_){var s=this;return $.is_a(s,_)}),U(l,"$instance_of?",function(_){var s=this;return s.$$class===_}),U(l,"$class",function(){var _=this;return _.$$class}),U(l,"$to_a",function K(_){var s=K.$$p||d,n=this;return K.$$p=null,_==null&&(_=new Map),J(I(I("Native"),"Array"),"new",[n.native,_],s.$to_proc()).$to_a()},-1),U(l,"$inspect",function(){var _=this;return"#<Native:"+String(_.native)+">"}),Z(l,"include?","has_key?"),Z(l,"key?","has_key?"),Z(l,"kind_of?","is_a?"),Z(l,"member?","has_key?")}(u("Native"),u("BasicObject")),function(h,c,l){var y=A(h,c,"Array"),K=[y].concat(l),_=$.$r(K),s=y.$$prototype;return s.named=s.native=s.get=s.block=s.set=s.length=d,y.$include(I(_("Native"),"Wrapper")),y.$include(_("Enumerable")),U(y,"$initialize",function n(r,e){var t=n.$$p||d,i=this,a=d;return n.$$p=null,e==null&&(e=new Map),V(i,M(i,"initialize",n,!1,!0),"initialize",[r],null),i.get=ee(a=e["$[]"]("get"))?a:e["$[]"]("access"),i.named=e["$[]"]("named"),i.set=ee(a=e["$[]"]("set"))?a:e["$[]"]("access"),i.length=ee(a=e["$[]"]("length"))?a:"length",i.block=t,ee(i.$length()==null)?i.$raise(_("ArgumentError"),"no length found on the array-like object"):d},-2),U(y,"$each",function n(){var r=n.$$p||d,e=this;if(n.$$p=null,!ee(r))return e.$enum_for("each");for(var t=0,i=e.$length();t<i;t++)$.yield1(r,e["$[]"](t));return e}),U(y,"$[]",function(r){var e=this,t=d,i=d;return t=L(_("String"),i=r)||L(_("Symbol"),i)?ee(e.named)?e.native[e.named](r):e.native[r]:L(_("Integer"),i)?ee(e.get)?e.native[e.get](r):e.native[r]:d,ee(t)?ee(e.block)?e.block.$call(t):e.$Native(t):d}),U(y,"$[]=",function(r,e){var t=this;return ee(t.set)?t.native[t.set](r,_("Native").$convert(e)):t.native[r]=_("Native").$convert(e)}),U(y,"$last",function(r){var e=this,t=d,i=d;if(r==null&&(r=d),ee(r)){for(t=p(e.$length(),1),i=[];ee(g(t,0));)i["$<<"](e["$[]"](t)),t=p(t,1);return i}else return e["$[]"](p(e.$length(),1))},-1),U(y,"$length",function(){var r=this;return r.native[r.length]}),U(y,"$inspect",function(){var r=this;return r.$to_a().$inspect()}),Z(y,"to_ary","to_a")}(u("Native"),null,E),function(h,c){var l=A(h,c,"Numeric");return U(l,"$to_n",function(){var K=this;return K.valueOf()})}(E[0],null),function(h,c){var l=A(h,c,"Proc");return U(l,"$to_n",q)}(E[0],null),function(h,c){var l=A(h,c,"String");return U(l,"$to_n",function(){var K=this;return K.valueOf()})}(E[0],null),function(h,c){var l=A(h,c,"Regexp");return U(l,"$to_n",function(){var K=this;return K.valueOf()})}(E[0],null),function(h,c){var l=A(h,c,"MatchData");return U(l,"$to_n",te("matches"))}(E[0],null),function(h,c,l){var y=A(h,c,"Struct"),K=[y].concat(l),_=$.$r(K);return U(y,"$to_n",function(){var n=this,r=d;return r={},J(n,"each_pair",[],function(t,i){return t==null&&(t=d),i==null&&(i=d),r[t]=_("Native").$try_convert(i,i)}),r})}(E[0],null,E),function(h,c,l){var y=A(h,c,"Array"),K=[y].concat(l),_=$.$r(K);return U(y,"$to_n",function(){for(var n=this,r=[],e=0,t=n.length;e<t;e++){var i=n[e];r.push(_("Native").$try_convert(i,i))}return r})}(E[0],null,E),function(h,c){var l=A(h,c,"Boolean");return U(l,"$to_n",function(){var K=this;return K.valueOf()})}(E[0],null),function(h,c){var l=A(h,c,"Time");return U(l,"$to_n",q)}(E[0],null),function(h,c){var l=A(h,c,"NilClass");return U(l,"$to_n",function(){return null})}(E[0],null),ee(u("Hash")["$method_defined?"]("_initialize"))||function(h,c,l){var y=A(h,c,"Hash"),K=[y].concat(l),_=$.$r(K);Z(y,"_initialize","initialize");function s(n,r,e){e&&(e.constructor===void 0||e.constructor===Object||e instanceof Map)?z(n,r,_("Hash").$new(e)):e&&e.$$is_array?(e=e.map(function(t){return t&&(t.constructor===void 0||t.constructor===Object||e instanceof Map)?_("Hash").$new(t):y.$Native(t)}),z(n,r,e)):z(n,r,y.$Native(e))}return U(y,"$initialize",function n(r){var e=n.$$p||d,t=this;if(n.$$p=null,r!=null)if(r.constructor===void 0||r.constructor===Object){var i,a;for(i in r)a=r[i],s(t,i,a);return t}else r instanceof Map&&$.hash_each(r,!1,function(o,v){return s(t,o,v),[!1,!1]});return J(t,"_initialize",[r],e.$to_proc())},-1),U(y,"$to_n",function(){var r=this,e={};return $.hash_each(r,!1,function(t,i){return e[_("Native").$try_convert(t,t)]=_("Native").$try_convert(i,i),[!1,!1]}),e})}(E[0],null,E),function(h,c){var l=A(h,c,"Module");return U(l,"$native_module",function(){var K=this;return $.global[K.$name()]=K})}(E[0],null),function(h,c,l){var y=A(h,c,"Class"),K=[y].concat(l),_=$.$r(K);return U(y,"$native_alias",function(n,r){var e=this,t=e.prototype[$.jsid(r)];t||e.$raise(_("NameError").$new("undefined method `"+r+"' for class `"+e.$inspect()+"'",r)),e.prototype[n]=t}),U(y,"$native_class",function(){var n=this;return n.$native_module(),n.new=n.$new})}(E[0],null,E),R.$=R.global=x.$Native($.global)};(function($){var z;if(typeof globalThis<"u"?$=globalThis:typeof global<"u"?$=global:typeof window<"u"&&($=window),$.console==null&&($.console={}),typeof $.console=="object"?z=$.console:z={},"log"in z||(z.log=function(){}),"warn"in z||(z.warn=z.log),typeof $.Opal<"u")return z.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),$.Opal;var w,D,k,ee,J,C,W,m=$.Opal={};m.global=$,m.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var B=Function.prototype.call,ie=Function.prototype.bind,X=Object.hasOwn||B.bind(Object.prototype.hasOwnProperty),U=Object.setPrototypeOf,te=B.bind(Array.prototype.slice),Z=B.bind(Array.prototype.splice),A=4,p=A;function P(){return p+=2,p}m.uid=P,m.id=function(f){return f.$$is_number?f*2+1:(f.$$id==null&&g(f,"$$id",P()),f.$$id)};var V=m.gvars={};m.exit=function(f){V.DEBUG&&z.log("Exited with status "+f)},m.exceptions=[],m.pop_exception=function(f){var b=m.exceptions.pop();b===f||(b?V["!"]=b:V["!"]=w)};function M(f,b){if(f||(f=m.Exception||Error),W&&W.$raise)arguments.length>2?W.$raise(f.$new.apply(f,te(arguments,1))):W.$raise(f,b);else throw f.$new?f.$new(b):new f(b)}var L={value:void 0,enumerable:!1,configurable:!0,writable:!0};function g(f,b,H){typeof f=="string"?f[b]=H:(L.value=H,Object.defineProperty(f,b,L))}m.prop=g,m.defineProperty=m.prop,m.slice=te;var q=m.truthy=function(f){return f!==!1&&w!==f&&f!==void 0&&f!==null&&(!(f instanceof Boolean)||f.valueOf()===!0)};m.falsy=function(f){return!q(f)},m.type_error=function(f,b,H,re){f=f.$$class,re&&H?(re=re.$$class,M(m.TypeError,"can't convert "+f+" into "+b+" ("+f+"#"+H+" gives "+re+")")):M(m.TypeError,"no implicit conversion of "+f+" into "+b)},m.coerce_to=function(f,b,H,re){var ue;return H==="to_int"&&b===m.Integer&&f.$$is_number?f<0?Math.ceil(f):Math.floor(f):H==="to_str"&&b===m.String&&f.$$is_string||m.is_a(f,b)?f:f["$respond_to?"].$$pristine&&f.$method_missing.$$pristine?(ue=f[de(H)],(ue==null||ue.$$stub)&&m.type_error(f,b),ue.apply(f,re)):(f["$respond_to?"](H)||m.type_error(f,b),re==null&&(re=[]),m.send(f,H,re))},m.respond_to=function(f,b,H){if(f==null||!f.$$class)return!1;H=!!H;var re=f[b];if(f["$respond_to?"].$$pristine){if(typeof re=="function"&&!re.$$stub)return!0;if(!f["$respond_to_missing?"].$$pristine)return m.send(f,f["$respond_to_missing?"],[b.substr(1),H])}else return m.send(f,f["$respond_to?"],[b.substr(1),H])},m.trace_class=!1,m.tracers_for_class=[];function R(f){var b,H,re;for(b=0,H=m.tracers_for_class.length;b<H;b++)re=m.tracers_for_class[b],re.trace_object=f,re.block.$call(re)}function x(f,b){if(f.$$autoload[b].loaded){if(f.$$autoload[b].loaded&&!f.$$autoload[b].required&&f.$$autoload[b].exception)throw f.$$autoload[b].exception}else{f.$$autoload[b].loaded=!0;try{m.Kernel.$require(f.$$autoload[b].path)}catch(H){throw f.$$autoload[b].exception=H,H}if(f.$$autoload[b].required=!0,f.$$const[b]!=null)return f.$$autoload[b].success=!0,f.$$const[b]}}function E(f,b){if(f){if(f.$$const[b]!=null)return f.$$const[b];if(f.$$autoload&&f.$$autoload[b])return x(f,b)}}function u(f,b){var H,re,ue;if(f.length!==0)for(H=0,re=f.length;H<re;H++){if(ue=f[H].$$const[b],ue!=null)return ue;if(f[H].$$autoload&&f[H].$$autoload[b])return x(f[H],b)}}function d(f,b){var H,re,ue;if(f!=null)for(ue=Y(f),H=0,re=ue.length;H<re;H++){if(ue[H].$$const&&X(ue[H].$$const,b))return ue[H].$$const[b];if(ue[H].$$autoload&&ue[H].$$autoload[b])return x(ue[H],b)}}function I(f,b){if(f==null||f.$$is_module)return d(k,b)}function h(f,b){return(f||k).$const_missing(b)}m.const_get_local=function(f,b,H){var re;if(f!=null)return f==="::"&&(f=k),!f.$$is_module&&!f.$$is_class&&M(m.TypeError,f.toString()+" is not a class/module"),re=E(f,b),re!=null||H?re:h(f,b)},m.const_get_qualified=function(f,b,H){var re,ue,ce,he=m.const_cache_version;if(b==null)return re=E(k,f),re??m.const_get_qualified(k,f,H);if(f!=null)return f==="::"&&(f=k),!f.$$is_module&&!f.$$is_class&&M(m.TypeError,f.toString()+" is not a class/module"),(ue=f.$$const_cache)==null&&(g(f,"$$const_cache",Object.create(null)),ue=f.$$const_cache),ce=ue[b],ce==null||ce[0]!==he?((re=E(f,b))!=null||(re=d(f,b))!=null,ue[b]=[he,re]):re=ce[1],re!=null||H?re:h(f,b)},m.const_cache_version=1,m.const_get_relative=function(f,b,H){var re=f[0],ue,ce=m.const_cache_version,he,pe;return(he=f.$$const_cache)==null&&(g(f,"$$const_cache",Object.create(null)),he=f.$$const_cache),pe=he[b],pe==null||pe[0]!==ce?((ue=E(re,b))!=null||(ue=u(f,b))!=null||(ue=d(re,b))!=null||(ue=I(re,b))!=null,he[b]=[ce,ue]):ue=pe[1],ue!=null||H?ue:h(re,b)};function c(f,b,H){var re=!0;return(f==null||f==="::")&&(f=k),H.$$is_a_module&&((H.$$name==null||H.$$name===w)&&(H.$$name=b),H.$$base_module==null&&(H.$$base_module=f)),f.$$const=f.$$const||Object.create(null),(b in f.$$const||"$$autoload"in f&&b in f.$$autoload)&&(re=!1),f.$$const[b]=H,f.$$=f.$$const,m.const_cache_version++,f===k&&(m[b]=H),g(f,b,H),re&&f.$const_added&&!f.$const_added.$$pristine&&f.$const_added(b),H}m.const_set=c,m.constants=function(f,b){b==null&&(b=!0);var H,re=[f],ue,ce,he={},pe;for(b&&(re=re.concat(Y(f))),b&&f.$$is_module&&(re=re.concat([m.Object]).concat(Y(m.Object))),ue=0,ce=re.length;ue<ce&&(H=re[ue],!(f!==k&&H==k));ue++){for(pe in H.$$const)he[pe]=!0;if(H.$$autoload)for(pe in H.$$autoload)he[pe]=!0}return Object.keys(he)},m.const_remove=function(f,b){if(m.const_cache_version++,f.$$const[b]!=null){var H=f.$$const[b];return delete f.$$const[b],H}if(f.$$autoload&&f.$$autoload[b])return delete f.$$autoload[b],w;M(m.NameError,"constant "+f+"::"+f.$name()+" not defined")},m.const_get_relative_factory=function(f){return function(b,H){return m.$$(f,b,H)}},m.$$=m.const_get_relative,m.$$$=m.const_get_qualified,m.$r=m.const_get_relative_factory;function l(f){return f==null?!1:f.$$bridge?f:f.$$super?l(f.$$super):!1}function y(f,b,H){var re,ue;if((ue=l(b))?re=function(){var ye=new(ie.apply(ue.$$constructor,ge(null,arguments)));return U(ye,re.$$prototype),ye}:re=function(){},f&&f!==w&&g(re,"displayName","::"+f),g(re,"$$name",f),g(re,"$$constructor",re),g(re,"$$prototype",re.prototype),g(re,"$$const",{}),g(re,"$$is_class",!0),g(re,"$$is_a_module",!0),g(re,"$$super",b),g(re,"$$cvars",{}),g(re,"$$own_included_modules",[]),g(re,"$$own_prepended_modules",[]),g(re,"$$ancestors",[]),g(re,"$$ancestors_cache_version",null),g(re,"$$subclasses",[]),g(re,"$$cloned_from",[]),g(re.$$prototype,"$$class",re),m.Class&&U(re,m.Class.prototype),b!=null){if(U(re.$$prototype,b.$$prototype),H!==!0)if(typeof WeakRef<"u"){var ce,he,pe=[];for(ce=0;ce<b.$$subclasses.length;ce++)he=b.$$subclasses[ce],he.deref()!==void 0&&pe.push(he);pe.push(new WeakRef(re)),b.$$subclasses=pe}else b.$$subclasses.push(re);b.$$meta&&m.build_class_singleton_class(re)}return re}m.allocate_class=y;function K(f,b){var H=E(f,b);if(H)return H.$$is_class||M(m.TypeError,b+" is not a class"),H}function _(f,b){f.$$super!==b&&M(m.TypeError,"superclass mismatch for class "+f.$$name)}m.klass=function(f,b,H){var re;f==null||f=="::"?f=k:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),b!=null&&(!b.hasOwnProperty||b.hasOwnProperty&&!b.hasOwnProperty("$$is_class"))&&(b.constructor&&b.constructor.name=="Function"?(re=b,b=k):M(m.TypeError,"superclass must be a Class ("+(b.constructor&&(b.constructor.name||b.constructor.$$name)||typeof b)+" given)"));var ue=K(f,H);return ue!=null?b&&_(ue,b):(b==null&&(b=k),ue=y(H,b),c(f,H,ue),b.$inherited&&b.$inherited(ue),re&&m.bridge(re,ue)),m.trace_class&&R(ue),ue};function s(f){var b=function(){},H=b;return f&&g(b,"displayName",f+".constructor"),g(H,"$$name",f),g(H,"$$prototype",b.prototype),g(H,"$$const",{}),g(H,"$$is_module",!0),g(H,"$$is_a_module",!0),g(H,"$$cvars",{}),g(H,"$$iclasses",[]),g(H,"$$own_included_modules",[]),g(H,"$$own_prepended_modules",[]),g(H,"$$ancestors",[H]),g(H,"$$ancestors_cache_version",null),g(H,"$$cloned_from",[]),U(H,m.Module.prototype),H}m.allocate_module=s;function n(f,b){var H=E(f,b);return H==null&&f===k&&(H=d(k,b)),H&&!H.$$is_module&&H!==k&&M(m.TypeError,b+" is not a module"),H}m.module=function(f,b){var H;return f==null||f=="::"?f=k:!f.$$is_class&&!f.$$is_module&&(f=f.$$class),H=n(f,b),H==null&&(H=s(b),c(f,b,H)),m.trace_class&&R(H),H},m.get_singleton_class=function(f){return f.$$is_number&&M(m.TypeError,"can't define singleton"),f.$$meta?f.$$meta:f.hasOwnProperty("$$is_class")?m.build_class_singleton_class(f):f.hasOwnProperty("$$is_module")?m.build_module_singleton_class(f):m.build_object_singleton_class(f)};function r(f,b){f.hasOwnProperty("$$meta")?f.$$meta=b:g(f,"$$meta",b),f.$$frozen?f.$$meta.$freeze():U(f,b.$$prototype)}m.build_class_singleton_class=function(f){if(f.$$meta)return f.$$meta;var b=f===D?J:m.get_singleton_class(f.$$super),H=y(null,b,!0);return g(H,"$$is_singleton",!0),g(H,"$$singleton_of",f),r(f,H),g(f,"$$class",m.Class),H},m.build_module_singleton_class=function(f){if(f.$$meta)return f.$$meta;var b=y(null,m.Module,!0);return g(b,"$$is_singleton",!0),g(b,"$$singleton_of",f),r(f,b),g(f,"$$class",m.Module),b},m.build_object_singleton_class=function(f){var b=f.$$class,H=y(w,b,!0);return g(H,"$$is_singleton",!0),g(H,"$$singleton_of",f),delete H.$$prototype.$$class,r(f,H),H},m.is_method=function(f){return f[0]==="$"&&f[1]!=="$"},m.instance_methods=function(f){for(var b=Object.create(null),H=[],re=Y(f),ue=0,ce=re.length;ue<ce;ue++){var he=re[ue],pe=he.$$prototype;pe.hasOwnProperty("$$dummy")&&(pe=pe.$$define_methods_on);for(var ye=Object.getOwnPropertyNames(pe),we=0,ze=ye.length;we<ze;we++){var Ee=ye[we];if(!b[Ee]){if(m.is_method(Ee)){var xe=pe[Ee];if(!xe.$$stub){var qe=Ee.slice(1);H.push(qe)}}b[Ee]=!0}}}return H},m.own_instance_methods=function(f){var b=[],H=f.$$prototype;H.hasOwnProperty("$$dummy")&&(H=H.$$define_methods_on);for(var re=Object.getOwnPropertyNames(H),ue=0,ce=re.length;ue<ce;ue++){var he=re[ue];if(m.is_method(he)){var pe=H[he];if(!pe.$$stub){var ye=he.slice(1);b.push(ye)}}}return b},m.methods=function(f){return m.instance_methods(f.$$meta||f.$$class)},m.own_methods=function(f){return f.$$meta?m.own_instance_methods(f.$$meta):[]},m.receiver_methods=function(f){var b=m.get_singleton_class(f),H=m.own_instance_methods(b),re=m.own_instance_methods(b.$$super);return H.concat(re)},m.class_variables=function(f){var b=Y(f),H,re=b.length,ue={};for(H=re-1;H>=0;H--){var ce=b[H];for(var he in ce.$$cvars)ue[he]=ce.$$cvars[he]}return ue},m.class_variable_set=function(f,b,H){var re=Y(f),ue,ce=re.length;for(ue=ce-2;ue>=0;ue--){var he=re[ue];if(X(he.$$cvars,b))return he.$$cvars[b]=H,H}return f.$$cvars[b]=H,H},m.class_variable_get=function(f,b,H){if(X(f.$$cvars,b))return f.$$cvars[b];var re=Y(f),ue,ce=re.length;for(ue=0;ue<ce;ue++){var he=re[ue];if(X(he.$$cvars,b))return he.$$cvars[b]}return H||M(m.NameError,"uninitialized class variable "+b+" in "+f.$name()),w};function e(f){return f.hasOwnProperty("$$iclass")&&f.hasOwnProperty("$$root")}function t(f){for(var b=[],H,re=Object.getPrototypeOf(f.$$prototype);re&&!re.hasOwnProperty("$$class");)H=j(re),H&&b.push(H),re=Object.getPrototypeOf(re);return b}function i(f){var b=[],H,re=Object.getPrototypeOf(f.$$prototype);if(f.$$prototype.hasOwnProperty("$$dummy"))for(;re&&re!==f.$$prototype.$$define_methods_on;)H=j(re),H&&b.push(H),re=Object.getPrototypeOf(re);return b}m.append_features=function(f,b){var H=Y(f),re=[];H.indexOf(b)!==-1&&M(m.ArgumentError,"cyclic include detected");for(var ue=0,ce=H.length;ue<ce;ue++){var he=H[ue],pe=o(he);g(pe,"$$included",!0),re.push(pe)}var ye=Y(b),we=S(re),ze,Ee;if(ye.indexOf(f)===-1)ze=b.$$prototype,Ee=Object.getPrototypeOf(b.$$prototype);else{for(var xe=b.$$prototype,qe=Object.getPrototypeOf(xe);qe!=null&&!(qe.$$module===f&&e(qe));)xe=qe,qe=Object.getPrototypeOf(qe);if(qe){for(var Ae=Object.getPrototypeOf(qe);Ae.hasOwnProperty("$$iclass")&&!e(Ae);)Ae=Object.getPrototypeOf(Ae);ze=xe,Ee=Ae}else ze=b.$$prototype,Ee=Object.getPrototypeOf(b.$$prototype)}U(ze,we.first),U(we.last,Ee),b.$$own_included_modules=t(b),m.const_cache_version++},m.prepend_features=function(f,b){var H=Y(f),re=[];H.indexOf(b)!==-1&&M(m.ArgumentError,"cyclic prepend detected");for(var ue=0,ce=H.length;ue<ce;ue++){var he=H[ue],pe=o(he);g(pe,"$$prepended",!0),re.push(pe)}var ye=S(re),we=b.$$prototype,ze=Object.getPrototypeOf(we),Ee,xe,qe;we.hasOwnProperty("$$dummy")?Ee=we.$$define_methods_on:(Ee=v(b),a(b),g(we,"$$dummy",!0),g(we,"$$define_methods_on",Ee),U(we,Ee),U(Ee,ze));var Ae=Y(b);if(Ae.indexOf(f)===-1)for(xe=we,qe=Object.getPrototypeOf(we);qe!=null&&!(qe.hasOwnProperty("$$root")||qe===Ee||!qe.hasOwnProperty("$$iclass"));)qe=Object.getPrototypeOf(qe);else M(m.RuntimeError,"Prepending a module multiple times is not supported");U(xe,ye.first),U(ye.last,qe),b.$$own_prepended_modules=i(b),m.const_cache_version++};function a(f){for(var b=f.$$prototype,H=Object.getOwnPropertyNames(b),re=0;re<H.length;re++){var ue=H[re];m.is_method(ue)&&delete b[ue]}}function o(f){var b=v(f);return f.$$is_module&&f.$$iclasses.push(b),b}function v(f){var b={},H=f.$$prototype;H.hasOwnProperty("$$dummy")&&(H=H.$$define_methods_on);var re=Object.getOwnPropertyNames(H),ue=re.length,ce;for(ce=0;ce<ue;ce++){var he=re[ce];g(b,he,H[he])}return g(b,"$$iclass",!0),g(b,"$$module",f),b}function S(f){var b=f.length,H=f[0];if(g(H,"$$root",!0),b===1)return{first:H,last:H};for(var re=H,ue=1;ue<b;ue++){var ce=f[ue];U(re,ce),re=ce}return{first:f[0],last:f[b-1]}}m.bridge=function(f,b){f.hasOwnProperty("$$bridge")&&M(m.ArgumentError,"already bridged"),g(f,"$$bridge",b),U(f.prototype,(b.$$super||m.Object).$$prototype),g(b,"$$prototype",f.prototype),g(b.$$prototype,"$$class",b),g(b,"$$constructor",f),g(b,"$$bridge",!0)};function j(f){if(!f.hasOwnProperty("$$dummy")){if(f.hasOwnProperty("$$iclass"))return f.$$module;if(f.hasOwnProperty("$$class"))return f.$$class}}function T(f){return f.$$own_prepended_modules.concat([f]).concat(f.$$own_included_modules)}function Y(f){if(!f)return[];if(f.$$ancestors_cache_version===m.const_cache_version)return f.$$ancestors;var b=[],H,re,ue;for(H=0,re=T(f),ue=re.length;H<ue;H++)b.push(re[H]);if(f.$$super)for(H=0,re=Y(f.$$super),ue=re.length;H<ue;H++)b.push(re[H]);return f.$$ancestors_cache_version=m.const_cache_version,f.$$ancestors=b,b}m.ancestors=Y,m.included_modules=function(f){for(var b=[],H=null,re=Object.getPrototypeOf(f.$$prototype);re&&Object.getPrototypeOf(re);re=Object.getPrototypeOf(re))H=j(re),H&&H.$$is_module&&re.$$iclass&&re.$$included&&b.push(H);return b},m.add_stubs=function(f){var b=m.BasicObject.$$prototype,H,re;f=f.split(",");for(var ue=0,ce=f.length;ue<ce;ue++)H=de(f[ue]),re=b[H],(re==null||re.$$stub)&&m.add_stub_for(b,H)},m.add_stub_for=function(f,b){g(f,b,m.stub_for(b))},m.stub_for=function(f){function b(){return this.$method_missing.$$p=b.$$p,b.$$p=null,this.$method_missing.apply(this,ge(f.slice(1),arguments))}return b.$$stub=!0,b},m.ac=function(f,b,H,re){var ue="";H.$$is_a_module?ue+=H.$$name+".":ue+=H.$$class.$$name+"#",ue+=re,M(m.ArgumentError,"["+ue+"] wrong number of arguments (given "+f+", expected "+b+")")},m.block_ac=function(f,b,H){var re="`block in "+H+"'";M(m.ArgumentError,re+": wrong number of arguments (given "+f+", expected "+b+")")};function O(f){return f.hasOwnProperty("$$meta")&&f.$$meta!==null?Y(f.$$meta):Y(f.$$class)}m.find_super=function(f,b,H,re,ue){var ce=de(b),he,pe,ye,we,ze=-1,Ee;for(he=O(f),we=H.$$owner,Ee=0;Ee<he.length;Ee++)if(pe=he[Ee],pe===we||pe.$$cloned_from.indexOf(we)!==-1){ze=Ee;break}for(Ee=ze+1;Ee<he.length;Ee++){pe=he[Ee];var xe=pe.$$prototype;if(xe.hasOwnProperty("$$dummy")&&(xe=xe.$$define_methods_on),xe.hasOwnProperty(ce)){ye=xe[ce];break}}return!re&&ye&&ye.$$stub&&f.$method_missing.$$pristine&&M(m.NoMethodError,"super: no superclass method `"+b+"' for "+f,b),ye.$$stub&&!ue?null:ye},m.find_block_super=function(f,b,H,re,ue){var ce=b;return H||M(m.RuntimeError,"super called outside of method"),ue&&H.$$define_meth&&M(m.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),H.$$def&&(ce=H.$$jsid),m.find_super(f,ce,H,re)},m.find_super_dispatcher=m.find_super,m.find_iter_super_dispatcher=m.find_block_super;function ae(f,b,H){try{f(b)}catch(re){if(re===H)return H.$v;throw re}}m.yield1=function(f,b){typeof f!="function"&&M(m.LocalJumpError,"no block given");var H=f.$$has_top_level_mlhs_arg,re=f.$$has_trailing_comma_in_args,ue=f.$$is_lambda&&f.$$ret;return(f.length>1||(H||re)&&f.length===1)&&(b=m.to_ary(b)),(f.length>1||re&&f.length===1)&&b.$$is_array?ue?ae(f.apply.bind(f,null),b,f.$$ret):f.apply(null,b):ue?ae(f,b,f.$$ret):f(b)},m.yieldX=function(f,b){return typeof f!="function"&&M(m.LocalJumpError,"no block given"),f.length>1&&b.length===1&&b[0].$$is_array&&(b=b[0]),f.$$is_lambda&&f.$$ret?ae(f.apply.bind(f,null),b,f.$$ret):f.apply(null,b)},m.rescue=function(f,b){for(var H=0;H<b.length;H++){var re=b[H];if(re.$$is_array){var ue=m.rescue(f,re);if(ue)return ue}else if(re===m.JS.Error||re["$==="](f))return re}return null},m.is_a=function(f,b){if(b!=null&&f.$$meta===b||f.$$class===b)return!0;if(f.$$is_number&&b.$$is_number_class)return b.$$is_integer_class?f%1===0:!0;var H=Y(f.$$is_class?m.get_singleton_class(f):f.$$meta||f.$$class);return H.indexOf(b)!==-1},m.to_hash=function(f){if(f.$$is_hash)return f;if(f["$respond_to?"]("to_hash",!0)){var b=f.$to_hash();if(b.$$is_hash)return b;M(m.TypeError,"Can't convert "+f.$$class+" to Hash ("+f.$$class+"#to_hash gives "+b.$$class+")")}else M(m.TypeError,"no implicit conversion of "+f.$$class+" into Hash")},m.to_ary=function(f){if(f.$$is_array)return f;if(f["$respond_to?"]("to_ary",!0)){var b=f.$to_ary();if(b===w)return[f];if(b.$$is_array)return b;M(m.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_ary gives "+b.$$class+")")}else return[f]},m.to_a=function(f){if(f.$$is_array)return f.slice();if(f["$respond_to?"]("to_a",!0)){var b=f.$to_a();if(b===w)return[f];if(b.$$is_array)return b;M(m.TypeError,"Can't convert "+f.$$class+" to Array ("+f.$$class+"#to_a gives "+b.$$class+")")}else return[f]},m.extract_kwargs=function(f){var b=f[f.length-1];if(b!=null&&m.respond_to(b,"$to_hash",!0))return Z(f,f.length-1),b},m.kwrestargs=function(f,b){var H=new Map;return m.hash_each(f,!1,function(re,ue){return b[re]||m.hash_put(H,re,ue),[!1,!1]}),H};function le(f,b){typeof b=="number"?f.$$arity=b:typeof b=="object"&&Object.assign(f,b)}var _e=new Map;function de(f){var b=_e.get(f);return b||(b="$"+f,_e.set(f,b)),b}m.jsid=de;function ge(f,b){return b.$$is_array||(b=te(b)),[f].concat(b)}m.send=function(f,b,H,re,ue){var ce;return typeof b=="function"?(ce=b,b=null):typeof b=="string"?ce=f[de(b)]:M(m.NameError,"Passed method should be a string or a function"),m.send2(f,ce,b,H,re,ue)},m.send2=function(f,b,H,re,ue,ce){return b==null&&H!=null&&f.$method_missing&&(b=f.$method_missing,re=ge(H,re)),le(ue,ce),typeof ue=="function"&&(b.$$p=ue),b.apply(f,re)},m.refined_send=function(f,b,H,re,ue,ce){var he,pe,ye,we,ze,Ee,xe,qe,Ae,ke;for(we=O(b),he=0;he<we.length;he++)for(ze=m.id(we[he]),pe=0;pe<f.length;pe++)for(Ee=f[pe],ye=Ee.length-1;ye>=0;ye--)if(xe=Ee[ye],!(typeof xe.$$refine_modules>"u")&&(qe=xe.$$refine_modules,!(typeof qe[ze]>"u")&&(Ae=qe[ze],typeof Ae.$$prototype[de(H)]<"u")))return ke=Ae.$$prototype[de(H)],m.send2(b,ke,H,re,ue,ce);return m.send(b,H,re,ue,ce)},m.lambda=function(f,b){return f.$$is_lambda=!0,le(f,b),f},m.def=function(f,b,H,re){return le(H,re),f===m.top?m.defn(m.Object,b,H):!f.$$eval&&f.$$is_a_module?m.defn(f,b,H):m.defs(f,b,H)},m.defn=function(f,b,H){N(f),H.displayName=b,H.$$owner=f;var re=b.substr(1),ue=f.$$prototype;if(ue.hasOwnProperty("$$dummy")&&(ue=ue.$$define_methods_on),g(ue,b,H),f.$$is_module){f.$$module_function&&m.defs(f,b,H);for(var ce=0,he=f.$$iclasses,pe=he.length;ce<pe;ce++){var ye=he[ce];g(ye,b,H)}}var we=f.$$singleton_of;return f.$method_added&&!f.$method_added.$$stub&&!we?f.$method_added(re):we&&we.$singleton_method_added&&!we.$singleton_method_added.$$stub&&we.$singleton_method_added(re),re},m.defs=function(f,b,H,re){return le(H,re),(f.$$is_string||f.$$is_number)&&M(m.TypeError,"can't define singleton"),m.defn(m.get_singleton_class(f),b,H)};function ve(f,b){if(f.$$is_module)for(var H=0,re=f.$$iclasses,ue=re.length;H<ue;H++){var ce=re[H];delete ce[b]}}m.rdef=function(f,b){X(f.$$prototype,b)||M(m.NameError,"method '"+b.substr(1)+"' not defined in "+f.$name()),delete f.$$prototype[b],ve(f,b),f.$$is_singleton?f.$$prototype.$singleton_method_removed&&!f.$$prototype.$singleton_method_removed.$$stub&&f.$$prototype.$singleton_method_removed(b.substr(1)):f.$method_removed&&!f.$method_removed.$$stub&&f.$method_removed(b.substr(1))},m.udef=function(f,b){(!f.$$prototype[b]||f.$$prototype[b].$$stub)&&M(m.NameError,"method '"+b.substr(1)+"' not defined in "+f.$name()),m.add_stub_for(f.$$prototype,b),ve(f,b),f.$$is_singleton?f.$$prototype.$singleton_method_undefined&&!f.$$prototype.$singleton_method_undefined.$$stub&&f.$$prototype.$singleton_method_undefined(b.substr(1)):f.$method_undefined&&!f.$method_undefined.$$stub&&f.$method_undefined(b.substr(1))};function me(f){return typeof f=="function"&&!f.$$stub}m.alias=function(f,b,H){var re=de(b),ue=de(H),ce,he;if(typeof f.$$prototype>"u"&&(f=m.Object),ce=f.$$prototype[ue],f.$$eval)return m.alias(m.get_singleton_class(f),b,H);if(!me(ce)){for(var pe=f.$$super;typeof ce!="function"&&pe;)ce=pe[ue],pe=pe.$$super;!me(ce)&&f.$$is_module&&(ce=m.Object.$$prototype[ue]),me(ce)||M(m.NameError,"undefined method `"+H+"' for class `"+f.$name()+"'")}return ce.$$alias_of&&(ce=ce.$$alias_of),he=m.wrap_method_body(ce),he.displayName=b,he.$$alias_of=ce,he.$$alias_name=b,m.defn(f,re,he),f},m.wrap_method_body=function(f){var b=function(){var H=b.$$p;return b.$$p=null,m.send(this,f,arguments,H)};try{Object.defineProperty(b,"length",{value:f.length})}catch{}return b.$$arity=f.$$arity==null?f.length:f.$$arity,b.$$parameters=f.$$parameters,b.$$source_location=f.$$source_location,b},m.alias_gvar=function(f,b){return Object.defineProperty(V,f,{configurable:!0,enumerable:!0,get:function(){return V[b]},set:function(H){V[b]=H}}),w},m.alias_native=function(f,b,H){var re=de(b),ue=f.$$prototype[H];return(typeof ue!="function"||ue.$$stub)&&M(m.NameError,"undefined native method `"+H+"' for class `"+f.$name()+"'"),m.defn(f,re,ue),f},m.hash_init=function(f){z.warn("DEPRECATION: Opal.hash_init is deprecated and is now a no-op.")},m.hash_clone=function(f,b){return b.$$none=f.$$none,b.$$proc=f.$$proc,m.hash_each(f,b,function(H,re){return m.hash_put(b,H,re),[!1,b]})},m.hash_put=function(f,b,H){var re=typeof b;if(re==="string"||re==="symbol"||re==="number"||re==="boolean"||re==="bigint")f.set(b,H);else if(b.$$is_string)f.set(b.valueOf(),H);else{f.$$keys||(f.$$keys=new Map);var ue=b.$$is_string?b.valueOf():f.$$by_identity?m.id(b):b.$hash(),ce=f.$$keys;if(!ce.has(ue)){ce.set(ue,[b]),f.set(b,H);return}for(var he=ce.get(ue),pe,ye=0;ye<he.length;ye++)if(pe=he[ye],b===pe||b["$eql?"](pe)){f.set(pe,H);return}he.push(b),f.set(b,H)}},m.hash_get=function(f,b){var H=typeof b;if(H==="string"||H==="symbol"||H==="number"||H==="boolean"||H==="bigint")return f.get(b);if(f.$$keys){var re=b.$$is_string?b.valueOf():f.$$by_identity?m.id(b):b.$hash(),ue=f.$$keys.get(re),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],b===ce||b["$eql?"](ce))return f.get(ce)}else if(b.$$is_string)return f.get(re)}else if(b.$$is_string)return f.get(b.valueOf())};function be(f,b){var H=f.get(b);if(H!==void 0)return f.delete(b),H}m.hash_delete=function(f,b){var H=typeof b;if(H==="string"||H==="symbol"||H==="number"||H==="boolean"||H==="bigint")return be(f,b);if(f.$$keys){var re=b.$$is_string?b.valueOf():f.$$by_identity?m.id(b):b.$hash(),ue=f.$$keys.get(re),ce;if(ue!==void 0){for(var he=0;he<ue.length;he++)if(ce=ue[he],b===ce||b["$eql?"](ce))return ue.splice(he,1),ue.length===0&&f.$$keys.delete(re),be(f,ce)}else if(b.$$is_string)return be(f,re)}else if(b.$$is_string)return be(f,b.valueOf())},m.hash_rehash=function(f){var b=f.$$keys;return b&&b.clear(),m.hash_each(f,!1,function(H,re){var ue=typeof H;if(ue==="string"||ue==="symbol"||ue==="number"||ue==="boolean"||ue==="bigint")return[!1,!1];var ce=H.$$is_string?H.valueOf():f.$$by_identity?m.id(H):H.$hash();if(b||(f.$$keys=b=new Map),!b.has(ce))return b.set(ce,[H]),[!1,!1];for(var he=b.get(ce),pe=he.length===1?he:te(he),ye,we=0;we<pe.length;we++)ye=pe[we],(H===ye||H["$eql?"](ye))&&(he.splice(he.indexOf(ye),1),f.delete(ye));return he.push(H),[!1,!1]}),f},m.hash=function(){var f=arguments.length,b,H,re,ue,ce,he;if(f===1&&arguments[0].$$is_hash)return arguments[0];if(H=new Map,f===1)if(b=arguments[0],arguments[0].$$is_array){for(ue=b.length,re=0;re<ue;re++)b[re].length!==2&&M(m.ArgumentError,"value not of length 2: "+b[re].$inspect()),ce=b[re][0],he=b[re][1],m.hash_put(H,ce,he);return H}else{b=arguments[0];for(ce in b)X(b,ce)&&(he=b[ce],m.hash_put(H,ce,he));return H}for(f%2!==0&&M(m.ArgumentError,"odd number of arguments for Hash"),re=0;re<f;re+=2)ce=arguments[re],he=arguments[re+1],m.hash_put(H,ce,he);return H},m.hash2=function(f,b){z.warn("DEPRECATION: `Opal.hash2` is deprecated and will be removed in Opal 2.0. Use `new Map()` with an array of key/value pairs instead.");for(var H=new Map,re=0,ue=f.length;re<ue;re++)H.set(f[re],b[f[re]]);return H},m.hash_each=function(f,b,H){for(var re,ue=0,ce,he=Array.from(f.entries()),pe=he.length;ue<pe;ue++)if(ce=he[ue],re=H(ce[0],ce[1]),re[0])return re[1];return re?re[1]:b},m.range=function(f,b,H){var re=new m.Range;return re.begin=f,re.end=b,re.excl=H,re};var $e=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];m.ivar=function(f){return $e.indexOf(f)!==-1&&(f+="$"),f};function N(f){f.$$frozen&&M(m.FrozenError,"can't modify frozen "+f.$class()+": "+f,new Map([["receiver",f]]))}m.deny_frozen_access=N,m.freeze=function(f){return g(f,"$$frozen",!0),f.hasOwnProperty("$$id")||g(f,"$$id",P()),f.hasOwnProperty("$$meta")?f.$$meta.$freeze():g(f,"$$meta",null),f.hasOwnProperty("$$comparable")||g(f,"$$comparable",null),Object.seal(f),f};function F(f,b){var H=Object.getOwnPropertyNames(f),re=H.length,ue,ce,he;for(ue=0;ue<re;ue++)ce=H[ue],ce[0]!=="$"&&(he=Object.getOwnPropertyDescriptor(f,ce),he&&he.enumerable&&b(ce,he))}m.each_ivar=F,m.freeze_props=function(f){var b={get:null,set:function(H){N(f)},enumerable:!0};F(f,function(H,re){re.writable&&(b.get=se(re.value),Object.defineProperty(f,H,b))})},m.escape_regexp=function(f){return f.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},m.global_regexp=function(f){return f.global?f:(f.$$g==null?f.$$g=new RegExp(f.source,(f.multiline?"gm":"g")+(f.ignoreCase?"i":"")):f.$$g.lastIndex=null,f.$$g)},m.global_multiline_regexp=function(f){var b,H;return f.global&&f.multiline?f:(H="gm"+(f.ignoreCase?"i":""),f.multiline?(f.$$g==null&&(f.$$g=new RegExp(f.source,H)),b=f.$$g):(f.$$gm==null&&(f.$$gm=new RegExp(f.source,H)),b=f.$$gm),b.lastIndex=null,b)},m.regexp=function(f,b){for(var H,re=typeof b<"u"&&b&&b.indexOf("i")>=0,ue=0,ce=f.length;ue<ce;ue++)H=f[ue],H instanceof RegExp&&(H.ignoreCase!==re&&m.Kernel.$warn("ignore case doesn't match for "+H.source.$inspect(),new Map([["uplevel",1]])),H=H.source),H===""&&(H="(?:"+H+")"),f[ue]=H;return b?new RegExp(f.join(""),b):new RegExp(f.join(""))},m.modules={},m.loaded_features=["corelib/runtime"],m.current_dir=".",m.require_table={"corelib/runtime":!0},m.normalize=function(f){var b,H,re=[],ue="/";m.current_dir!=="."&&(f=m.current_dir.replace(/\/*$/,"/")+f),f=f.replace(/^\.\//,""),f=f.replace(/\.(rb|opal|js)$/,""),b=f.split(ue);for(var ce=0,he=b.length;ce<he;ce++)H=b[ce],H!==""&&(H===".."?re.pop():re.push(H));return re.join(ue)},m.loaded=function(f){var b,H,re;for(b=0,H=f.length;b<H;b++)re=m.normalize(f[b]),!m.require_table[re]&&(m.loaded_features.push(re),m.require_table[re]=!0)},m.load_normalized=function(f){m.loaded([f]);var b=m.modules[f];if(b){var H=b(m);if(typeof Promise<"u"&&H instanceof Promise)return H.then(se(!0))}else{var re=m.config.missing_require_severity,ue="cannot load such file -- "+f;re==="error"?M(m.LoadError,ue):re==="warning"&&z.warn("WARNING: LoadError: "+ue)}return!0},m.load=function(f){return f=m.normalize(f),m.load_normalized(f)},m.require=function(f){return f=m.normalize(f),m.require_table[f]?!1:m.load_normalized(f)},m.encodings=Object.create(null),m.set_encoding=function(f,b,H){typeof H>"u"&&(H="encoding"),(typeof f=="string"||f.$$frozen===!0)&&M(m.FrozenError,"can't modify frozen String");var re=m.find_encoding(b);return re===f[H]||(f[H]=re),f},m.find_encoding=function(f){var b=m.encodings,H=b[f]||b[f.toUpperCase()];return H||M(m.ArgumentError,"unknown encoding name - "+f),H},m.enc=function(f,b){var H=new String(f);return H=m.set_encoding(H,b),H.internal_encoding=H.encoding,H},m.binary=function(f){var b=new String(f);return m.set_encoding(b,"binary","internal_encoding")},m.last_promise=null,m.promise_unhandled_exception=!1,m.queue=function(f){if(m.last_promise)return m.last_promise=m.last_promise.then(function(){if(!m.promise_unhandled_exception)return f(m)}).catch(function(H){m.respond_to(H,"$full_message")&&(H=H.$full_message()),z.error(H),m.promise_unhandled_exception=!0,m.exit(1)}),m.last_promise;var b=f(m);return typeof Promise=="function"&&typeof b=="object"&&b instanceof Promise&&(m.last_promise=b),b};function G(f,b){return typeof f=="number"&&typeof b=="number"}m.rb_plus=function(f,b){return G(f,b)?f+b:f["$+"](b)},m.rb_minus=function(f,b){return G(f,b)?f-b:f["$-"](b)},m.rb_times=function(f,b){return G(f,b)?f*b:f["$*"](b)},m.rb_divide=function(f,b){return G(f,b)?f/b:f["$/"](b)},m.rb_lt=function(f,b){return G(f,b)?f<b:f["$<"](b)},m.rb_gt=function(f,b){return G(f,b)?f>b:f["$>"](b)},m.rb_le=function(f,b){return G(f,b)?f<=b:f["$<="](b)},m.rb_ge=function(f,b){return G(f,b)?f>=b:f["$>="](b)};function Q(f,b){return typeof f=="number"&&typeof b=="number"||typeof f=="string"&&typeof b=="string"}function ne(f,b){return Q(f,b)?f===b:q(f["$=="](b))}m.eqeq=ne,m.eqeqeq=function(f,b){return Q(f,b)?f===b:q(f["$==="](b))},m.neqeq=function(f,b){return Q(f,b)?f!==b:q(f["$!="](b))},m.not=function(f){return f==null||f===!1||w===f?!0:f===!0||f["$!"].$$pristine?!1:q(f["$!"]())};function se(f){return function(){return f}}m.return_val=se,m.return_self=function(){return this},m.return_ivar=function(f){return function(){return this[f]==null?w:this[f]}},m.assign_ivar=function(f){return function(b){return N(this),this[f]=b}},m.assign_ivar_val=function(f,b){return function(){return N(this),this[f]=b}},m.ensure_kwargs=function(f){if(f==null)return new Map;if(f.$$is_hash)return f;M(m.ArgumentError,"expected kwargs")},m.get_kwarg=function(f,b){var H=m.hash_get(f,b);return H===void 0&&M(m.ArgumentError,"missing keyword: "+b),H},m.large_array_unpack=function(f){var b=f.split(","),H=b.length,re;for(re=0;re<H;re++)switch(b[re][0]){case void 0:b[re]=w;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":b[re]=+b[re]}return b},m.opal32_init=se(1332765036);function oe(f,b){return f<<b|f>>>32-b}m.opal32_add=function(f,b){return f^=b,f=oe(f,1),f},m.BasicObject=D=y("BasicObject",null),m.Object=k=y("Object",m.BasicObject),m.Module=ee=y("Module",m.Object),m.Class=J=y("Class",m.Module),m.Opal=C=s("Opal"),m.Kernel=W=s("Kernel"),U(m.BasicObject,m.Class.$$prototype),U(m.Object,m.Class.$$prototype),U(m.Module,m.Class.$$prototype),U(m.Class,m.Class.$$prototype),D.$$const.BasicObject=D,c(k,"BasicObject",D),c(k,"Object",k),c(k,"Module",ee),c(k,"Class",J),c(k,"Opal",C),c(k,"Kernel",W),D.$$class=J,k.$$class=J,ee.$$class=J,J.$$class=J,C.$$class=ee,W.$$class=ee,g(k.$$prototype,"toString",function(){var f=this.$to_s();return f.$$is_string&&typeof f=="object"?f.valueOf():f}),g(k.$$prototype,"$require",m.require),m.top=new k,m.top.$to_s=m.top.$inspect=se("main"),m.top.$define_method=fe;function fe(){var f=fe.$$p;return fe.$$p=null,m.send(k,"define_method",arguments,f)}m.NilClass=y("NilClass",m.Object),c(k,"NilClass",m.NilClass),w=m.nil=new m.NilClass,w.$$id=A,w.call=w.apply=function(){M(m.LocalJumpError,"no block given")},w.$$frozen=!0,w.$$comparable=!1,Object.seal(w),m.thrower=function(f){var b={$thrower_type:f,$throw:function(H,re){throw H==null&&(H=w),this.is_orphan&&!re&&M(m.LocalJumpError,"unexpected "+f,H,f.$to_sym()),this.$v=H,this},is_orphan:!1};return b},Object.defineProperty(V,"@",{enumerable:!0,configurable:!0,get:function(){return q(V["!"])?V["!"].$backtrace():w},set:function(f){q(V["!"])?V["!"].$set_backtrace(f):M(m.ArgumentError,"$! not set")}}),m.t_eval_return=m.thrower("return"),TypeError.$$super=Error,m.file_sources={}}).call(void 0);Opal.loaded(["corelib/runtime.js"]);Opal.modules["corelib/helpers"]=function($){var z=$.type_error,w=$.coerce_to,D=$.module,k=$.defs,ee=$.slice,J=$.eqeqeq,C=$.Kernel,W=$.truthy,m=$.Opal,B=$.nil,ie=$.$$$;return $.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),function(X){var U=D(X,"Opal");k(U,"$bridge",function(A,p){return $.bridge(A,p)}),k(U,"$coerce_to!",function(A,p,P,V){var M,L,g=B;return M=ee(arguments,3),L=M,g=w(A,p,P,L),J(p,g)||C.$raise(z(A,p,P,g)),g},-4),k(U,"$coerce_to?",function(A,p,P,V){var M,L,g=B;return M=ee(arguments,3),L=M,!W(A["$respond_to?"](P))||(g=w(A,p,P,L),W(g["$nil?"]()))?B:(J(p,g)||C.$raise(z(A,p,P,g)),g)},-4),k(U,"$try_convert",function(A,p,P){return J(p,A)?A:W(A["$respond_to?"](P))?A.$__send__(P):B}),k(U,"$compare",function(A,p){var P=B;return P=A["$<=>"](p),W(P===B)&&C.$raise(ie("ArgumentError"),"comparison of "+A.$class()+" with "+p.$class()+" failed"),P}),k(U,"$destructure",function(A){if(A.length==1)return A[0];if(A.$$is_array)return A;for(var p=new Array(A.length),P=0,V=p.length;P<V;P++)p[P]=A[P];return p}),k(U,"$respond_to?",function(A,p,P){return P==null&&(P=!1),A==null||!A.$$class?!1:A["$respond_to?"](p,P)},-3),k(U,"$instance_variable_name!",function(A){return A=m["$coerce_to!"](A,ie("String"),"to_str"),W(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(A))||C.$raise(ie("NameError").$new("'"+A+"' is not allowed as an instance variable name",A)),A}),k(U,"$class_variable_name!",function(A){return A=m["$coerce_to!"](A,ie("String"),"to_str"),W(A.length<3||A.slice(0,2)!=="@@")&&C.$raise(ie("NameError").$new("`"+A+"' is not allowed as a class variable name",A)),A}),k(U,"$const_name?",function(A){return typeof A!="string"&&(A=m["$coerce_to!"](A,ie("String"),"to_str")),A[0]===A[0].toUpperCase()}),k(U,"$const_name!",function(A){var p=this;return W(ie("::","String","skip_raise")?"constant":B)&&(A=m["$coerce_to!"](A,ie("String"),"to_str")),(!A||A[0]!=A[0].toUpperCase())&&p.$raise(ie("NameError"),"wrong constant name "+A),A}),k(U,"$pristine",function(A,p){var P,V;P=ee(arguments,1),V=P;for(var M,L,g=V.length-1;g>=0;g--)M=V[g],L=A.$$prototype[$.jsid(M)],L&&!L.$$stub&&(L.$$pristine=!0);return B},-2);var te=[];return k(U,"$inspect",function(A){var p=B,P=!1;return function(){try{try{return A===null?"null":A===void 0?"undefined":typeof A.$$class>"u"?Object.prototype.toString.apply(A):typeof A.$inspect!="function"||A.$inspect.$$stub||te.indexOf(A.$__id__())!==-1?"#<"+A.$$class+":0x"+A.$__id__().$to_s(16)+">":(te.push(A.$__id__()),P=!0,A.$inspect())}catch(V){if($.rescue(V,[ie("Exception")])){p=V;try{return"#<"+A.$$class+":0x"+A.$__id__().$to_s(16)+">"}finally{$.pop_exception(V)}}else throw V}}finally{P&&te.pop()}}()},-1)}("::")};Opal.modules["corelib/module"]=function($){var z=$.truthy,w=$.coerce_to,D=$.const_set,k=$.Object,ee=$.return_ivar,J=$.assign_ivar,C=$.ivar,W=$.deny_frozen_access,m=$.freeze,B=$.prop,ie=$.jsid,X=$.each_ivar,U=$.klass,te=$.Opal,Z=$.Kernel,A=$.defs,p=$.send,P=$.def,V=$.eqeqeq,M=$.Module,L=$.rb_lt,g=$.rb_gt,q=$.slice,R=$.to_a,x=$.return_val,E=$.eqeq,u=$.not,d=$.rb_le,I=$.range,h=$.send2,c=$.find_super,l=$.alias,y=[],K=$.nil,_=$.$$$;return $.add_stubs("try_convert,raise,class,module_eval,to_proc,===,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,owner,!,<=,frozen?,append_features,included,name,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,copy_singleton_methods,class_exec,module_exec,inspect"),function(s,n,r){var e=U(s,n,"Module"),t=[e].concat(r),i=$.$r(t);function a(j){if(j.$$is_string)return j;var T=te.$try_convert(j,_("String"),"to_str");if(T.$$is_string)return T;T===K?Z.$raise(_("TypeError"),""+j+" is not a symbol nor a string"):Z.$raise(_("TypeError"),"can't convert "+j.$class()+" to String ("+j.$class()+"#to_str gives "+T.$class())}A(e,"$allocate",function(){var T=this,Y=$.allocate_module(K,function(){});return T!==$.Module&&Object.setPrototypeOf(Y,T.$$prototype),Y}),P(e,"$initialize",function j(){var T=j.$$p||K,Y=this;return j.$$p=null,T!==K?p(Y,"module_eval",[],T.$to_proc()):K}),P(e,"$===",function(T){var Y=this;return z(T==null)?!1:$.is_a(T,Y)}),P(e,"$<",function(T){var Y=this;V(M,T)||Z.$raise(_("TypeError"),"compared with non class/module");var O=Y,ae,le,_e;if(O===T)return!1;for(le=0,ae=$.ancestors(Y),_e=ae.length;le<_e;le++)if(ae[le]===T)return!0;for(le=0,ae=$.ancestors(T),_e=ae.length;le<_e;le++)if(ae[le]===Y)return!1;return K}),P(e,"$<=",function(T){var Y=this,O=K;return z(O=Y["$equal?"](T))?O:L(Y,T)}),P(e,"$>",function(T){var Y=this;return V(M,T)||Z.$raise(_("TypeError"),"compared with non class/module"),L(T,Y)}),P(e,"$>=",function(T){var Y=this,O=K;return z(O=Y["$equal?"](T))?O:g(Y,T)}),P(e,"$<=>",function(T){var Y=this,O=K;return Y===T?0:!V(M,T)||(O=L(Y,T),z(O["$nil?"]()))?K:z(O)?-1:1}),P(e,"$alias_method",function(T,Y){var O=this;return W(O),T=w(T,_("String"),"to_str"),Y=w(Y,_("String"),"to_str"),$.alias(O,T,Y),O}),P(e,"$alias_native",function(T,Y){var O=this;return Y==null&&(Y=T),W(O),$.alias_native(O,T,Y),O},-2),P(e,"$ancestors",function(){var T=this;return $.ancestors(T)}),P(e,"$append_features",function(T){var Y=this;return W(T),$.append_features(Y,T),Y}),P(e,"$attr_accessor",function(T){var Y,O,ae=this;return Y=q(arguments),O=Y,p(ae,"attr_reader",R(O)),p(ae,"attr_writer",R(O))},-1),P(e,"$attr",function(T){var Y,O,ae=this;return Y=q(arguments),O=Y,O.length==2&&(O[1]===!0||O[1]===!1)?(ae.$warn("optional boolean argument is obsoleted",new Map([["uplevel",1]])),O[1]?ae.$attr_accessor(O[0]):ae.$attr_reader(O[0]),K):p(ae,"attr_reader",R(O))},-1),P(e,"$attr_reader",function(T){var Y,O,ae=this;Y=q(arguments),O=Y,W(ae);for(var le=ae.$$prototype,_e=O.length-1;_e>=0;_e--){var de=O[_e],ge=ie(de),ve=C(de),me=ee(ve);$.prop(le,ve,K),me.$$parameters=[],me.$$arity=0,$.defn(ae,ge,me)}return K},-1),P(e,"$attr_writer",function(T){var Y,O,ae=this;Y=q(arguments),O=Y,W(ae);for(var le=ae.$$prototype,_e=O.length-1;_e>=0;_e--){var de=O[_e],ge=ie(de+"="),ve=C(de),me=J(ve);me.$$parameters=[["req"]],me.$$arity=1,$.prop(le,ve,K),$.defn(ae,ge,me)}return K},-1),P(e,"$autoload",function(T,Y){var O=this;return W(O),i("Opal")["$const_name?"](T)||Z.$raise(_("NameError"),"autoload must be constant name: "+T),Y==""&&Z.$raise(_("ArgumentError"),"empty file name"),O.$$const.hasOwnProperty(T)||(O.$$autoload||(O.$$autoload={}),$.const_cache_version++,O.$$autoload[T]={path:Y,loaded:!1,required:!1,success:!1,exception:!1},O.$const_added&&!O.$const_added.$$pristine&&O.$const_added(T)),K}),P(e,"$autoload?",function(T){var Y=this;if(Y.$$autoload&&Y.$$autoload[T]&&!Y.$$autoload[T].required&&!Y.$$autoload[T].success)return Y.$$autoload[T].path;for(var O=Y.$ancestors(),ae=0,le=O.length;ae<le;ae++)if(O[ae].$$autoload&&O[ae].$$autoload[T]&&!O[ae].$$autoload[T].required&&!O[ae].$$autoload[T].success)return O[ae].$$autoload[T].path;return K}),P(e,"$class_variables",function(){var T=this;return Object.keys($.class_variables(T))}),P(e,"$class_variable_get",function(T){var Y=this;return T=te["$class_variable_name!"](T),$.class_variable_get(Y,T,!1)}),P(e,"$class_variable_set",function(T,Y){var O=this;return W(O),T=te["$class_variable_name!"](T),$.class_variable_set(O,T,Y)}),P(e,"$class_variable_defined?",function(T){var Y=this;return T=te["$class_variable_name!"](T),$.class_variables(Y).hasOwnProperty(T)}),P(e,"$const_added",x(K)),te.$pristine(e,"const_added"),P(e,"$remove_class_variable",function(T){var Y=this;if(W(Y),T=te["$class_variable_name!"](T),$.hasOwnProperty.call(Y.$$cvars,T)){var O=Y.$$cvars[T];return delete Y.$$cvars[T],O}else Z.$raise(_("NameError"),"cannot remove "+T+" for "+Y)}),P(e,"$constants",function(T){var Y=this;return T==null&&(T=!0),$.constants(Y,T)},-1),A(e,"$constants",function(T){var Y=this;if(T==null){var O=(Y.$$nesting||[]).concat(k),ae,le={},_e,de;for(_e=0,de=O.length;_e<de;_e++)for(ae in O[_e].$$const)le[ae]=!0;return Object.keys(le)}else return $.constants(Y,T)},-1),A(e,"$nesting",function(){var T=this;return T.$$nesting||[]}),P(e,"$const_defined?",function(T,Y){var O=this;Y==null&&(Y=!0),T=i("Opal")["$const_name!"](T),z(T["$=~"](_(te,"CONST_NAME_REGEXP")))||Z.$raise(_("NameError").$new("wrong constant name "+T,T));var ae,le=[O],_e,de;for(Y&&(le=le.concat($.ancestors(O)),O.$$is_module&&(le=le.concat([k]).concat($.ancestors(k)))),_e=0,de=le.length;_e<de;_e++)if(ae=le[_e],ae.$$const[T]!=null||ae.$$autoload&&ae.$$autoload[T]&&!ae.$$autoload[T].required&&!ae.$$autoload[T].success)return!0;return!1},-2),P(e,"$const_get",function(T,Y){var O=this;return Y==null&&(Y=!0),T=i("Opal")["$const_name!"](T),T.indexOf("::")===0&&T!=="::"&&(T=T.slice(2)),z(T.indexOf("::")!=-1&&T!="::")?p(T.$split("::"),"inject",[O],function(le,_e){return le==null&&(le=K),_e==null&&(_e=K),le.$const_get(_e)}):(z(T["$=~"](_(te,"CONST_NAME_REGEXP")))||Z.$raise(_("NameError").$new("wrong constant name "+T,T)),Y?$.$$([O],T):$.const_get_local(O,T))},-2),P(e,"$const_missing",function(T){var Y=this,O=K;return O=E(Y,k)?T:""+Y+"::"+T,Z.$raise(_("NameError").$new("uninitialized constant "+O,T))}),P(e,"$const_set",function(T,Y){var O=this;return W(O),T=te["$const_name!"](T),(z(T["$!~"](_(te,"CONST_NAME_REGEXP")))||z(T["$start_with?"]("::")))&&Z.$raise(_("NameError").$new("wrong constant name "+T,T)),D(O,T,Y),Y}),P(e,"$public_constant",x(K)),P(e,"$define_method",function j(T,Y){var O=j.$$p||K,ae=this,le=K,_e=K,de=K;return j.$$p=null,W(ae),Y===void 0&&O===K&&Z.$raise(_("ArgumentError"),"tried to create a Proc object without a block"),T=a(T),z(Y!==void 0)&&(O=V(_("Proc"),le=Y)?Y:V(_("Method"),le)?Y.$to_proc().$$unbound:V(_("UnboundMethod"),le)?$.wrap_method_body(Y.$$method):Z.$raise(_("TypeError"),"wrong argument type "+Y.$class()+" (expected Proc/Method/UnboundMethod)"),z(!Y.$$is_proc)&&(_e=Y.$owner(),z(_e.$$is_class)&&u(d(ae,_e))&&(de=z(_e.$$is_singleton)?"can't bind singleton method to a different class":"bind argument must be a subclass of "+_e,Z.$raise(_("TypeError"),de)))),typeof Proxy<"u"&&(O.$$proxy_target=O,O=new Proxy(O,{apply:function(ge,ve,me){var be=ge.$$jsid,$e=ge.$$is_lambda;ge.$$jsid=T,ge.$$is_lambda=!0;try{return ge.apply(ve,me)}catch(N){if(N===ge.$$brk||N===ge.$$ret)return N.$v;throw N}finally{ge.$$jsid=be,ge.$$is_lambda=$e}}})),O.$$jsid=T,O.$$s=null,O.$$def=O,O.$$define_meth=!0,$.defn(ae,ie(T),O)},-2),P(e,"$freeze",function(){var T=this;return z(T["$frozen?"]())?T:(T.hasOwnProperty("$$base_module")||B(T,"$$base_module",null),m(T))}),P(e,"$remove_method",function(T){var Y,O,ae=this;Y=q(arguments),O=Y;for(var le=0;le<O.length;le++){var _e=a(O[le]);W(ae),$.rdef(ae,"$"+_e)}return ae},-1),P(e,"$singleton_class?",function(){var T=this;return!!T.$$is_singleton}),P(e,"$include",function(T){var Y,O,ae=this;Y=q(arguments),O=Y;for(var le=O.length-1;le>=0;le--){var _e=O[le];_e.$$is_module||Z.$raise(_("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$append_features(ae),_e.$included(ae)}return ae},-1),P(e,"$included_modules",function(){var T=this;return $.included_modules(T)}),P(e,"$include?",function(T){var Y=this;T.$$is_module||Z.$raise(_("TypeError"),"wrong argument type "+T.$class()+" (expected Module)");var O,ae,le,_e=$.ancestors(Y);for(O=0,ae=_e.length;O<ae;O++)if(le=_e[O],le===T&&le!==Y)return!0;return!1}),P(e,"$instance_method",function(T){var Y=this,O=Y.$$prototype[ie(T)];return(!O||O.$$stub)&&Z.$raise(_("NameError").$new("undefined method `"+T+"' for class `"+Y.$name()+"'",T)),_("UnboundMethod").$new(Y,O.$$owner||Y,O,T)}),P(e,"$instance_methods",function(T){var Y=this;return T==null&&(T=!0),z(T)?$.instance_methods(Y):$.own_instance_methods(Y)},-1),P(e,"$included",x(K)),P(e,"$extended",x(K)),P(e,"$extend_object",function(T){return W(T),K}),P(e,"$method_added",function(T){return q(arguments),K},-1),P(e,"$method_removed",function(T){return q(arguments),K},-1),P(e,"$method_undefined",function(T){return q(arguments),K},-1),P(e,"$module_eval",function j(T){var Y=j.$$p||K,O,ae,le,_e=this,de=K,ge=K,ve=K,me=K,be=K,$e=K;j.$$p=null,O=q(arguments),ae=O,z(Y["$nil?"]())&&z(!!$.compile)?(z(I(1,3,!1)["$cover?"](ae.$size()))||Z.$raise(_("ArgumentError"),"wrong number of arguments (0 for 1..3)"),le=[].concat(R(ae)),de=le[0]==null?K:le[0],ge=le[1]==null?K:le[1],le[2]==null||le[2],ve=new Map([["file",z(me=ge)?me:"(eval)"],["eval",!0]]),be=new Map([["arity_check",!1]]).$merge(ve),$e=te.$compile(de,be),Y=p(Z,"proc",[],function G(){var Q=G.$$s==null?this:G.$$s;return new Function("Opal,self","return "+$e)($,Q)},{$$s:_e})):z(ae["$any?"]())&&Z.$raise(_("ArgumentError"),"wrong number of arguments ("+ae.$size()+` for 0)

  NOTE:If you want to enable passing a String argument please add "require 'opal-parser'" to your script
`);var N=Y.$$s,F;return Y.$$s=null,F=Y.apply(_e,[_e]),Y.$$s=N,F},-1),P(e,"$module_exec",function j(T){var Y=j.$$p||K,O,ae,le=this;j.$$p=null,O=q(arguments),ae=O,Y===K&&Z.$raise(_("LocalJumpError"),"no block given");var _e=Y.$$s,de;return Y.$$s=null,de=Y.apply(le,ae),Y.$$s=_e,de},-1),P(e,"$method_defined?",function(T){var Y=this,O=Y.$$prototype[ie(T)];return!!O&&!O.$$stub}),P(e,"$module_function",function(T){var Y,O,ae=this;if(Y=q(arguments),O=Y,W(ae),O.length===0)return ae.$$module_function=!0,K;for(var le=0,_e=O.length;le<_e;le++){var de=O[le],ge=ie(de),ve=ae.$$prototype[ge];$.defs(ae,ge,ve)}return O.length===1?O[0]:O},-1),P(e,"$name",function(){var T=this;if(T.$$full_name)return T.$$full_name;for(var Y=[],O=T;O;){if(O.$$name===K||O.$$name==null)return K;if(Y.unshift(O.$$name),O=O.$$base_module,O===k)break}return Y.length===0?K:T.$$full_name=Y.join("::")}),P(e,"$prepend",function(T){var Y,O,ae=this;Y=q(arguments),O=Y,O.length===0&&Z.$raise(_("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var le=O.length-1;le>=0;le--){var _e=O[le];_e.$$is_module||Z.$raise(_("TypeError"),"wrong argument type "+_e.$class()+" (expected Module)"),_e.$prepend_features(ae),_e.$prepended(ae)}return ae},-1),P(e,"$prepend_features",function(T){var Y=this;return W(T),Y.$$is_module||Z.$raise(_("TypeError"),"wrong argument type "+Y.$class()+" (expected Module)"),$.prepend_features(Y,T),Y}),P(e,"$prepended",x(K)),P(e,"$remove_const",function(T){var Y=this;return W(Y),$.const_remove(Y,T)}),P(e,"$to_s",function(){var T=this,Y=K;return z(Y=$.Module.$name.call(T))?Y:"#<"+(T.$$is_module?"Module":"Class")+":0x"+T.$__id__().$to_s(16)+">"}),P(e,"$undef_method",function(T){var Y,O,ae=this;Y=q(arguments),O=Y;for(var le=0;le<O.length;le++){var _e=a(O[le]);W(ae),$.udef(ae,"$"+_e)}return ae},-1),P(e,"$instance_variables",function(){var T=this,Y=K;Y=($.Module.$$nesting=t,T.$constants());var O=[];return X(T,function(ae){ae!=="constructor"&&!Y["$include?"](ae)&&O.push("@"+ae)}),O});function o(j,T){var Y,O=$.own_instance_methods(j);for(Y=0;Y<O.length;Y++){var ae=O[Y],le=ie(ae),_e=j.$$prototype[le],de=$.wrap_method_body(_e);de.$$jsid=ae,$.defn(T,le,de)}}function v(j,T){for(var Y=j.$$own_included_modules,O=Y.length-1;O>=0;O--)$.append_features(Y[O],T)}function S(j,T){for(var Y=j.$$own_prepended_modules,O=Y.length-1;O>=0;O--)$.prepend_features(Y[O],T)}return P(e,"$initialize_copy",function(T){var Y=this;return o(T,Y),v(T,Y),S(T,Y),Y.$$cloned_from=T.$$cloned_from.concat(T),Y.$copy_class_variables(T),Y.$copy_constants(T)}),P(e,"$initialize_dup",function j(T){var Y=j.$$p||K,O=this;return j.$$p=null,h(O,c(O,"initialize_dup",j,!1,!0),"initialize_dup",[T],Y),O.$copy_singleton_methods(T)}),P(e,"$copy_class_variables",function(T){var Y=this;for(var O in T.$$cvars)Y.$$cvars[O]=T.$$cvars[O]}),P(e,"$copy_constants",function(T){var Y=this,O,ae=T.$$const;for(O in ae)D(Y,O,ae[O])}),P(e,"$refine",function j(T){var Y=j.$$p||K,O,ae=this,le=K,_e=K,de=K;return j.$$p=null,O=[ae,K,K],le=O[0],_e=O[1],de=O[2],de=$.id(T),typeof ae.$$refine_modules>"u"&&(ae.$$refine_modules=Object.create(null)),typeof ae.$$refine_modules[de]>"u"?_e=ae.$$refine_modules[de]=_("Refinement").$new():_e=ae.$$refine_modules[de],_e.refinement_module=le,_e.refined_class=T,p(_e,"class_exec",[],Y.$to_proc()),_e}),P(e,"$refinements",function(){var T=this,Y=T.$$refine_modules,O=new Map;if(typeof Y>"u")return O;for(var ae in Y)O["$[]="](Y[ae].refined_class,Y[ae]);return O}),P(e,"$using",function(T){return Z.$raise("Module#using is not permitted in methods")}),l(e,"class_eval","module_eval"),l(e,"class_exec","module_exec"),l(e,"inspect","to_s")}("::",null,y),function(s,n){var r=U(s,n,"Refinement"),e=r.$$prototype;return e.refinement_module=e.refined_class=K,r.$attr_reader("refined_class"),P(r,"$inspect",function t(){var i=t.$$p||K,a=this;return t.$$p=null,z(a.refinement_module)?"#<refinement:"+a.refined_class.$inspect()+"@"+a.refinement_module.$inspect()+">":h(a,c(a,"inspect",t,!1,!0),"inspect",[],i)})}("::",M)};Opal.modules["corelib/class"]=function($){var z=$.klass,w=$.send,D=$.defs,k=$.def,ee=$.ensure_kwargs,J=$.hash_get,C=$.eqeq,W=$.truthy,m=$.rb_plus,B=$.return_val,ie=$.slice,X=$.send2,U=$.find_super,te=$.Kernel,Z=$.alias,A=$.top,p=[],P=$.nil,V=$.$$$;return $.add_stubs("require,class_eval,to_proc,==,nil?,raise,class,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_dup,+,subclasses,flatten,map,allocate,name,to_s"),A.$require("corelib/module"),function(M,L,g){var q=z(M,L,"Class"),R=[q].concat(g),x=$.$r(R);return D(q,"$new",function E(u){var d=E.$$p||P;if(E.$$p=null,u==null&&(u=x("Object")),!u.$$is_class)throw $.TypeError.$new("superclass must be a Class");var I=$.allocate_class(P,u);return u.$inherited(I),d!==P&&w(I,"class_eval",[],d.$to_proc()),I},-1),k(q,"$allocate",function(){var u=this,d=new u.$$constructor;return d.$$id=$.uid(),d}),k(q,"$clone",function(u){var d,I=this,h=P;return u=ee(u),d=J(u,"freeze"),d==null&&(d=P),W(d["$nil?"]())||C(d,!0)||C(d,!1)||I.$raise(x("ArgumentError"),"unexpected value for freeze: "+d.$class()),h=$.allocate_class(P,I.$$super),h.$copy_instance_variables(I),h.$copy_singleton_methods(I),h.$initialize_clone(I,new Map([["freeze",d]])),(C(d,!0)||W(d["$nil?"]())&&W(I["$frozen?"]()))&&h.$freeze(),h},-1),k(q,"$dup",function(){var u=this,d=P;return d=$.allocate_class(P,u.$$super),d.$copy_instance_variables(u),d.$initialize_dup(u),d}),k(q,"$descendants",function(){var u=this;return m(u.$subclasses(),w(u.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),k(q,"$inherited",B(P)),k(q,"$new",function E(u){var d=E.$$p||P,I,h,c=this;E.$$p=null,I=ie(arguments),h=I;var l=c.$allocate();return $.send(l,l.$initialize,h,d),l},-1),k(q,"$subclasses",function(){var u=this;if(typeof WeakRef<"u"){var d,I,h=[];for(d=0;d<u.$$subclasses.length;d++)I=u.$$subclasses[d].deref(),I!==void 0&&h.push(I);return h}else return u.$$subclasses}),k(q,"$superclass",function(){var u=this;return u.$$super||P}),k(q,"$to_s",function E(){E.$$p;var u=this;E.$$p=null;var d=u.$$singleton_of;return d&&d.$$is_a_module?"#<Class:"+d.$name()+">":d?"#<Class:#<"+d.$$class.$name()+":0x"+$.id(d).$to_s(16)+">>":X(u,U(u,"to_s",E,!1,!0),"to_s",[],null)}),k(q,"$attached_object",function(){var u=this;if(u.$$singleton_of!=null)return u.$$singleton_of;te.$raise(V("TypeError"),"`"+u+"' is not a singleton class")}),Z(q,"inspect","to_s")}("::",null,p)};Opal.modules["corelib/basic_object"]=function($){var z=$.klass,w=$.slice,D=$.def,k=$.alias,ee=$.return_val,J=$.Opal,C=$.truthy,W=$.range,m=$.Kernel,B=$.to_a,ie=$.send,X=$.eqeq,U=$.rb_ge,te=$.nil,Z=$.$$$;return $.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),function(A,p){var P=z(A,p,"BasicObject");return D(P,"$initialize",function(M){return w(arguments),te},-1),D(P,"$==",function(M){var L=this;return L===M}),D(P,"$eql?",function(M){var L=this;return L["$=="](M)}),k(P,"equal?","=="),D(P,"$__id__",function(){var M=this;return M.$$id!=null||$.prop(M,"$$id",$.uid()),M.$$id}),D(P,"$__send__",function V(M,L){var g=V.$$p||te,q,R,x=this;V.$$p=null,q=w(arguments,1),R=q,M.$$is_string||x.$raise(Z("TypeError"),""+x.$inspect()+" is not a symbol nor a string");var E=x[$.jsid(M)];return E?(g!==te&&(E.$$p=g),E.apply(x,R)):(g!==te&&(x.$method_missing.$$p=g),x.$method_missing.apply(x,[M].concat(R)))},-2),D(P,"$!",ee(!1)),J.$pristine("!"),D(P,"$!=",function(M){var L=this;return L["$=="](M)["$!"]()}),D(P,"$instance_eval",function V(M){var L=V.$$p||te,g,q,R,x=this,E=te,u=te,d=te,I=te,h=te,c=te;if(V.$$p=null,g=w(arguments),q=g,C(L["$nil?"]())&&C(!!$.compile))C(W(1,3,!1)["$cover?"](q.$size()))||m.$raise(Z("ArgumentError"),"wrong number of arguments (0 for 1..3)"),R=[].concat(B(q)),E=R[0]==null?te:R[0],u=R[1]==null?te:R[1],R[2]==null||R[2],d=new Map([["file",C(I=u)?I:"(eval)"],["eval",!0]]),h=new Map([["arity_check",!1]]).$merge(d),c=J.$compile(E,h),L=ie(m,"proc",[],function K(){var _=K.$$s==null?this:K.$$s;return new Function("Opal,self","return "+c)($,_)},{$$s:x});else{if(C(L["$nil?"]())&&C(U(q.$length(),1))&&X(q.$first()["$[]"](0),"@"))return x.$instance_variable_get(q.$first());C(q["$any?"]())&&m.$raise(Z("ArgumentError"),"wrong number of arguments ("+q.$size()+" for 0)")}var l=L.$$s,y;if(L.$$s=null,x.$$is_a_module){x.$$eval=!0;try{y=L.call(x,x)}finally{x.$$eval=!1}}else y=L.call(x,x);return L.$$s=l,y},-1),D(P,"$instance_exec",function V(M){var L=V.$$p||te,g,q,R=this;V.$$p=null,g=w(arguments),q=g,C(L)||m.$raise(Z("ArgumentError"),"no block given");var x=L.$$s,E;if(L.$$s=null,R.$$is_a_module){R.$$eval=!0;try{E=L.apply(R,q)}finally{R.$$eval=!1}}else E=L.apply(R,q);return L.$$s=x,E},-1),D(P,"$singleton_method_added",function(M){return w(arguments),te},-1),D(P,"$singleton_method_removed",function(M){return w(arguments),te},-1),D(P,"$singleton_method_undefined",function(M){return w(arguments),te},-1),D(P,"$method_missing",function V(M,L){V.$$p;var g,q,R=this,x=te;return V.$$p=null,g=w(arguments,1),q=g,x=J.$inspect(R),m.$raise(Z("NoMethodError").$new("undefined method `"+M+"' for "+x,M,q),te,m.$caller(1))},-2),J.$pristine(P,"method_missing"),D(P,"$respond_to_missing?",function(M,L){return!1},-2)}("::",null)};Opal.modules["corelib/kernel"]=function($){var z=$.truthy,w=$.coerce_to,D=$.respond_to,k=$.Opal,ee=$.deny_frozen_access,J=$.freeze,C=$.freeze_props,W=$.jsid,m=$.each_ivar,B=$.module,ie=$.return_val,X=$.def,U=$.Kernel,te=$.gvars,Z=$.slice,A=$.send,p=$.to_a,P=$.ensure_kwargs,V=$.hash_get,M=$.eqeq,L=$.rb_plus,g=$.extract_kwargs,q=$.eqeqeq,R=$.return_self,x=$.rb_le,E=$.rb_lt,u=$.Object,d=$.alias,I=$.klass,h=[],c=$.nil,l=$.$$$;return $.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,to_i,Integer,coerce_to!,===,enum_for,result,shift,write,format,puts,<=,length,[],print,readline,<,first,split,to_str,exception,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),function(y,K){var _=B(y,"Kernel"),s=[_].concat(K),n=$.$r(s);X(_,"$=~",ie(!1)),X(_,"$!~",function(t){var i=this;return i["$=~"](t)["$!"]()}),X(_,"$===",function(t){var i=this,a=c;return z(a=i.$object_id()["$=="](t.$object_id()))?a:i["$=="](t)}),X(_,"$<=>",function(t){var i=this;i.$$comparable=!0;var a=i["$=="](t);return a&&a!==c?0:c}),X(_,"$method",function(t){var i=this,a=i[W(t)];return(!a||a.$$stub)&&U.$raise(l("NameError").$new("undefined method `"+t+"' for class `"+i.$class()+"'",t)),l("Method").$new(i,a.$$owner||i.$class(),a,t)}),X(_,"$methods",function(t){var i=this;return t==null&&(t=!0),z(t)?$.methods(i):$.own_methods(i)},-1),X(_,"$public_methods",function(t){var i=this;return t==null&&(t=!0),z(t)?$.methods(i):$.receiver_methods(i)},-1),X(_,"$Array",function(t){var i;return t===c?[]:t.$$is_array?t:(i=k["$coerce_to?"](t,l("Array"),"to_ary"),i!==c||(i=k["$coerce_to?"](t,l("Array"),"to_a"),i!==c)?i:[t])}),X(_,"$at_exit",function e(){var t=e.$$p||c,i=c;return te.__at_exit__==null&&(te.__at_exit__=c),e.$$p=null,te.__at_exit__=z(i=te.__at_exit__)?i:[],te.__at_exit__["$<<"](t),t}),X(_,"$caller",function(t,i){t==null&&(t=1),i==null&&(i=c);var a,o;a=new Error().$backtrace(),o=[];for(var v=t+1,S=a.length;v<S;v++)a[v].match(/runtime\.js/)||o.push(a[v]);return i!=c&&(o=o.slice(0,i)),o},-1),X(_,"$caller_locations",function(t){var i,a,o=this;return i=Z(arguments),a=i,A(A(o,"caller",p(a)),"map",[],function(S){return S==null&&(S=c),l(l(l("Thread"),"Backtrace"),"Location").$new(S)})},-1),X(_,"$class",function(){var t=this;return t.$$class}),X(_,"$copy_instance_variables",function(t){var i=this,a=Object.keys(t),o,v,S;for(o=0,v=a.length;o<v;o++)S=a[o],S.charAt(0)!=="$"&&t.hasOwnProperty(S)&&(i[S]=t[S])}),X(_,"$copy_singleton_methods",function(t){var i=this,a,o,v,S;if(t.hasOwnProperty("$$meta")&&t.$$meta!==null){var j=$.get_singleton_class(t),T=$.get_singleton_class(i);for(v=Object.getOwnPropertyNames(j.$$prototype),a=0,S=v.length;a<S;a++)o=v[a],$.is_method(o)&&(T.$$prototype[o]=j.$$prototype[o]);T.$$const=Object.assign({},j.$$const),Object.setPrototypeOf(T.$$prototype,Object.getPrototypeOf(j.$$prototype))}for(a=0,v=Object.getOwnPropertyNames(t),S=v.length;a<S;a++)o=v[a],o.charAt(0)==="$"&&o.charAt(1)!=="$"&&t.hasOwnProperty(o)&&(i[o]=t[o])}),X(_,"$clone",function(t){var i,a=this,o=c;return t=P(t),i=V(t,"freeze"),i==null&&(i=c),z(i["$nil?"]())||M(i,!0)||M(i,!1)||a.$raise(n("ArgumentError"),"unexpected value for freeze: "+i.$class()),o=a.$class().$allocate(),o.$copy_instance_variables(a),o.$copy_singleton_methods(a),o.$initialize_clone(a,new Map([["freeze",i]])),(M(i,!0)||z(i["$nil?"]())&&z(a["$frozen?"]()))&&o.$freeze(),o},-1),X(_,"$initialize_clone",function(t,i){var a=this;return i=P(i),V(i,"freeze"),a.$initialize_copy(t),a},-2),X(_,"$define_singleton_method",function e(t,i){var a=e.$$p||c,o=this;return e.$$p=null,A(o.$singleton_class(),"define_method",[t,i],a.$to_proc())},-2),X(_,"$dup",function(){var t=this,i=c;return i=t.$class().$allocate(),i.$copy_instance_variables(t),i.$initialize_dup(t),i}),X(_,"$initialize_dup",function(t){var i=this;return i.$initialize_copy(t)}),X(_,"$enum_for",function e(t,i){var a=e.$$p||c,o,v,S,j=this;return e.$$p=null,o=Z(arguments),o.length>0&&(v=o.shift()),v==null&&(v="each"),S=o,A(l("Enumerator"),"for",[j,v].concat(p(S)),a.$to_proc())},-1),X(_,"$equal?",function(t){var i=this;return i===t}),X(_,"$exit",function(t){var i=c,a=c;for(te.__at_exit__==null&&(te.__at_exit__=c),t==null&&(t=!0),te.__at_exit__=z(i=te.__at_exit__)?i:[];!z(te.__at_exit__["$empty?"]());)a=te.__at_exit__.$pop(),a.$call();return t.$$is_boolean?t=t?0:1:t=w(t,l("Integer"),"to_int"),$.exit(t),c},-1),X(_,"$extend",function(t){var i,a,o=this;i=Z(arguments),a=i,a.length==0&&o.$raise(l("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),ee(o);for(var v=o.$singleton_class(),S=a.length-1;S>=0;S--){var j=a[S];j.$$is_module||U.$raise(l("TypeError"),"wrong argument type "+j.$class()+" (expected Module)"),j.$append_features(v),j.$extend_object(o),j.$extended(o)}return o},-1),X(_,"$freeze",function(){var t=this;return z(t["$frozen?"]())?t:typeof t=="object"?(C(t),J(t)):t}),X(_,"$frozen?",function(){var t=this;switch(typeof t){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return t.$$frozen||!1;default:return!1}}),X(_,"$gets",function(t){var i,a;return te.stdin==null&&(te.stdin=c),i=Z(arguments),a=i,A(te.stdin,"gets",p(a))},-1),X(_,"$hash",function(){var t=this;return t.$__id__()}),X(_,"$initialize_copy",ie(c));var r=[];return X(_,"$inspect",function(){var t=this,i=c,a=c,o=c,v=c;return function(){try{try{return i="",a=t.$__id__(),z(r["$include?"](a))?i=" ...":(r["$<<"](a),o=!0,A(t.$instance_variables(),"each",[],function S(j){var T=S.$$s==null?this:S.$$s,Y=c,O=c;return j==null&&(j=c),Y=T.$instance_variable_get(j),O=n("Opal").$inspect(Y),i=L(i," "+j+"="+O)},{$$s:t})),"#<"+t.$class()+":0x"+a.$to_s(16)+i+">"}catch(S){if($.rescue(S,[n("StandardError")])){v=S;try{return"#<"+t.$class()+":0x"+a.$to_s(16)+">"}finally{$.pop_exception(S)}}else throw S}}finally{z(o)&&r.$pop()}}()}),X(_,"$instance_of?",function(t){var i=this;return!t.$$is_class&&!t.$$is_module&&U.$raise(l("TypeError"),"class or module required"),i.$$class===t}),X(_,"$instance_variable_defined?",function(t){var i=this;return t=k["$instance_variable_name!"](t),$.hasOwnProperty.call(i,t.substr(1))}),X(_,"$instance_variable_get",function(t){var i=this;t=k["$instance_variable_name!"](t);var a=i[$.ivar(t.substr(1))];return a??c}),X(_,"$instance_variable_set",function(t,i){var a=this;return ee(a),t=k["$instance_variable_name!"](t),a[$.ivar(t.substr(1))]=i}),X(_,"$remove_instance_variable",function(t){var i=this;t=k["$instance_variable_name!"](t);var a=$.ivar(t.substr(1)),o;return i.hasOwnProperty(a)?(o=i[a],delete i[a],o):U.$raise(l("NameError"),"instance variable "+t+" not defined")}),X(_,"$instance_variables",function(){var t=this,i=[];return m(t,function(a){a.substr(-1)==="$"&&(a=a.slice(0,a.length-1)),i.push("@"+a)}),i}),X(_,"$Integer",function(t,i,a){var o,v,S,j;o=Z(arguments,1),v=g(o),v=P(v),o.length>0&&(S=o.shift()),j=V(v,"exception"),j==null&&(j=!0);var T,Y,O;if(j=z(j),!t.$$is_string){if(S!==void 0)if(j)U.$raise(l("ArgumentError"),"base specified for non string value");else return c;if(t===c)if(j)U.$raise(l("TypeError"),"can't convert nil into Integer");else return c;if(t.$$is_number){if(t===1/0||t===-1/0||isNaN(t))if(j)U.$raise(l("FloatDomainError"),t);else return c;return Math.floor(t)}if(t["$respond_to?"]("to_int")&&(T=t.$to_int(),$.is_a(T,l("Integer")))||t["$respond_to?"]("to_i")&&(T=t.$to_i(),$.is_a(T,l("Integer"))))return T;if(j)U.$raise(l("TypeError"),"can't convert "+t.$class()+" into Integer");else return c}if(t==="0")return 0;if(S===void 0)S=0;else if(S=w(S,l("Integer"),"to_int"),S===1||S<0||S>36)if(j)U.$raise(l("ArgumentError"),"invalid radix "+S);else return c;if(Y=t.toLowerCase(),Y=Y.replace(/(\d)_(?=\d)/g,"$1"),Y=Y.replace(/^(\s*[+-]?)(0[bodx]?)/,function(ae,le,_e){switch(_e){case"0b":if(S===0||S===2)return S=2,le;case"0":case"0o":if(S===0||S===8)return S=8,le;case"0d":if(S===0||S===10)return S=10,le;case"0x":if(S===0||S===16)return S=16,le}if(j)U.$raise(l("ArgumentError"),'invalid value for Integer(): "'+t+'"');else return c}),S=S===0?10:S,O="0-"+(S<=10?S-1:"9a-"+String.fromCharCode(97+(S-11))),!new RegExp("^\\s*[+-]?["+O+"]+\\s*$").test(Y))if(j)U.$raise(l("ArgumentError"),'invalid value for Integer(): "'+t+'"');else return c;if(T=parseInt(Y,S),isNaN(T))if(j)U.$raise(l("ArgumentError"),'invalid value for Integer(): "'+t+'"');else return c;return T},-2),X(_,"$Float",function(t,i){var a;i=P(i),a=V(i,"exception"),a==null&&(a=!0);var o;if(a=z(a),t===c)if(a)U.$raise(l("TypeError"),"can't convert nil into Float");else return c;if(t.$$is_string){if(o=t.toString(),o=o.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(o))return U.$Integer(o);if(!/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(o))if(a)U.$raise(l("ArgumentError"),'invalid value for Float(): "'+t+'"');else return c;return parseFloat(o)}return a?k["$coerce_to!"](t,l("Float"),"to_f"):w(t,l("Float"),"to_f")},-2),X(_,"$Hash",function(t){return z(t["$nil?"]())||M(t,[])?new Map:q(l("Hash"),t)?t:k["$coerce_to!"](t,l("Hash"),"to_hash")}),X(_,"$is_a?",function(t){var i=this;return!t.$$is_class&&!t.$$is_module&&U.$raise(l("TypeError"),"class or module required"),$.is_a(i,t)}),X(_,"$itself",R),X(_,"$lambda",function e(){var t=e.$$p||c;return e.$$p=null,$.lambda(t)}),X(_,"$load",function(t){return t=k["$coerce_to!"](t,l("String"),"to_str"),$.load(t)}),X(_,"$loop",function e(){var t=e.$$p||c,i=this,a=c;if(e.$$p=null,t===c)return A(i,"enum_for",["loop"],function(){return l(l("Float"),"INFINITY")});for(;z(!0);)try{$.yieldX(t,[])}catch(o){if($.rescue(o,[l("StopIteration")])){a=o;try{return a.$result()}finally{$.pop_exception(o)}}else throw o}return i}),X(_,"$nil?",ie(!1)),X(_,"$printf",function(t){var i,a,o=this,v=c;return te.stdout==null&&(te.stdout=c),i=Z(arguments),a=i,z(a["$empty?"]())||(v=z(a[0].$$is_string)?te.stdout:a.$shift(),v.$write(A(o,"format",p(a)))),c},-1),X(_,"$proc",function e(){var t=e.$$p||c;return e.$$p=null,z(t)||U.$raise(l("ArgumentError"),"tried to create Proc object without a block"),t.$$is_lambda=!1,t}),X(_,"$puts",function(t){var i,a;return te.stdout==null&&(te.stdout=c),i=Z(arguments),a=i,A(te.stdout,"puts",p(a))},-1),X(_,"$p",function(t){var i,a;return i=Z(arguments),a=i,A(a,"each",[],function(v){return te.stdout==null&&(te.stdout=c),v==null&&(v=c),te.stdout.$puts(v.$inspect())}),z(x(a.$length(),1))?a["$[]"](0):a},-1),X(_,"$print",function(t){var i,a;return te.stdout==null&&(te.stdout=c),i=Z(arguments),a=i,A(te.stdout,"print",p(a))},-1),X(_,"$readline",function(t){var i,a;return te.stdin==null&&(te.stdin=c),i=Z(arguments),a=i,A(te.stdin,"readline",p(a))},-1),X(_,"$warn",function(t,i){var a,o,v,S,j,T,Y=this,O=c;return te.VERBOSE==null&&(te.VERBOSE=c),te.stderr==null&&(te.stderr=c),a=Z(arguments),o=g(a),o=P(o),v=a,S=V(o,"uplevel"),S==null&&(S=c),z(S)&&(S=k["$coerce_to!"](S,l("Integer"),"to_str"),z(E(S,0))&&U.$raise(l("ArgumentError"),"negative level ("+S+")"),O=(j=(T=Y.$caller(L(S,1),1).$first(),T===c||T==null?c:T.$split(":in `")),j===c||j==null?c:j.$first()),z(O)&&(O=""+O+": "),v=A(v,"map",[],function(le){return le==null&&(le=c),""+O+"warning: "+le})),z(te.VERBOSE["$nil?"]())||z(v["$empty?"]())?c:A(te.stderr,"puts",p(v))},-1),X(_,"$raise",function(t,i,a){throw te["!"]==null&&(te["!"]=c),i==null&&(i=c),a==null&&(a=c),t==null&&te["!"]!==c?te["!"]:(t==null?t=l("RuntimeError").$new(""):D(t,"$to_str")?t=l("RuntimeError").$new(t.$to_str()):t.$$is_class&&D(t,"$exception")?t=t.$exception(i):t.$$is_exception||(t=l("TypeError").$new("exception class/object expected")),a!==c&&t.$set_backtrace(a),te["!"]!==c&&$.exceptions.push(te["!"]),te["!"]=t,t)},-1),X(_,"$rand",function(t){return t===void 0?l(l("Random"),"DEFAULT").$rand():(t.$$is_number&&(t<0&&(t=Math.abs(t)),t%1!==0&&(t=t.$to_i()),t===0&&(t=void 0)),l(l("Random"),"DEFAULT").$rand(t))},-1),X(_,"$respond_to?",function(t,i){var a=this;i==null&&(i=!1);var o=a[W(t)];return typeof o=="function"&&!o.$$stub?!0:a["$respond_to_missing?"].$$pristine===!0?!1:a["$respond_to_missing?"](t,i)},-2),X(_,"$respond_to_missing?",function(t,i){return!1},-2),k.$pristine(_,"respond_to?","respond_to_missing?"),X(_,"$require",function(t){return typeof t!="string"&&$.String&&$.Array&&(t=k["$coerce_to!"](t,l("String"),"to_str")),$.require(t)}),X(_,"$require_relative",function(t){return k["$try_convert!"](t,l("String"),"to_str"),t=l("File").$expand_path(l("File").$join($.current_file,"..",t)),$.require(t)}),X(_,"$require_tree",function(t,i){var a;i=P(i),a=V(i,"autoload"),a==null&&(a=!1);var o=[];t=l("File").$expand_path(t),t=$.normalize(t),t==="."&&(t="");for(var v in $.modules)v["$start_with?"](t)&&(a?o.push([v,!0]):o.push([v,$.require(v)]));return o},-2),X(_,"$singleton_class",function(){var t=this;return $.get_singleton_class(t)}),X(_,"$sleep",function(t){t==null&&(t=c),t===c&&U.$raise(l("TypeError"),"can't convert NilClass into time interval"),t.$$is_number||U.$raise(l("TypeError"),"can't convert "+t.$class()+" into time interval"),t<0&&U.$raise(l("ArgumentError"),"time interval must be positive");for(var i=$.global.performance?function(){return performance.now()}:function(){return new Date},a=i();i()-a<=t*1e3;);return Math.round(t)},-1),X(_,"$srand",function(t){return t==null&&(t=n("Random").$new_seed()),l("Random").$srand(t)},-1),X(_,"$String",function(t){var i=c;return z(i=k["$coerce_to?"](t,l("String"),"to_str"))?i:k["$coerce_to!"](t,l("String"),"to_s")}),X(_,"$tap",function e(){var t=e.$$p||c,i=this;return e.$$p=null,$.yield1(t,i),i}),X(_,"$to_proc",R),X(_,"$to_s",function(){var t=this;return"#<"+t.$class()+":0x"+t.$__id__().$to_s(16)+">"}),X(_,"$catch",function e(t){var i=e.$$p||c,a=c,o=c;e.$$p=null,t==null&&(t=c);try{return t=z(a=t)?a:u.$new(),$.yield1(i,t)}catch(v){if($.rescue(v,[l("UncaughtThrowError")])){o=v;try{return M(o.$tag(),t)?o.$value():U.$raise()}finally{$.pop_exception(v)}}else throw v}},-1),X(_,"$throw",function(t,i){return i==null&&(i=c),U.$raise(l("UncaughtThrowError").$new(t,i))},-2),X(_,"$open",function e(t){var i=e.$$p||c,a,o;return e.$$p=null,a=Z(arguments),o=a,A(l("File"),"open",p(o),i.$to_proc())},-1),X(_,"$yield_self",function e(){var t=e.$$p||c,i=this;return e.$$p=null,t===c?A(i,"enum_for",["yield_self"],ie(1)):$.yield1(t,i)}),d(_,"fail","raise"),d(_,"kind_of?","is_a?"),d(_,"object_id","__id__"),d(_,"public_send","__send__"),d(_,"send","__send__"),d(_,"then","yield_self"),d(_,"to_enum","enum_for")}("::",h),function(y,K){var _=I(y,K,"Object");return delete u.$$prototype.$require,_.$include(U)}("::",null)};Opal.modules["corelib/main"]=function($){var z=$.return_val,w=$.def,D=$.Object,k=$.slice,ee=$.Kernel,J=$.top;return $.nil,$.add_stubs("include,raise"),function(C,W){return w(C,"$to_s",z("main")),w(C,"$include",function(B){return D.$include(B)}),w(C,"$autoload",function(B){var ie,X;return ie=k(arguments),X=ie,$.Object.$autoload.apply($.Object,X)},-1),w(C,"$using",function(B){return ee.$raise("main.using is permitted only at toplevel")})}($.get_singleton_class(J))};Opal.modules["corelib/error/errno"]=function($){var z=$.module,w=$.truthy,D=$.rb_plus,k=$.send2,ee=$.find_super,J=$.def,C=$.klass,W=$.nil,m=$.$$$;return $.add_stubs("+,errno,class,attr_reader"),function(B,ie){var X=z(B,"Errno"),U=W,te=W;U=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],te=W;var Z;for(Z=0;Z<U.length;Z++)(function(){var A=U[Z][0],p=U[Z][1],P=U[Z][2];te=$.klass(X,$.SystemCallError,A),te.errno=P,function(V,M){return J(V,"$new",function L(g){L.$$p;var q=this,R=W;return L.$$p=null,g==null&&(g=W),R=p,w(g)&&(R=D(R," - "+g)),k(q,ee(q,"new",L,!1,!0),"new",[R],null)},-1)}($.get_singleton_class(te))})()}("::"),function(B,ie,X){var U=C(B,ie,"SystemCallError");return J(U,"$errno",function(){var Z=this;return Z.$class().$errno()}),function(te,Z){return te.$attr_reader("errno")}($.get_singleton_class(U))}("::",m("StandardError"))};Opal.modules["corelib/error"]=function($){var z=$.klass,w=$.slice,D=$.gvars,k=$.defs,ee=$.send,J=$.to_a,C=$.def,W=$.send2,m=$.find_super,B=$.truthy,ie=$.Kernel,X=$.not,U=$.rb_plus,te=$.eqeq,Z=$.Object,A=$.ensure_kwargs,p=$.hash_get,P=$.module,V=[],M=$.nil,L=$.$$$;return $.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(g,q,R){var x=z(g,q,"Exception"),E=[x].concat(R),u=$.$r(E),d=x.$$prototype;d.message=M,$.prop(x.$$prototype,"$$is_exception",!0);var I;Error.stackTraceLimit=100,k(x,"$new",function(l){var y,K,_=this;D["!"]==null&&(D["!"]=M),y=w(arguments),K=y;var s=K.length>0?K[0]:M,n=new _.$$constructor(s);return n.name=_.$$name,n.message=s,n.cause=D["!"],$.send(n,n.$initialize,K),$.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace(n,I),n},-1),I=x.$new,k(x,"$exception",function(l){var y,K,_=this;return y=w(arguments),K=y,ee(_,"new",J(K))},-1),C(x,"$initialize",function(l){var y,K,_=this;return y=w(arguments),K=y,_.message=K.length>0?K[0]:M},-1),C(x,"$copy_instance_variables",function c(l){var y=c.$$p||M,K=this;c.$$p=null,W(K,m(K,"copy_instance_variables",c,!1,!0),"copy_instance_variables",[l],y),K.message=l.message,K.cause=l.cause,K.stack=l.stack});function h(c){for(var l=[],y,K=0;K<c.length;K++){var _=c[K];!_||!_.$$is_string||((y=_.match(/^    at (.*?) \((.*?)\)$/))?l.push(y[2]+":in `"+y[1]+"'"):(y=_.match(/^    at (.*?)$/))?l.push(y[1]+":in `undefined'"):(y=_.match(/^  from (.*?)$/))?l.push(y[1]):(y=_.match(/^(.*?)@(.*?)$/))&&l.push(y[2]+":in `"+y[1]+"'"))}return l}return C(x,"$backtrace",function(){var l=this;if(l.backtrace)return l.backtrace;var y=l.stack;return typeof y<"u"&&y.$$is_string?l.backtrace=h(y.split(`
`)):y?l.backtrace=h(y):[]}),C(x,"$backtrace_locations",function(){var l,y=this;return y.backtrace_locations||(y.backtrace_locations=(l=y.$backtrace(),l===M||l==null?M:ee(l,"map",[],function(_){return _==null&&(_=M),L(L(L("Thread"),"Backtrace"),"Location").$new(_)}))),y.backtrace_locations}),C(x,"$cause",function(){var l=this;return l.cause||M}),C(x,"$exception",function(l){var y=this;if(l==null&&(l=M),l===M||y===l)return y;var K=y.$clone();return K.message=l,y.backtrace&&(K.backtrace=y.backtrace.$dup()),K.stack=y.stack,K.cause=y.cause,K},-1),C(x,"$message",function(){var l=this;return l.$to_s()}),C(x,"$full_message",function(l){var y,K=this,_=M,s=M,n=M,r=M,e=M,t=M,i=M,a=M,o=M;return D.stderr==null&&(D.stderr=M),l==null&&(l=M),B(u("Hash","skip_raise")?"constant":M)?(l=new Map([["highlight",D.stderr["$tty?"]()],["order","top"]]).$merge(B(_=l)?_:new Map),y=[l["$[]"]("highlight"),l["$[]"]("order")],s=y[0],n=y[1],B([!0,!1]["$include?"](s))||ie.$raise(L("ArgumentError"),"expected true or false as highlight: "+s),B(["top","bottom"]["$include?"](n))||ie.$raise(L("ArgumentError"),"expected :top or :bottom as order: "+n),B(s)?(r="\x1B[1;4m",e="\x1B[1m",t="\x1B[m"):r=e=t="",i=K.$backtrace().$dup(),(X(i)||B(i["$empty?"]()))&&(i=K.$caller()),a=i.$shift(),o=""+a+": ",o=U(o,""+e+K.$to_s()+" ("+r+K.$class()+t+e+")"+t+`
`),o=U(o,ee(i,"map",[],function(S){return S==null&&(S=M),"	from "+S+`
`}).$join()),B(K.$cause())&&(o=U(o,K.$cause().$full_message(new Map([["highlight",s]])))),te(n,"bottom")&&(o=o.$split(`
`).$reverse().$join(`
`),o=U(""+e+"Traceback"+t+` (most recent call last):
`,o)),o):""+K.message+`
`+K.stack},-1),C(x,"$inspect",function(){var l=this,y=M;return y=l.$to_s(),B(y["$empty?"]())?l.$class().$to_s():"#<"+l.$class().$to_s()+": "+l.$to_s()+">"}),C(x,"$set_backtrace",function(l){var y=this,K=!0,_,s;if(l===M)y.backtrace=M,y.stack="";else if(l.$$is_string)y.backtrace=[l],y.stack="  from "+l;else{if(l.$$is_array){for(_=0,s=l.length;_<s;_++)if(!l[_].$$is_string){K=!1;break}}else K=!1;K===!1&&ie.$raise(L("TypeError"),"backtrace must be Array of String"),y.backtrace=l,y.stack=ee(l,"map",[],function(r){return r==null&&(r=M),U("  from ",r)}).join(`
`)}return l}),C(x,"$to_s",function(){var l=this,y=M,K=M;return B(y=B(K=l.message)?l.message.$to_s():K)?y:l.$class().$to_s()})}("::",Error,V),z("::",L("Exception"),"ScriptError"),z("::",L("ScriptError"),"SyntaxError"),z("::",L("ScriptError"),"LoadError"),z("::",L("ScriptError"),"NotImplementedError"),z("::",L("Exception"),"SystemExit"),z("::",L("Exception"),"NoMemoryError"),z("::",L("Exception"),"SignalException"),z("::",L("SignalException"),"Interrupt"),z("::",L("Exception"),"SecurityError"),z("::",L("Exception"),"SystemStackError"),z("::",L("Exception"),"StandardError"),z("::",L("StandardError"),"EncodingError"),z("::",L("StandardError"),"ZeroDivisionError"),z("::",L("StandardError"),"NameError"),z("::",L("NameError"),"NoMethodError"),z("::",L("StandardError"),"RuntimeError"),z("::",L("RuntimeError"),"FrozenError"),z("::",L("StandardError"),"LocalJumpError"),z("::",L("StandardError"),"TypeError"),z("::",L("StandardError"),"ArgumentError"),z("::",L("ArgumentError"),"UncaughtThrowError"),z("::",L("StandardError"),"IndexError"),z("::",L("IndexError"),"StopIteration"),z("::",L("StopIteration"),"ClosedQueueError"),z("::",L("IndexError"),"KeyError"),z("::",L("StandardError"),"RangeError"),z("::",L("RangeError"),"FloatDomainError"),z("::",L("StandardError"),"IOError"),z("::",L("IOError"),"EOFError"),z("::",L("StandardError"),"SystemCallError"),z("::",L("StandardError"),"RegexpError"),z("::",L("StandardError"),"ThreadError"),z("::",L("StandardError"),"FiberError"),Z.$autoload("Errno","corelib/error/errno"),function(g,q){var R=z(g,q,"FrozenError");return R.$attr_reader("receiver"),C(R,"$initialize",function x(E,u){var d;x.$$p;var I=this;return x.$$p=null,u=A(u),d=p(u,"receiver"),d==null&&(d=M),W(I,m(I,"initialize",x,!1,!0),"initialize",[E],null),I.receiver=d},-2)}("::",L("RuntimeError")),function(g,q){var R=z(g,q,"UncaughtThrowError"),x=R.$$prototype;return x.tag=M,R.$attr_reader("tag","value"),C(R,"$initialize",function E(u,d){E.$$p;var I=this;return E.$$p=null,d==null&&(d=M),I.tag=u,I.value=d,W(I,m(I,"initialize",E,!1,!0),"initialize",["uncaught throw "+I.tag.$inspect()],null)},-2)}("::",L("ArgumentError")),function(g,q){var R=z(g,q,"NameError");return R.$attr_reader("name"),C(R,"$initialize",function x(E,u){x.$$p;var d=this;return x.$$p=null,u==null&&(u=M),W(d,m(d,"initialize",x,!1,!0),"initialize",[E],null),d.name=u},-2)}("::",null),function(g,q){var R=z(g,q,"NoMethodError");return R.$attr_reader("args"),C(R,"$initialize",function x(E,u,d){x.$$p;var I=this;return x.$$p=null,u==null&&(u=M),d==null&&(d=[]),W(I,m(I,"initialize",x,!1,!0),"initialize",[E,u],null),I.args=d},-2)}("::",null),function(g,q){var R=z(g,q,"StopIteration");return R.$attr_reader("result")}("::",null),function(g,q){var R=z(g,q,"KeyError"),x=R.$$prototype;return x.receiver=x.key=M,C(R,"$initialize",function E(u,d){var I,h;E.$$p;var c=this;return E.$$p=null,d=A(d),I=p(d,"receiver"),I==null&&(I=M),h=p(d,"key"),h==null&&(h=M),W(c,m(c,"initialize",E,!1,!0),"initialize",[u],null),c.receiver=I,c.key=h},-2),C(R,"$receiver",function(){var u=this,d=M;return B(d=u.receiver)?d:ie.$raise(L("ArgumentError"),"no receiver is available")}),C(R,"$key",function(){var u=this,d=M;return B(d=u.key)?d:ie.$raise(L("ArgumentError"),"no key is available")})}("::",null),function(g,q){var R=z(g,q,"LocalJumpError");return R.$attr_reader("exit_value","reason"),C(R,"$initialize",function x(E,u,d){x.$$p;var I=this;return x.$$p=null,u==null&&(u=M),d==null&&(d="noreason"),W(I,m(I,"initialize",x,!1,!0),"initialize",[E],null),I.exit_value=u,I.reason=d},-2)}("::",null),function(g,q){var R=P(g,"JS"),x=[R].concat(q);return z(x[0],null,"Error"),M}("::",V)};Opal.modules["corelib/constants"]=function($){var z=$.const_set;$.nil;var w=$.$$$;return z("::","RUBY_PLATFORM","opal"),z("::","RUBY_ENGINE","opal"),z("::","RUBY_VERSION","3.2.0"),z("::","RUBY_ENGINE_VERSION","1.8.2"),z("::","RUBY_RELEASE_DATE","2023-11-23"),z("::","RUBY_PATCHLEVEL",0),z("::","RUBY_REVISION","0"),z("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),z("::","RUBY_DESCRIPTION","opal "+w("RUBY_ENGINE_VERSION")+" ("+w("RUBY_RELEASE_DATE")+" revision "+w("RUBY_REVISION")+")")};Opal.modules["opal/base"]=function($){var z=$.Object;return $.nil,$.add_stubs("require"),z.$require("corelib/runtime"),z.$require("corelib/helpers"),z.$require("corelib/module"),z.$require("corelib/class"),z.$require("corelib/basic_object"),z.$require("corelib/kernel"),z.$require("corelib/main"),z.$require("corelib/error"),z.$require("corelib/constants")};Opal.modules["corelib/nil"]=function($){var z=$.klass,w=$.Kernel,D=$.def,k=$.return_val,ee=$.ensure_kwargs,J=$.hash_get,C=$.NilClass,W=$.slice,m=$.truthy,B=$.rb_gt,ie=$.alias,X=$.nil,U=$.$$$;return $.add_stubs("raise,name,new,>,length,Rational,to_i"),function(te,Z,A){var p=z(te,Z,"NilClass");return p.$$prototype.$$meta=p,function(P,V){return D(P,"$allocate",function(){var L=this;return w.$raise(U("TypeError"),"allocator undefined for "+L.$name())}),$.udef(P,"$new"),X}($.get_singleton_class(p)),D(p,"$!",k(!0)),D(p,"$&",k(!1)),D(p,"$|",function(V){return V!==!1&&V!==X}),D(p,"$^",function(V){return V!==!1&&V!==X}),D(p,"$==",function(V){return V===X}),D(p,"$dup",k(X)),D(p,"$clone",function(V){return V=ee(V),J(V,"freeze"),X},-1),D(p,"$inspect",k("nil")),D(p,"$nil?",k(!0)),D(p,"$singleton_class",function(){return C}),D(p,"$to_a",function(){return[]}),D(p,"$to_h",function(){return new Map}),D(p,"$to_i",k(0)),D(p,"$to_s",k("")),D(p,"$to_c",function(){return U("Complex").$new(0,0)}),D(p,"$rationalize",function(V){var M,L;return M=W(arguments),L=M,m(B(L.$length(),1))&&w.$raise(U("ArgumentError")),w.$Rational(0,1)},-1),D(p,"$to_r",function(){return w.$Rational(0,1)}),D(p,"$instance_variables",function(){return[]}),ie(p,"to_f","to_i")}("::",null)};Opal.modules["corelib/boolean"]=function($){var z=$.klass,w=$.Kernel,D=$.def,k=$.return_self,ee=$.ensure_kwargs,J=$.hash_get,C=$.slice,W=$.truthy,m=$.send2,B=$.find_super,ie=$.to_a,X=$.alias,U=$.nil,te=$.$$$;return $.add_stubs("raise,name,==,to_s,__id__"),function(Z,A,p){var P=z(Z,A,"Boolean");$.prop(P.$$prototype,"$$is_boolean",!0);for(var V=["$$class","$$meta"],M=0;M<V.length;M++)Object.defineProperty(P.$$prototype,V[M],{configurable:!0,enumerable:!1,get:function(){return this==!0?$.TrueClass:this==!1?$.FalseClass:$.Boolean}});return Object.defineProperty(P.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:U}}),function(L,g){return D(L,"$allocate",function(){var R=this;return w.$raise(te("TypeError"),"allocator undefined for "+R.$name())}),$.udef(L,"$new"),U}($.get_singleton_class(P)),D(P,"$__id__",function(){var g=this;return g.valueOf()?2:0}),D(P,"$!",function(){var g=this;return g!=!0}),D(P,"$&",function(g){var q=this;return q==!0?g!==!1&&g!==U:!1}),D(P,"$|",function(g){var q=this;return q==!0?!0:g!==!1&&g!==U}),D(P,"$^",function(g){var q=this;return q==!0?g===!1||g===U:g!==!1&&g!==U}),D(P,"$==",function(g){var q=this;return q==!0===g.valueOf()}),D(P,"$singleton_class",function(){var g=this;return g.$$meta}),D(P,"$to_s",function(){var g=this;return g==!0?"true":"false"}),D(P,"$dup",k),D(P,"$clone",function(g){var q=this;return g=ee(g),J(g,"freeze"),q},-1),D(P,"$method_missing",function L(g,q){var R=L.$$p||U,x,E,u=this;L.$$p=null,x=C(arguments,1),E=x;var d=u.$$class.$$prototype[$.jsid(g)];return W(typeof d<"u"&&!d.$$stub)||m(u,B(u,"method_missing",L,!1,!0),"method_missing",[g].concat(ie(E)),R),$.send(u,d,E,R)},-2),D(P,"$respond_to_missing?",function(g,q){var R=this,x=R.$$class.$$prototype[$.jsid(g)];return typeof x<"u"&&!x.$$stub},-2),X(P,"eql?","=="),X(P,"equal?","=="),X(P,"inspect","to_s"),X(P,"object_id","__id__")}("::",Boolean),z("::",te("Boolean"),"TrueClass"),z("::",te("Boolean"),"FalseClass"),U};Opal.modules["corelib/comparable"]=function($){var z=$.truthy,w=$.module,D=$.rb_gt,k=$.rb_lt,ee=$.eqeqeq,J=$.Kernel,C=$.def,W=$.nil,m=$.$$$;return $.add_stubs(">,<,===,raise,class,<=>,equal?"),function(B){var ie=w(B,"Comparable"),X=W;function U(A){return $.is_a(A,$.Integer)?A:D(A,0)?1:k(A,0)?-1:0}function te(A,p){var P;ee(W,X=p)||ee(!0,X)||ee(!1,X)||ee(m("Integer"),X)||ee(m("Float"),X)?P=p.$inspect():P=p.$$class,J.$raise(m("ArgumentError"),"comparison of "+A.$class()+" with "+P+" failed")}function Z(A,p){var P=A["$<=>"](p);return z(P)||te(A,p),U(P)}return C(ie,"$==",function(p){var P=this,V=W;return z(P["$equal?"](p))?!0:P["$<=>"]==$.Kernel["$<=>"]?!1:P.$$comparable?(P.$$comparable=!1,!1):z(V=P["$<=>"](p))?U(V)==0:!1}),C(ie,"$>",function(p){var P=this;return Z(P,p)>0}),C(ie,"$>=",function(p){var P=this;return Z(P,p)>=0}),C(ie,"$<",function(p){var P=this;return Z(P,p)<0}),C(ie,"$<=",function(p){var P=this;return Z(P,p)<=0}),C(ie,"$between?",function(p,P){var V=this;return!(z(k(V,p))||z(D(V,P)))}),C(ie,"$clamp",function(p,P){var V=this;P==null&&(P=W);var M,L;if(P===W&&($.is_a(p,$.Range)||J.$raise(m("TypeError"),"wrong argument type "+p.$class()+" (expected Range)"),L=p.excl,P=p.end,p=p.begin,P!==W&&L&&J.$raise(m("ArgumentError"),"cannot clamp with an exclusive range")),p!==W&&P!==W&&Z(p,P)>0&&J.$raise(m("ArgumentError"),"min argument must be smaller than max argument"),p!==W){if(M=Z(V,p),M==0)return V;if(M<0)return p}return P!==W&&(M=Z(V,P),M>0)?P:V},-2)}("::")};Opal.modules["corelib/regexp"]=function($){var z=$.coerce_to,w=$.prop,D=$.freeze,k=$.klass,ee=$.const_set,J=$.send2,C=$.find_super,W=$.def,m=$.truthy,B=$.gvars,ie=$.slice,X=$.Kernel,U=$.Opal,te=$.alias,Z=$.send,A=$.regexp,p=$.rb_plus,P=$.ensure_kwargs,V=$.hash_get,M=$.rb_ge,L=$.to_a,g=$.eqeqeq,q=$.rb_minus,R=$.return_ivar,x=[],E=$.nil,u=$.$$$;return $.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),k("::",u("StandardError"),"RegexpError"),function(d,I,h){var c=k(d,I,"Regexp"),l=[c].concat(h),y=$.$r(l);return ee(c,"IGNORECASE",1),ee(c,"EXTENDED",2),ee(c,"MULTILINE",4),$.prop(c.$$prototype,"$$is_regexp",!0),function(K,_){var s=[K].concat(_),n=$.$r(s);return W(K,"$allocate",function r(){var e=r.$$p||E,t=this,i=E;return r.$$p=null,i=J(t,C(t,"allocate",r,!1,!0),"allocate",[],e),i.uninitialized=!0,i}),W(K,"$escape",function(e){return e=z(e,u("String"),"to_str"),$.escape_regexp(e)}),W(K,"$last_match",function(e){return B["~"]==null&&(B["~"]=E),e==null&&(e=E),m(e["$nil?"]())?B["~"]:m(B["~"])?B["~"]["$[]"](e):E},-1),W(K,"$union",function(e){var t,i,a=this;t=ie(arguments),i=t;var o,v,S,j,T;if(i.length==0)return/(?!)/;if(i.length==1&&i[0].$$is_regexp)return i[0];o=i[0].$$is_array,i.length>1&&o&&X.$raise(u("TypeError"),"no implicit conversion of Array into String"),o&&(i=i[0]),j=void 0,v=[];for(var Y=0;Y<i.length;Y++)S=i[Y],S.$$is_string?v.push(a.$escape(S)):S.$$is_regexp?(T=S.$options(),j!=null&&j!=T&&X.$raise(u("TypeError"),"All expressions must use the same options"),j=T,v.push("("+S.source+")")):v.push(a.$escape(S.$to_str()));return a.$new(v.$join("|"),j)},-1),W(K,"$new",function(e,t){if(e.$$is_regexp)return new RegExp(e);if(e=U["$coerce_to!"](e,u("String"),"to_str"),e.charAt(e.length-1)==="\\"&&e.charAt(e.length-2)!=="\\"&&X.$raise(u("RegexpError"),"too short escape sequence: /"+e+"/"),e=e.replace("\\A","^").replace("\\z","$"),t===void 0||t["$!"]())return new RegExp(e);if(t.$$is_number){var i="";n("IGNORECASE")&t&&(i+="i"),n("MULTILINE")&t&&(i+="m"),t=i}else t="i";return new RegExp(e,t)},-2),te(K,"compile","new"),te(K,"quote","escape")}($.get_singleton_class(c),l),W(c,"$==",function(_){var s=this;return _ instanceof RegExp&&s.toString()===_.toString()}),W(c,"$===",function(_){var s=this;return s.$match(U["$coerce_to?"](_,u("String"),"to_str"))!==E}),W(c,"$=~",function(_){var s=this,n=E;return B["~"]==null&&(B["~"]=E),m(n=s.$match(_))?B["~"].$begin(0):n}),W(c,"$freeze",function(){var _=this;return m(_["$frozen?"]())?_:(_.hasOwnProperty("$$g")||w(_,"$$g",null),_.hasOwnProperty("$$gm")||w(_,"$$gm",null),D(_))}),W(c,"$inspect",function(){var _=this,s=/^\/(.*)\/([^\/]*)$/,n=_.toString(),r=s.exec(n);if(r){for(var e=r[1],t=r[2],i=e.split(""),a=i.length,o=!1,v="",S=0;S<a;S++){var j=i[S];!o&&j=="/"&&(v=v.concat("\\")),v=v.concat(j),j=="\\"?o?o=!1:o=!0:o=!1}return"/"+v+"/"+t}else return n}),W(c,"$match",function K(_,s){var n=K.$$p||E,r=this;if(B["~"]==null&&(B["~"]=E),K.$$p=null,r.uninitialized&&X.$raise(u("TypeError"),"uninitialized Regexp"),s===void 0){if(_===E)return B["~"]=E;var e=r.exec(z(_,u("String"),"to_str"));return e?(B["~"]=u("MatchData").$new(r,e),n===E?B["~"]:$.yield1(n,B["~"])):B["~"]=E}if(s=z(s,u("Integer"),"to_int"),_===E||(_=z(_,u("String"),"to_str"),s<0&&(s+=_.length,s<0)))return B["~"]=E;for(var t,i=$.global_regexp(r);;){if(t=i.exec(_),t===null)return B["~"]=E;if(t.index>=s)return B["~"]=u("MatchData").$new(i,t),n===E?B["~"]:$.yield1(n,B["~"]);i.lastIndex=t.index+1}},-2),W(c,"$match?",function(_,s){var n=this;if(n.uninitialized&&X.$raise(u("TypeError"),"uninitialized Regexp"),s===void 0)return _===E?!1:n.test(z(_,u("String"),"to_str"));if(s=z(s,u("Integer"),"to_int"),_===E||(_=z(_,u("String"),"to_str"),s<0&&(s+=_.length,s<0)))return!1;var r,e=$.global_regexp(n);return r=e.exec(_),!(r===null||r.index<s)},-2),W(c,"$names",function(){var _=this;return Z(_.$source().$scan(A(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$uniq()}),W(c,"$named_captures",function(){var _=this;return Z(Z(Z(_.$source().$scan(A(["\\(?<(\\w+)>"]),new Map([["no_matchdata",!0]])),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function(n){return n==null&&(n=E),Z(n,"map",[],function(e){return e==null&&(e=E),p(e.$last(),1)})})}),W(c,"$~",function(){var _=this;return B._==null&&(B._=E),_["$=~"](B._)}),W(c,"$source",function(){var _=this;return _.source}),W(c,"$options",function(){var _=this;_.uninitialized&&X.$raise(u("TypeError"),"uninitialized Regexp");var s=0;return _.multiline&&(s|=y("MULTILINE")),_.ignoreCase&&(s|=y("IGNORECASE")),s}),W(c,"$casefold?",function(){var _=this;return _.ignoreCase}),te(c,"eql?","=="),te(c,"to_s","source")}("::",RegExp,x),function(d,I,h){var c=k(d,I,"MatchData"),l=[c].concat(h),y=$.$r(l),K=c.$$prototype;return K.matches=E,c.$attr_reader("post_match","pre_match","regexp","string"),W(c,"$initialize",function(s,n,r){var e,t=this;r=P(r),e=V(r,"no_matchdata"),e==null&&(e=!1),m(e)||(B["~"]=t),t.regexp=s,t.begin=n.index,t.string=n.input,t.pre_match=n.input.slice(0,n.index),t.post_match=n.input.slice(n.index+n[0].length),t.matches=[];for(var i=0,a=n.length;i<a;i++){var o=n[i];o==null?t.matches.push(E):t.matches.push(o)}},-3),W(c,"$match",function(s){var n=this,r=E;return m(r=n["$[]"](s))?r:m(s["$is_a?"](y("Integer")))&&m(M(s,n.$length()))?X.$raise(u("IndexError"),"index "+s+" out of matches"):E}),W(c,"$match_length",function(s){var n,r=this;return n=r.$match(s),n===E||n==null?E:n.$length()}),W(c,"$[]",function(s){var n,r,e=this;return n=ie(arguments),r=n,r[0].$$is_string?(e.$regexp().$names()["$include?"](r["$[]"](0))["$!"]()&&X.$raise(u("IndexError"),"undefined group name reference: "+r["$[]"](0)),e.$named_captures()["$[]"](r["$[]"](0))):Z(e.matches,"[]",L(r))},-1),W(c,"$offset",function(s){var n=this;return s!==0&&X.$raise(u("ArgumentError"),"MatchData#offset only supports 0th element"),[n.begin,n.begin+n.matches[s].length]}),W(c,"$==",function(s){var n=this,r=E,e=E,t=E,i=E;return g(u("MatchData"),s)?m(r=m(e=m(t=m(i=n.string==s.string)?n.regexp.toString()==s.regexp.toString():i)?n.pre_match==s.pre_match:t)?n.post_match==s.post_match:e)?n.begin==s.begin:r:!1}),W(c,"$begin",function(s){var n=this;return s!==0&&X.$raise(u("ArgumentError"),"MatchData#begin only supports 0th element"),n.begin}),W(c,"$end",function(s){var n=this;return s!==0&&X.$raise(u("ArgumentError"),"MatchData#end only supports 0th element"),n.begin+n.matches[s].length}),W(c,"$captures",function(){var s=this;return s.matches.slice(1)}),W(c,"$named_captures",function(){var s=this,n=E;return n=s.$captures(),Z(s.$regexp().$named_captures(),"transform_values",[],function(e){return e==null&&(e=E),n["$[]"](q(e.$last(),1))})}),W(c,"$names",function(){var s=this;return s.$regexp().$names()}),W(c,"$inspect",function(){var s=this,n="#<MatchData "+s.matches[0].$inspect();if(s.$regexp().$names()["$empty?"]())for(var r=1,e=s.matches.length;r<e;r++)n+=" "+r+":"+s.matches[r].$inspect();else Z(s.$named_captures(),"each",[],function(i,a){return i==null&&(i=E),a==null&&(a=E),n+=" "+i+":"+a.$inspect()});return n+">"}),W(c,"$length",function(){var s=this;return s.matches.length}),W(c,"$to_a",R("matches")),W(c,"$to_s",function(){var s=this;return s.matches[0]}),W(c,"$values_at",function(s){var n,r,e=this;n=ie(arguments),r=n;var t,i,a,o=[];for(t=0;t<r.length;t++){if(r[t].$$is_range&&(i=r[t].$to_a(),i.unshift(t,1),Array.prototype.splice.apply(r,i)),a=U["$coerce_to!"](r[t],u("Integer"),"to_int"),a<0&&(a+=e.matches.length,a<0)){o.push(E);continue}o.push(e.matches[a])}return o},-1),te(c,"eql?","=="),te(c,"size","length")}(x[0],null,x)};Opal.modules["corelib/string"]=function($){var z=$.coerce_to,w=$.respond_to,D=$.global_multiline_regexp,k=$.prop,ee=$.opal32_init,J=$.opal32_add,C=$.klass,W=$.send2,m=$.find_super,B=$.def,ie=$.Opal,X=$.defs,U=$.slice,te=$.send,Z=$.to_a,A=$.extract_kwargs,p=$.ensure_kwargs,P=$.hash_get,V=$.eqeqeq,M=$.Kernel,L=$.truthy,g=$.gvars,q=$.rb_divide,R=$.rb_plus,x=$.eqeq,E=$.alias,u=$.const_set,d=$.top,I=[],h=$.$r(I),c=$.nil,l=$.$$$;return $.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),d.$require("corelib/comparable"),d.$require("corelib/regexp"),function(y,K,_){var s=C(y,K,"String"),n=[s].concat(_),r=$.$r(n);s.$include(l("Comparable")),$.prop(s.$$prototype,"$$is_string",!0);var e=new Map;(function(){B(s,"$__id__",function i(){var a=i.$$p||c,o=this;if(i.$$p=null,typeof o=="object")return W(o,m(o,"__id__",i,!1,!0),"__id__",[],a);if(e.has(o))return e.get(o);var v=$.uid();return e.set(o,v),v}),B(s,"$hash",function(){var a=this,o=ee(),v,S=a.length;for(o=J(o,5),o=J(o,S),v=0;v<S;v++)o=J(o,a.charCodeAt(v));return o})})(),X(s,"$try_convert",function(a){return ie["$coerce_to?"](a,l("String"),"to_str")}),X(s,"$new",function(a){var o,v,S=this;o=U(arguments),v=o;var j=v[0]||"",T=v[v.length-1];return j=z(j,l("String"),"to_str"),T&&T.$$is_hash&&T.has("encoding")&&(j=j.$force_encoding(T.get("encoding").value)),j=new S.$$constructor(j),j.$initialize.$$pristine||te(j,"initialize",Z(v)),j},-1),B(s,"$initialize",function(a,o){var v,S;return v=U(arguments),S=A(v),S=p(S),v.length>0&&v.shift(),P(S,"encoding"),P(S,"capacity"),c},-1),B(s,"$%",function(a){var o=this;return V(l("Array"),a)?te(o,"format",[o].concat(Z(a))):o.$format(o,a)}),B(s,"$*",function(a){var o=this;if(a=z(a,l("Integer"),"to_int"),a<0&&M.$raise(l("ArgumentError"),"negative argument"),a===0)return"";var v="",S=o.toString();for(S.length*a>=1<<28&&M.$raise(l("RangeError"),"multiply count must not overflow maximum string size");(a&1)===1&&(v+=S),a>>>=1,a!==0;)S+=S;return v}),B(s,"$+",function(a){var o=this;if(a=z(a,l("String"),"to_str"),a==""&&o.$$class===$.String)return o;if(o==""&&a.$$class===$.String)return a;var v=o+a;return o.encoding===v.encoding&&a.encoding===v.encoding||o.encoding.name==="UTF-8"||a.encoding.name==="UTF-8"?v:$.enc(v,o.encoding)}),B(s,"$<=>",function(a){var o=this;if(L(a["$respond_to?"]("to_str")))return a=a.$to_str().$to_s(),o>a?1:o<a?-1:0;var v=a["$<=>"](o);return v===c?c:v>0?-1:v<0?1:0}),B(s,"$==",function(a){var o=this;return a.$$is_string?o.toString()===a.toString():w(a,"$to_str")?a["$=="](o):!1}),B(s,"$=~",function(a){var o=this;return a.$$is_string&&M.$raise(l("TypeError"),"type mismatch: String given"),a["$=~"](o)}),B(s,"$[]",function(a,o){var v=this,S=v.length,j,T;if(a.$$is_range)return j=a.excl,T=a,o=a.end===c?-1:z(a.end,l("Integer"),"to_int"),a=a.begin===c?0:z(a.begin,l("Integer"),"to_int"),Math.abs(a)>S?c:(a<0&&(a+=S),o<0&&(o+=S),(!j||T.end===c)&&(o+=1),o=o-a,o<0&&(o=0),v.substr(a,o));if(a.$$is_string)return o!=null&&M.$raise(l("TypeError")),v.indexOf(a)!==-1?a:c;if(a.$$is_regexp){var Y=v.match(a);return Y===null?(g["~"]=c,c):(g["~"]=l("MatchData").$new(a,Y),o==null?Y[0]:(o=z(o,l("Integer"),"to_int"),o<0&&-o<Y.length?Y[o+=Y.length]:o>=0&&o<Y.length?Y[o]:c))}return a=z(a,l("Integer"),"to_int"),a<0&&(a+=S),o==null?a>=S||a<0?c:v.substr(a,1):(o=z(o,l("Integer"),"to_int"),o<0||a>S||a<0?c:v.substr(a,o))},-2),B(s,"$b",function(){var a=this;return new String(a).$force_encoding("binary")}),B(s,"$capitalize",function(){var a=this;return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}),B(s,"$casecmp",function(a){var o=this;if(!L(a["$respond_to?"]("to_str")))return c;a=z(a,l("String"),"to_str").$to_s();var v=/^[\x00-\x7F]*$/;return v.test(o)&&v.test(a)&&(o=o.toLowerCase(),a=a.toLowerCase()),o["$<=>"](a)}),B(s,"$casecmp?",function(a){var o=this,v=o.$casecmp(a);return v===c?c:v===0}),B(s,"$center",function(a,o){var v=this;if(o==null&&(o=" "),a=z(a,l("Integer"),"to_int"),o=z(o,l("String"),"to_str").$to_s(),L(o["$empty?"]())&&M.$raise(l("ArgumentError"),"zero width padding"),L(a<=v.length))return v;var S=v.$ljust(q(R(a,v.length),2).$ceil(),o),j=v.$rjust(q(R(a,v.length),2).$floor(),o);return j+S.slice(v.length)},-2),B(s,"$chomp",function(a){var o=this;if(g["/"]==null&&(g["/"]=c),a==null&&(a=g["/"]),L(a===c||o.length===0))return o;a=ie["$coerce_to!"](a,l("String"),"to_str").$to_s();var v;if(a===`
`)v=o.replace(/\r?\n?$/,"");else if(a==="")v=o.replace(/(\r?\n)+$/,"");else if(o.length>=a.length){var S=o.substr(o.length-a.length,a.length);S===a&&(v=o.substr(0,o.length-a.length))}return v??o},-1),B(s,"$chop",function(){var a=this,o=a.length,v;return o<=1?v="":a.charAt(o-1)===`
`&&a.charAt(o-2)==="\r"?v=a.substr(0,o-2):v=a.substr(0,o-1),v}),B(s,"$chr",function(){var a=this;return a.charAt(0)}),B(s,"$clone",function(a){var o,v=this,S=c;return a=p(a),o=P(a,"freeze"),o==null&&(o=c),L(o["$nil?"]())||x(o,!0)||x(o,!1)||v.$raise(r("ArgumentError"),"unexpected value for freeze: "+o.$class()),S=new String(v),S.$copy_singleton_methods(v),S.$initialize_clone(v,new Map([["freeze",o]])),x(o,!0)?S.$$frozen||(S.$$frozen=!0):L(o["$nil?"]())&&v.$$frozen&&(S.$$frozen=!0),S},-1),B(s,"$dup",function(){var a=this,o=c;return o=new String(a),o.$initialize_dup(a),o}),B(s,"$count",function(a){var o,v,S=this;o=U(arguments),v=o,v.length===0&&M.$raise(l("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var j=t(v);return j===null?0:S.length-S.replace(new RegExp(j,"g"),"").length},-1),B(s,"$delete",function(a){var o,v,S=this;o=U(arguments),v=o,v.length===0&&M.$raise(l("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var j=t(v);return j===null?S:S.replace(new RegExp(j,"g"),"")},-1),B(s,"$delete_prefix",function(a){var o=this;return a.$$is_string||(a=z(a,l("String"),"to_str")),o.slice(0,a.length)===a?o.slice(a.length):o}),B(s,"$delete_suffix",function(a){var o=this;return a.$$is_string||(a=z(a,l("String"),"to_str")),o.slice(o.length-a.length)===a?o.slice(0,o.length-a.length):o}),B(s,"$downcase",function(){var a=this;return a.toLowerCase()}),B(s,"$each_line",function i(a,o){var v=i.$$p||c,S,j,T,Y,O=this;if(g["/"]==null&&(g["/"]=c),i.$$p=null,S=U(arguments),j=A(S),j=p(j),S.length>0&&(T=S.shift()),T==null&&(T=g["/"]),Y=P(j,"chomp"),Y==null&&(Y=!1),v===c)return O.$enum_for("each_line",T,new Map([["chomp",Y]]));if(T===c)return $.yield1(v,O),O;T=z(T,l("String"),"to_str");var ae,le,_e,de,ge,ve,me,be;if(T.length===0){for(ae=O.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),le=0,_e=ae.length;le<_e;le+=2)(ae[le]||ae[le+1])&&(be=(ae[le]||"")+(ae[le+1]||""),Y&&(be=be.$chomp(`
`)),$.yield1(v,be));return O}for(ge=O.$chomp(T),ve=O.length!=ge.length,me=ge.split(T),le=0,de=me.length;le<de;le++)be=me[le],(le<de-1||ve)&&(be+=T),Y&&(be=be.$chomp(T)),$.yield1(v,be);return O},-1),B(s,"$empty?",function(){var a=this;return a.length===0}),B(s,"$end_with?",function(a){var o,v,S=this;o=U(arguments),v=o;for(var j=0,T=v.length;j<T;j++){var Y=z(v[j],l("String"),"to_str").$to_s();if(S.length>=Y.length&&S.substr(S.length-Y.length,Y.length)==Y)return!0}return!1},-1),B(s,"$gsub",function i(a,o){var v=i.$$p||c,S=this;if(i.$$p=null,o===void 0&&v===c)return S.$enum_for("gsub",a);var j="",T=c,Y=0,O,ae;a.$$is_regexp?a=D(a):(a=z(a,l("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));for(var le;;){if(O=a.exec(S),O===null){g["~"]=c,j+=S.slice(Y);break}T=l("MatchData").$new(a,O),o===void 0?(le=a.lastIndex,ae=v(O[0]),a.lastIndex=le):o.$$is_hash?ae=o["$[]"](O[0]).$to_s():(o.$$is_string||(o=z(o,l("String"),"to_str")),ae=o.replace(/([\\]+)([0-9+&`'])/g,function(_e,de,ge){if(de.length%2===0)return _e;switch(ge){case"+":for(var ve=O.length-1;ve>0;ve--)if(O[ve]!==void 0)return de.slice(1)+O[ve];return"";case"&":return de.slice(1)+O[0];case"`":return de.slice(1)+S.slice(0,O.index);case"'":return de.slice(1)+S.slice(O.index+O[0].length);default:return de.slice(1)+(O[ge]||"")}}).replace(/\\\\/g,"\\")),a.lastIndex===O.index?(j+=S.slice(Y,O.index)+ae+(S[O.index]||""),a.lastIndex+=1):j+=S.slice(Y,O.index)+ae,Y=a.lastIndex}return g["~"]=T,j},-2),B(s,"$hex",function(){var a=this;return a.$to_i(16)}),B(s,"$include?",function(a){var o=this;return a.$$is_string||(a=z(a,l("String"),"to_str")),o.indexOf(a)!==-1}),B(s,"$index",function(a,o){var v=this,S,j,T;if(o===void 0)o=0;else if(o=z(o,l("Integer"),"to_int"),o<0&&(o+=v.length,o<0))return c;if(a.$$is_regexp)for(T=D(a);;){if(j=T.exec(v),j===null){g["~"]=c,S=-1;break}if(j.index>=o){g["~"]=l("MatchData").$new(T,j),S=j.index;break}T.lastIndex=j.index+1}else a=z(a,l("String"),"to_str"),a.length===0&&o>v.length?S=-1:S=v.indexOf(a,o);return S===-1?c:S},-2),B(s,"$inspect",function(){var a=this,o=/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,v={"\x07":"\\a","\x1B":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"},S=a.replace(o,function(j){return v[j]?v[j]:(j=j.charCodeAt(0),j<=255&&(a.encoding["$binary?"]()||a.internal_encoding["$binary?"]())?"\\x"+("00"+j.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+j.toString(16).toUpperCase()).slice(-4))});return'"'+S.replace(/\#[\$\@\{]/g,"\\$&")+'"'}),B(s,"$intern",function(){var a=this;return a.toString()}),B(s,"$length",function(){var a=this;return a.length}),E(s,"size","length"),B(s,"$lines",function i(a,o){var v=i.$$p||c,S,j,T,Y,O=this,ae=c;return g["/"]==null&&(g["/"]=c),i.$$p=null,S=U(arguments),j=A(S),j=p(j),S.length>0&&(T=S.shift()),T==null&&(T=g["/"]),Y=P(j,"chomp"),Y==null&&(Y=!1),ae=te(O,"each_line",[T,new Map([["chomp",Y]])],v.$to_proc()),L(v)?O:ae.$to_a()},-1),B(s,"$ljust",function(a,o){var v=this;if(o==null&&(o=" "),a=z(a,l("Integer"),"to_int"),o=z(o,l("String"),"to_str").$to_s(),L(o["$empty?"]())&&M.$raise(l("ArgumentError"),"zero width padding"),L(a<=v.length))return v;var S=-1,j="";for(a-=v.length;++S<a;)j+=o;return v+j.slice(0,a)},-2),B(s,"$lstrip",function(){var a=this;return a.replace(/^[\x00\x09\x0a-\x0d\x20]*/,"")}),B(s,"$ascii_only?",function(){var a=this;return a.encoding.ascii?/^[\x00-\x7F]*$/.test(a):!1}),B(s,"$match",function i(a,o){var v=i.$$p||c,S=this;return i.$$p=null,(V(r("String"),a)||L(a["$respond_to?"]("to_str")))&&(a=l("Regexp").$new(a.$to_str())),V(l("Regexp"),a)||M.$raise(l("TypeError"),"wrong argument type "+a.$class()+" (expected Regexp)"),te(a,"match",[S,o],v.$to_proc())},-2),B(s,"$match?",function(a,o){var v=this;return(V(r("String"),a)||L(a["$respond_to?"]("to_str")))&&(a=l("Regexp").$new(a.$to_str())),V(l("Regexp"),a)||M.$raise(l("TypeError"),"wrong argument type "+a.$class()+" (expected Regexp)"),a["$match?"](v,o)},-2),B(s,"$next",function(){var a=this,o=a.length;if(o===0)return"";for(var v=a,S=a.search(/[a-zA-Z0-9]/),j=!1,T;o--;){if(T=a.charCodeAt(o),T>=48&&T<=57||T>=65&&T<=90||T>=97&&T<=122)switch(T){case 57:j=!0,T=48;break;case 90:j=!0,T=65;break;case 122:j=!0,T=97;break;default:j=!1,T+=1}else S===-1?T===255?(j=!0,T=0):(j=!1,T+=1):j=!0;if(v=v.slice(0,o)+String.fromCharCode(T)+v.slice(o+1),j&&(o===0||o===S)){switch(T){case 65:break;case 97:break;default:T+=1}o===0?v=String.fromCharCode(T)+v:v=v.slice(0,o)+String.fromCharCode(T)+v.slice(o),j=!1}if(!j)break}return v}),B(s,"$oct",function(){var a=this,o,v=a,S=8;return/^\s*_/.test(v)?0:(v=v.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(j,T,Y,O){switch(O.charAt(0)){case"+":case"-":return j;case"0":if(O.charAt(1)==="x"&&Y==="0x")return j}switch(Y){case"0b":S=2;break;case"0":case"0o":S=8;break;case"0d":S=10;break;case"0x":S=16;break}return T+O}),o=parseInt(v.replace(/_(?!_)/g,""),S),isNaN(o)?0:o)}),B(s,"$ord",function(){var a=this;return typeof a.codePointAt=="function"?a.codePointAt(0):a.charCodeAt(0)}),B(s,"$partition",function(a){var o=this,v,S;return a.$$is_regexp?(S=a.exec(o),S===null?v=-1:(l("MatchData").$new(a,S),a=S[0],v=S.index)):(a=z(a,l("String"),"to_str"),v=o.indexOf(a)),v===-1?[o,"",""]:[o.slice(0,v),o.slice(v,v+a.length),o.slice(v+a.length)]}),B(s,"$reverse",function(){var a=this;return a.split("").reverse().join("")}),B(s,"$rindex",function(a,o){var v=this,S,j,T,Y;if(o===void 0)o=v.length;else if(o=z(o,l("Integer"),"to_int"),o<0&&(o+=v.length,o<0))return c;if(a.$$is_regexp){for(j=null,T=D(a);Y=T.exec(v),!(Y===null||Y.index>o);)j=Y,T.lastIndex=j.index+1;j===null?(g["~"]=c,S=-1):(l("MatchData").$new(T,j),S=j.index)}else a=z(a,l("String"),"to_str"),S=v.lastIndexOf(a,o);return S===-1?c:S},-2),B(s,"$rjust",function(a,o){var v=this;if(o==null&&(o=" "),a=z(a,l("Integer"),"to_int"),o=z(o,l("String"),"to_str").$to_s(),L(o["$empty?"]())&&M.$raise(l("ArgumentError"),"zero width padding"),L(a<=v.length))return v;var S=Math.floor(a-v.length),j=Math.floor(S/o.length),T=Array(j+1).join(o),Y=S-T.length;return T+o.slice(0,Y)+v},-2),B(s,"$rpartition",function(a){var o=this,v,S,j,T;if(a.$$is_regexp){for(S=null,j=D(a);T=j.exec(o),T!==null;)S=T,j.lastIndex=S.index+1;S===null?v=-1:(l("MatchData").$new(j,S),a=S[0],v=S.index)}else a=z(a,l("String"),"to_str"),v=o.lastIndexOf(a);return v===-1?["","",o]:[o.slice(0,v),o.slice(v,v+a.length),o.slice(v+a.length)]}),B(s,"$rstrip",function(){var a=this;return a.replace(/[\x00\x09\x0a-\x0d\x20]*$/,"")}),B(s,"$scan",function i(a,o){var v=i.$$p||c,S,j=this;i.$$p=null,o=p(o),S=P(o,"no_matchdata"),S==null&&(S=!1);var T=[],Y=c,O;for(a.$$is_regexp?a=D(a):(a=z(a,l("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));(O=a.exec(j))!=null;)Y=l("MatchData").$new(a,O,new Map([["no_matchdata",S]])),v===c?O.length==1?T.push(O[0]):T.push(Y.$captures()):O.length==1?$.yield1(v,O[0]):$.yield1(v,Y.$captures()),a.lastIndex===O.index&&(a.lastIndex+=1);return S||(g["~"]=Y),v!==c?j:T},-2),B(s,"$singleton_class",function(){var a=this;return $.get_singleton_class(a)}),B(s,"$split",function(a,o){var v=this,S=c;if(g[";"]==null&&(g[";"]=c),v.length===0)return[];if(o===void 0)o=0;else if(o=ie["$coerce_to!"](o,l("Integer"),"to_int"),o===1)return[v];(a===void 0||a===c)&&(a=L(S=g[";"])?S:" ");var j=[],T=v.toString(),Y=0,O,ae=0,le=0,_e,de;if(a.$$is_regexp?a=D(a):(a=z(a,l("String"),"to_str").$to_s(),a===" "&&(a=/\s+/gm,T=T.replace(/^\s+/,""))),j=T.split(a),j.length===1&&j[0]===T)return[j[0]];for(;(_e=j.indexOf(void 0))!==-1;)j.splice(_e,1);if(o===0){for(;j[j.length-1]==="";)j.pop();return j}if(a.$$is_regexp||(a=$.escape_regexp(a),a=new RegExp(a,"gm")),O=a.exec(T),o<0){if(O!==null&&O[0]===""&&a.source.indexOf("(?=")===-1)for(_e=0,de=O.length;_e<de;_e++)j.push("");return j}if(O!==null&&O[0]==="")return le=(O.length-1)*(o-1)+o,j.splice(le-1,j.length-1,j.slice(le-1).join("")),j;if(o>=j.length)return j;for(;O!==null&&(ae++,Y=a.lastIndex,le+=O.length,ae+1!==o);)O=a.exec(T);return j.splice(le,j.length-1,T.slice(Y)),j},-1),B(s,"$squeeze",function(a){var o,v,S=this;if(o=U(arguments),v=o,v.length===0)return S.replace(/(.)\1+/g,"$1");var j=t(v);return j===null?S:S.replace(new RegExp("("+j+")\\1+","g"),"$1")},-1),B(s,"$start_with?",function(a){var o,v,S=this;o=U(arguments),v=o;for(var j=0,T=v.length;j<T;j++)if(v[j].$$is_regexp){var Y=v[j],O=Y.exec(S);if(O!=null&&O.index===0)return g["~"]=l("MatchData").$new(Y,O),!0;g["~"]=c}else{var ae=z(v[j],l("String"),"to_str").$to_s();if(S.length>=ae.length&&S.startsWith(ae))return!0}return!1},-1),B(s,"$strip",function(){var a=this;return a.replace(/^[\x00\x09\x0a-\x0d\x20]*|[\x00\x09\x0a-\x0d\x20]*$/g,"")}),B(s,"$sub",function i(a,o){var v=i.$$p||c,S=this;i.$$p=null,a.$$is_regexp||(a=z(a,l("String"),"to_str"),a=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var j,T=a.exec(S);return T===null?(g["~"]=c,j=S.toString()):(l("MatchData").$new(a,T),o===void 0?(v===c&&M.$raise(l("ArgumentError"),"wrong number of arguments (1 for 2)"),j=S.slice(0,T.index)+v(T[0])+S.slice(T.index+T[0].length)):o.$$is_hash?j=S.slice(0,T.index)+o["$[]"](T[0]).$to_s()+S.slice(T.index+T[0].length):(o=z(o,l("String"),"to_str"),o=o.replace(/([\\]+)([0-9+&`'])/g,function(Y,O,ae){if(O.length%2===0)return Y;switch(ae){case"+":for(var le=T.length-1;le>0;le--)if(T[le]!==void 0)return O.slice(1)+T[le];return"";case"&":return O.slice(1)+T[0];case"`":return O.slice(1)+S.slice(0,T.index);case"'":return O.slice(1)+S.slice(T.index+T[0].length);default:return O.slice(1)+(T[ae]||"")}}).replace(/\\\\/g,"\\"),j=S.slice(0,T.index)+o+S.slice(T.index+T[0].length))),j},-2),B(s,"$sum",function(a){var o=this;a==null&&(a=16),a=z(a,l("Integer"),"to_int");for(var v=0,S=o.length,j=0;j<S;j++)v+=o.charCodeAt(j);return a<=0?v:v&Math.pow(2,a)-1},-1),B(s,"$swapcase",function(){var a=this,o=a.replace(/([a-z]+)|([A-Z]+)/g,function(v,S,j){return S?v.toUpperCase():v.toLowerCase()});return o}),B(s,"$to_f",function(){var a=this;if(a.charAt(0)==="_")return 0;var o=parseFloat(a.replace(/_/g,""));return isNaN(o)||o==1/0||o==-1/0?0:o}),B(s,"$to_i",function(a){var o=this;a==null&&(a=10);var v,S=o.toLowerCase(),j=z(a,l("Integer"),"to_int");return(j===1||j<0||j>36)&&M.$raise(l("ArgumentError"),"invalid radix "+j),/^\s*_/.test(S)?0:(S=S.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(T,Y,O,ae){switch(ae.charAt(0)){case"+":case"-":return T;case"0":if(ae.charAt(1)==="x"&&O==="0x"&&(j===0||j===16))return T}switch(O){case"0b":if(j===0||j===2)return j=2,Y+ae;break;case"0":case"0o":if(j===0||j===8)return j=8,Y+ae;break;case"0d":if(j===0||j===10)return j=10,Y+ae;break;case"0x":if(j===0||j===16)return j=16,Y+ae;break}return T}),v=parseInt(S.replace(/_(?!_)/g,""),j),isNaN(v)?0:v)},-1),B(s,"$to_proc",function i(){i.$$p;var a=this,o=c,v=c,S=c;return i.$$p=null,o=a.valueOf(),v=$.jsid(o),S=te(M,"proc",[],function j(T){var Y=j.$$p||c,O,ae;j.$$p=null,O=U(arguments),ae=O,ae.length===0&&M.$raise(l("ArgumentError"),"no receiver given");var le=ae[0];le==null&&(le=c);var _e=le[v];return _e?ae=ae.slice(1):(_e=le.$method_missing,ae[0]=o),typeof Y=="function"&&(_e.$$p=Y),ae.length===0?_e.call(le):_e.apply(le,ae)},-1),S.$$source_location=c,S}),B(s,"$to_s",function(){var a=this;return a.toString()}),B(s,"$tr",function(a,o){var v=this;if(a=z(a,l("String"),"to_str").$to_s(),o=z(o,l("String"),"to_str").$to_s(),a.length==0||a===o)return v;var S,j,T,Y,O,ae,le,_e={},de=a.split(""),ge=de.length,ve=o.split(""),me=ve.length,be=!1,$e=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),$e=ve[me-1],ge-=1);var N=[],F=null;for(j=!1,S=0;S<ge;S++)if(Y=de[S],F==null)F=Y,N.push(Y);else if(Y==="-")F==="-"?(N.push("-"),N.push("-")):S==ge-1?N.push("-"):j=!0;else if(j){for(O=F.charCodeAt(0),ae=Y.charCodeAt(0),O>ae&&M.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=O+1;T<ae;T++)N.push(String.fromCharCode(T));N.push(Y),j=null,F=null}else N.push(Y);if(de=N,ge=de.length,be)for(S=0;S<ge;S++)_e[de[S]]=!0;else{if(me>0){var G=[],Q=null;for(j=!1,S=0;S<me;S++)if(Y=ve[S],Q==null)Q=Y,G.push(Y);else if(Y==="-")Q==="-"?(G.push("-"),G.push("-")):S==me-1?G.push("-"):j=!0;else if(j){for(O=Q.charCodeAt(0),ae=Y.charCodeAt(0),O>ae&&M.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=O+1;T<ae;T++)G.push(String.fromCharCode(T));G.push(Y),j=null,Q=null}else G.push(Y);ve=G,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(S=0;S<ne;S++)ve.push(se)}for(S=0;S<ge;S++)_e[de[S]]=ve[S]}var oe="";for(S=0,le=v.length;S<le;S++){Y=v.charAt(S);var fe=_e[Y];be?oe+=fe==null?$e:Y:oe+=fe??Y}return oe}),B(s,"$tr_s",function(a,o){var v=this;if(a=z(a,l("String"),"to_str").$to_s(),o=z(o,l("String"),"to_str").$to_s(),a.length==0)return v;var S,j,T,Y,O,ae,le,_e={},de=a.split(""),ge=de.length,ve=o.split(""),me=ve.length,be=!1,$e=null;de[0]==="^"&&de.length>1&&(be=!0,de.shift(),$e=ve[me-1],ge-=1);var N=[],F=null;for(j=!1,S=0;S<ge;S++)if(Y=de[S],F==null)F=Y,N.push(Y);else if(Y==="-")F==="-"?(N.push("-"),N.push("-")):S==ge-1?N.push("-"):j=!0;else if(j){for(O=F.charCodeAt(0),ae=Y.charCodeAt(0),O>ae&&M.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=O+1;T<ae;T++)N.push(String.fromCharCode(T));N.push(Y),j=null,F=null}else N.push(Y);if(de=N,ge=de.length,be)for(S=0;S<ge;S++)_e[de[S]]=!0;else{if(me>0){var G=[],Q=null;for(j=!1,S=0;S<me;S++)if(Y=ve[S],F==null)F=Y,G.push(Y);else if(Y==="-")Q==="-"?(G.push("-"),G.push("-")):S==me-1?G.push("-"):j=!0;else if(j){for(O=F.charCodeAt(0),ae=Y.charCodeAt(0),O>ae&&M.$raise(l("ArgumentError"),'invalid range "'+String.fromCharCode(O)+"-"+String.fromCharCode(ae)+'" in string transliteration'),T=O+1;T<ae;T++)G.push(String.fromCharCode(T));G.push(Y),j=null,F=null}else G.push(Y);ve=G,me=ve.length}var ne=ge-me;if(ne>0){var se=me>0?ve[me-1]:"";for(S=0;S<ne;S++)ve.push(se)}for(S=0;S<ge;S++)_e[de[S]]=ve[S]}var oe="",fe=null;for(S=0,le=v.length;S<le;S++){Y=v.charAt(S);var f=_e[Y];be?f==null?fe==null&&(oe+=$e,fe=!0):(oe+=Y,fe=null):f!=null?(fe==null||fe!==f)&&(oe+=f,fe=f):(oe+=Y,fe=null)}return oe}),B(s,"$upcase",function(){var a=this;return a.toUpperCase()}),B(s,"$upto",function i(a,o){var v=i.$$p||c,S=this;if(i.$$p=null,o==null&&(o=!1),v===c)return S.$enum_for("upto",a,o);var j,T,Y=S.toString();if(a=z(a,l("String"),"to_str"),Y.length===1&&a.length===1)for(j=Y.charCodeAt(0),T=a.charCodeAt(0);j<=T&&!(o&&j===T);)v(String.fromCharCode(j)),j+=1;else if(parseInt(Y,10).toString()===Y&&parseInt(a,10).toString()===a)for(j=parseInt(Y,10),T=parseInt(a,10);j<=T&&!(o&&j===T);)v(j.toString()),j+=1;else for(;Y.length<=a.length&&Y<=a&&!(o&&Y===a);)v(Y),Y=Y.$succ();return S},-2);function t(i){function a(_e){var de="",ge,ve=_e.length,me,be,$e,N,F;for(ge=0;ge<ve;ge++)if(me=_e.charAt(ge),me==="-"&&ge>0&&ge<ve-1&&!be){for($e=_e.charCodeAt(ge-1),N=_e.charCodeAt(ge+1),$e>N&&M.$raise(l("ArgumentError"),'invalid range "'+$e+"-"+N+'" in string transliteration'),F=$e+1;F<N+1;F++)de+=String.fromCharCode(F);be=!0,ge++}else be=me==="\\",de+=me;return de}function o(_e,de){if(_e.length===0)return de;var ge="",ve,me=_e.length,be;for(ve=0;ve<me;ve++)be=_e.charAt(ve),de.indexOf(be)!==-1&&(ge+=be);return ge}var v,S,j,T,Y,O,ae="",le="";for(v=0,S=i.length;v<S;v++)j=z(i[v],l("String"),"to_str"),T=j.charAt(0)==="^"&&j.length>1,j=a(T?j.slice(1):j),T?le=o(le,j):ae=o(ae,j);if(ae.length>0&&le.length>0){for(O="",v=0,S=ae.length;v<S;v++)Y=ae.charAt(v),le.indexOf(Y)===-1&&(O+=Y);ae=O,le=""}return ae.length>0?"["+l("Regexp").$escape(ae)+"]":le.length>0?"[^"+l("Regexp").$escape(le)+"]":null}return B(s,"$instance_variables",function(){return[]}),X(s,"$_load",function(a){var o,v,S=this;return o=U(arguments),v=o,te(S,"new",Z(v))},-1),B(s,"$unicode_normalize",function(a){var o=this;return a==null&&(a="nfc"),L(["nfc","nfd","nfkc","nfkd"]["$include?"](a))||M.$raise(l("ArgumentError"),"Invalid normalization form "+a),o.normalize(a.$upcase())},-1),B(s,"$unicode_normalized?",function(a){var o=this;return a==null&&(a="nfc"),o.$unicode_normalize(a)["$=="](o)},-1),B(s,"$unpack",function(a){return M.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),B(s,"$unpack1",function(a){return M.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),B(s,"$freeze",function(){var a=this;return typeof a=="string"||k(a,"$$frozen",!0),a}),B(s,"$-@",function(){var a=this;return typeof a=="string"||a.$$frozen?a:a.encoding.name=="UTF-8"&&a.internal_encoding.name=="UTF-8"?a.toString():a.$dup().$freeze()}),B(s,"$frozen?",function(){var a=this;return typeof a=="string"||a.$$frozen===!0}),E(s,"+@","dup"),E(s,"===","=="),E(s,"byteslice","[]"),E(s,"eql?","=="),E(s,"equal?","==="),E(s,"object_id","__id__"),E(s,"slice","[]"),E(s,"succ","next"),E(s,"to_str","to_s"),E(s,"to_sym","intern"),ie.$pristine(s,"initialize")}("::",String,I),u(I[0],"Symbol",h("String"))};Opal.modules["corelib/enumerable"]=function($){var z=$.truthy,w=$.coerce_to,D=$.yield1,k=$.yieldX,ee=$.deny_frozen_access,J=$.module,C=$.send,W=$.slice,m=$.to_a,B=$.Opal,ie=$.thrower,X=$.def,U=$.Kernel,te=$.return_val,Z=$.rb_gt,A=$.rb_times,p=$.rb_lt,P=$.eqeq,V=$.rb_plus,M=$.rb_minus,L=$.rb_divide,g=$.rb_le,q=$.lambda,R=$.not,x=$.alias,E=[],u=$.nil,d=$.$$$;return $.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(I,h){var c=J(I,"Enumerable"),l=[c].concat(h),y=$.$r(l);function K(_){return _.length===0&&(_=[u]),_.length>1&&(_=[_]),_}return X(c,"$all?",function _(s){try{var n=ie("return"),r=_.$$p||u,e=this;return _.$$p=null,z(s!==void 0)?C(e,"each",[],function t(i){var a,o,v=u;if(a=W(arguments),o=a,v=K(o),z(C(s,"public_send",["==="].concat(m(v)))))return u;n.$throw(!1,t.$$is_lambda)},{$$arity:-1,$$ret:n}):r!==u?C(e,"each",[],function t(i){var a,o;if(a=W(arguments),o=a,z($.yieldX(r,m(o))))return u;n.$throw(!1,t.$$is_lambda)},{$$arity:-1,$$ret:n}):C(e,"each",[],function t(i){var a,o;if(a=W(arguments),o=a,z(B.$destructure(o)))return u;n.$throw(!1,t.$$is_lambda)},{$$arity:-1,$$ret:n}),!0}catch(t){if(t===n)return t.$v;throw t}finally{n.is_orphan=!0}},-1),X(c,"$any?",function _(s){try{var n=ie("return"),r=_.$$p||u,e=this;return _.$$p=null,z(s!==void 0)?C(e,"each",[],function t(i){var a,o,v=u;if(a=W(arguments),o=a,v=K(o),z(C(s,"public_send",["==="].concat(m(v)))))n.$throw(!0,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}):r!==u?C(e,"each",[],function t(i){var a,o;if(a=W(arguments),o=a,z($.yieldX(r,m(o))))n.$throw(!0,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}):C(e,"each",[],function t(i){var a,o;if(a=W(arguments),o=a,z(B.$destructure(o)))n.$throw(!0,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}),!1}catch(t){if(t===n)return t.$v;throw t}finally{n.is_orphan=!0}},-1),X(c,"$chunk",function _(){var s=_.$$p||u,n=this;return _.$$p=null,s===u?C(n,"to_enum",["chunk"],function r(){var e=r.$$s==null?this:r.$$s;return e.$enumerator_size()},{$$s:n}):C(d("Enumerator"),"new",[],function r(e){var t=r.$$s==null?this:r.$$s;e==null&&(e=u);var i=u,a=[];function o(){a.length>0&&e.$yield(i,a)}t.$each.$$p=function(v){var S=D(s,v);S===u?(o(),a=[],i=u):(i===u||i===S?a.push(v):(o(),a=[v]),i=S)},t.$each(),o()},{$$s:n})}),X(c,"$chunk_while",function _(){var s=_.$$p||u,n=this;return _.$$p=null,s===u&&U.$raise(d("ArgumentError"),"no block given"),C(n,"slice_when",[],function(e,t){return e==null&&(e=u),t==null&&(t=u),$.yieldX(s,[e,t])["$!"]()})}),X(c,"$collect",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,s===u)return C(n,"enum_for",["collect"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:n});var r=[];return n.$each.$$p=function(){var e=k(s,arguments);r.push(e)},n.$each(),r}),X(c,"$collect_concat",function _(){var s=_.$$p||u,n=this;return _.$$p=null,s===u?C(n,"enum_for",["collect_concat"],function r(){var e=r.$$s==null?this:r.$$s;return e.$enumerator_size()},{$$s:n}):C(n,"map",[],s.$to_proc()).$flatten(1)}),X(c,"$compact",function(){var s=this;return s.$to_a().$compact()}),X(c,"$count",function _(s){var n=_.$$p||u,r=this,e=u;return _.$$p=null,e=0,s!=null&&n!==u&&r.$warn("warning: given block not used"),z(s!=null)?n=C(U,"proc",[],function(i){var a,o;return a=W(arguments),o=a,B.$destructure(o)["$=="](s)},-1):z(n["$nil?"]())&&(n=C(U,"proc",[],te(!0))),C(r,"each",[],function(i){var a,o;return a=W(arguments),o=a,z(k(n,o))?e++:u},-1),e},-1),X(c,"$cycle",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,s==null&&(s=u),n===u)return C(r,"enum_for",["cycle",s],function a(){var o=a.$$s==null?this:a.$$s;return z(s["$nil?"]())?z(o["$respond_to?"]("size"))?d(d("Float"),"INFINITY"):u:(s=B["$coerce_to!"](s,d("Integer"),"to_int"),z(Z(s,0))?A(o.$enumerator_size(),s):0)},{$$s:r});if(!z(s["$nil?"]())&&(s=B["$coerce_to!"](s,d("Integer"),"to_int"),z(s<=0)))return u;var e=[],t,i;if(r.$each.$$p=function(){var a=B.$destructure(arguments);D(n,a),e.push(a)},r.$each(),e.length===0)return u;if(s===u)for(;;)for(t=0,i=e.length;t<i;t++)D(n,e[t]);else for(;s>1;){for(t=0,i=e.length;t<i;t++)D(n,e[t]);s--}},-1),X(c,"$detect",function _(s){try{var n=ie("return"),r=_.$$p||u,e=this;return _.$$p=null,r===u?e.$enum_for("detect",s):(C(e,"each",[],function t(i){var a,o,v=u;if(a=W(arguments),o=a,v=B.$destructure(o),z($.yield1(r,v)))n.$throw(v,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}),s!==void 0?typeof s=="function"?s():s:u)}catch(t){if(t===n)return t.$v;throw t}finally{n.is_orphan=!0}},-1),X(c,"$drop",function(s){var n=this;s=w(s,d("Integer"),"to_int"),z(s<0)&&U.$raise(d("ArgumentError"),"attempt to drop negative size");var r=[],e=0;return n.$each.$$p=function(){s<=e&&r.push(B.$destructure(arguments)),e++},n.$each(),r}),X(c,"$drop_while",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,s===u)return n.$enum_for("drop_while");var r=[],e=!0;return n.$each.$$p=function(){var t=B.$destructure(arguments);if(e){var i=D(s,t);z(i)||(e=!1,r.push(t))}else r.push(t)},n.$each(),r}),X(c,"$each_cons",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,z(arguments.length!=1)&&U.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),s=B.$try_convert(s,d("Integer"),"to_int"),z(s<=0)&&U.$raise(d("ArgumentError"),"invalid size"),n===u)return C(r,"enum_for",["each_cons",s],function t(){var i=t.$$s==null?this:t.$$s,a=u;return a=i.$enumerator_size(),z(a["$nil?"]())?u:P(a,0)||z(p(a,s))?0:V(M(a,s),1)},{$$s:r});var e=[];return r.$each.$$p=function(){var t=B.$destructure(arguments);e.push(t),e.length>s&&e.shift(),e.length==s&&D(n,e.slice(0,s))},r.$each(),r}),X(c,"$each_entry",function _(s){var n=_.$$p||u,r,e,t=this;return _.$$p=null,r=W(arguments),e=r,n===u?C(t,"to_enum",["each_entry"].concat(m(e)),function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:t}):(t.$each.$$p=function(){var i=B.$destructure(arguments);D(n,i)},t.$each.apply(t,e),t)},-1),X(c,"$each_slice",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,s=w(s,d("Integer"),"to_int"),z(s<=0)&&U.$raise(d("ArgumentError"),"invalid slice size"),n===u)return C(r,"enum_for",["each_slice",s],function t(){var i=t.$$s==null?this:t.$$s;return z(i["$respond_to?"]("size"))?L(i.$size(),s).$ceil():u},{$$s:r});var e=[];return r.$each.$$p=function(){var t=B.$destructure(arguments);e.push(t),e.length===s&&(D(n,e),e=[])},r.$each(),e.length>0&&D(n,e),r}),X(c,"$each_with_index",function _(s){var n=_.$$p||u,r,e,t=this;if(_.$$p=null,r=W(arguments),e=r,n===u)return C(t,"enum_for",["each_with_index"].concat(m(e)),function a(){var o=a.$$s==null?this:a.$$s;return o.$enumerator_size()},{$$s:t});var i=0;return t.$each.$$p=function(){var a=B.$destructure(arguments);n(a,i),i++},t.$each.apply(t,e),t},-1),X(c,"$each_with_object",function _(s){var n=_.$$p||u,r=this;return _.$$p=null,n===u?C(r,"enum_for",["each_with_object",s],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:r}):(r.$each.$$p=function(){var e=B.$destructure(arguments);n(e,s)},r.$each(),s)}),X(c,"$entries",function(s){var n,r,e=this;n=W(arguments),r=n;var t=[];return e.$each.$$p=function(){t.push(B.$destructure(arguments))},e.$each.apply(e,r),t},-1),X(c,"$filter_map",function _(){var s=_.$$p||u,n=this;return _.$$p=null,s===u?C(n,"enum_for",["filter_map"],function r(){var e=r.$$s==null?this:r.$$s;return e.$enumerator_size()},{$$s:n}):C(C(n,"map",[],s.$to_proc()),"select",[],"itself".$to_proc())}),X(c,"$find_all",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,s===u)return C(n,"enum_for",["find_all"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:n});var r=[];return n.$each.$$p=function(){var e=B.$destructure(arguments),t=D(s,e);z(t)&&r.push(e)},n.$each(),r}),X(c,"$find_index",function _(s){try{var n=ie("return"),r=_.$$p||u,e=this,t=u;return _.$$p=null,z(s===void 0&&r===u)?e.$enum_for("find_index"):(s!=null&&r!==u&&e.$warn("warning: given block not used"),t=0,z(s!=null)?C(e,"each",[],function i(a){var o,v;return o=W(arguments),v=o,P(B.$destructure(v),s)&&n.$throw(t,i.$$is_lambda),t+=1},{$$arity:-1,$$ret:n}):C(e,"each",[],function i(a){var o,v;return o=W(arguments),v=o,z($.yieldX(r,m(v)))&&n.$throw(t,i.$$is_lambda),t+=1},{$$arity:-1,$$ret:n}),u)}catch(i){if(i===n)return i.$v;throw i}finally{n.is_orphan=!0}},-1),X(c,"$first",function(s){try{var n=ie("return"),r=this,e=u,t=u;return z(s===void 0)?C(r,"each",[],function i(a){a==null&&(a=u),n.$throw(a,i.$$is_lambda)},{$$ret:n}):(e=[],s=w(s,d("Integer"),"to_int"),z(s<0)&&U.$raise(d("ArgumentError"),"attempt to take negative size"),z(s==0)?[]:(t=0,C(r,"each",[],function i(a){var o,v;if(o=W(arguments),v=o,e.push(B.$destructure(v)),z(s<=++t))n.$throw(e,i.$$is_lambda);else return u},{$$arity:-1,$$ret:n}),e))}catch(i){if(i===n)return i.$v;throw i}finally{n.is_orphan=!0}},-1),X(c,"$grep",function _(s){var n=_.$$p||u,r=this,e=u;return _.$$p=null,e=[],C(r,"each",[],function(i){var a,o,v=u;return a=W(arguments),o=a,v=K(o),z(C(s,"__send__",["==="].concat(m(v))))?(n!==u?(z(Z(o.$length(),1))&&(o=[o]),o=$.yieldX(n,m(o))):z(g(o.$length(),1))&&(o=o["$[]"](0)),e.$push(o)):u},-1),e}),X(c,"$grep_v",function _(s){var n=_.$$p||u,r=this,e=u;return _.$$p=null,e=[],C(r,"each",[],function(i){var a,o,v=u;return a=W(arguments),o=a,v=K(o),z(C(s,"__send__",["==="].concat(m(v))))?u:(n!==u?(z(Z(o.$length(),1))&&(o=[o]),o=$.yieldX(n,m(o))):z(g(o.$length(),1))&&(o=o["$[]"](0)),e.$push(o))},-1),e}),X(c,"$group_by",function _(){var s=_.$$p||u,n,r=this,e=u,t=u;return _.$$p=null,s===u?C(r,"enum_for",["group_by"],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:r}):(e=new Map,r.$each.$$p=function(){var i=B.$destructure(arguments),a=D(s,i);(z(t=e["$[]"](a))?t:(n=[a,[]],C(e,"[]=",n),n[n.length-1]))["$<<"](i)},r.$each(),e)}),X(c,"$include?",function(s){try{var n=ie("return"),r=this;return C(r,"each",[],function e(t){var i,a;if(i=W(arguments),a=i,P(B.$destructure(a),s))n.$throw(!0,e.$$is_lambda);else return u},{$$arity:-1,$$ret:n}),!1}catch(e){if(e===n)return e.$v;throw e}finally{n.is_orphan=!0}}),X(c,"$inject",function _(s,n){var r=_.$$p||u,e=this;_.$$p=null;var t=s;return r!==u&&n===void 0?e.$each.$$p=function(){var i=B.$destructure(arguments);if(t===void 0){t=i;return}i=k(r,[t,i]),t=i}:(n===void 0&&(d("Symbol")["$==="](s)||U.$raise(d("TypeError"),""+s.$inspect()+" is not a Symbol"),n=s,t=void 0),e.$each.$$p=function(){var i=B.$destructure(arguments);if(t===void 0){t=i;return}t=t.$__send__(n,i)}),e.$each(),t??u},-1),X(c,"$lazy",function(){var s=this;return C(d(d("Enumerator"),"Lazy"),"new",[s,s.$enumerator_size()],function(r,e){var t,i;return r==null&&(r=u),t=W(arguments,1),i=t,C(r,"yield",m(i))},-2)}),X(c,"$enumerator_size",function(){var s=this;return z(s["$respond_to?"]("size"))?s.$size():u}),X(c,"$max",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,s===void 0||s===u){var e,t;return r.$each.$$p=function(){var i=B.$destructure(arguments);if(e===void 0){e=i;return}n!==u?t=k(n,[i,e]):t=i["$<=>"](e),t===u&&U.$raise(d("ArgumentError"),"comparison failed"),t>0&&(e=i)},r.$each(),e===void 0?u:e}return s=w(s,d("Integer"),"to_int"),C(r,"sort",[],n.$to_proc()).$reverse().$first(s)},-1),X(c,"$max_by",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,s==null&&(s=u),!z(n))return C(r,"enum_for",["max_by",s],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:r});if(!z(s["$nil?"]()))return C(r,"sort_by",[],n.$to_proc()).$reverse().$take(s);var e,t;return r.$each.$$p=function(){var i=B.$destructure(arguments),a=D(n,i);if(e===void 0){e=i,t=a;return}a["$<=>"](t)>0&&(e=i,t=a)},r.$each(),e===void 0?u:e},-1),X(c,"$min",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,s==null&&(s=u),!z(s["$nil?"]()))return n!==u?C(r,"sort",[],function(i,a){return i==null&&(i=u),a==null&&(a=u),$.yieldX(n,[i,a])}).$take(s):r.$sort().$take(s);var e;return n!==u?r.$each.$$p=function(){var t=B.$destructure(arguments);if(e===void 0){e=t;return}var i=n(t,e);i===u&&U.$raise(d("ArgumentError"),"comparison failed"),i<0&&(e=t)}:r.$each.$$p=function(){var t=B.$destructure(arguments);if(e===void 0){e=t;return}B.$compare(t,e)<0&&(e=t)},r.$each(),e===void 0?u:e},-1),X(c,"$min_by",function _(s){var n=_.$$p||u,r=this;if(_.$$p=null,s==null&&(s=u),!z(n))return C(r,"enum_for",["min_by",s],function i(){var a=i.$$s==null?this:i.$$s;return a.$enumerator_size()},{$$s:r});if(!z(s["$nil?"]()))return C(r,"sort_by",[],n.$to_proc()).$take(s);var e,t;return r.$each.$$p=function(){var i=B.$destructure(arguments),a=D(n,i);if(e===void 0){e=i,t=a;return}a["$<=>"](t)<0&&(e=i,t=a)},r.$each(),e===void 0?u:e},-1),X(c,"$minmax",function _(){var s=_.$$p||u,n=this,r=u;_.$$p=null,s=z(r=s)?r:C(U,"proc",[],function(o,v){return o==null&&(o=u),v==null&&(v=u),o["$<=>"](v)});var e=u,t=u,i=!0;return n.$each.$$p=function(){var a=B.$destructure(arguments);if(i)e=t=a,i=!1;else{var o=s.$call(e,a);o===u?U.$raise(d("ArgumentError"),"comparison failed"):o>0&&(e=a);var v=s.$call(t,a);v===u?U.$raise(d("ArgumentError"),"comparison failed"):v<0&&(t=a)}},n.$each(),[e,t]}),X(c,"$minmax_by",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,!z(s))return C(n,"enum_for",["minmax_by"],function a(){var o=a.$$s==null?this:a.$$s;return o.$enumerator_size()},{$$s:n});var r=u,e=u,t,i;return n.$each.$$p=function(){var a=B.$destructure(arguments),o=D(s,a);(t===void 0||o["$<=>"](t)<0)&&(r=a,t=o),(i===void 0||o["$<=>"](i)>0)&&(e=a,i=o)},n.$each(),[r,e]}),X(c,"$none?",function _(s){try{var n=ie("return"),r=_.$$p||u,e=this;return _.$$p=null,z(s!==void 0)?C(e,"each",[],function t(i){var a,o,v=u;if(a=W(arguments),o=a,v=K(o),z(C(s,"public_send",["==="].concat(m(v)))))n.$throw(!1,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}):r!==u?C(e,"each",[],function t(i){var a,o;if(a=W(arguments),o=a,z($.yieldX(r,m(o))))n.$throw(!1,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}):C(e,"each",[],function t(i){var a,o,v=u;if(a=W(arguments),o=a,v=B.$destructure(o),z(v))n.$throw(!1,t.$$is_lambda);else return u},{$$arity:-1,$$ret:n}),!0}catch(t){if(t===n)return t.$v;throw t}finally{n.is_orphan=!0}},-1),X(c,"$one?",function _(s){try{var n=ie("return"),r=_.$$p||u,e=this,t=u;return _.$$p=null,t=0,z(s!==void 0)?C(e,"each",[],function i(a){var o,v,S=u;if(o=W(arguments),v=o,S=K(v),z(C(s,"public_send",["==="].concat(m(S)))))if(t=V(t,1),z(Z(t,1)))n.$throw(!1,i.$$is_lambda);else return u;else return u},{$$arity:-1,$$ret:n}):r!==u?C(e,"each",[],function i(a){var o,v;if(o=W(arguments),v=o,!z($.yieldX(r,m(v))))return u;if(t=V(t,1),z(Z(t,1)))n.$throw(!1,i.$$is_lambda);else return u},{$$arity:-1,$$ret:n}):C(e,"each",[],function i(a){var o,v;if(o=W(arguments),v=o,!z(B.$destructure(v)))return u;if(t=V(t,1),z(Z(t,1)))n.$throw(!1,i.$$is_lambda);else return u},{$$arity:-1,$$ret:n}),t["$=="](1)}catch(i){if(i===n)return i.$v;throw i}finally{n.is_orphan=!0}},-1),X(c,"$partition",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,s===u)return C(n,"enum_for",["partition"],function t(){var i=t.$$s==null?this:t.$$s;return i.$enumerator_size()},{$$s:n});var r=[],e=[];return n.$each.$$p=function(){var t=B.$destructure(arguments),i=D(s,t);z(i)?r.push(t):e.push(t)},n.$each(),[r,e]}),X(c,"$reject",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,s===u)return C(n,"enum_for",["reject"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:n});var r=[];return n.$each.$$p=function(){var e=B.$destructure(arguments),t=D(s,e);z(t)||r.push(e)},n.$each(),r}),X(c,"$reverse_each",function _(){var s=_.$$p||u,n=this;if(_.$$p=null,s===u)return C(n,"enum_for",["reverse_each"],function t(){var i=t.$$s==null?this:t.$$s;return i.$enumerator_size()},{$$s:n});var r=[];n.$each.$$p=function(){r.push(arguments)},n.$each();for(var e=r.length-1;e>=0;e--)k(s,r[e]);return r}),X(c,"$slice_before",function _(s){var n=_.$$p||u,r=this;return _.$$p=null,z(s===void 0&&n===u)&&U.$raise(d("ArgumentError"),"both pattern and block are given"),z(s!==void 0&&n!==u||arguments.length>1)&&U.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),C(d("Enumerator"),"new",[],function e(t){var i=e.$$s==null?this:e.$$s;t==null&&(t=u);var a=[];n!==u?s===void 0?i.$each.$$p=function(){var o=B.$destructure(arguments),v=D(n,o);z(v)&&a.length>0&&(t["$<<"](a),a=[]),a.push(o)}:i.$each.$$p=function(){var o=B.$destructure(arguments),v=n(o,s.$dup());z(v)&&a.length>0&&(t["$<<"](a),a=[]),a.push(o)}:i.$each.$$p=function(){var o=B.$destructure(arguments),v=s["$==="](o);z(v)&&a.length>0&&(t["$<<"](a),a=[]),a.push(o)},i.$each(),a.length>0&&t["$<<"](a)},{$$s:r})},-1),X(c,"$slice_after",function _(s){var n=_.$$p||u,r=this;return _.$$p=null,z(s===void 0&&n===u)&&U.$raise(d("ArgumentError"),"both pattern and block are given"),z(s!==void 0&&n!==u||arguments.length>1)&&U.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),z(s!==void 0)&&(n=C(U,"proc",[],function(t){return t==null&&(t=u),s["$==="](t)})),C(d("Enumerator"),"new",[],function e(t){var i=e.$$s==null?this:e.$$s;t==null&&(t=u);var a;i.$each.$$p=function(){var o=B.$destructure(arguments),v=D(n,o);a==null&&(a=[]),z(v)?(a.push(o),t.$yield(a),a=null):a.push(o)},i.$each(),a!=null&&t.$yield(a)},{$$s:r})},-1),X(c,"$slice_when",function _(){var s=_.$$p||u,n=this;return _.$$p=null,s===u&&U.$raise(d("ArgumentError"),"wrong number of arguments (0 for 1)"),C(d("Enumerator"),"new",[],function r(e){var t=r.$$s==null?this:r.$$s;e==null&&(e=u);var i=u,a=u;t.$each_cons.$$p=function(){var o=B.$destructure(arguments),v=o[0],S=o[1],j=k(s,[v,S]);a=S,i===u&&(i=[]),z(j)?(i.push(v),e.$yield(i),i=[]):i.push(v)},t.$each_cons(2),i!==u&&(i.push(a),e.$yield(i))},{$$s:n})}),X(c,"$sort",function _(){var s=_.$$p||u,n=this,r=u;return _.$$p=null,r=n.$to_a(),s===u&&(s=q(function(t,i){return t==null&&(t=u),i==null&&(i=u),t["$<=>"](i)})),C(r,"sort",[],s.$to_proc())}),X(c,"$sort_by",function _(){var s=_.$$p||u,n=this,r=u;return _.$$p=null,s===u?C(n,"enum_for",["sort_by"],function e(){var t=e.$$s==null?this:e.$$s;return t.$enumerator_size()},{$$s:n}):(r=C(n,"map",[],function(){var t=u;return t=B.$destructure(arguments),[$.yield1(s,t),t]}),C(r,"sort!",[],function(t,i){return t==null&&(t=u),i==null&&(i=u),t[0]["$<=>"](i[0])}),C(r,"map!",[],function(t){return t==null&&(t=u),t[1]}))}),X(c,"$sum",function _(s){var n=_.$$p||u,r=this,e=u,t=u;return _.$$p=null,s==null&&(s=0),e=s,t=0,C(r,"each",[],function(a){var o,v,S=u,j=u,T=u;return o=W(arguments),v=o,S=n!==u?$.yieldX(n,m(v)):B.$destructure(v),R([d(d("Float"),"INFINITY"),d(d("Float"),"INFINITY")["$-@"]()]["$include?"](S))&&z(S["$respond_to?"]("-"))?(j=M(S,t),T=V(e,j),t=M(M(T,e),j),e=T):e=V(e,S)},-1),e},-1),X(c,"$take",function(s){var n=this;return n.$first(s)}),X(c,"$take_while",function _(){try{var s=ie("return"),n=_.$$p||u,r=this,e=u;return _.$$p=null,z(n)?(e=[],C(r,"each",[],function t(i){var a,o,v=u;return a=W(arguments),o=a,v=B.$destructure(o),z($.yield1(n,v))||s.$throw(e,t.$$is_lambda),e.push(v)},{$$arity:-1,$$ret:s})):r.$enum_for("take_while")}catch(t){if(t===s)return t.$v;throw t}finally{s.is_orphan=!0}}),X(c,"$uniq",function _(){var s=_.$$p||u,n=this,r=u;return _.$$p=null,r=new Map,C(n,"each",[],function(t){var i,a,o,v=u,S=u;return i=W(arguments),a=i,v=B.$destructure(a),S=s!==u?$.yield1(s,v):v,z(r["$key?"](S))?u:(o=[S,v],C(r,"[]=",o),o[o.length-1])},-1),r.$values()}),X(c,"$tally",function(s){var n=this,r=u;return s&&s!==u&&ee(s),r=C(C(n,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),z(s)?(C(r,"each",[],function(t,i){var a;return t==null&&(t=u),i==null&&(i=u),a=[t,V(s.$fetch(t,0),i)],C(s,"[]=",a),a[a.length-1]}),s):r},-1),X(c,"$to_h",function _(s){var n=_.$$p||u,r,e,t=this;if(_.$$p=null,r=W(arguments),e=r,n!==u)return C(C(t,"map",[],n.$to_proc()),"to_h",m(e));var i=new Map;return t.$each.$$p=function(){var a=B.$destructure(arguments),o=B["$coerce_to?"](a,d("Array"),"to_ary"),v,S;o.$$is_array||U.$raise(d("TypeError"),"wrong element type "+a.$class()+" (expected array)"),o.length!==2&&U.$raise(d("ArgumentError"),"element has wrong array length (expected 2, was "+o.$length()+")"),v=o[0],S=o[1],$.hash_put(i,v,S)},t.$each.apply(t,e),i},-1),X(c,"$to_set",function _(s,n){var r=_.$$p||u,e,t,i,a=this;return _.$$p=null,e=W(arguments),e.length>0&&(t=e.shift()),t==null&&(t=y("Set")),i=e,C(t,"new",[a].concat(m(i)),r.$to_proc())},-1),X(c,"$zip",function _(s){_.$$p;var n,r,e=this;return _.$$p=null,n=W(arguments),r=n,C(e.$to_a(),"zip",m(r))},-1),x(c,"find","detect"),x(c,"filter","find_all"),x(c,"flat_map","collect_concat"),x(c,"map","collect"),x(c,"member?","include?"),x(c,"reduce","inject"),x(c,"select","find_all"),x(c,"to_a","entries")}("::",E)};Opal.modules["corelib/enumerator/arithmetic_sequence"]=function($){var z=$.klass,w=$.truthy,D=$.to_a,k=$.eqeq,ee=$.Kernel,J=$.def,C=$.rb_gt,W=$.rb_lt,m=$.rb_le,B=$.rb_ge,ie=$.rb_plus,X=$.rb_minus,U=$.eqeqeq,te=$.not,Z=$.rb_times,A=$.rb_divide,p=$.alias,P=[],V=$.nil,M=$.$$$;return $.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),function(L,g,q){var R=z(L,g,"Enumerator"),x=[R].concat(q);return function(E,u,d){var I=z(E,u,"ArithmeticSequence"),h=[I].concat(d),c=$.$r(h),l=I.$$prototype;l.step_arg2=l.receiver_num=l.step_arg1=l.step=l.range=l.topfx=l.bypfx=l.creation_method=l.skipped_arg=V,$.prop(I.$$prototype,"$$is_arithmetic_seq",!0);var y=1/0;return J(I,"$initialize",function(_,s,n){var r,e=this,t=V;return n==null&&(n="step"),e.creation_method=n,w(_["$is_a?"](M("Array")))?(r=[].concat(D(_)),e.step_arg1=r[0]==null?V:r[0],e.step_arg2=r[1]==null?V:r[1],e.topfx=r[2]==null?V:r[2],e.bypfx=r[3]==null?V:r[3],e.receiver_num=s,e.step=1,e.range=w(e.step_arg2)?(e.step=e.step_arg2,$.Range.$new(e.receiver_num,e.step_arg1,!1)):w(e.step_arg1)?$.Range.$new(e.receiver_num,e.step_arg1,!1):$.Range.$new(e.receiver_num,V,!1)):(w(s)||(e.skipped_arg=!0),r=[_,w(t=s)?t:1],e.range=r[0],e.step=r[1]),e.object=e,k(e.step,0)&&ee.$raise(c("ArgumentError"),"step can't be 0"),w(e.step["$respond_to?"]("to_int"))?V:ee.$raise(c("ArgumentError"),"no implicit conversion of "+e.step.$class()+" into Integer")},-2),I.$attr_reader("step"),J(I,"$begin",function(){var _=this;return _.range.$begin()}),J(I,"$end",function(){var _=this;return _.range.$end()}),J(I,"$exclude_end?",function(){var _=this;return _.range["$exclude_end?"]()}),J(I,"$_lesser_than_end?",function(_){var s=this,n=V,r=V;return n=w(r=s.$end())?r:y,w(C(s.$step(),0))?w(s["$exclude_end?"]())?W(_,n):m(_,n):w(s["$exclude_end?"]())?C(_,n):B(_,n)}),J(I,"$_greater_than_begin?",function(_){var s=this,n=V,r=V;return n=w(r=s.$begin())?r:y["$-@"](),w(C(s.$step(),0))?C(_,n):W(_,n)}),J(I,"$first",function(_){var s=this,n=V,r=V,e=V;if(n=w(r=s.$begin())?r:y["$-@"](),!w(_))return w(s["$_lesser_than_end?"](n))?n:V;for(e=[];w(w(r=s["$_lesser_than_end?"](n))?C(_,0):r);)e["$<<"](n),n=ie(n,s.$step()),_=X(_,1);return e},-1),J(I,"$each",function K(){var _=K.$$p||V,s=this,n=V,r=V;if(K.$$p=null,_===V)return s;for(U(V,n=s.$begin())&&ee.$raise(c("TypeError"),"nil can't be coerced into Integer"),r=w(n=s.$begin())?n:y["$-@"]();w(s["$_lesser_than_end?"](r));)$.yield1(_,r),r=ie(r,s.$step());return s}),J(I,"$last",function(_){var s=this,n=V,r=V,e=V;if(U(y,n=s.$end())||U(y["$-@"](),n)?ee.$raise(M("FloatDomainError"),s.$end()):U(V,n)&&ee.$raise(M("RangeError"),"cannot get the last element of endless arithmetic sequence"),r=X(s.$end(),X(s.$end(),s.$begin())["$%"](s.$step())),w(s["$_lesser_than_end?"](r))||(r=X(r,s.$step())),!w(_))return w(s["$_greater_than_begin?"](r))?r:V;for(e=[];w(w(n=s["$_greater_than_begin?"](r))?C(_,0):n);)e["$<<"](r),r=X(r,s.$step()),_=X(_,1);return e.$reverse()},-1),J(I,"$size",function(){var _=this,s=V,n=V;return s=w(C(_.$step(),0))?1:-1,te(_["$_lesser_than_end?"](_.$begin()))?0:w([y["$-@"](),y]["$include?"](_.$step()))?1:w([Z(y["$-@"](),s),V]["$include?"](_.$begin()))||w([Z(y,s),V]["$include?"](_.$end()))?y:(n=X(_.$end(),X(_.$end(),_.$begin())["$%"](_.$step())),w(_["$_lesser_than_end?"](n))||(n=X(n,_.$step())),ie(A(X(n,_.$begin()),_.$step()).$abs().$to_i(),1))}),J(I,"$==",function(_){var s=this,n=V,r=V,e=V,t=V;return w(n=w(r=w(e=w(t=s.$class()["$=="](_.$class()))?s.$begin()["$=="](_.$begin()):t)?s.$end()["$=="](_.$end()):e)?s.$step()["$=="](_.$step()):r)?s["$exclude_end?"]()["$=="](_["$exclude_end?"]()):n}),J(I,"$hash",function(){var _=this;return[c("ArithmeticSequence"),_.$begin(),_.$end(),_.$step(),_["$exclude_end?"]()].$hash()}),J(I,"$inspect",function(){var _=this,s=V;return w(_.receiver_num)?(s=w(_.step_arg2)?"("+_.topfx+_.step_arg1.$inspect()+", "+_.bypfx+_.step_arg2.$inspect()+")":w(_.step_arg1)?"("+_.topfx+_.step_arg1.$inspect()+")":V,"("+_.receiver_num.$inspect()+"."+_.creation_method+s+")"):(s=w(_.skipped_arg)?V:"("+_.step+")","(("+_.range.$inspect()+")."+_.creation_method+s+")")}),p(I,"===","=="),p(I,"eql?","==")}(R,R,x)}("::",null,P)};Opal.modules["corelib/enumerator/chain"]=function($){var z=$.deny_frozen_access,w=$.klass,D=$.slice,k=$.def,ee=$.send,J=$.to_a,C=$.truthy,W=$.rb_plus,m=$.thrower,B=$.nil,ie=$.$$$;return $.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),function(X,U){var te=w(X,U,"Enumerator");return function(Z,A){var p=w(Z,A,"Chain"),P=p.$$prototype;return P.enums=P.iterated=B,k(p,"$initialize",function(M){var L,g,q=this;return L=D(arguments),g=L,z(q),q.enums=g,q.iterated=[],q.object=q},-1),k(p,"$each",function V(M){var L=V.$$p||B,g,q,R=this;return V.$$p=null,g=D(arguments),q=g,L===B?ee(R,"to_enum",["each"].concat(J(q)),function x(){var E=x.$$s==null?this:x.$$s;return E.$size()},{$$s:R}):(ee(R.enums,"each",[],function x(E){var u=x.$$s==null?this:x.$$s;return u.iterated==null&&(u.iterated=B),E==null&&(E=B),u.iterated["$<<"](E),ee(E,"each",J(q),L.$to_proc())},{$$s:R}),R)},-1),k(p,"$size",function(M){try{var L=m("return"),g,q,R=this,x=B;return g=D(arguments),q=g,x=0,ee(R.enums,"each",[],function E(u){var d=B;return u==null&&(u=B),d=ee(u,"size",J(q)),C([B,ie(ie("Float"),"INFINITY")]["$include?"](d))&&L.$throw(d,E.$$is_lambda),x=W(x,d)},{$$ret:L}),x}catch(E){if(E===L)return E.$v;throw E}finally{L.is_orphan=!0}},-1),k(p,"$rewind",function(){var M=this;return ee(M.iterated,"reverse_each",[],function(g){return g==null&&(g=B),C(g["$respond_to?"]("rewind"))?g.$rewind():B}),M.iterated=[],M}),k(p,"$inspect",function(){var M=this;return"#<Enumerator::Chain: "+M.enums.$inspect()+">"})}(te,te)}("::",null)};Opal.modules["corelib/enumerator/generator"]=function($){var z=$.deny_frozen_access,w=$.klass,D=$.truthy,k=$.Kernel,ee=$.def,J=$.slice,C=$.send,W=[],m=$.nil,B=$.$$$;return $.add_stubs("include,raise,new,to_proc"),function(ie,X,U){var te=w(ie,X,"Enumerator"),Z=[te].concat(U);return function(A,p,P){var V=w(A,p,"Generator"),M=[V].concat(P),L=$.$r(M),g=V.$$prototype;return g.block=m,V.$include(B("Enumerable")),ee(V,"$initialize",function q(){var R=q.$$p||m,x=this;return q.$$p=null,z(x),D(R)||k.$raise(B("LocalJumpError"),"no block given"),x.block=R}),ee(V,"$each",function q(R){var x=q.$$p||m,E,u,d=this,I=m;q.$$p=null,E=J(arguments),u=E,I=C(L("Yielder"),"new",[],x.$to_proc());try{u.unshift(I),$.yieldX(d.block,u)}catch(h){if(h&&h.$thrower_type=="breaker")return h.$v;throw h}return d},-1)}(Z[0],null,Z)}(W[0],null,W)};Opal.modules["corelib/enumerator/lazy"]=function($){var z=$.truthy,w=$.coerce_to,D=$.yield1,k=$.yieldX,ee=$.deny_frozen_access,J=$.klass,C=$.slice,W=$.send2,m=$.find_super,B=$.to_a,ie=$.defs,X=$.Kernel,U=$.send,te=$.def,Z=$.return_self,A=$.Opal,p=$.rb_lt,P=$.eqeqeq,V=$.rb_plus,M=$.alias,L=[],g=$.nil,q=$.$$$;return $.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),function(R,x,E){var u=J(R,x,"Enumerator"),d=[u].concat(E);return function(I,h,c){var l=J(I,h,"Lazy"),y=[l].concat(c),K=$.$r(y),_=l.$$prototype;return _.enumerator=g,J(l,q("Exception"),"StopLazyError"),ie(l,"$for",function s(n,r){var e,t,i=s.$$p||g,a=this,o=g;return s.$$p=null,e=C(arguments,1),t=e,o=W(a,m(a,"for",s,!1,!0),"for",[n].concat(B(t)),i),o.enumerator=n,o},-2),te(l,"$initialize",function s(n,r){var e=s.$$p||g,t=this;return s.$$p=null,r==null&&(r=g),ee(t),e===g&&X.$raise(q("ArgumentError"),"tried to call lazy new without a block"),t.enumerator=n,W(t,m(t,"initialize",s,!1,!0),"initialize",[r],function(a,o){var v,S;a==null&&(a=g),v=C(arguments,1),S=v;try{return U(n,"each",B(S),function(T){var Y,O;Y=C(arguments),O=Y,O.unshift(a),k(e,O)},-1)}catch(j){if($.rescue(j,[K("StopLazyError")]))try{return g}finally{$.pop_exception(j)}else throw j}},-2)},-2),te(l,"$lazy",Z),te(l,"$collect",function s(){var n=s.$$p||g,r=this;return s.$$p=null,z(n)||X.$raise(q("ArgumentError"),"tried to call lazy map without a block"),U(K("Lazy"),"new",[r,r.$enumerator_size()],function(t,i){var a,o;t==null&&(t=g),a=C(arguments,1),o=a;var v=k(n,o);t.$yield(v)},-2)}),te(l,"$collect_concat",function s(){var n=s.$$p||g,r=this;return s.$$p=null,z(n)||X.$raise(q("ArgumentError"),"tried to call lazy map without a block"),U(K("Lazy"),"new",[r,g],function(t,i){var a,o;t==null&&(t=g),a=C(arguments,1),o=a;var v=k(n,o);if(v["$respond_to?"]("force")&&v["$respond_to?"]("each"))U(v,"each",[],function(T){return T==null&&(T=g),t.$yield(T)});else{var S=A.$try_convert(v,q("Array"),"to_ary");S===g?t.$yield(v):U(v,"each",[],function(T){return T==null&&(T=g),t.$yield(T)})}},-2)}),te(l,"$drop",function(n){var r=this,e=g,t=g,i=g;return n=w(n,q("Integer"),"to_int"),z(p(n,0))&&X.$raise(q("ArgumentError"),"attempt to drop negative size"),e=r.$enumerator_size(),t=P(q("Integer"),e)&&z(p(n,e))?n:e,i=0,U(K("Lazy"),"new",[r,t],function(o,v){var S,j;return o==null&&(o=g),S=C(arguments,1),j=S,z(p(i,n))?i=V(i,1):U(o,"yield",B(j))},-2)}),te(l,"$drop_while",function s(){var n=s.$$p||g,r=this,e=g;return s.$$p=null,z(n)||X.$raise(q("ArgumentError"),"tried to call lazy drop_while without a block"),e=!0,U(K("Lazy"),"new",[r,g],function(i,a){var o,v;if(i==null&&(i=g),o=C(arguments,1),v=o,z(e)){var S=k(n,v);z(S)||(e=!1,U(i,"yield",B(v)))}else return U(i,"yield",B(v))},-2)}),te(l,"$enum_for",function s(n,r){var e=s.$$p||g,t,i,a,o=this;return s.$$p=null,t=C(arguments),t.length>0&&(i=t.shift()),i==null&&(i="each"),a=t,U(o.$class(),"for",[o,i].concat(B(a)),e.$to_proc())},-1),te(l,"$find_all",function s(){var n=s.$$p||g,r=this;return s.$$p=null,z(n)||X.$raise(q("ArgumentError"),"tried to call lazy select without a block"),U(K("Lazy"),"new",[r,g],function(t,i){var a,o;t==null&&(t=g),a=C(arguments,1),o=a;var v=k(n,o);z(v)&&U(t,"yield",B(o))},-2)}),te(l,"$grep",function s(n){var r=s.$$p||g,e=this;return s.$$p=null,z(r)?U(K("Lazy"),"new",[e,g],function(i,a){var o,v;i==null&&(i=g),o=C(arguments,1),v=o;var S=A.$destructure(v),j=n["$==="](S);z(j)&&(j=D(r,S),i.$yield(D(r,S)))},-2):U(K("Lazy"),"new",[e,g],function(i,a){var o,v;i==null&&(i=g),o=C(arguments,1),v=o;var S=A.$destructure(v),j=n["$==="](S);z(j)&&i.$yield(S)},-2)}),te(l,"$reject",function s(){var n=s.$$p||g,r=this;return s.$$p=null,z(n)||X.$raise(q("ArgumentError"),"tried to call lazy reject without a block"),U(K("Lazy"),"new",[r,g],function(t,i){var a,o;t==null&&(t=g),a=C(arguments,1),o=a;var v=k(n,o);z(v)||U(t,"yield",B(o))},-2)}),te(l,"$take",function(n){var r=this,e=g,t=g,i=g;return n=w(n,q("Integer"),"to_int"),z(p(n,0))&&X.$raise(q("ArgumentError"),"attempt to take negative size"),e=r.$enumerator_size(),t=P(q("Integer"),e)&&z(p(n,e))?n:e,i=0,U(K("Lazy"),"new",[r,t],function(o,v){var S,j;return o==null&&(o=g),S=C(arguments,1),j=S,z(p(i,n))?(U(o,"yield",B(j)),i=V(i,1)):X.$raise(K("StopLazyError"))},-2)}),te(l,"$take_while",function s(){var n=s.$$p||g,r=this;return s.$$p=null,z(n)||X.$raise(q("ArgumentError"),"tried to call lazy take_while without a block"),U(K("Lazy"),"new",[r,g],function(t,i){var a,o;t==null&&(t=g),a=C(arguments,1),o=a;var v=k(n,o);z(v)?U(t,"yield",B(o)):X.$raise(K("StopLazyError"))},-2)}),te(l,"$inspect",function(){var n=this;return"#<"+n.$class()+": "+n.enumerator.$inspect()+">"}),M(l,"force","to_a"),M(l,"filter","find_all"),M(l,"flat_map","collect_concat"),M(l,"map","collect"),M(l,"select","find_all"),M(l,"to_enum","enum_for")}(u,u,d)}("::",null,L)};Opal.modules["corelib/enumerator/yielder"]=function($){var z=$.klass,w=$.def,D=$.slice,k=$.send,ee=$.to_a,J=[],C=$.nil;return $.add_stubs("yield,proc"),function(W,m,B){var ie=z(W,m,"Enumerator"),X=[ie].concat(B);return function(U,te){var Z=z(U,te,"Yielder"),A=Z.$$prototype;return A.block=C,w(Z,"$initialize",function p(){var P=p.$$p||C,V=this;return p.$$p=null,V.block=P,V}),w(Z,"$yield",function(P){var V,M,L=this;V=D(arguments),M=V;var g=$.yieldX(L.block,M);if(g&&g.$thrower_type=="break")throw g;return g},-1),w(Z,"$<<",function(P){var V=this;return V.$yield(P),V}),w(Z,"$to_proc",function(){var P=this;return k(P,"proc",[],function V(M){var L,g,q=V.$$s==null?this:V.$$s;return L=D(arguments),g=L,k(q,"yield",ee(g))},{$$arity:-1,$$s:P})})}(X[0],null)}(J[0],null,J)};Opal.modules["corelib/enumerator"]=function($){var z=$.slice,w=$.coerce_to,D=$.deny_frozen_access,k=$.klass,ee=$.defs,J=$.truthy,C=$.send,W=$.not,m=$.def,B=$.rb_plus,ie=$.to_a,X=$.Opal,U=$.send2,te=$.find_super,Z=$.rb_ge,A=$.Kernel,p=$.rb_le,P=$.alias,V=$.top,M=[],L=$.nil,g=$.$$$;return $.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),V.$require("corelib/enumerable"),function(q,R,x){var E=k(q,R,"Enumerator"),u=[E].concat(x),d=$.$r(u),I=E.$$prototype;return I.size=I.args=I.object=I.method=I.values=I.cursor=L,E.$include(g("Enumerable")),E.$$prototype.$$is_enumerator=!0,ee(E,"$for",function h(c,l,y){var K=h.$$p||L,_,s,n,r=this;h.$$p=null,_=z(arguments,1),_.length>0&&(s=_.shift()),s==null&&(s="each"),n=_;var e=r.$allocate();return e.object=c,e.size=K,e.method=s,e.args=n,e.cursor=0,e},-2),m(E,"$initialize",function h(c){var l=h.$$p||L,y=this;return h.$$p=null,z(arguments),D(y),y.cursor=0,J(l)?(y.object=C(d("Generator"),"new",[],l.$to_proc()),y.method="each",y.args=[],y.size=arguments[0]||L,J(y.size)&&W(y.size["$respond_to?"]("call"))?y.size=w(y.size,g("Integer"),"to_int"):L):(y.object=arguments[0],y.method=arguments[1]||"each",y.args=z(arguments,2),y.size=L)},-1),m(E,"$each",function h(c){var l=h.$$p||L,y,K,_=this;return h.$$p=null,y=z(arguments),K=y,J(l["$nil?"]())&&J(K["$empty?"]())?_:(K=B(_.args,K),J(l["$nil?"]())?C(_.$class(),"new",[_.object,_.method].concat(ie(K))):C(_.object,"__send__",[_.method].concat(ie(K)),l.$to_proc()))},-1),m(E,"$size",function(){var c=this;return J(c.size["$respond_to?"]("call"))?C(c.size,"call",ie(c.args)):c.size}),m(E,"$with_index",function h(c){var l=h.$$p||L,y=this;if(h.$$p=null,c==null&&(c=0),c=J(c)?w(c,g("Integer"),"to_int"):0,!J(l))return C(y,"enum_for",["with_index",c],function _(){var s=_.$$s==null?this:_.$$s;return s.$size()},{$$s:y});var K=c;return y.$each.$$p=function(){var _=X.$destructure(arguments),s=l(_,K);return K++,s},y.$each()},-1),m(E,"$each_with_index",function h(){var c=h.$$p||L,l=this;return h.$$p=null,c===L?C(l,"enum_for",["each_with_index"],function y(){var K=y.$$s==null?this:y.$$s;return K.$size()},{$$s:l}):(U(l,te(l,"each_with_index",h,!1,!0),"each_with_index",[],c),l.object)}),m(E,"$rewind",function(){var c=this;return c.cursor=0,c}),m(E,"$peek_values",function(){var c=this,l=L;return c.values=J(l=c.values)?l:C(c,"map",[],function(K){var _,s;return _=z(arguments),s=_,s},-1),J(Z(c.cursor,c.values.$length()))&&A.$raise(g("StopIteration"),"iteration reached an end"),c.values["$[]"](c.cursor)}),m(E,"$peek",function(){var c=this,l=L;return l=c.$peek_values(),J(p(l.$length(),1))?l["$[]"](0):l}),m(E,"$next_values",function(){var c=this,l=L;return l=c.$peek_values(),c.cursor=B(c.cursor,1),l}),m(E,"$next",function(){var c=this,l=L;return l=c.$next_values(),J(p(l.$length(),1))?l["$[]"](0):l}),m(E,"$feed",function(c){var l=this;return l.$raise(d("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),m(E,"$+",function(c){var l=this;return g(g("Enumerator"),"Chain").$new(l,c)}),m(E,"$inspect",function(){var c=this,l=L;return l="#<"+c.$class()+": "+c.object.$inspect()+":"+c.method,J(c.args["$any?"]())&&(l=B(l,"("+c.args.$inspect()["$[]"](g("Range").$new(1,-2))+")")),B(l,">")}),P(E,"with_object","each_with_object"),E.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),E.$autoload("Chain","corelib/enumerator/chain"),E.$autoload("Generator","corelib/enumerator/generator"),E.$autoload("Lazy","corelib/enumerator/lazy"),E.$autoload("Yielder","corelib/enumerator/yielder")}("::",null,M)};Opal.modules["corelib/numeric"]=function($){var z=$.klass,w=$.truthy,D=$.Kernel,k=$.def,ee=$.to_ary,J=$.return_self,C=$.rb_minus,W=$.rb_times,m=$.rb_lt,B=$.eqeq,ie=$.rb_divide,X=$.return_val,U=$.Opal,te=$.slice,Z=$.extract_kwargs,A=$.ensure_kwargs,p=$.hash_get,P=$.not,V=$.send,M=$.rb_ge,L=$.rb_le,g=$.rb_plus,q=$.rb_gt,R=$.alias,x=$.top,E=$.nil,u=$.$$$;return $.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),x.$require("corelib/comparable"),function(d,I){var h=z(d,I,"Numeric");return h.$include(u("Comparable")),k(h,"$coerce",function(l){var y=this;return w(l["$instance_of?"](y.$class()))?[l,y]:[D.$Float(l),D.$Float(y)]}),k(h,"$__coerced__",function(l,y){var K,_,s=this,n=E,r=E;if(w(y["$respond_to?"]("coerce")))return _=y.$coerce(s),K=ee(_),n=K[0]==null?E:K[0],r=K[1]==null?E:K[1],n.$__send__(l,r);switch(l.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return D.$raise(u("TypeError"),""+y.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return D.$raise(u("ArgumentError"),"comparison of "+s.$class()+" with "+y.$class()+" failed");default:return E}}),k(h,"$<=>",function(l){var y=this;return w(y["$equal?"](l))?0:E}),k(h,"$+@",J),k(h,"$-@",function(){var l=this;return C(0,l)}),k(h,"$%",function(l){var y=this;return C(y,W(l,y.$div(l)))}),k(h,"$abs",function(){var l=this;return w(m(l,0))?l["$-@"]():l}),k(h,"$abs2",function(){var l=this;return W(l,l)}),k(h,"$angle",function(){var l=this;return w(m(l,0))?u(u("Math"),"PI"):0}),k(h,"$ceil",function(l){var y=this;return l==null&&(l=0),y.$to_f().$ceil(l)},-1),k(h,"$conj",J),k(h,"$denominator",function(){var l=this;return l.$to_r().$denominator()}),k(h,"$div",function(l){var y=this;return B(l,0)&&D.$raise(u("ZeroDivisionError"),"divided by o"),ie(y,l).$floor()}),k(h,"$divmod",function(l){var y=this;return[y.$div(l),y["$%"](l)]}),k(h,"$fdiv",function(l){var y=this;return ie(y.$to_f(),l)}),k(h,"$floor",function(l){var y=this;return l==null&&(l=0),y.$to_f().$floor(l)},-1),k(h,"$i",function(){var l=this;return D.$Complex(0,l)}),k(h,"$imag",X(0)),k(h,"$integer?",X(!1)),k(h,"$nonzero?",function(){var l=this;return w(l["$zero?"]())?E:l}),k(h,"$numerator",function(){var l=this;return l.$to_r().$numerator()}),k(h,"$polar",function(){var l=this;return[l.$abs(),l.$arg()]}),k(h,"$quo",function(l){var y=this;return ie(U["$coerce_to!"](y,u("Rational"),"to_r"),l)}),k(h,"$real",J),k(h,"$real?",X(!0)),k(h,"$rect",function(){var l=this;return[l,0]}),k(h,"$round",function(l){var y=this;return y.$to_f().$round(l)},-1),k(h,"$step",function c(l,y,K){var _=c.$$p||E,s,n,r,e,t,i,a=this,o=E;c.$$p=null,s=te(arguments),n=Z(s),n=A(n),s.length>0&&(r=s.shift()),s.length>0&&(e=s.shift()),t=p(n,"to"),i=p(n,"by"),r!==void 0&&t!==void 0&&D.$raise(u("ArgumentError"),"to is given twice"),e!==void 0&&i!==void 0&&D.$raise(u("ArgumentError"),"step is given twice"),t!==void 0&&(r=t),i!==void 0&&(e=i),r===void 0&&(r=E);function v(){e===E&&D.$raise(u("TypeError"),"step must be numeric"),e!=null&&e["$=="](0)&&D.$raise(u("ArgumentError"),"step can't be 0"),(e===E||e==null)&&(e=1);var ge=e["$<=>"](0);ge===E&&D.$raise(u("ArgumentError"),"0 can't be coerced into "+e.$class()),(r===E||r==null)&&(r=ge>0?u(u("Float"),"INFINITY"):u(u("Float"),"INFINITY")["$-@"]()),U.$compare(a,r)}function S(){if(e>0&&a>r||e<0&&a<r)return 0;if(e===1/0||e===-1/0)return 1;var ge=Math.abs,ve=Math.floor,me=(ge(a)+ge(r)+ge(r-a))/ge(e)*u(u("Float"),"EPSILON");return me===1/0||me===-1/0?0:(me>.5&&(me=.5),ve((r-a)/e+me)+1)}function j(){if(v(),e===0)return 1/0;if(e%1!==0)return S();if(e>0&&a>r||e<0&&a<r)return 0;var ge=Math.ceil,ve=Math.abs,me=ve(a-r)+1,be=ve(e);return ge(me/be)}if(_===E)return(P(r)||w(r["$is_a?"](u("Numeric"))))&&(P(e)||w(e["$is_a?"](u("Numeric"))))?u(u("Enumerator"),"ArithmeticSequence").$new([r,e,w(t)?"to: ":E,w(i)?"by: ":E],a):V(a,"enum_for",["step",r,e],j.$to_proc());v();var T=e["$negative?"](),Y=e["$=="](0)||r===1/0&&!T||r===-1/0&&T;if(a.$$is_number&&e.$$is_number&&r.$$is_number)if(a%1===0&&(Y||r%1===0)&&e%1===0){var O=a;if(Y)for(;;O+=e)_(O);else if(T)for(;O>=r;O+=e)_(O);else for(;O<=r;O+=e)_(O);return a}else{var ae=a.$to_f().valueOf();e=e.$to_f().valueOf(),r=r.$to_f().valueOf();var le=S();if(!isFinite(e))le!==0&&_(ae);else if(e===0)for(;;)_(ae);else for(var _e=0;_e<le;_e++){var de=_e*e+a;(e>=0?r<de:r>de)&&(de=r),_(de)}return a}for(o=a;w(T?M(o,r):L(o,r));)$.yield1(_,o),o=g(o,e)},-1),k(h,"$to_c",function(){var l=this;return D.$Complex(l,0)}),k(h,"$to_int",function(){var l=this;return l.$to_i()}),k(h,"$truncate",function(l){var y=this;return l==null&&(l=0),y.$to_f().$truncate(l)},-1),k(h,"$zero?",function(){var l=this;return l["$=="](0)}),k(h,"$positive?",function(){var l=this;return q(l,0)}),k(h,"$negative?",function(){var l=this;return m(l,0)}),k(h,"$dup",J),k(h,"$clone",function(l){var y=this;return l=A(l),p(l,"freeze"),y},-1),k(h,"$finite?",X(!0)),k(h,"$infinite?",X(E)),R(h,"arg","angle"),R(h,"conjugate","conj"),R(h,"imaginary","imag"),R(h,"magnitude","abs"),R(h,"modulo","%"),R(h,"phase","arg"),R(h,"rectangular","rect")}("::",null)};Opal.modules["corelib/array"]=function($){var z=$.truthy,w=$.falsy,D=$.yield1,k=$.hash_get,ee=$.hash_put,J=$.hash_delete,C=$.coerce_to,W=$.respond_to,m=$.deny_frozen_access,B=$.freeze,ie=$.opal32_init,X=$.opal32_add,U=$.klass,te=$.slice,Z=$.defs,A=$.Kernel,p=$.def,P=$.Opal,V=$.eqeqeq,M=$.send2,L=$.find_super,g=$.send,q=$.rb_gt,R=$.rb_times,x=$.eqeq,E=$.rb_minus,u=$.to_a,d=$.to_ary,I=$.gvars,h=$.rb_ge,c=$.assign_ivar,l=$.rb_lt,y=$.return_self,K=$.neqeq,_=$.alias,s=$.top,n=[],r=$.nil,e=$.$$$;return $.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,join,to_str,===,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,sort_by,&,to_s,new,item,max,min,!,>=,**,delete_if,rotate,rand,at,keep_if,shuffle!,<,sort,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),s.$require("corelib/enumerable"),s.$require("corelib/numeric"),function(t,i,a){var o=U(t,i,"Array"),v=[o].concat(a),S=$.$r(v);o.$include(e("Enumerable")),$.prop(o.$$prototype,"$$is_array",!0);function j($e){for(var N=$e[0],F=1,G=$e.length;F<G;F++)$e[F-1]=$e[F];return $e.pop(),N}function T($e,N){return N.$$name===$.Array?$e:N.$allocate().$replace($e.$to_a())}function Y($e,N,F){for(var G,Q=null,ne=new Array($e.length),se=0,oe=0;se<$e.length;se++){if(!Q)try{G=D(F,$e[se])}catch(fe){Q=fe}(Q||N(G))&&(ne[oe]=$e[se],oe+=1)}if(oe!==se&&($e.splice.apply($e,[0,ne.length].concat(ne)),$e.splice(oe,ne.length)),Q)throw Q}function O($e){return $e.$$is_array||($e=C($e,e("Array"),"to_ary")),$e.$to_a()}function ae($e,N){var F=N.length;if(F>6&&F<32767)$e.push.apply($e,N);else for(var G=0;G<F;G++)$e.push(N[G])}Z(o,"$[]",function(N){var F,G,Q=this;return F=te(arguments),G=F,T(G,Q)},-1),p(o,"$initialize",function $e(N,F){var G=$e.$$p||r,Q=this;if($e.$$p=null,N==null&&(N=r),F==null&&(F=r),m(Q),F!==r&&G!==r&&A.$warn("warning: block supersedes default value argument"),N>e(e("Integer"),"MAX")&&A.$raise(e("ArgumentError"),"array size too big"),arguments.length>2&&A.$raise(e("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),arguments.length===0)return Q.length>0&&Q.splice(0,Q.length),Q;if(arguments.length===1){if(N.$$is_array)return Q.$replace(N.$to_a()),Q;if(N["$respond_to?"]("to_ary"))return Q.$replace(N.$to_ary()),Q}N=C(N,e("Integer"),"to_int"),N<0&&A.$raise(e("ArgumentError"),"negative array size"),Q.splice(0,Q.length);var ne,se;if(G===r)for(ne=0;ne<N;ne++)Q.push(F);else for(ne=0,se;ne<N;ne++)se=G(ne),Q[ne]=se;return Q},-1),Z(o,"$try_convert",function(N){return P["$coerce_to?"](N,e("Array"),"to_ary")}),p(o,"$&",function(N){var F=this;if(N=O(N),F.length===0||N.length===0)return[];var G=[],Q=new Map,ne,se,oe;for(ne=0,se=N.length;ne<se;ne++)ee(Q,N[ne],!0);for(ne=0,se=F.length;ne<se;ne++)oe=F[ne],J(Q,oe)!==void 0&&G.push(oe);return G}),p(o,"$|",function(N){var F=this;N=O(N);var G=new Map,Q,ne;for(Q=0,ne=F.length;Q<ne;Q++)ee(G,F[Q],!0);for(Q=0,ne=N.length;Q<ne;Q++)ee(G,N[Q],!0);return G.$keys()}),p(o,"$*",function(N){var F=this;if(z(N["$respond_to?"]("to_str")))return F.$join(N.$to_str());N=C(N,e("Integer"),"to_int"),z(N<0)&&A.$raise(e("ArgumentError"),"negative argument");for(var G=[],Q=F.$to_a(),ne=0;ne<N;ne++)G=G.concat(Q);return G}),p(o,"$+",function(N){var F=this;return N=O(N),F.concat(N)}),p(o,"$-",function(N){var F=this;if(N=O(N),z(F.length===0))return[];if(z(N.length===0))return F.slice();var G=[],Q=new Map,ne,se,oe;for(ne=0,se=N.length;ne<se;ne++)ee(Q,N[ne],!0);for(ne=0,se=F.length;ne<se;ne++)oe=F[ne],k(Q,oe)===void 0&&G.push(oe);return G}),p(o,"$<<",function(N){var F=this;return m(F),F.push(N),F}),p(o,"$<=>",function(N){var F=this;if(V(e("Array"),N))N=N.$to_a();else if(z(N["$respond_to?"]("to_ary")))N=N.$to_ary().$to_a();else return r;if(F===N)return 0;for(var G=Math.min(F.length,N.length),Q=0;Q<G;Q++){var ne=F[Q]["$<=>"](N[Q]);if(ne!==0)return ne}return F.length["$<=>"](N.length)}),p(o,"$==",function(N){var F=this,G={};function Q(ne,se){var oe,fe,f,b;if(ne===se)return!0;if(!se.$$is_array)return W(se,"$to_ary")?se["$=="](ne):!1;if(ne.$$constructor!==Array&&(ne=ne.$to_a()),se.$$constructor!==Array&&(se=se.$to_a()),ne.length!==se.length)return!1;for(G[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(f=ne[oe],b=se[oe],f.$$is_array){if(b.$$is_array&&b.length!==f.length||!G.hasOwnProperty(f.$object_id())&&!Q(f,b))return!1}else if(!f["$=="](b))return!1;return!0}return Q(F,N)});function le($e,N){var F=$e.length,G,Q,ne,se;return G=N.excl,Q=N.begin===r?0:C(N.begin,$.Integer,"to_int"),ne=N.end===r?-1:C(N.end,$.Integer,"to_int"),Q<0&&(Q+=F,Q<0)||(N.excl_rev&&N.begin!==r&&(Q+=1),Q>F)?r:ne<0&&(ne+=F,ne<0)?[]:((!G||N.end===r)&&(ne+=1),se=$e.slice(Q,ne),se)}function _e($e,N){var F,G=[],Q=0,ne;for(N.step<0?(ne={begin:N.range.end,end:N.range.begin,excl:!1,excl_rev:N.range.excl},F=le($e,ne).$reverse()):F=le($e,N.range);Q<F.length;)G.push(F[Q]),Q+=Math.abs(N.step);return G}function de($e,N,F){var G=$e.length,Q;return N=C(N,$.Integer,"to_int"),N<0&&(N+=G,N<0)?r:F===void 0?N>=G||N<0?r:$e[N]:(F=C(F,$.Integer,"to_int"),F<0||N>G||N<0?r:(Q=$e.slice(N,N+F),Q))}p(o,"$[]",function(N,F){var G=this;return N.$$is_range?le(G,N):N.$$is_arithmetic_seq?_e(G,N):de(G,N,F)},-2),p(o,"$[]=",function(N,F,G){var Q=this,ne=r,se=r;m(Q),ne=r;var oe,fe=Q.length;if(N.$$is_range){F.$$is_array?ne=F.$to_a():F["$respond_to?"]("to_ary")?ne=F.$to_ary().$to_a():ne=[F];var f=N.excl,b=N.begin===r?0:C(N.begin,$.Integer,"to_int"),H=N.end===r?-1:C(N.end,$.Integer,"to_int");if(b<0&&(b+=fe,b<0&&A.$raise(e("RangeError"),""+N.$inspect()+" out of range")),H<0&&(H+=fe),(!f||N.end===r)&&(H+=1),b>fe)for(oe=fe;oe<b;oe++)Q[oe]=r;return H<0?Q.splice.apply(Q,[b,0].concat(ne)):Q.splice.apply(Q,[b,H-b].concat(ne)),F}else{G===void 0?se=1:(se=F,F=G,F.$$is_array?ne=F.$to_a():F["$respond_to?"]("to_ary")?ne=F.$to_ary().$to_a():ne=[F]);var re;if(N=C(N,e("Integer"),"to_int"),se=C(se,e("Integer"),"to_int"),N<0&&(re=N,N+=fe,N<0&&A.$raise(e("IndexError"),"index "+re+" too small for array; minimum "+-Q.length)),se<0&&A.$raise(e("IndexError"),"negative length ("+se+")"),N>fe)for(oe=fe;oe<N;oe++)Q[oe]=r;return G===void 0?Q[N]=F:Q.splice.apply(Q,[N,se].concat(ne)),F}},-3),p(o,"$any?",function $e(N){var F=$e.$$p||r,G=this;return $e.$$p=null,G.length===0?!1:M(G,L(G,"any?",$e,!1,!0),"any?",[N],F)},-1),p(o,"$assoc",function(N){for(var F=this,G=0,Q=F.length,ne;G<Q;G++)if(ne=F[G],ne.length&&ne[0]["$=="](N))return ne;return r}),p(o,"$at",function(N){var F=this;return N=C(N,e("Integer"),"to_int"),N<0&&(N+=F.length),N<0||N>=F.length?r:F[N]}),p(o,"$bsearch_index",function $e(){var N=$e.$$p||r,F=this;if($e.$$p=null,N===r)return F.$enum_for("bsearch_index");for(var G=0,Q=F.length,ne,se,oe,fe=!1,f=r;G<Q;){if(ne=G+Math.floor((Q-G)/2),se=F[ne],oe=D(N,se),oe===!0)f=ne,fe=!0;else if(oe===!1||oe===r)fe=!1;else if(oe.$$is_number){if(oe===0)return ne;fe=oe<0}else A.$raise(e("TypeError"),"wrong argument type "+oe.$class()+" (must be numeric, true, false or nil)");fe?Q=ne:G=ne+1}return f}),p(o,"$bsearch",function $e(){var N=$e.$$p||r,F=this,G=r;return $e.$$p=null,N===r?F.$enum_for("bsearch"):(G=g(F,"bsearch_index",[],N.$to_proc()),G!=null&&G.$$is_number?F[G]:G)}),p(o,"$cycle",function $e(N){var F=$e.$$p||r,G=this;if($e.$$p=null,N==null&&(N=r),F===r)return g(G,"enum_for",["cycle",N],function se(){var oe=se.$$s==null?this:se.$$s;return z(N["$nil?"]())?e(e("Float"),"INFINITY"):(N=P["$coerce_to!"](N,e("Integer"),"to_int"),z(q(N,0))?R(oe.$enumerator_size(),N):0)},{$$s:G});if(z(G["$empty?"]())||x(N,0))return r;var Q,ne;if(N===r)for(;;)for(Q=0,ne=G.length;Q<ne;Q++)D(F,G[Q]);else{if(N=P["$coerce_to!"](N,e("Integer"),"to_int"),N<=0)return G;for(;N>0;){for(Q=0,ne=G.length;Q<ne;Q++)D(F,G[Q]);N--}}return G},-1),p(o,"$clear",function(){var N=this;return m(N),N.splice(0,N.length),N}),p(o,"$count",function $e(N){var F=$e.$$p||r,G=this;return $e.$$p=null,z(N!==void 0)||z(F)?M(G,L(G,"count",$e,!1,!0),"count",[N],F):G.$size()},-1),p(o,"$initialize_copy",function(N){var F=this;return F.$replace(N)}),p(o,"$collect",function $e(){var N=$e.$$p||r,F=this;if($e.$$p=null,N===r)return g(F,"enum_for",["collect"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:F});for(var G=[],Q=0;Q<F.length;Q++){var ne=D(N,F[Q]);G[Q]=ne}return G}),p(o,"$collect!",function $e(){var N=$e.$$p||r,F=this;if($e.$$p=null,N===r)return g(F,"enum_for",["collect!"],function ne(){var se=ne.$$s==null?this:ne.$$s;return se.$size()},{$$s:F});m(F);for(var G=0;G<F.length;G++){var Q=D(N,F[G]);F[G]=Q}return F});function ge($e,N){return $e===N||N===0?1:N>0&&$e>N?ge($e-1,N-1)+ge($e-1,N):0}p(o,"$combination",function $e(N){var F=$e.$$p||r,G=this,Q=r;if($e.$$p=null,Q=P["$coerce_to!"](N,e("Integer"),"to_int"),F===r)return g(G,"enum_for",["combination",Q],function re(){var ue=re.$$s==null?this:re.$$s;return ge(ue.length,Q)},{$$s:G});var ne,se,oe,fe,f,b,H;if(Q===0)$.yield1(F,[]);else if(Q===1)for(ne=0,se=G.length;ne<se;ne++)$.yield1(F,[G[ne]]);else if(Q===G.length)$.yield1(F,G.slice());else if(Q>=0&&Q<G.length){for(oe=[],ne=0;ne<=Q+1;ne++)oe.push(0);for(fe=[],f=0,b=!1,oe[0]=-1;!b;){for(fe[f]=G[oe[f+1]];f<Q-1;)f++,H=oe[f+1]=oe[f]+1,fe[f]=G[H];$.yield1(F,fe.slice()),f++;do b=f===0,oe[f]++,f--;while(oe[f+1]+Q===G.length+f+1)}}return G}),p(o,"$repeated_combination",function $e(N){var F=$e.$$p||r,G=this,Q=r;if($e.$$p=null,Q=P["$coerce_to!"](N,e("Integer"),"to_int"),F===r)return g(G,"enum_for",["repeated_combination",Q],function se(){var oe=se.$$s==null?this:se.$$s;return ge(oe.length+Q-1,Q)},{$$s:G});function ne(se,oe,fe,f){if(fe.length==se){var b=fe.slice();$.yield1(F,b);return}for(var H=oe;H<f.length;H++)fe.push(f[H]),ne(se,H,fe,f),fe.pop()}return Q>=0&&ne(Q,0,[],G),G}),p(o,"$compact",function(){for(var N=this,F=[],G=0,Q=N.length,ne;G<Q;G++)(ne=N[G])!==r&&F.push(ne);return F}),p(o,"$compact!",function(){var N=this;m(N);for(var F=N.length,G=0,Q=N.length;G<Q;G++)N[G]===r&&(N.splice(G,1),Q--,G--);return N.length===F?r:N}),p(o,"$concat",function(N){var F,G,Q=this;return F=te(arguments),G=F,m(Q),G=g(G,"map",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;return se==null&&(se=r),se=O(se),z(se["$equal?"](oe))&&(se=se.$dup()),se},{$$s:Q}),g(G,"each",[],function ne(se){var oe=ne.$$s==null?this:ne.$$s;se==null&&(se=r);for(var fe=0,f=se.length;fe<f;fe++)oe.push(se[fe])},{$$s:Q}),Q},-1),p(o,"$delete",function $e(N){var F=$e.$$p||r,G=this;$e.$$p=null;for(var Q=G.length,ne=0,se=Q;ne<se;ne++)G[ne]["$=="](N)&&(m(G),G.splice(ne,1),se--,ne--);return G.length===Q?F!==r?$.yieldX(F,[]):r:N}),p(o,"$delete_at",function(N){var F=this;if(m(F),N=C(N,e("Integer"),"to_int"),N<0&&(N+=F.length),N<0||N>=F.length)return r;var G=F[N];return F.splice(N,1),G}),p(o,"$delete_if",function $e(){var N=$e.$$p||r,F=this;return $e.$$p=null,N===r?g(F,"enum_for",["delete_if"],function G(){var Q=G.$$s==null?this:G.$$s;return Q.$size()},{$$s:F}):(m(F),Y(F,w,N),F)}),p(o,"$difference",function(N){var F,G,Q=this;return F=te(arguments),G=F,g(G,"reduce",[Q.$to_a().$dup()],function(se,oe){return se==null&&(se=r),oe==null&&(oe=r),E(se,oe)})},-1),p(o,"$dig",function(N,F){var G,Q,ne=this,se=r;return G=te(arguments,1),Q=G,se=ne["$[]"](N),se===r||Q.length===0?se:(z(se["$respond_to?"]("dig"))||A.$raise(e("TypeError"),""+se.$class()+" does not have #dig method"),g(se,"dig",u(Q)))},-2),p(o,"$drop",function(N){var F=this;return N=C(N,e("Integer"),"to_int"),N<0&&A.$raise(e("ArgumentError")),F.slice(N)}),p(o,"$dup",function $e(){var N=$e.$$p||r,F=this;return $e.$$p=null,F.$$class===$.Array&&F.$$class.$allocate.$$pristine&&F.$copy_instance_variables.$$pristine&&F.$initialize_dup.$$pristine?F.slice(0):M(F,L(F,"dup",$e,!1,!0),"dup",[],N)}),p(o,"$each",function $e(){var N=$e.$$p||r,F=this;if($e.$$p=null,N===r)return g(F,"enum_for",["each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:F});for(var G=0;G<F.length;G++)D(N,F[G]);return F}),p(o,"$each_index",function $e(){var N=$e.$$p||r,F=this;if($e.$$p=null,N===r)return g(F,"enum_for",["each_index"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:F});for(var G=0;G<F.length;G++)D(N,G);return F}),p(o,"$empty?",function(){var N=this;return N.length===0}),p(o,"$eql?",function(N){var F=this,G={};function Q(ne,se){var oe,fe,f,b;if(!se.$$is_array||(se=se.$to_a(),ne.length!==se.length))return!1;for(G[ne.$object_id()]=!0,oe=0,fe=ne.length;oe<fe;oe++)if(f=ne[oe],b=se[oe],f.$$is_array){if(b.$$is_array&&b.length!==f.length||!G.hasOwnProperty(f.$object_id())&&!Q(f,b))return!1}else if(!f["$eql?"](b))return!1;return!0}return Q(F,N)}),p(o,"$fetch",function $e(N,F){var G=$e.$$p||r,Q=this;$e.$$p=null;var ne=N;if(N=C(N,e("Integer"),"to_int"),N<0&&(N+=Q.length),N>=0&&N<Q.length)return Q[N];if(G!==r&&F!=null&&Q.$warn("warning: block supersedes default value argument"),G!==r)return G(ne);if(F!=null)return F;Q.length===0?A.$raise(e("IndexError"),"index "+ne+" outside of array bounds: 0...0"):A.$raise(e("IndexError"),"index "+ne+" outside of array bounds: -"+Q.length+"..."+Q.length)},-2),p(o,"$fill",function $e(N){var F=$e.$$p||r,G,Q,ne,se,oe=this,fe=r,f=r,b=r,H=r,re=r;$e.$$p=null,G=te(arguments),Q=G,m(oe);var ue,ce;if(z(F)?(z(Q.length>2)&&A.$raise(e("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 0..2)"),se=Q,ne=d(se),fe=ne[0]==null?r:ne[0],f=ne[1]==null?r:ne[1]):(z(Q.length==0)?A.$raise(e("ArgumentError"),"wrong number of arguments (0 for 1..3)"):z(Q.length>3)&&A.$raise(e("ArgumentError"),"wrong number of arguments ("+Q.$length()+" for 1..3)"),se=Q,ne=d(se),b=ne[0]==null?r:ne[0],fe=ne[1]==null?r:ne[1],f=ne[2]==null?r:ne[2]),V(e("Range"),fe)){if(z(f)&&A.$raise(e("TypeError"),"length invalid with range"),H=fe.begin===r?0:C(fe.begin,e("Integer"),"to_int"),z(H<0)&&(H+=this.length),z(H<0)&&A.$raise(e("RangeError"),""+fe.$inspect()+" out of range"),re=fe.end===r?-1:C(fe.end,e("Integer"),"to_int"),z(re<0)&&(re+=this.length),z(fe["$exclude_end?"]())||(re+=1),z(re<=H))return oe}else if(z(fe))if(H=C(fe,e("Integer"),"to_int"),z(H<0)&&(H+=this.length),z(H<0)&&(H=0),z(f)){if(re=C(f,e("Integer"),"to_int"),z(re==0))return oe;re+=H}else re=this.length;else H=0,re=this.length;if(z(H>this.length))for(ue=this.length;ue<re;ue++)oe[ue]=r;if(z(re>this.length)&&(this.length=re),z(F))for(this.length;H<re;H++)ce=F(H),oe[H]=ce;else for(this.length;H<re;H++)oe[H]=b;return oe},-1),p(o,"$first",function(N){var F=this;return N==null?F.length===0?r:F[0]:(N=C(N,e("Integer"),"to_int"),N<0&&A.$raise(e("ArgumentError"),"negative array size"),F.slice(0,N))},-1),p(o,"$flatten",function(N){var F=this;function G(Q,ne){var se=[],oe,fe,f,b;for(Q=Q.$to_a(),oe=0,fe=Q.length;oe<fe;oe++){if(f=Q[oe],!W(f,"$to_ary",!0)){se.push(f);continue}if(b=f.$to_ary(),b===r){se.push(f);continue}switch(b.$$is_array||A.$raise(e("TypeError")),b===F&&A.$raise(e("ArgumentError")),ne){case void 0:se=se.concat(G(b));break;case 0:se.push(b);break;default:ae(se,G(b,ne-1))}}return se}return N!==void 0&&(N=C(N,e("Integer"),"to_int")),G(F,N)},-1),p(o,"$flatten!",function(N){var F=this;m(F);var G=F.$flatten(N);if(F.length==G.length){for(var Q=0,ne=F.length;Q<ne&&F[Q]===G[Q];Q++);if(Q==ne)return r}return F.$replace(G),F},-1),p(o,"$freeze",function(){var N=this;return z(N["$frozen?"]())?N:B(N)});var ve;p(o,"$hash",function(){var N=this,F=ve===void 0,G=ie(),Q=N.$object_id(),ne,se,oe;if(G=X(G,10),G=X(G,N.length),F)ve=Object.create(null);else if(ve[Q])return X(G,16843009);try{for(oe in ve)if(ne=ve[oe],N["$eql?"](ne))return X(G,16843009);for(ve[Q]=N,se=0;se<N.length;se++)ne=N[se],G=X(G,ne.$hash());return G}finally{F&&(ve=void 0)}}),p(o,"$include?",function(N){for(var F=this,G=0,Q=F.length;G<Q;G++)if(F[G]["$=="](N))return!0;return!1}),p(o,"$index",function $e(N){var F=$e.$$p||r,G=this;$e.$$p=null;var Q,ne,se;if(N!=null&&F!==r&&G.$warn("warning: given block not used"),N!=null){for(Q=0,ne=G.length;Q<ne;Q++)if(G[Q]["$=="](N))return Q}else if(F!==r){for(Q=0;Q<G.length;Q++)if(se=F(G[Q]),se!==!1&&se!==r)return Q}else return G.$enum_for("index");return r},-1),p(o,"$insert",function(N,F){var G,Q,ne=this;if(G=te(arguments,1),Q=G,m(ne),N=C(N,e("Integer"),"to_int"),Q.length>0){if(N<0&&(N+=ne.length+1,N<0&&A.$raise(e("IndexError"),""+N+" is out of bounds")),N>ne.length)for(var se=ne.length;se<N;se++)ne.push(r);ne.splice.apply(ne,[N,0].concat(Q))}return ne},-2);var me=[];p(o,"$inspect",function(){var N=this,F=[],G=N.$__id__(),Q=!0;return function(){try{if(me.indexOf(G)!==-1)return Q=!1,"[...]";me.push(G);for(var ne=0,se=N.length;ne<se;ne++){var oe=N["$[]"](ne);F.push(S("Opal").$inspect(oe))}return"["+F.join(", ")+"]"}finally{Q&&me.pop()}}()}),p(o,"$intersection",function(N){var F,G,Q=this,ne=r,se=r;return F=te(arguments),G=F,G.length===0?Q.$to_a().$dup():(G=G.map(O),Q.length===0?[]:(G=g(G,"sort_by",[],"length".$to_proc()),z(Q.length<G[0].length)?g(G,"reduce",[Q],"&".$to_proc()):(ne=G.pop(),se=g(G,"reduce",[ne],"&".$to_proc()),Q["$&"](se))))},-1),p(o,"$intersect?",function(N){var F=this,G,Q,ne=new Map,se,oe;for(F.length<N.length?(G=F,Q=N):(G=N,Q=F),se=0,oe=G.length;se<oe;se++)ee(ne,G[se],!0);for(se=0,oe=Q.length;se<oe;se++)if(k(ne,Q[se]))return!0;return!1}),p(o,"$join",function(N){var F=this;if(I[","]==null&&(I[","]=r),N==null&&(N=r),z(F.length===0))return"";z(N===r)&&(N=I[","]);var G=[],Q,ne,se,oe;for(Q=0,ne=F.length;Q<ne;Q++){if(se=F[Q],W(se,"$to_str")&&(oe=se.$to_str(),oe!==r)){G.push(oe.$to_s());continue}if(W(se,"$to_ary")&&(oe=se.$to_ary(),oe===F&&A.$raise(e("ArgumentError")),oe!==r)){G.push(oe.$join(N));continue}if(W(se,"$to_s")&&(oe=se.$to_s(),oe!==r)){G.push(oe);continue}A.$raise(e("NoMethodError").$new(""+S("Opal").$inspect(F.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return N===r?G.join(""):G.join(P["$coerce_to!"](N,e("String"),"to_str").$to_s())},-1),p(o,"$keep_if",function $e(){var N=$e.$$p||r,F=this;return $e.$$p=null,N===r?g(F,"enum_for",["keep_if"],function G(){var Q=G.$$s==null?this:G.$$s;return Q.$size()},{$$s:F}):(m(F),Y(F,z,N),F)}),p(o,"$last",function(N){var F=this;return N==null?F.length===0?r:F[F.length-1]:(N=C(N,e("Integer"),"to_int"),N<0&&A.$raise(e("ArgumentError"),"negative array size"),N>F.length&&(N=F.length),F.slice(F.length-N,F.length))},-1),p(o,"$length",function(){var N=this;return N.length}),p(o,"$max",function $e(N){var F=$e.$$p||r,G=this;return $e.$$p=null,g(G.$each(),"max",[N],F.$to_proc())},-1),p(o,"$min",function $e(){var N=$e.$$p||r,F=this;return $e.$$p=null,g(F.$each(),"min",[],N.$to_proc())});function be($e,N){for(var F=N>=0?1:0;N;)F*=$e,$e--,N--;return F}return p(o,"$permutation",function $e(N){var F=$e.$$p||r,G=this,Q=r,ne=r;if($e.$$p=null,F===r)return g(G,"enum_for",["permutation",N],function b(){var H=b.$$s==null?this:b.$$s;return be(H.length,N===void 0?H.length:N)},{$$s:G});var se,oe,fe;if(N===void 0?N=G.length:N=C(N,e("Integer"),"to_int"),!(N<0||G.length<N))if(N===0)$.yield1(F,[]);else if(N===1)for(var f=0;f<G.length;f++)$.yield1(F,[G[f]]);else Q=S("Array").$new(N),ne=S("Array").$new(G.length,!1),se=function(b,H,re,ue,ce){G=this;for(var he=0;he<G.length;he++)if(ue["$[]"](he)["$!"]())if(H[re]=he,re<b-1)ue[he]=!0,se.call(G,b,H,re+1,ue,ce),ue[he]=!1;else{fe=[];for(var pe=0;pe<H.length;pe++)fe.push(G[H[pe]]);D(ce,fe)}},F!==r?(oe=G.slice(),se.call(oe,N,Q,0,ne,F)):se.call(G,N,Q,0,ne,F);return G},-1),p(o,"$repeated_permutation",function $e(N){var F=$e.$$p||r,G=this,Q=r;if($e.$$p=null,Q=P["$coerce_to!"](N,e("Integer"),"to_int"),F===r)return g(G,"enum_for",["repeated_permutation",Q],function se(){var oe=se.$$s==null?this:se.$$s;return z(h(Q,0))?oe.$size()["$**"](Q):0},{$$s:G});function ne(se,oe,fe){if(oe.length==se){var f=oe.slice();$.yield1(F,f);return}for(var b=0;b<fe.length;b++)oe.push(fe[b]),ne(se,oe,fe),oe.pop()}return ne(Q,[],G.slice()),G}),p(o,"$pop",function(N){var F=this;return m(F),z(N===void 0)?z(F.length===0)?r:F.pop():(N=C(N,e("Integer"),"to_int"),z(N<0)&&A.$raise(e("ArgumentError"),"negative array size"),z(F.length===0)?[]:z(N===1)?[F.pop()]:z(N>F.length)?F.splice(0,F.length):F.splice(F.length-N,F.length))},-1),p(o,"$product",function $e(N){var F=$e.$$p||r,G,Q,ne=this;$e.$$p=null,G=te(arguments),Q=G;var se=F!==r?null:[],oe=Q.length+1,fe=new Array(oe),f=new Array(oe),b=new Array(oe),H,re,ue,ce,he=1;for(b[0]=ne,H=1;H<oe;H++)b[H]=C(Q[H-1],e("Array"),"to_ary");for(H=0;H<oe;H++){if(ce=b[H].length,ce===0)return se||ne;he*=ce,he>2147483647&&A.$raise(e("RangeError"),"too big to product"),f[H]=ce,fe[H]=0}e:for(;;){for(ue=[],H=0;H<oe;H++)ue.push(b[H][fe[H]]);for(se?se.push(ue):$.yield1(F,ue),re=oe-1,fe[re]++;fe[re]===f[re];){if(fe[re]=0,--re<0)break e;fe[re]++}}return se||ne},-1),p(o,"$push",function(N){var F,G,Q=this;return F=te(arguments),G=F,m(Q),ae(Q,G),Q},-1),p(o,"$rassoc",function(N){for(var F=this,G=0,Q=F.length,ne;G<Q;G++)if(ne=F[G],ne.length&&ne[1]!==void 0&&ne[1]["$=="](N))return ne;return r}),p(o,"$reject",function $e(){var N=$e.$$p||r,F=this;if($e.$$p=null,N===r)return g(F,"enum_for",["reject"],function se(){var oe=se.$$s==null?this:se.$$s;return oe.$size()},{$$s:F});for(var G=[],Q=0,ne;Q<F.length;Q++)ne=N(F[Q]),(ne===!1||ne===r)&&G.push(F[Q]);return G}),p(o,"$reject!",function $e(){var N=$e.$$p||r,F=this,G=r;return $e.$$p=null,N===r?g(F,"enum_for",["reject!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:F}):(m(F),G=F.$length(),g(F,"delete_if",[],N.$to_proc()),x(F.$length(),G)?r:F)}),p(o,"$replace",function(N){var F=this;return m(F),N=O(N),F.length>0&&F.splice(0,F.length),ae(F,N),F}),p(o,"$reverse",function(){var N=this;return N.slice(0).reverse()}),p(o,"$reverse!",function(){var N=this;return m(N),N.reverse()}),p(o,"$reverse_each",function $e(){var N=$e.$$p||r,F=this;if($e.$$p=null,N===r)return g(F,"enum_for",["reverse_each"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:F});for(var G=F.length-1;G>=0;G--)D(N,F[G]);return F}),p(o,"$rindex",function $e(N){var F=$e.$$p||r,G=this;$e.$$p=null;var Q,ne;if(N!=null&&F!==r&&G.$warn("warning: given block not used"),N!=null){for(Q=G.length-1;Q>=0&&!(Q>=G.length);Q--)if(G[Q]["$=="](N))return Q}else if(F!==r){for(Q=G.length-1;Q>=0&&!(Q>=G.length);Q--)if(ne=F(G[Q]),ne!==!1&&ne!==r)return Q}else if(N==null)return G.$enum_for("rindex");return r},-1),p(o,"$rotate",function(N){var F=this;N==null&&(N=1);var G,Q,ne,se;return N=C(N,e("Integer"),"to_int"),F.length===1?F.slice():F.length===0?[]:(G=F.slice(),Q=N%G.length,ne=G.slice(Q),se=G.slice(0,Q),ne.concat(se))},-1),p(o,"$rotate!",function(N){var F=this,G=r;return N==null&&(N=1),m(F),F.length===0||F.length===1?F:(N=C(N,e("Integer"),"to_int"),G=F.$rotate(N),F.$replace(G))},-1),function($e,N){var F=U($e,N,"SampleRandom"),G=F.$$prototype;return G.rng=r,p(F,"$initialize",c("rng")),p(F,"$rand",function(ne){var se=this,oe=r;return oe=C(se.rng.$rand(ne),e("Integer"),"to_int"),z(oe<0)&&A.$raise(e("RangeError"),"random value must be >= 0"),z(oe<ne)||A.$raise(e("RangeError"),"random value must be less than Array size"),oe})}(o,null),p(o,"$sample",function(N,F){var G=this,Q=r,ne=r;if(z(N===void 0))return G.$at(A.$rand(G.length));if(z(F===void 0)?z(Q=P["$coerce_to?"](N,e("Hash"),"to_hash"))?(F=Q,N=r):(F=r,N=C(N,e("Integer"),"to_int")):(N=C(N,e("Integer"),"to_int"),F=C(F,e("Hash"),"to_hash")),z(N)&&z(N<0)&&A.$raise(e("ArgumentError"),"count must be greater than 0"),z(F)&&(ne=F["$[]"]("random")),ne=z(ne)&&z(ne["$respond_to?"]("rand"))?S("SampleRandom").$new(ne):A,!z(N))return G[ne.$rand(G.length)];var se,oe,fe,f,b,H,re,ue;switch(N>G.length&&(N=G.length),N){case 0:return[];case 1:return[G[ne.$rand(G.length)]];case 2:return f=ne.$rand(G.length),b=ne.$rand(G.length-1),f<=b&&b++,[G[f],G[b]];default:if(G.length/N>3){for(se=!1,oe=0,fe=S("Array").$new(N),f=1,fe[0]=ne.$rand(G.length);f<N;){for(H=ne.$rand(G.length),b=0;b<f;){for(;H===fe[b];){if(oe++,oe>100){se=!0;break}H=ne.$rand(G.length)}if(se)break;b++}if(se)break;fe[f]=H,f++}if(!se){for(f=0;f<N;)fe[f]=G[fe[f]],f++;return fe}}fe=G.slice();for(var ce=0;ce<N;ce++)re=ne.$rand(G.length-ce)+ce,ue=fe[ce],fe[ce]=fe[re],fe[re]=ue;return N===G.length?fe:fe["$[]"](0,N)}},-1),p(o,"$select",function $e(){var N=$e.$$p||r,F=this;if($e.$$p=null,N===r)return g(F,"enum_for",["select"],function oe(){var fe=oe.$$s==null?this:oe.$$s;return fe.$size()},{$$s:F});for(var G=[],Q=0,ne,se;Q<F.length;Q++)ne=F[Q],se=D(N,ne),z(se)&&G.push(ne);return G}),p(o,"$select!",function $e(){var N=$e.$$p||r,F=this;if($e.$$p=null,N===r)return g(F,"enum_for",["select!"],function Q(){var ne=Q.$$s==null?this:Q.$$s;return ne.$size()},{$$s:F});m(F);var G=F.length;return g(F,"keep_if",[],N.$to_proc()),F.length===G?r:F}),p(o,"$shift",function(N){var F=this;return m(F),z(N===void 0)?z(F.length===0)?r:j(F):(N=C(N,e("Integer"),"to_int"),z(N<0)&&A.$raise(e("ArgumentError"),"negative array size"),z(F.length===0)?[]:F.splice(0,N))},-1),p(o,"$shuffle",function(N){var F=this;return F.$dup().$to_a()["$shuffle!"](N)},-1),p(o,"$shuffle!",function(N){var F=this;m(F);var G,Q=F.length,ne,se;for(N!==void 0&&(N=P["$coerce_to?"](N,e("Hash"),"to_hash"),N!==r&&(N=N["$[]"]("random"),N!==r&&N["$respond_to?"]("rand")&&(G=N)));Q;)G?(ne=G.$rand(Q).$to_int(),ne<0&&A.$raise(e("RangeError"),"random number too small "+ne),ne>=Q&&A.$raise(e("RangeError"),"random number too big "+ne)):ne=F.$rand(Q),se=F[--Q],F[Q]=F[ne],F[ne]=se;return F},-1),p(o,"$slice!",function(N,F){var G=this,Q=r,ne=r,se=r,oe=r,fe=r;if(m(G),Q=r,z(F===void 0))if(V(e("Range"),N)){ne=N,Q=G["$[]"](ne),se=ne.begin===r?0:C(ne.begin,e("Integer"),"to_int"),oe=ne.end===r?-1:C(ne.end,e("Integer"),"to_int"),se<0&&(se+=G.length),oe<0?oe+=G.length:oe>=G.length&&(oe=G.length-1,ne.excl&&(oe+=1));var f=oe-se;ne.excl&&ne.end!==r?oe-=1:f+=1,se<G.length&&se>=0&&oe<G.length&&oe>=0&&f>0&&G.splice(se,f)}else{if(fe=C(N,e("Integer"),"to_int"),fe<0&&(fe+=G.length),fe<0||fe>=G.length)return r;Q=G[fe],fe===0?G.shift():G.splice(fe,1)}else{if(fe=C(N,e("Integer"),"to_int"),F=C(F,e("Integer"),"to_int"),F<0)return r;Q=G["$[]"](fe,F),fe<0&&(fe+=G.length),fe+F>G.length&&(F=G.length-fe),fe<G.length&&fe>=0&&G.splice(fe,F)}return Q},-2),p(o,"$sort",function $e(){var N=$e.$$p||r,F=this;return $e.$$p=null,z(F.length>1)?(N===r&&(N=function(G,Q){return G["$<=>"](Q)}),F.slice().sort(function(G,Q){var ne=N(G,Q);return ne===r&&A.$raise(e("ArgumentError"),"comparison of "+G.$inspect()+" with "+Q.$inspect()+" failed"),q(ne,0)?1:l(ne,0)?-1:0})):F}),p(o,"$sort!",function $e(){var N=$e.$$p||r,F=this;$e.$$p=null,m(F);var G;N!==r?G=g(F.slice(),"sort",[],N.$to_proc()):G=F.slice().$sort(),F.length=0;for(var Q=0,ne=G.length;Q<ne;Q++)F.push(G[Q]);return F}),p(o,"$sort_by!",function $e(){var N=$e.$$p||r,F=this;return $e.$$p=null,N===r?g(F,"enum_for",["sort_by!"],function G(){var Q=G.$$s==null?this:G.$$s;return Q.$size()},{$$s:F}):(m(F),F.$replace(g(F,"sort_by",[],N.$to_proc())))}),p(o,"$take",function(N){var F=this;return N<0&&A.$raise(e("ArgumentError")),F.slice(0,N)}),p(o,"$take_while",function $e(){var N=$e.$$p||r,F=this;$e.$$p=null;for(var G=[],Q=0,ne,se;Q<F.length;Q++){if(ne=F[Q],se=N(ne),se===!1||se===r)return G;G.push(ne)}return G}),p(o,"$to_a",function(){var N=this;return N.$$class===$.Array?N:$.Array.$new(N)}),p(o,"$to_ary",y),p(o,"$to_h",function $e(){var N=$e.$$p||r,F=this,G=r;$e.$$p=null,G=F,N!==r&&(G=g(G,"map",[],N.$to_proc()));var Q,ne=G.length,se,oe,fe,f=new Map;for(Q=0;Q<ne;Q++)se=P["$coerce_to?"](G[Q],e("Array"),"to_ary"),se.$$is_array||A.$raise(e("TypeError"),"wrong element type "+G[Q].$class()+" at "+Q+" (expected array)"),se.length!==2&&A.$raise(e("ArgumentError"),"element has wrong array length at "+Q+" (expected 2, was "+se.$length()+")"),oe=se[0],fe=se[1],ee(f,oe,fe);return f}),p(o,"$transpose",function(){var N=this,F=r,G=r;return z(N["$empty?"]())?[]:(F=[],G=r,g(N,"each",[],function(ne){var se=r;return ne==null&&(ne=r),ne=O(ne),G=z(se=G)?se:ne.length,K(ne.length,G)&&A.$raise(e("IndexError"),"element size differs ("+ne.length+" should be "+G+")"),g(ne.length,"times",[],function(fe){var f,b=r;return fe==null&&(fe=r),b=z(se=F["$[]"](fe))?se:(f=[fe,[]],g(F,"[]=",f),f[f.length-1]),b["$<<"](ne.$at(fe))})}),F)}),p(o,"$union",function(N){var F,G,Q=this;return F=te(arguments),G=F,g(G,"reduce",[Q.$uniq()],function(se,oe){return se==null&&(se=r),oe==null&&(oe=r),se["$|"](oe)})},-1),p(o,"$uniq",function $e(){var N=$e.$$p||r,F=this;$e.$$p=null;var G=new Map,Q,ne,se,oe;if(N===r)for(Q=0,ne=F.length;Q<ne;Q++)se=F[Q],k(G,se)===void 0&&ee(G,se,se);else for(Q=0;Q<F.length;Q++)se=F[Q],oe=D(N,se),k(G,oe)===void 0&&ee(G,oe,se);return G.$values()}),p(o,"$uniq!",function $e(){var N=$e.$$p||r,F=this;$e.$$p=null,m(F);var G=new Map,Q,ne,se,oe=[];for(Q=0;Q<F.length;Q++)ne=F[Q],se=N===r?ne:D(N,ne),k(G,se)===void 0?ee(G,se,ne):oe.push(Q);for(Q=oe.length-1;Q>=0;Q--)F.splice(oe[Q],1);return oe.length===0?r:F}),p(o,"$unshift",function(N){var F,G,Q=this;F=te(arguments),G=F,m(Q);var ne=Q.length,se=G.length;if(se==0)return Q;for(var oe=ne-se,fe=0;fe<se;fe++)Q.push(Q[oe+fe]);for(var f=ne-1;f-se>=0;)Q[f]=Q[f-se],f--;for(var b=0;b<se;b++)Q[b]=G[b];return Q},-1),p(o,"$values_at",function(N){var F,G,Q=this,ne=r;return F=te(arguments),G=F,ne=[],g(G,"each",[],function se(oe){var fe=se.$$s==null?this:se.$$s,f=r,b=r,H=r;return oe==null&&(oe=r),z(oe["$is_a?"](e("Range")))?(f=oe.$end()===r?-1:C(oe.$end(),e("Integer"),"to_int"),b=oe.$begin()===r?0:C(oe.$begin(),e("Integer"),"to_int"),b<0?(b=b+fe.length,r):(f<0&&(f=f+fe.length),oe["$exclude_end?"]()&&oe.$end()!==r&&f--,f<b?r:g(b,"upto",[f],function re(ue){var ce=re.$$s==null?this:re.$$s;return ue==null&&(ue=r),ne["$<<"](ce.$at(ue))},{$$s:fe}))):(H=C(oe,e("Integer"),"to_int"),ne["$<<"](fe.$at(H)))},{$$s:Q}),ne},-1),p(o,"$zip",function $e(N){var F=$e.$$p||r,G,Q,ne=this,se=r;$e.$$p=null,G=te(arguments),Q=G;var oe=[],fe=ne.length,f,b,H,re,ue;for(re=0,ue=Q.length;re<ue;re++)if(b=Q[re],!b.$$is_array){if(b.$$is_range||b.$$is_enumerator){Q[re]=b.$take(fe);continue}Q[re]=(z(se=P["$coerce_to?"](b,e("Array"),"to_ary"))?se:P["$coerce_to!"](b,e("Enumerator"),"to_enum","each")).$to_a()}for(H=0;H<fe;H++){for(f=[ne[H]],re=0,ue=Q.length;re<ue;re++)b=Q[re][H],b==null&&(b=r),f[re+1]=b;oe[H]=f}if(F!==r){for(H=0;H<fe;H++)$.yield1(F,oe[H]);return r}return oe},-1),Z(o,"$inherited",function(N){N.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),p(o,"$instance_variables",function $e(){var N=$e.$$p||r,F=this;return $e.$$p=null,g(M(F,L(F,"instance_variables",$e,!1,!0),"instance_variables",[],N),"reject",[],function(Q){var ne=r;return Q==null&&(Q=r),z(ne=/^@\d+$/.test(Q))?ne:Q["$=="]("@length")})}),p(o,"$pack",function(N){return te(arguments),A.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),_(o,"append","push"),_(o,"filter","select"),_(o,"filter!","select!"),_(o,"map","collect"),_(o,"map!","collect!"),_(o,"prepend","unshift"),_(o,"size","length"),_(o,"slice","[]"),_(o,"to_s","inspect"),P.$pristine(o.$singleton_class(),"allocate"),P.$pristine(o,"copy_instance_variables","initialize_dup")}("::",Array,n)};Opal.modules["corelib/hash"]=function($){var z=$.yield1,w=$.hash_clone,D=$.hash_delete,k=$.hash_each,ee=$.hash_get,J=$.hash_put,C=$.deny_frozen_access,W=$.freeze,m=$.opal32_init,B=$.opal32_add,ie=$.klass,X=$.slice,U=$.Opal,te=$.Kernel,Z=$.defs,A=$.def,p=$.send,P=$.rb_ge,V=$.rb_gt,M=$.truthy,L=$.to_a,g=$.return_self,q=$.not,R=$.alias,x=$.top,E=[],u=$.nil,d=$.$$$;return $.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,inspect,coerce_to!,each,fetch,>=,>,==,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,!,select,select!,has_key?,indexes,index,length,[]=,has_value?"),x.$require("corelib/enumerable"),function(I,h,c){var l=ie(I,h,"Hash"),y=[l].concat(c),K=$.$r(y);l.$include(d("Enumerable")),l.$$prototype.$$is_hash=!0,Z(l,"$[]",function(r){var e,t,i=this;e=X(arguments),t=e;var a,o=t.length,v,S;if(o===1){if(a=U["$coerce_to?"](t["$[]"](0),d("Hash"),"to_hash"),a!==u)return i.$allocate()["$merge!"](a);for(t=U["$coerce_to?"](t["$[]"](0),d("Array"),"to_ary"),t===u&&te.$raise(d("ArgumentError"),"odd number of arguments for Hash"),o=t.length,a=i.$allocate(),S=0;S<o;S++)v=t[S],v.$$is_array||te.$raise(d("ArgumentError"),"invalid element "+v.$inspect()+" for Hash"),v.length===1?a.$store(v[0],u):v.length===2?a.$store(v[0],v[1]):te.$raise(d("ArgumentError"),"invalid number of elements ("+v.length+" for "+v.$inspect()+"), must be 1..2");return a}for(o%2!==0&&te.$raise(d("ArgumentError"),"odd number of arguments for Hash"),a=i.$allocate(),S=0;S<o;S+=2)a.$store(t[S],t[S+1]);return a},-1),Z(l,"$allocate",function(){var r=this,e=new r.$$constructor;return e.$$none=u,e.$$proc=u,e}),Z(l,"$try_convert",function(r){return U["$coerce_to?"](r,d("Hash"),"to_hash")}),A(l,"$initialize",function n(r){var e=n.$$p||u,t=this;return n.$$p=null,C(t),r!==void 0&&e!==u&&te.$raise(d("ArgumentError"),"wrong number of arguments (1 for 0)"),t.$$none=r===void 0?u:r,t.$$proc=e,t},-1),A(l,"$==",function(r){var e=this;return e===r?!0:!r.$$is_hash||e.size!==r.size?!1:k(e,!0,function(t,i){var a=ee(r,t);return a===void 0||!i["$eql?"](a)?[!0,!1]:[!1,!0]})}),A(l,"$>=",function(r){var e=this,t=u;return r=U["$coerce_to!"](r,d("Hash"),"to_hash"),e.size<r.size?!1:(t=!0,p(r,"each",[],function i(a,o){var v=i.$$s==null?this:i.$$s,S=u;if(a==null&&(a=u),o==null&&(o=u),S=v.$fetch(a,null),S==null||S!==o){t=!1;return}},{$$s:e}),t)}),A(l,"$>",function(r){var e=this;return r=U["$coerce_to!"](r,d("Hash"),"to_hash"),e.size<=r.size?!1:P(e,r)}),A(l,"$<",function(r){var e=this;return r=U["$coerce_to!"](r,d("Hash"),"to_hash"),V(r,e)}),A(l,"$<=",function(r){var e=this;return r=U["$coerce_to!"](r,d("Hash"),"to_hash"),P(r,e)}),A(l,"$[]",function(r){var e=this,t=ee(e,r);return t!==void 0?t:e.$default(r)}),A(l,"$[]=",function(r,e){var t=this;return C(t),J(t,r,e),e}),A(l,"$assoc",function(r){var e=this;return k(e,u,function(t,i){return t["$=="](r)?[!0,[t,i]]:[!1,u]})}),A(l,"$clear",function(){var r=this;return C(r),r.clear(),r.$$keys&&r.$$keys.clear(),r}),A(l,"$clone",function(){var r=this,e=r.$class().$new();return w(r,e),r["$frozen?"]()?e.$freeze():e}),A(l,"$compact",function(){var r=this,e=new Map;return k(r,e,function(t,i){return i!==u&&J(e,t,i),[!1,e]})}),A(l,"$compact!",function(){var r=this;C(r);var e=u;return k(r,e,function(t,i){return i===u&&(D(r,t),e=r),[!1,e]})}),A(l,"$compare_by_identity",function(){var r=this;return C(r),r.$$by_identity||(r.$$by_identity=!0,r.size!==0&&$.hash_rehash(r)),r}),A(l,"$compare_by_identity?",function(){var r=this;return r.$$by_identity===!0}),A(l,"$default",function(r){var e=this;return r!==void 0&&e.$$proc!==u&&e.$$proc!==void 0?e.$$proc.$call(e,r):e.$$none===void 0?u:e.$$none},-1),A(l,"$default=",function(r){var e=this;return C(e),e.$$proc=u,e.$$none=r,r}),A(l,"$default_proc",function(){var r=this;return r.$$proc!==void 0?r.$$proc:u}),A(l,"$default_proc=",function(r){var e=this;C(e);var t=r;return t!==u&&(t=U["$coerce_to!"](t,d("Proc"),"to_proc"),t["$lambda?"]()&&t.$arity().$abs()!==2&&te.$raise(d("TypeError"),"default_proc takes two arguments")),e.$$none=u,e.$$proc=t,r}),A(l,"$delete",function n(r){var e=n.$$p||u,t=this;n.$$p=null,C(t);var i=D(t,r);return i!==void 0?i:e!==u?$.yield1(e,r):u}),A(l,"$delete_if",function n(){var r=n.$$p||u,e=this;return n.$$p=null,M(r)?(C(e),k(e,e,function(t,i){var a=r(t,i);return a!==!1&&a!==u&&D(e,t),[!1,e]})):p(e,"enum_for",["delete_if"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),A(l,"$dig",function(r,e){var t,i,a=this,o=u;return t=X(arguments,1),i=t,o=a["$[]"](r),o===u||i.length===0?o:(M(o["$respond_to?"]("dig"))||te.$raise(d("TypeError"),""+o.$class()+" does not have #dig method"),p(o,"dig",L(i)))},-2),A(l,"$dup",function(){var r=this;return w(r,r.$class().$new())}),A(l,"$each",function n(){var r=n.$$p||u,e=this;return n.$$p=null,M(r)?k(e,e,function(t,i){return z(r,[t,i]),[!1,e]}):p(e,"enum_for",["each"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),A(l,"$each_key",function n(){var r=n.$$p||u,e=this;return n.$$p=null,M(r)?k(e,e,function(t,i){return r(t),[!1,e]}):p(e,"enum_for",["each_key"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),A(l,"$each_value",function n(){var r=n.$$p||u,e=this;return n.$$p=null,M(r)?k(e,e,function(t,i){return r(i),[!1,e]}):p(e,"enum_for",["each_value"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),A(l,"$empty?",function(){var r=this;return r.size===0}),A(l,"$except",function(r){var e,t,i=this;return e=X(arguments),t=e,p(i.$dup(),"except!",L(t))},-1),A(l,"$except!",function(r){var e,t,i=this;return e=X(arguments),t=e,p(t,"each",[],function a(o){var v=a.$$s==null?this:a.$$s;return o==null&&(o=u),v.$delete(o)},{$$s:i}),i},-1),A(l,"$fetch",function n(r,e){var t=n.$$p||u,i=this;n.$$p=null;var a=ee(i,r);return a!==void 0?a:t!==u?t(r):e!==void 0?e:te.$raise(d("KeyError").$new("key not found: "+r.$inspect(),new Map([["key",r],["receiver",i]])))},-2),A(l,"$fetch_values",function n(r){var e=n.$$p||u,t,i,a=this;return n.$$p=null,t=X(arguments),i=t,p(i,"map",[],function o(v){var S=o.$$s==null?this:o.$$s;return v==null&&(v=u),p(S,"fetch",[v],e.$to_proc())},{$$s:a})},-1),A(l,"$flatten",function(r){var e=this;r==null&&(r=1),r=U["$coerce_to!"](r,d("Integer"),"to_int");var t=[];return k(e,t,function(i,a){return t.push(i),a.$$is_array?r===1?(t.push(a),[!1,t]):(t=t.concat(a.$flatten(r-2)),[!1,t]):(t.push(a),[!1,t])})},-1),A(l,"$freeze",function(){var r=this;return M(r["$frozen?"]())?r:W(r)}),A(l,"$has_key?",function(r){var e=this;return ee(e,r)!==void 0}),A(l,"$has_value?",function(r){var e=this;return k(e,!1,function(t,i){return i["$=="](r)?[!0,!0]:[!1,!1]})});var _;A(l,"$hash",function(){var r=this,e=_===void 0,t=r.$object_id(),i=m(),a,o,v,S=r.size,j=new Int32Array(S);if(i=B(i,4),i=B(i,S),e)_=Object.create(null);else if(_[t])return B(i,16843009);try{for(a in _)if(o=_[a],r["$eql?"](o))return B(i,16843009);for(_[t]=r,v=0,k(r,!1,function(T,Y){return j[v]=[1883326802,T,Y].$hash(),v++,[!1,!1]}),j=j.sort(),v=0;v<j.length;v++)i=B(i,j[v]);return i}finally{e&&(_=void 0)}}),A(l,"$index",function(r){var e=this;return k(e,u,function(t,i){return i["$=="](r)?[!0,t]:[!1,u]})}),A(l,"$indexes",function(r){var e,t,i=this;e=X(arguments),t=e;for(var a=[],o=0,v=t.length,S,j;o<v;o++){if(S=t[o],j=ee(i,S),j===void 0){a.push(i.$default());continue}a.push(j)}return a},-1);var s;return A(l,"$inspect",function(){var r=this,e=s===void 0,t=r.$object_id(),i=[];return function(){try{if(e&&(s={}),s.hasOwnProperty(t))return"{...}";return s[t]=!0,k(r,!1,function(a,o){return o=K("Opal").$inspect(o),a=K("Opal").$inspect(a),i.push(a+"=>"+o),[!1,!1]}),"{"+i.join(", ")+"}";return u}finally{e&&(s=void 0)}}()}),A(l,"$invert",function(){var r=this,e=new Map;return k(r,e,function(t,i){return J(e,i,t),[!1,e]})}),A(l,"$keep_if",function n(){var r=n.$$p||u,e=this;return n.$$p=null,M(r)?(C(e),k(e,e,function(t,i){var a=r(t,i);return(a===!1||a===u)&&D(e,t),[!1,e]})):p(e,"enum_for",["keep_if"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),A(l,"$keys",function(){var r=this;return Array.from(r.keys())}),A(l,"$length",function(){var r=this;return r.size}),A(l,"$merge",function n(r){var e=n.$$p||u,t,i,a=this;return n.$$p=null,t=X(arguments),i=t,p(a.$dup(),"merge!",L(i),e.$to_proc())},-1),A(l,"$merge!",function n(r){var e=n.$$p||u,t,i,a=this;n.$$p=null,t=X(arguments),i=t,C(a);var o,v;for(o=0;o<i.length;++o)v=U["$coerce_to!"](i[o],d("Hash"),"to_hash"),e===u?k(v,!1,function(S,j){return J(a,S,j),[!1,!1]}):k(v,!1,function(S,j){var T=ee(a,S);return T===void 0?(J(a,S,j),[!1,!1]):(J(a,S,e(S,T,j)),[!1,!1])});return a},-1),A(l,"$rassoc",function(r){var e=this;return k(e,u,function(t,i){return i["$=="](r)?[!0,[t,i]]:[!1,u]})}),A(l,"$rehash",function(){var r=this;return C(r),$.hash_rehash(r)}),A(l,"$reject",function n(){var r=n.$$p||u,e=this;if(n.$$p=null,!M(r))return p(e,"enum_for",["reject"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var t=new Map;return k(e,t,function(i,a){var o=r(i,a);return(o===!1||o===u)&&J(t,i,a),[!1,t]})}),A(l,"$reject!",function n(){var r=n.$$p||u,e=this;if(n.$$p=null,!M(r))return p(e,"enum_for",["reject!"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});C(e);var t=u;return k(e,t,function(i,a){var o=r(i,a);return o!==!1&&o!==u&&(D(e,i),t=e),[!1,t]})}),A(l,"$replace",function(r){var e=this;return C(e),r=U["$coerce_to!"](r,d("Hash"),"to_hash"),e.$clear(),k(r,!1,function(t,i){return J(e,t,i),[!1,!1]}),M(r.$default_proc())?e["$default_proc="](r.$default_proc()):e["$default="](r.$default()),e}),A(l,"$select",function n(){var r=n.$$p||u,e=this;if(n.$$p=null,!M(r))return p(e,"enum_for",["select"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var t=new Map;return k(e,t,function(i,a){var o=r(i,a);return o!==!1&&o!==u&&J(t,i,a),[!1,t]})}),A(l,"$select!",function n(){var r=n.$$p||u,e=this;if(n.$$p=null,!M(r))return p(e,"enum_for",["select!"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});C(e);var t=u;return k(e,t,function(i,a){var o=r(i,a);return(o===!1||o===u)&&(D(e,i),t=e),[!1,t]})}),A(l,"$shift",function(){var r=this;return C(r),k(r,u,function(e,t){return[!0,[e,D(r,e)]]})}),A(l,"$slice",function(r){var e,t,i=this;e=X(arguments),t=e;for(var a=new Map,o=0,v=t.length;o<v;o++){var S=t[o],j=ee(i,S);j!==void 0&&J(a,S,j)}return a},-1),A(l,"$to_a",function(){var r=this,e=[];return k(r,e,function(t,i){return e.push([t,i]),[!1,e]})}),A(l,"$to_h",function n(){var r=n.$$p||u,e=this;if(n.$$p=null,r!==u)return p(e,"map",[],r.$to_proc()).$to_h();if(e.$$class===$.Hash)return e;var t=new Map;return w(e,t),t}),A(l,"$to_hash",g),A(l,"$to_proc",function(){var r=this;return p(r,"proc",[],function e(t){var i=e.$$s==null?this:e.$$s;return t==null&&te.$raise(d("ArgumentError"),"no key given"),i["$[]"](t)},{$$arity:-1,$$s:r})}),A(l,"$transform_keys",function n(r){var e=n.$$p||u,t=this;if(n.$$p=null,r==null&&(r=u),q(e)&&q(r))return p(t,"enum_for",["transform_keys"],function a(){var o=a.$$s==null?this:a.$$s;return o.$size()},{$$s:t});var i=new Map;return k(t,i,function(a,o){var v;return r!==u&&(v=ee(r,a)),v===void 0&&e&&e!==u&&(v=e(a)),v===void 0&&(v=a),J(i,v,o),[!1,i]})},-1),A(l,"$transform_keys!",function n(r){var e=n.$$p||u,t=this;if(n.$$p=null,r==null&&(r=u),q(e)&&q(r))return p(t,"enum_for",["transform_keys!"],function a(){var o=a.$$s==null?this:a.$$s;return o.$size()},{$$s:t});C(t);var i=new Map;return k(t,t,function(a,o){var v;return r!==u&&(v=ee(r,a)),v===void 0&&e&&e!==u&&(v=e(a)),v===void 0?[!1,t]:(ee(i,a)||D(t,a),J(t,v,o),J(i,v,!0),[!1,t])})},-1),A(l,"$transform_values",function n(){var r=n.$$p||u,e=this;if(n.$$p=null,!M(r))return p(e,"enum_for",["transform_values"],function i(){var a=i.$$s==null?this:i.$$s;return a.$size()},{$$s:e});var t=new Map;return k(e,t,function(i,a){return J(t,i,r(a)),[!1,t]})}),A(l,"$transform_values!",function n(){var r=n.$$p||u,e=this;return n.$$p=null,M(r)?(C(e),k(e,e,function(t,i){return J(e,t,r(i)),[!1,e]})):p(e,"enum_for",["transform_values!"],function t(){var i=t.$$s==null?this:t.$$s;return i.$size()},{$$s:e})}),A(l,"$values",function(){var r=this;return Array.from(r.values())}),R(l,"each_pair","each"),R(l,"eql?","=="),R(l,"filter","select"),R(l,"filter!","select!"),R(l,"include?","has_key?"),R(l,"indices","indexes"),R(l,"key","index"),R(l,"key?","has_key?"),R(l,"member?","has_key?"),R(l,"size","length"),R(l,"store","[]="),R(l,"to_s","inspect"),R(l,"update","merge!"),R(l,"value?","has_value?"),R(l,"values_at","indexes")}("::",Map,E)};Opal.modules["corelib/number"]=function($){var z=$.klass,w=$.Opal,D=$.Kernel,k=$.def,ee=$.eqeqeq,J=$.truthy,C=$.rb_gt,W=$.not,m=$.rb_lt,B=$.alias,ie=$.send2,X=$.find_super,U=$.send,te=$.rb_plus,Z=$.rb_minus,A=$.eqeq,p=$.return_self,P=$.rb_divide,V=$.to_ary,M=$.rb_times,L=$.rb_le,g=$.rb_ge,q=$.return_val,R=$.const_set,x=$.top,E=[],u=$.nil,d=$.$$$;return $.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__id__,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,next,coerce_to?"),x.$require("corelib/numeric"),function(I,h,c){var l=z(I,h,"Number");w.$bridge(Number,l),$.prop(l.$$prototype,"$$is_number",!0),l.$$is_number_class=!0;var y=new Map;(function(e,t){return k(e,"$allocate",function(){var a=this;return D.$raise(d("TypeError"),"allocator undefined for "+a.$name())}),$.udef(e,"$new"),u})($.get_singleton_class(l)),k(l,"$coerce",function(t){var i=this;if(t===u)D.$raise(d("TypeError"),"can't convert "+t.$class()+" into Float");else{if(t.$$is_string)return[D.$Float(t),i];if(t["$respond_to?"]("to_f"))return[w["$coerce_to!"](t,d("Float"),"to_f"),i];if(t.$$is_number)return[t,i];D.$raise(d("TypeError"),"can't convert "+t.$class()+" into Float")}}),k(l,"$__id__",function(){var t=this;if(t|t===0)return t*2+1;if(y.has(t))return y.get(t);var i=$.uid();return y.set(t,i),i}),k(l,"$hash",function(){var t=this;return t|t===0?t.$__id__():t.toString().$hash()}),k(l,"$+",function(t){var i=this;return t.$$is_number?i+t:i.$__coerced__("+",t)}),k(l,"$-",function(t){var i=this;return t.$$is_number?i-t:i.$__coerced__("-",t)}),k(l,"$*",function(t){var i=this;return t.$$is_number?i*t:i.$__coerced__("*",t)}),k(l,"$/",function(t){var i=this;return t.$$is_number?i/t:i.$__coerced__("/",t)}),k(l,"$%",function(t){var i=this;if(t.$$is_number){if(t==-1/0)return t;if(t==0)D.$raise(d("ZeroDivisionError"),"divided by 0");else return t<0||i<0?(i%t+t)%t:i%t}else return i.$__coerced__("%",t)}),k(l,"$&",function(t){var i=this;return t.$$is_number?i&t:i.$__coerced__("&",t)}),k(l,"$|",function(t){var i=this;return t.$$is_number?i|t:i.$__coerced__("|",t)}),k(l,"$^",function(t){var i=this;return t.$$is_number?i^t:i.$__coerced__("^",t)}),k(l,"$<",function(t){var i=this;return t.$$is_number?i<t:i.$__coerced__("<",t)}),k(l,"$<=",function(t){var i=this;return t.$$is_number?i<=t:i.$__coerced__("<=",t)}),k(l,"$>",function(t){var i=this;return t.$$is_number?i>t:i.$__coerced__(">",t)}),k(l,"$>=",function(t){var i=this;return t.$$is_number?i>=t:i.$__coerced__(">=",t)});var K=function(e,t){return t.$$is_number?isNaN(e)||isNaN(t)?u:e>t?1:e<t?-1:0:e.$__coerced__("<=>",t)};k(l,"$<=>",function(t){var i=this;try{return K(i,t)}catch(a){if($.rescue(a,[d("ArgumentError")]))try{return u}finally{$.pop_exception(a)}else throw a}}),k(l,"$<<",function(t){var i=this;return t=w["$coerce_to!"](t,d("Integer"),"to_int"),t>0?i<<t:i>>-t}),k(l,"$>>",function(t){var i=this;return t=w["$coerce_to!"](t,d("Integer"),"to_int"),t>0?i>>t:i<<-t}),k(l,"$[]",function(t){var i=this;return t=w["$coerce_to!"](t,d("Integer"),"to_int"),t<0?0:t>=32?i<0?1:0:i>>t&1}),k(l,"$+@",function(){var t=this;return+t}),k(l,"$-@",function(){var t=this;return-t}),k(l,"$~",function(){var t=this;return~t}),k(l,"$**",function(t){var i=this;return ee(d("Integer"),t)?W(d("Integer")["$==="](i))||J(C(t,0))?Math.pow(i,t):d("Rational").$new(i,1)["$**"](t):J(m(i,0))&&(ee(d("Float"),t)||ee(d("Rational"),t))?d("Complex").$new(i,0)["$**"](t.$to_f()):J(t.$$is_number!=null)?Math.pow(i,t):i.$__coerced__("**",t)}),k(l,"$==",function(t){var i=this;return t.$$is_number?i.valueOf()===t.valueOf():t["$respond_to?"]("==")?t["$=="](i):!1}),B(l,"===","=="),k(l,"$abs",function(){var t=this;return Math.abs(t)}),k(l,"$abs2",function(){var t=this;return Math.abs(t*t)}),k(l,"$allbits?",function(t){var i=this;return t=w["$coerce_to!"](t,d("Integer"),"to_int"),(i&t)==t}),k(l,"$anybits?",function(t){var i=this;return t=w["$coerce_to!"](t,d("Integer"),"to_int"),(i&t)!==0}),k(l,"$angle",function(){var t=this;return J(t["$nan?"]())?t:t==0?1/t>0?0:Math.PI:t<0?Math.PI:0}),k(l,"$bit_length",function(){var t=this;if(ee(d("Integer"),t)||D.$raise(d("NoMethodError").$new("undefined method `bit_length` for "+t+":Float","bit_length")),t===0||t===-1)return 0;for(var i=0,a=t<0?~t:t;a!=0;)i+=1,a>>>=1;return i}),k(l,"$ceil",function(t){var i=this;t==null&&(t=0);var a=i.$to_f();if(a%1===0&&t>=0)return a;var o=Math.pow(10,t),v=Math.ceil(a*o)/o;return a%1===0&&(v=Math.round(v)),v},-1),k(l,"$chr",function(t){var i=this;return $.enc(String.fromCharCode(i),t||"BINARY")},-1),k(l,"$denominator",function e(){var t=e.$$p||u,i=this;return e.$$p=null,J(i["$nan?"]())||J(i["$infinite?"]())?1:ie(i,X(i,"denominator",e,!1,!0),"denominator",[],t)}),k(l,"$downto",function e(t){var i=e.$$p||u,a=this;if(e.$$p=null,i===u)return U(a,"enum_for",["downto",t],function v(){var S=v.$$s==null?this:v.$$s;return ee(d("Numeric"),t)||D.$raise(d("ArgumentError"),"comparison of "+S.$class()+" with "+t.$class()+" failed"),J(C(t,S))?0:te(Z(S,t),1)},{$$s:a});t.$$is_number||D.$raise(d("ArgumentError"),"comparison of "+a.$class()+" with "+t.$class()+" failed");for(var o=a;o>=t;o--)i(o);return a}),k(l,"$equal?",function(t){var i=this,a=u;return J(a=i["$=="](t))?a:isNaN(i)&&isNaN(t)}),k(l,"$even?",function(){var t=this;return t%2===0}),k(l,"$floor",function(t){var i=this;t==null&&(t=0);var a=i.$to_f();if(a%1===0&&t>=0)return a;var o=Math.pow(10,t),v=Math.floor(a*o)/o;return a%1===0&&(v=Math.round(v)),v},-1),k(l,"$gcd",function(t){var i=this;ee(d("Integer"),t)||D.$raise(d("TypeError"),"not an integer");for(var a=Math.abs(i),o=Math.abs(t);a>0;){var v=a;a=o%a,o=v}return o}),k(l,"$gcdlcm",function(t){var i=this;return[i.$gcd(t),i.$lcm(t)]}),k(l,"$integer?",function(){var t=this;return t%1===0}),k(l,"$is_a?",function e(t){var i=e.$$p||u,a=this;return e.$$p=null,A(t,d("Integer"))&&ee(d("Integer"),a)||A(t,d("Integer"))&&ee(d("Integer"),a)||A(t,d("Float"))&&ee(d("Float"),a)?!0:ie(a,X(a,"is_a?",e,!1,!0),"is_a?",[t],i)}),k(l,"$instance_of?",function e(t){var i=e.$$p||u,a=this;return e.$$p=null,A(t,d("Integer"))&&ee(d("Integer"),a)||A(t,d("Integer"))&&ee(d("Integer"),a)||A(t,d("Float"))&&ee(d("Float"),a)?!0:ie(a,X(a,"instance_of?",e,!1,!0),"instance_of?",[t],i)}),k(l,"$lcm",function(t){var i=this;return ee(d("Integer"),t)||D.$raise(d("TypeError"),"not an integer"),i==0||t==0?0:Math.abs(i*t/i.$gcd(t))}),k(l,"$next",function(){var t=this;return t+1}),k(l,"$nobits?",function(t){var i=this;return t=w["$coerce_to!"](t,d("Integer"),"to_int"),(i&t)==0}),k(l,"$nonzero?",function(){var t=this;return t==0?u:t}),k(l,"$numerator",function e(){var t=e.$$p||u,i=this;return e.$$p=null,J(i["$nan?"]())||J(i["$infinite?"]())?i:ie(i,X(i,"numerator",e,!1,!0),"numerator",[],t)}),k(l,"$odd?",function(){var t=this;return t%2!==0}),k(l,"$ord",p),k(l,"$pow",function(t,i){var a=this;return a==0&&D.$raise(d("ZeroDivisionError"),"divided by 0"),i===void 0?a["$**"](t):(d("Integer")["$==="](t)||D.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),t<0&&D.$raise(d("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),d("Integer")["$==="](i)||D.$raise(d("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),i===0&&D.$raise(d("ZeroDivisionError"),"divided by 0"),a["$**"](t)["$%"](i))},-2),k(l,"$pred",function(){var t=this;return t-1}),k(l,"$quo",function e(t){var i=e.$$p||u,a=this;return e.$$p=null,ee(d("Integer"),a)?ie(a,X(a,"quo",e,!1,!0),"quo",[t],i):P(a,t)}),k(l,"$rationalize",function(t){var i,a,o=this,v=u,S=u;return arguments.length>1&&D.$raise(d("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),ee(d("Integer"),o)?d("Rational").$new(o,1):J(o["$infinite?"]())?D.$raise(d("FloatDomainError"),"Infinity"):J(o["$nan?"]())?D.$raise(d("FloatDomainError"),"NaN"):J(t==null)?(a=d("Math").$frexp(o),i=V(a),v=i[0]==null?u:i[0],S=i[1]==null?u:i[1],v=d("Math").$ldexp(v,d(d("Float"),"MANT_DIG")).$to_i(),S=Z(S,d(d("Float"),"MANT_DIG")),d("Rational").$new(M(2,v),1["$<<"](Z(1,S))).$rationalize(d("Rational").$new(1,1["$<<"](Z(1,S))))):o.$to_r().$rationalize(t)},-1),k(l,"$remainder",function(t){var i=this;return Z(i,M(t,P(i,t).$truncate()))}),k(l,"$round",function(t){var i,a,o=this,v=u;if(ee(d("Integer"),o)){if(J(t==null)||(ee(d("Float"),t)&&J(t["$infinite?"]())&&D.$raise(d("RangeError"),"Infinity"),t=w["$coerce_to!"](t,d("Integer"),"to_int"),J(m(t,d(d("Integer"),"MIN")))&&D.$raise(d("RangeError"),"out of bounds"),J(t>=0)))return o;if(t=t["$-@"](),.415241*t-.125>o.$size())return 0;var S=Math.pow(10,t),j=Math.floor((Math.abs(o)+S/2)/S)*S;return o<0?-j:j}else{if(J(o["$nan?"]())&&J(t==null)&&D.$raise(d("FloatDomainError"),"NaN"),t=w["$coerce_to!"](t||0,d("Integer"),"to_int"),J(L(t,0)))J(o["$nan?"]())?D.$raise(d("RangeError"),"NaN"):J(o["$infinite?"]())&&D.$raise(d("FloatDomainError"),"Infinity");else{if(A(t,0))return Math.round(o);if(J(o["$nan?"]())||J(o["$infinite?"]()))return o}return a=d("Math").$frexp(o),i=V(a),i[0]==null||i[0],v=i[1]==null?u:i[1],J(g(t,Z(te(d(d("Float"),"DIG"),2),J(C(v,0))?P(v,4):Z(P(v,3),1))))?o:J(m(t,(J(C(v,0))?te(P(v,3),1):P(v,4))["$-@"]()))?0:Math.round(o*Math.pow(10,t))/Math.pow(10,t)}},-1),k(l,"$times",function e(){var t=e.$$p||u,i=this;if(e.$$p=null,!J(t))return U(i,"enum_for",["times"],function o(){var v=o.$$s==null?this:o.$$s;return v},{$$s:i});for(var a=0;a<i;a++)t(a);return i}),k(l,"$to_f",p),k(l,"$to_i",function(){var t=this;return t<0?Math.ceil(t):Math.floor(t)}),k(l,"$to_r",function(){var t,i,a=this,o=u,v=u;return ee(d("Integer"),a)?d("Rational").$new(a,1):(i=d("Math").$frexp(a),t=V(i),o=t[0]==null?u:t[0],v=t[1]==null?u:t[1],o=d("Math").$ldexp(o,d(d("Float"),"MANT_DIG")).$to_i(),v=Z(v,d(d("Float"),"MANT_DIG")),M(o,d(d("Float"),"RADIX")["$**"](v)).$to_r())}),k(l,"$to_s",function(t){var i=this;return t==null&&(t=10),t=w["$coerce_to!"](t,d("Integer"),"to_int"),(J(m(t,2))||J(C(t,36)))&&D.$raise(d("ArgumentError"),"invalid radix "+t),A(i,0)&&J(1/i===-1/0)?"-0.0":i.toString(t)},-1),k(l,"$truncate",function(t){var i=this;t==null&&(t=0);var a=i.$to_f();if(a%1===0&&t>=0)return a;var o=Math.pow(10,t),v=parseInt(a*o,10)/o;return a%1===0&&(v=Math.round(v)),v},-1),k(l,"$digits",function(t){var i=this;t==null&&(t=10),J(m(i,0))&&D.$raise(d(d("Math"),"DomainError"),"out of domain"),t=w["$coerce_to!"](t,d("Integer"),"to_int"),J(m(t,2))&&D.$raise(d("ArgumentError"),"invalid radix "+t),i!=parseInt(i)&&D.$raise(d("NoMethodError"),"undefined method `digits' for "+i.$inspect());var a=i,o=[];if(i==0)return[0];for(;a!=0;)o.push(a%t),a=parseInt(a/t,10);return o},-1),k(l,"$divmod",function e(t){var i=e.$$p||u,a=this;return e.$$p=null,J(a["$nan?"]())||J(t["$nan?"]())?D.$raise(d("FloatDomainError"),"NaN"):J(a["$infinite?"]())?D.$raise(d("FloatDomainError"),"Infinity"):ie(a,X(a,"divmod",e,!1,!0),"divmod",[t],i)}),k(l,"$upto",function e(t){var i=e.$$p||u,a=this;if(e.$$p=null,i===u)return U(a,"enum_for",["upto",t],function v(){var S=v.$$s==null?this:v.$$s;return ee(d("Numeric"),t)||D.$raise(d("ArgumentError"),"comparison of "+S.$class()+" with "+t.$class()+" failed"),J(m(t,S))?0:te(Z(t,S),1)},{$$s:a});t.$$is_number||D.$raise(d("ArgumentError"),"comparison of "+a.$class()+" with "+t.$class()+" failed");for(var o=a;o<=t;o++)i(o);return a}),k(l,"$zero?",function(){var t=this;return t==0}),k(l,"$size",q(4)),k(l,"$nan?",function(){var t=this;return isNaN(t)}),k(l,"$finite?",function(){var t=this;return t!=1/0&&t!=-1/0&&!isNaN(t)}),k(l,"$infinite?",function(){var t=this;return t==1/0?1:t==-1/0?-1:u}),k(l,"$positive?",function(){var t=this;return t!=0&&(t==1/0||1/t>0)}),k(l,"$negative?",function(){var t=this;return t==-1/0||1/t<0});function _(e){var t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),t}function s(e){return new DataView(e.buffer).getFloat64(0,!0)}function n(e){for(var t=_(e),i=0;i<t.length;i++)if(t[i]===255)t[i]=0;else{t[i]++;break}return s(t)}function r(e){for(var t=_(e),i=0;i<t.length;i++)if(t[i]===0)t[i]=255;else{t[i]--;break}return s(t)}return k(l,"$next_float",function(){var t=this;return A(t,d(d("Float"),"INFINITY"))?d(d("Float"),"INFINITY"):J(t["$nan?"]())?d(d("Float"),"NAN"):J(g(t,0))?n(Math.abs(t)):r(t)}),k(l,"$prev_float",function(){var t=this;return A(t,d(d("Float"),"INFINITY")["$-@"]())?d(d("Float"),"INFINITY")["$-@"]():J(t["$nan?"]())?d(d("Float"),"NAN"):J(C(t,0))?r(t):-n(Math.abs(t))}),B(l,"arg","angle"),B(l,"eql?","=="),B(l,"fdiv","/"),B(l,"inspect","to_s"),B(l,"kind_of?","is_a?"),B(l,"magnitude","abs"),B(l,"modulo","%"),B(l,"object_id","__id__"),B(l,"phase","angle"),B(l,"succ","next"),B(l,"to_int","to_i")}("::",d("Numeric")),R("::","Fixnum",d("Number")),function(I,h,c){var l=z(I,h,"Integer"),y=[l].concat(c);return l.$$is_number_class=!0,l.$$is_integer_class=!0,function(K,_){var s=[K].concat(_),n=$.$r(s);return k(K,"$allocate",function(){var e=this;return D.$raise(d("TypeError"),"allocator undefined for "+e.$name())}),$.udef(K,"$new"),k(K,"$sqrt",function(e){return e=w["$coerce_to!"](e,d("Integer"),"to_int"),e<0&&D.$raise(d(d("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(e),10)}),k(K,"$try_convert",function(e){var t=this;return n("Opal")["$coerce_to?"](e,t,"to_int")})}($.get_singleton_class(l),y),R(l,"MAX",Math.pow(2,30)-1),R(l,"MIN",-Math.pow(2,30))}("::",d("Numeric"),E),function(I,h,c){var l=z(I,h,"Float");return l.$$is_number_class=!0,function(y,K){return k(y,"$allocate",function(){var s=this;return D.$raise(d("TypeError"),"allocator undefined for "+s.$name())}),$.udef(y,"$new"),k(y,"$===",function(s){return!!s.$$is_number})}($.get_singleton_class(l)),R(l,"INFINITY",1/0),R(l,"MAX",Number.MAX_VALUE),R(l,"MIN",Number.MIN_VALUE),R(l,"NAN",NaN),R(l,"DIG",15),R(l,"MANT_DIG",53),R(l,"RADIX",2),R(l,"EPSILON",Number.EPSILON||2220446049250313e-31)}("::",d("Numeric"))};Opal.modules["corelib/range"]=function($){var z=$.klass,w=$.truthy,D=$.Kernel,k=$.def,ee=$.not,J=$.send2,C=$.find_super,W=$.lambda,m=$.send,B=$.rb_ge,ie=$.rb_gt,X=$.eqeq,U=$.rb_le,te=$.rb_lt,Z=$.eqeqeq,A=$.return_ivar,p=$.rb_minus,P=$.Opal,V=$.rb_divide,M=$.rb_plus,L=$.rb_times,g=$.thrower,q=$.alias,R=$.top,x=[],E=$.nil,u=$.$$$;return $.add_stubs("require,include,attr_reader,raise,nil?,<=>,cover?,!,begin,end,exclude_end?,then,call,>=,>,==,max,<=,<,enum_for,size,upto,to_proc,respond_to?,class,succ,===,eql?,try_convert,is_a?,any?,last,to_a,-,coerce_to!,ceil,/,new,loop,+,*,each_with_index,%,step,bsearch,inspect,[],hash,include?"),R.$require("corelib/enumerable"),function(d,I,h){var c=z(d,I,"Range"),l=[c].concat(h),y=$.$r(l),K=c.$$prototype;K.begin=K.end=K.excl=E,c.$include(u("Enumerable")),c.$$prototype.$$is_range=!0,c.$attr_reader("begin","end"),k(c,"$initialize",function(n,r,e){var t=this;return e==null&&(e=!1),w(t.begin)&&D.$raise(u("NameError"),"'initialize' called twice"),w(n["$<=>"](r))||w(n["$nil?"]())||w(r["$nil?"]())||D.$raise(u("ArgumentError"),"bad value for range"),t.begin=n,t.end=r,t.excl=e},-3),k(c,"$===",function(n){var r=this;return w(n.$$is_range)?!1:r["$cover?"](n)});function _(s){return s.begin===E||s.end===E||s.begin===-1/0||s.end===1/0||s.begin===1/0||s.end===-1/0}return k(c,"$count",function s(){var n=s.$$p||E,r=this;return s.$$p=null,ee(n!==E)&&w(_(r))?u(u("Float"),"INFINITY"):J(r,C(r,"count",s,!1,!0),"count",[],n)}),k(c,"$to_a",function s(){var n=s.$$p||E,r=this;return s.$$p=null,w(_(r))&&D.$raise(u("TypeError"),"cannot convert endless range to an array"),J(r,C(r,"to_a",s,!1,!0),"to_a",[],n)}),k(c,"$cover?",function(n){var r=this,e=E,t=E,i=E,a=E,o=E,v=E,S=E,j=E;return e=W(function(Y,O){var ae=E;return Y==null&&(Y=E),O==null&&(O=E),w(ae=Y["$<=>"](O))?ae:1}),w(n.$$is_range)?(t=n.$begin(),i=n.$end(),a=n["$exclude_end?"](),w(r.begin)&&w(t["$nil?"]())||w(r.end)&&w(i["$nil?"]())||w(t)&&w(i)&&w(m(e.$call(t,i),"then",[],function(Y){return Y==null&&(Y=E),w(a)?B(Y,0):ie(Y,0)}))||w(t)&&ee(r["$cover?"](t))?!1:(o=e.$call(r.end,i),X(r.excl,a)?B(o,0):w(r.excl)?ie(o,0):w(B(o,0))?!0:(v=n.$max(),w(S=v["$nil?"]()["$!"]())?U(e.$call(v,r.end),0):S))):w(r.begin)&&w(ie(e.$call(r.begin,n),0))?!1:w(r.end["$nil?"]())?!0:(j=e.$call(n,r.end),w(r.excl)?te(j,0):U(j,0))}),k(c,"$each",function s(){var n=s.$$p||E,r=this,e=E,t=E,i=E;if(s.$$p=null,n===E)return m(r,"enum_for",["each"],function v(){var S=v.$$s==null?this:v.$$s;return S.$size()},{$$s:r});var a,o;if(r.begin.$$is_number&&r.end.$$is_number){for((r.begin%1!==0||r.end%1!==0)&&D.$raise(u("TypeError"),"can't iterate from Float"),a=r.begin,o=r.end+(w(r.excl)?0:1);a<o;a++)n(a);return r}if(r.begin.$$is_string&&r.end.$$is_string)return m(r.begin,"upto",[r.end,r.excl],n.$to_proc()),r;for(e=r.begin,t=r.end,w(e["$respond_to?"]("succ"))||D.$raise(u("TypeError"),"can't iterate from "+e.$class());w(w(i=r.end["$nil?"]())?i:te(e["$<=>"](t),0));)$.yield1(n,e),e=e.$succ();return ee(r.excl)&&X(e,t)&&$.yield1(n,e),r}),k(c,"$eql?",function(n){var r=this,e=E,t=E;return Z(u("Range"),n)?w(e=w(t=r.excl["$==="](n["$exclude_end?"]()))?r.begin["$eql?"](n.$begin()):t)?r.end["$eql?"](n.$end()):e:!1}),k(c,"$exclude_end?",A("excl")),k(c,"$first",function s(n){var r=s.$$p||E,e=this;return s.$$p=null,w(e.begin["$nil?"]())&&D.$raise(u("RangeError"),"cannot get the minimum of beginless range"),w(n==null)?e.begin:J(e,C(e,"first",s,!1,!0),"first",[n],r)},-1),k(c,"$include?",function s(n){var r=s.$$p||E,e=this,t=E,i=E;if(s.$$p=null,w(e.begin.$$is_number||e.end.$$is_number)||w(e.begin["$is_a?"](u("Time")))||w(e.end["$is_a?"](u("Time")))||w(u("Integer").$try_convert(e.begin))||w(u("Integer").$try_convert(e.end)))return e["$cover?"](n);if(w(e.begin.$$is_string||e.end.$$is_string)){if(w(e.begin.$$is_string&&e.end.$$is_string))return m(e.begin.$upto(e.end,e.excl),"any?",[],function(o){return o==null&&(o=E),o["$=="](n)});if(w(e.begin["$nil?"]()))return t=n["$<=>"](e.end),w(i=t["$nil?"]()["$!"]())?w(e.excl)?te(t,0):U(t,0):i;if(w(e.end["$nil?"]()))return t=e.begin["$<=>"](n),w(i=t["$nil?"]()["$!"]())?U(t,0):i}return J(e,C(e,"include?",s,!1,!0),"include?",[n],r)}),k(c,"$last",function(n){var r=this;return w(r.end["$nil?"]())&&D.$raise(u("RangeError"),"cannot get the maximum of endless range"),w(n==null)?r.end:r.$to_a().$last(n)},-1),k(c,"$max",function s(){var n=s.$$p||E,r=this;return s.$$p=null,w(r.end["$nil?"]())?D.$raise(u("RangeError"),"cannot get the maximum of endless range"):n!==E?J(r,C(r,"max",s,!1,!0),"max",[],n):ee(r.begin["$nil?"]())&&(w(ie(r.begin,r.end))||w(r.excl)&&X(r.begin,r.end))?E:r.excl?r.end-1:r.end}),k(c,"$min",function s(){var n=s.$$p||E,r=this;return s.$$p=null,w(r.begin["$nil?"]())?D.$raise(u("RangeError"),"cannot get the minimum of beginless range"):n!==E?J(r,C(r,"min",s,!1,!0),"min",[],n):ee(r.end["$nil?"]())&&(w(ie(r.begin,r.end))||w(r.excl)&&X(r.begin,r.end))?E:r.begin}),k(c,"$size",function(){var n=this.begin,r=this.end;if(u("Numeric")["$==="](n)){if(u("Numeric")["$==="](r)){var e=p(r,n);return e<0?0:(this.excl||(e+=1),u("Float")["$==="](n)||u("Float")["$==="](r)?Math.floor(e):e)}else if(r===E)return 1/0}else if(n===E&&u("Numeric")["$==="](r))return 1/0;return E}),k(c,"$step",function s(n){var r=s.$$p||E,e=this,t=E,i=E;s.$$p=null;function a(){n==null?n=1:n.$$is_number||(n=P["$coerce_to!"](n,u("Integer"),"to_int")),n<0?D.$raise(u("ArgumentError"),"step can't be negative"):n===0&&D.$raise(u("ArgumentError"),"step can't be 0")}function o(){if(!e.begin["$respond_to?"]("succ")||e.begin.$$is_string&&e.end.$$is_string)return E;if(n%1===0)return V(e.$size(),n).$ceil();var v=e.begin,S=e.end,j=Math.abs,T=Math.floor,Y=(j(v)+j(S)+j(S-v))/j(n)*u(u("Float"),"EPSILON"),O;return Y>.5&&(Y=.5),e.excl?(O=T((S-v)/n-Y),O*n+v<S&&O++):O=T((S-v)/n+Y)+1,O}return r===E?(w(e.begin["$is_a?"](y("Numeric")))||w(e.begin["$nil?"]()))&&(w(e.end["$is_a?"](y("Numeric")))||w(e.end["$nil?"]()))&&ee(w(t=e.begin["$nil?"]())?e.end["$nil?"]():t)?u(u("Enumerator"),"ArithmeticSequence").$new(e,n,"step"):m(e,"enum_for",["step",n],function(){return a(),o()}):(a(),w(e.begin.$$is_number&&e.end.$$is_number)?(i=0,function(){try{var v=g("break");return m(e,"loop",[],function S(){var j=S.$$s==null?this:S.$$s,T=E;return j.begin==null&&(j.begin=E),j.excl==null&&(j.excl=E),j.end==null&&(j.end=E),T=M(j.begin,L(i,n)),w(j.excl)?w(B(T,j.end))&&v.$throw(E,S.$$is_lambda):w(ie(T,j.end))&&v.$throw(E,S.$$is_lambda),$.yield1(r,T),i=M(i,1)},{$$s:e})}catch(S){if(S===v)return S.$v;throw S}finally{v.is_orphan=!0}}()):(e.begin.$$is_string&&e.end.$$is_string&&n%1!==0&&D.$raise(u("TypeError"),"no implicit conversion to float from string"),m(e,"each_with_index",[],function(S,j){return S==null&&(S=E),j==null&&(j=E),X(j["$%"](n),0)?$.yield1(r,S):E})),e)},-1),k(c,"$%",function(n){var r=this;return w(r.begin["$is_a?"](y("Numeric")))&&w(r.end["$is_a?"](y("Numeric")))?u(u("Enumerator"),"ArithmeticSequence").$new(r,n,"%"):r.$step(n)}),k(c,"$bsearch",function s(){var n=s.$$p||E,r=this;return s.$$p=null,n===E?r.$enum_for("bsearch"):(w(_(r)&&(r.begin.$$is_number||r.end.$$is_number))&&D.$raise(u("NotImplementedError"),"Can't #bsearch an infinite range"),w(r.begin.$$is_number&&r.end.$$is_number)||D.$raise(u("TypeError"),"can't do binary search for "+r.begin.$class()),m(r.$to_a(),"bsearch",[],n.$to_proc()))}),k(c,"$to_s",function(){var n=this,r=E;return""+(w(r=n.begin)?r:"")+(w(n.excl)?"...":"..")+(w(r=n.end)?r:"")}),k(c,"$inspect",function(){var n=this,r=E;return""+(w(r=n.begin)?n.begin.$inspect():r)+(w(n.excl)?"...":"..")+(w(r=n.end)?n.end.$inspect():r)}),k(c,"$marshal_load",function(n){var r=this;return r.begin=n["$[]"]("begin"),r.end=n["$[]"]("end"),r.excl=n["$[]"]("excl")}),k(c,"$hash",function(){var n=this;return[u("Range"),n.begin,n.end,n.excl].$hash()}),q(c,"==","eql?"),q(c,"member?","include?")}("::",null,x)};Opal.modules["corelib/proc"]=function($){var z=$.slice,w=$.each_ivar,D=$.klass,k=$.truthy,ee=$.Kernel,J=$.defs,C=$.def,W=$.send,m=$.to_a,B=$.return_self,ie=$.ensure_kwargs,X=$.hash_get,U=$.Opal,te=$.alias,Z=$.nil,A=$.$$$;return $.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),function(p,P){var V=D(p,P,"Proc");$.prop(V.$$prototype,"$$is_proc",!0),$.prop(V.$$prototype,"$$is_lambda",!1),J(V,"$new",function g(){var q=g.$$p||Z;return g.$$p=null,k(q)||ee.$raise(A("ArgumentError"),"tried to create a Proc object without a block"),q});function M(g,q){if(g.$$ret)try{return g.apply(null,q)}catch(R){if(R===g.$$ret)return R.$v;throw R}else return g.apply(null,q)}function L(g,q){if(g.$$brk)try{return $.yieldX(g,q)}catch(R){if(R===g.$$brk)return R.$v;throw R}else return $.yieldX(g,q)}return C(V,"$call",function g(q){var R=g.$$p||Z,x,E,u=this;return g.$$p=null,x=z(arguments),E=x,R!==Z&&(u.$$p=R),u.$$is_lambda?M(u,E):L(u,E)},-1),C(V,"$>>",function g(q){g.$$p;var R=this;return g.$$p=null,W(ee,"proc",[],function x(E){var u=x.$$p||Z,d,I,h=x.$$s==null?this:x.$$s,c=Z;return x.$$p=null,d=z(arguments),I=d,c=W(h,"call",m(I),u.$to_proc()),q.$call(c)},{$$arity:-1,$$s:R})}),C(V,"$<<",function g(q){g.$$p;var R=this;return g.$$p=null,W(ee,"proc",[],function x(E){var u=x.$$p||Z,d,I,h=x.$$s==null?this:x.$$s,c=Z;return x.$$p=null,d=z(arguments),I=d,c=W(q,"call",m(I),u.$to_proc()),h.$call(c)},{$$arity:-1,$$s:R})}),C(V,"$to_proc",B),C(V,"$lambda?",function(){var q=this;return!!q.$$is_lambda}),C(V,"$arity",function(){var q=this;return q.$$is_curried?-1:q.$$arity!=null?q.$$arity:q.length}),C(V,"$source_location",function(){var q=this,R=Z;return q.$$is_curried?Z:k(R=q.$$source_location)?R:Z}),C(V,"$binding",function(){var q=this;return q.$$is_curried&&ee.$raise(A("ArgumentError"),"Can't create Binding"),k(A("::","Binding","skip_raise")?"constant":Z)?A("Binding").$new(Z,[],q.$$s,q.$source_location()):Z}),C(V,"$parameters",function(q){var R,x=this;if(q=ie(q),R=X(q,"lambda"),x.$$is_curried)return[["rest"]];if(x.$$parameters){if(R??x.$$is_lambda)return x.$$parameters;var E=[],u,d;for(u=0,d=x.$$parameters.length;u<d;u++){var I=x.$$parameters[u];I[0]==="req"&&(I=["opt",I[1]]),E.push(I)}return E}else return[]},-1),C(V,"$curry",function(q){var R=this;q===void 0?q=R.length:(q=U["$coerce_to!"](q,A("Integer"),"to_int"),R.$$is_lambda&&q!==R.length&&ee.$raise(A("ArgumentError"),"wrong number of arguments ("+q+" for "+R.length+")"));function x(){var E=z(arguments),u=E.length,d;return u>q&&R.$$is_lambda&&!R.$$is_curried&&ee.$raise(A("ArgumentError"),"wrong number of arguments ("+u+" for "+q+")"),u>=q?R.$call.apply(R,E):(d=function(){return x.apply(null,E.concat(z(arguments)))},d.$$is_lambda=R.$$is_lambda,d.$$is_curried=!0,d)}return x.$$is_lambda=R.$$is_lambda,x.$$is_curried=!0,x},-1),C(V,"$dup",function(){var q=this,R=q.$$original_proc||q,x=function(){return R.apply(this,arguments)};return w(q,function(E){x[E]=q[E]}),x}),te(V,"===","call"),te(V,"clone","dup"),te(V,"yield","call"),te(V,"[]","call")}("::",Function)};Opal.modules["corelib/method"]=function($){var z=$.klass,w=$.def,D=$.truthy,k=$.slice,ee=$.alias,J=$.Kernel,C=$.send,W=$.to_a,m=$.nil,B=$.$$$;return $.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),function(ie,X){var U=z(ie,X,"Method"),te=U.$$prototype;return te.method=te.receiver=te.owner=te.name=m,U.$attr_reader("owner","receiver","name"),w(U,"$initialize",function(A,p,P,V){var M=this;return M.receiver=A,M.owner=p,M.name=V,M.method=P}),w(U,"$arity",function(){var A=this;return A.method.$arity()}),w(U,"$parameters",function(){var A=this;return A.method.$$parameters}),w(U,"$source_location",function(){var A=this,p=m;return D(p=A.method.$$source_location)?p:["(eval)",0]}),w(U,"$comments",function(){var A=this,p=m;return D(p=A.method.$$comments)?p:[]}),w(U,"$call",function Z(A){var p=Z.$$p||m,P,V,M=this;return Z.$$p=null,P=k(arguments),V=P,M.method.$$p=p,M.method.apply(M.receiver,V)},-1),w(U,"$curry",function(A){var p=this;return p.method.$curry(A)},-1),w(U,"$>>",function(A){var p=this;return p.method["$>>"](A)}),w(U,"$<<",function(A){var p=this;return p.method["$<<"](A)}),w(U,"$unbind",function(){var A=this;return B("UnboundMethod").$new(A.receiver.$class(),A.owner,A.method,A.name)}),w(U,"$to_proc",function(){var A=this,p=A.$call.bind(A);return p.$$unbound=A.method,p.$$is_lambda=!0,p.$$arity=A.method.$$arity==null?A.method.length:A.method.$$arity,p.$$parameters=A.method.$$parameters,p}),w(U,"$inspect",function(){var A=this;return"#<"+A.$class()+": "+A.receiver.$class()+"#"+A.name+" (defined in "+A.owner+" in "+A.$source_location().$join(":")+")>"}),ee(U,"[]","call"),ee(U,"===","call")}("::",null),function(ie,X){var U=z(ie,X,"UnboundMethod"),te=U.$$prototype;return te.method=te.owner=te.name=te.source=m,U.$attr_reader("source","owner","name"),w(U,"$initialize",function(A,p,P,V){var M=this;return M.source=A,M.owner=p,M.method=P,M.name=V,M.$$method=P}),w(U,"$arity",function(){var A=this;return A.method.$arity()}),w(U,"$parameters",function(){var A=this;return A.method.$$parameters}),w(U,"$source_location",function(){var A=this,p=m;return D(p=A.method.$$source_location)?p:["(eval)",0]}),w(U,"$comments",function(){var A=this,p=m;return D(p=A.method.$$comments)?p:[]}),w(U,"$bind",function(A){var p=this;if(p.owner.$$is_module||$.is_a(A,p.owner))return B("Method").$new(A,p.owner,p.method,p.name);J.$raise(B("TypeError"),"can't bind singleton method to a different class (expected "+A+".kind_of?("+p.owner+" to be true)")}),w(U,"$bind_call",function Z(A,p){var P=Z.$$p||m,V,M,L=this;return Z.$$p=null,V=k(arguments,1),M=V,C(L.$bind(A),"call",W(M),P.$to_proc())},-2),w(U,"$inspect",function(){var A=this;return"#<"+A.$class()+": "+A.source+"#"+A.name+" (defined in "+A.owner+" in "+A.$source_location().$join(":")+")>"})}("::",null)};Opal.modules["corelib/variables"]=function($){var z=$.gvars,w=$.const_set,D=$.Object,k=$.nil;return $.add_stubs("new"),z["&"]=z["~"]=z["`"]=z["'"]=k,z.LOADED_FEATURES=z['"']=$.loaded_features,z.LOAD_PATH=z[":"]=[],z["/"]=`
`,z[","]=k,w("::","ARGV",[]),w("::","ARGF",D.$new()),w("::","ENV",new Map),z.VERBOSE=!1,z.DEBUG=!1,z.SAFE=0};Opal.modules["corelib/io"]=function($){var z=$.klass,w=$.const_set,D=$.not,k=$.truthy,ee=$.def,J=$.return_ivar,C=$.return_val,W=$.slice,m=$.Kernel,B=$.gvars,ie=$.send,X=$.to_a,U=$.rb_plus,te=$.neqeq,Z=$.range,A=$.eqeq,p=$.to_ary,P=$.rb_gt,V=$.assign_ivar_val,M=$.alias,L,g=$.nil,q=$.$$$;$.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),function(x,E){var u=z(x,E,"IO"),d=u.$$prototype;return d.read_buffer=d.closed=g,w(u,"SEEK_SET",0),w(u,"SEEK_CUR",1),w(u,"SEEK_END",2),w(u,"SEEK_DATA",3),w(u,"SEEK_HOLE",4),w(u,"READABLE",1),w(u,"WRITABLE",4),u.$attr_reader("eof"),u.$attr_accessor("read_proc","sync","tty","write_proc"),ee(u,"$initialize",function(h,c){var l=this;return c==null&&(c="r"),l.fd=h,l.flags=c,l.eof=!1,k(c["$include?"]("r"))&&D(c["$match?"](/[wa+]/))?l.closed="write":k(c["$match?"](/[wa]/))&&D(c["$match?"](/[r+]/))?l.closed="read":g},-2),ee(u,"$fileno",J("fd")),ee(u,"$tty?",function(){var h=this;return h.tty==!0}),ee(u,"$write",function(h){var c=this;return c.write_proc(h),h.$size()}),ee(u,"$flush",C(g)),ee(u,"$<<",function(h){var c=this;return c.$write(h),c}),ee(u,"$print",function(h){var c,l,y=this;B[","]==null&&(B[","]=g),c=W(arguments),l=c;for(var K=0,_=l.length;K<_;K++)l[K]=m.$String(l[K]);return y.$write(l.join(B[","])),g},-1),ee(u,"$puts",function(h){var c,l,y=this;c=W(arguments),l=c;var K;if(l.length===0)return y.$write(`
`),g;for(var _=0,s=l.length;_<s;_++)if(l[_].$$is_array){var n=l[_].$flatten();n.length>0&&ie(y,"puts",X(n))}else l[_].$$is_string?K=l[_].valueOf():K=m.$String(l[_]),K.endsWith(`
`)||(K+=`
`),y.$write(K);return g},-1),ee(u,"$getc",function(){var h=this,c=g,l=g,y=g;h.read_buffer=k(c=h.read_buffer)?c:"",l="";do if(h.read_buffer=U(h.read_buffer,l),te(h.read_buffer,""))return y=h.read_buffer["$[]"](0),h.read_buffer=h.read_buffer["$[]"](Z(1,-1,!1)),y;while(k(l=h.$sysread_noraise(1)));return g}),ee(u,"$getbyte",function(){var h,c=this;return h=c.$getc(),h===g||h==null?g:h.$ord()}),ee(u,"$readbyte",function(){var h=this;return h.$readchar().$ord()}),ee(u,"$readchar",function(){var h=this,c=g;return k(c=h.$getc())?c:m.$raise(q("EOFError"),"end of file reached")}),ee(u,"$readline",function(h){var c,l,y=this,K=g;return c=W(arguments),l=c,k(K=ie(y,"gets",X(l)))?K:m.$raise(q("EOFError"),"end of file reached")},-1),ee(u,"$gets",function(h,c,l){var y,K,_=this,s=g,n=g,r=g,e=g,t=g,i=g;B["/"]==null&&(B["/"]=g),h==null&&(h=!1),c==null&&(c=g),l==null&&(l=new Map),k(h.$$is_number)&&D(c)&&(y=[!1,h,c],h=y[0],c=y[1],l=y[2]),k(h.$$is_hash)&&D(c)&&A(l,new Map)?(y=[!1,g,h],h=y[0],c=y[1],l=y[2]):k(c.$$is_hash)&&A(l,new Map)&&(y=[h,g,c],h=y[0],c=y[1],l=y[2]),s=h,A(h,!1)&&(h=B["/"]),A(h,"")&&(h=/\r?\n\r?\n/),h=k(n=h)?n:"",A(s,"")||(h=h.$to_str()),r=A(s,"")?2:h.$length(),A(h," ")&&(h=/ /),_.read_buffer=k(n=_.read_buffer)?n:"",e="",t=g;do if(_.read_buffer=U(_.read_buffer,e),te(h,"")&&k(k(h.$$is_regexp)?_.read_buffer["$match?"](h):_.read_buffer["$include?"](h))){i=_.read_buffer,K=_.read_buffer.$split(h,2),y=p(K),t=y[0]==null?g:y[0],_.read_buffer=y[1]==null?g:y[1],te(t,i)&&(t=U(t,i["$[]"](t.$length(),r)));break}while(k(e=_.$sysread_noraise(A(h,"")?65536:1)));return k(t)||(y=[k(n=_.read_buffer)?n:"",""],t=y[0],_.read_buffer=y[1],A(t,"")&&(t=g)),k(t)&&(k(c)&&(t=t["$[]"]($.Range.$new(0,c,!0)),_.read_buffer=U(t["$[]"]($.Range.$new(c,-1,!1)),_.read_buffer)),k(l["$[]"]("chomp"))&&(t=t.$sub(/\r?\n$/,"")),A(s,"")&&(t=t.$sub(/^[\r\n]+/,""))),A(s,!1)&&(B._=t),t},-1),ee(u,"$sysread",function(h){var c=this,l=g;return k(l=c.read_proc(h))?l:(c.eof=!0,m.$raise(q("EOFError"),"end of file reached"))}),ee(u,"$sysread_noraise",function(h){var c=this;try{return c.$sysread(h)}catch(l){if($.rescue(l,[q("EOFError")]))try{return g}finally{$.pop_exception(l)}else throw l}}),ee(u,"$readpartial",function(h){var c,l=this,y=g,K=g,_=g;return l.read_buffer=k(y=l.read_buffer)?y:"",K=l.$sysread(h),c=[U(l.read_buffer,k(y=K)?y:""),""],_=c[0],l.read_buffer=c[1],A(_,"")&&(_=g),_}),ee(u,"$read",function(h){var c,l=this,y=g,K=g,_=g;h==null&&(h=g),l.read_buffer=k(y=l.read_buffer)?y:"",K="",_=g;do if(l.read_buffer=U(l.read_buffer,K),k(h)&&k(P(l.read_buffer.$length(),h)))return c=[l.read_buffer["$[]"]($.Range.$new(0,h,!0)),l.read_buffer["$[]"]($.Range.$new(h,-1,!1))],_=c[0],l.read_buffer=c[1],_;while(k(K=l.$sysread_noraise(k(y=h)?y:65536)));return c=[l.read_buffer,""],_=c[0],l.read_buffer=c[1],_},-1),ee(u,"$readlines",function(h){var c=this;return B["/"]==null&&(B["/"]=g),h==null&&(h=B["/"]),c.$each_line(h).$to_a()},-1),ee(u,"$each",function I(h,c){var l=I.$$p||g,y,K,_,s=this,n=g;if(B["/"]==null&&(B["/"]=g),I.$$p=null,y=W(arguments),y.length>0&&(K=y.shift()),K==null&&(K=B["/"]),_=y,l===g)return ie(s,"enum_for",["each",K].concat(X(_)));for(;k(n=ie(s,"gets",[K].concat(X(_))));)$.yield1(l,n);return s},-1),ee(u,"$each_byte",function I(){var h=I.$$p||g,c=this,l=g;if(I.$$p=null,h===g)return c.$enum_for("each_byte");for(;k(l=c.$getbyte());)$.yield1(h,l);return c}),ee(u,"$each_char",function I(){var h=I.$$p||g,c=this,l=g;if(I.$$p=null,h===g)return c.$enum_for("each_char");for(;k(l=c.$getc());)$.yield1(h,l);return c}),ee(u,"$close",V("closed","both")),ee(u,"$close_read",function(){var h=this;return A(h.closed,"write")?h.closed="both":h.closed="read"}),ee(u,"$close_write",function(){var h=this;return A(h.closed,"read")?h.closed="both":h.closed="write"}),ee(u,"$closed?",function(){var h=this;return h.closed["$=="]("both")}),ee(u,"$closed_read?",function(){var h=this,c=g;return k(c=h.closed["$=="]("read"))?c:h.closed["$=="]("both")}),ee(u,"$closed_write?",function(){var h=this,c=g;return k(c=h.closed["$=="]("write"))?c:h.closed["$=="]("both")}),ee(u,"$check_writable",function(){var h=this;return k(h["$closed_write?"]())?m.$raise(q("IOError"),"not opened for writing"):g}),ee(u,"$check_readable",function(){var h=this;return k(h["$closed_read?"]())?m.$raise(q("IOError"),"not opened for reading"):g}),M(u,"each_line","each"),M(u,"eof?","eof")}("::",null),w("::","STDIN",B.stdin=q("IO").$new(0,"r")),w("::","STDOUT",B.stdout=q("IO").$new(1,"w")),w("::","STDERR",B.stderr=q("IO").$new(2,"w"));var R=$.global.console;return q("STDOUT")["$write_proc="](typeof process=="object"&&typeof process.stdout=="object"?function(x){process.stdout.write(x)}:function(x){R.log(x)}),q("STDERR")["$write_proc="](typeof process=="object"&&typeof process.stderr=="object"?function(x){process.stderr.write(x)}:function(x){R.warn(x)}),L=[function(x){var E=prompt();return E!==null?E+`
`:g}],ie(q("STDIN"),"read_proc=",L),L[L.length-1]};Opal.modules["opal/regexp_anchors"]=function($){var z=$.module,w=$.const_set,D=[];$.nil;var k=$.$$$;return $.add_stubs("new"),function(ee,J){var C=z(ee,"Opal"),W=[C].concat(J),m=$.$r(W);return w(C,"REGEXP_START","^"),w(C,"REGEXP_END","$"),w(C,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),w(C,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),w(C,"INLINE_IDENTIFIER_REGEXP",m("Regexp").$new("[^"+k(C,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+k(C,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),w(C,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),w(C,"CONST_NAME_REGEXP",m("Regexp").$new(""+k(C,"REGEXP_START")+"(::)?[A-Z][^"+k(C,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+k(C,"REGEXP_END")))}(D[0],D)};Opal.modules["opal/mini"]=function($){var z=$.Object;return $.nil,$.add_stubs("require"),z.$require("opal/base"),z.$require("corelib/nil"),z.$require("corelib/boolean"),z.$require("corelib/string"),z.$require("corelib/comparable"),z.$require("corelib/enumerable"),z.$require("corelib/enumerator"),z.$require("corelib/array"),z.$require("corelib/hash"),z.$require("corelib/number"),z.$require("corelib/range"),z.$require("corelib/proc"),z.$require("corelib/method"),z.$require("corelib/regexp"),z.$require("corelib/variables"),z.$require("corelib/io"),z.$require("opal/regexp_anchors")};Opal.modules["corelib/kernel/format"]=function($){var z=$.coerce_to,w=$.module,D=$.slice,k=$.truthy,ee=$.eqeq,J=$.Opal,C=$.Kernel,W=$.gvars,m=$.def,B=$.alias,ie=$.nil,X=$.$$$;return $.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),function(U){var te=w(U,"Kernel");return m(te,"$format",function(A,p){var P,V,M=ie;W.DEBUG==null&&(W.DEBUG=ie),P=D(arguments,1),V=P,ee(V.$length(),1)&&k(V["$[]"](0)["$respond_to?"]("to_ary"))&&(M=J["$coerce_to?"](V["$[]"](0),X("Array"),"to_ary"),k(M["$nil?"]())||(V=M.$to_a()));var L="",g=0,q,R,x=A.length,E,u,d,I,h,c,l,y,K,_,s,n,r,e=1,t=0,i,a=0,o=1,v=2,S=4,j=8,T=16,Y=32,O=64,ae=128;function le(){i&Y&&C.$raise(X("ArgumentError"),"flag after width"),i&ae&&C.$raise(X("ArgumentError"),"flag after precision")}function _e(){i&Y&&C.$raise(X("ArgumentError"),"width given twice"),i&ae&&C.$raise(X("ArgumentError"),"width after precision")}function de(N){return N>=V.length&&C.$raise(X("ArgumentError"),"too few arguments"),V[N]}function ge(){switch(t){case-1:C.$raise(X("ArgumentError"),"unnumbered("+e+") mixed with numbered");case-2:C.$raise(X("ArgumentError"),"unnumbered("+e+") mixed with named")}return t=e++,de(t-1)}function ve(N){return t>0&&C.$raise(X("ArgumentError"),"numbered("+N+") after unnumbered("+t+")"),t===-2&&C.$raise(X("ArgumentError"),"numbered("+N+") after named"),N<1&&C.$raise(X("ArgumentError"),"invalid index - "+N+"$"),t=-1,de(N-1)}function me(){return r===void 0?ge():r}function be(N){for(var F,G="";;R++){if(R===x&&C.$raise(X("ArgumentError"),"malformed format string - %*[0-9]"),A.charCodeAt(R)<48||A.charCodeAt(R)>57)return R--,F=parseInt(G,10)||0,F>2147483647&&C.$raise(X("ArgumentError"),""+N+" too big"),F;G+=A.charAt(R)}}function $e(N){var F,G=be(N);return A.charAt(R+1)==="$"?(R++,F=ve(G)):F=ge(),F.$to_int()}for(R=A.indexOf("%");R!==-1;R=A.indexOf("%",R)){switch(u=void 0,i=a,I=-1,h=-1,r=void 0,q=R,R++,A.charAt(R)){case"%":g=R;case"":case`
`:case"\0":R++;continue}e:for(;R<x;R++)switch(A.charAt(R)){case" ":le(),i|=T;continue e;case"#":le(),i|=o;continue e;case"+":le(),i|=S;continue e;case"-":le(),i|=v;continue e;case"0":le(),i|=j;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(c=be("width"),A.charAt(R+1)==="$"){if(R+2===x){u="%",R++;break e}r!==void 0&&C.$raise(X("ArgumentError"),"value given twice - %"+c+"$"),r=ve(c),R++}else _e(),i|=Y,I=c;continue e;case"<":case"{":for(y=A.charAt(R)==="<"?">":"}",l="",R++;;R++){if(R===x&&C.$raise(X("ArgumentError"),"malformed name - unmatched parenthesis"),A.charAt(R)===y){if(t>0&&C.$raise(X("ArgumentError"),"named "+l+" after unnumbered("+t+")"),t===-1&&C.$raise(X("ArgumentError"),"named "+l+" after numbered"),t=-2,(V[0]===void 0||!V[0].$$is_hash)&&C.$raise(X("ArgumentError"),"one hash required"),r=V[0].$fetch(l),y===">")continue e;if(u=r.toString(),h!==-1&&(u=u.slice(0,h)),i&v)for(;u.length<I;)u=u+" ";else for(;u.length<I;)u=" "+u;break e}l+=A.charAt(R)}case"*":R++,_e(),i|=Y,I=$e("width"),I<0&&(i|=v,I=-I);continue e;case".":if(i&ae&&C.$raise(X("ArgumentError"),"precision given twice"),i|=O|ae,h=0,R++,A.charAt(R)==="*"){R++,h=$e("precision"),h<0&&(i&=~O);continue e}h=be("precision");continue e;case"d":case"i":case"u":if(E=C.$Integer(me()),E>=0){for(u=E.toString();u.length<h;)u="0"+u;if(i&v)for((i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<I;)u=u+" ";else if(i&j&&h===-1){for(;u.length<I-(i&S||i&T?1:0);)u="0"+u;(i&S||i&T)&&(u=(i&S?"+":" ")+u)}else for((i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<I;)u=" "+u}else{for(u=(-E).toString();u.length<h;)u="0"+u;if(i&v)for(u="-"+u;u.length<I;)u=u+" ";else if(i&j&&h===-1){for(;u.length<I-1;)u="0"+u;u="-"+u}else for(u="-"+u;u.length<I;)u=" "+u}break e;case"b":case"B":case"o":case"x":case"X":switch(A.charAt(R)){case"b":case"B":K=2,_="0b",s=/^1+/,n="1";break;case"o":K=8,_="0",s=/^3?7+/,n="7";break;case"x":case"X":K=16,_="0x",s=/^f+/,n="f";break}if(E=C.$Integer(me()),E>=0){for(u=E.toString(K);u.length<h;)u="0"+u;if(i&v)for((i&S||i&T)&&(u=(i&S?"+":" ")+u),i&o&&E!==0&&(u=_+u);u.length<I;)u=u+" ";else if(i&j&&h===-1){for(;u.length<I-(i&S||i&T?1:0)-(i&o&&E!==0?_.length:0);)u="0"+u;i&o&&E!==0&&(u=_+u),(i&S||i&T)&&(u=(i&S?"+":" ")+u)}else for(i&o&&E!==0&&(u=_+u),(i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<I;)u=" "+u}else if(i&S||i&T){for(u=(-E).toString(K);u.length<h;)u="0"+u;if(i&v)for(i&o&&(u=_+u),u="-"+u;u.length<I;)u=u+" ";else if(i&j&&h===-1){for(;u.length<I-1-(i&o?2:0);)u="0"+u;i&o&&(u=_+u),u="-"+u}else for(i&o&&(u=_+u),u="-"+u;u.length<I;)u=" "+u}else{for(u=(E>>>0).toString(K).replace(s,n);u.length<h-2;)u=n+u;if(i&v)for(u=".."+u,i&o&&(u=_+u);u.length<I;)u=u+" ";else if(i&j&&h===-1){for(;u.length<I-2-(i&o?_.length:0);)u=n+u;u=".."+u,i&o&&(u=_+u)}else for(u=".."+u,i&o&&(u=_+u);u.length<I;)u=" "+u}A.charAt(R)===A.charAt(R).toUpperCase()&&(u=u.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(E=C.$Float(me()),E>=0||isNaN(E)){if(E===1/0)u="Inf";else switch(A.charAt(R)){case"f":u=E.toFixed(h===-1?6:h);break;case"e":case"E":u=E.toExponential(h===-1?6:h);break;case"g":case"G":u=E.toExponential(),d=parseInt(u.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(u=E.toPrecision(h===-1?i&o?6:void 0:h));break}if(i&v)for((i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<I;)u=u+" ";else if(i&j&&E!==1/0&&!isNaN(E)){for(;u.length<I-(i&S||i&T?1:0);)u="0"+u;(i&S||i&T)&&(u=(i&S?"+":" ")+u)}else for((i&S||i&T)&&(u=(i&S?"+":" ")+u);u.length<I;)u=" "+u}else{if(E===-1/0)u="Inf";else switch(A.charAt(R)){case"f":u=(-E).toFixed(h===-1?6:h);break;case"e":case"E":u=(-E).toExponential(h===-1?6:h);break;case"g":case"G":u=(-E).toExponential(),d=parseInt(u.split("e")[1],10),d<-4||d>=(h===-1?6:h)||(u=(-E).toPrecision(h===-1?i&o?6:void 0:h));break}if(i&v)for(u="-"+u;u.length<I;)u=u+" ";else if(i&j&&E!==-1/0){for(;u.length<I-1;)u="0"+u;u="-"+u}else for(u="-"+u;u.length<I;)u=" "+u}A.charAt(R)===A.charAt(R).toUpperCase()&&E!==1/0&&E!==-1/0&&!isNaN(E)&&(u=u.toUpperCase()),u=u.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":C.$raise(X("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(E=me(),E["$respond_to?"]("to_ary")&&(E=E.$to_ary()[0]),E["$respond_to?"]("to_str")?u=E.$to_str():u=String.fromCharCode(z(E,X("Integer"),"to_int")),u.length!==1&&C.$raise(X("ArgumentError"),"%c requires a character"),i&v)for(;u.length<I;)u=u+" ";else for(;u.length<I;)u=" "+u;break e;case"p":if(u=me().$inspect(),h!==-1&&(u=u.slice(0,h)),i&v)for(;u.length<I;)u=u+" ";else for(;u.length<I;)u=" "+u;break e;case"s":if(u=me().$to_s(),h!==-1&&(u=u.slice(0,h)),i&v)for(;u.length<I;)u=u+" ";else for(;u.length<I;)u=" "+u;break e;default:C.$raise(X("ArgumentError"),"malformed format string - %"+A.charAt(R))}u===void 0&&C.$raise(X("ArgumentError"),"malformed format string - %"),L+=A.slice(g,q)+u,g=R+1}return W.DEBUG&&t>=0&&e<V.length&&C.$raise(X("ArgumentError"),"too many arguments for format string"),L+A.slice(g)},-2),B(te,"sprintf","format")}("::")};Opal.modules["corelib/string/encoding"]=function($){var z=$.klass,w=$.rb_plus,D=$.truthy,k=$.send,ee=$.defs,J=$.eqeq,C=$.def,W=$.return_ivar,m=$.return_val,B=$.slice,ie=$.Kernel,X=$.Opal,U=$.rb_lt,te,Z=$.top,A=[],p=$.$r(A),P=$.nil,V=$.$$$;return $.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),Z.$require("corelib/string"),function(M,L,g){var q=z(M,L,"Encoding"),R=[q].concat(g),x=q.$$prototype;return x.name=x.dummy=P,ee(q,"$register",function E(u,d){var I=E.$$p||P,h=this,c=P,l=P,y=P,K=P,_=P,s=P;return E.$$p=null,d==null&&(d=new Map),c=w([u],D(l=d["$[]"]("aliases"))?l:[]),y=D(l=d["$[]"]("ascii"))&&l,K=D(l=d["$[]"]("dummy"))&&l,D(d["$[]"]("inherits"))?(_=d["$[]"]("inherits").$clone(),_.$initialize(u,c,y,K)):_=h.$new(u,c,y,K),I!==P&&k(_,"instance_eval",[],I.$to_proc()),s=$.encodings,k(c,"each",[],function n(r){var e=n.$$s==null?this:n.$$s;return r==null&&(r=P),e.$const_set(r.$tr("-","_"),_),s[r]=_},{$$s:h})},-2),ee(q,"$find",function(u){var d=this;return J(u,"default_external")?d.$default_external():$.find_encoding(u)}),q.$singleton_class().$attr_accessor("default_external"),q.$attr_reader("name","names"),C(q,"$initialize",function(u,d,I,h){var c=this;return c.name=u,c.names=d,c.ascii=I,c.dummy=h}),C(q,"$ascii_compatible?",W("ascii")),C(q,"$dummy?",W("dummy")),C(q,"$binary?",m(!1)),C(q,"$to_s",W("name")),C(q,"$inspect",function(){var u=this;return"#<Encoding:"+u.name+(D(u.dummy)?" (dummy)":P)+">"}),C(q,"$charsize",function(u){for(var d=0,I=0,h=u.length;I<h;I++){var c=u.charCodeAt(I);c>=55296&&c<=56319||d++}return d}),C(q,"$each_char",function E(u){var d=E.$$p||P;E.$$p=null;for(var I="",h=0,c=u.length;h<c;h++){var l=u.charCodeAt(h),y=u.charAt(h);if(l>=56320&&l<=57343){I=y;continue}else l>=55296&&l<=56319&&(y=I+y);u.encoding.name!="UTF-8"&&(y=new String(y),y.encoding=u.encoding),$.yield1(d,y)}}),C(q,"$each_byte",function(u){return B(arguments),ie.$raise(V("NotImplementedError"))},-1),C(q,"$bytesize",function(u){return B(arguments),ie.$raise(V("NotImplementedError"))},-1),z("::",V("StandardError"),"EncodingError"),z("::",V("EncodingError"),"CompatibilityError"),z(R[0],V("EncodingError"),"UndefinedConversionError"),P}("::",null,A),k(V("Encoding"),"register",["UTF-8",new Map([["aliases",["CP65001"]],["ascii",!0]])],function M(){var L=M.$$s==null?this:M.$$s;return C(L,"$each_byte",function g(q){var R=g.$$p||P;g.$$p=null;for(var x=1/0,E,u=q.length,d=null,I=0;I<u;++I){if(E=q.charCodeAt(I),E>55295&&E<57344){if(!d){if(E>56319){(x-=3)>-1&&($.yield1(R,239),$.yield1(R,191),$.yield1(R,189));continue}else if(I+1===u){(x-=3)>-1&&($.yield1(R,239),$.yield1(R,191),$.yield1(R,189));continue}d=E;continue}if(E<56320){(x-=3)>-1&&($.yield1(R,239),$.yield1(R,191),$.yield1(R,189)),d=E;continue}E=(d-55296<<10|E-56320)+65536}else d&&(x-=3)>-1&&($.yield1(R,239),$.yield1(R,191),$.yield1(R,189));if(d=null,E<128){if((x-=1)<0)break;$.yield1(R,E)}else if(E<2048){if((x-=2)<0)break;$.yield1(R,E>>6|192),$.yield1(R,E&63|128)}else if(E<65536){if((x-=3)<0)break;$.yield1(R,E>>12|224),$.yield1(R,E>>6&63|128),$.yield1(R,E&63|128)}else if(E<1114112){if((x-=4)<0)break;$.yield1(R,E>>18|240),$.yield1(R,E>>12&63|128),$.yield1(R,E>>6&63|128),$.yield1(R,E&63|128)}}}),C(L,"$bytesize",function(q){return q.$bytes().$length()})},{$$s:Z}),k(V("Encoding"),"register",["UTF-16LE"],function M(){var L=M.$$s==null?this:M.$$s;return C(L,"$each_byte",function g(q){var R=g.$$p||P;g.$$p=null;for(var x=0,E=q.length;x<E;x++){var u=q.charCodeAt(x);$.yield1(R,u&255),$.yield1(R,u>>8)}}),C(L,"$bytesize",function(q){return q.length*2})},{$$s:Z}),k(V("Encoding"),"register",["UTF-16BE",new Map([["inherits",V(V("Encoding"),"UTF_16LE")]])],function M(){var L=M.$$s==null?this:M.$$s;return C(L,"$each_byte",function g(q){var R=g.$$p||P;g.$$p=null;for(var x=0,E=q.length;x<E;x++){var u=q.charCodeAt(x);$.yield1(R,u>>8),$.yield1(R,u&255)}})},{$$s:Z}),k(V("Encoding"),"register",["UTF-32LE"],function M(){var L=M.$$s==null?this:M.$$s;return C(L,"$each_byte",function g(q){var R=g.$$p||P;g.$$p=null;for(var x=0,E=q.length;x<E;x++){var u=q.charCodeAt(x);$.yield1(R,u&255),$.yield1(R,u>>8),$.yield1(R,0),$.yield1(R,0)}}),C(L,"$bytesize",function(q){return q.length*4})},{$$s:Z}),k(V("Encoding"),"register",["UTF-32BE",new Map([["inherits",V(V("Encoding"),"UTF_32LE")]])],function M(){var L=M.$$s==null?this:M.$$s;return C(L,"$each_byte",function g(q){var R=g.$$p||P;g.$$p=null;for(var x=0,E=q.length;x<E;x++){var u=q.charCodeAt(x);$.yield1(R,0),$.yield1(R,0),$.yield1(R,u>>8),$.yield1(R,u&255)}})},{$$s:Z}),k(V("Encoding"),"register",["ASCII-8BIT",new Map([["aliases",["BINARY"]],["ascii",!0]])],function M(){var L=M.$$s==null?this:M.$$s;return C(L,"$each_char",function g(q){var R=g.$$p||P;g.$$p=null;for(var x=0,E=q.length;x<E;x++){var u=new String(q.charAt(x));u.encoding=q.encoding,$.yield1(R,u)}}),C(L,"$charsize",function(q){return q.length}),C(L,"$each_byte",function g(q){var R=g.$$p||P;g.$$p=null;for(var x=0,E=q.length;x<E;x++){var u=q.charCodeAt(x);$.yield1(R,u&255)}}),C(L,"$bytesize",function(q){return q.length}),C(L,"$binary?",m(!0))},{$$s:Z}),V("Encoding").$register("ISO-8859-1",new Map([["aliases",["ISO8859-1"]],["ascii",!0],["inherits",V(V("Encoding"),"ASCII_8BIT")]])),V("Encoding").$register("US-ASCII",new Map([["aliases",["ASCII"]],["ascii",!0],["inherits",V(V("Encoding"),"ASCII_8BIT")]])),function(M,L){var g=z(M,L,"String"),q=g.$$prototype;return q.internal_encoding=q.bytes=q.encoding=P,g.$attr_reader("encoding"),g.$attr_reader("internal_encoding"),$.prop(String.prototype,"bytes",P),$.prop(String.prototype,"encoding",V(V("Encoding"),"UTF_8")),$.prop(String.prototype,"internal_encoding",V(V("Encoding"),"UTF_8")),C(g,"$b",function(){var x=this;return x.$dup().$force_encoding("binary")}),C(g,"$bytesize",function(){var x=this;return x.internal_encoding.$bytesize(x)}),C(g,"$each_byte",function R(){var x=R.$$p||P,E=this;return R.$$p=null,x===P?k(E,"enum_for",["each_byte"],function u(){var d=u.$$s==null?this:u.$$s;return d.$bytesize()},{$$s:E}):(k(E.internal_encoding,"each_byte",[E],x.$to_proc()),E)}),C(g,"$bytes",function(){var x=this,E=P;return typeof x=="string"?new String(x).$each_byte().$to_a():(x.bytes=D(E=x.bytes)?E:x.$each_byte().$to_a(),x.bytes.$dup())}),C(g,"$each_char",function R(){var x=R.$$p||P,E=this;return R.$$p=null,x===P?k(E,"enum_for",["each_char"],function u(){var d=u.$$s==null?this:u.$$s;return d.$length()},{$$s:E}):(k(E.encoding,"each_char",[E],x.$to_proc()),E)}),C(g,"$chars",function R(){var x=R.$$p||P,E=this;return R.$$p=null,D(x)?k(E,"each_char",[],x.$to_proc()):E.$each_char().$to_a()}),C(g,"$each_codepoint",function R(){var x=R.$$p||P,E=this;if(R.$$p=null,x===P)return E.$enum_for("each_codepoint");for(var u=0,d=E.length;u<d;u++)$.yield1(x,E.codePointAt(u));return E}),C(g,"$codepoints",function R(){var x=R.$$p||P,E=this;return R.$$p=null,x!==P?k(E,"each_codepoint",[],x.$to_proc()):E.$each_codepoint().$to_a()}),C(g,"$encode",function(x){var E=this;return $.enc(E,x)}),C(g,"$force_encoding",function(x){var E=this,u=E;return x===u.encoding||(x=X["$coerce_to!"](x,V("String"),"to_s"),x=V("Encoding").$find(x),x===u.encoding)||(u=$.set_encoding(u,x)),u}),C(g,"$getbyte",function(x){var E=this,u=P;return u=E.$bytes(),x=X["$coerce_to!"](x,V("Integer"),"to_int"),D(U(u.$length(),x))?P:u["$[]"](x)}),C(g,"$initialize_copy",function(x){return`
      self.encoding = other.encoding;
      self.internal_encoding = other.internal_encoding;
    `}),C(g,"$valid_encoding?",m(!0))}("::",null),te=[V(p("Encoding"),"UTF_8")],k(V("Encoding"),"default_external=",te),te[te.length-1]};Opal.modules["corelib/math"]=function($){var z=$.type_error,w=$.module,D=$.const_set,k=$.Class,ee=$.slice,J=$.Kernel,C=$.defs,W=$.truthy,m=$.send,B=$.def,ie=$.rb_minus,X=$.eqeqeq,U=$.rb_divide,te=[],Z=$.nil,A=$.$$$;return $.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),function(p,P){var V=w(p,"Math"),M=[V].concat(P),L=$.$r(M);return D(V,"E",Math.E),D(V,"PI",Math.PI),D(V,"DomainError",k.$new(A("StandardError"))),C(V,"$checked",function(q,R){var x,E;if(x=ee(arguments,1),E=x,isNaN(E[0])||E.length==2&&isNaN(E[1]))return NaN;var u=Math[q].apply(null,E);return isNaN(u)&&J.$raise(L("DomainError"),'Numerical argument is out of domain - "'+q+'"'),u},-2),C(V,"$float!",function(q){try{return J.$Float(q)}catch(R){if($.rescue(R,[A("ArgumentError")]))try{return J.$raise(z(q,A("Float")))}finally{$.pop_exception(R)}else throw R}}),C(V,"$integer!",function(q){try{return J.$Integer(q)}catch(R){if($.rescue(R,[A("ArgumentError")]))try{return J.$raise(z(q,A("Integer")))}finally{$.pop_exception(R)}else throw R}}),V.$module_function(),W(typeof Math.erf<"u")||$.prop(Math,"erf",function(g){var q=.254829592,R=-.284496736,x=1.421413741,E=-1.453152027,u=1.061405429,d=.3275911,I=1;g<0&&(I=-1),g=Math.abs(g);var h=1/(1+d*g),c=1-((((u*h+E)*h+x)*h+R)*h+q)*h*Math.exp(-g*g);return I*c}),W(typeof Math.erfc<"u")||$.prop(Math,"erfc",function(g){var q=Math.abs(g),R=1/(.5*q+1),x=R*.17087277+-.82215223,E=R*x+1.48851587,u=R*E+-1.13520398,d=R*u+.27886807,I=R*d+-.18628806,h=R*I+.09678418,c=R*h+.37409196,l=R*c+1.00002368,y=R*l,K=-q*q-1.26551223+y,_=R*Math.exp(K);return g<0?2-_:_}),m(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function g(q){var R=g.$$s==null?this:g.$$s;return q==null&&(q=Z),m(R,"define_method",[q],function(E){return E==null&&(E=Z),A("Math").$checked(q,A("Math")["$float!"](E))})},{$$s:V}),B(V,"$atan2",function(q,R){return A("Math").$checked("atan2",A("Math")["$float!"](q),A("Math")["$float!"](R))}),B(V,"$hypot",function(q,R){return A("Math").$checked("hypot",A("Math")["$float!"](q),A("Math")["$float!"](R))}),B(V,"$frexp",function(q){if(q=L("Math")["$float!"](q),isNaN(q))return[NaN,0];var R=Math.floor(Math.log(Math.abs(q))/Math.log(2))+1,x=q/Math.pow(2,R);return[x,R]}),B(V,"$gamma",function(q){q=L("Math")["$float!"](q);var R,x,E,u,d,I,h,c,l,y=4.7421875,K=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(q))return NaN;if(q===0&&1/q<0)return-1/0;if((q===-1||q===-1/0)&&J.$raise(L("DomainError"),'Numerical argument is out of domain - "gamma"'),L("Integer")["$==="](q)){if(q<=0)return isFinite(q)?1/0:NaN;if(q>171)return 1/0;for(u=q-2,d=q-1;u>1;)d*=u,u--;return d==0&&(d=1),d}if(q<.5)return Math.PI/(Math.sin(Math.PI*q)*A("Math").$gamma(ie(1,q)));if(q>=171.35)return 1/0;if(q>85)return I=q*q,h=I*q,c=h*q,l=c*q,Math.sqrt(2*Math.PI/q)*Math.pow(q/Math.E,q)*(1+1/(12*q)+1/(288*I)-139/(51840*h)-571/(2488320*c)+163879/(209018880*l)+5246819/(75246796800*l*q));for(q-=1,E=K[0],R=1;R<K.length;++R)E+=K[R]/(q+R);return x=q+y+.5,Math.sqrt(2*Math.PI)*Math.pow(x,q+.5)*Math.exp(-x)*E}),B(V,"$ldexp",function(q,R){return q=L("Math")["$float!"](q),R=L("Math")["$integer!"](R),isNaN(R)&&J.$raise(A("RangeError"),"float NaN out of range of integer"),q*Math.pow(2,R)}),B(V,"$lgamma",function(q){return q==-1?[1/0,1]:[Math.log(Math.abs(A("Math").$gamma(q))),A("Math").$gamma(q)<0?-1:1]}),B(V,"$log",function(q,R){return X(A("String"),q)&&J.$raise(z(q,A("Float"))),W(R==null)?A("Math").$checked("log",A("Math")["$float!"](q)):(X(A("String"),R)&&J.$raise(z(R,A("Float"))),U(A("Math").$checked("log",A("Math")["$float!"](q)),A("Math").$checked("log",A("Math")["$float!"](R))))},-2),B(V,"$log10",function(q){return X(A("String"),q)&&J.$raise(z(q,A("Float"))),A("Math").$checked("log10",A("Math")["$float!"](q))}),B(V,"$log2",function(q){return X(A("String"),q)&&J.$raise(z(q,A("Float"))),A("Math").$checked("log2",A("Math")["$float!"](q))}),B(V,"$tan",function(q){return q=A("Math")["$float!"](q),W(q["$infinite?"]())?A(A("Float"),"NAN"):A("Math").$checked("tan",A("Math")["$float!"](q))})}("::",te)};Opal.modules["corelib/complex/base"]=function($){var z=$.module,w=$.truthy,D=$.def,k=$.klass,ee=[],J=$.nil;return $.add_stubs("new,from_string"),function(C,W){var m=z(C,"Kernel"),B=[m].concat(W),ie=$.$r(B);return D(m,"$Complex",function(U,te){return te==null&&(te=J),w(te)?ie("Complex").$new(U,te):ie("Complex").$new(U,0)},-2)}("::",ee),function(C,W,m){var B=k(C,W,"String"),ie=[B].concat(m),X=$.$r(ie);return D(B,"$to_c",function(){var te=this;return X("Complex").$from_string(te)})}("::",null,ee)};Opal.modules["corelib/complex"]=function($){var z=$.klass,w=$.truthy,D=$.eqeqeq,k=$.Kernel,ee=$.defs,J=$.rb_times,C=$.def,W=$.rb_plus,m=$.rb_minus,B=$.rb_divide,ie=$.eqeq,X=$.to_ary,U=$.rb_gt,te=$.neqeq,Z=$.return_val,A=$.const_set,p=$.alias,P=$.top,V=[],M=$.nil,L=$.$$$;return $.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,hash,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),P.$require("corelib/numeric"),P.$require("corelib/complex/base"),function(g,q,R){var x=z(g,q,"Complex"),E=[x].concat(R),u=$.$r(E),d=x.$$prototype;return d.real=d.imag=M,ee(x,"$rect",function(h,c){var l=this;return c==null&&(c=0),D(L("Numeric"),h)&&w(h["$real?"]())&&D(L("Numeric"),c)&&w(c["$real?"]())||k.$raise(L("TypeError"),"not a real"),l.$new(h,c)},-2),ee(x,"$polar",function(h,c){var l=this;return c==null&&(c=0),D(L("Numeric"),h)&&w(h["$real?"]())&&D(L("Numeric"),c)&&w(c["$real?"]())||k.$raise(L("TypeError"),"not a real"),l.$new(J(h,L("Math").$cos(c)),J(h,L("Math").$sin(c)))},-2),x.$attr_reader("real","imag"),C(x,"$initialize",function(h,c){var l=this;return c==null&&(c=0),l.real=h,l.imag=c,l.$freeze()},-2),C(x,"$coerce",function(h){var c=this;return D(L("Complex"),h)?[h,c]:D(L("Numeric"),h)&&w(h["$real?"]())?[L("Complex").$new(h,0),c]:k.$raise(L("TypeError"),""+h.$class()+" can't be coerced into Complex")}),C(x,"$==",function(h){var c=this,l=M;return D(L("Complex"),h)?w(l=c.real["$=="](h.$real()))?c.imag["$=="](h.$imag()):l:D(L("Numeric"),h)&&w(h["$real?"]())?w(l=c.real["$=="](h))?c.imag["$=="](0):l:h["$=="](c)}),C(x,"$-@",function(){var h=this;return k.$Complex(h.real["$-@"](),h.imag["$-@"]())}),C(x,"$+",function(h){var c=this;return D(L("Complex"),h)?k.$Complex(W(c.real,h.$real()),W(c.imag,h.$imag())):D(L("Numeric"),h)&&w(h["$real?"]())?k.$Complex(W(c.real,h),c.imag):c.$__coerced__("+",h)}),C(x,"$-",function(h){var c=this;return D(L("Complex"),h)?k.$Complex(m(c.real,h.$real()),m(c.imag,h.$imag())):D(L("Numeric"),h)&&w(h["$real?"]())?k.$Complex(m(c.real,h),c.imag):c.$__coerced__("-",h)}),C(x,"$*",function(h){var c=this;return D(L("Complex"),h)?k.$Complex(m(J(c.real,h.$real()),J(c.imag,h.$imag())),W(J(c.real,h.$imag()),J(c.imag,h.$real()))):D(L("Numeric"),h)&&w(h["$real?"]())?k.$Complex(J(c.real,h),J(c.imag,h)):c.$__coerced__("*",h)}),C(x,"$/",function(h){var c=this;return D(L("Complex"),h)?D(L("Number"),c.real)&&w(c.real["$nan?"]())||D(L("Number"),c.imag)&&w(c.imag["$nan?"]())||D(L("Number"),h.$real())&&w(h.$real()["$nan?"]())||D(L("Number"),h.$imag())&&w(h.$imag()["$nan?"]())?L("Complex").$new(L(L("Float"),"NAN"),L(L("Float"),"NAN")):B(J(c,h.$conj()),h.$abs2()):D(L("Numeric"),h)&&w(h["$real?"]())?k.$Complex(c.real.$quo(h),c.imag.$quo(h)):c.$__coerced__("/",h)}),C(x,"$**",function(h){var c,l,y=this,K=M,_=M,s=M,n=M,r=M,e=M,t=M,i=M,a=M,o=M,v=M;if(ie(h,0))return L("Complex").$new(1,0);if(D(L("Complex"),h))return l=y.$polar(),c=X(l),K=c[0]==null?M:c[0],_=c[1]==null?M:c[1],s=h.$real(),n=h.$imag(),r=L("Math").$exp(m(J(s,L("Math").$log(K)),J(n,_))),e=W(J(_,s),J(n,L("Math").$log(K))),L("Complex").$polar(r,e);if(D(L("Integer"),h))if(w(U(h,0))){for(t=y,i=t,a=m(h,1);te(a,0);){for(l=a.$divmod(2),c=X(l),o=c[0]==null?M:c[0],v=c[1]==null?M:c[1];ie(v,0);)t=k.$Complex(m(J(t.$real(),t.$real()),J(t.$imag(),t.$imag())),J(J(2,t.$real()),t.$imag())),a=o,l=a.$divmod(2),c=X(l),o=c[0]==null?M:c[0],v=c[1]==null?M:c[1];i=J(i,t),a=m(a,1)}return i}else return B(L("Rational").$new(1,1),y)["$**"](h["$-@"]());else return D(L("Float"),h)||D(L("Rational"),h)?(l=y.$polar(),c=X(l),K=c[0]==null?M:c[0],_=c[1]==null?M:c[1],L("Complex").$polar(K["$**"](h),J(_,h))):y.$__coerced__("**",h)}),C(x,"$abs",function(){var h=this;return L("Math").$hypot(h.real,h.imag)}),C(x,"$abs2",function(){var h=this;return W(J(h.real,h.real),J(h.imag,h.imag))}),C(x,"$angle",function(){var h=this;return L("Math").$atan2(h.imag,h.real)}),C(x,"$conj",function(){var h=this;return k.$Complex(h.real,h.imag["$-@"]())}),C(x,"$denominator",function(){var h=this;return h.real.$denominator().$lcm(h.imag.$denominator())}),C(x,"$eql?",function(h){var c=this,l=M,y=M;return w(l=w(y=u("Complex")["$==="](h))?c.real.$class()["$=="](c.imag.$class()):y)?c["$=="](h):l}),C(x,"$fdiv",function(h){var c=this;return D(L("Numeric"),h)||k.$raise(L("TypeError"),""+h.$class()+" can't be coerced into Complex"),B(c,h)}),C(x,"$finite?",function(){var h=this,c=M;return w(c=h.real["$finite?"]())?h.imag["$finite?"]():c}),C(x,"$hash",function(){var h=this;return[L("Complex"),h.real,h.imag].$hash()}),C(x,"$infinite?",function(){var h=this,c=M;return w(c=h.real["$infinite?"]())?c:h.imag["$infinite?"]()}),C(x,"$inspect",function(){var h=this;return"("+h+")"}),C(x,"$numerator",function(){var h=this,c=M;return c=h.$denominator(),k.$Complex(J(h.real.$numerator(),B(c,h.real.$denominator())),J(h.imag.$numerator(),B(c,h.imag.$denominator())))}),C(x,"$polar",function(){var h=this;return[h.$abs(),h.$arg()]}),C(x,"$rationalize",function(h){var c=this;return arguments.length>1&&k.$raise(L("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),te(c.imag,0)&&k.$raise(L("RangeError"),"can't convert "+c+" into Rational"),c.$real().$rationalize(h)},-1),C(x,"$real?",Z(!1)),C(x,"$rect",function(){var h=this;return[h.real,h.imag]}),C(x,"$to_f",function(){var h=this;return ie(h.imag,0)||k.$raise(L("RangeError"),"can't convert "+h+" into Float"),h.real.$to_f()}),C(x,"$to_i",function(){var h=this;return ie(h.imag,0)||k.$raise(L("RangeError"),"can't convert "+h+" into Integer"),h.real.$to_i()}),C(x,"$to_r",function(){var h=this;return ie(h.imag,0)||k.$raise(L("RangeError"),"can't convert "+h+" into Rational"),h.real.$to_r()}),C(x,"$to_s",function(){var h=this,c=M;return c=h.real.$inspect(),c=W(c,D(L("Number"),h.imag)&&w(h.imag["$nan?"]())||w(h.imag["$positive?"]())||w(h.imag["$zero?"]())?"+":"-"),c=W(c,h.imag.$abs().$inspect()),D(L("Number"),h.imag)&&(w(h.imag["$nan?"]())||w(h.imag["$infinite?"]()))&&(c=W(c,"*")),W(c,"i")}),A(E[0],"I",x.$new(0,1)),ee(x,"$from_string",function(h){var c=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;h.match(c);var l,y;function K(){return c.test(h)}function _(){var n=h.match(c),r=n[0];return h=h.slice(r.length),r.replace(/_/g,"")}function s(){if(K()){var n=parseFloat(_());if(h[0]==="/")if(h=h.slice(1),K()){var r=parseFloat(_());return k.$Rational(n,r)}else return h="/"+h,n;else return n}else return null}return l=s(),l?(y=s(),y?k.$Complex(l,y):h[0]==="i"?k.$Complex(0,l):k.$Complex(l,0)):h[0]==="i"?k.$Complex(0,1):h[0]==="-"&&h[1]==="i"?k.$Complex(0,-1):h[0]==="+"&&h[1]==="i"?k.$Complex(0,1):k.$Complex(0,0)}),function(I,h){return p(I,"rectangular","rect")}($.get_singleton_class(x)),p(x,"arg","angle"),p(x,"conjugate","conj"),p(x,"divide","/"),p(x,"imaginary","imag"),p(x,"magnitude","abs"),p(x,"phase","arg"),p(x,"quo","/"),p(x,"rectangular","rect"),$.udef(x,"$negative?"),$.udef(x,"$positive?"),$.udef(x,"$step"),M}("::",L("Numeric"),V)};Opal.modules["corelib/rational/base"]=function($){var z=$.module,w=$.def,D=$.klass;$.nil;var k=$.$$$;return $.add_stubs("convert,from_string"),function(ee){var J=z(ee,"Kernel");return w(J,"$Rational",function(W,m){return m==null&&(m=1),k("Rational").$convert(W,m)},-2)}("::"),function(ee,J){var C=D(ee,J,"String");return w(C,"$to_r",function(){var m=this;return k("Rational").$from_string(m)})}("::",null)};Opal.modules["corelib/rational"]=function($){var z=$.klass,w=$.eqeq,D=$.Kernel,k=$.truthy,ee=$.rb_lt,J=$.rb_divide,C=$.defs,W=$.eqeqeq,m=$.not,B=$.Opal,ie=$.def,X=$.return_ivar,U=$.rb_minus,te=$.rb_times,Z=$.rb_plus,A=$.rb_gt,p=$.rb_le,P=$.return_self,V=$.alias,M=$.top,L=$.nil,g=$.$$$;return $.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,hash,<=,truncate,send"),M.$require("corelib/numeric"),M.$require("corelib/rational/base"),function(q,R){var x=z(q,R,"Rational"),E=x.$$prototype;return E.num=E.den=L,C(x,"$reduce",function(d,I){var h=this,c=L;if(d=d.$to_i(),I=I.$to_i(),w(I,0))D.$raise(g("ZeroDivisionError"),"divided by 0");else if(k(ee(I,0)))d=d["$-@"](),I=I["$-@"]();else if(w(I,1))return h.$new(d,I);return c=d.$gcd(I),h.$new(J(d,c),J(I,c))}),C(x,"$convert",function(d,I){var h=this;return(k(d["$nil?"]())||k(I["$nil?"]()))&&D.$raise(g("TypeError"),"cannot convert nil into Rational"),W(g("Integer"),d)&&W(g("Integer"),I)?h.$reduce(d,I):((W(g("Float"),d)||W(g("String"),d)||W(g("Complex"),d))&&(d=d.$to_r()),(W(g("Float"),I)||W(g("String"),I)||W(g("Complex"),I))&&(I=I.$to_r()),k(I["$equal?"](1))&&m(g("Integer")["$==="](d))?B["$coerce_to!"](d,g("Rational"),"to_r"):W(g("Numeric"),d)&&W(g("Numeric"),I)?J(d,I):h.$reduce(d,I))}),ie(x,"$initialize",function(d,I){var h=this;return h.num=d,h.den=I,h.$freeze()}),ie(x,"$numerator",X("num")),ie(x,"$denominator",X("den")),ie(x,"$coerce",function(d){var I=this,h=L;return W(g("Rational"),h=d)?[d,I]:W(g("Integer"),h)?[d.$to_r(),I]:W(g("Float"),h)?[d,I.$to_f()]:L}),ie(x,"$==",function(d){var I=this,h=L,c=L;return W(g("Rational"),h=d)?k(c=I.num["$=="](d.$numerator()))?I.den["$=="](d.$denominator()):c:W(g("Integer"),h)?k(c=I.num["$=="](d))?I.den["$=="](1):c:W(g("Float"),h)?I.$to_f()["$=="](d):d["$=="](I)}),ie(x,"$<=>",function(d){var I=this,h=L;return W(g("Rational"),h=d)?U(te(I.num,d.$denominator()),te(I.den,d.$numerator()))["$<=>"](0):W(g("Integer"),h)?U(I.num,te(I.den,d))["$<=>"](0):W(g("Float"),h)?I.$to_f()["$<=>"](d):I.$__coerced__("<=>",d)}),ie(x,"$+",function(d){var I=this,h=L,c=L,l=L;return W(g("Rational"),h=d)?(c=Z(te(I.num,d.$denominator()),te(I.den,d.$numerator())),l=te(I.den,d.$denominator()),D.$Rational(c,l)):W(g("Integer"),h)?D.$Rational(Z(I.num,te(d,I.den)),I.den):W(g("Float"),h)?Z(I.$to_f(),d):I.$__coerced__("+",d)}),ie(x,"$-",function(d){var I=this,h=L,c=L,l=L;return W(g("Rational"),h=d)?(c=U(te(I.num,d.$denominator()),te(I.den,d.$numerator())),l=te(I.den,d.$denominator()),D.$Rational(c,l)):W(g("Integer"),h)?D.$Rational(U(I.num,te(d,I.den)),I.den):W(g("Float"),h)?U(I.$to_f(),d):I.$__coerced__("-",d)}),ie(x,"$*",function(d){var I=this,h=L,c=L,l=L;return W(g("Rational"),h=d)?(c=te(I.num,d.$numerator()),l=te(I.den,d.$denominator()),D.$Rational(c,l)):W(g("Integer"),h)?D.$Rational(te(I.num,d),I.den):W(g("Float"),h)?te(I.$to_f(),d):I.$__coerced__("*",d)}),ie(x,"$/",function(d){var I=this,h=L,c=L,l=L;return W(g("Rational"),h=d)?(c=te(I.num,d.$denominator()),l=te(I.den,d.$numerator()),D.$Rational(c,l)):W(g("Integer"),h)?w(d,0)?J(I.$to_f(),0):D.$Rational(I.num,te(I.den,d)):W(g("Float"),h)?J(I.$to_f(),d):I.$__coerced__("/",d)}),ie(x,"$**",function(d){var I=this,h=L;return W(g("Integer"),h=d)?w(I,0)&&k(ee(d,0))?g(g("Float"),"INFINITY"):k(A(d,0))?D.$Rational(I.num["$**"](d),I.den["$**"](d)):k(ee(d,0))?D.$Rational(I.den["$**"](d["$-@"]()),I.num["$**"](d["$-@"]())):D.$Rational(1,1):W(g("Float"),h)?I.$to_f()["$**"](d):W(g("Rational"),h)?w(d,0)?D.$Rational(1,1):w(d.$denominator(),1)?k(ee(d,0))?D.$Rational(I.den["$**"](d.$numerator().$abs()),I.num["$**"](d.$numerator().$abs())):D.$Rational(I.num["$**"](d.$numerator()),I.den["$**"](d.$numerator())):w(I,0)&&k(ee(d,0))?D.$raise(g("ZeroDivisionError"),"divided by 0"):I.$to_f()["$**"](d):I.$__coerced__("**",d)}),ie(x,"$abs",function(){var d=this;return D.$Rational(d.num.$abs(),d.den.$abs())}),ie(x,"$ceil",function(d){var I=this;return d==null&&(d=0),w(d,0)?J(I.num["$-@"](),I.den)["$-@"]().$ceil():I.$with_precision("ceil",d)},-1),ie(x,"$floor",function(d){var I=this;return d==null&&(d=0),w(d,0)?J(I.num["$-@"](),I.den)["$-@"]().$floor():I.$with_precision("floor",d)},-1),ie(x,"$hash",function(){var d=this;return[g("Rational"),d.num,d.den].$hash()}),ie(x,"$inspect",function(){var d=this;return"("+d+")"}),ie(x,"$rationalize",function(d){var I=this;if(arguments.length>1&&D.$raise(g("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),d==null)return I;for(var h=d.$abs(),c=U(I,h),l=Z(I,h),y=0,K=1,_=1,s=0,n,r,e,t,i;e=c.$ceil(),!p(e,l);)t=e-1,n=t*K+y,r=t*s+_,i=J(1,U(l,t)),l=J(1,U(c,t)),c=i,y=K,_=s,K=n,s=r;return D.$Rational(e*K+y,e*s+_)},-1),ie(x,"$round",function(d){var I=this,h=L,c=L,l=L;return d==null&&(d=0),w(d,0)?w(I.num,0)?0:w(I.den,1)?I.num:(h=Z(te(I.num.$abs(),2),I.den),c=te(I.den,2),l=J(h,c).$truncate(),k(ee(I.num,0))?l["$-@"]():l):I.$with_precision("round",d)},-1),ie(x,"$to_f",function(){var d=this;return J(d.num,d.den)}),ie(x,"$to_i",function(){var d=this;return d.$truncate()}),ie(x,"$to_r",P),ie(x,"$to_s",function(){var d=this;return""+d.num+"/"+d.den}),ie(x,"$truncate",function(d){var I=this;return d==null&&(d=0),w(d,0)?k(ee(I.num,0))?I.$ceil():I.$floor():I.$with_precision("truncate",d)},-1),ie(x,"$with_precision",function(d,I){var h=this,c=L,l=L;return W(g("Integer"),I)||D.$raise(g("TypeError"),"not an Integer"),c=10["$**"](I),l=te(h,c),k(ee(I,1))?J(l.$send(d),c).$to_i():D.$Rational(l.$send(d),c)}),C(x,"$from_string",function(d){var I=d.trimLeft(),h=/^[+-]?[\d_]+(\.[\d_]+)?/;I.match(h);var c,l;function y(){return h.test(I)}function K(){var _=I.match(h),s=_[0];return I=I.slice(s.length),s.replace(/_/g,"")}return y()?(c=parseFloat(K()),I[0]==="/"?(I=I.slice(1),y()?(l=parseFloat(K()),D.$Rational(c,l)):D.$Rational(c,1)):D.$Rational(c,1)):D.$Rational(0,1)}),V(x,"divide","/"),V(x,"quo","/")}("::",g("Numeric"))};Opal.modules["corelib/time"]=function($){var z=$.slice,w=$.deny_frozen_access,D=$.klass,k=$.Kernel,ee=$.Opal,J=$.defs,C=$.eqeqeq,W=$.def,m=$.truthy,B=$.rb_gt,ie=$.rb_lt,X=$.send,U=$.rb_plus,te=$.rb_divide,Z=$.rb_minus,A=$.range,p=$.neqeq,P=$.rb_le,V=$.eqeq,M=$.alias,L=$.top,g=[],q=$.nil,R=$.$$$;return $.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,hash,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),L.$require("corelib/comparable"),function(x,E,u){var d=D(x,E,"Time"),I=[d].concat(u),h=$.$r(I);d.$include(R("Comparable"));var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],K=["January","February","March","April","May","June","July","August","September","October","November","December"];J(d,"$at",function(n,r){var e;return R("Time")["$==="](n)?(r!==void 0&&k.$raise(R("TypeError"),"can't convert Time into an exact number"),e=new Date(n.getTime()),e.timezone=n.timezone,e):(n.$$is_number||(n=ee["$coerce_to!"](n,R("Integer"),"to_int")),r===void 0?new Date(n*1e3):(r.$$is_number||(r=ee["$coerce_to!"](r,R("Integer"),"to_int")),new Date(n*1e3+r/1e3)))},-2);function _(s,n,r,e,t,i){if(s.$$is_string?s=parseInt(s,10):s=ee["$coerce_to!"](s,R("Integer"),"to_int"),n===q)n=1;else if(!n.$$is_number)if(n["$respond_to?"]("to_str"))switch(n=n.$to_str(),n.toLowerCase()){case"jan":n=1;break;case"feb":n=2;break;case"mar":n=3;break;case"apr":n=4;break;case"may":n=5;break;case"jun":n=6;break;case"jul":n=7;break;case"aug":n=8;break;case"sep":n=9;break;case"oct":n=10;break;case"nov":n=11;break;case"dec":n=12;break;default:n=n.$to_i()}else n=ee["$coerce_to!"](n,R("Integer"),"to_int");return(n<1||n>12)&&k.$raise(R("ArgumentError"),"month out of range: "+n),n=n-1,r===q?r=1:r.$$is_string?r=parseInt(r,10):r=ee["$coerce_to!"](r,R("Integer"),"to_int"),(r<1||r>31)&&k.$raise(R("ArgumentError"),"day out of range: "+r),e===q?e=0:e.$$is_string?e=parseInt(e,10):e=ee["$coerce_to!"](e,R("Integer"),"to_int"),(e<0||e>24)&&k.$raise(R("ArgumentError"),"hour out of range: "+e),t===q?t=0:t.$$is_string?t=parseInt(t,10):t=ee["$coerce_to!"](t,R("Integer"),"to_int"),(t<0||t>59)&&k.$raise(R("ArgumentError"),"min out of range: "+t),i===q?i=0:i.$$is_number||(i.$$is_string?i=parseInt(i,10):i=ee["$coerce_to!"](i,R("Integer"),"to_int")),(i<0||i>60)&&k.$raise(R("ArgumentError"),"sec out of range: "+i),[s,n,r,e,t,i]}return J(d,"$new",function(n,r,e,t,i,a,o){var v=this;r==null&&(r=q),e==null&&(e=q),t==null&&(t=q),i==null&&(i=q),a==null&&(a=q),o==null&&(o=q);var S,j,T,Y;return n===void 0?new Date:(S=_(n,r,e,t,i,a),n=S[0],r=S[1],e=S[2],t=S[3],i=S[4],a=S[5],o===q?(j=new Date(n,r,e,t,i,0,a*1e3),n<100&&j.setFullYear(n),j):(T=v.$_parse_offset(o),Y=new Date(Date.UTC(n,r,e,t,i,0,a*1e3)),n<100&&Y.setUTCFullYear(n),j=new Date(Y.getTime()-T*36e5),j.timezone=T,j))},-1),J(d,"$_parse_offset",function(n){var r;if(n.$$is_string)if(n=="UTC")r=0;else if(/^[+-]\d\d:[0-5]\d$/.test(n)){var e,t,i;e=n[0],t=+(n[1]+n[2]),i=+(n[4]+n[5]),r=(e=="-"?-1:1)*(t+i/60)}else k.$raise(R("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+n);else n.$$is_number?r=n/3600:k.$raise(R("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String");return r}),J(d,"$local",function(n,r,e,t,i,a,o,v,S,j){r==null&&(r=q),e==null&&(e=q),t==null&&(t=q),i==null&&(i=q),a==null&&(a=q),o==null&&(o=q),v==null&&(v=q),S==null&&(S=q),j==null&&(j=q);var T,Y;return arguments.length===10&&(T=z(arguments),n=T[5],r=T[4],e=T[3],t=T[2],i=T[1],a=T[0]),T=_(n,r,e,t,i,a),n=T[0],r=T[1],e=T[2],t=T[3],i=T[4],a=T[5],Y=new Date(n,r,e,t,i,0,a*1e3),n<100&&Y.setFullYear(n),Y},-2),J(d,"$gm",function(n,r,e,t,i,a,o,v,S,j){r==null&&(r=q),e==null&&(e=q),t==null&&(t=q),i==null&&(i=q),a==null&&(a=q),o==null&&(o=q),v==null&&(v=q),S==null&&(S=q),j==null&&(j=q);var T,Y;return arguments.length===10&&(T=z(arguments),n=T[5],r=T[4],e=T[3],t=T[2],i=T[1],a=T[0]),T=_(n,r,e,t,i,a),n=T[0],r=T[1],e=T[2],t=T[3],i=T[4],a=T[5],Y=new Date(Date.UTC(n,r,e,t,i,0,a*1e3)),n<100&&Y.setUTCFullYear(n),Y.timezone=0,Y},-2),J(d,"$now",function(){var n=this;return n.$new()}),W(d,"$+",function(n){var r=this;C(R("Time"),n)&&k.$raise(R("TypeError"),"time + time?"),n.$$is_number||(n=ee["$coerce_to!"](n,R("Integer"),"to_int"));var e=new Date(r.getTime()+n*1e3);return e.timezone=r.timezone,e}),W(d,"$-",function(n){var r=this;if(C(R("Time"),n))return(r.getTime()-n.getTime())/1e3;n.$$is_number||(n=ee["$coerce_to!"](n,R("Integer"),"to_int"));var e=new Date(r.getTime()-n*1e3);return e.timezone=r.timezone,e}),W(d,"$<=>",function(n){var r=this,e=q;return C(R("Time"),n)?r.$to_f()["$<=>"](n.$to_f()):(e=n["$<=>"](r),m(e["$nil?"]())?q:m(B(e,0))?-1:m(ie(e,0))?1:0)}),W(d,"$==",function(n){var r=this,e=q;return m(e=R("Time")["$==="](n))?r.$to_f()===n.$to_f():e}),W(d,"$asctime",function(){var n=this;return n.$strftime("%a %b %e %H:%M:%S %Y")}),X([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function s(n,r,e,t){var i=s.$$s==null?this:s.$$s;return n==null&&(n=q),r==null&&(r=q),e==null&&(e=q),t==null&&(t=0),X(i,"define_method",[n],function a(){var o=a.$$s==null?this:a.$$s;return t+(o.timezone!=null?new Date(o.getTime()+o.timezone*36e5)[e]():o[r]())},{$$s:i})},{$$arity:-4,$$s:d}),W(d,"$yday",function(){var n=this,r=q,e=q,t=q;return r=h("Time").$new(n.$year()).$to_i(),e=h("Time").$new(n.$year(),n.$month(),n.$day()).$to_i(),t=86400,U(te(Z(e,r),t).$round(),1)}),W(d,"$isdst",function(){var n=this,r=new Date(n.getFullYear(),0,1),e=new Date(n.getFullYear(),6,1);return n.getTimezoneOffset()<Math.max(r.getTimezoneOffset(),e.getTimezoneOffset())}),W(d,"$dup",function(){var n=this,r=q;return r=new Date(n.getTime()),r.$copy_instance_variables(n),r.$initialize_dup(n),r}),W(d,"$eql?",function(n){var r=this,e=q;return m(e=n["$is_a?"](R("Time")))?r["$<=>"](n)["$zero?"]():e}),X([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function s(n,r){var e=s.$$s==null?this:s.$$s;return n==null&&(n=q),r==null&&(r=q),X(e,"define_method",[n],function t(){var i=t.$$s==null?this:t.$$s;return i.$wday()===r},{$$s:e})},{$$s:d}),W(d,"$hash",function(){var n=this;return[R("Time"),n.getTime()].$hash()}),W(d,"$inspect",function(){var n=this;return m(n["$utc?"]())?n.$strftime("%Y-%m-%d %H:%M:%S UTC"):n.$strftime("%Y-%m-%d %H:%M:%S %z")}),W(d,"$succ",function(){var n=this,r=new Date(n.getTime()+1e3);return r.timezone=n.timezone,r}),W(d,"$usec",function(){var n=this;return n.getMilliseconds()*1e3}),W(d,"$zone",function(){var n=this;if(n.timezone===0)return"UTC";if(n.timezone!=null)return q;var r=n.toString(),e;return r.indexOf("(")==-1?e=r.match(/[A-Z]{3,4}/)[0]:e=r.match(/\((.+)\)(?:\s|$)/)[1],e=="GMT"&&/(GMT\W*\d{4})/.test(r)?RegExp.$1:e}),W(d,"$getgm",function(){var n=this,r=new Date(n.getTime());return r.timezone=0,r}),W(d,"$gmtime",function(){var n=this;return n.timezone!==0&&(w(n),n.timezone=0),n}),W(d,"$gmt?",function(){var n=this;return n.timezone===0}),W(d,"$gmt_offset",function(){var n=this;return n.timezone!=null?n.timezone*60:-n.getTimezoneOffset()*60}),W(d,"$strftime",function(n){var r=this;return n.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,t,i,a,o){var v="",S,j,T,Y=t.indexOf("0")!==-1,O=t.indexOf("-")===-1,ae=t.indexOf("_")!==-1,le=t.indexOf("^")!==-1,_e=t.indexOf("#")!==-1,de=(t.match(":")||[]).length;switch(i=parseInt(i,10),Y&&ae&&(t.indexOf("0")<t.indexOf("_")?Y=!1:ae=!1),o){case"Y":v+=r.$year();break;case"C":Y=!ae,v+=Math.round(r.$year()/100);break;case"y":Y=!ae,v+=r.$year()%100;break;case"m":Y=!ae,v+=r.$mon();break;case"B":v+=K[r.$mon()-1];break;case"b":case"h":ae=!Y,v+=y[r.$mon()-1];break;case"d":Y=!ae,v+=r.$day();break;case"e":ae=!Y,v+=r.$day();break;case"j":Y=!ae,i=isNaN(i)?3:i,v+=r.$yday();break;case"H":Y=!ae,v+=r.$hour();break;case"k":ae=!Y,v+=r.$hour();break;case"I":Y=!ae,v+=r.$hour()%12||12;break;case"l":ae=!Y,v+=r.$hour()%12||12;break;case"P":v+=r.$hour()>=12?"pm":"am";break;case"p":v+=r.$hour()>=12?"PM":"AM";break;case"M":Y=!ae,v+=r.$min();break;case"S":Y=!ae,v+=r.$sec();break;case"L":Y=!ae,i=isNaN(i)?3:i,v+=r.getMilliseconds();break;case"N":i=isNaN(i)?9:i,v+=r.getMilliseconds().toString().$rjust(3,"0"),v=v.$ljust(i,"0");break;case"z":var ge=r.timezone==null?r.getTimezoneOffset():-r.timezone*60,ve=Math.floor(Math.abs(ge)/60),me=Math.abs(ge)%60;v+=ge<0?"+":"-",v+=ve<10?"0":"",v+=ve,de>0&&(v+=":"),v+=me<10?"0":"",v+=me,de>1&&(v+=":00");break;case"Z":v+=r.$zone();break;case"A":v+=c[r.$wday()];break;case"a":v+=l[r.$wday()];break;case"u":v+=r.$wday()+1;break;case"w":v+=r.$wday();break;case"V":v+=r.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":v+=r.$cweek_cyear()["$[]"](1);break;case"g":v+=r.$cweek_cyear()["$[]"](1)["$[]"](A(-2,-1,!1));break;case"s":v+=r.$to_i();break;case"n":v+=`
`;break;case"t":v+="	";break;case"%":v+="%";break;case"c":v+=r.$strftime("%a %b %e %T %Y");break;case"D":case"x":v+=r.$strftime("%m/%d/%y");break;case"F":v+=r.$strftime("%Y-%m-%d");break;case"v":v+=r.$strftime("%e-%^b-%4Y");break;case"r":v+=r.$strftime("%I:%M:%S %p");break;case"R":v+=r.$strftime("%H:%M");break;case"T":case"X":v+=r.$strftime("%H:%M:%S");break;case"J":if(S=r.$to_date().$jd(),S<2405160){v+=r.$strftime("%Y-%m-%d");break}else S<2419614?(j="M",T=1867):S<2424875?(j="T",T=1911):S<2447535?(j="S",T=1925):S<2458605?(j="H",T=1988):(j="R",T=2018);v+=r.$format("%c%02d",j,Z(r.$year(),T)),v+=r.$strftime("-%m-%d");break;default:return e}return le&&(v=v.toUpperCase()),_e&&(v=v.replace(/[A-Z]/,function(be){be.toLowerCase()}).replace(/[a-z]/,function(be){be.toUpperCase()})),O&&(Y||ae)&&(v=v.$rjust(isNaN(i)?2:i,ae?" ":"0")),v})}),W(d,"$to_a",function(){var n=this;return[n.$sec(),n.$min(),n.$hour(),n.$day(),n.$month(),n.$year(),n.$wday(),n.$yday(),n.$isdst(),n.$zone()]}),W(d,"$to_f",function(){var n=this;return n.getTime()/1e3}),W(d,"$to_i",function(){var n=this;return parseInt(n.getTime()/1e3,10)}),W(d,"$cweek_cyear",function(){var n=this,r=q,e=q,t=q,i=q,a=q,o=q,v=q;return r=R("Time").$new(n.$year(),1,1),e=r.$wday(),t=n.$year(),m(P(e,4))&&p(e,0)?i=Z(e,1):(i=Z(Z(e,7),1),V(i,-8)&&(i=-1)),a=te(U(n.$yday(),i),7).$ceil(),m(P(a,0))?R("Time").$new(Z(n.$year(),1),12,31).$cweek_cyear():(V(a,53)&&(o=R("Time").$new(n.$year(),12,31),v=o.$wday(),m(P(v,3))&&p(v,0)&&(a=1,t=U(t,1))),[a,t])}),function(s,n){return M(s,"mktime","local"),M(s,"utc","gm")}($.get_singleton_class(d)),M(d,"ctime","asctime"),M(d,"dst?","isdst"),M(d,"getutc","getgm"),M(d,"gmtoff","gmt_offset"),M(d,"mday","day"),M(d,"month","mon"),M(d,"to_s","inspect"),M(d,"tv_sec","to_i"),M(d,"tv_usec","usec"),M(d,"utc","gmtime"),M(d,"utc?","gmt?"),M(d,"utc_offset","gmt_offset")}("::",Date,g)};Opal.modules["corelib/struct"]=function($){var z=$.klass,w=$.slice,D=$.extract_kwargs,k=$.ensure_kwargs,ee=$.hash_get,J=$.truthy,C=$.neqeq,W=$.eqeq,m=$.Opal,B=$.send,ie=$.Class,X=$.to_a,U=$.def,te=$.defs,Z=$.Kernel,A=$.rb_gt,p=$.rb_minus,P=$.eqeqeq,V=$.rb_lt,M=$.rb_ge,L=$.rb_plus,g=$.alias,q=$.top,R=[],x=$.nil,E=$.$$$;return $.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,to_a,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,each_with_object,flatten,respond_to?,dig"),q.$require("corelib/enumerable"),function(u,d,I){var h=z(u,d,"Struct"),c=[h].concat(I),l=$.$r(c);h.$include(E("Enumerable")),te(h,"$new",function K(_,s,n){var r=K.$$p||x,e,t,i,a,o=this,v=x;if(K.$$p=null,e=w(arguments,1),t=D(e),t=k(t),i=e,a=ee(t,"keyword_init"),a==null&&(a=!1),J(_))if(W(_.$class(),E("String"))&&C(_["$[]"](0).$upcase(),_["$[]"](0)))i.$unshift(_),_=x;else try{_=m["$const_name!"](_)}catch(S){if($.rescue(S,[E("TypeError"),E("NameError")]))try{i.$unshift(_),_=x}finally{$.pop_exception(S)}else throw S}return B(i,"map",[],function(j){return j==null&&(j=x),m["$coerce_to!"](j,E("String"),"to_str")}),v=B(ie,"new",[o],function S(){var j=S.$$s==null?this:S.$$s;return B(i,"each",[],function T(Y){var O=T.$$s==null?this:T.$$s;return Y==null&&(Y=x),O.$define_struct_attribute(Y)},{$$s:j}),function(T,Y){return U(T,"$new",function(ae){var le,_e,de=this,ge=x;return le=w(arguments),_e=le,ge=de.$allocate(),ge.$$data={},B(ge,"initialize",X(_e)),ge},-1),T.$alias_method("[]","new")}($.get_singleton_class(j))},{$$s:o}),J(r)&&B(v,"module_eval",[],r.$to_proc()),v.$$keyword_init=a,J(_)&&E("Struct").$const_set(_,v),v},-2),te(h,"$define_struct_attribute",function(_){var s=this;return W(s,E("Struct"))&&Z.$raise(E("ArgumentError"),"you cannot define attributes to the Struct class"),s.$members()["$<<"](_),B(s,"define_method",[_],function n(){var r=n.$$s==null?this:n.$$s;return r.$$data[_]},{$$s:s}),B(s,"define_method",[""+_+"="],function n(r){var e=n.$$s==null?this:n.$$s;return r==null&&(r=x),e.$$data[_]=r},{$$s:s})}),te(h,"$members",function(){var _=this,s=x;return _.members==null&&(_.members=x),W(_,E("Struct"))&&Z.$raise(E("ArgumentError"),"the Struct class has no members"),_.members=J(s=_.members)?s:[]}),te(h,"$inherited",function(_){var s=this,n=x;return s.members==null&&(s.members=x),n=s.members,B(_,"instance_eval",[],function r(){var e=r.$$s==null?this:r.$$s;return e.members=n},{$$s:s})}),U(h,"$initialize",function(_){var s,n,r=this,e=x,t=x,i=x;return s=w(arguments),n=s,J(r.$class().$$keyword_init)?(e=J(t=n.$last())?t:new Map,(J(A(n.$length(),1))||J(n.length===1&&!e.$$is_hash))&&Z.$raise(E("ArgumentError"),"wrong number of arguments (given "+n.$length()+", expected 0)"),i=p(e.$keys(),r.$class().$members()),J(i["$any?"]())&&Z.$raise(E("ArgumentError"),"unknown keywords: "+i.$join(", ")),B(r.$class().$members(),"each",[],function a(o){var v,S=a.$$s==null?this:a.$$s;return o==null&&(o=x),v=[o,e["$[]"](o)],B(S,"[]=",v),v[v.length-1]},{$$s:r})):(J(A(n.$length(),r.$class().$members().$length()))&&Z.$raise(E("ArgumentError"),"struct size differs"),B(r.$class().$members(),"each_with_index",[],function a(o,v){var S,j=a.$$s==null?this:a.$$s;return o==null&&(o=x),v==null&&(v=x),S=[o,n["$[]"](v)],B(j,"[]=",S),S[S.length-1]},{$$s:r}))},-1),U(h,"$initialize_copy",function(_){var s=this;s.$$data={};var n=Object.keys(_.$$data),r,e,t;for(r=0,e=n.length;r<e;r++)t=n[r],s.$$data[t]=_.$$data[t]}),te(h,"$keyword_init?",function(){var _=this;return _.$$keyword_init}),U(h,"$members",function(){var _=this;return _.$class().$members()}),U(h,"$hash",function(){var _=this;return[_.$class(),_.$to_a()].$hash()}),U(h,"$[]",function(_){var s=this;return P(E("Integer"),_)?(J(V(_,s.$class().$members().$size()["$-@"]()))&&Z.$raise(E("IndexError"),"offset "+_+" too small for struct(size:"+s.$class().$members().$size()+")"),J(M(_,s.$class().$members().$size()))&&Z.$raise(E("IndexError"),"offset "+_+" too large for struct(size:"+s.$class().$members().$size()+")"),_=s.$class().$members()["$[]"](_)):P(E("String"),_)?s.$$data.hasOwnProperty(_)||Z.$raise(E("NameError").$new("no member '"+_+"' in struct",_)):Z.$raise(E("TypeError"),"no implicit conversion of "+_.$class()+" into Integer"),_=m["$coerce_to!"](_,E("String"),"to_str"),s.$$data[_]}),U(h,"$[]=",function(_,s){var n=this;return P(E("Integer"),_)?(J(V(_,n.$class().$members().$size()["$-@"]()))&&Z.$raise(E("IndexError"),"offset "+_+" too small for struct(size:"+n.$class().$members().$size()+")"),J(M(_,n.$class().$members().$size()))&&Z.$raise(E("IndexError"),"offset "+_+" too large for struct(size:"+n.$class().$members().$size()+")"),_=n.$class().$members()["$[]"](_)):P(E("String"),_)?J(n.$class().$members()["$include?"](_.$to_sym()))||Z.$raise(E("NameError").$new("no member '"+_+"' in struct",_)):Z.$raise(E("TypeError"),"no implicit conversion of "+_.$class()+" into Integer"),_=m["$coerce_to!"](_,E("String"),"to_str"),n.$$data[_]=s}),U(h,"$==",function(_){var s=this;if(!J(_["$instance_of?"](s.$class())))return!1;var n={},r={};function e(t,i){var a,o,v;n[t.$__id__()]=!0,r[i.$__id__()]=!0;for(a in t.$$data)if(o=t.$$data[a],v=i.$$data[a],E("Struct")["$==="](o)){if((!n.hasOwnProperty(o.$__id__())||!r.hasOwnProperty(v.$__id__()))&&!e(o,v))return!1}else if(!o["$=="](v))return!1;return!0}return e(s,_)}),U(h,"$eql?",function(_){var s=this;if(!J(_["$instance_of?"](s.$class())))return!1;var n={},r={};function e(t,i){var a,o,v;n[t.$__id__()]=!0,r[i.$__id__()]=!0;for(a in t.$$data)if(o=t.$$data[a],v=i.$$data[a],E("Struct")["$==="](o)){if((!n.hasOwnProperty(o.$__id__())||!r.hasOwnProperty(v.$__id__()))&&!e(o,v))return!1}else if(!o["$eql?"](v))return!1;return!0}return e(s,_)}),U(h,"$each",function K(){var _=K.$$p||x,s=this;return K.$$p=null,_===x?B(s,"enum_for",["each"],function n(){var r=n.$$s==null?this:n.$$s;return r.$size()},{$$s:s}):(B(s.$class().$members(),"each",[],function n(r){var e=n.$$s==null?this:n.$$s;return r==null&&(r=x),$.yield1(_,e["$[]"](r))},{$$s:s}),s)}),U(h,"$each_pair",function K(){var _=K.$$p||x,s=this;return K.$$p=null,_===x?B(s,"enum_for",["each_pair"],function n(){var r=n.$$s==null?this:n.$$s;return r.$size()},{$$s:s}):(B(s.$class().$members(),"each",[],function n(r){var e=n.$$s==null?this:n.$$s;return r==null&&(r=x),$.yield1(_,[r,e["$[]"](r)])},{$$s:s}),s)}),U(h,"$length",function(){var _=this;return _.$class().$members().$length()}),U(h,"$to_a",function(){var _=this;return B(_.$class().$members(),"map",[],function s(n){var r=s.$$s==null?this:s.$$s;return n==null&&(n=x),r["$[]"](n)},{$$s:_})});var y=[];return U(h,"$inspect",function(){var _=this,s=x,n=x;return function(){try{return s="#<struct ",J(y["$include?"](_.$__id__()))?L(s,":...>"):(y["$<<"](_.$__id__()),n=!0,P(E("Struct"),_)&&J(_.$class().$name())&&(s=L(s,""+_.$class()+" ")),s=L(s,B(_.$each_pair(),"map",[],function(e,t){return e==null&&(e=x),t==null&&(t=x),""+e+"="+l("Opal").$inspect(t)}).$join(", ")),s=L(s,">"),s)}finally{J(n)&&y.pop()}}()}),U(h,"$to_h",function K(_){var s=K.$$p||x,n,r,e=this;return K.$$p=null,n=w(arguments),r=n,s!==x?B(B(e,"map",[],s.$to_proc()),"to_h",X(r)):B(e.$class().$members(),"each_with_object",[new Map],function t(i,a){var o,v=t.$$s==null?this:t.$$s;return i==null&&(i=x),a==null&&(a=x),o=[i,v["$[]"](i)],B(a,"[]=",o),o[o.length-1]},{$$s:e})},-1),U(h,"$values_at",function(_){var s,n,r=this;s=w(arguments),n=s,n=B(n,"map",[],function(o){return o==null&&(o=x),o.$$is_range?o.$to_a():o}).$flatten();for(var e=[],t=0,i=n.length;t<i;t++)n[t].$$is_number||Z.$raise(E("TypeError"),"no implicit conversion of "+n[t].$class()+" into Integer"),e.push(r["$[]"](n[t]));return e},-1),U(h,"$dig",function(_,s){var n,r,e=this,t=x;return n=w(arguments,1),r=n,t=J(_.$$is_string&&e.$$data.hasOwnProperty(_))&&e.$$data[_]||x,t===x||r.length===0?t:(J(t["$respond_to?"]("dig"))||Z.$raise(E("TypeError"),""+t.$class()+" does not have #dig method"),B(t,"dig",X(r)))},-2),g(h,"size","length"),g(h,"to_s","inspect"),g(h,"values","to_a")}("::",null,R)};Opal.modules["corelib/set"]=function($){var z=$.freeze,w=$.klass,D=$.slice,k=$.defs,ee=$.truthy,J=$.eqeqeq,C=$.Kernel,W=$.send,m=$.def,B=$.eqeq,ie=$.rb_lt,X=$.rb_le,U=$.alias,te=[],Z=$.nil,A=$.$$$;return $.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(p,P,V){var M=w(p,P,"Set"),L=[M].concat(V),g=$.$r(L),q=Z,R=M.$$prototype;R.hash=Z,M.$include(A("Enumerable")),k(M,"$[]",function(u){var d,I,h=this;return d=D(arguments),I=d,h.$new(I)},-1),m(M,"$initialize",function E(u){var d=E.$$p||Z,I=this;return E.$$p=null,u==null&&(u=Z),I.hash=new Map,ee(u["$nil?"]())?Z:(J(A("Enumerable"),u)||C.$raise(A("ArgumentError"),"value must be enumerable"),ee(d)?W(u,"each",[],function h(c){var l=h.$$s==null?this:h.$$s;return c==null&&(c=Z),l.$add($.yield1(d,c))},{$$s:I}):I.$merge(u))},-1),m(M,"$dup",function(){var u=this,d=Z;return d=u.$class().$new(),d.$merge(u)}),m(M,"$-",function(u){var d=this;return ee(u["$respond_to?"]("each"))||C.$raise(A("ArgumentError"),"value must be enumerable"),d.$dup().$subtract(u)}),m(M,"$inspect",function(){var u=this;return"#<Set: {"+u.$to_a().$join(",")+"}>"}),m(M,"$==",function(u){var d=this;return ee(d["$equal?"](u))?!0:ee(u["$instance_of?"](d.$class()))?d.hash["$=="](u.$instance_variable_get("@hash")):ee(u["$is_a?"](A("Set")))&&B(d.$size(),u.$size())?W(u,"all?",[],function I(h){var c=I.$$s==null?this:I.$$s;return c.hash==null&&(c.hash=Z),h==null&&(h=Z),c.hash["$include?"](h)},{$$s:d}):!1}),m(M,"$add",function(u){var d=this;return d.hash["$[]="](u,!0),d}),m(M,"$classify",function E(){var u=E.$$p||Z,d=this,I=Z;return E.$$p=null,u===Z?d.$enum_for("classify"):(I=W(A("Hash"),"new",[],function h(c,l){var y,K=h.$$s==null?this:h.$$s;return c==null&&(c=Z),l==null&&(l=Z),y=[l,K.$class().$new()],W(c,"[]=",y),y[y.length-1]},{$$s:d}),W(d,"each",[],function(c){return c==null&&(c=Z),I["$[]"]($.yield1(u,c)).$add(c)}),I)}),m(M,"$collect!",function E(){var u=E.$$p||Z,d=this,I=Z;return E.$$p=null,u===Z?d.$enum_for("collect!"):(I=d.$class().$new(),W(d,"each",[],function(c){return c==null&&(c=Z),I["$<<"]($.yield1(u,c))}),d.$replace(I))}),m(M,"$compare_by_identity",function(){var u=this;return ee(u.hash["$respond_to?"]("compare_by_identity"))?(u.hash.$compare_by_identity(),u):u.$raise(g("NotImplementedError"),""+u.$class().$name()+"#compare_by_identity is not implemented")}),m(M,"$compare_by_identity?",function(){var u=this,d=Z;return ee(d=u.hash["$respond_to?"]("compare_by_identity?"))?u.hash["$compare_by_identity?"]():d}),m(M,"$delete",function(u){var d=this;return d.hash.$delete(u),d}),m(M,"$delete?",function(u){var d=this;return ee(d["$include?"](u))?(d.$delete(u),d):Z}),m(M,"$delete_if",function E(){var u=E.$$p||Z,d=this;return E.$$p=null,u===Z?d.$enum_for("delete_if"):(W(W(d,"select",[],function(h){return h==null&&(h=Z),$.yield1(u,h)}),"each",[],function I(h){var c=I.$$s==null?this:I.$$s;return c.hash==null&&(c.hash=Z),h==null&&(h=Z),c.hash.$delete(h)},{$$s:d}),d)}),m(M,"$freeze",function(){var u=this;return ee(u["$frozen?"]())?u:(u.hash.$freeze(),z(u))}),m(M,"$keep_if",function E(){var u=E.$$p||Z,d=this;return E.$$p=null,u===Z?d.$enum_for("keep_if"):(W(W(d,"reject",[],function(h){return h==null&&(h=Z),$.yield1(u,h)}),"each",[],function I(h){var c=I.$$s==null?this:I.$$s;return c.hash==null&&(c.hash=Z),h==null&&(h=Z),c.hash.$delete(h)},{$$s:d}),d)}),m(M,"$reject!",function E(){var u=E.$$p||Z,d=this,I=Z;return E.$$p=null,u===Z?d.$enum_for("reject!"):(I=d.$size(),W(d,"delete_if",[],u.$to_proc()),B(d.$size(),I)?Z:d)}),m(M,"$select!",function E(){var u=E.$$p||Z,d=this,I=Z;return E.$$p=null,u===Z?d.$enum_for("select!"):(I=d.$size(),W(d,"keep_if",[],u.$to_proc()),B(d.$size(),I)?Z:d)}),m(M,"$add?",function(u){var d=this;return ee(d["$include?"](u))?Z:d.$add(u)}),m(M,"$each",function E(){var u=E.$$p||Z,d=this;return E.$$p=null,u===Z?d.$enum_for("each"):(W(d.hash,"each_key",[],u.$to_proc()),d)}),m(M,"$empty?",function(){var u=this;return u.hash["$empty?"]()}),m(M,"$eql?",function(u){var d=this;return d.hash["$eql?"](W(u,"instance_eval",[],function I(){var h=I.$$s==null?this:I.$$s;return h.hash==null&&(h.hash=Z),h.hash},{$$s:d}))}),m(M,"$clear",function(){var u=this;return u.hash.$clear(),u}),m(M,"$include?",function(u){var d=this;return d.hash["$include?"](u)}),m(M,"$merge",function(u){var d=this;return W(u,"each",[],function I(h){var c=I.$$s==null?this:I.$$s;return h==null&&(h=Z),c.$add(h)},{$$s:d}),d}),m(M,"$replace",function(u){var d=this;return d.$clear(),d.$merge(u),d}),m(M,"$size",function(){var u=this;return u.hash.$size()}),m(M,"$subtract",function(u){var d=this;return W(u,"each",[],function I(h){var c=I.$$s==null?this:I.$$s;return h==null&&(h=Z),c.$delete(h)},{$$s:d}),d}),m(M,"$|",function(u){var d=this;return ee(u["$respond_to?"]("each"))||C.$raise(A("ArgumentError"),"value must be enumerable"),d.$dup().$merge(u)});function x(E){ee(q=E["$is_a?"](A("Set")))||C.$raise(A("ArgumentError"),"value must be a set")}return m(M,"$superset?",function(u){var d=this;return x(u),ee(ie(d.$size(),u.$size()))?!1:W(u,"all?",[],function I(h){var c=I.$$s==null?this:I.$$s;return h==null&&(h=Z),c["$include?"](h)},{$$s:d})}),m(M,"$proper_superset?",function(u){var d=this;return x(u),ee(X(d.$size(),u.$size()))?!1:W(u,"all?",[],function I(h){var c=I.$$s==null?this:I.$$s;return h==null&&(h=Z),c["$include?"](h)},{$$s:d})}),m(M,"$subset?",function(u){var d=this;return x(u),ee(ie(u.$size(),d.$size()))?!1:W(d,"all?",[],function(h){return h==null&&(h=Z),u["$include?"](h)})}),m(M,"$proper_subset?",function(u){var d=this;return x(u),ee(X(u.$size(),d.$size()))?!1:W(d,"all?",[],function(h){return h==null&&(h=Z),u["$include?"](h)})}),m(M,"$intersect?",function(u){var d=this;return x(u),ee(ie(d.$size(),u.$size()))?W(d,"any?",[],function(h){return h==null&&(h=Z),u["$include?"](h)}):W(u,"any?",[],function I(h){var c=I.$$s==null?this:I.$$s;return h==null&&(h=Z),c["$include?"](h)},{$$s:d})}),m(M,"$disjoint?",function(u){var d=this;return d["$intersect?"](u)["$!"]()}),m(M,"$to_a",function(){var u=this;return u.hash.$keys()}),U(M,"+","|"),U(M,"<","proper_subset?"),U(M,"<<","add"),U(M,"<=","subset?"),U(M,">","proper_superset?"),U(M,">=","superset?"),U(M,"difference","-"),U(M,"filter!","select!"),U(M,"length","size"),U(M,"map!","collect!"),U(M,"member?","include?"),U(M,"union","|")}("::",null,te)};Opal.modules["corelib/dir"]=function($){var z=$.klass,w=$.def,D=$.truthy,k=$.alias,ee=$.nil,J=$.$$$;return $.add_stubs("[],pwd"),function(C,W,m){var B=z(C,W,"Dir");return function(ie,X){return w(ie,"$chdir",function U(te){var Z=U.$$p||ee,A=ee;return U.$$p=null,function(){try{return A=$.current_dir,$.current_dir=te,$.yieldX(Z,[])}finally{$.current_dir=A}}()}),w(ie,"$pwd",function(){return $.current_dir||"."}),w(ie,"$home",function(){var te=ee;return D(te=J("ENV")["$[]"]("HOME"))?te:"."}),k(ie,"getwd","pwd")}($.get_singleton_class(B))}("::",null)};Opal.modules["corelib/file"]=function($){var z=$.truthy,w=$.klass,D=$.const_set,k=$.Opal,ee=$.regexp,J=$.rb_plus,C=$.def,W=$.Kernel,m=$.eqeq,B=$.rb_lt,ie=$.rb_minus,X=$.range,U=$.send,te=$.slice,Z=$.alias,A=[],p=$.nil,P=$.$$$;return $.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),function(V,M,L){var g=w(V,M,"File"),q=[g].concat(L),R=p;return D(q[0],"Separator",D(q[0],"SEPARATOR","/")),D(q[0],"ALT_SEPARATOR",p),D(q[0],"PATH_SEPARATOR",":"),D(q[0],"FNM_SYSCASE",0),R=/^[a-zA-Z]:(?:\\|\/)/,function(x,E){var u=[x].concat(E),d=$.$r(u);C(x,"$absolute_path",function(l,y){var K=p,_=p,s=p,n=p,r=p,e=p,t=p,i=p,a=p,o=p;y==null&&(y=p),K=d("SEPARATOR"),_=h(),s=[],l=z(l["$respond_to?"]("to_path"))?l.$to_path():l,l=k["$coerce_to!"](l,P("String"),"to_str"),y=z(n=y)?n:P("Dir").$pwd(),r=l.substr(0,K.length)===K||R.test(l),e=y.substr(0,K.length)===K||R.test(y),z(r)?(t=l.$split(ee(["[",_,"]"])),i=R.test(l)?"":l.$sub(ee(["^([",_,"]+).*$"]),"\\1"),a=!0):(t=J(y.$split(ee(["[",_,"]"])),l.$split(ee(["[",_,"]"]))),i=R.test(y)?"":y.$sub(ee(["^([",_,"]+).*$"]),"\\1"),a=e);for(var v,S=0,j=t.length;S<j;S++)v=t[S],!(v===p||v===""&&(s.length===0||a)||v==="."&&(s.length===0||a))&&(v===".."?s.pop():s.push(v));return!a&&t[0]!=="."&&s.$unshift("."),o=s.$join(K),z(a)&&(o=J(i,o)),o},-2),C(x,"$expand_path",function(l,y){var K=this,_=p,s=p,n=p,r=p,e=p;return y==null&&(y=p),_=d("SEPARATOR"),s=h(),z(l[0]==="~"||y&&y[0]==="~")&&(n=d("Dir").$home(),z(n)||W.$raise(P("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),r=R.test(n)?"":n.$sub(ee(["^([",s,"]+).*$"]),"\\1"),z(n["$start_with?"](r))||W.$raise(P("ArgumentError"),"non-absolute home"),n=J(n,_),e=ee(["^\\~(?:",_,"|$)"]),l=l.$sub(e,n),z(y)&&(y=y.$sub(e,n))),K.$absolute_path(l,y)},-2);function I(c){return z(c["$respond_to?"]("to_path"))&&(c=c.$to_path()),c=k["$coerce_to!"](c,P("String"),"to_str"),c}function h(){return d("ALT_SEPARATOR")===p?$.escape_regexp(d("SEPARATOR")):$.escape_regexp(J(d("SEPARATOR"),d("ALT_SEPARATOR")))}return C(x,"$dirname",function(l,y){var K=this,_=p;if(y==null&&(y=1),m(y,0))return l;z(B(y,0))&&W.$raise(P("ArgumentError"),"level can't be negative"),_=h(),l=I(l);var s=l.match(new RegExp("^["+_+"]")),n;return l=l.replace(new RegExp("["+_+"]+$"),""),l=l.replace(new RegExp("[^"+_+"]+$"),""),l=l.replace(new RegExp("["+_+"]+$"),""),l===""?n=s?"/":".":n=l,y==1?n:K.$dirname(n,ie(y,1))},-2),C(x,"$basename",function(l,y){var K=p;return y==null&&(y=p),K=h(),l=I(l),l.length==0||(y!==p?y=k["$coerce_to!"](y,P("String"),"to_str"):y=null,l=l.replace(new RegExp("(.)["+K+"]*$"),"$1"),l=l.replace(new RegExp("^(?:.*["+K+"])?([^"+K+"]+)$"),"$1"),y===".*"?l=l.replace(/\.[^\.]+$/,""):y!==null&&(y=$.escape_regexp(y),l=l.replace(new RegExp(""+y+"$"),""))),l},-2),C(x,"$extname",function(l){var y=this,K=p,_=p;return l=I(l),K=y.$basename(l),z(K["$empty?"]())||(_=K["$[]"](X(1,-1,!1)).$rindex("."),z(_["$nil?"]())||m(J(_,1),ie(K.$length(),1)))?"":K["$[]"]($.Range.$new(J(_,1),-1,!1))}),C(x,"$exist?",function(l){return $.modules[l]!=null}),C(x,"$directory?",function(l){var y=p;y=[];for(var K in $.modules)y.push(K);return l=l.$gsub(ee(["(^.",d("SEPARATOR"),"+|",d("SEPARATOR"),"+$)"])),U(y,"find",[],function(s){return s==null&&(s=p),s["$=~"](ee(["^",l]))})}),C(x,"$join",function(l){var y,K,_=p;return y=te(arguments),K=y,z(K["$empty?"]())?"":(_="",K=U(K.$flatten().$each_with_index(),"map",[],function(n,r){return n==null&&(n=p),r==null&&(r=p),m(r,0)&&z(n["$empty?"]())||m(K.$length(),J(r,1))&&z(n["$empty?"]())?d("SEPARATOR"):n}),K=U(K,"reject",[],"empty?".$to_proc()),U(K,"each_with_index",[],function(n,r){var e=p;return n==null&&(n=p),r==null&&(r=p),e=K["$[]"](J(r,1)),z(e["$nil?"]())?_=""+_+n:(z(n["$end_with?"](d("SEPARATOR")))&&z(e["$start_with?"](d("SEPARATOR")))&&(n=n.$sub(ee([d("SEPARATOR"),"+$"]),"")),_=z(n["$end_with?"](d("SEPARATOR")))||z(e["$start_with?"](d("SEPARATOR")))?""+_+n:""+_+n+d("SEPARATOR"))}),_)},-1),C(x,"$split",function(l){return l.$split(d("SEPARATOR"))}),Z(x,"realpath","expand_path"),Z(x,"exists?","exist?")}($.get_singleton_class(g),q)}("::",P("IO"),A)};Opal.modules["corelib/process/base"]=function($){var z=$.klass,w=$.slice,D=$.defs,k=$.return_val,ee=$.nil;return function(J,C){var W=z(J,C,"Signal");return D(W,"$trap",function(B){return w(arguments),ee},-1)}("::",null),function(J,C){var W=z(J,C,"GC");return D(W,"$start",k(ee))}("::",null)};Opal.modules["corelib/process"]=function($){var z=$.module,w=$.defs,D=$.truthy,k=$.return_val,ee=$.Kernel,J=$.nil,C=$.$$$;return $.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function(W){var m=z(W,"Process"),B=J;if(m.__clocks__=[],w(m,"$__register_clock__",function(U,te){var Z=this;return Z.__clocks__==null&&(Z.__clocks__=J),Z.$const_set(U,Z.__clocks__.$size()),Z.__clocks__["$<<"](te)}),m.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),B=!1,$.global.performance)B=function(){return performance.now()};else if($.global.process&&process.hrtime){var ie=process.hrtime();B=function(){var X=process.hrtime(ie),U=X[1]/1e3|0;return X[0]*1e3+U/1e3}}return D(B)&&m.$__register_clock__("CLOCK_MONOTONIC",B),w(m,"$pid",k(0)),w(m,"$times",function(){var U=J;return U=C("Time").$now().$to_f(),C(C("Benchmark"),"Tms").$new(U,U,U,U,U)}),w(m,"$clock_gettime",function(U,te){var Z=this,A=J;Z.__clocks__==null&&(Z.__clocks__=J),te==null&&(te="float_second"),D(A=Z.__clocks__["$[]"](U))||ee.$raise(C(C("Errno"),"EINVAL"),"clock_gettime("+U+") "+Z.__clocks__["$[]"](U));var p=A();switch(te){case"float_second":return p/1e3;case"float_millisecond":return p/1;case"float_microsecond":return p*1e3;case"second":return p/1e3|0;case"millisecond":return p/1|0;case"microsecond":return p*1e3|0;case"nanosecond":return p*1e6|0;default:ee.$raise(C("ArgumentError"),"unexpected unit: "+te)}},-2)}("::")};Opal.modules["corelib/random/formatter"]=function($){var z=$.klass,w=$.module,D=$.def,k=$.range,ee=$.send,J=$.rb_divide,C=$.Kernel,W=$.Opal,m=[],B=$.nil,ie=$.$$$;return $.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),function(X,U,te){var Z=z(X,U,"Random"),A=[Z].concat(te);return function(p,P){var V=w(p,"Formatter"),M=[V].concat(P),L=$.$r(M);return D(V,"$hex",function(q){var R=this;q==null&&(q=B),q=ie("Random").$_verify_count(q);for(var x=R.$bytes(q),E="",u=0;u<q;u++)E+=x.charCodeAt(u).toString(16).padStart(2,"0");return E.$encode("US-ASCII")},-1),D(V,"$random_bytes",function(q){var R=this;return q==null&&(q=B),R.$bytes(q)},-1),D(V,"$base64",function(q){var R=this;return q==null&&(q=B),ie("Base64").$strict_encode64(R.$random_bytes(q)).$encode("US-ASCII")},-1),D(V,"$urlsafe_base64",function(q,R){var x=this;return q==null&&(q=B),R==null&&(R=!1),ie("Base64").$urlsafe_encode64(x.$random_bytes(q),R).$encode("US-ASCII")},-1),D(V,"$uuid",function(){var q=this,R=B;return R=q.$hex(16).$split(""),R["$[]="](12,"4"),R["$[]="](16,(parseInt(R["$[]"](16),16)&3|8).toString(16)),R=[R["$[]"](k(0,8,!0)),R["$[]"](k(8,12,!0)),R["$[]"](k(12,16,!0)),R["$[]"](k(16,20,!0)),R["$[]"](k(20,32,!0))],R=ee(R,"map",[],"join".$to_proc()),R.$join("-")}),D(V,"$random_float",function(){var q=this,R=B,x=B;return R=q.$bytes(4),x=0,ee(4,"times",[],function(u){return u==null&&(u=B),x=x["$<<"](8),x=x["$|"](R["$[]"](u).$ord())}),J(x.$abs(),2147483647)}),D(V,"$random_number",function(q){var R=this;function x(){return R.$random_float()}function E(d){return Math.floor(x()*d)}function u(){var d=q.begin,I=q.end;if(d===B||I===B)return B;var h=I-d;return h<0?B:h===0?d:(I%1===0&&d%1===0&&!q.excl&&h++,E(h)+d)}return q==null?x():q.$$is_range?u():q.$$is_number?(q<=0&&C.$raise(ie("ArgumentError"),"invalid argument - "+q),q%1===0?E(q):x()*q):(q=W["$coerce_to!"](q,ie("Integer"),"to_int"),q<=0&&C.$raise(ie("ArgumentError"),"invalid argument - "+q),E(q))},-1),D(V,"$alphanumeric",function(q){var R=this,x=B;return q==null&&(q=B),q=L("Random").$_verify_count(q),x=ee([k("0","9",!1),k("a","z",!1),k("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),ee(ie("Array"),"new",[q],function E(u){var d=E.$$s==null?this:E.$$s;return x["$[]"](d.$random_number(x.$length()))},{$$s:R}).$join()},-1)}(Z,A),Z.$include(ie(ie("Random"),"Formatter")),Z.$extend(ie(ie("Random"),"Formatter"))}("::",null,m)};Opal.modules["corelib/random/mersenne_twister"]=function($){var z=$.klass,w=$.const_set,D=$.send,k=$.nil,ee=$.$$$,J=k;return $.add_stubs("generator="),J=function(){var C=624,W=397,m=2567483615,B=2147483648,ie=2147483647,X=function(M,L){return M&B|L&ie},U=function(M,L){return X(M,L)>>>1^(L&1?m:0)};function te(M){var L={left:0,next:C,state:new Array(C)};return Z(L,M),L}function Z(M,L){var g;for(M.state[0]=L>>>0,g=1;g<C;g++)M.state[g]=1812433253*(M.state[g-1]^M.state[g-1]>>30>>>0)+g,M.state[g]&=4294967295;M.left=1,M.next=C}function A(M){var L=0,g=M.state,q;for(M.left=C,M.next=0,q=C-W+1;--q;L++)g[L]=g[L+W]^U(g[L+0],g[L+1]);for(q=W;--q;L++)g[L]=g[L+(W-C)]^U(g[L+0],g[L+1]);g[L]=g[L+(W-C)]^U(g[L+0],g[0])}function p(M){var L;return--M.left<=0&&A(M),L=M.state[M.next++],L^=L>>>11,L^=L<<7&2636928640,L^=L<<15&4022730752,L^=L>>>18,L>>>0}function P(M,L){return M>>>=5,L>>>=6,(M*67108864+L)*(1/9007199254740992)}function V(M){var L=p(M),g=p(M);return P(L,g)}return{genrand_real:V,init:te}}(),function(C,W){var m=z(C,W,"Random"),B,ie=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1;return w(m,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*ie)},reseed:function(X){return J.init(X)},rand:function(X){return J.genrand_real(X)}}),B=[ee(m,"MERSENNE_TWISTER_GENERATOR")],D(m,"generator=",B),B[B.length-1]}("::",null)};Opal.modules["corelib/random"]=function($){var z=$.truthy,w=$.klass,D=$.Kernel,k=$.defs,ee=$.Opal,J=$.def,C=$.eqeqeq,W=$.send,m=$.top,B=$.nil,ie=$.$$$;return $.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),m.$require("corelib/random/formatter"),function(X,U){var te=w(X,U,"Random");return te.$attr_reader("seed","state"),k(te,"$_verify_count",function(A){return z(A)||(A=16),typeof A!="number"&&(A=A.$to_int()),A<0&&D.$raise(ie("ArgumentError"),"negative string size (or size too big)"),A=Math.floor(A),A}),J(te,"$initialize",function(A){var p=this;return A==null&&(A=ie("Random").$new_seed()),A=ee["$coerce_to!"](A,ie("Integer"),"to_int"),p.state=A,p.$reseed(A)},-1),J(te,"$reseed",function(A){var p=this;return p.seed=A,p.$rng=$.$$rand.reseed(A)}),k(te,"$new_seed",function(){return $.$$rand.new_seed()}),k(te,"$rand",function(A){var p=this;return ie(p,"DEFAULT").$rand(A)},-1),k(te,"$srand",function(A){var p=this,P=B;return A==null&&(A=ie("Random").$new_seed()),A=ee["$coerce_to!"](A,ie("Integer"),"to_int"),P=ie(p,"DEFAULT").$seed(),ie(p,"DEFAULT").$reseed(A),P},-1),k(te,"$urandom",function(A){return ie("SecureRandom").$bytes(A)}),J(te,"$==",function(A){var p=this,P=B;return C(ie("Random"),A)?z(P=p.$seed()["$=="](A.$seed()))?p.$state()["$=="](A.$state()):P:!1}),J(te,"$bytes",function(A){var p=this;return A=ie("Random").$_verify_count(A),W(ie("Array"),"new",[A],function P(){var V=P.$$s==null?this:P.$$s;return V.$rand(255).$chr()},{$$s:p}).$join().$encode("ASCII-8BIT")}),k(te,"$bytes",function(A){var p=this;return ie(p,"DEFAULT").$bytes(A)}),J(te,"$rand",function(A){var p=this;return p.$random_number(A)},-1),J(te,"$random_float",function(){var A=this;return A.state++,$.$$rand.rand(A.$rng)}),k(te,"$random_float",function(){var A=this;return ie(A,"DEFAULT").$random_float()}),k(te,"$generator=",function(A){var p=this;return $.$$rand=A,z(p["$const_defined?"]("DEFAULT"))?ie(p,"DEFAULT").$reseed():p.$const_set("DEFAULT",p.$new(p.$new_seed()))})}("::",null),m.$require("corelib/random/mersenne_twister")};Opal.modules["corelib/unsupported"]=function($){var z=$.Kernel,w=$.klass,D=$.send,k=$.slice,ee=$.module,J=$.def,C=$.return_val,W=$.alias,m=$.defs,B=$.top,ie=[],X=$.nil,U=$.$$$;$.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var te={};function Z(p){switch($.config.unsupported_features_severity){case"error":z.$raise(U("NotImplementedError"),p);break;case"warning":A(p);break}}function A(p){te[p]||(te[p]=!0,B.$warn(p))}return function(p,P){var V=w(p,P,"String"),M="String#%s not supported. Mutable String methods are not supported in Opal.";return D(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function L(g){var q=L.$$s==null?this:L.$$s;return g==null&&(g=X),D(q,"define_method",[g],function(x){return k(arguments),z.$raise(U("NotImplementedError"),M["$%"](g))},-1)},{$$s:V})}("::",null),function(p){var P=ee(p,"Kernel"),V="Object tainting is not supported by Opal";return J(P,"$taint",function(){var L=this;return Z(V),L}),J(P,"$untaint",function(){var L=this;return Z(V),L}),J(P,"$tainted?",function(){return Z(V),!1})}("::"),function(p,P){var V=w(p,P,"Module");return J(V,"$public",function(L){var g,q,R=this;return g=k(arguments),q=g,q.length===0?(R.$$module_function=!1,X):q.length===1?q[0]:q},-1),J(V,"$private_class_method",function(L){var g,q;return g=k(arguments),q=g,q.length===1?q[0]:q},-1),J(V,"$private_method_defined?",C(!1)),J(V,"$private_constant",function(L){return k(arguments),X},-1),W(V,"nesting","public"),W(V,"private","public"),W(V,"protected","public"),W(V,"protected_method_defined?","private_method_defined?"),W(V,"public_class_method","private_class_method"),W(V,"public_instance_method","instance_method"),W(V,"public_instance_methods","instance_methods"),W(V,"public_method_defined?","method_defined?")}("::",null),function(p){var P=ee(p,"Kernel");return J(P,"$private_methods",function(M){return k(arguments),[]},-1),W(P,"protected_methods","private_methods"),W(P,"private_instance_methods","private_methods"),W(P,"protected_instance_methods","private_methods")}("::"),function(p,P){var V=ee(p,"Kernel"),M=[V].concat(P),L=$.$r(M);return J(V,"$eval",function(q){return k(arguments),z.$raise(U("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. "+("See https://github.com/opal/opal/blob/"+L("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details."))},-1)}("::",ie),m(B,"$public",function(P){var V,M;return V=k(arguments),M=V,M.length===1?M[0]:M},-1),m(B,"$private",function(P){var V,M;return V=k(arguments),M=V,M.length===1?M[0]:M},-1)};Opal.modules["corelib/binding"]=function($){var z=$.klass,w=$.truthy,D=$.def,k=$.slice,ee=$.send,J=$.to_a,C=$.Kernel,W=$.return_ivar,m=$.eqeq;$.thrower;var B=$.module,ie=$.const_set,X=$.top,U=[],te=$.nil,Z=$.$$$;return $.add_stubs("js_eval,call,raise,inspect,include?,==,receiver,eval,attr_reader,new"),function(A,p){var P=z(A,p,"Binding"),V=P.$$prototype;return V.jseval=V.scope_variables=te,D(P,"$initialize",function(L,g,q,R){var x,E=this;return g==null&&(g=[]),R==null&&(R=te),x=[L,g,q,R],E.jseval=x[0],E.scope_variables=x[1],E.receiver=x[2],E.source_location=x[3],w(typeof q!==void 0)?te:q=E.$js_eval("self")},-2),D(P,"$js_eval",function(L){var g,q,R=this;return g=k(arguments),q=g,w(R.jseval)?ee(R.jseval,"call",J(q)):C.$raise("Evaluation on a Proc#binding is not supported")},-1),D(P,"$local_variable_get",function(L){var g=this;try{return g.$js_eval(L)}catch(q){if($.rescue(q,[Z("Exception")]))try{return C.$raise(Z("NameError"),"local variable `"+L+"' is not defined for "+g.$inspect())}finally{$.pop_exception(q)}else throw q}}),D(P,"$local_variable_set",function(L,g){var q=this;return $.Binding.tmp_value=g,q.$js_eval(""+L+" = Opal.Binding.tmp_value"),delete $.Binding.tmp_value,g}),D(P,"$local_variables",W("scope_variables")),D(P,"$local_variable_defined?",function(L){var g=this;return g.scope_variables["$include?"](L)}),D(P,"$eval",function(L,g,q){try{var R=this;return g==null&&(g=te),q==null&&(q=te),m(L,"self")?R.$receiver():C.$eval(L,R,g,q)}catch(x){if(x===$.t_eval_return)return x.$v;throw x}},-2),P.$attr_reader("receiver","source_location")}("::",null),function(A){var p=B(A,"Kernel");return D(p,"$binding",function(){return C.$raise("Opal doesn't support dynamic calls to binding")})}("::"),ie(U[0],"TOPLEVEL_BINDING",Z("Binding").$new(function(A){return new Function("self","return "+A)(X)},[],X,["<main>",0]))};Opal.modules["corelib/irb"]=function($){var z=$.module,w=$.truthy,D=$.Kernel,k=$.defs,ee=$.gvars,J=$.lambda,C=$.hash_rehash,W=$.send,m=$.rb_plus,B=$.const_set,ie=$.klass,X=$.def,U=$.Opal,te=$.range,Z=$.eqeq,A=$.thrower,p=[],P=$.nil,V=$.$$$;$.add_stubs("include?,raise,attr_accessor,singleton_class,output=,browser?,each,dup,write_proc=,proc,+,output,join,last,split,end_with?,call,write_proc,tty=,read_proc,read_proc=,freeze,new,string,ensure_loaded,prepare_console,loop,print,gets,puts,start_with?,[],==,silence,message,empty?,warnings,warn,full_message,eval_and_print,irb"),function(M,L){var g=z(M,"Opal"),q=[g].concat(L);return function(R,x){var E=z(R,"IRB"),u=[E].concat(x),d=$.$r(u);return k(E,"$ensure_loaded",function(h){var c=P,l=P;if(w($.loaded_features["$include?"](h)))return P;c=w(d("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":d("RUBY_ENGINE_VERSION"),l="https://cdn.opalrb.com/opal/"+c+"/"+h+".js";var y;if(typeof XMLHttpRequest<"u"){var K=new XMLHttpRequest;K.open("GET",l,!1),K.send(""),y=K.responseText}else D.$raise("You need to provision "+h+" yourself in this environment");return new Function("Opal",y)($),$.require(h),w($.loaded_features["$include?"](h))?P:D.$raise("Could not load "+h+" for some reason")}),E.$singleton_class().$attr_accessor("output"),k(E,"$prepare_console",function I(){var h=I.$$p||P,c,l=this,y=P,K=P;return ee.stdout==null&&(ee.stdout=P),ee.stderr==null&&(ee.stderr=P),ee.stdin==null&&(ee.stdin=P),I.$$p=null,function(){try{return l["$output="](""),y=C(new Map([[ee.stdout,J(function(s){return s==null&&(s=P),ee.stdout=s})],[ee.stderr,J(function(s){return s==null&&(s=P),ee.stderr=s})]])),w(l["$browser?"]())&&(W(y,"each",[],function _(s,n){var r=_.$$s==null?this:_.$$s,e=P;return s==null&&(s=P),n==null&&(n=P),e=s.$dup(),e["$write_proc="](W(r,"proc",[],function t(i){var a=t.$$s==null?this:t.$$s;return i==null&&(i=P),a["$output="](m(a.$output(),i)),a["$output="](a.$output().$split(`
`).$last(30).$join(`
`)),w(i["$end_with?"](`
`))&&a["$output="](m(a.$output(),`
`)),s.$write_proc().$call(i)},{$$s:r})),e["$tty="](!1),n.$call(e)},{$$s:l}),K=ee.stdin.$read_proc(),ee.stdin["$read_proc="](function(_){var s=prompt(l.$output());return s!==null?s+`
`:P})),$.yieldX(h,[])}finally{W(y,"each",[],function(s,n){return s==null&&(s=P),n==null&&(n=P),n.$call(s)}),c=[K],W(ee.stdin,"read_proc=",c),c[c.length-1],c=[""],W(l,"output=",c),c[c.length-1]}}()}),k(E,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),B(u[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),function(I,h){var c=ie(I,h,"Silencer"),l=c.$$prototype;return l.collector=l.stderr=P,X(c,"$initialize",function(){var K=this;return ee.stderr==null&&(ee.stderr=P),K.stderr=ee.stderr}),X(c,"$silence",function y(){var K=y.$$p||P,_=this;return y.$$p=null,function(){try{return _.collector=V("StringIO").$new(),ee.stderr=_.collector,$.yieldX(K,[])}finally{ee.stderr=_.stderr}}()}),X(c,"$warnings",function(){var K=this;return K.collector.$string()})}(u[0],null)}(q[0],q)}(p[0],p),function(M,L,g){var q=ie(M,L,"Binding"),R=[q].concat(g),x=$.$r(R);return X(q,"$irb",function(){try{var u=A("return"),d=this,I=P;return V(U,"IRB").$ensure_loaded("opal-replutils"),I=V(V(U,"IRB"),"Silencer").$new(),W(V(U,"IRB"),"prepare_console",[],function h(){var c=h.$$s==null?this:h.$$s;return function(){try{var l=A("break");return W(c,"loop",[],function y(){var K=y.$$s==null?this:y.$$s,_=P,s=P,n=P,r=P,e=P;K.$print(">> "),_=K.$gets(),w(_)||l.$throw(P,y.$$is_lambda),s="",w(V(U,"IRB")["$browser?"]())&&K.$puts(_),w(_["$start_with?"]("ls "))?(s=_["$[]"](te(3,-1,!1)),n="ls"):Z(_,`ls
`)?(s="self",n="ls"):w(_["$start_with?"]("show "))?(s=_["$[]"](te(5,-1,!1)),n="show"):(s=_,n="inspect"),r=P;do{try{W(I,"silence",[],function(){return r=$.compile(s,{irb:!0})})}catch(t){if($.rescue(t,[x("SyntaxError")])){e=t;try{if(w(V(V(U,"IRB"),"LINEBREAKS")["$include?"](e.$message()))){K.$print(".. "),_=K.$gets(),w(_)||u.$throw(P,y.$$is_lambda),w(V(U,"IRB")["$browser?"]())&&K.$puts(_),s=m(s,_);continue}else w(I.$warnings()["$empty?"]())?K.$warn(e.$full_message()):K.$warn(I.$warnings())}finally{$.pop_exception(t)}}else throw t}break}while(!0);return Z(n,"show")&&(K.$puts(r),u.$throw(P,y.$$is_lambda)),K.$puts(V("REPLUtils").$eval_and_print(r,n,!1,K))},{$$s:c,$$ret:u})}catch(y){if(y===l)return y.$v;throw y}finally{l.is_orphan=!0}}()},{$$s:d})}catch(h){if(h===u)return h.$v;throw h}finally{u.is_orphan=!0}})}("::",null,p),$.irb=function(M){V("Binding").$new(M).$irb()},$.load_parser=function(){$.Opal.IRB.$ensure_loaded("opal-parser")},typeof $.eval>"u"&&($.eval=function(M){return $.load_parser(),$.eval(M)}),typeof $.compile>"u"&&($.compile=function(M,L){return $.load_parser(),$.compile(M,L)})};Opal.modules.opal=function($){var z=$.Object;return $.nil,$.add_stubs("require,autoload"),z.$require("opal/base"),z.$require("opal/mini"),z.$require("corelib/kernel/format"),z.$require("corelib/string/encoding"),z.$autoload("Math","corelib/math"),z.$require("corelib/complex/base"),z.$autoload("Complex","corelib/complex"),z.$require("corelib/rational/base"),z.$autoload("Rational","corelib/rational"),z.$require("corelib/time"),z.$autoload("Struct","corelib/struct"),z.$autoload("Set","corelib/set"),z.$autoload("Dir","corelib/dir"),z.$autoload("File","corelib/file"),z.$require("corelib/process/base"),z.$autoload("Process","corelib/process"),z.$autoload("Random","corelib/random"),z.$require("corelib/unsupported"),z.$require("corelib/binding"),z.$require("corelib/irb")};Opal.modules["js/proxy"]=function($){var z=$.module,w=$.truthy,D=$.def,k=$.klass,ee=$.const_set,J=$.slice,C=$.range,W=$.send,m=$.to_a,B=$.gvars,ie=$.top,X=[],U=$.nil;return $.add_stubs("require,new,to_n,to_rb_name,include,attr_accessor,Native,to_js_name,end_with?,existing_property?,raise,[],[]=,first,native,dup,call,class,<<,wrap_result,respond_to?,enum_for,length,each,private,join,with_index,map,split,to_s,include?,downcase,gsub,upcase,zero?,capitalize,sub,native="),ie.$require("opal"),ie.$require("native"),function(te,Z){var A=z(te,"JS"),p=[A].concat(Z),P=$.$r(p);return function(V,M){var L=z(V,"Helpers"),g=[L].concat(M),q=$.$r(g);return D(L,"$wrap_result",function(x){return w(x&&typeof x.then=="function")?q("Promise").$new(x):w(typeof x=="object"&&x!==null)?q("Proxy").$new(x):x}),D(L,"$native_methods",function(){var x=this,E=U;return x.native_methods==null&&(x.native_methods=U),x.native_methods=function(){if(w(E=x.native_methods))return E;{let u=x.$to_n();const d=new Set;for(;u!==null;){for(const I of Reflect.ownKeys(u)){const h=I.toString(),c=x.$to_rb_name(h);typeof I!="symbol"&&h!==c&&d.add(c),d.add(h)}u=Object.getPrototypeOf(u)}return Array.from(d)}}()})}(p[0],p),function(V,M,L){var g=k(V,M,"Proxy"),q=[g].concat(L),R=$.$r(q);return g.$include(R("Enumerable")),g.$include(R("Helpers")),g.$attr_accessor("native"),ee(q[0],"IRREGULARS",["html","url","uri"]),D(g,"$initialize",function(E){var u=this;return u.native=u.$Native(E)}),D(g,"$method_missing",function x(E,u){var d=x.$$p||U,I,h,c,l=this,y=U,K=U,_=U,s=U,n=U,r=U;return x.$$p=null,I=J(arguments,1),h=I,y=l.$to_js_name(E),w(l["$existing_property?"](y))||w(y["$end_with?"]("="))||l.$raise(R("NoMethodError"),"undefined method `"+E+"` for "+l),w(y["$end_with?"]("="))?(K=y["$[]"](C(0,-2,!1)),c=[K,h.$first()],W(l.$native(),"[]=",c),c[c.length-1]):(_=l.$native()["$[]"](y),w(typeof _=="function")?(s=h.$dup(),w(d)&&(n=function(){let e=Array.prototype.slice.call(arguments);return W(d,"call",[l.$class().$new(this)].concat(m(e)))},s["$<<"](n)),r=_.apply(l.$to_n(),s.$to_n()),l.$wrap_result(r)):w(typeof _=="object"&&_!==null)?l.$wrap_result(_):_)},-2),D(g,"$to_str",function(){var E=this;return E.$to_n().toString()}),D(g,"$respond_to_missing?",function(E,u){return!0},-2),D(g,"$each",function x(){var E=x.$$p||U,u=this,d=U;return x.$$p=null,w(u["$respond_to?"]("length"))?(d=u.$length(),W($.Range.$new(0,d,!0),"each",[],function I(h){var c=I.$$s==null?this:I.$$s;return h==null&&(h=U),$.yield1(E,c["$[]"](h))},{$$s:u})):u.$enum_for("each")}),D(g,"$[]",function(E){var u=this,d=U;return d=u.$native()["$[]"](E),u.$wrap_result(d)}),D(g,"$[]=",function(E,u){var d=this;return d.$native()["$[]="](E,u),d.$wrap_result(d.$native())}),D(g,"$to_n",function(){var E=this;return E.$native().$to_n()}),D(g,"$length",function(){var E=this;return E.$native().$length()}),g.$private(),D(g,"$to_js_name",function(E){return W(E.$to_s().$split("_").$map(),"with_index",[],function(d,I){return d==null&&(d=U),I==null&&(I=U),w(R("IRREGULARS")["$include?"](d.$gsub("=","").$downcase()))?d.$upcase():w(I["$zero?"]())?d:d.$capitalize()}).$join()}),D(g,"$to_rb_name",function(E){return W(E.$to_s(),"gsub",[/([A-Z]+)/],function(){var d;return"_"+((d=B["~"])===U?U:d["$[]"](1)).$downcase()}).$sub(/^_/,"")}),D(g,"$existing_property?",function(E){var u=this;return E in u.$to_n()})}(p[0],null,p),function(V,M,L){var g=k(V,M,"Promise"),q=[g].concat(L),R=$.$r(q);return g.$include(R("Helpers")),D(g,"$then",function x(){var E=x.$$p||U,u,d=this,I=U;return x.$$p=null,I=function(h){var c=E.$call(d.$wrap_result(h));return c&&typeof c.then=="function"?c:c&&typeof c.to_n=="function"?c.to_n():c},u=[d.$to_n().then(I)],W(d,"native=",u),u[u.length-1]}),D(g,"$catch",function x(){var E=x.$$p||U,u,d=this,I=U;return x.$$p=null,I=function(h){var c=E.$call(d.$wrap_result(h));return c&&typeof c.then=="function"?c:c&&typeof c.to_n=="function"?c.to_n():c},u=[d.$to_n().catch(I)],W(d,"native=",u),u[u.length-1]})}(p[0],P("Proxy"),p)}(X[0],X)};Opal.modules["opal_stimulus/stimulus_controller"]=function($){var z=$.klass,w=$.const_set,D=$.Opal,k=$.defs,ee=$.truthy,J=$.send,C=$.gvars,W=$.return_val,m=$.thrower,B=$.rb_plus,ie=$.eqeqeq,X=$.def,U=$.top,te=[],Z=$.nil,A=$.$$$;return $.add_stubs("require,bridge,stimulus_controller,downcase,gsub,name,include?,sub,to_s,each,subclasses,define_method,stimulus_name,to_ruby_name,+,new,map,capitalize,===,raise,[]=,to_n,Native,==,window,document"),U.$require("opal"),U.$require("native"),U.$require("js/proxy"),function(p,P,V){var M=z(p,P,"StimulusController"),L=[M].concat(V),g=$.$r(L),q=M.$$prototype;return q.window=q.document=Z,w(L[0],"DEFAULT_METHODS",["initialize","connect","disconnect","dispatch"]),w(L[0],"DEFAULT_GETTERS",["element"]),k(M,"$inherited",function(x){return D.$bridge(x.$stimulus_controller(),x)}),k(M,"$stimulus_controller",function(){var x=this;return x.stimulus_controller==null&&(x.stimulus_controller=Z),ee(x.stimulus_controller)||(x.stimulus_controller=class extends Controller{}),x.stimulus_controller}),k(M,"$stimulus_name",function(){var x=this;return x.$name().$gsub(/Controller$/,"").$gsub(/([a-z])([A-Z])/,"\\1-\\2").$gsub("::","--").$downcase()}),k(M,"$method_added",function(x){var E=this;if(ee(g("DEFAULT_GETTERS")["$include?"](x)))return Z;E.$stimulus_controller().prototype[x]=function(...u){try{var d=u.map(function(I){return I&&typeof I=="object"&&!I.$$class?$.JS.Proxy.$new(I):I});return this["$"+x].apply(this,d)}catch(I){console.error("Uncaught",I)}}}),k(M,"$to_ruby_name",function(x){return J(x.$to_s(),"gsub",[/([A-Z]+)/],function(){var u;return"_"+((u=C["~"])===Z?Z:u["$[]"](1)).$downcase()}).$sub(/^_/,"")}),k(M,"$register_all!",function(){try{var x=m("return"),E=this;return J(E.$subclasses(),"each",[],function u(d){return d==null&&(d=Z),J(d,"define_method",["dummy"],W(Z)),ee(application.controllers["$include?"](d.$stimulus_name()))&&x.$throw(Z,u.$$is_lambda),application.register(d.$stimulus_name(),d.$stimulus_controller())},{$$ret:x})}catch(u){if(u===x)return u.$v;throw u}finally{x.is_orphan=!0}}),k(M,"$targets=",function(x){var E=this;return x==null&&(x=[]),E.$stimulus_controller().targets=x,J(x,"each",[],function u(d){var I=u.$$s==null?this:u.$$s,h=Z,c=Z,l=Z,y=Z,K=Z,_=Z;d==null&&(d=Z),h=d.$to_s(),c=I.$to_ruby_name(d),J(I,"define_method",[B(c,"_target")],function(){return A(g("JS"),"Proxy").$new(this[B(h,"Target")])}),J(I,"define_method",[B(c,"_targets")],function(){return J(this[B(h,"Targets")],"map",[],function(r){return r==null&&(r=Z),A(g("JS"),"Proxy").$new(r)})}),J(I,"define_method",[B(B("has_",c),"_target")],function(){return this[B(B("has",h.$capitalize()),"Target")]}),l=B(c,"_target_connected"),y=B(h,"TargetConnected"),I.$stimulus_controller().prototype[y]=function(){if(this["$respond_to?"]&&this["$respond_to?"](l))return this["$"+l]()},K=B(c,"_target_disconnected"),_=B(h,"TargetDisconnected"),I.$stimulus_controller().prototype[_]=function(){if(this["$respond_to?"]&&this["$respond_to?"](K))return this["$"+K]()}},{$$s:E})},-1),k(M,"$outlets=",function(x){var E=this;return x==null&&(x=[]),E.$stimulus_controller().outlets=x,J(x,"each",[],function u(d){var I=u.$$s==null?this:u.$$s,h=Z,c=Z,l=Z,y=Z,K=Z,_=Z;d==null&&(d=Z),h=d.$to_s(),c=I.$to_ruby_name(d),J(I,"define_method",[B(c,"_outlet")],function(){return this[B(h,"Outlet")]}),J(I,"define_method",[B(c,"_outlets")],function(){return this[B(h,"Outlets")]}),J(I,"define_method",[B(B("has_",c),"_outlet")],function(){return this[B(B("has",h.$capitalize()),"Outlet")]}),l=B(c,"_outlet_connected"),y=B(h,"OutletConnected"),I.$stimulus_controller().prototype[y]=function(){if(this["$respond_to?"]&&this["$respond_to?"](l))return this["$"+l]()},K=B(c,"_outlet_disconnected"),_=B(h,"OutletDisconnected"),I.$stimulus_controller().prototype[_]=function(){if(this["$respond_to?"]&&this["$respond_to?"](K))return this["$"+K]()}},{$$s:E})},-1),k(M,"$values=",function(x){var E=this,u=Z;return x==null&&(x=new Map),u=new Map,J(x,"each",[],function d(I,h){var c=d.$$s==null?this:d.$$s,l=Z,y=Z,K=Z,_=Z;I==null&&(I=Z),h==null&&(h=Z),I=c.$to_ruby_name(I),l=ie("string",y=h)?String:ie("number",y)?Number:ie("boolean",y)?Boolean:ie("array",y)?Array:ie("object",y)?Object:c.$raise(g("ArgumentError"),"Unsupported value type: "+h+", please use :string, :number, :boolean, :array, or :object"),u["$[]="](I,l),c.$stimulus_controller().values=u.$to_n(),J(c,"define_method",[B(I,"_value")],function s(){var n=s.$$s==null?this:s.$$s;return n.$Native(this[B(I,"Value")])},{$$s:c}),J(c,"define_method",[B(I,"_value=")],function s(n){var r=s.$$s==null?this:s.$$s;return n==null&&(n=Z),r.$Native(this[B(I,"Value")]=n)},{$$s:c}),J(c,"define_method",["has_"+I],function(){return this[B(B("has",I.$to_s().$capitalize()),"Value")]}),K=""+I+"_value_changed",_=""+I+"ValueChanged",c.$stimulus_controller().prototype[_]=function(s,n){if(h["$=="]("object")&&(s=JSON.stringify(s),n=JSON.stringify(n)),this["$respond_to?"]&&this["$respond_to?"](K))return this["$"+K](s,n)}},{$$s:E})},-1),k(M,"$classes=",function(x){var E=this;return x==null&&(x=[]),E.$stimulus_controller().classes=x,J(x,"each",[],function u(d){var I=u.$$s==null?this:u.$$s,h=Z,c=Z;return d==null&&(d=Z),h=d.$to_s(),c=I.$to_ruby_name(d),J(I,"define_method",[""+c+"_class"],function(){return this[B(h,"Class")]}),J(I,"define_method",[""+c+"_classes"],function(){return this[B(h,"Classes")]}),J(I,"define_method",["has_"+c+"_class"],function(){return this[B(B("has",h.$capitalize()),"Class")]})},{$$s:E})},-1),X(M,"$element",function(){return A(g("JS"),"Proxy").$new(this.element)}),X(M,"$window",function(){var x=this,E=Z;return C.$==null&&(C.$=Z),x.window=ee(E=x.window)?E:A(g("JS"),"Proxy").$new(C.$.$window())}),X(M,"$document",function(){var x=this,E=Z;return C.$==null&&(C.$=Z),x.document=ee(E=x.document)?E:A(g("JS"),"Proxy").$new(C.$.$document())})}(te[0],Controller,te)};Opal.modules["opal_vite/concerns/v1/stimulus_helpers"]=function($){var z=$.module,w=$.def,D=$.truthy,k=$.eqeq,ee=$.send,J=$.slice,C=$.ensure_kwargs,W=$.get_kwarg,m=$.hash_get,B=$.rb_plus,ie=$.rb_minus,X=$.to_a,U=$.range,te=$.const_set,Z=[],A=$.$r(Z),p=$.nil,P=$.$$$;return $.add_stubs("camelize,has_target?,target_set_value,target_set_html,set_target_style,get_target_style,==,show_target,hide_target,call,body_style,to_n,storage_get,is_a?,parse_int,event_data,to_native_element,Native,map,to_a,js_timestamp,is_nan?,parse_float,to_s,empty?,respond_to?,fetch_json_promise,fetch_json_safe,js_then,js_catch,console_error,set_stimulus_value,+,stimulus_value,-,!,get_class,get_classes,has_outlet?,get_outlet,js_call_on,each,get_outlets,nil?,stimulus_dispatch,action_param,[],[]=,flatten,to_proc,blank?,private,include?,upcase,downcase,split,join,first"),function(V,M){var L=z(V,"OpalVite"),g=[L].concat(M);return function(q,R){var x=z(q,"Concerns"),E=[x].concat(R);return function(u,d){var I=z(u,"V1"),h=[I].concat(d);return function(c,l){var y=z(c,"StimulusHelpers"),K=[y].concat(l),_=$.$r(K);return w(y,"$has_target?",function(n){var r=this,e=p;return e="has"+r.$camelize(n)+"Target",this[e]}),w(y,"$get_target",function(n){var r=this,e=p;return D(r["$has_target?"](n))?(e=""+r.$camelize(n,!1)+"Target",this[e]):p}),w(y,"$get_targets",function(n){var r=this,e=p;return e=""+r.$camelize(n,!1)+"Targets",Array.from(this[e]||[])}),w(y,"$target_value",function(n){var r=this,e=p;return D(r["$has_target?"](n))?(e=""+r.$camelize(n,!1)+"Target",this[e].value):p}),w(y,"$target_set_value",function(n,r){var e=this,t=p;return D(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].value=r):p}),w(y,"$target_html",function(n){var r=this,e=p;return D(r["$has_target?"](n))?(e=""+r.$camelize(n,!1)+"Target",this[e].innerHTML):p}),w(y,"$target_set_html",function(n,r){var e=this,t=p;return D(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].innerHTML=r):p}),w(y,"$target_text",function(n){var r=this,e=p;return D(r["$has_target?"](n))?(e=""+r.$camelize(n,!1)+"Target",this[e].textContent):p}),w(y,"$target_set_text",function(n,r){var e=this,t=p;return D(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].textContent=r):p}),w(y,"$target_data",function(n,r){var e=this,t=p;return D(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].getAttribute("data-"+r)):p}),w(y,"$target_set_data",function(n,r,e){var t=this,i=p;return D(t["$has_target?"](n))?(i=""+t.$camelize(n,!1)+"Target",this[i].setAttribute("data-"+r,e)):p}),w(y,"$target_clear",function(n){var r=this;return r.$target_set_value(n,"")}),w(y,"$target_clear_html",function(n){var r=this;return r.$target_set_html(n,"")}),w(y,"$set_target_style",function(n,r,e){var t=this,i=p;return D(t["$has_target?"](n))?(i=""+t.$camelize(n,!1)+"Target",this[i].style[r]=e):p}),w(y,"$get_target_style",function(n,r){var e=this,t=p;return D(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].style[r]):p}),w(y,"$show_target",function(n){var r=this;return r.$set_target_style(n,"display","")}),w(y,"$hide_target",function(n){var r=this;return r.$set_target_style(n,"display","none")}),w(y,"$toggle_target_visibility",function(n){var r=this,e=p;return e=r.$get_target_style(n,"display"),k(e,"none")?r.$show_target(n):r.$hide_target(n)}),w(y,"$add_target_class",function(n,r){var e=this,t=p;return D(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].classList.add(r)):p}),w(y,"$remove_target_class",function(n,r){var e=this,t=p;return D(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].classList.remove(r)):p}),w(y,"$toggle_target_class",function(n,r){var e=this,t=p;return D(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].classList.toggle(r)):p}),w(y,"$has_target_class?",function(n,r){var e=this,t=p;return D(e["$has_target?"](n))?(t=""+e.$camelize(n,!1)+"Target",this[t].classList.contains(r)):!1}),w(y,"$js_timestamp",function(){return Date.now()}),w(y,"$js_iso_date",function(){return new Date().toISOString()}),w(y,"$js_date",function(n){return n==null&&(n=p),D(n)?new Date(n):new Date},-1),w(y,"$js_regexp",function(n,r){return r==null&&(r=""),new RegExp(n,r)},-2),w(y,"$js_regexp_test",function(n,r,e){return e==null&&(e=""),new RegExp(n,e).test(r)},-3),w(y,"$set_timeout",function s(n){var r=s.$$p||p;return s.$$p=null,setTimeout(function(){r.$call()},n)}),w(y,"$set_interval",function s(n){var r=s.$$p||p;return s.$$p=null,setInterval(function(){r.$call()},n)}),w(y,"$clear_timeout",function(n){return clearTimeout(n)}),w(y,"$clear_interval",function(n){return clearInterval(n)}),w(y,"$body_style",function(n,r){return document.body.style[n]=r}),w(y,"$lock_body_scroll",function(){var n=this;return n.$body_style("overflow","hidden")}),w(y,"$unlock_body_scroll",function(){var n=this;return n.$body_style("overflow","")}),w(y,"$js_array",function(){return[]}),w(y,"$js_array_push",function(n,r){return n.push(r.$to_n())}),w(y,"$js_array_length",function(n){return n.length}),w(y,"$js_array_at",function(n,r){return n[r]}),w(y,"$storage_get",function(n){return localStorage.getItem(n)}),w(y,"$storage_set",function(n,r){return localStorage.setItem(n,r)}),w(y,"$storage_remove",function(n){return localStorage.removeItem(n)}),w(y,"$storage_get_json",function(n,r){var e=this,t=p;return r==null&&(r=p),t=e.$storage_get(n),D(t===null)?r:JSON.parse(t)},-2),w(y,"$storage_set_json",function(n,r){return localStorage.setItem(n,JSON.stringify(r.$to_n()))}),w(y,"$dispatch_window_event",function(n,r){var e=p;r==null&&(r=new Map),e=D(r["$is_a?"](_("Hash")))?r.$to_n():r;const t=new CustomEvent(n,{detail:e});window.dispatchEvent(t)},-2),w(y,"$dispatch_event",function(n,r){var e=p;r==null&&(r=new Map),e=D(r["$is_a?"](_("Hash")))?r.$to_n():r;const t=new CustomEvent(n,{detail:e});this.element.dispatchEvent(t)},-2),w(y,"$on_window_event",function s(n){var r=s.$$p||p;return s.$$p=null,window.addEventListener(n,r)}),w(y,"$off_window_event",function(n,r){return window.removeEventListener(n,r)}),w(y,"$on_document_event",function s(n){var r=s.$$p||p;return s.$$p=null,document.addEventListener(n,r)}),w(y,"$on_dom_ready",function s(){var n=s.$$p||p;return s.$$p=null,document.addEventListener("DOMContentLoaded",n)}),w(y,"$on_element_event",function s(n,r){var e=s.$$p||p;return s.$$p=null,n.addEventListener(r,e)}),w(y,"$off_element_event",function(n,r,e){return n.removeEventListener(r,e)}),w(y,"$on_controller_event",function s(n){var r=s.$$p||p;return s.$$p=null,this.element.addEventListener(n,r)}),w(y,"$event_target",function(){return event.currentTarget}),w(y,"$event_data",function(n){return event.currentTarget.getAttribute("data-"+n)}),w(y,"$event_data_int",function(n){var r=this;return r.$parse_int(r.$event_data(n))}),w(y,"$prevent_default",function(){return event.preventDefault()}),w(y,"$event_key",function(){return event.key}),w(y,"$to_native_element",function(n){return D(typeof n.$to_n=="function")?n.$to_n():n}),w(y,"$add_class",function(n,r){var e=this,t=p;return t=e.$to_native_element(n),t.classList.add(r)}),w(y,"$remove_class",function(n,r){var e=this,t=p;return t=e.$to_native_element(n),t.classList.remove(r)}),w(y,"$toggle_class",function(n,r){var e=this,t=p;return t=e.$to_native_element(n),t.classList.toggle(r)}),w(y,"$has_class?",function(n,r){var e=this,t=p;return t=e.$to_native_element(n),t.classList.contains(r)}),w(y,"$set_attr",function(n,r,e){var t=this,i=p;return i=t.$to_native_element(n),i.setAttribute(r,e)}),w(y,"$get_attr",function(n,r){var e=this,t=p;return t=e.$to_native_element(n),t.getAttribute(r)}),w(y,"$remove_attr",function(n,r){var e=this,t=p;return t=e.$to_native_element(n),t.removeAttribute(r)}),w(y,"$set_style",function(n,r,e){var t=this,i=p;return i=t.$to_native_element(n),i.style[r]=e}),w(y,"$set_html",function(n,r){var e=this,t=p;return t=e.$to_native_element(n),t.innerHTML=r}),w(y,"$set_text",function(n,r){var e=this,t=p;return t=e.$to_native_element(n),t.textContent=r}),w(y,"$get_value",function(n){var r=this,e=p;return e=r.$to_native_element(n),e.value}),w(y,"$set_value",function(n,r){var e=this,t=p;return t=e.$to_native_element(n),t.value=r}),w(y,"$focus",function(n){var r=this,e=p;return e=r.$to_native_element(n),e.focus()}),w(y,"$has_attr?",function(n,r){var e=this,t=p;return t=e.$to_native_element(n),t.hasAttribute(r)}),w(y,"$create_element",function(n){return document.createElement(n)}),w(y,"$append_child",function(n,r){var e=this,t=p,i=p;return t=e.$to_native_element(n),i=e.$to_native_element(r),t.appendChild(i)}),w(y,"$remove_element",function(n){var r=this,e=p;return e=r.$to_native_element(n),e.remove()}),w(y,"$next_sibling",function(n){var r=this,e=p;return e=r.$to_native_element(n),e.nextElementSibling}),w(y,"$prev_sibling",function(n){var r=this,e=p;return e=r.$to_native_element(n),e.previousElementSibling}),w(y,"$parent",function(n){var r=this,e=p;return e=r.$to_native_element(n),e.parentElement}),w(y,"$query",function(n){var r=this,e=p;return e=document.querySelector(n),D(e===null)?p:r.$Native(e)}),w(y,"$query_all",function(n){var r=this,e=p;return e=Array.from(document.querySelectorAll(n)),ee(r.$Native(e).$to_a(),"map",[],function t(i){var a=t.$$s==null?this:t.$$s;return i==null&&(i=p),a.$Native(i)},{$$s:r})}),w(y,"$query_element",function(n){var r=this,e=p;return e=this.element.querySelector(n),D(e===null)?p:r.$Native(e)}),w(y,"$query_all_element",function(n){var r=this,e=p;return e=Array.from(this.element.querySelectorAll(n)),ee(r.$Native(e).$to_a(),"map",[],function t(i){var a=t.$$s==null?this:t.$$s;return i==null&&(i=p),a.$Native(i)},{$$s:r})}),w(y,"$doc_root",function(){return document.documentElement}),w(y,"$set_root_attr",function(n,r){return document.documentElement.setAttribute(n,r)}),w(y,"$get_root_attr",function(n){return document.documentElement.getAttribute(n)}),w(y,"$clone_template",function(n){var r=this,e=p;return e=""+r.$camelize(n,!1)+"Target",this[e].content.cloneNode(!0)}),w(y,"$template_first_child",function(n){return n.firstElementChild}),w(y,"$element_add_class",function(n){return this.element.classList.add(n)}),w(y,"$element_remove_class",function(n){return this.element.classList.remove(n)}),w(y,"$element_toggle_class",function(n){return this.element.classList.toggle(n)}),w(y,"$generate_id",function(){var n=this;return n.$js_timestamp()}),w(y,"$target_focus",function(n){var r=this,e=p;return D(r["$has_target?"](n))?(e=""+r.$camelize(n,!1)+"Target",this[e].focus()):p}),w(y,"$target_blur",function(n){var r=this,e=p;return D(r["$has_target?"](n))?(e=""+r.$camelize(n,!1)+"Target",this[e].blur()):p}),w(y,"$parse_int",function(n,r){return r==null&&(r=10),parseInt(n,r)},-2),w(y,"$parse_float",function(n){return parseFloat(n)}),w(y,"$is_nan?",function(n){return Number.isNaN(n)}),w(y,"$parse_int_or",function(n,r){var e=this,t=p;return r==null&&(r=0),t=e.$parse_int(n),D(e["$is_nan?"](t))?r:t},-2),w(y,"$parse_float_or",function(n,r){var e=this,t=p;return r==null&&(r=0),t=e.$parse_float(n),D(e["$is_nan?"](t))?r:t},-2),w(y,"$js_prop",function(n){return this[n.$to_s()]}),w(y,"$js_set_prop",function(n,r){return this[n.$to_s()]=r}),w(y,"$js_has_prop?",function(n){return!!this[n.$to_s()]}),w(y,"$js_call",function(n,r){var e,t,i=p;return e=J(arguments,1),t=e,D(t["$empty?"]())?this[n.$to_s()]():(i=ee(t,"map",[],function(o){return o==null&&(o=p),D(o["$respond_to?"]("to_n"))?o.$to_n():o}),this[n.$to_s()].apply(this,i))},-2),w(y,"$js_call_on",function(n,r,e){var t,i,a=p;return t=J(arguments,2),i=t,D(i["$empty?"]())?n[r.$to_s()]():(a=ee(i,"map",[],function(v){return v==null&&(v=p),D(v["$respond_to?"]("to_n"))?v.$to_n():v}),n[r.$to_s()].apply(n,a))},-3),w(y,"$js_get",function(n,r){return n[r.$to_s()]}),w(y,"$js_set",function(n,r,e){return n[r.$to_s()]=e}),w(y,"$json_parse",function(n){return JSON.parse(n)}),w(y,"$json_stringify",function(n){var r=p;return r=D(n["$respond_to?"]("to_n"))?n.$to_n():n,JSON.stringify(r)}),w(y,"$console_log",function(n){var r,e;return r=J(arguments),e=r,console.log.apply(console,e)},-1),w(y,"$console_warn",function(n){var r,e;return r=J(arguments),e=r,console.warn.apply(console,e)},-1),w(y,"$console_error",function(n){var r,e;return r=J(arguments),e=r,console.error.apply(console,e)},-1),w(y,"$js_string_char_at",function(n,r){return n.charAt(r)}),w(y,"$js_substring",function(n,r,e){return e==null&&(e=p),D(e)?n.substring(r,e):n.substring(r)},-3),w(y,"$js_split",function(n,r){return n.split(r)}),w(y,"$js_trim",function(n){return n.trim()}),w(y,"$js_includes?",function(n,r){return n.includes(r)}),w(y,"$js_equals?",function(n,r){return n===r}),w(y,"$js_loose_equals?",function(n,r){return n==r}),w(y,"$js_random",function(){return Math.random()}),w(y,"$js_min",function(n,r){return Math.min(n,r)}),w(y,"$js_max",function(n,r){return Math.max(n,r)}),w(y,"$js_abs",function(n){return Math.abs(n)}),w(y,"$js_round",function(n){return Math.round(n)}),w(y,"$js_ceil",function(n){return Math.ceil(n)}),w(y,"$js_to_fixed",function(n,r){return n.toFixed(r)}),w(y,"$random_int",function(n){return Math.floor(Math.random()*n)}),w(y,"$js_floor",function(n){return Math.floor(n)}),w(y,"$js_global_exists?",function(n){return typeof window[n]<"u"}),w(y,"$js_global",function(n){return window[n]}),w(y,"$js_new",function(n,r){var e,t,i=p;return e=J(arguments,1),t=e,D(t["$empty?"]())?new n:(i=ee(t,"map",[],function(o){return o==null&&(o=p),o!=null&&typeof o.$to_n=="function"?o.$to_n():o}),Reflect.construct(n,i))},-2),w(y,"$js_define_method",function s(n){var r=s.$$p||p;return s.$$p=null,this[n.$to_s()]=r}),w(y,"$js_define_method_on",function s(n,r){var e=s.$$p||p;return s.$$p=null,n[r.$to_s()]=e}),w(y,"$js_length",function(n){return n.length}),w(y,"$js_map",function s(n){var r=s.$$p||p;return s.$$p=null,n.map(r)}),w(y,"$js_filter",function s(n){var r=s.$$p||p;return s.$$p=null,n.filter(r)}),w(y,"$js_reduce",function s(n,r){var e=s.$$p||p;return s.$$p=null,n.reduce(e,r)}),w(y,"$js_each",function s(n){var r=s.$$p||p;return s.$$p=null,n.forEach(r)}),w(y,"$js_slice",function(n,r,e){return e==null&&(e=p),D(e)?n.slice(r,e):n.slice(r)},-3),w(y,"$js_object",function(){return{}}),w(y,"$js_keys",function(n){return Object.keys(n)}),w(y,"$js_values",function(n){return Object.values(n)}),w(y,"$js_entries",function(n){return Object.entries(n)}),w(y,"$js_unique_count",function(n){return new Set(n).size}),w(y,"$js_fetch",function(n){return fetch(n)}),w(y,"$fetch_json",function s(n){var r=s.$$p||p;s.$$p=null,fetch(n).then(e=>e.json()).then(e=>r.$call(e)).catch(e=>console.error("Fetch error:",e))}),w(y,"$fetch_json_promise",function(n){return fetch(n).then(r=>r.json())}),w(y,"$fetch_json_safe",function(n){return fetch(n).then(function(r){if(!r.ok)throw new Error("Network response was not ok: "+r.status);return r.json()})}),w(y,"$fetch_all_json",function(n){var r=this,e=p;return e=ee(n,"map",[],function t(i){var a=t.$$s==null?this:t.$$s;return i==null&&(i=p),a.$fetch_json_promise(i)},{$$s:r}),Promise.all(e)}),w(y,"$fetch_json_with_handlers",function(n,r){var e,t,i=this,a=p;return r=C(r),e=W(r,"on_success"),t=m(r,"on_error"),t==null&&(t=p),a=i.$fetch_json_safe(n),a=ee(i,"js_then",[a],function(v){return v==null&&(v=p),e.$call(v)}),D(t)?ee(i,"js_catch",[a],function(v){return v==null&&(v=p),t.$call(v)}):ee(i,"js_catch",[a],function o(v){var S=o.$$s==null?this:o.$$s;return v==null&&(v=p),S.$console_error("Fetch error:",v)},{$$s:i})}),w(y,"$promise_all",function(n){return Promise.all(n)}),w(y,"$promise_race",function(n){return Promise.race(n)}),w(y,"$promise_resolve",function(n){var r=p;return r=D(n["$respond_to?"]("to_n"))?n.$to_n():n,Promise.resolve(r)}),w(y,"$promise_reject",function(n){return Promise.reject(n)}),w(y,"$js_then",function s(n){var r=s.$$p||p;return s.$$p=null,n.then(r)}),w(y,"$js_catch",function s(n){var r=s.$$p||p;return s.$$p=null,n.catch(r)}),w(y,"$js_finally",function s(n){var r=s.$$p||p;return s.$$p=null,n.finally(r)}),w(y,"$stimulus_value",function(n){var r=this,e=p;return e=""+r.$camelize(n,!1)+"Value",this[e]}),w(y,"$set_stimulus_value",function(n,r){var e=this,t=p,i=p;return t=""+e.$camelize(n,!1)+"Value",i=D(r["$respond_to?"]("to_n"))?r.$to_n():r,this[t]=i}),w(y,"$has_stimulus_value?",function(n){var r=this,e=p;return e="has"+r.$camelize(n)+"Value",this[e]}),w(y,"$increment_stimulus_value",function(n,r){var e=this;return r==null&&(r=1),e.$set_stimulus_value(n,B(e.$stimulus_value(n),r))},-2),w(y,"$decrement_stimulus_value",function(n,r){var e=this;return r==null&&(r=1),e.$set_stimulus_value(n,ie(e.$stimulus_value(n),r))},-2),w(y,"$toggle_stimulus_value",function(n){var r=this;return r.$set_stimulus_value(n,r.$stimulus_value(n)["$!"]())}),w(y,"$get_class",function(n){var r=this,e=p;return e=""+r.$camelize(n,!1)+"Class",this[e]}),w(y,"$get_classes",function(n){var r=this,e=p;return e=""+r.$camelize(n,!1)+"Classes",Array.from(this[e]||[])}),w(y,"$has_class_definition?",function(n){var r=this,e=p;return e="has"+r.$camelize(n)+"Class",this[e]}),w(y,"$apply_class",function(n,r){var e=this,t=p,i=p;return t=e.$to_native_element(n),i=e.$get_class(r),D(i)?t.classList.add(i):p}),w(y,"$apply_classes",function(n,r){var e=this,t=p,i=p;return t=e.$to_native_element(n),i=e.$get_classes(r),D(i)?t.classList.add(...i):p}),w(y,"$remove_applied_class",function(n,r){var e=this,t=p,i=p;return t=e.$to_native_element(n),i=e.$get_class(r),D(i)?t.classList.remove(i):p}),w(y,"$remove_applied_classes",function(n,r){var e=this,t=p,i=p;return t=e.$to_native_element(n),i=e.$get_classes(r),D(i)?t.classList.remove(...i):p}),w(y,"$has_outlet?",function(n){var r=this,e=p;return e="has"+r.$camelize(n)+"Outlet",this[e]}),w(y,"$get_outlet",function(n){var r=this,e=p;return e=""+r.$camelize(n,!1)+"Outlet",this[e]}),w(y,"$get_outlets",function(n){var r=this,e=p;return e=""+r.$camelize(n,!1)+"Outlets",Array.from(this[e]||[])}),w(y,"$get_outlet_element",function(n){var r=this,e=p;return e=""+r.$camelize(n,!1)+"OutletElement",this[e]}),w(y,"$get_outlet_elements",function(n){var r=this,e=p;return e=""+r.$camelize(n,!1)+"OutletElements",Array.from(this[e]||[])}),w(y,"$call_outlet",function(n,r,e){var t,i,a=this,o=p;return t=J(arguments,2),i=t,D(a["$has_outlet?"](n))?(o=a.$get_outlet(n),ee(a,"js_call_on",[o,r].concat(X(i)))):p},-3),w(y,"$call_all_outlets",function(n,r,e){var t,i,a=this;return t=J(arguments,2),i=t,ee(a.$get_outlets(n),"each",[],function o(v){var S=o.$$s==null?this:o.$$s;return v==null&&(v=p),ee(S,"js_call_on",[v,r].concat(X(i)))},{$$s:a})},-3),w(y,"$stimulus_dispatch",function(n,r){var e,t,i,a,o,v=p,S=p;return r=C(r),e=m(r,"detail"),e==null&&(e=new Map),t=m(r,"target"),t==null&&(t=p),i=m(r,"prefix"),i==null&&(i=p),a=m(r,"bubbles"),a==null&&(a=!0),o=m(r,"cancelable"),o==null&&(o=!0),v=D(e["$respond_to?"]("to_n"))?e.$to_n():e,S={detail:v,bubbles:a,cancelable:o},D(t["$nil?"]())||(S.target=t),D(i["$nil?"]())||(S.prefix=i),this.dispatch(n,S)},-2),w(y,"$stimulus_dispatch_confirm",function(n,r){var e,t=this,i=p;return r=C(r),e=m(r,"detail"),e==null&&(e=new Map),i=t.$stimulus_dispatch(n,new Map([["detail",e],["cancelable",!0]])),!i.defaultPrevented},-2),w(y,"$action_params",function(){return event.params||{}}),w(y,"$action_param",function(n){return(event.params||{})[n.$to_s()]}),w(y,"$action_param_int",function(n,r){var e=this,t=p,i=p;return r==null&&(r=0),t=e.$action_param(n),i=e.$parse_int(t),D(e["$is_nan?"](i))?r:i},-2),w(y,"$action_param_bool",function(n){var r=this,e=p;return e=r.$action_param(n),!!e&&e!=="false"&&e!=="0"}),w(y,"$has_action_param?",function(n){return(event.params||{}).hasOwnProperty(n.$to_s())}),w(y,"$this_application",function(){return this.application}),w(y,"$this_identifier",function(){return this.identifier}),w(y,"$this_element",function(){return this.element}),w(y,"$get_controller",function(n,r){var e=this,t=p;return t=e.$to_native_element(n),this.application.getControllerForElementAndIdentifier(t,r)}),w(y,"$get_controllers",function(n,r){var e=this,t=p;t=e.$to_native_element(n),Array.from(t.querySelectorAll('[data-controller~="'+r+'"]')).map(i=>this.application.getControllerForElementAndIdentifier(i,r)).filter(i=>i!==null)}),w(y,"$this_scope",function(){return this.scope.element}),w(y,"$in_scope?",function(n){var r=this,e=p;return e=r.$to_native_element(n),this.element.contains(e)}),w(y,"$debounce",function s(n){var r=s.$$p||p;s.$$p=null;var e;return function(...t){clearTimeout(e),e=setTimeout(()=>r.$call(),n)}}),w(y,"$throttle",function s(n){var r=s.$$p||p;s.$$p=null;var e=0;return function(...t){var i=Date.now();i-e>=n&&(e=i,r.$call())}}),w(y,"$debounced",function s(n,r){var e=s.$$p||p,t,i=this,a=p,o=p;return i._debounce_timers==null&&(i._debounce_timers=p),s.$$p=null,r==null&&(r="default"),i._debounce_timers=D(a=i._debounce_timers)?a:new Map,o="_debounce_"+r,clearTimeout(i._debounce_timers["$[]"](o)),t=[o,setTimeout(function(){e.$call()},n)],ee(i._debounce_timers,"[]=",t),t[t.length-1]},-2),w(y,"$throttled",function s(n,r){var e=s.$$p||p,t=this,i=p,a=p,o=p,v=p;return t._throttle_times==null&&(t._throttle_times=p),s.$$p=null,r==null&&(r="default"),t._throttle_times=D(i=t._throttle_times)?i:new Map,a="_throttle_"+r,o=Date.now(),v=D(i=t._throttle_times["$[]"](a))?i:0,D(o-v>=n)?(t._throttle_times["$[]="](a,o),e.$call()):p},-2),w(y,"$copy_to_clipboard",function s(n){var r=s.$$p||p;s.$$p=null,navigator.clipboard.writeText(n).then(function(){D(r)&&r.$call()})}),w(y,"$read_from_clipboard",function s(){var n=s.$$p||p;s.$$p=null,navigator.clipboard.readText().then(function(r){n.$call(r)})}),w(y,"$deep_clone",function(n){return JSON.parse(JSON.stringify(n.$to_n()))}),w(y,"$deep_merge",function(n,r){function e(t,i){var a=Object.assign({},t);for(var o in i)i.hasOwnProperty(o)&&(i[o]&&typeof i[o]=="object"&&!Array.isArray(i[o])?a[o]=e(a[o]||{},i[o]):a[o]=i[o]);return a}return e(n.$to_n(),r.$to_n())}),w(y,"$pick",function(n,r){var e,t,i=p;return e=J(arguments,1),t=e,i=new Map,ee(t.$flatten(),"each",[],function(o){var v,S=p,j=p;return o==null&&(o=p),S=o.$to_s(),j=n.$to_n(),D(j.hasOwnProperty(S))?(v=[S,j[S]],ee(i,"[]=",v),v[v.length-1]):p}),i},-2),w(y,"$omit",function(n,r){var e,t,i,a=p,o=p,v=p;return e=J(arguments,1),t=e,a=ee(t.$flatten(),"map",[],"to_s".$to_proc()),o=new Map,v=n.$to_n(),Object.keys(v).forEach(function(S){a.includes(S)||(i=[S,v[S]],ee(o,"[]=",i),i[i.length-1])}),o},-2),w(y,"$unique",function(n){return[...new Set(n.$to_n())]}),w(y,"$intersection",function(n,r){var e=p;return e=new Set(r.$to_n()),n.$to_n().filter(t=>e.has(t))}),w(y,"$difference",function(n,r){var e=p;return e=new Set(r.$to_n()),n.$to_n().filter(t=>!e.has(t))}),w(y,"$union",function(n,r){return[...new Set([...n.$to_n(),...r.$to_n()])]}),w(y,"$valid_email?",function(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}),w(y,"$valid_url?",function(n){try{return new URL(n),!0}catch{return!1}}),w(y,"$valid_phone?",function(n){var r=p;r=n.replace(/[\s\-\(\)\.]/g,"");var e=/^[\+]?[0-9]{10,15}$/;return e.test(r)}),w(y,"$blank?",function(n){return D(n["$nil?"]())?!0:D(typeof n=="string")?n.trim()==="":D(Array.isArray(n))?n.length===0:!1}),w(y,"$present?",function(n){var r=this;return r["$blank?"](n)["$!"]()}),w(y,"$min_length?",function(n,r){return D(n["$nil?"]())?!1:n.length>=r}),w(y,"$max_length?",function(n,r){return D(n["$nil?"]())?!1:n.length<=r}),w(y,"$matches_pattern?",function(n,r){return D(n["$nil?"]())?!1:new RegExp(r).test(n)}),w(y,"$console_styled",function(n,r){return r==null&&(r="color: blue; font-weight: bold;"),console.log("%c"+n,r)},-2),w(y,"$console_group",function s(n,r){var e=s.$$p||p,t;return s.$$p=null,r=C(r),t=m(r,"collapsed"),t==null&&(t=!1),D(t)?console.groupCollapsed(n):console.group(n),e.$call(),console.groupEnd()},-2),w(y,"$console_table",function(n){return console.table(n.$to_n())}),w(y,"$console_time",function(n){var r=p;return r=new Date().toISOString(),console.log("["+r+"] "+n)}),y.$private(),w(y,"$camelize",function(n,r){var e=p,t=p;return r==null&&(r=!0),e=n.$to_s(),D(e["$include?"]("_"))?(t=e.$split("_"),D(r)?ee(t,"map",[],"capitalize".$to_proc()).$join():B([t.$first()],ee(t["$[]"](U(1,-1,!1)),"map",[],"capitalize".$to_proc())).$join()):D(r)?B(e["$[]"](0).$upcase(),e["$[]"](U(1,-1,!1)).$to_s()):B(e["$[]"](0).$downcase(),e["$[]"](U(1,-1,!1)).$to_s())},-2)}(h[0],h)}(E[0],E)}(g[0],g)}(Z[0],Z),te(Z[0],"StimulusHelpers",P(P(P(A("OpalVite"),"Concerns"),"V1"),"StimulusHelpers"))};Opal.modules["controllers/list_controller"]=function($){var z=$.klass,w=$.send2,D=$.find_super,k=$.def,ee=$.send,J=$.truthy,C=$.rb_lt,W=$.rb_plus,m=$.eqeq,B=[],ie=$.$r(B),X=$.nil,U=$.$$$;return $.add_stubs("include,targets=,values=,puts,add_item,render_items,on_window_event,parse_int,update_item,target_value,<,is_nan?,target_set_value,target_focus,action_param_int,action_param,has_action_param?,dispatch_window_event,stimulus_value,set_stimulus_value,private,+,has_target?,get_target,set_html,==,render_item,update_stats,clone_template,template_first_child,query_element_in,set_text,set_attr,append_child,target_set_text"),function(te,Z,A){var p=z(te,Z,"ListController"),P=[p].concat(A),V=$.$r(P),M=p.$$prototype;return M.next_id=X,p.$include(U(U(U(V("OpalVite"),"Concerns"),"V1"),"StimulusHelpers")),p["$targets="](["container","template","nameInput","quantityInput","itemCount","totalQuantity"]),p["$values="](new Map([["items","array"]])),k(p,"$initialize",function L(){var g=L.$$p||X,q=this;return L.$$p=null,w(q,D(q,"initialize",L,!1,!0),"initialize",[],g),q.items_value=[],q.next_id=1}),k(p,"$connect",function(){var g=this;return g.$puts("ListController connected"),g.$add_item("Laptop",2),g.$add_item("Mouse",5),g.$add_item("Keyboard",3),g.$render_items(),ee(g,"on_window_event",["item-updated"],function q(R){var x=q.$$s==null?this:q.$$s,E=X,u=X,d=X,I=X;return R==null&&(R=X),E=R.detail,u=x.$parse_int(E.id),d=E.name,I=x.$parse_int(E.quantity),x.$update_item(u,d,I)},{$$s:g})}),k(p,"$add",function(){var g=this,q=X,R=X;return q=g.$target_value("nameInput"),q=q.trim(),J(q==="")?(g.$puts("Error: Item name cannot be empty"),X):(R=g.$parse_int(g.$target_value("quantityInput")),(J(g["$is_nan?"](R))||J(C(R,1)))&&(R=1),g.$add_item(q,R),g.$target_set_value("nameInput",""),g.$target_set_value("quantityInput","1"),g.$target_focus("nameInput"),g.$render_items())}),k(p,"$edit",function(){var g=this,q=X,R=X,x=X;return q=g.$action_param_int("id"),R=g.$action_param("name"),x=J(g["$has_action_param?"]("quantity"))?g.$action_param_int("quantity",1):1,g.$puts("Edit action called with parameters:"),g.$puts("  id: "+q+" (via action_param_int)"),g.$puts("  name: "+R+" (via action_param)"),g.$puts("  quantity: "+x+" (via has_action_param? check)"),g.$dispatch_window_event("open-modal",new Map([["id",q],["name",R],["quantity",x]]))}),k(p,"$delete",function(){var g=this,q=X,R=X,x=X;return q=g.$action_param_int("id"),J(g["$has_action_param?"]("id"))?(g.$puts("Delete action called with ID: "+q+" (via action_param_int)"),R=g.$stimulus_value("items"),R=R.filter(E=>E.id!==q),g.$set_stimulus_value("items",R),g.$render_items(),J(g["$has_action_param?"]("name"))&&(x=g.$action_param("name")),J(x)?g.$puts("Deleted item: "+x):g.$puts("Deleted item with ID: "+q)):(g.$puts("Error: No ID parameter provided"),X)}),p.$private(),k(p,"$add_item",function(g,q){var R=this,x=X,E=X;return x=R.$stimulus_value("items"),E={id:R.next_id,name:g,quantity:q},x.push(E),R.$set_stimulus_value("items",x),R.next_id=W(R.next_id,1)}),k(p,"$update_item",function(g,q,R){var x=this,E=X;E=x.$stimulus_value("items");const u=E.find(d=>d.id===g);return u&&(u.name=q,u.quantity=R),x.$set_stimulus_value("items",E),x.$render_items(),x.$puts("Updated item "+g+": "+q+" (quantity: "+R+")")}),k(p,"$render_items",function(){var g=this,q=X,R=X,x=X;return!J(g["$has_target?"]("container"))||!J(g["$has_target?"]("template"))?X:(q=g.$stimulus_value("items"),R=g.$get_target("container"),g.$set_html(R,""),x=q.length,m(x,0)?g.$set_html(R,'<div class="text-center py-8 text-gray-500">No items yet. Add one above!</div>'):q.forEach(E=>{g.$render_item(E)}),g.$update_stats())}),k(p,"$render_item",function(g){var q=this,R=X,x=X,E=X,u=X,d=X,I=X,h=X,c=X,l=X,y=X,K=X;return R=q.$clone_template("template"),x=q.$template_first_child(R),E=g.id,u=g.name,d=g.quantity,I=q.$query_element_in(x,"[data-name]"),J(I)&&q.$set_text(I,u),h=q.$query_element_in(x,"[data-quantity]"),J(h)&&q.$set_text(h,d),c=q.$query_element_in(x,"[data-id]"),J(c)&&q.$set_text(c,E),l=q.$query_element_in(x,'[data-action*="edit"]'),J(l)&&(q.$set_attr(l,"data-list-id-param",E),q.$set_attr(l,"data-list-name-param",u),q.$set_attr(l,"data-list-quantity-param",d)),y=q.$query_element_in(x,'[data-action*="delete"]'),J(y)&&(q.$set_attr(y,"data-list-id-param",E),q.$set_attr(y,"data-list-name-param",u)),K=q.$get_target("container"),q.$append_child(K,x)}),k(p,"$update_stats",function(){var g=this,q=X,R=X,x=X;return q=g.$stimulus_value("items"),R=q.length,J(g["$has_target?"]("itemCount"))&&g.$target_set_text("itemCount",R),x=q.reduce((E,u)=>E+u.quantity,0),J(g["$has_target?"]("totalQuantity"))?g.$target_set_text("totalQuantity",x):X}),k(p,"$query_element_in",function(g,q){var R=X;return R=g.querySelector(q),J(R===null)?X:R})}(B[0],ie("StimulusController"),B)};Opal.modules["controllers/modal_controller"]=function($){var z=$.klass,w=$.send,D=$.truthy,k=$.def,ee=$.rb_lt,J=[],C=$.$r(J),W=$.nil,m=$.$$$;return $.add_stubs("include,targets=,puts,on_window_event,open_modal,close_modal,parse_int,<,is_nan?,dispatch_window_event,private,element_remove_class,set_timeout,has_target?,target_focus,element_add_class"),function(B,ie,X){var U=z(B,ie,"ModalController"),te=[U].concat(X),Z=$.$r(te),A=U.$$prototype;return A.current_item_id=W,U.$include(m(m(m(Z("OpalVite"),"Concerns"),"V1"),"StimulusHelpers")),U["$targets="](["overlay","content","title","nameInput","quantityInput"]),k(U,"$connect",function(){var P=this,V=W;return P.$puts("ModalController connected"),V=this.element,w(P,"on_window_event",["open-modal"],function M(L){var g=M.$$s==null?this:M.$$s,q=W,R=W,x=W,E=W,u=W,d=W;return L==null&&(L=W),q=L.detail,R=q.id,x=q.name,E=q.quantity,g.current_item_id=R,u=V.querySelector('[data-modal-target="nameInput"]'),d=V.querySelector('[data-modal-target="quantityInput"]'),D(u)&&(u.value=x),D(d)&&(d.value=E),g.$open_modal()},{$$s:P})}),k(U,"$close",function(){var P=this;return P.$close_modal()}),k(U,"$close_on_overlay",function(){var P=this;return P.$close_modal()}),k(U,"$stop_propagation",function(){return event.stopPropagation()}),k(U,"$save",function(){var P=this,V=W,M=W,L=W,g=W;return V=this.nameInputTarget.value,D(V)&&(V=V.trim()),D(V===""||V==null||typeof V>"u")?(P.$puts("Error: Item name cannot be empty"),W):(M=this.quantityInputTarget.value,L=P.$parse_int(M),(D(P["$is_nan?"](L))||D(ee(L,1)))&&(L=1),g=P.current_item_id,P.$puts("Saving item "+g+": "+V+" (quantity: "+L+")"),P.$dispatch_window_event("item-updated",new Map([["id",g],["name",V],["quantity",L]])),P.$close_modal())}),U.$private(),k(U,"$open_modal",function(){var P=this;return P.$element_remove_class("hidden"),w(P,"set_timeout",[100],function V(){var M=V.$$s==null?this:V.$$s;return D(M["$has_target?"]("nameInput"))?M.$target_focus("nameInput"):W},{$$s:P})}),k(U,"$close_modal",function(){var P=this;return P.$element_add_class("hidden"),P.current_item_id=W})}(J[0],C("StimulusController"),J)};Opal.queue(function($){var z=$.top,w=[],D=$.$r(w);return $.nil,$.add_stubs("require,puts,register_all!"),z.$require("native"),z.$require("opal_stimulus/stimulus_controller"),z.$require("opal_vite/concerns/v1/stimulus_helpers"),z.$require("controllers/list_controller"),z.$require("controllers/modal_controller"),z.$puts("CRUD App - Action Parameters Demo"),z.$puts("Ruby version: "+D("RUBY_VERSION")),D("StimulusController")["$register_all!"](),z.$puts("All controllers registered!")});
